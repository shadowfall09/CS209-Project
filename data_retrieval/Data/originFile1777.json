{"items":[{"tags":["java","android","android-source","robolectric"],"answers":[{"tags":[],"owner":{"account_id":5212321,"reputation":649,"user_id":4168299,"display_name":"utzcoz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639069590,"creation_date":1639069590,"answer_id":70293901,"question_id":70254309,"body_markdown":"I think you have known the command to build those jars from AOSP. The answer is at https://github.com/robolectric/robolectric/issues/6886#issuecomment-987681840: `m -j8 robolectric-host-android_all`.","title":"How to use Android S builds the AOSP Android jars for Robolectric?","body":"<p>I think you have known the command to build those jars from AOSP. The answer is at <a href=\"https://github.com/robolectric/robolectric/issues/6886#issuecomment-987681840\" rel=\"nofollow noreferrer\">https://github.com/robolectric/robolectric/issues/6886#issuecomment-987681840</a>: <code>m -j8 robolectric-host-android_all</code>.</p>\n"}],"owner":{"account_id":23568926,"reputation":1,"user_id":17609306,"display_name":"JohnZhang1000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639069590,"creation_date":1638844941,"question_id":70254309,"body_markdown":"My work need to use some hiden Api. I want to know how can we build a jar lilkes android-all-10-robolectric-5803371.jar for Android S, I saw some scripts shell here https://github.com/robolectric/robolectric/blob/master/scripts/build-android.sh ,but its doesn&#39;t show how to build a jar for Android S. Does any one knows how to do it? I would be appreciated.","title":"How to use Android S builds the AOSP Android jars for Robolectric?","body":"<p>My work need to use some hiden Api. I want to know how can we build a jar lilkes android-all-10-robolectric-5803371.jar for Android S, I saw some scripts shell here <a href=\"https://github.com/robolectric/robolectric/blob/master/scripts/build-android.sh\" rel=\"nofollow noreferrer\">https://github.com/robolectric/robolectric/blob/master/scripts/build-android.sh</a> ,but its doesn't show how to build a jar for Android S. Does any one knows how to do it? I would be appreciated.</p>\n"},{"tags":["java","intellij-idea","gwt","heap-memory","smartgwt"],"comments":[{"owner":{"account_id":928318,"reputation":361,"user_id":958643,"accept_rate":87,"display_name":"Alex A. Renoire"},"score":0,"creation_date":1331934573,"post_id":9744771,"comment_id":12395099,"body_markdown":"Well, gwt has its own compiler and it has its own heap memory settings. \nSo I was trying to set java memory settings while error was sent from gwt compiler.","body":"Well, gwt has its own compiler and it has its own heap memory settings.  So I was trying to set java memory settings while error was sent from gwt compiler."}],"answers":[{"tags":[],"owner":{"account_id":1075118,"reputation":58,"user_id":1073443,"accept_rate":67,"display_name":"lhuang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1332174027,"creation_date":1332174027,"answer_id":9773842,"question_id":9744771,"body_markdown":"I&#39;ve been using gwt+smartgwt+hibernate, I&#39;ve also met this problem. But, recently I haven&#39;t this problem.\r\n\r\nSo do you use ant build and hosted mode?\r\nHere is my build file configuration of jvmarg value both for GWT Compile and java compile.\r\n \r\n      &lt;!-- add jvmarg -Xss16M or similar if you see a StackOverflowError --&gt;\r\n      &lt;jvmarg value=&quot;-Xmx1025M&quot;/&gt; \r\n      &lt;jvmarg value=&quot;-Xms512M&quot;/&gt; \r\n      &lt;jvmarg value=&quot;-Xss16M&quot;/&gt;\r\n\r\n","title":"smartgwt gc overhead limit exceeded","body":"<p>I've been using gwt+smartgwt+hibernate, I've also met this problem. But, recently I haven't this problem.</p>\n\n<p>So do you use ant build and hosted mode?\nHere is my build file configuration of jvmarg value both for GWT Compile and java compile.</p>\n\n<pre><code>  &lt;!-- add jvmarg -Xss16M or similar if you see a StackOverflowError --&gt;\n  &lt;jvmarg value=\"-Xmx1025M\"/&gt; \n  &lt;jvmarg value=\"-Xms512M\"/&gt; \n  &lt;jvmarg value=\"-Xss16M\"/&gt;\n</code></pre>\n"}],"owner":{"account_id":928318,"reputation":361,"user_id":958643,"accept_rate":87,"display_name":"Alex A. Renoire"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1514,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":9773842,"answer_count":1,"score":1,"last_activity_date":1639069576,"creation_date":1331933454,"question_id":9744771,"body_markdown":"Java + gwt + hibernate =&gt; the compilation has no errors\r\nJava + gwt + hibernate + smartgwt = gc overhead limit exceeded\r\nI just add to project.gwt.xml the string &quot;inherits name=&#39;com.smartgwt.SmartGwt&#39;/&quot; and get OutOfMemoryError\r\nI&#39;ve found a work-around of the same error in grails and it says I must vary the heapsize parameter of compiler. I&#39;ve set in Idea java compiler maximum heap size = 512, 1024 and more, but still doesn&#39;t work.\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;module rename-to=&#39;library&#39;&gt;\r\n          &lt;!-- Inherit the core Web Toolkit stuff.                        --&gt;\r\n     &lt;inherits name=&#39;com.google.gwt.user.User&#39;/&gt;\r\n     &lt;inherits name=&#39;com.smartgwt.&#39;/&gt;\r\n\r\n    &lt;!-- Inherit the default GWT style sheet.  You can change       --&gt;\r\n    &lt;!-- the theme of your GWT application by uncommenting          --&gt;\r\n    &lt;!-- any one of the following lines.                            --&gt;\r\n    &lt;inherits name=&#39;com.google.gwt.user.theme.clean.Clean&#39;/&gt;\r\n    &lt;!-- &lt;inherits name=&#39;com.google.gwt.user.theme.standard.Standard&#39;/&gt; --&gt;\r\n    &lt;!-- &lt;inherits name=&#39;com.google.gwt.user.theme.chrome.Chrome&#39;/&gt; --&gt;\r\n    &lt;!-- &lt;inherits name=&#39;com.google.gwt.user.theme.dark.Dark&#39;/&gt;     --&gt;\r\n\r\n    &lt;!-- Other module inherits                                      --&gt;\r\n\r\n    &lt;!-- Specify the app entry point class.                         --&gt;\r\n    &lt;entry-point class=&#39;ru.leti.alexeeva.client.Library&#39;/&gt;\r\n\r\n     &lt;!-- Specify the app servlets.                   --&gt;\r\n    &lt;servlet path=&#39;/server&#39; class=&#39;ru.leti.alexeeva.server.LibraryServiceImpl&#39;/&gt;\r\n\r\n    &lt;!-- Specify the paths for translatable code                    --&gt;\r\n    &lt;source path=&#39;client&#39;/&gt;\r\n    &lt;source path=&#39;shared&#39;/&gt;\r\n\r\n     &lt;/module&gt;","title":"smartgwt gc overhead limit exceeded","body":"<p>Java + gwt + hibernate => the compilation has no errors\nJava + gwt + hibernate + smartgwt = gc overhead limit exceeded\nI just add to project.gwt.xml the string \"inherits name='com.smartgwt.SmartGwt'/\" and get OutOfMemoryError\nI've found a work-around of the same error in grails and it says I must vary the heapsize parameter of compiler. I've set in Idea java compiler maximum heap size = 512, 1024 and more, but still doesn't work.</p>\n\n<pre><code>    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;module rename-to='library'&gt;\n      &lt;!-- Inherit the core Web Toolkit stuff.                        --&gt;\n &lt;inherits name='com.google.gwt.user.User'/&gt;\n &lt;inherits name='com.smartgwt.'/&gt;\n\n&lt;!-- Inherit the default GWT style sheet.  You can change       --&gt;\n&lt;!-- the theme of your GWT application by uncommenting          --&gt;\n&lt;!-- any one of the following lines.                            --&gt;\n&lt;inherits name='com.google.gwt.user.theme.clean.Clean'/&gt;\n&lt;!-- &lt;inherits name='com.google.gwt.user.theme.standard.Standard'/&gt; --&gt;\n&lt;!-- &lt;inherits name='com.google.gwt.user.theme.chrome.Chrome'/&gt; --&gt;\n&lt;!-- &lt;inherits name='com.google.gwt.user.theme.dark.Dark'/&gt;     --&gt;\n\n&lt;!-- Other module inherits                                      --&gt;\n\n&lt;!-- Specify the app entry point class.                         --&gt;\n&lt;entry-point class='ru.leti.alexeeva.client.Library'/&gt;\n\n &lt;!-- Specify the app servlets.                   --&gt;\n&lt;servlet path='/server' class='ru.leti.alexeeva.server.LibraryServiceImpl'/&gt;\n\n&lt;!-- Specify the paths for translatable code                    --&gt;\n&lt;source path='client'/&gt;\n&lt;source path='shared'/&gt;\n\n &lt;/module&gt;\n</code></pre>\n"},{"tags":["java","intellij-idea","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":3169,"reputation":24379,"user_id":4510,"display_name":"Bas Leijdekkers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1477552491,"creation_date":1477552491,"answer_id":40278414,"question_id":40268234,"body_markdown":"2048M is too much memory for a 32 bit JVM. Try to lower the heap size setting. Another option would be to run IntelliJ IDEA on a 64 bit JVM, which it should be able to do without any problems. \r\n\r\nTo further investigate the problem, you can also inspect the build.log. Use the `Help | Show Log in Explorer` menu item and then look in the `build-log` folder to find it. It should contain more information about why the build process was terminated.","title":"IntelliJ heap size error after increasing memory","body":"<p>2048M is too much memory for a 32 bit JVM. Try to lower the heap size setting. Another option would be to run IntelliJ IDEA on a 64 bit JVM, which it should be able to do without any problems. </p>\n\n<p>To further investigate the problem, you can also inspect the build.log. Use the <code>Help | Show Log in Explorer</code> menu item and then look in the <code>build-log</code> folder to find it. It should contain more information about why the build process was terminated.</p>\n"}],"owner":{"account_id":7220073,"reputation":95,"user_id":5510967,"accept_rate":56,"display_name":"moutaindwarf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":730,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":40278414,"answer_count":1,"score":0,"last_activity_date":1639069564,"creation_date":1477501552,"question_id":40268234,"body_markdown":"I get the following error after increasing the heap size to 2048 in IntelliJ 2016.1.1 \r\n\r\n(I&#39;m running with Java in 32 bit, as an included library is not available in 64bit.)\r\n\r\nI have so far no experiences with compiler errors due to JVM so any help is appreciated.\r\n\r\n\r\nError:Abnormal build process termination: \r\n&quot;C:\\Program Files (x86)\\Java32\\jdk1.8.0_101\\bin\\java&quot; -Xmx2048m -Djava.awt.headless=true -Djava.endorsed.dirs=\\&quot;\\&quot; -Djdt.compiler.useSingleThread=true -Dcompile.parallel=false -Drebuild.on.dependency.change=true -Djava.net.preferIPv4Stack=true -Dio.netty.initialSeedUniquifier=-4014826147147167521 -Dfile.encoding=windows-1252 -Djps.file.types.component.name=FileTypeManager -Duser.language=fr -Duser.country=FR -Didea.paths.selector=IntelliJIdea2016.1 &quot;-Didea.home.path=C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 2016.1.1&quot; -Didea.config.path=C:\\Users\\Yann\\.IntelliJIdea2016.1\\config -Didea.plugins.path=C:\\Users\\Yann\\.IntelliJIdea2016.1\\config\\plugins -Djps.log.dir=C:/Users/Yann/.IntelliJIdea2016.1/system/log/build-log -Djava.io.tmpdir=C:/Users/Yann/.IntelliJIdea2016.1/system/compile-server/_temp_ -Dkotlin.daemon.enabled -Dkotlin.daemon.client.alive.path=\\&quot;C:\\Users\\Yann\\AppData\\Local\\Temp\\kotlin-idea-5807041744380420603-is-running\\&quot; -classpath &quot;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jps-launcher.jar;C:/Program Files (x86)/Java32/jdk1.8.0_101/lib/tools.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/optimizedFileManager.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/ecj-4.5.2.jar&quot; org.jetbrains.jps.cmdline.Launcher &quot;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/resources_en.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/oromatcher.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/protobuf-2.5.0.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jsr166e.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/asm-all.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/util.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/javac2.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/annotations.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jna-platform.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/nanoxml-2.2.3.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jps-builders.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/trove4j.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/rt/jps-plugin-system.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jps-model.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/forms_rt.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jna.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/idea_rt.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/netty-all-4.1.0.Beta8.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jgoodies-forms.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jdom.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/log4j.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/picocontainer.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/snappy-in-java-0.3.1.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/openapi.jar;;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/commons-io-1.4.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-base-services-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-base-services-groovy-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-cli-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-core-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-messaging-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-model-core-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-model-groovy-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-native-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-resources-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-tooling-api-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-tooling-extension-api.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-tooling-extension-impl.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-wrapper-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/guava-jdk5-17.0.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/jna-3.2.7.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/jsr305-1.3.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/kryo-2.22.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/minlog-1.2.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-freebsd-amd64-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-freebsd-i386-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-linux-amd64-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-linux-i386-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-osx-amd64-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-osx-i386-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-windows-amd64-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-windows-i386-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/objenesis-1.2.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/reflectasm-1.07.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/resources_en.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/gson-2.5.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/ant/lib/ant-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/devkit/lib/devkit-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/uiDesigner/lib/jps/ui-designer-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/IntelliLang/lib/intellilang-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Groovy/lib/groovy-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Groovy/lib/groovy-rt-constants.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/eclipse/lib/eclipse-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/eclipse/lib/common-eclipse-util.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/maven/lib/maven-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/maven/lib/maven3/lib/plexus-utils-2.0.6.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/osmorc-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/bndlib-3.0.0.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/bndlib-plugins-3.0.0.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/plexus-utils-3.0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/bundlor-all.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/aspectj/lib/aspectj-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/flex/lib/flex-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/flex/lib/flex-shared.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/JavaEE/lib/jps/javaee-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/JavaEE/lib/jps/jpa-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/weblogicIntegration/lib/jps/weblogic-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/dmServer/lib/dmServer-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/GwtStudio/lib/gwt-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/GoogleAppEngine/lib/google-app-engine-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/GoogleAppEngine/lib/appEngine-runtime.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Grails/lib/grails-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Grails/lib/grails-compiler-patch.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/jps/android-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/jps/android-gradle-jps.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/android-common.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/android-rt.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/sdk-common.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/sdklib.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/common.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/jarutils.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/layoutlib-api.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/manifest-merger.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/scala-library.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/compiler-settings.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/nailgun.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/scala-jps-plugin.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/sbt-interface.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/incremental-compiler.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/jline.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/scala-library.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/scala-play-2-jps-plugin.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/launcher/sbt-launch.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/jps/kotlin-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-runtime.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-reflect.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-android-extensions-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-android-extensions-compiler-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/javaFX/lib/javaFX-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/javaFX/lib/common-javaFX-plugin.jar&quot; org.jetbrains.jps.cmdline.BuildMain 127.0.0.1 55014 f4d655a1-23db-4ba8-84ab-ebc487bef09d C:/Users/Yann/.IntelliJIdea2016.1/system/compile-server\r\n\r\n\r\n\r\n","title":"IntelliJ heap size error after increasing memory","body":"<p>I get the following error after increasing the heap size to 2048 in IntelliJ 2016.1.1 </p>\n\n<p>(I'm running with Java in 32 bit, as an included library is not available in 64bit.)</p>\n\n<p>I have so far no experiences with compiler errors due to JVM so any help is appreciated.</p>\n\n<p>Error:Abnormal build process termination: \n\"C:\\Program Files (x86)\\Java32\\jdk1.8.0_101\\bin\\java\" -Xmx2048m -Djava.awt.headless=true -Djava.endorsed.dirs=\\\"\\\" -Djdt.compiler.useSingleThread=true -Dcompile.parallel=false -Drebuild.on.dependency.change=true -Djava.net.preferIPv4Stack=true -Dio.netty.initialSeedUniquifier=-4014826147147167521 -Dfile.encoding=windows-1252 -Djps.file.types.component.name=FileTypeManager -Duser.language=fr -Duser.country=FR -Didea.paths.selector=IntelliJIdea2016.1 \"-Didea.home.path=C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 2016.1.1\" -Didea.config.path=C:\\Users\\Yann.IntelliJIdea2016.1\\config -Didea.plugins.path=C:\\Users\\Yann.IntelliJIdea2016.1\\config\\plugins -Djps.log.dir=C:/Users/Yann/.IntelliJIdea2016.1/system/log/build-log -Djava.io.tmpdir=C:/Users/Yann/.IntelliJIdea2016.1/system/compile-server/<em>temp</em> -Dkotlin.daemon.enabled -Dkotlin.daemon.client.alive.path=\\\"C:\\Users\\Yann\\AppData\\Local\\Temp\\kotlin-idea-5807041744380420603-is-running\\\" -classpath \"C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jps-launcher.jar;C:/Program Files (x86)/Java32/jdk1.8.0_101/lib/tools.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/optimizedFileManager.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/ecj-4.5.2.jar\" org.jetbrains.jps.cmdline.Launcher \"C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/resources_en.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/oromatcher.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/protobuf-2.5.0.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jsr166e.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/asm-all.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/util.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/javac2.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/annotations.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jna-platform.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/nanoxml-2.2.3.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jps-builders.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/trove4j.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/rt/jps-plugin-system.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jps-model.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/forms_rt.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jna.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/idea_rt.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/netty-all-4.1.0.Beta8.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jgoodies-forms.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/jdom.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/log4j.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/picocontainer.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/snappy-in-java-0.3.1.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/openapi.jar;;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/commons-io-1.4.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-base-services-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-base-services-groovy-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-cli-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-core-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-messaging-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-model-core-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-model-groovy-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-native-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-resources-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-tooling-api-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-tooling-extension-api.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-tooling-extension-impl.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-wrapper-2.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/guava-jdk5-17.0.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/jna-3.2.7.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/jsr305-1.3.9.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/kryo-2.22.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/minlog-1.2.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-freebsd-amd64-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-freebsd-i386-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-linux-amd64-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-linux-i386-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-osx-amd64-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-osx-i386-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-windows-amd64-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/native-platform-windows-i386-0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/objenesis-1.2.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/reflectasm-1.07.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/resources_en.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/lib/gson-2.5.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/ant/lib/ant-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/devkit/lib/devkit-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/uiDesigner/lib/jps/ui-designer-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/IntelliLang/lib/intellilang-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Groovy/lib/groovy-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Groovy/lib/groovy-rt-constants.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/eclipse/lib/eclipse-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/eclipse/lib/common-eclipse-util.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/maven/lib/maven-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/maven/lib/maven3/lib/plexus-utils-2.0.6.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/osmorc-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/bndlib-3.0.0.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/bndlib-plugins-3.0.0.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/plexus-utils-3.0.10.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/osmorc/lib/bundlor-all.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/aspectj/lib/aspectj-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/flex/lib/flex-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/flex/lib/flex-shared.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/gradle/lib/gradle-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/JavaEE/lib/jps/javaee-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/JavaEE/lib/jps/jpa-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/weblogicIntegration/lib/jps/weblogic-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/dmServer/lib/dmServer-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/GwtStudio/lib/gwt-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/GoogleAppEngine/lib/google-app-engine-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/GoogleAppEngine/lib/appEngine-runtime.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Grails/lib/grails-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Grails/lib/grails-compiler-patch.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/jps/android-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/jps/android-gradle-jps.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/android-common.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/android-rt.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/sdk-common.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/sdklib.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/common.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/jarutils.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/layoutlib-api.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/android/lib/manifest-merger.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/scala-library.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/compiler-settings.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/nailgun.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/scala-jps-plugin.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/sbt-interface.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/incremental-compiler.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/jps/jline.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/scala-library.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/lib/scala-play-2-jps-plugin.jar;C:/Users/Yann/.IntelliJIdea2016.1/config/plugins/Scala/launcher/sbt-launch.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/jps/kotlin-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-runtime.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-reflect.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-android-extensions-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/Kotlin/lib/kotlin-android-extensions-compiler-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/javaFX/lib/javaFX-jps-plugin.jar;C:/Program Files (x86)/JetBrains/IntelliJ IDEA 2016.1.1/plugins/javaFX/lib/common-javaFX-plugin.jar\" org.jetbrains.jps.cmdline.BuildMain 127.0.0.1 55014 f4d655a1-23db-4ba8-84ab-ebc487bef09d C:/Users/Yann/.IntelliJIdea2016.1/system/compile-server</p>\n"},{"tags":["java","windows","intellij-idea","environment-variables","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":49385,"reputation":93759,"user_id":147024,"display_name":"yole"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1538378580,"creation_date":1538378580,"answer_id":52586322,"question_id":52581389,"body_markdown":"The &quot;Build process heap size&quot; option, as its name says, increases the heap size for the build process, not for your application. To increase the heap size for your application, add an -Xmx option to the &quot;VM options&quot; field in the settings of the run configuration that you use to run your application.","title":"Idea Intellij: can&#39;t increase heap size","body":"<p>The \"Build process heap size\" option, as its name says, increases the heap size for the build process, not for your application. To increase the heap size for your application, add an -Xmx option to the \"VM options\" field in the settings of the run configuration that you use to run your application.</p>\n"},{"tags":[],"owner":{"account_id":9232603,"reputation":87,"user_id":6858219,"display_name":"Dmitry"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1538479960,"creation_date":1538479960,"answer_id":52607526,"question_id":52581389,"body_markdown":"&quot;Help&quot; &gt;&gt; &quot;Edit Custom VM Options&quot; &gt;&gt; edit -Xmx parameter","title":"Idea Intellij: can&#39;t increase heap size","body":"<p>\"Help\" >> \"Edit Custom VM Options\" >> edit -Xmx parameter</p>\n"}],"owner":{"account_id":6099767,"reputation":4936,"user_id":4759176,"accept_rate":74,"display_name":"parsecer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":565,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1639069537,"creation_date":1538335639,"question_id":52581389,"body_markdown":"I&#39;ve been working with a library that demanded more heap space that was provided. So I tried to increase the heap space:\r\n\r\nfirst I added an environment variable on Windows: going to \r\n\r\n**Computer - Settings - Environment Variables - System Variables** **-** adding *JAVA_OPTS: -Xms256m -Xmx2024M*.\r\n\r\nThen I went to Idea Intellij and tried to set a big enough heap size there too:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHowever when I run this code:\r\n\r\n        long heapSize = Runtime.getRuntime().totalMemory();\r\n        System.out.println(heapSize);\r\n\r\n        long heapFreeSize = Runtime.getRuntime().freeMemory();\r\n        System.out.println(heapFreeSize);\r\n\r\nIt prints out 128974848 and 124872256 bytes, which translates to 128 and 124 MBytes. How would I fix it and increase the heap size for real?\r\n\r\n  [1]: https://i.stack.imgur.com/2OpBZ.png","title":"Idea Intellij: can&#39;t increase heap size","body":"<p>I've been working with a library that demanded more heap space that was provided. So I tried to increase the heap space:</p>\n\n<p>first I added an environment variable on Windows: going to </p>\n\n<p><strong>Computer - Settings - Environment Variables - System Variables</strong> <strong>-</strong> adding <em>JAVA_OPTS: -Xms256m -Xmx2024M</em>.</p>\n\n<p>Then I went to Idea Intellij and tried to set a big enough heap size there too:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2OpBZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2OpBZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>However when I run this code:</p>\n\n<pre><code>    long heapSize = Runtime.getRuntime().totalMemory();\n    System.out.println(heapSize);\n\n    long heapFreeSize = Runtime.getRuntime().freeMemory();\n    System.out.println(heapFreeSize);\n</code></pre>\n\n<p>It prints out 128974848 and 124872256 bytes, which translates to 128 and 124 MBytes. How would I fix it and increase the heap size for real?</p>\n"},{"tags":["java","maven","testng","heap-memory"],"comments":[{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":1,"creation_date":1481303864,"post_id":41065616,"comment_id":69338274,"body_markdown":"Look into the surefire reports that were generated, inside `target/surefire-reports`, you&#39;ll have the full stacktrace.","body":"Look into the surefire reports that were generated, inside <code>target&#47;surefire-reports</code>, you&#39;ll have the full stacktrace."},{"owner":{"account_id":1939636,"reputation":28457,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1481310841,"post_id":41065616,"comment_id":69341743,"body_markdown":"Are you running the tests in `parallel`. If so, what kind of parallelism have you set in the `testng.xml`?","body":"Are you running the tests in <code>parallel</code>. If so, what kind of parallelism have you set in the <code>testng.xml</code>?"},{"owner":{"account_id":9559862,"reputation":361,"user_id":7101112,"accept_rate":50,"display_name":"ejtt"},"score":0,"creation_date":1481324008,"post_id":41065616,"comment_id":69347337,"body_markdown":"I am not using `parallel` settings in my testng.xml, but I have configured some tests to run with 15 threads by using the threadPoolSize attribute.","body":"I am not using <code>parallel</code> settings in my testng.xml, but I have configured some tests to run with 15 threads by using the threadPoolSize attribute."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1481356646,"post_id":41065616,"comment_id":69353417,"body_markdown":"How have you configured Maven to run with? Are you forking the tests or reusing the JVM?","body":"How have you configured Maven to run with? Are you forking the tests or reusing the JVM?"},{"owner":{"account_id":9559862,"reputation":361,"user_id":7101112,"accept_rate":50,"display_name":"ejtt"},"score":0,"creation_date":1481396898,"post_id":41065616,"comment_id":69364655,"body_markdown":"I am not using the surefire plugin, so I guess it is the default: forkCount=1/reuseForks=true","body":"I am not using the surefire plugin, so I guess it is the default: forkCount=1/reuseForks=true"},{"owner":{"account_id":471893,"reputation":8441,"user_id":879977,"display_name":"niharika_neo"},"score":1,"creation_date":1481516475,"post_id":41065616,"comment_id":69393102,"body_markdown":"I had the same problem couple of years back.  Basically, testng stores results of each test no matter whether listener is enabled or not, it HAS to since it has to atleast give count of the tests that passed or failed.  I had millions of items to test, and testng usually conked at around 80,000 tests.  I finally had to come up with my own Executor based tests and my own reporting to get around this.  Imagine reports for a million data :)  In any case, you should profile and check in case your tests are leaking something.","body":"I had the same problem couple of years back.  Basically, testng stores results of each test no matter whether listener is enabled or not, it HAS to since it has to atleast give count of the tests that passed or failed.  I had millions of items to test, and testng usually conked at around 80,000 tests.  I finally had to come up with my own Executor based tests and my own reporting to get around this.  Imagine reports for a million data :)  In any case, you should profile and check in case your tests are leaking something."}],"answers":[{"tags":[],"owner":{"account_id":8347952,"reputation":5186,"user_id":6271180,"display_name":"Benoit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1481536630,"creation_date":1481535824,"answer_id":41097938,"question_id":41065616,"body_markdown":"The fact that you hardware has 4GB Ram does not imply that its all used for JVM heap. The Heap size has a maximum value defined by parameter `-Xmx`.\r\n\r\nIn your case, with 4GB available, I would try to run the tests with this option :\r\n\r\n    java -Xmx2g mytest\r\n\r\nThis will allow up to 2GB for the heap.","title":"OutOfMemoryError even with TestNG listeners/reporters disabled","body":"<p>The fact that you hardware has 4GB Ram does not imply that its all used for JVM heap. The Heap size has a maximum value defined by parameter <code>-Xmx</code>.</p>\n\n<p>In your case, with 4GB available, I would try to run the tests with this option :</p>\n\n<pre><code>java -Xmx2g mytest\n</code></pre>\n\n<p>This will allow up to 2GB for the heap.</p>\n"}],"owner":{"account_id":9559862,"reputation":361,"user_id":7101112,"accept_rate":50,"display_name":"ejtt"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":912,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":41097938,"answer_count":1,"score":2,"last_activity_date":1639069416,"creation_date":1481303787,"question_id":41065616,"body_markdown":"I&#39;m currently trying to run approximately 100,000 tests on a 32-bit Windows machine with 4GB RAM. I have disabled the default listeners with the command `-usedefaultlisteners false` and I don&#39;t have any custom listeners/reporters configured. However, the suite fails with the following stacktrace:\r\n\r\n\r\n    Exception in thread &quot;pool-2-thread-5&quot; Exception in thread &quot;pool-2-thread-7&quot; java.lang.OutOfMemoryError: Java heap space\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;pool-2-thread-2&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;pool-2-thread-6&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;pool-2-thread-4&quot; java.lang.OutOfMemoryError: Java heap space\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n\r\nIs it possible that even without the listeners, TestNG configurations need more than 4GB RAM? \r\n\r\nWhat process is requiring so much memory? \r\n\r\nAre there any optimizations/workarounds to let these tests run?","title":"OutOfMemoryError even with TestNG listeners/reporters disabled","body":"<p>I'm currently trying to run approximately 100,000 tests on a 32-bit Windows machine with 4GB RAM. I have disabled the default listeners with the command <code>-usedefaultlisteners false</code> and I don't have any custom listeners/reporters configured. However, the suite fails with the following stacktrace:</p>\n\n<pre><code>Exception in thread \"pool-2-thread-5\" Exception in thread \"pool-2-thread-7\" java.lang.OutOfMemoryError: Java heap space\njava.lang.OutOfMemoryError: Java heap space\nException in thread \"pool-2-thread-2\" java.lang.OutOfMemoryError: Java heap space\nException in thread \"pool-2-thread-6\" java.lang.OutOfMemoryError: Java heap space\nException in thread \"pool-2-thread-4\" java.lang.OutOfMemoryError: Java heap space\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n\n<p>Is it possible that even without the listeners, TestNG configurations need more than 4GB RAM? </p>\n\n<p>What process is requiring so much memory? </p>\n\n<p>Are there any optimizations/workarounds to let these tests run?</p>\n"},{"tags":["java","image","image-processing","pixel"],"comments":[{"owner":{"account_id":3933264,"reputation":103331,"user_id":3250829,"display_name":"rayryeng"},"score":0,"creation_date":1406665105,"post_id":25022578,"comment_id":38916442,"body_markdown":"I&#39;m assuming you&#39;re using a `BufferedImage` class?  This edit is pretty simple.  All you&#39;d have to do is set each pixel in your image to be the difference.  I&#39;ll write an answer for you.","body":"I&#39;m assuming you&#39;re using a <code>BufferedImage</code> class?  This edit is pretty simple.  All you&#39;d have to do is set each pixel in your image to be the difference.  I&#39;ll write an answer for you."}],"answers":[{"tags":[],"owner":{"account_id":3933264,"reputation":103331,"user_id":3250829,"display_name":"rayryeng"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1464713260,"creation_date":1406665570,"answer_id":25024344,"question_id":25022578,"body_markdown":"What I would do is set each pixel to be the difference between one pixel in one image and the corresponding pixel in the other image.  The difference that is being calculated in your original code is based on the [L&lt;sub&gt;1&lt;/sub&gt; norm](http://en.wikipedia.org/wiki/Norm_(mathematics)#Taxicab_norm_or_Manhattan_norm).  This is also called the [sum of absolute differences](http://en.wikipedia.org/wiki/Sum_of_absolute_differences) too.  In any case, write a method that would take in your two images, and return an image of the same size that sets each location to be the difference for each pair of pixels that share the same location in the final image. Basically, this will give you an indication as to which pixels are different.  The whiter the pixel, the more difference there is between these two corresponding locations.\r\n\r\nI&#39;m also going to assume you&#39;re using a `BufferedImage` class, as `getRGB()` methods are used and you are bit-shifting to access individual channels.  In other words, make a method that looks like this:\r\n\r\n    public static BufferedImage getDifferenceImage(BufferedImage img1, BufferedImage img2) {\r\n        int width1 = img1.getWidth(); // Change - getWidth() and getHeight() for BufferedImage\r\n        int width2 = img2.getWidth(); // take no arguments\r\n       \tint height1 = img1.getHeight();\r\n      \tint height2 = img2.getHeight();\r\n        if ((width1 != width2) || (height1 != height2)) {\r\n        \tSystem.err.println(&quot;Error: Images dimensions mismatch&quot;);\r\n        \tSystem.exit(1);\r\n        }\r\n\r\n        // NEW - Create output Buffered image of type RGB\r\n        BufferedImage outImg = new BufferedImage(width1, height1, BufferedImage.TYPE_INT_RGB);\r\n\r\n        // Modified - Changed to int as pixels are ints\r\n        int diff;\r\n        int result; // Stores output pixel\r\n        for (int i = 0; i &lt; height1; i++) {\r\n      \t\tfor (int j = 0; j &lt; width1; j++) {\r\n        \t\tint rgb1 = img1.getRGB(j, i);\r\n        \t\tint rgb2 = img2.getRGB(j, i);\r\n        \t\tint r1 = (rgb1 &gt;&gt; 16) &amp; 0xff;\r\n        \t\tint g1 = (rgb1 &gt;&gt; 8) &amp; 0xff;\r\n        \t\tint b1 = (rgb1) &amp; 0xff;\r\n        \t\tint r2 = (rgb2 &gt;&gt; 16) &amp; 0xff;\r\n        \t\tint g2 = (rgb2 &gt;&gt; 8) &amp; 0xff;\r\n        \t\tint b2 = (rgb2) &amp; 0xff;\r\n        \t\tdiff = Math.abs(r1 - r2); // Change\r\n        \t\tdiff += Math.abs(g1 - g2);\r\n        \t\tdiff += Math.abs(b1 - b2);\r\n                diff /= 3; // Change - Ensure result is between 0 - 255\r\n                // Make the difference image gray scale\r\n                // The RGB components are all the same\r\n                result = (diff &lt;&lt; 16) | (diff &lt;&lt; 8) | diff;\r\n                outImg.setRGB(j, i, result); // Set result\r\n        \t}\r\n       \t}\r\n\r\n        // Now return\r\n        return outImg;\r\n    }\r\n\r\n---\r\n\r\nTo call this method, simply do:\r\n\r\n    outImg = getDifferenceImage(img1, img2);\r\n\r\nThis is assuming that you are calling this within a method of your class.  Have fun and good luck!","title":"Highlight differences between images","body":"<p>What I would do is set each pixel to be the difference between one pixel in one image and the corresponding pixel in the other image.  The difference that is being calculated in your original code is based on the <a href=\"http://en.wikipedia.org/wiki/Norm_(mathematics)#Taxicab_norm_or_Manhattan_norm\" rel=\"noreferrer\">L<sub>1</sub> norm</a>.  This is also called the <a href=\"http://en.wikipedia.org/wiki/Sum_of_absolute_differences\" rel=\"noreferrer\">sum of absolute differences</a> too.  In any case, write a method that would take in your two images, and return an image of the same size that sets each location to be the difference for each pair of pixels that share the same location in the final image. Basically, this will give you an indication as to which pixels are different.  The whiter the pixel, the more difference there is between these two corresponding locations.</p>\n\n<p>I'm also going to assume you're using a <code>BufferedImage</code> class, as <code>getRGB()</code> methods are used and you are bit-shifting to access individual channels.  In other words, make a method that looks like this:</p>\n\n<pre><code>public static BufferedImage getDifferenceImage(BufferedImage img1, BufferedImage img2) {\n    int width1 = img1.getWidth(); // Change - getWidth() and getHeight() for BufferedImage\n    int width2 = img2.getWidth(); // take no arguments\n    int height1 = img1.getHeight();\n    int height2 = img2.getHeight();\n    if ((width1 != width2) || (height1 != height2)) {\n        System.err.println(\"Error: Images dimensions mismatch\");\n        System.exit(1);\n    }\n\n    // NEW - Create output Buffered image of type RGB\n    BufferedImage outImg = new BufferedImage(width1, height1, BufferedImage.TYPE_INT_RGB);\n\n    // Modified - Changed to int as pixels are ints\n    int diff;\n    int result; // Stores output pixel\n    for (int i = 0; i &lt; height1; i++) {\n        for (int j = 0; j &lt; width1; j++) {\n            int rgb1 = img1.getRGB(j, i);\n            int rgb2 = img2.getRGB(j, i);\n            int r1 = (rgb1 &gt;&gt; 16) &amp; 0xff;\n            int g1 = (rgb1 &gt;&gt; 8) &amp; 0xff;\n            int b1 = (rgb1) &amp; 0xff;\n            int r2 = (rgb2 &gt;&gt; 16) &amp; 0xff;\n            int g2 = (rgb2 &gt;&gt; 8) &amp; 0xff;\n            int b2 = (rgb2) &amp; 0xff;\n            diff = Math.abs(r1 - r2); // Change\n            diff += Math.abs(g1 - g2);\n            diff += Math.abs(b1 - b2);\n            diff /= 3; // Change - Ensure result is between 0 - 255\n            // Make the difference image gray scale\n            // The RGB components are all the same\n            result = (diff &lt;&lt; 16) | (diff &lt;&lt; 8) | diff;\n            outImg.setRGB(j, i, result); // Set result\n        }\n    }\n\n    // Now return\n    return outImg;\n}\n</code></pre>\n\n<hr>\n\n<p>To call this method, simply do:</p>\n\n<pre><code>outImg = getDifferenceImage(img1, img2);\n</code></pre>\n\n<p>This is assuming that you are calling this within a method of your class.  Have fun and good luck!</p>\n"},{"tags":[],"owner":{"account_id":410277,"reputation":24594,"user_id":782034,"accept_rate":72,"display_name":"Nick Grealy"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1443485736,"creation_date":1407291707,"answer_id":25151302,"question_id":25022578,"body_markdown":"This solution did the trick for me. It highlights differences, and has the best performance out of the methods I&#39;ve tried. (Assumptions: images are the same size. This method hasn&#39;t been tested with transparencies.)\r\n\r\nAverage time to compare a 1600x860 PNG image 50 times (on same machine):\r\n\r\n - JDK7 ~178 milliseconds\r\n - JDK8 ~139 milliseconds\r\n\r\nDoes anyone have a better/faster solution?\r\n\r\n    public static BufferedImage getDifferenceImage(BufferedImage img1, BufferedImage img2) {\r\n        // convert images to pixel arrays...\r\n        final int w = img1.getWidth(),\r\n                h = img1.getHeight(), \r\n                highlight = Color.MAGENTA.getRGB();\r\n        final int[] p1 = img1.getRGB(0, 0, w, h, null, 0, w);\r\n        final int[] p2 = img2.getRGB(0, 0, w, h, null, 0, w);\r\n        // compare img1 to img2, pixel by pixel. If different, highlight img1&#39;s pixel...\r\n        for (int i = 0; i &lt; p1.length; i++) {\r\n            if (p1[i] != p2[i]) {\r\n                p1[i] = highlight;\r\n            }\r\n        }\r\n        // save img1&#39;s pixels to a new BufferedImage, and return it...\r\n        // (May require TYPE_INT_ARGB)\r\n        final BufferedImage out = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);\r\n        out.setRGB(0, 0, w, h, p1, 0, w);\r\n        return out;\r\n    }\r\n\r\n**Usage:**\r\n\r\n    import javax.imageio.ImageIO;\r\n    import java.io.File;\r\n\r\n    ImageIO.write(\r\n            getDifferenceImage(\r\n                    ImageIO.read(new File(&quot;a.png&quot;)),\r\n                    ImageIO.read(new File(&quot;b.png&quot;))),\r\n            &quot;png&quot;,\r\n            new File(&quot;output.png&quot;));\r\n\r\n[Some inspiration...][1]\r\n\r\n\r\n  [1]: http://huddle.github.io/Resemble.js/","title":"Highlight differences between images","body":"<p>This solution did the trick for me. It highlights differences, and has the best performance out of the methods I've tried. (Assumptions: images are the same size. This method hasn't been tested with transparencies.)</p>\n\n<p>Average time to compare a 1600x860 PNG image 50 times (on same machine):</p>\n\n<ul>\n<li>JDK7 ~178 milliseconds</li>\n<li>JDK8 ~139 milliseconds</li>\n</ul>\n\n<p>Does anyone have a better/faster solution?</p>\n\n<pre><code>public static BufferedImage getDifferenceImage(BufferedImage img1, BufferedImage img2) {\n    // convert images to pixel arrays...\n    final int w = img1.getWidth(),\n            h = img1.getHeight(), \n            highlight = Color.MAGENTA.getRGB();\n    final int[] p1 = img1.getRGB(0, 0, w, h, null, 0, w);\n    final int[] p2 = img2.getRGB(0, 0, w, h, null, 0, w);\n    // compare img1 to img2, pixel by pixel. If different, highlight img1's pixel...\n    for (int i = 0; i &lt; p1.length; i++) {\n        if (p1[i] != p2[i]) {\n            p1[i] = highlight;\n        }\n    }\n    // save img1's pixels to a new BufferedImage, and return it...\n    // (May require TYPE_INT_ARGB)\n    final BufferedImage out = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);\n    out.setRGB(0, 0, w, h, p1, 0, w);\n    return out;\n}\n</code></pre>\n\n<p><strong>Usage:</strong></p>\n\n<pre><code>import javax.imageio.ImageIO;\nimport java.io.File;\n\nImageIO.write(\n        getDifferenceImage(\n                ImageIO.read(new File(\"a.png\")),\n                ImageIO.read(new File(\"b.png\"))),\n        \"png\",\n        new File(\"output.png\"));\n</code></pre>\n\n<p><a href=\"http://huddle.github.io/Resemble.js/\" rel=\"noreferrer\">Some inspiration...</a></p>\n"},{"tags":[],"owner":{"account_id":10830,"reputation":25297,"user_id":20634,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639069416,"creation_date":1639069416,"answer_id":70293864,"question_id":25022578,"body_markdown":"Just to note that the answer from @NickGrealy can be made 10 times faster if you don&#39;t need to keep the first image and modify it in place.\r\n\r\nExample:\r\n\r\n```java\r\n// img1 will be updated with the changes from img2\r\npublic static BufferedImage getDifferenceImage(BufferedImage img1, BufferedImage img2) {\r\n    byte[] magenta = {-1, 0, -1};\r\n    byte[] buff1 = ((DataBufferByte) img1.getRaster().getDataBuffer()).getData();\r\n    byte[] buff2 = ((DataBufferByte) img2.getRaster().getDataBuffer()).getData();\r\n\r\n    for (int i = 1; i &lt; buff1.lenght; i += 4) {\r\n        if (buff1[i] != buff2[i]) {\r\n            System.arraycopy(magenta, 0, buff1, i, 3);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI needed a fast approach to use on potentially lot of images for visual regression checking.\r\n\r\nIt runs in &lt; 2 ms on my machine, and I am in a case where img1 is already saved on disk so I don&#39;t need to play with it, I&#39;m just interested in the differences to be updated in the buffered image and write it to a new location for further inspection.","title":"Highlight differences between images","body":"<p>Just to note that the answer from @NickGrealy can be made 10 times faster if you don't need to keep the first image and modify it in place.</p>\n<p>Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// img1 will be updated with the changes from img2\npublic static BufferedImage getDifferenceImage(BufferedImage img1, BufferedImage img2) {\n    byte[] magenta = {-1, 0, -1};\n    byte[] buff1 = ((DataBufferByte) img1.getRaster().getDataBuffer()).getData();\n    byte[] buff2 = ((DataBufferByte) img2.getRaster().getDataBuffer()).getData();\n\n    for (int i = 1; i &lt; buff1.lenght; i += 4) {\n        if (buff1[i] != buff2[i]) {\n            System.arraycopy(magenta, 0, buff1, i, 3);\n        }\n    }\n}\n</code></pre>\n<p>I needed a fast approach to use on potentially lot of images for visual regression checking.</p>\n<p>It runs in &lt; 2 ms on my machine, and I am in a case where img1 is already saved on disk so I don't need to play with it, I'm just interested in the differences to be updated in the buffered image and write it to a new location for further inspection.</p>\n"}],"owner":{"account_id":3697416,"reputation":781,"user_id":3078335,"accept_rate":92,"display_name":"user3078335"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16102,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":25024344,"answer_count":3,"score":8,"last_activity_date":1639069416,"creation_date":1406658848,"question_id":25022578,"body_markdown":"There is this image comparison code I am supposed to modify to highlight/point out the difference between two images. Is there a way to modify this code so as to highlight the differences in images. If not any suggestion on how to go about it would be greatly appreciated.\r\n\r\n     int width1 = img1.getWidth(null);\r\n        \t\tint width2 = img2.getWidth(null);\r\n        \t\tint height1 = img1.getHeight(null);\r\n        \t\tint height2 = img2.getHeight(null);\r\n        \t\tif ((width1 != width2) || (height1 != height2)) {\r\n        \t\t\tSystem.err.println(&quot;Error: Images dimensions mismatch&quot;);\r\n        \t\t\tSystem.exit(1);\r\n        \t\t}\r\n        \t\tlong diff = 0;\r\n        \t\tfor (int i = 0; i &lt; height1; i++) {\r\n        \t\t\tfor (int j = 0; j &lt; width1; j++) {\r\n        \t\t\t\tint rgb1 = img1.getRGB(j, i);\r\n        \t\t\t\tint rgb2 = img2.getRGB(j, i);\r\n        \t\t\t\tint r1 = (rgb1 &gt;&gt; 16) &amp; 0xff;\r\n        \t\t\t\tint g1 = (rgb1 &gt;&gt; 8) &amp; 0xff;\r\n        \t\t\t\tint b1 = (rgb1) &amp; 0xff;\r\n        \t\t\t\tint r2 = (rgb2 &gt;&gt; 16) &amp; 0xff;\r\n        \t\t\t\tint g2 = (rgb2 &gt;&gt; 8) &amp; 0xff;\r\n        \t\t\t\tint b2 = (rgb2) &amp; 0xff;\r\n        \t\t\t\tdiff += Math.abs(r1 - r2);\r\n        \t\t\t\tdiff += Math.abs(g1 - g2);\r\n        \t\t\t\tdiff += Math.abs(b1 - b2);\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\tdouble n = width1 * height1 * 3;\r\n        \t\tdouble p = diff / n / 255.0;\r\n        \t\treturn (p * 100.0);","title":"Highlight differences between images","body":"<p>There is this image comparison code I am supposed to modify to highlight/point out the difference between two images. Is there a way to modify this code so as to highlight the differences in images. If not any suggestion on how to go about it would be greatly appreciated.</p>\n\n<pre><code> int width1 = img1.getWidth(null);\n            int width2 = img2.getWidth(null);\n            int height1 = img1.getHeight(null);\n            int height2 = img2.getHeight(null);\n            if ((width1 != width2) || (height1 != height2)) {\n                System.err.println(\"Error: Images dimensions mismatch\");\n                System.exit(1);\n            }\n            long diff = 0;\n            for (int i = 0; i &lt; height1; i++) {\n                for (int j = 0; j &lt; width1; j++) {\n                    int rgb1 = img1.getRGB(j, i);\n                    int rgb2 = img2.getRGB(j, i);\n                    int r1 = (rgb1 &gt;&gt; 16) &amp; 0xff;\n                    int g1 = (rgb1 &gt;&gt; 8) &amp; 0xff;\n                    int b1 = (rgb1) &amp; 0xff;\n                    int r2 = (rgb2 &gt;&gt; 16) &amp; 0xff;\n                    int g2 = (rgb2 &gt;&gt; 8) &amp; 0xff;\n                    int b2 = (rgb2) &amp; 0xff;\n                    diff += Math.abs(r1 - r2);\n                    diff += Math.abs(g1 - g2);\n                    diff += Math.abs(b1 - b2);\n                }\n            }\n            double n = width1 * height1 * 3;\n            double p = diff / n / 255.0;\n            return (p * 100.0);\n</code></pre>\n"},{"tags":["java","arrays","list","for-loop","if-statement"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1639067898,"post_id":70293251,"comment_id":124259398,"body_markdown":"Note that `&#39;A1&#39;` (etc) aren&#39;t `String`s: you need to use `&quot;A1&quot;`, with double-quotes. Also, you almost certainly don&#39;t want to be using `==`, you should use `equals` instead.","body":"Note that <code>&#39;A1&#39;</code> (etc) aren&#39;t <code>String</code>s: you need to use <code>&quot;A1&quot;</code>, with double-quotes. Also, you almost certainly don&#39;t want to be using <code>==</code>, you should use <code>equals</code> instead."},{"owner":{"account_id":2436754,"reputation":53,"user_id":2126471,"display_name":"Michael"},"score":0,"creation_date":1639068186,"post_id":70293251,"comment_id":124259556,"body_markdown":"Also note that break jumps out of the current loop. See https://stackoverflow.com/questions/886955/how-do-i-break-out-of-nested-loops-in-java","body":"Also note that break jumps out of the current loop. See <a href=\"https://stackoverflow.com/questions/886955/how-do-i-break-out-of-nested-loops-in-java\" title=\"how do i break out of nested loops in java\">stackoverflow.com/questions/886955/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1639067810,"creation_date":1639067810,"answer_id":70293480,"question_id":70293251,"body_markdown":"Construct a `Set&lt;String&gt;` containing the statuses:\r\n\r\n```\r\nSet&lt;String&gt; statusSet = new HashSet&lt;&gt;(statuses);\r\n```\r\n\r\nThen use streams to iterate the `policies`:\r\n\r\n```\r\nreturn policies.stream().anyMatch(p -&gt; statusSet.contains(p.policyStatus));\r\n```","title":"java alternative to using nested for loops","body":"<p>Construct a <code>Set&lt;String&gt;</code> containing the statuses:</p>\n<pre><code>Set&lt;String&gt; statusSet = new HashSet&lt;&gt;(statuses);\n</code></pre>\n<p>Then use streams to iterate the <code>policies</code>:</p>\n<pre><code>return policies.stream().anyMatch(p -&gt; statusSet.contains(p.policyStatus));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22978237,"reputation":486,"user_id":17105581,"display_name":"ferrouskid"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639069326,"creation_date":1639068206,"answer_id":70293592,"question_id":70293251,"body_markdown":"There are a couple of issues I&#39;d like to address before diving in. \r\n\r\n`List` is an interface, so you can&#39;t instantiate an object of this type. You can use `ArrayList` to instantiate it however. You shouldn&#39;t have to access the members directly with `policy.policyStatus`, you should consider using a getter to ensure encapsulation, so `policy.getStatus()`. \r\n\r\nUse filters and maps! As Andy eloquently put it, that is a very clean and elegant solution. Hope this helps also!\r\n\r\nShort addition: I think java streams are sometimes overcomplicated a little bit, but they are so incredibly useful. If you stream a collection with `.stream()`, that is making Java look through every single member of the collection one by one. Then you can use a bunch of cool methods. \r\n\r\n`...stream().map()` just applies a function to the individual objects, one by one. This function can be anything! The `function` interface in java has one method `R apply(T t);` - so it takes an input, and produces an output. As you can see output of type R can be different to input of type T. If you don&#39;t want to return anything, you can use collections `forEach` method directly on the collection. This method takes a `consumer`, which is like a `function` but it doesn&#39;t return anything. You can also do `...stream().filter()` which takes a `predicate`, basically a question that evaluates to true or false. All of this is just for simplicity of code, functional programming in java is actually super useful in the wild :D\r\n\r\n","title":"java alternative to using nested for loops","body":"<p>There are a couple of issues I'd like to address before diving in.</p>\n<p><code>List</code> is an interface, so you can't instantiate an object of this type. You can use <code>ArrayList</code> to instantiate it however. You shouldn't have to access the members directly with <code>policy.policyStatus</code>, you should consider using a getter to ensure encapsulation, so <code>policy.getStatus()</code>.</p>\n<p>Use filters and maps! As Andy eloquently put it, that is a very clean and elegant solution. Hope this helps also!</p>\n<p>Short addition: I think java streams are sometimes overcomplicated a little bit, but they are so incredibly useful. If you stream a collection with <code>.stream()</code>, that is making Java look through every single member of the collection one by one. Then you can use a bunch of cool methods.</p>\n<p><code>...stream().map()</code> just applies a function to the individual objects, one by one. This function can be anything! The <code>function</code> interface in java has one method <code>R apply(T t);</code> - so it takes an input, and produces an output. As you can see output of type R can be different to input of type T. If you don't want to return anything, you can use collections <code>forEach</code> method directly on the collection. This method takes a <code>consumer</code>, which is like a <code>function</code> but it doesn't return anything. You can also do <code>...stream().filter()</code> which takes a <code>predicate</code>, basically a question that evaluates to true or false. All of this is just for simplicity of code, functional programming in java is actually super useful in the wild :D</p>\n"},{"tags":[],"owner":{"account_id":6462469,"reputation":451,"user_id":5005756,"accept_rate":75,"display_name":"Mahdi Yusefi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639068662,"creation_date":1639068662,"answer_id":70293689,"question_id":70293251,"body_markdown":"You can implement your `Policy` class as a Map of `policyStatus` and `policyNumber` (in this scenario `policyStatus` is key `policyNumber` is value of `Map`) and  and perform your checking like this:\r\n\r\n\r\n        Boolean hasStatus = false;\r\n        Map&lt;String, Integer&gt; policyMap = getPolicyMap();\r\n        String[] statuses = String[]{&quot;A1&quot;, &quot;A3&quot;, &quot;B6&quot;, &quot;T1&quot;, &quot;T6&quot;};\r\n        for (String status : statuses) {\r\n            if(policyMap.get(status) != null){\r\n                hasStatus = true;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        return hasStatus;\r\nor if you can&#39;t  do this and your `statuses` has constant length or has a small supremum on its length, you should not be worried about having a subroutine with nested loop on your project. because it&#39;s impossible. what you do is searching `m` element on array of `n`, without any prior condition or knowledge, you need `O(nm)` comparison, so you need nested loop. But as I said you can refactor your code with `Map` data structure and have single loop.","title":"java alternative to using nested for loops","body":"<p>You can implement your <code>Policy</code> class as a Map of <code>policyStatus</code> and <code>policyNumber</code> (in this scenario <code>policyStatus</code> is key <code>policyNumber</code> is value of <code>Map</code>) and  and perform your checking like this:</p>\n<pre><code>    Boolean hasStatus = false;\n    Map&lt;String, Integer&gt; policyMap = getPolicyMap();\n    String[] statuses = String[]{&quot;A1&quot;, &quot;A3&quot;, &quot;B6&quot;, &quot;T1&quot;, &quot;T6&quot;};\n    for (String status : statuses) {\n        if(policyMap.get(status) != null){\n            hasStatus = true;\n            break;\n        }\n    }\n    \n    return hasStatus;\n</code></pre>\n<p>or if you can't  do this and your <code>statuses</code> has constant length or has a small supremum on its length, you should not be worried about having a subroutine with nested loop on your project. because it's impossible. what you do is searching <code>m</code> element on array of <code>n</code>, without any prior condition or knowledge, you need <code>O(nm)</code> comparison, so you need nested loop. But as I said you can refactor your code with <code>Map</code> data structure and have single loop.</p>\n"}],"owner":{"account_id":10073835,"reputation":787,"user_id":7446623,"accept_rate":5,"display_name":"apex2022"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":374,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1639069326,"creation_date":1639066819,"question_id":70293251,"body_markdown":"I have a Policies object with two fields: policyNumber and policyStatus. I will have a list of policies, and I need to see if any policy has one of the statuses I provide. If one does, I set a Boolean to yes. If not, I set it to no.\r\n\r\nNormally I would use nested for loops like this:\r\n\r\n    Boolean hasStatus = false;\r\n    List&lt;Policy&gt; policies = new List&lt;Policy&gt;();\r\n    String[] statuses = String[]{&#39;A1&#39;,&#39;A3&#39;,&#39;B6&#39;,&#39;T1&#39;,&#39;T6&#39;};\r\n    for (Policy policy : policies) {\r\n        for (int i=0; i&lt;statuses.length; i++) {\r\n            if (policy.policyStatus == statuses[i] {\r\n                hasStatus = true;\r\n                break;\r\n            }    \r\n        }\r\n    }\r\n    return hasStatus;\r\n\r\nNow I&#39;m extremely week in the areas involving Maps, Sets and Collections and also in Algorithms. What I&#39;m wondering is whether there is something with one of those things that I should be doing with this instead of using the nested for loops and the if block. If there is, could you please provide me some guidance on it? Or is this really how I should be doing this?\r\n","title":"java alternative to using nested for loops","body":"<p>I have a Policies object with two fields: policyNumber and policyStatus. I will have a list of policies, and I need to see if any policy has one of the statuses I provide. If one does, I set a Boolean to yes. If not, I set it to no.</p>\n<p>Normally I would use nested for loops like this:</p>\n<pre><code>Boolean hasStatus = false;\nList&lt;Policy&gt; policies = new List&lt;Policy&gt;();\nString[] statuses = String[]{'A1','A3','B6','T1','T6'};\nfor (Policy policy : policies) {\n    for (int i=0; i&lt;statuses.length; i++) {\n        if (policy.policyStatus == statuses[i] {\n            hasStatus = true;\n            break;\n        }    \n    }\n}\nreturn hasStatus;\n</code></pre>\n<p>Now I'm extremely week in the areas involving Maps, Sets and Collections and also in Algorithms. What I'm wondering is whether there is something with one of those things that I should be doing with this instead of using the nested for loops and the if block. If there is, could you please provide me some guidance on it? Or is this really how I should be doing this?</p>\n"},{"tags":["java","eclipse","heap-memory"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1305122631,"post_id":5965147,"comment_id":6881612,"body_markdown":"When exactly do you see this message?","body":"When exactly do you see this message?"}],"answers":[{"tags":[],"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1305121130,"creation_date":1305121130,"answer_id":5965205,"question_id":5965147,"body_markdown":"Humm... -XX:MaxPermSize=512m -Xms512m -Xmx1024m all looking fine. When are you having this error? \r\nAt Startup? Can you try switching JVM or downloading the 32 bit version? \r\nWhen building? Try this guide to give ANT more memory: http://ericfickes.com/2008/10/osx-flexbuilder-java-heap-space-error/\r\nOn the App Server / Servlet Container? Increase it&#39;s heapsize and permgen space.","title":"Problem with increasing Java heap size in Eclipse","body":"<p>Humm... -XX:MaxPermSize=512m -Xms512m -Xmx1024m all looking fine. When are you having this error? \nAt Startup? Can you try switching JVM or downloading the 32 bit version? \nWhen building? Try this guide to give ANT more memory: <a href=\"http://ericfickes.com/2008/10/osx-flexbuilder-java-heap-space-error/\" rel=\"nofollow\">http://ericfickes.com/2008/10/osx-flexbuilder-java-heap-space-error/</a>\nOn the App Server / Servlet Container? Increase it's heapsize and permgen space.</p>\n"},{"tags":[],"owner":{"account_id":383832,"reputation":6279,"user_id":739937,"accept_rate":100,"display_name":"Olaf"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1305121505,"creation_date":1305121505,"answer_id":5965276,"question_id":5965147,"body_markdown":"Are you sure you are configuring parameters for your application execution and not for Eclipse itself?\r\n\r\nI usually configure heap size in the Run | Run Configuration dialog.","title":"Problem with increasing Java heap size in Eclipse","body":"<p>Are you sure you are configuring parameters for your application execution and not for Eclipse itself?</p>\n\n<p>I usually configure heap size in the Run | Run Configuration dialog.</p>\n"},{"tags":[],"owner":{"account_id":13594,"reputation":26,"user_id":27427,"display_name":"Pardal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1305125319,"creation_date":1305125319,"answer_id":5966209,"question_id":5965147,"body_markdown":"Eclipse.ini is for eclipse itself not for running applications. For that use a run configuration to set the start parameters.\r\n\r\nOne more note: java on MacOSX doesn&#39;t have the XX:MaxPermSize or any another XX flags.","title":"Problem with increasing Java heap size in Eclipse","body":"<p>Eclipse.ini is for eclipse itself not for running applications. For that use a run configuration to set the start parameters.</p>\n\n<p>One more note: java on MacOSX doesn't have the XX:MaxPermSize or any another XX flags.</p>\n"},{"tags":[],"owner":{"account_id":302030,"reputation":3942,"user_id":610159,"accept_rate":78,"display_name":"Andrei Petrenko"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1305199936,"creation_date":1305199936,"answer_id":5977302,"question_id":5965147,"body_markdown":"Try to supply -vmargs directly to Eclipse executable instead of ***eclipse.ini*** file. \r\n\r\n    eclipse -vmargs -Xms512m -Xmx730m\r\nThere is a bug in Eclipse, that prevents it from supplying &quot;vmargs&quot; clause of ***eclipse.ini*** to JVM.","title":"Problem with increasing Java heap size in Eclipse","body":"<p>Try to supply -vmargs directly to Eclipse executable instead of <strong><em>eclipse.ini</em></strong> file. </p>\n\n<pre><code>eclipse -vmargs -Xms512m -Xmx730m\n</code></pre>\n\n<p>There is a bug in Eclipse, that prevents it from supplying \"vmargs\" clause of <strong><em>eclipse.ini</em></strong> to JVM.</p>\n"},{"tags":[],"owner":{"account_id":2449500,"reputation":2222,"user_id":2136116,"accept_rate":82,"display_name":"timmz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389263579,"creation_date":1389263579,"answer_id":21017729,"question_id":5965147,"body_markdown":"To those who get the same error under Eclipse, try to restore cache files (if they were removed accidentally in WAR folder ), this way I solve the same problem under my Eclipse&#39; project. note: I don&#39;t think there is a link between Memory allowed to Eclipse and memory for App.","title":"Problem with increasing Java heap size in Eclipse","body":"<p>To those who get the same error under Eclipse, try to restore cache files (if they were removed accidentally in WAR folder ), this way I solve the same problem under my Eclipse' project. note: I don't think there is a link between Memory allowed to Eclipse and memory for App.</p>\n"}],"owner":{"account_id":380494,"reputation":519,"user_id":734547,"accept_rate":77,"display_name":"Ivan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20798,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":5965276,"answer_count":5,"score":3,"last_activity_date":1639069321,"creation_date":1305120907,"question_id":5965147,"body_markdown":"I have a problem with error saying `ERROR:  &#39;Java heap space&#39;`. I followed [these instructions][1] to increase the heap size for Eclipse, but it doesn&#39;t work. Eclipse seems to be ignoring the given values. My `eclipse.ini` file looks like this:\r\n\r\n    -startup\r\n    ../../../plugins/org.eclipse.equinox.launcher_1.1.0.v20100507.jar\r\n    --launcher.library\r\n    ../../../plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.1.R36x_v20100810\r\n    -product\r\n    org.eclipse.epp.package.java.product\r\n    --launcher.defaultAction\r\n    openFile\r\n    -showsplash\r\n    org.eclipse.platform\r\n    --launcher.defaultAction\r\n    openFile\r\n    -vmargs\r\n    -Dosgi.requiredJavaVersion=1.5\r\n    -XstartOnFirstThread\r\n    -Dorg.eclipse.swt.internal.carbon.smallFonts\r\n    -XX:MaxPermSize=512m\r\n    -Xms512m\r\n    -Xmx1024m\r\n    -Xdock:icon=../Resources/Eclipse.icns\r\n    -XstartOnFirstThread\r\n    -Dorg.ecli\r\n    pse.swt.internal.carbon.smallFonts\r\n\r\nThe Eclipse version is 3.6.1 running on Mac.\r\n\r\nAny ideas what might be wrong?\r\n\r\n\r\n  [1]: http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse?","title":"Problem with increasing Java heap size in Eclipse","body":"<p>I have a problem with error saying <code>ERROR:  'Java heap space'</code>. I followed <a href=\"http://wiki.eclipse.org/FAQ_How_do_I_increase_the_heap_size_available_to_Eclipse?\" rel=\"nofollow\">these instructions</a> to increase the heap size for Eclipse, but it doesn't work. Eclipse seems to be ignoring the given values. My <code>eclipse.ini</code> file looks like this:</p>\n\n<pre><code>-startup\n../../../plugins/org.eclipse.equinox.launcher_1.1.0.v20100507.jar\n--launcher.library\n../../../plugins/org.eclipse.equinox.launcher.cocoa.macosx.x86_64_1.1.1.R36x_v20100810\n-product\norg.eclipse.epp.package.java.product\n--launcher.defaultAction\nopenFile\n-showsplash\norg.eclipse.platform\n--launcher.defaultAction\nopenFile\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-XstartOnFirstThread\n-Dorg.eclipse.swt.internal.carbon.smallFonts\n-XX:MaxPermSize=512m\n-Xms512m\n-Xmx1024m\n-Xdock:icon=../Resources/Eclipse.icns\n-XstartOnFirstThread\n-Dorg.ecli\npse.swt.internal.carbon.smallFonts\n</code></pre>\n\n<p>The Eclipse version is 3.6.1 running on Mac.</p>\n\n<p>Any ideas what might be wrong?</p>\n"},{"tags":["java","eclipse","gwt","heap-memory","gxt"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1329408293,"post_id":9314551,"comment_id":11750405,"body_markdown":"Why you have to use an Ant script to build the project? Eclipse already compiles Java classes for you. You just have to take the directory where Eclipse generates the compiled classes and Jar it.","body":"Why you have to use an Ant script to build the project? Eclipse already compiles Java classes for you. You just have to take the directory where Eclipse generates the compiled classes and Jar it."},{"owner":{"account_id":1254028,"reputation":143,"user_id":1213883,"display_name":"Jodosh"},"score":0,"creation_date":1329408545,"post_id":9314551,"comment_id":11750516,"body_markdown":"we are using the ant script to build a war that is then deployed to a server running tomcat.  We also have the project auto build nightly using the ant script and a build server.","body":"we are using the ant script to build a war that is then deployed to a server running tomcat.  We also have the project auto build nightly using the ant script and a build server."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1329408841,"post_id":9314551,"comment_id":11750655,"body_markdown":"Just for building the WAR you get out of memory? That&#39;s weird... Isn&#39;t your Ant script trying to compile the classes (again)?","body":"Just for building the WAR you get out of memory? That&#39;s weird... Isn&#39;t your Ant script trying to compile the classes (again)?"},{"owner":{"account_id":1254028,"reputation":143,"user_id":1213883,"display_name":"Jodosh"},"score":0,"creation_date":1329409196,"post_id":9314551,"comment_id":11750813,"body_markdown":"it does compile the java source into bytecode, and then it compiles the bytecode into JavaScript (what GWT calls &quot;Production Mode&quot;) and then from production mode into a war. This issue is very weird. the project as it stands right now should not be memory intensive AT ALL.","body":"it does compile the java source into bytecode, and then it compiles the bytecode into JavaScript (what GWT calls &quot;Production Mode&quot;) and then from production mode into a war. This issue is very weird. the project as it stands right now should not be memory intensive AT ALL."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1329409433,"post_id":9314551,"comment_id":11750914,"body_markdown":"As I said, your Ant script does not have to compile the Java classes, which is what I think consumes all memory (idk know why, but same happens on the project I&#39;m working for, looks like an Eclipse problem...), because Eclipse **already** compiles the classes if you have the &quot;Build automatically&quot; option set. You just have to take the *.class*&#39;es already generated and skip this step.","body":"As I said, your Ant script does not have to compile the Java classes, which is what I think consumes all memory (idk know why, but same happens on the project I&#39;m working for, looks like an Eclipse problem...), because Eclipse <b>already</b> compiles the classes if you have the &quot;Build automatically&quot; option set. You just have to take the <i>.class</i>&#39;es already generated and skip this step."},{"owner":{"account_id":1254028,"reputation":143,"user_id":1213883,"display_name":"Jodosh"},"score":0,"creation_date":1329413651,"post_id":9314551,"comment_id":11752578,"body_markdown":"Thank you for your help, this does in fact work, but it would require me to maintain 2 build scripts (the build server does not have eclipse to auto build for me. I will just have the devs run ant from the cmd prompt. Your option might end up being the solution in the long run if using the cmd prompt is too burdensome. and I will modify the ant script to do and &quot;eclipse build&quot; or a &quot;build server build&quot;.","body":"Thank you for your help, this does in fact work, but it would require me to maintain 2 build scripts (the build server does not have eclipse to auto build for me. I will just have the devs run ant from the cmd prompt. Your option might end up being the solution in the long run if using the cmd prompt is too burdensome. and I will modify the ant script to do and &quot;eclipse build&quot; or a &quot;build server build&quot;."},{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":0,"creation_date":1329418962,"post_id":9314551,"comment_id":11754633,"body_markdown":"Yes, that&#39;s best option.","body":"Yes, that&#39;s best option."}],"answers":[{"tags":[],"owner":{"account_id":116977,"reputation":1852,"user_id":306538,"display_name":"nirmal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1329409787,"creation_date":1329409787,"answer_id":9315079,"question_id":9314551,"body_markdown":"Likely you need to increase the memory for the JVM running ant (via eclipse&#39;s external tools preferences) as described here: http://soenkerohde.com/2008/06/change-eclipse-ant-settings-when-you-run-out-of-memory/\r\n\r\n","title":"Eclipse runs out of heap space on ant build","body":"<p>Likely you need to increase the memory for the JVM running ant (via eclipse's external tools preferences) as described here: <a href=\"http://soenkerohde.com/2008/06/change-eclipse-ant-settings-when-you-run-out-of-memory/\" rel=\"nofollow\">http://soenkerohde.com/2008/06/change-eclipse-ant-settings-when-you-run-out-of-memory/</a></p>\n"},{"tags":[],"owner":{"account_id":69659,"reputation":9188,"user_id":202553,"accept_rate":71,"display_name":"knb"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1329410003,"creation_date":1329410003,"answer_id":9315143,"question_id":9314551,"body_markdown":"I have the same problem. I &quot;solved&quot; or better *avoid* it by building with ant from the command line in a terminal window.\r\n\r\n[Here][1] someone proposed adding a fork=yes attribute to the build.xml file, and reading [this][2].\r\n\r\n\r\n  [1]: http://www.easywms.com/easywms/?q=en/node/3583\r\n  [2]: http://mytechlessons.blogspot.com/2008/04/outofmemory-with-ant.html","title":"Eclipse runs out of heap space on ant build","body":"<p>I have the same problem. I \"solved\" or better <em>avoid</em> it by building with ant from the command line in a terminal window.</p>\n\n<p><a href=\"http://www.easywms.com/easywms/?q=en/node/3583\" rel=\"nofollow\">Here</a> someone proposed adding a fork=yes attribute to the build.xml file, and reading <a href=\"http://mytechlessons.blogspot.com/2008/04/outofmemory-with-ant.html\" rel=\"nofollow\">this</a>.</p>\n"},{"tags":[],"owner":{"account_id":1251403,"reputation":1421,"user_id":1211744,"display_name":"Tony"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1329410019,"creation_date":1329410019,"answer_id":9315145,"question_id":9314551,"body_markdown":"We have similar issues when running certain Ant scripts.  You can set VM arguments for the Ant Build in the Run-&gt;External Tools-&gt;External Tools Configurations dialog.  Click the JRE tab and set the usual -Xmx and -Xms params as needed.","title":"Eclipse runs out of heap space on ant build","body":"<p>We have similar issues when running certain Ant scripts.  You can set VM arguments for the Ant Build in the Run->External Tools->External Tools Configurations dialog.  Click the JRE tab and set the usual -Xmx and -Xms params as needed.</p>\n"}],"owner":{"account_id":1254028,"reputation":143,"user_id":1213883,"display_name":"Jodosh"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8643,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":9315143,"answer_count":3,"score":9,"last_activity_date":1639069304,"creation_date":1329408020,"question_id":9314551,"body_markdown":"ext-Myself and two co-workers have been working on a GWT project and coding in eclipse. The project is growing and we are bringing on several new developers to help out. I have been tasked with setting up their workstations before they start work. Our current systems all worked out of the box following the basic GWT set up guide (http://code.google.com/webtoolkit/usingeclipse.html)\r\n\r\nOn my working system I have not changed any of the defaults that eclipse has set for memory size. \r\n\r\nThe new system will run the simple starter projects, so I know that I have GWT set up. When I import our current code base I can run the site locally without issue. When I try and run the ant script that we have to build our project and push it out to our dev server the new system complains:\r\n\r\n`Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: GC overhead limit exceeded`\r\n\r\nOn the new system I have modified the eclipse.ini file to and set -Xmx1024M and I have added -Xmx1024M under Window&gt;Preferences&gt;Java&gt;Installed JREs neither of which have solved the problem. (shown here: http://dinu.blog.com/2010/06/02/out-of-memory/)\r\n\r\nI have tried 32 and 64 bit versions of eclipse, and I have even tried just copying my known working eclipse folder onto the new system without any luck. Does anyone have any ideas?","title":"Eclipse runs out of heap space on ant build","body":"<p>ext-Myself and two co-workers have been working on a GWT project and coding in eclipse. The project is growing and we are bringing on several new developers to help out. I have been tasked with setting up their workstations before they start work. Our current systems all worked out of the box following the basic GWT set up guide (http://code.google.com/webtoolkit/usingeclipse.html)</p>\n\n<p>On my working system I have not changed any of the defaults that eclipse has set for memory size. </p>\n\n<p>The new system will run the simple starter projects, so I know that I have GWT set up. When I import our current code base I can run the site locally without issue. When I try and run the ant script that we have to build our project and push it out to our dev server the new system complains:</p>\n\n<p><code>Exception in thread \"main\" java.lang.OutOfMemoryError: GC overhead limit exceeded</code></p>\n\n<p>On the new system I have modified the eclipse.ini file to and set -Xmx1024M and I have added -Xmx1024M under Window>Preferences>Java>Installed JREs neither of which have solved the problem. (shown here: <a href=\"http://dinu.blog.com/2010/06/02/out-of-memory/\">http://dinu.blog.com/2010/06/02/out-of-memory/</a>)</p>\n\n<p>I have tried 32 and 64 bit versions of eclipse, and I have even tried just copying my known working eclipse folder onto the new system without any luck. Does anyone have any ideas?</p>\n"},{"tags":["java","eclipse","heap-memory"],"comments":[{"owner":{"account_id":26009,"reputation":7702,"user_id":67381,"accept_rate":96,"display_name":"Siddiqui"},"score":0,"creation_date":1343481468,"post_id":11701337,"comment_id":15518702,"body_markdown":"what about &quot;Show heap status&quot; under Window -&gt; Preferences -&gt; General??","body":"what about &quot;Show heap status&quot; under Window -&gt; Preferences -&gt; General??"},{"owner":{"account_id":62237,"reputation":14043,"user_id":185041,"accept_rate":87,"display_name":"Bharat Sinha"},"score":0,"creation_date":1343481627,"post_id":11701337,"comment_id":15518734,"body_markdown":"I meant to see heap contents... like a live heap dump?","body":"I meant to see heap contents... like a live heap dump?"},{"owner":{"account_id":445887,"reputation":5554,"user_id":838608,"accept_rate":71,"display_name":"H&#229;vard Geithus"},"score":0,"creation_date":1343486918,"post_id":11701337,"comment_id":15519746,"body_markdown":"Similar question: http://stackoverflow.com/questions/4932564/see-the-java-heap-content-in-run-time","body":"Similar question: <a href=\"http://stackoverflow.com/questions/4932564/see-the-java-heap-content-in-run-time\" title=\"see the java heap content in run time\">stackoverflow.com/questions/4932564/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":357454,"reputation":77335,"user_id":697630,"accept_rate":84,"display_name":"Edwin Dalorzo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1343482753,"creation_date":1343482306,"answer_id":11701455,"question_id":11701337,"body_markdown":"I don&#39;t know if there is an Eclipse plugin, but if what matters is getting the information and not necessarily through Eclipse then you can do that with [JVisualVM][1], and there are several [plugins][2] that provide all the details that you want.\r\n\r\nOne of its [features][3] is that you can make a heap dump.\r\n\r\nDocumentation says: \r\n\r\n&gt; **Take and browse heap dumps.** When you need to browse contents of application memory or uncover a memory leak in your application,\r\n&gt; you&#39;ll find the built-in HeapWalker tool really handy. It can read\r\n&gt; files written in hprof format and is also able to browse heap dumps\r\n&gt; created by the JVM on an OutOfMemoryException.\r\n\r\n\r\n\r\n  [1]: http://visualvm.java.net/\r\n  [2]: http://visualvm.java.net/plugins.html\r\n  [3]: http://visualvm.java.net/features.html","title":"Viewing live heap in Eclipse","body":"<p>I don't know if there is an Eclipse plugin, but if what matters is getting the information and not necessarily through Eclipse then you can do that with <a href=\"http://visualvm.java.net/\" rel=\"nofollow\">JVisualVM</a>, and there are several <a href=\"http://visualvm.java.net/plugins.html\" rel=\"nofollow\">plugins</a> that provide all the details that you want.</p>\n\n<p>One of its <a href=\"http://visualvm.java.net/features.html\" rel=\"nofollow\">features</a> is that you can make a heap dump.</p>\n\n<p>Documentation says: </p>\n\n<blockquote>\n  <p><strong>Take and browse heap dumps.</strong> When you need to browse contents of application memory or uncover a memory leak in your application,\n  you'll find the built-in HeapWalker tool really handy. It can read\n  files written in hprof format and is also able to browse heap dumps\n  created by the JVM on an OutOfMemoryException.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1698489,"reputation":2295,"user_id":1559260,"display_name":"afrin216"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1343485067,"creation_date":1343485067,"answer_id":11701779,"question_id":11701337,"body_markdown":"Eclipse does have a plugin called Eclipse Memory Analyzer (MAT). You can check it out here. I heard it is quite handy for heap analysis and fixing memory leaks in your program.\r\n\r\nhttp://www.eclipse.org/mat/","title":"Viewing live heap in Eclipse","body":"<p>Eclipse does have a plugin called Eclipse Memory Analyzer (MAT). You can check it out here. I heard it is quite handy for heap analysis and fixing memory leaks in your program.</p>\n\n<p><a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow\">http://www.eclipse.org/mat/</a></p>\n"}],"owner":{"account_id":62237,"reputation":14043,"user_id":185041,"accept_rate":87,"display_name":"Bharat Sinha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7396,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":11701455,"answer_count":2,"score":1,"last_activity_date":1639069291,"creation_date":1343481341,"question_id":11701337,"body_markdown":"Is it possible to see the heap of a program in eclipse itself while it is executing? Is there a plugin for that?","title":"Viewing live heap in Eclipse","body":"<p>Is it possible to see the heap of a program in eclipse itself while it is executing? Is there a plugin for that?</p>\n"},{"tags":["java","eclipse","heap-memory"],"comments":[{"owner":{"account_id":2577836,"reputation":119494,"user_id":2235132,"display_name":"devnull"},"score":3,"creation_date":1393264413,"post_id":21995185,"comment_id":33334785,"body_markdown":"Hint: there&#39;s a file called `eclipse.ini` in your installation directory.","body":"Hint: there&#39;s a file called <code>eclipse.ini</code> in your installation directory."},{"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1393268540,"post_id":21995185,"comment_id":33337314,"body_markdown":"The `eclipse.ini` settings change the heap space for Eclipse itself, the `Run Configurations` settings change the heap for programs you run from within Eclipse.","body":"The <code>eclipse.ini</code> settings change the heap space for Eclipse itself, the <code>Run Configurations</code> settings change the heap for programs you run from within Eclipse."},{"owner":{"account_id":6102346,"reputation":809,"user_id":4760967,"accept_rate":75,"display_name":"Jags"},"score":0,"creation_date":1585283555,"post_id":21995185,"comment_id":107711270,"body_markdown":"@greg-449 you can do that at eclipse level - https://stackoverflow.com/questions/21995185/how-to-increase-heap-space-and-debug-in-eclipse/60880018#60880018","body":"@greg-449 you can do that at eclipse level - <a href=\"https://stackoverflow.com/questions/21995185/how-to-increase-heap-space-and-debug-in-eclipse/60880018#60880018\" title=\"how to increase heap space and debug in eclipse\">stackoverflow.com/questions/21995185/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1326099,"reputation":4946,"user_id":1270865,"accept_rate":50,"display_name":"cafebabe1991"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1393264573,"creation_date":1393264573,"answer_id":21995297,"question_id":21995185,"body_markdown":"Try changing in the eclipse.ini file.\r\nHere is an example configuration\r\n\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar\r\n    --launcher.library\r\n    plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20120913-144807\r\n    -showsplash\r\n    org.eclipse.platform\r\n    --launcher.XXMaxPermSize\r\n    256m\r\n    --launcher.defaultAction\r\n    openFile\r\n    -vmargs\r\n    -Xms512m\r\n    -Xmx1024m\r\n    -XX:+UseParallelGC\r\n    -XX:PermSize=256M\r\n    -XX:MaxPermSize=512M","title":"How to increase heap space and debug in Eclipse","body":"<p>Try changing in the eclipse.ini file.\nHere is an example configuration</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.1.200.v20120913-144807\n-showsplash\norg.eclipse.platform\n--launcher.XXMaxPermSize\n256m\n--launcher.defaultAction\nopenFile\n-vmargs\n-Xms512m\n-Xmx1024m\n-XX:+UseParallelGC\n-XX:PermSize=256M\n-XX:MaxPermSize=512M\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2191523,"reputation":6723,"user_id":1938435,"accept_rate":92,"display_name":"PurkkaKoodari"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1393264592,"creation_date":1393264592,"answer_id":21995305,"question_id":21995185,"body_markdown":" 1. Click the arrow next to the run button, and select Run Configurations... \r\n 2. Select your application from the left list\r\n 3. Go to Arguments\r\n 4. In VM arguments add `-Xmx6g -Xms2g`\r\n 5. Click Apply. \r\n\r\nThis will increase the heap size for that launch configuration to 6G. ","title":"How to increase heap space and debug in Eclipse","body":"<ol>\n<li>Click the arrow next to the run button, and select Run Configurations... </li>\n<li>Select your application from the left list</li>\n<li>Go to Arguments</li>\n<li>In VM arguments add <code>-Xmx6g -Xms2g</code></li>\n<li>Click Apply. </li>\n</ol>\n\n<p>This will increase the heap size for that launch configuration to 6G. </p>\n"},{"tags":[],"owner":{"account_id":6102346,"reputation":809,"user_id":4760967,"accept_rate":75,"display_name":"Jags"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585283401,"creation_date":1585283401,"answer_id":60880018,"question_id":21995185,"body_markdown":"You can change default jvm args which will apply to all Run/Debug configurations and you don&#39;t have to change individual configuration.\r\n\r\nIn eclipse go to ```Window -&gt; Preference -&gt; Java -&gt; Installed JREs -&gt; Edit default JRE```. There add ```-XX:MaxPermSize=512m``` under ```Default VM arguments```","title":"How to increase heap space and debug in Eclipse","body":"<p>You can change default jvm args which will apply to all Run/Debug configurations and you don't have to change individual configuration.</p>\n\n<p>In eclipse go to <code>Window -&gt; Preference -&gt; Java -&gt; Installed JREs -&gt; Edit default JRE</code>. There add <code>-XX:MaxPermSize=512m</code> under <code>Default VM arguments</code></p>\n"}],"owner":{"account_id":3415715,"reputation":597,"user_id":2864695,"accept_rate":74,"display_name":"Andrei Vasilev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4417,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1639069253,"creation_date":1393264290,"question_id":21995185,"body_markdown":"The issue is that running from cmd is not very good for debugging . \r\nI need to debug the code , so is there any way i could increase heap and debug in eclipse .\r\n \r\n\r\nI tried increasing heap in `control panel - &gt; java -&gt; view - &gt; 6g `\r\n\r\nbut still get the java out of memory in eclipse\r\n\r\n","title":"How to increase heap space and debug in Eclipse","body":"<p>The issue is that running from cmd is not very good for debugging . \nI need to debug the code , so is there any way i could increase heap and debug in eclipse .</p>\n\n<p>I tried increasing heap in <code>control panel - &gt; java -&gt; view - &gt; 6g</code></p>\n\n<p>but still get the java out of memory in eclipse</p>\n"},{"tags":["java","eclipse","api","heap-memory","weka"],"answers":[{"tags":[],"owner":{"display_name":"user3551109"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401175781,"creation_date":1401175029,"answer_id":23883268,"question_id":23883014,"body_markdown":"You can do one thing :   \r\n    Go to program files &#39;\\Program Files (x86)\\Weka-3-6&#39; and then RunWeka.ini. Open it in notepad and change the line        in the middle of the file ***&#39;maxheap = 512m&#39;*** to ***&#39;maxheap = 2000m&#39;***.\r\n","title":"Problems loading 5M instances with Weka API","body":"<p>You can do one thing :<br>\n    Go to program files '\\Program Files (x86)\\Weka-3-6' and then RunWeka.ini. Open it in notepad and change the line        in the middle of the file <strong><em>'maxheap = 512m'</em></strong> to <strong><em>'maxheap = 2000m'</em></strong>.</p>\n"},{"tags":[],"owner":{"account_id":2573906,"reputation":4528,"user_id":2232044,"accept_rate":60,"display_name":"Sergey Morozov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1401176625,"creation_date":1401175360,"answer_id":23883365,"question_id":23883014,"body_markdown":"I don&#39;t know Weka API, but if you need load huge of data from relation database to memory best way do it use [cursor][1]. If you use JDBC you should use [Scrollable Reslut Set][2].\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Cursor_%28databases%29\r\n  [2]: http://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#JJDBC28612","title":"Problems loading 5M instances with Weka API","body":"<p>I don't know Weka API, but if you need load huge of data from relation database to memory best way do it use <a href=\"http://en.wikipedia.org/wiki/Cursor_%28databases%29\" rel=\"nofollow\">cursor</a>. If you use JDBC you should use <a href=\"http://docs.oracle.com/cd/E11882_01/java.112/e16548/resltset.htm#JJDBC28612\" rel=\"nofollow\">Scrollable Reslut Set</a>.</p>\n"}],"owner":{"account_id":2324014,"reputation":149,"user_id":2038934,"accept_rate":62,"display_name":"Eneko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":23883365,"answer_count":2,"score":0,"last_activity_date":1639069238,"creation_date":1401174150,"question_id":23883014,"body_markdown":"I have a database with more or less 5 million rows. I want to load them as instances from a Java program in eclipse using the Weka api, in order to apply data mining techniques. However, I get a heap overflow if I try loading more than 2.5 millions,  even if I have increased the heap memory for Eclipse in run configurations with -Xmx2048M. my computer has 4GB of RAM, and gets stuck if I use more memory. Anyway, loading 2.5 millions takes too much time.  \r\n\r\nI am thinking to load them in fractions, but I do not think it is the best idea.\r\n\r\nThanks in advance. ","title":"Problems loading 5M instances with Weka API","body":"<p>I have a database with more or less 5 million rows. I want to load them as instances from a Java program in eclipse using the Weka api, in order to apply data mining techniques. However, I get a heap overflow if I try loading more than 2.5 millions,  even if I have increased the heap memory for Eclipse in run configurations with -Xmx2048M. my computer has 4GB of RAM, and gets stuck if I use more memory. Anyway, loading 2.5 millions takes too much time.  </p>\n\n<p>I am thinking to load them in fractions, but I do not think it is the best idea.</p>\n\n<p>Thanks in advance. </p>\n"},{"tags":["java","eclipse","heap-memory"],"comments":[{"owner":{"account_id":34101,"reputation":1106,"user_id":96030,"accept_rate":100,"display_name":"Ben"},"score":0,"creation_date":1407087864,"post_id":25107351,"comment_id":39071948,"body_markdown":"It seems that this is currently not possible. Duplicate of: http://stackoverflow.com/questions/1018217/can-i-set-java-max-heap-size-for-running-from-a-jar-file and http://stackoverflow.com/questions/11879661/how-to-create-an-executable-jar-file-with-1-gp-heap","body":"It seems that this is currently not possible. Duplicate of: <a href=\"http://stackoverflow.com/questions/1018217/can-i-set-java-max-heap-size-for-running-from-a-jar-file\" title=\"can i set java max heap size for running from a jar file\">stackoverflow.com/questions/1018217/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/11879661/how-to-create-an-executable-jar-file-with-1-gp-heap\" title=\"how to create an executable jar file with 1 gp heap\">stackoverflow.com/questions/11879661/&hellip;</a>"},{"owner":{"account_id":2310386,"reputation":2253,"user_id":2028640,"accept_rate":71,"display_name":"Pat"},"score":1,"creation_date":1407087963,"post_id":25107351,"comment_id":39071978,"body_markdown":"take a look here http://stackoverflow.com/questions/1018217/can-i-set-java-max-heap-size-for-running-from-a-jar-file","body":"take a look here <a href=\"http://stackoverflow.com/questions/1018217/can-i-set-java-max-heap-size-for-running-from-a-jar-file\" title=\"can i set java max heap size for running from a jar file\">stackoverflow.com/questions/1018217/&hellip;</a>"},{"owner":{"account_id":2413237,"reputation":31164,"user_id":2107876,"accept_rate":88,"display_name":"laune"},"score":0,"creation_date":1407089761,"post_id":25107351,"comment_id":39072528,"body_markdown":"A good idea from 1018217 seems to be to start a small Java program when the jar is executed which will then start the &quot;real&quot; program with the heap size setting (and other arguments passed down from the parent, if any).","body":"A good idea from 1018217 seems to be to start a small Java program when the jar is executed which will then start the &quot;real&quot; program with the heap size setting (and other arguments passed down from the parent, if any)."}],"answers":[{"tags":[],"owner":{"account_id":211415,"reputation":111,"user_id":3753447,"display_name":"Masterpiece.beta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1407090058,"creation_date":1407090058,"answer_id":25107713,"question_id":25107351,"body_markdown":"Go to envirentment variables make a new key called &quot;JAVA_OPTS&quot;\r\nValue should be\r\n-Xmx 5024m  ","title":"Increase Heap size for a executable jar file in Eclipse","body":"<p>Go to envirentment variables make a new key called \"JAVA_OPTS\"\nValue should be\n-Xmx 5024m  </p>\n"}],"owner":{"account_id":4697869,"reputation":77,"user_id":3802316,"accept_rate":17,"display_name":"Gobi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1372,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639069224,"creation_date":1407087690,"question_id":25107351,"body_markdown":"I created a executable jar file using eclipse, It requires 5gb of heap size depends on excel size which it processing, i can increase heap size of that program in eclipse run configuration and run successfully but after exporting it as executable jar file heap size set to default heap size and i unable to complete the task. How i can export the jar file with eclipse heap size setting itself.\r\n\r\nThanks\r\nSuriyan  ","title":"Increase Heap size for a executable jar file in Eclipse","body":"<p>I created a executable jar file using eclipse, It requires 5gb of heap size depends on excel size which it processing, i can increase heap size of that program in eclipse run configuration and run successfully but after exporting it as executable jar file heap size set to default heap size and i unable to complete the task. How i can export the jar file with eclipse heap size setting itself.</p>\n\n<p>Thanks\nSuriyan  </p>\n"},{"tags":["java","eclipse","heap-memory"],"comments":[{"owner":{"account_id":2417243,"reputation":11672,"user_id":2111035,"display_name":"Chris K"},"score":1,"creation_date":1411590595,"post_id":26025797,"comment_id":40765345,"body_markdown":"what happens when you set it to 2G?  you may be editing the settings in the wrong place..","body":"what happens when you set it to 2G?  you may be editing the settings in the wrong place.."},{"owner":{"account_id":1896086,"reputation":5499,"user_id":1713031,"accept_rate":71,"display_name":"acheron55"},"score":0,"creation_date":1411591085,"post_id":26025797,"comment_id":40765591,"body_markdown":"@ChrisK I still got 4g and it immediately reminded me a change I did couple years ago... Eclipse preferences JRE had default VM arguments: -Xmx4g which was overriding run configuration. It would make more sense if it was other way but anyway, it&#39;s solved now, thanks","body":"@ChrisK I still got 4g and it immediately reminded me a change I did couple years ago... Eclipse preferences JRE had default VM arguments: -Xmx4g which was overriding run configuration. It would make more sense if it was other way but anyway, it&#39;s solved now, thanks"}],"answers":[{"tags":[],"owner":{"account_id":1896086,"reputation":5499,"user_id":1713031,"accept_rate":71,"display_name":"acheron55"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1411591255,"creation_date":1411591255,"answer_id":26026076,"question_id":26025797,"body_markdown":"Eclipse -&gt; Preferences -&gt; Java -&gt; Installed JREs. There is a default VM arguments part for each JRE, which was causing everything to run in 4G for me, even though I try to override -Xmx in Run Configuration","title":"Eclipse java application heap size cannot exceed 4G","body":"<p>Eclipse -> Preferences -> Java -> Installed JREs. There is a default VM arguments part for each JRE, which was causing everything to run in 4G for me, even though I try to override -Xmx in Run Configuration</p>\n"}],"owner":{"account_id":1896086,"reputation":5499,"user_id":1713031,"accept_rate":71,"display_name":"acheron55"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":632,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639069214,"creation_date":1411590092,"question_id":26025797,"body_markdown":"I need to run an application with -Xmx12g but I cannot get 12g in eclipse.\r\n\r\nI can run it fine from terminal directly, `java -Xmx12g ...` which shows me the max memory as 12G from this command:\r\n\r\n    Runtime.getRuntime().maxMemory();\r\n\r\nRunning same thing in eclipse, as runtime vm parameters, I get 4G max. I tried maxing values in eclipse.ini(which should not affect my java application right?), no change.\r\nI have 16G ram, my friend has 64G, he can run it fine but I can&#39;t get more than 4g with same settings. I&#39;m not getting any error or anything.\r\n64 bit os, 64 bit vm","title":"Eclipse java application heap size cannot exceed 4G","body":"<p>I need to run an application with -Xmx12g but I cannot get 12g in eclipse.</p>\n\n<p>I can run it fine from terminal directly, <code>java -Xmx12g ...</code> which shows me the max memory as 12G from this command:</p>\n\n<pre><code>Runtime.getRuntime().maxMemory();\n</code></pre>\n\n<p>Running same thing in eclipse, as runtime vm parameters, I get 4G max. I tried maxing values in eclipse.ini(which should not affect my java application right?), no change.\nI have 16G ram, my friend has 64G, he can run it fine but I can't get more than 4g with same settings. I'm not getting any error or anything.\n64 bit os, 64 bit vm</p>\n"},{"tags":["java","jdbc","db2"],"comments":[{"owner":{"account_id":11306067,"reputation":11409,"user_id":8290634,"display_name":"mao"},"score":3,"creation_date":1638375371,"post_id":70187610,"comment_id":124072547,"body_markdown":"Does the same connection-string work with a different java application for example any application like DbVisualiser, SquirrelSQL, DBeaver, IBM Data-Studio?   in other words, is it your application, or is there a problem with either the connection-string or the target Db2-server connectivity","body":"Does the same connection-string work with a different java application for example any application like DbVisualiser, SquirrelSQL, DBeaver, IBM Data-Studio?   in other words, is it your application, or is there a problem with either the connection-string or the target Db2-server connectivity"},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1638375444,"post_id":70187610,"comment_id":124072594,"body_markdown":"The `getConnection()` call can be sometimes slow (a few seconds?) but apart from that the rest should be pretty fast.","body":"The <code>getConnection()</code> call can be sometimes slow (a few seconds?) but apart from that the rest should be pretty fast."},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1638380611,"post_id":70187610,"comment_id":124074832,"body_markdown":"Exactly where does it hang? In the `Class.forName` or in `DriverManager.getConnection(..)` or in `con.createStatement()`?","body":"Exactly where does it hang? In the <code>Class.forName</code> or in <code>DriverManager.getConnection(..)</code> or in <code>con.createStatement()</code>?"},{"owner":{"account_id":1975301,"reputation":400,"user_id":1773204,"accept_rate":92,"display_name":"Avishek"},"score":0,"creation_date":1638425237,"post_id":70187610,"comment_id":124085765,"body_markdown":"Its getting hanged at the time of creating the connection, there is nothing printed in the console i.e error or any exception. Its stays in the hanged condition for 20-30 mins before I manually terminated the process","body":"Its getting hanged at the time of creating the connection, there is nothing printed in the console i.e error or any exception. Its stays in the hanged condition for 20-30 mins before I manually terminated the process"},{"owner":{"account_id":11306067,"reputation":11409,"user_id":8290634,"display_name":"mao"},"score":0,"creation_date":1639069530,"post_id":70187610,"comment_id":124260185,"body_markdown":"@Avishek Your edit is unclear, ambiguous, exactly *which tool* of the Db2-client are you trying to use. Have you verified the target Db2-server is connectable, and that the port is open all the way? How have you verified that the target Db2-server is listening on that port?  Do you have any competent experienced troubleshooting people on site. Stuff like this should be solved by competent onsite people in a few minutes.","body":"@Avishek Your edit is unclear, ambiguous, exactly <i>which tool</i> of the Db2-client are you trying to use. Have you verified the target Db2-server is connectable, and that the port is open all the way? How have you verified that the target Db2-server is listening on that port?  Do you have any competent experienced troubleshooting people on site. Stuff like this should be solved by competent onsite people in a few minutes."},{"owner":{"account_id":1975301,"reputation":400,"user_id":1773204,"accept_rate":92,"display_name":"Avishek"},"score":0,"creation_date":1640187474,"post_id":70187610,"comment_id":124537156,"body_markdown":"I am using DBeaver for connection. When I use DBeaver its getting this socket error. But when I use jdbc connection there is no error or exception at the console only hangs there while getting connection","body":"I am using DBeaver for connection. When I use DBeaver its getting this socket error. But when I use jdbc connection there is no error or exception at the console only hangs there while getting connection"}],"owner":{"account_id":1975301,"reputation":400,"user_id":1773204,"accept_rate":92,"display_name":"Avishek"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":320,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639069209,"creation_date":1638375249,"question_id":70187610,"body_markdown":"I am using jdbc to connect to DB2 instance. I am using the jar - jcc-11.5.0.0.jar.\r\n\r\nThe code I am using is :\r\n\r\n    Class.forName(&quot;com.ibm.db2.jcc.DB2Driver&quot;);\r\n    Connection con = DriverManager.getConnection(&quot;jdbc:db2://&lt;server&gt;:&lt;port&gt;/&lt;database&gt;&quot;,&quot; \r\n    &lt;userid&gt;&quot;,&quot;&lt;password&gt;&quot;)\r\n    Statement stmt = con.createStatement();\r\n\r\nIssue is that the program hangs there, its not producing any exception or output.\r\n\r\nIs there anything I need to do so that it gets a connection successfully\r\n\r\nWhile trying to connect using Db2 client we are getting error:\r\n\r\n[jcc][t4][2030][14161][4.28.11] A communication error occurred during operations on the connection&#39;s underlying socket, socket input stream,\r\nor socket output stream. Error location: Connection timeout check. Message: Connection timed out. ERRORCODE=-4499, SQLSTATE=08001","title":"Jdbc DB2 connectivity getting hanged","body":"<p>I am using jdbc to connect to DB2 instance. I am using the jar - jcc-11.5.0.0.jar.</p>\n<p>The code I am using is :</p>\n<pre><code>Class.forName(&quot;com.ibm.db2.jcc.DB2Driver&quot;);\nConnection con = DriverManager.getConnection(&quot;jdbc:db2://&lt;server&gt;:&lt;port&gt;/&lt;database&gt;&quot;,&quot; \n&lt;userid&gt;&quot;,&quot;&lt;password&gt;&quot;)\nStatement stmt = con.createStatement();\n</code></pre>\n<p>Issue is that the program hangs there, its not producing any exception or output.</p>\n<p>Is there anything I need to do so that it gets a connection successfully</p>\n<p>While trying to connect using Db2 client we are getting error:</p>\n<p>[jcc][t4][2030][14161][4.28.11] A communication error occurred during operations on the connection's underlying socket, socket input stream,\nor socket output stream. Error location: Connection timeout check. Message: Connection timed out. ERRORCODE=-4499, SQLSTATE=08001</p>\n"},{"tags":["java","eclipse","heap-memory","cannot-find-symbol"],"comments":[{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":0,"creation_date":1412032336,"post_id":26110244,"comment_id":40919512,"body_markdown":"Does Eclipse think there are any errors in `Heap.java`?","body":"Does Eclipse think there are any errors in <code>Heap.java</code>?"},{"owner":{"account_id":5104366,"reputation":13,"user_id":4092931,"display_name":"antoineflemming"},"score":0,"creation_date":1412032776,"post_id":26110244,"comment_id":40919609,"body_markdown":"It&#39;s not showing any. Then again, the instructors/TAs give us the shell of the java files for us to fill in, so to speak. So we&#39;re editing existing java files. So these aren&#39;t new projects created in Eclipse, just edited and saved in Eclipse. So, Eclipse isn&#39;t showing errors since it&#39;s not an Eclipse project.","body":"It&#39;s not showing any. Then again, the instructors/TAs give us the shell of the java files for us to fill in, so to speak. So we&#39;re editing existing java files. So these aren&#39;t new projects created in Eclipse, just edited and saved in Eclipse. So, Eclipse isn&#39;t showing errors since it&#39;s not an Eclipse project."}],"answers":[{"tags":[],"owner":{"account_id":313216,"reputation":44997,"user_id":627727,"accept_rate":84,"display_name":"mkobit"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1412032761,"creation_date":1412032761,"answer_id":26110401,"question_id":26110244,"body_markdown":"You are only compiling a single source file with your command.\r\n\r\n    &gt; javac Heap.java\r\n\r\nIf you are compiling this way you need to specify all of the source files. Here is an example using a version of Java 7.\r\n\r\n\r\n    $ls\r\n    Gradable.java  HeapInterface.java  Heap.java  PriorityQueueInterface.java  PriorityQueue.java\r\n\r\n    $~/jdk1.7.0/bin/javac -version \r\n    javac 1.7.0_60\r\n\r\n    $~/jdk1.7.0/bin/javac Gradable.java HeapInterface.java Heap.java PriorityQueueInterface.java PriorityQueue.java\r\n    Note: Heap.java uses unchecked or unsafe operations.\r\n    Note: Recompile with -Xlint:unchecked for details.\r\n\r\n    $ls\r\n    Gradable.class  Gradable.java  Heap.class  HeapInterface.class  HeapInterface.java  Heap.java  PriorityQueue.class  PriorityQueueInterface.class  PriorityQueueInterface.java  PriorityQueue.java\r\n\r\nThe Java compiler also supports many more options.\r\n\r\n    $~/jdk1.7.0/bin/javac -help                                                                                    \r\n    Usage: javac &lt;options&gt; &lt;source files&gt;\r\n    where possible options include:\r\n      -g                         Generate all debugging info\r\n      -g:none                    Generate no debugging info\r\n      -g:{lines,vars,source}     Generate only some debugging info\r\n      -nowarn                    Generate no warnings\r\n      -verbose                   Output messages about what the compiler is doing\r\n      -deprecation               Output source locations where deprecated APIs are used\r\n      -classpath &lt;path&gt;          Specify where to find user class files and annotation processors\r\n      -cp &lt;path&gt;                 Specify where to find user class files and annotation processors\r\n      -sourcepath &lt;path&gt;         Specify where to find input source files\r\n      -bootclasspath &lt;path&gt;      Override location of bootstrap class files\r\n      -extdirs &lt;dirs&gt;            Override location of installed extensions\r\n      -endorseddirs &lt;dirs&gt;       Override location of endorsed standards path\r\n      -proc:{none,only}          Control whether annotation processing and/or compilation is done.\r\n      -processor &lt;class1&gt;[,&lt;class2&gt;,&lt;class3&gt;...] Names of the annotation processors to run; bypasses default discovery process\r\n      -processorpath &lt;path&gt;      Specify where to find annotation processors\r\n      -d &lt;directory&gt;             Specify where to place generated class files\r\n      -s &lt;directory&gt;             Specify where to place generated source files\r\n      -implicit:{none,class}     Specify whether or not to generate class files for implicitly referenced files\r\n      -encoding &lt;encoding&gt;       Specify character encoding used by source files\r\n      -source &lt;release&gt;          Provide source compatibility with specified release\r\n      -target &lt;release&gt;          Generate class files for specific VM version\r\n      -version                   Version information\r\n      -help                      Print a synopsis of standard options\r\n      -Akey[=value]              Options to pass to annotation processors\r\n      -X                         Print a synopsis of nonstandard options\r\n      -J&lt;flag&gt;                   Pass &lt;flag&gt; directly to the runtime system\r\n      -Werror                    Terminate compilation if warnings occur\r\n      @&lt;filename&gt;                Read options and filenames from file","title":"I keep getting &quot;error: cannot find symbol&quot; for two interface classes even though classes are in the same directory","body":"<p>You are only compiling a single source file with your command.</p>\n\n<pre><code>&gt; javac Heap.java\n</code></pre>\n\n<p>If you are compiling this way you need to specify all of the source files. Here is an example using a version of Java 7.</p>\n\n<pre><code>$ls\nGradable.java  HeapInterface.java  Heap.java  PriorityQueueInterface.java  PriorityQueue.java\n\n$~/jdk1.7.0/bin/javac -version \njavac 1.7.0_60\n\n$~/jdk1.7.0/bin/javac Gradable.java HeapInterface.java Heap.java PriorityQueueInterface.java PriorityQueue.java\nNote: Heap.java uses unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n\n$ls\nGradable.class  Gradable.java  Heap.class  HeapInterface.class  HeapInterface.java  Heap.java  PriorityQueue.class  PriorityQueueInterface.class  PriorityQueueInterface.java  PriorityQueue.java\n</code></pre>\n\n<p>The Java compiler also supports many more options.</p>\n\n<pre><code>$~/jdk1.7.0/bin/javac -help                                                                                    \nUsage: javac &lt;options&gt; &lt;source files&gt;\nwhere possible options include:\n  -g                         Generate all debugging info\n  -g:none                    Generate no debugging info\n  -g:{lines,vars,source}     Generate only some debugging info\n  -nowarn                    Generate no warnings\n  -verbose                   Output messages about what the compiler is doing\n  -deprecation               Output source locations where deprecated APIs are used\n  -classpath &lt;path&gt;          Specify where to find user class files and annotation processors\n  -cp &lt;path&gt;                 Specify where to find user class files and annotation processors\n  -sourcepath &lt;path&gt;         Specify where to find input source files\n  -bootclasspath &lt;path&gt;      Override location of bootstrap class files\n  -extdirs &lt;dirs&gt;            Override location of installed extensions\n  -endorseddirs &lt;dirs&gt;       Override location of endorsed standards path\n  -proc:{none,only}          Control whether annotation processing and/or compilation is done.\n  -processor &lt;class1&gt;[,&lt;class2&gt;,&lt;class3&gt;...] Names of the annotation processors to run; bypasses default discovery process\n  -processorpath &lt;path&gt;      Specify where to find annotation processors\n  -d &lt;directory&gt;             Specify where to place generated class files\n  -s &lt;directory&gt;             Specify where to place generated source files\n  -implicit:{none,class}     Specify whether or not to generate class files for implicitly referenced files\n  -encoding &lt;encoding&gt;       Specify character encoding used by source files\n  -source &lt;release&gt;          Provide source compatibility with specified release\n  -target &lt;release&gt;          Generate class files for specific VM version\n  -version                   Version information\n  -help                      Print a synopsis of standard options\n  -Akey[=value]              Options to pass to annotation processors\n  -X                         Print a synopsis of nonstandard options\n  -J&lt;flag&gt;                   Pass &lt;flag&gt; directly to the runtime system\n  -Werror                    Terminate compilation if warnings occur\n  @&lt;filename&gt;                Read options and filenames from file\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2144304,"reputation":336,"user_id":1902289,"display_name":"cogitos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412032861,"creation_date":1412032861,"answer_id":26110416,"question_id":26110244,"body_markdown":"Check that your CLASSPATH isn&#39;t set.  If set, it should include the current working directory (typically something like CLASSPATH=.:/some/directory:/some/other/directory).  Either add . to your CLASSPATH or unset the variable.  Alternatively, you can explicitly add all files to the compile command (e.g. javac *.java). ","title":"I keep getting &quot;error: cannot find symbol&quot; for two interface classes even though classes are in the same directory","body":"<p>Check that your CLASSPATH isn't set.  If set, it should include the current working directory (typically something like CLASSPATH=.:/some/directory:/some/other/directory).  Either add . to your CLASSPATH or unset the variable.  Alternatively, you can explicitly add all files to the compile command (e.g. javac *.java). </p>\n"}],"owner":{"account_id":5104366,"reputation":13,"user_id":4092931,"display_name":"antoineflemming"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2244,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":26110401,"answer_count":2,"score":1,"last_activity_date":1639069203,"creation_date":1412031637,"question_id":26110244,"body_markdown":"So, I&#39;m really baffled by this. I&#39;m working on a homework assignment that involves creating a Heap class and a PriorityQueue class that implement interfaces. Two of the interfaces are for the Heap and PriorityQueue classes, and the third is a Gradable interface that just has a toArray() method.\r\n\r\nHeap.java\r\n\r\n    public class Heap&lt;T extends Comparable&lt;? super T&gt;&gt; implements HeapInterface&lt;T&gt;,\r\n           Gradable&lt;T&gt; {\r\n\r\n    private T[] heapArray = (T[]) new Comparable[10];\r\n    private int heapSize = 0;\r\n\r\n    @Override\r\n    public void add(T item) {\r\n        if (item == null) {\r\n            throw new IllegalArgumentException();\r\n        } else if (size() == heapArray.length - 1){\r\n            resize();\r\n        }\r\n        heapSize++;\r\n        heapArray[heapSize] = item;\r\n        int i = heapSize;\r\n        upHeap(i);\r\n    }\r\n\r\n    @Override\r\n    public boolean isEmpty() {\r\n        return (heapSize == 0);\r\n    }\r\n\r\n    @Override\r\n    public T peek() {\r\n        return heapArray[1];\r\n    }\r\n\r\n    @Override\r\n    public T remove() {\r\n    \tif (size() == 0) {\r\n    \t    return null;\r\n    \t} else {\r\n            T returnMin = peek();\r\n            swap(1, heapSize);\r\n            heapArray[heapSize] = null;\r\n            heapSize--;\r\n            heapify(1);\r\n            return returnMin;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public int size() {\r\n        return heapSize;\r\n    }\r\n\r\n    @Override\r\n    public T[] toArray() {\r\n        return heapArray;\r\n    }\r\n\r\n    /**\r\n     * Doubles the size of the backing array\r\n     * Big O - O(n)\r\n     */\r\n    private void resize() {\r\n        T[] heapCopy = (T[]) new Comparable[(heapArray.length) * 2];\r\n        for (int i = 1; i &lt; heapArray.length; i++) {\r\n            heapCopy[i] = heapArray[i];\r\n        }\r\n        heapArray = heapCopy;\r\n    }\r\n\r\n    /**\r\n     * Swaps the elements at the specified indices\r\n     * Big O - O(1)\r\n     * @param the indices to swap\r\n     */\r\n    private void swap(int i, int j) {\r\n        T tempElement = heapArray[i];\r\n        heapArray[i] = heapArray[j];\r\n        heapArray[j] = tempElement;\r\n    }\r\n\r\n    /**\r\n     * Returns the left child index of the specified position\r\n     * Big O - O(1)\r\n     * @param index\r\n     * @return the left child index\r\n     */\r\n    private int getLeft(int i) {\r\n        return 2 * i;\r\n    }\r\n\r\n    /**\r\n     * Returns the right child index of the specified position\r\n     * Big O - O(1)\r\n     * @param index\r\n     * @return the right child index\r\n     */\r\n    private int getRight(int i) {\r\n        return 2 * i + 1;\r\n    }\r\n\r\n    /**\r\n     * Returns the parent index of the specified position\r\n     * Big O - O(1)\r\n     * @param index\r\n     * @return the parent index\r\n     */\r\n    private int getParent(int i) {\r\n        return (i) / 2;\r\n    }\r\n\r\n    /**\r\n     * Readjusts the heap by going down the heap to ensure heap property is\r\n     * maintained\r\n     * Big O - O(log(n))\r\n     * @param the index to start at\r\n     */\r\n    private void downHeap(int i) {\r\n        int left = getLeft(i);\r\n        int right = getRight(i);\r\n        while (left &lt; heapSize) {\r\n            int pos = left;\r\n            if (heapArray[right].compareTo(heapArray[left]) &lt; 0) {\r\n                pos = right;\r\n            }\r\n            if (heapArray[pos].compareTo(heapArray[i]) &lt; 0) {\r\n                swap(pos, i);\r\n                left = getLeft(pos);\r\n                right = getRight(pos);\r\n                i = pos;\r\n            } else {\r\n                left = heapSize;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Readjusts the heap by going up the heap to ensure heap property is\r\n     * maintained\r\n     * Big O - O(log(n))\r\n     * @param the index to start at\r\n     */\r\n    private void upHeap(int i) {\r\n        int parent = getParent(i);\r\n        while ((i &gt; 0) &amp;&amp; (heapArray[parent].compareTo(heapArray[i]) &gt; 0)) {\r\n            swap(parent, i);\r\n            i = parent;\r\n            parent = getParent(i);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Readjusts the heap by going down the heap to ensure heap property is\r\n     * maintained\r\n     * Big O - O(log(n))\r\n     * @param the index to start at\r\n     */\r\n    private void heapify(int i) {\r\n        int left = getLeft(i);\r\n        int right = getRight(i);\r\n        int pos;\r\n        if ((left &lt; heapSize) &amp;&amp; (heapArray[left].compareTo(heapArray[i]) &lt; 0)) {\r\n            pos = left;\r\n        } else {\r\n            pos = i;\r\n        }\r\n        if ((right &lt; heapSize) &amp;&amp; (heapArray[right].compareTo(heapArray[pos]) &lt; 0)) {\r\n            pos = right;\r\n        }\r\n        if (pos != i) {\r\n            swap(i, pos);\r\n            heapify(pos);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Readjusts the heap, beginning at height/2, by going down the heap to\r\n     * ensure heap property is maintained\r\n     * Big O - O(log(n))\r\n     */\r\n    private void buildHeap() {\r\n        for (int i = heapSize / 2; i &gt; 0; i--) {\r\n            heapify(i);\r\n        }\r\n    }\r\n\r\n\r\n    }\r\n\r\nPriorityQueue.java\r\n\r\n    public class PriorityQueue&lt;T extends Comparable&lt;? super T&gt;&gt; implements\r\n           PriorityQueueInterface&lt;T&gt;, Gradable&lt;T&gt; {\r\n\r\n    private Heap&lt;T&gt; priorityHeap;\r\n\r\n    @Override\r\n    public void insert(T item) {\r\n        priorityHeap.add(item);\r\n    }\r\n\r\n    @Override\r\n    public T findMin() {\r\n        return priorityHeap.peek();\r\n    }\r\n\r\n    @Override\r\n    public T deleteMin() {\r\n        return priorityHeap.remove();\r\n    }\r\n\r\n    @Override\r\n    public boolean isEmpty() {\r\n        return priorityHeap.isEmpty();\r\n    }\r\n\r\n    @Override\r\n    public void makeEmpty() {\r\n        priorityHeap = new Heap&lt;T&gt;();\r\n    }\r\n\r\n    @Override\r\n    public T[] toArray() {\r\n        priorityHeap.toArray();\r\n    }\r\n\r\n\r\n    }\r\n\r\nGradable.java\r\n\r\n    public interface Gradable&lt;T&gt; {\r\n    /**\r\n     * Returns the backing array of the data structure INCLUDING ANY EMPTY\r\n     * SPACES THAT MAY BE AT THE END.\r\n     * This should be a 1-line method; just return the backing array exactly as\r\n     * it is.\r\n     *\r\n     * @return the backing array of the data structure\r\n     */\r\n    public T[] toArray();\r\n    }\r\n\r\nHeapInterface.java\r\n\r\n    public interface HeapInterface&lt;T extends Comparable&lt;? super T&gt;&gt; {\r\n\r\n    /**\r\n     * Adds item to this heap\r\n     * Should throw IllegalArgumentException if item is null\r\n     * Big O - O(log(n))\r\n     * @param item the item to be added\r\n     */\r\n    public void add(T item);\r\n\r\n    /**\r\n     * Checks if the heap is empty or not\r\n     * Big O - O(1)\r\n     * @return true if this heap is empty, false otherwise\r\n     */\r\n    public boolean isEmpty();\r\n\r\n    /**\r\n     * Returns the minimum element of the heap without modifying the heap\r\n     * Big O - O(1)\r\n     * @return the minimum element of this heap\r\n     */\r\n    public T peek();\r\n\r\n    /**\r\n     * Removes and returns the minimum element of this heap\r\n     * Big O - O(log(n))\r\n     * @return the minimum element of this heap\r\n     */\r\n    public T remove();\r\n\r\n    /**\r\n     * The size of the heap\r\n     * Big O - O(1)\r\n     * @return the number of elements in this heap\r\n     */\r\n    public int size();\r\n\r\n    }\r\n\r\nPriorityQueueInterface.java\r\n\r\n    public interface PriorityQueueInterface&lt;T extends Comparable&lt;? super T&gt;&gt; {\r\n\r\n    /**\r\n     * Inserts an element in order in the Priority Queue\r\n     * Should throw IllegalArgumentException if item == null\r\n     * Big O - O(log(n))\r\n     * @param item the item to be inserted, it should be a data that does have\r\n     * an order property\r\n     */\r\n    public void insert(T item);\r\n\r\n    /**\r\n     * returns the minimum value without changing the priority queue\r\n     * Should return null if queue is empty\r\n     * Big O - O(1)\r\n     * @return the minimum value without changing the priority queue\r\n     */\r\n    public T findMin();\r\n\r\n    /**\r\n     * deletes and return the smallest item in the structure\r\n     * Big O - O(log(n))\r\n     * @return the minimum value\r\n     */\r\n    public T deleteMin();\r\n\r\n    /**\r\n     * Checks if the queue is empty or not\r\n     * Big O - O(1)\r\n     * @return true if queue is empty, else false\r\n     */\r\n    public boolean isEmpty();\r\n\r\n    /**\r\n     * Makes the queue empty\r\n     * Big O - O(1)\r\n     */\r\n    public void makeEmpty();\r\n    }\r\n\r\nBut every time I compile, I get these errors:\r\n\r\n\r\n    &gt;javac Heap.java\r\n    Heap.java:1: error: cannot find symbol\r\n    public class Heap&lt;T extends Comparable&lt;? super T&gt;&gt; implements HeapInterface&lt;T&gt;,\r\n                                                                  ^\r\n      symbol: class HeapInterface\r\n    Heap.java:2: error: cannot find symbol\r\n           Gradable&lt;T&gt; {\r\n           ^\r\n      symbol: class Gradable\r\n    Heap.java:7: error: method does not override or implement a method from a supert\r\n    ype\r\n        @Override\r\n        ^\r\n    Heap.java:20: error: method does not override or implement a method from a super\r\n    type\r\n        @Override\r\n        ^\r\n    Heap.java:25: error: method does not override or implement a method from a super\r\n    type\r\n        @Override\r\n        ^\r\n    Heap.java:30: error: method does not override or implement a method from a super\r\n    type\r\n        @Override\r\n        ^\r\n    Heap.java:44: error: method does not override or implement a method from a super\r\n    type\r\n        @Override\r\n        ^\r\n    Heap.java:49: error: method does not override or implement a method from a super\r\n    type\r\n        @Override\r\n        ^\r\n    Note: Heap.java uses unchecked or unsafe operations.\r\n    Note: Recompile with -Xlint:unchecked for details.\r\n    8 errors\r\n    \r\n    &gt;PriorityQueue.java\r\n    PriorityQueue.java:2: error: cannot find symbol\r\n           PriorityQueueInterface&lt;T&gt;, Gradable&lt;T&gt; {\r\n           ^\r\n      symbol: class PriorityQueueInterface\r\n    PriorityQueue.java:2: error: cannot find symbol\r\n           PriorityQueueInterface&lt;T&gt;, Gradable&lt;T&gt; {\r\n                                      ^\r\n      symbol: class Gradable\r\n    PriorityQueue.java:4: error: cannot find symbol\r\n        private Heap&lt;T&gt; priorityHeap;\r\n                ^\r\n      symbol:   class Heap\r\n      location: class PriorityQueue&lt;T&gt;\r\n      where T is a type-variable:\r\n        T extends Comparable&lt;? super T&gt; declared in class PriorityQueue\r\n    PriorityQueue.java:6: error: method does not override or implement a method from\r\n     a supertype\r\n        @Override\r\n        ^\r\n    PriorityQueue.java:11: error: method does not override or implement a method fro\r\n    m a supertype\r\n        @Override\r\n        ^\r\n    PriorityQueue.java:16: error: method does not override or implement a method fro\r\n    m a supertype\r\n        @Override\r\n        ^\r\n    PriorityQueue.java:21: error: method does not override or implement a method fro\r\n    m a supertype\r\n        @Override\r\n        ^\r\n    PriorityQueue.java:26: error: method does not override or implement a method fro\r\n    m a supertype\r\n        @Override\r\n        ^\r\n    PriorityQueue.java:28: error: cannot find symbol\r\n            priorityHeap = new Heap&lt;T&gt;();\r\n                               ^\r\n      symbol:   class Heap\r\n      location: class PriorityQueue&lt;T&gt;\r\n      where T is a type-variable:\r\n        T extends Comparable&lt;? super T&gt; declared in class PriorityQueue\r\n    PriorityQueue.java:31: error: method does not override or implement a method fro\r\n    m a supertype\r\n        @Override\r\n        ^\r\n    10 errors\r\n\r\nI&#39;m not sure what&#39;s causing this, as the three interface classes that the compiler cannot find (HeapInterface, Gradable, and PriorityQueueInterface) are in the same directory as Heap and PriorityQueue. Just to note, I&#39;m using Eclipse to write the code and then cmd prompt to compile the code. I am not allowed to modify the interface classes or add any new public methods to Heap or PriorityQueue. Any help would be appreciated.","title":"I keep getting &quot;error: cannot find symbol&quot; for two interface classes even though classes are in the same directory","body":"<p>So, I'm really baffled by this. I'm working on a homework assignment that involves creating a Heap class and a PriorityQueue class that implement interfaces. Two of the interfaces are for the Heap and PriorityQueue classes, and the third is a Gradable interface that just has a toArray() method.</p>\n\n<p>Heap.java</p>\n\n<pre><code>public class Heap&lt;T extends Comparable&lt;? super T&gt;&gt; implements HeapInterface&lt;T&gt;,\n       Gradable&lt;T&gt; {\n\nprivate T[] heapArray = (T[]) new Comparable[10];\nprivate int heapSize = 0;\n\n@Override\npublic void add(T item) {\n    if (item == null) {\n        throw new IllegalArgumentException();\n    } else if (size() == heapArray.length - 1){\n        resize();\n    }\n    heapSize++;\n    heapArray[heapSize] = item;\n    int i = heapSize;\n    upHeap(i);\n}\n\n@Override\npublic boolean isEmpty() {\n    return (heapSize == 0);\n}\n\n@Override\npublic T peek() {\n    return heapArray[1];\n}\n\n@Override\npublic T remove() {\n    if (size() == 0) {\n        return null;\n    } else {\n        T returnMin = peek();\n        swap(1, heapSize);\n        heapArray[heapSize] = null;\n        heapSize--;\n        heapify(1);\n        return returnMin;\n    }\n}\n\n@Override\npublic int size() {\n    return heapSize;\n}\n\n@Override\npublic T[] toArray() {\n    return heapArray;\n}\n\n/**\n * Doubles the size of the backing array\n * Big O - O(n)\n */\nprivate void resize() {\n    T[] heapCopy = (T[]) new Comparable[(heapArray.length) * 2];\n    for (int i = 1; i &lt; heapArray.length; i++) {\n        heapCopy[i] = heapArray[i];\n    }\n    heapArray = heapCopy;\n}\n\n/**\n * Swaps the elements at the specified indices\n * Big O - O(1)\n * @param the indices to swap\n */\nprivate void swap(int i, int j) {\n    T tempElement = heapArray[i];\n    heapArray[i] = heapArray[j];\n    heapArray[j] = tempElement;\n}\n\n/**\n * Returns the left child index of the specified position\n * Big O - O(1)\n * @param index\n * @return the left child index\n */\nprivate int getLeft(int i) {\n    return 2 * i;\n}\n\n/**\n * Returns the right child index of the specified position\n * Big O - O(1)\n * @param index\n * @return the right child index\n */\nprivate int getRight(int i) {\n    return 2 * i + 1;\n}\n\n/**\n * Returns the parent index of the specified position\n * Big O - O(1)\n * @param index\n * @return the parent index\n */\nprivate int getParent(int i) {\n    return (i) / 2;\n}\n\n/**\n * Readjusts the heap by going down the heap to ensure heap property is\n * maintained\n * Big O - O(log(n))\n * @param the index to start at\n */\nprivate void downHeap(int i) {\n    int left = getLeft(i);\n    int right = getRight(i);\n    while (left &lt; heapSize) {\n        int pos = left;\n        if (heapArray[right].compareTo(heapArray[left]) &lt; 0) {\n            pos = right;\n        }\n        if (heapArray[pos].compareTo(heapArray[i]) &lt; 0) {\n            swap(pos, i);\n            left = getLeft(pos);\n            right = getRight(pos);\n            i = pos;\n        } else {\n            left = heapSize;\n        }\n    }\n}\n\n/**\n * Readjusts the heap by going up the heap to ensure heap property is\n * maintained\n * Big O - O(log(n))\n * @param the index to start at\n */\nprivate void upHeap(int i) {\n    int parent = getParent(i);\n    while ((i &gt; 0) &amp;&amp; (heapArray[parent].compareTo(heapArray[i]) &gt; 0)) {\n        swap(parent, i);\n        i = parent;\n        parent = getParent(i);\n    }\n}\n\n/**\n * Readjusts the heap by going down the heap to ensure heap property is\n * maintained\n * Big O - O(log(n))\n * @param the index to start at\n */\nprivate void heapify(int i) {\n    int left = getLeft(i);\n    int right = getRight(i);\n    int pos;\n    if ((left &lt; heapSize) &amp;&amp; (heapArray[left].compareTo(heapArray[i]) &lt; 0)) {\n        pos = left;\n    } else {\n        pos = i;\n    }\n    if ((right &lt; heapSize) &amp;&amp; (heapArray[right].compareTo(heapArray[pos]) &lt; 0)) {\n        pos = right;\n    }\n    if (pos != i) {\n        swap(i, pos);\n        heapify(pos);\n    }\n}\n\n/**\n * Readjusts the heap, beginning at height/2, by going down the heap to\n * ensure heap property is maintained\n * Big O - O(log(n))\n */\nprivate void buildHeap() {\n    for (int i = heapSize / 2; i &gt; 0; i--) {\n        heapify(i);\n    }\n}\n\n\n}\n</code></pre>\n\n<p>PriorityQueue.java</p>\n\n<pre><code>public class PriorityQueue&lt;T extends Comparable&lt;? super T&gt;&gt; implements\n       PriorityQueueInterface&lt;T&gt;, Gradable&lt;T&gt; {\n\nprivate Heap&lt;T&gt; priorityHeap;\n\n@Override\npublic void insert(T item) {\n    priorityHeap.add(item);\n}\n\n@Override\npublic T findMin() {\n    return priorityHeap.peek();\n}\n\n@Override\npublic T deleteMin() {\n    return priorityHeap.remove();\n}\n\n@Override\npublic boolean isEmpty() {\n    return priorityHeap.isEmpty();\n}\n\n@Override\npublic void makeEmpty() {\n    priorityHeap = new Heap&lt;T&gt;();\n}\n\n@Override\npublic T[] toArray() {\n    priorityHeap.toArray();\n}\n\n\n}\n</code></pre>\n\n<p>Gradable.java</p>\n\n<pre><code>public interface Gradable&lt;T&gt; {\n/**\n * Returns the backing array of the data structure INCLUDING ANY EMPTY\n * SPACES THAT MAY BE AT THE END.\n * This should be a 1-line method; just return the backing array exactly as\n * it is.\n *\n * @return the backing array of the data structure\n */\npublic T[] toArray();\n}\n</code></pre>\n\n<p>HeapInterface.java</p>\n\n<pre><code>public interface HeapInterface&lt;T extends Comparable&lt;? super T&gt;&gt; {\n\n/**\n * Adds item to this heap\n * Should throw IllegalArgumentException if item is null\n * Big O - O(log(n))\n * @param item the item to be added\n */\npublic void add(T item);\n\n/**\n * Checks if the heap is empty or not\n * Big O - O(1)\n * @return true if this heap is empty, false otherwise\n */\npublic boolean isEmpty();\n\n/**\n * Returns the minimum element of the heap without modifying the heap\n * Big O - O(1)\n * @return the minimum element of this heap\n */\npublic T peek();\n\n/**\n * Removes and returns the minimum element of this heap\n * Big O - O(log(n))\n * @return the minimum element of this heap\n */\npublic T remove();\n\n/**\n * The size of the heap\n * Big O - O(1)\n * @return the number of elements in this heap\n */\npublic int size();\n\n}\n</code></pre>\n\n<p>PriorityQueueInterface.java</p>\n\n<pre><code>public interface PriorityQueueInterface&lt;T extends Comparable&lt;? super T&gt;&gt; {\n\n/**\n * Inserts an element in order in the Priority Queue\n * Should throw IllegalArgumentException if item == null\n * Big O - O(log(n))\n * @param item the item to be inserted, it should be a data that does have\n * an order property\n */\npublic void insert(T item);\n\n/**\n * returns the minimum value without changing the priority queue\n * Should return null if queue is empty\n * Big O - O(1)\n * @return the minimum value without changing the priority queue\n */\npublic T findMin();\n\n/**\n * deletes and return the smallest item in the structure\n * Big O - O(log(n))\n * @return the minimum value\n */\npublic T deleteMin();\n\n/**\n * Checks if the queue is empty or not\n * Big O - O(1)\n * @return true if queue is empty, else false\n */\npublic boolean isEmpty();\n\n/**\n * Makes the queue empty\n * Big O - O(1)\n */\npublic void makeEmpty();\n}\n</code></pre>\n\n<p>But every time I compile, I get these errors:</p>\n\n<pre><code>&gt;javac Heap.java\nHeap.java:1: error: cannot find symbol\npublic class Heap&lt;T extends Comparable&lt;? super T&gt;&gt; implements HeapInterface&lt;T&gt;,\n                                                              ^\n  symbol: class HeapInterface\nHeap.java:2: error: cannot find symbol\n       Gradable&lt;T&gt; {\n       ^\n  symbol: class Gradable\nHeap.java:7: error: method does not override or implement a method from a supert\nype\n    @Override\n    ^\nHeap.java:20: error: method does not override or implement a method from a super\ntype\n    @Override\n    ^\nHeap.java:25: error: method does not override or implement a method from a super\ntype\n    @Override\n    ^\nHeap.java:30: error: method does not override or implement a method from a super\ntype\n    @Override\n    ^\nHeap.java:44: error: method does not override or implement a method from a super\ntype\n    @Override\n    ^\nHeap.java:49: error: method does not override or implement a method from a super\ntype\n    @Override\n    ^\nNote: Heap.java uses unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n8 errors\n\n&gt;PriorityQueue.java\nPriorityQueue.java:2: error: cannot find symbol\n       PriorityQueueInterface&lt;T&gt;, Gradable&lt;T&gt; {\n       ^\n  symbol: class PriorityQueueInterface\nPriorityQueue.java:2: error: cannot find symbol\n       PriorityQueueInterface&lt;T&gt;, Gradable&lt;T&gt; {\n                                  ^\n  symbol: class Gradable\nPriorityQueue.java:4: error: cannot find symbol\n    private Heap&lt;T&gt; priorityHeap;\n            ^\n  symbol:   class Heap\n  location: class PriorityQueue&lt;T&gt;\n  where T is a type-variable:\n    T extends Comparable&lt;? super T&gt; declared in class PriorityQueue\nPriorityQueue.java:6: error: method does not override or implement a method from\n a supertype\n    @Override\n    ^\nPriorityQueue.java:11: error: method does not override or implement a method fro\nm a supertype\n    @Override\n    ^\nPriorityQueue.java:16: error: method does not override or implement a method fro\nm a supertype\n    @Override\n    ^\nPriorityQueue.java:21: error: method does not override or implement a method fro\nm a supertype\n    @Override\n    ^\nPriorityQueue.java:26: error: method does not override or implement a method fro\nm a supertype\n    @Override\n    ^\nPriorityQueue.java:28: error: cannot find symbol\n        priorityHeap = new Heap&lt;T&gt;();\n                           ^\n  symbol:   class Heap\n  location: class PriorityQueue&lt;T&gt;\n  where T is a type-variable:\n    T extends Comparable&lt;? super T&gt; declared in class PriorityQueue\nPriorityQueue.java:31: error: method does not override or implement a method fro\nm a supertype\n    @Override\n    ^\n10 errors\n</code></pre>\n\n<p>I'm not sure what's causing this, as the three interface classes that the compiler cannot find (HeapInterface, Gradable, and PriorityQueueInterface) are in the same directory as Heap and PriorityQueue. Just to note, I'm using Eclipse to write the code and then cmd prompt to compile the code. I am not allowed to modify the interface classes or add any new public methods to Heap or PriorityQueue. Any help would be appreciated.</p>\n"},{"tags":["java","arrays","eclipse","heap-memory"],"comments":[{"owner":{"account_id":4187371,"reputation":4956,"user_id":3430807,"accept_rate":60,"display_name":"Andreas"},"score":0,"creation_date":1413994040,"post_id":26511903,"comment_id":41654058,"body_markdown":"Are your operations conducive to a streaming interface? Perhaps it is time to stop working in memory and start serializing to disk.","body":"Are your operations conducive to a streaming interface? Perhaps it is time to stop working in memory and start serializing to disk."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1413995179,"post_id":26511903,"comment_id":41654738,"body_markdown":"just increasing the heap with Xmx should do the trick. Have you monitored your heap size with jvisualvm to see how much heap your app gets and what is using it?","body":"just increasing the heap with Xmx should do the trick. Have you monitored your heap size with jvisualvm to see how much heap your app gets and what is using it?"}],"answers":[{"tags":[],"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1413996541,"creation_date":1413996541,"answer_id":26512771,"question_id":26511903,"body_markdown":"The settings in eclipse.ini only change the settings for Eclipse itself, they do not change the settings for programs that you run. \r\n\r\nLook in &#39;Run &gt; Run Configurations&#39; and find your &#39;Java Application&#39;, set the -Xmx ... values in the &#39;VM arguments&#39; section of the &#39;Arguments&#39; tab.\r\n","title":"Getting Java OutOfMemory Heap Space error while generating large arrays of type double (&gt; 60 million obs)","body":"<p>The settings in eclipse.ini only change the settings for Eclipse itself, they do not change the settings for programs that you run. </p>\n\n<p>Look in 'Run > Run Configurations' and find your 'Java Application', set the -Xmx ... values in the 'VM arguments' section of the 'Arguments' tab.</p>\n"},{"tags":[],"owner":{"account_id":90734,"reputation":2071,"user_id":249623,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1413997390,"creation_date":1413997023,"answer_id":26512919,"question_id":26511903,"body_markdown":" 1. Use the correct JRE\r\n\r\nIs your hardware 32-bit or 64-bit?  If the hardware supports 64-bit, ensure that you are using a 64-bit JRE.\r\n\r\nIn Windows, for example, its common to have both a 32-bit jre and a 64-bit jre installed.   The 32-bit JRE can only address about 1500 mb of memory.  If you switch to the 64-bit JRE you should be able to specify all your available memory.\r\n\r\n 2. Pass the -Xmx flag to YOUR process.\r\n\r\nYou mention eclipse.ini - I assume you are developing your software in eclipse.  The eclipse.ini configures the memory used by Eclipse.  What you probably want is to change the properties of the Run configuration you are using to launch your application from Eclipse.  \r\n\r\n 3. Don&#39;t mess with System.gc()\r\n\r\nIts frustrating not to have a free method to call when you know that there is a huge array of garbage.  System.gc() might seem like the answer to your troubles.  Don&#39;t mess with it.  Its probably not going to get you where you want to go\r\n\r\n 4. Re-think your algorithm\r\n\r\nAre you sure there isn&#39;t a way to achieve what you want with lots of smaller arrays?  Is there a way to achieve the same result in a hierarchical fashion?  Having a single monolithic array smells like an anti-pattern.  Its trouble-some to keep in memory, its hard to resize, it puts a strain on memory management and garbage collection.  Even if you changed your data structure to an array or list of fixed sized memory pages I think you would be better off.\r\n\r\n 5. Memory-Mapped Files.\r\n\r\nJava operates quite well with memory mapped files.   The actual data resides on disk, but the operating system makes it seem (to Java) like the data is in memory.   Java can operate on this data without using heap.  The file sizes can be quite large (gigabytes) and you can have more than one mapped at a time.  \r\nPeter Lawrey&#39;s Chronicle project makes use of memory mapped files for high-performance access to massive amounts of data.  Here is a blog post by @peter-lawrey (who is very active on StackOverflow and will probably comment here shortly) describes how memory mapped files can be used to create the appearance of an [8TB matrix of doubles.][1]\r\n\r\n\r\n  [1]: http://vanillajava.blogspot.com/2011/12/using-memory-mapped-file-for-huge.html","title":"Getting Java OutOfMemory Heap Space error while generating large arrays of type double (&gt; 60 million obs)","body":"<ol>\n<li>Use the correct JRE</li>\n</ol>\n\n<p>Is your hardware 32-bit or 64-bit?  If the hardware supports 64-bit, ensure that you are using a 64-bit JRE.</p>\n\n<p>In Windows, for example, its common to have both a 32-bit jre and a 64-bit jre installed.   The 32-bit JRE can only address about 1500 mb of memory.  If you switch to the 64-bit JRE you should be able to specify all your available memory.</p>\n\n<ol start=\"2\">\n<li>Pass the -Xmx flag to YOUR process.</li>\n</ol>\n\n<p>You mention eclipse.ini - I assume you are developing your software in eclipse.  The eclipse.ini configures the memory used by Eclipse.  What you probably want is to change the properties of the Run configuration you are using to launch your application from Eclipse.  </p>\n\n<ol start=\"3\">\n<li>Don't mess with System.gc()</li>\n</ol>\n\n<p>Its frustrating not to have a free method to call when you know that there is a huge array of garbage.  System.gc() might seem like the answer to your troubles.  Don't mess with it.  Its probably not going to get you where you want to go</p>\n\n<ol start=\"4\">\n<li>Re-think your algorithm</li>\n</ol>\n\n<p>Are you sure there isn't a way to achieve what you want with lots of smaller arrays?  Is there a way to achieve the same result in a hierarchical fashion?  Having a single monolithic array smells like an anti-pattern.  Its trouble-some to keep in memory, its hard to resize, it puts a strain on memory management and garbage collection.  Even if you changed your data structure to an array or list of fixed sized memory pages I think you would be better off.</p>\n\n<ol start=\"5\">\n<li>Memory-Mapped Files.</li>\n</ol>\n\n<p>Java operates quite well with memory mapped files.   The actual data resides on disk, but the operating system makes it seem (to Java) like the data is in memory.   Java can operate on this data without using heap.  The file sizes can be quite large (gigabytes) and you can have more than one mapped at a time.<br>\nPeter Lawrey's Chronicle project makes use of memory mapped files for high-performance access to massive amounts of data.  Here is a blog post by @peter-lawrey (who is very active on StackOverflow and will probably comment here shortly) describes how memory mapped files can be used to create the appearance of an <a href=\"http://vanillajava.blogspot.com/2011/12/using-memory-mapped-file-for-huge.html\" rel=\"nofollow\">8TB matrix of doubles.</a></p>\n"}],"owner":{"account_id":5215577,"reputation":41,"user_id":4170643,"display_name":"nmokc"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":401,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1639069186,"creation_date":1413993755,"question_id":26511903,"body_markdown":"I am trying to generate arrays of type double, which can reach sizes in excess of 60 million. Moreover, I need to iteratively generate larger and larger arrays (begin with say 20000, iterate through my code x no. of times successively inflating my array size by a factor of 10 or 2, depending on the output in an iteration). At the end of each iteration i, I am setting the reference of my array of size xi to null, then pointing it to a newly generated array of size x(i+1) which is &gt; xi. However, I am eventually running out of memory in eclipse with the usual Java Heap space out of memory error. I tinkered with the Xmx, Xms values in the eclipse.ini but with no luck. I also tried the System.gc() to suggest garbage collection to java after setting the array reference to null, again with no luck.\r\n\r\nI need these large arrays because I am simulating a random process, collecting its output in these arrays (so I am using some additional objects to generate this array which also use up some memory). Then I feed this array to my main algorithm which performs a set of statistical computations on it. I get the out of memory error while generating the array with additional number of observations.\r\n\r\nIs there anyway that I can overcome this out of memory issue? Would setting individual elements of array to null instead of the array itself help in freeing up the memory? Thanks in advance for for any advice. ","title":"Getting Java OutOfMemory Heap Space error while generating large arrays of type double (&gt; 60 million obs)","body":"<p>I am trying to generate arrays of type double, which can reach sizes in excess of 60 million. Moreover, I need to iteratively generate larger and larger arrays (begin with say 20000, iterate through my code x no. of times successively inflating my array size by a factor of 10 or 2, depending on the output in an iteration). At the end of each iteration i, I am setting the reference of my array of size xi to null, then pointing it to a newly generated array of size x(i+1) which is > xi. However, I am eventually running out of memory in eclipse with the usual Java Heap space out of memory error. I tinkered with the Xmx, Xms values in the eclipse.ini but with no luck. I also tried the System.gc() to suggest garbage collection to java after setting the array reference to null, again with no luck.</p>\n\n<p>I need these large arrays because I am simulating a random process, collecting its output in these arrays (so I am using some additional objects to generate this array which also use up some memory). Then I feed this array to my main algorithm which performs a set of statistical computations on it. I get the out of memory error while generating the array with additional number of observations.</p>\n\n<p>Is there anyway that I can overcome this out of memory issue? Would setting individual elements of array to null instead of the array itself help in freeing up the memory? Thanks in advance for for any advice. </p>\n"},{"tags":["java","eclipse","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":29269,"reputation":1995,"user_id":78972,"display_name":"dovetalk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1457922914,"creation_date":1457922068,"answer_id":35978555,"question_id":35978477,"body_markdown":"Your program doesn&#39;t run in Eclipse&#39;s heap space. Eclipse spawns off a separate JVM for your program.\r\n\r\n`Runtime.totalMemory()` does indeed return the current heap size.\r\n\r\nThe `-Xms` argument specifies the *initial* heap size. Java will expand if it cannot free up enough memory through garbage collection until it reaches the maximum, as set by `-Xmx`. At this point, the JVM will exit with an `OutOfMemoryError`.\r\n\r\nJava memory management is a complex topic, involving garbage collection, moving objects from nursery to tenured space, etc.","title":"Runtime heap size set in Eclipse","body":"<p>Your program doesn't run in Eclipse's heap space. Eclipse spawns off a separate JVM for your program.</p>\n\n<p><code>Runtime.totalMemory()</code> does indeed return the current heap size.</p>\n\n<p>The <code>-Xms</code> argument specifies the <em>initial</em> heap size. Java will expand if it cannot free up enough memory through garbage collection until it reaches the maximum, as set by <code>-Xmx</code>. At this point, the JVM will exit with an <code>OutOfMemoryError</code>.</p>\n\n<p>Java memory management is a complex topic, involving garbage collection, moving objects from nursery to tenured space, etc.</p>\n"}],"owner":{"account_id":357630,"reputation":10123,"user_id":697911,"accept_rate":53,"display_name":"user697911"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":35978555,"answer_count":1,"score":3,"last_activity_date":1639069169,"creation_date":1457921577,"question_id":35978477,"body_markdown":"    public class Test {\r\n    \t    public static void main(String[] args) {\r\n    \t        long heapsize = Runtime.getRuntime().totalMemory();\r\n    \t        System.out.println(&quot;heapsize is :: &quot; + heapsize/(1024*1024));\r\n    \t    }\r\n    \t \r\n    }\r\n\r\nThe output is:\r\n\r\nheapsize is :: 245\r\n\r\nDoes this mean my runtime has only 245M memory? My computer has 8GB memory. I doubt output this is correct, since the running of Eclipse alone will consume a lot more than 245M. \r\n\r\nIn Eclipse, I click Windows-&gt;Preferences-&gt;Java-&gt;Installed JREs, and set Default JVM arguments as follows:\r\n\r\n    -ea -Xms256m -Xmx4096M\r\n\r\nThen run the test again. It still prints out the same number, 245. How could this happen?\r\n\r\nEdited: from Java doc for Runtime.getRuntime().totalMemory():\r\n\r\n    Returns the total amount of memory in the Java virtual machine. \r\n    The value returned by this method may vary over time, depending on the \r\n    host environment.","title":"Runtime heap size set in Eclipse","body":"<pre><code>public class Test {\n        public static void main(String[] args) {\n            long heapsize = Runtime.getRuntime().totalMemory();\n            System.out.println(\"heapsize is :: \" + heapsize/(1024*1024));\n        }\n\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<p>heapsize is :: 245</p>\n\n<p>Does this mean my runtime has only 245M memory? My computer has 8GB memory. I doubt output this is correct, since the running of Eclipse alone will consume a lot more than 245M. </p>\n\n<p>In Eclipse, I click Windows->Preferences->Java->Installed JREs, and set Default JVM arguments as follows:</p>\n\n<pre><code>-ea -Xms256m -Xmx4096M\n</code></pre>\n\n<p>Then run the test again. It still prints out the same number, 245. How could this happen?</p>\n\n<p>Edited: from Java doc for Runtime.getRuntime().totalMemory():</p>\n\n<pre><code>Returns the total amount of memory in the Java virtual machine. \nThe value returned by this method may vary over time, depending on the \nhost environment.\n</code></pre>\n"},{"tags":["java","eclipse","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":11829074,"reputation":1,"user_id":8656299,"display_name":"javagg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1506089411,"creation_date":1506089411,"answer_id":46366774,"question_id":37403287,"body_markdown":"In java, using the Java Standard class PriorityQueue to simulate Max-Min heap is not a bad idea. It will reduce coding significantly.\r\n\r\n    public class MaxMinHeap{\r\n    PriorityQueue&lt;Integer&gt; minHeap = new PriorityQueue&lt;&gt;();\r\n    PriorityQueue&lt;Integer&gt; maxHeap = new PriorityQueue&lt;&gt;((x,y)-&gt;(y-x));\r\n    \r\n    private void add(int val) {\r\n        if (maxHeap.size() == 0) {\r\n            maxHeap.add(val);\r\n        } else {\r\n            int maxTop = maxHeap.peek();\r\n            if (val &lt;= maxTop) {\r\n                maxHeap.add(val);\r\n            } else {\r\n                minHeap.add(val);\r\n            }\r\n            if (maxHeap.size() - minHeap.size() &gt; 1) {\r\n                minHeap.add(maxHeap.poll());\r\n            } else if (minHeap.size() - maxHeap.size() &gt; 1) {\r\n                maxHeap.add(minHeap.poll());\r\n            }\r\n        }\r\n    }\r\n    \r\n    private double findMedian() {\r\n        if(maxHeap.size() &gt; minHeap.size()) {\r\n            return maxHeap.peek();\r\n        }else if(maxHeap.size() == minHeap.size()) {\r\n            return ((double) maxHeap.peek() + minHeap.peek()) / 2;\r\n        }else {\r\n            return minHeap.peek();\r\n        }\r\n    }\r\n}","title":"Max heap and Min heap implementation for median Java","body":"<p>In java, using the Java Standard class PriorityQueue to simulate Max-Min heap is not a bad idea. It will reduce coding significantly.</p>\n\n<pre><code>public class MaxMinHeap{\nPriorityQueue&lt;Integer&gt; minHeap = new PriorityQueue&lt;&gt;();\nPriorityQueue&lt;Integer&gt; maxHeap = new PriorityQueue&lt;&gt;((x,y)-&gt;(y-x));\n\nprivate void add(int val) {\n    if (maxHeap.size() == 0) {\n        maxHeap.add(val);\n    } else {\n        int maxTop = maxHeap.peek();\n        if (val &lt;= maxTop) {\n            maxHeap.add(val);\n        } else {\n            minHeap.add(val);\n        }\n        if (maxHeap.size() - minHeap.size() &gt; 1) {\n            minHeap.add(maxHeap.poll());\n        } else if (minHeap.size() - maxHeap.size() &gt; 1) {\n            maxHeap.add(minHeap.poll());\n        }\n    }\n}\n\nprivate double findMedian() {\n    if(maxHeap.size() &gt; minHeap.size()) {\n        return maxHeap.peek();\n    }else if(maxHeap.size() == minHeap.size()) {\n        return ((double) maxHeap.peek() + minHeap.peek()) / 2;\n    }else {\n        return minHeap.peek();\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}],"owner":{"account_id":8500717,"reputation":11,"user_id":6373775,"display_name":"Felipe Cornejo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":821,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639069156,"creation_date":1464055696,"question_id":37403287,"body_markdown":"I have to create an ADT to read a number of data and calculate the median of those data. The ADT consist in a MIN and a MAX heap.\r\nThe `MinHeap` class takes the numbers greaters or equal than the median.\r\n\r\n`public class MinHeap {`\r\n\t\r\n\tpublic double[] data;\r\n    public int Size;\r\n\r\n    public MinHeap(int size) {\r\n          data = new double[size];\r\n          Size = 0;\r\n    }\r\n    \r\n    public double getMinimum(){\r\n    \treturn this.data[0];\r\n    }\r\n\r\n    public boolean isEmpty() {\r\n          return (Size == 0);\r\n    }\r\n    \r\n    private int getParentIndex(int nodeIndex) {\r\n        return (nodeIndex - 1) / 2;\r\n    }\r\n    \r\n    public void insertu(double value) throws Exception {\r\n        if (Size == data.length)\r\n              throw new Exception(&quot;Heap&#39;s underlying storage is overflow&quot;);\r\n        else {\r\n              Size++;\r\n              data[Size - 1] = value;\r\n              siftUp(Size - 1);\r\n        }\r\n    } \r\n    public void siftUp(int nodeIndex) {\r\n        int parentIndex; \r\n        double tmp;\r\n        if (nodeIndex != 0) {\r\n              parentIndex = getParentIndex(nodeIndex);\r\n              if (data[parentIndex] &gt; data[nodeIndex]) {\r\n                    tmp = data[parentIndex];\r\n                    data[parentIndex] = data[nodeIndex];\r\n                    data[nodeIndex] = tmp;\r\n                    siftUp(parentIndex);\r\n              }\r\n        }\r\n    }\r\n}`\r\n\r\nThe `MaxHeap`class takes the numbers that are less or equal than the median.\r\n    \r\n`public class MaxHeap{`\r\n\r\n    public double [] _Heap;\r\n    public int _size;\r\n    public int tam=0;\r\n\r\n    public MaxHeap (int a){\r\n        \r\n        _Heap = new double[a];\r\n        _size = _Heap.length;\r\n        for (int i = _Heap.length / 2 ; i &gt;=0 ; i--) {\r\n            tam++;\r\n            maxHeapify(i); \r\n        }\r\n    }\r\n\r\n    private int parent(int pos) \r\n    { return pos / 2; }\r\n\r\n    private int leftChild(int pos)\r\n    { return (2 * pos); }\r\n\r\n    private int rightChild(int pos)\r\n    { return (2 * pos) + 1; }\r\n\r\n    private void swap(int fpos,int spos) {\r\n        double tmp;\r\n        tmp = _Heap[fpos];\r\n        _Heap[fpos] = _Heap[spos];\r\n        _Heap[spos] = tmp; \r\n    }\r\n\r\n    private void maxHeapify (int i) {\r\n        int l = leftChild(i), r = rightChild(i), largest;\r\n        if(l &lt; _size &amp;&amp; _Heap[l] &gt; _Heap[i]) {\r\n            tam+=2;\r\n            largest = l; \r\n            }\r\n            else largest = i;\r\n        if(r &lt; _size &amp;&amp; _Heap[r] &gt; _Heap[largest]) {\r\n            largest = r;\r\n            tam+=2; }\r\n        if (largest != i) {\r\n            tam++;\r\n            swap(i, largest);\r\n            maxHeapify (largest); }\r\n        } \r\n\r\n    protected boolean isEmpty() { return _size == 0; }\r\n\r\n    protected void deleteMax() {\r\n        if (_size &gt; 1) {\r\n            tam++;\r\n            maxHeapify(0);\r\n            double max = _Heap[0];\r\n            _size--;\r\n            swap(0, _size);\r\n            maxHeapify(0); }\r\n        else _size = 0;    \r\n    }\r\n\r\n    protected double extractMax() {\r\n        maxHeapify(0);\r\n        return _Heap[0];\r\n    }\r\n    public void insert(double element)\r\n    {\r\n        _Heap[++tam] = element;\r\n        int current = tam;\r\n \r\n        while(_Heap[current] &gt; _Heap[parent(current)])\r\n        {\r\n            swap(current,parent(current));\r\n            current = parent(current);\r\n        }\t\r\n    }\r\n}`\r\n\r\nAnd the ADT:\r\n\r\n    `import java.util.InputMismatchException;`\r\n    `import java.util.Scanner;`\r\n\r\n`public class ColaPrioridadMediana {`\r\n\t\r\n\tprivate MinHeap MIN;\r\n\tprivate MaxHeap MAX;\r\n\tprivate int size;\r\n\r\n\tpublic ColaPrioridadMediana(int cap) {\r\n\t\tif (cap%2==0){\r\n\t\t\tMIN = new MinHeap(cap/2);\r\n\t\t\tMAX = new MaxHeap(cap/2);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tMIN = new MinHeap((cap+1)/2);\r\n\t\t\tMAX = new MaxHeap((cap+1)/2);\r\n\t\t\t}\r\n\t\tsize = MAX.counter + MIN.Size;\r\n\t}\r\n\t\r\n\tpublic void insertar(double x) throws Exception{\r\n\t\tif (x &lt;= MAX.extractMax()){\r\n\t\t\tif (MAX.counter &gt; MIN.Size){\r\n\t\t\t\tdouble d = MAX.extractMax();\r\n\t\t\t\tMIN.insertu(d);\r\n\t\t\t\tMAX.insert(x);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tMAX.insert(x);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif (MIN.Size &gt; MAX.counter){\r\n\t\t\t\tdouble d = MIN.getMinimum();\r\n\t\t\t\tMAX.insert(d);\r\n\t\t\t\tMIN.data[0] = x;\r\n\t\t\t\tMIN.siftUp(1);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tMIN.insertu(x);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic int getSize(){\r\n\t\treturn size;\r\n\t}\r\n\t\r\n\tpublic double getMediana() throws Exception{\r\n\t\tif(MAX.counter==MIN.Size){return ((MAX.extractMax()+MIN.getMinimum())/2);}\r\n\t\telse{\r\n\t\t\tif (MAX.counter&lt;MIN.Size){return MIN.getMinimum();}\r\n\t\t\telse{return MAX.extractMax();}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) throws NumberFormatException, Exception{\r\n\t\t@SuppressWarnings(&quot;resource&quot;)\r\n\t\tScanner num=new Scanner(System.in);\r\n\t    ColaPrioridadMediana allNumbers=new ColaPrioridadMediana(10);\r\n\t    while(true){\r\n\t        System.out.print(&quot;Number:&quot;);\r\n\t        try{\r\n\t\t        String number=num.nextLine();\r\n\t\t        double d;\r\n\t\t        if(!number.isEmpty()){\r\n\t\t            allNumbers.insertar(Double.parseDouble(number));\r\n\t\t        }else{\r\n\t\t             d = allNumbers.getMediana();\r\n\t\t             \r\n\t\t        System.out.println(&quot;The result is &quot; + d);\r\n\t\t        System.out.println(allNumbers.MAX.extractMax());\r\n\t\t        System.out.println(allNumbers.MIN.getMinimum());\r\n\t\t        System.out.println(allNumbers.MAX.counter);\r\n\t\t        System.out.println(allNumbers.MIN.Size);\r\n\t\t        for (int i=0;i&lt;allNumbers.MAX._Heap.length;i++){\r\n\t\t        System.out.println(allNumbers.MAX._Heap[i]);\r\n\t\t        System.out.println(allNumbers.MIN.data[i]);\r\n\t\t        }\r\n\t\t        \r\n\t\t        System.exit(0);\r\n\t\t        }\r\n\t        }\r\n\t\t    catch(InputMismatchException e){\r\n\t\t    \tSystem.out.println(&quot;Not number&quot;);\r\n\t\t        }\r\n\t\t    }\r\n\t\t}\r\n}`\r\n\r\nThe MinHeap works, but the MaxHeap don&#39;t store any numbers, and prints only 0.0. I&#39;m really stuck in here.","title":"Max heap and Min heap implementation for median Java","body":"<p>I have to create an ADT to read a number of data and calculate the median of those data. The ADT consist in a MIN and a MAX heap.\nThe <code>MinHeap</code> class takes the numbers greaters or equal than the median.</p>\n\n<p><code>public class MinHeap {</code></p>\n\n<pre><code>public double[] data;\npublic int Size;\n\npublic MinHeap(int size) {\n      data = new double[size];\n      Size = 0;\n}\n\npublic double getMinimum(){\n    return this.data[0];\n}\n\npublic boolean isEmpty() {\n      return (Size == 0);\n}\n\nprivate int getParentIndex(int nodeIndex) {\n    return (nodeIndex - 1) / 2;\n}\n\npublic void insertu(double value) throws Exception {\n    if (Size == data.length)\n          throw new Exception(\"Heap's underlying storage is overflow\");\n    else {\n          Size++;\n          data[Size - 1] = value;\n          siftUp(Size - 1);\n    }\n} \npublic void siftUp(int nodeIndex) {\n    int parentIndex; \n    double tmp;\n    if (nodeIndex != 0) {\n          parentIndex = getParentIndex(nodeIndex);\n          if (data[parentIndex] &gt; data[nodeIndex]) {\n                tmp = data[parentIndex];\n                data[parentIndex] = data[nodeIndex];\n                data[nodeIndex] = tmp;\n                siftUp(parentIndex);\n          }\n    }\n}\n</code></pre>\n\n<p>}`</p>\n\n<p>The <code>MaxHeap</code>class takes the numbers that are less or equal than the median.</p>\n\n<p><code>public class MaxHeap{</code></p>\n\n<pre><code>public double [] _Heap;\npublic int _size;\npublic int tam=0;\n\npublic MaxHeap (int a){\n\n    _Heap = new double[a];\n    _size = _Heap.length;\n    for (int i = _Heap.length / 2 ; i &gt;=0 ; i--) {\n        tam++;\n        maxHeapify(i); \n    }\n}\n\nprivate int parent(int pos) \n{ return pos / 2; }\n\nprivate int leftChild(int pos)\n{ return (2 * pos); }\n\nprivate int rightChild(int pos)\n{ return (2 * pos) + 1; }\n\nprivate void swap(int fpos,int spos) {\n    double tmp;\n    tmp = _Heap[fpos];\n    _Heap[fpos] = _Heap[spos];\n    _Heap[spos] = tmp; \n}\n\nprivate void maxHeapify (int i) {\n    int l = leftChild(i), r = rightChild(i), largest;\n    if(l &lt; _size &amp;&amp; _Heap[l] &gt; _Heap[i]) {\n        tam+=2;\n        largest = l; \n        }\n        else largest = i;\n    if(r &lt; _size &amp;&amp; _Heap[r] &gt; _Heap[largest]) {\n        largest = r;\n        tam+=2; }\n    if (largest != i) {\n        tam++;\n        swap(i, largest);\n        maxHeapify (largest); }\n    } \n\nprotected boolean isEmpty() { return _size == 0; }\n\nprotected void deleteMax() {\n    if (_size &gt; 1) {\n        tam++;\n        maxHeapify(0);\n        double max = _Heap[0];\n        _size--;\n        swap(0, _size);\n        maxHeapify(0); }\n    else _size = 0;    \n}\n\nprotected double extractMax() {\n    maxHeapify(0);\n    return _Heap[0];\n}\npublic void insert(double element)\n{\n    _Heap[++tam] = element;\n    int current = tam;\n\n    while(_Heap[current] &gt; _Heap[parent(current)])\n    {\n        swap(current,parent(current));\n        current = parent(current);\n    }   \n}\n</code></pre>\n\n<p>}`</p>\n\n<p>And the ADT:</p>\n\n<pre><code>`import java.util.InputMismatchException;`\n`import java.util.Scanner;`\n</code></pre>\n\n<p><code>public class ColaPrioridadMediana {</code></p>\n\n<pre><code>private MinHeap MIN;\nprivate MaxHeap MAX;\nprivate int size;\n\npublic ColaPrioridadMediana(int cap) {\n    if (cap%2==0){\n        MIN = new MinHeap(cap/2);\n        MAX = new MaxHeap(cap/2);\n    }\n    else{\n        MIN = new MinHeap((cap+1)/2);\n        MAX = new MaxHeap((cap+1)/2);\n        }\n    size = MAX.counter + MIN.Size;\n}\n\npublic void insertar(double x) throws Exception{\n    if (x &lt;= MAX.extractMax()){\n        if (MAX.counter &gt; MIN.Size){\n            double d = MAX.extractMax();\n            MIN.insertu(d);\n            MAX.insert(x);\n        }\n        else{\n            MAX.insert(x);\n        }\n    }\n    else{\n        if (MIN.Size &gt; MAX.counter){\n            double d = MIN.getMinimum();\n            MAX.insert(d);\n            MIN.data[0] = x;\n            MIN.siftUp(1);\n        }\n        else{\n            MIN.insertu(x);\n        }\n    }\n}\n\npublic int getSize(){\n    return size;\n}\n\npublic double getMediana() throws Exception{\n    if(MAX.counter==MIN.Size){return ((MAX.extractMax()+MIN.getMinimum())/2);}\n    else{\n        if (MAX.counter&lt;MIN.Size){return MIN.getMinimum();}\n        else{return MAX.extractMax();}\n    }\n}\n\npublic static void main(String[] args) throws NumberFormatException, Exception{\n    @SuppressWarnings(\"resource\")\n    Scanner num=new Scanner(System.in);\n    ColaPrioridadMediana allNumbers=new ColaPrioridadMediana(10);\n    while(true){\n        System.out.print(\"Number:\");\n        try{\n            String number=num.nextLine();\n            double d;\n            if(!number.isEmpty()){\n                allNumbers.insertar(Double.parseDouble(number));\n            }else{\n                 d = allNumbers.getMediana();\n\n            System.out.println(\"The result is \" + d);\n            System.out.println(allNumbers.MAX.extractMax());\n            System.out.println(allNumbers.MIN.getMinimum());\n            System.out.println(allNumbers.MAX.counter);\n            System.out.println(allNumbers.MIN.Size);\n            for (int i=0;i&lt;allNumbers.MAX._Heap.length;i++){\n            System.out.println(allNumbers.MAX._Heap[i]);\n            System.out.println(allNumbers.MIN.data[i]);\n            }\n\n            System.exit(0);\n            }\n        }\n        catch(InputMismatchException e){\n            System.out.println(\"Not number\");\n            }\n        }\n    }\n</code></pre>\n\n<p>}`</p>\n\n<p>The MinHeap works, but the MaxHeap don't store any numbers, and prints only 0.0. I'm really stuck in here.</p>\n"},{"tags":["java","aem"],"comments":[{"owner":{"account_id":6995,"reputation":18400,"user_id":11940,"accept_rate":88,"display_name":"Raphael Schweikert"},"score":0,"creation_date":1639075297,"post_id":70293665,"comment_id":124262453,"body_markdown":"`getProperties` returns a `ValueMap`, which has the option to coerce properties to an expected type using `T get(String, Class&lt;T&gt;)`. I would recommend using that. The `get` youre calling is the default `Map.get` method that returns a plain `Object` (which you could cast to a string if youre certain thats what it is). Also, what you see in the debugger is the internal `value` property of a string, which gets you a `char` array. This isnt normally available, even if you cast to `String`. So, in short, use `get(&quot;teaserImage&quot;, String.class)` to get the property value as a `String`.","body":"<code>getProperties</code> returns a <code>ValueMap</code>, which has the option to coerce properties to an expected type using <code>T get(String, Class&lt;T&gt;)</code>. I would recommend using that. The <code>get</code> youre calling is the default <code>Map.get</code> method that returns a plain <code>Object</code> (which you could cast to a string if youre certain thats what it is). Also, what you see in the debugger is the internal <code>value</code> property of a string, which gets you a <code>char</code> array. This isnt normally available, even if you cast to <code>String</code>. So, in short, use <code>get(&quot;teaserImage&quot;, String.class)</code> to get the property value as a <code>String</code>."}],"answers":[{"tags":[],"owner":{"account_id":15449155,"reputation":696,"user_id":11145139,"display_name":"hasankzl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639069149,"creation_date":1639069149,"answer_id":70293797,"question_id":70293665,"body_markdown":"Cannot find symbol error means that the compiler cannot do this. Your code appears to be referring to something that the compiler doesn&#39;t understand.\r\n\r\nhttps://stackoverflow.com/questions/25706216/what-does-a-cannot-find-symbol-or-cannot-resolve-symbol-error-mean\r\n\r\n\r\nIn your example you are trying to get a property. If you can get that when you are debugging the code, that maybe means you forgot to add that property when you are trying to build the application.","title":"Java cannot find symbol when I do a Maven Build, but code works in debugger","body":"<p>Cannot find symbol error means that the compiler cannot do this. Your code appears to be referring to something that the compiler doesn't understand.</p>\n<p><a href=\"https://stackoverflow.com/questions/25706216/what-does-a-cannot-find-symbol-or-cannot-resolve-symbol-error-mean\">What does a &quot;Cannot find symbol&quot; or &quot;Cannot resolve symbol&quot; error mean?</a></p>\n<p>In your example you are trying to get a property. If you can get that when you are debugging the code, that maybe means you forgot to add that property when you are trying to build the application.</p>\n"}],"owner":{"account_id":7143720,"reputation":2741,"user_id":5460296,"accept_rate":95,"display_name":"jmona789"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":898,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639069149,"creation_date":1639068567,"question_id":70293665,"body_markdown":"I am working on an AEM site and I am trying to get the page property `teaserImage` I have the follow in my Java class, but when I do a build I get a cannot find symbol error.\r\n\r\n```\r\npublic String getTeaserImg() {\r\n\treturn this.getPageManager().getPage(url).getProperties().get(&quot;teaserImage&quot;).value;\r\n}\r\n```\r\nBut if I put a breakpoint on this similar function \r\n\r\n```\r\npublic Page getPage() {\r\n    return this.getPageManager().getPage(url);\r\n}\r\n```\r\nAnd then execute `this.getPageManager().getPage(url).getProperties().get(&quot;teaserImage&quot;).value` in an Evulate expression window it gives me the property, so I&#39;m not sure why on build it doesnt work when it works in this scenario.  \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/49l7h.png","title":"Java cannot find symbol when I do a Maven Build, but code works in debugger","body":"<p>I am working on an AEM site and I am trying to get the page property <code>teaserImage</code> I have the follow in my Java class, but when I do a build I get a cannot find symbol error.</p>\n<pre><code>public String getTeaserImg() {\n    return this.getPageManager().getPage(url).getProperties().get(&quot;teaserImage&quot;).value;\n}\n</code></pre>\n<p>But if I put a breakpoint on this similar function</p>\n<pre><code>public Page getPage() {\n    return this.getPageManager().getPage(url);\n}\n</code></pre>\n<p>And then execute <code>this.getPageManager().getPage(url).getProperties().get(&quot;teaserImage&quot;).value</code> in an Evulate expression window it gives me the property, so I'm not sure why on build it doesnt work when it works in this scenario.</p>\n<p><a href=\"https://i.stack.imgur.com/49l7h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/49l7h.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","eclipse","heap-memory"],"comments":[{"owner":{"account_id":1852014,"reputation":24139,"user_id":1678362,"display_name":"Aaron"},"score":6,"creation_date":1497728386,"post_id":44608663,"comment_id":76204265,"body_markdown":"Your application and eclipse run in different JVMs, and the configuration in `eclipse.ini` will only apply to eclipse, not the JVMs it spawns. Check your run configurations for the options of the JVM of your application","body":"Your application and eclipse run in different JVMs, and the configuration in <code>eclipse.ini</code> will only apply to eclipse, not the JVMs it spawns. Check your run configurations for the options of the JVM of your application"},{"owner":{"account_id":4870647,"reputation":6548,"user_id":4480180,"accept_rate":70,"display_name":"justHelloWorld"},"score":0,"creation_date":1497728445,"post_id":44608663,"comment_id":76204279,"body_markdown":"Thanks @Aron , so should I add -Xmxg8 to the run conf too?","body":"Thanks @Aron , so should I add -Xmxg8 to the run conf too?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":3,"creation_date":1497728502,"post_id":44608663,"comment_id":76204291,"body_markdown":"Only to the run configuration, as VM argument","body":"Only to the run configuration, as VM argument"},{"owner":{"account_id":4870647,"reputation":6548,"user_id":4480180,"accept_rate":70,"display_name":"justHelloWorld"},"score":0,"creation_date":1497732429,"post_id":44608663,"comment_id":76205270,"body_markdown":"I think I found out the problem: this application generates an huge amount of output. By deleting all the outputs, the problem was solved. How to avoid it?","body":"I think I found out the problem: this application generates an huge amount of output. By deleting all the outputs, the problem was solved. How to avoid it?"},{"owner":{"account_id":1809323,"reputation":11348,"user_id":1645712,"accept_rate":73,"display_name":"gusto2"},"score":1,"creation_date":1497734540,"post_id":44608663,"comment_id":76205782,"body_markdown":"@justHelloWorld then the conclusion is that the output  data stay in memory somewhere (eclipse console?). Writing outputs to regular files shall keep your heap at reasonable level. As a next step, you may always use a profiler and a heap analyzer to see what&#39;s taking so much from the heap.","body":"@justHelloWorld then the conclusion is that the output  data stay in memory somewhere (eclipse console?). Writing outputs to regular files shall keep your heap at reasonable level. As a next step, you may always use a profiler and a heap analyzer to see what&#39;s taking so much from the heap."}],"owner":{"account_id":4870647,"reputation":6548,"user_id":4480180,"accept_rate":70,"display_name":"justHelloWorld"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639069141,"creation_date":1497728079,"question_id":44608663,"body_markdown":"I&#39;m using Eclipse Neon for Ubuntu and I edited `eclipse.ini` by adding `-Xmx8g`, so the Heap can take up to 8gb of ram.\r\n\r\nHowever, my application keeps running out of memory around the same point when I used the default value (`-Xmx1024`). In addition, it&#39;s weird that this happens, since  by monitoring the applications it seems that Eclipse takes 1.4Gb, while the application 1.3GB, so less than 8GB for sure.\r\n\r\nAm I missing something?","title":"Heap out of memory when it shouldn&#39;t?","body":"<p>I'm using Eclipse Neon for Ubuntu and I edited <code>eclipse.ini</code> by adding <code>-Xmx8g</code>, so the Heap can take up to 8gb of ram.</p>\n\n<p>However, my application keeps running out of memory around the same point when I used the default value (<code>-Xmx1024</code>). In addition, it's weird that this happens, since  by monitoring the applications it seems that Eclipse takes 1.4Gb, while the application 1.3GB, so less than 8GB for sure.</p>\n\n<p>Am I missing something?</p>\n"},{"tags":["java","eclipse","heap-memory"],"comments":[{"owner":{"account_id":3689663,"reputation":2857,"user_id":3072566,"display_name":"litelite"},"score":0,"creation_date":1501790230,"post_id":45493046,"comment_id":77948431,"body_markdown":"After further reasearching it realize i was wrong. optimisation is always on in java anyway. But it seems you are out of luck if Eclipse got an exception and only prompt you to close then it&#39;s unrecoverable. Also, if your program runs for weeks. You should probably take the time to modify your program to take advantage of multithreading if possible(if you don&#39;t already) and maybe add some &quot;safe-points&quot; from which you could recover instead of starting from scratch. Because after all, you are never safe from a power failure.","body":"After further reasearching it realize i was wrong. optimisation is always on in java anyway. But it seems you are out of luck if Eclipse got an exception and only prompt you to close then it&#39;s unrecoverable. Also, if your program runs for weeks. You should probably take the time to modify your program to take advantage of multithreading if possible(if you don&#39;t already) and maybe add some &quot;safe-points&quot; from which you could recover instead of starting from scratch. Because after all, you are never safe from a power failure."},{"owner":{"account_id":3901572,"reputation":85,"user_id":3229298,"accept_rate":60,"display_name":"ferzle"},"score":0,"creation_date":1501790396,"post_id":45493046,"comment_id":77948551,"body_markdown":"I already made changes so that if I have to restart it I can continue from where it left off.  I was being optimistic when I started it and just hoping nothing would go wrong.  The program is highly threaded and running on a 24-core machine.","body":"I already made changes so that if I have to restart it I can continue from where it left off.  I was being optimistic when I started it and just hoping nothing would go wrong.  The program is highly threaded and running on a 24-core machine."}],"owner":{"account_id":3901572,"reputation":85,"user_id":3229298,"accept_rate":60,"display_name":"ferzle"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639069132,"creation_date":1501788667,"question_id":45493046,"body_markdown":"I foolishly set the console in Eclipse to do unlimited buffering. I have a program that has been running for 10 days and now I am getting &quot;IOConsoleUpdater has encountered a problem&quot; and it mentions Java heap space. So I&#39;m pretty sure it&#39;s the unlimited buffer size that is the problem.\r\n\r\nI don&#39;t want to restart my program (I am doing a computation that takes weeks).  So short of restarting Eclipse, can I limit the Console output via a config file or something that will take effect immediately?  I can&#39;t do it through the GUI because the error windows won&#39;t go away (Specifically a dialog with heading &quot;Internal Error&quot; that wants me to close Eclipse). I believe the program is still running properly, so I think (hope) in the worst case that I just won&#39;t get the progress report anymore.  \r\n\r\nSo, is there anything I can do?","title":"Limit Console Output in Eclipse after a crash?","body":"<p>I foolishly set the console in Eclipse to do unlimited buffering. I have a program that has been running for 10 days and now I am getting \"IOConsoleUpdater has encountered a problem\" and it mentions Java heap space. So I'm pretty sure it's the unlimited buffer size that is the problem.</p>\n\n<p>I don't want to restart my program (I am doing a computation that takes weeks).  So short of restarting Eclipse, can I limit the Console output via a config file or something that will take effect immediately?  I can't do it through the GUI because the error windows won't go away (Specifically a dialog with heading \"Internal Error\" that wants me to close Eclipse). I believe the program is still running properly, so I think (hope) in the worst case that I just won't get the progress report anymore.  </p>\n\n<p>So, is there anything I can do?</p>\n"},{"tags":["java","eclipse","api","heap-memory"],"comments":[{"owner":{"account_id":5397431,"reputation":5255,"user_id":4298200,"accept_rate":62,"display_name":"Neuron"},"score":1,"creation_date":1516104213,"post_id":48280638,"comment_id":83545100,"body_markdown":"Welcome to SO. It is difficult to answer your question, as it lacks details. Also you don&#39;t make it clear what your actual question is. Please read [this post](https://stackoverflow.com/help/how-to-ask) on how to ask a good question. Use the [edit] button to improve your question. Thanks","body":"Welcome to SO. It is difficult to answer your question, as it lacks details. Also you don&#39;t make it clear what your actual question is. Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">this post</a> on how to ask a good question. Use the <a href=\"https://stackoverflow.com/posts/48280638/edit\">edit</a> button to improve your question. Thanks"},{"owner":{"account_id":12104364,"reputation":99,"user_id":8843665,"display_name":"kishor ahire"},"score":0,"creation_date":1516107390,"post_id":48280638,"comment_id":83547145,"body_markdown":"hello.Thanks for your response.","body":"hello.Thanks for your response."}],"owner":{"account_id":12104364,"reputation":99,"user_id":8843665,"display_name":"kishor ahire"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639069120,"creation_date":1516103585,"question_id":48280638,"body_markdown":"While building the workspace it gives the **API guard** error which is \r\n\r\n&gt; Function 5117 (QP5_SHL_INIT_CHUNKER): Handle (0xoB621498) Passed to\r\n&gt; API seems to point to a deleted QP5 object of type SHL.\r\n\r\nAfter ignoring the API guard error I get a **heap space** error which is\r\n&gt; An internal error occurred during: &quot;Building workspace Java heap space error&quot;.\r\n\r\nI tried to solve the heap space issue by making changes in **eclipse.ini** file but it still gives me the same heap space error.Changes made in **eclipse.ini** file as follows\r\n\r\n`-Xms1024m`\r\n\r\n`-Xmx2048m`\r\n\r\n**Error Screenshots:**\r\n\r\n1. [API guard error][1]\r\n\r\n2. [heap space error][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/58eMS.png\r\n  [2]: https://i.stack.imgur.com/lghGB.png","title":"API guard error in eclipse","body":"<p>While building the workspace it gives the <strong>API guard</strong> error which is </p>\n\n<blockquote>\n  <p>Function 5117 (QP5_SHL_INIT_CHUNKER): Handle (0xoB621498) Passed to\n  API seems to point to a deleted QP5 object of type SHL.</p>\n</blockquote>\n\n<p>After ignoring the API guard error I get a <strong>heap space</strong> error which is</p>\n\n<blockquote>\n  <p>An internal error occurred during: \"Building workspace Java heap space error\".</p>\n</blockquote>\n\n<p>I tried to solve the heap space issue by making changes in <strong>eclipse.ini</strong> file but it still gives me the same heap space error.Changes made in <strong>eclipse.ini</strong> file as follows</p>\n\n<p><code>-Xms1024m</code></p>\n\n<p><code>-Xmx2048m</code></p>\n\n<p><strong>Error Screenshots:</strong></p>\n\n<ol>\n<li><p><a href=\"https://i.stack.imgur.com/58eMS.png\" rel=\"nofollow noreferrer\">API guard error</a></p></li>\n<li><p><a href=\"https://i.stack.imgur.com/58eMS.png\" rel=\"nofollow noreferrer\">heap space error</a></p></li>\n</ol>\n"},{"tags":["java","eclipse","heap-memory"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1540343857,"post_id":52959800,"comment_id":92826693,"body_markdown":"maybe the type og GC `-XX:+UseG1GC\n-XX:+UseStringDeduplication`","body":"maybe the type og GC <code>-XX:+UseG1GC -XX:+UseStringDeduplication</code>"},{"owner":{"account_id":14322281,"reputation":467,"user_id":10345277,"display_name":""},"score":0,"creation_date":1540344061,"post_id":52959800,"comment_id":92826730,"body_markdown":"What do they mean? 1minute ago, I made the XMX size 2048 and it worked fine. Is it relevant?","body":"What do they mean? 1minute ago, I made the XMX size 2048 and it worked fine. Is it relevant?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1540344110,"post_id":52959800,"comment_id":92826741,"body_markdown":"Do you know what I mean by `GC`?","body":"Do you know what I mean by <code>GC</code>?"},{"owner":{"account_id":14322281,"reputation":467,"user_id":10345277,"display_name":""},"score":0,"creation_date":1540344663,"post_id":52959800,"comment_id":92826842,"body_markdown":"i think it means Garbage Collection&#39;s options.","body":"i think it means Garbage Collection&#39;s options."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1540344716,"post_id":52959800,"comment_id":92826852,"body_markdown":"That&#39;s right, so the way that it releases memory may explain why it does not run out of memory.","body":"That&#39;s right, so the way that it releases memory may explain why it does not run out of memory."},{"owner":{"account_id":14322281,"reputation":467,"user_id":10345277,"display_name":""},"score":0,"creation_date":1540345064,"post_id":52959800,"comment_id":92826924,"body_markdown":"Thank you for teaching me. However, adding both options to cmd did not work.","body":"Thank you for teaching me. However, adding both options to cmd did not work."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1540345110,"post_id":52959800,"comment_id":92826933,"body_markdown":"Sorry to hear that.","body":"Sorry to hear that."},{"owner":{"account_id":1550320,"reputation":16282,"user_id":1442874,"accept_rate":88,"display_name":"Chris Gerken"},"score":0,"creation_date":1540349929,"post_id":52959800,"comment_id":92827848,"body_markdown":"Check that you&#39;re running the same version of java from the command line and in your project Java settings","body":"Check that you&#39;re running the same version of java from the command line and in your project Java settings"}],"owner":{"account_id":14322281,"reputation":467,"user_id":10345277,"display_name":""},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639069109,"creation_date":1540343623,"question_id":52959800,"body_markdown":"\r\nIt is assumed that the execution environment is different.\r\n\r\nThe contents of my eclipse.ini file.\r\n\r\n    -startup\r\n    plugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar\r\n    --launcher.library\r\n    C:\\Users\\GIT\\.p2\\pool\\plugins\\org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.551.v20171108-1834\r\n    -product\r\n    org.eclipse.epp.package.java.product\r\n    -showsplash\r\n    org.eclipse.epp.package.common\r\n    --launcher.defaultAction\r\n    openFile\r\n    --launcher.appendVmargs\r\n    -vmargs\r\n    -Declipse.p2.max.threads=10\r\n    -Doomph.update.url=http://download.eclipse.org/oomph/updates/milestone/latest\r\n    -Doomph.redirection.index.redirection=index:/-&gt;http://git.eclipse.org/c/oomph/org.eclipse.oomph.git/plain/setups/\r\n    -Dosgi.requiredJavaVersion=1.8\r\n    -Dosgi.instance.area.default=@user.home/eclipse-workspace\r\n    -XX:+UseG1GC\r\n    -XX:+UseStringDeduplication\r\n    --add-modules=ALL-SYSTEM\r\n    -Dosgi.requiredJavaVersion=1.8\r\n    -Xms256m\r\n    -Xmx1024m\r\n    --add-modules=ALL-SYSTEM\r\n    -vmargs\r\n    -javaagent:lombok.jar\r\n\r\nThis is the execution environment in Window CMD.\r\n\r\n    java -jar -Xms1024m -Xmx1024m [jar file]\r\n\r\nand my Exception is\r\n\r\n    java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Direct buffer memory\r\n            at java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n            at java.util.concurrent.FutureTask.get(FutureTask.java:192)\r\n            at com.git.gdsbuilder.validator.collection.CollectionValidator.geometricValidate(CollectionValidator.java:1743)\r\n            at com.git.gdsbuilder.validator.collection.CollectionValidator.collectionValidate(CollectionValidator.java:192)\r\n            at com.git.gdsbuilder.validator.collection.CollectionValidator.&lt;init&gt;(CollectionValidator.java:118)\r\n            at com.git.batch.service.BathService$1.run(BathService.java:451)\r\n            at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n            at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n            at java.lang.Thread.run(Thread.java:748)\r\n    Caused by: java.lang.OutOfMemoryError: Direct buffer memory\r\n            at java.nio.Bits.reserveMemory(Bits.java:694)\r\n            at java.nio.DirectByteBuffer.&lt;init&gt;(DirectByteBuffer.java:123)\r\n            at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:311)\r\n            at org.geotools.resources.NIOUtilities.allocate(NIOUtilities.java:152)\r\n            at org.geotools.data.shapefile.shp.ShapefileReader.ensureCapacity(ShapefileReader.java:302)\r\n            at org.geotools.data.shapefile.shp.ShapefileReader.nextRecord(ShapefileReader.java:561)\r\n            at org.geotools.data.shapefile.ShapefileFeatureReader.hasNext(ShapefileFeatureReader.java:180)\r\n            at org.geotools.data.store.ContentFeatureCollection$WrappingFeatureIterator.hasNext(ContentFeatureCollection.java:143)\r\n            at com.git.gdsbuilder.validator.feature.FeatureGraphicValidatorImpl.validateOneAcre(FeatureGraphicValidatorImpl.java:1500)\r\n            at com.git.gdsbuilder.validator.layer.LayerValidatorImpl.validateOneAcre(LayerValidatorImpl.java:1100)\r\n            at com.git.gdsbuilder.validator.collection.CollectionValidator$3Task.run(CollectionValidator.java:1702)\r\n            ... 5 more\r\n\r\n\r\nThe underlying problem is a memory leak, but once I want to make the execution environment the same. \r\n\r\nHow can I do it?","title":"There is no problem in Eclipse, but OOM occurs in Window","body":"<p>It is assumed that the execution environment is different.</p>\n\n<p>The contents of my eclipse.ini file.</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.4.0.v20161219-1356.jar\n--launcher.library\nC:\\Users\\GIT\\.p2\\pool\\plugins\\org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.551.v20171108-1834\n-product\norg.eclipse.epp.package.java.product\n-showsplash\norg.eclipse.epp.package.common\n--launcher.defaultAction\nopenFile\n--launcher.appendVmargs\n-vmargs\n-Declipse.p2.max.threads=10\n-Doomph.update.url=http://download.eclipse.org/oomph/updates/milestone/latest\n-Doomph.redirection.index.redirection=index:/-&gt;http://git.eclipse.org/c/oomph/org.eclipse.oomph.git/plain/setups/\n-Dosgi.requiredJavaVersion=1.8\n-Dosgi.instance.area.default=@user.home/eclipse-workspace\n-XX:+UseG1GC\n-XX:+UseStringDeduplication\n--add-modules=ALL-SYSTEM\n-Dosgi.requiredJavaVersion=1.8\n-Xms256m\n-Xmx1024m\n--add-modules=ALL-SYSTEM\n-vmargs\n-javaagent:lombok.jar\n</code></pre>\n\n<p>This is the execution environment in Window CMD.</p>\n\n<pre><code>java -jar -Xms1024m -Xmx1024m [jar file]\n</code></pre>\n\n<p>and my Exception is</p>\n\n<pre><code>java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Direct buffer memory\n        at java.util.concurrent.FutureTask.report(FutureTask.java:122)\n        at java.util.concurrent.FutureTask.get(FutureTask.java:192)\n        at com.git.gdsbuilder.validator.collection.CollectionValidator.geometricValidate(CollectionValidator.java:1743)\n        at com.git.gdsbuilder.validator.collection.CollectionValidator.collectionValidate(CollectionValidator.java:192)\n        at com.git.gdsbuilder.validator.collection.CollectionValidator.&lt;init&gt;(CollectionValidator.java:118)\n        at com.git.batch.service.BathService$1.run(BathService.java:451)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.OutOfMemoryError: Direct buffer memory\n        at java.nio.Bits.reserveMemory(Bits.java:694)\n        at java.nio.DirectByteBuffer.&lt;init&gt;(DirectByteBuffer.java:123)\n        at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:311)\n        at org.geotools.resources.NIOUtilities.allocate(NIOUtilities.java:152)\n        at org.geotools.data.shapefile.shp.ShapefileReader.ensureCapacity(ShapefileReader.java:302)\n        at org.geotools.data.shapefile.shp.ShapefileReader.nextRecord(ShapefileReader.java:561)\n        at org.geotools.data.shapefile.ShapefileFeatureReader.hasNext(ShapefileFeatureReader.java:180)\n        at org.geotools.data.store.ContentFeatureCollection$WrappingFeatureIterator.hasNext(ContentFeatureCollection.java:143)\n        at com.git.gdsbuilder.validator.feature.FeatureGraphicValidatorImpl.validateOneAcre(FeatureGraphicValidatorImpl.java:1500)\n        at com.git.gdsbuilder.validator.layer.LayerValidatorImpl.validateOneAcre(LayerValidatorImpl.java:1100)\n        at com.git.gdsbuilder.validator.collection.CollectionValidator$3Task.run(CollectionValidator.java:1702)\n        ... 5 more\n</code></pre>\n\n<p>The underlying problem is a memory leak, but once I want to make the execution environment the same. </p>\n\n<p>How can I do it?</p>\n"},{"tags":["java","netbeans","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":10391226,"reputation":16,"user_id":7662471,"display_name":"user7662471"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1489004496,"creation_date":1489004496,"answer_id":42681201,"question_id":42679611,"body_markdown":"try it in safe mode once. that will be okay","title":"Heap size in Netbeans java","body":"<p>try it in safe mode once. that will be okay</p>\n"}],"owner":{"account_id":10416218,"reputation":3,"user_id":7680226,"display_name":"Mineral"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42681201,"answer_count":1,"score":0,"last_activity_date":1639069077,"creation_date":1488999272,"question_id":42679611,"body_markdown":"My heapsize is too low and I tried to chang it. I did whatever told in here about stack overflew problem but the problem is always ones! It say I can not access to these file.\r\nNetbeans configuration file does not run in adminestrator mode and when I open it with netbeans, an arorr shows me that I could not chang this file.\r\nSo what&#39;s the soloution?","title":"Heap size in Netbeans java","body":"<p>My heapsize is too low and I tried to chang it. I did whatever told in here about stack overflew problem but the problem is always ones! It say I can not access to these file.\nNetbeans configuration file does not run in adminestrator mode and when I open it with netbeans, an arorr shows me that I could not chang this file.\nSo what's the soloution?</p>\n"},{"tags":["java","apache-spark","machine-learning","naivebayes"],"answers":[{"tags":[],"owner":{"account_id":23067373,"reputation":640,"user_id":17181638,"display_name":"3Fish"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1639069035,"creation_date":1639069035,"answer_id":70293771,"question_id":68434863,"body_markdown":"You should not train with the same dataset you are using for the prediction. Otherwise, you would not do any prediction.\r\n``` java\r\nDataset&lt;Row&gt;[] splits = vectorData.randomSplit(new double[]{0.6, 0.4}, 1234L);\r\nDataset&lt;Row&gt; train = splits[0];\r\nDataset&lt;Row&gt; test = splits[1];\r\n```\r\n\r\nAlso, it is absolutely possible that the algorithm learns that for any day the probable outcome is 0. As you should know that there is no real relation between a date and the sales count. The dates are not recurring, and therefor no true prediction can be made. The Bayes Algorithm also doesn&#39;t grasp that these entries are actually a series of events. It just calculates how high the probable value &quot;label&quot; is when the value &quot;feature&quot; is, for example, &quot;1622505600&quot;.\r\n\r\nI suggest something like day of the week as the feature, as those would be recurring, and it would make more sense to see on what weekday sales are especially high.\r\n\r\nAlternatively, you could give it a second feature like yesterday&#39;s sales. This would allow the algorithm to actually do predictions on the day before.","title":"Java Spark Naive Bayes - predict for future timestamp","body":"<p>You should not train with the same dataset you are using for the prediction. Otherwise, you would not do any prediction.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Dataset&lt;Row&gt;[] splits = vectorData.randomSplit(new double[]{0.6, 0.4}, 1234L);\nDataset&lt;Row&gt; train = splits[0];\nDataset&lt;Row&gt; test = splits[1];\n</code></pre>\n<p>Also, it is absolutely possible that the algorithm learns that for any day the probable outcome is 0. As you should know that there is no real relation between a date and the sales count. The dates are not recurring, and therefor no true prediction can be made. The Bayes Algorithm also doesn't grasp that these entries are actually a series of events. It just calculates how high the probable value &quot;label&quot; is when the value &quot;feature&quot; is, for example, &quot;1622505600&quot;.</p>\n<p>I suggest something like day of the week as the feature, as those would be recurring, and it would make more sense to see on what weekday sales are especially high.</p>\n<p>Alternatively, you could give it a second feature like yesterday's sales. This would allow the algorithm to actually do predictions on the day before.</p>\n"}],"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":70293771,"answer_count":1,"score":4,"last_activity_date":1639069035,"creation_date":1626665989,"question_id":68434863,"body_markdown":"Small question regarding prediction/forecast using SparkML and **Naive Bayes** please.\r\n\r\nI have a very simple dataset, which is just time stamp, representing a day, and how many pancakes sold that day:\r\n\r\n```\r\ndataSetPancakes.show();\r\n\r\n+----------+-----+\r\n|      time|label|\r\n+----------+-----+\r\n|1622505600|    1|\r\n|1622592000|    0|\r\n|1622678400|    3|\r\n|1622764800|    1|\r\n|1622851200|    1|\r\n|1622937600|    1|\r\n|1623024000|    1|\r\n|1623110400|    2|\r\n|1623196800|    2|\r\n|1623283200|    0|\r\n+----------+-----+\r\nonly showing top 10 rows&quot;\r\n```\r\n\r\nVery simple, I just want to predict how much pancake will be sold tomorrow, the day after, etc...\r\n\r\nTherefore, I tried the Naive Bayes model, following the tutorial here https://spark.apache.org/docs/latest/ml-classification-regression.html#naive-bayes, I wrote:\r\n\r\n```\r\n       VectorAssembler vectorAssembler = new VectorAssembler().setInputCols(new String[]{&quot;time&quot;}).setOutputCol(&quot;features&quot;);\r\n        Dataset&lt;Row&gt; vectorData = vectorAssembler.transform(dataSetPancakes);\r\n NaiveBayes naiveBayes = new NaiveBayes();\r\n        NaiveBayesModel model = naiveBayes.fit(vectorData);\r\n        Dataset&lt;Row&gt; predictions = model.transform(vectorData);\r\n        predictions.show();\r\n    model.predict(new DenseVector(new double[]{getTomorrowTimestamp()})));\r\n\r\n```\r\n\r\nI do even see results such as:\r\n\r\n```\r\n-RECORD 0--------------------------------------------------------------------------------------------------------------\r\n time          | 1622505600                                                                                            \r\n label         | 1                                                                                                     \r\n features      | [1.6225056E9]                                                                                         \r\n rawPrediction | [-0.9400072584914714,-1.0831081021321447,-1.702147310538368,-2.5494451709255714,-4.564348191467836]   \r\n probability   | [0.39062499999999994,0.33854166666666663,0.18229166666666666,0.07812500000000001,0.01041666666666667] \r\n prediction    | 0.0                                                                                                   \r\n-RECORD 1--------------------------------------------------------------------------------------------------------------\r\n time          | 1622592000                                                                                            \r\n label         | 0                                                                                                     \r\n features      | [1.622592E9]                                                                                          \r\n rawPrediction | [-0.9400072584914714,-1.0831081021321447,-1.702147310538368,-2.5494451709255714,-4.564348191467836]   \r\n probability   | [0.39062499999999994,0.33854166666666663,0.18229166666666666,0.07812500000000001,0.01041666666666667] \r\n prediction    | 0.0                                                                                                   \r\n\r\n```\r\n\r\nBut as for the prediction itself, it is **always showing 0.0** for tomorrow, unfortunately. \r\n\r\nMay I ask what is the root cause of this issue please?\r\n\r\nThank you","title":"Java Spark Naive Bayes - predict for future timestamp","body":"<p>Small question regarding prediction/forecast using SparkML and <strong>Naive Bayes</strong> please.</p>\n<p>I have a very simple dataset, which is just time stamp, representing a day, and how many pancakes sold that day:</p>\n<pre><code>dataSetPancakes.show();\n\n+----------+-----+\n|      time|label|\n+----------+-----+\n|1622505600|    1|\n|1622592000|    0|\n|1622678400|    3|\n|1622764800|    1|\n|1622851200|    1|\n|1622937600|    1|\n|1623024000|    1|\n|1623110400|    2|\n|1623196800|    2|\n|1623283200|    0|\n+----------+-----+\nonly showing top 10 rows&quot;\n</code></pre>\n<p>Very simple, I just want to predict how much pancake will be sold tomorrow, the day after, etc...</p>\n<p>Therefore, I tried the Naive Bayes model, following the tutorial here <a href=\"https://spark.apache.org/docs/latest/ml-classification-regression.html#naive-bayes\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/latest/ml-classification-regression.html#naive-bayes</a>, I wrote:</p>\n<pre><code>       VectorAssembler vectorAssembler = new VectorAssembler().setInputCols(new String[]{&quot;time&quot;}).setOutputCol(&quot;features&quot;);\n        Dataset&lt;Row&gt; vectorData = vectorAssembler.transform(dataSetPancakes);\n NaiveBayes naiveBayes = new NaiveBayes();\n        NaiveBayesModel model = naiveBayes.fit(vectorData);\n        Dataset&lt;Row&gt; predictions = model.transform(vectorData);\n        predictions.show();\n    model.predict(new DenseVector(new double[]{getTomorrowTimestamp()})));\n\n</code></pre>\n<p>I do even see results such as:</p>\n<pre><code>-RECORD 0--------------------------------------------------------------------------------------------------------------\n time          | 1622505600                                                                                            \n label         | 1                                                                                                     \n features      | [1.6225056E9]                                                                                         \n rawPrediction | [-0.9400072584914714,-1.0831081021321447,-1.702147310538368,-2.5494451709255714,-4.564348191467836]   \n probability   | [0.39062499999999994,0.33854166666666663,0.18229166666666666,0.07812500000000001,0.01041666666666667] \n prediction    | 0.0                                                                                                   \n-RECORD 1--------------------------------------------------------------------------------------------------------------\n time          | 1622592000                                                                                            \n label         | 0                                                                                                     \n features      | [1.622592E9]                                                                                          \n rawPrediction | [-0.9400072584914714,-1.0831081021321447,-1.702147310538368,-2.5494451709255714,-4.564348191467836]   \n probability   | [0.39062499999999994,0.33854166666666663,0.18229166666666666,0.07812500000000001,0.01041666666666667] \n prediction    | 0.0                                                                                                   \n\n</code></pre>\n<p>But as for the prediction itself, it is <strong>always showing 0.0</strong> for tomorrow, unfortunately.</p>\n<p>May I ask what is the root cause of this issue please?</p>\n<p>Thank you</p>\n"},{"tags":["java","heap-memory","tomcat7","jrubyonrails","jvisualvm"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1372329219,"post_id":17321609,"comment_id":25157682,"body_markdown":"It doesn&#39;t, in my experience, it shows a sawtooth shape.","body":"It doesn&#39;t, in my experience, it shows a sawtooth shape."},{"owner":{"account_id":13266,"reputation":25350,"user_id":26521,"accept_rate":86,"display_name":"Lieven Cardoen"},"score":1,"creation_date":1372339245,"post_id":17321609,"comment_id":25164104,"body_markdown":"Mmm, indeed, it increases to the maximum level and then Garbage collector executes. But why does it keep increasing while nothing is being done?","body":"Mmm, indeed, it increases to the maximum level and then Garbage collector executes. But why does it keep increasing while nothing is being done?"},{"owner":{"account_id":149941,"reputation":2907,"user_id":362792,"display_name":"Hitobat"},"score":0,"creation_date":1639069638,"post_id":17321609,"comment_id":124260231,"body_markdown":"Well if you connected through JMX then there is work being done; to send stats over. And usually many apps have background threads to check on things, eg. refresh DB connection etc... Ideally you are master of your own app, so you should know what does it do in background. Thread view can give you some hints too.","body":"Well if you connected through JMX then there is work being done; to send stats over. And usually many apps have background threads to check on things, eg. refresh DB connection etc... Ideally you are master of your own app, so you should know what does it do in background. Thread view can give you some hints too."}],"owner":{"account_id":13266,"reputation":25350,"user_id":26521,"accept_rate":86,"display_name":"Lieven Cardoen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":403,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1639068705,"creation_date":1372253831,"question_id":17321609,"body_markdown":"I have a JRubyOnRails application running in Tomcat. After browsing to my application (localhost), logging in and then doing nothing, the Heap space seems to be growing continuously...\r\n\r\nIs that normal? If I press on Perform GC, it does go down again. I&#39;m wondering what will happen if I just leave it until it reaches the maximum of my Computer RAM?\r\n\r\nAnd why is it increasing all the time while nothing happens? Is it due to the fact that I&#39;m monitoring my application?","title":"Why does heap space constantly increase when monitoring Tomcat with Java VisualVM?","body":"<p>I have a JRubyOnRails application running in Tomcat. After browsing to my application (localhost), logging in and then doing nothing, the Heap space seems to be growing continuously...</p>\n\n<p>Is that normal? If I press on Perform GC, it does go down again. I'm wondering what will happen if I just leave it until it reaches the maximum of my Computer RAM?</p>\n\n<p>And why is it increasing all the time while nothing happens? Is it due to the fact that I'm monitoring my application?</p>\n"},{"tags":["java","tomcat","centos","heap-memory","ram"],"comments":[{"owner":{"account_id":266709,"reputation":11846,"user_id":554431,"display_name":"bestsss"},"score":2,"creation_date":1299691235,"post_id":5249536,"comment_id":5910106,"body_markdown":"get 64bit java  :) also printing java -version helps a ton!","body":"get 64bit java  :) also printing java -version helps a ton!"},{"owner":{"account_id":197340,"reputation":7480,"user_id":441368,"accept_rate":100,"display_name":"Pushkar"},"score":0,"creation_date":1299691296,"post_id":5249536,"comment_id":5910123,"body_markdown":"Are all your components 64 bit? JDK/Tomcat?","body":"Are all your components 64 bit? JDK/Tomcat?"},{"owner":{"account_id":134103,"reputation":620,"user_id":335993,"accept_rate":71,"display_name":"matsientst"},"score":0,"creation_date":1299691489,"post_id":5249536,"comment_id":5910165,"body_markdown":"How can you check if your JVM is 64 bit?\njava version &quot;1.6.0_17&quot;\nJava(TM) SE Runtime Environment (build 1.6.0_17-b04)\nJava HotSpot(TM) Server VM (build 14.3-b01, mixed mode)","body":"How can you check if your JVM is 64 bit? java version &quot;1.6.0_17&quot; Java(TM) SE Runtime Environment (build 1.6.0_17-b04) Java HotSpot(TM) Server VM (build 14.3-b01, mixed mode)"}],"answers":[{"tags":[],"owner":{"account_id":268158,"reputation":1723,"user_id":556751,"display_name":"Rajendra"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1299691562,"creation_date":1299691562,"answer_id":5249683,"question_id":5249536,"body_markdown":"Do you have 64 bit JDK installed? If you are using a 32 bit JDK it can max access 4GB (theoretically).\r\nAs you are planning for 6GB, you require 64bit JDK. Added to that as you have 7.5G, 6GB is a tight no. CentOS requires some memory for kernal, processing other services, SWAP memory from this.\r\n\r\nSo give a trial &amp; error by increasing heap size from 5G onwards. JDK requires additional memory beyond heap like permgenspace (which is typically 128M - 512M depending on how many libraries/classloaders you have)\r\n\r\nRefer to : http://benjchristensen.com/2007/02/16/32-bit-versus-64-bit-jdk-memory-usage/","title":"Max Heap Size for Tomcat 6 on 64 bit CentOs?","body":"<p>Do you have 64 bit JDK installed? If you are using a 32 bit JDK it can max access 4GB (theoretically).\nAs you are planning for 6GB, you require 64bit JDK. Added to that as you have 7.5G, 6GB is a tight no. CentOS requires some memory for kernal, processing other services, SWAP memory from this.</p>\n\n<p>So give a trial &amp; error by increasing heap size from 5G onwards. JDK requires additional memory beyond heap like permgenspace (which is typically 128M - 512M depending on how many libraries/classloaders you have)</p>\n\n<p>Refer to : <a href=\"http://benjchristensen.com/2007/02/16/32-bit-versus-64-bit-jdk-memory-usage/\" rel=\"nofollow\">http://benjchristensen.com/2007/02/16/32-bit-versus-64-bit-jdk-memory-usage/</a></p>\n"}],"owner":{"account_id":134103,"reputation":620,"user_id":335993,"accept_rate":71,"display_name":"matsientst"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6475,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1639068680,"creation_date":1299690902,"question_id":5249536,"body_markdown":"I am running a tomcat 6 instance on a large EC2 instance running CentOS 5.4.\r\nThe box has 7.5gb of RAM and is dedicated to running tomcat.\r\n\r\nI am trying to give the box 6gb of RAM to use for it&#39;s max heap. However I keep getting this error:\r\n\r\n    Invalid maximum heap size: -Xmx6144m\r\n    The specified size exceeds the maximum representable size.\r\n\r\nAs I drop the amount of RAM I give it I start getting this error instead:\r\n\r\n    Error occurred during initialization of VM\r\n    Could not reserve enough space for object heap\r\n\r\nEven with the app running (with xmx3000m) when I run free I have this amount free:\r\n\r\n   \r\n\r\n     [tomcat@producer1:/usr/share/tomcat/logs] $free\r\n                 total       used       free     shared    buffers     cached\r\n    Mem:       7864320    1512736    6351584          0     179948     702352\r\n    -/+ buffers/cache:     630436    7233884\r\n    Swap:            0          0          0\r\n\r\n\r\nThe most I am able to give it is 3000m. This seems unreasonably small. Anyone have any ideas? \r\nThanks\r\n\r\n","title":"Max Heap Size for Tomcat 6 on 64 bit CentOs?","body":"<p>I am running a tomcat 6 instance on a large EC2 instance running CentOS 5.4.\nThe box has 7.5gb of RAM and is dedicated to running tomcat.</p>\n\n<p>I am trying to give the box 6gb of RAM to use for it's max heap. However I keep getting this error:</p>\n\n<pre><code>Invalid maximum heap size: -Xmx6144m\nThe specified size exceeds the maximum representable size.\n</code></pre>\n\n<p>As I drop the amount of RAM I give it I start getting this error instead:</p>\n\n<pre><code>Error occurred during initialization of VM\nCould not reserve enough space for object heap\n</code></pre>\n\n<p>Even with the app running (with xmx3000m) when I run free I have this amount free:</p>\n\n<pre><code> [tomcat@producer1:/usr/share/tomcat/logs] $free\n             total       used       free     shared    buffers     cached\nMem:       7864320    1512736    6351584          0     179948     702352\n-/+ buffers/cache:     630436    7233884\nSwap:            0          0          0\n</code></pre>\n\n<p>The most I am able to give it is 3000m. This seems unreasonably small. Anyone have any ideas? \nThanks</p>\n"},{"tags":["java","tomcat","heap-memory"],"comments":[{"owner":{"account_id":31518,"reputation":36053,"user_id":86604,"accept_rate":80,"display_name":"Ingo"},"score":0,"creation_date":1303377899,"post_id":5742070,"comment_id":6570177,"body_markdown":"-Xmx Increase, until no out of memory errors happen and the CPU usage is not dominated by the garbage collector.","body":"-Xmx Increase, until no out of memory errors happen and the CPU usage is not dominated by the garbage collector."}],"answers":[{"tags":[],"owner":{"account_id":75292,"reputation":60810,"user_id":216021,"accept_rate":82,"display_name":"kostja"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1343747141,"creation_date":1303377972,"answer_id":5742117,"question_id":5742070,"body_markdown":"You can start with profiling the memory usage. The JDK (6 upwards) has its [Visual VM](http://visualvm.java.net/) for example. A tool I personally prefer is the [Eclipse Memory Analyzer](http://www.eclipse.org/mat/), originally from SAP, now open. You can analyze heap dumps or hook it up to a java process of your choice.&lt;br&gt;&lt;br&gt;To programmatically create heap dumps you can use [this](http://blogs.oracle.com/sundararajan/entry/programmatically_dumping_heap_from_java)","title":"java - best way to determine -Xmx and -Xms required for any webapp &amp; standalone app","body":"<p>You can start with profiling the memory usage. The JDK (6 upwards) has its <a href=\"http://visualvm.java.net/\" rel=\"nofollow\">Visual VM</a> for example. A tool I personally prefer is the <a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow\">Eclipse Memory Analyzer</a>, originally from SAP, now open. You can analyze heap dumps or hook it up to a java process of your choice.<br><br>To programmatically create heap dumps you can use <a href=\"http://blogs.oracle.com/sundararajan/entry/programmatically_dumping_heap_from_java\" rel=\"nofollow\">this</a></p>\n"},{"tags":[],"owner":{"account_id":360550,"reputation":2374,"user_id":702599,"display_name":"BertNase"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1303383655,"creation_date":1303383655,"answer_id":5743187,"question_id":5742070,"body_markdown":"we use the `-Xloggc:gc-log.txt`and `-XX:+PrintGCdetails` option on the VM and let it run for a while (days) with hig Xmx settings and then you can use [GCViewer][1] to render a diagram from the log and get an idea of when how much RAM was consumed, i.e. whether there were peaks, limits reached, loads of GCs slowing down the App, etc. \r\n\r\n\r\n  [1]: http://www.tagtraum.com/gcviewer.html","title":"java - best way to determine -Xmx and -Xms required for any webapp &amp; standalone app","body":"<p>we use the <code>-Xloggc:gc-log.txt</code>and <code>-XX:+PrintGCdetails</code> option on the VM and let it run for a while (days) with hig Xmx settings and then you can use <a href=\"http://www.tagtraum.com/gcviewer.html\" rel=\"nofollow\">GCViewer</a> to render a diagram from the log and get an idea of when how much RAM was consumed, i.e. whether there were peaks, limits reached, loads of GCs slowing down the App, etc. </p>\n"},{"tags":[],"owner":{"account_id":3493556,"reputation":4931,"user_id":2922515,"accept_rate":70,"display_name":"Vipin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1555551306,"creation_date":1394770030,"answer_id":22395900,"question_id":5742070,"body_markdown":"Rule suggested by [IBM][1] for Sizing the Java heap , it is for IBM SDK but i dont think there would be much difference in these settings for other SDK&#39;s.\r\n\r\n&gt; Size your Java heap so that your application runs with a minimum heap\r\n&gt; usage of 40%, and a maximum heap usage of 70%.\r\n\r\n\r\n  [1]: http://publib.boulder.ibm.com/infocenter/javasdk/tools/index.jsp?topic=/com.ibm.java.doc.igaa/_1vg000139b8b453-11951f1e7ff-8000_1001.html","title":"java - best way to determine -Xmx and -Xms required for any webapp &amp; standalone app","body":"<p>Rule suggested by <a href=\"http://publib.boulder.ibm.com/infocenter/javasdk/tools/index.jsp?topic=/com.ibm.java.doc.igaa/_1vg000139b8b453-11951f1e7ff-8000_1001.html\" rel=\"nofollow noreferrer\">IBM</a> for Sizing the Java heap , it is for IBM SDK but i dont think there would be much difference in these settings for other SDK's.</p>\n\n<blockquote>\n  <p>Size your Java heap so that your application runs with a minimum heap\n  usage of 40%, and a maximum heap usage of 70%.</p>\n</blockquote>\n"}],"owner":{"account_id":265454,"reputation":1640,"user_id":552423,"accept_rate":64,"display_name":"itsraja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3560,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1639068669,"creation_date":1303377712,"question_id":5742070,"body_markdown":"I&#39;d like to know how to determine the heap size required for a standalone app as well as a webapp running on a tomcat server.\r\n\r\n   How to determine the same after deployment on the server.\r\n\r\n   Thanks.\r\n\r\n    ","title":"java - best way to determine -Xmx and -Xms required for any webapp &amp; standalone app","body":"<p>I'd like to know how to determine the heap size required for a standalone app as well as a webapp running on a tomcat server.</p>\n\n<p>How to determine the same after deployment on the server.</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","tomcat","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":232603,"reputation":2357,"user_id":497544,"display_name":"Yasin Bahtiyar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1304330155,"creation_date":1304330155,"answer_id":5855749,"question_id":5855705,"body_markdown":"`$ ps aux | grep tomcat` command should display actual settings picked by tomcat.","title":"Setting heap size in Tomcat","body":"<p><code>$ ps aux | grep tomcat</code> command should display actual settings picked by tomcat.</p>\n"},{"tags":[],"owner":{"account_id":97762,"reputation":7689,"user_id":265022,"display_name":"lobster1234"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1304330657,"creation_date":1304330235,"answer_id":5855765,"question_id":5855705,"body_markdown":"Yes, `$CATALINA_OPTS` will not be available outside of the script thats executed by the shell. In order to get the correct heap size, you need a profiler, or use `jmap` to get heap info - here 39196 is the PID of the tomcat process on my machine.\r\n\r\n    mpandit-mbp:~ mpandit$ jmap -heap 39196\r\n    Attaching to process ID 39196, please wait...\r\n    Debugger attached successfully.\r\n    Server compiler detected.\r\n    JVM version is 19.1-b02-334\r\n\r\n    using parallel threads in the new generation.\r\n    using thread-local object allocation.\r\n    Concurrent Mark-Sweep GC\r\n\r\n    Heap Configuration:\r\n       MinHeapFreeRatio = 40\r\n       MaxHeapFreeRatio = 70\r\n       MaxHeapSize      = 132120576 (126.0MB)\r\n       NewSize          = 21757952 (20.75MB)\r\n       MaxNewSize       = 87228416 (83.1875MB)\r\n       OldSize          = 65404928 (62.375MB)\r\n       NewRatio         = 7\r\n       SurvivorRatio    = 8\r\n       PermSize         = 21757952 (20.75MB)\r\n       MaxPermSize      = 85983232 (82.0MB)\r\n\r\n","title":"Setting heap size in Tomcat","body":"<p>Yes, <code>$CATALINA_OPTS</code> will not be available outside of the script thats executed by the shell. In order to get the correct heap size, you need a profiler, or use <code>jmap</code> to get heap info - here 39196 is the PID of the tomcat process on my machine.</p>\n\n<pre><code>mpandit-mbp:~ mpandit$ jmap -heap 39196\nAttaching to process ID 39196, please wait...\nDebugger attached successfully.\nServer compiler detected.\nJVM version is 19.1-b02-334\n\nusing parallel threads in the new generation.\nusing thread-local object allocation.\nConcurrent Mark-Sweep GC\n\nHeap Configuration:\n   MinHeapFreeRatio = 40\n   MaxHeapFreeRatio = 70\n   MaxHeapSize      = 132120576 (126.0MB)\n   NewSize          = 21757952 (20.75MB)\n   MaxNewSize       = 87228416 (83.1875MB)\n   OldSize          = 65404928 (62.375MB)\n   NewRatio         = 7\n   SurvivorRatio    = 8\n   PermSize         = 21757952 (20.75MB)\n   MaxPermSize      = 85983232 (82.0MB)\n</code></pre>\n"}],"owner":{"account_id":232234,"reputation":3842,"user_id":496934,"accept_rate":80,"display_name":"user496934"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5198,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":5855765,"answer_count":2,"score":3,"last_activity_date":1639068659,"creation_date":1304329868,"question_id":5855705,"body_markdown":"I am working on the apache tomcat server in unix enviroment. I want to increase the heap size of my application and so I am setting it in the catalina.sh file . This is how I am doing it ...\r\n\r\n  export CATALINA_OPTS=&quot;-Xms1024m -Xmx1024m&quot;\r\n  echo $CATALINA_OPTS\r\n\r\n  When i call the startup.sh it calls catalina.sh and sets the variable CATALINA_OPTS to 1024 as indicated by the echo statement in the script. But if I do echo $CATALINA_OPTS at the command prompt it gives blank. Is this expected behavior. How can I be sure that the correct heap value has indeed been picked up ?","title":"Setting heap size in Tomcat","body":"<p>I am working on the apache tomcat server in unix enviroment. I want to increase the heap size of my application and so I am setting it in the catalina.sh file . This is how I am doing it ...</p>\n\n<p>export CATALINA_OPTS=\"-Xms1024m -Xmx1024m\"\n  echo $CATALINA_OPTS</p>\n\n<p>When i call the startup.sh it calls catalina.sh and sets the variable CATALINA_OPTS to 1024 as indicated by the echo statement in the script. But if I do echo $CATALINA_OPTS at the command prompt it gives blank. Is this expected behavior. How can I be sure that the correct heap value has indeed been picked up ?</p>\n"},{"tags":["java","amazon-web-services","tomcat","amazon-ec2","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":1045150,"reputation":1865,"user_id":1050319,"display_name":"Roy Kachouh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1324393373,"creation_date":1324393373,"answer_id":8577397,"question_id":8565122,"body_markdown":"1024 seems ok, maybe a bit much.  \r\n\r\nI&#39;m not exactly sure what your servlet is doing, but to give you an idea, I have an ecommerce application with about 1000 daily users running on 2 small ec2 instances. Tomcat load is distributed via mod_jk.\r\n\r\n I did not tune the JVM at all and kept the default settings.  I&#39;m also using terracotta distributed object caching, and that process seems to be consuming most of the memory.\r\n\r\nAre you deployed on a linux based os or windows?  IMO, linux does a better job at managing available memory.\r\n\r\nAs to tools, I would suggest deploying your application as is to a small ec2 instance and using a tool like JMeter to stress test the application.  During the stress test, you can have the top utility open(assuming your app is on linux and top is installed).\r\n\r\nTry to break your application by seeing how much load it can handle.  That&#39;s the beauty of ec2, you can setup a test environment in minutes and discard it right after.\r\n\r\n","title":"Allocating a Java heap for Tomcat on an EC2 instance","body":"<p>1024 seems ok, maybe a bit much.  </p>\n\n<p>I'm not exactly sure what your servlet is doing, but to give you an idea, I have an ecommerce application with about 1000 daily users running on 2 small ec2 instances. Tomcat load is distributed via mod_jk.</p>\n\n<p>I did not tune the JVM at all and kept the default settings.  I'm also using terracotta distributed object caching, and that process seems to be consuming most of the memory.</p>\n\n<p>Are you deployed on a linux based os or windows?  IMO, linux does a better job at managing available memory.</p>\n\n<p>As to tools, I would suggest deploying your application as is to a small ec2 instance and using a tool like JMeter to stress test the application.  During the stress test, you can have the top utility open(assuming your app is on linux and top is installed).</p>\n\n<p>Try to break your application by seeing how much load it can handle.  That's the beauty of ec2, you can setup a test environment in minutes and discard it right after.</p>\n"},{"tags":[],"owner":{"account_id":369958,"reputation":743,"user_id":717615,"display_name":"Harish Ganesan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1369810094,"creation_date":1369810094,"answer_id":16807233,"question_id":8565122,"body_markdown":"Check newrelic for java to determine you heap usage pattern.","title":"Allocating a Java heap for Tomcat on an EC2 instance","body":"<p>Check newrelic for java to determine you heap usage pattern.</p>\n"}],"owner":{"account_id":215705,"reputation":1391,"user_id":470502,"accept_rate":46,"display_name":"Sander Smith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3502,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":8577397,"answer_count":2,"score":5,"last_activity_date":1639068639,"creation_date":1324316085,"question_id":8565122,"body_markdown":"I&#39;m writing a Java servlet that I&#39;m planning to deploy on Amazon AWS using Elastic Beanstalk. My tests show that things run well using a Small EC2 instance using their stock Tomcat AMI that Beanstalk uses.\r\n\r\nI&#39;m trying to figure out how to properly allocate Java heap space for this configuration. A Small instance has 1.7 GB of memory, so I&#39;m thinking that a 1024MB heap will work well. I realize that memory will be needed for other things even though the only &quot;real&quot; purpose of this instance is to run Tomcat. And I also know that there&#39;s some point with large heaps where the standard Sun/Oracle JVM doesn&#39;t really work.\r\n\r\nIs this a reasonable way to allocate the memory? Should I be using more or less? What tools can I use to help determine the optimal configuration?","title":"Allocating a Java heap for Tomcat on an EC2 instance","body":"<p>I'm writing a Java servlet that I'm planning to deploy on Amazon AWS using Elastic Beanstalk. My tests show that things run well using a Small EC2 instance using their stock Tomcat AMI that Beanstalk uses.</p>\n\n<p>I'm trying to figure out how to properly allocate Java heap space for this configuration. A Small instance has 1.7 GB of memory, so I'm thinking that a 1024MB heap will work well. I realize that memory will be needed for other things even though the only \"real\" purpose of this instance is to run Tomcat. And I also know that there's some point with large heaps where the standard Sun/Oracle JVM doesn't really work.</p>\n\n<p>Is this a reasonable way to allocate the memory? Should I be using more or less? What tools can I use to help determine the optimal configuration?</p>\n"},{"tags":["java","tomcat","heap-memory"],"comments":[{"owner":{"account_id":392650,"reputation":2045,"user_id":754048,"display_name":"Matt Aldridge"},"score":0,"creation_date":1326975203,"post_id":8925794,"comment_id":11168137,"body_markdown":"Are there any log messages prior to the crash?","body":"Are there any log messages prior to the crash?"},{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1326975218,"post_id":8925794,"comment_id":11168141,"body_markdown":"Please post crash stack trace.","body":"Please post crash stack trace."},{"owner":{"account_id":184519,"reputation":22782,"user_id":420613,"accept_rate":87,"display_name":"Muhammad Imran Tariq"},"score":0,"creation_date":1326975476,"post_id":8925794,"comment_id":11168228,"body_markdown":"Why do you need larger heap size? Is Tomcat unable to run your app with this heap size? If yes whats the error?","body":"Why do you need larger heap size? Is Tomcat unable to run your app with this heap size? If yes whats the error?"},{"owner":{"account_id":127611,"reputation":8775,"user_id":324900,"accept_rate":80,"display_name":"Reddy"},"score":0,"creation_date":1326975760,"post_id":8925794,"comment_id":11168315,"body_markdown":"See if this is impacting you http://stackoverflow.com/a/497757/324900","body":"See if this is impacting you <a href=\"http://stackoverflow.com/a/497757/324900\">stackoverflow.com/a/497757/324900</a>"}],"answers":[{"tags":[],"owner":{"account_id":260941,"reputation":7554,"user_id":544819,"accept_rate":86,"display_name":"Jonathan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1326975478,"creation_date":1326975478,"answer_id":8925891,"question_id":8925794,"body_markdown":"From: https://stackoverflow.com/questions/3030263/increasing-the-jvm-maximum-heap-size-for-memory-intensive-applications\r\n\r\nTry to specify `-d64` on your `CATALINA_OPTS`.\r\n\r\n**Edit:** Seems that option only has an effect on Solaris. Nevermind.","title":"Problems setting Tomcat Java Heap Size to 8GB on Windows 7 (64 bit)?","body":"<p>From: <a href=\"https://stackoverflow.com/questions/3030263/increasing-the-jvm-maximum-heap-size-for-memory-intensive-applications\">Increasing the JVM maximum heap size for memory intensive applications</a></p>\n\n<p>Try to specify <code>-d64</code> on your <code>CATALINA_OPTS</code>.</p>\n\n<p><strong>Edit:</strong> Seems that option only has an effect on Solaris. Nevermind.</p>\n"},{"tags":[],"owner":{"account_id":436506,"reputation":2534,"user_id":823729,"display_name":"belgther"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1326976864,"creation_date":1326976864,"answer_id":8926172,"question_id":8925794,"body_markdown":"let the environment variables `JAVA_HOME` and `PATH` refer to your 64-Bit JVM. You can check it on command-line by executing `java -version` and `%JAVA_HOME%\\bin\\java.exe -version` (on Windows).","title":"Problems setting Tomcat Java Heap Size to 8GB on Windows 7 (64 bit)?","body":"<p>let the environment variables <code>JAVA_HOME</code> and <code>PATH</code> refer to your 64-Bit JVM. You can check it on command-line by executing <code>java -version</code> and <code>%JAVA_HOME%\\bin\\java.exe -version</code> (on Windows).</p>\n"},{"tags":[],"owner":{"account_id":384734,"reputation":11893,"user_id":741442,"accept_rate":85,"display_name":"Yavar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1327042958,"creation_date":1327042958,"answer_id":8937861,"question_id":8925794,"body_markdown":"I solved the problem. Actually I was trying to start Tomcat (startup.bat) in command prompt in Windows. It was crashing. Still dont know the reason for this (maybe related to starting 64 bit Tomcat on Dos/ When I start tomcat as a service using service.bat install it works perfectly fine.","title":"Problems setting Tomcat Java Heap Size to 8GB on Windows 7 (64 bit)?","body":"<p>I solved the problem. Actually I was trying to start Tomcat (startup.bat) in command prompt in Windows. It was crashing. Still dont know the reason for this (maybe related to starting 64 bit Tomcat on Dos/ When I start tomcat as a service using service.bat install it works perfectly fine.</p>\n"}],"owner":{"account_id":384734,"reputation":11893,"user_id":741442,"accept_rate":85,"display_name":"Yavar"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2611,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":8937861,"answer_count":3,"score":1,"last_activity_date":1639068628,"creation_date":1326975060,"question_id":8925794,"body_markdown":"I need larger Java Heap Size atleast 8GB minimum for my search application. I am working on Windows 7 (64 bit). I am not able to allocate more than 1500MB using CATALINA_OPTS environment variable. When I try allocating more the Tomcat crashes and is not able to start. I donwloaded 64 bit Java Run Time now and also subsequently 64 bit Apache Tomcat. Even now its not permitting me to start with more Heap Size. It (Tomcat 64 bit) crashes again. Any help would be appreciated.","title":"Problems setting Tomcat Java Heap Size to 8GB on Windows 7 (64 bit)?","body":"<p>I need larger Java Heap Size atleast 8GB minimum for my search application. I am working on Windows 7 (64 bit). I am not able to allocate more than 1500MB using CATALINA_OPTS environment variable. When I try allocating more the Tomcat crashes and is not able to start. I donwloaded 64 bit Java Run Time now and also subsequently 64 bit Apache Tomcat. Even now its not permitting me to start with more Heap Size. It (Tomcat 64 bit) crashes again. Any help would be appreciated.</p>\n"},{"tags":["java","tomcat","jsf","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1331852572,"creation_date":1331830544,"answer_id":9724457,"question_id":9724424,"body_markdown":"It most certainly won&#39;t be enough, even for one application. You can try it locally - run a tomcat and pass `-Xmx64m` as a JVM option, then see whether your applications run properly, or they throw Java Heap Space errors.\r\n\r\nIf you can&#39;t increase it, I&#39;d suggest Amazon EC2. You can use a newer version of tomcat there as well.","title":"heap space on a java host","body":"<p>It most certainly won't be enough, even for one application. You can try it locally - run a tomcat and pass <code>-Xmx64m</code> as a JVM option, then see whether your applications run properly, or they throw Java Heap Space errors.</p>\n\n<p>If you can't increase it, I'd suggest Amazon EC2. You can use a newer version of tomcat there as well.</p>\n"},{"tags":[],"owner":{"account_id":70141,"reputation":1150,"user_id":203686,"accept_rate":63,"display_name":"Eric V"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1331857173,"creation_date":1331857173,"answer_id":9730113,"question_id":9724424,"body_markdown":"Before using your application in production, I recommend you:\r\n- test your application with a testing tool such as JMeter (http://jmeter.apache.org/)\r\n- monitor the jvm of tomcat during your test with a tool such as jconsole. Analyse the needed memory for each use case.\r\n\r\nYou&#39;ll surely need to tune your memory to more than 64mb. \r\nIt&#39;s difficult/impossible to give you the necessary amount of memory without knowing your web application.\r\n\r\nBeware as well, if you use 64 bits JVM, the consumption could be twice for your objects (except if you use -XX:+UseCompressedOops)\r\n","title":"heap space on a java host","body":"<p>Before using your application in production, I recommend you:\n- test your application with a testing tool such as JMeter (http://jmeter.apache.org/)\n- monitor the jvm of tomcat during your test with a tool such as jconsole. Analyse the needed memory for each use case.</p>\n\n<p>You'll surely need to tune your memory to more than 64mb. \nIt's difficult/impossible to give you the necessary amount of memory without knowing your web application.</p>\n\n<p>Beware as well, if you use 64 bits JVM, the consumption could be twice for your objects (except if you use -XX:+UseCompressedOops)</p>\n"}],"owner":{"account_id":1327546,"reputation":11,"user_id":1272070,"display_name":"user1272070"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":331,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1639068619,"creation_date":1331830442,"question_id":9724424,"body_markdown":"I&#39;m about to register in a java hosting plan on some website with unlimited disk space and traffic with **tomcat 7.0.2** as my server.\r\n\r\nI&#39;m planning to publish all the websites i develop with **JSF2** and some other technologies on this hosting, but i found out that i only have *64mb* heap space,  and I&#39;m worried that this might be a problem if i have many apps running at the same time.\r\n\r\nAny one has an opinion on how might this affect the server, please let me know.\r\n\r\nThanks","title":"heap space on a java host","body":"<p>I'm about to register in a java hosting plan on some website with unlimited disk space and traffic with <strong>tomcat 7.0.2</strong> as my server.</p>\n\n<p>I'm planning to publish all the websites i develop with <strong>JSF2</strong> and some other technologies on this hosting, but i found out that i only have <em>64mb</em> heap space,  and I'm worried that this might be a problem if i have many apps running at the same time.</p>\n\n<p>Any one has an opinion on how might this affect the server, please let me know.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","tomcat","heap-memory"],"comments":[{"owner":{"account_id":1405089,"reputation":62770,"user_id":1333025,"accept_rate":65,"display_name":"Petr"},"score":1,"creation_date":1344605181,"post_id":11902549,"comment_id":15843853,"body_markdown":"This has been discussed many times, for example see http://stackoverflow.com/questions/286007/how-to-tune-tomcat-5-5-jvm-memory-settings-without-using-the-configuration-progr","body":"This has been discussed many times, for example see <a href=\"http://stackoverflow.com/questions/286007/how-to-tune-tomcat-5-5-jvm-memory-settings-without-using-the-configuration-progr\" title=\"how to tune tomcat 5 5 jvm memory settings without using the configuration progr\">stackoverflow.com/questions/286007/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1055494,"reputation":10205,"user_id":1058319,"accept_rate":98,"display_name":"Adel Boutros"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1344605132,"creation_date":1344605132,"answer_id":11902649,"question_id":11902549,"body_markdown":"You have a variable called **JAVA_OPTS**.\r\n\r\nAdd to it the argument `-Xmx1g`.\r\n\r\nReplace: `set JAVA_OPTS=%JAVA_OPTS% -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=&quot;%CATALINA_BASE%\\conf\\logging.properties&quot;`\r\n\r\nwith: set JAVA_OPTS=%JAVA_OPTS% -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=&quot;%CATALINA_BASE%\\conf\\logging.properties&quot; -Xmx1g","title":"Set maximum heap space for tomcat","body":"<p>You have a variable called <strong>JAVA_OPTS</strong>.</p>\n\n<p>Add to it the argument <code>-Xmx1g</code>.</p>\n\n<p>Replace: <code>set JAVA_OPTS=%JAVA_OPTS% -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=\"%CATALINA_BASE%\\conf\\logging.properties\"</code></p>\n\n<p>with: set JAVA_OPTS=%JAVA_OPTS% -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file=\"%CATALINA_BASE%\\conf\\logging.properties\" -Xmx1g</p>\n"},{"tags":[],"owner":{"account_id":209652,"reputation":34028,"user_id":460802,"display_name":"UBIK LOAD PACK"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1344605177,"creation_date":1344605177,"answer_id":11902671,"question_id":11902549,"body_markdown":"It is in setenv.sh which will be detected by catalina.sh:\r\n\r\nJVM_ARGS=&quot;-Xmx64m&quot;\r\n\r\nRegards\r\n\r\nPhilippe","title":"Set maximum heap space for tomcat","body":"<p>It is in setenv.sh which will be detected by catalina.sh:</p>\n\n<p>JVM_ARGS=\"-Xmx64m\"</p>\n\n<p>Regards</p>\n\n<p>Philippe</p>\n"},{"tags":[],"owner":{"display_name":"user1590355"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1344605282,"creation_date":1344605282,"answer_id":11902697,"question_id":11902549,"body_markdown":"Increasing the heap space is simple as adding a command line switch to the JVM : \r\n\r\n    -Xmx2g\r\n\r\n2g for 2Gb, if you want in megabyte : 512m ---&gt; -Xmx512m","title":"Set maximum heap space for tomcat","body":"<p>Increasing the heap space is simple as adding a command line switch to the JVM : </p>\n\n<pre><code>-Xmx2g\n</code></pre>\n\n<p>2g for 2Gb, if you want in megabyte : 512m ---> -Xmx512m</p>\n"}],"owner":{"account_id":1604942,"reputation":2704,"user_id":1485216,"accept_rate":82,"display_name":"JAVAGeek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3222,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1639068609,"creation_date":1344604856,"question_id":11902549,"body_markdown":"My `Java EE` application runs just fine on host server , but it uses a lot of heap space . allowed heap space is `64MB`. I am getting my hosting account suspended every time my app uses more then `64 MB` heap. I think the hosting provider has not set the max heap space for my app , that is why i am not getting the `outOfMemoryException` on reaching `&gt;64MB`.\r\n\r\nI have my own instance of tomcat, i can configure tomcat configurations.\r\nMy question is - how can i set the max allowed heap space for my tomcat instance so that it throws `outOfMemoryException` on reaching the limit ?\r\nthat way my hosting account will not get suspended.\r\n\r\nhere is the [catlina.bat][1] and [catlina.sh][2]\r\n\r\nwhere do i have to make changes in these files ?\r\n\r\n\r\n  [1]: http://pastebin.com/WWGRXQ1h\r\n  [2]: http://pastebin.com/MYT4B3Z5","title":"Set maximum heap space for tomcat","body":"<p>My <code>Java EE</code> application runs just fine on host server , but it uses a lot of heap space . allowed heap space is <code>64MB</code>. I am getting my hosting account suspended every time my app uses more then <code>64 MB</code> heap. I think the hosting provider has not set the max heap space for my app , that is why i am not getting the <code>outOfMemoryException</code> on reaching <code>&gt;64MB</code>.</p>\n\n<p>I have my own instance of tomcat, i can configure tomcat configurations.\nMy question is - how can i set the max allowed heap space for my tomcat instance so that it throws <code>outOfMemoryException</code> on reaching the limit ?\nthat way my hosting account will not get suspended.</p>\n\n<p>here is the <a href=\"http://pastebin.com/WWGRXQ1h\" rel=\"nofollow\">catlina.bat</a> and <a href=\"http://pastebin.com/MYT4B3Z5\" rel=\"nofollow\">catlina.sh</a></p>\n\n<p>where do i have to make changes in these files ?</p>\n"},{"tags":["java","tomcat","heap-memory","tomcat7","catalina"],"answers":[{"tags":[],"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1364833032,"creation_date":1364833032,"answer_id":15747092,"question_id":15745590,"body_markdown":"Note that the heap is not the only block of memory that java acquires. Also, if tomcat&#39;s startup process uses up more than 64M, the JVM will happily allocate more memory up to the -Xmx value. But that&#39;s not everything - the stacks for the various stacks take memory, as well as the classes to load. There&#39;s the PermGen memory that&#39;s taken on top of the heap memory as well.\r\n\r\nCheck [this article][1] for more discussion on the various memory you&#39;re dealing with. Given today&#39;s prices for memory, it might just be cheaper to upgrade the server to have more memory than worrying about optimizing the memory consumption of the application on this level.\r\n\r\n\r\n  [1]: http://javaguru.fi/blog/-/blogs/why-is-my-java-process-taking-more-memory-than-i-gave-it-","title":"Tomcat 7 - cannot get CATALINA_OPTS heap size to work","body":"<p>Note that the heap is not the only block of memory that java acquires. Also, if tomcat's startup process uses up more than 64M, the JVM will happily allocate more memory up to the -Xmx value. But that's not everything - the stacks for the various stacks take memory, as well as the classes to load. There's the PermGen memory that's taken on top of the heap memory as well.</p>\n\n<p>Check <a href=\"http://javaguru.fi/blog/-/blogs/why-is-my-java-process-taking-more-memory-than-i-gave-it-\" rel=\"nofollow\">this article</a> for more discussion on the various memory you're dealing with. Given today's prices for memory, it might just be cheaper to upgrade the server to have more memory than worrying about optimizing the memory consumption of the application on this level.</p>\n"}],"owner":{"account_id":144981,"reputation":2203,"user_id":354448,"accept_rate":64,"display_name":"arahant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8934,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":15747092,"answer_count":1,"score":2,"last_activity_date":1639068597,"creation_date":1364827481,"question_id":15745590,"body_markdown":"I am setting CATALINA_OPTS in catalina.sh but strangely this value seems to be ignored. I am on a machine with 768M RAM. Here are the steps to reproduce\r\n\r\nI check the memory before starting Tomcat by running `free -m`. I get the following\r\n\r\n        total       used       free     shared    buffers     cached\r\n        768         43        724          0          0         16\r\n\r\nI have set the CATALINA_OPTS in the first line of catalina.sh like so: \r\n\r\n    export CATALINA_OPTS=&quot;-Xms64M -Xmx256M&quot;\r\n\r\nI then start Tomcat using `./startup.sh`\r\n\r\nI check that Tomcat took the arguments by doing a `ps aux | grep tomcat` . I get the following result which seems to indicate that the setting was read\r\n\r\n&gt; root      1164 26.0  6.2 1232968 49116 pts/0   Sl   10:30   0:01\r\n&gt; /usr/bin/java\r\n&gt; -Djava.util.logging.config.file=/usr/share/apache-tomcat-7.0.39/conf/logging.properties\r\n&gt; -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager **-Xms64M -Xmx256M** -Djava.endorsed.dirs=/usr/share/apache-tomcat-7.0.39/endorsed -classpath /usr/share/apache-tomcat-7.0.39/bin/bootstrap.jar:/usr/share/apache-tomcat-7.0.39/bin/tomcat-juli.jar\r\n&gt; -Dcatalina.base=/usr/share/apache-tomcat-7.0.39 -Dcatalina.home=/usr/share/apache-tomcat-7.0.39 -Djava.io.tmpdir=/usr/share/apache-tomcat-7.0.39/temp org.apache.catalina.startup.Bootstrap start\r\n\r\nI again run `free -m` but I get \r\n\r\n           total       used       free     shared    buffers     cached\r\n           768        558        209          0          0         20\r\n\r\nThis suggests that 512MB was used.\r\nI am not sure what I am doing wrong. I also tried setting JAVA_OPTS but that did not work either.\r\n\r\nI am on CentOS 6 with JDK7 and Apache Tomcat 7.\r\n\r\n**EDIT 1**: Here are the results if I set the -Xmx values to 128 and 64 respectively\r\n\r\n           total       used       free     shared    buffers     cached\r\n           768        432        335          0          0         39\r\n\r\nand\r\n\r\n           total       used       free     shared    buffers     cached\r\n           768        366        401          0          0         32\r\n\r\nLooks like the -Xms setting has no effect at all and approx 250MB over and above the value of the -Xmx setting is being used.\r\n\r\nThis is rather hard to explain. It is a plain vanilla Tomcat 7 installation with no webapps installed (other than the default ones). Surely they don&#39;t take 250 MB, do they?\r\n","title":"Tomcat 7 - cannot get CATALINA_OPTS heap size to work","body":"<p>I am setting CATALINA_OPTS in catalina.sh but strangely this value seems to be ignored. I am on a machine with 768M RAM. Here are the steps to reproduce</p>\n\n<p>I check the memory before starting Tomcat by running <code>free -m</code>. I get the following</p>\n\n<pre><code>    total       used       free     shared    buffers     cached\n    768         43        724          0          0         16\n</code></pre>\n\n<p>I have set the CATALINA_OPTS in the first line of catalina.sh like so: </p>\n\n<pre><code>export CATALINA_OPTS=\"-Xms64M -Xmx256M\"\n</code></pre>\n\n<p>I then start Tomcat using <code>./startup.sh</code></p>\n\n<p>I check that Tomcat took the arguments by doing a <code>ps aux | grep tomcat</code> . I get the following result which seems to indicate that the setting was read</p>\n\n<blockquote>\n  <p>root      1164 26.0  6.2 1232968 49116 pts/0   Sl   10:30   0:01\n  /usr/bin/java\n  -Djava.util.logging.config.file=/usr/share/apache-tomcat-7.0.39/conf/logging.properties\n  -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager <strong>-Xms64M -Xmx256M</strong> -Djava.endorsed.dirs=/usr/share/apache-tomcat-7.0.39/endorsed -classpath /usr/share/apache-tomcat-7.0.39/bin/bootstrap.jar:/usr/share/apache-tomcat-7.0.39/bin/tomcat-juli.jar\n  -Dcatalina.base=/usr/share/apache-tomcat-7.0.39 -Dcatalina.home=/usr/share/apache-tomcat-7.0.39 -Djava.io.tmpdir=/usr/share/apache-tomcat-7.0.39/temp org.apache.catalina.startup.Bootstrap start</p>\n</blockquote>\n\n<p>I again run <code>free -m</code> but I get </p>\n\n<pre><code>       total       used       free     shared    buffers     cached\n       768        558        209          0          0         20\n</code></pre>\n\n<p>This suggests that 512MB was used.\nI am not sure what I am doing wrong. I also tried setting JAVA_OPTS but that did not work either.</p>\n\n<p>I am on CentOS 6 with JDK7 and Apache Tomcat 7.</p>\n\n<p><strong>EDIT 1</strong>: Here are the results if I set the -Xmx values to 128 and 64 respectively</p>\n\n<pre><code>       total       used       free     shared    buffers     cached\n       768        432        335          0          0         39\n</code></pre>\n\n<p>and</p>\n\n<pre><code>       total       used       free     shared    buffers     cached\n       768        366        401          0          0         32\n</code></pre>\n\n<p>Looks like the -Xms setting has no effect at all and approx 250MB over and above the value of the -Xmx setting is being used.</p>\n\n<p>This is rather hard to explain. It is a plain vanilla Tomcat 7 installation with no webapps installed (other than the default ones). Surely they don't take 250 MB, do they?</p>\n"},{"tags":["java","jsp","tomcat","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1380827183,"creation_date":1380826853,"answer_id":19167113,"question_id":19166976,"body_markdown":"JSP requests implicitly creates the HTTP session. You&#39;re not maintaining the HTTP session in your HTTP client and therefore a whole new HTTP session is created on every request. Those sessions have an expire time of by default 30 minutes. Apparently all those requests were fired within 30 minutes.\r\n\r\nYou would face exactly the same problem in a servlet when you do `request.getSession()` in the servlet method. \r\n\r\nIn order to &quot;fix&quot; this &quot;problem&quot; (which is unlikely to happen in real world; 282K concurrent HTTP sessions on a barebones Tomcat instance is on the other hand pretty respectable), either disable implicit creation of HTTP session in JSP:\r\n\r\n    &lt;%@page session=&quot;false&quot;&gt;\r\n\r\nor tell client to reuse the same HTTP session by maintaining the cookies by the following line *before* the `while` loop:\r\n\r\n    CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\r\n\r\nAn alternative is to decrease the session timeout so that the server gets the chance to reap them before it causes heap to overflow, e.g. to 5 minutes as follows in `web.xml`:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;session-config&gt;\r\n        &lt;session-timeout&gt;5&lt;/session-timeout&gt;\r\n    &lt;/session-config&gt;\r\n\r\nYou can implement a `HttpSessionListener` to track the HTTP session creation and destroy.","title":"Tomcat JSP requests consumes all of heap space","body":"<p>JSP requests implicitly creates the HTTP session. You're not maintaining the HTTP session in your HTTP client and therefore a whole new HTTP session is created on every request. Those sessions have an expire time of by default 30 minutes. Apparently all those requests were fired within 30 minutes.</p>\n\n<p>You would face exactly the same problem in a servlet when you do <code>request.getSession()</code> in the servlet method. </p>\n\n<p>In order to \"fix\" this \"problem\" (which is unlikely to happen in real world; 282K concurrent HTTP sessions on a barebones Tomcat instance is on the other hand pretty respectable), either disable implicit creation of HTTP session in JSP:</p>\n\n<pre><code>&lt;%@page session=\"false\"&gt;\n</code></pre>\n\n<p>or tell client to reuse the same HTTP session by maintaining the cookies by the following line <em>before</em> the <code>while</code> loop:</p>\n\n<pre><code>CookieHandler.setDefault(new CookieManager(null, CookiePolicy.ACCEPT_ALL));\n</code></pre>\n\n<p>An alternative is to decrease the session timeout so that the server gets the chance to reap them before it causes heap to overflow, e.g. to 5 minutes as follows in <code>web.xml</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;session-config&gt;\n    &lt;session-timeout&gt;5&lt;/session-timeout&gt;\n&lt;/session-config&gt;\n</code></pre>\n\n<p>You can implement a <code>HttpSessionListener</code> to track the HTTP session creation and destroy.</p>\n"}],"owner":{"account_id":102596,"reputation":1444,"user_id":275300,"accept_rate":81,"display_name":"schmimd04"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":978,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":19167113,"answer_count":1,"score":4,"last_activity_date":1639068585,"creation_date":1380826420,"question_id":19166976,"body_markdown":"I am in the process of trying to a memory leak in our Tomcat Java web application and thought I had found it when making repeated requests to one of our JSPs. However, after stripping it down to a single, empty JSP dropped into an out-of-the-box Tomcat 6.0.37 instance running on jdk1.6, I still see the same thing. \r\n\r\nI am starting Tomcat with a max heap size (-Xmx) of 256m, and the heap runs out of space after around 282,000 requests made by my test class below. \r\n\r\nFor comparison, I also created an HttpServlet that does the same thing as the JSP and modified my test client to call that instead, and that will run all day without running out of memory. \r\n\r\nI have started trying to analyze the heap to figure out what&#39;s going on here, but not really getting anywhere. Soooo, what&#39;s going on here??\r\n\r\n**Test JSP**\r\n\r\n    &lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;%@ page contentType=&quot;text/plain&quot;%&gt;\r\n    &lt;% System.out.println(&quot;Page requested: &quot; + new Date()); %&gt;\r\n    This is a test response\r\n\r\n**Java Test Client**\r\n\r\n    public static void main(String[] args) throws Exception {\r\n      int i=0;\r\n      while(true) {\r\n        java.net.URL url = new java.net.URL(&quot;http://localhost:8080/test.jsp&quot;);\r\n        InputStream is = url.openStream();\r\n        while(is.read() != -1) {\r\n          //nothing, just read the stream\r\n        }\r\n        is.close();\r\n        System.out.println(&quot;Requests made: &quot; + i++);\r\n      }\r\n    }\r\n\r\n","title":"Tomcat JSP requests consumes all of heap space","body":"<p>I am in the process of trying to a memory leak in our Tomcat Java web application and thought I had found it when making repeated requests to one of our JSPs. However, after stripping it down to a single, empty JSP dropped into an out-of-the-box Tomcat 6.0.37 instance running on jdk1.6, I still see the same thing. </p>\n\n<p>I am starting Tomcat with a max heap size (-Xmx) of 256m, and the heap runs out of space after around 282,000 requests made by my test class below. </p>\n\n<p>For comparison, I also created an HttpServlet that does the same thing as the JSP and modified my test client to call that instead, and that will run all day without running out of memory. </p>\n\n<p>I have started trying to analyze the heap to figure out what's going on here, but not really getting anywhere. Soooo, what's going on here??</p>\n\n<p><strong>Test JSP</strong></p>\n\n<pre><code>&lt;%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"ISO-8859-1\"%&gt;\n&lt;%@ page contentType=\"text/plain\"%&gt;\n&lt;% System.out.println(\"Page requested: \" + new Date()); %&gt;\nThis is a test response\n</code></pre>\n\n<p><strong>Java Test Client</strong></p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n  int i=0;\n  while(true) {\n    java.net.URL url = new java.net.URL(\"http://localhost:8080/test.jsp\");\n    InputStream is = url.openStream();\n    while(is.read() != -1) {\n      //nothing, just read the stream\n    }\n    is.close();\n    System.out.println(\"Requests made: \" + i++);\n  }\n}\n</code></pre>\n"},{"tags":["java","tomcat","configuration","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1388820171,"creation_date":1388802294,"answer_id":20916084,"question_id":20915745,"body_markdown":"If you are launching via the &quot;catalina.sh&quot; script (directly or indirectly), then you have two options:\r\n\r\n  - Modify (&quot;hack&quot;!) the script as suggested.\r\n\r\n  - Find where the script is being invoked, and ensuring that `CATALINA_OPTS` is set to include the &quot;-mx&quot; option ... and exported ...\r\n\r\nThe latter is probably &quot;cleaner&quot;, but there is no simple, one-size-fits-all way to get that variable set and exported.  If you are launching Tomcat as a service, it depends on how your distro has wrapped Tomcat.\r\n\r\n&gt; [Am I] just making a mountain out of a molehill?\r\n\r\nIt depends.  If you are just doing this on a non-production platform, then Yes.  If you are trying to build a production system that will continue to work over package upgrades and upgrades in your distro version, then No.  (In the latter case, it is worth figuring out the best way to do this *for your particular distro*.)","title":"Set Java / Tomcat heap size (Xmx) without modifying catalina.sh","body":"<p>If you are launching via the \"catalina.sh\" script (directly or indirectly), then you have two options:</p>\n\n<ul>\n<li><p>Modify (\"hack\"!) the script as suggested.</p></li>\n<li><p>Find where the script is being invoked, and ensuring that <code>CATALINA_OPTS</code> is set to include the \"-mx\" option ... and exported ...</p></li>\n</ul>\n\n<p>The latter is probably \"cleaner\", but there is no simple, one-size-fits-all way to get that variable set and exported.  If you are launching Tomcat as a service, it depends on how your distro has wrapped Tomcat.</p>\n\n<blockquote>\n  <p>[Am I] just making a mountain out of a molehill?</p>\n</blockquote>\n\n<p>It depends.  If you are just doing this on a non-production platform, then Yes.  If you are trying to build a production system that will continue to work over package upgrades and upgrades in your distro version, then No.  (In the latter case, it is worth figuring out the best way to do this <em>for your particular distro</em>.)</p>\n"},{"tags":[],"owner":{"account_id":1985389,"reputation":631,"user_id":1780772,"accept_rate":80,"display_name":"Parvez"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1392612142,"creation_date":1392612142,"answer_id":21820916,"question_id":20915745,"body_markdown":"Tomcat reads `setenv.sh` from bin directory for these extra settings. `setenv.sh` doesn&#39;t come with tomcat but you can create one for you and set CATALINA_OPTS in that. \r\n\r\nUsing JAVA_OPTS to set memory is not suggested by [Tomcat][1] because it applies to both startup and shutdown.\r\n\r\n\r\n  [1]: http://tomcat.apache.org/tomcat-6.0-doc/RUNNING.txt","title":"Set Java / Tomcat heap size (Xmx) without modifying catalina.sh","body":"<p>Tomcat reads <code>setenv.sh</code> from bin directory for these extra settings. <code>setenv.sh</code> doesn't come with tomcat but you can create one for you and set CATALINA_OPTS in that. </p>\n\n<p>Using JAVA_OPTS to set memory is not suggested by <a href=\"http://tomcat.apache.org/tomcat-6.0-doc/RUNNING.txt\">Tomcat</a> because it applies to both startup and shutdown.</p>\n"},{"tags":[],"owner":{"account_id":371109,"reputation":1068,"user_id":1384545,"accept_rate":0,"display_name":"Harlin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605237400,"creation_date":1605237400,"answer_id":64814981,"question_id":20915745,"body_markdown":"For clarity: I used this in a setenv.sh script that goes in tomcat/bin. I can verify that it works for Ansible or my own install scripts: \r\n\r\n    CATALINA_OPTS=&quot;$CATALINA_OPTS -server -Xms512m -Xmx2048m&quot; \r\n\r\nNote that this worked for Tomcat 8 but should work for Tomcat 7 too.","title":"Set Java / Tomcat heap size (Xmx) without modifying catalina.sh","body":"<p>For clarity: I used this in a setenv.sh script that goes in tomcat/bin. I can verify that it works for Ansible or my own install scripts:</p>\n<pre><code>CATALINA_OPTS=&quot;$CATALINA_OPTS -server -Xms512m -Xmx2048m&quot; \n</code></pre>\n<p>Note that this worked for Tomcat 8 but should work for Tomcat 7 too.</p>\n"}],"owner":{"account_id":35361,"reputation":4702,"user_id":100134,"accept_rate":100,"display_name":"geerlingguy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6766,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":20916084,"answer_count":3,"score":1,"last_activity_date":1639068566,"creation_date":1388799514,"question_id":20915745,"body_markdown":"Most people seem to suggest setting the Java/Tomcat heap memory size for Tomcat6 by editing the /usr/share/tomcat6/bin/catalina.sh file, and adding something like:\r\n\r\n    # Set specific memory requirements for Tomcat6 (for server with ~512MB RAM).\r\n    CATALINA_OPTS=&quot;$CATALINA_OPTS -server -Xms128m -Xmx256m&quot;\r\n\r\nI am trying to build an Ansible playbook to configure a Tomcat-based server on Ubuntu, and it doesn&#39;t seem to me like having an entire custom catalina.sh file would be idealis there some other configuration file or local settings file/system used by Tomcat and/or Java to get the `Xms` and `Xmx` values?\r\n\r\nOr... do most people use a custom catalina.sh file, and I&#39;m just making a mountain out of a molehill?","title":"Set Java / Tomcat heap size (Xmx) without modifying catalina.sh","body":"<p>Most people seem to suggest setting the Java/Tomcat heap memory size for Tomcat6 by editing the /usr/share/tomcat6/bin/catalina.sh file, and adding something like:</p>\n\n<pre><code># Set specific memory requirements for Tomcat6 (for server with ~512MB RAM).\nCATALINA_OPTS=\"$CATALINA_OPTS -server -Xms128m -Xmx256m\"\n</code></pre>\n\n<p>I am trying to build an Ansible playbook to configure a Tomcat-based server on Ubuntu, and it doesn't seem to me like having an entire custom catalina.sh file would be idealis there some other configuration file or local settings file/system used by Tomcat and/or Java to get the <code>Xms</code> and <code>Xmx</code> values?</p>\n\n<p>Or... do most people use a custom catalina.sh file, and I'm just making a mountain out of a molehill?</p>\n"},{"tags":["java","tomcat","heap-memory","war","jruby"],"comments":[{"owner":{"account_id":3375408,"reputation":1561,"user_id":2833622,"accept_rate":20,"display_name":"Altmish-E-Azam"},"score":0,"creation_date":1415194970,"post_id":26758641,"comment_id":42098820,"body_markdown":"What is size of war file?","body":"What is size of war file?"},{"owner":{"account_id":3449896,"reputation":389,"user_id":2889776,"accept_rate":100,"display_name":"dot_Sp0T"},"score":1,"creation_date":1415195058,"post_id":26758641,"comment_id":42098861,"body_markdown":"Or rather what is the size of your heap? It seems that  you&#39;ve allocated too little memory to the jvm..","body":"Or rather what is the size of your heap? It seems that  you&#39;ve allocated too little memory to the jvm.."}],"answers":[{"tags":[],"owner":{"account_id":1769203,"reputation":8965,"user_id":1614378,"accept_rate":55,"display_name":"devops"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415253271,"creation_date":1415195873,"answer_id":26758997,"question_id":26758641,"body_markdown":"In my case it happens if Im deploying my application **without restarting tomcat**. I think GC (garbage-collector) has some problems to free the allocated memory.\r\n\r\nMy workaround is:\r\n\r\n - Just remove the war file\r\n - wait some time till your application folder is removed by tomcat\r\n - stop the server\r\n - upload the war file\r\n - and finally start your tomcat instance again.","title":"java.lang.OutOfMemoryError: Java heap space deploying .war on Tomcat 7","body":"<p>In my case it happens if Im deploying my application <strong>without restarting tomcat</strong>. I think GC (garbage-collector) has some problems to free the allocated memory.</p>\n\n<p>My workaround is:</p>\n\n<ul>\n<li>Just remove the war file</li>\n<li>wait some time till your application folder is removed by tomcat</li>\n<li>stop the server</li>\n<li>upload the war file</li>\n<li>and finally start your tomcat instance again.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":205515,"reputation":7106,"user_id":454312,"display_name":"kares"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415254943,"creation_date":1415254943,"answer_id":26772984,"question_id":26758641,"body_markdown":"this is common in the Java world and actually still might affect JRuby ... although hot-deploys are much smoother these days if you&#39;re on latest &gt;= 1.7.15 and using jruby-openssl &gt;= 0.9.5. but there still might be gems/libraries that will impose issues reloading and thus will leak memory (one such library is `require &#39;timeout&#39;`) so you&#39;ll need to review the heap dump for leak candidates. also Tomcat usually prints useful hints related to &quot;potential&quot; leak candidates during un/re-deploys.\r\n\r\nnow, there are things to make sure. if you&#39;re on Java 6 you need to use the concurrent (mark-and-sweep) GC as others do not swap the heap space and it&#39;s not the default, even so you will need to increase the heap size if you&#39;re planning hot-reloads since it needs to be able to hold twice your application&#39;s (Java) classes.","title":"java.lang.OutOfMemoryError: Java heap space deploying .war on Tomcat 7","body":"<p>this is common in the Java world and actually still might affect JRuby ... although hot-deploys are much smoother these days if you're on latest >= 1.7.15 and using jruby-openssl >= 0.9.5. but there still might be gems/libraries that will impose issues reloading and thus will leak memory (one such library is <code>require 'timeout'</code>) so you'll need to review the heap dump for leak candidates. also Tomcat usually prints useful hints related to \"potential\" leak candidates during un/re-deploys.</p>\n\n<p>now, there are things to make sure. if you're on Java 6 you need to use the concurrent (mark-and-sweep) GC as others do not swap the heap space and it's not the default, even so you will need to increase the heap size if you're planning hot-reloads since it needs to be able to hold twice your application's (Java) classes.</p>\n"},{"tags":[],"owner":{"account_id":2326040,"reputation":645,"user_id":2040540,"accept_rate":62,"display_name":"sanigo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1415255299,"creation_date":1415255299,"answer_id":26773061,"question_id":26758641,"body_markdown":"Increase the heap size is a must. You could create or edit the $CATALINA_HOME/bin/setenv.sh, add the line:\r\n\r\n    JAVA_OPTS=&quot;-Xms1024m -Xmx2048m&quot;\r\n\r\nAnd then restart tomcat. I think it is better to unpack the war file and copy it to $CATALINA_HOME/webapps, and furthermore, using hot-deploy in production is not a good idea.","title":"java.lang.OutOfMemoryError: Java heap space deploying .war on Tomcat 7","body":"<p>Increase the heap size is a must. You could create or edit the $CATALINA_HOME/bin/setenv.sh, add the line:</p>\n\n<pre><code>JAVA_OPTS=\"-Xms1024m -Xmx2048m\"\n</code></pre>\n\n<p>And then restart tomcat. I think it is better to unpack the war file and copy it to $CATALINA_HOME/webapps, and furthermore, using hot-deploy in production is not a good idea.</p>\n"}],"owner":{"account_id":2325240,"reputation":15,"user_id":2039907,"accept_rate":50,"display_name":"user2039907"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7082,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":26773061,"answer_count":3,"score":0,"last_activity_date":1639068553,"creation_date":1415194807,"question_id":26758641,"body_markdown":"Getting below error when running the war file in tomcat7 (Ubuntu):\r\n\r\n    Exception in thread &quot;http-bio-8080-AsyncTimeout&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.util.concurrent.ConcurrentLinkedQueue.iterator(ConcurrentLinkedQueue.java:667)\r\n    \tat org.apache.tomcat.util.net.JIoEndpoint$AsyncTimeout.run(JIoEndpoint.java:156)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nI am getting above exception when I have put my app.war file in webapps path.\r\n","title":"java.lang.OutOfMemoryError: Java heap space deploying .war on Tomcat 7","body":"<p>Getting below error when running the war file in tomcat7 (Ubuntu):</p>\n\n<pre><code>Exception in thread \"http-bio-8080-AsyncTimeout\" java.lang.OutOfMemoryError: Java heap space\n    at java.util.concurrent.ConcurrentLinkedQueue.iterator(ConcurrentLinkedQueue.java:667)\n    at org.apache.tomcat.util.net.JIoEndpoint$AsyncTimeout.run(JIoEndpoint.java:156)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>I am getting above exception when I have put my app.war file in webapps path.</p>\n"},{"tags":["java","tomcat","heap-memory"],"comments":[{"owner":{"display_name":"user3778137"},"score":0,"creation_date":1491199924,"post_id":43177466,"comment_id":73428557,"body_markdown":"`-Xmx5120` should be `Xmx5120m`","body":"<code>-Xmx5120</code> should be <code>Xmx5120m</code>"}],"answers":[{"tags":[],"owner":{"account_id":980385,"reputation":11895,"user_id":1000254,"accept_rate":92,"display_name":"shizhz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1491202051,"creation_date":1491202051,"answer_id":43178138,"question_id":43177466,"body_markdown":"Problems in your config:\r\n&gt; -Xms1536m -Xmx5120 \r\n\r\nIf you don&#39;t specify the unit of this config, it will be parsed as `bytes`,  which means your `Xmx` is less than your `Xms`, if this config applies JVM will failed to launch:\r\n\r\n     ~/ java -Xms1536m -Xmx5120 -XX:+PrintFlagsFinal -version\r\n    Error occurred during initialization of VM\r\n    Initial heap size set to a larger value than the maximum heap size\r\n\r\nYour JVM did not aborted because you have following configs:\r\n\r\n&gt; -XX:InitialHeapSize=2570m -XX:MaxHeapSize=2570m\r\n\r\n`-Xms` is `-XX:InitialHeapSize` and `-Xmx` is `-XX:MaxHeapSize`, so your previous wrong config of `-Xms1536m -Xmx5120` is replaced by the later ones, which specified `Xmx` to be 2570M.","title":"Java 8 - Xmx and XX:MaxHeapSize do not match","body":"<p>Problems in your config:</p>\n\n<blockquote>\n  <p>-Xms1536m -Xmx5120 </p>\n</blockquote>\n\n<p>If you don't specify the unit of this config, it will be parsed as <code>bytes</code>,  which means your <code>Xmx</code> is less than your <code>Xms</code>, if this config applies JVM will failed to launch:</p>\n\n<pre><code> ~/ java -Xms1536m -Xmx5120 -XX:+PrintFlagsFinal -version\nError occurred during initialization of VM\nInitial heap size set to a larger value than the maximum heap size\n</code></pre>\n\n<p>Your JVM did not aborted because you have following configs:</p>\n\n<blockquote>\n  <p>-XX:InitialHeapSize=2570m -XX:MaxHeapSize=2570m</p>\n</blockquote>\n\n<p><code>-Xms</code> is <code>-XX:InitialHeapSize</code> and <code>-Xmx</code> is <code>-XX:MaxHeapSize</code>, so your previous wrong config of <code>-Xms1536m -Xmx5120</code> is replaced by the later ones, which specified <code>Xmx</code> to be 2570M.</p>\n"},{"tags":[],"owner":{"account_id":3971227,"reputation":8507,"user_id":3275788,"display_name":"wumpz"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1491205849,"creation_date":1491205849,"answer_id":43179250,"question_id":43177466,"body_markdown":"&gt; The -Xmx option is equivalent to -XX:MaxHeapSize.\r\n\r\n(https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html)\r\n\r\nSo `-Xmx5120` means **5120 Bytes** but is superseeded by `-XX:MaxHeapSize=2570m`. That is the reason you are stuck by this. \r\n\r\nJust provide only one of these settings and choose the proper value, e.g.\r\n\r\n    -Xmx5120m","title":"Java 8 - Xmx and XX:MaxHeapSize do not match","body":"<blockquote>\n  <p>The -Xmx option is equivalent to -XX:MaxHeapSize.</p>\n</blockquote>\n\n<p>(<a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/tools/unix/java.html</a>)</p>\n\n<p>So <code>-Xmx5120</code> means <strong>5120 Bytes</strong> but is superseeded by <code>-XX:MaxHeapSize=2570m</code>. That is the reason you are stuck by this. </p>\n\n<p>Just provide only one of these settings and choose the proper value, e.g.</p>\n\n<pre><code>-Xmx5120m\n</code></pre>\n"}],"owner":{"account_id":2227579,"reputation":161,"user_id":1965971,"display_name":"ankit.ag.in"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48981,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1639068533,"creation_date":1491199207,"question_id":43177466,"body_markdown":"I have set the Xmx parameter for JVM to 5120 but when the java process(tomcat) runs, I see that the MaxHeapSize does not match the Xmx value, it is stuck at 2570, which is strange to me, any thoughts on this are much appreciated!!\r\n\r\nOutput of ps:\r\n&gt;/usr/bin/java -Dnop -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms1536m -Xmx5120 -Dorg.apache.catalina.STRICT_SERVLET_COMPLIANCE=true -Djava.net.preferIPv4Stack=true -DSHUTDOWN_PORT=8005 -DHTTP_PORT=8080 -DHTTPS_PORT=8443 -DAJP_PORT=8009 -XX:InitialHeapSize=2570m -XX:MaxHeapSize=2570m -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=512m -XX:+DisableExplicitGC -Djava.endorsed.dirs=/usr/local/tomcat/endorsed -classpath /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/app/tomcat/default -Dcatalina.home=/usr/local/tomcat -Djava.io.tmpdir=/app/tomcat/default/temp org.apache.catalina.","title":"Java 8 - Xmx and XX:MaxHeapSize do not match","body":"<p>I have set the Xmx parameter for JVM to 5120 but when the java process(tomcat) runs, I see that the MaxHeapSize does not match the Xmx value, it is stuck at 2570, which is strange to me, any thoughts on this are much appreciated!!</p>\n\n<p>Output of ps:</p>\n\n<blockquote>\n  <p>/usr/bin/java -Dnop -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms1536m -Xmx5120 -Dorg.apache.catalina.STRICT_SERVLET_COMPLIANCE=true -Djava.net.preferIPv4Stack=true -DSHUTDOWN_PORT=8005 -DHTTP_PORT=8080 -DHTTPS_PORT=8443 -DAJP_PORT=8009 -XX:InitialHeapSize=2570m -XX:MaxHeapSize=2570m -XX:MetaspaceSize=256m -XX:MaxMetaspaceSize=512m -XX:+DisableExplicitGC -Djava.endorsed.dirs=/usr/local/tomcat/endorsed -classpath /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/app/tomcat/default -Dcatalina.home=/usr/local/tomcat -Djava.io.tmpdir=/app/tomcat/default/temp org.apache.catalina.</p>\n</blockquote>\n"},{"tags":["java","tomcat","heap-memory"],"comments":[{"owner":{"account_id":1432415,"reputation":10687,"user_id":1354537,"accept_rate":83,"display_name":"Marged"},"score":0,"creation_date":1569337773,"post_id":58083268,"comment_id":102560693,"body_markdown":"First of all you should check if the memory consumption can be explained or if it happens due to an error. There are tools for examining heap dumps","body":"First of all you should check if the memory consumption can be explained or if it happens due to an error. There are tools for examining heap dumps"},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1569344041,"post_id":58083268,"comment_id":102563837,"body_markdown":"Test apps one at a time. Logs could have good info too.","body":"Test apps one at a time. Logs could have good info too."}],"owner":{"account_id":16758472,"reputation":31,"user_id":12113866,"display_name":"nicolasAR1995"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":404,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639068520,"creation_date":1569337522,"question_id":58083268,"body_markdown":"I have a **Tomcat 8.5** installed on a **Linux virtual machine** with **16 GB RAM**.\r\n\r\nThey are **four webapps** loaded in the server (three of them are **Spring Boot Apps**). *One of those apps create large PDF and Excel reports (with Jasper Reports) and also executes scheduled task with &#39;medium-heavy&#39; processing at every hour.*\r\n\r\nI had a lot of **OutOfMemoryException** *(java heap space)*, so i updated the Tomcat configuration. This is my current jvm heap configuration *(/tomcat_dir/bin/setenv.sh)*:\r\n\r\n    -Xms2048m\r\n    -Xmx2048m\r\n    -XX:MaxPermSize=256m\r\n\r\n\r\nAfter a while, **a new OutOfMemoryException ocurred** *(this time GC overhead limit exceeded)*. So, i tried with this configuration:\r\n\r\n    -Xms8192m\r\n    -Xmx8192m\r\n    -XX:MaxPermSize=2048m\r\n\r\n**The Spring Boot applications started OK, but after a while (15-30 minutes, one &#39;heavy-medium&#39; scheduled task exectuion) it collapsed roundly**: *for example, datasource connections and queries crashed and extrange ssl exceptions ocurred (Could not generate DH keypair).*\r\n\r\n**I am a bit confused about the JVM Heap managment, so my question is:\r\nit was a bad idea to assign 8 GB of heap size? Why? What configuration do you recomend?**\r\n\r\nIf you need more information, please let me know.\r\n\r\nHave a nice day.\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Java Heap Memory Settings for Tomcat 8.5 and possibles consequences","body":"<p>I have a <strong>Tomcat 8.5</strong> installed on a <strong>Linux virtual machine</strong> with <strong>16 GB RAM</strong>.</p>\n\n<p>They are <strong>four webapps</strong> loaded in the server (three of them are <strong>Spring Boot Apps</strong>). <em>One of those apps create large PDF and Excel reports (with Jasper Reports) and also executes scheduled task with 'medium-heavy' processing at every hour.</em></p>\n\n<p>I had a lot of <strong>OutOfMemoryException</strong> <em>(java heap space)</em>, so i updated the Tomcat configuration. This is my current jvm heap configuration <em>(/tomcat_dir/bin/setenv.sh)</em>:</p>\n\n<pre><code>-Xms2048m\n-Xmx2048m\n-XX:MaxPermSize=256m\n</code></pre>\n\n<p>After a while, <strong>a new OutOfMemoryException ocurred</strong> <em>(this time GC overhead limit exceeded)</em>. So, i tried with this configuration:</p>\n\n<pre><code>-Xms8192m\n-Xmx8192m\n-XX:MaxPermSize=2048m\n</code></pre>\n\n<p><strong>The Spring Boot applications started OK, but after a while (15-30 minutes, one 'heavy-medium' scheduled task exectuion) it collapsed roundly</strong>: <em>for example, datasource connections and queries crashed and extrange ssl exceptions ocurred (Could not generate DH keypair).</em></p>\n\n<p><strong>I am a bit confused about the JVM Heap managment, so my question is:\nit was a bad idea to assign 8 GB of heap size? Why? What configuration do you recomend?</strong></p>\n\n<p>If you need more information, please let me know.</p>\n\n<p>Have a nice day.</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":70088,"reputation":12426,"user_id":203600,"accept_rate":100,"display_name":"Jonathon Faust"},"score":6,"creation_date":1297796667,"post_id":5008255,"comment_id":5597924,"body_markdown":"Impossible to say without seeing the code.","body":"Impossible to say without seeing the code."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1297796784,"post_id":5008255,"comment_id":5597951,"body_markdown":"By the way, `double` is only 8 bytes long but this is largely irrelevant while we can&#39;t see the code.","body":"By the way, <code>double</code> is only 8 bytes long but this is largely irrelevant while we can&#39;t see the code."},{"owner":{"account_id":79673,"reputation":40911,"user_id":225757,"accept_rate":72,"display_name":"Roland Illig"},"score":0,"creation_date":1297796803,"post_id":5008255,"comment_id":5597959,"body_markdown":"We are missing the source code. From your description alone it looks as if 128 MB should well be enough. Do you have problems with loading the data, or with later processing?","body":"We are missing the source code. From your description alone it looks as if 128 MB should well be enough. Do you have problems with loading the data, or with later processing?"},{"owner":{"account_id":79673,"reputation":40911,"user_id":225757,"accept_rate":72,"display_name":"Roland Illig"},"score":0,"creation_date":1297796881,"post_id":5008255,"comment_id":5597980,"body_markdown":"@biziclop: Maybe Andy is using a `java.lang.Double` in a `Vector&lt;Double&gt;`. Then the 16 bytes would be correct for a HotSpot Java VM in 32-bit mode.","body":"@biziclop: Maybe Andy is using a <code>java.lang.Double</code> in a <code>Vector&lt;Double&gt;</code>. Then the 16 bytes would be correct for a HotSpot Java VM in 32-bit mode."},{"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"score":0,"creation_date":1297796970,"post_id":5008255,"comment_id":5597996,"body_markdown":"I guess it is 16bytes because of 64bit? Or he is wrong.","body":"I guess it is 16bytes because of 64bit? Or he is wrong."},{"owner":{"account_id":307214,"reputation":328,"user_id":618390,"accept_rate":71,"display_name":"Andy"},"score":0,"creation_date":1297797139,"post_id":5008255,"comment_id":5598050,"body_markdown":"Hello everybody, thank you for your answers. Unfortunately, I am not able to post the source code since I am under license agreement with another academic institution and it is not yet released publicly. What I am doing is actually reading in all these vectors from another file - I am basically reading a vector as a string and writing as a string...","body":"Hello everybody, thank you for your answers. Unfortunately, I am not able to post the source code since I am under license agreement with another academic institution and it is not yet released publicly. What I am doing is actually reading in all these vectors from another file - I am basically reading a vector as a string and writing as a string..."},{"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1297797207,"post_id":5008255,"comment_id":5598070,"body_markdown":"Please post the java command line parameter, because 1GB should be enough neverless if you use Double or double (or...) - so I guess that the problem is may not the code but the fact that the paramter to increase the heap does not work.","body":"Please post the java command line parameter, because 1GB should be enough neverless if you use Double or double (or...) - so I guess that the problem is may not the code but the fact that the paramter to increase the heap does not work."},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1297797403,"post_id":5008255,"comment_id":5598129,"body_markdown":"@Andy In that case, don&#39;t send the source, but create a similar problem from the scratch to isolate the problem so we can see what your&#39;re doing wrong. The stacktrace is also relevant here, probably you&#39;ve got an infinite loop?","body":"@Andy In that case, don&#39;t send the source, but create a similar problem from the scratch to isolate the problem so we can see what your&#39;re doing wrong. The stacktrace is also relevant here, probably you&#39;ve got an infinite loop?"},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1297797447,"post_id":5008255,"comment_id":5598141,"body_markdown":"@Roland, if he&#39;s using `Vector&lt;Double&gt;` the the wrapper should be taken into account. `double[]` would be better perhaps.","body":"@Roland, if he&#39;s using <code>Vector&lt;Double&gt;</code> the the wrapper should be taken into account. <code>double[]</code> would be better perhaps."},{"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":0,"creation_date":1297797458,"post_id":5008255,"comment_id":5598144,"body_markdown":"Where are you going wrong with the size estimation?  Internally a double is 8 bytes, but when you write it as a string to a text file, this could be 3 bytes (for &quot;0.0&quot;) or many many bytes (for an irrational number, e.g.) depending on the format, character set, etc.  If most of your values are zero and you&#39;re using a compressed encoding like UTF-8, the text file will be smaller than storing it in memory as doubles.","body":"Where are you going wrong with the size estimation?  Internally a double is 8 bytes, but when you write it as a string to a text file, this could be 3 bytes (for &quot;0.0&quot;) or many many bytes (for an irrational number, e.g.) depending on the format, character set, etc.  If most of your values are zero and you&#39;re using a compressed encoding like UTF-8, the text file will be smaller than storing it in memory as doubles."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1297797476,"post_id":5008255,"comment_id":5598149,"body_markdown":"@Roland Illig In that case it could be even more, as an `Object` header structure is typically larger than 32 bits. In any case, using a `double []` is definitely more memory-efficient than using a `Vector&lt;Double&gt;`.","body":"@Roland Illig In that case it could be even more, as an <code>Object</code> header structure is typically larger than 32 bits. In any case, using a <code>double []</code> is definitely more memory-efficient than using a <code>Vector&lt;Double&gt;</code>."},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1297797583,"post_id":5008255,"comment_id":5598173,"body_markdown":"@Mark, let&#39;s hope he&#39;s not reading the whole file before processing. But without the source this is impossible to answer. Voting to close as &quot;can&#39;t read your mind&quot;","body":"@Mark, let&#39;s hope he&#39;s not reading the whole file before processing. But without the source this is impossible to answer. Voting to close as &quot;can&#39;t read your mind&quot;"},{"owner":{"account_id":307214,"reputation":328,"user_id":618390,"accept_rate":71,"display_name":"Andy"},"score":0,"creation_date":1297800342,"post_id":5008255,"comment_id":5598786,"body_markdown":"The command line I am using reads: ./jre1.6.0_24/bin/java -Xmx5g -jar regression.jar &lt;other parameters for the algorithm&gt;.","body":"The command line I am using reads: ./jre1.6.0_24/bin/java -Xmx5g -jar regression.jar &lt;other parameters for the algorithm&gt;."},{"owner":{"account_id":307214,"reputation":328,"user_id":618390,"accept_rate":71,"display_name":"Andy"},"score":0,"creation_date":1297800391,"post_id":5008255,"comment_id":5598792,"body_markdown":"&quot; but create a similar problem from the scratch to isolate the problem so we can see what your&#39;re doing wrong&quot; - not sure what does this mean?","body":"&quot; but create a similar problem from the scratch to isolate the problem so we can see what your&#39;re doing wrong&quot; - not sure what does this mean?"},{"owner":{"account_id":79673,"reputation":40911,"user_id":225757,"accept_rate":72,"display_name":"Roland Illig"},"score":0,"creation_date":1297807837,"post_id":5008255,"comment_id":5600510,"body_markdown":"@Andy: Show us a simple code that reads a file into memory. The file format should be the same as you described in your posting. That code should work similar to your actual code, so we can see how you try to solve the problem.","body":"@Andy: Show us a simple code that reads a file into memory. The file format should be the same as you described in your posting. That code should work similar to your actual code, so we can see how you try to solve the problem."}],"answers":[{"tags":[],"owner":{"account_id":304225,"reputation":467,"user_id":613614,"accept_rate":75,"display_name":"Steven Fines"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297797057,"creation_date":1297797057,"answer_id":5008356,"question_id":5008255,"body_markdown":"Without seeing the code, I can&#39;t say for certain, but it sounds like you&#39;re over-allocating when you either a) read the data from the file or b) somewhere in your algorithm. I would advise that you use a tool such as visualVM to review your object allocation- it will be able to tell you how you&#39;re allocating and what mistakes you&#39;re making.\r\n\r\n","title":"Running out of memory while running Java code","body":"<p>Without seeing the code, I can't say for certain, but it sounds like you're over-allocating when you either a) read the data from the file or b) somewhere in your algorithm. I would advise that you use a tool such as visualVM to review your object allocation- it will be able to tell you how you're allocating and what mistakes you're making.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297797672,"creation_date":1297797672,"answer_id":5008469,"question_id":5008255,"body_markdown":"&gt; Now if I do the math, this should take\r\n&gt; up 10k X 16bytes X 250 space (assuming\r\n&gt; each vector entry is a double taking\r\n&gt; up 16bytes of space) which is ~40MB of\r\n&gt; space. However I see that the file\r\n&gt; size is shown as 9.8MB only. Am I\r\n&gt; going wrong somewhere?\r\n\r\nWhere you&#39;re going wrong is the assumption that every `double` takes 16 bytes of space when saved as text. You seem to have lots of 0 values, which take only 4 bytes in string form (including separator).\r\n\r\n&gt; Even when I run my code by allocating\r\n&gt; like 4GB of memory, I still run out of\r\n&gt; heap space. What am I missing?\r\n\r\nThat depends on your code. One reason might be that you&#39;re storing your data in an `ArrayList&lt;Double&gt;` or (worse) `TreeSet&lt;Double&gt;` - the `Double` wrapper objects will cause a memory overhead of easily 200% - and the Set/Map structures are much worse.","title":"Running out of memory while running Java code","body":"<blockquote>\n  <p>Now if I do the math, this should take\n  up 10k X 16bytes X 250 space (assuming\n  each vector entry is a double taking\n  up 16bytes of space) which is ~40MB of\n  space. However I see that the file\n  size is shown as 9.8MB only. Am I\n  going wrong somewhere?</p>\n</blockquote>\n\n<p>Where you're going wrong is the assumption that every <code>double</code> takes 16 bytes of space when saved as text. You seem to have lots of 0 values, which take only 4 bytes in string form (including separator).</p>\n\n<blockquote>\n  <p>Even when I run my code by allocating\n  like 4GB of memory, I still run out of\n  heap space. What am I missing?</p>\n</blockquote>\n\n<p>That depends on your code. One reason might be that you're storing your data in an <code>ArrayList&lt;Double&gt;</code> or (worse) <code>TreeSet&lt;Double&gt;</code> - the <code>Double</code> wrapper objects will cause a memory overhead of easily 200% - and the Set/Map structures are much worse.</p>\n"},{"tags":[],"owner":{"account_id":208843,"reputation":8250,"user_id":459579,"display_name":"ThomasRS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297797711,"creation_date":1297797711,"answer_id":5008477,"question_id":5008255,"body_markdown":"Hard to say without seeing the code and VM arguments. But note that variables in your algorithm also consume memory. And that file size vs memory usage depends on how you construct your in-memory objects, for example a simple object without a double takes up space on its own.\r\n\r\nGet a proper tool for benchmarking memory usage. Check out the [TPTP Eclipse distribution][1].\r\n\r\nAlso, do you might want to check out [sparce matrixes][2].\r\n\r\n  [1]: http://www.eclipse.org/tptp/\r\n  [2]: https://stackoverflow.com/questions/390181/sparse-matrices-arrays-in-java","title":"Running out of memory while running Java code","body":"<p>Hard to say without seeing the code and VM arguments. But note that variables in your algorithm also consume memory. And that file size vs memory usage depends on how you construct your in-memory objects, for example a simple object without a double takes up space on its own.</p>\n\n<p>Get a proper tool for benchmarking memory usage. Check out the <a href=\"http://www.eclipse.org/tptp/\" rel=\"nofollow noreferrer\">TPTP Eclipse distribution</a>.</p>\n\n<p>Also, do you might want to check out <a href=\"https://stackoverflow.com/questions/390181/sparse-matrices-arrays-in-java\">sparce matrixes</a>.</p>\n"},{"tags":[],"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297799603,"creation_date":1297797716,"answer_id":5008480,"question_id":5008255,"body_markdown":"If we can&#39;t see the code (which is fair enough), all I can say is to use the `-XX:+HeapDumpOnOutOfMemoryError` command line option when you start your application, then analyse the resulting heap dump with `jhat`.","title":"Running out of memory while running Java code","body":"<p>If we can't see the code (which is fair enough), all I can say is to use the <code>-XX:+HeapDumpOnOutOfMemoryError</code> command line option when you start your application, then analyse the resulting heap dump with <code>jhat</code>.</p>\n"},{"tags":[],"owner":{"account_id":104911,"reputation":119202,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1297801135,"creation_date":1297801135,"answer_id":5009035,"question_id":5008255,"body_markdown":"After so many people guessing about the size, I have done 3 simple test, and used the Eclipse Memory Analyzer to determine the size. (Win7, 1.6.0_21 Java HotSpot (TM) 64-Bit Server VM)\r\n\r\n * `double[][]` = Size: 19,2 MB Classes: 328 Objects: 2,7k \r\n * `Double[][] structure` = Size: 76,5 MB Classes: 332 Objects: 2,5m\r\n * `ArrayList&lt;ArrayList&lt;Double&gt;&gt;` = Size: 79,6 MB Classes: 330 Objects: 2,5m \r\n\r\n256MB (`java -Xmx256m Huge`) was enough to run the tests.\r\n\r\nSo I guess the problem is not the size, it could be two things:\r\n \r\n * there is a bug in the algorithm\r\n * the jvm does not run with 4GB\r\n\r\n\r\n---------------\r\nIf somebody is interessed in the code:\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class Huge {\r\n    \r\n        private static final int NUMBER_OF_VECTORS = 250;\r\n        private static final int VECTOR_SIZE = 10000;\r\n        \r\n        //Size: 19,2 MB Classes: 328 Objects: 2,7k \r\n        public static void doulbeArray() {\r\n    \r\n            double[][] structure = new double[NUMBER_OF_VECTORS][];\r\n            \r\n            for(int i = 0; i &lt; NUMBER_OF_VECTORS; i++) {\r\n                structure[i] = new double[VECTOR_SIZE];\r\n            }\r\n        }\r\n        \r\n        //Size: 76,5 MB Classes: 332 Objects: 2,5m\r\n        public static void doubleWrapperArray() {\r\n    \r\n            Double[][] structure = new Double[NUMBER_OF_VECTORS][];\r\n            \r\n            for(int i = 0; i &lt; NUMBER_OF_VECTORS; i++) {\r\n                structure[i] = new Double[VECTOR_SIZE];\r\n                for (int k = 0; k &lt; VECTOR_SIZE; k++) {\r\n                    structure[i][k] = Double.valueOf(Math.random());\r\n                }\r\n            }\r\n        }\r\n        \r\n        //Size: 79,6 MB Classes: 330 Objects: 2,5m \r\n        public static void list() {\r\n    \r\n            List&lt;List&lt;Double&gt;&gt; structure = new ArrayList&lt;List&lt;Double&gt;&gt;(); \r\n            \r\n            for(int i = 0; i &lt; NUMBER_OF_VECTORS; i++) {\r\n                List&lt;Double&gt; vector = new ArrayList&lt;Double&gt;();            \r\n                for (int k = 0; k &lt; VECTOR_SIZE; k++) {\r\n                    vector.add(Double.valueOf(Math.random()));\r\n                }\r\n                structure.add(vector);\r\n            }\r\n        }\r\n    }","title":"Running out of memory while running Java code","body":"<p>After so many people guessing about the size, I have done 3 simple test, and used the Eclipse Memory Analyzer to determine the size. (Win7, 1.6.0_21 Java HotSpot (TM) 64-Bit Server VM)</p>\n\n<ul>\n<li><code>double[][]</code> = Size: 19,2 MB Classes: 328 Objects: 2,7k </li>\n<li><code>Double[][] structure</code> = Size: 76,5 MB Classes: 332 Objects: 2,5m</li>\n<li><code>ArrayList&lt;ArrayList&lt;Double&gt;&gt;</code> = Size: 79,6 MB Classes: 330 Objects: 2,5m </li>\n</ul>\n\n<p>256MB (<code>java -Xmx256m Huge</code>) was enough to run the tests.</p>\n\n<p>So I guess the problem is not the size, it could be two things:</p>\n\n<ul>\n<li>there is a bug in the algorithm</li>\n<li>the jvm does not run with 4GB</li>\n</ul>\n\n<hr>\n\n<p>If somebody is interessed in the code:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class Huge {\n\n    private static final int NUMBER_OF_VECTORS = 250;\n    private static final int VECTOR_SIZE = 10000;\n\n    //Size: 19,2 MB Classes: 328 Objects: 2,7k \n    public static void doulbeArray() {\n\n        double[][] structure = new double[NUMBER_OF_VECTORS][];\n\n        for(int i = 0; i &lt; NUMBER_OF_VECTORS; i++) {\n            structure[i] = new double[VECTOR_SIZE];\n        }\n    }\n\n    //Size: 76,5 MB Classes: 332 Objects: 2,5m\n    public static void doubleWrapperArray() {\n\n        Double[][] structure = new Double[NUMBER_OF_VECTORS][];\n\n        for(int i = 0; i &lt; NUMBER_OF_VECTORS; i++) {\n            structure[i] = new Double[VECTOR_SIZE];\n            for (int k = 0; k &lt; VECTOR_SIZE; k++) {\n                structure[i][k] = Double.valueOf(Math.random());\n            }\n        }\n    }\n\n    //Size: 79,6 MB Classes: 330 Objects: 2,5m \n    public static void list() {\n\n        List&lt;List&lt;Double&gt;&gt; structure = new ArrayList&lt;List&lt;Double&gt;&gt;(); \n\n        for(int i = 0; i &lt; NUMBER_OF_VECTORS; i++) {\n            List&lt;Double&gt; vector = new ArrayList&lt;Double&gt;();            \n            for (int k = 0; k &lt; VECTOR_SIZE; k++) {\n                vector.add(Double.valueOf(Math.random()));\n            }\n            structure.add(vector);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":307214,"reputation":328,"user_id":618390,"accept_rate":71,"display_name":"Andy"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":5009035,"answer_count":5,"score":1,"last_activity_date":1639068372,"creation_date":1297796537,"question_id":5008255,"body_markdown":"I have a data set saved as a text file that basically contains a vectors stored line by line. My vector is 10k in dimensions and I have 250 such vectors. Each vector entry is a double. Here&#39;s an example: \r\n\r\nVector 1 -&gt; 0.0 0.0 0.0 0.439367 0.0 .....10k such entries  \r\n\r\nVector 2 -&gt; 0.0 0.0 0.0 0.439367 0.0 0.0 0.0 0.0 .....10k such entries\r\n\r\n...\r\n\r\n...\r\n\r\nVector 250 -&gt;  0.0 1.203973 0.0 0.0 0.0 .....10k such entries\r\n\r\nNow if I do the math, this should take up 10k X 16bytes X 250 space (assuming each vector entry is a double taking up 16bytes of space) which is ~40MB of space. However I see that the file size is shown as 9.8MB only. Am I going wrong somewhere?\r\n\r\nThe thing is I am using this data in my Java code. The space complexity of my algorithm is O(no of entries in the vector X no of entries). Even when I run my code by allocating like 4GB of memory, I still run out of heap space. What am I missing?\r\n\r\nThanks.\r\nAndy \r\n","title":"Running out of memory while running Java code","body":"<p>I have a data set saved as a text file that basically contains a vectors stored line by line. My vector is 10k in dimensions and I have 250 such vectors. Each vector entry is a double. Here's an example: </p>\n\n<p>Vector 1 -> 0.0 0.0 0.0 0.439367 0.0 .....10k such entries  </p>\n\n<p>Vector 2 -> 0.0 0.0 0.0 0.439367 0.0 0.0 0.0 0.0 .....10k such entries</p>\n\n<p>...</p>\n\n<p>...</p>\n\n<p>Vector 250 ->  0.0 1.203973 0.0 0.0 0.0 .....10k such entries</p>\n\n<p>Now if I do the math, this should take up 10k X 16bytes X 250 space (assuming each vector entry is a double taking up 16bytes of space) which is ~40MB of space. However I see that the file size is shown as 9.8MB only. Am I going wrong somewhere?</p>\n\n<p>The thing is I am using this data in my Java code. The space complexity of my algorithm is O(no of entries in the vector X no of entries). Even when I run my code by allocating like 4GB of memory, I still run out of heap space. What am I missing?</p>\n\n<p>Thanks.\nAndy </p>\n"},{"tags":["java","user-interface","heap-memory"],"comments":[{"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"score":0,"creation_date":1249398480,"post_id":1227980,"comment_id":1053405,"body_markdown":"Could you also code-format the latter part of your code in which you update the containing panel?","body":"Could you also code-format the latter part of your code in which you update the containing panel?"},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1249400140,"post_id":1227980,"comment_id":94070583,"body_markdown":"Attach with jvisualvm (in the Java 6 JDK) and see where your memory goes.","body":"Attach with jvisualvm (in the Java 6 JDK) and see where your memory goes."}],"answers":[{"tags":[],"owner":{"account_id":23612,"reputation":286,"user_id":59283,"accept_rate":25,"display_name":"Brother Logic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1249402551,"creation_date":1249402551,"answer_id":1228468,"question_id":1227980,"body_markdown":"It&#39;s almost impossible to read your code but I would wager that since the images are tied into the JPanels and you never properly dispose of the panels or images they&#39;re hanging around and that causes your error. I would also try to do everything inline so that instead of removing the whole panel and replacing it with a new one, you just delete the image from the panel and replace that with a new one.","title":"java gui changing picture causes heapspace error","body":"<p>It's almost impossible to read your code but I would wager that since the images are tied into the JPanels and you never properly dispose of the panels or images they're hanging around and that causes your error. I would also try to do everything inline so that instead of removing the whole panel and replacing it with a new one, you just delete the image from the panel and replace that with a new one.</p>\n"}],"owner":{"display_name":"pie154"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":378,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639068337,"creation_date":1249397603,"question_id":1227980,"body_markdown":"I have a java programme than when a button is clicked it updates the image on screen to the according image. this will work for the first 15 or so clicks then it causes a java heapspace error. I think it is because of the way I am updating the jpanel that contains the bufferedimage but not sure what the reason is. My code to get make the JPanel contain the new image is, \r\n\r\n    public class extraScreenPanel {\r\n\t\r\n\tstatic JPanel screenPanel = new JPanel(new BorderLayout()); \r\n\t\r\n    public static JPanel extraScreenPanel(int dispNum) \r\n    {\r\n    \tJLabel label = new JLabel(&quot;&quot; + dispNum + &quot;&quot;);\r\n    \tlabel.setPreferredSize(new Dimension(800, 600));\r\n    \t//label.setUI( new VerticalLabelUI(true) );\r\n    \tlabel.setVerticalAlignment( SwingConstants.TOP );\r\n    \tscreenPanel = imgDisp(dispNum);\r\n    \tlabel.setForeground(Color.white);\r\n\t\tlabel.setFont(new Font(&quot;Serif&quot;, Font.BOLD, 200));\r\n    \tscreenPanel.add(label, BorderLayout.PAGE_END );\r\n    \t\r\n    \treturn screenPanel;\r\n    }\r\n    \r\n  \r\n  \r\n    public static JPanel imgDisp(int picNum) {  \r\n       /* String url[] = new String[5000];\r\n        String part1;\r\n        url[0] = &quot;C:/PiPhotoPic/pic16.jpg&quot;;\r\n        for(Integer i=1;i&lt;5000;i++){\r\n        \tif(i&lt;10){part1 = &quot;C:/temp/new0000000&quot;;}\r\n    \t\telse if(i&lt;100){part1 = &quot;C:/temp/new000000&quot;;}\r\n    \t\telse if(i&lt;1000){part1 = &quot;C:/temp/new00000&quot;;}\r\n    \t\telse {part1 = &quot;C:/temp/new00000&quot;;}\r\n    \t\tString num = Integer.toString(i);\r\n        \turl[i]= part1 + num + &quot;.jpg&quot;;\r\n        }\r\n        if(picNum&lt;0){picNum=0;}\r\n        String ref = url[picNum];*/ //this code is just to get specific ref for image location\r\n        BufferedImage loadImg = loadImage(ref);  \r\n        JImagePanel panel = new JImagePanel(loadImg, 0, 0);  \r\n        panel.setPreferredSize(new Dimension(800, 600));\r\n        return panel;\r\n    }  \r\n    \r\n    \r\n\tpublic static class JImagePanel extends JPanel{  \r\n    \tprivate BufferedImage image;  \r\n    \tint x, y;  \r\n \t   public JImagePanel(BufferedImage image, int x, int y) {  \r\n\t        super();  \r\n\t        this.image = image;  \r\n\t        this.x = x;  \r\n\t        this.y = y;  \r\n\t    }  \r\n\t    @Override  \r\n\t    protected void paintComponent(Graphics g) {  \r\n \t       super.paintComponent(g);  \r\n\t        g.drawImage(image, x, y, null);  \r\n  \t   }  \r\n\t}  \r\n\r\n\r\n\tpublic static BufferedImage loadImage(String ref) {  \r\n        \tBufferedImage bimg = null;  \r\n        \ttry {  \r\n  \r\n          \t  bimg = javax.imageio.ImageIO.read(new File(ref));  \r\n       \t } catch (Exception e) {  \r\n       \t     e.printStackTrace();  \r\n       \t } \r\n       \t BufferedImage bimg2 = resize(bimg,800,600);\r\n       \t return bimg2;  \r\n   \t }  \r\n   \t \r\n   \t \r\n   \t public static BufferedImage resize(BufferedImage img, int newW, int newH) {  \r\n        int w = img.getWidth();  \r\n        int h = img.getHeight();  \r\n        BufferedImage dimg = dimg = new BufferedImage(newW, newH, img.getType());  \r\n        Graphics2D g = dimg.createGraphics();  \r\n        g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);  \r\n        g.drawImage(img, 0, 0, newW, newH, 0, 0, w, h, null);  \r\n        g.dispose();  \r\n        return dimg;  \r\n    }  \r\n   \t \r\n   \t \t \r\n}\r\n\r\nAnd the code that updates my gui is, it works by removing the panel from its containg panel and then readding it to it. \r\n\r\n        picPanel = imgDisp.imgDisp(num);\r\n        repaintPicPanel();\r\n    \r\n    public static void repaintPicPanel()\r\n    \t{\r\n    \t\tpicPanel.removeAll();\r\n    \t\tmenuPanel.remove(picPanel);;\r\n    \t\tmenuPanel.add(picPanel, BorderLayout.LINE_START);\r\n    \t}\r\n\r\n","title":"java gui changing picture causes heapspace error","body":"<p>I have a java programme than when a button is clicked it updates the image on screen to the according image. this will work for the first 15 or so clicks then it causes a java heapspace error. I think it is because of the way I am updating the jpanel that contains the bufferedimage but not sure what the reason is. My code to get make the JPanel contain the new image is, </p>\n\n<pre><code>public class extraScreenPanel {\n\nstatic JPanel screenPanel = new JPanel(new BorderLayout()); \n\npublic static JPanel extraScreenPanel(int dispNum) \n{\n    JLabel label = new JLabel(\"\" + dispNum + \"\");\n    label.setPreferredSize(new Dimension(800, 600));\n    //label.setUI( new VerticalLabelUI(true) );\n    label.setVerticalAlignment( SwingConstants.TOP );\n    screenPanel = imgDisp(dispNum);\n    label.setForeground(Color.white);\n    label.setFont(new Font(\"Serif\", Font.BOLD, 200));\n    screenPanel.add(label, BorderLayout.PAGE_END );\n\n    return screenPanel;\n}\n\n\n\npublic static JPanel imgDisp(int picNum) {  \n   /* String url[] = new String[5000];\n    String part1;\n    url[0] = \"C:/PiPhotoPic/pic16.jpg\";\n    for(Integer i=1;i&lt;5000;i++){\n        if(i&lt;10){part1 = \"C:/temp/new0000000\";}\n        else if(i&lt;100){part1 = \"C:/temp/new000000\";}\n        else if(i&lt;1000){part1 = \"C:/temp/new00000\";}\n        else {part1 = \"C:/temp/new00000\";}\n        String num = Integer.toString(i);\n        url[i]= part1 + num + \".jpg\";\n    }\n    if(picNum&lt;0){picNum=0;}\n    String ref = url[picNum];*/ //this code is just to get specific ref for image location\n    BufferedImage loadImg = loadImage(ref);  \n    JImagePanel panel = new JImagePanel(loadImg, 0, 0);  \n    panel.setPreferredSize(new Dimension(800, 600));\n    return panel;\n}  \n\n\npublic static class JImagePanel extends JPanel{  \n    private BufferedImage image;  \n    int x, y;  \n   public JImagePanel(BufferedImage image, int x, int y) {  \n        super();  \n        this.image = image;  \n        this.x = x;  \n        this.y = y;  \n    }  \n    @Override  \n    protected void paintComponent(Graphics g) {  \n       super.paintComponent(g);  \n        g.drawImage(image, x, y, null);  \n   }  \n}  \n\n\npublic static BufferedImage loadImage(String ref) {  \n        BufferedImage bimg = null;  \n        try {  \n\n          bimg = javax.imageio.ImageIO.read(new File(ref));  \n     } catch (Exception e) {  \n         e.printStackTrace();  \n     } \n     BufferedImage bimg2 = resize(bimg,800,600);\n     return bimg2;  \n }  \n\n\n public static BufferedImage resize(BufferedImage img, int newW, int newH) {  \n    int w = img.getWidth();  \n    int h = img.getHeight();  \n    BufferedImage dimg = dimg = new BufferedImage(newW, newH, img.getType());  \n    Graphics2D g = dimg.createGraphics();  \n    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);  \n    g.drawImage(img, 0, 0, newW, newH, 0, 0, w, h, null);  \n    g.dispose();  \n    return dimg;  \n}  \n</code></pre>\n\n<p>}</p>\n\n<p>And the code that updates my gui is, it works by removing the panel from its containg panel and then readding it to it. </p>\n\n<pre><code>    picPanel = imgDisp.imgDisp(num);\n    repaintPicPanel();\n\npublic static void repaintPicPanel()\n    {\n        picPanel.removeAll();\n        menuPanel.remove(picPanel);;\n        menuPanel.add(picPanel, BorderLayout.LINE_START);\n    }\n</code></pre>\n"},{"tags":["java","heap-memory","primitive-types"],"answers":[{"tags":[],"owner":{"account_id":630008,"reputation":41,"user_id":379280,"display_name":"Mr T"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1277833585,"creation_date":1277833585,"answer_id":3143319,"question_id":1563736,"body_markdown":"http://www.java-doc.de/tag/ibm/\r\n\r\nThe *.phd doesn&#39;t contains the values. This is a &quot;portable&quot; format. To see the values you need a full system dump that produce much bigger file.","title":"Can you extract the value of strings from an IBM PHD java heap dump?","body":"<p><a href=\"http://www.java-doc.de/tag/ibm/\" rel=\"nofollow noreferrer\">http://www.java-doc.de/tag/ibm/</a></p>\n\n<p>The *.phd doesn't contains the values. This is a \"portable\" format. To see the values you need a full system dump that produce much bigger file.</p>\n"}],"owner":{"display_name":"user189508"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2938,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1639068321,"creation_date":1255481248,"question_id":1563736,"body_markdown":"I have a PHD format heap dump from an IBM jvm and I wish to examine the values of some strings. With the Sun JVM&#39;s binary hprof dumps this is possible, but I haven&#39;t been able to recover this information from an IBM dump.\r\n\r\nI&#39;ve tried:\r\n\r\n 1. Eclipse Memory Analyzer (0.8.0.200906170940) with IBM&#39;s DTFJ Portal Heap Dump Reader (1.3.0.200903241644)\r\n 2. IBM Support Assistant (3.1.0.00) with Memory Dump Diagnostic for Java (2.0.0.3b)\r\n 3. Running &quot;strings&quot; over the dump file\r\n 4. Converting to text dump with com.ibm.jvm.ras.findroots.PrintHeapdump from svcdump.jar found in mdd4j (2.0.0.3b)\r\n\r\nIn the Eclipse Memory Analyzer I can view the char array inside a String, but all the entries in the array are zero. I also can&#39;t see any of the primitive attributes on any objects.\r\n\r\nIBM hint that they do store the values of primitive types at [http://www-01.ibm.com/support/docview.wss?rs=180&amp;uid=swg21190476][1]\r\n\r\n&gt; This was made possible by using a Java DataOutputStream class which allows the output of Java primitive data types in a portable binary format.\r\n\r\nI&#39;m using Java 5.0:\r\n&lt;pre&gt;\r\n2XHOSLEVEL     OS Level         : AIX 5.3\r\n2XHCPUS        Processors -\r\n3XHCPUARCH       Architecture   : ppc64\r\n3XHNUMCPUS       How Many       : 8\r\n1CIJAVAVERSION J2RE 5.0 IBM J9 2.3 AIX ppc64-64 build j9vmap6423-20070426\r\n1CIVMVERSION   VM build 20070420_12448_BHdSMr\r\n&lt;/pre&gt;\r\n\r\n\r\n  [1]: http://www-01.ibm.com/support/docview.wss?rs=180&amp;uid=swg21190476","title":"Can you extract the value of strings from an IBM PHD java heap dump?","body":"<p>I have a PHD format heap dump from an IBM jvm and I wish to examine the values of some strings. With the Sun JVM's binary hprof dumps this is possible, but I haven't been able to recover this information from an IBM dump.</p>\n\n<p>I've tried:</p>\n\n<ol>\n<li>Eclipse Memory Analyzer (0.8.0.200906170940) with IBM's DTFJ Portal Heap Dump Reader (1.3.0.200903241644)</li>\n<li>IBM Support Assistant (3.1.0.00) with Memory Dump Diagnostic for Java (2.0.0.3b)</li>\n<li>Running \"strings\" over the dump file</li>\n<li>Converting to text dump with com.ibm.jvm.ras.findroots.PrintHeapdump from svcdump.jar found in mdd4j (2.0.0.3b)</li>\n</ol>\n\n<p>In the Eclipse Memory Analyzer I can view the char array inside a String, but all the entries in the array are zero. I also can't see any of the primitive attributes on any objects.</p>\n\n<p>IBM hint that they do store the values of primitive types at <a href=\"http://www-01.ibm.com/support/docview.wss?rs=180&amp;uid=swg21190476\" rel=\"nofollow noreferrer\">http://www-01.ibm.com/support/docview.wss?rs=180&amp;uid=swg21190476</a></p>\n\n<blockquote>\n  <p>This was made possible by using a Java DataOutputStream class which allows the output of Java primitive data types in a portable binary format.</p>\n</blockquote>\n\n<p>I'm using Java 5.0:</p>\n\n<pre>\n2XHOSLEVEL     OS Level         : AIX 5.3\n2XHCPUS        Processors -\n3XHCPUARCH       Architecture   : ppc64\n3XHNUMCPUS       How Many       : 8\n1CIJAVAVERSION J2RE 5.0 IBM J9 2.3 AIX ppc64-64 build j9vmap6423-20070426\n1CIVMVERSION   VM build 20070420_12448_BHdSMr\n</pre>\n"},{"tags":["java","heap-memory","default","j9"],"answers":[{"tags":[],"owner":{"account_id":48447,"reputation":44848,"user_id":143938,"display_name":"Jonathan Feinberg"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1255617949,"creation_date":1255617594,"answer_id":1572816,"question_id":1572738,"body_markdown":"According to [the documentation][1], the default minimum and maximum heap sizes are platform-dependent. On most platforms, default -Xms is 4M. Default -Xmx for Linux is &quot;Half the real memory with a minimum of 16 MB and a maximum of 512 MB&quot;, and for Windows, it&#39;s &quot;Half the real memory with a minimum of 16 MB and a maximum of 2 GB&quot;.\r\n\r\n\r\n  [1]: http://publib.boulder.ibm.com/infocenter/javasdk/v5r0/topic/com.ibm.java.doc.diagnostics.50/diag/appendixes/defaults.html","title":"What&#39;s the default heap size for IBM&#39;s J9VM?","body":"<p>According to <a href=\"http://publib.boulder.ibm.com/infocenter/javasdk/v5r0/topic/com.ibm.java.doc.diagnostics.50/diag/appendixes/defaults.html\" rel=\"nofollow noreferrer\">the documentation</a>, the default minimum and maximum heap sizes are platform-dependent. On most platforms, default -Xms is 4M. Default -Xmx for Linux is \"Half the real memory with a minimum of 16 MB and a maximum of 512 MB\", and for Windows, it's \"Half the real memory with a minimum of 16 MB and a maximum of 2 GB\".</p>\n"},{"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1255698780,"creation_date":1255698780,"answer_id":1577978,"question_id":1572738,"body_markdown":"To print the current values, use:\r\n\r\n    java -verbose:sizes -version","title":"What&#39;s the default heap size for IBM&#39;s J9VM?","body":"<p>To print the current values, use:</p>\n\n<pre><code>java -verbose:sizes -version\n</code></pre>\n"}],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7536,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":1572816,"answer_count":2,"score":2,"last_activity_date":1639068308,"creation_date":1255617096,"question_id":1572738,"body_markdown":"I have IBM&#39;s J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3) installed. After getting an OOM, the size of the heap dump is 383MB. How much heap does the JVM have?\r\n\r\nThe reason why I ask is that a 400MB heap dump seems a bit much for the default 64MB heap that I expect but I didn&#39;t specify any -Xm options. Does J9 use a different default heap size? If so, how can I find out what it is?","title":"What&#39;s the default heap size for IBM&#39;s J9VM?","body":"<p>I have IBM's J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3) installed. After getting an OOM, the size of the heap dump is 383MB. How much heap does the JVM have?</p>\n\n<p>The reason why I ask is that a 400MB heap dump seems a bit much for the default 64MB heap that I expect but I didn't specify any -Xm options. Does J9 use a different default heap size? If so, how can I find out what it is?</p>\n"},{"tags":["java","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":34219,"reputation":3320,"user_id":96514,"accept_rate":62,"display_name":"jakecard"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1260499767,"creation_date":1260499089,"answer_id":1885492,"question_id":1885487,"body_markdown":"I haven&#39;t tried this before so I can&#39;t guarantee this will work, but try `Runtime.totalMemory()`. ","title":"How do I find out Java&#39;s heap size on my computer?","body":"<p>I haven't tried this before so I can't guarantee this will work, but try <code>Runtime.totalMemory()</code>. </p>\n"},{"tags":[],"owner":{"account_id":46080,"reputation":4169,"user_id":136054,"accept_rate":67,"display_name":"nayakam"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1260499695,"creation_date":1260499695,"answer_id":1885515,"question_id":1885487,"body_markdown":"You can get application run time information \r\n\r\n     Runtime rt = Runtime.getRuntime();\r\n    \r\n       rt.freeMemory();\r\n       rt.totalMemory();","title":"How do I find out Java&#39;s heap size on my computer?","body":"<p>You can get application run time information </p>\n\n<pre><code> Runtime rt = Runtime.getRuntime();\n\n   rt.freeMemory();\n   rt.totalMemory();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5362341,"reputation":688,"user_id":4273204,"accept_rate":0,"display_name":"Akash Verma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1426484580,"creation_date":1426484580,"answer_id":29070266,"question_id":1885487,"body_markdown":"As far as I know,\r\nthe java.lang.Runtime.freeMemory() method returns the amount of free memory in the Java Virtual Machine. Calling the gc method may result in increasing the value returned by freeMemory.\r\n\r\n          Also,reading about runtime information about Java is useful sometime when your application is struggling in getting resources.\r\n\r\nYou may try this code:`\r\n\r\n    class HeapTest\r\n    {\r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\tSystem.out.println(&quot;Hello from Heap\\n&quot;);\r\n    \t\tRuntime rt = Runtime.getRuntime();\r\n    \t\tSystem.out.println(rt.totalMemory());\r\n    \t\tSystem.out.println(rt.freeMemory());\r\n    \t}\r\n\r\n}\r\n`\r\n","title":"How do I find out Java&#39;s heap size on my computer?","body":"<p>As far as I know,\nthe java.lang.Runtime.freeMemory() method returns the amount of free memory in the Java Virtual Machine. Calling the gc method may result in increasing the value returned by freeMemory.</p>\n\n<pre><code>      Also,reading about runtime information about Java is useful sometime when your application is struggling in getting resources.\n</code></pre>\n\n<p>You may try this code:`</p>\n\n<pre><code>class HeapTest\n{\n    public static void main(String[] args) \n    {\n        System.out.println(\"Hello from Heap\\n\");\n        Runtime rt = Runtime.getRuntime();\n        System.out.println(rt.totalMemory());\n        System.out.println(rt.freeMemory());\n    }\n</code></pre>\n\n<p>}\n`</p>\n"}],"owner":{"account_id":73304,"reputation":7020,"user_id":211176,"accept_rate":100,"display_name":"adam_0"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3044,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":1885492,"answer_count":3,"score":4,"last_activity_date":1639068298,"creation_date":1260498930,"question_id":1885487,"body_markdown":"I&#39;d like to be able to get the size of the heap as a variable. I don&#39;t need to change the size, just know what it is and have it in a variable.\r\n\r\nThanks!","title":"How do I find out Java&#39;s heap size on my computer?","body":"<p>I'd like to be able to get the size of the heap as a variable. I don't need to change the size, just know what it is and have it in a variable.</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","weblogic","heap-memory","weblogic-10.x"],"answers":[{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1263399444,"creation_date":1263399444,"answer_id":2058268,"question_id":2058189,"body_markdown":"It looks as if the JVM running the weblogic.deployer is running out of memory (not the server itself) and I&#39;m not sure which heap params you&#39;ve changed.\r\n\r\nTry to modify the ant script, so that the task starting the WebLogic deployer is assigned more heap space:\r\n\r\n    &lt;java ... fork=&quot;true&quot; maxmemory=&quot;512m&quot; (or more if required)&gt;\r\n        ...\r\n    &lt;/java&gt;\r\n\r\n","title":"&quot;Java heap space&quot; error when deploying WAR with ant on Weblogic 10.3","body":"<p>It looks as if the JVM running the weblogic.deployer is running out of memory (not the server itself) and I'm not sure which heap params you've changed.</p>\n\n<p>Try to modify the ant script, so that the task starting the WebLogic deployer is assigned more heap space:</p>\n\n<pre><code>&lt;java ... fork=\"true\" maxmemory=\"512m\" (or more if required)&gt;\n    ...\n&lt;/java&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1263399457,"creation_date":1263399457,"answer_id":2058272,"question_id":2058189,"body_markdown":"Can you confirm that you tried to change the memory settings at the **Ant level** (for example by setting the `ANT_OPTS` environment variable, something like that `ANT_OPTS=-Xmx1024m`). \r\n\r\nFor me, even if the script works with another weblogic instance (is it really the same instance btw? same version? etc), it&#39;s the your Ant process that is running out of memory, not WebLogic (this explains why restarting WebLogic doesn&#39;t change anything and why deploying through the admin console works). ","title":"&quot;Java heap space&quot; error when deploying WAR with ant on Weblogic 10.3","body":"<p>Can you confirm that you tried to change the memory settings at the <strong>Ant level</strong> (for example by setting the <code>ANT_OPTS</code> environment variable, something like that <code>ANT_OPTS=-Xmx1024m</code>). </p>\n\n<p>For me, even if the script works with another weblogic instance (is it really the same instance btw? same version? etc), it's the your Ant process that is running out of memory, not WebLogic (this explains why restarting WebLogic doesn't change anything and why deploying through the admin console works). </p>\n"},{"tags":[],"owner":{"account_id":676986,"reputation":11,"user_id":579677,"display_name":"Tom Keeber"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1295342715,"creation_date":1295342715,"answer_id":4722418,"question_id":2058189,"body_markdown":"We had a similar problem - in our case we had changed the SDK to Java 1.6 from 1.5 and something in the WLDeploy task caused an infinite loop which meant no matter how much we upper the memory we always received an Java heap space issue.","title":"&quot;Java heap space&quot; error when deploying WAR with ant on Weblogic 10.3","body":"<p>We had a similar problem - in our case we had changed the SDK to Java 1.6 from 1.5 and something in the WLDeploy task caused an infinite loop which meant no matter how much we upper the memory we always received an Java heap space issue.</p>\n"}],"owner":{"account_id":2765,"reputation":631,"user_id":3889,"accept_rate":75,"display_name":"Ed Griebel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8029,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":2058268,"answer_count":3,"score":5,"last_activity_date":1639068277,"creation_date":1263398941,"question_id":2058189,"body_markdown":"I&#39;m getting this error when deploying application WAR files from my ant build via a &lt;java&gt; task that calls `weblogic.Deployer`. This is on Windows XP, server is not in Production mode, there are only 2 other WARs installed on the server, one being just static content (web.xml + png/css/javascript files), no other weblogic servers installed on the PC. The server CPU never goes above 25%. JRockit JVM 1.6.0_05-b13. JSP files are pre-compiled with weblogic.appc and so stored in the war as servlets (.class files). Also, WAR file is about 20M, including jar libs, around 500 classes, and ~200 compiled JSP pages.\r\n\r\nSolutions attempted: \r\n\r\n - Rebooting the weblogic server multiple times: No Effect, still fails\r\n - Server PC has 2GB ram, so increased the memory params for the Weblogic server to `-Xms256m -Xmx512m -XX:PermSize=48m -XX:MaxPermSize=256m`: No Effect, still fails\r\n - Deploy through Weblogic console: WAR deploys fine, so not a bug in setup of war\r\n - Use ant script to deploy to another server: successful to another server, so it&#39;s not a bug in the script\r\n\r\nI hope someone has seen this before or has an idea of something else to try, I&#39;ve been looking at this for hours!\r\n\r\n&lt;pre&gt;\r\ndeploy-war:\r\n     [echo] Deploying application...\r\n     [echo] Deploying application\r\n     [java] weblogic.Deployer invoked with options:  -adminurl t3://corpitdev50ddh11:7001 \\\r\n               -username weblogic -name 401k_clt-antdeploy -stage \\\r\n               -upload /opt/appl/hrsapps/401k/client/dist/app/401k_clt.war \\\r\n               -targets AdminServer -verbose -deploy\r\n     [java] &amp;lt;Jan 13, 2010 10:41:22 AM EST&gt; &amp;lt;Info&gt; &amp;lt;J2EE Deployment SPI&gt; &amp;lt;BEA-260121&gt; \\\r\n               &amp;lt;Initiating deploy operation for application, 401k_clt-antdeploy \\\r\n               [archive: /opt/appl/hrsapps/401k/client/dist/app/401k_clt.war], to AdminServer .&gt;\r\n     [java] Java heap space\r\n\r\nBUILD FAILED\r\n/opt/appl/hrsapps/401k/build-macros.xml:601: The following error occurred while executing this line:\r\n/opt/appl/hrsapps/401k/build-macros.xml:557: Java returned: 1\r\n\r\n&lt;/pre&gt;","title":"&quot;Java heap space&quot; error when deploying WAR with ant on Weblogic 10.3","body":"<p>I'm getting this error when deploying application WAR files from my ant build via a  task that calls <code>weblogic.Deployer</code>. This is on Windows XP, server is not in Production mode, there are only 2 other WARs installed on the server, one being just static content (web.xml + png/css/javascript files), no other weblogic servers installed on the PC. The server CPU never goes above 25%. JRockit JVM 1.6.0_05-b13. JSP files are pre-compiled with weblogic.appc and so stored in the war as servlets (.class files). Also, WAR file is about 20M, including jar libs, around 500 classes, and ~200 compiled JSP pages.</p>\n\n<p>Solutions attempted: </p>\n\n<ul>\n<li>Rebooting the weblogic server multiple times: No Effect, still fails</li>\n<li>Server PC has 2GB ram, so increased the memory params for the Weblogic server to <code>-Xms256m -Xmx512m -XX:PermSize=48m -XX:MaxPermSize=256m</code>: No Effect, still fails</li>\n<li>Deploy through Weblogic console: WAR deploys fine, so not a bug in setup of war</li>\n<li>Use ant script to deploy to another server: successful to another server, so it's not a bug in the script</li>\n</ul>\n\n<p>I hope someone has seen this before or has an idea of something else to try, I've been looking at this for hours!</p>\n\n<pre>\ndeploy-war:\n     [echo] Deploying application...\n     [echo] Deploying application\n     [java] weblogic.Deployer invoked with options:  -adminurl t3://corpitdev50ddh11:7001 \\\n               -username weblogic -name 401k_clt-antdeploy -stage \\\n               -upload /opt/appl/hrsapps/401k/client/dist/app/401k_clt.war \\\n               -targets AdminServer -verbose -deploy\n     [java] &lt;Jan 13, 2010 10:41:22 AM EST> &lt;Info> &lt;J2EE Deployment SPI> &lt;BEA-260121> \\\n               &lt;Initiating deploy operation for application, 401k_clt-antdeploy \\\n               [archive: /opt/appl/hrsapps/401k/client/dist/app/401k_clt.war], to AdminServer .>\n     [java] Java heap space\n\nBUILD FAILED\n/opt/appl/hrsapps/401k/build-macros.xml:601: The following error occurred while executing this line:\n/opt/appl/hrsapps/401k/build-macros.xml:557: Java returned: 1\n\n</pre>\n"},{"tags":["java","size","heap-memory"],"comments":[{"owner":{"account_id":71985,"reputation":7903,"user_id":208013,"display_name":"Mirek Pluta"},"score":2,"creation_date":1263580599,"post_id":2073869,"comment_id":2003907,"body_markdown":"Why don&#39;t you choose adding some starting script (bat or sh) with defined starting parameters for jvm (like Xmx) and deploy it together with application itself.","body":"Why don&#39;t you choose adding some starting script (bat or sh) with defined starting parameters for jvm (like Xmx) and deploy it together with application itself."},{"owner":{"account_id":72974,"reputation":10537,"user_id":210421,"accept_rate":60,"display_name":"Mirko N."},"score":3,"creation_date":1263580619,"post_id":2073869,"comment_id":2003908,"body_markdown":"What would be the point of setting a limit if any app could just raise it at will?","body":"What would be the point of setting a limit if any app could just raise it at will?"},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1263582076,"post_id":2073869,"comment_id":2004064,"body_markdown":"you can&#39;t programmatically change the memory constraints in a running application","body":"you can&#39;t programmatically change the memory constraints in a running application"},{"owner":{"account_id":9886,"reputation":16495,"user_id":18437,"accept_rate":78,"display_name":"Luke Quinane"},"score":0,"creation_date":1337565369,"post_id":2073869,"comment_id":13857347,"body_markdown":"For reference, here is the RFE for hotspot: bugs.sun.com/bugdatabase/view_bug.do?bug_id=4408373","body":"For reference, here is the RFE for hotspot: bugs.sun.com/bugdatabase/view_bug.do?bug_id=4408373"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1385108848,"post_id":2073869,"comment_id":30016282,"body_markdown":"possible duplicate of [Can the JVM max heap size be dynamic?](http://stackoverflow.com/questions/3472593/can-the-jvm-max-heap-size-be-dynamic)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/3472593/can-the-jvm-max-heap-size-be-dynamic\">Can the JVM max heap size be dynamic?</a>"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1385108899,"post_id":2073869,"comment_id":30016308,"body_markdown":"Although this is earlier than http://stackoverflow.com/questions/3472593/can-the-jvm-max-heap-size-be-dynamic that question has better answers.","body":"Although this is earlier than <a href=\"http://stackoverflow.com/questions/3472593/can-the-jvm-max-heap-size-be-dynamic\" title=\"can the jvm max heap size be dynamic\">stackoverflow.com/questions/3472593/&hellip;</a> that question has better answers."}],"answers":[{"tags":[],"owner":{"account_id":90100,"reputation":31,"user_id":248170,"display_name":"madshiva"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1263580677,"creation_date":1263580677,"answer_id":2073901,"question_id":2073869,"body_markdown":"See this post about increase java heap size :\r\n\r\nhttps://stackoverflow.com/questions/880855/increase-the-java-heap-size-permanently\r\n\r\nMaybe also you could clean some part of your code to reduce memory usage.\r\n\r\nBest Regards\r\n\r\n","title":"How to increase java heap size programmatically","body":"<p>See this post about increase java heap size :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/880855/increase-the-java-heap-size-permanently\">increase the java heap size permanently?</a></p>\n\n<p>Maybe also you could clean some part of your code to reduce memory usage.</p>\n\n<p>Best Regards</p>\n"},{"tags":[],"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1263581446,"creation_date":1263581446,"answer_id":2073945,"question_id":2073869,"body_markdown":"There is no such standard API to do so.\r\n\r\nI would suggest you use Java Web Start to invoke your application (can be used for local applications to in the latest Sun Java 6) as it allows you to specify values for this.\r\n\r\nYou can then have three or four links each pointing to exactly the same files but with &quot;Tiny&quot;, &quot;Medium&quot;, &quot;Large&quot;, &quot;Gigantic&quot; heap sizes.","title":"How to increase java heap size programmatically","body":"<p>There is no such standard API to do so.</p>\n\n<p>I would suggest you use Java Web Start to invoke your application (can be used for local applications to in the latest Sun Java 6) as it allows you to specify values for this.</p>\n\n<p>You can then have three or four links each pointing to exactly the same files but with \"Tiny\", \"Medium\", \"Large\", \"Gigantic\" heap sizes.</p>\n"},{"tags":[],"owner":{"account_id":11188,"reputation":75684,"user_id":21441,"accept_rate":100,"display_name":"Mark Elliot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1263581570,"creation_date":1263581570,"answer_id":2073963,"question_id":2073869,"body_markdown":"Take a look at something like [launch4j][1] and consider deploying executables where you can control the limit when someone begins the run of your application.\r\n\r\nYou won&#39;t be able to do this programmatically.\r\n\r\n[1]:http://launch4j.sourceforge.net/\r\n\r\n","title":"How to increase java heap size programmatically","body":"<p>Take a look at something like <a href=\"http://launch4j.sourceforge.net/\" rel=\"nofollow noreferrer\">launch4j</a> and consider deploying executables where you can control the limit when someone begins the run of your application.</p>\n\n<p>You won't be able to do this programmatically.</p>\n"},{"tags":[],"owner":{"account_id":22644,"reputation":14098,"user_id":56044,"accept_rate":71,"display_name":"Michael Brewer-Davis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1263581605,"creation_date":1263581605,"answer_id":2073969,"question_id":2073869,"body_markdown":"For desktop applications, I suggest providing a launcher which can then specify your desired memory size.  In addition to configuration of your JVM, you can also provide an icon, file associations, etc.\r\n\r\nSee this [SO question][1] for deployment alternatives.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/80105/whats-the-best-way-to-distribute-java-applications","title":"How to increase java heap size programmatically","body":"<p>For desktop applications, I suggest providing a launcher which can then specify your desired memory size.  In addition to configuration of your JVM, you can also provide an icon, file associations, etc.</p>\n\n<p>See this <a href=\"https://stackoverflow.com/questions/80105/whats-the-best-way-to-distribute-java-applications\">SO question</a> for deployment alternatives.</p>\n"},{"tags":[],"owner":{"account_id":35035,"reputation":1266,"user_id":99107,"accept_rate":62,"display_name":"ShabbyDoo"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1263581780,"creation_date":1263581780,"answer_id":2073992,"question_id":2073869,"body_markdown":"Setting -Xmx to one gig doesn&#39;t mean that the JVM will allocate that much memory upon start-up.  The JVM will allocate only -Xms (plus overhead) until more heap space is needed.  Do you need to protect your users from thrashing virtual memory or a failed memory allocation from the OS?  If not, just set Xmx to a large value.  Note that Windows 32bit JVMs will often ignore Xmx settings greater than 1.2Gig, so it&#39;s best to not request more than a gig or so to be safe.","title":"How to increase java heap size programmatically","body":"<p>Setting -Xmx to one gig doesn't mean that the JVM will allocate that much memory upon start-up.  The JVM will allocate only -Xms (plus overhead) until more heap space is needed.  Do you need to protect your users from thrashing virtual memory or a failed memory allocation from the OS?  If not, just set Xmx to a large value.  Note that Windows 32bit JVMs will often ignore Xmx settings greater than 1.2Gig, so it's best to not request more than a gig or so to be safe.</p>\n"}],"owner":{"account_id":580891,"reputation":131,"user_id":245972,"display_name":"hrl"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14922,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":5,"score":12,"last_activity_date":1639068266,"creation_date":1263580312,"question_id":2073869,"body_markdown":"I have a java desktop application for searching files and it is usually reaching the default heap limit pretty soon. I wont have access to all the systems it will be installed in so I want to increase the JVM heap size in the application itself. Can anybody help me how can I do that programmatically in my application","title":"How to increase java heap size programmatically","body":"<p>I have a java desktop application for searching files and it is usually reaching the default heap limit pretty soon. I wont have access to all the systems it will be installed in so I want to increase the JVM heap size in the application itself. Can anybody help me how can I do that programmatically in my application</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":15083,"reputation":22025,"user_id":31506,"display_name":"Jack Leow"},"score":0,"creation_date":1263908437,"post_id":2093679,"comment_id":2026694,"body_markdown":"Why do you think it&#39;s unlimited?","body":"Why do you think it&#39;s unlimited?"}],"answers":[{"tags":[],"owner":{"account_id":2397,"reputation":179869,"user_id":3333,"accept_rate":80,"display_name":"Paul Tomblin"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1263907465,"creation_date":1263907465,"answer_id":2093735,"question_id":2093679,"body_markdown":"If you could make every atom in the universe into a byte of RAM, you could allocate it in a 64 bit address space.  \r\n\r\nActually, that&#39;s a slight exaggeration.\r\n\r\nThere are 10^80 atoms in the universe (according to WolframAlpha), and 2^64 bytes of address space in a 64 bit system, so you&#39;d only be able to address 1 out of every 5x10^60 atoms.  But if you have 18 qintillion bytes of RAM, you&#39;d probably need a couple of quantum black holes to power it with.","title":"Max memory for 64bit Java","body":"<p>If you could make every atom in the universe into a byte of RAM, you could allocate it in a 64 bit address space.  </p>\n\n<p>Actually, that's a slight exaggeration.</p>\n\n<p>There are 10^80 atoms in the universe (according to WolframAlpha), and 2^64 bytes of address space in a 64 bit system, so you'd only be able to address 1 out of every 5x10^60 atoms.  But if you have 18 qintillion bytes of RAM, you'd probably need a couple of quantum black holes to power it with.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1263909045,"creation_date":1263907496,"answer_id":2093738,"question_id":2093679,"body_markdown":"In theory its between `2^63` and `2^64` bytes.\r\n\r\nIn practice it is limited by the amount of physical memory and swap space available on your machine.  And the physical memory is in turn limited by your chipset (i.e. the number of address pins on the physical memory address bus) and motherboard (i.e. the number and size of the DIMM sockets).","title":"Max memory for 64bit Java","body":"<p>In theory its between <code>2^63</code> and <code>2^64</code> bytes.</p>\n\n<p>In practice it is limited by the amount of physical memory and swap space available on your machine.  And the physical memory is in turn limited by your chipset (i.e. the number of address pins on the physical memory address bus) and motherboard (i.e. the number and size of the DIMM sockets).</p>\n"},{"tags":[],"owner":{"account_id":21847,"reputation":12082,"user_id":53420,"accept_rate":59,"display_name":"RED SOFT ADAIR"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1263908507,"creation_date":1263908507,"answer_id":2093842,"question_id":2093679,"body_markdown":"\r\nThis probably depends on the system your VM is running in. If you are running a AMD x64 architecture the address space of currently shipped processors uses 48 Bits, not 64. This results in a theoretical maximum of roughly 256 TB. (See http://en.wikipedia.org/wiki/X86-64)\r\n\r\nI am not a specialist in VMs, but any modern OS typically will give as much memory as there is physical RAM plus available virtual memory. *Probably* thats what the VM will pass to your application depending on its configuration.","title":"Max memory for 64bit Java","body":"<p>This probably depends on the system your VM is running in. If you are running a AMD x64 architecture the address space of currently shipped processors uses 48 Bits, not 64. This results in a theoretical maximum of roughly 256 TB. (See <a href=\"http://en.wikipedia.org/wiki/X86-64\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/X86-64</a>)</p>\n\n<p>I am not a specialist in VMs, but any modern OS typically will give as much memory as there is physical RAM plus available virtual memory. <em>Probably</em> thats what the VM will pass to your application depending on its configuration.</p>\n"},{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1263909132,"creation_date":1263909132,"answer_id":2093898,"question_id":2093679,"body_markdown":"With recent VMs from Sun, the practical heap limit size is usually 512 times the available physical and/or virtual memory. Even if the theoretical limit is much higher, the VM will allocate 1 byte for maangement purposes for each 512 bytes of heap memory on startup, so 1TB of heap will immediately require 2GB for the memory management.","title":"Max memory for 64bit Java","body":"<p>With recent VMs from Sun, the practical heap limit size is usually 512 times the available physical and/or virtual memory. Even if the theoretical limit is much higher, the VM will allocate 1 byte for maangement purposes for each 512 bytes of heap memory on startup, so 1TB of heap will immediately require 2GB for the memory management.</p>\n"},{"tags":[],"owner":{"account_id":20439,"reputation":4580,"user_id":48839,"display_name":"Chad Okere"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1263912389,"creation_date":1263911855,"answer_id":2094170,"question_id":2093679,"body_markdown":"Theoretically 2&lt;sup&gt;64&lt;/sup&gt;, but there might be limitations (obviously) \r\n\r\nAccording to &lt;a href=&quot;http://java.sun.com/docs/hotspot/HotSpotFAQ.html#64bit_heap&quot;&gt;this FAQ&lt;/a&gt; it&#39;s only limited by memory and swap space on the local system:&lt;blockquote&gt;&lt;i&gt;On 64-bit VMs, you have 64 bits of addressability to work with resulting  in a maximum Java heap size limited only by the amount of physical memory and swap space your system provides.\r\n\r\nSee also Why can&#39;t I get a larger heap with the 32-bit JVM?&lt;/i&gt;&lt;/blockquote&gt;\r\n\r\nAlso keep in mind you need to set the max heap via command line. Without an -Xmx command. without it Java uses 64mb + 30% = 83.2mb as a default max heap on 64 bit machines according the same FAQ. \r\n\r\n    java -Xmx1000g myClass \r\n\r\nworks fine on my machine.  But it dosn&#39;t seem to yet support the &#39;t&#39; modifier so you can&#39;t specify max memory in terabytes yet :)","title":"Max memory for 64bit Java","body":"<p>Theoretically 2<sup>64</sup>, but there might be limitations (obviously) </p>\n\n<p>According to <a href=\"http://java.sun.com/docs/hotspot/HotSpotFAQ.html#64bit_heap\" rel=\"noreferrer\">this FAQ</a> it's only limited by memory and swap space on the local system:<blockquote><i>On 64-bit VMs, you have 64 bits of addressability to work with resulting  in a maximum Java heap size limited only by the amount of physical memory and swap space your system provides.</p>\n\n<p>See also Why can't I get a larger heap with the 32-bit JVM?</i></blockquote></p>\n\n<p>Also keep in mind you need to set the max heap via command line. Without an -Xmx command. without it Java uses 64mb + 30% = 83.2mb as a default max heap on 64 bit machines according the same FAQ. </p>\n\n<pre><code>java -Xmx1000g myClass \n</code></pre>\n\n<p>works fine on my machine.  But it dosn't seem to yet support the 't' modifier so you can't specify max memory in terabytes yet :)</p>\n"}],"owner":{"account_id":92726,"reputation":489,"user_id":254011,"display_name":"Raymond Barlow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46436,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":2094170,"answer_count":5,"score":20,"last_activity_date":1639068256,"creation_date":1263907089,"question_id":2093679,"body_markdown":"What&#39;s the maximum amount of heap space that one can allocate for java on a 64-bit platform? Is it unlimited?\r\n\r\n","title":"Max memory for 64bit Java","body":"<p>What's the maximum amount of heap space that one can allocate for java on a 64-bit platform? Is it unlimited?</p>\n"},{"tags":["java","bash","size","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":73773,"reputation":11214,"user_id":212275,"display_name":"ZoogieZork"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1264125277,"creation_date":1264124896,"answer_id":2114432,"question_id":2114422,"body_markdown":"When you use `&quot;$MEM_OPTS&quot;`, you&#39;re passing `-Xms512m -Xmx1024m` as a single option.\r\n\r\nTry this instead:\r\n\r\n    java &quot;$SERVER&quot; $MEM_OPTS $JAVA_OPTS \\\r\n\r\nA good guide to variable substitution and quoting with examples: http://tldp.org/LDP/abs/html/varsubn.html","title":"Bash variable expansion causes Java commandline to break","body":"<p>When you use <code>\"$MEM_OPTS\"</code>, you're passing <code>-Xms512m -Xmx1024m</code> as a single option.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>java \"$SERVER\" $MEM_OPTS $JAVA_OPTS \\\n</code></pre>\n\n<p>A good guide to variable substitution and quoting with examples: <a href=\"http://tldp.org/LDP/abs/html/varsubn.html\" rel=\"noreferrer\">http://tldp.org/LDP/abs/html/varsubn.html</a></p>\n"},{"tags":[],"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1264124922,"creation_date":1264124922,"answer_id":2114435,"question_id":2114422,"body_markdown":"I am not 100% sure about the semantics of the quotes, but `&quot;$MEM_OPTS&quot;` may create a single argument `&quot;-Xms512m -Xmx1024m&quot;`, whereas the JVM needs to see two seperate arguments. Can you try without the quotes?\r\n\r\n    java $SERVER $MEM_OPTS $JAVA_OPTS ","title":"Bash variable expansion causes Java commandline to break","body":"<p>I am not 100% sure about the semantics of the quotes, but <code>\"$MEM_OPTS\"</code> may create a single argument <code>\"-Xms512m -Xmx1024m\"</code>, whereas the JVM needs to see two seperate arguments. Can you try without the quotes?</p>\n\n<pre><code>java $SERVER $MEM_OPTS $JAVA_OPTS \n</code></pre>\n"},{"tags":[],"owner":{"account_id":84127,"reputation":51105,"user_id":235354,"display_name":"jspcal"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1264124974,"creation_date":1264124974,"answer_id":2114440,"question_id":2114422,"body_markdown":"think it should work if the quotes around $MEM_OPTS are removed, as the quotes tell bash to pass the expanded contents as a single token argument to execv()\r\n","title":"Bash variable expansion causes Java commandline to break","body":"<p>think it should work if the quotes around $MEM_OPTS are removed, as the quotes tell bash to pass the expanded contents as a single token argument to execv()</p>\n"},{"tags":[],"owner":{"account_id":8291,"reputation":860447,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1264128854,"creation_date":1264126618,"answer_id":2114523,"question_id":2114422,"body_markdown":"It should be a simple matter of changing:\r\n\r\n    java &quot;$SERVER&quot; &quot;$MEM_OPTS&quot; $JAVA_OPTS \\\r\nto:\r\n\r\n    java &quot;$SERVER&quot; $MEM_OPTS $JAVA_OPTS \\\r\nso that the memory options are passed as *two* arguments.\r\n\r\nBut, since you say that doesn&#39;t work (?), please try the following.\r\n\r\nA) Create a shell script `fakejava.sh` containing:\r\n\r\n    #!/usr/bin/bash\r\n    echo $#\r\n    while [[ $# -ne 0 ]] ; do\r\n        echo &quot;    [$1]&quot;\r\n    done\r\n(you may need to alter that first line if your `bash` is somewhere else: use `which bash` to figure out where).\r\n\r\nB) Set its permissions correctly:\r\n\r\n    chmod 700 fakejava.sh\r\n\r\nC) Replace your entire `java` command with:\r\n\r\n    ./fakejava.sh &quot;$SERVER&quot; $MEM_OPTS $JAVA_OPTS xx\r\nand see how many arguments there actually are. I get:\r\n\r\n    5\r\n        [-server]\r\n        [-arg1]\r\n        [-arg2]\r\n        [none]\r\n        [xx]\r\nfrom the controlling script:\r\n\r\n    #!/usr/bin/bash\r\n    JAVA_OPTS=&quot;none&quot;\r\n    SERVER=&quot;-server&quot;\r\n    MEM_OPTS=&quot;-arg1 -arg2&quot;\r\n    ./fakejava.sh &quot;$SERVER&quot; $MEM_OPTS $JAVA_OPTS xx\r\n","title":"Bash variable expansion causes Java commandline to break","body":"<p>It should be a simple matter of changing:</p>\n\n<pre><code>java \"$SERVER\" \"$MEM_OPTS\" $JAVA_OPTS \\\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>java \"$SERVER\" $MEM_OPTS $JAVA_OPTS \\\n</code></pre>\n\n<p>so that the memory options are passed as <em>two</em> arguments.</p>\n\n<p>But, since you say that doesn't work (?), please try the following.</p>\n\n<p>A) Create a shell script <code>fakejava.sh</code> containing:</p>\n\n<pre><code>#!/usr/bin/bash\necho $#\nwhile [[ $# -ne 0 ]] ; do\n    echo \"    [$1]\"\ndone\n</code></pre>\n\n<p>(you may need to alter that first line if your <code>bash</code> is somewhere else: use <code>which bash</code> to figure out where).</p>\n\n<p>B) Set its permissions correctly:</p>\n\n<pre><code>chmod 700 fakejava.sh\n</code></pre>\n\n<p>C) Replace your entire <code>java</code> command with:</p>\n\n<pre><code>./fakejava.sh \"$SERVER\" $MEM_OPTS $JAVA_OPTS xx\n</code></pre>\n\n<p>and see how many arguments there actually are. I get:</p>\n\n<pre><code>5\n    [-server]\n    [-arg1]\n    [-arg2]\n    [none]\n    [xx]\n</code></pre>\n\n<p>from the controlling script:</p>\n\n<pre><code>#!/usr/bin/bash\nJAVA_OPTS=\"none\"\nSERVER=\"-server\"\nMEM_OPTS=\"-arg1 -arg2\"\n./fakejava.sh \"$SERVER\" $MEM_OPTS $JAVA_OPTS xx\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60459,"reputation":1253,"user_id":180573,"accept_rate":86,"display_name":"purecharger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1264136682,"creation_date":1264136682,"answer_id":2115125,"question_id":2114422,"body_markdown":"My mistake - I was setting IFS to &quot;\\n&quot; only in a script I sourced in, functions.sh. I was never resetting the IFS to &quot;\\n\\t &quot;, so the variables were not split on spaces.\r\n\r\nThanks for the responses!","title":"Bash variable expansion causes Java commandline to break","body":"<p>My mistake - I was setting IFS to \"\\n\" only in a script I sourced in, functions.sh. I was never resetting the IFS to \"\\n\\t \", so the variables were not split on spaces.</p>\n\n<p>Thanks for the responses!</p>\n"}],"owner":{"account_id":60459,"reputation":1253,"user_id":180573,"accept_rate":86,"display_name":"purecharger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1939,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":2115125,"answer_count":5,"score":1,"last_activity_date":1639068245,"creation_date":1264124703,"question_id":2114422,"body_markdown":"I&#39;ve been experiencing a strange issue the last couple of days while writing a shell script which executes Java (starting the JBoss AS). I have a variable JAVA_OPTS that I am creating, and finally passing to the &#39;java&#39; command. When I hard code the values in JAVA_OPTS rather than using variable expansion, the java process executes normally. When I use variable expansion, I get errors from the java executable. Here is the relevant portions of the script:\r\n\r\n\r\n    SERVER=&quot;-server&quot;\r\n    MEM_OPTS=&quot;-Xms512m -Xmx1024m&quot;\r\n\r\n    case &quot;$1&quot; in\r\n    start)\r\n        java &quot;$SERVER&quot; &quot;$MEM_OPTS&quot; $JAVA_OPTS \\\r\n        -classpath &quot;${JBOSS_CLASSPATH}&quot; \\\r\n        -Dorg.jboss.resolver.warning=true \\\r\n        -Dsun.rmi.dgc.client.gcInterval=3600000 \\\r\n        -Dsun.rmi.dgc.server.gcInterval=3600000 \\\r\n        -Djboss.server.name=${SERVICE_NAME} \\\r\n        -Djboss.server.base.dir=`dirname ${EC_APP_HOME}` \\\r\n        -Djboss.server.base.url=file://`dirname ${EC_APP_HOME}` \\\r\n        -Djboss.server.home.dir=${EC_APP_HOME} \\\r\n        -Djboss.server.home.url=file://${EC_APP_HOME} \\\r\n        org.jboss.Main &gt;&gt; out.log 2&gt;&amp;1 &amp;\r\n\r\nExecuting this gives the following:\r\n\r\n    Invalid initial heap size: -Xms512m -Xmx1024m\r\n    Could not create the Java virtual machine.\r\n\r\nHowever when I remove the variable expansion like so:\r\n\r\n        java &quot;$SERVER&quot; -Xms512m -Xmx1024m $JAVA_OPTS \\\r\n\r\njava executes no problems. As an aside, when I include &quot;-server&quot; in the MEM_OPTS var, I get the error &quot;unrecognized option&quot;.\r\n\r\nSo obviously, there is something up with the variable expansion. I&#39;ve hexdump&#39;d the script, and made sure there are no extra characters in the string, and verified that I&#39;m using Unix line endings. I&#39;ve also reproduced the problem on two different linux machines, albeit both running the same version of ubuntu (one 32bit, the other 64bit).\r\n\r\nEDIT: I get the same result with all forms of variable substitution: $MEM_OPTS, ${MEM_OPTS}, &quot;${MEM_OPTS}&quot;\r\n\r\nAny ideas?\r\n","title":"Bash variable expansion causes Java commandline to break","body":"<p>I've been experiencing a strange issue the last couple of days while writing a shell script which executes Java (starting the JBoss AS). I have a variable JAVA_OPTS that I am creating, and finally passing to the 'java' command. When I hard code the values in JAVA_OPTS rather than using variable expansion, the java process executes normally. When I use variable expansion, I get errors from the java executable. Here is the relevant portions of the script:</p>\n\n<pre><code>SERVER=\"-server\"\nMEM_OPTS=\"-Xms512m -Xmx1024m\"\n\ncase \"$1\" in\nstart)\n    java \"$SERVER\" \"$MEM_OPTS\" $JAVA_OPTS \\\n    -classpath \"${JBOSS_CLASSPATH}\" \\\n    -Dorg.jboss.resolver.warning=true \\\n    -Dsun.rmi.dgc.client.gcInterval=3600000 \\\n    -Dsun.rmi.dgc.server.gcInterval=3600000 \\\n    -Djboss.server.name=${SERVICE_NAME} \\\n    -Djboss.server.base.dir=`dirname ${EC_APP_HOME}` \\\n    -Djboss.server.base.url=file://`dirname ${EC_APP_HOME}` \\\n    -Djboss.server.home.dir=${EC_APP_HOME} \\\n    -Djboss.server.home.url=file://${EC_APP_HOME} \\\n    org.jboss.Main &gt;&gt; out.log 2&gt;&amp;1 &amp;\n</code></pre>\n\n<p>Executing this gives the following:</p>\n\n<pre><code>Invalid initial heap size: -Xms512m -Xmx1024m\nCould not create the Java virtual machine.\n</code></pre>\n\n<p>However when I remove the variable expansion like so:</p>\n\n<pre><code>    java \"$SERVER\" -Xms512m -Xmx1024m $JAVA_OPTS \\\n</code></pre>\n\n<p>java executes no problems. As an aside, when I include \"-server\" in the MEM_OPTS var, I get the error \"unrecognized option\".</p>\n\n<p>So obviously, there is something up with the variable expansion. I've hexdump'd the script, and made sure there are no extra characters in the string, and verified that I'm using Unix line endings. I've also reproduced the problem on two different linux machines, albeit both running the same version of ubuntu (one 32bit, the other 64bit).</p>\n\n<p>EDIT: I get the same result with all forms of variable substitution: $MEM_OPTS, ${MEM_OPTS}, \"${MEM_OPTS}\"</p>\n\n<p>Any ideas?</p>\n"},{"tags":["java","excel","apache-poi","heap-memory"],"comments":[{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1264734536,"post_id":2159635,"comment_id":2103646,"body_markdown":"You can&#39;t set the maximum heap size (-Xmx) lower than the starting heap size (-Xms) - did you make a typo?","body":"You can&#39;t set the maximum heap size (-Xmx) lower than the starting heap size (-Xms) - did you make a typo?"}],"answers":[{"tags":[],"owner":{"account_id":41845,"reputation":792,"user_id":121735,"display_name":"liya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1346070518,"creation_date":1264735450,"answer_id":2159697,"question_id":2159635,"body_markdown":"Try this one: `-Xms256m -Xmx512m`.","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>Try this one: <code>-Xms256m -Xmx512m</code>.</p>\n"},{"tags":[],"owner":{"account_id":7340,"reputation":12654,"user_id":12719,"display_name":"pgras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1264748262,"creation_date":1264748262,"answer_id":2160397,"question_id":2159635,"body_markdown":"If you use XSSFWorkbook, POI has to create a memory model containing your whole Excel file, thus a huge memory consumption. Maybe you could use the [Event API][1] which isn&#39;t as simple as the user API but allows lower memory consumption.\r\n\r\nBy the way you could also set a bigger value for -Xmx...\r\n\r\n\r\n  [1]: http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>If you use XSSFWorkbook, POI has to create a memory model containing your whole Excel file, thus a huge memory consumption. Maybe you could use the <a href=\"http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api\" rel=\"nofollow noreferrer\">Event API</a> which isn't as simple as the user API but allows lower memory consumption.</p>\n\n<p>By the way you could also set a bigger value for -Xmx...</p>\n"},{"tags":[],"owner":{"account_id":79031,"reputation":6489,"user_id":224440,"display_name":"Mihir Mathuria"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1264749712,"creation_date":1264749712,"answer_id":2160494,"question_id":2159635,"body_markdown":"\r\n\r\nInstead of reading the entire file in memory try using the [eventusermodel][1] api\r\n\r\n\r\nThis is a very memory efficient way to read large files. It works on the principle of SAX parser (as opposed to DOM) in the sense that it will call callback methods when particular data structures are encountered. It might get a little tricky as it expects you to know the nitty-gritty of the underlying data\r\n\r\n[Here][2] you can find a good tutorial on this topic\r\n\r\n\r\nHope this helps!\r\n\r\n\r\n  [1]: http://poi.apache.org/apidocs/org/apache/poi/xssf/eventusermodel/package-summary.html\r\n  [2]: http://onjava.com/pub/a/onjava/2003/04/16/poi_excel.html","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>Instead of reading the entire file in memory try using the <a href=\"http://poi.apache.org/apidocs/org/apache/poi/xssf/eventusermodel/package-summary.html\" rel=\"noreferrer\">eventusermodel</a> api</p>\n\n<p>This is a very memory efficient way to read large files. It works on the principle of SAX parser (as opposed to DOM) in the sense that it will call callback methods when particular data structures are encountered. It might get a little tricky as it expects you to know the nitty-gritty of the underlying data</p>\n\n<p><a href=\"http://onjava.com/pub/a/onjava/2003/04/16/poi_excel.html\" rel=\"noreferrer\">Here</a> you can find a good tutorial on this topic</p>\n\n<p>Hope this helps!</p>\n"},{"tags":[],"owner":{"account_id":98516,"reputation":3528,"user_id":266609,"display_name":"TheSteve0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1265606210,"creation_date":1265606210,"answer_id":2219725,"question_id":2159635,"body_markdown":"The other thing to watch in your own code is how many objects you are &quot;new&quot;ing. If you are creating a lot of objects as you read through cells, it could exhaust the heap as well. Make sure you are being careful with the number of objects you create. ","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>The other thing to watch in your own code is how many objects you are \"new\"ing. If you are creating a lot of objects as you read through cells, it could exhaust the heap as well. Make sure you are being careful with the number of objects you create. </p>\n"},{"tags":[],"owner":{"account_id":658419,"reputation":11,"user_id":475494,"display_name":"Jai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1287043503,"creation_date":1287043503,"answer_id":3931222,"question_id":2159635,"body_markdown":"Its true guys, after using the UserEventModel, my performance was awesome. Please write to me, if you guys have any issues. djeakandane@gmail.com","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>Its true guys, after using the UserEventModel, my performance was awesome. Please write to me, if you guys have any issues. djeakandane@gmail.com</p>\n"},{"tags":[],"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1310817961,"creation_date":1310817961,"answer_id":6717232,"question_id":2159635,"body_markdown":"As others have said, your best bet is to switch over the the [Event API](http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api)\r\n\r\nOne thing that&#39;ll make a small difference though is to not wrap your file in an input stream! XSSF will happily accept a File as the input, and that&#39;s a lower memory footprint than an InputStream. That&#39;s because POI needs random access to the contents, and with an input stream the only way to do that is to buffer the whole contents into memory. With a File, it can just seek around. Using a File rather than an InputStream will save you a little over the size of the file worth of memory.\r\n\r\nIf you can, you should pass a File. If memory is tight, write your InputStream to a file and use that!","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>As others have said, your best bet is to switch over the the <a href=\"http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api\" rel=\"nofollow\">Event API</a></p>\n\n<p>One thing that'll make a small difference though is to not wrap your file in an input stream! XSSF will happily accept a File as the input, and that's a lower memory footprint than an InputStream. That's because POI needs random access to the contents, and with an input stream the only way to do that is to buffer the whole contents into memory. With a File, it can just seek around. Using a File rather than an InputStream will save you a little over the size of the file worth of memory.</p>\n\n<p>If you can, you should pass a File. If memory is tight, write your InputStream to a file and use that!</p>\n"},{"tags":[],"owner":{"account_id":258934,"reputation":193,"user_id":1507864,"accept_rate":100,"display_name":"jRam90"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1347571537,"creation_date":1347571537,"answer_id":12415024,"question_id":2159635,"body_markdown":"You should really look forward to process the XML data grid behind XLSX technology. You will be liberated from the heap space problems. \r\nHere is the tutorial:\r\nCheck both links below.\r\n\r\nhttp://poi.apache.org/spreadsheet/how-to.html\r\n\r\nhttp://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xssf/eventusermodel/examples/FromHowTo.java\r\n\r\nSome basic knowledge of parsing and the use of the SAX-XML project is required.","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>You should really look forward to process the XML data grid behind XLSX technology. You will be liberated from the heap space problems. \nHere is the tutorial:\nCheck both links below.</p>\n\n<p><a href=\"http://poi.apache.org/spreadsheet/how-to.html\" rel=\"nofollow\">http://poi.apache.org/spreadsheet/how-to.html</a></p>\n\n<p><a href=\"http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xssf/eventusermodel/examples/FromHowTo.java\" rel=\"nofollow\">http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xssf/eventusermodel/examples/FromHowTo.java</a></p>\n\n<p>Some basic knowledge of parsing and the use of the SAX-XML project is required.</p>\n"},{"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1359032992,"creation_date":1359032992,"answer_id":14502136,"question_id":2159635,"body_markdown":"The JVM runs with fixed available memory. Once this memory is exceed you will receive &quot;java.lang.OutOfMemoryError&quot;. The JVM tries to make an intelligent choice about the available memory at startup (see Java settings for details) but you can overwrite the default with the following settings.\r\n\r\nTo turn performance you can use certain parameters in the JVM.\r\nXms1024m - Set the minimum available memory for the JVM to 1024 Megabyte\r\nXmx1800m - Set the maximum available memory for the JVM to 1800 Megabyte. The Java application cannot use more heap memory then defined via this parameter.\r\n\r\nIf you start your Java program from the command line use for example the following setting: java -Xmx1024m YourProgram.","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>The JVM runs with fixed available memory. Once this memory is exceed you will receive \"java.lang.OutOfMemoryError\". The JVM tries to make an intelligent choice about the available memory at startup (see Java settings for details) but you can overwrite the default with the following settings.</p>\n\n<p>To turn performance you can use certain parameters in the JVM.\nXms1024m - Set the minimum available memory for the JVM to 1024 Megabyte\nXmx1800m - Set the maximum available memory for the JVM to 1800 Megabyte. The Java application cannot use more heap memory then defined via this parameter.</p>\n\n<p>If you start your Java program from the command line use for example the following setting: java -Xmx1024m YourProgram.</p>\n"},{"tags":[],"owner":{"account_id":114354,"reputation":1,"user_id":300754,"display_name":"Kiran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380531792,"creation_date":1380531792,"answer_id":19090252,"question_id":2159635,"body_markdown":"You can use SXSSF, A low-memory footprint SXSSF API built on top of XSSF. &quot;http://poi.apache.org/spreadsheet/how-to.html#sxssf&quot;","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>You can use SXSSF, A low-memory footprint SXSSF API built on top of XSSF. \"<a href=\"http://poi.apache.org/spreadsheet/how-to.html#sxssf\" rel=\"nofollow\">http://poi.apache.org/spreadsheet/how-to.html#sxssf</a>\"</p>\n"}],"owner":{"account_id":53182,"reputation":1019,"user_id":158989,"accept_rate":81,"display_name":"Developer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10197,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":2160494,"answer_count":9,"score":4,"last_activity_date":1639068230,"creation_date":1264734381,"question_id":2159635,"body_markdown":"I am using the latest POI 3.5 for Excel reading . I have Excel MS office 2007 installed and for that poi is providing XSSF for executing  the data. \r\n\r\nFor 15000 lines of data it is executing properly, but when exceeding the limit till 30000 or 100000 or 200000, it is prone to a Java heap space Exception.\r\n\r\nCode is below :\r\n\r\n    UATinput = new FileInputStream(UATFilePath);\r\n\r\n    uatBufferedInputStream = new BufferedInputStream(UATinput);\r\n\r\n    UATworkbook = new XSSFWorkbook(uatBufferedInputStream);\r\n\r\n\r\nI am getting the Exception in the last line for Java heap size.\r\nI have increased the size using `-Xms256m -Xmx1536m`, but still for more data it is giving the Java heap space Exception.  \r\n\r\nCan anybody help me out for this Exception for the XSSFWorbook?\r\n\r\n\r\n","title":"Excel POI 3.5 WorkBook Java Heap Space Exception?","body":"<p>I am using the latest POI 3.5 for Excel reading . I have Excel MS office 2007 installed and for that poi is providing XSSF for executing  the data. </p>\n\n<p>For 15000 lines of data it is executing properly, but when exceeding the limit till 30000 or 100000 or 200000, it is prone to a Java heap space Exception.</p>\n\n<p>Code is below :</p>\n\n<pre><code>UATinput = new FileInputStream(UATFilePath);\n\nuatBufferedInputStream = new BufferedInputStream(UATinput);\n\nUATworkbook = new XSSFWorkbook(uatBufferedInputStream);\n</code></pre>\n\n<p>I am getting the Exception in the last line for Java heap size.\nI have increased the size using <code>-Xms256m -Xmx1536m</code>, but still for more data it is giving the Java heap space Exception.  </p>\n\n<p>Can anybody help me out for this Exception for the XSSFWorbook?</p>\n"},{"tags":["java","tomcat","heap-memory","hudson","tomcat6"],"comments":[{"owner":{"account_id":72101,"reputation":15566,"user_id":208288,"accept_rate":67,"display_name":"Laird Nelson"},"score":0,"creation_date":1264952021,"post_id":2172220,"comment_id":2117963,"body_markdown":"I should mention that I have attached to Tomcat with jconsole and observed that the heap usage never climbs above 60MB.","body":"I should mention that I have attached to Tomcat with jconsole and observed that the heap usage never climbs above 60MB."}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1264952697,"creation_date":1264952697,"answer_id":2172257,"question_id":2172220,"body_markdown":"The `.hprof` files are dumped in the current directory. Exactly what that means for a windows service is anyone&#39;s guess, assuming it means anything.\r\n\r\nI suggest posting a new question (on http://superuser.com) asking what &quot;current directory&quot; means for a windows service.","title":"Can I get Tomcat running as a service to dump heap?","body":"<p>The <code>.hprof</code> files are dumped in the current directory. Exactly what that means for a windows service is anyone's guess, assuming it means anything.</p>\n\n<p>I suggest posting a new question (on <a href=\"http://superuser.com\">http://superuser.com</a>) asking what \"current directory\" means for a windows service.</p>\n"},{"tags":[],"owner":{"account_id":18523,"reputation":5667,"user_id":42512,"accept_rate":73,"display_name":"Gennady Shumakher"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1264954245,"creation_date":1264954245,"answer_id":2172340,"question_id":2172220,"body_markdown":"Have you tried -XX:HeapDumpPath option?\r\n\r\n[http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp][1]\r\n\r\n\r\n  [1]: http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp","title":"Can I get Tomcat running as a service to dump heap?","body":"<p>Have you tried -XX:HeapDumpPath option?</p>\n\n<p><a href=\"http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp\" rel=\"nofollow noreferrer\">http://java.sun.com/javase/technologies/hotspot/vmoptions.jsp</a></p>\n"},{"tags":[],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1264958177,"creation_date":1264958177,"answer_id":2172563,"question_id":2172220,"body_markdown":"[From 20 Tips for Using Tomcat in Production](http://www.digitalsanctum.com/2007/08/18/20-tips-for-using-tomcat-in-production/)\r\n\r\nAdd the following to your JAVA_OPTS in catalina.sh (or catalina.bat for Windows): -`XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/j2ee/heapdumps` ","title":"Can I get Tomcat running as a service to dump heap?","body":"<p><a href=\"http://www.digitalsanctum.com/2007/08/18/20-tips-for-using-tomcat-in-production/\" rel=\"nofollow noreferrer\">From 20 Tips for Using Tomcat in Production</a></p>\n\n<p>Add the following to your JAVA_OPTS in catalina.sh (or catalina.bat for Windows): -<code>XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/j2ee/heapdumps</code> </p>\n"},{"tags":[],"owner":{"account_id":70324,"reputation":16215,"user_id":204042,"accept_rate":100,"display_name":"Peter Schuetze"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1265035765,"creation_date":1265035765,"answer_id":2177460,"question_id":2172220,"body_markdown":"I found the following link, which describes how to configure the tomcat service (includes setting the java parameters). Not sure if it applies to the version you are running.\r\n\r\n[http://tomcat.apache.org/tomcat-5.5-doc/windows-service-howto.html][1]\r\n\r\n\r\n  [1]: http://tomcat.apache.org/tomcat-5.5-doc/windows-service-howto.html","title":"Can I get Tomcat running as a service to dump heap?","body":"<p>I found the following link, which describes how to configure the tomcat service (includes setting the java parameters). Not sure if it applies to the version you are running.</p>\n\n<p><a href=\"http://tomcat.apache.org/tomcat-5.5-doc/windows-service-howto.html\" rel=\"nofollow noreferrer\">http://tomcat.apache.org/tomcat-5.5-doc/windows-service-howto.html</a></p>\n"},{"tags":[],"owner":{"account_id":72101,"reputation":15566,"user_id":208288,"accept_rate":67,"display_name":"Laird Nelson"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1265821640,"creation_date":1265821640,"answer_id":2238762,"question_id":2172220,"body_markdown":"After finally putting this one to bed, I wanted to answer this for others who might have the same problem.\r\n\r\nFirst, if you install Tomcat on Windows, do not use the `.exe` installer, even though it is promoted by Apache.  It will not let you run Tomcat as anything other than the system account, no matter what you do.  It appears that the system account does not have privileges to write `.hprof` files in the current directory, and no amount of Windows security tweaking appears to make this problem go away.\r\n\r\nOK, so you&#39;ve installed Tomcat from the `.zip` distribution.  Install it as a service using the `service.bat` script.  Make sure it is set to run as a specific user that you created specifically for this purpose.  Make sure as well that the folder you want Tomcat to write to in the event of a heap dump is writable by that user.\r\n\r\nEdit the `service.bat` file to include the `-XX:+HeapDumpOnOutOfMemoryError` and the `-XX:HeapDumpPath=C:\\whatever` options in the correct place (where you can put JVM options).  That should do the trick.","title":"Can I get Tomcat running as a service to dump heap?","body":"<p>After finally putting this one to bed, I wanted to answer this for others who might have the same problem.</p>\n\n<p>First, if you install Tomcat on Windows, do not use the <code>.exe</code> installer, even though it is promoted by Apache.  It will not let you run Tomcat as anything other than the system account, no matter what you do.  It appears that the system account does not have privileges to write <code>.hprof</code> files in the current directory, and no amount of Windows security tweaking appears to make this problem go away.</p>\n\n<p>OK, so you've installed Tomcat from the <code>.zip</code> distribution.  Install it as a service using the <code>service.bat</code> script.  Make sure it is set to run as a specific user that you created specifically for this purpose.  Make sure as well that the folder you want Tomcat to write to in the event of a heap dump is writable by that user.</p>\n\n<p>Edit the <code>service.bat</code> file to include the <code>-XX:+HeapDumpOnOutOfMemoryError</code> and the <code>-XX:HeapDumpPath=C:\\whatever</code> options in the correct place (where you can put JVM options).  That should do the trick.</p>\n"},{"tags":[],"owner":{"account_id":2496585,"reputation":1681,"user_id":2172800,"accept_rate":75,"display_name":"Adeel Ahmad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391081494,"creation_date":1363329537,"answer_id":15426270,"question_id":2172220,"body_markdown":"if you have installed tomcat with .exe you can configure tomcat service to use account other than local system account and you can assign that user rights on directory &quot;c:\\whatever&quot; where you are creating your dump file. one thing here to remember tomcat service don&#39;t run with account having administrative privileges. so create a simple user in windows(member of user group) and set tomcat services to user this account. and give that user rights on &quot;c:\\whatever&quot; directory. This resolves the user directory rights issue but you have to configure tomcat for Memory dumps errors.","title":"Can I get Tomcat running as a service to dump heap?","body":"<p>if you have installed tomcat with .exe you can configure tomcat service to use account other than local system account and you can assign that user rights on directory \"c:\\whatever\" where you are creating your dump file. one thing here to remember tomcat service don't run with account having administrative privileges. so create a simple user in windows(member of user group) and set tomcat services to user this account. and give that user rights on \"c:\\whatever\" directory. This resolves the user directory rights issue but you have to configure tomcat for Memory dumps errors.</p>\n"},{"tags":[],"owner":{"account_id":5100890,"reputation":2796,"user_id":4090550,"display_name":"Anil Agrawal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1482305026,"creation_date":1482305026,"answer_id":41257237,"question_id":2172220,"body_markdown":"When java process running as window service you can generate the heapdump using below steps,\r\n\r\n 1. Run the command console as Administrator\r\n 2. version of JDK (for jmap command) and JRE (Java app run environment) should be same.\r\n 3. Get the PID no of running window process for that java application from task manager\r\n 4. Execute below command\r\n\r\n&gt; jmap -dump:file=d:\\heapdump\\myHeapDump.hprof -F #PID_No#\r\n\r\nIf got any exception with JDK/JRE 7 try the same with JDK/JRE 8\r\n Actually I faced some issue in jmap with JDK 7, but when i moved to JDK 8, I were able to successfully generate the heap dump using same command","title":"Can I get Tomcat running as a service to dump heap?","body":"<p>When java process running as window service you can generate the heapdump using below steps,</p>\n\n<ol>\n<li>Run the command console as Administrator</li>\n<li>version of JDK (for jmap command) and JRE (Java app run environment) should be same.</li>\n<li>Get the PID no of running window process for that java application from task manager</li>\n<li>Execute below command</li>\n</ol>\n\n<blockquote>\n  <p>jmap -dump:file=d:\\heapdump\\myHeapDump.hprof -F #PID_No#</p>\n</blockquote>\n\n<p>If got any exception with JDK/JRE 7 try the same with JDK/JRE 8\n Actually I faced some issue in jmap with JDK 7, but when i moved to JDK 8, I were able to successfully generate the heap dump using same command</p>\n"}],"owner":{"account_id":72101,"reputation":15566,"user_id":208288,"accept_rate":67,"display_name":"Laird Nelson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15145,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":2238762,"answer_count":7,"score":10,"last_activity_date":1639068215,"creation_date":1264951973,"question_id":2172220,"body_markdown":"I am attempting to have Tomcat, which is currently running as a service on a Windows 2003 box, dump heap on an `OutOfMemoryError`.\r\n\r\n(Tomcat is running Hudson, which is reporting a heap space problem at the tail end of my build.  Running the build manually produces no such error.  The Hudson guys need a heap dump to get started.)\r\n\r\nAs instructed elsewhere, I&#39;ve told the Apache Service Monitor to configure the JVM it uses to run Tomcat to dump heap when an `OutOfMemoryError` is encountered by adding the following to the JVM options:\r\n-XX:+HeapDumpOnOutOfMemoryError\r\nThen I run the build again.  Sure enough, it reports there was a heap error.  I scan the entire disk looking for the default `java_pid123.hprof` file (where obviously `123` is replaced by the PID of the JVM).  No `.hprof` files exist anywhere.\r\n\r\nI am caught in a catch 22: I need the heap dump for the Hudson guys to fix their memory leak, but I can&#39;t get the heap dump if I run Hudson under Tomcat.\r\n\r\nIs there some special way, when Tomcat is running as a Windows service, to get a heap dump from it on an OutOfMemoryError?\r\n\r\nThe other thing I&#39;ve tried is to tell it, on the Startup and Shutdown tabs, to use the &quot;Java&quot; option instead of the &quot;jvm&quot; option.  I believe this should tell the Service Manager to attempt to start Tomcat with a Java executable command instead of launching the `jvm.dll` directly.  When I do this, the service won&#39;t start.\r\n\r\nSurely someone else has had a similar problem?","title":"Can I get Tomcat running as a service to dump heap?","body":"<p>I am attempting to have Tomcat, which is currently running as a service on a Windows 2003 box, dump heap on an <code>OutOfMemoryError</code>.</p>\n\n<p>(Tomcat is running Hudson, which is reporting a heap space problem at the tail end of my build.  Running the build manually produces no such error.  The Hudson guys need a heap dump to get started.)</p>\n\n<p>As instructed elsewhere, I've told the Apache Service Monitor to configure the JVM it uses to run Tomcat to dump heap when an <code>OutOfMemoryError</code> is encountered by adding the following to the JVM options:\n-XX:+HeapDumpOnOutOfMemoryError\nThen I run the build again.  Sure enough, it reports there was a heap error.  I scan the entire disk looking for the default <code>java_pid123.hprof</code> file (where obviously <code>123</code> is replaced by the PID of the JVM).  No <code>.hprof</code> files exist anywhere.</p>\n\n<p>I am caught in a catch 22: I need the heap dump for the Hudson guys to fix their memory leak, but I can't get the heap dump if I run Hudson under Tomcat.</p>\n\n<p>Is there some special way, when Tomcat is running as a Windows service, to get a heap dump from it on an OutOfMemoryError?</p>\n\n<p>The other thing I've tried is to tell it, on the Startup and Shutdown tabs, to use the \"Java\" option instead of the \"jvm\" option.  I believe this should tell the Service Manager to attempt to start Tomcat with a Java executable command instead of launching the <code>jvm.dll</code> directly.  When I do this, the service won't start.</p>\n\n<p>Surely someone else has had a similar problem?</p>\n"},{"tags":["java","swing","netbeans","heap-memory","jtextarea"],"comments":[{"owner":{"account_id":784,"reputation":6613,"user_id":1448983,"accept_rate":100,"display_name":"Steen"},"score":1,"creation_date":1265716684,"post_id":2228734,"comment_id":2183597,"body_markdown":"This very much sounds like you&#39;re running out of space in the java.awt.Component. What does .getSize() on the JTextArea tell you?","body":"This very much sounds like you&#39;re running out of space in the java.awt.Component. What does .getSize() on the JTextArea tell you?"},{"owner":{"account_id":49136,"reputation":5011,"user_id":146197,"accept_rate":93,"display_name":"M. A. Kishawy"},"score":1,"creation_date":1265716932,"post_id":2228734,"comment_id":2183630,"body_markdown":"My program doesn&#39;t start working till user click on a button. However the problem of jTextArea is clear in the GUI as soon as you paste the 65 thousand line...you can tell not all the text is pasted.","body":"My program doesn&#39;t start working till user click on a button. However the problem of jTextArea is clear in the GUI as soon as you paste the 65 thousand line...you can tell not all the text is pasted."},{"owner":{"account_id":49136,"reputation":5011,"user_id":146197,"accept_rate":93,"display_name":"M. A. Kishawy"},"score":1,"creation_date":1265742626,"post_id":2228734,"comment_id":2187032,"body_markdown":"Yes! I just noticed it!\n&quot;Java.lang.OutOfMemoryError: Java heap spaces&quot;","body":"Yes! I just noticed it! &quot;Java.lang.OutOfMemoryError: Java heap spaces&quot;"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":2,"creation_date":1265745056,"post_id":2228734,"comment_id":2187368,"body_markdown":"@MAK: You can give your program more heap space from the `java` command-line. http://java.sun.com/javase/6/docs/technotes/tools/index.html","body":"@MAK: You can give your program more heap space from the <code>java</code> command-line. <a href=\"http://java.sun.com/javase/6/docs/technotes/tools/index.html\" rel=\"nofollow noreferrer\">java.sun.com/javase/6/docs/technotes/tools/index.html</a>"},{"owner":{"account_id":49136,"reputation":5011,"user_id":146197,"accept_rate":93,"display_name":"M. A. Kishawy"},"score":0,"creation_date":1265780900,"post_id":2228734,"comment_id":2190549,"body_markdown":"trashgod : Which one increase the heap size?","body":"trashgod : Which one increase the heap size?"}],"answers":[{"tags":[],"owner":{"account_id":95999,"reputation":7037,"user_id":261156,"display_name":"Catalina Island"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1265740157,"creation_date":1265740157,"answer_id":2231468,"question_id":2228734,"body_markdown":"Here&#39;s an example I made like the [tutorial](http://java.sun.com/docs/books/tutorial/uiswing/components/textarea.html). With enough heap space, I can paste more than 200,000 lines. Are you maybe missing an exception on the event queue?\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n\r\n    public class JTextAreaPasteTest {\r\n\r\n        private String testStr = &quot;Paste text here.&quot;;\r\n\r\n        public static void main(String argv[]) {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                public void run() {\r\n                    new JTextAreaPasteTest();\r\n                }\r\n            });\r\n        }\r\n\r\n        public JTextAreaPasteTest () {\r\n            JFrame frame = new JFrame();\r\n            frame.setDefaultCloseOperation(JDialog.EXIT_ON_CLOSE);\r\n            PasteArea wrapArea = new PasteArea(&quot;Paste text here.&quot;);\r\n            frame.setLayout(new FlowLayout());\r\n            frame.add(new JScrollPane(wrapArea));\r\n            frame.pack();\r\n            frame.setVisible(true);\r\n        }\r\n\r\n        private static class PasteArea extends JTextArea {\r\n\r\n            public PasteArea(String str) {\r\n                super(str, 20, 40);\r\n                this.setLineWrap(true);\r\n                this.setWrapStyleWord(true);\r\n                this.setCaretPosition(str.length());\r\n            }\r\n        }\r\n    }","title":"Why Java JTextArea doesn&#39;t receive the entire pasted text?","body":"<p>Here's an example I made like the <a href=\"http://java.sun.com/docs/books/tutorial/uiswing/components/textarea.html\" rel=\"nofollow noreferrer\">tutorial</a>. With enough heap space, I can paste more than 200,000 lines. Are you maybe missing an exception on the event queue?</p>\n\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class JTextAreaPasteTest {\n\n    private String testStr = \"Paste text here.\";\n\n    public static void main(String argv[]) {\n        EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                new JTextAreaPasteTest();\n            }\n        });\n    }\n\n    public JTextAreaPasteTest () {\n        JFrame frame = new JFrame();\n        frame.setDefaultCloseOperation(JDialog.EXIT_ON_CLOSE);\n        PasteArea wrapArea = new PasteArea(\"Paste text here.\");\n        frame.setLayout(new FlowLayout());\n        frame.add(new JScrollPane(wrapArea));\n        frame.pack();\n        frame.setVisible(true);\n    }\n\n    private static class PasteArea extends JTextArea {\n\n        public PasteArea(String str) {\n            super(str, 20, 40);\n            this.setLineWrap(true);\n            this.setWrapStyleWord(true);\n            this.setCaretPosition(str.length());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87753,"reputation":2467,"user_id":243191,"display_name":"Timothy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1265815428,"creation_date":1265815428,"answer_id":2237917,"question_id":2228734,"body_markdown":"\r\nThe Java Virtual Machine takes two command line arguments which set the initial and maximum heap sizes:\r\n\r\n-Xms and -Xmx. For example if you want to give your Java program a 64Mb initial and 256Mb maximum heap size you could launch it as follows: \r\n\r\n    java -Xms64m -Xmx256m my_prog","title":"Why Java JTextArea doesn&#39;t receive the entire pasted text?","body":"<p>The Java Virtual Machine takes two command line arguments which set the initial and maximum heap sizes:</p>\n\n<p>-Xms and -Xmx. For example if you want to give your Java program a 64Mb initial and 256Mb maximum heap size you could launch it as follows: </p>\n\n<pre><code>java -Xms64m -Xmx256m my_prog\n</code></pre>\n"}],"owner":{"account_id":49136,"reputation":5011,"user_id":146197,"accept_rate":93,"display_name":"M. A. Kishawy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1493,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":2237917,"answer_count":2,"score":3,"last_activity_date":1639068204,"creation_date":1265715916,"question_id":2228734,"body_markdown":"Using Netbeans 6.8 (Mac Version) drag and drop tool for making the GUI, I have designed a JTextArea which the user should paste his data which the program will modify and show it to him.\r\n\r\nIt is working fine; however, when I tried to paste about 65 thousand lines of testing data in the JTextArea, the GUI showed only a few of these lines (like 50 or less)... for some reason it refused to paste the entire testing data which I copied from Notepad.\r\n\r\nI thought the JTextArea was full or something, but when I tried to type more text manually (after the pasting of the testing data), it was typing and showing in the textbox!\r\n\r\nAny idea what is going on?\r\n\r\n\r\n----------\r\n\r\n\r\n**Update 001**\r\n\r\nI&#39;m getting  the following error \r\n\r\n    Java.lang.OutOfMemoryError: Java heap spaces\r\n\r\n\r\n----------\r\n\r\n\r\n**Update 002**\r\n\r\n\r\n    package bossconverter;\r\n    \r\n    import org.jdesktop.application.Action;\r\n    import org.jdesktop.application.ResourceMap;\r\n    import org.jdesktop.application.SingleFrameApplication;\r\n    import org.jdesktop.application.FrameView;\r\n    import org.jdesktop.application.TaskMonitor;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.Timer;\r\n    import javax.swing.Icon;\r\n    import javax.swing.JDialog;\r\n    import javax.swing.JFrame;\r\n\r\n    /**\r\n     * The application&#39;s main frame.\r\n     */\r\n    public class BOSSConverterView extends FrameView {\r\n\r\n    public BOSSConverterView(SingleFrameApplication app) {\r\n        super(app);\r\n\r\n        initComponents();\r\n\r\n        // status bar initialization - message timeout, idle icon and busy animation, etc\r\n        ResourceMap resourceMap = getResourceMap();\r\n        int messageTimeout = resourceMap.getInteger(&quot;StatusBar.messageTimeout&quot;);\r\n        messageTimer = new Timer(messageTimeout, new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                statusMessageLabel.setText(&quot;&quot;);\r\n            }\r\n        });\r\n        messageTimer.setRepeats(false);\r\n        int busyAnimationRate = resourceMap.getInteger(&quot;StatusBar.busyAnimationRate&quot;);\r\n        for (int i = 0; i &lt; busyIcons.length; i++) {\r\n            busyIcons[i] = resourceMap.getIcon(&quot;StatusBar.busyIcons[&quot; + i + &quot;]&quot;);\r\n        }\r\n        busyIconTimer = new Timer(busyAnimationRate, new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                busyIconIndex = (busyIconIndex + 1) % busyIcons.length;\r\n                statusAnimationLabel.setIcon(busyIcons[busyIconIndex]);\r\n            }\r\n        });\r\n        idleIcon = resourceMap.getIcon(&quot;StatusBar.idleIcon&quot;);\r\n        statusAnimationLabel.setIcon(idleIcon);\r\n        progressBar.setVisible(false);\r\n\r\n        // connecting action tasks to status bar via TaskMonitor\r\n        TaskMonitor taskMonitor = new TaskMonitor(getApplication().getContext());\r\n        taskMonitor.addPropertyChangeListener(new java.beans.PropertyChangeListener() {\r\n            public void propertyChange(java.beans.PropertyChangeEvent evt) {\r\n                String propertyName = evt.getPropertyName();\r\n                if (&quot;started&quot;.equals(propertyName)) {\r\n                    if (!busyIconTimer.isRunning()) {\r\n                        statusAnimationLabel.setIcon(busyIcons[0]);\r\n                        busyIconIndex = 0;\r\n                        busyIconTimer.start();\r\n                    }\r\n                    progressBar.setVisible(true);\r\n                    progressBar.setIndeterminate(true);\r\n                } else if (&quot;done&quot;.equals(propertyName)) {\r\n                    busyIconTimer.stop();\r\n                    statusAnimationLabel.setIcon(idleIcon);\r\n                    progressBar.setVisible(false);\r\n                    progressBar.setValue(0);\r\n                } else if (&quot;message&quot;.equals(propertyName)) {\r\n                    String text = (String)(evt.getNewValue());\r\n                    statusMessageLabel.setText((text == null) ? &quot;&quot; : text);\r\n                    messageTimer.restart();\r\n                } else if (&quot;progress&quot;.equals(propertyName)) {\r\n                    int value = (Integer)(evt.getNewValue());\r\n                    progressBar.setVisible(true);\r\n                    progressBar.setIndeterminate(false);\r\n                    progressBar.setValue(value);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @Action\r\n    public void showAboutBox() {\r\n        if (aboutBox == null) {\r\n            JFrame mainFrame = BOSSConverterApp.getApplication().getMainFrame();\r\n            aboutBox = new BOSSConverterAboutBox(mainFrame);\r\n            aboutBox.setLocationRelativeTo(mainFrame);\r\n        }\r\n        BOSSConverterApp.getApplication().show(aboutBox);\r\n    }\r\n\r\n    /** This method is called from within the constructor to\r\n     * initialize the form.\r\n     * WARNING: Do NOT modify this code. The content of this method is\r\n     * always regenerated by the Form Editor.\r\n     */\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot;Generated Code&quot;&gt;\r\n    private void initComponents() {\r\n\r\n        mainPanel = new javax.swing.JPanel();\r\n        jScrollPane1 = new javax.swing.JScrollPane();\r\n        jTextArea1 = new javax.swing.JTextArea();\r\n        jScrollPane2 = new javax.swing.JScrollPane();\r\n        jTextArea2 = new javax.swing.JTextArea();\r\n        jButton1 = new javax.swing.JButton();\r\n        menuBar = new javax.swing.JMenuBar();\r\n        javax.swing.JMenu fileMenu = new javax.swing.JMenu();\r\n        javax.swing.JMenuItem exitMenuItem = new javax.swing.JMenuItem();\r\n        javax.swing.JMenu helpMenu = new javax.swing.JMenu();\r\n        javax.swing.JMenuItem aboutMenuItem = new javax.swing.JMenuItem();\r\n        statusPanel = new javax.swing.JPanel();\r\n        javax.swing.JSeparator statusPanelSeparator = new javax.swing.JSeparator();\r\n        statusMessageLabel = new javax.swing.JLabel();\r\n        statusAnimationLabel = new javax.swing.JLabel();\r\n        progressBar = new javax.swing.JProgressBar();\r\n\r\n        mainPanel.setName(&quot;mainPanel&quot;); // NOI18N\r\n\r\n        jScrollPane1.setName(&quot;jScrollPane1&quot;); // NOI18N\r\n\r\n        jTextArea1.setColumns(20);\r\n        jTextArea1.setRows(5);\r\n        jTextArea1.setName(&quot;jTextArea1&quot;); // NOI18N\r\n        jScrollPane1.setViewportView(jTextArea1);\r\n\r\n        jScrollPane2.setName(&quot;jScrollPane2&quot;); // NOI18N\r\n\r\n        jTextArea2.setColumns(20);\r\n        jTextArea2.setRows(5);\r\n        jTextArea2.setName(&quot;jTextArea2&quot;); // NOI18N\r\n        jScrollPane2.setViewportView(jTextArea2);\r\n\r\n        org.jdesktop.application.ResourceMap resourceMap =\r\n                    org.jdesktop.application.Application.getInstance\r\n                      (bossconverter.BOSSConverterApp.class).getContext()\r\n                      .getResourceMap(BOSSConverterView.class);\r\n        jButton1.setText(resourceMap.getString(&quot;jButton1.text&quot;)); // NOI18N\r\n        jButton1.setName(&quot;jButton1&quot;); // NOI18N\r\n        jButton1.addMouseListener(new java.awt.event.MouseAdapter() {\r\n            public void mouseClicked(java.awt.event.MouseEvent evt) {\r\n                tester(evt);\r\n            }\r\n        });\r\n\r\n        org.jdesktop.layout.GroupLayout mainPanelLayout =\r\n                     new org.jdesktop.layout.GroupLayout(mainPanel);\r\n        mainPanel.setLayout(mainPanelLayout);\r\n        mainPanelLayout.setHorizontalGroup(\r\n            mainPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\r\n            .add(mainPanelLayout.createSequentialGroup()\r\n                .addContainerGap()\r\n                .add(mainPanelLayout.createParallelGroup(org.jdesktop.layout\r\n                                                         .GroupLayout.LEADING)\r\n                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\r\n                         383, Short.MAX_VALUE)\r\n                    .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\r\n                         383, Short.MAX_VALUE)\r\n                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jButton1))\r\n                .addContainerGap())\r\n        );\r\n        mainPanelLayout.setVerticalGroup(\r\n            mainPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\r\n            .add(mainPanelLayout.createSequentialGroup()\r\n                .addContainerGap()\r\n                .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,\r\n                     98, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                .add(18, 18, 18)\r\n                .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,\r\n                     97, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)\r\n                .add(jButton1)\r\n                .addContainerGap(22, Short.MAX_VALUE))\r\n        );\r\n\r\n        menuBar.setName(&quot;menuBar&quot;); // NOI18N\r\n\r\n        fileMenu.setText(resourceMap.getString(&quot;fileMenu.text&quot;)); // NOI18N\r\n        fileMenu.setName(&quot;fileMenu&quot;); // NOI18N\r\n\r\n        javax.swing.ActionMap actionMap = org.jdesktop.application.Application\r\n                                          .getInstance(bossconverter.BOSSConverterApp\r\n                                          .class).getContext().getActionMap\r\n                                          (BOSSConverterView.class, this);\r\n        exitMenuItem.setAction(actionMap.get(&quot;quit&quot;)); // NOI18N\r\n        exitMenuItem.setName(&quot;exitMenuItem&quot;); // NOI18N\r\n        fileMenu.add(exitMenuItem);\r\n\r\n        menuBar.add(fileMenu);\r\n\r\n        helpMenu.setText(resourceMap.getString(&quot;helpMenu.text&quot;)); // NOI18N\r\n        helpMenu.setName(&quot;helpMenu&quot;); // NOI18N\r\n\r\n        aboutMenuItem.setAction(actionMap.get(&quot;showAboutBox&quot;)); // NOI18N\r\n        aboutMenuItem.setName(&quot;aboutMenuItem&quot;); // NOI18N\r\n        helpMenu.add(aboutMenuItem);\r\n\r\n        menuBar.add(helpMenu);\r\n\r\n        statusPanel.setName(&quot;statusPanel&quot;); // NOI18N\r\n\r\n        statusPanelSeparator.setName(&quot;statusPanelSeparator&quot;); // NOI18N\r\n\r\n        statusMessageLabel.setName(&quot;statusMessageLabel&quot;); // NOI18N\r\n\r\n        statusAnimationLabel.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);\r\n        statusAnimationLabel.setName(&quot;statusAnimationLabel&quot;); // NOI18N\r\n\r\n        progressBar.setName(&quot;progressBar&quot;); // NOI18N\r\n\r\n        org.jdesktop.layout.GroupLayout statusPanelLayout = new org.jdesktop.layout\r\n                                                            .GroupLayout(statusPanel);\r\n        statusPanel.setLayout(statusPanelLayout);\r\n        statusPanelLayout.setHorizontalGroup(\r\n            statusPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout\r\n                                                  .LEADING)\r\n            .add(statusPanelSeparator, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\r\n                 423, Short.MAX_VALUE)\r\n            .add(statusPanelLayout.createSequentialGroup()\r\n                .addContainerGap()\r\n                .add(statusMessageLabel)\r\n                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 227,\r\n                                 Short.MAX_VALUE)\r\n                .add(progressBar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,\r\n                     org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\r\n                     org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)\r\n                .add(statusAnimationLabel)\r\n                .addContainerGap())\r\n        );\r\n        statusPanelLayout.setVerticalGroup(\r\n            statusPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout\r\n                                                  .LEADING)\r\n            .add(statusPanelLayout.createSequentialGroup()\r\n                .add(statusPanelSeparator, org.jdesktop.layout.GroupLayout\r\n                     .PREFERRED_SIZE, 2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\r\n                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED,\r\n                                 org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\r\n                                 Short.MAX_VALUE)\r\n                .add(statusPanelLayout.createParallelGroup(org.jdesktop.layout\r\n                                                           .GroupLayout.BASELINE)\r\n                    .add(statusMessageLabel)\r\n                    .add(statusAnimationLabel)\r\n                    .add(progressBar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,\r\n                         org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\r\n                         org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))\r\n                .add(3, 3, 3))\r\n        );\r\n\r\n        setComponent(mainPanel);\r\n        setMenuBar(menuBar);\r\n        setStatusBar(statusPanel);\r\n    }// &lt;/editor-fold&gt;\r\n\r\n    private void tester(java.awt.event.MouseEvent evt) {\r\n        \r\n        Converter converter = new Converter();\r\n        jTextArea2.setText(converter.fixParsedParagraph (jTextArea1.getText()) );\r\n    }\r\n\r\n    // Variables declaration - do not modify\r\n    private javax.swing.JButton jButton1;\r\n    private javax.swing.JScrollPane jScrollPane1;\r\n    private javax.swing.JScrollPane jScrollPane2;\r\n    private javax.swing.JTextArea jTextArea1;\r\n    private javax.swing.JTextArea jTextArea2;\r\n    private javax.swing.JPanel mainPanel;\r\n    private javax.swing.JMenuBar menuBar;\r\n    private javax.swing.JProgressBar progressBar;\r\n    private javax.swing.JLabel statusAnimationLabel;\r\n    private javax.swing.JLabel statusMessageLabel;\r\n    private javax.swing.JPanel statusPanel;\r\n    // End of variables declaration\r\n\r\n    private final Timer messageTimer;\r\n    private final Timer busyIconTimer;\r\n    private final Icon idleIcon;\r\n    private final Icon[] busyIcons = new Icon[15];\r\n    private int busyIconIndex = 0;\r\n\r\n    private JDialog aboutBox;\r\n    }\r\nThis is the code which was generated automatically by netbeans for my GUI. \r\n\r\nSo is there something that need to be fixed in it?\r\n","title":"Why Java JTextArea doesn&#39;t receive the entire pasted text?","body":"<p>Using Netbeans 6.8 (Mac Version) drag and drop tool for making the GUI, I have designed a JTextArea which the user should paste his data which the program will modify and show it to him.</p>\n\n<p>It is working fine; however, when I tried to paste about 65 thousand lines of testing data in the JTextArea, the GUI showed only a few of these lines (like 50 or less)... for some reason it refused to paste the entire testing data which I copied from Notepad.</p>\n\n<p>I thought the JTextArea was full or something, but when I tried to type more text manually (after the pasting of the testing data), it was typing and showing in the textbox!</p>\n\n<p>Any idea what is going on?</p>\n\n<hr>\n\n<p><strong>Update 001</strong></p>\n\n<p>I'm getting  the following error </p>\n\n<pre><code>Java.lang.OutOfMemoryError: Java heap spaces\n</code></pre>\n\n<hr>\n\n<p><strong>Update 002</strong></p>\n\n<pre><code>package bossconverter;\n\nimport org.jdesktop.application.Action;\nimport org.jdesktop.application.ResourceMap;\nimport org.jdesktop.application.SingleFrameApplication;\nimport org.jdesktop.application.FrameView;\nimport org.jdesktop.application.TaskMonitor;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.Timer;\nimport javax.swing.Icon;\nimport javax.swing.JDialog;\nimport javax.swing.JFrame;\n\n/**\n * The application's main frame.\n */\npublic class BOSSConverterView extends FrameView {\n\npublic BOSSConverterView(SingleFrameApplication app) {\n    super(app);\n\n    initComponents();\n\n    // status bar initialization - message timeout, idle icon and busy animation, etc\n    ResourceMap resourceMap = getResourceMap();\n    int messageTimeout = resourceMap.getInteger(\"StatusBar.messageTimeout\");\n    messageTimer = new Timer(messageTimeout, new ActionListener() {\n        public void actionPerformed(ActionEvent e) {\n            statusMessageLabel.setText(\"\");\n        }\n    });\n    messageTimer.setRepeats(false);\n    int busyAnimationRate = resourceMap.getInteger(\"StatusBar.busyAnimationRate\");\n    for (int i = 0; i &lt; busyIcons.length; i++) {\n        busyIcons[i] = resourceMap.getIcon(\"StatusBar.busyIcons[\" + i + \"]\");\n    }\n    busyIconTimer = new Timer(busyAnimationRate, new ActionListener() {\n        public void actionPerformed(ActionEvent e) {\n            busyIconIndex = (busyIconIndex + 1) % busyIcons.length;\n            statusAnimationLabel.setIcon(busyIcons[busyIconIndex]);\n        }\n    });\n    idleIcon = resourceMap.getIcon(\"StatusBar.idleIcon\");\n    statusAnimationLabel.setIcon(idleIcon);\n    progressBar.setVisible(false);\n\n    // connecting action tasks to status bar via TaskMonitor\n    TaskMonitor taskMonitor = new TaskMonitor(getApplication().getContext());\n    taskMonitor.addPropertyChangeListener(new java.beans.PropertyChangeListener() {\n        public void propertyChange(java.beans.PropertyChangeEvent evt) {\n            String propertyName = evt.getPropertyName();\n            if (\"started\".equals(propertyName)) {\n                if (!busyIconTimer.isRunning()) {\n                    statusAnimationLabel.setIcon(busyIcons[0]);\n                    busyIconIndex = 0;\n                    busyIconTimer.start();\n                }\n                progressBar.setVisible(true);\n                progressBar.setIndeterminate(true);\n            } else if (\"done\".equals(propertyName)) {\n                busyIconTimer.stop();\n                statusAnimationLabel.setIcon(idleIcon);\n                progressBar.setVisible(false);\n                progressBar.setValue(0);\n            } else if (\"message\".equals(propertyName)) {\n                String text = (String)(evt.getNewValue());\n                statusMessageLabel.setText((text == null) ? \"\" : text);\n                messageTimer.restart();\n            } else if (\"progress\".equals(propertyName)) {\n                int value = (Integer)(evt.getNewValue());\n                progressBar.setVisible(true);\n                progressBar.setIndeterminate(false);\n                progressBar.setValue(value);\n            }\n        }\n    });\n}\n\n@Action\npublic void showAboutBox() {\n    if (aboutBox == null) {\n        JFrame mainFrame = BOSSConverterApp.getApplication().getMainFrame();\n        aboutBox = new BOSSConverterAboutBox(mainFrame);\n        aboutBox.setLocationRelativeTo(mainFrame);\n    }\n    BOSSConverterApp.getApplication().show(aboutBox);\n}\n\n/** This method is called from within the constructor to\n * initialize the form.\n * WARNING: Do NOT modify this code. The content of this method is\n * always regenerated by the Form Editor.\n */\n@SuppressWarnings(\"unchecked\")\n// &lt;editor-fold defaultstate=\"collapsed\" desc=\"Generated Code\"&gt;\nprivate void initComponents() {\n\n    mainPanel = new javax.swing.JPanel();\n    jScrollPane1 = new javax.swing.JScrollPane();\n    jTextArea1 = new javax.swing.JTextArea();\n    jScrollPane2 = new javax.swing.JScrollPane();\n    jTextArea2 = new javax.swing.JTextArea();\n    jButton1 = new javax.swing.JButton();\n    menuBar = new javax.swing.JMenuBar();\n    javax.swing.JMenu fileMenu = new javax.swing.JMenu();\n    javax.swing.JMenuItem exitMenuItem = new javax.swing.JMenuItem();\n    javax.swing.JMenu helpMenu = new javax.swing.JMenu();\n    javax.swing.JMenuItem aboutMenuItem = new javax.swing.JMenuItem();\n    statusPanel = new javax.swing.JPanel();\n    javax.swing.JSeparator statusPanelSeparator = new javax.swing.JSeparator();\n    statusMessageLabel = new javax.swing.JLabel();\n    statusAnimationLabel = new javax.swing.JLabel();\n    progressBar = new javax.swing.JProgressBar();\n\n    mainPanel.setName(\"mainPanel\"); // NOI18N\n\n    jScrollPane1.setName(\"jScrollPane1\"); // NOI18N\n\n    jTextArea1.setColumns(20);\n    jTextArea1.setRows(5);\n    jTextArea1.setName(\"jTextArea1\"); // NOI18N\n    jScrollPane1.setViewportView(jTextArea1);\n\n    jScrollPane2.setName(\"jScrollPane2\"); // NOI18N\n\n    jTextArea2.setColumns(20);\n    jTextArea2.setRows(5);\n    jTextArea2.setName(\"jTextArea2\"); // NOI18N\n    jScrollPane2.setViewportView(jTextArea2);\n\n    org.jdesktop.application.ResourceMap resourceMap =\n                org.jdesktop.application.Application.getInstance\n                  (bossconverter.BOSSConverterApp.class).getContext()\n                  .getResourceMap(BOSSConverterView.class);\n    jButton1.setText(resourceMap.getString(\"jButton1.text\")); // NOI18N\n    jButton1.setName(\"jButton1\"); // NOI18N\n    jButton1.addMouseListener(new java.awt.event.MouseAdapter() {\n        public void mouseClicked(java.awt.event.MouseEvent evt) {\n            tester(evt);\n        }\n    });\n\n    org.jdesktop.layout.GroupLayout mainPanelLayout =\n                 new org.jdesktop.layout.GroupLayout(mainPanel);\n    mainPanel.setLayout(mainPanelLayout);\n    mainPanelLayout.setHorizontalGroup(\n        mainPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n        .add(mainPanelLayout.createSequentialGroup()\n            .addContainerGap()\n            .add(mainPanelLayout.createParallelGroup(org.jdesktop.layout\n                                                     .GroupLayout.LEADING)\n                .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\n                     383, Short.MAX_VALUE)\n                .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\n                     383, Short.MAX_VALUE)\n                .add(org.jdesktop.layout.GroupLayout.TRAILING, jButton1))\n            .addContainerGap())\n    );\n    mainPanelLayout.setVerticalGroup(\n        mainPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)\n        .add(mainPanelLayout.createSequentialGroup()\n            .addContainerGap()\n            .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,\n                 98, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n            .add(18, 18, 18)\n            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,\n                 97, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n            .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)\n            .add(jButton1)\n            .addContainerGap(22, Short.MAX_VALUE))\n    );\n\n    menuBar.setName(\"menuBar\"); // NOI18N\n\n    fileMenu.setText(resourceMap.getString(\"fileMenu.text\")); // NOI18N\n    fileMenu.setName(\"fileMenu\"); // NOI18N\n\n    javax.swing.ActionMap actionMap = org.jdesktop.application.Application\n                                      .getInstance(bossconverter.BOSSConverterApp\n                                      .class).getContext().getActionMap\n                                      (BOSSConverterView.class, this);\n    exitMenuItem.setAction(actionMap.get(\"quit\")); // NOI18N\n    exitMenuItem.setName(\"exitMenuItem\"); // NOI18N\n    fileMenu.add(exitMenuItem);\n\n    menuBar.add(fileMenu);\n\n    helpMenu.setText(resourceMap.getString(\"helpMenu.text\")); // NOI18N\n    helpMenu.setName(\"helpMenu\"); // NOI18N\n\n    aboutMenuItem.setAction(actionMap.get(\"showAboutBox\")); // NOI18N\n    aboutMenuItem.setName(\"aboutMenuItem\"); // NOI18N\n    helpMenu.add(aboutMenuItem);\n\n    menuBar.add(helpMenu);\n\n    statusPanel.setName(\"statusPanel\"); // NOI18N\n\n    statusPanelSeparator.setName(\"statusPanelSeparator\"); // NOI18N\n\n    statusMessageLabel.setName(\"statusMessageLabel\"); // NOI18N\n\n    statusAnimationLabel.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);\n    statusAnimationLabel.setName(\"statusAnimationLabel\"); // NOI18N\n\n    progressBar.setName(\"progressBar\"); // NOI18N\n\n    org.jdesktop.layout.GroupLayout statusPanelLayout = new org.jdesktop.layout\n                                                        .GroupLayout(statusPanel);\n    statusPanel.setLayout(statusPanelLayout);\n    statusPanelLayout.setHorizontalGroup(\n        statusPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout\n                                              .LEADING)\n        .add(statusPanelSeparator, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\n             423, Short.MAX_VALUE)\n        .add(statusPanelLayout.createSequentialGroup()\n            .addContainerGap()\n            .add(statusMessageLabel)\n            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 227,\n                             Short.MAX_VALUE)\n            .add(progressBar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,\n                 org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\n                 org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)\n            .add(statusAnimationLabel)\n            .addContainerGap())\n    );\n    statusPanelLayout.setVerticalGroup(\n        statusPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout\n                                              .LEADING)\n        .add(statusPanelLayout.createSequentialGroup()\n            .add(statusPanelSeparator, org.jdesktop.layout.GroupLayout\n                 .PREFERRED_SIZE, 2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)\n            .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED,\n                             org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\n                             Short.MAX_VALUE)\n            .add(statusPanelLayout.createParallelGroup(org.jdesktop.layout\n                                                       .GroupLayout.BASELINE)\n                .add(statusMessageLabel)\n                .add(statusAnimationLabel)\n                .add(progressBar, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE,\n                     org.jdesktop.layout.GroupLayout.DEFAULT_SIZE,\n                     org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))\n            .add(3, 3, 3))\n    );\n\n    setComponent(mainPanel);\n    setMenuBar(menuBar);\n    setStatusBar(statusPanel);\n}// &lt;/editor-fold&gt;\n\nprivate void tester(java.awt.event.MouseEvent evt) {\n\n    Converter converter = new Converter();\n    jTextArea2.setText(converter.fixParsedParagraph (jTextArea1.getText()) );\n}\n\n// Variables declaration - do not modify\nprivate javax.swing.JButton jButton1;\nprivate javax.swing.JScrollPane jScrollPane1;\nprivate javax.swing.JScrollPane jScrollPane2;\nprivate javax.swing.JTextArea jTextArea1;\nprivate javax.swing.JTextArea jTextArea2;\nprivate javax.swing.JPanel mainPanel;\nprivate javax.swing.JMenuBar menuBar;\nprivate javax.swing.JProgressBar progressBar;\nprivate javax.swing.JLabel statusAnimationLabel;\nprivate javax.swing.JLabel statusMessageLabel;\nprivate javax.swing.JPanel statusPanel;\n// End of variables declaration\n\nprivate final Timer messageTimer;\nprivate final Timer busyIconTimer;\nprivate final Icon idleIcon;\nprivate final Icon[] busyIcons = new Icon[15];\nprivate int busyIconIndex = 0;\n\nprivate JDialog aboutBox;\n}\n</code></pre>\n\n<p>This is the code which was generated automatically by netbeans for my GUI. </p>\n\n<p>So is there something that need to be fixed in it?</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":78982,"reputation":59009,"user_id":224346,"display_name":"Anon."},"score":9,"creation_date":1266179029,"post_id":2262620,"comment_id":2223640,"body_markdown":"For what reason do you need to know the number of live heap objects? Chances are there&#39;s a better way to do what you want.","body":"For what reason do you need to know the number of live heap objects? Chances are there&#39;s a better way to do what you want."},{"owner":{"account_id":80211,"reputation":58977,"user_id":226958,"accept_rate":76,"display_name":"Nicolas Raoul"},"score":1,"creation_date":1513829832,"post_id":2262620,"comment_id":82803587,"body_markdown":"Do you want to get this information from within the program itself? Or using a debugging tool?","body":"Do you want to get this information from within the program itself? Or using a debugging tool?"}],"answers":[{"tags":[],"owner":{"account_id":50124,"reputation":3055,"user_id":149395,"accept_rate":75,"display_name":"Scharrels"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1266179208,"creation_date":1266179208,"answer_id":2262631,"question_id":2262620,"body_markdown":"As far as I know, you cannot. You can, however, get the amount of memory used for the program:\r\n\r\n     Runtime rt = Runtime.getRuntime();\r\n     System.out.println(&quot;Used: &quot; + (rt.totalMemory() - rt.freeMemory());\r\n     System.out.println(&quot;Free: &quot; + rt.freeMemory());\r\n     System.out.println(&quot;Total: &quot; + rt.totalMemory());\r\n","title":"How to find the number of objects in the heap","body":"<p>As far as I know, you cannot. You can, however, get the amount of memory used for the program:</p>\n\n<pre><code> Runtime rt = Runtime.getRuntime();\n System.out.println(\"Used: \" + (rt.totalMemory() - rt.freeMemory());\n System.out.println(\"Free: \" + rt.freeMemory());\n System.out.println(\"Total: \" + rt.totalMemory());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1266180026,"creation_date":1266180026,"answer_id":2262673,"question_id":2262620,"body_markdown":"If all your objects are created using some kind of `Factory` class you can find number of objects in the heap. Even then you have to have something in the `finalize()` method. Of course, this cannot be done for all objects, e.g. the jdk library classes cannot be modified. But if you want to find number of instances of a particular class you have created you can potentially find that.","title":"How to find the number of objects in the heap","body":"<p>If all your objects are created using some kind of <code>Factory</code> class you can find number of objects in the heap. Even then you have to have something in the <code>finalize()</code> method. Of course, this cannot be done for all objects, e.g. the jdk library classes cannot be modified. But if you want to find number of instances of a particular class you have created you can potentially find that.</p>\n"},{"tags":[],"owner":{"account_id":55671,"reputation":983,"user_id":166771,"display_name":"Melv"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1266180938,"creation_date":1266180938,"answer_id":2262723,"question_id":2262620,"body_markdown":"For debugging, you can use a profiler (like YourKit, a commercial java profiler). You&#39;ll find both open source and commercial variants of java profilers.\r\n\r\nFor integration with your code, you might look at using &quot;Aspect Oriented Programming&quot; technique. AOP frameworks (e.g. AspectWerkz) let you change the class files at class load time. This will let you modify constructors to register objects to your &quot;all-my-runtime-objects-framework&quot;.","title":"How to find the number of objects in the heap","body":"<p>For debugging, you can use a profiler (like YourKit, a commercial java profiler). You'll find both open source and commercial variants of java profilers.</p>\n\n<p>For integration with your code, you might look at using \"Aspect Oriented Programming\" technique. AOP frameworks (e.g. AspectWerkz) let you change the class files at class load time. This will let you modify constructors to register objects to your \"all-my-runtime-objects-framework\".</p>\n"},{"tags":[],"owner":{"account_id":7795,"reputation":116405,"user_id":13663,"accept_rate":75,"display_name":"Will Hartung"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1266181190,"creation_date":1266181190,"answer_id":2262741,"question_id":2262620,"body_markdown":"jmap is the standard java utility that you can use to capture heap dumps and statistics. I can&#39;t say what protocol is used by jmap to connect to the JVM to get this info, and it&#39;s not clear if this information is available to a program running in the JVM directly (though I&#39;m sure the program can query it&#39;s JVM through some socket to get this information).\r\n\r\nJVM TI is a tool interface used by C code, and it has pretty much full access to the goings on of the JVM, but it is C code and not directly available by the JVM. You could probably write a C lib and then interface with it, but there&#39;s nothing out of the box.\r\n\r\nThere are several JMX MBeans, but I don&#39;t think any of them provide an actual object count. You can get memory statistics from these though (these are what JConsole uses). Check out the java.lang.management classes.\r\n\r\nIf you want some fast (easy to implement, not necessarily a quick result as a jmap takes some time), I&#39;d fork off a run of jmap, and simply read the resulting file.","title":"How to find the number of objects in the heap","body":"<p>jmap is the standard java utility that you can use to capture heap dumps and statistics. I can't say what protocol is used by jmap to connect to the JVM to get this info, and it's not clear if this information is available to a program running in the JVM directly (though I'm sure the program can query it's JVM through some socket to get this information).</p>\n\n<p>JVM TI is a tool interface used by C code, and it has pretty much full access to the goings on of the JVM, but it is C code and not directly available by the JVM. You could probably write a C lib and then interface with it, but there's nothing out of the box.</p>\n\n<p>There are several JMX MBeans, but I don't think any of them provide an actual object count. You can get memory statistics from these though (these are what JConsole uses). Check out the java.lang.management classes.</p>\n\n<p>If you want some fast (easy to implement, not necessarily a quick result as a jmap takes some time), I'd fork off a run of jmap, and simply read the resulting file.</p>\n"},{"tags":[],"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"down_vote_count":3,"up_vote_count":8,"is_accepted":true,"score":5,"last_activity_date":1266184391,"creation_date":1266184391,"answer_id":2262965,"question_id":2262620,"body_markdown":"There is a hack you can try:  \r\n\r\n* create your own java.lang.Object (copy the original source)\r\n* count the created objects in the constructor (not called for arrays)\r\n* add the path to your classfile to the boot classpath\r\n\r\nsee this (old) [article][1] for a sample.  \r\n\r\n*Probably  there are better ways to do it using [JPDA](http://java.sun.com/javase/6/docs/technotes/guides/jpda/index.html &quot;Java Platform Debugger Architecture&quot;) or [JMX](http://java.sun.com/javase/6/docs/technotes/guides/jmx/index.html &quot;Java Management Extensions&quot;), but I&#39;ve not found how...*\r\n\r\n\r\n  [1]: http://www.javaspecialists.eu/archive/Issue038a.html","title":"How to find the number of objects in the heap","body":"<p>There is a hack you can try:  </p>\n\n<ul>\n<li>create your own java.lang.Object (copy the original source)</li>\n<li>count the created objects in the constructor (not called for arrays)</li>\n<li>add the path to your classfile to the boot classpath</li>\n</ul>\n\n<p>see this (old) <a href=\"http://www.javaspecialists.eu/archive/Issue038a.html\" rel=\"noreferrer\">article</a> for a sample.  </p>\n\n<p><em>Probably  there are better ways to do it using <a href=\"http://java.sun.com/javase/6/docs/technotes/guides/jpda/index.html\" rel=\"noreferrer\" title=\"Java Platform Debugger Architecture\">JPDA</a> or <a href=\"http://java.sun.com/javase/6/docs/technotes/guides/jmx/index.html\" rel=\"noreferrer\" title=\"Java Management Extensions\">JMX</a>, but I've not found how...</em></p>\n"},{"tags":[],"owner":{"account_id":713432,"reputation":9,"user_id":622809,"display_name":"MALAY GHOSH"},"down_vote_count":6,"up_vote_count":2,"is_accepted":false,"score":-4,"last_activity_date":1310224230,"creation_date":1298018292,"answer_id":5039149,"question_id":2262620,"body_markdown":"    public class ObjectCount\r\n    {\r\n      static int i;\r\n    \r\n      ObjectCount()\r\n      {\r\n        System.out.println(++i);\r\n      }\r\n      public static void main(String args[])\r\n      {\r\n        ObjectCount oc = new ObjectCount();\r\n        ObjectCount od = new ObjectCount();\r\n        ObjectCount oe = new ObjectCount();\r\n        ObjectCount of = new ObjectCount();\r\n        ObjectCount og = new ObjectCount();\r\n      }\r\n    }","title":"How to find the number of objects in the heap","body":"<pre><code>public class ObjectCount\n{\n  static int i;\n\n  ObjectCount()\n  {\n    System.out.println(++i);\n  }\n  public static void main(String args[])\n  {\n    ObjectCount oc = new ObjectCount();\n    ObjectCount od = new ObjectCount();\n    ObjectCount oe = new ObjectCount();\n    ObjectCount of = new ObjectCount();\n    ObjectCount og = new ObjectCount();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":782206,"reputation":5,"user_id":833291,"display_name":"santhosh"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1310056467,"creation_date":1310032982,"answer_id":6608838,"question_id":2262620,"body_markdown":"    public class NumOfObjects {\r\n    \r\n    \tstatic int count=0;\r\n    \t{\r\n    \t\tcount++;\r\n    \t}\r\n    \tpublic static void main(String[] args)\r\n    \t{\r\n    \t\tNumOfObjects no1=new NumOfObjects();\r\n    \t\tSystem.out.println(&quot;no1:&quot; + count);//1\r\n    \t\t\r\n    \t\tNumOfObjects no2=new NumOfObjects();\r\n    \t\tSystem.out.println(&quot;no2:&quot;+ count); //2\r\n            for (int i=0; i&lt;10;i++)\r\n            {\r\n            \tNumOfObjects noi=new NumOfObjects();\t\r\n            }\r\n            System.out.println(&quot;Total objects:&quot;+count);// 12 \r\n    \t}\r\n    }","title":"How to find the number of objects in the heap","body":"<pre><code>public class NumOfObjects {\n\n    static int count=0;\n    {\n        count++;\n    }\n    public static void main(String[] args)\n    {\n        NumOfObjects no1=new NumOfObjects();\n        System.out.println(\"no1:\" + count);//1\n\n        NumOfObjects no2=new NumOfObjects();\n        System.out.println(\"no2:\"+ count); //2\n        for (int i=0; i&lt;10;i++)\n        {\n            NumOfObjects noi=new NumOfObjects();    \n        }\n        System.out.println(\"Total objects:\"+count);// 12 \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1068872,"reputation":2697,"user_id":1068627,"accept_rate":79,"display_name":"Bin Wang"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1399694755,"creation_date":1399694755,"answer_id":23576988,"question_id":2262620,"body_markdown":"Use [jvisualvm](https://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html), and do a memory sample. It will show the number of classes and instances:\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/FQd2Y.png","title":"How to find the number of objects in the heap","body":"<p>Use <a href=\"https://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html\" rel=\"noreferrer\">jvisualvm</a>, and do a memory sample. It will show the number of classes and instances:</p>\n\n<p><img src=\"https://i.stack.imgur.com/FQd2Y.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":5458806,"reputation":1,"user_id":4341513,"display_name":"Anji Pavuluri"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1418132209,"creation_date":1418130046,"answer_id":27379574,"question_id":2262620,"body_markdown":"    class Test1\r\n    {\r\n\t    static int count=0;\r\n\t\r\n    \tpublic Test1()\r\n\t    {\r\n\t\t    count++;\r\n    \t\tSystem.out.println(&quot;Total Objects&quot;+&quot; &quot;+count);\r\n\t    }\r\n    }\r\n    \r\n    public class CountTotalNumberOfObjects \r\n    {\r\n    \r\n\t    public static void main(String[] args) \r\n\t    {\r\n    \t    Test1 t = new Test1();\r\n\t        Test1 t1 = new Test1();\r\n        \tTest1 t3 = new Test1();\r\n        \tTest1 t11 = new Test1();\r\n        \tTest1 t111 = new Test1();\r\n        \tTest1 t13 = new Test1();\r\n\r\n    \t}\r\n\r\n    }\r\n","title":"How to find the number of objects in the heap","body":"<pre><code>class Test1\n{\n    static int count=0;\n\n    public Test1()\n    {\n        count++;\n        System.out.println(\"Total Objects\"+\" \"+count);\n    }\n}\n\npublic class CountTotalNumberOfObjects \n{\n\n    public static void main(String[] args) \n    {\n        Test1 t = new Test1();\n        Test1 t1 = new Test1();\n        Test1 t3 = new Test1();\n        Test1 t11 = new Test1();\n        Test1 t111 = new Test1();\n        Test1 t13 = new Test1();\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3617484,"reputation":13834,"user_id":3017003,"accept_rate":81,"display_name":"Jakub Kubrynski"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1431728908,"creation_date":1431728908,"answer_id":30269666,"question_id":2262620,"body_markdown":"The simplest way is to use `jmap` tool. If you will print objects histogram at the end you&#39;ll see total number of instances and also accumulated size of all objects:\r\n\r\n```jmap -histo &lt;PID&gt;``` will print whole objects with number of instances and size. The last line will contain total number\r\n\r\n`Total       2802946      174459656`\r\n\r\nSecond column is total instances count, and last is total bytes.","title":"How to find the number of objects in the heap","body":"<p>The simplest way is to use <code>jmap</code> tool. If you will print objects histogram at the end you'll see total number of instances and also accumulated size of all objects:</p>\n\n<p><code>jmap -histo &lt;PID&gt;</code> will print whole objects with number of instances and size. The last line will contain total number</p>\n\n<p><code>Total       2802946      174459656</code></p>\n\n<p>Second column is total instances count, and last is total bytes.</p>\n"}],"owner":{"account_id":99559,"reputation":17675,"user_id":268850,"accept_rate":68,"display_name":"java_geek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37424,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":2262965,"answer_count":10,"score":22,"last_activity_date":1639068173,"creation_date":1266178928,"question_id":2262620,"body_markdown":"How can I find the number of live objects on the heap in Java program?","title":"How to find the number of objects in the heap","body":"<p>How can I find the number of live objects on the heap in Java program?</p>\n"},{"tags":["java","selenium","xpath","textarea","gettext"],"comments":[{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1639063313,"post_id":70291236,"comment_id":124257323,"body_markdown":"What is the size of `inputs` list?","body":"What is the size of <code>inputs</code> list?"},{"owner":{"account_id":7927576,"reputation":3,"user_id":5986567,"display_name":"Rose"},"score":0,"creation_date":1639064896,"post_id":70291236,"comment_id":124258041,"body_markdown":"there is 4 fields with the same xpath, I want to check them all.","body":"there is 4 fields with the same xpath, I want to check them all."},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1639065224,"post_id":70291236,"comment_id":124258193,"body_markdown":"I asked about the actual size of `inputs` list you are actually getting with selenium with your code, not how many elements are on the web page matching that locator","body":"I asked about the actual size of <code>inputs</code> list you are actually getting with selenium with your code, not how many elements are on the web page matching that locator"},{"owner":{"account_id":7927576,"reputation":3,"user_id":5986567,"display_name":"Rose"},"score":0,"creation_date":1639067257,"post_id":70291236,"comment_id":124259097,"body_markdown":"size of inputs = 4,   but elementName = &quot;&quot;","body":"size of inputs = 4,   but elementName = &quot;&quot;"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1639067333,"post_id":70291236,"comment_id":124259131,"body_markdown":"I can&#39;t see any variable named `elementName` here","body":"I can&#39;t see any variable named <code>elementName</code> here"},{"owner":{"account_id":7927576,"reputation":3,"user_id":5986567,"display_name":"Rose"},"score":0,"creation_date":1639068267,"post_id":70291236,"comment_id":124259599,"body_markdown":"yes because i used the debug mode, so i found the size = 4 and the elementName of each xpath , which are all empty","body":"yes because i used the debug mode, so i found the size = 4 and the elementName of each xpath , which are all empty"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1639068504,"post_id":70291236,"comment_id":124259714,"body_markdown":"I don&#39;t know what is elementName here","body":"I don&#39;t know what is elementName here"}],"owner":{"account_id":7927576,"reputation":3,"user_id":5986567,"display_name":"Rose"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639068169,"creation_date":1639058465,"question_id":70291236,"body_markdown":"I&#39;am trying to localise the xpath of an element, and then to get the content of this element (which is a text, a grey field) and compare it with the expected string.\r\n\r\n    &lt;textarea _ngcontent-yjc-c213=&quot;&quot; role=&quot;combobox&quot; autocomplete=&quot;off&quot; aria-autocomplete=&quot;list&quot; nxinput=&quot;&quot; formcontrolname=&quot;labelToDisplay&quot; class=&quot;customer-infos cdk-text-field-autofill-monitored c-input is-disabled ng-untouched ng-pristine is-filled&quot; disabled=&quot;true&quot; id=&quot;nx-input-12&quot; aria-invalid=&quot;false&quot; aria-required=&quot;false&quot; aria-expanded=&quot;false&quot; aria-owns=&quot;nx-autocomplete-1&quot;&gt;&lt;/textarea&gt;\r\n\r\nso I prepared the xpath : \r\n\r\n     public ObjectElements inputs = new ObjectElements(&quot;Liste of inputs&quot;, By.xpath(&quot;(//az-activities-panel//nx-formfield//textarea&quot;));\r\n\r\nAnd when I try to get the content of this element, it doesn&#39;t return anything.\r\n\r\n    for (int i = 0; i &lt; inputs.size(); j++) {\r\n    inputs.get(i).getText();\r\n    }\r\n\r\nI&#39;m using the for because it&#39;s a list of elements with the same xpath.\r\n\r\nThank you.","title":"How to get the value of a textarea element Java?","body":"<p>I'am trying to localise the xpath of an element, and then to get the content of this element (which is a text, a grey field) and compare it with the expected string.</p>\n<pre><code>&lt;textarea _ngcontent-yjc-c213=&quot;&quot; role=&quot;combobox&quot; autocomplete=&quot;off&quot; aria-autocomplete=&quot;list&quot; nxinput=&quot;&quot; formcontrolname=&quot;labelToDisplay&quot; class=&quot;customer-infos cdk-text-field-autofill-monitored c-input is-disabled ng-untouched ng-pristine is-filled&quot; disabled=&quot;true&quot; id=&quot;nx-input-12&quot; aria-invalid=&quot;false&quot; aria-required=&quot;false&quot; aria-expanded=&quot;false&quot; aria-owns=&quot;nx-autocomplete-1&quot;&gt;&lt;/textarea&gt;\n</code></pre>\n<p>so I prepared the xpath :</p>\n<pre><code> public ObjectElements inputs = new ObjectElements(&quot;Liste of inputs&quot;, By.xpath(&quot;(//az-activities-panel//nx-formfield//textarea&quot;));\n</code></pre>\n<p>And when I try to get the content of this element, it doesn't return anything.</p>\n<pre><code>for (int i = 0; i &lt; inputs.size(); j++) {\ninputs.get(i).getText();\n}\n</code></pre>\n<p>I'm using the for because it's a list of elements with the same xpath.</p>\n<p>Thank you.</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":62950,"reputation":3354,"user_id":186663,"display_name":"PSpeed"},"score":1,"creation_date":1267359041,"post_id":2350960,"comment_id":2324254,"body_markdown":"You mention a DB... can you tell us more about what that is doing, what DB you are using, if you are closing your ResultSets, etc... seems a far more likely culprit.  Also, do you keep any references to the old models at all?  How much data do you load into a model?  Does your table have custom renderers?","body":"You mention a DB... can you tell us more about what that is doing, what DB you are using, if you are closing your ResultSets, etc... seems a far more likely culprit.  Also, do you keep any references to the old models at all?  How much data do you load into a model?  Does your table have custom renderers?"},{"owner":{"account_id":62950,"reputation":3354,"user_id":186663,"display_name":"PSpeed"},"score":0,"creation_date":1267359130,"post_id":2350960,"comment_id":2324258,"body_markdown":"Note: in the past I&#39;ve swapped JTable TableModels out that contained many thousands of rows... and never increased the heap size from default.  So something else it at play here.","body":"Note: in the past I&#39;ve swapped JTable TableModels out that contained many thousands of rows... and never increased the heap size from default.  So something else it at play here."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1267359232,"post_id":2350960,"comment_id":2324265,"body_markdown":"It&#39;s more likely to be your code that&#39;s the problem rather than the JVM.  Java certainly has bugs, but a memory &quot;leak&quot; in a class that&#39;s so fundamental since Java 1.0 would have been found and fixed.","body":"It&#39;s more likely to be your code that&#39;s the problem rather than the JVM.  Java certainly has bugs, but a memory &quot;leak&quot; in a class that&#39;s so fundamental since Java 1.0 would have been found and fixed."},{"owner":{"account_id":592845,"reputation":119,"user_id":283059,"display_name":"Miso"},"score":0,"creation_date":1267359444,"post_id":2350960,"comment_id":2324276,"body_markdown":"Well you can see the code but I am afraid you dont want to :-( Lot of DB selects etc. , I tested them as querys to see they bring correct results\n\nI use MySQL server\nI do NOT close ResultSets, should I? :)\nI do NOT keep references to old models, if you mean like saving them into arrays or lists or what\nI have custom table renderer for JSpinner","body":"Well you can see the code but I am afraid you dont want to :-( Lot of DB selects etc. , I tested them as querys to see they bring correct results  I use MySQL server I do NOT close ResultSets, should I? :) I do NOT keep references to old models, if you mean like saving them into arrays or lists or what I have custom table renderer for JSpinner"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1267359862,"post_id":2350960,"comment_id":2324302,"body_markdown":"Oh, I don&#39;t want to see the code.  That&#39;s your job.  Don&#39;t close ResultSets?  Oh, my.  I hope the smile is sarcastic.  If not, you should check your stuff much more carefully.","body":"Oh, I don&#39;t want to see the code.  That&#39;s your job.  Don&#39;t close ResultSets?  Oh, my.  I hope the smile is sarcastic.  If not, you should check your stuff much more carefully."},{"owner":{"account_id":592845,"reputation":119,"user_id":283059,"display_name":"Miso"},"score":0,"creation_date":1267360188,"post_id":2350960,"comment_id":2324324,"body_markdown":"Yes it was of course, I immediatelly tried closing them - nothing really changed :-(\n\nAnd lot of code is (unluckily) written im my mother tongue (like variables, db tables) thats why you wouldnt want to see :/","body":"Yes it was of course, I immediatelly tried closing them - nothing really changed :-(  And lot of code is (unluckily) written im my mother tongue (like variables, db tables) thats why you wouldnt want to see :/"}],"answers":[{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1267358604,"creation_date":1267358604,"answer_id":2350963,"question_id":2350960,"body_markdown":"Have you run a profiler like [YourKit][1] against this ? I suspect it&#39;ll show some memory leak due to references being held when they should be released. Note that `System.gc()` is a *hint* to the JVM, and doesn&#39;t force a GC cycle.\r\n\r\n*Alternatively*, your application may simply require more memory than the JVM is permitted to allocate. The JVM will only allocate up to a default maximum (dependent on your platform). Try increasing this via:\r\n\r\n    java -Xmx256m {classname}\r\n\r\netc. to see if this fixes the problem permanently. If it doesn&#39;t, then this points to a memory leak.\r\n\r\n\r\n  [1]: http://www.yourkit.com/","title":"Java consumes too much memory","body":"<p>Have you run a profiler like <a href=\"http://www.yourkit.com/\" rel=\"noreferrer\">YourKit</a> against this ? I suspect it'll show some memory leak due to references being held when they should be released. Note that <code>System.gc()</code> is a <em>hint</em> to the JVM, and doesn't force a GC cycle.</p>\n\n<p><em>Alternatively</em>, your application may simply require more memory than the JVM is permitted to allocate. The JVM will only allocate up to a default maximum (dependent on your platform). Try increasing this via:</p>\n\n<pre><code>java -Xmx256m {classname}\n</code></pre>\n\n<p>etc. to see if this fixes the problem permanently. If it doesn't, then this points to a memory leak.</p>\n"},{"tags":[],"owner":{"account_id":37982,"reputation":65378,"user_id":108796,"accept_rate":64,"display_name":"Blindy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267359487,"creation_date":1267359487,"answer_id":2350991,"question_id":2350960,"body_markdown":"A wild guess here, but as I see this a lot in C#, are your calendar/controls event handlers holding references to data that doesn&#39;t get cleaned up properly? Make sure you null out handles when you no longer need them as circular dependencies will lead to large leaks.","title":"Java consumes too much memory","body":"<p>A wild guess here, but as I see this a lot in C#, are your calendar/controls event handlers holding references to data that doesn't get cleaned up properly? Make sure you null out handles when you no longer need them as circular dependencies will lead to large leaks.</p>\n"},{"tags":[],"owner":{"account_id":1279,"reputation":20565,"user_id":1702,"accept_rate":90,"display_name":"Yuval F"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1267360549,"creation_date":1267360549,"answer_id":2351054,"question_id":2350960,"body_markdown":"Read Veijko Krunic&#39;s great paper [How to Fix Memory Leaks in Java][1]. He suggests a diagnostic path for similar problems. \r\n\r\n\r\n  [1]: http://olex.openlogic.com/wazi/2009/how-to-fix-memory-leaks-in-java/","title":"Java consumes too much memory","body":"<p>Read Veijko Krunic's great paper <a href=\"http://olex.openlogic.com/wazi/2009/how-to-fix-memory-leaks-in-java/\" rel=\"nofollow noreferrer\">How to Fix Memory Leaks in Java</a>. He suggests a diagnostic path for similar problems. </p>\n"},{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267379954,"creation_date":1267365139,"answer_id":2351218,"question_id":2350960,"body_markdown":"You don&#39;t need dates down to millisecond accuracy every time.  It looks to me like having the same day of week is sufficient. \r\n\r\nPersonally, I&#39;d figure out a way to prepopulate this calendar and cache it.  No need to re-create it each time.  It&#39;s worth a try.  If you reuse it each and every day, why re-create it each time?  Have a Timer repopulate it at midnight each day.  Make it read-only and allow all users to share it.\r\n\r\nDon&#39;t need a &quot;new&quot; Calendar each time, either.  I&#39;d do it this way:\r\n\r\n    Calendar cal = Calendar.getInstance();\r\n\r\nLet the factory dole it out.\r\n\r\nI&#39;d also recommend looking at a library like JODA for time.  It&#39;s certain to be more efficient than what you&#39;re doing here.\r\n\r\nUPDATE: Maybe [this][1] can help you ferret out your memory leak.  At least it&#39;s a checklist of where to start looking.  \r\n\r\n\r\n  [1]: http://www.javaworld.com/javaworld/jw-03-2006/jw-0313-leak.html","title":"Java consumes too much memory","body":"<p>You don't need dates down to millisecond accuracy every time.  It looks to me like having the same day of week is sufficient. </p>\n\n<p>Personally, I'd figure out a way to prepopulate this calendar and cache it.  No need to re-create it each time.  It's worth a try.  If you reuse it each and every day, why re-create it each time?  Have a Timer repopulate it at midnight each day.  Make it read-only and allow all users to share it.</p>\n\n<p>Don't need a \"new\" Calendar each time, either.  I'd do it this way:</p>\n\n<pre><code>Calendar cal = Calendar.getInstance();\n</code></pre>\n\n<p>Let the factory dole it out.</p>\n\n<p>I'd also recommend looking at a library like JODA for time.  It's certain to be more efficient than what you're doing here.</p>\n\n<p>UPDATE: Maybe <a href=\"http://www.javaworld.com/javaworld/jw-03-2006/jw-0313-leak.html\" rel=\"nofollow noreferrer\">this</a> can help you ferret out your memory leak.  At least it's a checklist of where to start looking.  </p>\n"},{"tags":[],"owner":{"account_id":23876,"reputation":2616,"user_id":60234,"accept_rate":76,"display_name":"Robin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1267367506,"creation_date":1267367506,"answer_id":2351325,"question_id":2350960,"body_markdown":"Clearly some amount of objects are getting created for each &#39;click&#39; on the calendar, These objects aren&#39;t getting garbage collected, hence the increasing memory usage and eventual crash. Without actually running the code, from looking at your code sample I&#39;d say a likely culprit is the anonymous inner class created here:\r\n\r\n    monthView.getSelectionModel().addDateSelectionListener(new DateSelectionListener() {\r\n      ...\r\n    }\r\n \r\nThe new DateSelectionListener you create will have a reference to this (the WorkerMonthViewHandler), I can&#39;t see exactly how that would cause an issue without knowing more about how initMonthView is used, but I&#39;ve found refactoring anonymous inner classes created as listeners on swing objects has helped identify and ultimately solve a number of memory leaks in the past. The listeners will exist as long as the swing object they are listening to exists, so will hang around even after you create a new WorkerMonthViewHandler assuming the original swing JTable is still the same. \r\n\r\n\r\nIf you want some further reading on this try this, [http://www.javalobby.org/java/forums/t19468.html][1]. \r\n\r\n\r\nHope this helps.\r\n\r\n\r\n  [1]: http://www.javalobby.org/java/forums/t19468.html","title":"Java consumes too much memory","body":"<p>Clearly some amount of objects are getting created for each 'click' on the calendar, These objects aren't getting garbage collected, hence the increasing memory usage and eventual crash. Without actually running the code, from looking at your code sample I'd say a likely culprit is the anonymous inner class created here:</p>\n\n<pre><code>monthView.getSelectionModel().addDateSelectionListener(new DateSelectionListener() {\n  ...\n}\n</code></pre>\n\n<p>The new DateSelectionListener you create will have a reference to this (the WorkerMonthViewHandler), I can't see exactly how that would cause an issue without knowing more about how initMonthView is used, but I've found refactoring anonymous inner classes created as listeners on swing objects has helped identify and ultimately solve a number of memory leaks in the past. The listeners will exist as long as the swing object they are listening to exists, so will hang around even after you create a new WorkerMonthViewHandler assuming the original swing JTable is still the same. </p>\n\n<p>If you want some further reading on this try this, <a href=\"http://www.javalobby.org/java/forums/t19468.html\" rel=\"nofollow noreferrer\">http://www.javalobby.org/java/forums/t19468.html</a>. </p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":30849,"reputation":39971,"user_id":84378,"accept_rate":85,"display_name":"Reverend Gonzo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267367764,"creation_date":1267367764,"answer_id":2351345,"question_id":2350960,"body_markdown":"This entirely sounds like a memory leak with your Swing components. There&#39;s some component which is being instantiated multiple times, and attached to something else (usually as a listener) so it can&#39;t be garbage collected, since there&#39;s still a valid reference to it. As someone else pointed, any profiler will help you find the source.\r\n\r\nTake a heap snapshot at the beginning of the application. Then after you hit the button about ten times, take another heap snapshot and do a diff. There should be a set of objects which you know shouldn&#39;t still be in memory, but are. Then you can find out what&#39;s holding the reference to it, and fix those.","title":"Java consumes too much memory","body":"<p>This entirely sounds like a memory leak with your Swing components. There's some component which is being instantiated multiple times, and attached to something else (usually as a listener) so it can't be garbage collected, since there's still a valid reference to it. As someone else pointed, any profiler will help you find the source.</p>\n\n<p>Take a heap snapshot at the beginning of the application. Then after you hit the button about ten times, take another heap snapshot and do a diff. There should be a set of objects which you know shouldn't still be in memory, but are. Then you can find out what's holding the reference to it, and fix those.</p>\n"},{"tags":[],"owner":{"account_id":36646,"reputation":4143,"user_id":104564,"accept_rate":100,"display_name":"Jim Rush"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267368265,"creation_date":1267368265,"answer_id":2351369,"question_id":2350960,"body_markdown":"It&#39;s hard to tell from the code, but any chance you are continuously adding FlaggedDates ?\r\n\r\n    public void initMonthView() {\r\n        List&lt;Task&gt; tasks = wops.getWorkerTasks(workerFrame.getWorker()); // db select\r\n        for (Task task : tasks) {\r\n            if (!monthView.getSelection().contains(task.getPlannedStart())) { \r\n                monthView.addFlaggedDates(task.getPlannedStart());\r\n                monthView.addFlaggedDates(task.gePlannedEnd()); // not really important\r\n            }\r\n        }\r\n\r\n ","title":"Java consumes too much memory","body":"<p>It's hard to tell from the code, but any chance you are continuously adding FlaggedDates ?</p>\n\n<pre><code>public void initMonthView() {\n    List&lt;Task&gt; tasks = wops.getWorkerTasks(workerFrame.getWorker()); // db select\n    for (Task task : tasks) {\n        if (!monthView.getSelection().contains(task.getPlannedStart())) { \n            monthView.addFlaggedDates(task.getPlannedStart());\n            monthView.addFlaggedDates(task.gePlannedEnd()); // not really important\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":592845,"reputation":119,"user_id":283059,"display_name":"Miso"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1561305897,"creation_date":1267382035,"answer_id":2352117,"question_id":2350960,"body_markdown":"Gentelmen, thank you all for answers.\r\n**I appreciate every single response**.\r\n\r\nI added my own to be more visible, cant really choose one correct.\r\n\r\nSo when you look more carefully to the code I posted in original question, you&#39;ll find these two lines\r\n\r\n            wtth = new WorkerTasksTableHandler(workerFrame,week);\r\n            wtth.createTable(); // sets model on JTable\r\n\r\nResult is, everytime NEW TableModel is created with its own Listener, as some of you noticed.\r\nSo now I only **reload** data (not whole model) and use original Listener.\r\n\r\nTake a look to the picture, now it consumes way too less RAM and GC actually works :)\r\n[![alt text][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WrMvE.jpg","title":"Java consumes too much memory","body":"<p>Gentelmen, thank you all for answers.\n<strong>I appreciate every single response</strong>.</p>\n\n<p>I added my own to be more visible, cant really choose one correct.</p>\n\n<p>So when you look more carefully to the code I posted in original question, you'll find these two lines</p>\n\n<pre><code>        wtth = new WorkerTasksTableHandler(workerFrame,week);\n        wtth.createTable(); // sets model on JTable\n</code></pre>\n\n<p>Result is, everytime NEW TableModel is created with its own Listener, as some of you noticed.\nSo now I only <strong>reload</strong> data (not whole model) and use original Listener.</p>\n\n<p>Take a look to the picture, now it consumes way too less RAM and GC actually works :)\n<a href=\"https://i.stack.imgur.com/WrMvE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WrMvE.jpg\" alt=\"alt text\"></a></p>\n"}],"owner":{"account_id":592845,"reputation":119,"user_id":283059,"display_name":"Miso"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7755,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":8,"score":12,"last_activity_date":1639068163,"creation_date":1267358513,"question_id":2350960,"body_markdown":"my Java written application consumes way too much memory.\r\n\r\n**How does program work** : User selects a date from calendar (GUI) and application loads data into JTable component. Everytime data is loaded, new TableModel is created and set. No new JTable is created, just model.\r\n\r\n**What is the problem?** : every new day selection from calendar and loading to JTable consumes about *2-3 MB of memory.* On start app consumes cca 50-60 MB of RAM, after few &quot;clicks&quot; on calendar (like 20), application **consumes full Heap Size (128MB)**. Application crashes, of course ...\r\n\r\n**What should I do?** : I am pretty sure database querys are OK. I might somehow set bigger heap size (I googled, but that would be only solution for my computer, users wont do this) OR I should somehow *remove old TableModel with DB data.* But shouldn&#39;t this be Garbage collector&#39;s work? I am able to force it (System.gc()) but that doesn&#39;t help ...\r\n\r\nThank you for any advice!\r\n\r\nEDIT : Code for Handling events of calendar (I deleted Javadoc, it is in my mother tongue)\r\n\r\n\r\n\r\n    package timesheet.handlers;\r\n    \r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.GregorianCalendar;\r\n    import java.util.List;\r\n    import org.jdesktop.swingx.JXMonthView;\r\n    import org.jdesktop.swingx.event.DateSelectionEvent;\r\n    import org.jdesktop.swingx.event.DateSelectionListener;\r\n    import timesheet.database.WorkerOperations;\r\n    import timesheet.frames.WorkerFrame;\r\n    import timesheet.logictrier.*;\r\n    \r\n\r\n    public class WorkerMonthViewHandler {\r\n        private JXMonthView monthView;\r\n        private WorkerFrame workerFrame;\r\n        private WorkerOperations wops;\r\n        private Date[] week = new Date[5];\r\n        private WorkerTasksTableHandler wtth;\r\n    \r\n        public WorkerMonthViewHandler(WorkerFrame workerFrame) {\r\n            this.workerFrame = workerFrame;\r\n            this.monthView = workerFrame.getWorkerMonthView();\r\n            wops = workerFrame.getWorkerOperations(); // for DB usage\r\n        }\r\n    \r\n        public void initMonthView() {\r\n            List&lt;Task&gt; tasks = wops.getWorkerTasks(workerFrame.getWorker()); // db select\r\n            for (Task task : tasks) {\r\n                if (!monthView.getSelection().contains(task.getPlannedStart())) { \r\n                    monthView.addFlaggedDates(task.getPlannedStart());\r\n                    monthView.addFlaggedDates(task.gePlannedEnd()); // not really important\r\n                }\r\n            }\r\n            monthView.setSelectionDate(new Date());\r\n            monthView.getSelectionModel().addDateSelectionListener(new DateSelectionListener() {\r\n                public void valueChanged(DateSelectionEvent dse) {\r\n                    Date d = monthView.getSelectionDate();\r\n                    for (int i=0; i&lt;week.length; i++) {\r\n                        if (d.equals(week[i])) {     \r\n                            return;\r\n                        }\r\n                    }\r\n                    Calendar cal = new GregorianCalendar();\r\n                    cal.setTime(d);\r\n                    long dayMs = 24 * 60 * 60 * 1000;\r\n                    switch (cal.get(Calendar.DAY_OF_WEEK)) {\r\n                        case(Calendar.MONDAY) : {\r\n                            week[0] = new Date(cal.getTimeInMillis());\r\n                            week[1] = new Date(cal.getTimeInMillis()+dayMs);\r\n                            week[2] = new Date(cal.getTimeInMillis()+2*dayMs);\r\n                            week[3] = new Date(cal.getTimeInMillis()+3*dayMs);\r\n                            week[4] = new Date(cal.getTimeInMillis()+4*dayMs);\r\n                        } break;\r\n                        case (Calendar.TUESDAY) : {\r\n                            week[0] = new Date(cal.getTimeInMillis()-dayMs);\r\n                            week[1] = new Date(cal.getTimeInMillis());\r\n                            week[2] = new Date(cal.getTimeInMillis()+1*dayMs);\r\n                            week[3] = new Date(cal.getTimeInMillis()+2*dayMs);\r\n                            week[4] = new Date(cal.getTimeInMillis()+3*dayMs);\r\n                        } break;\r\n                        case (Calendar.WEDNESDAY) : {\r\n                            week[0] = new Date(cal.getTimeInMillis()-2*dayMs);\r\n                            week[1] = new Date(cal.getTimeInMillis()-dayMs);\r\n                            week[2] = new Date(cal.getTimeInMillis());\r\n                            week[3] = new Date(cal.getTimeInMillis()+1*dayMs);\r\n                            week[4] = new Date(cal.getTimeInMillis()+2*dayMs);\r\n                        } break;\r\n                        case (Calendar.THURSDAY) : {\r\n                            week[0] = new Date(cal.getTimeInMillis()-3*dayMs);\r\n                            week[1] = new Date(cal.getTimeInMillis()-2*dayMs);\r\n                            week[2] = new Date(cal.getTimeInMillis()-1*dayMs);\r\n                            week[3] = new Date(cal.getTimeInMillis());\r\n                            week[4] = new Date(cal.getTimeInMillis()+1*dayMs);\r\n                        } break;\r\n                        case (Calendar.FRIDAY) : {\r\n                            week[0] = new Date(cal.getTimeInMillis()-4*dayMs);\r\n                            week[1] = new Date(cal.getTimeInMillis()-3*dayMs);\r\n                            week[2] = new Date(cal.getTimeInMillis()-2*dayMs);\r\n                            week[3] = new Date(cal.getTimeInMillis()-dayMs);\r\n                            week[4] = new Date(cal.getTimeInMillis());\r\n                        } break;\r\n                        case (Calendar.SATURDAY) : {\r\n                            week[0] = new Date(cal.getTimeInMillis()-5*dayMs);\r\n                            week[1] = new Date(cal.getTimeInMillis()-4*dayMs);\r\n                            week[2] = new Date(cal.getTimeInMillis()-3*dayMs);\r\n                            week[3] = new Date(cal.getTimeInMillis()-2*dayMs);\r\n                            week[4] = new Date(cal.getTimeInMillis()-dayMs);\r\n                        } break;\r\n                        case (Calendar.SUNDAY) : {\r\n                            week[0] = new Date(cal.getTimeInMillis()-6*dayMs);\r\n                            week[1] = new Date(cal.getTimeInMillis()-5*dayMs);\r\n                            week[2] = new Date(cal.getTimeInMillis()-4*dayMs);\r\n                            week[3] = new Date(cal.getTimeInMillis()-3*dayMs);\r\n                            week[4] = new Date(cal.getTimeInMillis()-2*dayMs);\r\n                        } break;\r\n                    }\r\n                    wtth = new WorkerTasksTableHandler(workerFrame,week);\r\n                    wtth.createTable(); // sets model on JTable\r\n                }\r\n            });\r\n        }\r\n    \r\n        public void reportTask() {\r\n            wtth.reportTasks(); // simple DB insert\r\n        }\r\n    }\r\n\r\n**Using NetBeans profiler :**\r\n  Date taken: Sun Feb 28 14:25:16 CET 2010\r\n    File: C:\\...\\private\\profiler\\java_pid4708.hprof\r\n    File size: 72,2 MB\r\n\r\n    Total bytes: 62 323 264\r\n    Total classes: 3 304\r\n    Total instances: 1 344 586\r\n    Classloaders: 18\r\n    GC roots: 2 860\r\n    Number of objects pending for finalization: 0","title":"Java consumes too much memory","body":"<p>my Java written application consumes way too much memory.</p>\n\n<p><strong>How does program work</strong> : User selects a date from calendar (GUI) and application loads data into JTable component. Everytime data is loaded, new TableModel is created and set. No new JTable is created, just model.</p>\n\n<p><strong>What is the problem?</strong> : every new day selection from calendar and loading to JTable consumes about <em>2-3 MB of memory.</em> On start app consumes cca 50-60 MB of RAM, after few \"clicks\" on calendar (like 20), application <strong>consumes full Heap Size (128MB)</strong>. Application crashes, of course ...</p>\n\n<p><strong>What should I do?</strong> : I am pretty sure database querys are OK. I might somehow set bigger heap size (I googled, but that would be only solution for my computer, users wont do this) OR I should somehow <em>remove old TableModel with DB data.</em> But shouldn't this be Garbage collector's work? I am able to force it (System.gc()) but that doesn't help ...</p>\n\n<p>Thank you for any advice!</p>\n\n<p>EDIT : Code for Handling events of calendar (I deleted Javadoc, it is in my mother tongue)</p>\n\n<pre><code>package timesheet.handlers;\n\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.GregorianCalendar;\nimport java.util.List;\nimport org.jdesktop.swingx.JXMonthView;\nimport org.jdesktop.swingx.event.DateSelectionEvent;\nimport org.jdesktop.swingx.event.DateSelectionListener;\nimport timesheet.database.WorkerOperations;\nimport timesheet.frames.WorkerFrame;\nimport timesheet.logictrier.*;\n\n\npublic class WorkerMonthViewHandler {\n    private JXMonthView monthView;\n    private WorkerFrame workerFrame;\n    private WorkerOperations wops;\n    private Date[] week = new Date[5];\n    private WorkerTasksTableHandler wtth;\n\n    public WorkerMonthViewHandler(WorkerFrame workerFrame) {\n        this.workerFrame = workerFrame;\n        this.monthView = workerFrame.getWorkerMonthView();\n        wops = workerFrame.getWorkerOperations(); // for DB usage\n    }\n\n    public void initMonthView() {\n        List&lt;Task&gt; tasks = wops.getWorkerTasks(workerFrame.getWorker()); // db select\n        for (Task task : tasks) {\n            if (!monthView.getSelection().contains(task.getPlannedStart())) { \n                monthView.addFlaggedDates(task.getPlannedStart());\n                monthView.addFlaggedDates(task.gePlannedEnd()); // not really important\n            }\n        }\n        monthView.setSelectionDate(new Date());\n        monthView.getSelectionModel().addDateSelectionListener(new DateSelectionListener() {\n            public void valueChanged(DateSelectionEvent dse) {\n                Date d = monthView.getSelectionDate();\n                for (int i=0; i&lt;week.length; i++) {\n                    if (d.equals(week[i])) {     \n                        return;\n                    }\n                }\n                Calendar cal = new GregorianCalendar();\n                cal.setTime(d);\n                long dayMs = 24 * 60 * 60 * 1000;\n                switch (cal.get(Calendar.DAY_OF_WEEK)) {\n                    case(Calendar.MONDAY) : {\n                        week[0] = new Date(cal.getTimeInMillis());\n                        week[1] = new Date(cal.getTimeInMillis()+dayMs);\n                        week[2] = new Date(cal.getTimeInMillis()+2*dayMs);\n                        week[3] = new Date(cal.getTimeInMillis()+3*dayMs);\n                        week[4] = new Date(cal.getTimeInMillis()+4*dayMs);\n                    } break;\n                    case (Calendar.TUESDAY) : {\n                        week[0] = new Date(cal.getTimeInMillis()-dayMs);\n                        week[1] = new Date(cal.getTimeInMillis());\n                        week[2] = new Date(cal.getTimeInMillis()+1*dayMs);\n                        week[3] = new Date(cal.getTimeInMillis()+2*dayMs);\n                        week[4] = new Date(cal.getTimeInMillis()+3*dayMs);\n                    } break;\n                    case (Calendar.WEDNESDAY) : {\n                        week[0] = new Date(cal.getTimeInMillis()-2*dayMs);\n                        week[1] = new Date(cal.getTimeInMillis()-dayMs);\n                        week[2] = new Date(cal.getTimeInMillis());\n                        week[3] = new Date(cal.getTimeInMillis()+1*dayMs);\n                        week[4] = new Date(cal.getTimeInMillis()+2*dayMs);\n                    } break;\n                    case (Calendar.THURSDAY) : {\n                        week[0] = new Date(cal.getTimeInMillis()-3*dayMs);\n                        week[1] = new Date(cal.getTimeInMillis()-2*dayMs);\n                        week[2] = new Date(cal.getTimeInMillis()-1*dayMs);\n                        week[3] = new Date(cal.getTimeInMillis());\n                        week[4] = new Date(cal.getTimeInMillis()+1*dayMs);\n                    } break;\n                    case (Calendar.FRIDAY) : {\n                        week[0] = new Date(cal.getTimeInMillis()-4*dayMs);\n                        week[1] = new Date(cal.getTimeInMillis()-3*dayMs);\n                        week[2] = new Date(cal.getTimeInMillis()-2*dayMs);\n                        week[3] = new Date(cal.getTimeInMillis()-dayMs);\n                        week[4] = new Date(cal.getTimeInMillis());\n                    } break;\n                    case (Calendar.SATURDAY) : {\n                        week[0] = new Date(cal.getTimeInMillis()-5*dayMs);\n                        week[1] = new Date(cal.getTimeInMillis()-4*dayMs);\n                        week[2] = new Date(cal.getTimeInMillis()-3*dayMs);\n                        week[3] = new Date(cal.getTimeInMillis()-2*dayMs);\n                        week[4] = new Date(cal.getTimeInMillis()-dayMs);\n                    } break;\n                    case (Calendar.SUNDAY) : {\n                        week[0] = new Date(cal.getTimeInMillis()-6*dayMs);\n                        week[1] = new Date(cal.getTimeInMillis()-5*dayMs);\n                        week[2] = new Date(cal.getTimeInMillis()-4*dayMs);\n                        week[3] = new Date(cal.getTimeInMillis()-3*dayMs);\n                        week[4] = new Date(cal.getTimeInMillis()-2*dayMs);\n                    } break;\n                }\n                wtth = new WorkerTasksTableHandler(workerFrame,week);\n                wtth.createTable(); // sets model on JTable\n            }\n        });\n    }\n\n    public void reportTask() {\n        wtth.reportTasks(); // simple DB insert\n    }\n}\n</code></pre>\n\n<p><strong>Using NetBeans profiler :</strong>\n  Date taken: Sun Feb 28 14:25:16 CET 2010\n    File: C:...\\private\\profiler\\java_pid4708.hprof\n    File size: 72,2 MB</p>\n\n<pre><code>Total bytes: 62 323 264\nTotal classes: 3 304\nTotal instances: 1 344 586\nClassloaders: 18\nGC roots: 2 860\nNumber of objects pending for finalization: 0\n</code></pre>\n"},{"tags":["java","plugins","maven-2","heap-memory","easyb"],"answers":[{"tags":[],"owner":{"account_id":40320,"reputation":1502,"user_id":116854,"accept_rate":62,"display_name":"seas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267568276,"creation_date":1267568276,"answer_id":2367276,"question_id":2367156,"body_markdown":"Try to define\r\n\r\n    JAVA_OPTS=-Xmx1024m -Xms1024m\r\n\r\nProbably, MAVEN_OPTS is even not necessary. My guess is that MAVEN forks a new JVM inside to run easyb. And, probably, it&#39;s wise of MAVEN to separate it&#39;s own JVM settings from settings for JVM it runs.","title":"Maven easyb plugin java heap space settings?","body":"<p>Try to define</p>\n\n<pre><code>JAVA_OPTS=-Xmx1024m -Xms1024m\n</code></pre>\n\n<p>Probably, MAVEN_OPTS is even not necessary. My guess is that MAVEN forks a new JVM inside to run easyb. And, probably, it's wise of MAVEN to separate it's own JVM settings from settings for JVM it runs.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1267568464,"creation_date":1267568464,"answer_id":2367292,"question_id":2367156,"body_markdown":"This is *Issue [77][1]: Enhancement: specify max memory for maven plugin* which is still &quot;New&quot; but has a patch (with tests) attached. So grab the sources, patch them and rebuild the plugin.\r\n\r\n\r\n  [1]: http://code.google.com/p/easyb/issues/detail?id=77&amp;q=memory&amp;colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary%20Component","title":"Maven easyb plugin java heap space settings?","body":"<p>This is <em>Issue <a href=\"http://code.google.com/p/easyb/issues/detail?id=77&amp;q=memory&amp;colspec=ID%20Type%20Status%20Priority%20Milestone%20Owner%20Summary%20Component\" rel=\"nofollow noreferrer\">77</a>: Enhancement: specify max memory for maven plugin</em> which is still \"New\" but has a patch (with tests) attached. So grab the sources, patch them and rebuild the plugin.</p>\n"}],"owner":{"account_id":593336,"reputation":31,"user_id":284809,"display_name":"vinnu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":881,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1639068150,"creation_date":1267567285,"question_id":2367156,"body_markdown":"I attempted to change my heap size for maven easyb plugin \r\nhttp://www.easyb.org/maven-easyb-plugin/. In my easyb test I added \r\nstandard code to print the heap size using the code \r\nRuntime.getFreeMemory() and Runtime.getTotalMemory(). \r\n\r\nI tried setting the MAVEN_OPTS=-Xmx1024m -Xms1024m and also set the \r\nmaven opts in Maven surefire plugin. Now when I run the same class \r\nfrom the Junit I can see the getTotalMemory() displaying a number \r\nclose 1Gig but the when the same classes are invoked from easyb plugin \r\nthey do not reflect the memory size. \r\n\r\n\r\nShouldn&#39;t there be a way of passing JVM opts to maven easyb plugin \r\nwhen it runs these easyb tests? At the very minimum it should atleast \r\npick up the MAVEN_OPTS settings from the environment. \r\n\r\n\r\nHas someone bumped into problems like this? (A search on this group&#39;s \r\narchive does not reveal much) \r\n","title":"Maven easyb plugin java heap space settings?","body":"<p>I attempted to change my heap size for maven easyb plugin \n<a href=\"http://www.easyb.org/maven-easyb-plugin/\" rel=\"nofollow noreferrer\">http://www.easyb.org/maven-easyb-plugin/</a>. In my easyb test I added \nstandard code to print the heap size using the code \nRuntime.getFreeMemory() and Runtime.getTotalMemory(). </p>\n\n<p>I tried setting the MAVEN_OPTS=-Xmx1024m -Xms1024m and also set the \nmaven opts in Maven surefire plugin. Now when I run the same class \nfrom the Junit I can see the getTotalMemory() displaying a number \nclose 1Gig but the when the same classes are invoked from easyb plugin \nthey do not reflect the memory size. </p>\n\n<p>Shouldn't there be a way of passing JVM opts to maven easyb plugin \nwhen it runs these easyb tests? At the very minimum it should atleast \npick up the MAVEN_OPTS settings from the environment. </p>\n\n<p>Has someone bumped into problems like this? (A search on this group's \narchive does not reveal much) </p>\n"},{"tags":["java","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":12478,"reputation":23673,"user_id":24582,"display_name":"extraneon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268321328,"creation_date":1268321328,"answer_id":2426203,"question_id":2426160,"body_markdown":"HashMap overhead shouldn&#39;t be that much. And I don&#39;t think it&#39;s possible to rummage around in the heap with the public Java API. The Objects probably won&#39;t be there anyway, as they will be collected if there is no reference.\r\n\r\nWhat you *could* do, if HashMap overhead is to much, is allocate an array, like Object[] or Entry[]. You&#39;ll loose the quick-access, add and delete possibilities of course (given that an array is fixed size it&#39;s hard to add items if the array is too small).\r\n\r\nWhen using the array solution you&#39;ll have to know beforehand how many entries you will have, or copy the array in a larger array when needed, take null values into account if you allow deletes and so forth. What an ArrayList does, basically.","title":"Java Heap Indirect Access","body":"<p>HashMap overhead shouldn't be that much. And I don't think it's possible to rummage around in the heap with the public Java API. The Objects probably won't be there anyway, as they will be collected if there is no reference.</p>\n\n<p>What you <em>could</em> do, if HashMap overhead is to much, is allocate an array, like Object[] or Entry[]. You'll loose the quick-access, add and delete possibilities of course (given that an array is fixed size it's hard to add items if the array is too small).</p>\n\n<p>When using the array solution you'll have to know beforehand how many entries you will have, or copy the array in a larger array when needed, take null values into account if you allow deletes and so forth. What an ArrayList does, basically.</p>\n"},{"tags":[],"owner":{"account_id":8620,"reputation":22142,"user_id":15619,"accept_rate":91,"display_name":"Riduidel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1268321409,"creation_date":1268321409,"answer_id":2426220,"question_id":2426160,"body_markdown":"I don&#39;t really understand the purpose of your code, but I fear your code involves some frequent OutOfMemoryError, no ?\r\n\r\nAnyway.\r\n\r\nYou can get references to obejcts that won&#39;t prevent these objects from being garbage-collected, like SoftReference (the default one used when you do &lt;code&gt;myObj = thisObj;&lt;/code&gt;), WeakReference, and PhantomReference.\r\n\r\nSo, you could (and should, inf act, use WeakReference to let the GC do its work). However, for dynamic memory exploration, there are applications already existing, like [VisualVM][1], that uses a protocol allowing an external process to query the VM : [JVMPI][2].\r\n\r\ni think you really should take a look at this.\r\n\r\n\r\n  [1]: https://visualvm.dev.java.net/\r\n  [2]: http://java.sun.com/j2se/1.4.2/docs/guide/jvmpi/jvmpi.html","title":"Java Heap Indirect Access","body":"<p>I don't really understand the purpose of your code, but I fear your code involves some frequent OutOfMemoryError, no ?</p>\n\n<p>Anyway.</p>\n\n<p>You can get references to obejcts that won't prevent these objects from being garbage-collected, like SoftReference (the default one used when you do <code>myObj = thisObj;</code>), WeakReference, and PhantomReference.</p>\n\n<p>So, you could (and should, inf act, use WeakReference to let the GC do its work). However, for dynamic memory exploration, there are applications already existing, like <a href=\"https://visualvm.dev.java.net/\" rel=\"nofollow noreferrer\">VisualVM</a>, that uses a protocol allowing an external process to query the VM : <a href=\"http://java.sun.com/j2se/1.4.2/docs/guide/jvmpi/jvmpi.html\" rel=\"nofollow noreferrer\">JVMPI</a>.</p>\n\n<p>i think you really should take a look at this.</p>\n"},{"tags":[],"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268321427,"creation_date":1268321427,"answer_id":2426223,"question_id":2426160,"body_markdown":"The map contains only pointers to the objects on the heap. I do not think you can do better then that,","title":"Java Heap Indirect Access","body":"<p>The map contains only pointers to the objects on the heap. I do not think you can do better then that,</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1268321786,"creation_date":1268321786,"answer_id":2426276,"question_id":2426160,"body_markdown":"No. Basically, each object knows its class, but a class does not know all its objects - it&#39;s not necessary for the way the JRE works and would only be useless overhead.\r\n\r\nWhy do you need to know all instances of those classes anyway? Maybe there&#39;s a better way to solve your actual problem.","title":"Java Heap Indirect Access","body":"<p>No. Basically, each object knows its class, but a class does not know all its objects - it's not necessary for the way the JRE works and would only be useless overhead.</p>\n\n<p>Why do you need to know all instances of those classes anyway? Maybe there's a better way to solve your actual problem.</p>\n"}],"owner":{"account_id":92166,"reputation":10550,"user_id":252704,"accept_rate":100,"display_name":"Pindatjuh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":611,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":2426276,"answer_count":4,"score":1,"last_activity_date":1639068140,"creation_date":1268321067,"question_id":2426160,"body_markdown":"Currently I use a `HashMap&lt;Class, Set&lt;Entry&gt;&gt;`, which may contain several millions of short-lived and long-lived objects. (`Entry` is a wrapper class around an `Object` and an integer, which is a duplicate count).\r\n\r\nI figured: these `Object`s are all stored in the JVM&#39;s Heap. Then my question popped in my mind; instead of allocating huge amounts of memory for the `HashMap`, can it be done better (less memory consumption)?\r\n\r\n**Is there a way to access `Object`s in the Java Heap indirectly, based on the `Class` of the `Object`s?**\r\n\r\nWith &quot;indirectly&quot; I mean: without having a pointer to the `Object`. With &quot;access&quot; I mean: to retrieve a pointer to the `Object` in the heap.","title":"Java Heap Indirect Access","body":"<p>Currently I use a <code>HashMap&lt;Class, Set&lt;Entry&gt;&gt;</code>, which may contain several millions of short-lived and long-lived objects. (<code>Entry</code> is a wrapper class around an <code>Object</code> and an integer, which is a duplicate count).</p>\n\n<p>I figured: these <code>Object</code>s are all stored in the JVM's Heap. Then my question popped in my mind; instead of allocating huge amounts of memory for the <code>HashMap</code>, can it be done better (less memory consumption)?</p>\n\n<p><strong>Is there a way to access <code>Object</code>s in the Java Heap indirectly, based on the <code>Class</code> of the <code>Object</code>s?</strong></p>\n\n<p>With \"indirectly\" I mean: without having a pointer to the <code>Object</code>. With \"access\" I mean: to retrieve a pointer to the <code>Object</code> in the heap.</p>\n"},{"tags":["java","heap-memory","windows-server-2003"],"comments":[{"owner":{"account_id":51996,"reputation":1907,"user_id":155362,"display_name":"BryanD"},"score":0,"creation_date":1268347620,"post_id":2429270,"comment_id":2413132,"body_markdown":"This is just a shot in the dark, but are you running Sophos?  http://forums.sun.com/thread.jspa?threadID=5399327.  It looks like another thing you could try is the following JVM switch:  -Xshare:off","body":"This is just a shot in the dark, but are you running Sophos?  <a href=\"http://forums.sun.com/thread.jspa?threadID=5399327\" rel=\"nofollow noreferrer\">forums.sun.com/thread.jspa?threadID=5399327</a>.  It looks like another thing you could try is the following JVM switch:  -Xshare:off"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1272875592,"creation_date":1272875592,"answer_id":2756907,"question_id":2429270,"body_markdown":"If your memory is fragmented, the JVM will not be able to obtain the continous memory it needs.\r\nTry running java after a fresh reboot and you should be able to get a 1 GB or more.\r\n\r\nWith a 64-bit OS and JVM you won&#39;t have this problem.\r\n\r\nFor comparison have you tried Java 6?  Even if you cannot use Java 6 this would help indicate whether the problem is more likely to be in the OS (if Java 6 doesn&#39;t works either) or in Java 5.0 is (if Java 6 works)\r\n\r\nAs Java 5.0 is no longer freely supported, if you need support for Java 5.0 you will have to pay for it. ","title":"java cannot reserver heap size error on windows server","body":"<p>If your memory is fragmented, the JVM will not be able to obtain the continous memory it needs.\nTry running java after a fresh reboot and you should be able to get a 1 GB or more.</p>\n\n<p>With a 64-bit OS and JVM you won't have this problem.</p>\n\n<p>For comparison have you tried Java 6?  Even if you cannot use Java 6 this would help indicate whether the problem is more likely to be in the OS (if Java 6 doesn't works either) or in Java 5.0 is (if Java 6 works)</p>\n\n<p>As Java 5.0 is no longer freely supported, if you need support for Java 5.0 you will have to pay for it. </p>\n"}],"owner":{"account_id":596578,"reputation":1,"user_id":291959,"display_name":"Prad"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":731,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639068125,"creation_date":1268347088,"question_id":2429270,"body_markdown":"HI, \r\n\r\nI have the following configuration: \r\nServer : windows 2003 server (32 bit)\r\njava version: 1.5_0_22\r\n\r\nI get the following error when executing from command line ( my code is based off eclipse wihch gives the same error) \r\n\r\njava -XX:MaxPermSize=256m -Xmx512m\r\nError occurred during initialization of VM\r\nCould not reserve enough space for object heap\r\nCould not create the Java virtual machine.\r\n\r\n\r\nThe server has over 20GB physical memory with over 19 GB free right now. \r\n\r\nIt does not give an error upto -Xmx486m\r\n\r\nI have read other articles about contiguous memory space. There is hardly anything running on this server. Can I validae this in any way? \r\n\r\nThanks","title":"java cannot reserver heap size error on windows server","body":"<p>HI, </p>\n\n<p>I have the following configuration: \nServer : windows 2003 server (32 bit)\njava version: 1.5_0_22</p>\n\n<p>I get the following error when executing from command line ( my code is based off eclipse wihch gives the same error) </p>\n\n<p>java -XX:MaxPermSize=256m -Xmx512m\nError occurred during initialization of VM\nCould not reserve enough space for object heap\nCould not create the Java virtual machine.</p>\n\n<p>The server has over 20GB physical memory with over 19 GB free right now. </p>\n\n<p>It does not give an error upto -Xmx486m</p>\n\n<p>I have read other articles about contiguous memory space. There is hardly anything running on this server. Can I validae this in any way? </p>\n\n<p>Thanks</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":72159,"reputation":9614,"user_id":208446,"accept_rate":89,"display_name":"mohdajami"},"score":1,"creation_date":1268353102,"post_id":2429623,"comment_id":2413497,"body_markdown":"you shouldn&#39;t be playing around the edges of the memory, fix your application to prevent the 1GB spike first.","body":"you shouldn&#39;t be playing around the edges of the memory, fix your application to prevent the 1GB spike first."},{"owner":{"account_id":47622,"reputation":148548,"user_id":141172,"accept_rate":88,"display_name":"Eric J."},"score":0,"creation_date":1268353312,"post_id":2429623,"comment_id":2413520,"body_markdown":"@medopal: While valid that one should take care not to request more resourced than really needed, for some applications one really should &quot;play around the edges of memory&quot; in the sense of having a deep understanding of GC and leveraging that understanding to get the most from available memory.  While it&#39;s &quot;generally&quot; bad practice to call Runtime.gc(), there is a reason it&#39;s exposed to the developer.","body":"@medopal: While valid that one should take care not to request more resourced than really needed, for some applications one really should &quot;play around the edges of memory&quot; in the sense of having a deep understanding of GC and leveraging that understanding to get the most from available memory.  While it&#39;s &quot;generally&quot; bad practice to call Runtime.gc(), there is a reason it&#39;s exposed to the developer."},{"owner":{"account_id":72159,"reputation":9614,"user_id":208446,"accept_rate":89,"display_name":"mohdajami"},"score":0,"creation_date":1268354197,"post_id":2429623,"comment_id":2413587,"body_markdown":"@Eric, good point, personally my Java apps could be used on desktops up to mainframes (passing by many OSes) and different setups, managing memory could become very complicated","body":"@Eric, good point, personally my Java apps could be used on desktops up to mainframes (passing by many OSes) and different setups, managing memory could become very complicated"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1268355311,"post_id":2429623,"comment_id":2413676,"body_markdown":"DO NOT force java to swap.  Very Very bad things happen, it will nuke your PC.  I&#39;ve actually had to reboot--it touches all the parts of it&#39;s memory way too often.","body":"DO NOT force java to swap.  Very Very bad things happen, it will nuke your PC.  I&#39;ve actually had to reboot--it touches all the parts of it&#39;s memory way too often."},{"owner":{"account_id":47622,"reputation":148548,"user_id":141172,"accept_rate":88,"display_name":"Eric J."},"score":0,"creation_date":1268355712,"post_id":2429623,"comment_id":2413708,"body_markdown":"@medopal: I suspect the vast majority of Java programs meet criteria similar to yours.  Just saying there are edge cases out there in software development where you want to be able to maximize your use of available memory.","body":"@medopal: I suspect the vast majority of Java programs meet criteria similar to yours.  Just saying there are edge cases out there in software development where you want to be able to maximize your use of available memory."},{"owner":{"account_id":47622,"reputation":148548,"user_id":141172,"accept_rate":88,"display_name":"Eric J."},"score":0,"creation_date":1268355822,"post_id":2429623,"comment_id":2413714,"body_markdown":"@Bill K: Java doesn&#39;t actually swap AFAIK, but the OS may (probably will) to meet the request for memory issued by the Java runtime.  Low memory situations can sometimes force a reboot on some platforms, but I think it&#39;s an OS issue and not a Java issue directly.","body":"@Bill K: Java doesn&#39;t actually swap AFAIK, but the OS may (probably will) to meet the request for memory issued by the Java runtime.  Low memory situations can sometimes force a reboot on some platforms, but I think it&#39;s an OS issue and not a Java issue directly."},{"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"score":0,"creation_date":1268359752,"post_id":2429623,"comment_id":2414039,"body_markdown":"@Eric J.: the OP is talking about Linux. Linux doesn&#39;t reboot for no reason. My hardened Linux Debian *workstation* has reached 6 months of uptime several times (critical security fixes affecting my hardened Debian aren&#39;t exactly common ;)   And that is just a workstation.  In addition to that, when Linux really runs out of memory it shall kill one process (or more).  And if a &quot;kill -9&quot; isn&#39;t releasing *all* the memory used by the process, then the Un*x OS is not compliant.  So, yes, this is a (broken) OS issue.  Correctly designed OS don&#39;t reboot when they get low on memory.","body":"@Eric J.: the OP is talking about Linux. Linux doesn&#39;t reboot for no reason. My hardened Linux Debian <i>workstation</i> has reached 6 months of uptime several times (critical security fixes affecting my hardened Debian aren&#39;t exactly common ;)   And that is just a workstation.  In addition to that, when Linux really runs out of memory it shall kill one process (or more).  And if a &quot;kill -9&quot; isn&#39;t releasing <i>all</i> the memory used by the process, then the Un*x OS is not compliant.  So, yes, this is a (broken) OS issue.  Correctly designed OS don&#39;t reboot when they get low on memory."},{"owner":{"account_id":47622,"reputation":148548,"user_id":141172,"accept_rate":88,"display_name":"Eric J."},"score":0,"creation_date":1268362671,"post_id":2429623,"comment_id":2414285,"body_markdown":"@WizardOfOdds: Yep I agree 99.5%.  My team operates around 20 Linux instances on AWS.  Once in a blue moon SpringServer seems to hang up badly and kill -9 doesn&#39;t correct the problem (process is gone, but upon restarting Spring we have the same issue.  A reboot clears it up.  Still, that&#39;s 20 machines x around 2 years and we have had to reboot 2 times that I know of.","body":"@WizardOfOdds: Yep I agree 99.5%.  My team operates around 20 Linux instances on AWS.  Once in a blue moon SpringServer seems to hang up badly and kill -9 doesn&#39;t correct the problem (process is gone, but upon restarting Spring we have the same issue.  A reboot clears it up.  Still, that&#39;s 20 machines x around 2 years and we have had to reboot 2 times that I know of."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1268414415,"post_id":2429623,"comment_id":2418991,"body_markdown":"@Eric J: I meant having so much allocated to Java that your OS has to swap your java process.  Once you do that, your system can become so fried swapping in and out that you can hardly regain control of it.  On a linux machine you can probably SSH in or open an non-X terminal and kill it, but it may be so busy that you can&#39;t do anything with the GUI and have to power down the machine on a windows machine.","body":"@Eric J: I meant having so much allocated to Java that your OS has to swap your java process.  Once you do that, your system can become so fried swapping in and out that you can hardly regain control of it.  On a linux machine you can probably SSH in or open an non-X terminal and kill it, but it may be so busy that you can&#39;t do anything with the GUI and have to power down the machine on a windows machine."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1459440268,"post_id":2429623,"comment_id":60298736,"body_markdown":"What does &quot;overflow the heap&quot; mean?","body":"What does &quot;overflow the heap&quot; mean?"}],"answers":[{"tags":[],"owner":{"account_id":24436,"reputation":73314,"user_id":62130,"accept_rate":39,"display_name":"Esko Luontola"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1268353499,"creation_date":1268353088,"answer_id":2429658,"question_id":2429623,"body_markdown":"Are you are referring to the memory not being freed to the OS - i.e. `top` and similar programs show that the Java process takes 1GB of memory? Even though Java&#39;s garbage collector frees the memory from its heap, it can still keep hold of the memory so that future allocations don&#39;t need to request for more memory from the OS.\r\n\r\nTo see how much heap space is actually used by the Java objects, use [VisualVM][1] or a similar Java-specific tool. If your machine has lots of memory, then the JVM will use it (IIRC, especially the Server VM is tuned to reserve more memory), but you can always limit it with the `-Xmx` and other JVM options.\r\n\r\n\r\n  [1]: https://visualvm.dev.java.net/","title":"Java Heap Overflow, Forcing Garbage Collection","body":"<p>Are you are referring to the memory not being freed to the OS - i.e. <code>top</code> and similar programs show that the Java process takes 1GB of memory? Even though Java's garbage collector frees the memory from its heap, it can still keep hold of the memory so that future allocations don't need to request for more memory from the OS.</p>\n\n<p>To see how much heap space is actually used by the Java objects, use <a href=\"https://visualvm.dev.java.net/\" rel=\"nofollow noreferrer\">VisualVM</a> or a similar Java-specific tool. If your machine has lots of memory, then the JVM will use it (IIRC, especially the Server VM is tuned to reserve more memory), but you can always limit it with the <code>-Xmx</code> and other JVM options.</p>\n"},{"tags":[],"owner":{"account_id":106165,"reputation":42979,"user_id":282912,"accept_rate":100,"display_name":"msw"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268353317,"creation_date":1268353317,"answer_id":2429674,"question_id":2429623,"body_markdown":"Memory allocated to a process (i.e. the JVM) is not necessarily given back to the OS in Unix. So even though the Java Virtual Machine may have fully garbage collected the heap, the process size may stay the same.\r\n\r\nOrdinarily, this may not have much impact as the unused heap will be paged out and not paged back in again. Look at the difference between the Virtual Size (VSZ) and the Resident Set Size (RSS) in the output of `ps -u` the difference is how many pages are swapped out.","title":"Java Heap Overflow, Forcing Garbage Collection","body":"<p>Memory allocated to a process (i.e. the JVM) is not necessarily given back to the OS in Unix. So even though the Java Virtual Machine may have fully garbage collected the heap, the process size may stay the same.</p>\n\n<p>Ordinarily, this may not have much impact as the unused heap will be paged out and not paged back in again. Look at the difference between the Virtual Size (VSZ) and the Resident Set Size (RSS) in the output of <code>ps -u</code> the difference is how many pages are swapped out.</p>\n"},{"tags":[],"owner":{"account_id":79696,"reputation":11819,"user_id":225801,"display_name":"crazyscot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1268354013,"creation_date":1268354013,"answer_id":2429720,"question_id":2429623,"body_markdown":"An object will only be deleted after it can no longer be reached by links from any accessible object. Is it possible that you still have references to the objects concerned?\r\n\r\nBy the way, `Runtime.gc()` is sometimes only a hint that garbage collection should run.","title":"Java Heap Overflow, Forcing Garbage Collection","body":"<p>An object will only be deleted after it can no longer be reached by links from any accessible object. Is it possible that you still have references to the objects concerned?</p>\n\n<p>By the way, <code>Runtime.gc()</code> is sometimes only a hint that garbage collection should run.</p>\n"},{"tags":[],"owner":{"account_id":83889,"reputation":26612,"user_id":234901,"accept_rate":97,"display_name":"Enno Shioji"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268357482,"creation_date":1268357482,"answer_id":2429923,"question_id":2429623,"body_markdown":"OK, you are getting a `java.lang.OutOfMemoryError: Java heap space`.  \r\nMost probably, `Runtime.gc()` won&#39;t help, because if it would, the JVM had already did a gc.  \r\n\r\nIt&#39;s probably a memory leak. If I were you, I will review my code carefully and see if some reference is still hold by something.  \r\n\r\n&gt; So the grandchildren aren&#39;t deleted?\r\n&gt; When I do my delete, I simply set it&#39;s\r\n&gt; child node to null, but not the\r\n&gt; children&#39;s children, but those\r\n&gt; children weren&#39;t ever initialized,\r\n&gt; only create(Node[] children = new\r\n&gt; Node[26]\r\n\r\nIf you do `children=null` , yes, the entire array should be gc&#39;d. Provided that you didn&#39;t gave that reference to something.  \r\n\r\nBut who knows what the culprit is. It may not even these &quot;children&quot; Nodes. You might want to use visualVm and find out what object is accumulating. You can use more sophisticated tools like JProfiler and examine the references etc., but if you are simply building a trie, I guess it&#39;s simpler to walk-through your code and spot the leak.","title":"Java Heap Overflow, Forcing Garbage Collection","body":"<p>OK, you are getting a <code>java.lang.OutOfMemoryError: Java heap space</code>.<br>\nMost probably, <code>Runtime.gc()</code> won't help, because if it would, the JVM had already did a gc.  </p>\n\n<p>It's probably a memory leak. If I were you, I will review my code carefully and see if some reference is still hold by something.  </p>\n\n<blockquote>\n  <p>So the grandchildren aren't deleted?\n  When I do my delete, I simply set it's\n  child node to null, but not the\n  children's children, but those\n  children weren't ever initialized,\n  only create(Node[] children = new\n  Node[26]</p>\n</blockquote>\n\n<p>If you do <code>children=null</code> , yes, the entire array should be gc'd. Provided that you didn't gave that reference to something.  </p>\n\n<p>But who knows what the culprit is. It may not even these \"children\" Nodes. You might want to use visualVm and find out what object is accumulating. You can use more sophisticated tools like JProfiler and examine the references etc., but if you are simply building a trie, I guess it's simpler to walk-through your code and spot the leak.</p>\n"},{"tags":[],"owner":{"account_id":94218,"reputation":27823,"user_id":257356,"accept_rate":59,"display_name":"SyntaxT3rr0r"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1268358925,"creation_date":1268358925,"answer_id":2430009,"question_id":2429623,"body_markdown":"(this too long for a comment)\r\n\r\nContrarily to popular belief you **CAN** really force a GC in Java but this is *not* done using *System.gc()*. The way to really force a GC is to use JVMTI&#39;s *ForceGarbageCollection()* call. Don&#39;t ask me more, I asked a question here and nobody found it interesting (no upvotes) and nobody could answer it, yet JVMTI&#39;s *ForceGarbageCollection()* is how a lot of Java programs like IntelliJ, NetBeans, VisualVM, Eclipse etc. **do really force a GC**:\r\n\r\nhttps://stackoverflow.com/questions/2178296/java-how-do-you-really-force-a-gc-using-jvmtis-forcegargabecollection\r\n\r\nNow... You probably do *not* want to do that and you probably do *not* want to hint the GC using the &quot;no guarantee&quot; *System.gc()* call.\r\n\r\nAt how many words do you start having problems? There are very compact data structure when you need to work with insane number of words. Are you sure you&#39;re using the correct data structure and are you sure you&#39;re not having leaks?\r\n\r\n\r\n\r\n\r\n\r\n","title":"Java Heap Overflow, Forcing Garbage Collection","body":"<p>(this too long for a comment)</p>\n\n<p>Contrarily to popular belief you <strong>CAN</strong> really force a GC in Java but this is <em>not</em> done using <em>System.gc()</em>. The way to really force a GC is to use JVMTI's <em>ForceGarbageCollection()</em> call. Don't ask me more, I asked a question here and nobody found it interesting (no upvotes) and nobody could answer it, yet JVMTI's <em>ForceGarbageCollection()</em> is how a lot of Java programs like IntelliJ, NetBeans, VisualVM, Eclipse etc. <strong>do really force a GC</strong>:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2178296/java-how-do-you-really-force-a-gc-using-jvmtis-forcegargabecollection\">Java: How do you really force a GC using JVMTI&#39;s ForceGargabeCollection?</a></p>\n\n<p>Now... You probably do <em>not</em> want to do that and you probably do <em>not</em> want to hint the GC using the \"no guarantee\" <em>System.gc()</em> call.</p>\n\n<p>At how many words do you start having problems? There are very compact data structure when you need to work with insane number of words. Are you sure you're using the correct data structure and are you sure you're not having leaks?</p>\n"}],"owner":{"account_id":93655,"reputation":7413,"user_id":256108,"accept_rate":78,"display_name":"Nicholas"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5862,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":2429658,"answer_count":5,"score":2,"last_activity_date":1639068114,"creation_date":1268352748,"question_id":2429623,"body_markdown":"I&#39;ve create a trie tree with an array of children. When deleting a word, I set the children null, which I would assume deletes the node(delete is a relative term). I know that null doesn&#39;t delete the child, just sets it to null, which when using a large amount of words it causes to overflow the heap. \r\n\r\nRunning a top on linux, I can see my memory usage spike to 1gb pretty quickly, but if I force garbage collection after the delete (Runtime.gc()) the memory usage goes to 50mb and never above that. From what I&#39;m told, java by default runs garbage collection before a heap overflow happens, but I can&#39;t see to make that happen. ","title":"Java Heap Overflow, Forcing Garbage Collection","body":"<p>I've create a trie tree with an array of children. When deleting a word, I set the children null, which I would assume deletes the node(delete is a relative term). I know that null doesn't delete the child, just sets it to null, which when using a large amount of words it causes to overflow the heap. </p>\n\n<p>Running a top on linux, I can see my memory usage spike to 1gb pretty quickly, but if I force garbage collection after the delete (Runtime.gc()) the memory usage goes to 50mb and never above that. From what I'm told, java by default runs garbage collection before a heap overflow happens, but I can't see to make that happen. </p>\n"},{"tags":["java","arrays","applet","heap-memory","path-finding"],"answers":[{"tags":[],"owner":{"account_id":53892,"reputation":27585,"user_id":161161,"accept_rate":61,"display_name":"Shaggy Frog"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1269459423,"creation_date":1269459423,"answer_id":2510843,"question_id":2510787,"body_markdown":"You&#39;ve just run into the biggest problem with A*: its memory requirement is proportional to the size of the state space.\r\n\r\nYou have a few options here.\r\n\r\nThe first would be to change your search algorithm from A* to [IDA*][1], and add in search enhancements like a memory cache to remember as many previously-searched node costs as possible.\r\n\r\nAnother alternative is to keep A* but move to hierarchical search. This will likely require you to do some preprocessing on your image files, however.\r\n\r\nYou&#39;ll find several good resources (downloadable papers) on this subject here: http://webdocs.cs.ualberta.ca/~holte/CMPUT651/readinglist.html\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/IDA*","title":"Applet A* pathfinding using large byte[] arrays - heap space error","body":"<p>You've just run into the biggest problem with A*: its memory requirement is proportional to the size of the state space.</p>\n\n<p>You have a few options here.</p>\n\n<p>The first would be to change your search algorithm from A* to <a href=\"http://en.wikipedia.org/wiki/IDA*\" rel=\"nofollow noreferrer\">IDA*</a>, and add in search enhancements like a memory cache to remember as many previously-searched node costs as possible.</p>\n\n<p>Another alternative is to keep A* but move to hierarchical search. This will likely require you to do some preprocessing on your image files, however.</p>\n\n<p>You'll find several good resources (downloadable papers) on this subject here: <a href=\"http://webdocs.cs.ualberta.ca/~holte/CMPUT651/readinglist.html\" rel=\"nofollow noreferrer\">http://webdocs.cs.ualberta.ca/~holte/CMPUT651/readinglist.html</a></p>\n"}],"owner":{"display_name":"user301151"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":649,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":2510843,"answer_count":1,"score":0,"last_activity_date":1639068102,"creation_date":1269458738,"question_id":2510787,"body_markdown":"I&#39;ve written a basic Java applet which works as a map viewer (like Google Maps) for a game fansite. \r\n\r\nIn it, I&#39;ve implemented an A* pathfinding algorithm on a 2D map with 16 different floors, &quot;connected&quot; on certain points. The floors are stored in PNG images which are downloaded when needed and converted to byte arrays. The node cost is retrieved from the pixel RGB values and put in the byte arrays.\r\n\r\nThe map contains about 2 million tiles, spread over 16 floors. The images are 1475 x 2000 (15-140 KB for the PNG images) big, so some of the floors contain a lot of empty tiles .\r\n\r\nThe byte arrays will be huge in memory, resulting in a java.lang.OutOfMemoryError: Java heap space error for most JVM configurations.\r\n\r\nSo my questions are  \r\n&lt;ul&gt;\r\n&lt;li&gt;Is there anyway to reduce the size of these byte arrays and still have the pathfinder function properly?&lt;/li&gt;\r\n&lt;li&gt;Should I take a different approach to finding the optimal path, not having the tiles in memory?&lt;/li&gt;\r\n&lt;/ul&gt;\r\nI would think finding a path on the web server would be too CPU intensive.\r\n  \r\nBest regards,  \r\nA\r\n\r\n","title":"Applet A* pathfinding using large byte[] arrays - heap space error","body":"<p>I've written a basic Java applet which works as a map viewer (like Google Maps) for a game fansite. </p>\n\n<p>In it, I've implemented an A* pathfinding algorithm on a 2D map with 16 different floors, \"connected\" on certain points. The floors are stored in PNG images which are downloaded when needed and converted to byte arrays. The node cost is retrieved from the pixel RGB values and put in the byte arrays.</p>\n\n<p>The map contains about 2 million tiles, spread over 16 floors. The images are 1475 x 2000 (15-140 KB for the PNG images) big, so some of the floors contain a lot of empty tiles .</p>\n\n<p>The byte arrays will be huge in memory, resulting in a java.lang.OutOfMemoryError: Java heap space error for most JVM configurations.</p>\n\n<p>So my questions are  </p>\n\n<ul>\n<li>Is there anyway to reduce the size of these byte arrays and still have the pathfinder function properly?</li>\n<li>Should I take a different approach to finding the optimal path, not having the tiles in memory?</li>\n</ul>\n\n<p>I would think finding a path on the web server would be too CPU intensive.</p>\n\n<p>Best regards,<br>\nA</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":605018,"reputation":53,"user_id":308411,"display_name":"UnCon"},"score":0,"creation_date":1270329946,"post_id":2572725,"comment_id":2578324,"body_markdown":"It &quot;seems&quot; to work, but dunno if this app uses really 512MiB of heap (JVM does)","body":"It &quot;seems&quot; to work, but dunno if this app uses really 512MiB of heap (JVM does)"},{"owner":{"account_id":24436,"reputation":73314,"user_id":62130,"accept_rate":39,"display_name":"Esko Luontola"},"score":0,"creation_date":1270330299,"post_id":2572725,"comment_id":2578340,"body_markdown":"What is that launch() method?","body":"What is that launch() method?"},{"owner":{"account_id":605018,"reputation":53,"user_id":308411,"display_name":"UnCon"},"score":0,"creation_date":1270330610,"post_id":2572725,"comment_id":2578355,"body_markdown":"here take a look https://appframework.dev.java.net/nonav/javadoc/AppFramework-1.03/index.html","body":"here take a look <a href=\"https://appframework.dev.java.net/nonav/javadoc/AppFramework-1.03/index.html\" rel=\"nofollow noreferrer\">appframework.dev.java.net/nonav/javadoc/AppFramework-1.03/&hellip;</a>"},{"owner":{"account_id":605018,"reputation":53,"user_id":308411,"display_name":"UnCon"},"score":0,"creation_date":1270330648,"post_id":2572725,"comment_id":2578357,"body_markdown":"more exactly hre : https://appframework.dev.java.net/nonav/javadoc/AppFramework-1.03/index.html","body":"more exactly hre : <a href=\"https://appframework.dev.java.net/nonav/javadoc/AppFramework-1.03/index.html\" rel=\"nofollow noreferrer\">appframework.dev.java.net/nonav/javadoc/AppFramework-1.03/&hellip;</a>"},{"owner":{"account_id":605018,"reputation":53,"user_id":308411,"display_name":"UnCon"},"score":0,"creation_date":1270330702,"post_id":2572725,"comment_id":2578360,"body_markdown":"ah damn :/\nJust click on &quot;Application&quot; in javadoc there is &quot;launch&quot; method","body":"ah damn :/ Just click on &quot;Application&quot; in javadoc there is &quot;launch&quot; method"}],"answers":[{"tags":[],"owner":{"account_id":57112,"reputation":37790,"user_id":171061,"accept_rate":76,"display_name":"Steven Schlansker"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1270330723,"creation_date":1270330723,"answer_id":2572754,"question_id":2572725,"body_markdown":"Not going to work.  The heap space is set from the -Xmx parameter at JVM initialization time.  By the time you&#39;re running Java code, it&#39;s too late.\r\n\r\nThere could be an exception if the launch() method spawns a *new* JVM, but nothing I see indicates that that is the case.","title":"Java heap size - will this work?","body":"<p>Not going to work.  The heap space is set from the -Xmx parameter at JVM initialization time.  By the time you're running Java code, it's too late.</p>\n\n<p>There could be an exception if the launch() method spawns a <em>new</em> JVM, but nothing I see indicates that that is the case.</p>\n"}],"owner":{"account_id":605018,"reputation":53,"user_id":308411,"display_name":"UnCon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":2572754,"answer_count":1,"score":0,"last_activity_date":1639068087,"creation_date":1270329903,"question_id":2572725,"body_markdown":"I try this with NetBeans desktop application template - increasing heapsize (to 512 MiB) of executed .jar file. (I believe that NetBeans uses Singleton app by default - SingleFrameView)\r\nWill it work?\r\n\r\n        public static void main(String[] args) {\r\n            if (args == null) {\r\n                args = new String[1];\r\n                args[0] = &quot;Xmx512m&quot;;\r\n            } else {\r\n                String[] tempArgs = new String[args.length+1];\r\n                for (int i=0; i&lt;args.length; i++) {\r\n                tempArgs[i] = args[i];\r\n                }\r\n                tempArgs[tempArgs.length-1] = &quot;Xmx512m&quot;;\r\n                args = tempArgs;\r\n            }\r\n            launch(MyApp.class, args);\r\n        }\r\n    }","title":"Java heap size - will this work?","body":"<p>I try this with NetBeans desktop application template - increasing heapsize (to 512 MiB) of executed .jar file. (I believe that NetBeans uses Singleton app by default - SingleFrameView)\nWill it work?</p>\n\n<pre><code>    public static void main(String[] args) {\n        if (args == null) {\n            args = new String[1];\n            args[0] = \"Xmx512m\";\n        } else {\n            String[] tempArgs = new String[args.length+1];\n            for (int i=0; i&lt;args.length; i++) {\n            tempArgs[i] = args[i];\n            }\n            tempArgs[tempArgs.length-1] = \"Xmx512m\";\n            args = tempArgs;\n        }\n        launch(MyApp.class, args);\n    }\n}\n</code></pre>\n"},{"tags":["java","heap-memory","stringbuilder"],"comments":[{"owner":{"account_id":577351,"reputation":468,"user_id":236334,"display_name":"james"},"score":0,"creation_date":1270660789,"post_id":2593433,"comment_id":2602453,"body_markdown":"Even without the toString call, Code1 will be more efficient.  why?  since String is immutable, the String.substring() call will share the underlying char[] (which is a bigger memory issue than the String class itself).  The StringBuilder.substring() call must copy the char[] since the StringBuilder is mutable.  So, Code3 involves more char copying and more char[] instantiating.","body":"Even without the toString call, Code1 will be more efficient.  why?  since String is immutable, the String.substring() call will share the underlying char[] (which is a bigger memory issue than the String class itself).  The StringBuilder.substring() call must copy the char[] since the StringBuilder is mutable.  So, Code3 involves more char copying and more char[] instantiating."}],"answers":[{"tags":[],"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1270652323,"creation_date":1270651949,"answer_id":2593443,"question_id":2593433,"body_markdown":"Code2 is actually **less efficient** than Code1 because every time you call `stringBuilder.toString()` you&#39;re creating a new `java.lang.String` instance (in addition to the existing `StringBuilder` object).  This is less efficient in terms of space and time due to the object creation overhead.\r\n\r\nAssigning the contents of `readLine()` directly to a `String` and then splitting that `String` will typically be performant enough.  You could also consider using the [`Scanner`][1] class.\r\n\r\n**Memory Saving Tip**\r\n\r\nIf you encounter multiple repeating tokens in your input consider using String.intern() to ensure that each identical token references the same String object; e.g.\r\n\r\n    String[] tokens = parseTokens(line);\r\n    for (String token : tokens) {\r\n      // Construct business object referencing interned version of token.\r\n      BusinessObject bo = new BusinessObject(token.intern());\r\n      // Add business object to collection, etc.\r\n    }\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Scanner.html","title":"Using StringBuilder to process csv files to save heap space","body":"<p>Code2 is actually <strong>less efficient</strong> than Code1 because every time you call <code>stringBuilder.toString()</code> you're creating a new <code>java.lang.String</code> instance (in addition to the existing <code>StringBuilder</code> object).  This is less efficient in terms of space and time due to the object creation overhead.</p>\n\n<p>Assigning the contents of <code>readLine()</code> directly to a <code>String</code> and then splitting that <code>String</code> will typically be performant enough.  You could also consider using the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\"><code>Scanner</code></a> class.</p>\n\n<p><strong>Memory Saving Tip</strong></p>\n\n<p>If you encounter multiple repeating tokens in your input consider using String.intern() to ensure that each identical token references the same String object; e.g.</p>\n\n<pre><code>String[] tokens = parseTokens(line);\nfor (String token : tokens) {\n  // Construct business object referencing interned version of token.\n  BusinessObject bo = new BusinessObject(token.intern());\n  // Add business object to collection, etc.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20937,"reputation":167577,"user_id":50476,"accept_rate":100,"display_name":"Bart Kiers"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1270670687,"creation_date":1270652028,"answer_id":2593449,"question_id":2593433,"body_markdown":"&gt; Am I prematurely optimizing things with StringBuilder in Code2 to save a bit of heap space and memory? \r\n\r\nMost probably: **yes**. But, only one way to find out: profile your code.\r\n\r\nAlso, I&#39;d use a proper CSV parser instead of what you&#39;re doing now: http://ostermiller.org/utils/CSV.html","title":"Using StringBuilder to process csv files to save heap space","body":"<blockquote>\n  <p>Am I prematurely optimizing things with StringBuilder in Code2 to save a bit of heap space and memory? </p>\n</blockquote>\n\n<p>Most probably: <strong>yes</strong>. But, only one way to find out: profile your code.</p>\n\n<p>Also, I'd use a proper CSV parser instead of what you're doing now: <a href=\"http://ostermiller.org/utils/CSV.html\" rel=\"nofollow noreferrer\">http://ostermiller.org/utils/CSV.html</a></p>\n"},{"tags":[],"owner":{"account_id":41728,"reputation":37898,"user_id":121364,"accept_rate":72,"display_name":"J&#248;rn Schou-Rode"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1270652709,"creation_date":1270652035,"answer_id":2593450,"question_id":2593433,"body_markdown":"&gt; Will the optimized code increase performance of the app? *- my question*\r\n\r\nThe second code sample will **not** save you any memory nor any computation time. I am afraid you might have misunderstood the purpose of `StringBuilder`, which is really meant for building strings - not reading them.\r\n\r\nWithin the loop or your second code sample, every single line contains the expression `stringBuilder.toString()`, essentially turning the buffered string into a `String` object over and over again. Your actual string operations are done against these objects. Not only is the first code sample easier to read, but it is most certainly as performant of the two.\r\n\r\n&gt; Am I prematurely optimizing things with StringBuilder? *- your question*\r\n\r\nUnless you have profiled your application and have come to the conclusion that these very lines causes a notable slowdown on the execution speed, *yes*. Unless you are really sure that something will be slow (eg if you recognize high computational complexity), you definately want to do some profiling before you start making optimizations that hurt the readability of your code.\r\n\r\n&gt; What kind of optimizations could be done to this code? *- my question*\r\n\r\nIf you have profiled the application, and decided this is the right place for an optimization, you should consider looking into the features offered  by the [`Scanner`](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Scanner.html) class. Actually, this might both give you better performance (profiling will tell you if this is true) and more simple code.","title":"Using StringBuilder to process csv files to save heap space","body":"<blockquote>\n  <p>Will the optimized code increase performance of the app? <em>- my question</em></p>\n</blockquote>\n\n<p>The second code sample will <strong>not</strong> save you any memory nor any computation time. I am afraid you might have misunderstood the purpose of <code>StringBuilder</code>, which is really meant for building strings - not reading them.</p>\n\n<p>Within the loop or your second code sample, every single line contains the expression <code>stringBuilder.toString()</code>, essentially turning the buffered string into a <code>String</code> object over and over again. Your actual string operations are done against these objects. Not only is the first code sample easier to read, but it is most certainly as performant of the two.</p>\n\n<blockquote>\n  <p>Am I prematurely optimizing things with StringBuilder? <em>- your question</em></p>\n</blockquote>\n\n<p>Unless you have profiled your application and have come to the conclusion that these very lines causes a notable slowdown on the execution speed, <em>yes</em>. Unless you are really sure that something will be slow (eg if you recognize high computational complexity), you definately want to do some profiling before you start making optimizations that hurt the readability of your code.</p>\n\n<blockquote>\n  <p>What kind of optimizations could be done to this code? <em>- my question</em></p>\n</blockquote>\n\n<p>If you have profiled the application, and decided this is the right place for an optimization, you should consider looking into the features offered  by the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\"><code>Scanner</code></a> class. Actually, this might both give you better performance (profiling will tell you if this is true) and more simple code.</p>\n"},{"tags":[],"owner":{"account_id":19296,"reputation":17862,"user_id":45112,"accept_rate":71,"display_name":"armandino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1270652969,"creation_date":1270652969,"answer_id":2593582,"question_id":2593433,"body_markdown":"[StringBuilder][1] is usually used like this:\r\n\r\n    StringBuilder sb = new StringBuilder();\r\n    sb.append(&quot;You&quot;).append(&quot; can chain &quot;)\r\n      .append(&quot; your &quot;).append(&quot; strings &quot;)\r\n      .append(&quot;for better readability.&quot;);\r\n\r\n    String myString = sb.toString(); // only call once when you are done\r\n    System.out.prinln(sb); // also calls sb.toString().. print myString instead\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/StringBuilder.html","title":"Using StringBuilder to process csv files to save heap space","body":"<p><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\">StringBuilder</a> is usually used like this:</p>\n\n<pre><code>StringBuilder sb = new StringBuilder();\nsb.append(\"You\").append(\" can chain \")\n  .append(\" your \").append(\" strings \")\n  .append(\"for better readability.\");\n\nString myString = sb.toString(); // only call once when you are done\nSystem.out.prinln(sb); // also calls sb.toString().. print myString instead\n</code></pre>\n"},{"tags":[],"owner":{"account_id":118450,"reputation":1667,"user_id":309489,"accept_rate":67,"display_name":"webjockey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1270658870,"creation_date":1270658870,"answer_id":2594306,"question_id":2593433,"body_markdown":"StringBuilder has several good things\r\n\r\n - StringBuffer&#39;s operations are synchronized but StringBuilder is not, so using StringBuilder will improve performance in single threaded scenarios\r\n - Once the buffer is expanded the buffer can be reused by invoking setLength(0) on the object. Interestingly if you step into the debugger and examine the contents of StringBuilder you will see that contents are still exists even after invoking setLength(0). The JVM simply resets the pointer beginning of the string. Next time when you start appending the chars the pointer moves \r\n - If you are not really sure about length of string, it is better to use StringBuilder because once the buffer is expanded you can reuse the same buffer for smaller or equal size\r\n\r\nStringBuffer and StringBuilder are almost same in all operations except that StringBuffer is synchronized and StringBuilder is not\r\n\r\nIf you dont have multithreading then it is better to use StringBuilder","title":"Using StringBuilder to process csv files to save heap space","body":"<p>StringBuilder has several good things</p>\n\n<ul>\n<li>StringBuffer's operations are synchronized but StringBuilder is not, so using StringBuilder will improve performance in single threaded scenarios</li>\n<li>Once the buffer is expanded the buffer can be reused by invoking setLength(0) on the object. Interestingly if you step into the debugger and examine the contents of StringBuilder you will see that contents are still exists even after invoking setLength(0). The JVM simply resets the pointer beginning of the string. Next time when you start appending the chars the pointer moves </li>\n<li>If you are not really sure about length of string, it is better to use StringBuilder because once the buffer is expanded you can reuse the same buffer for smaller or equal size</li>\n</ul>\n\n<p>StringBuffer and StringBuilder are almost same in all operations except that StringBuffer is synchronized and StringBuilder is not</p>\n\n<p>If you dont have multithreading then it is better to use StringBuilder</p>\n"}],"owner":{"account_id":40085,"reputation":8687,"user_id":115988,"accept_rate":56,"display_name":"Lydon Ch"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4027,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1639068076,"creation_date":1270651825,"question_id":2593433,"body_markdown":"I am reading a csv file that has about 50,000 lines and 1.1MiB in size (and can grow larger).\r\n\r\nIn Code1, I use String to process the csv, while in Code2 I use StringBuilder (only one thread executes the code, so no concurrency issues) \r\n\r\nUsing StringBuilder makes the code a little bit harder to read that using normal String class.\r\n\r\nAm I prematurely optimizing things with StringBuilder in Code2 to save a bit of heap space and memory?  \r\n\r\nCode1 \r\n\r\n                fr = new FileReader(file);\r\n\t\t\t    BufferedReader reader = new BufferedReader(fr);\r\n\t\t\t\t\t\r\n\t\t\t    String line = reader.readLine();\r\n\t\t            while ( line != null )\r\n\t\t            {\r\n\t\t                int separator = line.indexOf(&#39;,&#39;);\r\n\t\t                String symbol = line.substring(0, seperator);\r\n\t\t                int begin = separator;\r\n\t\t                separator = line.indexOf(&#39;,&#39;, begin+1);\r\n\t\t                String price = line.substring(begin+1, seperator);\r\n\r\n\t\t                // Publish this update\r\n\t\t                publisher.publishQuote(symbol, price);\r\n\r\n\t\t                // Read the next line of fake update data\r\n\t\t                line = reader.readLine();\r\n                     }\r\n\r\n\r\nCode2\r\n\r\n    \t\t\t\t\tfr = new FileReader(file);\r\n    \t\t\t\t\tStringBuilder stringBuilder = new StringBuilder(reader.readLine());\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile( stringBuilder.toString() != null ) {\r\n\t\t\t\t\t\tint separator = stringBuilder.toString().indexOf(&#39;,&#39;);\r\n\t\t\t\t\t\tString symbol = stringBuilder.toString().substring(0, separator);\r\n\t\t\t\t\t\tint begin = separator;\r\n\t\t\t\t\t\tseparator = stringBuilder.toString().indexOf(&#39;,&#39;, begin+1);\r\n\t\t\t\t\t\tString price = stringBuilder.toString().substring(begin+1, separator);\r\n\t\t\t\t\t\tpublisher.publishQuote(symbol, price);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tstringBuilder.replace(0, stringBuilder.length(), reader.readLine());\r\n\t\t\t\t\t}\r\n\r\nEdit\r\n\r\nI eliminated the toString() call, so there will be less string objects produced.\r\n\r\nCode3\r\n\r\n    while( stringBuilder.length() &gt; 0 ) {\r\n\t\t\t\t\t\tint separator = stringBuilder.indexOf(&quot;,&quot;);\r\n\t\t\t\t\t\tString symbol = stringBuilder.substring(0, separator);\r\n\t\t\t\t\t\tint begin = separator;\r\n\t\t\t\t\t\tseparator = stringBuilder.indexOf(&quot;,&quot;, begin+1);\r\n\t\t\t\t\t\tString price = stringBuilder.substring(begin+1, separator);\r\n\t\t\t\t\t\tpublisher.publishQuote(symbol, price);\r\n\t\t\t\t\t\tThread.sleep(10);\r\n\t\t\t\t\t\tstringBuilder.replace(0, stringBuilder.length(), reader.readLine());\r\n\t\t\t\t\t}\r\n\r\n\r\nAlso, the original code is downloaded from http://www.devx.com/Java/Article/35246/0/page/1\r\n","title":"Using StringBuilder to process csv files to save heap space","body":"<p>I am reading a csv file that has about 50,000 lines and 1.1MiB in size (and can grow larger).</p>\n\n<p>In Code1, I use String to process the csv, while in Code2 I use StringBuilder (only one thread executes the code, so no concurrency issues) </p>\n\n<p>Using StringBuilder makes the code a little bit harder to read that using normal String class.</p>\n\n<p>Am I prematurely optimizing things with StringBuilder in Code2 to save a bit of heap space and memory?  </p>\n\n<p>Code1 </p>\n\n<pre><code>            fr = new FileReader(file);\n            BufferedReader reader = new BufferedReader(fr);\n\n            String line = reader.readLine();\n                while ( line != null )\n                {\n                    int separator = line.indexOf(',');\n                    String symbol = line.substring(0, seperator);\n                    int begin = separator;\n                    separator = line.indexOf(',', begin+1);\n                    String price = line.substring(begin+1, seperator);\n\n                    // Publish this update\n                    publisher.publishQuote(symbol, price);\n\n                    // Read the next line of fake update data\n                    line = reader.readLine();\n                 }\n</code></pre>\n\n<p>Code2</p>\n\n<pre><code>                    fr = new FileReader(file);\n                    StringBuilder stringBuilder = new StringBuilder(reader.readLine());\n\n                while( stringBuilder.toString() != null ) {\n                    int separator = stringBuilder.toString().indexOf(',');\n                    String symbol = stringBuilder.toString().substring(0, separator);\n                    int begin = separator;\n                    separator = stringBuilder.toString().indexOf(',', begin+1);\n                    String price = stringBuilder.toString().substring(begin+1, separator);\n                    publisher.publishQuote(symbol, price);\n\n                    stringBuilder.replace(0, stringBuilder.length(), reader.readLine());\n                }\n</code></pre>\n\n<p>Edit</p>\n\n<p>I eliminated the toString() call, so there will be less string objects produced.</p>\n\n<p>Code3</p>\n\n<pre><code>while( stringBuilder.length() &gt; 0 ) {\n                    int separator = stringBuilder.indexOf(\",\");\n                    String symbol = stringBuilder.substring(0, separator);\n                    int begin = separator;\n                    separator = stringBuilder.indexOf(\",\", begin+1);\n                    String price = stringBuilder.substring(begin+1, separator);\n                    publisher.publishQuote(symbol, price);\n                    Thread.sleep(10);\n                    stringBuilder.replace(0, stringBuilder.length(), reader.readLine());\n                }\n</code></pre>\n\n<p>Also, the original code is downloaded from <a href=\"http://www.devx.com/Java/Article/35246/0/page/1\" rel=\"nofollow noreferrer\">http://www.devx.com/Java/Article/35246/0/page/1</a></p>\n"},{"tags":["java","data-structures","heap-memory","adjacency-list"],"answers":[{"tags":[],"owner":{"account_id":102991,"reputation":378282,"user_id":276101,"accept_rate":67,"display_name":"polygenelubricants"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1271651328,"creation_date":1271649771,"answer_id":2665133,"question_id":2665100,"body_markdown":"I seem to have an unfair advantage here since I recognize both the name of the problem ([`liarliar`](http://www.facebook.com/careers/puzzles.php)) and the exact nature of the input.\r\n\r\nI can tell you that this `OutOfMemoryError` is by design. You need to find a better algorithm that does not store the entire adjacency information of the graph in memory.\r\n\r\nI will refrain from giving too much algorithmic insight, but I can tell you that you need to sit down and think more than you need to program at this stage. Maybe read a good book on algorithms and data structures.\r\n\r\n---\r\n\r\nWhat you&#39;re doing right now is that you&#39;re actually storing the _strings_ from the input file unnecessarily into your `HashMap&lt;String,ArrayList&lt;String&gt;&gt;`. This is very space-inefficient given the nature of the problem.\r\n\r\nIt&#39;s much easier and much more efficient if you use a [`java.util.Scanner`](http://java.sun.com/javase/6/docs/api/java/util/Scanner.html) instead. `new Scanner(new File(inputFilename))` and `next()`, and `nextInt()` are all that you need.\r\n\r\nAssign a unique `int` to each name (hint: `Map&lt;String, Integer&gt;`), and store the much smaller `int` instead.","title":"adjacency list creation , out of Memory error","body":"<p>I seem to have an unfair advantage here since I recognize both the name of the problem (<a href=\"http://www.facebook.com/careers/puzzles.php\" rel=\"nofollow noreferrer\"><code>liarliar</code></a>) and the exact nature of the input.</p>\n\n<p>I can tell you that this <code>OutOfMemoryError</code> is by design. You need to find a better algorithm that does not store the entire adjacency information of the graph in memory.</p>\n\n<p>I will refrain from giving too much algorithmic insight, but I can tell you that you need to sit down and think more than you need to program at this stage. Maybe read a good book on algorithms and data structures.</p>\n\n<hr>\n\n<p>What you're doing right now is that you're actually storing the <em>strings</em> from the input file unnecessarily into your <code>HashMap&lt;String,ArrayList&lt;String&gt;&gt;</code>. This is very space-inefficient given the nature of the problem.</p>\n\n<p>It's much easier and much more efficient if you use a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\"><code>java.util.Scanner</code></a> instead. <code>new Scanner(new File(inputFilename))</code> and <code>next()</code>, and <code>nextInt()</code> are all that you need.</p>\n\n<p>Assign a unique <code>int</code> to each name (hint: <code>Map&lt;String, Integer&gt;</code>), and store the much smaller <code>int</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":91076,"reputation":6535,"user_id":250304,"accept_rate":42,"display_name":"codeObserver"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1271885886,"creation_date":1271885886,"answer_id":2686753,"question_id":2665100,"body_markdown":"Thanks for answering my question. Yes you have guessed it right , what the code is about. \r\n\r\nI think yes , using a mapping of string to integers would save me some space req for adjacency list. In that sense the above error can be removed. \r\n\r\n\r\nHowever, I used java -jar -Xmx1024M. This gives a way to run the program with more heap memory , and since its allowed to use it in the given prolem , that shld not be the reason my submission is failing. \r\n\r\nPerformance can be one of the reason for failing the bot though I am not sure. \r\n\r\nWith regards to your solution, \r\n\r\nIf I create a Map&lt;String, Integer&gt; ,and then store the numbers in the adjacencey list it would save me some space, but it will also add an extra lookup each time I need to access a node during my bfs/dfs traversal. That bothers me . Are you saying I should not create the adjacency list at all ? Did I understand what you are trying to say correctly. \r\n\r\nthanks. ","title":"adjacency list creation , out of Memory error","body":"<p>Thanks for answering my question. Yes you have guessed it right , what the code is about. </p>\n\n<p>I think yes , using a mapping of string to integers would save me some space req for adjacency list. In that sense the above error can be removed. </p>\n\n<p>However, I used java -jar -Xmx1024M. This gives a way to run the program with more heap memory , and since its allowed to use it in the given prolem , that shld not be the reason my submission is failing. </p>\n\n<p>Performance can be one of the reason for failing the bot though I am not sure. </p>\n\n<p>With regards to your solution, </p>\n\n<p>If I create a Map ,and then store the numbers in the adjacencey list it would save me some space, but it will also add an extra lookup each time I need to access a node during my bfs/dfs traversal. That bothers me . Are you saying I should not create the adjacency list at all ? Did I understand what you are trying to say correctly. </p>\n\n<p>thanks. </p>\n"}],"owner":{"account_id":91076,"reputation":6535,"user_id":250304,"accept_rate":42,"display_name":"codeObserver"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1771,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1639068062,"creation_date":1271648963,"question_id":2665100,"body_markdown":"I am trying to create an adjacency list to store a graph.The implementation works fine while storing 100,000 records.  However,when I tried to store around 1million records\r\nI ran into OutofMemory Error :  \r\n\r\nException in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n        at java.util.Arrays.copyOfRange(Arrays.java:3209)\r\n        at java.lang.String.&lt;init&gt;(String.java:215)\r\n        at java.io.BufferedReader.readLine(BufferedReader.java:331)\r\n        at java.io.BufferedReader.readLine(BufferedReader.java:362)\r\n        at liarliar.main(liarliar.java:39)\r\n\r\n\r\nFollowing is my implementation\r\n\r\n\r\n    HashMap&lt;String,ArrayList&lt;String&gt;&gt; adj = new HashMap&lt;String,ArrayList&lt;String&gt;&gt;(num);\r\n            \r\n            \r\n            while ((str = in.readLine()) != null)\r\n            {\r\n\r\n                StringTokenizer Tok = new StringTokenizer(str);\r\n                name = (String) Tok.nextElement();\r\n                cnt = Integer.valueOf(Tok.nextToken());\r\n                ArrayList&lt;String&gt; templist = new ArrayList&lt;String&gt;(cnt);\r\n\r\n                while(cnt&gt;0)\r\n                 {\r\n                        templist.add(in.readLine());\r\n                        cnt--;\r\n                 }\r\n                adj.put(name,templist);\r\n\r\n            } //done creating a adjacency list\r\n\r\n\r\nI am wondering, if there is any better way to implement the adjacency list. Also, I know number of nodes right in the begining and , in the future I flatten the list as I visit nodes. Any suggestions ?\r\n\r\nThanks\r\n","title":"adjacency list creation , out of Memory error","body":"<p>I am trying to create an adjacency list to store a graph.The implementation works fine while storing 100,000 records.  However,when I tried to store around 1million records\nI ran into OutofMemory Error :  </p>\n\n<p>Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n        at java.util.Arrays.copyOfRange(Arrays.java:3209)\n        at java.lang.String.(String.java:215)\n        at java.io.BufferedReader.readLine(BufferedReader.java:331)\n        at java.io.BufferedReader.readLine(BufferedReader.java:362)\n        at liarliar.main(liarliar.java:39)</p>\n\n<p>Following is my implementation</p>\n\n<pre><code>HashMap&lt;String,ArrayList&lt;String&gt;&gt; adj = new HashMap&lt;String,ArrayList&lt;String&gt;&gt;(num);\n\n\n        while ((str = in.readLine()) != null)\n        {\n\n            StringTokenizer Tok = new StringTokenizer(str);\n            name = (String) Tok.nextElement();\n            cnt = Integer.valueOf(Tok.nextToken());\n            ArrayList&lt;String&gt; templist = new ArrayList&lt;String&gt;(cnt);\n\n            while(cnt&gt;0)\n             {\n                    templist.add(in.readLine());\n                    cnt--;\n             }\n            adj.put(name,templist);\n\n        } //done creating a adjacency list\n</code></pre>\n\n<p>I am wondering, if there is any better way to implement the adjacency list. Also, I know number of nodes right in the begining and , in the future I flatten the list as I visit nodes. Any suggestions ?</p>\n\n<p>Thanks</p>\n"},{"tags":["java","weblogic","64-bit","heap-memory","weblogic-10.x"],"answers":[{"tags":[],"owner":{"account_id":109168,"reputation":31181,"user_id":289396,"accept_rate":89,"display_name":"JoseK"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1272529413,"creation_date":1272529413,"answer_id":2735761,"question_id":2735573,"body_markdown":"There are 2 cases to your query:\r\n\r\n**1. Does it work? Can 8 Gb Heap be addressed?**\r\n\r\nSun JDK itself on 64-bit Linux with JDK 1.6 does not limit you to 4 Gb. See [here][1]. This is without Weblogic.\r\n\r\nA similar config (Again Sun/Linux/Jdk 1.6 minus Weblogic) has been discussed [here][2] which tests heaps of 7 - 20 Gb.\r\n\r\nOne suggestion I have is to try it out, set your Xmx to 8G and see if it shows the heap in the Console as having size 8G. I have not tried this myself.\r\n\r\n**2. Will Oracle support any JVM related issues in your configuration in the future?**\r\n\r\nI think you might be limited by what official support Oracle provides you. The official [Oracle docs][3] dont seem to suggest this limit of 4 Gb. Another 2 links on the Oracle forums are [here][4] and [here][5] which again suggest larger heaps work.\r\n\r\n\r\n  [1]: http://java.sun.com/docs/hotspot/HotSpotFAQ.html#64bit_heap\r\n  [2]: https://stackoverflow.com/questions/559433/benefits-drawbacks-to-running-64-bit-jvm-on-64-bit-linux-server\r\n  [3]: http://download.oracle.com/docs/cd/E13196_01/platform/suppconfigs/configs103/103_over/overview.html\r\n  [4]: http://forums.sun.com/thread.jspa?threadID=5307218\r\n  [5]: http://forums.oracle.com/forums/thread.jspa?threadID=899419","title":"Is it possible to run Weblogic with 8gb heap size in a 64bit java/linux environment","body":"<p>There are 2 cases to your query:</p>\n\n<p><strong>1. Does it work? Can 8 Gb Heap be addressed?</strong></p>\n\n<p>Sun JDK itself on 64-bit Linux with JDK 1.6 does not limit you to 4 Gb. See <a href=\"http://java.sun.com/docs/hotspot/HotSpotFAQ.html#64bit_heap\" rel=\"nofollow noreferrer\">here</a>. This is without Weblogic.</p>\n\n<p>A similar config (Again Sun/Linux/Jdk 1.6 minus Weblogic) has been discussed <a href=\"https://stackoverflow.com/questions/559433/benefits-drawbacks-to-running-64-bit-jvm-on-64-bit-linux-server\">here</a> which tests heaps of 7 - 20 Gb.</p>\n\n<p>One suggestion I have is to try it out, set your Xmx to 8G and see if it shows the heap in the Console as having size 8G. I have not tried this myself.</p>\n\n<p><strong>2. Will Oracle support any JVM related issues in your configuration in the future?</strong></p>\n\n<p>I think you might be limited by what official support Oracle provides you. The official <a href=\"http://download.oracle.com/docs/cd/E13196_01/platform/suppconfigs/configs103/103_over/overview.html\" rel=\"nofollow noreferrer\">Oracle docs</a> dont seem to suggest this limit of 4 Gb. Another 2 links on the Oracle forums are <a href=\"http://forums.sun.com/thread.jspa?threadID=5307218\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://forums.oracle.com/forums/thread.jspa?threadID=899419\" rel=\"nofollow noreferrer\">here</a> which again suggest larger heaps work.</p>\n"}],"owner":{"account_id":31091,"reputation":2100,"user_id":85148,"accept_rate":71,"display_name":"Per Arneng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4442,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1639068038,"creation_date":1272527465,"question_id":2735573,"body_markdown":"Setup:\r\n 64bit Linux\r\n 64bit SUN Jvm 1.6.0_20\r\n Weblogic 10.3\r\n\r\nIs it possible to run Weblogic 10.3 in this setup with a maximum heap size of 8gb? We have recived answers from oracle support that states that it might not be possible to address more than 4gb with this setup.\r\n\r\nPlease submit any official links that support any statements that it is possible to run this setup with more than 4gb of heap size. We can not find any documentation of any limits of heap size when running with this setup.\r\n\r\nThanx","title":"Is it possible to run Weblogic with 8gb heap size in a 64bit java/linux environment","body":"<p>Setup:\n 64bit Linux\n 64bit SUN Jvm 1.6.0_20\n Weblogic 10.3</p>\n\n<p>Is it possible to run Weblogic 10.3 in this setup with a maximum heap size of 8gb? We have recived answers from oracle support that states that it might not be possible to address more than 4gb with this setup.</p>\n\n<p>Please submit any official links that support any statements that it is possible to run this setup with more than 4gb of heap size. We can not find any documentation of any limits of heap size when running with this setup.</p>\n\n<p>Thanx</p>\n"},{"tags":["java","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":132051,"reputation":4348,"user_id":332517,"accept_rate":58,"display_name":"Rostislav Matl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1274470158,"creation_date":1274470158,"answer_id":2884986,"question_id":2884628,"body_markdown":"dbyme&#39;s answer is not accurate - these **Runtime calls give you an amount of memory used by JVM, but this  memory does not consist only of heap** , there is also stack and method area e.g.","title":"How to get just free heap size (not together w stack/method mem) in Java?","body":"<p>dbyme's answer is not accurate - these <strong>Runtime calls give you an amount of memory used by JVM, but this  memory does not consist only of heap</strong> , there is also stack and method area e.g.</p>\n"},{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274477365,"creation_date":1274476715,"answer_id":2885639,"question_id":2884628,"body_markdown":"This information is exposed over the JMX management interface. If you simply want to look at it, JConsole or visualvm (part of the JDK, installed in JAVA_HOME/bin) can display nice graphs of a JVM&#39;s memory usage, optionally broken down into the various memory pools.\r\n\r\nThis interface can also be accessed programmatically; see [MemoryMXBean](http://java.sun.com/javase/6/docs/api/java/lang/management/MemoryMXBean.html).","title":"How to get just free heap size (not together w stack/method mem) in Java?","body":"<p>This information is exposed over the JMX management interface. If you simply want to look at it, JConsole or visualvm (part of the JDK, installed in JAVA_HOME/bin) can display nice graphs of a JVM's memory usage, optionally broken down into the various memory pools.</p>\n\n<p>This interface can also be accessed programmatically; see <a href=\"http://java.sun.com/javase/6/docs/api/java/lang/management/MemoryMXBean.html\" rel=\"nofollow noreferrer\">MemoryMXBean</a>.</p>\n"},{"tags":[],"owner":{"account_id":85546,"reputation":84728,"user_id":238419,"accept_rate":89,"display_name":"BlueRaja - Danny Pflughoeft"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1274477715,"creation_date":1274477715,"answer_id":2885742,"question_id":2884628,"body_markdown":"There really is no good answer, since how much heap memory *the JVM has free* is not the same as how much heap memory *the operating system has free*, which are both not the same as how much heap memory *can be assigned to your application*.\r\n\r\nThis is because the JVM and OS heaps are different.  When the JVM runs out of memory, it may run garbage-collection, defragment its own heap, or request more memory from the OS.  Since unused non-garbage-collected objects still exist, but are technically &quot;free&quot;, they make the concept of free memory a bit fuzzy.\r\n\r\nAlso, heap memory fragments; how/when/if memory is defragmented is up to the implementation of the JVM/OS.  For example, the OS-heap may have 100MB of free memory, but due to fragmentation, the largest available contiguous space may be 2MB.  Thus, if the JVM requests 3MB, it may get an out-of-memory error, even though 100MB are still available.  It is not possible for the JVM to know ahead of time that the OS won&#39;t be able to allocate that 3MB.","title":"How to get just free heap size (not together w stack/method mem) in Java?","body":"<p>There really is no good answer, since how much heap memory <em>the JVM has free</em> is not the same as how much heap memory <em>the operating system has free</em>, which are both not the same as how much heap memory <em>can be assigned to your application</em>.</p>\n\n<p>This is because the JVM and OS heaps are different.  When the JVM runs out of memory, it may run garbage-collection, defragment its own heap, or request more memory from the OS.  Since unused non-garbage-collected objects still exist, but are technically \"free\", they make the concept of free memory a bit fuzzy.</p>\n\n<p>Also, heap memory fragments; how/when/if memory is defragmented is up to the implementation of the JVM/OS.  For example, the OS-heap may have 100MB of free memory, but due to fragmentation, the largest available contiguous space may be 2MB.  Thus, if the JVM requests 3MB, it may get an out-of-memory error, even though 100MB are still available.  It is not possible for the JVM to know ahead of time that the OS won't be able to allocate that 3MB.</p>\n"},{"tags":[],"owner":{"account_id":140879,"reputation":2100,"user_id":347500,"display_name":"BenjaminLinus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274478504,"creation_date":1274478504,"answer_id":2885818,"question_id":2884628,"body_markdown":"MemoryMXBean bean = ManagementFactory.getMemoryMXBean();\r\nbean.getHeapMemoryUsage().getUsed();","title":"How to get just free heap size (not together w stack/method mem) in Java?","body":"<p>MemoryMXBean bean = ManagementFactory.getMemoryMXBean();\nbean.getHeapMemoryUsage().getUsed();</p>\n"}],"owner":{"account_id":88036,"reputation":205429,"user_id":243782,"accept_rate":94,"display_name":"Pentium10"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2930,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":4,"score":8,"last_activity_date":1639068015,"creation_date":1274467084,"question_id":2884628,"body_markdown":"I want to calculate the heap usage for my app. I would like to get a procent value of Heap size **only**.\r\n\r\nHow do I get the value in code for the current running app?\r\n\r\n**EDIT**\r\n\r\nThere was an upvoted answer that was **NOT complete/correct**. The values returned by those methods include stack and method area too, and I need to monitor only heap size.  \r\nWith that code I got HeapError exception when I reached 43%, so I can&#39;t use those methods to monitor just heap\r\n\r\n    Runtime.getRuntime().totalMemory()","title":"How to get just free heap size (not together w stack/method mem) in Java?","body":"<p>I want to calculate the heap usage for my app. I would like to get a procent value of Heap size <strong>only</strong>.</p>\n\n<p>How do I get the value in code for the current running app?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>There was an upvoted answer that was <strong>NOT complete/correct</strong>. The values returned by those methods include stack and method area too, and I need to monitor only heap size.<br>\nWith that code I got HeapError exception when I reached 43%, so I can't use those methods to monitor just heap</p>\n\n<pre><code>Runtime.getRuntime().totalMemory()\n</code></pre>\n"},{"tags":["java","image-processing","applet","heap-memory"],"comments":[{"owner":{"account_id":92865,"reputation":5039,"user_id":254307,"accept_rate":88,"display_name":"Pablo Grisafi"},"score":1,"creation_date":1275590975,"post_id":2968640,"comment_id":3028133,"body_markdown":"Why use a float? I mean, isn&#39;t a byte enough?","body":"Why use a float? I mean, isn&#39;t a byte enough?"},{"owner":{"account_id":146974,"reputation":43,"user_id":357777,"display_name":"user357777"},"score":0,"creation_date":1275591958,"post_id":2968640,"comment_id":3028261,"body_markdown":"I explain in my edit.  Sorry for that","body":"I explain in my edit.  Sorry for that"}],"answers":[{"tags":[],"owner":{"account_id":117264,"reputation":442,"user_id":307168,"accept_rate":67,"display_name":"ssahmed555"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1275589298,"creation_date":1275589298,"answer_id":2968670,"question_id":2968640,"body_markdown":"Have you tried increasing the initial heap size, as well as setting the maximum heap size?\r\n\r\n    java -Xms&lt;initial heap size&gt; -Xmx&lt;maximum heap size&gt;\r\n\r\ne.g.\r\n\r\n    java -Xms256M -Xmx512M\r\n\r\nThe defaults are pretty conservative, and small so you definitely want to try and play around with your heap size settings.","title":"&quot;java.lang.OutOfMemoryError: Java heap space&quot; in image and array storage","body":"<p>Have you tried increasing the initial heap size, as well as setting the maximum heap size?</p>\n\n<pre><code>java -Xms&lt;initial heap size&gt; -Xmx&lt;maximum heap size&gt;\n</code></pre>\n\n<p>e.g.</p>\n\n<pre><code>java -Xms256M -Xmx512M\n</code></pre>\n\n<p>The defaults are pretty conservative, and small so you definitely want to try and play around with your heap size settings.</p>\n"},{"tags":[],"owner":{"account_id":66969,"reputation":22196,"user_id":196211,"accept_rate":67,"display_name":"Eyal Schneider"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1275591979,"creation_date":1275590228,"answer_id":2968776,"question_id":2968640,"body_markdown":"1) 12x500x500x5 floats means about 60 MB, plus some overhead. You should have no problem reserving all that memory space on a reasonable machine, if you configure your JVM heap correctly (-Xmx500M for example). If on the other hand you run this as an applet, you should do some settings (I found [this][1] link for example, relevant for Java 6 update 10 and above).\r\n\r\n2) You didn&#39;t provide much information regarding the data format per pixel. Maybe you can make it more compact. Why do you need 5 floats per pixel? You can store an RGB value as 3 bytes, and it seems you don&#39;t need to store the pixel location, since the position in the 2dimensional array already indicates the position.\r\n\r\n\r\n  [1]: http://java.sun.com/developer/technicalArticles/javase/newapplets/","title":"&quot;java.lang.OutOfMemoryError: Java heap space&quot; in image and array storage","body":"<p>1) 12x500x500x5 floats means about 60 MB, plus some overhead. You should have no problem reserving all that memory space on a reasonable machine, if you configure your JVM heap correctly (-Xmx500M for example). If on the other hand you run this as an applet, you should do some settings (I found <a href=\"http://java.sun.com/developer/technicalArticles/javase/newapplets/\" rel=\"nofollow noreferrer\">this</a> link for example, relevant for Java 6 update 10 and above).</p>\n\n<p>2) You didn't provide much information regarding the data format per pixel. Maybe you can make it more compact. Why do you need 5 floats per pixel? You can store an RGB value as 3 bytes, and it seems you don't need to store the pixel location, since the position in the 2dimensional array already indicates the position.</p>\n"},{"tags":[],"owner":{"account_id":128551,"reputation":57229,"user_id":326480,"accept_rate":82,"display_name":"mdma"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1275590978,"creation_date":1275590306,"answer_id":2968787,"question_id":2968640,"body_markdown":"I don&#39;t think you are going to be able to do this as an Applet. (There may be settings in the browser for how much memory to assign to applets, but I&#39;m not aware of any.)\r\n\r\nIf you can use Java webstart, I would use that. You can set the amount of memory required:\r\n\r\n    &lt;j2se version=&quot;1.4+&quot; initial-heap-size=&quot;100M&quot; max-heap-size=&quot;200M&quot;/&gt;\r\n\r\nThe advantage with using webstart is that the user does not need to configure their browser.\r\n\r\nEDIT: The Java control panel does have memory settings for applets. See\r\n[https://stackoverflow.com/questions/102003/how-can-i-start-an-java-applet-with-more-memory][1]\r\n\r\nHowever, unless you have just a handful of clients who don&#39;t mind altering their java settings (and that they have appropriate permissions and skills), this is not a nice user experience. With web start,you can set all this up in the JNLP descriptor and you&#39;re all set to go.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/102003/how-can-i-start-an-java-applet-with-more-memory","title":"&quot;java.lang.OutOfMemoryError: Java heap space&quot; in image and array storage","body":"<p>I don't think you are going to be able to do this as an Applet. (There may be settings in the browser for how much memory to assign to applets, but I'm not aware of any.)</p>\n\n<p>If you can use Java webstart, I would use that. You can set the amount of memory required:</p>\n\n<pre><code>&lt;j2se version=\"1.4+\" initial-heap-size=\"100M\" max-heap-size=\"200M\"/&gt;\n</code></pre>\n\n<p>The advantage with using webstart is that the user does not need to configure their browser.</p>\n\n<p>EDIT: The Java control panel does have memory settings for applets. See\n<a href=\"https://stackoverflow.com/questions/102003/how-can-i-start-an-java-applet-with-more-memory\">How can I start an Java applet with more memory?</a></p>\n\n<p>However, unless you have just a handful of clients who don't mind altering their java settings (and that they have appropriate permissions and skills), this is not a nice user experience. With web start,you can set all this up in the JNLP descriptor and you're all set to go.</p>\n"},{"tags":[],"owner":{"account_id":118722,"reputation":19094,"user_id":309946,"accept_rate":75,"display_name":"Ilya Saunkin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1275590916,"creation_date":1275590916,"answer_id":2968850,"question_id":2968640,"body_markdown":"To increase the heap space size beyond the default 64MB, you need to execute the application with -Xmx parameter (for the applet add it in the Java Runtime Settings which you can find in the administration tools on any OS). I guess though it&#39;s not an option in case this is gonna be a web application where you&#39;ll have to modify a lot of end-user machines. \r\nI&#39;d like to find out more about that storage in an x-dimensional array. What exactly do you store? Why 4-byte floats? The uncompressed raw image is usually stored in an WIDTHxHEIGHT array where each cell contains a color object (e.g. 3 shorts describing RGB space). Such an array for a 500x500 image would require 500 * 500 * 3 (the amount of color dimensions) * 2(bytes for a short) = 1 500 000 bytes, way less than 500 * 500 * 5 (still haven&#39;t figured out why 5, probably you store color + coordinates) * 4 (bytes in float) = 5 000 000 bytes.\r\nHave in mind that exactly for this reason compression algorithms (like JPEG) have been developed, so that you don&#39;t have to keep in memory 1.5MB for each image.\r\nAs of the iterations, but mostly for consequent storage of those, there&#39;s not much to say, unless you want to get into the hassle to write something like MPEG format where you&#39;ll have to only save the changes between frames.","title":"&quot;java.lang.OutOfMemoryError: Java heap space&quot; in image and array storage","body":"<p>To increase the heap space size beyond the default 64MB, you need to execute the application with -Xmx parameter (for the applet add it in the Java Runtime Settings which you can find in the administration tools on any OS). I guess though it's not an option in case this is gonna be a web application where you'll have to modify a lot of end-user machines. \nI'd like to find out more about that storage in an x-dimensional array. What exactly do you store? Why 4-byte floats? The uncompressed raw image is usually stored in an WIDTHxHEIGHT array where each cell contains a color object (e.g. 3 shorts describing RGB space). Such an array for a 500x500 image would require 500 * 500 * 3 (the amount of color dimensions) * 2(bytes for a short) = 1 500 000 bytes, way less than 500 * 500 * 5 (still haven't figured out why 5, probably you store color + coordinates) * 4 (bytes in float) = 5 000 000 bytes.\nHave in mind that exactly for this reason compression algorithms (like JPEG) have been developed, so that you don't have to keep in memory 1.5MB for each image.\nAs of the iterations, but mostly for consequent storage of those, there's not much to say, unless you want to get into the hassle to write something like MPEG format where you'll have to only save the changes between frames.</p>\n"}],"owner":{"account_id":146974,"reputation":43,"user_id":357777,"display_name":"user357777"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2334,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":2968787,"answer_count":4,"score":4,"last_activity_date":1639068003,"creation_date":1275588965,"question_id":2968640,"body_markdown":"I am currently working on an image processing demonstration in java (Applet).\r\n\r\nI am running into the problem where my arrays are too large and I am getting the &quot;java.lang.OutOfMemoryError: Java heap space&quot; error.\r\n\r\nThe algorithm I run creates an NxD float array where: N is the number of pixel in the image and D is the coordinates of each pixel plus the colorspace components of each pixel (usually 1 for grayscale or 3 for RGB).  For each iteration of the algorithm it creates one of these NxD float arrays and stores it for later use in a vector, so that the user of the applet may look at the individual steps.\r\n\r\nMy client wants the program to be able to load a 500x500 RGB image and run as the upper bound.  There are about 12 to 20 iterations per run so that means I need to be able to store a 12x500x500x5 float in some fashion.\r\n\r\nIs there a way to process all of this data and, if possible, how?\r\n\r\nExample of the issue:  I am loading a 512 by 512 Grayscale image and even before the first iteration completes I run out of heap space.  The line it points me to is: \r\n\r\nY.add(new float[N][D])\r\n\r\nwhere Y is a Vector&lt;float [][]&gt; and N and D are described as above.  This is the second instance of the code using that line.\r\n\r\nEDIT:  The upper bound, as I mentioned but forgot to correct should be around: 20+ x500x500x5 (20 iterations, 500 width, 500 height, 5 dimensions (where 3 comes from RGB and 2 for the coordinates (The coordinates move and so do the pixels, so I need to record the values, which can and are decimals))  (Approx. 100000000 bytes)","title":"&quot;java.lang.OutOfMemoryError: Java heap space&quot; in image and array storage","body":"<p>I am currently working on an image processing demonstration in java (Applet).</p>\n\n<p>I am running into the problem where my arrays are too large and I am getting the \"java.lang.OutOfMemoryError: Java heap space\" error.</p>\n\n<p>The algorithm I run creates an NxD float array where: N is the number of pixel in the image and D is the coordinates of each pixel plus the colorspace components of each pixel (usually 1 for grayscale or 3 for RGB).  For each iteration of the algorithm it creates one of these NxD float arrays and stores it for later use in a vector, so that the user of the applet may look at the individual steps.</p>\n\n<p>My client wants the program to be able to load a 500x500 RGB image and run as the upper bound.  There are about 12 to 20 iterations per run so that means I need to be able to store a 12x500x500x5 float in some fashion.</p>\n\n<p>Is there a way to process all of this data and, if possible, how?</p>\n\n<p>Example of the issue:  I am loading a 512 by 512 Grayscale image and even before the first iteration completes I run out of heap space.  The line it points me to is: </p>\n\n<p>Y.add(new float[N][D])</p>\n\n<p>where Y is a Vector and N and D are described as above.  This is the second instance of the code using that line.</p>\n\n<p>EDIT:  The upper bound, as I mentioned but forgot to correct should be around: 20+ x500x500x5 (20 iterations, 500 width, 500 height, 5 dimensions (where 3 comes from RGB and 2 for the coordinates (The coordinates move and so do the pixels, so I need to record the values, which can and are decimals))  (Approx. 100000000 bytes)</p>\n"},{"tags":["java","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":8291,"reputation":860447,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1277887325,"creation_date":1277876949,"answer_id":3146764,"question_id":3146750,"body_markdown":"Well, you _have_ to use the heap if you want to use objects. Objects are inherently pointers on the stack (or inside other objects) to memory chunks in the heap.\r\n\r\nUnlike C++ where you can put objects on the stack _or_ heap, Java does things differently.\r\n\r\nEven in C++, it&#39;s a good idea to use the heap for objects that must outlive the function they were created in. You probably _can_ avoid it but you may find yourself with a performance problem with all the copy constructors.\r\n\r\n---\r\n\r\nAs to your edit:\r\n\r\n&gt;Is there any other kind of memory which we can think of alternative to Heap and Stack?\r\n\r\nSure there is: Static data members, the ones where there&#39;s only one per class rather than one per instantiated object must go somewhere. These can&#39;t be on the stack since they may disappear when you exit from a function. And they can&#39;t belong to an particular object.\r\n\r\nThese (at least in the Sun/Oracle JVM) go into the Method area.\r\n\r\nIn addition, you should not think of there being one stack. Every thread gets its own stack on creation.\r\n\r\nThere&#39;s also the runtime constant pool and stacks for native (non-Java) calls.\r\n\r\nThere&#39;s lots of information on the JVM internals [here][1] regarding that aspect but keep in mind there may be a distinction between the logical machine and the implementation.\r\n\r\n  [1]: http://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html","title":"why use Heap Memory in Java","body":"<p>Well, you <em>have</em> to use the heap if you want to use objects. Objects are inherently pointers on the stack (or inside other objects) to memory chunks in the heap.</p>\n\n<p>Unlike C++ where you can put objects on the stack <em>or</em> heap, Java does things differently.</p>\n\n<p>Even in C++, it's a good idea to use the heap for objects that must outlive the function they were created in. You probably <em>can</em> avoid it but you may find yourself with a performance problem with all the copy constructors.</p>\n\n<hr>\n\n<p>As to your edit:</p>\n\n<blockquote>\n  <p>Is there any other kind of memory which we can think of alternative to Heap and Stack?</p>\n</blockquote>\n\n<p>Sure there is: Static data members, the ones where there's only one per class rather than one per instantiated object must go somewhere. These can't be on the stack since they may disappear when you exit from a function. And they can't belong to an particular object.</p>\n\n<p>These (at least in the Sun/Oracle JVM) go into the Method area.</p>\n\n<p>In addition, you should not think of there being one stack. Every thread gets its own stack on creation.</p>\n\n<p>There's also the runtime constant pool and stacks for native (non-Java) calls.</p>\n\n<p>There's lots of information on the JVM internals <a href=\"http://java.sun.com/docs/books/jvms/second_edition/html/Overview.doc.html\" rel=\"noreferrer\">here</a> regarding that aspect but keep in mind there may be a distinction between the logical machine and the implementation.</p>\n"},{"tags":[],"owner":{"account_id":20130,"reputation":279845,"user_id":47773,"accept_rate":52,"display_name":"Matthew Flaschen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277876952,"creation_date":1277876952,"answer_id":3146765,"question_id":3146750,"body_markdown":"Heap memory is central to Java.  All objects are allocated on the heap, and local variables hold only references (essentially pointers) to them.  C# allows you to have objects (value types) that live on the stack.  Java chose not to borrow this from C++, partly in order to simplify the language.\r\n\r\nAcross languages, heap memory is the way to provide long-lived objects of arbitrary size.","title":"why use Heap Memory in Java","body":"<p>Heap memory is central to Java.  All objects are allocated on the heap, and local variables hold only references (essentially pointers) to them.  C# allows you to have objects (value types) that live on the stack.  Java chose not to borrow this from C++, partly in order to simplify the language.</p>\n\n<p>Across languages, heap memory is the way to provide long-lived objects of arbitrary size.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1277879827,"creation_date":1277879827,"answer_id":3146941,"question_id":3146750,"body_markdown":"In the JVM, instead of a thread local stack for objects it uses a Thread Local Allocation Buffer or (TLAB) This gives much of the performance benifits of a Stack, without the developer needing to worry about wether an object is on the stack or not.","title":"why use Heap Memory in Java","body":"<p>In the JVM, instead of a thread local stack for objects it uses a Thread Local Allocation Buffer or (TLAB) This gives much of the performance benifits of a Stack, without the developer needing to worry about wether an object is on the stack or not.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1277881543,"creation_date":1277881543,"answer_id":3147082,"question_id":3146750,"body_markdown":"&gt; Can we use Stack memory for the same?\r\n\r\nBasically no.  \r\n\r\nIn Java, stack memory is used solely for parameters and local variables of methods (and some hidden book-keeping info which is not relevant to this discussion).  And for those variables, only primitive types use just stack memory.  Any object or array is represented as a reference to something on the heap, and Java provides no way to allocate an object or array on the stack.\r\n\r\n[Aside: it is theoretically possible to perform any calculation in Java using just primitive types and recursive static methods.  However, it would be horribly messy.  Even writing a simple message to the console will entail your application causing objects to be allocated on the heap.  So we can dismiss this as being totally impractical.]\r\n","title":"why use Heap Memory in Java","body":"<blockquote>\n  <p>Can we use Stack memory for the same?</p>\n</blockquote>\n\n<p>Basically no.  </p>\n\n<p>In Java, stack memory is used solely for parameters and local variables of methods (and some hidden book-keeping info which is not relevant to this discussion).  And for those variables, only primitive types use just stack memory.  Any object or array is represented as a reference to something on the heap, and Java provides no way to allocate an object or array on the stack.</p>\n\n<p>[Aside: it is theoretically possible to perform any calculation in Java using just primitive types and recursive static methods.  However, it would be horribly messy.  Even writing a simple message to the console will entail your application causing objects to be allocated on the heap.  So we can dismiss this as being totally impractical.]</p>\n"},{"tags":[],"owner":{"account_id":627407,"reputation":1,"user_id":379774,"display_name":"Maddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1277883585,"creation_date":1277883585,"answer_id":3147275,"question_id":3146750,"body_markdown":"Another important factor to consider is scoping. If all objects were to be allocated on stack then they go out of context as stack frame gets rolled out. In layman terms, think of stack as a dump that stores all the variable values and object references that are local to a subroutine/method which is currently in scope. As soon as it finishes executing (or the method goes out of scope), then all in it would be lost.","title":"why use Heap Memory in Java","body":"<p>Another important factor to consider is scoping. If all objects were to be allocated on stack then they go out of context as stack frame gets rolled out. In layman terms, think of stack as a dump that stores all the variable values and object references that are local to a subroutine/method which is currently in scope. As soon as it finishes executing (or the method goes out of scope), then all in it would be lost.</p>\n"},{"tags":[],"owner":{"account_id":145363,"reputation":3944,"user_id":355116,"accept_rate":67,"display_name":"Nikhil Garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1277884139,"creation_date":1277884139,"answer_id":3147332,"question_id":3146750,"body_markdown":"It makes it easier for compiler to manage large &amp;/or dynamic sized variables too- they still take small constant storage on call stack- that of 4 bytes ( a heap pointer).","title":"why use Heap Memory in Java","body":"<p>It makes it easier for compiler to manage large &amp;/or dynamic sized variables too- they still take small constant storage on call stack- that of 4 bytes ( a heap pointer).</p>\n"},{"tags":[],"owner":{"account_id":5942587,"reputation":3088,"user_id":4673240,"display_name":"Praveen Kumar Verma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1426676225,"creation_date":1426676225,"answer_id":29120164,"question_id":3146750,"body_markdown":"Heap memory is used to store objects in Java. No matter, where object is created in code.\r\ne.g. as member variable, local variable or class variable,  they are always created inside heap space in Java.\r\nIf there is no memory left in stack for storing function call or local variable, JVM will throw java.lang.StackOverFlowError,\r\nWhile if there is no more heap space for creating object, JVM will throw \r\njava.lang.OutOfMemoryError Java Heap Space.\r\n\r\n\r\n","title":"why use Heap Memory in Java","body":"<p>Heap memory is used to store objects in Java. No matter, where object is created in code.\ne.g. as member variable, local variable or class variable,  they are always created inside heap space in Java.\nIf there is no memory left in stack for storing function call or local variable, JVM will throw java.lang.StackOverFlowError,\nWhile if there is no more heap space for creating object, JVM will throw \njava.lang.OutOfMemoryError Java Heap Space.</p>\n"}],"owner":{"account_id":85376,"reputation":15716,"user_id":238052,"accept_rate":66,"display_name":"gmhk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2309,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":3146764,"answer_count":7,"score":6,"last_activity_date":1639067989,"creation_date":1277876822,"question_id":3146750,"body_markdown":"Why do we use Heap Memory, Can we use Stack memory for the same?\r\n\r\n\r\n----------\r\nEDITED\r\n----------\r\n\r\n\r\nOne more question came in my mind after reading answers\r\n1) is there any other kind of memory which we can think of alternative to Heap and Stack?\r\n\r\n\r\n----------\r\nEdited\r\n----------\r\nI came across the string pool, is that memory associated with the heap or Stack?\r\n\r\n\r\n ","title":"why use Heap Memory in Java","body":"<p>Why do we use Heap Memory, Can we use Stack memory for the same?</p>\n\n<hr>\n\n<h2>EDITED</h2>\n\n<p>One more question came in my mind after reading answers\n1) is there any other kind of memory which we can think of alternative to Heap and Stack?</p>\n\n<hr>\n\n<h2>Edited</h2>\n\n<p>I came across the string pool, is that memory associated with the heap or Stack?</p>\n"},{"tags":["java","tomcat","singleton","weblogic","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1279236116,"creation_date":1279236116,"answer_id":3260836,"question_id":3260294,"body_markdown":"&gt; It appears startup classes were deprecated sometime around or after 8.1, and now gone in 10.3.\r\n\r\nIndeed. But they are &quot;replaced&quot; by an [Application Life Cycle Events API][1] so they are kinda still there.\r\n\r\n&gt; Is there any way to have this object and other code &quot;live&quot; above the application/module level, have only one copy per jvm / managed server, and be accessible by all modules deployed to the same managed server?\r\n\r\nNot exactly what you&#39;re asking for but you could implement a service on top of a caching solution like EHCache and expose this service via a Stateless Session Bean or a Web Service (or even both). If this is not an option, can you clarify the exact need?\r\n\r\n  [1]: http://download.oracle.com/docs/cd/E14571_01/web.1111/e13706/lifecycle.htm#WLPRG356","title":"Weblogic 10.3 managed server shared memory object(s)","body":"<blockquote>\n  <p>It appears startup classes were deprecated sometime around or after 8.1, and now gone in 10.3.</p>\n</blockquote>\n\n<p>Indeed. But they are \"replaced\" by an <a href=\"http://download.oracle.com/docs/cd/E14571_01/web.1111/e13706/lifecycle.htm#WLPRG356\" rel=\"nofollow noreferrer\">Application Life Cycle Events API</a> so they are kinda still there.</p>\n\n<blockquote>\n  <p>Is there any way to have this object and other code \"live\" above the application/module level, have only one copy per jvm / managed server, and be accessible by all modules deployed to the same managed server?</p>\n</blockquote>\n\n<p>Not exactly what you're asking for but you could implement a service on top of a caching solution like EHCache and expose this service via a Stateless Session Bean or a Web Service (or even both). If this is not an option, can you clarify the exact need?</p>\n"}],"owner":{"account_id":86087,"reputation":641,"user_id":239645,"accept_rate":60,"display_name":"bobtheowl2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":3260836,"answer_count":1,"score":1,"last_activity_date":1639067976,"creation_date":1279229916,"question_id":3260294,"body_markdown":"We are using Oracle Weblogic 10.3 as our application server.  We have multiple modules that need to access an Object (contains some HashMaps) that is common for the managed server.  This object will be populated via some other process on a daily basis.  We do not want to have copies of this in each application, due to the large number of applications and limited memory.  We cannot combine these into one ear since the individual (wars) would need to be updated on differing schedules.\r\n\r\nI have tried creating an optional package and referencing it in two modules.  The class being access just wraps calls to a singleton of the object.  But what happens a separate singleton is created for each application, defeating the purpose.\r\n\r\nIt appears startup classes were deprecated sometime around or after 8.1, and now gone in 10.3.\r\n\r\nIs there any way to have this object and other code &quot;live&quot; above the application/module level, have only one copy per jvm / managed server, and be accessible by all modules deployed to the same managed server?\r\n\r\nBonus points if the solution would also work in Tomcat.\r\n\r\n","title":"Weblogic 10.3 managed server shared memory object(s)","body":"<p>We are using Oracle Weblogic 10.3 as our application server.  We have multiple modules that need to access an Object (contains some HashMaps) that is common for the managed server.  This object will be populated via some other process on a daily basis.  We do not want to have copies of this in each application, due to the large number of applications and limited memory.  We cannot combine these into one ear since the individual (wars) would need to be updated on differing schedules.</p>\n\n<p>I have tried creating an optional package and referencing it in two modules.  The class being access just wraps calls to a singleton of the object.  But what happens a separate singleton is created for each application, defeating the purpose.</p>\n\n<p>It appears startup classes were deprecated sometime around or after 8.1, and now gone in 10.3.</p>\n\n<p>Is there any way to have this object and other code \"live\" above the application/module level, have only one copy per jvm / managed server, and be accessible by all modules deployed to the same managed server?</p>\n\n<p>Bonus points if the solution would also work in Tomcat.</p>\n"},{"tags":["java","size","heap-memory","large-data-volumes"],"answers":[{"tags":[],"owner":{"account_id":51705,"reputation":21173,"user_id":154527,"accept_rate":100,"display_name":"Alain O&#39;Dea"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1284035136,"creation_date":1284035136,"answer_id":3676473,"question_id":3676415,"body_markdown":"I recommend having something similar to IntelliJ. It brings up a configuration dialog when an OutOfMemoryException occurs.  This dialog allows the user to configure the heap size and stores it to `idea.exe.vmoptions`. You would need to sub the contents of the file into the java/javaw launch command or have one Java program bootstrap and launch the real one.\r\n\r\nA really cool variant on this is to suggest a memory size based on the data size.  The user really has no way of knowing how much memory your program needs so any guidance you can provide in selecting the value will help them immensely.\r\n\r\nIt is extremely important in support of this solution that you expect and handle OutOfMemoryExceptions in a way that avoids data corruption!","title":"How do I allow the user to easily choose how much memory to allocate in a Java Swing app?","body":"<p>I recommend having something similar to IntelliJ. It brings up a configuration dialog when an OutOfMemoryException occurs.  This dialog allows the user to configure the heap size and stores it to <code>idea.exe.vmoptions</code>. You would need to sub the contents of the file into the java/javaw launch command or have one Java program bootstrap and launch the real one.</p>\n\n<p>A really cool variant on this is to suggest a memory size based on the data size.  The user really has no way of knowing how much memory your program needs so any guidance you can provide in selecting the value will help them immensely.</p>\n\n<p>It is extremely important in support of this solution that you expect and handle OutOfMemoryExceptions in a way that avoids data corruption!</p>\n"},{"tags":[],"owner":{"account_id":98330,"reputation":1840,"user_id":266246,"display_name":"Nithesh Chandra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1284035347,"creation_date":1284035347,"answer_id":3676509,"question_id":3676415,"body_markdown":"You did not mention how you are creating the installer. If you do not already use it, I suggest using [NSIS](http://nsis.sourceforge.net/Main_Page). The documentation is good and it has a plugin for eclipse. You can use the wizard to generate the nsi file and then edit it manually for the options that are not available with the wizard.\r\n\r\nAs to your current requirement, simply add a page to the installer for the options and based on the option selected, copy the correct system properties file to the user settings folder that you can use to start your program. I am not sure if its possible but I think once the program is installed, the user can re-run the installer and select a different option.","title":"How do I allow the user to easily choose how much memory to allocate in a Java Swing app?","body":"<p>You did not mention how you are creating the installer. If you do not already use it, I suggest using <a href=\"http://nsis.sourceforge.net/Main_Page\" rel=\"nofollow noreferrer\">NSIS</a>. The documentation is good and it has a plugin for eclipse. You can use the wizard to generate the nsi file and then edit it manually for the options that are not available with the wizard.</p>\n\n<p>As to your current requirement, simply add a page to the installer for the options and based on the option selected, copy the correct system properties file to the user settings folder that you can use to start your program. I am not sure if its possible but I think once the program is installed, the user can re-run the installer and select a different option.</p>\n"},{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1284035376,"creation_date":1284035376,"answer_id":3676514,"question_id":3676415,"body_markdown":"I would write a short startup.jar with very few fixed memory settings starting from a script. In turn startup.jar will start your target app with Runtime.exec() and adjusted parameters.\r\n\r\nYou end up in 2 JVM instances that spend more memory than only one JVM. But if your application will spend a lot of memory anyway the first JVM does not matter.\r\n ","title":"How do I allow the user to easily choose how much memory to allocate in a Java Swing app?","body":"<p>I would write a short startup.jar with very few fixed memory settings starting from a script. In turn startup.jar will start your target app with Runtime.exec() and adjusted parameters.</p>\n\n<p>You end up in 2 JVM instances that spend more memory than only one JVM. But if your application will spend a lot of memory anyway the first JVM does not matter.</p>\n"},{"tags":[],"owner":{"account_id":43980,"reputation":22154,"user_id":128812,"display_name":"gpeche"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1284670382,"creation_date":1284666065,"answer_id":3730151,"question_id":3676415,"body_markdown":"The main idea would be this:\r\n\r\n - Launch your main application through a shell script similar to this:\r\n&lt;pre&gt;\r\n@echo off\r\nsetlocal\r\nREM This reads the JVM command line options from a user configuration file\r\nfor /f %x in (%HOMEDRIVE%%HOMEPATH%\\myapp.config) do set JVM_OPTIONS=%x\r\nREM Important: call javaw and not java\r\njavaw -jar myApp.jar %JVM_OPTIONS%\r\nendlocal\r\n&lt;/pre&gt;\r\n\r\n - In your Swing application, have a menu option *Memory settings...*. When the user selects that, parse the user&#39;s configuration file and populate a settings dialog so that the user can change whatever it is appropiate. When the user clicks **Apply** or **Ok**,  overwrite the user configuration file  with command line options according to the user&#39;s selected settigns (in your case, `-Xmx`), and show a message saying something like *Restart the application to apply these settings*.\r\n\r\n","title":"How do I allow the user to easily choose how much memory to allocate in a Java Swing app?","body":"<p>The main idea would be this:</p>\n\n<ul>\n<li>Launch your main application through a shell script similar to this:</li>\n</ul>\n\n<pre>\n@echo off\nsetlocal\nREM This reads the JVM command line options from a user configuration file\nfor /f %x in (%HOMEDRIVE%%HOMEPATH%\\myapp.config) do set JVM_OPTIONS=%x\nREM Important: call javaw and not java\njavaw -jar myApp.jar %JVM_OPTIONS%\nendlocal\n</pre>\n\n<ul>\n<li>In your Swing application, have a menu option <em>Memory settings...</em>. When the user selects that, parse the user's configuration file and populate a settings dialog so that the user can change whatever it is appropiate. When the user clicks <strong>Apply</strong> or <strong>Ok</strong>,  overwrite the user configuration file  with command line options according to the user's selected settigns (in your case, <code>-Xmx</code>), and show a message saying something like <em>Restart the application to apply these settings</em>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":159523,"reputation":12477,"user_id":378968,"accept_rate":87,"display_name":"Dead Programmer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285060494,"creation_date":1285060494,"answer_id":3758833,"question_id":3676415,"body_markdown":"catch the outofmemory excpetion , lauch a swing user dialog to set the memory limit, pass this value to a thread that uses Runtime.exec() restart the application using java -cp lib&#39;s jar vmoptions that will launch a new jvm with memory size specified to user.sample: \r\n\r\n&gt;      Runtime.getRuntime().exec(&quot;java -cp\r\n&gt;      -Xms2560m -Xmx2560m -XX:NewSize=32M -XX:MaxPermSize=256M -XX:+DisableExplicitGC -XX:+UseConcMarkSweepGC -XX:+UseParNewG launch.jar&quot;);","title":"How do I allow the user to easily choose how much memory to allocate in a Java Swing app?","body":"<p>catch the outofmemory excpetion , lauch a swing user dialog to set the memory limit, pass this value to a thread that uses Runtime.exec() restart the application using java -cp lib's jar vmoptions that will launch a new jvm with memory size specified to user.sample: </p>\n\n<blockquote>\n<pre><code> Runtime.getRuntime().exec(\"java -cp\n -Xms2560m -Xmx2560m -XX:NewSize=32M -XX:MaxPermSize=256M -XX:+DisableExplicitGC -XX:+UseConcMarkSweepGC -XX:+UseParNewG launch.jar\");\n</code></pre>\n</blockquote>\n"}],"owner":{"account_id":86536,"reputation":10312,"user_id":240566,"accept_rate":82,"display_name":"Jay Askren"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":3676473,"answer_count":5,"score":3,"last_activity_date":1639067949,"creation_date":1284034641,"question_id":3676415,"body_markdown":"We have a Swing app that processes relatively large amounts of data.  For instance we currently process CSV files with millions of rows of data.  For the reasons of performance and simplicity we just keep all of the data in memory.  However different users will have different amounts of data they need to process as well as different amounts of RAM.  When creating the installer, of course we need to specify the heap size.  Is there any easy way to allow the user to specify the heap without them needing to hand edit a configuration or .bat file?  I&#39;m guessing not all users would be comfortable with this.\r\n\r\nI&#39;ve seen one example where an app specified three different shortcuts each with a different amount of memory specified.  This could work but I would like an option that is more flexible.  The user could then just choose the one that would work best for them.\r\n\r\n","title":"How do I allow the user to easily choose how much memory to allocate in a Java Swing app?","body":"<p>We have a Swing app that processes relatively large amounts of data.  For instance we currently process CSV files with millions of rows of data.  For the reasons of performance and simplicity we just keep all of the data in memory.  However different users will have different amounts of data they need to process as well as different amounts of RAM.  When creating the installer, of course we need to specify the heap size.  Is there any easy way to allow the user to specify the heap without them needing to hand edit a configuration or .bat file?  I'm guessing not all users would be comfortable with this.</p>\n\n<p>I've seen one example where an app specified three different shortcuts each with a different amount of memory specified.  This could work but I would like an option that is more flexible.  The user could then just choose the one that would work best for them.</p>\n"},{"tags":["java","tomcat"],"comments":[{"owner":{"account_id":1019399,"reputation":4380,"user_id":1030209,"accept_rate":83,"display_name":"Andres Olarte"},"score":0,"creation_date":1360687738,"post_id":14805657,"comment_id":20790833,"body_markdown":"Based on what you posted, it should work.  Maybe there&#39;s something else in this webapp that&#39;s preventing it from working.  Can you post you your web.xml?  Also, are both files actually text files? If you move the abc file to the data dir can you access it with http://hostname:8080/myapp/document/data/abc.txt ? Finally, is the xyz.txt file in the data directory and readable by the user that&#39;s running the Tomcat process?","body":"Based on what you posted, it should work.  Maybe there&#39;s something else in this webapp that&#39;s preventing it from working.  Can you post you your web.xml?  Also, are both files actually text files? If you move the abc file to the data dir can you access it with <a href=\"http://hostname:8080/myapp/document/data/abc.txt\" rel=\"nofollow noreferrer\">hostname:8080/myapp/document/data/abc.txt</a> ? Finally, is the xyz.txt file in the data directory and readable by the user that&#39;s running the Tomcat process?"},{"owner":{"account_id":236270,"reputation":13,"user_id":503640,"display_name":"Jie"},"score":0,"creation_date":1360727308,"post_id":14805657,"comment_id":20806274,"body_markdown":"Andres, thanks for your response. I got it working finally. I think it was the web.xml. Unfortunately I deleted the old web.xml, so I don&#39;t know what was wrong about it. How I fix it was I deleted the old WEB-INF then copied the ${catalina.home}/webapps/docs/WEB-INF to myapp/. :)","body":"Andres, thanks for your response. I got it working finally. I think it was the web.xml. Unfortunately I deleted the old web.xml, so I don&#39;t know what was wrong about it. How I fix it was I deleted the old WEB-INF then copied the ${catalina.home}/webapps/docs/WEB-INF to myapp/. :)"}],"answers":[{"tags":[],"owner":{"account_id":236270,"reputation":13,"user_id":503640,"display_name":"Jie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1360728605,"creation_date":1360728605,"answer_id":14846244,"question_id":14805657,"body_markdown":"This is resolved. I believe the problem was the web.xml. What I did was copying the sample web.xml from tomcat/webapps/docs/WEB-INF.","title":"cannot access files in appbase&#39;s subfolder in tomcat","body":"<p>This is resolved. I believe the problem was the web.xml. What I did was copying the sample web.xml from tomcat/webapps/docs/WEB-INF.</p>\n"},{"tags":[],"owner":{"account_id":2278572,"reputation":1733,"user_id":2004265,"display_name":"DAB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639067899,"creation_date":1639067899,"answer_id":70293511,"question_id":14805657,"body_markdown":"I had this problem because my URL pattern didn&#39;t include anything but the root directory\r\n\r\nI changed this in web.xml\r\n\r\n    &lt;servlet-mapping&gt;\r\n      &lt;servlet-name&gt;webdav&lt;/servlet-name&gt;\r\n      &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\nto this \r\n\r\n    &lt;servlet-mapping&gt;\r\n      &lt;servlet-name&gt;webdav&lt;/servlet-name&gt;\r\n      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\n(I added a star after the slash in the url-pattern)\r\n\r\n\r\n","title":"cannot access files in appbase&#39;s subfolder in tomcat","body":"<p>I had this problem because my URL pattern didn't include anything but the root directory</p>\n<p>I changed this in web.xml</p>\n<pre><code>&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;webdav&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n<p>to this</p>\n<pre><code>&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;webdav&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n<p>(I added a star after the slash in the url-pattern)</p>\n"}],"owner":{"account_id":236270,"reputation":13,"user_id":503640,"display_name":"Jie"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2011,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":14846244,"answer_count":2,"score":0,"last_activity_date":1639067899,"creation_date":1360554963,"question_id":14805657,"body_markdown":"I have a very simple Tomcat web app.\r\n\r\nThis app is deployed to ${catalina.home}/webapps/myapp. Under myapp there are two folders:&lt;br&gt;\r\n1. WEB-INF - contains a single web.xml file with bare minimal content.&lt;br&gt;\r\n2. document - contains a folder called data.&lt;p&gt;\r\n\r\nMy goal is to access any files under document folder.\r\n\r\nNow I can access files under document folder without problem. i.e. open `http://hostname:8080/myapp/document/abc.txt` in browser will show the text file content.&lt;br&gt;\r\n\r\nBut I can&#39;t access files under document/data, i.e, open `http://hostname:8080/myapp/document/data/xyz.txt` in browser will get 404 error.\r\n\r\nIs there any configuration that I missed? Thanks a lot!","title":"cannot access files in appbase&#39;s subfolder in tomcat","body":"<p>I have a very simple Tomcat web app.</p>\n\n<p>This app is deployed to ${catalina.home}/webapps/myapp. Under myapp there are two folders:<br>\n1. WEB-INF - contains a single web.xml file with bare minimal content.<br>\n2. document - contains a folder called data.<p></p>\n\n<p>My goal is to access any files under document folder.</p>\n\n<p>Now I can access files under document folder without problem. i.e. open <code>http://hostname:8080/myapp/document/abc.txt</code> in browser will show the text file content.<br></p>\n\n<p>But I can't access files under document/data, i.e, open <code>http://hostname:8080/myapp/document/data/xyz.txt</code> in browser will get 404 error.</p>\n\n<p>Is there any configuration that I missed? Thanks a lot!</p>\n"},{"tags":["java","linux","eclipse","heap-memory"],"comments":[{"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"score":0,"creation_date":1285227540,"post_id":3776041,"comment_id":3998155,"body_markdown":"Did you try this eclipse.ini (http://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse/3275659#3275659) with your Xms Xmx settings?","body":"Did you try this eclipse.ini (<a href=\"http://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse/3275659#3275659\" title=\"what are the best jvm settings for eclipse\">stackoverflow.com/questions/142357/&hellip;</a>) with your Xms Xmx settings?"}],"answers":[{"tags":[],"owner":{"account_id":51415,"reputation":24508,"user_id":153621,"accept_rate":88,"display_name":"nanda"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1285229740,"creation_date":1285229740,"answer_id":3776478,"question_id":3776041,"body_markdown":"You can go to the `Preferences -&gt; General` and check the `Show heap status`. This activate a nice view of your heap in the corner of Eclipse. Something like this:\r\n\r\n![alt text][1]\r\n\r\nIf you click the trash bin, it will try to run garbage collection and return the memory.\r\n\r\n  [1]: http://i.stack.imgur.com/7ugJv.png","title":"Eclipse release heap back to system","body":"<p>You can go to the <code>Preferences -&gt; General</code> and check the <code>Show heap status</code>. This activate a nice view of your heap in the corner of Eclipse. Something like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/7ugJv.png\" alt=\"alt text\"></p>\n\n<p>If you click the trash bin, it will try to run garbage collection and return the memory.</p>\n"},{"tags":[],"owner":{"account_id":60501,"reputation":6867,"user_id":180674,"display_name":"Blrfl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1285248434,"creation_date":1285232953,"answer_id":3776851,"question_id":3776041,"body_markdown":"Java&#39;s heap is nothing more than a big data structure managed within the JVM process&#39; heap space.  The two heaps are logically-separate entities even though they occupy the same memory.\r\n\r\nThe JVM is at the mercy of the host system&#39;s implementations of `malloc()`, which allocates memory from the system using `brk()`.  On Linux systems (Solaris, too), memory allocated for the process heap is almost never returned, largely because it becomes fragmented and the heap must be contiguous.  This means that memory allocated to the process will increase monotonically, and the only way to keep the size down is not to allocate it in the first place.\r\n\r\n`-Xms` and `-Xmx` tell the JVM how to size the Java heap ahead of time, which causes it to allocate process memory.  Java can garbage collect until the sun burns out, but that cleanup is internal to the JVM and the process memory backing it doesn&#39;t get returned.\r\n\r\n-----\r\n\r\nElaboration from comment below:\r\n\r\nThe standard way for a program written in C (notably the JVM running Eclipse for you) to allocate memory is to call `malloc(3)`, which uses the OS-provided mechanism for allocating memory to the process and then managing individual allocations within those allocations.  The details of how `malloc()` and `free()` work are implementation-specific.\r\n\r\nOn most flavors of Unix, a process gets exactly one data segment, which is a contiguous region of memory that has pointers to the start and end.  The process can adjust the size of this segment by calling `brk(2)` and increasing the end pointer to allocate more memory or decreasing it to return it to the system.  _Only_ the end can be adjusted.  This means that if your implementation of `malloc()` enlarges the data segment, the corresponding implementation of `free()` can&#39;t shrink it unless it determines that there&#39;s space at the end that&#39;s not being used.  In practice, a humongous chunk of memory you allocated with `malloc()` rarely winds up at the very end of the data segment when you `free()` it, which is why processes tend to grow monotonically.\r\n","title":"Eclipse release heap back to system","body":"<p>Java's heap is nothing more than a big data structure managed within the JVM process' heap space.  The two heaps are logically-separate entities even though they occupy the same memory.</p>\n\n<p>The JVM is at the mercy of the host system's implementations of <code>malloc()</code>, which allocates memory from the system using <code>brk()</code>.  On Linux systems (Solaris, too), memory allocated for the process heap is almost never returned, largely because it becomes fragmented and the heap must be contiguous.  This means that memory allocated to the process will increase monotonically, and the only way to keep the size down is not to allocate it in the first place.</p>\n\n<p><code>-Xms</code> and <code>-Xmx</code> tell the JVM how to size the Java heap ahead of time, which causes it to allocate process memory.  Java can garbage collect until the sun burns out, but that cleanup is internal to the JVM and the process memory backing it doesn't get returned.</p>\n\n<hr>\n\n<p>Elaboration from comment below:</p>\n\n<p>The standard way for a program written in C (notably the JVM running Eclipse for you) to allocate memory is to call <code>malloc(3)</code>, which uses the OS-provided mechanism for allocating memory to the process and then managing individual allocations within those allocations.  The details of how <code>malloc()</code> and <code>free()</code> work are implementation-specific.</p>\n\n<p>On most flavors of Unix, a process gets exactly one data segment, which is a contiguous region of memory that has pointers to the start and end.  The process can adjust the size of this segment by calling <code>brk(2)</code> and increasing the end pointer to allocate more memory or decreasing it to return it to the system.  <em>Only</em> the end can be adjusted.  This means that if your implementation of <code>malloc()</code> enlarges the data segment, the corresponding implementation of <code>free()</code> can't shrink it unless it determines that there's space at the end that's not being used.  In practice, a humongous chunk of memory you allocated with <code>malloc()</code> rarely winds up at the very end of the data segment when you <code>free()</code> it, which is why processes tend to grow monotonically.</p>\n"},{"tags":[],"owner":{"account_id":102196,"reputation":21079,"user_id":274473,"accept_rate":78,"display_name":"kayahr"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1297673169,"creation_date":1297673169,"answer_id":4990211,"question_id":3776041,"body_markdown":"Found a solution. I switched Java to use the G1 garbage collector and now the HeapFreeRatio parameters works as intended. So I use these options in eclipse.ini:\r\n\r\n    -XX:+UnlockExperimentalVMOptions\r\n    -XX:+UseG1GC\r\n    -XX:MinHeapFreeRatio=5\r\n    -XX:MaxHeapFreeRatio=25\r\n\r\nNow when Eclipse eats up more than 1 GB of RAM for a complicated operation and switched back to 300 MB after Garbage Collection the memory is actually released back to the operating system.\r\n\r\n","title":"Eclipse release heap back to system","body":"<p>Found a solution. I switched Java to use the G1 garbage collector and now the HeapFreeRatio parameters works as intended. So I use these options in eclipse.ini:</p>\n\n<pre><code>-XX:+UnlockExperimentalVMOptions\n-XX:+UseG1GC\n-XX:MinHeapFreeRatio=5\n-XX:MaxHeapFreeRatio=25\n</code></pre>\n\n<p>Now when Eclipse eats up more than 1 GB of RAM for a complicated operation and switched back to 300 MB after Garbage Collection the memory is actually released back to the operating system.</p>\n"}],"owner":{"account_id":102196,"reputation":21079,"user_id":274473,"accept_rate":78,"display_name":"kayahr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6476,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":4990211,"answer_count":3,"score":4,"last_activity_date":1639067845,"creation_date":1285225129,"question_id":3776041,"body_markdown":"I&#39;m using Eclipse 3.6 with latest Sun Java 6 on Linux (64 bit) with a larger number of large projects. In some special circumstances (SVN updates for example) Eclipse needs up to 1 GB heap. But most of the time it only needs 350 MB. When I enable the heap status panel then I see this most of the time:\r\n\r\n 350M of 878M\r\n\r\nI start Eclipse with these settings: -Xms128m -Xmx1024m\r\n\r\nSo most of the time lots of MB are just wasted and are just used rarely when memory usage peaks for a short time. I don&#39;t like that at all and I want Eclipse to release the memory back to the system, so I can use it for other programs.\r\n\r\nWhen Eclipse needs more memory while there is not enough free RAM than Linux can swap out other running programs, I can live with that. I heard there is a -XX:MaxHeapFreeRatio option. But I never figured out what values I have to use so it works. No value I tried ever made a difference.\r\n\r\nSo how can I tell Eclipse (Or Java) to release unused heap?","title":"Eclipse release heap back to system","body":"<p>I'm using Eclipse 3.6 with latest Sun Java 6 on Linux (64 bit) with a larger number of large projects. In some special circumstances (SVN updates for example) Eclipse needs up to 1 GB heap. But most of the time it only needs 350 MB. When I enable the heap status panel then I see this most of the time:</p>\n\n<p>350M of 878M</p>\n\n<p>I start Eclipse with these settings: -Xms128m -Xmx1024m</p>\n\n<p>So most of the time lots of MB are just wasted and are just used rarely when memory usage peaks for a short time. I don't like that at all and I want Eclipse to release the memory back to the system, so I can use it for other programs.</p>\n\n<p>When Eclipse needs more memory while there is not enough free RAM than Linux can swap out other running programs, I can live with that. I heard there is a -XX:MaxHeapFreeRatio option. But I never figured out what values I have to use so it works. No value I tried ever made a difference.</p>\n\n<p>So how can I tell Eclipse (Or Java) to release unused heap?</p>\n"},{"tags":["java","heap-memory","bufferedimage"],"comments":[{"owner":{"account_id":141652,"reputation":1916,"user_id":348852,"accept_rate":82,"display_name":"Sagar V"},"score":0,"creation_date":1286191469,"post_id":3854200,"comment_id":4097846,"body_markdown":"Might be a noob question but why 4*w*h?","body":"Might be a noob question but why 4*w*h?"},{"owner":{"account_id":60641,"reputation":25396,"user_id":181106,"accept_rate":81,"display_name":"uckelman"},"score":0,"creation_date":1286191680,"post_id":3854200,"comment_id":4097874,"body_markdown":"`w*h` is the number of pixels. In a `TYPE_INT_ARGB` image, each pixel is stored in an `int`, which should be 4 bytes. So `4*w*h` ought to be the number of bytes the `int[]` uses for storing its data.","body":"<code>w*h</code> is the number of pixels. In a <code>TYPE_INT_ARGB</code> image, each pixel is stored in an <code>int</code>, which should be 4 bytes. So <code>4*w*h</code> ought to be the number of bytes the <code>int[]</code> uses for storing its data."}],"answers":[{"tags":[],"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1286192276,"creation_date":1286192276,"answer_id":3854856,"question_id":3854200,"body_markdown":"There seem to be a bug in Oracle&#39;s VM introduced somewhere between 1.6.0_16 and 1.6.0_20. You can even reduce the problem to allocating an int array, as the problem is not only related to BufferedImage.\r\n\r\nWith 1.6.0_16, I need at least 413 MB heap to allocate an int array with 100,000,000 elements, which seem reasonable. With 1.6.0_20, the same operation requires at least 573 MB heap space, although only appr 400,000,000 bytes are actually used after allocating the array.","title":"Why does a BufferedImage require so much memory beyond the size of its data array?","body":"<p>There seem to be a bug in Oracle's VM introduced somewhere between 1.6.0_16 and 1.6.0_20. You can even reduce the problem to allocating an int array, as the problem is not only related to BufferedImage.</p>\n\n<p>With 1.6.0_16, I need at least 413 MB heap to allocate an int array with 100,000,000 elements, which seem reasonable. With 1.6.0_20, the same operation requires at least 573 MB heap space, although only appr 400,000,000 bytes are actually used after allocating the array.</p>\n"},{"tags":[],"owner":{"account_id":60641,"reputation":25396,"user_id":181106,"accept_rate":81,"display_name":"uckelman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1290620338,"creation_date":1290620338,"answer_id":4269777,"question_id":3854200,"body_markdown":"On further investigation, the problem appears to be that the Old Generation in the heap is not able to expand sufficiently to accommodate the image&#39;s data array, despite that there is enough free memory in the heap at large.\r\n\r\nFor further details about how to expand the Old Generation, see [this question](https://stackoverflow.com/questions/4269734/how-to-let-the-psoldgen-expand-to-accomodate-very-large-objects).","title":"Why does a BufferedImage require so much memory beyond the size of its data array?","body":"<p>On further investigation, the problem appears to be that the Old Generation in the heap is not able to expand sufficiently to accommodate the image's data array, despite that there is enough free memory in the heap at large.</p>\n\n<p>For further details about how to expand the Old Generation, see <a href=\"https://stackoverflow.com/questions/4269734/how-to-let-the-psoldgen-expand-to-accomodate-very-large-objects\">this question</a>.</p>\n"},{"tags":[],"owner":{"account_id":3109658,"reputation":356,"user_id":2631710,"display_name":"JHead"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1541672158,"creation_date":1541672158,"answer_id":53205617,"question_id":3854200,"body_markdown":"The problem is that the BufferedImage object stores the image in the memory in uncompresed format. There is an effective solution for this: you can store the image on the hard drive and you don&#39;t have to worry about the heap size or the physical memory limit. It can store maximum 2,147,483,647 pixels (or 46,340 x 46,340 pixels). **BigBufferedImage** solves this problem.\r\n\r\nCreate az empty a BigBufferedImage:\r\n\r\n    BigBufferedImage image = BigBufferedImage.create(\r\n            tempDir, width, height, type);\r\n\r\nLoad an existent image to BigBufferedImage:\r\n\r\n    BigBufferedImage image = BigBufferedImage.create(\r\n            imagePath, tempDir, type);\r\n\r\nRender the part of the image:\r\n\r\n    part = image.getSubimage(x, y, width, height);\r\n\r\nThe implementation of BigBufferedImage:\r\n\r\n    package com.pulispace.mc.ui.panorama.util;\r\n    \r\n    /*\r\n     * This class is part of MCFS (Mission Control - Flight Software) a development \r\n     * of Team Puli Space, official Google Lunar XPRIZE contestant. \r\n     * This class is released under Creative Commons CC0.\r\n     * @author Zsolt Pocze, Dimitry Polivaev\r\n     * Please like us on facebook, and/or join our Small Step Club.\r\n     * http://www.pulispace.com\r\n     * https://www.facebook.com/pulispace\r\n     * http://nyomdmegteis.hu/en/\r\n     */\r\n    import java.awt.Point;\r\n    import java.awt.Rectangle;\r\n    import java.awt.color.ColorSpace;\r\n    import java.awt.image.BandedSampleModel;\r\n    import java.awt.image.BufferedImage;\r\n    import java.awt.image.ColorModel;\r\n    import java.awt.image.ComponentColorModel;\r\n    import java.awt.image.DataBuffer;\r\n    import java.awt.image.Raster;\r\n    import java.awt.image.RenderedImage;\r\n    import java.awt.image.SampleModel;\r\n    import java.awt.image.WritableRaster;\r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.io.RandomAccessFile;\r\n    import java.nio.MappedByteBuffer;\r\n    import java.nio.channels.FileChannel;\r\n    import java.util.ArrayList;\r\n    import java.util.HashSet;\r\n    import java.util.Hashtable;\r\n    import java.util.Iterator;\r\n    import java.util.List;\r\n    import java.util.concurrent.Callable;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    import javax.imageio.ImageIO;\r\n    import javax.imageio.ImageReadParam;\r\n    import javax.imageio.ImageReader;\r\n    import javax.imageio.stream.ImageInputStream;\r\n    import sun.nio.ch.DirectBuffer;\r\n    \r\n    public class BigBufferedImage extends BufferedImage {\r\n    \r\n    \tprivate static final String TMP_DIR = System.getProperty(&quot;java.io.tmpdir&quot;);\r\n    \tpublic static final int MAX_PIXELS_IN_MEMORY =  1024 * 1024;\r\n    \r\n    \tpublic static BufferedImage create(int width, int height, int imageType) {\r\n    \t\tif (width * height &gt; MAX_PIXELS_IN_MEMORY) {\r\n    \t\t\ttry {\r\n    \t\t\t\tfinal File tempDir = new File(TMP_DIR);\r\n    \t\t\t\treturn createBigBufferedImage(tempDir, width, height, imageType);\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\tthrow new RuntimeException(e);\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\treturn new BufferedImage(width, height, imageType);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static BufferedImage create(File inputFile, int imageType) throws IOException {\r\n    \t\ttry (ImageInputStream stream = ImageIO.createImageInputStream(inputFile);) {\r\n    \t\t\tIterator&lt;ImageReader&gt; readers = ImageIO.getImageReaders(stream);\r\n    \t\t\tif (readers.hasNext()) {\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\tImageReader reader = readers.next();\r\n    \t\t\t\t\treader.setInput(stream, true, true);\r\n    \t\t\t\t\tint width = reader.getWidth(reader.getMinIndex());\r\n    \t\t\t\t\tint height = reader.getHeight(reader.getMinIndex());\r\n    \t\t\t\t\tBufferedImage image = create(width, height, imageType);\r\n    \t\t\t\t\tint cores = Math.max(1, Runtime.getRuntime().availableProcessors() / 2);\r\n    \t\t\t\t\tint block = Math.min(MAX_PIXELS_IN_MEMORY / cores / width, (int) (Math.ceil(height / (double) cores)));\r\n    \t\t\t\t\tExecutorService generalExecutor = Executors.newFixedThreadPool(cores);\r\n    \t\t\t\t\tList&lt;Callable&lt;ImagePartLoader&gt;&gt; partLoaders = new ArrayList&lt;&gt;();\r\n    \t\t\t\t\tfor (int y = 0; y &lt; height; y += block) {\r\n    \t\t\t\t\t\tpartLoaders.add(new ImagePartLoader(\r\n    \t\t\t\t\t\t\ty, width, Math.min(block, height - y), inputFile, image));\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tgeneralExecutor.invokeAll(partLoaders);\r\n    \t\t\t\t\tgeneralExecutor.shutdown();\r\n    \t\t\t\t\treturn image;\r\n    \t\t\t\t} catch (InterruptedException ex) {\r\n    \t\t\t\t\tLogger.getLogger(BigBufferedImage.class.getName()).log(Level.SEVERE, null, ex);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    \tprivate static BufferedImage createBigBufferedImage(File tempDir, int width, int height, int imageType)\r\n    \t\tthrows FileNotFoundException, IOException {\r\n    \t\tFileDataBuffer buffer = new FileDataBuffer(tempDir, width * height, 4);\r\n    \t\tColorModel colorModel = null;\r\n    \t\tBandedSampleModel sampleModel = null;\r\n    \t\tswitch (imageType) {\r\n    \t\t\tcase TYPE_INT_RGB:\r\n    \t\t\t\tcolorModel = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB),\r\n    \t\t\t\t\tnew int[]{8, 8, 8, 0},\r\n    \t\t\t\t\tfalse,\r\n    \t\t\t\t\tfalse,\r\n    \t\t\t\t\tComponentColorModel.TRANSLUCENT,\r\n    \t\t\t\t\tDataBuffer.TYPE_BYTE);\r\n    \t\t\t\tsampleModel = new BandedSampleModel(DataBuffer.TYPE_BYTE, width, height, 3);\r\n    \t\t\t\tbreak;\r\n    \t\t\tcase TYPE_INT_ARGB:\r\n    \t\t\t\tcolorModel = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB),\r\n    \t\t\t\t\tnew int[]{8, 8, 8, 8},\r\n    \t\t\t\t\ttrue,\r\n    \t\t\t\t\tfalse,\r\n    \t\t\t\t\tComponentColorModel.TRANSLUCENT,\r\n    \t\t\t\t\tDataBuffer.TYPE_BYTE);\r\n    \t\t\t\tsampleModel = new BandedSampleModel(DataBuffer.TYPE_BYTE, width, height, 4);\r\n    \t\t\t\tbreak;\r\n    \t\t\tdefault:\r\n    \t\t\t\tthrow new IllegalArgumentException(&quot;Unsupported image type: &quot; + imageType);\r\n    \t\t}\r\n    \t\tSimpleRaster raster = new SimpleRaster(sampleModel, buffer, new Point(0, 0));\r\n    \t\tBigBufferedImage image = new BigBufferedImage(colorModel, raster, colorModel.isAlphaPremultiplied(), null);\r\n    \t\treturn image;\r\n    \t}\r\n    \r\n    \tprivate static class ImagePartLoader implements Callable&lt;ImagePartLoader&gt; {\r\n    \r\n    \t\tprivate final int y;\r\n    \t\tprivate final BufferedImage image;\r\n    \t\tprivate final Rectangle region;\r\n    \t\tprivate final File file;\r\n    \r\n    \t\tpublic ImagePartLoader(int y, int width, int height, File file, BufferedImage image) {\r\n    \t\t\tthis.y = y;\r\n    \t\t\tthis.image = image;\r\n    \t\t\tthis.file = file;\r\n    \t\t\tregion = new Rectangle(0, y, width, height);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic ImagePartLoader call() throws Exception {\r\n    \t\t\tThread.currentThread().setPriority((Thread.MIN_PRIORITY + Thread.NORM_PRIORITY) / 2);\r\n    \t\t\ttry (ImageInputStream stream = ImageIO.createImageInputStream(file);) {\r\n    \t\t\t\tIterator&lt;ImageReader&gt; readers = ImageIO.getImageReaders(stream);\r\n    \t\t\t\tif (readers.hasNext()) {\r\n    \t\t\t\t\tImageReader reader = readers.next();\r\n    \t\t\t\t\treader.setInput(stream, true, true);\r\n    \t\t\t\t\tImageReadParam param = reader.getDefaultReadParam();\r\n    \t\t\t\t\tparam.setSourceRegion(region);\r\n    \t\t\t\t\tBufferedImage part = reader.read(0, param);\r\n    \t\t\t\t\tRaster source = part.getRaster();\r\n    \t\t\t\t\tWritableRaster target = image.getRaster();\r\n    \t\t\t\t\ttarget.setRect(0, y, source);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\treturn ImagePartLoader.this;\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate BigBufferedImage(ColorModel cm, SimpleRaster raster, boolean isRasterPremultiplied, Hashtable&lt;?, ?&gt; properties) {\r\n    \t\tsuper(cm, raster, isRasterPremultiplied, properties);\r\n    \t}\r\n    \r\n    \tpublic void dispose() {\r\n    \t\t((SimpleRaster) getRaster()).dispose();\r\n    \t}\r\n    \r\n    \tpublic static void dispose(RenderedImage image) {\r\n    \t\tif (image instanceof BigBufferedImage) {\r\n    \t\t\t((BigBufferedImage) image).dispose();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static class SimpleRaster extends WritableRaster {\r\n    \r\n    \t\tpublic SimpleRaster(SampleModel sampleModel, FileDataBuffer dataBuffer, Point origin) {\r\n    \t\t\tsuper(sampleModel, dataBuffer, origin);\r\n    \t\t}\r\n    \r\n    \t\tpublic void dispose() {\r\n    \t\t\t((FileDataBuffer) getDataBuffer()).dispose();\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    \tprivate static final class FileDataBufferDeleterHook extends Thread {\r\n    \r\n    \t\tstatic {\r\n    \t\t\tRuntime.getRuntime().addShutdownHook(new FileDataBufferDeleterHook());\r\n    \t\t}\r\n    \r\n    \t\tprivate static final HashSet&lt;FileDataBuffer&gt; undisposedBuffers = new HashSet&lt;&gt;();\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void run() {\r\n    \t\t\tfinal FileDataBuffer[] buffers = undisposedBuffers.toArray(new FileDataBuffer[0]);\r\n    \t\t\tfor (FileDataBuffer b : buffers) {\r\n    \t\t\t\tb.disposeNow();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate static class FileDataBuffer extends DataBuffer {\r\n    \r\n    \t\tprivate final String id = &quot;buffer-&quot; + System.currentTimeMillis() + &quot;-&quot; + ((int) (Math.random() * 1000));\r\n    \t\tprivate File dir;\r\n    \t\tprivate String path;\r\n    \t\tprivate File[] files;\r\n    \t\tprivate RandomAccessFile[] accessFiles;\r\n    \t\tprivate MappedByteBuffer[] buffer;\r\n    \r\n    \t\tpublic FileDataBuffer(File dir, int size) throws FileNotFoundException, IOException {\r\n    \t\t\tsuper(TYPE_BYTE, size);\r\n    \t\t\tthis.dir = dir;\r\n    \t\t\tinit();\r\n    \t\t}\r\n    \r\n    \t\tpublic FileDataBuffer(File dir, int size, int numBanks) throws FileNotFoundException, IOException {\r\n    \t\t\tsuper(TYPE_BYTE, size, numBanks);\r\n    \t\t\tthis.dir = dir;\r\n    \t\t\tinit();\r\n    \t\t}\r\n    \r\n    \t\tprivate void init() throws FileNotFoundException, IOException {\r\n    \t\t\tFileDataBufferDeleterHook.undisposedBuffers.add(this);\r\n    \t\t\tif (dir == null) {\r\n    \t\t\t\tdir = new File(&quot;.&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (!dir.exists()) {\r\n    \t\t\t\tthrow new RuntimeException(&quot;FileDataBuffer constructor parameter dir does not exist: &quot; + dir);\r\n    \t\t\t}\r\n    \t\t\tif (!dir.isDirectory()) {\r\n    \t\t\t\tthrow new RuntimeException(&quot;FileDataBuffer constructor parameter dir is not a directory: &quot; + dir);\r\n    \t\t\t}\r\n    \t\t\tpath = dir.getPath() + &quot;/&quot; + id;\r\n    \t\t\tFile subDir = new File(path);\r\n    \t\t\tsubDir.mkdir();\r\n    \t\t\tbuffer = new MappedByteBuffer[banks];\r\n    \t\t\taccessFiles = new RandomAccessFile[banks];\r\n    \t\t\tfiles = new File[banks];\r\n    \t\t\tfor (int i = 0; i &lt; banks; i++) {\r\n    \t\t\t\tFile file = files[i] = new File(path + &quot;/bank&quot; + i + &quot;.dat&quot;);\r\n    \t\t\t\tfinal RandomAccessFile randomAccessFile = accessFiles[i] = new RandomAccessFile(file, &quot;rw&quot;);\r\n    \t\t\t\tbuffer[i] = randomAccessFile.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, getSize());\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic int getElem(int bank, int i) {\r\n    \t\t\treturn buffer[bank].get(i) &amp; 0xff;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic void setElem(int bank, int i, int val) {\r\n    \t\t\tbuffer[bank].put(i, (byte) val);\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tprotected void finalize() throws Throwable {\r\n    \t\t\tdispose();\r\n    \t\t}\r\n    \r\n    \t\tprivate void disposeNow() {\r\n    \t\t\tfinal MappedByteBuffer[] disposedBuffer = this.buffer;\r\n    \t\t\tthis.buffer = null;\r\n    \t\t\tdisposeNow(disposedBuffer);\r\n    \t\t}\r\n    \r\n    \t\tpublic void dispose() {\r\n    \t\t\tfinal MappedByteBuffer[] disposedBuffer = this.buffer;\r\n    \t\t\tthis.buffer = null;\r\n    \t\t\tnew Thread() {\r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void run() {\r\n    \t\t\t\t\tdisposeNow(disposedBuffer);\r\n    \t\t\t\t}\r\n    \t\t\t}.start();\r\n    \t\t}\r\n    \r\n    \t\tprivate void disposeNow(final MappedByteBuffer[] disposedBuffer) {\r\n    \t\t\tFileDataBufferDeleterHook.undisposedBuffers.remove(this);\r\n    \t\t\tif (disposedBuffer != null) {\r\n    \t\t\t\tfor (MappedByteBuffer b : disposedBuffer) {\r\n    \t\t\t\t\t((DirectBuffer) b).cleaner().clean();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tif (accessFiles != null) {\r\n    \t\t\t\tfor (RandomAccessFile file : accessFiles) {\r\n    \t\t\t\t\ttry {\r\n    \t\t\t\t\t\tfile.close();\r\n    \t\t\t\t\t} catch (IOException e) {\r\n    \t\t\t\t\t\te.printStackTrace();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\taccessFiles = null;\r\n    \t\t\t}\r\n    \t\t\tif (files != null) {\r\n    \t\t\t\tfor (File file : files) {\r\n    \t\t\t\t\tfile.delete();\r\n    \t\t\t\t}\r\n    \t\t\t\tfiles = null;\r\n    \t\t\t}\r\n    \t\t\tif (path != null) {\r\n    \t\t\t\tnew File(path).delete();\r\n    \t\t\t\tpath = null;\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t}\r\n    }","title":"Why does a BufferedImage require so much memory beyond the size of its data array?","body":"<p>The problem is that the BufferedImage object stores the image in the memory in uncompresed format. There is an effective solution for this: you can store the image on the hard drive and you don't have to worry about the heap size or the physical memory limit. It can store maximum 2,147,483,647 pixels (or 46,340 x 46,340 pixels). <strong>BigBufferedImage</strong> solves this problem.</p>\n\n<p>Create az empty a BigBufferedImage:</p>\n\n<pre><code>BigBufferedImage image = BigBufferedImage.create(\n        tempDir, width, height, type);\n</code></pre>\n\n<p>Load an existent image to BigBufferedImage:</p>\n\n<pre><code>BigBufferedImage image = BigBufferedImage.create(\n        imagePath, tempDir, type);\n</code></pre>\n\n<p>Render the part of the image:</p>\n\n<pre><code>part = image.getSubimage(x, y, width, height);\n</code></pre>\n\n<p>The implementation of BigBufferedImage:</p>\n\n<pre><code>package com.pulispace.mc.ui.panorama.util;\n\n/*\n * This class is part of MCFS (Mission Control - Flight Software) a development \n * of Team Puli Space, official Google Lunar XPRIZE contestant. \n * This class is released under Creative Commons CC0.\n * @author Zsolt Pocze, Dimitry Polivaev\n * Please like us on facebook, and/or join our Small Step Club.\n * http://www.pulispace.com\n * https://www.facebook.com/pulispace\n * http://nyomdmegteis.hu/en/\n */\nimport java.awt.Point;\nimport java.awt.Rectangle;\nimport java.awt.color.ColorSpace;\nimport java.awt.image.BandedSampleModel;\nimport java.awt.image.BufferedImage;\nimport java.awt.image.ColorModel;\nimport java.awt.image.ComponentColorModel;\nimport java.awt.image.DataBuffer;\nimport java.awt.image.Raster;\nimport java.awt.image.RenderedImage;\nimport java.awt.image.SampleModel;\nimport java.awt.image.WritableRaster;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.RandomAccessFile;\nimport java.nio.MappedByteBuffer;\nimport java.nio.channels.FileChannel;\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.Hashtable;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.concurrent.Callable;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\nimport javax.imageio.ImageIO;\nimport javax.imageio.ImageReadParam;\nimport javax.imageio.ImageReader;\nimport javax.imageio.stream.ImageInputStream;\nimport sun.nio.ch.DirectBuffer;\n\npublic class BigBufferedImage extends BufferedImage {\n\n    private static final String TMP_DIR = System.getProperty(\"java.io.tmpdir\");\n    public static final int MAX_PIXELS_IN_MEMORY =  1024 * 1024;\n\n    public static BufferedImage create(int width, int height, int imageType) {\n        if (width * height &gt; MAX_PIXELS_IN_MEMORY) {\n            try {\n                final File tempDir = new File(TMP_DIR);\n                return createBigBufferedImage(tempDir, width, height, imageType);\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        } else {\n            return new BufferedImage(width, height, imageType);\n        }\n    }\n\n    public static BufferedImage create(File inputFile, int imageType) throws IOException {\n        try (ImageInputStream stream = ImageIO.createImageInputStream(inputFile);) {\n            Iterator&lt;ImageReader&gt; readers = ImageIO.getImageReaders(stream);\n            if (readers.hasNext()) {\n                try {\n                    ImageReader reader = readers.next();\n                    reader.setInput(stream, true, true);\n                    int width = reader.getWidth(reader.getMinIndex());\n                    int height = reader.getHeight(reader.getMinIndex());\n                    BufferedImage image = create(width, height, imageType);\n                    int cores = Math.max(1, Runtime.getRuntime().availableProcessors() / 2);\n                    int block = Math.min(MAX_PIXELS_IN_MEMORY / cores / width, (int) (Math.ceil(height / (double) cores)));\n                    ExecutorService generalExecutor = Executors.newFixedThreadPool(cores);\n                    List&lt;Callable&lt;ImagePartLoader&gt;&gt; partLoaders = new ArrayList&lt;&gt;();\n                    for (int y = 0; y &lt; height; y += block) {\n                        partLoaders.add(new ImagePartLoader(\n                            y, width, Math.min(block, height - y), inputFile, image));\n                    }\n                    generalExecutor.invokeAll(partLoaders);\n                    generalExecutor.shutdown();\n                    return image;\n                } catch (InterruptedException ex) {\n                    Logger.getLogger(BigBufferedImage.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        }\n        return null;\n    }\n\n    private static BufferedImage createBigBufferedImage(File tempDir, int width, int height, int imageType)\n        throws FileNotFoundException, IOException {\n        FileDataBuffer buffer = new FileDataBuffer(tempDir, width * height, 4);\n        ColorModel colorModel = null;\n        BandedSampleModel sampleModel = null;\n        switch (imageType) {\n            case TYPE_INT_RGB:\n                colorModel = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB),\n                    new int[]{8, 8, 8, 0},\n                    false,\n                    false,\n                    ComponentColorModel.TRANSLUCENT,\n                    DataBuffer.TYPE_BYTE);\n                sampleModel = new BandedSampleModel(DataBuffer.TYPE_BYTE, width, height, 3);\n                break;\n            case TYPE_INT_ARGB:\n                colorModel = new ComponentColorModel(ColorSpace.getInstance(ColorSpace.CS_sRGB),\n                    new int[]{8, 8, 8, 8},\n                    true,\n                    false,\n                    ComponentColorModel.TRANSLUCENT,\n                    DataBuffer.TYPE_BYTE);\n                sampleModel = new BandedSampleModel(DataBuffer.TYPE_BYTE, width, height, 4);\n                break;\n            default:\n                throw new IllegalArgumentException(\"Unsupported image type: \" + imageType);\n        }\n        SimpleRaster raster = new SimpleRaster(sampleModel, buffer, new Point(0, 0));\n        BigBufferedImage image = new BigBufferedImage(colorModel, raster, colorModel.isAlphaPremultiplied(), null);\n        return image;\n    }\n\n    private static class ImagePartLoader implements Callable&lt;ImagePartLoader&gt; {\n\n        private final int y;\n        private final BufferedImage image;\n        private final Rectangle region;\n        private final File file;\n\n        public ImagePartLoader(int y, int width, int height, File file, BufferedImage image) {\n            this.y = y;\n            this.image = image;\n            this.file = file;\n            region = new Rectangle(0, y, width, height);\n        }\n\n        @Override\n        public ImagePartLoader call() throws Exception {\n            Thread.currentThread().setPriority((Thread.MIN_PRIORITY + Thread.NORM_PRIORITY) / 2);\n            try (ImageInputStream stream = ImageIO.createImageInputStream(file);) {\n                Iterator&lt;ImageReader&gt; readers = ImageIO.getImageReaders(stream);\n                if (readers.hasNext()) {\n                    ImageReader reader = readers.next();\n                    reader.setInput(stream, true, true);\n                    ImageReadParam param = reader.getDefaultReadParam();\n                    param.setSourceRegion(region);\n                    BufferedImage part = reader.read(0, param);\n                    Raster source = part.getRaster();\n                    WritableRaster target = image.getRaster();\n                    target.setRect(0, y, source);\n                }\n            }\n            return ImagePartLoader.this;\n        }\n    }\n\n    private BigBufferedImage(ColorModel cm, SimpleRaster raster, boolean isRasterPremultiplied, Hashtable&lt;?, ?&gt; properties) {\n        super(cm, raster, isRasterPremultiplied, properties);\n    }\n\n    public void dispose() {\n        ((SimpleRaster) getRaster()).dispose();\n    }\n\n    public static void dispose(RenderedImage image) {\n        if (image instanceof BigBufferedImage) {\n            ((BigBufferedImage) image).dispose();\n        }\n    }\n\n    private static class SimpleRaster extends WritableRaster {\n\n        public SimpleRaster(SampleModel sampleModel, FileDataBuffer dataBuffer, Point origin) {\n            super(sampleModel, dataBuffer, origin);\n        }\n\n        public void dispose() {\n            ((FileDataBuffer) getDataBuffer()).dispose();\n        }\n\n    }\n\n    private static final class FileDataBufferDeleterHook extends Thread {\n\n        static {\n            Runtime.getRuntime().addShutdownHook(new FileDataBufferDeleterHook());\n        }\n\n        private static final HashSet&lt;FileDataBuffer&gt; undisposedBuffers = new HashSet&lt;&gt;();\n\n        @Override\n        public void run() {\n            final FileDataBuffer[] buffers = undisposedBuffers.toArray(new FileDataBuffer[0]);\n            for (FileDataBuffer b : buffers) {\n                b.disposeNow();\n            }\n        }\n    }\n\n    private static class FileDataBuffer extends DataBuffer {\n\n        private final String id = \"buffer-\" + System.currentTimeMillis() + \"-\" + ((int) (Math.random() * 1000));\n        private File dir;\n        private String path;\n        private File[] files;\n        private RandomAccessFile[] accessFiles;\n        private MappedByteBuffer[] buffer;\n\n        public FileDataBuffer(File dir, int size) throws FileNotFoundException, IOException {\n            super(TYPE_BYTE, size);\n            this.dir = dir;\n            init();\n        }\n\n        public FileDataBuffer(File dir, int size, int numBanks) throws FileNotFoundException, IOException {\n            super(TYPE_BYTE, size, numBanks);\n            this.dir = dir;\n            init();\n        }\n\n        private void init() throws FileNotFoundException, IOException {\n            FileDataBufferDeleterHook.undisposedBuffers.add(this);\n            if (dir == null) {\n                dir = new File(\".\");\n            }\n            if (!dir.exists()) {\n                throw new RuntimeException(\"FileDataBuffer constructor parameter dir does not exist: \" + dir);\n            }\n            if (!dir.isDirectory()) {\n                throw new RuntimeException(\"FileDataBuffer constructor parameter dir is not a directory: \" + dir);\n            }\n            path = dir.getPath() + \"/\" + id;\n            File subDir = new File(path);\n            subDir.mkdir();\n            buffer = new MappedByteBuffer[banks];\n            accessFiles = new RandomAccessFile[banks];\n            files = new File[banks];\n            for (int i = 0; i &lt; banks; i++) {\n                File file = files[i] = new File(path + \"/bank\" + i + \".dat\");\n                final RandomAccessFile randomAccessFile = accessFiles[i] = new RandomAccessFile(file, \"rw\");\n                buffer[i] = randomAccessFile.getChannel().map(FileChannel.MapMode.READ_WRITE, 0, getSize());\n            }\n        }\n\n        @Override\n        public int getElem(int bank, int i) {\n            return buffer[bank].get(i) &amp; 0xff;\n        }\n\n        @Override\n        public void setElem(int bank, int i, int val) {\n            buffer[bank].put(i, (byte) val);\n        }\n\n        @Override\n        protected void finalize() throws Throwable {\n            dispose();\n        }\n\n        private void disposeNow() {\n            final MappedByteBuffer[] disposedBuffer = this.buffer;\n            this.buffer = null;\n            disposeNow(disposedBuffer);\n        }\n\n        public void dispose() {\n            final MappedByteBuffer[] disposedBuffer = this.buffer;\n            this.buffer = null;\n            new Thread() {\n                @Override\n                public void run() {\n                    disposeNow(disposedBuffer);\n                }\n            }.start();\n        }\n\n        private void disposeNow(final MappedByteBuffer[] disposedBuffer) {\n            FileDataBufferDeleterHook.undisposedBuffers.remove(this);\n            if (disposedBuffer != null) {\n                for (MappedByteBuffer b : disposedBuffer) {\n                    ((DirectBuffer) b).cleaner().clean();\n                }\n            }\n            if (accessFiles != null) {\n                for (RandomAccessFile file : accessFiles) {\n                    try {\n                        file.close();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n                accessFiles = null;\n            }\n            if (files != null) {\n                for (File file : files) {\n                    file.delete();\n                }\n                files = null;\n            }\n            if (path != null) {\n                new File(path).delete();\n                path = null;\n            }\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":60641,"reputation":25396,"user_id":181106,"accept_rate":81,"display_name":"uckelman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3383,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":4269777,"answer_count":3,"score":5,"last_activity_date":1639067830,"creation_date":1286186780,"question_id":3854200,"body_markdown":"I&#39;m trying to determine how much heap any given TYPE_INT_ARGB &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html&quot;&gt;`BufferedImage`&lt;/a&gt; will use so that, for a program which is doing some image processing, I can set a reasonable max heap based on the size of image we feed it.\r\n\r\nI wrote the following program as a test, which I then used to determine the least maximum heap under which it would run without an `OutOfMemoryError`:\r\n\r\n    import java.awt.image.BufferedImage;\r\n\r\n    public class Test {\r\n      public static void main(String[] args) {\r\n        final int w = Integer.parseInt(args[0]);\r\n        final int h = Integer.parseInt(args[1]);\r\n\r\n        final BufferedImage img =\r\n          new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\r\n\r\n        System.out.println((4*w*h) &gt;&gt; 20);\r\n      }\r\n    }\r\n\r\n(The printed value is the expected size of the `int[]` in which the `BufferedImage`&#39;s pixel data is stored.) What I expected to find was that the required max heap is something like `x + c`, where `x` is the size of the data array and `c` is a constant consisting of the sizes of the classes which are loaded, the `BufferedImage` object, etc. This is what I found instead (all values are in MB):\r\n\r\n&lt;pre&gt;\r\n4*w*h   min max heap\r\n-----   ------------\r\n  5          -\r\n 10         15\r\n 20         31\r\n 40         61\r\n 80        121\r\n160        241\r\n&lt;/pre&gt;\r\n\r\n`1.5x` is a good fit for the observations. (Note that I found no minimum for the 5MB image.) I don&#39;t understand what I&#39;m seeing. What are these extra bytes?\r\n","title":"Why does a BufferedImage require so much memory beyond the size of its data array?","body":"<p>I'm trying to determine how much heap any given TYPE_INT_ARGB <a href=\"http://download.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html\" rel=\"noreferrer\"><code>BufferedImage</code></a> will use so that, for a program which is doing some image processing, I can set a reasonable max heap based on the size of image we feed it.</p>\n\n<p>I wrote the following program as a test, which I then used to determine the least maximum heap under which it would run without an <code>OutOfMemoryError</code>:</p>\n\n<pre><code>import java.awt.image.BufferedImage;\n\npublic class Test {\n  public static void main(String[] args) {\n    final int w = Integer.parseInt(args[0]);\n    final int h = Integer.parseInt(args[1]);\n\n    final BufferedImage img =\n      new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);\n\n    System.out.println((4*w*h) &gt;&gt; 20);\n  }\n}\n</code></pre>\n\n<p>(The printed value is the expected size of the <code>int[]</code> in which the <code>BufferedImage</code>'s pixel data is stored.) What I expected to find was that the required max heap is something like <code>x + c</code>, where <code>x</code> is the size of the data array and <code>c</code> is a constant consisting of the sizes of the classes which are loaded, the <code>BufferedImage</code> object, etc. This is what I found instead (all values are in MB):</p>\n\n<pre>\n4*w*h   min max heap\n-----   ------------\n  5          -\n 10         15\n 20         31\n 40         61\n 80        121\n160        241\n</pre>\n\n<p><code>1.5x</code> is a good fit for the observations. (Note that I found no minimum for the 5MB image.) I don't understand what I'm seeing. What are these extra bytes?</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":178678,"reputation":7051,"user_id":410823,"accept_rate":78,"display_name":"Skarab"},"score":1,"creation_date":1286200757,"post_id":3855895,"comment_id":4099235,"body_markdown":"The abstraction level of your quesion kills ;). Use a Java profiler (e.g., virtualvm) to find out what crashes your program. If you find a problem, please rewrite your question.","body":"The abstraction level of your quesion kills ;). Use a Java profiler (e.g., virtualvm) to find out what crashes your program. If you find a problem, please rewrite your question."},{"owner":{"account_id":72732,"reputation":9868,"user_id":209856,"accept_rate":80,"display_name":"karoberts"},"score":0,"creation_date":1286201085,"post_id":3855895,"comment_id":4099297,"body_markdown":"Just out of curiosity, can you show the exact command line options you are using?","body":"Just out of curiosity, can you show the exact command line options you are using?"},{"owner":{"account_id":169069,"reputation":1607,"user_id":394948,"display_name":"sjt"},"score":0,"creation_date":1286202326,"post_id":3855895,"comment_id":4099539,"body_markdown":"What would you achieve by knowing examples of code that leads to PermGen overflow? Are you trying to admire a problem and then create problems out of the admiration or are you trying to fix it? I have seen this problem solving method fail many times, it&#39;s better to search for the root cause and fix it. Like Skarab suggested use a Java profiler. Understood if you are a research guy or a student, but does not seem like it.","body":"What would you achieve by knowing examples of code that leads to PermGen overflow? Are you trying to admire a problem and then create problems out of the admiration or are you trying to fix it? I have seen this problem solving method fail many times, it&#39;s better to search for the root cause and fix it. Like Skarab suggested use a Java profiler. Understood if you are a research guy or a student, but does not seem like it."},{"owner":{"account_id":169069,"reputation":1607,"user_id":394948,"display_name":"sjt"},"score":0,"creation_date":1286204169,"post_id":3855895,"comment_id":4099812,"body_markdown":"@Nulldevice I see you noticed jms messaging. I had a similar issue related to JMS, check if your jms connections are closed. Check my answer below, it has more details.","body":"@Nulldevice I see you noticed jms messaging. I had a similar issue related to JMS, check if your jms connections are closed. Check my answer below, it has more details."},{"owner":{"account_id":178678,"reputation":7051,"user_id":410823,"accept_rate":78,"display_name":"Skarab"},"score":0,"creation_date":1286206150,"post_id":3855895,"comment_id":4100139,"body_markdown":"To give more constructive feedback - try http://www.eclipse.org/proposals/memory-analyzer/. It is a java dump memory analyzer. It is pretty useful after an unexpected error.","body":"To give more constructive feedback - try <a href=\"http://www.eclipse.org/proposals/memory-analyzer/\" rel=\"nofollow noreferrer\">eclipse.org/proposals/memory-analyzer</a>. It is a java dump memory analyzer. It is pretty useful after an unexpected error."},{"owner":{"account_id":22194,"reputation":18092,"user_id":54506,"accept_rate":78,"display_name":"Jayan"},"score":0,"creation_date":1286209131,"post_id":3855895,"comment_id":4100642,"body_markdown":"The number of classes looks small. Another way to have this exception is to use String.intern().  Could you post the code?","body":"The number of classes looks small. Another way to have this exception is to use String.intern().  Could you post the code?"}],"answers":[{"tags":[],"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1286201187,"creation_date":1286201187,"answer_id":3856000,"question_id":3855895,"body_markdown":"It&#39;s not so much the algorithm as the implementation.  Here&#39;s a really dumb way to generate random Strings that fills up PermGen space:\r\n\r\n        Random rnd = new Random();\r\n        List&lt;String&gt; interned = new ArrayList&lt;String&gt;();\r\n        for (;;) {\r\n            int length = rnd.nextInt(100);\r\n            StringBuilder builder = new StringBuilder();\r\n            String chars = &quot;abcdefghijklmnopqrstuvwxyz&quot;;\r\n            for ( int i = 0; i &lt; length; i++ ) {\r\n                builder.append(chars.charAt(rnd.nextInt(chars.length())));\r\n            }\r\n            interned.add(builder.toString().intern());\r\n        }\r\n\r\nIn short: interning Strings is one thing that can eat up PermGen memory.","title":"Algorithms that lead to java.lang.OutOfMemoryError: PermGen space error","body":"<p>It's not so much the algorithm as the implementation.  Here's a really dumb way to generate random Strings that fills up PermGen space:</p>\n\n<pre><code>    Random rnd = new Random();\n    List&lt;String&gt; interned = new ArrayList&lt;String&gt;();\n    for (;;) {\n        int length = rnd.nextInt(100);\n        StringBuilder builder = new StringBuilder();\n        String chars = \"abcdefghijklmnopqrstuvwxyz\";\n        for ( int i = 0; i &lt; length; i++ ) {\n            builder.append(chars.charAt(rnd.nextInt(chars.length())));\n        }\n        interned.add(builder.toString().intern());\n    }\n</code></pre>\n\n<p>In short: interning Strings is one thing that can eat up PermGen memory.</p>\n"},{"tags":[],"owner":{"account_id":48334,"reputation":19092,"user_id":143585,"accept_rate":67,"display_name":"Denis Tulskiy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1286201344,"creation_date":1286201344,"answer_id":3856028,"question_id":3855895,"body_markdown":"Are you using a different garbage collector?\r\n\r\n&gt;The throughput collector will throw an out-of-memory exception if too much time is being spent doing garbage collection. For example, if the JVM is spending more than 98% of the total time doing garbage collection and is recovering less than 2% of the heap, it will throw an out-of-memory expection. The implementation of this feature has changed in 1.5. The policy is the same but there may be slight differences in behavior due to the new implementation.  In the J2SE Platform version 1.5 the throughput collector will be chosen as the garbage collector on server class machines. http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html\r\n\r\nCheck some instructions on [this][1] page.\r\n\r\n\r\n  [1]: http://www.brokenbuild.com/blog/2006/08/04/java-jvm-gc-permgen-and-memory-options/","title":"Algorithms that lead to java.lang.OutOfMemoryError: PermGen space error","body":"<p>Are you using a different garbage collector?</p>\n\n<blockquote>\n  <p>The throughput collector will throw an out-of-memory exception if too much time is being spent doing garbage collection. For example, if the JVM is spending more than 98% of the total time doing garbage collection and is recovering less than 2% of the heap, it will throw an out-of-memory expection. The implementation of this feature has changed in 1.5. The policy is the same but there may be slight differences in behavior due to the new implementation.  In the J2SE Platform version 1.5 the throughput collector will be chosen as the garbage collector on server class machines. <a href=\"http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html\" rel=\"nofollow\">http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html</a></p>\n</blockquote>\n\n<p>Check some instructions on <a href=\"http://www.brokenbuild.com/blog/2006/08/04/java-jvm-gc-permgen-and-memory-options/\" rel=\"nofollow\">this</a> page.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286201574,"creation_date":1286201574,"answer_id":3856054,"question_id":3855895,"body_markdown":"If you use [java.lang.reflect.Proxy][1] very intensively, that could eat up your PermGen space as well.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html","title":"Algorithms that lead to java.lang.OutOfMemoryError: PermGen space error","body":"<p>If you use <a href=\"http://download.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html\" rel=\"nofollow\">java.lang.reflect.Proxy</a> very intensively, that could eat up your PermGen space as well.</p>\n"},{"tags":[],"owner":{"account_id":169069,"reputation":1607,"user_id":394948,"display_name":"sjt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1286204287,"creation_date":1286201943,"answer_id":3856109,"question_id":3855895,"body_markdown":"&gt;Does someone know examples of algorithms that lead to PermGen overflow ?\r\n\r\nYes but what is the point of this? if you want to fix this install a memory profiler tool like jprobe or lambda probe and check where the memory leak is happening, and fix that.\r\nNow for the example: There are thousands of ways to exceed perm gen space. I had noticed on a project when we inherited an application where they were using JMS. The jms connections were left open, the application crashed within a few minutes after it got a lot of requests with a similar error like you are getting. Point to note: when we moved to weblogic from jboss (moved to beajrockit) amazingly it fixed itself or atleast took the blow of technical debt. My advice would be irrespective of this, bad code with memory leaks should be fixed first, then tinker with app servers and heap space allocation paramters.\r\n\r\nHere is a useful link with some information on the exception you are getting.\r\nhttp://www.jroller.com/agileanswers/entry/preventing_java_s_java_lang\r\n\r\n**EDIT**\r\n\r\nThis link may be helpfull\r\nhttp://www.precisejava.com/javaperf/j2ee/JMS.htm","title":"Algorithms that lead to java.lang.OutOfMemoryError: PermGen space error","body":"<blockquote>\n  <p>Does someone know examples of algorithms that lead to PermGen overflow ?</p>\n</blockquote>\n\n<p>Yes but what is the point of this? if you want to fix this install a memory profiler tool like jprobe or lambda probe and check where the memory leak is happening, and fix that.\nNow for the example: There are thousands of ways to exceed perm gen space. I had noticed on a project when we inherited an application where they were using JMS. The jms connections were left open, the application crashed within a few minutes after it got a lot of requests with a similar error like you are getting. Point to note: when we moved to weblogic from jboss (moved to beajrockit) amazingly it fixed itself or atleast took the blow of technical debt. My advice would be irrespective of this, bad code with memory leaks should be fixed first, then tinker with app servers and heap space allocation paramters.</p>\n\n<p>Here is a useful link with some information on the exception you are getting.\n<a href=\"http://www.jroller.com/agileanswers/entry/preventing_java_s_java_lang\" rel=\"nofollow\">http://www.jroller.com/agileanswers/entry/preventing_java_s_java_lang</a></p>\n\n<p><strong>EDIT</strong></p>\n\n<p>This link may be helpfull\n<a href=\"http://www.precisejava.com/javaperf/j2ee/JMS.htm\" rel=\"nofollow\">http://www.precisejava.com/javaperf/j2ee/JMS.htm</a></p>\n"},{"tags":[],"owner":{"account_id":178678,"reputation":7051,"user_id":410823,"accept_rate":78,"display_name":"Skarab"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286207293,"creation_date":1286206204,"answer_id":3856690,"question_id":3855895,"body_markdown":"Check out memory analyzer - http://www.eclipse.org/mat/. It is a java dump memory analyzer. It is pretty useful after an unexpected error.","title":"Algorithms that lead to java.lang.OutOfMemoryError: PermGen space error","body":"<p>Check out memory analyzer - <a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow\">http://www.eclipse.org/mat/</a>. It is a java dump memory analyzer. It is pretty useful after an unexpected error.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1286206682,"creation_date":1286206682,"answer_id":3856749,"question_id":3855895,"body_markdown":"There are two things that are likely to lead to PermGen space issues:\r\n\r\n1. The `String.intern(String)` method creates Strings in the PermGen heap.  If you do a lot of interning and directly (or indirectly) retain references to the interned Strings, you can fill PermGen.\r\n\r\n2. The classloaders creates JVM internal class descriptors and code segments in the PermGen heap.  If your application does a lot of dynamic class loading, and the class objects don&#39;t get garbage collected, you can fill PermGen.  \r\n\r\nHot redeployment of Java webapps relies on dynamic loading and is a common source PermGen problems.  The root cause is typically a memory leak that involves a hidden reference from some object to an old classloader.  (Tomcat often gets &quot;stick&quot; for this, but the real problem is typically in the webapp that is being redeployed.)\r\n\r\nAFAIK, the Proxy case mentioned by @Michael Borgwardt is also a result of the Proxy implementation generating class files and loading them on the fly.\r\n\r\n\r\n","title":"Algorithms that lead to java.lang.OutOfMemoryError: PermGen space error","body":"<p>There are two things that are likely to lead to PermGen space issues:</p>\n\n<ol>\n<li><p>The <code>String.intern(String)</code> method creates Strings in the PermGen heap.  If you do a lot of interning and directly (or indirectly) retain references to the interned Strings, you can fill PermGen.</p></li>\n<li><p>The classloaders creates JVM internal class descriptors and code segments in the PermGen heap.  If your application does a lot of dynamic class loading, and the class objects don't get garbage collected, you can fill PermGen.  </p></li>\n</ol>\n\n<p>Hot redeployment of Java webapps relies on dynamic loading and is a common source PermGen problems.  The root cause is typically a memory leak that involves a hidden reference from some object to an old classloader.  (Tomcat often gets \"stick\" for this, but the real problem is typically in the webapp that is being redeployed.)</p>\n\n<p>AFAIK, the Proxy case mentioned by @Michael Borgwardt is also a result of the Proxy implementation generating class files and loading them on the fly.</p>\n"}],"owner":{"account_id":87389,"reputation":3946,"user_id":242345,"accept_rate":92,"display_name":"Nulldevice"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2536,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":3856109,"answer_count":6,"score":2,"last_activity_date":1639067807,"creation_date":1286200545,"question_id":3855895,"body_markdown":"I am getting PermGen space error on Sun JVM (1.6.0_21-b06) (Ok, it&#39;s Oracle :)). Increasing of option -XX:MaxPermGen value does not help. I know that PermGen is a space intended for permanent objects like class metadata. Count of classes in project is not so big ~ 10 000. Before crash jvisualvm shows 57MB as Used PermGen.\r\n \r\nI guess that some algorithm occupies all accessible memory. Does someone know examples of algorithms that lead to PermGen overflow ?\r\n\r\n**UPD.** I ask such abstract question, because in the moment I can not use any profiler - code crashes so hard that jvisualvm and eclipse stop to respond. I need than kill java processes from terminal with kill -KILL {process_numer}. I work with bad organized (but commercial) code that has many threads and JMS messaging. Debugging is a mess - I need some idea first where to look.","title":"Algorithms that lead to java.lang.OutOfMemoryError: PermGen space error","body":"<p>I am getting PermGen space error on Sun JVM (1.6.0_21-b06) (Ok, it's Oracle :)). Increasing of option -XX:MaxPermGen value does not help. I know that PermGen is a space intended for permanent objects like class metadata. Count of classes in project is not so big ~ 10 000. Before crash jvisualvm shows 57MB as Used PermGen.</p>\n\n<p>I guess that some algorithm occupies all accessible memory. Does someone know examples of algorithms that lead to PermGen overflow ?</p>\n\n<p><strong>UPD.</strong> I ask such abstract question, because in the moment I can not use any profiler - code crashes so hard that jvisualvm and eclipse stop to respond. I need than kill java processes from terminal with kill -KILL {process_numer}. I work with bad organized (but commercial) code that has many threads and JMS messaging. Debugging is a mess - I need some idea first where to look.</p>\n"},{"tags":["java","java-native-interface","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":165652,"reputation":4817,"user_id":389287,"accept_rate":63,"display_name":"anirvan"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1286435615,"creation_date":1286435615,"answer_id":3879430,"question_id":3879398,"body_markdown":" 1. in all likelihood yes - though i&#39;m not entirely sure whether there doesn&#39;t exist a way to clear that memory.\r\n 2. take a look at [ProcessBuilder][1] - it might be of some help to exclude JNI to achieve IPC.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html","title":"Java memory Management for JNI","body":"<ol>\n<li>in all likelihood yes - though i'm not entirely sure whether there doesn't exist a way to clear that memory.</li>\n<li>take a look at <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html\" rel=\"nofollow\">ProcessBuilder</a> - it might be of some help to exclude JNI to achieve IPC.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":55665,"reputation":357059,"user_id":166749,"accept_rate":94,"display_name":"Fred Foo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1286436530,"creation_date":1286436035,"answer_id":3879473,"question_id":3879398,"body_markdown":"1. No: &quot;the JNI framework does not provide any automatic garbage collection for non-JVM memory resources allocated by code executing on the native side&quot; ([Wikipedia][1]).\r\n2. No, Java has [sockets][2] and indeed ProcessBuilder. Shared memory can be achieved with [MappedByteBuffer][3].\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_Native_Interface#Pitfalls\r\n  [2]: http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzaha%2Finterpro.htm\r\n  [3]: http://download.oracle.com/javase/6/docs/api/java/nio/MappedByteBuffer.html","title":"Java memory Management for JNI","body":"<ol>\n<li>No: \"the JNI framework does not provide any automatic garbage collection for non-JVM memory resources allocated by code executing on the native side\" (<a href=\"http://en.wikipedia.org/wiki/Java_Native_Interface#Pitfalls\" rel=\"nofollow\">Wikipedia</a>).</li>\n<li>No, Java has <a href=\"http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzaha%2Finterpro.htm\" rel=\"nofollow\">sockets</a> and indeed ProcessBuilder. Shared memory can be achieved with <a href=\"http://download.oracle.com/javase/6/docs/api/java/nio/MappedByteBuffer.html\" rel=\"nofollow\">MappedByteBuffer</a>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":32701,"reputation":7764,"user_id":90909,"accept_rate":89,"display_name":"qrtt1"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1286436343,"creation_date":1286436343,"answer_id":3879515,"question_id":3879398,"body_markdown":" 1. You need deallocate any os resource created in native code, such as File Descriptor, memory address (allocate by malloc. etc) because they are not binding with any jvm instance.\r\n 2. You can consider use [Memory-Mapped Files][1] ([sample][2]).\r\n\r\n  [1]: http://onjava.com/pub/a/onjava/2002/10/02/javanio.html?page=3\r\n  [2]: http://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=273920&amp;sty=3&amp;age=0&amp;tpg=1&amp;ppg=1#273920\r\n\r\n 3. You can use RPCs (between computer and computer) in IPC context, such as socket, web service, JMS, etc.","title":"Java memory Management for JNI","body":"<ol>\n<li>You need deallocate any os resource created in native code, such as File Descriptor, memory address (allocate by malloc. etc) because they are not binding with any jvm instance.</li>\n<li><p>You can consider use <a href=\"http://onjava.com/pub/a/onjava/2002/10/02/javanio.html?page=3\" rel=\"nofollow\">Memory-Mapped Files</a> (<a href=\"http://www.javaworld.com.tw/jute/post/view?bid=29&amp;id=273920&amp;sty=3&amp;age=0&amp;tpg=1&amp;ppg=1#273920\" rel=\"nofollow\">sample</a>).</p></li>\n<li><p>You can use RPCs (between computer and computer) in IPC context, such as socket, web service, JMS, etc.</p></li>\n</ol>\n"}],"owner":{"account_id":35904,"reputation":23169,"user_id":102040,"accept_rate":66,"display_name":"Geek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6620,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":3879473,"answer_count":3,"score":7,"last_activity_date":1639067792,"creation_date":1286435251,"question_id":3879398,"body_markdown":"I have two questions :\r\n\r\n1. What if I have a JNI call to a method and the JNI method leaks memory. Once this method completes will the JVM Garbage collector be able to get that memory back. I heard that the JVM does not manage the Heap Space used by JNI ? But the memory used by JNI is a part of the memory used by the Java process ?\r\n\r\n2. Is it absolutely necessary to use JNI to achieve IPC ? What are the other popular Java techniques or is there a Open Source Library to achieve Shared memory in Java ?","title":"Java memory Management for JNI","body":"<p>I have two questions :</p>\n\n<ol>\n<li><p>What if I have a JNI call to a method and the JNI method leaks memory. Once this method completes will the JVM Garbage collector be able to get that memory back. I heard that the JVM does not manage the Heap Space used by JNI ? But the memory used by JNI is a part of the memory used by the Java process ?</p></li>\n<li><p>Is it absolutely necessary to use JNI to achieve IPC ? What are the other popular Java techniques or is there a Open Source Library to achieve Shared memory in Java ?</p></li>\n</ol>\n"},{"tags":["java","excel","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":35251,"reputation":2149,"user_id":99795,"display_name":"Richard Kettelerij"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1286912261,"creation_date":1286912261,"answer_id":3918345,"question_id":3918143,"body_markdown":"Call the ``write()`` method on your ``HSSFWorkbook`` to persist your Excel workbook to a file:\r\n\r\n    FileOutputStream fileOut = new FileOutputStream(&quot;workbook.xls&quot;);\r\n    wb.write(fileOut);\r\n    fileOut.close();\r\n\r\nBut as [this thread][1] indicates there&#39;s no way to do streaming writes to file in POI. Alternatives to POI are [jXLS][2] (open source) or [Aspose.Cells for Java][3] (proprietary)\r\n\r\n\r\n  [1]: http://apache-poi.1045710.n5.nabble.com/How-can-I-solve-the-outof-memory-error-on-excell-file-which-is-created-hssfworkbook-td2295595.html\r\n  [2]: http://jxls.sourceforge.net/\r\n  [3]: http://www.aspose.com/categories/java-components/aspose.cells-for-java/default.aspx","title":"POI heap space exception or any alternative java api for Excel 2007?","body":"<p>Call the <code>write()</code> method on your <code>HSSFWorkbook</code> to persist your Excel workbook to a file:</p>\n\n<pre><code>FileOutputStream fileOut = new FileOutputStream(\"workbook.xls\");\nwb.write(fileOut);\nfileOut.close();\n</code></pre>\n\n<p>But as <a href=\"http://apache-poi.1045710.n5.nabble.com/How-can-I-solve-the-outof-memory-error-on-excell-file-which-is-created-hssfworkbook-td2295595.html\" rel=\"nofollow\">this thread</a> indicates there's no way to do streaming writes to file in POI. Alternatives to POI are <a href=\"http://jxls.sourceforge.net/\" rel=\"nofollow\">jXLS</a> (open source) or <a href=\"http://www.aspose.com/categories/java-components/aspose.cells-for-java/default.aspx\" rel=\"nofollow\">Aspose.Cells for Java</a> (proprietary)</p>\n"}],"owner":{"account_id":175601,"reputation":1524,"user_id":405739,"accept_rate":71,"display_name":"ErVeY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1016,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639067777,"creation_date":1286910545,"question_id":3918143,"body_markdown":"i&#39;ve been searching around for a solution for this problem and haven&#39;t found anything good =(\r\n\r\nso the problem is i need to create an excel file up to 50.000 registers and when i do this show me this error at 50.000 app register:\r\n\r\njava heap space\r\n\r\nas far as i&#39;m looking on, one way to solve this is increasing the heap memory, but quite don&#39;t like me (first aids) because the problem persist if the file gets to bigger and the server freezes and comsume a lot of memory trying to do this and gets slow\r\n\r\ni think a solution would be writte out the excel file instead of leaving the data in the heap memory, but i don&#39;t get it work\r\n\r\nany ideas ?? or another framework for excel 2007 files ???????","title":"POI heap space exception or any alternative java api for Excel 2007?","body":"<p>i've been searching around for a solution for this problem and haven't found anything good =(</p>\n\n<p>so the problem is i need to create an excel file up to 50.000 registers and when i do this show me this error at 50.000 app register:</p>\n\n<p>java heap space</p>\n\n<p>as far as i'm looking on, one way to solve this is increasing the heap memory, but quite don't like me (first aids) because the problem persist if the file gets to bigger and the server freezes and comsume a lot of memory trying to do this and gets slow</p>\n\n<p>i think a solution would be writte out the excel file instead of leaving the data in the heap memory, but i don't get it work</p>\n\n<p>any ideas ?? or another framework for excel 2007 files ???????</p>\n"},{"tags":["java","eclipse","heap-memory","oql","eclipse-mat"],"answers":[{"tags":[],"owner":{"account_id":103389,"reputation":6773,"user_id":276950,"display_name":"Tomas Hurka"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1292443754,"creation_date":1292443754,"answer_id":4454383,"question_id":3976470,"body_markdown":"To access static field &#39;props&#39; of class java.lang.System you can use (in VisualVM)\r\n\r\n    select heap.findClass(&quot;java.lang.System&quot;).statics.props\r\n    select heap.findClass(&quot;java.lang.System&quot;).props\r\n","title":"get static fields of a class in a heap dump in OQL","body":"<p>To access static field 'props' of class java.lang.System you can use (in VisualVM)</p>\n\n<pre><code>select heap.findClass(\"java.lang.System\").statics.props\nselect heap.findClass(\"java.lang.System\").props\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1355094,"reputation":912,"user_id":1293660,"accept_rate":88,"display_name":"kgibm"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1332785283,"creation_date":1332784570,"answer_id":9877186,"question_id":3976470,"body_markdown":"This is a bit hackish, but works in MAT:\r\n\r\n    SELECT c.SIZE\r\n    FROM INSTANCEOF java.lang.Class c\r\n    WHERE c.@displayName.contains(&quot;class java.lang.Integer &quot;)","title":"get static fields of a class in a heap dump in OQL","body":"<p>This is a bit hackish, but works in MAT:</p>\n\n<pre><code>SELECT c.SIZE\nFROM INSTANCEOF java.lang.Class c\nWHERE c.@displayName.contains(\"class java.lang.Integer \")\n</code></pre>\n"}],"owner":{"account_id":122083,"reputation":7417,"user_id":315642,"accept_rate":65,"display_name":"Joe Kearney"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4584,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":4454383,"answer_count":2,"score":8,"last_activity_date":1639067764,"creation_date":1287567490,"question_id":3976470,"body_markdown":"I have a heap dump and I&#39;m using Eclipse MAT, though I suppose this should work through visualvm or whatever OQL client.\r\n\r\nWe can select fields of all instances of a class by doing something like\r\n\r\n    select s.field1, s.field2 from org.me.MyClass\r\n\r\n... but this is restricted to member variables, and to types with instances.\r\n\r\nHow can select the static fields of a class with no instances?\r\n\r\nThis is somewhat related to [this other question](https://stackoverflow.com/questions/3976431).","title":"get static fields of a class in a heap dump in OQL","body":"<p>I have a heap dump and I'm using Eclipse MAT, though I suppose this should work through visualvm or whatever OQL client.</p>\n\n<p>We can select fields of all instances of a class by doing something like</p>\n\n<pre><code>select s.field1, s.field2 from org.me.MyClass\n</code></pre>\n\n<p>... but this is restricted to member variables, and to types with instances.</p>\n\n<p>How can select the static fields of a class with no instances?</p>\n\n<p>This is somewhat related to <a href=\"https://stackoverflow.com/questions/3976431\">this other question</a>.</p>\n"},{"tags":["java","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1287915527,"creation_date":1287915527,"answer_id":4007836,"question_id":4007821,"body_markdown":"You can set the maximum memory eclipse uses with -mx1300m or the like.  This limitation will be because you are running 32-bit java on Windows.  On a 64-bit OS, you won&#39;t have this problem.\r\n\r\nHowever, its the maximum memory size you set for each application in eclipse which matters.  What have you set in your run options in eclipse?","title":"application terminates on heapsize","body":"<p>You can set the maximum memory eclipse uses with -mx1300m or the like.  This limitation will be because you are running 32-bit java on Windows.  On a 64-bit OS, you won't have this problem.</p>\n\n<p>However, its the maximum memory size you set for each application in eclipse which matters.  What have you set in your run options in eclipse?</p>\n"},{"tags":[],"owner":{"account_id":212321,"reputation":622,"user_id":465076,"accept_rate":100,"display_name":"kasten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1287916119,"creation_date":1287916119,"answer_id":4007864,"question_id":4007821,"body_markdown":"You may want to look at the aggressive Heap option http://java.sun.com/docs/hotspot/gc1.4.2/#4.2.2.%20AggressiveHeap|outline\r\nIt solved a similiar issue for me.","title":"application terminates on heapsize","body":"<p>You may want to look at the aggressive Heap option <a href=\"http://java.sun.com/docs/hotspot/gc1.4.2/#4.2.2.%20AggressiveHeap|outline\" rel=\"nofollow\">http://java.sun.com/docs/hotspot/gc1.4.2/#4.2.2.%20AggressiveHeap|outline</a>\nIt solved a similiar issue for me.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1287919685,"creation_date":1287917647,"answer_id":4007927,"question_id":4007821,"body_markdown":"Your question is very unclear:\r\n\r\n  - Are you running the application in a new JVM?\r\n  - Did you set the -Xmx / -Xms parameters in the launcher for the child JVM?\r\n\r\nIf the answer to either of those questions is &quot;no&quot;, then try doing ... both.  (In particular, if you don&#39;t set at least -Xmx for the child JVM, you&#39;ll get the default heap size which is relatively small.)\r\n\r\nIf the answer to both of those questions is &quot;yes&quot;, then the problem is that you are running into the limits of your hardware and/or operating system configuration:\r\n\r\n  - On a typical 32bit Windows, a user process can only address a total 2**31 bytes of virtual memory, and some of that will be used by the JVM binaries, native libraries and various non-heap memory allocations.  (On a 32 bit Linux, I believe you can have up to `2**31 + 2**30`).  The &quot;fix&quot; for this is to use a 64bit OS and a 64bit JVM.\r\n\r\n  - In addition, a JVM is limited on the amount of memory that it can request by the resources of the OS&#39;es virtual memory subsystem.  This is typically bounded by the sum of the available RAM and the size of the disc files / partitions used for paging.  The &quot;fix&quot; for this is to increase the size of the paging file / partition.  Adding more RAM would probably be a good idea too.\r\n\r\n  \r\n\r\n","title":"application terminates on heapsize","body":"<p>Your question is very unclear:</p>\n\n<ul>\n<li>Are you running the application in a new JVM?</li>\n<li>Did you set the -Xmx / -Xms parameters in the launcher for the child JVM?</li>\n</ul>\n\n<p>If the answer to either of those questions is \"no\", then try doing ... both.  (In particular, if you don't set at least -Xmx for the child JVM, you'll get the default heap size which is relatively small.)</p>\n\n<p>If the answer to both of those questions is \"yes\", then the problem is that you are running into the limits of your hardware and/or operating system configuration:</p>\n\n<ul>\n<li><p>On a typical 32bit Windows, a user process can only address a total 2**31 bytes of virtual memory, and some of that will be used by the JVM binaries, native libraries and various non-heap memory allocations.  (On a 32 bit Linux, I believe you can have up to <code>2**31 + 2**30</code>).  The \"fix\" for this is to use a 64bit OS and a 64bit JVM.</p></li>\n<li><p>In addition, a JVM is limited on the amount of memory that it can request by the resources of the OS'es virtual memory subsystem.  This is typically bounded by the sum of the available RAM and the size of the disc files / partitions used for paging.  The \"fix\" for this is to increase the size of the paging file / partition.  Adding more RAM would probably be a good idea too.</p></li>\n</ul>\n"}],"owner":{"account_id":201249,"reputation":21,"user_id":447579,"accept_rate":20,"display_name":"Tamir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1505,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1639067744,"creation_date":1287915159,"question_id":4007821,"body_markdown":"I have defined -Xmsx 1.3GB in the java VM parameters and my Eclipse does not allow more than this, when running the application I got the below exception:\r\n\r\nException in thread &quot;Thread-3&quot; java.lang.OutOfMemoryError: Java heap space\r\n\r\nWhat can I do?","title":"application terminates on heapsize","body":"<p>I have defined -Xmsx 1.3GB in the java VM parameters and my Eclipse does not allow more than this, when running the application I got the below exception:</p>\n\n<p>Exception in thread \"Thread-3\" java.lang.OutOfMemoryError: Java heap space</p>\n\n<p>What can I do?</p>\n"},{"tags":["java","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1291917103,"creation_date":1291323194,"answer_id":4339732,"question_id":4339704,"body_markdown":"You can not resize the amount of memory allotted to the Java Virtual Machine `(-Xmx)` once it&#39;s been started.  What you could do is launch *another* Java process from your main with the value you get from the args array.","title":"Java resize heap question","body":"<p>You can not resize the amount of memory allotted to the Java Virtual Machine <code>(-Xmx)</code> once it's been started.  What you could do is launch <em>another</em> Java process from your main with the value you get from the args array.</p>\n"}],"owner":{"account_id":192764,"reputation":9156,"user_id":434089,"accept_rate":98,"display_name":"Steffan Harris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":646,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":4339732,"answer_count":1,"score":1,"last_activity_date":1639067723,"creation_date":1291323063,"question_id":4339704,"body_markdown":"If there was a way to resize the heap by passing `Xmsn` to the argument array in main.\r\nCould I be shown a small example of this.","title":"Java resize heap question","body":"<p>If there was a way to resize the heap by passing <code>Xmsn</code> to the argument array in main.\nCould I be shown a small example of this.</p>\n"},{"tags":["java","maven","jetty","heap-memory","maven-jetty-plugin"],"comments":[{"owner":{"account_id":64344,"reputation":8352,"user_id":189992,"accept_rate":95,"display_name":"ssedano"},"score":0,"creation_date":1294738666,"post_id":4656040,"comment_id":5128303,"body_markdown":"Is it giving a OutOfMemoryError?  Did you try with -XX:MaxPermSize=1024m ? freeMemory() shows the space for future allocation. And permament objects  goes to Perm space. Udo.","body":"Is it giving a OutOfMemoryError?  Did you try with -XX:MaxPermSize=1024m ? freeMemory() shows the space for future allocation. And permament objects  goes to Perm space. Udo."},{"owner":{"account_id":186293,"reputation":5335,"user_id":423585,"accept_rate":89,"display_name":"gennad"},"score":0,"creation_date":1294739082,"post_id":4656040,"comment_id":5128375,"body_markdown":"If I try -XX:MaxPermSize=1024 nothing changes... I can&#39;t test it now on OutOfMemoryError... You mean that this space (for future allocation) will increase depending on application&#39;s needs?","body":"If I try -XX:MaxPermSize=1024 nothing changes... I can&#39;t test it now on OutOfMemoryError... You mean that this space (for future allocation) will increase depending on application&#39;s needs?"},{"owner":{"account_id":64344,"reputation":8352,"user_id":189992,"accept_rate":95,"display_name":"ssedano"},"score":0,"creation_date":1294750558,"post_id":4656040,"comment_id":5130321,"body_markdown":"maxMemory() shows the total amount of memory. Paste maxMemoryoutput please","body":"maxMemory() shows the total amount of memory. Paste maxMemoryoutput please"},{"owner":{"account_id":186293,"reputation":5335,"user_id":423585,"accept_rate":89,"display_name":"gennad"},"score":0,"creation_date":1294770672,"post_id":4656040,"comment_id":5134812,"body_markdown":"freeMemory(): 25288024 maxMemory(): 259522560 , seems max memory is in ten times more than free","body":"freeMemory(): 25288024 maxMemory(): 259522560 , seems max memory is in ten times more than free"}],"answers":[{"tags":[],"owner":{"account_id":69197,"reputation":11177,"user_id":201498,"display_name":"lweller"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1295631656,"creation_date":1294750340,"answer_id":4657804,"question_id":4656040,"body_markdown":"I think -DMAVEN_OPTS=&quot;-Xmx1024m -Xms512m&quot; is not correct way to specify memory params here. \r\n\r\nSet a env variable called MAVEN_OPTS with content &quot;-Xmx1024m -Xms512m&quot;","title":"Free heap size does not increase in Maven","body":"<p>I think -DMAVEN_OPTS=\"-Xmx1024m -Xms512m\" is not correct way to specify memory params here. </p>\n\n<p>Set a env variable called MAVEN_OPTS with content \"-Xmx1024m -Xms512m\"</p>\n"},{"tags":[],"owner":{"account_id":28208,"reputation":14132,"user_id":75126,"accept_rate":100,"display_name":"mhaller"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1295637504,"creation_date":1295637504,"answer_id":4762866,"question_id":4656040,"body_markdown":"`MAVEN_OPTS` is an environment variable, which is read by Maven and used as the command line arguments for forking java processes. Command line arguments control how the Java executable is started, e.g. stuff like memory settings.\r\n\r\n`-D` is used for setting Java System Properties, which is something completely different than command line arguments. Java System Properties can be read programmatically, e.g. by using System.getProperties().\r\n\r\nWindows:\r\n\r\n    SET MAVEN_OPTS=&quot;-Xmx1024m -Xms512m&quot;\r\n    mvn -Djetty.port=8080 jetty:run\r\n\r\nLinux:\r\n\r\n    export MAVEN_OPTS=&quot;-Xmx1024m -Xms512m&quot;\r\n    mvn -Djetty.port=8080 jetty:run","title":"Free heap size does not increase in Maven","body":"<p><code>MAVEN_OPTS</code> is an environment variable, which is read by Maven and used as the command line arguments for forking java processes. Command line arguments control how the Java executable is started, e.g. stuff like memory settings.</p>\n\n<p><code>-D</code> is used for setting Java System Properties, which is something completely different than command line arguments. Java System Properties can be read programmatically, e.g. by using System.getProperties().</p>\n\n<p>Windows:</p>\n\n<pre><code>SET MAVEN_OPTS=\"-Xmx1024m -Xms512m\"\nmvn -Djetty.port=8080 jetty:run\n</code></pre>\n\n<p>Linux:</p>\n\n<pre><code>export MAVEN_OPTS=\"-Xmx1024m -Xms512m\"\nmvn -Djetty.port=8080 jetty:run\n</code></pre>\n"}],"owner":{"account_id":186293,"reputation":5335,"user_id":423585,"accept_rate":89,"display_name":"gennad"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7907,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":4762866,"answer_count":2,"score":10,"last_activity_date":1639067709,"creation_date":1294737945,"question_id":4656040,"body_markdown":"When I run maven-jetty-plugin, I run next command:\r\n\r\n    mvn -DMAVEN_OPTS=&quot;-Xmx1024m -Xms512m&quot; -Djetty.port=8080 jetty:run\r\n\r\nbut when I try to output free heap size with\r\n\r\n    Long heapFreeSize = Runtime.getRuntime().freeMemory();\r\n\r\nIt always outputs something about about 30000000. &lt;br /&gt;\r\nI suppose it&#39;s size in bytes, so about 30 megabytes. &lt;br /&gt;\r\nWhy then free heap memory did not increase?\r\n","title":"Free heap size does not increase in Maven","body":"<p><br /><br />\nWhen I run maven-jetty-plugin, I run next command:</p>\n\n<pre><code>mvn -DMAVEN_OPTS=\"-Xmx1024m -Xms512m\" -Djetty.port=8080 jetty:run\n</code></pre>\n\n<p>but when I try to output free heap size with</p>\n\n<pre><code>Long heapFreeSize = Runtime.getRuntime().freeMemory();\n</code></pre>\n\n<p>It always outputs something about about 30000000. <br />\nI suppose it's size in bytes, so about 30 megabytes. <br />\nWhy then free heap memory did not increase?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1834782,"reputation":1763,"user_id":1665377,"display_name":"maximede"},"score":1,"creation_date":1458942627,"post_id":36228570,"comment_id":60088408,"body_markdown":"Can you show your ```InternetMovieDatabaseApplication``` class ?","body":"Can you show your <code>InternetMovieDatabaseApplication</code> class ?"},{"owner":{"display_name":"user6108600"},"score":1,"creation_date":1458942777,"post_id":36228570,"comment_id":60088450,"body_markdown":"I edited and added two classes app and servlet","body":"I edited and added two classes app and servlet"},{"owner":{"account_id":365271,"reputation":30295,"user_id":710099,"accept_rate":79,"display_name":"Federico Piazza"},"score":0,"creation_date":1458949380,"post_id":36228570,"comment_id":60090803,"body_markdown":"@user6108600 have you tried starting your app by terminal? Like: `mvn clean install ; java -jar target/internetmoviedatabase-0.0.1-SNAPSHOT.jar`. Also, you can try fat jars approach by changing from `war` to `jar`","body":"@user6108600 have you tried starting your app by terminal? Like: <code>mvn clean install ; java -jar target&#47;internetmoviedatabase-0.0.1-SNAPSHOT.jar</code>. Also, you can try fat jars approach by changing from <code>war</code> to <code>jar</code>"},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1458982087,"post_id":36228570,"comment_id":60097302,"body_markdown":"It looks like you are running on Linux. It&#39;s worth checking that you have enough memory available, and that the out of memory killer isn&#39;t killing your app","body":"It looks like you are running on Linux. It&#39;s worth checking that you have enough memory available, and that the out of memory killer isn&#39;t killing your app"},{"owner":{"display_name":"user6108600"},"score":1,"creation_date":1458990793,"post_id":36228570,"comment_id":60099811,"body_markdown":"mvn spring-boot:run i tried with this after going cd inside project and it worked. i have enoght memory. BEcause of war extension, spring boot doesnot work only command line works?","body":"mvn spring-boot:run i tried with this after going cd inside project and it worked. i have enoght memory. BEcause of war extension, spring boot doesnot work only command line works?"}],"answers":[{"tags":[],"owner":{"account_id":1834782,"reputation":1763,"user_id":1665377,"display_name":"maximede"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1458943390,"creation_date":1458943390,"answer_id":36228773,"question_id":36228570,"body_markdown":"I don&#39;t think you need your ```ServletInitializer```\r\n\r\nyour ```InternetMovieDatabaseApplication``` with the ```@SpringBootApplication``` annotation should be sufficient.","title":"Spring boot stops after starting","body":"<p>I don't think you need your <code>ServletInitializer</code></p>\n\n<p>your <code>InternetMovieDatabaseApplication</code> with the <code>@SpringBootApplication</code> annotation should be sufficient.</p>\n"},{"tags":[],"owner":{"account_id":1477692,"reputation":46661,"user_id":1393484,"accept_rate":100,"display_name":"Ali Dehghani"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1458949029,"creation_date":1458943548,"answer_id":36228801,"question_id":36228570,"body_markdown":"Apparently, you&#39;re going to package your application as `war`, that&#39;s fine but the problem is that you&#39;re running your application through the `main` method in `InternetMovieDatabaseApplication` class. Instead, you should either deploy your application to a *Standalone Servlet Container*, like *Tomcat* or *Jetty*, or run the application using the `mvn spring-boot:run` command.\r\n\r\nIf packaging your application as `war` archive is not a strict requirement, i recommend to *make jar, not war*. In order to doing so, first remove the `packaging` in your `pom.xml`:\r\n\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\nThen remove the `spring-boot-starter-tomcat` dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\nAnd finally remove the `ServletInitializer` class and run the `main` method in your `InternetMovieDatabaseApplication` class.","title":"Spring boot stops after starting","body":"<p>Apparently, you're going to package your application as <code>war</code>, that's fine but the problem is that you're running your application through the <code>main</code> method in <code>InternetMovieDatabaseApplication</code> class. Instead, you should either deploy your application to a <em>Standalone Servlet Container</em>, like <em>Tomcat</em> or <em>Jetty</em>, or run the application using the <code>mvn spring-boot:run</code> command.</p>\n\n<p>If packaging your application as <code>war</code> archive is not a strict requirement, i recommend to <em>make jar, not war</em>. In order to doing so, first remove the <code>packaging</code> in your <code>pom.xml</code>:</p>\n\n<pre><code>&lt;packaging&gt;war&lt;/packaging&gt;\n</code></pre>\n\n<p>Then remove the <code>spring-boot-starter-tomcat</code> dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And finally remove the <code>ServletInitializer</code> class and run the <code>main</code> method in your <code>InternetMovieDatabaseApplication</code> class.</p>\n"},{"tags":[],"owner":{"account_id":1441892,"reputation":13687,"user_id":1361787,"accept_rate":68,"display_name":"ChiefTwoPencils"},"down_vote_count":1,"up_vote_count":23,"is_accepted":true,"score":22,"last_activity_date":1459281657,"creation_date":1458947515,"answer_id":36229552,"question_id":36228570,"body_markdown":"I don&#39;t see anything glaringly wrong with what you have. I have an app that I deploy both as a jar and war simultaneously in different environments (they differ only by packaging); I have a `ServletInitializer` equivalent to yours and it works without issue with one primary difference.\r\n\r\nI use a maven run configuration with `spring-boot:run` as the &quot;Command line&quot; value. With that I can do no more than change the pom to reflect jar or war, run, and go. I&#39;ve faced problems when switching back and forth and using a config that invokes `main` in the app class. For example, just for fun I just ran an instance of the app with jar packaging and running `main`. Wouldn&#39;t even launch. This is just after having it jar packaged and launched using the maven config I mentioned above.\r\n\r\nI would recommend starting with creating that maven run configuration and see what the results are. Here&#39;s the way to do it in Intellij so you don&#39;t have to use the command line interface.\r\n\r\n 1. Choose &quot;Edit configurations...&quot; from the dropdown next to the play button.\r\n 2. Press the green `+` in the upper left-hand corner.\r\n 3. Choose to create a maven configuration.\r\n 4. Name it.\r\n 5. Add `spring-boot:run` to the &quot;Command line&quot; entry.\r\n 6. Optionally, make it &quot;Share&quot;d or &quot;Single instance only&quot;.\r\n\r\nI&#39;m not an eclipse/sts user but I&#39;m sure there&#39;s a similar way to do it.","title":"Spring boot stops after starting","body":"<p>I don't see anything glaringly wrong with what you have. I have an app that I deploy both as a jar and war simultaneously in different environments (they differ only by packaging); I have a <code>ServletInitializer</code> equivalent to yours and it works without issue with one primary difference.</p>\n\n<p>I use a maven run configuration with <code>spring-boot:run</code> as the \"Command line\" value. With that I can do no more than change the pom to reflect jar or war, run, and go. I've faced problems when switching back and forth and using a config that invokes <code>main</code> in the app class. For example, just for fun I just ran an instance of the app with jar packaging and running <code>main</code>. Wouldn't even launch. This is just after having it jar packaged and launched using the maven config I mentioned above.</p>\n\n<p>I would recommend starting with creating that maven run configuration and see what the results are. Here's the way to do it in Intellij so you don't have to use the command line interface.</p>\n\n<ol>\n<li>Choose \"Edit configurations...\" from the dropdown next to the play button.</li>\n<li>Press the green <code>+</code> in the upper left-hand corner.</li>\n<li>Choose to create a maven configuration.</li>\n<li>Name it.</li>\n<li>Add <code>spring-boot:run</code> to the \"Command line\" entry.</li>\n<li>Optionally, make it \"Share\"d or \"Single instance only\".</li>\n</ol>\n\n<p>I'm not an eclipse/sts user but I'm sure there's a similar way to do it.</p>\n"},{"tags":[],"owner":{"account_id":15715067,"reputation":15,"user_id":11339472,"display_name":"A. Vysotskiy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1575996921,"creation_date":1555073804,"answer_id":55652133,"question_id":36228570,"body_markdown":"I was having this problem, it was fixed by removing this dependency:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n            &lt;version&gt;4.1.6.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"Spring boot stops after starting","body":"<p>I was having this problem, it was fixed by removing this dependency:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;4.1.6.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6840202,"reputation":344,"user_id":5260862,"display_name":"SJ1"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1639067303,"creation_date":1565041590,"answer_id":57366456,"question_id":36228570,"body_markdown":"Although an answer has been accepted, still this might help:\r\n\r\nAre you trying to run the application from Intellij from _Run menu_ or by right click and run on the class where your main is defined and you are getting above issue and the application works fine from command line?\r\n\r\nIf above is the case, I see your **pom.xml** have dependency with **provided** scope. \r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n       &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n       &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nWhen running the application from run menu in intellij, dependencies with provided scope are not available by default.\r\n\r\nTo fix this,\r\n\r\n&gt; Go to Run Menu -&gt; Edit Configuations and then select Include\r\n&gt; dependencies with provided scope\r\n\r\nImage for reference:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd try to run again. This should fix the issue. \r\n\r\nGood luck.\r\n\r\n\r\n**Edit -** \r\nIn newer versions of Intellij, This option is hidden in Modify Options in Run configuration.\r\n\r\nImage for reference\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hmpE6.jpg\r\n  [2]: https://i.stack.imgur.com/VW11f.png","title":"Spring boot stops after starting","body":"<p>Although an answer has been accepted, still this might help:</p>\n<p>Are you trying to run the application from Intellij from <em>Run menu</em> or by right click and run on the class where your main is defined and you are getting above issue and the application works fine from command line?</p>\n<p>If above is the case, I see your <strong>pom.xml</strong> have dependency with <strong>provided</strong> scope.</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n   &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n   &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>When running the application from run menu in intellij, dependencies with provided scope are not available by default.</p>\n<p>To fix this,</p>\n<blockquote>\n<p>Go to Run Menu -&gt; Edit Configuations and then select Include\ndependencies with provided scope</p>\n</blockquote>\n<p>Image for reference:</p>\n<p><a href=\"https://i.stack.imgur.com/hmpE6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hmpE6.jpg\" alt=\"enter image description here\" /></a></p>\n<p>And try to run again. This should fix the issue.</p>\n<p>Good luck.</p>\n<p><strong>Edit -</strong>\nIn newer versions of Intellij, This option is hidden in Modify Options in Run configuration.</p>\n<p>Image for reference\n<a href=\"https://i.stack.imgur.com/VW11f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VW11f.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1289221,"reputation":464,"user_id":1241648,"accept_rate":33,"display_name":""},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1576644889,"creation_date":1576638393,"answer_id":59384922,"question_id":36228570,"body_markdown":"I think you forgot add main-class in properties your pom.xml\r\n\r\n    &lt;properties&gt;\r\n        &lt;start-class&gt;org.infoowl.InternetMovieDatabaseApplication&lt;/start-class&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\nand modify your class as follow:\r\n\r\n    @SpringBootApplication\r\n    public class InternetMovieDatabaseApplication extends SpringBootServletInitializer {\r\n       @Override\r\n       protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n          return application.sources(DemoApplication.class);\r\n       }\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(InternetMovieDatabaseApplication.class, args);\r\n        }\r\n    }\r\n\r\nand open a command console, execute:\r\n\r\n\r\n    mvn clean package\r\n\r\nthen, deploy `war` into Tomcat, [demo here][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://github.com/liu1084/springboot2-tomcat-war-demo\r\n  [2]: https://i.stack.imgur.com/aQibP.png","title":"Spring boot stops after starting","body":"<p>I think you forgot add main-class in properties your pom.xml</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;start-class&gt;org.infoowl.InternetMovieDatabaseApplication&lt;/start-class&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>and modify your class as follow:</p>\n\n<pre><code>@SpringBootApplication\npublic class InternetMovieDatabaseApplication extends SpringBootServletInitializer {\n   @Override\n   protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n      return application.sources(DemoApplication.class);\n   }\n    public static void main(String[] args) {\n        SpringApplication.run(InternetMovieDatabaseApplication.class, args);\n    }\n}\n</code></pre>\n\n<p>and open a command console, execute:</p>\n\n<pre><code>mvn clean package\n</code></pre>\n\n<p>then, deploy <code>war</code> into Tomcat, <a href=\"https://github.com/liu1084/springboot2-tomcat-war-demo\" rel=\"nofollow noreferrer\">demo here</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/aQibP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aQibP.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"display_name":"user6108600"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59063,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":36229552,"answer_count":6,"score":13,"last_activity_date":1639067303,"creation_date":1458942364,"question_id":36228570,"body_markdown":"errors are:\r\n\r\n    /usr/lib/jvm/java-8-oracle/bin/java -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:40745,suspend=y,server=n -Dspring.output.ansi.enabled=always -Dfile.encoding=UTF-8 -classpath /usr/lib/jvm/java-8-oracle/jre/lib/charsets.jar:/usr/lib/jvm/java-8-oracle/jre/lib/deploy.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/cldrdata.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/dnsns.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/jaccess.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/jfxrt.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/localedata.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/nashorn.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/sunec.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/sunjce_provider.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/sunpkcs11.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/zipfs.jar:/usr/lib/jvm/java-8-oracle/jre/lib/javaws.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jce.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jfr.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jfxswt.jar:/usr/lib/jvm/java-8-oracle/jr       main] o.s.b.c.c.ConfigFileApplicationListener  : Skipped (empty) config file &#39;file:./application.properties&#39; for profile default\r\n    2016-03-25 23:43:41.426 DEBUG 18169 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Skipped (empty) config file &#39;classpath:/application.properties&#39; for profile default\r\n    2016-03-25 23:43:41.460  INFO 18169 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@3738449f: startup date [Fri Mar 25 23:43:41 EET 2016]; root of context hierarchy\r\n    2016-03-25 23:43:44.256 DEBUG 18169 --- [           main] o.s.b.a.AutoConfigurationPackages        : @EnableAutoConfiguration was declared on a class in the package &#39;org.infoowl&#39;. Automatic @Repository and @Entity scanning is enabled.\r\n    2016-03-25 23:43:46.084  INFO 18169 --- [           main] j.LocalContainerEntityManagerFactoryBean : Building JPA container EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2016-03-25 23:43:46.136  INFO 18169 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [\r\n    \tname: default\r\n    \t...]\r\n    2016-03-25 23:43:46.306  INFO 18169 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {4.3.11.Final}\r\n    2016-03-25 23:43:46.309  INFO 18169 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\r\n    2016-03-25 23:43:46.323  INFO 18169 --- [           main] org.hibernate.cfg.Environment            : HHH000021: Bytecode provider name : javassist\r\n    2016-03-25 23:43:47.042  INFO 18169 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {4.0.5.Final}\r\n    2016-03-25 23:43:47.841  INFO 18169 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\r\n    2016-03-25 23:43:48.085  INFO 18169 --- [           main] o.h.h.i.ast.ASTQueryTranslatorFactory    : HHH000397: Using ASTQueryTranslatorFactory\r\n    2016-03-25 23:43:48.971  INFO 18169 --- [           main] org.hibernate.tool.hbm2ddl.SchemaUpdate  : HHH000228: Running hbm2ddl schema update\r\n    2016-03-25 23:43:48.972  INFO 18169 --- [           main] org.hibernate.tool.hbm2ddl.SchemaUpdate  : HHH000102: Fetching database metadata\r\n    2016-03-25 23:43:48.988  INFO 18169 --- [           main] org.hibernate.tool.hbm2ddl.SchemaUpdate  : HHH000396: Updating schema\r\n    2016-03-25 23:43:49.111  INFO 18169 --- [           main] o.hibernate.tool.hbm2ddl.TableMetadata   : HHH000261: Table found: movies.movie\r\n    2016-03-25 23:43:49.112  INFO 18169 --- [           main] o.hibernate.tool.hbm2ddl.TableMetadata   : HHH000037: Columns: [actor, id, title]\r\n    2016-03-25 23:43:49.112  INFO 18169 --- [           main] o.hibernate.tool.hbm2ddl.TableMetadata   : HHH000108: Foreign keys: []\r\n    2016-03-25 23:43:49.112  INFO 18169 --- [           main] o.hibernate.tool.hbm2ddl.TableMetadata   : HHH000126: Indexes: [primary]\r\n    2016-03-25 23:43:49.113  INFO 18169 --- [           main] org.hibernate.tool.hbm2ddl.SchemaUpdate  : HHH000232: Schema update complete\r\n    2016-03-25 23:43:50.698  INFO 18169 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup\r\n    2016-03-25 23:43:50.727 DEBUG 18169 --- [           main] utoConfigurationReportLoggingInitializer : \r\n    \r\n    \r\n    =========================\r\n    AUTO-CONFIGURATION REPORT\r\n    =========================\r\n    \r\n    \r\n    Positive matches:\r\n    -----------------\r\n    \r\n    \r\n       HazelcastJpaDependencyAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: com.hazelcast.core.HazelcastInstance (OnClassCondition)\r\n    \r\n       HornetQAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: javax.jms.ConnectionFactory,org.hornetq.api.jms.HornetQJMSClient (OnClassCondition)\r\n    \r\n       HttpEncodingAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.web.filter.CharacterEncodingFilter (OnClassCondition)\r\n    \r\n       HypermediaAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.hateoas.Resource,org.springframework.plugin.core.Plugin (OnClassCondition)\r\n    \r\n       InfinispanCacheConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.infinispan.spring.provider.SpringEmbeddedCacheManager (OnClassCondition)\r\n    \r\n       IntegrationAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.integration.config.EnableIntegration (OnClassCondition)\r\n    \r\n       JCacheCacheConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: javax.cache.Caching,org.springframework.cache.jcache.JCacheCacheManager (OnClassCondition)\r\n    \r\n       JacksonAutoConfiguration.JodaDateTimeJacksonConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.joda.time.DateTime,com.fasterxml.jackson.datatype.joda.ser.DateTimeSerializer,com.fasterxml.jackson.datatype.joda.cfg.JacksonJodaDateFormat (OnClassCondition)\r\n    \r\n       JacksonAutoConfiguration.ParameterNamesModuleConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: com.fasterxml.jackson.module.paramnames.ParameterNamesModule (OnClassCondition)\r\n    \r\n       JacksonHttpMessageConvertersConfiguration.MappingJackson2XmlHttpMessageConverterConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: com.fasterxml.jackson.dataformat.xml.XmlMapper (OnClassCondition)\r\n    \r\n       JerseyAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.glassfish.jersey.server.spring.SpringComponentProvider,javax.servlet.ServletRegistration (OnClassCondition)\r\n    \r\n       JmsAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.jms.core.JmsTemplate (OnClassCondition)\r\n    \r\n       JndiConnectionFactoryAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.jms.core.JmsTemplate (OnClassCondition)\r\n    \r\n       JndiDataSourceAutoConfiguration did not match\r\n          - @ConditionalOnClass classes found: javax.sql.DataSource,org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType (OnClassCondition)\r\n          - @ConditionalOnProperty missing required properties spring.datasource.jndi-name  (OnPropertyCondition)\r\n    \r\n       JndiJtaConfiguration did not match\r\n          - @ConditionalOnClass classes found: org.springframework.transaction.jta.JtaTransactionManager (OnClassCondition)\r\n          - JNDI environment is not available (OnJndiCondition)\r\n    \r\n       JooqAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.jooq.DSLContext (OnClassCondition)\r\n    \r\n       JpaBaseConfiguration.JpaWebConfiguration did not match\r\n          - @ConditionalOnClass classes found: org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter (OnClassCondition)\r\n          - not a web application (OnWebApplicationCondition)\r\n    \r\n       LinkedInAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.social.config.annotation.SocialConfigurerAdapter,org.springframework.social.linkedin.connect.LinkedInConnectionFactory (OnClassCondition)\r\n    \r\n       LiquibaseAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: liquibase.integration.spring.SpringLiquibase (OnClassCondition)\r\n    \r\n       MailSenderAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: javax.mail.internet.MimeMessage (OnClassCondition)\r\n    \r\n       MailSenderValidatorAutoConfiguration did not match\r\n          - @ConditionalOnProperty missing required properties spring.mail.test-connection  (OnPropertyCondition)\r\n    \r\n       MessageSourceAutoConfiguration did not match\r\n          - No bundle found for spring.messages.basename: messages (MessageSourceAutoConfiguration.ResourceBundleCondition)\r\n    \r\n       MongoAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: com.mongodb.MongoClient (OnClassCondition)\r\n    \r\n       MongoDataAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: com.mongodb.Mongo,org.springframework.data.mongodb.core.MongoTemplate (OnClassCondition)\r\n    \r\n       MongoRepositoriesAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: com.mongodb.Mongo,org.springframework.data.mongodb.repository.MongoRepository (OnClassCondition)\r\n    \r\n       MultipartAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: javax.servlet.Servlet,javax.servlet.MultipartConfigElement (OnClassCondition)\r\n    \r\n       MustacheAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: com.samskivert.mustache.Mustache (OnClassCondition)\r\n    \r\n       OAuth2AutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.security.oauth2.common.OAuth2AccessToken (OnClassCondition)\r\n    \r\n       RabbitAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.amqp.rabbit.core.RabbitTemplate,com.rabbitmq.client.Channel (OnClassCondition)\r\n    \r\n       ReactorAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: reactor.spring.context.config.EnableReactor,reactor.Environment (OnClassCondition)\r\n    \r\n       RedisAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.data.redis.connection.jedis.JedisConnection,org.springframework.data.redis.core.RedisOperations,redis.clients.jedis.Jedis (OnClassCondition)\r\n    \r\n       RepositoryRestMvcAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration (OnClassCondition)\r\n    \r\n       SecurityAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.security.authentication.AuthenticationManager,org.springframework.security.config.annotation.authentication.configurers.GlobalAuthenticationConfigurerAdapter (OnClassCondition)\r\n    \r\n       SecurityFilterAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.security.web.context.AbstractSecurityWebApplicationInitializer,org.springframework.security.config.http.SessionCreationPolicy (OnClassCondition)\r\n    \r\n       SendGridAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: com.sendgrid.SendGrid (OnClassCondition)\r\n    \r\n       ServerPropertiesAutoConfiguration did not match\r\n          - not a web application (OnWebApplicationCondition)\r\n    \r\n       SessionAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.session.Session (OnClassCondition)\r\n    \r\n       SitePreferenceAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.mobile.device.site.SitePreferenceHandlerInterceptor,org.springframework.mobile.device.site.SitePreferenceHandlerMethodArgumentResolver (OnClassCondition)\r\n    \r\n       SocialWebAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.social.connect.web.ConnectController,org.springframework.social.config.annotation.SocialConfigurerAdapter (OnClassCondition)\r\n    \r\n       SolrAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.apache.solr.client.solrj.impl.HttpSolrServer,org.apache.solr.client.solrj.impl.CloudSolrServer,org.apache.solr.common.cloud.HashPartitioner (OnClassCondition)\r\n    \r\n       SolrRepositoriesAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.apache.solr.client.solrj.SolrServer,org.springframework.data.solr.repository.SolrRepository (OnClassCondition)\r\n    \r\n       SpringApplicationAdminJmxAutoConfiguration did not match\r\n          - @ConditionalOnProperty missing required properties spring.application.admin.enabled  (OnPropertyCondition)\r\n    \r\n       SpringDataWebAutoConfiguration did not match\r\n          - @ConditionalOnClass classes found: org.springframework.data.web.PageableHandlerMethodArgumentResolver,org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter (OnClassCondition)\r\n          - not a web application (OnWebApplicationCondition)\r\n    \r\n       ThymeleafAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.thymeleaf.spring4.SpringTemplateEngine (OnClassCondition)\r\n    \r\n       TwitterAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.social.config.annotation.SocialConfigurerAdapter,org.springframework.social.twitter.connect.TwitterConnectionFactory (OnClassCondition)\r\n    \r\n       VelocityAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.apache.velocity.app.VelocityEngine,org.springframework.ui.velocity.VelocityEngineFactory (OnClassCondition)\r\n    \r\n       WebMvcAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: javax.servlet.Servlet,org.springframework.web.servlet.DispatcherServlet (OnClassCondition)\r\n    \r\n       WebSocketAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: javax.servlet.Servlet,javax.websocket.server.ServerContainer (OnClassCondition)\r\n    \r\n       WebSocketMessagingAutoConfiguration did not match\r\n          - required @ConditionalOnClass classes not found: org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer (OnClassCondition)\r\n    \r\n       XADataSourceAutoConfiguration did not match\r\n          - @ConditionalOnClass classes found: javax.sql.DataSource,javax.transaction.TransactionManager,org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType (OnClassCondition)\r\n          - @ConditionalOnBean (types: org.springframework.boot.jta.XADataSourceWrapper; SearchStrategy: all) found no beans (OnBeanCondition)\r\n    \r\n    \r\n    Exclusions:\r\n    -----------\r\n    \r\n        None\r\n    \r\n    \r\n    Unconditional classes:\r\n    ----------------------\r\n    \r\n       org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration\r\n    \r\n       org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration\r\n    \r\n    \r\n    \r\n    2016-03-25 23:43:50.761  INFO 18169 --- [           main] o.i.InternetMovieDatabaseApplication     : Started InternetMovieDatabaseApplication in 11.476 seconds (JVM running for 14.426)\r\n    2016-03-25 23:43:50.774  INFO 18169 --- [       Thread-2] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@3738449f: startup date [Fri Mar 25 23:43:41 EET 2016]; root of context hierarchy\r\n    2016-03-25 23:43:50.789  INFO 18169 --- [       Thread-2] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans on shutdown\r\n    2016-03-25 23:43:50.790  INFO 18169 --- [       Thread-2] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    Disconnected from the target VM, address: &#39;127.0.0.1:40745&#39;, transport: &#39;socket&#39;\r\n    \r\n    Process finished with exit code 0\r\n\r\nI try to start but after those outputs, it shuts down. I used spring initializr. I just want to make a small REST API.\r\n\r\nThis is my `pom.xml`:\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n    \t&lt;groupId&gt;org.infoowl&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;internetmoviedatabase&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n    \t&lt;name&gt;InternetMovieDatabase&lt;/name&gt;\r\n    \t&lt;description&gt;Internet Movie Database Application&lt;/description&gt;\r\n    \r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.3.RELEASE&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \t\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nthis is `application.properteis`:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/movies\r\n    spring.datasource.username=root\r\n    spring.datasource.password=\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    server.port=8181\r\n    spring.jpa.database=MYSQL\r\n    spring.jpa.show-sql=true\r\n\r\n\r\n`InternetMovieDatabaseApplication` class:\r\n\r\n    package org.infoowl;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class InternetMovieDatabaseApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(InternetMovieDatabaseApplication.class, args);\r\n    \t}\r\n    }\r\n\r\n`ServletInitializer` class:\r\n\r\n    package org.infoowl;\r\n    \r\n    import org.springframework.boot.builder.SpringApplicationBuilder;\r\n    import org.springframework.boot.context.web.SpringBootServletInitializer;\r\n    \r\n    public class ServletInitializer extends SpringBootServletInitializer {\r\n    \r\n    \t@Override\r\n    \tprotected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n    \t\treturn application.sources(InternetMovieDatabaseApplication.class);\r\n    \t}\r\n    \r\n    }\r\n\r\nThese are the errors if i delete `ServletInitializer`:\r\n\r\n\r\n\r\n    2016-03-26 00:20:22.691 ERROR 20251 --- [           main] o.s.boot.SpringApplication               : Application startup failed\r\n    \r\n    org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [org.infoowl.InternetMovieDatabaseApplication]; nested exception is java.lang.IllegalStateException: Failed to introspect annotated methods on class org.springframework.boot.context.web.SpringBootServletInitializer\r\n    \tat org.springframework.context.annotation.ConfigurationClassParser.parse(Configurplication.java:1191) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\r\n    \tat o\r\n    Caused by: java.lang.IllegalStateException: Failed to introspect annotated methods on class org.springframework.boot.context.web.SpringBootServletInitializer\r\n    \tat org.springframework.core.type.StandardAnnotationMetadata.getAnnotatedMethods(StandardAnnotationMetadata.java:163) ~[spring-core-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:292) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:232) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \tat E.jar:4.2.5.RELEASE]\r\n    \t... 12 common frames omitted\r\n    Caused by: java.lang.NoClassDefFoundError: javax/servlet/ServletContext\r\n    \tat java.lang.Class.getDeclaredMethods0(Native Method) ~[na:1.8.0_74]\r\n    \tat java.lang.Class.privateGetDeclaredMethods(Class.java:2701) ~[na:1.8.0_74]\r\n    \tat java.lang.Class.getDeclaredMethods(Class.java:1975) ~[na:1.8.0_74]\r\n    \tat org.springframework.core.type.StandardAnnotationMetadata.getAnnotatedMethods(StandardAnnotationMetadata.java:152) ~[spring-core-4.2.5.RELEASE.jar:4.2.5.RELEASE]\r\n    \t... 16 common frames omitted\r\n    Caused by: java.lang.ClassNotFoundException: javax.servlet.ServletContext\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.IU-144.4199.23/lib/idea_rt.jar]\r\n    Disconnected from the target VM, address: &#39;127.0.0.1:42011&#39;, transport: &#39;socket&#39;\r\n    \r\n    Process finished with exit code 1\r\n\r\n","title":"Spring boot stops after starting","body":"<p>errors are:</p>\n\n<pre><code>/usr/lib/jvm/java-8-oracle/bin/java -agentlib:jdwp=transport=dt_socket,address=127.0.0.1:40745,suspend=y,server=n -Dspring.output.ansi.enabled=always -Dfile.encoding=UTF-8 -classpath /usr/lib/jvm/java-8-oracle/jre/lib/charsets.jar:/usr/lib/jvm/java-8-oracle/jre/lib/deploy.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/cldrdata.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/dnsns.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/jaccess.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/jfxrt.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/localedata.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/nashorn.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/sunec.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/sunjce_provider.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/sunpkcs11.jar:/usr/lib/jvm/java-8-oracle/jre/lib/ext/zipfs.jar:/usr/lib/jvm/java-8-oracle/jre/lib/javaws.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jce.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jfr.jar:/usr/lib/jvm/java-8-oracle/jre/lib/jfxswt.jar:/usr/lib/jvm/java-8-oracle/jr       main] o.s.b.c.c.ConfigFileApplicationListener  : Skipped (empty) config file 'file:./application.properties' for profile default\n2016-03-25 23:43:41.426 DEBUG 18169 --- [           main] o.s.b.c.c.ConfigFileApplicationListener  : Skipped (empty) config file 'classpath:/application.properties' for profile default\n2016-03-25 23:43:41.460  INFO 18169 --- [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@3738449f: startup date [Fri Mar 25 23:43:41 EET 2016]; root of context hierarchy\n2016-03-25 23:43:44.256 DEBUG 18169 --- [           main] o.s.b.a.AutoConfigurationPackages        : @EnableAutoConfiguration was declared on a class in the package 'org.infoowl'. Automatic @Repository and @Entity scanning is enabled.\n2016-03-25 23:43:46.084  INFO 18169 --- [           main] j.LocalContainerEntityManagerFactoryBean : Building JPA container EntityManagerFactory for persistence unit 'default'\n2016-03-25 23:43:46.136  INFO 18169 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [\n    name: default\n    ...]\n2016-03-25 23:43:46.306  INFO 18169 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {4.3.11.Final}\n2016-03-25 23:43:46.309  INFO 18169 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\n2016-03-25 23:43:46.323  INFO 18169 --- [           main] org.hibernate.cfg.Environment            : HHH000021: Bytecode provider name : javassist\n2016-03-25 23:43:47.042  INFO 18169 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {4.0.5.Final}\n2016-03-25 23:43:47.841  INFO 18169 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect\n2016-03-25 23:43:48.085  INFO 18169 --- [           main] o.h.h.i.ast.ASTQueryTranslatorFactory    : HHH000397: Using ASTQueryTranslatorFactory\n2016-03-25 23:43:48.971  INFO 18169 --- [           main] org.hibernate.tool.hbm2ddl.SchemaUpdate  : HHH000228: Running hbm2ddl schema update\n2016-03-25 23:43:48.972  INFO 18169 --- [           main] org.hibernate.tool.hbm2ddl.SchemaUpdate  : HHH000102: Fetching database metadata\n2016-03-25 23:43:48.988  INFO 18169 --- [           main] org.hibernate.tool.hbm2ddl.SchemaUpdate  : HHH000396: Updating schema\n2016-03-25 23:43:49.111  INFO 18169 --- [           main] o.hibernate.tool.hbm2ddl.TableMetadata   : HHH000261: Table found: movies.movie\n2016-03-25 23:43:49.112  INFO 18169 --- [           main] o.hibernate.tool.hbm2ddl.TableMetadata   : HHH000037: Columns: [actor, id, title]\n2016-03-25 23:43:49.112  INFO 18169 --- [           main] o.hibernate.tool.hbm2ddl.TableMetadata   : HHH000108: Foreign keys: []\n2016-03-25 23:43:49.112  INFO 18169 --- [           main] o.hibernate.tool.hbm2ddl.TableMetadata   : HHH000126: Indexes: [primary]\n2016-03-25 23:43:49.113  INFO 18169 --- [           main] org.hibernate.tool.hbm2ddl.SchemaUpdate  : HHH000232: Schema update complete\n2016-03-25 23:43:50.698  INFO 18169 --- [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup\n2016-03-25 23:43:50.727 DEBUG 18169 --- [           main] utoConfigurationReportLoggingInitializer : \n\n\n=========================\nAUTO-CONFIGURATION REPORT\n=========================\n\n\nPositive matches:\n-----------------\n\n\n   HazelcastJpaDependencyAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: com.hazelcast.core.HazelcastInstance (OnClassCondition)\n\n   HornetQAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: javax.jms.ConnectionFactory,org.hornetq.api.jms.HornetQJMSClient (OnClassCondition)\n\n   HttpEncodingAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.web.filter.CharacterEncodingFilter (OnClassCondition)\n\n   HypermediaAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.hateoas.Resource,org.springframework.plugin.core.Plugin (OnClassCondition)\n\n   InfinispanCacheConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.infinispan.spring.provider.SpringEmbeddedCacheManager (OnClassCondition)\n\n   IntegrationAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.integration.config.EnableIntegration (OnClassCondition)\n\n   JCacheCacheConfiguration did not match\n      - required @ConditionalOnClass classes not found: javax.cache.Caching,org.springframework.cache.jcache.JCacheCacheManager (OnClassCondition)\n\n   JacksonAutoConfiguration.JodaDateTimeJacksonConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.joda.time.DateTime,com.fasterxml.jackson.datatype.joda.ser.DateTimeSerializer,com.fasterxml.jackson.datatype.joda.cfg.JacksonJodaDateFormat (OnClassCondition)\n\n   JacksonAutoConfiguration.ParameterNamesModuleConfiguration did not match\n      - required @ConditionalOnClass classes not found: com.fasterxml.jackson.module.paramnames.ParameterNamesModule (OnClassCondition)\n\n   JacksonHttpMessageConvertersConfiguration.MappingJackson2XmlHttpMessageConverterConfiguration did not match\n      - required @ConditionalOnClass classes not found: com.fasterxml.jackson.dataformat.xml.XmlMapper (OnClassCondition)\n\n   JerseyAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.glassfish.jersey.server.spring.SpringComponentProvider,javax.servlet.ServletRegistration (OnClassCondition)\n\n   JmsAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.jms.core.JmsTemplate (OnClassCondition)\n\n   JndiConnectionFactoryAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.jms.core.JmsTemplate (OnClassCondition)\n\n   JndiDataSourceAutoConfiguration did not match\n      - @ConditionalOnClass classes found: javax.sql.DataSource,org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType (OnClassCondition)\n      - @ConditionalOnProperty missing required properties spring.datasource.jndi-name  (OnPropertyCondition)\n\n   JndiJtaConfiguration did not match\n      - @ConditionalOnClass classes found: org.springframework.transaction.jta.JtaTransactionManager (OnClassCondition)\n      - JNDI environment is not available (OnJndiCondition)\n\n   JooqAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.jooq.DSLContext (OnClassCondition)\n\n   JpaBaseConfiguration.JpaWebConfiguration did not match\n      - @ConditionalOnClass classes found: org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter (OnClassCondition)\n      - not a web application (OnWebApplicationCondition)\n\n   LinkedInAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.social.config.annotation.SocialConfigurerAdapter,org.springframework.social.linkedin.connect.LinkedInConnectionFactory (OnClassCondition)\n\n   LiquibaseAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: liquibase.integration.spring.SpringLiquibase (OnClassCondition)\n\n   MailSenderAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: javax.mail.internet.MimeMessage (OnClassCondition)\n\n   MailSenderValidatorAutoConfiguration did not match\n      - @ConditionalOnProperty missing required properties spring.mail.test-connection  (OnPropertyCondition)\n\n   MessageSourceAutoConfiguration did not match\n      - No bundle found for spring.messages.basename: messages (MessageSourceAutoConfiguration.ResourceBundleCondition)\n\n   MongoAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: com.mongodb.MongoClient (OnClassCondition)\n\n   MongoDataAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: com.mongodb.Mongo,org.springframework.data.mongodb.core.MongoTemplate (OnClassCondition)\n\n   MongoRepositoriesAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: com.mongodb.Mongo,org.springframework.data.mongodb.repository.MongoRepository (OnClassCondition)\n\n   MultipartAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: javax.servlet.Servlet,javax.servlet.MultipartConfigElement (OnClassCondition)\n\n   MustacheAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: com.samskivert.mustache.Mustache (OnClassCondition)\n\n   OAuth2AutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.security.oauth2.common.OAuth2AccessToken (OnClassCondition)\n\n   RabbitAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.amqp.rabbit.core.RabbitTemplate,com.rabbitmq.client.Channel (OnClassCondition)\n\n   ReactorAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: reactor.spring.context.config.EnableReactor,reactor.Environment (OnClassCondition)\n\n   RedisAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.data.redis.connection.jedis.JedisConnection,org.springframework.data.redis.core.RedisOperations,redis.clients.jedis.Jedis (OnClassCondition)\n\n   RepositoryRestMvcAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.data.rest.webmvc.config.RepositoryRestMvcConfiguration (OnClassCondition)\n\n   SecurityAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.security.authentication.AuthenticationManager,org.springframework.security.config.annotation.authentication.configurers.GlobalAuthenticationConfigurerAdapter (OnClassCondition)\n\n   SecurityFilterAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.security.web.context.AbstractSecurityWebApplicationInitializer,org.springframework.security.config.http.SessionCreationPolicy (OnClassCondition)\n\n   SendGridAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: com.sendgrid.SendGrid (OnClassCondition)\n\n   ServerPropertiesAutoConfiguration did not match\n      - not a web application (OnWebApplicationCondition)\n\n   SessionAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.session.Session (OnClassCondition)\n\n   SitePreferenceAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.mobile.device.site.SitePreferenceHandlerInterceptor,org.springframework.mobile.device.site.SitePreferenceHandlerMethodArgumentResolver (OnClassCondition)\n\n   SocialWebAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.social.connect.web.ConnectController,org.springframework.social.config.annotation.SocialConfigurerAdapter (OnClassCondition)\n\n   SolrAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.apache.solr.client.solrj.impl.HttpSolrServer,org.apache.solr.client.solrj.impl.CloudSolrServer,org.apache.solr.common.cloud.HashPartitioner (OnClassCondition)\n\n   SolrRepositoriesAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.apache.solr.client.solrj.SolrServer,org.springframework.data.solr.repository.SolrRepository (OnClassCondition)\n\n   SpringApplicationAdminJmxAutoConfiguration did not match\n      - @ConditionalOnProperty missing required properties spring.application.admin.enabled  (OnPropertyCondition)\n\n   SpringDataWebAutoConfiguration did not match\n      - @ConditionalOnClass classes found: org.springframework.data.web.PageableHandlerMethodArgumentResolver,org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter (OnClassCondition)\n      - not a web application (OnWebApplicationCondition)\n\n   ThymeleafAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.thymeleaf.spring4.SpringTemplateEngine (OnClassCondition)\n\n   TwitterAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.social.config.annotation.SocialConfigurerAdapter,org.springframework.social.twitter.connect.TwitterConnectionFactory (OnClassCondition)\n\n   VelocityAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.apache.velocity.app.VelocityEngine,org.springframework.ui.velocity.VelocityEngineFactory (OnClassCondition)\n\n   WebMvcAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: javax.servlet.Servlet,org.springframework.web.servlet.DispatcherServlet (OnClassCondition)\n\n   WebSocketAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: javax.servlet.Servlet,javax.websocket.server.ServerContainer (OnClassCondition)\n\n   WebSocketMessagingAutoConfiguration did not match\n      - required @ConditionalOnClass classes not found: org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer (OnClassCondition)\n\n   XADataSourceAutoConfiguration did not match\n      - @ConditionalOnClass classes found: javax.sql.DataSource,javax.transaction.TransactionManager,org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseType (OnClassCondition)\n      - @ConditionalOnBean (types: org.springframework.boot.jta.XADataSourceWrapper; SearchStrategy: all) found no beans (OnBeanCondition)\n\n\nExclusions:\n-----------\n\n    None\n\n\nUnconditional classes:\n----------------------\n\n   org.springframework.boot.autoconfigure.PropertyPlaceholderAutoConfiguration\n\n   org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration\n\n\n\n2016-03-25 23:43:50.761  INFO 18169 --- [           main] o.i.InternetMovieDatabaseApplication     : Started InternetMovieDatabaseApplication in 11.476 seconds (JVM running for 14.426)\n2016-03-25 23:43:50.774  INFO 18169 --- [       Thread-2] s.c.a.AnnotationConfigApplicationContext : Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@3738449f: startup date [Fri Mar 25 23:43:41 EET 2016]; root of context hierarchy\n2016-03-25 23:43:50.789  INFO 18169 --- [       Thread-2] o.s.j.e.a.AnnotationMBeanExporter        : Unregistering JMX-exposed beans on shutdown\n2016-03-25 23:43:50.790  INFO 18169 --- [       Thread-2] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\nDisconnected from the target VM, address: '127.0.0.1:40745', transport: 'socket'\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>I try to start but after those outputs, it shuts down. I used spring initializr. I just want to make a small REST API.</p>\n\n<p>This is my <code>pom.xml</code>:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.infoowl&lt;/groupId&gt;\n    &lt;artifactId&gt;internetmoviedatabase&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;name&gt;InternetMovieDatabase&lt;/name&gt;\n    &lt;description&gt;Internet Movie Database Application&lt;/description&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.3.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n\n&lt;/project&gt;\n</code></pre>\n\n<p>this is <code>application.properteis</code>:</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/movies\nspring.datasource.username=root\nspring.datasource.password=\nspring.jpa.hibernate.ddl-auto=update\nserver.port=8181\nspring.jpa.database=MYSQL\nspring.jpa.show-sql=true\n</code></pre>\n\n<p><code>InternetMovieDatabaseApplication</code> class:</p>\n\n<pre><code>package org.infoowl;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class InternetMovieDatabaseApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(InternetMovieDatabaseApplication.class, args);\n    }\n}\n</code></pre>\n\n<p><code>ServletInitializer</code> class:</p>\n\n<pre><code>package org.infoowl;\n\nimport org.springframework.boot.builder.SpringApplicationBuilder;\nimport org.springframework.boot.context.web.SpringBootServletInitializer;\n\npublic class ServletInitializer extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        return application.sources(InternetMovieDatabaseApplication.class);\n    }\n\n}\n</code></pre>\n\n<p>These are the errors if i delete <code>ServletInitializer</code>:</p>\n\n<pre><code>2016-03-26 00:20:22.691 ERROR 20251 --- [           main] o.s.boot.SpringApplication               : Application startup failed\n\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [org.infoowl.InternetMovieDatabaseApplication]; nested exception is java.lang.IllegalStateException: Failed to introspect annotated methods on class org.springframework.boot.context.web.SpringBootServletInitializer\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(Configurplication.java:1191) [spring-boot-1.3.3.RELEASE.jar:1.3.3.RELEASE]\n    at o\nCaused by: java.lang.IllegalStateException: Failed to introspect annotated methods on class org.springframework.boot.context.web.SpringBootServletInitializer\n    at org.springframework.core.type.StandardAnnotationMetadata.getAnnotatedMethods(StandardAnnotationMetadata.java:163) ~[spring-core-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:292) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:232) ~[spring-context-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    at E.jar:4.2.5.RELEASE]\n    ... 12 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: javax/servlet/ServletContext\n    at java.lang.Class.getDeclaredMethods0(Native Method) ~[na:1.8.0_74]\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2701) ~[na:1.8.0_74]\n    at java.lang.Class.getDeclaredMethods(Class.java:1975) ~[na:1.8.0_74]\n    at org.springframework.core.type.StandardAnnotationMetadata.getAnnotatedMethods(StandardAnnotationMetadata.java:152) ~[spring-core-4.2.5.RELEASE.jar:4.2.5.RELEASE]\n    ... 16 common frames omitted\nCaused by: java.lang.ClassNotFoundException: javax.servlet.ServletContext\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.IU-144.4199.23/lib/idea_rt.jar]\nDisconnected from the target VM, address: '127.0.0.1:42011', transport: 'socket'\n\nProcess finished with exit code 1\n</code></pre>\n"},{"tags":["java","arrays","spring","spring-boot"],"comments":[{"owner":{"account_id":7380656,"reputation":1500,"user_id":5617485,"display_name":"tsamridh86"},"score":0,"creation_date":1638976143,"post_id":70277116,"comment_id":124230817,"body_markdown":"what have you tried so far?","body":"what have you tried so far?"},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1638976256,"post_id":70277116,"comment_id":124230860,"body_markdown":"Hint `HashMap&lt;K,V&gt;` is for removing duplicate id","body":"Hint <code>HashMap&lt;K,V&gt;</code> is for removing duplicate id"},{"owner":{"account_id":22965605,"reputation":29,"user_id":17094703,"display_name":"JavaGuy"},"score":0,"creation_date":1638976265,"post_id":70277116,"comment_id":124230863,"body_markdown":"adding all the elements of itemIds and making in single","body":"adding all the elements of itemIds and making in single"}],"answers":[{"tags":[],"owner":{"account_id":6835692,"reputation":33,"user_id":5257786,"display_name":"Chase"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638980308,"creation_date":1638979916,"answer_id":70278194,"question_id":70277116,"body_markdown":"Here would be a not perfect example of how to do this. Maybe you can improve this solution to your liking. For simplicity it uses an inner class and exposed fields. I&#39;m sure you will avoid doing this :)\r\nIt uses a custom aggregating operator and the reduce method of streams (see [java stream reduce tutorial][1] or [java stream reduce doc][2])\r\n\r\n    private static BinaryOperator&lt;Item&gt; itemAggregator = (aggregatedResult, nextElement) -&gt; {\r\n        aggregatedResult.data += nextElement.data;\r\n        aggregatedResult.dataValue += nextElement.dataValue;\r\n        return aggregatedResult;\r\n    };\r\n\r\n    public static void something(List&lt;Item&gt; initialItemList) {\r\n        Set&lt;String&gt; uniqueItemIds = initialItemList.stream()\r\n                .map(item -&gt; item.itemId)\r\n                .collect(Collectors.toSet());\r\n\r\n        List&lt;Item&gt; resultList = uniqueItemIds.stream()\r\n                .map(itemId -&gt; new Item(0, 0, itemId))\r\n                .collect(Collectors.toList());\r\n\r\n        resultList.forEach(\r\n                resultItem -&gt; {\r\n                    initialItemList.stream()\r\n                            .filter(item -&gt; item.itemId.equals(resultItem.itemId))\r\n                            .reduce(resultItem, itemAggregator);\r\n        });\r\n    }\r\n    \r\n    static class Item {\r\n        public int data;\r\n        public int dataValue;\r\n        public String itemId;\r\n\r\n        public Item(int data, int dataValue, String itemId) {\r\n            this.data = data;\r\n            this.dataValue = dataValue;\r\n            this.itemId = itemId;\r\n        }\r\n    }\r\n\r\nBut be aware, that using the reduce method can easily be done wrong (see [avoid reduce if possible][3]) and you have to check if it makes sense in your context.\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-stream-reduce\r\n  [2]: https://docs.oracle.com/javase/tutorial/collections/streams/reduction.html\r\n  [3]: https://dev.java/learn/adding-a-terminal-operation-on-a-stream/","title":"How to add particular ids object from list using Java?","body":"<p>Here would be a not perfect example of how to do this. Maybe you can improve this solution to your liking. For simplicity it uses an inner class and exposed fields. I'm sure you will avoid doing this :)\nIt uses a custom aggregating operator and the reduce method of streams (see <a href=\"https://www.baeldung.com/java-stream-reduce\" rel=\"nofollow noreferrer\">java stream reduce tutorial</a> or <a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/reduction.html\" rel=\"nofollow noreferrer\">java stream reduce doc</a>)</p>\n<pre><code>private static BinaryOperator&lt;Item&gt; itemAggregator = (aggregatedResult, nextElement) -&gt; {\n    aggregatedResult.data += nextElement.data;\n    aggregatedResult.dataValue += nextElement.dataValue;\n    return aggregatedResult;\n};\n\npublic static void something(List&lt;Item&gt; initialItemList) {\n    Set&lt;String&gt; uniqueItemIds = initialItemList.stream()\n            .map(item -&gt; item.itemId)\n            .collect(Collectors.toSet());\n\n    List&lt;Item&gt; resultList = uniqueItemIds.stream()\n            .map(itemId -&gt; new Item(0, 0, itemId))\n            .collect(Collectors.toList());\n\n    resultList.forEach(\n            resultItem -&gt; {\n                initialItemList.stream()\n                        .filter(item -&gt; item.itemId.equals(resultItem.itemId))\n                        .reduce(resultItem, itemAggregator);\n    });\n}\n\nstatic class Item {\n    public int data;\n    public int dataValue;\n    public String itemId;\n\n    public Item(int data, int dataValue, String itemId) {\n        this.data = data;\n        this.dataValue = dataValue;\n        this.itemId = itemId;\n    }\n}\n</code></pre>\n<p>But be aware, that using the reduce method can easily be done wrong (see <a href=\"https://dev.java/learn/adding-a-terminal-operation-on-a-stream/\" rel=\"nofollow noreferrer\">avoid reduce if possible</a>) and you have to check if it makes sense in your context.</p>\n"},{"tags":[],"owner":{"account_id":20610155,"reputation":71,"user_id":15129534,"display_name":"ms_ns"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1638980193,"creation_date":1638980193,"answer_id":70278252,"question_id":70277116,"body_markdown":"You could do something like this\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class ListElement {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tList&lt;ListElement&gt; elements = new ArrayList&lt;ListElement&gt;();\r\n    \t\telements.add(new ListElement(210, 100, &quot;60e53dee7a814f0001de3538&quot;));\r\n    \t\telements.add(new ListElement(220, 120, &quot;60e53dee7a814f0001de3538&quot;));\r\n    \t\telements.add(new ListElement(110, 130, &quot;60e53dee7a814f0001de3539&quot;));\r\n    \r\n    \t\tSystem.out.println(elements);\r\n    \r\n    \t\tMap&lt;String, List&lt;ListElement&gt;&gt; elementsByItemId = elements.stream() //\r\n    \t\t\t\t.collect(Collectors.groupingBy(ListElement::getItemId)); //\r\n    \r\n    \t\telements = elementsByItemId.entrySet().stream() //\r\n    \t\t\t\t.map(entry -&gt; new ListElement( //\r\n    \t\t\t\t\t\tentry.getValue().stream().collect(Collectors.summingInt(ListElement::getData)), //\r\n    \t\t\t\t\t\tentry.getValue().stream().collect(Collectors.summingInt(ListElement::getDataValue)), //\r\n    \t\t\t\t\t\tentry.getKey())) //\r\n    \t\t\t\t.collect(Collectors.toList());\r\n    \r\n    \t\tSystem.out.println(elements);\r\n    \t}\r\n    \r\n    \tint data;\r\n    \tint dataValue;\r\n    \tString itemId;\r\n    \r\n    \tpublic ListElement(int data, int dataValue, String itemId) {\r\n    \t\tthis.data = data;\r\n    \t\tthis.dataValue = dataValue;\r\n    \t\tthis.itemId = itemId;\r\n    \t}\r\n    \r\n    \tpublic int getData() {\r\n    \t\treturn data;\r\n    \t}\r\n    \r\n    \tpublic void setData(int data) {\r\n    \t\tthis.data = data;\r\n    \t}\r\n    \r\n    \tpublic int getDataValue() {\r\n    \t\treturn dataValue;\r\n    \t}\r\n    \r\n    \tpublic void setDataValue(int dataValue) {\r\n    \t\tthis.dataValue = dataValue;\r\n    \t}\r\n    \r\n    \tpublic String getItemId() {\r\n    \t\treturn itemId;\r\n    \t}\r\n    \r\n    \tpublic void setItemId(String itemId) {\r\n    \t\tthis.itemId = itemId;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;ListElement [data=&quot; + data + &quot;, dataValue=&quot; + dataValue + &quot;, itemId=&quot; + itemId + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to add particular ids object from list using Java?","body":"<p>You could do something like this</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\npublic class ListElement {\n\n    public static void main(String[] args) {\n        List&lt;ListElement&gt; elements = new ArrayList&lt;ListElement&gt;();\n        elements.add(new ListElement(210, 100, &quot;60e53dee7a814f0001de3538&quot;));\n        elements.add(new ListElement(220, 120, &quot;60e53dee7a814f0001de3538&quot;));\n        elements.add(new ListElement(110, 130, &quot;60e53dee7a814f0001de3539&quot;));\n\n        System.out.println(elements);\n\n        Map&lt;String, List&lt;ListElement&gt;&gt; elementsByItemId = elements.stream() //\n                .collect(Collectors.groupingBy(ListElement::getItemId)); //\n\n        elements = elementsByItemId.entrySet().stream() //\n                .map(entry -&gt; new ListElement( //\n                        entry.getValue().stream().collect(Collectors.summingInt(ListElement::getData)), //\n                        entry.getValue().stream().collect(Collectors.summingInt(ListElement::getDataValue)), //\n                        entry.getKey())) //\n                .collect(Collectors.toList());\n\n        System.out.println(elements);\n    }\n\n    int data;\n    int dataValue;\n    String itemId;\n\n    public ListElement(int data, int dataValue, String itemId) {\n        this.data = data;\n        this.dataValue = dataValue;\n        this.itemId = itemId;\n    }\n\n    public int getData() {\n        return data;\n    }\n\n    public void setData(int data) {\n        this.data = data;\n    }\n\n    public int getDataValue() {\n        return dataValue;\n    }\n\n    public void setDataValue(int dataValue) {\n        this.dataValue = dataValue;\n    }\n\n    public String getItemId() {\n        return itemId;\n    }\n\n    public void setItemId(String itemId) {\n        this.itemId = itemId;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;ListElement [data=&quot; + data + &quot;, dataValue=&quot; + dataValue + &quot;, itemId=&quot; + itemId + &quot;]&quot;;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":22965605,"reputation":29,"user_id":17094703,"display_name":"JavaGuy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":329,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":70278252,"answer_count":2,"score":-2,"last_activity_date":1639067118,"creation_date":1638975605,"question_id":70277116,"body_markdown":"This is my list which is coming in response now I have to add the objects belonging to particular itemIds using Java  ,\r\n\r\n    [\r\n        {\r\n            &quot;data&quot;: 210,\r\n            &quot;dataValue&quot;:100,\r\n            &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3538&quot;\r\n        },\r\n        {\r\n            &quot;data&quot;: 220,\r\n             &quot;dataValue&quot;:120,\r\n            &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3538&quot;\r\n        },\r\n        {\r\n           &quot;data&quot;: 110,\r\n            &quot;dataValue&quot;:130,\r\n            &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3539&quot;\r\n        }\r\n    ]\r\n\r\n\r\nOuput Required  -&gt;\r\n\r\n    [\r\n        {\r\n            &quot;data&quot;: 430,\r\n             &quot;Values&quot;:100,\r\n            &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3538&quot;\r\n        },\r\n        {\r\n           &quot;data&quot;: 110,\r\n            &quot;dataValue&quot;:130,\r\n            &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3539&quot;\r\n        }\r\n    ]","title":"How to add particular ids object from list using Java?","body":"<p>This is my list which is coming in response now I have to add the objects belonging to particular itemIds using Java  ,</p>\n<pre><code>[\n    {\n        &quot;data&quot;: 210,\n        &quot;dataValue&quot;:100,\n        &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3538&quot;\n    },\n    {\n        &quot;data&quot;: 220,\n         &quot;dataValue&quot;:120,\n        &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3538&quot;\n    },\n    {\n       &quot;data&quot;: 110,\n        &quot;dataValue&quot;:130,\n        &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3539&quot;\n    }\n]\n</code></pre>\n<p>Ouput Required  -&gt;</p>\n<pre><code>[\n    {\n        &quot;data&quot;: 430,\n         &quot;Values&quot;:100,\n        &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3538&quot;\n    },\n    {\n       &quot;data&quot;: 110,\n        &quot;dataValue&quot;:130,\n        &quot;itemIds&quot;: &quot;60e53dee7a814f0001de3539&quot;\n    }\n]\n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver"],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639055204,"creation_date":1639055204,"answer_id":70290450,"question_id":70290201,"body_markdown":"You can locate elements by XPath or by CSS Selector based on any combination of any attributes. Also it can contain dependency to some parent element(s).  \r\nFor example if your buttons HTMLs are looking like this:   \r\n```\r\n&lt;button class=&quot;button&quot; href=&quot;link1&quot;&gt;\r\n&lt;button class=&quot;button&quot; href=&quot;link2&quot;&gt;\r\n&lt;button class=&quot;button&quot; href=&quot;link3&quot;&gt;\r\n```\r\nYou can use the following XPaths\r\n```\r\n//button[@hef=&#39;link1&#39;]\r\n//button[@hef=&#39;link2&#39;]\r\n//button[@hef=&#39;link3&#39;]\r\n```\r\nOr CSS selectors\r\n```\r\nbutton[href=&#39;link1&#39;]\r\nbutton[href=&#39;link2&#39;]\r\nbutton[href=&#39;link3&#39;]\r\n```\r\nIn case the `href` attribute values are very long or partially changing you still can create locators based or partially values, like the following  \r\nXPaths\r\n```\r\n//button[contains(@hef,&#39;link1&#39;)]\r\n//button[contains(@hef,&#39;link2&#39;)]\r\n//button[contains(@hef,&#39;link3&#39;)]\r\n```\r\nOr CSS selectors\r\n```\r\nbutton[href*=&#39;link1&#39;]\r\nbutton[href*=&#39;link2&#39;]\r\nbutton[href*=&#39;link3&#39;]\r\n```\r\n","title":"[Java][Selenium] How do I find and send clicks to a button that has the same name as other buttons in the frontend","body":"<p>You can locate elements by XPath or by CSS Selector based on any combination of any attributes. Also it can contain dependency to some parent element(s).<br />\nFor example if your buttons HTMLs are looking like this:</p>\n<pre><code>&lt;button class=&quot;button&quot; href=&quot;link1&quot;&gt;\n&lt;button class=&quot;button&quot; href=&quot;link2&quot;&gt;\n&lt;button class=&quot;button&quot; href=&quot;link3&quot;&gt;\n</code></pre>\n<p>You can use the following XPaths</p>\n<pre><code>//button[@hef='link1']\n//button[@hef='link2']\n//button[@hef='link3']\n</code></pre>\n<p>Or CSS selectors</p>\n<pre><code>button[href='link1']\nbutton[href='link2']\nbutton[href='link3']\n</code></pre>\n<p>In case the <code>href</code> attribute values are very long or partially changing you still can create locators based or partially values, like the following<br />\nXPaths</p>\n<pre><code>//button[contains(@hef,'link1')]\n//button[contains(@hef,'link2')]\n//button[contains(@hef,'link3')]\n</code></pre>\n<p>Or CSS selectors</p>\n<pre><code>button[href*='link1']\nbutton[href*='link2']\nbutton[href*='link3']\n</code></pre>\n"}],"owner":{"account_id":23599024,"reputation":38,"user_id":17635802,"display_name":"Andrei Szekely"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70290450,"answer_count":1,"score":1,"last_activity_date":1639067087,"creation_date":1639054149,"question_id":70290201,"body_markdown":"I&#39;m currently working on a test suite and upon F12 and inspecting elements, I have several buttons that do not have id, have the same name, they are under the same class and the only thing different is the link to the page that they take you to.\r\n\r\nIs there any way I can tell my webdrive to pick my specific button based on the link/ahref of the button?\r\n\r\nIf the question seems to be newbie please excuse me, it&#39;s only been 3 weeks since I started writing test suites in Selenium.","title":"[Java][Selenium] How do I find and send clicks to a button that has the same name as other buttons in the frontend","body":"<p>I'm currently working on a test suite and upon F12 and inspecting elements, I have several buttons that do not have id, have the same name, they are under the same class and the only thing different is the link to the page that they take you to.</p>\n<p>Is there any way I can tell my webdrive to pick my specific button based on the link/ahref of the button?</p>\n<p>If the question seems to be newbie please excuse me, it's only been 3 weeks since I started writing test suites in Selenium.</p>\n"},{"tags":["java","database","performance"],"comments":[{"owner":{"account_id":1718670,"reputation":4778,"user_id":1575188,"display_name":"fantaghirocco"},"score":3,"creation_date":1639062177,"post_id":70291886,"comment_id":124256838,"body_markdown":"*To make this easy we load all the entries from our whole table (at the moment 120,000), create a class for every entry we get and put all of them into a Hashmap.* it seems easier to put the new records in one or more temporary table and let the DB do the job with some queries... isn&#39;t it?","body":"<i>To make this easy we load all the entries from our whole table (at the moment 120,000), create a class for every entry we get and put all of them into a Hashmap.</i> it seems easier to put the new records in one or more temporary table and let the DB do the job with some queries... isn&#39;t it?"},{"owner":{"account_id":15500158,"reputation":348,"user_id":11710180,"display_name":"Sir Beethoven"},"score":0,"creation_date":1639062199,"post_id":70291886,"comment_id":124256852,"body_markdown":"Not sure if I&#39;ve got it right, but are you creating an object for every register in your database table? If so, I&#39;d rather check each row individually, using a select, then deciding if I should insert or update the record, then moving on to the next. If not that, then the suggestion of @fantaghirocco, which is probably better.","body":"Not sure if I&#39;ve got it right, but are you creating an object for every register in your database table? If so, I&#39;d rather check each row individually, using a select, then deciding if I should insert or update the record, then moving on to the next. If not that, then the suggestion of @fantaghirocco, which is probably better."},{"owner":{"account_id":14331323,"reputation":23,"user_id":10351992,"display_name":"Smarties"},"score":0,"creation_date":1639064609,"post_id":70291886,"comment_id":124257917,"body_markdown":"@fantaghirocco That would make sense but every entry we get is an object of about 50KB. So storing it as a class takes less space overall","body":"@fantaghirocco That would make sense but every entry we get is an object of about 50KB. So storing it as a class takes less space overall"},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1639065387,"post_id":70291886,"comment_id":124258269,"body_markdown":"One cannot run SQL on objects (let alone the insane overhead in RAM).","body":"One cannot run SQL on objects (let alone the insane overhead in RAM)."},{"owner":{"account_id":87845,"reputation":15821,"user_id":243373,"accept_rate":100,"display_name":"TT."},"score":0,"creation_date":1639066916,"post_id":70291886,"comment_id":124258931,"body_markdown":"Hi Smarties. At some point you will realize that loading all data to your client application is not a good strategy, if you have a lot of data and the data takes up a lot of memory. Better to do pagination if you need to display them, or if the intention is to perform operations on them to do that in the database layer with queries or stored procedures.","body":"Hi Smarties. At some point you will realize that loading all data to your client application is not a good strategy, if you have a lot of data and the data takes up a lot of memory. Better to do pagination if you need to display them, or if the intention is to perform operations on them to do that in the database layer with queries or stored procedures."}],"answers":[{"tags":[],"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639067030,"creation_date":1639064458,"answer_id":70292666,"question_id":70291886,"body_markdown":"Loading 120,000 rows (and more) each time will not scale very well, and your solution may not work in the future as the record size grows. Instead let the database server handle the problem. \r\n\r\nYour table needs to have a primary key or unique key based on the columns of the records. Iterate through the 10,000 records performing JDBC SQL update to modify all field values with where clause to exactly match primary/unique key. \r\n\r\n    update BLAH set COL1 = ?, COL2 = ? where PKCOL = ?; // ... AND PKCOL2 =? ...\r\n\r\nThis modifies an existing row or does nothing at all - and JDBC `executeUpate()` will return 0 or 1 indicating number of rows changed. If number of rows changed was zero you have detected a new record which does not exist, so perform insert for that new record only.\r\n\r\n    insert into BLAH (COL1, COL2, ... PKCOL) values (?,?, ..., ?);\r\n\r\nYou can decide whether to run 10,000 updates followed by however many inserts are needed, or do update+optional insert, and remember JDBC batch statements / auto-commit off may help speed things up.","title":"Improve performance of loading 100,000 records from database","body":"<p>Loading 120,000 rows (and more) each time will not scale very well, and your solution may not work in the future as the record size grows. Instead let the database server handle the problem.</p>\n<p>Your table needs to have a primary key or unique key based on the columns of the records. Iterate through the 10,000 records performing JDBC SQL update to modify all field values with where clause to exactly match primary/unique key.</p>\n<pre><code>update BLAH set COL1 = ?, COL2 = ? where PKCOL = ?; // ... AND PKCOL2 =? ...\n</code></pre>\n<p>This modifies an existing row or does nothing at all - and JDBC <code>executeUpate()</code> will return 0 or 1 indicating number of rows changed. If number of rows changed was zero you have detected a new record which does not exist, so perform insert for that new record only.</p>\n<pre><code>insert into BLAH (COL1, COL2, ... PKCOL) values (?,?, ..., ?);\n</code></pre>\n<p>You can decide whether to run 10,000 updates followed by however many inserts are needed, or do update+optional insert, and remember JDBC batch statements / auto-commit off may help speed things up.</p>\n"}],"owner":{"account_id":14331323,"reputation":23,"user_id":10351992,"display_name":"Smarties"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":883,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70292666,"answer_count":1,"score":0,"last_activity_date":1639067030,"creation_date":1639061269,"question_id":70291886,"body_markdown":"We created a program to make the use of the database easier in other programs. So the code im showing gets used in multiple other programs.\r\n\r\nOne of those other programs gets about 10,000 records from one of our clients and has to check if these are in our database already. If not we insert them into the database (they can also change and have to be updated then).\r\n\r\nTo make this easy we load all the entries from our whole table (at the moment 120,000), create a class for every entry we get and put all of them into a Hashmap.\r\n\r\nThe loading of the whole table this way takes around 5 minutes. Also we sometimes have to restart the program because we run into a GC overhead error because we work on limited hardware. Do you have an idea of how we can improve the performance?\r\n\r\nHere is the code to load all entries (we have a global limit of 10.000 entries per query so we use a loop):\r\n\r\n    public Map&lt;String, IMasterDataSet&gt; getAllInformationObjects(ISession session) throws MasterDataException {\r\n        IQueryExpression qe;\r\n        IQueryParameter qp;\r\n        \r\n        // our main SDP class\r\n        Constructor&lt;?&gt; constructorForSDPbaseClass = getStandardConstructor();\r\n        \r\n        SimpleDateFormat itaTimestampFormat = new SimpleDateFormat(&quot;yyyyMMddHHmmssSSS&quot;);\r\n        \r\n        // search in standard time range (modification date!)\r\n        Calendar cal = Calendar.getInstance();\r\n        cal.set(2010, Calendar.JANUARY, 1);\r\n        Date startDate = cal.getTime();\r\n        Date endDate = new Date();\r\n        Long startDateL = Long.parseLong(itaTimestampFormat.format(startDate));\r\n        Long endDateL = Long.parseLong(itaTimestampFormat.format(endDate));\r\n\r\n        IDescriptor modDesc = IBVRIDescriptor.ModificationDate.getDescriptor(session);\r\n\r\n        // count once before to determine initial capacities for hash map/set\r\n        IBVRIArchiveClass SDP_ARCHIVECLASS = getMasterDataPropertyBag().getSDP_ARCHIVECLASS();\r\n        qe = SDP_ARCHIVECLASS.getQueryExpression(session);\r\n        qp = session.getDocumentServer().getClassFactory()\r\n                .getQueryParameterInstance(session, new String[] {SDP_ARCHIVECLASS.getDatabaseName(session)}, null, null);        \r\n        qp.setExpression(qe);  \r\n        qp.setHitLimitThreshold(0);\r\n        qp.setHitLimit(0);\r\n        int nrOfHitsTotal = session.getDocumentServer().queryCount(session, qp, &quot;*&quot;);\r\n        int initialCapacity = (int) (nrOfHitsTotal / 0.75 + 1);\r\n\r\n        // MD sets; and objects already done (here: document ID)\r\n        HashSet&lt;String&gt; objDone = new HashSet&lt;&gt;(initialCapacity); \r\n        HashMap&lt;String, IMasterDataSet&gt; objRes = new HashMap&lt;&gt;(initialCapacity); \r\n        \r\n        qp.close();\r\n        \r\n        // do queries until hit count is smaller than 10.000\r\n        // use modification date\r\n        \r\n        boolean keepGoing = true;\r\n        while(keepGoing) {\r\n            // construct query expression\r\n            // - basic part: Modification date &amp; class type\r\n            // a. doc. class type\r\n            qe = SDP_ARCHIVECLASS.getQueryExpression(session);\r\n            // b. ID\r\n            qe = SearchUtil.appendQueryExpressionWithANDoperator(session, qe, \r\n                       new PlainExpression(modDesc.getQueryLiteral() + &quot; BETWEEN &quot; + startDateL + &quot; AND &quot; + endDateL));\r\n            \r\n            // 2. Query Parameter: set database; set expression\r\n            qp = session.getDocumentServer().getClassFactory()\r\n                    .getQueryParameterInstance(session, new String[] {SDP_ARCHIVECLASS.getDatabaseName(session)}, null, null);\r\n            \r\n            qp.setExpression(qe);  \r\n            \r\n            // order by modification date; hitlimit = 0 -&gt; no hitlimit, but the usual 10.000 max\r\n            qp.setOrderByExpression(session.getDocumentServer().getClassFactory().getOrderByExpressionInstance(modDesc, true));\r\n            qp.setHitLimitThreshold(0);\r\n            qp.setHitLimit(0);\r\n\r\n            // Do not sort by modification date;\r\n            qp.setHints(&quot;+NoDefaultOrderBy&quot;);\r\n            \r\n            keepGoing = false;\r\n            IInformationObject[] hits = null;\r\n            IDocumentHitList hitList = null;\r\n            hitList = session.getDocumentServer().query(qp, session);\r\n            IDocument doc;\r\n            if (hitList.getTotalHitCount() &gt; 0) {\r\n                hits = hitList.getInformationObjects();\r\n                for (IInformationObject hit : hits) {\r\n                    String objID = hit.getID();\r\n                    if(!objDone.contains(objID)) {\r\n                        // do something with this object and the class\r\n                        // here: construct a new SDP sub class object and give it back via interface\r\n                        doc = (IDocument) hit;\r\n                        IMasterDataSet mdSet;\r\n                        try {\r\n                            mdSet = (IMasterDataSet) constructorForSDPbaseClass.newInstance(session, doc);\r\n                        } catch (Exception e) {\r\n                            // cause for this\r\n                            String cause = (e.getCause() != null) ? e.getCause().toString() : MasterDataException.ERRMSG_PART_UNKNOWN;                            \r\n                            throw new MasterDataException(MasterDataException.ERRMSG_NOINSTANCE_POSSIBLE, this.getClass().getSimpleName(), e.toString(), cause);\r\n                        }                        \r\n                        objRes.put(mdSet.getID(), mdSet);\r\n                        objDone.add(objID);\r\n                    }                       \r\n                }\r\n                doc = (IDocument) hits[hits.length - 1];\r\n                Date lastModDate = ((IDateValue) doc.getDescriptor(modDesc).getValues()[0]).getValue();\r\n                startDateL = Long.parseLong(itaTimestampFormat.format(lastModDate));\r\n            \r\n                keepGoing = (hits.length &gt;= 10000 || hitList.isResultSetTruncated());\r\n            }\r\n            qp.close();\r\n        }   \r\n        return objRes;\r\n    }","title":"Improve performance of loading 100,000 records from database","body":"<p>We created a program to make the use of the database easier in other programs. So the code im showing gets used in multiple other programs.</p>\n<p>One of those other programs gets about 10,000 records from one of our clients and has to check if these are in our database already. If not we insert them into the database (they can also change and have to be updated then).</p>\n<p>To make this easy we load all the entries from our whole table (at the moment 120,000), create a class for every entry we get and put all of them into a Hashmap.</p>\n<p>The loading of the whole table this way takes around 5 minutes. Also we sometimes have to restart the program because we run into a GC overhead error because we work on limited hardware. Do you have an idea of how we can improve the performance?</p>\n<p>Here is the code to load all entries (we have a global limit of 10.000 entries per query so we use a loop):</p>\n<pre><code>public Map&lt;String, IMasterDataSet&gt; getAllInformationObjects(ISession session) throws MasterDataException {\n    IQueryExpression qe;\n    IQueryParameter qp;\n    \n    // our main SDP class\n    Constructor&lt;?&gt; constructorForSDPbaseClass = getStandardConstructor();\n    \n    SimpleDateFormat itaTimestampFormat = new SimpleDateFormat(&quot;yyyyMMddHHmmssSSS&quot;);\n    \n    // search in standard time range (modification date!)\n    Calendar cal = Calendar.getInstance();\n    cal.set(2010, Calendar.JANUARY, 1);\n    Date startDate = cal.getTime();\n    Date endDate = new Date();\n    Long startDateL = Long.parseLong(itaTimestampFormat.format(startDate));\n    Long endDateL = Long.parseLong(itaTimestampFormat.format(endDate));\n\n    IDescriptor modDesc = IBVRIDescriptor.ModificationDate.getDescriptor(session);\n\n    // count once before to determine initial capacities for hash map/set\n    IBVRIArchiveClass SDP_ARCHIVECLASS = getMasterDataPropertyBag().getSDP_ARCHIVECLASS();\n    qe = SDP_ARCHIVECLASS.getQueryExpression(session);\n    qp = session.getDocumentServer().getClassFactory()\n            .getQueryParameterInstance(session, new String[] {SDP_ARCHIVECLASS.getDatabaseName(session)}, null, null);        \n    qp.setExpression(qe);  \n    qp.setHitLimitThreshold(0);\n    qp.setHitLimit(0);\n    int nrOfHitsTotal = session.getDocumentServer().queryCount(session, qp, &quot;*&quot;);\n    int initialCapacity = (int) (nrOfHitsTotal / 0.75 + 1);\n\n    // MD sets; and objects already done (here: document ID)\n    HashSet&lt;String&gt; objDone = new HashSet&lt;&gt;(initialCapacity); \n    HashMap&lt;String, IMasterDataSet&gt; objRes = new HashMap&lt;&gt;(initialCapacity); \n    \n    qp.close();\n    \n    // do queries until hit count is smaller than 10.000\n    // use modification date\n    \n    boolean keepGoing = true;\n    while(keepGoing) {\n        // construct query expression\n        // - basic part: Modification date &amp; class type\n        // a. doc. class type\n        qe = SDP_ARCHIVECLASS.getQueryExpression(session);\n        // b. ID\n        qe = SearchUtil.appendQueryExpressionWithANDoperator(session, qe, \n                   new PlainExpression(modDesc.getQueryLiteral() + &quot; BETWEEN &quot; + startDateL + &quot; AND &quot; + endDateL));\n        \n        // 2. Query Parameter: set database; set expression\n        qp = session.getDocumentServer().getClassFactory()\n                .getQueryParameterInstance(session, new String[] {SDP_ARCHIVECLASS.getDatabaseName(session)}, null, null);\n        \n        qp.setExpression(qe);  \n        \n        // order by modification date; hitlimit = 0 -&gt; no hitlimit, but the usual 10.000 max\n        qp.setOrderByExpression(session.getDocumentServer().getClassFactory().getOrderByExpressionInstance(modDesc, true));\n        qp.setHitLimitThreshold(0);\n        qp.setHitLimit(0);\n\n        // Do not sort by modification date;\n        qp.setHints(&quot;+NoDefaultOrderBy&quot;);\n        \n        keepGoing = false;\n        IInformationObject[] hits = null;\n        IDocumentHitList hitList = null;\n        hitList = session.getDocumentServer().query(qp, session);\n        IDocument doc;\n        if (hitList.getTotalHitCount() &gt; 0) {\n            hits = hitList.getInformationObjects();\n            for (IInformationObject hit : hits) {\n                String objID = hit.getID();\n                if(!objDone.contains(objID)) {\n                    // do something with this object and the class\n                    // here: construct a new SDP sub class object and give it back via interface\n                    doc = (IDocument) hit;\n                    IMasterDataSet mdSet;\n                    try {\n                        mdSet = (IMasterDataSet) constructorForSDPbaseClass.newInstance(session, doc);\n                    } catch (Exception e) {\n                        // cause for this\n                        String cause = (e.getCause() != null) ? e.getCause().toString() : MasterDataException.ERRMSG_PART_UNKNOWN;                            \n                        throw new MasterDataException(MasterDataException.ERRMSG_NOINSTANCE_POSSIBLE, this.getClass().getSimpleName(), e.toString(), cause);\n                    }                        \n                    objRes.put(mdSet.getID(), mdSet);\n                    objDone.add(objID);\n                }                       \n            }\n            doc = (IDocument) hits[hits.length - 1];\n            Date lastModDate = ((IDateValue) doc.getDescriptor(modDesc).getValues()[0]).getValue();\n            startDateL = Long.parseLong(itaTimestampFormat.format(lastModDate));\n        \n            keepGoing = (hits.length &gt;= 10000 || hitList.isResultSetTruncated());\n        }\n        qp.close();\n    }   \n    return objRes;\n}\n</code></pre>\n"},{"tags":["java","oop","generics"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":0,"creation_date":1639065051,"post_id":70292775,"comment_id":124258109,"body_markdown":"You use a different kind of loop.  The enhanced for loop hides its iterator from you, so you can&#39;t reset it.","body":"You use a different kind of loop.  The enhanced for loop hides its iterator from you, so you can&#39;t reset it."},{"owner":{"account_id":15826974,"reputation":113,"user_id":11419537,"display_name":"noor napso"},"score":0,"creation_date":1639065137,"post_id":70292775,"comment_id":124258149,"body_markdown":"@azurefrog How can i translate the loop to a one with i counter?","body":"@azurefrog How can i translate the loop to a one with i counter?"}],"answers":[{"tags":[],"owner":{"account_id":20610155,"reputation":71,"user_id":15129534,"display_name":"ms_ns"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1639066730,"creation_date":1639066730,"answer_id":70293223,"question_id":70292775,"body_markdown":"Is this what you want to accomplish?\r\n\r\n    import java.util.Set;\r\n    \r\n    public class City {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tInteger[] arr = { 50_000, 100_000, 200_000 };\r\n    \t\tSet&lt;City&gt; cityList = Set.of( //\r\n    \t\t\t\tnew City(100_000, &quot;city1&quot;, &quot;country1&quot;, &quot;area1&quot;), //\r\n    \t\t\t\tnew City(200_000, &quot;city2&quot;, &quot;country2&quot;, &quot;area2&quot;), //\r\n    \t\t\t\tnew City(350_000, &quot;city3&quot;, &quot;country3&quot;, &quot;area3&quot;) //\r\n    \t\t);\r\n    \r\n    \t\touter: for (int i = 0; i &lt; arr.length; i++) {\r\n    \t\t\tfor (City city : cityList) {\r\n    \t\t\t\tif (city.getPopulation() == arr[i]) {\r\n    \t\t\t\t\tSystem.out.println(city.getName() + &quot;(&quot; + city.getCountry() + &quot;) population: &quot;\r\n    \t\t\t\t\t\t\t+ city.getPopulation() + &quot; area: &quot; + city.getArea());\r\n    \t\t\t\t\tcontinue outer;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate int population;\r\n    \tprivate String name;\r\n    \tprivate String country;\r\n    \tprivate String area;\r\n    \r\n    \tpublic City(int population, String name, String country, String area) {\r\n    \t\tthis.population = population;\r\n    \t\tthis.name = name;\r\n    \t\tthis.country = country;\r\n    \t\tthis.area = area;\r\n    \t}\r\n    \r\n    \tpublic int getPopulation() {\r\n    \t\treturn population;\r\n    \t}\r\n    \r\n    \tpublic void setPopulation(int population) {\r\n    \t\tthis.population = population;\r\n    \t}\r\n    \r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \r\n    \tpublic String getCountry() {\r\n    \t\treturn country;\r\n    \t}\r\n    \r\n    \tpublic void setCountry(String country) {\r\n    \t\tthis.country = country;\r\n    \t}\r\n    \r\n    \tpublic String getArea() {\r\n    \t\treturn area;\r\n    \t}\r\n    \r\n    \tpublic void setArea(String area) {\r\n    \t\tthis.area = area;\r\n    \t}\r\n    \r\n    }\r\n\r\nWhen nesting loops you can add a label to them (https://www.tutorialspoint.com/break-continue-and-label-in-Java-loop)","title":"How do i reset Object loop &quot;counter&quot;?","body":"<p>Is this what you want to accomplish?</p>\n<pre><code>import java.util.Set;\n\npublic class City {\n\n    public static void main(String[] args) {\n        Integer[] arr = { 50_000, 100_000, 200_000 };\n        Set&lt;City&gt; cityList = Set.of( //\n                new City(100_000, &quot;city1&quot;, &quot;country1&quot;, &quot;area1&quot;), //\n                new City(200_000, &quot;city2&quot;, &quot;country2&quot;, &quot;area2&quot;), //\n                new City(350_000, &quot;city3&quot;, &quot;country3&quot;, &quot;area3&quot;) //\n        );\n\n        outer: for (int i = 0; i &lt; arr.length; i++) {\n            for (City city : cityList) {\n                if (city.getPopulation() == arr[i]) {\n                    System.out.println(city.getName() + &quot;(&quot; + city.getCountry() + &quot;) population: &quot;\n                            + city.getPopulation() + &quot; area: &quot; + city.getArea());\n                    continue outer;\n                }\n            }\n        }\n    }\n\n    private int population;\n    private String name;\n    private String country;\n    private String area;\n\n    public City(int population, String name, String country, String area) {\n        this.population = population;\n        this.name = name;\n        this.country = country;\n        this.area = area;\n    }\n\n    public int getPopulation() {\n        return population;\n    }\n\n    public void setPopulation(int population) {\n        this.population = population;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getCountry() {\n        return country;\n    }\n\n    public void setCountry(String country) {\n        this.country = country;\n    }\n\n    public String getArea() {\n        return area;\n    }\n\n    public void setArea(String area) {\n        this.area = area;\n    }\n\n}\n</code></pre>\n<p>When nesting loops you can add a label to them (<a href=\"https://www.tutorialspoint.com/break-continue-and-label-in-Java-loop\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/break-continue-and-label-in-Java-loop</a>)</p>\n"}],"owner":{"account_id":15826974,"reputation":113,"user_id":11419537,"display_name":"noor napso"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70293223,"answer_count":1,"score":1,"last_activity_date":1639066730,"creation_date":1639064899,"question_id":70292775,"body_markdown":"How i can reset the &quot;city&quot; object and start the &quot;for&quot; statement from the start again after the &quot;if&quot; statement is true?\r\n```\r\nprivate SortedSet&lt;City&gt; cityList;\r\nfor(City city:this.cityList)\r\n\t\t{\r\n\t\t\tif(city.getPopulation()==arr[i])\r\n\t\t\t{\r\n\t\t\t\tSystem.out.printf(city.getName() + &quot;(&quot; + city.getCountry() + &quot;) population: &quot; + city.getPopulation() + &quot; area: &quot; + city.getArea());\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n```","title":"How do i reset Object loop &quot;counter&quot;?","body":"<p>How i can reset the &quot;city&quot; object and start the &quot;for&quot; statement from the start again after the &quot;if&quot; statement is true?</p>\n<pre><code>private SortedSet&lt;City&gt; cityList;\nfor(City city:this.cityList)\n        {\n            if(city.getPopulation()==arr[i])\n            {\n                System.out.printf(city.getName() + &quot;(&quot; + city.getCountry() + &quot;) population: &quot; + city.getPopulation() + &quot; area: &quot; + city.getArea());\n                i++;\n            }\n        }\n</code></pre>\n"},{"tags":["java","android","android-fragments","fragmentmanager"],"answers":[{"tags":[],"owner":{"account_id":13856254,"reputation":635,"user_id":10002974,"display_name":"Piyush Maheswari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1583947162,"creation_date":1583947162,"answer_id":60641362,"question_id":60641206,"body_markdown":"    FragmentManager fragmentManager = getSupportFragmentManager();\r\n    fragmentManager.beginTransaction()\r\n        .replace(R.id.artist_activity__albums_container, fragment)\r\n        .commit();\r\n\r\nI guess this is how it should ideally be called. You may check once.","title":"java.lang.IllegalStateException: FragmentManager has been destroyed","body":"<pre><code>FragmentManager fragmentManager = getSupportFragmentManager();\nfragmentManager.beginTransaction()\n    .replace(R.id.artist_activity__albums_container, fragment)\n    .commit();\n</code></pre>\n\n<p>I guess this is how it should ideally be called. You may check once.</p>\n"},{"tags":[],"owner":{"account_id":10204332,"reputation":144,"user_id":7533507,"display_name":"Shubam Virdi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1583950526,"creation_date":1583950526,"answer_id":60642246,"question_id":60641206,"body_markdown":"you need to check whether the activity is still running or it has finished\r\n\r\n    if(!isFinished()){\r\n     FragmentManager fragmentManager = getSupportFragmentManager();\r\n     fragmentManager.beginTransaction()\r\n    .replace(R.id.artist_activity__albums_container, fragment)\r\n    .commit();\r\n    \r\n     }\r\n\r\nthat function will get the boolean value from activity lifecycle functions. I think this will work for you!","title":"java.lang.IllegalStateException: FragmentManager has been destroyed","body":"<p>you need to check whether the activity is still running or it has finished</p>\n\n<pre><code>if(!isFinished()){\n FragmentManager fragmentManager = getSupportFragmentManager();\n fragmentManager.beginTransaction()\n.replace(R.id.artist_activity__albums_container, fragment)\n.commit();\n\n }\n</code></pre>\n\n<p>that function will get the boolean value from activity lifecycle functions. I think this will work for you!</p>\n"},{"tags":[],"owner":{"account_id":9747380,"reputation":303,"user_id":7226874,"display_name":"Sergey Roytman"},"down_vote_count":9,"up_vote_count":4,"is_accepted":false,"score":-5,"last_activity_date":1583961054,"creation_date":1583960137,"answer_id":60644329,"question_id":60641206,"body_markdown":"I totally didn&#39;t get why did it worked, but I&#39;ve solved the problem. I&#39;ve created static activity variable and initiate it with this in onCreate method:\r\n\r\n    private static ArtistActivity activity;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        ...\r\n        activity = this;\r\n        ...\r\n    }\r\n\r\n And I&#39;ve noticed that in method albumsFoundViewUpdate this.isDestroyed() returns true (when I relaunch this activity for second time) and activity.isDestroyed() returns false. So I&#39;ve remake albumsFoundViewUpdate like this:\r\n\r\n    public void albumsFoundViewUpdate(ArrayList&lt;UserAlbumLink&gt; links)\r\n    {\r\n        // Load list fragment\r\n        UserAlbumLinkListFragment fragment = new UserAlbumLinkListFragment(links, artist);\r\n        FragmentManager fragmentManager = activity.getSupportFragmentManager();\r\n        fragmentManager.beginTransaction().replace(R.id.artist_activity__albums_container, fragment).commit();\r\n    }\r\n\r\nand now it&#39;s working perfectly fine every time!","title":"java.lang.IllegalStateException: FragmentManager has been destroyed","body":"<p>I totally didn't get why did it worked, but I've solved the problem. I've created static activity variable and initiate it with this in onCreate method:</p>\n\n<pre><code>private static ArtistActivity activity;\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    ...\n    activity = this;\n    ...\n}\n</code></pre>\n\n<p>And I've noticed that in method albumsFoundViewUpdate this.isDestroyed() returns true (when I relaunch this activity for second time) and activity.isDestroyed() returns false. So I've remake albumsFoundViewUpdate like this:</p>\n\n<pre><code>public void albumsFoundViewUpdate(ArrayList&lt;UserAlbumLink&gt; links)\n{\n    // Load list fragment\n    UserAlbumLinkListFragment fragment = new UserAlbumLinkListFragment(links, artist);\n    FragmentManager fragmentManager = activity.getSupportFragmentManager();\n    fragmentManager.beginTransaction().replace(R.id.artist_activity__albums_container, fragment).commit();\n}\n</code></pre>\n\n<p>and now it's working perfectly fine every time!</p>\n"},{"tags":[],"owner":{"account_id":10993637,"reputation":1,"user_id":8076630,"display_name":"Prajna S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617958472,"creation_date":1617958472,"answer_id":67018032,"question_id":60641206,"body_markdown":"Check if the class related to Volley request is holding a reference to your activity. \r\nIf that is the case, by the time you relaunch your application, the old activity would have been destroyed but the request gives the callback to it which leads to the error - &quot;FragmentManager has been destroyed&quot;.\r\nIt is better to pass your activity as callback reference while calling the volley request functions and checking isFinishing() before acting on the request callback.","title":"java.lang.IllegalStateException: FragmentManager has been destroyed","body":"<p>Check if the class related to Volley request is holding a reference to your activity.\nIf that is the case, by the time you relaunch your application, the old activity would have been destroyed but the request gives the callback to it which leads to the error - &quot;FragmentManager has been destroyed&quot;.\nIt is better to pass your activity as callback reference while calling the volley request functions and checking isFinishing() before acting on the request callback.</p>\n"},{"tags":[],"owner":{"account_id":11194127,"reputation":393,"user_id":8213400,"accept_rate":50,"display_name":"lcpr_phoenix"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1639066424,"creation_date":1636412959,"answer_id":69890970,"question_id":60641206,"body_markdown":"This happens when you get the `FragmentManager` from an `Activity` that was destroyed, usually if you do `activity.getSupportFragmentManager();` from another class for example.\r\n\r\nIn your case, first check if the `FragmentManager` was not destroyed, then use it:\r\n\r\n    FragmentManager fragmentManager = getSupportFragmentManager();\r\n    \r\n    if (!fragmentManager.isDestroyed()) {\r\n        fragmentManager\r\n        .beginTransaction()\r\n        .replace(R.id.artist_activity__albums_container, fragment)\r\n        .commit();\r\n    }","title":"java.lang.IllegalStateException: FragmentManager has been destroyed","body":"<p>This happens when you get the <code>FragmentManager</code> from an <code>Activity</code> that was destroyed, usually if you do <code>activity.getSupportFragmentManager();</code> from another class for example.</p>\n<p>In your case, first check if the <code>FragmentManager</code> was not destroyed, then use it:</p>\n<pre><code>FragmentManager fragmentManager = getSupportFragmentManager();\n\nif (!fragmentManager.isDestroyed()) {\n    fragmentManager\n    .beginTransaction()\n    .replace(R.id.artist_activity__albums_container, fragment)\n    .commit();\n}\n</code></pre>\n"}],"owner":{"account_id":9747380,"reputation":303,"user_id":7226874,"display_name":"Sergey Roytman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19642,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":5,"score":18,"last_activity_date":1639066424,"creation_date":1583946502,"question_id":60641206,"body_markdown":"In activity `onResume` method I call volley request, which is getting list of items and then loads them to ListFragment inside this activity. When I enter activity for the first time everything is working correctly, but when I re-enter activity the ListFragment is empty and there is message in console &quot;FragmentManager has been destroyed&quot;.\r\n\r\nThis is my activity&#39;s code:\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        // Volley request inside - which call back albumsFoundViewUpdate\r\n        artistController.getArtistAlbums(artist);\r\n    }\r\n\r\n    public void albumsFoundViewUpdate(ArrayList&lt;UserAlbumLink&gt; links)\r\n    {\r\n        // Load list fragment\r\n        UserAlbumLinkListFragment fragment = new UserAlbumLinkListFragment(links, artist);\r\n        getSupportFragmentManager().beginTransaction().replace(R.id.artist_activity__albums_container, fragment).commit();\r\n    }\r\n    \r\nThe exception is thrown at commit() statement.\r\n\r\nMy ListFragment code: \r\n\r\n    public class UserAlbumLinkListFragment extends ListFragment {\r\n        private List&lt;UserAlbumLink&gt; albumLinks;\r\n        private UserAlbumLinkListAdapter adapter;\r\n        private Artist artist;\r\n\r\n\r\n        public UserAlbumLinkListFragment() {\r\n        }\r\n\r\n        public UserAlbumLinkListFragment(List&lt;UserAlbumLink&gt; albumLinks, Artist artist) {\r\n            this.albumLinks = albumLinks;\r\n            this.artist = artist;\r\n        }\r\n\r\n        @Override\r\n        public void onCreate(@Nullable Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n\r\n            adapter = new UserAlbumLinkListAdapter(getActivity(), R.layout.album_list_item, albumLinks, artist);\r\n            setListAdapter(adapter);\r\n        }\r\n\r\n        @Nullable\r\n        @Override\r\n        public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n            return inflater.inflate(R.layout.fragment_album_list, container, false);\r\n        }\r\n    }\r\n\r\nAs I understand FragmentManager gets destroyed when activity is getting destroyed, but how do I get new FragmentManager for recreated activity? Why getSupportFragmentManager() is not working?","title":"java.lang.IllegalStateException: FragmentManager has been destroyed","body":"<p>In activity <code>onResume</code> method I call volley request, which is getting list of items and then loads them to ListFragment inside this activity. When I enter activity for the first time everything is working correctly, but when I re-enter activity the ListFragment is empty and there is message in console \"FragmentManager has been destroyed\".</p>\n\n<p>This is my activity's code:</p>\n\n<pre><code>@Override\nprotected void onResume() {\n    super.onResume();\n    // Volley request inside - which call back albumsFoundViewUpdate\n    artistController.getArtistAlbums(artist);\n}\n\npublic void albumsFoundViewUpdate(ArrayList&lt;UserAlbumLink&gt; links)\n{\n    // Load list fragment\n    UserAlbumLinkListFragment fragment = new UserAlbumLinkListFragment(links, artist);\n    getSupportFragmentManager().beginTransaction().replace(R.id.artist_activity__albums_container, fragment).commit();\n}\n</code></pre>\n\n<p>The exception is thrown at commit() statement.</p>\n\n<p>My ListFragment code: </p>\n\n<pre><code>public class UserAlbumLinkListFragment extends ListFragment {\n    private List&lt;UserAlbumLink&gt; albumLinks;\n    private UserAlbumLinkListAdapter adapter;\n    private Artist artist;\n\n\n    public UserAlbumLinkListFragment() {\n    }\n\n    public UserAlbumLinkListFragment(List&lt;UserAlbumLink&gt; albumLinks, Artist artist) {\n        this.albumLinks = albumLinks;\n        this.artist = artist;\n    }\n\n    @Override\n    public void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        adapter = new UserAlbumLinkListAdapter(getActivity(), R.layout.album_list_item, albumLinks, artist);\n        setListAdapter(adapter);\n    }\n\n    @Nullable\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        return inflater.inflate(R.layout.fragment_album_list, container, false);\n    }\n}\n</code></pre>\n\n<p>As I understand FragmentManager gets destroyed when activity is getting destroyed, but how do I get new FragmentManager for recreated activity? Why getSupportFragmentManager() is not working?</p>\n"},{"tags":["java","swing","awt"],"comments":[{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":1,"creation_date":1639065932,"post_id":70292651,"comment_id":124258488,"body_markdown":"This should be the first line `super.paintComponent(g);` in your `paintComponent(...)` method, also you&#39;re calling the wrong method you&#39;re calling `paintComponentS` and not `paintComponent` (without the S), but for better help sooner post a proper [mre] that demonstrates your issue","body":"This should be the first line <code>super.paintComponent(g);</code> in your <code>paintComponent(...)</code> method, also you&#39;re calling the wrong method you&#39;re calling <code>paintComponentS</code> and not <code>paintComponent</code> (without the S), but for better help sooner post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates your issue"},{"owner":{"account_id":21819959,"reputation":21,"user_id":16116286,"display_name":"ItamarKraitman"},"score":0,"creation_date":1639066566,"post_id":70292651,"comment_id":124258774,"body_markdown":"thank you! I removed the &#39;s&#39; but it&#39;s still not working... thank you for the advice of the minimal example, I&#39;ll remember it the next time","body":"thank you! I removed the &#39;s&#39; but it&#39;s still not working... thank you for the advice of the minimal example, I&#39;ll remember it the next time"},{"owner":{"account_id":2507550,"reputation":10975,"user_id":2180785,"accept_rate":90,"display_name":"Frakcool"},"score":2,"creation_date":1639066651,"post_id":70292651,"comment_id":124258813,"body_markdown":"If you actually want help with this question don&#39;t wait till next time to provide an MRE, you should create a brand new project where you can reproduce the problem, then post the code here so we can test the same code and see why it isn&#39;t working. We don&#39;t know what `DirectedWeightedGraph` is or looks like, we don&#39;t know how `paintVertex` or `paintEdge` do or what `graphAlgo` is, we know nothing about your program and can&#39;t test it in our machines","body":"If you actually want help with this question don&#39;t wait till next time to provide an MRE, you should create a brand new project where you can reproduce the problem, then post the code here so we can test the same code and see why it isn&#39;t working. We don&#39;t know what <code>DirectedWeightedGraph</code> is or looks like, we don&#39;t know how <code>paintVertex</code> or <code>paintEdge</code> do or what <code>graphAlgo</code> is, we know nothing about your program and can&#39;t test it in our machines"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1639070353,"post_id":70292651,"comment_id":124260555,"body_markdown":"`Don&#39;t override paint()`. All the custom painting logic should be in the pantComponent() method. Read the Swing tutorial on [Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) for working examples.","body":"<code>Don&#39;t override paint()</code>. All the custom painting logic should be in the pantComponent() method. Read the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Custom Painting</a> for working examples."}],"owner":{"account_id":21819959,"reputation":21,"user_id":16116286,"display_name":"ItamarKraitman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639066162,"creation_date":1639064420,"question_id":70292651,"body_markdown":"I&#39;m trying to build a GUI that represents a graph that is called from a JSON file. But the `paintComponent` method is never called. Why is that?\r\n\r\nEDIT: graphics an image are declared as class fields\r\n\r\nThis is my code for `JPanel`:\r\n\r\n    public Panel(DirectedWeightedGraph graph) {\r\n        this.setBackground(Color.WHITE);\r\n        this.setPreferredSize(Toolkit.getDefaultToolkit().getScreenSize());\r\n        this.setFocusable(true);\r\n        this.graph = graph;\r\n    }\r\n\r\n    @Override\r\n    protected void paintComponent(Graphics g) {\r\n        if (this.graph == null) return;\r\n        super.paintComponents(g);\r\n        Graphics2D g2d = (Graphics2D) g;\r\n\r\n        paintVertex(g2d);\r\n        paintEdge(g2d);\r\n    }\r\n\r\n    public void paint(Graphics g) {\r\n        // Create a new &quot;canvas&quot;\r\n        this.image = createImage(800, 800);\r\n        graphics = image.getGraphics();\r\n\r\n        // Draw on the new &quot;canvas&quot;\r\n        paintComponent(graphics);\r\n\r\n        // &quot;Switch&quot; the old &quot;canvas&quot; for the new one\r\n        g.drawImage(image, 0, 0, this);\r\n    }\r\n\r\nThis is my code for `JFrame`:\r\n\r\n     public UserWindow(DirectedWeightedGraphAlgorithms graph) {\r\n        super();\r\n        graphAlgo = graph;\r\n        this.panel = new Panel(graphAlgo.getGraph());\r\n        this.add(this.panel, BorderLayout.PAGE_START);\r\n        InitWindow();\r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.addMouseListener(this);\r\n        this.getContentPane().add(panel);\r\n        this.setResizable(true);\r\n        this.pack();\r\n        this.setVisible(true);\r\n    }","title":"PaintComponent is not called","body":"<p>I'm trying to build a GUI that represents a graph that is called from a JSON file. But the <code>paintComponent</code> method is never called. Why is that?</p>\n<p>EDIT: graphics an image are declared as class fields</p>\n<p>This is my code for <code>JPanel</code>:</p>\n<pre><code>public Panel(DirectedWeightedGraph graph) {\n    this.setBackground(Color.WHITE);\n    this.setPreferredSize(Toolkit.getDefaultToolkit().getScreenSize());\n    this.setFocusable(true);\n    this.graph = graph;\n}\n\n@Override\nprotected void paintComponent(Graphics g) {\n    if (this.graph == null) return;\n    super.paintComponents(g);\n    Graphics2D g2d = (Graphics2D) g;\n\n    paintVertex(g2d);\n    paintEdge(g2d);\n}\n\npublic void paint(Graphics g) {\n    // Create a new &quot;canvas&quot;\n    this.image = createImage(800, 800);\n    graphics = image.getGraphics();\n\n    // Draw on the new &quot;canvas&quot;\n    paintComponent(graphics);\n\n    // &quot;Switch&quot; the old &quot;canvas&quot; for the new one\n    g.drawImage(image, 0, 0, this);\n}\n</code></pre>\n<p>This is my code for <code>JFrame</code>:</p>\n<pre><code> public UserWindow(DirectedWeightedGraphAlgorithms graph) {\n    super();\n    graphAlgo = graph;\n    this.panel = new Panel(graphAlgo.getGraph());\n    this.add(this.panel, BorderLayout.PAGE_START);\n    InitWindow();\n    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    this.addMouseListener(this);\n    this.getContentPane().add(panel);\n    this.setResizable(true);\n    this.pack();\n    this.setVisible(true);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","thread-safety"],"answers":[{"tags":[],"owner":{"account_id":15270277,"reputation":110,"user_id":11017685,"display_name":"Tomasz Pieczkowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639066039,"creation_date":1639066039,"answer_id":70293057,"question_id":70292729,"body_markdown":"System properties can change at any time so your attempt to `properties.putAll(System.getProperties())` is throwing ConcurrentModificationException. That is because the putAll method is using  an iterator. Try to `clone()` system properties and use the cloned instance instead.\r\n\r\n    properties.putAll(System.getProperties().clone());","title":"Race condition when initialized Spring Bean","body":"<p>System properties can change at any time so your attempt to <code>properties.putAll(System.getProperties())</code> is throwing ConcurrentModificationException. That is because the putAll method is using  an iterator. Try to <code>clone()</code> system properties and use the cloned instance instead.</p>\n<pre><code>properties.putAll(System.getProperties().clone());\n</code></pre>\n"}],"owner":{"account_id":890118,"reputation":335,"user_id":928563,"accept_rate":90,"display_name":"Sushil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70293057,"answer_count":1,"score":0,"last_activity_date":1639066039,"creation_date":1639064700,"question_id":70292729,"body_markdown":"I am usingJava Spring Configuration and few beans are referencing one bean. It seems that all beans are trying to initialize properties() bean at same time because getting ConcurrentModificationException on startup of service (not always. getting this error 1 out of 1000 times)-\r\n\r\n\r\n    ERR [main                    ] - org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;genericTaskExecutor&#39; defined in class path resource [com/test/SpringConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.util.concurrent.Executor]: Factory method &#39;threadPoolTaskExecutor&#39; threw exception; nested exception is java.util.ConcurrentModificationException\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:483)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:893)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551)\r\n    \tat org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:142)\r\n    \tat org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:95)\r\n    \tat Main.start(Main.java:27)\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.util.concurrent.Executor]: Factory method &#39;threadPoolTaskExecutor&#39; threw exception; nested exception is java.util.ConcurrentModificationException\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:650)\r\n    \t... 16 more\r\n    Caused by: java.util.ConcurrentModificationException\r\n    \tat java.util.Hashtable$Enumerator.next(Hashtable.java:1387)\r\n    \tat java.util.Hashtable.putAll(Hashtable.java:523)\r\n    \tat com.test.SpringConfiguration.properties(DependencySpringConfiguration.java:43)\r\n    \tat com.test.SpringConfiguration.threadPoolTaskExecutor(DependencySpringConfiguration.java:69)\r\n    \tat com.test.SpringConfiguration$$EnhancerBySpringCGLIB$$c6bbb94b.CGLIB$threadPoolTaskExecutor$0(&lt;generated&gt;)\r\n    \tat com.test.SpringConfiguration$$EnhancerBySpringCGLIB$$c6bbb94b$$FastClassBySpringCGLIB$$87cff70.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\r\n    \tat com.test.SpringConfiguration$$EnhancerBySpringCGLIB$$c6bbb94b.threadPoolTaskExecutor(&lt;generated&gt;)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\r\n    \t... 17 more\r\n\r\n\r\nFollowing are bean definitions. My code is giving error on &quot;properties.putAll(System.getProperties())&quot; call. I am unable to find what I am missing in Spring Configuration because exception is coming rarely so must be race condition between beans initialization -\r\n\r\n    @Configuration\r\n    @EnableScheduling\r\n    public class DependencySpringConfiguration { \r\n        @Bean\r\n    \tpublic static Properties properties() {\r\n    \t\tProperties properties = new Properties();\r\n    \t\tproperties.putAll(System.getProperties());\r\n            //do some formatting on properties data\r\n    \t\treturn properties;\r\n    \t}\r\n    \r\n    \t@Bean(name = &quot;genericTaskExecutor&quot;)\r\n    \t@Primary\r\n    \tpublic Executor threadPoolTaskExecutor() {\r\n    \t\tThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n    \t\t\r\n    \t\tint corePoolSize = NumberUtils.toInt(properties().getProperty(&quot;generic-executor.core-pool.size&quot;), 10);\r\n    \t\tlog.info(&quot;Initial pool size for &#39;genericTaskExecutor&#39; is {}&quot;, corePoolSize);\r\n    \t\texecutor.setCorePoolSize(corePoolSize);\r\n    \t\texecutor.setMaxPoolSize(50);\r\n    \t\texecutor.setThreadNamePrefix(&quot;GenericTaskExecutor-&quot;);\r\n    \t\texecutor.initialize();\r\n    \t\treturn executor;\r\n    \t}\r\n    \r\n    \t@Bean(name = &quot;legacy&quot;)\r\n    \tpublic Executor legacyThreadPoolTaskExecutor() {\r\n    \t\tThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n    \t\tint corePoolSize = NumberUtils.toInt(properties().getProperty(&quot;legacy-executor.core-pool.size&quot;), 1);\r\n    \t\tlog.info(&quot;Initial pool size for &#39;legacyTaskExecutor&#39; is {}&quot;, corePoolSize);\r\n    \t\texecutor.setCorePoolSize(corePoolSize);\r\n    \t\texecutor.setMaxPoolSize(10);\r\n    \t\texecutor.setThreadNamePrefix(&quot;LegacyTaskExecutor-&quot;);\r\n    \t\texecutor.initialize();\r\n    \t\treturn executor;\r\n    \t}\r\n    \r\n    \t@Bean(name = &quot;reconTaskExecutor&quot;)\r\n    \tpublic Executor reconPoolTaskExecutor() {\r\n    \t\tThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n    \t\tint corePoolSize = NumberUtils.toInt(properties().getProperty(&quot;recon-executor.core-pool.size&quot;), 2);\r\n    \t\tlog.info(&quot;Initial pool size for &#39;reconTaskExecutor&#39; is {}&quot;, corePoolSize);\r\n    \t\texecutor.setCorePoolSize(corePoolSize);\r\n    \t\texecutor.setMaxPoolSize(10);\r\n    \t\texecutor.setThreadNamePrefix(&quot;ReconTaskExecutor-&quot;);\r\n    \t\texecutor.initialize();\r\n    \t\treturn executor;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n","title":"Race condition when initialized Spring Bean","body":"<p>I am usingJava Spring Configuration and few beans are referencing one bean. It seems that all beans are trying to initialize properties() bean at same time because getting ConcurrentModificationException on startup of service (not always. getting this error 1 out of 1000 times)-</p>\n<pre><code>ERR [main                    ] - org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'genericTaskExecutor' defined in class path resource [com/test/SpringConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.util.concurrent.Executor]: Factory method 'threadPoolTaskExecutor' threw exception; nested exception is java.util.ConcurrentModificationException\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:483)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1338)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1177)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:557)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:517)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:226)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:321)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:893)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:879)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:551)\n    at org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:142)\n    at org.springframework.context.support.FileSystemXmlApplicationContext.&lt;init&gt;(FileSystemXmlApplicationContext.java:95)\n    at Main.start(Main.java:27)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [java.util.concurrent.Executor]: Factory method 'threadPoolTaskExecutor' threw exception; nested exception is java.util.ConcurrentModificationException\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:650)\n    ... 16 more\nCaused by: java.util.ConcurrentModificationException\n    at java.util.Hashtable$Enumerator.next(Hashtable.java:1387)\n    at java.util.Hashtable.putAll(Hashtable.java:523)\n    at com.test.SpringConfiguration.properties(DependencySpringConfiguration.java:43)\n    at com.test.SpringConfiguration.threadPoolTaskExecutor(DependencySpringConfiguration.java:69)\n    at com.test.SpringConfiguration$$EnhancerBySpringCGLIB$$c6bbb94b.CGLIB$threadPoolTaskExecutor$0(&lt;generated&gt;)\n    at com.test.SpringConfiguration$$EnhancerBySpringCGLIB$$c6bbb94b$$FastClassBySpringCGLIB$$87cff70.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244)\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331)\n    at com.test.SpringConfiguration$$EnhancerBySpringCGLIB$$c6bbb94b.threadPoolTaskExecutor(&lt;generated&gt;)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)\n    ... 17 more\n</code></pre>\n<p>Following are bean definitions. My code is giving error on &quot;properties.putAll(System.getProperties())&quot; call. I am unable to find what I am missing in Spring Configuration because exception is coming rarely so must be race condition between beans initialization -</p>\n<pre><code>@Configuration\n@EnableScheduling\npublic class DependencySpringConfiguration { \n    @Bean\n    public static Properties properties() {\n        Properties properties = new Properties();\n        properties.putAll(System.getProperties());\n        //do some formatting on properties data\n        return properties;\n    }\n\n    @Bean(name = &quot;genericTaskExecutor&quot;)\n    @Primary\n    public Executor threadPoolTaskExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        \n        int corePoolSize = NumberUtils.toInt(properties().getProperty(&quot;generic-executor.core-pool.size&quot;), 10);\n        log.info(&quot;Initial pool size for 'genericTaskExecutor' is {}&quot;, corePoolSize);\n        executor.setCorePoolSize(corePoolSize);\n        executor.setMaxPoolSize(50);\n        executor.setThreadNamePrefix(&quot;GenericTaskExecutor-&quot;);\n        executor.initialize();\n        return executor;\n    }\n\n    @Bean(name = &quot;legacy&quot;)\n    public Executor legacyThreadPoolTaskExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        int corePoolSize = NumberUtils.toInt(properties().getProperty(&quot;legacy-executor.core-pool.size&quot;), 1);\n        log.info(&quot;Initial pool size for 'legacyTaskExecutor' is {}&quot;, corePoolSize);\n        executor.setCorePoolSize(corePoolSize);\n        executor.setMaxPoolSize(10);\n        executor.setThreadNamePrefix(&quot;LegacyTaskExecutor-&quot;);\n        executor.initialize();\n        return executor;\n    }\n\n    @Bean(name = &quot;reconTaskExecutor&quot;)\n    public Executor reconPoolTaskExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        int corePoolSize = NumberUtils.toInt(properties().getProperty(&quot;recon-executor.core-pool.size&quot;), 2);\n        log.info(&quot;Initial pool size for 'reconTaskExecutor' is {}&quot;, corePoolSize);\n        executor.setCorePoolSize(corePoolSize);\n        executor.setMaxPoolSize(10);\n        executor.setThreadNamePrefix(&quot;ReconTaskExecutor-&quot;);\n        executor.initialize();\n        return executor;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","process","pid","processbuilder"],"comments":[{"owner":{"account_id":178679,"reputation":11876,"user_id":410824,"accept_rate":81,"display_name":"Grammin"},"score":7,"creation_date":1295544811,"post_id":4750470,"comment_id":5253197,"body_markdown":"This may help some: http://stackoverflow.com/questions/35842/process-id-in-java","body":"This may help some: <a href=\"http://stackoverflow.com/questions/35842/process-id-in-java\">stackoverflow.com/questions/35842/process-id-in-java</a>"},{"owner":{"account_id":283609,"reputation":45044,"user_id":581205,"accept_rate":72,"display_name":"maaartinus"},"score":3,"creation_date":1295545031,"post_id":4750470,"comment_id":5253247,"body_markdown":"No idea how to do it in Java, but in case it&#39;s your script you may modify it, so it outputs it&#39;s pid and parse it from p.getInputStream().","body":"No idea how to do it in Java, but in case it&#39;s your script you may modify it, so it outputs it&#39;s pid and parse it from p.getInputStream()."},{"owner":{"account_id":80775,"reputation":80356,"user_id":228171,"accept_rate":78,"display_name":"Mark Peters"},"score":6,"creation_date":1295545071,"post_id":4750470,"comment_id":5253257,"body_markdown":"NOT an &quot;exact duplicate&quot; to the one who voted to close.  That question has to do with finding the pid of the Java process itself, not a new process that the Java process spawned.","body":"NOT an &quot;exact duplicate&quot; to the one who voted to close.  That question has to do with finding the pid of the Java process itself, not a new process that the Java process spawned."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1295546372,"post_id":4750470,"comment_id":5253548,"body_markdown":"What do you need the PID for anyway?","body":"What do you need the PID for anyway?"},{"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"score":0,"creation_date":1295551598,"post_id":4750470,"comment_id":5254629,"body_markdown":"Related: http://stackoverflow.com/questions/3492850/get-pid-of-javaws-jnlp-applet-under-linux","body":"Related: <a href=\"http://stackoverflow.com/questions/3492850/get-pid-of-javaws-jnlp-applet-under-linux\" title=\"get pid of javaws jnlp applet under linux\">stackoverflow.com/questions/3492850/&hellip;</a>"},{"owner":{"account_id":421127,"reputation":14005,"user_id":799188,"accept_rate":67,"display_name":"user799188"},"score":0,"creation_date":1308801128,"post_id":4750470,"comment_id":76743464,"body_markdown":"As recommended &lt;a href=&quot;http://robaustin.wikidot.com/the-pid-of-your-java-process&quot;&gt;here&lt;/a&gt;, I tried java.lang.management.ManagementFactory System.out.println(ManagementFactory.getRuntimeMXBean().getName());\nreturns a string similar to 11639@myMachineName where 11639 is the ID of the current process. Tested on Windows XP and Linux version 2.6.16.46.","body":"As recommended &lt;a href=&quot;<a href=\"http://robaustin.wikidot.com/the-pid-of-your-java-process&quot;&gt;here&lt;/a\" rel=\"nofollow noreferrer\">robaustin.wikidot.com/&hellip;</a>&gt;, I tried java.lang.management.ManagementFactory System.out.println(ManagementFactory.getRuntimeMXBean().getN&zwnj;&#8203;ame()); returns a string similar to 11639@myMachineName where 11639 is the ID of the current process. Tested on Windows XP and Linux version 2.6.16.46."},{"owner":{"account_id":266126,"reputation":10632,"user_id":553524,"accept_rate":82,"display_name":"Riyad Kalla"},"score":1,"creation_date":1313458966,"post_id":4750470,"comment_id":76743465,"body_markdown":"This returns the PID of the *running* host VM, the original question was asking what the PID of the child process started from the running Java app would be. This question addresses it: http://stackoverflow.com/questions/5284139/how-do-i-find-the-process-id-pid-of-a-process-started-in-java","body":"This returns the PID of the <i>running</i> host VM, the original question was asking what the PID of the child process started from the running Java app would be. This question addresses it: <a href=\"http://stackoverflow.com/questions/5284139/how-do-i-find-the-process-id-pid-of-a-process-started-in-java\" title=\"how do i find the process id pid of a process started in java\">stackoverflow.com/questions/5284139/&hellip;</a>"},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":2,"creation_date":1431509476,"post_id":4750470,"comment_id":48526160,"body_markdown":"It is possible that Java 9 will provide a standard API for doing this: http://openjdk.java.net/jeps/102","body":"It is possible that Java 9 will provide a standard API for doing this: <a href=\"http://openjdk.java.net/jeps/102\" rel=\"nofollow noreferrer\">openjdk.java.net/jeps/102</a>"},{"owner":{"account_id":1868134,"reputation":7872,"user_id":1691146,"accept_rate":71,"display_name":"RobEarl"},"score":0,"creation_date":1487932265,"post_id":4750470,"comment_id":72016770,"body_markdown":"Possible duplicate of [How can a Java program get its own process ID?](http://stackoverflow.com/questions/35842/how-can-a-java-program-get-its-own-process-id)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/35842/how-can-a-java-program-get-its-own-process-id\">How can a Java program get its own process ID?</a>"},{"owner":{"account_id":1435086,"reputation":4492,"user_id":2323964,"accept_rate":87,"display_name":"Novaterata"},"score":0,"creation_date":1511897474,"post_id":4750470,"comment_id":82035947,"body_markdown":"@RobEarl no it&#39;s not, that is for a process getting it&#39;s own PID, this is for a processing getting the PID of a `Process` it started","body":"@RobEarl no it&#39;s not, that is for a process getting it&#39;s own PID, this is for a processing getting the PID of a <code>Process</code> it started"}],"answers":[{"tags":[],"owner":{"account_id":36759,"reputation":38034,"user_id":104950,"accept_rate":93,"display_name":"Amir Afghani"},"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1417648237,"creation_date":1295545690,"answer_id":4750632,"question_id":4750470,"body_markdown":"There is no public API for this yet. see Sun [Bug 4244896][1], Sun [Bug 4250622][2]\r\n\r\nAs a workaround: \r\n\r\n    Runtime.exec(...)\r\n\r\nreturns an Object of type \r\n\r\n    java.lang.Process\r\n\r\nThe Process class is abstract, and what you get back is some subclass of Process which is designed for your operating system. For example on Macs, it returns `java.lang.UnixProcess` which has a private field called `pid`. Using Reflection you can easily get the value of this field.  This is admittedly a hack, but it might help.  What do you need the `PID` for anyway?\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4244896\r\n  [2]: https://bugs.java.com/bugdatabase/view_bug;jsessionid=a4867002d972460f4acf3239dc0a?bug_id=4250622","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>There is no public API for this yet. see Sun <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4244896\" rel=\"nofollow noreferrer\">Bug 4244896</a>, Sun <a href=\"https://bugs.java.com/bugdatabase/view_bug;jsessionid=a4867002d972460f4acf3239dc0a?bug_id=4250622\" rel=\"nofollow noreferrer\">Bug 4250622</a></p>\n<p>As a workaround:</p>\n<pre><code>Runtime.exec(...)\n</code></pre>\n<p>returns an Object of type</p>\n<pre><code>java.lang.Process\n</code></pre>\n<p>The Process class is abstract, and what you get back is some subclass of Process which is designed for your operating system. For example on Macs, it returns <code>java.lang.UnixProcess</code> which has a private field called <code>pid</code>. Using Reflection you can easily get the value of this field.  This is admittedly a hack, but it might help.  What do you need the <code>PID</code> for anyway?</p>\n"},{"tags":[],"owner":{"account_id":268218,"reputation":1319,"user_id":556855,"display_name":"Stewart Murrie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1295550435,"creation_date":1295550435,"answer_id":4751385,"question_id":4750470,"body_markdown":"There isn&#39;t a simple solution.  The way I&#39;ve done it in the past is to start another process to run either the `ps` command on Unix-like systems, or the `tasklist` command on Windows, and then parse the output of that command for the PID I want.  In reality, I ended up putting that code into a separate shell script for each platform which just returned the PID, so that I could keep the Java piece as platform independent as possible.  This doesn&#39;t work well for short-lived tasks, but that wasn&#39;t an issue for me.  ","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>There isn't a simple solution.  The way I've done it in the past is to start another process to run either the <code>ps</code> command on Unix-like systems, or the <code>tasklist</code> command on Windows, and then parse the output of that command for the PID I want.  In reality, I ended up putting that code into a separate shell script for each platform which just returned the PID, so that I could keep the Java piece as platform independent as possible.  This doesn't work well for short-lived tasks, but that wasn't an issue for me.  </p>\n"},{"tags":[],"owner":{"account_id":331275,"reputation":3837,"user_id":655855,"display_name":"Shamit Verma"},"down_vote_count":4,"up_vote_count":27,"is_accepted":false,"score":23,"last_activity_date":1302168744,"creation_date":1302168744,"answer_id":5578924,"question_id":4750470,"body_markdown":"This page has the HOWTO:\r\n\r\nhttp://www.golesny.de/p/code/javagetpid\r\n\r\nOn Windows:\r\n\r\n    Runtime.exec(..)\r\n\r\nReturns an instance of &quot;java.lang.Win32Process&quot;) OR &quot;java.lang.ProcessImpl&quot;\r\n\r\nBoth have a private field &quot;handle&quot;.\r\n\r\nThis is an OS handle for the process. You will have to use this + Win32 API to query PID. That page has details on how to do that.","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>This page has the HOWTO:</p>\n\n<p><a href=\"http://www.golesny.de/p/code/javagetpid\" rel=\"noreferrer\">http://www.golesny.de/p/code/javagetpid</a></p>\n\n<p>On Windows:</p>\n\n<pre><code>Runtime.exec(..)\n</code></pre>\n\n<p>Returns an instance of \"java.lang.Win32Process\") OR \"java.lang.ProcessImpl\"</p>\n\n<p>Both have a private field \"handle\".</p>\n\n<p>This is an OS handle for the process. You will have to use this + Win32 API to query PID. That page has details on how to do that.</p>\n"},{"tags":[],"owner":{"account_id":422937,"reputation":746,"user_id":802009,"display_name":"Martin Modr&#225;k"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1478876697,"creation_date":1332428841,"answer_id":9825010,"question_id":4750470,"body_markdown":"I think I have found out a solution, that looks quite bulletproof while working on most platforms.\r\nHere is the idea:\r\n\r\n 1. Create a JVM-wide mutex that you acquire before spawning new process/killing a process\r\n 2. Use platform-dependent code to acquire list of child processes + pids of your JVM process\r\n 3. Spawn new process\r\n 4. Acquire new list of child processes + pids and compare with the previous list. The one that is new is your guy.\r\n\r\nSince you check only for child processes, you cannot be wronged by some other process in the same machine. JVM-wide mutex than allows you to be sure, that the new process is the correct one.\r\n\r\nReading child process list is simpler than getting PID from process objects, because it does not require WIN API calls on windows, and, more importantly, it has been done already in several libs.\r\n\r\nBelow is an implementation of the above idea using [JavaSysMon][1] library. It\r\n\r\n    class UDKSpawner {\r\n\r\n\t    private int uccPid;\r\n\t    private Logger uccLog;\r\n\r\n\t    /**\r\n\t     * Mutex that forces only one child process to be spawned at a time. \r\n\t     * \r\n\t     */\r\n\t    private static final Object spawnProcessMutex = new Object();\r\n\t    \r\n\t    /**\r\n\t     * Spawns a new UDK process and sets {@link #uccPid} to it&#39;s PID. To work correctly,\r\n\t     * the code relies on the fact that no other method in this JVM runs UDK processes and\r\n\t     * that no method kills a process unless it acquires lock on spawnProcessMutex.\r\n\t     * @param procBuilder\r\n\t     * @return \r\n\t     */\r\n\t    private Process spawnUDK(ProcessBuilder procBuilder) throws IOException {\r\n\t        synchronized (spawnProcessMutex){            \r\n\t            JavaSysMon monitor = new JavaSysMon();\r\n\t            DirectUDKChildProcessVisitor beforeVisitor = new DirectUDKChildProcessVisitor();\r\n\t            monitor.visitProcessTree(monitor.currentPid(), beforeVisitor);\r\n\t            Set&lt;Integer&gt; alreadySpawnedProcesses = beforeVisitor.getUdkPids();\r\n\t            \r\n\t            Process proc = procBuilder.start();\r\n\t            \r\n\t            DirectUDKChildProcessVisitor afterVisitor = new DirectUDKChildProcessVisitor();\r\n\t            monitor.visitProcessTree(monitor.currentPid(), afterVisitor);\r\n\t            Set&lt;Integer&gt; newProcesses = afterVisitor.getUdkPids();\r\n\t            \r\n\t            newProcesses.removeAll(alreadySpawnedProcesses);\r\n\t            \r\n\t            if(newProcesses.isEmpty()){\r\n\t                uccLog.severe(&quot;There is no new UKD PID.&quot;);\r\n\t            }\r\n\t            else if(newProcesses.size() &gt; 1){\r\n\t                uccLog.severe(&quot;Multiple new candidate UDK PIDs&quot;);\r\n\t            } else {\r\n\t                uccPid = newProcesses.iterator().next();\r\n\t            }\r\n\t            return proc;\r\n\t        }\r\n\t    }    \r\n\t    \r\n\t    private void killUDKByPID(){\r\n\t        if(uccPid &lt; 0){\r\n\t            uccLog.severe(&quot;Cannot kill UCC by PID. PID not set.&quot;);\r\n\t            return;\r\n\t        }\r\n\t        synchronized(spawnProcessMutex){\r\n\t            JavaSysMon monitor = new JavaSysMon();\r\n\t            monitor.killProcessTree(uccPid, false);\r\n\t        }\r\n\t    }\r\n\t    \r\n\t    private static class DirectUDKChildProcessVisitor implements ProcessVisitor {\r\n\t        Set&lt;Integer&gt; udkPids = new HashSet&lt;Integer&gt;();\r\n\r\n\t        @Override\r\n\t        public boolean visit(OsProcess op, int i) {\r\n\t            if(op.processInfo().getName().equals(&quot;UDK.exe&quot;)){\r\n\t                udkPids.add(op.processInfo().getPid());\r\n\t            }\r\n\t            return false;\r\n\t        }\r\n\r\n\t        public Set&lt;Integer&gt; getUdkPids() {\r\n\t            return udkPids;\r\n\t        }\r\n\t    }\r\n    }\r\n\r\n  [1]: https://github.com/jezhumble/javasysmon/","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>I think I have found out a solution, that looks quite bulletproof while working on most platforms.\nHere is the idea:</p>\n\n<ol>\n<li>Create a JVM-wide mutex that you acquire before spawning new process/killing a process</li>\n<li>Use platform-dependent code to acquire list of child processes + pids of your JVM process</li>\n<li>Spawn new process</li>\n<li>Acquire new list of child processes + pids and compare with the previous list. The one that is new is your guy.</li>\n</ol>\n\n<p>Since you check only for child processes, you cannot be wronged by some other process in the same machine. JVM-wide mutex than allows you to be sure, that the new process is the correct one.</p>\n\n<p>Reading child process list is simpler than getting PID from process objects, because it does not require WIN API calls on windows, and, more importantly, it has been done already in several libs.</p>\n\n<p>Below is an implementation of the above idea using <a href=\"https://github.com/jezhumble/javasysmon/\" rel=\"nofollow noreferrer\">JavaSysMon</a> library. It</p>\n\n<pre><code>class UDKSpawner {\n\n    private int uccPid;\n    private Logger uccLog;\n\n    /**\n     * Mutex that forces only one child process to be spawned at a time. \n     * \n     */\n    private static final Object spawnProcessMutex = new Object();\n\n    /**\n     * Spawns a new UDK process and sets {@link #uccPid} to it's PID. To work correctly,\n     * the code relies on the fact that no other method in this JVM runs UDK processes and\n     * that no method kills a process unless it acquires lock on spawnProcessMutex.\n     * @param procBuilder\n     * @return \n     */\n    private Process spawnUDK(ProcessBuilder procBuilder) throws IOException {\n        synchronized (spawnProcessMutex){            \n            JavaSysMon monitor = new JavaSysMon();\n            DirectUDKChildProcessVisitor beforeVisitor = new DirectUDKChildProcessVisitor();\n            monitor.visitProcessTree(monitor.currentPid(), beforeVisitor);\n            Set&lt;Integer&gt; alreadySpawnedProcesses = beforeVisitor.getUdkPids();\n\n            Process proc = procBuilder.start();\n\n            DirectUDKChildProcessVisitor afterVisitor = new DirectUDKChildProcessVisitor();\n            monitor.visitProcessTree(monitor.currentPid(), afterVisitor);\n            Set&lt;Integer&gt; newProcesses = afterVisitor.getUdkPids();\n\n            newProcesses.removeAll(alreadySpawnedProcesses);\n\n            if(newProcesses.isEmpty()){\n                uccLog.severe(\"There is no new UKD PID.\");\n            }\n            else if(newProcesses.size() &gt; 1){\n                uccLog.severe(\"Multiple new candidate UDK PIDs\");\n            } else {\n                uccPid = newProcesses.iterator().next();\n            }\n            return proc;\n        }\n    }    \n\n    private void killUDKByPID(){\n        if(uccPid &lt; 0){\n            uccLog.severe(\"Cannot kill UCC by PID. PID not set.\");\n            return;\n        }\n        synchronized(spawnProcessMutex){\n            JavaSysMon monitor = new JavaSysMon();\n            monitor.killProcessTree(uccPid, false);\n        }\n    }\n\n    private static class DirectUDKChildProcessVisitor implements ProcessVisitor {\n        Set&lt;Integer&gt; udkPids = new HashSet&lt;Integer&gt;();\n\n        @Override\n        public boolean visit(OsProcess op, int i) {\n            if(op.processInfo().getName().equals(\"UDK.exe\")){\n                udkPids.add(op.processInfo().getPid());\n            }\n            return false;\n        }\n\n        public Set&lt;Integer&gt; getUdkPids() {\n            return udkPids;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":140076,"reputation":14954,"user_id":346112,"accept_rate":97,"display_name":"Jim Tough"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1415117430,"creation_date":1415117430,"answer_id":26739777,"question_id":4750470,"body_markdown":"**I used a non-portable approach to retrieve the UNIX PID from the `Process` object that is very simple to follow.**\r\n\r\n**STEP 1:**\r\nUse some Reflection API calls to identify the `Process` implementation class on the target server JRE (remember that `Process` is an abstract class). If your UNIX implementation is like mine, you will see an implementation class that has a property named `pid` that contains the PID of the process. Here is the logging code that I used.\r\n\r\n\t\t//--------------------------------------------------------------------\r\n\t\t// Jim Tough - 2014-11-04\r\n\t\t// This temporary Reflection code is used to log the name of the\r\n\t\t// class that implements the abstract Process class on the target\r\n\t\t// JRE, all of its &#39;Fields&#39; (properties and methods) and the value\r\n\t\t// of each field.\r\n\t\t//\r\n\t\t// I only care about how this behaves on our UNIX servers, so I&#39;ll\r\n\t\t// deploy a snapshot release of this code to a QA server, run it once,\r\n\t\t// then check the logs.\r\n\t\t//\r\n\t\t// TODO Remove this logging code before building final release!\r\n\t\tfinal Class&lt;?&gt; clazz = process.getClass();\r\n\t\tlogger.info(&quot;Concrete implementation of &quot; + Process.class.getName() +\r\n\t\t\t\t&quot; is: &quot; + clazz.getName());\r\n\t\t// Array of all fields in this class, regardless of access level\r\n\t\tfinal Field[] allFields = clazz.getDeclaredFields();\r\n\t\tfor (Field field : allFields) {\r\n\t\t\tfield.setAccessible(true); // allows access to non-public fields\r\n\t\t\tClass&lt;?&gt; fieldClass = field.getType();\r\n\t\t\tStringBuilder sb = new StringBuilder(field.getName());\r\n\t\t\tsb.append(&quot; | type: &quot;);\r\n\t\t\tsb.append(fieldClass.getName());\r\n\t\t\tsb.append(&quot; | value: [&quot;);\r\n\t\t\tObject fieldValue = null;\r\n\t\t\ttry {\r\n\t\t\t\tfieldValue = field.get(process);\r\n\t\t\t\tsb.append(fieldValue);\r\n\t\t\t\tsb.append(&quot;]&quot;);\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tlogger.error(&quot;Unable to get value for [&quot; +\r\n\t\t\t\t\t\tfield.getName() + &quot;]&quot;, e);\r\n\t\t\t}\r\n\t\t\tlogger.info(sb.toString());\r\n\t\t}\r\n\t\t//--------------------------------------------------------------------\r\n\r\n\t\t\r\n**STEP 2:**\r\nBased on the implementation class and field name that you obtained from the Reflection logging, write some code to pickpocket the `Process` implementation class and retrieve the PID from it using the Reflection API. The code below works for me on my flavour of UNIX. You may have to adjust the `EXPECTED_IMPL_CLASS_NAME` and `EXPECTED_PID_FIELD_NAME` constants to make it work for you.\r\n\r\n\t/**\r\n\t * Get the process id (PID) associated with a {@code Process}\r\n\t * @param process {@code Process}, or null\r\n\t * @return Integer containing the PID of the process; null if the\r\n\t *  PID could not be retrieved or if a null parameter was supplied\r\n\t */\r\n\tInteger retrievePID(final Process process) {\r\n\t\tif (process == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t//--------------------------------------------------------------------\r\n\t\t// Jim Tough - 2014-11-04\r\n\t\t// NON PORTABLE CODE WARNING!\r\n\t\t// The code in this block works on the company UNIX servers, but may\r\n\t\t// not work on *any* UNIX server. Definitely will not work on any\r\n\t\t// Windows Server instances.\r\n\t\tfinal String EXPECTED_IMPL_CLASS_NAME = &quot;java.lang.UNIXProcess&quot;;\r\n\t\tfinal String EXPECTED_PID_FIELD_NAME = &quot;pid&quot;;\r\n\t\tfinal Class&lt;? extends Process&gt; processImplClass = process.getClass();\r\n\t\tif (processImplClass.getName().equals(EXPECTED_IMPL_CLASS_NAME)) {\r\n\t\t\ttry {\r\n\t\t\t\tField f = processImplClass.getDeclaredField(\r\n\t\t\t\t\t\tEXPECTED_PID_FIELD_NAME);\r\n\t\t\t\tf.setAccessible(true); // allows access to non-public fields\r\n\t\t\t\tint pid = f.getInt(process);\r\n\t\t\t\treturn pid;\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\tlogger.warn(&quot;Unable to get PID&quot;, e);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlogger.warn(Process.class.getName() + &quot; implementation was not &quot; +\r\n\t\t\t\t\tEXPECTED_IMPL_CLASS_NAME + &quot; - cannot retrieve PID&quot; +\r\n\t\t\t\t\t&quot; | actual type was: &quot; + processImplClass.getName());\r\n\t\t}\r\n\t\t//--------------------------------------------------------------------\r\n\t\t\r\n\t\treturn null; // If PID was not retrievable, just return null\r\n\t}\r\n\r\n","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p><strong>I used a non-portable approach to retrieve the UNIX PID from the <code>Process</code> object that is very simple to follow.</strong></p>\n\n<p><strong>STEP 1:</strong>\nUse some Reflection API calls to identify the <code>Process</code> implementation class on the target server JRE (remember that <code>Process</code> is an abstract class). If your UNIX implementation is like mine, you will see an implementation class that has a property named <code>pid</code> that contains the PID of the process. Here is the logging code that I used.</p>\n\n<pre><code>    //--------------------------------------------------------------------\n    // Jim Tough - 2014-11-04\n    // This temporary Reflection code is used to log the name of the\n    // class that implements the abstract Process class on the target\n    // JRE, all of its 'Fields' (properties and methods) and the value\n    // of each field.\n    //\n    // I only care about how this behaves on our UNIX servers, so I'll\n    // deploy a snapshot release of this code to a QA server, run it once,\n    // then check the logs.\n    //\n    // TODO Remove this logging code before building final release!\n    final Class&lt;?&gt; clazz = process.getClass();\n    logger.info(\"Concrete implementation of \" + Process.class.getName() +\n            \" is: \" + clazz.getName());\n    // Array of all fields in this class, regardless of access level\n    final Field[] allFields = clazz.getDeclaredFields();\n    for (Field field : allFields) {\n        field.setAccessible(true); // allows access to non-public fields\n        Class&lt;?&gt; fieldClass = field.getType();\n        StringBuilder sb = new StringBuilder(field.getName());\n        sb.append(\" | type: \");\n        sb.append(fieldClass.getName());\n        sb.append(\" | value: [\");\n        Object fieldValue = null;\n        try {\n            fieldValue = field.get(process);\n            sb.append(fieldValue);\n            sb.append(\"]\");\n        } catch (Exception e) {\n            logger.error(\"Unable to get value for [\" +\n                    field.getName() + \"]\", e);\n        }\n        logger.info(sb.toString());\n    }\n    //--------------------------------------------------------------------\n</code></pre>\n\n<p><strong>STEP 2:</strong>\nBased on the implementation class and field name that you obtained from the Reflection logging, write some code to pickpocket the <code>Process</code> implementation class and retrieve the PID from it using the Reflection API. The code below works for me on my flavour of UNIX. You may have to adjust the <code>EXPECTED_IMPL_CLASS_NAME</code> and <code>EXPECTED_PID_FIELD_NAME</code> constants to make it work for you.</p>\n\n<pre><code>/**\n * Get the process id (PID) associated with a {@code Process}\n * @param process {@code Process}, or null\n * @return Integer containing the PID of the process; null if the\n *  PID could not be retrieved or if a null parameter was supplied\n */\nInteger retrievePID(final Process process) {\n    if (process == null) {\n        return null;\n    }\n\n    //--------------------------------------------------------------------\n    // Jim Tough - 2014-11-04\n    // NON PORTABLE CODE WARNING!\n    // The code in this block works on the company UNIX servers, but may\n    // not work on *any* UNIX server. Definitely will not work on any\n    // Windows Server instances.\n    final String EXPECTED_IMPL_CLASS_NAME = \"java.lang.UNIXProcess\";\n    final String EXPECTED_PID_FIELD_NAME = \"pid\";\n    final Class&lt;? extends Process&gt; processImplClass = process.getClass();\n    if (processImplClass.getName().equals(EXPECTED_IMPL_CLASS_NAME)) {\n        try {\n            Field f = processImplClass.getDeclaredField(\n                    EXPECTED_PID_FIELD_NAME);\n            f.setAccessible(true); // allows access to non-public fields\n            int pid = f.getInt(process);\n            return pid;\n        } catch (Exception e) {\n            logger.warn(\"Unable to get PID\", e);\n        }\n    } else {\n        logger.warn(Process.class.getName() + \" implementation was not \" +\n                EXPECTED_IMPL_CLASS_NAME + \" - cannot retrieve PID\" +\n                \" | actual type was: \" + processImplClass.getName());\n    }\n    //--------------------------------------------------------------------\n\n    return null; // If PID was not retrievable, just return null\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1042649,"reputation":37922,"user_id":1048340,"accept_rate":100,"display_name":"Jared Rummler"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1441243786,"creation_date":1427931056,"answer_id":29402650,"question_id":4750470,"body_markdown":"In my testing all IMPL classes had the field &quot;pid&quot;. This has worked for me:\r\n\r\n    public static int getPid(Process process) {\r\n        try {\r\n            Class&lt;?&gt; cProcessImpl = process.getClass();\r\n            Field fPid = cProcessImpl.getDeclaredField(&quot;pid&quot;);\r\n            if (!fPid.isAccessible()) {\r\n                fPid.setAccessible(true);\r\n            }\r\n            return fPid.getInt(process);\r\n        } catch (Exception e) {\r\n            return -1;\r\n        }\r\n    }\r\n\r\nJust make sure the returned value is not -1. If it is, then parse the output of `ps`.","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>In my testing all IMPL classes had the field \"pid\". This has worked for me:</p>\n\n<pre><code>public static int getPid(Process process) {\n    try {\n        Class&lt;?&gt; cProcessImpl = process.getClass();\n        Field fPid = cProcessImpl.getDeclaredField(\"pid\");\n        if (!fPid.isAccessible()) {\n            fPid.setAccessible(true);\n        }\n        return fPid.getInt(process);\n    } catch (Exception e) {\n        return -1;\n    }\n}\n</code></pre>\n\n<p>Just make sure the returned value is not -1. If it is, then parse the output of <code>ps</code>.</p>\n"},{"tags":[],"owner":{"account_id":1443334,"reputation":41522,"user_id":1362755,"display_name":"the8472"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1439990878,"creation_date":1439990878,"answer_id":32096896,"question_id":4750470,"body_markdown":"the [jnr-process][1] project provides this capability.\r\n\r\nIt is part of the java native runtime used by jruby and can be considered a prototype for a future [java-FFI][2]\r\n\r\n\r\n  [1]: https://github.com/jnr/jnr-process\r\n  [2]: http://openjdk.java.net/jeps/191","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>the <a href=\"https://github.com/jnr/jnr-process\" rel=\"nofollow\">jnr-process</a> project provides this capability.</p>\n\n<p>It is part of the java native runtime used by jruby and can be considered a prototype for a future <a href=\"http://openjdk.java.net/jeps/191\" rel=\"nofollow\">java-FFI</a></p>\n"},{"tags":[],"owner":{"account_id":1619139,"reputation":289,"user_id":1496095,"display_name":"LRBH10"},"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1482394911,"creation_date":1445002413,"answer_id":33171840,"question_id":4750470,"body_markdown":"In Unix System (Linux &amp; Mac)\r\n\r\n\r\n     public static synchronized long getPidOfProcess(Process p) {\r\n        long pid = -1;\r\n    \r\n        try {\r\n          if (p.getClass().getName().equals(&quot;java.lang.UNIXProcess&quot;)) {\r\n            Field f = p.getClass().getDeclaredField(&quot;pid&quot;);\r\n            f.setAccessible(true);\r\n            pid = f.getLong(p);\r\n            f.setAccessible(false);\r\n          }\r\n        } catch (Exception e) {\r\n          pid = -1;\r\n        }\r\n        return pid;\r\n      }","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>In Unix System (Linux &amp; Mac)</p>\n\n<pre><code> public static synchronized long getPidOfProcess(Process p) {\n    long pid = -1;\n\n    try {\n      if (p.getClass().getName().equals(\"java.lang.UNIXProcess\")) {\n        Field f = p.getClass().getDeclaredField(\"pid\");\n        f.setAccessible(true);\n        pid = f.getLong(p);\n        f.setAccessible(false);\n      }\n    } catch (Exception e) {\n      pid = -1;\n    }\n    return pid;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":321078,"reputation":15468,"user_id":639687,"accept_rate":69,"display_name":"czerny"},"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1522146775,"creation_date":1486523592,"answer_id":42104000,"question_id":4750470,"body_markdown":"Since **Java 9** class `Process` has new method [`long pid()`][1], so it is as simple as\r\n\r\n    ProcessBuilder pb = new ProcessBuilder(&quot;cmd&quot;, &quot;/c&quot;, &quot;path&quot;);\r\n    try {\r\n        Process p = pb.start();\r\n        long pid = p.pid();      \r\n    } catch (IOException ex) {\r\n        // ...\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/lang/Process.html#pid--","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>Since <strong>Java 9</strong> class <code>Process</code> has new method <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Process.html#pid--\" rel=\"noreferrer\"><code>long pid()</code></a>, so it is as simple as</p>\n\n<pre><code>ProcessBuilder pb = new ProcessBuilder(\"cmd\", \"/c\", \"path\");\ntry {\n    Process p = pb.start();\n    long pid = p.pid();      \n} catch (IOException ex) {\n    // ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3271975,"reputation":451,"user_id":2755130,"display_name":"arcsin"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1540305135,"creation_date":1492264374,"answer_id":43426878,"question_id":4750470,"body_markdown":"Include [jna][1] (both &quot;JNA&quot; and &quot;JNA Platform&quot;) in your library and use this function:\r\n\r\n    import com.sun.jna.Pointer;\r\n    import com.sun.jna.platform.win32.Kernel32;\r\n    import com.sun.jna.platform.win32.WinNT;\r\n    import java.lang.reflect.Field;\r\n\r\n    public static long getProcessID(Process p)\r\n        {\r\n            long result = -1;\r\n            try\r\n            {\r\n                //for windows\r\n                if (p.getClass().getName().equals(&quot;java.lang.Win32Process&quot;) ||\r\n                       p.getClass().getName().equals(&quot;java.lang.ProcessImpl&quot;)) \r\n                {\r\n                    Field f = p.getClass().getDeclaredField(&quot;handle&quot;);\r\n                    f.setAccessible(true);\t\t\t\t\r\n                    long handl = f.getLong(p);\r\n                    Kernel32 kernel = Kernel32.INSTANCE;\r\n                    WinNT.HANDLE hand = new WinNT.HANDLE();\r\n                    hand.setPointer(Pointer.createConstant(handl));\r\n                    result = kernel.GetProcessId(hand);\r\n                    f.setAccessible(false);\r\n                }\r\n                //for unix based operating systems\r\n                else if (p.getClass().getName().equals(&quot;java.lang.UNIXProcess&quot;)) \r\n                {\r\n                    Field f = p.getClass().getDeclaredField(&quot;pid&quot;);\r\n                    f.setAccessible(true);\r\n                    result = f.getLong(p);\r\n                    f.setAccessible(false);\r\n                }\r\n            }\r\n            catch(Exception ex)\r\n            {\r\n                result = -1;\r\n            }\r\n            return result;\r\n        }\r\n\r\n\r\n\r\n\r\nYou can also download JNA from [here][2] and JNA Platform from [here][3].\r\n  [1]: https://github.com/java-native-access/jna#download\r\n  [2]: http://www.java2s.com/Code/Jar/j/Downloadjna330platformjar.htm\r\n  [3]: http://www.java2s.com/Code/Jar/j/Downloadjna325jar.htm","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>Include <a href=\"https://github.com/java-native-access/jna#download\" rel=\"nofollow noreferrer\">jna</a> (both \"JNA\" and \"JNA Platform\") in your library and use this function:</p>\n\n<pre><code>import com.sun.jna.Pointer;\nimport com.sun.jna.platform.win32.Kernel32;\nimport com.sun.jna.platform.win32.WinNT;\nimport java.lang.reflect.Field;\n\npublic static long getProcessID(Process p)\n    {\n        long result = -1;\n        try\n        {\n            //for windows\n            if (p.getClass().getName().equals(\"java.lang.Win32Process\") ||\n                   p.getClass().getName().equals(\"java.lang.ProcessImpl\")) \n            {\n                Field f = p.getClass().getDeclaredField(\"handle\");\n                f.setAccessible(true);              \n                long handl = f.getLong(p);\n                Kernel32 kernel = Kernel32.INSTANCE;\n                WinNT.HANDLE hand = new WinNT.HANDLE();\n                hand.setPointer(Pointer.createConstant(handl));\n                result = kernel.GetProcessId(hand);\n                f.setAccessible(false);\n            }\n            //for unix based operating systems\n            else if (p.getClass().getName().equals(\"java.lang.UNIXProcess\")) \n            {\n                Field f = p.getClass().getDeclaredField(\"pid\");\n                f.setAccessible(true);\n                result = f.getLong(p);\n                f.setAccessible(false);\n            }\n        }\n        catch(Exception ex)\n        {\n            result = -1;\n        }\n        return result;\n    }\n</code></pre>\n\n<p>You can also download JNA from <a href=\"http://www.java2s.com/Code/Jar/j/Downloadjna330platformjar.htm\" rel=\"nofollow noreferrer\">here</a> and JNA Platform from <a href=\"http://www.java2s.com/Code/Jar/j/Downloadjna325jar.htm\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":135952,"reputation":1812,"user_id":339146,"accept_rate":75,"display_name":"Panayotis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502185767,"creation_date":1502185767,"answer_id":45565035,"question_id":4750470,"body_markdown":"I believe the only portable way to do this, is to run a (child) process through another (parent) Java process, which will inform me the actual PID of the parent process. The child process could be anything.\r\n\r\nThe code of this wrapper is\r\n\r\n    package com.panayotis.wrapper;\r\n \r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.lang.management.ManagementFactory;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) throws IOException, InterruptedException {\r\n            System.out.println(ManagementFactory.getRuntimeMXBean().getName().split(&quot;@&quot;)[0]);\r\n            ProcessBuilder pb = new ProcessBuilder(args);\r\n            pb.directory(new File(System.getProperty(&quot;user.dir&quot;)));\r\n            pb.redirectInput(ProcessBuilder.Redirect.INHERIT);\r\n            pb.redirectOutput(ProcessBuilder.Redirect.INHERIT);\r\n            pb.redirectError(ProcessBuilder.Redirect.INHERIT);\r\n            pb.start().waitFor();\r\n        }\r\n    }\r\n\r\n\r\nTo use it, create a jar file with just this one, and call it with command arguments this:\r\n\r\n    String java = System.getProperty(&quot;java.home&quot;) + separator + &quot;bin&quot; + separator + &quot;java.exe&quot;;\r\n    String jar_wrapper = &quot;path\\\\of\\\\wrapper.jar&quot;;\r\n\r\n    String[] args = new String[]{java, &quot;-cp&quot;, jar_wrapper, &quot;com.panayotis.wrapper.Main&quot;, actual_exec_args...);\r\n\r\n\r\n","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>I believe the only portable way to do this, is to run a (child) process through another (parent) Java process, which will inform me the actual PID of the parent process. The child process could be anything.</p>\n\n<p>The code of this wrapper is</p>\n\n<pre><code>package com.panayotis.wrapper;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.lang.management.ManagementFactory;\n\npublic class Main {\n    public static void main(String[] args) throws IOException, InterruptedException {\n        System.out.println(ManagementFactory.getRuntimeMXBean().getName().split(\"@\")[0]);\n        ProcessBuilder pb = new ProcessBuilder(args);\n        pb.directory(new File(System.getProperty(\"user.dir\")));\n        pb.redirectInput(ProcessBuilder.Redirect.INHERIT);\n        pb.redirectOutput(ProcessBuilder.Redirect.INHERIT);\n        pb.redirectError(ProcessBuilder.Redirect.INHERIT);\n        pb.start().waitFor();\n    }\n}\n</code></pre>\n\n<p>To use it, create a jar file with just this one, and call it with command arguments this:</p>\n\n<pre><code>String java = System.getProperty(\"java.home\") + separator + \"bin\" + separator + \"java.exe\";\nString jar_wrapper = \"path\\\\of\\\\wrapper.jar\";\n\nString[] args = new String[]{java, \"-cp\", jar_wrapper, \"com.panayotis.wrapper.Main\", actual_exec_args...);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":184243,"reputation":1491,"user_id":420156,"accept_rate":88,"display_name":"allquixotic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504787181,"creation_date":1504787181,"answer_id":46096332,"question_id":4750470,"body_markdown":"If portability is not a concern, and you just want to get the pid on Windows without a lot of hassle while using code that is tested and known to work on all modern versions of Windows, you can use kohsuke&#39;s [winp](https://github.com/kohsuke/winp) library. It is also available on Maven Central for easy consumption.\r\n\r\n    Process process = //...;\r\n    WinProcess wp = new WinProcess(process);\r\n    int pid = wp.getPid();","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>If portability is not a concern, and you just want to get the pid on Windows without a lot of hassle while using code that is tested and known to work on all modern versions of Windows, you can use kohsuke's <a href=\"https://github.com/kohsuke/winp\" rel=\"nofollow noreferrer\">winp</a> library. It is also available on Maven Central for easy consumption.</p>\n\n<pre><code>Process process = //...;\nWinProcess wp = new WinProcess(process);\nint pid = wp.getPid();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2526835,"reputation":2388,"user_id":2196034,"accept_rate":51,"display_name":"Luciano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1509634786,"creation_date":1509634786,"answer_id":47078389,"question_id":4750470,"body_markdown":"There is an open-source library that has such a function, and it has cross-platform implementations: https://github.com/OpenHFT/Java-Thread-Affinity\r\n\r\nIt may be overkill just to get the PID, but if you want other things like CPU and thread id, and specifically thread affinity, it may be adequate for you.\r\n\r\nTo get the current thread&#39;s PID, just call `Affinity.getAffinityImpl().getProcessId()`.\r\n\r\nThis is implemented using JNA (see arcsin&#39;s answer).","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>There is an open-source library that has such a function, and it has cross-platform implementations: <a href=\"https://github.com/OpenHFT/Java-Thread-Affinity\" rel=\"nofollow noreferrer\">https://github.com/OpenHFT/Java-Thread-Affinity</a></p>\n\n<p>It may be overkill just to get the PID, but if you want other things like CPU and thread id, and specifically thread affinity, it may be adequate for you.</p>\n\n<p>To get the current thread's PID, just call <code>Affinity.getAffinityImpl().getProcessId()</code>.</p>\n\n<p>This is implemented using JNA (see arcsin's answer).</p>\n"},{"tags":[],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra ika"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513106146,"creation_date":1513106146,"answer_id":47779988,"question_id":4750470,"body_markdown":"This is not a generic answer.\r\n\r\nHowever: Some programs, especially services and long-running programs, create (or offer to create, optionally) a &quot;pid file&quot;.\r\n\r\nFor instance, LibreOffice offers `--pidfile={file}`, see the [docs](https://help.libreoffice.org/5.4/he/text/shared/guide/start_parameters.html).\r\n\r\nI was looking for quite some time for a Java/Linux solution but the PID was (in my case) lying at hand.","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>This is not a generic answer.</p>\n\n<p>However: Some programs, especially services and long-running programs, create (or offer to create, optionally) a \"pid file\".</p>\n\n<p>For instance, LibreOffice offers <code>--pidfile={file}</code>, see the <a href=\"https://help.libreoffice.org/5.4/he/text/shared/guide/start_parameters.html\" rel=\"nofollow noreferrer\">docs</a>.</p>\n\n<p>I was looking for quite some time for a Java/Linux solution but the PID was (in my case) lying at hand.</p>\n"},{"tags":[],"owner":{"account_id":49078,"reputation":44646,"user_id":145989,"accept_rate":59,"display_name":"Ondra ika"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1513106802,"creation_date":1513106399,"answer_id":47780030,"question_id":4750470,"body_markdown":"One solution is to use the idiosyncratic tools the platform offers:\r\n\r\n    private static String invokeLinuxPsProcess(String filterByCommand) {\r\n        List&lt;String&gt; args = Arrays.asList(&quot;ps -e -o stat,pid,unit,args=&quot;.split(&quot; +&quot;));\r\n        // Example output:\r\n        // Sl   22245 bpds-api.service                /opt/libreoffice5.4/program/soffice.bin --headless\r\n        // Z    22250 -                               [soffice.bin] &lt;defunct&gt;\r\n\r\n        try {\r\n            Process psAux = new ProcessBuilder(args).redirectErrorStream(true).start();\r\n            try {\r\n                Thread.sleep(100); // TODO: Find some passive way.\r\n            } catch (InterruptedException e) { }\r\n\r\n            try (BufferedReader reader = new BufferedReader(new InputStreamReader(psAux.getInputStream(), StandardCharsets.UTF_8))) {\r\n                String line;\r\n                while ((line = reader.readLine()) != null) {\r\n                    if (!line.contains(filterByCommand))\r\n                        continue;\r\n                    String[] parts = line.split(&quot;\\\\w+&quot;);\r\n                    if (parts.length &lt; 4)\r\n                        throw new RuntimeException(&quot;Unexpected format of the `ps` line, expected at least 4 columns:\\n\\t&quot; + line);\r\n                    String pid = parts[1];\r\n                    return pid;\r\n                }\r\n            }\r\n        }\r\n        catch (IOException ex) {\r\n            log.warn(String.format(&quot;Failed executing %s: %s&quot;, args, ex.getMessage()), ex);\r\n        }\r\n        return null;\r\n    }\r\n\r\nDisclaimer: Not tested, but you get the idea:\r\n\r\n* Call `ps` to list the processes,\r\n* Find your one because you know the command you launched it with.\r\n* If there are multiple processes with the same command, you can:\r\n  * Add another dummy argument to differentiate them\r\n  * Rely on the increasing PID (not really safe, not concurrent)\r\n  * Check the time of process creation (could be too coarse to really differentiate, also not concurrent)\r\n  * Add a specific environment variable and list it with `ps` too.","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>One solution is to use the idiosyncratic tools the platform offers:</p>\n\n<pre><code>private static String invokeLinuxPsProcess(String filterByCommand) {\n    List&lt;String&gt; args = Arrays.asList(\"ps -e -o stat,pid,unit,args=\".split(\" +\"));\n    // Example output:\n    // Sl   22245 bpds-api.service                /opt/libreoffice5.4/program/soffice.bin --headless\n    // Z    22250 -                               [soffice.bin] &lt;defunct&gt;\n\n    try {\n        Process psAux = new ProcessBuilder(args).redirectErrorStream(true).start();\n        try {\n            Thread.sleep(100); // TODO: Find some passive way.\n        } catch (InterruptedException e) { }\n\n        try (BufferedReader reader = new BufferedReader(new InputStreamReader(psAux.getInputStream(), StandardCharsets.UTF_8))) {\n            String line;\n            while ((line = reader.readLine()) != null) {\n                if (!line.contains(filterByCommand))\n                    continue;\n                String[] parts = line.split(\"\\\\w+\");\n                if (parts.length &lt; 4)\n                    throw new RuntimeException(\"Unexpected format of the `ps` line, expected at least 4 columns:\\n\\t\" + line);\n                String pid = parts[1];\n                return pid;\n            }\n        }\n    }\n    catch (IOException ex) {\n        log.warn(String.format(\"Failed executing %s: %s\", args, ex.getMessage()), ex);\n    }\n    return null;\n}\n</code></pre>\n\n<p>Disclaimer: Not tested, but you get the idea:</p>\n\n<ul>\n<li>Call <code>ps</code> to list the processes,</li>\n<li>Find your one because you know the command you launched it with.</li>\n<li>If there are multiple processes with the same command, you can:\n\n<ul>\n<li>Add another dummy argument to differentiate them</li>\n<li>Rely on the increasing PID (not really safe, not concurrent)</li>\n<li>Check the time of process creation (could be too coarse to really differentiate, also not concurrent)</li>\n<li>Add a specific environment variable and list it with <code>ps</code> too.</li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1944729,"reputation":1715,"user_id":1750142,"accept_rate":50,"display_name":"csonuryilmaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541020894,"creation_date":1541020894,"answer_id":53092132,"question_id":4750470,"body_markdown":"For GNU/Linux &amp; MacOS (or generally UNIX like) systems, I&#39;ve used below method which works fine:\r\n\r\n    private int tryGetPid(Process process)\r\n    {\r\n\t    if (process.getClass().getName().equals(&quot;java.lang.UNIXProcess&quot;))\r\n\t    {\r\n\t        try\r\n\t        {\r\n\t\t        Field f = process.getClass().getDeclaredField(&quot;pid&quot;);\r\n\t\t        f.setAccessible(true);\r\n\t\t        return f.getInt(process);\r\n\t        }\r\n\t        catch (IllegalAccessException | IllegalArgumentException | NoSuchFieldException | SecurityException e)\r\n\t        {\r\n\t        }\r\n\t    }\r\n\r\n\t    return 0;\r\n    }","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>For GNU/Linux &amp; MacOS (or generally UNIX like) systems, I've used below method which works fine:</p>\n\n<pre><code>private int tryGetPid(Process process)\n{\n    if (process.getClass().getName().equals(\"java.lang.UNIXProcess\"))\n    {\n        try\n        {\n            Field f = process.getClass().getDeclaredField(\"pid\");\n            f.setAccessible(true);\n            return f.getInt(process);\n        }\n        catch (IllegalAccessException | IllegalArgumentException | NoSuchFieldException | SecurityException e)\n        {\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":342134,"reputation":1166,"user_id":1417775,"display_name":"Raj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569236066,"creation_date":1569236066,"answer_id":58060848,"question_id":4750470,"body_markdown":"Using [JNA][1], supporting old and new JVM to get process id\r\n\r\n    public static long getProcessId(Process p){\r\n        long pid = -1;\r\n        try {\r\n          pid = p.pid();\r\n        } catch (NoSuchMethodError e) {\r\n            try\r\n            {\r\n                //for windows\r\n                if (p.getClass().getName().equals(&quot;java.lang.Win32Process&quot;) || p.getClass().getName().equals(&quot;java.lang.ProcessImpl&quot;)) {\r\n                    Field f = p.getClass().getDeclaredField(&quot;handle&quot;);\r\n                    f.setAccessible(true);              \r\n                    long handl = f.getLong(p);\r\n                    Kernel32 kernel = Kernel32.INSTANCE;\r\n                    WinNT.HANDLE hand = new WinNT.HANDLE();\r\n                    hand.setPointer(Pointer.createConstant(handl));\r\n                    pid = kernel.GetProcessId(hand);\r\n                    f.setAccessible(false);\r\n                }\r\n                //for unix based operating systems\r\n                else if (p.getClass().getName().equals(&quot;java.lang.UNIXProcess&quot;)) \r\n                {\r\n                    Field f = p.getClass().getDeclaredField(&quot;pid&quot;);\r\n                    f.setAccessible(true);\r\n                    pid = f.getLong(p);\r\n                    f.setAccessible(false);\r\n                }\r\n            }\r\n            catch(Exception ex)\r\n            {\r\n                pid = -1;\r\n            }\r\n        }        \r\n        return pid;\r\n    }\r\n\r\n\r\n  [1]: https://github.com/java-native-access/jna","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>Using <a href=\"https://github.com/java-native-access/jna\" rel=\"nofollow noreferrer\">JNA</a>, supporting old and new JVM to get process id</p>\n\n<pre><code>public static long getProcessId(Process p){\n    long pid = -1;\n    try {\n      pid = p.pid();\n    } catch (NoSuchMethodError e) {\n        try\n        {\n            //for windows\n            if (p.getClass().getName().equals(\"java.lang.Win32Process\") || p.getClass().getName().equals(\"java.lang.ProcessImpl\")) {\n                Field f = p.getClass().getDeclaredField(\"handle\");\n                f.setAccessible(true);              \n                long handl = f.getLong(p);\n                Kernel32 kernel = Kernel32.INSTANCE;\n                WinNT.HANDLE hand = new WinNT.HANDLE();\n                hand.setPointer(Pointer.createConstant(handl));\n                pid = kernel.GetProcessId(hand);\n                f.setAccessible(false);\n            }\n            //for unix based operating systems\n            else if (p.getClass().getName().equals(\"java.lang.UNIXProcess\")) \n            {\n                Field f = p.getClass().getDeclaredField(\"pid\");\n                f.setAccessible(true);\n                pid = f.getLong(p);\n                f.setAccessible(false);\n            }\n        }\n        catch(Exception ex)\n        {\n            pid = -1;\n        }\n    }        \n    return pid;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7042785,"reputation":1,"user_id":5394696,"display_name":"Gustavo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639065405,"creation_date":1639065405,"answer_id":70292916,"question_id":4750470,"body_markdown":"I made a quick and dirty solution for those who are still stuck with Java 8\r\n\r\n    public long showID(Process process) {\r\n        return Long.parseLong(process.toString().split(&quot;, &quot;)[0].replace(&quot;Process[pid=&quot;, &quot;&quot;));\r\n    }\r\n\r\n\r\nI hope you find this snippet useful.","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>I made a quick and dirty solution for those who are still stuck with Java 8</p>\n<pre><code>public long showID(Process process) {\n    return Long.parseLong(process.toString().split(&quot;, &quot;)[0].replace(&quot;Process[pid=&quot;, &quot;&quot;));\n}\n</code></pre>\n<p>I hope you find this snippet useful.</p>\n"}],"owner":{"account_id":152590,"reputation":1121,"user_id":367227,"accept_rate":30,"display_name":"raf"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140460,"favorite_count":0,"down_vote_count":0,"up_vote_count":88,"answer_count":18,"score":88,"last_activity_date":1639065405,"creation_date":1295544640,"question_id":4750470,"body_markdown":"I&#39;ve started a process with following code\r\n\r\n     ProcessBuilder pb = new ProcessBuilder(&quot;cmd&quot;, &quot;/c&quot;, &quot;path&quot;);\r\n     try {\r\n         Process p = pb.start();       \r\n     } \r\n     catch (IOException ex) {}\r\n\r\n\r\nNow I need to know the process&#39;s pid that I&#39;ve just started.\r\n\r\n\r\n","title":"How to get PID of process I&#39;ve just started within java program?","body":"<p>I've started a process with following code</p>\n\n<pre><code> ProcessBuilder pb = new ProcessBuilder(\"cmd\", \"/c\", \"path\");\n try {\n     Process p = pb.start();       \n } \n catch (IOException ex) {}\n</code></pre>\n\n<p>Now I need to know the process's pid that I've just started.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":10247873,"reputation":399,"user_id":8295558,"display_name":"Daniel Beleza"},"score":0,"creation_date":1639069328,"post_id":70292818,"comment_id":124260094,"body_markdown":"Is this something that happens on several devices/emulators, or only to one of these?","body":"Is this something that happens on several devices/emulators, or only to one of these?"},{"owner":{"account_id":23600644,"reputation":1,"user_id":17637177,"display_name":"Fischkopf"},"score":0,"creation_date":1639138962,"post_id":70292818,"comment_id":124278148,"body_markdown":"@DanielBeleza Its happening on all of them. The devices are Zebra TC71. I&#39;m also able to recreate this problem nearly everytime. When I start the App and this device is located on a table or so, the screen is suddenly rotating.","body":"@DanielBeleza Its happening on all of them. The devices are Zebra TC71. I&#39;m also able to recreate this problem nearly everytime. When I start the App and this device is located on a table or so, the screen is suddenly rotating."}],"owner":{"account_id":23600644,"reputation":1,"user_id":17637177,"display_name":"Fischkopf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639065230,"creation_date":1639065033,"question_id":70292818,"body_markdown":"I&#39;m having this problem for a few weeks now and couldn&#39;t find anything in web. At the moment I&#39;m coding an android App and I disabled the screen rotation via code:\r\n\r\n    setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\r\n\r\nAnd in xml:\r\n\r\n    android:screenOrientation=&quot;portrait&quot;\r\n\r\nBut the screen is still rotation sometimes for a short time (~1s and then back). \r\nIs there any other opportunity how I can fix that? I thought about disabling the system setting for screen rotation via code (On this devices is only my App running) but even for that I couldn&#39;t find any solutions.\r\n","title":"Screen rotation even though its disabled in code","body":"<p>I'm having this problem for a few weeks now and couldn't find anything in web. At the moment I'm coding an android App and I disabled the screen rotation via code:</p>\n<pre><code>setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n</code></pre>\n<p>And in xml:</p>\n<pre><code>android:screenOrientation=&quot;portrait&quot;\n</code></pre>\n<p>But the screen is still rotation sometimes for a short time (~1s and then back).\nIs there any other opportunity how I can fix that? I thought about disabling the system setting for screen rotation via code (On this devices is only my App running) but even for that I couldn't find any solutions.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":792027,"reputation":2645,"user_id":869368,"display_name":"Matthias"},"score":0,"creation_date":1638795418,"post_id":70245655,"comment_id":124175159,"body_markdown":"Hey there, it&#39;s not quite clear what you want to do. The code you show here is to upload a file and save it on the disk on the server side. Nothing of that code gets executed in the browser. \n\nIf you want to download a file to the browser, you need some entirely different code. Please also keep in mind you can do NOTHING to force a browser to immediately save it locally to disk. Some browsers will do that, while others will always prompt the user before saving anything.","body":"Hey there, it&#39;s not quite clear what you want to do. The code you show here is to upload a file and save it on the disk on the server side. Nothing of that code gets executed in the browser.   If you want to download a file to the browser, you need some entirely different code. Please also keep in mind you can do NOTHING to force a browser to immediately save it locally to disk. Some browsers will do that, while others will always prompt the user before saving anything."},{"owner":{"account_id":12488247,"reputation":27,"user_id":17596448,"display_name":"JavaGrot"},"score":0,"creation_date":1638796321,"post_id":70245655,"comment_id":124175458,"body_markdown":"I need to upload a file to the server and &quot;return it&quot;. As if someone pressing the download button. But in this same request","body":"I need to upload a file to the server and &quot;return it&quot;. As if someone pressing the download button. But in this same request"}],"answers":[{"tags":[],"owner":{"account_id":23547350,"reputation":119,"user_id":17590572,"display_name":"ZeNitch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638795111,"creation_date":1638795111,"answer_id":70245813,"question_id":70245655,"body_markdown":"Instead of returning String (view in this case I assume) you can change your endpoint to return byte array with the file content\r\n\r\n    public @ResponseBody byte[] uploadFile(\r\n    \r\nYou should also provide configuration to the @PostMapping with the media type of the file if you know what kind it&#39;s going to be.\r\n\r\n    @PostMapping(value = &quot;/uploadFile&quot;, produces = MediaType.IMAGE_JPEG_VALUE)\r\n\r\nAnother solution is to return ResponseEntity. The documentation has two examples for it (https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html)","title":"How to download and force the browser to save a file locally in one request?","body":"<p>Instead of returning String (view in this case I assume) you can change your endpoint to return byte array with the file content</p>\n<pre><code>public @ResponseBody byte[] uploadFile(\n</code></pre>\n<p>You should also provide configuration to the @PostMapping with the media type of the file if you know what kind it's going to be.</p>\n<pre><code>@PostMapping(value = &quot;/uploadFile&quot;, produces = MediaType.IMAGE_JPEG_VALUE)\n</code></pre>\n<p>Another solution is to return ResponseEntity. The documentation has two examples for it (<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html</a>)</p>\n"},{"tags":[],"owner":{"account_id":23600769,"reputation":366,"user_id":17637282,"display_name":"Dev007"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639065105,"creation_date":1639065105,"answer_id":70292830,"question_id":70245655,"body_markdown":"Well great, but you could show what you already have and write exactly what you have a problem with. Can&#39;t set the content disposition? Fine, but then you could show what you already have and write exactly what you have a problem with. Can&#39;t set the content disposition?\r\n\r\n        @PostMapping(value = &quot;/&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\r\n    public ResponseEntity&lt;Resource&gt; handleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file) {\r\n            return ResponseEntity.ok().header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=dupa.xlsx&quot;).body(file.getResource());\r\n    }","title":"How to download and force the browser to save a file locally in one request?","body":"<p>Well great, but you could show what you already have and write exactly what you have a problem with. Can't set the content disposition? Fine, but then you could show what you already have and write exactly what you have a problem with. Can't set the content disposition?</p>\n<pre><code>    @PostMapping(value = &quot;/&quot;, produces = MediaType.APPLICATION_OCTET_STREAM_VALUE)\npublic ResponseEntity&lt;Resource&gt; handleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file) {\n        return ResponseEntity.ok().header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=dupa.xlsx&quot;).body(file.getResource());\n}\n</code></pre>\n"}],"owner":{"account_id":12488247,"reputation":27,"user_id":17596448,"display_name":"JavaGrot"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70292830,"answer_count":2,"score":0,"last_activity_date":1639065105,"creation_date":1638794389,"question_id":70245655,"body_markdown":"I have an unusual task. I have to download the file and immediately force my browser to save it locally to disk?\r\n\r\nBelow, what I have written so far\r\n\r\n    @PostMapping(&quot;/uploadFile&quot;)\r\n    public String uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file, RedirectAttributes redirectAttributes, Model model) {\r\n        if (file.isEmpty()) {\r\n            redirectAttributes.addFlashAttribute(&quot;errorMessage&quot;, &quot;No file to upload.&quot;);\r\n            return &quot;index&quot;;\r\n        }\r\n        if(getExtension(file.getOriginalFilename()).equals(&quot;XLS&quot;) || getExtension(file.getOriginalFilename()).equals(&quot;XLSX&quot;)) {\r\n            Path copyLocation = Paths\r\n                    .get(UPLOAD_DIR + File.separator + StringUtils.cleanPath(file.getName()));\r\n            try {\r\n                Files.copy(file.getInputStream(), copyLocation, StandardCopyOption.REPLACE_EXISTING);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            redirectAttributes.addFlashAttribute(&quot;successMessage&quot;, &quot;File upload successfully, uploaded file name: &quot; + file.getOriginalFilename());\r\n        }\r\n        return &quot;response&quot;;\r\n    }\r\n\r\n","title":"How to download and force the browser to save a file locally in one request?","body":"<p>I have an unusual task. I have to download the file and immediately force my browser to save it locally to disk?</p>\n<p>Below, what I have written so far</p>\n<pre><code>@PostMapping(&quot;/uploadFile&quot;)\npublic String uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file, RedirectAttributes redirectAttributes, Model model) {\n    if (file.isEmpty()) {\n        redirectAttributes.addFlashAttribute(&quot;errorMessage&quot;, &quot;No file to upload.&quot;);\n        return &quot;index&quot;;\n    }\n    if(getExtension(file.getOriginalFilename()).equals(&quot;XLS&quot;) || getExtension(file.getOriginalFilename()).equals(&quot;XLSX&quot;)) {\n        Path copyLocation = Paths\n                .get(UPLOAD_DIR + File.separator + StringUtils.cleanPath(file.getName()));\n        try {\n            Files.copy(file.getInputStream(), copyLocation, StandardCopyOption.REPLACE_EXISTING);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        redirectAttributes.addFlashAttribute(&quot;successMessage&quot;, &quot;File upload successfully, uploaded file name: &quot; + file.getOriginalFilename());\n    }\n    return &quot;response&quot;;\n}\n</code></pre>\n"},{"tags":["java","url"],"answers":[{"tags":[],"owner":{"account_id":13763811,"reputation":48,"user_id":9932872,"display_name":"DwightMint"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639065029,"creation_date":1639065029,"answer_id":70292817,"question_id":70292494,"body_markdown":"Have you tried to percent-encode your brackets ? %5B for [ and %5D for ], so in your case :\r\n```\r\nString sAttachURL = &quot;https://rt4.de.company.com/gx/service/com.ibm.rqm.integration.service.IIntegrationService/resources/Electric_TM/executionworkitem?fields=feed/entry/content/executionworkitem/testplan%5B@href=\\&quot;rt4.de.company.com/gx/service/com.ibm.rqm.integration.service.IIntegrationService/resources/Electric_TM/testplan/urn:com.ibm.rqm:testplan:27\\&quot;%5D&quot;;\r\n```","title":"java.lang.IllegalArgumentException :Invalid uri","body":"<p>Have you tried to percent-encode your brackets ? %5B for [ and %5D for ], so in your case :</p>\n<pre><code>String sAttachURL = &quot;https://rt4.de.company.com/gx/service/com.ibm.rqm.integration.service.IIntegrationService/resources/Electric_TM/executionworkitem?fields=feed/entry/content/executionworkitem/testplan%5B@href=\\&quot;rt4.de.company.com/gx/service/com.ibm.rqm.integration.service.IIntegrationService/resources/Electric_TM/testplan/urn:com.ibm.rqm:testplan:27\\&quot;%5D&quot;;\n</code></pre>\n"}],"owner":{"account_id":17452484,"reputation":35,"user_id":12652164,"display_name":"Rajat Krishnan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70292817,"answer_count":1,"score":0,"last_activity_date":1639065029,"creation_date":1639063643,"question_id":70292494,"body_markdown":"I am trying GET response for an uri but everytime i get is error message &quot;Invalid uri&quot;\r\nHere is what i tried out(Code snippet) :\r\n\r\n    String sAttachURL = &quot;https://rt4.de.company.com/gx/service/com.ibm.rqm.integration.service.IIntegrationService/resources/Electric_TM/executionworkitem?fields=feed/entry/content/executionworkitem/testplan[@href=\\&quot;rt4.de.company.com/gx/service/com.ibm.rqm.integration.service.IIntegrationService/resources/Electric_TM/testplan/urn:com.ibm.rqm:testplan:27\\&quot;]&quot;;\r\n    GetMethod method = new GetMethod(sAttachURL);\r\n\r\nHere also if i hit the same url in RESTClient, response is coming properly also if try triggering something like this :\r\n\r\n    String sAttachURLService = &quot;https://rt4.de.company.com/gx/service&quot;;\r\n    GetMethod method = new GetMethod(sAttachURLService);\r\nResponse is coming properly via my code but only for **sAttachURL** its throws error not sure why i also feel [ ] brackets here might possible be causing some issue while encoding not sure\r\nCan anyone please help me out here\r\n\r\nThank you\r\n\r\n","title":"java.lang.IllegalArgumentException :Invalid uri","body":"<p>I am trying GET response for an uri but everytime i get is error message &quot;Invalid uri&quot;\nHere is what i tried out(Code snippet) :</p>\n<pre><code>String sAttachURL = &quot;https://rt4.de.company.com/gx/service/com.ibm.rqm.integration.service.IIntegrationService/resources/Electric_TM/executionworkitem?fields=feed/entry/content/executionworkitem/testplan[@href=\\&quot;rt4.de.company.com/gx/service/com.ibm.rqm.integration.service.IIntegrationService/resources/Electric_TM/testplan/urn:com.ibm.rqm:testplan:27\\&quot;]&quot;;\nGetMethod method = new GetMethod(sAttachURL);\n</code></pre>\n<p>Here also if i hit the same url in RESTClient, response is coming properly also if try triggering something like this :</p>\n<pre><code>String sAttachURLService = &quot;https://rt4.de.company.com/gx/service&quot;;\nGetMethod method = new GetMethod(sAttachURLService);\n</code></pre>\n<p>Response is coming properly via my code but only for <strong>sAttachURL</strong> its throws error not sure why i also feel [ ] brackets here might possible be causing some issue while encoding not sure\nCan anyone please help me out here</p>\n<p>Thank you</p>\n"},{"tags":["java","selenium"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeek"},"score":1,"creation_date":1637590433,"post_id":70067121,"comment_id":123859545,"body_markdown":"What does it mean &quot;crashes&quot;? Does it throw an exception and print it out? If yes, show us the whole error!","body":"What does it mean &quot;crashes&quot;? Does it throw an exception and print it out? If yes, show us the whole error!"},{"owner":{"account_id":23419335,"reputation":108,"user_id":17479815,"display_name":"Yan"},"score":1,"creation_date":1637590900,"post_id":70067121,"comment_id":123859767,"body_markdown":"@PetrJaneek i did an edit if you wanna check it again","body":"@PetrJaneek i did an edit if you wanna check it again"},{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeek"},"score":1,"creation_date":1637606736,"post_id":70067121,"comment_id":123866482,"body_markdown":"Well, yes. The `Base` has a static `driver`, but `AjoutPanier` also has a `driver` field. Only the latter gets initiated, the former stays `null`. Rename one of them to make it more clear which one is which. Or remove one. You must always only use the one which you initiate.","body":"Well, yes. The <code>Base</code> has a static <code>driver</code>, but <code>AjoutPanier</code> also has a <code>driver</code> field. Only the latter gets initiated, the former stays <code>null</code>. Rename one of them to make it more clear which one is which. Or remove one. You must always only use the one which you initiate."}],"answers":[{"tags":[],"owner":{"account_id":23419335,"reputation":108,"user_id":17479815,"display_name":"Yan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639064837,"creation_date":1637655966,"answer_id":70077541,"question_id":70067121,"body_markdown":"The answer was to remove the Base class and make the webdriver in my main class static and extend my main class in the listener.\r\n\r\nMain Class :\r\n\r\n    @Listeners(CustomListener.class)\r\n    public class AjoutPanier extends Assert {\r\n    \tpublic static WebDriver driver;\r\n    \tSoftAssert SaAjoutPanier = new SoftAssert();\r\n    \tString FormatMessageInformatife = &quot;&lt;font color=&#39;#73a9d0&#39;&gt;&lt;/br&gt;&lt;i class=&#39;fas fa-info-circle&#39;&gt;&lt;/i&gt;- &quot;;\r\n    \tString FormatMessageError = &quot;&lt;font color=&#39;#bf3d27&#39;&gt;&lt;/br&gt;&lt;i class=&#39;fas fa-times-circle&#39;&gt;&lt;/i&gt;- &quot;;\r\n    \tString FormatMessageSucces = &quot;&lt;font color=&#39;#69c158&#39;&gt;&lt;/br&gt;&lt;i class=&#39;fas fa-check-circle&#39;&gt;&lt;/i&gt;-&quot;;\r\n    \t\t\r\n    \t@BeforeTest\r\n    \tpublic void LaunchWebsite() {\r\n    \t\t// Launch Chrome\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\chromedriver.exe&quot;);\r\n    \t\tdriver = new ChromeDriver();\r\n    \t\t// Acces Website\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\tBase b = new Base(driver);\r\n    \t\tReporter.log(FormatMessageSucces + &quot; Chrome is Opened&lt;/font&gt;&quot;);\r\n    \t}\r\n    //Your code\r\n    }\r\n\r\nListener is the same as the custome one just instead of calling Base call Main class.","title":"Code Crashes when it tries to take a screenshot","body":"<p>The answer was to remove the Base class and make the webdriver in my main class static and extend my main class in the listener.</p>\n<p>Main Class :</p>\n<pre><code>@Listeners(CustomListener.class)\npublic class AjoutPanier extends Assert {\n    public static WebDriver driver;\n    SoftAssert SaAjoutPanier = new SoftAssert();\n    String FormatMessageInformatife = &quot;&lt;font color='#73a9d0'&gt;&lt;/br&gt;&lt;i class='fas fa-info-circle'&gt;&lt;/i&gt;- &quot;;\n    String FormatMessageError = &quot;&lt;font color='#bf3d27'&gt;&lt;/br&gt;&lt;i class='fas fa-times-circle'&gt;&lt;/i&gt;- &quot;;\n    String FormatMessageSucces = &quot;&lt;font color='#69c158'&gt;&lt;/br&gt;&lt;i class='fas fa-check-circle'&gt;&lt;/i&gt;-&quot;;\n        \n    @BeforeTest\n    public void LaunchWebsite() {\n        // Launch Chrome\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\chromedriver.exe&quot;);\n        driver = new ChromeDriver();\n        // Acces Website\n        driver.manage().window().maximize();\n        Base b = new Base(driver);\n        Reporter.log(FormatMessageSucces + &quot; Chrome is Opened&lt;/font&gt;&quot;);\n    }\n//Your code\n}\n</code></pre>\n<p>Listener is the same as the custome one just instead of calling Base call Main class.</p>\n"}],"owner":{"account_id":23419335,"reputation":108,"user_id":17479815,"display_name":"Yan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1639064837,"creation_date":1637590209,"question_id":70067121,"body_markdown":"This is the ligne where my code crashes:\r\n\r\n    File file = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\r\n\r\nThis is the whole code i added into onTestFailure so that i take a screen shot if something goes wrong with my code\r\n\r\n    @Override\r\n    \tpublic void onTestFailure(ITestResult result) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tSystem.out.println(&quot;TestFailure acces&quot;);\r\n    \t\t\tFile file = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\r\n    \t\t\tFile ScreenshotName = new File(&quot;.//ScreenShots//test.png&quot;);\r\n    \t\t\tSystem.out.println(&quot;Files done&quot;);\r\n    \t\t\ttry {\r\n    \t\t\t\tSystem.out.println(&quot;try&quot;);\r\n    \t\t\t\tFileUtils.copyFile(file, ScreenshotName);\r\n    \t\t\t} catch (IOException e) {\r\n    \t\t\t\t// TODO Auto-generated catch block\r\n    \t\t\t\tSystem.out.println(&quot;catch&quot;);\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t}\r\n    \t\t\tReporter.log(&quot;&lt;/br&gt;&lt;img src=&#39;&quot;+ ScreenshotName +&quot;&#39;/&gt;&quot;);\r\n    \t\t\tSystem.out.println(&quot;*******Screenshot captured********&quot;);\r\n    \t}\r\n\r\nI dont have the smallest idea what is the reason for that since when i use the same thing with my test environement it works are there too many times that the test failure is called or what exactly ?\r\n\r\nEdit :\r\n\r\nThe error is :\r\n\r\n    java.lang.NullPointerException\r\n\r\nWhen i checked the debugger i saw that my `driver` comes null \r\nMy `driver` comme from the class Base\r\n\r\n    package AjouterPanier;\r\n    \r\n    import org.openqa.selenium.WebDriver;\r\n    \r\n    public class Base {\r\n    \tpublic static WebDriver driver;\r\n    }\r\n\r\nwhich it self if i understood what i did comes from my main class \r\n\r\n    @Listeners(CustomListener.class)\r\n    public class AjoutPanier extends Base {\r\n    \tWebDriver driver;\r\n    \tSoftAssert SaAjoutPanier = new SoftAssert();\r\n    \r\n    \tString FormatMessageInformatife = &quot;&lt;font color=&#39;#73a9d0&#39;&gt;&lt;/br&gt;&lt;i class=&#39;fas fa-info-circle&#39;&gt;&lt;/i&gt;- &quot;;\r\n    \tString FormatMessageError = &quot;&lt;font color=&#39;#bf3d27&#39;&gt;&lt;/br&gt;&lt;i class=&#39;fas fa-times-circle&#39;&gt;&lt;/i&gt;-&quot;;\r\n    \tString FormatMessageSucces = &quot;&lt;font color=&#39;#69c158&#39;&gt;&lt;/br&gt;&lt;i class=&#39;fas fa-check-circle&#39;&gt;&lt;/i&gt;-&quot;;\r\n    \r\n    \t@BeforeTest\r\n    \tpublic void LaunchWebsite() {\r\n    \t\t// Launch Chrome\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\chromedriver.exe&quot;);\r\n    \t\tdriver = new ChromeDriver();\r\n    \t\t// Acces Website\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\tReporter.log(FormatMessageSucces + &quot; Chrome is Opened&lt;/font&gt;&quot;);\r\n    \t} ....","title":"Code Crashes when it tries to take a screenshot","body":"<p>This is the ligne where my code crashes:</p>\n<pre><code>File file = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\n</code></pre>\n<p>This is the whole code i added into onTestFailure so that i take a screen shot if something goes wrong with my code</p>\n<pre><code>@Override\n    public void onTestFailure(ITestResult result) {\n        // TODO Auto-generated method stub\n        System.out.println(&quot;TestFailure acces&quot;);\n            File file = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);\n            File ScreenshotName = new File(&quot;.//ScreenShots//test.png&quot;);\n            System.out.println(&quot;Files done&quot;);\n            try {\n                System.out.println(&quot;try&quot;);\n                FileUtils.copyFile(file, ScreenshotName);\n            } catch (IOException e) {\n                // TODO Auto-generated catch block\n                System.out.println(&quot;catch&quot;);\n                e.printStackTrace();\n            }\n            Reporter.log(&quot;&lt;/br&gt;&lt;img src='&quot;+ ScreenshotName +&quot;'/&gt;&quot;);\n            System.out.println(&quot;*******Screenshot captured********&quot;);\n    }\n</code></pre>\n<p>I dont have the smallest idea what is the reason for that since when i use the same thing with my test environement it works are there too many times that the test failure is called or what exactly ?</p>\n<p>Edit :</p>\n<p>The error is :</p>\n<pre><code>java.lang.NullPointerException\n</code></pre>\n<p>When i checked the debugger i saw that my <code>driver</code> comes null\nMy <code>driver</code> comme from the class Base</p>\n<pre><code>package AjouterPanier;\n\nimport org.openqa.selenium.WebDriver;\n\npublic class Base {\n    public static WebDriver driver;\n}\n</code></pre>\n<p>which it self if i understood what i did comes from my main class</p>\n<pre><code>@Listeners(CustomListener.class)\npublic class AjoutPanier extends Base {\n    WebDriver driver;\n    SoftAssert SaAjoutPanier = new SoftAssert();\n\n    String FormatMessageInformatife = &quot;&lt;font color='#73a9d0'&gt;&lt;/br&gt;&lt;i class='fas fa-info-circle'&gt;&lt;/i&gt;- &quot;;\n    String FormatMessageError = &quot;&lt;font color='#bf3d27'&gt;&lt;/br&gt;&lt;i class='fas fa-times-circle'&gt;&lt;/i&gt;-&quot;;\n    String FormatMessageSucces = &quot;&lt;font color='#69c158'&gt;&lt;/br&gt;&lt;i class='fas fa-check-circle'&gt;&lt;/i&gt;-&quot;;\n\n    @BeforeTest\n    public void LaunchWebsite() {\n        // Launch Chrome\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\chromedriver.exe&quot;);\n        driver = new ChromeDriver();\n        // Acces Website\n        driver.manage().window().maximize();\n        Reporter.log(FormatMessageSucces + &quot; Chrome is Opened&lt;/font&gt;&quot;);\n    } ....\n</code></pre>\n"},{"tags":["java","jsf","primefaces","calendar"],"owner":{"account_id":6191801,"reputation":63,"user_id":4824334,"display_name":"Tamagits"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":967,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1639064736,"creation_date":1486540561,"question_id":42107556,"body_markdown":"I want to display BE calendar in client side , but the backing bean still AD calendar. , How to do that?\r\n\r\nI tried to set year to +543 in backing bean\r\n\r\n    Date dt = new Date();\r\n    Calendar c = Calendar.getInstance(); \r\n    c.setTime(dt); \r\n    c.add(Calendar.YEAR, 543);\r\n    dt = c.getTime();\r\n\r\nso it will have BE year , but they are not equals in format , as you see in the picture \r\n\r\n[![enter image description here][1]][1]\r\n\r\nfirst one is BE calendar that have 28 days , but AD have 29 days and BE 1st is on Wednesday ,  but AD 1st is on Friday \r\n\r\n\r\nI saw this link , I tried to add it on my project , but what I am need to do next? \r\nhttps://code.google.com/archive/p/jquery-ui-datepicker-extension-buddhist-era/\r\n\r\nor I can do with custom locale script at this line? \r\n\r\n    PrimeFaces.locales [&#39;th&#39;] = {\r\n    .\r\n    .\r\n    yearSuffix:&#39;&#39;,\r\n    .\r\n    }\r\n\r\nbut I still don&#39;t know how to get year from the calendar component\r\n\r\n  [1]: https://i.stack.imgur.com/Tpsgw.png","title":"How to display PrimeFaces Calendar with Buddhist Era format","body":"<p>I want to display BE calendar in client side , but the backing bean still AD calendar. , How to do that?</p>\n\n<p>I tried to set year to +543 in backing bean</p>\n\n<pre><code>Date dt = new Date();\nCalendar c = Calendar.getInstance(); \nc.setTime(dt); \nc.add(Calendar.YEAR, 543);\ndt = c.getTime();\n</code></pre>\n\n<p>so it will have BE year , but they are not equals in format , as you see in the picture </p>\n\n<p><a href=\"https://i.stack.imgur.com/Tpsgw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tpsgw.png\" alt=\"enter image description here\"></a></p>\n\n<p>first one is BE calendar that have 28 days , but AD have 29 days and BE 1st is on Wednesday ,  but AD 1st is on Friday </p>\n\n<p>I saw this link , I tried to add it on my project , but what I am need to do next? \n<a href=\"https://code.google.com/archive/p/jquery-ui-datepicker-extension-buddhist-era/\" rel=\"nofollow noreferrer\">https://code.google.com/archive/p/jquery-ui-datepicker-extension-buddhist-era/</a></p>\n\n<p>or I can do with custom locale script at this line? </p>\n\n<pre><code>PrimeFaces.locales ['th'] = {\n.\n.\nyearSuffix:'',\n.\n}\n</code></pre>\n\n<p>but I still don't know how to get year from the calendar component</p>\n"},{"tags":["java","abstract-class","builder"],"comments":[{"owner":{"account_id":2653232,"reputation":4799,"user_id":2294428,"display_name":"StephaneM"},"score":0,"creation_date":1639064100,"post_id":70292100,"comment_id":124257692,"body_markdown":"If parameters are optional, why don&#39;t you just use a constructor with no argument and then call the setters you need?","body":"If parameters are optional, why don&#39;t you just use a constructor with no argument and then call the setters you need?"},{"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"score":0,"creation_date":1639064410,"post_id":70292100,"comment_id":124257831,"body_markdown":"@StephaneM I guess, it&#39;s just the simplistic example. In real-world code, the builder should do validity checks. This can&#39;t be replicated with the combination of a no-args constructor plus setters, and you can&#39;t achieve e.g. immutability. So, I rarely recommend going down that path.","body":"@StephaneM I guess, it&#39;s just the simplistic example. In real-world code, the builder should do validity checks. This can&#39;t be replicated with the combination of a no-args constructor plus setters, and you can&#39;t achieve e.g. immutability. So, I rarely recommend going down that path."}],"answers":[{"tags":[],"owner":{"account_id":11180480,"reputation":7021,"user_id":8207228,"display_name":"Ralf Kleberhoff"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639064108,"creation_date":1639064108,"answer_id":70292592,"question_id":70292100,"body_markdown":"As there are no instances of `A` (being an abstract class), an `A` builder can only build instances of some none-abstract subclass of `A`. Having a builder at the level of an abstract class typically lets the builder decide which concrete subclass of `A` to instantiate, depending on parameters collected in the building process.\r\n\r\nThe idea behind that approach is that the caller isn&#39;t interested in the concrete class, just in the fact that it&#39;s an `A` subclass, and the builder is free to provide the instance that best suits the building request.\r\n\r\nIf your situation is different, in that the user wants to decide on the resulting class, then you&#39;d create multiple builders, and maybe have them inherit common parts from an (abstract) parent builder. But in such a situation, ask yourself whether using a builder has enough benefit over directly using a constructor to warrant the additional boilerplate code. And with constructors, you immediately get inheritance for free.\r\n\r\nThe fact that something like a &quot;builder pattern&quot; exists doesn&#39;t imply that it fulfills your requirements.\r\n\r\nSo, to summarize the options I see:\r\n\r\n- Have a builder at the `A` level that decides (in the `build()` method) which subclass to instantiate (if your users aren&#39;t interested in the concrete class, just &quot;any `A` implementation&quot;),\r\n- Have multiple builders, one for each subclass. To avoid code repetition, they can inherit from an abstract builder at the `A` class level. This gives complete control over the resulting type to the user.\r\n- Ignore the builder pattern, and use plain old constructors.","title":"Java: Abstract class with builder pattern","body":"<p>As there are no instances of <code>A</code> (being an abstract class), an <code>A</code> builder can only build instances of some none-abstract subclass of <code>A</code>. Having a builder at the level of an abstract class typically lets the builder decide which concrete subclass of <code>A</code> to instantiate, depending on parameters collected in the building process.</p>\n<p>The idea behind that approach is that the caller isn't interested in the concrete class, just in the fact that it's an <code>A</code> subclass, and the builder is free to provide the instance that best suits the building request.</p>\n<p>If your situation is different, in that the user wants to decide on the resulting class, then you'd create multiple builders, and maybe have them inherit common parts from an (abstract) parent builder. But in such a situation, ask yourself whether using a builder has enough benefit over directly using a constructor to warrant the additional boilerplate code. And with constructors, you immediately get inheritance for free.</p>\n<p>The fact that something like a &quot;builder pattern&quot; exists doesn't imply that it fulfills your requirements.</p>\n<p>So, to summarize the options I see:</p>\n<ul>\n<li>Have a builder at the <code>A</code> level that decides (in the <code>build()</code> method) which subclass to instantiate (if your users aren't interested in the concrete class, just &quot;any <code>A</code> implementation&quot;),</li>\n<li>Have multiple builders, one for each subclass. To avoid code repetition, they can inherit from an abstract builder at the <code>A</code> class level. This gives complete control over the resulting type to the user.</li>\n<li>Ignore the builder pattern, and use plain old constructors.</li>\n</ul>\n"}],"owner":{"account_id":15038882,"reputation":409,"user_id":10854248,"display_name":"Jannik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1518,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70292592,"answer_count":1,"score":2,"last_activity_date":1639064108,"creation_date":1639062196,"question_id":70292100,"body_markdown":"I hope this isn&#39;t a duplicate; I know there are some similarly named questions but none of them seemed to solve my problem.\r\n\r\nI have multiple classes that are exactly the same - apart from one specific method. So I decided to create one abstract parent class, let&#39;s call it `A`. `A` runs all the code and has one method `calculate()`, that all subclasses implement.\r\n\r\nSo far so good. My problem is, that all subclasses take a lot of optional parameters, so instead of creating lots of different constructors I decided to use the following builder pattern:\r\n\r\n```java\r\npublic abstract class A {\r\n   private int foo;\r\n   private int bar;\r\n   \r\n   public static class Builder {\r\n      private int foo;\r\n      private int bar;\r\n      \r\n      public Builder(int foo) {\r\n         this.foo = foo;\r\n      }\r\n    \r\n      public Builder bar(int bar) {\r\n         this.bar = bar;\r\n         return this;\r\n      }\r\n \r\n      public A build() {\r\n         return new A(this);\r\n      }\r\n   }\r\n\r\n   private A(Builder builder) {\r\n      this.foo = builder.foo;\r\n      this.bar = builder.bar;\r\n   }\r\n}\r\n```\r\n\r\nI used this specific pattern throughout my project a lot and it worked fine, as long as the class is not abstract. The problem is that the `build()` messages returns an `A` object, but `A`, of course, can not be instantiated.\r\n\r\nSo to me it seems there are two solutions, but none of them seem optimal:\r\n\r\n1. Move `Builder` class down to the subclasses of `A`, so they can be instantiated. This would result in a lot of redundant code, since all attributes the builder sets are identical.\r\n\r\n2. Make `A` not abstract. But that would allow another user to instantiate it, even though that&#39;s not its intended purpose.\r\n\r\nAm I missing something? I feel like there should be a more elegant solution, but I cant think of one at the moment... Thank you","title":"Java: Abstract class with builder pattern","body":"<p>I hope this isn't a duplicate; I know there are some similarly named questions but none of them seemed to solve my problem.</p>\n<p>I have multiple classes that are exactly the same - apart from one specific method. So I decided to create one abstract parent class, let's call it <code>A</code>. <code>A</code> runs all the code and has one method <code>calculate()</code>, that all subclasses implement.</p>\n<p>So far so good. My problem is, that all subclasses take a lot of optional parameters, so instead of creating lots of different constructors I decided to use the following builder pattern:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class A {\n   private int foo;\n   private int bar;\n   \n   public static class Builder {\n      private int foo;\n      private int bar;\n      \n      public Builder(int foo) {\n         this.foo = foo;\n      }\n    \n      public Builder bar(int bar) {\n         this.bar = bar;\n         return this;\n      }\n \n      public A build() {\n         return new A(this);\n      }\n   }\n\n   private A(Builder builder) {\n      this.foo = builder.foo;\n      this.bar = builder.bar;\n   }\n}\n</code></pre>\n<p>I used this specific pattern throughout my project a lot and it worked fine, as long as the class is not abstract. The problem is that the <code>build()</code> messages returns an <code>A</code> object, but <code>A</code>, of course, can not be instantiated.</p>\n<p>So to me it seems there are two solutions, but none of them seem optimal:</p>\n<ol>\n<li><p>Move <code>Builder</code> class down to the subclasses of <code>A</code>, so they can be instantiated. This would result in a lot of redundant code, since all attributes the builder sets are identical.</p>\n</li>\n<li><p>Make <code>A</code> not abstract. But that would allow another user to instantiate it, even though that's not its intended purpose.</p>\n</li>\n</ol>\n<p>Am I missing something? I feel like there should be a more elegant solution, but I cant think of one at the moment... Thank you</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":1,"creation_date":1638991923,"post_id":70279182,"comment_id":124237198,"body_markdown":"You seem to be deserializing some list of POJOs.  Does this POJO class have field `customMetricCategory` field?","body":"You seem to be deserializing some list of POJOs.  Does this POJO class have field <code>customMetricCategory</code> field?"},{"owner":{"account_id":7014645,"reputation":93,"user_id":5376420,"accept_rate":17,"display_name":"H. Tiwari"},"score":0,"creation_date":1639051945,"post_id":70279182,"comment_id":124252501,"body_markdown":"@AlexRudenko yes.\n\n\n\npackage com.integralads.crbworker.output.template.json;\n\npublic enum CustomMetricCategory {\n    CUSTOM_VIEWABILITY,\n    CUSTOM_VIEWABILITY_QI\n}","body":"@AlexRudenko yes.    package com.integralads.crbworker.output.template.json;  public enum CustomMetricCategory {     CUSTOM_VIEWABILITY,     CUSTOM_VIEWABILITY_QI }"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":1,"creation_date":1639055896,"post_id":70279182,"comment_id":124254074,"body_markdown":"Can you please add `TemplateColumn` code? Thanks!","body":"Can you please add <code>TemplateColumn</code> code? Thanks!"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":1,"creation_date":1639056807,"post_id":70279182,"comment_id":124254444,"body_markdown":"@H.Tiwari, this is not a _field_, but definition of the enum.  Does the POJO have that enum field: `class TemplateColumn { CustomMetricCategory customMetricCategory; ... }`?","body":"@H.Tiwari, this is not a <i>field</i>, but definition of the enum.  Does the POJO have that enum field: <code>class TemplateColumn { CustomMetricCategory customMetricCategory; ... }</code>?"},{"owner":{"account_id":7014645,"reputation":93,"user_id":5376420,"accept_rate":17,"display_name":"H. Tiwari"},"score":0,"creation_date":1639062946,"post_id":70279182,"comment_id":124257164,"body_markdown":"@AlexRudenko\nI have added the files in the end of question itself. Please let me know anything else I&#39;m missing.","body":"@AlexRudenko I have added the files in the end of question itself. Please let me know anything else I&#39;m missing."}],"answers":[{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639064002,"creation_date":1639064002,"answer_id":70292569,"question_id":70279182,"body_markdown":"There are two ways to get rid of the error:\r\n1. Add the missing field `private CustomMetricCategory customMetricCategory` to the `TemplateColumn` class and implement related getter/setter to comply with the input JSON:\r\n```java\r\npublic class TemplateColumn {\r\n\r\n    private String columnName;\r\n    private String columnLabel;\r\n    private ReportCell.CellType cellType;\r\n    private ReportColumnWidth columnWidth;\r\n    private ReportCell.CellAggType cellAggType;\r\n    private String cellAggColumn;\r\n    private CustomMetricCategory customMetricCategory;\r\n// ... getters/setters\r\n}\r\n```\r\n----\r\n2. Ignore failing on unknown properties when deserializing instances of `TemplateColumn` class.\r\n```java\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\npublic class TemplateColumn {\r\n...\r\n}\r\n```","title":"Build failed with UnrecognizedPropertyException: Unrecognized field &lt;Section&gt; error","body":"<p>There are two ways to get rid of the error:</p>\n<ol>\n<li>Add the missing field <code>private CustomMetricCategory customMetricCategory</code> to the <code>TemplateColumn</code> class and implement related getter/setter to comply with the input JSON:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class TemplateColumn {\n\n    private String columnName;\n    private String columnLabel;\n    private ReportCell.CellType cellType;\n    private ReportColumnWidth columnWidth;\n    private ReportCell.CellAggType cellAggType;\n    private String cellAggColumn;\n    private CustomMetricCategory customMetricCategory;\n// ... getters/setters\n}\n</code></pre>\n<hr />\n<ol start=\"2\">\n<li>Ignore failing on unknown properties when deserializing instances of <code>TemplateColumn</code> class.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class TemplateColumn {\n...\n}\n</code></pre>\n"}],"owner":{"account_id":7014645,"reputation":93,"user_id":5376420,"accept_rate":17,"display_name":"H. Tiwari"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70292569,"answer_count":1,"score":0,"last_activity_date":1639064002,"creation_date":1638984118,"question_id":70279182,"body_markdown":"In my JSON file I have defined customMetrics as\r\n```json\r\n&quot;customMetricHeadings&quot;: [\r\n  {\r\n    &quot;headingName&quot;: &quot;CUSTOM VIEWABILITY&quot;,\r\n    &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY&quot;\r\n  },\r\n  {\r\n    &quot;headingName&quot;: &quot;CUSTOM VIEWABILITY QI&quot;,\r\n    &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n  }\r\n]\r\n```\r\n\r\nI have defined this customMetricCategory for different metrics in the same JSON file as\r\n```json\r\n{\r\n  &quot;columnName&quot;: &quot;nonQualifiedForViewabilityAds4&quot;,\r\n  &quot;columnLabel&quot;: &quot;Not viewable ads, Excl. Geo, ?????&quot;,\r\n  &quot;cellType&quot;: &quot;COUNT&quot;,\r\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\r\n  &quot;cellAggType&quot;: &quot;SUM&quot;,\r\n  &quot;cellAggColumn&quot;: &quot;&quot;,\r\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n},\r\n{\r\n  &quot;columnName&quot;: &quot;nonQualifiedForViewabilityPct4&quot;,\r\n  &quot;columnLabel&quot;: &quot;% Non quality: not viewable, Excl. Geo, ?????&quot;,\r\n  &quot;cellType&quot;: &quot;TWO_PRECISION_PERCENT&quot;,\r\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\r\n  &quot;cellAggType&quot;: &quot;WEIGHTED_AVERAGE&quot;,\r\n  &quot;cellAggColumn&quot;: &quot;nonQualifiedAds4&quot;,\r\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n},\r\n{\r\n  &quot;columnName&quot;: &quot;nonQualifiedForBrandSafetyAds4&quot;,\r\n  &quot;columnLabel&quot;: &quot;Failed brand safety ads, Excl. Geo, ?????&quot;,\r\n  &quot;cellType&quot;: &quot;COUNT&quot;,\r\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\r\n  &quot;cellAggType&quot;: &quot;SUM&quot;,\r\n  &quot;cellAggColumn&quot;: &quot;&quot;,\r\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n},\r\n{\r\n  &quot;columnName&quot;: &quot;nonQualifiedForBrandSafetyPct4&quot;,\r\n  &quot;columnLabel&quot;: &quot;% Non quality: failed brand safety, Excl. Geo, ?????&quot;,\r\n  &quot;cellType&quot;: &quot;TWO_PRECISION_PERCENT&quot;,\r\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\r\n  &quot;cellAggType&quot;: &quot;WEIGHTED_AVERAGE&quot;,\r\n  &quot;cellAggColumn&quot;: &quot;nonQualifiedAds4&quot;,\r\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n},\r\n{\r\n  &quot;columnName&quot;: &quot;nonQualifiedForFraudAds4&quot;,\r\n  &quot;columnLabel&quot;: &quot;Invalid traffic ads, Excl. Geo, ?????&quot;,\r\n  &quot;cellType&quot;: &quot;COUNT&quot;,\r\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\r\n  &quot;cellAggType&quot;: &quot;SUM&quot;,\r\n  &quot;cellAggColumn&quot;: &quot;&quot;,\r\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n},\r\n{\r\n  &quot;columnName&quot;: &quot;nonQualifiedForFraudPct4&quot;,\r\n  &quot;columnLabel&quot;: &quot;% Non quality: IVT, Excl. Geo, ?????&quot;,\r\n  &quot;cellType&quot;: &quot;TWO_PRECISION_PERCENT&quot;,\r\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\r\n  &quot;cellAggType&quot;: &quot;WEIGHTED_AVERAGE&quot;,\r\n  &quot;cellAggColumn&quot;: &quot;nonQualifiedAds4&quot;,\r\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n},\r\n{\r\n  &quot;columnName&quot;: &quot;nonQualifiedForGeoAds4&quot;,\r\n  &quot;columnLabel&quot;: &quot;Out of geo ads, Excl. Geo, ?????&quot;,\r\n  &quot;cellType&quot;: &quot;COUNT&quot;,\r\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\r\n  &quot;cellAggType&quot;: &quot;SUM&quot;,\r\n  &quot;cellAggColumn&quot;: &quot;&quot;,\r\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n},\r\n{\r\n  &quot;columnName&quot;: &quot;nonQualifiedForGeoPct4&quot;,\r\n  &quot;columnLabel&quot;: &quot;% Non quality: Out of geo, Excl. Geo, ?????&quot;,\r\n  &quot;cellType&quot;: &quot;TWO_PRECISION_PERCENT&quot;,\r\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\r\n  &quot;cellAggType&quot;: &quot;WEIGHTED_AVERAGE&quot;,\r\n  &quot;cellAggColumn&quot;: &quot;nonQualifiedAds4&quot;,\r\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\r\n}\r\n```\r\n\r\nWhile running the repo in my local, build is failing with the following error:\r\n\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;CRBTemplates&#39;: Invocation of init method failed; nested exception is com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;customMetricCategory&quot; (class com.integralads.crbworker.output.template.json.TemplateColumn), not marked as ignorable (6 known properties: &quot;columnWidth&quot;, &quot;columnName&quot;, &quot;cellAggColumn&quot;, &quot;cellAggType&quot;, &quot;cellType&quot;, &quot;columnLabel&quot;])\r\n     at [Source: (URL); line: 2170, column: 32] (through reference chain: com.integralads.crbworker.output.template.json.Template[&quot;columns&quot;]-&gt;java.util.ArrayList[205]-&gt;com.integralads.crbworker.output.template.json.TemplateColumn[&quot;customMetricCategory&quot;])\r\n            at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:414)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n            at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1248)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168)\r\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593)\r\n            ... 98 common frames omitted\r\n    Caused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;customMetricCategory&quot; (class com.integralads.crbworker.output.template.json.TemplateColumn), not marked as ignorable (6 known properties: &quot;columnWidth&quot;, &quot;columnName&quot;, &quot;cellAggColumn&quot;, &quot;cellAggType&quot;, &quot;cellType&quot;, &quot;columnLabel&quot;])\r\n\r\nDo I need to define anything else for this customMetricCategory? How can I get rid of this error?\r\n\r\nTemplateColumn.java class\r\n\r\n    package com.integralads.crbworker.output.template.json;\r\n    \r\n    import com.integralads.crbworker.excel.core.ReportCell;\r\n    import com.integralads.crbworker.excel.core.ReportColumnWidth;\r\n    \r\n    public class TemplateColumn {\r\n    \r\n        private String columnName;\r\n        private String columnLabel;\r\n        private ReportCell.CellType cellType;\r\n        private ReportColumnWidth columnWidth;\r\n        private ReportCell.CellAggType cellAggType;\r\n        private String cellAggColumn;\r\n    \r\n        public String getColumnName() {\r\n            return columnName;\r\n        }\r\n    \r\n        public void setColumnName(String columnName) {\r\n            this.columnName = columnName;\r\n        }\r\n    \r\n        public String getColumnLabel() {\r\n            return columnLabel;\r\n        }\r\n    \r\n        public void setColumnLabel(String columnLabel) {\r\n            this.columnLabel = columnLabel;\r\n        }\r\n    \r\n        public ReportCell.CellType getCellType() {\r\n            return cellType;\r\n        }\r\n    \r\n        public void setCellType(ReportCell.CellType cellType) {\r\n            this.cellType = cellType;\r\n        }\r\n    \r\n        public ReportColumnWidth getColumnWidth() {\r\n            return columnWidth;\r\n        }\r\n    \r\n        public void setColumnWidth(ReportColumnWidth columnWidth) {\r\n            this.columnWidth = columnWidth;\r\n        }\r\n    \r\n        public ReportCell.CellAggType getCellAggType() {\r\n            return cellAggType;\r\n        }\r\n    \r\n        public void setCellAggType(ReportCell.CellAggType cellAggType) {\r\n            this.cellAggType = cellAggType;\r\n        }\r\n    \r\n        public String getCellAggColumn() {\r\n            return cellAggColumn;\r\n        }\r\n    \r\n        public void setCellAggColumn(String cellAggColumn) {\r\n            this.cellAggColumn = cellAggColumn;\r\n        }\r\n    }\r\n\r\nAlso there is a TemplateCustomMetricheading.java class also define for the customMetricCategory\r\n\r\n    package com.integralads.crbworker.output.template.json;\r\n    \r\n    public class TemplateCustomMetricHeading {\r\n        private String headingName;\r\n        private CustomMetricCategory customMetricCategory;\r\n    \r\n        public String getHeadingName() {\r\n            return headingName;\r\n        }\r\n    \r\n        public void setHeadingName(String headingName) {\r\n            this.headingName = headingName;\r\n        }\r\n    \r\n        public CustomMetricCategory getCustomMetricCategory() {\r\n            return customMetricCategory;\r\n        }\r\n    \r\n        public void setCustomMetricCategory(CustomMetricCategory customMetricCategory) {\r\n            this.customMetricCategory = customMetricCategory;\r\n        }\r\n    }\r\n\r\n","title":"Build failed with UnrecognizedPropertyException: Unrecognized field &lt;Section&gt; error","body":"<p>In my JSON file I have defined customMetrics as</p>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;customMetricHeadings&quot;: [\n  {\n    &quot;headingName&quot;: &quot;CUSTOM VIEWABILITY&quot;,\n    &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY&quot;\n  },\n  {\n    &quot;headingName&quot;: &quot;CUSTOM VIEWABILITY QI&quot;,\n    &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n  }\n]\n</code></pre>\n<p>I have defined this customMetricCategory for different metrics in the same JSON file as</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;columnName&quot;: &quot;nonQualifiedForViewabilityAds4&quot;,\n  &quot;columnLabel&quot;: &quot;Not viewable ads, Excl. Geo, ?????&quot;,\n  &quot;cellType&quot;: &quot;COUNT&quot;,\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\n  &quot;cellAggType&quot;: &quot;SUM&quot;,\n  &quot;cellAggColumn&quot;: &quot;&quot;,\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n},\n{\n  &quot;columnName&quot;: &quot;nonQualifiedForViewabilityPct4&quot;,\n  &quot;columnLabel&quot;: &quot;% Non quality: not viewable, Excl. Geo, ?????&quot;,\n  &quot;cellType&quot;: &quot;TWO_PRECISION_PERCENT&quot;,\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\n  &quot;cellAggType&quot;: &quot;WEIGHTED_AVERAGE&quot;,\n  &quot;cellAggColumn&quot;: &quot;nonQualifiedAds4&quot;,\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n},\n{\n  &quot;columnName&quot;: &quot;nonQualifiedForBrandSafetyAds4&quot;,\n  &quot;columnLabel&quot;: &quot;Failed brand safety ads, Excl. Geo, ?????&quot;,\n  &quot;cellType&quot;: &quot;COUNT&quot;,\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\n  &quot;cellAggType&quot;: &quot;SUM&quot;,\n  &quot;cellAggColumn&quot;: &quot;&quot;,\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n},\n{\n  &quot;columnName&quot;: &quot;nonQualifiedForBrandSafetyPct4&quot;,\n  &quot;columnLabel&quot;: &quot;% Non quality: failed brand safety, Excl. Geo, ?????&quot;,\n  &quot;cellType&quot;: &quot;TWO_PRECISION_PERCENT&quot;,\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\n  &quot;cellAggType&quot;: &quot;WEIGHTED_AVERAGE&quot;,\n  &quot;cellAggColumn&quot;: &quot;nonQualifiedAds4&quot;,\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n},\n{\n  &quot;columnName&quot;: &quot;nonQualifiedForFraudAds4&quot;,\n  &quot;columnLabel&quot;: &quot;Invalid traffic ads, Excl. Geo, ?????&quot;,\n  &quot;cellType&quot;: &quot;COUNT&quot;,\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\n  &quot;cellAggType&quot;: &quot;SUM&quot;,\n  &quot;cellAggColumn&quot;: &quot;&quot;,\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n},\n{\n  &quot;columnName&quot;: &quot;nonQualifiedForFraudPct4&quot;,\n  &quot;columnLabel&quot;: &quot;% Non quality: IVT, Excl. Geo, ?????&quot;,\n  &quot;cellType&quot;: &quot;TWO_PRECISION_PERCENT&quot;,\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\n  &quot;cellAggType&quot;: &quot;WEIGHTED_AVERAGE&quot;,\n  &quot;cellAggColumn&quot;: &quot;nonQualifiedAds4&quot;,\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n},\n{\n  &quot;columnName&quot;: &quot;nonQualifiedForGeoAds4&quot;,\n  &quot;columnLabel&quot;: &quot;Out of geo ads, Excl. Geo, ?????&quot;,\n  &quot;cellType&quot;: &quot;COUNT&quot;,\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\n  &quot;cellAggType&quot;: &quot;SUM&quot;,\n  &quot;cellAggColumn&quot;: &quot;&quot;,\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n},\n{\n  &quot;columnName&quot;: &quot;nonQualifiedForGeoPct4&quot;,\n  &quot;columnLabel&quot;: &quot;% Non quality: Out of geo, Excl. Geo, ?????&quot;,\n  &quot;cellType&quot;: &quot;TWO_PRECISION_PERCENT&quot;,\n  &quot;columnWidth&quot;: &quot;CHAR_17&quot;,\n  &quot;cellAggType&quot;: &quot;WEIGHTED_AVERAGE&quot;,\n  &quot;cellAggColumn&quot;: &quot;nonQualifiedAds4&quot;,\n  &quot;customMetricCategory&quot;: &quot;CUSTOM_VIEWABILITY_QI&quot;\n}\n</code></pre>\n<p>While running the repo in my local, build is failing with the following error:</p>\n<pre><code>Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'CRBTemplates': Invocation of init method failed; nested exception is com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;customMetricCategory&quot; (class com.integralads.crbworker.output.template.json.TemplateColumn), not marked as ignorable (6 known properties: &quot;columnWidth&quot;, &quot;columnName&quot;, &quot;cellAggColumn&quot;, &quot;cellAggType&quot;, &quot;cellType&quot;, &quot;columnLabel&quot;])\n at [Source: (URL); line: 2170, column: 32] (through reference chain: com.integralads.crbworker.output.template.json.Template[&quot;columns&quot;]-&gt;java.util.ArrayList[205]-&gt;com.integralads.crbworker.output.template.json.TemplateColumn[&quot;customMetricCategory&quot;])\n        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:139)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:414)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:593)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1248)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593)\n        ... 98 common frames omitted\nCaused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;customMetricCategory&quot; (class com.integralads.crbworker.output.template.json.TemplateColumn), not marked as ignorable (6 known properties: &quot;columnWidth&quot;, &quot;columnName&quot;, &quot;cellAggColumn&quot;, &quot;cellAggType&quot;, &quot;cellType&quot;, &quot;columnLabel&quot;])\n</code></pre>\n<p>Do I need to define anything else for this customMetricCategory? How can I get rid of this error?</p>\n<p>TemplateColumn.java class</p>\n<pre><code>package com.integralads.crbworker.output.template.json;\n\nimport com.integralads.crbworker.excel.core.ReportCell;\nimport com.integralads.crbworker.excel.core.ReportColumnWidth;\n\npublic class TemplateColumn {\n\n    private String columnName;\n    private String columnLabel;\n    private ReportCell.CellType cellType;\n    private ReportColumnWidth columnWidth;\n    private ReportCell.CellAggType cellAggType;\n    private String cellAggColumn;\n\n    public String getColumnName() {\n        return columnName;\n    }\n\n    public void setColumnName(String columnName) {\n        this.columnName = columnName;\n    }\n\n    public String getColumnLabel() {\n        return columnLabel;\n    }\n\n    public void setColumnLabel(String columnLabel) {\n        this.columnLabel = columnLabel;\n    }\n\n    public ReportCell.CellType getCellType() {\n        return cellType;\n    }\n\n    public void setCellType(ReportCell.CellType cellType) {\n        this.cellType = cellType;\n    }\n\n    public ReportColumnWidth getColumnWidth() {\n        return columnWidth;\n    }\n\n    public void setColumnWidth(ReportColumnWidth columnWidth) {\n        this.columnWidth = columnWidth;\n    }\n\n    public ReportCell.CellAggType getCellAggType() {\n        return cellAggType;\n    }\n\n    public void setCellAggType(ReportCell.CellAggType cellAggType) {\n        this.cellAggType = cellAggType;\n    }\n\n    public String getCellAggColumn() {\n        return cellAggColumn;\n    }\n\n    public void setCellAggColumn(String cellAggColumn) {\n        this.cellAggColumn = cellAggColumn;\n    }\n}\n</code></pre>\n<p>Also there is a TemplateCustomMetricheading.java class also define for the customMetricCategory</p>\n<pre><code>package com.integralads.crbworker.output.template.json;\n\npublic class TemplateCustomMetricHeading {\n    private String headingName;\n    private CustomMetricCategory customMetricCategory;\n\n    public String getHeadingName() {\n        return headingName;\n    }\n\n    public void setHeadingName(String headingName) {\n        this.headingName = headingName;\n    }\n\n    public CustomMetricCategory getCustomMetricCategory() {\n        return customMetricCategory;\n    }\n\n    public void setCustomMetricCategory(CustomMetricCategory customMetricCategory) {\n        this.customMetricCategory = customMetricCategory;\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring","spring-boot","heroku"],"comments":[{"owner":{"account_id":145051,"reputation":130089,"user_id":354577,"accept_rate":100,"display_name":"Chris"},"score":0,"creation_date":1638898295,"post_id":70264019,"comment_id":124208074,"body_markdown":"Are there no other details in your output from `heroku logs`? Please show us several lines of preceding context.","body":"Are there no other details in your output from <code>heroku logs</code>? Please show us several lines of preceding context."},{"owner":{"account_id":17619964,"reputation":29,"user_id":12786165,"display_name":"timi_gun"},"score":0,"creation_date":1639063379,"post_id":70264019,"comment_id":124257349,"body_markdown":"@Chris thanks, I have added the full logs now.","body":"@Chris thanks, I have added the full logs now."}],"answers":[{"tags":[],"owner":{"account_id":19970181,"reputation":186,"user_id":14635852,"display_name":"Josh Van de Walle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638903601,"creation_date":1638903265,"answer_id":70265553,"question_id":70264019,"body_markdown":"When I deploy a Spring Boot app to Heroku, I set the port to 8080 in application.yml/application.properties and do not use a Procfile. ","title":"Can&#39;t get Heroku to display my Spring Boot app","body":"<p>When I deploy a Spring Boot app to Heroku, I set the port to 8080 in application.yml/application.properties and do not use a Procfile.</p>\n"}],"owner":{"account_id":17619964,"reputation":29,"user_id":12786165,"display_name":"timi_gun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":502,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639063350,"creation_date":1638896096,"question_id":70264019,"body_markdown":"I am trying to deploy a spring boot app with MySQL database to Heroku. The app works on my local server port 8080, the build to Heroku succeeds, the deployment to Heroku succeeds, but when I open my app on Heroku it just shows application error.\r\n\r\nI suspect it has something to do with the ${PORT} variable that Heroku assigns. I have researched how to change the port with spring boot and added it to a Procfile and application.properties file. I also tried system.properties and even a .env file, but none of it is working. I also commented out all the code relating to the database, because that wouldn&#39;t work on Heroku without also hosting the database. So I am really just trying to get the basic GET paths / and /Greeting to work.\r\n\r\nheroku logs --tail:\r\n```\r\n2021-12-09T12:07:53.689215+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n2021-12-09T12:07:53.689215+00:00 app[web.1]: at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n2021-12-09T12:07:53.689216+00:00 app[web.1]: at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n2021-12-09T12:07:53.689216+00:00 app[web.1]: at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.689217+00:00 app[web.1]: at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.689217+00:00 app[web.1]: at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.689217+00:00 app[web.1]: at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.689218+00:00 app[web.1]: Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n2021-12-09T12:07:53.689218+00:00 app[web.1]:\r\n2021-12-09T12:07:53.689218+00:00 app[web.1]: The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n2021-12-09T12:07:53.689219+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\n2021-12-09T12:07:53.689219+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\n2021-12-09T12:07:53.689219+00:00 app[web.1]: at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\n2021-12-09T12:07:53.689220+00:00 app[web.1]: at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\n2021-12-09T12:07:53.689220+00:00 app[web.1]: at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\r\n2021-12-09T12:07:53.689220+00:00 app[web.1]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689221+00:00 app[web.1]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689221+00:00 app[web.1]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689221+00:00 app[web.1]: at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689221+00:00 app[web.1]: at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689222+00:00 app[web.1]: at com.mysql.cj.NativeSession.connect(NativeSession.java:120) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689222+00:00 app[web.1]: at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689222+00:00 app[web.1]: at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689223+00:00 app[web.1]: ... 57 common frames omitted\r\n2021-12-09T12:07:53.689224+00:00 app[web.1]: Caused by: java.net.ConnectException: Connection refused\r\n2021-12-09T12:07:53.689224+00:00 app[web.1]: at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\r\n2021-12-09T12:07:53.689224+00:00 app[web.1]: at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\r\n2021-12-09T12:07:53.689225+00:00 app[web.1]: at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542) ~[na:na]\r\n2021-12-09T12:07:53.689225+00:00 app[web.1]: at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]\r\n2021-12-09T12:07:53.689225+00:00 app[web.1]: at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\r\n2021-12-09T12:07:53.689226+00:00 app[web.1]: at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\r\n2021-12-09T12:07:53.689227+00:00 app[web.1]: at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:156) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689227+00:00 app[web.1]: at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\r\n2021-12-09T12:07:53.689227+00:00 app[web.1]: ... 60 common frames omitted\r\n2021-12-09T12:07:53.689227+00:00 app[web.1]:\r\n2021-12-09T12:07:53.691483+00:00 app[web.1]: 2021-12-09 12:07:53.691 ERROR 4 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n2021-12-09T12:07:53.692011+00:00 app[web.1]: 2021-12-09 12:07:53.691  WARN 4 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n2021-12-09T12:07:53.702976+00:00 app[web.1]: 2021-12-09 12:07:53.702  INFO 4 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2021-12-09T12:07:53.718223+00:00 app[web.1]: 2021-12-09 12:07:53.717  INFO 4 --- [           main] ConditionEvaluationReportLoggingListener :\r\n2021-12-09T12:07:53.718225+00:00 app[web.1]:\r\n2021-12-09T12:07:53.718226+00:00 app[web.1]: Error starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2021-12-09T12:07:53.740870+00:00 app[web.1]: 2021-12-09 12:07:53.740 ERROR 4 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n2021-12-09T12:07:53.740872+00:00 app[web.1]:\r\n2021-12-09T12:07:53.740886+00:00 app[web.1]: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n2021-12-09T12:07:53.740887+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740888+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740888+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740889+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740889+00:00 app[web.1]: at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740890+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740890+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740890+00:00 app[web.1]: at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740891+00:00 app[web.1]: at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740891+00:00 app[web.1]: at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740891+00:00 app[web.1]: at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n2021-12-09T12:07:53.740892+00:00 app[web.1]: at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n2021-12-09T12:07:53.740892+00:00 app[web.1]: at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n2021-12-09T12:07:53.740892+00:00 app[web.1]: at org.springframework.boot.SpringApplication.run(SpringApplication.java:302) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n2021-12-09T12:07:53.740893+00:00 app[web.1]: at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n2021-12-09T12:07:53.740893+00:00 app[web.1]: at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290) ~[spring-boot-2.6.1.jar!/:2.6.1]\r\n2021-12-09T12:07:53.740893+00:00 app[web.1]: at hyperion.Doc2Blog.Doc2BlogApplication.main(Doc2BlogApplication.java:19) ~[classes!/:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.740894+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n2021-12-09T12:07:53.740894+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n2021-12-09T12:07:53.740894+00:00 app[web.1]: at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n2021-12-09T12:07:53.740895+00:00 app[web.1]: at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n2021-12-09T12:07:53.740896+00:00 app[web.1]: at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.740896+00:00 app[web.1]: at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.740896+00:00 app[web.1]: at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.740896+00:00 app[web.1]: at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n2021-12-09T12:07:53.740897+00:00 app[web.1]: Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\r\n2021-12-09T12:07:53.740901+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740902+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740902+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740902+00:00 app[web.1]: at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:178) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740903+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740903+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740903+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740904+00:00 app[web.1]: at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:175) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740904+00:00 app[web.1]: at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740904+00:00 app[web.1]: at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740905+00:00 app[web.1]: at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740905+00:00 app[web.1]: at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740906+00:00 app[web.1]: at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740906+00:00 app[web.1]: at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740915+00:00 app[web.1]: at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740915+00:00 app[web.1]: at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740916+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740916+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.13.jar!/:5.3.13]\r\n2021-12-09T12:07:53.740917+00:00 app[web.1]: ... 24 common frames omitted\r\n2021-12-09T12:07:53.740917+00:00 app[web.1]: Caused by: org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when &#39;hibernate.dialect&#39; not set\r\n2021-12-09T12:07:53.740917+00:00 app[web.1]: at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:100) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740918+00:00 app[web.1]: at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:54) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740918+00:00 app[web.1]: at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:138) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740918+00:00 app[web.1]: at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740919+00:00 app[web.1]: at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740921+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\r\n2021-12-09T12:07:53.740922+00:00 app[web.1]: ... 41 common frames omitted\r\n2021-12-09T12:07:53.740922+00:00 app[web.1]:\r\n2021-12-09T12:07:53.929245+00:00 heroku[web.1]: Process exited with status 1\r\n2021-12-09T12:07:54.092144+00:00 heroku[web.1]: State changed from starting to crashed\r\n```\r\n\r\nMy Procfile:\r\n```\r\nweb java -Dserver.port=$PORT $JAVA_OPTS -jar target/Doc2Blog-0.0.1-SNAPSHOT.jar\r\n```\r\n\r\nMy application.properties file:\r\n```\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/db_example\r\nspring.datasource.username=springuser\r\nspring.datasource.password=ThePassword\r\nspring.datasource.driver-class-name =com.mysql.cj.jdbc.Driver\r\nserver.port=${PORT:8080}\r\n#spring.jpa.show-sql: true\r\n```\r\n\r\nMy system.properties file:\r\n```\r\njava.runtime.version=17\r\n```\r\n\r\nMy POML.xml file:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;hyperion&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;Doc2Blog&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;Doc2Blog&lt;/name&gt;\r\n\t&lt;description&gt;Converts docs to blogposts&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n","title":"Can&#39;t get Heroku to display my Spring Boot app","body":"<p>I am trying to deploy a spring boot app with MySQL database to Heroku. The app works on my local server port 8080, the build to Heroku succeeds, the deployment to Heroku succeeds, but when I open my app on Heroku it just shows application error.</p>\n<p>I suspect it has something to do with the ${PORT} variable that Heroku assigns. I have researched how to change the port with spring boot and added it to a Procfile and application.properties file. I also tried system.properties and even a .env file, but none of it is working. I also commented out all the code relating to the database, because that wouldn't work on Heroku without also hosting the database. So I am really just trying to get the basic GET paths / and /Greeting to work.</p>\n<p>heroku logs --tail:</p>\n<pre><code>2021-12-09T12:07:53.689215+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n2021-12-09T12:07:53.689215+00:00 app[web.1]: at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n2021-12-09T12:07:53.689216+00:00 app[web.1]: at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n2021-12-09T12:07:53.689216+00:00 app[web.1]: at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.689217+00:00 app[web.1]: at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.689217+00:00 app[web.1]: at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.689217+00:00 app[web.1]: at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.689218+00:00 app[web.1]: Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\n2021-12-09T12:07:53.689218+00:00 app[web.1]:\n2021-12-09T12:07:53.689218+00:00 app[web.1]: The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n2021-12-09T12:07:53.689219+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\n2021-12-09T12:07:53.689219+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\n2021-12-09T12:07:53.689219+00:00 app[web.1]: at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\n2021-12-09T12:07:53.689220+00:00 app[web.1]: at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\n2021-12-09T12:07:53.689220+00:00 app[web.1]: at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]\n2021-12-09T12:07:53.689220+00:00 app[web.1]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689221+00:00 app[web.1]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689221+00:00 app[web.1]: at com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689221+00:00 app[web.1]: at com.mysql.cj.exceptions.ExceptionFactory.createCommunicationsException(ExceptionFactory.java:167) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689221+00:00 app[web.1]: at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:89) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689222+00:00 app[web.1]: at com.mysql.cj.NativeSession.connect(NativeSession.java:120) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689222+00:00 app[web.1]: at com.mysql.cj.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:948) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689222+00:00 app[web.1]: at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:818) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689223+00:00 app[web.1]: ... 57 common frames omitted\n2021-12-09T12:07:53.689224+00:00 app[web.1]: Caused by: java.net.ConnectException: Connection refused\n2021-12-09T12:07:53.689224+00:00 app[web.1]: at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\n2021-12-09T12:07:53.689224+00:00 app[web.1]: at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\n2021-12-09T12:07:53.689225+00:00 app[web.1]: at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:542) ~[na:na]\n2021-12-09T12:07:53.689225+00:00 app[web.1]: at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:597) ~[na:na]\n2021-12-09T12:07:53.689225+00:00 app[web.1]: at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\n2021-12-09T12:07:53.689226+00:00 app[web.1]: at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\n2021-12-09T12:07:53.689227+00:00 app[web.1]: at com.mysql.cj.protocol.StandardSocketFactory.connect(StandardSocketFactory.java:156) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689227+00:00 app[web.1]: at com.mysql.cj.protocol.a.NativeSocketConnection.connect(NativeSocketConnection.java:63) ~[mysql-connector-java-8.0.27.jar!/:8.0.27]\n2021-12-09T12:07:53.689227+00:00 app[web.1]: ... 60 common frames omitted\n2021-12-09T12:07:53.689227+00:00 app[web.1]:\n2021-12-09T12:07:53.691483+00:00 app[web.1]: 2021-12-09 12:07:53.691 ERROR 4 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n2021-12-09T12:07:53.692011+00:00 app[web.1]: 2021-12-09 12:07:53.691  WARN 4 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n2021-12-09T12:07:53.702976+00:00 app[web.1]: 2021-12-09 12:07:53.702  INFO 4 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2021-12-09T12:07:53.718223+00:00 app[web.1]: 2021-12-09 12:07:53.717  INFO 4 --- [           main] ConditionEvaluationReportLoggingListener :\n2021-12-09T12:07:53.718225+00:00 app[web.1]:\n2021-12-09T12:07:53.718226+00:00 app[web.1]: Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2021-12-09T12:07:53.740870+00:00 app[web.1]: 2021-12-09 12:07:53.740 ERROR 4 --- [           main] o.s.boot.SpringApplication               : Application run failed\n2021-12-09T12:07:53.740872+00:00 app[web.1]:\n2021-12-09T12:07:53.740886+00:00 app[web.1]: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n2021-12-09T12:07:53.740887+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740888+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740888+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740889+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740889+00:00 app[web.1]: at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740890+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740890+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740890+00:00 app[web.1]: at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740891+00:00 app[web.1]: at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740891+00:00 app[web.1]: at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740891+00:00 app[web.1]: at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.1.jar!/:2.6.1]\n2021-12-09T12:07:53.740892+00:00 app[web.1]: at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-2.6.1.jar!/:2.6.1]\n2021-12-09T12:07:53.740892+00:00 app[web.1]: at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:412) ~[spring-boot-2.6.1.jar!/:2.6.1]\n2021-12-09T12:07:53.740892+00:00 app[web.1]: at org.springframework.boot.SpringApplication.run(SpringApplication.java:302) ~[spring-boot-2.6.1.jar!/:2.6.1]\n2021-12-09T12:07:53.740893+00:00 app[web.1]: at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.1.jar!/:2.6.1]\n2021-12-09T12:07:53.740893+00:00 app[web.1]: at org.springframework.boot.SpringApplication.run(SpringApplication.java:1290) ~[spring-boot-2.6.1.jar!/:2.6.1]\n2021-12-09T12:07:53.740893+00:00 app[web.1]: at hyperion.Doc2Blog.Doc2BlogApplication.main(Doc2BlogApplication.java:19) ~[classes!/:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.740894+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n2021-12-09T12:07:53.740894+00:00 app[web.1]: at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n2021-12-09T12:07:53.740894+00:00 app[web.1]: at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n2021-12-09T12:07:53.740895+00:00 app[web.1]: at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n2021-12-09T12:07:53.740896+00:00 app[web.1]: at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.740896+00:00 app[web.1]: at org.springframework.boot.loader.Launcher.launch(Launcher.java:108) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.740896+00:00 app[web.1]: at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.740896+00:00 app[web.1]: at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88) ~[Doc2Blog-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n2021-12-09T12:07:53.740897+00:00 app[web.1]: Caused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment]\n2021-12-09T12:07:53.740901+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740902+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740902+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740902+00:00 app[web.1]: at org.hibernate.id.factory.internal.DefaultIdentifierGeneratorFactory.injectServices(DefaultIdentifierGeneratorFactory.java:178) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740903+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.injectDependencies(AbstractServiceRegistryImpl.java:286) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740903+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:243) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740903+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740904+00:00 app[web.1]: at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:175) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740904+00:00 app[web.1]: at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:127) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740904+00:00 app[web.1]: at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1460) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740905+00:00 app[web.1]: at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1494) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740905+00:00 app[web.1]: at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740906+00:00 app[web.1]: at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740906+00:00 app[web.1]: at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740915+00:00 app[web.1]: at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740915+00:00 app[web.1]: at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740916+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740916+00:00 app[web.1]: at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.13.jar!/:5.3.13]\n2021-12-09T12:07:53.740917+00:00 app[web.1]: ... 24 common frames omitted\n2021-12-09T12:07:53.740917+00:00 app[web.1]: Caused by: org.hibernate.HibernateException: Access to DialectResolutionInfo cannot be null when 'hibernate.dialect' not set\n2021-12-09T12:07:53.740917+00:00 app[web.1]: at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.determineDialect(DialectFactoryImpl.java:100) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740918+00:00 app[web.1]: at org.hibernate.engine.jdbc.dialect.internal.DialectFactoryImpl.buildDialect(DialectFactoryImpl.java:54) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740918+00:00 app[web.1]: at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:138) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740918+00:00 app[web.1]: at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740919+00:00 app[web.1]: at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740921+00:00 app[web.1]: at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.6.1.Final.jar!/:5.6.1.Final]\n2021-12-09T12:07:53.740922+00:00 app[web.1]: ... 41 common frames omitted\n2021-12-09T12:07:53.740922+00:00 app[web.1]:\n2021-12-09T12:07:53.929245+00:00 heroku[web.1]: Process exited with status 1\n2021-12-09T12:07:54.092144+00:00 heroku[web.1]: State changed from starting to crashed\n</code></pre>\n<p>My Procfile:</p>\n<pre><code>web java -Dserver.port=$PORT $JAVA_OPTS -jar target/Doc2Blog-0.0.1-SNAPSHOT.jar\n</code></pre>\n<p>My application.properties file:</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST:localhost}:3306/db_example\nspring.datasource.username=springuser\nspring.datasource.password=ThePassword\nspring.datasource.driver-class-name =com.mysql.cj.jdbc.Driver\nserver.port=${PORT:8080}\n#spring.jpa.show-sql: true\n</code></pre>\n<p>My system.properties file:</p>\n<pre><code>java.runtime.version=17\n</code></pre>\n<p>My POML.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;hyperion&lt;/groupId&gt;\n    &lt;artifactId&gt;Doc2Blog&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;Doc2Blog&lt;/name&gt;\n    &lt;description&gt;Converts docs to blogposts&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1639046945,"post_id":70288522,"comment_id":124250734,"body_markdown":"Because you always create a new List in the the `onCreate` method: `userIdArray=new ArrayList&lt;String&gt;();`. If you want your list to not reset with every call of that method, you need to initialize the list outside that method and not always create a new one","body":"Because you always create a new List in the the <code>onCreate</code> method: <code>userIdArray=new ArrayList&lt;String&gt;();</code>. If you want your list to not reset with every call of that method, you need to initialize the list outside that method and not always create a new one"},{"owner":{"account_id":23546831,"reputation":9,"user_id":17590145,"display_name":"habudaney"},"score":0,"creation_date":1639053077,"post_id":70288522,"comment_id":124252945,"body_markdown":"i removed method from onCreate but problem continue :( @OHGODSPIDERS","body":"i removed method from onCreate but problem continue :( @OHGODSPIDERS"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1639053361,"post_id":70288522,"comment_id":124253062,"body_markdown":"Because you make the same error in your getRandomUserId method. Just initialize the list once in its declaration `ArrayList&lt;String&gt; userIdArray = new ArrayList&lt;&gt;();` and don&#39;t do `userIdArray = new ArrayList&lt;&gt;();` anywhere else except if you ecplivitly want to delete your list and create a completly new one","body":"Because you make the same error in your getRandomUserId method. Just initialize the list once in its declaration <code>ArrayList&lt;String&gt; userIdArray = new ArrayList&lt;&gt;();</code> and don&#39;t do <code>userIdArray = new ArrayList&lt;&gt;();</code> anywhere else except if you ecplivitly want to delete your list and create a completly new one"},{"owner":{"account_id":23546831,"reputation":9,"user_id":17590145,"display_name":"habudaney"},"score":0,"creation_date":1639053502,"post_id":70288522,"comment_id":124253119,"body_markdown":"I removed it from there too, unfortunately it continued","body":"I removed it from there too, unfortunately it continued"},{"owner":{"account_id":23546831,"reputation":9,"user_id":17590145,"display_name":"habudaney"},"score":0,"creation_date":1639053672,"post_id":70288522,"comment_id":124253191,"body_markdown":"i edited my code. you can see new version @OHGODSPIDERS","body":"i edited my code. you can see new version @OHGODSPIDERS"}],"owner":{"account_id":23546831,"reputation":9,"user_id":17590145,"display_name":"habudaney"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639063329,"creation_date":1639046789,"question_id":70288522,"body_markdown":"I develop app with java and firebase. I added user&#39;s userId in array after every register, but don&#39;t coming another userId only coming last register userId. \r\n\r\nThere is only last register user&#39;s userId in logcat. why didn&#39;t come another user&#39;s user id?\r\n\r\n![logcat view][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TSjFj.png\r\n\r\n  \r\n\r\n          public class MainMenu extends AppCompatActivity {\r\n        ArrayList&lt;String&gt; userIdArray=new ArrayList&lt;String&gt;();\r\n        \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main_menu);           \r\n            FirebaseUser user= FirebaseAuth.getInstance().getCurrentUser();\r\n            String currentid=user.getUid();\r\n            userIdArray.add(currentid);\r\n            DocumentReference reference;\r\n            FirebaseFirestore firestore=FirebaseFirestore.getInstance();\r\n    \r\n            reference=firestore.collection(&quot;Users&quot;).document(currentid);\r\n    \r\n            reference.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\r\n                @Override\r\n                public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\r\n                    if(task.getResult().exists()){\r\n                        DocumentSnapshot document= task.getResult();\r\n                        String nameResult=task.getResult().getString(&quot;name&quot;);\r\n                        String ageResult=task.getResult().getString(&quot;age&quot;);\r\n                        String url=task.getResult().getString(&quot;profile_photo&quot;);\r\n                        String eMail=task.getResult().getString(&quot;email&quot;);\r\n    \r\n                        List&lt;String&gt; hobbiesResult=(List&lt;String&gt;) document.get(&quot;Hobbies&quot;);\r\n    \r\n                        Map&lt;String, Object&gt; map = document.getData();\r\n                        for (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\r\n                            if (entry.getKey().equals(&quot;Hobbies&quot;)) {\r\n                              Log.d(&quot;TAG&quot;, entry.getValue().toString());\r\n                              hobbies.setText(entry.getValue().toString());\r\n    \r\n                            }\r\n                        }\r\n                        Picasso.get().load(url).into(imageView);\r\n                        name.setText(nameResult);\r\n                        mail.setText(eMail);\r\n                        age.setText(ageResult);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n       public String getRandomUserId() {\r\n            Random random=new Random();\r\n            int index = random.nextInt(userIdArray.size()+1);\r\n            String randomUserId=userIdArray.get(index);\r\n            return randomUserId;\r\n    \r\n        }","title":"don&#39;t coming another array values only coming last value","body":"<p>I develop app with java and firebase. I added user's userId in array after every register, but don't coming another userId only coming last register userId.</p>\n<p>There is only last register user's userId in logcat. why didn't come another user's user id?</p>\n<p><img src=\"https://i.stack.imgur.com/TSjFj.png\" alt=\"logcat view\" /></p>\n<pre><code>      public class MainMenu extends AppCompatActivity {\n    ArrayList&lt;String&gt; userIdArray=new ArrayList&lt;String&gt;();\n    \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main_menu);           \n        FirebaseUser user= FirebaseAuth.getInstance().getCurrentUser();\n        String currentid=user.getUid();\n        userIdArray.add(currentid);\n        DocumentReference reference;\n        FirebaseFirestore firestore=FirebaseFirestore.getInstance();\n\n        reference=firestore.collection(&quot;Users&quot;).document(currentid);\n\n        reference.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\n                if(task.getResult().exists()){\n                    DocumentSnapshot document= task.getResult();\n                    String nameResult=task.getResult().getString(&quot;name&quot;);\n                    String ageResult=task.getResult().getString(&quot;age&quot;);\n                    String url=task.getResult().getString(&quot;profile_photo&quot;);\n                    String eMail=task.getResult().getString(&quot;email&quot;);\n\n                    List&lt;String&gt; hobbiesResult=(List&lt;String&gt;) document.get(&quot;Hobbies&quot;);\n\n                    Map&lt;String, Object&gt; map = document.getData();\n                    for (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\n                        if (entry.getKey().equals(&quot;Hobbies&quot;)) {\n                          Log.d(&quot;TAG&quot;, entry.getValue().toString());\n                          hobbies.setText(entry.getValue().toString());\n\n                        }\n                    }\n                    Picasso.get().load(url).into(imageView);\n                    name.setText(nameResult);\n                    mail.setText(eMail);\n                    age.setText(ageResult);\n                }\n            }\n        });\n    }\n   public String getRandomUserId() {\n        Random random=new Random();\n        int index = random.nextInt(userIdArray.size()+1);\n        String randomUserId=userIdArray.get(index);\n        return randomUserId;\n\n    }\n</code></pre>\n"},{"tags":["java","integration-testing","wiremock"],"answers":[{"tags":[],"owner":{"account_id":12027484,"reputation":378,"user_id":8798840,"display_name":"Krzysztof Woliski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639063098,"creation_date":1639063098,"answer_id":70292351,"question_id":70292137,"body_markdown":"It took me less time to find an answer than writing the question, there&#39;s a `WireMock.any()` method matching all request methods, so this should suffice:\r\n\r\n```\r\n// Proxy to the standalone mock server:\r\nwireMockServer.stubFor(WireMock.any(anyUrl())\r\n        .atPriority(10)\r\n        .willReturn(aResponse().proxiedFrom(&quot;http://localhost:8081/the-standalone-service&quot;)));\r\n\r\n```\r\n\r\nI&#39;ll confirm if it works later today.\r\n    ","title":"How to proxy (almost) all requests through WireMock?","body":"<p>It took me less time to find an answer than writing the question, there's a <code>WireMock.any()</code> method matching all request methods, so this should suffice:</p>\n<pre><code>// Proxy to the standalone mock server:\nwireMockServer.stubFor(WireMock.any(anyUrl())\n        .atPriority(10)\n        .willReturn(aResponse().proxiedFrom(&quot;http://localhost:8081/the-standalone-service&quot;)));\n\n</code></pre>\n<p>I'll confirm if it works later today.</p>\n"}],"owner":{"account_id":12027484,"reputation":378,"user_id":8798840,"display_name":"Krzysztof Woliski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2018,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1639063098,"creation_date":1639062293,"question_id":70292137,"body_markdown":"I have a following problem: There&#39;s a service I&#39;m mocking (for integration tests) using a docker container I run on a specific port. Because the mock service has not been updated (I don&#39;t own the code) a few endpoints that exist in the real service are not supported there. \r\n\r\nI&#39;m considering forking the repository and adding them myself, but other solution I&#39;m trying is proxying all the requests via a WireMock server and stubbing only the missing endpoints. Is there a simple way to achieve this? It looks like I&#39;d need to proxy every rest method separately, like this:\r\n\r\n```\r\n    WireMockServer wireMockServer = new WireMockServer(8080);\r\n    wireMockServer.start();\r\n\r\n    // Proxy to the standalone mock server:\r\n    // GET\r\n    wireMockServer.stubFor(get(anyUrl())\r\n        .atPriority(10)\r\n        .willReturn(aResponse().proxiedFrom(&quot;http://localhost:8081/the-standalone-service&quot;)));\r\n\r\n    // POST\r\n    wireMockServer.stubFor(get(anyUrl())\r\n        .atPriority(10)\r\n        .willReturn(aResponse().proxiedFrom(&quot;http://localhost:8081/the-standalone-service&quot;)));\r\n\r\n    // PUT\r\n    wireMockServer.stubFor(put(anyUrl())\r\n        .atPriority(10)\r\n        .willReturn(aResponse().proxiedFrom(&quot;http://localhost:8081/the-standalone-service&quot;)));\r\n\r\n    ...\r\n\r\n\r\n    // Overwrite only selected endpoints: \r\n    wireMockServer.stubFor(get(urlEqualTo(&quot;/the-service/users/&quot;))\r\n        .atPriority(1)\r\n        .willReturn(aResponse()\r\n            .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n            .withBody(&quot;...&quot;)));\r\n\r\n    ...\r\n``` ","title":"How to proxy (almost) all requests through WireMock?","body":"<p>I have a following problem: There's a service I'm mocking (for integration tests) using a docker container I run on a specific port. Because the mock service has not been updated (I don't own the code) a few endpoints that exist in the real service are not supported there.</p>\n<p>I'm considering forking the repository and adding them myself, but other solution I'm trying is proxying all the requests via a WireMock server and stubbing only the missing endpoints. Is there a simple way to achieve this? It looks like I'd need to proxy every rest method separately, like this:</p>\n<pre><code>    WireMockServer wireMockServer = new WireMockServer(8080);\n    wireMockServer.start();\n\n    // Proxy to the standalone mock server:\n    // GET\n    wireMockServer.stubFor(get(anyUrl())\n        .atPriority(10)\n        .willReturn(aResponse().proxiedFrom(&quot;http://localhost:8081/the-standalone-service&quot;)));\n\n    // POST\n    wireMockServer.stubFor(get(anyUrl())\n        .atPriority(10)\n        .willReturn(aResponse().proxiedFrom(&quot;http://localhost:8081/the-standalone-service&quot;)));\n\n    // PUT\n    wireMockServer.stubFor(put(anyUrl())\n        .atPriority(10)\n        .willReturn(aResponse().proxiedFrom(&quot;http://localhost:8081/the-standalone-service&quot;)));\n\n    ...\n\n\n    // Overwrite only selected endpoints: \n    wireMockServer.stubFor(get(urlEqualTo(&quot;/the-service/users/&quot;))\n        .atPriority(1)\n        .willReturn(aResponse()\n            .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n            .withBody(&quot;...&quot;)));\n\n    ...\n</code></pre>\n"},{"tags":["java","spring-boot","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":5722140,"reputation":1187,"user_id":4520274,"accept_rate":38,"display_name":"Mansoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639050942,"creation_date":1639050942,"answer_id":70289508,"question_id":70288604,"body_markdown":"Use `HttpServletRequest` in controller parameter like below:\r\n\r\n\r\n````\r\n@GetMapping(&quot;/&quot;)\r\npublic String test(HttpServletRequest httpReq){\r\n    String url=httpReq.getRequestURL().toString();\r\n    // More code\r\n}\r\n\r\n\r\n````","title":"How to retrieve the URL of a RequestEntity obtained from RequestEntity.post(String, Object...)","body":"<p>Use <code>HttpServletRequest</code> in controller parameter like below:</p>\n<pre><code>@GetMapping(&quot;/&quot;)\npublic String test(HttpServletRequest httpReq){\n    String url=httpReq.getRequestURL().toString();\n    // More code\n}\n\n\n</code></pre>\n"}],"owner":{"account_id":20014291,"reputation":119,"user_id":14670671,"display_name":"EricC-59"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":467,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70289508,"answer_count":1,"score":0,"last_activity_date":1639063015,"creation_date":1639047130,"question_id":70288604,"body_markdown":"I&#39;m using Spring Boot 2.6.1 with Spring Web MVC, and in my controller, I want to get the received `RequestEntity` instead of only the request body, because I have to use information such as the URL.\r\n\r\nWhen I want to test my controller, I build a `RequestEntity` with the following code:\r\n\r\n    RequestEntity&lt;String&gt; r = RequestEntity.post(&quot;http://www.example.com/{path}&quot;, &quot;myPath&quot;).body(&quot;&quot;);\r\n\r\nNow, I don&#39;t know how to retrieve the URL information from that RequestEntity:\r\n\r\n`r.getUrl()` throws an `UnsupportedOperationException` because there is no URL in the `RequestEntity`.\r\n\r\nWhen looking at the code in `RequestEntity.body(String)`, I see that the returned object is an `UriTemplateRequestEntity` extending `RequestEntity`, but this object seems to always have an null URL according to its constructor. Only the `uriTemplate`, `uriVarsArray` and `uriVarsMap` attributes are set. But these attributes are not part of `RequestEntity`.\r\n\r\nHow can I retrieve the URL information from `r`, without casting it to an `UriTemplateRequestEntity`? Is that a bug in `RequestEntity.getUrl()` I should report?\r\n\r\nNB: My workaround is the following:\r\n\r\n    RequestEntity&lt;String&gt; r = RequestEntity.post(URI.create(format(&quot;http://www.example.com/%s&quot;, &quot;myPath&quot;))).body(&quot;&quot;);\r\n\r\nor\r\n\r\n    RequestEntity&lt;String&gt; r = RequestEntity.post(URI.create(&quot;http://www.example.com/{path}&quot;.replaceAll(&quot;\\\\{path\\\\}&quot;, &quot;myPath&quot;))).body(&quot;&quot;);\r\n","title":"How to retrieve the URL of a RequestEntity obtained from RequestEntity.post(String, Object...)","body":"<p>I'm using Spring Boot 2.6.1 with Spring Web MVC, and in my controller, I want to get the received <code>RequestEntity</code> instead of only the request body, because I have to use information such as the URL.</p>\n<p>When I want to test my controller, I build a <code>RequestEntity</code> with the following code:</p>\n<pre><code>RequestEntity&lt;String&gt; r = RequestEntity.post(&quot;http://www.example.com/{path}&quot;, &quot;myPath&quot;).body(&quot;&quot;);\n</code></pre>\n<p>Now, I don't know how to retrieve the URL information from that RequestEntity:</p>\n<p><code>r.getUrl()</code> throws an <code>UnsupportedOperationException</code> because there is no URL in the <code>RequestEntity</code>.</p>\n<p>When looking at the code in <code>RequestEntity.body(String)</code>, I see that the returned object is an <code>UriTemplateRequestEntity</code> extending <code>RequestEntity</code>, but this object seems to always have an null URL according to its constructor. Only the <code>uriTemplate</code>, <code>uriVarsArray</code> and <code>uriVarsMap</code> attributes are set. But these attributes are not part of <code>RequestEntity</code>.</p>\n<p>How can I retrieve the URL information from <code>r</code>, without casting it to an <code>UriTemplateRequestEntity</code>? Is that a bug in <code>RequestEntity.getUrl()</code> I should report?</p>\n<p>NB: My workaround is the following:</p>\n<pre><code>RequestEntity&lt;String&gt; r = RequestEntity.post(URI.create(format(&quot;http://www.example.com/%s&quot;, &quot;myPath&quot;))).body(&quot;&quot;);\n</code></pre>\n<p>or</p>\n<pre><code>RequestEntity&lt;String&gt; r = RequestEntity.post(URI.create(&quot;http://www.example.com/{path}&quot;.replaceAll(&quot;\\\\{path\\\\}&quot;, &quot;myPath&quot;))).body(&quot;&quot;);\n</code></pre>\n"},{"tags":["java","arrays","string","if-statement"],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638997407,"creation_date":1638997407,"answer_id":70281682,"question_id":70281631,"body_markdown":"You effectivly need a loop to ask the user until the name is valid, a `do/while` loop is a good choice here\r\n\r\n    Scanner input = new Scanner(System.in);\r\n    List&lt;String&gt; allowedUsernames = Arrays.asList(&quot;John&quot;, &quot;Lucy&quot;, &quot;Amy&quot;, &quot;Noah&quot;, &quot;Sam&quot;);\r\n    System.out.println(&quot;Welcome, To start, please enter your username!&quot;);\r\n\r\n    String name = &quot;&quot;;\r\n    do {\r\n        if (!name.equals(&quot;&quot;)) {\r\n            System.out.println(&quot;Please enter a valid username.&quot;);\r\n        }\r\n        name = input.nextLine();\r\n    } while (!allowedUsernames.contains(name));\r\n\r\n    System.out.println(&quot;Hello!&quot;);\r\n\r\n&lt;!-- --&gt;\r\n\r\n    Welcome, To start, please enter your username!\r\n    aa\r\n    Please enter a valid username.\r\n    uu\r\n    Please enter a valid username.\r\n    dd\r\n    Please enter a valid username.\r\n    John\r\n    Hello!","title":"Asking for a username from an array","body":"<p>You effectivly need a loop to ask the user until the name is valid, a <code>do/while</code> loop is a good choice here</p>\n<pre><code>Scanner input = new Scanner(System.in);\nList&lt;String&gt; allowedUsernames = Arrays.asList(&quot;John&quot;, &quot;Lucy&quot;, &quot;Amy&quot;, &quot;Noah&quot;, &quot;Sam&quot;);\nSystem.out.println(&quot;Welcome, To start, please enter your username!&quot;);\n\nString name = &quot;&quot;;\ndo {\n    if (!name.equals(&quot;&quot;)) {\n        System.out.println(&quot;Please enter a valid username.&quot;);\n    }\n    name = input.nextLine();\n} while (!allowedUsernames.contains(name));\n\nSystem.out.println(&quot;Hello!&quot;);\n</code></pre>\n\n<pre><code>Welcome, To start, please enter your username!\naa\nPlease enter a valid username.\nuu\nPlease enter a valid username.\ndd\nPlease enter a valid username.\nJohn\nHello!\n</code></pre>\n"}],"owner":{"account_id":23516699,"reputation":85,"user_id":17564501,"display_name":"Newbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639062782,"creation_date":1638997131,"question_id":70281631,"body_markdown":"I need to create a project where only if a specific username is inputted from the given names in the array, they are allowed to continue to the next menu options. How can I change my code to do this? It is just printing Hello John! Do I need a loop? \r\n\r\n    \r\n    public class Project1 {\r\n        public static void main(String[] args) {\r\n\r\n\t\tScanner input = new Scanner (System.in); \r\n\t\t\r\n\t\tSystem.out.println(&quot;please enter your username!&quot;);\r\n\t\t\r\n\t\tString[] username = { &quot;John&quot;,&quot;Lucy&quot;, &quot;Amy&quot;, &quot;Noah&quot;, &quot;Sam&quot;}; \r\n\t\t\r\n\t\tList&lt;String&gt; list = Arrays.asList(username); \r\n\t\tif (list.contains(&quot;John&quot;)) {\r\n\t\t\tSystem.out.println(&quot;Hello!&quot; );\r\n\t\t}\r\n\t\telse if (list.contains(&quot;Lucy&quot;)) {\r\n\t\t\tSystem.out.println(&quot;Hello!&quot; );\r\n\t\t}\r\n\t\telse if (list.contains(&quot;Amy&quot;)) {\r\n\t\t\tSystem.out.println(&quot;Hello!&quot; );\r\n\t\t}\r\n\t\telse if (list.contains(&quot;Noah&quot;)) {\r\n\t\t\tSystem.out.println(&quot;Hello&quot; );\r\n\t\t}\r\n\t\telse if (list.contains(&quot;Sam&quot;)) {\r\n\t\t\tSystem.out.println(&quot;Hello&quot; );\r\n\t\t}\r\n\t\telse { \r\n\t\t\tSystem.out.println(&quot;Please enter a valid username.&quot;);\r\n\t\t}\r\n\t}\r\n\r\nreturns: \r\n\r\nWelcome, To start, please enter your username! \r\n\r\nHello John!\r\n","title":"Asking for a username from an array","body":"<p>I need to create a project where only if a specific username is inputted from the given names in the array, they are allowed to continue to the next menu options. How can I change my code to do this? It is just printing Hello John! Do I need a loop?</p>\n<pre><code>public class Project1 {\n    public static void main(String[] args) {\n\n    Scanner input = new Scanner (System.in); \n    \n    System.out.println(&quot;please enter your username!&quot;);\n    \n    String[] username = { &quot;John&quot;,&quot;Lucy&quot;, &quot;Amy&quot;, &quot;Noah&quot;, &quot;Sam&quot;}; \n    \n    List&lt;String&gt; list = Arrays.asList(username); \n    if (list.contains(&quot;John&quot;)) {\n        System.out.println(&quot;Hello!&quot; );\n    }\n    else if (list.contains(&quot;Lucy&quot;)) {\n        System.out.println(&quot;Hello!&quot; );\n    }\n    else if (list.contains(&quot;Amy&quot;)) {\n        System.out.println(&quot;Hello!&quot; );\n    }\n    else if (list.contains(&quot;Noah&quot;)) {\n        System.out.println(&quot;Hello&quot; );\n    }\n    else if (list.contains(&quot;Sam&quot;)) {\n        System.out.println(&quot;Hello&quot; );\n    }\n    else { \n        System.out.println(&quot;Please enter a valid username.&quot;);\n    }\n}\n</code></pre>\n<p>returns:</p>\n<p>Welcome, To start, please enter your username!</p>\n<p>Hello John!</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":8215,"page":1777,"page_size":100}
