{"items":[{"tags":["java","syntax"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1672350374,"post_id":74956203,"comment_id":132274515,"body_markdown":"It is not Java, but C#","body":"It is not Java, but C#"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1672350584,"post_id":74956203,"comment_id":132274572,"body_markdown":"Regardless, I stay away from YouTube tutorials as they are usually lousy.  This one is no exception.  For one thing, the black background makes it hard to read.  I find books better for learning just about anything.","body":"Regardless, I stay away from YouTube tutorials as they are usually lousy.  This one is no exception.  For one thing, the black background makes it hard to read.  I find books better for learning just about anything."}],"answers":[{"tags":[],"owner":{"account_id":19579941,"reputation":529,"user_id":14329228,"display_name":"Szyszka947"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672350379,"creation_date":1672350379,"answer_id":74956322,"question_id":74956203,"body_markdown":"    public void replacePixel(Pixel[,] pixels) {....}\r\n\r\nIm not sure if this is valid for Java, but in C#:\r\n\r\n`[,]` here means that as an argument you want to get two-dimensional array. If you want three-dimensional array you can use `[,,]` and so on.\r\n\r\n    void saveClicked(){\r\n        file?.load(image);\r\n    }\r\n\r\nHere `?` is a conditional operator that says: if file is not null then do `file.load(image)`. Otherwise, if file is null do nothing. This can be converted to:\r\n\r\n    void saveClicked(){\r\n    \tif(file != null){\r\n    \t\tfile.load(image);\r\n    \t}\r\n    }","title":"Wonder about syntax and language for two code examples","body":"<pre><code>public void replacePixel(Pixel[,] pixels) {....}\n</code></pre>\n<p>Im not sure if this is valid for Java, but in C#:</p>\n<p><code>[,]</code> here means that as an argument you want to get two-dimensional array. If you want three-dimensional array you can use <code>[,,]</code> and so on.</p>\n<pre><code>void saveClicked(){\n    file?.load(image);\n}\n</code></pre>\n<p>Here <code>?</code> is a conditional operator that says: if file is not null then do <code>file.load(image)</code>. Otherwise, if file is null do nothing. This can be converted to:</p>\n<pre><code>void saveClicked(){\n    if(file != null){\n        file.load(image);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27386190,"reputation":11,"user_id":20889942,"display_name":"Fibien"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1672354944,"accepted_answer_id":74956322,"answer_count":1,"score":0,"last_activity_date":1672354251,"creation_date":1672349239,"question_id":74956203,"body_markdown":"I watched a video about composition and inheritance. \r\nIn this video I saw two different examples of code syntax that I have not seen before.\r\n\r\nGenerally the code looks like java but I don&#39;t recognize these two code snippets. \r\n\r\nWould appriciate if someone would explain what the code does and if the code is java or another language. \r\nThanks!\r\n\r\n---\r\n\r\nFirst code:\r\n```\r\npublic void replacePixel(Pixel[,] pixels] {....}\r\n```\r\n\r\nHere it is the syntax `[,]` that is new to me. \r\nWhat does it do?\r\n\r\n---\r\n\r\nSecond code:\r\n```\r\nvoid saveClicked(){\r\n    file?.load(image);\r\n}\r\n```\r\n\r\nHere is is the syntax `?.`\r\nWhat does it do?\r\n\r\n\r\nTried to use a online java compiler and the syntax did not seem to work. ","title":"Wonder about syntax and language for two code examples","body":"<p>I watched a video about composition and inheritance.\nIn this video I saw two different examples of code syntax that I have not seen before.</p>\n<p>Generally the code looks like java but I don't recognize these two code snippets.</p>\n<p>Would appriciate if someone would explain what the code does and if the code is java or another language.\nThanks!</p>\n<hr />\n<p>First code:</p>\n<pre><code>public void replacePixel(Pixel[,] pixels] {....}\n</code></pre>\n<p>Here it is the syntax <code>[,]</code> that is new to me.\nWhat does it do?</p>\n<hr />\n<p>Second code:</p>\n<pre><code>void saveClicked(){\n    file?.load(image);\n}\n</code></pre>\n<p>Here is is the syntax <code>?.</code>\nWhat does it do?</p>\n<p>Tried to use a online java compiler and the syntax did not seem to work.</p>\n"},{"tags":["java","android","google-play-services","google-play-games"],"answers":[{"tags":[],"owner":{"account_id":17024145,"reputation":91,"user_id":12315877,"display_name":"deve"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672354050,"creation_date":1672354050,"answer_id":74956703,"question_id":71527045,"body_markdown":"I think there is no need to request the scope.\r\n\r\nI tested Saved Games features using google play game services v2 without requesting any scope, because there is no way to request, but everything worked fine.","title":"how to implement Saved Games on Google Play Games Services v2 SDK?","body":"<p>I think there is no need to request the scope.</p>\n<p>I tested Saved Games features using google play game services v2 without requesting any scope, because there is no way to request, but everything worked fine.</p>\n"}],"owner":{"account_id":3428427,"reputation":79,"user_id":2873549,"display_name":"user2873549"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":310,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1672354050,"creation_date":1647606563,"question_id":71527045,"body_markdown":"Google has released a new play Games service v2, but their implementation of saved games is confusing. Developer Guides for implementation of Saved Games for V2 are the same as v1...\r\nhttps://developers.google.com/games/services/android/savedgames\r\n\r\nBut in v2 users automatically get signed in as game launch without any scope request.\r\n\r\nAnyone has any idea how to implement correctly v2, there is no example available for v2.","title":"how to implement Saved Games on Google Play Games Services v2 SDK?","body":"<p>Google has released a new play Games service v2, but their implementation of saved games is confusing. Developer Guides for implementation of Saved Games for V2 are the same as v1...\n<a href=\"https://developers.google.com/games/services/android/savedgames\" rel=\"noreferrer\">https://developers.google.com/games/services/android/savedgames</a></p>\n<p>But in v2 users automatically get signed in as game launch without any scope request.</p>\n<p>Anyone has any idea how to implement correctly v2, there is no example available for v2.</p>\n"},{"tags":["java","spring","hibernate"],"owner":{"account_id":19533882,"reputation":1,"user_id":14293052,"display_name":"ivan315"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672353637,"creation_date":1672353637,"question_id":74956662,"body_markdown":"I have:\r\n- Spring JPA app with Hibernate. App is configured without transaction manager.\r\n- 2 entities: Item and Bid. Item can has some Bids.\r\n\r\nI try to get Item by id (em.find) and I expect that Item will be print with empty List&lt;Bid&gt;. But when I call System.out.println Hiber execute anoter query and loads List&lt;Bid&gt;. Looks like it happened in transactio, but I don’t use any transaction explisitly. \r\nSo why lazy loading happened? And how disable it?\r\n\r\n\r\nConfig:\r\n\r\n```\r\n@Configuration\r\n@ComponentScan(basePackages = {&quot;com.john.jpaProf1.relation.oneToManyBags&quot;})\r\n@PropertySource(&quot;classpath:property.properties&quot;)\r\npublic class Config {\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        HikariDataSource dataSource = new HikariDataSource();\r\n        dataSource.setJdbcUrl(&quot;jdbc:postgresql://localhost:5432/jpa1&quot;);\r\n        dataSource.setUsername(&quot;postgres&quot;);\r\n        dataSource.setPassword(&quot;postgres&quot;);\r\n        return dataSource;\r\n    }\r\n\r\n    @Bean\r\n    public EntityManager entityManager(LocalContainerEntityManagerFactoryBean factoryBean) {\r\n        return factoryBean.getObject().createEntityManager();\r\n    }\r\n\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource) {\r\n        LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\r\n        factoryBean.setDataSource(dataSource);\r\n        factoryBean.setPackagesToScan(&quot;com.john.jpaProf1.relation.oneToManyBags&quot;);\r\n        AbstractJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();\r\n        jpaVendorAdapter.setShowSql(true);\r\n        jpaVendorAdapter.setGenerateDdl(true);\r\n        factoryBean.setJpaVendorAdapter(jpaVendorAdapter);\r\n        factoryBean.getJpaPropertyMap().put(&quot;hibernate.format_sql&quot;, true);\r\n        factoryBean.getJpaPropertyMap().put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.PostgreSQL82Dialect&quot;);\r\n        return factoryBean;\r\n    }\r\n}\r\n```\r\n\r\nproperty.properties:\r\n```\r\nspring.jpa.open-in-view=false\r\n```\r\n\r\nEntity Bid:\r\n```\r\n@Entity\r\n@Table(name = &quot;t23bid&quot;)\r\npublic class Bid {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    protected Integer id;\r\n    protected String name;\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;item_id&quot;)\r\n    protected Item item;\r\n...\r\n\r\n```\r\n\r\nEntity Item:\r\n```\r\n@Entity\r\n@Table(name = &quot;t23item&quot;)\r\npublic class Item {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    protected Integer id;\r\n    protected String name;\r\n    @OneToMany(mappedBy = &quot;item&quot;, fetch = FetchType.LAZY)\r\n    protected Collection&lt;Bid&gt; bids;\r\n...\r\n```\r\n\r\nStarter:\r\n```\r\npublic class Starter {\r\n    public static void main(String[] args) {\r\n        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(Config.class);\r\n        EntityManager em = context.getBean(EntityManager.class);\r\n        Item item = em.find(Item.class, 1);\r\n        System.out.println(&quot;\\n-------after em.find() ? but before System.out.println() -------\\n&quot;);\r\n        System.out.println(&quot;\\n&quot; + item);\r\n...\r\n```\r\n\r\nConfig\r\n```\r\nimplementation &#39;com.zaxxer:HikariCP:4.0.3&#39;\r\nimplementation &#39;org.springframework:spring-context:5.3.24&#39;\r\nimplementation &#39;org.springframework:spring-orm:5.3.24&#39;\r\nimplementation &#39;org.hibernate:hibernate-entitymanager:5.6.14.Final&#39;\r\nimplementation &#39;com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.14.0&#39;\r\nimplementation &#39;org.postgresql:postgresql:42.4.1&#39;\r\n```\r\n\r\nResult:\r\n\r\nHibernate: \r\n    select\r\n        item0_.id as id1_2_0_,\r\n        item0_.name as name2_2_0_ \r\n    from\r\n        t23item item0_ \r\n    where\r\n        item0_.id=?\r\n\r\n-------after em.find() ? but before System.out.println() -------\r\n\r\nHibernate: \r\n    select\r\n        bids0_.item_id as item_id3_0_0_,\r\n        bids0_.id as id1_0_0_,\r\n        bids0_.id as id1_0_1_,\r\n        bids0_.item_id as item_id3_0_1_,\r\n        bids0_.name as name2_0_1_ \r\n    from\r\n        t23bid bids0_ \r\n    where\r\n        bids0_.item_id=?\r\n\r\nItem{id=1, name=&#39;name1&#39;, bids=[Item{id=1, name=&#39;bid1&#39;}, Item{id=2, name=&#39;bid2&#39;}]}\r\n\r\n\r\n","title":"Lazy loading works without transaction in Spring","body":"<p>I have:</p>\n<ul>\n<li>Spring JPA app with Hibernate. App is configured without transaction manager.</li>\n<li>2 entities: Item and Bid. Item can has some Bids.</li>\n</ul>\n<p>I try to get Item by id (em.find) and I expect that Item will be print with empty List. But when I call System.out.println Hiber execute anoter query and loads List. Looks like it happened in transactio, but I don’t use any transaction explisitly.\nSo why lazy loading happened? And how disable it?</p>\n<p>Config:</p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = {&quot;com.john.jpaProf1.relation.oneToManyBags&quot;})\n@PropertySource(&quot;classpath:property.properties&quot;)\npublic class Config {\n\n    @Bean\n    public DataSource dataSource() {\n        HikariDataSource dataSource = new HikariDataSource();\n        dataSource.setJdbcUrl(&quot;jdbc:postgresql://localhost:5432/jpa1&quot;);\n        dataSource.setUsername(&quot;postgres&quot;);\n        dataSource.setPassword(&quot;postgres&quot;);\n        return dataSource;\n    }\n\n    @Bean\n    public EntityManager entityManager(LocalContainerEntityManagerFactoryBean factoryBean) {\n        return factoryBean.getObject().createEntityManager();\n    }\n\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(DataSource dataSource) {\n        LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();\n        factoryBean.setDataSource(dataSource);\n        factoryBean.setPackagesToScan(&quot;com.john.jpaProf1.relation.oneToManyBags&quot;);\n        AbstractJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter();\n        jpaVendorAdapter.setShowSql(true);\n        jpaVendorAdapter.setGenerateDdl(true);\n        factoryBean.setJpaVendorAdapter(jpaVendorAdapter);\n        factoryBean.getJpaPropertyMap().put(&quot;hibernate.format_sql&quot;, true);\n        factoryBean.getJpaPropertyMap().put(&quot;hibernate.dialect&quot;, &quot;org.hibernate.dialect.PostgreSQL82Dialect&quot;);\n        return factoryBean;\n    }\n}\n</code></pre>\n<p>property.properties:</p>\n<pre><code>spring.jpa.open-in-view=false\n</code></pre>\n<p>Entity Bid:</p>\n<pre><code>@Entity\n@Table(name = &quot;t23bid&quot;)\npublic class Bid {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    protected Integer id;\n    protected String name;\n    @ManyToOne\n    @JoinColumn(name = &quot;item_id&quot;)\n    protected Item item;\n...\n\n</code></pre>\n<p>Entity Item:</p>\n<pre><code>@Entity\n@Table(name = &quot;t23item&quot;)\npublic class Item {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    protected Integer id;\n    protected String name;\n    @OneToMany(mappedBy = &quot;item&quot;, fetch = FetchType.LAZY)\n    protected Collection&lt;Bid&gt; bids;\n...\n</code></pre>\n<p>Starter:</p>\n<pre><code>public class Starter {\n    public static void main(String[] args) {\n        AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(Config.class);\n        EntityManager em = context.getBean(EntityManager.class);\n        Item item = em.find(Item.class, 1);\n        System.out.println(&quot;\\n-------after em.find() ? but before System.out.println() -------\\n&quot;);\n        System.out.println(&quot;\\n&quot; + item);\n...\n</code></pre>\n<p>Config</p>\n<pre><code>implementation 'com.zaxxer:HikariCP:4.0.3'\nimplementation 'org.springframework:spring-context:5.3.24'\nimplementation 'org.springframework:spring-orm:5.3.24'\nimplementation 'org.hibernate:hibernate-entitymanager:5.6.14.Final'\nimplementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.14.0'\nimplementation 'org.postgresql:postgresql:42.4.1'\n</code></pre>\n<p>Result:</p>\n<p>Hibernate:\nselect\nitem0_.id as id1_2_0_,\nitem0_.name as name2_2_0_\nfrom\nt23item item0_\nwhere\nitem0_.id=?</p>\n<p>-------after em.find() ? but before System.out.println() -------</p>\n<p>Hibernate:\nselect\nbids0_.item_id as item_id3_0_0_,\nbids0_.id as id1_0_0_,\nbids0_.id as id1_0_1_,\nbids0_.item_id as item_id3_0_1_,\nbids0_.name as name2_0_1_\nfrom\nt23bid bids0_\nwhere\nbids0_.item_id=?</p>\n<p>Item{id=1, name='name1', bids=[Item{id=1, name='bid1'}, Item{id=2, name='bid2'}]}</p>\n"},{"tags":["java","import","printing"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672350874,"post_id":74956361,"comment_id":132274647,"body_markdown":"There is no constant `TYPE_CMYK` in [`BufferedImage`](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/BufferedImage.html). I do not think that this stems from a &quot;wrong import&quot; since `Bufferedimage` is a standard `awt` class. Where did the `TYPE_CMYK` originally come from, i.e. who wrote that code? I suggest talking to that person.","body":"There is no constant <code>TYPE_CMYK</code> in <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/image/BufferedImage.html\" rel=\"nofollow noreferrer\"><code>BufferedImage</code></a>. I do not think that this stems from a &quot;wrong import&quot; since <code>Bufferedimage</code> is a standard <code>awt</code> class. Where did the <code>TYPE_CMYK</code> originally come from, i.e. who wrote that code? I suggest talking to that person."},{"owner":{"account_id":26953504,"reputation":3,"user_id":20522304,"display_name":"Dragomy"},"score":0,"creation_date":1672351568,"post_id":74956361,"comment_id":132274811,"body_markdown":"A friend of mine said he &quot;made a little programm&quot; but it it returns several error, as i am only a student I looked at the code which i found well documented but the only problem i could think of on point were the imports ,so I asked the question :). Ok update uppon asking he has admitted to have used Chat GPT ,no wonder the code has errors and he doesnt know anything about them.","body":"A friend of mine said he &quot;made a little programm&quot; but it it returns several error, as i am only a student I looked at the code which i found well documented but the only problem i could think of on point were the imports ,so I asked the question :). Ok update uppon asking he has admitted to have used Chat GPT ,no wonder the code has errors and he doesnt know anything about them."}],"answers":[{"tags":[],"owner":{"account_id":27360805,"reputation":87,"user_id":20868442,"display_name":"Lian Xucan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672353604,"creation_date":1672352203,"answer_id":74956512,"question_id":74956361,"body_markdown":"To solve the problem `ColorSpaceJAI cannot be resolved to a variable` and `TYPE_CMYK cannot be resolved or is not a field`\r\n\r\nyou need to import this lib to your project\r\n[jai-core][1]\r\n\r\nand change \r\n\r\n    BufferedImage cmykImage = new BufferedImage(image.getWidth(),image.getHeight(),BufferedImage.TYPE_CMYK);\r\n\r\nto\r\n\r\n    BufferedImage cmykImage = new BufferedImage(image.getWidth(),image.getHeight(),ColorSpaceJAI.TYPE_CMYK);\r\n\r\nAnd I still can&#39;t find `ColorSpaceJAI.NAME_ISO_COATED`,it looks like some other tripartite library\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/javax.media/jai-core/1.1.3","title":"I have several Errors which i think come from a wrong import","body":"<p>To solve the problem <code>ColorSpaceJAI cannot be resolved to a variable</code> and <code>TYPE_CMYK cannot be resolved or is not a field</code></p>\n<p>you need to import this lib to your project\n<a href=\"https://mvnrepository.com/artifact/javax.media/jai-core/1.1.3\" rel=\"nofollow noreferrer\">jai-core</a></p>\n<p>and change</p>\n<pre><code>BufferedImage cmykImage = new BufferedImage(image.getWidth(),image.getHeight(),BufferedImage.TYPE_CMYK);\n</code></pre>\n<p>to</p>\n<pre><code>BufferedImage cmykImage = new BufferedImage(image.getWidth(),image.getHeight(),ColorSpaceJAI.TYPE_CMYK);\n</code></pre>\n<p>And I still can't find <code>ColorSpaceJAI.NAME_ISO_COATED</code>,it looks like some other tripartite library</p>\n"}],"owner":{"account_id":26953504,"reputation":3,"user_id":20522304,"display_name":"Dragomy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672353604,"creation_date":1672350739,"question_id":74956361,"body_markdown":"The following code returns the following errors : \r\n&gt;The import javax.media cannot be resolved\r\n\r\n&gt;ColorSpaceJAI cannot be resolved to a variable\r\n\r\n&gt;ColorSpaceJAI cannot be resolved to a variable\r\n\r\n&gt;TYPE_CMYK cannot be resolved or is not a field\r\n\r\nI am not a professional, but in the past &quot; cannot be resolved &quot; usually meant that I was stupid and got the imports wrong.\r\n\r\nThis is the code: \r\n\r\n\r\n  \r\n\r\n      import java.awt.Color;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.image.BufferedImage;\r\n    import java.awt.image.ColorModel;\r\n    import java.awt.image.DataBuffer;\r\n    import java.awt.image.WritableRaster;\r\n    import java.io.File;\r\n    import java.util.List;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    import javax.media.jai.ColorSpaceJAI;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    \r\n    public class FileDropTool {\r\n        public static void main(String[] args) {\r\n            // Create the main window\r\n            JFrame frame = new JFrame(&quot;File Drop Tool&quot;);\r\n            frame.setSize(300, 300);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setVisible(true);\r\n    \r\n            // Add a drop target to the window\r\n            frame.setDropTarget(new java.awt.dnd.DropTarget() {\r\n                @Override\r\n                public synchronized void drop(java.awt.dnd.DropTargetDropEvent dtde) {\r\n                    try {\r\n                        // Accept the drop and get the list of files\r\n                        dtde.acceptDrop(java.awt.dnd.DnDConstants.ACTION_COPY);\r\n                        @SuppressWarnings(&quot;unchecked&quot;)\r\n                        List&lt;File&gt; files = (List&lt;File&gt;) dtde.getTransferable()\r\n                                .getTransferData(java.awt.datatransfer.DataFlavor.javaFileListFlavor);\r\n                        // Process the first file\r\n                        File file = files.get(0);\r\n                        // Open the image file\r\n                        BufferedImage image = ImageIO.read(file);\r\n                        // Check if the image already has the iso_coated_v2 color profile\r\n                        ColorModel colorModel = image.getColorModel();\r\n                        if (colorModel.getColorSpace().getType() == ColorSpaceJAI.TYPE_CMYK &amp;&amp;\r\n                                colorModel.getColorSpace().getName(ColorSpaceJAI.NAME_ISO_COATED)\r\n                                        .equals(&quot;ISO Coated v2 300%&quot;)) {\r\n                            System.out.println(&quot;Image already has the iso_coated_v2 color profile&quot;);\r\n                        } else {\r\n                            // Convert the image to the iso_coated_v2 color profile\r\n                            BufferedImage cmykImage = new BufferedImage(image.getWidth(), image.getHeight(),\r\n                                    BufferedImage.TYPE_CMYK);\r\n                            Graphics2D g2d = cmykImage.createGraphics();\r\n                            g2d.drawImage(image, 0, 0, null);\r\n                            g2d.dispose();\r\n                            // Save the converted image to a new file\r\n                            ImageIO.write(cmykImage, &quot;JPEG&quot;, new File(file.getParent(), &quot;iso_coated_v2.jpg&quot;));\r\n                            System.out.println(&quot;Image converted to iso_coated_v2 color profile and saved to a new file&quot;);\r\n                        }\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            });\r\n    \r\n            // Add a label to the window\r\n            frame.add(new JLabel(&quot;Drop a file here&quot;));\r\n        }\r\n    }\r\n\r\nThis is what the code should do :\r\n\r\n -  Creates a main window (JFrame) and sets it to be visible.\r\n -    Sets a drop target on the main window, which allows the user to drag and drop a file into the window.\r\n -    When a file is dropped, the program accepts the drop and retrieves the list of files. It then processes the first file in the list.\r\n -   The program opens the image file and checks if it already has the iso_coated_v2 color profile. If it does, it prints a message to the console. If not, it converts the image to the iso_coated_v2 color profile.","title":"I have several Errors which i think come from a wrong import","body":"<p>The following code returns the following errors :</p>\n<blockquote>\n<p>The import javax.media cannot be resolved</p>\n</blockquote>\n<blockquote>\n<p>ColorSpaceJAI cannot be resolved to a variable</p>\n</blockquote>\n<blockquote>\n<p>ColorSpaceJAI cannot be resolved to a variable</p>\n</blockquote>\n<blockquote>\n<p>TYPE_CMYK cannot be resolved or is not a field</p>\n</blockquote>\n<p>I am not a professional, but in the past &quot; cannot be resolved &quot; usually meant that I was stupid and got the imports wrong.</p>\n<p>This is the code:</p>\n<pre><code>  import java.awt.Color;\nimport java.awt.Graphics2D;\nimport java.awt.image.BufferedImage;\nimport java.awt.image.ColorModel;\nimport java.awt.image.DataBuffer;\nimport java.awt.image.WritableRaster;\nimport java.io.File;\nimport java.util.List;\n\nimport javax.imageio.ImageIO;\nimport javax.media.jai.ColorSpaceJAI;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\n\npublic class FileDropTool {\n    public static void main(String[] args) {\n        // Create the main window\n        JFrame frame = new JFrame(&quot;File Drop Tool&quot;);\n        frame.setSize(300, 300);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n\n        // Add a drop target to the window\n        frame.setDropTarget(new java.awt.dnd.DropTarget() {\n            @Override\n            public synchronized void drop(java.awt.dnd.DropTargetDropEvent dtde) {\n                try {\n                    // Accept the drop and get the list of files\n                    dtde.acceptDrop(java.awt.dnd.DnDConstants.ACTION_COPY);\n                    @SuppressWarnings(&quot;unchecked&quot;)\n                    List&lt;File&gt; files = (List&lt;File&gt;) dtde.getTransferable()\n                            .getTransferData(java.awt.datatransfer.DataFlavor.javaFileListFlavor);\n                    // Process the first file\n                    File file = files.get(0);\n                    // Open the image file\n                    BufferedImage image = ImageIO.read(file);\n                    // Check if the image already has the iso_coated_v2 color profile\n                    ColorModel colorModel = image.getColorModel();\n                    if (colorModel.getColorSpace().getType() == ColorSpaceJAI.TYPE_CMYK &amp;&amp;\n                            colorModel.getColorSpace().getName(ColorSpaceJAI.NAME_ISO_COATED)\n                                    .equals(&quot;ISO Coated v2 300%&quot;)) {\n                        System.out.println(&quot;Image already has the iso_coated_v2 color profile&quot;);\n                    } else {\n                        // Convert the image to the iso_coated_v2 color profile\n                        BufferedImage cmykImage = new BufferedImage(image.getWidth(), image.getHeight(),\n                                BufferedImage.TYPE_CMYK);\n                        Graphics2D g2d = cmykImage.createGraphics();\n                        g2d.drawImage(image, 0, 0, null);\n                        g2d.dispose();\n                        // Save the converted image to a new file\n                        ImageIO.write(cmykImage, &quot;JPEG&quot;, new File(file.getParent(), &quot;iso_coated_v2.jpg&quot;));\n                        System.out.println(&quot;Image converted to iso_coated_v2 color profile and saved to a new file&quot;);\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        });\n\n        // Add a label to the window\n        frame.add(new JLabel(&quot;Drop a file here&quot;));\n    }\n}\n</code></pre>\n<p>This is what the code should do :</p>\n<ul>\n<li>Creates a main window (JFrame) and sets it to be visible.</li>\n<li>Sets a drop target on the main window, which allows the user to drag and drop a file into the window.</li>\n<li>When a file is dropped, the program accepts the drop and retrieves the list of files. It then processes the first file in the list.</li>\n<li>The program opens the image file and checks if it already has the iso_coated_v2 color profile. If it does, it prints a message to the console. If not, it converts the image to the iso_coated_v2 color profile.</li>\n</ul>\n"},{"tags":["java","groovy","apache-poi","apache-nifi","groovy-grape"],"comments":[{"owner":{"account_id":350017,"reputation":47555,"user_id":685641,"display_name":"Gagravarr"},"score":1,"creation_date":1671798008,"post_id":74894739,"comment_id":132178497,"body_markdown":"Does your code work outside of NiFi? As I can&#39;t see anything reading a CSV, can&#39;t see anything writing meaningful stuff to rows and cells in Apache POI, I&#39;m guessing not... You&#39;ll need to fix your code to work standalone first!","body":"Does your code work outside of NiFi? As I can&#39;t see anything reading a CSV, can&#39;t see anything writing meaningful stuff to rows and cells in Apache POI, I&#39;m guessing not... You&#39;ll need to fix your code to work standalone first!"},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":1,"creation_date":1671923096,"post_id":74894739,"comment_id":132198248,"body_markdown":"You are creating WorkbookFactory from input stream but you are saying that input contains csv file. So, poi saying that can&#39;t read input stream because it&#39;s not ole2 or ooxml...","body":"You are creating WorkbookFactory from input stream but you are saying that input contains csv file. So, poi saying that can&#39;t read input stream because it&#39;s not ole2 or ooxml..."},{"owner":{"account_id":9699249,"reputation":178,"user_id":7194750,"accept_rate":77,"display_name":"O. Sam"},"score":0,"creation_date":1672270715,"post_id":74894739,"comment_id":132257026,"body_markdown":"@daggett I want to convert csv content into xls format, can you help with the script please?","body":"@daggett I want to convert csv content into xls format, can you help with the script please?"}],"owner":{"account_id":9699249,"reputation":178,"user_id":7194750,"accept_rate":77,"display_name":"O. Sam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672353364,"creation_date":1671750837,"question_id":74894739,"body_markdown":"I want to convert csv flowfile content into XLS file usin groovy script + POI API\r\n\r\nI m using ivy to grab POI dependencies and it seems work well.\r\n\r\nplease find more details below:\r\n\r\nThis is my Nifi flow:\r\n\r\n[![\r\n][1]][1]\r\n\r\nThis is my script\r\n\r\n    @Grapes(@Grab(group=&#39;org.apache.poi&#39;, module=&#39;poi-ooxml&#39;, version=&#39;3.9&#39;))\r\n    import org.apache.poi.ss.usermodel.*\r\n    import org.apache.poi.hssf.usermodel.*\r\n    import org.apache.poi.xssf.usermodel.*\r\n    import org.apache.poi.ss.util.*\r\n    import org.apache.poi.ss.usermodel.*\r\n    import org.apache.poi.hssf.extractor.*\r\n    import java.nio.charset.*\r\n    import java.io.*\r\n    import org.apache.commons.io.IOUtils\r\n\r\n    def flowFile = session.get()\r\n    def date = new Date()\r\n\r\n    if(!flowFile) return\r\n\r\n    flowFile = session.write(flowFile, {inputStream, outputStream -&gt;\r\n    try {\r\n\t\t\r\n    Workbook wb = WorkbookFactory.create(inputStream,);\r\n    Sheet mySheet = wb.getSheetAt(0);\r\n\r\n\r\n    def record = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\r\n    outputStream.write(record.getBytes(StandardCharsets.UTF_8))\r\n\r\n    wb.close();\r\n\r\n    } catch(e) {\r\n     log.error(&quot;Error during processing&quot;, e)\r\n     session.transfer(flowFile, REL_FAILURE)\r\n    }\r\n    } as StreamCallback)\r\n\r\n\r\n    def filename = flowFile.getAttribute(&#39;filename&#39;)+&#39;.xlsx&#39;\r\n    flowFile = session.putAttribute(flowFile, &#39;filename&#39;, filename) \r\n\r\n    session.transfer(flowFile, REL_SUCCESS)\r\n\r\nI get this error\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAny idea about this error ?\r\n\r\nEdit:\r\nI changed my script and still had the same error:\r\n\r\n    @Grapes(@Grab(group=&#39;org.apache.poi&#39;, module=&#39;poi-ooxml&#39;, version=&#39;3.9&#39;))\r\n    import com.opencsv.CSVReader\r\n    @Grapes(@Grab(group=&#39;com.opencsv&#39;, module=&#39;opencsv&#39;, version=&#39;4.2&#39;))\r\n    import org.apache.poi.ss.usermodel.*\r\n    import org.apache.poi.hssf.usermodel.*\r\n    import org.apache.poi.xssf.usermodel.*\r\n    import org.apache.poi.ss.util.*\r\n    import org.apache.poi.ss.usermodel.*\r\n    import org.apache.poi.hssf.extractor.*\r\n    import java.nio.charset.*\r\n    import java.io.*\r\n    import org.apache.commons.io.IOUtils\r\n    \r\n    def flowFile = session.get()\r\n    def date = new Date()\r\n    \r\n    if(!flowFile) return\r\n    \r\n    flowFile = session.write(flowFile, {inputStream, outputStream -&gt;\r\n    try {\r\n    def nextLine = &#39;&#39;\r\n    reader = new CSVReader(new FileReader(csvFilePath), FILE_DELIMITER);\r\n    \r\n      Workbook wb = WorkbookFactory.create(inputStream,);\r\n     Sheet sheet1 = wb.createSheet(&quot;Feuille&quot;);\r\n    \r\n    // workBook = new SXSSFWorkbook();\r\n    //sheet = (SXSSFSheet) workBook.createSheet(&#39;Sheet&#39;);\r\n    \r\n    int rowNum = 0;\r\n    while((nextLine = reader.readNext()) != null) {\r\n    Row currentRow = sheet1.createRow(rowNum++);\r\n    for(int i=0; i &lt; nextLine.length; i++) {\r\n    if(NumberUtils.isDigits(nextLine[i])) {\r\n    currentRow.createCell(i).setCellValue(Integer.parseInt(nextLine[i]));\r\n    } else if (NumberUtils.isNumber(nextLine[i])) {\r\n    currentRow.createCell(i).setCellValue(Double.parseDouble(nextLine[i]));\r\n    } else {\r\n    currentRow.createCell(i).setCellValue(nextLine[i]);\r\n    }\r\n    }\r\n    }\r\n    \r\n    fileOutputStream = new FileOutputStream(generatedXlsFilePath.trim());\r\n    wb.write(fileOutputStream);\r\n    \r\n    wb.close();\r\n    fileOutputStream.close();\r\n    reader.close();\r\n    outputStream.close();\r\n    \r\n    } catch(e) {\r\n    session.transfer(flowFile, REL_FAILURE)\r\n    }\r\n    } as StreamCallback)\r\n    \r\n    def filename = flowFile.getAttribute(&#39;filename&#39;)+&#39;.xlsx&#39;\r\n    flowFile = session.putAttribute(flowFile, &#39;filename&#39;, filename)\r\n    \r\n    session.transfer(flowFile, REL_SUCCESS)\r\n\r\n  [1]: https://i.stack.imgur.com/a9wjm.png\r\n  [2]: https://i.stack.imgur.com/IwYNj.png","title":"Nifi Unable to convert CSV to Excel using POI API","body":"<p>I want to convert csv flowfile content into XLS file usin groovy script + POI API</p>\n<p>I m using ivy to grab POI dependencies and it seems work well.</p>\n<p>please find more details below:</p>\n<p>This is my Nifi flow:</p>\n<p><a href=\"https://i.stack.imgur.com/a9wjm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a9wjm.png\" alt=\"\n\" /></a></p>\n<p>This is my script</p>\n<pre><code>@Grapes(@Grab(group='org.apache.poi', module='poi-ooxml', version='3.9'))\nimport org.apache.poi.ss.usermodel.*\nimport org.apache.poi.hssf.usermodel.*\nimport org.apache.poi.xssf.usermodel.*\nimport org.apache.poi.ss.util.*\nimport org.apache.poi.ss.usermodel.*\nimport org.apache.poi.hssf.extractor.*\nimport java.nio.charset.*\nimport java.io.*\nimport org.apache.commons.io.IOUtils\n\ndef flowFile = session.get()\ndef date = new Date()\n\nif(!flowFile) return\n\nflowFile = session.write(flowFile, {inputStream, outputStream -&gt;\ntry {\n    \nWorkbook wb = WorkbookFactory.create(inputStream,);\nSheet mySheet = wb.getSheetAt(0);\n\n\ndef record = IOUtils.toString(inputStream, StandardCharsets.UTF_8)\noutputStream.write(record.getBytes(StandardCharsets.UTF_8))\n\nwb.close();\n\n} catch(e) {\n log.error(&quot;Error during processing&quot;, e)\n session.transfer(flowFile, REL_FAILURE)\n}\n} as StreamCallback)\n\n\ndef filename = flowFile.getAttribute('filename')+'.xlsx'\nflowFile = session.putAttribute(flowFile, 'filename', filename) \n\nsession.transfer(flowFile, REL_SUCCESS)\n</code></pre>\n<p>I get this error\n<a href=\"https://i.stack.imgur.com/IwYNj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IwYNj.png\" alt=\"enter image description here\" /></a></p>\n<p>Any idea about this error ?</p>\n<p>Edit:\nI changed my script and still had the same error:</p>\n<pre><code>@Grapes(@Grab(group='org.apache.poi', module='poi-ooxml', version='3.9'))\nimport com.opencsv.CSVReader\n@Grapes(@Grab(group='com.opencsv', module='opencsv', version='4.2'))\nimport org.apache.poi.ss.usermodel.*\nimport org.apache.poi.hssf.usermodel.*\nimport org.apache.poi.xssf.usermodel.*\nimport org.apache.poi.ss.util.*\nimport org.apache.poi.ss.usermodel.*\nimport org.apache.poi.hssf.extractor.*\nimport java.nio.charset.*\nimport java.io.*\nimport org.apache.commons.io.IOUtils\n\ndef flowFile = session.get()\ndef date = new Date()\n\nif(!flowFile) return\n\nflowFile = session.write(flowFile, {inputStream, outputStream -&gt;\ntry {\ndef nextLine = ''\nreader = new CSVReader(new FileReader(csvFilePath), FILE_DELIMITER);\n\n  Workbook wb = WorkbookFactory.create(inputStream,);\n Sheet sheet1 = wb.createSheet(&quot;Feuille&quot;);\n\n// workBook = new SXSSFWorkbook();\n//sheet = (SXSSFSheet) workBook.createSheet('Sheet');\n\nint rowNum = 0;\nwhile((nextLine = reader.readNext()) != null) {\nRow currentRow = sheet1.createRow(rowNum++);\nfor(int i=0; i &lt; nextLine.length; i++) {\nif(NumberUtils.isDigits(nextLine[i])) {\ncurrentRow.createCell(i).setCellValue(Integer.parseInt(nextLine[i]));\n} else if (NumberUtils.isNumber(nextLine[i])) {\ncurrentRow.createCell(i).setCellValue(Double.parseDouble(nextLine[i]));\n} else {\ncurrentRow.createCell(i).setCellValue(nextLine[i]);\n}\n}\n}\n\nfileOutputStream = new FileOutputStream(generatedXlsFilePath.trim());\nwb.write(fileOutputStream);\n\nwb.close();\nfileOutputStream.close();\nreader.close();\noutputStream.close();\n\n} catch(e) {\nsession.transfer(flowFile, REL_FAILURE)\n}\n} as StreamCallback)\n\ndef filename = flowFile.getAttribute('filename')+'.xlsx'\nflowFile = session.putAttribute(flowFile, 'filename', filename)\n\nsession.transfer(flowFile, REL_SUCCESS)\n</code></pre>\n"},{"tags":["java","random","random-seed"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672392413,"post_id":74956511,"comment_id":132280840,"body_markdown":"You may want to read about the Fisher-Yates algorithm for shuffling. Look it up.","body":"You may want to read about the Fisher-Yates algorithm for shuffling. Look it up."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672392529,"post_id":74956511,"comment_id":132280862,"body_markdown":"Your problem is with the `if ( k == CorrectWord.length() )` case. In this case you are setting `i` to 0 and not changing `k`, so `k` will remain at the word length. This means every time through the loop you will again get into this `if` statement and set `i` back to 0, which prevents you from ever getting out of the loop.","body":"Your problem is with the <code>if ( k == CorrectWord.length() )</code> case. In this case you are setting <code>i</code> to 0 and not changing <code>k</code>, so <code>k</code> will remain at the word length. This means every time through the loop you will again get into this <code>if</code> statement and set <code>i</code> back to 0, which prevents you from ever getting out of the loop."},{"owner":{"account_id":11942302,"reputation":1,"user_id":14251330,"display_name":"Ignatius the Learner"},"score":0,"creation_date":1672440697,"post_id":74956511,"comment_id":132292006,"body_markdown":"@OleV.V. \nAh ha! Bingo! Thank you so much for pointing that out. Now it appears my program works just fine!","body":"@OleV.V.  Ah ha! Bingo! Thank you so much for pointing that out. Now it appears my program works just fine!"}],"owner":{"account_id":11942302,"reputation":1,"user_id":14251330,"display_name":"Ignatius the Learner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672352184,"creation_date":1672352184,"question_id":74956511,"body_markdown":"I was given instructions to program a jumble word game in Java last semester, as an assignment. My instructor said I could post this on stackoverflow after the due date for the assignment had expired, so nothing here is unauthorized outside help (aka cheating). A good description of the program is as follows:\r\n\r\nThis program reads from a file of a long list of words, randomly selects one of those words, then randomly jumbles one of those words. The user will then see the jumbled word,\r\nand see a menu that allows them to either take a guess, get a hint, get a new word, or quit. Each new word gives a possible 10 points, but guessing incorrectly and getting hints\r\nwill decrease the total number of possible points the user can get from guessing the word correctly.\r\n\r\nIf the total number of possible points reaches zero for a word,\r\nthe program will generate a new word for the user. If the user guesses the word correctly, the program will congratulate them, and display the number of points gained\r\nfrom that word, as well as the user&#39;s total score. Upon the exit of the program by the user, the program will display the final score of the user for that specific run.\r\n\r\nThe file that has the list of words that I used is called words.txt, and it looks like this:\r\n\r\n[screenshot of &#39;words.txt&#39;](https://i.stack.imgur.com/CoJAf.png)\r\n\r\nThe first line is the number of words in the file. I use that to define the array size.\r\n\r\nEverything about the program works fine, except that sometimes when I play the game over and over again, I will get stuck in an infinite loop. The worst part is, there&#39;s no apparent pattern to the infinite loops, save for the fact that the infinite loop always occurs after the program identifies the word to be jumbled. But other than that, there is no easy pattern to see.\r\n\r\nI asked my instructor for help, and he said he didn&#39;t find anything that jumped out to him that was obviously faulty code-wise. He said he could&#39;ve found out the problem if he stared at it for hours, but he didn&#39;t have that much time. Since he couldn&#39;t find out what was the with the code itself, he let me submit my code without penalty for this weird bug. I remember getting a perfect score on the assignment.\r\n\r\nSometimes the bug will manifest itself in the first few iterations of the program:\r\n\r\n[Example1](https://i.stack.imgur.com/R4XG3.png)\r\n\r\n[Example2](https://i.stack.imgur.com/bNhDN.png)\r\n\r\nBut sometimes it will take longer for the bug to manifest:\r\n\r\n[Example3](https://i.stack.imgur.com/BJopZ.png)\r\n\r\nHere is the computer program that I wrote:\r\n\r\n```\r\nimport java.util.*;\r\nimport java.io.*;\r\n\r\npublic class Proj5{\r\n  public static void main(String [] args) throws IOException {\r\n    Scanner keyboard = new Scanner(System.in);\r\n    Random randGen = new Random();\r\n\r\n    System.out.print(&quot;Enter in text file containing words (Ex: words.txt): &quot;);\r\n    String filename = keyboard.nextLine();\r\n    System.out.println();\r\n\r\n    Scanner s = new Scanner(new File(filename));\r\n\r\n    String line = s.nextLine();\r\n    int arraySize = Integer.parseInt(line);\r\n\r\n    String [] WordList = new String [arraySize];\r\n\r\n    for(int i = 0; i &lt; arraySize; i++){\r\n      WordList[i] = s.nextLine();\r\n    }\r\n\r\n    s.close();\r\n\r\n    boolean OuterExitValue = true;\r\n\r\n    int totalScore = 0;\r\n\r\n    while(OuterExitValue){\r\n\r\n    int RandomWord = randGen.nextInt(WordList.length);\r\n\r\n    String CorrectWord = WordList[RandomWord];\r\n\r\n    int RandomN, k = 0, i = 0;\r\n\r\n    System.out.print(&quot;Word = &quot; + CorrectWord);\r\n\r\n    char [] JumbledWord = new char [CorrectWord.length()];\r\n    boolean [] check = new boolean [CorrectWord.length()];\r\n\r\n    while( i &lt; CorrectWord.length() ) {\r\n\r\n      RandomN = randGen.nextInt(CorrectWord.length());\r\n\r\n      if ( !(check[RandomN % CorrectWord.length()]) ) {\r\n\r\n        JumbledWord[RandomN % CorrectWord.length()] = CorrectWord.charAt(i);\r\n        //System.out.println(JumbledWord[i]);\r\n        check[RandomN % CorrectWord.length()] = true;\r\n        i++;\r\n\r\n      }\r\n\r\n      if ( i == CorrectWord.length() ){\r\n\r\n        for(int j = 0; j &lt; CorrectWord.length(); j++){\r\n\r\n          if( JumbledWord[j] == CorrectWord.charAt(j) )\r\n            k++;\r\n        }\r\n\r\n      }\r\n\r\n      if ( k == CorrectWord.length() ) {\r\n\r\n          i = 0;\r\n\r\n          for(int j = 0; j &lt; CorrectWord.length(); j++){\r\n            check[j] = false;\r\n          }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    System.out.println();\r\n\r\n    int NPoints = 10;\r\n    String guess = &quot;a&quot;;\r\n    boolean InnerExitValue = true;\r\n\r\n    while(InnerExitValue){\r\n\r\n      System.out.print(&quot;Current puzzle: &quot;);\r\n\r\n      for (i = 0; i &lt; CorrectWord.length(); i++)\r\n        System.out.print(JumbledWord[i]);\r\n\r\n        System.out.println(&quot;\\nCurrent points for word: &quot; + NPoints);\r\n        System.out.print(&quot;Enter (g)uess, (n)ew word, (h)int, or (q)uit: &quot;);\r\n        char option = keyboard.next().toLowerCase().charAt(0);\r\n\r\n        switch (option) {\r\n\r\n          case &#39;q&#39;:\r\n            InnerExitValue = false;\r\n            OuterExitValue = false;\r\n            System.out.println(&quot;\\nThanks for Playing! Goodbye!&quot;);\r\n            System.out.println(&quot;Final score: &quot; + totalScore);\r\n            System.exit(0);\r\n            break;\r\n\r\n          case &#39;h&#39;:\r\n            int RandomLetter = randGen.nextInt(CorrectWord.length());\r\n            int RandomSpot = RandomLetter + 1;\r\n            System.out.println(&quot;\\nThe letter at spot &quot; + RandomSpot + &quot; is &quot; + CorrectWord.charAt(RandomLetter) + &quot;\\n&quot; );\r\n            NPoints = NPoints/2;\r\n            break;\r\n\r\n          case &#39;g&#39;:\r\n\r\n            System.out.print(&quot;\\nEnter your guess: &quot;);\r\n            guess = keyboard.next();\r\n\r\n            if ( !(guess.equalsIgnoreCase(CorrectWord)) ) {\r\n              NPoints -= 1;\r\n              System.out.println(&quot;Sorry, try again.\\n&quot;);\r\n            }\r\n            else{\r\n              totalScore += NPoints;\r\n              System.out.println(&quot;Congratulations! You guessed it!&quot;);\r\n              System.out.println(&quot;Score for word: &quot; + NPoints);\r\n              System.out.println(&quot;Total score: &quot; + totalScore);\r\n              System.out.println();\r\n              InnerExitValue = false;\r\n            }\r\n            break;\r\n\r\n          case &#39;n&#39;:\r\n            InnerExitValue = false;\r\n            System.out.println();\r\n            break;\r\n\r\n          default:\r\n            System.out.println(&quot;Invalid Choice - &#39;g&#39;, &#39;n&#39; &#39;h&#39; or &#39;q&#39; only.\\n&quot;);\r\n        }\r\n\r\n        if(NPoints == 0){\r\n          System.out.println(&quot;Word points = 0. Generating a new word&quot;);\r\n          InnerExitValue = false;\r\n        }\r\n\r\n\r\n      }\r\n\r\n    }\r\n\r\n}\r\n}\r\n```\r\n\r\nI tried some things out with my code. I used traces to find out where my code was getting stuck in an infinite loop, and it turns out that the infinite loop is always occurring in the first while loop that has the purpose of jumbling a word and checking that it&#39;s jumbled properly. I added this trace at the bottom of the first while loop, right before the bracket, where I just inputted:\r\n\r\n```\r\nfor(int m = 0; m &lt; CorrectWord.length(); m++)\r\n          System.out.print(JumbledWord[m]);\r\n```\r\n\r\nThis trace allowed me to see what jumbled word is being seen by the computer before it becomes a properly jumbled word that the user can deal with. This allowed me to see this:\r\n\r\n[Program output with trace in code](https://i.stack.imgur.com/6B7jA.png)\r\n\r\nIf you look carefully, you can see that every &#39;current puzzle&#39; is just the last four or five sequence of characters in that jumbled mess of letters. Presumably, this means the last sequence is being grabbed by the computer to become the &#39;current puzzle&#39;, which is in line with the logic inside my program, so that&#39;s a good sign that the program is working as intended. So what about using this trace to find what an infinite loop will look like?\r\n\r\nHere is another screenshot:\r\n\r\n[Program output with trace showing infinite loop](https://i.stack.imgur.com/5nePk.png)\r\n\r\nIn the above image, we see the program jumbling the word, but for some reason, the w character becomes more, and more frequently printed to the screen compared to all the other ones, and then it just keeps being printed to the screen indefinitely. But that is not something I expect to see given my code. I suspect there is a teeny tiny error in the algorithm that I concocted. It seems that the program occasionally jumbles words in a way that leaves out essential letters that need to be in that sequence of characters in order for the word to be correctly jumbled. We can see the same phenomena with this other screenshot:\r\n\r\n[Program output with trace showing infinite loop 2](https://i.stack.imgur.com/ewPC5.png)\r\n\r\nIn both pictures, one letter is being oddly left out with the first couple of &#39;jumbles.&#39; For the last picture, it is &#39;d&#39; and for the second to last picture, it is &#39;k&#39;. This may be a hint that with my algorithm, I am not actually &#39;jumbling&#39; letters, instead I am copying and pasting letters into certain indexes, inevitably resulting in odd cases where at least one letter is just &#39;pasted&#39; over or overwritten by other letters, never appearing again. I am not sure that this decisively solves the issue for me, though.","title":"Jumble word game written in Java using a random number generator non-deterministically gets the user stuck in an infinite loop. How to fix?","body":"<p>I was given instructions to program a jumble word game in Java last semester, as an assignment. My instructor said I could post this on stackoverflow after the due date for the assignment had expired, so nothing here is unauthorized outside help (aka cheating). A good description of the program is as follows:</p>\n<p>This program reads from a file of a long list of words, randomly selects one of those words, then randomly jumbles one of those words. The user will then see the jumbled word,\nand see a menu that allows them to either take a guess, get a hint, get a new word, or quit. Each new word gives a possible 10 points, but guessing incorrectly and getting hints\nwill decrease the total number of possible points the user can get from guessing the word correctly.</p>\n<p>If the total number of possible points reaches zero for a word,\nthe program will generate a new word for the user. If the user guesses the word correctly, the program will congratulate them, and display the number of points gained\nfrom that word, as well as the user's total score. Upon the exit of the program by the user, the program will display the final score of the user for that specific run.</p>\n<p>The file that has the list of words that I used is called words.txt, and it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/CoJAf.png\" rel=\"nofollow noreferrer\">screenshot of 'words.txt'</a></p>\n<p>The first line is the number of words in the file. I use that to define the array size.</p>\n<p>Everything about the program works fine, except that sometimes when I play the game over and over again, I will get stuck in an infinite loop. The worst part is, there's no apparent pattern to the infinite loops, save for the fact that the infinite loop always occurs after the program identifies the word to be jumbled. But other than that, there is no easy pattern to see.</p>\n<p>I asked my instructor for help, and he said he didn't find anything that jumped out to him that was obviously faulty code-wise. He said he could've found out the problem if he stared at it for hours, but he didn't have that much time. Since he couldn't find out what was the with the code itself, he let me submit my code without penalty for this weird bug. I remember getting a perfect score on the assignment.</p>\n<p>Sometimes the bug will manifest itself in the first few iterations of the program:</p>\n<p><a href=\"https://i.stack.imgur.com/R4XG3.png\" rel=\"nofollow noreferrer\">Example1</a></p>\n<p><a href=\"https://i.stack.imgur.com/bNhDN.png\" rel=\"nofollow noreferrer\">Example2</a></p>\n<p>But sometimes it will take longer for the bug to manifest:</p>\n<p><a href=\"https://i.stack.imgur.com/BJopZ.png\" rel=\"nofollow noreferrer\">Example3</a></p>\n<p>Here is the computer program that I wrote:</p>\n<pre><code>import java.util.*;\nimport java.io.*;\n\npublic class Proj5{\n  public static void main(String [] args) throws IOException {\n    Scanner keyboard = new Scanner(System.in);\n    Random randGen = new Random();\n\n    System.out.print(&quot;Enter in text file containing words (Ex: words.txt): &quot;);\n    String filename = keyboard.nextLine();\n    System.out.println();\n\n    Scanner s = new Scanner(new File(filename));\n\n    String line = s.nextLine();\n    int arraySize = Integer.parseInt(line);\n\n    String [] WordList = new String [arraySize];\n\n    for(int i = 0; i &lt; arraySize; i++){\n      WordList[i] = s.nextLine();\n    }\n\n    s.close();\n\n    boolean OuterExitValue = true;\n\n    int totalScore = 0;\n\n    while(OuterExitValue){\n\n    int RandomWord = randGen.nextInt(WordList.length);\n\n    String CorrectWord = WordList[RandomWord];\n\n    int RandomN, k = 0, i = 0;\n\n    System.out.print(&quot;Word = &quot; + CorrectWord);\n\n    char [] JumbledWord = new char [CorrectWord.length()];\n    boolean [] check = new boolean [CorrectWord.length()];\n\n    while( i &lt; CorrectWord.length() ) {\n\n      RandomN = randGen.nextInt(CorrectWord.length());\n\n      if ( !(check[RandomN % CorrectWord.length()]) ) {\n\n        JumbledWord[RandomN % CorrectWord.length()] = CorrectWord.charAt(i);\n        //System.out.println(JumbledWord[i]);\n        check[RandomN % CorrectWord.length()] = true;\n        i++;\n\n      }\n\n      if ( i == CorrectWord.length() ){\n\n        for(int j = 0; j &lt; CorrectWord.length(); j++){\n\n          if( JumbledWord[j] == CorrectWord.charAt(j) )\n            k++;\n        }\n\n      }\n\n      if ( k == CorrectWord.length() ) {\n\n          i = 0;\n\n          for(int j = 0; j &lt; CorrectWord.length(); j++){\n            check[j] = false;\n          }\n\n        }\n\n    }\n\n    System.out.println();\n\n    int NPoints = 10;\n    String guess = &quot;a&quot;;\n    boolean InnerExitValue = true;\n\n    while(InnerExitValue){\n\n      System.out.print(&quot;Current puzzle: &quot;);\n\n      for (i = 0; i &lt; CorrectWord.length(); i++)\n        System.out.print(JumbledWord[i]);\n\n        System.out.println(&quot;\\nCurrent points for word: &quot; + NPoints);\n        System.out.print(&quot;Enter (g)uess, (n)ew word, (h)int, or (q)uit: &quot;);\n        char option = keyboard.next().toLowerCase().charAt(0);\n\n        switch (option) {\n\n          case 'q':\n            InnerExitValue = false;\n            OuterExitValue = false;\n            System.out.println(&quot;\\nThanks for Playing! Goodbye!&quot;);\n            System.out.println(&quot;Final score: &quot; + totalScore);\n            System.exit(0);\n            break;\n\n          case 'h':\n            int RandomLetter = randGen.nextInt(CorrectWord.length());\n            int RandomSpot = RandomLetter + 1;\n            System.out.println(&quot;\\nThe letter at spot &quot; + RandomSpot + &quot; is &quot; + CorrectWord.charAt(RandomLetter) + &quot;\\n&quot; );\n            NPoints = NPoints/2;\n            break;\n\n          case 'g':\n\n            System.out.print(&quot;\\nEnter your guess: &quot;);\n            guess = keyboard.next();\n\n            if ( !(guess.equalsIgnoreCase(CorrectWord)) ) {\n              NPoints -= 1;\n              System.out.println(&quot;Sorry, try again.\\n&quot;);\n            }\n            else{\n              totalScore += NPoints;\n              System.out.println(&quot;Congratulations! You guessed it!&quot;);\n              System.out.println(&quot;Score for word: &quot; + NPoints);\n              System.out.println(&quot;Total score: &quot; + totalScore);\n              System.out.println();\n              InnerExitValue = false;\n            }\n            break;\n\n          case 'n':\n            InnerExitValue = false;\n            System.out.println();\n            break;\n\n          default:\n            System.out.println(&quot;Invalid Choice - 'g', 'n' 'h' or 'q' only.\\n&quot;);\n        }\n\n        if(NPoints == 0){\n          System.out.println(&quot;Word points = 0. Generating a new word&quot;);\n          InnerExitValue = false;\n        }\n\n\n      }\n\n    }\n\n}\n}\n</code></pre>\n<p>I tried some things out with my code. I used traces to find out where my code was getting stuck in an infinite loop, and it turns out that the infinite loop is always occurring in the first while loop that has the purpose of jumbling a word and checking that it's jumbled properly. I added this trace at the bottom of the first while loop, right before the bracket, where I just inputted:</p>\n<pre><code>for(int m = 0; m &lt; CorrectWord.length(); m++)\n          System.out.print(JumbledWord[m]);\n</code></pre>\n<p>This trace allowed me to see what jumbled word is being seen by the computer before it becomes a properly jumbled word that the user can deal with. This allowed me to see this:</p>\n<p><a href=\"https://i.stack.imgur.com/6B7jA.png\" rel=\"nofollow noreferrer\">Program output with trace in code</a></p>\n<p>If you look carefully, you can see that every 'current puzzle' is just the last four or five sequence of characters in that jumbled mess of letters. Presumably, this means the last sequence is being grabbed by the computer to become the 'current puzzle', which is in line with the logic inside my program, so that's a good sign that the program is working as intended. So what about using this trace to find what an infinite loop will look like?</p>\n<p>Here is another screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/5nePk.png\" rel=\"nofollow noreferrer\">Program output with trace showing infinite loop</a></p>\n<p>In the above image, we see the program jumbling the word, but for some reason, the w character becomes more, and more frequently printed to the screen compared to all the other ones, and then it just keeps being printed to the screen indefinitely. But that is not something I expect to see given my code. I suspect there is a teeny tiny error in the algorithm that I concocted. It seems that the program occasionally jumbles words in a way that leaves out essential letters that need to be in that sequence of characters in order for the word to be correctly jumbled. We can see the same phenomena with this other screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/ewPC5.png\" rel=\"nofollow noreferrer\">Program output with trace showing infinite loop 2</a></p>\n<p>In both pictures, one letter is being oddly left out with the first couple of 'jumbles.' For the last picture, it is 'd' and for the second to last picture, it is 'k'. This may be a hint that with my algorithm, I am not actually 'jumbling' letters, instead I am copying and pasting letters into certain indexes, inevitably resulting in odd cases where at least one letter is just 'pasted' over or overwritten by other letters, never appearing again. I am not sure that this decisively solves the issue for me, though.</p>\n"},{"tags":["java","android","android-recyclerview","sharedpreferences"],"answers":[{"tags":[],"owner":{"account_id":402229,"reputation":93994,"user_id":769265,"display_name":"David Wasser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672268903,"creation_date":1672268903,"answer_id":74945795,"question_id":74945578,"body_markdown":"When you return to the list after adding an item, you reread all the items from the `SharedPreferences` in `StartDisplay()` (which is called from `onResume()`. This changes the data that the adapter is working with. However, you didn&#39;t tell the adapter that the data has changed. The adapter caches the `View`s and you must tell it when you modify the data, otherwise it doesn&#39;t know the data has changed. Add the following to `StartDisplay()` which will invalidate the adapter&#39;s cache and ensure that it rebuilds all the views:\r\n\r\n    adapter.notifyDataSetChanged()\r\n","title":"Why does the Recycleview work differently when I start it or when I go back to it from an other activity?","body":"<p>When you return to the list after adding an item, you reread all the items from the <code>SharedPreferences</code> in <code>StartDisplay()</code> (which is called from <code>onResume()</code>. This changes the data that the adapter is working with. However, you didn't tell the adapter that the data has changed. The adapter caches the <code>View</code>s and you must tell it when you modify the data, otherwise it doesn't know the data has changed. Add the following to <code>StartDisplay()</code> which will invalidate the adapter's cache and ensure that it rebuilds all the views:</p>\n<pre><code>adapter.notifyDataSetChanged()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17536051,"reputation":13,"user_id":20830082,"display_name":"&#193;kos Szegleti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351932,"creation_date":1672351932,"answer_id":74956492,"question_id":74945578,"body_markdown":"Thank you for your help! It works.\r\nBut I noticed an other bug, what I would like to share.\r\nThe `StartDisplay()` function is earlier then where I define the adapter exactly so when I used the `adapter.notifyDataSetChanged()` then I got an exception as null object reference. So I put the function calling to the end of the initialization part and now everything is fine.","title":"Why does the Recycleview work differently when I start it or when I go back to it from an other activity?","body":"<p>Thank you for your help! It works.\nBut I noticed an other bug, what I would like to share.\nThe <code>StartDisplay()</code> function is earlier then where I define the adapter exactly so when I used the <code>adapter.notifyDataSetChanged()</code> then I got an exception as null object reference. So I put the function calling to the end of the initialization part and now everything is fine.</p>\n"}],"owner":{"account_id":17536051,"reputation":13,"user_id":20830082,"display_name":"&#193;kos Szegleti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74945795,"answer_count":2,"score":1,"last_activity_date":1672351932,"creation_date":1672266862,"question_id":74945578,"body_markdown":"I try to create a Shopping/ToDoList application where the items are contained in SharedPreferences.\r\nWhen I start the application, and I choose what I want to execute, Shopping list part or ToDoList part, then the java code fetches the existing data from the SharedPreferences and give to the RecycleView to create and show a list.\r\nIt seems works totally correct, but if I push the &quot;add&quot; button, then a new Activity is executed where I can specify the items, and when I click the save button, then the java code safe to the SharedPreferences and close the Activity and goes back to the &quot;list&quot; activity where the list should appears again with the new item. But when one data is inserted not in order in SharedPreferences but between two older data then the list create method get crazy and repeat always only the last data from SharedPreferences. But when I close the application, and restart, or goes back to the Main activity where I can choose again which list part I want then the list is totally OK again.\r\n\r\nThat is the list creating java code:\r\n\r\n\r\n```\r\npackage com.example.recycleviewapp;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport java.util.LinkedList;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class ShoppingList extends AppCompatActivity implements MyRecyclerViewAdapter.ItemClickListener, View.OnClickListener {\r\n\r\n    public MyRecyclerViewAdapter adapter;\r\n    public Button btn;\r\n    public SharedPreferences sharedPreferences;\r\n    public SharedPreferences.Editor myEdit;\r\n    private List&lt;String&gt; items;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_shoppinglist);\r\n        sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\r\n        myEdit = sharedPreferences.edit();\r\n        btn = findViewById(R.id.button);\r\n        items = new LinkedList&lt;&gt;();\r\n        StartDisplay();\r\n        RecyclerView recyclerView = findViewById(R.id.list);\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n        adapter = new MyRecyclerViewAdapter(this,items);\r\n        adapter.setClickListener(this);\r\n        recyclerView.setAdapter(adapter);\r\n        btn.setOnClickListener(this);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onItemClick(View view, int position) {\r\n        //sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\r\n        String item_click =adapter.getItem(position);\r\n        String[] itemarray = item_click.split(&quot; &quot;,0);\r\n        //Toast.makeText(this, adapter.RemoveItem(position), Toast.LENGTH_SHORT).show();\r\n        //adapter.RemoveItem(position);\r\n        //myEdit = sharedPreferences.edit();\r\n        myEdit.remove(itemarray[0]);\r\n        myEdit.commit();\r\n        adapter.notifyItemRemoved(position);\r\n        items.remove(item_click);\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View v) {\r\n        Intent NewSLItem = new Intent(ShoppingList.this, NewSLItem.class);\r\n        startActivity(NewSLItem);\r\n    }\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        StartDisplay();\r\n\r\n\r\n    }\r\n    public void StartDisplay()\r\n    {\r\n        //sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\r\n        Map&lt;String, ?&gt; allEntries = sharedPreferences.getAll();\r\n        items.clear();\r\n        for (Map.Entry&lt;String, ?&gt; entry : allEntries.entrySet())\r\n        {\r\n            //Toast.makeText(this, entry.getKey(), Toast.LENGTH_SHORT).show();\r\n            String [] item_total = entry.getValue().toString().split(&quot;;&quot;);\r\n            items.add(entry.getKey() + &quot; &quot; + item_total[0] + &quot; &quot; + item_total[1]);\r\n\r\n        }\r\n        allEntries.clear();\r\n\r\n    }\r\n}\r\n```\r\n\r\nHere is the code where I can specify the item:\r\n\r\n\r\n```\r\npackage com.example.recycleviewapp;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ListView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class NewSLItem extends MainActivity {\r\n    private ArrayList&lt;String&gt; items;\r\n    private ArrayAdapter&lt;String&gt; itemsAdapter;\r\n    private ListView lvItems;\r\n    private Button btn;\r\n    public SharedPreferences sharedPreferences;\r\n    public SharedPreferences.Editor myEdit;\r\n    public List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n    public EditText etNewItem;\r\n    public String[] unit = {&quot;liter&quot;, &quot;kg&quot;, &quot;pcs&quot;};\r\n    public Spinner spinner;\r\n    public EditText amount;\r\n    public String itemName;\r\n    public TextView title;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState)\r\n    {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_shoppinglist_popup);\r\n        sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\r\n        myEdit = sharedPreferences.edit();\r\n        btn = (Button)findViewById(R.id.addbtn);\r\n        title = findViewById(R.id.title);\r\n        etNewItem = (EditText) findViewById(R.id.etNewItem);\r\n        amount = (EditText) findViewById(R.id.amount);\r\n        spinner = (Spinner) findViewById(R.id.spinner);\r\n        ArrayAdapter aa = new ArrayAdapter(this,android.R.layout.simple_spinner_item,unit);\r\n        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n        spinner.setAdapter(aa);\r\n        title.setText(&quot;Create a new item for ShoppingList&quot;);\r\n        btn.setOnClickListener(new View.OnClickListener() {\r\n\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                onAddItem();\r\n                finish();\r\n            }\r\n        });\r\n    }\r\n    public void onAddItem()\r\n    {\r\n        //myEdit = sharedPreferences.edit();\r\n        itemName = etNewItem.getText().toString();\r\n        String itemValue = amount.getText().toString() + &quot;;&quot; + spinner.getSelectedItem().toString();\r\n        myEdit.putString(itemName,itemValue);\r\n        myEdit.commit();\r\n        etNewItem.setText(&quot;&quot;);\r\n    }\r\n}\r\n\r\n```\r\nand here is the RecyclerView code:\r\n\r\n\r\n```\r\npackage com.example.recycleviewapp;\r\n\r\nimport android.content.Context;\r\nimport android.graphics.Color;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport java.util.List;\r\n\r\npublic class MyRecyclerViewAdapter extends RecyclerView.Adapter&lt;MyRecyclerViewAdapter.ViewHolder&gt; {\r\n\r\n    private List&lt;String&gt; mData;\r\n    private LayoutInflater mInflater;\r\n    private ItemClickListener mClickListener;\r\n\r\n\r\n    MyRecyclerViewAdapter(Context context, List&lt;String&gt; data) {\r\n        this.mInflater = LayoutInflater.from(context);\r\n        this.mData = data;\r\n\r\n    }\r\n\r\n    @Override\r\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\r\n        View view = mInflater.inflate(R.layout.recyclerview_row, parent, false);\r\n        return new ViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(ViewHolder holder, int position) {\r\n        String meta_data = mData.get(position);\r\n        if (meta_data.contains(&quot;High&quot;)) holder.myTextView.setBackgroundColor(Color.parseColor(&quot;#FF003B&quot;));\r\n        holder.myTextView.setText(meta_data);\r\n\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return mData.size();\r\n    }\r\n\r\n\r\n    public class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\r\n        TextView myTextView;\r\n\r\n        ViewHolder(View itemView) {\r\n            super(itemView);\r\n            myTextView = itemView.findViewById(R.id.tvAnimalName);\r\n            itemView.setOnClickListener(this);\r\n        }\r\n\r\n        @Override\r\n        public void onClick(View view)\r\n        {\r\n        if (mClickListener != null) mClickListener.onItemClick(view, getAdapterPosition());\r\n        }\r\n    }\r\n\r\n    String getItem(int id) {return mData.get(id);\r\n    }\r\n\r\n\r\n    void setClickListener(ItemClickListener itemClickListener) {\r\n        this.mClickListener = itemClickListener;\r\n    }\r\n\r\n    public interface ItemClickListener {\r\n        void onItemClick(View view, int position);\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\n\r\nSo the problem is in casef of only where the data is not in order in SharedPreferences and I go back from a new activity.\r\n\r\nPlease help me if you can, where should I fix my application?\r\nThanks in advance!!!","title":"Why does the Recycleview work differently when I start it or when I go back to it from an other activity?","body":"<p>I try to create a Shopping/ToDoList application where the items are contained in SharedPreferences.\nWhen I start the application, and I choose what I want to execute, Shopping list part or ToDoList part, then the java code fetches the existing data from the SharedPreferences and give to the RecycleView to create and show a list.\nIt seems works totally correct, but if I push the &quot;add&quot; button, then a new Activity is executed where I can specify the items, and when I click the save button, then the java code safe to the SharedPreferences and close the Activity and goes back to the &quot;list&quot; activity where the list should appears again with the new item. But when one data is inserted not in order in SharedPreferences but between two older data then the list create method get crazy and repeat always only the last data from SharedPreferences. But when I close the application, and restart, or goes back to the Main activity where I can choose again which list part I want then the list is totally OK again.</p>\n<p>That is the list creating java code:</p>\n<pre><code>package com.example.recycleviewapp;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.Toast;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\nimport java.util.LinkedList;\nimport java.util.List;\nimport java.util.Map;\n\npublic class ShoppingList extends AppCompatActivity implements MyRecyclerViewAdapter.ItemClickListener, View.OnClickListener {\n\n    public MyRecyclerViewAdapter adapter;\n    public Button btn;\n    public SharedPreferences sharedPreferences;\n    public SharedPreferences.Editor myEdit;\n    private List&lt;String&gt; items;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_shoppinglist);\n        sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\n        myEdit = sharedPreferences.edit();\n        btn = findViewById(R.id.button);\n        items = new LinkedList&lt;&gt;();\n        StartDisplay();\n        RecyclerView recyclerView = findViewById(R.id.list);\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\n        adapter = new MyRecyclerViewAdapter(this,items);\n        adapter.setClickListener(this);\n        recyclerView.setAdapter(adapter);\n        btn.setOnClickListener(this);\n\n    }\n\n    @Override\n    public void onItemClick(View view, int position) {\n        //sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\n        String item_click =adapter.getItem(position);\n        String[] itemarray = item_click.split(&quot; &quot;,0);\n        //Toast.makeText(this, adapter.RemoveItem(position), Toast.LENGTH_SHORT).show();\n        //adapter.RemoveItem(position);\n        //myEdit = sharedPreferences.edit();\n        myEdit.remove(itemarray[0]);\n        myEdit.commit();\n        adapter.notifyItemRemoved(position);\n        items.remove(item_click);\n    }\n\n    @Override\n    public void onClick(View v) {\n        Intent NewSLItem = new Intent(ShoppingList.this, NewSLItem.class);\n        startActivity(NewSLItem);\n    }\n    @Override\n    public void onResume() {\n        super.onResume();\n        StartDisplay();\n\n\n    }\n    public void StartDisplay()\n    {\n        //sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\n        Map&lt;String, ?&gt; allEntries = sharedPreferences.getAll();\n        items.clear();\n        for (Map.Entry&lt;String, ?&gt; entry : allEntries.entrySet())\n        {\n            //Toast.makeText(this, entry.getKey(), Toast.LENGTH_SHORT).show();\n            String [] item_total = entry.getValue().toString().split(&quot;;&quot;);\n            items.add(entry.getKey() + &quot; &quot; + item_total[0] + &quot; &quot; + item_total[1]);\n\n        }\n        allEntries.clear();\n\n    }\n}\n</code></pre>\n<p>Here is the code where I can specify the item:</p>\n<pre><code>package com.example.recycleviewapp;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.SharedPreferences;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ListView;\nimport android.widget.Spinner;\nimport android.widget.TextView;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class NewSLItem extends MainActivity {\n    private ArrayList&lt;String&gt; items;\n    private ArrayAdapter&lt;String&gt; itemsAdapter;\n    private ListView lvItems;\n    private Button btn;\n    public SharedPreferences sharedPreferences;\n    public SharedPreferences.Editor myEdit;\n    public List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    public EditText etNewItem;\n    public String[] unit = {&quot;liter&quot;, &quot;kg&quot;, &quot;pcs&quot;};\n    public Spinner spinner;\n    public EditText amount;\n    public String itemName;\n    public TextView title;\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_shoppinglist_popup);\n        sharedPreferences = getSharedPreferences(&quot;ShoppingList&quot;, Context.MODE_PRIVATE);\n        myEdit = sharedPreferences.edit();\n        btn = (Button)findViewById(R.id.addbtn);\n        title = findViewById(R.id.title);\n        etNewItem = (EditText) findViewById(R.id.etNewItem);\n        amount = (EditText) findViewById(R.id.amount);\n        spinner = (Spinner) findViewById(R.id.spinner);\n        ArrayAdapter aa = new ArrayAdapter(this,android.R.layout.simple_spinner_item,unit);\n        aa.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n        spinner.setAdapter(aa);\n        title.setText(&quot;Create a new item for ShoppingList&quot;);\n        btn.setOnClickListener(new View.OnClickListener() {\n\n            @Override\n            public void onClick(View v)\n            {\n                onAddItem();\n                finish();\n            }\n        });\n    }\n    public void onAddItem()\n    {\n        //myEdit = sharedPreferences.edit();\n        itemName = etNewItem.getText().toString();\n        String itemValue = amount.getText().toString() + &quot;;&quot; + spinner.getSelectedItem().toString();\n        myEdit.putString(itemName,itemValue);\n        myEdit.commit();\n        etNewItem.setText(&quot;&quot;);\n    }\n}\n\n</code></pre>\n<p>and here is the RecyclerView code:</p>\n<pre><code>package com.example.recycleviewapp;\n\nimport android.content.Context;\nimport android.graphics.Color;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.List;\n\npublic class MyRecyclerViewAdapter extends RecyclerView.Adapter&lt;MyRecyclerViewAdapter.ViewHolder&gt; {\n\n    private List&lt;String&gt; mData;\n    private LayoutInflater mInflater;\n    private ItemClickListener mClickListener;\n\n\n    MyRecyclerViewAdapter(Context context, List&lt;String&gt; data) {\n        this.mInflater = LayoutInflater.from(context);\n        this.mData = data;\n\n    }\n\n    @Override\n    public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        View view = mInflater.inflate(R.layout.recyclerview_row, parent, false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(ViewHolder holder, int position) {\n        String meta_data = mData.get(position);\n        if (meta_data.contains(&quot;High&quot;)) holder.myTextView.setBackgroundColor(Color.parseColor(&quot;#FF003B&quot;));\n        holder.myTextView.setText(meta_data);\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return mData.size();\n    }\n\n\n    public class ViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener {\n        TextView myTextView;\n\n        ViewHolder(View itemView) {\n            super(itemView);\n            myTextView = itemView.findViewById(R.id.tvAnimalName);\n            itemView.setOnClickListener(this);\n        }\n\n        @Override\n        public void onClick(View view)\n        {\n        if (mClickListener != null) mClickListener.onItemClick(view, getAdapterPosition());\n        }\n    }\n\n    String getItem(int id) {return mData.get(id);\n    }\n\n\n    void setClickListener(ItemClickListener itemClickListener) {\n        this.mClickListener = itemClickListener;\n    }\n\n    public interface ItemClickListener {\n        void onItemClick(View view, int position);\n    }\n\n\n}\n</code></pre>\n<p>So the problem is in casef of only where the data is not in order in SharedPreferences and I go back from a new activity.</p>\n<p>Please help me if you can, where should I fix my application?\nThanks in advance!!!</p>\n"},{"tags":["java","file-io"],"comments":[{"owner":{"account_id":90083,"reputation":28474,"user_id":248129,"accept_rate":75,"display_name":"Richard JP Le Guen"},"score":1,"creation_date":1269811772,"post_id":2534632,"comment_id":2534260,"body_markdown":"... what&#39;s the question? Are you just looking for validation that this code will work?","body":"... what&#39;s the question? Are you just looking for validation that this code will work?"},{"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"score":0,"creation_date":1269812014,"post_id":2534632,"comment_id":2534275,"body_markdown":"No, I know this code works but it&#39;s very slow and it feels like it&#39;s stupid access the filesystem and get the contents for every subdirectory instead of getting everything at once.","body":"No, I know this code works but it&#39;s very slow and it feels like it&#39;s stupid access the filesystem and get the contents for every subdirectory instead of getting everything at once."},{"owner":{"account_id":2065488,"reputation":11429,"user_id":1841054,"accept_rate":93,"display_name":"Prahalad Gaggar"},"score":1,"creation_date":1372827209,"post_id":2534632,"comment_id":25334564,"body_markdown":"possible duplicate of [Recursively list files in Java](http://stackoverflow.com/questions/2056221/recursively-list-files-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2056221/recursively-list-files-in-java\">Recursively list files in Java</a>"}],"answers":[{"tags":[],"owner":{"account_id":11089,"reputation":400030,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"down_vote_count":0,"up_vote_count":146,"is_accepted":true,"score":146,"last_activity_date":1377675067,"creation_date":1269811805,"answer_id":2534643,"question_id":2534632,"body_markdown":"Assuming this is actual production code you&#39;ll be writing, then I suggest using the solution to this sort of thing that&#39;s already been solved - [Apache Commons IO][1], specifically [`FileUtils.listFiles()`][2]. It handles nested directories, filters (based on name, modification time, etc).\r\n\r\nFor example, for your regex:\r\n\r\n    Collection files = FileUtils.listFiles(\r\n      dir, \r\n      new RegexFileFilter(&quot;^(.*?)&quot;), \r\n      DirectoryFileFilter.DIRECTORY\r\n    );\r\n\r\nThis will recursively search for files matching the `^(.*?)` regex, returning the results as a collection.\r\n\r\nIt&#39;s worth noting that this will be no faster than rolling your own code, it&#39;s doing the same thing - trawling a filesystem in Java is just slow. The difference is, the Apache Commons version will have no bugs in it.\r\n\r\n  [1]: http://commons.apache.org/proper/commons-io/\r\n  [2]: http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#listFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29","title":"List all files from a directory recursively with Java","body":"<p>Assuming this is actual production code you'll be writing, then I suggest using the solution to this sort of thing that's already been solved - <a href=\"http://commons.apache.org/proper/commons-io/\" rel=\"noreferrer\">Apache Commons IO</a>, specifically <a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/FileUtils.html#listFiles%28java.io.File,%20org.apache.commons.io.filefilter.IOFileFilter,%20org.apache.commons.io.filefilter.IOFileFilter%29\" rel=\"noreferrer\"><code>FileUtils.listFiles()</code></a>. It handles nested directories, filters (based on name, modification time, etc).</p>\n\n<p>For example, for your regex:</p>\n\n<pre><code>Collection files = FileUtils.listFiles(\n  dir, \n  new RegexFileFilter(\"^(.*?)\"), \n  DirectoryFileFilter.DIRECTORY\n);\n</code></pre>\n\n<p>This will recursively search for files matching the <code>^(.*?)</code> regex, returning the results as a collection.</p>\n\n<p>It's worth noting that this will be no faster than rolling your own code, it's doing the same thing - trawling a filesystem in Java is just slow. The difference is, the Apache Commons version will have no bugs in it.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1269813585,"creation_date":1269813585,"answer_id":2534741,"question_id":2534632,"body_markdown":"&gt; it feels like it&#39;s stupid access the\r\n&gt; filesystem and get the contents for\r\n&gt; every subdirectory instead of getting\r\n&gt; everything at once.\r\n\r\nYour feeling is wrong. That&#39;s how filesystems work. There is no faster way (except when you have to do this repeatedly or for different patterns, you can cache all the file paths in memory, but then you have to deal with cache invalidation i.e. what happens when files are added/removed/renamed while the app runs).","title":"List all files from a directory recursively with Java","body":"<blockquote>\n  <p>it feels like it's stupid access the\n  filesystem and get the contents for\n  every subdirectory instead of getting\n  everything at once.</p>\n</blockquote>\n\n<p>Your feeling is wrong. That's how filesystems work. There is no faster way (except when you have to do this repeatedly or for different patterns, you can cache all the file paths in memory, but then you have to deal with cache invalidation i.e. what happens when files are added/removed/renamed while the app runs).</p>\n"},{"tags":[],"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1269831338,"creation_date":1269831338,"answer_id":2535558,"question_id":2534632,"body_markdown":"Java&#39;s interface for reading filesystem folder contents is not very performant (as you&#39;ve discovered).  JDK 7 fixes this with a completely new interface for this sort of thing, which should bring native level performance to these sorts of operations.\r\n\r\nThe core issue is that Java makes a native system call for every single file.  On a low latency interface, this is not that big of a deal - but on a network with even moderate latency, it really adds up.  If you profile your algorithm above, you&#39;ll find that the bulk of the time is spent in the pesky isDirectory() call - that&#39;s because you are incurring a round trip for every single call to isDirectory().  Most modern OSes can provide this sort of information when the list of files/folders was originally requested (as opposed to querying each individual file path for it&#39;s properties).\r\n\r\nIf you can&#39;t wait for JDK7, one strategy for addressing this latency is to go multi-threaded and use an ExecutorService with a maximum # of threads to perform your recursion.  It&#39;s not great (you have to deal with locking of your output data structures), but it&#39;ll be a heck of a lot faster than doing this single threaded.\r\n\r\nIn all of your discussions about this sort of thing, I highly recommend that you compare against the best you could do using native code (or even a command line script that does roughly the same thing).  Saying that it takes an hour to traverse a network structure doesn&#39;t really mean that much.  Telling us that you can do it native in 7 second, but it takes an hour in Java will get people&#39;s attention.","title":"List all files from a directory recursively with Java","body":"<p>Java's interface for reading filesystem folder contents is not very performant (as you've discovered).  JDK 7 fixes this with a completely new interface for this sort of thing, which should bring native level performance to these sorts of operations.</p>\n\n<p>The core issue is that Java makes a native system call for every single file.  On a low latency interface, this is not that big of a deal - but on a network with even moderate latency, it really adds up.  If you profile your algorithm above, you'll find that the bulk of the time is spent in the pesky isDirectory() call - that's because you are incurring a round trip for every single call to isDirectory().  Most modern OSes can provide this sort of information when the list of files/folders was originally requested (as opposed to querying each individual file path for it's properties).</p>\n\n<p>If you can't wait for JDK7, one strategy for addressing this latency is to go multi-threaded and use an ExecutorService with a maximum # of threads to perform your recursion.  It's not great (you have to deal with locking of your output data structures), but it'll be a heck of a lot faster than doing this single threaded.</p>\n\n<p>In all of your discussions about this sort of thing, I highly recommend that you compare against the best you could do using native code (or even a command line script that does roughly the same thing).  Saying that it takes an hour to traverse a network structure doesn't really mean that much.  Telling us that you can do it native in 7 second, but it takes an hour in Java will get people's attention.</p>\n"},{"tags":[],"owner":{"account_id":243347,"reputation":6996,"user_id":515455,"accept_rate":100,"display_name":"Daniel Ryan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1297055535,"creation_date":1297055535,"answer_id":4918239,"question_id":2534632,"body_markdown":"Just so you know isDirectory() is quite a slow method. I&#39;m finding it quite slow in my file browser. I&#39;ll be looking into a library to replace it with native code.","title":"List all files from a directory recursively with Java","body":"<p>Just so you know isDirectory() is quite a slow method. I'm finding it quite slow in my file browser. I'll be looking into a library to replace it with native code.</p>\n"},{"tags":[],"owner":{"account_id":1096156,"reputation":9,"user_id":1089718,"display_name":"Kiran"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1672351916,"creation_date":1323433795,"answer_id":8445494,"question_id":2534632,"body_markdown":"The more efficient way I found in dealing with millions of folders and files is to capture a directory listing through a DOS command in some file and parse it.\r\n\r\nOnce you have parsed the data then you can do analysis and compute statistics.\r\n","title":"List all files from a directory recursively with Java","body":"<p>The more efficient way I found in dealing with millions of folders and files is to capture a directory listing through a DOS command in some file and parse it.</p>\n<p>Once you have parsed the data then you can do analysis and compute statistics.</p>\n"},{"tags":[],"owner":{"account_id":2295854,"reputation":792,"user_id":2017307,"accept_rate":100,"display_name":"Vishal Mokal"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1672351857,"creation_date":1362737357,"answer_id":15291433,"question_id":2534632,"body_markdown":"This function will probably list all the file name and its path from its directory and its subdirectories.\r\n\r\n    public void listFile(String pathname) {\r\n        File f = new File(pathname);\r\n        File[] listfiles = f.listFiles();\r\n        for (int i = 0; i &lt; listfiles.length; i++) {\r\n            if (listfiles[i].isDirectory()) {\r\n                File[] internalFile = listfiles[i].listFiles();\r\n                for (int j = 0; j &lt; internalFile.length; j++) {\r\n                    System.out.println(internalFile[j]);\r\n                    if (internalFile[j].isDirectory()) {\r\n                        String name = internalFile[j].getAbsolutePath();\r\n                        listFile(name);\r\n                    }\r\n                }\r\n            } else {\r\n                System.out.println(listfiles[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p>This function will probably list all the file name and its path from its directory and its subdirectories.</p>\n<pre><code>public void listFile(String pathname) {\n    File f = new File(pathname);\n    File[] listfiles = f.listFiles();\n    for (int i = 0; i &lt; listfiles.length; i++) {\n        if (listfiles[i].isDirectory()) {\n            File[] internalFile = listfiles[i].listFiles();\n            for (int j = 0; j &lt; internalFile.length; j++) {\n                System.out.println(internalFile[j]);\n                if (internalFile[j].isDirectory()) {\n                    String name = internalFile[j].getAbsolutePath();\n                    listFile(name);\n                }\n            }\n        } else {\n            System.out.println(listfiles[i]);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12685,"reputation":35096,"user_id":25122,"accept_rate":75,"display_name":"RealHowTo"},"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1672351798,"creation_date":1363606352,"answer_id":15475784,"question_id":2534632,"body_markdown":"The fast way to get the content of a directory using Java 7 NIO:\r\n\r\n    import java.nio.file.DirectoryStream;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.FileSystems;\r\n    import java.nio.file.Path;\r\n\r\n    ...\r\n\r\n    Path dir = FileSystems.getDefault().getPath(filePath);\r\n    DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir);\r\n    for (Path path : stream) {\r\n       System.out.println(path.getFileName());\r\n    }\r\n    stream.close();\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p>The fast way to get the content of a directory using Java 7 NIO:</p>\n<pre><code>import java.nio.file.DirectoryStream;\nimport java.nio.file.Files;\nimport java.nio.file.FileSystems;\nimport java.nio.file.Path;\n\n...\n\nPath dir = FileSystems.getDefault().getPath(filePath);\nDirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir);\nfor (Path path : stream) {\n   System.out.println(path.getFileName());\n}\nstream.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2835128,"reputation":11494,"user_id":2435872,"accept_rate":83,"display_name":"jboi"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1672351728,"creation_date":1376480411,"answer_id":18230733,"question_id":2534632,"body_markdown":"With Java 7, a faster way to walk through a directory tree was introduced with the `Paths` and `Files` functionality. They&#39;re much faster than the &quot;old&quot; `File` way.\r\n\r\nThis would be the code to walk through and check path names with a regular expression:\r\n\r\n    public final void test() throws IOException, InterruptedException {\r\n        final Path rootDir = Paths.get(&quot;path to your directory where the walk starts&quot;);\r\n\r\n        // Walk thru mainDir directory\r\n        Files.walkFileTree(rootDir, new FileVisitor&lt;Path&gt;() {\r\n            // First (minor) speed up. Compile regular expression pattern only one time.\r\n            private Pattern pattern = Pattern.compile(&quot;^(.*?)&quot;);\r\n\r\n            @Override\r\n            public FileVisitResult preVisitDirectory(Path path,\r\n                    BasicFileAttributes atts) throws IOException {\r\n\r\n                boolean matches = pattern.matcher(path.toString()).matches();\r\n\r\n                // TODO: Put here your business logic when matches equals true/false\r\n\r\n                return (matches)? FileVisitResult.CONTINUE:FileVisitResult.SKIP_SUBTREE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult visitFile(Path path, BasicFileAttributes mainAtts)\r\n                    throws IOException {\r\n\r\n                boolean matches = pattern.matcher(path.toString()).matches();\r\n\r\n                // TODO: Put here your business logic when matches equals true/false\r\n\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult postVisitDirectory(Path path,\r\n                    IOException exc) throws IOException {\r\n                // TODO Auto-generated method stub\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult visitFileFailed(Path path, IOException exc)\r\n                    throws IOException {\r\n                exc.printStackTrace();\r\n\r\n                // If the root directory has failed it makes no sense to continue\r\n                return path.equals(rootDir)? FileVisitResult.TERMINATE:FileVisitResult.CONTINUE;\r\n            }\r\n        });\r\n    }\r\n","title":"List all files from a directory recursively with Java","body":"<p>With Java 7, a faster way to walk through a directory tree was introduced with the <code>Paths</code> and <code>Files</code> functionality. They're much faster than the &quot;old&quot; <code>File</code> way.</p>\n<p>This would be the code to walk through and check path names with a regular expression:</p>\n<pre><code>public final void test() throws IOException, InterruptedException {\n    final Path rootDir = Paths.get(&quot;path to your directory where the walk starts&quot;);\n\n    // Walk thru mainDir directory\n    Files.walkFileTree(rootDir, new FileVisitor&lt;Path&gt;() {\n        // First (minor) speed up. Compile regular expression pattern only one time.\n        private Pattern pattern = Pattern.compile(&quot;^(.*?)&quot;);\n\n        @Override\n        public FileVisitResult preVisitDirectory(Path path,\n                BasicFileAttributes atts) throws IOException {\n\n            boolean matches = pattern.matcher(path.toString()).matches();\n\n            // TODO: Put here your business logic when matches equals true/false\n\n            return (matches)? FileVisitResult.CONTINUE:FileVisitResult.SKIP_SUBTREE;\n        }\n\n        @Override\n        public FileVisitResult visitFile(Path path, BasicFileAttributes mainAtts)\n                throws IOException {\n\n            boolean matches = pattern.matcher(path.toString()).matches();\n\n            // TODO: Put here your business logic when matches equals true/false\n\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        public FileVisitResult postVisitDirectory(Path path,\n                IOException exc) throws IOException {\n            // TODO Auto-generated method stub\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        public FileVisitResult visitFileFailed(Path path, IOException exc)\n                throws IOException {\n            exc.printStackTrace();\n\n            // If the root directory has failed it makes no sense to continue\n            return path.equals(rootDir)? FileVisitResult.TERMINATE:FileVisitResult.CONTINUE;\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":92393,"reputation":9711,"user_id":253231,"accept_rate":84,"display_name":"Dan"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1426451612,"creation_date":1403257450,"answer_id":24324367,"question_id":2534632,"body_markdown":"This is a very simple recursive method to get all files from a given root.\r\n\r\nIt uses the Java 7 NIO Path class.\r\n\r\n    private List&lt;String&gt; getFileNames(List&lt;String&gt; fileNames, Path dir) {\r\n        try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\r\n            for (Path path : stream) {\r\n                if(path.toFile().isDirectory()) {\r\n                    getFileNames(fileNames, path);\r\n                } else {\r\n                    fileNames.add(path.toAbsolutePath().toString());\r\n                    System.out.println(path.getFileName());\r\n                }\r\n            }\r\n        } catch(IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return fileNames;\r\n    } ","title":"List all files from a directory recursively with Java","body":"<p>This is a very simple recursive method to get all files from a given root.</p>\n\n<p>It uses the Java 7 NIO Path class.</p>\n\n<pre><code>private List&lt;String&gt; getFileNames(List&lt;String&gt; fileNames, Path dir) {\n    try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\n        for (Path path : stream) {\n            if(path.toFile().isDirectory()) {\n                getFileNames(fileNames, path);\n            } else {\n                fileNames.add(path.toAbsolutePath().toString());\n                System.out.println(path.getFileName());\n            }\n        }\n    } catch(IOException e) {\n        e.printStackTrace();\n    }\n    return fileNames;\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5806776,"reputation":231,"user_id":4579169,"display_name":"Prathamesh sawant"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1672351618,"creation_date":1424339112,"answer_id":28603067,"question_id":2534632,"body_markdown":"This will work just fine and it’s recursive.\r\n\r\n    File root = new File(&quot;ROOT PATH&quot;);\r\n    for (File file : root.listFiles())\r\n    {\r\n        getFilesRecursive(file);\r\n    }\r\n\r\n\r\n    private static void getFilesRecursive(File pFile)\r\n    {\r\n        for(File files : pFile.listFiles())\r\n        {\r\n            if(files.isDirectory())\r\n            {\r\n                getFilesRecursive(files);\r\n            }\r\n            else\r\n            {\r\n                // Do your thing\r\n                //\r\n                // You can either save in HashMap and\r\n                // use it as per your requirement\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p>This will work just fine and it’s recursive.</p>\n<pre><code>File root = new File(&quot;ROOT PATH&quot;);\nfor (File file : root.listFiles())\n{\n    getFilesRecursive(file);\n}\n\n\nprivate static void getFilesRecursive(File pFile)\n{\n    for(File files : pFile.listFiles())\n    {\n        if(files.isDirectory())\n        {\n            getFilesRecursive(files);\n        }\n        else\n        {\n            // Do your thing\n            //\n            // You can either save in HashMap and\n            // use it as per your requirement\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6234457,"reputation":253,"user_id":4850199,"display_name":"Mam&#39;s"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1455378361,"creation_date":1430388191,"answer_id":29964733,"question_id":2534632,"body_markdown":"This will work fine\r\n\r\n    public void displayAll(File path){\t\t\r\n    \tif(path.isFile()){\r\n    \t\tSystem.out.println(path.getName());\r\n    \t}else{\r\n    \t\tSystem.out.println(path.getName());\t\t\t\r\n    \t\tFile files[] = path.listFiles();\r\n    \t\tfor(File dirOrFile: files){\r\n    \t\t\tdisplayAll(dirOrFile);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n&lt;/code&gt;&lt;/pre&gt;","title":"List all files from a directory recursively with Java","body":"<p>This will work fine</p>\n\n<pre><code>public void displayAll(File path){      \n    if(path.isFile()){\n        System.out.println(path.getName());\n    }else{\n        System.out.println(path.getName());         \n        File files[] = path.listFiles();\n        for(File dirOrFile: files){\n            displayAll(dirOrFile);\n        }\n    }\n}\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":1821511,"reputation":6530,"user_id":1655478,"accept_rate":33,"display_name":"dessalines"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1432144942,"creation_date":1432144942,"answer_id":30357161,"question_id":2534632,"body_markdown":"I personally like this version of FileUtils. Here&#39;s an example that finds all mp3s or flacs in a directory or any of its subdirectories:\r\n\r\n    String[] types = {&quot;mp3&quot;, &quot;flac&quot;};\r\n    Collection&lt;File&gt; files2 = FileUtils.listFiles(/path/to/your/dir, types , true);","title":"List all files from a directory recursively with Java","body":"<p>I personally like this version of FileUtils. Here's an example that finds all mp3s or flacs in a directory or any of its subdirectories:</p>\n\n<pre><code>String[] types = {\"mp3\", \"flac\"};\nCollection&lt;File&gt; files2 = FileUtils.listFiles(/path/to/your/dir, types , true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6643210,"reputation":9,"user_id":5128266,"display_name":"prajakta"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1672351472,"creation_date":1437150620,"answer_id":31480529,"question_id":2534632,"body_markdown":"    import java.io.*;\r\n\r\n    public class MultiFolderReading {\r\n\r\n        public void checkNoOfFiles (String filename) throws IOException {\r\n\r\n            File dir = new File(filename);\r\n            File files[] = dir.listFiles(); // Files array stores the list of files\r\n\r\n            for(int i=0; i&lt;files.length; i++)\r\n            {\r\n                if(files[i].isFile()) // Check whether files[i] is file or directory\r\n                {\r\n                    System.out.println(&quot;File::&quot; + files[i].getName());\r\n                    System.out.println();\r\n\r\n                }\r\n                else if(files[i].isDirectory())\r\n                {\r\n                    System.out.println(&quot;Directory::&quot; + files[i].getName());\r\n                    System.out.println();\r\n                    checkNoOfFiles(files[i].getAbsolutePath());\r\n                }\r\n            }\r\n        }\r\n\r\n        public static void main(String[] args) throws IOException {\r\n\r\n            MultiFolderReading mf = new MultiFolderReading();\r\n            String str = &quot;E:\\\\file&quot;;\r\n            mf.checkNoOfFiles(str);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<pre><code>import java.io.*;\n\npublic class MultiFolderReading {\n\n    public void checkNoOfFiles (String filename) throws IOException {\n\n        File dir = new File(filename);\n        File files[] = dir.listFiles(); // Files array stores the list of files\n\n        for(int i=0; i&lt;files.length; i++)\n        {\n            if(files[i].isFile()) // Check whether files[i] is file or directory\n            {\n                System.out.println(&quot;File::&quot; + files[i].getName());\n                System.out.println();\n\n            }\n            else if(files[i].isDirectory())\n            {\n                System.out.println(&quot;Directory::&quot; + files[i].getName());\n                System.out.println();\n                checkNoOfFiles(files[i].getAbsolutePath());\n            }\n        }\n    }\n\n    public static void main(String[] args) throws IOException {\n\n        MultiFolderReading mf = new MultiFolderReading();\n        String str = &quot;E:\\\\file&quot;;\n        mf.checkNoOfFiles(str);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":83,"is_accepted":false,"score":83,"last_activity_date":1479820552,"creation_date":1446431393,"answer_id":33469854,"question_id":2534632,"body_markdown":"In Java 8, it&#39;s a 1-liner via [`Files.find()`][1] with an arbitrarily large depth (eg `999`) and [`BasicFileAttributes`][2] of [`isRegularFile()`][3]\r\n\r\n    public static printFnames(String sDir) {\r\n        Files.find(Paths.get(sDir), 999, (p, bfa) -&gt; bfa.isRegularFile()).forEach(System.out::println);\r\n    }\r\n\r\nTo add more filtering, enhance the lambda, for example all jpg files modified in the last 24 hours:\r\n\r\n    (p, bfa) -&gt; bfa.isRegularFile()\r\n      &amp;&amp; p.getFileName().toString().matches(&quot;.*\\\\.jpg&quot;)\r\n      &amp;&amp; bfa.lastModifiedTime().toMillis() &gt; System.currentMillis() - 86400000\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#find-java.nio.file.Path-int-java.util.function.BiPredicate-java.nio.file.FileVisitOption...-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html#isRegularFile--","title":"List all files from a directory recursively with Java","body":"<p>In Java 8, it's a 1-liner via <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#find-java.nio.file.Path-int-java.util.function.BiPredicate-java.nio.file.FileVisitOption...-\"><code>Files.find()</code></a> with an arbitrarily large depth (eg <code>999</code>) and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html\"><code>BasicFileAttributes</code></a> of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/attribute/BasicFileAttributes.html#isRegularFile--\"><code>isRegularFile()</code></a></p>\n\n<pre><code>public static printFnames(String sDir) {\n    Files.find(Paths.get(sDir), 999, (p, bfa) -&gt; bfa.isRegularFile()).forEach(System.out::println);\n}\n</code></pre>\n\n<p>To add more filtering, enhance the lambda, for example all jpg files modified in the last 24 hours:</p>\n\n<pre><code>(p, bfa) -&gt; bfa.isRegularFile()\n  &amp;&amp; p.getFileName().toString().matches(\".*\\\\.jpg\")\n  &amp;&amp; bfa.lastModifiedTime().toMillis() &gt; System.currentMillis() - 86400000\n</code></pre>\n"},{"tags":[],"owner":{"account_id":695155,"reputation":26358,"user_id":274677,"accept_rate":81,"display_name":"Marcus Junius Brutus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351376,"creation_date":1457435687,"answer_id":35865849,"question_id":2534632,"body_markdown":"In [Guava][1] you don&#39;t have to wait for a Collection to be returned to you, but can actually iterate over the files. It is easy to imagine a `IDoSomethingWithThisFile` interface in the signature of the below function:\r\n\r\n    public static void collectFilesInDir(File dir) {\r\n        TreeTraverser&lt;File&gt; traverser = Files.fileTreeTraverser();\r\n        FluentIterable&lt;File&gt; filesInPostOrder = traverser.preOrderTraversal(dir);\r\n        for (File f: filesInPostOrder)\r\n            System.out.printf(&quot;File: %s\\n&quot;, f.getPath());\r\n    }\r\n\r\n[TreeTraverser][2] also allows you to between various traversal styles.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Google_Guava\r\n  [2]: http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeTraverser.html\r\n","title":"List all files from a directory recursively with Java","body":"<p>In <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Guava</a> you don't have to wait for a Collection to be returned to you, but can actually iterate over the files. It is easy to imagine a <code>IDoSomethingWithThisFile</code> interface in the signature of the below function:</p>\n<pre><code>public static void collectFilesInDir(File dir) {\n    TreeTraverser&lt;File&gt; traverser = Files.fileTreeTraverser();\n    FluentIterable&lt;File&gt; filesInPostOrder = traverser.preOrderTraversal(dir);\n    for (File f: filesInPostOrder)\n        System.out.printf(&quot;File: %s\\n&quot;, f.getPath());\n}\n</code></pre>\n<p><a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/TreeTraverser.html\" rel=\"nofollow noreferrer\">TreeTraverser</a> also allows you to between various traversal styles.</p>\n"},{"tags":[],"owner":{"account_id":124772,"reputation":10425,"user_id":320087,"accept_rate":90,"display_name":"Niraj Sonawane"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1527562428,"creation_date":1527562428,"answer_id":50575684,"question_id":2534632,"body_markdown":"\r\n**Java 8**\r\n\r\n    public static void main(String[] args) throws IOException {\r\n    \r\n    \t\tPath start = Paths.get(&quot;C:\\\\data\\\\&quot;);\r\n    \t\ttry (Stream&lt;Path&gt; stream = Files.walk(start, Integer.MAX_VALUE)) {\r\n    \t\t    List&lt;String&gt; collect = stream\r\n    \t\t        .map(String::valueOf)\r\n    \t\t        .sorted()\r\n    \t\t        .collect(Collectors.toList());\r\n    \t\t    \r\n    \t\t    collect.forEach(System.out::println);\r\n    \t\t}\r\n    \t\t\r\n    \t\t\r\n    \t}","title":"List all files from a directory recursively with Java","body":"<p><strong>Java 8</strong></p>\n\n<pre><code>public static void main(String[] args) throws IOException {\n\n        Path start = Paths.get(\"C:\\\\data\\\\\");\n        try (Stream&lt;Path&gt; stream = Files.walk(start, Integer.MAX_VALUE)) {\n            List&lt;String&gt; collect = stream\n                .map(String::valueOf)\n                .sorted()\n                .collect(Collectors.toList());\n\n            collect.forEach(System.out::println);\n        }\n\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15759835,"reputation":11,"user_id":11371850,"display_name":"Sri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1555476912,"creation_date":1555476912,"answer_id":55720158,"question_id":2534632,"body_markdown":"\r\n\r\n    public class GetFilesRecursive {\r\n    \tpublic static List &lt;String&gt; getFilesRecursively(File dir){\r\n    \t\tList &lt;String&gt; ls = new ArrayList&lt;String&gt;();\r\n    \t\tfor (File fObj : dir.listFiles()) {\r\n    \t\t\tif(fObj.isDirectory()) {\r\n    \t\t\t\tls.add(String.valueOf(fObj));\r\n    \t\t\t\tls.addAll(getFilesRecursively(fObj));\t\t\t\t\r\n    \t\t\t} else {\r\n    \t\t\t\tls.add(String.valueOf(fObj));\t\t\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn ls;\r\n    \t}\r\n    \tpublic static List &lt;String&gt; getListOfFiles(String fullPathDir) {\r\n    \t\tList &lt;String&gt; ls = new ArrayList&lt;String&gt; ();\r\n    \t\tFile f = new File(fullPathDir);\r\n    \t\tif (f.exists()) {\r\n    \t\t\tif(f.isDirectory()) {\r\n    \t\t\t\tls.add(String.valueOf(f));\r\n    \t\t\t\tls.addAll(getFilesRecursively(f));\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\tls.add(fullPathDir);\r\n    \t\t}\r\n    \t\treturn ls;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tList &lt;String&gt; ls = getListOfFiles(&quot;/Users/srinivasab/Documents&quot;);\r\n    \t\tfor (String file:ls) {\r\n    \t\t\tSystem.out.println(file);\r\n    \t\t}\r\n    \t\tSystem.out.println(ls.size());\r\n    \t}\r\n    }\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<pre><code>public class GetFilesRecursive {\n    public static List &lt;String&gt; getFilesRecursively(File dir){\n        List &lt;String&gt; ls = new ArrayList&lt;String&gt;();\n        for (File fObj : dir.listFiles()) {\n            if(fObj.isDirectory()) {\n                ls.add(String.valueOf(fObj));\n                ls.addAll(getFilesRecursively(fObj));               \n            } else {\n                ls.add(String.valueOf(fObj));       \n            }\n        }\n\n        return ls;\n    }\n    public static List &lt;String&gt; getListOfFiles(String fullPathDir) {\n        List &lt;String&gt; ls = new ArrayList&lt;String&gt; ();\n        File f = new File(fullPathDir);\n        if (f.exists()) {\n            if(f.isDirectory()) {\n                ls.add(String.valueOf(f));\n                ls.addAll(getFilesRecursively(f));\n            }\n        } else {\n            ls.add(fullPathDir);\n        }\n        return ls;\n    }\n\n    public static void main(String[] args) {\n        List &lt;String&gt; ls = getListOfFiles(\"/Users/srinivasab/Documents\");\n        for (String file:ls) {\n            System.out.println(file);\n        }\n        System.out.println(ls.size());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15759835,"reputation":11,"user_id":11371850,"display_name":"Sri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555477837,"creation_date":1555477837,"answer_id":55720314,"question_id":2534632,"body_markdown":"Another optimized code\r\n    \r\n    import java.io.File;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class GetFilesRecursive {\r\n    \tpublic static List &lt;String&gt; getFilesRecursively(File dir){\r\n    \t\tList &lt;String&gt; ls = new ArrayList&lt;String&gt;();\r\n    \t\tif (dir.isDirectory())\r\n    \t\t\tfor (File fObj : dir.listFiles()) {\r\n    \t\t\t\tif(fObj.isDirectory()) {\r\n    \t\t\t\t\tls.add(String.valueOf(fObj));\r\n    \t\t\t\t\tls.addAll(getFilesRecursively(fObj));\t\t\t\t\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tls.add(String.valueOf(fObj));\t\t\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\telse\r\n    \t\t\tls.add(String.valueOf(dir));\r\n    \r\n    \t\treturn ls;\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tList &lt;String&gt; ls = getFilesRecursively(new File(&quot;/Users/srinivasab/Documents&quot;));\r\n    \t\tfor (String file:ls) {\r\n    \t\t\tSystem.out.println(file);\r\n    \t\t}\r\n    \t\tSystem.out.println(ls.size());\r\n    \t}\r\n    }\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p>Another optimized code</p>\n\n<pre><code>import java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class GetFilesRecursive {\n    public static List &lt;String&gt; getFilesRecursively(File dir){\n        List &lt;String&gt; ls = new ArrayList&lt;String&gt;();\n        if (dir.isDirectory())\n            for (File fObj : dir.listFiles()) {\n                if(fObj.isDirectory()) {\n                    ls.add(String.valueOf(fObj));\n                    ls.addAll(getFilesRecursively(fObj));               \n                } else {\n                    ls.add(String.valueOf(fObj));       \n                }\n            }\n        else\n            ls.add(String.valueOf(dir));\n\n        return ls;\n    }\n\n    public static void main(String[] args) {\n        List &lt;String&gt; ls = getFilesRecursively(new File(\"/Users/srinivasab/Documents\"));\n        for (String file:ls) {\n            System.out.println(file);\n        }\n        System.out.println(ls.size());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9755346,"reputation":7480,"user_id":7232295,"accept_rate":86,"display_name":"Uddhav P. Gautam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596501369,"creation_date":1596501369,"answer_id":63238699,"question_id":2534632,"body_markdown":"One more example of listing files and directories using Java 8 `filter`\r\n\r\n    public static void main(String[] args) {\r\n    \r\n    System.out.println(&quot;Files!!&quot;);\r\n            try {\r\n                Files.walk(Paths.get(&quot;.&quot;))\r\n                        .filter(Files::isRegularFile)\r\n                        .filter(c -&gt;\r\n                                c.getFileName().toString().substring(c.getFileName().toString().length()-4).contains(&quot;.jpg&quot;)\r\n                                ||\r\n                                c.getFileName().toString().substring(c.getFileName().toString().length()-5).contains(&quot;.jpeg&quot;)\r\n                        )\r\n                        .forEach(System.out::println);\r\n    \r\n            } catch (IOException e) {\r\n            System.out.println(&quot;No jpeg or jpg files&quot;);\r\n            }\r\n    \r\n            System.out.println(&quot;\\nDirectories!!\\n&quot;);\r\n            try {\r\n                Files.walk(Paths.get(&quot;.&quot;))\r\n                        .filter(Files::isDirectory)\r\n                        .forEach(System.out::println);\r\n    \r\n            } catch (IOException e) {\r\n                System.out.println(&quot;No Jpeg files&quot;);\r\n            }\r\n    }","title":"List all files from a directory recursively with Java","body":"<p>One more example of listing files and directories using Java 8 <code>filter</code></p>\n<pre><code>public static void main(String[] args) {\n\nSystem.out.println(&quot;Files!!&quot;);\n        try {\n            Files.walk(Paths.get(&quot;.&quot;))\n                    .filter(Files::isRegularFile)\n                    .filter(c -&gt;\n                            c.getFileName().toString().substring(c.getFileName().toString().length()-4).contains(&quot;.jpg&quot;)\n                            ||\n                            c.getFileName().toString().substring(c.getFileName().toString().length()-5).contains(&quot;.jpeg&quot;)\n                    )\n                    .forEach(System.out::println);\n\n        } catch (IOException e) {\n        System.out.println(&quot;No jpeg or jpg files&quot;);\n        }\n\n        System.out.println(&quot;\\nDirectories!!\\n&quot;);\n        try {\n            Files.walk(Paths.get(&quot;.&quot;))\n                    .filter(Files::isDirectory)\n                    .forEach(System.out::println);\n\n        } catch (IOException e) {\n            System.out.println(&quot;No Jpeg files&quot;);\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21225839,"reputation":1,"user_id":15611539,"display_name":"motilyfor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351179,"creation_date":1645548649,"answer_id":71225187,"question_id":2534632,"body_markdown":"[Test folder][1]\r\n\r\nI tested some method with 60,000 files in 284 folders on Windows 11:\r\n\r\n```java\r\npublic class App {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n\r\n        Path path = Paths.get(&quot;E:\\\\书籍&quot;);\r\n\r\n        // 1.walkFileTree\r\n        long start1 = System.currentTimeMillis();\r\n        Files.walkFileTree(path, new SimpleFileVisitor&lt;Path&gt;() {\r\n\r\n            @Override\r\n            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\r\n                // if(pathMatcher.matches(file))\r\n                // files.add(file.toFile());\r\n\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) {\r\n                // System.out.println(dir.getFileName());\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult visitFileFailed(Path file, IOException e) {\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n        });\r\n        long end1 = System.currentTimeMillis();\r\n\r\n        // 2. newDirectoryStream\r\n        long start2 = System.currentTimeMillis();\r\n        search(path.toFile());\r\n        long end2 = System.currentTimeMillis();\r\n\r\n        // 3. listFiles\r\n        long start3 = System.currentTimeMillis();\r\n        getFileNames(path);\r\n        long end3 = System.currentTimeMillis();\r\n\r\n        System.out.println(&quot;\\r执行耗时:&quot; + (end1 - start1));\r\n        System.out.println(&quot;\\r执行耗时:&quot; + (end2 - start2));\r\n        System.out.println(&quot;\\r执行耗时:&quot; + (end3 - start3));\r\n    }\r\n\r\n\r\n    private static void getFileNames(Path dir) {\r\n        try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\r\n            for (Path path : stream) {\r\n                if(Files.isDirectory(path)) {\r\n                    getFileNames(path);\r\n                }\r\n            }\r\n        } catch(IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public static void search(File file) {\r\n        Queue&lt;File&gt; q = new LinkedList&lt;&gt;();\r\n        q.offer(file);\r\n        while (!q.isEmpty()) {\r\n            try {\r\n                for (File childfile : q.poll().listFiles()) {\r\n                    // System.out.println(childfile.getName());\r\n                    if (childfile.isDirectory()) {\r\n                        q.offer(childfile);\r\n                    }\r\n                }\r\n            } catch (Exception e) {\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### Result (milliseconds)：\r\n\r\n| walkFileTree | listFiles|newDirectoryStream|\r\n|:--------:|:--------:|:--------:|\r\n| 68|451|493\r\n| 64|464|482\r\n| 61|478|457\r\n| 67|477|488\r\n| 59|474|466\r\n\r\nKnown performance issues：\r\n\r\n1. From [Kevin Day&#39;s answer][2]:\r\n\r\n    &gt; If you profile your algorithm above, you&#39;ll find that the bulk of the time is spent in the pesky isDirectory() call - that&#39;s because you are incurring a round trip for every single call to isDirectory().\r\n\r\n2. listfiles() will create new File Object for every entry\r\n\r\n  [1]: https://i.stack.imgur.com/xGnB4.png\r\n  [2]: https://stackoverflow.com/questions/2534632/list-all-files-from-a-directory-recursively-with-java/2535558#2535558\r\n\r\n\r\n\r\n","title":"List all files from a directory recursively with Java","body":"<p><a href=\"https://i.stack.imgur.com/xGnB4.png\" rel=\"nofollow noreferrer\">Test folder</a></p>\n<p>I tested some method with 60,000 files in 284 folders on Windows 11:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class App {\n\n    public static void main(String[] args) throws Exception {\n\n        Path path = Paths.get(&quot;E:\\\\书籍&quot;);\n\n        // 1.walkFileTree\n        long start1 = System.currentTimeMillis();\n        Files.walkFileTree(path, new SimpleFileVisitor&lt;Path&gt;() {\n\n            @Override\n            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) {\n                // if(pathMatcher.matches(file))\n                // files.add(file.toFile());\n\n                return FileVisitResult.CONTINUE;\n            }\n\n            @Override\n            public FileVisitResult preVisitDirectory(Path dir, BasicFileAttributes attrs) {\n                // System.out.println(dir.getFileName());\n                return FileVisitResult.CONTINUE;\n            }\n\n            @Override\n            public FileVisitResult visitFileFailed(Path file, IOException e) {\n                return FileVisitResult.CONTINUE;\n            }\n\n        });\n        long end1 = System.currentTimeMillis();\n\n        // 2. newDirectoryStream\n        long start2 = System.currentTimeMillis();\n        search(path.toFile());\n        long end2 = System.currentTimeMillis();\n\n        // 3. listFiles\n        long start3 = System.currentTimeMillis();\n        getFileNames(path);\n        long end3 = System.currentTimeMillis();\n\n        System.out.println(&quot;\\r执行耗时:&quot; + (end1 - start1));\n        System.out.println(&quot;\\r执行耗时:&quot; + (end2 - start2));\n        System.out.println(&quot;\\r执行耗时:&quot; + (end3 - start3));\n    }\n\n\n    private static void getFileNames(Path dir) {\n        try(DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\n            for (Path path : stream) {\n                if(Files.isDirectory(path)) {\n                    getFileNames(path);\n                }\n            }\n        } catch(IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void search(File file) {\n        Queue&lt;File&gt; q = new LinkedList&lt;&gt;();\n        q.offer(file);\n        while (!q.isEmpty()) {\n            try {\n                for (File childfile : q.poll().listFiles()) {\n                    // System.out.println(childfile.getName());\n                    if (childfile.isDirectory()) {\n                        q.offer(childfile);\n                    }\n                }\n            } catch (Exception e) {\n\n            }\n        }\n    }\n}\n</code></pre>\n<h3>Result (milliseconds)：</h3>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">walkFileTree</th>\n<th style=\"text-align: center;\">listFiles</th>\n<th style=\"text-align: center;\">newDirectoryStream</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">68</td>\n<td style=\"text-align: center;\">451</td>\n<td style=\"text-align: center;\">493</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">64</td>\n<td style=\"text-align: center;\">464</td>\n<td style=\"text-align: center;\">482</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">61</td>\n<td style=\"text-align: center;\">478</td>\n<td style=\"text-align: center;\">457</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">67</td>\n<td style=\"text-align: center;\">477</td>\n<td style=\"text-align: center;\">488</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">59</td>\n<td style=\"text-align: center;\">474</td>\n<td style=\"text-align: center;\">466</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Known performance issues：</p>\n<ol>\n<li><p>From <a href=\"https://stackoverflow.com/questions/2534632/list-all-files-from-a-directory-recursively-with-java/2535558#2535558\">Kevin Day's answer</a>:</p>\n<blockquote>\n<p>If you profile your algorithm above, you'll find that the bulk of the time is spent in the pesky isDirectory() call - that's because you are incurring a round trip for every single call to isDirectory().</p>\n</blockquote>\n</li>\n<li><p>listfiles() will create new File Object for every entry</p>\n</li>\n</ol>\n"}],"owner":{"account_id":102334,"reputation":3710,"user_id":274752,"accept_rate":67,"display_name":"Hultner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":206812,"favorite_count":0,"down_vote_count":1,"up_vote_count":99,"accepted_answer_id":2534643,"answer_count":20,"score":98,"last_activity_date":1672351916,"creation_date":1269811592,"question_id":2534632,"body_markdown":"I have this function that prints the name of all the files in a directory recursively. The problem is that my code is very slow because it has to access a remote network device with every iteration.\r\n\r\nMy plan is to first load all the files from the directory recursively and then after that go through all files with the regex to filter out all the files I don&#39;t want. Is there a better solution?\r\n\r\n```java\r\npublic static printFnames(String sDir) {\r\n    File[] faFiles = new File(sDir).listFiles();\r\n    for (File file : faFiles) {\r\n        if (file.getName().matches(&quot;^(.*?)&quot;)) {\r\n            System.out.println(file.getAbsolutePath());\r\n        }\r\n     &#160;  if (file.isDirectory()) {\r\n            printFnames(file.getAbsolutePath());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is just a test. Later on I&#39;m not going to use the code like this; instead I&#39;m going to add the path and modification date of every file which matches an advanced regex to an array.\r\n","title":"List all files from a directory recursively with Java","body":"<p>I have this function that prints the name of all the files in a directory recursively. The problem is that my code is very slow because it has to access a remote network device with every iteration.</p>\n<p>My plan is to first load all the files from the directory recursively and then after that go through all files with the regex to filter out all the files I don't want. Is there a better solution?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static printFnames(String sDir) {\n    File[] faFiles = new File(sDir).listFiles();\n    for (File file : faFiles) {\n        if (file.getName().matches(&quot;^(.*?)&quot;)) {\n            System.out.println(file.getAbsolutePath());\n        }\n        if (file.isDirectory()) {\n            printFnames(file.getAbsolutePath());\n        }\n    }\n}\n</code></pre>\n<p>This is just a test. Later on I'm not going to use the code like this; instead I'm going to add the path and modification date of every file which matches an advanced regex to an array.</p>\n"},{"tags":["java","sql","hibernate","many-to-many","referential-integrity"],"owner":{"account_id":13602783,"reputation":11,"user_id":9812953,"display_name":"elliot_mmm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672351889,"creation_date":1672351889,"question_id":74956485,"body_markdown":"I have the following model stored in a data base. Upon deletion of a room i receive a Referencial Integrity Constraint Violation, which I can&#39;t figure out. \r\n\r\nAn important rule for the model is: a person MUST have access to a room. If they lose all access (e.g. all rooms they have access to are deleted), they are removed from the database. \r\n\r\n[![ER-Diagram](https://i.stack.imgur.com/11HhJ.png)](https://i.stack.imgur.com/11HhJ.png)\r\n\r\nThe ManyToMany Mapping in Question exists between Person and Room and exists in the form of the table &quot;access&quot;. Ill be sharing some code for:\r\n\r\n- Person.java\r\n\r\n- Room.java\r\n\r\n- an excerpt from DAO.java (data access object)\r\n\r\n- DeleteRoom.java (main)\r\n\r\nIn order to uphold consistency in my data base i have come up with the following logic which i have tried to implement in DAO.deleteRoomWithConsistency(RoomId roomId), which I shared below:\r\n\r\nWhen a room is deleted i run a loop over all persons who have access to that room:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/RzQZM.png)](https://i.stack.imgur.com/RzQZM.png)\r\n\r\n\r\nNow the code:\r\n\r\nPerson.java:\r\n\r\n```\r\n@Entity(name = &quot;Person&quot;)\r\n@Table(name = &quot;Person&quot;)\r\npublic class Person {\r\n\r\n\tpublic Person(int persNumber, String name, LocalDate dob) {\r\n\t\tsuper();\r\n\t\tthis.persNumber = persNumber;\r\n\t\tthis.name = name;\r\n\t\tthis.dob = dob;\r\n\t}\r\n\r\n\t@Id\r\n\t@Column(name = &quot;persNumber&quot;)\r\n\tprivate int persNumber;\r\n\r\n\t@Column(name = &quot;name&quot;)\r\n\tprivate String name;\r\n\r\n\t@Column(name = &quot;dob&quot;)\r\n\tprivate LocalDate dob;\r\n\t\r\n\t@ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH}, fetch=FetchType.LAZY)\r\n\t@JoinColumn(name=&quot;orgUnit&quot;)\r\n\tprivate OrgUnit orgUnit;\r\n\r\n\tpublic void setOrgUnit(OrgUnit orgUnit) {\r\n\t\tthis.orgUnit = orgUnit;\r\n\t}\r\n\r\n\t// List of Rooms a Person has Access to\r\n\t// Owning Side of Bidirectional Relationship with Room\r\n\t@ManyToMany(fetch = FetchType.LAZY,\r\n\t        cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH}\r\n\t        )\r\n\t@JoinTable(name = &quot;access&quot;, joinColumns = @JoinColumn(name = &quot;person_id&quot;), \r\n\t\t\t  inverseJoinColumns = {@JoinColumn(name = &quot;building&quot;, referencedColumnName = &quot;building&quot;),\r\n\t\t\t  \t\t\t\t\t   @JoinColumn(name = &quot;number&quot;, referencedColumnName = &quot;number&quot;)})\r\n\tprivate Set&lt;Room&gt; roomAccess = new HashSet&lt;&gt;();\r\n```\r\n\r\nRoom.java:\r\n\r\n```\r\n@Entity(name = &quot;Room&quot;)\r\n@Table(name = &quot;Room&quot;)\r\npublic class Room {\r\n\t\r\n\t@EmbeddedId\r\n\tprivate RoomId roomId;\r\n\r\n\t@Column(name = &quot;area&quot;)\r\n\tprivate int area;\r\n\r\n\t@Column(name = &quot;usetype&quot;)\r\n\t@Enumerated(EnumType.STRING) //Adds the String Value of the Enum, instead of the ordinal value\r\n\tprivate UseType usetype;\r\n\r\n\t//List of Persons with Access to a Room\r\n\t//Inverse Side of Bidirectional Relationship with Person\r\n\t@ManyToMany(mappedBy = &quot;roomAccess&quot;, cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH})\r\n\tprivate Set&lt;Person&gt; personsWithAccess = new HashSet&lt;&gt;();\r\n```\r\n\r\nDeleteRoom.java\r\n\r\n```\r\npublic class DeleteRoom {\r\n\r\n\tpublic static void main(String[] args) throws SQLException {\r\n\r\n\t\t//Connection to the database \r\n\t\tDAO dao = new DAO();\r\n\t\tdao.connect(&quot;./db/hw01&quot;, &quot;bitub&quot;, &quot;&quot;);\r\n\r\n\t\t//Inputs\r\n\t\tBuilding b1 = DAO.getInstance().readBuildingByName(\r\n\t\t\t\t&quot;Beispielhaus&quot;\t//Enter the Building of the Room\r\n\t\t\t\t);\r\n\t\tInteger roomNumber = 102; //Enter Room Number\r\n\t\t\r\n\t\tRoomId toBeDeletedRoomId = new RoomId(b1, roomNumber);\r\n\t\t\r\n\t\t//Room r = DAO.getInstance().readRoom(toBeDeletedRoomId);\r\n\t\t//System.out.println(r);\r\n\r\n\t\tDAO.getInstance().deleteRoomWithConsistency(toBeDeletedRoomId);\r\n\t\t\r\n\t\tdao.closeConnection();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nexcerpt from DAO.java\r\n\r\n```\r\npublic class DAO {\r\n\r\n\tprivate static Connection conn;\r\n\t\r\n\tpublic void connect(String url, String username, String password) throws SQLException {\r\n\r\n\t\tString connectionURL = &quot;jdbc:h2:&quot; + url;\r\n\r\n\t\ttry {\r\n\t\t\tconn = DriverManager.getConnection(connectionURL, username, password);\r\n\r\n\t\t} catch (SQLException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\tSystem.out.println(&quot;connecting to &quot; +connectionURL);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Close\r\n\t * \r\n\t */\r\n\tpublic void closeConnection() throws SQLException {\r\n\t\tconn.close();\r\n\t}\r\n\r\n/**\r\n* deletes a room by their primary key with consistency\r\n*/\r\n\tpublic void deleteRoomWithConsistency(RoomId roomId) throws SQLException {\r\n\r\n\t\tSession session = null;\r\n\t\tTransaction transaction = null;\r\n\t\t\r\n\t\ttry {\r\n\t\t\t// open the session\r\n\t\t\tsession = HibernateUtil.getSessionFactory().openSession();\r\n\t\t\t// begin the transaction\r\n\t\t\ttransaction = session.beginTransaction();\r\n\t\t\t\r\n\t\t\t//retrieving room from the database\r\n\t\t\tRoom deletedRoom = (Room) session.find(Room.class, roomId);\r\n\t\t\t\r\n\t\t\t//Set of people who have access to the room with roomId\r\n\t\t\tSet&lt;Person&gt; peopleWithAccess = this.readPersonsWithAccessForRoom(roomId);\r\n\t\t\t//keeping consistency\r\n\t\t\t//for all persons with access to the deleted room\r\n\t\t\tfor (Person pWithAccess : peopleWithAccess) {\r\n\t\t\t\t\r\n\t\t\t\t//Set of rooms a pWithAccess has access to\r\n\t\t\t\tSet&lt;Room&gt; roomsWithAccess = this.readRoomsWithAccessForPerson(pWithAccess);\r\n\t\t\t\t//if \r\n\t\t\t\t//this person only has access to one room (the deleted room), the person is deleted\r\n\t\t\t\tif (roomsWithAccess.size()==1) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Set of People who are in the same org unit as pWithAccess\r\n\t\t\t\t\tSet&lt;Person&gt; orgUnitMembers = this.readOrgUnitMembers(pWithAccess.getOrgUnit().getName());\r\n\t\t\t\t\t//if \r\n\t\t\t\t\t//this person is the only person in the org unit, the org unit is deleted, by orphan removal the person is also deleted\r\n\t\t\t\t\tif(orgUnitMembers.size()==1) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//remove org unit -&gt; remove lonely member (has access to only one room and is the only member of his org unit)\r\n\t\t\t\t\t\tsession.delete(pWithAccess.getOrgUnit().getName());\r\n\t\t\t\t\t//there are other people in the orgunit, he/she might be the head of the unit\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//Boolean if pWithAccess is the head of the unit\r\n\t\t\t\t\t\tBoolean isHeadOfUnit = this.checkIfHeadOfUnit(pWithAccess);\r\n\t\t\t\t\t\t//if\r\n\t\t\t\t\t\t//he/she is head of the unit, a new head of the unit must be appointed\r\n\t\t\t\t\t\tif(isHeadOfUnit==true) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tIterator&lt;Person&gt; it = orgUnitMembers.iterator();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//appoint the first person, who isn&#39;t the old head of unit, the new head of unit\r\n\t\t\t\t\t\t\twhile (it.hasNext()) {\r\n\t\t\t\t\t\t\t\tif (it.next() != pWithAccess) {\r\n\t\t\t\t\t\t\t\t\tpWithAccess.getOrgUnit().setHeadOfUnit(it.next());\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} \t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//remove person (has access to only one room, but is not the only one in his org unit)\r\n\t\t\t\t\t\tsession.delete(pWithAccess);\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t//this person has access to multiple rooms, the room is deleted from the rooms this person has access to\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsession.createSQLQuery(&quot;&quot;\r\n\t\t\t\t\t\t\t+ &quot;DELETE FROM access  &quot;\r\n\t\t\t\t\t\t\t+ &quot;WHERE person_id = &#39;&quot; + pWithAccess.getPersNumber() +&quot;&#39;&quot;\r\n\t\t\t\t\t\t\t+ &quot;AND building=&#39;&quot; + roomId.getBuildingName()+ &quot;&#39; &quot;\r\n\t\t\t\t\t\t\t+ &quot;AND number =&#39;&quot; + roomId.getNumber()+ &quot;&#39; &quot;);\r\n\t\t\t\t\t//roomsWithAccess.remove(deletedRoom);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//removing the room\r\n\t\t\tsession.delete(deletedRoom);\r\n\t\t\t\r\n\t\t\t// commit the transaction\r\n\t\t\ttransaction.commit();\r\n\r\n\t\t} catch (final HibernateException e) {\r\n\t\t\trollbackTransactionIfPossible(transaction);\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (final Exception e) {\r\n\t\t\trollbackTransactionIfPossible(transaction);\r\n\t\t\te.printStackTrace();\r\n\t\t} finally {\r\n\t\t\t// close the session\r\n\t\t\tif ((session != null) &amp;&amp; session.isOpen()) {\r\n\t\t\t\tsession.close();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAnd finally, when I run my main method to delete a room I get the following output:\r\n\r\n```\r\nHibernate: select room0_.building as building4_5_0_, room0_.number as number1_5_0_, room0_.area as area2_5_0_, room0_.usetype as usetype3_5_0_ from Room room0_ where room0_.building=? and room0_.number=?\r\nHibernate: delete from Room where building=? and number=?\r\n...\r\nReferential integrity constraint violation: &quot;FK3SHH9TEIQLTR6V1EAPFWO13WM: PUBLIC.ACCESS FOREIGN KEY(BUILDING, NUMBER) REFERENCES PUBLIC.ROOM(BUILDING, NUMBER) (&#39;Beispielhaus&#39;, 102)&quot;; SQL statement:\r\ndelete from Room where building=? and number=? [23503-214]\r\nDez. 29, 2022 10:04:38 NACHM. org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release\r\nINFO: HHH000010: On release of batch it still contained JDBC statements\r\n...\r\n```\r\n\r\nI hope I could provide enough information for someone to help me out. Any insight would be greatly appreciated.  \r\n\r\nI have tried tinkering with the mapping, adding or removing the CascadeType.REMOVE. But in my research I learned that CascadeType.REMOVE or ALL shouldn&#39;t be used for &quot;...ToMany&quot; associations. \r\n\r\nI have also tried debugging, but I didn&#39;t learn anything from that. The transaction builds up and when it is commited, the error happens. \r\n\r\nAny help with this error is greatly appreciated. ","title":"Hibernate &quot;Referencial Integrity Constraint Violation&quot; for ManyToMany Bidirectional Mapping","body":"<p>I have the following model stored in a data base. Upon deletion of a room i receive a Referencial Integrity Constraint Violation, which I can't figure out.</p>\n<p>An important rule for the model is: a person MUST have access to a room. If they lose all access (e.g. all rooms they have access to are deleted), they are removed from the database.</p>\n<p><a href=\"https://i.stack.imgur.com/11HhJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/11HhJ.png\" alt=\"ER-Diagram\" /></a></p>\n<p>The ManyToMany Mapping in Question exists between Person and Room and exists in the form of the table &quot;access&quot;. Ill be sharing some code for:</p>\n<ul>\n<li><p>Person.java</p>\n</li>\n<li><p>Room.java</p>\n</li>\n<li><p>an excerpt from DAO.java (data access object)</p>\n</li>\n<li><p>DeleteRoom.java (main)</p>\n</li>\n</ul>\n<p>In order to uphold consistency in my data base i have come up with the following logic which i have tried to implement in DAO.deleteRoomWithConsistency(RoomId roomId), which I shared below:</p>\n<p>When a room is deleted i run a loop over all persons who have access to that room:</p>\n<p><a href=\"https://i.stack.imgur.com/RzQZM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RzQZM.png\" alt=\"enter image description here\" /></a></p>\n<p>Now the code:</p>\n<p>Person.java:</p>\n<pre><code>@Entity(name = &quot;Person&quot;)\n@Table(name = &quot;Person&quot;)\npublic class Person {\n\n    public Person(int persNumber, String name, LocalDate dob) {\n        super();\n        this.persNumber = persNumber;\n        this.name = name;\n        this.dob = dob;\n    }\n\n    @Id\n    @Column(name = &quot;persNumber&quot;)\n    private int persNumber;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;dob&quot;)\n    private LocalDate dob;\n    \n    @ManyToOne(cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH}, fetch=FetchType.LAZY)\n    @JoinColumn(name=&quot;orgUnit&quot;)\n    private OrgUnit orgUnit;\n\n    public void setOrgUnit(OrgUnit orgUnit) {\n        this.orgUnit = orgUnit;\n    }\n\n    // List of Rooms a Person has Access to\n    // Owning Side of Bidirectional Relationship with Room\n    @ManyToMany(fetch = FetchType.LAZY,\n            cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH}\n            )\n    @JoinTable(name = &quot;access&quot;, joinColumns = @JoinColumn(name = &quot;person_id&quot;), \n              inverseJoinColumns = {@JoinColumn(name = &quot;building&quot;, referencedColumnName = &quot;building&quot;),\n                                   @JoinColumn(name = &quot;number&quot;, referencedColumnName = &quot;number&quot;)})\n    private Set&lt;Room&gt; roomAccess = new HashSet&lt;&gt;();\n</code></pre>\n<p>Room.java:</p>\n<pre><code>@Entity(name = &quot;Room&quot;)\n@Table(name = &quot;Room&quot;)\npublic class Room {\n    \n    @EmbeddedId\n    private RoomId roomId;\n\n    @Column(name = &quot;area&quot;)\n    private int area;\n\n    @Column(name = &quot;usetype&quot;)\n    @Enumerated(EnumType.STRING) //Adds the String Value of the Enum, instead of the ordinal value\n    private UseType usetype;\n\n    //List of Persons with Access to a Room\n    //Inverse Side of Bidirectional Relationship with Person\n    @ManyToMany(mappedBy = &quot;roomAccess&quot;, cascade = {CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH})\n    private Set&lt;Person&gt; personsWithAccess = new HashSet&lt;&gt;();\n</code></pre>\n<p>DeleteRoom.java</p>\n<pre><code>public class DeleteRoom {\n\n    public static void main(String[] args) throws SQLException {\n\n        //Connection to the database \n        DAO dao = new DAO();\n        dao.connect(&quot;./db/hw01&quot;, &quot;bitub&quot;, &quot;&quot;);\n\n        //Inputs\n        Building b1 = DAO.getInstance().readBuildingByName(\n                &quot;Beispielhaus&quot;  //Enter the Building of the Room\n                );\n        Integer roomNumber = 102; //Enter Room Number\n        \n        RoomId toBeDeletedRoomId = new RoomId(b1, roomNumber);\n        \n        //Room r = DAO.getInstance().readRoom(toBeDeletedRoomId);\n        //System.out.println(r);\n\n        DAO.getInstance().deleteRoomWithConsistency(toBeDeletedRoomId);\n        \n        dao.closeConnection();\n    }\n\n}\n</code></pre>\n<p>excerpt from DAO.java</p>\n<pre><code>public class DAO {\n\n    private static Connection conn;\n    \n    public void connect(String url, String username, String password) throws SQLException {\n\n        String connectionURL = &quot;jdbc:h2:&quot; + url;\n\n        try {\n            conn = DriverManager.getConnection(connectionURL, username, password);\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n\n        System.out.println(&quot;connecting to &quot; +connectionURL);\n\n    }\n\n    /**\n     * Close\n     * \n     */\n    public void closeConnection() throws SQLException {\n        conn.close();\n    }\n\n/**\n* deletes a room by their primary key with consistency\n*/\n    public void deleteRoomWithConsistency(RoomId roomId) throws SQLException {\n\n        Session session = null;\n        Transaction transaction = null;\n        \n        try {\n            // open the session\n            session = HibernateUtil.getSessionFactory().openSession();\n            // begin the transaction\n            transaction = session.beginTransaction();\n            \n            //retrieving room from the database\n            Room deletedRoom = (Room) session.find(Room.class, roomId);\n            \n            //Set of people who have access to the room with roomId\n            Set&lt;Person&gt; peopleWithAccess = this.readPersonsWithAccessForRoom(roomId);\n            //keeping consistency\n            //for all persons with access to the deleted room\n            for (Person pWithAccess : peopleWithAccess) {\n                \n                //Set of rooms a pWithAccess has access to\n                Set&lt;Room&gt; roomsWithAccess = this.readRoomsWithAccessForPerson(pWithAccess);\n                //if \n                //this person only has access to one room (the deleted room), the person is deleted\n                if (roomsWithAccess.size()==1) {\n                    \n                    //Set of People who are in the same org unit as pWithAccess\n                    Set&lt;Person&gt; orgUnitMembers = this.readOrgUnitMembers(pWithAccess.getOrgUnit().getName());\n                    //if \n                    //this person is the only person in the org unit, the org unit is deleted, by orphan removal the person is also deleted\n                    if(orgUnitMembers.size()==1) {\n                        \n                        //remove org unit -&gt; remove lonely member (has access to only one room and is the only member of his org unit)\n                        session.delete(pWithAccess.getOrgUnit().getName());\n                    //there are other people in the orgunit, he/she might be the head of the unit\n                    }else{\n                        \n                        //Boolean if pWithAccess is the head of the unit\n                        Boolean isHeadOfUnit = this.checkIfHeadOfUnit(pWithAccess);\n                        //if\n                        //he/she is head of the unit, a new head of the unit must be appointed\n                        if(isHeadOfUnit==true) {\n                            \n                            Iterator&lt;Person&gt; it = orgUnitMembers.iterator();\n                        \n                            //appoint the first person, who isn't the old head of unit, the new head of unit\n                            while (it.hasNext()) {\n                                if (it.next() != pWithAccess) {\n                                    pWithAccess.getOrgUnit().setHeadOfUnit(it.next());\n                                    break;\n                                }\n                            }\n                        }   \n                        \n                        //remove person (has access to only one room, but is not the only one in his org unit)\n                        session.delete(pWithAccess);\n                    }               \n                //this person has access to multiple rooms, the room is deleted from the rooms this person has access to\n                } else {\n                    session.createSQLQuery(&quot;&quot;\n                            + &quot;DELETE FROM access  &quot;\n                            + &quot;WHERE person_id = '&quot; + pWithAccess.getPersNumber() +&quot;'&quot;\n                            + &quot;AND building='&quot; + roomId.getBuildingName()+ &quot;' &quot;\n                            + &quot;AND number ='&quot; + roomId.getNumber()+ &quot;' &quot;);\n                    //roomsWithAccess.remove(deletedRoom);\n                }\n            }\n            \n            //removing the room\n            session.delete(deletedRoom);\n            \n            // commit the transaction\n            transaction.commit();\n\n        } catch (final HibernateException e) {\n            rollbackTransactionIfPossible(transaction);\n            e.printStackTrace();\n        } catch (final Exception e) {\n            rollbackTransactionIfPossible(transaction);\n            e.printStackTrace();\n        } finally {\n            // close the session\n            if ((session != null) &amp;&amp; session.isOpen()) {\n                session.close();\n            }\n        }\n    }\n\n}\n</code></pre>\n<p>And finally, when I run my main method to delete a room I get the following output:</p>\n<pre><code>Hibernate: select room0_.building as building4_5_0_, room0_.number as number1_5_0_, room0_.area as area2_5_0_, room0_.usetype as usetype3_5_0_ from Room room0_ where room0_.building=? and room0_.number=?\nHibernate: delete from Room where building=? and number=?\n...\nReferential integrity constraint violation: &quot;FK3SHH9TEIQLTR6V1EAPFWO13WM: PUBLIC.ACCESS FOREIGN KEY(BUILDING, NUMBER) REFERENCES PUBLIC.ROOM(BUILDING, NUMBER) ('Beispielhaus', 102)&quot;; SQL statement:\ndelete from Room where building=? and number=? [23503-214]\nDez. 29, 2022 10:04:38 NACHM. org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl release\nINFO: HHH000010: On release of batch it still contained JDBC statements\n...\n</code></pre>\n<p>I hope I could provide enough information for someone to help me out. Any insight would be greatly appreciated.</p>\n<p>I have tried tinkering with the mapping, adding or removing the CascadeType.REMOVE. But in my research I learned that CascadeType.REMOVE or ALL shouldn't be used for &quot;...ToMany&quot; associations.</p>\n<p>I have also tried debugging, but I didn't learn anything from that. The transaction builds up and when it is commited, the error happens.</p>\n<p>Any help with this error is greatly appreciated.</p>\n"},{"tags":["java","gradle","jsonschema2pojo"],"answers":[{"tags":[],"owner":{"account_id":235978,"reputation":1545,"user_id":503157,"accept_rate":80,"display_name":"Eir Nym"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351878,"creation_date":1672350738,"answer_id":74956360,"question_id":74824998,"body_markdown":"I&#39;m the author of the gradle plugin.\r\n\r\nShort answer for your question is &quot;no, it&#39;s not an intended flow for a normal project&quot;. However, it&#39;s always possible to create a new project, build it once and extract the sources.\r\n\r\nCould you please explain, what the reason you want to exclude run from the `build` chain?\r\n\r\nMy only guess is to build and publish models. And if this is a case, it&#39;s possible to do this using some gradle magic, which described in discussions in the [GitHub project][1] \r\n\r\n**UPD:** Based on your gradle script, I have a lot of &quot;why&quot; questions I&#39;d like to ask, it&#39;ll be easier if you \r\n\r\n\r\n  [1]: https://github.com/jsonschema2dataclass/js2d-gradle/discussions/451","title":"JsonSchema2Pojo and manual task in gradle","body":"<p>I'm the author of the gradle plugin.</p>\n<p>Short answer for your question is &quot;no, it's not an intended flow for a normal project&quot;. However, it's always possible to create a new project, build it once and extract the sources.</p>\n<p>Could you please explain, what the reason you want to exclude run from the <code>build</code> chain?</p>\n<p>My only guess is to build and publish models. And if this is a case, it's possible to do this using some gradle magic, which described in discussions in the <a href=\"https://github.com/jsonschema2dataclass/js2d-gradle/discussions/451\" rel=\"nofollow noreferrer\">GitHub project</a></p>\n<p><strong>UPD:</strong> Based on your gradle script, I have a lot of &quot;why&quot; questions I'd like to ask, it'll be easier if you</p>\n"}],"owner":{"account_id":467449,"reputation":968,"user_id":872846,"accept_rate":78,"display_name":"PastorPL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":539,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672351878,"creation_date":1671196727,"question_id":74824998,"body_markdown":"**What I would like to achieve**\r\n\r\nI would like to have a manual gradle task that I can generate Java classes based on Json schema. However, I don&#39;t want this task to run when I run other fx. *gradle build*.\r\n\r\n**What I did**\r\n\r\nFirstly I&#39;ve create simple gradle java project with \r\n\r\n    gradle init\r\n\r\nThen I  have added *jsonschema2dataclass* plugin and configure it as follows (my current build.gradle):\r\n\r\n    /*\r\n     * This file was generated by the Gradle &#39;init&#39; task.\r\n     * (...) \r\n     */\r\n    \r\n    plugins {\r\n        // Apply the application plugin to add support for building a CLI application in Java.\r\n        id &#39;application&#39;\r\n    \r\n        id &quot;org.jsonschema2dataclass&quot; version &quot;4.5.0&quot;\r\n    }\r\n    \r\n    repositories {\r\n        // Use Maven Central for resolving dependencies.\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        // Use JUnit Jupiter API for testing.\r\n        testImplementation &#39;org.junit.jupiter:junit-jupiter-api:5.6.2&#39;\r\n    \r\n        // Use JUnit Jupiter Engine for testing.\r\n        testRuntimeOnly &#39;org.junit.jupiter:junit-jupiter-engine&#39;\r\n    \r\n        // This dependency is used by the application.\r\n        implementation &#39;com.google.guava:guava:29.0-jre&#39;\r\n    }\r\n    \r\n    application {\r\n        // Define the main class for the application.\r\n        mainClass = &#39;GradlePlayground.App&#39;\r\n    }\r\n    \r\n    jsonSchema2Pojo {\r\n                includeGeneratedAnnotation = true\r\n                generateBuilders = true\r\n                targetPackage = &#39;org.example.api&#39; // specify package for your needs\r\n                targetDirectoryPrefix = file(&quot;${project.rootDir}/app/src/main/java&quot;)\r\n    \r\n                source.setFrom files(&quot;${project.rootDir}/app/src/main/resources/json&quot;)\r\n    }\r\n\r\n**What I&#39;ve tried**\r\n\r\n 1. Add `task.enabled = false`\r\n 2. Put plugin configuration into another task\r\n 3. Check source code of plugin to find a way to disconnect this task from build task\r\n\r\nBut all above trails have failed. When I run gradle tasks I can always see `generateJsonSchema2DataClass` and `generateJsonSchema2DataClass0` as part of build tasks.\r\n\r\nI&#39;m using java 8 and gradle 6.9.3\r\n\r\n\r\n\r\n \r\n\r\n","title":"JsonSchema2Pojo and manual task in gradle","body":"<p><strong>What I would like to achieve</strong></p>\n<p>I would like to have a manual gradle task that I can generate Java classes based on Json schema. However, I don't want this task to run when I run other fx. <em>gradle build</em>.</p>\n<p><strong>What I did</strong></p>\n<p>Firstly I've create simple gradle java project with</p>\n<pre><code>gradle init\n</code></pre>\n<p>Then I  have added <em>jsonschema2dataclass</em> plugin and configure it as follows (my current build.gradle):</p>\n<pre><code>/*\n * This file was generated by the Gradle 'init' task.\n * (...) \n */\n\nplugins {\n    // Apply the application plugin to add support for building a CLI application in Java.\n    id 'application'\n\n    id &quot;org.jsonschema2dataclass&quot; version &quot;4.5.0&quot;\n}\n\nrepositories {\n    // Use Maven Central for resolving dependencies.\n    mavenCentral()\n}\n\ndependencies {\n    // Use JUnit Jupiter API for testing.\n    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.2'\n\n    // Use JUnit Jupiter Engine for testing.\n    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'\n\n    // This dependency is used by the application.\n    implementation 'com.google.guava:guava:29.0-jre'\n}\n\napplication {\n    // Define the main class for the application.\n    mainClass = 'GradlePlayground.App'\n}\n\njsonSchema2Pojo {\n            includeGeneratedAnnotation = true\n            generateBuilders = true\n            targetPackage = 'org.example.api' // specify package for your needs\n            targetDirectoryPrefix = file(&quot;${project.rootDir}/app/src/main/java&quot;)\n\n            source.setFrom files(&quot;${project.rootDir}/app/src/main/resources/json&quot;)\n}\n</code></pre>\n<p><strong>What I've tried</strong></p>\n<ol>\n<li>Add <code>task.enabled = false</code></li>\n<li>Put plugin configuration into another task</li>\n<li>Check source code of plugin to find a way to disconnect this task from build task</li>\n</ol>\n<p>But all above trails have failed. When I run gradle tasks I can always see <code>generateJsonSchema2DataClass</code> and <code>generateJsonSchema2DataClass0</code> as part of build tasks.</p>\n<p>I'm using java 8 and gradle 6.9.3</p>\n"},{"tags":["java","arrays","arraylist","printing","playing-cards"],"comments":[{"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"score":0,"creation_date":1672349726,"post_id":74955971,"comment_id":132274364,"body_markdown":"A quick clarification: Every member of the `playspace` array is supposed to be a **column** on the board?","body":"A quick clarification: Every member of the <code>playspace</code> array is supposed to be a <b>column</b> on the board?"},{"owner":{"account_id":16930768,"reputation":3,"user_id":12245103,"display_name":"dactel"},"score":0,"creation_date":1672351480,"post_id":74955971,"comment_id":132274790,"body_markdown":"Correct, every ArrayList object within the playSpace Array is supposed to be a column. This is because the length of the columns in solitaire change when cards get added/subtracted from the column.","body":"Correct, every ArrayList object within the playSpace Array is supposed to be a column. This is because the length of the columns in solitaire change when cards get added/subtracted from the column."}],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1672351012,"creation_date":1672351012,"answer_id":74956391,"question_id":74955971,"body_markdown":"This isn&#39;t super pretty, but it does the trick. I created a queue for each column and scanned through popping one element off of each to make a row. I had to put a spacer for the columns that had already run out of elements.\r\n\r\n```Java\r\nList&lt;Deque&lt;Card&gt;&gt; deques = Arrays.stream(playSpace)\r\n    .map(ArrayDeque::new)\r\n    .collect(Collectors.toList());\r\n\r\nwhile(deques.stream().anyMatch(dq -&gt; !dq.isEmpty())) {\r\n    System.out.println(deques.stream()\r\n        .map(dq -&gt; dq.isEmpty()?&quot;      &quot;:dq.pop().shortHand())\r\n        .collect(Collectors.joining()));\r\n}\r\n","title":"Need help on printing an Array of ArrayLists (of different sizes)","body":"<p>This isn't super pretty, but it does the trick. I created a queue for each column and scanned through popping one element off of each to make a row. I had to put a spacer for the columns that had already run out of elements.</p>\n<pre><code>List&lt;Deque&lt;Card&gt;&gt; deques = Arrays.stream(playSpace)\n    .map(ArrayDeque::new)\n    .collect(Collectors.toList());\n\nwhile(deques.stream().anyMatch(dq -&gt; !dq.isEmpty())) {\n    System.out.println(deques.stream()\n        .map(dq -&gt; dq.isEmpty()?&quot;      &quot;:dq.pop().shortHand())\n        .collect(Collectors.joining()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16689839,"reputation":557,"user_id":12062831,"display_name":"gsan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351416,"creation_date":1672351416,"answer_id":74956437,"question_id":74955971,"body_markdown":"You have to modify `displayBoard()` function inside your `Wasp` class to print your array in **column-wise order**. \r\n\r\nNew function will look like the following:\r\n\r\n    public class Wasp extends Playspace { \r\n    \r\n        ...\r\n    \r\n        public void displayBoard() {\r\n            playSpace[0].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\r\n            // playSpace[0].remove(6); //Used in testing, not necessary to include in final\r\n            playSpace[3].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\r\n    \r\n            int maxSize = 0;\r\n            for (ArrayList&lt;Card&gt; ac : playSpace) {\r\n                if(ac.size() &gt; maxSize) {\r\n                    maxSize = ac.size();\r\n                }\r\n            }\r\n    \r\n            for(int i=0; i&lt;maxSize; i++) {\r\n                for(ArrayList&lt;Card&gt; ac: playSpace) {\r\n                    if(ac.size() &gt; i) {\r\n                        System.out.print(ac.get(i).shortHand());\r\n                    }\r\n                }\r\n                System.out.println();\r\n            }\r\n        } \r\n    \r\n        ...\r\n    }\r\n\r\nBasically, at the first loop, we look through the playspace to get the maximum number of cards we have in any list. Then we iterate in a column-wise manner considering this limit of maximum cards a playspace can have. ","title":"Need help on printing an Array of ArrayLists (of different sizes)","body":"<p>You have to modify <code>displayBoard()</code> function inside your <code>Wasp</code> class to print your array in <strong>column-wise order</strong>.</p>\n<p>New function will look like the following:</p>\n<pre><code>public class Wasp extends Playspace { \n\n    ...\n\n    public void displayBoard() {\n        playSpace[0].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\n        // playSpace[0].remove(6); //Used in testing, not necessary to include in final\n        playSpace[3].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\n\n        int maxSize = 0;\n        for (ArrayList&lt;Card&gt; ac : playSpace) {\n            if(ac.size() &gt; maxSize) {\n                maxSize = ac.size();\n            }\n        }\n\n        for(int i=0; i&lt;maxSize; i++) {\n            for(ArrayList&lt;Card&gt; ac: playSpace) {\n                if(ac.size() &gt; i) {\n                    System.out.print(ac.get(i).shortHand());\n                }\n            }\n            System.out.println();\n        }\n    } \n\n    ...\n}\n</code></pre>\n<p>Basically, at the first loop, we look through the playspace to get the maximum number of cards we have in any list. Then we iterate in a column-wise manner considering this limit of maximum cards a playspace can have.</p>\n"}],"owner":{"account_id":16930768,"reputation":3,"user_id":12245103,"display_name":"dactel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74956391,"answer_count":2,"score":-1,"last_activity_date":1672351416,"creation_date":1672347349,"question_id":74955971,"body_markdown":"I&#39;m making my own solitaire program I can run on my computer (for leisure and practice) and I am trying to display my &#39;ArrayList\\&lt;Card\\&gt;\\[\\] playspace&#39; like it shows in Solitaire. More specifically I&#39;m trying to display the card order downward instead of to the right side like it currently is. Following is my entire program (necessary classes needed to run).\r\n\r\n[This](https://stackoverflow.com/questions/48531761/defining-java-method-for-printing-arrays-of-different-sizes-into-a-table) seemed to be a solution when I checked, but their issue was the bounds of the array and I don&#39;t think they included the printing function, it is also not a 2D Array of ArrayLists... so it might be a solution but it looks just off enough to not be what I need.\r\n\r\nCard:\r\n\r\n```java\r\npackage Playspace;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n/**\r\n * A card object with value, suit, and faceUp identification.\r\n * \r\n * @author Austin M\r\n * @param numValue\r\n * @param faceValue\r\n * @param suit\r\n * @param faceUp\r\n */\r\npublic class Card {\r\n\r\n\tprivate int numValue;\r\n\tprivate String faceValue;\r\n\tprivate String suit;\r\n\tprivate String shortSuit;\r\n\tpublic boolean faceUp;\r\n\tpublic String[] values = { &quot;A&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;, &quot; &quot; };\r\n\tpublic String[] suits = { &quot;Clubs&quot;, &quot;Diamonds&quot;, &quot;Hearts&quot;, &quot;Spades&quot;, &quot; &quot; };\r\n\r\n\t/**\r\n\t * Public constructor for generating a card with value face &amp; suit\r\n\t * \r\n\t * @param value\r\n\t * @param suit\r\n\t */\r\n\tCard(String faceValue, String suit, boolean faceUp) {\r\n\t\tfor (String v : values) {\r\n\t\t\tif (v.equals(faceValue)) {\r\n\t\t\t\tthis.faceValue = faceValue;\r\n\t\t\t\tsetNumValue(faceValue);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (String s : suits) {\r\n\t\t\tif (s.equals(suit)) {\r\n\t\t\t\tthis.suit = suit;\r\n\r\n\t\t\t\tshortSuit = suit.substring(0, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.faceUp = faceUp;\r\n\t}\r\n\r\n\t/**\r\n\t * Private method, returns a list of valid card values\r\n\t * \r\n\t * @returns Arrays.asList()\r\n\t */\r\n\tprivate static List&lt;String&gt; getValues() {\r\n\t\treturn Arrays.asList(&quot;A&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;, &quot; &quot;);\r\n\t}\r\n\r\n\t/**\r\n\t * Private method, returns a list of valid suit values\r\n\t * \r\n\t * @return Arrays.asList()\r\n\t */\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tprivate static List&lt;String&gt; getSuits() {\r\n\t\treturn Arrays.asList(&quot;clubs&quot;, &quot;diamonds&quot;, &quot;hearts&quot;, &quot;spades&quot;, &quot; &quot;);\r\n\t}\r\n\r\n\t/**\r\n\t * Gets string value of face\r\n\t * \r\n\t * @return String faceValue\r\n\t */\r\n\tpublic String getFaceValue() {\r\n\t\treturn faceValue;\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tprivate void setFaceValue(String faceValue) {\r\n\t\tthis.faceValue = faceValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets suit value of card\r\n\t * \r\n\t * @return String suit\r\n\t */\r\n\tpublic String getSuit() {\r\n\t\treturn suit;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets faceUp value of card\r\n\t * \r\n\t * @return Boolean faceUp\r\n\t */\r\n\tpublic boolean isFaceUp() {\r\n\t\treturn faceUp;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the card face up\r\n\t */\r\n\tpublic void setFaceUp() {\r\n\t\tthis.faceUp = true;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the card face down\r\n\t */\r\n\tpublic void setFaceDown() {\r\n\t\tthis.faceUp = false;\r\n\t}\r\n\r\n\t/**\r\n\t * Gets numerical value of card\r\n\t * \r\n\t * @return int numValue\r\n\t */\r\n\tpublic int getNumValue() {\r\n\t\treturn numValue;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets numerical value with the index + 1 of the corresponding face value\r\n\t * \r\n\t * @param faceValue\r\n\t */\r\n\tprivate void setNumValue(String faceValue) {\r\n\t\tnumValue = getValues().indexOf(faceValue) + 1;\r\n\t}\r\n\r\n\t/**\r\n\t * Generates a string with faceValue and Suit, if card is face down, it does not\r\n\t * display card value\r\n\t * \r\n\t * @return String concat\r\n\t */\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\tString concat;\r\n\t\tif (faceUp) {\r\n\t\t\tconcat = extValue() + &quot; of &quot; + suit;\r\n\t\t} else {\r\n\t\t\tconcat = &quot; --- --- --- --- &quot;;\r\n\t\t}\r\n\r\n\t\treturn concat;\r\n\t}\r\n\r\n\tpublic String shortHand() {\r\n\t\tString shortHand = &quot;&quot;;\r\n\t\tif (faceUp) {\r\n\t\t\tshortHand = &quot;[&quot; + String.format(&quot;%-3s&quot;, faceValue) + shortSuit + &quot;]&quot;;\r\n\t\t} else {\r\n\t\t\tshortHand = &quot;[ -- ]&quot;;\r\n\t\t}\r\n\r\n\t\treturn shortHand;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the Extended value of the card name (if it&#39;s Jack-Ace)\r\n\t * \r\n\t * @return String faceValue\r\n\t */\r\n\tprivate String extValue() {\r\n\r\n\t\tfaceValue = faceValue.toUpperCase();\r\n\t\tif (faceValue.equals(&quot;A&quot;)) {\r\n\t\t\treturn &quot;Ace&quot;;\r\n\t\t} else if (faceValue.equals(&quot;J&quot;)) {\r\n\t\t\treturn &quot;Jack&quot;;\r\n\t\t} else if (faceValue.equals(&quot;Q&quot;)) {\r\n\t\t\treturn &quot;Queen&quot;;\r\n\t\t} else if (faceValue.equals(&quot;K&quot;)) {\r\n\t\t\treturn &quot;King&quot;;\r\n\t\t}\r\n\t\treturn faceValue;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nDeck:\r\n\r\n```java\r\npackage Playspace;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\n\r\n/**\r\n * A collection of Card objects where the order can be manipulated\r\n * \r\n * @author Austin M\r\n * @param deck\r\n */\r\npublic class Deck {\r\n\r\n\tpublic ArrayList&lt;Card&gt; deck = new ArrayList&lt;Card&gt;();\r\n\r\n\tDeck() {\r\n\t\tgenerateCards();\r\n\t}\r\n\r\n\t/**\r\n\t * Shuffles the deck randomly using Collections.shuffle() method\r\n\t */\r\n\tpublic void shuffleDeck() {\r\n\t\tCollections.shuffle(deck);\r\n\t}\r\n\r\n\t/**\r\n\t * Generates 52 card objects in a collection\r\n\t */\r\n\tvoid generateCards() {\r\n\t\tfor (int i = 0; i &lt; 4; i++) {\r\n\t\t\tfor (int j = 0; j &lt; 13; j++) {\r\n\t\t\t\taddCard(i, j);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the top card (first in deck)\r\n\t * \r\n\t * @return Card\r\n\t */\r\n\tpublic Card getTop() {\r\n\t\treturn deck.get(0);\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the card in given value of the deck (0-51)\r\n\t * \r\n\t * @param int pos\r\n\t * @return Card\r\n\t */\r\n\tpublic Card getPos(int pos) {\r\n\t\treturn deck.get(pos);\r\n\t}\r\n\r\n\t/**\r\n\t * Combines the contents of the deck list and prints out the deck in a right\r\n\t * aligned column (%18s\\n)\r\n\t * @return String concat\r\n\t */\r\n\t@Override\r\n\tpublic String toString() {\r\n//\t\tString concat = &quot;&quot;;\r\n//\r\n//\t\tfor (Card card : deck) {\r\n//\t\t\tconcat += card.toString() + &quot; &quot;;\r\n//\t\t}\r\n\t\tString concat = &quot;&quot;;\r\n\t\tfor (Card card : deck) {\r\n\t\t\tconcat += String.format(&quot;[%17s]\\n&quot;, card.toString());\r\n\t\t}\r\n\r\n\t\treturn concat;\r\n\t}\r\n\r\n\t/**\r\n\t * Combines the contents of the deck list and prints out the deck in a right\r\n\t * aligned column (%5s\\n)\r\n\t */\r\n\tpublic String shortHand() {\r\n\t\tString concat = &quot;&quot;;\r\n\t\tfor (Card card : deck) {\r\n\t\t\tconcat += String.format(&quot;%5s\\n&quot;, card.shortHand());\r\n\t\t}\r\n\t\treturn concat;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a card to ArrayList&lt;Card&gt; deck given suit (i) and faceValue (j)\r\n\t * \r\n\t * @param i\r\n\t * @param j\r\n\t */\r\n\tprivate void addCard(int i, int j) {\r\n\t\tString suit, faceValue;\r\n\t\tswitch (i) {\r\n\t\tcase 0: {\r\n\t\t\tsuit = &quot;Clubs&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 1: {\r\n\t\t\tsuit = &quot;Diamonds&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 2: {\r\n\t\t\tsuit = &quot;Hearts&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 3: {\r\n\t\t\tsuit = &quot;Spades&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\tsuit = &quot;clubs&quot;;\r\n\t\t\tSystem.err.println(&quot;Unexpected suit: &quot; + i);\r\n\t\t}\r\n\r\n\t\tswitch (j) {\r\n\t\tcase 0: {\r\n\t\t\tfaceValue = &quot;A&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 1: {\r\n\t\t\tfaceValue = &quot;2&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 2: {\r\n\t\t\tfaceValue = &quot;3&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 3: {\r\n\t\t\tfaceValue = &quot;4&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 4: {\r\n\t\t\tfaceValue = &quot;5&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 5: {\r\n\t\t\tfaceValue = &quot;6&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 6: {\r\n\t\t\tfaceValue = &quot;7&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 7: {\r\n\t\t\tfaceValue = &quot;8&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 8: {\r\n\t\t\tfaceValue = &quot;9&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 9: {\r\n\t\t\tfaceValue = &quot;10&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 10: {\r\n\t\t\tfaceValue = &quot;J&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 11: {\r\n\t\t\tfaceValue = &quot;Q&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase 12: {\r\n\t\t\tfaceValue = &quot;K&quot;;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\tfaceValue = &quot;A&quot;;\r\n\t\t\tSystem.err.println(&quot;Unexpected value: &quot; + j);\r\n\t\t}\r\n\t\tdeck.add(new Card(faceValue, suit, false));\r\n\r\n\t}\r\n}\r\n```\r\n\r\nWasp:\r\n\r\n```java\r\npackage Playspace;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\n\r\npublic class Wasp extends Playspace {\r\n\r\n\tWasp() {\r\n\t\tsetUp();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void setUp() {\r\n\t\tinitialize();\r\n\r\n//\t\tdeck.shuffleDeck();\r\n\t\tsetFaceUp();\r\n\r\n\t\tfor (int i = 0; i &lt; 49; i += 7) {\r\n\t\t\tplaySpace[0].add(deck.getPos(i));\r\n\t\t\tplaySpace[1].add(deck.getPos(i + 1));\r\n\t\t\tplaySpace[2].add(deck.getPos(i + 2));\r\n\t\t\tplaySpace[3].add(deck.getPos(i + 3));\r\n\t\t\tplaySpace[4].add(deck.getPos(i + 4));\r\n\t\t\tplaySpace[5].add(deck.getPos(i + 5));\r\n\t\t\tplaySpace[6].add(deck.getPos(i + 6));\r\n\t\t}\r\n//\t\tSystem.out.println(deck.shortHand());\r\n\t\tdisplayBoard();\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t */\r\n\tpublic void setFaceUp() {\r\n\t\tint[] faceDownPos = { 0, 1, 2, 3, 7, 8, 9, 10, 14, 15, 16, 17 };\r\n\t\tfor (int i = 0; i &lt; 49; i++) {\r\n\t\t\tint res = Arrays.binarySearch(faceDownPos, i);\r\n\t\t\tboolean test = res &gt;= 0 ? true : false;\r\n\r\n\t\t\tif (!test) {\r\n\t\t\t\tdeck.getPos(i).setFaceUp();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Displays the playSpace as shorthand card values (testing)\r\n\t */\r\n\tpublic void displayBoard() {\r\n\t\tplaySpace[0].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\r\n//\t\tplaySpace[0].remove(6); //Used in testing, not necessary to include in final\r\n\t\tplaySpace[3].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\r\n\t\tfor (ArrayList&lt;Card&gt; ac : playSpace) {\r\n\t\t\tfor (Card c : ac) {\r\n\t\t\t\tSystem.out.print(c.shortHand());\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n//\t/**\r\n//\t * Displays playSpace as shorthand card values (defunct)\r\n//\t * @param column\r\n//\t * @return String concat\r\n//\t */\r\n//\tpublic String shortHand(int column) {\r\n//\t\tString concat = &quot;&quot;;\r\n//\t\tfor (Card card : playSpace[column]) {\r\n//\t\t\tconcat += String.format(&quot;%5s\\n&quot;, card.shortHand());\r\n//\t\t}\r\n//\t\treturn concat;\r\n//\t}\r\n}\r\n```\r\n\r\nPlayspace:\r\n\r\n```java\r\npackage Playspace;\r\n\r\nimport java.util.ArrayList;\r\n\r\n/**\r\n * A game board class for utilizing Card and Decks\r\n * \r\n * @author Austin M\r\n * \r\n * @param ArrayList&lt;Card&gt;[] playSpace\r\n * @param ArrayList&lt;Card&gt;[] buffer\r\n * @param Deck deck\r\n * @param Card[] offHand\r\n */\r\npublic abstract class Playspace {\r\n\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic ArrayList&lt;Card&gt;[] playSpace = new ArrayList[7];\r\n\tpublic ArrayList&lt;Card&gt; buffer = new ArrayList&lt;Card&gt;();\r\n\tpublic Deck deck = new Deck();\r\n\tpublic Card[] offHand = new Card[3];\r\n\r\n\tpublic abstract void setUp();\r\n\r\n\tpublic abstract void setFaceUp();\r\n\r\n\tpublic abstract void displayBoard();\r\n\r\n\tpublic void initialize() {\r\n\t\tfor (int i = 0; i &lt; 7; i++) {\r\n\t\t\tplaySpace[i] = new ArrayList&lt;Card&gt;();\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nMain:\r\n\r\n```java\r\npackage Playspace;\r\n\r\n/**\r\n * \r\n * @author Austin M\r\n *\r\n */\r\npublic class Main {\r\n\r\n\tpublic static void main(String[] args) {\r\n//\t\tDeck deck1 = new Deck();\r\n//\t\tDeck deck2 = new Deck();\r\n//\t\tpointCount(deck1, deck2);\r\n\t\t\r\n\t\t@SuppressWarnings(&quot;unused&quot;)\r\n\t\tWasp wasp = new Wasp();\r\n\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tprivate static void pointCount(Deck deck1, Deck deck2) {\r\n\t\tdeck1.shuffleDeck();\r\n\t\tSystem.out.println(deck1);\r\n\r\n\t\tdeck2.shuffleDeck();\r\n\t\tSystem.out.println(deck2);\r\n\t\t\r\n\t\tint points = 0;\r\n\t\tfor (int i = 0; i &lt; 52; i++) {\r\n\t\t\tif (deck1.getPos(i).toString().equals(deck2.getPos(i).toString())) {\r\n\t\t\t\tSystem.out.println(&quot;At position: &quot; + (i + 1) + &quot;\\n&quot; + deck1.getPos(i).toString());\r\n\t\t\t\tpoints++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(points + &quot; points.\\n&quot;);\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;unused&quot;)\r\n\tprivate static void compare(Deck deck) {\r\n\t\tint pos = 0;\r\n\t\tfor (int i = 0; i &lt; 10; i++) {\r\n\t\t\tSystem.out.println(&quot;Iteration: &quot; + (i + 1));\r\n\r\n\t\t\tif (deck.getPos(pos).getNumValue() &gt; deck.getPos(pos + 1).getNumValue()) {\r\n\t\t\t\tSystem.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase()\r\n\t\t\t\t\t\t+ &quot; is \\nhigher in value than &quot; + deck.getPos(pos + 1).toString().toUpperCase());\r\n\t\t\t} else if (deck.getPos(pos).getNumValue() == deck.getPos(pos + 1).getNumValue()) {\r\n\t\t\t\tSystem.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase() + &quot; is \\nequal in value to &quot;\r\n\t\t\t\t\t\t+ deck.getPos(pos + 1).toString().toUpperCase());\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase()\r\n\t\t\t\t\t\t+ &quot; is \\nlower in value than &quot; + deck.getPos(pos + 1).toString().toUpperCase());\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t\tpos++;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nAs it stands it prints like:\r\n\r\n```output\r\n[ -- ][ -- ][ -- ][9  D][3  H][10 H][4  S][    ]\r\n[ -- ][ -- ][ -- ][10 D][4  H][J  H][5  S]\r\n[ -- ][ -- ][ -- ][J  D][5  H][Q  H][6  S]\r\n[ -- ][ -- ][ -- ][Q  D][6  H][K  H][7  S][    ]\r\n[5  C][Q  C][6  D][K  D][7  H][A  S][8  S]\r\n[6  C][K  C][7  D][A  H][8  H][2  S][9  S]\r\n[7  C][A  D][8  D][2  H][9  H][3  S][10 S]\r\n```\r\n\r\nbut I want it to print like: (Flipped along the line X = -Y)\r\n\r\n```output\r\n[ -- ][ -- ][ -- ][ -- ][5  C][6  C][7  C]\r\n[ -- ][ -- ][ -- ][ -- ][Q  C][K  C][A  D]\r\n[ -- ][ -- ][ -- ][ -- ][6  D][7  D][8  D]\r\n[9  D][10 D][J  D][Q  D][K  D][A  H][2  H]\r\n[3  H][4  H][5  H][6  H][7  H][8  H][9  H]\r\n[10 H][J  H][Q  H][K  H][A  S][2  S][9  S]\r\n[4  S][5  S][6  S][7  S][8  S][9  S][10 S]\r\n[    ]            [    ]                  \r\n```\r\n\r\nWhere each ArrayList is a column in an Array of 7.\r\nIn the future (if I get a functional display, I would be removing the brackets around blank cards, simply having them in line with the columns as spaces, but one bridge at a time.","title":"Need help on printing an Array of ArrayLists (of different sizes)","body":"<p>I'm making my own solitaire program I can run on my computer (for leisure and practice) and I am trying to display my 'ArrayList&lt;Card&gt;[] playspace' like it shows in Solitaire. More specifically I'm trying to display the card order downward instead of to the right side like it currently is. Following is my entire program (necessary classes needed to run).</p>\n<p><a href=\"https://stackoverflow.com/questions/48531761/defining-java-method-for-printing-arrays-of-different-sizes-into-a-table\">This</a> seemed to be a solution when I checked, but their issue was the bounds of the array and I don't think they included the printing function, it is also not a 2D Array of ArrayLists... so it might be a solution but it looks just off enough to not be what I need.</p>\n<p>Card:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\nimport java.util.Arrays;\nimport java.util.List;\n\n/**\n * A card object with value, suit, and faceUp identification.\n * \n * @author Austin M\n * @param numValue\n * @param faceValue\n * @param suit\n * @param faceUp\n */\npublic class Card {\n\n    private int numValue;\n    private String faceValue;\n    private String suit;\n    private String shortSuit;\n    public boolean faceUp;\n    public String[] values = { &quot;A&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;, &quot; &quot; };\n    public String[] suits = { &quot;Clubs&quot;, &quot;Diamonds&quot;, &quot;Hearts&quot;, &quot;Spades&quot;, &quot; &quot; };\n\n    /**\n     * Public constructor for generating a card with value face &amp; suit\n     * \n     * @param value\n     * @param suit\n     */\n    Card(String faceValue, String suit, boolean faceUp) {\n        for (String v : values) {\n            if (v.equals(faceValue)) {\n                this.faceValue = faceValue;\n                setNumValue(faceValue);\n            }\n        }\n        for (String s : suits) {\n            if (s.equals(suit)) {\n                this.suit = suit;\n\n                shortSuit = suit.substring(0, 1);\n            }\n        }\n        this.faceUp = faceUp;\n    }\n\n    /**\n     * Private method, returns a list of valid card values\n     * \n     * @returns Arrays.asList()\n     */\n    private static List&lt;String&gt; getValues() {\n        return Arrays.asList(&quot;A&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;J&quot;, &quot;Q&quot;, &quot;K&quot;, &quot; &quot;);\n    }\n\n    /**\n     * Private method, returns a list of valid suit values\n     * \n     * @return Arrays.asList()\n     */\n    @SuppressWarnings(&quot;unused&quot;)\n    private static List&lt;String&gt; getSuits() {\n        return Arrays.asList(&quot;clubs&quot;, &quot;diamonds&quot;, &quot;hearts&quot;, &quot;spades&quot;, &quot; &quot;);\n    }\n\n    /**\n     * Gets string value of face\n     * \n     * @return String faceValue\n     */\n    public String getFaceValue() {\n        return faceValue;\n    }\n\n    @SuppressWarnings(&quot;unused&quot;)\n    private void setFaceValue(String faceValue) {\n        this.faceValue = faceValue;\n    }\n\n    /**\n     * Gets suit value of card\n     * \n     * @return String suit\n     */\n    public String getSuit() {\n        return suit;\n    }\n\n    /**\n     * Gets faceUp value of card\n     * \n     * @return Boolean faceUp\n     */\n    public boolean isFaceUp() {\n        return faceUp;\n    }\n\n    /**\n     * Sets the card face up\n     */\n    public void setFaceUp() {\n        this.faceUp = true;\n    }\n\n    /**\n     * Sets the card face down\n     */\n    public void setFaceDown() {\n        this.faceUp = false;\n    }\n\n    /**\n     * Gets numerical value of card\n     * \n     * @return int numValue\n     */\n    public int getNumValue() {\n        return numValue;\n    }\n\n    /**\n     * Sets numerical value with the index + 1 of the corresponding face value\n     * \n     * @param faceValue\n     */\n    private void setNumValue(String faceValue) {\n        numValue = getValues().indexOf(faceValue) + 1;\n    }\n\n    /**\n     * Generates a string with faceValue and Suit, if card is face down, it does not\n     * display card value\n     * \n     * @return String concat\n     */\n    @Override\n    public String toString() {\n        String concat;\n        if (faceUp) {\n            concat = extValue() + &quot; of &quot; + suit;\n        } else {\n            concat = &quot; --- --- --- --- &quot;;\n        }\n\n        return concat;\n    }\n\n    public String shortHand() {\n        String shortHand = &quot;&quot;;\n        if (faceUp) {\n            shortHand = &quot;[&quot; + String.format(&quot;%-3s&quot;, faceValue) + shortSuit + &quot;]&quot;;\n        } else {\n            shortHand = &quot;[ -- ]&quot;;\n        }\n\n        return shortHand;\n    }\n\n    /**\n     * Returns the Extended value of the card name (if it's Jack-Ace)\n     * \n     * @return String faceValue\n     */\n    private String extValue() {\n\n        faceValue = faceValue.toUpperCase();\n        if (faceValue.equals(&quot;A&quot;)) {\n            return &quot;Ace&quot;;\n        } else if (faceValue.equals(&quot;J&quot;)) {\n            return &quot;Jack&quot;;\n        } else if (faceValue.equals(&quot;Q&quot;)) {\n            return &quot;Queen&quot;;\n        } else if (faceValue.equals(&quot;K&quot;)) {\n            return &quot;King&quot;;\n        }\n        return faceValue;\n    }\n\n}\n</code></pre>\n<p>Deck:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\n\n/**\n * A collection of Card objects where the order can be manipulated\n * \n * @author Austin M\n * @param deck\n */\npublic class Deck {\n\n    public ArrayList&lt;Card&gt; deck = new ArrayList&lt;Card&gt;();\n\n    Deck() {\n        generateCards();\n    }\n\n    /**\n     * Shuffles the deck randomly using Collections.shuffle() method\n     */\n    public void shuffleDeck() {\n        Collections.shuffle(deck);\n    }\n\n    /**\n     * Generates 52 card objects in a collection\n     */\n    void generateCards() {\n        for (int i = 0; i &lt; 4; i++) {\n            for (int j = 0; j &lt; 13; j++) {\n                addCard(i, j);\n            }\n        }\n\n    }\n\n    /**\n     * Gets the top card (first in deck)\n     * \n     * @return Card\n     */\n    public Card getTop() {\n        return deck.get(0);\n    }\n\n    /**\n     * Gets the card in given value of the deck (0-51)\n     * \n     * @param int pos\n     * @return Card\n     */\n    public Card getPos(int pos) {\n        return deck.get(pos);\n    }\n\n    /**\n     * Combines the contents of the deck list and prints out the deck in a right\n     * aligned column (%18s\\n)\n     * @return String concat\n     */\n    @Override\n    public String toString() {\n//      String concat = &quot;&quot;;\n//\n//      for (Card card : deck) {\n//          concat += card.toString() + &quot; &quot;;\n//      }\n        String concat = &quot;&quot;;\n        for (Card card : deck) {\n            concat += String.format(&quot;[%17s]\\n&quot;, card.toString());\n        }\n\n        return concat;\n    }\n\n    /**\n     * Combines the contents of the deck list and prints out the deck in a right\n     * aligned column (%5s\\n)\n     */\n    public String shortHand() {\n        String concat = &quot;&quot;;\n        for (Card card : deck) {\n            concat += String.format(&quot;%5s\\n&quot;, card.shortHand());\n        }\n        return concat;\n    }\n\n    /**\n     * Adds a card to ArrayList&lt;Card&gt; deck given suit (i) and faceValue (j)\n     * \n     * @param i\n     * @param j\n     */\n    private void addCard(int i, int j) {\n        String suit, faceValue;\n        switch (i) {\n        case 0: {\n            suit = &quot;Clubs&quot;;\n            break;\n        }\n        case 1: {\n            suit = &quot;Diamonds&quot;;\n            break;\n        }\n        case 2: {\n            suit = &quot;Hearts&quot;;\n            break;\n        }\n        case 3: {\n            suit = &quot;Spades&quot;;\n            break;\n        }\n        default:\n            suit = &quot;clubs&quot;;\n            System.err.println(&quot;Unexpected suit: &quot; + i);\n        }\n\n        switch (j) {\n        case 0: {\n            faceValue = &quot;A&quot;;\n            break;\n        }\n        case 1: {\n            faceValue = &quot;2&quot;;\n            break;\n        }\n        case 2: {\n            faceValue = &quot;3&quot;;\n            break;\n        }\n        case 3: {\n            faceValue = &quot;4&quot;;\n            break;\n        }\n        case 4: {\n            faceValue = &quot;5&quot;;\n            break;\n        }\n        case 5: {\n            faceValue = &quot;6&quot;;\n            break;\n        }\n        case 6: {\n            faceValue = &quot;7&quot;;\n            break;\n        }\n        case 7: {\n            faceValue = &quot;8&quot;;\n            break;\n        }\n        case 8: {\n            faceValue = &quot;9&quot;;\n            break;\n        }\n        case 9: {\n            faceValue = &quot;10&quot;;\n            break;\n        }\n        case 10: {\n            faceValue = &quot;J&quot;;\n            break;\n        }\n        case 11: {\n            faceValue = &quot;Q&quot;;\n            break;\n        }\n        case 12: {\n            faceValue = &quot;K&quot;;\n            break;\n        }\n        default:\n            faceValue = &quot;A&quot;;\n            System.err.println(&quot;Unexpected value: &quot; + j);\n        }\n        deck.add(new Card(faceValue, suit, false));\n\n    }\n}\n</code></pre>\n<p>Wasp:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\n\npublic class Wasp extends Playspace {\n\n    Wasp() {\n        setUp();\n    }\n\n    @Override\n    public void setUp() {\n        initialize();\n\n//      deck.shuffleDeck();\n        setFaceUp();\n\n        for (int i = 0; i &lt; 49; i += 7) {\n            playSpace[0].add(deck.getPos(i));\n            playSpace[1].add(deck.getPos(i + 1));\n            playSpace[2].add(deck.getPos(i + 2));\n            playSpace[3].add(deck.getPos(i + 3));\n            playSpace[4].add(deck.getPos(i + 4));\n            playSpace[5].add(deck.getPos(i + 5));\n            playSpace[6].add(deck.getPos(i + 6));\n        }\n//      System.out.println(deck.shortHand());\n        displayBoard();\n    }\n\n    /**\n     * \n     */\n    public void setFaceUp() {\n        int[] faceDownPos = { 0, 1, 2, 3, 7, 8, 9, 10, 14, 15, 16, 17 };\n        for (int i = 0; i &lt; 49; i++) {\n            int res = Arrays.binarySearch(faceDownPos, i);\n            boolean test = res &gt;= 0 ? true : false;\n\n            if (!test) {\n                deck.getPos(i).setFaceUp();\n            }\n        }\n    }\n    \n    /**\n     * Displays the playSpace as shorthand card values (testing)\n     */\n    public void displayBoard() {\n        playSpace[0].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\n//      playSpace[0].remove(6); //Used in testing, not necessary to include in final\n        playSpace[3].add(new Card(&quot; &quot;, &quot; &quot;, true)); //Used in testing, not necessary to include in final\n        for (ArrayList&lt;Card&gt; ac : playSpace) {\n            for (Card c : ac) {\n                System.out.print(c.shortHand());\n            }\n            System.out.println();\n        }\n        \n        \n    }\n    \n//  /**\n//   * Displays playSpace as shorthand card values (defunct)\n//   * @param column\n//   * @return String concat\n//   */\n//  public String shortHand(int column) {\n//      String concat = &quot;&quot;;\n//      for (Card card : playSpace[column]) {\n//          concat += String.format(&quot;%5s\\n&quot;, card.shortHand());\n//      }\n//      return concat;\n//  }\n}\n</code></pre>\n<p>Playspace:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\nimport java.util.ArrayList;\n\n/**\n * A game board class for utilizing Card and Decks\n * \n * @author Austin M\n * \n * @param ArrayList&lt;Card&gt;[] playSpace\n * @param ArrayList&lt;Card&gt;[] buffer\n * @param Deck deck\n * @param Card[] offHand\n */\npublic abstract class Playspace {\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public ArrayList&lt;Card&gt;[] playSpace = new ArrayList[7];\n    public ArrayList&lt;Card&gt; buffer = new ArrayList&lt;Card&gt;();\n    public Deck deck = new Deck();\n    public Card[] offHand = new Card[3];\n\n    public abstract void setUp();\n\n    public abstract void setFaceUp();\n\n    public abstract void displayBoard();\n\n    public void initialize() {\n        for (int i = 0; i &lt; 7; i++) {\n            playSpace[i] = new ArrayList&lt;Card&gt;();\n        }\n    }\n}\n</code></pre>\n<p>Main:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package Playspace;\n\n/**\n * \n * @author Austin M\n *\n */\npublic class Main {\n\n    public static void main(String[] args) {\n//      Deck deck1 = new Deck();\n//      Deck deck2 = new Deck();\n//      pointCount(deck1, deck2);\n        \n        @SuppressWarnings(&quot;unused&quot;)\n        Wasp wasp = new Wasp();\n\n    }\n\n    @SuppressWarnings(&quot;unused&quot;)\n    private static void pointCount(Deck deck1, Deck deck2) {\n        deck1.shuffleDeck();\n        System.out.println(deck1);\n\n        deck2.shuffleDeck();\n        System.out.println(deck2);\n        \n        int points = 0;\n        for (int i = 0; i &lt; 52; i++) {\n            if (deck1.getPos(i).toString().equals(deck2.getPos(i).toString())) {\n                System.out.println(&quot;At position: &quot; + (i + 1) + &quot;\\n&quot; + deck1.getPos(i).toString());\n                points++;\n            }\n        }\n        System.out.println(points + &quot; points.\\n&quot;);\n    }\n\n    @SuppressWarnings(&quot;unused&quot;)\n    private static void compare(Deck deck) {\n        int pos = 0;\n        for (int i = 0; i &lt; 10; i++) {\n            System.out.println(&quot;Iteration: &quot; + (i + 1));\n\n            if (deck.getPos(pos).getNumValue() &gt; deck.getPos(pos + 1).getNumValue()) {\n                System.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase()\n                        + &quot; is \\nhigher in value than &quot; + deck.getPos(pos + 1).toString().toUpperCase());\n            } else if (deck.getPos(pos).getNumValue() == deck.getPos(pos + 1).getNumValue()) {\n                System.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase() + &quot; is \\nequal in value to &quot;\n                        + deck.getPos(pos + 1).toString().toUpperCase());\n            } else {\n                System.out.println(&quot;The card: &quot; + deck.getPos(pos).toString().toUpperCase()\n                        + &quot; is \\nlower in value than &quot; + deck.getPos(pos + 1).toString().toUpperCase());\n            }\n            System.out.println();\n            pos++;\n        }\n    }\n}\n</code></pre>\n<p>As it stands it prints like:</p>\n<pre><code>[ -- ][ -- ][ -- ][9  D][3  H][10 H][4  S][    ]\n[ -- ][ -- ][ -- ][10 D][4  H][J  H][5  S]\n[ -- ][ -- ][ -- ][J  D][5  H][Q  H][6  S]\n[ -- ][ -- ][ -- ][Q  D][6  H][K  H][7  S][    ]\n[5  C][Q  C][6  D][K  D][7  H][A  S][8  S]\n[6  C][K  C][7  D][A  H][8  H][2  S][9  S]\n[7  C][A  D][8  D][2  H][9  H][3  S][10 S]\n</code></pre>\n<p>but I want it to print like: (Flipped along the line X = -Y)</p>\n<pre><code>[ -- ][ -- ][ -- ][ -- ][5  C][6  C][7  C]\n[ -- ][ -- ][ -- ][ -- ][Q  C][K  C][A  D]\n[ -- ][ -- ][ -- ][ -- ][6  D][7  D][8  D]\n[9  D][10 D][J  D][Q  D][K  D][A  H][2  H]\n[3  H][4  H][5  H][6  H][7  H][8  H][9  H]\n[10 H][J  H][Q  H][K  H][A  S][2  S][9  S]\n[4  S][5  S][6  S][7  S][8  S][9  S][10 S]\n[    ]            [    ]                  \n</code></pre>\n<p>Where each ArrayList is a column in an Array of 7.\nIn the future (if I get a functional display, I would be removing the brackets around blank cards, simply having them in line with the columns as spaces, but one bridge at a time.</p>\n"},{"tags":["java","scala","functional-programming","pattern-matching"],"comments":[{"owner":{"account_id":220160,"reputation":99410,"user_id":477420,"display_name":"Alexei Levenkov"},"score":6,"creation_date":1390677933,"post_id":21355060,"comment_id":32198489,"body_markdown":"Might be better for http://programmers.stackexchange.com or even http://cs.stackexchange.com/help/on-topic. Summary of my understanding - patterns give you much more flexibility to &quot;match and deconstruct&quot; in very compact form. Try to write `switch` case for something like &quot;list of 3 elements where second is of particular type&quot; in regular language...","body":"Might be better for <a href=\"http://programmers.stackexchange.com\">programmers.stackexchange.com</a> or even <a href=\"http://cs.stackexchange.com/help/on-topic\">cs.stackexchange.com/help/on-topic</a>. Summary of my understanding - patterns give you much more flexibility to &quot;match and deconstruct&quot; in very compact form. Try to write <code>switch</code> case for something like &quot;list of 3 elements where second is of particular type&quot; in regular language..."},{"owner":{"account_id":68643,"reputation":26430,"user_id":200166,"accept_rate":40,"display_name":"Randall Schulz"},"score":4,"creation_date":1390690967,"post_id":21355060,"comment_id":32202737,"body_markdown":"I know this is glib, but… Scala&#39;s pattern matching is to Java&#39;s `switch` as an atomic bomb is to a hand grenade.","body":"I know this is glib, but… Scala&#39;s pattern matching is to Java&#39;s <code>switch</code> as an atomic bomb is to a hand grenade."},{"owner":{"account_id":55108,"reputation":49619,"user_id":165009,"accept_rate":100,"display_name":"Kevin Wright"},"score":3,"creation_date":1390693483,"post_id":21355060,"comment_id":32203441,"body_markdown":"Hand grenade? I was thinking more along the lines of a paint bomb...","body":"Hand grenade? I was thinking more along the lines of a paint bomb..."}],"answers":[{"tags":[],"owner":{"account_id":55108,"reputation":49619,"user_id":165009,"accept_rate":100,"display_name":"Kevin Wright"},"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1391070493,"creation_date":1390678637,"answer_id":21355296,"question_id":21355060,"body_markdown":"I&#39;d first like to note that you don&#39;t use pattern matching &quot;instead&quot; of switch statements.  Scala doesn&#39;t have `switch` statements, what it does have is match blocks, with cases inside that superficially look very similar to a switch statement.\r\n\r\nMatch blocks with pattern matching does everything that `switch` does, and much more.\r\n\r\n**A) It&#39;s not restricted to just primitives and other types that Oracle have chosen to &quot;bless&quot; in the language spec** (Strings and Enums).  If you want to match on your own types, go right ahead!\r\n\r\n**B) Pattern matching can also extract**.  For example, with a tuple:\r\n\r\n    val tup = (&quot;hello world&quot;, 42)\r\n    tup match {\r\n      case (s,i) =&gt;\r\n        println(&quot;the string was &quot; + s)\r\n        println(&quot;the number was &quot; + i\r\n    }\r\n\r\nWith a list:\r\n\r\n    val xs = List(1,2,3,4,5,6)\r\n    xs match {\r\n      case h :: t =&gt;\r\n        // h is the head: 1\r\n        // t is the tail: 2,3,4,5,6\r\n        // The :: above is also an example of matching with an INFIX TYPE\r\n    }\r\n\r\nWith a case class\r\n\r\n    case class Person(name: String, age: Int)\r\n    val p = Person(&quot;John Doe&quot;, 42)\r\n    p match {\r\n      case Person(name, 42) =&gt;\r\n        //only extracting the name here, the match would fail if the age wasn&#39;t 42\r\n        println(name)\r\n    }\r\n\r\n**C) pattern matching can be used in value assignment and for-comprehensions**, not just in match blocks:\r\n\r\n    val tup = (19,73)\r\n\r\n    val (a,b) = tup\r\n\r\n    for((a,b) &lt;- Some(tup)) yield a+b // Some(92)\r\n\r\n**D) match blocks are expressions, not statements**\r\n\r\nThis means that they evaluate to the body of whichever case was matched, instead of acting entirely through side-effects.  This is crucial for functional programming!\r\n\r\n    val result = tup match { case (a,b) =&gt; a + b }\r\n","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>I'd first like to note that you don't use pattern matching \"instead\" of switch statements.  Scala doesn't have <code>switch</code> statements, what it does have is match blocks, with cases inside that superficially look very similar to a switch statement.</p>\n\n<p>Match blocks with pattern matching does everything that <code>switch</code> does, and much more.</p>\n\n<p><strong>A) It's not restricted to just primitives and other types that Oracle have chosen to \"bless\" in the language spec</strong> (Strings and Enums).  If you want to match on your own types, go right ahead!</p>\n\n<p><strong>B) Pattern matching can also extract</strong>.  For example, with a tuple:</p>\n\n<pre><code>val tup = (\"hello world\", 42)\ntup match {\n  case (s,i) =&gt;\n    println(\"the string was \" + s)\n    println(\"the number was \" + i\n}\n</code></pre>\n\n<p>With a list:</p>\n\n<pre><code>val xs = List(1,2,3,4,5,6)\nxs match {\n  case h :: t =&gt;\n    // h is the head: 1\n    // t is the tail: 2,3,4,5,6\n    // The :: above is also an example of matching with an INFIX TYPE\n}\n</code></pre>\n\n<p>With a case class</p>\n\n<pre><code>case class Person(name: String, age: Int)\nval p = Person(\"John Doe\", 42)\np match {\n  case Person(name, 42) =&gt;\n    //only extracting the name here, the match would fail if the age wasn't 42\n    println(name)\n}\n</code></pre>\n\n<p><strong>C) pattern matching can be used in value assignment and for-comprehensions</strong>, not just in match blocks:</p>\n\n<pre><code>val tup = (19,73)\n\nval (a,b) = tup\n\nfor((a,b) &lt;- Some(tup)) yield a+b // Some(92)\n</code></pre>\n\n<p><strong>D) match blocks are expressions, not statements</strong></p>\n\n<p>This means that they evaluate to the body of whichever case was matched, instead of acting entirely through side-effects.  This is crucial for functional programming!</p>\n\n<pre><code>val result = tup match { case (a,b) =&gt; a + b }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1328608,"reputation":16312,"user_id":1272950,"display_name":"yǝsʞǝla"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1390697812,"creation_date":1390697812,"answer_id":21358286,"question_id":21355060,"body_markdown":"Somehow my edit/addition to @KevinWright answer got thrown away, so I&#39;ll add it here as one more nice pattern matching feature...\r\n\r\n**F) Compiler exhaustiveness check of cases.**\r\n\r\nIf there exists a value matching against which will not be covered by existing cases compiler will warn you about it. This is a very nice feature of the language because if you don&#39;t ignore these compiler warnings you won&#39;t catch such runtime exceptions or come across a case you didn&#39;t think of. If you still run the application and ignore the warning you will get a nice descriptive exception if your value does not match any cases. Here is an illustration:\r\n\r\n    scala&gt; def badMatch(l: List[Int]): Unit = l match { case x :: xs =&gt; println(x) }\r\n    &lt;console&gt;:7: warning: match may not be exhaustive.\r\n    It would fail on the following input: Nil\r\n           def badMatch(l: List[Int]): Unit = l match { case x :: xs =&gt; println(x) }\r\n                                              ^\r\n    badMatch: (l: List[Int])Unit\r\n    \r\n    scala&gt; badMatch(List(1, 2))\r\n    1\r\n    \r\n    scala&gt; badMatch(Nil)\r\n    scala.MatchError: List() (of class scala.collection.immutable.Nil$)\r\n\r\nI prefer to get an exception in this case because it will fail loud and clear, and usually early instead of executing unexpected branches of logic.\r\n\r\nIf you use `if` you would have to use `else`, and if you use Java `switch` you would have to have `default` case to cover all cases. But notice the difference: Scala compiler knows that your empty list is different from non-empty list in this case, or in more broad sense you define the granularity of matches. You could match lists with 1 or 2 elements and ignore the rest, or use any other much more complex patterns without having to worry if you managed to cover all cases.\r\n\r\nIn short as you use complex extraction and matching logic compiler will make sure you didn&#39;t miss any cases. There is nothing similar in Java unless you use a default case like `default` or `else`.","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>Somehow my edit/addition to @KevinWright answer got thrown away, so I'll add it here as one more nice pattern matching feature...</p>\n\n<p><strong>F) Compiler exhaustiveness check of cases.</strong></p>\n\n<p>If there exists a value matching against which will not be covered by existing cases compiler will warn you about it. This is a very nice feature of the language because if you don't ignore these compiler warnings you won't catch such runtime exceptions or come across a case you didn't think of. If you still run the application and ignore the warning you will get a nice descriptive exception if your value does not match any cases. Here is an illustration:</p>\n\n<pre><code>scala&gt; def badMatch(l: List[Int]): Unit = l match { case x :: xs =&gt; println(x) }\n&lt;console&gt;:7: warning: match may not be exhaustive.\nIt would fail on the following input: Nil\n       def badMatch(l: List[Int]): Unit = l match { case x :: xs =&gt; println(x) }\n                                          ^\nbadMatch: (l: List[Int])Unit\n\nscala&gt; badMatch(List(1, 2))\n1\n\nscala&gt; badMatch(Nil)\nscala.MatchError: List() (of class scala.collection.immutable.Nil$)\n</code></pre>\n\n<p>I prefer to get an exception in this case because it will fail loud and clear, and usually early instead of executing unexpected branches of logic.</p>\n\n<p>If you use <code>if</code> you would have to use <code>else</code>, and if you use Java <code>switch</code> you would have to have <code>default</code> case to cover all cases. But notice the difference: Scala compiler knows that your empty list is different from non-empty list in this case, or in more broad sense you define the granularity of matches. You could match lists with 1 or 2 elements and ignore the rest, or use any other much more complex patterns without having to worry if you managed to cover all cases.</p>\n\n<p>In short as you use complex extraction and matching logic compiler will make sure you didn't miss any cases. There is nothing similar in Java unless you use a default case like <code>default</code> or <code>else</code>.</p>\n"},{"tags":[],"owner":{"account_id":284696,"reputation":3612,"user_id":582963,"display_name":"Septem"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1390704047,"creation_date":1390703632,"answer_id":21358937,"question_id":21355060,"body_markdown":"**pattern matching** is not somehow an alternative of **switch statement**, I consider it to be another way of doing **dynamic dispatch** in oop. They try to do the same thing: calling a different version of the function based on the dynamic type of the arguments\r\n","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p><strong>pattern matching</strong> is not somehow an alternative of <strong>switch statement</strong>, I consider it to be another way of doing <strong>dynamic dispatch</strong> in oop. They try to do the same thing: calling a different version of the function based on the dynamic type of the arguments</p>\n"},{"tags":[],"owner":{"account_id":140004,"reputation":1652,"user_id":345994,"accept_rate":55,"display_name":"Marco"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1390752925,"creation_date":1390752925,"answer_id":21365901,"question_id":21355060,"body_markdown":"As it was written in the other answers, Scala pattern matching and Java switch do not make the same thing.\r\n\r\n**switch statement:**\r\n\r\n- Only works with native types, enumerated types, and the String class\r\n- It is an alternative to a chain of &quot;if-else&quot; to create multiple execution paths, according to an imperative programming\r\n\r\n**pattern matching:**\r\n\r\n- It Allows to match on any sort of data with a first-match policy\r\n- It meets a functional logic: each case statement returns a value and the whole match statement is virtually a function that returns the matching case value.\r\n\r\nIn other words, you can use the &quot;pattern matching&quot; for a similar purpose of the &quot;java switch&quot;, but in doing so you&#39;re using functional tools in an imperative way.\r\n\r\n","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>As it was written in the other answers, Scala pattern matching and Java switch do not make the same thing.</p>\n\n<p><strong>switch statement:</strong></p>\n\n<ul>\n<li>Only works with native types, enumerated types, and the String class</li>\n<li>It is an alternative to a chain of \"if-else\" to create multiple execution paths, according to an imperative programming</li>\n</ul>\n\n<p><strong>pattern matching:</strong></p>\n\n<ul>\n<li>It Allows to match on any sort of data with a first-match policy</li>\n<li>It meets a functional logic: each case statement returns a value and the whole match statement is virtually a function that returns the matching case value.</li>\n</ul>\n\n<p>In other words, you can use the \"pattern matching\" for a similar purpose of the \"java switch\", but in doing so you're using functional tools in an imperative way.</p>\n"},{"tags":[],"owner":{"account_id":13042732,"reputation":47,"user_id":9425581,"display_name":"Kot Leapold"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590847886,"creation_date":1590847886,"answer_id":62103644,"question_id":21355060,"body_markdown":"[JMPL][1] is simple java library, which could emulate some of the features pattern matching, using Java 8 features.\r\n   \r\n\r\n          matches(data).as(\r\n              new Person(&quot;man&quot;),    () -&gt;  System.out.println(&quot;man&quot;);\r\n              new Person(&quot;woman&quot;),  () -&gt;  System.out.println(&quot;woman&quot;);\r\n              new Person(&quot;child&quot;),  () -&gt;  System.out.println(&quot;child&quot;);        \r\n              Null.class,           () -&gt;  System.out.println(&quot;Null value &quot;),\r\n              Else.class,           () -&gt;  System.out.println(&quot;Default value: &quot; + data)\r\n           );\r\n          \r\n        \r\n           matches(data).as(\r\n              Integer.class, i  -&gt; { System.out.println(i * i); },\r\n              Byte.class,    b  -&gt; { System.out.println(b * b); },\r\n              Long.class,    l  -&gt; { System.out.println(l * l); },\r\n              String.class,  s  -&gt; { System.out.println(s * s); },\r\n              Null.class,    () -&gt; { System.out.println(&quot;Null value &quot;); },\r\n              Else.class,    () -&gt; { System.out.println(&quot;Default value: &quot; + data); }\r\n           );\r\n    \r\n           matches(figure).as(\r\n              Rectangle.class, (int w, int h) -&gt; System.out.println(&quot;square: &quot; + (w * h)),\r\n              Circle.class,    (int r)        -&gt; System.out.println(&quot;square: &quot; + (2 * Math.PI * r)),\r\n              Else.class,      ()             -&gt; System.out.println(&quot;Default square: &quot; + 0)\r\n           );\r\n    \r\n       \r\n       \r\n      \r\n\r\n\r\n  [1]: https://github.com/klappdev/jpml","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p><a href=\"https://github.com/klappdev/jpml\" rel=\"nofollow noreferrer\">JMPL</a> is simple java library, which could emulate some of the features pattern matching, using Java 8 features.</p>\n\n<pre><code>      matches(data).as(\n          new Person(\"man\"),    () -&gt;  System.out.println(\"man\");\n          new Person(\"woman\"),  () -&gt;  System.out.println(\"woman\");\n          new Person(\"child\"),  () -&gt;  System.out.println(\"child\");        \n          Null.class,           () -&gt;  System.out.println(\"Null value \"),\n          Else.class,           () -&gt;  System.out.println(\"Default value: \" + data)\n       );\n\n\n       matches(data).as(\n          Integer.class, i  -&gt; { System.out.println(i * i); },\n          Byte.class,    b  -&gt; { System.out.println(b * b); },\n          Long.class,    l  -&gt; { System.out.println(l * l); },\n          String.class,  s  -&gt; { System.out.println(s * s); },\n          Null.class,    () -&gt; { System.out.println(\"Null value \"); },\n          Else.class,    () -&gt; { System.out.println(\"Default value: \" + data); }\n       );\n\n       matches(figure).as(\n          Rectangle.class, (int w, int h) -&gt; System.out.println(\"square: \" + (w * h)),\n          Circle.class,    (int r)        -&gt; System.out.println(\"square: \" + (2 * Math.PI * r)),\n          Else.class,      ()             -&gt; System.out.println(\"Default square: \" + 0)\n       );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9118599,"reputation":457,"user_id":6784881,"display_name":"Talos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672351244,"creation_date":1672350940,"answer_id":74956387,"question_id":21355060,"body_markdown":"Taken from a great book [Programming in Scala](https://www.amazon.com/Programming-Scala-Fifth-Odersky/dp/0997148004) by Martin Odersky (creator of Scala) and others.\r\n\r\nJava&#39;s `switch`\r\n* integer-type, enum and constants can be used can be used in `case`\r\n* `break` at the end of each alternative\r\n* fall through from one alternative to the next without `break`\r\n* **doesn&#39;t result in a value**\r\n\r\nScala&#39;s `match`\r\n* any kind of constant, as well as other things, can be used in `case`\r\n* no `break` at the end of each alternative\r\n* no fall through from one alternative to the next\r\n* **results in a value**\r\n\r\n&lt;hr&gt;\r\n\r\n**Exampes** of the same logic programmed in Java and Scala:\r\n\r\nScala\r\n```scala\r\nfirstArg match\r\n  case &quot;salt&quot; =&gt; println(&quot;pepper&quot;)\r\n  case &quot;chips&quot; =&gt; println(&quot;salsa&quot;)\r\n  case &quot;eggs&quot; =&gt; println(&quot;bacon&quot;)\r\n  case _ =&gt; println(&quot;huh?&quot;)\r\n```\r\nJava\r\n```java\r\nswitch (firstArg) {\r\n  case &quot;salt&quot;:\r\n    System.out.println(&quot;pepper&quot;);\r\n    break;\r\n  case &quot;chips&quot;:\r\n    System.out.println(&quot;salsa&quot;);\r\n    break;\r\n  case &quot;eggs&quot;:\r\n    System.out.println(&quot;bacon&quot;);\r\n    break;\r\n  default:\r\n    System.out.println(&quot;huh?&quot;);\r\n}\r\n```\r\n\r\n&lt;hr&gt;\r\n\r\nScala&#39;s `match` can **results in a value**, Java&#39;s `switch` cannot:\r\n\r\n```scala\r\nfriend match\r\n  case &quot;salt&quot; =&gt; &quot;pepper&quot;\r\n  case &quot;chips&quot; =&gt; &quot;salsa&quot;\r\n  case &quot;eggs&quot; =&gt; &quot;bacona&quot;\r\n  case _ =&gt; &quot;huh?&quot;\r\n```","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>Taken from a great book <a href=\"https://rads.stackoverflow.com/amzn/click/com/0997148004\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Programming in Scala</a> by Martin Odersky (creator of Scala) and others.</p>\n<p>Java's <code>switch</code></p>\n<ul>\n<li>integer-type, enum and constants can be used can be used in <code>case</code></li>\n<li><code>break</code> at the end of each alternative</li>\n<li>fall through from one alternative to the next without <code>break</code></li>\n<li><strong>doesn't result in a value</strong></li>\n</ul>\n<p>Scala's <code>match</code></p>\n<ul>\n<li>any kind of constant, as well as other things, can be used in <code>case</code></li>\n<li>no <code>break</code> at the end of each alternative</li>\n<li>no fall through from one alternative to the next</li>\n<li><strong>results in a value</strong></li>\n</ul>\n<hr>\n<p><strong>Exampes</strong> of the same logic programmed in Java and Scala:</p>\n<p>Scala</p>\n<pre class=\"lang-scala prettyprint-override\"><code>firstArg match\n  case &quot;salt&quot; =&gt; println(&quot;pepper&quot;)\n  case &quot;chips&quot; =&gt; println(&quot;salsa&quot;)\n  case &quot;eggs&quot; =&gt; println(&quot;bacon&quot;)\n  case _ =&gt; println(&quot;huh?&quot;)\n</code></pre>\n<p>Java</p>\n<pre class=\"lang-java prettyprint-override\"><code>switch (firstArg) {\n  case &quot;salt&quot;:\n    System.out.println(&quot;pepper&quot;);\n    break;\n  case &quot;chips&quot;:\n    System.out.println(&quot;salsa&quot;);\n    break;\n  case &quot;eggs&quot;:\n    System.out.println(&quot;bacon&quot;);\n    break;\n  default:\n    System.out.println(&quot;huh?&quot;);\n}\n</code></pre>\n<hr>\n<p>Scala's <code>match</code> can <strong>results in a value</strong>, Java's <code>switch</code> cannot:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>friend match\n  case &quot;salt&quot; =&gt; &quot;pepper&quot;\n  case &quot;chips&quot; =&gt; &quot;salsa&quot;\n  case &quot;eggs&quot; =&gt; &quot;bacona&quot;\n  case _ =&gt; &quot;huh?&quot;\n</code></pre>\n"}],"owner":{"account_id":36946,"reputation":11662,"user_id":105514,"accept_rate":50,"display_name":"Daniel Cukier"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5623,"favorite_count":0,"down_vote_count":2,"up_vote_count":13,"accepted_answer_id":21355296,"answer_count":6,"score":11,"last_activity_date":1672351244,"creation_date":1390677427,"question_id":21355060,"body_markdown":"Everybody says that pattern matching is a great feature in functional languages. Why?\r\n\r\nCan&#39;t I simple use ifs and switch cases for everything?\r\n\r\nI&#39;d like to understand the advantages of using pattern matching instead of regular procedural programming ifs and switch cases","title":"What is the advantage of using scala pattern matching instead of java switch case?","body":"<p>Everybody says that pattern matching is a great feature in functional languages. Why?</p>\n\n<p>Can't I simple use ifs and switch cases for everything?</p>\n\n<p>I'd like to understand the advantages of using pattern matching instead of regular procedural programming ifs and switch cases</p>\n"},{"tags":["java","unzip"],"comments":[{"owner":{"account_id":420494,"reputation":1386,"user_id":798223,"display_name":"GKFX"},"score":0,"creation_date":1407089121,"post_id":981578,"comment_id":39072355,"body_markdown":"This will really mess up this task: http://aioobe.org/zip-quine/. (Infinitely recursive zip-in-a-zip-in-a-zip-in-a-..)","body":"This will really mess up this task: <a href=\"http://aioobe.org/zip-quine/\" rel=\"nofollow noreferrer\">aioobe.org/zip-quine</a>. (Infinitely recursive zip-in-a-zip-in-a-zip-in-a-..)"},{"owner":{"account_id":1393384,"reputation":6371,"user_id":1770601,"accept_rate":59,"display_name":"ha9u63a7"},"score":1,"creation_date":1455185072,"post_id":981578,"comment_id":58379780,"body_markdown":"Just a thought, all the answers presented here doesn&#39;t actually work because you have not considered nested zips","body":"Just a thought, all the answers presented here doesn&#39;t actually work because you have not considered nested zips"},{"owner":{"account_id":6453092,"reputation":332,"user_id":4999407,"accept_rate":75,"display_name":"eldruin"},"score":7,"creation_date":1528207013,"post_id":981578,"comment_id":88413193,"body_markdown":"Beware of the code in answers to this question as they contain a security vulnerability at the moment. See [here](https://snyk.io/research/zip-slip-vulnerability) for more.","body":"Beware of the code in answers to this question as they contain a security vulnerability at the moment. See <a href=\"https://snyk.io/research/zip-slip-vulnerability\" rel=\"nofollow noreferrer\">here</a> for more."}],"answers":[{"tags":[],"owner":{"account_id":41532,"reputation":220,"user_id":120770,"display_name":"Rickster"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1244732794,"creation_date":1244732794,"answer_id":981687,"question_id":981578,"body_markdown":"    File dir = new File(&quot;BASE DIRECTORY PATH&quot;);\r\n\tFileFilter ff = new FileFilter() {\r\n\r\n\t\t@Override\r\n\t\tpublic boolean accept(File f) {\r\n\t\t\t//only want zip files\r\n\t\t\treturn (f.isFile() &amp;&amp; f.getName().toLowerCase().endsWith(&quot;.zip&quot;));\r\n\t\t}\r\n\t};\r\n\t\t\r\n\tFile[] list = null;\r\n\twhile ((list = dir.listFiles(ff)).length &gt; 0) {\r\n\t\tFile file1 = list[0];\r\n\t\t//TODO unzip the file to the base directory\r\n\t}\r\n","title":"How to unzip files recursively in Java?","body":"<pre><code>File dir = new File(\"BASE DIRECTORY PATH\");\nFileFilter ff = new FileFilter() {\n\n    @Override\n    public boolean accept(File f) {\n        //only want zip files\n        return (f.isFile() &amp;&amp; f.getName().toLowerCase().endsWith(\".zip\"));\n    }\n};\n\nFile[] list = null;\nwhile ((list = dir.listFiles(ff)).length &gt; 0) {\n    File file1 = list[0];\n    //TODO unzip the file to the base directory\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":33533,"reputation":644,"user_id":93959,"display_name":"Charlie"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1314020650,"creation_date":1244733295,"answer_id":981731,"question_id":981578,"body_markdown":"Here&#39;s some untested code base on some old code I had that unzipped files.\r\n\r\n    public void doUnzip(String inputZip, String destinationDirectory)\r\n            throws IOException {\r\n        int BUFFER = 2048;\r\n        List zipFiles = new ArrayList();\r\n        File sourceZipFile = new File(inputZip);\r\n        File unzipDestinationDirectory = new File(destinationDirectory);\r\n        unzipDestinationDirectory.mkdir();\r\n\t\r\n        ZipFile zipFile;\r\n        // Open Zip file for reading\r\n        zipFile = new ZipFile(sourceZipFile, ZipFile.OPEN_READ);\r\n\r\n        // Create an enumeration of the entries in the zip file\r\n        Enumeration zipFileEntries = zipFile.entries();\r\n\r\n        // Process each entry\r\n        while (zipFileEntries.hasMoreElements()) {\r\n            // grab a zip file entry\r\n            ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n\r\n            String currentEntry = entry.getName();\r\n\r\n            File destFile = new File(unzipDestinationDirectory, currentEntry);\r\n            destFile = new File(unzipDestinationDirectory, destFile.getName());\r\n\t\t\r\n            if (currentEntry.endsWith(&quot;.zip&quot;)) {\r\n                zipFiles.add(destFile.getAbsolutePath());\r\n            }\r\n\r\n            // grab file&#39;s parent directory structure\r\n            File destinationParent = destFile.getParentFile();\r\n\r\n            // create the parent directory structure if needed\r\n            destinationParent.mkdirs();\r\n\r\n            try {\r\n                // extract file if not a directory\r\n                if (!entry.isDirectory()) {\r\n                    BufferedInputStream is =\r\n                            new BufferedInputStream(zipFile.getInputStream(entry));\r\n                    int currentByte;\r\n                    // establish buffer for writing file\r\n                    byte data[] = new byte[BUFFER];\r\n\r\n                    // write the current file to disk\r\n                    FileOutputStream fos = new FileOutputStream(destFile);\r\n                    BufferedOutputStream dest =\r\n                            new BufferedOutputStream(fos, BUFFER);\r\n\r\n                    // read and write until last byte is encountered\r\n                    while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\r\n                        dest.write(data, 0, currentByte);\r\n                    }\r\n                    dest.flush();\r\n                    dest.close();\r\n                    is.close();\r\n                }\r\n            } catch (IOException ioe) {\r\n                ioe.printStackTrace();\r\n            }\r\n        }\r\n        zipFile.close();\r\n\r\n        for (Iterator iter = zipFiles.iterator(); iter.hasNext();) {\r\n            String zipName = (String)iter.next();\r\n            doUnzip(\r\n                zipName,\r\n                destinationDirectory +\r\n                    File.separatorChar +\r\n                    zipName.substring(0,zipName.lastIndexOf(&quot;.zip&quot;))\r\n            );\r\n        }\r\n\t\r\n    }\r\n","title":"How to unzip files recursively in Java?","body":"<p>Here's some untested code base on some old code I had that unzipped files.</p>\n\n<pre><code>public void doUnzip(String inputZip, String destinationDirectory)\n        throws IOException {\n    int BUFFER = 2048;\n    List zipFiles = new ArrayList();\n    File sourceZipFile = new File(inputZip);\n    File unzipDestinationDirectory = new File(destinationDirectory);\n    unzipDestinationDirectory.mkdir();\n\n    ZipFile zipFile;\n    // Open Zip file for reading\n    zipFile = new ZipFile(sourceZipFile, ZipFile.OPEN_READ);\n\n    // Create an enumeration of the entries in the zip file\n    Enumeration zipFileEntries = zipFile.entries();\n\n    // Process each entry\n    while (zipFileEntries.hasMoreElements()) {\n        // grab a zip file entry\n        ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n\n        String currentEntry = entry.getName();\n\n        File destFile = new File(unzipDestinationDirectory, currentEntry);\n        destFile = new File(unzipDestinationDirectory, destFile.getName());\n\n        if (currentEntry.endsWith(\".zip\")) {\n            zipFiles.add(destFile.getAbsolutePath());\n        }\n\n        // grab file's parent directory structure\n        File destinationParent = destFile.getParentFile();\n\n        // create the parent directory structure if needed\n        destinationParent.mkdirs();\n\n        try {\n            // extract file if not a directory\n            if (!entry.isDirectory()) {\n                BufferedInputStream is =\n                        new BufferedInputStream(zipFile.getInputStream(entry));\n                int currentByte;\n                // establish buffer for writing file\n                byte data[] = new byte[BUFFER];\n\n                // write the current file to disk\n                FileOutputStream fos = new FileOutputStream(destFile);\n                BufferedOutputStream dest =\n                        new BufferedOutputStream(fos, BUFFER);\n\n                // read and write until last byte is encountered\n                while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                    dest.write(data, 0, currentByte);\n                }\n                dest.flush();\n                dest.close();\n                is.close();\n            }\n        } catch (IOException ioe) {\n            ioe.printStackTrace();\n        }\n    }\n    zipFile.close();\n\n    for (Iterator iter = zipFiles.iterator(); iter.hasNext();) {\n        String zipName = (String)iter.next();\n        doUnzip(\n            zipName,\n            destinationDirectory +\n                File.separatorChar +\n                zipName.substring(0,zipName.lastIndexOf(\".zip\"))\n        );\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":877879,"reputation":125,"user_id":122281,"display_name":"fero46"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1244845211,"creation_date":1244844239,"answer_id":989272,"question_id":981578,"body_markdown":"I take ca.anderson4 and remove the List zipFiles and rewrite a little bit, this is what i got:\r\n\r\n    public class Unzip {\r\n\r\n\tpublic void unzip(String zipFile) throws ZipException,\r\n\t\t\tIOException {\r\n\r\n\t\tSystem.out.println(zipFile);;\r\n\t\tint BUFFER = 2048;\r\n\t\tFile file = new File(zipFile);\r\n\r\n\t\tZipFile zip = new ZipFile(file);\r\n\t\tString newPath = zipFile.substring(0, zipFile.length() - 4);\r\n\r\n\t\tnew File(newPath).mkdir();\r\n\t\tEnumeration zipFileEntries = zip.entries();\r\n\r\n\t\t// Process each entry\r\n\t\twhile (zipFileEntries.hasMoreElements()) {\r\n\t\t\t// grab a zip file entry\r\n\t\t\tZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n\r\n\t\t\tString currentEntry = entry.getName();\r\n\r\n\t\t\tFile destFile = new File(newPath, currentEntry);\r\n\t\t\tdestFile = new File(newPath, destFile.getName());\r\n\t\t\tFile destinationParent = destFile.getParentFile();\r\n\r\n\t\t\t// create the parent directory structure if needed\r\n\t\t\tdestinationParent.mkdirs();\r\n\t\t\tif (!entry.isDirectory()) {\r\n\t\t\t\tBufferedInputStream is = new BufferedInputStream(zip\r\n\t\t\t\t\t\t.getInputStream(entry));\r\n\t\t\t\tint currentByte;\r\n\t\t\t\t// establish buffer for writing file\r\n\t\t\t\tbyte data[] = new byte[BUFFER];\r\n\r\n\t\t\t\t// write the current file to disk\r\n\t\t\t\tFileOutputStream fos = new FileOutputStream(destFile);\r\n\t\t\t\tBufferedOutputStream dest = new BufferedOutputStream(fos,\r\n\t\t\t\t\t\tBUFFER);\r\n\r\n\t\t\t\t// read and write until last byte is encountered\r\n\t\t\t\twhile ((currentByte = is.read(data, 0, BUFFER)) != -1) {\r\n\t\t\t\t\tdest.write(data, 0, currentByte);\r\n\t\t\t\t}\r\n\t\t\t\tdest.flush();\r\n\t\t\t\tdest.close();\r\n\t\t\t\tis.close();\r\n\t\t\t}\r\n\t\t\tif (currentEntry.endsWith(&quot;.zip&quot;)) {\r\n\t\t\t\t// found a zip file, try to open\r\n\t\t\t\tunzip(destFile.getAbsolutePath());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tUnzip unzipper=new Unzip();\r\n\t\ttry {\r\n\t\t\tunzipper.unzip(&quot;test/test.zip&quot;);\r\n\t\t} catch (ZipException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n    }\r\n\r\nI tested and it works","title":"How to unzip files recursively in Java?","body":"<p>I take ca.anderson4 and remove the List zipFiles and rewrite a little bit, this is what i got:</p>\n\n<pre><code>public class Unzip {\n\npublic void unzip(String zipFile) throws ZipException,\n        IOException {\n\n    System.out.println(zipFile);;\n    int BUFFER = 2048;\n    File file = new File(zipFile);\n\n    ZipFile zip = new ZipFile(file);\n    String newPath = zipFile.substring(0, zipFile.length() - 4);\n\n    new File(newPath).mkdir();\n    Enumeration zipFileEntries = zip.entries();\n\n    // Process each entry\n    while (zipFileEntries.hasMoreElements()) {\n        // grab a zip file entry\n        ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n\n        String currentEntry = entry.getName();\n\n        File destFile = new File(newPath, currentEntry);\n        destFile = new File(newPath, destFile.getName());\n        File destinationParent = destFile.getParentFile();\n\n        // create the parent directory structure if needed\n        destinationParent.mkdirs();\n        if (!entry.isDirectory()) {\n            BufferedInputStream is = new BufferedInputStream(zip\n                    .getInputStream(entry));\n            int currentByte;\n            // establish buffer for writing file\n            byte data[] = new byte[BUFFER];\n\n            // write the current file to disk\n            FileOutputStream fos = new FileOutputStream(destFile);\n            BufferedOutputStream dest = new BufferedOutputStream(fos,\n                    BUFFER);\n\n            // read and write until last byte is encountered\n            while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                dest.write(data, 0, currentByte);\n            }\n            dest.flush();\n            dest.close();\n            is.close();\n        }\n        if (currentEntry.endsWith(\".zip\")) {\n            // found a zip file, try to open\n            unzip(destFile.getAbsolutePath());\n        }\n    }\n}\n\npublic static void main(String[] args) {\n    Unzip unzipper=new Unzip();\n    try {\n        unzipper.unzip(\"test/test.zip\");\n    } catch (ZipException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n}\n\n}\n</code></pre>\n\n<p>I tested and it works</p>\n"},{"tags":[],"owner":{"account_id":877871,"reputation":21,"user_id":121817,"display_name":"boxymoron"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1244903912,"creation_date":1244903912,"answer_id":990784,"question_id":981578,"body_markdown":"In testing I noticed File.mkDirs() does not work under Windows...\r\n\r\n/**\r\n* for a given full path name recreate all parent directories\r\n**/\r\n\r\n\r\n\t\tprivate void createParentHierarchy(String parentName) throws IOException {\r\n\t\t\tFile parent = new File(parentName);\r\n\t\t\tString[] parentsStrArr = parent.getAbsolutePath().split(File.separator == &quot;/&quot; ? &quot;/&quot; : &quot;\\\\\\\\&quot;);\r\n\t\t\t\r\n\t\t\t//create the parents of the parent\r\n\t\t\tfor(int i=0; i &lt; parentsStrArr.length; i++){\r\n\t\t\t\tStringBuffer currParentPath = new StringBuffer();\r\n\t\t\t\tfor(int j = 0; j &lt; i; j++){\r\n\t\t\t\t\tcurrParentPath.append(parentsStrArr[j]+File.separator);\r\n\t\t\t\t}\r\n\t\t\t\tFile currParent = new File(currParentPath.toString());\r\n\t\t\t\tif(!currParent.isDirectory()){\r\n\t\t\t\t\tboolean created = currParent.mkdir();\r\n\t\t\t\t\tif(isVerbose)log(&quot;creating directory &quot;+currParent.getAbsolutePath());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//create the parent itself\r\n\t\t\tif(!parent.isDirectory()){\r\n\t\t\t\tboolean success = parent.mkdir();\r\n\t\t\t}\r\n\t\t}","title":"How to unzip files recursively in Java?","body":"<p>In testing I noticed File.mkDirs() does not work under Windows...</p>\n\n<p>/**\n* for a given full path name recreate all parent directories\n**/</p>\n\n<pre><code>    private void createParentHierarchy(String parentName) throws IOException {\n        File parent = new File(parentName);\n        String[] parentsStrArr = parent.getAbsolutePath().split(File.separator == \"/\" ? \"/\" : \"\\\\\\\\\");\n\n        //create the parents of the parent\n        for(int i=0; i &lt; parentsStrArr.length; i++){\n            StringBuffer currParentPath = new StringBuffer();\n            for(int j = 0; j &lt; i; j++){\n                currParentPath.append(parentsStrArr[j]+File.separator);\n            }\n            File currParent = new File(currParentPath.toString());\n            if(!currParent.isDirectory()){\n                boolean created = currParent.mkdir();\n                if(isVerbose)log(\"creating directory \"+currParent.getAbsolutePath());\n            }\n        }\n\n        //create the parent itself\n        if(!parent.isDirectory()){\n            boolean success = parent.mkdir();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":118078,"reputation":2690,"user_id":308843,"accept_rate":67,"display_name":"NeilMonday"},"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1620740292,"creation_date":1313676777,"answer_id":7108813,"question_id":981578,"body_markdown":"Warning, the code here is ok for trusted zip files, there&#39;s no path validation before write which may lead to security vulnerability as described in [zip-slip-vulnerability](https://github.com/snyk/zip-slip-vulnerability) if you use it to deflate an uploaded zip file from unknown client.\r\n\r\n----------\r\n\r\nThis solution is very similar to the previous solutions already posted, but this one recreates the proper folder structure on unzip.\r\n\r\n    public static void extractFolder(String zipFile) throws IOException {\r\n    int buffer = 2048;\r\n    File file = new File(zipFile);\r\n\r\n    try (ZipFile zip = new ZipFile(file)) {\r\n      String newPath = zipFile.substring(0, zipFile.length() - 4);\r\n\r\n      new File(newPath).mkdir();\r\n      Enumeration&lt;? extends ZipEntry&gt; zipFileEntries = zip.entries();\r\n\r\n      // Process each entry\r\n      while (zipFileEntries.hasMoreElements()) {\r\n        // grab a zip file entry\r\n        ZipEntry entry = zipFileEntries.nextElement();\r\n        String currentEntry = entry.getName();\r\n        File destFile = new File(newPath, currentEntry);\r\n        File destinationParent = destFile.getParentFile();\r\n\r\n        // create the parent directory structure if needed\r\n        destinationParent.mkdirs();\r\n\r\n        if (!entry.isDirectory()) {\r\n          BufferedInputStream is = new BufferedInputStream(zip.getInputStream(entry));\r\n          int currentByte;\r\n          // establish buffer for writing file\r\n          byte[] data = new byte[buffer];\r\n\r\n          // write the current file to disk\r\n          FileOutputStream fos = new FileOutputStream(destFile);\r\n          try (BufferedOutputStream dest = new BufferedOutputStream(fos, buffer)) {\r\n\r\n            // read and write until last byte is encountered\r\n            while ((currentByte = is.read(data, 0, buffer)) != -1) {\r\n              dest.write(data, 0, currentByte);\r\n            }\r\n            dest.flush();\r\n            is.close();\r\n          }\r\n        }\r\n\r\n        if (currentEntry.endsWith(&quot;.zip&quot;)) {\r\n          // found a zip file, try to open\r\n          extractFolder(destFile.getAbsolutePath());\r\n        }\r\n      }\r\n    }\r\n  }","title":"How to unzip files recursively in Java?","body":"<p>Warning, the code here is ok for trusted zip files, there's no path validation before write which may lead to security vulnerability as described in <a href=\"https://github.com/snyk/zip-slip-vulnerability\" rel=\"noreferrer\">zip-slip-vulnerability</a> if you use it to deflate an uploaded zip file from unknown client.</p>\n<hr />\n<p>This solution is very similar to the previous solutions already posted, but this one recreates the proper folder structure on unzip.</p>\n<pre><code>public static void extractFolder(String zipFile) throws IOException {\nint buffer = 2048;\nFile file = new File(zipFile);\n\ntry (ZipFile zip = new ZipFile(file)) {\n  String newPath = zipFile.substring(0, zipFile.length() - 4);\n\n  new File(newPath).mkdir();\n  Enumeration&lt;? extends ZipEntry&gt; zipFileEntries = zip.entries();\n\n  // Process each entry\n  while (zipFileEntries.hasMoreElements()) {\n    // grab a zip file entry\n    ZipEntry entry = zipFileEntries.nextElement();\n    String currentEntry = entry.getName();\n    File destFile = new File(newPath, currentEntry);\n    File destinationParent = destFile.getParentFile();\n\n    // create the parent directory structure if needed\n    destinationParent.mkdirs();\n\n    if (!entry.isDirectory()) {\n      BufferedInputStream is = new BufferedInputStream(zip.getInputStream(entry));\n      int currentByte;\n      // establish buffer for writing file\n      byte[] data = new byte[buffer];\n\n      // write the current file to disk\n      FileOutputStream fos = new FileOutputStream(destFile);\n      try (BufferedOutputStream dest = new BufferedOutputStream(fos, buffer)) {\n\n        // read and write until last byte is encountered\n        while ((currentByte = is.read(data, 0, buffer)) != -1) {\n          dest.write(data, 0, currentByte);\n        }\n        dest.flush();\n        is.close();\n      }\n    }\n\n    if (currentEntry.endsWith(&quot;.zip&quot;)) {\n      // found a zip file, try to open\n      extractFolder(destFile.getAbsolutePath());\n    }\n  }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":328694,"reputation":7904,"user_id":651794,"accept_rate":83,"display_name":"James Scriven"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1330543853,"creation_date":1330543853,"answer_id":9505409,"question_id":981578,"body_markdown":"Same as NeilMonday&#39;s answer, but extracts empty directories:\r\n\r\n    static public void extractFolder(String zipFile) throws ZipException, IOException \r\n    {\r\n        System.out.println(zipFile);\r\n        int BUFFER = 2048;\r\n        File file = new File(zipFile);\r\n\r\n        ZipFile zip = new ZipFile(file);\r\n        String newPath = zipFile.substring(0, zipFile.length() - 4);\r\n\r\n        new File(newPath).mkdir();\r\n        Enumeration zipFileEntries = zip.entries();\r\n        \r\n        // Process each entry\r\n        while (zipFileEntries.hasMoreElements())\r\n        {\r\n            // grab a zip file entry\r\n            ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n            String currentEntry = entry.getName();\r\n            File destFile = new File(newPath, currentEntry);\r\n            //destFile = new File(newPath, destFile.getName());\r\n            File destinationParent = destFile.getParentFile();\r\n\r\n            // create the parent directory structure if needed\r\n            destinationParent.mkdirs();\r\n                    \r\n            if (!entry.isDirectory())\r\n            {\r\n                BufferedInputStream is = new BufferedInputStream(zip\r\n                .getInputStream(entry));\r\n                int currentByte;\r\n                // establish buffer for writing file\r\n                byte data[] = new byte[BUFFER];\r\n\r\n                // write the current file to disk\r\n                FileOutputStream fos = new FileOutputStream(destFile);\r\n                BufferedOutputStream dest = new BufferedOutputStream(fos,\r\n                BUFFER);\r\n\r\n                // read and write until last byte is encountered\r\n                while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\r\n                    dest.write(data, 0, currentByte);\r\n                }\r\n                dest.flush();\r\n                dest.close();\r\n                is.close();\r\n            }\r\n            else{\r\n                destFile.mkdirs()\r\n            }\r\n            if (currentEntry.endsWith(&quot;.zip&quot;))\r\n            {\r\n                // found a zip file, try to open\r\n                extractFolder(destFile.getAbsolutePath());\r\n            }\r\n        }\r\n    }","title":"How to unzip files recursively in Java?","body":"<p>Same as NeilMonday's answer, but extracts empty directories:</p>\n\n<pre><code>static public void extractFolder(String zipFile) throws ZipException, IOException \n{\n    System.out.println(zipFile);\n    int BUFFER = 2048;\n    File file = new File(zipFile);\n\n    ZipFile zip = new ZipFile(file);\n    String newPath = zipFile.substring(0, zipFile.length() - 4);\n\n    new File(newPath).mkdir();\n    Enumeration zipFileEntries = zip.entries();\n\n    // Process each entry\n    while (zipFileEntries.hasMoreElements())\n    {\n        // grab a zip file entry\n        ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n        String currentEntry = entry.getName();\n        File destFile = new File(newPath, currentEntry);\n        //destFile = new File(newPath, destFile.getName());\n        File destinationParent = destFile.getParentFile();\n\n        // create the parent directory structure if needed\n        destinationParent.mkdirs();\n\n        if (!entry.isDirectory())\n        {\n            BufferedInputStream is = new BufferedInputStream(zip\n            .getInputStream(entry));\n            int currentByte;\n            // establish buffer for writing file\n            byte data[] = new byte[BUFFER];\n\n            // write the current file to disk\n            FileOutputStream fos = new FileOutputStream(destFile);\n            BufferedOutputStream dest = new BufferedOutputStream(fos,\n            BUFFER);\n\n            // read and write until last byte is encountered\n            while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                dest.write(data, 0, currentByte);\n            }\n            dest.flush();\n            dest.close();\n            is.close();\n        }\n        else{\n            destFile.mkdirs()\n        }\n        if (currentEntry.endsWith(\".zip\"))\n        {\n            // found a zip file, try to open\n            extractFolder(destFile.getAbsolutePath());\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":466097,"reputation":133,"user_id":870649,"display_name":"Igor Shakola"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1336054791,"creation_date":1336054791,"answer_id":10433332,"question_id":981578,"body_markdown":"One should CLOSE zip file after unzip. \r\n    \r\n    static public void extractFolder(String zipFile) throws ZipException, IOException \r\n    {\r\n        System.out.println(zipFile);\r\n        int BUFFER = 2048;\r\n        File file = new File(zipFile);\r\n    \r\n        ZipFile zip = new ZipFile(file);\r\n        try\r\n        { \r\n           ...code from other answers ( ex. NeilMonday )...\r\n        }\r\n        finally\r\n        {\r\n            zip.close();\r\n        }\r\n    }\r\n\r\n","title":"How to unzip files recursively in Java?","body":"<p>One should CLOSE zip file after unzip. </p>\n\n<pre><code>static public void extractFolder(String zipFile) throws ZipException, IOException \n{\n    System.out.println(zipFile);\n    int BUFFER = 2048;\n    File file = new File(zipFile);\n\n    ZipFile zip = new ZipFile(file);\n    try\n    { \n       ...code from other answers ( ex. NeilMonday )...\n    }\n    finally\n    {\n        zip.close();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2766757,"reputation":548,"user_id":2382295,"accept_rate":75,"display_name":"Matthew Pautzke"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1432234639,"creation_date":1404855868,"answer_id":24642072,"question_id":981578,"body_markdown":"Modified as i needed then mixed in a bit of the best answers. This version will:\r\n\r\n\r\n\r\n- Recursively Extract a zip to given location\r\n\r\n\r\n\r\n- Create empty directories\r\n\r\n\r\n\r\n- Close zip properly\r\n\r\n\r\n----------\r\n\r\n\r\n    public static void unZipAll(File source, File destination) throws IOException \r\n    {\r\n        System.out.println(&quot;Unzipping - &quot; + source.getName());\r\n        int BUFFER = 2048;\r\n        \r\n        ZipFile zip = new ZipFile(source);\r\n        try{\r\n            destination.getParentFile().mkdirs();\r\n            Enumeration zipFileEntries = zip.entries();\r\n\r\n            // Process each entry\r\n            while (zipFileEntries.hasMoreElements())\r\n            {\r\n                // grab a zip file entry\r\n                ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n                String currentEntry = entry.getName();\r\n                File destFile = new File(destination, currentEntry);\r\n                //destFile = new File(newPath, destFile.getName());\r\n                File destinationParent = destFile.getParentFile();\r\n\r\n                // create the parent directory structure if needed\r\n                destinationParent.mkdirs();\r\n\r\n                if (!entry.isDirectory())\r\n                {\r\n                    BufferedInputStream is = null;\r\n                    FileOutputStream fos = null;\r\n                    BufferedOutputStream dest = null;\r\n                    try{\r\n                        is = new BufferedInputStream(zip.getInputStream(entry));\r\n                        int currentByte;\r\n                        // establish buffer for writing file\r\n                        byte data[] = new byte[BUFFER];\r\n\r\n                        // write the current file to disk\r\n                        fos = new FileOutputStream(destFile);\r\n                        dest = new BufferedOutputStream(fos, BUFFER);\r\n\r\n                        // read and write until last byte is encountered\r\n                        while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\r\n                            dest.write(data, 0, currentByte);\r\n                        }\r\n                    } catch (Exception e){\r\n                        System.out.println(&quot;unable to extract entry:&quot; + entry.getName());\r\n                        throw e;\r\n                    } finally{\r\n                        if (dest != null){\r\n                            dest.close();\r\n                        }\r\n                        if (fos != null){\r\n                            fos.close();\r\n                        }\r\n                        if (is != null){\r\n                            is.close();\r\n                        }\r\n                    }\r\n                }else{\r\n                    //Create directory\r\n                    destFile.mkdirs();\r\n                }\r\n\r\n                if (currentEntry.endsWith(&quot;.zip&quot;))\r\n                {\r\n                    // found a zip file, try to extract\r\n                    unZipAll(destFile, destinationParent);\r\n                    if(!destFile.delete()){\r\n                        System.out.println(&quot;Could not delete zip&quot;);\r\n                    }\r\n                }\r\n            }\r\n        } catch(Exception e){\r\n            e.printStackTrace();\r\n            System.out.println(&quot;Failed to successfully unzip:&quot; + source.getName());\r\n        } finally {\r\n            zip.close();\r\n        }\r\n        System.out.println(&quot;Done Unzipping:&quot; + source.getName());\r\n    }","title":"How to unzip files recursively in Java?","body":"<p>Modified as i needed then mixed in a bit of the best answers. This version will:</p>\n\n<ul>\n<li><p>Recursively Extract a zip to given location</p></li>\n<li><p>Create empty directories</p></li>\n<li><p>Close zip properly</p></li>\n</ul>\n\n<hr>\n\n<pre><code>public static void unZipAll(File source, File destination) throws IOException \n{\n    System.out.println(\"Unzipping - \" + source.getName());\n    int BUFFER = 2048;\n\n    ZipFile zip = new ZipFile(source);\n    try{\n        destination.getParentFile().mkdirs();\n        Enumeration zipFileEntries = zip.entries();\n\n        // Process each entry\n        while (zipFileEntries.hasMoreElements())\n        {\n            // grab a zip file entry\n            ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n            String currentEntry = entry.getName();\n            File destFile = new File(destination, currentEntry);\n            //destFile = new File(newPath, destFile.getName());\n            File destinationParent = destFile.getParentFile();\n\n            // create the parent directory structure if needed\n            destinationParent.mkdirs();\n\n            if (!entry.isDirectory())\n            {\n                BufferedInputStream is = null;\n                FileOutputStream fos = null;\n                BufferedOutputStream dest = null;\n                try{\n                    is = new BufferedInputStream(zip.getInputStream(entry));\n                    int currentByte;\n                    // establish buffer for writing file\n                    byte data[] = new byte[BUFFER];\n\n                    // write the current file to disk\n                    fos = new FileOutputStream(destFile);\n                    dest = new BufferedOutputStream(fos, BUFFER);\n\n                    // read and write until last byte is encountered\n                    while ((currentByte = is.read(data, 0, BUFFER)) != -1) {\n                        dest.write(data, 0, currentByte);\n                    }\n                } catch (Exception e){\n                    System.out.println(\"unable to extract entry:\" + entry.getName());\n                    throw e;\n                } finally{\n                    if (dest != null){\n                        dest.close();\n                    }\n                    if (fos != null){\n                        fos.close();\n                    }\n                    if (is != null){\n                        is.close();\n                    }\n                }\n            }else{\n                //Create directory\n                destFile.mkdirs();\n            }\n\n            if (currentEntry.endsWith(\".zip\"))\n            {\n                // found a zip file, try to extract\n                unZipAll(destFile, destinationParent);\n                if(!destFile.delete()){\n                    System.out.println(\"Could not delete zip\");\n                }\n            }\n        }\n    } catch(Exception e){\n        e.printStackTrace();\n        System.out.println(\"Failed to successfully unzip:\" + source.getName());\n    } finally {\n        zip.close();\n    }\n    System.out.println(\"Done Unzipping:\" + source.getName());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9105243,"reputation":153,"user_id":6775951,"display_name":"QuackDuck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594180916,"creation_date":1594180916,"answer_id":62787355,"question_id":981578,"body_markdown":"Here is some code, which I tested to be working quite well :\r\n\r\n```\r\npackage com.test;\r\n\r\nimport java.io.BufferedInputStream;\r\nimport java.io.BufferedOutputStream;\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.util.Enumeration;\r\nimport java.util.zip.ZipEntry;\r\nimport java.util.zip.ZipFile;\r\n\r\npublic class Unzipper {  \r\n    private final static int BUFFER_SIZE = 2048;\r\n    private final static String ZIP_FILE = &quot;/home/anton/test/test.zip&quot;;\r\n    private final static String DESTINATION_DIRECTORY = &quot;/home/anton/test/&quot;;\r\n    private final static String ZIP_EXTENSION = &quot;.zip&quot;;\r\n \r\n    public static void main(String[] args) {\r\n     System.out.println(&quot;Trying to unzip file &quot; + ZIP_FILE); \r\n        Unzipper unzip = new Unzipper();  \r\n        if (unzip.unzipToFile(ZIP_FILE, DESTINATION_DIRECTORY)) {\r\n         System.out.println(&quot;Succefully unzipped to the directory &quot; \r\n             + DESTINATION_DIRECTORY);\r\n        } else {\r\n         System.out.println(&quot;There was some error during extracting archive to the directory &quot; \r\n             + DESTINATION_DIRECTORY);\r\n        }\r\n    } \r\n\r\n public boolean unzipToFile(String srcZipFileName,\r\n   String destDirectoryName) {\r\n  try {\r\n   BufferedInputStream bufIS = null;\r\n   // create the destination directory structure (if needed)\r\n   File destDirectory = new File(destDirectoryName);\r\n   destDirectory.mkdirs();\r\n\r\n   // open archive for reading\r\n   File file = new File(srcZipFileName);\r\n   ZipFile zipFile = new ZipFile(file, ZipFile.OPEN_READ);\r\n\r\n   //for every zip archive entry do\r\n   Enumeration&lt;? extends ZipEntry&gt; zipFileEntries = zipFile.entries();\r\n   while (zipFileEntries.hasMoreElements()) {\r\n    ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\r\n    System.out.println(&quot;\\tExtracting entry: &quot; + entry);\r\n\r\n    //create destination file\r\n    File destFile = new File(destDirectory, entry.getName());\r\n\r\n    //create parent directories if needed\r\n    File parentDestFile = destFile.getParentFile();    \r\n    parentDestFile.mkdirs();    \r\n    \r\n    if (!entry.isDirectory()) {\r\n     bufIS = new BufferedInputStream(\r\n       zipFile.getInputStream(entry));\r\n     int currentByte;\r\n\r\n     // buffer for writing file\r\n     byte data[] = new byte[BUFFER_SIZE];\r\n\r\n     // write the current file to disk\r\n     FileOutputStream fOS = new FileOutputStream(destFile);\r\n     BufferedOutputStream bufOS = new BufferedOutputStream(fOS, BUFFER_SIZE);\r\n\r\n     while ((currentByte = bufIS.read(data, 0, BUFFER_SIZE)) != -1) {\r\n      bufOS.write(data, 0, currentByte);\r\n     }\r\n\r\n     // close BufferedOutputStream\r\n     bufOS.flush();\r\n     bufOS.close();\r\n\r\n     // recursively unzip files\r\n     if (entry.getName().toLowerCase().endsWith(ZIP_EXTENSION)) {\r\n      String zipFilePath = destDirectory.getPath() + File.separatorChar + entry.getName();\r\n\r\n      unzipToFile(zipFilePath, zipFilePath.substring(0, \r\n              zipFilePath.length() - ZIP_EXTENSION.length()));\r\n     }\r\n    }\r\n   }\r\n   bufIS.close();\r\n   return true;\r\n  } catch (Exception e) {\r\n   e.printStackTrace();\r\n   return false;\r\n  }\r\n } \r\n}  \r\n```\r\nI tried with the top voted answer here, and that does not recursively unzip the files, it just unzips the files of the first level.\r\n\r\nSource : [Solution which extracts files into a given directory][1]\r\n\r\nAlso, check this solution by the same person : [Solution which extracts file in memory][2]\r\n\r\n\r\n  [1]: http://javadevtips.blogspot.com/2011/10/unzip-files.html\r\n  [2]: http://javadevtips.blogspot.com/2011/10/recursively-unzip-archive-in-memory.html","title":"How to unzip files recursively in Java?","body":"<p>Here is some code, which I tested to be working quite well :</p>\n<pre><code>package com.test;\n\nimport java.io.BufferedInputStream;\nimport java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.util.Enumeration;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipFile;\n\npublic class Unzipper {  \n    private final static int BUFFER_SIZE = 2048;\n    private final static String ZIP_FILE = &quot;/home/anton/test/test.zip&quot;;\n    private final static String DESTINATION_DIRECTORY = &quot;/home/anton/test/&quot;;\n    private final static String ZIP_EXTENSION = &quot;.zip&quot;;\n \n    public static void main(String[] args) {\n     System.out.println(&quot;Trying to unzip file &quot; + ZIP_FILE); \n        Unzipper unzip = new Unzipper();  \n        if (unzip.unzipToFile(ZIP_FILE, DESTINATION_DIRECTORY)) {\n         System.out.println(&quot;Succefully unzipped to the directory &quot; \n             + DESTINATION_DIRECTORY);\n        } else {\n         System.out.println(&quot;There was some error during extracting archive to the directory &quot; \n             + DESTINATION_DIRECTORY);\n        }\n    } \n\n public boolean unzipToFile(String srcZipFileName,\n   String destDirectoryName) {\n  try {\n   BufferedInputStream bufIS = null;\n   // create the destination directory structure (if needed)\n   File destDirectory = new File(destDirectoryName);\n   destDirectory.mkdirs();\n\n   // open archive for reading\n   File file = new File(srcZipFileName);\n   ZipFile zipFile = new ZipFile(file, ZipFile.OPEN_READ);\n\n   //for every zip archive entry do\n   Enumeration&lt;? extends ZipEntry&gt; zipFileEntries = zipFile.entries();\n   while (zipFileEntries.hasMoreElements()) {\n    ZipEntry entry = (ZipEntry) zipFileEntries.nextElement();\n    System.out.println(&quot;\\tExtracting entry: &quot; + entry);\n\n    //create destination file\n    File destFile = new File(destDirectory, entry.getName());\n\n    //create parent directories if needed\n    File parentDestFile = destFile.getParentFile();    \n    parentDestFile.mkdirs();    \n    \n    if (!entry.isDirectory()) {\n     bufIS = new BufferedInputStream(\n       zipFile.getInputStream(entry));\n     int currentByte;\n\n     // buffer for writing file\n     byte data[] = new byte[BUFFER_SIZE];\n\n     // write the current file to disk\n     FileOutputStream fOS = new FileOutputStream(destFile);\n     BufferedOutputStream bufOS = new BufferedOutputStream(fOS, BUFFER_SIZE);\n\n     while ((currentByte = bufIS.read(data, 0, BUFFER_SIZE)) != -1) {\n      bufOS.write(data, 0, currentByte);\n     }\n\n     // close BufferedOutputStream\n     bufOS.flush();\n     bufOS.close();\n\n     // recursively unzip files\n     if (entry.getName().toLowerCase().endsWith(ZIP_EXTENSION)) {\n      String zipFilePath = destDirectory.getPath() + File.separatorChar + entry.getName();\n\n      unzipToFile(zipFilePath, zipFilePath.substring(0, \n              zipFilePath.length() - ZIP_EXTENSION.length()));\n     }\n    }\n   }\n   bufIS.close();\n   return true;\n  } catch (Exception e) {\n   e.printStackTrace();\n   return false;\n  }\n } \n}  \n</code></pre>\n<p>I tried with the top voted answer here, and that does not recursively unzip the files, it just unzips the files of the first level.</p>\n<p>Source : <a href=\"http://javadevtips.blogspot.com/2011/10/unzip-files.html\" rel=\"nofollow noreferrer\">Solution which extracts files into a given directory</a></p>\n<p>Also, check this solution by the same person : <a href=\"http://javadevtips.blogspot.com/2011/10/recursively-unzip-archive-in-memory.html\" rel=\"nofollow noreferrer\">Solution which extracts file in memory</a></p>\n"},{"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672350859,"creation_date":1672348586,"answer_id":74956127,"question_id":981578,"body_markdown":"No third-party dependencies, guards against zip slip, fully commented, recreates directory structure recursively, ignores empty directories, sane source code nesting, extracts to zip file&#39;s directory, and uses UTF-8. Usage:\r\n\r\n``` java\r\nPath zipFile = Path.of( &quot;/path/to/filename.zip&quot; );\r\nZip.extract( zipFile );\r\n```\r\n\r\nHere&#39;s the code:\r\n\r\n``` java\r\nimport java.io.IOException;\r\nimport java.nio.charset.StandardCharsets;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.util.zip.ZipEntry;\r\nimport java.util.zip.ZipFile;\r\n\r\nimport static java.nio.file.Files.createDirectories;\r\nimport static java.nio.file.StandardCopyOption.REPLACE_EXISTING;\r\n\r\n/**\r\n * Responsible for managing zipped archive files.\r\n */\r\npublic final class Zip {\r\n  /**\r\n   * Extracts the contents of the zip archive into its current directory. The\r\n   * contents of the archive must be {@link StandardCharsets#UTF_8}. For\r\n   * example, if the {@link Path} is &lt;code&gt;/tmp/filename.zip&lt;/code&gt;, then\r\n   * the contents of the file will be extracted into &lt;code&gt;/tmp&lt;/code&gt;.\r\n   *\r\n   * @param zipPath The {@link Path} to the zip file to extract.\r\n   * @throws IOException Could not extract the zip file, zip entries, or find\r\n   *                     the parent directory that contains the path to the\r\n   *                     zip archive.\r\n   */\r\n  public static void extract( final Path zipPath ) throws IOException {\r\n    assert !zipPath.toFile().isDirectory();\r\n\r\n    try( final var zipFile = new ZipFile( zipPath.toFile() ) ) {\r\n      iterate( zipFile );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts each entry in the zip archive file.\r\n   *\r\n   * @param zipFile The archive to extract.\r\n   * @throws IOException Could not extract the zip file entry.\r\n   */\r\n  private static void iterate( final ZipFile zipFile )\r\n    throws IOException {\r\n    // Determine the directory name where the zip archive resides. Files will\r\n    // be extracted relative to that directory.\r\n    final var path = getDirectory( zipFile );\r\n    final var entries = zipFile.entries();\r\n\r\n    while( entries.hasMoreElements() ) {\r\n      final var zipEntry = entries.nextElement();\r\n      final var zipEntryPath = path.resolve( zipEntry.getName() );\r\n\r\n      // Guard against zip slip.\r\n      if( zipEntryPath.normalize().startsWith( path ) ) {\r\n        extract( zipFile, zipEntry, zipEntryPath );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Extracts a single entry of a zip file to a given directory. This will\r\n   * create the necessary directory path if it doesn&#39;t exist. Empty\r\n   * directories are not re-created.\r\n   *\r\n   * @param zipFile      The zip archive to extract.\r\n   * @param zipEntry     An entry in the zip archive.\r\n   * @param zipEntryPath The file location to write the zip entry.\r\n   * @throws IOException Could not extract the zip file entry.\r\n   */\r\n  private static void extract(\r\n    final ZipFile zipFile,\r\n    final ZipEntry zipEntry,\r\n    final Path zipEntryPath ) throws IOException {\r\n    // Only attempt to extract files, skipping empty directories.\r\n    if( !zipEntry.isDirectory() ) {\r\n      createDirectories( zipEntryPath.getParent() );\r\n\r\n      try( final var in = zipFile.getInputStream( zipEntry ) ) {\r\n        Files.copy( in, zipEntryPath, REPLACE_EXISTING );\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Helper method to return the normalized directory where the given archive\r\n   * resides.\r\n   *\r\n   * @param zipFile The {@link ZipFile} having a path to normalize.\r\n   * @return The directory containing the given {@link ZipFile}.\r\n   * @throws IOException The zip file has no parent directory.\r\n   */\r\n  private static Path getDirectory( final ZipFile zipFile ) throws IOException {\r\n    final var zipPath = Path.of( zipFile.getName() );\r\n    final var parent = zipPath.getParent();\r\n\r\n    if( parent == null ) {\r\n      throw new IOException( zipFile.getName() + &quot; has no parent directory.&quot; );\r\n    }\r\n\r\n    return parent.normalize();\r\n  }\r\n}\r\n```\r\n\r\nNow that you have the core algorithm in place, you need to check the file extension for &quot;.zip&quot; and, if present, recursively call `Zip.extract( ... )` on that file.","title":"How to unzip files recursively in Java?","body":"<p>No third-party dependencies, guards against zip slip, fully commented, recreates directory structure recursively, ignores empty directories, sane source code nesting, extracts to zip file's directory, and uses UTF-8. Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path zipFile = Path.of( &quot;/path/to/filename.zip&quot; );\nZip.extract( zipFile );\n</code></pre>\n<p>Here's the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.charset.StandardCharsets;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.zip.ZipEntry;\nimport java.util.zip.ZipFile;\n\nimport static java.nio.file.Files.createDirectories;\nimport static java.nio.file.StandardCopyOption.REPLACE_EXISTING;\n\n/**\n * Responsible for managing zipped archive files.\n */\npublic final class Zip {\n  /**\n   * Extracts the contents of the zip archive into its current directory. The\n   * contents of the archive must be {@link StandardCharsets#UTF_8}. For\n   * example, if the {@link Path} is &lt;code&gt;/tmp/filename.zip&lt;/code&gt;, then\n   * the contents of the file will be extracted into &lt;code&gt;/tmp&lt;/code&gt;.\n   *\n   * @param zipPath The {@link Path} to the zip file to extract.\n   * @throws IOException Could not extract the zip file, zip entries, or find\n   *                     the parent directory that contains the path to the\n   *                     zip archive.\n   */\n  public static void extract( final Path zipPath ) throws IOException {\n    assert !zipPath.toFile().isDirectory();\n\n    try( final var zipFile = new ZipFile( zipPath.toFile() ) ) {\n      iterate( zipFile );\n    }\n  }\n\n  /**\n   * Extracts each entry in the zip archive file.\n   *\n   * @param zipFile The archive to extract.\n   * @throws IOException Could not extract the zip file entry.\n   */\n  private static void iterate( final ZipFile zipFile )\n    throws IOException {\n    // Determine the directory name where the zip archive resides. Files will\n    // be extracted relative to that directory.\n    final var path = getDirectory( zipFile );\n    final var entries = zipFile.entries();\n\n    while( entries.hasMoreElements() ) {\n      final var zipEntry = entries.nextElement();\n      final var zipEntryPath = path.resolve( zipEntry.getName() );\n\n      // Guard against zip slip.\n      if( zipEntryPath.normalize().startsWith( path ) ) {\n        extract( zipFile, zipEntry, zipEntryPath );\n      }\n    }\n  }\n\n  /**\n   * Extracts a single entry of a zip file to a given directory. This will\n   * create the necessary directory path if it doesn't exist. Empty\n   * directories are not re-created.\n   *\n   * @param zipFile      The zip archive to extract.\n   * @param zipEntry     An entry in the zip archive.\n   * @param zipEntryPath The file location to write the zip entry.\n   * @throws IOException Could not extract the zip file entry.\n   */\n  private static void extract(\n    final ZipFile zipFile,\n    final ZipEntry zipEntry,\n    final Path zipEntryPath ) throws IOException {\n    // Only attempt to extract files, skipping empty directories.\n    if( !zipEntry.isDirectory() ) {\n      createDirectories( zipEntryPath.getParent() );\n\n      try( final var in = zipFile.getInputStream( zipEntry ) ) {\n        Files.copy( in, zipEntryPath, REPLACE_EXISTING );\n      }\n    }\n  }\n\n  /**\n   * Helper method to return the normalized directory where the given archive\n   * resides.\n   *\n   * @param zipFile The {@link ZipFile} having a path to normalize.\n   * @return The directory containing the given {@link ZipFile}.\n   * @throws IOException The zip file has no parent directory.\n   */\n  private static Path getDirectory( final ZipFile zipFile ) throws IOException {\n    final var zipPath = Path.of( zipFile.getName() );\n    final var parent = zipPath.getParent();\n\n    if( parent == null ) {\n      throw new IOException( zipFile.getName() + &quot; has no parent directory.&quot; );\n    }\n\n    return parent.normalize();\n  }\n}\n</code></pre>\n<p>Now that you have the core algorithm in place, you need to check the file extension for &quot;.zip&quot; and, if present, recursively call <code>Zip.extract( ... )</code> on that file.</p>\n"}],"owner":{"display_name":"Anish"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66684,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"answer_count":10,"score":35,"last_activity_date":1672350859,"creation_date":1244731978,"question_id":981578,"body_markdown":"I have zip file which contains some other zip files.\r\n\r\nFor example, the mail file is `abc.zip` and it contains `xyz.zip`, `class1.java`, `class2.java`. And `xyz.zip` contains the file `class3.java` and `class4.java`.\r\n\r\nSo I need to extract the zip file using Java to a folder that should contain `class1.java`, `class2.java`, `class3.java` and `class4.java`.","title":"How to unzip files recursively in Java?","body":"<p>I have zip file which contains some other zip files.</p>\n\n<p>For example, the mail file is <code>abc.zip</code> and it contains <code>xyz.zip</code>, <code>class1.java</code>, <code>class2.java</code>. And <code>xyz.zip</code> contains the file <code>class3.java</code> and <code>class4.java</code>.</p>\n\n<p>So I need to extract the zip file using Java to a folder that should contain <code>class1.java</code>, <code>class2.java</code>, <code>class3.java</code> and <code>class4.java</code>.</p>\n"},{"tags":["java","http-status-codes","javalin"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":1,"creation_date":1672051951,"post_id":73991250,"comment_id":132212770,"body_markdown":"Please [edit] your question to include your source code as a working [mcve], which can be compiled and tested by others.","body":"Please <a href=\"https://stackoverflow.com/posts/73991250/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be compiled and tested by others."}],"answers":[{"tags":[],"owner":{"account_id":3720263,"reputation":1076,"user_id":3095500,"display_name":"utrucceh"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1672350712,"creation_date":1672217801,"answer_id":74938200,"question_id":73991250,"body_markdown":"The meaning of the 1XX range is:\r\n\r\n&gt; The server has received the request and is continuing the process\r\n\r\nSo when you respond with it, the client will await data.\r\n\r\nFrom [the documentation](https://www.eclipse.org/jetty/documentation/jetty-10/programming-guide/index.html) (`Javalin` builded on `Jetty`):\r\n\r\n&gt; 102 Processing RFC 2518 defined the 102 Processing status code that\r\n&gt; can be sent:\r\n&gt; \r\n&gt; when the server has a reasonable expectation that the request will\r\n&gt; take significant time to complete. As guidance, if a method is taking\r\n&gt; longer than 20 seconds (a reasonable, but arbitrary value) to process\r\n&gt; the server SHOULD return a 102 Processing response. — RFC 2518 section\r\n&gt; 10.1 However, a later update of RFC 2518, RFC 4918, removed the 102 Processing status code for &quot;lack of implementation&quot;.\r\n&gt; \r\n&gt; Jetty supports the 102 Processing status code. If a request is\r\n&gt; received with the Expect: 102-processing header, then a filter/servlet\r\n&gt; may send a 102 Processing response (without terminating further\r\n&gt; processing) by calling response.sendError(102).\r\n\r\n","title":"Javalin hangs when asked to give 1XX HTTP status","body":"<p>The meaning of the 1XX range is:</p>\n<blockquote>\n<p>The server has received the request and is continuing the process</p>\n</blockquote>\n<p>So when you respond with it, the client will await data.</p>\n<p>From <a href=\"https://www.eclipse.org/jetty/documentation/jetty-10/programming-guide/index.html\" rel=\"nofollow noreferrer\">the documentation</a> (<code>Javalin</code> builded on <code>Jetty</code>):</p>\n<blockquote>\n<p>102 Processing RFC 2518 defined the 102 Processing status code that\ncan be sent:</p>\n<p>when the server has a reasonable expectation that the request will\ntake significant time to complete. As guidance, if a method is taking\nlonger than 20 seconds (a reasonable, but arbitrary value) to process\nthe server SHOULD return a 102 Processing response. — RFC 2518 section\n10.1 However, a later update of RFC 2518, RFC 4918, removed the 102 Processing status code for &quot;lack of implementation&quot;.</p>\n<p>Jetty supports the 102 Processing status code. If a request is\nreceived with the Expect: 102-processing header, then a filter/servlet\nmay send a 102 Processing response (without terminating further\nprocessing) by calling response.sendError(102).</p>\n</blockquote>\n"}],"owner":{"account_id":415134,"reputation":12351,"user_id":789750,"accept_rate":87,"display_name":"Dan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74938200,"answer_count":1,"score":1,"last_activity_date":1672350712,"creation_date":1665166875,"question_id":73991250,"body_markdown":"I have a Javalin server, the relevant code called by the endpoint looks like this:\r\n\r\n    ...\r\n    if(!someFuture.isDone()){\r\n        ctx.status(102);\r\n        return;\r\n    }\r\n\r\nJavalin hangs and does not return anything* when the HTTP status is set to anything in the `1XX` range. `2XX`, `3XX` and `4XX` are returned without any problems. I haven&#39;t been able to find anything in Javalin&#39;s documentation about this, but are `1XX` status codes not allowed by Javalin? If not, why is `102` causing this problem?\r\n\r\n\r\n*eventually Postman registers a socket hang up","title":"Javalin hangs when asked to give 1XX HTTP status","body":"<p>I have a Javalin server, the relevant code called by the endpoint looks like this:</p>\n<pre><code>...\nif(!someFuture.isDone()){\n    ctx.status(102);\n    return;\n}\n</code></pre>\n<p>Javalin hangs and does not return anything* when the HTTP status is set to anything in the <code>1XX</code> range. <code>2XX</code>, <code>3XX</code> and <code>4XX</code> are returned without any problems. I haven't been able to find anything in Javalin's documentation about this, but are <code>1XX</code> status codes not allowed by Javalin? If not, why is <code>102</code> causing this problem?</p>\n<p>*eventually Postman registers a socket hang up</p>\n"},{"tags":["java","android","zooming"],"answers":[{"tags":[],"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1670287897,"creation_date":1670287897,"answer_id":74696078,"question_id":74695407,"body_markdown":"Don&#39;t try and create a new MotionEvent by providing coordinates.\r\n\r\nCopy the existing event and then transform it using a matrix.\r\n\r\n\r\ne.g. something like\r\n\r\n``` lang-java\r\n// Matrix used for drawing the view\r\nMatrix matrix = new Matrix();\r\nmatrix.setScale(scaleFactor, scaleFactor);\r\nmatrix.postTranslate(panX, panY);\r\n// used with canvas.concat(matrix);\r\n\r\n// Matrix for Touch events\r\nMatrix mappingMatrix = new Matrix();\r\n// Touch event matrix needs to be inverted\r\nmatrix.invert(mappingMatrix);\r\n\r\n// Copy the touch Event that is being mapped\r\nMotionEvent transformEvent = MotionEvent.obtain(ev);\r\n// Apply it&#39;s event mapping matrix\r\ntransformEvent.transform(mappingMatrix);\r\n\r\n```\r\n\r\n[Obtain copy documentation][1]\r\n\r\nI do something very similar in my custom viewgroup for scaling MotionEvents to children in my [FixedHeaderTableLayout][2] Library.\r\n\r\nThe MotionEvent copying is done [here][3]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/view/MotionEvent#obtain(android.view.MotionEvent)\r\n  [2]: https://github.com/Zardozz/FixedHeaderTableLayout\r\n  [3]: https://github.com/Zardozz/FixedHeaderTableLayout/blob/67100f914ab9555c210988d685cb00932f244e01/fixedheadertablelayout/src/main/java/com/github/zardozz/FixedHeaderTableLayout/FixedHeaderTableLayout.java#L563","title":"onTouchEvent for children of zoomed ViewGroup","body":"<p>Don't try and create a new MotionEvent by providing coordinates.</p>\n<p>Copy the existing event and then transform it using a matrix.</p>\n<p>e.g. something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Matrix used for drawing the view\nMatrix matrix = new Matrix();\nmatrix.setScale(scaleFactor, scaleFactor);\nmatrix.postTranslate(panX, panY);\n// used with canvas.concat(matrix);\n\n// Matrix for Touch events\nMatrix mappingMatrix = new Matrix();\n// Touch event matrix needs to be inverted\nmatrix.invert(mappingMatrix);\n\n// Copy the touch Event that is being mapped\nMotionEvent transformEvent = MotionEvent.obtain(ev);\n// Apply it's event mapping matrix\ntransformEvent.transform(mappingMatrix);\n\n</code></pre>\n<p><a href=\"https://developer.android.com/reference/android/view/MotionEvent#obtain(android.view.MotionEvent)\" rel=\"nofollow noreferrer\">Obtain copy documentation</a></p>\n<p>I do something very similar in my custom viewgroup for scaling MotionEvents to children in my <a href=\"https://github.com/Zardozz/FixedHeaderTableLayout\" rel=\"nofollow noreferrer\">FixedHeaderTableLayout</a> Library.</p>\n<p>The MotionEvent copying is done <a href=\"https://github.com/Zardozz/FixedHeaderTableLayout/blob/67100f914ab9555c210988d685cb00932f244e01/fixedheadertablelayout/src/main/java/com/github/zardozz/FixedHeaderTableLayout/FixedHeaderTableLayout.java#L563\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":7004992,"reputation":728,"user_id":5369727,"display_name":"Aorlinn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672350451,"creation_date":1670518444,"answer_id":74733714,"question_id":74695407,"body_markdown":"So for those having the same problem I post my solution (thanks again Andrew for [your help][1]).\r\n\r\n**Update**\r\n\r\nBecause I experienced input issues while testing, I decided to use `onLayout` instead of `dispatchTouchEvent` and `draw` methods to apply scale factor and translation, as the old solution did only apply it to the drawing and the input detection, but the container still declared the position of the children in the original place. This was causing espresso to execute the touches in the wrong place. With this solution the children are completely offset, so it also works with testing (and probably other things I did not consider).\r\n\r\n**Note** that both solutions only work, when you embed (an) other layout container(s) that match the parents size.\r\nIf you want to change that, you need to change the implementation of `onLayout`.\r\n\r\n    public class ZoomContainer extends ViewGroup\r\n    {\r\n    \t/**\r\n    \t * Limit the maximum/minimum scrolling to prevent scrolling the container,\r\n    \t * so that no more children are visible.\r\n    \t * The value is relative to the size of the container (so 0.1 means 10% of the size of this container)\r\n    \t */\r\n    \tprotected float mTranslationBounds = 0.1f;\r\n    \t/**\r\n    \t * The translation to be applied to the container\r\n    \t */\r\n    \tprotected PointF mTranslation;\r\n    \t/**\r\n    \t * The the current zoom factor.\r\n    \t * It is initialized with a value smaller than 1, to append some empty space around the view.\r\n    \t */\r\n    \tprotected float mScaleFactor = 0.95f;\r\n    \t/**\r\n    \t * The minimum scale factor to prevent endless zooming\r\n    \t */\r\n    \tprotected float mScaleFactorMin = 0.8f;\r\n    \t/**\r\n    \t * The maximum scale factor to prevent endless zooming.\r\n    \t */\r\n    \tprotected float mScaleFactorMax = 5.0f;\r\n    \t/**\r\n    \t * Used to indicate, whether or not this is the first touch event, which has no differences yet.\r\n    \t */\r\n    \tprotected boolean mIsTouchStarted = false;\r\n    \t/**\r\n    \t * Distance of the fingers from the last touch event\r\n    \t */\r\n    \tprotected float mStartDistance = 0;\r\n    \t/**\r\n    \t * Center of the two fingers from the last touch event.\r\n    \t */\r\n    \tprotected PointF mStartTouchPoint = new PointF(0, 0);\r\n    \r\n    \tpublic ZoomContainer(Context context)\r\n    \t{\r\n    \t\tsuper(context);\r\n    \t}\r\n    \r\n    \tpublic ZoomContainer(Context context, @Nullable AttributeSet attrs)\r\n    \t{\r\n    \t\tsuper(context, attrs);\r\n    \t}\r\n    \r\n    \tpublic ZoomContainer(Context context, @Nullable AttributeSet attrs, int defStyleAttr)\r\n    \t{\r\n    \t\tsuper(context, attrs, defStyleAttr);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Cancel all child touch events, if there is more than one finger down.\r\n    \t */\r\n    \t@Override\r\n    \tpublic boolean onInterceptTouchEvent(MotionEvent ev)\r\n    \t{\r\n    \t\tboolean intercept = ev.getPointerCount() &gt; 1;\r\n    \t\tif (intercept)\r\n    \t\t{\r\n    \t\t\tLog.d(&quot;TableView&quot;, &quot;Intercepted&quot;);\r\n    \t\t\tmIsTouchStarted = false;\r\n    \t\t}\r\n    \t\treturn intercept;\r\n    \t}\r\n    \r\n    \tprotected void initializeTranslation()\r\n    \t{\r\n    \t\tif (mTranslation == null)\r\n    \t\t{\r\n    \t\t\tmTranslation = new PointF(getWidth() * (1 - mScaleFactor) / 2f,\r\n    \t\t\t\t\tgetHeight() * (1 - mScaleFactor) / 2f);\r\n    \t\t\tLog.d(&quot;TableView&quot;, &quot;Translation: &quot; + mTranslation);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Calculate the new zoom and scroll respecting the difference to the last touch event.\r\n    \t */\r\n    \t@Override\r\n    \tpublic boolean onTouchEvent(MotionEvent event)\r\n    \t{\r\n    \t\tswitch (event.getAction())\r\n    \t\t{\r\n    \t\t\tcase MotionEvent.ACTION_CANCEL:\r\n    \t\t\tcase MotionEvent.ACTION_UP:\r\n    \t\t\tcase MotionEvent.ACTION_POINTER_UP:\r\n    \t\t\t\tmIsTouchStarted = false;\r\n    \t\t\t\treturn true;\r\n    \t\t}\r\n    \t\tif (event.getPointerCount() &lt;= 1)\r\n    \t\t{\r\n    \t\t\tmIsTouchStarted = false;\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\tfloat[] currentPointArray = new float[]{event.getX(0),\r\n    \t\t\t\tevent.getY(0),\r\n    \t\t\t\tevent.getX(1),\r\n    \t\t\t\tevent.getY(1)};\r\n    \t\tfloat currentFingerDistance = getDistance(currentPointArray[0],\r\n    \t\t\t\tcurrentPointArray[1],\r\n    \t\t\t\tcurrentPointArray[2],\r\n    \t\t\t\tcurrentPointArray[3]);\r\n    \t\t// Read the current center of the fingers to determine the the new translation\r\n    \t\tPointF currentPoint = getPoint(currentPointArray[0],\r\n    \t\t\t\tcurrentPointArray[1],\r\n    \t\t\t\tcurrentPointArray[2],\r\n    \t\t\t\tcurrentPointArray[3]);\r\n    \t\tif (mIsTouchStarted)\r\n    \t\t{\r\n    \t\t\t// 1 / oldScaleFactor - 1 / newScaleFactor is required to respect the relative translation,\r\n    \t\t\t// when zooming (translation is always from the upper left corner,\r\n    \t\t\t// but zooming should be performed centered to the fingers)\r\n    \t\t\tfloat scaleFactorDifference = 1f / mScaleFactor;\r\n    \t\t\tmScaleFactor = getBoundScaleFactor(mScaleFactor + (currentFingerDistance / mStartDistance - 1));\r\n    \t\t\tscaleFactorDifference -= 1f / mScaleFactor;\r\n    \t\t\t// Add the finger scroll since the last event to the current translation.\r\n    \t\t\tPointF newTranslation = new PointF(mTranslation.x + (currentPoint.x - mStartTouchPoint.x) / mScaleFactor,\r\n    \t\t\t\t\tmTranslation.y + (currentPoint.y - mStartTouchPoint.y) / mScaleFactor);\r\n    \t\t\t// Add the current point multiplied with the scale difference to make sure,\r\n    \t\t\t// zooming is always done from the center of the fingers. Otherwise zooming would always be\r\n    \t\t\t// applied from the upper left edge of the screen.\r\n    \t\t\tnewTranslation.x -= currentPoint.x * scaleFactorDifference;\r\n    \t\t\tnewTranslation.y -= currentPoint.y * scaleFactorDifference;\r\n    \t\t\tmTranslation = getBoundTranslation(newTranslation);\r\n    \t\t}\r\n    \t\tmStartTouchPoint = currentPoint;\r\n    \t\tmStartDistance = currentFingerDistance;\r\n    \t\tmIsTouchStarted = true;\r\n    \t\trequestLayout();\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tprotected float getBoundValue(float value, float min, float max)\r\n    \t{\r\n    \t\treturn Math.min(Math.max(value, min), max);\r\n    \t}\r\n    \r\n    \tprotected PointF getBoundTranslation(PointF translation)\r\n    \t{\r\n    \t\ttranslation.x = getBoundValue(translation.x,\r\n    \t\t\t\t-(getWidth() * (mScaleFactor - 1) + getWidth() * mTranslationBounds),\r\n    \t\t\t\tgetWidth() * mTranslationBounds);\r\n    \t\ttranslation.y = getBoundValue(translation.y,\r\n    \t\t\t\t-(getHeight() * (mScaleFactor - 1) + getHeight() * mTranslationBounds),\r\n    \t\t\t\tgetHeight() * mTranslationBounds);\r\n    \t\treturn translation;\r\n    \t}\r\n    \r\n    \tprotected float getBoundScaleFactor(float scaleFactor)\r\n    \t{\r\n    \t\treturn getBoundValue(scaleFactor, mScaleFactorMin, mScaleFactorMax);\r\n    \t}\r\n    \r\n    \tprotected PointF getPoint(float x1, float y1, float x2, float y2)\r\n    \t{\r\n    \t\treturn new PointF(getCenter(x1, x2), getCenter(y1, y2));\r\n    \t}\r\n    \r\n    \tprotected float getCenter(float position1, float position2)\r\n    \t{\r\n    \t\treturn (position1 + position2) / 2f;\r\n    \t}\r\n    \r\n    \tprotected float getDistance(float x1, float y1, float x2, float y2)\r\n    \t{\r\n    \t\tfloat distanceX = Math.abs(x1 - x2);\r\n    \t\tfloat distanceY = Math.abs(y1 - y2);\r\n    \t\treturn (float) Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void onLayout(boolean changed, int l, int t, int r, int b)\r\n    \t{\r\n    \t\tfloat width = (r - l);\r\n    \t\tfloat height = (b - t);\r\n    \t\tif (width &lt;= 0 || height &lt;= 0)\r\n    \t\t{\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\tinitializeTranslation();\r\n    \t\tfinal int childCount = getChildCount();\r\n    \t\tl = (int) (mTranslation.x * mScaleFactor);\r\n    \t\tr = (int) ((width + mTranslation.x) * mScaleFactor);\r\n    \t\tt = (int) (mTranslation.y * mScaleFactor);\r\n    \t\tb = (int) ((height + mTranslation.y) * mScaleFactor);\r\n    \r\n    \t\tfor (int i = 0; i &lt; childCount; i++)\r\n    \t\t{\r\n    \t\t\tView child = getChildAt(i);\r\n    \t\t\tchild.layout(l, t, r, b);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n**Old solution**\r\n\r\nUsing `dispatchTouchEvent` and `draw` methods to apply scale factor and tranlation:\r\n\r\n    public class ZoomContainer extends ViewGroup\r\n    {\r\n    \t/**\r\n    \t * Limit the maximum/minimum scrolling to prevent scrolling the container, \r\n    \t * so that no more children are visible. \r\n    \t * The value is relative to the size of the container (so 0.1 means 10% of the size of this container)\r\n    \t */\r\n    \tprotected float mTranslationBounds = 0.1f;\r\n    \t/**\r\n    \t * The translation to be applyed to the container\r\n    \t */\r\n    \tprotected PointF mTranslation;\r\n    \t/**\r\n    \t * The the current zoom factor. You might initialze it to a value smaller than 1, if you want to add some padding in the beginning.\r\n    \t */\r\n    \tprotected float mScaleFactor = 1f;\r\n    \t/**\r\n    \t * The minimum scale factor to prevent endless zooming\r\n    \t */\r\n    \tprotected float mScaleFactorMin = 0.8f;\r\n    \t/**\r\n    \t * The maximum scale factor to prevent endless zooming.\r\n    \t */\r\n    \tprotected float mScaleFactorMax = 4f;\r\n    \t/**\r\n    \t * Used to indicate, whether or not this is the first touch event, which has no differences yet.\r\n    \t */\r\n    \tprotected boolean mIsTouchStarted = false;\r\n    \t/**\r\n    \t* Distance of the fingers from the last touch event\r\n    \t*/\r\n    \tprotected float mStartDistance = 0;\r\n    \t/**\r\n    \t * Center of the two fingers from the last touch event.\r\n    \t */\r\n    \tprotected PointF mStartTouchPoint = new PointF(0, 0);\r\n    \r\n    \tpublic ZoomContainer(Context context)\r\n    \t{\r\n    \t\tsuper(context);\r\n    \t\tsetWillNotDraw(false);\r\n    \t}\r\n    \r\n    \tpublic ZoomContainer(Context context, @Nullable AttributeSet attrs)\r\n    \t{\r\n    \t\tsuper(context, attrs);\r\n    \t\tsetWillNotDraw(false);\r\n    \t}\r\n    \r\n    \tpublic ZoomContainer(Context context, @Nullable AttributeSet attrs, int defStyleAttr)\r\n    \t{\r\n    \t\tsuper(context, attrs, defStyleAttr);\r\n    \t\tsetWillNotDraw(false);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void draw(Canvas canvas)\r\n    \t{\r\n    \t\tcanvas.save();\r\n    \t\tcanvas.concat(createDrawMatrix());\r\n    \t\tsuper.draw(canvas);\r\n    \t\tcanvas.restore();\r\n    \t}\r\n    \r\n    \t/**\r\n    \t* Cancel all child touch events, if there is more than one finger down.\r\n    \t*/\r\n    \t@Override\r\n    \tpublic boolean onInterceptTouchEvent(MotionEvent ev)\r\n    \t{\r\n    \t\tboolean intercept = ev.getPointerCount() &gt; 1;\r\n    \t\tif (intercept)\r\n    \t\t{\r\n    \t\t\tmIsTouchStarted = false;\r\n    \t\t}\r\n    \t\treturn intercept;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Creates the transformation matrix for drawing and converting touch coordinates\r\n    \t */\r\n    \tprotected Matrix createDrawMatrix()\r\n    \t{\r\n    \t\t// Make sure children are centered, if initial scroll factor is not 1.\r\n    \t\tif (mTranslation == null)\r\n    \t\t{\r\n    \t\t\tmTranslation = new PointF(getWidth() * (1 - mScaleFactor) / 2f,\r\n    \t\t\t\t\tgetHeight() * (1 - mScaleFactor) / 2f);\r\n    \t\t}\r\n    \t\t// Matrix used for drawing the view\r\n    \t\tMatrix matrix = new Matrix();\r\n    \t\tmatrix.setScale(mScaleFactor, mScaleFactor);\r\n    \t\tmatrix.postTranslate(mTranslation.x, mTranslation.y);\r\n    \t\treturn matrix;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Transform the touch coordinates according to the current zoom and scroll,\r\n    \t * for children to get the appropriate ones.\r\n    \t */\r\n    \t@Override\r\n    \tpublic boolean dispatchTouchEvent(MotionEvent ev)\r\n    \t{\r\n    \t\t// Matrix for Touch events\r\n    \t\tMatrix mappingMatrix = new Matrix();\r\n    \t\t// Touch event matrix needs to be inverted\r\n    \t\tcreateDrawMatrix().invert(mappingMatrix);\r\n    \r\n    \t\t// Copy the touch Event that is being mapped\r\n    \t\tMotionEvent transformEvent = MotionEvent.obtain(ev);\r\n    \t\t// Apply it&#39;s event mapping matrix\r\n    \t\ttransformEvent.transform(mappingMatrix);\r\n    \r\n    \t\tboolean handled = super.dispatchTouchEvent(transformEvent);\r\n    \t\ttransformEvent.recycle();\r\n    \t\treturn handled;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Calculate the new zoom and scroll respecting the difference to the last touch event.\r\n    \t */\r\n    \t@Override\r\n    \tpublic boolean onTouchEvent(MotionEvent event)\r\n    \t{\r\n    \t\tswitch (event.getAction())\r\n    \t\t{\r\n    \t\t\tcase MotionEvent.ACTION_CANCEL:\r\n    \t\t\tcase MotionEvent.ACTION_UP:\r\n    \t\t\tcase MotionEvent.ACTION_POINTER_UP:\r\n    \t\t\t\tmIsTouchStarted = false;\r\n    \t\t\t\treturn true;\r\n    \t\t}\r\n    \t\t// \r\n    \t\tif (event.getPointerCount() &lt;= 1)\r\n    \t\t{\r\n    \t\t\tmIsTouchStarted = false;\r\n    \t\t\treturn true;\r\n    \t\t}\r\n    \t\tfloat[] currentPointArray = new float[]{event.getX(0),\r\n    \t\t\t\tevent.getY(0),\r\n    \t\t\t\tevent.getX(1),\r\n    \t\t\t\tevent.getY(1)};\r\n    \t\tfloat currentDistance = mScaleFactor * getDistance(currentPointArray[0],\r\n    \t\t\t\tcurrentPointArray[1],\r\n    \t\t\t\tcurrentPointArray[2],\r\n    \t\t\t\tcurrentPointArray[3]);\r\n    \t\tMatrix transformation = createDrawMatrix();\r\n    \t\ttransformation.mapPoints(currentPointArray);\r\n    \t\tPointF currentPoint = getPoint(currentPointArray[0],\r\n    \t\t\t\tcurrentPointArray[1],\r\n    \t\t\t\tcurrentPointArray[2],\r\n    \t\t\t\tcurrentPointArray[3]);\r\n    \t\tif (mIsTouchStarted)\r\n    \t\t{\r\n    \t\t\tfloat scaleFactorDifference = mScaleFactor;\r\n    \t\t\tmScaleFactor = getBoundScaleFactor(mScaleFactor + (currentDistance / mStartDistance - 1));\r\n    \t\t\tscaleFactorDifference -= mScaleFactor;\r\n    \t\t\tPointF newTranslation = new PointF(mTranslation.x + currentPoint.x - mStartTouchPoint.x,\r\n    \t\t\t\t\tmTranslation.y + currentPoint.y - mStartTouchPoint.y);\r\n    \t\t\tnewTranslation.x += currentPoint.x * scaleFactorDifference;\r\n    \t\t\tnewTranslation.y += currentPoint.y * scaleFactorDifference;\r\n    \t\t\tmTranslation = getBoundTranslation(newTranslation);\r\n    \t\t}\r\n    \t\tmStartTouchPoint = currentPoint;\r\n    \t\tmStartDistance = currentDistance;\r\n    \t\tmIsTouchStarted = true;\r\n    \t\tinvalidate();\r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tprotected float getBoundValue(float value, float min, float max)\r\n    \t{\r\n    \t\treturn Math.min(Math.max(value, min), max);\r\n    \t}\r\n    \r\n    \tprotected PointF getBoundTranslation(PointF translation)\r\n    \t{\r\n    \t\ttranslation.x = getBoundValue(translation.x,\r\n    \t\t\t\t-(getWidth() * (mScaleFactor - 1) + getWidth() * mTranslationBounds),\r\n    \t\t\t\tgetWidth() * mTranslationBounds);\r\n    \t\ttranslation.y = getBoundValue(translation.y,\r\n    \t\t\t\t-(getHeight() * (mScaleFactor - 1) + getHeight() * mTranslationBounds),\r\n    \t\t\t\tgetHeight() * mTranslationBounds);\r\n    \t\treturn translation;\r\n    \t}\r\n    \r\n    \tprotected float getBoundScaleFactor(float scaleFactor)\r\n    \t{\r\n    \t\treturn getBoundValue(scaleFactor, mScaleFactorMin, mScaleFactorMax);\r\n    \t}\r\n    \r\n    \tprotected PointF getPoint(float x1, float y1, float x2, float y2)\r\n    \t{\r\n    \t\treturn new PointF(getCenter(x1, x2), getCenter(y1, y2));\r\n    \t}\r\n    \r\n    \tprotected float getCenter(float position1, float position2)\r\n    \t{\r\n    \t\treturn (position1 + position2) / 2f;\r\n    \t}\r\n    \r\n    \tprotected float getDistance(float x1, float y1, float x2, float y2)\r\n    \t{\r\n    \t\tfloat distanceX = Math.abs(x1 - x2);\r\n    \t\tfloat distanceY = Math.abs(y1 - y2);\r\n    \t\treturn (float) Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void onLayout(boolean changed, int l, int t, int r, int b)\r\n    \t{\r\n    \t\tfinal int childCount = getChildCount();\r\n    \t\tfor (int i = 0; i &lt; childCount; i++)\r\n    \t\t{\r\n    \t\t\tView child = getChildAt(i);\r\n    \t\t\tchild.layout(0, 0, r - l, b - t);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74696078/5369727","title":"onTouchEvent for children of zoomed ViewGroup","body":"<p>So for those having the same problem I post my solution (thanks again Andrew for <a href=\"https://stackoverflow.com/a/74696078/5369727\">your help</a>).</p>\n<p><strong>Update</strong></p>\n<p>Because I experienced input issues while testing, I decided to use <code>onLayout</code> instead of <code>dispatchTouchEvent</code> and <code>draw</code> methods to apply scale factor and translation, as the old solution did only apply it to the drawing and the input detection, but the container still declared the position of the children in the original place. This was causing espresso to execute the touches in the wrong place. With this solution the children are completely offset, so it also works with testing (and probably other things I did not consider).</p>\n<p><strong>Note</strong> that both solutions only work, when you embed (an) other layout container(s) that match the parents size.\nIf you want to change that, you need to change the implementation of <code>onLayout</code>.</p>\n<pre><code>public class ZoomContainer extends ViewGroup\n{\n    /**\n     * Limit the maximum/minimum scrolling to prevent scrolling the container,\n     * so that no more children are visible.\n     * The value is relative to the size of the container (so 0.1 means 10% of the size of this container)\n     */\n    protected float mTranslationBounds = 0.1f;\n    /**\n     * The translation to be applied to the container\n     */\n    protected PointF mTranslation;\n    /**\n     * The the current zoom factor.\n     * It is initialized with a value smaller than 1, to append some empty space around the view.\n     */\n    protected float mScaleFactor = 0.95f;\n    /**\n     * The minimum scale factor to prevent endless zooming\n     */\n    protected float mScaleFactorMin = 0.8f;\n    /**\n     * The maximum scale factor to prevent endless zooming.\n     */\n    protected float mScaleFactorMax = 5.0f;\n    /**\n     * Used to indicate, whether or not this is the first touch event, which has no differences yet.\n     */\n    protected boolean mIsTouchStarted = false;\n    /**\n     * Distance of the fingers from the last touch event\n     */\n    protected float mStartDistance = 0;\n    /**\n     * Center of the two fingers from the last touch event.\n     */\n    protected PointF mStartTouchPoint = new PointF(0, 0);\n\n    public ZoomContainer(Context context)\n    {\n        super(context);\n    }\n\n    public ZoomContainer(Context context, @Nullable AttributeSet attrs)\n    {\n        super(context, attrs);\n    }\n\n    public ZoomContainer(Context context, @Nullable AttributeSet attrs, int defStyleAttr)\n    {\n        super(context, attrs, defStyleAttr);\n    }\n\n    /**\n     * Cancel all child touch events, if there is more than one finger down.\n     */\n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev)\n    {\n        boolean intercept = ev.getPointerCount() &gt; 1;\n        if (intercept)\n        {\n            Log.d(&quot;TableView&quot;, &quot;Intercepted&quot;);\n            mIsTouchStarted = false;\n        }\n        return intercept;\n    }\n\n    protected void initializeTranslation()\n    {\n        if (mTranslation == null)\n        {\n            mTranslation = new PointF(getWidth() * (1 - mScaleFactor) / 2f,\n                    getHeight() * (1 - mScaleFactor) / 2f);\n            Log.d(&quot;TableView&quot;, &quot;Translation: &quot; + mTranslation);\n        }\n    }\n\n    /**\n     * Calculate the new zoom and scroll respecting the difference to the last touch event.\n     */\n    @Override\n    public boolean onTouchEvent(MotionEvent event)\n    {\n        switch (event.getAction())\n        {\n            case MotionEvent.ACTION_CANCEL:\n            case MotionEvent.ACTION_UP:\n            case MotionEvent.ACTION_POINTER_UP:\n                mIsTouchStarted = false;\n                return true;\n        }\n        if (event.getPointerCount() &lt;= 1)\n        {\n            mIsTouchStarted = false;\n            return true;\n        }\n        float[] currentPointArray = new float[]{event.getX(0),\n                event.getY(0),\n                event.getX(1),\n                event.getY(1)};\n        float currentFingerDistance = getDistance(currentPointArray[0],\n                currentPointArray[1],\n                currentPointArray[2],\n                currentPointArray[3]);\n        // Read the current center of the fingers to determine the the new translation\n        PointF currentPoint = getPoint(currentPointArray[0],\n                currentPointArray[1],\n                currentPointArray[2],\n                currentPointArray[3]);\n        if (mIsTouchStarted)\n        {\n            // 1 / oldScaleFactor - 1 / newScaleFactor is required to respect the relative translation,\n            // when zooming (translation is always from the upper left corner,\n            // but zooming should be performed centered to the fingers)\n            float scaleFactorDifference = 1f / mScaleFactor;\n            mScaleFactor = getBoundScaleFactor(mScaleFactor + (currentFingerDistance / mStartDistance - 1));\n            scaleFactorDifference -= 1f / mScaleFactor;\n            // Add the finger scroll since the last event to the current translation.\n            PointF newTranslation = new PointF(mTranslation.x + (currentPoint.x - mStartTouchPoint.x) / mScaleFactor,\n                    mTranslation.y + (currentPoint.y - mStartTouchPoint.y) / mScaleFactor);\n            // Add the current point multiplied with the scale difference to make sure,\n            // zooming is always done from the center of the fingers. Otherwise zooming would always be\n            // applied from the upper left edge of the screen.\n            newTranslation.x -= currentPoint.x * scaleFactorDifference;\n            newTranslation.y -= currentPoint.y * scaleFactorDifference;\n            mTranslation = getBoundTranslation(newTranslation);\n        }\n        mStartTouchPoint = currentPoint;\n        mStartDistance = currentFingerDistance;\n        mIsTouchStarted = true;\n        requestLayout();\n        return true;\n    }\n\n    protected float getBoundValue(float value, float min, float max)\n    {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    protected PointF getBoundTranslation(PointF translation)\n    {\n        translation.x = getBoundValue(translation.x,\n                -(getWidth() * (mScaleFactor - 1) + getWidth() * mTranslationBounds),\n                getWidth() * mTranslationBounds);\n        translation.y = getBoundValue(translation.y,\n                -(getHeight() * (mScaleFactor - 1) + getHeight() * mTranslationBounds),\n                getHeight() * mTranslationBounds);\n        return translation;\n    }\n\n    protected float getBoundScaleFactor(float scaleFactor)\n    {\n        return getBoundValue(scaleFactor, mScaleFactorMin, mScaleFactorMax);\n    }\n\n    protected PointF getPoint(float x1, float y1, float x2, float y2)\n    {\n        return new PointF(getCenter(x1, x2), getCenter(y1, y2));\n    }\n\n    protected float getCenter(float position1, float position2)\n    {\n        return (position1 + position2) / 2f;\n    }\n\n    protected float getDistance(float x1, float y1, float x2, float y2)\n    {\n        float distanceX = Math.abs(x1 - x2);\n        float distanceY = Math.abs(y1 - y2);\n        return (float) Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int l, int t, int r, int b)\n    {\n        float width = (r - l);\n        float height = (b - t);\n        if (width &lt;= 0 || height &lt;= 0)\n        {\n            return;\n        }\n        initializeTranslation();\n        final int childCount = getChildCount();\n        l = (int) (mTranslation.x * mScaleFactor);\n        r = (int) ((width + mTranslation.x) * mScaleFactor);\n        t = (int) (mTranslation.y * mScaleFactor);\n        b = (int) ((height + mTranslation.y) * mScaleFactor);\n\n        for (int i = 0; i &lt; childCount; i++)\n        {\n            View child = getChildAt(i);\n            child.layout(l, t, r, b);\n        }\n    }\n}\n</code></pre>\n<p><strong>Old solution</strong></p>\n<p>Using <code>dispatchTouchEvent</code> and <code>draw</code> methods to apply scale factor and tranlation:</p>\n<pre><code>public class ZoomContainer extends ViewGroup\n{\n    /**\n     * Limit the maximum/minimum scrolling to prevent scrolling the container, \n     * so that no more children are visible. \n     * The value is relative to the size of the container (so 0.1 means 10% of the size of this container)\n     */\n    protected float mTranslationBounds = 0.1f;\n    /**\n     * The translation to be applyed to the container\n     */\n    protected PointF mTranslation;\n    /**\n     * The the current zoom factor. You might initialze it to a value smaller than 1, if you want to add some padding in the beginning.\n     */\n    protected float mScaleFactor = 1f;\n    /**\n     * The minimum scale factor to prevent endless zooming\n     */\n    protected float mScaleFactorMin = 0.8f;\n    /**\n     * The maximum scale factor to prevent endless zooming.\n     */\n    protected float mScaleFactorMax = 4f;\n    /**\n     * Used to indicate, whether or not this is the first touch event, which has no differences yet.\n     */\n    protected boolean mIsTouchStarted = false;\n    /**\n    * Distance of the fingers from the last touch event\n    */\n    protected float mStartDistance = 0;\n    /**\n     * Center of the two fingers from the last touch event.\n     */\n    protected PointF mStartTouchPoint = new PointF(0, 0);\n\n    public ZoomContainer(Context context)\n    {\n        super(context);\n        setWillNotDraw(false);\n    }\n\n    public ZoomContainer(Context context, @Nullable AttributeSet attrs)\n    {\n        super(context, attrs);\n        setWillNotDraw(false);\n    }\n\n    public ZoomContainer(Context context, @Nullable AttributeSet attrs, int defStyleAttr)\n    {\n        super(context, attrs, defStyleAttr);\n        setWillNotDraw(false);\n    }\n\n    @Override\n    public void draw(Canvas canvas)\n    {\n        canvas.save();\n        canvas.concat(createDrawMatrix());\n        super.draw(canvas);\n        canvas.restore();\n    }\n\n    /**\n    * Cancel all child touch events, if there is more than one finger down.\n    */\n    @Override\n    public boolean onInterceptTouchEvent(MotionEvent ev)\n    {\n        boolean intercept = ev.getPointerCount() &gt; 1;\n        if (intercept)\n        {\n            mIsTouchStarted = false;\n        }\n        return intercept;\n    }\n\n    /**\n     * Creates the transformation matrix for drawing and converting touch coordinates\n     */\n    protected Matrix createDrawMatrix()\n    {\n        // Make sure children are centered, if initial scroll factor is not 1.\n        if (mTranslation == null)\n        {\n            mTranslation = new PointF(getWidth() * (1 - mScaleFactor) / 2f,\n                    getHeight() * (1 - mScaleFactor) / 2f);\n        }\n        // Matrix used for drawing the view\n        Matrix matrix = new Matrix();\n        matrix.setScale(mScaleFactor, mScaleFactor);\n        matrix.postTranslate(mTranslation.x, mTranslation.y);\n        return matrix;\n    }\n\n    /**\n     * Transform the touch coordinates according to the current zoom and scroll,\n     * for children to get the appropriate ones.\n     */\n    @Override\n    public boolean dispatchTouchEvent(MotionEvent ev)\n    {\n        // Matrix for Touch events\n        Matrix mappingMatrix = new Matrix();\n        // Touch event matrix needs to be inverted\n        createDrawMatrix().invert(mappingMatrix);\n\n        // Copy the touch Event that is being mapped\n        MotionEvent transformEvent = MotionEvent.obtain(ev);\n        // Apply it's event mapping matrix\n        transformEvent.transform(mappingMatrix);\n\n        boolean handled = super.dispatchTouchEvent(transformEvent);\n        transformEvent.recycle();\n        return handled;\n    }\n\n    /**\n     * Calculate the new zoom and scroll respecting the difference to the last touch event.\n     */\n    @Override\n    public boolean onTouchEvent(MotionEvent event)\n    {\n        switch (event.getAction())\n        {\n            case MotionEvent.ACTION_CANCEL:\n            case MotionEvent.ACTION_UP:\n            case MotionEvent.ACTION_POINTER_UP:\n                mIsTouchStarted = false;\n                return true;\n        }\n        // \n        if (event.getPointerCount() &lt;= 1)\n        {\n            mIsTouchStarted = false;\n            return true;\n        }\n        float[] currentPointArray = new float[]{event.getX(0),\n                event.getY(0),\n                event.getX(1),\n                event.getY(1)};\n        float currentDistance = mScaleFactor * getDistance(currentPointArray[0],\n                currentPointArray[1],\n                currentPointArray[2],\n                currentPointArray[3]);\n        Matrix transformation = createDrawMatrix();\n        transformation.mapPoints(currentPointArray);\n        PointF currentPoint = getPoint(currentPointArray[0],\n                currentPointArray[1],\n                currentPointArray[2],\n                currentPointArray[3]);\n        if (mIsTouchStarted)\n        {\n            float scaleFactorDifference = mScaleFactor;\n            mScaleFactor = getBoundScaleFactor(mScaleFactor + (currentDistance / mStartDistance - 1));\n            scaleFactorDifference -= mScaleFactor;\n            PointF newTranslation = new PointF(mTranslation.x + currentPoint.x - mStartTouchPoint.x,\n                    mTranslation.y + currentPoint.y - mStartTouchPoint.y);\n            newTranslation.x += currentPoint.x * scaleFactorDifference;\n            newTranslation.y += currentPoint.y * scaleFactorDifference;\n            mTranslation = getBoundTranslation(newTranslation);\n        }\n        mStartTouchPoint = currentPoint;\n        mStartDistance = currentDistance;\n        mIsTouchStarted = true;\n        invalidate();\n        return true;\n    }\n\n    protected float getBoundValue(float value, float min, float max)\n    {\n        return Math.min(Math.max(value, min), max);\n    }\n\n    protected PointF getBoundTranslation(PointF translation)\n    {\n        translation.x = getBoundValue(translation.x,\n                -(getWidth() * (mScaleFactor - 1) + getWidth() * mTranslationBounds),\n                getWidth() * mTranslationBounds);\n        translation.y = getBoundValue(translation.y,\n                -(getHeight() * (mScaleFactor - 1) + getHeight() * mTranslationBounds),\n                getHeight() * mTranslationBounds);\n        return translation;\n    }\n\n    protected float getBoundScaleFactor(float scaleFactor)\n    {\n        return getBoundValue(scaleFactor, mScaleFactorMin, mScaleFactorMax);\n    }\n\n    protected PointF getPoint(float x1, float y1, float x2, float y2)\n    {\n        return new PointF(getCenter(x1, x2), getCenter(y1, y2));\n    }\n\n    protected float getCenter(float position1, float position2)\n    {\n        return (position1 + position2) / 2f;\n    }\n\n    protected float getDistance(float x1, float y1, float x2, float y2)\n    {\n        float distanceX = Math.abs(x1 - x2);\n        float distanceY = Math.abs(y1 - y2);\n        return (float) Math.sqrt(Math.pow(distanceX, 2) + Math.pow(distanceY, 2));\n    }\n\n    @Override\n    protected void onLayout(boolean changed, int l, int t, int r, int b)\n    {\n        final int childCount = getChildCount();\n        for (int i = 0; i &lt; childCount; i++)\n        {\n            View child = getChildAt(i);\n            child.layout(0, 0, r - l, b - t);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7004992,"reputation":728,"user_id":5369727,"display_name":"Aorlinn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74733714,"answer_count":2,"score":0,"last_activity_date":1672350451,"creation_date":1670281165,"question_id":74695407,"body_markdown":"For my [game Hashi][1] I want to build a custom ViewGroup that allows zooming and scrolling (both axes), containing children that are affected on touches as well.\r\n\r\n[![This is how the ViewGroups looks][2]][2]\r\n\r\nI have set `setWillNotDraw(false)` and overwritten `draw(Canvas)` to use `canvas.scale(..)` and `canvas.translate(..)`:\r\n\r\n    @Override\r\n    public void draw(Canvas canvas)\r\n    {\r\n    \tcanvas.save();\r\n    \tcanvas.scale(mScaleFactor, mScaleFactor, mScaleCenter.x, mScaleCenter.y);\r\n    \tcanvas.translate(mTranslation.x * mScaleFactor, mTranslation.y * mScaleFactor);\r\n    \tsuper.draw(canvas);\r\n    \tcanvas.restore();\r\n    }\r\n\r\nBut then I realized, that the `MotionEvent` parameter of the `onTouchEvent` for children is offset by the value I set with the translation (so they are detected, as if the container did not have any zoom or offset).\r\n\r\nI tried to overwrite `dispatchTouchEvent` in the parent `ViewGroup` and adjust the coordinates of the event. But `MotionEvent` is final and can only be instantiated via `MotionEvent.obtain(..)`. And there is no version of `obtain` to accept multiple coordinates, when there is more than one finger down.\r\nIs there any way to modify the MotionEvent parameters, so I don&#39;t need to do it in the `onTouchEvent` methods of the child views (that would be much more complex), or even a better approach to implement zoom and scroll?\r\n\r\nI implemented my own zoom container because I need to control the touches strictly (children also listen to swipe gestures, but need to be intercepted, when a second finger is down).\r\n\r\n\r\n  [1]: https://play.google.com/store/apps/details?id=ch.aorlinn.bridges\r\n  [2]: https://i.stack.imgur.com/VC0Jz.png","title":"onTouchEvent for children of zoomed ViewGroup","body":"<p>For my <a href=\"https://play.google.com/store/apps/details?id=ch.aorlinn.bridges\" rel=\"nofollow noreferrer\">game Hashi</a> I want to build a custom ViewGroup that allows zooming and scrolling (both axes), containing children that are affected on touches as well.</p>\n<p><a href=\"https://i.stack.imgur.com/VC0Jz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VC0Jz.png\" alt=\"This is how the ViewGroups looks\" /></a></p>\n<p>I have set <code>setWillNotDraw(false)</code> and overwritten <code>draw(Canvas)</code> to use <code>canvas.scale(..)</code> and <code>canvas.translate(..)</code>:</p>\n<pre><code>@Override\npublic void draw(Canvas canvas)\n{\n    canvas.save();\n    canvas.scale(mScaleFactor, mScaleFactor, mScaleCenter.x, mScaleCenter.y);\n    canvas.translate(mTranslation.x * mScaleFactor, mTranslation.y * mScaleFactor);\n    super.draw(canvas);\n    canvas.restore();\n}\n</code></pre>\n<p>But then I realized, that the <code>MotionEvent</code> parameter of the <code>onTouchEvent</code> for children is offset by the value I set with the translation (so they are detected, as if the container did not have any zoom or offset).</p>\n<p>I tried to overwrite <code>dispatchTouchEvent</code> in the parent <code>ViewGroup</code> and adjust the coordinates of the event. But <code>MotionEvent</code> is final and can only be instantiated via <code>MotionEvent.obtain(..)</code>. And there is no version of <code>obtain</code> to accept multiple coordinates, when there is more than one finger down.\nIs there any way to modify the MotionEvent parameters, so I don't need to do it in the <code>onTouchEvent</code> methods of the child views (that would be much more complex), or even a better approach to implement zoom and scroll?</p>\n<p>I implemented my own zoom container because I need to control the touches strictly (children also listen to swipe gestures, but need to be intercepted, when a second finger is down).</p>\n"},{"tags":["java","formatting","number-formatting"],"comments":[{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1672351440,"post_id":74956323,"comment_id":132274781,"body_markdown":"Duplicate of this  https://stackoverflow.com/questions/16273849/java-decimalformat-is-it-possible-grouping-in-fraction-part","body":"Duplicate of this  <a href=\"https://stackoverflow.com/questions/16273849/java-decimalformat-is-it-possible-grouping-in-fraction-part\" title=\"java decimalformat is it possible grouping in fraction part\">stackoverflow.com/questions/16273849/&hellip;</a>"},{"owner":{"account_id":13414743,"reputation":886,"user_id":9679725,"display_name":"Joe DiNottra"},"score":0,"creation_date":1672351780,"post_id":74956323,"comment_id":132274857,"body_markdown":"@MikeKim I think you are right. We&#39;re looking for the same goal. It seems that according to the answer, it&#39;s not possible to group after the decimal point. Sigh.","body":"@MikeKim I think you are right. We&#39;re looking for the same goal. It seems that according to the answer, it&#39;s not possible to group after the decimal point. Sigh."},{"owner":{"account_id":20466438,"reputation":115,"user_id":15017829,"display_name":"Mike Kim"},"score":0,"creation_date":1672357793,"post_id":74956323,"comment_id":132275927,"body_markdown":"You just need to make a custom method that converts the fraction part into an integer, format that, and then append that formatted string to the original integer.","body":"You just need to make a custom method that converts the fraction part into an integer, format that, and then append that formatted string to the original integer."}],"owner":{"account_id":13414743,"reputation":886,"user_id":9679725,"display_name":"Joe DiNottra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672350382,"creation_date":1672350382,"question_id":74956323,"body_markdown":"I&#39;m using DecimalFormat and need to add thousands separator to the decimal places of numbers. For example, I need to:\r\n\r\n```java\r\nDecimalFormat fmt = new DecimalFormat(&quot;#,##0.0##_#&quot;); // ?\r\nSystem.out.println(fmt.format(1234.0));     // 1,234.0\r\nSystem.out.println(fmt.format(0.1201));     // 0.120_1\r\nSystem.out.println(fmt.format(0.00001234)); // 0.000_012_34\r\n```\r\n\r\nHow do I specify the format for the decimal places?\r\n","title":"How to format decimals separators in DecimalFormat","body":"<p>I'm using DecimalFormat and need to add thousands separator to the decimal places of numbers. For example, I need to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DecimalFormat fmt = new DecimalFormat(&quot;#,##0.0##_#&quot;); // ?\nSystem.out.println(fmt.format(1234.0));     // 1,234.0\nSystem.out.println(fmt.format(0.1201));     // 0.120_1\nSystem.out.println(fmt.format(0.00001234)); // 0.000_012_34\n</code></pre>\n<p>How do I specify the format for the decimal places?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":1887163,"reputation":3199,"user_id":2139699,"accept_rate":62,"display_name":"Pradip"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672346122,"creation_date":1379995902,"answer_id":18972838,"question_id":18972788,"body_markdown":"Try with this: The `java.io` package has been reimplemented within Android. You are able to use the same mechanisms in Android as you do in Java.\r\n\r\n    File fileList = new File(&quot;/sdcard&quot;); // Path which you want to read\r\n    if (fileList != null) {\r\n        File[] files = fileList.listFiles();\r\n            for (File f : files) {\r\n                // Do something with the files\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>Try with this: The <code>java.io</code> package has been reimplemented within Android. You are able to use the same mechanisms in Android as you do in Java.</p>\n<pre><code>File fileList = new File(&quot;/sdcard&quot;); // Path which you want to read\nif (fileList != null) {\n    File[] files = fileList.listFiles();\n        for (File f : files) {\n            // Do something with the files\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1893421,"reputation":137,"user_id":1710894,"accept_rate":38,"display_name":"willsantoso"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672346198,"creation_date":1379996050,"answer_id":18972860,"question_id":18972788,"body_markdown":"I used this code:\r\n\r\n        private File[] listOfDir;\r\n\r\n        /* ... */\r\n\r\n        TextView tv = (TextView) rootView.findViewById(R.id.textView1);\r\n        listOfDir = show();\r\n        String temp = &quot;&quot;;\r\n        if (listOfDir != null) {\r\n            for (File i : listOfDir) {\r\n                temp += i.getName() + &#39;\\n&#39;;\r\n            }\r\n        } else {\r\n            temp = &quot;null&quot;;\r\n        }\r\n        tv.setText(temp);\r\n        ...\r\n\r\n        public File[] show() {\r\n            File[] dirs = null;\r\n            File dir = new File( /* Your path */ );\r\n            dirs = dir.listFiles();\r\n            return dirs;\r\n        }\r\n\r\nAnd just call *show* to get list all the name.\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>I used this code:</p>\n<pre><code>    private File[] listOfDir;\n\n    /* ... */\n\n    TextView tv = (TextView) rootView.findViewById(R.id.textView1);\n    listOfDir = show();\n    String temp = &quot;&quot;;\n    if (listOfDir != null) {\n        for (File i : listOfDir) {\n            temp += i.getName() + '\\n';\n        }\n    } else {\n        temp = &quot;null&quot;;\n    }\n    tv.setText(temp);\n    ...\n\n    public File[] show() {\n        File[] dirs = null;\n        File dir = new File( /* Your path */ );\n        dirs = dir.listFiles();\n        return dirs;\n    }\n</code></pre>\n<p>And just call <em>show</em> to get list all the name.</p>\n"},{"tags":[],"owner":{"account_id":2327791,"reputation":2900,"user_id":2041850,"accept_rate":68,"display_name":"Zax"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672346540,"creation_date":1379996334,"answer_id":18972895,"question_id":18972788,"body_markdown":"I think this will help. First you need to fetch the contents of the SD card as shown below:\r\n\r\n    public class FileList extends ListActivity\r\n    {\r\n        private File file;\r\n        private List&lt;String&gt; myList;\r\n\r\n        public void onCreate(Bundle savedInstanceState)\r\n        {\r\n            super.onCreate(savedInstanceState);\r\n\r\n            myList = new ArrayList&lt;String&gt;();\r\n\r\n            String root_sd = Environment.getExternalStorageDirectory().toString();\r\n            file = new File(root_sd + &quot;/external_sd&quot;);\r\n            File list[] = file.listFiles();\r\n\r\n            for(int i=0; i&lt; list.length; i++)\r\n            {\r\n                myList.add(list[i].getName());\r\n            }\r\n\r\n            setListAdapter(new ArrayAdapter&lt;String&gt;(\r\n                               this,\r\n                               android.R.layout.simple_list_item_1,\r\n                               myList));\r\n        }\r\n\r\nNow that you have all the files and folders from your `sdcard` in your `listview`, whenever, you go into a folder, then you need to fetch the contents of that folder as shown below:\r\n\r\n    protected void onListItemClick(ListView l, View v, int position, long id)\r\n    {\r\n        super.onListItemClick(l, v, position, id);\r\n\r\n        File temp_file = new File(file, myList.get(position));\r\n\r\n        if(!temp_file.isFile())\r\n        {\r\n            file = new File(file, myList.get(position));\r\n            File list[] = file.listFiles();\r\n\r\n            myList.clear();\r\n\r\n            for(int i=0; i&lt; list.length; i++)\r\n            {\r\n                myList.add(list[i].getName());\r\n            }\r\n            Toast.makeText(getApplicationContext(), file.toString(), Toast.LENGTH_LONG).show();\r\n            setListAdapter(new ArrayAdapter&lt;String&gt;(this,\r\n                    android.R.layout.simple_list_item_1, myList));\r\n        }\r\n    }\r\n\r\nAnd again on pressing back you need to load back the contents of your previous folder as shown below:\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        String parent = file.getParent().toString();\r\n        file = new File(parent);\r\n        File list[] = file.listFiles();\r\n\r\n        myList.clear();\r\n\r\n        for(int i=0; i&lt; list.length; i++)\r\n        {\r\n            myList.add(list[i].getName());\r\n        }\r\n        Toast.makeText(getApplicationContext(), parent, Toast.LENGTH_LONG).show();\r\n        setListAdapter(new ArrayAdapter&lt;String&gt;(\r\n                         this,\r\n                         android.R.layout.simple_list_item_1,\r\n                         myList));\r\n\r\nI think this is what you need.\r\n\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>I think this will help. First you need to fetch the contents of the SD card as shown below:</p>\n<pre><code>public class FileList extends ListActivity\n{\n    private File file;\n    private List&lt;String&gt; myList;\n\n    public void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n\n        myList = new ArrayList&lt;String&gt;();\n\n        String root_sd = Environment.getExternalStorageDirectory().toString();\n        file = new File(root_sd + &quot;/external_sd&quot;);\n        File list[] = file.listFiles();\n\n        for(int i=0; i&lt; list.length; i++)\n        {\n            myList.add(list[i].getName());\n        }\n\n        setListAdapter(new ArrayAdapter&lt;String&gt;(\n                           this,\n                           android.R.layout.simple_list_item_1,\n                           myList));\n    }\n</code></pre>\n<p>Now that you have all the files and folders from your <code>sdcard</code> in your <code>listview</code>, whenever, you go into a folder, then you need to fetch the contents of that folder as shown below:</p>\n<pre><code>protected void onListItemClick(ListView l, View v, int position, long id)\n{\n    super.onListItemClick(l, v, position, id);\n\n    File temp_file = new File(file, myList.get(position));\n\n    if(!temp_file.isFile())\n    {\n        file = new File(file, myList.get(position));\n        File list[] = file.listFiles();\n\n        myList.clear();\n\n        for(int i=0; i&lt; list.length; i++)\n        {\n            myList.add(list[i].getName());\n        }\n        Toast.makeText(getApplicationContext(), file.toString(), Toast.LENGTH_LONG).show();\n        setListAdapter(new ArrayAdapter&lt;String&gt;(this,\n                android.R.layout.simple_list_item_1, myList));\n    }\n}\n</code></pre>\n<p>And again on pressing back you need to load back the contents of your previous folder as shown below:</p>\n<pre><code>@Override\npublic void onBackPressed() {\n    String parent = file.getParent().toString();\n    file = new File(parent);\n    File list[] = file.listFiles();\n\n    myList.clear();\n\n    for(int i=0; i&lt; list.length; i++)\n    {\n        myList.add(list[i].getName());\n    }\n    Toast.makeText(getApplicationContext(), parent, Toast.LENGTH_LONG).show();\n    setListAdapter(new ArrayAdapter&lt;String&gt;(\n                     this,\n                     android.R.layout.simple_list_item_1,\n                     myList));\n</code></pre>\n<p>I think this is what you need.</p>\n"},{"tags":[],"owner":{"account_id":187320,"reputation":2598,"user_id":425280,"accept_rate":65,"display_name":"krammer"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1379996745,"creation_date":1379996745,"answer_id":18972952,"question_id":18972788,"body_markdown":"Conceptually, what you are doing is not complete. Your code only gives you a File for the root level directory. To determine all the files within this directory and the sub directories, you need recursive calls so that all the files are listed to the end of the folder levels.\r\n\r\n\r\n    private List&lt;File&gt; getListFiles(File parentDir) {\r\n        // On first call, parentDir is your sdcard root path\r\n        ArrayList&lt;File&gt; inFiles = new ArrayList&lt;File&gt;(); // initialize an array list to store file names\r\n        File[] files = parentDir.listFiles(); // list all files in this directory\r\n        for (File file : files) {\r\n            if (file.isDirectory()) { // if the file is a directory\r\n                inFiles.addAll(getListFiles(file)); // **CALL THIS RECURSIVELY TO GET ALL LOWER LEVEL FILES**\r\n            } \r\n            \r\n        }\r\n        return inFiles;\r\n    }\r\n\r\nNow call this function as:\r\n\r\n    getListFiles(Environment.getExternalStorageDirectory());\r\n\r\nNow, you can add your ArrayList as a source to a List Control.\r\n\r\n**Bonus**: If you would like to represent list the files in a tree like view, I would recommend you to look at https://code.google.com/p/tree-view-list-android/\r\n\r\nSource:\r\nhttps://stackoverflow.com/questions/9530921/list-all-the-files-from-all-the-folder-in-a-single-list\r\n\r\nhttps://stackoverflow.com/questions/6939479/search-all-pdf-file-present-in-the-android-device","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>Conceptually, what you are doing is not complete. Your code only gives you a File for the root level directory. To determine all the files within this directory and the sub directories, you need recursive calls so that all the files are listed to the end of the folder levels.</p>\n\n<pre><code>private List&lt;File&gt; getListFiles(File parentDir) {\n    // On first call, parentDir is your sdcard root path\n    ArrayList&lt;File&gt; inFiles = new ArrayList&lt;File&gt;(); // initialize an array list to store file names\n    File[] files = parentDir.listFiles(); // list all files in this directory\n    for (File file : files) {\n        if (file.isDirectory()) { // if the file is a directory\n            inFiles.addAll(getListFiles(file)); // **CALL THIS RECURSIVELY TO GET ALL LOWER LEVEL FILES**\n        } \n\n    }\n    return inFiles;\n}\n</code></pre>\n\n<p>Now call this function as:</p>\n\n<pre><code>getListFiles(Environment.getExternalStorageDirectory());\n</code></pre>\n\n<p>Now, you can add your ArrayList as a source to a List Control.</p>\n\n<p><strong>Bonus</strong>: If you would like to represent list the files in a tree like view, I would recommend you to look at <a href=\"https://code.google.com/p/tree-view-list-android/\" rel=\"nofollow noreferrer\">https://code.google.com/p/tree-view-list-android/</a></p>\n\n<p>Source:\n<a href=\"https://stackoverflow.com/questions/9530921/list-all-the-files-from-all-the-folder-in-a-single-list\">List all the files from all the folder in a single list</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6939479/search-all-pdf-file-present-in-the-android-device\">Search all .pdf file present in the Android device</a></p>\n"},{"tags":[],"owner":{"account_id":203535,"reputation":1119,"user_id":451243,"display_name":"saiful103a"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672346692,"creation_date":1379999194,"answer_id":18973318,"question_id":18972788,"body_markdown":"I wrote a tutorial on this a while ago and still use this from time to time. Have a look; you might find what you need.\r\n\r\n[playing-with-sdcard-in-android][1]\r\n\r\nTry this:\r\n\r\nIf you don&#39;t want the directory to be listed, put files.add(file1[i]); line in the *else* block:\r\n\r\n    public class MainActivity extends ListActivity {\r\n\r\n        ArrayList&lt;File&gt; files = new ArrayList&lt;File&gt;();\r\n\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            File file[] = Environment.getExternalStorageDirectory().listFiles();\r\n            recursiveFileFind(file);\r\n\r\n            setListAdapter(new ArrayAdapter&lt;File&gt;(MainActivity.this,\r\n                    android.R.layout.simple_list_item_1, files));\r\n            Toast.makeText(this, &quot;&quot; + files.size(), Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        public void recursiveFileFind(File[] file1) {\r\n            int i = 0;\r\n            String filePath = &quot;&quot;;\r\n            if (file1 != null) {\r\n                while (i != file1.length) {\r\n                    filePath = file1[i].getAbsolutePath();\r\n                    files.add(file1[i]);\r\n                    if (file1[i].isDirectory()) {\r\n                        File file[] = file1[i].listFiles();\r\n                        recursiveFileFind(file);\r\n                    }\r\n                    else{\r\n                    }\r\n\r\n                    i++;\r\n                    Log.d(i + &quot;&quot;, filePath);\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n  [1]: http://saiful103a.wordpress.com/2011/09/13/playing-with-sdcard-in-android/\r\n\r\n\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>I wrote a tutorial on this a while ago and still use this from time to time. Have a look; you might find what you need.</p>\n<p><a href=\"http://saiful103a.wordpress.com/2011/09/13/playing-with-sdcard-in-android/\" rel=\"nofollow noreferrer\">playing-with-sdcard-in-android</a></p>\n<p>Try this:</p>\n<p>If you don't want the directory to be listed, put files.add(file1[i]); line in the <em>else</em> block:</p>\n<pre><code>public class MainActivity extends ListActivity {\n\n    ArrayList&lt;File&gt; files = new ArrayList&lt;File&gt;();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        File file[] = Environment.getExternalStorageDirectory().listFiles();\n        recursiveFileFind(file);\n\n        setListAdapter(new ArrayAdapter&lt;File&gt;(MainActivity.this,\n                android.R.layout.simple_list_item_1, files));\n        Toast.makeText(this, &quot;&quot; + files.size(), Toast.LENGTH_LONG).show();\n    }\n\n    public void recursiveFileFind(File[] file1) {\n        int i = 0;\n        String filePath = &quot;&quot;;\n        if (file1 != null) {\n            while (i != file1.length) {\n                filePath = file1[i].getAbsolutePath();\n                files.add(file1[i]);\n                if (file1[i].isDirectory()) {\n                    File file[] = file1[i].listFiles();\n                    recursiveFileFind(file);\n                }\n                else{\n                }\n\n                i++;\n                Log.d(i + &quot;&quot;, filePath);\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1672346940,"creation_date":1380094262,"answer_id":18998816,"question_id":18972788,"body_markdown":"Here is a solution found on the web:\r\n\r\n    public void walkdir(File dir) {\r\n\r\n        File[] listFile;\r\n        listFile = dir.listFiles();\r\n\r\n        if (listFile != null) {\r\n            for (int i = 0; i &lt; listFile.length; i++) {\r\n                if (listFile[i].isDirectory()) {\r\n                    walkdir(listFile[i]);\r\n                } else {\r\n                    if (listFile[i].getName().toLowerCase().endsWith(&quot;.pdf&quot;)) {\r\n                        files_list.add(listFile[i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nYou actually only need calling the method above with the parent directory that you want to start with. I recommend to put Environment.getExternalStorageDirectory() in the parent directory so it will not change with different devices.\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>Here is a solution found on the web:</p>\n<pre><code>public void walkdir(File dir) {\n\n    File[] listFile;\n    listFile = dir.listFiles();\n\n    if (listFile != null) {\n        for (int i = 0; i &lt; listFile.length; i++) {\n            if (listFile[i].isDirectory()) {\n                walkdir(listFile[i]);\n            } else {\n                if (listFile[i].getName().toLowerCase().endsWith(&quot;.pdf&quot;)) {\n                    files_list.add(listFile[i]);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>You actually only need calling the method above with the parent directory that you want to start with. I recommend to put Environment.getExternalStorageDirectory() in the parent directory so it will not change with different devices.</p>\n"},{"tags":[],"owner":{"account_id":2161802,"reputation":153,"user_id":1915804,"display_name":"Monu Gupta"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1480496305,"creation_date":1462947602,"answer_id":37154494,"question_id":18972788,"body_markdown":"    public void Search_Dir(File dir) {\r\n\t\tString pdfPattern = &quot;.pdf&quot;;\r\n\r\n\t\tLog.d(&quot;check&quot;,\r\n\t\t\t\t&quot;Environment.getExternalStorageDirectory()------&quot;\r\n\t\t\t\t\t\t+ dir.getName());\r\n\r\n\t\tFile FileList[] = dir.listFiles();\r\n\t\tLog.d(&quot;check&quot;,\r\n\t\t\t\t&quot;filelist length---- &quot;\r\n\t\t\t\t\t\t+ FileList.length);\r\n\t\t\r\n\t\tif (FileList != null) {\r\n\t\t\tfor (int i = 0; i &lt; FileList.length; i++) {\r\n\r\n\t\t\t\tif (FileList[i].isDirectory()) {\r\n\t\t\t\t\tSearch_Dir(FileList[i]);\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tLog.d(&quot;check&quot;,\r\n\t\t\t\t\t\t\t&quot;for check from .pdf---- &quot;\r\n\t\t\t\t\t\t\t\t\t+ FileList[i].getName());\r\n\t\t\t\t\tif (FileList[i].getName().endsWith(pdfPattern)) {\r\n\t\t\t\t\t\t// here you have that file.\r\n\t\t\t\t\t\tpdfArrayList.add(FileList[i].getPath());\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<pre><code>public void Search_Dir(File dir) {\n    String pdfPattern = \".pdf\";\n\n    Log.d(\"check\",\n            \"Environment.getExternalStorageDirectory()------\"\n                    + dir.getName());\n\n    File FileList[] = dir.listFiles();\n    Log.d(\"check\",\n            \"filelist length---- \"\n                    + FileList.length);\n\n    if (FileList != null) {\n        for (int i = 0; i &lt; FileList.length; i++) {\n\n            if (FileList[i].isDirectory()) {\n                Search_Dir(FileList[i]);\n            } else {\n\n                Log.d(\"check\",\n                        \"for check from .pdf---- \"\n                                + FileList[i].getName());\n                if (FileList[i].getName().endsWith(pdfPattern)) {\n                    // here you have that file.\n                    pdfArrayList.add(FileList[i].getPath());\n\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":3192300,"reputation":717,"user_id":2696292,"accept_rate":57,"display_name":"Mansour Fahad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7556,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":18998816,"answer_count":7,"score":2,"last_activity_date":1672349649,"creation_date":1379995504,"question_id":18972788,"body_markdown":"I looking for help to list all files in Android external storage device. I want to look up in all the folders, including the subfolders for the main folder. Is there a way to this?\r\n\r\nI have worked on a basic one, but I still haven&#39;t got the desired result. It doesn&#39;t work.\r\n\r\nHere is my code:\r\n\r\n    File[] files_array;\r\n    files_array = new File(Environment.getExternalStorageDirectory().getAbsolutePath()).listFiles();\r\n\r\nThis method returns 0 size. What is the matter? This is my activity:\r\n\r\n    public class Main extends ListActivity {\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            List&lt;File&gt; files = getListFiles(Environment.getExternalStorageDirectory());\r\n            setListAdapter(new ArrayAdapter&lt;File&gt;(Main.this, android.R.layout.simple_list_item_1, files));\r\n            Toast.makeText(this, &quot;&quot; + files.size(), Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        private List&lt;File&gt; getListFiles(File parentDir) {\r\n            // On first call, parentDir is your sdcard root path\r\n            ArrayList&lt;File&gt; inFiles = new ArrayList&lt;File&gt;(); // Initialize an array list to store file names\r\n            File[] files = parentDir.listFiles(); // List all files in this directory\r\n            for (File file : files) {\r\n\r\n                if (file.isDirectory()) { // If the file is a directory\r\n                    inFiles.addAll(getListFiles(file)); // *** Call this recursively to get all lower level files ***\r\n                }\r\n            }\r\n            return inFiles;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"How can I look up for all files in an Android device and put them in a list?","body":"<p>I looking for help to list all files in Android external storage device. I want to look up in all the folders, including the subfolders for the main folder. Is there a way to this?</p>\n<p>I have worked on a basic one, but I still haven't got the desired result. It doesn't work.</p>\n<p>Here is my code:</p>\n<pre><code>File[] files_array;\nfiles_array = new File(Environment.getExternalStorageDirectory().getAbsolutePath()).listFiles();\n</code></pre>\n<p>This method returns 0 size. What is the matter? This is my activity:</p>\n<pre><code>public class Main extends ListActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        List&lt;File&gt; files = getListFiles(Environment.getExternalStorageDirectory());\n        setListAdapter(new ArrayAdapter&lt;File&gt;(Main.this, android.R.layout.simple_list_item_1, files));\n        Toast.makeText(this, &quot;&quot; + files.size(), Toast.LENGTH_LONG).show();\n    }\n\n    private List&lt;File&gt; getListFiles(File parentDir) {\n        // On first call, parentDir is your sdcard root path\n        ArrayList&lt;File&gt; inFiles = new ArrayList&lt;File&gt;(); // Initialize an array list to store file names\n        File[] files = parentDir.listFiles(); // List all files in this directory\n        for (File file : files) {\n\n            if (file.isDirectory()) { // If the file is a directory\n                inFiles.addAll(getListFiles(file)); // *** Call this recursively to get all lower level files ***\n            }\n        }\n        return inFiles;\n    }\n}\n</code></pre>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1672335875,"post_id":74954165,"comment_id":132271056,"body_markdown":"Can you show the signature of `subject#send`?","body":"Can you show the signature of <code>subject#send</code>?"},{"owner":{"account_id":20739568,"reputation":31,"user_id":15229614,"display_name":"stickboi"},"score":0,"creation_date":1672340865,"post_id":74954165,"comment_id":132272274,"body_markdown":"It takes in a single Object, which might explain why it can capture another class, but I&#39;m still not sure why it&#39;s not consistent between machines.","body":"It takes in a single Object, which might explain why it can capture another class, but I&#39;m still not sure why it&#39;s not consistent between machines."},{"owner":{"account_id":8739741,"reputation":6543,"user_id":6537157,"accept_rate":100,"display_name":"akop"},"score":0,"creation_date":1672350418,"post_id":74954165,"comment_id":132274529,"body_markdown":"What do you mean with &quot;it is not consistent&quot;?","body":"What do you mean with &quot;it is not consistent&quot;?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672440975,"post_id":74954165,"comment_id":132292056,"body_markdown":"You need to describe the behaviour you are seeing in more detail, and show the code which calls `send`. You can also put a breakpoint on the call to `send` to see why it is being called with a value you don&#39;t expect.","body":"You need to describe the behaviour you are seeing in more detail, and show the code which calls <code>send</code>. You can also put a breakpoint on the call to <code>send</code> to see why it is being called with a value you don&#39;t expect."}],"answers":[{"tags":[],"owner":{"account_id":2673328,"reputation":1649,"user_id":2310221,"accept_rate":81,"display_name":"Markus"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672349182,"creation_date":1672349182,"answer_id":74956191,"question_id":74954165,"body_markdown":"Unfortunately, there is no type check in the `ArgumentCaptor`:\r\n\r\n&gt; This utility class *don&#39;t do any type checks*, the generic signatures are only there to avoid casting in your code.\r\n\r\n**Source:** https://site.mockito.org/javadoc/current/org/mockito/ArgumentCaptor.html","title":"ArgumentCaptor is ignoring class type","body":"<p>Unfortunately, there is no type check in the <code>ArgumentCaptor</code>:</p>\n<blockquote>\n<p>This utility class <em>don't do any type checks</em>, the generic signatures are only there to avoid casting in your code.</p>\n</blockquote>\n<p><strong>Source:</strong> <a href=\"https://site.mockito.org/javadoc/current/org/mockito/ArgumentCaptor.html\" rel=\"nofollow noreferrer\">https://site.mockito.org/javadoc/current/org/mockito/ArgumentCaptor.html</a></p>\n"}],"owner":{"account_id":20739568,"reputation":31,"user_id":15229614,"display_name":"stickboi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672349182,"creation_date":1672334320,"question_id":74954165,"body_markdown":"I&#39;m using an ArgumentCaptor in a test, but the class passed into the argument capture is different from the class that is actually being captured. The behavior is very inconsistent, on some machines it will throw an exception (which I would expect it to do), and on others it simply captures the object and continues.\r\n\r\nHere&#39;s an example, where ClassOne is being passed into the ArgumentCaptor, but an instance of ClassTwo is being captured. ClassOne and ClassTwo are completely independent, nothing is extending the other:\r\n\r\n```\r\nClassTwo expected = ClassTwo.builder().build();\r\nArgumentCaptor&lt;ClassOne&gt; captor = ArgumentCaptor.forClass(ClassOne.class);\r\nverify(subject).send(argumentCaptor.capture());\r\nassertThat(captor.getValue()).usingRecursiveComparison().isEqualTo(expected);\r\n```\r\n\r\nDoes anyone know why this is happening? And even more, why do we get different behavior between different machines?","title":"ArgumentCaptor is ignoring class type","body":"<p>I'm using an ArgumentCaptor in a test, but the class passed into the argument capture is different from the class that is actually being captured. The behavior is very inconsistent, on some machines it will throw an exception (which I would expect it to do), and on others it simply captures the object and continues.</p>\n<p>Here's an example, where ClassOne is being passed into the ArgumentCaptor, but an instance of ClassTwo is being captured. ClassOne and ClassTwo are completely independent, nothing is extending the other:</p>\n<pre><code>ClassTwo expected = ClassTwo.builder().build();\nArgumentCaptor&lt;ClassOne&gt; captor = ArgumentCaptor.forClass(ClassOne.class);\nverify(subject).send(argumentCaptor.capture());\nassertThat(captor.getValue()).usingRecursiveComparison().isEqualTo(expected);\n</code></pre>\n<p>Does anyone know why this is happening? And even more, why do we get different behavior between different machines?</p>\n"},{"tags":["java","swing","swingbuilder"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1672349290,"post_id":74956110,"comment_id":132274290,"body_markdown":"Create valid `Product`, `Store`, and `Manager` classes.  Create an additional `Region` model class that holds a `java.util.List` of `Store` instances.  Each `Store` instance would contain a `List` of `Manager` instances.  Each `Store` instance would contain a `List` of `Product` instances.  You can have multiple controller classes in a Java Swing project.  Each `ActionListener` modifies its part of the model and repaints its part of the view.","body":"Create valid <code>Product</code>, <code>Store</code>, and <code>Manager</code> classes.  Create an additional <code>Region</code> model class that holds a <code>java.util.List</code> of <code>Store</code> instances.  Each <code>Store</code> instance would contain a <code>List</code> of <code>Manager</code> instances.  Each <code>Store</code> instance would contain a <code>List</code> of <code>Product</code> instances.  You can have multiple controller classes in a Java Swing project.  Each <code>ActionListener</code> modifies its part of the model and repaints its part of the view."}],"owner":{"account_id":26216381,"reputation":45,"user_id":19894458,"display_name":"Cornel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672348421,"creation_date":1672348421,"question_id":74956110,"body_markdown":"I am creating an app in Java and I am using the MVC architecture. I have the Model, View and Controller classes, and I have also another classes that help me with data. For example, I have the \r\nnext classes: Product, Store, Manager. How can I use the data in the Model class, I tried to copy paste my Classes and my code from main file, but all I have are errors. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nIn the second image I have the problems, the Model class. I really do not know what to do to make it work.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QnZ5G.png\r\n  [2]: https://i.stack.imgur.com/sZi3G.png","title":"How can I use multiple classes in Model - MVC Java?","body":"<p>I am creating an app in Java and I am using the MVC architecture. I have the Model, View and Controller classes, and I have also another classes that help me with data. For example, I have the\nnext classes: Product, Store, Manager. How can I use the data in the Model class, I tried to copy paste my Classes and my code from main file, but all I have are errors.</p>\n<p><a href=\"https://i.stack.imgur.com/QnZ5G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QnZ5G.png\" alt=\"enter image description here\" /></a></p>\n<p>In the second image I have the problems, the Model class. I really do not know what to do to make it work.</p>\n<p><a href=\"https://i.stack.imgur.com/sZi3G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sZi3G.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","validation","controller"],"comments":[{"owner":{"account_id":1476785,"reputation":1621,"user_id":1386990,"accept_rate":57,"display_name":"Toseef Zafar"},"score":0,"creation_date":1439852581,"post_id":27111806,"comment_id":52020691,"body_markdown":"Hi, I have got a similar case but in my case the @NotEmpty is also not working. can you please let me know if I need to configure other than this all above?","body":"Hi, I have got a similar case but in my case the @NotEmpty is also not working. can you please let me know if I need to configure other than this all above?"}],"answers":[{"tags":[],"owner":{"account_id":1351713,"reputation":33846,"user_id":1291150,"display_name":"Bohuslav Burghardt"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1416856229,"creation_date":1416855223,"answer_id":27112083,"question_id":27111806,"body_markdown":"Are you sure that the validations don&#39;t work? Unless you have for example [`StringTrimmerEditor`][1] registered, your fields will actually be String instances with length equal to 0, not `null` values when you submit the form and therefore the annotation would consider such values to be valid.\r\n\r\nIf you want to validate that String is not blank (not null and not an empty String), use for instance the [`@NotBlank`][2] annotation. Also I just tried it myself and the `@Email` annotation also passes for empty Strings, which would mean that your empty form IS actually valid right now.\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/beans/propertyeditors/StringTrimmerEditor.html\r\n  [2]: http://docs.jboss.org/hibernate/validator/4.1/api/org/hibernate/validator/constraints/NotBlank.html","title":"Validation form in Spring using @Valid not work","body":"<p>Are you sure that the validations don't work? Unless you have for example <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/beans/propertyeditors/StringTrimmerEditor.html\" rel=\"noreferrer\"><code>StringTrimmerEditor</code></a> registered, your fields will actually be String instances with length equal to 0, not <code>null</code> values when you submit the form and therefore the annotation would consider such values to be valid.</p>\n\n<p>If you want to validate that String is not blank (not null and not an empty String), use for instance the <a href=\"http://docs.jboss.org/hibernate/validator/4.1/api/org/hibernate/validator/constraints/NotBlank.html\" rel=\"noreferrer\"><code>@NotBlank</code></a> annotation. Also I just tried it myself and the <code>@Email</code> annotation also passes for empty Strings, which would mean that your empty form IS actually valid right now.</p>\n"},{"tags":[],"owner":{"account_id":8397457,"reputation":1,"user_id":6304023,"display_name":"Munna kumar patra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462634781,"creation_date":1462627236,"answer_id":37089075,"question_id":27111806,"body_markdown":"&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n    &lt;mvc:annotation-driven/&gt;\r\n\r\ncheck whether above tag is declared within dispatcher-servlet.xml or not. This tag will be active all annotation.\r\n","title":"Validation form in Spring using @Valid not work","body":"\n\n<pre><code>&lt;mvc:annotation-driven/&gt;\n</code></pre>\n\n<p>check whether above tag is declared within dispatcher-servlet.xml or not. This tag will be active all annotation.</p>\n"},{"tags":[],"owner":{"account_id":6800501,"reputation":126,"user_id":5233957,"display_name":"Derek J."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524408706,"creation_date":1524408706,"answer_id":49967252,"question_id":27111806,"body_markdown":"Today (2018-04-22), the **hibernate-validator** have been update to version **6.0.9.Final** . On my test, I found the nested object valid using **@Valid** can be work &lt;= version **5.2.5.Final**, I don&#39;t understand why the latest can&#39;t  working (maybe someone can explain in future), here is my code:\r\n\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class PackQueryReq {\r\n        \t\r\n        // ......\r\n        \r\n        @NotNull(message = &quot;params can&#39;t be NULL&quot;)\r\n        @Valid\r\n        private PackQueryParams params;\r\n    }\r\n    public class PackQueryParams {\r\n\t\r\n\t    @Min(value=1)\r\n\t    @NotNull(message = &quot;enterpriseId can&#39;t be NULL&quot;)\r\n\t    private Integer enterpriseId;\r\n    }\r\n\r\nAnd on spring MVC controller:\r\n\r\n    public Resp query(@RequestBody @Valid PackQueryReq packQuery) {\r\n       //...\r\n    }","title":"Validation form in Spring using @Valid not work","body":"<p>Today (2018-04-22), the <strong>hibernate-validator</strong> have been update to version <strong>6.0.9.Final</strong> . On my test, I found the nested object valid using <strong>@Valid</strong> can be work &lt;= version <strong>5.2.5.Final</strong>, I don't understand why the latest can't  working (maybe someone can explain in future), here is my code:</p>\n\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\npublic class PackQueryReq {\n\n    // ......\n\n    @NotNull(message = \"params can't be NULL\")\n    @Valid\n    private PackQueryParams params;\n}\npublic class PackQueryParams {\n\n    @Min(value=1)\n    @NotNull(message = \"enterpriseId can't be NULL\")\n    private Integer enterpriseId;\n}\n</code></pre>\n\n<p>And on spring MVC controller:</p>\n\n<pre><code>public Resp query(@RequestBody @Valid PackQueryReq packQuery) {\n   //...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8591675,"reputation":897,"user_id":6436078,"accept_rate":100,"display_name":"ntholi"},"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1589909023,"creation_date":1589909023,"answer_id":61897103,"question_id":27111806,"body_markdown":"After upgrading my project to Spring Boot 2.3.0, I struggled for hours with the same issue until I realized that as of [#19550][1], Web and WebFlux starters do not depend on the validation starter by default anymore. If your application is using validation features, you’ll need to manually add back a dependency on `spring-boot-starter-validation` in your build file.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/19550","title":"Validation form in Spring using @Valid not work","body":"<p>After upgrading my project to Spring Boot 2.3.0, I struggled for hours with the same issue until I realized that as of <a href=\"https://github.com/spring-projects/spring-boot/issues/19550\" rel=\"noreferrer\">#19550</a>, Web and WebFlux starters do not depend on the validation starter by default anymore. If your application is using validation features, you’ll need to manually add back a dependency on <code>spring-boot-starter-validation</code> in your build file.</p>\n"},{"tags":[],"owner":{"account_id":9870726,"reputation":101,"user_id":8085812,"display_name":"j.Frederic"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1610574997,"creation_date":1610574997,"answer_id":65710362,"question_id":27111806,"body_markdown":"I struggled with the same issue in my Spring Boot 2.4.1 project. You&#39;ll need to add this dependency in your pom.xml file\r\n\r\n ```\r\n...\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n...\r\n```","title":"Validation form in Spring using @Valid not work","body":"<p>I struggled with the same issue in my Spring Boot 2.4.1 project. You'll need to add this dependency in your pom.xml file</p>\n<pre><code>...\n&lt;dependency&gt;\n &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3598755,"reputation":171,"user_id":3002618,"display_name":"andrecoweb"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1612805559,"creation_date":1612731830,"answer_id":66093090,"question_id":27111806,"body_markdown":"I had the same error (the application did not validate).\r\n\r\nI added\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nand worked!","title":"Validation form in Spring using @Valid not work","body":"<p>I had the same error (the application did not validate).</p>\n<p>I added</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and worked!</p>\n"},{"tags":[],"owner":{"account_id":21103523,"reputation":221,"user_id":15512979,"display_name":"Poulami Pal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1617099559,"creation_date":1617099559,"answer_id":66869068,"question_id":27111806,"body_markdown":"I had the same issue with 2.5.0 (SNAPSHOT) spring boot project. I added the below dependency in the pom.xml file and it worked.\r\n\r\n```\r\n&lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Validation form in Spring using @Valid not work","body":"<p>I had the same issue with 2.5.0 (SNAPSHOT) spring boot project. I added the below dependency in the pom.xml file and it worked.</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":123192,"reputation":13668,"user_id":317522,"accept_rate":11,"display_name":"Paulo Merson"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1661780285,"creation_date":1661780285,"answer_id":73529718,"question_id":27111806,"body_markdown":"I had the same problem in **Kotlin** with old beans automatically converted from Java. They were missing the [`field` target specifier][1], without which the `javax.validation` annotations had no effect. \r\n\r\nA Kotlin snippet from the question code (with `field` to solve the problem):\r\n```\r\n@field:NotNull\r\n@field:Size(max = 20)\r\n@Column(name = &quot;username&quot;)\r\nvar username:  String\r\n``` \r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/annotations.html#annotation-use-site-targets","title":"Validation form in Spring using @Valid not work","body":"<p>I had the same problem in <strong>Kotlin</strong> with old beans automatically converted from Java. They were missing the <a href=\"https://kotlinlang.org/docs/annotations.html#annotation-use-site-targets\" rel=\"noreferrer\"><code>field</code> target specifier</a>, without which the <code>javax.validation</code> annotations had no effect.</p>\n<p>A Kotlin snippet from the question code (with <code>field</code> to solve the problem):</p>\n<pre><code>@field:NotNull\n@field:Size(max = 20)\n@Column(name = &quot;username&quot;)\nvar username:  String\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22326816,"reputation":41,"user_id":16548722,"display_name":"Spilvergo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672347734,"creation_date":1672347734,"answer_id":74956032,"question_id":27111806,"body_markdown":"I had to change the version of hibernate-validator. With 8.0.0 does not work, but with 6.1.5 does.\r\n\r\n    \t&lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n            &lt;version&gt;6.1.5.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"Validation form in Spring using @Valid not work","body":"<p>I had to change the version of hibernate-validator. With 8.0.0 does not work, but with 6.1.5 does.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;version&gt;6.1.5.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":2787313,"reputation":701,"user_id":2398350,"accept_rate":50,"display_name":"The Nightmare"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41221,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":27112083,"answer_count":9,"score":16,"last_activity_date":1672347734,"creation_date":1416854176,"question_id":27111806,"body_markdown":"I want to validation my form, but this not work.\r\nMy entity class\r\n\r\n    import java.io.Serializable;\r\n    import java.util.Set;\r\n    \r\n    import javax.persistence.Column;\r\n    import javax.persistence.Entity;\r\n    import javax.persistence.GeneratedValue;\r\n    import javax.persistence.Id;\r\n    import javax.persistence.OneToMany;\r\n    import javax.persistence.Table;\r\n    import javax.validation.constraints.NotNull;\r\n    import javax.validation.constraints.Size;\r\n    \r\n    import org.hibernate.validator.constraints.Email;\r\n    \r\n    @Entity\r\n    @Table(name = &quot;users&quot;)\r\n    public class User implements Serializable {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \t@Column(name = &quot;id&quot;)\r\n    \tprivate Integer id;\r\n    \t@NotNull\r\n    \t@Size(max = 20)\r\n    \t@Column(name = &quot;username&quot;)\r\n    \tprivate String username;\r\n    \t@NotNull\r\n    \t@Size(max = 20)\r\n    \t@Column(name = &quot;password&quot;)\r\n    \tprivate String password;\r\n    \t@NotNull\r\n    \t@Size(max = 20)\r\n    \t@Column(name = &quot;firstName&quot;)\r\n    \tprivate String firstName;\r\n    \t@NotNull\r\n    \t@Size(max = 20)\r\n    \t@Column(name = &quot;lastName&quot;)\r\n    \tprivate String lastName;\r\n    \t@Size(min = 11, max = 11)\r\n    \t@Column(name = &quot;personalId&quot;)\r\n    \tprivate String personalId;\r\n    \t@Size(max = 40)\r\n    \t@Column(name = &quot;city&quot;)\r\n    \tprivate String city;\r\n    \t@Size(max = 40)\r\n    \t@Column(name = &quot;address&quot;)\r\n    \tprivate String address;\r\n    \t@NotNull\r\n    \t@Email\r\n    \t@Size(max = 30)\r\n    \t@Column(name = &quot;email&quot;)\r\n    \tprivate String email;\r\n    \t@Size(min = 9, max = 9)\r\n    \t@Column(name = &quot;phone&quot;)\r\n    \tprivate String phone;\r\n    \t@OneToMany(mappedBy = &quot;user&quot;)\r\n    \tprivate Set&lt;UserRole&gt; userRoleSet;\r\n    }\r\n\r\nadminList.jsp and form go to addAdmin page:\r\n\r\n    &lt;form action=&quot;addAdminForm&quot; method=&quot;post&quot;&gt;\r\n\t\t&lt;input type=&quot;submit&quot; value=&quot;Dodaj administratora&quot; /&gt;\r\n\t&lt;/form&gt;\r\n\r\naddAdmin.jsp page formule:\r\n\r\n    \t&lt;form:form action=&quot;addAdmin&quot; modelAttribute=&quot;user&quot; method=&quot;post&quot;&gt;\r\n\t\t&lt;form:label path=&quot;username&quot;&gt;Login: &lt;/form:label&gt;\r\n\t\t&lt;form:input path=&quot;username&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;username&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;form:label path=&quot;password&quot;&gt;Hasło: &lt;/form:label&gt;\r\n\t\t&lt;form:password path=&quot;password&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;password&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;form:label path=&quot;firstName&quot;&gt;Imię: &lt;/form:label&gt;\r\n\t\t&lt;form:input path=&quot;firstName&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;firstName&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;form:label path=&quot;lastName&quot;&gt;Nazwisko: &lt;/form:label&gt;\r\n\t\t&lt;form:input path=&quot;lastName&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;lastName&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;form:label path=&quot;email&quot;&gt;Email: &lt;/form:label&gt;\r\n\t\t&lt;form:input path=&quot;email&quot; /&gt;\r\n\t\t&lt;form:errors path=&quot;email&quot; cssClass=&quot;error&quot; /&gt;\r\n\t\t&lt;br /&gt;\r\n\t\t&lt;input type=&quot;submit&quot; value=&quot;Dodaj&quot; /&gt;\r\n\t&lt;/form:form&gt;\r\n\r\nController:\r\n\r\n    \t@RequestMapping(value = &quot;/admin/addAdminForm&quot;, method = RequestMethod.POST)\r\n\tpublic ModelAndView goAddAdminForm() {\r\n\t\tModelAndView mav = new ModelAndView(&quot;admin/addadmin&quot;);\r\n\t\tmav.addObject(&quot;user&quot;, new User());\r\n\t\treturn mav;\r\n\t}\r\n\r\n\t@RequestMapping(value = &quot;/admin/addAdmin&quot;, method = RequestMethod.POST)\r\n\tpublic String addAdmin(@Valid @ModelAttribute(&quot;user&quot;) User user,\r\n\t\t\tBindingResult result, Model model) {\r\n\t\tif (result.hasErrors()) {\r\n\t\t\treturn &quot;admin/addadmin&quot;;\r\n\t\t} else {\r\n\t\t\tuserService.createUser(user);\r\n\t\t\tuser = userService.findByUsername(user.getUsername());\r\n\t\t\tUserRole userRole = new UserRole(&quot;ROLE_ADMIN&quot;);\r\n\t\t\tuserRole.setUser(user);\r\n\t\t\tuserRoleService.createUserRole(userRole);\r\n\t\t\treturn &quot;redirect:/admin/adminlist&quot;;\r\n\t\t}\r\n\t}\r\n\r\nWhen i try send empty formule i should get error messages `result.hasErrors()` not return error and my application go to else and try save user. Why @Valid not work?","title":"Validation form in Spring using @Valid not work","body":"<p>I want to validation my form, but this not work.\nMy entity class</p>\n\n<pre><code>import java.io.Serializable;\nimport java.util.Set;\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.persistence.OneToMany;\nimport javax.persistence.Table;\nimport javax.validation.constraints.NotNull;\nimport javax.validation.constraints.Size;\n\nimport org.hibernate.validator.constraints.Email;\n\n@Entity\n@Table(name = \"users\")\npublic class User implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n    @Id\n    @GeneratedValue\n    @Column(name = \"id\")\n    private Integer id;\n    @NotNull\n    @Size(max = 20)\n    @Column(name = \"username\")\n    private String username;\n    @NotNull\n    @Size(max = 20)\n    @Column(name = \"password\")\n    private String password;\n    @NotNull\n    @Size(max = 20)\n    @Column(name = \"firstName\")\n    private String firstName;\n    @NotNull\n    @Size(max = 20)\n    @Column(name = \"lastName\")\n    private String lastName;\n    @Size(min = 11, max = 11)\n    @Column(name = \"personalId\")\n    private String personalId;\n    @Size(max = 40)\n    @Column(name = \"city\")\n    private String city;\n    @Size(max = 40)\n    @Column(name = \"address\")\n    private String address;\n    @NotNull\n    @Email\n    @Size(max = 30)\n    @Column(name = \"email\")\n    private String email;\n    @Size(min = 9, max = 9)\n    @Column(name = \"phone\")\n    private String phone;\n    @OneToMany(mappedBy = \"user\")\n    private Set&lt;UserRole&gt; userRoleSet;\n}\n</code></pre>\n\n<p>adminList.jsp and form go to addAdmin page:</p>\n\n<pre><code>&lt;form action=\"addAdminForm\" method=\"post\"&gt;\n    &lt;input type=\"submit\" value=\"Dodaj administratora\" /&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>addAdmin.jsp page formule:</p>\n\n<pre><code>    &lt;form:form action=\"addAdmin\" modelAttribute=\"user\" method=\"post\"&gt;\n    &lt;form:label path=\"username\"&gt;Login: &lt;/form:label&gt;\n    &lt;form:input path=\"username\" /&gt;\n    &lt;form:errors path=\"username\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;form:label path=\"password\"&gt;Hasło: &lt;/form:label&gt;\n    &lt;form:password path=\"password\" /&gt;\n    &lt;form:errors path=\"password\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;form:label path=\"firstName\"&gt;Imię: &lt;/form:label&gt;\n    &lt;form:input path=\"firstName\" /&gt;\n    &lt;form:errors path=\"firstName\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;form:label path=\"lastName\"&gt;Nazwisko: &lt;/form:label&gt;\n    &lt;form:input path=\"lastName\" /&gt;\n    &lt;form:errors path=\"lastName\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;form:label path=\"email\"&gt;Email: &lt;/form:label&gt;\n    &lt;form:input path=\"email\" /&gt;\n    &lt;form:errors path=\"email\" cssClass=\"error\" /&gt;\n    &lt;br /&gt;\n    &lt;input type=\"submit\" value=\"Dodaj\" /&gt;\n&lt;/form:form&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>    @RequestMapping(value = \"/admin/addAdminForm\", method = RequestMethod.POST)\npublic ModelAndView goAddAdminForm() {\n    ModelAndView mav = new ModelAndView(\"admin/addadmin\");\n    mav.addObject(\"user\", new User());\n    return mav;\n}\n\n@RequestMapping(value = \"/admin/addAdmin\", method = RequestMethod.POST)\npublic String addAdmin(@Valid @ModelAttribute(\"user\") User user,\n        BindingResult result, Model model) {\n    if (result.hasErrors()) {\n        return \"admin/addadmin\";\n    } else {\n        userService.createUser(user);\n        user = userService.findByUsername(user.getUsername());\n        UserRole userRole = new UserRole(\"ROLE_ADMIN\");\n        userRole.setUser(user);\n        userRoleService.createUserRole(userRole);\n        return \"redirect:/admin/adminlist\";\n    }\n}\n</code></pre>\n\n<p>When i try send empty formule i should get error messages <code>result.hasErrors()</code> not return error and my application go to else and try save user. Why @Valid not work?</p>\n"},{"tags":["java","jsf"],"comments":[{"owner":{"account_id":1133938,"reputation":4722,"user_id":1119400,"accept_rate":79,"display_name":"Adrian Mitev"},"score":1,"creation_date":1350726814,"post_id":12986234,"comment_id":17616306,"body_markdown":"Looks like you&#39;re passing a wrong path.","body":"Looks like you&#39;re passing a wrong path."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1452549770,"post_id":12986234,"comment_id":57210203,"body_markdown":"You may try to check out this answer [Here](http://stackoverflow.com/a/34731952/912829)","body":"You may try to check out this answer <a href=\"http://stackoverflow.com/a/34731952/912829\">Here</a>"},{"owner":{"account_id":1003835,"reputation":1376,"user_id":1018075,"accept_rate":74,"display_name":"Mdhar9e"},"score":4,"creation_date":1461083981,"post_id":12986234,"comment_id":61033231,"body_markdown":"Create `Bundle.properties` file in your location: `src/main/webapp/WEB-INF/classes`.","body":"Create <code>Bundle.properties</code> file in your location: <code>src&#47;main&#47;webapp&#47;WEB-INF&#47;classes</code>."},{"owner":{"account_id":1750515,"reputation":6073,"user_id":1599699,"accept_rate":80,"display_name":"Andrew"},"score":0,"creation_date":1507309000,"post_id":12986234,"comment_id":80172918,"body_markdown":"https://stackoverflow.com/q/2668161/1599699","body":"<a href=\"https://stackoverflow.com/q/2668161/1599699\">stackoverflow.com/q/2668161/1599699</a>"},{"owner":{"account_id":1902705,"reputation":3125,"user_id":1718223,"accept_rate":71,"display_name":"abbasalim"},"score":1,"creation_date":1535991920,"post_id":12986234,"comment_id":91257054,"body_markdown":"Try creating a resources folder on this path src/main/resources and then put or get your files from there by using ResourceBundle on Android.\nhttps://stackoverflow.com/a/44452218/1718223","body":"Try creating a resources folder on this path src/main/resources and then put or get your files from there by using ResourceBundle on Android. <a href=\"https://stackoverflow.com/a/44452218/1718223\">stackoverflow.com/a/44452218/1718223</a>"},{"owner":{"account_id":2389551,"reputation":40441,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"score":0,"creation_date":1575189049,"post_id":12986234,"comment_id":104476622,"body_markdown":"Was getting this error when running intellij community version 2019.3. The solution was to downgrade.","body":"Was getting this error when running intellij community version 2019.3. The solution was to downgrade."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1584654751,"post_id":12986234,"comment_id":107510977,"body_markdown":"I have to seriously advise to neither massage exceptions, nor pay attention when such is shown.","body":"I have to seriously advise to neither massage exceptions, nor pay attention when such is shown."}],"answers":[{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":71,"is_accepted":false,"score":71,"last_activity_date":1486539362,"creation_date":1350736898,"answer_id":12988540,"question_id":12986234,"body_markdown":"The exception is telling that a `Bundle_en_US.properties`, or `Bundle_en.properties`, or at least `Bundle.properties` file is expected in the root of the classpath, but there is actually none.\n\nMake sure that at least one of the mentioned files is present in the root of the classpath. Or, make sure that you provide the proper bundle name. For example, if the bundle files are actually been placed in the package `com.example.i18n`, then you need to pass `com.example.i18n.Bundle` as bundle name instead of `Bundle`.\n\nIn case you&#39;re using Eclipse &quot;Dynamic Web Project&quot;, the classpath root is represented by `src` folder, there where all your Java packages are. In case you&#39;re using a Maven project, the classpath root for resource files is represented by `src/main/resources` folder.\n\n### See also:\n\n- https://stackoverflow.com/questions/13540907/maven-and-jsf-webapp-structure-where-exactly-to-put-jsf-resources","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>The exception is telling that a <code>Bundle_en_US.properties</code>, or <code>Bundle_en.properties</code>, or at least <code>Bundle.properties</code> file is expected in the root of the classpath, but there is actually none.</p>\n<p>Make sure that at least one of the mentioned files is present in the root of the classpath. Or, make sure that you provide the proper bundle name. For example, if the bundle files are actually been placed in the package <code>com.example.i18n</code>, then you need to pass <code>com.example.i18n.Bundle</code> as bundle name instead of <code>Bundle</code>.</p>\n<p>In case you're using Eclipse &quot;Dynamic Web Project&quot;, the classpath root is represented by <code>src</code> folder, there where all your Java packages are. In case you're using a Maven project, the classpath root for resource files is represented by <code>src/main/resources</code> folder.</p>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/13540907/maven-and-jsf-webapp-structure-where-exactly-to-put-jsf-resources\">Maven and JSF webapp structure, where exactly to put JSF resources</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":486024,"reputation":641,"user_id":902678,"accept_rate":62,"display_name":"demonz demonz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1355869562,"creation_date":1355869562,"answer_id":13942527,"question_id":12986234,"body_markdown":"I had the same problemo, and balus solution fixed it.\r\n\r\nFor the record:\r\n\r\nWEB-INF\\faces-config is\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;faces-config\r\n    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee \r\n    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd&quot;\r\n    version=&quot;2.0&quot;&gt;\r\n        &lt;application&gt;\r\n            &lt;locale-config&gt;\r\n                &lt;default-locale&gt;en&lt;/default-locale&gt;\r\n            &lt;/locale-config&gt;\r\n            &lt;message-bundle&gt;\r\n                Message\r\n            &lt;/message-bundle&gt;\r\n        &lt;/application&gt;\r\n    &lt;/faces-config&gt;\r\n\r\nAnd had Message.properties under WebContent\\Resources (after mkyong&#39;s tutorial)\r\n\r\nthe pesky exception appeared even when i renamed the bundle to &quot;Message_en_us&quot; and &quot;Message_en&quot;. Moving it to src\\ worked. \r\n\r\nShould someone post the missing piece to make bundles work under resources,it would be a beautiful thing.\r\n","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I had the same problemo, and balus solution fixed it.</p>\n\n<p>For the record:</p>\n\n<p>WEB-INF\\faces-config is</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;faces-config\nxmlns=\"http://java.sun.com/xml/ns/javaee\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee \nhttp://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd\"\nversion=\"2.0\"&gt;\n    &lt;application&gt;\n        &lt;locale-config&gt;\n            &lt;default-locale&gt;en&lt;/default-locale&gt;\n        &lt;/locale-config&gt;\n        &lt;message-bundle&gt;\n            Message\n        &lt;/message-bundle&gt;\n    &lt;/application&gt;\n&lt;/faces-config&gt;\n</code></pre>\n\n<p>And had Message.properties under WebContent\\Resources (after mkyong's tutorial)</p>\n\n<p>the pesky exception appeared even when i renamed the bundle to \"Message_en_us\" and \"Message_en\". Moving it to src\\ worked. </p>\n\n<p>Should someone post the missing piece to make bundles work under resources,it would be a beautiful thing.</p>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1489076620,"creation_date":1391356142,"answer_id":21512564,"question_id":12986234,"body_markdown":"maven-tomcat-plugin\r\n--\r\nIf you start the Project using the `maven-tomcat-plugin` / `maven-tomcat7-plugin`, you must place the `Bundle.properties`, or even the `Resource.properties` in `src/main/webapp/WEB-INF/classes`. Dont ask why, its because how the plugin fake a tomcat.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<h2>maven-tomcat-plugin</h2>\n\n<p>If you start the Project using the <code>maven-tomcat-plugin</code> / <code>maven-tomcat7-plugin</code>, you must place the <code>Bundle.properties</code>, or even the <code>Resource.properties</code> in <code>src/main/webapp/WEB-INF/classes</code>. Dont ask why, its because how the plugin fake a tomcat.</p>\n"},{"tags":[],"owner":{"account_id":4915421,"reputation":81,"user_id":3959478,"display_name":"harry"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1408525328,"creation_date":1408525328,"answer_id":25400707,"question_id":12986234,"body_markdown":"If you are running the .java file in Eclipse you need to add the resource path in the build path . \r\nafter that you will not see this error","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>If you are running the .java file in Eclipse you need to add the resource path in the build path . \nafter that you will not see this error</p>\n"},{"tags":[],"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485548681,"creation_date":1485548681,"answer_id":41902447,"question_id":12986234,"body_markdown":"I had the same problem using Netbeans. I went to the project folder and copied the properties file. I think clicked &quot;build&quot; and then &quot;classes.&quot;  I added the properties file in that folder. That solved my problem.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I had the same problem using Netbeans. I went to the project folder and copied the properties file. I think clicked \"build\" and then \"classes.\"  I added the properties file in that folder. That solved my problem.</p>\n"},{"tags":[],"owner":{"account_id":1357022,"reputation":21,"user_id":1295217,"display_name":"trungvt89.it"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486534286,"creation_date":1486533782,"answer_id":42105803,"question_id":12986234,"body_markdown":"I use Eclipse (without Maven) so I place the `.properties` file in `src` folder that also contains the java source code, in order to have the `.properties` file in the `classes` folder after building the project. It works fine.\r\nTake a look at this post: [https://www.mkyong.com/jsf2/cant-find-bundle-for-base-name-xxx-locale-en_us/][1]\r\n\r\nHope this help you.\r\n\r\n\r\n  [1]: https://www.mkyong.com/jsf2/cant-find-bundle-for-base-name-xxx-locale-en_us/","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I use Eclipse (without Maven) so I place the <code>.properties</code> file in <code>src</code> folder that also contains the java source code, in order to have the <code>.properties</code> file in the <code>classes</code> folder after building the project. It works fine.\nTake a look at this post: <a href=\"https://www.mkyong.com/jsf2/cant-find-bundle-for-base-name-xxx-locale-en_us/\" rel=\"nofollow noreferrer\">https://www.mkyong.com/jsf2/cant-find-bundle-for-base-name-xxx-locale-en_us/</a></p>\n\n<p>Hope this help you.</p>\n"},{"tags":[],"owner":{"account_id":1729526,"reputation":673,"user_id":1583413,"display_name":"Mr. DMX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491001166,"creation_date":1491001166,"answer_id":43150818,"question_id":12986234,"body_markdown":"The problem must be that the resource-bunde &gt; base-name attribute at the **faces-config.xml** file has a different path to your properties. This happened to me on the firstcup Java EE tutorial, I gave a different package name on then project creation and then Glassfish was unable to find the properties folder which is on &quot;firstcup.web&quot;. \r\n\r\nI hope it helps.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>The problem must be that the resource-bunde > base-name attribute at the <strong>faces-config.xml</strong> file has a different path to your properties. This happened to me on the firstcup Java EE tutorial, I gave a different package name on then project creation and then Glassfish was unable to find the properties folder which is on \"firstcup.web\". </p>\n\n<p>I hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":3603762,"reputation":1569,"user_id":3006465,"display_name":"electrobabe"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1518306756,"creation_date":1518306756,"answer_id":48726842,"question_id":12986234,"body_markdown":"In my case the problem was using the language tag &quot;en_US&quot; in `Locale.forLanguageTag(..)` instead of &quot;en-US&quot; - use a dash instead of underline!\r\n\r\nAlso use `Locale.forLanguageTag(&quot;en-US&quot;)` instead of `new Locale(&quot;en_US&quot;)` or `new Locale(&quot;en_US&quot;)` to define a language (&quot;en&quot;) with a region (&quot;US&quot;) - but `new Locale(&quot;en&quot;)` works.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>In my case the problem was using the language tag \"en_US\" in <code>Locale.forLanguageTag(..)</code> instead of \"en-US\" - use a dash instead of underline!</p>\n\n<p>Also use <code>Locale.forLanguageTag(\"en-US\")</code> instead of <code>new Locale(\"en_US\")</code> or <code>new Locale(\"en_US\")</code> to define a language (\"en\") with a region (\"US\") - but <code>new Locale(\"en\")</code> works.</p>\n"},{"tags":[],"owner":{"account_id":10256091,"reputation":783,"user_id":7568895,"accept_rate":62,"display_name":"milosdju"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537057037,"creation_date":1537057037,"answer_id":52349904,"question_id":12986234,"body_markdown":"In my case I was dealing with **SpringBoot** project and I got the same exception. \r\n\r\nSolution is made by **adding env.properties file into classpath** (i.e. src/main/resource folder). What was making the issue is that in log4j configuration there was property like \r\n\r\n`&lt;Property name=&quot;basePath&quot;&gt;${bundle:env:log.file.path}&lt;/Property&gt;`","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>In my case I was dealing with <strong>SpringBoot</strong> project and I got the same exception. </p>\n\n<p>Solution is made by <strong>adding env.properties file into classpath</strong> (i.e. src/main/resource folder). What was making the issue is that in log4j configuration there was property like </p>\n\n<p><code>&lt;Property name=\"basePath\"&gt;${bundle:env:log.file.path}&lt;/Property&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":13125737,"reputation":1,"user_id":10387913,"display_name":"Dinca Adrian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1541364657,"creation_date":1541363874,"answer_id":53145221,"question_id":12986234,"body_markdown":"Make sure you didn&#39;t add the properties files in the wrong resources folder as there is one under &#39;Web Pages&#39; and one under &#39;Other Sources/...&#39;. They needed to be under &#39;Other Sources/...&#39;.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>Make sure you didn't add the properties files in the wrong resources folder as there is one under 'Web Pages' and one under 'Other Sources/...'. They needed to be under 'Other Sources/...'.</p>\n"},{"tags":[],"owner":{"account_id":16316701,"reputation":1,"user_id":11783603,"display_name":"Johnson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563133900,"creation_date":1563133900,"answer_id":57030656,"question_id":12986234,"body_markdown":"I was able to resolve the issue, the resource was in my project directories but when the junit utility tries to load it, it was returning an error of MissingResourceException. And the reason was the resource was in the not on the classpath of the test class package so when I added the cfg/ folder to my classpath path entry in eclipse and set the output directory in the build conf to the same class package the issue was resolved.\r\n\r\nWhen you try this approach just make sure, the classpath conf file shows the classpath entry of the resource directory (eg. cfg/) ","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I was able to resolve the issue, the resource was in my project directories but when the junit utility tries to load it, it was returning an error of MissingResourceException. And the reason was the resource was in the not on the classpath of the test class package so when I added the cfg/ folder to my classpath path entry in eclipse and set the output directory in the build conf to the same class package the issue was resolved.</p>\n\n<p>When you try this approach just make sure, the classpath conf file shows the classpath entry of the resource directory (eg. cfg/) </p>\n"},{"tags":[],"owner":{"account_id":17093482,"reputation":11,"user_id":12369038,"display_name":"Juan Carlos Dominguez Isaza"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584641341,"creation_date":1584641341,"answer_id":60762833,"question_id":12986234,"body_markdown":"In maven, folder resources, create the same package structure where the configuration files are located and copy them there","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>In maven, folder resources, create the same package structure where the configuration files are located and copy them there</p>\n"},{"tags":[],"owner":{"account_id":19387534,"reputation":449,"user_id":14176948,"display_name":"Alex Mandelias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1626768110,"creation_date":1626768110,"answer_id":68451488,"question_id":12986234,"body_markdown":"The `Bundle.properties` file must be in the directory of the `.class` files. If it is located in the `src` directory then you need to make sure to copy it to the `bin` (output) directory in the same package.","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>The <code>Bundle.properties</code> file must be in the directory of the <code>.class</code> files. If it is located in the <code>src</code> directory then you need to make sure to copy it to the <code>bin</code> (output) directory in the same package.</p>\n"},{"tags":[],"owner":{"account_id":9831735,"reputation":207,"user_id":7283182,"display_name":"Shubhasish Bhunia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672347530,"creation_date":1668787062,"answer_id":74492251,"question_id":12986234,"body_markdown":"Bundle names have to be fully qualified, like if your bundle **Bundle.properties**\r\n is inside **x.y.z** package, then you have to write `ResourceBundle.getBundle(&quot;x.y.z.Bundle&quot;);`","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>Bundle names have to be fully qualified, like if your bundle <strong>Bundle.properties</strong>\nis inside <strong>x.y.z</strong> package, then you have to write <code>ResourceBundle.getBundle(&quot;x.y.z.Bundle&quot;);</code></p>\n"}],"owner":{"account_id":1595517,"reputation":800,"user_id":1477749,"accept_rate":56,"display_name":"Md. Mahabubur Rahman"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":288349,"favorite_count":0,"down_vote_count":1,"up_vote_count":54,"answer_count":14,"score":53,"last_activity_date":1672347530,"creation_date":1350717371,"question_id":12986234,"body_markdown":"I&#39;m using a library that has a dependency on JSF.\r\n\r\nWhen I try to run my project, it show following exception massage.. \r\n\r\n    java.util.MissingResourceException: Can&#39;t find bundle for base name /Bundle, locale en_US\r\n\tat java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1427)\r\n\tat java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1250)\r\n\tat java.util.ResourceBundle.getBundle(ResourceBundle.java:705)\r\n\r\nAny ideas ?","title":"Can&#39;t find bundle for base name /Bundle, locale en_US","body":"<p>I'm using a library that has a dependency on JSF.</p>\n\n<p>When I try to run my project, it show following exception massage.. </p>\n\n<pre><code>java.util.MissingResourceException: Can't find bundle for base name /Bundle, locale en_US\nat java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1427)\nat java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1250)\nat java.util.ResourceBundle.getBundle(ResourceBundle.java:705)\n</code></pre>\n\n<p>Any ideas ?</p>\n"},{"tags":["java","project","imap","libraries"],"comments":[{"owner":{"account_id":458052,"reputation":9149,"user_id":857727,"display_name":"arnt"},"score":0,"creation_date":1672430742,"post_id":74955951,"comment_id":132290187,"body_markdown":"The [commit log](https://github.com/javaee/javamail/commits/master) says 16 of the last 20 commits were by Bill Shannon, who was diagnosed with cancer just when the commits stopped and died some time later. He was a great guy, a **great guy.** Ordinary humans don&#39;t just take over the work of someone like him.","body":"The <a href=\"https://github.com/javaee/javamail/commits/master\" rel=\"nofollow noreferrer\">commit log</a> says 16 of the last 20 commits were by Bill Shannon, who was diagnosed with cancer just when the commits stopped and died some time later. He was a great guy, a <b>great guy.</b> Ordinary humans don&#39;t just take over the work of someone like him."},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1672437478,"post_id":74955951,"comment_id":132291428,"body_markdown":"I&#39;d suggest the gimap commit log is here: https://github.com/javaee/javamail/commits/master/gimap/src/main","body":"I&#39;d suggest the gimap commit log is here: <a href=\"https://github.com/javaee/javamail/commits/master/gimap/src/main\" rel=\"nofollow noreferrer\">github.com/javaee/javamail/commits/master/gimap/src/main</a>"},{"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"score":0,"creation_date":1672437761,"post_id":74955951,"comment_id":132291476,"body_markdown":"the rest of the javamail project, to which Bill committed changes, was carried on here https://github.com/javaee/javamail/commits/master/gimap/src/main until release 2.1.1, just last week. So I&#39;m not convinced the loss of Bill Shannon dissuaded other developers from continuing the work.","body":"the rest of the javamail project, to which Bill committed changes, was carried on here <a href=\"https://github.com/javaee/javamail/commits/master/gimap/src/main\" rel=\"nofollow noreferrer\">github.com/javaee/javamail/commits/master/gimap/src/main</a> until release 2.1.1, just last week. So I&#39;m not convinced the loss of Bill Shannon dissuaded other developers from continuing the work."}],"owner":{"account_id":171978,"reputation":1460,"user_id":399723,"accept_rate":25,"display_name":"Douglas Held"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672347174,"creation_date":1672347174,"question_id":74955951,"body_markdown":"There was a project &quot;Gimap&quot; - to build onto the javax.mail system to support some Google extensions to IMAP protocol.\r\n\r\nThis project can still be found here: https://javaee.github.io/javamail/#Download_JavaMail_Release (or https://github.com/javaee/javamail/tree/master/gimap )\r\n\r\nThe underlying project javax.mail was sent out from Oracle and into Jakarta, now found here: https://github.com/jakartaee/mail-api\r\n\r\nbut I don&#39;t think Gimap was taken along. Can someone describe what happened to that, and where&#39;s the best place to find something equivalent based on Jakarta or any other currently supported libraries?","title":"Is there a Gimap project ported to derive support from Jakarta Mail?","body":"<p>There was a project &quot;Gimap&quot; - to build onto the javax.mail system to support some Google extensions to IMAP protocol.</p>\n<p>This project can still be found here: <a href=\"https://javaee.github.io/javamail/#Download_JavaMail_Release\" rel=\"nofollow noreferrer\">https://javaee.github.io/javamail/#Download_JavaMail_Release</a> (or <a href=\"https://github.com/javaee/javamail/tree/master/gimap\" rel=\"nofollow noreferrer\">https://github.com/javaee/javamail/tree/master/gimap</a> )</p>\n<p>The underlying project javax.mail was sent out from Oracle and into Jakarta, now found here: <a href=\"https://github.com/jakartaee/mail-api\" rel=\"nofollow noreferrer\">https://github.com/jakartaee/mail-api</a></p>\n<p>but I don't think Gimap was taken along. Can someone describe what happened to that, and where's the best place to find something equivalent based on Jakarta or any other currently supported libraries?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672347431,"post_id":74955930,"comment_id":132273884,"body_markdown":"Websockets, for example.","body":"Websockets, for example."},{"owner":{"account_id":4216,"reputation":34388,"user_id":6264,"accept_rate":88,"display_name":"Michiel Borkent"},"score":0,"creation_date":1672347593,"post_id":74955930,"comment_id":132273919,"body_markdown":"I see! So a websocket connection is described using a URI instead of a URL - why is this exactly?","body":"I see! So a websocket connection is described using a URI instead of a URL - why is this exactly?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1672347793,"post_id":74955930,"comment_id":132273966,"body_markdown":"Frankly, I don&#39;t know. I think URIs being more general  might make the API future proof and uniform once they decide to use some URIs that are not URLs, but don&#39;t quote me on that.","body":"Frankly, I don&#39;t know. I think URIs being more general  might make the API future proof and uniform once they decide to use some URIs that are not URLs, but don&#39;t quote me on that."},{"owner":{"account_id":4216,"reputation":34388,"user_id":6264,"accept_rate":88,"display_name":"Michiel Borkent"},"score":0,"creation_date":1672347844,"post_id":74955930,"comment_id":132273977,"body_markdown":"Right. The websocket API seems to be a different one:\n\nhttps://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Builder.html\n\nbut uniformity may be a good reason.","body":"Right. The websocket API seems to be a different one:  <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/WebSocket.Builder.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.net.http/jav&zwnj;&#8203;a/&hellip;</a>  but uniformity may be a good reason."},{"owner":{"account_id":10838690,"reputation":3209,"user_id":7970787,"display_name":"Alex R"},"score":1,"creation_date":1672349248,"post_id":74955930,"comment_id":132274286,"body_markdown":"I can think of two other potential reasons, the first being convenience: The URI class has a static factory `create` that does not require one to handle a checked exception. The second reason is that the URL class has a problem that not many people know about: When using the `equals` method of the URL class, that method does a DNS lookup.","body":"I can think of two other potential reasons, the first being convenience: The URI class has a static factory <code>create</code> that does not require one to handle a checked exception. The second reason is that the URL class has a problem that not many people know about: When using the <code>equals</code> method of the URL class, that method does a DNS lookup."}],"owner":{"account_id":4216,"reputation":34388,"user_id":6264,"accept_rate":88,"display_name":"Michiel Borkent"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1672346898,"creation_date":1672346898,"question_id":74955930,"body_markdown":"The [java.net.http](https://docs.oracle.com/en/java/javase/12/docs/api/java.net.http/java/net/http/package-summary.html) package takes URI to build a request. Is there an example of a working request URI that does not refer to http(s)?\r\n\r\nFor example:\r\n\r\n```\r\nHttpRequest.newBuilder()\r\n  .uri(new URI(&quot;https://postman-echo.com/get&quot;))\r\n```\r\n\r\nWhy does the builder take `URI` rather than a `URL`? Are there any working examples that demonstrate the usefulness of `URI` in this context, over `URL`?","title":"Is there an example of a java.net.http request with URI that does not refer to http(s)?","body":"<p>The <a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.net.http/java/net/http/package-summary.html\" rel=\"nofollow noreferrer\">java.net.http</a> package takes URI to build a request. Is there an example of a working request URI that does not refer to http(s)?</p>\n<p>For example:</p>\n<pre><code>HttpRequest.newBuilder()\n  .uri(new URI(&quot;https://postman-echo.com/get&quot;))\n</code></pre>\n<p>Why does the builder take <code>URI</code> rather than a <code>URL</code>? Are there any working examples that demonstrate the usefulness of <code>URI</code> in this context, over <code>URL</code>?</p>\n"},{"tags":["java","parsing","binary-data","serversocket"],"answers":[{"tags":[],"owner":{"account_id":439324,"reputation":32505,"user_id":828193,"accept_rate":85,"display_name":"user000001"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360477935,"creation_date":1360477495,"answer_id":14795293,"question_id":14795269,"body_markdown":"    try {\r\n        char [] cbuf = new char[16];\r\n        char databegin = cbuf[0];\r\n        char [] version = Arrays.copyOfRange(cbuf, 1, 6) \r\n        char [] product_typep = Arrays.copyOfRange(cbuf, 7, 12)\r\n        char []data_lendth = Arrays.copyOfRange(cbuf, 13, 15)\r\n\r\n    } catch(Error e){\r\n        System.out.println(e);\r\n    }","title":"Parsing binary data in java received over TCP socket server","body":"<pre><code>try {\n    char [] cbuf = new char[16];\n    char databegin = cbuf[0];\n    char [] version = Arrays.copyOfRange(cbuf, 1, 6) \n    char [] product_typep = Arrays.copyOfRange(cbuf, 7, 12)\n    char []data_lendth = Arrays.copyOfRange(cbuf, 13, 15)\n\n} catch(Error e){\n    System.out.println(e);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1360477676,"creation_date":1360477676,"answer_id":14795310,"question_id":14795269,"body_markdown":"You might get the data via the [ByteArrayOutputStream][1]\r\nAnd then parse the bytes by applying masks (mainly AND, OR).\r\n\r\nTake a look at [This question][2]\r\n\r\nHope this helps\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html\r\n  [2]: https://stackoverflow.com/questions/8274966/reading-a-byte-array-from-socket","title":"Parsing binary data in java received over TCP socket server","body":"<p>You might get the data via the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html\" rel=\"nofollow noreferrer\">ByteArrayOutputStream</a>\nAnd then parse the bytes by applying masks (mainly AND, OR).</p>\n\n<p>Take a look at <a href=\"https://stackoverflow.com/questions/8274966/reading-a-byte-array-from-socket\">This question</a></p>\n\n<p>Hope this helps</p>\n"},{"tags":[],"owner":{"account_id":2323814,"reputation":13662,"user_id":2038768,"display_name":"Mikhail Vladimirov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360478034,"creation_date":1360477730,"answer_id":14795319,"question_id":14795269,"body_markdown":"    byte [] data = receiveData ();\r\n\r\n    int dataBegin = data [0];           // Once field is 1-byte, it is simple!\r\n    int version = data [1] &amp; 0x0F;      // Use shift (&gt;&gt;&gt;) and binary &quot;and&quot; (&amp;)\r\n    int returnCode =                    // to extract value of fields that are\r\n        (data [1] &gt;&gt;&gt; 4) &amp; 0x0F;        // smaller than one byte\r\n    byte [] productCode =               // Copy fixed-size portions of data\r\n        new byte [] {                   // into separate arrays using hardcode\r\n            data [2], data [3],         // (as here),  or System.arrayCopy\r\n            data [4], data [5],         // in case field occupies quite\r\n            data [6]};                  // a many bytes.\r\n    int dataLength =                    // Use shift (&lt;&lt;) binary or (|) to \r\n        (data [7] &amp; 0xFF) |             // Combine several bytes into one integer\r\n        ((data [8] &amp; 0xFF) &lt;&lt; 8);       // We assume little-endian encoding here","title":"Parsing binary data in java received over TCP socket server","body":"<pre><code>byte [] data = receiveData ();\n\nint dataBegin = data [0];           // Once field is 1-byte, it is simple!\nint version = data [1] &amp; 0x0F;      // Use shift (&gt;&gt;&gt;) and binary \"and\" (&amp;)\nint returnCode =                    // to extract value of fields that are\n    (data [1] &gt;&gt;&gt; 4) &amp; 0x0F;        // smaller than one byte\nbyte [] productCode =               // Copy fixed-size portions of data\n    new byte [] {                   // into separate arrays using hardcode\n        data [2], data [3],         // (as here),  or System.arrayCopy\n        data [4], data [5],         // in case field occupies quite\n        data [6]};                  // a many bytes.\nint dataLength =                    // Use shift (&lt;&lt;) binary or (|) to \n    (data [7] &amp; 0xFF) |             // Combine several bytes into one integer\n    ((data [8] &amp; 0xFF) &lt;&lt; 8);       // We assume little-endian encoding here\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1360477938,"creation_date":1360477938,"answer_id":14795349,"question_id":14795269,"body_markdown":"Try java.io.DataInputStream:\r\n\r\n\t\tDataInputStream dis = new DataInputStream(in);\r\n\t\tbyte b = dis.readByte();\r\n\t\tint version = (b &gt;&gt; 4) &amp; 0xF;\r\n\t\tint returnType = b &amp; 0xF;\r\n\t\tbyte[] productCode = new byte[5];\r\n\t\tdis.readFully(productCode);\r\n\t\tint len = dis.readShort() &amp; 0xFFFF;\r\n","title":"Parsing binary data in java received over TCP socket server","body":"<p>Try java.io.DataInputStream:</p>\n\n<pre><code>    DataInputStream dis = new DataInputStream(in);\n    byte b = dis.readByte();\n    int version = (b &gt;&gt; 4) &amp; 0xF;\n    int returnType = b &amp; 0xF;\n    byte[] productCode = new byte[5];\n    dis.readFully(productCode);\n    int len = dis.readShort() &amp; 0xFFFF;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1426019,"reputation":4217,"user_id":1356883,"display_name":"kofemann"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360486713,"creation_date":1360486713,"answer_id":14796139,"question_id":14795269,"body_markdown":"I would got for some king of package reader:\r\n\r\n    class Record {\r\n\r\n       .....\r\n\r\n       Record static fromBytes(byte[] bytes) {\r\n           // here use ByteBuffer or DataInputStream to extract filds\r\n           ......\r\n       }\r\n    }\r\n\r\n\r\n    Record readNextRecord(InputStream in) {\r\n        int len = in.read() &amp;&amp; 0xFF;\r\n        byte[] data = new byte[len];\r\n        in.read(data);\r\n        return Record.fromBytes(data)\r\n    }\r\n\r\n\r\n\r\n    {\r\n      InputStream in = ....;\r\n      Record r readNextRecord(in);\r\n      process (r);\r\n    }\r\n\r\nOf course you need to add error handling. In general, for something which should run reliable, I will suggest to use NIO framework like Grizzly or Netty.","title":"Parsing binary data in java received over TCP socket server","body":"<p>I would got for some king of package reader:</p>\n\n<pre><code>class Record {\n\n   .....\n\n   Record static fromBytes(byte[] bytes) {\n       // here use ByteBuffer or DataInputStream to extract filds\n       ......\n   }\n}\n\n\nRecord readNextRecord(InputStream in) {\n    int len = in.read() &amp;&amp; 0xFF;\n    byte[] data = new byte[len];\n    in.read(data);\n    return Record.fromBytes(data)\n}\n\n\n\n{\n  InputStream in = ....;\n  Record r readNextRecord(in);\n  process (r);\n}\n</code></pre>\n\n<p>Of course you need to add error handling. In general, for something which should run reliable, I will suggest to use NIO framework like Grizzly or Netty.</p>\n"},{"tags":[],"owner":{"account_id":2015227,"reputation":833,"user_id":1802697,"display_name":"Igor Maznitsa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1406208424,"creation_date":1406208424,"answer_id":24935073,"question_id":14795269,"body_markdown":"if use the [java binary block parser][1] then code will look like\r\n\r\n    class Parsed { \r\n      @Bin byte begin; \r\n      @Bin(type = BinType.BIT) int version; \r\n      @Bin(type = BinType.BIT) int returnType;\r\n      @Bin byte [] productCode;\r\n      @Bin(type = BinType.USHORT) int dataLength;\r\n    }\r\n    final Parsed parsed = JBBPParser.prepare(&quot;byte begin; bit:4 version; bit:4 returnType; byte [5] productCode; ushort dataLength;&quot;)\r\n            .parse(new byte[]{0x23,0x21,(byte)0x90,0x23,0x21,0x22,0x12,0x00,(byte)0xAA})\r\n            .mapTo(Parsed.class);\r\n    \r\n    assertEquals(0x23, parsed.begin);\r\n    assertEquals(0x01, parsed.version);\r\n    assertEquals(0x02, parsed.returnType);\r\n    assertArrayEquals(new byte[]{(byte)0x90,0x23,0x21,0x22,0x12}, parsed.productCode);\r\n    assertEquals(0x00AA,parsed.dataLength);\r\n\r\n\r\n  [1]: https://code.google.com/p/java-binary-block-parser/","title":"Parsing binary data in java received over TCP socket server","body":"<p>if use the <a href=\"https://code.google.com/p/java-binary-block-parser/\" rel=\"nofollow\">java binary block parser</a> then code will look like</p>\n\n<pre><code>class Parsed { \n  @Bin byte begin; \n  @Bin(type = BinType.BIT) int version; \n  @Bin(type = BinType.BIT) int returnType;\n  @Bin byte [] productCode;\n  @Bin(type = BinType.USHORT) int dataLength;\n}\nfinal Parsed parsed = JBBPParser.prepare(\"byte begin; bit:4 version; bit:4 returnType; byte [5] productCode; ushort dataLength;\")\n        .parse(new byte[]{0x23,0x21,(byte)0x90,0x23,0x21,0x22,0x12,0x00,(byte)0xAA})\n        .mapTo(Parsed.class);\n\nassertEquals(0x23, parsed.begin);\nassertEquals(0x01, parsed.version);\nassertEquals(0x02, parsed.returnType);\nassertArrayEquals(new byte[]{(byte)0x90,0x23,0x21,0x22,0x12}, parsed.productCode);\nassertEquals(0x00AA,parsed.dataLength);\n</code></pre>\n"}],"owner":{"account_id":2348865,"reputation":1,"user_id":2058277,"display_name":"user2058277"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3346,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":6,"score":0,"last_activity_date":1672346627,"creation_date":1360477258,"question_id":14795269,"body_markdown":"I have a socket server which keeps listening to incoming requests. The data received will be in the form of binary array of bytes.\r\nData format is something like this.\r\n**2321902321221200AA**\r\n\r\n\r\n - Whereas **1** byte is data begin\r\n - **4** bits is version\r\n - **4** bits is data return type\r\n - **5** bytes are product code\r\n - **2** bytes data length\r\n \r\nThe question is, how to parse the data and segregate the parameters.\r\n \r\nThanks in advance!!","title":"Parsing binary data in java received over TCP socket server","body":"<p>I have a socket server which keeps listening to incoming requests. The data received will be in the form of binary array of bytes.\nData format is something like this.\n<strong>2321902321221200AA</strong></p>\n\n<ul>\n<li>Whereas <strong>1</strong> byte is data begin</li>\n<li><strong>4</strong> bits is version</li>\n<li><strong>4</strong> bits is data return type</li>\n<li><strong>5</strong> bytes are product code</li>\n<li><strong>2</strong> bytes data length</li>\n</ul>\n\n<p>The question is, how to parse the data and segregate the parameters.</p>\n\n<p>Thanks in advance!!</p>\n"},{"tags":["java","multithreading","spring-batch","partitioning"],"answers":[{"tags":[],"owner":{"account_id":9446836,"reputation":817,"user_id":7025246,"accept_rate":50,"display_name":"Sushil Behera"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566338247,"creation_date":1566338247,"answer_id":57582015,"question_id":57471959,"body_markdown":"\r\nThere is basically fundamental differences here when you use multi-threaded steps and partitions.\r\n\r\nMulti-threaded steps are single process so it is not a good idea to use this if you have persisted state for processor/writer. However say if you just generating a report without saving anything this is a good choice.\r\n\r\nAs you have mentioned say you want to process a flat file and say you want store the records in DB then you can use remote chunking concept assuming your reader is not heavy.\r\n\r\nPartitioner will create separate process for a each set of data you can use logically divide.\r\n\r\nHope this helps.","title":"What is the difference between Multi-threaded Step and Local Partitioning in spring batch?","body":"<p>There is basically fundamental differences here when you use multi-threaded steps and partitions.</p>\n\n<p>Multi-threaded steps are single process so it is not a good idea to use this if you have persisted state for processor/writer. However say if you just generating a report without saving anything this is a good choice.</p>\n\n<p>As you have mentioned say you want to process a flat file and say you want store the records in DB then you can use remote chunking concept assuming your reader is not heavy.</p>\n\n<p>Partitioner will create separate process for a each set of data you can use logically divide.</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":27385946,"reputation":11,"user_id":20889748,"display_name":"David Song"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672346235,"creation_date":1672346235,"answer_id":74955847,"question_id":57471959,"body_markdown":"based on my understanding, partition is typically used for remote processing.  Partition master (or manager) step will create multiple identical workers. The number of works are the given grid size. For local processing, those workers are identical, meaning the same reader, writer objects, but execute on different thread with different chunks of input provided by the customized partitioner. However, if the worker step has listeners, before/after step methods, those methods will be call by each worker; on the contrary, those method get called only once in multi-thread step scheme. Other than that, I don&#39;t see any differences for local processing. \r\n\r\nI personally suggest don&#39;t use partition for local processing, use multi-thread step instead. There are so many open source packages, don&#39;t use them if you don&#39;t feel comfortable. \r\n\r\n\r\n ","title":"What is the difference between Multi-threaded Step and Local Partitioning in spring batch?","body":"<p>based on my understanding, partition is typically used for remote processing.  Partition master (or manager) step will create multiple identical workers. The number of works are the given grid size. For local processing, those workers are identical, meaning the same reader, writer objects, but execute on different thread with different chunks of input provided by the customized partitioner. However, if the worker step has listeners, before/after step methods, those methods will be call by each worker; on the contrary, those method get called only once in multi-thread step scheme. Other than that, I don't see any differences for local processing.</p>\n<p>I personally suggest don't use partition for local processing, use multi-thread step instead. There are so many open source packages, don't use them if you don't feel comfortable.</p>\n"}],"owner":{"account_id":3163862,"reputation":36940,"user_id":2674303,"accept_rate":62,"display_name":"gstackoverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1017,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1672346235,"creation_date":1565676361,"question_id":57471959,"body_markdown":"I&#39;ve the following [doc][1].\r\n\r\nAnd there are mentioned that:\r\n\r\n&gt; 1.1. Multi-threaded Step The simplest way to start parallel processing is to add a TaskExecutor to your Step configuration.\r\n&gt; \r\n&gt; When using java configuration, a TaskExecutor can be added to the step\r\n&gt; as shown in the following example:\r\n\r\n    @Bean\r\n    public TaskExecutor taskExecutor(){\r\n        return new SimpleAsyncTaskExecutor(&quot;spring_batch&quot;);\r\n    }\r\n    \r\n    @Bean\r\n    public Step sampleStep(TaskExecutor taskExecutor) {\r\n            return this.stepBuilderFactory.get(&quot;sampleStep&quot;)\r\n                                    .&lt;String, String&gt;chunk(10)\r\n                                    .reader(itemReader())\r\n                                    .writer(itemWriter())\r\n                                    .taskExecutor(taskExecutor)\r\n                                    .build();\r\n    }\r\n\r\n\r\n&gt; The result of the above configuration is that the Step executes by\r\n&gt; reading, processing, and writing each chunk of items (each commit\r\n&gt; interval) in a separate thread of execution. Note that this means\r\n&gt; there is no fixed order for the items to be processed, and a chunk\r\n&gt; might contain items that are non-consecutive compared to the\r\n&gt; single-threaded case. In addition to any limits placed by the task\r\n&gt; executor (such as whether it is backed by a thread pool), there is a\r\n&gt; throttle limit in the tasklet configuration which defaults to 4. You\r\n&gt; may need to increase this to ensure that a thread pool is fully\r\n&gt; utilized.\r\n\r\n\r\nBut before I thought that it should be achieved by local partitioning and I should provide a partitioner which say how to divide data into pieces. Multi-threaded Step should do it automatically. \r\n\r\nQuestion\r\n-\r\n\r\nCould you explain how does it work ? How can I manage it besides the thread number?  Will it work for flat file?\r\n\r\nP.S.\r\n-\r\nI created the example:\r\n\r\n    @Configuration\r\n    public class MultithreadedStepConfig {\r\n    \r\n        @Autowired\r\n        public JobBuilderFactory jobBuilderFactory;\r\n    \r\n        @Autowired\r\n        public StepBuilderFactory stepBuilderFactory;\r\n        @Autowired\r\n        private ToLowerCasePersonProcessor toLowerCasePersonProcessor;\r\n    \r\n        @Autowired\r\n        private DbPersonWriter dbPersonWriter;\r\n    \r\n        @Value(&quot;${app.single-file}&quot;)\r\n        Resource resources;\r\n    \r\n        @Bean\r\n        public Job job(Step databaseToDataBaseLowercaseSlaveStep) {\r\n            return jobBuilderFactory.get(&quot;myMultiThreadedJob&quot;)\r\n                    .incrementer(new RunIdIncrementer())\r\n                    .flow(csvToDataBaseSlaveStep())\r\n                    .end()\r\n                    .build();\r\n        }\r\n    \r\n        private Step csvToDataBaseSlaveStep() {\r\n            return stepBuilderFactory.get(&quot;csvToDatabaseStep&quot;)\r\n                    .&lt;Person, Person&gt;chunk(50)\r\n                    .reader(csvPersonReaderMulti())\r\n                    .processor(toLowerCasePersonProcessor)\r\n                    .writer(dbPersonWriter)\r\n                    .taskExecutor(jobTaskExecutorMultiThreaded())\r\n                    .build();\r\n    \r\n        }\r\n    \r\n        @Bean\r\n        @StepScope\r\n        public FlatFileItemReader csvPersonReaderMulti() {\r\n            return new FlatFileItemReaderBuilder()\r\n                    .name(&quot;csvPersonReaderSplitted&quot;)\r\n                    .resource(resources)\r\n                    .delimited()\r\n                    .names(new String[]{&quot;firstName&quot;, &quot;lastName&quot;})\r\n                    .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;Person&gt;() {{\r\n                        setTargetType(Person.class);\r\n                    }})\r\n                    .saveState(false)\r\n                    .build();\r\n    \r\n        }\r\n    \r\n        @Bean\r\n        public TaskExecutor jobTaskExecutorMultiThreaded() {\r\n            ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\r\n            // there are 21 sites currently hence we have 21 threads\r\n            taskExecutor.setMaxPoolSize(30);\r\n            taskExecutor.setCorePoolSize(25);\r\n            taskExecutor.setThreadGroupName(&quot;multi-&quot;);\r\n            taskExecutor.setThreadNamePrefix(&quot;multi-&quot;);\r\n            taskExecutor.afterPropertiesSet();\r\n            return taskExecutor;\r\n        }\r\n    }\r\n\r\n\r\nAnd it really works according the log but I want to know details. Is it better than self written partitioner ?\r\n  [1]: https://docs.spring.io/spring-batch/4.1.x/reference/html/scalability.html\r\n","title":"What is the difference between Multi-threaded Step and Local Partitioning in spring batch?","body":"<p>I've the following <a href=\"https://docs.spring.io/spring-batch/4.1.x/reference/html/scalability.html\" rel=\"nofollow noreferrer\">doc</a>.</p>\n\n<p>And there are mentioned that:</p>\n\n<blockquote>\n  <p>1.1. Multi-threaded Step The simplest way to start parallel processing is to add a TaskExecutor to your Step configuration.</p>\n  \n  <p>When using java configuration, a TaskExecutor can be added to the step\n  as shown in the following example:</p>\n</blockquote>\n\n<pre><code>@Bean\npublic TaskExecutor taskExecutor(){\n    return new SimpleAsyncTaskExecutor(\"spring_batch\");\n}\n\n@Bean\npublic Step sampleStep(TaskExecutor taskExecutor) {\n        return this.stepBuilderFactory.get(\"sampleStep\")\n                                .&lt;String, String&gt;chunk(10)\n                                .reader(itemReader())\n                                .writer(itemWriter())\n                                .taskExecutor(taskExecutor)\n                                .build();\n}\n</code></pre>\n\n<blockquote>\n  <p>The result of the above configuration is that the Step executes by\n  reading, processing, and writing each chunk of items (each commit\n  interval) in a separate thread of execution. Note that this means\n  there is no fixed order for the items to be processed, and a chunk\n  might contain items that are non-consecutive compared to the\n  single-threaded case. In addition to any limits placed by the task\n  executor (such as whether it is backed by a thread pool), there is a\n  throttle limit in the tasklet configuration which defaults to 4. You\n  may need to increase this to ensure that a thread pool is fully\n  utilized.</p>\n</blockquote>\n\n<p>But before I thought that it should be achieved by local partitioning and I should provide a partitioner which say how to divide data into pieces. Multi-threaded Step should do it automatically. </p>\n\n<h2>Question</h2>\n\n<p>Could you explain how does it work ? How can I manage it besides the thread number?  Will it work for flat file?</p>\n\n<h2>P.S.</h2>\n\n<p>I created the example:</p>\n\n<pre><code>@Configuration\npublic class MultithreadedStepConfig {\n\n    @Autowired\n    public JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    public StepBuilderFactory stepBuilderFactory;\n    @Autowired\n    private ToLowerCasePersonProcessor toLowerCasePersonProcessor;\n\n    @Autowired\n    private DbPersonWriter dbPersonWriter;\n\n    @Value(\"${app.single-file}\")\n    Resource resources;\n\n    @Bean\n    public Job job(Step databaseToDataBaseLowercaseSlaveStep) {\n        return jobBuilderFactory.get(\"myMultiThreadedJob\")\n                .incrementer(new RunIdIncrementer())\n                .flow(csvToDataBaseSlaveStep())\n                .end()\n                .build();\n    }\n\n    private Step csvToDataBaseSlaveStep() {\n        return stepBuilderFactory.get(\"csvToDatabaseStep\")\n                .&lt;Person, Person&gt;chunk(50)\n                .reader(csvPersonReaderMulti())\n                .processor(toLowerCasePersonProcessor)\n                .writer(dbPersonWriter)\n                .taskExecutor(jobTaskExecutorMultiThreaded())\n                .build();\n\n    }\n\n    @Bean\n    @StepScope\n    public FlatFileItemReader csvPersonReaderMulti() {\n        return new FlatFileItemReaderBuilder()\n                .name(\"csvPersonReaderSplitted\")\n                .resource(resources)\n                .delimited()\n                .names(new String[]{\"firstName\", \"lastName\"})\n                .fieldSetMapper(new BeanWrapperFieldSetMapper&lt;Person&gt;() {{\n                    setTargetType(Person.class);\n                }})\n                .saveState(false)\n                .build();\n\n    }\n\n    @Bean\n    public TaskExecutor jobTaskExecutorMultiThreaded() {\n        ThreadPoolTaskExecutor taskExecutor = new ThreadPoolTaskExecutor();\n        // there are 21 sites currently hence we have 21 threads\n        taskExecutor.setMaxPoolSize(30);\n        taskExecutor.setCorePoolSize(25);\n        taskExecutor.setThreadGroupName(\"multi-\");\n        taskExecutor.setThreadNamePrefix(\"multi-\");\n        taskExecutor.afterPropertiesSet();\n        return taskExecutor;\n    }\n}\n</code></pre>\n\n<p>And it really works according the log but I want to know details. Is it better than self written partitioner ?</p>\n"},{"tags":["java","java-8","java-stream"],"answers":[{"tags":[],"owner":{"account_id":14488140,"reputation":1434,"user_id":10465344,"display_name":"Vinay Hegde"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566651867,"creation_date":1566651867,"answer_id":57638219,"question_id":57638165,"body_markdown":"Try this : \r\n\r\nLets say `String[] array = { &quot;V&quot;,&quot;I&quot;,&quot;N&quot;,&quot;A&quot;,&quot;Y&quot; };` then,\r\n\r\n    Arrays.stream(array) \r\n            .map(ele-&gt; index.getAndIncrement() + &quot; -&gt; &quot; + ele) \r\n            .forEach(System.out::println); \r\n\r\nOutput : \r\n\r\n    0 -&gt; V\r\n    1 -&gt; I\r\n    2 -&gt; N\r\n    3 -&gt; A\r\n    4 -&gt; Y","title":"How to map elements to their index using streams?","body":"<p>Try this : </p>\n\n<p>Lets say <code>String[] array = { \"V\",\"I\",\"N\",\"A\",\"Y\" };</code> then,</p>\n\n<pre><code>Arrays.stream(array) \n        .map(ele-&gt; index.getAndIncrement() + \" -&gt; \" + ele) \n        .forEach(System.out::println); \n</code></pre>\n\n<p>Output : </p>\n\n<pre><code>0 -&gt; V\n1 -&gt; I\n2 -&gt; N\n3 -&gt; A\n4 -&gt; Y\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1566652990,"creation_date":1566651954,"answer_id":57638229,"question_id":57638165,"body_markdown":"You `i` variable is not effectively final.\r\n\r\nYou can use [`AtomicInteger`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html) as `Integer` wrapper:\r\n````\r\nStream&lt;String&gt; myStream = Arrays.asList(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;).stream();\r\nAtomicInteger atomicInteger = new AtomicInteger(0);\r\nMap&lt;Integer, String&gt; result3 = myStream.collect(Collectors.toMap(x -&gt; atomicInteger.getAndIncrement(), Function.identity()));\r\n````\r\n\r\nI consider it a bit hacky because it only solves the problem of effectively final variable. Since it is a special ThreadSafe version it might introduce some overhead. Pure `stream` solution in the [answer by Samuel Philipp](https://stackoverflow.com/a/57638246/4956907) might better fit your needs.","title":"How to map elements to their index using streams?","body":"<p>You <code>i</code> variable is not effectively final.</p>\n\n<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"noreferrer\"><code>AtomicInteger</code></a> as <code>Integer</code> wrapper:</p>\n\n<pre><code>Stream&lt;String&gt; myStream = Arrays.asList(\"one\",\"two\",\"three\").stream();\nAtomicInteger atomicInteger = new AtomicInteger(0);\nMap&lt;Integer, String&gt; result3 = myStream.collect(Collectors.toMap(x -&gt; atomicInteger.getAndIncrement(), Function.identity()));\n</code></pre>\n\n<p>I consider it a bit hacky because it only solves the problem of effectively final variable. Since it is a special ThreadSafe version it might introduce some overhead. Pure <code>stream</code> solution in the <a href=\"https://stackoverflow.com/a/57638246/4956907\">answer by Samuel Philipp</a> might better fit your needs.</p>\n"},{"tags":[],"owner":{"account_id":13389989,"reputation":10689,"user_id":9662601,"display_name":"Samuel Philipp"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1567003225,"creation_date":1566652083,"answer_id":57638246,"question_id":57638165,"body_markdown":"You can use an [`IntStream`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToInt-java.util.function.ToIntFunction-) to solve this:\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;);\r\n    Map&lt;Integer, String&gt; map = IntStream.range(0, list.size()).boxed()\r\n            .collect(Collectors.toMap(Function.identity(), list::get));\r\n\r\nYou create an `IntStream` from `0` to `list.size() - 1` ([`IntStream.range()`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-) excludes the last value from the stream) and map each index to the value in your list. The advantage of this solution is, that it will also work with parallel streams, which is not possible with the use of an `AtomicInteger`.\r\n\r\nSo the result in this case would be:\r\n\r\n    {0=one, 1=two, 2=three}\r\n\r\nTo start the first index at `1` you can just add `1` during collect:\r\n\r\n    List&lt;String&gt; list = Arrays.asList(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\r\n    Map&lt;Integer, String&gt; map = IntStream.range(0, list.size()).boxed()\r\n            .collect(Collectors.toMap(i -&gt; i + 1, list::get));\r\n\r\nThis will result in this:\r\n\r\n    {1=one, 2=two, 3=three}","title":"How to map elements to their index using streams?","body":"<p>You can use an <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToInt-java.util.function.ToIntFunction-\" rel=\"nofollow noreferrer\"><code>IntStream</code></a> to solve this:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"one\",\"two\",\"three\");\nMap&lt;Integer, String&gt; map = IntStream.range(0, list.size()).boxed()\n        .collect(Collectors.toMap(Function.identity(), list::get));\n</code></pre>\n\n<p>You create an <code>IntStream</code> from <code>0</code> to <code>list.size() - 1</code> (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-\" rel=\"nofollow noreferrer\"><code>IntStream.range()</code></a> excludes the last value from the stream) and map each index to the value in your list. The advantage of this solution is, that it will also work with parallel streams, which is not possible with the use of an <code>AtomicInteger</code>.</p>\n\n<p>So the result in this case would be:</p>\n\n<pre><code>{0=one, 1=two, 2=three}\n</code></pre>\n\n<p>To start the first index at <code>1</code> you can just add <code>1</code> during collect:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"one\", \"two\", \"three\");\nMap&lt;Integer, String&gt; map = IntStream.range(0, list.size()).boxed()\n        .collect(Collectors.toMap(i -&gt; i + 1, list::get));\n</code></pre>\n\n<p>This will result in this:</p>\n\n<pre><code>{1=one, 2=two, 3=three}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4816916,"reputation":16538,"user_id":3888766,"accept_rate":100,"display_name":"Fullstack Guy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566654230,"creation_date":1566652694,"answer_id":57638312,"question_id":57638165,"body_markdown":"We can use the `List.indexOf(Object o)` method to get the index of the element in the list, while constructing the `Map`:\r\n\r\n     List&lt;String&gt; list = Arrays.asList(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;);\r\n     Map&lt;Integer, String&gt; result = list.stream()\r\n                                       .collect(Collectors.toMap(\r\n                                        k -&gt; list.indexOf(k) + 1, \r\n                                        Function.identity(),\r\n                                        (v1, v2) -&gt; v2));\r\n                                        \r\n     System.out.println(result);\r\n\r\nIf there are duplicates in the list, the index of the first occurence of the element will be added in the final map. Also to resolve the merge error in the map during a key collision we need to ensure that there is a merge function supllied to the `toMap(keyMapper, valueMapper, mergeFunction)`\r\n\r\nOutput:\r\n\r\n    {1=one, 2=two, 3=three}","title":"How to map elements to their index using streams?","body":"<p>We can use the <code>List.indexOf(Object o)</code> method to get the index of the element in the list, while constructing the <code>Map</code>:</p>\n\n<pre><code> List&lt;String&gt; list = Arrays.asList(\"one\",\"two\",\"three\");\n Map&lt;Integer, String&gt; result = list.stream()\n                                   .collect(Collectors.toMap(\n                                    k -&gt; list.indexOf(k) + 1, \n                                    Function.identity(),\n                                    (v1, v2) -&gt; v2));\n\n System.out.println(result);\n</code></pre>\n\n<p>If there are duplicates in the list, the index of the first occurence of the element will be added in the final map. Also to resolve the merge error in the map during a key collision we need to ensure that there is a merge function supllied to the <code>toMap(keyMapper, valueMapper, mergeFunction)</code></p>\n\n<p>Output:</p>\n\n<pre><code>{1=one, 2=two, 3=three}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8129122,"reputation":1496,"user_id":6122976,"display_name":"wilmol"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1566722481,"creation_date":1566722481,"answer_id":57644505,"question_id":57638165,"body_markdown":"[Guava](https://github.com/google/guava) has a static method ```Streams#mapWithIndex```\r\n\r\n```\r\nStream&lt;String&gt; myStream = Stream.of(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;);\r\nMap&lt;Long, String&gt; result3 = Streams.mapWithIndex(myStream, (s, i) -&gt; Maps.immutableEntry(i + 1, s))\r\n    .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n\r\n// {1=one, 2=two, 3=three}\r\nSystem.out.println(result3);\r\n```","title":"How to map elements to their index using streams?","body":"<p><a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a> has a static method <code>Streams#mapWithIndex</code></p>\n\n<pre><code>Stream&lt;String&gt; myStream = Stream.of(\"one\",\"two\",\"three\");\nMap&lt;Long, String&gt; result3 = Streams.mapWithIndex(myStream, (s, i) -&gt; Maps.immutableEntry(i + 1, s))\n    .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n\n// {1=one, 2=two, 3=three}\nSystem.out.println(result3);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1566811461,"creation_date":1566811461,"answer_id":57655144,"question_id":57638165,"body_markdown":"A clean solution not requiring random access source data, is\r\n\r\n    Map&lt;Integer,String&gt; result = Stream.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)\r\n        .collect(HashMap::new, (m,s) -&gt; m.put(m.size() + 1, s),\r\n            (m1,m2) -&gt; {\r\n                int offset = m1.size();\r\n                m2.forEach((i,s) -&gt; m1.put(i + offset, s));\r\n            });\r\n\r\nThis also works with parallel streams.\r\n\r\nIn the unlikely case that this is a recurring task, it’s worth putting the logic into a reusable collector, including some optimizations:\r\n\r\n    public static &lt;T&gt; Collector&lt;T,?,Map&lt;Integer,T&gt;&gt; toIndexMap() {\r\n        return Collector.of(\r\n            HashMap::new,\r\n            (m,s) -&gt; m.put(m.size() + 1, s),\r\n            (m1,m2) -&gt; {\r\n                if(m1.isEmpty()) return m2;\r\n                if(!m2.isEmpty()) {\r\n                    int offset = m1.size();\r\n                    m2.forEach((i,s) -&gt; m1.put(i + offset, s));\r\n                }\r\n                return m1;\r\n            });\r\n    }\r\n\r\nWhich can then be used like\r\n\r\n    Map&lt;Integer,String&gt; result = Stream.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;)\r\n        .collect(MyCollectors.toIndexMap());\r\n\r\nor\r\n\r\n    Map&lt;Integer,Integer&gt; result = IntStream.rangeClosed(1, 1000)\r\n        .boxed().parallel()\r\n        .collect(MyCollectors.toIndexMap());\r\n","title":"How to map elements to their index using streams?","body":"<p>A clean solution not requiring random access source data, is</p>\n\n<pre><code>Map&lt;Integer,String&gt; result = Stream.of(\"one\", \"two\", \"three\")\n    .collect(HashMap::new, (m,s) -&gt; m.put(m.size() + 1, s),\n        (m1,m2) -&gt; {\n            int offset = m1.size();\n            m2.forEach((i,s) -&gt; m1.put(i + offset, s));\n        });\n</code></pre>\n\n<p>This also works with parallel streams.</p>\n\n<p>In the unlikely case that this is a recurring task, it’s worth putting the logic into a reusable collector, including some optimizations:</p>\n\n<pre><code>public static &lt;T&gt; Collector&lt;T,?,Map&lt;Integer,T&gt;&gt; toIndexMap() {\n    return Collector.of(\n        HashMap::new,\n        (m,s) -&gt; m.put(m.size() + 1, s),\n        (m1,m2) -&gt; {\n            if(m1.isEmpty()) return m2;\n            if(!m2.isEmpty()) {\n                int offset = m1.size();\n                m2.forEach((i,s) -&gt; m1.put(i + offset, s));\n            }\n            return m1;\n        });\n}\n</code></pre>\n\n<p>Which can then be used like</p>\n\n<pre><code>Map&lt;Integer,String&gt; result = Stream.of(\"one\", \"two\", \"three\")\n    .collect(MyCollectors.toIndexMap());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Map&lt;Integer,Integer&gt; result = IntStream.rangeClosed(1, 1000)\n    .boxed().parallel()\n    .collect(MyCollectors.toIndexMap());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19984783,"reputation":124,"user_id":14647130,"display_name":"David"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672346206,"creation_date":1650031643,"answer_id":71885044,"question_id":57638165,"body_markdown":"Late to the party, but this problem can be solved very elegantly using a custom Collector - which means the source of the stream can be anything beside Collection:\r\n```java\r\nList&lt;String&gt; names = List.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\r\n\r\nnames.stream()\r\n.collect(indexed())\r\n.forEach((number, name) -&gt; System.out.println(&quot;%d: %s&quot;.formatted(number, name)));\r\n```\r\n\r\nThe Collector which you should statically import:\r\n\r\n```\r\npublic static &lt;T, R&gt; Collector&lt;T, ?, Map&lt;Integer, T&gt;&gt; indexed()\r\n{\r\n\treturn Collector.of(\r\n\t\t\tLinkedHashMap::new, \r\n\t\t\t(map, element) -&gt; map.put(map.size() +1, element), \r\n\t\t\t(left, right) -&gt; {left.putAll(right); return left;});\r\n}\r\n```","title":"How to map elements to their index using streams?","body":"<p>Late to the party, but this problem can be solved very elegantly using a custom Collector - which means the source of the stream can be anything beside Collection:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; names = List.of(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);\n\nnames.stream()\n.collect(indexed())\n.forEach((number, name) -&gt; System.out.println(&quot;%d: %s&quot;.formatted(number, name)));\n</code></pre>\n<p>The Collector which you should statically import:</p>\n<pre><code>public static &lt;T, R&gt; Collector&lt;T, ?, Map&lt;Integer, T&gt;&gt; indexed()\n{\n    return Collector.of(\n            LinkedHashMap::new, \n            (map, element) -&gt; map.put(map.size() +1, element), \n            (left, right) -&gt; {left.putAll(right); return left;});\n}\n</code></pre>\n"}],"owner":{"account_id":16447219,"reputation":721,"user_id":11881663,"display_name":"nopens"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16272,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":57638229,"answer_count":7,"score":17,"last_activity_date":1672346206,"creation_date":1566651540,"question_id":57638165,"body_markdown":"I get a stream of some custom objects and I would like to create a map `Map&lt;Integer, MyObject&gt;` with index of each object as key. To give you a simple example:\r\n\r\n    Stream&lt;String&gt; myStream = Arrays.asList(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;).stream();\r\n    Integer i = 0;\r\n    Map&lt;Integer, String&gt; result3 = myStream.collect(Collectors.toMap(x -&gt; i++, x -&gt; x));\r\n\r\nObviously, this doesn&#39;t compile because:\r\n\r\n&gt; local variables referenced from a lambda expression must be final or\r\n&gt; effectively final\r\n\r\nIs there a simple way to map elemnts of a stream to their indices so that the expected output for above example is something like:\r\n\r\n    {1=one, 2=two, 3=three}","title":"How to map elements to their index using streams?","body":"<p>I get a stream of some custom objects and I would like to create a map <code>Map&lt;Integer, MyObject&gt;</code> with index of each object as key. To give you a simple example:</p>\n\n<pre><code>Stream&lt;String&gt; myStream = Arrays.asList(\"one\",\"two\",\"three\").stream();\nInteger i = 0;\nMap&lt;Integer, String&gt; result3 = myStream.collect(Collectors.toMap(x -&gt; i++, x -&gt; x));\n</code></pre>\n\n<p>Obviously, this doesn't compile because:</p>\n\n<blockquote>\n  <p>local variables referenced from a lambda expression must be final or\n  effectively final</p>\n</blockquote>\n\n<p>Is there a simple way to map elemnts of a stream to their indices so that the expected output for above example is something like:</p>\n\n<pre><code>{1=one, 2=two, 3=three}\n</code></pre>\n"},{"tags":["java","html","string","href"],"comments":[{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":0,"creation_date":1672344398,"post_id":74955577,"comment_id":132273148,"body_markdown":"first try to add a random string literal such as `google.com` and see if it works.","body":"first try to add a random string literal such as <code>google.com</code> and see if it works."},{"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"score":0,"creation_date":1672344602,"post_id":74955577,"comment_id":132273199,"body_markdown":"This one also didn&#39;t work: &quot;&lt;a href= &#39;google.com&#39;&gt;Click here to see the value&lt;/a&gt;&quot;","body":"This one also didn&#39;t work: &quot;&lt;a href= &#39;google.com&#39;&gt;Click here to see the value&lt;/a&gt;&quot;"},{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":0,"creation_date":1672344692,"post_id":74955577,"comment_id":132273224,"body_markdown":"what do you get when you inspect the link in dev tools?","body":"what do you get when you inspect the link in dev tools?"},{"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"score":0,"creation_date":1672345023,"post_id":74955577,"comment_id":132273322,"body_markdown":"I see href=&quot;google.com&quot;, but when I put the cursor on the google.com link I see that the path is: file:/// and path to my java automation path and then the google.com. So the problem is because of it?","body":"I see href=&quot;google.com&quot;, but when I put the cursor on the google.com link I see that the path is: file:/// and path to my java automation path and then the google.com. So the problem is because of it?"},{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":0,"creation_date":1672345066,"post_id":74955577,"comment_id":132273333,"body_markdown":"yeah probably. add `https://` at the beginning and it&#39;ll probably work.","body":"yeah probably. add <code>https:&#47;&#47;</code> at the beginning and it&#39;ll probably work."},{"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"score":0,"creation_date":1672345202,"post_id":74955577,"comment_id":132273377,"body_markdown":"At the beginning of where?","body":"At the beginning of where?"},{"owner":{"account_id":4874824,"reputation":8171,"user_id":3930247,"accept_rate":78,"display_name":"technophyle"},"score":2,"creation_date":1672345248,"post_id":74955577,"comment_id":132273387,"body_markdown":"`https://google.com`, or `&#39;https://&#39; + myString`","body":"<code>https:&#47;&#47;google.com</code>, or <code>&#39;https:&#47;&#47;&#39; + myString</code>"},{"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"score":0,"creation_date":1672345899,"post_id":74955577,"comment_id":132273554,"body_markdown":"Ok, now on the inspect it shows http:// and the value itself, but not showing on the actual new page.","body":"Ok, now on the inspect it shows http:// and the value itself, but not showing on the actual new page."}],"owner":{"account_id":12585926,"reputation":357,"user_id":9154835,"display_name":"elads11"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672346205,"creation_date":1672344227,"question_id":74955577,"body_markdown":"I&#39;ve tried to create an additional link to an existing report page that will display content of a string. However, when clicking on the link, it leads to a grey page with the message:\r\nIt may have been moved, edited, or deleted.\r\nThis is a snippet of the hyperlink I&#39;m trying to create which is saved as a string in Java:\r\n\r\n```java\r\n//myString is the string containg the value I want to display on the new page\r\nString myString = &quot;Value to be displaayed on new page&quot;;\r\nString newLink = &quot;&lt;a href= &#39;&quot; + myString + &quot;&#39;&gt;Click here to see the value&lt;/a&gt;&quot;;\r\n```\r\n\r\nThis is how the link is on my html page, when clicking on it, it is not presenting myString value.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/p0t0n.png\r\n\r\nWhat is the problem? \r\n","title":"Creating an HTML link that leads to a page with value of java string","body":"<p>I've tried to create an additional link to an existing report page that will display content of a string. However, when clicking on the link, it leads to a grey page with the message:\nIt may have been moved, edited, or deleted.\nThis is a snippet of the hyperlink I'm trying to create which is saved as a string in Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//myString is the string containg the value I want to display on the new page\nString myString = &quot;Value to be displaayed on new page&quot;;\nString newLink = &quot;&lt;a href= '&quot; + myString + &quot;'&gt;Click here to see the value&lt;/a&gt;&quot;;\n</code></pre>\n<p>This is how the link is on my html page, when clicking on it, it is not presenting myString value.</p>\n<p><a href=\"https://i.stack.imgur.com/p0t0n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p0t0n.png\" alt=\"enter image description here\" /></a></p>\n<p>What is the problem?</p>\n"},{"tags":["java","cucumber"],"comments":[{"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1672351227,"post_id":74955810,"comment_id":132274734,"body_markdown":"What does your project structure look like? If you&#39;ve created your own structure, consider following the conventions. You can find an example in: https://github.com/cucumber/cucumber-java-skeleton","body":"What does your project structure look like? If you&#39;ve created your own structure, consider following the conventions. You can find an example in: <a href=\"https://github.com/cucumber/cucumber-java-skeleton\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-java-skeleton</a>"}],"owner":{"account_id":27385914,"reputation":1,"user_id":20889721,"display_name":"ksjdh234"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672345959,"creation_date":1672345916,"question_id":74955810,"body_markdown":"[running from file](https://i.stack.imgur.com/3OSaf.png)\r\n\r\n[running from folder](https://i.stack.imgur.com/TLfDm.png)\r\n\r\nBoth options run the same test cases. If I run from the actual file(pic 1), I successfully pass my test cases. If I run from right clicking the test folder, I fail them. I have confirmed that they are the same. Anybody know what could cause this?\r\n\r\n","title":"Cucumber test cases passing when run from file but not from folder","body":"<p><a href=\"https://i.stack.imgur.com/3OSaf.png\" rel=\"nofollow noreferrer\">running from file</a></p>\n<p><a href=\"https://i.stack.imgur.com/TLfDm.png\" rel=\"nofollow noreferrer\">running from folder</a></p>\n<p>Both options run the same test cases. If I run from the actual file(pic 1), I successfully pass my test cases. If I run from right clicking the test folder, I fail them. I have confirmed that they are the same. Anybody know what could cause this?</p>\n"},{"tags":["java","design-patterns","factory"],"answers":[{"tags":[],"owner":{"account_id":26645528,"reputation":46,"user_id":20368478,"display_name":"MikeW"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672345267,"creation_date":1672344443,"answer_id":74955605,"question_id":74954819,"body_markdown":"The problem is likely that the subclass has not been initialized or probably even loaded, so the static initializer has not run, and the subclass has not been registered.\r\n\r\nTypically, the static initializer will not run until the first invocation of either a static method or constructor. (Referencing the `Class&lt;?&gt;` object will load but not initialize the class.) I suspect you had some other code not shown here that triggered the static initializer for `ProductOne`.\r\n\r\nHere&#39;s one solution, assuming that you&#39;re OK using a `Class&lt;?&gt;` as the lookup key instead of a `String`.\r\n\r\n`Product.java`\r\n\r\n\r\n```java\r\npublic abstract class Product {\r\n\r\n    private static Map&lt;Class&lt;? extends Product&gt;, Product&gt; instances = new ConcurrentHashMap&lt;&gt;();\r\n\r\n    /** Gets the singleton instance for the provided product type. */\r\n    public static Product instanceOfType(Class&lt;? extends Product&gt; productType) {\r\n        ensureInitialized(productType);\r\n        Product instance = instances.get(productType);\r\n        return Objects.requireNonNull(instance, productType.getCanonicalName());\r\n    }\r\n\r\n    public abstract String getName();\r\n\r\n    /**\r\n     * Registers the singleton instance for the provided product type.\r\n     *\r\n     * &lt;p&gt;Each concrete subclass should invoke this method in its static initializer.&lt;/p&gt;\r\n     */\r\n    protected static &lt;P extends Product&gt; void register(Class&lt;P&gt; productType, P product) {\r\n        instances.put(productType, product);\r\n    }\r\n\r\n    /** Ensures that a class has been statically initialized. */\r\n    private static void ensureInitialized(Class&lt;?&gt; clazz) {\r\n        try {\r\n            Class.forName(clazz.getCanonicalName(), true, clazz.getClassLoader());\r\n        } catch (ClassNotFoundException e) {\r\n            throw new RuntimeException(e); // unexpected\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n`ProductOne.java`\r\n\r\n```java\r\npublic final class ProductOne extends Product {\r\n\r\n    static {\r\n        Product.register(ProductOne.class, new ProductOne());\r\n    }\r\n\r\n    private ProductOne() {}\r\n\r\n    @Override\r\n    public String getName() {\r\n        return &quot;one&quot;;\r\n    }\r\n}\r\n```\r\n\r\n`Main.java`\r\n\r\n```java\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        Product productOne = Product.instanceOfType(ProductOne.class);\r\n        System.out.println(productOne.getName());\r\n    }\r\n    \r\n    // static class\r\n    private Main() {}\r\n}\r\n```","title":"Factory DesignPattern with registering the subclasses using static blocks","body":"<p>The problem is likely that the subclass has not been initialized or probably even loaded, so the static initializer has not run, and the subclass has not been registered.</p>\n<p>Typically, the static initializer will not run until the first invocation of either a static method or constructor. (Referencing the <code>Class&lt;?&gt;</code> object will load but not initialize the class.) I suspect you had some other code not shown here that triggered the static initializer for <code>ProductOne</code>.</p>\n<p>Here's one solution, assuming that you're OK using a <code>Class&lt;?&gt;</code> as the lookup key instead of a <code>String</code>.</p>\n<p><code>Product.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class Product {\n\n    private static Map&lt;Class&lt;? extends Product&gt;, Product&gt; instances = new ConcurrentHashMap&lt;&gt;();\n\n    /** Gets the singleton instance for the provided product type. */\n    public static Product instanceOfType(Class&lt;? extends Product&gt; productType) {\n        ensureInitialized(productType);\n        Product instance = instances.get(productType);\n        return Objects.requireNonNull(instance, productType.getCanonicalName());\n    }\n\n    public abstract String getName();\n\n    /**\n     * Registers the singleton instance for the provided product type.\n     *\n     * &lt;p&gt;Each concrete subclass should invoke this method in its static initializer.&lt;/p&gt;\n     */\n    protected static &lt;P extends Product&gt; void register(Class&lt;P&gt; productType, P product) {\n        instances.put(productType, product);\n    }\n\n    /** Ensures that a class has been statically initialized. */\n    private static void ensureInitialized(Class&lt;?&gt; clazz) {\n        try {\n            Class.forName(clazz.getCanonicalName(), true, clazz.getClassLoader());\n        } catch (ClassNotFoundException e) {\n            throw new RuntimeException(e); // unexpected\n        }\n    }\n}\n</code></pre>\n<p><code>ProductOne.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class ProductOne extends Product {\n\n    static {\n        Product.register(ProductOne.class, new ProductOne());\n    }\n\n    private ProductOne() {}\n\n    @Override\n    public String getName() {\n        return &quot;one&quot;;\n    }\n}\n</code></pre>\n<p><code>Main.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    public static void main(String[] args) {\n        Product productOne = Product.instanceOfType(ProductOne.class);\n        System.out.println(productOne.getName());\n    }\n    \n    // static class\n    private Main() {}\n}\n</code></pre>\n"}],"owner":{"account_id":19691546,"reputation":33,"user_id":14416381,"display_name":"Devdatta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74955605,"answer_count":1,"score":0,"last_activity_date":1672345267,"creation_date":1672338618,"question_id":74954819,"body_markdown":"I am trying to implement Factory design patter, without using reflection. The goal is, as and when subclasses of `Product` are added to the project, their instances should be available in the objectPool.\r\n\r\nThe code is as below : \r\nFactory Class\r\n\r\n```\r\npublic abstract class ProductFactory {\r\n  protected static final Map&lt;String, Supplier&lt;Product&gt;&gt; productSingletonObjPool = new HashMap&lt;&gt;();\r\n\r\n  static {\r\n    /*\r\n    //registering the sub_class-types statically. This obviously works fine.\r\n    productSingletonObjPool.put(ProductOne.class.getSimpleName(), ProductOne::getInstance);\r\n      productSingletonObjPool.put(ProductTwo.class.getSimpleName(), ProductTwo::getInstance);\r\n    */\r\n  }\r\n\r\n  public static Map&lt;String, Supplier&lt;Product&gt;&gt; getProductSingletonObjPool() {\r\n    return productSingletonObjPool;\r\n  }\r\n\r\n  public static void register(Class type, Supplier&lt;Product&gt; supplier) {\r\n    productSingletonObjPool.put(type.getSimpleName(), supplier);\r\n  }\r\n\r\n  protected static Product getInstanceOfType(String type) {\r\n    Supplier&lt;Product&gt; productSupplier = productSingletonObjPool.get(type);\r\n    if (productSupplier != null) return productSupplier.get();\r\n    throw new RuntimeException(&quot;No such product with name &quot; + type + &quot; exists&quot;);\r\n  }\r\n}\r\n```\r\n\r\n\r\nAbstract Product Class\r\n\r\n```\r\npublic abstract class Product {\r\n\r\n\r\n  protected static void register(Class type, Supplier&lt;Product&gt; supplier) {\r\n    if (!ProductFactory.getProductSingletonObjPool().containsKey(type.getSimpleName())) {\r\n      ProductFactory.register(type, supplier);\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\n\r\nConcrete ProductOne\r\n\r\n```\r\npublic class ProductOne extends Product {\r\n\r\n  static {\r\n    Product.register(ProductOne.class, ProductOne::new);\r\n  }\r\n\r\n  private ProductOne() {}\r\n\r\n  protected static Product getInstance() {\r\n    return new ProductOne();\r\n  }\r\n}\r\n```\r\n\r\n\r\nConcreate ProductTwo\r\n\r\n```\r\npublic class ProductTwo extends Product {\r\n\r\n  static {\r\n    Product.register(ProductTwo.class, ProductTwo::new);\r\n  }\r\n\r\n  private ProductTwo() {}\r\n\r\n  protected static Product getInstance() {\r\n    return new ProductTwo();\r\n  }\r\n}\r\n```\r\n\r\n\r\nTest Class\r\n\r\n```\r\n@Test\r\npublic void testFactory() {\r\n  Product one = ProductFactory.getInstanceOfType(&quot;ProductOne&quot;);\r\n  System.out.println(&quot;Product One : &quot; + one);\r\n  Product two = ProductFactory.getInstanceOfType(&quot;ProductTwo&quot;);\r\n  System.out.println(&quot;Product Two: &quot; + two);\r\n}\r\n```\r\n\r\nProblem : the Map always gets populated with ProductOne. This behaviour is same as captured in this thread: https://stackoverflow.com/questions/29895545/fill-a-hashmap-in-superclass-from-subclass-constructor-in-java\r\nHowever, My code is different than the code from this thread, though it encounters the behavior mentioned in there i.e. map always getting populated with one Supplier&lt;Product&gt; (in my case, its ProductOne::new). \r\n\r\nI would like to know : \r\n1. The reason behind this behavior\r\n2. Any solution for this?\r\n\r\n\r\nI believe the static blocks get executed when classes are loaded. I expected that static blocks of both ProductOne and ProductTwo be executed and have the productSingletonObjPool map populated with their Suppliers. This didn&#39;t happen though...map only got populated with ProductOne&#39;s supplier, as if, JVM only looked for &#39;a&#39; class that extended the abstract Product class and then stopped loading additional classes which extend Product class.\r\nI also tried to debug this, but breakpoints on static blocks are skipped by debugger.\r\n\r\nI looked into these threads, as prompted by stackoverflow, but didn&#39;t find solution to my problem : \r\n\r\n - https://stackoverflow.com/questions/49603064/c-sharp-class-factory-with-subclasses\r\n - https://stackoverflow.com/questions/5704397/factory-implemented-with-static-method\r\n - https://stackoverflow.com/questions/10698516/behavior-of-static-blocks-with-inheritance","title":"Factory DesignPattern with registering the subclasses using static blocks","body":"<p>I am trying to implement Factory design patter, without using reflection. The goal is, as and when subclasses of <code>Product</code> are added to the project, their instances should be available in the objectPool.</p>\n<p>The code is as below :\nFactory Class</p>\n<pre><code>public abstract class ProductFactory {\n  protected static final Map&lt;String, Supplier&lt;Product&gt;&gt; productSingletonObjPool = new HashMap&lt;&gt;();\n\n  static {\n    /*\n    //registering the sub_class-types statically. This obviously works fine.\n    productSingletonObjPool.put(ProductOne.class.getSimpleName(), ProductOne::getInstance);\n      productSingletonObjPool.put(ProductTwo.class.getSimpleName(), ProductTwo::getInstance);\n    */\n  }\n\n  public static Map&lt;String, Supplier&lt;Product&gt;&gt; getProductSingletonObjPool() {\n    return productSingletonObjPool;\n  }\n\n  public static void register(Class type, Supplier&lt;Product&gt; supplier) {\n    productSingletonObjPool.put(type.getSimpleName(), supplier);\n  }\n\n  protected static Product getInstanceOfType(String type) {\n    Supplier&lt;Product&gt; productSupplier = productSingletonObjPool.get(type);\n    if (productSupplier != null) return productSupplier.get();\n    throw new RuntimeException(&quot;No such product with name &quot; + type + &quot; exists&quot;);\n  }\n}\n</code></pre>\n<p>Abstract Product Class</p>\n<pre><code>public abstract class Product {\n\n\n  protected static void register(Class type, Supplier&lt;Product&gt; supplier) {\n    if (!ProductFactory.getProductSingletonObjPool().containsKey(type.getSimpleName())) {\n      ProductFactory.register(type, supplier);\n    }\n  }\n\n}\n</code></pre>\n<p>Concrete ProductOne</p>\n<pre><code>public class ProductOne extends Product {\n\n  static {\n    Product.register(ProductOne.class, ProductOne::new);\n  }\n\n  private ProductOne() {}\n\n  protected static Product getInstance() {\n    return new ProductOne();\n  }\n}\n</code></pre>\n<p>Concreate ProductTwo</p>\n<pre><code>public class ProductTwo extends Product {\n\n  static {\n    Product.register(ProductTwo.class, ProductTwo::new);\n  }\n\n  private ProductTwo() {}\n\n  protected static Product getInstance() {\n    return new ProductTwo();\n  }\n}\n</code></pre>\n<p>Test Class</p>\n<pre><code>@Test\npublic void testFactory() {\n  Product one = ProductFactory.getInstanceOfType(&quot;ProductOne&quot;);\n  System.out.println(&quot;Product One : &quot; + one);\n  Product two = ProductFactory.getInstanceOfType(&quot;ProductTwo&quot;);\n  System.out.println(&quot;Product Two: &quot; + two);\n}\n</code></pre>\n<p>Problem : the Map always gets populated with ProductOne. This behaviour is same as captured in this thread: <a href=\"https://stackoverflow.com/questions/29895545/fill-a-hashmap-in-superclass-from-subclass-constructor-in-java\">Fill a hashmap in superclass from subclass constructor in Java</a>\nHowever, My code is different than the code from this thread, though it encounters the behavior mentioned in there i.e. map always getting populated with one Supplier (in my case, its ProductOne::new).</p>\n<p>I would like to know :</p>\n<ol>\n<li>The reason behind this behavior</li>\n<li>Any solution for this?</li>\n</ol>\n<p>I believe the static blocks get executed when classes are loaded. I expected that static blocks of both ProductOne and ProductTwo be executed and have the productSingletonObjPool map populated with their Suppliers. This didn't happen though...map only got populated with ProductOne's supplier, as if, JVM only looked for 'a' class that extended the abstract Product class and then stopped loading additional classes which extend Product class.\nI also tried to debug this, but breakpoints on static blocks are skipped by debugger.</p>\n<p>I looked into these threads, as prompted by stackoverflow, but didn't find solution to my problem :</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/49603064/c-sharp-class-factory-with-subclasses\">C# class factory with subclasses</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5704397/factory-implemented-with-static-method\">Factory implemented with static method</a></li>\n<li><a href=\"https://stackoverflow.com/questions/10698516/behavior-of-static-blocks-with-inheritance\">Behavior of static blocks with inheritance</a></li>\n</ul>\n"},{"tags":["java","spring","spring-boot","performance"],"owner":{"account_id":8374114,"reputation":192,"user_id":6288191,"accept_rate":33,"display_name":"Guru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672344904,"creation_date":1672344904,"question_id":74955685,"body_markdown":"Currently in my application, I have created a validation service that validates certain fields between two objects. The ask is that, we must implement a percentage based routing logic based on which the requests will be sent to another service. For example, if I set the percentage as 10 in application properties file of my Springboot application, then only 10% of the overall requests should go to my service after which they will no longer be sent.\r\n\r\nThe reason for implementing this is because sometimes we can get between a thousand to a million requests, if the traffic is too high, we don&#39;t want to waste our resources on a less priority service.\r\n\r\nI am very confused on how to begin this. I am not sure how to even determine the percentage because the number of requests per day or per hour varies a lot on a day to day basis.\r\n\r\nMy application is a Java Spring boot application. Is there any existing routing logic that I can use or any pseudo code that can help me out?","title":"How can we implement a routing logic to control the percentage of traffic hitting a service?","body":"<p>Currently in my application, I have created a validation service that validates certain fields between two objects. The ask is that, we must implement a percentage based routing logic based on which the requests will be sent to another service. For example, if I set the percentage as 10 in application properties file of my Springboot application, then only 10% of the overall requests should go to my service after which they will no longer be sent.</p>\n<p>The reason for implementing this is because sometimes we can get between a thousand to a million requests, if the traffic is too high, we don't want to waste our resources on a less priority service.</p>\n<p>I am very confused on how to begin this. I am not sure how to even determine the percentage because the number of requests per day or per hour varies a lot on a day to day basis.</p>\n<p>My application is a Java Spring boot application. Is there any existing routing logic that I can use or any pseudo code that can help me out?</p>\n"},{"tags":["java","docker","junit","jenkins-pipeline","testcontainers"],"comments":[{"owner":{"account_id":2537085,"reputation":6205,"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"score":0,"creation_date":1667865995,"post_id":74352450,"comment_id":131265591,"body_markdown":"have you mount the socket from host in your container as mentioned https://www.testcontainers.org/supported_docker_environment/continuous_integration/dind_patterns/#docker-only-example?","body":"have you mount the socket from host in your container as mentioned <a href=\"https://www.testcontainers.org/supported_docker_environment/continuous_integration/dind_patterns/#docker-only-example\" rel=\"nofollow noreferrer\">testcontainers.org/supported_docker_environment/&hellip;</a>?"},{"owner":{"account_id":5745825,"reputation":11543,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"score":0,"creation_date":1669277942,"post_id":74352450,"comment_id":131609426,"body_markdown":"I think you need docker in docker support on your Jenkins machine","body":"I think you need docker in docker support on your Jenkins machine"}],"answers":[{"tags":[],"owner":{"account_id":5826684,"reputation":2011,"user_id":4592796,"accept_rate":70,"display_name":"harry-potter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667856834,"creation_date":1667856834,"answer_id":74353184,"question_id":74352450,"body_markdown":"Are you sure the machine on which Jenkins is installed is also running the Docker process? \r\n\r\nIn order to use test-containers, Docker must be installed and running on the machine on which you are running the tests. \r\nThe solution is to install and run the Docker process on the CI/CD machine.  \r\n\r\nFor example: try turning off your local instance of Docker and launching testcontainers tests. You will get something like this:\r\n\r\n    java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration\r\n    \r\n    \tat org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$6(DockerClientProviderStrategy.java:242)\r\n    \tat java.base/java.util.Optional.orElseThrow(Optional.java:408)\r\n    \tat org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:234)\r\n    \tat org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:135)\r\n    \tat org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:176)\r\n    \tat org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:90)\r\n    \tat com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:108)\r\n    \tat org.testcontainers.containers.GenericContainer.start(GenericContainer.java:325)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.start(TestcontainersExtension.java:242)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.access$200(TestcontainersExtension.java:229)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$null$1(TestcontainersExtension.java:59)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore.lambda$getOrComputeIfAbsent$4(ExtensionValuesStore.java:86)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.computeValue(ExtensionValuesStore.java:223)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.get(ExtensionValuesStore.java:211)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.evaluate(ExtensionValuesStore.java:191)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.access$100(ExtensionValuesStore.java:171)\r\n    \tat org.junit.jupiter.engine.execution.ExtensionValuesStore.getOrComputeIfAbsent(ExtensionValuesStore.java:89)\r\n    \tat org.junit.jupiter.engine.execution.NamespaceAwareStore.getOrComputeIfAbsent(NamespaceAwareStore.java:53)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$beforeAll$2(TestcontainersExtension.java:59)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1540)\r\n    \tat org.testcontainers.junit.jupiter.TestcontainersExtension.beforeAll(TestcontainersExtension.java:59)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$10(ClassBasedTestDescriptor.java:381)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:381)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:205)\r\n    \tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:80)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1540)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n    \tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n    \tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n    \tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n    \tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n    \tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n    \tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n    \tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n    \tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n    \tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n    \tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n\r\n","title":"Testcontainer not able to start within PCF CI/CD Jenkins pipeline - container-inside-container problem?","body":"<p>Are you sure the machine on which Jenkins is installed is also running the Docker process?</p>\n<p>In order to use test-containers, Docker must be installed and running on the machine on which you are running the tests.\nThe solution is to install and run the Docker process on the CI/CD machine.</p>\n<p>For example: try turning off your local instance of Docker and launching testcontainers tests. You will get something like this:</p>\n<pre><code>java.lang.IllegalStateException: Could not find a valid Docker environment. Please see logs and check configuration\n\n    at org.testcontainers.dockerclient.DockerClientProviderStrategy.lambda$getFirstValidStrategy$6(DockerClientProviderStrategy.java:242)\n    at java.base/java.util.Optional.orElseThrow(Optional.java:408)\n    at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:234)\n    at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:135)\n    at org.testcontainers.DockerClientFactory.client(DockerClientFactory.java:176)\n    at org.testcontainers.DockerClientFactory$1.getDockerClient(DockerClientFactory.java:90)\n    at com.github.dockerjava.api.DockerClientDelegate.authConfig(DockerClientDelegate.java:108)\n    at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:325)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.start(TestcontainersExtension.java:242)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.access$200(TestcontainersExtension.java:229)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$null$1(TestcontainersExtension.java:59)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore.lambda$getOrComputeIfAbsent$4(ExtensionValuesStore.java:86)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.computeValue(ExtensionValuesStore.java:223)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.get(ExtensionValuesStore.java:211)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.evaluate(ExtensionValuesStore.java:191)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.access$100(ExtensionValuesStore.java:171)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore.getOrComputeIfAbsent(ExtensionValuesStore.java:89)\n    at org.junit.jupiter.engine.execution.NamespaceAwareStore.getOrComputeIfAbsent(NamespaceAwareStore.java:53)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$beforeAll$2(TestcontainersExtension.java:59)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.beforeAll(TestcontainersExtension.java:59)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$10(ClassBasedTestDescriptor.java:381)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:381)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:205)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:80)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8491832,"reputation":51,"user_id":6367888,"display_name":"prabalpratap singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672344093,"creation_date":1672344093,"answer_id":74955560,"question_id":74352450,"body_markdown":"It Seems like , where test code is running docker service is not running on the same machine so this issue is occurred.","title":"Testcontainer not able to start within PCF CI/CD Jenkins pipeline - container-inside-container problem?","body":"<p>It Seems like , where test code is running docker service is not running on the same machine so this issue is occurred.</p>\n"}],"owner":{"account_id":19950030,"reputation":63,"user_id":14638259,"display_name":"Leandro Costa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":717,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1672344093,"creation_date":1667852191,"question_id":74352450,"body_markdown":"I&#39;ve been trying to use the Testcontainers library with my current Jenkins CI/CD pipeline for postgres DB integration tests. I was previously using an embedded postgres library, but now in my jenkins pipeline I do all the steps inside a container, and I wasn&#39;t able to make it work. Then I came across the Testcontainers project which seems to be a pretty good alternative for my Java Spring project.\r\n\r\nI&#39;ve been following this [article](https://jschmitz.dev/posts/testcontainers_how_to_use_them_in_your_spring_boot_integration_tests/) and it states that we most likely don&#39;t have to change anything for CI environmets because testcontainers recognizes that it&#39;s running inside a container and it supports it. Also, in testcontainer&#39;s official documentation there&#39;s [this](https://www.testcontainers.org/supported_docker_environment/continuous_integration/dind_patterns/).\r\n\r\nSo, apparently it&#39;s supposed to work even if we are running the integration tests within a containerized environment, but when I try it I get the following error in my integration tests:\r\n`ERROR org.testcontainers.dockerclient.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration.`\r\n\r\nThis is my jenkinsfile (I use PCF)\r\n\r\n```\r\nnode(&#39;pcf-node&#39;) {\r\n        container(&#39;jdk17-container&#39;) {\r\n            ...\r\n            stage(&#39;integration testing&#39;) {\r\n                currentStep = &quot;${env.STAGE_NAME}&quot;\r\n                runIntegrationTests()\r\n            }\r\n\t    ...\r\n\t}\r\n}\r\n```\r\n\r\nAfter some research I&#39;m still not sure if docker should be accessible within the container from the jenkins pipeline, but when I run `docker info` inside de container it returns `docker: command not found`.\r\n\r\nAny suggestions to make this work?","title":"Testcontainer not able to start within PCF CI/CD Jenkins pipeline - container-inside-container problem?","body":"<p>I've been trying to use the Testcontainers library with my current Jenkins CI/CD pipeline for postgres DB integration tests. I was previously using an embedded postgres library, but now in my jenkins pipeline I do all the steps inside a container, and I wasn't able to make it work. Then I came across the Testcontainers project which seems to be a pretty good alternative for my Java Spring project.</p>\n<p>I've been following this <a href=\"https://jschmitz.dev/posts/testcontainers_how_to_use_them_in_your_spring_boot_integration_tests/\" rel=\"nofollow noreferrer\">article</a> and it states that we most likely don't have to change anything for CI environmets because testcontainers recognizes that it's running inside a container and it supports it. Also, in testcontainer's official documentation there's <a href=\"https://www.testcontainers.org/supported_docker_environment/continuous_integration/dind_patterns/\" rel=\"nofollow noreferrer\">this</a>.</p>\n<p>So, apparently it's supposed to work even if we are running the integration tests within a containerized environment, but when I try it I get the following error in my integration tests:\n<code>ERROR org.testcontainers.dockerclient.DockerClientProviderStrategy - Could not find a valid Docker environment. Please check configuration.</code></p>\n<p>This is my jenkinsfile (I use PCF)</p>\n<pre><code>node('pcf-node') {\n        container('jdk17-container') {\n            ...\n            stage('integration testing') {\n                currentStep = &quot;${env.STAGE_NAME}&quot;\n                runIntegrationTests()\n            }\n        ...\n    }\n}\n</code></pre>\n<p>After some research I'm still not sure if docker should be accessible within the container from the jenkins pipeline, but when I run <code>docker info</code> inside de container it returns <code>docker: command not found</code>.</p>\n<p>Any suggestions to make this work?</p>\n"},{"tags":["java","windows","credential-manager"],"answers":[{"tags":[],"owner":{"account_id":7321601,"reputation":352,"user_id":5577460,"display_name":"Jonas"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1672344031,"creation_date":1626870701,"answer_id":68469535,"question_id":65144266,"body_markdown":"We actually have the same issue come up in our company. \r\nWe have a Java Client Application running on windows and the customer asked for a password saving functionality. So we turned to the windows credential manager for that. So much for the background. \r\n\r\nIt seems that there is no java library for that, although there might be one. \r\n(btw: your second link is a 404). \r\n\r\nThus the way we planned is to write java code using the java native interface with C accessing the windows credential manager. \r\nBUT I found [this library][1], which has a [java class written for accessing the windows credential manager][2].\r\n\r\nI think, this might help.\r\n\r\n  [1]: https://github.com/microsoft/vsts-authentication-library-for-java/\r\n  [2]: https://github.com/microsoft/vsts-authentication-library-for-java/blob/master/storage/src/main/java/com/microsoft/alm/storage/windows/internal/CredManagerBackedSecureStore.java","title":"Use the windows credential manager in Java to get credentials for authentication into git and other services","body":"<p>We actually have the same issue come up in our company.\nWe have a Java Client Application running on windows and the customer asked for a password saving functionality. So we turned to the windows credential manager for that. So much for the background.</p>\n<p>It seems that there is no java library for that, although there might be one.\n(btw: your second link is a 404).</p>\n<p>Thus the way we planned is to write java code using the java native interface with C accessing the windows credential manager.\nBUT I found <a href=\"https://github.com/microsoft/vsts-authentication-library-for-java/\" rel=\"nofollow noreferrer\">this library</a>, which has a <a href=\"https://github.com/microsoft/vsts-authentication-library-for-java/blob/master/storage/src/main/java/com/microsoft/alm/storage/windows/internal/CredManagerBackedSecureStore.java\" rel=\"nofollow noreferrer\">java class written for accessing the windows credential manager</a>.</p>\n<p>I think, this might help.</p>\n"},{"tags":[],"owner":{"account_id":1036253,"reputation":23,"user_id":4666576,"display_name":"Daniel F."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646655423,"creation_date":1646655423,"answer_id":71380961,"question_id":65144266,"body_markdown":"Looking for a way to access the Windows Credential Manager in java myself, I found that the Microsoft library in [Jonas&#39; answer][1] provides a simple way to do that:\r\n\r\n    CredManagerBackedCredentialStore credentialStore = new CredManagerBackedCredentialStore();\r\n    Credential cred = credentialStore.get(&quot;MyCredentialManagerKey&quot;);\r\n\r\nThe dependency I used was `implementation(&quot;com.microsoft.alm:auth-secure-storage:0.6.4&quot;)` and the resulting `Credential` object allows me to read the user/password. Also, the `CredManagerBackedCredentialStore` object allows to add entries into the Windows Credential Manager.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/68469535/4666576","title":"Use the windows credential manager in Java to get credentials for authentication into git and other services","body":"<p>Looking for a way to access the Windows Credential Manager in java myself, I found that the Microsoft library in <a href=\"https://stackoverflow.com/a/68469535/4666576\">Jonas' answer</a> provides a simple way to do that:</p>\n<pre><code>CredManagerBackedCredentialStore credentialStore = new CredManagerBackedCredentialStore();\nCredential cred = credentialStore.get(&quot;MyCredentialManagerKey&quot;);\n</code></pre>\n<p>The dependency I used was <code>implementation(&quot;com.microsoft.alm:auth-secure-storage:0.6.4&quot;)</code> and the resulting <code>Credential</code> object allows me to read the user/password. Also, the <code>CredManagerBackedCredentialStore</code> object allows to add entries into the Windows Credential Manager.</p>\n"},{"tags":[],"owner":{"account_id":4751922,"reputation":723,"user_id":3841784,"display_name":"Dragoon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1648779813,"creation_date":1648778903,"answer_id":71700999,"question_id":65144266,"body_markdown":"Cheese.....don&#39;t use that library.\r\n\r\nA) It&#39;s broken\r\n\r\nB) It&#39;s needlessly convoluted (XML backed credential object? srsly?)\r\n\r\nC) It depends on some vulnerable libraries. Don&#39;t do that to your customers. Just don&#39;t. It&#39;s already bad enough that they&#39;re stuck with Java.\r\n\r\nDrop these two files into your project, and use them like so:\r\n\r\n```java\r\n    WinCred wc = new WinCred();\r\n    // Create a credential\r\n    wc.setCredential(&quot;Application Name&quot;, &quot;Username&quot;, &quot;Password&quot;);\r\n    // Get a credential\r\n    Credential cred = wc.getCredential(&quot;Application Name&quot;);\r\n    String username = cred.username;\r\n    String password = cred.password;\r\n\r\n    System.out.println(username);\r\n    System.out.println(password);\r\n    // Delete a credential\r\n    wc.deleteCredential(&quot;Application Name&quot;)\r\n```\r\n\r\nPut this in your build.gradle:\r\n\r\n```groovy\r\n    implementation(&#39;net.java.dev.jna:jna:5.11.0&#39;)\r\n    implementation(&#39;net.java.dev.jna:jna-platform:5.11.0&#39;)\r\n```\r\n\r\nFirst file:\r\n\r\n```java\r\npackage wincred;\r\n\r\nimport com.sun.jna.LastErrorException;\r\nimport com.sun.jna.Memory;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.Pointer;\r\nimport com.sun.jna.Structure;\r\nimport com.sun.jna.platform.win32.WinBase;\r\nimport com.sun.jna.win32.StdCallLibrary;\r\nimport com.sun.jna.win32.W32APIOptions;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\n/**\r\n * This class exposes functions from credential manager on Windows platform\r\n * via JNA.\r\n *\r\n * Please refer to MSDN documentations for each method usage pattern\r\n */\r\ninterface CredAdvapi32 extends StdCallLibrary {\r\n    CredAdvapi32 INSTANCE = (CredAdvapi32) Native.load(&quot;Advapi32&quot;,\r\n            CredAdvapi32.class, W32APIOptions.UNICODE_OPTIONS);\r\n    /**\r\n     * CredRead flag\r\n     */\r\n    int CRED_FLAGS_PROMPT_NOW = 0x0002;\r\n    int CRED_FLAGS_USERNAME_TARGET = 0x0004;\r\n\r\n    /**\r\n     * Type of Credential\r\n     */\r\n    int CRED_TYPE_GENERIC = 1;\r\n    int CRED_TYPE_DOMAIN_PASSWORD = 2;\r\n    int CRED_TYPE_DOMAIN_CERTIFICATE = 3;\r\n    int CRED_TYPE_DOMAIN_VISIBLE_PASSWORD = 4;\r\n    int CRED_TYPE_GENERIC_CERTIFICATE = 5;\r\n    int CRED_TYPE_DOMAIN_EXTENDED = 6;\r\n    int CRED_TYPE_MAXIMUM = 7;       // Maximum supported cred type\r\n    int CRED_TYPE_MAXIMUM_EX = CRED_TYPE_MAXIMUM + 1000;\r\n\r\n    /**\r\n     * CredWrite flag\r\n     */\r\n    int CRED_PRESERVE_CREDENTIAL_BLOB = 0x1;\r\n\r\n    /**\r\n     * Values of the Credential Persist field\r\n     */\r\n    int CRED_PERSIST_NONE = 0;\r\n    int CRED_PERSIST_SESSION = 1;\r\n    int CRED_PERSIST_LOCAL_MACHINE = 2;\r\n    int CRED_PERSIST_ENTERPRISE = 3;\r\n\r\n    /**\r\n     * Credential attributes\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374790(v=vs.85).aspx\r\n     *\r\n     * typedef struct _CREDENTIAL_ATTRIBUTE {\r\n     *   LPTSTR Keyword;\r\n     *   DWORD  Flags;\r\n     *   DWORD  ValueSize;\r\n     *   LPBYTE Value;\r\n     * } CREDENTIAL_ATTRIBUTE, *PCREDENTIAL_ATTRIBUTE;\r\n     *\r\n     */\r\n    class CREDENTIAL_ATTRIBUTE extends Structure {\r\n\r\n        public static class ByReference extends CREDENTIAL_ATTRIBUTE implements Structure.ByReference { }\r\n\r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Arrays.asList(&quot;Keyword&quot;,\r\n                    &quot;Flags&quot;,\r\n                    &quot;ValueSize&quot;,\r\n                    &quot;Value&quot;);\r\n        }\r\n\r\n        /**\r\n         *    Name of the application-specific attribute. Names should be of the form &lt;CompanyName&gt;_&lt;Name&gt;.\r\n         *    This member cannot be longer than CRED_MAX_STRING_LENGTH (256) characters.\r\n         */\r\n        public String Keyword;\r\n\r\n        /**\r\n         *   Identifies characteristics of the credential attribute. This member is reserved and should be originally\r\n         *   initialized as zero and not otherwise altered to permit future enhancement.\r\n         */\r\n        public int Flags;\r\n\r\n        /**\r\n         *   Length of Value in bytes. This member cannot be larger than CRED_MAX_VALUE_SIZE (256).\r\n         */\r\n        public int ValueSize;\r\n\r\n        /**\r\n         *   Data associated with the attribute. By convention, if Value is a text string, then Value should not\r\n         *   include the trailing zero character and should be in UNICODE.\r\n         *\r\n         *   Credentials are expected to be portable. The application should take care to ensure that the data in\r\n         *   value is portable. It is the responsibility of the application to define the byte-endian and alignment\r\n         *   of the data in Value.\r\n         */\r\n        public Pointer Value;\r\n    }\r\n\r\n    /**\r\n     * Pointer to {@See CREDENTIAL_ATTRIBUTE} struct\r\n     */\r\n    class PCREDENTIAL_ATTRIBUTE extends Structure {\r\n\r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Collections.singletonList(&quot;credential_attribute&quot;);\r\n        }\r\n\r\n        public PCREDENTIAL_ATTRIBUTE() {\r\n            super();\r\n        }\r\n\r\n        public PCREDENTIAL_ATTRIBUTE(byte[] data) {\r\n            super(new Memory(data.length));\r\n            getPointer().write(0, data, 0, data.length);\r\n            read();\r\n        }\r\n\r\n        public PCREDENTIAL_ATTRIBUTE(Pointer memory) {\r\n            super(memory);\r\n            read();\r\n        }\r\n\r\n        public Pointer credential_attribute;\r\n    }\r\n\r\n    /**\r\n     * The CREDENTIAL structure contains an individual credential\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374788(v=vs.85).aspx\r\n     *\r\n     * typedef struct _CREDENTIAL {\r\n     *   DWORD                 Flags;\r\n     *   DWORD                 Type;\r\n     *   LPTSTR                TargetName;\r\n     *   LPTSTR                Comment;\r\n     *   FILETIME              LastWritten;\r\n     *   DWORD                 CredentialBlobSize;\r\n     *   LPBYTE                CredentialBlob;\r\n     *   DWORD                 Persist;\r\n     *   DWORD                 AttributeCount;\r\n     *   PCREDENTIAL_ATTRIBUTE Attributes;\r\n     *   LPTSTR                TargetAlias;\r\n     *   LPTSTR                UserName;\r\n     * } CREDENTIAL, *PCREDENTIAL;\r\n     */\r\n    class CREDENTIAL extends Structure {\r\n\r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Arrays.asList(&quot;Flags&quot;,\r\n                    &quot;Type&quot;,\r\n                    &quot;TargetName&quot;,\r\n                    &quot;Comment&quot;,\r\n                    &quot;LastWritten&quot;,\r\n                    &quot;CredentialBlobSize&quot;,\r\n                    &quot;CredentialBlob&quot;,\r\n                    &quot;Persist&quot;,\r\n                    &quot;AttributeCount&quot;,\r\n                    &quot;Attributes&quot;,\r\n                    &quot;TargetAlias&quot;,\r\n                    &quot;UserName&quot;);\r\n        }\r\n\r\n        public CREDENTIAL() {\r\n            super();\r\n        }\r\n\r\n        public CREDENTIAL(final int size) {\r\n            super(new Memory(size));\r\n        }\r\n\r\n        public CREDENTIAL(Pointer memory) {\r\n            super(memory);\r\n            read();\r\n        }\r\n\r\n        /**\r\n         *   A bit member that identifies characteristics of the credential. Undefined bits should be initialized\r\n         *   as zero and not otherwise altered to permit future enhancement.\r\n         *\r\n         *   See MSDN doc for all possible flags\r\n         */\r\n        public int Flags;\r\n\r\n        /**\r\n         *   The type of the credential. This member cannot be changed after the credential is created.\r\n         *\r\n         *   See MSDN doc for all possible types\r\n         */\r\n        public int Type;\r\n\r\n        /**\r\n         *   The name of the credential. The TargetName and Type members uniquely identify the credential.\r\n         *   This member cannot be changed after the credential is created. Instead, the credential with the old\r\n         *   name should be deleted and the credential with the new name created.\r\n         *\r\n         *   See MSDN doc for additional requirement\r\n         */\r\n        public String TargetName;\r\n\r\n        /**\r\n         *   A string comment from the user that describes this credential. This member cannot be longer than\r\n         *   CRED_MAX_STRING_LENGTH (256) characters.\r\n         */\r\n        public String Comment;\r\n\r\n        /**\r\n         *   The time, in Coordinated Universal Time (Greenwich Mean Time), of the last modification of the credential.\r\n         *   For write operations, the value of this member is ignored.\r\n         */\r\n        public WinBase.FILETIME LastWritten;\r\n\r\n        /**\r\n         *   The size, in bytes, of the CredentialBlob member. This member cannot be larger than\r\n         *   CRED_MAX_CREDENTIAL_BLOB_SIZE (512) bytes.\r\n         */\r\n        public int CredentialBlobSize;\r\n\r\n        /**\r\n         *   Secret data for the credential. The CredentialBlob member can be both read and written.\r\n         *   If the Type member is CRED_TYPE_DOMAIN_PASSWORD, this member contains the plaintext Unicode password\r\n         *   for UserName. The CredentialBlob and CredentialBlobSize members do not include a trailing zero character.\r\n         *   Also, for CRED_TYPE_DOMAIN_PASSWORD, this member can only be read by the authentication packages.\r\n         *\r\n         *   If the Type member is CRED_TYPE_DOMAIN_CERTIFICATE, this member contains the clear test\r\n         *   Unicode PIN for UserName. The CredentialBlob and CredentialBlobSize members do not include a trailing\r\n         *   zero character. Also, this member can only be read by the authentication packages.\r\n         *\r\n         *   If the Type member is CRED_TYPE_GENERIC, this member is defined by the application.\r\n         *   Credentials are expected to be portable. Applications should ensure that the data in CredentialBlob is\r\n         *   portable. The application defines the byte-endian and alignment of the data in CredentialBlob.\r\n         */\r\n        public Pointer CredentialBlob;\r\n\r\n        /**\r\n         *   Defines the persistence of this credential. This member can be read and written.\r\n         *\r\n         *   See MSDN doc for all possible values\r\n         */\r\n        public int Persist;\r\n\r\n        /**\r\n         *   The number of application-defined attributes to be associated with the credential. This member can be\r\n         *   read and written. Its value cannot be greater than CRED_MAX_ATTRIBUTES (64).\r\n         */\r\n        public int AttributeCount;\r\n\r\n        /**\r\n         *   Application-defined attributes that are associated with the credential. This member can be read\r\n         *   and written.\r\n         */\r\n        //notTODO: Need to make this into array\r\n        public CREDENTIAL_ATTRIBUTE.ByReference Attributes;\r\n\r\n        /**\r\n         *   Alias for the TargetName member. This member can be read and written. It cannot be longer than\r\n         *   CRED_MAX_STRING_LENGTH (256) characters.\r\n         *\r\n         *   If the credential Type is CRED_TYPE_GENERIC, this member can be non-NULL, but the credential manager\r\n         *   ignores the member.\r\n         */\r\n        public String TargetAlias;\r\n\r\n        /**\r\n         *   The user name of the account used to connect to TargetName.\r\n         *   If the credential Type is CRED_TYPE_DOMAIN_PASSWORD, this member can be either a DomainName\\UserName\r\n         *   or a UPN.\r\n         *\r\n         *   If the credential Type is CRED_TYPE_DOMAIN_CERTIFICATE, this member must be a marshaled certificate\r\n         *   reference created by calling CredMarshalCredential with a CertCredential.\r\n         *\r\n         *   If the credential Type is CRED_TYPE_GENERIC, this member can be non-NULL, but the credential manager\r\n         *   ignores the member.\r\n         *\r\n         *   This member cannot be longer than CRED_MAX_USERNAME_LENGTH (513) characters.\r\n         */\r\n        public String UserName;\r\n    }\r\n\r\n    /**\r\n     *  Pointer to {@see CREDENTIAL} struct\r\n     */\r\n    class PCREDENTIAL extends Structure {\r\n\r\n        @Override\r\n        protected List&lt;String&gt; getFieldOrder() {\r\n            return Collections.singletonList(&quot;credential&quot;);\r\n        }\r\n\r\n        public PCREDENTIAL() {\r\n            super();\r\n        }\r\n\r\n        public PCREDENTIAL(byte[] data) {\r\n            super(new Memory(data.length));\r\n            getPointer().write(0, data, 0, data.length);\r\n            read();\r\n        }\r\n\r\n        public PCREDENTIAL(Pointer memory) {\r\n            super(memory);\r\n            read();\r\n        }\r\n\r\n        public Pointer credential;\r\n    }\r\n\r\n    /**\r\n     * The CredRead function reads a credential from the user&#39;s credential set.\r\n     *\r\n     * The credential set used is the one associated with the logon session of the current token.\r\n     * The token must not have the user&#39;s SID disabled.\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374804(v=vs.85).aspx\r\n     *\r\n     * @param targetName\r\n     *      String that contains the name of the credential to read.\r\n     * @param type\r\n     *      Type of the credential to read. Type must be one of the CRED_TYPE_* defined types.\r\n     * @param flags\r\n     *      Currently reserved and must be zero.\r\n     * @param pcredential\r\n     *      Out - Pointer to a single allocated block buffer to return the credential.\r\n     *      Any pointers contained within the buffer are pointers to locations within this single allocated block.\r\n     *      The single returned buffer must be freed by calling &lt;code&gt;CredFree&lt;/code&gt;.\r\n     *\r\n     * @return\r\n     *      True if CredRead succeeded, false otherwise\r\n     *\r\n     * @throws LastErrorException\r\n     *      GetLastError\r\n     */\r\n    boolean CredRead(String targetName, int type, int flags, PCREDENTIAL pcredential) throws LastErrorException;\r\n\r\n    /**\r\n     * The CredWrite function creates a new credential or modifies an existing credential in the user&#39;s credential set.\r\n     * The new credential is associated with the logon session of the current token. The token must not have the\r\n     * user&#39;s security identifier (SID) disabled.\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa375187(v=vs.85).aspx\r\n     *\r\n     * @param credential\r\n     *      A CREDENTIAL structure to be written.\r\n     * @param flags\r\n     *      Flags that control the function&#39;s operation. The following flag is defined.\r\n     *      CRED_PRESERVE_CREDENTIAL_BLOB:\r\n     *          The credential BLOB from an existing credential is preserved with the same\r\n     *          credential name and credential type. The CredentialBlobSize of the passed\r\n     *          in Credential structure must be zero.\r\n     *\r\n     * @return\r\n     *      True if CredWrite succeeded, false otherwise\r\n     *\r\n     * @throws LastErrorException\r\n     *      GetLastError\r\n     */\r\n    boolean CredWrite(CREDENTIAL credential, int flags) throws LastErrorException;\r\n\r\n    /**\r\n     * The CredDelete function deletes a credential from the user&#39;s credential set. The credential set used is the one\r\n     * associated with the logon session of the current token. The token must not have the user&#39;s SID disabled.\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374787(v=vs.85).aspx\r\n     *\r\n     * @param targetName\r\n     *      String that contains the name of the credential to read.\r\n     * @param type\r\n     *      Type of the credential to delete. Must be one of the CRED_TYPE_* defined types. For a list of the\r\n     *      defined types, see the Type member of the CREDENTIAL structure.\r\n     *      If the value of this parameter is CRED_TYPE_DOMAIN_EXTENDED, this function can delete a credential that\r\n     *      specifies a user name when there are multiple credentials for the same target. The value of the TargetName\r\n     *      parameter must specify the user name as Target|UserName.\r\n     * @param flags\r\n     *      Reserved and must be zero.\r\n     *\r\n     * @return\r\n     *      True if CredDelete succeeded, false otherwise\r\n     *\r\n     * @throws LastErrorException\r\n     *      GetLastError\r\n     */\r\n    boolean CredDelete(String targetName, int type, int flags) throws LastErrorException;\r\n\r\n    /**\r\n     * The CredFree function frees a buffer returned by any of the credentials management functions.\r\n     *\r\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374796(v=vs.85).aspx\r\n     *\r\n     * @param credential\r\n     *      Pointer to CREDENTIAL to be freed\r\n     *\r\n     * @throws LastErrorException\r\n     *      GetLastError\r\n     */\r\n    void CredFree(Pointer credential) throws LastErrorException;\r\n}\r\n```\r\n\r\nThe other file:\r\n\r\n```java\r\npackage wincred;\r\n\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.nio.charset.Charset;\r\n\r\nimport com.sun.jna.LastErrorException;\r\nimport com.sun.jna.Memory;\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.Pointer;\r\n\r\npublic class WinCred implements CredAdvapi32 {\r\n\r\n  public static &lt;T&gt; T coalesce(final T maybeNullValue, final T nonNullValue) {\r\n    return maybeNullValue == null ? nonNullValue : maybeNullValue;\r\n  }\r\n\r\n  public class Credential {\r\n    public String target;\r\n    public String username;\r\n    public String password;\r\n\r\n    public Credential(String target, String username, String password) {\r\n      this.target = coalesce(target, &quot;&quot;);\r\n      this.username = coalesce(username, &quot;&quot;);\r\n      this.password = coalesce(password, &quot;&quot;);\r\n    }\r\n  }\r\n\r\n  public Credential getCredential(String target) {\r\n    PCREDENTIAL pcredMem = new PCREDENTIAL();\r\n\r\n    try {\r\n    if (CredRead(target, 1, 0, pcredMem)) {\r\n      CREDENTIAL credMem = new CREDENTIAL(pcredMem.credential);\r\n      byte[] passwordBytes = credMem.CredentialBlob.getByteArray(0, credMem.CredentialBlobSize);\r\n\r\n      String password = new String(passwordBytes, Charset.forName(&quot;UTF-16LE&quot;));\r\n      Credential cred = new WinCred.Credential(credMem.TargetName, credMem.UserName, password);\r\n      return cred;\r\n    } else {\r\n      int err = Native.getLastError();\r\n      throw new LastErrorException(err);\r\n    }\r\n    } finally {\r\n      CredFree(pcredMem.credential);\r\n    }\r\n  }\r\n\r\n  public boolean setCredential(String target, String userName, String password) throws UnsupportedEncodingException {\r\n    CREDENTIAL credMem = new CREDENTIAL();\r\n\r\n    credMem.Flags = 0;\r\n    credMem.TargetName = target;\r\n    credMem.Type = CRED_TYPE_GENERIC;\r\n    credMem.UserName = userName;\r\n    credMem.AttributeCount = 0;\r\n    credMem.Persist = CRED_PERSIST_ENTERPRISE;\r\n    byte[] bpassword = password.getBytes(&quot;UTF-16LE&quot;);\r\n    credMem.CredentialBlobSize = (int) bpassword.length;\r\n    credMem.CredentialBlob = getPointer(bpassword);\r\n    if (!CredWrite(credMem, 0)) {\r\n      int err = Native.getLastError();\r\n      throw new LastErrorException(err);\r\n    } else {\r\n        return true;\r\n    }\r\n  }\r\n\r\n  public boolean deleteCredential(String target) throws UnsupportedEncodingException {\r\n    if (!CredDelete(target, CRED_TYPE_GENERIC, 0)) {\r\n      int err = Native.getLastError();\r\n      throw new LastErrorException(err);\r\n    } else {\r\n        return true;\r\n    }\r\n  }\r\n\r\n  private static Pointer getPointer(byte[] array) {\r\n    Pointer p = new Memory(array.length);\r\n    p.write(0, array, 0, array.length);\r\n\r\n    return p;\r\n  }\r\n\r\n  @Override\r\n  public boolean CredRead(String targetName, int type, int flags, PCREDENTIAL pcredential) throws LastErrorException {\r\n    synchronized (INSTANCE) {\r\n      return INSTANCE.CredRead(targetName, type, flags, pcredential);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public boolean CredWrite(CREDENTIAL credential, int flags) throws LastErrorException {\r\n    synchronized (INSTANCE) {\r\n      return INSTANCE.CredWrite(credential, flags);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public boolean CredDelete(String targetName, int type, int flags) throws LastErrorException {\r\n    synchronized (INSTANCE) {\r\n      return INSTANCE.CredDelete(targetName, type, flags);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public void CredFree(Pointer credential) throws LastErrorException {\r\n    synchronized (INSTANCE) {\r\n      INSTANCE.CredFree(credential);\r\n    }\r\n  }\r\n}\r\n```","title":"Use the windows credential manager in Java to get credentials for authentication into git and other services","body":"<p>Cheese.....don't use that library.</p>\n<p>A) It's broken</p>\n<p>B) It's needlessly convoluted (XML backed credential object? srsly?)</p>\n<p>C) It depends on some vulnerable libraries. Don't do that to your customers. Just don't. It's already bad enough that they're stuck with Java.</p>\n<p>Drop these two files into your project, and use them like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    WinCred wc = new WinCred();\n    // Create a credential\n    wc.setCredential(&quot;Application Name&quot;, &quot;Username&quot;, &quot;Password&quot;);\n    // Get a credential\n    Credential cred = wc.getCredential(&quot;Application Name&quot;);\n    String username = cred.username;\n    String password = cred.password;\n\n    System.out.println(username);\n    System.out.println(password);\n    // Delete a credential\n    wc.deleteCredential(&quot;Application Name&quot;)\n</code></pre>\n<p>Put this in your build.gradle:</p>\n<pre><code>    implementation('net.java.dev.jna:jna:5.11.0')\n    implementation('net.java.dev.jna:jna-platform:5.11.0')\n</code></pre>\n<p>First file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package wincred;\n\nimport com.sun.jna.LastErrorException;\nimport com.sun.jna.Memory;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\nimport com.sun.jna.Structure;\nimport com.sun.jna.platform.win32.WinBase;\nimport com.sun.jna.win32.StdCallLibrary;\nimport com.sun.jna.win32.W32APIOptions;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\n\n/**\n * This class exposes functions from credential manager on Windows platform\n * via JNA.\n *\n * Please refer to MSDN documentations for each method usage pattern\n */\ninterface CredAdvapi32 extends StdCallLibrary {\n    CredAdvapi32 INSTANCE = (CredAdvapi32) Native.load(&quot;Advapi32&quot;,\n            CredAdvapi32.class, W32APIOptions.UNICODE_OPTIONS);\n    /**\n     * CredRead flag\n     */\n    int CRED_FLAGS_PROMPT_NOW = 0x0002;\n    int CRED_FLAGS_USERNAME_TARGET = 0x0004;\n\n    /**\n     * Type of Credential\n     */\n    int CRED_TYPE_GENERIC = 1;\n    int CRED_TYPE_DOMAIN_PASSWORD = 2;\n    int CRED_TYPE_DOMAIN_CERTIFICATE = 3;\n    int CRED_TYPE_DOMAIN_VISIBLE_PASSWORD = 4;\n    int CRED_TYPE_GENERIC_CERTIFICATE = 5;\n    int CRED_TYPE_DOMAIN_EXTENDED = 6;\n    int CRED_TYPE_MAXIMUM = 7;       // Maximum supported cred type\n    int CRED_TYPE_MAXIMUM_EX = CRED_TYPE_MAXIMUM + 1000;\n\n    /**\n     * CredWrite flag\n     */\n    int CRED_PRESERVE_CREDENTIAL_BLOB = 0x1;\n\n    /**\n     * Values of the Credential Persist field\n     */\n    int CRED_PERSIST_NONE = 0;\n    int CRED_PERSIST_SESSION = 1;\n    int CRED_PERSIST_LOCAL_MACHINE = 2;\n    int CRED_PERSIST_ENTERPRISE = 3;\n\n    /**\n     * Credential attributes\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374790(v=vs.85).aspx\n     *\n     * typedef struct _CREDENTIAL_ATTRIBUTE {\n     *   LPTSTR Keyword;\n     *   DWORD  Flags;\n     *   DWORD  ValueSize;\n     *   LPBYTE Value;\n     * } CREDENTIAL_ATTRIBUTE, *PCREDENTIAL_ATTRIBUTE;\n     *\n     */\n    class CREDENTIAL_ATTRIBUTE extends Structure {\n\n        public static class ByReference extends CREDENTIAL_ATTRIBUTE implements Structure.ByReference { }\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Arrays.asList(&quot;Keyword&quot;,\n                    &quot;Flags&quot;,\n                    &quot;ValueSize&quot;,\n                    &quot;Value&quot;);\n        }\n\n        /**\n         *    Name of the application-specific attribute. Names should be of the form &lt;CompanyName&gt;_&lt;Name&gt;.\n         *    This member cannot be longer than CRED_MAX_STRING_LENGTH (256) characters.\n         */\n        public String Keyword;\n\n        /**\n         *   Identifies characteristics of the credential attribute. This member is reserved and should be originally\n         *   initialized as zero and not otherwise altered to permit future enhancement.\n         */\n        public int Flags;\n\n        /**\n         *   Length of Value in bytes. This member cannot be larger than CRED_MAX_VALUE_SIZE (256).\n         */\n        public int ValueSize;\n\n        /**\n         *   Data associated with the attribute. By convention, if Value is a text string, then Value should not\n         *   include the trailing zero character and should be in UNICODE.\n         *\n         *   Credentials are expected to be portable. The application should take care to ensure that the data in\n         *   value is portable. It is the responsibility of the application to define the byte-endian and alignment\n         *   of the data in Value.\n         */\n        public Pointer Value;\n    }\n\n    /**\n     * Pointer to {@See CREDENTIAL_ATTRIBUTE} struct\n     */\n    class PCREDENTIAL_ATTRIBUTE extends Structure {\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Collections.singletonList(&quot;credential_attribute&quot;);\n        }\n\n        public PCREDENTIAL_ATTRIBUTE() {\n            super();\n        }\n\n        public PCREDENTIAL_ATTRIBUTE(byte[] data) {\n            super(new Memory(data.length));\n            getPointer().write(0, data, 0, data.length);\n            read();\n        }\n\n        public PCREDENTIAL_ATTRIBUTE(Pointer memory) {\n            super(memory);\n            read();\n        }\n\n        public Pointer credential_attribute;\n    }\n\n    /**\n     * The CREDENTIAL structure contains an individual credential\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374788(v=vs.85).aspx\n     *\n     * typedef struct _CREDENTIAL {\n     *   DWORD                 Flags;\n     *   DWORD                 Type;\n     *   LPTSTR                TargetName;\n     *   LPTSTR                Comment;\n     *   FILETIME              LastWritten;\n     *   DWORD                 CredentialBlobSize;\n     *   LPBYTE                CredentialBlob;\n     *   DWORD                 Persist;\n     *   DWORD                 AttributeCount;\n     *   PCREDENTIAL_ATTRIBUTE Attributes;\n     *   LPTSTR                TargetAlias;\n     *   LPTSTR                UserName;\n     * } CREDENTIAL, *PCREDENTIAL;\n     */\n    class CREDENTIAL extends Structure {\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Arrays.asList(&quot;Flags&quot;,\n                    &quot;Type&quot;,\n                    &quot;TargetName&quot;,\n                    &quot;Comment&quot;,\n                    &quot;LastWritten&quot;,\n                    &quot;CredentialBlobSize&quot;,\n                    &quot;CredentialBlob&quot;,\n                    &quot;Persist&quot;,\n                    &quot;AttributeCount&quot;,\n                    &quot;Attributes&quot;,\n                    &quot;TargetAlias&quot;,\n                    &quot;UserName&quot;);\n        }\n\n        public CREDENTIAL() {\n            super();\n        }\n\n        public CREDENTIAL(final int size) {\n            super(new Memory(size));\n        }\n\n        public CREDENTIAL(Pointer memory) {\n            super(memory);\n            read();\n        }\n\n        /**\n         *   A bit member that identifies characteristics of the credential. Undefined bits should be initialized\n         *   as zero and not otherwise altered to permit future enhancement.\n         *\n         *   See MSDN doc for all possible flags\n         */\n        public int Flags;\n\n        /**\n         *   The type of the credential. This member cannot be changed after the credential is created.\n         *\n         *   See MSDN doc for all possible types\n         */\n        public int Type;\n\n        /**\n         *   The name of the credential. The TargetName and Type members uniquely identify the credential.\n         *   This member cannot be changed after the credential is created. Instead, the credential with the old\n         *   name should be deleted and the credential with the new name created.\n         *\n         *   See MSDN doc for additional requirement\n         */\n        public String TargetName;\n\n        /**\n         *   A string comment from the user that describes this credential. This member cannot be longer than\n         *   CRED_MAX_STRING_LENGTH (256) characters.\n         */\n        public String Comment;\n\n        /**\n         *   The time, in Coordinated Universal Time (Greenwich Mean Time), of the last modification of the credential.\n         *   For write operations, the value of this member is ignored.\n         */\n        public WinBase.FILETIME LastWritten;\n\n        /**\n         *   The size, in bytes, of the CredentialBlob member. This member cannot be larger than\n         *   CRED_MAX_CREDENTIAL_BLOB_SIZE (512) bytes.\n         */\n        public int CredentialBlobSize;\n\n        /**\n         *   Secret data for the credential. The CredentialBlob member can be both read and written.\n         *   If the Type member is CRED_TYPE_DOMAIN_PASSWORD, this member contains the plaintext Unicode password\n         *   for UserName. The CredentialBlob and CredentialBlobSize members do not include a trailing zero character.\n         *   Also, for CRED_TYPE_DOMAIN_PASSWORD, this member can only be read by the authentication packages.\n         *\n         *   If the Type member is CRED_TYPE_DOMAIN_CERTIFICATE, this member contains the clear test\n         *   Unicode PIN for UserName. The CredentialBlob and CredentialBlobSize members do not include a trailing\n         *   zero character. Also, this member can only be read by the authentication packages.\n         *\n         *   If the Type member is CRED_TYPE_GENERIC, this member is defined by the application.\n         *   Credentials are expected to be portable. Applications should ensure that the data in CredentialBlob is\n         *   portable. The application defines the byte-endian and alignment of the data in CredentialBlob.\n         */\n        public Pointer CredentialBlob;\n\n        /**\n         *   Defines the persistence of this credential. This member can be read and written.\n         *\n         *   See MSDN doc for all possible values\n         */\n        public int Persist;\n\n        /**\n         *   The number of application-defined attributes to be associated with the credential. This member can be\n         *   read and written. Its value cannot be greater than CRED_MAX_ATTRIBUTES (64).\n         */\n        public int AttributeCount;\n\n        /**\n         *   Application-defined attributes that are associated with the credential. This member can be read\n         *   and written.\n         */\n        //notTODO: Need to make this into array\n        public CREDENTIAL_ATTRIBUTE.ByReference Attributes;\n\n        /**\n         *   Alias for the TargetName member. This member can be read and written. It cannot be longer than\n         *   CRED_MAX_STRING_LENGTH (256) characters.\n         *\n         *   If the credential Type is CRED_TYPE_GENERIC, this member can be non-NULL, but the credential manager\n         *   ignores the member.\n         */\n        public String TargetAlias;\n\n        /**\n         *   The user name of the account used to connect to TargetName.\n         *   If the credential Type is CRED_TYPE_DOMAIN_PASSWORD, this member can be either a DomainName\\UserName\n         *   or a UPN.\n         *\n         *   If the credential Type is CRED_TYPE_DOMAIN_CERTIFICATE, this member must be a marshaled certificate\n         *   reference created by calling CredMarshalCredential with a CertCredential.\n         *\n         *   If the credential Type is CRED_TYPE_GENERIC, this member can be non-NULL, but the credential manager\n         *   ignores the member.\n         *\n         *   This member cannot be longer than CRED_MAX_USERNAME_LENGTH (513) characters.\n         */\n        public String UserName;\n    }\n\n    /**\n     *  Pointer to {@see CREDENTIAL} struct\n     */\n    class PCREDENTIAL extends Structure {\n\n        @Override\n        protected List&lt;String&gt; getFieldOrder() {\n            return Collections.singletonList(&quot;credential&quot;);\n        }\n\n        public PCREDENTIAL() {\n            super();\n        }\n\n        public PCREDENTIAL(byte[] data) {\n            super(new Memory(data.length));\n            getPointer().write(0, data, 0, data.length);\n            read();\n        }\n\n        public PCREDENTIAL(Pointer memory) {\n            super(memory);\n            read();\n        }\n\n        public Pointer credential;\n    }\n\n    /**\n     * The CredRead function reads a credential from the user's credential set.\n     *\n     * The credential set used is the one associated with the logon session of the current token.\n     * The token must not have the user's SID disabled.\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374804(v=vs.85).aspx\n     *\n     * @param targetName\n     *      String that contains the name of the credential to read.\n     * @param type\n     *      Type of the credential to read. Type must be one of the CRED_TYPE_* defined types.\n     * @param flags\n     *      Currently reserved and must be zero.\n     * @param pcredential\n     *      Out - Pointer to a single allocated block buffer to return the credential.\n     *      Any pointers contained within the buffer are pointers to locations within this single allocated block.\n     *      The single returned buffer must be freed by calling &lt;code&gt;CredFree&lt;/code&gt;.\n     *\n     * @return\n     *      True if CredRead succeeded, false otherwise\n     *\n     * @throws LastErrorException\n     *      GetLastError\n     */\n    boolean CredRead(String targetName, int type, int flags, PCREDENTIAL pcredential) throws LastErrorException;\n\n    /**\n     * The CredWrite function creates a new credential or modifies an existing credential in the user's credential set.\n     * The new credential is associated with the logon session of the current token. The token must not have the\n     * user's security identifier (SID) disabled.\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa375187(v=vs.85).aspx\n     *\n     * @param credential\n     *      A CREDENTIAL structure to be written.\n     * @param flags\n     *      Flags that control the function's operation. The following flag is defined.\n     *      CRED_PRESERVE_CREDENTIAL_BLOB:\n     *          The credential BLOB from an existing credential is preserved with the same\n     *          credential name and credential type. The CredentialBlobSize of the passed\n     *          in Credential structure must be zero.\n     *\n     * @return\n     *      True if CredWrite succeeded, false otherwise\n     *\n     * @throws LastErrorException\n     *      GetLastError\n     */\n    boolean CredWrite(CREDENTIAL credential, int flags) throws LastErrorException;\n\n    /**\n     * The CredDelete function deletes a credential from the user's credential set. The credential set used is the one\n     * associated with the logon session of the current token. The token must not have the user's SID disabled.\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374787(v=vs.85).aspx\n     *\n     * @param targetName\n     *      String that contains the name of the credential to read.\n     * @param type\n     *      Type of the credential to delete. Must be one of the CRED_TYPE_* defined types. For a list of the\n     *      defined types, see the Type member of the CREDENTIAL structure.\n     *      If the value of this parameter is CRED_TYPE_DOMAIN_EXTENDED, this function can delete a credential that\n     *      specifies a user name when there are multiple credentials for the same target. The value of the TargetName\n     *      parameter must specify the user name as Target|UserName.\n     * @param flags\n     *      Reserved and must be zero.\n     *\n     * @return\n     *      True if CredDelete succeeded, false otherwise\n     *\n     * @throws LastErrorException\n     *      GetLastError\n     */\n    boolean CredDelete(String targetName, int type, int flags) throws LastErrorException;\n\n    /**\n     * The CredFree function frees a buffer returned by any of the credentials management functions.\n     *\n     * https://msdn.microsoft.com/en-us/library/windows/desktop/aa374796(v=vs.85).aspx\n     *\n     * @param credential\n     *      Pointer to CREDENTIAL to be freed\n     *\n     * @throws LastErrorException\n     *      GetLastError\n     */\n    void CredFree(Pointer credential) throws LastErrorException;\n}\n</code></pre>\n<p>The other file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package wincred;\n\nimport java.io.UnsupportedEncodingException;\nimport java.nio.charset.Charset;\n\nimport com.sun.jna.LastErrorException;\nimport com.sun.jna.Memory;\nimport com.sun.jna.Native;\nimport com.sun.jna.Pointer;\n\npublic class WinCred implements CredAdvapi32 {\n\n  public static &lt;T&gt; T coalesce(final T maybeNullValue, final T nonNullValue) {\n    return maybeNullValue == null ? nonNullValue : maybeNullValue;\n  }\n\n  public class Credential {\n    public String target;\n    public String username;\n    public String password;\n\n    public Credential(String target, String username, String password) {\n      this.target = coalesce(target, &quot;&quot;);\n      this.username = coalesce(username, &quot;&quot;);\n      this.password = coalesce(password, &quot;&quot;);\n    }\n  }\n\n  public Credential getCredential(String target) {\n    PCREDENTIAL pcredMem = new PCREDENTIAL();\n\n    try {\n    if (CredRead(target, 1, 0, pcredMem)) {\n      CREDENTIAL credMem = new CREDENTIAL(pcredMem.credential);\n      byte[] passwordBytes = credMem.CredentialBlob.getByteArray(0, credMem.CredentialBlobSize);\n\n      String password = new String(passwordBytes, Charset.forName(&quot;UTF-16LE&quot;));\n      Credential cred = new WinCred.Credential(credMem.TargetName, credMem.UserName, password);\n      return cred;\n    } else {\n      int err = Native.getLastError();\n      throw new LastErrorException(err);\n    }\n    } finally {\n      CredFree(pcredMem.credential);\n    }\n  }\n\n  public boolean setCredential(String target, String userName, String password) throws UnsupportedEncodingException {\n    CREDENTIAL credMem = new CREDENTIAL();\n\n    credMem.Flags = 0;\n    credMem.TargetName = target;\n    credMem.Type = CRED_TYPE_GENERIC;\n    credMem.UserName = userName;\n    credMem.AttributeCount = 0;\n    credMem.Persist = CRED_PERSIST_ENTERPRISE;\n    byte[] bpassword = password.getBytes(&quot;UTF-16LE&quot;);\n    credMem.CredentialBlobSize = (int) bpassword.length;\n    credMem.CredentialBlob = getPointer(bpassword);\n    if (!CredWrite(credMem, 0)) {\n      int err = Native.getLastError();\n      throw new LastErrorException(err);\n    } else {\n        return true;\n    }\n  }\n\n  public boolean deleteCredential(String target) throws UnsupportedEncodingException {\n    if (!CredDelete(target, CRED_TYPE_GENERIC, 0)) {\n      int err = Native.getLastError();\n      throw new LastErrorException(err);\n    } else {\n        return true;\n    }\n  }\n\n  private static Pointer getPointer(byte[] array) {\n    Pointer p = new Memory(array.length);\n    p.write(0, array, 0, array.length);\n\n    return p;\n  }\n\n  @Override\n  public boolean CredRead(String targetName, int type, int flags, PCREDENTIAL pcredential) throws LastErrorException {\n    synchronized (INSTANCE) {\n      return INSTANCE.CredRead(targetName, type, flags, pcredential);\n    }\n  }\n\n  @Override\n  public boolean CredWrite(CREDENTIAL credential, int flags) throws LastErrorException {\n    synchronized (INSTANCE) {\n      return INSTANCE.CredWrite(credential, flags);\n    }\n  }\n\n  @Override\n  public boolean CredDelete(String targetName, int type, int flags) throws LastErrorException {\n    synchronized (INSTANCE) {\n      return INSTANCE.CredDelete(targetName, type, flags);\n    }\n  }\n\n  @Override\n  public void CredFree(Pointer credential) throws LastErrorException {\n    synchronized (INSTANCE) {\n      INSTANCE.CredFree(credential);\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":3780056,"reputation":789,"user_id":3139811,"accept_rate":71,"display_name":"John"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4281,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1672344031,"creation_date":1607087851,"question_id":65144266,"body_markdown":"At the moment we store the passwords in a plain text file to sign into git and other services. We want to finaly get rid of it and use the windows credential manager. The only problem we are facing is that I don&#39;t seem to find a solution to do it java. \r\n\r\nI already looked at the following topics:\r\n\r\n* https://stackoverflow.com/questions/9221245/how-do-i-store-and-retrieve-credentials-from-the-windows-vault-credential-manage\r\n    \r\n* https://stackoverflow.com/questions/55233269/how-to-retrieve-username-and-password-from-windows-vault-using-java\r\n\r\nBut for me they don&#39;t give me clear answer which api to use. If you could help me on my way to access this credential manager that would be awesome. ","title":"Use the windows credential manager in Java to get credentials for authentication into git and other services","body":"<p>At the moment we store the passwords in a plain text file to sign into git and other services. We want to finaly get rid of it and use the windows credential manager. The only problem we are facing is that I don't seem to find a solution to do it java.</p>\n<p>I already looked at the following topics:</p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/9221245/how-do-i-store-and-retrieve-credentials-from-the-windows-vault-credential-manage\">How do I store and retrieve credentials from the Windows Vault credential manager?</a></p>\n</li>\n<li><p><a href=\"https://stackoverflow.com/questions/55233269/how-to-retrieve-username-and-password-from-windows-vault-using-java\">How to retrieve username and password from windows vault using java?</a></p>\n</li>\n</ul>\n<p>But for me they don't give me clear answer which api to use. If you could help me on my way to access this credential manager that would be awesome.</p>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"score":0,"creation_date":1672391792,"post_id":74954936,"comment_id":132280673,"body_markdown":"[Github isue](https://github.com/elastic/elasticsearch-java/issues/473) opened","body":"<a href=\"https://github.com/elastic/elasticsearch-java/issues/473\" rel=\"nofollow noreferrer\">Github isue</a> opened"}],"answers":[{"tags":[],"owner":{"account_id":24908380,"reputation":3091,"user_id":18778181,"display_name":"rabbitbr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672343861,"creation_date":1672343861,"answer_id":74955522,"question_id":74954936,"body_markdown":"Maybe this works for you:\r\n\r\n    SearchRequest sr = SearchRequest.of(r -&gt; r\r\n        .index(&quot;idx_name&quot;)\r\n        .source(s -&gt; s.fetch(false))\r\n        .size(10000));\r\n\r\n    System.out.println(&quot;Request: &quot; + sr);\r\n\r\n    try {\r\n      var response = this.esClient.search(sr, Void.class);\r\n      response.hits().hits().forEach(hit -&gt; {\r\n        System.out.println(&quot;ID: &quot; + hit.id());\r\n      });\r\n    } catch (ElasticsearchException | IOException e) {\r\n    }","title":"Elasticsearch Java 8.5: retrieve all Ids","body":"<p>Maybe this works for you:</p>\n<pre><code>SearchRequest sr = SearchRequest.of(r -&gt; r\n    .index(&quot;idx_name&quot;)\n    .source(s -&gt; s.fetch(false))\n    .size(10000));\n\nSystem.out.println(&quot;Request: &quot; + sr);\n\ntry {\n  var response = this.esClient.search(sr, Void.class);\n  response.hits().hits().forEach(hit -&gt; {\n    System.out.println(&quot;ID: &quot; + hit.id());\n  });\n} catch (ElasticsearchException | IOException e) {\n}\n</code></pre>\n"}],"owner":{"account_id":1317368,"reputation":28514,"user_id":1263942,"accept_rate":96,"display_name":"Bruno Grieder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":435,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672343861,"creation_date":1672339396,"question_id":74954936,"body_markdown":"I am trying to retrieve all  (elasticsearch) Ids of an index using the following code.\r\n\r\n```Java\r\n    SearchRequest sr = SearchRequest.of(r -&gt; r\r\n        .index(&quot;my_index&quot;)\r\n        .source(s -&gt; s.fetch(false))\r\n        .size(10000));\r\n\r\n    System.out.println(&quot;Request: &quot; + sr);\r\n\r\n    final SearchResponse&lt;MyDoc&gt; response;\r\n    try {\r\n        response = this.esClient.search(sr, MyDoc.class);\r\n    } catch (ElasticsearchException | IOException e) {\r\n        throw new MyException(&quot;fetch all ids: request failed: &quot; + e.getMessage(), e);\r\n    }\r\n\r\n    System.out.println(&quot;Response: &quot; + response);\r\n```\r\n\r\nThere are no results in the response. However, the printed request is \r\n\r\n```\r\nPOST /my_index/_search?typed_keys=true {&quot;_source&quot;:false,&quot;size&quot;:10000}\r\n```\r\n\r\nwhich works perfectly fine when run directly as a REST request.\r\n\r\n\r\nAny idea how to do it using the Java client?\r\n\r\nThe REST response is \r\n\r\n```json\r\n{\r\n  &quot;took&quot;: 1,\r\n  &quot;timed_out&quot;: false,\r\n  &quot;_shards&quot;: {\r\n    &quot;total&quot;: 1,\r\n    &quot;successful&quot;: 1,\r\n    &quot;skipped&quot;: 0,\r\n    &quot;failed&quot;: 0\r\n  },\r\n  &quot;hits&quot;: {\r\n    &quot;total&quot;: {\r\n      &quot;value&quot;: 999,\r\n      &quot;relation&quot;: &quot;eq&quot;\r\n    },\r\n    &quot;max_score&quot;: 1,\r\n    &quot;hits&quot;: [\r\n      {\r\n        &quot;_index&quot;: &quot;my_index&quot;,\r\n        &quot;_id&quot;: &quot;2LHJSP6dTjXuEM2vsEDyxdG4Y7HPzXL15tFvrkyZm8xn&quot;,\r\n        &quot;_score&quot;: 1\r\n      },\r\n      {\r\n        &quot;_index&quot;: &quot;my_index&quot;,\r\n        &quot;_id&quot;: &quot;A8RCf2mV4qeWvLxSfzKNX418E734uEifCenoCAiM3syB&quot;,\r\n        &quot;_score&quot;: 1\r\n      },\r\n      ...\r\n    ]\r\n  }\r\n}\r\n```","title":"Elasticsearch Java 8.5: retrieve all Ids","body":"<p>I am trying to retrieve all  (elasticsearch) Ids of an index using the following code.</p>\n<pre><code>    SearchRequest sr = SearchRequest.of(r -&gt; r\n        .index(&quot;my_index&quot;)\n        .source(s -&gt; s.fetch(false))\n        .size(10000));\n\n    System.out.println(&quot;Request: &quot; + sr);\n\n    final SearchResponse&lt;MyDoc&gt; response;\n    try {\n        response = this.esClient.search(sr, MyDoc.class);\n    } catch (ElasticsearchException | IOException e) {\n        throw new MyException(&quot;fetch all ids: request failed: &quot; + e.getMessage(), e);\n    }\n\n    System.out.println(&quot;Response: &quot; + response);\n</code></pre>\n<p>There are no results in the response. However, the printed request is</p>\n<pre><code>POST /my_index/_search?typed_keys=true {&quot;_source&quot;:false,&quot;size&quot;:10000}\n</code></pre>\n<p>which works perfectly fine when run directly as a REST request.</p>\n<p>Any idea how to do it using the Java client?</p>\n<p>The REST response is</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;took&quot;: 1,\n  &quot;timed_out&quot;: false,\n  &quot;_shards&quot;: {\n    &quot;total&quot;: 1,\n    &quot;successful&quot;: 1,\n    &quot;skipped&quot;: 0,\n    &quot;failed&quot;: 0\n  },\n  &quot;hits&quot;: {\n    &quot;total&quot;: {\n      &quot;value&quot;: 999,\n      &quot;relation&quot;: &quot;eq&quot;\n    },\n    &quot;max_score&quot;: 1,\n    &quot;hits&quot;: [\n      {\n        &quot;_index&quot;: &quot;my_index&quot;,\n        &quot;_id&quot;: &quot;2LHJSP6dTjXuEM2vsEDyxdG4Y7HPzXL15tFvrkyZm8xn&quot;,\n        &quot;_score&quot;: 1\n      },\n      {\n        &quot;_index&quot;: &quot;my_index&quot;,\n        &quot;_id&quot;: &quot;A8RCf2mV4qeWvLxSfzKNX418E734uEifCenoCAiM3syB&quot;,\n        &quot;_score&quot;: 1\n      },\n      ...\n    ]\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-batch"],"owner":{"account_id":12062415,"reputation":35,"user_id":8820931,"display_name":"Almir Fontenele"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672343538,"creation_date":1672343538,"question_id":74955479,"body_markdown":"I need to set timeout on itemReader when execute JdbcPagingItemReader.\r\n\r\n\r\n&gt; \t@Bean(value = READER_EXTRATO) \t@StepScope \tpublic\r\n&gt; JdbcPagingItemReader&lt;Extrato&gt; readerExtrato(final DataSource\r\n&gt; dataSource, PagingQueryProvider queryProvider) {\r\n&gt; \t\tlogMethodFromClass(&quot;readerExtrato()&quot;, this.getClass().getName());\t\r\n&gt; \t\t \t\treturn new JdbcPagingItemReaderBuilder&lt;Extrato&gt;()\r\n&gt; \t\t\t\t.name(EXTRATO)\r\n&gt; \t\t\t\t.dataSource(dataSource)\r\n&gt; \t\t\t\t.queryProvider(queryProvider)\r\n&gt; \t\t\t\t.rowMapper(new ExtratoRowMapper())\r\n&gt; \t\t\t\t.fetchSize(pageSize)\r\n&gt; \t\t\t\t.pageSize(pageSize)\r\n&gt; \t\t\t\t.build(); \t}\r\n\r\nHow I resolve this question , in JdbcPagingItemReaderBuilder not has setTimeout?","title":"JdbcPagingItemReader how set timeout","body":"<p>I need to set timeout on itemReader when execute JdbcPagingItemReader.</p>\n<blockquote>\n<p>@Bean(value = READER_EXTRATO)   @StepScope  public\nJdbcPagingItemReader readerExtrato(final DataSource\ndataSource, PagingQueryProvider queryProvider) {\nlogMethodFromClass(&quot;readerExtrato()&quot;, this.getClass().getName());<br />\nreturn new JdbcPagingItemReaderBuilder()\n.name(EXTRATO)\n.dataSource(dataSource)\n.queryProvider(queryProvider)\n.rowMapper(new ExtratoRowMapper())\n.fetchSize(pageSize)\n.pageSize(pageSize)\n.build();   }</p>\n</blockquote>\n<p>How I resolve this question , in JdbcPagingItemReaderBuilder not has setTimeout?</p>\n"},{"tags":["java","sql","mapping","mybatis"],"comments":[{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":1,"creation_date":1607520188,"post_id":65216327,"comment_id":115297586,"body_markdown":"Yes, of course it&#39;s possible. As you say &quot;every column is mapped to a property&quot;. However, that refers to a column of the result set, not a table. The result set column may already be an aggregated column.","body":"Yes, of course it&#39;s possible. As you say &quot;every column is mapped to a property&quot;. However, that refers to a column of the result set, not a table. The result set column may already be an aggregated column."},{"owner":{"account_id":18328293,"reputation":185,"user_id":13347446,"display_name":"Jithin M V"},"score":1,"creation_date":1607579339,"post_id":65216327,"comment_id":115318513,"body_markdown":"@TheImpaler Ok. Suppose if we have  column named email in our database table called instructor. Then I want to execute a SQL query as follows \n\n///SELECT email, COUNT(*) AS counts FROM instructor GROUP BY email;///\n\nSo in our ResultSet we will be having 2 columns, one called email and another counts. So now the question is how can we map these 2 columns. I don&#39;t have a count property in my Instructor Pojo Class.","body":"@TheImpaler Ok. Suppose if we have  column named email in our database table called instructor. Then I want to execute a SQL query as follows   ///SELECT email, COUNT(*) AS counts FROM instructor GROUP BY email;///  So in our ResultSet we will be having 2 columns, one called email and another counts. So now the question is how can we map these 2 columns. I don&#39;t have a count property in my Instructor Pojo Class."},{"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"score":0,"creation_date":1607642962,"post_id":65216327,"comment_id":115344726,"body_markdown":"If you don&#39;t want to create another POJO, you can always retrieve the result as a list of `java.util.Map&lt;String, Object&gt;`, that is a  `List&lt;Map&lt;String, Object&gt;&gt;`.","body":"If you don&#39;t want to create another POJO, you can always retrieve the result as a list of <code>java.util.Map&lt;String, Object&gt;</code>, that is a  <code>List&lt;Map&lt;String, Object&gt;&gt;</code>."},{"owner":{"account_id":18328293,"reputation":185,"user_id":13347446,"display_name":"Jithin M V"},"score":0,"creation_date":1607668242,"post_id":65216327,"comment_id":115349665,"body_markdown":"@TheImpaler Thank you for the response. I have tried it. But When I try to print the keys/values in the Map within List that is returned, I am getting a NullPointerException.","body":"@TheImpaler Thank you for the response. I have tried it. But When I try to print the keys/values in the Map within List that is returned, I am getting a NullPointerException."}],"answers":[{"tags":[],"owner":{"account_id":8591840,"reputation":46475,"user_id":6436191,"display_name":"The Impaler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607642879,"creation_date":1607520482,"answer_id":65217764,"question_id":65216327,"body_markdown":"Every column of the result set is mapped to a property. Therefore, it&#39;s just a matter of producing a SQL statement that does that.\r\n\r\nFor example:\r\n\r\n    &lt;resultMap id=&quot;regionProfit&quot; type=&quot;app.RegionProfitVO&quot;&gt;\r\n      &lt;result property=&quot;region&quot; column=&quot;region&quot; /&gt;\r\n      &lt;result property=&quot;cnt&quot; column=&quot;cnt&quot; /&gt;\r\n      &lt;result property=&quot;profit&quot; column=&quot;profit&quot; /&gt;\r\n    &lt;/resultMap&gt;\r\n    \r\n    &lt;select id=&quot;getRegionProfit&quot; resultMap=&quot;regionProfit&quot;&gt;\r\n      select\r\n        region,\r\n        count(sales) as cnt,\r\n        sum(revenue) - sum(expenses) as profit \r\n      from sales\r\n      group by region\r\n    &lt;/select&gt;\r\n\r\nNow, in the Java code you could do something like:\r\n\r\n    List&lt;RegionProfitVO&gt; rp = sqlSession.selectList(&quot;getRegionProfit&quot;);\r\n","title":"Is it possible to use Aggregate functions in MyBatis","body":"<p>Every column of the result set is mapped to a property. Therefore, it's just a matter of producing a SQL statement that does that.</p>\n<p>For example:</p>\n<pre><code>&lt;resultMap id=&quot;regionProfit&quot; type=&quot;app.RegionProfitVO&quot;&gt;\n  &lt;result property=&quot;region&quot; column=&quot;region&quot; /&gt;\n  &lt;result property=&quot;cnt&quot; column=&quot;cnt&quot; /&gt;\n  &lt;result property=&quot;profit&quot; column=&quot;profit&quot; /&gt;\n&lt;/resultMap&gt;\n\n&lt;select id=&quot;getRegionProfit&quot; resultMap=&quot;regionProfit&quot;&gt;\n  select\n    region,\n    count(sales) as cnt,\n    sum(revenue) - sum(expenses) as profit \n  from sales\n  group by region\n&lt;/select&gt;\n</code></pre>\n<p>Now, in the Java code you could do something like:</p>\n<pre><code>List&lt;RegionProfitVO&gt; rp = sqlSession.selectList(&quot;getRegionProfit&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6021625,"reputation":1293,"user_id":4728509,"accept_rate":67,"display_name":"Avinash Jadhav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672343388,"creation_date":1672343388,"answer_id":74955458,"question_id":65216327,"body_markdown":"If you don&#39;t want to create another POJO, you can always retrieve the result as a list of java.util.Map&lt;String, Object&gt; but use **resultType=&quot;hashmap&quot;** in mapper.xml file for that select query","title":"Is it possible to use Aggregate functions in MyBatis","body":"<p>If you don't want to create another POJO, you can always retrieve the result as a list of java.util.Map&lt;String, Object&gt; but use <strong>resultType=&quot;hashmap&quot;</strong> in mapper.xml file for that select query</p>\n"}],"owner":{"account_id":18328293,"reputation":185,"user_id":13347446,"display_name":"Jithin M V"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":906,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672343388,"creation_date":1607515068,"question_id":65216327,"body_markdown":"I am a newbie to MyBatis. As per my knowledge every column is mapped to a property value while retrieving data from the database. So is it possible to use aggregate functions using MyBatis. To what property we will map the results? I have searched it everywhere But can&#39;t find any details about the usage of aggregate functions with MyBatis. If anyone can help, please.","title":"Is it possible to use Aggregate functions in MyBatis","body":"<p>I am a newbie to MyBatis. As per my knowledge every column is mapped to a property value while retrieving data from the database. So is it possible to use aggregate functions using MyBatis. To what property we will map the results? I have searched it everywhere But can't find any details about the usage of aggregate functions with MyBatis. If anyone can help, please.</p>\n"},{"tags":["java","spring","spring-boot","asynchronous","tomcat"],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672316424,"creation_date":1672316424,"answer_id":74951044,"question_id":74950735,"body_markdown":"You could try omitting the `WebAsyncTask` and diretly return the `Callable` from the controller method like this:\r\n```java\r\n    public Callable&lt;ResponseEntity&lt;String&gt;&gt; test(@RequestParam(value = &quot;foo&quot;, required = false) String data) {\r\n        return () -&gt; {\r\n            HttpHeaders responseHeaders = new HttpHeaders();\r\n            responseHeaders.setContentType(MediaType.TEXT_PLAIN);\r\n            return new ResponseEntity(&quot;testping&quot;, responseHeaders, HttpStatus.OK);\r\n        };\r\n    }\r\n```\r\n\r\nTo configure your async task executor, you can create a global config bean like this:\r\n```java\r\n@Configuration\r\npublic class WebMvcConfiguration implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void configureAsyncSupport(AsyncSupportConfigurer configurer) {\r\n        final ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(1);\r\n        executor.setMaxPoolSize(10);\r\n        executor.setThreadNamePrefix(&quot;mvc-task-executor-&quot;);\r\n        executor.initialize();\r\n        configurer.setTaskExecutor(executor);\r\n    }\r\n\r\n}\r\n```\r\n\r\nSide note: you can boost your chances of good answers if you format your code properly for SO.\r\n","title":"Spring-boot asynchronous Request - Response body is empty","body":"<p>You could try omitting the <code>WebAsyncTask</code> and diretly return the <code>Callable</code> from the controller method like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public Callable&lt;ResponseEntity&lt;String&gt;&gt; test(@RequestParam(value = &quot;foo&quot;, required = false) String data) {\n        return () -&gt; {\n            HttpHeaders responseHeaders = new HttpHeaders();\n            responseHeaders.setContentType(MediaType.TEXT_PLAIN);\n            return new ResponseEntity(&quot;testping&quot;, responseHeaders, HttpStatus.OK);\n        };\n    }\n</code></pre>\n<p>To configure your async task executor, you can create a global config bean like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class WebMvcConfiguration implements WebMvcConfigurer {\n\n    @Override\n    public void configureAsyncSupport(AsyncSupportConfigurer configurer) {\n        final ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(1);\n        executor.setMaxPoolSize(10);\n        executor.setThreadNamePrefix(&quot;mvc-task-executor-&quot;);\n        executor.initialize();\n        configurer.setTaskExecutor(executor);\n    }\n\n}\n</code></pre>\n<p>Side note: you can boost your chances of good answers if you format your code properly for SO.</p>\n"}],"owner":{"account_id":1397443,"reputation":106,"user_id":1326947,"accept_rate":0,"display_name":"Kathy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":364,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672343128,"creation_date":1672314461,"question_id":74950735,"body_markdown":"We have a Rest Controller that returns a WebAsyncTask. The code is as follows:\r\n \r\n```java\r\n@RequestMapping(value=&quot;/test&quot;, produces=&quot;text/plain&quot;, method=RequestMethod.POST)\r\n@ResponseBody\r\npublic WebAsyncTask&lt;ResponseEntity&lt;String&gt;&gt; test(@RequestParam(value=&quot;foo&quot;, required=false) String data) throws IOException {\r\n  Callable&lt;ResponseEntity&lt;String&gt;&gt; callable=() -&gt; {\r\n    HttpHeadersresponseHeaders = newHttpHeaders();\r\n    responseHeaders.setContentType(MediaType.TEXT_PLAIN);\r\n    return new ResponseEntity(&quot;testping&quot;,responseHeaders,HttpStatus.OK);\r\n  };\r\n \r\n  WebAsyncTask&lt;ResponseEntity&lt;String&gt;&gt; webAsyncTask = new WebAsyncTask&lt;&gt;(getTimeOut(), getAsyncTaskExecutor(), callable);\r\n  return webAsyncTask;\r\n}\r\n```\r\nAsyncTaskExecutor is defined as follows:\r\n```xml\r\n&lt;bean id=&quot;asyncTaskExecutor&quot; class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;&gt;\r\n  &lt;propertyname=&quot;corePoolSize&quot; value=&quot;50&quot;/&gt;\r\n  &lt;propertyname=&quot;maxPoolSize&quot; value=&quot;50&quot;/&gt;\r\n  &lt;propertyname=&quot;queueCapacity&quot; value=&quot;5000&quot;/&gt;\r\n&lt;/bean&gt;\r\n ```\r\nThis is my Boot Application:\r\n\r\n```java\r\n@SpringBootApplication(exclude={JacksonAutoConfiguration.class,\r\nCodecsAutoConfiguration.class,HttpMessageConvertersAutoConfiguration.class,\r\nHibernateJpaAutoConfiguration.class,WebMvcAutoConfiguration.class})\r\n@ImportResource(locations={&quot;classpath:META-INF/spring/test-boot-applicationContext.xml&quot;})\r\n@EnableWebSecurity\r\n@EnableAsync\r\npublic class TestBootApplication extends SpringBootServletInitializer {\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(TestBootApplication.class, args);\r\n  }\r\n \r\n  @Configuration\r\n  public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n    @Override\r\n    protected void configure(HttpSecurityhttpSecurity) throws Exception {\r\n    httpSecurity\r\n      .authorizeRequests().antMatchers(&quot;/**&quot;).permitAll()\r\n      .and().csrf().disable();\r\n    }\r\n  }\r\n \r\n  @Bean\r\n  public ServletRegistrationBean dispatcherController() {\r\n    DispatcherServlet dispatcherServlet = new DispatcherServlet();\r\n    dispatcherServlet.setNamespace(&quot;tempspace&quot;);\r\n    XmlWebApplicationContext applicationContext = new XmlWebApplicationContext();\r\n    applicationContext.setConfigLocations(&quot;classpath:META-INF/spring/test-dispatcher-servlet.xml&quot;);\r\n    dispatcherServlet.setApplicationContext(applicationContext);\r\n    ServletRegistrationBean servletRegistrationBean = new ServletRegistrationBean(dispatcherServlet,&quot;/temp/*&quot;);\r\n    servletRegistrationBean.setName(&quot;testdispatcher&quot;);\r\n    servletRegistrationBean.setLoadOnStartup(20);\r\n    return servletRegistrationBean;\r\n  }\r\n \r\n  @Bean\r\n  public ObjectMapper defaultObjectMapper() {\r\n    return new ObjectMapper();\r\n  }\r\n}\r\n```\r\nI am using Postman to send the POST request and I get a 200 OK response, which is just an acknowledgement and not the actual response:\r\n ```\r\nKEY.                                                  VALUE\r\nX-Frame-Options                                       DENY\r\nContent-Security-Policy                               frame-ancestors &#39;none&#39;\r\nX-Content-Type-Options                                nosniff\r\nX-XSS-Protection                                      1; mode=block\r\nContent-Length                                        0\r\nDate                                                  Thu, 29 Dec 2022 09:33:38 GMT\r\nKeep-Alive                                            timeout=60\r\nConnection                                            keep-alive\r\n ```\r\nSo, after a little investigation, I understood that I had to add DispatcherType ASYNC to my filter. This is my Filter:\r\n```java\r\n@Component\r\npublic class AsyncFilter implements Filter {\r\n  private static final Logger LOG = LoggerFactory.getLogger(AsyncFilter.class);\r\n \r\n  @Override\r\n  public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n    ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper((HttpServletRequest) request);\r\n    ContentCachingResponseWrapper responseWrapper = newContentCachingResponseWrapper((HttpServletResponse) response);\r\n    try {\r\n      filterChain.doFilter(requestWrapper,responseWrapper);\r\n    } finally {\r\n      LOG.trace(&quot;Before - ResponseWrapper: {}&quot;, \r\n      getResponsePayload(responseWrapper));\r\n      LOG.trace(&quot;Before - Response: {}&quot;, \r\n      getResponsePayload((HttpServletResponse) response));\r\n \r\n      byte[] responseArray = responseWrapper.getContentAsByteArray();\r\n      String responseString = new String(responseArray, \r\n      responseWrapper.getCharacterEncoding());\r\n      LOG.trace(&quot;####### responseString = {}&quot;, responseString);\r\n \r\n      responseWrapper.copyBodyToResponse();\r\n \r\n      LOG.trace(&quot;After - ResponseWrapper: {}&quot;, \r\n      getResponsePayload(responseWrapper));\r\n      LOG.trace(&quot;After - Response: {}&quot;, \r\n      getResponsePayload((HttpServletResponse) response));\r\n    }\r\n  }\r\n ```\r\nThis is how I am registering the Filter in the TestBootApplication:\r\n ```\r\n@Bean\r\npublic FilterRegistrationBean&lt;AsyncFilter&gt; asyncFilter() {\r\n  FilterRegistrationBean&lt;AsyncFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\r\n  registrationBean.setFilter(new AsyncFilter());\r\nregistrationBean.setDispatcherTypes(EnumSet.of(DispatcherType.REQUEST, DispatcherType.ASYNC));\r\n  registrationBean.addUrlPatterns(&quot;/*&quot;);\r\n  return registrationBean;\r\n}\r\n ```\r\nNow I get the actual response but I get an empty body. Also, the content-length is 0.\r\n ```\r\nKEY.                                                  VALUE\r\nX-Frame-Options                                       DENY\r\nContent-Security-Policy                               frame-ancestors &#39;none&#39;\r\nX-Content-Type-Options                                nosniff\r\nX-XSS-Protection                                      1; mode=block\r\nContent-Type                                          text/plain\r\nContent-Length                                        0\r\nDate                                                  Thu, 29 Dec 2022 09:33:38 GMT\r\nKeep-Alive                                            timeout=60\r\nConnection                                            keep-alive\r\n ```\r\nHere is an excerpt from the logs:\r\n ```\r\n16:57:11.099 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - Before - Response Wrapper: testping\r\n16:57:11.100 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - Before - Response: [unknown]\r\n16:57:11.100 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - ####### Response = testping\r\n16:57:11.100 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - After - Response Wrapper: [unknown]\r\n16:57:11.100 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - After - Response: [unknown]\r\n ```\r\nI think the response is being dispatched before the controller finishes processing. I have invested a lot of time on this and haven&#39;t been able to find out the cause. What am I missing here? I am using spring-boot version 2.6.12\r\n","title":"Spring-boot asynchronous Request - Response body is empty","body":"<p>We have a Rest Controller that returns a WebAsyncTask. The code is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(value=&quot;/test&quot;, produces=&quot;text/plain&quot;, method=RequestMethod.POST)\n@ResponseBody\npublic WebAsyncTask&lt;ResponseEntity&lt;String&gt;&gt; test(@RequestParam(value=&quot;foo&quot;, required=false) String data) throws IOException {\n  Callable&lt;ResponseEntity&lt;String&gt;&gt; callable=() -&gt; {\n    HttpHeadersresponseHeaders = newHttpHeaders();\n    responseHeaders.setContentType(MediaType.TEXT_PLAIN);\n    return new ResponseEntity(&quot;testping&quot;,responseHeaders,HttpStatus.OK);\n  };\n \n  WebAsyncTask&lt;ResponseEntity&lt;String&gt;&gt; webAsyncTask = new WebAsyncTask&lt;&gt;(getTimeOut(), getAsyncTaskExecutor(), callable);\n  return webAsyncTask;\n}\n</code></pre>\n<p>AsyncTaskExecutor is defined as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bean id=&quot;asyncTaskExecutor&quot; class=&quot;org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor&quot;&gt;\n  &lt;propertyname=&quot;corePoolSize&quot; value=&quot;50&quot;/&gt;\n  &lt;propertyname=&quot;maxPoolSize&quot; value=&quot;50&quot;/&gt;\n  &lt;propertyname=&quot;queueCapacity&quot; value=&quot;5000&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>This is my Boot Application:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication(exclude={JacksonAutoConfiguration.class,\nCodecsAutoConfiguration.class,HttpMessageConvertersAutoConfiguration.class,\nHibernateJpaAutoConfiguration.class,WebMvcAutoConfiguration.class})\n@ImportResource(locations={&quot;classpath:META-INF/spring/test-boot-applicationContext.xml&quot;})\n@EnableWebSecurity\n@EnableAsync\npublic class TestBootApplication extends SpringBootServletInitializer {\n  public static void main(String[] args) {\n    SpringApplication.run(TestBootApplication.class, args);\n  }\n \n  @Configuration\n  public class SecurityConfiguration extends WebSecurityConfigurerAdapter {\n    @Override\n    protected void configure(HttpSecurityhttpSecurity) throws Exception {\n    httpSecurity\n      .authorizeRequests().antMatchers(&quot;/**&quot;).permitAll()\n      .and().csrf().disable();\n    }\n  }\n \n  @Bean\n  public ServletRegistrationBean dispatcherController() {\n    DispatcherServlet dispatcherServlet = new DispatcherServlet();\n    dispatcherServlet.setNamespace(&quot;tempspace&quot;);\n    XmlWebApplicationContext applicationContext = new XmlWebApplicationContext();\n    applicationContext.setConfigLocations(&quot;classpath:META-INF/spring/test-dispatcher-servlet.xml&quot;);\n    dispatcherServlet.setApplicationContext(applicationContext);\n    ServletRegistrationBean servletRegistrationBean = new ServletRegistrationBean(dispatcherServlet,&quot;/temp/*&quot;);\n    servletRegistrationBean.setName(&quot;testdispatcher&quot;);\n    servletRegistrationBean.setLoadOnStartup(20);\n    return servletRegistrationBean;\n  }\n \n  @Bean\n  public ObjectMapper defaultObjectMapper() {\n    return new ObjectMapper();\n  }\n}\n</code></pre>\n<p>I am using Postman to send the POST request and I get a 200 OK response, which is just an acknowledgement and not the actual response:</p>\n<pre><code>KEY.                                                  VALUE\nX-Frame-Options                                       DENY\nContent-Security-Policy                               frame-ancestors 'none'\nX-Content-Type-Options                                nosniff\nX-XSS-Protection                                      1; mode=block\nContent-Length                                        0\nDate                                                  Thu, 29 Dec 2022 09:33:38 GMT\nKeep-Alive                                            timeout=60\nConnection                                            keep-alive\n</code></pre>\n<p>So, after a little investigation, I understood that I had to add DispatcherType ASYNC to my filter. This is my Filter:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class AsyncFilter implements Filter {\n  private static final Logger LOG = LoggerFactory.getLogger(AsyncFilter.class);\n \n  @Override\n  public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n    ContentCachingRequestWrapper requestWrapper = new ContentCachingRequestWrapper((HttpServletRequest) request);\n    ContentCachingResponseWrapper responseWrapper = newContentCachingResponseWrapper((HttpServletResponse) response);\n    try {\n      filterChain.doFilter(requestWrapper,responseWrapper);\n    } finally {\n      LOG.trace(&quot;Before - ResponseWrapper: {}&quot;, \n      getResponsePayload(responseWrapper));\n      LOG.trace(&quot;Before - Response: {}&quot;, \n      getResponsePayload((HttpServletResponse) response));\n \n      byte[] responseArray = responseWrapper.getContentAsByteArray();\n      String responseString = new String(responseArray, \n      responseWrapper.getCharacterEncoding());\n      LOG.trace(&quot;####### responseString = {}&quot;, responseString);\n \n      responseWrapper.copyBodyToResponse();\n \n      LOG.trace(&quot;After - ResponseWrapper: {}&quot;, \n      getResponsePayload(responseWrapper));\n      LOG.trace(&quot;After - Response: {}&quot;, \n      getResponsePayload((HttpServletResponse) response));\n    }\n  }\n</code></pre>\n<p>This is how I am registering the Filter in the TestBootApplication:</p>\n<pre><code>@Bean\npublic FilterRegistrationBean&lt;AsyncFilter&gt; asyncFilter() {\n FilterRegistrationBean&lt;AsyncFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;();\n registrationBean.setFilter(new AsyncFilter());\nregistrationBean.setDispatcherTypes(EnumSet.of(DispatcherType.REQUEST, DispatcherType.ASYNC));\n registrationBean.addUrlPatterns(&quot;/*&quot;);\n return registrationBean;\n}\n</code></pre>\n<p>Now I get the actual response but I get an empty body. Also, the content-length is 0.</p>\n<pre><code>KEY.                                                  VALUE\nX-Frame-Options                                       DENY\nContent-Security-Policy                               frame-ancestors 'none'\nX-Content-Type-Options                                nosniff\nX-XSS-Protection                                      1; mode=block\nContent-Type                                          text/plain\nContent-Length                                        0\nDate                                                  Thu, 29 Dec 2022 09:33:38 GMT\nKeep-Alive                                            timeout=60\nConnection                                            keep-alive\n</code></pre>\n<p>Here is an excerpt from the logs:</p>\n<pre><code>16:57:11.099 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - Before - Response Wrapper: testping\n16:57:11.100 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - Before - Response: [unknown]\n16:57:11.100 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - ####### Response = testping\n16:57:11.100 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - After - Response Wrapper: [unknown]\n16:57:11.100 [http-nio-8081-exec-5] TRACE c.b.a.filters.AsyncFilter - After - Response: [unknown]\n</code></pre>\n<p>I think the response is being dispatched before the controller finishes processing. I have invested a lot of time on this and haven't been able to find out the cause. What am I missing here? I am using spring-boot version 2.6.12</p>\n"},{"tags":["java","logging"],"answers":[{"tags":[],"owner":{"account_id":3415144,"reputation":23576,"user_id":2864275,"display_name":"Iłya Bursov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672342980,"creation_date":1672342980,"answer_id":74955409,"question_id":74955340,"body_markdown":"I&#39;d split logic into two methods:\r\n\r\n    private void doSomething(Object a, Object b){\r\n        final var myLocalVar = deriveValFrom(a);\r\n        if (myLocalVar != null)\r\n            return myLocalVar;\r\n        return deriveValFrom(b);\r\n    }\r\n    \r\n    private void doSomethingAndLog(Object a, Object b){\r\n        final var myLocalVar = doSomething(a, b);\r\n        LOG.debug(() -&gt; String.format(&quot;settled on value %s&quot;, myLocalVar));\r\n    }","title":"How do I log non-final variables using a lazily evaluated expression?","body":"<p>I'd split logic into two methods:</p>\n<pre><code>private void doSomething(Object a, Object b){\n    final var myLocalVar = deriveValFrom(a);\n    if (myLocalVar != null)\n        return myLocalVar;\n    return deriveValFrom(b);\n}\n\nprivate void doSomethingAndLog(Object a, Object b){\n    final var myLocalVar = doSomething(a, b);\n    LOG.debug(() -&gt; String.format(&quot;settled on value %s&quot;, myLocalVar));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672343098,"creation_date":1672343098,"answer_id":74955428,"question_id":74955340,"body_markdown":"It depends a bit on what part of the exection you want to be lazy.\r\nA final constant would normally use an assignless expression. Optional is very suitable for that.\r\n\r\nBut you can do all in the log call.\r\n\r\n    private void  doSomething(Object a, Object b) {\r\n       final var myLocalVar = Optional.ofNullable(deriveValFrom(a))\r\n                                      .orElseGet(() -&gt; deriveValFrom(b)));\r\n       LOG.debug(() -&gt; &quot;settled on value %s&quot;.formatted(\r\n           Optional.ofNullable(deriveValFrom(a))\r\n                   .orElseGet(() -&gt; deriveValFrom(b)));\r\n    }","title":"How do I log non-final variables using a lazily evaluated expression?","body":"<p>It depends a bit on what part of the exection you want to be lazy.\nA final constant would normally use an assignless expression. Optional is very suitable for that.</p>\n<p>But you can do all in the log call.</p>\n<pre><code>private void  doSomething(Object a, Object b) {\n   final var myLocalVar = Optional.ofNullable(deriveValFrom(a))\n                                  .orElseGet(() -&gt; deriveValFrom(b)));\n   LOG.debug(() -&gt; &quot;settled on value %s&quot;.formatted(\n       Optional.ofNullable(deriveValFrom(a))\n               .orElseGet(() -&gt; deriveValFrom(b)));\n}\n</code></pre>\n"}],"owner":{"account_id":27127357,"reputation":73,"user_id":20670147,"display_name":"leuchtstoffratte"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74955409,"answer_count":2,"score":0,"last_activity_date":1672343098,"creation_date":1672342432,"question_id":74955340,"body_markdown":"I would like to create a log message which contains the values of at least one local variable. To benefit form lazy evaluation I would like to pass a `Supplier&lt;String&gt;` to the logging frame work.\r\n\r\n\r\n```\r\nprivate void  doSomething(Object a, Object b){\r\n   var myLocalVar = deriveValFrom(a);\r\n   if (null == myLocalVar){\r\n       myLocalVar = deriveValFrom(b);\r\n   }\r\n   LOG.debug(() -&gt; String.format(&quot;settled on value %s&quot;, myLocalVar));\r\n}\r\n```\r\nThe code above does not compile, since `myLocalVar` is neither final nor effectively final.\r\n\r\n&lt;b&gt;current ideas&lt;/b&gt;\r\nAs the answers to [this question](https://stackoverflow.com/questions/36307541/how-to-use-non-final-variable-in-java-8-lambdas) show, I might define a temp variable and thus bloat the code.\r\n\r\nOtherwise I could implement a private method like \r\n\r\n```\r\nprivate void logToDebug(String formatStr, Object p0, Objects... objs){\r\n   LOG.debug(()-&gt;String.format(formatStr, p0, objs));\r\n}\r\n```\r\nWhich makes the compiler stop complaining but adds &#39;off-topic&#39; code to the class.\r\n\r\n&lt;b&gt;actual Q&lt;/b&gt;\r\nIs there a better way to achieve lazy evaluation and concise code?\r\n\r\n\r\n&lt;b&gt;relevant info&lt;/b&gt;\r\nWhile logging is done under the hood by log4j I have to work through a custom facade which I may extend (for instance with the `debug(String formatStr, p0, ...)`-Methods) but I would like to keep the extension to a minimum.","title":"How do I log non-final variables using a lazily evaluated expression?","body":"<p>I would like to create a log message which contains the values of at least one local variable. To benefit form lazy evaluation I would like to pass a <code>Supplier&lt;String&gt;</code> to the logging frame work.</p>\n<pre><code>private void  doSomething(Object a, Object b){\n   var myLocalVar = deriveValFrom(a);\n   if (null == myLocalVar){\n       myLocalVar = deriveValFrom(b);\n   }\n   LOG.debug(() -&gt; String.format(&quot;settled on value %s&quot;, myLocalVar));\n}\n</code></pre>\n<p>The code above does not compile, since <code>myLocalVar</code> is neither final nor effectively final.</p>\n<p><b>current ideas</b>\nAs the answers to <a href=\"https://stackoverflow.com/questions/36307541/how-to-use-non-final-variable-in-java-8-lambdas\">this question</a> show, I might define a temp variable and thus bloat the code.</p>\n<p>Otherwise I could implement a private method like</p>\n<pre><code>private void logToDebug(String formatStr, Object p0, Objects... objs){\n   LOG.debug(()-&gt;String.format(formatStr, p0, objs));\n}\n</code></pre>\n<p>Which makes the compiler stop complaining but adds 'off-topic' code to the class.</p>\n<p><b>actual Q</b>\nIs there a better way to achieve lazy evaluation and concise code?</p>\n<p><b>relevant info</b>\nWhile logging is done under the hood by log4j I have to work through a custom facade which I may extend (for instance with the <code>debug(String formatStr, p0, ...)</code>-Methods) but I would like to keep the extension to a minimum.</p>\n"},{"tags":["java","swing","jframe"],"comments":[{"owner":{"account_id":8385,"reputation":4789,"user_id":15075,"accept_rate":90,"display_name":"Richard Walton"},"score":2,"creation_date":1291112137,"post_id":4305837,"comment_id":4683456,"body_markdown":"Try http://stackoverflow.com/questions/489255/using-swing-how-can-i-flash-the-windows-taskbar","body":"Try <a href=\"http://stackoverflow.com/questions/489255/using-swing-how-can-i-flash-the-windows-taskbar\" title=\"using swing how can i flash the windows taskbar\">stackoverflow.com/questions/489255/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1291049684,"creation_date":1291049684,"answer_id":4305995,"question_id":4305837,"body_markdown":"The following code worked for me exactly as you described: \r\n\r\n\t\tf.setState(JFrame.ICONIFIED);\r\n\t\tf.toFront();\r\n\r\nf is a JFrame.","title":"Flashing JFrame","body":"<p>The following code worked for me exactly as you described: </p>\n\n<pre><code>    f.setState(JFrame.ICONIFIED);\n    f.toFront();\n</code></pre>\n\n<p>f is a JFrame.</p>\n"},{"tags":[],"owner":{"account_id":254774,"reputation":6357,"user_id":534406,"accept_rate":100,"display_name":"BoffinBrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1291901289,"creation_date":1291901289,"answer_id":4398689,"question_id":4305837,"body_markdown":"Unfortunately, this isn&#39;t something that you can do natively under any Java platform.  Anyone who manages to get it working by using the kind of &#39;trickery&#39; that you&#39;ve shown, will be disappointed to find that it is unlikely to work on another version of Windows, or even another computer with the same version of Windows.  The only times I&#39;ve ever seen a Java window flash is due to some glitch in Swing when minimizing all windows to the taskbar.\r\n\r\nAs [this article on making Java applications feel native][1] shows, it&#39;s the same on Mac OS.\r\n\r\nYour best bet is to use the techniques described in the above article to make a JNI which does the Windows API call, or get a license for &lt;b&gt;JNIWrapper&lt;/b&gt; (search for it) which does it all for you (best option if you are making a commercial app, or making it for a client who is willing to pay for such a feature).  It looks like you can get a 30-day trial for that.\r\n\r\nThe only other thing I could suggest is create a poor-man&#39;s equivalent of a pop-up notification system.  When you want to alert the user, create a Frame without a border, put it in the bottom-right corner of the screen, make it non-focusable and show it for a brief period of time.\r\n\r\n\r\n  [1]: http://today.java.net/pub/a/today/2003/12/08/swing.html","title":"Flashing JFrame","body":"<p>Unfortunately, this isn't something that you can do natively under any Java platform.  Anyone who manages to get it working by using the kind of 'trickery' that you've shown, will be disappointed to find that it is unlikely to work on another version of Windows, or even another computer with the same version of Windows.  The only times I've ever seen a Java window flash is due to some glitch in Swing when minimizing all windows to the taskbar.</p>\n\n<p>As <a href=\"http://today.java.net/pub/a/today/2003/12/08/swing.html\" rel=\"nofollow\">this article on making Java applications feel native</a> shows, it's the same on Mac OS.</p>\n\n<p>Your best bet is to use the techniques described in the above article to make a JNI which does the Windows API call, or get a license for <b>JNIWrapper</b> (search for it) which does it all for you (best option if you are making a commercial app, or making it for a client who is willing to pay for such a feature).  It looks like you can get a 30-day trial for that.</p>\n\n<p>The only other thing I could suggest is create a poor-man's equivalent of a pop-up notification system.  When you want to alert the user, create a Frame without a border, put it in the bottom-right corner of the screen, make it non-focusable and show it for a brief period of time.</p>\n"},{"tags":[],"owner":{"account_id":27375080,"reputation":11,"user_id":20880556,"display_name":"Grzegorz Boroń"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672342765,"creation_date":1672342765,"answer_id":74955376,"question_id":4305837,"body_markdown":"The JPanel does not flash. Try it instead of JFrame.","title":"Flashing JFrame","body":"<p>The JPanel does not flash. Try it instead of JFrame.</p>\n"}],"owner":{"account_id":677476,"reputation":41,"user_id":524127,"display_name":"Ted"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3106,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1672342765,"creation_date":1291048628,"question_id":4305837,"body_markdown":"I would like to create a JFrame with two specifal features:\r\n\r\n1. JFrame should not grab focus while maximized from minimized state.\r\n2. When a JFrame created or became maximized from minimized state, it should flash in the Windows bar until a user will grant a focus to it. (like as in ICQ clients ![alt text][1]).\r\n\r\nDoes anybody know how the second requirement can be implemented?\r\n\r\nLittle self-explained example:\r\n\r\n    import javax.swing.*;\r\n    import java.awt.event.*;\r\n    import java.awt.*;\r\n\r\n    public class JFrameTest {\r\n        private static JFrame childFrame;\r\n        public static Container getParentContentPane() {\r\n            JPanel panel = new JPanel();\r\n            JButton button = new JButton(&quot;Create\\\\Restore child frame&quot;);\r\n            button.addActionListener(new ActionListener(){\r\n                public void actionPerformed(ActionEvent e) {\r\n                    createOrRestoreChildFrame();\r\n                }\r\n            });\r\n            panel.add(button);\r\n            return panel;\r\n        }\r\n\r\n        private static void createOrRestoreChildFrame() {\r\n            if (childFrame == null) {\r\n                childFrame = new JFrame(&quot;Child Frame&quot;);\r\n                childFrame.setLocation(200, 200);\r\n                childFrame.add(new JLabel(&quot;Child Frame&quot;));\r\n                childFrame.pack();\r\n                setChildFrameVisible();\r\n            } else {\r\n                setChildFrameVisible();\r\n            }\r\n        }\r\n\r\n        private static void setChildFrameVisible() {\r\n            childFrame.setFocusableWindowState(false);\r\n            childFrame.setVisible(true);\r\n            flashInWindowsBar(childFrame);\r\n            childFrame.toFront();\r\n            childFrame.setFocusableWindowState(true);\r\n        }\r\n\r\n        /**\r\n         * Should Make child frame flash in Windows bar.\r\n         * Currently, it does not work for me.\r\n         * Could anybody help me to fix this please? ) \r\n         */\r\n        private static void flashInWindowsBar(JFrame childFrame) {\r\n            childFrame.setState(JFrame.ICONIFIED);\r\n            childFrame.toFront();\r\n        }\r\n\r\n        private static void createAndShowGUI() {\r\n            JFrame parentFrame = new JFrame(&quot;JFrame Demo&quot;);\r\n            parentFrame.setLocation(100, 100);\r\n            parentFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            parentFrame.setContentPane(getParentContentPane());\r\n            parentFrame.pack();\r\n            parentFrame.setVisible(true);\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            javax.swing.SwingUtilities.invokeLater(new Runnable() {\r\n                public void run() {\r\n                    createAndShowGUI();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\nThanks!\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/dKwJV.jpg","title":"Flashing JFrame","body":"<p>I would like to create a JFrame with two specifal features:</p>\n\n<ol>\n<li>JFrame should not grab focus while maximized from minimized state.</li>\n<li>When a JFrame created or became maximized from minimized state, it should flash in the Windows bar until a user will grant a focus to it. (like as in ICQ clients <img src=\"https://i.stack.imgur.com/dKwJV.jpg\" alt=\"alt text\">).</li>\n</ol>\n\n<p>Does anybody know how the second requirement can be implemented?</p>\n\n<p>Little self-explained example:</p>\n\n<pre><code>import javax.swing.*;\nimport java.awt.event.*;\nimport java.awt.*;\n\npublic class JFrameTest {\n    private static JFrame childFrame;\n    public static Container getParentContentPane() {\n        JPanel panel = new JPanel();\n        JButton button = new JButton(\"Create\\\\Restore child frame\");\n        button.addActionListener(new ActionListener(){\n            public void actionPerformed(ActionEvent e) {\n                createOrRestoreChildFrame();\n            }\n        });\n        panel.add(button);\n        return panel;\n    }\n\n    private static void createOrRestoreChildFrame() {\n        if (childFrame == null) {\n            childFrame = new JFrame(\"Child Frame\");\n            childFrame.setLocation(200, 200);\n            childFrame.add(new JLabel(\"Child Frame\"));\n            childFrame.pack();\n            setChildFrameVisible();\n        } else {\n            setChildFrameVisible();\n        }\n    }\n\n    private static void setChildFrameVisible() {\n        childFrame.setFocusableWindowState(false);\n        childFrame.setVisible(true);\n        flashInWindowsBar(childFrame);\n        childFrame.toFront();\n        childFrame.setFocusableWindowState(true);\n    }\n\n    /**\n     * Should Make child frame flash in Windows bar.\n     * Currently, it does not work for me.\n     * Could anybody help me to fix this please? ) \n     */\n    private static void flashInWindowsBar(JFrame childFrame) {\n        childFrame.setState(JFrame.ICONIFIED);\n        childFrame.toFront();\n    }\n\n    private static void createAndShowGUI() {\n        JFrame parentFrame = new JFrame(\"JFrame Demo\");\n        parentFrame.setLocation(100, 100);\n        parentFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        parentFrame.setContentPane(getParentContentPane());\n        parentFrame.pack();\n        parentFrame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        javax.swing.SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                createAndShowGUI();\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>Thanks!</p>\n"},{"tags":["java","spring","postgresql","spring-data-jpa","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":4487116,"reputation":429,"user_id":3649352,"accept_rate":67,"display_name":"Kunal Varpe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672341921,"creation_date":1672341921,"answer_id":74955282,"question_id":74952638,"body_markdown":"The `spring.batch.jdbc.initialize-schema=always` property tells Spring Batch Auto configuration to create the schema everytime the application restarts. This property also silently sets `continueOnError= true` in the auto-configuration, so even if the error comes it will not fail the application. \r\n\r\nYou will not observe this behavior locally when with embedded database, if you have any other local DB running on either docker or on system it will throw the error.\r\n\r\nIt is advisable that in containerize deployment you should set the property to `never` and do schema creation for batch metadata tables manually.\r\n\r\nYou can get these DDL script from Spring Batch `org/springframework/batch/core/migration` package. You can add this to your migration script if you are using Flyway or Liuquibase, or in docker initialization script for your DB service in docker-compose.\r\n\r\nNote: Reference Spring Doc [here](https://docs.spring.io/spring-batch/docs/current/reference/html/schema-appendix.html#metaDataSchema)","title":"Spring Batch initialize-schema always will throw error relation &quot;batch_job_instance&quot; already exists","body":"<p>The <code>spring.batch.jdbc.initialize-schema=always</code> property tells Spring Batch Auto configuration to create the schema everytime the application restarts. This property also silently sets <code>continueOnError= true</code> in the auto-configuration, so even if the error comes it will not fail the application.</p>\n<p>You will not observe this behavior locally when with embedded database, if you have any other local DB running on either docker or on system it will throw the error.</p>\n<p>It is advisable that in containerize deployment you should set the property to <code>never</code> and do schema creation for batch metadata tables manually.</p>\n<p>You can get these DDL script from Spring Batch <code>org/springframework/batch/core/migration</code> package. You can add this to your migration script if you are using Flyway or Liuquibase, or in docker initialization script for your DB service in docker-compose.</p>\n<p>Note: Reference Spring Doc <a href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/schema-appendix.html#metaDataSchema\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":10480901,"reputation":230,"user_id":7725929,"accept_rate":87,"display_name":"Muchtar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1933,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74955282,"answer_count":1,"score":2,"last_activity_date":1672341921,"creation_date":1672325592,"question_id":74952638,"body_markdown":"I have a Spring Batch application which will be triggered and started by a Kubernetes CronJob once a day and do some operations.\r\n\r\nSo it is not needed, that the application will run the whole time and idle until the scheduler starts the job.\r\n\r\nTo initialize the spring batch schema \r\n\r\n    spring:\r\n      batch:\r\n        jdbc:\r\n          initialize-schema: always\r\n\r\nis used.\r\n\r\nBy doing so, every time the application is triggered to run, the schema will be initialzed again. This is why I get an error in the database logs which says\r\n\r\n    [380] ERROR:  relation &quot;batch_job_instance&quot; already exists\r\n\r\nbecause the schema will be initialzed always.\r\n\r\nI searched for another option than just always or never, but seems nothing else.\r\n\r\nI&#39;m using Spring Batch Version 4.3.6 and PostgreSQL.","title":"Spring Batch initialize-schema always will throw error relation &quot;batch_job_instance&quot; already exists","body":"<p>I have a Spring Batch application which will be triggered and started by a Kubernetes CronJob once a day and do some operations.</p>\n<p>So it is not needed, that the application will run the whole time and idle until the scheduler starts the job.</p>\n<p>To initialize the spring batch schema</p>\n<pre><code>spring:\n  batch:\n    jdbc:\n      initialize-schema: always\n</code></pre>\n<p>is used.</p>\n<p>By doing so, every time the application is triggered to run, the schema will be initialzed again. This is why I get an error in the database logs which says</p>\n<pre><code>[380] ERROR:  relation &quot;batch_job_instance&quot; already exists\n</code></pre>\n<p>because the schema will be initialzed always.</p>\n<p>I searched for another option than just always or never, but seems nothing else.</p>\n<p>I'm using Spring Batch Version 4.3.6 and PostgreSQL.</p>\n"},{"tags":["java","mysql","servlets","jdbc"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672321837,"post_id":74951749,"comment_id":132266971,"body_markdown":"Please never post images of text. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly.\nLooks like you&#39;re trying to access the wrong url","body":"Please never post images of text. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly. Looks like you&#39;re trying to access the wrong url"},{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1672346295,"post_id":74951749,"comment_id":132273654,"body_markdown":"How do you build this?  It works fine for me other than it attempts to redirect to either `/Success?msg=regsuccess` or `/error?msg=regerror` after it does it&#39;s insert and they don&#39;t exist.  What server (i.e. Tomcat, Wildfly, etc) are you testing against?","body":"How do you build this?  It works fine for me other than it attempts to redirect to either <code>&#47;Success?msg=regsuccess</code> or <code>&#47;error?msg=regerror</code> after it does it&#39;s insert and they don&#39;t exist.  What server (i.e. Tomcat, Wildfly, etc) are you testing against?"},{"owner":{"account_id":27381020,"reputation":1,"user_id":20885629,"display_name":"Dipesh Mahajan"},"score":0,"creation_date":1672379290,"post_id":74951749,"comment_id":132278523,"body_markdown":"I am using Tomcat on eclipse","body":"I am using Tomcat on eclipse"}],"answers":[{"tags":[],"owner":{"account_id":20306661,"reputation":11,"user_id":14894723,"display_name":"Daniel Jr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672326685,"creation_date":1672323760,"answer_id":74952286,"question_id":74951749,"body_markdown":"Looks like your implementation of method `dopost()` is wrong.\r\nIt should be `doPost()`.  \r\nhttps://jenkov.com/tutorials/java-servlets/httpservlet.html  \r\nLike this:\r\n```java\r\nprotected void doPost(HttpServletRequest request, HttpServletResponse response) {\r\n```\r\n\r\nYou can also try to configure manually the servlet in `WEB-INF/web.xml`.  \r\nSomething like:\r\n```xml\r\n&lt;web-app&gt;\r\n  &lt;servlet&gt;\r\n  \t&lt;servlet-name&gt;registration&lt;/servlet-name&gt;\r\n  \t&lt;servlet-class&gt;com.loginpagedemo.controller.RegistrationControllerServlet&lt;/servlet-class&gt;\r\n  &lt;/servlet&gt;\r\n  &lt;servlet-mapping&gt;\r\n    &lt;servlet-name&gt;registration&lt;/servlet-name&gt;\r\n    &lt;url-pattern&gt;/register&lt;/url-pattern&gt;\r\n  &lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n```\r\nhttps://javapapers.com/servlet/what-is-servlet-mapping/","title":"Registration form using JDBC and Servlet in java","body":"<p>Looks like your implementation of method <code>dopost()</code> is wrong.\nIt should be <code>doPost()</code>.<br />\n<a href=\"https://jenkov.com/tutorials/java-servlets/httpservlet.html\" rel=\"nofollow noreferrer\">https://jenkov.com/tutorials/java-servlets/httpservlet.html</a><br />\nLike this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected void doPost(HttpServletRequest request, HttpServletResponse response) {\n</code></pre>\n<p>You can also try to configure manually the servlet in <code>WEB-INF/web.xml</code>.<br />\nSomething like:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;web-app&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;registration&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;com.loginpagedemo.controller.RegistrationControllerServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;registration&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/register&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p><a href=\"https://javapapers.com/servlet/what-is-servlet-mapping/\" rel=\"nofollow noreferrer\">https://javapapers.com/servlet/what-is-servlet-mapping/</a></p>\n"}],"owner":{"account_id":27381020,"reputation":1,"user_id":20885629,"display_name":"Dipesh Mahajan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672341698,"creation_date":1672320673,"question_id":74951749,"body_markdown":"I have problem accessing database with servlet java. I want to add users with an html registration form. this is the html:\r\n\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot; /&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;\r\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot; /&gt;\r\n    &lt;title&gt;Registration Page&lt;/title&gt;\r\n    &lt;!---Custom CSS File---&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; /&gt;\r\n  &lt;/head&gt;\r\n  &lt;body&gt;\r\n      &lt;header&gt;Registration Form&lt;/header&gt;\r\n      &lt;form action=&quot;register&quot; method=&quot;post&quot; class=&quot;form&quot;&gt;\r\n      \r\n        &lt;div class=&quot;input-box&quot;&gt;\r\n          &lt;label&gt;Full Name&lt;/label&gt;\r\n          &lt;input type=&quot;text&quot; name=&quot;txtUname&quot; placeholder=&quot;Enter full name&quot; required /&gt;\r\n        &lt;/div&gt;\r\n\r\n        &lt;div class=&quot;input-box&quot;&gt;\r\n          &lt;label&gt;Email Address&lt;/label&gt;\r\n          &lt;input type=&quot;email&quot; name=&quot;Email&quot; placeholder=&quot;Enter email address&quot; required /&gt;\r\n        &lt;/div&gt;\r\n\r\n        &lt;div class=&quot;input-box&quot;&gt;\r\n            &lt;label&gt;Password&lt;/label&gt;\r\n            &lt;input type=&quot;password&quot; name=&quot;Pass&quot; placeholder=&quot;Password&quot; required /&gt;\r\n        &lt;/div&gt;\r\n        &lt;button&gt;REGISTER&lt;/button&gt;\r\n      &lt;/form&gt;\r\n    \r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n\r\n```\r\nThis is the servlet (RegistrationControllerServlet.java)\r\n\r\n```\r\npackage com.loginpagedemo.controller;\r\n\r\nimport java.io.IOException;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.annotation.WebServlet;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\n\r\nimport com.loginpagedemo.dao.UserDao;\r\nimport com.loginpagedemo.daoimpl.UserDaoImpl;\r\nimport com.loginpagedemo.pojo.User;\r\n\r\n@WebServlet(&quot;/register&quot;)\r\npublic class RegistrationControllerServlet extends HttpServlet{\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprotected void doPost(HttpServletRequest request,\r\n\t\t\tHttpServletResponse response) \r\n\t\t\tthrows ServletException, IOException {\r\n\t\t\r\n\t\r\n\tString uname = request.getParameter(&quot;txtUname&quot;);\r\n\tString password = request.getParameter(&quot;Pass&quot;);\r\n\tString email = request.getParameter(&quot;Email&quot;);\r\n\t\r\n\tUser u = new User(uname,password,email);\r\n\t\r\n\tUserDao daoImpl = new UserDaoImpl();\r\n\t\r\n\t\r\n\tif(daoImpl.addNewUser(u)) {\r\n\t\tresponse.sendRedirect(&quot;Success?msg=regsuccess&quot;);\r\n\t}\r\n\telse {\r\n\t\tresponse.sendRedirect(&quot;error?msg=regerror&quot;);\r\n\t}\t\r\n  }\r\n}\r\n\r\n```\r\nThis is the java class (User.java):\r\n\r\n```\r\npackage com.loginpagedemo.pojo;\r\n\r\npublic class User {\r\n\r\n\tprivate String username;\r\n\tprivate String emailaddress;\r\n\tprivate String password;\r\n\t\r\n\tpublic User() {\r\n\t}\r\n    \r\n\tpublic User(String username,String emailaddress,String password){\r\n\t\tthis.username = username;\r\n\t\tthis.emailaddress =emailaddress;\r\n\t\tthis.password = password;\r\n\t}\r\n\r\n\tpublic String getUsername() {\r\n\t\treturn username;\r\n\t}\r\n\r\n\tpublic void setUsername(String username) {\r\n\t\tthis.username = username;\r\n\t}\r\n\r\n\tpublic String getEmailaddress() {\r\n\t\treturn emailaddress;\r\n\t}\r\n\r\n\tpublic void setEmailaddress(String emailaddress) {\r\n\t\tthis.emailaddress = emailaddress;\r\n\t}\r\n\r\n\tpublic String getPassword() {\r\n\t\treturn password;\r\n\t}\r\n\r\n\tpublic void setPassword(String password) {\r\n\t\tthis.password = password;\r\n\t}\r\n}\r\n\r\n```\r\nThis is the java Interface (UserDao.java):\r\n\r\n\r\n```\r\npackage com.loginpagedemo.dao;\r\n\r\nimport com.loginpagedemo.pojo.User;\r\n\r\npublic interface UserDao {\r\n\r\n\tboolean checkUserCredentials(User user);\r\n\tboolean addNewUser(User user);\r\n}\r\n\r\n```\r\nThis is the java class (DbConnection.java):\r\n\r\n```\r\npackage com.loginpagedemo.connection;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.SQLException;\r\n\r\npublic class DbConnection {\r\npublic static Connection getDatabaseConnection(){\r\n\ttry {\r\n\t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n\t\tConnection con =\r\n\t\t\t\tDriverManager.getConnection(\r\n\t\t\t\t\t\t&quot;jdbc:mysql://localhost:3306/28thnovadv&quot;,\r\n\t\t\t\t\t\t&quot;root&quot;,&quot;ROOT@123&quot;);\r\n\t\treturn con;\r\n\t\t}\r\n\tcatch(ClassNotFoundException | SQLException exc) {\r\n\t\texc.printStackTrace();\r\n\t\treturn null;\r\n\t}\r\n  }\r\n}\r\n\r\n```\r\nThis is the java class (UserDaoImpl.java):\r\n\r\n```\r\n\r\npackage com.loginpagedemo.daoimpl;\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\n\r\nimport com.loginpagedemo.connection.DbConnection;\r\nimport com.loginpagedemo.dao.UserDao;\r\nimport com.loginpagedemo.pojo.User;\r\n\r\npublic class UserDaoImpl implements UserDao {\r\n\r\n\t@Override\r\n\tpublic boolean checkUserCredentials(User user) {\r\n\t\ttry(Connection con =\r\n\t\t\t\t\tDbConnection.getDatabaseConnection()){\r\n\t\t\t\tPreparedStatement st = con.prepareStatement(\r\n\t\t\t    &quot;SELECT * FROM userdata WHERE username=? AND email=? AND password=?&quot;);\r\n\t\t\t\t\r\n\t\t\t\tst.setString(1, user.getUsername());\r\n\t\t\t\tst.setString(2, user.getEmailaddress());\r\n\t\t\t\tst.setString(3, user.getPassword());\r\n\t\t\t\t\r\n\t\t\t\tResultSet rs =st.executeQuery();\r\n\t\t\t\t\r\n    if(rs.isBeforeFirst())\r\n\t\treturn true;\r\n\telse\r\n\t\treturn false;\r\n\t\t\t}\r\n\tcatch(SQLException | NullPointerException exc){\r\n\t\t\texc.printStackTrace();\r\n\t\t\treturn false;\r\n\t\t}\t\r\n   }\r\n\r\n\t@Override\r\n\tpublic boolean addNewUser(User user) {\r\n\t\ttry(Connection con =\r\n\t\t\t\tDbConnection.getDatabaseConnection()){\r\n\t\t\tPreparedStatement st = con.prepareStatement(\r\n\t\t    &quot;INSERT INTO userdata VALUES(?,?,?)&quot;);\r\n\t\t\t\r\n\t\t\tst.setString(1, user.getUsername());\r\n\t\t\tst.setString(2, user.getEmailaddress());\r\n\t\t\tst.setString(3, user.getPassword());\r\n\t\t\t\r\n\t\t\tint count = st.executeUpdate();\r\n\t\t\t\r\n\t\t\tif(count &gt; 0)\r\n\t\t\t\treturn true;\r\n\t\t\telse\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\tcatch(SQLException | NullPointerException exc){\r\n\t\texc.printStackTrace();\r\n\t\treturn false;\r\n\t}\t\r\n  }\t\r\n}\r\n\r\n```\r\nThis is the Web.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;4.0&quot;&gt;\r\n  &lt;display-name&gt;LoginpageJDBC&lt;/display-name&gt;\r\n  &lt;welcome-file-list&gt;\r\n    &lt;welcome-file&gt;RegistartionFrom.html&lt;/welcome-file&gt;\r\n  &lt;/welcome-file-list&gt;\r\n  \r\n  &lt;servlet&gt;\r\n    &lt;servlet-name&gt;registration&lt;/servlet-name&gt;\r\n    &lt;servlet-class&gt;com.loginpagedemo.controller.RegistrationControllerServlet&lt;/servlet-class&gt;\r\n  &lt;/servlet&gt;\r\n  \r\n  &lt;servlet-mapping&gt;\r\n    &lt;servlet-name&gt;registration&lt;/servlet-name&gt;\r\n    &lt;url-pattern&gt;/register&lt;/url-pattern&gt;\r\n  &lt;/servlet-mapping&gt;\r\n&lt;/web-app&gt;\r\n```\r\n[Folder Structure][1]\r\n\r\n[error after updated][2]\r\n\r\nI&#39;m sorry that is a long question, but I am in despair \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ojfxo.png\r\n  [2]: https://i.stack.imgur.com/HWweS.png","title":"Registration form using JDBC and Servlet in java","body":"<p>I have problem accessing database with servlet java. I want to add users with an html registration form. this is the html:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot; /&gt;\n    &lt;title&gt;Registration Page&lt;/title&gt;\n    &lt;!---Custom CSS File---&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; /&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n      &lt;header&gt;Registration Form&lt;/header&gt;\n      &lt;form action=&quot;register&quot; method=&quot;post&quot; class=&quot;form&quot;&gt;\n      \n        &lt;div class=&quot;input-box&quot;&gt;\n          &lt;label&gt;Full Name&lt;/label&gt;\n          &lt;input type=&quot;text&quot; name=&quot;txtUname&quot; placeholder=&quot;Enter full name&quot; required /&gt;\n        &lt;/div&gt;\n\n        &lt;div class=&quot;input-box&quot;&gt;\n          &lt;label&gt;Email Address&lt;/label&gt;\n          &lt;input type=&quot;email&quot; name=&quot;Email&quot; placeholder=&quot;Enter email address&quot; required /&gt;\n        &lt;/div&gt;\n\n        &lt;div class=&quot;input-box&quot;&gt;\n            &lt;label&gt;Password&lt;/label&gt;\n            &lt;input type=&quot;password&quot; name=&quot;Pass&quot; placeholder=&quot;Password&quot; required /&gt;\n        &lt;/div&gt;\n        &lt;button&gt;REGISTER&lt;/button&gt;\n      &lt;/form&gt;\n    \n  &lt;/body&gt;\n&lt;/html&gt;\n\n\n</code></pre>\n<p>This is the servlet (RegistrationControllerServlet.java)</p>\n<pre><code>package com.loginpagedemo.controller;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport com.loginpagedemo.dao.UserDao;\nimport com.loginpagedemo.daoimpl.UserDaoImpl;\nimport com.loginpagedemo.pojo.User;\n\n@WebServlet(&quot;/register&quot;)\npublic class RegistrationControllerServlet extends HttpServlet{\n    private static final long serialVersionUID = 1L;\n    protected void doPost(HttpServletRequest request,\n            HttpServletResponse response) \n            throws ServletException, IOException {\n        \n    \n    String uname = request.getParameter(&quot;txtUname&quot;);\n    String password = request.getParameter(&quot;Pass&quot;);\n    String email = request.getParameter(&quot;Email&quot;);\n    \n    User u = new User(uname,password,email);\n    \n    UserDao daoImpl = new UserDaoImpl();\n    \n    \n    if(daoImpl.addNewUser(u)) {\n        response.sendRedirect(&quot;Success?msg=regsuccess&quot;);\n    }\n    else {\n        response.sendRedirect(&quot;error?msg=regerror&quot;);\n    }   \n  }\n}\n\n</code></pre>\n<p>This is the java class (User.java):</p>\n<pre><code>package com.loginpagedemo.pojo;\n\npublic class User {\n\n    private String username;\n    private String emailaddress;\n    private String password;\n    \n    public User() {\n    }\n    \n    public User(String username,String emailaddress,String password){\n        this.username = username;\n        this.emailaddress =emailaddress;\n        this.password = password;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getEmailaddress() {\n        return emailaddress;\n    }\n\n    public void setEmailaddress(String emailaddress) {\n        this.emailaddress = emailaddress;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n}\n\n</code></pre>\n<p>This is the java Interface (UserDao.java):</p>\n<pre><code>package com.loginpagedemo.dao;\n\nimport com.loginpagedemo.pojo.User;\n\npublic interface UserDao {\n\n    boolean checkUserCredentials(User user);\n    boolean addNewUser(User user);\n}\n\n</code></pre>\n<p>This is the java class (DbConnection.java):</p>\n<pre><code>package com.loginpagedemo.connection;\n\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic class DbConnection {\npublic static Connection getDatabaseConnection(){\n    try {\n        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\n        Connection con =\n                DriverManager.getConnection(\n                        &quot;jdbc:mysql://localhost:3306/28thnovadv&quot;,\n                        &quot;root&quot;,&quot;ROOT@123&quot;);\n        return con;\n        }\n    catch(ClassNotFoundException | SQLException exc) {\n        exc.printStackTrace();\n        return null;\n    }\n  }\n}\n\n</code></pre>\n<p>This is the java class (UserDaoImpl.java):</p>\n<pre><code>\npackage com.loginpagedemo.daoimpl;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\n\nimport com.loginpagedemo.connection.DbConnection;\nimport com.loginpagedemo.dao.UserDao;\nimport com.loginpagedemo.pojo.User;\n\npublic class UserDaoImpl implements UserDao {\n\n    @Override\n    public boolean checkUserCredentials(User user) {\n        try(Connection con =\n                    DbConnection.getDatabaseConnection()){\n                PreparedStatement st = con.prepareStatement(\n                &quot;SELECT * FROM userdata WHERE username=? AND email=? AND password=?&quot;);\n                \n                st.setString(1, user.getUsername());\n                st.setString(2, user.getEmailaddress());\n                st.setString(3, user.getPassword());\n                \n                ResultSet rs =st.executeQuery();\n                \n    if(rs.isBeforeFirst())\n        return true;\n    else\n        return false;\n            }\n    catch(SQLException | NullPointerException exc){\n            exc.printStackTrace();\n            return false;\n        }   \n   }\n\n    @Override\n    public boolean addNewUser(User user) {\n        try(Connection con =\n                DbConnection.getDatabaseConnection()){\n            PreparedStatement st = con.prepareStatement(\n            &quot;INSERT INTO userdata VALUES(?,?,?)&quot;);\n            \n            st.setString(1, user.getUsername());\n            st.setString(2, user.getEmailaddress());\n            st.setString(3, user.getPassword());\n            \n            int count = st.executeUpdate();\n            \n            if(count &gt; 0)\n                return true;\n            else\n                return false;\n        }\n    catch(SQLException | NullPointerException exc){\n        exc.printStackTrace();\n        return false;\n    }   \n  } \n}\n\n</code></pre>\n<p>This is the Web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;4.0&quot;&gt;\n  &lt;display-name&gt;LoginpageJDBC&lt;/display-name&gt;\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;RegistartionFrom.html&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n  \n  &lt;servlet&gt;\n    &lt;servlet-name&gt;registration&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;com.loginpagedemo.controller.RegistrationControllerServlet&lt;/servlet-class&gt;\n  &lt;/servlet&gt;\n  \n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;registration&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/register&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ojfxo.png\" rel=\"nofollow noreferrer\">Folder Structure</a></p>\n<p><a href=\"https://i.stack.imgur.com/HWweS.png\" rel=\"nofollow noreferrer\">error after updated</a></p>\n<p>I'm sorry that is a long question, but I am in despair</p>\n"},{"tags":["java","spring-boot","intellij-idea","sts","addattribute"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672347790,"post_id":74955106,"comment_id":132273965,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":6734,"reputation":3954,"user_id":11451,"accept_rate":82,"display_name":"Kristof Neirynck"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1672341545,"creation_date":1672340802,"answer_id":74955139,"question_id":74955106,"body_markdown":"You have an import statement which causes the problem. \r\n`import ch.qos.logback.core.model.Model;`\r\nReplace that with `import org.springframework.ui.Model;`","title":"Cannot resolve method &#39;addAttribute&#39; in &#39;Model&#39; i got this error while executing an STS code","body":"<p>You have an import statement which causes the problem.\n<code>import ch.qos.logback.core.model.Model;</code>\nReplace that with <code>import org.springframework.ui.Model;</code></p>\n"}],"owner":{"account_id":20356182,"reputation":3,"user_id":14931642,"display_name":"Alaa Amari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1412,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74955139,"answer_count":1,"score":0,"last_activity_date":1672341545,"creation_date":1672340591,"question_id":74955106,"body_markdown":"the addAttribute function is not working and is not known for the sts plugins : \r\n\r\n```\r\npackage com.example.projet.user;\r\n\r\n\r\nimport ch.qos.logback.core.model.Model;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\nimport java.util.List;\r\n\r\n@Controller\r\npublic class userController {\r\n    @Autowired private userService service;\r\n    @GetMapping(&quot;/users&quot;)\r\n    public String showUserList(Model model){\r\n        List&lt;user&gt; ListUsers = service.listAll();\r\n        model.addAttribute(&quot;ListUsers&quot;,ListUsers);\r\n        return &quot;users&quot;;\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n////////////////////////////////////////////////////////////\r\nthe pom.xml in my code is ; \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;projet&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;projet&lt;/name&gt;\r\n    &lt;description&gt;projet&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n            &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\r\n            &lt;version&gt;4.3.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webjars-locator-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\ni tried to add a new dependency to configure the addAttribute and it did not work so i tried then to download new plugin in my IDE and it didn&#39;t work as well \r\n","title":"Cannot resolve method &#39;addAttribute&#39; in &#39;Model&#39; i got this error while executing an STS code","body":"<p>the addAttribute function is not working and is not known for the sts plugins :</p>\n<pre><code>package com.example.projet.user;\n\n\nimport ch.qos.logback.core.model.Model;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\n\nimport java.util.List;\n\n@Controller\npublic class userController {\n    @Autowired private userService service;\n    @GetMapping(&quot;/users&quot;)\n    public String showUserList(Model model){\n        List&lt;user&gt; ListUsers = service.listAll();\n        model.addAttribute(&quot;ListUsers&quot;,ListUsers);\n        return &quot;users&quot;;\n\n    }\n\n}\n\n</code></pre>\n<p>////////////////////////////////////////////////////////////\nthe pom.xml in my code is ;</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;projet&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;projet&lt;/name&gt;\n    &lt;description&gt;projet&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;bootstrap&lt;/artifactId&gt;\n            &lt;version&gt;4.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.webjars&lt;/groupId&gt;\n            &lt;artifactId&gt;webjars-locator-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>i tried to add a new dependency to configure the addAttribute and it did not work so i tried then to download new plugin in my IDE and it didn't work as well</p>\n"},{"tags":["java","amazon-dynamodb","dynamodb-mapper"],"comments":[{"owner":{"account_id":3166473,"reputation":953,"user_id":2676790,"accept_rate":83,"display_name":"amrith"},"score":0,"creation_date":1672404384,"post_id":74955008,"comment_id":132283599,"body_markdown":"Could you share the schema of the table please. I&#39;m assuming that (as Lee points out) that pk and sk are defined as keys on the table. You cannot perform an Update without specifying the full key -- it is not sufficient that they exist in the table.","body":"Could you share the schema of the table please. I&#39;m assuming that (as Lee points out) that pk and sk are defined as keys on the table. You cannot perform an Update without specifying the full key -- it is not sufficient that they exist in the table."}],"answers":[{"tags":[],"owner":{"account_id":10749774,"reputation":14475,"user_id":7909676,"display_name":"Leeroy Hannigan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672341106,"creation_date":1672341106,"answer_id":74955179,"question_id":74955008,"body_markdown":"I believe you are messing up two clients, you should not use Mapper Client if you are not mapping the data to a class object. Use the DynamoDB low level client which your instantiated to make the transaction request.\r\n\r\nFurthermore, ensure that your table dynamo-test had a partition key of `pk` and sort key of `sk` both of type String.","title":"The number of conditions on the keys is invalid - Error in dynamo item update using DynamoDBMapper","body":"<p>I believe you are messing up two clients, you should not use Mapper Client if you are not mapping the data to a class object. Use the DynamoDB low level client which your instantiated to make the transaction request.</p>\n<p>Furthermore, ensure that your table dynamo-test had a partition key of <code>pk</code> and sort key of <code>sk</code> both of type String.</p>\n"}],"owner":{"account_id":6638190,"reputation":538,"user_id":5124753,"accept_rate":17,"display_name":"Shailendra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672341106,"creation_date":1672339814,"question_id":74955008,"body_markdown":"I am new in dynamo db. I am trying to update the dynamo item amt attribute using the following expression.\r\n\r\n    TransactionWriteRequest transactionWriteRequest = new TransactionWriteRequest();\r\n\r\n    HashMap&lt;String, AttributeValue&gt; attributeValues = new HashMap&lt;&gt;();\r\n    attributeValues.put(&quot;:amount&quot;,  new AttributeValue().withN(amount));\r\n    // key\r\n    Map&lt;String, AttributeValue&gt; key = new HashMap&lt;&gt;();\r\n    key.put(&quot;pk&quot;, new AttributeValue().withS(pk));\r\n    key.put(&quot;sk&quot;, new AttributeValue().withS(sk));\r\n\r\n    UpdateItemRequest updateItemRequest = new UpdateItemRequest()\r\n        .withKey(key)\r\n        .withTableName(&quot;dynamo-test&quot;)\r\n        .withUpdateExpression(&quot;SET amt = amt + :amount&quot;)\r\n        .withExpressionAttributeValues(attributeValues);\r\n\r\n    transactionWriteRequest.addUpdate(updateItemRequest);\r\n\r\n    dynamoDBMapper.transactionWrite(transactionWriteRequest);\r\n\r\nThere are multiple updates which are getting executed in transactions. On executing this, it is throwing the following exception.\r\n\r\n    AmazonDynamoDBException: The number of conditions on the keys is invalid\r\n\r\nI am stuck here, not finding any error in the above code. Please help here.\r\n\r\nThanks in advance\r\n","title":"The number of conditions on the keys is invalid - Error in dynamo item update using DynamoDBMapper","body":"<p>I am new in dynamo db. I am trying to update the dynamo item amt attribute using the following expression.</p>\n<pre><code>TransactionWriteRequest transactionWriteRequest = new TransactionWriteRequest();\n\nHashMap&lt;String, AttributeValue&gt; attributeValues = new HashMap&lt;&gt;();\nattributeValues.put(&quot;:amount&quot;,  new AttributeValue().withN(amount));\n// key\nMap&lt;String, AttributeValue&gt; key = new HashMap&lt;&gt;();\nkey.put(&quot;pk&quot;, new AttributeValue().withS(pk));\nkey.put(&quot;sk&quot;, new AttributeValue().withS(sk));\n\nUpdateItemRequest updateItemRequest = new UpdateItemRequest()\n    .withKey(key)\n    .withTableName(&quot;dynamo-test&quot;)\n    .withUpdateExpression(&quot;SET amt = amt + :amount&quot;)\n    .withExpressionAttributeValues(attributeValues);\n\ntransactionWriteRequest.addUpdate(updateItemRequest);\n\ndynamoDBMapper.transactionWrite(transactionWriteRequest);\n</code></pre>\n<p>There are multiple updates which are getting executed in transactions. On executing this, it is throwing the following exception.</p>\n<pre><code>AmazonDynamoDBException: The number of conditions on the keys is invalid\n</code></pre>\n<p>I am stuck here, not finding any error in the above code. Please help here.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","swing","icons","jtable","imageicon"],"comments":[{"owner":{"account_id":1958815,"reputation":163,"user_id":1761071,"display_name":"Balkrushn Viroja"},"score":0,"creation_date":1350799707,"post_id":12995433,"comment_id":17629804,"body_markdown":"@ Vincenzo Sanchez I have used class for that but it is in another package.","body":"@ Vincenzo Sanchez I have used class for that but it is in another package."},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":1,"creation_date":1350800363,"post_id":12995433,"comment_id":17629899,"body_markdown":"*&quot;What should I do for that?&quot;*  Write Java code.  Where are you stuck, specifically?","body":"<i>&quot;What should I do for that?&quot;</i>  Write Java code.  Where are you stuck, specifically?"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1350802020,"post_id":12995433,"comment_id":17630122,"body_markdown":"`&quot;What should I do for that?&quot;` I think that use proper way, simple to uncomment `//case 5: return ImageIcon.class;`, in most cases there no reason use Renderer, Renderer is required with Object &amp; Icon or Icon &amp; Object in the one Cell","body":"<code>&quot;What should I do for that?&quot;</code> I think that use proper way, simple to uncomment <code>&#47;&#47;case 5: return ImageIcon.class;</code>, in most cases there no reason use Renderer, Renderer is required with Object &amp; Icon or Icon &amp; Object in the one Cell"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":1,"creation_date":1350802522,"post_id":12995433,"comment_id":17630190,"body_markdown":"hmmmm maybe I&#39;m wrong but I saw this code by `two-three different users` here, there are very important mistakes, starting with `fireTableRowsDeleted(int firstRow, int lastRow)` instead of `fireTableDataChanged();`, maybe there are a few another `A-Bombs` that killing your `Editor` and `Renderer` on first `fireTableDataChanged();` is called,","body":"hmmmm maybe I&#39;m wrong but I saw this code by <code>two-three different users</code> here, there are very important mistakes, starting with <code>fireTableRowsDeleted(int firstRow, int lastRow)</code> instead of <code>fireTableDataChanged();</code>, maybe there are a few another <code>A-Bombs</code> that killing your <code>Editor</code> and <code>Renderer</code> on first <code>fireTableDataChanged();</code> is called,"},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":1,"creation_date":1350814229,"post_id":12995433,"comment_id":17632110,"body_markdown":"_Please give me full description over this_ please give me full money for doing that ;-) Seriously, that&#39;s not how the site is working: typically, it&#39;s you who finds/defines/describes the problems _one-by-one_ (best with an SSCCE), then try to understand the answer. Then update the example with the learned item, go on to the next problem/question ... Here you have two distinct requirements: a) show the icon b) delete the row. Both have been answered more than once, do a bit of research, f.i. by evaluating previous QAs referenced in the sidebar ---&gt;","body":"<i>Please give me full description over this</i> please give me full money for doing that ;-) Seriously, that&#39;s not how the site is working: typically, it&#39;s you who finds/defines/describes the problems <i>one-by-one</i> (best with an SSCCE), then try to understand the answer. Then update the example with the learned item, go on to the next problem/question ... Here you have two distinct requirements: a) show the icon b) delete the row. Both have been answered more than once, do a bit of research, f.i. by evaluating previous QAs referenced in the sidebar ---&gt;"}],"answers":[{"tags":[],"owner":{"account_id":167824,"reputation":21098,"user_id":1439305,"accept_rate":81,"display_name":"Audrius Meškauskas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1672340865,"creation_date":1350799819,"answer_id":12995466,"question_id":12995433,"body_markdown":"This is done through the custom cell renderer that can extend *JLabel*. You can easily set the icon for *JLabel*. \r\n\r\nRenderer is a component that must draw itself as a table cell after *JTable* calls *getTableCellRendererComponent* passing the cells state and content. It is common for a renderer then to set properties on its own and return *this*. The renderer can also return some other object as long as it extends *Component*.\r\n\r\n\r\n  [1]: http://www.exampledepot.com/egs/javax.swing.table/CustRend.html","title":"How to set up icon in JTable cell?","body":"<p>This is done through the custom cell renderer that can extend <em>JLabel</em>. You can easily set the icon for <em>JLabel</em>.</p>\n<p>Renderer is a component that must draw itself as a table cell after <em>JTable</em> calls <em>getTableCellRendererComponent</em> passing the cells state and content. It is common for a renderer then to set properties on its own and return <em>this</em>. The renderer can also return some other object as long as it extends <em>Component</em>.</p>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1478057497,"creation_date":1350800919,"answer_id":12995556,"question_id":12995433,"body_markdown":"You can use a [`DefaltTableCellRenderer`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableCellRenderer.html) which is backed by a `JLabel` which you can then use to set the icon.\r\n\r\nThe best solution would be to extend `DefaltTableCellRenderer` and override the `getTableCellRendererComponent` method and apply the icon as is needed on a cell by cell need\r\n\r\nYou can apply renderers either by defining the default renderer for a given `Class` type or directly to the column\r\n\r\nCheck out [How to Use JTables](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html) and [Using Custom Renderers](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer) in particular \r\n\r\n**UPDATED with example**\r\n\r\nThis is **A** approach, there are many more...\r\n\r\n    public class TestTable {\r\n    \r\n        public static void main(String[] args) {\r\n            new TestTable();\r\n        }\r\n    \r\n        public TestTable() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n                    } catch (ClassNotFoundException ex) {\r\n                    } catch (InstantiationException ex) {\r\n                    } catch (IllegalAccessException ex) {\r\n                    } catch (UnsupportedLookAndFeelException ex) {\r\n                    }\r\n                    \r\n                    JTable table = new JTable();\r\n                    table.setGridColor(Color.LIGHT_GRAY);\r\n                    table.setShowGrid(true);\r\n                    table.setShowHorizontalLines(true);\r\n                    table.setShowVerticalLines(true);                \r\n                    table.setModel(new TestTableModel());\r\n                    table.getColumn(&quot;X&quot;).setCellRenderer(new DeleteCellRenderer());\r\n                    table.getColumn(&quot;X&quot;).setCellEditor(new DeleteCellEditor());\r\n                    \r\n                    JFrame frame = new JFrame(&quot;Test&quot;);\r\n                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                    frame.setLayout(new BorderLayout());\r\n                    frame.add(new JScrollPane(table));\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n            });\r\n        }\r\n        \r\n        protected class TestTableModel extends AbstractTableModel {\r\n    \r\n            private List&lt;RowData&gt; rowData;\r\n    \r\n            public TestTableModel() {\r\n                rowData = new ArrayList&lt;RowData&gt;(25);\r\n                for (int index = 0; index &lt; 10; index++) {\r\n                    rowData.add(new RowData(index));\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public String getColumnName(int column) {\r\n                return column == 0 ? &quot;Text&quot; : &quot;X&quot;;\r\n            }\r\n    \r\n            @Override\r\n            public boolean isCellEditable(int rowIndex, int columnIndex) {\r\n                RowData rd = rowData.get(rowIndex);\r\n                return rd.isDeletable();\r\n            }\r\n            \r\n            @Override\r\n            public int getRowCount() {\r\n                return rowData.size();\r\n            }\r\n    \r\n            @Override\r\n            public int getColumnCount() {\r\n                return 2;\r\n            }\r\n    \r\n            @Override\r\n            public Object getValueAt(int rowIndex, int columnIndex) {\r\n                RowData rd = rowData.get(rowIndex);\r\n                return columnIndex == 0 ? rd.getText() : rd.isDeletable();\r\n            }\r\n    \r\n            @Override\r\n            public void setValueAt(Object aValue, int rowIndex, int columnIndex) {\r\n                RowData rd = rowData.get(rowIndex);\r\n                if (columnIndex == 1) {\r\n                    if (aValue instanceof Boolean &amp;&amp; (Boolean)aValue) {\r\n                        rowData.remove(rd);\r\n                        fireTableRowsDeleted(rowIndex, rowIndex);\r\n                    }\r\n                }\r\n            }\r\n            \r\n        }\r\n        \r\n        public class RowData {\r\n            \r\n            private String text;\r\n            private boolean deletable;\r\n            \r\n            public RowData(int row) {\r\n                text = &quot;Row &quot; + row;\r\n                deletable = Math.round(Math.random() * 1) == 0;\r\n            }\r\n    \r\n            public String getText() {\r\n                return text;\r\n            }\r\n    \r\n            public boolean isDeletable() {\r\n                return deletable;\r\n            }        \r\n        }\r\n        \r\n        public class DeleteCellRenderer extends DefaultTableCellRenderer {\r\n    \r\n            public DeleteCellRenderer() {\r\n                try {\r\n                    BufferedImage img = ImageIO.read(getClass().getResource(&quot;/Delete.png&quot;));\r\n                    setIcon(new ImageIcon(img));\r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n            }\r\n    \r\n            @Override\r\n            public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\r\n                super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\r\n                setText(null);\r\n                if (value instanceof Boolean &amp;&amp; (Boolean)value) {\r\n                    setEnabled(true);\r\n                } else {\r\n                    setEnabled(false);\r\n                }\r\n                return this;\r\n            }        \r\n        }\r\n    \r\n        public class DeleteCellEditor extends AbstractCellEditor implements TableCellEditor {\r\n    \r\n            private JLabel label;\r\n    \r\n            public DeleteCellEditor() {\r\n                label = new JLabel(&quot;Delete&quot;);\r\n            }\r\n            \r\n            @Override\r\n            public Object getCellEditorValue() {\r\n                return true;\r\n            }\r\n    \r\n            @Override\r\n            public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {\r\n                SwingUtilities.invokeLater(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        stopCellEditing();\r\n                    }\r\n                });\r\n                return label;\r\n            }\r\n    \r\n            @Override\r\n            public boolean isCellEditable(EventObject e) {\r\n                return true;\r\n            }        \r\n        }    \r\n    }\r\n\r\n**Updated**\r\n\r\nWhy not use a `JButton`/`TableCellEditor`?  [Here&#39;s why](https://stackoverflow.com/questions/25070511/add-jbutton-to-each-row-of-a-jtable/25071138#25071138)","title":"How to set up icon in JTable cell?","body":"<p>You can use a <a href=\"http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableCellRenderer.html\" rel=\"nofollow noreferrer\"><code>DefaltTableCellRenderer</code></a> which is backed by a <code>JLabel</code> which you can then use to set the icon.</p>\n\n<p>The best solution would be to extend <code>DefaltTableCellRenderer</code> and override the <code>getTableCellRendererComponent</code> method and apply the icon as is needed on a cell by cell need</p>\n\n<p>You can apply renderers either by defining the default renderer for a given <code>Class</code> type or directly to the column</p>\n\n<p>Check out <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/table.html\" rel=\"nofollow noreferrer\">How to Use JTables</a> and <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer\" rel=\"nofollow noreferrer\">Using Custom Renderers</a> in particular </p>\n\n<p><strong>UPDATED with example</strong></p>\n\n<p>This is <strong>A</strong> approach, there are many more...</p>\n\n<pre><code>public class TestTable {\n\n    public static void main(String[] args) {\n        new TestTable();\n    }\n\n    public TestTable() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (ClassNotFoundException ex) {\n                } catch (InstantiationException ex) {\n                } catch (IllegalAccessException ex) {\n                } catch (UnsupportedLookAndFeelException ex) {\n                }\n\n                JTable table = new JTable();\n                table.setGridColor(Color.LIGHT_GRAY);\n                table.setShowGrid(true);\n                table.setShowHorizontalLines(true);\n                table.setShowVerticalLines(true);                \n                table.setModel(new TestTableModel());\n                table.getColumn(\"X\").setCellRenderer(new DeleteCellRenderer());\n                table.getColumn(\"X\").setCellEditor(new DeleteCellEditor());\n\n                JFrame frame = new JFrame(\"Test\");\n                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                frame.setLayout(new BorderLayout());\n                frame.add(new JScrollPane(table));\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    protected class TestTableModel extends AbstractTableModel {\n\n        private List&lt;RowData&gt; rowData;\n\n        public TestTableModel() {\n            rowData = new ArrayList&lt;RowData&gt;(25);\n            for (int index = 0; index &lt; 10; index++) {\n                rowData.add(new RowData(index));\n            }\n        }\n\n        @Override\n        public String getColumnName(int column) {\n            return column == 0 ? \"Text\" : \"X\";\n        }\n\n        @Override\n        public boolean isCellEditable(int rowIndex, int columnIndex) {\n            RowData rd = rowData.get(rowIndex);\n            return rd.isDeletable();\n        }\n\n        @Override\n        public int getRowCount() {\n            return rowData.size();\n        }\n\n        @Override\n        public int getColumnCount() {\n            return 2;\n        }\n\n        @Override\n        public Object getValueAt(int rowIndex, int columnIndex) {\n            RowData rd = rowData.get(rowIndex);\n            return columnIndex == 0 ? rd.getText() : rd.isDeletable();\n        }\n\n        @Override\n        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {\n            RowData rd = rowData.get(rowIndex);\n            if (columnIndex == 1) {\n                if (aValue instanceof Boolean &amp;&amp; (Boolean)aValue) {\n                    rowData.remove(rd);\n                    fireTableRowsDeleted(rowIndex, rowIndex);\n                }\n            }\n        }\n\n    }\n\n    public class RowData {\n\n        private String text;\n        private boolean deletable;\n\n        public RowData(int row) {\n            text = \"Row \" + row;\n            deletable = Math.round(Math.random() * 1) == 0;\n        }\n\n        public String getText() {\n            return text;\n        }\n\n        public boolean isDeletable() {\n            return deletable;\n        }        \n    }\n\n    public class DeleteCellRenderer extends DefaultTableCellRenderer {\n\n        public DeleteCellRenderer() {\n            try {\n                BufferedImage img = ImageIO.read(getClass().getResource(\"/Delete.png\"));\n                setIcon(new ImageIcon(img));\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n\n        @Override\n        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n            setText(null);\n            if (value instanceof Boolean &amp;&amp; (Boolean)value) {\n                setEnabled(true);\n            } else {\n                setEnabled(false);\n            }\n            return this;\n        }        \n    }\n\n    public class DeleteCellEditor extends AbstractCellEditor implements TableCellEditor {\n\n        private JLabel label;\n\n        public DeleteCellEditor() {\n            label = new JLabel(\"Delete\");\n        }\n\n        @Override\n        public Object getCellEditorValue() {\n            return true;\n        }\n\n        @Override\n        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {\n            SwingUtilities.invokeLater(new Runnable() {\n                @Override\n                public void run() {\n                    stopCellEditing();\n                }\n            });\n            return label;\n        }\n\n        @Override\n        public boolean isCellEditable(EventObject e) {\n            return true;\n        }        \n    }    \n}\n</code></pre>\n\n<p><strong>Updated</strong></p>\n\n<p>Why not use a <code>JButton</code>/<code>TableCellEditor</code>?  <a href=\"https://stackoverflow.com/questions/25070511/add-jbutton-to-each-row-of-a-jtable/25071138#25071138\">Here's why</a></p>\n"}],"owner":{"account_id":1958815,"reputation":163,"user_id":1761071,"display_name":"Balkrushn Viroja"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4457,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1672340865,"creation_date":1350799412,"question_id":12995433,"body_markdown":"I am trying to add image Icon in Jtable&#39;s cell. I have a code as mentioned below. What should I do for that?\r\n\r\n    package com.orb;\r\n    private final LinkedList&lt;Product&gt; list= new LinkedList&lt;Product&gt;();\r\n    private final LinkedList&lt;Boolean&gt; checkList = new LinkedList&lt;Boolean&gt;();\r\n    public void addItem(Product customer) {\r\n\t\tlist.add(customer);\r\n\t\tcheckList.add(false);\r\n\t\tcheckList.remove(true);\r\n\t\tfireTableDataChanged();\r\n      }\r\n    \r\n\t@Override\r\n\tpublic int getColumnCount() {\r\n\t\t\treturn 6;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int getRowCount() {\r\n\t\treturn list.size();\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic Object getValueAt(int rowIndex, int columnIndex) {\r\n\t\tObject obj = null;\r\n\t\t\r\n\t\tif(columnIndex==4){\r\n\t\t\tsetTotal(list.get(rowIndex));\r\n\t\t}\r\n\t\t\r\n\t\tswitch (columnIndex){\r\n\t\t\tcase 0: obj= list.get(rowIndex).getCode() ;break;\r\n\t\t\tcase 1: obj=list.get(rowIndex).getDescription(); break;\r\n\t\t\tcase 2: obj=list.get(rowIndex).getQuantity();break;\r\n\t\t\tcase 3: obj=list.get(rowIndex).getPrice();break;\t\t\t\r\n\t\t\tcase 4: obj=list.get(rowIndex).getTotal();break;\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Class&lt;?&gt; getColumnClass(int arg0) {\r\n\t\r\n\t\tswitch(arg0){\r\n\t\tcase 0: case 1: return String.class; \r\n\t\tcase 2: return Integer.class; \r\n\t\tcase 3: case 4: return Double.class;\r\n\t  \r\n\t\t//case 5: return ImageIcon.class;\r\n\t\t}\r\n\t\treturn super.getColumnClass(arg0);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic boolean isCellEditable(int arg0, int arg1) {\r\n\t\tboolean isCellEditable = false;\r\n\t\tswitch(arg1){\r\n\t\tcase 2: case 3: isCellEditable= true;break;\r\n\t\tdefault: isCellEditable= false;break;\r\n\t\t}\r\n\t\treturn isCellEditable;\r\n\t\t//return super.isCellEditable(arg0, arg1);\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void setValueAt(Object arg0, int arg1, int arg2) {\r\n\t\tSystem.out.println(&quot;Value seted&quot; +arg0 + arg1 + arg2);\r\n\t\t\r\n\t\tswitch(arg2){\r\n\t\tcase 0: break;\r\n\t\tcase 1: break;\r\n\t\tcase 2: list.get(arg1).setQuantity((Integer)arg0); setTotal(list.get(arg1)); break;\r\n\t\tcase 3: list.get(arg1).setPrice((Double)arg0); setTotal(list.get(arg1));break;\t\t\t\r\n\t\tcase 4: list.get(arg1).setTotal((Double)arg0);break;\r\n\t\t\r\n\t\t   //case 0: checkList.set(arg1, (Boolean)arg0);break;\r\n\t\t   default:break;\r\n\t\t}\r\n\t\t\r\n\t\tfireTableDataChanged();\r\n\t}\r\n\t\r\n\tpublic LinkedList&lt;Product&gt; getList() {\r\n\t\tLinkedList&lt;Product&gt; temp = new LinkedList&lt;Product&gt;();\r\n\t\tint index=-1;\r\n\t\tfor(Boolean isSelected:checkList){\r\n\t\t\tindex++;\r\n\t\t\tif(isSelected){\r\n\t\t\t\ttemp.add(list.get(index));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn temp;\r\n\t}\r\n\t\r\n\tpublic void deleteRow(int rowNubmer)\r\n\t{\r\n\t\tlist.remove(rowNubmer);\t\t\r\n\t\tfireTableDataChanged();\r\n\t}\r\n\r\n\tpublic void setTotal(Product product){\r\n\t\tDouble total = 0.0d;\r\n\t\ttotal = product.getQuantity ()* product.getPrice();\r\n\t\tproduct.setTotal(total);\r\n\t\t\r\n\t}\r\n\t@Override\r\n\tpublic void fireTableDataChanged() {\r\n\t\tsuper.fireTableDataChanged();\t\t\r\n\t\t\r\n\t}\r\n\r\n\t\r\n\t\r\nI have a table model like above. I want to add image icon in table cell and want to delete cell when that icon is pressed. How can I do with this code?\r\nPlease give me full description over this.\r\n","title":"How to set up icon in JTable cell?","body":"<p>I am trying to add image Icon in Jtable's cell. I have a code as mentioned below. What should I do for that?</p>\n\n<pre><code>package com.orb;\nprivate final LinkedList&lt;Product&gt; list= new LinkedList&lt;Product&gt;();\nprivate final LinkedList&lt;Boolean&gt; checkList = new LinkedList&lt;Boolean&gt;();\npublic void addItem(Product customer) {\n    list.add(customer);\n    checkList.add(false);\n    checkList.remove(true);\n    fireTableDataChanged();\n  }\n\n@Override\npublic int getColumnCount() {\n        return 6;\n}\n\n@Override\npublic int getRowCount() {\n    return list.size();\n}\n\n@Override\npublic Object getValueAt(int rowIndex, int columnIndex) {\n    Object obj = null;\n\n    if(columnIndex==4){\n        setTotal(list.get(rowIndex));\n    }\n\n    switch (columnIndex){\n        case 0: obj= list.get(rowIndex).getCode() ;break;\n        case 1: obj=list.get(rowIndex).getDescription(); break;\n        case 2: obj=list.get(rowIndex).getQuantity();break;\n        case 3: obj=list.get(rowIndex).getPrice();break;            \n        case 4: obj=list.get(rowIndex).getTotal();break;\n    }\n    return obj;\n}\n\n@Override\npublic Class&lt;?&gt; getColumnClass(int arg0) {\n\n    switch(arg0){\n    case 0: case 1: return String.class; \n    case 2: return Integer.class; \n    case 3: case 4: return Double.class;\n\n    //case 5: return ImageIcon.class;\n    }\n    return super.getColumnClass(arg0);\n}\n\n@Override\npublic boolean isCellEditable(int arg0, int arg1) {\n    boolean isCellEditable = false;\n    switch(arg1){\n    case 2: case 3: isCellEditable= true;break;\n    default: isCellEditable= false;break;\n    }\n    return isCellEditable;\n    //return super.isCellEditable(arg0, arg1);\n}\n\n@Override\npublic void setValueAt(Object arg0, int arg1, int arg2) {\n    System.out.println(\"Value seted\" +arg0 + arg1 + arg2);\n\n    switch(arg2){\n    case 0: break;\n    case 1: break;\n    case 2: list.get(arg1).setQuantity((Integer)arg0); setTotal(list.get(arg1)); break;\n    case 3: list.get(arg1).setPrice((Double)arg0); setTotal(list.get(arg1));break;          \n    case 4: list.get(arg1).setTotal((Double)arg0);break;\n\n       //case 0: checkList.set(arg1, (Boolean)arg0);break;\n       default:break;\n    }\n\n    fireTableDataChanged();\n}\n\npublic LinkedList&lt;Product&gt; getList() {\n    LinkedList&lt;Product&gt; temp = new LinkedList&lt;Product&gt;();\n    int index=-1;\n    for(Boolean isSelected:checkList){\n        index++;\n        if(isSelected){\n            temp.add(list.get(index));\n        }\n    }\n    return temp;\n}\n\npublic void deleteRow(int rowNubmer)\n{\n    list.remove(rowNubmer);     \n    fireTableDataChanged();\n}\n\npublic void setTotal(Product product){\n    Double total = 0.0d;\n    total = product.getQuantity ()* product.getPrice();\n    product.setTotal(total);\n\n}\n@Override\npublic void fireTableDataChanged() {\n    super.fireTableDataChanged();       \n\n}\n</code></pre>\n\n<p>I have a table model like above. I want to add image icon in table cell and want to delete cell when that icon is pressed. How can I do with this code?\nPlease give me full description over this.</p>\n"},{"tags":["java","spring-boot","junit","dto","spring-test"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672323364,"post_id":74952172,"comment_id":132267411,"body_markdown":"Please read: [Why is “Can someone help me?” not an actual question?](https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question) --- &quot;*i expect a solution to be working*&quot; - I suggest [edit]ing and rephrasing this part of the post. Having expectations on a Q&amp;A site where the community provides help for free is an attitude that is not well regarded around here.","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is “Can someone help me?” not an actual question?</a> --- &quot;<i>i expect a solution to be working</i>&quot; - I suggest <a href=\"https://stackoverflow.com/posts/74952172/edit\">edit</a>ing and rephrasing this part of the post. Having expectations on a Q&amp;A site where the community provides help for free is an attitude that is not well regarded around here."},{"owner":{"account_id":24147898,"reputation":1,"user_id":18113193,"display_name":"MR Int"},"score":0,"creation_date":1672324414,"post_id":74952172,"comment_id":132267724,"body_markdown":"i did edit it as you asked for","body":"i did edit it as you asked for"}],"owner":{"account_id":24147898,"reputation":1,"user_id":18113193,"display_name":"MR Int"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672340763,"creation_date":1672323005,"question_id":74952172,"body_markdown":"\r\n\r\n`org.springframework.web.util.NestedServletException: Request processing failed`\r\n\r\nGet this exception error when try to execute Junit Test for restApi method to DeleteById\r\n\r\nthe problem that in Controller implements when i change return type of method from DeviceTO to device it works but i need to be returned as DeviceTO (DTO) so i faced this issue : \r\n\r\n    org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException\r\n\r\n\r\n\r\nPlease help me \r\n\r\nthis is the code for test class:\r\n\r\n\r\n\r\n```\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    @EnableWebMvc\r\n    public class DeviceControllerFacadeTest {\r\n    \r\n    @Mock\r\n    DeviceServiceImpl deviceServiceMock;\r\n    @MockBean\r\n    DeviceControllerFacadeImpl deviceControllerFacade = new DeviceControllerFacadeImpl();\r\n    \r\n    MockMvc mockMvc;\r\n\r\n\r\n    /**\r\n     * \r\n     */\r\n    @Before\r\n    public void setUp() {\r\n\r\n        MockitoAnnotations.initMocks(this);\r\n        mockMvc = MockMvcBuilders.standaloneSetup(deviceControllerFacade)\r\n                .build();\r\n\r\n    }\r\n\r\n    /**\r\n     * @throws java.lang.Exception\r\n     */\r\n\r\n    @After\r\n    public void tearDown()\r\n            throws Exception\r\n    {\r\n    }\r\n\r\n    \r\n    /**\r\n     * @throws Exception\r\n     */\r\n    @Test\r\n    public void DeleteDeviceById()\r\n            throws Exception\r\n    {\r\n            mockMvc.perform(MockMvcRequestBuilders\r\n                    .delete(&quot;/device/delete?id=336&quot;).accept(MediaType.APPLICATION_JSON)\r\n                              .contentType(MediaType.APPLICATION_JSON))\r\n                              .andDo(MockMvcResultHandlers.print());\r\n     \r\n    }\r\n    \r\n    \r\n```\r\n\r\n\r\nand this is the controller interface :\r\n\r\n\r\n```\r\n    @DeleteMapping(&quot;/delete&quot;)\r\n    DeviceTO deleteDevice(@RequestParam(&quot;id&quot;) long id);\r\n```\r\n\r\nand this is for Controller implements class:\r\n\r\n\r\n```\r\n     @Override\r\n     public DeviceTO  deleteDevice(long id)\r\n    {\r\n      \r\n\r\n        try {\r\n\r\n            begin();\r\n\r\n            Device device = deviceService.getEntity(id);\r\n\r\n            //deviceService.delete(device);\r\n            DeviceTO deviceTO = new DeviceTO();\r\n            deviceTO.mergeEntityToTransferObject(device);\r\n            commit();\r\n            return deviceTO;\r\n\r\n        } catch (\r\n\r\n        final Exception exception) {\r\n            LOG.error(exception.getMessage(), exception);\r\n            throw  exception;\r\n\r\n        } finally {\r\n            cleanupTransaction();\r\n\r\n        }\r\n    }\r\n```\r\n\r\nThank you for helping\r\n\r\nI need this issue of exception will never appear again and the Test of method deleteById worked and return the device are deleted and the return type is DeviceTO not Device.\r\n\r\nThank you for helping.","title":"Junit Test got error NestedServletException when try to excute Junit Test for RestApi DeleteById","body":"<p><code>org.springframework.web.util.NestedServletException: Request processing failed</code></p>\n<p>Get this exception error when try to execute Junit Test for restApi method to DeleteById</p>\n<p>the problem that in Controller implements when i change return type of method from DeviceTO to device it works but i need to be returned as DeviceTO (DTO) so i faced this issue :</p>\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.NullPointerException\n</code></pre>\n<p>Please help me</p>\n<p>this is the code for test class:</p>\n<pre><code>\n    @RunWith(MockitoJUnitRunner.class)\n    @EnableWebMvc\n    public class DeviceControllerFacadeTest {\n    \n    @Mock\n    DeviceServiceImpl deviceServiceMock;\n    @MockBean\n    DeviceControllerFacadeImpl deviceControllerFacade = new DeviceControllerFacadeImpl();\n    \n    MockMvc mockMvc;\n\n\n    /**\n     * \n     */\n    @Before\n    public void setUp() {\n\n        MockitoAnnotations.initMocks(this);\n        mockMvc = MockMvcBuilders.standaloneSetup(deviceControllerFacade)\n                .build();\n\n    }\n\n    /**\n     * @throws java.lang.Exception\n     */\n\n    @After\n    public void tearDown()\n            throws Exception\n    {\n    }\n\n    \n    /**\n     * @throws Exception\n     */\n    @Test\n    public void DeleteDeviceById()\n            throws Exception\n    {\n            mockMvc.perform(MockMvcRequestBuilders\n                    .delete(&quot;/device/delete?id=336&quot;).accept(MediaType.APPLICATION_JSON)\n                              .contentType(MediaType.APPLICATION_JSON))\n                              .andDo(MockMvcResultHandlers.print());\n     \n    }\n    \n    \n</code></pre>\n<p>and this is the controller interface :</p>\n<pre><code>    @DeleteMapping(&quot;/delete&quot;)\n    DeviceTO deleteDevice(@RequestParam(&quot;id&quot;) long id);\n</code></pre>\n<p>and this is for Controller implements class:</p>\n<pre><code>     @Override\n     public DeviceTO  deleteDevice(long id)\n    {\n      \n\n        try {\n\n            begin();\n\n            Device device = deviceService.getEntity(id);\n\n            //deviceService.delete(device);\n            DeviceTO deviceTO = new DeviceTO();\n            deviceTO.mergeEntityToTransferObject(device);\n            commit();\n            return deviceTO;\n\n        } catch (\n\n        final Exception exception) {\n            LOG.error(exception.getMessage(), exception);\n            throw  exception;\n\n        } finally {\n            cleanupTransaction();\n\n        }\n    }\n</code></pre>\n<p>Thank you for helping</p>\n<p>I need this issue of exception will never appear again and the Test of method deleteById worked and return the device are deleted and the return type is DeviceTO not Device.</p>\n<p>Thank you for helping.</p>\n"},{"tags":["java","android","api","google-maps","google-cloud-platform"],"comments":[{"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"score":1,"creation_date":1650076406,"post_id":71889465,"comment_id":127037072,"body_markdown":"Your code appears to lack the code that makes the request and evidently this lacks the required API key. You will need a Google Project and have enabled the Maps API and created an API (suitablly restricted). The API key can be plugged into the request generator to authenticate your code. Have a look at Google&#39;s extensive [documentation](https://developers.google.com/maps/documentation/geocoding/start) where this is all explained.","body":"Your code appears to lack the code that makes the request and evidently this lacks the required API key. You will need a Google Project and have enabled the Maps API and created an API (suitablly restricted). The API key can be plugged into the request generator to authenticate your code. Have a look at Google&#39;s extensive <a href=\"https://developers.google.com/maps/documentation/geocoding/start\" rel=\"nofollow noreferrer\">documentation</a> where this is all explained."},{"owner":{"account_id":22894137,"reputation":285,"user_id":17033887,"display_name":"saad tabban"},"score":0,"creation_date":1650094582,"post_id":71889465,"comment_id":127039183,"body_markdown":"thank you @DazWilkin I did as you said but the same problem appears I try this URL:\n`https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;key=YOUR_API_KEY` But it gave me the same output on the browser:\n`&quot;error_message&quot; : &quot;You must use an API key to authenticate each request to Google Maps Platform APIs. For additional information, please refer to http://g.co/dev/maps-no-account&quot;,\n       &quot;results&quot; : [],\n       &quot;status&quot; : &quot;REQUEST_DENIED}`","body":"thank you @DazWilkin I did as you said but the same problem appears I try this URL: <code>https:&#47;&#47;maps.googleapis.com&#47;maps&#47;api&#47;geocode&#47;json?address=16&zwnj;&#8203;00+Amphitheatre+Park&zwnj;&#8203;way,+Mountain+View,+&zwnj;&#8203;CA&amp;key=YOUR_API_KEY</code> But it gave me the same output on the browser: <code>&quot;error_message&quot; : &quot;You must use an API key to authenticate each request to Google Maps Platform APIs. For additional information, please refer to http:&#47;&#47;g.co&#47;dev&#47;maps-no-account&quot;,        &quot;results&quot; : [],        &quot;status&quot; : &quot;REQUEST_DENIED}</code>"},{"owner":{"account_id":22894137,"reputation":285,"user_id":17033887,"display_name":"saad tabban"},"score":0,"creation_date":1650095173,"post_id":71889465,"comment_id":127039258,"body_markdown":"@DazWilkin\nIs there a possibility that it doesn&#39;t work because this service isn&#39;t free?\nOr may I have to convert the account to a billing account?","body":"@DazWilkin Is there a possibility that it doesn&#39;t work because this service isn&#39;t free? Or may I have to convert the account to a billing account?"},{"owner":{"account_id":301516,"reputation":34141,"user_id":609290,"accept_rate":62,"display_name":"DazWilkin"},"score":1,"creation_date":1650126760,"post_id":71889465,"comment_id":127045225,"body_markdown":"Yes, that may be the case. The [Geocoding API](https://console.cloud.google.com/apis/library/geocoding-backend.googleapis.com) does not appear to provide a free tier (although there&#39;s usage for free when you pay)","body":"Yes, that may be the case. The <a href=\"https://console.cloud.google.com/apis/library/geocoding-backend.googleapis.com\" rel=\"nofollow noreferrer\">Geocoding API</a> does not appear to provide a free tier (although there&#39;s usage for free when you pay)"},{"owner":{"account_id":22894137,"reputation":285,"user_id":17033887,"display_name":"saad tabban"},"score":0,"creation_date":1650248341,"post_id":71889465,"comment_id":127064848,"body_markdown":"Ok so that&#39;s it thank you @DazWilkin","body":"Ok so that&#39;s it thank you @DazWilkin"}],"answers":[{"tags":[],"owner":{"account_id":27385454,"reputation":1,"user_id":20889360,"display_name":"RKD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672340129,"creation_date":1672340129,"answer_id":74955047,"question_id":71889465,"body_markdown":"I had the same issue calling geocode via application. So wanted to ensure the same was repeated via postman. The result confirmed, that we need to ensure steps are followed on Google API mandated restrictions as basic. \r\n\r\nAdditional security using Current secret Key is also given. If you don&#39;t want to use the additional current secret you can disable it or delete it. \r\n\r\nErrors Reported\r\n--------------------\r\nCase-1\r\n&quot;error_message&quot;: &quot;You must use an API key to authenticate each request to Google Maps Platform APIs. For additional information, please refer to http://g.co/dev/maps-no-account&quot;,\r\n    &quot;results&quot;: [],\r\n    &quot;status&quot;: &quot;REQUEST_DENIED&quot;\r\n\r\nCase-2\r\n{\r\n    &quot;error_message&quot;: &quot;API keys with referer restrictions cannot be used with this API.&quot;,\r\n    &quot;results&quot;: [],\r\n    &quot;status&quot;: &quot;REQUEST_DENIED&quot;\r\n}\r\n\r\nRemove Restriction on going to --&gt; https://console.cloud.google.com/google/maps-apis\r\nAs in below options.\r\n\r\nApplication restrictions\r\n--------------------------\r\nAn application restriction controls which websites,IP addresses,or applications can use your API key. \r\n\r\nYou can set one application restriction per key.\r\n1)None\r\n2)HTTP referrers (web sites) --&gt;  //I chose this one for my case.\r\n3)IP addresses (web servers, cron jobs, etc.)\r\n4)Android apps\r\n5)iOS apps\r\n\r\n\r\nWebsite Restrictions\r\nRestrict key usage requests to the specified websites.\r\neg: give https://&lt;your website&gt;:port/ or https://&lt;your website&gt;\r\n\r\nIf left blank, your API key will accept requests from any website.\r\n\r\nI hope this helps.\r\nRegards,\r\nRKD\r\n\r\n\r\n","title":"How to use API keys to Authenticate Requests From an API","body":"<p>I had the same issue calling geocode via application. So wanted to ensure the same was repeated via postman. The result confirmed, that we need to ensure steps are followed on Google API mandated restrictions as basic.</p>\n<p>Additional security using Current secret Key is also given. If you don't want to use the additional current secret you can disable it or delete it.</p>\n<h2>Errors Reported</h2>\n<p>Case-1\n&quot;error_message&quot;: &quot;You must use an API key to authenticate each request to Google Maps Platform APIs. For additional information, please refer to <a href=\"http://g.co/dev/maps-no-account%22\" rel=\"nofollow noreferrer\">http://g.co/dev/maps-no-account&quot;</a>,\n&quot;results&quot;: [],\n&quot;status&quot;: &quot;REQUEST_DENIED&quot;</p>\n<p>Case-2\n{\n&quot;error_message&quot;: &quot;API keys with referer restrictions cannot be used with this API.&quot;,\n&quot;results&quot;: [],\n&quot;status&quot;: &quot;REQUEST_DENIED&quot;\n}</p>\n<p>Remove Restriction on going to --&gt; <a href=\"https://console.cloud.google.com/google/maps-apis\" rel=\"nofollow noreferrer\">https://console.cloud.google.com/google/maps-apis</a>\nAs in below options.</p>\n<h2>Application restrictions</h2>\n<p>An application restriction controls which websites,IP addresses,or applications can use your API key.</p>\n<p>You can set one application restriction per key.\n1)None\n2)HTTP referrers (web sites) --&gt;  //I chose this one for my case.\n3)IP addresses (web servers, cron jobs, etc.)\n4)Android apps\n5)iOS apps</p>\n<p>Website Restrictions\nRestrict key usage requests to the specified websites.\neg: give https://:port/ or https://</p>\n<p>If left blank, your API key will accept requests from any website.</p>\n<p>I hope this helps.\nRegards,\nRKD</p>\n"}],"owner":{"account_id":22894137,"reputation":285,"user_id":17033887,"display_name":"saad tabban"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3221,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672340129,"creation_date":1650061343,"question_id":71889465,"body_markdown":"I&#39;m Trying to get the latitude and longitude of an address using the Geocoding API.\r\nThat&#39;s my code:\r\n\r\n    JSONObject jsonObject = new JSONObject(response.body().toString());\r\n                            Toast.makeText(TrackingOrder.this, jsonObject + &quot; &quot;, Toast.LENGTH_SHORT).show();\r\n                            String lat = ((JSONArray) jsonObject.get(&quot;results&quot;))\r\n                                    .getJSONObject(0)\r\n                                    .getJSONObject(&quot;geometry&quot;)\r\n                                    .getJSONObject(&quot;location&quot;)\r\n                                    .get(&quot;lat&quot;).toString();\r\n                            String lng = ((JSONArray) jsonObject.get(&quot;results&quot;))\r\n                                    .getJSONObject(0)\r\n                                    .getJSONObject(&quot;geometry&quot;)\r\n                                    .getJSONObject(&quot;location&quot;)\r\n                                    .get(&quot;lng&quot;).toString();\r\n\r\n\r\nThe Problem is I&#39;m receiving &quot;Access Denied&quot; response\r\n\r\n   \r\n\r\n     &quot;error_message&quot; : &quot;You must use an API key to authenticate each request to Google Maps Platform APIs. For additional information, please refer to http://g.co/dev/maps-no-account&quot;,\r\n           &quot;results&quot; : [],\r\n           &quot;status&quot; : &quot;REQUEST_DENIED&quot;\r\n        }\r\n\r\nI Generate an API Key, restrict it, link it with my android app (Name,SHA)and enable Geocoding API\r\nI try to call this request on the Browser the same problem(the same Output):\r\n\r\n    https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;key=YOUR_API_KEY","title":"How to use API keys to Authenticate Requests From an API","body":"<p>I'm Trying to get the latitude and longitude of an address using the Geocoding API.\nThat's my code:</p>\n<pre><code>JSONObject jsonObject = new JSONObject(response.body().toString());\n                        Toast.makeText(TrackingOrder.this, jsonObject + &quot; &quot;, Toast.LENGTH_SHORT).show();\n                        String lat = ((JSONArray) jsonObject.get(&quot;results&quot;))\n                                .getJSONObject(0)\n                                .getJSONObject(&quot;geometry&quot;)\n                                .getJSONObject(&quot;location&quot;)\n                                .get(&quot;lat&quot;).toString();\n                        String lng = ((JSONArray) jsonObject.get(&quot;results&quot;))\n                                .getJSONObject(0)\n                                .getJSONObject(&quot;geometry&quot;)\n                                .getJSONObject(&quot;location&quot;)\n                                .get(&quot;lng&quot;).toString();\n</code></pre>\n<p>The Problem is I'm receiving &quot;Access Denied&quot; response</p>\n<pre><code> &quot;error_message&quot; : &quot;You must use an API key to authenticate each request to Google Maps Platform APIs. For additional information, please refer to http://g.co/dev/maps-no-account&quot;,\n       &quot;results&quot; : [],\n       &quot;status&quot; : &quot;REQUEST_DENIED&quot;\n    }\n</code></pre>\n<p>I Generate an API Key, restrict it, link it with my android app (Name,SHA)and enable Geocoding API\nI try to call this request on the Browser the same problem(the same Output):</p>\n<pre><code>https://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&amp;key=YOUR_API_KEY\n</code></pre>\n"},{"tags":["java","android","android-studio","menu","textview"],"comments":[{"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"score":0,"creation_date":1672346265,"post_id":74955032,"comment_id":132273648,"body_markdown":"Please provide the full stacktrace of the exception","body":"Please provide the full stacktrace of the exception"},{"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"score":0,"creation_date":1672364604,"post_id":74955032,"comment_id":132276833,"body_markdown":"Null is returned in `getActionView()` call, so calling `Null.findViewById(R.id.total_mailbox)` throws  null pointer exception.","body":"Null is returned in <code>getActionView()</code> call, so calling <code>Null.findViewById(R.id.total_mailbox)</code> throws  null pointer exception."},{"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"score":0,"creation_date":1672364664,"post_id":74955032,"comment_id":132276842,"body_markdown":"Suggest take a look to this to see whether it helps. https://stackoverflow.com/questions/14286768/getactionview-of-my-menuitem-return-null","body":"Suggest take a look to this to see whether it helps. <a href=\"https://stackoverflow.com/questions/14286768/getactionview-of-my-menuitem-return-null\" title=\"getactionview of my menuitem return null\">stackoverflow.com/questions/14286768/&hellip;</a>"}],"owner":{"account_id":16093327,"reputation":300,"user_id":12632670,"display_name":"chris oojer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672340004,"creation_date":1672340004,"question_id":74955032,"body_markdown":"I am working on my java snippet that I want to check if the TextView in the menu is exist or not. If the textview is not exist then I want to return it as a null so I could do something.\r\n\r\nWhen I try this:\r\n\r\n    if (total_inbox_unread &gt; 0) {\r\n        @SuppressLint(&quot;ResourceType&quot;) TextView total_inbox_tv = (TextView) \r\n        menu.getItem(0).getActionView().findViewById(R.id.total_mailbox);\r\n    }\r\n    \r\n    if (total_inbox_tv == null) {\r\n        ...do something\r\n    }\r\n\r\n\r\n\r\nI am getting this:\r\n\r\nProcess: com.loginpage, PID: 29159\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;android.view.View android.view.View.findViewById(int)&#39; on a null object reference\r\n\r\n\r\nHere is the full code:\r\n\r\n        NavigationView navigationView = (NavigationView) \r\n        _fragment.getActivity().findViewById(R.id.nav_view);\r\n        Menu menu = (Menu) navigationView.getMenu();\r\n        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService\r\n             (Context.LAYOUT_INFLATER_SERVICE);\r\n        LinearLayout linearLayout = (LinearLayout) inflater.inflate(R.layout.menu_items, null);\r\n    \r\n    \r\n        if (total_inbox_unread &gt; 0) {\r\n              @SuppressLint(&quot;ResourceType&quot;) TextView total_inbox_tv = (TextView) menu.getItem(0).getActionView().findViewById(R.id.total_mailbox);\r\n              //LinearLayout mailbox_layout = (LinearLayout) menu.getItem(0).getActionView().findViewById(R.id.mailbox_layout);\r\n    \r\n              if (total_inbox_tv == null) {\r\n                  //LinearLayout linearLayout = (LinearLayout) inflater.inflate(R.layout.menu_items, null);\r\n                  //TextView total_mailbox_tv = (TextView) linearLayout.findViewById(R.id.total_mailbox);\r\n                  total_inbox_tv = linearLayout.findViewById(R.id.total_mailbox);\r\n                  int total_mailbox = total_inbox_unread;\r\n                  total_inbox_tv.setText(Integer.toString(total_mailbox));\r\n                  total_inbox_tv.setTextColor(ContextCompat.getColor(mContext, R.color.black));\r\n                  menu.getItem(0).setActionView(linearLayout);\r\n              }\r\n              else\r\n              {\r\n                  int total_inbox = Integer.parseInt(total_inbox_tv.getText().toString());\r\n    \r\n                  if (total_inbox_unread &gt; total_inbox) {\r\n                      total_inbox_tv.setText(Integer.toString(total_inbox_unread));\r\n                  }\r\n                  else if (total_inbox_unread &lt; total_inbox) {\r\n                      total_inbox_tv.setText(Integer.toString(total_inbox_unread));\r\n                  }\r\n              }\r\n          }\r\n          else if (total_inbox_unread == 0) {\r\n               if (!(menu.getItem(0).getActionView().findViewById(R.id.total_mailbox) == null)) {\r\n                     LinearLayout inbox_layout = (LinearLayout) menu.getItem(0).getActionView().findViewById(R.id.mailbox_layout);\r\n                     TextView total_inbox_tv = (TextView) menu.getItem(0).getActionView().findViewById(R.id.total_mailbox);\r\n                     int total_inbox = Integer.parseInt(total_inbox_tv.getText().toString());\r\n    \r\n                     if (total_inbox &gt;= 1) {\r\n                        inbox_layout.removeAllViews();\r\n                        inbox_layout.invalidate();\r\n                     }\r\n                 }\r\n             }\r\n\r\nThere is no textview in the subgroup under the menu. I can only add the submenu \r\n\r\nHow I can get the textview to return as a null when I have no textview in the menu??\r\n\r\nThank you.","title":"Check textview and get it return as a null","body":"<p>I am working on my java snippet that I want to check if the TextView in the menu is exist or not. If the textview is not exist then I want to return it as a null so I could do something.</p>\n<p>When I try this:</p>\n<pre><code>if (total_inbox_unread &gt; 0) {\n    @SuppressLint(&quot;ResourceType&quot;) TextView total_inbox_tv = (TextView) \n    menu.getItem(0).getActionView().findViewById(R.id.total_mailbox);\n}\n\nif (total_inbox_tv == null) {\n    ...do something\n}\n</code></pre>\n<p>I am getting this:</p>\n<p>Process: com.loginpage, PID: 29159\njava.lang.NullPointerException: Attempt to invoke virtual method 'android.view.View android.view.View.findViewById(int)' on a null object reference</p>\n<p>Here is the full code:</p>\n<pre><code>    NavigationView navigationView = (NavigationView) \n    _fragment.getActivity().findViewById(R.id.nav_view);\n    Menu menu = (Menu) navigationView.getMenu();\n    LayoutInflater inflater = (LayoutInflater) mContext.getSystemService\n         (Context.LAYOUT_INFLATER_SERVICE);\n    LinearLayout linearLayout = (LinearLayout) inflater.inflate(R.layout.menu_items, null);\n\n\n    if (total_inbox_unread &gt; 0) {\n          @SuppressLint(&quot;ResourceType&quot;) TextView total_inbox_tv = (TextView) menu.getItem(0).getActionView().findViewById(R.id.total_mailbox);\n          //LinearLayout mailbox_layout = (LinearLayout) menu.getItem(0).getActionView().findViewById(R.id.mailbox_layout);\n\n          if (total_inbox_tv == null) {\n              //LinearLayout linearLayout = (LinearLayout) inflater.inflate(R.layout.menu_items, null);\n              //TextView total_mailbox_tv = (TextView) linearLayout.findViewById(R.id.total_mailbox);\n              total_inbox_tv = linearLayout.findViewById(R.id.total_mailbox);\n              int total_mailbox = total_inbox_unread;\n              total_inbox_tv.setText(Integer.toString(total_mailbox));\n              total_inbox_tv.setTextColor(ContextCompat.getColor(mContext, R.color.black));\n              menu.getItem(0).setActionView(linearLayout);\n          }\n          else\n          {\n              int total_inbox = Integer.parseInt(total_inbox_tv.getText().toString());\n\n              if (total_inbox_unread &gt; total_inbox) {\n                  total_inbox_tv.setText(Integer.toString(total_inbox_unread));\n              }\n              else if (total_inbox_unread &lt; total_inbox) {\n                  total_inbox_tv.setText(Integer.toString(total_inbox_unread));\n              }\n          }\n      }\n      else if (total_inbox_unread == 0) {\n           if (!(menu.getItem(0).getActionView().findViewById(R.id.total_mailbox) == null)) {\n                 LinearLayout inbox_layout = (LinearLayout) menu.getItem(0).getActionView().findViewById(R.id.mailbox_layout);\n                 TextView total_inbox_tv = (TextView) menu.getItem(0).getActionView().findViewById(R.id.total_mailbox);\n                 int total_inbox = Integer.parseInt(total_inbox_tv.getText().toString());\n\n                 if (total_inbox &gt;= 1) {\n                    inbox_layout.removeAllViews();\n                    inbox_layout.invalidate();\n                 }\n             }\n         }\n</code></pre>\n<p>There is no textview in the subgroup under the menu. I can only add the submenu</p>\n<p>How I can get the textview to return as a null when I have no textview in the menu??</p>\n<p>Thank you.</p>\n"},{"tags":["java","2d","game-development"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1672339252,"post_id":74954882,"comment_id":132271902,"body_markdown":"`if(key_Handler.upMove = true)` is using the assignment operator `=`. So you are setting the value to true and then use that as a condition. Comparing is done via the `==` operator and for boolean values not even necessary. Change it to just `if(key_Handler.upMove)`","body":"<code>if(key_Handler.upMove = true)</code> is using the assignment operator <code>=</code>. So you are setting the value to true and then use that as a condition. Comparing is done via the <code>==</code> operator and for boolean values not even necessary. Change it to just <code>if(key_Handler.upMove)</code>"}],"answers":[{"tags":[],"owner":{"account_id":12074979,"reputation":129,"user_id":8828811,"display_name":"Aliics"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672339409,"creation_date":1672339409,"answer_id":74954939,"question_id":74954882,"body_markdown":"After a quick skim, I think I found the culprit:\r\n\r\n    if (key_Handler.upMove = true) {\r\n        player_y -= player_speed;\r\n    }\r\n\r\nRemember that for comparisons in C-style languages, you need double equals (==), or better yet, just put `key_handler.upMove` in the parenthesis alone because it is already a boolean. So change your if statements to look like the following:\r\n\r\n    if (key_Handler.upMove) { // or key_Handler.upMove == true if you prefer.\r\n        player_y -= player_speed;\r\n    }\r\n\r\nYour code was assigning `key_handler.upMove` to true and using that in your if statement.","title":"Why my 2-D character moves up, even though I did not even pressed keys?","body":"<p>After a quick skim, I think I found the culprit:</p>\n<pre><code>if (key_Handler.upMove = true) {\n    player_y -= player_speed;\n}\n</code></pre>\n<p>Remember that for comparisons in C-style languages, you need double equals (==), or better yet, just put <code>key_handler.upMove</code> in the parenthesis alone because it is already a boolean. So change your if statements to look like the following:</p>\n<pre><code>if (key_Handler.upMove) { // or key_Handler.upMove == true if you prefer.\n    player_y -= player_speed;\n}\n</code></pre>\n<p>Your code was assigning <code>key_handler.upMove</code> to true and using that in your if statement.</p>\n"},{"tags":[],"owner":{"account_id":6176272,"reputation":1081,"user_id":4813049,"accept_rate":25,"display_name":"Hokkyokusei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672339636,"creation_date":1672339636,"answer_id":74954981,"question_id":74954882,"body_markdown":"Rather than using: \r\n\r\n    if (key_Handler.upMove = true) {\r\n        player_y -= player_speed;\r\n    }\r\n\r\nUse: \r\n\r\n    if (key_Handler.upMove) {\r\n        player_y -= player_speed;\r\n    }\r\n\r\nAnd the same for other conditions as well.","title":"Why my 2-D character moves up, even though I did not even pressed keys?","body":"<p>Rather than using:</p>\n<pre><code>if (key_Handler.upMove = true) {\n    player_y -= player_speed;\n}\n</code></pre>\n<p>Use:</p>\n<pre><code>if (key_Handler.upMove) {\n    player_y -= player_speed;\n}\n</code></pre>\n<p>And the same for other conditions as well.</p>\n"}],"owner":{"account_id":27385327,"reputation":11,"user_id":20889270,"display_name":"jrsmith_of_math"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1672342563,"accepted_answer_id":74954939,"answer_count":2,"score":-1,"last_activity_date":1672339636,"creation_date":1672339021,"question_id":74954882,"body_markdown":"I was learning how to make 2-D games for self-development by reference to the [https://www.youtube.com/watch?v=VpH33Uw-_0E&amp;list=PL_QPQmz5C6WUF-pOQDsbsKbaBZqXj4qSq&amp;index=2]\r\n\r\nSo at the below, you will see three simple class codes. I checked every line but still, when I run the game, white rectangle directly starts to move up. Any help is great kindness.\r\n\r\nMain Class \r\n----------\r\n\r\n```\r\npackage main;\r\n\r\nimport javax.swing.JFrame;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tJFrame window = new JFrame();\r\n\t\twindow.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\twindow.setResizable(false);\r\n\t\twindow.setTitle(&quot;MY 2-D GAME&quot;);\r\n\t\t\r\n\t\tGamePanel gamePanel = new GamePanel();\r\n\t\twindow.add(gamePanel);\r\n\t\t\r\n\t\twindow.pack();\r\n\t\t\r\n\t\twindow.setLocationRelativeTo(null);\r\n\t\twindow.setVisible(true);\r\n\t\t\r\n\t\tgamePanel.startGameThread();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nGamePanel Class\r\n---------------\r\n\r\n\r\n```\r\npackage main;\r\n\r\nimport javax.swing.JPanel;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\n\r\npublic class GamePanel extends JPanel implements Runnable{\r\n\tprivate static final int FPS = 60;\r\n\tfinal int originalTileSize = 16;\r\n\tfinal int scale = 3; \r\n\t\r\n\tfinal int tileSize = originalTileSize * scale; // 48x48\r\n\tfinal int maxScreenCol = 16;\r\n\tfinal int maxScreenRow = 12;\r\n\tfinal int screenWidth = tileSize * maxScreenCol;\r\n\tfinal int screenHeight = tileSize * maxScreenRow;\r\n\t\r\n\tKeyHandler key_Handler = new KeyHandler();\r\n\t\r\n\tThread gameThread;\r\n\t\r\n\tint player_x = 100;\r\n\tint player_y = 100;\r\n\tint player_speed = 4;\r\n\t\r\n\tpublic GamePanel() {\r\n\t\tthis.setPreferredSize(new Dimension(screenWidth,screenHeight));\r\n\t\tthis.setBackground(Color.black);\r\n\t\tthis.setDoubleBuffered(true);\r\n\t\tthis.addKeyListener(key_Handler);\r\n\t\tthis.setFocusable(true);\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\t\r\n\tpublic void startGameThread() {\r\n\t\tgameThread = new Thread(this);\r\n\t\tgameThread.start();\r\n\t}\r\n\r\n\t\r\n\tpublic void run() {\r\n\t\t\r\n\t\tdouble drawInterval = 1000000000/FPS;\r\n\t\tdouble delta = 0;\r\n\t\tlong lastTime = System.nanoTime();\r\n\t\t\r\n\t\tlong current_time;\r\n\t\t\t\r\n\t\twhile (gameThread != null) {\r\n\t\t\tcurrent_time = System.nanoTime();\r\n\t\t\t\r\n\t\t\tdelta += (current_time - lastTime) / drawInterval;\r\n\t\t\t\r\n\t\t\tlastTime = current_time;\r\n\t\t\t\r\n\t\t\tif (delta &gt;= 1) {\r\n\t\t\t\tupdate();\r\n\t\t\t\trepaint();\r\n\t\t\t\tdelta--;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tpublic void update() {\r\n\t\tif (key_Handler.upMove = true) {\r\n\t\t\tplayer_y -= player_speed;\r\n\t\t}\r\n\t\t\r\n\t\telse if (key_Handler.downMove = true) {\r\n\t\t\tplayer_y += player_speed;\r\n\t\t}\r\n\t\t\r\n\t\telse if (key_Handler.leftMove = true) {\r\n\t\t\tplayer_x -= player_speed;\r\n\t\t}\r\n\t\t\r\n\t\telse if (key_Handler.rightMove = true) {\r\n\t\t\tplayer_x += player_speed;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\t\r\n\t\tGraphics2D g2 = (Graphics2D) g;\r\n\t\tg2.setColor(Color.white);\r\n\t\tg2.fillRect(player_x,player_y, tileSize, tileSize);\r\n\t\tg2.dispose();\r\n\t\t\r\n\t\t\r\n\t\t \r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nKeyHandler Class \r\n---------------\r\n\r\n```\r\npackage main;\r\nimport java.awt.event.KeyEvent;\r\nimport java.awt.event.KeyListener;\r\n\r\n\r\n\r\npublic class KeyHandler implements KeyListener{\r\n\t\r\n\tpublic boolean upMove, downMove, leftMove, rightMove;\r\n\t\r\n\t\r\n\tpublic void keyTyped(KeyEvent e) {\r\n\t}\r\n\r\n\r\n\tpublic void keyPressed(KeyEvent e) {\r\n\t\tint code = e.getKeyCode();\r\n\t\t\r\n\t\tif (code == KeyEvent.VK_W) {\r\n\t\t\tupMove = true;\r\n\t\t}\r\n\t\tif (code == KeyEvent.VK_S) {\r\n\t\t\tdownMove = true;\r\n\t\t}\r\n\t\tif (code == KeyEvent.VK_A) {\r\n\t\t\tleftMove = true;\r\n\t\t}\r\n\t\tif (code == KeyEvent.VK_D) {\r\n\t\t\trightMove = true;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\r\n\r\n\tpublic void keyReleased(KeyEvent e) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tint code = e.getKeyCode();\r\n\t\t\r\n\t\tif (code == KeyEvent.VK_W) {\r\n\t\t\tupMove = false;\r\n\t\t}\r\n\t\tif (code == KeyEvent.VK_S) {\r\n\t\t\tdownMove = false;\r\n\t\t}\r\n\t\tif (code == KeyEvent.VK_A) {\r\n\t\t\tleftMove = false;\r\n\t\t}\r\n\t\tif (code == KeyEvent.VK_D) {\r\n\t\t\trightMove = false;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\r\n}\r\n\r\n```\r\n","title":"Why my 2-D character moves up, even though I did not even pressed keys?","body":"<p>I was learning how to make 2-D games for self-development by reference to the [https://www.youtube.com/watch?v=VpH33Uw-_0E&amp;list=PL_QPQmz5C6WUF-pOQDsbsKbaBZqXj4qSq&amp;index=2]</p>\n<p>So at the below, you will see three simple class codes. I checked every line but still, when I run the game, white rectangle directly starts to move up. Any help is great kindness.</p>\n<h2>Main Class</h2>\n<pre><code>package main;\n\nimport javax.swing.JFrame;\n\npublic class Main {\n    public static void main(String[] args) {\n        JFrame window = new JFrame();\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        window.setResizable(false);\n        window.setTitle(&quot;MY 2-D GAME&quot;);\n        \n        GamePanel gamePanel = new GamePanel();\n        window.add(gamePanel);\n        \n        window.pack();\n        \n        window.setLocationRelativeTo(null);\n        window.setVisible(true);\n        \n        gamePanel.startGameThread();\n    }\n\n}\n</code></pre>\n<h2>GamePanel Class</h2>\n<pre><code>package main;\n\nimport javax.swing.JPanel;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\n\npublic class GamePanel extends JPanel implements Runnable{\n    private static final int FPS = 60;\n    final int originalTileSize = 16;\n    final int scale = 3; \n    \n    final int tileSize = originalTileSize * scale; // 48x48\n    final int maxScreenCol = 16;\n    final int maxScreenRow = 12;\n    final int screenWidth = tileSize * maxScreenCol;\n    final int screenHeight = tileSize * maxScreenRow;\n    \n    KeyHandler key_Handler = new KeyHandler();\n    \n    Thread gameThread;\n    \n    int player_x = 100;\n    int player_y = 100;\n    int player_speed = 4;\n    \n    public GamePanel() {\n        this.setPreferredSize(new Dimension(screenWidth,screenHeight));\n        this.setBackground(Color.black);\n        this.setDoubleBuffered(true);\n        this.addKeyListener(key_Handler);\n        this.setFocusable(true);\n        \n        \n    }\n\n    \n    public void startGameThread() {\n        gameThread = new Thread(this);\n        gameThread.start();\n    }\n\n    \n    public void run() {\n        \n        double drawInterval = 1000000000/FPS;\n        double delta = 0;\n        long lastTime = System.nanoTime();\n        \n        long current_time;\n            \n        while (gameThread != null) {\n            current_time = System.nanoTime();\n            \n            delta += (current_time - lastTime) / drawInterval;\n            \n            lastTime = current_time;\n            \n            if (delta &gt;= 1) {\n                update();\n                repaint();\n                delta--;\n            }\n            \n        }\n        \n        \n        \n    }\n    \n    \n    public void update() {\n        if (key_Handler.upMove = true) {\n            player_y -= player_speed;\n        }\n        \n        else if (key_Handler.downMove = true) {\n            player_y += player_speed;\n        }\n        \n        else if (key_Handler.leftMove = true) {\n            player_x -= player_speed;\n        }\n        \n        else if (key_Handler.rightMove = true) {\n            player_x += player_speed;\n        }\n        \n    }\n    \n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        \n        Graphics2D g2 = (Graphics2D) g;\n        g2.setColor(Color.white);\n        g2.fillRect(player_x,player_y, tileSize, tileSize);\n        g2.dispose();\n        \n        \n         \n    }\n}\n\n</code></pre>\n<h2>KeyHandler Class</h2>\n<pre><code>package main;\nimport java.awt.event.KeyEvent;\nimport java.awt.event.KeyListener;\n\n\n\npublic class KeyHandler implements KeyListener{\n    \n    public boolean upMove, downMove, leftMove, rightMove;\n    \n    \n    public void keyTyped(KeyEvent e) {\n    }\n\n\n    public void keyPressed(KeyEvent e) {\n        int code = e.getKeyCode();\n        \n        if (code == KeyEvent.VK_W) {\n            upMove = true;\n        }\n        if (code == KeyEvent.VK_S) {\n            downMove = true;\n        }\n        if (code == KeyEvent.VK_A) {\n            leftMove = true;\n        }\n        if (code == KeyEvent.VK_D) {\n            rightMove = true;\n        }\n        \n        \n    }\n\n\n    public void keyReleased(KeyEvent e) {\n        // TODO Auto-generated method stub\n        int code = e.getKeyCode();\n        \n        if (code == KeyEvent.VK_W) {\n            upMove = false;\n        }\n        if (code == KeyEvent.VK_S) {\n            downMove = false;\n        }\n        if (code == KeyEvent.VK_A) {\n            leftMove = false;\n        }\n        if (code == KeyEvent.VK_D) {\n            rightMove = false;\n        }\n        \n    }\n\n\n\n}\n\n</code></pre>\n"},{"tags":["java","android","wearables"],"answers":[{"tags":[],"owner":{"account_id":21634603,"reputation":112,"user_id":15957694,"display_name":"Divesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672339609,"creation_date":1672339609,"answer_id":74954973,"question_id":74646104,"body_markdown":"I have a faced similar issue ! try installing the [wearOS app][1] and try again.\r\n\r\n\r\n  [1]: https://cliq.zoho.com/company/64396901/chats/2243193296531663099/messages/1672338896130_20179352974594","title":"Why do I get API: Wearable.API is not available on this device when I try to connect my handheld device app to wearable using android?","body":"<p>I have a faced similar issue ! try installing the <a href=\"https://cliq.zoho.com/company/64396901/chats/2243193296531663099/messages/1672338896130_20179352974594\" rel=\"nofollow noreferrer\">wearOS app</a> and try again.</p>\n"}],"owner":{"account_id":4258174,"reputation":100,"user_id":6272866,"display_name":"Mirou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":828,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1672339609,"creation_date":1669916773,"question_id":74646104,"body_markdown":"I am trying to build an android app that can connect to a smartwatch, I&#39;ve followed the official docs on [this page](https://developer.android.com/training/wearables/data/events) to use the DataLayer to connect both devices, right now I am struggling with finding the connected nodes so I can get the nodeId of the wearable and use it to connect to the watch.\r\n\r\nThis is what I did so far:\r\n\r\n    private Collection&lt;String&gt; getNodes() {\r\n        HashSet&lt;String&gt; results = new HashSet&lt;&gt;();\r\n    \r\n        Task&lt;List&lt;Node&gt;&gt; nodeListTask =\r\n                Wearable.getNodeClient(this).getConnectedNodes();\r\n    \r\n        try {\r\n            List&lt;Node&gt; nodes = Tasks.await(nodeListTask);\r\n    \r\n            for (Node node : nodes) {\r\n                results.add(node.getId());\r\n            }\r\n    \r\n        } catch (ExecutionException exception) {\r\n            Log.e(TAG, &quot;Task failed: &quot; + exception);\r\n    \r\n        } catch (InterruptedException exception) {\r\n            Log.e(TAG, &quot;Interrupt occurred: &quot; + exception);\r\n        }\r\n    \r\n        return results;\r\n    }\r\n\r\nbut I get this error when I launch the app:\r\n\r\n    com.google.android.gms.common.api.ApiException: 17: API: Wearable.API is not available on this device.\r\n\r\nI also followed [the sample](https://github.com/android/wear-os-samples/tree/main/DataLayer) provided by google and I still couldn&#39;t fix this issue, I searched here on StackOverflow and on the official docs and I would appreciate it if someone can guide me on how to fix this.","title":"Why do I get API: Wearable.API is not available on this device when I try to connect my handheld device app to wearable using android?","body":"<p>I am trying to build an android app that can connect to a smartwatch, I've followed the official docs on <a href=\"https://developer.android.com/training/wearables/data/events\" rel=\"nofollow noreferrer\">this page</a> to use the DataLayer to connect both devices, right now I am struggling with finding the connected nodes so I can get the nodeId of the wearable and use it to connect to the watch.</p>\n<p>This is what I did so far:</p>\n<pre><code>private Collection&lt;String&gt; getNodes() {\n    HashSet&lt;String&gt; results = new HashSet&lt;&gt;();\n\n    Task&lt;List&lt;Node&gt;&gt; nodeListTask =\n            Wearable.getNodeClient(this).getConnectedNodes();\n\n    try {\n        List&lt;Node&gt; nodes = Tasks.await(nodeListTask);\n\n        for (Node node : nodes) {\n            results.add(node.getId());\n        }\n\n    } catch (ExecutionException exception) {\n        Log.e(TAG, &quot;Task failed: &quot; + exception);\n\n    } catch (InterruptedException exception) {\n        Log.e(TAG, &quot;Interrupt occurred: &quot; + exception);\n    }\n\n    return results;\n}\n</code></pre>\n<p>but I get this error when I launch the app:</p>\n<pre><code>com.google.android.gms.common.api.ApiException: 17: API: Wearable.API is not available on this device.\n</code></pre>\n<p>I also followed <a href=\"https://github.com/android/wear-os-samples/tree/main/DataLayer\" rel=\"nofollow noreferrer\">the sample</a> provided by google and I still couldn't fix this issue, I searched here on StackOverflow and on the official docs and I would appreciate it if someone can guide me on how to fix this.</p>\n"},{"tags":["python","java","pygame","controller","jython"],"comments":[{"owner":{"account_id":2636331,"reputation":3064,"user_id":2280890,"display_name":"import random"},"score":0,"creation_date":1670979866,"post_id":74791805,"comment_id":131996943,"body_markdown":"It looks like Jython only supports Python2, so you could try `jython -m pip install pygame==1.9.6`.","body":"It looks like Jython only supports Python2, so you could try <code>jython -m pip install pygame==1.9.6</code>."},{"owner":{"account_id":2636331,"reputation":3064,"user_id":2280890,"display_name":"import random"},"score":0,"creation_date":1670981096,"post_id":74791805,"comment_id":131997144,"body_markdown":"Please [edit] your question to include the full `pip` command output.","body":"Please <a href=\"https://stackoverflow.com/posts/74791805/edit\">edit</a> your question to include the full <code>pip</code> command output."},{"owner":{"account_id":25961950,"reputation":19,"user_id":19678425,"display_name":"newMember"},"score":0,"creation_date":1671011909,"post_id":74791805,"comment_id":132003090,"body_markdown":"I tired to upgrade pip, download setuptools and still have the same issue","body":"I tired to upgrade pip, download setuptools and still have the same issue"},{"owner":{"account_id":2636331,"reputation":3064,"user_id":2280890,"display_name":"import random"},"score":0,"creation_date":1671014700,"post_id":74791805,"comment_id":132003977,"body_markdown":"Can you install a development version of SDL as the log indicates?","body":"Can you install a development version of SDL as the log indicates?"},{"owner":{"account_id":2636331,"reputation":3064,"user_id":2280890,"display_name":"import random"},"score":0,"creation_date":1671017220,"post_id":74791805,"comment_id":132004863,"body_markdown":"You may also want to consider [Pyj2d](https://github.com/jggatc/pyj2d) but I don&#39;t know if it will support your Dual Shock 4. It might be worth testing `python 2.7` and `pygame 1.9.6` to confirm they support your controller before you leap through the hurdles required to build SDL and pygame.","body":"You may also want to consider <a href=\"https://github.com/jggatc/pyj2d\" rel=\"nofollow noreferrer\">Pyj2d</a> but I don&#39;t know if it will support your Dual Shock 4. It might be worth testing <code>python 2.7</code> and <code>pygame 1.9.6</code> to confirm they support your controller before you leap through the hurdles required to build SDL and pygame."},{"owner":{"account_id":25961950,"reputation":19,"user_id":19678425,"display_name":"newMember"},"score":0,"creation_date":1671022401,"post_id":74791805,"comment_id":132006689,"body_markdown":"I don&#39;t know how to install the SDL on Jython... in addition, I don&#39;t know how to use Pyj2d. I wanted to try to use it but I haven&#39;t figured out how to add it in my Jython","body":"I don&#39;t know how to install the SDL on Jython... in addition, I don&#39;t know how to use Pyj2d. I wanted to try to use it but I haven&#39;t figured out how to add it in my Jython"},{"owner":{"account_id":2636331,"reputation":3064,"user_id":2280890,"display_name":"import random"},"score":0,"creation_date":1671026126,"post_id":74791805,"comment_id":132008095,"body_markdown":"[This answer](https://askubuntu.com/questions/786300/how-to-install-all-sdl-libraries-in-ubuntu-14-04) might help you get SDL dev installed, so you can build pygame. You could edit your question with your operating system details to get more targeted info. Note that you&#39;ll want to  install SDL version 1.","body":"<a href=\"https://askubuntu.com/questions/786300/how-to-install-all-sdl-libraries-in-ubuntu-14-04\">This answer</a> might help you get SDL dev installed, so you can build pygame. You could edit your question with your operating system details to get more targeted info. Note that you&#39;ll want to  install SDL version 1."},{"owner":{"account_id":25961950,"reputation":19,"user_id":19678425,"display_name":"newMember"},"score":0,"creation_date":1671026391,"post_id":74791805,"comment_id":132008203,"body_markdown":"The issue is that SDL dev is installed on my system, but not on the Jython folder I can&#39;t sudo apt-get install in Jython. Is there a way to do it manually ?","body":"The issue is that SDL dev is installed on my system, but not on the Jython folder I can&#39;t sudo apt-get install in Jython. Is there a way to do it manually ?"},{"owner":{"account_id":2636331,"reputation":3064,"user_id":2280890,"display_name":"import random"},"score":0,"creation_date":1671058377,"post_id":74791805,"comment_id":132018563,"body_markdown":"The pygame installer is trying to execute the `sdl-config`, but it can&#39;t find it. The [SDL MacOS doc](https://github.com/bminor/SDL/blob/master/docs/README-macosx.md) might help you.","body":"The pygame installer is trying to execute the <code>sdl-config</code>, but it can&#39;t find it. The <a href=\"https://github.com/bminor/SDL/blob/master/docs/README-macosx.md\" rel=\"nofollow noreferrer\">SDL MacOS doc</a> might help you."},{"owner":{"account_id":25961950,"reputation":19,"user_id":19678425,"display_name":"newMember"},"score":0,"creation_date":1671642320,"post_id":74791805,"comment_id":132144248,"body_markdown":"I installed SDL but now it seams that pygames installer is wrong any ideas ?","body":"I installed SDL but now it seams that pygames installer is wrong any ideas ?"},{"owner":{"account_id":2636331,"reputation":3064,"user_id":2280890,"display_name":"import random"},"score":0,"creation_date":1671662225,"post_id":74791805,"comment_id":132149769,"body_markdown":"Did you try adding the `-auto` flag to try to continue without dependencies? The [pygame compilation page for MacOS](https://www.pygame.org/wiki/MacCompile) shows how to install dependencies using `brew`. That page also links to [this answer](https://stackoverflow.com/a/42033710/2280890) which might help you.","body":"Did you try adding the <code>-auto</code> flag to try to continue without dependencies? The <a href=\"https://www.pygame.org/wiki/MacCompile\" rel=\"nofollow noreferrer\">pygame compilation page for MacOS</a> shows how to install dependencies using <code>brew</code>. That page also links to <a href=\"https://stackoverflow.com/a/42033710/2280890\">this answer</a> which might help you."},{"owner":{"account_id":25961950,"reputation":19,"user_id":19678425,"display_name":"newMember"},"score":0,"creation_date":1672233378,"post_id":74791805,"comment_id":132247205,"body_markdown":"The -auto flag isn&#39;t recognized by jython. I want to emphasize that I can install pygame on my computer, without all of theses manipulation. I need to run a special version of pip and python which is not influenced by brew, and others installation for Jython. It&#39;s located at /Users//jython2.7.3/bin/jython . I tried everything you told me but I don&#39;t understand why it still doesn&#39;t work since I got It installed on my version of python. The jython pip should be able to install the pygame. I tried other lib such as matplotlib, bs4 and more but I have the same issue...","body":"The -auto flag isn&#39;t recognized by jython. I want to emphasize that I can install pygame on my computer, without all of theses manipulation. I need to run a special version of pip and python which is not influenced by brew, and others installation for Jython. It&#39;s located at /Users//jython2.7.3/bin/jython . I tried everything you told me but I don&#39;t understand why it still doesn&#39;t work since I got It installed on my version of python. The jython pip should be able to install the pygame. I tried other lib such as matplotlib, bs4 and more but I have the same issue..."},{"owner":{"account_id":2636331,"reputation":3064,"user_id":2280890,"display_name":"import random"},"score":0,"creation_date":1672233798,"post_id":74791805,"comment_id":132247323,"body_markdown":"Where are you including the `-auto` argument? I think it should be at the end: `jython -m pip install pygame==1.9.6 -auto`, but I can&#39;t test it.","body":"Where are you including the <code>-auto</code> argument? I think it should be at the end: <code>jython -m pip install pygame==1.9.6 -auto</code>, but I can&#39;t test it."}],"owner":{"account_id":25961950,"reputation":19,"user_id":19678425,"display_name":"newMember"},"comment_count":13,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1672164361,"answer_count":0,"score":0,"last_activity_date":1672338804,"creation_date":1670972410,"question_id":74791805,"body_markdown":"I&#39;m working on a java project and I need it to be able to handle the DualShock 4 controller. I saw that with Pygame  and a basic script I can use my controller (all the code is a the end). I can even use my Dualsense controller (PS5 controller) just with this code.\r\n\r\n Therefore I wanted to use this very script in my java project using Jython. The issue is that I can&#39;t pip install pygame. I have the error \r\n\r\n&gt; Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output\r\n\r\nAnd I don&#39;t know how to handle it. \r\n\r\nFurthermore, on this website : https://gatc.ca/2012/02/08/applet-deployment-using-pyj2d/ he create an applet of pygame but I really didn&#39;t understand how he managed to do that.\r\n\r\n\r\nI haven&#39;t found a better way to use my controller with java. \r\n\r\nhere&#39;s the python code : \r\n\r\n```py import sys\r\n\r\nimport pygame\r\n\r\nfrom pygame.locals import *\r\npygame.init()\r\npygame.display.set_caption(&#39;game base&#39;)\r\nscreen = pygame.display.set_mode((500, 500), 0, 32)\r\nclock = pygame.time.Clock()\r\n\r\npygame.joystick.init()\r\njoysticks = [pygame.joystick.Joystick(i) for i in range(pygame.joystick.get_count())]\r\nfor joystick in joysticks:\r\n    print(joystick.get_name())\r\n\r\nmy_square = pygame.Rect(50, 50, 50, 50)\r\nmy_square_color = 0\r\ncolors = [(255, 0, 0), (0, 255, 0), (0, 0, 255)]\r\nmotion = [0, 0]\r\n\r\nwhile True:\r\n\r\n    screen.fill((0, 0, 0))\r\n\r\n    pygame.draw.rect(screen, colors[my_square_color], my_square)\r\n    if abs(motion[0]) &lt; 0.1:\r\n        motion[0] = 0\r\n    if abs(motion[1]) &lt; 0.1:\r\n        motion[1] = 0\r\n    my_square.x += motion[0] * 10\r\n    my_square.y += motion[1] * 10\r\n\r\n    for event in pygame.event.get():\r\n        if event.type == JOYBUTTONDOWN:\r\n            print(event)\r\n            if event.button == 0:\r\n                my_square_color = (my_square_color + 1) % len(colors)\r\n        if event.type == JOYBUTTONUP:\r\n            print(event)\r\n        if event.type == JOYAXISMOTION:\r\n            print(event)\r\n            if event.axis &lt; 2:\r\n                motion[event.axis] = event.value\r\n        if event.type == JOYHATMOTION:\r\n            print(event)\r\n        if event.type == JOYDEVICEADDED:\r\n            joysticks = [pygame.joystick.Joystick(i) for i in range(pygame.joystick.get_count())]\r\n            for joystick in joysticks:\r\n                print(joystick.get_name())\r\n        if event.type == JOYDEVICEREMOVED:\r\n            joysticks = [pygame.joystick.Joystick(i) for i in range(pygame.joystick.get_count())]\r\n        if event.type == QUIT:\r\n            pygame.quit()\r\n            sys.exit()\r\n        if event.type == KEYDOWN:\r\n            if event.key == K_ESCAPE:\r\n                pygame.quit()\r\n                sys.exit()\r\n\r\n    pygame.display.update()\r\n    clock.tick(60) \r\n```\r\nand here&#39;s the Java code used to call this python script \r\n\r\n```java\r\n\r\nimport org.python.util.PythonInterpreter;\r\n\r\npublic class controller {\r\n\r\n  public static void main(String[] args) {\r\n        try {\r\n        PythonInterpreter pyInterp = new PythonInterpreter() ;\r\n        \r\n        // importer le code python \r\n        pyInterp.execfile(&quot;path2pythonScript/manette.py&quot;); \r\n        \r\n        \r\n        pyInterp.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n      }\r\n    }\r\n} \r\n```\r\n\r\n\r\nIf anyone know whether how to install Pygame in my Jython standalone.jar or even a better way to connect my controller I&#39;ll take it. \r\n\r\n\r\nedit : Here&#39;s the full output when I try to pip install \r\n\r\n\r\n\r\n```\r\njython -m pip install pygame==1.9.6                                   \r\n\r\nDEPRECATION: pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support pip 21.0 will remove support for this functionality.\r\nWARNING: The directory &#39;/Users/sami/Library/Caches/pip&#39; or its parent directory is not owned or is not writable by the current user. The cache has been disabled. Check the permissions and owner of that directory. If executing pip with sudo, you may want sudo&#39;s -H flag.\r\nWARNING: pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.\r\nCollecting pygame==1.9.6\r\n  Downloading pygame-1.9.6.tar.gz (3.2 MB)\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /Users/sami/jython2.7.3/bin/jython -c &#39;import sys, setuptools, tokenize; sys.argv[0] = &#39;&quot;&#39;&quot;&#39;/private/tmp/pip-install-36qzq9/pygame/setup.py&#39;&quot;&#39;&quot;&#39;; __file__=&#39;&quot;&#39;&quot;&#39;/private/tmp/pip-install-36qzq9/pygame/setup.py&#39;&quot;&#39;&quot;&#39;;f=getattr(tokenize, &#39;&quot;&#39;&quot;&#39;open&#39;&quot;&#39;&quot;&#39;, open)(__file__);code=f.read().replace(&#39;&quot;&#39;&quot;&#39;\\r\\n&#39;&quot;&#39;&quot;&#39;, &#39;&quot;&#39;&quot;&#39;\\n&#39;&quot;&#39;&quot;&#39;);f.close();exec(compile(code, __file__, &#39;&quot;&#39;&quot;&#39;exec&#39;&quot;&#39;&quot;&#39;))&#39; egg_info --egg-base /private/tmp/pip-pip-egg-info-q8Wv8X\r\n         cwd: /private/tmp/pip-install-36qzq9/pygame/\r\n    Complete output (20 lines):\r\n    \r\n    \r\n    WARNING, No &quot;Setup&quot; File Exists, Running &quot;buildconfig/config.py&quot;\r\n    Using UNIX configuration...\r\n    \r\n    \r\n    Hunting dependencies...\r\n    /bin/sh: sdl-config: command not found\r\n    /bin/sh: sdl-config: command not found\r\n    /bin/sh: sdl-config: command not found\r\n    WARNING: &quot;sdl-config&quot; failed!\r\n    /bin/sh: pkg-config: command not found\r\n    /bin/sh: pkg-config: command not found\r\n    /bin/sh: pkg-config: command not found\r\n    WARNING: &quot;pkg-config freetype2&quot; failed!\r\n    /bin/sh: freetype-config: command not found\r\n    /bin/sh: freetype-config: command not found\r\n    /bin/sh: freetype-config: command not found\r\n    WARNING: &quot;freetype-config&quot; failed!\r\n    Unable to run &quot;sdl-config&quot;. Please make sure a development version of SDL is installed.\r\n    ----------------------------------------\r\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\r\nWARNING: pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.\r\n```\r\n\r\nI use macOS Ventura\r\nBut I don&#39;t need to install it on my computer, I need to use it in the Jython package which is independent of the OS used I guess. I can use a Windows laptop If there is solution with it\r\n\r\n\r\nEdit 2 : SDL is now installed but I still got this error message when I try to install pygame with the same command : \r\n\r\n```\r\nCollecting pygame\r\n  Downloading pygame-2.0.3.tar.gz (5.8 MB)\r\n    ERROR: Command errored out with exit status 1:\r\n     command: /Users/sami/jython2.7.3/bin/jython -c &#39;import sys, setuptools, tokenize; sys.argv[0] = &#39;&quot;&#39;&quot;&#39;/private/tmp/pip-install-3gu1yA/pygame/setup.py&#39;&quot;&#39;&quot;&#39;; __file__=&#39;&quot;&#39;&quot;&#39;/private/tmp/pip-install-3gu1yA/pygame/setup.py&#39;&quot;&#39;&quot;&#39;;f=getattr(tokenize, &#39;&quot;&#39;&quot;&#39;open&#39;&quot;&#39;&quot;&#39;, open)(__file__);code=f.read().replace(&#39;&quot;&#39;&quot;&#39;\\r\\n&#39;&quot;&#39;&quot;&#39;, &#39;&quot;&#39;&quot;&#39;\\n&#39;&quot;&#39;&quot;&#39;);f.close();exec(compile(code, __file__, &#39;&quot;&#39;&quot;&#39;exec&#39;&quot;&#39;&quot;&#39;))&#39; egg_info --egg-base /private/tmp/pip-pip-egg-info-ntnoiG\r\n         cwd: /private/tmp/pip-install-3gu1yA/pygame/\r\n    Complete output (34 lines):\r\n    \r\n    \r\n    WARNING, No &quot;Setup&quot; File Exists, Running &quot;buildconfig/config.py&quot;\r\n    Using UNIX configuration...\r\n    \r\n    \r\n    Hunting dependencies...\r\n    SDL     : found 2.26.1\r\n    FONT    : not found\r\n    (&#39;FONT&#39;, &#39;SDL_ttf.h&#39;, &#39;libSDL2_ttf.so&#39;, [&#39;/usr/include&#39;, &#39;/usr/include/SDL2&#39;, &#39;/usr/local/include&#39;, &#39;/usr/local/include/SDL2&#39;, &#39;/usr/X11R6/include&#39;, &#39;/opt/homebrew/include/SDL2&#39;], [&#39;/usr/lib&#39;, &#39;/usr/lib64&#39;, &#39;/usr/X11R6/lib&#39;, &#39;/usr/lib/i386-linux-gnu&#39;, &#39;/usr/lib/x86_64-linux-gnu&#39;, &#39;/usr/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/lib/aarch64-linux-gnu/&#39;, &#39;/usr/local/lib&#39;, &#39;/usr/local/lib64&#39;, &#39;/usr/local/X11R6/lib&#39;, &#39;/usr/local/lib/i386-linux-gnu&#39;, &#39;/usr/local/lib/x86_64-linux-gnu&#39;, &#39;/usr/local/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/local/lib/aarch64-linux-gnu/&#39;, &#39;/opt/homebrew/lib&#39;])\r\n    IMAGE   : not found\r\n    (&#39;IMAGE&#39;, &#39;SDL_image.h&#39;, &#39;libSDL2_image.so&#39;, [&#39;/usr/include&#39;, &#39;/usr/include/SDL2&#39;, &#39;/usr/local/include&#39;, &#39;/usr/local/include/SDL2&#39;, &#39;/usr/X11R6/include&#39;, &#39;/opt/homebrew/include/SDL2&#39;], [&#39;/usr/lib&#39;, &#39;/usr/lib64&#39;, &#39;/usr/X11R6/lib&#39;, &#39;/usr/lib/i386-linux-gnu&#39;, &#39;/usr/lib/x86_64-linux-gnu&#39;, &#39;/usr/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/lib/aarch64-linux-gnu/&#39;, &#39;/usr/local/lib&#39;, &#39;/usr/local/lib64&#39;, &#39;/usr/local/X11R6/lib&#39;, &#39;/usr/local/lib/i386-linux-gnu&#39;, &#39;/usr/local/lib/x86_64-linux-gnu&#39;, &#39;/usr/local/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/local/lib/aarch64-linux-gnu/&#39;, &#39;/opt/homebrew/lib&#39;])\r\n    MIXER   : not found\r\n    (&#39;MIXER&#39;, &#39;SDL_mixer.h&#39;, &#39;libSDL2_mixer.so&#39;, [&#39;/usr/include&#39;, &#39;/usr/include/SDL2&#39;, &#39;/usr/local/include&#39;, &#39;/usr/local/include/SDL2&#39;, &#39;/usr/X11R6/include&#39;, &#39;/opt/homebrew/include/SDL2&#39;], [&#39;/usr/lib&#39;, &#39;/usr/lib64&#39;, &#39;/usr/X11R6/lib&#39;, &#39;/usr/lib/i386-linux-gnu&#39;, &#39;/usr/lib/x86_64-linux-gnu&#39;, &#39;/usr/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/lib/aarch64-linux-gnu/&#39;, &#39;/usr/local/lib&#39;, &#39;/usr/local/lib64&#39;, &#39;/usr/local/X11R6/lib&#39;, &#39;/usr/local/lib/i386-linux-gnu&#39;, &#39;/usr/local/lib/x86_64-linux-gnu&#39;, &#39;/usr/local/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/local/lib/aarch64-linux-gnu/&#39;, &#39;/opt/homebrew/lib&#39;])\r\n    PNG     : not found\r\n    (&#39;PNG&#39;, &#39;png.h&#39;, &#39;libpng&#39;, [&#39;/usr/include&#39;, &#39;/usr/include/SDL2&#39;, &#39;/usr/local/include&#39;, &#39;/usr/local/include/SDL2&#39;, &#39;/usr/X11R6/include&#39;, &#39;/opt/homebrew/include/SDL2&#39;], [&#39;/usr/lib&#39;, &#39;/usr/lib64&#39;, &#39;/usr/X11R6/lib&#39;, &#39;/usr/lib/i386-linux-gnu&#39;, &#39;/usr/lib/x86_64-linux-gnu&#39;, &#39;/usr/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/lib/aarch64-linux-gnu/&#39;, &#39;/usr/local/lib&#39;, &#39;/usr/local/lib64&#39;, &#39;/usr/local/X11R6/lib&#39;, &#39;/usr/local/lib/i386-linux-gnu&#39;, &#39;/usr/local/lib/x86_64-linux-gnu&#39;, &#39;/usr/local/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/local/lib/aarch64-linux-gnu/&#39;, &#39;/opt/homebrew/lib&#39;])\r\n    JPEG    : not found\r\n    (&#39;JPEG&#39;, &#39;jpeglib.h&#39;, &#39;libjpeg&#39;, [&#39;/usr/include&#39;, &#39;/usr/include/SDL2&#39;, &#39;/usr/local/include&#39;, &#39;/usr/local/include/SDL2&#39;, &#39;/usr/X11R6/include&#39;, &#39;/opt/homebrew/include/SDL2&#39;], [&#39;/usr/lib&#39;, &#39;/usr/lib64&#39;, &#39;/usr/X11R6/lib&#39;, &#39;/usr/lib/i386-linux-gnu&#39;, &#39;/usr/lib/x86_64-linux-gnu&#39;, &#39;/usr/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/lib/aarch64-linux-gnu/&#39;, &#39;/usr/local/lib&#39;, &#39;/usr/local/lib64&#39;, &#39;/usr/local/X11R6/lib&#39;, &#39;/usr/local/lib/i386-linux-gnu&#39;, &#39;/usr/local/lib/x86_64-linux-gnu&#39;, &#39;/usr/local/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/local/lib/aarch64-linux-gnu/&#39;, &#39;/opt/homebrew/lib&#39;])\r\n    SCRAP   : found\r\n    PORTMIDI: not found\r\n    (&#39;PORTMIDI&#39;, &#39;portmidi.h&#39;, &#39;libportmidi.so&#39;, [&#39;/usr/include&#39;, &#39;/usr/include/SDL2&#39;, &#39;/usr/local/include&#39;, &#39;/usr/local/include/SDL2&#39;, &#39;/usr/X11R6/include&#39;, &#39;/opt/homebrew/include/SDL2&#39;], [&#39;/usr/lib&#39;, &#39;/usr/lib64&#39;, &#39;/usr/X11R6/lib&#39;, &#39;/usr/lib/i386-linux-gnu&#39;, &#39;/usr/lib/x86_64-linux-gnu&#39;, &#39;/usr/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/lib/aarch64-linux-gnu/&#39;, &#39;/usr/local/lib&#39;, &#39;/usr/local/lib64&#39;, &#39;/usr/local/X11R6/lib&#39;, &#39;/usr/local/lib/i386-linux-gnu&#39;, &#39;/usr/local/lib/x86_64-linux-gnu&#39;, &#39;/usr/local/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/local/lib/aarch64-linux-gnu/&#39;, &#39;/opt/homebrew/lib&#39;])\r\n    PORTTIME: not found\r\n    (&#39;PORTTIME&#39;, &#39;porttime.h&#39;, &#39;libporttime.so&#39;, [&#39;/usr/include&#39;, &#39;/usr/include/SDL2&#39;, &#39;/usr/local/include&#39;, &#39;/usr/local/include/SDL2&#39;, &#39;/usr/X11R6/include&#39;, &#39;/opt/homebrew/include/SDL2&#39;], [&#39;/usr/lib&#39;, &#39;/usr/lib64&#39;, &#39;/usr/X11R6/lib&#39;, &#39;/usr/lib/i386-linux-gnu&#39;, &#39;/usr/lib/x86_64-linux-gnu&#39;, &#39;/usr/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/lib/aarch64-linux-gnu/&#39;, &#39;/usr/local/lib&#39;, &#39;/usr/local/lib64&#39;, &#39;/usr/local/X11R6/lib&#39;, &#39;/usr/local/lib/i386-linux-gnu&#39;, &#39;/usr/local/lib/x86_64-linux-gnu&#39;, &#39;/usr/local/lib/arm-linux-gnueabihf/&#39;, &#39;/usr/local/lib/aarch64-linux-gnu/&#39;, &#39;/opt/homebrew/lib&#39;])\r\n    FREETYPE: found 24.3.18\r\n    WARNING:root:Some pygame dependencies were not found. Pygame can still compile and install, but games that depend on those missing dependencies will not run. Use -auto to continue building without all dependencies.\r\n    \r\n    ---\r\n    For help with compilation see:\r\n        https://www.pygame.org/wiki/Compilation\r\n    To contribute to pygame development see:\r\n        https://www.pygame.org/contribute.html\r\n    ---\r\n    \r\n    Missing dependencies\r\n    ----------------------------------------\r\n```\r\n\r\nWith the -auto flag I got this error : \r\n\r\n```\r\n/Users//jython2.7.3/bin/jython -m pip install pygame==1.9.6 -auto\r\n\r\nUsage:   \r\n  /Users//jython2.7.3/bin/jython -m pip install [options] &lt;requirement specifier&gt; [package-index-options] ...\r\n  /Users//jython2.7.3/bin/jython -m pip install [options] -r &lt;requirements file&gt; [package-index-options] ...\r\n  /Users//jython2.7.3/bin/jython -m pip install [options] [-e] &lt;vcs project url&gt; ...\r\n  /Users//jython2.7.3/bin/jython -m pip install [options] [-e] &lt;local project path&gt; ...\r\n  /Users//jython2.7.3/bin/jython -m pip install [options] &lt;archive url/path&gt; ...\r\n\r\nno such option: -a\r\n```\r\n","title":"Jython install pygame and use it with java in order to connect my controller","body":"<p>I'm working on a java project and I need it to be able to handle the DualShock 4 controller. I saw that with Pygame  and a basic script I can use my controller (all the code is a the end). I can even use my Dualsense controller (PS5 controller) just with this code.</p>\n<p>Therefore I wanted to use this very script in my java project using Jython. The issue is that I can't pip install pygame. I have the error</p>\n<blockquote>\n<p>Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output</p>\n</blockquote>\n<p>And I don't know how to handle it.</p>\n<p>Furthermore, on this website : <a href=\"https://gatc.ca/2012/02/08/applet-deployment-using-pyj2d/\" rel=\"nofollow noreferrer\">https://gatc.ca/2012/02/08/applet-deployment-using-pyj2d/</a> he create an applet of pygame but I really didn't understand how he managed to do that.</p>\n<p>I haven't found a better way to use my controller with java.</p>\n<p>here's the python code :</p>\n<pre class=\"lang-py prettyprint-override\"><code>\nimport pygame\n\nfrom pygame.locals import *\npygame.init()\npygame.display.set_caption('game base')\nscreen = pygame.display.set_mode((500, 500), 0, 32)\nclock = pygame.time.Clock()\n\npygame.joystick.init()\njoysticks = [pygame.joystick.Joystick(i) for i in range(pygame.joystick.get_count())]\nfor joystick in joysticks:\n    print(joystick.get_name())\n\nmy_square = pygame.Rect(50, 50, 50, 50)\nmy_square_color = 0\ncolors = [(255, 0, 0), (0, 255, 0), (0, 0, 255)]\nmotion = [0, 0]\n\nwhile True:\n\n    screen.fill((0, 0, 0))\n\n    pygame.draw.rect(screen, colors[my_square_color], my_square)\n    if abs(motion[0]) &lt; 0.1:\n        motion[0] = 0\n    if abs(motion[1]) &lt; 0.1:\n        motion[1] = 0\n    my_square.x += motion[0] * 10\n    my_square.y += motion[1] * 10\n\n    for event in pygame.event.get():\n        if event.type == JOYBUTTONDOWN:\n            print(event)\n            if event.button == 0:\n                my_square_color = (my_square_color + 1) % len(colors)\n        if event.type == JOYBUTTONUP:\n            print(event)\n        if event.type == JOYAXISMOTION:\n            print(event)\n            if event.axis &lt; 2:\n                motion[event.axis] = event.value\n        if event.type == JOYHATMOTION:\n            print(event)\n        if event.type == JOYDEVICEADDED:\n            joysticks = [pygame.joystick.Joystick(i) for i in range(pygame.joystick.get_count())]\n            for joystick in joysticks:\n                print(joystick.get_name())\n        if event.type == JOYDEVICEREMOVED:\n            joysticks = [pygame.joystick.Joystick(i) for i in range(pygame.joystick.get_count())]\n        if event.type == QUIT:\n            pygame.quit()\n            sys.exit()\n        if event.type == KEYDOWN:\n            if event.key == K_ESCAPE:\n                pygame.quit()\n                sys.exit()\n\n    pygame.display.update()\n    clock.tick(60) \n</code></pre>\n<p>and here's the Java code used to call this python script</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport org.python.util.PythonInterpreter;\n\npublic class controller {\n\n  public static void main(String[] args) {\n        try {\n        PythonInterpreter pyInterp = new PythonInterpreter() ;\n        \n        // importer le code python \n        pyInterp.execfile(&quot;path2pythonScript/manette.py&quot;); \n        \n        \n        pyInterp.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n      }\n    }\n} \n</code></pre>\n<p>If anyone know whether how to install Pygame in my Jython standalone.jar or even a better way to connect my controller I'll take it.</p>\n<p>edit : Here's the full output when I try to pip install</p>\n<pre><code>jython -m pip install pygame==1.9.6                                   \n\nDEPRECATION: pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support pip 21.0 will remove support for this functionality.\nWARNING: The directory '/Users/sami/Library/Caches/pip' or its parent directory is not owned or is not writable by the current user. The cache has been disabled. Check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\nWARNING: pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.\nCollecting pygame==1.9.6\n  Downloading pygame-1.9.6.tar.gz (3.2 MB)\n    ERROR: Command errored out with exit status 1:\n     command: /Users/sami/jython2.7.3/bin/jython -c 'import sys, setuptools, tokenize; sys.argv[0] = '&quot;'&quot;'/private/tmp/pip-install-36qzq9/pygame/setup.py'&quot;'&quot;'; __file__='&quot;'&quot;'/private/tmp/pip-install-36qzq9/pygame/setup.py'&quot;'&quot;';f=getattr(tokenize, '&quot;'&quot;'open'&quot;'&quot;', open)(__file__);code=f.read().replace('&quot;'&quot;'\\r\\n'&quot;'&quot;', '&quot;'&quot;'\\n'&quot;'&quot;');f.close();exec(compile(code, __file__, '&quot;'&quot;'exec'&quot;'&quot;'))' egg_info --egg-base /private/tmp/pip-pip-egg-info-q8Wv8X\n         cwd: /private/tmp/pip-install-36qzq9/pygame/\n    Complete output (20 lines):\n    \n    \n    WARNING, No &quot;Setup&quot; File Exists, Running &quot;buildconfig/config.py&quot;\n    Using UNIX configuration...\n    \n    \n    Hunting dependencies...\n    /bin/sh: sdl-config: command not found\n    /bin/sh: sdl-config: command not found\n    /bin/sh: sdl-config: command not found\n    WARNING: &quot;sdl-config&quot; failed!\n    /bin/sh: pkg-config: command not found\n    /bin/sh: pkg-config: command not found\n    /bin/sh: pkg-config: command not found\n    WARNING: &quot;pkg-config freetype2&quot; failed!\n    /bin/sh: freetype-config: command not found\n    /bin/sh: freetype-config: command not found\n    /bin/sh: freetype-config: command not found\n    WARNING: &quot;freetype-config&quot; failed!\n    Unable to run &quot;sdl-config&quot;. Please make sure a development version of SDL is installed.\n    ----------------------------------------\nERROR: Command errored out with exit status 1: python setup.py egg_info Check the logs for full command output.\nWARNING: pip is configured with locations that require TLS/SSL, however the ssl module in Python is not available.\n</code></pre>\n<p>I use macOS Ventura\nBut I don't need to install it on my computer, I need to use it in the Jython package which is independent of the OS used I guess. I can use a Windows laptop If there is solution with it</p>\n<p>Edit 2 : SDL is now installed but I still got this error message when I try to install pygame with the same command :</p>\n<pre><code>Collecting pygame\n  Downloading pygame-2.0.3.tar.gz (5.8 MB)\n    ERROR: Command errored out with exit status 1:\n     command: /Users/sami/jython2.7.3/bin/jython -c 'import sys, setuptools, tokenize; sys.argv[0] = '&quot;'&quot;'/private/tmp/pip-install-3gu1yA/pygame/setup.py'&quot;'&quot;'; __file__='&quot;'&quot;'/private/tmp/pip-install-3gu1yA/pygame/setup.py'&quot;'&quot;';f=getattr(tokenize, '&quot;'&quot;'open'&quot;'&quot;', open)(__file__);code=f.read().replace('&quot;'&quot;'\\r\\n'&quot;'&quot;', '&quot;'&quot;'\\n'&quot;'&quot;');f.close();exec(compile(code, __file__, '&quot;'&quot;'exec'&quot;'&quot;'))' egg_info --egg-base /private/tmp/pip-pip-egg-info-ntnoiG\n         cwd: /private/tmp/pip-install-3gu1yA/pygame/\n    Complete output (34 lines):\n    \n    \n    WARNING, No &quot;Setup&quot; File Exists, Running &quot;buildconfig/config.py&quot;\n    Using UNIX configuration...\n    \n    \n    Hunting dependencies...\n    SDL     : found 2.26.1\n    FONT    : not found\n    ('FONT', 'SDL_ttf.h', 'libSDL2_ttf.so', ['/usr/include', '/usr/include/SDL2', '/usr/local/include', '/usr/local/include/SDL2', '/usr/X11R6/include', '/opt/homebrew/include/SDL2'], ['/usr/lib', '/usr/lib64', '/usr/X11R6/lib', '/usr/lib/i386-linux-gnu', '/usr/lib/x86_64-linux-gnu', '/usr/lib/arm-linux-gnueabihf/', '/usr/lib/aarch64-linux-gnu/', '/usr/local/lib', '/usr/local/lib64', '/usr/local/X11R6/lib', '/usr/local/lib/i386-linux-gnu', '/usr/local/lib/x86_64-linux-gnu', '/usr/local/lib/arm-linux-gnueabihf/', '/usr/local/lib/aarch64-linux-gnu/', '/opt/homebrew/lib'])\n    IMAGE   : not found\n    ('IMAGE', 'SDL_image.h', 'libSDL2_image.so', ['/usr/include', '/usr/include/SDL2', '/usr/local/include', '/usr/local/include/SDL2', '/usr/X11R6/include', '/opt/homebrew/include/SDL2'], ['/usr/lib', '/usr/lib64', '/usr/X11R6/lib', '/usr/lib/i386-linux-gnu', '/usr/lib/x86_64-linux-gnu', '/usr/lib/arm-linux-gnueabihf/', '/usr/lib/aarch64-linux-gnu/', '/usr/local/lib', '/usr/local/lib64', '/usr/local/X11R6/lib', '/usr/local/lib/i386-linux-gnu', '/usr/local/lib/x86_64-linux-gnu', '/usr/local/lib/arm-linux-gnueabihf/', '/usr/local/lib/aarch64-linux-gnu/', '/opt/homebrew/lib'])\n    MIXER   : not found\n    ('MIXER', 'SDL_mixer.h', 'libSDL2_mixer.so', ['/usr/include', '/usr/include/SDL2', '/usr/local/include', '/usr/local/include/SDL2', '/usr/X11R6/include', '/opt/homebrew/include/SDL2'], ['/usr/lib', '/usr/lib64', '/usr/X11R6/lib', '/usr/lib/i386-linux-gnu', '/usr/lib/x86_64-linux-gnu', '/usr/lib/arm-linux-gnueabihf/', '/usr/lib/aarch64-linux-gnu/', '/usr/local/lib', '/usr/local/lib64', '/usr/local/X11R6/lib', '/usr/local/lib/i386-linux-gnu', '/usr/local/lib/x86_64-linux-gnu', '/usr/local/lib/arm-linux-gnueabihf/', '/usr/local/lib/aarch64-linux-gnu/', '/opt/homebrew/lib'])\n    PNG     : not found\n    ('PNG', 'png.h', 'libpng', ['/usr/include', '/usr/include/SDL2', '/usr/local/include', '/usr/local/include/SDL2', '/usr/X11R6/include', '/opt/homebrew/include/SDL2'], ['/usr/lib', '/usr/lib64', '/usr/X11R6/lib', '/usr/lib/i386-linux-gnu', '/usr/lib/x86_64-linux-gnu', '/usr/lib/arm-linux-gnueabihf/', '/usr/lib/aarch64-linux-gnu/', '/usr/local/lib', '/usr/local/lib64', '/usr/local/X11R6/lib', '/usr/local/lib/i386-linux-gnu', '/usr/local/lib/x86_64-linux-gnu', '/usr/local/lib/arm-linux-gnueabihf/', '/usr/local/lib/aarch64-linux-gnu/', '/opt/homebrew/lib'])\n    JPEG    : not found\n    ('JPEG', 'jpeglib.h', 'libjpeg', ['/usr/include', '/usr/include/SDL2', '/usr/local/include', '/usr/local/include/SDL2', '/usr/X11R6/include', '/opt/homebrew/include/SDL2'], ['/usr/lib', '/usr/lib64', '/usr/X11R6/lib', '/usr/lib/i386-linux-gnu', '/usr/lib/x86_64-linux-gnu', '/usr/lib/arm-linux-gnueabihf/', '/usr/lib/aarch64-linux-gnu/', '/usr/local/lib', '/usr/local/lib64', '/usr/local/X11R6/lib', '/usr/local/lib/i386-linux-gnu', '/usr/local/lib/x86_64-linux-gnu', '/usr/local/lib/arm-linux-gnueabihf/', '/usr/local/lib/aarch64-linux-gnu/', '/opt/homebrew/lib'])\n    SCRAP   : found\n    PORTMIDI: not found\n    ('PORTMIDI', 'portmidi.h', 'libportmidi.so', ['/usr/include', '/usr/include/SDL2', '/usr/local/include', '/usr/local/include/SDL2', '/usr/X11R6/include', '/opt/homebrew/include/SDL2'], ['/usr/lib', '/usr/lib64', '/usr/X11R6/lib', '/usr/lib/i386-linux-gnu', '/usr/lib/x86_64-linux-gnu', '/usr/lib/arm-linux-gnueabihf/', '/usr/lib/aarch64-linux-gnu/', '/usr/local/lib', '/usr/local/lib64', '/usr/local/X11R6/lib', '/usr/local/lib/i386-linux-gnu', '/usr/local/lib/x86_64-linux-gnu', '/usr/local/lib/arm-linux-gnueabihf/', '/usr/local/lib/aarch64-linux-gnu/', '/opt/homebrew/lib'])\n    PORTTIME: not found\n    ('PORTTIME', 'porttime.h', 'libporttime.so', ['/usr/include', '/usr/include/SDL2', '/usr/local/include', '/usr/local/include/SDL2', '/usr/X11R6/include', '/opt/homebrew/include/SDL2'], ['/usr/lib', '/usr/lib64', '/usr/X11R6/lib', '/usr/lib/i386-linux-gnu', '/usr/lib/x86_64-linux-gnu', '/usr/lib/arm-linux-gnueabihf/', '/usr/lib/aarch64-linux-gnu/', '/usr/local/lib', '/usr/local/lib64', '/usr/local/X11R6/lib', '/usr/local/lib/i386-linux-gnu', '/usr/local/lib/x86_64-linux-gnu', '/usr/local/lib/arm-linux-gnueabihf/', '/usr/local/lib/aarch64-linux-gnu/', '/opt/homebrew/lib'])\n    FREETYPE: found 24.3.18\n    WARNING:root:Some pygame dependencies were not found. Pygame can still compile and install, but games that depend on those missing dependencies will not run. Use -auto to continue building without all dependencies.\n    \n    ---\n    For help with compilation see:\n        https://www.pygame.org/wiki/Compilation\n    To contribute to pygame development see:\n        https://www.pygame.org/contribute.html\n    ---\n    \n    Missing dependencies\n    ----------------------------------------\n</code></pre>\n<p>With the -auto flag I got this error :</p>\n<pre><code>/Users//jython2.7.3/bin/jython -m pip install pygame==1.9.6 -auto\n\nUsage:   \n  /Users//jython2.7.3/bin/jython -m pip install [options] &lt;requirement specifier&gt; [package-index-options] ...\n  /Users//jython2.7.3/bin/jython -m pip install [options] -r &lt;requirements file&gt; [package-index-options] ...\n  /Users//jython2.7.3/bin/jython -m pip install [options] [-e] &lt;vcs project url&gt; ...\n  /Users//jython2.7.3/bin/jython -m pip install [options] [-e] &lt;local project path&gt; ...\n  /Users//jython2.7.3/bin/jython -m pip install [options] &lt;archive url/path&gt; ...\n\nno such option: -a\n</code></pre>\n"},{"tags":["java","maven","google-java-format"],"answers":[{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1608983638,"creation_date":1608983638,"answer_id":65456106,"question_id":65446266,"body_markdown":"According to ```pom.xml``` snippet two different check was configured.\r\n1. Generic format\r\n```xml\r\n&lt;formats&gt;\r\n    &lt;format&gt;\r\n        &lt;!-- define the files to apply to --&gt;\r\n        &lt;includes&gt;\r\n            &lt;include&gt;*.java&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n        &lt;excludes&gt;\r\n              &lt;exclude&gt;api/**/RayCall.java&lt;/exclude&gt;\r\n              &lt;exclude&gt;api/**/ActorCall.java&lt;/exclude&gt;\r\n              &lt;exclude&gt;runtime/*/generated/**/*.*&lt;/exclude&gt;\r\n        &lt;/excludes&gt;\r\n        &lt;!-- define the steps to apply to those files --&gt;\r\n        &lt;trimTrailingWhitespace/&gt;\r\n        &lt;endWithNewline/&gt;\r\n        &lt;indent&gt;\r\n              &lt;tabs&gt;true&lt;/tabs&gt;\r\n              &lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\r\n        &lt;/indent&gt;\r\n    &lt;/format&gt;\r\n&lt;/formats&gt;\r\n```\r\nIn this section include / exclude pattern configured well and it works fine\r\n2. Java format\r\n```xml\r\n&lt;java&gt;\r\n    &lt;toggleOffOn&gt;\r\n        &lt;off&gt;// Generated by `RayCallGenerator.java`. DO NOT EDIT.&lt;/off&gt;\r\n    &lt;/toggleOffOn&gt;\r\n    &lt;googleJavaFormat&gt;\r\n        &lt;version&gt;1.7&lt;/version&gt;\r\n        &lt;style&gt;GOOGLE&lt;/style&gt;\r\n    &lt;/googleJavaFormat&gt;\r\n&lt;/java&gt;\r\n```\r\nIn this case there are no include / exclude pattern configured so default will be used which is\r\n```java\r\n// for default includes\r\nImmutableSet.of(&quot;src/main/java/**/*.java&quot;, &quot;src/test/java/**/*.java&quot;);\r\n\r\n// for default excludes\r\nCollections.emptySet();\r\n```\r\n\r\nNow it&#39;s easy to figure out Java formatter will analyze all java files.\r\nFortunately ```&lt;java&gt;``` formatter also supports ```&lt;includes&gt;``` and ```&lt;excludes&gt;``` so this will work:\r\n```xml\r\n&lt;java&gt;\r\n    &lt;toggleOffOn&gt;\r\n        &lt;off&gt;// Generated by `RayCallGenerator.java`. DO NOT EDIT.&lt;/off&gt;\r\n    &lt;/toggleOffOn&gt;\r\n    &lt;includes&gt;\r\n        &lt;include&gt;**/*.java&lt;/include&gt;\r\n    &lt;/includes&gt;\r\n    &lt;excludes&gt;\r\n        &lt;exclude&gt;**/api/**/RayCall.java&lt;/exclude&gt;\r\n        &lt;exclude&gt;**/api/**/ActorCall.java&lt;/exclude&gt;\r\n        &lt;exclude&gt;**/runtime/*/generated/**/*.*&lt;/exclude&gt;\r\n    &lt;/excludes&gt;\r\n    &lt;googleJavaFormat&gt;\r\n        &lt;version&gt;1.7&lt;/version&gt;\r\n        &lt;style&gt;GOOGLE&lt;/style&gt;\r\n    &lt;/googleJavaFormat&gt;\r\n&lt;/java&gt;\r\n```\r\n\r\n\r\n----------\r\n","title":"Maven spotless can&#39;t skip files","body":"<p>According to <code>pom.xml</code> snippet two different check was configured.</p>\n<ol>\n<li>Generic format</li>\n</ol>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;formats&gt;\n    &lt;format&gt;\n        &lt;!-- define the files to apply to --&gt;\n        &lt;includes&gt;\n            &lt;include&gt;*.java&lt;/include&gt;\n        &lt;/includes&gt;\n        &lt;excludes&gt;\n              &lt;exclude&gt;api/**/RayCall.java&lt;/exclude&gt;\n              &lt;exclude&gt;api/**/ActorCall.java&lt;/exclude&gt;\n              &lt;exclude&gt;runtime/*/generated/**/*.*&lt;/exclude&gt;\n        &lt;/excludes&gt;\n        &lt;!-- define the steps to apply to those files --&gt;\n        &lt;trimTrailingWhitespace/&gt;\n        &lt;endWithNewline/&gt;\n        &lt;indent&gt;\n              &lt;tabs&gt;true&lt;/tabs&gt;\n              &lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\n        &lt;/indent&gt;\n    &lt;/format&gt;\n&lt;/formats&gt;\n</code></pre>\n<p>In this section include / exclude pattern configured well and it works fine\n2. Java format</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;java&gt;\n    &lt;toggleOffOn&gt;\n        &lt;off&gt;// Generated by `RayCallGenerator.java`. DO NOT EDIT.&lt;/off&gt;\n    &lt;/toggleOffOn&gt;\n    &lt;googleJavaFormat&gt;\n        &lt;version&gt;1.7&lt;/version&gt;\n        &lt;style&gt;GOOGLE&lt;/style&gt;\n    &lt;/googleJavaFormat&gt;\n&lt;/java&gt;\n</code></pre>\n<p>In this case there are no include / exclude pattern configured so default will be used which is</p>\n<pre class=\"lang-java prettyprint-override\"><code>// for default includes\nImmutableSet.of(&quot;src/main/java/**/*.java&quot;, &quot;src/test/java/**/*.java&quot;);\n\n// for default excludes\nCollections.emptySet();\n</code></pre>\n<p>Now it's easy to figure out Java formatter will analyze all java files.\nFortunately <code>&lt;java&gt;</code> formatter also supports <code>&lt;includes&gt;</code> and <code>&lt;excludes&gt;</code> so this will work:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;java&gt;\n    &lt;toggleOffOn&gt;\n        &lt;off&gt;// Generated by `RayCallGenerator.java`. DO NOT EDIT.&lt;/off&gt;\n    &lt;/toggleOffOn&gt;\n    &lt;includes&gt;\n        &lt;include&gt;**/*.java&lt;/include&gt;\n    &lt;/includes&gt;\n    &lt;excludes&gt;\n        &lt;exclude&gt;**/api/**/RayCall.java&lt;/exclude&gt;\n        &lt;exclude&gt;**/api/**/ActorCall.java&lt;/exclude&gt;\n        &lt;exclude&gt;**/runtime/*/generated/**/*.*&lt;/exclude&gt;\n    &lt;/excludes&gt;\n    &lt;googleJavaFormat&gt;\n        &lt;version&gt;1.7&lt;/version&gt;\n        &lt;style&gt;GOOGLE&lt;/style&gt;\n    &lt;/googleJavaFormat&gt;\n&lt;/java&gt;\n</code></pre>\n<hr />\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672338708,"creation_date":1672338708,"answer_id":74954839,"question_id":65446266,"body_markdown":"Below is the working model.\r\nWe have two packages for e.g. src/main/java/com/package1 and src/main/java/com/package2\r\nAnd in below example we have excluded src/main/java/com/package1\r\n\r\n    &lt;plugin&gt;\r\n                    &lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;${spotless.version}&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;ratchetFrom&gt;origin/main&lt;/ratchetFrom&gt;\r\n                        &lt;formats&gt;\r\n                            &lt;format&gt;\r\n                                &lt;includes&gt;\r\n                                    &lt;include&gt;src/**/*.java&lt;/include&gt;\r\n                                &lt;/includes&gt;\r\n                                &lt;excludes&gt;\r\n                                    &lt;exclude&gt;src/main/java/com/package1/**/*.java&lt;/exclude&gt;\r\n                                &lt;/excludes&gt;\r\n                                &lt;trimTrailingWhitespace/&gt;\r\n                                &lt;endWithNewline/&gt;\r\n                                &lt;indent&gt;\r\n                                    &lt;spaces&gt;true&lt;/spaces&gt;\r\n                                    &lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\r\n                                &lt;/indent&gt;\r\n                            &lt;/format&gt;\r\n                        &lt;/formats&gt;\r\n                        &lt;java&gt;\r\n                            &lt;excludes&gt;\r\n                                &lt;exclude&gt;src/main/java/com/package1/**/*.java&lt;/exclude&gt;\r\n                            &lt;/excludes&gt;\r\n                            &lt;googleJavaFormat&gt;\r\n                                &lt;version&gt;1.7&lt;/version&gt;\r\n                                &lt;style&gt;AOSP&lt;/style&gt;\r\n                         &lt;reflowLongStrings&gt;true&lt;/reflowLongStrings&gt;\r\n                            &lt;/googleJavaFormat&gt;\r\n                            &lt;eclipse&gt;\r\n                                &lt;file&gt;config/code-format/eclipse-java-google-style.xml&lt;/file&gt;\r\n                            &lt;/eclipse&gt;\r\n                        &lt;/java&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;check&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;phase&gt;compile&lt;/phase&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;","title":"Maven spotless can&#39;t skip files","body":"<p>Below is the working model.\nWe have two packages for e.g. src/main/java/com/package1 and src/main/java/com/package2\nAnd in below example we have excluded src/main/java/com/package1</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\n                &lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${spotless.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;ratchetFrom&gt;origin/main&lt;/ratchetFrom&gt;\n                    &lt;formats&gt;\n                        &lt;format&gt;\n                            &lt;includes&gt;\n                                &lt;include&gt;src/**/*.java&lt;/include&gt;\n                            &lt;/includes&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;src/main/java/com/package1/**/*.java&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                            &lt;trimTrailingWhitespace/&gt;\n                            &lt;endWithNewline/&gt;\n                            &lt;indent&gt;\n                                &lt;spaces&gt;true&lt;/spaces&gt;\n                                &lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\n                            &lt;/indent&gt;\n                        &lt;/format&gt;\n                    &lt;/formats&gt;\n                    &lt;java&gt;\n                        &lt;excludes&gt;\n                            &lt;exclude&gt;src/main/java/com/package1/**/*.java&lt;/exclude&gt;\n                        &lt;/excludes&gt;\n                        &lt;googleJavaFormat&gt;\n                            &lt;version&gt;1.7&lt;/version&gt;\n                            &lt;style&gt;AOSP&lt;/style&gt;\n                     &lt;reflowLongStrings&gt;true&lt;/reflowLongStrings&gt;\n                        &lt;/googleJavaFormat&gt;\n                        &lt;eclipse&gt;\n                            &lt;file&gt;config/code-format/eclipse-java-google-style.xml&lt;/file&gt;\n                        &lt;/eclipse&gt;\n                    &lt;/java&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;check&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;compile&lt;/phase&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":7172939,"reputation":2217,"user_id":5479869,"display_name":"chaokunyang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8337,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1672338708,"creation_date":1608882973,"question_id":65446266,"body_markdown":"I&#39;m using maven spotless plugin to format java files, but it can&#39;t skip files. I used `exclude` and `toggle off`, neither works.\r\n```\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;2.6.1&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;formats&gt;\r\n      &lt;format&gt;\r\n        &lt;!-- define the files to apply to --&gt;\r\n        &lt;includes&gt;\r\n          &lt;include&gt;*.java&lt;/include&gt;\r\n        &lt;/includes&gt;\r\n        &lt;excludes&gt;\r\n          &lt;exclude&gt;api/**/RayCall.java&lt;/exclude&gt;\r\n          &lt;exclude&gt;api/**/ActorCall.java&lt;/exclude&gt;\r\n          &lt;exclude&gt;runtime/*/generated/**/*.*&lt;/exclude&gt;\r\n        &lt;/excludes&gt;\r\n        &lt;!-- define the steps to apply to those files --&gt;\r\n        &lt;trimTrailingWhitespace/&gt;\r\n        &lt;endWithNewline/&gt;\r\n        &lt;indent&gt;\r\n          &lt;tabs&gt;true&lt;/tabs&gt;\r\n          &lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\r\n        &lt;/indent&gt;\r\n      &lt;/format&gt;\r\n    &lt;/formats&gt;\r\n    &lt;!-- define a language-specific format --&gt;\r\n    &lt;java&gt;\r\n      &lt;toggleOffOn&gt;\r\n        &lt;off&gt;// Generated by `RayCallGenerator.java`. DO NOT EDIT.&lt;/off&gt;\r\n      &lt;/toggleOffOn&gt;\r\n      &lt;googleJavaFormat&gt;\r\n        &lt;version&gt;1.7&lt;/version&gt;\r\n        &lt;style&gt;GOOGLE&lt;/style&gt;\r\n      &lt;/googleJavaFormat&gt;\r\n    &lt;/java&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Maven spotless can&#39;t skip files","body":"<p>I'm using maven spotless plugin to format java files, but it can't skip files. I used <code>exclude</code> and <code>toggle off</code>, neither works.</p>\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;com.diffplug.spotless&lt;/groupId&gt;\n  &lt;artifactId&gt;spotless-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;2.6.1&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;formats&gt;\n      &lt;format&gt;\n        &lt;!-- define the files to apply to --&gt;\n        &lt;includes&gt;\n          &lt;include&gt;*.java&lt;/include&gt;\n        &lt;/includes&gt;\n        &lt;excludes&gt;\n          &lt;exclude&gt;api/**/RayCall.java&lt;/exclude&gt;\n          &lt;exclude&gt;api/**/ActorCall.java&lt;/exclude&gt;\n          &lt;exclude&gt;runtime/*/generated/**/*.*&lt;/exclude&gt;\n        &lt;/excludes&gt;\n        &lt;!-- define the steps to apply to those files --&gt;\n        &lt;trimTrailingWhitespace/&gt;\n        &lt;endWithNewline/&gt;\n        &lt;indent&gt;\n          &lt;tabs&gt;true&lt;/tabs&gt;\n          &lt;spacesPerTab&gt;2&lt;/spacesPerTab&gt;\n        &lt;/indent&gt;\n      &lt;/format&gt;\n    &lt;/formats&gt;\n    &lt;!-- define a language-specific format --&gt;\n    &lt;java&gt;\n      &lt;toggleOffOn&gt;\n        &lt;off&gt;// Generated by `RayCallGenerator.java`. DO NOT EDIT.&lt;/off&gt;\n      &lt;/toggleOffOn&gt;\n      &lt;googleJavaFormat&gt;\n        &lt;version&gt;1.7&lt;/version&gt;\n        &lt;style&gt;GOOGLE&lt;/style&gt;\n      &lt;/googleJavaFormat&gt;\n    &lt;/java&gt;\n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672334053,"post_id":74954071,"comment_id":132270542,"body_markdown":"I&#39;m going to assume you&#39;re using Windows..?","body":"I&#39;m going to assume you&#39;re using Windows..?"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1672334307,"post_id":74954071,"comment_id":132270617,"body_markdown":"@g00se I use Windows 10.","body":"@g00se I use Windows 10."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672334660,"post_id":74954071,"comment_id":132270705,"body_markdown":"Where are you reading the result - in cmd.exe?","body":"Where are you reading the result - in cmd.exe?"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1672337630,"post_id":74954071,"comment_id":132271514,"body_markdown":"@g00se I only run the app in Intellij.","body":"@g00se I only run the app in Intellij."}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1672334976,"answer_count":0,"score":0,"last_activity_date":1672338114,"creation_date":1672333703,"question_id":74954071,"body_markdown":"I have a problem about not showing some characters in Java.\r\nI use Intellij to implement an example.\r\n\r\nI have a team object shown below\r\n\r\n    public class Team {\r\n    \r\n        private String name;\r\n        private int points;\r\n        private int goalsScored;\r\n        private int goalsAgainst;\r\n        private int goalDifference;\r\n    }\r\n\r\nI assigned some values through this code snippets shown below.\r\n\r\nprivate static List&lt;Team&gt; getTeamStats() {\r\n        List&lt;Team&gt; plTeams = new ArrayList&lt;&gt;();\r\n\r\n        plTeams.add(new Team(&quot;Team &#231;&quot;, 33, 27, 12));\r\n        plTeams.add(new Team(&quot;Team &#252;&quot;, 32, 40, 16));\r\n        plTeams.add(new Team(&quot;Team ğ&quot;, 30, 24, 16));\r\n        return plTeams;\r\n}\r\n\r\nWhen I try to interate each one through this code shown below\r\n\r\nplTeams.forEach(System.out::println);\r\n\r\nI get this result.\r\n\r\n    Team �  ...\r\n    Team �  ...\r\n    Team �  ...\r\n\r\nI also tried to use `Locale.setDefault(Locale.forLanguageTag(&quot;tr-TR&quot;));` but it didn&#39;t help me fix  the issue.\r\n\r\nI also tried this but nothing changed.\r\n\r\nHelp --&gt; Edit Custom VM Options\r\n\r\n    -Duser.language=tr\r\n    -Duser.country=TR\r\n    -Duser.variant=TR\r\n\r\nHow can I fix it?\r\n","title":"Java String some characters not showing","body":"<p>I have a problem about not showing some characters in Java.\nI use Intellij to implement an example.</p>\n<p>I have a team object shown below</p>\n<pre><code>public class Team {\n\n    private String name;\n    private int points;\n    private int goalsScored;\n    private int goalsAgainst;\n    private int goalDifference;\n}\n</code></pre>\n<p>I assigned some values through this code snippets shown below.</p>\n<p>private static List getTeamStats() {\nList plTeams = new ArrayList&lt;&gt;();</p>\n<pre><code>    plTeams.add(new Team(&quot;Team ç&quot;, 33, 27, 12));\n    plTeams.add(new Team(&quot;Team ü&quot;, 32, 40, 16));\n    plTeams.add(new Team(&quot;Team ğ&quot;, 30, 24, 16));\n    return plTeams;\n</code></pre>\n<p>}</p>\n<p>When I try to interate each one through this code shown below</p>\n<p>plTeams.forEach(System.out::println);</p>\n<p>I get this result.</p>\n<pre><code>Team �  ...\nTeam �  ...\nTeam �  ...\n</code></pre>\n<p>I also tried to use <code>Locale.setDefault(Locale.forLanguageTag(&quot;tr-TR&quot;));</code> but it didn't help me fix  the issue.</p>\n<p>I also tried this but nothing changed.</p>\n<p>Help --&gt; Edit Custom VM Options</p>\n<pre><code>-Duser.language=tr\n-Duser.country=TR\n-Duser.variant=TR\n</code></pre>\n<p>How can I fix it?</p>\n"},{"tags":["java","swing","fullscreen"],"comments":[{"owner":{"account_id":585815,"reputation":17118,"user_id":261142,"accept_rate":82,"display_name":"Thomas"},"score":1,"creation_date":1269089837,"post_id":2348412,"comment_id":2475247,"body_markdown":"What&#39;s wrong with the answers given so far?","body":"What&#39;s wrong with the answers given so far?"},{"owner":{"account_id":71030,"reputation":6090,"user_id":205494,"display_name":"Benjamin Cox"},"score":0,"creation_date":1269329400,"post_id":2348412,"comment_id":2492505,"body_markdown":"Yeah, seriously.  Give it to Adamski - you won&#39;t get a better answer.","body":"Yeah, seriously.  Give it to Adamski - you won&#39;t get a better answer."},{"owner":{"account_id":585815,"reputation":17118,"user_id":261142,"accept_rate":82,"display_name":"Thomas"},"score":0,"creation_date":1269367151,"post_id":2348412,"comment_id":2496999,"body_markdown":"I mean, as long as you don&#39;t give a clue on what you don&#39;t like about the current answers, no-one is gonna be able (or willing) to come up with something else.","body":"I mean, as long as you don&#39;t give a clue on what you don&#39;t like about the current answers, no-one is gonna be able (or willing) to come up with something else."}],"answers":[{"tags":[],"owner":{"account_id":12589,"reputation":2219,"user_id":24879,"accept_rate":87,"display_name":"Sandro"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1267294602,"creation_date":1267294602,"answer_id":2348429,"question_id":2348412,"body_markdown":"You need to use the following API: http://java.sun.com/docs/books/tutorial/extra/fullscreen/index.html\r\n\r\nGoing full screen isn&#39;t as simple as making a large panel, you need to look into the underlying OS graphics. But your JPanel code should translate just fine.","title":"Making a Java panel fullscreen","body":"<p>You need to use the following API: <a href=\"http://java.sun.com/docs/books/tutorial/extra/fullscreen/index.html\" rel=\"nofollow noreferrer\">http://java.sun.com/docs/books/tutorial/extra/fullscreen/index.html</a></p>\n\n<p>Going full screen isn't as simple as making a large panel, you need to look into the underlying OS graphics. But your JPanel code should translate just fine.</p>\n"},{"tags":[],"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1267294607,"creation_date":1267294607,"answer_id":2348430,"question_id":2348412,"body_markdown":"Check out [this tutorial][1] describing Java&#39;s Full-Screen mode API.\r\n\r\nExample code (taken from the tutorial).  Note that the code operates on a `Window` so you would need to embed your `JPanel` with a `Window` (e.g. `JFrame`) in order to do this.\r\n\r\n    GraphicsDevice myDevice;\r\n    Window myWindow;\r\n    \r\n    try {\r\n        myDevice.setFullScreenWindow(myWindow);\r\n        ...\r\n    } finally {\r\n        myDevice.setFullScreenWindow(null);\r\n    }\r\n\r\n  [1]: http://java.sun.com/docs/books/tutorial/extra/fullscreen/exclusivemode.html\r\n","title":"Making a Java panel fullscreen","body":"<p>Check out <a href=\"http://java.sun.com/docs/books/tutorial/extra/fullscreen/exclusivemode.html\" rel=\"noreferrer\">this tutorial</a> describing Java's Full-Screen mode API.</p>\n\n<p>Example code (taken from the tutorial).  Note that the code operates on a <code>Window</code> so you would need to embed your <code>JPanel</code> with a <code>Window</code> (e.g. <code>JFrame</code>) in order to do this.</p>\n\n<pre><code>GraphicsDevice myDevice;\nWindow myWindow;\n\ntry {\n    myDevice.setFullScreenWindow(myWindow);\n    ...\n} finally {\n    myDevice.setFullScreenWindow(null);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4243,"reputation":1301840,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1268819384,"creation_date":1268819384,"answer_id":2461213,"question_id":2348412,"body_markdown":"You can try some of the [codes in this page][1], allowing a container to fill the screen (so it is not a solution for an *individual* component, but for a set of components within a container like a `JFrame`)\r\n\r\n\r\n    public class MainWindow extends JFrame\r\n    {\r\n      public MainWindow()\r\n      {\r\n        super(&quot;Fullscreen&quot;);\r\n        getContentPane().setPreferredSize( Toolkit.getDefaultToolkit().getScreenSize());\r\n        pack();\r\n        setResizable(false);\r\n        show();\r\n    \r\n        SwingUtilities.invokeLater(new Runnable() {\r\n          public void run()\r\n          {\r\n            Point p = new Point(0, 0);\r\n            SwingUtilities.convertPointToScreen(p, getContentPane());\r\n            Point l = getLocation();\r\n            l.x -= p.x;\r\n            l.y -= p.y;\r\n            setLocation(l);\r\n          }\r\n        });\r\n      }\r\n      ...\r\n    }\r\n\r\n  [1]: http://www.jguru.com/faq/view.jsp?EID=53106\r\n","title":"Making a Java panel fullscreen","body":"<p>You can try some of the <a href=\"http://www.jguru.com/faq/view.jsp?EID=53106\" rel=\"noreferrer\">codes in this page</a>, allowing a container to fill the screen (so it is not a solution for an <em>individual</em> component, but for a set of components within a container like a <code>JFrame</code>)</p>\n\n<pre><code>public class MainWindow extends JFrame\n{\n  public MainWindow()\n  {\n    super(\"Fullscreen\");\n    getContentPane().setPreferredSize( Toolkit.getDefaultToolkit().getScreenSize());\n    pack();\n    setResizable(false);\n    show();\n\n    SwingUtilities.invokeLater(new Runnable() {\n      public void run()\n      {\n        Point p = new Point(0, 0);\n        SwingUtilities.convertPointToScreen(p, getContentPane());\n        Point l = getLocation();\n        l.x -= p.x;\n        l.y -= p.y;\n        setLocation(l);\n      }\n    });\n  }\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user285594"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1303481656,"creation_date":1303481656,"answer_id":5756337,"question_id":2348412,"body_markdown":"I needed to search a lot, to do the same. Here is completely a working version of it by steps, so that i can find it later also, and use it.\r\n\r\nStep 1: create a file called fullscreen.java\r\n\r\nStep 2: copy this code and paste it as it is:\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    \r\n    public class fullscreen extends Window \r\n    {\r\n      private Button button;\r\n    \r\n      public fullscreen() \r\n      {\r\n        super(new Frame());\r\n        button = new Button(&quot;Close&quot;);\r\n        button.addActionListener(new ActionListener() \r\n        {\r\n          public void actionPerformed(ActionEvent e) \r\n          {\r\n            System.exit(0);\r\n          }\r\n        });\r\n    \r\n        setLayout(new FlowLayout());\r\n        add(button);\r\n    \r\n        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\r\n        setBounds(0,0,screenSize.width, screenSize.height);\r\n      }\r\n    \r\n      public static void main(String[] args) \r\n      {\r\n        // This will take over your whole screen tested and works in my:\r\n        // Fedora 12/13/14\r\n        // CentOS 5.0\r\n        // if this works for you, in other platforms, please leave a comments which OS it worked.\r\n        // happy coding!\r\n        new fullscreen().setVisible(true);\r\n      }\r\n    \r\n    }\r\n\r\nStep 3: compile the code and run\r\n\r\nDone.\r\n ","title":"Making a Java panel fullscreen","body":"<p>I needed to search a lot, to do the same. Here is completely a working version of it by steps, so that i can find it later also, and use it.</p>\n\n<p>Step 1: create a file called fullscreen.java</p>\n\n<p>Step 2: copy this code and paste it as it is:</p>\n\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.*;\n\npublic class fullscreen extends Window \n{\n  private Button button;\n\n  public fullscreen() \n  {\n    super(new Frame());\n    button = new Button(\"Close\");\n    button.addActionListener(new ActionListener() \n    {\n      public void actionPerformed(ActionEvent e) \n      {\n        System.exit(0);\n      }\n    });\n\n    setLayout(new FlowLayout());\n    add(button);\n\n    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();\n    setBounds(0,0,screenSize.width, screenSize.height);\n  }\n\n  public static void main(String[] args) \n  {\n    // This will take over your whole screen tested and works in my:\n    // Fedora 12/13/14\n    // CentOS 5.0\n    // if this works for you, in other platforms, please leave a comments which OS it worked.\n    // happy coding!\n    new fullscreen().setVisible(true);\n  }\n\n}\n</code></pre>\n\n<p>Step 3: compile the code and run</p>\n\n<p>Done.</p>\n"},{"tags":[],"owner":{"account_id":4182234,"reputation":1,"user_id":3426905,"display_name":"user3426905"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1395008378,"creation_date":1395007074,"answer_id":22443612,"question_id":2348412,"body_markdown":"If I were you I would try to make Java not draw the border of the Jframe, then make it take all the screen.\r\n\r\n    import java.awt.GraphicsEnvironment;\r\n    import java.awt.Rectangle;\r\n\r\n    import javax.swing.JFrame;\r\n\r\n\r\n    public class FenNoBorder extends JFrame {\r\n\t\r\n        public FenNoBorder () {\r\n            setUndecorated(true);\r\n            setVisible(true);\r\n            GraphicsEnvironment graphicsEnvironment=GraphicsEnvironment.getLocalGraphicsEnvironment();\r\n            Rectangle maximumWindowBounds=graphicsEnvironment.getMaximumWindowBounds();\r\n            setBounds(maximumWindowBounds);\r\n        }\r\n    }","title":"Making a Java panel fullscreen","body":"<p>If I were you I would try to make Java not draw the border of the Jframe, then make it take all the screen.</p>\n\n<pre><code>import java.awt.GraphicsEnvironment;\nimport java.awt.Rectangle;\n\nimport javax.swing.JFrame;\n\n\npublic class FenNoBorder extends JFrame {\n\n    public FenNoBorder () {\n        setUndecorated(true);\n        setVisible(true);\n        GraphicsEnvironment graphicsEnvironment=GraphicsEnvironment.getLocalGraphicsEnvironment();\n        Rectangle maximumWindowBounds=graphicsEnvironment.getMaximumWindowBounds();\n        setBounds(maximumWindowBounds);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":34541,"reputation":33228,"user_id":97688,"accept_rate":76,"display_name":"clamp"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32993,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":2461213,"answer_count":5,"score":16,"last_activity_date":1672338062,"creation_date":1267294354,"question_id":2348412,"body_markdown":"How would you make a `JComponent` (panel, frame, window, etc.) fullscreen, so that it also overlaps everything on the screen including the windows start bar?\r\n\r\nI don&#39;t want to change the resolution or anything with the graphics device like bitdepth etc, I just want to overlap everything else.","title":"Making a Java panel fullscreen","body":"<p>How would you make a <code>JComponent</code> (panel, frame, window, etc.) fullscreen, so that it also overlaps everything on the screen including the windows start bar?</p>\n\n<p>I don't want to change the resolution or anything with the graphics device like bitdepth etc, I just want to overlap everything else.</p>\n"},{"tags":["java","multithreading","thread-safety","interrupt-handling"],"answers":[{"tags":[],"owner":{"account_id":333768,"reputation":80790,"user_id":659804,"accept_rate":100,"display_name":"Ernest Friedman-Hill"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1320754846,"creation_date":1320754846,"answer_id":8050257,"question_id":8050235,"body_markdown":"The thread is still running simply because you catch `InterruptedException` and keep running. `interrupt()` primarily sets a flag in the `Thread` object, which you can check with `isInterrupted()`. It also causes some methods -- `sleep()`, `join` `Object.wait()`, in particular -- to return immediately by throwing an `InterruptedException`. It also causes some I/O operations to immediately terminate. If you&#39;re seeing the printouts from your `catch` block, then you can see that `interrupt()` is working.","title":"interrupt() not working as expected (how does interrupt work?)","body":"<p>The thread is still running simply because you catch <code>InterruptedException</code> and keep running. <code>interrupt()</code> primarily sets a flag in the <code>Thread</code> object, which you can check with <code>isInterrupted()</code>. It also causes some methods -- <code>sleep()</code>, <code>join</code> <code>Object.wait()</code>, in particular -- to return immediately by throwing an <code>InterruptedException</code>. It also causes some I/O operations to immediately terminate. If you're seeing the printouts from your <code>catch</code> block, then you can see that <code>interrupt()</code> is working.</p>\n"},{"tags":[],"owner":{"account_id":285919,"reputation":43640,"user_id":584862,"accept_rate":93,"display_name":"mre"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1415718055,"creation_date":1320757553,"answer_id":8050833,"question_id":8050235,"body_markdown":"As others have said, you catch the interrupt, but do nothing with it. What you need to do is *propagate* the interrupt using logic such as,\r\n\r\n    while(!Thread.currentThread().isInterrupted()){\r\n        try{\r\n            // do stuff\r\n        }catch(InterruptedException e){\r\n            Thread.currentThread().interrupt(); // propagate interrupt\r\n        }\r\n    }\r\n\r\nUsing looping logic, such as `while(true)` is just lazy coding. Instead, poll the thread&#39;s interrupted flag in order to determine termination via interruption.","title":"interrupt() not working as expected (how does interrupt work?)","body":"<p>As others have said, you catch the interrupt, but do nothing with it. What you need to do is <em>propagate</em> the interrupt using logic such as,</p>\n\n<pre><code>while(!Thread.currentThread().isInterrupted()){\n    try{\n        // do stuff\n    }catch(InterruptedException e){\n        Thread.currentThread().interrupt(); // propagate interrupt\n    }\n}\n</code></pre>\n\n<p>Using looping logic, such as <code>while(true)</code> is just lazy coding. Instead, poll the thread's interrupted flag in order to determine termination via interruption.</p>\n"},{"tags":[],"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672337802,"creation_date":1672337480,"answer_id":74954650,"question_id":8050235,"body_markdown":"++1, in addition to other answers. I believe the misconception about this was that it seemed the `try/catch` block finished its job after the `Thread.sleep(1000);` call i.e. *try to sleep for 1000ms, catch anything that might interrupt my sleep attempt*. \r\n\r\nWhat is happening actually is that the `try/catch` block is still very much active while sleeping i.e. *try to sleep for 1000ms, catch anything that might interrupt during my sleep* \r\n\r\nHence the reason why the exception is being caught immediately (and afterwards) since the thread barely just started its sleep.","title":"interrupt() not working as expected (how does interrupt work?)","body":"<p>++1, in addition to other answers. I believe the misconception about this was that it seemed the <code>try/catch</code> block finished its job after the <code>Thread.sleep(1000);</code> call i.e. <em>try to sleep for 1000ms, catch anything that might interrupt my sleep attempt</em>.</p>\n<p>What is happening actually is that the <code>try/catch</code> block is still very much active while sleeping i.e. <em>try to sleep for 1000ms, catch anything that might interrupt during my sleep</em></p>\n<p>Hence the reason why the exception is being caught immediately (and afterwards) since the thread barely just started its sleep.</p>\n"}],"owner":{"account_id":185580,"reputation":1631,"user_id":422390,"accept_rate":57,"display_name":"jason"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17460,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":8050257,"answer_count":3,"score":8,"last_activity_date":1672337802,"creation_date":1320754736,"question_id":8050235,"body_markdown":"I want to interrupt a thread, but invoking `interrupt()` doesn&#39;t seem to work. Below is the sample code:\r\n\r\n    public class BasicThreadrRunner {\r\n        public static void main(String[] args) {\r\n    \t\tThread t1 = new Thread(new Basic(), &quot;thread1&quot;);\r\n    \t\tt1.start();\r\n    \t\tThread t3 = new Thread(new Basic(), &quot;thread3&quot;);\r\n    \t\tThread t4 = new Thread(new Basic(), &quot;thread4&quot;);\r\n    \t\tt3.start();\r\n    \t\tt1.interrupt();\r\n    \t\tt4.start();\r\n    \t}\r\n    }\r\n    class Basic implements Runnable{\r\n    \tpublic void run(){\r\n    \t\twhile(true) {\r\n    \t\t\tSystem.out.println(Thread.currentThread().getName());\r\n    \t\t\ttry {\r\n    \t\t\t\tThread.sleep(1000);\r\n    \t\t\t} catch (InterruptedException e) {\r\n    \t\t\t\tSystem.err.println(&quot;thread: &quot; + Thread.currentThread().getName());\r\n    \t\t\t\t//e.printStackTrace();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nbut the output looks like thread 1 is still running. Can anyone explain this as well as how `interrupt()` works? Thanks!\r\n","title":"interrupt() not working as expected (how does interrupt work?)","body":"<p>I want to interrupt a thread, but invoking <code>interrupt()</code> doesn't seem to work. Below is the sample code:</p>\n\n<pre><code>public class BasicThreadrRunner {\n    public static void main(String[] args) {\n        Thread t1 = new Thread(new Basic(), \"thread1\");\n        t1.start();\n        Thread t3 = new Thread(new Basic(), \"thread3\");\n        Thread t4 = new Thread(new Basic(), \"thread4\");\n        t3.start();\n        t1.interrupt();\n        t4.start();\n    }\n}\nclass Basic implements Runnable{\n    public void run(){\n        while(true) {\n            System.out.println(Thread.currentThread().getName());\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                System.err.println(\"thread: \" + Thread.currentThread().getName());\n                //e.printStackTrace();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>but the output looks like thread 1 is still running. Can anyone explain this as well as how <code>interrupt()</code> works? Thanks!</p>\n"},{"tags":["java","networking","guava"],"answers":[{"tags":[],"owner":{"account_id":56256,"reputation":53237,"user_id":168493,"accept_rate":92,"display_name":"Marcus Adams"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1396629979,"creation_date":1396617786,"answer_id":22864072,"question_id":22863984,"body_markdown":"This is straight from [wikipedia][1]:\r\n\r\n&gt; The full domain name may not exceed the length of 253 characters in\r\n&gt; its textual representation. In the internal binary representation of\r\n&gt; the DNS the maximum length requires 255 octets of storage, since it\r\n&gt; also stores the length of the name.\r\n\r\nAnd this is from [RFC 1035][2]:\r\n\r\n&gt; Each label is represented as a one octet length field followed by that\r\n&gt; number of octets. Since every domain name ends with the null label of\r\n&gt; the root, a domain name is terminated by a length byte of zero.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Domain_Name_System\r\n  [2]: http://www.ietf.org/rfc/rfc1035.txt","title":"Maximum length of domain name","body":"<p>This is straight from <a href=\"http://en.wikipedia.org/wiki/Domain_Name_System\" rel=\"nofollow\">wikipedia</a>:</p>\n\n<blockquote>\n  <p>The full domain name may not exceed the length of 253 characters in\n  its textual representation. In the internal binary representation of\n  the DNS the maximum length requires 255 octets of storage, since it\n  also stores the length of the name.</p>\n</blockquote>\n\n<p>And this is from <a href=\"http://www.ietf.org/rfc/rfc1035.txt\" rel=\"nofollow\">RFC 1035</a>:</p>\n\n<blockquote>\n  <p>Each label is represented as a one octet length field followed by that\n  number of octets. Since every domain name ends with the null label of\n  the root, a domain name is terminated by a length byte of zero.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2828461,"reputation":19324,"user_id":2430549,"display_name":"HoldOffHunger"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615913756,"creation_date":1615913756,"answer_id":66659798,"question_id":22863984,"body_markdown":"&lt;h2&gt;TLDR&lt;/h2&gt;\r\n\r\nIf you just want to use the domain *as a website*, the limit is: `255` characters.\r\n\r\nIf you just want to use the domain *with email*, the limit is: `253` characters.\r\n\r\n&lt;h2&gt;Source - As a Website&lt;/h2&gt;\r\n\r\n[**RFC2821**][1] (April 2001) established the `255`-character limit on domains and [**RFC5321**][2] (October 2008) retained this standard.  To quote both of them...\r\n\r\n&gt;4.5.3.1.2. Domain\r\n&gt;\r\n&gt;The maximum total length of a domain name or number is 255 characters.\r\n\r\n&lt;h2&gt;Source - For Emails&lt;/h2&gt;\r\n\r\nAn email address must be in the form of `a@example.com`, based on what we see from [**RFC821**][3] (August 1982).  The `to` field in SMTP cannot exceed 255 characters.  The shortest possible local-part, `a`, is one character, `@` is one character, which leaves only `253` characters remaining for a domain.\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc2821\r\n  [2]: https://www.rfc-editor.org/rfc/rfc5321\r\n  [3]: https://www.rfc-editor.org/rfc/rfc821","title":"Maximum length of domain name","body":"<h2>TLDR</h2>\n<p>If you just want to use the domain <em>as a website</em>, the limit is: <code>255</code> characters.</p>\n<p>If you just want to use the domain <em>with email</em>, the limit is: <code>253</code> characters.</p>\n<h2>Source - As a Website</h2>\n<p><a href=\"https://www.rfc-editor.org/rfc/rfc2821\" rel=\"nofollow noreferrer\"><strong>RFC2821</strong></a> (April 2001) established the <code>255</code>-character limit on domains and <a href=\"https://www.rfc-editor.org/rfc/rfc5321\" rel=\"nofollow noreferrer\"><strong>RFC5321</strong></a> (October 2008) retained this standard.  To quote both of them...</p>\n<blockquote>\n<p>4.5.3.1.2. Domain</p>\n<p>The maximum total length of a domain name or number is 255 characters.</p>\n</blockquote>\n<h2>Source - For Emails</h2>\n<p>An email address must be in the form of <code>a@example.com</code>, based on what we see from <a href=\"https://www.rfc-editor.org/rfc/rfc821\" rel=\"nofollow noreferrer\"><strong>RFC821</strong></a> (August 1982).  The <code>to</code> field in SMTP cannot exceed 255 characters.  The shortest possible local-part, <code>a</code>, is one character, <code>@</code> is one character, which leaves only <code>253</code> characters remaining for a domain.</p>\n"},{"tags":[],"owner":{"account_id":4644857,"reputation":140,"user_id":3814094,"display_name":"Saikiran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672337783,"creation_date":1672337783,"answer_id":74954695,"question_id":22863984,"body_markdown":"As per [RFC1123](https://www.rfc-editor.org/rfc/rfc1123) Section 2.1, *Host software MUST handle host names of up to 63 characters and SHOULD handle host names of up to 255 characters; which means it should be able to accept and process host names of any length up to 63 characters without issue, and should be able to accept and process host names of up to 255 characters if possible.*","title":"Maximum length of domain name","body":"<p>As per <a href=\"https://www.rfc-editor.org/rfc/rfc1123\" rel=\"nofollow noreferrer\">RFC1123</a> Section 2.1, <em>Host software MUST handle host names of up to 63 characters and SHOULD handle host names of up to 255 characters; which means it should be able to accept and process host names of any length up to 63 characters without issue, and should be able to accept and process host names of up to 255 characters if possible.</em></p>\n"}],"owner":{"account_id":1737509,"reputation":2183,"user_id":1589723,"accept_rate":45,"display_name":"fashuser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1799,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":22864072,"answer_count":3,"score":3,"last_activity_date":1672337783,"creation_date":1396617539,"question_id":22863984,"body_markdown":"As I noticed class from google library `com.google.common.net.InternetDomainName` containts the following constant:\r\n\r\n    private static final int MAX_LENGTH = 253;\r\n\r\nCode below, checks length during creation of InternetDomainName instance:\r\n   \r\n\r\n     checkArgument(name.length() &lt;= MAX_LENGTH, &quot;Domain name too long: &#39;%s&#39;:&quot;, name);\r\n\r\nBut RFC-2181 says that:\r\n\r\n    A full domain name is limited to 255 octets (including the separators).\r\n\r\nSo, what is valid max length for domain name?","title":"Maximum length of domain name","body":"<p>As I noticed class from google library <code>com.google.common.net.InternetDomainName</code> containts the following constant:</p>\n\n<pre><code>private static final int MAX_LENGTH = 253;\n</code></pre>\n\n<p>Code below, checks length during creation of InternetDomainName instance:</p>\n\n<pre><code> checkArgument(name.length() &lt;= MAX_LENGTH, \"Domain name too long: '%s':\", name);\n</code></pre>\n\n<p>But RFC-2181 says that:</p>\n\n<pre><code>A full domain name is limited to 255 octets (including the separators).\n</code></pre>\n\n<p>So, what is valid max length for domain name?</p>\n"},{"tags":["java","amazon-web-services","amazon-sqs"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1672312492,"post_id":74950338,"comment_id":132264463,"body_markdown":"What `maxRecieved` are you talking about? What is your code, what are you calling and how?","body":"What <code>maxRecieved</code> are you talking about? What is your code, what are you calling and how?"},{"owner":{"account_id":27382017,"reputation":1,"user_id":20886488,"display_name":"ExpectedSarsa96"},"score":0,"creation_date":1672337471,"post_id":74950338,"comment_id":132271482,"body_markdown":"Added details on the post by maximum receives I meant the number of retries specificed for sqs before sending to the dead letter queue as for the code I added the code to the description","body":"Added details on the post by maximum receives I meant the number of retries specificed for sqs before sending to the dead letter queue as for the code I added the code to the description"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1672346383,"post_id":74950338,"comment_id":132273667,"body_markdown":"The maximum receives has NOTHING to do with sending messages / message batches, that is a configuration on the queue itself in terms of how many times a message can be received.","body":"The maximum receives has NOTHING to do with sending messages / message batches, that is a configuration on the queue itself in terms of how many times a message can be received."},{"owner":{"account_id":27382017,"reputation":1,"user_id":20886488,"display_name":"ExpectedSarsa96"},"score":0,"creation_date":1672349002,"post_id":74950338,"comment_id":132274234,"body_markdown":"Ok so basically the response from this function has nothing to do with the aws lambda service called by sqs it just returns the messages status of reaching sqs am I right?","body":"Ok so basically the response from this function has nothing to do with the aws lambda service called by sqs it just returns the messages status of reaching sqs am I right?"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1672388242,"post_id":74950338,"comment_id":132279910,"body_markdown":"Yes, that is correct.","body":"Yes, that is correct."}],"owner":{"account_id":27382017,"reputation":1,"user_id":20886488,"display_name":"ExpectedSarsa96"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":370,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672337368,"creation_date":1672312104,"question_id":74950338,"body_markdown":"I wanted to clear something up. So this function returns a response for successful and failed batch entries. For failed batch entries if I set the maximum recieves for a message attribute for the dead letter queue to 3 found here https://stackoverflow.com/questions/42142954/amazon-sqs-how-to-control-the-number-of-retries are the batches retried immediately before the response or are they retried asynchronously.\r\n\r\n    public SendMessageBatchResponse sendBatch(List&lt;SendMessageBatchRequestEntry&gt; entryList){\r\n           return this.sqsClient.sendMessageBatch(SendMessageBatchRequest.builder().queueUrl(this.queueUrl).entries(entryList).build());}\r\n\r\nIt&#39;s not clear from the aws docs what is the case.","title":"Amazon SQS sendMessageBatch() response and retries","body":"<p>I wanted to clear something up. So this function returns a response for successful and failed batch entries. For failed batch entries if I set the maximum recieves for a message attribute for the dead letter queue to 3 found here <a href=\"https://stackoverflow.com/questions/42142954/amazon-sqs-how-to-control-the-number-of-retries\">Amazon SQS how to control the number of retries</a> are the batches retried immediately before the response or are they retried asynchronously.</p>\n<pre><code>public SendMessageBatchResponse sendBatch(List&lt;SendMessageBatchRequestEntry&gt; entryList){\n       return this.sqsClient.sendMessageBatch(SendMessageBatchRequest.builder().queueUrl(this.queueUrl).entries(entryList).build());}\n</code></pre>\n<p>It's not clear from the aws docs what is the case.</p>\n"},{"tags":["java","multithreading","sockets","chat","desktop-application"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1672296461,"post_id":74948011,"comment_id":132260493,"body_markdown":"You have many empty catch blocks -- don&#39;t do this, you will not be able to see when your program has errors. Please add the full stack trace of your exception to your question.","body":"You have many empty catch blocks -- don&#39;t do this, you will not be able to see when your program has errors. Please add the full stack trace of your exception to your question."}],"owner":{"account_id":25946567,"reputation":1,"user_id":19665222,"display_name":"Abdullah Shahid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672337013,"creation_date":1672295988,"question_id":74948011,"body_markdown":"![1]\r\n\r\nI wrote this code in java based on sockets and thread pool. The server code runs on its own but when I run the client code after running the server, an exception on the server appears. What could be causing this?\r\n\r\n```\r\n\r\nBelow  is the server class which conatains threads for each new client\r\n\r\npackage java_40;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.PrintWriter;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\nimport java.util.ArrayList;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n//Server Implementation\r\n/**\r\n *\r\n * @author Abdullah\r\n */\r\npublic class Server implements Runnable {\r\n    \r\nprivate ArrayList&lt;ConnectionHandler&gt; connections;\r\nprivate ServerSocket server;\r\nprivate boolean done;\r\nprivate ExecutorService pool;\r\n\r\npublic Server (){\r\n    connections = new ArrayList&lt;&gt;();\r\n    done = false;\r\n \r\n}\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            \r\n            while(!done){\r\n            server = new ServerSocket(9999);\r\n            pool = Executors.newCachedThreadPool();\r\n            \r\n            Socket client = server.accept();\r\n            ConnectionHandler handler = new ConnectionHandler(client);\r\n            connections.add(handler);\r\n            pool.execute(handler);\r\n            }\r\n            \r\n        } catch (IOException ex) {\r\n           shutdown();\r\n        }\r\n    }\r\n    \r\n    public void broadcast(String message){\r\n        for(ConnectionHandler ch :connections){\r\n            if(ch !=null){\r\n                ch.sendMessage(message);\r\n            }\r\n        }\r\n    }\r\n    \r\n    public void shutdown(){\r\n        try{\r\n        done=true;\r\n        \r\n        if(!server.isClosed()){\r\n            server.close();\r\n        }\r\n        for(ConnectionHandler ch : connections){\r\n            ch.shutdown();\r\n        }\r\n        }catch(IOException e){\r\n//           ignore \r\n        }\r\n    }\r\n    \r\n    \r\n    \r\n    class ConnectionHandler implements Runnable{        //handles individual client connection\r\n\r\n        private final Socket client;\r\n        private BufferedReader in;\r\n        private PrintWriter out;\r\n        private  String nickname;\r\n\r\n        \r\n        public ConnectionHandler(Socket client){\r\n          this.client = client;  \r\n        }\r\n        \r\n        \r\n        @Override\r\n        public void run() {\r\n            \r\n            if(client != null){\r\n            try{\r\n                out = new PrintWriter(client.getOutputStream(), true);\r\n                in = new BufferedReader(new InputStreamReader(client.getInputStream()));\r\n                out.println(&quot;Enter nickname&quot;);\r\n                nickname =in.readLine();\r\n\r\n                System.out.println(nickname+&quot; connected&quot;);\r\n                broadcast(nickname + &quot; has joined the chat&quot;);\r\n                String message;\r\n                \r\n                while((message = in.readLine()) !=null){\r\n                    if (message.startsWith(&quot;/nick&quot;))\r\n                    {\r\n//                         TODO: handle nickname\r\n                        String[] messageSplit = message.split(&quot; &quot;, 2);\r\n                        \r\n                        if(messageSplit.length == 2){\r\n                            \r\n                            broadcast(nickname + &quot; renamed themselves to &quot; + messageSplit[1]);\r\n                            System.out.println(nickname + &quot; renamed themselves to &quot; + messageSplit[1]);\r\n                            nickname = messageSplit[1];\r\n                            out.println(&quot;Successfully changed nickname to &quot; + nickname);\r\n                            \r\n                        }else{\r\n                            out.println(&quot;No nickname provided&quot;);\r\n                        }\r\n                    }\r\n                    else if(message.startsWith(&quot;/quit&quot;)){\r\n                        \r\n                        broadcast(nickname + &quot; has left the chat&quot;);\r\n//                        shutdown();\r\n                }\r\n                    else{\r\n                        broadcast(nickname + &quot;: &quot; + message);\r\n                    }\r\n                }\r\n                \r\n            } catch(IOException e){\r\n                if(this.in != null &amp;&amp; this.out !=  null){\r\n                  shutdown();\r\n                }\r\n            }\r\n         }\r\n        }\r\n        \r\n        public void sendMessage(String message){\r\n           out.println(message);\r\n        }\r\n        \r\n        public void shutdown(){\r\n            try{\r\n               \r\n            in.close();\r\n            out.close();\r\n            if(!client.isClosed()){\r\n                client.close();\r\n                \r\n            }\r\n            }catch(IOException e){\r\n                // ignore\r\n            }\r\n        }\r\n\r\n\r\n\r\n        \r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        // TODO code application logic here\r\n        \r\n        Server server =new Server();\r\n        server.run();\r\n    }\r\n}\r\n\r\n```\r\n\r\nbelow is the client class in which client has been implemented. A great number of clients can connect to the server through cmd.\r\n```\r\n/*\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\r\n * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template\r\n */\r\npackage java_40;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.PrintWriter;\r\nimport java.net.Socket;\r\n\r\npublic class client implements Runnable{\r\n\r\n    private Socket client;\r\n    private BufferedReader in;\r\n    private PrintWriter out;\r\n    private boolean done;\r\n    @Override\r\n    public void run() {\r\n        \r\n        try{\r\n            Socket client = new Socket(&quot;127.0.0.1&quot;,9999); // if you want to connect to someone elses server replace the ip with their ip as of now this our own ip\r\n            out = new PrintWriter(client.getOutputStream(),true);\r\n            in = new BufferedReader(new InputStreamReader(client.getInputStream()));\r\n            \r\n            \r\n            InputHandler inHandler = new InputHandler();\r\n            Thread t = new Thread(inHandler);\r\n            t.start();\r\n            \r\n            String inMessage;\r\n            \r\n            while((inMessage = in.readLine()) != null )\r\n            {\r\n                System.out.println(inMessage);\r\n            }\r\n            \r\n        }catch(IOException e){\r\n           // shutdown();\r\n        }\r\n    }\r\n    private void shutdown(){\r\n        done =true;\r\n        try{\r\n            in.close();\r\n            out.close();\r\n            \r\n            if(!client.isClosed()){\r\n            client.close();\r\n        }\r\n        }catch(IOException e){\r\n            // ignore\r\n        }\r\n    }\r\n    \r\n     class InputHandler implements Runnable{\r\n\r\n        @Override\r\n        public void run() {\r\n            try{\r\n                BufferedReader inReader = new BufferedReader(new InputStreamReader(System.in));\r\n                while(!done){\r\n                    String message = inReader.readLine();\r\n                    if(message.equals(&quot;/quits&quot;)){\r\n                        inReader.close();\r\n                        shutdown();\r\n                        \r\n                    }else{\r\n                        out.println(message);\r\n                    }\r\n                }\r\n            }catch(IOException e){\r\n               // shutdown();\r\n            }\r\n        }\r\n         \r\n     }\r\n     public static void main(String[] args) {\r\n       \r\n        client c = new client();\r\n        c.run();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sPIiR.png","title":"Problem in Client and Server Architecture. Exception in thread appears","body":"<p><img src=\"https://i.stack.imgur.com/sPIiR.png\" alt=\"1\" /></p>\n<p>I wrote this code in java based on sockets and thread pool. The server code runs on its own but when I run the client code after running the server, an exception on the server appears. What could be causing this?</p>\n<pre><code>\nBelow  is the server class which conatains threads for each new client\n\npackage java_40;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n//Server Implementation\n/**\n *\n * @author Abdullah\n */\npublic class Server implements Runnable {\n    \nprivate ArrayList&lt;ConnectionHandler&gt; connections;\nprivate ServerSocket server;\nprivate boolean done;\nprivate ExecutorService pool;\n\npublic Server (){\n    connections = new ArrayList&lt;&gt;();\n    done = false;\n \n}\n    @Override\n    public void run() {\n        try {\n            \n            while(!done){\n            server = new ServerSocket(9999);\n            pool = Executors.newCachedThreadPool();\n            \n            Socket client = server.accept();\n            ConnectionHandler handler = new ConnectionHandler(client);\n            connections.add(handler);\n            pool.execute(handler);\n            }\n            \n        } catch (IOException ex) {\n           shutdown();\n        }\n    }\n    \n    public void broadcast(String message){\n        for(ConnectionHandler ch :connections){\n            if(ch !=null){\n                ch.sendMessage(message);\n            }\n        }\n    }\n    \n    public void shutdown(){\n        try{\n        done=true;\n        \n        if(!server.isClosed()){\n            server.close();\n        }\n        for(ConnectionHandler ch : connections){\n            ch.shutdown();\n        }\n        }catch(IOException e){\n//           ignore \n        }\n    }\n    \n    \n    \n    class ConnectionHandler implements Runnable{        //handles individual client connection\n\n        private final Socket client;\n        private BufferedReader in;\n        private PrintWriter out;\n        private  String nickname;\n\n        \n        public ConnectionHandler(Socket client){\n          this.client = client;  \n        }\n        \n        \n        @Override\n        public void run() {\n            \n            if(client != null){\n            try{\n                out = new PrintWriter(client.getOutputStream(), true);\n                in = new BufferedReader(new InputStreamReader(client.getInputStream()));\n                out.println(&quot;Enter nickname&quot;);\n                nickname =in.readLine();\n\n                System.out.println(nickname+&quot; connected&quot;);\n                broadcast(nickname + &quot; has joined the chat&quot;);\n                String message;\n                \n                while((message = in.readLine()) !=null){\n                    if (message.startsWith(&quot;/nick&quot;))\n                    {\n//                         TODO: handle nickname\n                        String[] messageSplit = message.split(&quot; &quot;, 2);\n                        \n                        if(messageSplit.length == 2){\n                            \n                            broadcast(nickname + &quot; renamed themselves to &quot; + messageSplit[1]);\n                            System.out.println(nickname + &quot; renamed themselves to &quot; + messageSplit[1]);\n                            nickname = messageSplit[1];\n                            out.println(&quot;Successfully changed nickname to &quot; + nickname);\n                            \n                        }else{\n                            out.println(&quot;No nickname provided&quot;);\n                        }\n                    }\n                    else if(message.startsWith(&quot;/quit&quot;)){\n                        \n                        broadcast(nickname + &quot; has left the chat&quot;);\n//                        shutdown();\n                }\n                    else{\n                        broadcast(nickname + &quot;: &quot; + message);\n                    }\n                }\n                \n            } catch(IOException e){\n                if(this.in != null &amp;&amp; this.out !=  null){\n                  shutdown();\n                }\n            }\n         }\n        }\n        \n        public void sendMessage(String message){\n           out.println(message);\n        }\n        \n        public void shutdown(){\n            try{\n               \n            in.close();\n            out.close();\n            if(!client.isClosed()){\n                client.close();\n                \n            }\n            }catch(IOException e){\n                // ignore\n            }\n        }\n\n\n\n        \n    }\n    \n    public static void main(String[] args) {\n        // TODO code application logic here\n        \n        Server server =new Server();\n        server.run();\n    }\n}\n\n</code></pre>\n<p>below is the client class in which client has been implemented. A great number of clients can connect to the server through cmd.</p>\n<pre><code>/*\n * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license\n * Click nbfs://nbhost/SystemFileSystem/Templates/Classes/Class.java to edit this template\n */\npackage java_40;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.PrintWriter;\nimport java.net.Socket;\n\npublic class client implements Runnable{\n\n    private Socket client;\n    private BufferedReader in;\n    private PrintWriter out;\n    private boolean done;\n    @Override\n    public void run() {\n        \n        try{\n            Socket client = new Socket(&quot;127.0.0.1&quot;,9999); // if you want to connect to someone elses server replace the ip with their ip as of now this our own ip\n            out = new PrintWriter(client.getOutputStream(),true);\n            in = new BufferedReader(new InputStreamReader(client.getInputStream()));\n            \n            \n            InputHandler inHandler = new InputHandler();\n            Thread t = new Thread(inHandler);\n            t.start();\n            \n            String inMessage;\n            \n            while((inMessage = in.readLine()) != null )\n            {\n                System.out.println(inMessage);\n            }\n            \n        }catch(IOException e){\n           // shutdown();\n        }\n    }\n    private void shutdown(){\n        done =true;\n        try{\n            in.close();\n            out.close();\n            \n            if(!client.isClosed()){\n            client.close();\n        }\n        }catch(IOException e){\n            // ignore\n        }\n    }\n    \n     class InputHandler implements Runnable{\n\n        @Override\n        public void run() {\n            try{\n                BufferedReader inReader = new BufferedReader(new InputStreamReader(System.in));\n                while(!done){\n                    String message = inReader.readLine();\n                    if(message.equals(&quot;/quits&quot;)){\n                        inReader.close();\n                        shutdown();\n                        \n                    }else{\n                        out.println(message);\n                    }\n                }\n            }catch(IOException e){\n               // shutdown();\n            }\n        }\n         \n     }\n     public static void main(String[] args) {\n       \n        client c = new client();\n        c.run();\n    }\n}\n\n</code></pre>\n"},{"tags":["java","jakarta-ee","jstl","apache-commons","apache-stringutils"],"answers":[{"tags":[],"owner":{"account_id":1382728,"reputation":7329,"user_id":1315397,"accept_rate":84,"display_name":"John Farrelly"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1402473732,"creation_date":1356560921,"answer_id":14047026,"question_id":14041754,"body_markdown":"Nic,\r\n\r\nThere often isn&#39;t a predefined tag to get at the apache util methods, but it&#39;s easy to add your own special tag definitions to point to the method you want.  For example, add a local taglib definition to your web.xml file:\r\n\r\n    &lt;jsp-config&gt; \r\n        &lt;taglib&gt; \r\n            &lt;taglib-uri&gt;mytags&lt;/taglib-uri&gt; \r\n            &lt;taglib-location&gt;/WEB-INF/jsp/mytaglib.tld&lt;/taglib-location&gt; \r\n        &lt;/taglib&gt; \r\n    &lt;/jsp-config&gt;\r\n\r\nYour mytaglib.tld file will look something like this:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;taglib version=&quot;2.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n        &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;\r\n        &lt;function&gt;\r\n            &lt;description&gt;Exposes the abbreviate() function from Apache StringUtils&lt;/description&gt;\r\n            &lt;name&gt;abbreviate&lt;/name&gt;\r\n            &lt;function-class&gt;org.apache.commons.lang.StringUtils&lt;/function-class&gt;\r\n            &lt;function-signature&gt;java.lang.String abbreviate(java.lang.String,\r\n                                int)&lt;/function-signature&gt;\r\n        &lt;/function&gt;\r\n    &lt;/taglib&gt;\r\n\r\nIn your JSP, you can then use your new custom tag:\r\n\r\n    &lt;%@ taglib prefix=&quot;mytags&quot; uri=&quot;mytags&quot; %&gt;\r\n    ...\r\n    &lt;c:out value=&quot;${mytags:abbreviate(myString, 5)&quot;/&gt;\r\n\r\nThat should do it for you.  For more info on custom tags, you can read here: http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html","title":"apache commons lang3 stringutils taglib","body":"<p>Nic,</p>\n\n<p>There often isn't a predefined tag to get at the apache util methods, but it's easy to add your own special tag definitions to point to the method you want.  For example, add a local taglib definition to your web.xml file:</p>\n\n<pre><code>&lt;jsp-config&gt; \n    &lt;taglib&gt; \n        &lt;taglib-uri&gt;mytags&lt;/taglib-uri&gt; \n        &lt;taglib-location&gt;/WEB-INF/jsp/mytaglib.tld&lt;/taglib-location&gt; \n    &lt;/taglib&gt; \n&lt;/jsp-config&gt;\n</code></pre>\n\n<p>Your mytaglib.tld file will look something like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;taglib version=\"2.0\" xmlns=\"http://java.sun.com/xml/ns/javaee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"&gt;\n    &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;\n    &lt;function&gt;\n        &lt;description&gt;Exposes the abbreviate() function from Apache StringUtils&lt;/description&gt;\n        &lt;name&gt;abbreviate&lt;/name&gt;\n        &lt;function-class&gt;org.apache.commons.lang.StringUtils&lt;/function-class&gt;\n        &lt;function-signature&gt;java.lang.String abbreviate(java.lang.String,\n                            int)&lt;/function-signature&gt;\n    &lt;/function&gt;\n&lt;/taglib&gt;\n</code></pre>\n\n<p>In your JSP, you can then use your new custom tag:</p>\n\n<pre><code>&lt;%@ taglib prefix=\"mytags\" uri=\"mytags\" %&gt;\n...\n&lt;c:out value=\"${mytags:abbreviate(myString, 5)\"/&gt;\n</code></pre>\n\n<p>That should do it for you.  For more info on custom tags, you can read here: <a href=\"http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html\" rel=\"nofollow\">http://docs.oracle.com/javaee/5/tutorial/doc/bnalj.html</a></p>\n"},{"tags":[],"owner":{"account_id":2593070,"reputation":4352,"user_id":2247309,"display_name":"hussachai"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1365636133,"creation_date":1365636133,"answer_id":15938213,"question_id":14041754,"body_markdown":"I wrote one for commons-lang 2.4. \r\n\r\n[https://github.com/hussachai/commons-lang-taglibs][1]\r\n\r\nYou can use it as a template for 3.0 by the way.\r\n\r\n\r\n  [1]: https://github.com/hussachai/commons-lang-taglibs","title":"apache commons lang3 stringutils taglib","body":"<p>I wrote one for commons-lang 2.4. </p>\n\n<p><a href=\"https://github.com/hussachai/commons-lang-taglibs\" rel=\"nofollow\">https://github.com/hussachai/commons-lang-taglibs</a></p>\n\n<p>You can use it as a template for 3.0 by the way.</p>\n"},{"tags":[],"owner":{"account_id":7305,"reputation":1499,"user_id":12646,"accept_rate":100,"display_name":"Glenn Wark"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672336296,"creation_date":1531491907,"answer_id":51327375,"question_id":14041754,"body_markdown":"I was initially thinking of going with a custom taglib also.  Thanks for the post, it gave me this idea.  Creating an instance of StringUtils worked just fine on it&#39;s own.  Even though the calls are static.  I suppose you could wrap it into a two-liner tag if you wanted to.\r\n\r\nThe example below will output the following:  **Now is the t...**\r\n\r\n    &lt;%@ tag import=&quot;org.apache.commons.lang3.StringUtils&quot; %&gt;\r\n    &lt;jsp:useBean id=&quot;StringUtils&quot; class=&quot;org.apache.commons.lang3.StringUtils&quot; /&gt;\r\n    &lt;c:out value=&quot;${StringUtils.abbreviate(&#39;Now is the time for all good&#39;, 8) }&quot; /&gt;\r\n\r\nNote that the tag import statement seems to be optional.  The above code works for me with or without it.","title":"apache commons lang3 stringutils taglib","body":"<p>I was initially thinking of going with a custom taglib also.  Thanks for the post, it gave me this idea.  Creating an instance of StringUtils worked just fine on it's own.  Even though the calls are static.  I suppose you could wrap it into a two-liner tag if you wanted to.</p>\n<p>The example below will output the following:  <strong>Now is the t...</strong></p>\n<pre><code>&lt;%@ tag import=&quot;org.apache.commons.lang3.StringUtils&quot; %&gt;\n&lt;jsp:useBean id=&quot;StringUtils&quot; class=&quot;org.apache.commons.lang3.StringUtils&quot; /&gt;\n&lt;c:out value=&quot;${StringUtils.abbreviate('Now is the time for all good', 8) }&quot; /&gt;\n</code></pre>\n<p>Note that the tag import statement seems to be optional.  The above code works for me with or without it.</p>\n"}],"owner":{"account_id":1906033,"reputation":948,"user_id":1720892,"accept_rate":88,"display_name":"nfvindaloo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2361,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":14047026,"answer_count":3,"score":5,"last_activity_date":1672336296,"creation_date":1356530911,"question_id":14041754,"body_markdown":"Id like to use StringUtils.abbreviate() inside a jstl tag, is there a taglib location for this?\r\n\r\nIve searched the commons site and the web but an unable to find an example. Is there a common way to find taglib locations also, maybe in a standard location of a javadoc tree??\r\n\r\nThanks!\r\nNic","title":"apache commons lang3 stringutils taglib","body":"<p>Id like to use StringUtils.abbreviate() inside a jstl tag, is there a taglib location for this?</p>\n\n<p>Ive searched the commons site and the web but an unable to find an example. Is there a common way to find taglib locations also, maybe in a standard location of a javadoc tree??</p>\n\n<p>Thanks!\nNic</p>\n"},{"tags":["java","html","regex","xml","string"],"answers":[{"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1562236768,"creation_date":1508157069,"answer_id":46770407,"question_id":46770271,"body_markdown":"Using regex, you can get XML from first tag without question mark after it,as `&lt;[^\\?]+` see [regex][1]. \r\n\r\nThis will ignore `&lt;?xml&gt;` tag\r\n\r\n[1]:https://regex101.com/r/1cKirB/14","title":"How to remove &quot;&lt;?xml ...&gt;&quot; tag from response?","body":"<p>Using regex, you can get XML from first tag without question mark after it,as <code>&lt;[^\\?]+</code> see <a href=\"https://regex101.com/r/1cKirB/14\" rel=\"nofollow noreferrer\">regex</a>. </p>\n\n<p>This will ignore <code>&lt;?xml&gt;</code> tag</p>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1508229160,"creation_date":1508157085,"answer_id":46770411,"question_id":46770271,"body_markdown":"There are 2 ways. If you are pretty sure the XML is pretty-formatted (one line, one element) and this tag always appears on the first line, simply remove the whole line.\r\n\r\nSince this requires a well-formatted XML, you&#39;d better go for the Regex based solution that you suggest.\r\n\r\nTry to use the `(&lt;\\?xml.*?\\?&gt;)` regex. See demo at [Regex101][1]. In Java, mind the escaped characters:\r\n\r\n    String newString = text.replaceAll(&quot;(&lt;\\\\?xml.*?\\\\?&gt;)&quot;,&quot;&quot;);\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://regex101.com/r/CbEt55/6","title":"How to remove &quot;&lt;?xml ...&gt;&quot; tag from response?","body":"<p>There are 2 ways. If you are pretty sure the XML is pretty-formatted (one line, one element) and this tag always appears on the first line, simply remove the whole line.</p>\n\n<p>Since this requires a well-formatted XML, you'd better go for the Regex based solution that you suggest.</p>\n\n<p>Try to use the <code>(&lt;\\?xml.*?\\?&gt;)</code> regex. See demo at <a href=\"https://regex101.com/r/CbEt55/6\" rel=\"nofollow noreferrer\">Regex101</a>. In Java, mind the escaped characters:</p>\n\n<pre><code>String newString = text.replaceAll(\"(&lt;\\\\?xml.*?\\\\?&gt;)\",\"\");\n</code></pre>\n"}],"owner":{"account_id":11508751,"reputation":358,"user_id":8434237,"accept_rate":30,"display_name":"Sagitarius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3845,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":46770411,"answer_count":2,"score":1,"last_activity_date":1672336114,"creation_date":1508156674,"question_id":46770271,"body_markdown":"I want to remove the following line from  my response:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n```\r\n\r\nI have used this regular expression: \r\n\r\n```java\r\nString newString = text.replaceAll(&quot;(?s)&lt;xml&gt;&quot;,&quot;&quot;);\r\n```\r\n\r\nBut it doesn&#39;t work for me, what should I change?","title":"How to remove &quot;&lt;?xml ...&gt;&quot; tag from response?","body":"<p>I want to remove the following line from  my response:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n</code></pre>\n<p>I have used this regular expression:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String newString = text.replaceAll(&quot;(?s)&lt;xml&gt;&quot;,&quot;&quot;);\n</code></pre>\n<p>But it doesn't work for me, what should I change?</p>\n"},{"tags":["java","database","relational-database","entity-relationship"],"comments":[{"owner":{"account_id":266997,"reputation":3948,"user_id":554896,"accept_rate":50,"display_name":"Rehman"},"score":0,"creation_date":1329495632,"post_id":9331663,"comment_id":11775954,"body_markdown":"i have added link to uploaded image","body":"i have added link to uploaded image"},{"owner":{"account_id":266997,"reputation":3948,"user_id":554896,"accept_rate":50,"display_name":"Rehman"},"score":0,"creation_date":1329495883,"post_id":9331663,"comment_id":11776045,"body_markdown":"view image from this link http://imageshack.us/photo/my-images/3/manytomany.jpg/","body":"view image from this link <a href=\"http://imageshack.us/photo/my-images/3/manytomany.jpg/\" rel=\"nofollow noreferrer\">imageshack.us/photo/my-images/3/manytomany.jpg</a>"},{"owner":{"account_id":266997,"reputation":3948,"user_id":554896,"accept_rate":50,"display_name":"Rehman"},"score":0,"creation_date":1329496063,"post_id":9331663,"comment_id":11776117,"body_markdown":"then can you draw an uml diagram for me  ???? because i am unable to define such relationship between instance_C and other instances of A and B. Or if such problem is described any where then quote a refrence. thanks","body":"then can you draw an uml diagram for me  ???? because i am unable to define such relationship between instance_C and other instances of A and B. Or if such problem is described any where then quote a refrence. thanks"},{"owner":{"account_id":174150,"reputation":9084,"user_id":403335,"accept_rate":73,"display_name":"vulkanino"},"score":0,"creation_date":1329496377,"post_id":9331663,"comment_id":11776240,"body_markdown":"please say what are you trying to model. A and B NxM relationship. C?","body":"please say what are you trying to model. A and B NxM relationship. C?"},{"owner":{"account_id":67179,"reputation":21969,"user_id":196713,"display_name":"Damir Sudarevic"},"score":0,"creation_date":1329496587,"post_id":9331663,"comment_id":11776336,"body_markdown":"You would just find a suitable name for many_to many tables. Try posting real model (wording like: people, system, department, company ...) instead just using TBL_A ...","body":"You would just find a suitable name for many_to many tables. Try posting real model (wording like: people, system, department, company ...) instead just using TBL_A ..."}],"answers":[{"tags":[],"owner":{"account_id":1227923,"reputation":7195,"user_id":1193136,"accept_rate":72,"display_name":"Carlos Gavidia-Calderon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1329496367,"creation_date":1329496367,"answer_id":9332007,"question_id":9331663,"body_markdown":"The data model is correct, but the object model for these tables can be kind of trucky. I&#39;d do something like this:\r\n\r\n - One class for TBL_A, with a List attribute of TBL_B\r\n - One class for TBL_B, with a List attribute of TBL_A\r\n - One class for TBL_C_TBL_A_B, with and an attribute for TBL_B, TBL_A and TBL_C\r\n\r\nMapping that in an ORM framework can get funky.\r\n\r\n","title":"How to map this tricky entity/relationship model in Java?","body":"<p>The data model is correct, but the object model for these tables can be kind of trucky. I'd do something like this:</p>\n\n<ul>\n<li>One class for TBL_A, with a List attribute of TBL_B</li>\n<li>One class for TBL_B, with a List attribute of TBL_A</li>\n<li>One class for TBL_C_TBL_A_B, with and an attribute for TBL_B, TBL_A and TBL_C</li>\n</ul>\n\n<p>Mapping that in an ORM framework can get funky.</p>\n"},{"tags":[],"owner":{"account_id":1945698,"reputation":688,"user_id":1750904,"accept_rate":67,"display_name":"David Sonnenfeld"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1360201919,"creation_date":1360201919,"answer_id":14742250,"question_id":9331663,"body_markdown":"This shall bring you into the right direction. Try to design a UML diagram, or ER should be ok too. Here is some paper with a Model and the corresponding Java-Code for this model http://www.csd.uoc.gr/~hy252/references/UML_for_Java_Programmers-Book.pdf. (Go to -&gt; Class diagrams chapter).","title":"How to map this tricky entity/relationship model in Java?","body":"<p>This shall bring you into the right direction. Try to design a UML diagram, or ER should be ok too. Here is some paper with a Model and the corresponding Java-Code for this model <a href=\"http://www.csd.uoc.gr/~hy252/references/UML_for_Java_Programmers-Book.pdf\" rel=\"nofollow\">http://www.csd.uoc.gr/~hy252/references/UML_for_Java_Programmers-Book.pdf</a>. (Go to -> Class diagrams chapter).</p>\n"}],"owner":{"account_id":266997,"reputation":3948,"user_id":554896,"accept_rate":50,"display_name":"Rehman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1772,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672335599,"creation_date":1329495113,"question_id":9331663,"body_markdown":"I have little bit confusing many to many relationship between 3 entities. And i want to know how can be my object model look like. I have three Entities, A,B,C and A&lt;-&gt;B (M:N) and associate table between both, A and B, is linked with another associate table which make another 1:n relationship with third entity. I have never seen such relationship which make 1:n relationship with another associate table. For further information please have look on following diagram. \r\n\r\n![enter image description here][1]\r\n\r\n\r\n[Uploaded Image link][2] \r\n\r\nIf i talk about object model then i will say &quot;INSTANCE_A&quot; has many &quot;INSTANCE_B&quot; instance and vice versa but i do not know how can i summarize relationship  for &quot;INSTANCE_C&quot;.\r\n\r\nPlease also let me know whether definition of such relationship between all three entities is right ? i mean is there any problem in relationship design. \r\n\r\n\r\n\r\nThanks in advance\r\n\r\n\r\nEDIT: All arrows denote (1:n or m:1) relationship\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0Y1oS.jpg\r\n  [2]: https://imageshack.com/","title":"How to map this tricky entity/relationship model in Java?","body":"<p>I have little bit confusing many to many relationship between 3 entities. And i want to know how can be my object model look like. I have three Entities, A,B,C and A&lt;-&gt;B (M:N) and associate table between both, A and B, is linked with another associate table which make another 1:n relationship with third entity. I have never seen such relationship which make 1:n relationship with another associate table. For further information please have look on following diagram.</p>\n<p><img src=\"https://i.stack.imgur.com/0Y1oS.jpg\" alt=\"enter image description here\" /></p>\n<p><a href=\"https://imageshack.com/\" rel=\"nofollow noreferrer\">Uploaded Image link</a></p>\n<p>If i talk about object model then i will say &quot;INSTANCE_A&quot; has many &quot;INSTANCE_B&quot; instance and vice versa but i do not know how can i summarize relationship  for &quot;INSTANCE_C&quot;.</p>\n<p>Please also let me know whether definition of such relationship between all three entities is right ? i mean is there any problem in relationship design.</p>\n<p>Thanks in advance</p>\n<p>EDIT: All arrows denote (1:n or m:1) relationship</p>\n"},{"tags":["java","2d","eraser"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1672335754,"post_id":74954293,"comment_id":132271022,"body_markdown":"The only way is to *not* draw it. You will find it easier to do that by deleting from &#39;kupferlist&#39; and/or &#39;glaslist&#39;","body":"The only way is to <i>not</i> draw it. You will find it easier to do that by deleting from &#39;kupferlist&#39; and/or &#39;glaslist&#39;"},{"owner":{"account_id":27082733,"reputation":13,"user_id":20631684,"display_name":"JustinGolz"},"score":0,"creation_date":1672336158,"post_id":74954293,"comment_id":132271136,"body_markdown":"but how can i locate this Line in my kupferlist with my mouse on my screen","body":"but how can i locate this Line in my kupferlist with my mouse on my screen"},{"owner":{"account_id":27082733,"reputation":13,"user_id":20631684,"display_name":"JustinGolz"},"score":0,"creation_date":1672337261,"post_id":74954293,"comment_id":132271432,"body_markdown":"do you have a code example for me?","body":"do you have a code example for me?"}],"owner":{"account_id":27082733,"reputation":13,"user_id":20631684,"display_name":"JustinGolz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672335181,"creation_date":1672335181,"question_id":74954293,"body_markdown":"is there a easy way to Locate the Drawed Line in my PaintComponent Array to delete this Line.\r\nLike a Eraser?\r\n\r\nHere my PaintComponent Class\r\n\r\n    protected void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tGraphics2D g2d = (Graphics2D) g.create();\r\n\t\tg2d.setStroke(new BasicStroke(5));\r\n\t\tg2d.setColor(Color.RED);\r\n\t\tfor (Point[] p : glaslist) {\r\n\t\t\tg2d.setColor(Color.yellow);\r\n\t\t\tg2d.drawLine(p[0].x, p[0].y, p[1].x, p[1].y);\r\n\t\t}\r\n\t\tfor (Point[] p : kupferlist) {\r\n\t\t\tg2d.setColor(Color.ORANGE);\r\n\t\t\tg2d.drawLine(p[0].x, p[0].y, p[1].x, p[1].y);\r\n\r\n\t\t}\r\n\t\tif (startPoint != null &amp;&amp; endPoint != null) {\r\n\t\t\t\r\n\t\t\t\tg2d.setColor(Color.RED);\r\n\t\t\t\tg2d.drawLine(startPoint.x, startPoint.y, endPoint.x, endPoint.y);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tg2d.dispose();\r\n\r\n\t}","title":"java 2d graphics eraser","body":"<p>is there a easy way to Locate the Drawed Line in my PaintComponent Array to delete this Line.\nLike a Eraser?</p>\n<p>Here my PaintComponent Class</p>\n<pre><code>protected void paintComponent(Graphics g) {\n    super.paintComponent(g);\n    Graphics2D g2d = (Graphics2D) g.create();\n    g2d.setStroke(new BasicStroke(5));\n    g2d.setColor(Color.RED);\n    for (Point[] p : glaslist) {\n        g2d.setColor(Color.yellow);\n        g2d.drawLine(p[0].x, p[0].y, p[1].x, p[1].y);\n    }\n    for (Point[] p : kupferlist) {\n        g2d.setColor(Color.ORANGE);\n        g2d.drawLine(p[0].x, p[0].y, p[1].x, p[1].y);\n\n    }\n    if (startPoint != null &amp;&amp; endPoint != null) {\n        \n            g2d.setColor(Color.RED);\n            g2d.drawLine(startPoint.x, startPoint.y, endPoint.x, endPoint.y);\n        \n    }\n\n    g2d.dispose();\n\n}\n</code></pre>\n"},{"tags":["java","google-my-business-api","google-business-profile-api"],"answers":[{"tags":[],"owner":{"account_id":3238786,"reputation":1473,"user_id":3062971,"accept_rate":86,"display_name":"vpgcloud"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672334811,"creation_date":1672334811,"answer_id":74954231,"question_id":74953430,"body_markdown":"This is working as expected, the data does not become stable before the 48 to 72 hours you are observing.","title":"How long is the Google Business Profile Performance API latency for preparing the information(Data Freshness)?","body":"<p>This is working as expected, the data does not become stable before the 48 to 72 hours you are observing.</p>\n"}],"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74954231,"answer_count":1,"score":-1,"last_activity_date":1672334811,"creation_date":1672330028,"question_id":74953430,"body_markdown":"I am using this API [Business Profile Performance][1], and I see few documentation. Does anybody know how long it takes for Google to respond?  \r\nI see 48 to 72 hours delay.Is it happening for others, or something is wrong with my code?\r\n\r\nFor making the code shorter, suppose that the function ***initializeMyBusiness()*** is responsible for initialising the API via its Builder and also takes care of authentication.\r\n\r\n***locationsList*** is a List of Strings including the location IDs&#39; of the client.\r\n\r\n     private enum PerformanceMetrics {\r\n\t\t\tBUSINESS_IMPRESSIONS_DESKTOP_MAPS,\r\n\t\t\tBUSINESS_IMPRESSIONS_DESKTOP_SEARCH,\r\n\t\t\tBUSINESS_IMPRESSIONS_MOBILE_MAPS , \r\n\t\t\tBUSINESS_IMPRESSIONS_MOBILE_SEARCH,\r\n\t\t\tBUSINESS_CONVERSATIONS,\r\n\t\t\tBUSINESS_DIRECTION_REQUESTS, \r\n\t\t\tCALL_CLICKS,\r\n\t\t\tWEBSITE_CLICKS\r\n\t\t}\r\n    public static void main(String[] args) throws Exception {\r\n\r\n\t\tbusiness_profile_performance = initializeMyBusiness();\r\n\r\n\t\tlocationsList.stream().forEach(u -&gt; {\r\n\r\n\t\t\tfor(PerformanceMetrics dailyMetric:PerformanceMetrics.values() ) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t\r\n\t\t\t\t\tBusinessProfilePerformance.Locations.GetDailyMetricsTimeSeries metricReport =\r\n\t\t\t\t\t\t\tbusiness_profile_performance.locations().\r\n\t\t\t\t\t\t\tgetDailyMetricsTimeSeries(locationID).\r\n\t\t\t\t\t\t\tsetDailyMetric(dailyMetric.toString()).\r\n\t\t\t\t\t\t\tsetDailyRangeStartDateYear(Integer.valueOf(&quot;2022&quot;)).\r\n\t\t\t\t\t\t\tsetDailyRangeStartDateMonth(Integer.valueOf(&quot;12&quot;)).\r\n\t\t\t\t\t\t\tsetDailyRangeStartDateDay(Integer.valueOf(&quot;26&quot;)).\r\n\r\n\t\t\t\t\t\t\tsetDailyRangeEndDateYear(Integer.valueOf(&quot;2022&quot;)).\r\n\t\t\t\t\t\t\tsetDailyRangeEndDateMonth(Integer.valueOf(&quot;12&quot;)).\r\n\t\t\t\t\t\t\tsetDailyRangeEndDateDay(Integer.valueOf(&quot;27&quot;));\r\n\r\n\r\n\t\t\t\t\tGetDailyMetricsTimeSeriesResponse response = metricReport.execute();\r\n\t\t\t\t\tif (!response.isEmpty()) {\r\n\t\t\t\t\t\tSystem.out.println(&quot; Response == &quot; + response);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\tSystem.out.println(e);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n \r\n\r\n\r\n  [1]: https://developers.google.com/my-business/reference/performance/rest/v1/locations/getDailyMetricsTimeSeries","title":"How long is the Google Business Profile Performance API latency for preparing the information(Data Freshness)?","body":"<p>I am using this API <a href=\"https://developers.google.com/my-business/reference/performance/rest/v1/locations/getDailyMetricsTimeSeries\" rel=\"nofollow noreferrer\">Business Profile Performance</a>, and I see few documentation. Does anybody know how long it takes for Google to respond?<br />\nI see 48 to 72 hours delay.Is it happening for others, or something is wrong with my code?</p>\n<p>For making the code shorter, suppose that the function <em><strong>initializeMyBusiness()</strong></em> is responsible for initialising the API via its Builder and also takes care of authentication.</p>\n<p><em><strong>locationsList</strong></em> is a List of Strings including the location IDs' of the client.</p>\n<pre><code> private enum PerformanceMetrics {\n        BUSINESS_IMPRESSIONS_DESKTOP_MAPS,\n        BUSINESS_IMPRESSIONS_DESKTOP_SEARCH,\n        BUSINESS_IMPRESSIONS_MOBILE_MAPS , \n        BUSINESS_IMPRESSIONS_MOBILE_SEARCH,\n        BUSINESS_CONVERSATIONS,\n        BUSINESS_DIRECTION_REQUESTS, \n        CALL_CLICKS,\n        WEBSITE_CLICKS\n    }\npublic static void main(String[] args) throws Exception {\n\n    business_profile_performance = initializeMyBusiness();\n\n    locationsList.stream().forEach(u -&gt; {\n\n        for(PerformanceMetrics dailyMetric:PerformanceMetrics.values() ) {\n            try {\n                \n                BusinessProfilePerformance.Locations.GetDailyMetricsTimeSeries metricReport =\n                        business_profile_performance.locations().\n                        getDailyMetricsTimeSeries(locationID).\n                        setDailyMetric(dailyMetric.toString()).\n                        setDailyRangeStartDateYear(Integer.valueOf(&quot;2022&quot;)).\n                        setDailyRangeStartDateMonth(Integer.valueOf(&quot;12&quot;)).\n                        setDailyRangeStartDateDay(Integer.valueOf(&quot;26&quot;)).\n\n                        setDailyRangeEndDateYear(Integer.valueOf(&quot;2022&quot;)).\n                        setDailyRangeEndDateMonth(Integer.valueOf(&quot;12&quot;)).\n                        setDailyRangeEndDateDay(Integer.valueOf(&quot;27&quot;));\n\n\n                GetDailyMetricsTimeSeriesResponse response = metricReport.execute();\n                if (!response.isEmpty()) {\n                    System.out.println(&quot; Response == &quot; + response);\n                }\n\n            } catch (Exception e) {\n                System.out.println(e);\n            }\n\n        }\n    });\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-security","autowired"],"answers":[{"tags":[],"owner":{"account_id":27360805,"reputation":87,"user_id":20868442,"display_name":"Lian Xucan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1672333628,"creation_date":1672333536,"answer_id":74954044,"question_id":74953611,"body_markdown":"SpringWeb was implemented AuthenticationEntryPoint class in package\r\n`org.Springframework.Security.Web.Authentication`\r\n, but they have not been registered for a component, So you can&#39;t use @Autowired to auto-inject. You can try writing its Bean generation function, for example\r\n\r\n    @Bean\r\n    public LoginUrlAuthenticationEntryPoint instance(){\r\n        return new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;);\r\n    }\r\n\r\nOr try add your own `AuthenticationEntryPoint` class to your project\r\n\r\n    @Component\r\n    public class MyAuthenticationEntryPoint implements AuthenticationEntryPoint {\r\n        \r\n        @Override\r\n        public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\r\n            //your commence here....\r\n        }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/sb3xh.png","title":"Could not autowire. No beans of &#39;AuthenticationEntryPoint&#39; type found","body":"<p>SpringWeb was implemented AuthenticationEntryPoint class in package\n<code>org.Springframework.Security.Web.Authentication</code>\n, but they have not been registered for a component, So you can't use @Autowired to auto-inject. You can try writing its Bean generation function, for example</p>\n<pre><code>@Bean\npublic LoginUrlAuthenticationEntryPoint instance(){\n    return new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;);\n}\n</code></pre>\n<p>Or try add your own <code>AuthenticationEntryPoint</code> class to your project</p>\n<pre><code>@Component\npublic class MyAuthenticationEntryPoint implements AuthenticationEntryPoint {\n    \n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\n        //your commence here....\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19764447,"reputation":149,"user_id":14472806,"display_name":"Mani Movassagh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672334800,"creation_date":1672334800,"answer_id":74954229,"question_id":74953611,"body_markdown":"you can use constructor injection as follows:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n     public class SecurityConfig{\r\n\r\n   \r\n    private AuthenticationEntryPoint authEntryPoint;\r\n\r\n    public SecurityConfig(AuthenticationEntryPoint authEntryPoint) {\r\n        this.authEntryPoint = authEntryPoint;\r\n    }\r\n    }\r\n\r\nor of you use lombok:\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @RequiredArgsConstructor\r\n     public class SecurityConfig{\r\n\r\n   \r\n    private final AuthenticationEntryPoint authEntryPoint;\r\n\r\n  \r\n    }\r\n\r\n","title":"Could not autowire. No beans of &#39;AuthenticationEntryPoint&#39; type found","body":"<p>you can use constructor injection as follows:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n public class SecurityConfig{\n\n\nprivate AuthenticationEntryPoint authEntryPoint;\n\npublic SecurityConfig(AuthenticationEntryPoint authEntryPoint) {\n    this.authEntryPoint = authEntryPoint;\n}\n}\n</code></pre>\n<p>or of you use lombok:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\n public class SecurityConfig{\n\n\nprivate final AuthenticationEntryPoint authEntryPoint;\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":11976502,"reputation":420,"user_id":14686302,"display_name":"kernel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":444,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74954044,"answer_count":2,"score":0,"last_activity_date":1672334800,"creation_date":1672331045,"question_id":74953611,"body_markdown":"I get an warning like this when I Autowired any class except the classes I created.\r\n\r\nIDE: IntelliJ IDEA 2022.3.1\r\n\r\nSpring boot version: 2.7.4\r\n\r\n\r\n**Warning:** \r\n\r\n    Could not autowire. No beans of &#39;AuthenticationEntryPoint&#39; type found. \r\n\r\n\r\n\r\n**Security class**\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n       \r\n        @Autowired\r\n        private AuthenticationEntryPoint authEntryPoint;\r\n    \r\n    \r\n        @Bean\r\n        public SecurityFilterChain configure(HttpSecurity http) throws Exception {\r\n            .....\r\n            return http.build();\r\n        }\r\n    }\r\n\r\n**Configuration class for My Created Class ComponentScan**\r\n\r\n    @Configuration\r\n    @ComponentScan(basePackages = {&quot;com.example.security&quot;})\r\n    public class SecurityConfiguration {}\r\n\r\n**spring.factories**\r\n\r\n    org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\r\n    com.example.SecurityConfiguration\r\n\r\nThere is no this problem in my own classes.\r\nbut there is this problem in other classes.\r\nHow can i solve?\r\n\r\n","title":"Could not autowire. No beans of &#39;AuthenticationEntryPoint&#39; type found","body":"<p>I get an warning like this when I Autowired any class except the classes I created.</p>\n<p>IDE: IntelliJ IDEA 2022.3.1</p>\n<p>Spring boot version: 2.7.4</p>\n<p><strong>Warning:</strong></p>\n<pre><code>Could not autowire. No beans of 'AuthenticationEntryPoint' type found. \n</code></pre>\n<p><strong>Security class</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n   \n    @Autowired\n    private AuthenticationEntryPoint authEntryPoint;\n\n\n    @Bean\n    public SecurityFilterChain configure(HttpSecurity http) throws Exception {\n        .....\n        return http.build();\n    }\n}\n</code></pre>\n<p><strong>Configuration class for My Created Class ComponentScan</strong></p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = {&quot;com.example.security&quot;})\npublic class SecurityConfiguration {}\n</code></pre>\n<p><strong>spring.factories</strong></p>\n<pre><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\ncom.example.SecurityConfiguration\n</code></pre>\n<p>There is no this problem in my own classes.\nbut there is this problem in other classes.\nHow can i solve?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1672322036,"post_id":74951812,"comment_id":132267033,"body_markdown":"`System.out.println(Arrays.stream(age).sum() / age.length);` [`Ideone.com` demo](https://ideone.com/uI0hZe)","body":"<code>System.out.println(Arrays.stream(age).sum() &#47; age.length);</code> <a href=\"https://ideone.com/uI0hZe\" rel=\"nofollow noreferrer\"><code>Ideone.com</code> demo</a>"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1672322235,"post_id":74951812,"comment_id":132267093,"body_markdown":"Please [edit] the post and format the code properly.","body":"Please <a href=\"https://stackoverflow.com/posts/74951812/edit\">edit</a> the post and format the code properly."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672321616,"creation_date":1672321616,"answer_id":74951917,"question_id":74951812,"body_markdown":"You could sum the `age` values while you iterate the array(s). Don&#39;t hardcode the length in the `for` loop. Use an `else` instead of two `if`(s). Something like,\r\n\r\n    int age[]= { 20, 17, 19, 22, 18, 18};\r\n    String[] names = {&quot;Ahmed&quot;, &quot;Sam&quot;, &quot;Mandi&quot;, &quot;Amine&quot;, &quot;John&quot;, &quot;Rayan&quot;};\r\n    int total = 0;\r\n    for (int i = 0; i &lt; age.length; i++) {\r\n        total += age[i];\r\n        if (age[i] &gt;= 20) {\r\n            System.out.println(names[i] +&quot; is &quot;+ age[i] +&quot; years old. And he&#39;s from Mars!&quot;);\r\n        } else {\r\n            System.out.println(names[i] +&quot; is &quot;+ age[i] +&quot; years old. He is from Wakanda!&quot;);\r\n        }\r\n    }\r\n    double avg = total / (double) age.length;\r\n    System.out.println(&quot;Their average age is :&quot; + avg + &quot; years.&quot;);\r\n\r\n","title":"How to calculate the average in this case? (JAVA )","body":"<p>You could sum the <code>age</code> values while you iterate the array(s). Don't hardcode the length in the <code>for</code> loop. Use an <code>else</code> instead of two <code>if</code>(s). Something like,</p>\n<pre><code>int age[]= { 20, 17, 19, 22, 18, 18};\nString[] names = {&quot;Ahmed&quot;, &quot;Sam&quot;, &quot;Mandi&quot;, &quot;Amine&quot;, &quot;John&quot;, &quot;Rayan&quot;};\nint total = 0;\nfor (int i = 0; i &lt; age.length; i++) {\n    total += age[i];\n    if (age[i] &gt;= 20) {\n        System.out.println(names[i] +&quot; is &quot;+ age[i] +&quot; years old. And he's from Mars!&quot;);\n    } else {\n        System.out.println(names[i] +&quot; is &quot;+ age[i] +&quot; years old. He is from Wakanda!&quot;);\n    }\n}\ndouble avg = total / (double) age.length;\nSystem.out.println(&quot;Their average age is :&quot; + avg + &quot; years.&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672321857,"creation_date":1672321857,"answer_id":74951962,"question_id":74951812,"body_markdown":"One of the simplest ways is to use [Java Streams API](https://www.oracle.com/technical-resources/articles/java/ma14-java-se-8-streams.html).\r\n\r\n    double avg = Arrays.stream(age).average().getAsDouble();\r\n\r\n**Demo**:\r\n\r\n    import java.util.*;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            int age[] = { 20, 17, 19, 22, 18, 18 };\r\n            double avg = Arrays.stream(age).average().getAsDouble();\r\n            System.out.println(avg);\r\n        }\r\n    }\r\n**Output**:\r\n\r\n    19.0","title":"How to calculate the average in this case? (JAVA )","body":"<p>One of the simplest ways is to use <a href=\"https://www.oracle.com/technical-resources/articles/java/ma14-java-se-8-streams.html\" rel=\"nofollow noreferrer\">Java Streams API</a>.</p>\n<pre><code>double avg = Arrays.stream(age).average().getAsDouble();\n</code></pre>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.util.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        int age[] = { 20, 17, 19, 22, 18, 18 };\n        double avg = Arrays.stream(age).average().getAsDouble();\n        System.out.println(avg);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>19.0\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672326170,"creation_date":1672326170,"answer_id":74952736,"question_id":74951812,"body_markdown":"Here is a somewhat different way of doing it.\r\n- Use `IntStream` to streams the array indices.\r\n- employ `map` to print the ages for each individuals\r\n- then calculate the average and\r\n  - if an average is present, print it\r\n  - else print an informatory message\r\n```\r\nint ages[] = \r\n    {20,17,19,22,18,18};\r\nString[] names =\r\n    {&quot;Ahmed&quot;,&quot;Sam&quot;,&quot;Mandi&quot;,&quot;Amine&quot;,&quot;John&quot;,&quot;Rayan&quot;};\r\n\r\nIntStream.range(0, ages.length).map(i -&gt; {\r\n    int age = ages[i];\r\n    if (age &gt;= 20) {\r\n        System.out.println(names[i] + &quot; is &quot; + age\r\n                + &quot; years old. And he&#39;s from Mars!&quot;);\r\n    } else {\r\n        System.out.println(names[i] + &quot; is &quot; + age\r\n                + &quot; years old. He is from Wakanda!&quot;);\r\n    }\r\n    return age;\r\n}).average().ifPresentOrElse(\r\n        avg -&gt; System.out\r\n                .println(&quot;\\nTheir average age is: &quot; + avg + &quot; years.&quot;),\r\n        () -&gt; System.out.println(&quot;No ages were supplied&quot;));\r\n```\r\nprints\r\n```\r\nAhmed is 20 years old. And he&#39;s from Mars!\r\nSam is 17 years old. He is from Wakanda!\r\nMandi is 19 years old. He is from Wakanda!\r\nAmine is 22 years old. And he&#39;s from Mars!\r\nJohn is 18 years old. He is from Wakanda!\r\nRayan is 18 years old. He is from Wakanda!\r\n\r\nTheir average age is: 19.0 years.\r\n","title":"How to calculate the average in this case? (JAVA )","body":"<p>Here is a somewhat different way of doing it.</p>\n<ul>\n<li>Use <code>IntStream</code> to streams the array indices.</li>\n<li>employ <code>map</code> to print the ages for each individuals</li>\n<li>then calculate the average and\n<ul>\n<li>if an average is present, print it</li>\n<li>else print an informatory message</li>\n</ul>\n</li>\n</ul>\n<pre><code>int ages[] = \n    {20,17,19,22,18,18};\nString[] names =\n    {&quot;Ahmed&quot;,&quot;Sam&quot;,&quot;Mandi&quot;,&quot;Amine&quot;,&quot;John&quot;,&quot;Rayan&quot;};\n\nIntStream.range(0, ages.length).map(i -&gt; {\n    int age = ages[i];\n    if (age &gt;= 20) {\n        System.out.println(names[i] + &quot; is &quot; + age\n                + &quot; years old. And he's from Mars!&quot;);\n    } else {\n        System.out.println(names[i] + &quot; is &quot; + age\n                + &quot; years old. He is from Wakanda!&quot;);\n    }\n    return age;\n}).average().ifPresentOrElse(\n        avg -&gt; System.out\n                .println(&quot;\\nTheir average age is: &quot; + avg + &quot; years.&quot;),\n        () -&gt; System.out.println(&quot;No ages were supplied&quot;));\n</code></pre>\n<p>prints</p>\n<pre><code>Ahmed is 20 years old. And he's from Mars!\nSam is 17 years old. He is from Wakanda!\nMandi is 19 years old. He is from Wakanda!\nAmine is 22 years old. And he's from Mars!\nJohn is 18 years old. He is from Wakanda!\nRayan is 18 years old. He is from Wakanda!\n\nTheir average age is: 19.0 years.\n</code></pre>\n"}],"owner":{"account_id":26242958,"reputation":11,"user_id":19916986,"display_name":"Al-amine MOUHAMAD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":74951917,"answer_count":3,"score":-1,"last_activity_date":1672334567,"creation_date":1672321065,"question_id":74951812,"body_markdown":"I have a set of numbers that I named age[]. I want to calculate the average of all the elements contained in age[] without calculating the sum separately. Not like this:\r\n ```\r\n int avg2 = (age[0] + age[1] + age[2] + age[3] + age[4] + age[5]) / age.length;\r\n```\r\nThat is actually too long to write. Imagine if a have 100 of elements, it&#39;ll be too hard.\r\n\r\n    int age[] = { 20, 17, 19, 22, 18, 18 };\r\n    String[] names = { &quot;Ahmed&quot;, &quot;Sam&quot;, &quot;Mandi&quot;, &quot;Amine&quot;, &quot;John&quot;, &quot;Rayan&quot; };\r\n    for (int i = 0; i &lt;= 5; i++) {\r\n        if (age[i] &gt;= 20) {\r\n            System.out.println(names[i] + &quot; is &quot; + age[i] + &quot; years old. And he&#39;s from Mars!&quot;);\r\n        }\r\n        if (age[i] &lt; 20) {\r\n            System.out.println(names[i] + &quot; is &quot; + age[i] + &quot; years old. He is from Wakanda!&quot;);\r\n        }\r\n    }\r\n    \r\n    int j = 0;\r\n    int avg = (age[j] + age[j++]) / age.length;\r\n    \r\n    System.out.println(&quot;Their average age is :&quot; + avg + &quot; years.&quot;);\r\n    \r\n    int avg2 = (age[0] + age[1] + age[2] + age[3] + age[4] + age[5]) / age.length;\r\n    \r\n    System.out.println(&quot;Their correct average age is :&quot; + avg2 + &quot; years.&quot;);\r\n\r\n\r\nThat&#39;s what I&#39;ve done but I didn&#39;t find the shortcut. Please help me to solve this if possible. Thanks.\r\n","title":"How to calculate the average in this case? (JAVA )","body":"<p>I have a set of numbers that I named age[]. I want to calculate the average of all the elements contained in age[] without calculating the sum separately. Not like this:</p>\n<pre><code>int avg2 = (age[0] + age[1] + age[2] + age[3] + age[4] + age[5]) / age.length;\n</code></pre>\n<p>That is actually too long to write. Imagine if a have 100 of elements, it'll be too hard.</p>\n<pre><code>int age[] = { 20, 17, 19, 22, 18, 18 };\nString[] names = { &quot;Ahmed&quot;, &quot;Sam&quot;, &quot;Mandi&quot;, &quot;Amine&quot;, &quot;John&quot;, &quot;Rayan&quot; };\nfor (int i = 0; i &lt;= 5; i++) {\n    if (age[i] &gt;= 20) {\n        System.out.println(names[i] + &quot; is &quot; + age[i] + &quot; years old. And he's from Mars!&quot;);\n    }\n    if (age[i] &lt; 20) {\n        System.out.println(names[i] + &quot; is &quot; + age[i] + &quot; years old. He is from Wakanda!&quot;);\n    }\n}\n\nint j = 0;\nint avg = (age[j] + age[j++]) / age.length;\n\nSystem.out.println(&quot;Their average age is :&quot; + avg + &quot; years.&quot;);\n\nint avg2 = (age[0] + age[1] + age[2] + age[3] + age[4] + age[5]) / age.length;\n\nSystem.out.println(&quot;Their correct average age is :&quot; + avg2 + &quot; years.&quot;);\n</code></pre>\n<p>That's what I've done but I didn't find the shortcut. Please help me to solve this if possible. Thanks.</p>\n"},{"tags":["java","spring","transactions","spring-transactions"],"owner":{"account_id":15613239,"reputation":146,"user_id":11264031,"display_name":"Swastik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672334514,"creation_date":1672334514,"question_id":74954195,"body_markdown":"While processing thousands of batches (500 records in each batch) we found some high CPU usage and when we went through the code we found that we are using nested `@Transactional` annotation at some places and we thought this nested `@Transactional` could be the reason for the high peak. \r\n\r\nBut no where on internet we didn&#39;t find any previous issue someone have faced related to high CPU usage and Nested Transaction\r\n\r\nAgain when we checked our code properly we found that @Transactinal annotation that we are using at child method - **Class2.java** is from `javax.transaction.Transactional` and @Transactinal we are using at parent method - **Class1.java** is from `  @org.springframework.transaction.annotation.Transactional\r\n`\r\n\r\n\r\n**Class1.java**\r\n\r\n```\r\n@org.springframework.transaction.annotation.Transactional \r\n public void transform() {\r\n    for (...) {                  // loop to process each batch\r\n      class2Obj.otherFunction();\r\n    }\r\n  }\r\n```\r\n\r\n**Class2.java**\r\n```\r\n\r\n  @javax.transaction.Transactional\r\n  public void otherFunction() {\r\n  } \r\n```\r\n\r\n\r\nWhat could be the reason, is high CPU usage is because of\r\n\r\n 1. Only because of nested @Transactional (regardless of whether we are mixing @Transactional from different classes or not)\r\n 2. Not because of nested @Transactional but because of mixing @Transactional from different classes\r\n 3. Not at all related to @Transactional maybe due to some other reason?\r\n\r\n\r\n**Note:** The reason we are pointing out at @Transactional is because, when we process less batches let&#39;s say some 100 / 50 batches we are not seeking high cpu usage","title":"Spring nested transaction causing high CPU usage","body":"<p>While processing thousands of batches (500 records in each batch) we found some high CPU usage and when we went through the code we found that we are using nested <code>@Transactional</code> annotation at some places and we thought this nested <code>@Transactional</code> could be the reason for the high peak.</p>\n<p>But no where on internet we didn't find any previous issue someone have faced related to high CPU usage and Nested Transaction</p>\n<p>Again when we checked our code properly we found that @Transactinal annotation that we are using at child method - <strong>Class2.java</strong> is from <code>javax.transaction.Transactional</code> and @Transactinal we are using at parent method - <strong>Class1.java</strong> is from <code> @org.springframework.transaction.annotation.Transactional</code></p>\n<p><strong>Class1.java</strong></p>\n<pre><code>@org.springframework.transaction.annotation.Transactional \n public void transform() {\n    for (...) {                  // loop to process each batch\n      class2Obj.otherFunction();\n    }\n  }\n</code></pre>\n<p><strong>Class2.java</strong></p>\n<pre><code>\n  @javax.transaction.Transactional\n  public void otherFunction() {\n  } \n</code></pre>\n<p>What could be the reason, is high CPU usage is because of</p>\n<ol>\n<li>Only because of nested @Transactional (regardless of whether we are mixing @Transactional from different classes or not)</li>\n<li>Not because of nested @Transactional but because of mixing @Transactional from different classes</li>\n<li>Not at all related to @Transactional maybe due to some other reason?</li>\n</ol>\n<p><strong>Note:</strong> The reason we are pointing out at @Transactional is because, when we process less batches let's say some 100 / 50 batches we are not seeking high cpu usage</p>\n"},{"tags":["java","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":24379947,"reputation":303,"user_id":18311683,"display_name":"Josh Heaps"},"score":0,"creation_date":1672339490,"post_id":74954187,"comment_id":132271974,"body_markdown":"I&#39;m not sure how to help with the first problem, but for the stale element, you just need to find it every time you interact with it. Send the method the xpath, and have it find the element in the method. It&#39;s a bit slower, but it&#39;s a lot more reliable","body":"I&#39;m not sure how to help with the first problem, but for the stale element, you just need to find it every time you interact with it. Send the method the xpath, and have it find the element in the method. It&#39;s a bit slower, but it&#39;s a lot more reliable"}],"owner":{"account_id":3756894,"reputation":49,"user_id":3123056,"display_name":"Johny"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672334452,"creation_date":1672334452,"question_id":74954187,"body_markdown":"In webpage i have multiple grids like below\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bhSBQ.png\r\n\r\nAs you can see not all the web elements are in view. We need to scroll to see other elements.\r\nThis grid have around 20 rows and 10 columns. Number of rows will change as per scenario.\r\nMy requirement is to fetch data of all the web elements of this grid\r\n\r\nI have written web elements as below\r\n\r\n\r\n```java\r\n @FindBy(xpath = &quot;xpath here&quot;)\r\nprivate static List&lt;WebElement&gt; sampleGridDate; (This should return all web elements from date column)\r\n\r\n@FindBy(xpath = &quot;xpath here&quot;)\r\nprivate static List&lt;WebElement&gt; sampleGridCode; (This should return all web elements from code column)\r\n ```\r\n\r\nI am fetching data with below code\r\n\r\n```java\r\n\r\nfor (int i = 0; i &lt; sampleGridDate.size(); i++) {\r\n\t\t\t\r\n\t\t\tscrollToViewElement(driver,sampleGridDate.get(i));\r\n\t\t\trow.setDate(sampleGridDate.get(i).getText());\r\n\t\t\tscrollToViewElement(driver,sampleGridCode.get(i));\r\n\t\t\trow.setCode(sampleGridCode.get(i).getText());\r\n\t\t\r\n\t\t.....so on\r\n\t\t}\r\n```\r\n\r\n```java\r\n\r\npublic static void scrollToViewElement(WebDriver driver, WebElement element) {\r\n\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\t\tjs.executeScript(&quot;arguments[0].scrollIntoView();&quot;, element);\r\n\t}\r\n```\r\n\r\n**\r\nProblems i am facing are\r\n1. sampleGridDate.size() returns 16 instead of 20\r\n2. this for loop runs only once as sampleGridDate is not found after first iteration (stale webelement exception)\r\n**\r\n\r\nHow do i fix this","title":"Not able to access all the webelements from the grid in selenium","body":"<p>In webpage i have multiple grids like below</p>\n<p><a href=\"https://i.stack.imgur.com/bhSBQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bhSBQ.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see not all the web elements are in view. We need to scroll to see other elements.\nThis grid have around 20 rows and 10 columns. Number of rows will change as per scenario.\nMy requirement is to fetch data of all the web elements of this grid</p>\n<p>I have written web elements as below</p>\n<pre class=\"lang-java prettyprint-override\"><code> @FindBy(xpath = &quot;xpath here&quot;)\nprivate static List&lt;WebElement&gt; sampleGridDate; (This should return all web elements from date column)\n\n@FindBy(xpath = &quot;xpath here&quot;)\nprivate static List&lt;WebElement&gt; sampleGridCode; (This should return all web elements from code column)\n</code></pre>\n<p>I am fetching data with below code</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nfor (int i = 0; i &lt; sampleGridDate.size(); i++) {\n            \n            scrollToViewElement(driver,sampleGridDate.get(i));\n            row.setDate(sampleGridDate.get(i).getText());\n            scrollToViewElement(driver,sampleGridCode.get(i));\n            row.setCode(sampleGridCode.get(i).getText());\n        \n        .....so on\n        }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic static void scrollToViewElement(WebDriver driver, WebElement element) {\n        JavascriptExecutor js = (JavascriptExecutor) driver;\n        js.executeScript(&quot;arguments[0].scrollIntoView();&quot;, element);\n    }\n</code></pre>\n<p>**\nProblems i am facing are</p>\n<ol>\n<li>sampleGridDate.size() returns 16 instead of 20</li>\n<li>this for loop runs only once as sampleGridDate is not found after first iteration (stale webelement exception)\n**</li>\n</ol>\n<p>How do i fix this</p>\n"},{"tags":["java","hazelcast","java-client"],"answers":[{"tags":[],"owner":{"account_id":2621552,"reputation":328,"user_id":2269454,"display_name":"mrck"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672039162,"creation_date":1672002868,"answer_id":74915927,"question_id":74914196,"body_markdown":"This should work:\r\n```\r\npublic abstract class AbstractEntryProcessor implements EntryProcessor, HazelcastInstanceAware {\r\n\r\n    protected transient HazelcastInstance hazelcastInstance;\r\n\r\n    private final boolean applyOnBackup;\r\n\r\n    // Non Parameterize Constructor\r\n    public AbstractEntryProcessor() {\r\n        this(true);\r\n    }\r\n\r\n    // Parameterize Constructor AbstractEntryProcessor\r\n    public AbstractEntryProcessor(boolean applyOnBackup) {\r\n        this.applyOnBackup = applyOnBackup;\r\n    }\r\n\r\n    //EntryBackupProcessor\r\n    @Override\r\n    public final EntryProcessor getBackupProcessor() {\r\n        if (!applyOnBackup || this instanceof ReadOnly) {\r\n            return null;\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    @Override\r\n    public void setHazelcastInstance(HazelcastInstance hazelcastInstance) {\r\n       this.hazelcastInstance = hazelcastInstance;\r\n    }\r\n}\r\n```","title":"how to implement public AbstractEntryProcessor(boolean applyOnBackup){} in 5.x.x for the backup in Hazelcast","body":"<p>This should work:</p>\n<pre><code>public abstract class AbstractEntryProcessor implements EntryProcessor, HazelcastInstanceAware {\n\n    protected transient HazelcastInstance hazelcastInstance;\n\n    private final boolean applyOnBackup;\n\n    // Non Parameterize Constructor\n    public AbstractEntryProcessor() {\n        this(true);\n    }\n\n    // Parameterize Constructor AbstractEntryProcessor\n    public AbstractEntryProcessor(boolean applyOnBackup) {\n        this.applyOnBackup = applyOnBackup;\n    }\n\n    //EntryBackupProcessor\n    @Override\n    public final EntryProcessor getBackupProcessor() {\n        if (!applyOnBackup || this instanceof ReadOnly) {\n            return null;\n        }\n\n        return this;\n    }\n\n    @Override\n    public void setHazelcastInstance(HazelcastInstance hazelcastInstance) {\n       this.hazelcastInstance = hazelcastInstance;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27337922,"reputation":11,"user_id":20849054,"display_name":"Deepak_M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74915927,"answer_count":1,"score":0,"last_activity_date":1672334319,"creation_date":1671981892,"question_id":74914196,"body_markdown":"**Help me in the following code and how to used the backup on the Hazelcast**\r\nmigration of the hazelcast 3.x.x to 5.x.x\r\n```\r\npackage com.hazelcast.map;\r\n\r\nimport com.hazelcast.core.HazelcastInstance;\r\nimport com.hazelcast.core.HazelcastInstanceAware;\r\nimport com.hazelcast.nio.serialization.impl.BinaryInterface;\r\n\r\nimport java.util.Map;\r\n// Interface AbstractEntryProcessor\r\n@BinaryInterface\r\npublic abstract class AbstractEntryProcessor&lt;K,V&gt; implements EntryProcessor&lt;K,V&gt; {\r\n\r\n    private final EntryBackupProcessor&lt;K,V&gt; entryBackupProcessor;\r\n// Non Parameterize Constructor\r\n    public AbstractEntryProcessor() {\r\n        this(true);\r\n    }\r\n// Parameterize Constructor AbstractEntryProcessor\r\n    public AbstractEntryProcessor(boolean applyOnBackup) {\r\n        if (applyOnBackup) {\r\n            entryBackupProcessor = new EntryBackupProcessorImpl();\r\n        } else {\r\n            entryBackupProcessor = null;\r\n        }\r\n    }\r\n//EntryBackupProcessor\r\n    @Override\r\n    public final EntryBackupProcessor getBackupProcessor() {\r\n        return entryBackupProcessor;\r\n    }\r\n// class EntryBackupProcessorImpl\r\n    private class EntryBackupProcessorImpl implements EntryBackupProcessor&lt;k,V&gt;, HazelcastInstanceAware {\r\n        // generated for EntryBackupProcessorImpl which doesn&#39;t implement HazelcastInstanceAware\r\n        static final long serialVersionUID = -5081502753526394129L;\r\n\r\n        @Override\r\n        public void processBackup(Map.Entry&lt;K,V&gt; entry) {\r\n            process(entry);\r\n        }\r\n\r\n        @Override\r\n        public void setHazelcastInstance(HazelcastInstance hazelcastInstance) {\r\n            final AbstractEntryProcessor&lt;k,V&gt; outer = AbstractEntryProcessor.this;\r\n            if (outer instanceof HazelcastInstanceAware) {\r\n                ((HazelcastInstanceAware) outer).setHazelcastInstance(hazelcastInstance);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\nHow to used the backup methods in 5.x.x versons of series\r\n\r\n\r\nhow to used the backup in the above question ?","title":"how to implement public AbstractEntryProcessor(boolean applyOnBackup){} in 5.x.x for the backup in Hazelcast","body":"<p><strong>Help me in the following code and how to used the backup on the Hazelcast</strong>\nmigration of the hazelcast 3.x.x to 5.x.x</p>\n<pre><code>package com.hazelcast.map;\n\nimport com.hazelcast.core.HazelcastInstance;\nimport com.hazelcast.core.HazelcastInstanceAware;\nimport com.hazelcast.nio.serialization.impl.BinaryInterface;\n\nimport java.util.Map;\n// Interface AbstractEntryProcessor\n@BinaryInterface\npublic abstract class AbstractEntryProcessor&lt;K,V&gt; implements EntryProcessor&lt;K,V&gt; {\n\n    private final EntryBackupProcessor&lt;K,V&gt; entryBackupProcessor;\n// Non Parameterize Constructor\n    public AbstractEntryProcessor() {\n        this(true);\n    }\n// Parameterize Constructor AbstractEntryProcessor\n    public AbstractEntryProcessor(boolean applyOnBackup) {\n        if (applyOnBackup) {\n            entryBackupProcessor = new EntryBackupProcessorImpl();\n        } else {\n            entryBackupProcessor = null;\n        }\n    }\n//EntryBackupProcessor\n    @Override\n    public final EntryBackupProcessor getBackupProcessor() {\n        return entryBackupProcessor;\n    }\n// class EntryBackupProcessorImpl\n    private class EntryBackupProcessorImpl implements EntryBackupProcessor&lt;k,V&gt;, HazelcastInstanceAware {\n        // generated for EntryBackupProcessorImpl which doesn't implement HazelcastInstanceAware\n        static final long serialVersionUID = -5081502753526394129L;\n\n        @Override\n        public void processBackup(Map.Entry&lt;K,V&gt; entry) {\n            process(entry);\n        }\n\n        @Override\n        public void setHazelcastInstance(HazelcastInstance hazelcastInstance) {\n            final AbstractEntryProcessor&lt;k,V&gt; outer = AbstractEntryProcessor.this;\n            if (outer instanceof HazelcastInstanceAware) {\n                ((HazelcastInstanceAware) outer).setHazelcastInstance(hazelcastInstance);\n            }\n        }\n    }\n}\n</code></pre>\n<p>How to used the backup methods in 5.x.x versons of series</p>\n<p>how to used the backup in the above question ?</p>\n"},{"tags":["java","email","lotus-notes","mime"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1619556910,"post_id":67290512,"comment_id":118940550,"body_markdown":"I have not heard of Lotus Notes for 10 years or so.  It&#39;s actually interesting that it&#39;s still in use somewhere.","body":"I have not heard of Lotus Notes for 10 years or so.  It&#39;s actually interesting that it&#39;s still in use somewhere."},{"owner":{"account_id":1246258,"reputation":2770,"user_id":1207647,"accept_rate":75,"display_name":"Karl-Henry Martinsson"},"score":0,"creation_date":1619709888,"post_id":67290512,"comment_id":118993070,"body_markdown":"@PM77-1 : The product was renamed IBM Notes (and IBM Domino) many years ago, and it is now HCL Notes and HCL Domino, after HCL purchased it a couple of years ago. Version 11 was released last year and version 12 is in beta, to be released this summer, and version 13 is already planned.\nThe installed base is actually growing, and it is used in many more places than you may think.","body":"@PM77-1 : The product was renamed IBM Notes (and IBM Domino) many years ago, and it is now HCL Notes and HCL Domino, after HCL purchased it a couple of years ago. Version 11 was released last year and version 12 is in beta, to be released this summer, and version 13 is already planned. The installed base is actually growing, and it is used in many more places than you may think."}],"answers":[{"tags":[],"owner":{"account_id":4928027,"reputation":3620,"user_id":3968761,"accept_rate":75,"display_name":"sitting_duck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1619556662,"creation_date":1619556662,"answer_id":67290513,"question_id":67290512,"body_markdown":"After converting the doc to `MIME` via `convertToMIME()` use the `DxlExporter` to do the rest of the work. It creates XML output that contains a `&lt;mime&gt;` tag in which the output of the fully converted MIME format document resides. This code does not do a full XML parse.  It simply grabs everything between the `&lt;mime&gt; &lt;/mime&gt;` tags.  I&#39;ve successfully converted 10s of thousands of email documents with this code with only a handful of failures - with all of those coming from badly formatted external email documents.  I&#39;ve had 100% success on Notes-originated email documents.  \r\n\r\n```\r\nimport lotus.domino.Document;\r\nimport lotus.domino.DxlExporter;\r\nimport lotus.domino.NotesException;\r\nimport lotus.domino.Session;\r\n\r\npublic class DocToMimeConverter\r\n{\r\n\tprivate static final int MIMEOPTION_DXL = 0;\r\n\tprivate static final String tagStart = &quot;&lt;mime&gt;&lt;![CDATA[&quot;;\r\n\tprivate static final String tagEnd = &quot;]]&gt;&lt;/mime&gt;&quot;;\r\n\r\n\tprivate DxlExporter exporter = null;\r\n\t\r\n\tpublic DocToMimeConverter(Session session) throws NotesException\r\n\t{\r\n\t\tsuper();\r\n\t\texporter = session.createDxlExporter();\r\n\t}\r\n\r\n\tpublic String convert(Document doc) throws NotesException\r\n\t{\r\n\t\tString mimeDoc = null;\r\n\t\t\r\n\t\texporter.setMIMEOption(MIMEOPTION_DXL);\r\n\t\t\r\n\t\tdoc.removeItem(&quot;$KeepPrivate&quot;);\r\n\t\tdoc.convertToMIME(Document.CVT_RT_TO_PLAINTEXT_AND_HTML);\r\n\t\tString dxl = exporter.exportDxl(doc);\r\n\t\t\r\n\t\tint idxStart = dxl.indexOf(tagStart);\r\n\t\tint idxEnd = dxl.indexOf(tagEnd);\r\n\t\t\r\n\t\tif (idxStart != -1 &amp;&amp; idxEnd != -1 &amp;&amp; idxEnd &gt; idxStart)\r\n\t\t{\r\n\t\t\tmimeDoc = dxl.substring(idxStart + tagStart.length(), idxEnd);\r\n\t\t}\r\n\t\t\r\n\t\treturn mimeDoc;\r\n\t}\r\n}\r\n```  \r\nThe `$KeepPrivate` will prevent any document containing it to fail. So include `doc.removeItem(&quot;$KeepPrivate&quot;)` if you want to convert those documents also.  \r\n\r\n\r\nAlso in the calling program: \r\n\r\n    Session s = NotesFactory.createSession((String)null, (String)null, NotesAuth.getPassword());\r\n    s.setConvertMIME(false);\r\n\r\nThe `setConvertMIME(false)` says to not convert any native MIME formatted documents to Notes format.  Useful if your objective is to do a MIME conversion. Saves a little time and any round trip inaccuracies.   \r\n\r\nI used the following code to select email messages in the calling program: \r\n```\r\nif (&quot;Memo&quot;.equals(doc.getItemValueString(&quot;Form&quot;)) ||\r\n\t\t&quot;Reply&quot;.equals(doc.getItemValueString(&quot;Form&quot;)))\r\n```\r\n\r\nFor my use case I used the UUID of the Notes document along with the `&#39;*.EML&#39;` to create individual files for each email message. These were then successfully imported into another email system.\r\n","title":"How to Programmatically Convert Lotus Notes email Document to MIME Format","body":"<p>After converting the doc to <code>MIME</code> via <code>convertToMIME()</code> use the <code>DxlExporter</code> to do the rest of the work. It creates XML output that contains a <code>&lt;mime&gt;</code> tag in which the output of the fully converted MIME format document resides. This code does not do a full XML parse.  It simply grabs everything between the <code>&lt;mime&gt; &lt;/mime&gt;</code> tags.  I've successfully converted 10s of thousands of email documents with this code with only a handful of failures - with all of those coming from badly formatted external email documents.  I've had 100% success on Notes-originated email documents.</p>\n<pre><code>import lotus.domino.Document;\nimport lotus.domino.DxlExporter;\nimport lotus.domino.NotesException;\nimport lotus.domino.Session;\n\npublic class DocToMimeConverter\n{\n    private static final int MIMEOPTION_DXL = 0;\n    private static final String tagStart = &quot;&lt;mime&gt;&lt;![CDATA[&quot;;\n    private static final String tagEnd = &quot;]]&gt;&lt;/mime&gt;&quot;;\n\n    private DxlExporter exporter = null;\n    \n    public DocToMimeConverter(Session session) throws NotesException\n    {\n        super();\n        exporter = session.createDxlExporter();\n    }\n\n    public String convert(Document doc) throws NotesException\n    {\n        String mimeDoc = null;\n        \n        exporter.setMIMEOption(MIMEOPTION_DXL);\n        \n        doc.removeItem(&quot;$KeepPrivate&quot;);\n        doc.convertToMIME(Document.CVT_RT_TO_PLAINTEXT_AND_HTML);\n        String dxl = exporter.exportDxl(doc);\n        \n        int idxStart = dxl.indexOf(tagStart);\n        int idxEnd = dxl.indexOf(tagEnd);\n        \n        if (idxStart != -1 &amp;&amp; idxEnd != -1 &amp;&amp; idxEnd &gt; idxStart)\n        {\n            mimeDoc = dxl.substring(idxStart + tagStart.length(), idxEnd);\n        }\n        \n        return mimeDoc;\n    }\n}\n</code></pre>\n<p>The <code>$KeepPrivate</code> will prevent any document containing it to fail. So include <code>doc.removeItem(&quot;$KeepPrivate&quot;)</code> if you want to convert those documents also.</p>\n<p>Also in the calling program:</p>\n<pre><code>Session s = NotesFactory.createSession((String)null, (String)null, NotesAuth.getPassword());\ns.setConvertMIME(false);\n</code></pre>\n<p>The <code>setConvertMIME(false)</code> says to not convert any native MIME formatted documents to Notes format.  Useful if your objective is to do a MIME conversion. Saves a little time and any round trip inaccuracies.</p>\n<p>I used the following code to select email messages in the calling program:</p>\n<pre><code>if (&quot;Memo&quot;.equals(doc.getItemValueString(&quot;Form&quot;)) ||\n        &quot;Reply&quot;.equals(doc.getItemValueString(&quot;Form&quot;)))\n</code></pre>\n<p>For my use case I used the UUID of the Notes document along with the <code>'*.EML'</code> to create individual files for each email message. These were then successfully imported into another email system.</p>\n"},{"tags":[],"owner":{"account_id":3622877,"reputation":49,"user_id":3021194,"display_name":"Francesco Marzolo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672334004,"creation_date":1672334004,"answer_id":74954121,"question_id":67290512,"body_markdown":"@jch, my tests with your code works fine with Notes generated messages, while I&#39;m losing html fidelity for messages coming from the internet or no html at all. Have you experimented with another way for internet generated posts (those with some html tables and divs)?\r\n\r\nI&#39;ve tried adding the following with no luck:\r\n\r\n    \texporter.setRichTextOption(RICHTEXTOPTION_RAW);\t\r\n\t\texporter.setConvertNotesBitmapsToGIF(true);\t\r\n\t\tif (doc.hasItem(&quot;$KeepPrivate&quot;)) {\r\n\t\t\tdoc.removeItem(&quot;$KeepPrivate&quot;);\t\r\n\t\t}\r\n\t\tdoc.convertToMIME(Document.CVT_RT_TO_HTML);","title":"How to Programmatically Convert Lotus Notes email Document to MIME Format","body":"<p>@jch, my tests with your code works fine with Notes generated messages, while I'm losing html fidelity for messages coming from the internet or no html at all. Have you experimented with another way for internet generated posts (those with some html tables and divs)?</p>\n<p>I've tried adding the following with no luck:</p>\n<pre><code>    exporter.setRichTextOption(RICHTEXTOPTION_RAW); \n    exporter.setConvertNotesBitmapsToGIF(true); \n    if (doc.hasItem(&quot;$KeepPrivate&quot;)) {\n        doc.removeItem(&quot;$KeepPrivate&quot;); \n    }\n    doc.convertToMIME(Document.CVT_RT_TO_HTML);\n</code></pre>\n"}],"owner":{"account_id":4928027,"reputation":3620,"user_id":3968761,"accept_rate":75,"display_name":"sitting_duck"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":964,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":67290513,"answer_count":2,"score":-1,"last_activity_date":1672334004,"creation_date":1619556662,"question_id":67290512,"body_markdown":"I began developing a complex solution then found that the `DxlExporter` will do all the work for you. I wanted to share this simple solution. \r\n\r\n\r\n ","title":"How to Programmatically Convert Lotus Notes email Document to MIME Format","body":"<p>I began developing a complex solution then found that the <code>DxlExporter</code> will do all the work for you. I wanted to share this simple solution.</p>\n"},{"tags":["java","json","jackson","jsonschema","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Michał Ziober"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672333123,"creation_date":1672333123,"answer_id":74953976,"question_id":74913523,"body_markdown":"[Json Schema][1] does not introduce `int64` type. There are only `number` and `integer` types. Take a look at the enum [JsonFormatTypes][2]. `JsonSchema` module uses it. To extend it you would have to extend a lot of classes and somehow trick internal mechanism to replace `integer` with `int64` which at the end would generate misleading schema which would be understandable only for you. All other libs and tools do not recognise it. I propose to use `com.fasterxml.jackson.annotation.JsonPropertyDescription` annotation for `long` property:\r\n```java\r\nclass MyClass {\r\n\r\n\tprivate int myInt;\r\n\r\n\t@JsonPropertyDescription(&quot;int64&quot;)\r\n\tprivate long myLong;\r\n}\r\n```\r\n\r\nWhich will generate something like this:\r\n```json\r\n{\r\n  &quot;type&quot; : &quot;object&quot;,\r\n  &quot;id&quot; : &quot;urn:jsonschema:com:example:MyClass&quot;,\r\n  &quot;properties&quot; : {\r\n    &quot;myInt&quot; : {\r\n      &quot;type&quot; : &quot;integer&quot;\r\n    },\r\n    &quot;myLong&quot; : {\r\n      &quot;type&quot; : &quot;integer&quot;,\r\n      &quot;description&quot; : &quot;int64&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://json-schema.org/understanding-json-schema/reference/numeric.html#numeric-types\r\n  [2]: https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/jsonFormatVisitors/JsonFormatTypes.html","title":"How can I make fasterXml ObjectMapper put a format property into schema for fields of the type long","body":"<p><a href=\"https://json-schema.org/understanding-json-schema/reference/numeric.html#numeric-types\" rel=\"nofollow noreferrer\">Json Schema</a> does not introduce <code>int64</code> type. There are only <code>number</code> and <code>integer</code> types. Take a look at the enum <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/jsonFormatVisitors/JsonFormatTypes.html\" rel=\"nofollow noreferrer\">JsonFormatTypes</a>. <code>JsonSchema</code> module uses it. To extend it you would have to extend a lot of classes and somehow trick internal mechanism to replace <code>integer</code> with <code>int64</code> which at the end would generate misleading schema which would be understandable only for you. All other libs and tools do not recognise it. I propose to use <code>com.fasterxml.jackson.annotation.JsonPropertyDescription</code> annotation for <code>long</code> property:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyClass {\n\n    private int myInt;\n\n    @JsonPropertyDescription(&quot;int64&quot;)\n    private long myLong;\n}\n</code></pre>\n<p>Which will generate something like this:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;type&quot; : &quot;object&quot;,\n  &quot;id&quot; : &quot;urn:jsonschema:com:example:MyClass&quot;,\n  &quot;properties&quot; : {\n    &quot;myInt&quot; : {\n      &quot;type&quot; : &quot;integer&quot;\n    },\n    &quot;myLong&quot; : {\n      &quot;type&quot; : &quot;integer&quot;,\n      &quot;description&quot; : &quot;int64&quot;\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":11205972,"reputation":123,"user_id":8221598,"display_name":"ishulz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74953976,"answer_count":1,"score":1,"last_activity_date":1672333284,"creation_date":1671974668,"question_id":74913523,"body_markdown":"How can I make an `ObjectMapper` set the `format` field for some properties in the generated schema of a class? \r\n\r\nI&#39;m trying to generate a schema for a java class using a `FasterXml` library:\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jackson-module-jsonSchema&lt;/artifactId&gt;\r\n  &lt;version&gt;2.14.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n  &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n  &lt;version&gt;2.14.1&lt;/version&gt;\r\n  &lt;scope&gt;compile&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\nTest:\r\n\r\n```\r\n@SneakyThrows\r\n@Test\r\npublic void test() {\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    SchemaFactoryWrapper schemaVisitor = new SchemaFactoryWrapper();\r\n    objectMapper.acceptJsonFormatVisitor(objectMapper.constructType(MyClass.class), schemaVisitor);\r\n    System.out.println(objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(schemaVisitor.finalSchema()));\r\n}\r\n\r\n@Data\r\npublic static class MyClass {\r\n    private int myInt;\r\n    private long myLong;\r\n}\r\n\r\n```\r\n\r\nThe result is like this:\r\n\r\n\r\n```\r\n{\r\n   &quot;type&quot;:&quot;object&quot;,\r\n   &quot;id&quot;:&quot;urn:jsonschema:........:MyClass&quot;,\r\n   &quot;properties&quot;:{\r\n      &quot;myInt&quot;:{\r\n         &quot;type&quot;:&quot;integer&quot;\r\n      },\r\n      &quot;myLong&quot;:{\r\n         &quot;type&quot;:&quot;integer&quot;\r\n      }\r\n   }\r\n}\r\n```\r\n\r\nBoth types are good, but I&#39;d like to have `&quot;format&quot;: &quot;int64&quot;` set for the property `myLong`.","title":"How can I make fasterXml ObjectMapper put a format property into schema for fields of the type long","body":"<p>How can I make an <code>ObjectMapper</code> set the <code>format</code> field for some properties in the generated schema of a class?</p>\n<p>I'm trying to generate a schema for a java class using a <code>FasterXml</code> library:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-module-jsonSchema&lt;/artifactId&gt;\n  &lt;version&gt;2.14.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n  &lt;version&gt;2.14.1&lt;/version&gt;\n  &lt;scope&gt;compile&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Test:</p>\n<pre><code>@SneakyThrows\n@Test\npublic void test() {\n    ObjectMapper objectMapper = new ObjectMapper();\n    SchemaFactoryWrapper schemaVisitor = new SchemaFactoryWrapper();\n    objectMapper.acceptJsonFormatVisitor(objectMapper.constructType(MyClass.class), schemaVisitor);\n    System.out.println(objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(schemaVisitor.finalSchema()));\n}\n\n@Data\npublic static class MyClass {\n    private int myInt;\n    private long myLong;\n}\n\n</code></pre>\n<p>The result is like this:</p>\n<pre><code>{\n   &quot;type&quot;:&quot;object&quot;,\n   &quot;id&quot;:&quot;urn:jsonschema:........:MyClass&quot;,\n   &quot;properties&quot;:{\n      &quot;myInt&quot;:{\n         &quot;type&quot;:&quot;integer&quot;\n      },\n      &quot;myLong&quot;:{\n         &quot;type&quot;:&quot;integer&quot;\n      }\n   }\n}\n</code></pre>\n<p>Both types are good, but I'd like to have <code>&quot;format&quot;: &quot;int64&quot;</code> set for the property <code>myLong</code>.</p>\n"},{"tags":["java","arrays","for-loop","if-statement","arraylist"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1672310710,"post_id":74950090,"comment_id":132263942,"body_markdown":"That cant be done with a enhanced for loop. Use a plain old for loop with an index.","body":"That cant be done with a enhanced for loop. Use a plain old for loop with an index."},{"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"score":0,"creation_date":1672311067,"post_id":74950090,"comment_id":132264035,"body_markdown":"@f1sh thank you for your reply. The problem with using an old loop is that the parameter nme is a String (realising now I didn&#39;t include this, apologies), and Champion objects don&#39;t have any int attributes to match with the index of the old for loop. Any ideas how to combat this?","body":"@f1sh thank you for your reply. The problem with using an old loop is that the parameter nme is a String (realising now I didn&#39;t include this, apologies), and Champion objects don&#39;t have any int attributes to match with the index of the old for loop. Any ideas how to combat this?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672311163,"post_id":74950090,"comment_id":132264069,"body_markdown":"The code has syntax errors. Please [edit] the post and fix the errors. --- &quot;*`temp.getName() == nme`*&quot; -  Please read: [How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java) (this holds true for any reference-type in Java, not only `String`s)","body":"The code has syntax errors. Please <a href=\"https://stackoverflow.com/posts/74950090/edit\">edit</a> the post and fix the errors. --- &quot;<i><code>temp.getName() == nme</code></i>&quot; -  Please read: <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java\">How do I compare strings in Java?</a> (this holds true for any reference-type in Java, not only <code>String</code>s)"},{"owner":{"account_id":6093946,"reputation":175,"user_id":4755373,"display_name":"Saima Haji"},"score":0,"creation_date":1672311902,"post_id":74950090,"comment_id":132264275,"body_markdown":"you can&#39;t iterate over both the list neither by enhanced loop nor by ola plain loop because both list can have different numbers of element. Use 2 nested loops","body":"you can&#39;t iterate over both the list neither by enhanced loop nor by ola plain loop because both list can have different numbers of element. Use 2 nested loops"}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672314790,"creation_date":1672312523,"answer_id":74950407,"question_id":74950090,"body_markdown":"If I understand correctly, your lists do not always seem to contain the same elements, and if they do, not necessarily in the same order. What you actually want to do is not iterate over the two lists at the same time but check if there is an element in both lists that has the same attribute as the passed parameter. You can do this one after the other:\r\n\r\n    public int retireChamp(nme){\r\n\r\n        boolean inChampList = false;\r\n        boolean inTeamList  = false;\r\n\r\n        for(Champion temp: championList) {\r\n           if(temp.getName().equals(nme)){\r\n              inChampList = true;\r\n              break;\r\n           }\r\n        }\r\n\r\n        for(Champion temp: teamList) {\r\n           if(temp.getName().equals(nme)){\r\n              inTeamList = true;\r\n              break;\r\n           }\r\n        }\r\n\r\n        if(inChampList &amp;&amp; inTeamList) {\r\n           //your logic here - nme is in both lists\r\n        } else if (inChampList ^ inTeamList) {\r\n           //your logic here - nme is in one of the lists\r\n        } else {\r\n           //your logic here - nme is in none of the lists\r\n        }\r\n    }","title":"How to implement a for loop of objects in two arrayLists at once in Java?","body":"<p>If I understand correctly, your lists do not always seem to contain the same elements, and if they do, not necessarily in the same order. What you actually want to do is not iterate over the two lists at the same time but check if there is an element in both lists that has the same attribute as the passed parameter. You can do this one after the other:</p>\n<pre><code>public int retireChamp(nme){\n\n    boolean inChampList = false;\n    boolean inTeamList  = false;\n\n    for(Champion temp: championList) {\n       if(temp.getName().equals(nme)){\n          inChampList = true;\n          break;\n       }\n    }\n\n    for(Champion temp: teamList) {\n       if(temp.getName().equals(nme)){\n          inTeamList = true;\n          break;\n       }\n    }\n\n    if(inChampList &amp;&amp; inTeamList) {\n       //your logic here - nme is in both lists\n    } else if (inChampList ^ inTeamList) {\n       //your logic here - nme is in one of the lists\n    } else {\n       //your logic here - nme is in none of the lists\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20834787,"reputation":5,"user_id":15303202,"display_name":"aidan gaskin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74950407,"answer_count":1,"score":-1,"last_activity_date":1672333062,"creation_date":1672310649,"question_id":74950090,"body_markdown":"**New to programming, please forgive if this is stupid**\r\n\r\nI&#39;m trying to loop through two arrayLists at once in Java. Below is my code and beneath that is the code I am trying to implement (if this is possible).\r\n\r\n\r\nIn a class &quot;Tournament&quot;, it creates and stores Champion objects. I have two arrayLists: championList(this stores all hard coded champion objects into the game) and teamList(champion objects are added to a players team). \r\n\r\nI want to check if the champion object in question (the parameter in the method) exists by looping through both arrayLists and returning a specified int if it doesn&#39;t. \r\n\r\n\r\n**Working code:**\r\n```\r\n    public int retireChamp(String nme){\r\n    for(Champion temp: championList)\r\n    {\r\n       if(temp.getName().equals(nme)) \r\n       do something etc...\r\n    }\r\n```\r\n**Code I want to implement if possible**\r\n```\r\n    public int retireChamp(nme){\r\n    for(Champion temp: championList &amp;&amp; teamList)\r\n    {\r\n       do something...\r\n    }\r\n```","title":"How to implement a for loop of objects in two arrayLists at once in Java?","body":"<p><strong>New to programming, please forgive if this is stupid</strong></p>\n<p>I'm trying to loop through two arrayLists at once in Java. Below is my code and beneath that is the code I am trying to implement (if this is possible).</p>\n<p>In a class &quot;Tournament&quot;, it creates and stores Champion objects. I have two arrayLists: championList(this stores all hard coded champion objects into the game) and teamList(champion objects are added to a players team).</p>\n<p>I want to check if the champion object in question (the parameter in the method) exists by looping through both arrayLists and returning a specified int if it doesn't.</p>\n<p><strong>Working code:</strong></p>\n<pre><code>    public int retireChamp(String nme){\n    for(Champion temp: championList)\n    {\n       if(temp.getName().equals(nme)) \n       do something etc...\n    }\n</code></pre>\n<p><strong>Code I want to implement if possible</strong></p>\n<pre><code>    public int retireChamp(nme){\n    for(Champion temp: championList &amp;&amp; teamList)\n    {\n       do something...\n    }\n</code></pre>\n"},{"tags":["java","rest-assured"],"comments":[{"owner":{"account_id":8405500,"reputation":430,"user_id":6309111,"display_name":"Dev-vruper"},"score":0,"creation_date":1672308650,"post_id":74949665,"comment_id":132263369,"body_markdown":"Create List&lt;serviceProviderEmailList&gt; emaiList , and then add this to the map\neg : map.put(&quot;serviceProviderEmailList&quot;, emaiList&quot;)","body":"Create List&lt;serviceProviderEmailList&gt; emaiList , and then add this to the map eg : map.put(&quot;serviceProviderEmailList&quot;, emaiList&quot;)"}],"answers":[{"tags":[],"owner":{"account_id":27264513,"reputation":354,"user_id":20786794,"display_name":"Omprakash Chavan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672332771,"creation_date":1672332771,"answer_id":74953913,"question_id":74949665,"body_markdown":"For better readability, You can convert the JSON to a Java object and then pass it to Rest Assured. For e.g. you can convert it to a Java collection as shown below. This process is called as Serialisation.\r\n\r\nUnder the hood, Rest Assured will use libraries like Jackson Data Bind to de-serialize it and send along with the request. \r\n\r\nHere&#39;s the sample code you can use:\r\n\r\n        List&lt;String&gt; serviceProviderEmailList = new ArrayList&lt;&gt;();\r\n        serviceProviderEmailList.add(&quot;element1&quot;);\r\n        serviceProviderEmailList.add(&quot;element2&quot;);\r\n\r\n        HashMap&lt;String, Object&gt; rootJsonObject = new HashMap&lt;&gt;();\r\n        rootJsonObject.put(&quot;requestNumber&quot;, 749);\r\n        rootJsonObject.put(&quot;cardType&quot;, &quot;value&quot;);\r\n        rootJsonObject.put(&quot;companyName&quot;, &quot;value&quot;);\r\n        rootJsonObject.put(&quot;rejectMessage&quot;, &quot;value&quot;);\r\n        rootJsonObject.put(&quot;contactEmail&quot;, &quot;value&quot;);\r\n        rootJsonObject.put(&quot;serviceProviderEmailList&quot;, serviceProviderEmailList);\r\n        rootJsonObject.put(&quot;approvedBy&quot;, &quot;value&quot;);\r\n        rootJsonObject.put(&quot;approvedDate&quot;, &quot;value&quot;);\r\n\r\n        given().\r\n                body(rootJsonObject).\r\n        when().\r\n                post(&quot;endpoint&quot;);\r\n\r\nPlease don&#39;t forget to add Jackson Data bind as a dependency in your project. For e.g. if you are using Maven, you can add it as below in your pom.xml.\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;2.14.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"How to write array request body in rest assured","body":"<p>For better readability, You can convert the JSON to a Java object and then pass it to Rest Assured. For e.g. you can convert it to a Java collection as shown below. This process is called as Serialisation.</p>\n<p>Under the hood, Rest Assured will use libraries like Jackson Data Bind to de-serialize it and send along with the request.</p>\n<p>Here's the sample code you can use:</p>\n<pre><code>    List&lt;String&gt; serviceProviderEmailList = new ArrayList&lt;&gt;();\n    serviceProviderEmailList.add(&quot;element1&quot;);\n    serviceProviderEmailList.add(&quot;element2&quot;);\n\n    HashMap&lt;String, Object&gt; rootJsonObject = new HashMap&lt;&gt;();\n    rootJsonObject.put(&quot;requestNumber&quot;, 749);\n    rootJsonObject.put(&quot;cardType&quot;, &quot;value&quot;);\n    rootJsonObject.put(&quot;companyName&quot;, &quot;value&quot;);\n    rootJsonObject.put(&quot;rejectMessage&quot;, &quot;value&quot;);\n    rootJsonObject.put(&quot;contactEmail&quot;, &quot;value&quot;);\n    rootJsonObject.put(&quot;serviceProviderEmailList&quot;, serviceProviderEmailList);\n    rootJsonObject.put(&quot;approvedBy&quot;, &quot;value&quot;);\n    rootJsonObject.put(&quot;approvedDate&quot;, &quot;value&quot;);\n\n    given().\n            body(rootJsonObject).\n    when().\n            post(&quot;endpoint&quot;);\n</code></pre>\n<p>Please don't forget to add Jackson Data bind as a dependency in your project. For e.g. if you are using Maven, you can add it as below in your pom.xml.</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.14.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":26847027,"reputation":5,"user_id":20432635,"display_name":"Riya"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":570,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74953913,"answer_count":1,"score":0,"last_activity_date":1672332771,"creation_date":1672308017,"question_id":74949665,"body_markdown":"I have used rest assured framework, This is the request body for post method\r\n\r\n```\r\n{\r\n  &quot;requestNumber&quot;:749 ,\r\n  &quot;referenceNumber&quot;: &quot;tyryrty&quot;,\r\n  &quot;cardType&quot;: &quot;aliqua pariatur enim cupidatat&quot;,\r\n  &quot;companyName&quot;: &quot;amet Lorem&quot;,\r\n  &quot;rejectMessage&quot;: &quot;tempor dolor officia&quot;,\r\n  &quot;contactEmail&quot;: &quot;mollit pariatur veniam sed&quot;,\r\n  &quot;serviceProviderEmailList&quot;: [\r\n    &quot;ipsum nis&quot;,\r\n    &quot;Ut dolore aliqua exercitation irure&quot;\r\n  ],\r\n  &quot;approvedBy&quot;: &quot;sup&quot;,\r\n  &quot;approvedDate&quot;: &quot;1962-07-15T01:00:55.437Z&quot;\r\n}\r\n```\r\n\r\n\r\n\r\nI have tried in this way but i&#39;m not getting result\r\n\r\n```\r\n \r\nJSONObject jsonobj1 = new JSONObject();\r\n\t\t\tjsonobj1.put(&quot;requestNumber&quot;, 749 );\r\n\t\t\tjsonobj1.put(&quot;referenceNumber&quot;, &quot;tyryrty&quot;);\r\n\t\t\tjsonobj1.put(&quot;cardType&quot;, &quot;aliqua pariatur enim cupidatat&quot;);\r\n\t\t\tjsonobj1.put(&quot;companyName&quot;, &quot;amet Lorem&quot;);\r\n\t\t\tjsonobj1.put(&quot;contactEmail&quot;, &quot;tempor dolor officia&quot;);\r\n\t\t\tMap&lt;String, Object&gt; map= new HashMap&lt;String,Object&gt;();\r\n\t\t\tmap.put(&quot;serviceProviderEmailList&quot;, &quot;ipsum nis&quot;);\r\n\t\t\tList&lt;Map&lt;String, Object&gt;&gt; test=Arrays.asList(map);\r\n\t\t\tjsonobj1.put(&quot;serviceProviderEmailList&quot;, test);\r\n\t\t\t\r\n\t\t\tjsonobj1.put(&quot;approvedBy&quot;, &quot;sup&quot;);\r\n\t\t\tjsonobj1.put(&quot;approvedDate&quot;, &quot;1962-07-15T01:00:55.437Z&quot;);\r\n```\r\n","title":"How to write array request body in rest assured","body":"<p>I have used rest assured framework, This is the request body for post method</p>\n<pre><code>{\n  &quot;requestNumber&quot;:749 ,\n  &quot;referenceNumber&quot;: &quot;tyryrty&quot;,\n  &quot;cardType&quot;: &quot;aliqua pariatur enim cupidatat&quot;,\n  &quot;companyName&quot;: &quot;amet Lorem&quot;,\n  &quot;rejectMessage&quot;: &quot;tempor dolor officia&quot;,\n  &quot;contactEmail&quot;: &quot;mollit pariatur veniam sed&quot;,\n  &quot;serviceProviderEmailList&quot;: [\n    &quot;ipsum nis&quot;,\n    &quot;Ut dolore aliqua exercitation irure&quot;\n  ],\n  &quot;approvedBy&quot;: &quot;sup&quot;,\n  &quot;approvedDate&quot;: &quot;1962-07-15T01:00:55.437Z&quot;\n}\n</code></pre>\n<p>I have tried in this way but i'm not getting result</p>\n<pre><code> \nJSONObject jsonobj1 = new JSONObject();\n            jsonobj1.put(&quot;requestNumber&quot;, 749 );\n            jsonobj1.put(&quot;referenceNumber&quot;, &quot;tyryrty&quot;);\n            jsonobj1.put(&quot;cardType&quot;, &quot;aliqua pariatur enim cupidatat&quot;);\n            jsonobj1.put(&quot;companyName&quot;, &quot;amet Lorem&quot;);\n            jsonobj1.put(&quot;contactEmail&quot;, &quot;tempor dolor officia&quot;);\n            Map&lt;String, Object&gt; map= new HashMap&lt;String,Object&gt;();\n            map.put(&quot;serviceProviderEmailList&quot;, &quot;ipsum nis&quot;);\n            List&lt;Map&lt;String, Object&gt;&gt; test=Arrays.asList(map);\n            jsonobj1.put(&quot;serviceProviderEmailList&quot;, test);\n            \n            jsonobj1.put(&quot;approvedBy&quot;, &quot;sup&quot;);\n            jsonobj1.put(&quot;approvedDate&quot;, &quot;1962-07-15T01:00:55.437Z&quot;);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","asynchronous","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672332594,"creation_date":1672330458,"answer_id":74953506,"question_id":74952151,"body_markdown":"I have not seen a really clean way to get asynchronous-but-non-reactive data into the reactive stream. Your use of countdown latch is as good as any.\r\n\r\nHowever, if you use the [ReactiveKafka][1] library, then you won&#39;t have to do any of the clumsy blocking. \r\n\r\n### UPDATE\r\nI actually did find a relatively elegant solution that uses [MonoSink][2].\r\n\r\n```Java\r\npublic Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; post(@RequestBody Mono&lt;byte[]&gt; b) {\r\n    return b.map(String::new)\r\n        .flatMap(data -&gt; Mono.&lt;String&gt;create(sink -&gt; {\r\n          Consumer&lt;String&gt; kafkaListener = sink::success;\r\n\r\n          subscribe(&quot;topic_abc&quot;, String.class, kafkaListener);\r\n          sendAuthenticationRequestToKafka(data);\r\n        })\r\n        .map(this::toResponse);\r\n}\r\n```\r\nThis assumes that `subscribe`, and `sendAuthenticationRequestToKafka` are in scope. If you move that to the service layer, you can have that method return `Mono&lt;String&gt;`. \r\n\r\nAlso, I don&#39;t know how Kafka handles errors, but you could create error handlers that forward those to the sink.\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/kafka/release/reference/\r\n  [2]: https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html","title":"Correct way to await in Spring Webflux","body":"<p>I have not seen a really clean way to get asynchronous-but-non-reactive data into the reactive stream. Your use of countdown latch is as good as any.</p>\n<p>However, if you use the <a href=\"https://projectreactor.io/docs/kafka/release/reference/\" rel=\"nofollow noreferrer\">ReactiveKafka</a> library, then you won't have to do any of the clumsy blocking.</p>\n<h3>UPDATE</h3>\n<p>I actually did find a relatively elegant solution that uses <a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html\" rel=\"nofollow noreferrer\">MonoSink</a>.</p>\n<pre><code>public Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; post(@RequestBody Mono&lt;byte[]&gt; b) {\n    return b.map(String::new)\n        .flatMap(data -&gt; Mono.&lt;String&gt;create(sink -&gt; {\n          Consumer&lt;String&gt; kafkaListener = sink::success;\n\n          subscribe(&quot;topic_abc&quot;, String.class, kafkaListener);\n          sendAuthenticationRequestToKafka(data);\n        })\n        .map(this::toResponse);\n}\n</code></pre>\n<p>This assumes that <code>subscribe</code>, and <code>sendAuthenticationRequestToKafka</code> are in scope. If you move that to the service layer, you can have that method return <code>Mono&lt;String&gt;</code>.</p>\n<p>Also, I don't know how Kafka handles errors, but you could create error handlers that forward those to the sink.</p>\n"}],"owner":{"account_id":15062605,"reputation":967,"user_id":10870817,"display_name":"SoT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":657,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74953506,"answer_count":1,"score":0,"last_activity_date":1672332594,"creation_date":1672322898,"question_id":74952151,"body_markdown":"We have a HTTP endpoint that takes a command and send it via kafka to another place, then we **MUST** wait the response via kafka and then return ResponseEntity to client.\r\n\r\n      public Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; post(@RequestBody Mono&lt;byte[]&gt; b) {\r\n        return b.flatMap(\r\n                identifyType -&gt; service.requestProcess(identifyType).flatMap(this::toResponse));\r\n      }\r\n\r\nIn the service:\r\n\r\n    public Mono&lt;String&gt; requestProcess(byte[] b) {\r\n        String r = authenticationService.waitForAuthentication(parseBytes(b));\r\n        if (StringUtils.isEmpty(r)) {\r\n          throw new CustomException(&quot;Failed to authenticate&quot;);\r\n        }\r\n        return Mono.just(r);\r\n    }\r\n\r\nIn the authenticationService\r\n\r\n    public String waitForAuthentication(String data) {\r\n        CountDownLatch countDownLatch = new CountDownLatch(1);\r\n        Listener listener = new Listener(countDownLatch);\r\n        //another setup\r\n        subscribe(&quot;topic_abc&quot;, String.class, listener);\r\n        sendAuthenticationRequestToKafka(data);\r\n        try {\r\n          boolean b = countDownLatch.await(2, TimeUnit.SECONDS);\r\n          if(b) return listerner.getData();\r\n          else throw new CustomExcetion();\r\n        catch(Exception e) {\r\n          throw new CustomExcetion();\r\n        }\r\n    }\r\n    \r\nThe listener\r\n\r\n    @RequiredArgsConstructor\r\n    public class Listener implements Consumer&lt;String&gt; {\r\n      @Getter private final CountDownLatch countDownLatch;\r\n      @Getter private String data;\r\n    \r\n      @Override\r\n      public void accept(String data) {\r\n        this.data = data;\r\n        // count to 0 \r\n        countDownLatch.countDown();\r\n      }\r\n    }\r\n\r\nI read document and all of them say that we should never sleep/block/await on webflux application because it will block the current thread and the thread cannot handle another HTTP request.\r\n\r\nBut in our case, await is a must. We cannot change the flow above because client is a blackbox. Please suggest a correct way to await in webflux application/controller. thank you","title":"Correct way to await in Spring Webflux","body":"<p>We have a HTTP endpoint that takes a command and send it via kafka to another place, then we <strong>MUST</strong> wait the response via kafka and then return ResponseEntity to client.</p>\n<pre><code>  public Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; post(@RequestBody Mono&lt;byte[]&gt; b) {\n    return b.flatMap(\n            identifyType -&gt; service.requestProcess(identifyType).flatMap(this::toResponse));\n  }\n</code></pre>\n<p>In the service:</p>\n<pre><code>public Mono&lt;String&gt; requestProcess(byte[] b) {\n    String r = authenticationService.waitForAuthentication(parseBytes(b));\n    if (StringUtils.isEmpty(r)) {\n      throw new CustomException(&quot;Failed to authenticate&quot;);\n    }\n    return Mono.just(r);\n}\n</code></pre>\n<p>In the authenticationService</p>\n<pre><code>public String waitForAuthentication(String data) {\n    CountDownLatch countDownLatch = new CountDownLatch(1);\n    Listener listener = new Listener(countDownLatch);\n    //another setup\n    subscribe(&quot;topic_abc&quot;, String.class, listener);\n    sendAuthenticationRequestToKafka(data);\n    try {\n      boolean b = countDownLatch.await(2, TimeUnit.SECONDS);\n      if(b) return listerner.getData();\n      else throw new CustomExcetion();\n    catch(Exception e) {\n      throw new CustomExcetion();\n    }\n}\n</code></pre>\n<p>The listener</p>\n<pre><code>@RequiredArgsConstructor\npublic class Listener implements Consumer&lt;String&gt; {\n  @Getter private final CountDownLatch countDownLatch;\n  @Getter private String data;\n\n  @Override\n  public void accept(String data) {\n    this.data = data;\n    // count to 0 \n    countDownLatch.countDown();\n  }\n}\n</code></pre>\n<p>I read document and all of them say that we should never sleep/block/await on webflux application because it will block the current thread and the thread cannot handle another HTTP request.</p>\n<p>But in our case, await is a must. We cannot change the flow above because client is a blackbox. Please suggest a correct way to await in webflux application/controller. thank you</p>\n"},{"tags":["java","java-time","datetime-parsing","zoneddatetime","localdatetime"],"comments":[{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1672279978,"post_id":74946619,"comment_id":132258233,"body_markdown":"You probably want to have a list of formats that you&#39;ll accept input in, possibly as a `List&lt;DateTimeFormatter&gt;`.  Then try parsing your input with each one in turn, until one succeeds and gives you a `ZonedDateTime`.","body":"You probably want to have a list of formats that you&#39;ll accept input in, possibly as a <code>List&lt;DateTimeFormatter&gt;</code>.  Then try parsing your input with each one in turn, until one succeeds and gives you a <code>ZonedDateTime</code>."},{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1672288641,"post_id":74946619,"comment_id":132259198,"body_markdown":"Here are the formats in the order you list your date-times: `EEEE, dd MMM yyyy, HH:mm:ss (z)`, `MM/dd (EE), HH:mm z`, `yyyy/MM/dd HH:mm:ss z` (last two).","body":"Here are the formats in the order you list your date-times: <code>EEEE, dd MMM yyyy, HH:mm:ss (z)</code>, <code>MM&#47;dd (EE), HH:mm z</code>, <code>yyyy&#47;MM&#47;dd HH:mm:ss z</code> (last two)."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672668296,"post_id":74946619,"comment_id":132323217,"body_markdown":"Since your inputs are in GMT/UTC, use `OffsetDateTime` for them (or even `ZonedDateTime` if you want to distinguish between GMT and UTC). Not `LocalDateTime`.","body":"Since your inputs are in GMT/UTC, use <code>OffsetDateTime</code> for them (or even <code>ZonedDateTime</code> if you want to distinguish between GMT and UTC). Not <code>LocalDateTime</code>."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1672693291,"post_id":74946619,"comment_id":132329659,"body_markdown":"It can be done much simpler; you are greatly overcomplicating it. Leave more of it to Java. My suggestion[is here (it’s a link)](https://rextester.com/WOHTIR47080).","body":"It can be done much simpler; you are greatly overcomplicating it. Leave more of it to Java. My suggestion<a href=\"https://rextester.com/WOHTIR47080\" rel=\"nofollow noreferrer\">is here (it’s a link)</a>."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672332288,"creation_date":1672331933,"answer_id":74953753,"question_id":74946619,"body_markdown":"Creating the parser for the first date-time string is straightforward. In order to parse the second date-time string, you can create `DateTimeFormatter` with the default year as the current year.\r\n\r\nNote that your expected output has timezone information and therefore they are `ZonedDateTime`, not `LocalDateTime`.\r\n\r\n**Demo**:\r\n\r\n    import java.time.Year;\r\n    import java.time.ZonedDateTime;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.format.DateTimeFormatterBuilder;\r\n    import java.time.temporal.ChronoField;\r\n    import java.util.Locale;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            DateTimeFormatter dtf1 = DateTimeFormatter.ofPattern(&quot;EEEE, dd MMM uuuu HH:mm:ss &#39;(&#39;VV&#39;)&#39;&quot;, Locale.ENGLISH);\r\n            DateTimeFormatter dtf2 = new DateTimeFormatterBuilder()\r\n                    .parseDefaulting(ChronoField.YEAR, Year.now().getValue())\r\n                    .appendPattern(&quot;MM/dd &#39;(&#39;EEE&#39;)&#39;, HH:mm VV&quot;)\r\n                    .toFormatter(Locale.ENGLISH);\r\n    \r\n            ZonedDateTime zdt1 = ZonedDateTime.parse(&quot;Wednesday, 30 Nov 2022 10:30:00 (UTC)&quot;, dtf1);\r\n            ZonedDateTime zdt2 = ZonedDateTime.parse(&quot;12/08 (Thu), 10:00 GMT&quot;, dtf2);\r\n    \r\n            System.out.println(zdt1);\r\n            System.out.println(zdt2);\r\n    \r\n            // Formatted output\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;uuuu/MM/dd HH:mm:ss z&quot;, Locale.ENGLISH);\r\n            System.out.println(zdt1.format(formatter));\r\n            System.out.println(zdt2.format(formatter));\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    2022-11-30T10:30Z[UTC]\r\n    2022-12-08T10:00Z[GMT]\r\n    2022/11/30 10:30:00 UTC\r\n    2022/12/08 10:00:00 GMT\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;](https://ideone.com/ahT12S)\r\n\r\nCombined parser\r\n--\r\n\r\nYou can combine both patterns to create a single `DateTimeFormatter` as follows:\r\n\r\n    DateTimeFormatter dtf = new DateTimeFormatterBuilder()\r\n                    .optionalStart()\r\n                    .appendPattern(&quot;EEEE, dd MMM uuuu HH:mm:ss &#39;(&#39;VV&#39;)&#39;&quot;)\r\n                    .optionalEnd()\r\n                    .optionalStart()\r\n                    .parseDefaulting(ChronoField.YEAR, Year.now().getValue())\r\n                    .appendPattern(&quot;MM/dd &#39;(&#39;EEE&#39;)&#39;, HH:mm VV&quot;)\r\n                    .optionalEnd()\r\n                    .toFormatter(Locale.ENGLISH);\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;](https://ideone.com/JmWGsi)\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.","title":"How can I format this value in java localdatetime?","body":"<p>Creating the parser for the first date-time string is straightforward. In order to parse the second date-time string, you can create <code>DateTimeFormatter</code> with the default year as the current year.</p>\n<p>Note that your expected output has timezone information and therefore they are <code>ZonedDateTime</code>, not <code>LocalDateTime</code>.</p>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.time.Year;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeFormatterBuilder;\nimport java.time.temporal.ChronoField;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        DateTimeFormatter dtf1 = DateTimeFormatter.ofPattern(&quot;EEEE, dd MMM uuuu HH:mm:ss '('VV')'&quot;, Locale.ENGLISH);\n        DateTimeFormatter dtf2 = new DateTimeFormatterBuilder()\n                .parseDefaulting(ChronoField.YEAR, Year.now().getValue())\n                .appendPattern(&quot;MM/dd '('EEE')', HH:mm VV&quot;)\n                .toFormatter(Locale.ENGLISH);\n\n        ZonedDateTime zdt1 = ZonedDateTime.parse(&quot;Wednesday, 30 Nov 2022 10:30:00 (UTC)&quot;, dtf1);\n        ZonedDateTime zdt2 = ZonedDateTime.parse(&quot;12/08 (Thu), 10:00 GMT&quot;, dtf2);\n\n        System.out.println(zdt1);\n        System.out.println(zdt2);\n\n        // Formatted output\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;uuuu/MM/dd HH:mm:ss z&quot;, Locale.ENGLISH);\n        System.out.println(zdt1.format(formatter));\n        System.out.println(zdt2.format(formatter));\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>2022-11-30T10:30Z[UTC]\n2022-12-08T10:00Z[GMT]\n2022/11/30 10:30:00 UTC\n2022/12/08 10:00:00 GMT\n</code></pre>\n<p><a href=\"https://ideone.com/ahT12S\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<h2>Combined parser</h2>\n<p>You can combine both patterns to create a single <code>DateTimeFormatter</code> as follows:</p>\n<pre><code>DateTimeFormatter dtf = new DateTimeFormatterBuilder()\n                .optionalStart()\n                .appendPattern(&quot;EEEE, dd MMM uuuu HH:mm:ss '('VV')'&quot;)\n                .optionalEnd()\n                .optionalStart()\n                .parseDefaulting(ChronoField.YEAR, Year.now().getValue())\n                .appendPattern(&quot;MM/dd '('EEE')', HH:mm VV&quot;)\n                .optionalEnd()\n                .toFormatter(Locale.ENGLISH);\n</code></pre>\n<p><a href=\"https://ideone.com/JmWGsi\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"}],"owner":{"account_id":26354496,"reputation":11,"user_id":20011685,"display_name":"sktom2"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":624,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672332441,"creation_date":1672279676,"question_id":74946619,"body_markdown":"```\r\nWednesday, 30 Nov 2022 10:30:00 (UTC)\r\n12/08 (Thu), 10:00 GMT\r\n```\r\nEach item was extracted using regex from the data uploaded in this way.\r\n\r\n\r\nWith the selected items, we want to construct a localDatetime in Java.\r\n\r\n\r\n\r\nBelow is the code to configure it.\r\n\r\n\r\n```\r\n@Override\r\npublic List&lt;LocalDateTime&gt; getTime(String str) {\r\n  Matcher matcher = regex(&quot;(\\\\d+)\\\\/(\\\\d+)\\\\(\\\\W\\\\), \\\\d+:\\\\d+-(\\\\d+):(\\\\d+)\\\\s+(\\\\w+)&quot;, str);\r\n  LocalDateTime date;\r\n  List&lt;LocalDateTime&gt; list = new ArrayList&lt;&gt;();\r\n  int year, month, day, hour, minute, second;\r\n  ZoneId timezone;\r\n  year = LocalDateTime.now().getYear();\r\n  while(matcher.find()){\r\n    month = getMonth(matcher.group(1));\r\n    day = Integer.parseInt(matcher.group(2));\r\n    hour = Integer.parseInt(matcher.group(3));\r\n    minute = Integer.parseInt(matcher.group(4));\r\n    second = 0;\r\n    if(matcher.group(5).equals(&quot;KST&quot;)) {\r\n      timezone = ZoneId.of(&quot;Asia/Seoul&quot;);\r\n    }\r\n    else{\r\n      timezone = ZoneId.of(matcher.group(5));\r\n    }\r\n    date = LocalDateTime.of(year, month, day, hour, minute, second);\r\n\r\n    ZonedDateTime time = ZonedDateTime.of(date, timezone);\r\n    LocalDateTime result = timeZoneConverter(time);\r\n    list.add(result);\r\n\r\n\r\n  }\r\n  return list;\r\n}\r\n\r\n\r\npublic static Matcher regex(String regex, String input) {\r\n  return Pattern.compile(regex, Pattern.MULTILINE).matcher(input);\r\n}\r\n\r\n\r\npublic static int getMonth(String s) {\r\n  int result = 0;\r\n  switch (s) {\r\n    case &quot;1&quot;:\r\n    case &quot;Jan&quot;:\r\n      result = 1;\r\n    case &quot;Feb&quot;:\r\n    case &quot;2&quot;:\r\n      result = 2;\r\n    case &quot;Mar&quot;:\r\n    case &quot;3&quot;:\r\n      result = 3;\r\n    case &quot;Apr&quot;:\r\n    case &quot;4&quot;:\r\n      result = 4;\r\n    case &quot;May&quot;:\r\n    case &quot;5&quot;:\r\n      result = 5;\r\n    case &quot;Jun&quot;:\r\n    case &quot;6&quot;:\r\n      result = 6;\r\n    case &quot;Jul&quot;:\r\n    case &quot;7&quot;:\r\n      result = 7;\r\n    case &quot;Aug&quot;:\r\n    case &quot;8&quot;:\r\n      result = 8;\r\n    case &quot;Sep&quot;:\r\n    case &quot;9&quot;:\r\n      result = 9;\r\n    case &quot;Oct&quot;:\r\n    case &quot;10&quot;:\r\n      result = 10;\r\n    case &quot;Nov&quot;:\r\n    case &quot;11&quot;:\r\n      result = 11;\r\n    case &quot;Dec&quot;:\r\n    case &quot;12&quot;:\r\n      result = 12;\r\n  }\r\n  return result;\r\n}\r\n\r\n  public static LocalDateTime timeZoneConverter(ZonedDateTime dateTime) {\r\n    ZonedDateTime resultZonedDateTime = dateTime.withZoneSameInstant(ZoneId.of(&quot;Asia/Seoul&quot;));\r\n\r\n    LocalDateTime localDate = LocalDateTime.parse(resultZonedDateTime.toLocalDateTime().toString());\r\n    System.out.println(&quot;localDate = &quot; + localDate);\r\n    return localDate;\r\n  }\r\n```\r\n\r\nreturn is required java LocalDateTime...\r\n\r\nIf the content of the article is insufficient, I will edit it further.\r\n\r\n\r\n\r\n\r\n\r\nI googled for hours, but couldn&#39;t get around.\r\n\r\n\r\n\r\nThe result that i want is below.\r\n```\r\n2022/11/30 10:30:00 UTC\r\n2022/12/08 10:00:00 GMT\r\n```\r\n\r\n","title":"How can I format this value in java localdatetime?","body":"<pre><code>Wednesday, 30 Nov 2022 10:30:00 (UTC)\n12/08 (Thu), 10:00 GMT\n</code></pre>\n<p>Each item was extracted using regex from the data uploaded in this way.</p>\n<p>With the selected items, we want to construct a localDatetime in Java.</p>\n<p>Below is the code to configure it.</p>\n<pre><code>@Override\npublic List&lt;LocalDateTime&gt; getTime(String str) {\n  Matcher matcher = regex(&quot;(\\\\d+)\\\\/(\\\\d+)\\\\(\\\\W\\\\), \\\\d+:\\\\d+-(\\\\d+):(\\\\d+)\\\\s+(\\\\w+)&quot;, str);\n  LocalDateTime date;\n  List&lt;LocalDateTime&gt; list = new ArrayList&lt;&gt;();\n  int year, month, day, hour, minute, second;\n  ZoneId timezone;\n  year = LocalDateTime.now().getYear();\n  while(matcher.find()){\n    month = getMonth(matcher.group(1));\n    day = Integer.parseInt(matcher.group(2));\n    hour = Integer.parseInt(matcher.group(3));\n    minute = Integer.parseInt(matcher.group(4));\n    second = 0;\n    if(matcher.group(5).equals(&quot;KST&quot;)) {\n      timezone = ZoneId.of(&quot;Asia/Seoul&quot;);\n    }\n    else{\n      timezone = ZoneId.of(matcher.group(5));\n    }\n    date = LocalDateTime.of(year, month, day, hour, minute, second);\n\n    ZonedDateTime time = ZonedDateTime.of(date, timezone);\n    LocalDateTime result = timeZoneConverter(time);\n    list.add(result);\n\n\n  }\n  return list;\n}\n\n\npublic static Matcher regex(String regex, String input) {\n  return Pattern.compile(regex, Pattern.MULTILINE).matcher(input);\n}\n\n\npublic static int getMonth(String s) {\n  int result = 0;\n  switch (s) {\n    case &quot;1&quot;:\n    case &quot;Jan&quot;:\n      result = 1;\n    case &quot;Feb&quot;:\n    case &quot;2&quot;:\n      result = 2;\n    case &quot;Mar&quot;:\n    case &quot;3&quot;:\n      result = 3;\n    case &quot;Apr&quot;:\n    case &quot;4&quot;:\n      result = 4;\n    case &quot;May&quot;:\n    case &quot;5&quot;:\n      result = 5;\n    case &quot;Jun&quot;:\n    case &quot;6&quot;:\n      result = 6;\n    case &quot;Jul&quot;:\n    case &quot;7&quot;:\n      result = 7;\n    case &quot;Aug&quot;:\n    case &quot;8&quot;:\n      result = 8;\n    case &quot;Sep&quot;:\n    case &quot;9&quot;:\n      result = 9;\n    case &quot;Oct&quot;:\n    case &quot;10&quot;:\n      result = 10;\n    case &quot;Nov&quot;:\n    case &quot;11&quot;:\n      result = 11;\n    case &quot;Dec&quot;:\n    case &quot;12&quot;:\n      result = 12;\n  }\n  return result;\n}\n\n  public static LocalDateTime timeZoneConverter(ZonedDateTime dateTime) {\n    ZonedDateTime resultZonedDateTime = dateTime.withZoneSameInstant(ZoneId.of(&quot;Asia/Seoul&quot;));\n\n    LocalDateTime localDate = LocalDateTime.parse(resultZonedDateTime.toLocalDateTime().toString());\n    System.out.println(&quot;localDate = &quot; + localDate);\n    return localDate;\n  }\n</code></pre>\n<p>return is required java LocalDateTime...</p>\n<p>If the content of the article is insufficient, I will edit it further.</p>\n<p>I googled for hours, but couldn't get around.</p>\n<p>The result that i want is below.</p>\n<pre><code>2022/11/30 10:30:00 UTC\n2022/12/08 10:00:00 GMT\n</code></pre>\n"},{"tags":["java","performance","testing","jmeter","corda"],"owner":{"account_id":17248886,"reputation":105,"user_id":12489459,"display_name":"Benjamin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672331882,"creation_date":1672330886,"question_id":74953584,"body_markdown":"I followed https://docs.r3.com/en/platform/corda/4.9/enterprise/performance-testing/jmeter-samplers.html &amp; used \r\n\r\n***JAVA request samplers*** instead of http samplers, so that the Corda flow class can be invoked directly. But the result behaviour is like, for the first run after the node is restarted, all samplers take significantly more **Sample time** than the second run.\r\n\r\n\r\n1) I would like to know the reasons behind it, like whether it is due to first call of rpc connection to corda node?\r\n\r\n2) If so, does it need to effect on all samplers in a thread group (since all samplers call - FlowInvoke inside) \r\n\r\n3) Is there some other time result type which is more efficient than sample time to check on?\r\n\r\n","title":"Corda Jmeter Performance testing takes more time for first sampler inside Thread group (all are Java Request Samplers)","body":"<p>I followed <a href=\"https://docs.r3.com/en/platform/corda/4.9/enterprise/performance-testing/jmeter-samplers.html\" rel=\"nofollow noreferrer\">https://docs.r3.com/en/platform/corda/4.9/enterprise/performance-testing/jmeter-samplers.html</a> &amp; used</p>\n<p><em><strong>JAVA request samplers</strong></em> instead of http samplers, so that the Corda flow class can be invoked directly. But the result behaviour is like, for the first run after the node is restarted, all samplers take significantly more <strong>Sample time</strong> than the second run.</p>\n<ol>\n<li><p>I would like to know the reasons behind it, like whether it is due to first call of rpc connection to corda node?</p>\n</li>\n<li><p>If so, does it need to effect on all samplers in a thread group (since all samplers call - FlowInvoke inside)</p>\n</li>\n<li><p>Is there some other time result type which is more efficient than sample time to check on?</p>\n</li>\n</ol>\n"},{"tags":["java","android","testing","gui-testing"],"owner":{"account_id":16796752,"reputation":135,"user_id":12143067,"display_name":"Lekan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672331833,"creation_date":1672331833,"question_id":74953741,"body_markdown":"In my app, I am getting some data from firebase after the user logs in.\r\n\r\nWhile writing the test for the app\r\n\r\n``` \r\n@Test\r\n    public void loginAndLogoutTest() {\r\n        //...after inputing the login details\r\n        ViewInteraction materialButton = onView(\r\n                allOf(withId(R.id.buttonLogin), withText(&quot;Login&quot;), isDisplayed()));\r\n        materialButton.perform(click());\r\n\r\n        //...The app starts loading to get some data from the database\r\n\r\n        //...\r\n\r\n        //...The test fails and it does not wait for the app to load before trying to press the logout\r\n\r\n        ViewInteraction materialTextView = onView(\r\n                allOf(withId(R.id.textViewNavLogout), withText(&quot;Logout&quot;), isDisplayed()));\r\n        materialTextView.perform(click());\r\n\r\n        //...\r\n    }\r\n\r\n``` \r\n\r\nIs it possible to make the test wait till the app fetches the data from the database and then performs the logout click after?\r\n","title":"Making UI Test Wait For The App To Load Before Performing Other Action - UI Testing In Android","body":"<p>In my app, I am getting some data from firebase after the user logs in.</p>\n<p>While writing the test for the app</p>\n<pre><code>@Test\n    public void loginAndLogoutTest() {\n        //...after inputing the login details\n        ViewInteraction materialButton = onView(\n                allOf(withId(R.id.buttonLogin), withText(&quot;Login&quot;), isDisplayed()));\n        materialButton.perform(click());\n\n        //...The app starts loading to get some data from the database\n\n        //...\n\n        //...The test fails and it does not wait for the app to load before trying to press the logout\n\n        ViewInteraction materialTextView = onView(\n                allOf(withId(R.id.textViewNavLogout), withText(&quot;Logout&quot;), isDisplayed()));\n        materialTextView.perform(click());\n\n        //...\n    }\n\n</code></pre>\n<p>Is it possible to make the test wait till the app fetches the data from the database and then performs the logout click after?</p>\n"},{"tags":["java","postgresql","spring-boot","spring-data-jpa","jpql"],"comments":[{"owner":{"account_id":10335627,"reputation":13845,"user_id":7623856,"display_name":"Belayer"},"score":0,"creation_date":1672334562,"post_id":74953664,"comment_id":132270676,"body_markdown":"First define what you are calling a PGObject. Then supply your actual table definitions (ddl), sample data in the table format, and the expected results of that data - all as formatted text - **no images**. Also show what you have tried.","body":"First define what you are calling a PGObject. Then supply your actual table definitions (ddl), sample data in the table format, and the expected results of that data - all as formatted text - <b>no images</b>. Also show what you have tried."},{"owner":{"account_id":5071367,"reputation":626,"user_id":4070046,"accept_rate":60,"display_name":"Sebastian G."},"score":0,"creation_date":1672383964,"post_id":74953664,"comment_id":132279179,"body_markdown":"PGobject is the default object returned by postgre - PostgreObject. so to speak. Its from the driver library and contains only the values returned.","body":"PGobject is the default object returned by postgre - PostgreObject. so to speak. Its from the driver library and contains only the values returned."},{"owner":{"account_id":10335627,"reputation":13845,"user_id":7623856,"display_name":"Belayer"},"score":0,"creation_date":1672425369,"post_id":74953664,"comment_id":132289029,"body_markdown":"Sort of what I thought:  basically a Spring Boot object containing the **result set** from Postgres. Like wise then a TableObject is simply a table. Still, to answer we need sample test data, the query (or a representative sample), the actual results of that query, and the expected results.","body":"Sort of what I thought:  basically a Spring Boot object containing the <b>result set</b> from Postgres. Like wise then a TableObject is simply a table. Still, to answer we need sample test data, the query (or a representative sample), the actual results of that query, and the expected results."}],"owner":{"account_id":5071367,"reputation":626,"user_id":4070046,"accept_rate":60,"display_name":"Sebastian G."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672331579,"creation_date":1672331351,"question_id":74953664,"body_markdown":"I&#39;m trying to get a JPA Function in Spring Boot returning my result as convenient as possible. I&#39;m using PostgreSQL as my database.\r\n\r\nI have a NativeQuery, which should return a List of objects with \r\n\r\n    TableObjectA\r\n    TableObjectB\r\n    double \r\n\r\nvalue as its content.\r\n\r\nInstead, I&#39;m getting this:\r\n\r\n    PGObject\r\n    PGObject\r\n    double\r\n\r\nHow can I tell Spring JPA to return my actual entities instead of the &quot;literal&quot; result. Is there a convenient solution to this or do I really have to create several DTOs for this single method?\r\n\r\nFor clarification, this is my native query. `clubAddress` and `club` are defined as entities. Point is calculated.\r\n\r\n    SELECT clubAddress ,club, point(?1, ?2) &lt;@&gt; (point(clubAddress.longitude, clubAddress.latitude)\\:\\:point) as distance FROM club_address clubAddress,club_club club WHERE club.id = clubAddress.club_id\r\n\r\n","title":"My native query returns PGobjects instead of my entities - how can I achieve that?","body":"<p>I'm trying to get a JPA Function in Spring Boot returning my result as convenient as possible. I'm using PostgreSQL as my database.</p>\n<p>I have a NativeQuery, which should return a List of objects with</p>\n<pre><code>TableObjectA\nTableObjectB\ndouble \n</code></pre>\n<p>value as its content.</p>\n<p>Instead, I'm getting this:</p>\n<pre><code>PGObject\nPGObject\ndouble\n</code></pre>\n<p>How can I tell Spring JPA to return my actual entities instead of the &quot;literal&quot; result. Is there a convenient solution to this or do I really have to create several DTOs for this single method?</p>\n<p>For clarification, this is my native query. <code>clubAddress</code> and <code>club</code> are defined as entities. Point is calculated.</p>\n<pre><code>SELECT clubAddress ,club, point(?1, ?2) &lt;@&gt; (point(clubAddress.longitude, clubAddress.latitude)\\:\\:point) as distance FROM club_address clubAddress,club_club club WHERE club.id = clubAddress.club_id\n</code></pre>\n"},{"tags":["java","spring","rest","spring-boot","swagger"],"answers":[{"tags":[],"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1539763767,"creation_date":1539763767,"answer_id":52850131,"question_id":52849898,"body_markdown":"You may use tags to alter the grouping like explained here : [Grouping Operations With Tags][1].\r\n\r\nHere is an example annotation you could have on your controller methods :\r\n\r\n    @ApiOperation(tags = { &quot;delete&quot; }, value = &quot;this API operation will be grouped under the delete section&quot;, nickname = &quot;myMethod&quot;)\r\n\r\n\r\n  [1]: https://swagger.io/docs/specification/grouping-operations-with-tags/","title":"How can I expose my Rest services in multiple swagger pages.","body":"<p>You may use tags to alter the grouping like explained here : <a href=\"https://swagger.io/docs/specification/grouping-operations-with-tags/\" rel=\"nofollow noreferrer\">Grouping Operations With Tags</a>.</p>\n\n<p>Here is an example annotation you could have on your controller methods :</p>\n\n<pre><code>@ApiOperation(tags = { \"delete\" }, value = \"this API operation will be grouped under the delete section\", nickname = \"myMethod\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689889,"reputation":1432,"user_id":1552468,"display_name":"Edu Costa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672331207,"creation_date":1672331207,"answer_id":74953642,"question_id":52849898,"body_markdown":"If you are using `springdoc-openapi` you can create multiple `@RestController` classes and separate them into Groups as scribed [here](https://github.com/springdoc/springdoc-openapi/issues/213). \r\n\r\nAs described int to the link above you have to enable the entry `springdoc.api-docs.groups.enabled=true` \r\n\r\nAnd create a Group in your config\r\n\r\n    @Bean\r\n    public GroupedOpenApi storeOpenApi() {\r\n    \tString paths[] = {&quot;/store/**&quot;};\r\n    \treturn GroupedOpenApi.builder().setGroup(&quot;stores&quot;).pathsToMatch(paths)\r\n    \t\t\t.build();\r\n    }\r\n\r\nThe store open-api json will be available on \r\n`http://host:port/v3/api-docs/store`","title":"How can I expose my Rest services in multiple swagger pages.","body":"<p>If you are using <code>springdoc-openapi</code> you can create multiple <code>@RestController</code> classes and separate them into Groups as scribed <a href=\"https://github.com/springdoc/springdoc-openapi/issues/213\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>As described int to the link above you have to enable the entry <code>springdoc.api-docs.groups.enabled=true</code></p>\n<p>And create a Group in your config</p>\n<pre><code>@Bean\npublic GroupedOpenApi storeOpenApi() {\n    String paths[] = {&quot;/store/**&quot;};\n    return GroupedOpenApi.builder().setGroup(&quot;stores&quot;).pathsToMatch(paths)\n            .build();\n}\n</code></pre>\n<p>The store open-api json will be available on\n<code>http://host:port/v3/api-docs/store</code></p>\n"}],"owner":{"account_id":4937870,"reputation":1,"user_id":3975502,"display_name":"roozbeh goodarzi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672331207,"creation_date":1539762951,"question_id":52849898,"body_markdown":"I am using Spring boot to create some Rest services. How can I expose my Rest services in multiple swagger pages. \r\nFor example All delete methods be in a separated page!","title":"How can I expose my Rest services in multiple swagger pages.","body":"<p>I am using Spring boot to create some Rest services. How can I expose my Rest services in multiple swagger pages. \nFor example All delete methods be in a separated page!</p>\n"},{"tags":["java","spring-boot","docker","docker-compose"],"answers":[{"tags":[],"owner":{"account_id":17291618,"reputation":119,"user_id":12523079,"display_name":"Jilliss"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672330579,"creation_date":1672193383,"answer_id":74935625,"question_id":74935486,"body_markdown":"There is nothing wrong with the docker-compose configuration file, the first thing you need to check is that the `api-gateway` can access the `discovery-server` properly\r\n\r\nYou can go into the containers and ping or telnet to test whether the network between the containers is connected.\r\n\r\nuse `docker exec -it name /bin/bash`\r\n\r\nThe startup log shows that your api-gateway configuration is incorrect, as it should be\r\n`discover-server:8761//eureka`  no `localhost`\r\n\r\n\r\n    api-gateway             | 2022-12-28 02:25:27.549  INFO 1 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl=&#39;http://localhost:8761/eureka/}, exception=I/O error on POST request for &quot;http://localhost:8761/eureka/apps/API-GATEWAY&quot;: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused) stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;http://localhost:8761/eureka/apps/API-GATEWAY&quot;: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\r\n\r\n\r\n# edit 1\r\nI pulled your api-gateway image and started \r\nAnd executed\r\n\r\n    docker cp    api-gateway:/app/resources/application.properties  ./\r\n\r\nHere is the configuration that went wrong\r\n\r\n    eureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka\r\n\r\nYou just have to change it to\r\n\r\n    eureka.client.serviceUrl.defaultZone=http://discovery-server:8761/eureka\r\n\r\n\r\n\r\n# edit 2 \r\n\r\n\r\nAdd the following configuration to `api-gatway` configuration file to see if it works\r\n\r\n    eureka.client.fetch-registry=true\r\n    eureka.client.registry-with-eureka=true\r\n\r\n\r\n# edit 3\r\n\r\nI find that most of your problems are configuration file errors in the mirror\r\nThis section uses customer-service mirroring as an example\r\n\r\nIts port is set to `0`\r\n\r\nhostname is `localhost`\r\n\r\n\r\ndefaultZone is `localhost:8761/eureka`\r\n\r\nThis is the configuration file of `customer-service` that I modified\r\n\r\n    # Server port\r\n    server.port = 8083\r\n    eureka.instance.hostname = customer-service\r\n    spring.application.name = customer-service\r\n    \r\n    # Memory Database for development Environment\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/h2-console\r\n    spring.datasource.url=jdbc:h2:mem:customerdb;DB_CLOSE_ON_EXIT=FALSE\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n    spring.jpa.hibernate.hibernate.dialect=org.hibernate.dialect.H2Dialect\r\n    \r\n    eureka.client.service-url.defaultZone=http://discovery-server:8761/eureka\r\n    eureka.client.fetch-registry= true\r\n    eureka.client.register-with-eureka= true\r\n\r\n\r\nThis is my visit `0.0.0.0:8888/api/v1/customer/2` the returned json all working properly\r\n\r\n    {\r\n      &quot;customerID&quot;: 2,\r\n      &quot;name&quot;: &quot;John&quot;,\r\n      &quot;surname&quot;: &quot;Doe&quot;,\r\n      &quot;balance&quot;: 50\r\n    }\r\n\r\n","title":"Docker-compose: There is not are not services registered in Eureka Server","body":"<p>There is nothing wrong with the docker-compose configuration file, the first thing you need to check is that the <code>api-gateway</code> can access the <code>discovery-server</code> properly</p>\n<p>You can go into the containers and ping or telnet to test whether the network between the containers is connected.</p>\n<p>use <code>docker exec -it name /bin/bash</code></p>\n<p>The startup log shows that your api-gateway configuration is incorrect, as it should be\n<code>discover-server:8761//eureka</code>  no <code>localhost</code></p>\n<pre><code>api-gateway             | 2022-12-28 02:25:27.549  INFO 1 --- [nfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error. endpoint=DefaultEndpoint{ serviceUrl='http://localhost:8761/eureka/}, exception=I/O error on POST request for &quot;http://localhost:8761/eureka/apps/API-GATEWAY&quot;: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused) stacktrace=org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;http://localhost:8761/eureka/apps/API-GATEWAY&quot;: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused); nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8761 [localhost/127.0.0.1] failed: Connection refused (Connection refused)\n</code></pre>\n<h1>edit 1</h1>\n<p>I pulled your api-gateway image and started\nAnd executed</p>\n<pre><code>docker cp    api-gateway:/app/resources/application.properties  ./\n</code></pre>\n<p>Here is the configuration that went wrong</p>\n<pre><code>eureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka\n</code></pre>\n<p>You just have to change it to</p>\n<pre><code>eureka.client.serviceUrl.defaultZone=http://discovery-server:8761/eureka\n</code></pre>\n<h1>edit 2</h1>\n<p>Add the following configuration to <code>api-gatway</code> configuration file to see if it works</p>\n<pre><code>eureka.client.fetch-registry=true\neureka.client.registry-with-eureka=true\n</code></pre>\n<h1>edit 3</h1>\n<p>I find that most of your problems are configuration file errors in the mirror\nThis section uses customer-service mirroring as an example</p>\n<p>Its port is set to <code>0</code></p>\n<p>hostname is <code>localhost</code></p>\n<p>defaultZone is <code>localhost:8761/eureka</code></p>\n<p>This is the configuration file of <code>customer-service</code> that I modified</p>\n<pre><code># Server port\nserver.port = 8083\neureka.instance.hostname = customer-service\nspring.application.name = customer-service\n\n# Memory Database for development Environment\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2-console\nspring.datasource.url=jdbc:h2:mem:customerdb;DB_CLOSE_ON_EXIT=FALSE\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\nspring.jpa.hibernate.hibernate.dialect=org.hibernate.dialect.H2Dialect\n\neureka.client.service-url.defaultZone=http://discovery-server:8761/eureka\neureka.client.fetch-registry= true\neureka.client.register-with-eureka= true\n</code></pre>\n<p>This is my visit <code>0.0.0.0:8888/api/v1/customer/2</code> the returned json all working properly</p>\n<pre><code>{\n  &quot;customerID&quot;: 2,\n  &quot;name&quot;: &quot;John&quot;,\n  &quot;surname&quot;: &quot;Doe&quot;,\n  &quot;balance&quot;: 50\n}\n</code></pre>\n"}],"owner":{"account_id":7017102,"reputation":335,"user_id":5378043,"display_name":"Renos Bardhis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":487,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74935625,"answer_count":1,"score":1,"last_activity_date":1672330579,"creation_date":1672191286,"question_id":74935486,"body_markdown":"I am trying to run all microservices from a docker-compose file and I am facing issues when running the containers due to the issue that have between the Eureka discovery server and api-gateway with the other services. There is a way that can make the discover-server (Eureka) communicate with the other services? Many thanks in advance.\r\n\r\n```\r\nversion: &quot;3&quot;\r\nservices:\r\n  discovery-server:\r\n    image: renosbardis/discovery-service:latest\r\n    container_name: discovery-server\r\n    ports:\r\n      - &quot;8761:8761&quot;\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=docker\r\n    networks:\r\n      - test-network\r\n\r\n  api-gateway:\r\n    image: renosbardis/api-gateway:latest\r\n    container_name: api-gateway\r\n    ports:\r\n      - &quot;8888:8888&quot;\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=docker\r\n      - LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_SECURITY= TRACE\r\n    depends_on:\r\n      - discovery-server\r\n    networks:\r\n      - test-network\r\n\r\n  accounts-service:\r\n    image: renosbardis/accounts-service:latest\r\n    container_name: accounts-service\r\n    ports:\r\n      - &quot;8081:8081&quot;\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=docker\r\n    depends_on:\r\n      - discovery-server\r\n      - api-gateway\r\n    networks:\r\n      - test-network\r\n\r\n  rabbitmq:\r\n    image: rabbitmq:3-management-alpine\r\n    container_name: rabbitmq\r\n    ports:\r\n      - &quot;5672:5672&quot;\r\n      - &quot;15672:15672&quot;\r\n    environment:\r\n      AMQP_URL: &#39;amqp://rabbitmq?connection_attempts=5&amp;retry_delay=5&#39;\r\n      RABBITMQ_DEFAULT_USER: &quot;guest&quot;\r\n      RABBITMQ_DEFAULT_PASS: &quot;guest&quot;\r\n    depends_on:\r\n      - discovery-server\r\n      - api-gateway\r\n    networks:\r\n      - test-network\r\n\r\n  customers-service:\r\n    image: renosbardis/customer-service:latest\r\n    container_name: customers-service\r\n    ports:\r\n      - &quot;8083:8083&quot;\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=docker\r\n    depends_on:\r\n      - discovery-server\r\n      - api-gateway\r\n    networks:\r\n      - test-network\r\n\r\n  transactions-service:\r\n    image: renosbardis/transaction-service:latest\r\n    container_name: transactions-service\r\n    ports:\r\n      - &quot;8084:8084&quot;\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=docker\r\n    depends_on:\r\n      - discovery-server\r\n      - api-gateway\r\n    networks:\r\n      - test-network\r\n\r\n  notification-service:\r\n    image: renosbardis/notification-service:latest\r\n    container_name: notification-service\r\n    ports:\r\n      - &quot;8085:8085&quot;\r\n    environment:\r\n      - SPRING_PROFILES_ACTIVE=docker\r\n    depends_on:\r\n      - discovery-server\r\n      - api-gateway\r\n    networks:\r\n      - test-network\r\n\r\nnetworks:\r\n  test-network:\r\n    driver: bridge\r\n```","title":"Docker-compose: There is not are not services registered in Eureka Server","body":"<p>I am trying to run all microservices from a docker-compose file and I am facing issues when running the containers due to the issue that have between the Eureka discovery server and api-gateway with the other services. There is a way that can make the discover-server (Eureka) communicate with the other services? Many thanks in advance.</p>\n<pre><code>version: &quot;3&quot;\nservices:\n  discovery-server:\n    image: renosbardis/discovery-service:latest\n    container_name: discovery-server\n    ports:\n      - &quot;8761:8761&quot;\n    environment:\n      - SPRING_PROFILES_ACTIVE=docker\n    networks:\n      - test-network\n\n  api-gateway:\n    image: renosbardis/api-gateway:latest\n    container_name: api-gateway\n    ports:\n      - &quot;8888:8888&quot;\n    environment:\n      - SPRING_PROFILES_ACTIVE=docker\n      - LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_SECURITY= TRACE\n    depends_on:\n      - discovery-server\n    networks:\n      - test-network\n\n  accounts-service:\n    image: renosbardis/accounts-service:latest\n    container_name: accounts-service\n    ports:\n      - &quot;8081:8081&quot;\n    environment:\n      - SPRING_PROFILES_ACTIVE=docker\n    depends_on:\n      - discovery-server\n      - api-gateway\n    networks:\n      - test-network\n\n  rabbitmq:\n    image: rabbitmq:3-management-alpine\n    container_name: rabbitmq\n    ports:\n      - &quot;5672:5672&quot;\n      - &quot;15672:15672&quot;\n    environment:\n      AMQP_URL: 'amqp://rabbitmq?connection_attempts=5&amp;retry_delay=5'\n      RABBITMQ_DEFAULT_USER: &quot;guest&quot;\n      RABBITMQ_DEFAULT_PASS: &quot;guest&quot;\n    depends_on:\n      - discovery-server\n      - api-gateway\n    networks:\n      - test-network\n\n  customers-service:\n    image: renosbardis/customer-service:latest\n    container_name: customers-service\n    ports:\n      - &quot;8083:8083&quot;\n    environment:\n      - SPRING_PROFILES_ACTIVE=docker\n    depends_on:\n      - discovery-server\n      - api-gateway\n    networks:\n      - test-network\n\n  transactions-service:\n    image: renosbardis/transaction-service:latest\n    container_name: transactions-service\n    ports:\n      - &quot;8084:8084&quot;\n    environment:\n      - SPRING_PROFILES_ACTIVE=docker\n    depends_on:\n      - discovery-server\n      - api-gateway\n    networks:\n      - test-network\n\n  notification-service:\n    image: renosbardis/notification-service:latest\n    container_name: notification-service\n    ports:\n      - &quot;8085:8085&quot;\n    environment:\n      - SPRING_PROFILES_ACTIVE=docker\n    depends_on:\n      - discovery-server\n      - api-gateway\n    networks:\n      - test-network\n\nnetworks:\n  test-network:\n    driver: bridge\n</code></pre>\n"},{"tags":["java","jar","java-io","outputstream"],"answers":[{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672330527,"creation_date":1672321121,"answer_id":74951824,"question_id":74951605,"body_markdown":"This can happen due to a number of reasons:\r\n\r\n1. The original JAR file was created with a compression level that is not as high as the default compression level, so the JAR file that you create (with default compression) achieves better compression, and therefore it is smaller. You can verify this by opening both the original and the result JAR files with a ZIP utility (e.g. 7Zip) and examining their checksums and their compressed sizes. If the checksums are identical, but the compressed sizes differ, then the difference is simply due to better compression.\r\n\r\n1. The original JAR file contains unused data. This can happen when sloppy archive creation software updates an archive by appending to it instead of rewriting it from scratch. You can verify this by opening the original ZIP archive with a ZIP utility (e.g. 7Zip) and saving it under a new filename. If the new file is smaller, then the original file contained some unused data.\r\n\r\n1. The original JAR file contains files in subdirectories, which you are not checking. Thus, your output JAR file does not contain all of the files in the original. To fix this, you need to check each entry with `jarEntry.isDirectory()` and if so, recurse.","title":"The file gets smaller after reading the jar package and writing it to another file","body":"<p>This can happen due to a number of reasons:</p>\n<ol>\n<li><p>The original JAR file was created with a compression level that is not as high as the default compression level, so the JAR file that you create (with default compression) achieves better compression, and therefore it is smaller. You can verify this by opening both the original and the result JAR files with a ZIP utility (e.g. 7Zip) and examining their checksums and their compressed sizes. If the checksums are identical, but the compressed sizes differ, then the difference is simply due to better compression.</p>\n</li>\n<li><p>The original JAR file contains unused data. This can happen when sloppy archive creation software updates an archive by appending to it instead of rewriting it from scratch. You can verify this by opening the original ZIP archive with a ZIP utility (e.g. 7Zip) and saving it under a new filename. If the new file is smaller, then the original file contained some unused data.</p>\n</li>\n<li><p>The original JAR file contains files in subdirectories, which you are not checking. Thus, your output JAR file does not contain all of the files in the original. To fix this, you need to check each entry with <code>jarEntry.isDirectory()</code> and if so, recurse.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":18411876,"reputation":11,"user_id":13411955,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1672330527,"creation_date":1672319963,"question_id":74951605,"body_markdown":"    package com.example.demo.Util;\r\n\r\n    public class Test {\r\n\r\n    static HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;();\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        String data = &quot;12j3h1i7tsa7sgdajk123y8asd: 88888&quot;;\r\n        File jarFile = new File(new Test().getJarPath());\r\n        File tempJar = upJarFile(jarFile, &quot;BOOT-INF/classes/application.properties&quot;, data);\r\n    }\r\n\r\n    \r\n    public static File upJarFile(File originalJarFile, String editFilePath, String content) throws IOException {\r\n        File tempFile = File.createTempFile(&quot;temp&quot;, &quot;.jar&quot;);\r\n        JarFile jarFile = new JarFile(originalJarFile);\r\n        Enumeration&lt;JarEntry&gt; entries = jarFile.entries();\r\n\r\n        System.out.println(&quot;before:&quot;+ originalJarFile.length());\r\n\r\n        JarOutputStream jarOutputStream = new JarOutputStream(new FileOutputStream(tempFile));\r\n        while (entries.hasMoreElements()) {\r\n            JarEntry jarEntry = entries.nextElement();\r\n            jarOutputStream.putNextEntry(jarEntry);\r\n            map.put(jarEntry.getName(), String.valueOf(jarEntry.getSize()));\r\n            jarOutputStream.write(new Test().inputStreamToByteArray(jarFile.getInputStream(jarEntry)));\r\n        }\r\n        jarOutputStream.finish();\r\n        jarOutputStream.close();\r\n        System.out.println(tempFile.getPath());\r\n\r\n        System.out.println(&quot;after:&quot; + tempFile.length());\r\n\r\n        return tempFile;\r\n    }\r\n\r\n    public String getJarPath() {\r\n        String path1 = System.getProperty(&quot;user.dir&quot;);\r\n        File file = new File(path1 + &quot;/target/&quot;);\r\n        String jarFile = null;\r\n        for (File file1 : file.listFiles()) {\r\n            if (file1.getName().endsWith(&quot;.jar&quot;)) {\r\n                jarFile = file1.getPath();\r\n                break;\r\n            }\r\n        }\r\n        return jarFile;\r\n    }\r\n\r\n   \r\n    public byte[] inputStreamToByteArray(InputStream inputStream) {\r\n        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\r\n            byte[] buffer = new byte[1024];\r\n            int num;\r\n            while ((num = inputStream.read(buffer)) != -1) {\r\n                byteArrayOutputStream.write(buffer, 0, num);\r\n            }\r\n            byteArrayOutputStream.flush();\r\n            return byteArrayOutputStream.toByteArray();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return new byte[]{};\r\n    }\r\n\r\n    }\r\n\r\nAs shown in the code above,I just turn the incoming jar packages into streams and write them one by one,But it got smaller when I tested the size of the input package and the size of the output temporary package(before:49651057--&gt;after:49647985)\r\n\r\nWhat could be causing this difference?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"The file gets smaller after reading the jar package and writing it to another file","body":"<pre><code>package com.example.demo.Util;\n\npublic class Test {\n\nstatic HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;();\n\npublic static void main(String[] args) throws IOException {\n    String data = &quot;12j3h1i7tsa7sgdajk123y8asd: 88888&quot;;\n    File jarFile = new File(new Test().getJarPath());\n    File tempJar = upJarFile(jarFile, &quot;BOOT-INF/classes/application.properties&quot;, data);\n}\n\n\npublic static File upJarFile(File originalJarFile, String editFilePath, String content) throws IOException {\n    File tempFile = File.createTempFile(&quot;temp&quot;, &quot;.jar&quot;);\n    JarFile jarFile = new JarFile(originalJarFile);\n    Enumeration&lt;JarEntry&gt; entries = jarFile.entries();\n\n    System.out.println(&quot;before:&quot;+ originalJarFile.length());\n\n    JarOutputStream jarOutputStream = new JarOutputStream(new FileOutputStream(tempFile));\n    while (entries.hasMoreElements()) {\n        JarEntry jarEntry = entries.nextElement();\n        jarOutputStream.putNextEntry(jarEntry);\n        map.put(jarEntry.getName(), String.valueOf(jarEntry.getSize()));\n        jarOutputStream.write(new Test().inputStreamToByteArray(jarFile.getInputStream(jarEntry)));\n    }\n    jarOutputStream.finish();\n    jarOutputStream.close();\n    System.out.println(tempFile.getPath());\n\n    System.out.println(&quot;after:&quot; + tempFile.length());\n\n    return tempFile;\n}\n\npublic String getJarPath() {\n    String path1 = System.getProperty(&quot;user.dir&quot;);\n    File file = new File(path1 + &quot;/target/&quot;);\n    String jarFile = null;\n    for (File file1 : file.listFiles()) {\n        if (file1.getName().endsWith(&quot;.jar&quot;)) {\n            jarFile = file1.getPath();\n            break;\n        }\n    }\n    return jarFile;\n}\n\n\npublic byte[] inputStreamToByteArray(InputStream inputStream) {\n    try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n        byte[] buffer = new byte[1024];\n        int num;\n        while ((num = inputStream.read(buffer)) != -1) {\n            byteArrayOutputStream.write(buffer, 0, num);\n        }\n        byteArrayOutputStream.flush();\n        return byteArrayOutputStream.toByteArray();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return new byte[]{};\n}\n\n}\n</code></pre>\n<p>As shown in the code above,I just turn the incoming jar packages into streams and write them one by one,But it got smaller when I tested the size of the input package and the size of the output temporary package(before:49651057--&gt;after:49647985)</p>\n<p>What could be causing this difference?</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":1261134,"reputation":8171,"user_id":1219389,"accept_rate":100,"display_name":"PPartisan"},"score":1,"creation_date":1672278788,"post_id":74946518,"comment_id":132258114,"body_markdown":"The entry point to an Android application differs to a Java application. Instead of a `main` method, you specify an activity with the `&quot;android.intent.action.MAIN&quot;` intent filter in your manifest. You should probably spend some time doing some tutorials on Android basics, as it is more complicated to run even a simple Android app versus a Java app.","body":"The entry point to an Android application differs to a Java application. Instead of a <code>main</code> method, you specify an activity with the <code>&quot;android.intent.action.MAIN&quot;</code> intent filter in your manifest. You should probably spend some time doing some tutorials on Android basics, as it is more complicated to run even a simple Android app versus a Java app."},{"owner":{"account_id":11912964,"reputation":283,"user_id":8717620,"display_name":"Kerry"},"score":1,"creation_date":1672283713,"post_id":74946518,"comment_id":132258630,"body_markdown":"Can you post your build gradle for the java module?","body":"Can you post your build gradle for the java module?"},{"owner":{"account_id":23143878,"reputation":21,"user_id":17246908,"display_name":"Luke.Y"},"score":0,"creation_date":1672330204,"post_id":74946518,"comment_id":132269417,"body_markdown":"Kerry, \nI added my build gradle for the java module to the very end of my post. Thank you.","body":"Kerry,  I added my build gradle for the java module to the very end of my post. Thank you."}],"owner":{"account_id":23143878,"reputation":21,"user_id":17246908,"display_name":"Luke.Y"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672330311,"creation_date":1672278028,"question_id":74946518,"body_markdown":"So I am very much a newcomer to the android studio, so I might&#39;ve missed a few settings here and there, but \r\nwhen I try to run a code with created java module, it doesn&#39;t recognize any of my code. \r\n\r\nI attached the screenshot of what the ide returned to me. \r\n[![enter image description here](https://i.stack.imgur.com/eYvqB.png)](https://i.stack.imgur.com/eYvqB.png)\r\n\r\nI tried to reinstall the newest version of the android studio with the newest version of SDK (I attached another image file.) several times, but it doesn&#39;t seem to go anywhere. [![enter image description here](https://i.stack.imgur.com/cMHJw.png)](https://i.stack.imgur.com/cMHJw.png)\r\n\r\nFor the SDK tools, I have the followings: \r\n- Android SDK Build-Tools\r\n- Android Emulator\r\n- Android SDK Platform-Tools \r\n\r\nAlso, I did try Build&gt;Cealn Project.\r\n\r\nDoes anyone know how to fix this problem? \r\n\r\nP.S. Here is my build gradle for the java module. \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1XdwL.png","title":"I Can&#39;t Run a Java Module on Android Studio","body":"<p>So I am very much a newcomer to the android studio, so I might've missed a few settings here and there, but\nwhen I try to run a code with created java module, it doesn't recognize any of my code.</p>\n<p>I attached the screenshot of what the ide returned to me.\n<a href=\"https://i.stack.imgur.com/eYvqB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eYvqB.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried to reinstall the newest version of the android studio with the newest version of SDK (I attached another image file.) several times, but it doesn't seem to go anywhere. <a href=\"https://i.stack.imgur.com/cMHJw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cMHJw.png\" alt=\"enter image description here\" /></a></p>\n<p>For the SDK tools, I have the followings:</p>\n<ul>\n<li>Android SDK Build-Tools</li>\n<li>Android Emulator</li>\n<li>Android SDK Platform-Tools</li>\n</ul>\n<p>Also, I did try Build&gt;Cealn Project.</p>\n<p>Does anyone know how to fix this problem?</p>\n<p>P.S. Here is my build gradle for the java module.\n<a href=\"https://i.stack.imgur.com/1XdwL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1XdwL.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["python","java","algorithm","matrix","sequence"],"comments":[{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1672311265,"post_id":74949047,"comment_id":132264097,"body_markdown":"*&quot;I tried separating the red moves and yellow moves&quot;*: what is the original data structure you start with before doing that separation?","body":"<i>&quot;I tried separating the red moves and yellow moves&quot;</i>: what is the original data structure you start with before doing that separation?"},{"owner":{"account_id":13653871,"reputation":4274,"user_id":9850970,"display_name":"Aldert"},"score":0,"creation_date":1672314252,"post_id":74949047,"comment_id":132264916,"body_markdown":"This is so confusing as you say it does not generate the same sequence but your outcome is the same sequence?","body":"This is so confusing as you say it does not generate the same sequence but your outcome is the same sequence?"},{"owner":{"account_id":20266730,"reputation":41,"user_id":14863727,"display_name":"django"},"score":0,"creation_date":1672320706,"post_id":74949047,"comment_id":132266641,"body_markdown":"@trincot, the orginal data structure I start with is a matrix like [[0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0].....[0,0,0,2,1,2,0],[0,0,0,0,0,0,0,0]] . 0 denotes blank, 1 denotes red coin, 2 denotes yellow coin on the repective i,j index","body":"@trincot, the orginal data structure I start with is a matrix like [[0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0].....[0,0,0,2,1,2,0],[0,0,&zwnj;&#8203;0,0,0,0,0,0]] . 0 denotes blank, 1 denotes red coin, 2 denotes yellow coin on the repective i,j index"},{"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1672320902,"post_id":74949047,"comment_id":132266691,"body_markdown":"OK, I will update my answer to make use of that.","body":"OK, I will update my answer to make use of that."},{"owner":{"account_id":20266730,"reputation":41,"user_id":14863727,"display_name":"django"},"score":0,"creation_date":1672321032,"post_id":74949047,"comment_id":132266729,"body_markdown":"@Aldert sorry about, for this particular small example the sequence is correct, it fails when stacked more example , this matrix : [[0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 2, 0, 0, 0], [0, 0, 0, 1, 1, 0, 0], [0, 0, 0, 2, 1, 0, 0], [0, 0, 2, 1, 2, 0, 0], [0, 2, 1, 2, 2, 1, 0]] 0 denotes blank, 1 denotes red coin, 2 denotes yellow coin. red and yellow respectively : red: [&#39;3&#39;, &#39;6&#39;, &#39;4&#39;, &#39;5&#39;, &#39;4&#39;, &#39;5&#39;, &#39;4&#39;] yellow : [&#39;2&#39;, &#39;4&#39;, &#39;5&#39;, &#39;3&#39;, &#39;5&#39;, &#39;4&#39;, &#39;4&#39;] , interlaced: 326445534554441. this is wrong.","body":"@Aldert sorry about, for this particular small example the sequence is correct, it fails when stacked more example , this matrix : [[0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 2, 0, 0, 0], [0, 0, 0, 1, 1, 0, 0], [0, 0, 0, 2, 1, 0, 0], [0, 0, 2, 1, 2, 0, 0], [0, 2, 1, 2, 2, 1, 0]] 0 denotes blank, 1 denotes red coin, 2 denotes yellow coin. red and yellow respectively : red: [&#39;3&#39;, &#39;6&#39;, &#39;4&#39;, &#39;5&#39;, &#39;4&#39;, &#39;5&#39;, &#39;4&#39;] yellow : [&#39;2&#39;, &#39;4&#39;, &#39;5&#39;, &#39;3&#39;, &#39;5&#39;, &#39;4&#39;, &#39;4&#39;] , interlaced: 326445534554441. this is wrong."}],"answers":[{"tags":[],"owner":{"account_id":322516,"reputation":121953,"user_id":641955,"accept_rate":72,"display_name":"janos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672330292,"creation_date":1672305235,"answer_id":74949224,"question_id":74949047,"body_markdown":"You could loop over the moves:\r\n\r\n- note that a &quot;move&quot; is a column to drop the next token\r\n- tracking the number of tokens already dropped per column\r\n- tracking whose move it is, alternating red or yellow\r\n- check if the position to drop the token corresponds to one of the positions of the current player\r\n\r\nThe `board` matrix was edited into the question after my original answer (see further down).\r\nUsing the `board`, here&#39;s one way to implement a function to verify if the sequence of moves is valid:\r\n\r\n```python\r\ndef are_valid_moves(moves: List[int]) -&gt; bool:\r\n    &quot;&quot;&quot;\r\n    :param moves: columns of the moves\r\n    :return: will the sequence of moves produce the red and yellow positions\r\n    &quot;&quot;&quot;\r\n    tokens_per_column = [0] * len(board[0])\r\n    rows = len(board)\r\n\r\n    player = 1\r\n    for column in moves:\r\n        row = rows - tokens_per_column[column] - 1\r\n        tokens_per_column[column] += 1\r\n        if board[row][column - 1] != player:\r\n            return False\r\n\r\n        # alternate between 1 and 2\r\n        player = 3 - player\r\n\r\n    return True\r\n\r\n\r\nassert are_valid_moves([4, 3, 3, 5, 5, 5]) is True\r\nassert are_valid_moves([4, 3, 5, 3, 5, 5]) is False\r\n```\r\n\r\nAlternatively, given the positions of `red` and `yellow` as list of tuples as in the posted example, here&#39;s another way to achieve the same:\r\n\r\n```python\r\nMAX_COLUMNS = len(board[0])\r\n\r\ndef are_valid_moves(red: Tuple[int, int], yellow: Tuple[int, int], moves: List[int]) -&gt; bool:\r\n    &quot;&quot;&quot;\r\n    :param red: 1-based (y, x) positions of red\r\n    :param yellow: 1-based (y, x) positions  of yellow\r\n    :param moves: columns of the moves\r\n    :return: will the sequence of moves produce the red and yellow positions\r\n    &quot;&quot;&quot;\r\n    red_set = set(red)\r\n    yellow_set = set(yellow)\r\n    tokens_per_column = [0] * MAX_COLUMNS\r\n\r\n    current_is_red = True\r\n    for column in moves:\r\n        row = tokens_per_column[column] + 1\r\n        tokens_per_column[column] = row\r\n        if current_is_red:\r\n            if (row, column) not in red_set:\r\n                return False\r\n        else:\r\n            if (row, column) not in yellow_set:\r\n                return False\r\n\r\n        current_is_red = not current_is_red\r\n\r\n    return True\r\n\r\n\r\nred = [(1, 4), (2, 3), (2, 5)]\r\nyellow = [(1, 3), (1, 5), (3, 5)]\r\n\r\nassert are_valid_moves(red, yellow, [4, 3, 3, 5, 5, 5]) is True\r\nassert are_valid_moves(red, yellow, [4, 3, 5, 3, 5, 5]) is False\r\n```","title":"Calculating sequential move order from position matrix for Connect4 puzzle","body":"<p>You could loop over the moves:</p>\n<ul>\n<li>note that a &quot;move&quot; is a column to drop the next token</li>\n<li>tracking the number of tokens already dropped per column</li>\n<li>tracking whose move it is, alternating red or yellow</li>\n<li>check if the position to drop the token corresponds to one of the positions of the current player</li>\n</ul>\n<p>The <code>board</code> matrix was edited into the question after my original answer (see further down).\nUsing the <code>board</code>, here's one way to implement a function to verify if the sequence of moves is valid:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def are_valid_moves(moves: List[int]) -&gt; bool:\n    &quot;&quot;&quot;\n    :param moves: columns of the moves\n    :return: will the sequence of moves produce the red and yellow positions\n    &quot;&quot;&quot;\n    tokens_per_column = [0] * len(board[0])\n    rows = len(board)\n\n    player = 1\n    for column in moves:\n        row = rows - tokens_per_column[column] - 1\n        tokens_per_column[column] += 1\n        if board[row][column - 1] != player:\n            return False\n\n        # alternate between 1 and 2\n        player = 3 - player\n\n    return True\n\n\nassert are_valid_moves([4, 3, 3, 5, 5, 5]) is True\nassert are_valid_moves([4, 3, 5, 3, 5, 5]) is False\n</code></pre>\n<p>Alternatively, given the positions of <code>red</code> and <code>yellow</code> as list of tuples as in the posted example, here's another way to achieve the same:</p>\n<pre class=\"lang-py prettyprint-override\"><code>MAX_COLUMNS = len(board[0])\n\ndef are_valid_moves(red: Tuple[int, int], yellow: Tuple[int, int], moves: List[int]) -&gt; bool:\n    &quot;&quot;&quot;\n    :param red: 1-based (y, x) positions of red\n    :param yellow: 1-based (y, x) positions  of yellow\n    :param moves: columns of the moves\n    :return: will the sequence of moves produce the red and yellow positions\n    &quot;&quot;&quot;\n    red_set = set(red)\n    yellow_set = set(yellow)\n    tokens_per_column = [0] * MAX_COLUMNS\n\n    current_is_red = True\n    for column in moves:\n        row = tokens_per_column[column] + 1\n        tokens_per_column[column] = row\n        if current_is_red:\n            if (row, column) not in red_set:\n                return False\n        else:\n            if (row, column) not in yellow_set:\n                return False\n\n        current_is_red = not current_is_red\n\n    return True\n\n\nred = [(1, 4), (2, 3), (2, 5)]\nyellow = [(1, 3), (1, 5), (3, 5)]\n\nassert are_valid_moves(red, yellow, [4, 3, 3, 5, 5, 5]) is True\nassert are_valid_moves(red, yellow, [4, 3, 5, 3, 5, 5]) is False\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672322949,"creation_date":1672313559,"answer_id":74950580,"question_id":74949047,"body_markdown":"I would suggest turning the matrix data structure into *stacks* -- one stack per column. These stacks contain values 1 or 2, where 1 is a disc of the first player (red in your case), and 2 is a disc of the second player. So for your example board, those stacks could look like this:\r\n\r\n    [\r\n        [],        # first column is empty\r\n        [],        # second column is empty\r\n        [2, 1],    # yellow, red\r\n        [1],       # red\r\n        [2, 1, 2], # yellow, red, yellow\r\n        [],\r\n        [],\r\n    ]\r\n\r\nOnce you have that, you could use a recursive backtracking algorithm that tries to find a path of &quot;take-back&quot; moves, popping discs from the above-mentioned stacks with alternating colors, until all stacks are empty. Once that state is found the series of moves is known and can be returned.\r\n\r\nHere is an implementation of both the conversion to stacks and of the backtracking algorithm:\r\n\r\n```\r\ndef getstacks(board):\r\n    counts = [0, 0, 0]\r\n    # Convert data structure to stacks -- one stack per column\r\n    stacks = [[] for _ in board[0]]\r\n    for row, values in enumerate(reversed(board)):\r\n        for col, (value, stack) in enumerate(zip(values, stacks)):\r\n            if value:\r\n                # Verify there are no holes\r\n                if len(stack) != row:\r\n                    raise ValueError(f&quot;The disc at {row+1},{col+1} should not be floating above an empty cell&quot;)\r\n                stack.append(value)\r\n                counts[value] += 1\r\n    if not (0 &lt;= counts[1] - counts[2] &lt;= 1):\r\n        raise ValueError(&quot;Number of discs per player is inconsistent&quot;)\r\n    return stacks, 1 + counts[1] - counts[2] \r\n\r\n\r\ndef searchmoves(stacks, player):\r\n    # Perform a depth first search with backtracking\r\n    for col, stack in enumerate(stacks):\r\n        if stack and stack[-1] == player:\r\n            stack.pop()\r\n            moves = searchmoves(stacks, 3 - player)\r\n            stack.append(player)  # Restore\r\n            if moves is not None:  # Success\r\n                moves.append(col + 1)\r\n                return moves\r\n    if any(stacks):\r\n        return None  # Stuck: backtrack.\r\n    return []  # Success: all discs were removed\r\n\r\n\r\ndef solve(board):\r\n    stacks, nextplayer = getstacks(board)\r\n    return searchmoves(stacks, 3 - nextplayer)\r\n```\r\n\r\nYou can run it as follows:\r\n\r\n```\r\nboard = [\r\n    [0,0,0,0,0,0,0],\r\n    [0,0,0,0,0,0,0],\r\n    [0,0,0,0,0,0,0],\r\n    [0,0,0,0,2,0,0],\r\n    [0,0,1,0,1,0,0],\r\n    [0,0,2,1,2,0,0],\r\n] \r\nprint(solve(board))  # [4, 5, 5, 3, 3, 5]\r\n```\r\n\r\nAnother example run:\r\n\r\n```\r\nboard =  [\r\n    [0, 0, 0, 1, 0, 0, 0],\r\n    [0, 0, 0, 2, 0, 0, 0],\r\n    [0, 0, 0, 1, 1, 0, 0],\r\n    [0, 0, 0, 2, 1, 0, 0],\r\n    [0, 0, 2, 1, 2, 0, 0],\r\n    [0, 2, 1, 2, 2, 1, 0]\r\n]\r\nprint(solve(board))  # [6, 5, 3, 5, 5, 4, 4, 4, 4, 4, 5, 3, 4, 2]\r\n```` ","title":"Calculating sequential move order from position matrix for Connect4 puzzle","body":"<p>I would suggest turning the matrix data structure into <em>stacks</em> -- one stack per column. These stacks contain values 1 or 2, where 1 is a disc of the first player (red in your case), and 2 is a disc of the second player. So for your example board, those stacks could look like this:</p>\n<pre><code>[\n    [],        # first column is empty\n    [],        # second column is empty\n    [2, 1],    # yellow, red\n    [1],       # red\n    [2, 1, 2], # yellow, red, yellow\n    [],\n    [],\n]\n</code></pre>\n<p>Once you have that, you could use a recursive backtracking algorithm that tries to find a path of &quot;take-back&quot; moves, popping discs from the above-mentioned stacks with alternating colors, until all stacks are empty. Once that state is found the series of moves is known and can be returned.</p>\n<p>Here is an implementation of both the conversion to stacks and of the backtracking algorithm:</p>\n<pre><code>def getstacks(board):\n    counts = [0, 0, 0]\n    # Convert data structure to stacks -- one stack per column\n    stacks = [[] for _ in board[0]]\n    for row, values in enumerate(reversed(board)):\n        for col, (value, stack) in enumerate(zip(values, stacks)):\n            if value:\n                # Verify there are no holes\n                if len(stack) != row:\n                    raise ValueError(f&quot;The disc at {row+1},{col+1} should not be floating above an empty cell&quot;)\n                stack.append(value)\n                counts[value] += 1\n    if not (0 &lt;= counts[1] - counts[2] &lt;= 1):\n        raise ValueError(&quot;Number of discs per player is inconsistent&quot;)\n    return stacks, 1 + counts[1] - counts[2] \n\n\ndef searchmoves(stacks, player):\n    # Perform a depth first search with backtracking\n    for col, stack in enumerate(stacks):\n        if stack and stack[-1] == player:\n            stack.pop()\n            moves = searchmoves(stacks, 3 - player)\n            stack.append(player)  # Restore\n            if moves is not None:  # Success\n                moves.append(col + 1)\n                return moves\n    if any(stacks):\n        return None  # Stuck: backtrack.\n    return []  # Success: all discs were removed\n\n\ndef solve(board):\n    stacks, nextplayer = getstacks(board)\n    return searchmoves(stacks, 3 - nextplayer)\n</code></pre>\n<p>You can run it as follows:</p>\n<pre><code>board = [\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,0,0,0],\n    [0,0,0,0,2,0,0],\n    [0,0,1,0,1,0,0],\n    [0,0,2,1,2,0,0],\n] \nprint(solve(board))  # [4, 5, 5, 3, 3, 5]\n</code></pre>\n<p>Another example run:</p>\n<pre><code>board =  [\n    [0, 0, 0, 1, 0, 0, 0],\n    [0, 0, 0, 2, 0, 0, 0],\n    [0, 0, 0, 1, 1, 0, 0],\n    [0, 0, 0, 2, 1, 0, 0],\n    [0, 0, 2, 1, 2, 0, 0],\n    [0, 2, 1, 2, 2, 1, 0]\n]\nprint(solve(board))  # [6, 5, 3, 5, 5, 4, 4, 4, 4, 4, 5, 3, 4, 2]\n</code></pre>\n"}],"owner":{"account_id":20266730,"reputation":41,"user_id":14863727,"display_name":"django"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":74950580,"answer_count":2,"score":1,"last_activity_date":1672330292,"creation_date":1672304078,"question_id":74949047,"body_markdown":"I wanted to know weather we can calculate the move order for a given Connect4 board, such that if the moves are played out sequentially from an empty board, we get the current position on board.\r\n\r\nExample:\r\n\r\n[![current position](https://i.stack.imgur.com/YdJ2I.png)](https://i.stack.imgur.com/YdJ2I.png)\r\n\r\nI have this position matrix for the above pictured board state:\r\n\r\n```\r\nboard = [\r\n    [0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 0, 0, 0],\r\n    [0, 0, 0, 0, 2, 0, 0],\r\n    [0, 0, 1, 0, 1, 0, 0],\r\n    [0, 0, 2, 1, 2, 0, 0],\r\n] \r\n```\r\n\r\nSo I know the coordinates of the coins from this picture:\r\n\r\n- row 1 col 3 = yellow\r\n- row 1 col 4 = red\r\n- row 1 col 5 = yellow\r\n- row 2 col 3 = red\r\n- row 2 col 5 = red\r\n- row 3 col 5 = yellow\r\n\r\nIn this scenario, the move order (columns) played was: 4, 3, 3, 5, 5, 5:\r\n\r\nRed and yellow moves alternate. The numbers represent which columns the coins were dropped, i.e., the first coin (red) was dropped in the 4&lt;sup&gt;th&lt;/sup&gt; column, the second coin (yellow) was dropped in the 3&lt;sup&gt;rd&lt;/sup&gt; column, the third coin (red) was dropped again in the 3&lt;sup&gt;rd&lt;/sup&gt; column...\r\n\r\nI wanted to know whether we can reconstruct the move order from the position matrix. The move order does not need not be the exact order that was played, but if we were to simulate it, the resulting position matrix should be the same.\r\n\r\nI tried separating the red moves and yellow moves, and created the list of positions for both sets starting from the bottom layer.\r\n\r\n```\r\n# (y,x cordinates ) based on image\r\n\r\nred  = [ (1,4), (2,3), (2,5) ] \r\nyellow = [ (1,3), (1,5), (3,5) ] \r\n\r\n# resulting sequences\r\n\r\nred = [4,3,5]\r\nyellow = [3,5,5]\r\n\r\ninterlaced = [4,3,3,5,5,5]\r\n\r\n#sequence : 433555 \r\n```\r\n\r\nAnd I tried interlacing the column values from these lists, but it doesn&#39;t seem to always work: it sometimes messes up the 2&lt;sup&gt;nd&lt;/sup&gt; red disc as it assumes a yellow disc had already been placed there instead of another column that was played first.\r\n\r\nIs there any way to generate a sequence of alternating moves as I mentioned above, if simulated, always get the same matrix of game position?","title":"Calculating sequential move order from position matrix for Connect4 puzzle","body":"<p>I wanted to know weather we can calculate the move order for a given Connect4 board, such that if the moves are played out sequentially from an empty board, we get the current position on board.</p>\n<p>Example:</p>\n<p><a href=\"https://i.stack.imgur.com/YdJ2I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YdJ2I.png\" alt=\"current position\" /></a></p>\n<p>I have this position matrix for the above pictured board state:</p>\n<pre><code>board = [\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 2, 0, 0],\n    [0, 0, 1, 0, 1, 0, 0],\n    [0, 0, 2, 1, 2, 0, 0],\n] \n</code></pre>\n<p>So I know the coordinates of the coins from this picture:</p>\n<ul>\n<li>row 1 col 3 = yellow</li>\n<li>row 1 col 4 = red</li>\n<li>row 1 col 5 = yellow</li>\n<li>row 2 col 3 = red</li>\n<li>row 2 col 5 = red</li>\n<li>row 3 col 5 = yellow</li>\n</ul>\n<p>In this scenario, the move order (columns) played was: 4, 3, 3, 5, 5, 5:</p>\n<p>Red and yellow moves alternate. The numbers represent which columns the coins were dropped, i.e., the first coin (red) was dropped in the 4<sup>th</sup> column, the second coin (yellow) was dropped in the 3<sup>rd</sup> column, the third coin (red) was dropped again in the 3<sup>rd</sup> column...</p>\n<p>I wanted to know whether we can reconstruct the move order from the position matrix. The move order does not need not be the exact order that was played, but if we were to simulate it, the resulting position matrix should be the same.</p>\n<p>I tried separating the red moves and yellow moves, and created the list of positions for both sets starting from the bottom layer.</p>\n<pre><code># (y,x cordinates ) based on image\n\nred  = [ (1,4), (2,3), (2,5) ] \nyellow = [ (1,3), (1,5), (3,5) ] \n\n# resulting sequences\n\nred = [4,3,5]\nyellow = [3,5,5]\n\ninterlaced = [4,3,3,5,5,5]\n\n#sequence : 433555 \n</code></pre>\n<p>And I tried interlacing the column values from these lists, but it doesn't seem to always work: it sometimes messes up the 2<sup>nd</sup> red disc as it assumes a yellow disc had already been placed there instead of another column that was played first.</p>\n<p>Is there any way to generate a sequence of alternating moves as I mentioned above, if simulated, always get the same matrix of game position?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1672327254,"post_id":74952840,"comment_id":132268560,"body_markdown":"There is not automatism to do so, although there might be libraries (mapstruct is one that comes to my mind) that could do (part of) the job. To give a more specific answer, please provide a clear problem statement. Do you want to convert an `B` into an `A`? Or do you want to update an existing `A` with information from `B`?","body":"There is not automatism to do so, although there might be libraries (mapstruct is one that comes to my mind) that could do (part of) the job. To give a more specific answer, please provide a clear problem statement. Do you want to convert an <code>B</code> into an <code>A</code>? Or do you want to update an existing <code>A</code> with information from <code>B</code>?"},{"owner":{"account_id":20665395,"reputation":73,"user_id":15172367,"display_name":"Med "},"score":0,"creation_date":1672328293,"post_id":74952840,"comment_id":132268831,"body_markdown":"I added more explanations","body":"I added more explanations"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1672328901,"post_id":74952840,"comment_id":132269016,"body_markdown":"Why is the `null`-check needed at all? If the values are not initialized explicitly, they are implicitly initialized with `null`, so &quot;overriding&quot; `null` with `null` does no harm.","body":"Why is the <code>null</code>-check needed at all? If the values are not initialized explicitly, they are implicitly initialized with <code>null</code>, so &quot;overriding&quot; <code>null</code> with <code>null</code> does no harm."},{"owner":{"account_id":20665395,"reputation":73,"user_id":15172367,"display_name":"Med "},"score":0,"creation_date":1672330492,"post_id":74952840,"comment_id":132269510,"body_markdown":"in the example all properties of a are not null, but if we copy b properties to a prop2 will be null, we would keep the original values of prop2 since the comming from b is null","body":"in the example all properties of a are not null, but if we copy b properties to a prop2 will be null, we would keep the original values of prop2 since the comming from b is null"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1672330980,"post_id":74952840,"comment_id":132269665,"body_markdown":"[This post and its answers](https://stackoverflow.com/questions/46669594/map-struct-when-source-is-null-target-should-not-be-set-to-null) shows how it can be done with MapStruct.","body":"<a href=\"https://stackoverflow.com/questions/46669594/map-struct-when-source-is-null-target-should-not-be-set-to-null\">This post and its answers</a> shows how it can be done with MapStruct."}],"answers":[{"tags":[],"owner":{"account_id":15910691,"reputation":1091,"user_id":11480721,"display_name":"Ausgefuchster"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672328079,"creation_date":1672328079,"answer_id":74953071,"question_id":74952840,"body_markdown":"It would be possible to accomplish this with reflection or a library like [BeanUtils][1] but maybe consider using the KISS principle and just write a simple method for it:\r\n\r\n```java\r\npublic void copyToA(A a, B b) {\r\n  if (b.getProp2() != null) a.setProp2(b.getProp2());\r\n  if (b.getProp3() != null) a.setProp3(b.getProp3());\r\n}\r\n```\r\n\r\nWith BeanUtils you could extend BeanUtilsBean to overwrite `copyProperty` and check if the value is null and then just use it like this:\r\n\r\n```java\r\nvar beanUtilsBean = new YourBeanUtilsBean();\r\nbeanUtilsBean.copyProperties(a, b);\r\n```\r\n\r\nFor more information check out this answer https://stackoverflow.com/a/3521314/11480721:\r\n\r\n  [1]: https://commons.apache.org/proper/commons-beanutils/","title":"How to override properties if exist otherwise keep them in java objects spring boot","body":"<p>It would be possible to accomplish this with reflection or a library like <a href=\"https://commons.apache.org/proper/commons-beanutils/\" rel=\"nofollow noreferrer\">BeanUtils</a> but maybe consider using the KISS principle and just write a simple method for it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void copyToA(A a, B b) {\n  if (b.getProp2() != null) a.setProp2(b.getProp2());\n  if (b.getProp3() != null) a.setProp3(b.getProp3());\n}\n</code></pre>\n<p>With BeanUtils you could extend BeanUtilsBean to overwrite <code>copyProperty</code> and check if the value is null and then just use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var beanUtilsBean = new YourBeanUtilsBean();\nbeanUtilsBean.copyProperties(a, b);\n</code></pre>\n<p>For more information check out this answer <a href=\"https://stackoverflow.com/a/3521314/11480721\">https://stackoverflow.com/a/3521314/11480721</a>:</p>\n"},{"tags":[],"owner":{"account_id":5244433,"reputation":1775,"user_id":4190617,"accept_rate":72,"display_name":"YLombardi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1672330143,"creation_date":1672329718,"answer_id":74953377,"question_id":74952840,"body_markdown":"You can use MapStruct.  \r\nIt&#39;s a library that is very easy to use and you can copy all the properties from a class to another.\r\n\r\n    @Mapper\r\n    public interface AToBMapper {\r\n        A toB(A a);\r\n        B toA(B b);\r\n    }\r\n\r\n    A a = new A(&quot;prop1&quot;,&quot;prop2&quot;,&quot;prop3&quot;,&quot;prop4&quot;);\r\n    B = mapper.toB(a);\r\n\r\nThis is very useful when you need to copy the properties from a DTO to an Entity.\r\n\r\nIf you don&#39;t want to create a new object but update an existing one, it&#39;s also possible as you can see here : https://stackoverflow.com/questions/64768227/mapstruct-how-to-map-to-existing-target\r\n\r\nMore exemple here : https://www.baeldung.com/mapstruct","title":"How to override properties if exist otherwise keep them in java objects spring boot","body":"<p>You can use MapStruct.<br />\nIt's a library that is very easy to use and you can copy all the properties from a class to another.</p>\n<pre><code>@Mapper\npublic interface AToBMapper {\n    A toB(A a);\n    B toA(B b);\n}\n\nA a = new A(&quot;prop1&quot;,&quot;prop2&quot;,&quot;prop3&quot;,&quot;prop4&quot;);\nB = mapper.toB(a);\n</code></pre>\n<p>This is very useful when you need to copy the properties from a DTO to an Entity.</p>\n<p>If you don't want to create a new object but update an existing one, it's also possible as you can see here : <a href=\"https://stackoverflow.com/questions/64768227/mapstruct-how-to-map-to-existing-target\">MapStruct: How to map to existing target?</a></p>\n<p>More exemple here : <a href=\"https://www.baeldung.com/mapstruct\" rel=\"nofollow noreferrer\">https://www.baeldung.com/mapstruct</a></p>\n"}],"owner":{"account_id":20665395,"reputation":73,"user_id":15172367,"display_name":"Med "},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672330143,"creation_date":1672326706,"question_id":74952840,"body_markdown":"if we have two obejcts a and b of two classes A and B,\r\n\r\n        public class A{\r\n        String prop1;\r\n        String prop2;\r\n        String prop3;\r\n        String prop4;\r\n        \r\n       public A(String prop1, String prop2, String prop3, String prop4) {\r\n            this.prop1 = prop1;\r\n            this.prop2 = prop2;\r\n            this.prop3 = prop3;\r\n            this.prop4 = prop4;\r\n        }\r\n    \r\n        public A() {\r\n        }\r\n       //... setters and getters\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        public class B{\r\n        String prop2;\r\n        String prop3;\r\n    \r\n    public B(String prop2, String prop3) {\r\n            this.prop1 = prop1;\r\n            this.prop2 = prop2;\r\n            this.prop3 = prop3;\r\n            this.prop4 = prop4;\r\n        }\r\n    \r\n        public B() {\r\n        }\r\n    \r\n        }\r\n    \r\n    A a = new A(&quot;prop1&quot;,&quot;prop2&quot;,&quot;prop3&quot;,&quot;prop4&quot;);\r\n    B b = new B();\r\n    b.setProp3(&quot;p&quot;);\r\n\r\n\r\nHow can we copy not null properties from b to a ? in the example above, how we can copy prop3 which is not null and ignore prop2 which is null.","title":"How to override properties if exist otherwise keep them in java objects spring boot","body":"<p>if we have two obejcts a and b of two classes A and B,</p>\n<pre><code>    public class A{\n    String prop1;\n    String prop2;\n    String prop3;\n    String prop4;\n    \n   public A(String prop1, String prop2, String prop3, String prop4) {\n        this.prop1 = prop1;\n        this.prop2 = prop2;\n        this.prop3 = prop3;\n        this.prop4 = prop4;\n    }\n\n    public A() {\n    }\n   //... setters and getters\n    }\n\n\n\n\n    public class B{\n    String prop2;\n    String prop3;\n\npublic B(String prop2, String prop3) {\n        this.prop1 = prop1;\n        this.prop2 = prop2;\n        this.prop3 = prop3;\n        this.prop4 = prop4;\n    }\n\n    public B() {\n    }\n\n    }\n\nA a = new A(&quot;prop1&quot;,&quot;prop2&quot;,&quot;prop3&quot;,&quot;prop4&quot;);\nB b = new B();\nb.setProp3(&quot;p&quot;);\n</code></pre>\n<p>How can we copy not null properties from b to a ? in the example above, how we can copy prop3 which is not null and ignore prop2 which is null.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1672300461,"post_id":74947768,"comment_id":132261274,"body_markdown":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your [Firebase Console](https://console.firebase.google.com/u/0/project/_/database/data).","body":"Please edit your question and add your database structure as a JSON file. You can simply get it by clicking the Export JSON in the overflow menu (⠇) in your <a href=\"https://console.firebase.google.com/u/0/project/_/database/data\" rel=\"nofollow noreferrer\">Firebase Console</a>."},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1672300483,"post_id":74947768,"comment_id":132261280,"body_markdown":"Besides that, do you need to get a single user or all users?","body":"Besides that, do you need to get a single user or all users?"},{"owner":{"account_id":26855967,"reputation":2341,"user_id":20440272,"display_name":"Sohaib Ahmed"},"score":0,"creation_date":1672314707,"post_id":74947768,"comment_id":132265041,"body_markdown":"You want `mobile_no` of specific user? if so, what is the identifier?","body":"You want <code>mobile_no</code> of specific user? if so, what is the identifier?"},{"owner":{"account_id":27379700,"reputation":1,"user_id":20884471,"display_name":"usman khan"},"score":0,"creation_date":1672324053,"post_id":74947768,"comment_id":132267626,"body_markdown":"I have added json structure as well and adds more description about what I&#39;m actually trying to do. I hope it will clear all doubts so now can you look over my problem.","body":"I have added json structure as well and adds more description about what I&#39;m actually trying to do. I hope it will clear all doubts so now can you look over my problem."},{"owner":{"account_id":3399229,"reputation":34668,"user_id":2851937,"accept_rate":67,"display_name":"Jay"},"score":0,"creation_date":1672428357,"post_id":74947768,"comment_id":132289668,"body_markdown":"Usernames are not auto-generated (as mentioned in the question). You are probably referring to the user id aka `uid` which are auto-generated. When the user was created, you probably used the users `uid` to create the structure shown in the question with the node key being the uid. When a user authenticates again the authentication code returns and Auth object what contains the users uid. You can then use that to read the specific node `/users/uid`. Reviewing the docs [Auth](https://firebase.google.com/docs/auth) may provide additional help.","body":"Usernames are not auto-generated (as mentioned in the question). You are probably referring to the user id aka <code>uid</code> which are auto-generated. When the user was created, you probably used the users <code>uid</code> to create the structure shown in the question with the node key being the uid. When a user authenticates again the authentication code returns and Auth object what contains the users uid. You can then use that to read the specific node <code>&#47;users&#47;uid</code>. Reviewing the docs <a href=\"https://firebase.google.com/docs/auth\" rel=\"nofollow noreferrer\">Auth</a> may provide additional help."}],"owner":{"account_id":27379700,"reputation":1,"user_id":20884471,"display_name":"usman khan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672329988,"creation_date":1672293532,"question_id":74947768,"body_markdown":"I&#39;m very new to android development please if any one can help me with my problem.\r\n\r\nHere is my firebase database json structure.\r\n\r\n    {\r\n      &quot;W10291JhlK32329Fgghk93293Hjg&quot;: {\r\n        &quot;mobile&quot;: 2390382094,\r\n        &quot;name&quot;: &quot;efg&quot;\r\n      },\r\n      &quot;W4H6LWlQNMbKGlt1k8skI1WCoyQ2&quot;: {\r\n        &quot;mobile&quot;: 123456789,\r\n        &quot;name&quot;: &quot;abc&quot;\r\n      }\r\n    }\r\n\r\nI&#39;m trying to retrieve like that:\r\n```\r\nFirebaseDatabase ref= FirebaseDatabase.getInstance().getreference(&quot;users&quot;).\r\n```\r\nNow I don&#39;t know how to go further b/c I don&#39;t know the username as it is auto generated so can anyone please help me with the exact code.\r\n\r\n\r\nI want to fetch the mobile no from the firebase. Please if any one can help with the exact code so I can complete my task. I tried various YouTube videos but nothing worked it&#39;s continuously showing null pointer exception so please if any one can give me the exact code to fetch mobile no I will be grateful.\r\n\r\nWhat I&#39;m trying to do:\r\nBasically I&#39;m registering user by taking its phone no with otp authentication. Now when the user trying to login his account again I want to check that is the user is already registered by checking its entered phone number whether a user with this phone number exists or not if exists so I will move the user further. I just want to fetch the mobile no of each user so that I can compare each number with the user entered number.\r\n\r\nThanks.\r\n\r\nNote: The code should be in java not in kotlin.","title":"How to retrieve user data from firebase? when we don&#39;t know about user name","body":"<p>I'm very new to android development please if any one can help me with my problem.</p>\n<p>Here is my firebase database json structure.</p>\n<pre><code>{\n  &quot;W10291JhlK32329Fgghk93293Hjg&quot;: {\n    &quot;mobile&quot;: 2390382094,\n    &quot;name&quot;: &quot;efg&quot;\n  },\n  &quot;W4H6LWlQNMbKGlt1k8skI1WCoyQ2&quot;: {\n    &quot;mobile&quot;: 123456789,\n    &quot;name&quot;: &quot;abc&quot;\n  }\n}\n</code></pre>\n<p>I'm trying to retrieve like that:</p>\n<pre><code>FirebaseDatabase ref= FirebaseDatabase.getInstance().getreference(&quot;users&quot;).\n</code></pre>\n<p>Now I don't know how to go further b/c I don't know the username as it is auto generated so can anyone please help me with the exact code.</p>\n<p>I want to fetch the mobile no from the firebase. Please if any one can help with the exact code so I can complete my task. I tried various YouTube videos but nothing worked it's continuously showing null pointer exception so please if any one can give me the exact code to fetch mobile no I will be grateful.</p>\n<p>What I'm trying to do:\nBasically I'm registering user by taking its phone no with otp authentication. Now when the user trying to login his account again I want to check that is the user is already registered by checking its entered phone number whether a user with this phone number exists or not if exists so I will move the user further. I just want to fetch the mobile no of each user so that I can compare each number with the user entered number.</p>\n<p>Thanks.</p>\n<p>Note: The code should be in java not in kotlin.</p>\n"},{"tags":["python","java","api","whatsapp"],"comments":[{"owner":{"account_id":243184,"reputation":20383,"user_id":515189,"display_name":"Paolo"},"score":8,"creation_date":1435399213,"post_id":17135496,"comment_id":50191963,"body_markdown":"FYI, on May 2015 WhastAPI repo has been &quot;wiped away&quot; due to legal threats and it&#39;s not an option anymore.","body":"FYI, on May 2015 WhastAPI repo has been &quot;wiped away&quot; due to legal threats and it&#39;s not an option anymore."}],"answers":[{"tags":[],"owner":{"account_id":1796398,"reputation":6836,"user_id":1635719,"accept_rate":0,"display_name":"olasammy"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1371710170,"creation_date":1371710170,"answer_id":17206795,"question_id":17135496,"body_markdown":"WhatsApp Inc. does not provide an open API but a reverse-engineered library is made available on GitHub by the team Venomous on the GitHub. This however according to my knowledge is made possible in PHP. You can check the link here: https://github.com/venomous0x/WhatsAPI\r\n\r\nHope this helps ","title":"How can I use the WhatsApp API from Java or Python?","body":"<p>WhatsApp Inc. does not provide an open API but a reverse-engineered library is made available on GitHub by the team Venomous on the GitHub. This however according to my knowledge is made possible in PHP. You can check the link here: <a href=\"https://github.com/venomous0x/WhatsAPI\">https://github.com/venomous0x/WhatsAPI</a></p>\n\n<p>Hope this helps </p>\n"},{"tags":[],"owner":{"account_id":1848957,"reputation":2564,"user_id":1675959,"accept_rate":76,"display_name":"rishi"},"down_vote_count":1,"up_vote_count":50,"is_accepted":true,"score":49,"last_activity_date":1527751238,"creation_date":1372101517,"answer_id":17283356,"question_id":17135496,"body_markdown":"After trying everything, [Yowsup][1] library worked for me. The bug that I was facing was recently fixed. Anyone trying to do something with Whatsapp should try it.\r\n\r\n\r\n  [1]: https://github.com/tgalal/yowsup","title":"How can I use the WhatsApp API from Java or Python?","body":"<p>After trying everything, <a href=\"https://github.com/tgalal/yowsup\" rel=\"noreferrer\">Yowsup</a> library worked for me. The bug that I was facing was recently fixed. Anyone trying to do something with Whatsapp should try it.</p>\n"},{"tags":[],"owner":{"account_id":2795104,"reputation":29495,"user_id":2404470,"accept_rate":83,"display_name":"Zameer Ansari"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1526071950,"creation_date":1507496191,"answer_id":46635985,"question_id":17135496,"body_markdown":"[From my blog][1]\r\n\r\n[courtesy](https://web.whatsapp.com/)\r\n\r\nThere is a secret pilot program which WhatsApp is working on with selected businesses\r\n\r\n- [https://faq.whatsapp.com/general/26000052](https://faq.whatsapp.com/general/26000052)\r\n\r\nNews coverage:\r\n\r\n- [https://yourstory.com/2017/09/app-fridays-whatsapp-for-business-bookmyshow/](https://yourstory.com/2017/09/app-fridays-whatsapp-for-business-bookmyshow/)\r\n\r\n- [https://yourstory.com/2017/09/bookmyshows-product-team-decrypts-how-whatsapp-for-business-works/](https://yourstory.com/2017/09/bookmyshows-product-team-decrypts-how-whatsapp-for-business-works/)\r\n\r\n- [http://indianexpress.com/article/technology/social/now-get-bookmyshow-ticket-confirmation-message-on-whatsapp-4844869/](http://indianexpress.com/article/technology/social/now-get-bookmyshow-ticket-confirmation-message-on-whatsapp-4844869/)\r\n\r\n- [http://gadgets.ndtv.com/apps/news/whatsapp-business-bookmyshow-pilot-1750740](http://gadgets.ndtv.com/apps/news/whatsapp-business-bookmyshow-pilot-1750740)\r\n\r\nFor some of my technical experiments, I was trying to figure out how beneficial and feasible it is to implement bots for different chat platforms in terms of market share and so possibilities of adaptation. Especially when you have bankruptly failed twice, it&#39;s important to validate ideas and fail more faster.\r\n\r\nPopular chat platforms like [Messenger](https://developers.facebook.com/docs/messenger-platform/), [Slack](https://api.slack.com/bot-users), [Skype](https://dev.skype.com/bots) etc. have happily (in the sense officially) provided APIs for bots to interact with, but WhatsApp has not yet provided any API.\r\n\r\nHowever, since many years, a lot of activities has happened around this - struggle towards automated interaction with WhatsApp platform:\r\n\r\n 1. [Bots App](https://www.npmjs.com/package/botsapp)\r\n Bots App is interesting because it shows that something is really tried and tested.\r\n \r\n 2. [Yowsup](https://github.com/tgalal/yowsup)\r\n A project still actively developed to interact with WhatsApp platform.\r\n \r\n 3. [Yallagenie](http://www.yallagenie.com/) \r\n Yallagenie claim that there is a demo bot which can be interacted with at [+971 56 112 6652](tel://+971561126652)\r\n\r\n 4. [Hubtype](https://hubtype.com/articles/how-to-create-a-whatsapp-chatbot.html)\r\n Hubtype is working towards having a bot platform for **WhatsApp for business**.\r\n\r\n 5. [Fred](https://medium.com/@AlfredBaudisch/how-a-whatsapp-bot-got-famous-and-evolved-as-the-brazilian-wechat-and-conversational-commerce-e2213262183d)\r\n Fred&#39;s task was to automate WhatsApp conversations, however since it was not officially supported by WhatsApp - it was shut down.\r\n\r\n 7. [Oye Gennie](http://www.oyegennie.com/)\r\n A bot [blocked](https://www.quora.com/How-do-I-build-a-simple-Whatsapp-bot/answer/Ankur-Rastogi?srid=hM8Hz) by WhatsApp.\r\n \r\n 8. [App/Website to WhatsApp](https://faq.whatsapp.com/en/android/28000012)\r\n We can use custom URL schemes and Android intent system to interact with WhatsApp but still NOT WhatsApp API.\r\n \r\n 9. [Chat API daemon](https://github.com/Mawalu/chat-api-daemon)\r\n Probably created by inspecting the API calls in WhatsApp web version. NOT affiliated with WhatsApp.\r\n \r\n 10. [WhatsBot](https://devpost.com/software/whatsbot#updates)\r\n Deactivated WhatsApp bot. Created during a [hackathon](https://techcrunch.com/2015/12/06/whatsbot-brings-a-virtual-assistant-to-whatsapp/).\r\n \r\n 11. [No API claim](http://mashable.com/2015/03/25/whatsapp-developers-api/#CvXpmtrjROqA)\r\n WhatsApp co-founder clearly stated this in a conference that they did not had any plans for APIs for WhatsApp.\r\n \r\n 12. [Bot Ware](https://www.botware.com.br/messenger-and-whatsapp-chatbot-development/)\r\n They probably are expecting WhatsApp to release their APIs for chat bot platforms.\r\n \r\n 13. [Vixi](http://vixi.io/)\r\n They seems to be talking about how some platform which probably would work for WhatsApp. There is no clarity as such.\r\n \r\n 14. [Unofficial API](https://market.mashape.com/datayuge/whatsapp)\r\n This API can shut off any time.\r\n \r\n And the number goes on...\r\n\r\n\r\n  [1]: https://medium.com/@xameeramir/study-on-technical-feasibility-of-whatsapp-bot-implementation-63519d0d0d25","title":"How can I use the WhatsApp API from Java or Python?","body":"<p><a href=\"https://medium.com/@xameeramir/study-on-technical-feasibility-of-whatsapp-bot-implementation-63519d0d0d25\" rel=\"noreferrer\">From my blog</a></p>\n\n<p><a href=\"https://web.whatsapp.com/\" rel=\"noreferrer\">courtesy</a></p>\n\n<p>There is a secret pilot program which WhatsApp is working on with selected businesses</p>\n\n<ul>\n<li><a href=\"https://faq.whatsapp.com/general/26000052\" rel=\"noreferrer\">https://faq.whatsapp.com/general/26000052</a></li>\n</ul>\n\n<p>News coverage:</p>\n\n<ul>\n<li><p><a href=\"https://yourstory.com/2017/09/app-fridays-whatsapp-for-business-bookmyshow/\" rel=\"noreferrer\">https://yourstory.com/2017/09/app-fridays-whatsapp-for-business-bookmyshow/</a></p></li>\n<li><p><a href=\"https://yourstory.com/2017/09/bookmyshows-product-team-decrypts-how-whatsapp-for-business-works/\" rel=\"noreferrer\">https://yourstory.com/2017/09/bookmyshows-product-team-decrypts-how-whatsapp-for-business-works/</a></p></li>\n<li><p><a href=\"http://indianexpress.com/article/technology/social/now-get-bookmyshow-ticket-confirmation-message-on-whatsapp-4844869/\" rel=\"noreferrer\">http://indianexpress.com/article/technology/social/now-get-bookmyshow-ticket-confirmation-message-on-whatsapp-4844869/</a></p></li>\n<li><p><a href=\"http://gadgets.ndtv.com/apps/news/whatsapp-business-bookmyshow-pilot-1750740\" rel=\"noreferrer\">http://gadgets.ndtv.com/apps/news/whatsapp-business-bookmyshow-pilot-1750740</a></p></li>\n</ul>\n\n<p>For some of my technical experiments, I was trying to figure out how beneficial and feasible it is to implement bots for different chat platforms in terms of market share and so possibilities of adaptation. Especially when you have bankruptly failed twice, it's important to validate ideas and fail more faster.</p>\n\n<p>Popular chat platforms like <a href=\"https://developers.facebook.com/docs/messenger-platform/\" rel=\"noreferrer\">Messenger</a>, <a href=\"https://api.slack.com/bot-users\" rel=\"noreferrer\">Slack</a>, <a href=\"https://dev.skype.com/bots\" rel=\"noreferrer\">Skype</a> etc. have happily (in the sense officially) provided APIs for bots to interact with, but WhatsApp has not yet provided any API.</p>\n\n<p>However, since many years, a lot of activities has happened around this - struggle towards automated interaction with WhatsApp platform:</p>\n\n<ol>\n<li><p><a href=\"https://www.npmjs.com/package/botsapp\" rel=\"noreferrer\">Bots App</a>\nBots App is interesting because it shows that something is really tried and tested.</p></li>\n<li><p><a href=\"https://github.com/tgalal/yowsup\" rel=\"noreferrer\">Yowsup</a>\nA project still actively developed to interact with WhatsApp platform.</p></li>\n<li><p><a href=\"http://www.yallagenie.com/\" rel=\"noreferrer\">Yallagenie</a> \nYallagenie claim that there is a demo bot which can be interacted with at +971 56 112 6652</p></li>\n<li><p><a href=\"https://hubtype.com/articles/how-to-create-a-whatsapp-chatbot.html\" rel=\"noreferrer\">Hubtype</a>\nHubtype is working towards having a bot platform for <strong>WhatsApp for business</strong>.</p></li>\n<li><p><a href=\"https://medium.com/@AlfredBaudisch/how-a-whatsapp-bot-got-famous-and-evolved-as-the-brazilian-wechat-and-conversational-commerce-e2213262183d\" rel=\"noreferrer\">Fred</a>\nFred's task was to automate WhatsApp conversations, however since it was not officially supported by WhatsApp - it was shut down.</p></li>\n<li><p><a href=\"http://www.oyegennie.com/\" rel=\"noreferrer\">Oye Gennie</a>\nA bot <a href=\"https://www.quora.com/How-do-I-build-a-simple-Whatsapp-bot/answer/Ankur-Rastogi?srid=hM8Hz\" rel=\"noreferrer\">blocked</a> by WhatsApp.</p></li>\n<li><p><a href=\"https://faq.whatsapp.com/en/android/28000012\" rel=\"noreferrer\">App/Website to WhatsApp</a>\nWe can use custom URL schemes and Android intent system to interact with WhatsApp but still NOT WhatsApp API.</p></li>\n<li><p><a href=\"https://github.com/Mawalu/chat-api-daemon\" rel=\"noreferrer\">Chat API daemon</a>\nProbably created by inspecting the API calls in WhatsApp web version. NOT affiliated with WhatsApp.</p></li>\n<li><p><a href=\"https://devpost.com/software/whatsbot#updates\" rel=\"noreferrer\">WhatsBot</a>\nDeactivated WhatsApp bot. Created during a <a href=\"https://techcrunch.com/2015/12/06/whatsbot-brings-a-virtual-assistant-to-whatsapp/\" rel=\"noreferrer\">hackathon</a>.</p></li>\n<li><p><a href=\"http://mashable.com/2015/03/25/whatsapp-developers-api/#CvXpmtrjROqA\" rel=\"noreferrer\">No API claim</a>\nWhatsApp co-founder clearly stated this in a conference that they did not had any plans for APIs for WhatsApp.</p></li>\n<li><p><a href=\"https://www.botware.com.br/messenger-and-whatsapp-chatbot-development/\" rel=\"noreferrer\">Bot Ware</a>\nThey probably are expecting WhatsApp to release their APIs for chat bot platforms.</p></li>\n<li><p><a href=\"http://vixi.io/\" rel=\"noreferrer\">Vixi</a>\nThey seems to be talking about how some platform which probably would work for WhatsApp. There is no clarity as such.</p></li>\n<li><p><a href=\"https://market.mashape.com/datayuge/whatsapp\" rel=\"noreferrer\">Unofficial API</a>\nThis API can shut off any time.</p>\n\n<p>And the number goes on...</p></li>\n</ol>\n"}],"owner":{"account_id":1848957,"reputation":2564,"user_id":1675959,"accept_rate":76,"display_name":"rishi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":267945,"favorite_count":0,"down_vote_count":2,"up_vote_count":102,"closed_date":1672329821,"accepted_answer_id":17283356,"answer_count":3,"score":100,"last_activity_date":1672329924,"creation_date":1371401011,"question_id":17135496,"body_markdown":"I am looking for WhatsApp API, preferably a Python or Java library.\r\n\r\nI&#39;ve tried [Yowsup][1], but could not get my number registered; I am based in India and I am not sure if that has got anything to do with it.\r\n\r\nI did try [WhatsAPI][2] (Python library) but it is not working either.\r\n\r\nAny suggestions about this? Any users of Yowsup here?\r\n\r\n  [1]: https://github.com/tgalal/yowsup\r\n  [2]: https://github.com/venomous0x/WhatsAPI","title":"How can I use the WhatsApp API from Java or Python?","body":"<p>I am looking for WhatsApp API, preferably a Python or Java library.</p>\n\n<p>I've tried <a href=\"https://github.com/tgalal/yowsup\" rel=\"noreferrer\">Yowsup</a>, but could not get my number registered; I am based in India and I am not sure if that has got anything to do with it.</p>\n\n<p>I did try <a href=\"https://github.com/venomous0x/WhatsAPI\" rel=\"noreferrer\">WhatsAPI</a> (Python library) but it is not working either.</p>\n\n<p>Any suggestions about this? Any users of Yowsup here?</p>\n"},{"tags":["java","swing","uri","jtextpane"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1672019352,"post_id":74916736,"comment_id":132208556,"body_markdown":"Seems to work okay for me, consider providing a [mcve]","body":"Seems to work okay for me, consider providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":27352183,"reputation":1,"user_id":20861170,"display_name":"Alex654"},"score":0,"creation_date":1672019974,"post_id":74916736,"comment_id":132208616,"body_markdown":"Added the code. `msgContent` is a `JTextPane` where I put my HTML, I did not include the declaration of it. The idea of the code is to save the actual images in HashMap, and then adjust their widths when the component is resized. Also because Java cannot calculate the other image dimension in IMG tag out of the box as the browsers do, I calculate it manually in my code.","body":"Added the code. <code>msgContent</code> is a <code>JTextPane</code> where I put my HTML, I did not include the declaration of it. The idea of the code is to save the actual images in HashMap, and then adjust their widths when the component is resized. Also because Java cannot calculate the other image dimension in IMG tag out of the box as the browsers do, I calculate it manually in my code."}],"answers":[{"tags":[],"owner":{"account_id":27352183,"reputation":1,"user_id":20861170,"display_name":"Alex654"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672329833,"creation_date":1672329833,"answer_id":74953396,"question_id":74916736,"body_markdown":"Found the problem. It seems that I should escape `%` symbols in my filenames, replacing it with `%25`, but only if I use that path inside a URL string. When I&#39;m using `File()` to work with that file it is not needed.","title":"file:// URI scheme in JTextPane with HTML content is not working","body":"<p>Found the problem. It seems that I should escape <code>%</code> symbols in my filenames, replacing it with <code>%25</code>, but only if I use that path inside a URL string. When I'm using <code>File()</code> to work with that file it is not needed.</p>\n"}],"owner":{"account_id":27352183,"reputation":1,"user_id":20861170,"display_name":"Alex654"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74953396,"answer_count":1,"score":-1,"last_activity_date":1672329833,"creation_date":1672018025,"question_id":74916736,"body_markdown":"I&#39;m making an image cache in the folder of my application.\r\nI made code for downloading images and checking for their existence.\r\n\r\nHowever, I cannot use them in `src` attributes for some reason.\r\n\r\nI have read these two posts:\r\n\r\n[https://stackoverflow.com/questions/25839668/jeditorpane-handling-local-images][1]\r\n\r\n[Display images using JEditorPane](https://www.infoworld.com/article/2077472/java-tip-109--display-images-using-jeditorpane.html)\r\n\r\nHowever, in the first question the OP said that he used another method for setting image source, that is not suitable in my case.\r\n\r\nAnd the second article assumes that `file://` scheme should be working out of the box without any tricks. But somehow it&#39;s not working in my case.\r\n\r\nA tried replacing forward slashes with backslashes, replacing spaces with `%20` and leaving them as they are, tried file:// and file:/// prefix - nothing is working. I can read my files using ImageIO, but JTextPane HTML renderer does not find them, so I have just error placeholders on screen.\r\n\r\nThe example of the path to an image:\r\n\r\n\r\n```\r\nfile:///D:/My%20Documents/NetBeansProjects/XMessenger/cache/http%3A%2F%2Fpopov654.pp.ru%2Fcopybox%2Fphoto.jpg\r\n```\r\n\r\nHere is the code:\r\n\r\n    private int last_width = 0;\r\n    private HashMap&lt;String, Image&gt; imgCache = new HashMap&lt;String, Image&gt;();\r\n\r\n    private void createTestMessageContent(final JComponent parent) {\r\n\r\n        String html = &quot;Some &lt;i&gt;text&lt;/i&gt;&lt;br&gt;And more,&lt;br&gt;And more...&lt;br&gt;And more...&lt;br&gt;And more...&lt;br&gt;And more...&lt;br&gt;And more...&lt;br&gt;&quot; + \r\n                &quot;&lt;img src=\\&quot;http://popov654.pp.ru/copybox/photo.jpg\\&quot; width=\\&quot;390\\&quot; height=\\&quot;260\\&quot;&gt;&quot; +\r\n                &quot;&lt;img src=\\&quot;http://popov654.pp.ru/copybox/DSCN2155.jpg\\&quot; width=\\&quot;390\\&quot; height=\\&quot;260\\&quot;&gt;&quot; +\r\n                &quot;&lt;img src=\\&quot;http://popov654.pp.ru/copybox/DSCN2157.jpg\\&quot; width=\\&quot;390\\&quot; height=\\&quot;260\\&quot;&gt;&quot;;\r\n        html = &quot;&lt;div style=\\&quot;padding: 0px; font-size: 14px; font-family: Tahoma\\&quot;&gt;&quot; + html + &quot;&lt;/div&gt;&quot;;\r\n\r\n        final String orig_html = html;\r\n\r\n        Matcher m = Pattern.compile(&quot;((&lt;img src=\\&quot;[^\\&quot;]+\\&quot;)( width=\\&quot;\\\\d+\\&quot;)?( height=\\&quot;\\\\d+\\&quot;)?([^&gt;]*&gt;)\\\\s*)+&quot;).matcher(orig_html);\r\n        while (m.find()) {\r\n            String str = m.group();\r\n            Matcher m2 = Pattern.compile(&quot;src=\\&quot;([^\\&quot;]+)\\&quot;&quot;).matcher(str);\r\n            while (m2.find()) {\r\n                File f = new File(&quot;cache&quot;);\r\n                if (!f.exists()) {\r\n                    f.mkdir();\r\n                }\r\n                String src = m2.group(1);\r\n                String cached_name = src.replaceAll(&quot;/&quot;, &quot;%2F&quot;).replaceAll(&quot;:&quot;, &quot;%3A&quot;);\r\n                File img = new File(&quot;cache/&quot; + cached_name);\r\n                System.err.println(img.getAbsolutePath());\r\n                if (!img.exists()) {\r\n                    InputStream in = null;\r\n                    BufferedInputStream b_in = null;\r\n                    FileOutputStream fileOutputStream = null;\r\n                    try {\r\n                        in = new URL(src).openStream();\r\n                        b_in = new BufferedInputStream(in);\r\n                        fileOutputStream = new FileOutputStream(&quot;cache/&quot; + cached_name);\r\n                        byte dataBuffer[] = new byte[1024];\r\n                        int bytesRead;\r\n                        while ((bytesRead = in.read(dataBuffer, 0, 1024)) != -1) {\r\n                            fileOutputStream.write(dataBuffer, 0, bytesRead);\r\n                        }\r\n                        //Files.copy(in, Paths.get(&quot;cache/&quot; + cached_name), StandardCopyOption.REPLACE_EXISTING);\r\n                    } catch (IOException ex) {\r\n                        ex.printStackTrace();\r\n                    } finally {\r\n                        try {\r\n                            in.close();\r\n                            b_in.close();\r\n                            fileOutputStream.close();\r\n                        } catch (IOException ex) {}\r\n                    }\r\n                } else {\r\n                    html = html.replaceFirst(&quot;src=\\&quot;&quot; + src + &quot;\\&quot;&quot;, &quot;src=\\&quot;file:///&quot; + img.getAbsolutePath().replaceAll(&quot;\\\\\\\\&quot;, &quot;/&quot;).replaceAll(&quot; &quot;, &quot;%20&quot;) + &quot;\\&quot;&quot;);\r\n                }\r\n            }\r\n        }\r\n\r\n        final String cached_html = html;\r\n\r\n        html = html.replaceAll(&quot;(&lt;img src=\\&quot;[^\\&quot;]+\\&quot;)( width=\\&quot;\\\\d+\\&quot;)?( height=\\&quot;\\\\d+\\&quot;)?([^&gt;]*&gt;)&quot;, &quot;&lt;a href=\\&quot;#\\&quot; style=\\&quot;display: inline-block; margin-right: 10px\\&quot;&gt;$1 width=\\&quot;390\\&quot; height=\\&quot;260\\&quot; hspace=\\&quot;2\\&quot; vspace=\\&quot;8\\&quot; border=\\&quot;0\\&quot;$4&lt;/a&gt;&quot;);\r\n        System.out.println(html);\r\n\r\n        msgContent.setText(html);\r\n        addHyperlinkListener(msgContent);\r\n\r\n\r\n        //msgContent.setMinimumSize(new Dimension(msgContent.getWidth(), msgContent.getPreferredSize().height + 20));\r\n        //setMinimumSize(new Dimension(getWidth(), msgContent.getPreferredSize().height + 160));\r\n        setPreferredSize(new Dimension(getWidth(), msgContent.getPreferredSize().height + 148));\r\n        \r\n        initImages();\r\n\r\n        updateSize();\r\n\r\n        content2.addComponentListener(new java.awt.event.ComponentListener() {\r\n\r\n            @Override\r\n            public void componentResized(ComponentEvent e) {\r\n                int new_width = ((JPanel)e.getSource()).getWidth();\r\n                if (new_width != last_width) updateImages(cached_html);\r\n                last_width = new_width;\r\n            }\r\n\r\n            @Override\r\n            public void componentMoved(ComponentEvent e) {}\r\n\r\n            @Override\r\n            public void componentShown(ComponentEvent e) {}\r\n\r\n            @Override\r\n            public void componentHidden(ComponentEvent e) {}\r\n\r\n        });\r\n    }\r\n\r\n    private void initImages() {\r\n        HTMLDocument doc = (HTMLDocument) msgContent.getStyledDocument();\r\n        Element[] imgs = getElementsByTagName(HTML.Tag.IMG, doc);\r\n        for (Element img: imgs) {\r\n            Element a = img.getParentElement();\r\n            try {\r\n                String src = (String) img.getAttributes().getAttribute(HTML.Attribute.SRC);\r\n                System.out.println(&quot;src=&quot; + src);\r\n                System.out.println();\r\n\r\n                Image image = null;\r\n                if (!src.startsWith(&quot;http://&quot;) &amp;&amp; !src.startsWith(&quot;https://&quot;)) {\r\n                    String path = src;\r\n                    if (src.startsWith(&quot;file:///&quot;)) {\r\n                        path = path.substring(8).replaceAll(&quot;%20&quot;, &quot; &quot;);\r\n                    }\r\n                    image = ImageIO.read(new File(path));\r\n                } else {\r\n                    image = ImageIO.read(new URL(src));\r\n                }\r\n                imgCache.put(src, image);\r\n            } catch (Exception ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n    private void updateImages(String orig_html) {\r\n        int width = XMessengerApp.getMainWindow().getMessagePaneWidth() - 108;\r\n\r\n        double default_ratio = 16f / 9;\r\n\r\n        int img_width = (int) (width * 0.65);\r\n        int img_height = (int) ((double)img_width / default_ratio);\r\n        int margin = (int) (width * 0.005);\r\n\r\n        String html = orig_html;\r\n        Matcher m = Pattern.compile(&quot;((&lt;img src=\\&quot;[^\\&quot;]+\\&quot;)( width=\\&quot;\\\\d+\\&quot;)?( height=\\&quot;\\\\d+\\&quot;)?([^&gt;]*&gt;)\\\\s*)+&quot;).matcher(orig_html);\r\n        while (m.find()) {\r\n            String str = m.group();\r\n            String str_new = str;\r\n            String[] img_strs = str.split(&quot;&gt;\\\\s*&lt;&quot;);\r\n            if (img_strs.length &gt; 1) {\r\n                System.err.println(&quot;Image series found of &quot; + img_strs.length + &quot; images&quot;);\r\n            }\r\n            if (img_strs.length &gt; 1) {\r\n                img_width = (int)((width - margin * img_strs.length) / img_strs.length * 0.95);\r\n                img_height = (int)((double)img_width / default_ratio);\r\n            }\r\n            for (int i = 0; i &lt; img_strs.length; i++) {\r\n                if (i &gt; 0) img_strs[i] = &quot;&lt;&quot; + img_strs[i];\r\n                if (i &lt; img_strs.length-1) img_strs[i] = img_strs[i] + &quot;&gt;&quot;;\r\n\r\n                Matcher m2 = Pattern.compile(&quot;src=\\&quot;([^\\&quot;]+)\\&quot;&quot;).matcher(img_strs[i]);\r\n                m2.find();\r\n                String src = m2.group(1);\r\n\r\n                double ratio = default_ratio;\r\n                if (imgCache.containsKey(src)) {\r\n                    Image img = imgCache.get(src);\r\n                    ratio = (double) img.getWidth(null) / img.getHeight(null);\r\n                    //System.out.println(&quot;Aspect ratio: &quot; + ratio);\r\n                }\r\n                if (img_strs.length == 1) {\r\n                    img_height = (int)((double)img_width / ratio);\r\n                } else {\r\n                    img_width = (int)((double)img_height * ratio);\r\n                }\r\n                //System.out.println(&quot;Src: &quot; + src);\r\n\r\n                String replace = img_strs[i].replaceAll(&quot;(&lt;img src=\\&quot;[^\\&quot;]+\\&quot;)( width=\\&quot;\\\\d+\\&quot;)?( height=\\&quot;\\\\d+\\&quot;)?([^&gt;]*&gt;)&quot;, &quot;&lt;a href=\\&quot;#\\&quot; style=\\&quot;display: inline-block; margin-right: &quot; + margin + &quot;px\\&quot;&gt;$1 width=\\&quot;&quot; + img_width + &quot;\\&quot; height=\\&quot;&quot; + img_height + &quot;\\&quot; hspace=\\&quot;&quot; + margin + &quot;\\&quot;vspace=\\&quot;8\\&quot; border=\\&quot;0\\&quot;$4&lt;/a&gt;&quot;);\r\n                str_new = str_new.replaceFirst(img_strs[i], replace);\r\n            }\r\n            if (img_strs.length &gt; 1) {\r\n                str_new = &quot;&lt;div style=\\&quot;float: left; margin-left: -10px\\&quot;&gt;&quot; + str_new + &quot;&lt;/div&gt;&quot;;\r\n            }\r\n            html = html.replaceFirst(str, str_new);\r\n                \r\n        }\r\n\r\n\r\n        msgContent.setText(html);\r\n\r\n    }\r\n\r\n    private void updateSize() {\r\n        try {\r\n            Dimension d = msgContent.getPreferredSize();\r\n            Rectangle r = msgContent.modelToView(msgContent.getDocument().getLength());\r\n            d.height = r.y + r.height;\r\n            msgContent.setPreferredSize(d);\r\n            Dimension d2 = content2.getPreferredSize();\r\n            d2.height = r.y + r.height + 200;\r\n            content2.setPreferredSize(d2);\r\n            JFrame topFrame = (JFrame) SwingUtilities.getWindowAncestor(this);\r\n            topFrame.getContentPane().validate();\r\n        } catch (Exception ex) {}\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/25839668/jeditorpane-handling-local-images\r\n  [2]: https://www.infoworld.com/article/2077472/java-tip-109--display-images-using-jeditorpane.html","title":"file:// URI scheme in JTextPane with HTML content is not working","body":"<p>I'm making an image cache in the folder of my application.\nI made code for downloading images and checking for their existence.</p>\n<p>However, I cannot use them in <code>src</code> attributes for some reason.</p>\n<p>I have read these two posts:</p>\n<p><a href=\"https://stackoverflow.com/questions/25839668/jeditorpane-handling-local-images\">jEditorPane handling local images</a></p>\n<p><a href=\"https://www.infoworld.com/article/2077472/java-tip-109--display-images-using-jeditorpane.html\" rel=\"nofollow noreferrer\">Display images using JEditorPane</a></p>\n<p>However, in the first question the OP said that he used another method for setting image source, that is not suitable in my case.</p>\n<p>And the second article assumes that <code>file://</code> scheme should be working out of the box without any tricks. But somehow it's not working in my case.</p>\n<p>A tried replacing forward slashes with backslashes, replacing spaces with <code>%20</code> and leaving them as they are, tried file:// and file:/// prefix - nothing is working. I can read my files using ImageIO, but JTextPane HTML renderer does not find them, so I have just error placeholders on screen.</p>\n<p>The example of the path to an image:</p>\n<pre><code>file:///D:/My%20Documents/NetBeansProjects/XMessenger/cache/http%3A%2F%2Fpopov654.pp.ru%2Fcopybox%2Fphoto.jpg\n</code></pre>\n<p>Here is the code:</p>\n<pre><code>private int last_width = 0;\nprivate HashMap&lt;String, Image&gt; imgCache = new HashMap&lt;String, Image&gt;();\n\nprivate void createTestMessageContent(final JComponent parent) {\n\n    String html = &quot;Some &lt;i&gt;text&lt;/i&gt;&lt;br&gt;And more,&lt;br&gt;And more...&lt;br&gt;And more...&lt;br&gt;And more...&lt;br&gt;And more...&lt;br&gt;And more...&lt;br&gt;&quot; + \n            &quot;&lt;img src=\\&quot;http://popov654.pp.ru/copybox/photo.jpg\\&quot; width=\\&quot;390\\&quot; height=\\&quot;260\\&quot;&gt;&quot; +\n            &quot;&lt;img src=\\&quot;http://popov654.pp.ru/copybox/DSCN2155.jpg\\&quot; width=\\&quot;390\\&quot; height=\\&quot;260\\&quot;&gt;&quot; +\n            &quot;&lt;img src=\\&quot;http://popov654.pp.ru/copybox/DSCN2157.jpg\\&quot; width=\\&quot;390\\&quot; height=\\&quot;260\\&quot;&gt;&quot;;\n    html = &quot;&lt;div style=\\&quot;padding: 0px; font-size: 14px; font-family: Tahoma\\&quot;&gt;&quot; + html + &quot;&lt;/div&gt;&quot;;\n\n    final String orig_html = html;\n\n    Matcher m = Pattern.compile(&quot;((&lt;img src=\\&quot;[^\\&quot;]+\\&quot;)( width=\\&quot;\\\\d+\\&quot;)?( height=\\&quot;\\\\d+\\&quot;)?([^&gt;]*&gt;)\\\\s*)+&quot;).matcher(orig_html);\n    while (m.find()) {\n        String str = m.group();\n        Matcher m2 = Pattern.compile(&quot;src=\\&quot;([^\\&quot;]+)\\&quot;&quot;).matcher(str);\n        while (m2.find()) {\n            File f = new File(&quot;cache&quot;);\n            if (!f.exists()) {\n                f.mkdir();\n            }\n            String src = m2.group(1);\n            String cached_name = src.replaceAll(&quot;/&quot;, &quot;%2F&quot;).replaceAll(&quot;:&quot;, &quot;%3A&quot;);\n            File img = new File(&quot;cache/&quot; + cached_name);\n            System.err.println(img.getAbsolutePath());\n            if (!img.exists()) {\n                InputStream in = null;\n                BufferedInputStream b_in = null;\n                FileOutputStream fileOutputStream = null;\n                try {\n                    in = new URL(src).openStream();\n                    b_in = new BufferedInputStream(in);\n                    fileOutputStream = new FileOutputStream(&quot;cache/&quot; + cached_name);\n                    byte dataBuffer[] = new byte[1024];\n                    int bytesRead;\n                    while ((bytesRead = in.read(dataBuffer, 0, 1024)) != -1) {\n                        fileOutputStream.write(dataBuffer, 0, bytesRead);\n                    }\n                    //Files.copy(in, Paths.get(&quot;cache/&quot; + cached_name), StandardCopyOption.REPLACE_EXISTING);\n                } catch (IOException ex) {\n                    ex.printStackTrace();\n                } finally {\n                    try {\n                        in.close();\n                        b_in.close();\n                        fileOutputStream.close();\n                    } catch (IOException ex) {}\n                }\n            } else {\n                html = html.replaceFirst(&quot;src=\\&quot;&quot; + src + &quot;\\&quot;&quot;, &quot;src=\\&quot;file:///&quot; + img.getAbsolutePath().replaceAll(&quot;\\\\\\\\&quot;, &quot;/&quot;).replaceAll(&quot; &quot;, &quot;%20&quot;) + &quot;\\&quot;&quot;);\n            }\n        }\n    }\n\n    final String cached_html = html;\n\n    html = html.replaceAll(&quot;(&lt;img src=\\&quot;[^\\&quot;]+\\&quot;)( width=\\&quot;\\\\d+\\&quot;)?( height=\\&quot;\\\\d+\\&quot;)?([^&gt;]*&gt;)&quot;, &quot;&lt;a href=\\&quot;#\\&quot; style=\\&quot;display: inline-block; margin-right: 10px\\&quot;&gt;$1 width=\\&quot;390\\&quot; height=\\&quot;260\\&quot; hspace=\\&quot;2\\&quot; vspace=\\&quot;8\\&quot; border=\\&quot;0\\&quot;$4&lt;/a&gt;&quot;);\n    System.out.println(html);\n\n    msgContent.setText(html);\n    addHyperlinkListener(msgContent);\n\n\n    //msgContent.setMinimumSize(new Dimension(msgContent.getWidth(), msgContent.getPreferredSize().height + 20));\n    //setMinimumSize(new Dimension(getWidth(), msgContent.getPreferredSize().height + 160));\n    setPreferredSize(new Dimension(getWidth(), msgContent.getPreferredSize().height + 148));\n    \n    initImages();\n\n    updateSize();\n\n    content2.addComponentListener(new java.awt.event.ComponentListener() {\n\n        @Override\n        public void componentResized(ComponentEvent e) {\n            int new_width = ((JPanel)e.getSource()).getWidth();\n            if (new_width != last_width) updateImages(cached_html);\n            last_width = new_width;\n        }\n\n        @Override\n        public void componentMoved(ComponentEvent e) {}\n\n        @Override\n        public void componentShown(ComponentEvent e) {}\n\n        @Override\n        public void componentHidden(ComponentEvent e) {}\n\n    });\n}\n\nprivate void initImages() {\n    HTMLDocument doc = (HTMLDocument) msgContent.getStyledDocument();\n    Element[] imgs = getElementsByTagName(HTML.Tag.IMG, doc);\n    for (Element img: imgs) {\n        Element a = img.getParentElement();\n        try {\n            String src = (String) img.getAttributes().getAttribute(HTML.Attribute.SRC);\n            System.out.println(&quot;src=&quot; + src);\n            System.out.println();\n\n            Image image = null;\n            if (!src.startsWith(&quot;http://&quot;) &amp;&amp; !src.startsWith(&quot;https://&quot;)) {\n                String path = src;\n                if (src.startsWith(&quot;file:///&quot;)) {\n                    path = path.substring(8).replaceAll(&quot;%20&quot;, &quot; &quot;);\n                }\n                image = ImageIO.read(new File(path));\n            } else {\n                image = ImageIO.read(new URL(src));\n            }\n            imgCache.put(src, image);\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}\n\nprivate void updateImages(String orig_html) {\n    int width = XMessengerApp.getMainWindow().getMessagePaneWidth() - 108;\n\n    double default_ratio = 16f / 9;\n\n    int img_width = (int) (width * 0.65);\n    int img_height = (int) ((double)img_width / default_ratio);\n    int margin = (int) (width * 0.005);\n\n    String html = orig_html;\n    Matcher m = Pattern.compile(&quot;((&lt;img src=\\&quot;[^\\&quot;]+\\&quot;)( width=\\&quot;\\\\d+\\&quot;)?( height=\\&quot;\\\\d+\\&quot;)?([^&gt;]*&gt;)\\\\s*)+&quot;).matcher(orig_html);\n    while (m.find()) {\n        String str = m.group();\n        String str_new = str;\n        String[] img_strs = str.split(&quot;&gt;\\\\s*&lt;&quot;);\n        if (img_strs.length &gt; 1) {\n            System.err.println(&quot;Image series found of &quot; + img_strs.length + &quot; images&quot;);\n        }\n        if (img_strs.length &gt; 1) {\n            img_width = (int)((width - margin * img_strs.length) / img_strs.length * 0.95);\n            img_height = (int)((double)img_width / default_ratio);\n        }\n        for (int i = 0; i &lt; img_strs.length; i++) {\n            if (i &gt; 0) img_strs[i] = &quot;&lt;&quot; + img_strs[i];\n            if (i &lt; img_strs.length-1) img_strs[i] = img_strs[i] + &quot;&gt;&quot;;\n\n            Matcher m2 = Pattern.compile(&quot;src=\\&quot;([^\\&quot;]+)\\&quot;&quot;).matcher(img_strs[i]);\n            m2.find();\n            String src = m2.group(1);\n\n            double ratio = default_ratio;\n            if (imgCache.containsKey(src)) {\n                Image img = imgCache.get(src);\n                ratio = (double) img.getWidth(null) / img.getHeight(null);\n                //System.out.println(&quot;Aspect ratio: &quot; + ratio);\n            }\n            if (img_strs.length == 1) {\n                img_height = (int)((double)img_width / ratio);\n            } else {\n                img_width = (int)((double)img_height * ratio);\n            }\n            //System.out.println(&quot;Src: &quot; + src);\n\n            String replace = img_strs[i].replaceAll(&quot;(&lt;img src=\\&quot;[^\\&quot;]+\\&quot;)( width=\\&quot;\\\\d+\\&quot;)?( height=\\&quot;\\\\d+\\&quot;)?([^&gt;]*&gt;)&quot;, &quot;&lt;a href=\\&quot;#\\&quot; style=\\&quot;display: inline-block; margin-right: &quot; + margin + &quot;px\\&quot;&gt;$1 width=\\&quot;&quot; + img_width + &quot;\\&quot; height=\\&quot;&quot; + img_height + &quot;\\&quot; hspace=\\&quot;&quot; + margin + &quot;\\&quot;vspace=\\&quot;8\\&quot; border=\\&quot;0\\&quot;$4&lt;/a&gt;&quot;);\n            str_new = str_new.replaceFirst(img_strs[i], replace);\n        }\n        if (img_strs.length &gt; 1) {\n            str_new = &quot;&lt;div style=\\&quot;float: left; margin-left: -10px\\&quot;&gt;&quot; + str_new + &quot;&lt;/div&gt;&quot;;\n        }\n        html = html.replaceFirst(str, str_new);\n            \n    }\n\n\n    msgContent.setText(html);\n\n}\n\nprivate void updateSize() {\n    try {\n        Dimension d = msgContent.getPreferredSize();\n        Rectangle r = msgContent.modelToView(msgContent.getDocument().getLength());\n        d.height = r.y + r.height;\n        msgContent.setPreferredSize(d);\n        Dimension d2 = content2.getPreferredSize();\n        d2.height = r.y + r.height + 200;\n        content2.setPreferredSize(d2);\n        JFrame topFrame = (JFrame) SwingUtilities.getWindowAncestor(this);\n        topFrame.getContentPane().validate();\n    } catch (Exception ex) {}\n}\n</code></pre>\n"},{"tags":["java","android","digital-signature","x509certificate","dsa"],"answers":[{"tags":[],"owner":{"account_id":4297204,"reputation":2499,"user_id":9926179,"display_name":"b.s"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672329803,"creation_date":1672328513,"answer_id":74953147,"question_id":74937409,"body_markdown":"&gt; How to Sign XML request with DSC certificate in java?\r\n\r\nYou need a `private key` to perform the signing. I have added the code which could help you to sign and add the public certificate into the input XML. You need a keystore with private key and public certificate.\r\n\r\nI used the following xml as an input for testing purpose. \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Otp uid=&quot;608559509930&quot; ac=&quot;STGPDL0001&quot; sa=&quot;STGPDL0001&quot; ver=&quot;2.5&quot; txn=&quot;AUANSDL001:20221219170045&quot; lk=&quot;MKfOOHltrbemb9dlt1As6uaMC42HiP3F4Ar6CJTC7s8CoIJRY8U&quot; ts=&quot;2022-12-19T17:00:45&quot; type=&quot;A&quot;&gt;\r\n       &lt;Opts ch=&quot;01&quot; /&gt;\r\n    &lt;/Otp&gt;\r\n\r\nYou don&#39;t need any external dependency to perform the signing. I just used java 8, created a test keystore with private key and certificate. Make sure to provide valid keystore file, keystore password and private key&#39;s pin. \r\n \r\n    import java.io.FileInputStream;\r\n    import java.io.InputStream;\r\n    import java.io.Serializable;\r\n    import java.io.StringReader;\r\n    import java.io.StringWriter;\r\n    import java.security.KeyStore;\r\n    import java.security.PrivateKey;\r\n    import java.security.cert.Certificate;\r\n    import java.security.cert.X509Certificate;\r\n    import java.util.ArrayList;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    import javax.xml.XMLConstants;\r\n    import javax.xml.crypto.dsig.CanonicalizationMethod;\r\n    import javax.xml.crypto.dsig.DigestMethod;\r\n    import javax.xml.crypto.dsig.Reference;\r\n    import javax.xml.crypto.dsig.SignatureMethod;\r\n    import javax.xml.crypto.dsig.SignedInfo;\r\n    import javax.xml.crypto.dsig.Transform;\r\n    import javax.xml.crypto.dsig.XMLSignature;\r\n    import javax.xml.crypto.dsig.XMLSignatureFactory;\r\n    import javax.xml.crypto.dsig.dom.DOMSignContext;\r\n    import javax.xml.crypto.dsig.keyinfo.KeyInfo;\r\n    import javax.xml.crypto.dsig.keyinfo.KeyInfoFactory;\r\n    import javax.xml.crypto.dsig.keyinfo.X509Data;\r\n    import javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\r\n    import javax.xml.crypto.dsig.spec.TransformParameterSpec;\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    import javax.xml.transform.Transformer;\r\n    import javax.xml.transform.TransformerFactory;\r\n    import javax.xml.transform.dom.DOMSource;\r\n    import javax.xml.transform.stream.StreamResult;\r\n    import org.w3c.dom.Document;\r\n    import org.xml.sax.InputSource;\r\n    \r\n    public class Application {\r\n    \r\n    \tprivate final static String KEYSTORE_FILE = &quot;keystore.p12&quot;;\r\n    \tprivate final static String KEYSTORE_PASSWORD = &quot;password&quot;;\r\n    \tprivate final static String PRIVATE_KEY_PIN = &quot;password&quot;;\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tString inputXML = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot; standalone=\\&quot;yes\\&quot;?&gt;\\r\\n&quot;\r\n    \t\t\t\t+ &quot;&lt;Otp uid=\\&quot;608559509930\\&quot; ac=\\&quot;STGPDL0001\\&quot; sa=\\&quot;STGPDL0001\\&quot; ver=\\&quot;2.5\\&quot; txn=\\&quot;AUANSDL001:20221219170045\\&quot; lk=\\&quot;MKfOOHltrbemb9dlt1As6uaMC42HiP3F4Ar6CJTC7s8CoIJRY8U\\&quot; ts=\\&quot;2022-12-19T17:00:45\\&quot; type=\\&quot;A\\&quot;&gt;&lt;Opts ch=\\&quot;01\\&quot;/&gt;&lt;/Otp&gt;&quot;;\r\n    \t\tSystem.out.println(&quot;Input XML:\\n&quot; + inputXML);\r\n    \t\tString signedXML = signXML(inputXML);\r\n    \t\tSystem.out.println(&quot;\\nSigned XML:\\n&quot; + signedXML);\r\n    \t}\r\n    \r\n    \tpublic static String signXML(String xml) throws Exception {\r\n    \t\tXMLSignatureFactory factory = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\r\n    \t\tReference ref = factory.newReference(&quot;&quot;, factory.newDigestMethod(DigestMethod.SHA1, null),\r\n    \t\t\t\tCollections.singletonList(factory.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)),\r\n    \t\t\t\tnull, null);\r\n    \t\tSignedInfo signedInfo = factory.newSignedInfo(\r\n    \t\t\t\tfactory.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE, (C14NMethodParameterSpec) null),\r\n    \t\t\t\tfactory.newSignatureMethod(SignatureMethod.RSA_SHA1, null), Collections.singletonList(ref));\r\n    \r\n    \t\tKeyStore ks = KeyStore.getInstance(&quot;pkcs12&quot;);\r\n    \t\tInputStream fis = new FileInputStream(KEYSTORE_FILE);\r\n    \t\tks.load(fis, KEYSTORE_PASSWORD.toCharArray());\r\n    \t\tString alias = ks.aliases().nextElement();\r\n    \t\tPrivateKey key = (PrivateKey) ks.getKey(alias, PRIVATE_KEY_PIN.toCharArray());\r\n    \t\tCertificate[] chain = ks.getCertificateChain(alias);\r\n    \t\tX509Certificate cert = (X509Certificate) chain[0];\r\n    \r\n    \t\tKeyInfoFactory keyInfoFactory = factory.getKeyInfoFactory();\r\n    \t\tList&lt;Serializable&gt; x509Content = new ArrayList&lt;&gt;();\r\n    \t\tx509Content.add(cert.getSubjectX500Principal().getName());\r\n    \t\tx509Content.add(cert);\r\n    \t\tX509Data x509Data = keyInfoFactory.newX509Data(x509Content);\r\n    \t\tKeyInfo keyInfo = keyInfoFactory.newKeyInfo(Collections.singletonList(x509Data));\r\n    \r\n    \t\tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n    \t\tdbf.setNamespaceAware(true);\r\n    \t\tdbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n    \t\tDocument doc = dbf.newDocumentBuilder().parse(new InputSource(new StringReader(xml)));\r\n    \t\tDOMSignContext dsc = new DOMSignContext(key, doc.getDocumentElement());\r\n    \r\n    \t\tXMLSignature signature = factory.newXMLSignature(signedInfo, keyInfo);\r\n    \t\tsignature.sign(dsc);\r\n    \r\n    \t\tTransformerFactory tf = TransformerFactory.newInstance();\r\n    \t\tTransformer trans = tf.newTransformer();\r\n    \t\tStringWriter writer = new StringWriter();\r\n    \t\ttrans.transform(new DOMSource(doc), new StreamResult(writer));\r\n    \t\treturn writer.toString();\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\nOutput after execution of above code: Signed XML\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;Otp ac=&quot;STGPDL0001&quot; lk=&quot;MKfOOHltrbemb9dlt1As6uaMC42HiP3F4Ar6CJTC7s8CoIJRY8U&quot; sa=&quot;STGPDL0001&quot; ts=&quot;2022-12-19T17:00:45&quot; txn=&quot;AUANSDL001:20221219170045&quot; type=&quot;A&quot; uid=&quot;608559509930&quot; ver=&quot;2.5&quot;&gt;&lt;Opts ch=&quot;01&quot;/&gt;&lt;Signature xmlns=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;&lt;SignedInfo&gt;&lt;CanonicalizationMethod Algorithm=&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315&quot;/&gt;&lt;SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;/&gt;&lt;Reference URI=&quot;&quot;&gt;&lt;Transforms&gt;&lt;Transform Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot;/&gt;&lt;/Transforms&gt;&lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;/&gt;&lt;DigestValue&gt;kVVjeAce1xEXIXqwDqOubFIjVxg=&lt;/DigestValue&gt;&lt;/Reference&gt;&lt;/SignedInfo&gt;&lt;SignatureValue&gt;KFA+Jcd+HmNzVL3LKmQ+E0B8EXnVSP8lFZyChBG74xU0T74827xuuHymCOrNhbffzBpzUJiibEhC\r\n    mtPPmMarvhRMtxtRzjyCaNetqDgRkesNV6fpeyHg4HIWuRvRsp1u+jchj3O04ng0TCbBxxK5C4Q4\r\n    TPEn/Rpa9YzEoDmmg1BstCvxRYK1naXdV63gBr1UhPfteVpHYY/bJbID/FldPNMIkJHHxzrY3CD6\r\n    mprroKD9svGbxvRFTh3aHqC3CJOoi+dkMaJiIwDlXHFoCqL1EutGWDbwJYNptDVhH9GuCA7P0jYW\r\n    wmSE1QOKeiJJMyrd3GExtRf79rCZCFHCBBbm/w==&lt;/SignatureValue&gt;&lt;KeyInfo&gt;&lt;X509Data&gt;&lt;X509SubjectName&gt;CN=Test,OU=NA,O=NA,L=NA,ST=NA,C=NA&lt;/X509SubjectName&gt;&lt;X509Certificate&gt;MIIDHDCCAgSgAwIBAgIEY62nqTANBgkqhkiG9w0BAQUFADBQMQswCQYDVQQGEwJOQTELMAkGA1UE\r\n    CAwCTkExCzAJBgNVBAcMAk5BMQswCQYDVQQKDAJOQTELMAkGA1UECwwCTkExDTALBgNVBAMMBFRl\r\n    c3QwHhcNMjIxMjI5MTQ0MzUzWhcNMjMxMjI5MTQ0MzUzWjBQMQswCQYDVQQGEwJOQTELMAkGA1UE\r\n    CAwCTkExCzAJBgNVBAcMAk5BMQswCQYDVQQKDAJOQTELMAkGA1UECwwCTkExDTALBgNVBAMMBFRl\r\n    c3QwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDRGXlJ/+Gj8f4ID0zv6QIxqEl7EenC\r\n    79jS6elE5Zqp7Iofhep7KWVeqhJmgSsOfg/MXL/ZCMrhFd8rMWdWnWkkRg4fGXm5VNa/FOXu7FYl\r\n    jcCmizxAHmhVT2ln7HDOOfZ75wyjfT5crz9KlofvqK+gAByQee9Bv5A1HorHxzM4t/6GW7Yc5gHp\r\n    l4CQ3m28c74m5PmTg7C0cMAL+fj1vQezMFpSQp2kehylwVPMy1+SH3cbkIFDPmOKffYjh245Q0vD\r\n    +c4yRcM6srP9lW2yO7UbYUl2cV3fKGw7V56u3hhu/5U6Udc7Gn/vWX4+rcY45ZP0kzQfWRVi6rFW\r\n    P94Fk/s5AgMBAAEwDQYJKoZIhvcNAQEFBQADggEBAGiUORJhosazNJOwpi02VYR0Oedpq3apUiFV\r\n    dhWvTcH43mcXPCgf+w8oahahkow3zJJZBCYQxQ2jUWU6a+smixrik/+QUZrheV0EHjqXOxVJTWUu\r\n    V62fpXy0AZQlSvsq4hDdgsmMnK/U2Kcx5DpDkqE5CBe/cMoarcOOGZUsokMp+GVbpq9ZR16KWoBd\r\n    uehy4RdYLOWao6DqmOrqgHJqe0DOjqQmb2Lsvuel8tq8t3imIa4wu+VVq/WDaPNk68kr2aB0B3ed\r\n    Q3sB8L+tucYuYCw2MEXwz1+da9xVORrhQ/pgGKFtXhgyqddMvPKAvIxZO0FUyk7ZMXJMeCCYb40L\r\n    1Mk=&lt;/X509Certificate&gt;&lt;/X509Data&gt;&lt;/KeyInfo&gt;&lt;/Signature&gt;&lt;/Otp&gt;\r\n\r\nTest keystore file\r\n[keystore.p12][1]\r\n\r\n  [1]: https://easyupload.io/7fm15l","title":"How to Sign XML request with DSC certificate in java or android","body":"<blockquote>\n<p>How to Sign XML request with DSC certificate in java?</p>\n</blockquote>\n<p>You need a <code>private key</code> to perform the signing. I have added the code which could help you to sign and add the public certificate into the input XML. You need a keystore with private key and public certificate.</p>\n<p>I used the following xml as an input for testing purpose.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Otp uid=&quot;608559509930&quot; ac=&quot;STGPDL0001&quot; sa=&quot;STGPDL0001&quot; ver=&quot;2.5&quot; txn=&quot;AUANSDL001:20221219170045&quot; lk=&quot;MKfOOHltrbemb9dlt1As6uaMC42HiP3F4Ar6CJTC7s8CoIJRY8U&quot; ts=&quot;2022-12-19T17:00:45&quot; type=&quot;A&quot;&gt;\n   &lt;Opts ch=&quot;01&quot; /&gt;\n&lt;/Otp&gt;\n</code></pre>\n<p>You don't need any external dependency to perform the signing. I just used java 8, created a test keystore with private key and certificate. Make sure to provide valid keystore file, keystore password and private key's pin.</p>\n<pre><code>import java.io.FileInputStream;\nimport java.io.InputStream;\nimport java.io.Serializable;\nimport java.io.StringReader;\nimport java.io.StringWriter;\nimport java.security.KeyStore;\nimport java.security.PrivateKey;\nimport java.security.cert.Certificate;\nimport java.security.cert.X509Certificate;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport javax.xml.XMLConstants;\nimport javax.xml.crypto.dsig.CanonicalizationMethod;\nimport javax.xml.crypto.dsig.DigestMethod;\nimport javax.xml.crypto.dsig.Reference;\nimport javax.xml.crypto.dsig.SignatureMethod;\nimport javax.xml.crypto.dsig.SignedInfo;\nimport javax.xml.crypto.dsig.Transform;\nimport javax.xml.crypto.dsig.XMLSignature;\nimport javax.xml.crypto.dsig.XMLSignatureFactory;\nimport javax.xml.crypto.dsig.dom.DOMSignContext;\nimport javax.xml.crypto.dsig.keyinfo.KeyInfo;\nimport javax.xml.crypto.dsig.keyinfo.KeyInfoFactory;\nimport javax.xml.crypto.dsig.keyinfo.X509Data;\nimport javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\nimport javax.xml.crypto.dsig.spec.TransformParameterSpec;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.dom.DOMSource;\nimport javax.xml.transform.stream.StreamResult;\nimport org.w3c.dom.Document;\nimport org.xml.sax.InputSource;\n\npublic class Application {\n\n    private final static String KEYSTORE_FILE = &quot;keystore.p12&quot;;\n    private final static String KEYSTORE_PASSWORD = &quot;password&quot;;\n    private final static String PRIVATE_KEY_PIN = &quot;password&quot;;\n\n    public static void main(String[] args) throws Exception {\n        String inputXML = &quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot; standalone=\\&quot;yes\\&quot;?&gt;\\r\\n&quot;\n                + &quot;&lt;Otp uid=\\&quot;608559509930\\&quot; ac=\\&quot;STGPDL0001\\&quot; sa=\\&quot;STGPDL0001\\&quot; ver=\\&quot;2.5\\&quot; txn=\\&quot;AUANSDL001:20221219170045\\&quot; lk=\\&quot;MKfOOHltrbemb9dlt1As6uaMC42HiP3F4Ar6CJTC7s8CoIJRY8U\\&quot; ts=\\&quot;2022-12-19T17:00:45\\&quot; type=\\&quot;A\\&quot;&gt;&lt;Opts ch=\\&quot;01\\&quot;/&gt;&lt;/Otp&gt;&quot;;\n        System.out.println(&quot;Input XML:\\n&quot; + inputXML);\n        String signedXML = signXML(inputXML);\n        System.out.println(&quot;\\nSigned XML:\\n&quot; + signedXML);\n    }\n\n    public static String signXML(String xml) throws Exception {\n        XMLSignatureFactory factory = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\n        Reference ref = factory.newReference(&quot;&quot;, factory.newDigestMethod(DigestMethod.SHA1, null),\n                Collections.singletonList(factory.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)),\n                null, null);\n        SignedInfo signedInfo = factory.newSignedInfo(\n                factory.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE, (C14NMethodParameterSpec) null),\n                factory.newSignatureMethod(SignatureMethod.RSA_SHA1, null), Collections.singletonList(ref));\n\n        KeyStore ks = KeyStore.getInstance(&quot;pkcs12&quot;);\n        InputStream fis = new FileInputStream(KEYSTORE_FILE);\n        ks.load(fis, KEYSTORE_PASSWORD.toCharArray());\n        String alias = ks.aliases().nextElement();\n        PrivateKey key = (PrivateKey) ks.getKey(alias, PRIVATE_KEY_PIN.toCharArray());\n        Certificate[] chain = ks.getCertificateChain(alias);\n        X509Certificate cert = (X509Certificate) chain[0];\n\n        KeyInfoFactory keyInfoFactory = factory.getKeyInfoFactory();\n        List&lt;Serializable&gt; x509Content = new ArrayList&lt;&gt;();\n        x509Content.add(cert.getSubjectX500Principal().getName());\n        x509Content.add(cert);\n        X509Data x509Data = keyInfoFactory.newX509Data(x509Content);\n        KeyInfo keyInfo = keyInfoFactory.newKeyInfo(Collections.singletonList(x509Data));\n\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n        dbf.setNamespaceAware(true);\n        dbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n        Document doc = dbf.newDocumentBuilder().parse(new InputSource(new StringReader(xml)));\n        DOMSignContext dsc = new DOMSignContext(key, doc.getDocumentElement());\n\n        XMLSignature signature = factory.newXMLSignature(signedInfo, keyInfo);\n        signature.sign(dsc);\n\n        TransformerFactory tf = TransformerFactory.newInstance();\n        Transformer trans = tf.newTransformer();\n        StringWriter writer = new StringWriter();\n        trans.transform(new DOMSource(doc), new StreamResult(writer));\n        return writer.toString();\n    }\n\n}\n</code></pre>\n<p>Output after execution of above code: Signed XML</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;Otp ac=&quot;STGPDL0001&quot; lk=&quot;MKfOOHltrbemb9dlt1As6uaMC42HiP3F4Ar6CJTC7s8CoIJRY8U&quot; sa=&quot;STGPDL0001&quot; ts=&quot;2022-12-19T17:00:45&quot; txn=&quot;AUANSDL001:20221219170045&quot; type=&quot;A&quot; uid=&quot;608559509930&quot; ver=&quot;2.5&quot;&gt;&lt;Opts ch=&quot;01&quot;/&gt;&lt;Signature xmlns=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;&lt;SignedInfo&gt;&lt;CanonicalizationMethod Algorithm=&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315&quot;/&gt;&lt;SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;/&gt;&lt;Reference URI=&quot;&quot;&gt;&lt;Transforms&gt;&lt;Transform Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot;/&gt;&lt;/Transforms&gt;&lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;/&gt;&lt;DigestValue&gt;kVVjeAce1xEXIXqwDqOubFIjVxg=&lt;/DigestValue&gt;&lt;/Reference&gt;&lt;/SignedInfo&gt;&lt;SignatureValue&gt;KFA+Jcd+HmNzVL3LKmQ+E0B8EXnVSP8lFZyChBG74xU0T74827xuuHymCOrNhbffzBpzUJiibEhC\nmtPPmMarvhRMtxtRzjyCaNetqDgRkesNV6fpeyHg4HIWuRvRsp1u+jchj3O04ng0TCbBxxK5C4Q4\nTPEn/Rpa9YzEoDmmg1BstCvxRYK1naXdV63gBr1UhPfteVpHYY/bJbID/FldPNMIkJHHxzrY3CD6\nmprroKD9svGbxvRFTh3aHqC3CJOoi+dkMaJiIwDlXHFoCqL1EutGWDbwJYNptDVhH9GuCA7P0jYW\nwmSE1QOKeiJJMyrd3GExtRf79rCZCFHCBBbm/w==&lt;/SignatureValue&gt;&lt;KeyInfo&gt;&lt;X509Data&gt;&lt;X509SubjectName&gt;CN=Test,OU=NA,O=NA,L=NA,ST=NA,C=NA&lt;/X509SubjectName&gt;&lt;X509Certificate&gt;MIIDHDCCAgSgAwIBAgIEY62nqTANBgkqhkiG9w0BAQUFADBQMQswCQYDVQQGEwJOQTELMAkGA1UE\nCAwCTkExCzAJBgNVBAcMAk5BMQswCQYDVQQKDAJOQTELMAkGA1UECwwCTkExDTALBgNVBAMMBFRl\nc3QwHhcNMjIxMjI5MTQ0MzUzWhcNMjMxMjI5MTQ0MzUzWjBQMQswCQYDVQQGEwJOQTELMAkGA1UE\nCAwCTkExCzAJBgNVBAcMAk5BMQswCQYDVQQKDAJOQTELMAkGA1UECwwCTkExDTALBgNVBAMMBFRl\nc3QwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDRGXlJ/+Gj8f4ID0zv6QIxqEl7EenC\n79jS6elE5Zqp7Iofhep7KWVeqhJmgSsOfg/MXL/ZCMrhFd8rMWdWnWkkRg4fGXm5VNa/FOXu7FYl\njcCmizxAHmhVT2ln7HDOOfZ75wyjfT5crz9KlofvqK+gAByQee9Bv5A1HorHxzM4t/6GW7Yc5gHp\nl4CQ3m28c74m5PmTg7C0cMAL+fj1vQezMFpSQp2kehylwVPMy1+SH3cbkIFDPmOKffYjh245Q0vD\n+c4yRcM6srP9lW2yO7UbYUl2cV3fKGw7V56u3hhu/5U6Udc7Gn/vWX4+rcY45ZP0kzQfWRVi6rFW\nP94Fk/s5AgMBAAEwDQYJKoZIhvcNAQEFBQADggEBAGiUORJhosazNJOwpi02VYR0Oedpq3apUiFV\ndhWvTcH43mcXPCgf+w8oahahkow3zJJZBCYQxQ2jUWU6a+smixrik/+QUZrheV0EHjqXOxVJTWUu\nV62fpXy0AZQlSvsq4hDdgsmMnK/U2Kcx5DpDkqE5CBe/cMoarcOOGZUsokMp+GVbpq9ZR16KWoBd\nuehy4RdYLOWao6DqmOrqgHJqe0DOjqQmb2Lsvuel8tq8t3imIa4wu+VVq/WDaPNk68kr2aB0B3ed\nQ3sB8L+tucYuYCw2MEXwz1+da9xVORrhQ/pgGKFtXhgyqddMvPKAvIxZO0FUyk7ZMXJMeCCYb40L\n1Mk=&lt;/X509Certificate&gt;&lt;/X509Data&gt;&lt;/KeyInfo&gt;&lt;/Signature&gt;&lt;/Otp&gt;\n</code></pre>\n<p>Test keystore file\n<a href=\"https://easyupload.io/7fm15l\" rel=\"nofollow noreferrer\">keystore.p12</a></p>\n"}],"owner":{"account_id":18613909,"reputation":53,"user_id":13565633,"display_name":"Shiv Shrivas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74953147,"answer_count":1,"score":0,"last_activity_date":1672329803,"creation_date":1672212500,"question_id":74937409,"body_markdown":"Actually I&#39;m working on a project where I have a XML code And I want to do Digital Signature of that particular XML.\r\nCan anyone help me in that?\r\n\r\n `O60\\&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?\\&gt;\\&lt;Otp uid=&quot;608559509930&quot; ac=&quot;STGPDL0001&quot;    sa=&quot;STGPDL0001&quot; ver=&quot;2.5&quot; txn=&quot;AUANSDL001:20221219170045&quot; lk=&quot;MKfOOHltrbemb9dlt1As6uaMC42HiP3F4Ar6CJTC7s8CoIJRY8U&quot; ts=&quot;2022-12-19T17:00:45&quot; type=&quot;A&quot; xmlns=&quot;http://www.uidai.gov.in/authentication/otp/1.0&quot;\\&gt;\\&lt;Opts ch=&quot;01&quot;/\\&gt;`\r\n\r\nI have this block of code\r\n\r\nand I want like this\r\n\r\n`O60&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;Otp uid=&quot;608559509930&quot; ac=&quot;STGPDL0001&quot; sa=&quot;STGPDL0001&quot; ver=&quot;2.5&quot; txn=&quot;AUANSDL001:20221219162103&quot; lk=&quot;MKfOOHltrbemb9dlt1As6uaMCniP3F4Ar6CJTC7s8CoIJRY8U&quot; ts=&quot;2022-12-19T16:21:03&quot; type=&quot;A&quot; xmlns=&quot;http://www.uidai.gov.in/authentication/otp/1.0&quot;&gt;&lt;Opts ch=&quot;01&quot;/&gt;\r\n&lt;Signature xmlns=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;&lt;SignedInfo&gt;\r\n&lt;CanonicalizationMethod Algorithm=&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments&quot;/&gt;&lt;SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;/&gt;&lt;Reference URI=&quot;&quot;&gt;&lt;Transforms&gt;&lt;Transform Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot;/&gt;&lt;/Transforms&gt;&lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;/&gt;&lt;DigestValue&gt;vWmg/+0CO6BsWzMlcne+FRPMGS8=&lt;/DigestValue&gt;&lt;/Reference&gt;&lt;/SignedInfo&gt;&lt;SignatureValue&gt;UD7m2YQStmwaUerMDEdJfhqtCl2V4EZAH6G4pNCYqW2YYTt58yviobqFwGQydDXWJlQFm4GNiMtIZiNwSRweTMPn5X7hvVysL+nIFjR80OaeshUzJbitGHzN4d7KEp3yUlGAhcS66kcrYjH4cS8wQ2X7vi9CgTQ2OIpih1hOp/55YhFvGrXP3brrGR6bkLlwPUbjo2eNsbGDQMnWRoJPT5dEPhdj2a1wRs4/aGyOg/57svlKjoYtM65LLbLYqt6Xqh3vUiemm/2S0Wg+/OptRuiF+QDIqQI/dzIr5zciXk6zHUdzCZgw8CioVcaCyn4bu11XUbxze0d/mgIxGB4Rg==&lt;/SignatureValue&gt;&lt;KeyInfo&gt;&lt;X509Data&gt;&lt;X509SubjectName&gt;OID.2.5.4.65=4497104453fb4a27896fb19cea63c468, L=AGRA, CN=DS PAISALO DIGITAL LIMITED, SERIALNUMBER=89507f93cc805e639f7fc0041c047f367b9b045535f94ddc07fbdef5d8f99fc5, S=UTTAR PRADESH, PostalCode=282002, Phone=52cc883ad0fc4dcf59e2e71efe6e1cfd46456a5493651902bd117e0f30232df8, OU=PAISALO DIGITAL LIMITED, O=PAISALO DIGITAL LIMITED, C=IN&lt;/X509SubjectName&gt;\r\n&lt;X509Certificate&gt;encrypted string&lt;/X509Certificate&gt;\r\n&lt;/X509Data&gt;&lt;/KeyInfo&gt;&lt;/Signature&gt;&lt;/Otp&gt;`\r\n\r\nI also tried this with chilkat library but it did not work for me\r\n\r\nif some one have any idea about any type of library which is compatible with android It will too good for me but if some one has solution in java, will also acceptable\r\n\r\nThanks","title":"How to Sign XML request with DSC certificate in java or android","body":"<p>Actually I'm working on a project where I have a XML code And I want to do Digital Signature of that particular XML.\nCan anyone help me in that?</p>\n<p><code>O60\\&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?\\&gt;\\&lt;Otp uid=&quot;608559509930&quot; ac=&quot;STGPDL0001&quot;    sa=&quot;STGPDL0001&quot; ver=&quot;2.5&quot; txn=&quot;AUANSDL001:20221219170045&quot; lk=&quot;MKfOOHltrbemb9dlt1As6uaMC42HiP3F4Ar6CJTC7s8CoIJRY8U&quot; ts=&quot;2022-12-19T17:00:45&quot; type=&quot;A&quot; xmlns=&quot;http://www.uidai.gov.in/authentication/otp/1.0&quot;\\&gt;\\&lt;Opts ch=&quot;01&quot;/\\&gt;</code></p>\n<p>I have this block of code</p>\n<p>and I want like this</p>\n<p><code>O60&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;&lt;Otp uid=&quot;608559509930&quot; ac=&quot;STGPDL0001&quot; sa=&quot;STGPDL0001&quot; ver=&quot;2.5&quot; txn=&quot;AUANSDL001:20221219162103&quot; lk=&quot;MKfOOHltrbemb9dlt1As6uaMCniP3F4Ar6CJTC7s8CoIJRY8U&quot; ts=&quot;2022-12-19T16:21:03&quot; type=&quot;A&quot; xmlns=&quot;http://www.uidai.gov.in/authentication/otp/1.0&quot;&gt;&lt;Opts ch=&quot;01&quot;/&gt; &lt;Signature xmlns=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&gt;&lt;SignedInfo&gt; &lt;CanonicalizationMethod Algorithm=&quot;http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments&quot;/&gt;&lt;SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;/&gt;&lt;Reference URI=&quot;&quot;&gt;&lt;Transforms&gt;&lt;Transform Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot;/&gt;&lt;/Transforms&gt;&lt;DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;/&gt;&lt;DigestValue&gt;vWmg/+0CO6BsWzMlcne+FRPMGS8=&lt;/DigestValue&gt;&lt;/Reference&gt;&lt;/SignedInfo&gt;&lt;SignatureValue&gt;UD7m2YQStmwaUerMDEdJfhqtCl2V4EZAH6G4pNCYqW2YYTt58yviobqFwGQydDXWJlQFm4GNiMtIZiNwSRweTMPn5X7hvVysL+nIFjR80OaeshUzJbitGHzN4d7KEp3yUlGAhcS66kcrYjH4cS8wQ2X7vi9CgTQ2OIpih1hOp/55YhFvGrXP3brrGR6bkLlwPUbjo2eNsbGDQMnWRoJPT5dEPhdj2a1wRs4/aGyOg/57svlKjoYtM65LLbLYqt6Xqh3vUiemm/2S0Wg+/OptRuiF+QDIqQI/dzIr5zciXk6zHUdzCZgw8CioVcaCyn4bu11XUbxze0d/mgIxGB4Rg==&lt;/SignatureValue&gt;&lt;KeyInfo&gt;&lt;X509Data&gt;&lt;X509SubjectName&gt;OID.2.5.4.65=4497104453fb4a27896fb19cea63c468, L=AGRA, CN=DS PAISALO DIGITAL LIMITED, SERIALNUMBER=89507f93cc805e639f7fc0041c047f367b9b045535f94ddc07fbdef5d8f99fc5, S=UTTAR PRADESH, PostalCode=282002, Phone=52cc883ad0fc4dcf59e2e71efe6e1cfd46456a5493651902bd117e0f30232df8, OU=PAISALO DIGITAL LIMITED, O=PAISALO DIGITAL LIMITED, C=IN&lt;/X509SubjectName&gt; &lt;X509Certificate&gt;encrypted string&lt;/X509Certificate&gt; &lt;/X509Data&gt;&lt;/KeyInfo&gt;&lt;/Signature&gt;&lt;/Otp&gt;</code></p>\n<p>I also tried this with chilkat library but it did not work for me</p>\n<p>if some one have any idea about any type of library which is compatible with android It will too good for me but if some one has solution in java, will also acceptable</p>\n<p>Thanks</p>\n"},{"tags":["java","mysql","hibernate","javafx"],"comments":[{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":2,"creation_date":1672331631,"post_id":74953358,"comment_id":132269875,"body_markdown":"did you see the bottom most exception message, the root cause: &quot;Caused by: java.lang.IllegalArgumentException: Unrecognized JPA persistence.xml XSD version : `3.0`&quot;","body":"did you see the bottom most exception message, the root cause: &quot;Caused by: java.lang.IllegalArgumentException: Unrecognized JPA persistence.xml XSD version : <code>3.0</code>&quot;"},{"owner":{"account_id":25223962,"reputation":11,"user_id":19060080,"display_name":"Nils Burmester"},"score":0,"creation_date":1672332974,"post_id":74953358,"comment_id":132270291,"body_markdown":"I did, but what does it mean?","body":"I did, but what does it mean?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1672334396,"post_id":74953358,"comment_id":132270637,"body_markdown":"Your `persistence.xml` does not look like the [sample in the hibernate documentation](https://docs.jboss.org/hibernate/orm/6.2/quickstart/html_single/#hibernate-gsg-tutorial-jpa-config), it is missing the `version=&quot;2.0&quot;` attribute (among other things).","body":"Your <code>persistence.xml</code> does not look like the <a href=\"https://docs.jboss.org/hibernate/orm/6.2/quickstart/html_single/#hibernate-gsg-tutorial-jpa-config\" rel=\"nofollow noreferrer\">sample in the hibernate documentation</a>, it is missing the <code>version=&quot;2.0&quot;</code> attribute (among other things)."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1672335154,"post_id":74953358,"comment_id":132270839,"body_markdown":"If you do require version 3.0 of jpa persistence, then you need a hibernate version that supports it (6.0+).","body":"If you do require version 3.0 of jpa persistence, then you need a hibernate version that supports it (6.0+)."}],"owner":{"account_id":25223962,"reputation":11,"user_id":19060080,"display_name":"Nils Burmester"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1672329773,"creation_date":1672329634,"question_id":74953358,"body_markdown":"I am testing JavaFX in combination with Hibernate. I want to take user input over a textfield to get a name from the actor table in the sakila database. But every time I try to execute the query, the following errors occur: \r\n\r\n    Exception in thread &quot;JavaFX Application Thread&quot; java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1857)\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1724)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\r\n    \tat javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n    \tat javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\r\n    \tat javafx.base/javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.graphics/javafx.scene.Node.fireEvent(Node.java:8792)\r\n    \tat javafx.controls/javafx.scene.control.Button.fire(Button.java:203)\r\n    \tat javafx.controls/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:208)\r\n    \tat javafx.controls/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\r\n    \tat javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n    \tat javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n    \tat javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n    \tat javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n    \tat javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n    \tat javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\r\n    \tat javafx.base/javafx.event.Event.fireEvent(Event.java:198)\r\n    \tat javafx.graphics/javafx.scene.Scene$MouseHandler.process(Scene.java:3897)\r\n    \tat javafx.graphics/javafx.scene.Scene.processMouseEvent(Scene.java:1878)\r\n    \tat javafx.graphics/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2623)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\r\n    \tat javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\r\n    \tat javafx.graphics/com.sun.glass.ui.View.handleMouseEvent(View.java:557)\r\n    \tat javafx.graphics/com.sun.glass.ui.View.notifyMouse(View.java:943)\r\n    \tat javafx.graphics/com.sun.glass.ui.mac.MacView.notifyMouse(MacView.java:127)\r\n    Caused by: java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:77)\r\n    \tat jdk.internal.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat javafx.base/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:275)\r\n    \tat javafx.fxml/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1854)\r\n    \t... 44 more\r\n    Caused by: javax.persistence.PersistenceException: Unable to locate persistence units\r\n    \tat org.hibernate.jpa.HibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(HibernatePersistenceProvider.java:85)\r\n    \tat org.hibernate.jpa.HibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(HibernatePersistenceProvider.java:61)\r\n    \tat org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:50)\r\n    \tat java.persistence@2.2/javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\r\n    \tat java.persistence@2.2/javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\r\n    \tat com.example.demo/com.example.demo.ActorEntity.getActorName(ActorEntity.java:71)\r\n    \tat com.example.demo/com.example.demo.HelloController.search(HelloController.java:24)\r\n    \t... 55 more\r\n    Caused by: java.lang.IllegalArgumentException: Unrecognized JPA persistence.xml XSD version : `3.0`\r\n    \tat org.hibernate.boot.xsd.ConfigXsdSupport.jpaXsd(ConfigXsdSupport.java:52)\r\n    \tat org.hibernate.jpa.boot.internal.PersistenceXmlParser.validate(PersistenceXmlParser.java:474)\r\n    \tat org.hibernate.jpa.boot.internal.PersistenceXmlParser.loadUrl(PersistenceXmlParser.java:446)\r\n    \tat org.hibernate.jpa.boot.internal.PersistenceXmlParser.parsePersistenceXml(PersistenceXmlParser.java:249)\r\n    \tat org.hibernate.jpa.boot.internal.PersistenceXmlParser.parsePersistenceXml(PersistenceXmlParser.java:240)\r\n    \tat org.hibernate.jpa.boot.internal.PersistenceXmlParser.doResolve(PersistenceXmlParser.java:234)\r\n    \tat org.hibernate.jpa.boot.internal.PersistenceXmlParser.locatePersistenceUnits(PersistenceXmlParser.java:68)\r\n    \tat org.hibernate.jpa.HibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(HibernatePersistenceProvider.java:81)\r\n    \t... 61 more\r\n\r\nthis is my persistence.xml: \r\n\r\n`&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\r\n             version=&quot;3.0&quot;&gt;\r\n  &lt;persistence-unit name=&quot;default&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n\r\n      &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\r\n      &lt;class&gt;com.example.demo.ActorEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.AddressEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.CategoryEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.CityEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.CountryEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.CustomerEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.FilmEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.FilmActorEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.FilmCategoryEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.FilmTextEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.InventoryEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.LanguageEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.PaymentEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.RentalEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.StaffEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.StoreEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.ActorInfoEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.CustomerListEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.FilmListEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.NicerButSlowerFilmListEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.SalesByFilmCategoryEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.SalesByStoreEntity&lt;/class&gt;\r\n      &lt;class&gt;com.example.demo.StaffListEntity&lt;/class&gt;\r\n      &lt;properties&gt;\r\n          &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:mysql://localhost:3306/Sakila&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;root&quot;/&gt;\r\n          &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;&#223;&#167;%Y-Sn_&#223;-DF/n-/%D5-m274-&#167;_9s%&quot;/&gt;\r\n      &lt;/properties&gt;\r\n  &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n\r\n`\r\n\r\nmy hibernate.cfg.xml : `\r\n```\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n    &quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;\r\n    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n&lt;hibernate-configuration&gt;\r\n  &lt;session-factory&gt;\r\n    &lt;property name=&quot;connection.url&quot;/&gt;\r\n    &lt;property name=&quot;connection.driver_class&quot;/&gt;\r\n    &lt;!-- &lt;property name=&quot;connection.username&quot;/&gt; --&gt;\r\n    &lt;!-- &lt;property name=&quot;connection.password&quot;/&gt; --&gt;\r\n\r\n    &lt;!-- DB schema will be updated if needed --&gt;\r\n    &lt;!-- &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt; --&gt;\r\n  &lt;/session-factory&gt;\r\n&lt;/hibernate-configuration&gt;\r\n```\r\n`\r\nthe method that returns the query result: `\r\n```\r\npublic String getActorName(String id) {\r\n        EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;default&quot;);\r\n        EntityManager em = emf.createEntityManager();\r\n        String query = &quot;SELECT first_name, last_name from actor where actor_id =&quot; + id;\r\n        Query actorQuery = em.createNativeQuery(query);\r\n        List&lt;String[]&gt; actorName = actorQuery.getResultList();\r\n        String result = actorName.get(0)[0] + &quot; &quot; + actorName.get(0)[1];\r\n        return result;\r\n    }\r\n}","title":"java.lang.reflect.InvocationTargetException when using Hibernate to get data from a database","body":"<p>I am testing JavaFX in combination with Hibernate. I want to take user input over a textfield to get a name from the actor table in the sakila database. But every time I try to execute the query, the following errors occur:</p>\n<pre><code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.RuntimeException: java.lang.reflect.InvocationTargetException\n    at javafx.fxml/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1857)\n    at javafx.fxml/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1724)\n    at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\n    at javafx.base/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics/javafx.scene.Node.fireEvent(Node.java:8792)\n    at javafx.controls/javafx.scene.control.Button.fire(Button.java:203)\n    at javafx.controls/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:208)\n    at javafx.controls/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)\n    at javafx.base/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\n    at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\n    at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.base/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics/javafx.scene.Scene$MouseHandler.process(Scene.java:3897)\n    at javafx.graphics/javafx.scene.Scene.processMouseEvent(Scene.java:1878)\n    at javafx.graphics/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2623)\n    at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\n    at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\n    at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\n    at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\n    at javafx.graphics/com.sun.glass.ui.View.handleMouseEvent(View.java:557)\n    at javafx.graphics/com.sun.glass.ui.View.notifyMouse(View.java:943)\n    at javafx.graphics/com.sun.glass.ui.mac.MacView.notifyMouse(MacView.java:127)\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:77)\n    at jdk.internal.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.base/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:275)\n    at javafx.fxml/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\n    at javafx.fxml/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1854)\n    ... 44 more\nCaused by: javax.persistence.PersistenceException: Unable to locate persistence units\n    at org.hibernate.jpa.HibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(HibernatePersistenceProvider.java:85)\n    at org.hibernate.jpa.HibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(HibernatePersistenceProvider.java:61)\n    at org.hibernate.jpa.HibernatePersistenceProvider.createEntityManagerFactory(HibernatePersistenceProvider.java:50)\n    at java.persistence@2.2/javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:79)\n    at java.persistence@2.2/javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:54)\n    at com.example.demo/com.example.demo.ActorEntity.getActorName(ActorEntity.java:71)\n    at com.example.demo/com.example.demo.HelloController.search(HelloController.java:24)\n    ... 55 more\nCaused by: java.lang.IllegalArgumentException: Unrecognized JPA persistence.xml XSD version : `3.0`\n    at org.hibernate.boot.xsd.ConfigXsdSupport.jpaXsd(ConfigXsdSupport.java:52)\n    at org.hibernate.jpa.boot.internal.PersistenceXmlParser.validate(PersistenceXmlParser.java:474)\n    at org.hibernate.jpa.boot.internal.PersistenceXmlParser.loadUrl(PersistenceXmlParser.java:446)\n    at org.hibernate.jpa.boot.internal.PersistenceXmlParser.parsePersistenceXml(PersistenceXmlParser.java:249)\n    at org.hibernate.jpa.boot.internal.PersistenceXmlParser.parsePersistenceXml(PersistenceXmlParser.java:240)\n    at org.hibernate.jpa.boot.internal.PersistenceXmlParser.doResolve(PersistenceXmlParser.java:234)\n    at org.hibernate.jpa.boot.internal.PersistenceXmlParser.locatePersistenceUnits(PersistenceXmlParser.java:68)\n    at org.hibernate.jpa.HibernatePersistenceProvider.getEntityManagerFactoryBuilderOrNull(HibernatePersistenceProvider.java:81)\n    ... 61 more\n</code></pre>\n<p>this is my persistence.xml:</p>\n<p>`\n\n</p>\n<pre><code>  &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n  &lt;class&gt;com.example.demo.ActorEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.AddressEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.CategoryEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.CityEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.CountryEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.CustomerEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.FilmEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.FilmActorEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.FilmCategoryEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.FilmTextEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.InventoryEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.LanguageEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.PaymentEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.RentalEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.StaffEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.StoreEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.ActorInfoEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.CustomerListEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.FilmListEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.NicerButSlowerFilmListEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.SalesByFilmCategoryEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.SalesByStoreEntity&lt;/class&gt;\n  &lt;class&gt;com.example.demo.StaffListEntity&lt;/class&gt;\n  &lt;properties&gt;\n      &lt;property name=&quot;hibernate.connection.url&quot; value=&quot;jdbc:mysql://localhost:3306/Sakila&quot;/&gt;\n      &lt;property name=&quot;hibernate.connection.driver_class&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;\n      &lt;property name=&quot;hibernate.connection.username&quot; value=&quot;root&quot;/&gt;\n      &lt;property name=&quot;hibernate.connection.password&quot; value=&quot;ß§%Y-Sn_ß-DF/n-/%D5-m274-§_9s%&quot;/&gt;\n  &lt;/properties&gt;\n</code></pre>\n  \n\n<p>`</p>\n<p>my hibernate.cfg.xml : `</p>\n<pre><code>&lt;?xml version='1.0' encoding='utf-8'?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n    &quot;-//Hibernate/Hibernate Configuration DTD//EN&quot;\n    &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n  &lt;session-factory&gt;\n    &lt;property name=&quot;connection.url&quot;/&gt;\n    &lt;property name=&quot;connection.driver_class&quot;/&gt;\n    &lt;!-- &lt;property name=&quot;connection.username&quot;/&gt; --&gt;\n    &lt;!-- &lt;property name=&quot;connection.password&quot;/&gt; --&gt;\n\n    &lt;!-- DB schema will be updated if needed --&gt;\n    &lt;!-- &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt; --&gt;\n  &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n<p><code>the method that returns the query result:</code></p>\n<pre><code>public String getActorName(String id) {\n        EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;default&quot;);\n        EntityManager em = emf.createEntityManager();\n        String query = &quot;SELECT first_name, last_name from actor where actor_id =&quot; + id;\n        Query actorQuery = em.createNativeQuery(query);\n        List&lt;String[]&gt; actorName = actorQuery.getResultList();\n        String result = actorName.get(0)[0] + &quot; &quot; + actorName.get(0)[1];\n        return result;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa"],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672329589,"creation_date":1672329589,"answer_id":74953345,"question_id":74951906,"body_markdown":"If all of your relationships are Lazy (as they normally should be), then `JsonViews` is the right solution.\r\n\r\nWhenever the joins are lazy, there is no query for the child data until the field has been accessed. So if the JsonView on `/` excludes the `roles` member of the `User` object, then the Json serializer will never call `user.getRoles()`, so the query is never run.\r\n\r\nBut if the JsonView for `/id` *does* include `roles`, then the serializer will have to call `user.getRoles()`, and at that time the query is run.\r\n\r\nIf you need __even more__ optimization, then you can also attach an `EntityGraph` to a function on your repository like this:\r\n```Java\r\npublic class UserRepository&lt;User,Long&gt; {\r\n\r\n  @EntityGraph(attributePaths = {&quot;roles&quot;, &quot;communities&quot;, &quot;profiles&quot;})\r\n  User getDetailedUserById(Long id);\r\n}\r\n```\r\nThis will force Eager loading for those otherwise lazy attributes, which means there will only be one query run.","title":"Spring Boot JPA -&gt; Lazy Loading","body":"<p>If all of your relationships are Lazy (as they normally should be), then <code>JsonViews</code> is the right solution.</p>\n<p>Whenever the joins are lazy, there is no query for the child data until the field has been accessed. So if the JsonView on <code>/</code> excludes the <code>roles</code> member of the <code>User</code> object, then the Json serializer will never call <code>user.getRoles()</code>, so the query is never run.</p>\n<p>But if the JsonView for <code>/id</code> <em>does</em> include <code>roles</code>, then the serializer will have to call <code>user.getRoles()</code>, and at that time the query is run.</p>\n<p>If you need <strong>even more</strong> optimization, then you can also attach an <code>EntityGraph</code> to a function on your repository like this:</p>\n<pre><code>public class UserRepository&lt;User,Long&gt; {\n\n  @EntityGraph(attributePaths = {&quot;roles&quot;, &quot;communities&quot;, &quot;profiles&quot;})\n  User getDetailedUserById(Long id);\n}\n</code></pre>\n<p>This will force Eager loading for those otherwise lazy attributes, which means there will only be one query run.</p>\n"}],"owner":{"account_id":13975330,"reputation":149,"user_id":10092887,"display_name":"Flinty926"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74953345,"answer_count":1,"score":0,"last_activity_date":1672329589,"creation_date":1672321547,"question_id":74951906,"body_markdown":"I&#39;m currently in the process of migrating an API built in Laravel/PHP to Spring Boot and had a question on best practice/how to approach the problem.\r\n\r\nIn laravel, I have a `User` model, with 3 child relationships: `roles`, `communities` and `profiles`. In laravel, I&#39;d use Resources to dictate the data I&#39;m returning in an API response, for example a `GET /id` would return the user with all of the child relationships, where as on a `GET /` list operation, it would return the base model with no child relationships.\r\n\r\nWhat is the best way to replicate this with Spring Boot JPA? I had looked into Jackson `JsonViews`, however this only seems to reduce the object returned by the API, rather than limiting the amount of SQL queries being ran. \r\n\r\nAny suggestions are appreciated. Thanks! ","title":"Spring Boot JPA -&gt; Lazy Loading","body":"<p>I'm currently in the process of migrating an API built in Laravel/PHP to Spring Boot and had a question on best practice/how to approach the problem.</p>\n<p>In laravel, I have a <code>User</code> model, with 3 child relationships: <code>roles</code>, <code>communities</code> and <code>profiles</code>. In laravel, I'd use Resources to dictate the data I'm returning in an API response, for example a <code>GET /id</code> would return the user with all of the child relationships, where as on a <code>GET /</code> list operation, it would return the base model with no child relationships.</p>\n<p>What is the best way to replicate this with Spring Boot JPA? I had looked into Jackson <code>JsonViews</code>, however this only seems to reduce the object returned by the API, rather than limiting the amount of SQL queries being ran.</p>\n<p>Any suggestions are appreciated. Thanks!</p>\n"},{"tags":["java","gradle","java-8"],"owner":{"account_id":19593603,"reputation":317,"user_id":14340115,"display_name":"qu4lizz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672329568,"creation_date":1672329568,"question_id":74953341,"body_markdown":"I have dependencies in `build.gradle`:\r\n\r\n    dependencies {\r\n        implementation &#39;com.google.code.gson:gson:2.10&#39;\r\n        testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\r\n        testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\r\n        implementation &#39;org.danilopianini:gson-extras:1.1.0&#39;\r\n    }\r\n\r\nIn `module-info.java` I have:\r\n\r\n    module qu4lizz.taskscheduler {\r\n        requires javafx.controls;\r\n        requires javafx.fxml;\r\n        requires java.desktop;\r\n        requires com.google.gson;\r\n        requires gson.extras;\r\n    \r\n        opens qu4lizz.taskscheduler.gui to javafx.fxml;\r\n        opens qu4lizz.taskscheduler.my_task to javafx.fxml;\r\n        exports qu4lizz.taskscheduler.gui;\r\n        exports qu4lizz.taskscheduler.my_task;\r\n    }\r\nWhen I try to build this project I get error:\r\n\r\n    Error occurred during initialization of boot layer\r\n    java.lang.module.FindException: Module gson.extras not found, required by qu4lizz.taskscheduler\r\n    :GUI.main() (Thread[Execution worker Thread 4,5,main]) completed. Took 0.175 secs.\r\n    \r\n    Execution failed for task &#39;:GUI.main()&#39;.\r\n    &gt; Process &#39;command &#39;/home/qu4lizz/.jdks/corretto-17.0.4.1/bin/java&#39;&#39; finished with non-zero exit value 1\r\nI don&#39;t have any idea how to solve this. ","title":"How to solve java.lang.module.FindException: Module gson.extras not found?","body":"<p>I have dependencies in <code>build.gradle</code>:</p>\n<pre><code>dependencies {\n    implementation 'com.google.code.gson:gson:2.10'\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\n    implementation 'org.danilopianini:gson-extras:1.1.0'\n}\n</code></pre>\n<p>In <code>module-info.java</code> I have:</p>\n<pre><code>module qu4lizz.taskscheduler {\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires java.desktop;\n    requires com.google.gson;\n    requires gson.extras;\n\n    opens qu4lizz.taskscheduler.gui to javafx.fxml;\n    opens qu4lizz.taskscheduler.my_task to javafx.fxml;\n    exports qu4lizz.taskscheduler.gui;\n    exports qu4lizz.taskscheduler.my_task;\n}\n</code></pre>\n<p>When I try to build this project I get error:</p>\n<pre><code>Error occurred during initialization of boot layer\njava.lang.module.FindException: Module gson.extras not found, required by qu4lizz.taskscheduler\n:GUI.main() (Thread[Execution worker Thread 4,5,main]) completed. Took 0.175 secs.\n\nExecution failed for task ':GUI.main()'.\n&gt; Process 'command '/home/qu4lizz/.jdks/corretto-17.0.4.1/bin/java'' finished with non-zero exit value 1\n</code></pre>\n<p>I don't have any idea how to solve this.</p>\n"},{"tags":["java","hibernate","annotation-processing","java-17"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1672323080,"post_id":74949932,"comment_id":132267325,"body_markdown":"If you have a single javac call that reproduces the problem, can you provide a minimal [mre]? Maybe a tiny gradle build file with a single source file or something like that?","body":"If you have a single javac call that reproduces the problem, can you provide a minimal <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Maybe a tiny gradle build file with a single source file or something like that?"},{"owner":{"account_id":963620,"reputation":2688,"user_id":987457,"accept_rate":100,"display_name":"Jonathan"},"score":1,"creation_date":1672325364,"post_id":74949932,"comment_id":132267997,"body_markdown":"Hi @JoachimSauer, currently working on it. It seems rather strange, but I&#39;ll rather update the question than doing a lengthy comment.","body":"Hi @JoachimSauer, currently working on it. It seems rather strange, but I&#39;ll rather update the question than doing a lengthy comment."}],"answers":[{"tags":[],"owner":{"account_id":963620,"reputation":2688,"user_id":987457,"accept_rate":100,"display_name":"Jonathan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672329298,"creation_date":1672326738,"answer_id":74952845,"question_id":74949932,"body_markdown":"All right, that was unexpected.\r\nI condensed it down to a minimal example. Required for this issue to hit is a call similar to this one:\r\n\r\n    javac \\\r\n      -processorpath hibernate-jpamodelgen-6.1.6.Final.jar\\\r\n      -classpath hibernate-core-6.1.6.Final.jar\\\r\n      BaseEntity.java \r\n\r\nThe additional condition, that triggers this issue is, that BaseEntity has to have a dysfunctional `@Type` annotation. `@Type` has changed its signature from Hibernate 5 to Hibernate 6 and my entities were not yet up to date. \r\n\r\nInterestingly enough, neither a generell compile error nor a specific one with other annotations (I tried a broken spring-Repository one) will stop the modelgen from working (as won&#39;t the fact, that the processorpath is incomplete in the example).\r\n\r\nI will report this as an issue to the hibernate project, as I believe, the modelgen should react more graceful in such a situation.\r\n\r\nReported as bug here:\r\nhttps://hibernate.atlassian.net/browse/HHH-15946","title":"APT-generators stop working after update to Jakarta/Java17","body":"<p>All right, that was unexpected.\nI condensed it down to a minimal example. Required for this issue to hit is a call similar to this one:</p>\n<pre><code>javac \\\n  -processorpath hibernate-jpamodelgen-6.1.6.Final.jar\\\n  -classpath hibernate-core-6.1.6.Final.jar\\\n  BaseEntity.java \n</code></pre>\n<p>The additional condition, that triggers this issue is, that BaseEntity has to have a dysfunctional <code>@Type</code> annotation. <code>@Type</code> has changed its signature from Hibernate 5 to Hibernate 6 and my entities were not yet up to date.</p>\n<p>Interestingly enough, neither a generell compile error nor a specific one with other annotations (I tried a broken spring-Repository one) will stop the modelgen from working (as won't the fact, that the processorpath is incomplete in the example).</p>\n<p>I will report this as an issue to the hibernate project, as I believe, the modelgen should react more graceful in such a situation.</p>\n<p>Reported as bug here:\n<a href=\"https://hibernate.atlassian.net/browse/HHH-15946\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-15946</a></p>\n"}],"owner":{"account_id":963620,"reputation":2688,"user_id":987457,"accept_rate":100,"display_name":"Jonathan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74952845,"answer_count":1,"score":2,"last_activity_date":1672329298,"creation_date":1672309648,"question_id":74949932,"body_markdown":"I am working on a rather large project consisting of Spring and JavaEE-components. Right now, I am updating from javax to jakartaEE and also from Java 11 to 17. The build-tool is gradle with several modules, which depend on one another. I have already changed things to make the first modules compile and am now at the module containing the JPA entities.\r\n\r\nSuddenly I find myself in a situation, where the metamodel is no longer created.\r\n\r\nMy basic assumption here is, that gradle itself is not participating in the generation of the Metamodel. Instead, the APT generators are handed over to javac which then recognizes them and executes them prior to compilation. \r\nI have debugged the gradle execution and the processorpath option of javac contains the jpa-metamodel.jar as expected.\r\nTherefore, I assume, I am rather looking at a Java than a Gradle problem.\r\n\r\nI did a very simple POC project with the same Java/Hibernate versions and there it worked. \r\nWith this project, I was able to verify, that the metamodel-generator issues a log statement. This statement is also issued, if the source code does not compile. So, it seems to be an indicator whether the modelgen is working at all.\r\nThis log message is not written in my main project.\r\n\r\nAlso, next to the jpa-metamodel there are two other apt generators at work. Both show similar behavior, i.e. printing out a log line when working but not in my updated project.\r\nThis brings me to the assumption, that it is no problem with the jpa-metamodel-gen but rather with APT itself.\r\n\r\nWhere should I be looking next?\r\n\r\n**EDIT**\r\n\r\nI have done some more researching. Via gradle --debug I was able to extract the actual `javac` call. Executing that from console shows the same error.\r\n\r\nI reduced the number of elements to be compiled. It seems that putting an actual entity on the list of things to be compiled the APT generator goes dormant. Putting only a `MappedEntity` supertype on the list will still leave the APT active. WTF?\r\n\r\n**EDIT2**\r\n\r\nI am currently on my way to a reproducable exmaple. I&#39;ve cut through a lot of business-related libs and right now, what I have is a havac call, where `-processorpath` only mentions the jpamodelgen and `-classpath` only mentions hibernate core (both in Version 6.1.6).\r\n\r\nIn this constellation the modelgen does not work. As soon as I eliminate the hibernate-core, it works.\r\n\r\nNext step: I&#39;ll strip down the entities.","title":"APT-generators stop working after update to Jakarta/Java17","body":"<p>I am working on a rather large project consisting of Spring and JavaEE-components. Right now, I am updating from javax to jakartaEE and also from Java 11 to 17. The build-tool is gradle with several modules, which depend on one another. I have already changed things to make the first modules compile and am now at the module containing the JPA entities.</p>\n<p>Suddenly I find myself in a situation, where the metamodel is no longer created.</p>\n<p>My basic assumption here is, that gradle itself is not participating in the generation of the Metamodel. Instead, the APT generators are handed over to javac which then recognizes them and executes them prior to compilation.\nI have debugged the gradle execution and the processorpath option of javac contains the jpa-metamodel.jar as expected.\nTherefore, I assume, I am rather looking at a Java than a Gradle problem.</p>\n<p>I did a very simple POC project with the same Java/Hibernate versions and there it worked.\nWith this project, I was able to verify, that the metamodel-generator issues a log statement. This statement is also issued, if the source code does not compile. So, it seems to be an indicator whether the modelgen is working at all.\nThis log message is not written in my main project.</p>\n<p>Also, next to the jpa-metamodel there are two other apt generators at work. Both show similar behavior, i.e. printing out a log line when working but not in my updated project.\nThis brings me to the assumption, that it is no problem with the jpa-metamodel-gen but rather with APT itself.</p>\n<p>Where should I be looking next?</p>\n<p><strong>EDIT</strong></p>\n<p>I have done some more researching. Via gradle --debug I was able to extract the actual <code>javac</code> call. Executing that from console shows the same error.</p>\n<p>I reduced the number of elements to be compiled. It seems that putting an actual entity on the list of things to be compiled the APT generator goes dormant. Putting only a <code>MappedEntity</code> supertype on the list will still leave the APT active. WTF?</p>\n<p><strong>EDIT2</strong></p>\n<p>I am currently on my way to a reproducable exmaple. I've cut through a lot of business-related libs and right now, what I have is a havac call, where <code>-processorpath</code> only mentions the jpamodelgen and <code>-classpath</code> only mentions hibernate core (both in Version 6.1.6).</p>\n<p>In this constellation the modelgen does not work. As soon as I eliminate the hibernate-core, it works.</p>\n<p>Next step: I'll strip down the entities.</p>\n"},{"tags":["java","hana"],"answers":[{"tags":[],"owner":{"account_id":6655693,"reputation":3515,"user_id":5136580,"display_name":"Mikel Rychliski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586279908,"creation_date":1586279908,"answer_id":61085686,"question_id":60739606,"body_markdown":"The HANA 2.4.x JDBC driver supports JRE 6 **and later**","title":"Does ngdbc.jar (2.4.67 or above) support JRE 11?","body":"<p>The HANA 2.4.x JDBC driver supports JRE 6 <strong>and later</strong></p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672328908,"creation_date":1672328908,"answer_id":74953225,"question_id":60739606,"body_markdown":"Yes, it does. Note that ngdbc.jar is a [Multi-Release JAR file](https://openjdk.org/jeps/238) and as such supports multiple versions of Java. Learn more from this [developers.sap.com tutorial](https://developers.sap.com/tutorials/hana-clients-jdbc.html#0738dfee-820b-4926-b9d9-8fe3005d2b47).","title":"Does ngdbc.jar (2.4.67 or above) support JRE 11?","body":"<p>Yes, it does. Note that ngdbc.jar is a <a href=\"https://openjdk.org/jeps/238\" rel=\"nofollow noreferrer\">Multi-Release JAR file</a> and as such supports multiple versions of Java. Learn more from this <a href=\"https://developers.sap.com/tutorials/hana-clients-jdbc.html#0738dfee-820b-4926-b9d9-8fe3005d2b47\" rel=\"nofollow noreferrer\">developers.sap.com tutorial</a>.</p>\n"}],"owner":{"account_id":14301794,"reputation":41,"user_id":10330947,"display_name":"Asha Kabra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1672328908,"creation_date":1584534535,"question_id":60739606,"body_markdown":"Does ngdbc.jar (2.4.67 or above) supports JRE 11? (Manifest mentions usage of JAVA 6)","title":"Does ngdbc.jar (2.4.67 or above) support JRE 11?","body":"<p>Does ngdbc.jar (2.4.67 or above) supports JRE 11? (Manifest mentions usage of JAVA 6)</p>\n"},{"tags":["java","firebase","google-cloud-firestore","java-record"],"answers":[{"tags":[],"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1672328830,"creation_date":1672328830,"answer_id":74953205,"question_id":74951241,"body_markdown":"The Firebase Android SDK has built-in support for serializing plain-old Java objects that adhere to JavaBean conventions only. It indeed uses run-time type information to inspect such objects and map their properties to/from the snapshots in the database.\r\n\r\nThe Firebase SDKs have no built-in knowledge of Java Record classes. If you want to serialize/deserialize such classes you&#39;ll have to write code for that yourself, outside of the Firebase SDK.","title":"Firebase and Using Records Structure on Java 17","body":"<p>The Firebase Android SDK has built-in support for serializing plain-old Java objects that adhere to JavaBean conventions only. It indeed uses run-time type information to inspect such objects and map their properties to/from the snapshots in the database.</p>\n<p>The Firebase SDKs have no built-in knowledge of Java Record classes. If you want to serialize/deserialize such classes you'll have to write code for that yourself, outside of the Firebase SDK.</p>\n"}],"owner":{"account_id":21018351,"reputation":63,"user_id":15445291,"display_name":"Daniel Gini"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74953205,"answer_count":1,"score":1,"last_activity_date":1672328830,"creation_date":1672317524,"question_id":74951241,"body_markdown":"I am facing an issue, I wanted to learn from it if anyone has a solution.\r\n\r\nI updated my system from Java 11 to 17 and changed some of my POJO from a normal class with setters/getters to records (first introduced on Java 14).\r\n\r\nProblem now is when trying to store these POJOs on my Firestore database, it throws the exception &quot;java.lang.RuntimeException: No properties to serialize found on class XXX&quot;,\r\n\r\nI understand, it makes sense because a Record in Java doesn&#39;t have the concept of setters as they are immutable therefore the fields are set once the POJO is created using the all Args constructor but when Firestore does the mapping to a document reference, it does it via setters, hence the exception. \r\n\r\nConclusion, I had to go back to normal classes for POJOs where I can have the setters instead of using records, but I keep thinking there should be a way to use Records, maybe way to change the how Firestore makes the mappings... any suggestion?\r\n\r\nThanks","title":"Firebase and Using Records Structure on Java 17","body":"<p>I am facing an issue, I wanted to learn from it if anyone has a solution.</p>\n<p>I updated my system from Java 11 to 17 and changed some of my POJO from a normal class with setters/getters to records (first introduced on Java 14).</p>\n<p>Problem now is when trying to store these POJOs on my Firestore database, it throws the exception &quot;java.lang.RuntimeException: No properties to serialize found on class XXX&quot;,</p>\n<p>I understand, it makes sense because a Record in Java doesn't have the concept of setters as they are immutable therefore the fields are set once the POJO is created using the all Args constructor but when Firestore does the mapping to a document reference, it does it via setters, hence the exception.</p>\n<p>Conclusion, I had to go back to normal classes for POJOs where I can have the setters instead of using records, but I keep thinking there should be a way to use Records, maybe way to change the how Firestore makes the mappings... any suggestion?</p>\n<p>Thanks</p>\n"},{"tags":["java","gradle","build","artifactory","artifact"],"owner":{"account_id":9678208,"reputation":43,"user_id":7180890,"display_name":"spark101"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":214,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672328827,"creation_date":1671642199,"question_id":74879410,"body_markdown":"Need help figuring out why my single module build script doesn&#39;t publish jar to JFrog artifactory. Here is my build gradle file\r\n\r\n```\r\nbuildscript {\r\n    ext {\r\n        springBootVersion = &#39;2.1.1.RELEASE&#39;\r\n    }\r\n    repositories {\r\n        jcenter()\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath(group: &#39;org.jfrog.buildinfo&#39;, name: &#39;build-info-extractor-gradle&#39;, version: &#39;4.15.1&#39;)\r\n    }\r\n}\r\napply plugin:&#39;com.jfrog.artifactory&#39;\r\napply plugin: &#39;java&#39;\r\napply plugin: &quot;maven-publish&quot;\r\n\r\ngroup = &#39;com.&lt;company_name&gt;.&lt;app_name&gt;.api&#39;\r\nversion = &#39;1.0.0&#39;\r\n\r\njar {\r\n    baseName = &#39;&lt;app_name&gt;-client&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    maven {\r\n        url &quot;https://artifactory.build.&lt;companyname&gt;.com/artifactory/ext-snapshot-local/&quot;\r\n        credentials {\r\n            username &lt;artifactory_user&gt;\r\n            password &lt;artifactory_password&gt;\r\n        }\r\n    }\r\n    maven {\r\n        url &quot;https://artifactory.build.&lt;companyname&gt;.com/artifactory/ext-release-local/&quot;\r\n        credentials {\r\n            username &lt;artifactory_user&gt;\r\n            password &lt;artifactory_password&gt;\r\n        }\r\n    }\r\n    maven { url &quot;http://repo.spring.io/release&quot; }\r\n}\r\n\r\npublishing {\r\n    publications {\r\n        mavenJava(MavenPublication) {\r\n            from components.java\r\n        }\r\n    }\r\n}\r\nartifactory {\r\n    contextUrl = &quot;$repository_url&quot;\r\n    publish{\r\n        repository {\r\n            username = &quot;$repoUser&quot;\r\n            password  = &quot;$repoPassword&quot;\r\n            maven = true\r\n        }\r\n        defaults {\r\n            publications(&#39;mavenJava&#39;)\r\n            publishArtifacts = true\r\n            publishPom = true\r\n        }\r\n    }\r\n}\r\ndependencies {\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-web:2.1.1.RELEASE&#39;){\r\n        exclude module: &#39;mysql:mysql-connector-java:5.1.47&#39;\r\n    }\r\n    ...\r\n   ...\r\n}\r\n```\r\nBelow is the output and gradle command I m using..\r\n\r\n    gradle clean build jar artifactoryPublish\r\n\r\n```\r\n&gt; Task :extractModuleInfo \r\nNo publisher config found for project: &lt;app_name&gt;\r\n\r\n&gt; Task :artifactoryDeploy \r\nDeploying build descriptor to: https://artifactory-private.build.&lt;company_name&gt;.com/artifactory/api/build\r\nBuild successfully deployed. Browse it in Artifactory under https://artifactory-private.build.&lt;company_name&gt;.com/artifactory/webapp/builds/&lt;app_name&gt;/&lt;random_number&gt;\r\n```","title":"Gradle build does not publish jar to artifactory","body":"<p>Need help figuring out why my single module build script doesn't publish jar to JFrog artifactory. Here is my build gradle file</p>\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.1.1.RELEASE'\n    }\n    repositories {\n        jcenter()\n        mavenCentral()\n    }\n    dependencies {\n        classpath(group: 'org.jfrog.buildinfo', name: 'build-info-extractor-gradle', version: '4.15.1')\n    }\n}\napply plugin:'com.jfrog.artifactory'\napply plugin: 'java'\napply plugin: &quot;maven-publish&quot;\n\ngroup = 'com.&lt;company_name&gt;.&lt;app_name&gt;.api'\nversion = '1.0.0'\n\njar {\n    baseName = '&lt;app_name&gt;-client'\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        url &quot;https://artifactory.build.&lt;companyname&gt;.com/artifactory/ext-snapshot-local/&quot;\n        credentials {\n            username &lt;artifactory_user&gt;\n            password &lt;artifactory_password&gt;\n        }\n    }\n    maven {\n        url &quot;https://artifactory.build.&lt;companyname&gt;.com/artifactory/ext-release-local/&quot;\n        credentials {\n            username &lt;artifactory_user&gt;\n            password &lt;artifactory_password&gt;\n        }\n    }\n    maven { url &quot;http://repo.spring.io/release&quot; }\n}\n\npublishing {\n    publications {\n        mavenJava(MavenPublication) {\n            from components.java\n        }\n    }\n}\nartifactory {\n    contextUrl = &quot;$repository_url&quot;\n    publish{\n        repository {\n            username = &quot;$repoUser&quot;\n            password  = &quot;$repoPassword&quot;\n            maven = true\n        }\n        defaults {\n            publications('mavenJava')\n            publishArtifacts = true\n            publishPom = true\n        }\n    }\n}\ndependencies {\n    implementation('org.springframework.boot:spring-boot-starter-web:2.1.1.RELEASE'){\n        exclude module: 'mysql:mysql-connector-java:5.1.47'\n    }\n    ...\n   ...\n}\n</code></pre>\n<p>Below is the output and gradle command I m using..</p>\n<pre><code>gradle clean build jar artifactoryPublish\n</code></pre>\n<pre><code>&gt; Task :extractModuleInfo \nNo publisher config found for project: &lt;app_name&gt;\n\n&gt; Task :artifactoryDeploy \nDeploying build descriptor to: https://artifactory-private.build.&lt;company_name&gt;.com/artifactory/api/build\nBuild successfully deployed. Browse it in Artifactory under https://artifactory-private.build.&lt;company_name&gt;.com/artifactory/webapp/builds/&lt;app_name&gt;/&lt;random_number&gt;\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-authentication"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1672388928,"post_id":74951638,"comment_id":132280053,"body_markdown":"So you basically say that you get &quot;Login Successful&quot; after 10 minutes after you click the sign-in button?","body":"So you basically say that you get &quot;Login Successful&quot; after 10 minutes after you click the sign-in button?"}],"owner":{"account_id":14554190,"reputation":89,"user_id":10512216,"display_name":"Jo&#227;o Teixeira"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672328528,"creation_date":1672320129,"question_id":74951638,"body_markdown":"I&#39;m building an Android app using Java in Android Studio. I&#39;m trying to implement authentication (login/register) using Firebase. However, both these operations are taking well over 10 minutes to perform. Is this issue code related or can it be something else? I have no idea what to look into. Any direction is much appreciated.\r\n\r\nCode for login:\r\n```\r\nmAuth.signInWithEmailAndPassword(email, password)\r\n    .addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\r\n        @Override\r\n        public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n            if (task.isSuccessful()) {\r\n                progressBar.setVisibility(View.GONE);\r\n                Toast.makeText(Login.this, &quot;Login Successful.&quot;,\r\n                        Toast.LENGTH_SHORT).show();\r\n                Intent intent = new Intent(getApplicationContext(), MainActivity.class);\r\n                startActivity(intent);\r\n                finish();\r\n\r\n            } else {\r\n                // If sign in fails, display a message to the user.\r\n                Toast.makeText(Login.this, &quot;Authentication failed.&quot;,\r\n                        Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n    });\r\n```\r\n\r\nCode for registration:\r\n\r\n    mAuth.createUserWithEmailAndPassword(email, password)\r\n        .addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                Log.d(&quot;FireB&quot;, &quot;Completed&quot;);\r\n                progressBar.setVisibility(View.GONE);\r\n                if (task.isSuccessful()) {\r\n                    Log.d(&quot;FireB&quot;, &quot;:D&quot;);\r\n                    Toast.makeText(Registration.this, &quot;Account created.&quot;, Toast.LENGTH_SHORT).show();\r\n                    Intent intent = new Intent(getApplicationContext(), Login.class);\r\n                    startActivity(intent);\r\n                    finish();\r\n\r\n                } else {\r\n                    // If sign in fails, display a message to the user.\r\n                    Log.d(&quot;FireB&quot;, &quot;sowwy :((((&quot;);\r\n                    Toast.makeText(Registration.this, &quot;Authentication failed.&quot;,\r\n                            Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n\r\n","title":"Firebase authentication is taking over 10 minutes","body":"<p>I'm building an Android app using Java in Android Studio. I'm trying to implement authentication (login/register) using Firebase. However, both these operations are taking well over 10 minutes to perform. Is this issue code related or can it be something else? I have no idea what to look into. Any direction is much appreciated.</p>\n<p>Code for login:</p>\n<pre><code>mAuth.signInWithEmailAndPassword(email, password)\n    .addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n            if (task.isSuccessful()) {\n                progressBar.setVisibility(View.GONE);\n                Toast.makeText(Login.this, &quot;Login Successful.&quot;,\n                        Toast.LENGTH_SHORT).show();\n                Intent intent = new Intent(getApplicationContext(), MainActivity.class);\n                startActivity(intent);\n                finish();\n\n            } else {\n                // If sign in fails, display a message to the user.\n                Toast.makeText(Login.this, &quot;Authentication failed.&quot;,\n                        Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n</code></pre>\n<p>Code for registration:</p>\n<pre><code>mAuth.createUserWithEmailAndPassword(email, password)\n    .addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n            Log.d(&quot;FireB&quot;, &quot;Completed&quot;);\n            progressBar.setVisibility(View.GONE);\n            if (task.isSuccessful()) {\n                Log.d(&quot;FireB&quot;, &quot;:D&quot;);\n                Toast.makeText(Registration.this, &quot;Account created.&quot;, Toast.LENGTH_SHORT).show();\n                Intent intent = new Intent(getApplicationContext(), Login.class);\n                startActivity(intent);\n                finish();\n\n            } else {\n                // If sign in fails, display a message to the user.\n                Log.d(&quot;FireB&quot;, &quot;sowwy :((((&quot;);\n                Toast.makeText(Registration.this, &quot;Authentication failed.&quot;,\n                        Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n</code></pre>\n"},{"tags":["java","webrtc","sdp","candidate","ice4j"],"answers":[{"tags":[],"owner":{"account_id":2569702,"reputation":16087,"user_id":4352772,"display_name":"Philipp Hancke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1672327999,"creation_date":1672327999,"answer_id":74953054,"question_id":74943232,"body_markdown":"`generation`, `ufrag` and `network-id` are non-standard extensions used by Google&#39;s libwebrtc (see [RFC 5245](https://www.rfc-editor.org/rfc/rfc5245#section-15.1) for the standard ones which may be followed by additional key-value pairs) which is used by Chrome and Safari.\r\nThey can be ignored, other browsers like Firefox don&#39;t emit them either.\r\n\r\n","title":"What are required parameters for an ICE candidate?","body":"<p><code>generation</code>, <code>ufrag</code> and <code>network-id</code> are non-standard extensions used by Google's libwebrtc (see <a href=\"https://www.rfc-editor.org/rfc/rfc5245#section-15.1\" rel=\"nofollow noreferrer\">RFC 5245</a> for the standard ones which may be followed by additional key-value pairs) which is used by Chrome and Safari.\nThey can be ignored, other browsers like Firefox don't emit them either.</p>\n"}],"owner":{"account_id":7295,"reputation":23914,"user_id":12631,"accept_rate":57,"display_name":"Horcrux7"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74953054,"answer_count":1,"score":0,"last_activity_date":1672327999,"creation_date":1672248370,"question_id":74943232,"body_markdown":"If I call toString() from a org.ice4j.ice.LocalCandidate object then I receive an output like:\r\n\r\n    candidate:1 1 udp 2130706431 192.168.233.1 10000 typ host\r\n\r\n\r\nThe candidate which I receive form a browser look different:\r\n\r\n    2791736470 1 udp 2122063615 192.168.233.1 59763 typ host generation 0 ufrag 8pZ1 network-id 1\r\n\r\nWe see additional values for `generation`, `ufrag` and `network-id`. Must I set this values or is this only a nice to have? If I must set it, where can I find the values for it?","title":"What are required parameters for an ICE candidate?","body":"<p>If I call toString() from a org.ice4j.ice.LocalCandidate object then I receive an output like:</p>\n<pre><code>candidate:1 1 udp 2130706431 192.168.233.1 10000 typ host\n</code></pre>\n<p>The candidate which I receive form a browser look different:</p>\n<pre><code>2791736470 1 udp 2122063615 192.168.233.1 59763 typ host generation 0 ufrag 8pZ1 network-id 1\n</code></pre>\n<p>We see additional values for <code>generation</code>, <code>ufrag</code> and <code>network-id</code>. Must I set this values or is this only a nice to have? If I must set it, where can I find the values for it?</p>\n"},{"tags":["java","hibernate","jpa","criteria","jparepository"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1672326819,"post_id":74952441,"comment_id":132268423,"body_markdown":"You&#39;ll have to explain what you are seeing multiple queries for exactly. As this is a OneToMany from Product-&gt;Child, you should only see 1 query to bring in the many children in that relationship. If you are reading in many products and so seeing N queries when iterating over the results and fetching their children, you&#39;ll want to read http://briaguy.blogspot.com/2017/05/jpa-fetch-behavior-eclipselink-and.html which has a good discussion on various options on what is called batch fetching in eclipseLink, or use fetching in the query by specifying fetch joins or a load graph","body":"You&#39;ll have to explain what you are seeing multiple queries for exactly. As this is a OneToMany from Product-&gt;Child, you should only see 1 query to bring in the many children in that relationship. If you are reading in many products and so seeing N queries when iterating over the results and fetching their children, you&#39;ll want to read <a href=\"http://briaguy.blogspot.com/2017/05/jpa-fetch-behavior-eclipselink-and.html\" rel=\"nofollow noreferrer\">briaguy.blogspot.com/2017/05/&hellip;</a> which has a good discussion on various options on what is called batch fetching in eclipseLink, or use fetching in the query by specifying fetch joins or a load graph"}],"answers":[{"tags":[],"owner":{"account_id":11084453,"reputation":211,"user_id":8138689,"display_name":"Satyajit Bhatt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672327642,"creation_date":1672327642,"answer_id":74952996,"question_id":74952441,"body_markdown":"It&#39;s called N+1 problem in hibernate, You can solve it by using below methodologies...\r\n\r\n    -&gt; By using JOIN FETCH\r\n    -&gt; By using @EntityGraph and Projection\r\n\r\nBecause JOIN FETCH will make always single query for multiple tables using join internally.","title":"JPA Hibernate Change Fetch type from Lazy To Eager for multiple child entities based on condition","body":"<p>It's called N+1 problem in hibernate, You can solve it by using below methodologies...</p>\n<pre><code>-&gt; By using JOIN FETCH\n-&gt; By using @EntityGraph and Projection\n</code></pre>\n<p>Because JOIN FETCH will make always single query for multiple tables using join internally.</p>\n"}],"owner":{"account_id":2779837,"reputation":3018,"user_id":2392564,"accept_rate":63,"display_name":"Ashish Aggarwal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672327642,"creation_date":1672324577,"question_id":74952441,"body_markdown":"Parent Entity \r\n\r\n - Product\r\n\r\n       public class ProductEntity extends BaseEntity {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t@Id\r\n    \t@Column(name = &quot;id&quot;, nullable = false)\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n    \r\n    \t@Column(name = &quot;product_uuid&quot;, nullable = false)\r\n    \tprivate String uuid;\r\n    \r\n    \t@Column(name = &quot;sku&quot;, nullable = true)\r\n    \tprivate Long sku;\r\n    \r\n    \t@Column(name = &quot;name&quot;, nullable = false)\r\n    \tprivate String name;\r\n    \r\n    \t@OneToMany(mappedBy = &quot;product&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    \tprivate Set&lt;ProductInfoEntity&gt; infos;\r\n    \t\r\n    \t@OneToMany(mappedBy = &quot;product&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    \tprivate Set&lt;ProductTaxEntity&gt; taxes;\r\n       }\r\n\r\nChild Entity \r\n - Info\r\n - Tax\r\n\r\nOnly few cases child entities required to fetch eagerly. Is there any way to change child entity fetch type from lazy to eager in either of the framework **JPARepository/ CriteriaQuery/SQL**\r\n\r\nTried almost every solution on stack overflow but every-time code will hit many queries to retrieve child entities \r\n\r\n\r\n","title":"JPA Hibernate Change Fetch type from Lazy To Eager for multiple child entities based on condition","body":"<p>Parent Entity</p>\n<ul>\n<li><p>Product</p>\n<pre><code>public class ProductEntity extends BaseEntity {\n\n private static final long serialVersionUID = 1L;\n\n @Id\n @Column(name = &quot;id&quot;, nullable = false)\n @GeneratedValue(strategy = GenerationType.IDENTITY)\n private Long id;\n\n @Column(name = &quot;product_uuid&quot;, nullable = false)\n private String uuid;\n\n @Column(name = &quot;sku&quot;, nullable = true)\n private Long sku;\n\n @Column(name = &quot;name&quot;, nullable = false)\n private String name;\n\n @OneToMany(mappedBy = &quot;product&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n private Set&lt;ProductInfoEntity&gt; infos;\n\n @OneToMany(mappedBy = &quot;product&quot;, cascade = CascadeType.ALL, orphanRemoval = true)\n private Set&lt;ProductTaxEntity&gt; taxes;\n}\n</code></pre>\n</li>\n</ul>\n<p>Child Entity</p>\n<ul>\n<li>Info</li>\n<li>Tax</li>\n</ul>\n<p>Only few cases child entities required to fetch eagerly. Is there any way to change child entity fetch type from lazy to eager in either of the framework <strong>JPARepository/ CriteriaQuery/SQL</strong></p>\n<p>Tried almost every solution on stack overflow but every-time code will hit many queries to retrieve child entities</p>\n"},{"tags":["java","google-bigquery","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":12799902,"reputation":5994,"user_id":9261558,"display_name":"Mazlum Tosun"},"score":0,"creation_date":1672326974,"post_id":74952661,"comment_id":132268477,"body_markdown":"Yes it&#39;s recommended for batch. It can also be used in streaming.\nCan you give us more details about issues with large files please ?","body":"Yes it&#39;s recommended for batch. It can also be used in streaming. Can you give us more details about issues with large files please ?"},{"owner":{"account_id":1874246,"reputation":1390,"user_id":1695821,"display_name":"Bruno Volpato"},"score":0,"creation_date":1672367828,"post_id":74952661,"comment_id":132277185,"body_markdown":"Please check on BigQuery if you are not reaching any quota. It&#39;s important to note that file loads can be more beneficial/cheaper in a lot of cases, if you can keep it under the quota: https://cloud.google.com/bigquery/quotas#load_jobs (it is the default for batch jobs).","body":"Please check on BigQuery if you are not reaching any quota. It&#39;s important to note that file loads can be more beneficial/cheaper in a lot of cases, if you can keep it under the quota: <a href=\"https://cloud.google.com/bigquery/quotas#load_jobs\" rel=\"nofollow noreferrer\">cloud.google.com/bigquery/quotas#load_jobs</a> (it is the default for batch jobs)."}],"answers":[{"tags":[],"owner":{"account_id":12799902,"reputation":5994,"user_id":9261558,"display_name":"Mazlum Tosun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672327476,"creation_date":1672327476,"answer_id":74952960,"question_id":74952661,"body_markdown":"The `STORAGE_WRITE_API` is recommended for `batch` and `streaming` according to the [documentation](https://cloud.google.com/bigquery/docs/write-api) :\r\n\r\n\r\n&gt; The BigQuery Storage Write API is a unified data-ingestion API for\r\n&gt; BigQuery. It combines streaming ingestion and batch loading into a\r\n&gt; single high-performance API. You can use the Storage Write API to\r\n&gt; stream records into BigQuery in real time or to batch process an\r\n&gt; arbitrarily large number of records and commit them in a single atomic\r\n&gt; operation.\r\n&gt; \r\n&gt; Advantages of using the Storage Write API Exactly-once delivery\r\n&gt; semantics. The Storage Write API supports exactly-once semantics\r\n&gt; through the use of stream offsets. Unlike the tabledata.insertAll\r\n&gt; method, the Storage Write API never writes two messages that have the\r\n&gt; same offset within a stream, if the client provides stream offsets\r\n&gt; when appending records.\r\n&gt; \r\n&gt; Stream-level transactions. You can write data to a stream and commit\r\n&gt; the data as a single transaction. If the commit operation fails, you\r\n&gt; can safely retry the operation.\r\n&gt; \r\n&gt; Transactions across streams. Multiple workers can create their own\r\n&gt; streams to process data independently. When all the workers have\r\n&gt; finished, you can commit all of the streams as a transaction.\r\n&gt; \r\n&gt; Efficient protocol. The Storage Write API is more efficient than the\r\n&gt; older insertAll method because it uses gRPC streaming rather than REST\r\n&gt; over HTTP. The Storage Write API also supports binary formats in the\r\n&gt; form of protocol buffers, which are a more efficient wire format than\r\n&gt; JSON. Write requests are asynchronous with guaranteed ordering.\r\n&gt; \r\n&gt; Schema update detection. If the underlying table schema changes while\r\n&gt; the client is streaming, then the Storage Write API notifies the\r\n&gt; client. The client can decide whether to reconnect using the updated\r\n&gt; schema, or continue to write to the existing connection.\r\n&gt; \r\n&gt; Lower cost. The Storage Write API has a significantly lower cost than\r\n&gt; the older insertAll streaming API. In addition, you can ingest up to 2\r\n&gt; TB per month for free.\r\n\r\nThere are many advantages for batch and streaming.\r\n\r\nFor batch mode, it&#39;s more efficient than `BATCH_LOAD` method.\r\n\r\nYou need to check from all the possible logs to understand this weird behaviour : \r\n- job log in Dataflow UI\r\n- worker log in Dataflow UI\r\n- Diagnostics tab in Dataflow UI\r\n- Cloud Logging with filter on `dataflow_step`\r\n\r\nUse the latest [apache beam](https://beam.apache.org/get-started/downloads/) version if possible `2.43.0`","title":"STORAGE_WRITE_API Method uses for Batch mode or Streaming Mode?","body":"<p>The <code>STORAGE_WRITE_API</code> is recommended for <code>batch</code> and <code>streaming</code> according to the <a href=\"https://cloud.google.com/bigquery/docs/write-api\" rel=\"nofollow noreferrer\">documentation</a> :</p>\n<blockquote>\n<p>The BigQuery Storage Write API is a unified data-ingestion API for\nBigQuery. It combines streaming ingestion and batch loading into a\nsingle high-performance API. You can use the Storage Write API to\nstream records into BigQuery in real time or to batch process an\narbitrarily large number of records and commit them in a single atomic\noperation.</p>\n<p>Advantages of using the Storage Write API Exactly-once delivery\nsemantics. The Storage Write API supports exactly-once semantics\nthrough the use of stream offsets. Unlike the tabledata.insertAll\nmethod, the Storage Write API never writes two messages that have the\nsame offset within a stream, if the client provides stream offsets\nwhen appending records.</p>\n<p>Stream-level transactions. You can write data to a stream and commit\nthe data as a single transaction. If the commit operation fails, you\ncan safely retry the operation.</p>\n<p>Transactions across streams. Multiple workers can create their own\nstreams to process data independently. When all the workers have\nfinished, you can commit all of the streams as a transaction.</p>\n<p>Efficient protocol. The Storage Write API is more efficient than the\nolder insertAll method because it uses gRPC streaming rather than REST\nover HTTP. The Storage Write API also supports binary formats in the\nform of protocol buffers, which are a more efficient wire format than\nJSON. Write requests are asynchronous with guaranteed ordering.</p>\n<p>Schema update detection. If the underlying table schema changes while\nthe client is streaming, then the Storage Write API notifies the\nclient. The client can decide whether to reconnect using the updated\nschema, or continue to write to the existing connection.</p>\n<p>Lower cost. The Storage Write API has a significantly lower cost than\nthe older insertAll streaming API. In addition, you can ingest up to 2\nTB per month for free.</p>\n</blockquote>\n<p>There are many advantages for batch and streaming.</p>\n<p>For batch mode, it's more efficient than <code>BATCH_LOAD</code> method.</p>\n<p>You need to check from all the possible logs to understand this weird behaviour :</p>\n<ul>\n<li>job log in Dataflow UI</li>\n<li>worker log in Dataflow UI</li>\n<li>Diagnostics tab in Dataflow UI</li>\n<li>Cloud Logging with filter on <code>dataflow_step</code></li>\n</ul>\n<p>Use the latest <a href=\"https://beam.apache.org/get-started/downloads/\" rel=\"nofollow noreferrer\">apache beam</a> version if possible <code>2.43.0</code></p>\n"}],"owner":{"account_id":16061689,"reputation":2319,"user_id":11592386,"display_name":"Nikhil Suthar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":390,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672327476,"creation_date":1672325735,"question_id":74952661,"body_markdown":"I am using `STORAGE_WRITE_API` method in **Dataflow** for writing data into BigQuery through Batch Pipeline. That is causing issues and sometimes it gets stuck and does not load data into Biquery. It works with small tables but with the large table, it starts giving issues without throwing any errors.\r\n\r\nI tried the same code with `Default` write method and it run properly with small as well as large tables.\r\n\r\nSo I wanted to know the `STORAGE_WRITE_API` method for BigQuery is recommended for Batch Pipeline or not?\r\n\r\n    rows.apply(BigQueryIO.writeTableRows()\r\n    \t\t.withJsonSchema(tableJsonSchema)\r\n    \t\t.to(String.format(&quot;project:SampleDataset.%s&quot;, tableName))\r\n    \t\t.withWriteDisposition(BigQueryIO.Write.WriteDisposition.WRITE_APPEND)\r\n    \t\t.withCreateDisposition(BigQueryIO.Write.CreateDisposition.CREATE_IF_NEEDED)\r\n    \t\t.withMethod(BigQueryIO.Write.Method.STORAGE_WRITE_API)\r\n    );","title":"STORAGE_WRITE_API Method uses for Batch mode or Streaming Mode?","body":"<p>I am using <code>STORAGE_WRITE_API</code> method in <strong>Dataflow</strong> for writing data into BigQuery through Batch Pipeline. That is causing issues and sometimes it gets stuck and does not load data into Biquery. It works with small tables but with the large table, it starts giving issues without throwing any errors.</p>\n<p>I tried the same code with <code>Default</code> write method and it run properly with small as well as large tables.</p>\n<p>So I wanted to know the <code>STORAGE_WRITE_API</code> method for BigQuery is recommended for Batch Pipeline or not?</p>\n<pre><code>rows.apply(BigQueryIO.writeTableRows()\n        .withJsonSchema(tableJsonSchema)\n        .to(String.format(&quot;project:SampleDataset.%s&quot;, tableName))\n        .withWriteDisposition(BigQueryIO.Write.WriteDisposition.WRITE_APPEND)\n        .withCreateDisposition(BigQueryIO.Write.CreateDisposition.CREATE_IF_NEEDED)\n        .withMethod(BigQueryIO.Write.Method.STORAGE_WRITE_API)\n);\n</code></pre>\n"},{"tags":["java","oracle","jdbc","google-cloud-dataflow","apache-beam"],"comments":[{"owner":{"account_id":1929103,"reputation":13962,"user_id":1738915,"accept_rate":90,"display_name":"Kolban"},"score":1,"creation_date":1672242278,"post_id":74940833,"comment_id":132249919,"body_markdown":"This is a wild guess ... but look here ... https://github.com/apache/beam/blob/master/sdks/java/io/jdbc/src/main/java/org/apache/beam/sdk/io/jdbc/JdbcIO.java#L371\n\nIt seems the default fetch size is 50000.  Try and change your JDBC IO to include:\n\nwithFetchSize(100000) and see if that makes a difference ... see\n\nhttps://beam.apache.org/releases/javadoc/2.43.0/org/apache/beam/sdk/io/jdbc/JdbcIO.Read.html#withFetchSize-int-","body":"This is a wild guess ... but look here ... <a href=\"https://github.com/apache/beam/blob/master/sdks/java/io/jdbc/src/main/java/org/apache/beam/sdk/io/jdbc/JdbcIO.java#L371\" rel=\"nofollow noreferrer\">github.com/apache/beam/blob/master/sdks/java/io/jdbc/src/mai&zwnj;&#8203;n/&hellip;</a>  It seems the default fetch size is 50000.  Try and change your JDBC IO to include:  withFetchSize(100000) and see if that makes a difference ... see  <a href=\"https://beam.apache.org/releases/javadoc/2.43.0/org/apache/beam/sdk/io/jdbc/JdbcIO.Read.html#withFetchSize-int-\" rel=\"nofollow noreferrer\">beam.apache.org/releases/javadoc/2.43.0/org/apache/beam/sdk/&zwnj;&#8203;io/&hellip;</a>"},{"owner":{"account_id":16061689,"reputation":2319,"user_id":11592386,"display_name":"Nikhil Suthar"},"score":0,"creation_date":1672324834,"post_id":74940833,"comment_id":132267846,"body_markdown":"@Kolban - Thank you so much that has solved the issue.","body":"@Kolban - Thank you so much that has solved the issue."}],"answers":[{"tags":[],"owner":{"account_id":1929103,"reputation":13962,"user_id":1738915,"accept_rate":90,"display_name":"Kolban"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1672326985,"creation_date":1672326985,"answer_id":74952883,"question_id":74940833,"body_markdown":"The JdbcIO source transform has a property called `FetchSize` that defines how much data can be fetched from the database.  The default value is 50000 bytes.  We can change the runtime value using the `withFetchSize(int fetchSize)` method.  [Docs](https://beam.apache.org/releases/javadoc/2.43.0/org/apache/beam/sdk/io/jdbc/JdbcIO.Read.html#withFetchSize-int-).","title":"Null Pointer Exception with JdbcIO read in Apache Beam [DataFlow]","body":"<p>The JdbcIO source transform has a property called <code>FetchSize</code> that defines how much data can be fetched from the database.  The default value is 50000 bytes.  We can change the runtime value using the <code>withFetchSize(int fetchSize)</code> method.  <a href=\"https://beam.apache.org/releases/javadoc/2.43.0/org/apache/beam/sdk/io/jdbc/JdbcIO.Read.html#withFetchSize-int-\" rel=\"nofollow noreferrer\">Docs</a>.</p>\n"}],"owner":{"account_id":16061689,"reputation":2319,"user_id":11592386,"display_name":"Nikhil Suthar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":460,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74952883,"answer_count":1,"score":1,"last_activity_date":1672326985,"creation_date":1672233989,"question_id":74940833,"body_markdown":"I have written code for reading data from Oracle using Apache Beam with **Dataflow** as a Runner.\r\n\r\nI am facing one weird error for a few tables while ingesting data.\r\nThere are various tables that have 200+ Columns with various data types such as `Date`, `Number`, and `VARCHAR2(***)` in Oracle.\r\n\r\nOur requirement is to migrate all columns through **dataflow** to BigQuery. When we select all the columns in Select Query then it gives the `Null Pointer exception` error mentioned below. So we tried to use  selective columns in Query but in that case \r\n\r\n - When the collective datatype size of selected columns is less than ~46752 Bytes then Pipeline runs successfully.\r\n - and when it crosses this limit then it starts giving a Null Pointer error.\r\n\r\nIf I explain in more detail, if there is a limit of 2000 Bytes (assumption, the actual value we are getting is around 46752 Bytes) then we will be able to select only two columns with VARCHAR2(1000) datatype or 4 columns with VARCHAR2(500) datatype and so on.\r\n\r\n\r\n**Note** - The threshold limit ~46752 Bytes we have calculated by adding columns one by one in Query and executing the code.\r\n\r\nWe are not sure if is there any such limit attached to the Java JDBC connector of Apache Beam or not but we are facing challenges while migration when our selected columns cross this limit.\r\n\r\nPlease help me if I am missing any point here or any parameter while reading data through `JdbcIO`.\r\n\r\nBelow is the code snippet where the Code is giving an error. It is the entry point of our pipeline. \r\nThe code is giving errors while reading only. In the below code, I have not mentioned the write operation to BigQuery since it is not getting executed because of failure at `JdbcIO.read()` only. (cross-check it by commenting out the logic of BigQuery as well).\r\n\r\n**Read Data from Oracle Code**\r\n   \r\n\r\n    // Read from JDBC\r\n    Pipeline p2 = Pipeline.create(\r\n                    PipelineOptionsFactory.fromArgs(args).withValidation().create());\r\n    \r\n    String query2 = &quot;SELECT Col1...Col00 FROM table WHERE rownum&lt;=1000&quot;;\r\n    PCollection&lt;TableRow&gt; rows = p2.apply(JdbcIO.&lt;TableRow&gt;read()\r\n                    .withDataSourceConfiguration(JdbcIO.DataSourceConfiguration.create(\r\n                                    &quot;oracle.jdbc.OracleDriver&quot;, &quot;jdbc:oracle:thin:@//localhost:1521/orcl&quot;)\r\n                            .withUsername(&quot;root&quot;)\r\n                            .withPassword(&quot;password&quot;))\r\n                    .withQuery(query2)\r\n                    .withRowMapper(new JdbcIO.RowMapper&lt;TableRow&gt;() {\r\n                        @Override\r\n                        public TableRow mapRow(ResultSet resultSet) throws Exception {\r\n    \r\n                            schema = getSchemaFromResultSet(resultSet);\r\n                            TableRow tableRow = new TableRow();\r\n                            List&lt;TableFieldSchema&gt; columnNames = schema.getFields();    \r\n                            }\r\n                            return tableRow;\r\n                        }\r\n                    )\r\n            );\r\n\r\n    p2.run().waitUntilFinish();\r\n\r\n\r\n**Error (only when it crosses above the limit of Bytes in columns)**\r\n\r\n     Error message from worker: java.lang.NullPointerException\r\n    oracle.sql.converter.CharacterConverter1Byte.toUnicodeChars(CharacterConverter1Byte.java:344) \r\n    oracle.sql.CharacterSet1Byte.toCharWithReplacement(CharacterSet1Byte.java:134)   \r\n    oracle.jdbc.driver.DBConversion._CHARBytesToJavaChars(DBConversion.java:964) \r\n    oracle.jdbc.driver.DBConversion.CHARBytesToJavaChars(DBConversion.java:867)  \r\n    oracle.jdbc.driver.T4CVarcharAccessor.unmarshalOneRow(T4CVarcharAccessor.java:298)  \r\n    oracle.jdbc.driver.T4CTTIrxd.unmarshal(T4CTTIrxd.java:934)     \r\n    oracle.jdbc.driver.T4CTTIrxd.unmarshal(T4CTTIrxd.java:853)     \r\n    oracle.jdbc.driver.T4C8Oall.readRXD(T4C8Oall.java:699)     \r\n    oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:337)     \r\n    oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)     \r\n    oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:523)     \r\n    oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)     \r\n    oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:863)     \r\n    oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1153)     \r\n    oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1275)     \r\n    oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3576)     \r\n    oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3620)     \r\n    oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java\r\n    :1491)     \r\n    org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java\r\n    :122)     \r\n    org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java\r\n    :122)     org.apache.beam.sdk.io.jdbc.JdbcIO$ReadFn.processElement(JdbcIO.java:1381)\r\n\r\n**More Details**\r\n\r\n - Oracle Version - 11g \r\n - Apache Beam SDK - Java  \r\n - There are a few columns that we are selecting has Null values also but\r\n   that should not cause any issues.\r\n - There is no issue with specific columns since I have tried all the possible combinations of the columns.\r\n - There is no number of columns select limit since I am able to read data from an Oracle table where the number of columns is more than 300 but the total byte size is less than 46752 Bytes. \r\n\r\n","title":"Null Pointer Exception with JdbcIO read in Apache Beam [DataFlow]","body":"<p>I have written code for reading data from Oracle using Apache Beam with <strong>Dataflow</strong> as a Runner.</p>\n<p>I am facing one weird error for a few tables while ingesting data.\nThere are various tables that have 200+ Columns with various data types such as <code>Date</code>, <code>Number</code>, and <code>VARCHAR2(***)</code> in Oracle.</p>\n<p>Our requirement is to migrate all columns through <strong>dataflow</strong> to BigQuery. When we select all the columns in Select Query then it gives the <code>Null Pointer exception</code> error mentioned below. So we tried to use  selective columns in Query but in that case</p>\n<ul>\n<li>When the collective datatype size of selected columns is less than ~46752 Bytes then Pipeline runs successfully.</li>\n<li>and when it crosses this limit then it starts giving a Null Pointer error.</li>\n</ul>\n<p>If I explain in more detail, if there is a limit of 2000 Bytes (assumption, the actual value we are getting is around 46752 Bytes) then we will be able to select only two columns with VARCHAR2(1000) datatype or 4 columns with VARCHAR2(500) datatype and so on.</p>\n<p><strong>Note</strong> - The threshold limit ~46752 Bytes we have calculated by adding columns one by one in Query and executing the code.</p>\n<p>We are not sure if is there any such limit attached to the Java JDBC connector of Apache Beam or not but we are facing challenges while migration when our selected columns cross this limit.</p>\n<p>Please help me if I am missing any point here or any parameter while reading data through <code>JdbcIO</code>.</p>\n<p>Below is the code snippet where the Code is giving an error. It is the entry point of our pipeline.\nThe code is giving errors while reading only. In the below code, I have not mentioned the write operation to BigQuery since it is not getting executed because of failure at <code>JdbcIO.read()</code> only. (cross-check it by commenting out the logic of BigQuery as well).</p>\n<p><strong>Read Data from Oracle Code</strong></p>\n<pre><code>// Read from JDBC\nPipeline p2 = Pipeline.create(\n                PipelineOptionsFactory.fromArgs(args).withValidation().create());\n\nString query2 = &quot;SELECT Col1...Col00 FROM table WHERE rownum&lt;=1000&quot;;\nPCollection&lt;TableRow&gt; rows = p2.apply(JdbcIO.&lt;TableRow&gt;read()\n                .withDataSourceConfiguration(JdbcIO.DataSourceConfiguration.create(\n                                &quot;oracle.jdbc.OracleDriver&quot;, &quot;jdbc:oracle:thin:@//localhost:1521/orcl&quot;)\n                        .withUsername(&quot;root&quot;)\n                        .withPassword(&quot;password&quot;))\n                .withQuery(query2)\n                .withRowMapper(new JdbcIO.RowMapper&lt;TableRow&gt;() {\n                    @Override\n                    public TableRow mapRow(ResultSet resultSet) throws Exception {\n\n                        schema = getSchemaFromResultSet(resultSet);\n                        TableRow tableRow = new TableRow();\n                        List&lt;TableFieldSchema&gt; columnNames = schema.getFields();    \n                        }\n                        return tableRow;\n                    }\n                )\n        );\n\np2.run().waitUntilFinish();\n</code></pre>\n<p><strong>Error (only when it crosses above the limit of Bytes in columns)</strong></p>\n<pre><code> Error message from worker: java.lang.NullPointerException\noracle.sql.converter.CharacterConverter1Byte.toUnicodeChars(CharacterConverter1Byte.java:344) \noracle.sql.CharacterSet1Byte.toCharWithReplacement(CharacterSet1Byte.java:134)   \noracle.jdbc.driver.DBConversion._CHARBytesToJavaChars(DBConversion.java:964) \noracle.jdbc.driver.DBConversion.CHARBytesToJavaChars(DBConversion.java:867)  \noracle.jdbc.driver.T4CVarcharAccessor.unmarshalOneRow(T4CVarcharAccessor.java:298)  \noracle.jdbc.driver.T4CTTIrxd.unmarshal(T4CTTIrxd.java:934)     \noracle.jdbc.driver.T4CTTIrxd.unmarshal(T4CTTIrxd.java:853)     \noracle.jdbc.driver.T4C8Oall.readRXD(T4C8Oall.java:699)     \noracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:337)     \noracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)     \noracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:523)     \noracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)     \noracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:863)     \noracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1153)     \noracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1275)     \noracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3576)     \noracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3620)     \noracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java\n:1491)     \norg.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java\n:122)     \norg.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java\n:122)     org.apache.beam.sdk.io.jdbc.JdbcIO$ReadFn.processElement(JdbcIO.java:1381)\n</code></pre>\n<p><strong>More Details</strong></p>\n<ul>\n<li>Oracle Version - 11g</li>\n<li>Apache Beam SDK - Java</li>\n<li>There are a few columns that we are selecting has Null values also but\nthat should not cause any issues.</li>\n<li>There is no issue with specific columns since I have tried all the possible combinations of the columns.</li>\n<li>There is no number of columns select limit since I am able to read data from an Oracle table where the number of columns is more than 300 but the total byte size is less than 46752 Bytes.</li>\n</ul>\n"},{"tags":["java","jdbc","google-bigquery","google-cloud-dataflow","apache-beam"],"answers":[{"tags":[],"owner":{"account_id":541415,"reputation":1277,"user_id":1260237,"accept_rate":80,"display_name":"Jeff Klukas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672326778,"creation_date":1672151268,"answer_id":74930541,"question_id":74920894,"body_markdown":"To load a schema within the pipeline itself as you&#39;re suggesting here, you can use `BigQueryIO.write()` and specify [withSchemaFromView](https://beam.apache.org/releases/javadoc/2.40.0/org/apache/beam/sdk/io/gcp/bigquery/BigQueryIO.Write.html#withSchemaFromView-org.apache.beam.sdk.values.PCollectionView-). In that case, you&#39;d need to fetch the schema from the source database and wrap that in a PCollectionView (see [Side inputs](https://beam.apache.org/documentation/programming-guide/#side-inputs) in the Beam programming guide).\r\n\r\nYou&#39;re using the storage write API, which likely requires a schema be specified. Note that the BigQuery API for file loads can allow inferring schema from the file contents at load time, although I&#39;m not completely sure if Beam supports this. I would encourage you to try using file loads and setting `withSchemaUpdateOption(SchemaUpdateOption.ALLOW_FIELD_ADDITION)` to see if that leads to the table creation behavior you&#39;re looking for.","title":"How to pass Table schema from Source to Sink using Apache Beam?","body":"<p>To load a schema within the pipeline itself as you're suggesting here, you can use <code>BigQueryIO.write()</code> and specify <a href=\"https://beam.apache.org/releases/javadoc/2.40.0/org/apache/beam/sdk/io/gcp/bigquery/BigQueryIO.Write.html#withSchemaFromView-org.apache.beam.sdk.values.PCollectionView-\" rel=\"nofollow noreferrer\">withSchemaFromView</a>. In that case, you'd need to fetch the schema from the source database and wrap that in a PCollectionView (see <a href=\"https://beam.apache.org/documentation/programming-guide/#side-inputs\" rel=\"nofollow noreferrer\">Side inputs</a> in the Beam programming guide).</p>\n<p>You're using the storage write API, which likely requires a schema be specified. Note that the BigQuery API for file loads can allow inferring schema from the file contents at load time, although I'm not completely sure if Beam supports this. I would encourage you to try using file loads and setting <code>withSchemaUpdateOption(SchemaUpdateOption.ALLOW_FIELD_ADDITION)</code> to see if that leads to the table creation behavior you're looking for.</p>\n"}],"owner":{"account_id":16061689,"reputation":2319,"user_id":11592386,"display_name":"Nikhil Suthar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":524,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1672326778,"creation_date":1672062191,"question_id":74920894,"body_markdown":"I have one use case where I need to load thousands of tables from Oracle to BiQuery using Apache Beam (DataFlow). I have written the below code that is working by creating tables manually and using `CreateDisposition.CREATE_NEVER` but that will not be feasible to create all tables manually. So I have written code to fetch schema from Source (`JdbcIO`) and pass it to BigQuery `writeTableRows()`. \r\n\r\nBut the code is giving the below error.  \r\n\r\n    Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: schema can not be null\r\n            at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.base.Preconditions.checkArgument(Preconditions.java:141)\r\n            at org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO$Write.withSchema(BigQueryIO.java:2256)\r\n            at org.example.Main.main(Main.java:109)\r\n\r\n\r\n\r\n**Code**\r\n\r\n\r\n    package org.example;\r\n    \r\n    import org.apache.beam.sdk.Pipeline;\r\n    import org.apache.beam.sdk.io.TextIO;\r\n    import org.apache.beam.sdk.io.FileIO;\r\n    import org.apache.beam.sdk.io.gcp.bigquery.TableRowJsonCoder;\r\n    import org.apache.beam.sdk.options.PipelineOptionsFactory;\r\n    import org.apache.beam.sdk.transforms.DoFn;\r\n    import org.apache.beam.sdk.transforms.ParDo;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import com.google.api.services.bigquery.model.TableFieldSchema;\r\n    import com.google.api.services.bigquery.model.TableRow;\r\n    import com.google.api.services.bigquery.model.TableSchema;\r\n    import org.apache.beam.sdk.values.PCollection;\r\n    import org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO;\r\n    import org.apache.beam.sdk.io.jdbc.JdbcIO;\r\n    import org.apache.beam.sdk.coders.StringUtf8Coder;\r\n    import java.sql.ResultSet;\r\n    import java.sql.ResultSetMetaData;\r\n    import java.sql.SQLException;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    \r\n    public class Main {\r\n        private static final Logger LOG = LoggerFactory.getLogger(Main.class);\r\n        public static TableSchema schema;\r\n    \r\n        public static void main(String[] args) {\r\n         \r\n    \r\n            // Read from JDBC\r\n            Pipeline p = Pipeline.create(PipelineOptionsFactory.fromArgs(args).withValidation().create());\r\n    \r\n            String query2= &quot;select * from Test.emptable&quot;;\r\n            PCollection&lt;TableRow&gt; rows = p.apply(JdbcIO.&lt;TableRow&gt;read()\r\n                    .withDataSourceConfiguration(JdbcIO.DataSourceConfiguration.create(\r\n                                    &quot;oracle.jdbc.OracleDriver&quot;, &quot;jdbc:oracle:thin:@//localhost:1521/ORCL&quot;)\r\n                            .withUsername(&quot;root&quot;)\r\n                            .withPassword(&quot;password&quot;))\r\n                    .withQuery(query2)\r\n                    .withCoder(TableRowJsonCoder.of())\r\n                    .withRowMapper(new JdbcIO.RowMapper&lt;TableRow&gt;() {\r\n                        @Override\r\n                        public TableRow mapRow(ResultSet resultSet) throws Exception {\r\n                            schema = getSchemaFromResultSet(resultSet);\r\n                            TableRow tableRow = new TableRow();\r\n    \r\n                            List&lt;TableFieldSchema&gt; columnNames = schema.getFields();\r\n                            for(int i =1; i&lt;= resultSet.getMetaData().getColumnCount(); i++) {\r\n                                \r\n                                tableRow.put(columnNames.get(i-1).get(&quot;name&quot;).toString(), String.valueOf(resultSet.getObject(i)));\r\n                            }\r\n    \r\n                            return tableRow;\r\n                            \r\n                        }\r\n                    })\r\n            );\r\n           \r\n            rows.apply(BigQueryIO.writeTableRows()\r\n                    .to(&quot;project:SampleDataset.emptable&quot;)\r\n                    .withSchema(schema)\r\n                    .withWriteDisposition(BigQueryIO.Write.WriteDisposition.WRITE_APPEND)\r\n                    .withCreateDisposition(BigQueryIO.Write.CreateDisposition.CREATE_IF_NEEDED)\r\n                    .withMethod(BigQueryIO.Write.Method.STORAGE_WRITE_API)\r\n            );\r\n    \r\n            p.run().waitUntilFinish();\r\n    \r\n        }\r\n        \r\n        private static TableSchema getSchemaFromResultSet(ResultSet resultSet) {\r\n            FieldSchemaListBuilder fieldSchemaListBuilder = new FieldSchemaListBuilder();\r\n            try {\r\n                ResultSetMetaData rsmd = resultSet.getMetaData();\r\n    \r\n                for(int i=1; i &lt;= rsmd.getColumnCount(); i++) {\r\n                    fieldSchemaListBuilder.stringField(resultSet.getMetaData().getColumnName(i));\r\n                }\r\n            }\r\n            catch (SQLException ex) {\r\n                LOG.error(&quot;Error getting metadata: &quot; + ex.getMessage());\r\n            }\r\n    \r\n            return fieldSchemaListBuilder.schema();\r\n        }\r\n    }\r\n\r\nI have tried to assign a dummy schema to handle this compile time error and assigned schema value to the dummy schema, but that is creating a table with a dummy schema, not with the actual schema.\r\n\r\nCan someone help me to understand the flow where I am missing and how I can get the schema from JdbcIO and assign it to BigQuery Sink Connector?","title":"How to pass Table schema from Source to Sink using Apache Beam?","body":"<p>I have one use case where I need to load thousands of tables from Oracle to BiQuery using Apache Beam (DataFlow). I have written the below code that is working by creating tables manually and using <code>CreateDisposition.CREATE_NEVER</code> but that will not be feasible to create all tables manually. So I have written code to fetch schema from Source (<code>JdbcIO</code>) and pass it to BigQuery <code>writeTableRows()</code>.</p>\n<p>But the code is giving the below error.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: schema can not be null\n        at org.apache.beam.vendor.guava.v26_0_jre.com.google.common.base.Preconditions.checkArgument(Preconditions.java:141)\n        at org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO$Write.withSchema(BigQueryIO.java:2256)\n        at org.example.Main.main(Main.java:109)\n</code></pre>\n<p><strong>Code</strong></p>\n<pre><code>package org.example;\n\nimport org.apache.beam.sdk.Pipeline;\nimport org.apache.beam.sdk.io.TextIO;\nimport org.apache.beam.sdk.io.FileIO;\nimport org.apache.beam.sdk.io.gcp.bigquery.TableRowJsonCoder;\nimport org.apache.beam.sdk.options.PipelineOptionsFactory;\nimport org.apache.beam.sdk.transforms.DoFn;\nimport org.apache.beam.sdk.transforms.ParDo;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport com.google.api.services.bigquery.model.TableFieldSchema;\nimport com.google.api.services.bigquery.model.TableRow;\nimport com.google.api.services.bigquery.model.TableSchema;\nimport org.apache.beam.sdk.values.PCollection;\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO;\nimport org.apache.beam.sdk.io.jdbc.JdbcIO;\nimport org.apache.beam.sdk.coders.StringUtf8Coder;\nimport java.sql.ResultSet;\nimport java.sql.ResultSetMetaData;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\n\n\npublic class Main {\n    private static final Logger LOG = LoggerFactory.getLogger(Main.class);\n    public static TableSchema schema;\n\n    public static void main(String[] args) {\n     \n\n        // Read from JDBC\n        Pipeline p = Pipeline.create(PipelineOptionsFactory.fromArgs(args).withValidation().create());\n\n        String query2= &quot;select * from Test.emptable&quot;;\n        PCollection&lt;TableRow&gt; rows = p.apply(JdbcIO.&lt;TableRow&gt;read()\n                .withDataSourceConfiguration(JdbcIO.DataSourceConfiguration.create(\n                                &quot;oracle.jdbc.OracleDriver&quot;, &quot;jdbc:oracle:thin:@//localhost:1521/ORCL&quot;)\n                        .withUsername(&quot;root&quot;)\n                        .withPassword(&quot;password&quot;))\n                .withQuery(query2)\n                .withCoder(TableRowJsonCoder.of())\n                .withRowMapper(new JdbcIO.RowMapper&lt;TableRow&gt;() {\n                    @Override\n                    public TableRow mapRow(ResultSet resultSet) throws Exception {\n                        schema = getSchemaFromResultSet(resultSet);\n                        TableRow tableRow = new TableRow();\n\n                        List&lt;TableFieldSchema&gt; columnNames = schema.getFields();\n                        for(int i =1; i&lt;= resultSet.getMetaData().getColumnCount(); i++) {\n                            \n                            tableRow.put(columnNames.get(i-1).get(&quot;name&quot;).toString(), String.valueOf(resultSet.getObject(i)));\n                        }\n\n                        return tableRow;\n                        \n                    }\n                })\n        );\n       \n        rows.apply(BigQueryIO.writeTableRows()\n                .to(&quot;project:SampleDataset.emptable&quot;)\n                .withSchema(schema)\n                .withWriteDisposition(BigQueryIO.Write.WriteDisposition.WRITE_APPEND)\n                .withCreateDisposition(BigQueryIO.Write.CreateDisposition.CREATE_IF_NEEDED)\n                .withMethod(BigQueryIO.Write.Method.STORAGE_WRITE_API)\n        );\n\n        p.run().waitUntilFinish();\n\n    }\n    \n    private static TableSchema getSchemaFromResultSet(ResultSet resultSet) {\n        FieldSchemaListBuilder fieldSchemaListBuilder = new FieldSchemaListBuilder();\n        try {\n            ResultSetMetaData rsmd = resultSet.getMetaData();\n\n            for(int i=1; i &lt;= rsmd.getColumnCount(); i++) {\n                fieldSchemaListBuilder.stringField(resultSet.getMetaData().getColumnName(i));\n            }\n        }\n        catch (SQLException ex) {\n            LOG.error(&quot;Error getting metadata: &quot; + ex.getMessage());\n        }\n\n        return fieldSchemaListBuilder.schema();\n    }\n}\n</code></pre>\n<p>I have tried to assign a dummy schema to handle this compile time error and assigned schema value to the dummy schema, but that is creating a table with a dummy schema, not with the actual schema.</p>\n<p>Can someone help me to understand the flow where I am missing and how I can get the schema from JdbcIO and assign it to BigQuery Sink Connector?</p>\n"},{"tags":["java","spring","api","rest"],"comments":[{"owner":{"account_id":10308879,"reputation":517,"user_id":7605320,"display_name":"Marco"},"score":0,"creation_date":1672326631,"post_id":74952779,"comment_id":132268358,"body_markdown":"Did you try this? https://springdoc.org/, with this lib you can use annotation to do your documentation, then you can consume from the endpoint that the lib create for you to consume the info, if you are using tomcat to deploy the war maybe you need to add to the servle config","body":"Did you try this? <a href=\"https://springdoc.org/\" rel=\"nofollow noreferrer\">springdoc.org</a>, with this lib you can use annotation to do your documentation, then you can consume from the endpoint that the lib create for you to consume the info, if you are using tomcat to deploy the war maybe you need to add to the servle config"}],"owner":{"account_id":27383773,"reputation":1,"user_id":20887985,"display_name":"RomiOuard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1672326424,"creation_date":1672326424,"question_id":74952779,"body_markdown":"I m a newbie in coding , please help me I have an api code and I have to generate the documentation , can you help me to do it.\r\nThank you \r\n\r\nI tried to generate the documentation with swagger editor but I think I didn&#39;t understand well how to do it","title":"how to create API documentation from the war file","body":"<p>I m a newbie in coding , please help me I have an api code and I have to generate the documentation , can you help me to do it.\nThank you</p>\n<p>I tried to generate the documentation with swagger editor but I think I didn't understand well how to do it</p>\n"},{"tags":["javascript","java","child-process"],"comments":[{"owner":{"account_id":61252,"reputation":407488,"user_id":182668,"accept_rate":68,"display_name":"Pointy"},"score":0,"creation_date":1672325736,"post_id":74952619,"comment_id":132268118,"body_markdown":"*spawn a Java file* ― Java or JavaScript? And what exactly is the problem?","body":"<i>spawn a Java file</i> ― Java or JavaScript? And what exactly is the problem?"}],"answers":[{"tags":[],"owner":{"account_id":20791387,"reputation":45,"user_id":15269475,"display_name":"Green Juzzy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672325862,"creation_date":1672325862,"answer_id":74952681,"question_id":74952619,"body_markdown":"Easily done by just doing server.stdout.on(&quot;data&quot;), should&#39;ve looked more into the spawn event before asking the question :p\r\n\r\n```js\r\nvar childP = require(&quot;child_process&quot;)\r\n\r\nvar server = childP.spawn(&quot;java&quot;, [&quot;-jar&quot;, &quot;Launch.jar&quot;, &quot;nogui&quot;])\r\n\r\n\r\nserver.stdout.on(&quot;data&quot;, (data) =&gt; {\r\n    console.log(data.toString().trim())\r\n})\r\n```","title":"Spawning Java File","body":"<p>Easily done by just doing server.stdout.on(&quot;data&quot;), should've looked more into the spawn event before asking the question :p</p>\n<pre class=\"lang-js prettyprint-override\"><code>var childP = require(&quot;child_process&quot;)\n\nvar server = childP.spawn(&quot;java&quot;, [&quot;-jar&quot;, &quot;Launch.jar&quot;, &quot;nogui&quot;])\n\n\nserver.stdout.on(&quot;data&quot;, (data) =&gt; {\n    console.log(data.toString().trim())\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26165396,"reputation":34,"user_id":19851303,"display_name":"Junaid Shahbaz Khan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672326161,"creation_date":1672326161,"answer_id":74952733,"question_id":74952619,"body_markdown":"To spawn a Java file and receive its standard output using the child_process module in Node.js, you can use the spawn function as follows:\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n`const { spawn } = require(&#39;child_process&#39;);\r\n\r\nconst javaProcess = spawn(&#39;java&#39;, [&#39;-jar&#39;, &#39;minecraft_server.jar&#39;]);\r\n\r\njavaProcess.stdout.on(&#39;data&#39;, (data) =&gt; {\r\n  console.log(`stdout: ${data}`);\r\n});\r\n\r\njavaProcess.stderr.on(&#39;data&#39;, (data) =&gt; {\r\n  console.error(`stderr: ${data}`);\r\n});\r\n\r\njavaProcess.on(&#39;close&#39;, (code) =&gt; {\r\n  console.log(`child process exited with code ${code}`);\r\n});`\r\n\r\n","title":"Spawning Java File","body":"<p>To spawn a Java file and receive its standard output using the child_process module in Node.js, you can use the spawn function as follows:\n<br>\n<br>\n`const { spawn } = require('child_process');</p>\n<p>const javaProcess = spawn('java', ['-jar', 'minecraft_server.jar']);</p>\n<p>javaProcess.stdout.on('data', (data) =&gt; {\nconsole.log(<code>stdout: ${data}</code>);\n});</p>\n<p>javaProcess.stderr.on('data', (data) =&gt; {\nconsole.error(<code>stderr: ${data}</code>);\n});</p>\n<p>javaProcess.on('close', (code) =&gt; {\nconsole.log(<code>child process exited with code ${code}</code>);\n});`</p>\n"}],"owner":{"account_id":20791387,"reputation":45,"user_id":15269475,"display_name":"Green Juzzy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1672326161,"creation_date":1672325478,"question_id":74952619,"body_markdown":"How can i spawn a java file while receiving stdout output? \r\n\r\nI am trying to start a minecraft server file using child_process&#39; spawn function, and attempting to get the output thats getting sent.\r\n\r\nHeres what i&#39;ve tried\r\n```javascript\r\nvar childP = require(&quot;child_process&quot;)\r\n\r\nvar server = childP.spawn(&quot;java&quot;, [&quot;-jar&quot;, &quot;Launch.jar&quot;, &quot;nogui&quot;])\r\n\r\nserver.on(&quot;spawn&quot;, () =&gt; {\r\n    console.log(&quot;Server started&quot;)\r\n})\r\n\r\nserver.on(&quot;message&quot;, (message) =&gt; {\r\n    console.log(message)\r\n})\r\n\r\nserver.on(&quot;error&quot;, (err) =&gt; {\r\n    console.log(err)\r\n})\r\n\r\nserver.on(&quot;disconnect&quot;, () =&gt; {\r\n    console.log(&quot;Server disconnected&quot;);\r\n})\r\n\r\nserver.on(&quot;exit&quot;, (code) =&gt; {\r\n    console.log(`Server exited with code ${code}`)\r\n})\r\n```","title":"Spawning Java File","body":"<p>How can i spawn a java file while receiving stdout output?</p>\n<p>I am trying to start a minecraft server file using child_process' spawn function, and attempting to get the output thats getting sent.</p>\n<p>Heres what i've tried</p>\n<pre class=\"lang-js prettyprint-override\"><code>var childP = require(&quot;child_process&quot;)\n\nvar server = childP.spawn(&quot;java&quot;, [&quot;-jar&quot;, &quot;Launch.jar&quot;, &quot;nogui&quot;])\n\nserver.on(&quot;spawn&quot;, () =&gt; {\n    console.log(&quot;Server started&quot;)\n})\n\nserver.on(&quot;message&quot;, (message) =&gt; {\n    console.log(message)\n})\n\nserver.on(&quot;error&quot;, (err) =&gt; {\n    console.log(err)\n})\n\nserver.on(&quot;disconnect&quot;, () =&gt; {\n    console.log(&quot;Server disconnected&quot;);\n})\n\nserver.on(&quot;exit&quot;, (code) =&gt; {\n    console.log(`Server exited with code ${code}`)\n})\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9223,"page":769,"page_size":100}
