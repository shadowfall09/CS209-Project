{"items":[{"tags":["java","spring-boot","multithreading","slf4j"],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682386695,"creation_date":1682386695,"answer_id":76097127,"question_id":76096468,"body_markdown":"Seems to be expected in multhreading processing. Parallel threads will overlap in execution and their logs will overlap in time.\r\n\r\nTo analyze the log filter by thread identifier.\r\n\r\nSpacing in time will surely prevent overlapping, through it can be somewhat unpredictable, and you lose the benefits of multhreading.\r\n\r\nChanging the variable to static does nothing for this issue. Better leave it as the log library recommends.","title":"Log interleaving issue in a multi-threaded application using Spring Boot and asynchronous tasks","body":"<p>Seems to be expected in multhreading processing. Parallel threads will overlap in execution and their logs will overlap in time.</p>\n<p>To analyze the log filter by thread identifier.</p>\n<p>Spacing in time will surely prevent overlapping, through it can be somewhat unpredictable, and you lose the benefits of multhreading.</p>\n<p>Changing the variable to static does nothing for this issue. Better leave it as the log library recommends.</p>\n"}],"owner":{"account_id":14370996,"reputation":900,"user_id":10380766,"display_name":"Hofbr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682386695,"creation_date":1682374538,"question_id":76096468,"body_markdown":"I am working on a Spring Boot application that runs multiple instances of a job called `HeartbeatJob` concurrently. Each `HeartbeatJob` has a producer and a consumer that produce and consume messages respectively. \r\n\r\nI have a custom `ThreadPoolTaskExecutor` with a specified pool size to handle these tasks asynchronously. My problem is that the logs from different threads seem to be interleaved, making it difficult to analyze the logs.\r\n\r\nHere is an example of how the logs that are getting mixed up:\r\n```\r\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-SYSTEMS_CLUSTER_1 producer heartbeat message 0&quot;}\r\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-SYSTEMS_CLUSTER_0 producer heartbeat message 0&quot;}\r\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-PRODUCTION_CLUSTER_0 producer heartbeat message 0&quot;}\r\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-PRODUCTION_CLUSTER_1 producer heartbeat message 0&quot;}\r\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-SYSTEMS_CLUSTER_1 producer heartbeat message 1&quot;}\r\n```\r\nThe logs should never be receiving a message from outside of its cluster.\r\nSo these logs messages look like:\r\n```\r\nThe event received by Heartbeat-{cluster} consumer is: {&quot;name&quot;: &quot;Heartbeat-{cluster} producer heartbeat message {n}&quot;}\r\n```\r\n\r\nHere is the relevant code:  \r\n### `HeartbeatJobConfiguration`\r\n```java\r\n/**\r\n * This module is responsible for configuring the HeartbeatJob instances and their execution for different clusters.\r\n * It creates a HeartbeatJob bean and a ThreadPoolTaskExecutor bean for executing the HeartbeatJobs.\r\n * The module schedules the execution of HeartbeatJobs for the following clusters:\r\n * - PRODUCTION_CLUSTER_0\r\n * - PRODUCTION_CLUSTER_1\r\n * - SYSTEMS_CLUSTER_0\r\n * - SYSTEMS_CLUSTER_1\r\n */\r\n\r\npackage com.climate.config;\r\n\r\nimport com.climate.canarytesting.jobs.HeartbeatJob;\r\n\r\nimport com.climate.eventplatform.client.EventPlatformClientException;\r\nimport io.micrometer.core.instrument.MeterRegistry;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.task.TaskExecutor;\r\nimport org.springframework.scheduling.annotation.EnableAsync;\r\nimport org.springframework.scheduling.annotation.Scheduled;\r\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\r\n\r\nimport java.io.IOException;\r\n\r\n@Configuration\r\n@EnableAsync\r\npublic class HeartbeatJobConfiguration {\r\n\r\n    private MeterRegistry meterRegistry;\r\n\r\n    /**\r\n     * Constructs a new HeartbeatJobConfiguration instance with the provided MeterRegistry.\r\n     *\r\n     * @param meterRegistry the MeterRegistry instance\r\n     */\r\n    @Autowired\r\n    public HeartbeatJobConfiguration(MeterRegistry meterRegistry) {\r\n        this.meterRegistry = meterRegistry;\r\n    }\r\n\r\n    /**\r\n     * Creates a new HeartbeatJob bean with the provided MeterRegistry.\r\n     *\r\n     * @return a new HeartbeatJob instance\r\n     */\r\n    @Bean\r\n    public HeartbeatJob heartbeatJob() {\r\n        return new HeartbeatJob(meterRegistry);\r\n    }\r\n\r\n    /**\r\n     * Creates a new ThreadPoolTaskExecutor bean for executing HeartbeatJobs.\r\n     *\r\n     * @return a new ThreadPoolTaskExecutor instance\r\n     */\r\n    @Bean\r\n    public TaskExecutor heartbeatExecutor() {\r\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n        executor.setCorePoolSize(4);\r\n        executor.setMaxPoolSize(4);\r\n        executor.setThreadNamePrefix(&quot;heartbeatExecutor-&quot;);\r\n        return executor;\r\n    }\r\n\r\n    // The following scheduled jobs run the HeartbeatJob for different clusters\r\n    // at the specified cron schedule. The HeartbeatJob is responsible for sending\r\n    // and receiving heartbeats for each respective cluster.\r\n\r\n    @Scheduled(cron = &quot;0 * * * * ?&quot;)\r\n    public void runProductionCluster0HeartbeatJob() throws EventPlatformClientException, IOException, InterruptedException {\r\n        heartbeatJob().execute(&quot;PRODUCTION_CLUSTER_0&quot;);\r\n    }\r\n\r\n    @Scheduled(cron = &quot;0 * * * * ?&quot;)\r\n    public void runProductionCluster1HeartbeatJob() throws EventPlatformClientException, IOException, InterruptedException {\r\n        heartbeatJob().execute(&quot;PRODUCTION_CLUSTER_1&quot;);\r\n    }\r\n\r\n    @Scheduled(cron = &quot;0 * * * * ?&quot;)\r\n    public void runSystemsCluster0HeartbeatJob() throws EventPlatformClientException, IOException, InterruptedException {\r\n        heartbeatJob().execute(&quot;SYSTEMS_CLUSTER_0&quot;);\r\n    }\r\n\r\n    @Scheduled(cron = &quot;0 * * * * ?&quot;)\r\n    public void runSystemsCluster1HeartbeatJob() throws EventPlatformClientException, IOException, InterruptedException {\r\n        heartbeatJob().execute(&quot;SYSTEMS_CLUSTER_1&quot;);\r\n    }\r\n\r\n}\r\n\r\n```\r\n### `HeartbeatJob`\r\n```java\r\n/**\r\n * The HeartbeatJob class is responsible for running a scheduled job that\r\n * sends and receives heartbeats for the configured environment. It also tracks and reports metrics\r\n * for the job runs using Micrometer.\r\n */\r\n\r\npackage com.climate.canarytesting.jobs;\r\n\r\nimport com.climate.canarytesting.events.heartbeat.HeartBeatConsumer;\r\nimport com.climate.canarytesting.events.heartbeat.HeartBeatProducer;\r\nimport com.climate.eventplatform.client.EventPlatformClientException;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport org.springframework.scheduling.annotation.Async;\r\n\r\nimport io.micrometer.core.instrument.Counter;\r\nimport io.micrometer.core.instrument.MeterRegistry;\r\n\r\nimport java.io.IOException;\r\nimport java.util.Map;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\nimport java.text.MessageFormat;\r\n\r\n\r\npublic class HeartbeatJob extends BaseJob {\r\n\r\n    private final Logger log = LoggerFactory.getLogger(HeartbeatJob.class);\r\n    private String clusterName;\r\n    private final String jobName = &quot;Heartbeat&quot;;\r\n    private final Map&lt;String, Counter&gt; totalJobRunsCounters;\r\n    private final Map&lt;String, Counter&gt; successfulJobRunsCounters;\r\n\r\n    /**\r\n     * Constructs a new HeartbeatJob instance with the provided meter registry.\r\n     *\r\n     * @param meterRegistry the MeterRegistry instance for reporting metrics\r\n     */\r\n    public HeartbeatJob(MeterRegistry meterRegistry) {\r\n        super(meterRegistry);\r\n        this.totalJobRunsCounters = new ConcurrentHashMap&lt;&gt;();\r\n        this.successfulJobRunsCounters = new ConcurrentHashMap&lt;&gt;();\r\n    }\r\n\r\n    /**\r\n     * Executes the heartbeat job on a schedule, sending and receiving heartbeats for the configured environment.\r\n     * It also increments the counters for total job runs and successful job runs.\r\n     *\r\n     * @param clusterName the name of the cluster for which the heartbeat job is executed\r\n     * @throws EventPlatformClientException if there is an error with the event platform client\r\n     * @throws InterruptedException         if the thread is interrupted\r\n     * @throws IOException                  if there is an I/O error\r\n     */\r\n    @Async(&quot;heartbeatExecutor&quot;)\r\n    public void execute(String clusterName) throws EventPlatformClientException, InterruptedException, IOException {\r\n        this.clusterName = clusterName;\r\n        clusterUrl = setClusterUrlByClusterName(clusterName);\r\n\r\n        String counterName;\r\n        counterName = MessageFormat.format(&quot;ep.heartbeat.{0}.runs.total&quot;, clusterName);\r\n        Counter totalJobRunsCounter = getOrCreateCounter(this.totalJobRunsCounters, counterName);\r\n\r\n        counterName = MessageFormat.format(&quot;ep.heartbeat.{0}.runs.success&quot;, clusterName);\r\n        Counter successfulJobRunsCounter = getOrCreateCounter(this.successfulJobRunsCounters, counterName);\r\n\r\n        log.info(&quot;{}-{}: incrementing totalJobsRunsCounter&quot;, jobName, clusterName);\r\n        totalJobRunsCounter.increment();\r\n\r\n        HeartBeatProducer producer = null;\r\n        HeartBeatConsumer consumer = null;\r\n\r\n        try {\r\n            log.info(&quot;{}-{}: Producer initializing...&quot;, jobName, clusterName);\r\n            producer = new HeartBeatProducer(clusterUrl);\r\n\r\n            String producerName = MessageFormat.format(&quot;{0}-{1} producer&quot;, jobName, clusterName);\r\n            producer.produceAll(producerName);\r\n            log.info(&quot;{}-{}: Producer terminated...&quot;, jobName, clusterName);\r\n\r\n            Thread.sleep(5000);\r\n\r\n            log.info(&quot;{}-{}: Consumer initializing...&quot;, jobName, clusterName);\r\n            consumer = new HeartBeatConsumer(clusterUrl);\r\n\r\n            String consumerName = MessageFormat.format(&quot;{0}-{1} consumer&quot;, jobName, clusterName);\r\n            boolean consumed = consumer.consumeUntilTerminated(consumerName);\r\n            log.info(&quot;{}-{}: Consumer terminated...&quot;, jobName, clusterName);\r\n\r\n            if (consumed) {\r\n                log.info(&quot;{}-{}: incrementing successfulJobRunsCounter&quot;, jobName, clusterName);\r\n                successfulJobRunsCounter.increment();\r\n            }\r\n\r\n        } catch (EventPlatformClientException | InterruptedException | IOException e) {\r\n            log.error(&quot;{}-{}: Error during job execution. Message: {} {}&quot;, jobName, clusterName, e.getMessage(), e);\r\n        } finally {\r\n            if (producer != null) {\r\n                producer.close();\r\n            }\r\n            if (consumer != null) {\r\n                consumer.close();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n### `HeartbeatProducer`\r\n```java\r\npackage com.climate.canarytesting.events.heartbeat;\r\n\r\nimport channels.climate.heartbeat.heartbeat.generated.HeartbeatSchema;\r\nimport com.climate.eventplatform.client.EventPlatformClient;\r\nimport com.climate.eventplatform.client.EventPlatformClientException;\r\nimport com.climate.eventplatform.client.EventPlatformMessage;\r\nimport com.climate.eventplatform.client.EventPlatformProducer;\r\nimport com.climate.eventplatform.client.EventPlatformOAuth2CredsType;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class HeartBeatProducer {\r\n\r\n    // Constants\r\n    private static final String TOPIC_NAME = &quot;climate/heartbeat/heartbeat&quot;;\r\n    private static final String EVENT_AVRO_SCHEMA = HeartbeatSchema.getClassSchema().toString();\r\n    private static final int NUM_MESSAGES = 5;\r\n    private static final String TERMINATING_STRING = &quot;##TERMINATE##&quot;;\r\n    private static final String SSM_PARAM_TEST_SERVICE_OAUTH2_CREDS = &quot;production.global.event-platform.oauth2creds.sample-applications&quot;;\r\n    private final Logger log = LoggerFactory.getLogger(HeartBeatProducer.class);\r\n\r\n    // Instance variables\r\n    private static String serviceUrl;\r\n    private EventPlatformClient epClient;\r\n    private EventPlatformProducer&lt;HeartbeatSchema&gt; producer;\r\n\r\n\r\n    /**\r\n     * Constructs a new instance of the HeartBeatProducer class.\r\n     * @param serviceUrl The URL of the Event Platform service to produce messages to.\r\n     */\r\n    public HeartBeatProducer(String serviceUrl) throws EventPlatformClientException, IOException {\r\n        this.serviceUrl = serviceUrl;\r\n        this.epClient = new EventPlatformClient(\r\n                serviceUrl,\r\n                EventPlatformOAuth2CredsType.SSM,\r\n                SSM_PARAM_TEST_SERVICE_OAUTH2_CREDS);\r\n        this.producer = new EventPlatformProducer&lt;&gt;(epClient, TOPIC_NAME, EVENT_AVRO_SCHEMA);\r\n    }\r\n\r\n    /**\r\n     * Sends a series of heartbeat messages to the Event Platform.\r\n     * @param producerName The name of the producer.\r\n     * @throws EventPlatformClientException if an error occurs while sending the messages.\r\n     * @throws InterruptedException if the thread is interrupted while sleeping.\r\n     * @throws IOException if an I/O error occurs.\r\n     */\r\n    public void produceAll(String producerName) throws EventPlatformClientException, InterruptedException, IOException {\r\n        HeartbeatSchema[] heartbeatMessages = new HeartbeatSchema[NUM_MESSAGES + 1]; // add additional spot for TERMINATING_STRING\r\n        heartbeatMessages[0] = new HeartbeatSchema(producerName + &quot; heartbeat message 0&quot;);\r\n        heartbeatMessages[1] = new HeartbeatSchema(producerName + &quot; heartbeat message 1&quot;);\r\n        heartbeatMessages[2] = new HeartbeatSchema(producerName + &quot; heartbeat message 2&quot;);\r\n        heartbeatMessages[3] = new HeartbeatSchema(producerName + &quot; heartbeat message 3&quot;);\r\n        heartbeatMessages[4] = new HeartbeatSchema(producerName + &quot; heartbeat message 4&quot;);\r\n        heartbeatMessages[5] = new HeartbeatSchema(TERMINATING_STRING);\r\n\r\n        for (int i = 0; i &lt; heartbeatMessages.length; i++) {\r\n            EventPlatformMessage&lt;HeartbeatSchema&gt; currentMessage = new EventPlatformMessage&lt;&gt;(heartbeatMessages[i], producerName);\r\n            producer.send(currentMessage);\r\n            log.info(&quot;{} sent a message: {}&quot;, producerName, currentMessage.getMessageValue());\r\n            Thread.sleep(1000);\r\n        }\r\n    }\r\n\r\n    public void close() {\r\n        if (producer != null) {\r\n            try {\r\n                producer.close();\r\n            } catch ( IOException ex) {\r\n                log.error(&quot;Failed to close producer.&quot;, ex);\r\n            }\r\n        }\r\n        if (epClient != null) {\r\n            try {\r\n                epClient.close();\r\n            } catch (IOException ex) {\r\n                log.error(&quot;Failed to close EventPlatformClient.&quot;, ex);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n### `HeartbeatConsumer`\r\n```java\r\npackage com.climate.canarytesting.events.heartbeat;\r\n\r\nimport channels.climate.heartbeat.heartbeat.generated.HeartbeatSchema;\r\nimport com.climate.eventplatform.client.*;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport java.io.IOException;\r\n\r\n/**\r\n * This class defines a HeartBeatConsumer that is used to consume events from the Event Platform.\r\n */\r\npublic class HeartBeatConsumer {\r\n\r\n    // Constants\r\n    private static final String TOPIC_NAME = &quot;climate/heartbeat/heartbeat&quot;;\r\n    private static final String SUBSCRIPTION_NAME = &quot;heartbeat_subscription&quot;;\r\n    private static final String EVENT_AVRO_SCHEMA = HeartbeatSchema.getClassSchema().toString();\r\n    private static final String SSM_PARAM_TEST_SERVICE_OAUTH2_CREDS = &quot;production.global.event-platform.oauth2creds.sample-applications&quot;;\r\n    private static final int ACK_TIMEOUT = 1;\r\n    private static final String terminatingString = &quot;##TERMINATE##&quot;;\r\n    private final Logger log = LoggerFactory.getLogger(HeartBeatConsumer.class);\r\n\r\n    // Instance variables\r\n    private static String serviceUrl;\r\n    private EventPlatformClient epClient;\r\n    private EventPlatformConsumer&lt;HeartbeatSchema&gt; consumer;\r\n\r\n    /**\r\n     * Constructor that initializes a HeartBeatConsumer with a specific service URL.\r\n     *\r\n     * @param serviceUrl the service URL to use\r\n     */\r\n    public HeartBeatConsumer(String serviceUrl) throws EventPlatformClientException, IOException {\r\n        this.serviceUrl = serviceUrl;\r\n        this.epClient = new EventPlatformClient(\r\n                serviceUrl,\r\n                EventPlatformOAuth2CredsType.SSM,\r\n                SSM_PARAM_TEST_SERVICE_OAUTH2_CREDS);\r\n        this.consumer = new EventPlatformConsumer&lt;&gt;(\r\n                epClient,\r\n                TOPIC_NAME,\r\n                SUBSCRIPTION_NAME,\r\n                EVENT_AVRO_SCHEMA,\r\n                ACK_TIMEOUT,\r\n                EventPlatformSubscriptionInitialPosition.LATEST);\r\n    }\r\n\r\n    /**\r\n     * This method consumes events from the Event Platform until a terminating string is received.\r\n     *\r\n     * @param consumerName the name of the consumer\r\n     * @throws IOException if there is an I/O error\r\n     */\r\n    public boolean consumeUntilTerminated(final String consumerName) throws IOException {\r\n        boolean consumed = false;\r\n\r\n        try {\r\n            consumed = receiveAndProcessUntilTerminated(consumer, consumerName, terminatingString);\r\n        } catch (EventPlatformClientException ex) {\r\n            log.error(&quot;Failed to construct consumer.&quot;, ex);\r\n        }\r\n\r\n        return consumed;\r\n    }\r\n\r\n    /**\r\n     * This method receives events from an EventPlatformConsumer and processes them until a terminating string is received.\r\n     *\r\n     * @param consumer          the EventPlatformConsumer to receive events from\r\n     * @param consumerName      the name of the consumer\r\n     * @param terminatingString the terminating string to look for in the received events\r\n     * @return true if a message was successfully consumed, false otherwise\r\n     * @throws EventPlatformClientException if there is an error receiving or acknowledging an event\r\n     */\r\n    public boolean receiveAndProcessUntilTerminated(\r\n            EventPlatformConsumer&lt;HeartbeatSchema&gt; consumer,\r\n            String consumerName,\r\n            String terminatingString) throws EventPlatformClientException {\r\n        int messageCount = 0;\r\n        boolean consumed = false;\r\n\r\n        // The loop exits only on encountering an exception e.g. connection severed, event schema deleted.\r\n        while (true) {\r\n            EventPlatformMessage&lt;HeartbeatSchema&gt; event = consumer.receive();\r\n\r\n            log.info(&quot;The event received by {} is: {}&quot;, consumerName, event.getMessageValue());\r\n\r\n            try {\r\n                consumer.acknowledge(event);\r\n                messageCount++;\r\n\r\n                // Check if the received event contains the terminating string\r\n                if (event.getMessageValue().toString().contains(terminatingString)) {\r\n                    log.info(&quot;{} messages processed.&quot;, messageCount);\r\n                    log.info(&quot;Terminating string received, exiting.&quot;);\r\n                    consumed = true;\r\n                    break;\r\n                }\r\n            } catch (EventPlatformClientException ex) {\r\n                log.error(&quot;Failed to acknowledge the event&quot;, ex);\r\n                break;\r\n            }\r\n        }\r\n        return consumed;\r\n    }\r\n\r\n    public void close() {\r\n        if (consumer != null) {\r\n            try {\r\n                consumer.close();\r\n            } catch (IOException ex) {\r\n                log.error(&quot;Failed to close consumer.&quot;, ex);\r\n            }\r\n        }\r\n        if (epClient != null) {\r\n            try {\r\n                epClient.close();\r\n            } catch (IOException ex) {\r\n                log.error(&quot;Failed to close event platform client.&quot;, ex);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## Things I&#39;ve tried\r\n - I have found that spacing out the scheduled jobs seems to works. About a 30 second time difference and the logs seem to behave correctly.\r\n - Updated `Logger` variables to from `static` to non-static: `private final Logger log = LoggerFactory.getLogger(HeartBeatProducer.class);`","title":"Log interleaving issue in a multi-threaded application using Spring Boot and asynchronous tasks","body":"<p>I am working on a Spring Boot application that runs multiple instances of a job called <code>HeartbeatJob</code> concurrently. Each <code>HeartbeatJob</code> has a producer and a consumer that produce and consume messages respectively.</p>\n<p>I have a custom <code>ThreadPoolTaskExecutor</code> with a specified pool size to handle these tasks asynchronously. My problem is that the logs from different threads seem to be interleaved, making it difficult to analyze the logs.</p>\n<p>Here is an example of how the logs that are getting mixed up:</p>\n<pre><code>12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-SYSTEMS_CLUSTER_1 producer heartbeat message 0&quot;}\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-SYSTEMS_CLUSTER_0 producer heartbeat message 0&quot;}\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-PRODUCTION_CLUSTER_0 producer heartbeat message 0&quot;}\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-PRODUCTION_CLUSTER_1 producer heartbeat message 0&quot;}\n12:04:22.908 [heartbeatExecutor-3] INFO  com.climate.canarytesting.events.heartbeat.HeartBeatConsumer - The event received by Heartbeat-SYSTEMS_CLUSTER_0 consumer is: {&quot;name&quot;: &quot;Heartbeat-SYSTEMS_CLUSTER_1 producer heartbeat message 1&quot;}\n</code></pre>\n<p>The logs should never be receiving a message from outside of its cluster.\nSo these logs messages look like:</p>\n<pre><code>The event received by Heartbeat-{cluster} consumer is: {&quot;name&quot;: &quot;Heartbeat-{cluster} producer heartbeat message {n}&quot;}\n</code></pre>\n<p>Here is the relevant code:</p>\n<h3><code>HeartbeatJobConfiguration</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * This module is responsible for configuring the HeartbeatJob instances and their execution for different clusters.\n * It creates a HeartbeatJob bean and a ThreadPoolTaskExecutor bean for executing the HeartbeatJobs.\n * The module schedules the execution of HeartbeatJobs for the following clusters:\n * - PRODUCTION_CLUSTER_0\n * - PRODUCTION_CLUSTER_1\n * - SYSTEMS_CLUSTER_0\n * - SYSTEMS_CLUSTER_1\n */\n\npackage com.climate.config;\n\nimport com.climate.canarytesting.jobs.HeartbeatJob;\n\nimport com.climate.eventplatform.client.EventPlatformClientException;\nimport io.micrometer.core.instrument.MeterRegistry;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.task.TaskExecutor;\nimport org.springframework.scheduling.annotation.EnableAsync;\nimport org.springframework.scheduling.annotation.Scheduled;\nimport org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n\nimport java.io.IOException;\n\n@Configuration\n@EnableAsync\npublic class HeartbeatJobConfiguration {\n\n    private MeterRegistry meterRegistry;\n\n    /**\n     * Constructs a new HeartbeatJobConfiguration instance with the provided MeterRegistry.\n     *\n     * @param meterRegistry the MeterRegistry instance\n     */\n    @Autowired\n    public HeartbeatJobConfiguration(MeterRegistry meterRegistry) {\n        this.meterRegistry = meterRegistry;\n    }\n\n    /**\n     * Creates a new HeartbeatJob bean with the provided MeterRegistry.\n     *\n     * @return a new HeartbeatJob instance\n     */\n    @Bean\n    public HeartbeatJob heartbeatJob() {\n        return new HeartbeatJob(meterRegistry);\n    }\n\n    /**\n     * Creates a new ThreadPoolTaskExecutor bean for executing HeartbeatJobs.\n     *\n     * @return a new ThreadPoolTaskExecutor instance\n     */\n    @Bean\n    public TaskExecutor heartbeatExecutor() {\n        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(4);\n        executor.setMaxPoolSize(4);\n        executor.setThreadNamePrefix(&quot;heartbeatExecutor-&quot;);\n        return executor;\n    }\n\n    // The following scheduled jobs run the HeartbeatJob for different clusters\n    // at the specified cron schedule. The HeartbeatJob is responsible for sending\n    // and receiving heartbeats for each respective cluster.\n\n    @Scheduled(cron = &quot;0 * * * * ?&quot;)\n    public void runProductionCluster0HeartbeatJob() throws EventPlatformClientException, IOException, InterruptedException {\n        heartbeatJob().execute(&quot;PRODUCTION_CLUSTER_0&quot;);\n    }\n\n    @Scheduled(cron = &quot;0 * * * * ?&quot;)\n    public void runProductionCluster1HeartbeatJob() throws EventPlatformClientException, IOException, InterruptedException {\n        heartbeatJob().execute(&quot;PRODUCTION_CLUSTER_1&quot;);\n    }\n\n    @Scheduled(cron = &quot;0 * * * * ?&quot;)\n    public void runSystemsCluster0HeartbeatJob() throws EventPlatformClientException, IOException, InterruptedException {\n        heartbeatJob().execute(&quot;SYSTEMS_CLUSTER_0&quot;);\n    }\n\n    @Scheduled(cron = &quot;0 * * * * ?&quot;)\n    public void runSystemsCluster1HeartbeatJob() throws EventPlatformClientException, IOException, InterruptedException {\n        heartbeatJob().execute(&quot;SYSTEMS_CLUSTER_1&quot;);\n    }\n\n}\n\n</code></pre>\n<h3><code>HeartbeatJob</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * The HeartbeatJob class is responsible for running a scheduled job that\n * sends and receives heartbeats for the configured environment. It also tracks and reports metrics\n * for the job runs using Micrometer.\n */\n\npackage com.climate.canarytesting.jobs;\n\nimport com.climate.canarytesting.events.heartbeat.HeartBeatConsumer;\nimport com.climate.canarytesting.events.heartbeat.HeartBeatProducer;\nimport com.climate.eventplatform.client.EventPlatformClientException;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport org.springframework.scheduling.annotation.Async;\n\nimport io.micrometer.core.instrument.Counter;\nimport io.micrometer.core.instrument.MeterRegistry;\n\nimport java.io.IOException;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.text.MessageFormat;\n\n\npublic class HeartbeatJob extends BaseJob {\n\n    private final Logger log = LoggerFactory.getLogger(HeartbeatJob.class);\n    private String clusterName;\n    private final String jobName = &quot;Heartbeat&quot;;\n    private final Map&lt;String, Counter&gt; totalJobRunsCounters;\n    private final Map&lt;String, Counter&gt; successfulJobRunsCounters;\n\n    /**\n     * Constructs a new HeartbeatJob instance with the provided meter registry.\n     *\n     * @param meterRegistry the MeterRegistry instance for reporting metrics\n     */\n    public HeartbeatJob(MeterRegistry meterRegistry) {\n        super(meterRegistry);\n        this.totalJobRunsCounters = new ConcurrentHashMap&lt;&gt;();\n        this.successfulJobRunsCounters = new ConcurrentHashMap&lt;&gt;();\n    }\n\n    /**\n     * Executes the heartbeat job on a schedule, sending and receiving heartbeats for the configured environment.\n     * It also increments the counters for total job runs and successful job runs.\n     *\n     * @param clusterName the name of the cluster for which the heartbeat job is executed\n     * @throws EventPlatformClientException if there is an error with the event platform client\n     * @throws InterruptedException         if the thread is interrupted\n     * @throws IOException                  if there is an I/O error\n     */\n    @Async(&quot;heartbeatExecutor&quot;)\n    public void execute(String clusterName) throws EventPlatformClientException, InterruptedException, IOException {\n        this.clusterName = clusterName;\n        clusterUrl = setClusterUrlByClusterName(clusterName);\n\n        String counterName;\n        counterName = MessageFormat.format(&quot;ep.heartbeat.{0}.runs.total&quot;, clusterName);\n        Counter totalJobRunsCounter = getOrCreateCounter(this.totalJobRunsCounters, counterName);\n\n        counterName = MessageFormat.format(&quot;ep.heartbeat.{0}.runs.success&quot;, clusterName);\n        Counter successfulJobRunsCounter = getOrCreateCounter(this.successfulJobRunsCounters, counterName);\n\n        log.info(&quot;{}-{}: incrementing totalJobsRunsCounter&quot;, jobName, clusterName);\n        totalJobRunsCounter.increment();\n\n        HeartBeatProducer producer = null;\n        HeartBeatConsumer consumer = null;\n\n        try {\n            log.info(&quot;{}-{}: Producer initializing...&quot;, jobName, clusterName);\n            producer = new HeartBeatProducer(clusterUrl);\n\n            String producerName = MessageFormat.format(&quot;{0}-{1} producer&quot;, jobName, clusterName);\n            producer.produceAll(producerName);\n            log.info(&quot;{}-{}: Producer terminated...&quot;, jobName, clusterName);\n\n            Thread.sleep(5000);\n\n            log.info(&quot;{}-{}: Consumer initializing...&quot;, jobName, clusterName);\n            consumer = new HeartBeatConsumer(clusterUrl);\n\n            String consumerName = MessageFormat.format(&quot;{0}-{1} consumer&quot;, jobName, clusterName);\n            boolean consumed = consumer.consumeUntilTerminated(consumerName);\n            log.info(&quot;{}-{}: Consumer terminated...&quot;, jobName, clusterName);\n\n            if (consumed) {\n                log.info(&quot;{}-{}: incrementing successfulJobRunsCounter&quot;, jobName, clusterName);\n                successfulJobRunsCounter.increment();\n            }\n\n        } catch (EventPlatformClientException | InterruptedException | IOException e) {\n            log.error(&quot;{}-{}: Error during job execution. Message: {} {}&quot;, jobName, clusterName, e.getMessage(), e);\n        } finally {\n            if (producer != null) {\n                producer.close();\n            }\n            if (consumer != null) {\n                consumer.close();\n            }\n        }\n    }\n}\n</code></pre>\n<h3><code>HeartbeatProducer</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>package com.climate.canarytesting.events.heartbeat;\n\nimport channels.climate.heartbeat.heartbeat.generated.HeartbeatSchema;\nimport com.climate.eventplatform.client.EventPlatformClient;\nimport com.climate.eventplatform.client.EventPlatformClientException;\nimport com.climate.eventplatform.client.EventPlatformMessage;\nimport com.climate.eventplatform.client.EventPlatformProducer;\nimport com.climate.eventplatform.client.EventPlatformOAuth2CredsType;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.io.IOException;\n\npublic class HeartBeatProducer {\n\n    // Constants\n    private static final String TOPIC_NAME = &quot;climate/heartbeat/heartbeat&quot;;\n    private static final String EVENT_AVRO_SCHEMA = HeartbeatSchema.getClassSchema().toString();\n    private static final int NUM_MESSAGES = 5;\n    private static final String TERMINATING_STRING = &quot;##TERMINATE##&quot;;\n    private static final String SSM_PARAM_TEST_SERVICE_OAUTH2_CREDS = &quot;production.global.event-platform.oauth2creds.sample-applications&quot;;\n    private final Logger log = LoggerFactory.getLogger(HeartBeatProducer.class);\n\n    // Instance variables\n    private static String serviceUrl;\n    private EventPlatformClient epClient;\n    private EventPlatformProducer&lt;HeartbeatSchema&gt; producer;\n\n\n    /**\n     * Constructs a new instance of the HeartBeatProducer class.\n     * @param serviceUrl The URL of the Event Platform service to produce messages to.\n     */\n    public HeartBeatProducer(String serviceUrl) throws EventPlatformClientException, IOException {\n        this.serviceUrl = serviceUrl;\n        this.epClient = new EventPlatformClient(\n                serviceUrl,\n                EventPlatformOAuth2CredsType.SSM,\n                SSM_PARAM_TEST_SERVICE_OAUTH2_CREDS);\n        this.producer = new EventPlatformProducer&lt;&gt;(epClient, TOPIC_NAME, EVENT_AVRO_SCHEMA);\n    }\n\n    /**\n     * Sends a series of heartbeat messages to the Event Platform.\n     * @param producerName The name of the producer.\n     * @throws EventPlatformClientException if an error occurs while sending the messages.\n     * @throws InterruptedException if the thread is interrupted while sleeping.\n     * @throws IOException if an I/O error occurs.\n     */\n    public void produceAll(String producerName) throws EventPlatformClientException, InterruptedException, IOException {\n        HeartbeatSchema[] heartbeatMessages = new HeartbeatSchema[NUM_MESSAGES + 1]; // add additional spot for TERMINATING_STRING\n        heartbeatMessages[0] = new HeartbeatSchema(producerName + &quot; heartbeat message 0&quot;);\n        heartbeatMessages[1] = new HeartbeatSchema(producerName + &quot; heartbeat message 1&quot;);\n        heartbeatMessages[2] = new HeartbeatSchema(producerName + &quot; heartbeat message 2&quot;);\n        heartbeatMessages[3] = new HeartbeatSchema(producerName + &quot; heartbeat message 3&quot;);\n        heartbeatMessages[4] = new HeartbeatSchema(producerName + &quot; heartbeat message 4&quot;);\n        heartbeatMessages[5] = new HeartbeatSchema(TERMINATING_STRING);\n\n        for (int i = 0; i &lt; heartbeatMessages.length; i++) {\n            EventPlatformMessage&lt;HeartbeatSchema&gt; currentMessage = new EventPlatformMessage&lt;&gt;(heartbeatMessages[i], producerName);\n            producer.send(currentMessage);\n            log.info(&quot;{} sent a message: {}&quot;, producerName, currentMessage.getMessageValue());\n            Thread.sleep(1000);\n        }\n    }\n\n    public void close() {\n        if (producer != null) {\n            try {\n                producer.close();\n            } catch ( IOException ex) {\n                log.error(&quot;Failed to close producer.&quot;, ex);\n            }\n        }\n        if (epClient != null) {\n            try {\n                epClient.close();\n            } catch (IOException ex) {\n                log.error(&quot;Failed to close EventPlatformClient.&quot;, ex);\n            }\n        }\n    }\n}\n</code></pre>\n<h3><code>HeartbeatConsumer</code></h3>\n<pre class=\"lang-java prettyprint-override\"><code>package com.climate.canarytesting.events.heartbeat;\n\nimport channels.climate.heartbeat.heartbeat.generated.HeartbeatSchema;\nimport com.climate.eventplatform.client.*;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport java.io.IOException;\n\n/**\n * This class defines a HeartBeatConsumer that is used to consume events from the Event Platform.\n */\npublic class HeartBeatConsumer {\n\n    // Constants\n    private static final String TOPIC_NAME = &quot;climate/heartbeat/heartbeat&quot;;\n    private static final String SUBSCRIPTION_NAME = &quot;heartbeat_subscription&quot;;\n    private static final String EVENT_AVRO_SCHEMA = HeartbeatSchema.getClassSchema().toString();\n    private static final String SSM_PARAM_TEST_SERVICE_OAUTH2_CREDS = &quot;production.global.event-platform.oauth2creds.sample-applications&quot;;\n    private static final int ACK_TIMEOUT = 1;\n    private static final String terminatingString = &quot;##TERMINATE##&quot;;\n    private final Logger log = LoggerFactory.getLogger(HeartBeatConsumer.class);\n\n    // Instance variables\n    private static String serviceUrl;\n    private EventPlatformClient epClient;\n    private EventPlatformConsumer&lt;HeartbeatSchema&gt; consumer;\n\n    /**\n     * Constructor that initializes a HeartBeatConsumer with a specific service URL.\n     *\n     * @param serviceUrl the service URL to use\n     */\n    public HeartBeatConsumer(String serviceUrl) throws EventPlatformClientException, IOException {\n        this.serviceUrl = serviceUrl;\n        this.epClient = new EventPlatformClient(\n                serviceUrl,\n                EventPlatformOAuth2CredsType.SSM,\n                SSM_PARAM_TEST_SERVICE_OAUTH2_CREDS);\n        this.consumer = new EventPlatformConsumer&lt;&gt;(\n                epClient,\n                TOPIC_NAME,\n                SUBSCRIPTION_NAME,\n                EVENT_AVRO_SCHEMA,\n                ACK_TIMEOUT,\n                EventPlatformSubscriptionInitialPosition.LATEST);\n    }\n\n    /**\n     * This method consumes events from the Event Platform until a terminating string is received.\n     *\n     * @param consumerName the name of the consumer\n     * @throws IOException if there is an I/O error\n     */\n    public boolean consumeUntilTerminated(final String consumerName) throws IOException {\n        boolean consumed = false;\n\n        try {\n            consumed = receiveAndProcessUntilTerminated(consumer, consumerName, terminatingString);\n        } catch (EventPlatformClientException ex) {\n            log.error(&quot;Failed to construct consumer.&quot;, ex);\n        }\n\n        return consumed;\n    }\n\n    /**\n     * This method receives events from an EventPlatformConsumer and processes them until a terminating string is received.\n     *\n     * @param consumer          the EventPlatformConsumer to receive events from\n     * @param consumerName      the name of the consumer\n     * @param terminatingString the terminating string to look for in the received events\n     * @return true if a message was successfully consumed, false otherwise\n     * @throws EventPlatformClientException if there is an error receiving or acknowledging an event\n     */\n    public boolean receiveAndProcessUntilTerminated(\n            EventPlatformConsumer&lt;HeartbeatSchema&gt; consumer,\n            String consumerName,\n            String terminatingString) throws EventPlatformClientException {\n        int messageCount = 0;\n        boolean consumed = false;\n\n        // The loop exits only on encountering an exception e.g. connection severed, event schema deleted.\n        while (true) {\n            EventPlatformMessage&lt;HeartbeatSchema&gt; event = consumer.receive();\n\n            log.info(&quot;The event received by {} is: {}&quot;, consumerName, event.getMessageValue());\n\n            try {\n                consumer.acknowledge(event);\n                messageCount++;\n\n                // Check if the received event contains the terminating string\n                if (event.getMessageValue().toString().contains(terminatingString)) {\n                    log.info(&quot;{} messages processed.&quot;, messageCount);\n                    log.info(&quot;Terminating string received, exiting.&quot;);\n                    consumed = true;\n                    break;\n                }\n            } catch (EventPlatformClientException ex) {\n                log.error(&quot;Failed to acknowledge the event&quot;, ex);\n                break;\n            }\n        }\n        return consumed;\n    }\n\n    public void close() {\n        if (consumer != null) {\n            try {\n                consumer.close();\n            } catch (IOException ex) {\n                log.error(&quot;Failed to close consumer.&quot;, ex);\n            }\n        }\n        if (epClient != null) {\n            try {\n                epClient.close();\n            } catch (IOException ex) {\n                log.error(&quot;Failed to close event platform client.&quot;, ex);\n            }\n        }\n    }\n}\n</code></pre>\n<h2>Things I've tried</h2>\n<ul>\n<li>I have found that spacing out the scheduled jobs seems to works. About a 30 second time difference and the logs seem to behave correctly.</li>\n<li>Updated <code>Logger</code> variables to from <code>static</code> to non-static: <code>private final Logger log = LoggerFactory.getLogger(HeartBeatProducer.class);</code></li>\n</ul>\n"},{"tags":["java","spring","spring-boot","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1682319353,"post_id":76088572,"comment_id":134190326,"body_markdown":"Why areyou creating your own `KafkaTemplate` and there appears to be no mapping in your `@DynamicPropertySource` method for the kafka container. Which feels like they are disconnected from each other. Your container setup is weird as well `@TestContainers` will already manage the lifecycle of the `@Container`s so no need to do that yourself (as well). Finally I would suggest using something like Awaitility to write your tests instead of a hard thread.sleep. Also finally calling `toString` doesn&#39;t produce JSON, so I doubnt your listener will be able to deserialize your payload.","body":"Why areyou creating your own <code>KafkaTemplate</code> and there appears to be no mapping in your <code>@DynamicPropertySource</code> method for the kafka container. Which feels like they are disconnected from each other. Your container setup is weird as well <code>@TestContainers</code> will already manage the lifecycle of the <code>@Container</code>s so no need to do that yourself (as well). Finally I would suggest using something like Awaitility to write your tests instead of a hard thread.sleep. Also finally calling <code>toString</code> doesn&#39;t produce JSON, so I doubnt your listener will be able to deserialize your payload."},{"owner":{"account_id":24919598,"reputation":79,"user_id":18788036,"display_name":"charbs29"},"score":0,"creation_date":1682319966,"post_id":76088572,"comment_id":134190417,"body_markdown":"@M.Deinum — Thanks for input. A few things such as my container setup, and also calling toString must have completely flown over my head. I could use ObjectMapper to properly convert the payload to json. I’ll make those adjustments and respond again. Thank you!","body":"@M.Deinum — Thanks for input. A few things such as my container setup, and also calling toString must have completely flown over my head. I could use ObjectMapper to properly convert the payload to json. I’ll make those adjustments and respond again. Thank you!"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1682320289,"post_id":76088572,"comment_id":134190454,"body_markdown":"Just inject the `KafkaTemplate` from the context, just remove that setup and juist place `@Autowired` on the `KafkaTemplate`. Spring Boot will inject one.","body":"Just inject the <code>KafkaTemplate</code> from the context, just remove that setup and juist place <code>@Autowired</code> on the <code>KafkaTemplate</code>. Spring Boot will inject one."},{"owner":{"account_id":24919598,"reputation":79,"user_id":18788036,"display_name":"charbs29"},"score":0,"creation_date":1682385832,"post_id":76088572,"comment_id":134203561,"body_markdown":"@M.Deinum -- Your tips helped me solve the error. I used ```@Autowired``` to inject the ```KafkaTemplate```, I removed the ```@BeforeAll``` setup and used the ```DynamicPropertyRegistry``` to add the kafka container bootstrap server to the registry. I also added the producer serializer in my ````application-test.properties```. I&#39;ll update the question with the adjusted code.","body":"@M.Deinum -- Your tips helped me solve the error. I used <code>@Autowired</code> to inject the <code>KafkaTemplate</code>, I removed the <code>@BeforeAll</code> setup and used the <code>DynamicPropertyRegistry</code> to add the kafka container bootstrap server to the registry. I also added the producer serializer in my ````application-test.properties```. I&#39;ll update the question with the adjusted code."}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1682403775,"post_id":76097099,"comment_id":134205274,"body_markdown":"Instead of `@TestPropertySource` you can add `@ActiveProfile(&quot;test&quot;)` and Spring Boot will auto matically load that properties file.","body":"Instead of <code>@TestPropertySource</code> you can add <code>@ActiveProfile(&quot;test&quot;)</code> and Spring Boot will auto matically load that properties file."}],"tags":[],"owner":{"account_id":24919598,"reputation":79,"user_id":18788036,"display_name":"charbs29"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682386139,"creation_date":1682386139,"answer_id":76097099,"question_id":76088572,"body_markdown":"With the help of @M.Deinum, I solved the issue I was facing. It was quite simple; I used ```@Autowired``` to inject the ```KafkaTemplate``` from the context and removed the entire ```@BeforeAll``` setup. By removing the ```@BeforeAll``` setup, I had to use the ```DynamicPropertyRegistry``` and the ```KafkaContainer``` to add the ```spring.kafka.bootstrap-server``` to the properties.\r\n\r\nBelow is the adjusted code.\r\n\r\n**application-test.properties**\r\n```\r\n# Kafka Properties\r\nspring.kafka.topic.name=tappedtechnologies.test.topics\r\n\r\n# Kafka Consumer Properties\r\nspring.kafka.consumer.group-id=testId\r\nspring.kafka.consumer.auto-offset-reset=earliest\r\nspring.kafka.consumer.key-serializer=org.apache.kafka.common.serialization.StringDeserializer\r\nspring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\r\nspring.kafka.consumer.properties.spring.json.type.mapping=event:com.tappedtechnologies.userservice.events.RecipientSavedEvent\r\nspring.kafka.consumer.properties.spring.json.default.type=com.tappedtechnologies.userservice.events.RecipientSavedEvent\r\nspring.kafka.consumer.properties.spring.deserializer.value.delegate.class=org.springframework.kafka.support.serializer.JsonDeserializer\r\n\r\n# Kafka Producer Properties\r\n# -- NEWLY ADDED -- #\r\nspring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\r\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\r\n```\r\n\r\n**RecipientPayloadConsumerTests**\r\n```\r\n@Testcontainers\r\n@SpringBootTest\r\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\npublic class RecipientPayloadConsumerTests {\r\n\r\n    private static final String TOPIC = &quot;tappedtechnologies.test.topics&quot;;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    @Autowired\r\n    private KafkaTemplate&lt;String, RecipientSavedEvent&gt; kafkaTemplate;\r\n\r\n    @Container\r\n    public static MySQLContainer&lt;?&gt; mySQLContainer = new MySQLContainer&lt;&gt;(&quot;mysql:latest&quot;);\r\n    @Container\r\n    public static KafkaContainer kafkaContainer = new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:6.2.1&quot;));\r\n\r\n    @DynamicPropertySource\r\n    public static void setProperties(DynamicPropertyRegistry registry) {\r\n        registry.add(&quot;spring.datasource.url&quot;, mySQLContainer::getJdbcUrl);\r\n        registry.add(&quot;spring.datasource.username&quot;, mySQLContainer::getUsername);\r\n        registry.add(&quot;spring.datasource.password&quot;, mySQLContainer::getPassword);\r\n\r\n        registry.add(&quot;spring.kafka.bootstrap-servers&quot;, kafkaContainer::getBootstrapServers);\r\n    }\r\n\r\n    @AfterEach\r\n    public void afterEach() {\r\n        userRepository.deleteAll();\r\n    }\r\n\r\n    @Test\r\n    public void consumePayload_Should_SavePayload() throws InterruptedException {\r\n        RecipientSavedEvent expected = getPayload();\r\n        kafkaTemplate.send(TOPIC, 0, Instant.now().getEpochSecond(), expected.getPayloadKey(), expected);\r\n        Thread.sleep(5000);\r\n\r\n        User actual = userRepository.findByEmail(expected.getEmail()).orElse(null);\r\n\r\n        assert actual != null;\r\n        assertThat(actual.getFirstName()).isEqualTo(expected.getFirstName());\r\n        assertThat(actual.getLastName()).isEqualTo(expected.getLastName());\r\n        assertThat(actual.getEmail()).isEqualTo(expected.getEmail());\r\n    }\r\n\r\n    private RecipientSavedEvent getPayload() {\r\n        return RecipientSavedEvent.builder()\r\n                .payloadKey(UUID.randomUUID().toString())\r\n                .firstName(&quot;Randy&quot;)\r\n                .lastName(&quot;Marsh&quot;)\r\n                .email(&quot;randy@tegridyfarms.com&quot;)\r\n                .build();\r\n    }\r\n}\r\n```\r\n","title":"Integration Test Issues for Kafka Consumer","body":"<p>With the help of @M.Deinum, I solved the issue I was facing. It was quite simple; I used <code>@Autowired</code> to inject the <code>KafkaTemplate</code> from the context and removed the entire <code>@BeforeAll</code> setup. By removing the <code>@BeforeAll</code> setup, I had to use the <code>DynamicPropertyRegistry</code> and the <code>KafkaContainer</code> to add the <code>spring.kafka.bootstrap-server</code> to the properties.</p>\n<p>Below is the adjusted code.</p>\n<p><strong>application-test.properties</strong></p>\n<pre><code># Kafka Properties\nspring.kafka.topic.name=tappedtechnologies.test.topics\n\n# Kafka Consumer Properties\nspring.kafka.consumer.group-id=testId\nspring.kafka.consumer.auto-offset-reset=earliest\nspring.kafka.consumer.key-serializer=org.apache.kafka.common.serialization.StringDeserializer\nspring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\nspring.kafka.consumer.properties.spring.json.type.mapping=event:com.tappedtechnologies.userservice.events.RecipientSavedEvent\nspring.kafka.consumer.properties.spring.json.default.type=com.tappedtechnologies.userservice.events.RecipientSavedEvent\nspring.kafka.consumer.properties.spring.deserializer.value.delegate.class=org.springframework.kafka.support.serializer.JsonDeserializer\n\n# Kafka Producer Properties\n# -- NEWLY ADDED -- #\nspring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\n</code></pre>\n<p><strong>RecipientPayloadConsumerTests</strong></p>\n<pre><code>@Testcontainers\n@SpringBootTest\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\npublic class RecipientPayloadConsumerTests {\n\n    private static final String TOPIC = &quot;tappedtechnologies.test.topics&quot;;\n\n    @Autowired\n    private UserRepository userRepository;\n    @Autowired\n    private KafkaTemplate&lt;String, RecipientSavedEvent&gt; kafkaTemplate;\n\n    @Container\n    public static MySQLContainer&lt;?&gt; mySQLContainer = new MySQLContainer&lt;&gt;(&quot;mysql:latest&quot;);\n    @Container\n    public static KafkaContainer kafkaContainer = new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:6.2.1&quot;));\n\n    @DynamicPropertySource\n    public static void setProperties(DynamicPropertyRegistry registry) {\n        registry.add(&quot;spring.datasource.url&quot;, mySQLContainer::getJdbcUrl);\n        registry.add(&quot;spring.datasource.username&quot;, mySQLContainer::getUsername);\n        registry.add(&quot;spring.datasource.password&quot;, mySQLContainer::getPassword);\n\n        registry.add(&quot;spring.kafka.bootstrap-servers&quot;, kafkaContainer::getBootstrapServers);\n    }\n\n    @AfterEach\n    public void afterEach() {\n        userRepository.deleteAll();\n    }\n\n    @Test\n    public void consumePayload_Should_SavePayload() throws InterruptedException {\n        RecipientSavedEvent expected = getPayload();\n        kafkaTemplate.send(TOPIC, 0, Instant.now().getEpochSecond(), expected.getPayloadKey(), expected);\n        Thread.sleep(5000);\n\n        User actual = userRepository.findByEmail(expected.getEmail()).orElse(null);\n\n        assert actual != null;\n        assertThat(actual.getFirstName()).isEqualTo(expected.getFirstName());\n        assertThat(actual.getLastName()).isEqualTo(expected.getLastName());\n        assertThat(actual.getEmail()).isEqualTo(expected.getEmail());\n    }\n\n    private RecipientSavedEvent getPayload() {\n        return RecipientSavedEvent.builder()\n                .payloadKey(UUID.randomUUID().toString())\n                .firstName(&quot;Randy&quot;)\n                .lastName(&quot;Marsh&quot;)\n                .email(&quot;randy@tegridyfarms.com&quot;)\n                .build();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":24919598,"reputation":79,"user_id":18788036,"display_name":"charbs29"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":938,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76097099,"answer_count":1,"score":0,"last_activity_date":1682386139,"creation_date":1682310157,"question_id":76088572,"body_markdown":"EDIT: The test now only passes when I use localhost:9092 for the bootstrap server, which is the default port I have my kafka/zookeeper docker image running on. \r\n\r\nI need help with my integration test, which tests that the Kafka payload is consumed. I am using Test containers for the KafkaContainer and the MysqlContainer. The goal of the test is to ensure that the SUT can correctly consumer the payload from the Kafka produce, but the consumer is never being hit during the test. Despite not working correctly during the test, the code works as it should when I run it locally.\r\n\r\nSo far, I&#39;ve tried using an EmbeddedKafkaBroker, which did not work, and I also tried changing the message topic. I know that the issue is somewhere in my configuration, but I can&#39;t exactly put my finger on it. Below, the application-test.properties, the SUT, the test class, and the logs will be attached in that specific order.\r\n\r\nAlso, the reason that I am using the ```userRepository``` for my assertions, is that whenever the payload is consumed, it is saved to the repository and I want to check if the saved user exists. \r\n\r\n**application-test.properties**\r\n```\r\n# Kafka Properties\r\nspring.kafka.topic.name=tappedtechnologies.emails.recipients\r\n\r\n# Kafka Consumer Properties\r\nspring.kafka.consumer.group-id=userId\r\nspring.kafka.consumer.auto-offset-reset=earliest\r\nspring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\r\nspring.kafka.consumer.properties.spring.json.default.type=com.tappedtechnologies.userservice.events.RecipientSavedEvent\r\nspring.kafka.consumer.properties.spring.deserializer.value.delegate.class=org.springframework.kafka.support.serializer.JsonDeserializer\r\n```\r\n\r\n**SUT (RecipientPayloadConsumer)**\r\n```\r\n@Slf4j\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class RecipientPayloadConsumer implements KafkaConsumer&lt;RecipientSavedEvent&gt; {\r\n\r\n    private final Creator&lt;User&gt; userCreator;\r\n\r\n    @Override\r\n    @KafkaListener(topics = &quot;${spring.kafka.topic.name}&quot;, groupId = &quot;${spring.kafka.consumer.group-id}&quot;)\r\n    public void consumePayload(@Payload RecipientSavedEvent payload) {\r\n        log.info(&quot;Payload received from &#39;email-service&#39;: {}&quot;, payload);\r\n        User userToSave = this.convertPayloadToUser(payload);\r\n        try {\r\n            userCreator.create(userToSave);\r\n        } catch (IllegalStateException exception) {\r\n            log.error(&quot;IllegalStateException caught attempting to save payload from email-service.&quot;);\r\n            log.error(&quot;Message: {}&quot;, exception.getMessage());\r\n            throw exception;\r\n        }\r\n    }\r\n\r\n    private User convertPayloadToUser(RecipientSavedEvent payload) {\r\n        return User.builder()\r\n                .firstName(payload.getFirstName())\r\n                .lastName(payload.getLastName())\r\n                .email(payload.getEmail())\r\n                .build();\r\n    }\r\n}\r\n\r\n```\r\n\r\n**RecipientPayloadConsumerTest**\r\n```\r\n@Testcontainers\r\n@SpringBootTest\r\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\npublic class RecipientPayloadConsumerTests {\r\n\r\n    private static KafkaTemplate&lt;String, String&gt; kafkaTemplate;\r\n\r\n    @Autowired\r\n    private UserRepository userRepository;\r\n    @Autowired\r\n    private RecipientPayloadConsumer sut;\r\n\r\n    @Container\r\n    public static MySQLContainer&lt;?&gt; mySQLContainer = new MySQLContainer&lt;&gt;(&quot;mysql:latest&quot;);\r\n    @Container\r\n    public static KafkaContainer kafkaContainer = new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:6.2.1&quot;));\r\n\r\n    @DynamicPropertySource\r\n    public static void setProperties(DynamicPropertyRegistry registry) {\r\n        registry.add(&quot;spring.datasource.url&quot;, mySQLContainer::getJdbcUrl);\r\n        registry.add(&quot;spring.datasource.username&quot;, mySQLContainer::getUsername);\r\n        registry.add(&quot;spring.datasource.password&quot;, mySQLContainer::getPassword);\r\n    }\r\n\r\n    @BeforeAll\r\n    public static void setUp() {\r\n        Map&lt;String, Object&gt; producerProps = new HashMap&lt;&gt;();\r\n        producerProps.put(&quot;bootstrap.servers&quot;, kafkaContainer.getBootstrapServers());\r\n        producerProps.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\n        producerProps.put(&quot;value.serializer&quot;, &quot;org.springframework.kafka.support.serializer.JsonSerializer&quot;);\r\n\r\n        kafkaTemplate = new KafkaTemplate&lt;&gt;(new DefaultKafkaProducerFactory&lt;&gt;(producerProps));\r\n        kafkaTemplate.setDefaultTopic(&quot;tappedtechnologies.emails.recipients&quot;);\r\n\r\n        kafkaContainer.start();\r\n        mySQLContainer.start();\r\n    }\r\n\r\n    @AfterEach\r\n    public void afterEach() {\r\n        userRepository.deleteAll();\r\n    }\r\n\r\n    @AfterAll\r\n    public static void tearDown() {\r\n        kafkaContainer.stop();\r\n        mySQLContainer.stop();\r\n    }\r\n\r\n    @Test\r\n    public void consumePayload_Should_SavePayload() throws InterruptedException {\r\n        RecipientSavedEvent expected = getPayload();\r\n        kafkaTemplate.sendDefault(expected.getPayloadKey(), expected.toString());\r\n        Thread.sleep(5000);\r\n\r\n        User actual = userRepository.findByEmail(expected.getEmail()).orElse(null);\r\n\r\n        assertThat(actual).isNotNull();\r\n        assertThat(actual.getFirstName()).isEqualTo(expected.getFirstName());\r\n        assertThat(actual.getLastName()).isEqualTo(expected.getLastName());\r\n        assertThat(actual.getEmail()).isEqualTo(expected.getEmail());\r\n    }\r\n\r\n    private RecipientSavedEvent getPayload() {\r\n        return RecipientSavedEvent.builder()\r\n                .payloadKey(UUID.randomUUID().toString())\r\n                .firstName(&quot;Randy&quot;)\r\n                .lastName(&quot;Marsh&quot;)\r\n                .email(&quot;randy@tegridyfarms.com&quot;)\r\n                .build();\r\n    }\r\n}\r\n```\r\n**logs**\r\n```\r\n2023-04-23T21:07:12.300-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [    Test worker] o.a.k.clients.producer.KafkaProducer     : [Producer clientId=producer-1] Instantiated an idempotent producer.\r\n2023-04-23T21:07:12.324-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.3.2\r\n2023-04-23T21:07:12.324-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: b66af662e61082cb\r\n2023-04-23T21:07:12.324-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1682309232324\r\n2023-04-23T21:07:12.993-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 1 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:12.994-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Cluster ID: Im2Ds_vjQq289WTPzltJlA\r\n2023-04-23T21:07:13.018-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] o.a.k.c.p.internals.TransactionManager   : [Producer clientId=producer-1] ProducerId set to 0 with epoch 0\r\n2023-04-23T21:07:13.150-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 4 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:13.289-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 5 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:13.424-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 6 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:13.550-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 7 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:13.667-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 8 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:13.789-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 9 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:13.911-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 10 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:14.609-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 11 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:14.754-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 12 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\r\n2023-04-23T21:07:14.934-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition tappedtechnologies.emails.recipients-0 to 0 since the associated topicId changed from null to mmZzWI7DSkGiNcBk1J0Lmw\r\n```","title":"Integration Test Issues for Kafka Consumer","body":"<p>EDIT: The test now only passes when I use localhost:9092 for the bootstrap server, which is the default port I have my kafka/zookeeper docker image running on.</p>\n<p>I need help with my integration test, which tests that the Kafka payload is consumed. I am using Test containers for the KafkaContainer and the MysqlContainer. The goal of the test is to ensure that the SUT can correctly consumer the payload from the Kafka produce, but the consumer is never being hit during the test. Despite not working correctly during the test, the code works as it should when I run it locally.</p>\n<p>So far, I've tried using an EmbeddedKafkaBroker, which did not work, and I also tried changing the message topic. I know that the issue is somewhere in my configuration, but I can't exactly put my finger on it. Below, the application-test.properties, the SUT, the test class, and the logs will be attached in that specific order.</p>\n<p>Also, the reason that I am using the <code>userRepository</code> for my assertions, is that whenever the payload is consumed, it is saved to the repository and I want to check if the saved user exists.</p>\n<p><strong>application-test.properties</strong></p>\n<pre><code># Kafka Properties\nspring.kafka.topic.name=tappedtechnologies.emails.recipients\n\n# Kafka Consumer Properties\nspring.kafka.consumer.group-id=userId\nspring.kafka.consumer.auto-offset-reset=earliest\nspring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\nspring.kafka.consumer.properties.spring.json.default.type=com.tappedtechnologies.userservice.events.RecipientSavedEvent\nspring.kafka.consumer.properties.spring.deserializer.value.delegate.class=org.springframework.kafka.support.serializer.JsonDeserializer\n</code></pre>\n<p><strong>SUT (RecipientPayloadConsumer)</strong></p>\n<pre><code>@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class RecipientPayloadConsumer implements KafkaConsumer&lt;RecipientSavedEvent&gt; {\n\n    private final Creator&lt;User&gt; userCreator;\n\n    @Override\n    @KafkaListener(topics = &quot;${spring.kafka.topic.name}&quot;, groupId = &quot;${spring.kafka.consumer.group-id}&quot;)\n    public void consumePayload(@Payload RecipientSavedEvent payload) {\n        log.info(&quot;Payload received from 'email-service': {}&quot;, payload);\n        User userToSave = this.convertPayloadToUser(payload);\n        try {\n            userCreator.create(userToSave);\n        } catch (IllegalStateException exception) {\n            log.error(&quot;IllegalStateException caught attempting to save payload from email-service.&quot;);\n            log.error(&quot;Message: {}&quot;, exception.getMessage());\n            throw exception;\n        }\n    }\n\n    private User convertPayloadToUser(RecipientSavedEvent payload) {\n        return User.builder()\n                .firstName(payload.getFirstName())\n                .lastName(payload.getLastName())\n                .email(payload.getEmail())\n                .build();\n    }\n}\n\n</code></pre>\n<p><strong>RecipientPayloadConsumerTest</strong></p>\n<pre><code>@Testcontainers\n@SpringBootTest\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\npublic class RecipientPayloadConsumerTests {\n\n    private static KafkaTemplate&lt;String, String&gt; kafkaTemplate;\n\n    @Autowired\n    private UserRepository userRepository;\n    @Autowired\n    private RecipientPayloadConsumer sut;\n\n    @Container\n    public static MySQLContainer&lt;?&gt; mySQLContainer = new MySQLContainer&lt;&gt;(&quot;mysql:latest&quot;);\n    @Container\n    public static KafkaContainer kafkaContainer = new KafkaContainer(DockerImageName.parse(&quot;confluentinc/cp-kafka:6.2.1&quot;));\n\n    @DynamicPropertySource\n    public static void setProperties(DynamicPropertyRegistry registry) {\n        registry.add(&quot;spring.datasource.url&quot;, mySQLContainer::getJdbcUrl);\n        registry.add(&quot;spring.datasource.username&quot;, mySQLContainer::getUsername);\n        registry.add(&quot;spring.datasource.password&quot;, mySQLContainer::getPassword);\n    }\n\n    @BeforeAll\n    public static void setUp() {\n        Map&lt;String, Object&gt; producerProps = new HashMap&lt;&gt;();\n        producerProps.put(&quot;bootstrap.servers&quot;, kafkaContainer.getBootstrapServers());\n        producerProps.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\n        producerProps.put(&quot;value.serializer&quot;, &quot;org.springframework.kafka.support.serializer.JsonSerializer&quot;);\n\n        kafkaTemplate = new KafkaTemplate&lt;&gt;(new DefaultKafkaProducerFactory&lt;&gt;(producerProps));\n        kafkaTemplate.setDefaultTopic(&quot;tappedtechnologies.emails.recipients&quot;);\n\n        kafkaContainer.start();\n        mySQLContainer.start();\n    }\n\n    @AfterEach\n    public void afterEach() {\n        userRepository.deleteAll();\n    }\n\n    @AfterAll\n    public static void tearDown() {\n        kafkaContainer.stop();\n        mySQLContainer.stop();\n    }\n\n    @Test\n    public void consumePayload_Should_SavePayload() throws InterruptedException {\n        RecipientSavedEvent expected = getPayload();\n        kafkaTemplate.sendDefault(expected.getPayloadKey(), expected.toString());\n        Thread.sleep(5000);\n\n        User actual = userRepository.findByEmail(expected.getEmail()).orElse(null);\n\n        assertThat(actual).isNotNull();\n        assertThat(actual.getFirstName()).isEqualTo(expected.getFirstName());\n        assertThat(actual.getLastName()).isEqualTo(expected.getLastName());\n        assertThat(actual.getEmail()).isEqualTo(expected.getEmail());\n    }\n\n    private RecipientSavedEvent getPayload() {\n        return RecipientSavedEvent.builder()\n                .payloadKey(UUID.randomUUID().toString())\n                .firstName(&quot;Randy&quot;)\n                .lastName(&quot;Marsh&quot;)\n                .email(&quot;randy@tegridyfarms.com&quot;)\n                .build();\n    }\n}\n</code></pre>\n<p><strong>logs</strong></p>\n<pre><code>2023-04-23T21:07:12.300-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [    Test worker] o.a.k.clients.producer.KafkaProducer     : [Producer clientId=producer-1] Instantiated an idempotent producer.\n2023-04-23T21:07:12.324-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka version: 3.3.2\n2023-04-23T21:07:12.324-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka commitId: b66af662e61082cb\n2023-04-23T21:07:12.324-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [    Test worker] o.a.kafka.common.utils.AppInfoParser     : Kafka startTimeMs: 1682309232324\n2023-04-23T21:07:12.993-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 1 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:12.994-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Cluster ID: Im2Ds_vjQq289WTPzltJlA\n2023-04-23T21:07:13.018-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] o.a.k.c.p.internals.TransactionManager   : [Producer clientId=producer-1] ProducerId set to 0 with epoch 0\n2023-04-23T21:07:13.150-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 4 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:13.289-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 5 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:13.424-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 6 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:13.550-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 7 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:13.667-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 8 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:13.789-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 9 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:13.911-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 10 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:14.609-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 11 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:14.754-07:00  WARN [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Error while fetching metadata with correlation id 12 : {tappedtechnologies.emails.recipients=LEADER_NOT_AVAILABLE}\n2023-04-23T21:07:14.934-07:00  INFO [Tapped Technologies - User Service,,] 63697 --- [ad | producer-1] org.apache.kafka.clients.Metadata        : [Producer clientId=producer-1] Resetting the last seen epoch of partition tappedtechnologies.emails.recipients-0 to 0 since the associated topicId changed from null to mmZzWI7DSkGiNcBk1J0Lmw\n</code></pre>\n"},{"tags":["java","android","in-app-purchase","in-app-subscription","play-billing-library"],"comments":[{"owner":{"account_id":27431,"reputation":46866,"user_id":72437,"accept_rate":86,"display_name":"Cheok Yan Cheng"},"score":2,"creation_date":1665037690,"post_id":73959302,"comment_id":130606113,"body_markdown":"As per my testing, I am also not able to get any callback `billingManager.queryProductDetailsAsync`. No error message, no logging. Based on https://stackoverflow.com/a/72631462/72437 , it is due to Google Play is not updated. I think it is better for us to stick with v4 for a while, as we do not want our billing feature break, just because end users have a slightly older version of Google Play.","body":"As per my testing, I am also not able to get any callback <code>billingManager.queryProductDetailsAsync</code>. No error message, no logging. Based on <a href=\"https://stackoverflow.com/a/72631462/72437\">stackoverflow.com/a/72631462/72437</a> , it is due to Google Play is not updated. I think it is better for us to stick with v4 for a while, as we do not want our billing feature break, just because end users have a slightly older version of Google Play."},{"owner":{"account_id":3148592,"reputation":974,"user_id":2662539,"accept_rate":50,"display_name":"Ben"},"score":0,"creation_date":1687297795,"post_id":73959302,"comment_id":134916388,"body_markdown":"is the billing only can be tested under prod?","body":"is the billing only can be tested under prod?"}],"answers":[{"tags":[],"owner":{"account_id":1607789,"reputation":8298,"user_id":1487475,"accept_rate":93,"display_name":"zdd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682385539,"creation_date":1682385539,"answer_id":76097078,"question_id":73959302,"body_markdown":"You can check the response value of billingClient, if feature not support, tell user to upgrade their Play Store.\r\n\r\n```\r\nprivate void queryProduct() {\r\n    QueryProductDetailsParams queryProductDetailsParams =\r\n            QueryProductDetailsParams.newBuilder()\r\n                    .setProductList(productList)\r\n                    .build();\r\n    billingClient.queryProductDetailsAsync(\r\n            queryProductDetailsParams,\r\n            (billingResult, list) -&gt; {\r\n                // process returned productDetailsList\r\n                if (billingResult.getResponseCode() == BillingResponseCode.OK) {\r\n                    setProductDetailsList(list);\r\n                    this.billingListener.onQueryProductSuccess(list);\r\n                } else if (billingResult.getResponseCode() == BillingResponseCode.FEATURE_NOT_SUPPORTED) {\r\n                    Log.e(TAG, &quot;Feature not supported&quot;);\r\n                    ToastUtil.show(context, &quot;Feature not supported, Please upgrade your Google Play Store&quot;);\r\n                    this.billingListener.onQueryProductFailed(billingResult);\r\n                } else {\r\n                    Log.e(TAG, billingResult.getDebugMessage());\r\n                    this.billingListener.onQueryProductFailed(billingResult);\r\n                }\r\n            }\r\n    );\r\n}\r\n```\r\n\r\nSee the official documentation for details: https://developer.android.com/google/play/billing/integrate#process-the-result","title":"Unable to get subscription price after updating play billing library to v5","body":"<p>You can check the response value of billingClient, if feature not support, tell user to upgrade their Play Store.</p>\n<pre><code>private void queryProduct() {\n    QueryProductDetailsParams queryProductDetailsParams =\n            QueryProductDetailsParams.newBuilder()\n                    .setProductList(productList)\n                    .build();\n    billingClient.queryProductDetailsAsync(\n            queryProductDetailsParams,\n            (billingResult, list) -&gt; {\n                // process returned productDetailsList\n                if (billingResult.getResponseCode() == BillingResponseCode.OK) {\n                    setProductDetailsList(list);\n                    this.billingListener.onQueryProductSuccess(list);\n                } else if (billingResult.getResponseCode() == BillingResponseCode.FEATURE_NOT_SUPPORTED) {\n                    Log.e(TAG, &quot;Feature not supported&quot;);\n                    ToastUtil.show(context, &quot;Feature not supported, Please upgrade your Google Play Store&quot;);\n                    this.billingListener.onQueryProductFailed(billingResult);\n                } else {\n                    Log.e(TAG, billingResult.getDebugMessage());\n                    this.billingListener.onQueryProductFailed(billingResult);\n                }\n            }\n    );\n}\n</code></pre>\n<p>See the official documentation for details: <a href=\"https://developer.android.com/google/play/billing/integrate#process-the-result\" rel=\"nofollow noreferrer\">https://developer.android.com/google/play/billing/integrate#process-the-result</a></p>\n"}],"owner":{"account_id":18869253,"reputation":42,"user_id":13764283,"display_name":"BhavitBJ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":947,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682385539,"creation_date":1664966928,"question_id":73959302,"body_markdown":"I am unable to get subscription price after updating google play billing library from v4 to v5.\r\nBilling flow is working perfectly and I am also able to purchase the product.\r\n\r\nI was able to get prices of subscription products on v4.\r\n\r\nI&#39;ve tried this but I am not getting price.\r\n\r\n```        \r\nif (billingClient.isReady()) {\r\n\r\n            QueryProductDetailsParams queryProductDetailsParams =\r\n                    QueryProductDetailsParams.newBuilder()\r\n                            .setProductList(\r\n                                    ImmutableList.of(\r\n                                            QueryProductDetailsParams.Product.newBuilder()\r\n                                                  .setProductId(ITEM_SKU_SUBSCRIBE)\r\n                                                  .setProductType(BillingClient.ProductType.SUBS)\r\n                                                    .build())).build();\r\n\r\n            billingClient.queryProductDetailsAsync(queryProductDetailsParams, new\r\nProductDetailsResponseListener() {\r\n                @Override\r\n                public void onProductDetailsResponse(@NonNull BillingResult billingResult, @NonNull List&lt;ProductDetails&gt; list) {\r\n\r\n                    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\r\n\r\n                            monthlyPriceTV.setText(list.get(0).getSubscriptionOfferDetails().get(0).getPricingPhases().getPricingPhaseList().get(0).getFormattedPrice());\r\n\r\n                }\r\n            });\r\n        } \r\n```\r\n\r\n\r\nI am not getting any errors or warnings\r\n\r\nAny help will be really appreciated","title":"Unable to get subscription price after updating play billing library to v5","body":"<p>I am unable to get subscription price after updating google play billing library from v4 to v5.\nBilling flow is working perfectly and I am also able to purchase the product.</p>\n<p>I was able to get prices of subscription products on v4.</p>\n<p>I've tried this but I am not getting price.</p>\n<pre><code>if (billingClient.isReady()) {\n\n            QueryProductDetailsParams queryProductDetailsParams =\n                    QueryProductDetailsParams.newBuilder()\n                            .setProductList(\n                                    ImmutableList.of(\n                                            QueryProductDetailsParams.Product.newBuilder()\n                                                  .setProductId(ITEM_SKU_SUBSCRIBE)\n                                                  .setProductType(BillingClient.ProductType.SUBS)\n                                                    .build())).build();\n\n            billingClient.queryProductDetailsAsync(queryProductDetailsParams, new\nProductDetailsResponseListener() {\n                @Override\n                public void onProductDetailsResponse(@NonNull BillingResult billingResult, @NonNull List&lt;ProductDetails&gt; list) {\n\n                    if (billingResult.getResponseCode() == BillingClient.BillingResponseCode.OK) {\n\n                            monthlyPriceTV.setText(list.get(0).getSubscriptionOfferDetails().get(0).getPricingPhases().getPricingPhaseList().get(0).getFormattedPrice());\n\n                }\n            });\n        } \n</code></pre>\n<p>I am not getting any errors or warnings</p>\n<p>Any help will be really appreciated</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1682383631,"post_id":76096970,"comment_id":134203342,"body_markdown":"The main documentation for `execute()` says: &quot;Executes the given command at some time in the future. The command may execute in a new thread, in a pooled thread, or in the calling thread, at the discretion of the Executor implementation.&quot; So the method has discretion to not use the thread pool at all.  Also some implementations such as `ThreadPoolExecutor` will throw `RejectedExecutionException` if the pool is shutdown.  Basically random code you found isn&#39;t great.","body":"The main documentation for <code>execute()</code> says: &quot;Executes the given command at some time in the future. The command may execute in a new thread, in a pooled thread, or in the calling thread, at the discretion of the Executor implementation.&quot; So the method has discretion to not use the thread pool at all.  Also some implementations such as <code>ThreadPoolExecutor</code> will throw <code>RejectedExecutionException</code> if the pool is shutdown.  Basically random code you found isn&#39;t great."},{"owner":{"account_id":12303918,"reputation":1053,"user_id":8977557,"accept_rate":80,"display_name":"Agrudge Amicus"},"score":0,"creation_date":1682383948,"post_id":76096970,"comment_id":134203375,"body_markdown":"@markspace Let&#39;s say that the executor is shutdown - in this case as well the flow will be at `accept()` and the flow will still be stuck waiting for new clients?","body":"@markspace Let&#39;s say that the executor is shutdown - in this case as well the flow will be at <code>accept()</code> and the flow will still be stuck waiting for new clients?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1682384451,"post_id":76096970,"comment_id":134203421,"body_markdown":"Fundamentally, you need to test code in your actual application to understand if it will work for you.  I outlined some of the possible scenarios already.","body":"Fundamentally, you need to test code in your actual application to understand if it will work for you.  I outlined some of the possible scenarios already."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1682385194,"post_id":76096970,"comment_id":134203494,"body_markdown":"Write some actual code, with a specific `Executor` implementation, and test it. Have you read the Javadoc for `accept()`? What do you think might happen when you call `close` from another thread? (I don&#39;t know the answer, but you can find out by trying it)","body":"Write some actual code, with a specific <code>Executor</code> implementation, and test it. Have you read the Javadoc for <code>accept()</code>? What do you think might happen when you call <code>close</code> from another thread? (I don&#39;t know the answer, but you can find out by trying it)"},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":1,"creation_date":1682386964,"post_id":76096970,"comment_id":134203671,"body_markdown":"@AgrudgeAmicus, Re, &quot;...still be stuck waiting for new clients?&quot; It will be stuck until _one_ client tries to connect. It will accept that client connection, and then the server thread will throw `RejectedExecutionException`. What happens next depends on how that server thread handles the exception. Meanwhile, the client will be sending some kind of request and awaiting a reply. Too bad for them, &#39;cause the connection probably will be closed by the server&#39;s OS before any reply is sent.","body":"@AgrudgeAmicus, Re, &quot;...still be stuck waiting for new clients?&quot; It will be stuck until <i>one</i> client tries to connect. It will accept that client connection, and then the server thread will throw <code>RejectedExecutionException</code>. What happens next depends on how that server thread handles the exception. Meanwhile, the client will be sending some kind of request and awaiting a reply. Too bad for them, &#39;cause the connection probably will be closed by the server&#39;s OS before any reply is sent."}],"owner":{"account_id":12303918,"reputation":1053,"user_id":8977557,"accept_rate":80,"display_name":"Agrudge Amicus"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682383223,"creation_date":1682383223,"question_id":76096970,"body_markdown":"I found this java code online in whoch threads are getting created when a client requests a connection from a server:\r\n\r\n\r\n\r\n    while (!executor.isShutdown()) \r\n    {\r\n        try \r\n        {\r\n            Socket socket = serverSocket.accept();\r\n\r\n            executor.execute(new FileServerHandler(socket));\r\n        } \r\n        catch (IOException e) \r\n        {\r\n            // handle exception\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public void shutdown() \r\n    {\r\n        executor.shutdown();\r\n\r\n        try \r\n        {\r\n            serverSocket.close();\r\n        } \r\n        catch (IOException e) \r\n        {\r\n            // handle exception\r\n        }\r\n    }\r\n\r\nAs per my understanding, if `executor.isShutdown()` is `true`, then the server should:\r\n\r\n&gt; Stop accepting new client requests.\r\n\r\n&gt; Let the threads who are currently in the queue or are active finish first.\r\n\r\nBut wouldn&#39;t the control flow in `while` loop be sitting on `accept()` which is a blocking call - and in case no other client connect request comes, the control will still be in the loop despite having the `executor.isShutdown()` condition as `true`?","title":"executor for creating thread pool for server","body":"<p>I found this java code online in whoch threads are getting created when a client requests a connection from a server:</p>\n<pre><code>while (!executor.isShutdown()) \n{\n    try \n    {\n        Socket socket = serverSocket.accept();\n\n        executor.execute(new FileServerHandler(socket));\n    } \n    catch (IOException e) \n    {\n        // handle exception\n    }\n}\n\n\n\npublic void shutdown() \n{\n    executor.shutdown();\n\n    try \n    {\n        serverSocket.close();\n    } \n    catch (IOException e) \n    {\n        // handle exception\n    }\n}\n</code></pre>\n<p>As per my understanding, if <code>executor.isShutdown()</code> is <code>true</code>, then the server should:</p>\n<blockquote>\n<p>Stop accepting new client requests.</p>\n</blockquote>\n<blockquote>\n<p>Let the threads who are currently in the queue or are active finish first.</p>\n</blockquote>\n<p>But wouldn't the control flow in <code>while</code> loop be sitting on <code>accept()</code> which is a blocking call - and in case no other client connect request comes, the control will still be in the loop despite having the <code>executor.isShutdown()</code> condition as <code>true</code>?</p>\n"},{"tags":["java","arraylist","charat"],"comments":[{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":2,"creation_date":1682365632,"post_id":76095543,"comment_id":134200815,"body_markdown":"Please, do not post code as an image. Post it as text.","body":"Please, do not post code as an image. Post it as text."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":3,"creation_date":1682365686,"post_id":76095543,"comment_id":134200831,"body_markdown":"Hello. Please don&#39;t post text/code as image/link ([more info](https://meta.stackoverflow.com/a/285557)) but as formatted text. Use [edit] option to correct your post.","body":"Hello. Please don&#39;t post text/code as image/link (<a href=\"https://meta.stackoverflow.com/a/285557\">more info</a>) but as formatted text. Use <a href=\"https://stackoverflow.com/posts/76095543/edit\">edit</a> option to correct your post."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1682365790,"post_id":76095543,"comment_id":134200848,"body_markdown":"`if (x.startsWith(&quot;S&quot;))`","body":"<code>if (x.startsWith(&quot;S&quot;))</code>"}],"answers":[{"tags":[],"owner":{"account_id":4173399,"reputation":11,"user_id":3420633,"display_name":"Jorge Vera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682367605,"creation_date":1682367605,"answer_id":76095804,"question_id":76095543,"body_markdown":"See this please\r\nfor Java\r\n\r\n    import java.util.ArrayList;\r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n            ArrayList&lt;String&gt; cars = new ArrayList&lt;String&gt;();\r\n            cars.add(&quot;Volvo&quot;); //position 0 in the array\r\n            cars.add(&quot;BMW&quot;); //position 1 in the array\r\n            cars.add(&quot;Ford&quot;); //position 2 in the array\r\n            cars.add(&quot;Mazda&quot;); //position 3 in the array\r\n            System.out.println(cars.get(0).toString().charAt(0));\r\n            System.out.println(cars.get(1).toString().charAt(0));\r\n            System.out.println(cars.get(2).toString().charAt(0));\r\n            System.out.println(cars.get(3).toString().charAt(0));\r\n        }\r\n    }\r\n\r\n\r\n","title":"How to access a specific character in a String ArrayList","body":"<p>See this please\nfor Java</p>\n<pre><code>import java.util.ArrayList;\npublic class MyClass {\n    public static void main(String args[]) {\n        ArrayList&lt;String&gt; cars = new ArrayList&lt;String&gt;();\n        cars.add(&quot;Volvo&quot;); //position 0 in the array\n        cars.add(&quot;BMW&quot;); //position 1 in the array\n        cars.add(&quot;Ford&quot;); //position 2 in the array\n        cars.add(&quot;Mazda&quot;); //position 3 in the array\n        System.out.println(cars.get(0).toString().charAt(0));\n        System.out.println(cars.get(1).toString().charAt(0));\n        System.out.println(cars.get(2).toString().charAt(0));\n        System.out.println(cars.get(3).toString().charAt(0));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6440378,"reputation":184,"user_id":4990575,"display_name":"Kurojin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682381615,"creation_date":1682381615,"answer_id":76096880,"question_id":76095543,"body_markdown":"First, you had an error in itemsArrayList.charAt(0) == &quot;S&quot; because you were comparing a string reference to a char primitive (different types).\r\n\r\nSecond, you still print all the strings because your condition is never true, you are testing if the first element of your string list (itemsArrayList.get(0)) starts with S which is never the case, because you first element is hello.\r\n\r\nyou test should look like this\r\n\r\n    if(x.charAt(0) == &#39;S&#39;)\r\n\r\nnotice how &#39;S&#39; is a character and not a String due to simple quotes","title":"How to access a specific character in a String ArrayList","body":"<p>First, you had an error in itemsArrayList.charAt(0) == &quot;S&quot; because you were comparing a string reference to a char primitive (different types).</p>\n<p>Second, you still print all the strings because your condition is never true, you are testing if the first element of your string list (itemsArrayList.get(0)) starts with S which is never the case, because you first element is hello.</p>\n<p>you test should look like this</p>\n<pre><code>if(x.charAt(0) == 'S')\n</code></pre>\n<p>notice how 'S' is a character and not a String due to simple quotes</p>\n"}],"owner":{"account_id":28404177,"reputation":1,"user_id":21728504,"display_name":"rhondaoj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1682381932,"creation_date":1682365480,"question_id":76095543,"body_markdown":"I am trying to print out the words in the ArrayList, given they do not start with an &quot;S&quot;. So, I need the first index of each item in the String ArrayList \r\n\r\n\r\nMy first attempt was the condition in the if statement to be:\r\nif(itemsArrayList.charAt(0) == &quot;S&quot;) but that throws me an error.\r\n\r\nThis one doesn&#39;t throw me an error, but it still prints out all of the items in the ArrayList (not skipping over &quot;Slim&quot; and &quot;Shady&quot;)\r\n\r\n[code][1]\r\n\r\n //won&#39;t let me post code as a text \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RkZ0Q.png","title":"How to access a specific character in a String ArrayList","body":"<p>I am trying to print out the words in the ArrayList, given they do not start with an &quot;S&quot;. So, I need the first index of each item in the String ArrayList</p>\n<p>My first attempt was the condition in the if statement to be:\nif(itemsArrayList.charAt(0) == &quot;S&quot;) but that throws me an error.</p>\n<p>This one doesn't throw me an error, but it still prints out all of the items in the ArrayList (not skipping over &quot;Slim&quot; and &quot;Shady&quot;)</p>\n<p><a href=\"https://i.stack.imgur.com/RkZ0Q.png\" rel=\"nofollow noreferrer\">code</a></p>\n<p>//won't let me post code as a text</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1682378074,"post_id":76096585,"comment_id":134202848,"body_markdown":"401 says &quot;This resource requires authentication and you didn&#39;t provide it. If you resubmit with valid authentication, I will let you access the resource&quot;.  Everything you need to know is already embodied in the 401 status code.  What benefit would you gain by adding a response body?","body":"401 says &quot;This resource requires authentication and you didn&#39;t provide it. If you resubmit with valid authentication, I will let you access the resource&quot;.  Everything you need to know is already embodied in the 401 status code.  What benefit would you gain by adding a response body?"},{"owner":{"account_id":22513973,"reputation":11,"user_id":16708492,"display_name":"tpdovu"},"score":0,"creation_date":1682379187,"post_id":76096585,"comment_id":134202955,"body_markdown":"@JimGarrison I&#39;m just wondering if there&#39;s a way to do it. For example if I try to do a get request to  an unspecified endpoint it will at least give a JSON object with timestamp, etc. Maybe it&#39;s not best practice to do that with 401 but I&#39;d just like to know if it&#39;s possible.","body":"@JimGarrison I&#39;m just wondering if there&#39;s a way to do it. For example if I try to do a get request to  an unspecified endpoint it will at least give a JSON object with timestamp, etc. Maybe it&#39;s not best practice to do that with 401 but I&#39;d just like to know if it&#39;s possible."},{"owner":{"account_id":1851020,"reputation":4117,"user_id":1677594,"display_name":"Guillaume Husta"},"score":0,"creation_date":1687209520,"post_id":76096585,"comment_id":134902052,"body_markdown":"Please have a look at this issue, discussing a very similar subject : https://github.com/spring-projects/spring-security/issues/5985","body":"Please have a look at this issue, discussing a very similar subject : <a href=\"https://github.com/spring-projects/spring-security/issues/5985\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security/issues/5985</a>"}],"answers":[{"tags":[],"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682381071,"creation_date":1682381071,"answer_id":76096856,"question_id":76096585,"body_markdown":"you can [create a custom authentication failure handler][1]. `Spring security` is the module that lets setup an authentication mechanism.\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-security-custom-authentication-failure-handler","title":"401 unauthorized error in springboot with no response body","body":"<p>you can <a href=\"https://www.baeldung.com/spring-security-custom-authentication-failure-handler\" rel=\"nofollow noreferrer\">create a custom authentication failure handler</a>. <code>Spring security</code> is the module that lets setup an authentication mechanism.</p>\n"}],"owner":{"account_id":22513973,"reputation":11,"user_id":16708492,"display_name":"tpdovu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2050,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1682381071,"creation_date":1682375988,"question_id":76096585,"body_markdown":"I&#39;m implementing a simple REST controller in springboot with token authentication. \r\nEverything works fine but when a user is not authenticated, springboot will return a 401 error with no response body. \r\n\r\nIs it possible for me to return a custom JSON object with a message such as &quot;Please provide a valid token.&quot;? \r\nSpringboot version is 3\r\n\r\nI&#39;ve tried to implement custom exception handlers but not sure if that&#39;s the correct path to achieve this result. ","title":"401 unauthorized error in springboot with no response body","body":"<p>I'm implementing a simple REST controller in springboot with token authentication.\nEverything works fine but when a user is not authenticated, springboot will return a 401 error with no response body.</p>\n<p>Is it possible for me to return a custom JSON object with a message such as &quot;Please provide a valid token.&quot;?\nSpringboot version is 3</p>\n<p>I've tried to implement custom exception handlers but not sure if that's the correct path to achieve this result.</p>\n"},{"tags":["java","phpmyadmin"],"comments":[{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1682371568,"post_id":76096136,"comment_id":134202009,"body_markdown":"You are returning a variable that is already in the class scope. Declare a variable inside the addProductToCart method and return it. A different approach is to not return it and just use a void method. The latter is not the best option in this case.","body":"You are returning a variable that is already in the class scope. Declare a variable inside the addProductToCart method and return it. A different approach is to not return it and just use a void method. The latter is not the best option in this case."},{"owner":{"account_id":26768049,"reputation":7,"user_id":20364883,"display_name":"Raduci"},"score":0,"creation_date":1682371884,"post_id":76096136,"comment_id":134202062,"body_markdown":"If I use the variable inside the addProductToCart ( the variable is a List) and i return it I can&#39;t call the displayProductsFromCart method because the variableis only in the first method, and wouldn&#39;t work it out, I already tried this ( maybe I did it the wrong way).","body":"If I use the variable inside the addProductToCart ( the variable is a List) and i return it I can&#39;t call the displayProductsFromCart method because the variableis only in the first method, and wouldn&#39;t work it out, I already tried this ( maybe I did it the wrong way)."}],"answers":[{"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1682383065,"post_id":76096843,"comment_id":134203294,"body_markdown":"Not `private List&lt;Product&gt; cart = new ArrayList&lt;&gt;();`?","body":"Not <code>private List&lt;Product&gt; cart = new ArrayList&lt;&gt;();</code>?"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1682385143,"post_id":76096843,"comment_id":134203489,"body_markdown":"That&#39;s nitpicking rather a lot, don&#39;t you think?","body":"That&#39;s nitpicking rather a lot, don&#39;t you think?"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1682426892,"post_id":76096843,"comment_id":134210559,"body_markdown":"Your code is Java 6. I don&#39;t think it&#39;s nit picking to mention something that&#39;s 17 years behind the times.","body":"Your code is Java 6. I don&#39;t think it&#39;s nit picking to mention something that&#39;s 17 years behind the times."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1682430450,"post_id":76096843,"comment_id":134211798,"body_markdown":"It works just fine on java17. Diamond is not mandatory.","body":"It works just fine on java17. Diamond is not mandatory."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1682440362,"post_id":76096843,"comment_id":134214788,"body_markdown":"As expected because Java promises that all code that ever compiled in any version will forever compile in future releases. Never mind...","body":"As expected because Java promises that all code that ever compiled in any version will forever compile in future releases. Never mind..."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682380817,"creation_date":1682380817,"answer_id":76096843,"question_id":76096136,"body_markdown":"It is updating. This code has.. many bugs.\r\n\r\n## `static` confusion\r\n\r\nYour `addProductToCart` method doesn&#39;t create a list, it uses the `static` field `cartList`. This is a bad idea; static is best avoided until much, much later. `main` has to be `static`, but get out immediately:\r\n\r\n```\r\npublic class ShoppingCart {\r\n  private List&lt;Product&gt; cart = new ArrayList&lt;Product&gt;();\r\n\r\n  public static void main(String[] args) {\r\n    new ShoppingCart().go();\r\n  }\r\n\r\n  void go() {\r\n  }\r\n}\r\n```\r\n\r\nis a much better setup.\r\n\r\nYour `addProductToCart` method returns this list, but this is mostly pointless - code can _already_ access it via `Main.cartList` and that is in fact exactly what you do in `displayProductsFromCart`. Your two bugs more or less cancel out; nevertheless, your linting tool (a tool that checks your code for dubious things, style mistakes, and likely errors) catches one of the two.\r\n\r\nGiven that `cart` is a field, your `addProductToCart` method should be declared to return `void`.\r\n\r\n## You ARE printing it\r\n\r\nYour `displayProductsFromCart` method works fine - after all, it prints 1 line per item in the cart and _it prints a line_. It&#39;s just that the product you are printing has, as name, `null`, and as value, nothing.\r\n\r\nLooking at your github repo, your `AlcoholicBeverage` class is broken. It has a constructor that takes in an int, a String, a double, and so on - but this constructor __does nothing__. You have to actually assign these local variables to the fields (method params turn into local variables - and like all local variables, once a method ends, these local variables poof out of existence entirely - and a constructor is just a special kind of method).\r\n\r\nThat constructor should contain `this.price = price;` and so on. Or, replace it with `record` (a new feature that, presumably, whatever book you are following doesn&#39;t know about yet; they cannot extend another class in any case so isn&#39;t going to work with this type hierarchy setup).\r\n\r\nGiven that your constructor does nothing, the fields return their initial values, which is `null` for name and `0.0` for price, and that is exactly what your display method prints.\r\n","title":"Why my cartList is not updating in Java? When i print the list elements it gives me null value","body":"<p>It is updating. This code has.. many bugs.</p>\n<h2><code>static</code> confusion</h2>\n<p>Your <code>addProductToCart</code> method doesn't create a list, it uses the <code>static</code> field <code>cartList</code>. This is a bad idea; static is best avoided until much, much later. <code>main</code> has to be <code>static</code>, but get out immediately:</p>\n<pre><code>public class ShoppingCart {\n  private List&lt;Product&gt; cart = new ArrayList&lt;Product&gt;();\n\n  public static void main(String[] args) {\n    new ShoppingCart().go();\n  }\n\n  void go() {\n  }\n}\n</code></pre>\n<p>is a much better setup.</p>\n<p>Your <code>addProductToCart</code> method returns this list, but this is mostly pointless - code can <em>already</em> access it via <code>Main.cartList</code> and that is in fact exactly what you do in <code>displayProductsFromCart</code>. Your two bugs more or less cancel out; nevertheless, your linting tool (a tool that checks your code for dubious things, style mistakes, and likely errors) catches one of the two.</p>\n<p>Given that <code>cart</code> is a field, your <code>addProductToCart</code> method should be declared to return <code>void</code>.</p>\n<h2>You ARE printing it</h2>\n<p>Your <code>displayProductsFromCart</code> method works fine - after all, it prints 1 line per item in the cart and <em>it prints a line</em>. It's just that the product you are printing has, as name, <code>null</code>, and as value, nothing.</p>\n<p>Looking at your github repo, your <code>AlcoholicBeverage</code> class is broken. It has a constructor that takes in an int, a String, a double, and so on - but this constructor <strong>does nothing</strong>. You have to actually assign these local variables to the fields (method params turn into local variables - and like all local variables, once a method ends, these local variables poof out of existence entirely - and a constructor is just a special kind of method).</p>\n<p>That constructor should contain <code>this.price = price;</code> and so on. Or, replace it with <code>record</code> (a new feature that, presumably, whatever book you are following doesn't know about yet; they cannot extend another class in any case so isn't going to work with this type hierarchy setup).</p>\n<p>Given that your constructor does nothing, the fields return their initial values, which is <code>null</code> for name and <code>0.0</code> for price, and that is exactly what your display method prints.</p>\n"}],"owner":{"account_id":26768049,"reputation":7,"user_id":20364883,"display_name":"Raduci"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76096843,"answer_count":1,"score":0,"last_activity_date":1682380817,"creation_date":1682370715,"question_id":76096136,"body_markdown":"[This is the full code, its up on GitHub][1]\r\n\r\nWith this code I want to get from database the info about the products and put them into a list, then print the list.\r\n\r\nIn the  method named ```addProductToCart(Scanner input)``` I get the message &quot;The return statement is never used&quot;. Also where i declare the list: ```private static List&lt;Product&gt; cartList = new ArrayList&lt;&gt;();``` I get the message &quot;Field cartList might be final&quot;\r\n\r\n```\r\npublic class Main {\r\n\r\n    private static List&lt;Product&gt; cartList = new ArrayList&lt;&gt;();\r\n\r\n    private static final String JDBC_URL = &quot;jdbc:mysql://localhost:3306/storedb&quot;;\r\n    private static final String USER = &quot;root&quot;;\r\n    private static final String PASSWORD = &quot;&quot;;\r\n    static Connection connection;\r\n    static PreparedStatement pStatement;\r\n    static Statement statement;\r\n\r\npublic static void main(String[] args) throws InterruptedException, SQLException {\r\nScanner input = new Scanner(System.in);\r\nint choice = input.nextInt();\r\n\r\nswitch(choice){\r\ncase 1 -&gt; addProductToCart(input);\r\ncase 2 - &gt; displayProductsFromCart();}\r\n\r\nprivate static List&lt;Product&gt; addProductToCart(Scanner input) throws SQLException {\r\n        System.out.println(&quot;Enter the name of the item you want to add to your cart&quot;);\r\n         connection = DriverManager.getConnection(JDBC_URL, USER, PASSWORD);\r\n         String sql = &quot;SELECT * FROM products WHERE Name = ? AND ((AlcoholPercentage &gt; 0 AND Kcal = 0) OR (AlcoholPercentage = 0 AND Kcal &gt; 0))&quot;;\r\n         input.nextLine();\r\n         String productName = input.next();\r\n\r\n         pStatement = connection.prepareStatement(sql);\r\n         pStatement.setString(1, productName);\r\n\r\n        ResultSet resultSet = pStatement.executeQuery();\r\n\r\n         while(resultSet.next()){\r\n             int id = resultSet.getInt(&quot;ID&quot;);\r\n             productName = resultSet.getString(&quot;Name&quot;);\r\n             double price = resultSet.getDouble(&quot;Price&quot;);\r\n             int quantity = resultSet.getInt(&quot;Quantity&quot;);\r\n             double alcoholpercentage = resultSet.getDouble(&quot;AlcoholPercentage&quot;);\r\n             int kcal = resultSet.getInt(&quot;Kcal&quot;);\r\n\r\n             if(alcoholpercentage != 0){\r\n                 cartList.add(new AlcoholicBeverage(id, productName, price, quantity, alcoholpercentage));\r\n             }else{\r\n                 cartList.add(new FoodProduct(id, productName, price, quantity, kcal));\r\n             }\r\n\r\n             System.out.println(&quot;You addeed to your cart: &quot; + productName + &quot; product!&quot;);\r\n         }\r\n         return cartList;\r\n    }\r\n\r\n    private static void displayProductsFromCart(){\r\n        for (Product product : cartList){\r\n            System.out.println(product.getName() + &quot; - $&quot; + product.getPrice());\r\n        }\r\n    }\r\n\r\n}\r\n\r\n}\r\n```\r\n\r\n[![This is how the console looks like][2]][2]\r\n\r\n\r\n[![This is how the database table products looks like][3]][3]\r\n\r\n\r\n  [1]: https://github.com/Raduci/JavaProject\r\n  [2]: https://i.stack.imgur.com/iH9Qs.png\r\n  [3]: https://i.stack.imgur.com/dw4NZ.png","title":"Why my cartList is not updating in Java? When i print the list elements it gives me null value","body":"<p><a href=\"https://github.com/Raduci/JavaProject\" rel=\"nofollow noreferrer\">This is the full code, its up on GitHub</a></p>\n<p>With this code I want to get from database the info about the products and put them into a list, then print the list.</p>\n<p>In the  method named <code>addProductToCart(Scanner input)</code> I get the message &quot;The return statement is never used&quot;. Also where i declare the list: <code>private static List&lt;Product&gt; cartList = new ArrayList&lt;&gt;();</code> I get the message &quot;Field cartList might be final&quot;</p>\n<pre><code>public class Main {\n\n    private static List&lt;Product&gt; cartList = new ArrayList&lt;&gt;();\n\n    private static final String JDBC_URL = &quot;jdbc:mysql://localhost:3306/storedb&quot;;\n    private static final String USER = &quot;root&quot;;\n    private static final String PASSWORD = &quot;&quot;;\n    static Connection connection;\n    static PreparedStatement pStatement;\n    static Statement statement;\n\npublic static void main(String[] args) throws InterruptedException, SQLException {\nScanner input = new Scanner(System.in);\nint choice = input.nextInt();\n\nswitch(choice){\ncase 1 -&gt; addProductToCart(input);\ncase 2 - &gt; displayProductsFromCart();}\n\nprivate static List&lt;Product&gt; addProductToCart(Scanner input) throws SQLException {\n        System.out.println(&quot;Enter the name of the item you want to add to your cart&quot;);\n         connection = DriverManager.getConnection(JDBC_URL, USER, PASSWORD);\n         String sql = &quot;SELECT * FROM products WHERE Name = ? AND ((AlcoholPercentage &gt; 0 AND Kcal = 0) OR (AlcoholPercentage = 0 AND Kcal &gt; 0))&quot;;\n         input.nextLine();\n         String productName = input.next();\n\n         pStatement = connection.prepareStatement(sql);\n         pStatement.setString(1, productName);\n\n        ResultSet resultSet = pStatement.executeQuery();\n\n         while(resultSet.next()){\n             int id = resultSet.getInt(&quot;ID&quot;);\n             productName = resultSet.getString(&quot;Name&quot;);\n             double price = resultSet.getDouble(&quot;Price&quot;);\n             int quantity = resultSet.getInt(&quot;Quantity&quot;);\n             double alcoholpercentage = resultSet.getDouble(&quot;AlcoholPercentage&quot;);\n             int kcal = resultSet.getInt(&quot;Kcal&quot;);\n\n             if(alcoholpercentage != 0){\n                 cartList.add(new AlcoholicBeverage(id, productName, price, quantity, alcoholpercentage));\n             }else{\n                 cartList.add(new FoodProduct(id, productName, price, quantity, kcal));\n             }\n\n             System.out.println(&quot;You addeed to your cart: &quot; + productName + &quot; product!&quot;);\n         }\n         return cartList;\n    }\n\n    private static void displayProductsFromCart(){\n        for (Product product : cartList){\n            System.out.println(product.getName() + &quot; - $&quot; + product.getPrice());\n        }\n    }\n\n}\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/iH9Qs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iH9Qs.png\" alt=\"This is how the console looks like\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/dw4NZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dw4NZ.png\" alt=\"This is how the database table products looks like\" /></a></p>\n"},{"tags":["java","shell","command-line","stream","ansi-escape"],"comments":[{"owner":{"account_id":137942,"reputation":14900,"user_id":342518,"accept_rate":89,"display_name":"TheLQ"},"score":0,"creation_date":1283664763,"post_id":3645040,"comment_id":3832026,"body_markdown":"That would be interesting to write a Java CLI interactive program","body":"That would be interesting to write a Java CLI interactive program"},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1283691616,"post_id":3645040,"comment_id":3833411,"body_markdown":"You need to switch off input buffering in your shell before running the java program (and switch it back on after so you can edit your commands). Some obscure `stty` command or something that I can&#39;t remember.","body":"You need to switch off input buffering in your shell before running the java program (and switch it back on after so you can edit your commands). Some obscure <code>stty</code> command or something that I can&#39;t remember."}],"answers":[{"comments":[{"owner":{"account_id":173898,"reputation":1213,"user_id":402893,"accept_rate":75,"display_name":"peskal"},"score":0,"creation_date":1283668427,"post_id":3645114,"comment_id":3832165,"body_markdown":"Sorry, I was actually executing in.read in a new thread, but I left it out for brevity. I&#39;ll make an edit.","body":"Sorry, I was actually executing in.read in a new thread, but I left it out for brevity. I&#39;ll make an edit."},{"owner":{"account_id":193489,"reputation":15066,"user_id":435253,"display_name":"ssokolow"},"score":0,"creation_date":1283671472,"post_id":3645114,"comment_id":3832259,"body_markdown":"Ahh. My diagnosis still holds true to some extent. Are you sending commands to bash? ...with line terminators? ...the kind Cygwin on Windows expects? (Not sure whether it wants \\n or \\r\\n)","body":"Ahh. My diagnosis still holds true to some extent. Are you sending commands to bash? ...with line terminators? ...the kind Cygwin on Windows expects? (Not sure whether it wants \\n or \\r\\n)"},{"owner":{"account_id":173898,"reputation":1213,"user_id":402893,"accept_rate":75,"display_name":"peskal"},"score":0,"creation_date":1283673943,"post_id":3645114,"comment_id":3832364,"body_markdown":"From the javadoc: &quot;The number of bytes actually read is returned as an integer. This method blocks until input data is available, end of file is detected, or an exception is thrown.&quot;\n\nI&#39;ve used this command on other programs, even cygwin&#39;s vim-nox.exe, and I&#39;ve always recieved output. For the issue you are addressing, see my other question: http://stackoverflow.com/questions/3641407/runtime-getruntime-execc-cygwin-bin-bash-exe-has-no-input-to-read\n\nFor this question, I am really only asking whether or not processes can send data over anything other than stdout and stderr.","body":"From the javadoc: &quot;The number of bytes actually read is returned as an integer. This method blocks until input data is available, end of file is detected, or an exception is thrown.&quot;  I&#39;ve used this command on other programs, even cygwin&#39;s vim-nox.exe, and I&#39;ve always recieved output. For the issue you are addressing, see my other question: <a href=\"http://stackoverflow.com/questions/3641407/runtime-getruntime-execc-cygwin-bin-bash-exe-has-no-input-to-read\" title=\"runtime getruntime execc cygwin bin bash exe has no input to read\">stackoverflow.com/questions/3641407/&hellip;</a>  For this question, I am really only asking whether or not processes can send data over anything other than stdout and stderr."},{"owner":{"account_id":193489,"reputation":15066,"user_id":435253,"display_name":"ssokolow"},"score":0,"creation_date":1283704324,"post_id":3645114,"comment_id":3834344,"body_markdown":"Ahh, sorry about that. As far as I know (I write shell scripts on Linux a fair bit), bash never outputs via something other than stdout/stderr, but if it detects that stdin isn&#39;t a terminal (see the isatty system call), it buffers in huge (apparently 4K or more) chunks on the assumption that the input is non-interactive. http://mywiki.wooledge.org/BashFAQ/009 I&#39;m not sure if it&#39;ll help, but try starting bash with the -i flag.","body":"Ahh, sorry about that. As far as I know (I write shell scripts on Linux a fair bit), bash never outputs via something other than stdout/stderr, but if it detects that stdin isn&#39;t a terminal (see the isatty system call), it buffers in huge (apparently 4K or more) chunks on the assumption that the input is non-interactive. <a href=\"http://mywiki.wooledge.org/BashFAQ/009\" rel=\"nofollow noreferrer\">mywiki.wooledge.org/BashFAQ/009</a> I&#39;m not sure if it&#39;ll help, but try starting bash with the -i flag."},{"owner":{"account_id":173898,"reputation":1213,"user_id":402893,"accept_rate":75,"display_name":"peskal"},"score":0,"creation_date":1283709737,"post_id":3645114,"comment_id":3834763,"body_markdown":"That was exactly the problem. Thanks a ton!","body":"That was exactly the problem. Thanks a ton!"}],"tags":[],"owner":{"account_id":193489,"reputation":15066,"user_id":435253,"display_name":"ssokolow"},"comment_count":5,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1283711045,"creation_date":1283664546,"answer_id":3645114,"question_id":3645040,"body_markdown":"I&#39;m more a Python guy than a Java guy (so everything I tell you is quick guesses from JavaDoc), but it looks like you&#39;re setting up a multi-process deadlock.\r\n\r\n`in.read(new byte[1024]);` won&#39;t return until it&#39;s read 1024 bytes of data and `bash.exe` doesn&#39;t output a whole 1024 bytes before stopping to wait for input. (To do that, use `proc.getOutputStream()` and feed it some commands to respond to.)\r\n\r\nAs a result, you get Java waiting for bash to respond and bash waiting for Java to respond and both perfectly content to wait until the death of the universe without getting bored or tired.\r\n\r\nMy advice is to use [`in.available()`][1] before each call to `in.read()` to avoid blocking. That way, you can switch back and forth between feeding data in and pulling it out without getting stuck.\r\n\r\nIn fact, it&#39;d probably be a lot simpler and saner to just wrap it in a [`BufferedReader`][2].\r\n\r\n\r\n**Update from comment:** Also, when tools like bash detect that stdin isn&#39;t a terminal (see the isatty system call), [they buffer][3] in huge (4K or more) chunks on the assumption that the input is non-interactive. I&#39;m not sure if it&#39;ll help, but try starting bash with the -i flag.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.5.0/docs/api/java/io/InputStream.html#available%28%29\r\n  [2]: http://download-llnw.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html\r\n  [3]: http://mywiki.wooledge.org/BashFAQ/009","title":"How do command-line interpreters work?","body":"<p>I'm more a Python guy than a Java guy (so everything I tell you is quick guesses from JavaDoc), but it looks like you're setting up a multi-process deadlock.</p>\n\n<p><code>in.read(new byte[1024]);</code> won't return until it's read 1024 bytes of data and <code>bash.exe</code> doesn't output a whole 1024 bytes before stopping to wait for input. (To do that, use <code>proc.getOutputStream()</code> and feed it some commands to respond to.)</p>\n\n<p>As a result, you get Java waiting for bash to respond and bash waiting for Java to respond and both perfectly content to wait until the death of the universe without getting bored or tired.</p>\n\n<p>My advice is to use <a href=\"http://download.oracle.com/javase/1.5.0/docs/api/java/io/InputStream.html#available%28%29\" rel=\"nofollow noreferrer\"><code>in.available()</code></a> before each call to <code>in.read()</code> to avoid blocking. That way, you can switch back and forth between feeding data in and pulling it out without getting stuck.</p>\n\n<p>In fact, it'd probably be a lot simpler and saner to just wrap it in a <a href=\"http://download-llnw.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html\" rel=\"nofollow noreferrer\"><code>BufferedReader</code></a>.</p>\n\n<p><strong>Update from comment:</strong> Also, when tools like bash detect that stdin isn't a terminal (see the isatty system call), <a href=\"http://mywiki.wooledge.org/BashFAQ/009\" rel=\"nofollow noreferrer\">they buffer</a> in huge (4K or more) chunks on the assumption that the input is non-interactive. I'm not sure if it'll help, but try starting bash with the -i flag.</p>\n"},{"comments":[{"owner":{"account_id":106165,"reputation":42979,"user_id":282912,"accept_rate":100,"display_name":"msw"},"score":1,"creation_date":1283665461,"post_id":3645129,"comment_id":3832047,"body_markdown":"aye: `$ echo tty | bash` yields &quot;not a tty&quot;","body":"aye: <code>$ echo tty | bash</code> yields &quot;not a tty&quot;"}],"tags":[],"owner":{"account_id":86565,"reputation":48155,"user_id":240633,"accept_rate":80,"display_name":"ergosys"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1283665020,"creation_date":1283665020,"answer_id":3645129,"question_id":3645040,"body_markdown":"Any program using the c standard library can tell if it is talking to a tty device (a.k.a command line) using the function isatty().  Bash probably detects that it is talking to a pipe instead of a tty and doesn&#39;t output a prompt. ","title":"How do command-line interpreters work?","body":"<p>Any program using the c standard library can tell if it is talking to a tty device (a.k.a command line) using the function isatty().  Bash probably detects that it is talking to a pipe instead of a tty and doesn't output a prompt. </p>\n"},{"tags":[],"owner":{"account_id":165320,"reputation":20240,"user_id":388661,"accept_rate":75,"display_name":"davmac"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1283756408,"creation_date":1283756408,"answer_id":3649608,"question_id":3645040,"body_markdown":"Being in interactive mode doesn&#39;t mean that the standard streams aren&#39;t being used. But in this case, Bash is most likely running in *non*-interactive mode (it&#39;s detecting that it&#39;s not talking directly to the terminal app, so it assumes it&#39;s being used programmatically, and therefore doesn&#39;t print the welcome banner). In this case the standard streams are still used, it&#39;s just that nothing is being output.\r\n\r\nAs ergosys pointed out, you can&#39;t really rely on `in.read(new byte[1024])` returning before it has read the full 1024 bytes, though it&#39;s probably ok to assume that it will - however, it certainly won&#39;t return before it&#39;s read at least one byte, and I think that&#39;s the problem here - you&#39;re not getting even one byte of output.\r\n\r\nTry passing &quot;-i&quot; to bash to get it to run in interactive mode.\r\n","title":"How do command-line interpreters work?","body":"<p>Being in interactive mode doesn't mean that the standard streams aren't being used. But in this case, Bash is most likely running in <em>non</em>-interactive mode (it's detecting that it's not talking directly to the terminal app, so it assumes it's being used programmatically, and therefore doesn't print the welcome banner). In this case the standard streams are still used, it's just that nothing is being output.</p>\n\n<p>As ergosys pointed out, you can't really rely on <code>in.read(new byte[1024])</code> returning before it has read the full 1024 bytes, though it's probably ok to assume that it will - however, it certainly won't return before it's read at least one byte, and I think that's the problem here - you're not getting even one byte of output.</p>\n\n<p>Try passing \"-i\" to bash to get it to run in interactive mode.</p>\n"}],"owner":{"account_id":173898,"reputation":1213,"user_id":402893,"accept_rate":75,"display_name":"peskal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1652,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":3649608,"answer_count":3,"score":4,"last_activity_date":1682378559,"creation_date":1283661747,"question_id":3645040,"body_markdown":"I have been under the impression that processes on the operating system have three standard streams: `stdin, stdout, and stderr`. I have also thought that text editors like vim work by taking input over `stdin` and sending ANSI escape characters over `stdout`. However, my view of how command-line interpreters isn&#39;t holding up in this one case:\r\n\r\nWhen I run the command `C:\\cygwin\\bin\\bash.exe`, I am prompted with:\r\n\r\n    Microsoft Windows [Version 6.1.7600]\r\n    Copyright (c) 2009 Microsoft Corporation.  All rights reserved.\r\n\r\n    C:\\Users\\masson&gt;C:\\cygwin\\bin\\bash.exe\r\n    bash-3.2$ \r\n\r\n...but when I run it in Java with the following snippet, the stdin stream is empty:\r\n\r\n    ProcessBuilder pb = new ProcessBuilder(&quot;C:\\\\cygwin\\\\bin\\\\bash.exe&quot;);\r\n    pb.redirectErrorStream(true);\r\n    Process proc = pb.start();\r\n    final InputStream in = proc.getInputStream();\r\n\r\n    new Thread(new Runnable() {\r\n      public void run() {\r\n        // Blocks forever...\r\n        in.read(new byte[1024]);\r\n      }\r\n    }).start();\r\n\r\nWhat is going on here? I have been told that bash.exe is running in interactive-mode. Does this mean the standard streams aren&#39;t being used? How can I still work work with these programs, and ultimately, how could I implement my own version of cmd.exe? I think I am not understanding something fundamental about how command-line interpreters work...\r\n\r\n(Any links to articles discussing related subjects would be very much appreciated. I haven&#39;t had much luck searching. Oh, and one last question, are standard streams treated any differently in Windows than in most Unix-like operating systems?)\r\n\r\n","title":"How do command-line interpreters work?","body":"<p>I have been under the impression that processes on the operating system have three standard streams: <code>stdin, stdout, and stderr</code>. I have also thought that text editors like vim work by taking input over <code>stdin</code> and sending ANSI escape characters over <code>stdout</code>. However, my view of how command-line interpreters isn't holding up in this one case:</p>\n\n<p>When I run the command <code>C:\\cygwin\\bin\\bash.exe</code>, I am prompted with:</p>\n\n<pre><code>Microsoft Windows [Version 6.1.7600]\nCopyright (c) 2009 Microsoft Corporation.  All rights reserved.\n\nC:\\Users\\masson&gt;C:\\cygwin\\bin\\bash.exe\nbash-3.2$ \n</code></pre>\n\n<p>...but when I run it in Java with the following snippet, the stdin stream is empty:</p>\n\n<pre><code>ProcessBuilder pb = new ProcessBuilder(\"C:\\\\cygwin\\\\bin\\\\bash.exe\");\npb.redirectErrorStream(true);\nProcess proc = pb.start();\nfinal InputStream in = proc.getInputStream();\n\nnew Thread(new Runnable() {\n  public void run() {\n    // Blocks forever...\n    in.read(new byte[1024]);\n  }\n}).start();\n</code></pre>\n\n<p>What is going on here? I have been told that bash.exe is running in interactive-mode. Does this mean the standard streams aren't being used? How can I still work work with these programs, and ultimately, how could I implement my own version of cmd.exe? I think I am not understanding something fundamental about how command-line interpreters work...</p>\n\n<p>(Any links to articles discussing related subjects would be very much appreciated. I haven't had much luck searching. Oh, and one last question, are standard streams treated any differently in Windows than in most Unix-like operating systems?)</p>\n"},{"tags":["java","datetime","parsing","jodatime"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1682361933,"post_id":76095066,"comment_id":134200092,"body_markdown":"Hello, try &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;","body":"Hello, try &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682377050,"post_id":76095066,"comment_id":134202714,"body_markdown":"Similar: [java.time.format.DateTimeParseException: Text &#39;2021-02-19T00:45:09.798Z&#39; could not be parsed, unparsed text found at index 23](https://stackoverflow.com/questions/66442927/java-time-format-datetimeparseexception-text-2021-02-19t004509-798z-could-n). That question is about java.time, not Joda-Tme; but the problem is the same and the solution similar.","body":"Similar: <a href=\"https://stackoverflow.com/questions/66442927/java-time-format-datetimeparseexception-text-2021-02-19t004509-798z-could-n\">java.time.format.DateTimeParseException: Text &#39;2021-02-19T00:45:09.798Z&#39; could not be parsed, unparsed text found at index 23</a>. That question is about java.time, not Joda-Tme; but the problem is the same and the solution similar."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1682377549,"post_id":76095066,"comment_id":134202787,"body_markdown":"@Mar-Z No, incorrect. **Never put the `Z` within quotes.** The quotes mean &quot;expect but ignore this text&quot;. You will be ignoring vital information, the offset from UTC (a number of hours-minutes-seconds).","body":"@Mar-Z No, incorrect. <b>Never put the <code>Z</code> within quotes.</b> The quotes mean &quot;expect but ignore this text&quot;. You will be ignoring vital information, the offset from UTC (a number of hours-minutes-seconds)."},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1682412188,"post_id":76095066,"comment_id":134207015,"body_markdown":"Totally agree. I realized it later...","body":"Totally agree. I realized it later..."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682376964,"creation_date":1682376430,"answer_id":76096612,"question_id":76095066,"body_markdown":"No need to define a formatting pattern at all. Your input text conforms to the [ISO 8601][1] standard formats used by default in [Joda-Time][2].\r\n\r\n    DateTime dt = DateTime.parse( &quot;2022-08-02T23:00:59Z&quot; );\r\n\r\nGenerate text from that date-time object, in ISO 8601 format.\r\n\r\n    String output = dt.toString();\r\n\r\n&gt;2022-08-02T23:00:59.000Z\r\n\r\n\r\n----------\r\n\r\nAs for what is wrong with your formatting pattern: Your pattern accounts for 3 parts (date, `T` delimiter, time). But your input has 4 parts, those 3 plus an [offset-from-UTC][3], the number of hours-minutes-seconds ahead or behind the temporal meridian of UTC. The character `Z` is an abbreviation of `+00:00`, for an offset of zero.\r\n\r\n\r\n----------\r\n\r\n\r\n&gt;I cant use an other library because its java 6 and we dont have another library available in module\r\n\r\nFYI, the [*Joda-Time*][2] library is now in maintenance-mode. It creator went on to also create its successor, the *java.time* classes defined in JSR 310 and bundled with Java 8+. A back-port of those classes was made to support earlier Java 6 and Java 7. See the [*ThreeTen-Backport*][4] project.\r\n\r\nI recommend using that back-port rather than Joda-Time. The API of *ThreeTen-Backport* is nearly identical to *java.time*. This makes eventual migration to *java.time* quite simple, little more than changing `import` statements.\r\n\r\nAnd of course, [Java 6][5] is very much past end-of-life. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ISO_8601\r\n  [2]: https://www.joda.org/joda-time/\r\n  [3]: https://en.wikipedia.org/wiki/UTC_offset\r\n  [4]: https://www.threeten.org/threetenbp/\r\n  [5]: https://en.wikipedia.org/wiki/Java_version_history#Java_6","title":"How parse specific format with Joda TIme (JAVA 6)","body":"<p>No need to define a formatting pattern at all. Your input text conforms to the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard formats used by default in <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">Joda-Time</a>.</p>\n<pre><code>DateTime dt = DateTime.parse( &quot;2022-08-02T23:00:59Z&quot; );\n</code></pre>\n<p>Generate text from that date-time object, in ISO 8601 format.</p>\n<pre><code>String output = dt.toString();\n</code></pre>\n<blockquote>\n<p>2022-08-02T23:00:59.000Z</p>\n</blockquote>\n<hr />\n<p>As for what is wrong with your formatting pattern: Your pattern accounts for 3 parts (date, <code>T</code> delimiter, time). But your input has 4 parts, those 3 plus an <a href=\"https://en.wikipedia.org/wiki/UTC_offset\" rel=\"nofollow noreferrer\">offset-from-UTC</a>, the number of hours-minutes-seconds ahead or behind the temporal meridian of UTC. The character <code>Z</code> is an abbreviation of <code>+00:00</code>, for an offset of zero.</p>\n<hr />\n<blockquote>\n<p>I cant use an other library because its java 6 and we dont have another library available in module</p>\n</blockquote>\n<p>FYI, the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\"><em>Joda-Time</em></a> library is now in maintenance-mode. It creator went on to also create its successor, the <em>java.time</em> classes defined in JSR 310 and bundled with Java 8+. A back-port of those classes was made to support earlier Java 6 and Java 7. See the <a href=\"https://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Backport</em></a> project.</p>\n<p>I recommend using that back-port rather than Joda-Time. The API of <em>ThreeTen-Backport</em> is nearly identical to <em>java.time</em>. This makes eventual migration to <em>java.time</em> quite simple, little more than changing <code>import</code> statements.</p>\n<p>And of course, <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_6\" rel=\"nofollow noreferrer\">Java 6</a> is very much past end-of-life.</p>\n"}],"owner":{"account_id":28403697,"reputation":11,"user_id":21728097,"display_name":"Bakou99"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682376964,"creation_date":1682361491,"question_id":76095066,"body_markdown":"I need to parse specific date with joda library, I cant use an other library because its java 6 and we dont have another library available in module.\r\n\r\nAnyway, I have this date : \r\n\r\n2022-08-02T23:00:59Z\r\n\r\nAnd I need to parse it for some operation after, but when I try to parse, I have this error :\r\n\r\njava.lang.IllegalArgumentException: Invalid format: &quot;2022-08-02T23:00:59Z&quot; is malformed at &quot;Z&quot;\r\n\r\nMy code :\r\n\r\n\r\n```\r\n String pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;;\r\n        String dateString=&quot;2022-08-02T23:00:59Z&quot;;\r\n        DateTimeFormatter date = DateTimeFormat.forPattern(pattern);\r\n        DateTime dateTIme = date.parseDateTime(dateString);\r\n```\r\n\r\nMaybe I make something wrong ? \r\n\r\nI cannot found the good format for this pattern, so if anyone has idea, thank you very much\r\n\r\n","title":"How parse specific format with Joda TIme (JAVA 6)","body":"<p>I need to parse specific date with joda library, I cant use an other library because its java 6 and we dont have another library available in module.</p>\n<p>Anyway, I have this date :</p>\n<p>2022-08-02T23:00:59Z</p>\n<p>And I need to parse it for some operation after, but when I try to parse, I have this error :</p>\n<p>java.lang.IllegalArgumentException: Invalid format: &quot;2022-08-02T23:00:59Z&quot; is malformed at &quot;Z&quot;</p>\n<p>My code :</p>\n<pre><code> String pattern = &quot;yyyy-MM-dd'T'HH:mm:ss&quot;;\n        String dateString=&quot;2022-08-02T23:00:59Z&quot;;\n        DateTimeFormatter date = DateTimeFormat.forPattern(pattern);\n        DateTime dateTIme = date.parseDateTime(dateString);\n</code></pre>\n<p>Maybe I make something wrong ?</p>\n<p>I cannot found the good format for this pattern, so if anyone has idea, thank you very much</p>\n"},{"tags":["java","eclipse","content-assist"],"answers":[{"tags":[],"owner":{"account_id":2068344,"reputation":93,"user_id":1843391,"accept_rate":0,"display_name":"Randy Strauss"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682376697,"creation_date":1682376697,"answer_id":76096631,"question_id":76096560,"body_markdown":"Never mind.\r\nOn the Content Assist Advanced page, the defaults were weird.\r\nI&#39;m not sure what was different, but I added some and it started working.  Then I hit Restore Defaults, and what I added was cleared, and it was still working...","title":"Eclipse Java Code Assist is broken (Eclipse 2023-03, 4.27.0, MacOS, openjdk Java 17)","body":"<p>Never mind.\nOn the Content Assist Advanced page, the defaults were weird.\nI'm not sure what was different, but I added some and it started working.  Then I hit Restore Defaults, and what I added was cleared, and it was still working...</p>\n"}],"owner":{"account_id":2068344,"reputation":93,"user_id":1843391,"accept_rate":0,"display_name":"Randy Strauss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1682376697,"creation_date":1682375528,"question_id":76096560,"body_markdown":"I&#39;m using JEE Eclipse 2023-03, Build id: 20230309-1520\r\nwith Java 17\r\n  openjdk version &quot;17&quot; 2021-09-14\r\n  OpenJDK Runtime Environment Homebrew (build 17+0)\r\n\r\nI have a Java project working, but code-assist doesn&#39;t work.\r\nI type a variable name, and none of the methods appear, just:\r\n  beg - Sets the cursor to the begin of the expression\r\n  cast...\r\nand similarly for \r\n  constpriv, constpub, field, nnull, null, snnull, snull, var\r\n\r\nYour help is appreciated.  FYI, my .project file is:\r\n```\r\n&lt;projectDescription&gt;\r\n\t&lt;name&gt;pc-vert&lt;/name&gt;\r\n\t&lt;comment&gt;elided&lt;/comment&gt;\r\n\t&lt;projects&gt;\r\n\t&lt;/projects&gt;\r\n\t&lt;buildSpec&gt;\r\n\t\t&lt;buildCommand&gt;\r\n\t\t\t&lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\r\n\t\t\t&lt;arguments&gt;\r\n\t\t\t&lt;/arguments&gt;\r\n\t\t&lt;/buildCommand&gt;\r\n\t\t&lt;buildCommand&gt;\r\n\t\t\t&lt;name&gt;org.eclipse.m2e.core.maven2Builder&lt;/name&gt;\r\n\t\t\t&lt;arguments&gt;\r\n\t\t\t&lt;/arguments&gt;\r\n\t\t&lt;/buildCommand&gt;\r\n\t&lt;/buildSpec&gt;\r\n\t&lt;natures&gt;\r\n\t\t&lt;nature&gt;org.eclipse.m2e.core.maven2Nature&lt;/nature&gt;\r\n\t\t&lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\r\n\t&lt;/natures&gt;\r\n&lt;/projectDescription&gt;\r\n```\r\nMy settings for code assist are:\r\n![here](https://randy.strausses.net/misc/errors/eclipse-code-assist-settings.png)\r\n","title":"Eclipse Java Code Assist is broken (Eclipse 2023-03, 4.27.0, MacOS, openjdk Java 17)","body":"<p>I'm using JEE Eclipse 2023-03, Build id: 20230309-1520\nwith Java 17\nopenjdk version &quot;17&quot; 2021-09-14\nOpenJDK Runtime Environment Homebrew (build 17+0)</p>\n<p>I have a Java project working, but code-assist doesn't work.\nI type a variable name, and none of the methods appear, just:\nbeg - Sets the cursor to the begin of the expression\ncast...\nand similarly for\nconstpriv, constpub, field, nnull, null, snnull, snull, var</p>\n<p>Your help is appreciated.  FYI, my .project file is:</p>\n<pre><code>&lt;projectDescription&gt;\n    &lt;name&gt;pc-vert&lt;/name&gt;\n    &lt;comment&gt;elided&lt;/comment&gt;\n    &lt;projects&gt;\n    &lt;/projects&gt;\n    &lt;buildSpec&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;org.eclipse.jdt.core.javabuilder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n        &lt;buildCommand&gt;\n            &lt;name&gt;org.eclipse.m2e.core.maven2Builder&lt;/name&gt;\n            &lt;arguments&gt;\n            &lt;/arguments&gt;\n        &lt;/buildCommand&gt;\n    &lt;/buildSpec&gt;\n    &lt;natures&gt;\n        &lt;nature&gt;org.eclipse.m2e.core.maven2Nature&lt;/nature&gt;\n        &lt;nature&gt;org.eclipse.jdt.core.javanature&lt;/nature&gt;\n    &lt;/natures&gt;\n&lt;/projectDescription&gt;\n</code></pre>\n<p>My settings for code assist are:\n<img src=\"https://randy.strausses.net/misc/errors/eclipse-code-assist-settings.png\" alt=\"here\" /></p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":2677968,"reputation":148907,"user_id":2313887,"accept_rate":82,"display_name":"Neil Lunn"},"score":2,"creation_date":1497953199,"post_id":44649974,"comment_id":76285037,"body_markdown":"Did you try connecting with the shell? What does this have to do with spring?","body":"Did you try connecting with the shell? What does this have to do with spring?"},{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1497959747,"post_id":44649974,"comment_id":76289850,"body_markdown":"SSH there and do your job.","body":"SSH there and do your job."},{"owner":{"account_id":8951791,"reputation":1493,"user_id":6677551,"accept_rate":75,"display_name":"shabinjo"},"score":0,"creation_date":1497959989,"post_id":44649974,"comment_id":76290026,"body_markdown":"There is no direct use of spring to push this script.i will be using spring to fetch the contents later.Not tried with shell","body":"There is no direct use of spring to push this script.i will be using spring to fetch the contents later.Not tried with shell"}],"answers":[{"comments":[{"owner":{"account_id":8951791,"reputation":1493,"user_id":6677551,"accept_rate":75,"display_name":"shabinjo"},"score":1,"creation_date":1497960759,"post_id":44652462,"comment_id":76290573,"body_markdown":"It works..Thanks!                                                                                                        \n       mongo -u user -p password \n       mongodb01d.mydomain.com:27017/mydb &lt; yourFile.js -changed for better file read from the path where &#39;yourFile.js&#39; exist.","body":"It works..Thanks!                                                                                                                mongo -u user -p password         mongodb01d.mydomain.com:27017/mydb &lt; yourFile.js -changed for better file read from the path where &#39;yourFile.js&#39; exist."},{"owner":{"account_id":10759159,"reputation":937,"user_id":7916141,"accept_rate":67,"display_name":"Youssef Boudaya"},"score":0,"creation_date":1622121379,"post_id":44652462,"comment_id":119703753,"body_markdown":"what about on remote server ?","body":"what about on remote server ?"}],"tags":[],"owner":{"account_id":4660000,"reputation":459,"user_id":3774507,"display_name":"tronic"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1570181361,"creation_date":1497959974,"answer_id":44652462,"question_id":44649974,"body_markdown":"With Mongo on local machine :\r\n\r\n     mongo -u &lt;user&gt; -p &lt;password&gt; mongodb01d.mydomain.com:27017/mydb &lt;yourFile.js&gt;","title":"How to run mongo db script on remote server?","body":"<p>With Mongo on local machine :</p>\n\n<pre><code> mongo -u &lt;user&gt; -p &lt;password&gt; mongodb01d.mydomain.com:27017/mydb &lt;yourFile.js&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16936987,"reputation":51,"user_id":12806497,"display_name":"0815 163"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1580306241,"creation_date":1580304575,"answer_id":59968154,"question_id":44649974,"body_markdown":"It might be a little bit off topic, but in case you want to / have to use Powershell for a lack of options, you can run:\r\n\r\n    (Get-Content yourFile.js) | &amp; mongo.exe &#39;mongodb://user:password@mongodb01d.mydomain.com:27017/mydb&#39;\r\n\r\nor\r\n\r\n    &quot;print(&#39;Hello&#39;);print(&#39;Hello&#39;)&quot; | &amp; mongo.exe &#39;mongodb://user:password@mongodb01d.mydomain.com:27017/mydb&#39;\r\n\r\nor\r\n\r\n    &amp; &#39;mongo.exe&#39; &#39;mongodb://user:password@mongodb01d.mydomain.com:27017/mydb&#39; --eval &quot;print(&#39;Hello&#39;);print(&#39;Hello&#39;)&quot;\r\n\r\nI had some difficulties with `$regex`, because Powershell interpreted it as a variable, so I had to use `` `$regex`` (with an additional backtick) instead.\r\n\r\n","title":"How to run mongo db script on remote server?","body":"<p>It might be a little bit off topic, but in case you want to / have to use Powershell for a lack of options, you can run:</p>\n\n<pre><code>(Get-Content yourFile.js) | &amp; mongo.exe 'mongodb://user:password@mongodb01d.mydomain.com:27017/mydb'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"print('Hello');print('Hello')\" | &amp; mongo.exe 'mongodb://user:password@mongodb01d.mydomain.com:27017/mydb'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&amp; 'mongo.exe' 'mongodb://user:password@mongodb01d.mydomain.com:27017/mydb' --eval \"print('Hello');print('Hello')\"\n</code></pre>\n\n<p>I had some difficulties with <code>$regex</code>, because Powershell interpreted it as a variable, so I had to use <code>`$regex</code> (with an additional backtick) instead.</p>\n"},{"tags":[],"owner":{"account_id":4816683,"reputation":1567,"user_id":3888628,"display_name":"Ashraf Sarhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682375627,"creation_date":1682375188,"answer_id":76096536,"question_id":44649974,"body_markdown":"**For standalone mongo setup (single node)**\r\n\r\n    mongo -u &lt;user&gt; -p &lt;password&gt; mongodb://HOST_IP:27017/DB_NAME --eval &#39;MONGO_QUERY&#39;\r\n\r\n**Example:**\r\n\r\n`mongo mongodb://127.0.0.1:27017/test --eval &#39;db.collection.count()&#39;`\r\n\r\n**For clustered mongo setup (Replicaset with multiple nodes)**\r\n\r\n    mongo -u &lt;user&gt; -p &lt;password&gt; mongodb://NODE_1_IP:27017,NODE_2_IP:27017,NODE_3_IP:27017/DB_NAME?replicaSet=RS_ID --eval &#39;MONGO_QUERY&#39;\r\n\r\n**Example:**\r\n\r\n`mongo mongodb://127.0.0.1:27017,127.0.0.2:27017,127.0.0.3:27017/test?replicaSet=rs0 --eval &#39;db.collection.count()&#39;`\r\n\r\nPS: The user/pass in the above examples have been ignored but you need to add them if mongo has to auth.  \r\n\r\n","title":"How to run mongo db script on remote server?","body":"<p><strong>For standalone mongo setup (single node)</strong></p>\n<pre><code>mongo -u &lt;user&gt; -p &lt;password&gt; mongodb://HOST_IP:27017/DB_NAME --eval 'MONGO_QUERY'\n</code></pre>\n<p><strong>Example:</strong></p>\n<p><code>mongo mongodb://127.0.0.1:27017/test --eval 'db.collection.count()'</code></p>\n<p><strong>For clustered mongo setup (Replicaset with multiple nodes)</strong></p>\n<pre><code>mongo -u &lt;user&gt; -p &lt;password&gt; mongodb://NODE_1_IP:27017,NODE_2_IP:27017,NODE_3_IP:27017/DB_NAME?replicaSet=RS_ID --eval 'MONGO_QUERY'\n</code></pre>\n<p><strong>Example:</strong></p>\n<p><code>mongo mongodb://127.0.0.1:27017,127.0.0.2:27017,127.0.0.3:27017/test?replicaSet=rs0 --eval 'db.collection.count()'</code></p>\n<p>PS: The user/pass in the above examples have been ignored but you need to add them if mongo has to auth.</p>\n"}],"owner":{"account_id":8951791,"reputation":1493,"user_id":6677551,"accept_rate":75,"display_name":"shabinjo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6742,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":44652462,"answer_count":3,"score":3,"last_activity_date":1682375627,"creation_date":1497953057,"question_id":44649974,"body_markdown":"how to run a Mongo db script on a remote server?\r\n\r\nI know below command can be used for the same on local as mentioned here:https://stackoverflow.com/questions/4837673/how-to-execute-mongo-commands-through-shell-scripts\r\n\r\n    mongo &lt; yourFile.js\r\n\r\nI want to run this script on a remote server\r\n\r\nmongodb:uri:mongodb://user:password@mongodb01d.mydomain.com:27017/mydb \r\n","title":"How to run mongo db script on remote server?","body":"<p>how to run a Mongo db script on a remote server?</p>\n\n<p>I know below command can be used for the same on local as mentioned here:<a href=\"https://stackoverflow.com/questions/4837673/how-to-execute-mongo-commands-through-shell-scripts\">How to execute mongo commands through shell scripts?</a></p>\n\n<pre><code>mongo &lt; yourFile.js\n</code></pre>\n\n<p>I want to run this script on a remote server</p>\n\n<p>mongodb:uri:mongodb://user:password@mongodb01d.mydomain.com:27017/mydb </p>\n"},{"tags":["java","postgresql","liquibase"],"answers":[{"tags":[],"owner":{"account_id":4329394,"reputation":1778,"user_id":3535298,"display_name":"veljkost"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682375603,"creation_date":1682375603,"answer_id":76096562,"question_id":76092362,"body_markdown":"You could try to replace `SELECT` with `PERFORM` when setting the value of the sequence, something like this:\r\n\r\n    PERFORM SETVAL(&#39;test_seq&#39;, COALESCE((SELECT MAX(ID)+1 FROM test1.table1), 1), FALSE);\r\n\r\n","title":"Liquibase PostgreSql Exception in SQL changeset","body":"<p>You could try to replace <code>SELECT</code> with <code>PERFORM</code> when setting the value of the sequence, something like this:</p>\n<pre><code>PERFORM SETVAL('test_seq', COALESCE((SELECT MAX(ID)+1 FROM test1.table1), 1), FALSE);\n</code></pre>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682375603,"creation_date":1682342447,"question_id":76092362,"body_markdown":"I am using below sql in my liquibase changset to insert data from another table.\r\n\r\n      DO $$\r\n      BEGIN\r\n      IF EXISTS\r\n      ( SELECT 1\r\n      FROM   information_schema.tables\r\n      WHERE  table_schema = &#39;test1&#39;\r\n      AND    table_name = &#39;table1&#39;\r\n      )\r\n      THEN\r\n      INSERT INTO table2(col1, col2, col3, col4)\r\n      SELECT col1, col2, col3, col4\r\n      FROM test1.table1;\r\n      SELECT SETVAL(&#39;test_seq&#39;, COALESCE((SELECT MAX(ID)+1 FROM test1.table1), 1), FALSE);\r\n      END IF;\r\n      END\r\n      $$;\r\n\r\nBut I am getting below error,\r\n\r\n&gt; Reason: liquibase.exception.DatabaseException: ERROR: query has no\r\n&gt; destination for result data\\n  Hint: If you want to discard the\r\n&gt; results of a SELECT, use PERFORM instead.\r\n\r\nI tried adding a return statement but I get \r\n\r\n&gt; org.postgresql.util.PSQLException: ERROR: RETURN cannot have a\r\n&gt; parameter in function returning void error\r\n","title":"Liquibase PostgreSql Exception in SQL changeset","body":"<p>I am using below sql in my liquibase changset to insert data from another table.</p>\n<pre><code>  DO $$\n  BEGIN\n  IF EXISTS\n  ( SELECT 1\n  FROM   information_schema.tables\n  WHERE  table_schema = 'test1'\n  AND    table_name = 'table1'\n  )\n  THEN\n  INSERT INTO table2(col1, col2, col3, col4)\n  SELECT col1, col2, col3, col4\n  FROM test1.table1;\n  SELECT SETVAL('test_seq', COALESCE((SELECT MAX(ID)+1 FROM test1.table1), 1), FALSE);\n  END IF;\n  END\n  $$;\n</code></pre>\n<p>But I am getting below error,</p>\n<blockquote>\n<p>Reason: liquibase.exception.DatabaseException: ERROR: query has no\ndestination for result data\\n  Hint: If you want to discard the\nresults of a SELECT, use PERFORM instead.</p>\n</blockquote>\n<p>I tried adding a return statement but I get</p>\n<blockquote>\n<p>org.postgresql.util.PSQLException: ERROR: RETURN cannot have a\nparameter in function returning void error</p>\n</blockquote>\n"},{"tags":["java","knapsack-problem"],"answers":[{"comments":[{"owner":{"account_id":3932834,"reputation":36,"user_id":3250583,"accept_rate":40,"display_name":"Hasan"},"score":0,"creation_date":1407522289,"post_id":25209766,"comment_id":39262831,"body_markdown":"nope, the number 25 does not matter as i took care that i did not give more than 25 elements","body":"nope, the number 25 does not matter as i took care that i did not give more than 25 elements"},{"owner":{"account_id":4860120,"reputation":1094,"user_id":3920017,"display_name":"Simply Craig"},"score":0,"creation_date":1407522456,"post_id":25209766,"comment_id":39262925,"body_markdown":"Right but if you give 25 elements you will still go out of bounds, as you are going from 0 to 25 (INCLUDING 25) so you will be using `v[25][25]` which is out of bounds for your array","body":"Right but if you give 25 elements you will still go out of bounds, as you are going from 0 to 25 (INCLUDING 25) so you will be using <code>v[25][25]</code> which is out of bounds for your array"},{"owner":{"account_id":3932834,"reputation":36,"user_id":3250583,"accept_rate":40,"display_name":"Hasan"},"score":0,"creation_date":1407522777,"post_id":25209766,"comment_id":39263111,"body_markdown":"ok, try the modified program(with your corrections) and run the program, maybe i am missing something, thanx :-)","body":"ok, try the modified program(with your corrections) and run the program, maybe i am missing something, thanx :-)"},{"owner":{"account_id":4860120,"reputation":1094,"user_id":3920017,"display_name":"Simply Craig"},"score":0,"creation_date":1407522924,"post_id":25209766,"comment_id":39263200,"body_markdown":"You are welcome if this worked please select it as the answer.  Have a great day.","body":"You are welcome if this worked please select it as the answer.  Have a great day."},{"owner":{"account_id":3932834,"reputation":36,"user_id":3250583,"accept_rate":40,"display_name":"Hasan"},"score":0,"creation_date":1407522990,"post_id":25209766,"comment_id":39263242,"body_markdown":"sure i will :-), please tell me if you are successful with the program, if yes please comment the answer","body":"sure i will :-), please tell me if you are successful with the program, if yes please comment the answer"},{"owner":{"account_id":4860120,"reputation":1094,"user_id":3920017,"display_name":"Simply Craig"},"score":0,"creation_date":1407523220,"post_id":25209766,"comment_id":39263350,"body_markdown":"Can you give me an example of an input that fails?  That would be helpful is making sure my solution is accurate.  (AKA how many items, their weights/associated values and my knap sack weight.  Thanks","body":"Can you give me an example of an input that fails?  That would be helpful is making sure my solution is accurate.  (AKA how many items, their weights/associated values and my knap sack weight.  Thanks"},{"owner":{"account_id":3932834,"reputation":36,"user_id":3250583,"accept_rate":40,"display_name":"Hasan"},"score":0,"creation_date":1407523569,"post_id":25209766,"comment_id":39263532,"body_markdown":"24 elements, weights 29\n59\n99\n200\n201\n249\n300\n350\n360\n390\n499\n500\n1000\n20\n30\n40\n50\n54\n100\n108\n110\n120\n150\n700\n profit:-29\n59\n99\n200\n201\n249\n300\n350\n360\n390\n499\n500\n1000\n16\n24\n33\n42\n25\n86\n50\n95\n104\n131\n623","body":"24 elements, weights 29 59 99 200 201 249 300 350 360 390 499 500 1000 20 30 40 50 54 100 108 110 120 150 700  profit:-29 59 99 200 201 249 300 350 360 390 499 500 1000 16 24 33 42 25 86 50 95 104 131 623"},{"owner":{"account_id":4860120,"reputation":1094,"user_id":3920017,"display_name":"Simply Craig"},"score":0,"creation_date":1407523694,"post_id":25209766,"comment_id":39263589,"body_markdown":"Ok so I ran your program, like I said anything over 25 or 25 will crash your program.  So when I say my Knapsack&#39;s weight is 25 I get an exception due to `int M = scan.nextInt();` and then `for(j=0;j&lt;=M;j++)` So if M (Knapsack weight) is 25 or above it will go out of bounds on your array `v` since you have its size set to `v[25][25]`\n\nAlso for that example you just posted those weights are well above 25, which is definitely the reason you are going out of bounds.  `for(j=0;j&lt;=M;j++)` is taking j from 0 to the weight of your Knapsack which is well over 25 (What you set `v`s size to).","body":"Ok so I ran your program, like I said anything over 25 or 25 will crash your program.  So when I say my Knapsack&#39;s weight is 25 I get an exception due to <code>int M = scan.nextInt();</code> and then <code>for(j=0;j&lt;=M;j++)</code> So if M (Knapsack weight) is 25 or above it will go out of bounds on your array <code>v</code> since you have its size set to <code>v[25][25]</code>  Also for that example you just posted those weights are well above 25, which is definitely the reason you are going out of bounds.  <code>for(j=0;j&lt;=M;j++)</code> is taking j from 0 to the weight of your Knapsack which is well over 25 (What you set <code>v</code>s size to)."},{"owner":{"account_id":3932834,"reputation":36,"user_id":3250583,"accept_rate":40,"display_name":"Hasan"},"score":0,"creation_date":1407523742,"post_id":25209766,"comment_id":39263613,"body_markdown":"please comment the complete final working code here :-)","body":"please comment the complete final working code here :-)"},{"owner":{"account_id":4860120,"reputation":1094,"user_id":3920017,"display_name":"Simply Craig"},"score":0,"creation_date":1407523851,"post_id":25209766,"comment_id":39263670,"body_markdown":"I answered your question you should accept the answer and make the corrections yourself.  It is a good learning experience.","body":"I answered your question you should accept the answer and make the corrections yourself.  It is a good learning experience."}],"tags":[],"owner":{"account_id":4860120,"reputation":1094,"user_id":3920017,"display_name":"Simply Craig"},"comment_count":10,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1407523946,"creation_date":1407521666,"answer_id":25209766,"question_id":25209549,"body_markdown":"Because of your array\r\n\r\n    int nob = 25;\r\n    int v[][]=new int[nob][nob];\r\nis hardcoded to size 25, but you then use a for-loop that goes to `n` and `M` (So if you enter a number for `n` or `M` larger than `nob` aka 25 then you will get an out of bounds exception.\r\n\r\nYour for-loops should always use the array in them like this\r\n\r\n    for(int i = 0; i &lt; v.length; i++)\r\n    {\r\n        for(int j = 0; j &lt; v[i].length; j++){}\r\n    }\r\n\r\nto avoid this issue.\r\n\r\n*edit* \r\nHowever, Your real issue, now that I re look at the question is that your for-loop does this:\r\n\r\n    for(int i = 0; i &lt;= n; i++)\r\n If you have `i &lt;= n` starting at 0 you will run this loop 26 (not 25) times.  Since I am assuming your `n` is 25 since you hard-coded `nob` to 25.\r\n\r\nAlso \r\n\r\n    for(int j = 0; j &lt;= M; j++)\r\nmeans that you will go from 0 to M (Knapsack size) which I assume is almost always above 25, so this will always cause an out of bounds exception because you hard code the size of the array.\r\n\r\n","title":"Array out of bounds exception in Java while implementing the knapsack algorithm","body":"<p>Because of your array</p>\n\n<pre><code>int nob = 25;\nint v[][]=new int[nob][nob];\n</code></pre>\n\n<p>is hardcoded to size 25, but you then use a for-loop that goes to <code>n</code> and <code>M</code> (So if you enter a number for <code>n</code> or <code>M</code> larger than <code>nob</code> aka 25 then you will get an out of bounds exception.</p>\n\n<p>Your for-loops should always use the array in them like this</p>\n\n<pre><code>for(int i = 0; i &lt; v.length; i++)\n{\n    for(int j = 0; j &lt; v[i].length; j++){}\n}\n</code></pre>\n\n<p>to avoid this issue.</p>\n\n<p><em>edit</em> \nHowever, Your real issue, now that I re look at the question is that your for-loop does this:</p>\n\n<pre><code>for(int i = 0; i &lt;= n; i++)\n</code></pre>\n\n<p>If you have <code>i &lt;= n</code> starting at 0 you will run this loop 26 (not 25) times.  Since I am assuming your <code>n</code> is 25 since you hard-coded <code>nob</code> to 25.</p>\n\n<p>Also </p>\n\n<pre><code>for(int j = 0; j &lt;= M; j++)\n</code></pre>\n\n<p>means that you will go from 0 to M (Knapsack size) which I assume is almost always above 25, so this will always cause an out of bounds exception because you hard code the size of the array.</p>\n"}],"owner":{"account_id":3932834,"reputation":36,"user_id":3250583,"accept_rate":40,"display_name":"Hasan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":25209766,"answer_count":1,"score":0,"last_activity_date":1682375160,"creation_date":1407520906,"question_id":25209549,"body_markdown":"I am a beginner to Java programming, and I was trying to implement knapsack algorithm by dynamic programming and it works perfectly for few inputs, but for few inputs it throws an exception. The code is\r\n\r\n    package knapsack3;\r\n    \r\n    import java.util.Scanner;\r\n     \r\n    /** Class Knapsack **/\r\n    \r\n    public class knapsack3\r\n    {\r\n    \t\r\n       \r\n    \tpublic void solve(int wt[], int val[], int M, int n)\r\n        {\r\n        \tint nob = 25;\r\n           \tint i,j;\r\n           \tint v[][]=new int[nob][nob];\r\n           \tfor(i=0;i&lt;=n;i++)\r\n           \t{\r\n           \t\tfor(j=0;j&lt;=M;j++)\r\n           \t\t{\r\n           \t\t\tif(i==0||j==0)\r\n           \t\t\t{\r\n           \t\t\t\tv[i][j]=0;\r\n           \t\t\t}\r\n           \t\t\telse if(j-wt[i]&lt;0)\r\n           \t\t\t{\r\n           \t\t\t\tv[i][j]=v[i-1][j];\r\n           \t\t\t}\r\n           \t\t\telse\r\n           \t\t\t{\r\n           \t\t\t\tv[i][j]=Math.max(v[i-1][j],val[i]+v[i-1][j-wt[i]]);\r\n           \t\t\t}\r\n           \t\t}\r\n           \t}\r\n           \tSystem.out.println(&quot;\\n Final Profit(value)---&gt; &quot;+v[n-1][M]);\r\n        }\r\n        /** Main function **/\r\n        public static void main (String[] args) \r\n        {\r\n            Scanner scan = new Scanner(System.in);\r\n            System.out.println(&quot;Knapsack Algorithm Test\\n&quot;);\r\n      \r\n            knapsack3 ks = new knapsack3();\r\n            \r\n            System.out.println(&quot;Enter number of elements &quot;);\r\n            int n = scan.nextInt();\r\n     \r\n            int wt[] = new int[n + 1];\r\n            int val[] = new int[n + 1];\r\n     \r\n            System.out.println(&quot;\\nEnter weight for &quot;+ n +&quot; elements&quot;);\r\n            for (int i = 1; i &lt;= n; i++)\r\n                wt[i] = scan.nextInt();\r\n            \r\n            System.out.println(&quot;\\nEnter value for &quot;+ n +&quot; elements&quot;);\r\n            for (int i = 1; i &lt;= n; i++)\r\n                val[i] = scan.nextInt();\r\n     \r\n            System.out.println(&quot;\\nEnter knapsack weight &quot;);\r\n            int M = scan.nextInt();\r\n    \r\n            ks.solve(wt, val, M, n);\r\n           scan.close();\r\n        }\r\n        \r\n    }\r\n\r\n\r\nthe exception is \r\n\r\nException in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 25\r\n\tat knapsack3.knapsack3.solve(knapsack3.java:22)\r\n\tat knapsack3.knapsack3.main(knapsack3.java:61)\r\n","title":"Array out of bounds exception in Java while implementing the knapsack algorithm","body":"<p>I am a beginner to Java programming, and I was trying to implement knapsack algorithm by dynamic programming and it works perfectly for few inputs, but for few inputs it throws an exception. The code is</p>\n<pre><code>package knapsack3;\n\nimport java.util.Scanner;\n \n/** Class Knapsack **/\n\npublic class knapsack3\n{\n    \n   \n    public void solve(int wt[], int val[], int M, int n)\n    {\n        int nob = 25;\n        int i,j;\n        int v[][]=new int[nob][nob];\n        for(i=0;i&lt;=n;i++)\n        {\n            for(j=0;j&lt;=M;j++)\n            {\n                if(i==0||j==0)\n                {\n                    v[i][j]=0;\n                }\n                else if(j-wt[i]&lt;0)\n                {\n                    v[i][j]=v[i-1][j];\n                }\n                else\n                {\n                    v[i][j]=Math.max(v[i-1][j],val[i]+v[i-1][j-wt[i]]);\n                }\n            }\n        }\n        System.out.println(&quot;\\n Final Profit(value)---&gt; &quot;+v[n-1][M]);\n    }\n    /** Main function **/\n    public static void main (String[] args) \n    {\n        Scanner scan = new Scanner(System.in);\n        System.out.println(&quot;Knapsack Algorithm Test\\n&quot;);\n  \n        knapsack3 ks = new knapsack3();\n        \n        System.out.println(&quot;Enter number of elements &quot;);\n        int n = scan.nextInt();\n \n        int wt[] = new int[n + 1];\n        int val[] = new int[n + 1];\n \n        System.out.println(&quot;\\nEnter weight for &quot;+ n +&quot; elements&quot;);\n        for (int i = 1; i &lt;= n; i++)\n            wt[i] = scan.nextInt();\n        \n        System.out.println(&quot;\\nEnter value for &quot;+ n +&quot; elements&quot;);\n        for (int i = 1; i &lt;= n; i++)\n            val[i] = scan.nextInt();\n \n        System.out.println(&quot;\\nEnter knapsack weight &quot;);\n        int M = scan.nextInt();\n\n        ks.solve(wt, val, M, n);\n       scan.close();\n    }\n    \n}\n</code></pre>\n<p>the exception is</p>\n<p>Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 25\nat knapsack3.knapsack3.solve(knapsack3.java:22)\nat knapsack3.knapsack3.main(knapsack3.java:61)</p>\n"},{"tags":["java","asynchronous","vert.x"],"comments":[{"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"score":0,"creation_date":1682466578,"post_id":71936229,"comment_id":134219624,"body_markdown":"writing vertx code in kotlin avoids this entirely since coroutines can be written in synchronous manner while still being non blocking","body":"writing vertx code in kotlin avoids this entirely since coroutines can be written in synchronous manner while still being non blocking"}],"answers":[{"comments":[{"owner":{"account_id":19238848,"reputation":45,"user_id":14059290,"display_name":"mk7.GTI"},"score":1,"creation_date":1650468810,"post_id":71937365,"comment_id":127125225,"body_markdown":"Thanks! Should have figured this out too... Only added a counter to keep the results in the same order as the futures were before (otherwise ordered after completion time).","body":"Thanks! Should have figured this out too... Only added a counter to keep the results in the same order as the futures were before (otherwise ordered after completion time)."},{"owner":{"account_id":2872193,"reputation":3005,"user_id":7263027,"display_name":"taygetos"},"score":0,"creation_date":1650470255,"post_id":71937365,"comment_id":127125857,"body_markdown":"Youre welcome, and thats a good point, the order is not guaranteed.","body":"Youre welcome, and thats a good point, the order is not guaranteed."}],"tags":[],"owner":{"account_id":2872193,"reputation":3005,"user_id":7263027,"display_name":"taygetos"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1650447353,"creation_date":1650447353,"answer_id":71937365,"question_id":71936229,"body_markdown":"The easiest is if you are handling the results by yourself. You can register  a `onSuccess` handler to your futures. This way the results will be put in some kind of list, e.g. `JsonArray`.\r\n\r\n```java\r\nList&lt;Future&gt; futures = //...list of futures\r\n\r\nJsonArray results = new JsonArray();\r\nfutures.forEach(e -&gt; e.onSuccess(h -&gt; results.add(h)));\r\n\r\nCompositeFuture.all(futures)\r\n    .onComplete(ar -&gt; {\r\n        if(ar.failed()) {\r\n            // successful elements are present in &quot;results&quot;\r\n            routingContext.response().end(results.encode());\r\n            return;\r\n        }\r\n        //... rest of your code\r\n     });\r\n```\r\n\r\nYou can also look into the `rx-java` library. Such use cases are usually better implemented using it.","title":"Vertx CompositeFuture: on completion of all Futures","body":"<p>The easiest is if you are handling the results by yourself. You can register  a <code>onSuccess</code> handler to your futures. This way the results will be put in some kind of list, e.g. <code>JsonArray</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Future&gt; futures = //...list of futures\n\nJsonArray results = new JsonArray();\nfutures.forEach(e -&gt; e.onSuccess(h -&gt; results.add(h)));\n\nCompositeFuture.all(futures)\n    .onComplete(ar -&gt; {\n        if(ar.failed()) {\n            // successful elements are present in &quot;results&quot;\n            routingContext.response().end(results.encode());\n            return;\n        }\n        //... rest of your code\n     });\n</code></pre>\n<p>You can also look into the <code>rx-java</code> library. Such use cases are usually better implemented using it.</p>\n"},{"tags":[],"owner":{"account_id":1857554,"reputation":20310,"user_id":1682820,"accept_rate":70,"display_name":"injecteer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1650453028,"creation_date":1650453028,"answer_id":71938603,"question_id":71936229,"body_markdown":"You can simply poke the original futures for it&#39;s results when using `all`:\r\n\r\n```\r\nList&lt;Future&gt; futures = //...list of futures\r\n\r\nCompositeFuture.all(futures).onComplete(ar -&gt; {\r\n  if(ar.succeeded()){\r\n    futures.forEach(fut -&gt; log.info( fut.succeded() +&quot; / &quot; +_fut.result() ));\r\n  }\r\n} );\r\n```","title":"Vertx CompositeFuture: on completion of all Futures","body":"<p>You can simply poke the original futures for it's results when using <code>all</code>:</p>\n<pre><code>List&lt;Future&gt; futures = //...list of futures\n\nCompositeFuture.all(futures).onComplete(ar -&gt; {\n  if(ar.succeeded()){\n    futures.forEach(fut -&gt; log.info( fut.succeded() +&quot; / &quot; +_fut.result() ));\n  }\n} );\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4765585,"reputation":2125,"user_id":3851755,"display_name":"Joe Pallas"},"score":1,"creation_date":1681358778,"post_id":74317850,"comment_id":134044340,"body_markdown":"I think the point about using `join` instead of `all` is very important.  There’s no guarantee you will get all the results with `all` (ironically).","body":"I think the point about using <code>join</code> instead of <code>all</code> is very important.  There’s no guarantee you will get all the results with <code>all</code> (ironically)."}],"tags":[],"owner":{"account_id":3398941,"reputation":143,"user_id":2851729,"display_name":"user2851729"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1667568726,"creation_date":1667568726,"answer_id":74317850,"question_id":71936229,"body_markdown":"I would use [join][1] operation instead of all, so CompositeFuture will wait on all futures completion even if one of them fails. Otherwise, it could happen that the evaluation bind to CompositeFuture will happen sooner than all async calls are finished.\r\n\r\nThen you could define the [recover][2] step before joining futures in CompositeFuture. \r\n\r\n```\r\n  public static void main(String[] args) {\r\n    List&lt;String&gt; inputs = List.of(&quot;1&quot;, &quot;Terrible error&quot;, &quot;2&quot;);\r\n\r\n    List&lt;Future&gt; futures = inputs.stream()\r\n        .map(i -&gt; asyncAction(i)\r\n            .recover(thr -&gt; {\r\n              // real recovery or just logging\r\n              System.out.println(&quot;Bad thing happen: &quot; + thr.getMessage());\r\n              return Future.succeededFuture();\r\n            }))\r\n        .collect(Collectors.toList());\r\n\r\n    CompositeFuture.join(futures)\r\n        .map(CompositeFuture::list)\r\n        .map(results -&gt; results.stream()\r\n            // filter out empty recovered future            \r\n            .filter(Objects::nonNull)\r\n            .collect(Collectors.toList()))\r\n        .onSuccess(System.out::println);\r\n  }\r\n\r\n  static Future&lt;String&gt; asyncAction(final String input) {\r\n    if (&quot;Terrible error&quot;.equals(input)) {\r\n      return Future.failedFuture(input);\r\n    }\r\n    return Future.succeededFuture(input);\r\n  }\r\n```\r\n\r\nIt will print:\r\n```\r\nBad thing happen: Terrible error\r\n[1, 2]\r\n```\r\n\r\n\r\n  [1]: https://vertx.io/docs/apidocs/io/vertx/core/CompositeFuture.html#join-io.vertx.core.Future-io.vertx.core.Future-\r\n  [2]: https://vertx.io/docs/apidocs/io/vertx/core/Future.html#recover-java.util.function.Function-","title":"Vertx CompositeFuture: on completion of all Futures","body":"<p>I would use <a href=\"https://vertx.io/docs/apidocs/io/vertx/core/CompositeFuture.html#join-io.vertx.core.Future-io.vertx.core.Future-\" rel=\"nofollow noreferrer\">join</a> operation instead of all, so CompositeFuture will wait on all futures completion even if one of them fails. Otherwise, it could happen that the evaluation bind to CompositeFuture will happen sooner than all async calls are finished.</p>\n<p>Then you could define the <a href=\"https://vertx.io/docs/apidocs/io/vertx/core/Future.html#recover-java.util.function.Function-\" rel=\"nofollow noreferrer\">recover</a> step before joining futures in CompositeFuture.</p>\n<pre><code>  public static void main(String[] args) {\n    List&lt;String&gt; inputs = List.of(&quot;1&quot;, &quot;Terrible error&quot;, &quot;2&quot;);\n\n    List&lt;Future&gt; futures = inputs.stream()\n        .map(i -&gt; asyncAction(i)\n            .recover(thr -&gt; {\n              // real recovery or just logging\n              System.out.println(&quot;Bad thing happen: &quot; + thr.getMessage());\n              return Future.succeededFuture();\n            }))\n        .collect(Collectors.toList());\n\n    CompositeFuture.join(futures)\n        .map(CompositeFuture::list)\n        .map(results -&gt; results.stream()\n            // filter out empty recovered future            \n            .filter(Objects::nonNull)\n            .collect(Collectors.toList()))\n        .onSuccess(System.out::println);\n  }\n\n  static Future&lt;String&gt; asyncAction(final String input) {\n    if (&quot;Terrible error&quot;.equals(input)) {\n      return Future.failedFuture(input);\n    }\n    return Future.succeededFuture(input);\n  }\n</code></pre>\n<p>It will print:</p>\n<pre><code>Bad thing happen: Terrible error\n[1, 2]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28405215,"reputation":1,"user_id":21729355,"display_name":"aamiller17"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682374675,"creation_date":1682374675,"answer_id":76096487,"question_id":71936229,"body_markdown":"The problem with storing the successes into your own data store is that data store would need to be thread safe in order to prevent race conditions. So merely using a Java List or JsonArray for this would not be a robust solution. The easiest and least intrusive way to solve this problem is to create a wrapper Future around your future which is always &quot;successful&quot;, but completes with the Throwable cause if it &quot;fails&quot;. In this way, you can use the rest of the Vertx library as intended.\r\n\r\nExample:\r\n```\r\npublic Future&lt;Object&gt; wrapFuture(Future&lt;Object&gt; future) {\r\n  Promise&lt;Object&gt; promise = Promise.promise();\r\n  future.onComplete(asyncResult -&gt; {\r\n    if (asyncResult.succeeded()) {\r\n      promise.complete(asyncResult.result());\r\n    } else {\r\n      promise.complete(cause);\r\n    }\r\n  });\r\n}\r\n\r\npublic void myFunction() {\r\n  List&lt;Future&gt; futures = new ArrayList&lt;Future&gt;();\r\n  for (operationReturningAFuture: operations) {\r\n    futures.add(wrapFuture(operationReturningAFuture()));\r\n  }\r\n  ComposititeFuture.join(futures).onComplete(asyncResult -&gt; {\r\n    List&lt;Object&gt; output = asyncResult.result().list();\r\n    for (Object response : output) {\r\n      if (response instanceof Throwable) {\r\n        // this future failed\r\n      } else {\r\n        // this future succeeded\r\n      }\r\n    }\r\n  });\r\n}\r\n```\r\n\r\n","title":"Vertx CompositeFuture: on completion of all Futures","body":"<p>The problem with storing the successes into your own data store is that data store would need to be thread safe in order to prevent race conditions. So merely using a Java List or JsonArray for this would not be a robust solution. The easiest and least intrusive way to solve this problem is to create a wrapper Future around your future which is always &quot;successful&quot;, but completes with the Throwable cause if it &quot;fails&quot;. In this way, you can use the rest of the Vertx library as intended.</p>\n<p>Example:</p>\n<pre><code>public Future&lt;Object&gt; wrapFuture(Future&lt;Object&gt; future) {\n  Promise&lt;Object&gt; promise = Promise.promise();\n  future.onComplete(asyncResult -&gt; {\n    if (asyncResult.succeeded()) {\n      promise.complete(asyncResult.result());\n    } else {\n      promise.complete(cause);\n    }\n  });\n}\n\npublic void myFunction() {\n  List&lt;Future&gt; futures = new ArrayList&lt;Future&gt;();\n  for (operationReturningAFuture: operations) {\n    futures.add(wrapFuture(operationReturningAFuture()));\n  }\n  ComposititeFuture.join(futures).onComplete(asyncResult -&gt; {\n    List&lt;Object&gt; output = asyncResult.result().list();\n    for (Object response : output) {\n      if (response instanceof Throwable) {\n        // this future failed\n      } else {\n        // this future succeeded\n      }\n    }\n  });\n}\n</code></pre>\n"}],"owner":{"account_id":19238848,"reputation":45,"user_id":14059290,"display_name":"mk7.GTI"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3576,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71937365,"answer_count":4,"score":4,"last_activity_date":1682374675,"creation_date":1650442319,"question_id":71936229,"body_markdown":"In a Vert.x web server, I have a set of Futures, which each one could either fail or succeed and hold a result. I am interested in the outcome (and possibly the result) of each and every one of those Futures, meaning I need to process the result of each Future. \r\n\r\nI was thinking that Vert.x&#39;s `CompositeFuture` was the way to go, this is my code snippet: \r\n\r\n```\r\nList&lt;Future&gt; futures = dataProviders.stream()\r\n\t.filter(dp -&gt; dp.isActive(requester))\r\n\t.map(DataProvider::getData)\r\n\t.collect(Collectors.toList());\r\n\r\nCompositeFuture.all(futures)\r\n\t\t.onComplete(ar -&gt; {\r\n\t\t\tif(ar.failed()) {\r\n\t\t\t\troutingContext.response()\r\n\t\t\t\t\t.end(ar.cause());\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tCompositeFuture cf = ar.result();\r\n\t\t\tJsonArray data = new JsonArray();\r\n\t\t\tfor(int i = 0; i &lt; cf.size(); i++) {\r\n\t\t\t\tif(cf.failed(i)) {\r\n\t\t\t\t\tfinal JsonObject errorJson = new JsonObject();\r\n\t\t\t\t\terrorJson.put(&quot;error&quot;, cf.cause(i).getMessage());\r\n\t\t\t\t\tdata.add(errorJson);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdata.add(((Data) cf.resultAt(i)).toJson());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tJsonObject res = new JsonObject()\r\n\t\t\t\t.put(&quot;data&quot;, data);\r\n\r\n\t\t\troutingContext.response()\r\n\t\t\t\t\t.putHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n\t\t\t\t\t.end(res.toString());\r\n\t\t});\r\n\r\n```\r\n\r\nbut with that I get the following problems:\r\n- Using `CompositeFuture.all(futures).onComplete()`, I don&#39;t get the results of a succeeded Future as soon as any Future out of `futures` fails (because then `ar.result()` is null).\r\n- Using `CompositeFuture.any(futures).onComplete()`, I would get all results, but the CompositeFuture completes before all Futures of `futures` are completed. Meaning, it does not wait for every Future to complete, but completes as soon as any Future is completed. (-&gt; `cf.resultAt(i)` returns null)\r\n- Using `CompositeFuture.join(futures).onComplete()`, it&#39;s the same as with `all()`: `ar.result()` is null as soon as any Future fails.\r\n\r\nWhat is the correct/best way to wait for a list of Futures to complete, while being able to then handle each result and outcome individually?","title":"Vertx CompositeFuture: on completion of all Futures","body":"<p>In a Vert.x web server, I have a set of Futures, which each one could either fail or succeed and hold a result. I am interested in the outcome (and possibly the result) of each and every one of those Futures, meaning I need to process the result of each Future.</p>\n<p>I was thinking that Vert.x's <code>CompositeFuture</code> was the way to go, this is my code snippet:</p>\n<pre><code>List&lt;Future&gt; futures = dataProviders.stream()\n    .filter(dp -&gt; dp.isActive(requester))\n    .map(DataProvider::getData)\n    .collect(Collectors.toList());\n\nCompositeFuture.all(futures)\n        .onComplete(ar -&gt; {\n            if(ar.failed()) {\n                routingContext.response()\n                    .end(ar.cause());\n                return;\n            }\n            \n            CompositeFuture cf = ar.result();\n            JsonArray data = new JsonArray();\n            for(int i = 0; i &lt; cf.size(); i++) {\n                if(cf.failed(i)) {\n                    final JsonObject errorJson = new JsonObject();\n                    errorJson.put(&quot;error&quot;, cf.cause(i).getMessage());\n                    data.add(errorJson);\n                } else {\n                    data.add(((Data) cf.resultAt(i)).toJson());\n                }\n            }\n\n            JsonObject res = new JsonObject()\n                .put(&quot;data&quot;, data);\n\n            routingContext.response()\n                    .putHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                    .end(res.toString());\n        });\n\n</code></pre>\n<p>but with that I get the following problems:</p>\n<ul>\n<li>Using <code>CompositeFuture.all(futures).onComplete()</code>, I don't get the results of a succeeded Future as soon as any Future out of <code>futures</code> fails (because then <code>ar.result()</code> is null).</li>\n<li>Using <code>CompositeFuture.any(futures).onComplete()</code>, I would get all results, but the CompositeFuture completes before all Futures of <code>futures</code> are completed. Meaning, it does not wait for every Future to complete, but completes as soon as any Future is completed. (-&gt; <code>cf.resultAt(i)</code> returns null)</li>\n<li>Using <code>CompositeFuture.join(futures).onComplete()</code>, it's the same as with <code>all()</code>: <code>ar.result()</code> is null as soon as any Future fails.</li>\n</ul>\n<p>What is the correct/best way to wait for a list of Futures to complete, while being able to then handle each result and outcome individually?</p>\n"},{"tags":["java","date","jdbc","jdbctemplate","date-formatting"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":4,"creation_date":1682272482,"post_id":76086382,"comment_id":134185441,"body_markdown":"You should be using `LocalDate` now and `DateTimeFormatter` not the old date classes, making your mapping code: `Movie detailPaiementDto = new Movie(rs.getInt(&quot;id&quot;), rs.getString(&quot;name&quot;),List.of(), rs.getObject(&quot;release_date&quot;, java.time.LocalDate.class));` Formatting might be done in `toString` for the date format you want","body":"You should be using <code>LocalDate</code> now and <code>DateTimeFormatter</code> not the old date classes, making your mapping code: <code>Movie detailPaiementDto = new Movie(rs.getInt(&quot;id&quot;), rs.getString(&quot;name&quot;),List.of(), rs.getObject(&quot;release_date&quot;, java.time.LocalDate.class));</code> Formatting might be done in <code>toString</code> for the date format you want"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":3,"creation_date":1682275687,"post_id":76086382,"comment_id":134185916,"body_markdown":"Also, there&#39;s no need to be worrying about formatting in the query. Set the parameter as `LocalDate`. If the original argument is in non-ISO format then use `DateTimeFormatter` to parse it","body":"Also, there&#39;s no need to be worrying about formatting in the query. Set the parameter as <code>LocalDate</code>. If the original argument is in non-ISO format then use <code>DateTimeFormatter</code> to parse it"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1682342390,"post_id":76086382,"comment_id":134195199,"body_markdown":"Obviously `date_format(release_date, &#39;%Y/%M/%d&#39;) = date_format(?,  &#39;%Y/%M/%d&#39;)` *should* work in SQL provided that both `release_date` and `?` are dates (which I don’t think they are in your case). But it’s a bit like doing `String.valueOf(x).equals(String.valueOf(2))` in Java instead of `x == 2`. So don’t. Use `release_date = ?`  and, as others have said, make sure that you are passing a `LocalDate` from Java.","body":"Obviously <code>date_format(release_date, &#39;%Y&#47;%M&#47;%d&#39;) = date_format(?,  &#39;%Y&#47;%M&#47;%d&#39;)</code> <i>should</i> work in SQL provided that both <code>release_date</code> and <code>?</code> are dates (which I don’t think they are in your case). But it’s a bit like doing <code>String.valueOf(x).equals(String.valueOf(2))</code> in Java instead of <code>x == 2</code>. So don’t. Use <code>release_date = ?</code>  and, as others have said, make sure that you are passing a <code>LocalDate</code> from Java."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682374073,"creation_date":1682287164,"answer_id":76087469,"question_id":76086382,"body_markdown":"# Avoid legacy date-time classes\r\n\r\nYou are using terribly flawed date-time classes that were years ago supplanted by the modern *java.time* classes. For a date-only value, use `java.time.LocalDate`. \r\n\r\n```java\r\npublic record Movie(\r\n    Integer id,\r\n    String name,\r\n    List&lt;Actor&gt; actors,\r\n    LocalDate releaseDate  // Never use either `Date` class. Use only java.time classes such as `LocalDate`.\r\n) {}\r\n```\r\n\r\n# Think objects, not strings\r\n\r\nDate-time objects hold date-time values, not text. Date-time objects do not have a “format”. You are thinking in terms of strings and text; learn to think in terms of objects. \r\n\r\nSimilarly, you should be passing *objects* to your JDBC calls, not mere strings. JDBC 4.2+ requires every driver to support the *java.time* classes. See the `setObject`/`getObject` methods on `PreparedStatement` and `ResultSet`. \r\n\r\n    myPreparedStatement.setObject( … , myLocalDate ) ;\r\n\r\nAll this has been covered many many times already on Stack Overflow. Search to learn more. \r\n","title":"JdbcTemplate : How to return a java.util.Date in a formatted way","body":"<h1>Avoid legacy date-time classes</h1>\n<p>You are using terribly flawed date-time classes that were years ago supplanted by the modern <em>java.time</em> classes. For a date-only value, use <code>java.time.LocalDate</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public record Movie(\n    Integer id,\n    String name,\n    List&lt;Actor&gt; actors,\n    LocalDate releaseDate  // Never use either `Date` class. Use only java.time classes such as `LocalDate`.\n) {}\n</code></pre>\n<h1>Think objects, not strings</h1>\n<p>Date-time objects hold date-time values, not text. Date-time objects do not have a “format”. You are thinking in terms of strings and text; learn to think in terms of objects.</p>\n<p>Similarly, you should be passing <em>objects</em> to your JDBC calls, not mere strings. JDBC 4.2+ requires every driver to support the <em>java.time</em> classes. See the <code>setObject</code>/<code>getObject</code> methods on <code>PreparedStatement</code> and <code>ResultSet</code>.</p>\n<pre><code>myPreparedStatement.setObject( … , myLocalDate ) ;\n</code></pre>\n<p>All this has been covered many many times already on Stack Overflow. Search to learn more.</p>\n"}],"owner":{"account_id":17917911,"reputation":523,"user_id":13018468,"display_name":"BAKHALED Ibrahim"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682374073,"creation_date":1682272169,"question_id":76086382,"body_markdown":"I&#39;ve been searching for the answer but no luck, I have a data saved in MySQL table as a `java.util.Date` like this way `2023-01-30` what I want to do is to retrieve that date and format it to `dd/MM/yyyy`, meaning when i retrieve the date should return me `30/01/2023`\r\n\r\n\r\n**My Table:**\r\n\r\n| id | name                      | release_date |\r\n|----|---------------------------|--------------|\r\n| 1  | The Godfather             | 2023-01-30   |\r\n| 2  | The Good The Bad The Ugly | 2023-01-30   |\r\n\r\n\r\n**This is my class:**\r\n\r\n    public record Movie(Integer id,\r\n                        String name,\r\n                        List&lt;Actor&gt; actors,\r\n                        Date releaseDate) {\r\n    }\r\n\r\n\r\nThis is my method for searching a specific date and return a `movie` but with formatted `release_date`\r\n\r\n    public static final String DEFAULT_DATE_PATTERN = &quot;dd/MM/yyyy&quot;;\r\n\r\n    public List&lt;Movie&gt; selectMovieByDate() throws ParseException {\r\n\r\n     String QUERY_GET_CONFIRM_JOURNEE = &quot;select id, name, release_date from movie where date_format(release_date, &#39;%Y/%M/%d&#39;) = date_format(?,  &#39;%Y/%M/%d&#39;)&quot;;\r\n     String stringDate = &quot;2023-01-30&quot;;\r\n     Date date1=new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(stringDate);  \r\n     String dateJournee = this.dateToString(date1, DEFAULT_DATE_PATTERN);\r\n     List&lt;Movie&gt; movies = this.getMovieDetail(QUERY_GET_CONFIRM_JOURNEE, jdbcTemplate,\r\n     new Object[] {dateJournee});\r\n    // TODO Auto-generated method stub\r\n    return movies;\r\n\r\n    }\r\n\r\n\r\n\r\n**RowMapper method** \r\n\r\n\r\n    private List&lt;Movie&gt; getMovieDetail(String sql, JdbcTemplate jdbcTemplate, Object[] params) {\r\n    \t@SuppressWarnings({ &quot;unchecked&quot;, &quot;rawtypes&quot;, &quot;deprecation&quot; })\r\n    \tList&lt;Movie&gt; listDto = jdbcTemplate.query(sql, params, new RowMapper() {\r\n            @Override\r\n            public Object mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n            \tMovie detailPaiementDto = new Movie(rs.getInt(&quot;id&quot;), rs.getString(&quot;name&quot;),List.of(), rs.getDate(&quot;release_date&quot;));\r\n                return detailPaiementDto;\r\n            }\r\n        });\r\n        return listDto;\r\n    }\r\n\r\n\r\n\r\nI&#39;m pretty sure I have miss matching on date format. Thanks for response","title":"JdbcTemplate : How to return a java.util.Date in a formatted way","body":"<p>I've been searching for the answer but no luck, I have a data saved in MySQL table as a <code>java.util.Date</code> like this way <code>2023-01-30</code> what I want to do is to retrieve that date and format it to <code>dd/MM/yyyy</code>, meaning when i retrieve the date should return me <code>30/01/2023</code></p>\n<p><strong>My Table:</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>id</th>\n<th>name</th>\n<th>release_date</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>The Godfather</td>\n<td>2023-01-30</td>\n</tr>\n<tr>\n<td>2</td>\n<td>The Good The Bad The Ugly</td>\n<td>2023-01-30</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><strong>This is my class:</strong></p>\n<pre><code>public record Movie(Integer id,\n                    String name,\n                    List&lt;Actor&gt; actors,\n                    Date releaseDate) {\n}\n</code></pre>\n<p>This is my method for searching a specific date and return a <code>movie</code> but with formatted <code>release_date</code></p>\n<pre><code>public static final String DEFAULT_DATE_PATTERN = &quot;dd/MM/yyyy&quot;;\n\npublic List&lt;Movie&gt; selectMovieByDate() throws ParseException {\n\n String QUERY_GET_CONFIRM_JOURNEE = &quot;select id, name, release_date from movie where date_format(release_date, '%Y/%M/%d') = date_format(?,  '%Y/%M/%d')&quot;;\n String stringDate = &quot;2023-01-30&quot;;\n Date date1=new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).parse(stringDate);  \n String dateJournee = this.dateToString(date1, DEFAULT_DATE_PATTERN);\n List&lt;Movie&gt; movies = this.getMovieDetail(QUERY_GET_CONFIRM_JOURNEE, jdbcTemplate,\n new Object[] {dateJournee});\n// TODO Auto-generated method stub\nreturn movies;\n\n}\n</code></pre>\n<p><strong>RowMapper method</strong></p>\n<pre><code>private List&lt;Movie&gt; getMovieDetail(String sql, JdbcTemplate jdbcTemplate, Object[] params) {\n    @SuppressWarnings({ &quot;unchecked&quot;, &quot;rawtypes&quot;, &quot;deprecation&quot; })\n    List&lt;Movie&gt; listDto = jdbcTemplate.query(sql, params, new RowMapper() {\n        @Override\n        public Object mapRow(ResultSet rs, int rowNum) throws SQLException {\n            Movie detailPaiementDto = new Movie(rs.getInt(&quot;id&quot;), rs.getString(&quot;name&quot;),List.of(), rs.getDate(&quot;release_date&quot;));\n            return detailPaiementDto;\n        }\n    });\n    return listDto;\n}\n</code></pre>\n<p>I'm pretty sure I have miss matching on date format. Thanks for response</p>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1554890718,"post_id":55604682,"comment_id":97914214,"body_markdown":"don&#39;t use static fields, ever! They have class scope - that is in your case, every newly loaded Question modifies the exact same field which is bound to lead to unpredicable results. For passing parameters around controllers, see https://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml","body":"don&#39;t use static fields, ever! They have class scope - that is in your case, every newly loaded Question modifies the exact same field which is bound to lead to unpredicable results. For passing parameters around controllers, see <a href=\"https://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml\" title=\"passing parameters javafx fxml\">stackoverflow.com/questions/14187963/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":4090304,"reputation":382,"user_id":3358467,"accept_rate":69,"display_name":"FuegoJohnson"},"score":0,"creation_date":1554904569,"post_id":55611251,"comment_id":97922545,"body_markdown":"Thank you, your input makes a lot of sense. I&#39;m going to try this implementation later today and see how it works. If needed may I ask you additional questions about this? I will accept your answer once I try it regardless.","body":"Thank you, your input makes a lot of sense. I&#39;m going to try this implementation later today and see how it works. If needed may I ask you additional questions about this? I will accept your answer once I try it regardless."},{"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"score":0,"creation_date":1554929552,"post_id":55611251,"comment_id":97935244,"body_markdown":"@FuegoJohnson As long as you simply need clarification regarding the answer or something is unclear, you can comment here. I may answer you in a comment or improve the answer...","body":"@FuegoJohnson As long as you simply need clarification regarding the answer or something is unclear, you can comment here. I may answer you in a comment or improve the answer..."}],"tags":[],"owner":{"account_id":3583958,"reputation":80987,"user_id":2991525,"display_name":"fabian"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554895106,"creation_date":1554895106,"answer_id":55611251,"question_id":55604682,"body_markdown":"Even if you use a `static` field to store the results, those results are are retrieved from the controls in the scene when you call the `returnValue` method.\r\n\r\nLoading the fxml a second time the way you do it in the `calculateScore` methods creates ***a new version of the scene*** though. In this new version of the scene the controls are in their initial states regardless of the user input done in the other version of the scene.\r\n\r\nI recommend redesigning the app a bit:\r\n\r\n* Seperate the logic for the question from the logic for &quot;navigating&quot; the questions.\r\n* Keep a reference of the controller for later evaluation.\r\n* You can make your life easier by implementing an interface with your controllers.\r\n\r\n**Example**\r\n\r\n\tprivate int questionIndex = -1;\r\n\r\n\t@Override\r\n\tpublic void start(Stage primaryStage) throws Exception {\r\n\t\tStackPane questionContainer = new StackPane();\r\n\t\tquestionContainer.setAlignment(Pos.TOP_LEFT);\r\n\t\tquestionContainer.setPrefSize(300, 300);\r\n\t\t\r\n\t\t// create question list repeating our only question\r\n\t\tList&lt;URL&gt; questions = new ArrayList&lt;&gt;();\r\n\t\tURL url = getClass().getResource(&quot;/my/package/question1.fxml&quot;);\r\n\t\tfor (int i = 0; i &lt; 5; i++) {\r\n\t\t\tquestions.add(url);\r\n\t\t}\r\n\t\t\r\n\t\tList&lt;QuestionController&gt; questionControllers = new ArrayList&lt;&gt;(questions.size());\r\n\t\t\r\n\t\tButton next = new Button(&quot;next&quot;);\r\n\t\tEventHandler&lt;ActionEvent&gt; handler = evt -&gt; {\r\n\t\t\tif (questionIndex + 1 &lt; questions.size()) {\r\n\t\t\t\tquestionIndex++;\r\n\t\t\t\t\r\n\t\t\t\t// load next question &amp; store controller for later evaluation\r\n\t\t\t\tFXMLLoader loader = new FXMLLoader(questions.get(questionIndex));\r\n\t\t\t\ttry {\r\n\t\t\t\t\tquestionContainer.getChildren().setAll(loader.&lt;Node&gt;load());\r\n\t\t\t\t\tquestionControllers.add(loader.getController());\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\tthrow new RuntimeException(e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// display results\r\n\t\t\t\tAlert alert = new Alert(AlertType.INFORMATION);\r\n\t\t\t\talert.setContentText(&quot;You&#39;ve answered &quot;\r\n\t\t\t\t    + questionControllers.stream().mapToInt(QuestionController::getScore).sum()\r\n\t\t\t\t    + &quot; / &quot; + questionControllers.size()\r\n\t\t\t\t    + &quot; questions correctly.&quot;);\r\n\t\t\t\talert.showAndWait();\r\n\t\t\t\tprimaryStage.close();\r\n\t\t\t}\r\n\t\t};\r\n\t\tnext.setOnAction(handler);\r\n\t\t\r\n        // activate first question\r\n\t\thandler.handle(null);\r\n\r\n\t\tprimaryStage.setScene(new Scene(new VBox(questionContainer, next)));\r\n\t\tprimaryStage.show();\r\n\t}\r\n\r\n&lt;!----&gt;\r\n\r\n    public interface QuestionController {\r\n    \tint getScore();\r\n    }\r\n\r\n&lt;!----&gt;\r\n\r\n    public class Question1Controller implements QuestionController {\r\n    \t\r\n    \tprivate static final Random random = new Random();\r\n    \t\r\n    \tprivate int correctAnswer;\r\n    \t\r\n    \t@FXML\r\n    \tprivate List&lt;RadioButton&gt; buttons;\r\n    \t\r\n    \t@FXML\r\n    \tprivate void initialize() {\r\n    \t\t\r\n    \t\t// randomly assign correct answer\r\n    \t\tcorrectAnswer = random.nextInt(buttons.size());\r\n    \t\t\r\n    \t\tfor (RadioButton btn : buttons) {\r\n    \t\t\tbtn.setText(&quot;incorrect&quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t\tbuttons.get(correctAnswer).setText(&quot;correct&quot;);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int getScore() {\r\n    \t\treturn buttons.get(correctAnswer).isSelected() ? 1 : 0;\r\n    \t}\r\n    }\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;?import java.util.ArrayList?&gt;\r\n    &lt;?import javafx.scene.layout.VBox?&gt;\r\n    &lt;?import javafx.scene.control.RadioButton?&gt;\r\n    \r\n    &lt;VBox xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;my.package.Question1Controller&quot;&gt;\r\n    \t&lt;children&gt;\r\n    \t\t&lt;RadioButton fx:id=&quot;b1&quot; /&gt;\r\n    \t\t&lt;RadioButton fx:id=&quot;b2&quot; /&gt;\r\n    \t\t&lt;RadioButton fx:id=&quot;b3&quot; /&gt;\r\n    \t\t&lt;fx:define&gt;\r\n    \t\t\t&lt;ArrayList fx:id=&quot;buttons&quot;&gt;\r\n    \t\t\t    &lt;fx:reference source=&quot;b1&quot;/&gt;\r\n    \t\t\t    &lt;fx:reference source=&quot;b2&quot;/&gt;\r\n    \t\t\t    &lt;fx:reference source=&quot;b3&quot;/&gt;\r\n    \t\t\t&lt;/ArrayList&gt;\r\n    \t\t&lt;/fx:define&gt;\r\n    \t&lt;/children&gt;\r\n    &lt;/VBox&gt;\r\n\r\n","title":"JavaFX - Passing int values between controller classes yielding incorrect result","body":"<p>Even if you use a <code>static</code> field to store the results, those results are are retrieved from the controls in the scene when you call the <code>returnValue</code> method.</p>\n\n<p>Loading the fxml a second time the way you do it in the <code>calculateScore</code> methods creates <strong><em>a new version of the scene</em></strong> though. In this new version of the scene the controls are in their initial states regardless of the user input done in the other version of the scene.</p>\n\n<p>I recommend redesigning the app a bit:</p>\n\n<ul>\n<li>Seperate the logic for the question from the logic for \"navigating\" the questions.</li>\n<li>Keep a reference of the controller for later evaluation.</li>\n<li>You can make your life easier by implementing an interface with your controllers.</li>\n</ul>\n\n<p><strong>Example</strong></p>\n\n<pre><code>private int questionIndex = -1;\n\n@Override\npublic void start(Stage primaryStage) throws Exception {\n    StackPane questionContainer = new StackPane();\n    questionContainer.setAlignment(Pos.TOP_LEFT);\n    questionContainer.setPrefSize(300, 300);\n\n    // create question list repeating our only question\n    List&lt;URL&gt; questions = new ArrayList&lt;&gt;();\n    URL url = getClass().getResource(\"/my/package/question1.fxml\");\n    for (int i = 0; i &lt; 5; i++) {\n        questions.add(url);\n    }\n\n    List&lt;QuestionController&gt; questionControllers = new ArrayList&lt;&gt;(questions.size());\n\n    Button next = new Button(\"next\");\n    EventHandler&lt;ActionEvent&gt; handler = evt -&gt; {\n        if (questionIndex + 1 &lt; questions.size()) {\n            questionIndex++;\n\n            // load next question &amp; store controller for later evaluation\n            FXMLLoader loader = new FXMLLoader(questions.get(questionIndex));\n            try {\n                questionContainer.getChildren().setAll(loader.&lt;Node&gt;load());\n                questionControllers.add(loader.getController());\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        } else {\n            // display results\n            Alert alert = new Alert(AlertType.INFORMATION);\n            alert.setContentText(\"You've answered \"\n                + questionControllers.stream().mapToInt(QuestionController::getScore).sum()\n                + \" / \" + questionControllers.size()\n                + \" questions correctly.\");\n            alert.showAndWait();\n            primaryStage.close();\n        }\n    };\n    next.setOnAction(handler);\n\n    // activate first question\n    handler.handle(null);\n\n    primaryStage.setScene(new Scene(new VBox(questionContainer, next)));\n    primaryStage.show();\n}\n</code></pre>\n\n\n\n<pre><code>public interface QuestionController {\n    int getScore();\n}\n</code></pre>\n\n\n\n<pre><code>public class Question1Controller implements QuestionController {\n\n    private static final Random random = new Random();\n\n    private int correctAnswer;\n\n    @FXML\n    private List&lt;RadioButton&gt; buttons;\n\n    @FXML\n    private void initialize() {\n\n        // randomly assign correct answer\n        correctAnswer = random.nextInt(buttons.size());\n\n        for (RadioButton btn : buttons) {\n            btn.setText(\"incorrect\");\n        }\n\n        buttons.get(correctAnswer).setText(\"correct\");\n    }\n\n    @Override\n    public int getScore() {\n        return buttons.get(correctAnswer).isSelected() ? 1 : 0;\n    }\n}\n</code></pre>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;?import java.util.ArrayList?&gt;\n&lt;?import javafx.scene.layout.VBox?&gt;\n&lt;?import javafx.scene.control.RadioButton?&gt;\n\n&lt;VBox xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"my.package.Question1Controller\"&gt;\n    &lt;children&gt;\n        &lt;RadioButton fx:id=\"b1\" /&gt;\n        &lt;RadioButton fx:id=\"b2\" /&gt;\n        &lt;RadioButton fx:id=\"b3\" /&gt;\n        &lt;fx:define&gt;\n            &lt;ArrayList fx:id=\"buttons\"&gt;\n                &lt;fx:reference source=\"b1\"/&gt;\n                &lt;fx:reference source=\"b2\"/&gt;\n                &lt;fx:reference source=\"b3\"/&gt;\n            &lt;/ArrayList&gt;\n        &lt;/fx:define&gt;\n    &lt;/children&gt;\n&lt;/VBox&gt;\n</code></pre>\n"}],"owner":{"account_id":4090304,"reputation":382,"user_id":3358467,"accept_rate":69,"display_name":"FuegoJohnson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682372816,"creation_date":1554869920,"question_id":55604682,"body_markdown":"I have a little quiz game I&#39;m making, however when I try to pass a value from one of my controllers to another, the answer is always the opposite of what I expect. Basically, a radio button is selected, and if the correct one is selected, the `returnValue()` method should return a 1, else 0. This tells me if the user selected the proper answer or not.\r\n\r\nCode for controller 1: \r\n\r\n    public class Question1\r\n    {\r\n        @FXML\r\n        private Label question1Lbl;\r\n        @FXML\r\n        private RadioButton rb1;\r\n        @FXML\r\n        private RadioButton rb2;\r\n        @FXML\r\n        private RadioButton rb3;\r\n    \r\n        private static int score;\r\n    \r\n        public void nextQuestion(ActionEvent actionEvent)\r\n        {\r\n            try\r\n            {\r\n                FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;../gui/Question2.fxml&quot;));\r\n                Parent rootPane = loader.load();\r\n                Stage primaryStage = new Stage();\r\n                primaryStage.setScene(new Scene(rootPane));\r\n                primaryStage.setResizable(false);\r\n                primaryStage.setTitle(&quot;Frage 2&quot;);\r\n                primaryStage.show();\r\n                rb1.getScene().getWindow().hide();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                System.out.println(&quot;Error loading question 1&quot; + e.toString());\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        //returns the points for this question. 1 for correct, 0 for incorrect\r\n        public int returnValue()\r\n        {\r\n    \r\n            if (!rb2.isSelected())\r\n            {\r\n                score = 0;\r\n                return score;\r\n            }\r\n            score = 1;\r\n            return score;\r\n        }\r\n    }\r\n\r\nThe `FinishScreen` class is supposed to tally up the points gathered from all the `returnValue()` methods and display a score, but no matter what I try, the `Question1` class always returns 0, whether the radio button was selected or not! I&#39;ve written code like this before and it&#39;s worked fine, so I&#39;m confused. I have 4 more classes like this, too.\r\n\r\nAnyway, here is the `FinishScreen` class:\r\n\r\n    public class FinishScreen implements Initializable\r\n    {\r\n        @FXML\r\n        private Label resultLbl;\r\n    \r\n        private int totalScore;\r\n    \r\n        public void calculateScore() throws Exception\r\n        {\r\n            FXMLLoader loader1 = new FXMLLoader(getClass().getResource(&quot;../gui/Question1.fxml&quot;));\r\n            Parent root1 = loader1.load();\r\n            Question1 q1 = loader1.getController();\r\n    \r\n            totalScore = q1.returnValue();\r\n            System.out.println(totalScore);\r\n            resultLbl.setText(&quot;Score: &quot; + totalScore);\r\n        }\r\n    \r\n        @Override\r\n        public void initialize(URL location, ResourceBundle resources)\r\n        {\r\n            try\r\n            {\r\n                calculateScore();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                System.out.println(&quot;Error in results &quot; + e.toString());\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\nI used info from this post as a reference for how to pass values from one controller to another: \r\n[https://stackoverflow.com/questions/23461148/fxmlloader-getcontroller-returns-null][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/23461148/fxmlloader-getcontroller-returns-null\r\n\r\nIf there is an error in the way I am trying to get the value from my `Question1` class that would make sense, but most other posts I&#39;ve read seem to follow this design pattern as well. It is a silly problem to have, yet I cannot figure it out. \r\n\r\nMy `returnValue()` should return a 1 when `rb2.isSelected() == true` but that isn&#39;t the case. I tried making the `score` member variable static as well and that hasn&#39;t helped. What could be the issue here?\r\n","title":"JavaFX - Passing int values between controller classes yielding incorrect result","body":"<p>I have a little quiz game I'm making, however when I try to pass a value from one of my controllers to another, the answer is always the opposite of what I expect. Basically, a radio button is selected, and if the correct one is selected, the <code>returnValue()</code> method should return a 1, else 0. This tells me if the user selected the proper answer or not.</p>\n<p>Code for controller 1:</p>\n<pre><code>public class Question1\n{\n    @FXML\n    private Label question1Lbl;\n    @FXML\n    private RadioButton rb1;\n    @FXML\n    private RadioButton rb2;\n    @FXML\n    private RadioButton rb3;\n\n    private static int score;\n\n    public void nextQuestion(ActionEvent actionEvent)\n    {\n        try\n        {\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(&quot;../gui/Question2.fxml&quot;));\n            Parent rootPane = loader.load();\n            Stage primaryStage = new Stage();\n            primaryStage.setScene(new Scene(rootPane));\n            primaryStage.setResizable(false);\n            primaryStage.setTitle(&quot;Frage 2&quot;);\n            primaryStage.show();\n            rb1.getScene().getWindow().hide();\n        }\n        catch (Exception e)\n        {\n            System.out.println(&quot;Error loading question 1&quot; + e.toString());\n            e.printStackTrace();\n        }\n    }\n    //returns the points for this question. 1 for correct, 0 for incorrect\n    public int returnValue()\n    {\n\n        if (!rb2.isSelected())\n        {\n            score = 0;\n            return score;\n        }\n        score = 1;\n        return score;\n    }\n}\n</code></pre>\n<p>The <code>FinishScreen</code> class is supposed to tally up the points gathered from all the <code>returnValue()</code> methods and display a score, but no matter what I try, the <code>Question1</code> class always returns 0, whether the radio button was selected or not! I've written code like this before and it's worked fine, so I'm confused. I have 4 more classes like this, too.</p>\n<p>Anyway, here is the <code>FinishScreen</code> class:</p>\n<pre><code>public class FinishScreen implements Initializable\n{\n    @FXML\n    private Label resultLbl;\n\n    private int totalScore;\n\n    public void calculateScore() throws Exception\n    {\n        FXMLLoader loader1 = new FXMLLoader(getClass().getResource(&quot;../gui/Question1.fxml&quot;));\n        Parent root1 = loader1.load();\n        Question1 q1 = loader1.getController();\n\n        totalScore = q1.returnValue();\n        System.out.println(totalScore);\n        resultLbl.setText(&quot;Score: &quot; + totalScore);\n    }\n\n    @Override\n    public void initialize(URL location, ResourceBundle resources)\n    {\n        try\n        {\n            calculateScore();\n        }\n        catch (Exception e)\n        {\n            System.out.println(&quot;Error in results &quot; + e.toString());\n        }\n\n    }\n}\n</code></pre>\n<p>I used info from this post as a reference for how to pass values from one controller to another:\n<a href=\"https://stackoverflow.com/questions/23461148/fxmlloader-getcontroller-returns-null\">FXMLLoader getController returns NULL?</a></p>\n<p>If there is an error in the way I am trying to get the value from my <code>Question1</code> class that would make sense, but most other posts I've read seem to follow this design pattern as well. It is a silly problem to have, yet I cannot figure it out.</p>\n<p>My <code>returnValue()</code> should return a 1 when <code>rb2.isSelected() == true</code> but that isn't the case. I tried making the <code>score</code> member variable static as well and that hasn't helped. What could be the issue here?</p>\n"},{"tags":["java","android","android-studio","google-mlkit"],"owner":{"account_id":19544527,"reputation":11,"user_id":14301649,"display_name":"amresh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682372588,"creation_date":1665427893,"question_id":74019522,"body_markdown":"I&#39;m a complete beginner to android studio mobile development. and This is the code i&#39;ve been using so far.\r\n\r\nI want to detect if a persons eyes are closed or not real time. I&#39;m using google ml kit. They have provided most of the code but not clear about passing the live camera view into the process(image).\r\n\r\n```java\r\npublic class EyeDetection extends AppCompatActivity {\r\n\r\n    private ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture;\r\n    PreviewView previewView;\r\n\r\n    VideoView videoView;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_eye_detection);\r\n\r\n        previewView = findViewById(R.id.previewView);\r\n        videoView = findViewById(R.id.video_view);\r\n\r\n        String videoPath = &quot;android.resource://&quot;+getPackageName()+ &quot;/&quot; + R.raw.videoplayback;\r\n        Uri uri = Uri.parse(videoPath);\r\n        videoView.setVideoURI(uri);\r\n\r\n        MediaController mediaController = new MediaController(this);\r\n        videoView.setMediaController(mediaController);\r\n        mediaController.setAnchorView(videoView);\r\n\r\n\r\n\r\n//        FaceDetectorOptions realTimeOpts =\r\n//                new FaceDetectorOptions.Builder()\r\n//                        .setContourMode(FaceDetectorOptions.CONTOUR_MODE_ALL)\r\n//                        .build();\r\n\r\n        cameraProviderFuture = ProcessCameraProvider.getInstance(this);\r\n\r\n        cameraProviderFuture.addListener(() -&gt; {\r\n            try {\r\n                ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\r\n                bindPreview(cameraProvider);\r\n            } catch (ExecutionException | InterruptedException e) {\r\n                // No errors need to be handled for this Future.\r\n                // This should never be reached.\r\n            }\r\n        }, ContextCompat.getMainExecutor(this));\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n//    private class YourAnalyzer implements ImageAnalysis.Analyzer {\r\n//\r\n//        @Override\r\n//        public void analyze(ImageProxy imageProxy) {\r\n//            Image mediaImage = imageProxy.getImage();\r\n//            if (mediaImage != null) {\r\n//                InputImage image =\r\n//                        InputImage.fromMediaImage(mediaImage, imageProxy.getImageInfo().getRotationDegrees());\r\n//                // Pass image to an ML Kit Vision API\r\n//                // ...\r\n//            }\r\n//        }\r\n//\r\n//    }\r\n\r\n\r\n        void bindPreview(@NonNull ProcessCameraProvider cameraProvider) {\r\n        Preview preview = new Preview.Builder()\r\n                .build();\r\n\r\n\r\n            mlFaceDetector(preview);\r\n\r\n\r\n        CameraSelector cameraSelector = new CameraSelector.Builder()\r\n                .requireLensFacing(CameraSelector.LENS_FACING_FRONT)\r\n                .build();\r\n\r\n        preview.setSurfaceProvider(previewView.getSurfaceProvider());\r\n\r\n        Camera camera = cameraProvider.bindToLifecycle((LifecycleOwner)this, cameraSelector, preview);\r\n\r\n        // For performing operations that affect all outputs.\r\n        CameraControl cameraControl = camera.getCameraControl();\r\n//        // For querying information and states.\r\n//        CameraInfo cameraInfo = camera.getCameraInfo();\r\n        cameraControl.enableTorch(true);\r\n\r\n    }\r\n\r\n    void mlFaceDetector(Preview preview) {\r\n\r\n        FaceDetectorOptions highAccuracyOpts =\r\n                new FaceDetectorOptions.Builder()\r\n                        .setPerformanceMode(FaceDetectorOptions.PERFORMANCE_MODE_ACCURATE)\r\n                        .setLandmarkMode(FaceDetectorOptions.LANDMARK_MODE_ALL)\r\n                        .setClassificationMode(FaceDetectorOptions.CLASSIFICATION_MODE_ALL)\r\n                        .build();\r\n\r\n        FaceDetector detector = FaceDetection.getClient(highAccuracyOpts);\r\n\r\n        Task&lt;List&lt;Face&gt;&gt; result =\r\n                detector.process(image) // this is where the issue is\r\n                        .addOnSuccessListener(\r\n                                new OnSuccessListener&lt;List&lt;Face&gt;&gt;() {\r\n                                    @Override\r\n                                    public void onSuccess(List&lt;Face&gt; faces) {\r\n                                        // Task completed successfully\r\n                                        // ...\r\n                                    }\r\n                                })\r\n                        .addOnFailureListener(\r\n                                new OnFailureListener() {\r\n                                    @Override\r\n                                    public void onFailure(@NonNull Exception e) {\r\n                                        // Task failed with an exception\r\n                                        // ...\r\n                                    }\r\n                                });\r\n\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to pass the camera preiew stream into google ml kit face detector to check if eyes are closed in real time","body":"<p>I'm a complete beginner to android studio mobile development. and This is the code i've been using so far.</p>\n<p>I want to detect if a persons eyes are closed or not real time. I'm using google ml kit. They have provided most of the code but not clear about passing the live camera view into the process(image).</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class EyeDetection extends AppCompatActivity {\n\n    private ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture;\n    PreviewView previewView;\n\n    VideoView videoView;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_eye_detection);\n\n        previewView = findViewById(R.id.previewView);\n        videoView = findViewById(R.id.video_view);\n\n        String videoPath = &quot;android.resource://&quot;+getPackageName()+ &quot;/&quot; + R.raw.videoplayback;\n        Uri uri = Uri.parse(videoPath);\n        videoView.setVideoURI(uri);\n\n        MediaController mediaController = new MediaController(this);\n        videoView.setMediaController(mediaController);\n        mediaController.setAnchorView(videoView);\n\n\n\n//        FaceDetectorOptions realTimeOpts =\n//                new FaceDetectorOptions.Builder()\n//                        .setContourMode(FaceDetectorOptions.CONTOUR_MODE_ALL)\n//                        .build();\n\n        cameraProviderFuture = ProcessCameraProvider.getInstance(this);\n\n        cameraProviderFuture.addListener(() -&gt; {\n            try {\n                ProcessCameraProvider cameraProvider = cameraProviderFuture.get();\n                bindPreview(cameraProvider);\n            } catch (ExecutionException | InterruptedException e) {\n                // No errors need to be handled for this Future.\n                // This should never be reached.\n            }\n        }, ContextCompat.getMainExecutor(this));\n\n\n\n\n    }\n\n//    private class YourAnalyzer implements ImageAnalysis.Analyzer {\n//\n//        @Override\n//        public void analyze(ImageProxy imageProxy) {\n//            Image mediaImage = imageProxy.getImage();\n//            if (mediaImage != null) {\n//                InputImage image =\n//                        InputImage.fromMediaImage(mediaImage, imageProxy.getImageInfo().getRotationDegrees());\n//                // Pass image to an ML Kit Vision API\n//                // ...\n//            }\n//        }\n//\n//    }\n\n\n        void bindPreview(@NonNull ProcessCameraProvider cameraProvider) {\n        Preview preview = new Preview.Builder()\n                .build();\n\n\n            mlFaceDetector(preview);\n\n\n        CameraSelector cameraSelector = new CameraSelector.Builder()\n                .requireLensFacing(CameraSelector.LENS_FACING_FRONT)\n                .build();\n\n        preview.setSurfaceProvider(previewView.getSurfaceProvider());\n\n        Camera camera = cameraProvider.bindToLifecycle((LifecycleOwner)this, cameraSelector, preview);\n\n        // For performing operations that affect all outputs.\n        CameraControl cameraControl = camera.getCameraControl();\n//        // For querying information and states.\n//        CameraInfo cameraInfo = camera.getCameraInfo();\n        cameraControl.enableTorch(true);\n\n    }\n\n    void mlFaceDetector(Preview preview) {\n\n        FaceDetectorOptions highAccuracyOpts =\n                new FaceDetectorOptions.Builder()\n                        .setPerformanceMode(FaceDetectorOptions.PERFORMANCE_MODE_ACCURATE)\n                        .setLandmarkMode(FaceDetectorOptions.LANDMARK_MODE_ALL)\n                        .setClassificationMode(FaceDetectorOptions.CLASSIFICATION_MODE_ALL)\n                        .build();\n\n        FaceDetector detector = FaceDetection.getClient(highAccuracyOpts);\n\n        Task&lt;List&lt;Face&gt;&gt; result =\n                detector.process(image) // this is where the issue is\n                        .addOnSuccessListener(\n                                new OnSuccessListener&lt;List&lt;Face&gt;&gt;() {\n                                    @Override\n                                    public void onSuccess(List&lt;Face&gt; faces) {\n                                        // Task completed successfully\n                                        // ...\n                                    }\n                                })\n                        .addOnFailureListener(\n                                new OnFailureListener() {\n                                    @Override\n                                    public void onFailure(@NonNull Exception e) {\n                                        // Task failed with an exception\n                                        // ...\n                                    }\n                                });\n\n    }\n}\n</code></pre>\n"},{"tags":["java","generics","functional-programming","functional-interface"],"answers":[{"comments":[{"owner":{"account_id":28235185,"reputation":3,"user_id":21583770,"display_name":"user21583770"},"score":0,"creation_date":1682372381,"post_id":76096254,"comment_id":134202127,"body_markdown":"So the type of `InputStream::close` is `Consumer&lt;InputStream&gt;`?","body":"So the type of <code>InputStream::close</code> is <code>Consumer&lt;InputStream&gt;</code>?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1682372472,"post_id":76096254,"comment_id":134202142,"body_markdown":"@user21583770 That&#39;s correct.","body":"@user21583770 That&#39;s correct."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1682377059,"post_id":76096254,"comment_id":134202717,"body_markdown":"No, that is not correct. `InputStream::close` does not have any type, and therefore, is illegal java code. __Unless__, from context, a relevant type can be determined for which `InputStream::close` _would_ fit. So, `Object o = InputStream::close;` is invalid. But, `Consumer&lt;InputStream&gt; o = InputStream::close;` does work. __Because__ the type of `o` tells the compiler how to interpret the expression being assigned to it. lambdas and method refs are typed &#39;outside-in&#39;.","body":"No, that is not correct. <code>InputStream::close</code> does not have any type, and therefore, is illegal java code. <b>Unless</b>, from context, a relevant type can be determined for which <code>InputStream::close</code> <i>would</i> fit. So, <code>Object o = InputStream::close;</code> is invalid. But, <code>Consumer&lt;InputStream&gt; o = InputStream::close;</code> does work. <b>Because</b> the type of <code>o</code> tells the compiler how to interpret the expression being assigned to it. lambdas and method refs are typed &#39;outside-in&#39;."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1682377160,"post_id":76096254,"comment_id":134202733,"body_markdown":"`SOMETYPE x = InputStream::close();` works if SOMETYPE is a functional type (an interface that defines only one non-defaulted method that isn&#39;t already in `j.l.Object`), and the one method it defines has a signature that &#39;works&#39;, e.g. `void foo(Object o)` or `void foo(InputStream o)`. `Consumer&lt;InputStream&gt;` is merely one of an infinite number of such types.","body":"<code>SOMETYPE x = InputStream::close();</code> works if SOMETYPE is a functional type (an interface that defines only one non-defaulted method that isn&#39;t already in <code>j.l.Object</code>), and the one method it defines has a signature that &#39;works&#39;, e.g. <code>void foo(Object o)</code> or <code>void foo(InputStream o)</code>. <code>Consumer&lt;InputStream&gt;</code> is merely one of an infinite number of such types."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1682377891,"post_id":76096254,"comment_id":134202827,"body_markdown":"@rzwitserloot Right. I thought OP was asking in the context of this assignment. Thanks for clarifying.","body":"@rzwitserloot Right. I thought OP was asking in the context of this assignment. Thanks for clarifying."}],"tags":[],"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1682372451,"creation_date":1682371824,"answer_id":76096254,"question_id":76096218,"body_markdown":"There a couple of problems. First, `InputStream.close()` throws an exception, so it can&#39;t be passed as a `Runnable`. You can either convert the method reference to a lambda containing a try/catch block, or create a custom parallel interface that allows exceptions:\r\n\r\n    @FunctionalInterface\r\n    interface CustomRunnable {\r\n        void run() throws Exception;\r\n    }\r\n\r\nThe other issue is that `Runnable` doesn&#39;t accept any arguments. You can pass an [instance method reference][1] instead of passing the object separately:\r\n\r\n    void callFuncOnObj(CustomRunnable r) {\r\n       r.run();\r\n    }\r\n\r\nCalled like this:\r\n\r\n    callFuncOnObj(System.in::close);\r\n\r\nOr you can accept the object with a `Consumer` (or in this case, a similar interface that allows exceptions) and combine them like this:\r\n\r\n    &lt;T&gt; void callFuncOnObj(T obj, CustomConsumer&lt;T&gt; c) {\r\n       c.accept(obj);\r\n    }\r\n\r\nAnd then your original call would work:\r\n\r\n    callFuncOnObj(System.in, InputStream::close);\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html#:~:text=compareByAge%0AMethodReferencesExamples%3A%3AappendStrings-,Reference%20to%20an%20instance%20method%20of%20a%20particular%20object,-containingObject%3A%3AinstanceMethodName","title":"Java call generic function on generic object","body":"<p>There a couple of problems. First, <code>InputStream.close()</code> throws an exception, so it can't be passed as a <code>Runnable</code>. You can either convert the method reference to a lambda containing a try/catch block, or create a custom parallel interface that allows exceptions:</p>\n<pre><code>@FunctionalInterface\ninterface CustomRunnable {\n    void run() throws Exception;\n}\n</code></pre>\n<p>The other issue is that <code>Runnable</code> doesn't accept any arguments. You can pass an <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html#:%7E:text=compareByAge%0AMethodReferencesExamples%3A%3AappendStrings-,Reference%20to%20an%20instance%20method%20of%20a%20particular%20object,-containingObject%3A%3AinstanceMethodName\" rel=\"nofollow noreferrer\">instance method reference</a> instead of passing the object separately:</p>\n<pre><code>void callFuncOnObj(CustomRunnable r) {\n   r.run();\n}\n</code></pre>\n<p>Called like this:</p>\n<pre><code>callFuncOnObj(System.in::close);\n</code></pre>\n<p>Or you can accept the object with a <code>Consumer</code> (or in this case, a similar interface that allows exceptions) and combine them like this:</p>\n<pre><code>&lt;T&gt; void callFuncOnObj(T obj, CustomConsumer&lt;T&gt; c) {\n   c.accept(obj);\n}\n</code></pre>\n<p>And then your original call would work:</p>\n<pre><code>callFuncOnObj(System.in, InputStream::close);\n</code></pre>\n"}],"owner":{"account_id":28235185,"reputation":3,"user_id":21583770,"display_name":"user21583770"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76096254,"answer_count":1,"score":0,"last_activity_date":1682372451,"creation_date":1682371537,"question_id":76096218,"body_markdown":"I want to have a method like this\r\n```\r\n&lt;T&gt; void callFuncOnObj(T obj, Runnable r) {\r\n   obj.r();\r\n   //or\r\n   r.runOnTheInstance(obj);\r\n}\r\n```\r\nthat may be used something like this (ignoring exceptions)\r\n```\r\n   callFuncOnObj(System.in, InputStream::close);\r\n```\r\n\r\nObviously, `Runnable` doesn&#39;t support this.  Apparently, the type of `InputStream::close` is just Object, so how can it be used or even cast so that a generic instance may call it?\r\n\r\nThe most obvious alternative I can think of is accepting a `Method` and dealing with `IllegalArgumentException` if it doesn&#39;t apply,\r\n```\r\nvoid callFuncOnObj(Object obj, Method m) {\r\n   try{\r\n      m.invoke(obj);\r\n   }catch(IllegalArgumentException iae) {\r\n      ...\r\n   }...\r\n}\r\n```\r\n\r\nIs there a good way to do this with generic instances and generic functions on those instances?","title":"Java call generic function on generic object","body":"<p>I want to have a method like this</p>\n<pre><code>&lt;T&gt; void callFuncOnObj(T obj, Runnable r) {\n   obj.r();\n   //or\n   r.runOnTheInstance(obj);\n}\n</code></pre>\n<p>that may be used something like this (ignoring exceptions)</p>\n<pre><code>   callFuncOnObj(System.in, InputStream::close);\n</code></pre>\n<p>Obviously, <code>Runnable</code> doesn't support this.  Apparently, the type of <code>InputStream::close</code> is just Object, so how can it be used or even cast so that a generic instance may call it?</p>\n<p>The most obvious alternative I can think of is accepting a <code>Method</code> and dealing with <code>IllegalArgumentException</code> if it doesn't apply,</p>\n<pre><code>void callFuncOnObj(Object obj, Method m) {\n   try{\n      m.invoke(obj);\n   }catch(IllegalArgumentException iae) {\n      ...\n   }...\n}\n</code></pre>\n<p>Is there a good way to do this with generic instances and generic functions on those instances?</p>\n"},{"tags":["java","visual-studio-code","debugging"],"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1682345058,"post_id":76092516,"comment_id":134195955,"body_markdown":"You possible have a (Java 8 or earlier) JRE installation that doesn&#39;t include the source code ZIP for the Java SE libraries.  Install a JDK instead.","body":"You possible have a (Java 8 or earlier) JRE installation that doesn&#39;t include the source code ZIP for the Java SE libraries.  Install a JDK instead."},{"owner":{"account_id":26103643,"reputation":1,"user_id":19798662,"display_name":"opafmoremedic"},"score":0,"creation_date":1682359833,"post_id":76092516,"comment_id":134199671,"body_markdown":"@StephenC java -version in terminal shows &quot;openjdk version &#39;19.0.2&#39; 2023-01-17&quot; It seems I have an updated JDK. My code also compiles and can run just fine, but I still can&#39;t step into the standard library and view the code.","body":"@StephenC java -version in terminal shows &quot;openjdk version &#39;19.0.2&#39; 2023-01-17&quot; It seems I have an updated JDK. My code also compiles and can run just fine, but I still can&#39;t step into the standard library and view the code."}],"answers":[{"tags":[],"owner":{"account_id":26103643,"reputation":1,"user_id":19798662,"display_name":"opafmoremedic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682372445,"creation_date":1682372445,"answer_id":76096314,"question_id":76092516,"body_markdown":"Solved.\r\n\r\nComment by StephenC lead me to checking into the version of Java I was running. This laptop had openjdk 19 on it, which I thought would be enough, as I checked and it seemed updated. I uninstalled the openjdk packages &amp; reinstalled Java JDK 20 from the Oracle site and now I can step into the standard library like I want.\r\n\r\nIf you&#39;re having the same issue I was, run java -version and check to see if you have &quot;java version#&quot; installed, or if you have &quot;openjdk version#&quot; installed. They offer different levels of debugging.","title":"Why can&#39;t I enter the Java Standard Library when debugging in VS Code?","body":"<p>Solved.</p>\n<p>Comment by StephenC lead me to checking into the version of Java I was running. This laptop had openjdk 19 on it, which I thought would be enough, as I checked and it seemed updated. I uninstalled the openjdk packages &amp; reinstalled Java JDK 20 from the Oracle site and now I can step into the standard library like I want.</p>\n<p>If you're having the same issue I was, run java -version and check to see if you have &quot;java version#&quot; installed, or if you have &quot;openjdk version#&quot; installed. They offer different levels of debugging.</p>\n"}],"owner":{"account_id":26103643,"reputation":1,"user_id":19798662,"display_name":"opafmoremedic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76096314,"answer_count":1,"score":-1,"last_activity_date":1682372445,"creation_date":1682343520,"question_id":76092516,"body_markdown":"I&#39;ve been using VS Code for quite some time, on a number of machines. Never had an issue with stepping into functions and seeing the standard library if I so choose. However, on my new laptop I can&#39;t do that. When debugging all the steps into it still populate in the call stack, but they&#39;re grayed out and they don&#39;t populate in new tabs and they can&#39;t be clicked on. I&#39;m not sure where to go from here.\r\n[Screenshot of VS Code debugger with grayed out call stack][![enter image description here][1]][1](https://i.stack.imgur.com/aKxgQ.png)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aKxgQ.png","title":"Why can&#39;t I enter the Java Standard Library when debugging in VS Code?","body":"<p>I've been using VS Code for quite some time, on a number of machines. Never had an issue with stepping into functions and seeing the standard library if I so choose. However, on my new laptop I can't do that. When debugging all the steps into it still populate in the call stack, but they're grayed out and they don't populate in new tabs and they can't be clicked on. I'm not sure where to go from here.\n[Screenshot of VS Code debugger with grayed out call stack]<a href=\"https://i.stack.imgur.com/aKxgQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aKxgQ.png\" alt=\"enter image description here\" /></a>(<a href=\"https://i.stack.imgur.com/aKxgQ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/aKxgQ.png</a>)</p>\n"},{"tags":["java","json","spring","spring-boot","rest"],"answers":[{"comments":[{"owner":{"account_id":4771078,"reputation":31,"user_id":20999822,"display_name":"Kurian"},"score":0,"creation_date":1673972192,"post_id":75139092,"comment_id":132613324,"body_markdown":"Thank you for your answer. The snippet I added in my question is from an experiment I did. In the actual code, the issue is handled in a different way. As you rightly mentioned, the `afterCompletion` is invoked after the response is committed, but as per the experiment I did, for all response types except for String, the response is fully received by client only after `afterCompletion` is completed. I wanted to test if the headers are modified in `afterCompletion`. Ideally, in `postHandle`, the response cannot be altered as it is invoked only after response is committed.","body":"Thank you for your answer. The snippet I added in my question is from an experiment I did. In the actual code, the issue is handled in a different way. As you rightly mentioned, the <code>afterCompletion</code> is invoked after the response is committed, but as per the experiment I did, for all response types except for String, the response is fully received by client only after <code>afterCompletion</code> is completed. I wanted to test if the headers are modified in <code>afterCompletion</code>. Ideally, in <code>postHandle</code>, the response cannot be altered as it is invoked only after response is committed."}],"tags":[],"owner":{"account_id":274366,"reputation":1144,"user_id":566556,"display_name":"Knut Forkalsrud"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673898856,"creation_date":1673898856,"answer_id":75139092,"question_id":75109281,"body_markdown":"I believe the interceptor is called in the request handler, so if you want to take a lot of time, you&#39;re better off doing that in a separate thread or thread pool.\r\n\r\nAlso, if you want to set response headers, do that in `postHandle`. By the time `afterCompletion` is invoked, the response has already been committed.","title":"HandlerInterceptor interface&#39;s afterCompletion method gets executed before the response is fully committed when response is not a String","body":"<p>I believe the interceptor is called in the request handler, so if you want to take a lot of time, you're better off doing that in a separate thread or thread pool.</p>\n<p>Also, if you want to set response headers, do that in <code>postHandle</code>. By the time <code>afterCompletion</code> is invoked, the response has already been committed.</p>\n"},{"comments":[{"owner":{"account_id":4654301,"reputation":1147,"user_id":3770260,"display_name":"Mingye Wang"},"score":0,"creation_date":1682602424,"post_id":76096291,"comment_id":134244233,"body_markdown":"You can accept your own answer if you want to!","body":"You can accept your own answer if you want to!"}],"tags":[],"owner":{"account_id":4771078,"reputation":31,"user_id":20999822,"display_name":"Kurian"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682372215,"creation_date":1682372215,"answer_id":76096291,"question_id":75109281,"body_markdown":"Upon further analysis, it was found that the **getContentLength(Object, ContentType)** method in **AbstractHttpMessageConverter** is unable to find the size of the object, hence unable to set the Content-Length header. As the number of bytes to be written is not available, the response will not be written till the output stream is closed, which happens after the after completion.\r\n\r\nTo fix the issue, registered a custom Http Message Converter extended from **MappingJackson2HttpMessageConverter** with the overridden method **writeInternal(Object object, @Nullable Type type, HttpOutputMessage outputMessage)**.\r\n\r\nThe overridden method snippet is as below:\r\n\r\n      \r\n      @Override\r\n      protected void writeInternal(Object object, @Nullable Type type, HttpOutputMessage outputMessage)\r\n          throws IOException, HttpMessageNotWritableException {\r\n    \r\n        if( outputMessage.getHeaders().getContentLength() &lt; 0 ) {\r\n          ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n    \r\n          HttpOutputMessage newOutputMessage = new HttpOutputMessage() {\r\n            @Override\r\n            public OutputStream getBody() {\r\n              return byteArrayOutputStream;\r\n            }\r\n    \r\n            @Override\r\n            public HttpHeaders getHeaders() {\r\n              return outputMessage.getHeaders();\r\n            }\r\n          };\r\n          super.writeInternal(object, type, newOutputMessage);\r\n    \r\n          byteArrayOutputStream.flush();\r\n          byteArrayOutputStream.close();\r\n    \r\n    \r\n          HttpHeaders headers = outputMessage.getHeaders();\r\n          headers.setContentLength(byteArrayOutputStream.toByteArray().length);\r\n          StreamUtils.copy(byteArrayOutputStream.toByteArray(), outputMessage.getBody());\r\n        } else {\r\n          super.writeInternal(object, type, outputMessage);\r\n        }\r\n      }\r\n\r\nThe full demo code is available at https://github.com/pkurianjohn/InterceptorAfterCompletion/tree/content-length-fix.\r\n\r\n","title":"HandlerInterceptor interface&#39;s afterCompletion method gets executed before the response is fully committed when response is not a String","body":"<p>Upon further analysis, it was found that the <strong>getContentLength(Object, ContentType)</strong> method in <strong>AbstractHttpMessageConverter</strong> is unable to find the size of the object, hence unable to set the Content-Length header. As the number of bytes to be written is not available, the response will not be written till the output stream is closed, which happens after the after completion.</p>\n<p>To fix the issue, registered a custom Http Message Converter extended from <strong>MappingJackson2HttpMessageConverter</strong> with the overridden method <strong>writeInternal(Object object, @Nullable Type type, HttpOutputMessage outputMessage)</strong>.</p>\n<p>The overridden method snippet is as below:</p>\n<pre><code>  @Override\n  protected void writeInternal(Object object, @Nullable Type type, HttpOutputMessage outputMessage)\n      throws IOException, HttpMessageNotWritableException {\n\n    if( outputMessage.getHeaders().getContentLength() &lt; 0 ) {\n      ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n\n      HttpOutputMessage newOutputMessage = new HttpOutputMessage() {\n        @Override\n        public OutputStream getBody() {\n          return byteArrayOutputStream;\n        }\n\n        @Override\n        public HttpHeaders getHeaders() {\n          return outputMessage.getHeaders();\n        }\n      };\n      super.writeInternal(object, type, newOutputMessage);\n\n      byteArrayOutputStream.flush();\n      byteArrayOutputStream.close();\n\n\n      HttpHeaders headers = outputMessage.getHeaders();\n      headers.setContentLength(byteArrayOutputStream.toByteArray().length);\n      StreamUtils.copy(byteArrayOutputStream.toByteArray(), outputMessage.getBody());\n    } else {\n      super.writeInternal(object, type, outputMessage);\n    }\n  }\n</code></pre>\n<p>The full demo code is available at <a href=\"https://github.com/pkurianjohn/InterceptorAfterCompletion/tree/content-length-fix\" rel=\"nofollow noreferrer\">https://github.com/pkurianjohn/InterceptorAfterCompletion/tree/content-length-fix</a>.</p>\n"}],"owner":{"account_id":4771078,"reputation":31,"user_id":20999822,"display_name":"Kurian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":786,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76096291,"answer_count":2,"score":3,"last_activity_date":1682372215,"creation_date":1673613337,"question_id":75109281,"body_markdown":"I came across a strange issue while working on troubleshooting an issue. In my Spring Boot application, I have a GET REST end-point which returns a POJO which looks like:\r\n\r\n```\r\n@GetMapping(value = &quot;/dto&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n  public ResponseEntity&lt;ReportDto&gt; dto() {\r\n    MultiValueMap&lt;String, String&gt; headers = new HttpHeaders();\r\n    headers.add(&quot;Controller processed time&quot;,LocalDateTime.now().toString());\r\n    return new ResponseEntity&lt;ReportDto&gt;(new ReportDto(), headers, HttpStatus.OK);\r\n  }\r\n```\r\n\r\nI have an interceptor which looks like:\r\n```\r\n@Slf4j\r\n@Component\r\npublic class AuditInterceptor implements HandlerInterceptor {\r\n  @Override\r\n  public void afterCompletion\r\n      (HttpServletRequest request, HttpServletResponse response, Object\r\n          handler, Exception exception) throws Exception {\r\n    Thread.sleep(3000);\r\n    log.info((LocalDateTime.now())+&quot; : Audit event stored&quot;);\r\n  }\r\n```\r\n\r\nThe Thread.sleep(3000) is to simulate the latency we face from audit event store periodically.\r\n\r\nAs per design, the audit event is supposed to be written after the response is committed. This is to avoid delay for the client in case of a delay in writing the event.\r\n\r\nSurprisingly, the client is receiving the response only after 3 seconds (the added delay), which means the response is committed after the &#39;afterCompletion&#39; method is executed. When the response type is String, the response is committed before afterCompletion is executed. I had tried the response type Integer, boolean and int as well. Except for String, all other types (the types I tried) are getting written only after the afterCompletion is executed.\r\n\r\nI have tried different clients. The behavior for each of them are:\r\n- React with axios (both sync and async) - Response body and code are received after the added delay\r\n- Postman - Response code 200 is received immediately, but the body was received after the added delay\r\n- curl - Response printed immediately, but the connection closed only after the added delay\r\n\r\nFrom the behavior observed from curl, it is clear that the delay is not in the Http Message Converter (Jackson by default in Spring Boot).\r\n\r\nI have a workaround solution for my issue, which looks like:\r\n```\r\n  @GetMapping(value = &quot;/custom&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n  public ResponseEntity&lt;String&gt; custom() throws JsonProcessingException {\r\n    MultiValueMap&lt;String, String&gt; headers = new HttpHeaders();\r\n    headers.add(&quot;Controller processed time&quot;,LocalDateTime.now().toString());\r\n    ObjectMapper objectMapper = new ObjectMapper();\r\n    return new ResponseEntity&lt;String&gt;(objectMapper.writeValueAsString(new ReportDto()), headers,\r\n        HttpStatus.OK);\r\n  }\r\n\r\n```\r\n\r\nI prefer to have the right solution for my problem. Appreciate if anyone can help me understand the root cause so that we can come up with the right solution.\r\n\r\nPlease check the demo code at https://github.com/pkurianjohn/InterceptorAfterCompletion.\r\n\r\nThank you.","title":"HandlerInterceptor interface&#39;s afterCompletion method gets executed before the response is fully committed when response is not a String","body":"<p>I came across a strange issue while working on troubleshooting an issue. In my Spring Boot application, I have a GET REST end-point which returns a POJO which looks like:</p>\n<pre><code>@GetMapping(value = &quot;/dto&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n  public ResponseEntity&lt;ReportDto&gt; dto() {\n    MultiValueMap&lt;String, String&gt; headers = new HttpHeaders();\n    headers.add(&quot;Controller processed time&quot;,LocalDateTime.now().toString());\n    return new ResponseEntity&lt;ReportDto&gt;(new ReportDto(), headers, HttpStatus.OK);\n  }\n</code></pre>\n<p>I have an interceptor which looks like:</p>\n<pre><code>@Slf4j\n@Component\npublic class AuditInterceptor implements HandlerInterceptor {\n  @Override\n  public void afterCompletion\n      (HttpServletRequest request, HttpServletResponse response, Object\n          handler, Exception exception) throws Exception {\n    Thread.sleep(3000);\n    log.info((LocalDateTime.now())+&quot; : Audit event stored&quot;);\n  }\n</code></pre>\n<p>The Thread.sleep(3000) is to simulate the latency we face from audit event store periodically.</p>\n<p>As per design, the audit event is supposed to be written after the response is committed. This is to avoid delay for the client in case of a delay in writing the event.</p>\n<p>Surprisingly, the client is receiving the response only after 3 seconds (the added delay), which means the response is committed after the 'afterCompletion' method is executed. When the response type is String, the response is committed before afterCompletion is executed. I had tried the response type Integer, boolean and int as well. Except for String, all other types (the types I tried) are getting written only after the afterCompletion is executed.</p>\n<p>I have tried different clients. The behavior for each of them are:</p>\n<ul>\n<li>React with axios (both sync and async) - Response body and code are received after the added delay</li>\n<li>Postman - Response code 200 is received immediately, but the body was received after the added delay</li>\n<li>curl - Response printed immediately, but the connection closed only after the added delay</li>\n</ul>\n<p>From the behavior observed from curl, it is clear that the delay is not in the Http Message Converter (Jackson by default in Spring Boot).</p>\n<p>I have a workaround solution for my issue, which looks like:</p>\n<pre><code>  @GetMapping(value = &quot;/custom&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n  public ResponseEntity&lt;String&gt; custom() throws JsonProcessingException {\n    MultiValueMap&lt;String, String&gt; headers = new HttpHeaders();\n    headers.add(&quot;Controller processed time&quot;,LocalDateTime.now().toString());\n    ObjectMapper objectMapper = new ObjectMapper();\n    return new ResponseEntity&lt;String&gt;(objectMapper.writeValueAsString(new ReportDto()), headers,\n        HttpStatus.OK);\n  }\n\n</code></pre>\n<p>I prefer to have the right solution for my problem. Appreciate if anyone can help me understand the root cause so that we can come up with the right solution.</p>\n<p>Please check the demo code at <a href=\"https://github.com/pkurianjohn/InterceptorAfterCompletion\" rel=\"nofollow noreferrer\">https://github.com/pkurianjohn/InterceptorAfterCompletion</a>.</p>\n<p>Thank you.</p>\n"},{"tags":["java","design-patterns"],"comments":[{"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"score":0,"creation_date":1446495214,"post_id":33486006,"comment_id":54756924,"body_markdown":"weak references are evil, only use them if you like chasing bugs. Note: Java&#39;s GC is smart","body":"weak references are evil, only use them if you like chasing bugs. Note: Java&#39;s GC is smart"},{"owner":{"account_id":56124,"reputation":7256,"user_id":2506382,"accept_rate":67,"display_name":"dcsohl"},"score":2,"creation_date":1446495499,"post_id":33486006,"comment_id":54757049,"body_markdown":"Let me amend @SleimanJneidi&#39;s statement: Java&#39;s GC is *very* smart. It works on the basis of &quot;reachability&quot; - if neither `Subject` nor `Observer` are &quot;reachable&quot; (essentially: there&#39;s no way to get access to them from any chain of object references starting with objects in the `main()` method), then they can be collected. It does not matter that they reference each other. Those references only ensures that if one is reachable, then the other is too. It won&#39;t needlessly keep them alive if neither is reachable.","body":"Let me amend @SleimanJneidi&#39;s statement: Java&#39;s GC is <i>very</i> smart. It works on the basis of &quot;reachability&quot; - if neither <code>Subject</code> nor <code>Observer</code> are &quot;reachable&quot; (essentially: there&#39;s no way to get access to them from any chain of object references starting with objects in the <code>main()</code> method), then they can be collected. It does not matter that they reference each other. Those references only ensures that if one is reachable, then the other is too. It won&#39;t needlessly keep them alive if neither is reachable."},{"owner":{"account_id":4553306,"reputation":8476,"user_id":3697757,"accept_rate":92,"display_name":"hackjutsu"},"score":0,"creation_date":1446495793,"post_id":33486006,"comment_id":54757192,"body_markdown":"Thank you~ but when should we use `WeakReference`? I thought the Observer pattern was a good example for  `WeakReference`, since in C++ the oberser pattern shows good example for `weak_ptr`...","body":"Thank you~ but when should we use <code>WeakReference</code>? I thought the Observer pattern was a good example for  <code>WeakReference</code>, since in C++ the oberser pattern shows good example for <code>weak_ptr</code>..."},{"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"score":0,"creation_date":1446495962,"post_id":33486006,"comment_id":54757273,"body_markdown":"@Hackjustu u use WeakReference if you want your program to be unpredictable relying on the behaviour of the GC","body":"@Hackjustu u use WeakReference if you want your program to be unpredictable relying on the behaviour of the GC"},{"owner":{"account_id":6985925,"reputation":130,"user_id":5359550,"display_name":"Kaputnik120"},"score":0,"creation_date":1446496277,"post_id":33486006,"comment_id":54757423,"body_markdown":"Just trust the GC. If you are concerned about performance, rather try different configurations: type of gc (g1, parallel,...), young gen space, etc.","body":"Just trust the GC. If you are concerned about performance, rather try different configurations: type of gc (g1, parallel,...), young gen space, etc."}],"answers":[{"comments":[{"owner":{"account_id":6317514,"reputation":1163,"user_id":6425831,"display_name":"saolof"},"score":1,"creation_date":1677195572,"post_id":33488199,"comment_id":133295588,"body_markdown":"I strongly disagree with this in the situation where the Subject is intentionally never GCd while the observers need to be GCed. The Subject should never be thought of as having a reference to the Observer (it should be the other way around), so it is semantically wrong for it to hold a strong reference to it.\n\nCircular refs are not the problem, floating garbage is","body":"I strongly disagree with this in the situation where the Subject is intentionally never GCd while the observers need to be GCed. The Subject should never be thought of as having a reference to the Observer (it should be the other way around), so it is semantically wrong for it to hold a strong reference to it.  Circular refs are not the problem, floating garbage is"}],"tags":[],"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682371729,"creation_date":1446503315,"answer_id":33488199,"question_id":33486006,"body_markdown":"You don&#39;t have to use weak references in your case. What you are doing is fine. Java GC already handles Circular References. Java GC will collect an entire Circular References graph if it (graph) is an ISLAND (No incoming references to the graph from the Root - You can think the entire the graph is a big Object and the GC will collect this big object If there is no references to it)\r\n\r\nTake a look at this: https://stackoverflow.com/questions/1910194/how-does-java-garbage-collection-work-with-circular-references","title":"Should we use WeakReference in Observer Pattern?","body":"<p>You don't have to use weak references in your case. What you are doing is fine. Java GC already handles Circular References. Java GC will collect an entire Circular References graph if it (graph) is an ISLAND (No incoming references to the graph from the Root - You can think the entire the graph is a big Object and the GC will collect this big object If there is no references to it)</p>\n<p>Take a look at this: <a href=\"https://stackoverflow.com/questions/1910194/how-does-java-garbage-collection-work-with-circular-references\">How does Java Garbage Collection work with Circular References?</a></p>\n"}],"owner":{"account_id":4553306,"reputation":8476,"user_id":3697757,"accept_rate":92,"display_name":"hackjutsu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1794,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"closed_date":1446504215,"accepted_answer_id":33488199,"answer_count":1,"score":6,"last_activity_date":1682371729,"creation_date":1446495123,"question_id":33486006,"body_markdown":"I&#39;m learning and trying to implement the Observer pattern in Java from this [tutorial][1]. I&#39;m stuck at the point about whether I should use `WeakReference` for the subject to hold the observers.\r\n\r\nFor the implementation below, the `Subject` and the `BinaryObserver` are holding strong references to each other, which I&#39;m afraid prevents GC from collecting the unused `Subject`.\r\n\r\nSo my question is, should I use `List&lt;WeakReference&lt;Observer&gt;&gt; observers` instead of `List&lt;Observer&gt; observers`?\r\n\r\n**Subject.java**\r\n\r\n    public class Subject {\r\n\r\n       private List&lt;Observer&gt; observers = new ArrayList&lt;Observer&gt;();\r\n       private int state;\r\n\r\n       public int getState() {\r\n          return state;\r\n       }\r\n\r\n       public void setState(int state) {\r\n          this.state = state;\r\n          notifyAllObservers();\r\n       }\r\n\r\n       public void attach(Observer observer){\r\n           observers.add(observer);\r\n       }\r\n\r\n       public void notifyAllObservers(){\r\n           for (Observer observer : observers) {\r\n               observer.update();\r\n           }\r\n       }\r\n    }\r\n\r\n**Observer.java**\r\n\r\n    public abstract class Observer {\r\n        protected Subject subject;\r\n        public abstract void update();\r\n    }\r\n\r\n**BinaryObserver.java**\r\n\r\n    public class BinaryObserver extends Observer{\r\n\r\n        public BinaryObserver(Subject subject){\r\n            this.subject = subject;\r\n            this.subject.attach(this);\r\n        }\r\n\r\n        @Override\r\n        public void update() {\r\n            System.out.println(&quot;Binary String: &quot; + Integer.toBinaryString());\r\n        }\r\n    }\r\n\r\n**ObserverPatternDemo.java**\r\n\r\n    public class ObserverPatternDemo {\r\n        public static void main(String[] args) {\r\n           Subject subject = new Subject();\r\n\r\n           new BinaryObserver(subject);\r\n\r\n           System.out.println(&quot;First state change: 15&quot;);\r\n           subject.setState(15);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: http://www.tutorialspoint.com/design_pattern/observer_pattern.htm","title":"Should we use WeakReference in Observer Pattern?","body":"<p>I'm learning and trying to implement the Observer pattern in Java from this <a href=\"http://www.tutorialspoint.com/design_pattern/observer_pattern.htm\" rel=\"noreferrer\">tutorial</a>. I'm stuck at the point about whether I should use <code>WeakReference</code> for the subject to hold the observers.</p>\n\n<p>For the implementation below, the <code>Subject</code> and the <code>BinaryObserver</code> are holding strong references to each other, which I'm afraid prevents GC from collecting the unused <code>Subject</code>.</p>\n\n<p>So my question is, should I use <code>List&lt;WeakReference&lt;Observer&gt;&gt; observers</code> instead of <code>List&lt;Observer&gt; observers</code>?</p>\n\n<p><strong>Subject.java</strong></p>\n\n<pre><code>public class Subject {\n\n   private List&lt;Observer&gt; observers = new ArrayList&lt;Observer&gt;();\n   private int state;\n\n   public int getState() {\n      return state;\n   }\n\n   public void setState(int state) {\n      this.state = state;\n      notifyAllObservers();\n   }\n\n   public void attach(Observer observer){\n       observers.add(observer);\n   }\n\n   public void notifyAllObservers(){\n       for (Observer observer : observers) {\n           observer.update();\n       }\n   }\n}\n</code></pre>\n\n<p><strong>Observer.java</strong></p>\n\n<pre><code>public abstract class Observer {\n    protected Subject subject;\n    public abstract void update();\n}\n</code></pre>\n\n<p><strong>BinaryObserver.java</strong></p>\n\n<pre><code>public class BinaryObserver extends Observer{\n\n    public BinaryObserver(Subject subject){\n        this.subject = subject;\n        this.subject.attach(this);\n    }\n\n    @Override\n    public void update() {\n        System.out.println(\"Binary String: \" + Integer.toBinaryString());\n    }\n}\n</code></pre>\n\n<p><strong>ObserverPatternDemo.java</strong></p>\n\n<pre><code>public class ObserverPatternDemo {\n    public static void main(String[] args) {\n       Subject subject = new Subject();\n\n       new BinaryObserver(subject);\n\n       System.out.println(\"First state change: 15\");\n       subject.setState(15);\n    }\n}\n</code></pre>\n"},{"tags":["java","math","game-engine","game-physics","angle"],"comments":[{"owner":{"account_id":794766,"reputation":158675,"user_id":871026,"accept_rate":76,"display_name":"Reimeus"},"score":2,"creation_date":1436913366,"post_id":31418567,"comment_id":50809634,"body_markdown":"http://math.stackexchange.com/","body":"<a href=\"http://math.stackexchange.com/\">math.stackexchange.com</a>"},{"owner":{"account_id":1417400,"reputation":21231,"user_id":1342730,"accept_rate":95,"display_name":"mathematician1975"},"score":0,"creation_date":1436913504,"post_id":31418567,"comment_id":50809700,"body_markdown":"Your question is very vague but does this help http://stackoverflow.com/questions/30413068/angle-between-two-lines-beginning-at-one-side-of-the-line/30413250#30413250","body":"Your question is very vague but does this help <a href=\"http://stackoverflow.com/questions/30413068/angle-between-two-lines-beginning-at-one-side-of-the-line/30413250#30413250\" title=\"angle between two lines beginning at one side of the line\">stackoverflow.com/questions/30413068/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":3598506,"reputation":717,"user_id":3002444,"accept_rate":82,"display_name":"8bra1nz"},"score":0,"creation_date":1657867534,"post_id":31420884,"comment_id":128916274,"body_markdown":"I think the comment above the function is misleading or return should be inverted. This function return 1 if otherAngle is to the left of otherAngle and -1 if it&#39;s to the right (relative to the sourceAngle).","body":"I think the comment above the function is misleading or return should be inverted. This function return 1 if otherAngle is to the left of otherAngle and -1 if it&#39;s to the right (relative to the sourceAngle)."}],"tags":[],"owner":{"account_id":356709,"reputation":24094,"user_id":696391,"accept_rate":83,"display_name":"samgak"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1436949296,"creation_date":1436930245,"answer_id":31420884,"question_id":31418567,"body_markdown":"It depends on whether your angles specify a rotation in the clockwise or anti-clockwise direction. If you are looking in the direction of the tank turret, then an object is on the right if you need to rotate the turret clockwise to point at it as quickly as possible, and on the left if you need to rotate anti-clockwise.\r\n\r\nObviously, you can rotate in the opposite direction to go &quot;the long way around&quot;: if an object is 10 degrees to the right then you can either rotate 10 degrees clockwise or 350 degrees anti-clockwise to point at it. But let&#39;s consider only the short way around, assuming that angles are specified in a clockwise direction:\r\n\r\n    // returns 1 if otherAngle is to the right of sourceAngle,\r\n    //         0 if the angles are identical\r\n    //         -1 if otherAngle is to the left of sourceAngle\r\n    int compareAngles(float sourceAngle, float otherAngle)\r\n    {\r\n        // sourceAngle and otherAngle should be in the range -180 to 180\r\n        float difference = otherAngle - sourceAngle;\r\n\r\n        if(difference &lt; -180.0f)\r\n            difference += 360.0f;\r\n        if(difference &gt; 180.0f)\r\n            difference -= 360.0f;\r\n\r\n        if(difference &gt; 0.0f)\r\n            return 1;\r\n        if(difference &lt; 0.0f)\r\n            return -1;\r\n\r\n        return 0;\r\n    }\r\n\r\nAfter subtracting the angles, the result can be in the range of -360 (-180 minus 180) to 360 (180 minus -180). You can bring them into the range of -180 to 180 by adding or subtracting 360 degrees, then compare to zero and  return the result.\r\n\r\nAngles with an absolute value between 180 and 360 correspond to the &quot;long way around&quot; rotations, and adding or subtracting 360 converts them to the &quot;short way around&quot;. For example -350 degrees clockwise the long way around (i.e. 350 degrees anti-clockwise) plus 360 equates to 10 degrees clockwise the short way around.\r\n\r\nIf the angles are specified in an anti-clockwise direction, then the meaning of the return value is reversed (1 means left, -1 means right)","title":"Is angle to the left or right of second angle","body":"<p>It depends on whether your angles specify a rotation in the clockwise or anti-clockwise direction. If you are looking in the direction of the tank turret, then an object is on the right if you need to rotate the turret clockwise to point at it as quickly as possible, and on the left if you need to rotate anti-clockwise.</p>\n\n<p>Obviously, you can rotate in the opposite direction to go \"the long way around\": if an object is 10 degrees to the right then you can either rotate 10 degrees clockwise or 350 degrees anti-clockwise to point at it. But let's consider only the short way around, assuming that angles are specified in a clockwise direction:</p>\n\n<pre><code>// returns 1 if otherAngle is to the right of sourceAngle,\n//         0 if the angles are identical\n//         -1 if otherAngle is to the left of sourceAngle\nint compareAngles(float sourceAngle, float otherAngle)\n{\n    // sourceAngle and otherAngle should be in the range -180 to 180\n    float difference = otherAngle - sourceAngle;\n\n    if(difference &lt; -180.0f)\n        difference += 360.0f;\n    if(difference &gt; 180.0f)\n        difference -= 360.0f;\n\n    if(difference &gt; 0.0f)\n        return 1;\n    if(difference &lt; 0.0f)\n        return -1;\n\n    return 0;\n}\n</code></pre>\n\n<p>After subtracting the angles, the result can be in the range of -360 (-180 minus 180) to 360 (180 minus -180). You can bring them into the range of -180 to 180 by adding or subtracting 360 degrees, then compare to zero and  return the result.</p>\n\n<p>Angles with an absolute value between 180 and 360 correspond to the \"long way around\" rotations, and adding or subtracting 360 converts them to the \"short way around\". For example -350 degrees clockwise the long way around (i.e. 350 degrees anti-clockwise) plus 360 equates to 10 degrees clockwise the short way around.</p>\n\n<p>If the angles are specified in an anti-clockwise direction, then the meaning of the return value is reversed (1 means left, -1 means right)</p>\n"},{"tags":[],"owner":{"account_id":20946596,"reputation":11,"user_id":15389297,"display_name":"JR 01"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682371699,"creation_date":1677553004,"answer_id":75587465,"question_id":31418567,"body_markdown":"I&#39;m going back through one of my older projects and found something interesting that I thought could be useful for this or in other cases. It&#39;s an expression that can take any two angles and outputs the direction and distance on a circle (-180 to 180). \r\n`(((B-A+180)%360-360)%360&#177;180)`\r\n\r\n    // if AngleDistance == 0, then the Angles are Identical.\r\n    // if AngleDistance  &lt; 0, then TargetAngle is to the left of SourceAngle.\r\n    // if AngleDistance  &gt; 0, then TargetAngle is to the right of SourceAngle.\r\n    // if AngleDistance == &#177;180, then they are Opposite Angles.\r\n    // SourceAngle and TargetAngle can be any Number.\r\n\r\n    function AngleDistance(SourceAngle, TargetAngle) {\r\n    return (((TargetAngle-SourceAngle+180)%360-360)%360&#177;180);\r\n    }\r\n    \r\nSome examples are listed below:\r\n\r\n    AngleDistance(20,60) = 40\r\n    AngleDistance(90,0) = -90\r\n    AngleDistance(-90,350) = 80\r\n    AngleDistance(45,270) = -135\r\n    AngleDistance(145,525) = 20\r\n\r\n*(&#177; is dependent on the [programming language][1] used, such as using addition in Java, C+, and Haxe or subtraction in Python, Ruby, and Symbolab.)*\r\n\r\n  [1]: https://stackoverflow.com/questions/2215318/difference-between-modulus-implementation-in-python-vs-java","title":"Is angle to the left or right of second angle","body":"<p>I'm going back through one of my older projects and found something interesting that I thought could be useful for this or in other cases. It's an expression that can take any two angles and outputs the direction and distance on a circle (-180 to 180).\n<code>(((B-A+180)%360-360)%360±180)</code></p>\n<pre><code>// if AngleDistance == 0, then the Angles are Identical.\n// if AngleDistance  &lt; 0, then TargetAngle is to the left of SourceAngle.\n// if AngleDistance  &gt; 0, then TargetAngle is to the right of SourceAngle.\n// if AngleDistance == ±180, then they are Opposite Angles.\n// SourceAngle and TargetAngle can be any Number.\n\nfunction AngleDistance(SourceAngle, TargetAngle) {\nreturn (((TargetAngle-SourceAngle+180)%360-360)%360±180);\n}\n</code></pre>\n<p>Some examples are listed below:</p>\n<pre><code>AngleDistance(20,60) = 40\nAngleDistance(90,0) = -90\nAngleDistance(-90,350) = 80\nAngleDistance(45,270) = -135\nAngleDistance(145,525) = 20\n</code></pre>\n<p><em>(± is dependent on the <a href=\"https://stackoverflow.com/questions/2215318/difference-between-modulus-implementation-in-python-vs-java\">programming language</a> used, such as using addition in Java, C+, and Haxe or subtraction in Python, Ruby, and Symbolab.)</em></p>\n"}],"owner":{"account_id":6091240,"reputation":23,"user_id":4753436,"display_name":"ZwiftTalon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1802,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":31420884,"answer_count":2,"score":1,"last_activity_date":1682371699,"creation_date":1436913236,"question_id":31418567,"body_markdown":"I need to know if another angle is on the right or on the left of the source angle.\r\n\r\nI tried to subtract the angles and get the absolute value of them, but the range is from -180 to 180 meaning that when I go to 180 and go over to -180 it will give me the opposite answer.\r\n\r\nIf you are wondering what this is for, is for a Java Game I am developing where there is a tank turret controlled by the mouse.\r\n","title":"Is angle to the left or right of second angle","body":"<p>I need to know if another angle is on the right or on the left of the source angle.</p>\n\n<p>I tried to subtract the angles and get the absolute value of them, but the range is from -180 to 180 meaning that when I go to 180 and go over to -180 it will give me the opposite answer.</p>\n\n<p>If you are wondering what this is for, is for a Java Game I am developing where there is a tank turret controlled by the mouse.</p>\n"},{"tags":["java","spring","jpa","spring-data","spring-data-jpa"],"comments":[{"owner":{"account_id":2003177,"reputation":16895,"user_id":1793718,"accept_rate":69,"display_name":"Lucky"},"score":1,"creation_date":1473512243,"post_id":14014086,"comment_id":66176362,"body_markdown":"Also read this article&#39;s section [Introduction to Spring Data Repositories](https://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-introduction/)","body":"Also read this article&#39;s section <a href=\"https://www.petrikainulainen.net/programming/spring-framework/spring-data-jpa-tutorial-introduction/\" rel=\"nofollow noreferrer\">Introduction to Spring Data Repositories</a>"}],"answers":[{"comments":[{"owner":{"account_id":1049806,"reputation":552,"user_id":1054014,"display_name":"Hinotori"},"score":259,"creation_date":1481134819,"post_id":14025100,"comment_id":69256321,"body_markdown":"and returns a List&lt;&gt; instead of Iterable&lt;&gt; in findAll() :-)","body":"and returns a List&lt;&gt; instead of Iterable&lt;&gt; in findAll() :-)"}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":1,"down_vote_count":1,"up_vote_count":1487,"is_accepted":true,"score":1486,"last_activity_date":1617548823,"creation_date":1356377794,"answer_id":14025100,"question_id":14014086,"body_markdown":"[`JpaRepository`][1] extends [`PagingAndSortingRepository`][2] which in turn extends [`CrudRepository`][3]. \r\n\r\nTheir main functions are:\r\n\r\n - [`CrudRepository`][3] mainly provides CRUD functions.\r\n - [`PagingAndSortingRepository`][2] provides methods to do pagination and sorting records.\r\n - [`JpaRepository`][1] provides some JPA-related methods such as flushing the persistence context and deleting records in a batch.\r\n\r\nBecause of the inheritance mentioned above,  `JpaRepository` will have all the functions of `CrudRepository` and `PagingAndSortingRepository`. So if you don&#39;t need the repository to have the functions provided by `JpaRepository` and `PagingAndSortingRepository` , use `CrudRepository`.\r\n\r\n  [1]: http://static.springsource.org/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\r\n  [2]: http://static.springsource.org/spring-data/data-commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html\r\n  [3]: http://static.springsource.org/spring-data/data-commons/docs/current/api/org/springframework/data/repository/CrudRepository.html","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<p><a href=\"http://static.springsource.org/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\" rel=\"noreferrer\"><code>JpaRepository</code></a> extends <a href=\"http://static.springsource.org/spring-data/data-commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html\" rel=\"noreferrer\"><code>PagingAndSortingRepository</code></a> which in turn extends <a href=\"http://static.springsource.org/spring-data/data-commons/docs/current/api/org/springframework/data/repository/CrudRepository.html\" rel=\"noreferrer\"><code>CrudRepository</code></a>.</p>\n<p>Their main functions are:</p>\n<ul>\n<li><a href=\"http://static.springsource.org/spring-data/data-commons/docs/current/api/org/springframework/data/repository/CrudRepository.html\" rel=\"noreferrer\"><code>CrudRepository</code></a> mainly provides CRUD functions.</li>\n<li><a href=\"http://static.springsource.org/spring-data/data-commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html\" rel=\"noreferrer\"><code>PagingAndSortingRepository</code></a> provides methods to do pagination and sorting records.</li>\n<li><a href=\"http://static.springsource.org/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\" rel=\"noreferrer\"><code>JpaRepository</code></a> provides some JPA-related methods such as flushing the persistence context and deleting records in a batch.</li>\n</ul>\n<p>Because of the inheritance mentioned above,  <code>JpaRepository</code> will have all the functions of <code>CrudRepository</code> and <code>PagingAndSortingRepository</code>. So if you don't need the repository to have the functions provided by <code>JpaRepository</code> and <code>PagingAndSortingRepository</code> , use <code>CrudRepository</code>.</p>\n"},{"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1675161565,"post_id":20784007,"comment_id":132864394,"body_markdown":"This should be the accepted answer: it is not only more complete but also more authoritative because it was written by the &quot;Spring Data Project Lead&quot;.  Thank you!","body":"This should be the accepted answer: it is not only more complete but also more authoritative because it was written by the &quot;Spring Data Project Lead&quot;.  Thank you!"},{"owner":{"account_id":1448620,"reputation":965,"user_id":1366287,"accept_rate":40,"display_name":"taylorcressy"},"score":1,"creation_date":1680183605,"post_id":20784007,"comment_id":133857583,"body_markdown":"I am curious as to why saveAndFlush is a method that is only part of something like the JpaRepository? Isn&#39;t flushing the persistence context a generic operation? How would we go about having the same functionality without using a technology specific interface - per your recommendation?","body":"I am curious as to why saveAndFlush is a method that is only part of something like the JpaRepository? Isn&#39;t flushing the persistence context a generic operation? How would we go about having the same functionality without using a technology specific interface - per your recommendation?"},{"owner":{"account_id":8565752,"reputation":615,"user_id":6418277,"accept_rate":81,"display_name":"Gaetan L."},"score":0,"creation_date":1695667279,"post_id":20784007,"comment_id":136052408,"body_markdown":"@Oliver Drotbohm Sorry for the very late question, you say &quot;they expose the underlying persistence technology&quot; but I thought that JPA was just a specification, not an implementation? For example I use Hibernate, but I try to avoid Hibernate-specific code, and I thought using JPA classes instead was better, but maybe there is something I didn&#39;t understand?","body":"@Oliver Drotbohm Sorry for the very late question, you say &quot;they expose the underlying persistence technology&quot; but I thought that JPA was just a specification, not an implementation? For example I use Hibernate, but I try to avoid Hibernate-specific code, and I thought using JPA classes instead was better, but maybe there is something I didn&#39;t understand?"}],"tags":[],"owner":{"account_id":9744,"reputation":80816,"user_id":18122,"accept_rate":80,"display_name":"Oliver Drotbohm"},"comment_count":3,"down_vote_count":1,"up_vote_count":508,"is_accepted":false,"score":507,"last_activity_date":1540895381,"creation_date":1388057127,"answer_id":20784007,"question_id":14014086,"body_markdown":"Ken&#39;s answer is basically right but I&#39;d like to chime in on the &quot;why would you want to use one over the other?&quot; part of your question.\r\n\r\n## Basics\r\n\r\nThe base interface you choose for your repository has two main purposes. First, you allow the Spring Data repository infrastructure to find your interface and trigger the proxy creation so that you inject instances of the interface into clients. The second purpose is to pull in as much functionality as needed into the interface without having to declare extra methods.\r\n\r\n## The common interfaces\r\n\r\nThe Spring Data core library ships with two base interfaces that expose a dedicated set of functionalities:\r\n\r\n- `CrudRepository` - CRUD methods\r\n- `PagingAndSortingRepository` - methods for pagination and sorting (extends `CrudRepository`)\r\n\r\n## Store-specific interfaces\r\n\r\nThe individual store modules (e.g. for JPA or MongoDB) expose store-specific extensions of these base interfaces to allow access to store-specific functionality like flushing or dedicated batching that take some store specifics into account. An example for this is `deleteInBatch(…)` of `JpaRepository` which is different from `delete(…)` as it uses a query to delete the given entities which is more performant but comes with the side effect of not triggering the JPA-defined cascades (as the spec defines it).\r\n\r\nWe generally recommend *not* to use these base interfaces as they expose the underlying persistence technology to the clients and thus tighten the coupling between them and the repository. Plus, you get a bit away from the original definition of a repository which is basically &quot;a collection of entities&quot;. So if you can, stay with `PagingAndSortingRepository`.\r\n\r\n## Custom repository base interfaces\r\n\r\nThe downside of directly depending on one of the provided base interfaces is two-fold. Both of them might be considered as theoretical but I think they&#39;re important to be aware of:\r\n\r\n1. **Depending on a Spring Data repository interface couples your repository interface to the library.** I don&#39;t think this is a particular issue as you&#39;ll probably use abstractions like `Page` or `Pageable` in your code anyway. Spring Data is not any different from any other general purpose library like commons-lang or Guava. As long as it provides reasonable benefit, it&#39;s just fine.\r\n2. **By extending e.g. `CrudRepository`, you expose a complete set of persistence method at once.** This is probably fine in most circumstances as well but you might run into situations where you&#39;d like to gain more fine-grained control over the methods expose, e.g. to create a `ReadOnlyRepository` that doesn&#39;t include the `save(…)` and `delete(…)` methods of `CrudRepository`.\r\n\r\nThe solution to both of these downsides is to craft your own base repository interface or even a set of them. In a lot of applications I have seen something like this:\r\n\r\n    interface ApplicationRepository&lt;T&gt; extends PagingAndSortingRepository&lt;T, Long&gt; { }\r\n\r\n    interface ReadOnlyRepository&lt;T&gt; extends Repository&lt;T, Long&gt; {\r\n    \r\n      // Al finder methods go here\r\n    }\r\n\r\nThe first repository interface is some general purpose base interface that actually only fixes point 1 but also ties the ID type to be `Long` for consistency. The second interface usually has all the `find…(…)` methods copied from `CrudRepository` and `PagingAndSortingRepository` but does not expose the manipulating ones. Read more on that approach in the [reference documentation][1].\r\n\r\n## Summary - tl;dr\r\n\r\nThe repository abstraction allows you to pick the base repository totally driven by you architectural and functional needs. Use the ones provided out of the box if they suit, craft your own repository base interfaces if necessary. Stay away from the store specific repository interfaces unless unavoidable.\r\n\r\n  [1]: http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.definition-tuning","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<p>Ken's answer is basically right but I'd like to chime in on the \"why would you want to use one over the other?\" part of your question.</p>\n\n<h2>Basics</h2>\n\n<p>The base interface you choose for your repository has two main purposes. First, you allow the Spring Data repository infrastructure to find your interface and trigger the proxy creation so that you inject instances of the interface into clients. The second purpose is to pull in as much functionality as needed into the interface without having to declare extra methods.</p>\n\n<h2>The common interfaces</h2>\n\n<p>The Spring Data core library ships with two base interfaces that expose a dedicated set of functionalities:</p>\n\n<ul>\n<li><code>CrudRepository</code> - CRUD methods</li>\n<li><code>PagingAndSortingRepository</code> - methods for pagination and sorting (extends <code>CrudRepository</code>)</li>\n</ul>\n\n<h2>Store-specific interfaces</h2>\n\n<p>The individual store modules (e.g. for JPA or MongoDB) expose store-specific extensions of these base interfaces to allow access to store-specific functionality like flushing or dedicated batching that take some store specifics into account. An example for this is <code>deleteInBatch(…)</code> of <code>JpaRepository</code> which is different from <code>delete(…)</code> as it uses a query to delete the given entities which is more performant but comes with the side effect of not triggering the JPA-defined cascades (as the spec defines it).</p>\n\n<p>We generally recommend <em>not</em> to use these base interfaces as they expose the underlying persistence technology to the clients and thus tighten the coupling between them and the repository. Plus, you get a bit away from the original definition of a repository which is basically \"a collection of entities\". So if you can, stay with <code>PagingAndSortingRepository</code>.</p>\n\n<h2>Custom repository base interfaces</h2>\n\n<p>The downside of directly depending on one of the provided base interfaces is two-fold. Both of them might be considered as theoretical but I think they're important to be aware of:</p>\n\n<ol>\n<li><strong>Depending on a Spring Data repository interface couples your repository interface to the library.</strong> I don't think this is a particular issue as you'll probably use abstractions like <code>Page</code> or <code>Pageable</code> in your code anyway. Spring Data is not any different from any other general purpose library like commons-lang or Guava. As long as it provides reasonable benefit, it's just fine.</li>\n<li><strong>By extending e.g. <code>CrudRepository</code>, you expose a complete set of persistence method at once.</strong> This is probably fine in most circumstances as well but you might run into situations where you'd like to gain more fine-grained control over the methods expose, e.g. to create a <code>ReadOnlyRepository</code> that doesn't include the <code>save(…)</code> and <code>delete(…)</code> methods of <code>CrudRepository</code>.</li>\n</ol>\n\n<p>The solution to both of these downsides is to craft your own base repository interface or even a set of them. In a lot of applications I have seen something like this:</p>\n\n<pre><code>interface ApplicationRepository&lt;T&gt; extends PagingAndSortingRepository&lt;T, Long&gt; { }\n\ninterface ReadOnlyRepository&lt;T&gt; extends Repository&lt;T, Long&gt; {\n\n  // Al finder methods go here\n}\n</code></pre>\n\n<p>The first repository interface is some general purpose base interface that actually only fixes point 1 but also ties the ID type to be <code>Long</code> for consistency. The second interface usually has all the <code>find…(…)</code> methods copied from <code>CrudRepository</code> and <code>PagingAndSortingRepository</code> but does not expose the manipulating ones. Read more on that approach in the <a href=\"http://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.definition-tuning\" rel=\"noreferrer\">reference documentation</a>.</p>\n\n<h2>Summary - tl;dr</h2>\n\n<p>The repository abstraction allows you to pick the base repository totally driven by you architectural and functional needs. Use the ones provided out of the box if they suit, craft your own repository base interfaces if necessary. Stay away from the store specific repository interfaces unless unavoidable.</p>\n"},{"comments":[{"owner":{"account_id":7581485,"reputation":161,"user_id":5752060,"accept_rate":100,"display_name":"s-kaczmarek"},"score":0,"creation_date":1551376495,"post_id":49205914,"comment_id":96627521,"body_markdown":"What about &quot;extends Repository&lt;&gt;&quot;? Which methods will it have? Same as CrudRepository?","body":"What about &quot;extends Repository&lt;&gt;&quot;? Which methods will it have? Same as CrudRepository?"}],"tags":[],"owner":{"account_id":5144206,"reputation":10678,"user_id":4120631,"accept_rate":33,"display_name":"Joby Wilson Mathews"},"comment_count":1,"down_vote_count":0,"up_vote_count":125,"is_accepted":false,"score":125,"last_activity_date":1520878409,"creation_date":1520661735,"answer_id":49205914,"question_id":14014086,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n**Summary:**\r\n\r\n - PagingAndSortingRepository extends CrudRepository\r\n   \r\n - JpaRepository extends PagingAndSortingRepository  \r\n\r\nThe **CrudRepository** interface provides methods for CRUD operations, so it allows you to create, read, update and delete records without having to define your own methods.\r\n\r\nThe **PagingAndSortingRepository** provides additional methods to retrieve entities using pagination and sorting. \r\n\r\nFinally the **JpaRepository** add some more functionality that is specific to JPA.\r\n\r\n  [1]: https://i.stack.imgur.com/ee7XF.jpg","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<p><a href=\"https://i.stack.imgur.com/ee7XF.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ee7XF.jpg\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Summary:</strong></p>\n\n<ul>\n<li><p>PagingAndSortingRepository extends CrudRepository</p></li>\n<li><p>JpaRepository extends PagingAndSortingRepository  </p></li>\n</ul>\n\n<p>The <strong>CrudRepository</strong> interface provides methods for CRUD operations, so it allows you to create, read, update and delete records without having to define your own methods.</p>\n\n<p>The <strong>PagingAndSortingRepository</strong> provides additional methods to retrieve entities using pagination and sorting. </p>\n\n<p>Finally the <strong>JpaRepository</strong> add some more functionality that is specific to JPA.</p>\n"},{"comments":[{"owner":{"account_id":8002498,"reputation":352,"user_id":6036853,"display_name":"Rozar Fabien"},"score":1,"creation_date":1629276872,"post_id":55555759,"comment_id":121641483,"body_markdown":"Hi, nice scheme. Which tool do you use to generate this kind of scheme please?","body":"Hi, nice scheme. Which tool do you use to generate this kind of scheme please?"},{"owner":{"account_id":19044543,"reputation":6393,"user_id":13903942,"display_name":"Federico Ba&#249;"},"score":0,"creation_date":1686220913,"post_id":55555759,"comment_id":134770591,"body_markdown":"@RozarFabien u asked few years back and I hope u found out how, but i put it here for reference for others too. In the picture of this quesiton I am not sure which tool but, you cna easily do it using Intellij (or any of their IDEs really, depending on the language u use) here their docs https://www.jetbrains.com/help/idea/class-diagram.html#analyze_class","body":"@RozarFabien u asked few years back and I hope u found out how, but i put it here for reference for others too. In the picture of this quesiton I am not sure which tool but, you cna easily do it using Intellij (or any of their IDEs really, depending on the language u use) here their docs <a href=\"https://www.jetbrains.com/help/idea/class-diagram.html#analyze_class\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/class-diagram.html#analyze_class</a>"}],"tags":[],"owner":{"account_id":11541274,"reputation":590,"user_id":8456875,"display_name":"Evan Knox Thomas"},"comment_count":2,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1566624212,"creation_date":1554613020,"answer_id":55555759,"question_id":14014086,"body_markdown":"I am learning Spring Data JPA. It might help you:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SBx4b.png","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<p>I am learning Spring Data JPA. It might help you:\n<a href=\"https://i.stack.imgur.com/SBx4b.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/SBx4b.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":10277734,"reputation":695,"user_id":7584019,"display_name":"Rahul Vala"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1581693772,"creation_date":1578689211,"answer_id":59688797,"question_id":14014086,"body_markdown":"All the answers provide sufficient details to the question. However, let me add something more.\r\n\r\n**Why are we using these Interfaces:**\r\n\r\n - They allow Spring to find your repository interfaces and create proxy objects for them.\r\n - It provides you with methods that allow you to perform some common operations (you can also define your custom method as well). I love this feature because creating a method (and defining query and prepared statements and then execute the query with connection object) to do a simple operation really sucks !\r\n\r\n**Which interface does what:** \r\n\r\n - **CrudRepository**: provides CRUD functions\r\n - **PagingAndSortingRepository**: provides methods to do pagination and sort records\r\n - **JpaRepository**: provides JPA related methods such as flushing the persistence context and delete records in a batch\r\n\r\n**When to use which interface:**\r\n\r\nAccording to http://jtuts.com/2014/08/26/difference-between-crudrepository-and-jparepository-in-spring-data-jpa/\r\n\r\nGenerally the best idea is to use **CrudRepository** or **PagingAndSortingRepository** depending on whether you need sorting and paging or not. \r\n\r\nThe **JpaRepository** should be avoided if possible, because it ties you repositories to the JPA persistence technology, and in most cases you probably wouldn’t even use the extra methods provided by it.","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<p>All the answers provide sufficient details to the question. However, let me add something more.</p>\n\n<p><strong>Why are we using these Interfaces:</strong></p>\n\n<ul>\n<li>They allow Spring to find your repository interfaces and create proxy objects for them.</li>\n<li>It provides you with methods that allow you to perform some common operations (you can also define your custom method as well). I love this feature because creating a method (and defining query and prepared statements and then execute the query with connection object) to do a simple operation really sucks !</li>\n</ul>\n\n<p><strong>Which interface does what:</strong> </p>\n\n<ul>\n<li><strong>CrudRepository</strong>: provides CRUD functions</li>\n<li><strong>PagingAndSortingRepository</strong>: provides methods to do pagination and sort records</li>\n<li><strong>JpaRepository</strong>: provides JPA related methods such as flushing the persistence context and delete records in a batch</li>\n</ul>\n\n<p><strong>When to use which interface:</strong></p>\n\n<p>According to <a href=\"http://jtuts.com/2014/08/26/difference-between-crudrepository-and-jparepository-in-spring-data-jpa/\" rel=\"noreferrer\">http://jtuts.com/2014/08/26/difference-between-crudrepository-and-jparepository-in-spring-data-jpa/</a></p>\n\n<p>Generally the best idea is to use <strong>CrudRepository</strong> or <strong>PagingAndSortingRepository</strong> depending on whether you need sorting and paging or not. </p>\n\n<p>The <strong>JpaRepository</strong> should be avoided if possible, because it ties you repositories to the JPA persistence technology, and in most cases you probably wouldn’t even use the extra methods provided by it.</p>\n"},{"tags":[],"owner":{"account_id":4554063,"reputation":1525,"user_id":8450064,"display_name":"Anil Nivargi"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1594378556,"creation_date":1593050214,"answer_id":62566726,"question_id":14014086,"body_markdown":"Below are the differences between [`CrudRepository`][1] and [`JpaRepository`][2] as:\r\n\r\n# `CrudRepository`\r\n1. `CrudRepository` is a base interface and extends the [`Repository`][3] interface.\r\n2. `CrudRepository` mainly provides CRUD (Create, Read, Update, Delete) operations.\r\n3. Return type of `saveAll()` method is [`Iterable`][4].\r\n4. Use Case - To perform CRUD operations, define repository extending `CrudRepository`.\r\n\r\n# `JpaRepository`\r\n1. `JpaRepository` extends [`PagingAndSortingRepository`][5] that extends `CrudRepository`.\r\n2. `JpaRepository` provides CRUD and pagination operations, along with additional methods like `flush()`, `saveAndFlush()`, and `deleteInBatch()`, etc.\r\n3. Return type of `saveAll()` method is a [`List`][6].\r\n4. Use Case - To perform CRUD as well as batch operations, define repository extends `JpaRepository`.\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html\r\n  [2]: https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\r\n  [3]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/Repository.html\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html\r\n  [5]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html?is-external=true\r\n  [6]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<p>Below are the differences between <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html\" rel=\"noreferrer\"><code>CrudRepository</code></a> and <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\" rel=\"noreferrer\"><code>JpaRepository</code></a> as:</p>\n<h1><code>CrudRepository</code></h1>\n<ol>\n<li><code>CrudRepository</code> is a base interface and extends the <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/Repository.html\" rel=\"noreferrer\"><code>Repository</code></a> interface.</li>\n<li><code>CrudRepository</code> mainly provides CRUD (Create, Read, Update, Delete) operations.</li>\n<li>Return type of <code>saveAll()</code> method is <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Iterable.html\" rel=\"noreferrer\"><code>Iterable</code></a>.</li>\n<li>Use Case - To perform CRUD operations, define repository extending <code>CrudRepository</code>.</li>\n</ol>\n<h1><code>JpaRepository</code></h1>\n<ol>\n<li><code>JpaRepository</code> extends <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html?is-external=true\" rel=\"noreferrer\"><code>PagingAndSortingRepository</code></a> that extends <code>CrudRepository</code>.</li>\n<li><code>JpaRepository</code> provides CRUD and pagination operations, along with additional methods like <code>flush()</code>, <code>saveAndFlush()</code>, and <code>deleteInBatch()</code>, etc.</li>\n<li>Return type of <code>saveAll()</code> method is a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html\" rel=\"noreferrer\"><code>List</code></a>.</li>\n<li>Use Case - To perform CRUD as well as batch operations, define repository extends <code>JpaRepository</code>.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":3,"creation_date":1632813968,"post_id":69357124,"comment_id":122587707,"body_markdown":"`CrudRepository` is not a marker interface. https://www.baeldung.com/java-marker-interfaces#:~:text=A%20marker%20interface%20is%20an,also%20called%20a%20tagging%20interface. Also there are very few (possibly 0) instance of checks for it in the code, so it doesn&#39;t act as one either.","body":"<code>CrudRepository</code> is not a marker interface. <a href=\"https://www.baeldung.com/java-marker-interfaces#:~:text=A%20marker%20interface%20is%20an,also%20called%20a%20tagging%20interface\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>. Also there are very few (possibly 0) instance of checks for it in the code, so it doesn&#39;t act as one either."}],"tags":[],"owner":{"account_id":12858978,"reputation":231,"user_id":9301392,"display_name":"AnushaSP07"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1632812437,"creation_date":1632812437,"answer_id":69357124,"question_id":14014086,"body_markdown":"Crud Repository is the base interface and it acts as a marker interface.\r\n\r\nJPA repository also extends the PagingAndSorting repository. \r\nIt provides all the method for which are useful for implementing pagination. Crud Repository doesn&#39;t provide methods for implementing pagination and sorting\r\n\r\nYou can refer - https://www.tutorialspoint.com/difference-between-crudrepository-and-jparepository-in-java#:~:text=Crud%20Repository%20is%20the%20base,acts%20as%20a%20marker%20interface.&amp;text=JPA%20repository%20also%20extends%20the,for%20implementing%20pagination%20and%20sorting.","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<p>Crud Repository is the base interface and it acts as a marker interface.</p>\n<p>JPA repository also extends the PagingAndSorting repository.\nIt provides all the method for which are useful for implementing pagination. Crud Repository doesn't provide methods for implementing pagination and sorting</p>\n<p>You can refer - <a href=\"https://www.tutorialspoint.com/difference-between-crudrepository-and-jparepository-in-java#:%7E:text=Crud%20Repository%20is%20the%20base,acts%20as%20a%20marker%20interface.&amp;text=JPA%20repository%20also%20extends%20the,for%20implementing%20pagination%20and%20sorting\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/difference-between-crudrepository-and-jparepository-in-java#:~:text=Crud%20Repository%20is%20the%20base,acts%20as%20a%20marker%20interface.&amp;text=JPA%20repository%20also%20extends%20the,for%20implementing%20pagination%20and%20sorting</a>.</p>\n"},{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1669029878,"creation_date":1668988687,"answer_id":74512964,"question_id":14014086,"body_markdown":"Recent update, **`spring-data-jpa 3.x`**\r\n--------------\r\n\r\nAs of **`spring-data-jpa 3.x`** used with **`spring-boot 3.x`** and **`spring-core 6.x`**, \r\n\r\nthe structure and the hierarchy has been modified and seems to be more clear.\r\n\r\n`ListCrudRepository` extends `CrudRepository`\r\n\r\n`ListPagingAndSortingRepository` extends `PagingAndSortingRepository`\r\n\r\n`JpaRepository` extends both `ListCrudRepository`, `ListPagingAndSortingRepository`.\r\n\r\nSo basically the new introduced interfaces of `ListPagingAndSortingRepository`, `ListCrudRepository` now represent the functionalities of the old interfaces but with returned types of **`List&lt;T&gt;`** while the remaining `PagingAndSortingRepository`, `CrudRepository` handle the return types of **`Iterable&lt;T&gt;`**\r\n\r\nIn the new (3.x) version the structure is the following:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn the past (before 3.0) many of the declared methods which returned **`List&lt;T&gt;`** have been directly declared inside the `JpaRepository`, but now with separate interfaces for those methods they have been extracted into `ListPagingAndSortingRepository`, `ListCrudRepository`.\r\n\r\nSo the structure before (3.x) was\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI hope it is clear from the above schemas how the mentioned `JpaRepository` and `CrudRepository` have been modified in `3.x` version.\r\n\r\nIn case you plan to **migrate `spring-data-jpa`** from `2.x` into `3.x` (would be necessary if you migrate from **`spring-boot 2.x`** to **`spring-boot 3.x`**)  as illustrated in the above schemas you should expect to have breaking code in cases where you have used the `PagingAndSortingRepository` in your code, as in the past it was extending from `CrudRepository` and so your custom repository which extended directly the `PagingAndSortingRepository` already had access to the methods of `CrudRepository`. If this is the issue you should fix this by adapting your custom repository to also extend either the `ListCrudRepository` or the `CrudRepository`.\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tHBpM.png\r\n  [2]: https://i.stack.imgur.com/RsaOR.png","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<h2>Recent update, <strong><code>spring-data-jpa 3.x</code></strong></h2>\n<p>As of <strong><code>spring-data-jpa 3.x</code></strong> used with <strong><code>spring-boot 3.x</code></strong> and <strong><code>spring-core 6.x</code></strong>,</p>\n<p>the structure and the hierarchy has been modified and seems to be more clear.</p>\n<p><code>ListCrudRepository</code> extends <code>CrudRepository</code></p>\n<p><code>ListPagingAndSortingRepository</code> extends <code>PagingAndSortingRepository</code></p>\n<p><code>JpaRepository</code> extends both <code>ListCrudRepository</code>, <code>ListPagingAndSortingRepository</code>.</p>\n<p>So basically the new introduced interfaces of <code>ListPagingAndSortingRepository</code>, <code>ListCrudRepository</code> now represent the functionalities of the old interfaces but with returned types of <strong><code>List&lt;T&gt;</code></strong> while the remaining <code>PagingAndSortingRepository</code>, <code>CrudRepository</code> handle the return types of <strong><code>Iterable&lt;T&gt;</code></strong></p>\n<p>In the new (3.x) version the structure is the following:</p>\n<p><a href=\"https://i.stack.imgur.com/tHBpM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/tHBpM.png\" alt=\"enter image description here\" /></a></p>\n<p>In the past (before 3.0) many of the declared methods which returned <strong><code>List&lt;T&gt;</code></strong> have been directly declared inside the <code>JpaRepository</code>, but now with separate interfaces for those methods they have been extracted into <code>ListPagingAndSortingRepository</code>, <code>ListCrudRepository</code>.</p>\n<p>So the structure before (3.x) was</p>\n<p><a href=\"https://i.stack.imgur.com/RsaOR.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/RsaOR.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope it is clear from the above schemas how the mentioned <code>JpaRepository</code> and <code>CrudRepository</code> have been modified in <code>3.x</code> version.</p>\n<p>In case you plan to <strong>migrate <code>spring-data-jpa</code></strong> from <code>2.x</code> into <code>3.x</code> (would be necessary if you migrate from <strong><code>spring-boot 2.x</code></strong> to <strong><code>spring-boot 3.x</code></strong>)  as illustrated in the above schemas you should expect to have breaking code in cases where you have used the <code>PagingAndSortingRepository</code> in your code, as in the past it was extending from <code>CrudRepository</code> and so your custom repository which extended directly the <code>PagingAndSortingRepository</code> already had access to the methods of <code>CrudRepository</code>. If this is the issue you should fix this by adapting your custom repository to also extend either the <code>ListCrudRepository</code> or the <code>CrudRepository</code>.</p>\n"},{"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1682371494,"creation_date":1682371494,"answer_id":76096212,"question_id":14014086,"body_markdown":"&gt; What is the difference between CrudRepository and JpaRepository\r\n&gt; interfaces in Spring Data JPA?\r\n\r\nSpring Data JPA provides both `JpaRepository` and `CrudRepository` interfaces to simplify the creation of repositories for data access in JPA-based applications.\r\n\r\n`CrudRepository` is the base interface for entities with basic CRUD (Create, Read, Update, Delete) operations. `CrudRepository` provides a minimal set of methods like `save()`, `findAll()`, `findById()`, `delete()`, etc., and can be extended by other custom methods. \r\n\r\nIt is the code example:\r\n```\r\npublic interface PersonEntityRepository extends CrudRepository&lt;PersonEntity, Long&gt; {\r\n\r\n}\r\n```\r\n\r\n`JpaRepository` interface extends `CrudRepository` interface.\r\n`JpaRepository` interface provides other additional methods to the basic CRUD operations provided by CrudRepository such as:\r\n - `findAll(Sort sort)` - a method which returns all entities sorted by the given criteria.\r\n - `findAll(Pageable pageable)` - a method which returns a Page of entities according to the given pagination and sorting criteria.\r\n - `flush()`  - a method which flushes all pending changes to the database.\r\n - `saveAndFlush(T entity)` - a method which saves an entity and immediately flushes changes to the database. \r\nIt is the code example:\r\n```\r\npublic interface PersonEntityRepository extends JpaRepository&lt;PersonEntity, Long&gt; {\r\n\r\n    List&lt;TestEntity&gt; findByName(String name);\r\n\r\n    List&lt;Employee&gt; findByAgeGreaterThan(double age);\r\n}\r\n```\r\n&gt; Why would you want to use one over the other?\r\n\r\nChoosing between the two depends on the specific needs of your application. I would recommend to use `CrudRepository` interface for basic CRUD operations, and `JpaRepository` interface for more advanced functionality such as pagination, sorting, and immediate flushing of changes to the database.\r\n\r\n","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<blockquote>\n<p>What is the difference between CrudRepository and JpaRepository\ninterfaces in Spring Data JPA?</p>\n</blockquote>\n<p>Spring Data JPA provides both <code>JpaRepository</code> and <code>CrudRepository</code> interfaces to simplify the creation of repositories for data access in JPA-based applications.</p>\n<p><code>CrudRepository</code> is the base interface for entities with basic CRUD (Create, Read, Update, Delete) operations. <code>CrudRepository</code> provides a minimal set of methods like <code>save()</code>, <code>findAll()</code>, <code>findById()</code>, <code>delete()</code>, etc., and can be extended by other custom methods.</p>\n<p>It is the code example:</p>\n<pre><code>public interface PersonEntityRepository extends CrudRepository&lt;PersonEntity, Long&gt; {\n\n}\n</code></pre>\n<p><code>JpaRepository</code> interface extends <code>CrudRepository</code> interface.\n<code>JpaRepository</code> interface provides other additional methods to the basic CRUD operations provided by CrudRepository such as:</p>\n<ul>\n<li><code>findAll(Sort sort)</code> - a method which returns all entities sorted by the given criteria.</li>\n<li><code>findAll(Pageable pageable)</code> - a method which returns a Page of entities according to the given pagination and sorting criteria.</li>\n<li><code>flush()</code>  - a method which flushes all pending changes to the database.</li>\n<li><code>saveAndFlush(T entity)</code> - a method which saves an entity and immediately flushes changes to the database.\nIt is the code example:</li>\n</ul>\n<pre><code>public interface PersonEntityRepository extends JpaRepository&lt;PersonEntity, Long&gt; {\n\n    List&lt;TestEntity&gt; findByName(String name);\n\n    List&lt;Employee&gt; findByAgeGreaterThan(double age);\n}\n</code></pre>\n<blockquote>\n<p>Why would you want to use one over the other?</p>\n</blockquote>\n<p>Choosing between the two depends on the specific needs of your application. I would recommend to use <code>CrudRepository</code> interface for basic CRUD operations, and <code>JpaRepository</code> interface for more advanced functionality such as pagination, sorting, and immediate flushing of changes to the database.</p>\n"}],"owner":{"account_id":1457710,"reputation":10933,"user_id":1372890,"display_name":"kseeker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":471977,"favorite_count":0,"down_vote_count":2,"up_vote_count":1091,"accepted_answer_id":14025100,"answer_count":9,"score":1089,"last_activity_date":1682371494,"creation_date":1356291312,"question_id":14014086,"body_markdown":"What is the difference between [CrudRepository](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html) and [JpaRepository](https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html) interfaces in [Spring Data JPA](https://spring.io/projects/spring-data-jpa)? \r\n\r\nWhen I see the examples on the web, I see them there used kind of interchangeably.\r\n\r\nWhat is the difference between them?\r\n\r\nWhy would you want to use one over the other?\r\n","title":"What is difference between CrudRepository and JpaRepository interfaces in Spring Data JPA?","body":"<p>What is the difference between <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html\" rel=\"noreferrer\">CrudRepository</a> and <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\" rel=\"noreferrer\">JpaRepository</a> interfaces in <a href=\"https://spring.io/projects/spring-data-jpa\" rel=\"noreferrer\">Spring Data JPA</a>? </p>\n\n<p>When I see the examples on the web, I see them there used kind of interchangeably.</p>\n\n<p>What is the difference between them?</p>\n\n<p>Why would you want to use one over the other?</p>\n"},{"tags":["java","maven","selenium-webdriver","post","network-traffic"],"owner":{"account_id":13660772,"reputation":31,"user_id":21079845,"display_name":"Amir Ali Ansari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682370593,"creation_date":1682370593,"question_id":76096123,"body_markdown":"Actually I am using a web browser where I need to send a form page. And internally a post request is send and generates a response. Is there any way to capture POST response without sending request data in selenium using java? I am using maven project.\r\n\r\nI have tried all the possible that fetched from internet but in vain.","title":"Is there any way to capture the POST response from network traffic using selenium webdriver java?","body":"<p>Actually I am using a web browser where I need to send a form page. And internally a post request is send and generates a response. Is there any way to capture POST response without sending request data in selenium using java? I am using maven project.</p>\n<p>I have tried all the possible that fetched from internet but in vain.</p>\n"},{"tags":["java","sdkman"],"comments":[{"owner":{"account_id":13597048,"reputation":3428,"user_id":9808792,"display_name":"micycle"},"score":1,"creation_date":1637870281,"post_id":55923158,"comment_id":123946794,"body_markdown":"All SDKMAN available Java versions can be viewed here: https://api.sdkman.io/2/candidates/java/linux/versions/list?installed=","body":"All SDKMAN available Java versions can be viewed here: <a href=\"https://api.sdkman.io/2/candidates/java/linux/versions/list?installed=\" rel=\"nofollow noreferrer\">api.sdkman.io/2/candidates/java/linux/versions/list?installe&zwnj;&#8203;d=</a>"}],"answers":[{"comments":[{"owner":{"account_id":4641643,"reputation":754,"user_id":3761308,"accept_rate":75,"display_name":"user3761308"},"score":0,"creation_date":1556636774,"post_id":55923334,"comment_id":98501263,"body_markdown":"Interesting i could install it a month ago if that issue is from 2017","body":"Interesting i could install it a month ago if that issue is from 2017"},{"owner":{"account_id":5592234,"reputation":4576,"user_id":4431053,"display_name":"Mohsen"},"score":3,"creation_date":1556636913,"post_id":55923334,"comment_id":98501352,"body_markdown":"@user3761308 look at the last comment in the issue which is for 5 days ago which said: &quot;Oracle JDK 8 has finally been pulled from SDKMAN due to it&#39;s\nlicensing. Use the OpenJDK instead.&quot;","body":"@user3761308 look at the last comment in the issue which is for 5 days ago which said: &quot;Oracle JDK 8 has finally been pulled from SDKMAN due to it&#39;s licensing. Use the OpenJDK instead.&quot;"},{"owner":{"account_id":115969,"reputation":12296,"user_id":304270,"display_name":"Ewoks"},"score":4,"creation_date":1572955761,"post_id":55923334,"comment_id":103715745,"body_markdown":"SDKMAN v5.7.4+362 doesn&#39;t list OpenJDK Java 8 neither anymore . . :/","body":"SDKMAN v5.7.4+362 doesn&#39;t list OpenJDK Java 8 neither anymore . . :/"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1682369695,"post_id":55923334,"comment_id":134201630,"body_markdown":"Oracle JDK versions are listed now","body":"Oracle JDK versions are listed now"}],"tags":[],"owner":{"account_id":5592234,"reputation":4576,"user_id":4431053,"display_name":"Mohsen"},"comment_count":4,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1556635159,"creation_date":1556635159,"answer_id":55923334,"question_id":55923158,"body_markdown":"It is no longer supported. This is the [github issue][1] for more information.\r\n\r\nAs the writer said:\r\n\r\n&gt; The reason that we&#39;re moving to OpenJDK is that Oracle doesn&#39;t provide\r\n&gt; Docker images that are deemed official to Docker, whereas it appears\r\n&gt; that OpenJDK ones are as shown there. So if we&#39;re going to deploy with\r\n&gt; OpenJDK, then we&#39;d like to match our local dev environment as well.\r\n\r\n\r\n\r\n  [1]: https://github.com/sdkman/sdkman-cli/issues/543","title":"Oracle java not appearing in SDKMAN?","body":"<p>It is no longer supported. This is the <a href=\"https://github.com/sdkman/sdkman-cli/issues/543\" rel=\"noreferrer\">github issue</a> for more information.</p>\n\n<p>As the writer said:</p>\n\n<blockquote>\n  <p>The reason that we're moving to OpenJDK is that Oracle doesn't provide\n  Docker images that are deemed official to Docker, whereas it appears\n  that OpenJDK ones are as shown there. So if we're going to deploy with\n  OpenJDK, then we'd like to match our local dev environment as well.</p>\n</blockquote>\n"}],"owner":{"account_id":4641643,"reputation":754,"user_id":3761308,"accept_rate":75,"display_name":"user3761308"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6621,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":55923334,"answer_count":1,"score":14,"last_activity_date":1682369665,"creation_date":1556634616,"question_id":55923158,"body_markdown":"    s@s:~$ sdk ls java\r\n    ================================================================================\r\n    Available Java Versions\r\n    ================================================================================\r\n     13.ea.18-open       10.0.2-zulu                                            \r\n     12.0.1-sapmchn      10.0.2-open                                            \r\n     12.0.1-zulu         9.0.7-zulu                                             \r\n     12.0.1-open         9.0.4-open                                             \r\n     12.0.1.j9-adpt      8.0.212-zulu                                           \r\n     12.0.1.hs-adpt      8.0.212-amzn                                           \r\n     12.0.1-librca   &gt; * 8.0.212.j9-adpt                                        \r\n     11.0.3-sapmchn      8.0.212.hs-adpt                                        \r\n     11.0.3-zulu         8.0.212-librca                                         \r\n     11.0.3-amzn         8.0.202-zulufx                                         \r\n     11.0.3.j9-adpt      7.0.222-zulu                                           \r\n     11.0.3.hs-adpt      6.0.119-zulu                                           \r\n     11.0.3-librca       1.0.0-rc-16-grl                                        \r\n     11.0.2-open         1.0.0-rc-15-grl                                        \r\n     11.0.2-zulufx       1.0.0-rc-14-grl                                        \r\n\r\nWhy is it missing ORACLE java 8? I need it to test something, and it&#39;s available on my other PC, so I&#39;m wondering what the problem could be.\r\n\r\nUbuntu 19.04. ","title":"Oracle java not appearing in SDKMAN?","body":"<pre><code>s@s:~$ sdk ls java\n================================================================================\nAvailable Java Versions\n================================================================================\n 13.ea.18-open       10.0.2-zulu                                            \n 12.0.1-sapmchn      10.0.2-open                                            \n 12.0.1-zulu         9.0.7-zulu                                             \n 12.0.1-open         9.0.4-open                                             \n 12.0.1.j9-adpt      8.0.212-zulu                                           \n 12.0.1.hs-adpt      8.0.212-amzn                                           \n 12.0.1-librca   &gt; * 8.0.212.j9-adpt                                        \n 11.0.3-sapmchn      8.0.212.hs-adpt                                        \n 11.0.3-zulu         8.0.212-librca                                         \n 11.0.3-amzn         8.0.202-zulufx                                         \n 11.0.3.j9-adpt      7.0.222-zulu                                           \n 11.0.3.hs-adpt      6.0.119-zulu                                           \n 11.0.3-librca       1.0.0-rc-16-grl                                        \n 11.0.2-open         1.0.0-rc-15-grl                                        \n 11.0.2-zulufx       1.0.0-rc-14-grl                                        \n</code></pre>\n\n<p>Why is it missing ORACLE java 8? I need it to test something, and it's available on my other PC, so I'm wondering what the problem could be.</p>\n\n<p>Ubuntu 19.04. </p>\n"},{"tags":["java","maven","maven-surefire-plugin"],"comments":[{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1653681722,"post_id":72409437,"comment_id":127918614,"body_markdown":"From your description, I don&#39;t see any mention of [adding jupiter engine as documented for surefire plugin junit5 support](https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html). Have you added it?","body":"From your description, I don&#39;t see any mention of <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html\" rel=\"nofollow noreferrer\">adding jupiter engine as documented for surefire plugin junit5 support</a>. Have you added it?"},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1653681807,"post_id":72409437,"comment_id":127918635,"body_markdown":"&quot;we are using all the artifacts in junit-bom-5.8.2&quot;. This includes jupiter and the corresponding junit-platform artifacts.","body":"&quot;we are using all the artifacts in junit-bom-5.8.2&quot;. This includes jupiter and the corresponding junit-platform artifacts."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1653681950,"post_id":72409437,"comment_id":127918660,"body_markdown":"so you really use *all of them*? like `junit-platform-jfr` and other exotic ones? how exactly do you use them?","body":"so you really use <i>all of them</i>? like <code>junit-platform-jfr</code> and other exotic ones? how exactly do you use them?"},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1653682032,"post_id":72409437,"comment_id":127918682,"body_markdown":"I literally pasted the entire contents of the &quot;dependencies&quot; block from junit-bom-5.8.2 into the dependencies block of my service.  Just because those artifacts are present doesn&#39;t mean I&#39;m &quot;using them&quot;.  I don&#39;t know what the &quot;Jfr&quot; artifact is for.","body":"I literally pasted the entire contents of the &quot;dependencies&quot; block from junit-bom-5.8.2 into the dependencies block of my service.  Just because those artifacts are present doesn&#39;t mean I&#39;m &quot;using them&quot;.  I don&#39;t know what the &quot;Jfr&quot; artifact is for."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1653682044,"post_id":72409437,"comment_id":127918686,"body_markdown":"Can you please post a full pom and also the things of your parent pom ... furthermore you have to use `junit-jupiter-engine` See also https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html (api is not enough)","body":"Can you please post a full pom and also the things of your parent pom ... furthermore you have to use <code>junit-jupiter-engine</code> See also <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html\" rel=\"nofollow noreferrer\">maven.apache.org/surefire/maven-surefire-plugin/examples/&hellip;</a> (api is not enough)"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1653682067,"post_id":72409437,"comment_id":127918692,"body_markdown":"The JFR dep is not needed....","body":"The JFR dep is not needed...."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1653682105,"post_id":72409437,"comment_id":127918702,"body_markdown":"&quot;Just because those artifacts are present doesn&#39;t mean I&#39;m &quot;using them&quot;.&quot; then please don&#39;t say you use all of them if that&#39;s not what you are doing. There seems to be some confusion what you are exactly using and what not.","body":"&quot;Just because those artifacts are present doesn&#39;t mean I&#39;m &quot;using them&quot;.&quot; then please don&#39;t say you use all of them if that&#39;s not what you are doing. There seems to be some confusion what you are exactly using and what not."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1653682190,"post_id":72409437,"comment_id":127918720,"body_markdown":"Hopefully it is clear now. To ensure I was overriding all the versions specified by Spring, I pasted the entire contents of that bom into my pom.  This is working fine in the service that has both JUnit 4 and JUnit 5 tests.  This service, with only JUnit 5 tests, is the one that is not working.","body":"Hopefully it is clear now. To ensure I was overriding all the versions specified by Spring, I pasted the entire contents of that bom into my pom.  This is working fine in the service that has both JUnit 4 and JUnit 5 tests.  This service, with only JUnit 5 tests, is the one that is not working."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1653682406,"post_id":72409437,"comment_id":127918772,"body_markdown":"Overriding versions of spring boot (I suppose) is much easier via defining the BOM of junit jupiter before the bom file of spring boot (except you are using spring boot as a parent)... If you have JUnit 4 test you have to add the junit-vintage-engine to execute the JUNit 4 tests...","body":"Overriding versions of spring boot (I suppose) is much easier via defining the BOM of junit jupiter before the bom file of spring boot (except you are using spring boot as a parent)... If you have JUnit 4 test you have to add the junit-vintage-engine to execute the JUNit 4 tests..."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":1,"creation_date":1653682443,"post_id":72409437,"comment_id":127918777,"body_markdown":"it&#39;s really not clear until you post your maven configuration - you probably have in some way messed up your pom(s). You&#39;re not supposed to paste bom contents into your own pom dependency section, bom is about dependencyManagement.","body":"it&#39;s really not clear until you post your maven configuration - you probably have in some way messed up your pom(s). You&#39;re not supposed to paste bom contents into your own pom dependency section, bom is about dependencyManagement."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1653682563,"post_id":72409437,"comment_id":127918812,"body_markdown":"Yes, I know that, but simply referring to the junit-bom as an import in my service didn&#39;t work. It still ended up with the older versions.","body":"Yes, I know that, but simply referring to the junit-bom as an import in my service didn&#39;t work. It still ended up with the older versions."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1653682626,"post_id":72409437,"comment_id":127918827,"body_markdown":"Furthermore a remark about your given test because you are using `TestPropertySource`. which usually only makes sense if you have a spring boot test...but here you only use mockito. Can you explain why you are using `MockitoAnnotations.initMocks(this);` in your beforeEach method? If you use the Mockito Extension you don&#39;t need to do this manually...","body":"Furthermore a remark about your given test because you are using <code>TestPropertySource</code>. which usually only makes sense if you have a spring boot test...but here you only use mockito. Can you explain why you are using <code>MockitoAnnotations.initMocks(this);</code> in your beforeEach method? If you use the Mockito Extension you don&#39;t need to do this manually..."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":1,"creation_date":1653682695,"post_id":72409437,"comment_id":127918843,"body_markdown":"I&#39;m aware of that. This was written by someone else. Clearly, how mockito initializes its mocks won&#39;t matter if it never executes the test.","body":"I&#39;m aware of that. This was written by someone else. Clearly, how mockito initializes its mocks won&#39;t matter if it never executes the test."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1653686155,"post_id":72409437,"comment_id":127919705,"body_markdown":"I added some more info about running a JUnit 4 test. I would include the entire pom (with elisions), but it&#39;s 229k, much more than the limit.","body":"I added some more info about running a JUnit 4 test. I would include the entire pom (with elisions), but it&#39;s 229k, much more than the limit."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1653688569,"post_id":72409437,"comment_id":127920228,"body_markdown":"Did you add the junit-vintage-engine to the plugin dependencies of the surefire plugin as described [here](https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html#JUnit4_API_in_test_dependencies)? And according to the rest of the docs on that page it doesn&#39;t look like a good idea to copy literally just all the artifacts of the bom as your dependencies. When overriding the Spring Boot versions doesn&#39;t work the way you tried it first, for me this is a smell if &quot;brute force&quot; brings you one small step further.","body":"Did you add the junit-vintage-engine to the plugin dependencies of the surefire plugin as described <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/junit-platform.html#JUnit4_API_in_test_dependencies\" rel=\"nofollow noreferrer\">here</a>? And according to the rest of the docs on that page it doesn&#39;t look like a good idea to copy literally just all the artifacts of the bom as your dependencies. When overriding the Spring Boot versions doesn&#39;t work the way you tried it first, for me this is a smell if &quot;brute force&quot; brings you one small step further."},{"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"score":0,"creation_date":1653690422,"post_id":72409437,"comment_id":127920539,"body_markdown":"I had forgotten to add the plugin dependency, but adding that made no difference.","body":"I had forgotten to add the plugin dependency, but adding that made no difference."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1653725156,"post_id":72409437,"comment_id":127924694,"body_markdown":"Adding the junit-vintage-engine to the plugin dependenices is not needed. Best would be to make a minimal spring boot setup which contains the same setup and put it on github or alike... it&#39;s easier than dicussing this here...","body":"Adding the junit-vintage-engine to the plugin dependenices is not needed. Best would be to make a minimal spring boot setup which contains the same setup and put it on github or alike... it&#39;s easier than dicussing this here..."}],"answers":[{"tags":[],"owner":{"account_id":20022941,"reputation":70,"user_id":14677456,"display_name":"Lovelin B"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682369659,"creation_date":1682369659,"answer_id":76096033,"question_id":72409437,"body_markdown":"Uou will have to tell Surefire plugin to use the correct test provider, for JUnit 5, it would be surefire-junit-platform\r\n\r\nAdd the following dependency for the Surefire plugin to select JUnit Jupiter.\r\n\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;surefire-junit-platform&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\r\n\r\n\r\nReference:\r\nhttps://maven.apache.org/surefire/maven-failsafe-plugin/examples/providers.html","title":"Why does Surefire not find any tests when upgrading to JUnit 5?","body":"<p>Uou will have to tell Surefire plugin to use the correct test provider, for JUnit 5, it would be surefire-junit-platform</p>\n<p>Add the following dependency for the Surefire plugin to select JUnit Jupiter.</p>\n<pre><code>            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n                    &lt;artifactId&gt;surefire-junit-platform&lt;/artifactId&gt;\n                    &lt;version&gt;3.0.0&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n</code></pre>\n<p>Reference:\n<a href=\"https://maven.apache.org/surefire/maven-failsafe-plugin/examples/providers.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/surefire/maven-failsafe-plugin/examples/providers.html</a></p>\n"}],"owner":{"account_id":6284,"reputation":14589,"user_id":10508,"accept_rate":53,"display_name":"David M. Karr"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":643,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682369659,"creation_date":1653674588,"question_id":72409437,"body_markdown":"There are common reasons why the subject question might be happening, but this is not a typical situation.\r\n\r\nWe had many services with working JUnit4 tests.  We are working on a process of upgrading multiple elements of our platform, including moving from Java 8 to Java 11, and JUnit 4 to mostly JUnit 5.\r\n\r\nI am looking at two services that we&#39;ve worked on converting.  In both cases, we are using all the artifacts in junit-bom-5.8.2, and both with Java 11.  We are also using maven-surefire-plugin v3.0.0-M6.  We need a fix for running test suites that is only available in that version.\r\n\r\nIn one service, we converted many of the tests from JUnit 4 to JUnit 5, but not all of them.  We are managing to get all of these tests to succeed.\r\n\r\nIn another service, all of the tests were converted to JUnit 5.  In that case, an odd thing happens when we run the tests from mvn.  It simply says: \r\n\r\n    Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\r\n\r\nI tried running with &quot;-X&quot;.  That didn&#39;t tell me anything useful.\r\n\r\nWe have a &quot;UnitTestSuite&quot; class that contains all, or at least most, of our unit test classes.  I ran that from the command line.  For every test it tried to execute there, it said:\r\n\r\n    java.lang.Exception: No runnable methods\r\n\t    at org.junit.runners.BlockJUnit4ClassRunner.validateInstanceMethods(BlockJUnit4ClassRunner.java:191)\r\n\r\nThe fact that it thinks this is a JUnit 4 test is obviously a clue, but I don&#39;t know what it means.\r\n\r\nNote that one of the dependencies we are loading is the `junit-vintage-engine`, but we are loading that with the other service with mixed JUnit 4 and JUnit 5 tests.\r\n\r\nIt almost seems as if the service has mixed JUnit 4 and JUnit 5, it chooses the correct runner for each, but if the service ONLY has JUnit 5 tests, it only chooses the JUnit 4 runner.\r\n\r\nWe are loading the vintage engine in our parent pom. I will work on building a version that excludes that, just to see if that&#39;s what&#39;s happening, but that will be a big pain if that&#39;s really what we have to do.\r\n\r\nI went through the steps to ensure that the vintage engine was not provided, but it didn&#39;t change anything.  It&#39;s still failing to find any runnable methods.\r\n\r\nFor instance, here is a somewhat elided excerpt of the first test class that it says it can&#39;t find any runnable methods for:\r\n\r\n    ...\r\n    import org.junit.jupiter.api.Test;\r\n    ...\r\n\t\r\n\t@SuppressWarnings(&quot;deprecation&quot;)\r\n\t@ExtendWith(MockitoExtension.class)\r\n\t@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\r\n\tpublic class ...Test {\r\n\r\n\t\t@InjectMocks\r\n\t\t...\r\n\r\n\t\t@Mock\r\n\t\tprivate ...\r\n\r\n        ...\r\n\r\n\t\t@BeforeEach\r\n\t\tpublic void setUp() throws Exception {\r\n\t\t\tMockitoAnnotations.initMocks(this);\r\n            ...\r\n\t\t}\r\n\r\n\t\t@Test\r\n\t\tpublic void getCrmResponse_success() throws Exception {\r\n\r\nAnd note again, the &quot;no runnable methods&quot; exception occurs in the `BlockJUnit4ClassRunner` class, so it&#39;s confused about what JUnit to use for this.\r\n\r\nI tried adding a dummy JUnit 4 test, and this was the only test it found:\r\n\r\n\t[INFO] --- maven-surefire-plugin:3.0.0-M6:test (default-test) @ PlatformPilotMs ---\r\n\t[INFO] Using auto detected provider org.apache.maven.surefire.junit4.JUnit4Provider\r\n\t[INFO] \r\n\t[INFO] -------------------------------------------------------\r\n\t[INFO]  T E S T S\r\n\t[INFO] -------------------------------------------------------\r\n\t[INFO] Running ...DummyTest\r\n\t[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.102 s - in ...DummyTest\r\n\t[INFO] \r\n\t[INFO] Results:\r\n\t[INFO] \r\n\t[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0\r\n","title":"Why does Surefire not find any tests when upgrading to JUnit 5?","body":"<p>There are common reasons why the subject question might be happening, but this is not a typical situation.</p>\n<p>We had many services with working JUnit4 tests.  We are working on a process of upgrading multiple elements of our platform, including moving from Java 8 to Java 11, and JUnit 4 to mostly JUnit 5.</p>\n<p>I am looking at two services that we've worked on converting.  In both cases, we are using all the artifacts in junit-bom-5.8.2, and both with Java 11.  We are also using maven-surefire-plugin v3.0.0-M6.  We need a fix for running test suites that is only available in that version.</p>\n<p>In one service, we converted many of the tests from JUnit 4 to JUnit 5, but not all of them.  We are managing to get all of these tests to succeed.</p>\n<p>In another service, all of the tests were converted to JUnit 5.  In that case, an odd thing happens when we run the tests from mvn.  It simply says:</p>\n<pre><code>Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\n</code></pre>\n<p>I tried running with &quot;-X&quot;.  That didn't tell me anything useful.</p>\n<p>We have a &quot;UnitTestSuite&quot; class that contains all, or at least most, of our unit test classes.  I ran that from the command line.  For every test it tried to execute there, it said:</p>\n<pre><code>java.lang.Exception: No runnable methods\n    at org.junit.runners.BlockJUnit4ClassRunner.validateInstanceMethods(BlockJUnit4ClassRunner.java:191)\n</code></pre>\n<p>The fact that it thinks this is a JUnit 4 test is obviously a clue, but I don't know what it means.</p>\n<p>Note that one of the dependencies we are loading is the <code>junit-vintage-engine</code>, but we are loading that with the other service with mixed JUnit 4 and JUnit 5 tests.</p>\n<p>It almost seems as if the service has mixed JUnit 4 and JUnit 5, it chooses the correct runner for each, but if the service ONLY has JUnit 5 tests, it only chooses the JUnit 4 runner.</p>\n<p>We are loading the vintage engine in our parent pom. I will work on building a version that excludes that, just to see if that's what's happening, but that will be a big pain if that's really what we have to do.</p>\n<p>I went through the steps to ensure that the vintage engine was not provided, but it didn't change anything.  It's still failing to find any runnable methods.</p>\n<p>For instance, here is a somewhat elided excerpt of the first test class that it says it can't find any runnable methods for:</p>\n<pre><code>...\nimport org.junit.jupiter.api.Test;\n...\n\n@SuppressWarnings(&quot;deprecation&quot;)\n@ExtendWith(MockitoExtension.class)\n@TestPropertySource(locations = &quot;classpath:application-test.properties&quot;)\npublic class ...Test {\n\n    @InjectMocks\n    ...\n\n    @Mock\n    private ...\n\n    ...\n\n    @BeforeEach\n    public void setUp() throws Exception {\n        MockitoAnnotations.initMocks(this);\n        ...\n    }\n\n    @Test\n    public void getCrmResponse_success() throws Exception {\n</code></pre>\n<p>And note again, the &quot;no runnable methods&quot; exception occurs in the <code>BlockJUnit4ClassRunner</code> class, so it's confused about what JUnit to use for this.</p>\n<p>I tried adding a dummy JUnit 4 test, and this was the only test it found:</p>\n<pre><code>[INFO] --- maven-surefire-plugin:3.0.0-M6:test (default-test) @ PlatformPilotMs ---\n[INFO] Using auto detected provider org.apache.maven.surefire.junit4.JUnit4Provider\n[INFO] \n[INFO] -------------------------------------------------------\n[INFO]  T E S T S\n[INFO] -------------------------------------------------------\n[INFO] Running ...DummyTest\n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.102 s - in ...DummyTest\n[INFO] \n[INFO] Results:\n[INFO] \n[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0\n</code></pre>\n"},{"tags":["java","spring-boot","apache-camel","serversocket"],"comments":[{"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"score":0,"creation_date":1676107832,"post_id":75407279,"comment_id":133074201,"body_markdown":"Is `telnet localhost 6666` responding something or not ?","body":"Is <code>telnet localhost 6666</code> responding something or not ?"},{"owner":{"account_id":19449285,"reputation":19,"user_id":14226098,"display_name":"Om Prakash"},"score":0,"creation_date":1676197620,"post_id":75407279,"comment_id":133085672,"body_markdown":"@TacheDeChoco No, In the logs it is showing nothing, and Thanks for responding for the question","body":"@TacheDeChoco No, In the logs it is showing nothing, and Thanks for responding for the question"}],"owner":{"account_id":19449285,"reputation":19,"user_id":14226098,"display_name":"Om Prakash"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682369499,"creation_date":1676006835,"question_id":75407279,"body_markdown":"Basically what I am doing is that I am send data from server Socket (using netty) to activemq and then want to read the data from activemq to server Socket (using netty), from Server Socket to activemq I am successfully able to read the data but when I am trying to read the same data from activemq to Server Socket then my server socket is not able to read the data.\r\n\r\nThese are the following things what I tried and got errors\r\n\r\nIntially I got this error &quot;org.apache.camel.ExchangeTimedOutException: The OUT message was not received within: 20000 millis&quot; , so to resolve this error I have tried two arguments in my activemq is **ExchangePattern.InOnly** and **disableRepltTo=false/true(both)**, Although from this, my exception went off but still my ServerSocket is not able to read the data from activemq to serverSocket \r\n\r\nHere is my code \r\n\r\n```\r\nfrom(&quot;netty:tcp://localhost:6665&quot;)\r\n.log(&quot;log:Sending message from --&gt;${body}&quot;)\r\n.to(&quot;activemq:Test&quot;);\r\n\t\t\r\nfrom(&quot;activemq:Test?exchangePattern=InOnly&quot;)\r\n.log(&quot;log:Sending message from --&gt;${body}&quot;)\r\n.to(&quot;netty:tcp://localhost:6666?textline=true&amp;sync=false&amp;clientMode=true&quot;);\r\n```","title":"How to Receive a data from activemq to Server Socket(using netty) using apache camel","body":"<p>Basically what I am doing is that I am send data from server Socket (using netty) to activemq and then want to read the data from activemq to server Socket (using netty), from Server Socket to activemq I am successfully able to read the data but when I am trying to read the same data from activemq to Server Socket then my server socket is not able to read the data.</p>\n<p>These are the following things what I tried and got errors</p>\n<p>Intially I got this error &quot;org.apache.camel.ExchangeTimedOutException: The OUT message was not received within: 20000 millis&quot; , so to resolve this error I have tried two arguments in my activemq is <strong>ExchangePattern.InOnly</strong> and <strong>disableRepltTo=false/true(both)</strong>, Although from this, my exception went off but still my ServerSocket is not able to read the data from activemq to serverSocket</p>\n<p>Here is my code</p>\n<pre><code>from(&quot;netty:tcp://localhost:6665&quot;)\n.log(&quot;log:Sending message from --&gt;${body}&quot;)\n.to(&quot;activemq:Test&quot;);\n        \nfrom(&quot;activemq:Test?exchangePattern=InOnly&quot;)\n.log(&quot;log:Sending message from --&gt;${body}&quot;)\n.to(&quot;netty:tcp://localhost:6666?textline=true&amp;sync=false&amp;clientMode=true&quot;);\n</code></pre>\n"},{"tags":["java","ssl","ssl-client-authentication"],"answers":[{"tags":[],"owner":{"account_id":11908021,"reputation":61,"user_id":8714063,"display_name":"jcamsler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614350860,"creation_date":1614350860,"answer_id":66387897,"question_id":66371228,"body_markdown":"Add -Djavax.net.debug=all in your java startup command line, you will have more informations.\r\nAfter you could diagnose your issue.\r\nJC\r\n","title":"SSLContext not using certificate from the JVM TrustStore","body":"<p>Add -Djavax.net.debug=all in your java startup command line, you will have more informations.\nAfter you could diagnose your issue.\nJC</p>\n"},{"tags":[],"owner":{"account_id":13327299,"reputation":21,"user_id":9619843,"display_name":"War Machine"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682369440,"creation_date":1676143099,"answer_id":75422733,"question_id":66371228,"body_markdown":"I might be late with a potential answer. But I faced same issue and as per my experience due to some issue while setting up the SSLContext, provided trustStores and keyStores are not picked up in Java 11 specifically for me. So I had to set them up using JVM arguments. But setting trustStore and keyStore is not enough, please set up the passwords too for both of them. This worked for me. Additionally I also set up the TLS protocol to TLSv1.2. I hope this helps.","title":"SSLContext not using certificate from the JVM TrustStore","body":"<p>I might be late with a potential answer. But I faced same issue and as per my experience due to some issue while setting up the SSLContext, provided trustStores and keyStores are not picked up in Java 11 specifically for me. So I had to set them up using JVM arguments. But setting trustStore and keyStore is not enough, please set up the passwords too for both of them. This worked for me. Additionally I also set up the TLS protocol to TLSv1.2. I hope this helps.</p>\n"}],"owner":{"account_id":19719372,"reputation":242,"user_id":14438087,"display_name":"DjangoDev1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":496,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1682369440,"creation_date":1614265829,"question_id":66371228,"body_markdown":"I need to send a request to a server that uses TLS Client Authentication. For that, I created a PKCS12 file with my certificate and private key and set it in the SSLContext as a KeyManager. \r\n\r\n    KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n    keystoreInputStream = new FileInputStream(&quot;C:/Users/PC/Desktop/certprivate.p12&quot;);\r\n    keystore.load(keystoreInputStream, &quot;password&quot;.toCharArray());\r\n    \r\n    KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n    kmf.init(keystore, &quot;password&quot;.toCharArray());\r\n    \r\n    SSLContext sc = SSLContext.getInstance(&quot;TLSv1.3&quot;);\r\n    sc.init(kmf.getKeyManagers(), null, null);\r\n\r\nI also used keytool to add the certificate from the server in the `cacerts` store and while that didn&#39;t work, I used InstallCerts to download I guess all of the intermediary certificates and installed thoses in cacerts. The problem I&#39;m getting now is `400 No required SSL certificate was sent`. \r\n\r\nI&#39;m not sure why this shows up, when from my understanding, if the `TrustManager` is set to null, it will use the default TrustManager which in this case is:\r\n\r\n    String certificatesTrustStorePath = &quot;C:/Program Files/Java/jdk-15.0.2/lib/security/cacerts&quot;;\r\n    System.setProperty(&quot;javax.net.ssl.trustStore&quot;, certificatesTrustStorePath);\r\n    System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;changeit&quot;);\r\n\r\nEDIT: I don&#39;t get why the request is failing as the TLS handshake has been completed. Otherwise I would have gotten some other error/exception.\r\n\r\n","title":"SSLContext not using certificate from the JVM TrustStore","body":"<p>I need to send a request to a server that uses TLS Client Authentication. For that, I created a PKCS12 file with my certificate and private key and set it in the SSLContext as a KeyManager.</p>\n<pre><code>KeyStore keystore = KeyStore.getInstance(KeyStore.getDefaultType());\nkeystoreInputStream = new FileInputStream(&quot;C:/Users/PC/Desktop/certprivate.p12&quot;);\nkeystore.load(keystoreInputStream, &quot;password&quot;.toCharArray());\n\nKeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\nkmf.init(keystore, &quot;password&quot;.toCharArray());\n\nSSLContext sc = SSLContext.getInstance(&quot;TLSv1.3&quot;);\nsc.init(kmf.getKeyManagers(), null, null);\n</code></pre>\n<p>I also used keytool to add the certificate from the server in the <code>cacerts</code> store and while that didn't work, I used InstallCerts to download I guess all of the intermediary certificates and installed thoses in cacerts. The problem I'm getting now is <code>400 No required SSL certificate was sent</code>.</p>\n<p>I'm not sure why this shows up, when from my understanding, if the <code>TrustManager</code> is set to null, it will use the default TrustManager which in this case is:</p>\n<pre><code>String certificatesTrustStorePath = &quot;C:/Program Files/Java/jdk-15.0.2/lib/security/cacerts&quot;;\nSystem.setProperty(&quot;javax.net.ssl.trustStore&quot;, certificatesTrustStorePath);\nSystem.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;changeit&quot;);\n</code></pre>\n<p>EDIT: I don't get why the request is failing as the TLS handshake has been completed. Otherwise I would have gotten some other error/exception.</p>\n"},{"tags":["java","cdi","quarkus","inject"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1677514699,"post_id":75582324,"comment_id":133348351,"body_markdown":"your code requires a `@PostConstruct` to be fully working but @iabughosh solution is better.","body":"your code requires a <code>@PostConstruct</code> to be fully working but @iabughosh solution is better."}],"answers":[{"comments":[{"owner":{"account_id":14122292,"reputation":501,"user_id":10202496,"display_name":"iabughosh"},"score":1,"creation_date":1677522963,"post_id":75582638,"comment_id":133350797,"body_markdown":"By the way @Inject on constructor is optional, you can remove it.","body":"By the way @Inject on constructor is optional, you can remove it."}],"tags":[],"owner":{"account_id":14122292,"reputation":501,"user_id":10202496,"display_name":"iabughosh"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1677512943,"creation_date":1677512943,"answer_id":75582638,"question_id":75582324,"body_markdown":"How about doing it this way:\r\n\r\n    @ApplicationScoped\r\n    public class AppScopeTest {\r\n    \r\n        private final String test;\r\n        \r\n        private TestClass testclass;\r\n    \r\n        @Inject\r\n        public AppScopeTest (@ConfigProperty(name = &quot;my-config-prop&quot;) String test) {\r\n            this.testClass = new TestClass(test);\r\n        }\r\n    }","title":"Java Quarkus how can I pass @ConfigProperty to an constructor?","body":"<p>How about doing it this way:</p>\n<pre><code>@ApplicationScoped\npublic class AppScopeTest {\n\n    private final String test;\n    \n    private TestClass testclass;\n\n    @Inject\n    public AppScopeTest (@ConfigProperty(name = &quot;my-config-prop&quot;) String test) {\n        this.testClass = new TestClass(test);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":26633402,"reputation":47,"user_id":21166611,"display_name":"santi254"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":677,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75582638,"answer_count":1,"score":2,"last_activity_date":1682368940,"creation_date":1677511203,"question_id":75582324,"body_markdown":"I have the following class:\r\n\r\n```java\r\n@ApplicationScoped\r\npublic class AppScopeTest {\r\n\r\n    @ConfigProperty(name = &quot;my-config-prop&quot;)\r\n    String test;\r\n    \r\n    private TestClass testclass;\r\n\r\n    @Inject\r\n    public AppScopeTest () {\r\n        this.testClass= new TestClass (test);\r\n    }\r\n}\r\n```\r\n\r\nI have a few classes that want a new instance of `TestClass` created once that class is created. example is shown above. But if I do it this way the string Test is always null inside the class `TestClass`.\r\n\r\nSo my questions is how can I read a config property create a new instance of `TestClass` that takes that config property as an argument?\r\n\r\nI don&#39;t want this to be a method call because when `AppScopeTest` is created I want an instance of `TestClass`","title":"Java Quarkus how can I pass @ConfigProperty to an constructor?","body":"<p>I have the following class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApplicationScoped\npublic class AppScopeTest {\n\n    @ConfigProperty(name = &quot;my-config-prop&quot;)\n    String test;\n    \n    private TestClass testclass;\n\n    @Inject\n    public AppScopeTest () {\n        this.testClass= new TestClass (test);\n    }\n}\n</code></pre>\n<p>I have a few classes that want a new instance of <code>TestClass</code> created once that class is created. example is shown above. But if I do it this way the string Test is always null inside the class <code>TestClass</code>.</p>\n<p>So my questions is how can I read a config property create a new instance of <code>TestClass</code> that takes that config property as an argument?</p>\n<p>I don't want this to be a method call because when <code>AppScopeTest</code> is created I want an instance of <code>TestClass</code></p>\n"},{"tags":["java","one-simulator","dtn"],"answers":[{"tags":[],"owner":{"account_id":6798622,"reputation":26,"user_id":5232855,"display_name":"Ari Ker&#228;nen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682367368,"creation_date":1682367368,"answer_id":76095769,"question_id":75783309,"body_markdown":"You can &quot;tag&quot; and/or &quot;add content&quot; to messages using the [addProperty][1] method (and read with getProperty). That&#39;s probably the best way forward here.\r\n\r\n\r\n  [1]: https://github.com/akeranen/the-one/blob/master/src/core/Message.java#L284","title":"Delay Tolerant Network(DTN) combining Information Centric Network via ONE simulator","body":"<p>You can &quot;tag&quot; and/or &quot;add content&quot; to messages using the <a href=\"https://github.com/akeranen/the-one/blob/master/src/core/Message.java#L284\" rel=\"nofollow noreferrer\">addProperty</a> method (and read with getProperty). That's probably the best way forward here.</p>\n"}],"owner":{"account_id":28058500,"reputation":11,"user_id":21433120,"display_name":"JustaHuman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1682367368,"creation_date":1679242115,"question_id":75783309,"body_markdown":"How can I use the ONE simulator to implement the combination of the NDN network in a DTN network environment, can I add or extract the &quot;content&quot; of the packet or, at least a tag of a packet? \r\n\r\nI have looked through many papers, but none of them used the ONE simulator for ICDTN simulation.","title":"Delay Tolerant Network(DTN) combining Information Centric Network via ONE simulator","body":"<p>How can I use the ONE simulator to implement the combination of the NDN network in a DTN network environment, can I add or extract the &quot;content&quot; of the packet or, at least a tag of a packet?</p>\n<p>I have looked through many papers, but none of them used the ONE simulator for ICDTN simulation.</p>\n"},{"tags":["java","android","android-package-managers","android-multiple-users","android-work-profile"],"comments":[{"owner":{"account_id":10782038,"reputation":1413,"user_id":7932271,"display_name":"DavidW"},"score":0,"creation_date":1565104835,"post_id":57266451,"comment_id":101243024,"body_markdown":"Can&#39;t you construct your solution using the code/technique in your &quot;Edit 3?&quot;  IIRC, `ServiceManager` isn&#39;t public, but you should be able to call it by reflection, see https://stackoverflow.com/a/53800108/7932271","body":"Can&#39;t you construct your solution using the code/technique in your &quot;Edit 3?&quot;  IIRC, <code>ServiceManager</code> isn&#39;t public, but you should be able to call it by reflection, see <a href=\"https://stackoverflow.com/a/53800108/7932271\">stackoverflow.com/a/53800108/7932271</a>"}],"answers":[{"tags":[],"owner":{"account_id":10026087,"reputation":116,"user_id":7414220,"display_name":"NightDice"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1565097048,"creation_date":1565097048,"answer_id":57376866,"question_id":57266451,"body_markdown":"I found the code for the `ParceledListSlice` [here][1], and the code for the `Parcelable` interface it implements [here][2]. It looks like it uses some form of array internally, so you should be able to iterate over that. I can&#39;t actually say if this will be helpful to you or not, because I&#39;m not all that familiar with these Libraries, but I hope it&#39;s a starting point. Good Luck!\r\n\r\n\r\n  [1]: https://android.googlesource.com/platform/frameworks/base/+/c80f952/core/java/android/content/pm/ParceledListSlice.java\r\n  [2]: https://developer.android.com/reference/android/os/Parcelable","title":"Get list of apps of all users","body":"<p>I found the code for the <code>ParceledListSlice</code> <a href=\"https://android.googlesource.com/platform/frameworks/base/+/c80f952/core/java/android/content/pm/ParceledListSlice.java\" rel=\"nofollow noreferrer\">here</a>, and the code for the <code>Parcelable</code> interface it implements <a href=\"https://developer.android.com/reference/android/os/Parcelable\" rel=\"nofollow noreferrer\">here</a>. It looks like it uses some form of array internally, so you should be able to iterate over that. I can't actually say if this will be helpful to you or not, because I'm not all that familiar with these Libraries, but I hope it's a starting point. Good Luck!</p>\n"},{"comments":[{"owner":{"account_id":3435956,"reputation":14900,"user_id":2879085,"accept_rate":54,"display_name":"Forivin"},"score":0,"creation_date":1565247210,"post_id":57389247,"comment_id":101294373,"body_markdown":"This would just return a list of app names if I understand your code correctly. Would it be possible to get a list of type List&lt;ApplicationInfo&gt; instead with your method?","body":"This would just return a list of app names if I understand your code correctly. Would it be possible to get a list of type List&lt;ApplicationInfo&gt; instead with your method?"}],"tags":[],"owner":{"account_id":11199807,"reputation":242,"user_id":8217279,"display_name":"Anubhav Malik"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1565163508,"creation_date":1565163508,"answer_id":57389247,"question_id":57266451,"body_markdown":"    private static JSONArray getAllAppNames() {\r\n            JSONArray appNameList = new JSONArray();\r\n            List&lt;PackageInfo&gt; packs = GlobalApplication.getContextOfApplication().getPackageManager().getInstalledPackages(0);\r\n            for (int i = 0; i &lt; packs.size(); i++) {\r\n                PackageInfo p = packs.get(i);\r\n                if ((!isSystemPackage(p))) {\r\n                    String appName = p.applicationInfo.loadLabel(GlobalApplication.getContextOfApplication().getPackageManager()).toString();\r\n                    appNameList.put(appName);\r\n                }\r\n            }\r\n            return appNameList;\r\n        }\r\n    \r\n        private static boolean isSystemPackage(PackageInfo pkgInfo) {\r\n            return (pkgInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0;\r\n        }\r\n\r\n\r\nThis should more or less solve your basic problem","title":"Get list of apps of all users","body":"<pre><code>private static JSONArray getAllAppNames() {\n        JSONArray appNameList = new JSONArray();\n        List&lt;PackageInfo&gt; packs = GlobalApplication.getContextOfApplication().getPackageManager().getInstalledPackages(0);\n        for (int i = 0; i &lt; packs.size(); i++) {\n            PackageInfo p = packs.get(i);\n            if ((!isSystemPackage(p))) {\n                String appName = p.applicationInfo.loadLabel(GlobalApplication.getContextOfApplication().getPackageManager()).toString();\n                appNameList.put(appName);\n            }\n        }\n        return appNameList;\n    }\n\n    private static boolean isSystemPackage(PackageInfo pkgInfo) {\n        return (pkgInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0;\n    }\n</code></pre>\n\n<p>This should more or less solve your basic problem</p>\n"},{"comments":[{"owner":{"account_id":3435956,"reputation":14900,"user_id":2879085,"accept_rate":54,"display_name":"Forivin"},"score":0,"creation_date":1565716417,"post_id":57482080,"comment_id":101436267,"body_markdown":"That was what I was originally going for, but there are like 50 properties that need to be mapped correctly. Not to mention that some of them aren&#39;t even in the sysdump output. Not to mention that it would take a VERY long time to run so many shell commands.","body":"That was what I was originally going for, but there are like 50 properties that need to be mapped correctly. Not to mention that some of them aren&#39;t even in the sysdump output. Not to mention that it would take a VERY long time to run so many shell commands."},{"owner":{"account_id":916536,"reputation":1199,"user_id":949224,"display_name":"dr_g"},"score":0,"creation_date":1565775027,"post_id":57482080,"comment_id":101453743,"body_markdown":"Ah yes, execution time can be an issue. Perhaps better to combine as much into a single shell script, for example looping over all user IDs, rather than repeatedly invoking a new su call.","body":"Ah yes, execution time can be an issue. Perhaps better to combine as much into a single shell script, for example looping over all user IDs, rather than repeatedly invoking a new su call."}],"tags":[],"owner":{"account_id":916536,"reputation":1199,"user_id":949224,"display_name":"dr_g"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1565715709,"creation_date":1565714601,"answer_id":57482080,"question_id":57266451,"body_markdown":"You can apply the approach you mentioned in your first EDIT and EDIT2 and use Android&#39;s shell, since you mentioned your device has root permissions. \r\n\r\nBy the way, I&#39;m not familiar with the library from &quot;stericson&quot; you are using, but I agree with leveraging existing libraries to make your life easier; I am using [libsuperuser][1]. Otherwise, you can write code to run shell commands using Process etc. yourself (but there are lots of things to consider with handling error output, closing objects, and so forth).\r\n\r\n    private List&lt;String&gt; listAllInstalledApps(){\r\n        String user = &quot;0&quot;; //can modify to iterate over all users \r\n        if (Shell.SU.available()) {\r\n            //grab user installed package names\r\n            List&lt;String&gt; output =\r\n                Shell.SU.run(&quot;pm list packages --user &quot; + user + &quot; -3&quot;);\r\n            StringBuilder csvBuilder = new StringBuilder();\r\n\r\n            for(String item : output){\r\n                csvBuilder.append(item);\r\n                csvBuilder.append(&quot;, &quot;);\r\n            }\r\n            Log.info(TAG, &quot;Obtained installed apps: &quot; + csvBuilder.toString());\r\n            return output;\r\n        }\r\n        return new ArrayList&lt;&gt;();\r\n    }\r\nOf course, you can use other arguments to pm as necessary such as `-e, -d` see [documentation][2]. \r\n\r\nOnce you extract the package names, get all required info (as is contained in `ApplicationInfo`) using _dumpsys_\r\n\r\n    //package names extracted from List&lt;String&gt; you returned earlier\r\n    for( String name : packageNames ){\r\n        List&lt;String&gt; appInfo =\r\n                Shell.SU.run(&quot;dumpsys package &quot; + name);\r\n        //search appInfo for info you need e.g. grantedPermissions, targetSdk...\r\n    }\r\n\r\nCreate ApplicationInfo objects as required, if you have downstream code that requires this object type specifically\r\n\r\n    ApplicationInfo info = new ApplicationInfo();\r\n    info.uid = uid;\r\n    info.processName = processName;\r\n    info.className = classname;\r\n    info.packageName = packageName;\r\n    info.minSdkVersion = minSdkVersion;\r\n    //etc...\r\n\r\n(fields of the `ApplicationInfo` class are public). This is also true of `PackageInfo` which is an object that contains an `ApplicationInfo` field, plus it contains details of the install time etc. which are also details you can extract from the dumpsys output. So you could create an array of these as you wish and can be populated with your new `ApplicationInfo` objects.\r\n\r\n  [1]: https://github.com/Chainfire/libsuperuser\r\n  [2]: http://adbshell.com/commands/adb-shell-pm-list-packages","title":"Get list of apps of all users","body":"<p>You can apply the approach you mentioned in your first EDIT and EDIT2 and use Android's shell, since you mentioned your device has root permissions. </p>\n\n<p>By the way, I'm not familiar with the library from \"stericson\" you are using, but I agree with leveraging existing libraries to make your life easier; I am using <a href=\"https://github.com/Chainfire/libsuperuser\" rel=\"nofollow noreferrer\">libsuperuser</a>. Otherwise, you can write code to run shell commands using Process etc. yourself (but there are lots of things to consider with handling error output, closing objects, and so forth).</p>\n\n<pre><code>private List&lt;String&gt; listAllInstalledApps(){\n    String user = \"0\"; //can modify to iterate over all users \n    if (Shell.SU.available()) {\n        //grab user installed package names\n        List&lt;String&gt; output =\n            Shell.SU.run(\"pm list packages --user \" + user + \" -3\");\n        StringBuilder csvBuilder = new StringBuilder();\n\n        for(String item : output){\n            csvBuilder.append(item);\n            csvBuilder.append(\", \");\n        }\n        Log.info(TAG, \"Obtained installed apps: \" + csvBuilder.toString());\n        return output;\n    }\n    return new ArrayList&lt;&gt;();\n}\n</code></pre>\n\n<p>Of course, you can use other arguments to pm as necessary such as <code>-e, -d</code> see <a href=\"http://adbshell.com/commands/adb-shell-pm-list-packages\" rel=\"nofollow noreferrer\">documentation</a>. </p>\n\n<p>Once you extract the package names, get all required info (as is contained in <code>ApplicationInfo</code>) using <em>dumpsys</em></p>\n\n<pre><code>//package names extracted from List&lt;String&gt; you returned earlier\nfor( String name : packageNames ){\n    List&lt;String&gt; appInfo =\n            Shell.SU.run(\"dumpsys package \" + name);\n    //search appInfo for info you need e.g. grantedPermissions, targetSdk...\n}\n</code></pre>\n\n<p>Create ApplicationInfo objects as required, if you have downstream code that requires this object type specifically</p>\n\n<pre><code>ApplicationInfo info = new ApplicationInfo();\ninfo.uid = uid;\ninfo.processName = processName;\ninfo.className = classname;\ninfo.packageName = packageName;\ninfo.minSdkVersion = minSdkVersion;\n//etc...\n</code></pre>\n\n<p>(fields of the <code>ApplicationInfo</code> class are public). This is also true of <code>PackageInfo</code> which is an object that contains an <code>ApplicationInfo</code> field, plus it contains details of the install time etc. which are also details you can extract from the dumpsys output. So you could create an array of these as you wish and can be populated with your new <code>ApplicationInfo</code> objects.</p>\n"},{"tags":[],"owner":{"account_id":6732833,"reputation":390,"user_id":7317524,"display_name":"Amirhf"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1565991287,"creation_date":1565991287,"answer_id":57531393,"question_id":57266451,"body_markdown":"Get installed apps list programmatically\r\n\r\nadd code to **activity_main.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/rl&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:padding=&quot;16dp&quot;\r\n        tools:context=&quot;.MainActivity&quot;\r\n        android:background=&quot;#8fa485&quot;&gt;\r\n\r\n        &lt;ListView\r\n            android:id=&quot;@+id/lv&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;/&gt;\r\n\r\n    &lt;/RelativeLayout&gt;\r\n\r\n\r\nand add code to **MainActivity.java**\r\n\r\n      @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            // Get the application context\r\n            mContext = getApplicationContext();\r\n    \r\n            // Get the activity\r\n            mActivity = MainActivity.this;\r\n    \r\n    \r\n            // Get the widgets reference from XML layout\r\n            mRelativeLayout = (RelativeLayout) findViewById(R.id.rl);\r\n            mListView = (ListView) findViewById(R.id.lv);\r\n    \r\n            // Initialize a new Intent which action is main\r\n            Intent intent = new Intent(Intent.ACTION_MAIN,null);\r\n    \r\n            // Set the newly created intent category to launcher\r\n            intent.addCategory(Intent.CATEGORY_LAUNCHER);\r\n    \r\n            // Set the intent flags\r\n            intent.setFlags(\r\n                    Intent.FLAG_ACTIVITY_NEW_TASK|\r\n                            Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED\r\n            );\r\n    \r\n            // Generate a list of ResolveInfo object based on intent filter\r\n            List&lt;ResolveInfo&gt; resolveInfoList = getPackageManager().queryIntentActivities(intent,0);\r\n    \r\n            // Initialize a new ArrayList for holding non system package names\r\n            List&lt;String&gt; packageNames = new ArrayList&lt;&gt;();\r\n    \r\n            // Loop through the ResolveInfo list\r\n            for(ResolveInfo resolveInfo : resolveInfoList){\r\n                // Get the ActivityInfo from current ResolveInfo\r\n                ActivityInfo activityInfo = resolveInfo.activityInfo;\r\n    \r\n                // If this is not a system app package\r\n                if(!isSystemPackage(resolveInfo)){\r\n                    // Add the non system package to the list\r\n                    packageNames.add(activityInfo.applicationInfo.packageName);\r\n                }\r\n            }\r\n    \r\n            // Initialize an ArrayAdapter using non system package names\r\n            ArrayAdapter adapter = new ArrayAdapter&lt;String&gt;(\r\n                    mContext,\r\n                    android.R.layout.simple_list_item_1,\r\n                    packageNames\r\n            );\r\n    \r\n            // DataBind the ListView with adapter\r\n            mListView.setAdapter(adapter);\r\n    \r\n            // Set an item click listener for the ListView widget\r\n            mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n                @Override\r\n                public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\r\n                    // Get the ListView selected item\r\n                    String selectedItem = (String) adapterView.getItemAtPosition(i);\r\n    \r\n                    // Display a Toast notification for clicked item\r\n                    Toast.makeText(mContext,&quot;CLICKED : &quot; + selectedItem,Toast.LENGTH_SHORT).show();\r\n    \r\n                    // Get the intent to launch the specified application\r\n                    Intent intent = getPackageManager().getLaunchIntentForPackage(selectedItem);\r\n                    if(intent != null){\r\n                        startActivity(intent);\r\n                    }else {\r\n                        Toast.makeText(mContext,selectedItem + &quot; Launch Error.&quot;,Toast.LENGTH_SHORT).show();\r\n                    }\r\n                }\r\n            });\r\n    \r\n       }\r\n    \r\n        // Custom method to determine an app is system app\r\n        private boolean isSystemPackage(ResolveInfo resolveInfo){\r\n           return ((resolveInfo.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);\r\n        }\r\n    }\r\n\r\nYou can easily see the icons of the apps installed on your phone with a little effort and adding ImageView.","title":"Get list of apps of all users","body":"<p>Get installed apps list programmatically</p>\n\n<p>add code to <strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:id=\"@+id/rl\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:padding=\"16dp\"\n    tools:context=\".MainActivity\"\n    android:background=\"#8fa485\"&gt;\n\n    &lt;ListView\n        android:id=\"@+id/lv\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"/&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>and add code to <strong>MainActivity.java</strong></p>\n\n<pre><code>  @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        // Get the application context\n        mContext = getApplicationContext();\n\n        // Get the activity\n        mActivity = MainActivity.this;\n\n\n        // Get the widgets reference from XML layout\n        mRelativeLayout = (RelativeLayout) findViewById(R.id.rl);\n        mListView = (ListView) findViewById(R.id.lv);\n\n        // Initialize a new Intent which action is main\n        Intent intent = new Intent(Intent.ACTION_MAIN,null);\n\n        // Set the newly created intent category to launcher\n        intent.addCategory(Intent.CATEGORY_LAUNCHER);\n\n        // Set the intent flags\n        intent.setFlags(\n                Intent.FLAG_ACTIVITY_NEW_TASK|\n                        Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED\n        );\n\n        // Generate a list of ResolveInfo object based on intent filter\n        List&lt;ResolveInfo&gt; resolveInfoList = getPackageManager().queryIntentActivities(intent,0);\n\n        // Initialize a new ArrayList for holding non system package names\n        List&lt;String&gt; packageNames = new ArrayList&lt;&gt;();\n\n        // Loop through the ResolveInfo list\n        for(ResolveInfo resolveInfo : resolveInfoList){\n            // Get the ActivityInfo from current ResolveInfo\n            ActivityInfo activityInfo = resolveInfo.activityInfo;\n\n            // If this is not a system app package\n            if(!isSystemPackage(resolveInfo)){\n                // Add the non system package to the list\n                packageNames.add(activityInfo.applicationInfo.packageName);\n            }\n        }\n\n        // Initialize an ArrayAdapter using non system package names\n        ArrayAdapter adapter = new ArrayAdapter&lt;String&gt;(\n                mContext,\n                android.R.layout.simple_list_item_1,\n                packageNames\n        );\n\n        // DataBind the ListView with adapter\n        mListView.setAdapter(adapter);\n\n        // Set an item click listener for the ListView widget\n        mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, int i, long l) {\n                // Get the ListView selected item\n                String selectedItem = (String) adapterView.getItemAtPosition(i);\n\n                // Display a Toast notification for clicked item\n                Toast.makeText(mContext,\"CLICKED : \" + selectedItem,Toast.LENGTH_SHORT).show();\n\n                // Get the intent to launch the specified application\n                Intent intent = getPackageManager().getLaunchIntentForPackage(selectedItem);\n                if(intent != null){\n                    startActivity(intent);\n                }else {\n                    Toast.makeText(mContext,selectedItem + \" Launch Error.\",Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n\n   }\n\n    // Custom method to determine an app is system app\n    private boolean isSystemPackage(ResolveInfo resolveInfo){\n       return ((resolveInfo.activityInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0);\n    }\n}\n</code></pre>\n\n<p>You can easily see the icons of the apps installed on your phone with a little effort and adding ImageView.</p>\n"},{"tags":[],"owner":{"account_id":149141,"reputation":3052,"user_id":361413,"display_name":"bk138"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682367245,"creation_date":1682367245,"answer_id":76095748,"question_id":57266451,"body_markdown":"If you&#39;re able to access hidden API either because you&#39;re a platform app or are using introspection (with the right permissions!), you can simply use [UserManager.getUsers()](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/os/UserManager.java;l=3924?q=UserManager) and  [PackageManager. getInstalledApplicationsAsUser()](https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/content/pm/PackageManager.java;l=6547?q=PackageManager&amp;ss=android%2Fplatform%2Fsuperproject):\r\n\r\n```\r\nSet&lt;ApplicationInfo&gt; installedApplications = new HashSet&lt;&gt;();\r\nfor (UserInfo user : getSystemService(UserManager.class).getUsers()) {\r\n    installedApplications.addAll(getPackageManager().getInstalledApplicationsAsUser(PackageManager.GET_META_DATA, user.id));\r\n}\r\n```","title":"Get list of apps of all users","body":"<p>If you're able to access hidden API either because you're a platform app or are using introspection (with the right permissions!), you can simply use <a href=\"https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/os/UserManager.java;l=3924?q=UserManager\" rel=\"nofollow noreferrer\">UserManager.getUsers()</a> and  <a href=\"https://cs.android.com/android/platform/superproject/+/master:frameworks/base/core/java/android/content/pm/PackageManager.java;l=6547?q=PackageManager&amp;ss=android%2Fplatform%2Fsuperproject\" rel=\"nofollow noreferrer\">PackageManager. getInstalledApplicationsAsUser()</a>:</p>\n<pre><code>Set&lt;ApplicationInfo&gt; installedApplications = new HashSet&lt;&gt;();\nfor (UserInfo user : getSystemService(UserManager.class).getUsers()) {\n    installedApplications.addAll(getPackageManager().getInstalledApplicationsAsUser(PackageManager.GET_META_DATA, user.id));\n}\n</code></pre>\n"}],"owner":{"account_id":3435956,"reputation":14900,"user_id":2879085,"accept_rate":54,"display_name":"Forivin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3282,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":5,"score":27,"last_activity_date":1682367245,"creation_date":1564471802,"question_id":57266451,"body_markdown":"If I want to retrieve an ApplicationInfo list for all apps of the current user, I can just run:\r\n\r\n    PackageManager pkgmanager = ctx.getPackageManager();\r\n    List&lt;ApplicationInfo&gt; installedApps = pkgmanager.getInstalledApplications(PackageManager.GET_META_DATA);\r\n\r\nBut I am looking for a way to get these lists for every user and not just the current one. The app that I&#39;m working on has root permissions btw!\r\n\r\nFrom what I understand, the user ids can be retrieved like this:\r\n\r\n    List&lt;Integer&gt; userIds = new ArrayList&lt;&gt;();\r\n    PackageManager pkgmanager = ctx.getPackageManager();\r\n    final UserManager um = (UserManager) ctx.getSystemService(Context.USER_SERVICE);\r\n    List&lt;UserHandle&gt; list = um.getUserProfiles();\r\n\r\n    for (UserHandle user : list) {\r\n        Matcher m = p.matcher(user.toString());\r\n        if (m.find()) {\r\n            int id = Integer.parseInt(m.group(1));\r\n                userIds.add(id);\r\n        }\r\n    }\r\n\r\nNow I&#39;m looking for something like this:\r\n\r\n    for (int i=0; i&lt;userIds.size(); i++) {\r\n        Integer userId = userIds.get(i)\r\n        List&lt;ApplicationInfo&gt; installedApps = pkgmanager.getInstalledApplicationsByUserId(userId, PackageManager.GET_META_DATA);\r\n    }\r\n\r\nObviously `getInstalledApplicationsByUserId` doesn&#39;t exist. \r\n\r\nAt first I thought [getPackagesForUid][1] could solve the problem, but as it turns out there is a difference between &quot;users&quot; in the Linux-sense and user profiles. Generally every single Android app runs under it&#39;s own user for isolation-purposes. But it is possible to run two apps under the same user so that they can access each others data easily. `getPackagesForUid` merely returns the names of all apps that run under the given user id, which is usually exactly one. In addition to &quot;users&quot; there are also &quot;User profiles&quot; which is what I was hoping the method was referring to. Maybe I should have also written `userProfileId` instead of `userId` in my code.\r\n\r\n**Edit**:\r\nUsing adb shell, I can retrieve the app IDs like this:\r\n\r\n    # Get user profile IDs\r\n    USER_PROFILE_IDS=&quot;$(pm list users | grep UserInfo | cut -d &#39;{&#39; -f2 | cut -d &#39;:&#39; -f1)&quot;\r\n    \r\n    # Iterate over user profile IDs\r\n    while read -r USER_PROFILE_ID ; do\r\n        # List the packages for each user profile by ID\r\n        PACKAGE_IDS_FOR_THIS_USER=&quot;$(pm list packages --user &quot;$USER_PROFILE_ID&quot; | cut -d &#39;:&#39; -f2)&quot;\r\n        echo &quot;#######################################################################&quot;\r\n        echo &quot;The user with id $USER_PROFILE_ID has the following packages installed:&quot;\r\n        echo &quot;$PACKAGE_IDS_FOR_THIS_USER&quot;\r\n    done &lt;&lt;&lt; &quot;$USER_PROFILE_IDS&quot;\r\n\r\nBut that&#39;s Bash and not Java...\r\n\r\n**Edit2**:\r\nCorrect me if I&#39;m wrong (this is the first time I&#39;ve written code in Java) but it doesn&#39;t appear like there is a Java API to do this. So the only way to do this would by using a shell. So this is what I came up with:\r\n\r\n    import com.stericson.rootshell.RootShell;\r\n    import com.stericson.rootshell.execution.Command;\r\n    import com.stericson.rootshell.execution.Shell;\r\n    import com.stericson.roottools.RootTools;\r\n    ...\r\n    public final class Api {\r\n        ...\r\n        /**\r\n         * @param ctx application context (mandatory)\r\n         * @return a list of user profile ids\r\n         */\r\n        private static List&lt;Integer&gt; getUserIds(Context ctx) {\r\n            List&lt;Integer&gt; userIds = new ArrayList&lt;&gt;();\r\n            PackageManager pkgmanager = ctx.getPackageManager();\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                //this code will be executed on devices running ICS or later\r\n                final UserManager um = (UserManager) ctx.getSystemService(Context.USER_SERVICE);\r\n                List&lt;UserHandle&gt; list = um.getUserProfiles();\r\n        \r\n                for (UserHandle user : list) {\r\n                    Matcher m = p.matcher(user.toString());\r\n                    if (m.find()) {\r\n                        int id = Integer.parseInt(m.group(1));\r\n                        //if (id &gt; 0) {\r\n                            userIds.add(id);\r\n                        //}\r\n                    }\r\n                }\r\n            } else {\r\n                userIds.add(0);\r\n            }\r\n            return userIds;\r\n        }\r\n        \r\n        /**\r\n         * @param ctx application context (mandatory)\r\n         * @return a list of user profile ids\r\n         */\r\n        private static List&lt;String&gt; getPackageIdsByUserProfileId(Integer userId) {\r\n            List&lt;String&gt; packageIds = new ArrayList&lt;&gt;();\r\n            Command command = new Command(0, &quot;pm list packages --user &quot; + userId + &quot; | cut -d &#39;:&#39; -f2 &quot;)\r\n            {\r\n                @Override\r\n                public void commandOutput(int id, String line) { \r\n                    packageIds.add(line);\r\n                    super.commandOutput(id, line);\r\n                }\r\n            };\r\n            Shell shell = RootTools.getShell(true);\r\n            shell.add(command);\r\n        \r\n            while (!command.isFinished()) {\r\n                Thread.sleep(100);\r\n            }\r\n            return packageIds;\r\n        }\r\n    ...\r\n        /**\r\n         * @param ctx application context (mandatory)\r\n         * @return a list of applications\r\n         */\r\n        public static List&lt;PackageInfoData&gt; getApps(Context ctx, GetAppList appList) {\r\n            List&lt;Integer&gt; userIds = getUserIds();\r\n            for (int i=0; i&lt;userIds.size(); i++) {\r\n                Integer userId = userIds.get(i)\r\n                List&lt;String&gt; packageIds = getPackageIdsByUserProfileId(userId)\r\n            }\r\n            ...\r\n        }\r\n    }\r\n    \r\nBut I have no clue if this is even close to something that would actually work.\r\nAnd besides that, I only get the package ids (&quot;com.whatsapp&quot; etc) for each user profile, but I would like to get a list of [ApplicationInfo][2] just like `getInstalledApplications` returns it. I just can&#39;t think of a good way to do this. Maybe it would be possible to load the package manifests and then create ApplicationInfo instances based on them somehow?\r\n\r\n**Edit3**:\r\nI think I found the [source code for the `pm` executable][3].\r\n\r\nOddly I couldn&#39;t find a single mention of the `--user` flag in it.\r\n\r\nThe most relevant parts of the code are:\r\n\r\n    import android.os.ServiceManager;\r\n    ...\r\n    mPm = IPackageManager.Stub.asInterface(ServiceManager.getService(&quot;package&quot;));\r\n    ...\r\n    int getFlags = 0;\r\n    ...\r\n    final List&lt;PackageInfo&gt; packages = getInstalledPackages(mPm, getFlags);\r\n\r\nThe `getInstalledPackages` method simply calls `mPm.getInstalledPackages` then:\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private List&lt;PackageInfo&gt; getInstalledPackages(IPackageManager pm, int flags)\r\n            throws RemoteException {\r\n        final List&lt;PackageInfo&gt; packageInfos = new ArrayList&lt;PackageInfo&gt;();\r\n        PackageInfo lastItem = null;\r\n        ParceledListSlice&lt;PackageInfo&gt; slice;\r\n        do {\r\n            final String lastKey = lastItem != null ? lastItem.packageName : null;\r\n            slice = pm.getInstalledPackages(flags, lastKey);\r\n            lastItem = slice.populateList(packageInfos, PackageInfo.CREATOR);\r\n        } while (!slice.isLastSlice());\r\n        return packageInfos;\r\n    }\r\n\r\nThis leaves me with more questions than I had before. First of all I wonder if I couldn&#39;t just import the `com.android.commands.pm` class. Secondly I wonder how I could tell it to return the packages of a specific user profile or if this even is the right piece of source code in the first place.\r\nAnd finally I wonder if I even need root permissions to use that. After all, the `if (Process.myUid() != ROOT_UID)` checks are only executed for `runRemoveProfile`, `runCreateProfile` and `runListProfiles`.\r\n\r\n**Edit4**:\r\nI was not able to find the source code of the `package` service. I was only able to find this file: `/data/system/packages.xml`. It contains some basic package information on all packages (for all user profiles), but it neither contains the actuall app names, nor does it contain information on which user profiles they belong to.\r\n\r\n**Edit5**: \r\nI think I found the [package service source code][4]. I think this method is the important one: \r\n\r\n    public ParceledListSlice&lt;PackageInfo&gt; getInstalledPackages(int flags, int userId)\r\n\r\nUnfortunately, I just don&#39;t understand the code. To me it looks like the packages are somehow coming from `mSettings.mPackages`. The variable is explained as follows in a code comment:\r\n\r\n&gt; {@link #mPackages} is used to guard all in-memory parsed package\r\n&gt; details and other related state. It is a fine-grained lock that\r\n&gt; should only be held momentarily, as it&#39;s one of the most contended\r\n&gt; locks in the system.\r\n\r\n**Edit6**:\r\nI just found another even more interesting method in that file:\r\n\r\n    public ParceledListSlice&lt;ApplicationInfo&gt; getInstalledApplications(int flags, int userId)\r\n\r\nI don&#39;t know what ParceledListSlice is, but sicne it says `&lt;ApplicationInfo&gt;` I&#39;m assuming that this is really close to my wanted `List&lt;ApplicationInfo&gt;` format. But still, I&#39;m completely clueless how I could access that functionality.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/content/pm/PackageManager.html#getPackagesForUid(int)\r\n  [2]: https://developer.android.com/reference/android/content/pm/ApplicationInfo\r\n  [3]: https://android.googlesource.com/platform/frameworks/base/+/b8678d76c3e09d0d65255f3971b6112a48e19099/cmds/pm/src/com/android/commands/pm/Pm.java\r\n  [4]: https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/pm/PackageManagerService.java","title":"Get list of apps of all users","body":"<p>If I want to retrieve an ApplicationInfo list for all apps of the current user, I can just run:</p>\n\n<pre><code>PackageManager pkgmanager = ctx.getPackageManager();\nList&lt;ApplicationInfo&gt; installedApps = pkgmanager.getInstalledApplications(PackageManager.GET_META_DATA);\n</code></pre>\n\n<p>But I am looking for a way to get these lists for every user and not just the current one. The app that I'm working on has root permissions btw!</p>\n\n<p>From what I understand, the user ids can be retrieved like this:</p>\n\n<pre><code>List&lt;Integer&gt; userIds = new ArrayList&lt;&gt;();\nPackageManager pkgmanager = ctx.getPackageManager();\nfinal UserManager um = (UserManager) ctx.getSystemService(Context.USER_SERVICE);\nList&lt;UserHandle&gt; list = um.getUserProfiles();\n\nfor (UserHandle user : list) {\n    Matcher m = p.matcher(user.toString());\n    if (m.find()) {\n        int id = Integer.parseInt(m.group(1));\n            userIds.add(id);\n    }\n}\n</code></pre>\n\n<p>Now I'm looking for something like this:</p>\n\n<pre><code>for (int i=0; i&lt;userIds.size(); i++) {\n    Integer userId = userIds.get(i)\n    List&lt;ApplicationInfo&gt; installedApps = pkgmanager.getInstalledApplicationsByUserId(userId, PackageManager.GET_META_DATA);\n}\n</code></pre>\n\n<p>Obviously <code>getInstalledApplicationsByUserId</code> doesn't exist. </p>\n\n<p>At first I thought <a href=\"https://developer.android.com/reference/android/content/pm/PackageManager.html#getPackagesForUid(int)\" rel=\"noreferrer\">getPackagesForUid</a> could solve the problem, but as it turns out there is a difference between \"users\" in the Linux-sense and user profiles. Generally every single Android app runs under it's own user for isolation-purposes. But it is possible to run two apps under the same user so that they can access each others data easily. <code>getPackagesForUid</code> merely returns the names of all apps that run under the given user id, which is usually exactly one. In addition to \"users\" there are also \"User profiles\" which is what I was hoping the method was referring to. Maybe I should have also written <code>userProfileId</code> instead of <code>userId</code> in my code.</p>\n\n<p><strong>Edit</strong>:\nUsing adb shell, I can retrieve the app IDs like this:</p>\n\n<pre><code># Get user profile IDs\nUSER_PROFILE_IDS=\"$(pm list users | grep UserInfo | cut -d '{' -f2 | cut -d ':' -f1)\"\n\n# Iterate over user profile IDs\nwhile read -r USER_PROFILE_ID ; do\n    # List the packages for each user profile by ID\n    PACKAGE_IDS_FOR_THIS_USER=\"$(pm list packages --user \"$USER_PROFILE_ID\" | cut -d ':' -f2)\"\n    echo \"#######################################################################\"\n    echo \"The user with id $USER_PROFILE_ID has the following packages installed:\"\n    echo \"$PACKAGE_IDS_FOR_THIS_USER\"\ndone &lt;&lt;&lt; \"$USER_PROFILE_IDS\"\n</code></pre>\n\n<p>But that's Bash and not Java...</p>\n\n<p><strong>Edit2</strong>:\nCorrect me if I'm wrong (this is the first time I've written code in Java) but it doesn't appear like there is a Java API to do this. So the only way to do this would by using a shell. So this is what I came up with:</p>\n\n<pre><code>import com.stericson.rootshell.RootShell;\nimport com.stericson.rootshell.execution.Command;\nimport com.stericson.rootshell.execution.Shell;\nimport com.stericson.roottools.RootTools;\n...\npublic final class Api {\n    ...\n    /**\n     * @param ctx application context (mandatory)\n     * @return a list of user profile ids\n     */\n    private static List&lt;Integer&gt; getUserIds(Context ctx) {\n        List&lt;Integer&gt; userIds = new ArrayList&lt;&gt;();\n        PackageManager pkgmanager = ctx.getPackageManager();\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            //this code will be executed on devices running ICS or later\n            final UserManager um = (UserManager) ctx.getSystemService(Context.USER_SERVICE);\n            List&lt;UserHandle&gt; list = um.getUserProfiles();\n\n            for (UserHandle user : list) {\n                Matcher m = p.matcher(user.toString());\n                if (m.find()) {\n                    int id = Integer.parseInt(m.group(1));\n                    //if (id &gt; 0) {\n                        userIds.add(id);\n                    //}\n                }\n            }\n        } else {\n            userIds.add(0);\n        }\n        return userIds;\n    }\n\n    /**\n     * @param ctx application context (mandatory)\n     * @return a list of user profile ids\n     */\n    private static List&lt;String&gt; getPackageIdsByUserProfileId(Integer userId) {\n        List&lt;String&gt; packageIds = new ArrayList&lt;&gt;();\n        Command command = new Command(0, \"pm list packages --user \" + userId + \" | cut -d ':' -f2 \")\n        {\n            @Override\n            public void commandOutput(int id, String line) { \n                packageIds.add(line);\n                super.commandOutput(id, line);\n            }\n        };\n        Shell shell = RootTools.getShell(true);\n        shell.add(command);\n\n        while (!command.isFinished()) {\n            Thread.sleep(100);\n        }\n        return packageIds;\n    }\n...\n    /**\n     * @param ctx application context (mandatory)\n     * @return a list of applications\n     */\n    public static List&lt;PackageInfoData&gt; getApps(Context ctx, GetAppList appList) {\n        List&lt;Integer&gt; userIds = getUserIds();\n        for (int i=0; i&lt;userIds.size(); i++) {\n            Integer userId = userIds.get(i)\n            List&lt;String&gt; packageIds = getPackageIdsByUserProfileId(userId)\n        }\n        ...\n    }\n}\n</code></pre>\n\n<p>But I have no clue if this is even close to something that would actually work.\nAnd besides that, I only get the package ids (\"com.whatsapp\" etc) for each user profile, but I would like to get a list of <a href=\"https://developer.android.com/reference/android/content/pm/ApplicationInfo\" rel=\"noreferrer\">ApplicationInfo</a> just like <code>getInstalledApplications</code> returns it. I just can't think of a good way to do this. Maybe it would be possible to load the package manifests and then create ApplicationInfo instances based on them somehow?</p>\n\n<p><strong>Edit3</strong>:\nI think I found the <a href=\"https://android.googlesource.com/platform/frameworks/base/+/b8678d76c3e09d0d65255f3971b6112a48e19099/cmds/pm/src/com/android/commands/pm/Pm.java\" rel=\"noreferrer\">source code for the <code>pm</code> executable</a>.</p>\n\n<p>Oddly I couldn't find a single mention of the <code>--user</code> flag in it.</p>\n\n<p>The most relevant parts of the code are:</p>\n\n<pre><code>import android.os.ServiceManager;\n...\nmPm = IPackageManager.Stub.asInterface(ServiceManager.getService(\"package\"));\n...\nint getFlags = 0;\n...\nfinal List&lt;PackageInfo&gt; packages = getInstalledPackages(mPm, getFlags);\n</code></pre>\n\n<p>The <code>getInstalledPackages</code> method simply calls <code>mPm.getInstalledPackages</code> then:</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nprivate List&lt;PackageInfo&gt; getInstalledPackages(IPackageManager pm, int flags)\n        throws RemoteException {\n    final List&lt;PackageInfo&gt; packageInfos = new ArrayList&lt;PackageInfo&gt;();\n    PackageInfo lastItem = null;\n    ParceledListSlice&lt;PackageInfo&gt; slice;\n    do {\n        final String lastKey = lastItem != null ? lastItem.packageName : null;\n        slice = pm.getInstalledPackages(flags, lastKey);\n        lastItem = slice.populateList(packageInfos, PackageInfo.CREATOR);\n    } while (!slice.isLastSlice());\n    return packageInfos;\n}\n</code></pre>\n\n<p>This leaves me with more questions than I had before. First of all I wonder if I couldn't just import the <code>com.android.commands.pm</code> class. Secondly I wonder how I could tell it to return the packages of a specific user profile or if this even is the right piece of source code in the first place.\nAnd finally I wonder if I even need root permissions to use that. After all, the <code>if (Process.myUid() != ROOT_UID)</code> checks are only executed for <code>runRemoveProfile</code>, <code>runCreateProfile</code> and <code>runListProfiles</code>.</p>\n\n<p><strong>Edit4</strong>:\nI was not able to find the source code of the <code>package</code> service. I was only able to find this file: <code>/data/system/packages.xml</code>. It contains some basic package information on all packages (for all user profiles), but it neither contains the actuall app names, nor does it contain information on which user profiles they belong to.</p>\n\n<p><strong>Edit5</strong>: \nI think I found the <a href=\"https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/pm/PackageManagerService.java\" rel=\"noreferrer\">package service source code</a>. I think this method is the important one: </p>\n\n<pre><code>public ParceledListSlice&lt;PackageInfo&gt; getInstalledPackages(int flags, int userId)\n</code></pre>\n\n<p>Unfortunately, I just don't understand the code. To me it looks like the packages are somehow coming from <code>mSettings.mPackages</code>. The variable is explained as follows in a code comment:</p>\n\n<blockquote>\n  <p>{@link #mPackages} is used to guard all in-memory parsed package\n  details and other related state. It is a fine-grained lock that\n  should only be held momentarily, as it's one of the most contended\n  locks in the system.</p>\n</blockquote>\n\n<p><strong>Edit6</strong>:\nI just found another even more interesting method in that file:</p>\n\n<pre><code>public ParceledListSlice&lt;ApplicationInfo&gt; getInstalledApplications(int flags, int userId)\n</code></pre>\n\n<p>I don't know what ParceledListSlice is, but sicne it says <code>&lt;ApplicationInfo&gt;</code> I'm assuming that this is really close to my wanted <code>List&lt;ApplicationInfo&gt;</code> format. But still, I'm completely clueless how I could access that functionality.</p>\n"},{"tags":["java","spring","webclient","mdc"],"answers":[{"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682098775,"creation_date":1682098775,"answer_id":76075553,"question_id":76072770,"body_markdown":"Read and understand this series of 3 blogs:\r\nhttps://spring.io/blog/2023/03/28/context-propagation-with-project-reactor-1-the-basics","title":"How to forward MDC to ReactorClientHttpConnector","body":"<p>Read and understand this series of 3 blogs:\n<a href=\"https://spring.io/blog/2023/03/28/context-propagation-with-project-reactor-1-the-basics\" rel=\"nofollow noreferrer\">https://spring.io/blog/2023/03/28/context-propagation-with-project-reactor-1-the-basics</a></p>\n"}],"owner":{"account_id":11575798,"reputation":31,"user_id":8481139,"display_name":"Данил Ходырев"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":336,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682366838,"creation_date":1682076965,"question_id":76072770,"body_markdown":"\r\nI want log mdc by webclient logger\r\n\r\n\r\n    WebClient webClient = WebClient.builder()\r\n            .clientConnector(new ReactorClientHttpConnector(HttpClient.create()\r\n                    .wiretap(&quot;reactor.netty.http.client.HttpClient&quot;, LogLevel.DEBUG,\r\n                            AdvancedByteBufFormat.TEXTUAL, StandardCharsets.UTF_8)))\r\n    \r\n    MDC.put(&quot;mdctest&quot;, &quot;mdcvalue&quot;);\r\n    \r\n    String response = webClient.get()\r\n            .uri(&quot;http://api.geonames.org/countryCodeJSON?formatted=true&amp;lat=47.03&amp;lng=10.2&amp;username=demo&amp;style=full&quot;)\r\n            .retrieve()\r\n            .bodyToMono(String.class)\r\n            .block();\r\n    logger.info(response);\r\n\r\nHow I can forward MDC to reactor threads?\r\nI tried https://ttddyy.github.io/mdc-with-webclient-in-webmvc/ but it&#39;s not worked, log happen before onNext.","title":"How to forward MDC to ReactorClientHttpConnector","body":"<p>I want log mdc by webclient logger</p>\n<pre><code>WebClient webClient = WebClient.builder()\n        .clientConnector(new ReactorClientHttpConnector(HttpClient.create()\n                .wiretap(&quot;reactor.netty.http.client.HttpClient&quot;, LogLevel.DEBUG,\n                        AdvancedByteBufFormat.TEXTUAL, StandardCharsets.UTF_8)))\n\nMDC.put(&quot;mdctest&quot;, &quot;mdcvalue&quot;);\n\nString response = webClient.get()\n        .uri(&quot;http://api.geonames.org/countryCodeJSON?formatted=true&amp;lat=47.03&amp;lng=10.2&amp;username=demo&amp;style=full&quot;)\n        .retrieve()\n        .bodyToMono(String.class)\n        .block();\nlogger.info(response);\n</code></pre>\n<p>How I can forward MDC to reactor threads?\nI tried <a href=\"https://ttddyy.github.io/mdc-with-webclient-in-webmvc/\" rel=\"nofollow noreferrer\">https://ttddyy.github.io/mdc-with-webclient-in-webmvc/</a> but it's not worked, log happen before onNext.</p>\n"},{"tags":["java","eclipse","intellij-idea"],"answers":[{"comments":[{"owner":{"account_id":29567,"reputation":59708,"user_id":80002,"accept_rate":64,"display_name":"mark"},"score":0,"creation_date":1340630518,"post_id":11189874,"comment_id":14686082,"body_markdown":"It is already enabled. But I see where is the problem - an alternative view for the Collection classes is enabled and my objects are indeed collections. I wish I could enjoy it both ways - if the object is collapsed - toString() is shown, if expanded - the alternative view, which is much better than the default collection view.","body":"It is already enabled. But I see where is the problem - an alternative view for the Collection classes is enabled and my objects are indeed collections. I wish I could enjoy it both ways - if the object is collapsed - toString() is shown, if expanded - the alternative view, which is much better than the default collection view."},{"owner":{"account_id":1389145,"reputation":5809,"user_id":1327384,"accept_rate":45,"display_name":"Mohammed Subhi Sheikh Quroush"},"score":0,"creation_date":1391452562,"post_id":11189874,"comment_id":32518446,"body_markdown":"but you need to click view object tree, and I want just to hover on the variable to see it , is that possible ?","body":"but you need to click view object tree, and I want just to hover on the variable to see it , is that possible ?"},{"owner":{"account_id":274743,"reputation":1993,"user_id":567162,"accept_rate":70,"display_name":"D-Klotz"},"score":2,"creation_date":1402605012,"post_id":11189874,"comment_id":37349229,"body_markdown":"@MohammedSubhiSheikhQuroush did you ever figure out if this is possible? I too am looking for this automatic display, as I am used to what Eclipse does...","body":"@MohammedSubhiSheikhQuroush did you ever figure out if this is possible? I too am looking for this automatic display, as I am used to what Eclipse does..."},{"owner":{"account_id":2470034,"reputation":400,"user_id":2152153,"accept_rate":75,"display_name":"flyingsilverfin"},"score":1,"creation_date":1595344047,"post_id":11189874,"comment_id":111438614,"body_markdown":"I had it enabled, and then at some point just stopped getting the `toString()` outputs! The solution was simply to uncheck &quot;Enable &#39;toString()&#39; object view&quot; -&gt; Apply -&gt; re-enable the same option -&gt; apply and they&#39;re back!","body":"I had it enabled, and then at some point just stopped getting the <code>toString()</code> outputs! The solution was simply to uncheck &quot;Enable &#39;toString()&#39; object view&quot; -&gt; Apply -&gt; re-enable the same option -&gt; apply and they&#39;re back!"},{"owner":{"account_id":2761573,"reputation":195,"user_id":2378369,"display_name":"amisiuryk"},"score":0,"creation_date":1606408293,"post_id":11189874,"comment_id":114960498,"body_markdown":"@flyingsilverfin reenabling is very helpful. I think for me it was caused by EAP idea.","body":"@flyingsilverfin reenabling is very helpful. I think for me it was caused by EAP idea."}],"tags":[],"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"comment_count":5,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1340629248,"creation_date":1340629248,"answer_id":11189874,"question_id":11189708,"body_markdown":"`Settings` | `Debugger` | `Data Views`:\r\n\r\n![Enable toString()][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/0GM5D.png","title":"Is it possible to tell IntelliJ IDEA to automatically invoke toString() on the objects inspected in watches, variables, tool tip windows?","body":"<p><code>Settings</code> | <code>Debugger</code> | <code>Data Views</code>:</p>\n\n<p><img src=\"https://i.stack.imgur.com/0GM5D.png\" alt=\"Enable toString()\"></p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1404597443,"creation_date":1404597443,"answer_id":24590892,"question_id":11189708,"body_markdown":"By default Intellij Idea **does** display the toString() of objects in debug view, unless you explicitly tell it not to in the dialog pointed by CrazyCoder above.  \r\n\r\nThe problem that I have found is that for some crooked reason which only the folks at JetBrains understand, IntelliJ Idea (still as of version 13) will silently ignore the above setting and it will **not** invoke toString() on classes which do not override the toString() method.  Even adding your class in the &#39;For classes from the list:&#39; will not result in invocation of toString() unless your class explicitly overrides it. So, it appears that IntelliJ Idea will never ever invoke the default toString() method of class Object. I suppose it must be allergic to it.","title":"Is it possible to tell IntelliJ IDEA to automatically invoke toString() on the objects inspected in watches, variables, tool tip windows?","body":"<p>By default Intellij Idea <strong>does</strong> display the toString() of objects in debug view, unless you explicitly tell it not to in the dialog pointed by CrazyCoder above.  </p>\n\n<p>The problem that I have found is that for some crooked reason which only the folks at JetBrains understand, IntelliJ Idea (still as of version 13) will silently ignore the above setting and it will <strong>not</strong> invoke toString() on classes which do not override the toString() method.  Even adding your class in the 'For classes from the list:' will not result in invocation of toString() unless your class explicitly overrides it. So, it appears that IntelliJ Idea will never ever invoke the default toString() method of class Object. I suppose it must be allergic to it.</p>\n"},{"tags":[],"owner":{"account_id":4967163,"reputation":611,"user_id":3996058,"display_name":"kva1966"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1409549917,"creation_date":1409549917,"answer_id":25599410,"question_id":11189708,"body_markdown":"Using IDEA 13.1: \r\n\r\nPreferences -&gt; Debugger -&gt; Data Type Renderers \r\n\r\n - +(add) new renderer, give it a name\r\n\r\n - On &#39;When rendering the node&#39; select option &#39;Use following expression&#39;, type in &#39;toString()&#39;. \r\n\r\n\r\nThis seems to give me Eclipse-like behaviour.\r\n\r\nI&#39;d paste a picture... but don&#39;t have enough points. :P\r\n","title":"Is it possible to tell IntelliJ IDEA to automatically invoke toString() on the objects inspected in watches, variables, tool tip windows?","body":"<p>Using IDEA 13.1: </p>\n\n<p>Preferences -> Debugger -> Data Type Renderers </p>\n\n<ul>\n<li><p>+(add) new renderer, give it a name</p></li>\n<li><p>On 'When rendering the node' select option 'Use following expression', type in 'toString()'. </p></li>\n</ul>\n\n<p>This seems to give me Eclipse-like behaviour.</p>\n\n<p>I'd paste a picture... but don't have enough points. :P</p>\n"},{"comments":[{"owner":{"account_id":2515499,"reputation":16966,"user_id":2187042,"accept_rate":53,"display_name":"Richard Tingle"},"score":0,"creation_date":1479902276,"post_id":30108798,"comment_id":68752118,"body_markdown":"Not sure why this was donevoted, was incredibly useful to me; stopped scala nodes (which secretly are collections) displaying in &quot;stupid mode&quot;","body":"Not sure why this was donevoted, was incredibly useful to me; stopped scala nodes (which secretly are collections) displaying in &quot;stupid mode&quot;"}],"tags":[],"owner":{"account_id":2507164,"reputation":97,"user_id":2255110,"display_name":"Yifan Peng"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1431022740,"creation_date":1431022740,"answer_id":30108798,"question_id":11189708,"body_markdown":"Right click the variable in the Debug window, and choose &quot;view text&quot;. It will open a window showing &quot;toString&quot;","title":"Is it possible to tell IntelliJ IDEA to automatically invoke toString() on the objects inspected in watches, variables, tool tip windows?","body":"<p>Right click the variable in the Debug window, and choose \"view text\". It will open a window showing \"toString\"</p>\n"}],"owner":{"account_id":29567,"reputation":59708,"user_id":80002,"accept_rate":64,"display_name":"mark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17138,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":11189874,"answer_count":4,"score":25,"last_activity_date":1682366757,"creation_date":1340628566,"question_id":11189708,"body_markdown":"In Eclipse, when a variable is inspected and Eclipse is able to show its value, it does so by calling toString().\r\n\r\nIntelliJ IDEA does not do it. Can it be told to?\r\n\r\nThanks.","title":"Is it possible to tell IntelliJ IDEA to automatically invoke toString() on the objects inspected in watches, variables, tool tip windows?","body":"<p>In Eclipse, when a variable is inspected and Eclipse is able to show its value, it does so by calling toString().</p>\n\n<p>IntelliJ IDEA does not do it. Can it be told to?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","ubuntu","ant"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1670386139,"post_id":74707329,"comment_id":131862604,"body_markdown":"“Outside of ant I can run echo no problem…” Are you running it as `echo some text` or as `/usr/bin/echo some text`?  The former is almost certainly using the shell’s built-in echo command rather than the /usr/bin/echo executable.","body":"“Outside of ant I can run echo no problem…” Are you running it as <code>echo some text</code> or as <code>&#47;usr&#47;bin&#47;echo some text</code>?  The former is almost certainly using the shell’s built-in echo command rather than the /usr/bin/echo executable."},{"owner":{"account_id":3586956,"reputation":395,"user_id":2993913,"display_name":"cstack"},"score":0,"creation_date":1670431464,"post_id":74707329,"comment_id":131876466,"body_markdown":"I was just using echo as you suspected, but just tested with ```/usr/bin/echo test``` and it worked no problem.","body":"I was just using echo as you suspected, but just tested with <code>&#47;usr&#47;bin&#47;echo test</code> and it worked no problem."}],"answers":[{"tags":[],"owner":{"account_id":3586956,"reputation":395,"user_id":2993913,"display_name":"cstack"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682366596,"creation_date":1682366596,"answer_id":76095676,"question_id":74707329,"body_markdown":"I finally figured it out today. I&#39;m running on a custom jre and had only enabled run permission on the bin directory. There must be something in a different subdirectory that is required, because if I give execute permission on the whole jre it works properly.","title":"Can&#39;t Launch Exec Task from Ant","body":"<p>I finally figured it out today. I'm running on a custom jre and had only enabled run permission on the bin directory. There must be something in a different subdirectory that is required, because if I give execute permission on the whole jre it works properly.</p>\n"}],"owner":{"account_id":3586956,"reputation":395,"user_id":2993913,"display_name":"cstack"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76095676,"answer_count":1,"score":0,"last_activity_date":1682366596,"creation_date":1670350613,"question_id":74707329,"body_markdown":"I am trying to execute a separate function from an ant script and keep getting \r\n```\r\nCaused by: java.io.IOException: error=13, Permission denied\r\n        at java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\r\n        at java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:314)\r\n        at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:244)\r\n        at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1110)\r\n        ... 58 more\r\n```\r\nI eventually want to call Docker but to simplify it I am simply trying to call echo.\r\n\r\nMy exec block looks like this\r\n```\r\n &lt;exec failonerror=&quot;true&quot; vmlauncher=&quot;false&quot; executable=&quot;/usr/bin/echo&quot;&gt;\r\n      &lt;arg value=&quot;testing&quot; /&gt;\r\n  &lt;/exec&gt;\r\n```\r\n\r\n\r\nI have tried with vmlauncher true and false and get variations on the same error.\r\n\r\nOutside of ant I can run echo no problem, but here is what ls -al says about it\r\n```-rwxr-xr-x  1 root root       35120 Feb  7  2022  echo```\r\n\r\nI&#39;m testing this on an Ubuntu WSL 2 container, but have had similar issues on an Amazon Linux image.","title":"Can&#39;t Launch Exec Task from Ant","body":"<p>I am trying to execute a separate function from an ant script and keep getting</p>\n<pre><code>Caused by: java.io.IOException: error=13, Permission denied\n        at java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\n        at java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:314)\n        at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:244)\n        at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1110)\n        ... 58 more\n</code></pre>\n<p>I eventually want to call Docker but to simplify it I am simply trying to call echo.</p>\n<p>My exec block looks like this</p>\n<pre><code> &lt;exec failonerror=&quot;true&quot; vmlauncher=&quot;false&quot; executable=&quot;/usr/bin/echo&quot;&gt;\n      &lt;arg value=&quot;testing&quot; /&gt;\n  &lt;/exec&gt;\n</code></pre>\n<p>I have tried with vmlauncher true and false and get variations on the same error.</p>\n<p>Outside of ant I can run echo no problem, but here is what ls -al says about it\n<code>-rwxr-xr-x  1 root root       35120 Feb  7  2022  echo</code></p>\n<p>I'm testing this on an Ubuntu WSL 2 container, but have had similar issues on an Amazon Linux image.</p>\n"},{"tags":["java","spring-boot","deserialization","get-request"],"comments":[{"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"score":1,"creation_date":1682367266,"post_id":76095675,"comment_id":134201145,"body_markdown":"You should provide the exception from the log of your service: the image, or your &quot;part of it&quot;, is encoded (`\\r\\n`).","body":"You should provide the exception from the log of your service: the image, or your &quot;part of it&quot;, is encoded (<code>\\r\\n</code>)."},{"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"score":2,"creation_date":1682367352,"post_id":76095675,"comment_id":134201159,"body_markdown":"Also, your are hiding the cause but I&#39;d say that jackson is not processing correctly your JSON as `Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;` or expect `GetDatasetModel` to be a `Map`.","body":"Also, your are hiding the cause but I&#39;d say that jackson is not processing correctly your JSON as <code>Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;</code> or expect <code>GetDatasetModel</code> to be a <code>Map</code>."},{"owner":{"account_id":20919730,"reputation":207,"user_id":15368642,"display_name":"ilie alexandru"},"score":0,"creation_date":1682367678,"post_id":76095675,"comment_id":134201242,"body_markdown":"@NoDataFound Hello! Thank you for your comment. Maybe something is encoded, but I did now specified to be encoded.","body":"@NoDataFound Hello! Thank you for your comment. Maybe something is encoded, but I did now specified to be encoded."}],"owner":{"account_id":20919730,"reputation":207,"user_id":15368642,"display_name":"ilie alexandru"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682366579,"creation_date":1682366579,"question_id":76095675,"body_markdown":"I am a noob in Spring Boot and I am trying to make 2 servers to communicate with each other. Each server works individually, but I have a broken communication.\r\n\r\n\r\nFirst Server that gets the user requests and sends the get requests to the Server2:\r\n\r\n    @RestController\r\n    @AllArgsConstructor\r\n    @RequestMapping(path = &quot;/webpage&quot;)\r\n    public class IndexController {\r\n    \r\n        @Autowired\r\n        private CheckService checkService;\r\n    \r\n        @Autowired\r\n        private SearchService searchService;\r\n    \r\n        @Autowired\r\n        private GetDatasetService getDatasetService;\r\n    \r\n        @GetMapping(path = {&quot;check&quot;})\r\n        public String CheckDataset(@RequestParam List&lt;String&gt; checking) {\r\n            return checkService.checkDataset(checking);\r\n        }\r\n    \r\n    \r\n    //    @RequestParam List&lt;String&gt; userinfo\r\n        @GetMapping(path = {&quot;GetDataset&quot;})\r\n        public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; GetDataset(@RequestParam List&lt;String&gt; userinfo) {\r\n    \r\n            return getDatasetService.getDataset(userinfo);\r\n        }\r\n\r\n\r\n\r\n\r\nThis is the &quot;GetDatasetService&quot; that sends the &quot;Get&quot; request, this does not work:\r\n\r\n\r\n    public class GetDatasetService {\r\n    \r\n        @Value(&quot;${first.year.project.url}&quot;)\r\n        private String url;\r\n    \r\n    \r\n        public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; getDataset(List&lt;String&gt; userinfo){\r\n    \r\n            String urlForGetDataset = url + &quot;/api/GetDataset&quot;;\r\n    \r\n            URI uri = UriComponentsBuilder\r\n                    .fromHttpUrl(urlForGetDataset)\r\n                    .queryParam(&quot;userinfo&quot;,userinfo)\r\n                    .build(Collections\r\n                            .emptyMap());\r\n    \r\n            return WebClient.create()\r\n                    .get()\r\n                    .uri(uri)\r\n                    .retrieve()\r\n                    .bodyToMono(GetDatasetModel.class)\r\n                    .block();\r\n    \r\n        }\r\n    }\r\n\r\n\r\nThe &quot;CheckService&quot; works:\r\n\r\n    @Component\r\n    public class CheckService {\r\n    \r\n        @Value(&quot;${first.year.project.url}&quot;)\r\n        private String url;\r\n    \r\n    \r\n        public String checkDataset(List&lt;String&gt; list){\r\n            String urlForrCheck = url + &quot;/api/Check&quot;;\r\n    \r\n            URI uri = UriComponentsBuilder\r\n                    .fromHttpUrl(urlForrCheck)\r\n                    .queryParam(&quot;checking&quot;,list)\r\n                    .build(Collections\r\n                            .emptyMap());\r\n    \r\n    \r\n            String check = WebClient.create()\r\n                    .get()\r\n                    .uri(uri)\r\n                    .retrieve()\r\n                    .bodyToMono(String.class)\r\n                    .block();\r\n    \r\n            return check;\r\n        }\r\n    }\r\n\r\n\r\n\r\nServer2\r\n\r\n\r\nThe &quot;RequestController&quot; class:\r\n\r\n    @AllArgsConstructor\r\n    @RestController\r\n    @RequestMapping(path = {&quot;/api&quot;})\r\n    public class RequestsController {\r\n    \r\n        private final HashMap&lt;String, HashMap&lt;String,String&gt;&gt; DatasetMaps = ProcessingApplication.DatasetMaps;\r\n    \r\n        @GetMapping(path = {&quot;Check&quot;})\r\n        public String Check(@RequestParam List&lt;String&gt; checking){\r\n            GetCheck getCheck = new GetCheck(this.DatasetMaps);\r\n            CheckModel checkModel = new CheckModel();\r\n            checkModel.setList(checking);\r\n            return getCheck.GetCheckDatasetMethod(checkModel.checking);\r\n        }\r\n    \r\n    \r\n        @GetMapping(path = {&quot;GetDataset&quot;})\r\n        public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; GetDataset(@RequestParam List&lt;String&gt; userinfo) throws IOException {\r\n    \r\n            GetDatasetModel getDatasetModel = new GetDatasetModel();\r\n            getDatasetModel.setList(userinfo);\r\n            GetDataset getDataset = new GetDataset();\r\n            return getDataset.GetDatasetMethod(getDatasetModel.userinfo.get(0),getDatasetModel.userinfo.get(1));\r\n        }\r\n\r\n\r\nThe &quot;CheckModel&quot; class:\r\n\r\n    @Getter\r\n    @Setter\r\n    public class CheckModel {\r\n        protected List&lt;String&gt; checking;\r\n        public CheckModel(){}\r\n        public void setList(List&lt;String&gt; list){\r\n            this.checking = list;\r\n        }\r\n    }\r\n\r\nThe &quot;GetDatasetModel&quot; class:\r\n\r\n    @Setter\r\n    @Getter\r\n    public class GetDatasetModel {\r\n        protected List&lt;String&gt; userinfo;\r\n    \r\n        public GetDatasetModel(){}\r\n    \r\n        public void setList(List&lt;String&gt; userinfo){\r\n            this.userinfo=userinfo;\r\n        }\r\n    }\r\n\r\nAs it is presented in the following image the Server2 for the &quot;GetDataset&quot; request is working perfectly.\r\n\r\nIn the request is returning a nested hashmap, the request is working when I use &quot;Postman&quot;.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nWhen I am trying to use the &quot;GetDataset&quot; using the &quot;Server1&quot; is getting an error.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThe error is quite big and I will just put just a part of it, if you need more I will edit the post:\r\n\r\n    org.springframework.core.codec.CodecException: Type definition error: [map type; class com.Portal.Indexes.HTMLModel.GetDatasetModel, [simple type, class java.lang.String] -&gt; [map type; class java.util.HashMap, [simple type, class java.lang.String] -&gt; [collection type; class java.util.List, contains [simple type, class java.lang.String]]]]\\n\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:269)\\n\\tSuppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \\nError has been observed at the following site(s):\\n\\t*__checkpoint ⇢ Body from GET http://127.0.0.1:1200/api/GetDataset?userinfo=Alex&amp;userinfo=check [DefaultClientResponse]\\nOriginal Stack Trace:\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:269)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:209)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.lambda$decodeToMono$2(AbstractJackson2Decoder.java:189)\\n\\t\\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\\n\\t\\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\\n\\t\\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\\n\\t\\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\\n\\t\\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\\n\\t\\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\\n\\t\\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\\n\\t\\tat reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:415)\\n\\t\\tat reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:431)\\n\\t\\tat reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:485)\\n\\t\\tat reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:712)\\n\\t\\tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.\r\n\r\n Do you know what should I do in this situation?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9mEnu.png\r\n  [2]: https://i.stack.imgur.com/4UXQr.png","title":"HashMap as a get request response Spring Boot","body":"<p>I am a noob in Spring Boot and I am trying to make 2 servers to communicate with each other. Each server works individually, but I have a broken communication.</p>\n<p>First Server that gets the user requests and sends the get requests to the Server2:</p>\n<pre><code>@RestController\n@AllArgsConstructor\n@RequestMapping(path = &quot;/webpage&quot;)\npublic class IndexController {\n\n    @Autowired\n    private CheckService checkService;\n\n    @Autowired\n    private SearchService searchService;\n\n    @Autowired\n    private GetDatasetService getDatasetService;\n\n    @GetMapping(path = {&quot;check&quot;})\n    public String CheckDataset(@RequestParam List&lt;String&gt; checking) {\n        return checkService.checkDataset(checking);\n    }\n\n\n//    @RequestParam List&lt;String&gt; userinfo\n    @GetMapping(path = {&quot;GetDataset&quot;})\n    public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; GetDataset(@RequestParam List&lt;String&gt; userinfo) {\n\n        return getDatasetService.getDataset(userinfo);\n    }\n</code></pre>\n<p>This is the &quot;GetDatasetService&quot; that sends the &quot;Get&quot; request, this does not work:</p>\n<pre><code>public class GetDatasetService {\n\n    @Value(&quot;${first.year.project.url}&quot;)\n    private String url;\n\n\n    public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; getDataset(List&lt;String&gt; userinfo){\n\n        String urlForGetDataset = url + &quot;/api/GetDataset&quot;;\n\n        URI uri = UriComponentsBuilder\n                .fromHttpUrl(urlForGetDataset)\n                .queryParam(&quot;userinfo&quot;,userinfo)\n                .build(Collections\n                        .emptyMap());\n\n        return WebClient.create()\n                .get()\n                .uri(uri)\n                .retrieve()\n                .bodyToMono(GetDatasetModel.class)\n                .block();\n\n    }\n}\n</code></pre>\n<p>The &quot;CheckService&quot; works:</p>\n<pre><code>@Component\npublic class CheckService {\n\n    @Value(&quot;${first.year.project.url}&quot;)\n    private String url;\n\n\n    public String checkDataset(List&lt;String&gt; list){\n        String urlForrCheck = url + &quot;/api/Check&quot;;\n\n        URI uri = UriComponentsBuilder\n                .fromHttpUrl(urlForrCheck)\n                .queryParam(&quot;checking&quot;,list)\n                .build(Collections\n                        .emptyMap());\n\n\n        String check = WebClient.create()\n                .get()\n                .uri(uri)\n                .retrieve()\n                .bodyToMono(String.class)\n                .block();\n\n        return check;\n    }\n}\n</code></pre>\n<p>Server2</p>\n<p>The &quot;RequestController&quot; class:</p>\n<pre><code>@AllArgsConstructor\n@RestController\n@RequestMapping(path = {&quot;/api&quot;})\npublic class RequestsController {\n\n    private final HashMap&lt;String, HashMap&lt;String,String&gt;&gt; DatasetMaps = ProcessingApplication.DatasetMaps;\n\n    @GetMapping(path = {&quot;Check&quot;})\n    public String Check(@RequestParam List&lt;String&gt; checking){\n        GetCheck getCheck = new GetCheck(this.DatasetMaps);\n        CheckModel checkModel = new CheckModel();\n        checkModel.setList(checking);\n        return getCheck.GetCheckDatasetMethod(checkModel.checking);\n    }\n\n\n    @GetMapping(path = {&quot;GetDataset&quot;})\n    public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; GetDataset(@RequestParam List&lt;String&gt; userinfo) throws IOException {\n\n        GetDatasetModel getDatasetModel = new GetDatasetModel();\n        getDatasetModel.setList(userinfo);\n        GetDataset getDataset = new GetDataset();\n        return getDataset.GetDatasetMethod(getDatasetModel.userinfo.get(0),getDatasetModel.userinfo.get(1));\n    }\n</code></pre>\n<p>The &quot;CheckModel&quot; class:</p>\n<pre><code>@Getter\n@Setter\npublic class CheckModel {\n    protected List&lt;String&gt; checking;\n    public CheckModel(){}\n    public void setList(List&lt;String&gt; list){\n        this.checking = list;\n    }\n}\n</code></pre>\n<p>The &quot;GetDatasetModel&quot; class:</p>\n<pre><code>@Setter\n@Getter\npublic class GetDatasetModel {\n    protected List&lt;String&gt; userinfo;\n\n    public GetDatasetModel(){}\n\n    public void setList(List&lt;String&gt; userinfo){\n        this.userinfo=userinfo;\n    }\n}\n</code></pre>\n<p>As it is presented in the following image the Server2 for the &quot;GetDataset&quot; request is working perfectly.</p>\n<p>In the request is returning a nested hashmap, the request is working when I use &quot;Postman&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/9mEnu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9mEnu.png\" alt=\"enter image description here\" /></a></p>\n<p>When I am trying to use the &quot;GetDataset&quot; using the &quot;Server1&quot; is getting an error.</p>\n<p><a href=\"https://i.stack.imgur.com/4UXQr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4UXQr.png\" alt=\"enter image description here\" /></a></p>\n<p>The error is quite big and I will just put just a part of it, if you need more I will edit the post:</p>\n<pre><code>org.springframework.core.codec.CodecException: Type definition error: [map type; class com.Portal.Indexes.HTMLModel.GetDatasetModel, [simple type, class java.lang.String] -&gt; [map type; class java.util.HashMap, [simple type, class java.lang.String] -&gt; [collection type; class java.util.List, contains [simple type, class java.lang.String]]]]\\n\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:269)\\n\\tSuppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \\nError has been observed at the following site(s):\\n\\t*__checkpoint ⇢ Body from GET http://127.0.0.1:1200/api/GetDataset?userinfo=Alex&amp;userinfo=check [DefaultClientResponse]\\nOriginal Stack Trace:\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:269)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:209)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.lambda$decodeToMono$2(AbstractJackson2Decoder.java:189)\\n\\t\\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\\n\\t\\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\\n\\t\\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\\n\\t\\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\\n\\t\\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\\n\\t\\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\\n\\t\\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\\n\\t\\tat reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:415)\\n\\t\\tat reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:431)\\n\\t\\tat reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:485)\\n\\t\\tat reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:712)\\n\\t\\tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.\n</code></pre>\n<p>Do you know what should I do in this situation?</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1682364732,"post_id":76093105,"comment_id":134200634,"body_markdown":"I expected you to get a NPE as you failed to inject bean1 to sut. What is sut.bean1 when you execute the test?","body":"I expected you to get a NPE as you failed to inject bean1 to sut. What is sut.bean1 when you execute the test?"}],"answers":[{"tags":[],"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682366058,"creation_date":1682360550,"answer_id":76094963,"question_id":76093105,"body_markdown":"The issue is `lenient()`. Lenient allows the method to be stubbed without verifying an invocation. That&#39;s why `verify()` is not checking anything. As for me, you need to remove `lenient()` and use regular `when()` method:\r\n\r\n            when(bean1.method1(d)).thenReturn(c);\r\n            sut.handle(d);\r\n            verify(bean1, times(1)).method1(d);\r\n\r\nand don&#39;t initialize ClassA. Just remove @beforeEach setUp and write this instead \r\n\r\n    @InjectMocks\r\n    ClassA sut;","title":"How to mock calls inside a method","body":"<p>The issue is <code>lenient()</code>. Lenient allows the method to be stubbed without verifying an invocation. That's why <code>verify()</code> is not checking anything. As for me, you need to remove <code>lenient()</code> and use regular <code>when()</code> method:</p>\n<pre><code>        when(bean1.method1(d)).thenReturn(c);\n        sut.handle(d);\n        verify(bean1, times(1)).method1(d);\n</code></pre>\n<p>and don't initialize ClassA. Just remove @beforeEach setUp and write this instead</p>\n<pre><code>@InjectMocks\nClassA sut;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1682363637,"creation_date":1682363637,"answer_id":76095332,"question_id":76093105,"body_markdown":"&gt; Did I get anything wrong?\r\n\r\nYou mocked out `bean1` in the test but you didn&#39;t set it on the object `sut` - it has it&#39;s own internal `bean1` that is not a mock.\r\n\r\n&gt;  Is there a way I can do this with Mockito?\r\n\r\nYou can pass the mock to the class to ensure it&#39;s the instance on which the method is invoked:\r\n\r\n    public class ClassA{\r\n    \r\n        @Autowired\r\n        Bean1 bean1;\r\n\r\n        // Constructor that explicitly sets the bean - for testing\r\n        public ClassA(Bean1 theBean) {\r\n           this.bean1 = theBean;\r\n        }\r\n    \r\n        public ClassC handle(ClassD d) {\r\n    \r\n            ClassC c = bean1.method1(d);\r\n            return methodA(c);\r\n        }\r\n    }\r\n\r\nThen your test passes the mock:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    ClassATest{\r\n    @Mock \r\n    ClassD d;\r\n    @Mock\r\n    Bean1 bean1;\r\n    \r\n    @Mock\r\n    ClassC c;\r\n    \r\n    @BeforeEach\r\n    public void setUp() throws Exception {\r\n        sut = new ClassA(bean1); // PASS THE MOCK THROUGH\r\n    }\r\n    \r\n    @Test\r\n    handleTest(){\r\n        Mockito.lenient().when(bean1.method1(d)).thenReturn(c);\r\n        sut.handle(d); // NOW WHEN THIS IS CALLED, IT&#39;S USING A MOCK\r\n        Mockito.verify(bean1, times(1)).method1(any());\r\n     }\r\n    }","title":"How to mock calls inside a method","body":"<blockquote>\n<p>Did I get anything wrong?</p>\n</blockquote>\n<p>You mocked out <code>bean1</code> in the test but you didn't set it on the object <code>sut</code> - it has it's own internal <code>bean1</code> that is not a mock.</p>\n<blockquote>\n<p>Is there a way I can do this with Mockito?</p>\n</blockquote>\n<p>You can pass the mock to the class to ensure it's the instance on which the method is invoked:</p>\n<pre><code>public class ClassA{\n\n    @Autowired\n    Bean1 bean1;\n\n    // Constructor that explicitly sets the bean - for testing\n    public ClassA(Bean1 theBean) {\n       this.bean1 = theBean;\n    }\n\n    public ClassC handle(ClassD d) {\n\n        ClassC c = bean1.method1(d);\n        return methodA(c);\n    }\n}\n</code></pre>\n<p>Then your test passes the mock:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nClassATest{\n@Mock \nClassD d;\n@Mock\nBean1 bean1;\n\n@Mock\nClassC c;\n\n@BeforeEach\npublic void setUp() throws Exception {\n    sut = new ClassA(bean1); // PASS THE MOCK THROUGH\n}\n\n@Test\nhandleTest(){\n    Mockito.lenient().when(bean1.method1(d)).thenReturn(c);\n    sut.handle(d); // NOW WHEN THIS IS CALLED, IT'S USING A MOCK\n    Mockito.verify(bean1, times(1)).method1(any());\n }\n}\n</code></pre>\n"}],"owner":{"account_id":2500295,"reputation":1257,"user_id":2175604,"accept_rate":43,"display_name":"techie11"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76095332,"answer_count":2,"score":0,"last_activity_date":1682366433,"creation_date":1682347302,"question_id":76093105,"body_markdown":"I&#39;m new to Mockito. I want to unit test the following code by calling handle() method with a mocked ClassD parameter:\r\n\r\n    public class ClassA{\r\n\r\n        @Autowired\r\n        Bean1 bean1;\r\n\r\n        public ClassC handle(ClassD d) {\r\n\r\n            ClassC c = bean1.method1(d);\r\n            return methodA(c);\r\n        }\r\n    }\r\n\r\nBut I don&#39;t want to actually call into method1(). So I wrote the following testcase:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    ClassATest{\r\n    @Mock \r\n    ClassD d;\r\n    @Mock\r\n    Bean1 bean1;\r\n    \r\n    @Mock\r\n    ClassC c;\r\n    \r\n    @BeforeEach\r\n    public void setUp() throws Exception {\r\n        sut = new ClassA();\r\n    }\r\n    \r\n    @Test\r\n    handleTest(){\r\n        Mockito.lenient().when(bean1.method1(d)).thenReturn(c);\r\n        sut.handle(d);\r\n        Mockito.verify(bean1, times(1)).method1(any());\r\n     }\r\n    }\r\n    \r\nI got error:\r\n\r\n    ClassATest &gt; handleTest() FAILED\r\n        Wanted but not invoked:\r\n        bean1.method1(\r\n            &lt;any&gt;\r\n        );\r\n\r\nDid I get anything wrong? Is there a way I can do this with Mockito?\r\n\r\n","title":"How to mock calls inside a method","body":"<p>I'm new to Mockito. I want to unit test the following code by calling handle() method with a mocked ClassD parameter:</p>\n<pre><code>public class ClassA{\n\n    @Autowired\n    Bean1 bean1;\n\n    public ClassC handle(ClassD d) {\n\n        ClassC c = bean1.method1(d);\n        return methodA(c);\n    }\n}\n</code></pre>\n<p>But I don't want to actually call into method1(). So I wrote the following testcase:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nClassATest{\n@Mock \nClassD d;\n@Mock\nBean1 bean1;\n\n@Mock\nClassC c;\n\n@BeforeEach\npublic void setUp() throws Exception {\n    sut = new ClassA();\n}\n\n@Test\nhandleTest(){\n    Mockito.lenient().when(bean1.method1(d)).thenReturn(c);\n    sut.handle(d);\n    Mockito.verify(bean1, times(1)).method1(any());\n }\n}\n</code></pre>\n<p>I got error:</p>\n<pre><code>ClassATest &gt; handleTest() FAILED\n    Wanted but not invoked:\n    bean1.method1(\n        &lt;any&gt;\n    );\n</code></pre>\n<p>Did I get anything wrong? Is there a way I can do this with Mockito?</p>\n"},{"tags":["java","arraylist","compiler-errors","java-stream","reduce"],"comments":[{"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"score":0,"creation_date":1682362488,"post_id":76095061,"comment_id":134200186,"body_markdown":"Does the error happen at `acc[index].add(cacheElement);`, or elsewhere?","body":"Does the error happen at <code>acc[index].add(cacheElement);</code>, or elsewhere?"},{"owner":{"account_id":13554863,"reputation":7,"user_id":9778676,"display_name":"Casperon"},"score":0,"creation_date":1682364657,"post_id":76095061,"comment_id":134200614,"body_markdown":"@BoppreH Yes, exactly there","body":"@BoppreH Yes, exactly there"},{"owner":{"account_id":13554863,"reputation":7,"user_id":9778676,"display_name":"Casperon"},"score":0,"creation_date":1682408630,"post_id":76095061,"comment_id":134206178,"body_markdown":"A primitive array is this kind of array: int counts[]. A primitive type like int, double, etc.","body":"A primitive array is this kind of array: int counts[]. A primitive type like int, double, etc."}],"answers":[{"comments":[{"owner":{"account_id":13554863,"reputation":7,"user_id":9778676,"display_name":"Casperon"},"score":0,"creation_date":1682408523,"post_id":76095637,"comment_id":134206159,"body_markdown":"Thanks! I don&#39;t understand why T is not an array of ArrayLists.","body":"Thanks! I don&#39;t understand why T is not an array of ArrayLists."},{"owner":{"account_id":6440378,"reputation":184,"user_id":4990575,"display_name":"Kurojin"},"score":0,"creation_date":1682412852,"post_id":76095637,"comment_id":134207164,"body_markdown":"it is just how reduce works :) it reduces your stream of T to a single T element, I have the feeling your use case requires a stream.collect rather than a stream.reduce, a stream.collect will give you back a collection of T, in this case an array of ArrayLists.","body":"it is just how reduce works :) it reduces your stream of T to a single T element, I have the feeling your use case requires a stream.collect rather than a stream.reduce, a stream.collect will give you back a collection of T, in this case an array of ArrayLists."}],"tags":[],"owner":{"account_id":6440378,"reputation":184,"user_id":4990575,"display_name":"Kurojin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682366289,"creation_date":1682366289,"answer_id":76095637,"question_id":76095061,"body_markdown":"The reduce method signature you are using here is the following : \r\n\r\n    public abstract T reduce( T identity, BinaryOperator&lt;T&gt; accumulator )\r\n\r\nT is the Type your are streaming on, in this case ArraysList as I believe cache is an array of ArrayLists. \r\n\r\nSo it is normal that in the lambda statement defining your BinaryOperator&lt;T&gt; : (acc, cacheChainingList)-&gt;{...}, \r\n\r\nacc would be of type T, which is ArrayList","title":"Why my java compiler think the initialized array is an ArrayList?","body":"<p>The reduce method signature you are using here is the following :</p>\n<pre><code>public abstract T reduce( T identity, BinaryOperator&lt;T&gt; accumulator )\n</code></pre>\n<p>T is the Type your are streaming on, in this case ArraysList as I believe cache is an array of ArrayLists.</p>\n<p>So it is normal that in the lambda statement defining your BinaryOperator : (acc, cacheChainingList)-&gt;{...},</p>\n<p>acc would be of type T, which is ArrayList</p>\n"}],"owner":{"account_id":13554863,"reputation":7,"user_id":9778676,"display_name":"Casperon"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682366289,"creation_date":1682361439,"question_id":76095061,"body_markdown":"I&#39;m using stream reduce in Java and I wrote this code:\r\n\r\n```\r\n ArrayList&lt;CacheElement&gt;[] initialArrayList = initArrayWithArrayList(newCacheCapacity);\r\n        Arrays.stream(cache).reduce(initialArrayList, (acc, cacheChainingList) -&gt; {\r\n            cacheChainingList.forEach(cacheElement -&gt; {\r\n                int index = calcIndexByKey(cacheElement.getKey(), newCacheCapacity);\r\n                acc[index].add(cacheElement);\r\n            });\r\n            return acc; // return the updated accumulator\r\n        });\r\n```\r\nMy compiler is referring my accumulator (acc)  as an **Arraylist** type rather than a **primitive array**. I expect it to recognize acc as ArrayList&lt;CacheElement&gt;[] type.\r\nPlease help me figure it out :)\r\n\r\nI tried to access acc as an array but got a compilation error:\r\n&gt; Array type expected; found: &#39;java.util.ArrayList&lt;org.example.myCacheService.cache.CacheRepository.CacheElement&gt;&#39;","title":"Why my java compiler think the initialized array is an ArrayList?","body":"<p>I'm using stream reduce in Java and I wrote this code:</p>\n<pre><code> ArrayList&lt;CacheElement&gt;[] initialArrayList = initArrayWithArrayList(newCacheCapacity);\n        Arrays.stream(cache).reduce(initialArrayList, (acc, cacheChainingList) -&gt; {\n            cacheChainingList.forEach(cacheElement -&gt; {\n                int index = calcIndexByKey(cacheElement.getKey(), newCacheCapacity);\n                acc[index].add(cacheElement);\n            });\n            return acc; // return the updated accumulator\n        });\n</code></pre>\n<p>My compiler is referring my accumulator (acc)  as an <strong>Arraylist</strong> type rather than a <strong>primitive array</strong>. I expect it to recognize acc as ArrayList[] type.\nPlease help me figure it out :)</p>\n<p>I tried to access acc as an array but got a compilation error:</p>\n<blockquote>\n<p>Array type expected; found: 'java.util.ArrayList&lt;org.example.myCacheService.cache.CacheRepository.CacheElement&gt;'</p>\n</blockquote>\n"},{"tags":["java","google-bigquery"],"answers":[{"tags":[],"owner":{"account_id":13185554,"reputation":534,"user_id":12022900,"display_name":"Joevanie"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682365836,"creation_date":1682365836,"answer_id":76095584,"question_id":76035559,"body_markdown":"You can work on this code snippet to delete records from BigQuery using Java client API:\r\n\r\n    import com.google.cloud.bigquery.BigQuery;\r\n    import com.google.cloud.bigquery.BigQueryOptions;\r\n    import com.google.cloud.bigquery.QueryJobConfiguration;\r\n    import com.google.cloud.bigquery.TableId;\r\n    \r\n    public class DeleteRecords {\r\n      public static void main(String[] args) throws InterruptedException {\r\n        // TODO(developer): Replace these variables before running the sample.\r\n        String projectId = &quot;your-project-id&quot;;\r\n        String datasetName = &quot;my_dataset&quot;;\r\n        String tableName = &quot;my_table&quot;;\r\n        String filterCondition = &quot;somecondition&quot;;\r\n    \r\n        BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\r\n        QueryJobConfiguration queryConfig =\r\n            QueryJobConfiguration.newBuilder(\r\n                    String.format(\r\n                        &quot;DELETE FROM `%s.%s.%s` WHERE %s&quot;,\r\n                        projectId, datasetName, tableName, filterCondition))\r\n                .build();\r\n    \r\n        bigquery.query(queryConfig);\r\n      }\r\n    }\r\n\r\nFor documentation on Big Query and Java, you may refer [here][1].\r\n\r\n\r\n  [1]: https://developers.google.com/resources/api-libraries/documentation/bigquery/v2/java/latest/com/google/api/services/bigquery/Bigquery.Tables.Delete.html?ssp=1&amp;darkschemeovr=1&amp;setlang=en-PH&amp;safesearch=moderate","title":"bigquery java client delete statements, sql queries","body":"<p>You can work on this code snippet to delete records from BigQuery using Java client API:</p>\n<pre><code>import com.google.cloud.bigquery.BigQuery;\nimport com.google.cloud.bigquery.BigQueryOptions;\nimport com.google.cloud.bigquery.QueryJobConfiguration;\nimport com.google.cloud.bigquery.TableId;\n\npublic class DeleteRecords {\n  public static void main(String[] args) throws InterruptedException {\n    // TODO(developer): Replace these variables before running the sample.\n    String projectId = &quot;your-project-id&quot;;\n    String datasetName = &quot;my_dataset&quot;;\n    String tableName = &quot;my_table&quot;;\n    String filterCondition = &quot;somecondition&quot;;\n\n    BigQuery bigquery = BigQueryOptions.getDefaultInstance().getService();\n    QueryJobConfiguration queryConfig =\n        QueryJobConfiguration.newBuilder(\n                String.format(\n                    &quot;DELETE FROM `%s.%s.%s` WHERE %s&quot;,\n                    projectId, datasetName, tableName, filterCondition))\n            .build();\n\n    bigquery.query(queryConfig);\n  }\n}\n</code></pre>\n<p>For documentation on Big Query and Java, you may refer <a href=\"https://developers.google.com/resources/api-libraries/documentation/bigquery/v2/java/latest/com/google/api/services/bigquery/Bigquery.Tables.Delete.html?ssp=1&amp;darkschemeovr=1&amp;setlang=en-PH&amp;safesearch=moderate\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":1691604,"reputation":656,"user_id":1553828,"accept_rate":64,"display_name":"cjava"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682365836,"creation_date":1681737189,"question_id":76035559,"body_markdown":"I am using java client for bigquery. I am trying to delete few records from a table. I haven&#39;t come across any straightforward API to achieve the same. Insert/InserAll, deleting complete dataset API I am aware of. \r\n\r\nBasically, how do we delete records from bigquery using java client API. Also, if someone can point to a better docs of Java client, it will be life saver. \r\n\r\nhow to execute this statement\r\n\r\n    delete from dataset.tablename where somecondtion;","title":"bigquery java client delete statements, sql queries","body":"<p>I am using java client for bigquery. I am trying to delete few records from a table. I haven't come across any straightforward API to achieve the same. Insert/InserAll, deleting complete dataset API I am aware of.</p>\n<p>Basically, how do we delete records from bigquery using java client API. Also, if someone can point to a better docs of Java client, it will be life saver.</p>\n<p>how to execute this statement</p>\n<pre><code>delete from dataset.tablename where somecondtion;\n</code></pre>\n"},{"tags":["java","awt","overlay","vlcj"],"comments":[{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1682332709,"post_id":76090926,"comment_id":134193047,"body_markdown":"[mcve] please ..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please .."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682332789,"post_id":76090926,"comment_id":134193060,"body_markdown":"I don&#39;t know this API, so can&#39;t comment closely. What I will say is that the `Thread` you create will be independent of the gui so if it&#39;s meant to synchronize with it, you might have a problem. Looks like you&#39;re using some sort of timer, which probably ought to be a Swing `Timer` if it&#39;s gui-oriented. Closer inspection reveals you&#39;re needing an embedded VLC. You should probably be using a `JPanel`, not `Window`. What&#39;s the timing about? More broadly, what&#39;s your [goal](http://technojeeves.com/joomla/index.php/free/117-smart-questions)?","body":"I don&#39;t know this API, so can&#39;t comment closely. What I will say is that the <code>Thread</code> you create will be independent of the gui so if it&#39;s meant to synchronize with it, you might have a problem. Looks like you&#39;re using some sort of timer, which probably ought to be a Swing <code>Timer</code> if it&#39;s gui-oriented. Closer inspection reveals you&#39;re needing an embedded VLC. You should probably be using a <code>JPanel</code>, not <code>Window</code>. What&#39;s the timing about? More broadly, what&#39;s your <a href=\"http://technojeeves.com/joomla/index.php/free/117-smart-questions\" rel=\"nofollow noreferrer\">goal</a>?"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682333852,"post_id":76090926,"comment_id":134193268,"body_markdown":"Why are you using java.awt , javax.swing is the standard step up now. Two points, call repaint after changing the setting text, also on the main window, on initialisation, call setIgnoreRepaint(false) , java.awt level is very difficult to kick along with repaint!","body":"Why are you using java.awt , javax.swing is the standard step up now. Two points, call repaint after changing the setting text, also on the main window, on initialisation, call setIgnoreRepaint(false) , java.awt level is very difficult to kick along with repaint!"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682337038,"post_id":76090926,"comment_id":134194016,"body_markdown":"I originally tried using a Swing Timer but kept running into an issue...say you press the up arrow to increase volume by 1, wait 2 seconds and then press it again. Now what I want is to have the overlay stay on the screen for 3 seconds after the second up arrow. But with Swing Timer, I would then have 2 Timers, one ending in 1 second and the other ending in 3 seconds and when the first Timer ends, it gets rid of the overlay display even thou the second Timer still has 2 more seconds on its Timer.","body":"I originally tried using a Swing Timer but kept running into an issue...say you press the up arrow to increase volume by 1, wait 2 seconds and then press it again. Now what I want is to have the overlay stay on the screen for 3 seconds after the second up arrow. But with Swing Timer, I would then have 2 Timers, one ending in 1 second and the other ending in 3 seconds and when the first Timer ends, it gets rid of the overlay display even thou the second Timer still has 2 more seconds on its Timer."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682337322,"post_id":76090926,"comment_id":134194074,"body_markdown":"Again, it&#39;s difficult to know exactly what you&#39;re doing, but can&#39;t you get the player&#39;s *own* volume controls to show?","body":"Again, it&#39;s difficult to know exactly what you&#39;re doing, but can&#39;t you get the player&#39;s <i>own</i> volume controls to show?"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682337365,"post_id":76090926,"comment_id":134194081,"body_markdown":"If you wait the 3 seconds between the commands you input, the display overlay displays everything correctly, and every command is processed correctly no matter what is displayed, it just doesn&#39;t update the overlay in real time which is what I would like.","body":"If you wait the 3 seconds between the commands you input, the display overlay displays everything correctly, and every command is processed correctly no matter what is displayed, it just doesn&#39;t update the overlay in real time which is what I would like."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682337802,"post_id":76090926,"comment_id":134194171,"body_markdown":"Not sure what you really need or why timers are involved. This is caused by your not describing your [goal](http://technojeeves.com/joomla/index.php/free/117-smart-questions)","body":"Not sure what you really need or why timers are involved. This is caused by your not describing your <a href=\"http://technojeeves.com/joomla/index.php/free/117-smart-questions\" rel=\"nofollow noreferrer\">goal</a>"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682343960,"post_id":76090926,"comment_id":134195628,"body_markdown":"@SamuelMarchant: unfortunately VLCJ requires that you use the java.awt.Window for the OverlayApi and I tried both of your suggestions and neither one worked sadly","body":"@SamuelMarchant: unfortunately VLCJ requires that you use the java.awt.Window for the OverlayApi and I tried both of your suggestions and neither one worked sadly"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682344453,"post_id":76090926,"comment_id":134195785,"body_markdown":"@g00se: I don&#39;t need a timer but I can&#39;t do what I want to do without a timer of some kind. I&#39;m unaware of how to do a timed task without a timer of some kind. Everything works just like its supposed to, including the timer, except for the fact that if the program is already displaying some data, that display isn&#39;t updating when I call the repaint() method","body":"@g00se: I don&#39;t need a timer but I can&#39;t do what I want to do without a timer of some kind. I&#39;m unaware of how to do a timed task without a timer of some kind. Everything works just like its supposed to, including the timer, except for the fact that if the program is already displaying some data, that display isn&#39;t updating when I call the repaint() method"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682344841,"post_id":76090926,"comment_id":134195908,"body_markdown":"For example, if volume is at 50% and I hit the UP arrow 10 times in quick succession to raise the volume to 60%, the display only shows 51% and doesn&#39;t increment like i would like it to. The volume does in fact go up to 60%, and if i wait the 3 seconds for the display to go away and then hit the UP arrow for the 11th time, it shows 61%. So its working in the background, its just that the display isn&#39;t updating in real time","body":"For example, if volume is at 50% and I hit the UP arrow 10 times in quick succession to raise the volume to 60%, the display only shows 51% and doesn&#39;t increment like i would like it to. The volume does in fact go up to 60%, and if i wait the 3 seconds for the display to go away and then hit the UP arrow for the 11th time, it shows 61%. So its working in the background, its just that the display isn&#39;t updating in real time"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682353216,"post_id":76090926,"comment_id":134198148,"body_markdown":"I agree  the first comment, thread will complete it&#39;s &quot;task&quot; then die, but there is no definite task neither control of the state of the thread (see thread.yield() in the API docs) it&#39;s an overexpensive way of doing something that appears to be either existent or not existent. Either it&#39;s running as part of the GUI or it is not! (Aside:  Should put on the main Window setIgnoreRepaint(false); anyhow.).  Although thread is there for three seconds, the thread could simply decide to idle or yield for an indefinite period, but also setting top priority may take over the GUI and stop the player.","body":"I agree  the first comment, thread will complete it&#39;s &quot;task&quot; then die, but there is no definite task neither control of the state of the thread (see thread.yield() in the API docs) it&#39;s an overexpensive way of doing something that appears to be either existent or not existent. Either it&#39;s running as part of the GUI or it is not! (Aside:  Should put on the main Window setIgnoreRepaint(false); anyhow.).  Although thread is there for three seconds, the thread could simply decide to idle or yield for an indefinite period, but also setting top priority may take over the GUI and stop the player."},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682354537,"post_id":76090926,"comment_id":134198426,"body_markdown":"@SamuelMarchant: I put the `setIgnoreRepaint(false)` in both the Overlay Window and the main frame as well, and i put in a display in the paint method to see if it was running it and sure enough, its running it and the value of text in the paint class is correct (as in what I want it to display) as well.","body":"@SamuelMarchant: I put the <code>setIgnoreRepaint(false)</code> in both the Overlay Window and the main frame as well, and i put in a display in the paint method to see if it was running it and sure enough, its running it and the value of text in the paint class is correct (as in what I want it to display) as well."},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682365030,"post_id":76090926,"comment_id":134200693,"body_markdown":"@SamuelMarchant: I even found a way to get rid of `AWT` and instead use `JLabel` and even removed the `Thread` and still the problem persists...","body":"@SamuelMarchant: I even found a way to get rid of <code>AWT</code> and instead use <code>JLabel</code> and even removed the <code>Thread</code> and still the problem persists..."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682377040,"post_id":76090926,"comment_id":134202712,"body_markdown":"&quot;Overlay&quot; is a bit strange, you imply it overlays something else, so should not be the &quot;top level&quot; window. Top level window is either a Window or Frame swing or awt.","body":"&quot;Overlay&quot; is a bit strange, you imply it overlays something else, so should not be the &quot;top level&quot; window. Top level window is either a Window or Frame swing or awt."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682377780,"post_id":76090926,"comment_id":134202814,"body_markdown":"Hazard a guess, you would have your main (pardon the pun) top level window or frame and insert to it as the first added element a layered pane. The first and always bottom layer would be the viewing window, and second layer would be a lone Component class as the &quot;overlay&quot; painting layer for messages etc.","body":"Hazard a guess, you would have your main (pardon the pun) top level window or frame and insert to it as the first added element a layered pane. The first and always bottom layer would be the viewing window, and second layer would be a lone Component class as the &quot;overlay&quot; painting layer for messages etc."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682379863,"post_id":76090926,"comment_id":134203023,"body_markdown":"&#39;Overlay&#39; is a term used in the API in question, and yes, their class seems to be based on lower level AWT classes, not Swing","body":"&#39;Overlay&#39; is a term used in the API in question, and yes, their class seems to be based on lower level AWT classes, not Swing"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682415198,"post_id":76090926,"comment_id":134207742,"body_markdown":"[Here](https://github.com/caprica/vlcj-examples/blob/master/src/main/java/uk/co/caprica/vlcj/test/overlay/OverlayTest.java) is one of the overlay examples. Unfortunately the examples do not build for me, so I have no idea what this is all about","body":"<a href=\"https://github.com/caprica/vlcj-examples/blob/master/src/main/java/uk/co/caprica/vlcj/test/overlay/OverlayTest.java\" rel=\"nofollow noreferrer\">Here</a> is one of the overlay examples. Unfortunately the examples do not build for me, so I have no idea what this is all about"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682441896,"post_id":76090926,"comment_id":134215218,"body_markdown":"@g00se: yeah, it works for me but it has the same problem that my current one has","body":"@g00se: yeah, it works for me but it has the same problem that my current one has"},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682441907,"post_id":76090926,"comment_id":134215223,"body_markdown":"@SamuelMarchant: yeah, the top layer needs to be transparent or kept to the size of the text that it is displaying.","body":"@SamuelMarchant: yeah, the top layer needs to be transparent or kept to the size of the text that it is displaying."},{"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"score":0,"creation_date":1682441914,"post_id":76090926,"comment_id":134215224,"body_markdown":"And I have found out that my program works awesomely, if i minimize it and bring it back everytime the text in the overlay is changed","body":"And I have found out that my program works awesomely, if i minimize it and bring it back everytime the text in the overlay is changed"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1682444566,"post_id":76090926,"comment_id":134215776,"body_markdown":"That suggests that the gui thread is being blocked","body":"That suggests that the gui thread is being blocked"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682477094,"post_id":76090926,"comment_id":134220744,"body_markdown":"Are you using the exact same component graphics reference for repaint paint() itself is overridden for construction but you must call repaint the overlay.repaint() when and after you make a change.","body":"Are you using the exact same component graphics reference for repaint paint() itself is overridden for construction but you must call repaint the overlay.repaint() when and after you make a change."}],"owner":{"account_id":8242641,"reputation":11,"user_id":6199842,"display_name":"bobthebob55"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682365112,"creation_date":1682332084,"question_id":76090926,"body_markdown":"I&#39;ve been working on this for some time now and I can&#39;t seem to figure out where I have gone wrong. I&#39;m working on a VLCJ project and trying to use an overlay to display changes to the video, like volume for example, and only display it for 3 seconds from the last input. Everything seems to work great except for the fact that the repaint() doesn&#39;t change the text in the overlay at all while it is displaying.\r\n\r\nHere is my code...\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Font;\r\nimport java.awt.FontMetrics;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.Window;\r\nimport java.awt.geom.Rectangle2D;\r\n\r\nimport uk.co.caprica.vlcj.player.embedded.OverlayApi;\r\n\r\nclass Overlay extends Window implements Runnable\r\n{\r\n\tprivate static final long serialVersionUID = 1L;\r\n\tprivate String text;\r\n\tprivate int x, y;\r\n\tprivate Thread thread;\r\n\tprivate boolean running;\r\n\tprivate FontMetrics metric;\t\t\t\t\t\t\t\t\t\t// the metrics from the graphics\r\n\tprivate int stringWidth;\t\t\t\t\t\t\t\t\t\t// the width of the string that is currently being displayed\r\n\tprivate OverlayApi overlay;\r\n\tprivate long startTimer;\r\n\r\n\tpublic Overlay(Window owner)\r\n\t{\r\n\t\tsuper(owner);\r\n\t\tsetBackground(new Color(0, 0, 0, 0));\r\n\t\ttext = &quot;&quot;;\r\n\t\tx = (int) getOwner().getLocation().getX();\r\n\t\ty = (int) getOwner().getLocation().getY();\r\n\t\trunning = false;\r\n\t}\r\n\tpublic void paint(Graphics g)\r\n\t{\r\n\t\tsuper.paint(g);\r\n\t\tGraphics2D g2D = (Graphics2D)g;\r\n\t\tg2D.setPaint(Color.black);\r\n\t\tFont fnt = new Font(&quot;Serif&quot;, Font.PLAIN,32);\r\n\t\tg2D.setFont(fnt);\r\n\t\tmetric = g2D.getFontMetrics(fnt);\t\t\t\t\t\t// get the font size so it can figure out how wide the text is\r\n\t\tstringWidth = metric.stringWidth(text);\t\t\t\t\t// get the width of the current text field\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// make a rectangle the size of the text and fill it in with black\r\n\t\tg2D.fill(new Rectangle2D.Double(x, y, stringWidth, g2D.getFont().getSize() + 3));\r\n\r\n\t\tg2D.setPaint(Color.white);\r\n\t\tg2D.drawString(text, x, y + g2D.getFont().getSize());\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void run()\r\n\t{\r\n\t\tlong lastTime = System.currentTimeMillis();\r\n\t\tdouble amountOfTicks = 60.0;\r\n\t\tdouble ns = 1000 / amountOfTicks;\r\n\t\tdouble delta = 0;\r\n\t\twhile (running)\r\n\t\t{\r\n\t\t\tlong now = System.currentTimeMillis();\r\n\t\t\tdelta += (now - lastTime) / ns;\r\n\t\t\tlastTime = now;\r\n\t\t\twhile (delta &gt;= 1)\r\n\t\t\t{\r\n\t\t\t\tif (timesUp())\r\n\t\t\t\t{\r\n\t\t\t\t\toverlay.enable(false);\r\n\t\t\t\t\trunning = false;\r\nSystem.out.println(&quot;STOPPING&quot;);\r\n\t\t\t\t}\r\n\t\t\t\tdelta--;\r\n\t\t\t}\r\n\t\t\tif (running)\trender();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void render()\r\n\t{\r\n\t\tthis.repaint();\r\n\t}\r\n\r\n\tpublic synchronized void start()\r\n\t{\r\n\t\tstartTimer = System.currentTimeMillis();\r\n\t\toverlay.enable(true);\r\n\t\tif (!running)\r\n\t\t{\r\n\t\t\tthread = new Thread(this);\r\n\t\t\tthread.start();\r\n\t\t\trunning = true;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate boolean timesUp()\r\n\t{\r\n\t\tlong et = System.currentTimeMillis();\r\n\t\t\tlong time = et - startTimer;\r\n\t\t\tlong sec = 0;\r\n\t\tif (time &gt; 1000)\r\n\t\t{\r\n\t\t\tsec = (time / 1000) % 60;\r\n\t\t\tif (sec == 3)\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic void setText(String s)\r\n\t{\r\n\t\tthis.text = s;\r\n\t}\r\n\tpublic String getText()\r\n\t{\treturn this.text;\t}\r\n\r\n\tpublic void setOverlay(OverlayApi overlayRef)\r\n\t{\tthis.overlay = overlayRef;\t}\r\n}\r\n```\r\nAny help I can get would be greatly appreciated as I&#39;m stuck, thank you\r\n\r\n**--UPDATED--**\r\n\r\nSo, I completely removed the `Thread` from the equation and still no dice. I also removed the use of `AWT` and tried a `JLabel` but even that isn&#39;t updating. Its all the same problem...","title":"My repaint() isn&#39;t doing anything and I&#39;m at a complete loss","body":"<p>I've been working on this for some time now and I can't seem to figure out where I have gone wrong. I'm working on a VLCJ project and trying to use an overlay to display changes to the video, like volume for example, and only display it for 3 seconds from the last input. Everything seems to work great except for the fact that the repaint() doesn't change the text in the overlay at all while it is displaying.</p>\n<p>Here is my code...</p>\n<pre><code>import java.awt.Color;\nimport java.awt.Font;\nimport java.awt.FontMetrics;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.Window;\nimport java.awt.geom.Rectangle2D;\n\nimport uk.co.caprica.vlcj.player.embedded.OverlayApi;\n\nclass Overlay extends Window implements Runnable\n{\n    private static final long serialVersionUID = 1L;\n    private String text;\n    private int x, y;\n    private Thread thread;\n    private boolean running;\n    private FontMetrics metric;                                     // the metrics from the graphics\n    private int stringWidth;                                        // the width of the string that is currently being displayed\n    private OverlayApi overlay;\n    private long startTimer;\n\n    public Overlay(Window owner)\n    {\n        super(owner);\n        setBackground(new Color(0, 0, 0, 0));\n        text = &quot;&quot;;\n        x = (int) getOwner().getLocation().getX();\n        y = (int) getOwner().getLocation().getY();\n        running = false;\n    }\n    public void paint(Graphics g)\n    {\n        super.paint(g);\n        Graphics2D g2D = (Graphics2D)g;\n        g2D.setPaint(Color.black);\n        Font fnt = new Font(&quot;Serif&quot;, Font.PLAIN,32);\n        g2D.setFont(fnt);\n        metric = g2D.getFontMetrics(fnt);                       // get the font size so it can figure out how wide the text is\n        stringWidth = metric.stringWidth(text);                 // get the width of the current text field\n                                                                // make a rectangle the size of the text and fill it in with black\n        g2D.fill(new Rectangle2D.Double(x, y, stringWidth, g2D.getFont().getSize() + 3));\n\n        g2D.setPaint(Color.white);\n        g2D.drawString(text, x, y + g2D.getFont().getSize());\n    }\n\n    @Override\n    public void run()\n    {\n        long lastTime = System.currentTimeMillis();\n        double amountOfTicks = 60.0;\n        double ns = 1000 / amountOfTicks;\n        double delta = 0;\n        while (running)\n        {\n            long now = System.currentTimeMillis();\n            delta += (now - lastTime) / ns;\n            lastTime = now;\n            while (delta &gt;= 1)\n            {\n                if (timesUp())\n                {\n                    overlay.enable(false);\n                    running = false;\nSystem.out.println(&quot;STOPPING&quot;);\n                }\n                delta--;\n            }\n            if (running)    render();\n        }\n    }\n\n    private void render()\n    {\n        this.repaint();\n    }\n\n    public synchronized void start()\n    {\n        startTimer = System.currentTimeMillis();\n        overlay.enable(true);\n        if (!running)\n        {\n            thread = new Thread(this);\n            thread.start();\n            running = true;\n        }\n    }\n\n    private boolean timesUp()\n    {\n        long et = System.currentTimeMillis();\n            long time = et - startTimer;\n            long sec = 0;\n        if (time &gt; 1000)\n        {\n            sec = (time / 1000) % 60;\n            if (sec == 3)   return true;\n        }\n        return false;\n    }\n\n    public void setText(String s)\n    {\n        this.text = s;\n    }\n    public String getText()\n    {   return this.text;   }\n\n    public void setOverlay(OverlayApi overlayRef)\n    {   this.overlay = overlayRef;  }\n}\n</code></pre>\n<p>Any help I can get would be greatly appreciated as I'm stuck, thank you</p>\n<p><strong>--UPDATED--</strong></p>\n<p>So, I completely removed the <code>Thread</code> from the equation and still no dice. I also removed the use of <code>AWT</code> and tried a <code>JLabel</code> but even that isn't updating. Its all the same problem...</p>\n"},{"tags":["java","cdi"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":2,"creation_date":1682366157,"post_id":76095449,"comment_id":134200914,"body_markdown":"maybe `Extra ex = new Extra(null);` to blame?","body":"maybe <code>Extra ex = new Extra(null);</code> to blame?"},{"owner":{"account_id":6963528,"reputation":6523,"user_id":5342297,"display_name":"Siliarus"},"score":1,"creation_date":1682411374,"post_id":76095449,"comment_id":134206825,"body_markdown":"Exactly the case, you need to let CDI create the instance; avoid initializing the instance yourself. So just `@Inject` it into the class where you intend to use it or use dynamic resolution via `CDI.current().select(Extra.class).get()`","body":"Exactly the case, you need to let CDI create the instance; avoid initializing the instance yourself. So just <code>@Inject</code> it into the class where you intend to use it or use dynamic resolution via <code>CDI.current().select(Extra.class).get()</code>"},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1682511266,"post_id":76095449,"comment_id":134226987,"body_markdown":"CDI.current().select(Extra.class).get() works for me. Thank you both for your help.","body":"CDI.current().select(Extra.class).get() works for me. Thank you both for your help."}],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682364759,"creation_date":1682364759,"question_id":76095449,"body_markdown":"I am trying to inject an Application Scope class to another. It work fine at Servlets, Listeners, Filters and Rest API, but not in POJO, because in the last one I get a reference equal to null, I mean the POJO (class Extra) doesn&#39;t use the same instance that other. The idea is that the classes MyServlet.java and Extra.java use the same instance of the class Person.\r\n\r\n```\r\n\r\n\r\n\r\n@ApplicationScoped\r\npublic class Person implements Serializable{\r\n\tString name;\r\n\tint edad;\r\n\t\r\n\tpublic Person() {\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\t\r\n\tPerson(String name, int edad){\r\n\t\tthis.name = name;\r\n\t\tthis.edad = edad;\r\n\t}\r\n\t\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\t\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\t\r\n\tpublic int getEdad() {\r\n\t\treturn edad;\r\n\t}\r\n\t\r\n\tpublic void setEdad(int edad) {\r\n\t\tthis.edad = edad;\r\n\t}\r\n}\r\n\r\n@WebServlet(&quot;/hola&quot;)\r\npublic class MyServlet extends HttpServlet{\r\n\r\n\t@Override\r\n\tprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n\t\tExtra ex = new Extra(null);\r\n\t\tPrintWriter wr = resp.getWriter();\r\n\t\twr.print(&quot;Hola:&quot;+ex.saludar());\r\n\t}\r\n}\r\n\r\n@WebServlet(&quot;/mundo&quot;)\r\npublic class MySecond extends HttpServlet{\r\n\t\r\n\t@Inject\r\n\tPerson p;\r\n\t\r\n\t@Override\r\n\tprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n\t\tPrintWriter wr = resp.getWriter();\r\n\t\tif (p == null) {\r\n\t\t\tp = new Person();\r\n\t\t\tp.setName(&quot;Second&quot;);\r\n\t\t}\r\n\t\twr.print(&quot;Mundo: &quot;+ p.getName());\r\n\t}\r\n}\r\n\r\n@ManagedBean\r\n@RequestScoped\r\npublic class Extra implements Serializable{\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\t\r\n\tPerson p;\r\n\t\r\n\t@Inject\r\n\tpublic Extra(Person p) {\r\n\t\tthis.p = p;\r\n\t}\r\n\t\r\n\tpublic String saludar() {\r\n\t\tif (p == null) {\r\n\t\t\tp = new Person();\r\n\t\t\tp.setName(&quot;Extra&quot;);\r\n\t\t}else\r\n\t\t\tp.setName(&quot;No nulo&quot;);\r\n\t\treturn p.getName();\r\n\t}\r\n}\r\n\r\n\r\n\r\n```","title":"Inject Application Scoped class to others","body":"<p>I am trying to inject an Application Scope class to another. It work fine at Servlets, Listeners, Filters and Rest API, but not in POJO, because in the last one I get a reference equal to null, I mean the POJO (class Extra) doesn't use the same instance that other. The idea is that the classes MyServlet.java and Extra.java use the same instance of the class Person.</p>\n<pre><code>\n\n\n@ApplicationScoped\npublic class Person implements Serializable{\n    String name;\n    int edad;\n    \n    public Person() {\n        // TODO Auto-generated constructor stub\n    }\n    \n    Person(String name, int edad){\n        this.name = name;\n        this.edad = edad;\n    }\n    \n    public String getName() {\n        return name;\n    }\n    \n    public void setName(String name) {\n        this.name = name;\n    }\n    \n    public int getEdad() {\n        return edad;\n    }\n    \n    public void setEdad(int edad) {\n        this.edad = edad;\n    }\n}\n\n@WebServlet(&quot;/hola&quot;)\npublic class MyServlet extends HttpServlet{\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        Extra ex = new Extra(null);\n        PrintWriter wr = resp.getWriter();\n        wr.print(&quot;Hola:&quot;+ex.saludar());\n    }\n}\n\n@WebServlet(&quot;/mundo&quot;)\npublic class MySecond extends HttpServlet{\n    \n    @Inject\n    Person p;\n    \n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        PrintWriter wr = resp.getWriter();\n        if (p == null) {\n            p = new Person();\n            p.setName(&quot;Second&quot;);\n        }\n        wr.print(&quot;Mundo: &quot;+ p.getName());\n    }\n}\n\n@ManagedBean\n@RequestScoped\npublic class Extra implements Serializable{\n\n    private static final long serialVersionUID = 1L;\n    \n    Person p;\n    \n    @Inject\n    public Extra(Person p) {\n        this.p = p;\n    }\n    \n    public String saludar() {\n        if (p == null) {\n            p = new Person();\n            p.setName(&quot;Extra&quot;);\n        }else\n            p.setName(&quot;No nulo&quot;);\n        return p.getName();\n    }\n}\n\n\n\n</code></pre>\n"},{"tags":["java","android","api","gradle","google-maps-api-3"],"comments":[{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1682307215,"post_id":76085501,"comment_id":134189024,"body_markdown":"Can you please provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) by also providing the java activity file? I can&#39;t run your code with only these.","body":"Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> by also providing the java activity file? I can&#39;t run your code with only these."},{"owner":{"account_id":23071224,"reputation":19,"user_id":17184898,"display_name":"Majern&#237;k Tom&#225;š"},"score":0,"creation_date":1682364625,"post_id":76085501,"comment_id":134200606,"body_markdown":"@Yrll hi i have added the activity in which i am running the fragment. Sorry for late response","body":"@Yrll hi i have added the activity in which i am running the fragment. Sorry for late response"},{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1682395886,"post_id":76085501,"comment_id":134204436,"body_markdown":"I can&#39;t seem to run your code in my environment. Can you provide a github repo that I can clone?","body":"I can&#39;t seem to run your code in my environment. Can you provide a github repo that I can clone?"},{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1682404244,"post_id":76085501,"comment_id":134205338,"body_markdown":"[Update] I was able to run your app, and things seems to be working fine. Can you double check how you were implementing your API key? And I think it would be good for you to File a Tech Support case so that they can take a look how you were restricting or how you set up your API key.","body":"[Update] I was able to run your app, and things seems to be working fine. Can you double check how you were implementing your API key? And I think it would be good for you to File a Tech Support case so that they can take a look how you were restricting or how you set up your API key."},{"owner":{"account_id":23071224,"reputation":19,"user_id":17184898,"display_name":"Majern&#237;k Tom&#225;š"},"score":0,"creation_date":1682453255,"post_id":76085501,"comment_id":134217606,"body_markdown":"@Yrll thank you very much I will check everything again","body":"@Yrll thank you very much I will check everything again"},{"owner":{"account_id":24508188,"reputation":1915,"user_id":18422887,"display_name":"Yrll"},"score":0,"creation_date":1682473242,"post_id":76085501,"comment_id":134220338,"body_markdown":"No problem! With regards to `unable to update local snapshot` error, please see this [question](https://stackoverflow.com/questions/71737816/googlecertificatesrslt-not-allowed-in-kotlin-android-application/75915360#75915360) because I think this is relevant and the answer mentioned there that the aforementioned error is actually harmless. That&#39;s why I suggested that you check how you were implementing your API keys.","body":"No problem! With regards to <code>unable to update local snapshot</code> error, please see this <a href=\"https://stackoverflow.com/questions/71737816/googlecertificatesrslt-not-allowed-in-kotlin-android-application/75915360#75915360\">question</a> because I think this is relevant and the answer mentioned there that the aforementioned error is actually harmless. That&#39;s why I suggested that you check how you were implementing your API keys."}],"owner":{"account_id":23071224,"reputation":19,"user_id":17184898,"display_name":"Majern&#237;k Tom&#225;š"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682364570,"creation_date":1682261171,"question_id":76085501,"body_markdown":"I am trying to connect Maps SDK to my application. I have generated api key and restricted it for android, added package name, SHA-1 fingerprint and restricted it to Maps SDK. Bellow are my dependecies and plugins. When I look at logs i can see that application has been connected to the API, permissions have been granted and map has been initialized. At the end I am getting warning \r\n\r\n&gt; &quot;Unable to update local snapshot for com.google.android.libraries.consentverifier#com.example.travelnotes&quot;\r\n\r\nWhen I go to google cloud and look at Maps SDK API, requests have been made. I have my api key, permissions, package name, google play services version in AndroidManifest.xml. The fragment for maps is defined in activity_google_maps.xml. When I click on button which is supposed to open the maps I get blank screen with color of my backround and when i move two fingers across the screen a compass is shows up in the upper left corner.\r\n\r\n**Module level build.gradle**\r\n\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;com.google.android.libraries.mapsplatform.secrets-gradle-plugin&#39;\r\n        id &#39;com.google.gms.google-services&#39;\r\n\r\n    }\r\n    android {\r\n        namespace &#39;com.example.travelnotes&#39;\r\n        compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.travelnotes&quot;\r\n        minSdk 19\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.1&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), \r\n            &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_17\r\n        targetCompatibility JavaVersion.VERSION_17\r\n    }\r\n\r\n    buildToolsVersion &#39;33.0.2&#39;\r\n    ndkVersion &#39;25.2.9519653&#39;\r\n    buildFeatures {\r\n        viewBinding true\r\n        }\r\n    }\r\n\r\n    dependencies {\r\n\r\n        implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n        implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n        implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n        implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n        implementation &#39;com.google.android.gms:play-services-maps:18.1.0&#39;\r\n        implementation &#39;com.google.android.gms:play-services-basement:18.2.0&#39;\r\n        implementation platform(&#39;com.google.firebase:firebase-bom:31.5.0&#39;)\r\n        testImplementation &#39;junit:junit:4.13.2&#39;\r\n        androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n\r\n    }\r\n\r\n**Project level build.gradle**\r\n\r\n    buildscript {\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n\r\n        }\r\n    }\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39; version &#39;7.4.2&#39; apply false\r\n        id &#39;com.android.library&#39; version &#39;7.4.2&#39; apply false\r\n        id &#39;com.google.android.libraries.mapsplatform.secrets-gradle-plugin&#39; version &#39;2.0.1&#39; \r\n        apply false}\r\n\r\n\r\n    task clean(type: Delete) {\r\n        delete rootProject.buildDir\r\n    }\r\n\r\n**settings.gradle**\r\n\r\n    pluginManagement {\r\n        repositories {\r\n            gradlePluginPortal()\r\n            google()\r\n            mavenCentral()\r\n        }\r\n    }\r\n\r\n    dependencyResolutionManagement {\r\n        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n        }\r\n    }\r\n\r\n    rootProject.name = &quot;TravelNotes&quot;\r\n    include &#39;:app&#39;\r\n\r\n**activity_google_maps.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;androidx.fragment.app.FragmentContainerView\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:id=&quot;@+id/map&quot;\r\n        tools:context=&quot;.GoogleMapActivity&quot;\r\n        android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n\r\n**GoogleMapsActivity.java**\r\n\r\n```\r\npackage com.example.travelnotes;\r\n\r\nimport android.Manifest;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.google.android.gms.maps.CameraUpdateFactory;\r\nimport com.google.android.gms.maps.GoogleMap;\r\nimport com.google.android.gms.maps.MapsInitializer;\r\nimport com.google.android.gms.maps.OnMapReadyCallback;\r\nimport com.google.android.gms.maps.SupportMapFragment;\r\nimport com.google.android.gms.maps.model.CameraPosition;\r\nimport com.google.android.gms.maps.model.LatLng;\r\n\r\npublic class GoogleMapActivity extends AppCompatActivity implements OnMapReadyCallback {\r\n    @Override\r\n    public void onMapReady(@NonNull GoogleMap googleMap) {\r\n        Toast.makeText(this, &quot;Map is Ready&quot;, Toast.LENGTH_SHORT).show();\r\n\r\n        mMap = googleMap;\r\n        if (mMap == null){\r\n            Log.d(TAG, &quot;map is null&quot;);\r\n        }\r\n        else {\r\n            Log.d(TAG, &quot;map is not null&quot;);\r\n        }\r\n        LatLng location = new LatLng(37.7749, -122.4194); // San Francisco\r\n        CameraPosition cameraPosition = new CameraPosition.Builder()\r\n                .target(location)\r\n                .zoom(10) // Zoom level\r\n                .build();\r\n        googleMap.moveCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\r\n    }\r\n    private static final String TAG = &quot;GoogleMapActivity&quot;;\r\n    private Boolean locationPermissionStatus = false;\r\n    private static final int locationPermissionRequestCode = 1234;\r\n    private GoogleMap mMap;\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_google_map);\r\n        Log.d(TAG, &quot;Map activity created&quot;);\r\n        getLocationPermission();\r\n    }\r\n\r\n\r\n\r\n    private void initializeMap(){\r\n        SupportMapFragment supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\r\n        assert supportMapFragment != null;\r\n        Log.d(TAG, &quot;Map has been initialized&quot;);\r\n        supportMapFragment.getMapAsync(GoogleMapActivity.this);\r\n\r\n    }\r\n\r\n    private void getLocationPermission(){\r\n        Log.d(TAG, &quot;location permission will be given&quot;);\r\n\r\n        String[] permissions = {Manifest.permission.ACCESS_FINE_LOCATION,\r\n                Manifest.permission.ACCESS_COARSE_LOCATION};\r\n        if (ContextCompat.checkSelfPermission(this.getApplicationContext(),\r\n                Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n            Log.d(TAG, &quot;location permission will be given&quot;);\r\n\r\n            if (ContextCompat.checkSelfPermission(this.getApplicationContext(),\r\n                    Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED){\r\n                Log.d(TAG, &quot;location permission granted&quot;);\r\n                locationPermissionStatus = true;\r\n                //initializeMap();\r\n            }\r\n            else {\r\n                ActivityCompat.requestPermissions(this, permissions, locationPermissionRequestCode);\r\n            }\r\n        }\r\n        else {\r\n            ActivityCompat.requestPermissions(this, permissions, locationPermissionRequestCode);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        //super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        locationPermissionStatus = false;\r\n        Log.d(TAG, &quot;onRequestPermissionsResult&quot;);\r\n\r\n        switch (requestCode) {\r\n            case locationPermissionRequestCode: {\r\n\r\n                if (grantResults.length &gt; 0) {\r\n\r\n                    for (int grantResult : grantResults) {\r\n                        if (grantResult != PackageManager.PERMISSION_GRANTED) {\r\n                            Log.d(TAG, &quot;location not granted&quot;);\r\n                            locationPermissionStatus = false;\r\n                            return;\r\n                        }\r\n                    }\r\n                    Log.d(TAG, &quot;location permission granted true&quot;);\r\n                    locationPermissionStatus = true;\r\n                    initializeMap();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n```","title":"How to connect Maps SKD API for android to my application","body":"<p>I am trying to connect Maps SDK to my application. I have generated api key and restricted it for android, added package name, SHA-1 fingerprint and restricted it to Maps SDK. Bellow are my dependecies and plugins. When I look at logs i can see that application has been connected to the API, permissions have been granted and map has been initialized. At the end I am getting warning</p>\n<blockquote>\n<p>&quot;Unable to update local snapshot for com.google.android.libraries.consentverifier#com.example.travelnotes&quot;</p>\n</blockquote>\n<p>When I go to google cloud and look at Maps SDK API, requests have been made. I have my api key, permissions, package name, google play services version in AndroidManifest.xml. The fragment for maps is defined in activity_google_maps.xml. When I click on button which is supposed to open the maps I get blank screen with color of my backround and when i move two fingers across the screen a compass is shows up in the upper left corner.</p>\n<p><strong>Module level build.gradle</strong></p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.android.libraries.mapsplatform.secrets-gradle-plugin'\n    id 'com.google.gms.google-services'\n\n}\nandroid {\n    namespace 'com.example.travelnotes'\n    compileSdk 33\n\ndefaultConfig {\n    applicationId &quot;com.example.travelnotes&quot;\n    minSdk 19\n    targetSdk 33\n    versionCode 1\n    versionName &quot;1.1&quot;\n\n    testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n}\n\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), \n        'proguard-rules.pro'\n    }\n}\ncompileOptions {\n    sourceCompatibility JavaVersion.VERSION_17\n    targetCompatibility JavaVersion.VERSION_17\n}\n\nbuildToolsVersion '33.0.2'\nndkVersion '25.2.9519653'\nbuildFeatures {\n    viewBinding true\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'com.google.android.gms:play-services-maps:18.1.0'\n    implementation 'com.google.android.gms:play-services-basement:18.2.0'\n    implementation platform('com.google.firebase:firebase-bom:31.5.0')\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n\n}\n</code></pre>\n<p><strong>Project level build.gradle</strong></p>\n<pre><code>buildscript {\n    repositories {\n        google()\n        mavenCentral()\n\n    }\n    dependencies {\n        classpath 'com.google.gms:google-services:4.3.15'\n\n    }\n}\n\nplugins {\n    id 'com.android.application' version '7.4.2' apply false\n    id 'com.android.library' version '7.4.2' apply false\n    id 'com.google.android.libraries.mapsplatform.secrets-gradle-plugin' version '2.0.1' \n    apply false}\n\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p><strong>settings.gradle</strong></p>\n<pre><code>pluginManagement {\n    repositories {\n        gradlePluginPortal()\n        google()\n        mavenCentral()\n    }\n}\n\ndependencyResolutionManagement {\n    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\nrootProject.name = &quot;TravelNotes&quot;\ninclude ':app'\n</code></pre>\n<p><strong>activity_google_maps.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;&gt;\n\n&lt;androidx.fragment.app.FragmentContainerView\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:id=&quot;@+id/map&quot;\n    tools:context=&quot;.GoogleMapActivity&quot;\n    android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot; /&gt;\n</code></pre>\n\n<p><strong>GoogleMapsActivity.java</strong></p>\n<pre><code>package com.example.travelnotes;\n\nimport android.Manifest;\nimport android.content.pm.PackageManager;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport com.google.android.gms.maps.CameraUpdateFactory;\nimport com.google.android.gms.maps.GoogleMap;\nimport com.google.android.gms.maps.MapsInitializer;\nimport com.google.android.gms.maps.OnMapReadyCallback;\nimport com.google.android.gms.maps.SupportMapFragment;\nimport com.google.android.gms.maps.model.CameraPosition;\nimport com.google.android.gms.maps.model.LatLng;\n\npublic class GoogleMapActivity extends AppCompatActivity implements OnMapReadyCallback {\n    @Override\n    public void onMapReady(@NonNull GoogleMap googleMap) {\n        Toast.makeText(this, &quot;Map is Ready&quot;, Toast.LENGTH_SHORT).show();\n\n        mMap = googleMap;\n        if (mMap == null){\n            Log.d(TAG, &quot;map is null&quot;);\n        }\n        else {\n            Log.d(TAG, &quot;map is not null&quot;);\n        }\n        LatLng location = new LatLng(37.7749, -122.4194); // San Francisco\n        CameraPosition cameraPosition = new CameraPosition.Builder()\n                .target(location)\n                .zoom(10) // Zoom level\n                .build();\n        googleMap.moveCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));\n    }\n    private static final String TAG = &quot;GoogleMapActivity&quot;;\n    private Boolean locationPermissionStatus = false;\n    private static final int locationPermissionRequestCode = 1234;\n    private GoogleMap mMap;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_google_map);\n        Log.d(TAG, &quot;Map activity created&quot;);\n        getLocationPermission();\n    }\n\n\n\n    private void initializeMap(){\n        SupportMapFragment supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map);\n        assert supportMapFragment != null;\n        Log.d(TAG, &quot;Map has been initialized&quot;);\n        supportMapFragment.getMapAsync(GoogleMapActivity.this);\n\n    }\n\n    private void getLocationPermission(){\n        Log.d(TAG, &quot;location permission will be given&quot;);\n\n        String[] permissions = {Manifest.permission.ACCESS_FINE_LOCATION,\n                Manifest.permission.ACCESS_COARSE_LOCATION};\n        if (ContextCompat.checkSelfPermission(this.getApplicationContext(),\n                Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n            Log.d(TAG, &quot;location permission will be given&quot;);\n\n            if (ContextCompat.checkSelfPermission(this.getApplicationContext(),\n                    Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED){\n                Log.d(TAG, &quot;location permission granted&quot;);\n                locationPermissionStatus = true;\n                //initializeMap();\n            }\n            else {\n                ActivityCompat.requestPermissions(this, permissions, locationPermissionRequestCode);\n            }\n        }\n        else {\n            ActivityCompat.requestPermissions(this, permissions, locationPermissionRequestCode);\n        }\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        //super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        locationPermissionStatus = false;\n        Log.d(TAG, &quot;onRequestPermissionsResult&quot;);\n\n        switch (requestCode) {\n            case locationPermissionRequestCode: {\n\n                if (grantResults.length &gt; 0) {\n\n                    for (int grantResult : grantResults) {\n                        if (grantResult != PackageManager.PERMISSION_GRANTED) {\n                            Log.d(TAG, &quot;location not granted&quot;);\n                            locationPermissionStatus = false;\n                            return;\n                        }\n                    }\n                    Log.d(TAG, &quot;location permission granted true&quot;);\n                    locationPermissionStatus = true;\n                    initializeMap();\n                }\n            }\n        }\n    }\n\n\n}\n\n</code></pre>\n"},{"tags":["java","android","function","canvas"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682352892,"creation_date":1682352892,"answer_id":76093954,"question_id":76093857,"body_markdown":"That becomes much more complicated.  YOu&#39;re currently adding all your data to a Path.  That path gets drawn once, with whatever pen is currently set.  The simplest way to do this would be not to use a data structure like this:\r\n\r\n    class DrawingData {\r\n       public Path path;\r\n       public int strokeWidth;\r\n    }\r\n\r\nInstead of storing a single Path, store a List&lt;DrawingData&gt;.  Whenever the size changes, add a new DrawingData to the list.  Then in onDraw, walk the list and draw all of them, setting the strokeWidth each time.","title":"Increase and Decrease functions also change the size of what was previously drawn. How do I fix this?","body":"<p>That becomes much more complicated.  YOu're currently adding all your data to a Path.  That path gets drawn once, with whatever pen is currently set.  The simplest way to do this would be not to use a data structure like this:</p>\n<pre><code>class DrawingData {\n   public Path path;\n   public int strokeWidth;\n}\n</code></pre>\n<p>Instead of storing a single Path, store a List.  Whenever the size changes, add a new DrawingData to the list.  Then in onDraw, walk the list and draw all of them, setting the strokeWidth each time.</p>\n"},{"tags":[],"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682364544,"creation_date":1682364544,"answer_id":76095428,"question_id":76093857,"body_markdown":"You&#39;re storing every `Path` in a list, and then in `onDraw` you draw each of them to the `Canvas` **using the same `Paint`**. There&#39;s no concept of *already drawn*, every call to `onDraw` starts with a blank canvas, and I assume that&#39;s why you&#39;re storing the paths and redrawing them in order?\r\n\r\nSince you basically have to recreate the image step-by-step this way, that needs to include steps like *set size*, *set colour* etc. You could make it part of each drawing operation if you want, like in Gabe&#39;s answer (`strokeWidth` is always a parameter, even if it hasn&#39;t changed), or you could make them separate commands, like this:\r\n\r\n````\r\nsealed class DrawCommand {\r\n    abstract fun perform(canvas: Canvas, paint: Paint)\r\n\r\n    data class Draw(val path: Path) : DrawCommand() {\r\n        override fun perform(canvas: Canvas, paint: Paint) {\r\n            canvas.drawPath(path, paint)\r\n        }\r\n    }\r\n\r\n    data class SetStrokeWidth(val width: Float) : DrawCommand() {\r\n        override fun perform(canvas: Canvas, paint: Paint) {\r\n            paint.strokeWidth = width\r\n        }\r\n    } \r\n}\r\n````\r\n\r\nThen instead of a `List&lt;Path&gt;`, you hold a `List&lt;DrawCommand&gt;`. To add a path to it, you add a `DrawCommand.Draw(path)` instead. To set the brush width, add a `SetStrokeWidth`. To redraw the image, just iterate over all the commands, calling the common `perform` method passing the current `Canvas` and `Paint`, and they&#39;ll do what they need to do.\r\n\r\n----\r\n\r\nThis is more complicated than just making the stroke width an attribute of each path-drawing operation, but it gives you a bit of flexibility by separating things. You can get undo functionality by popping `DrawCommand`s off the list, and you can expand it by adding new subclasses for different kinds of commands - colour changes, stroke styles, drawing circles etc etc. Depends what you need!\r\n\r\nBut either way, you need to store that stroke width change somehow, and apply it at the right stage in your redrawing.\r\n\r\n----\r\n\r\nThe other alternative is to create your own internal `Bitmap` (and `Canvas` to wrap it), and instead of storing all your paths, just draw them to the internal bitmap. Then in `onDraw` you just use the `drawBitmap` call to render that whole bitmap in one go, instead of redrawing everything one step at a time.\r\n\r\nOn the plus side, that&#39;s a lot faster when you have a lot of paths, and it will store things like &quot;this path is this width&quot; because that&#39;s just how you drew it onto the bitmap, those pixels won&#39;t change if you update the `Paint` later. On the other hand, once something&#39;s drawn it&#39;s drawn (destructive editing) and you won&#39;t be able to selectively change a certain path later. You could mix the two approaches to get some flexibility, but that&#39;s getting a lot more complex!","title":"Increase and Decrease functions also change the size of what was previously drawn. How do I fix this?","body":"<p>You're storing every <code>Path</code> in a list, and then in <code>onDraw</code> you draw each of them to the <code>Canvas</code> <strong>using the same <code>Paint</code></strong>. There's no concept of <em>already drawn</em>, every call to <code>onDraw</code> starts with a blank canvas, and I assume that's why you're storing the paths and redrawing them in order?</p>\n<p>Since you basically have to recreate the image step-by-step this way, that needs to include steps like <em>set size</em>, <em>set colour</em> etc. You could make it part of each drawing operation if you want, like in Gabe's answer (<code>strokeWidth</code> is always a parameter, even if it hasn't changed), or you could make them separate commands, like this:</p>\n<pre><code>sealed class DrawCommand {\n    abstract fun perform(canvas: Canvas, paint: Paint)\n\n    data class Draw(val path: Path) : DrawCommand() {\n        override fun perform(canvas: Canvas, paint: Paint) {\n            canvas.drawPath(path, paint)\n        }\n    }\n\n    data class SetStrokeWidth(val width: Float) : DrawCommand() {\n        override fun perform(canvas: Canvas, paint: Paint) {\n            paint.strokeWidth = width\n        }\n    } \n}\n</code></pre>\n<p>Then instead of a <code>List&lt;Path&gt;</code>, you hold a <code>List&lt;DrawCommand&gt;</code>. To add a path to it, you add a <code>DrawCommand.Draw(path)</code> instead. To set the brush width, add a <code>SetStrokeWidth</code>. To redraw the image, just iterate over all the commands, calling the common <code>perform</code> method passing the current <code>Canvas</code> and <code>Paint</code>, and they'll do what they need to do.</p>\n<hr />\n<p>This is more complicated than just making the stroke width an attribute of each path-drawing operation, but it gives you a bit of flexibility by separating things. You can get undo functionality by popping <code>DrawCommand</code>s off the list, and you can expand it by adding new subclasses for different kinds of commands - colour changes, stroke styles, drawing circles etc etc. Depends what you need!</p>\n<p>But either way, you need to store that stroke width change somehow, and apply it at the right stage in your redrawing.</p>\n<hr />\n<p>The other alternative is to create your own internal <code>Bitmap</code> (and <code>Canvas</code> to wrap it), and instead of storing all your paths, just draw them to the internal bitmap. Then in <code>onDraw</code> you just use the <code>drawBitmap</code> call to render that whole bitmap in one go, instead of redrawing everything one step at a time.</p>\n<p>On the plus side, that's a lot faster when you have a lot of paths, and it will store things like &quot;this path is this width&quot; because that's just how you drew it onto the bitmap, those pixels won't change if you update the <code>Paint</code> later. On the other hand, once something's drawn it's drawn (destructive editing) and you won't be able to selectively change a certain path later. You could mix the two approaches to get some flexibility, but that's getting a lot more complex!</p>\n"}],"owner":{"account_id":23744126,"reputation":1,"user_id":17761809,"display_name":"Darell"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682364544,"creation_date":1682352156,"question_id":76093857,"body_markdown":"I&#39;m designing a drawing app in Android Studio using Java. I have a &#39;+&#39; button and a &#39;-&#39; button in my activity_main.xml. Whenever I click on these buttons the size of the pen increases or decreases, but it also increases and decreases whatever I had already drawn on the canvas. This should not be happening, why is this happening?\r\n\r\nCode snippet of increase/decrease functions:\r\n\r\n```\r\npublic void increasePenSize() {\r\n        float currentStrokeWidth = paint.getStrokeWidth();\r\n        float newStrokeWidth = currentStrokeWidth + 2f;\r\n        paint.setStrokeWidth(newStrokeWidth);\r\n    }\r\n\r\n    public void decreasePenSize() {\r\n        float currentStrokeWidth = paint.getStrokeWidth();\r\n        float newStrokeWidth = currentStrokeWidth - 2f;\r\n        paint.setStrokeWidth(newStrokeWidth);\r\n    }\r\n```\r\n\r\n\r\nFull code:\r\n```\r\npackage com.example.sketch_1;\r\n\r\nimport android.content.Context;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Canvas;\r\nimport android.graphics.Color;\r\nimport android.graphics.Paint;\r\nimport android.graphics.Path;\r\nimport android.util.AttributeSet;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\n\r\nimport androidx.annotation.Nullable;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CanvasView extends View\r\n{\r\n    Context context;\r\n    private int width, height;\r\n    private Bitmap bitmap;\r\n    private Paint paint;\r\n    private Path path;\r\n    private Canvas canvas;\r\n    private float mX, mY;\r\n    private static final float TOUCH_TOLERANCE = 4;\r\n\r\n\r\n    // Add variables to keep track of previous paths and their colors\r\n    private List&lt;Path&gt; paths = new ArrayList&lt;&gt;();\r\n    private List&lt;Integer&gt; colors = new ArrayList&lt;&gt;();\r\n    private int currentColor = Color.BLACK;\r\n    public CanvasView(Context context, @Nullable AttributeSet attrs) {\r\n        super(context, attrs);\r\n        this.context = context;\r\n        path = new Path();\r\n        paint = new Paint();\r\n        paint.setAntiAlias(true);\r\n        paint.setColor(Color.BLACK);\r\n        paint.setStyle(Paint.Style.STROKE);\r\n        paint.setStrokeJoin(Paint.Join.ROUND);\r\n        paint.setStrokeWidth(4f);\r\n    }\r\n\r\n    public void changePenColor(String color) {\r\n        switch (color) {\r\n            case &quot;Black&quot;:\r\n                currentColor = Color.BLACK;\r\n                break;\r\n            case &quot;Brown&quot;:\r\n                currentColor = Color.rgb(79, 30, 14);\r\n                break;\r\n            case &quot;Blue&quot;:\r\n                currentColor = Color.BLUE;\r\n                break;\r\n            case &quot;Cyan&quot;:\r\n                currentColor = Color.CYAN;\r\n                break;\r\n            case &quot;Red&quot;:\r\n                currentColor = Color.RED;\r\n                break;\r\n            case &quot;Orange&quot;:\r\n                currentColor = Color.rgb(255, 165, 0);\r\n                break;\r\n            case &quot;Yellow&quot;:\r\n                currentColor = Color.YELLOW;\r\n                break;\r\n            case &quot;Dark Green&quot;:\r\n                currentColor = Color.rgb(0, 100, 0);\r\n                break;\r\n            case &quot;Light Green&quot;:\r\n                currentColor = Color.rgb(57, 252, 3);\r\n                break;\r\n            case &quot;Pink&quot;:\r\n                currentColor = Color.rgb(250, 10, 174);\r\n                break;\r\n            case &quot;Magenta&quot;:\r\n                currentColor = Color.rgb(212, 0, 255);\r\n                break;\r\n            case &quot;Purple&quot;:\r\n                currentColor = Color.rgb(128, 0, 128);\r\n                break;\r\n            case &quot;Eraser&quot;:\r\n                currentColor = Color.WHITE;\r\n                break;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\r\n        super.onSizeChanged(w, h, oldw, oldh);\r\n        bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\r\n        canvas = new Canvas(bitmap);\r\n    }\r\n\r\n    public void startTouch(float x, float y)\r\n    {\r\n//        path.reset();\r\n        path = new Path();\r\n        path.moveTo(x, y);\r\n        mX = x;\r\n        mY = y;\r\n\r\n        // Add new path to list of paths and their colors\r\n        paths.add(path);\r\n        colors.add(currentColor);\r\n    }\r\n\r\n    public void moveTouch(float x, float y)\r\n    {\r\n        float dx = Math.abs(x-mX);\r\n        float dy = Math.abs(y-mY);\r\n\r\n        if(dx &gt;= TOUCH_TOLERANCE || dy &gt;= TOUCH_TOLERANCE)\r\n        {\r\n            path.quadTo(mX, mY, (x+mX)/2, (y+mY)/2);\r\n            mX = x;\r\n            mY = y;\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    // Function to clear the canvas\r\n\r\n    public void clearCanvas()\r\n    {\r\n        paths.clear();\r\n        colors.clear(); // Clears all the colors from the array\r\n        bitmap.eraseColor(Color.TRANSPARENT);\r\n        invalidate();\r\n    }\r\n\r\n\r\n    // Functions for increasing and decreasing pen size\r\n    public void increasePenSize() {\r\n        float currentStrokeWidth = paint.getStrokeWidth();\r\n        float newStrokeWidth = currentStrokeWidth + 2f;\r\n        paint.setStrokeWidth(newStrokeWidth);\r\n    }\r\n\r\n    public void decreasePenSize() {\r\n        float currentStrokeWidth = paint.getStrokeWidth();\r\n        float newStrokeWidth = currentStrokeWidth - 2f;\r\n        paint.setStrokeWidth(newStrokeWidth);\r\n    }\r\n\r\n\r\n    // Text box function\r\n//    public void showTextBox() {\r\n//        // Create a new EditText object\r\n//        EditText textBox = new EditText(getContext());\r\n//\r\n//        // Set its layout parameters\r\n//        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(\r\n//                LinearLayout.LayoutParams.MATCH_PARENT,\r\n//                LinearLayout.LayoutParams.WRAP_CONTENT\r\n//        );\r\n//        textBox.setLayoutParams(params);\r\n//\r\n//        // Add the text box to the layout\r\n//        LinearLayout layout = findViewById(R.id.btn_text_layout); // Replace with the ID of your layout\r\n//        layout.addView(textBox);\r\n//    }\r\n\r\n    // Handles all color changes from this single method function\r\n    // Not being used right now\r\n//    public void setPenColor(int color) {\r\n//        paint.setColor(color);\r\n//    }\r\n\r\n\r\n    public void upTouch()\r\n    {\r\n        path.lineTo(mX, mY);\r\n    }\r\n\r\n    @Override\r\n    protected void onDraw(Canvas canvas) {\r\n        super.onDraw(canvas);\r\n        // Draw all paths with their respective colors\r\n        for (int i = 0; i &lt; paths.size(); i++) {\r\n            paint.setColor(colors.get(i));\r\n            canvas.drawPath(paths.get(i), paint);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean onTouchEvent(MotionEvent event) {\r\n        // Get the x and y coordinates of the touch event\r\n        float x = event.getX();\r\n        float y = event.getY();\r\n        // Check the action of the touch event\r\n        switch(event.getAction())\r\n        {\r\n            // If the touch event is a down action\r\n            case MotionEvent.ACTION_DOWN:\r\n                // Call the startTouch method and pass in the x and y coordinates\r\n                startTouch(x, y);\r\n                // Invalidate the view to trigger a redraw\r\n                invalidate();\r\n                break;\r\n            // If the touch event is a move action\r\n            case MotionEvent.ACTION_MOVE:\r\n                // Call the moveTouch method and pass in the x and y coordinates\r\n                moveTouch(x, y);\r\n                // Invalidate the view to trigger a redraw\r\n                invalidate();\r\n                break;\r\n            // If the touch event is an up action\r\n            case MotionEvent.ACTION_UP:\r\n                // Call the upTouch method\r\n                upTouch();\r\n                // Invalidate the view to trigger a redraw\r\n                invalidate();\r\n                break;\r\n        }\r\n        // Return true to indicate that the event was handled\r\n        return true;\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n\r\nI&#39;m expecting the increase and decrease functions to only affect what will be drawn, not what has already been drawn on the canvas. I&#39;m not sure why it is affecting everything on the canvas.","title":"Increase and Decrease functions also change the size of what was previously drawn. How do I fix this?","body":"<p>I'm designing a drawing app in Android Studio using Java. I have a '+' button and a '-' button in my activity_main.xml. Whenever I click on these buttons the size of the pen increases or decreases, but it also increases and decreases whatever I had already drawn on the canvas. This should not be happening, why is this happening?</p>\n<p>Code snippet of increase/decrease functions:</p>\n<pre><code>public void increasePenSize() {\n        float currentStrokeWidth = paint.getStrokeWidth();\n        float newStrokeWidth = currentStrokeWidth + 2f;\n        paint.setStrokeWidth(newStrokeWidth);\n    }\n\n    public void decreasePenSize() {\n        float currentStrokeWidth = paint.getStrokeWidth();\n        float newStrokeWidth = currentStrokeWidth - 2f;\n        paint.setStrokeWidth(newStrokeWidth);\n    }\n</code></pre>\n<p>Full code:</p>\n<pre><code>package com.example.sketch_1;\n\nimport android.content.Context;\nimport android.graphics.Bitmap;\nimport android.graphics.Canvas;\nimport android.graphics.Color;\nimport android.graphics.Paint;\nimport android.graphics.Path;\nimport android.util.AttributeSet;\nimport android.view.MotionEvent;\nimport android.view.View;\nimport android.widget.EditText;\nimport android.widget.LinearLayout;\n\nimport androidx.annotation.Nullable;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class CanvasView extends View\n{\n    Context context;\n    private int width, height;\n    private Bitmap bitmap;\n    private Paint paint;\n    private Path path;\n    private Canvas canvas;\n    private float mX, mY;\n    private static final float TOUCH_TOLERANCE = 4;\n\n\n    // Add variables to keep track of previous paths and their colors\n    private List&lt;Path&gt; paths = new ArrayList&lt;&gt;();\n    private List&lt;Integer&gt; colors = new ArrayList&lt;&gt;();\n    private int currentColor = Color.BLACK;\n    public CanvasView(Context context, @Nullable AttributeSet attrs) {\n        super(context, attrs);\n        this.context = context;\n        path = new Path();\n        paint = new Paint();\n        paint.setAntiAlias(true);\n        paint.setColor(Color.BLACK);\n        paint.setStyle(Paint.Style.STROKE);\n        paint.setStrokeJoin(Paint.Join.ROUND);\n        paint.setStrokeWidth(4f);\n    }\n\n    public void changePenColor(String color) {\n        switch (color) {\n            case &quot;Black&quot;:\n                currentColor = Color.BLACK;\n                break;\n            case &quot;Brown&quot;:\n                currentColor = Color.rgb(79, 30, 14);\n                break;\n            case &quot;Blue&quot;:\n                currentColor = Color.BLUE;\n                break;\n            case &quot;Cyan&quot;:\n                currentColor = Color.CYAN;\n                break;\n            case &quot;Red&quot;:\n                currentColor = Color.RED;\n                break;\n            case &quot;Orange&quot;:\n                currentColor = Color.rgb(255, 165, 0);\n                break;\n            case &quot;Yellow&quot;:\n                currentColor = Color.YELLOW;\n                break;\n            case &quot;Dark Green&quot;:\n                currentColor = Color.rgb(0, 100, 0);\n                break;\n            case &quot;Light Green&quot;:\n                currentColor = Color.rgb(57, 252, 3);\n                break;\n            case &quot;Pink&quot;:\n                currentColor = Color.rgb(250, 10, 174);\n                break;\n            case &quot;Magenta&quot;:\n                currentColor = Color.rgb(212, 0, 255);\n                break;\n            case &quot;Purple&quot;:\n                currentColor = Color.rgb(128, 0, 128);\n                break;\n            case &quot;Eraser&quot;:\n                currentColor = Color.WHITE;\n                break;\n        }\n    }\n\n    @Override\n    protected void onSizeChanged(int w, int h, int oldw, int oldh) {\n        super.onSizeChanged(w, h, oldw, oldh);\n        bitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);\n        canvas = new Canvas(bitmap);\n    }\n\n    public void startTouch(float x, float y)\n    {\n//        path.reset();\n        path = new Path();\n        path.moveTo(x, y);\n        mX = x;\n        mY = y;\n\n        // Add new path to list of paths and their colors\n        paths.add(path);\n        colors.add(currentColor);\n    }\n\n    public void moveTouch(float x, float y)\n    {\n        float dx = Math.abs(x-mX);\n        float dy = Math.abs(y-mY);\n\n        if(dx &gt;= TOUCH_TOLERANCE || dy &gt;= TOUCH_TOLERANCE)\n        {\n            path.quadTo(mX, mY, (x+mX)/2, (y+mY)/2);\n            mX = x;\n            mY = y;\n\n        }\n    }\n\n\n\n\n    // Function to clear the canvas\n\n    public void clearCanvas()\n    {\n        paths.clear();\n        colors.clear(); // Clears all the colors from the array\n        bitmap.eraseColor(Color.TRANSPARENT);\n        invalidate();\n    }\n\n\n    // Functions for increasing and decreasing pen size\n    public void increasePenSize() {\n        float currentStrokeWidth = paint.getStrokeWidth();\n        float newStrokeWidth = currentStrokeWidth + 2f;\n        paint.setStrokeWidth(newStrokeWidth);\n    }\n\n    public void decreasePenSize() {\n        float currentStrokeWidth = paint.getStrokeWidth();\n        float newStrokeWidth = currentStrokeWidth - 2f;\n        paint.setStrokeWidth(newStrokeWidth);\n    }\n\n\n    // Text box function\n//    public void showTextBox() {\n//        // Create a new EditText object\n//        EditText textBox = new EditText(getContext());\n//\n//        // Set its layout parameters\n//        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(\n//                LinearLayout.LayoutParams.MATCH_PARENT,\n//                LinearLayout.LayoutParams.WRAP_CONTENT\n//        );\n//        textBox.setLayoutParams(params);\n//\n//        // Add the text box to the layout\n//        LinearLayout layout = findViewById(R.id.btn_text_layout); // Replace with the ID of your layout\n//        layout.addView(textBox);\n//    }\n\n    // Handles all color changes from this single method function\n    // Not being used right now\n//    public void setPenColor(int color) {\n//        paint.setColor(color);\n//    }\n\n\n    public void upTouch()\n    {\n        path.lineTo(mX, mY);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n        // Draw all paths with their respective colors\n        for (int i = 0; i &lt; paths.size(); i++) {\n            paint.setColor(colors.get(i));\n            canvas.drawPath(paths.get(i), paint);\n        }\n    }\n\n    @Override\n    public boolean onTouchEvent(MotionEvent event) {\n        // Get the x and y coordinates of the touch event\n        float x = event.getX();\n        float y = event.getY();\n        // Check the action of the touch event\n        switch(event.getAction())\n        {\n            // If the touch event is a down action\n            case MotionEvent.ACTION_DOWN:\n                // Call the startTouch method and pass in the x and y coordinates\n                startTouch(x, y);\n                // Invalidate the view to trigger a redraw\n                invalidate();\n                break;\n            // If the touch event is a move action\n            case MotionEvent.ACTION_MOVE:\n                // Call the moveTouch method and pass in the x and y coordinates\n                moveTouch(x, y);\n                // Invalidate the view to trigger a redraw\n                invalidate();\n                break;\n            // If the touch event is an up action\n            case MotionEvent.ACTION_UP:\n                // Call the upTouch method\n                upTouch();\n                // Invalidate the view to trigger a redraw\n                invalidate();\n                break;\n        }\n        // Return true to indicate that the event was handled\n        return true;\n    }\n\n\n}\n</code></pre>\n<p>I'm expecting the increase and decrease functions to only affect what will be drawn, not what has already been drawn on the canvas. I'm not sure why it is affecting everything on the canvas.</p>\n"},{"tags":["java","spring","spring-boot","spring-oauth2"],"comments":[{"owner":{"account_id":346385,"reputation":5794,"user_id":679879,"accept_rate":90,"display_name":"Mustafa"},"score":0,"creation_date":1682364777,"post_id":76072048,"comment_id":134200643,"body_markdown":"What do you mean by &quot;manage this token&quot;? Do you mean refresh the token when it expires or cache it in memory so that you don&#39;t request a new one for every request?","body":"What do you mean by &quot;manage this token&quot;? Do you mean refresh the token when it expires or cache it in memory so that you don&#39;t request a new one for every request?"}],"owner":{"account_id":13970001,"reputation":1974,"user_id":10088866,"display_name":"Clyde Barrow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682363858,"creation_date":1682071013,"question_id":76072048,"body_markdown":"I have a spring boot app where I need to query an external api which is protected by the bearer token.\r\n\r\nFirst i need to query the auth api for the jwt token like \r\n```\r\nPOST https://some-external-api.com/api/auth/signin\r\n{\r\n\t&quot;username&quot;: &quot;MyApp&quot;,\r\n\t&quot;password&quot;: &quot;PASSWORD&quot;\r\n}\r\n```\r\nI receive a response like:\r\n```\r\n{\r\n\t&quot;access_token&quot;: &quot;eyJ....&quot;,\r\n\t&quot;token&quot;: &quot;eyJ....&quot;,\r\n\t&quot;validFrom&quot;: &quot;2023-04-21T09:16:50.000Z&quot;,\r\n\t&quot;validTo&quot;: &quot;2023-04-28T09:16:50.000Z&quot;,\r\n\t&quot;tokenType&quot;: &quot;bearer&quot;,\r\n\t&quot;expires&quot;: &quot;2023-04-28T09:16:50.000Z&quot;,\r\n\t&quot;token_type&quot;: &quot;bearer&quot;\r\n}\r\n```\r\nwhere `token` and `access_token` fields contain the same jwt token with a payload that looks like \r\n```\r\n{\r\n  &quot;unique_name&quot;: &quot;MyApp&quot;,\r\n  &quot;role&quot;: [\r\n    &quot;Reader&quot;,\r\n    &quot;MyApp&quot;\r\n  ],\r\n  &quot;nbf&quot;: 1682068610,\r\n  &quot;exp&quot;: 1682673410,\r\n  &quot;iat&quot;: 1682068610\r\n}\r\n```\r\nThen I am adding this jwt token to every request using a rest template interceptor. I&#39;d like to ask what&#39;s the best way to manage this token in spring - I don&#39;t want to implement my own token storage etc. I&#39;d like to use some ready solution.\r\n\r\nIn my app I have a similar code where the api is protected by the oauth2 and I use something like \r\n```\r\npublic class Oauth2AuthInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n    private final ClientRegistration clientRegistration;\r\n    private final OAuth2AuthorizedClientManager manager;\r\n\r\n    @Override\r\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n        final OAuth2AuthorizeRequest oAuth2AuthorizeRequest = OAuth2AuthorizeRequest\r\n            .withClientRegistrationId(clientRegistration.getRegistrationId())\r\n            .principal(&quot;myAppAuth&quot;)\r\n            .build();\r\n        final OAuth2AuthorizedClient client = manager.authorize(oAuth2AuthorizeRequest);\r\n        if (isNull(client)) {\r\n            throw new IllegalStateException(&quot;client credentials flow on &quot; + clientRegistration.getRegistrationId() + &quot; failed, client is null&quot;);\r\n        }\r\n        request.getHeaders().add(HttpHeaders.AUTHORIZATION, &quot;bearer &quot; + client.getAccessToken().getTokenValue());\r\n        return execution.execute(request, body);\r\n    }\r\n\r\n```\r\nIs it possible to customize this default oauth2 mechanism to be able to reuse it with my custom jwt auth endpoint ? ","title":"Spring - rest template authenticate each request with a custom jwt","body":"<p>I have a spring boot app where I need to query an external api which is protected by the bearer token.</p>\n<p>First i need to query the auth api for the jwt token like</p>\n<pre><code>POST https://some-external-api.com/api/auth/signin\n{\n    &quot;username&quot;: &quot;MyApp&quot;,\n    &quot;password&quot;: &quot;PASSWORD&quot;\n}\n</code></pre>\n<p>I receive a response like:</p>\n<pre><code>{\n    &quot;access_token&quot;: &quot;eyJ....&quot;,\n    &quot;token&quot;: &quot;eyJ....&quot;,\n    &quot;validFrom&quot;: &quot;2023-04-21T09:16:50.000Z&quot;,\n    &quot;validTo&quot;: &quot;2023-04-28T09:16:50.000Z&quot;,\n    &quot;tokenType&quot;: &quot;bearer&quot;,\n    &quot;expires&quot;: &quot;2023-04-28T09:16:50.000Z&quot;,\n    &quot;token_type&quot;: &quot;bearer&quot;\n}\n</code></pre>\n<p>where <code>token</code> and <code>access_token</code> fields contain the same jwt token with a payload that looks like</p>\n<pre><code>{\n  &quot;unique_name&quot;: &quot;MyApp&quot;,\n  &quot;role&quot;: [\n    &quot;Reader&quot;,\n    &quot;MyApp&quot;\n  ],\n  &quot;nbf&quot;: 1682068610,\n  &quot;exp&quot;: 1682673410,\n  &quot;iat&quot;: 1682068610\n}\n</code></pre>\n<p>Then I am adding this jwt token to every request using a rest template interceptor. I'd like to ask what's the best way to manage this token in spring - I don't want to implement my own token storage etc. I'd like to use some ready solution.</p>\n<p>In my app I have a similar code where the api is protected by the oauth2 and I use something like</p>\n<pre><code>public class Oauth2AuthInterceptor implements ClientHttpRequestInterceptor {\n\n    private final ClientRegistration clientRegistration;\n    private final OAuth2AuthorizedClientManager manager;\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        final OAuth2AuthorizeRequest oAuth2AuthorizeRequest = OAuth2AuthorizeRequest\n            .withClientRegistrationId(clientRegistration.getRegistrationId())\n            .principal(&quot;myAppAuth&quot;)\n            .build();\n        final OAuth2AuthorizedClient client = manager.authorize(oAuth2AuthorizeRequest);\n        if (isNull(client)) {\n            throw new IllegalStateException(&quot;client credentials flow on &quot; + clientRegistration.getRegistrationId() + &quot; failed, client is null&quot;);\n        }\n        request.getHeaders().add(HttpHeaders.AUTHORIZATION, &quot;bearer &quot; + client.getAccessToken().getTokenValue());\n        return execution.execute(request, body);\n    }\n\n</code></pre>\n<p>Is it possible to customize this default oauth2 mechanism to be able to reuse it with my custom jwt auth endpoint ?</p>\n"},{"tags":["java","classloader","obfuscation","decompiling","copy-protection"],"comments":[{"owner":{"account_id":76259,"reputation":17345,"user_id":218454,"accept_rate":75,"display_name":"nfechner"},"score":5,"creation_date":1315335439,"post_id":7324708,"comment_id":8830775,"body_markdown":"Write Open Source Software, and you wont have that problem. :-D","body":"Write Open Source Software, and you wont have that problem. :-D"},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1315335595,"post_id":7324708,"comment_id":8830814,"body_markdown":"possible duplicate of [(Why) should I use obfuscation?](http://stackoverflow.com/questions/31882/why-should-i-use-obfuscation)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/31882/why-should-i-use-obfuscation\">(Why) should I use obfuscation?</a>"},{"owner":{"display_name":"user177800"},"score":3,"creation_date":1315335635,"post_id":7324708,"comment_id":8830821,"body_markdown":"Write code worth paying for and those that will pay for it will pay, those that wouldn&#39;t pay anyway are not a concern.","body":"Write code worth paying for and those that will pay for it will pay, those that wouldn&#39;t pay anyway are not a concern."}],"answers":[{"tags":[],"owner":{"account_id":64344,"reputation":8352,"user_id":189992,"accept_rate":95,"display_name":"ssedano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1315336001,"creation_date":1315336001,"answer_id":7324837,"question_id":7324708,"body_markdown":"You can write all your code with in `native`. The reverse engineering can be done anyway. But is harder.\r\n\r\nOk, this is not a strictly java solution.\r\n\r\nAs nfechner said in a comment write open source application.","title":"What can be done to secure JAR files besides obfuscation?","body":"<p>You can write all your code with in <code>native</code>. The reverse engineering can be done anyway. But is harder.</p>\n\n<p>Ok, this is not a strictly java solution.</p>\n\n<p>As nfechner said in a comment write open source application.</p>\n"},{"comments":[{"owner":{"account_id":390557,"reputation":1327,"user_id":750703,"accept_rate":62,"display_name":"Pierre"},"score":0,"creation_date":1315339666,"post_id":7324869,"comment_id":8832035,"body_markdown":"We too had such a requirement by paranoid managment. The proposed solution is to go full web app instead of desktop. A thin client can be made from java if absolutely required but I personally spend the effort into a web 2.0 interface.","body":"We too had such a requirement by paranoid managment. The proposed solution is to go full web app instead of desktop. A thin client can be made from java if absolutely required but I personally spend the effort into a web 2.0 interface."},{"owner":{"account_id":8620,"reputation":22142,"user_id":15619,"accept_rate":91,"display_name":"Riduidel"},"score":0,"creation_date":1315384725,"post_id":7324869,"comment_id":8839927,"body_markdown":"@Pierre In our case, it was an advanced trading application, which required huge amounts of displays, totally unthinkable (from my Java/Swing developper history at least) using even the best HTML5 sub-technologies (I mean, even SVG at its best won&#39;t do the job, without even thinking about the browser ecosystem hell)","body":"@Pierre In our case, it was an advanced trading application, which required huge amounts of displays, totally unthinkable (from my Java/Swing developper history at least) using even the best HTML5 sub-technologies (I mean, even SVG at its best won&#39;t do the job, without even thinking about the browser ecosystem hell)"}],"tags":[],"owner":{"account_id":8620,"reputation":22142,"user_id":15619,"accept_rate":91,"display_name":"Riduidel"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1437428057,"creation_date":1315336185,"answer_id":7324869,"question_id":7324708,"body_markdown":"In a previous company we had such questions, mainly driven by management paranoia.\r\n\r\nFirst of all, you have to understand that absolute security is only a myth: As long as your program is run on untrusted hardware, it *can* be decompiled, no matter what language you use. The only thing you can change is the cost of an attacker to understand your software/algorithm/data.\r\n\r\nConcerning obfuscation: it can be considered a first level of protection, as it makes the Java code totally unreadable.  Good obfuscators like [ProGuard][1] use forbidden characters in variables/methods names, preventing execution of decompiled code. Now, one can consider it a good enough security measure, as decompiling code is *not* as simple as running Jad or other decompilers and having perfectly working Java code. However, it is possible to understand most of the algorithms exposed in such code (as _readable_ code is very different from _compilable_ code).\r\n\r\nAdditional security measures include:\r\n\r\n * Running sensitive code on a server by using some kind of web-service to send results and grab results (using REST/SOAP/YouNameIt)\r\n * Loading sensitive code from a remote server using HTTPS and (maybe) additional security layers.\r\n\r\nFrom those two security measures, I would honestly choose the first. Indeed, the second can be subverted by typical HTTPS attacks (man in the middle, logging proxies, and so on, ...), and has the *major* inconvenience of putting the code on untrusted hardware, which makes it possibly borrowable from there.\r\n\r\n\r\n  [1]: http://proguard.sourceforge.net/","title":"What can be done to secure JAR files besides obfuscation?","body":"<p>In a previous company we had such questions, mainly driven by management paranoia.</p>\n\n<p>First of all, you have to understand that absolute security is only a myth: As long as your program is run on untrusted hardware, it <em>can</em> be decompiled, no matter what language you use. The only thing you can change is the cost of an attacker to understand your software/algorithm/data.</p>\n\n<p>Concerning obfuscation: it can be considered a first level of protection, as it makes the Java code totally unreadable.  Good obfuscators like <a href=\"http://proguard.sourceforge.net/\" rel=\"nofollow noreferrer\">ProGuard</a> use forbidden characters in variables/methods names, preventing execution of decompiled code. Now, one can consider it a good enough security measure, as decompiling code is <em>not</em> as simple as running Jad or other decompilers and having perfectly working Java code. However, it is possible to understand most of the algorithms exposed in such code (as <em>readable</em> code is very different from <em>compilable</em> code).</p>\n\n<p>Additional security measures include:</p>\n\n<ul>\n<li>Running sensitive code on a server by using some kind of web-service to send results and grab results (using REST/SOAP/YouNameIt)</li>\n<li>Loading sensitive code from a remote server using HTTPS and (maybe) additional security layers.</li>\n</ul>\n\n<p>From those two security measures, I would honestly choose the first. Indeed, the second can be subverted by typical HTTPS attacks (man in the middle, logging proxies, and so on, ...), and has the <em>major</em> inconvenience of putting the code on untrusted hardware, which makes it possibly borrowable from there.</p>\n"},{"tags":[],"owner":{"account_id":43564,"reputation":3133,"user_id":127430,"display_name":"Dmitry Leskov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1316438372,"creation_date":1316438372,"answer_id":7471594,"question_id":7324708,"body_markdown":"Basically, there are four things you can do with your bytecode to protect it against Java decompilers:\r\n\r\n - obfuscation \r\n - software encryption\r\n - hardware encryption \r\n - native compilation\r\n\r\nall covered in my article &lt;a href=&quot;http://www.excelsior-usa.com/articles/java-obfuscators.html&quot;&gt;Protect Your Java Code - Through Obfuscators And Beyond&lt;/a&gt;","title":"What can be done to secure JAR files besides obfuscation?","body":"<p>Basically, there are four things you can do with your bytecode to protect it against Java decompilers:</p>\n\n<ul>\n<li>obfuscation </li>\n<li>software encryption</li>\n<li>hardware encryption </li>\n<li>native compilation</li>\n</ul>\n\n<p>all covered in my article <a href=\"http://www.excelsior-usa.com/articles/java-obfuscators.html\" rel=\"nofollow\">Protect Your Java Code - Through Obfuscators And Beyond</a></p>\n"}],"owner":{"account_id":893207,"reputation":141,"user_id":931088,"accept_rate":38,"display_name":"rainbower"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2801,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":3,"score":5,"last_activity_date":1682363579,"creation_date":1315335316,"question_id":7324708,"body_markdown":"I&#39;m concerned about the security of Java executables. They offer little protection against decompilation. With tools like Java Decompiler even a kid can decompile the class files to get the original code.\r\n\r\nApart from code obfuscation what can be done to protect a class file?  Is the Encrypted Class Loader still a myth?","title":"What can be done to secure JAR files besides obfuscation?","body":"<p>I'm concerned about the security of Java executables. They offer little protection against decompilation. With tools like Java Decompiler even a kid can decompile the class files to get the original code.</p>\n\n<p>Apart from code obfuscation what can be done to protect a class file?  Is the Encrypted Class Loader still a myth?</p>\n"},{"tags":["java","intellij-idea","javafx"],"answers":[{"comments":[{"owner":{"account_id":26864284,"reputation":1,"user_id":20447289,"display_name":"Mahmoud Hafez"},"score":0,"creation_date":1669035631,"post_id":74509833,"comment_id":131544287,"body_markdown":"Still same problem","body":"Still same problem"}],"tags":[],"owner":{"account_id":20832881,"reputation":63,"user_id":15301757,"display_name":"Jaster_Master"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668961170,"creation_date":1668961170,"answer_id":74509833,"question_id":74508102,"body_markdown":"Did you add the &quot;dependency&quot; tag of validatorfx to your &quot;pom.xml&quot;?\r\n\r\n    &lt;dependency&gt;\r\n     &lt;groupId&gt;net.synedra&lt;/groupId&gt;\r\n     &lt;artifactId&gt;validatorfx&lt;/artifactId&gt;\r\n     &lt;version&gt;0.4.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nI got the dependency from here: https://github.com/effad/ValidatorFX\r\n\r\nAfter that you have to reload your dependencies with the reload button that appears at the right top corner in your &quot;pom.xml&quot;.","title":"java: module not found: validatorfx IntellijIDEA","body":"<p>Did you add the &quot;dependency&quot; tag of validatorfx to your &quot;pom.xml&quot;?</p>\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;net.synedra&lt;/groupId&gt;\n &lt;artifactId&gt;validatorfx&lt;/artifactId&gt;\n &lt;version&gt;0.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I got the dependency from here: <a href=\"https://github.com/effad/ValidatorFX\" rel=\"nofollow noreferrer\">https://github.com/effad/ValidatorFX</a></p>\n<p>After that you have to reload your dependencies with the reload button that appears at the right top corner in your &quot;pom.xml&quot;.</p>\n"},{"tags":[],"owner":{"account_id":26926168,"reputation":1,"user_id":20499424,"display_name":"Oleg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682363151,"creation_date":1682363151,"answer_id":76095275,"question_id":74508102,"body_markdown":"In the file `module-info.java` you can change `requires validatorfx;` on\r\n\r\n    requires net.synedra.validatorfx;\r\n\r\nIt helped me.\r\nIt&#39;s an answer from Keith Pyle \r\nhttps://intellij-support.jetbrains.com/hc/en-us/community/posts/4404712032146-Gradle-and-Modules-not-working-","title":"java: module not found: validatorfx IntellijIDEA","body":"<p>In the file <code>module-info.java</code> you can change <code>requires validatorfx;</code> on</p>\n<pre><code>requires net.synedra.validatorfx;\n</code></pre>\n<p>It helped me.\nIt's an answer from Keith Pyle\n<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/4404712032146-Gradle-and-Modules-not-working-\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/4404712032146-Gradle-and-Modules-not-working-</a></p>\n"}],"owner":{"account_id":26864284,"reputation":1,"user_id":20447289,"display_name":"Mahmoud Hafez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1723,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1682363151,"creation_date":1668947447,"question_id":74508102,"body_markdown":"it&#39;s my First Time working on JavaFX project with IntelliJ IDEA, so I&#39;m facing this problem when Running Project\r\n\r\nit Shows Error Message (java: module not found: validatorfx) \r\n\r\nNote: My Java Version [java version &quot;19.0.1&quot; 2022-10-18]\r\n\r\n[enter image description here](https://i.stack.imgur.com/mRqSV.jpg)\r\n\r\ni already searched for Solution and can&#39;t Fixed the problem .. \r\n\r\nPlease note iam just beginner :) !","title":"java: module not found: validatorfx IntellijIDEA","body":"<p>it's my First Time working on JavaFX project with IntelliJ IDEA, so I'm facing this problem when Running Project</p>\n<p>it Shows Error Message (java: module not found: validatorfx)</p>\n<p>Note: My Java Version [java version &quot;19.0.1&quot; 2022-10-18]</p>\n<p><a href=\"https://i.stack.imgur.com/mRqSV.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>i already searched for Solution and can't Fixed the problem ..</p>\n<p>Please note iam just beginner :) !</p>\n"},{"tags":["java","button","jframe","mouselistener"],"comments":[{"owner":{"account_id":12446642,"reputation":81,"user_id":9062663,"accept_rate":100,"display_name":"CameronCoob"},"score":0,"creation_date":1512575358,"post_id":47678248,"comment_id":82315611,"body_markdown":"Noticed that i forgot to delete \nMyMouseListener myMouseListener=new MyMouseListener();","body":"Noticed that i forgot to delete  MyMouseListener myMouseListener=new MyMouseListener();"},{"owner":{"account_id":12446642,"reputation":81,"user_id":9062663,"accept_rate":100,"display_name":"CameronCoob"},"score":0,"creation_date":1512575383,"post_id":47678248,"comment_id":82315629,"body_markdown":"so nevermind it","body":"so nevermind it"}],"answers":[{"comments":[{"owner":{"account_id":12446642,"reputation":81,"user_id":9062663,"accept_rate":100,"display_name":"CameronCoob"},"score":1,"creation_date":1512577506,"post_id":47678710,"comment_id":82317066,"body_markdown":"It helped me so much:) I thought about something like this but my friends did as well as i and  they didnt face problem like this so i was confused) Maybe our codes not so similar as i thought","body":"It helped me so much:) I thought about something like this but my friends did as well as i and  they didnt face problem like this so i was confused) Maybe our codes not so similar as i thought"}],"tags":[],"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1512576569,"creation_date":1512576569,"answer_id":47678710,"question_id":47678248,"body_markdown":"This is one of the rare cases where you don&#39;t want your panel to have a layout manager, since you need absolute positioning.\r\n\r\n`JPanel` has a default layout manager which is a `FlowLayout`, and your call to `setLocation` will only have a temporary effect until the panel revalidates its content and places things where they were supposed to be initially.\r\n\r\nSee the following example with comments, it should give you the general idea :\r\n\r\n\r\n    public class Window extends JFrame {\r\n        private final JLabel statusBar;\r\n        private final JPanel mainPanel, statusBarPanel;\r\n        JButton button;\r\n    \r\n        public Window() {\r\n            super(&quot;Window&quot;);\r\n            setSize(400, 600);\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            mainPanel = new JPanel();\r\n            mainPanel.setLayout(null);// no layout for absolute positioning\r\n            statusBarPanel = new JPanel();\r\n            statusBar = new JLabel(&quot;Coords: &quot;);\r\n            add(statusBarPanel, BorderLayout.SOUTH);\r\n            add(mainPanel, BorderLayout.CENTER);\r\n            mainPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));\r\n            statusBarPanel.add(statusBar, BorderLayout.CENTER);\r\n            button = new JButton(&quot;Default text&quot;);\r\n    \r\n            // place the button &quot;manually&quot;\r\n            button.setBounds((int) (400 - button.getPreferredSize().getWidth()) / 2, 0,\r\n                    (int) button.getPreferredSize().getWidth(),\r\n                    (int) button.getPreferredSize().getHeight());\r\n            mainPanel.add(button);\r\n    \r\n            mainPanel.addMouseMotionListener(new MouseMotionAdapter() {\r\n                @Override\r\n                public void mouseMoved(final MouseEvent e) {\r\n                    super.mouseMoved(e);\r\n                    statusBar.setText(&quot;Coords: (&quot; + e.getX() + &quot;:&quot; + e.getY() + &quot;)&quot;);\r\n                }\r\n            });\r\n            mainPanel.addMouseListener(new MouseAdapter() {\r\n                @Override\r\n                public void mouseClicked(final MouseEvent e) {\r\n                    super.mouseClicked(e);\r\n                    button.setLocation((int) (e.getX() - button.getPreferredSize().getWidth() / 2),\r\n                            (int) (e.getY() - button.getPreferredSize().getHeight() / 2));\r\n    \r\n    \r\n                }\r\n            });\r\n            mainPanel.setFocusable(true);\r\n            setVisible(true);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n","title":"Move button on JFrame Java","body":"<p>This is one of the rare cases where you don't want your panel to have a layout manager, since you need absolute positioning.</p>\n\n<p><code>JPanel</code> has a default layout manager which is a <code>FlowLayout</code>, and your call to <code>setLocation</code> will only have a temporary effect until the panel revalidates its content and places things where they were supposed to be initially.</p>\n\n<p>See the following example with comments, it should give you the general idea :</p>\n\n<pre><code>public class Window extends JFrame {\n    private final JLabel statusBar;\n    private final JPanel mainPanel, statusBarPanel;\n    JButton button;\n\n    public Window() {\n        super(\"Window\");\n        setSize(400, 600);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        mainPanel = new JPanel();\n        mainPanel.setLayout(null);// no layout for absolute positioning\n        statusBarPanel = new JPanel();\n        statusBar = new JLabel(\"Coords: \");\n        add(statusBarPanel, BorderLayout.SOUTH);\n        add(mainPanel, BorderLayout.CENTER);\n        mainPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));\n        statusBarPanel.add(statusBar, BorderLayout.CENTER);\n        button = new JButton(\"Default text\");\n\n        // place the button \"manually\"\n        button.setBounds((int) (400 - button.getPreferredSize().getWidth()) / 2, 0,\n                (int) button.getPreferredSize().getWidth(),\n                (int) button.getPreferredSize().getHeight());\n        mainPanel.add(button);\n\n        mainPanel.addMouseMotionListener(new MouseMotionAdapter() {\n            @Override\n            public void mouseMoved(final MouseEvent e) {\n                super.mouseMoved(e);\n                statusBar.setText(\"Coords: (\" + e.getX() + \":\" + e.getY() + \")\");\n            }\n        });\n        mainPanel.addMouseListener(new MouseAdapter() {\n            @Override\n            public void mouseClicked(final MouseEvent e) {\n                super.mouseClicked(e);\n                button.setLocation((int) (e.getX() - button.getPreferredSize().getWidth() / 2),\n                        (int) (e.getY() - button.getPreferredSize().getHeight() / 2));\n\n\n            }\n        });\n        mainPanel.setFocusable(true);\n        setVisible(true);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":12446642,"reputation":81,"user_id":9062663,"accept_rate":100,"display_name":"CameronCoob"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1538,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":47678710,"answer_count":1,"score":2,"last_activity_date":1682362817,"creation_date":1512575220,"question_id":47678248,"body_markdown":"I have a task to make an application which will do the following:\r\n\r\n- If I move a mouse the coordinates should be shown on the status bar\r\n- If mouse is clicked then the only one button which is on a JPanel should move to coordinates of click\r\n\r\nSo the problem is that when I do mouse click - it&#39;s fine, button moves to coordinates of click, but when I start moving mouse the button comes back to the original position.\r\n\r\n```\r\n    public class Window extends JFrame {\r\n        private JLabel statusBar;\r\n        private JPanel mainPanel, statusBarPanel;\r\n        JButton button;\r\n        public Window()\r\n        {\r\n            super(&quot;Window&quot;);\r\n            setSize(400,600);\r\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            mainPanel=new JPanel();\r\n            statusBarPanel = new JPanel();\r\n            statusBar=new JLabel(&quot;Coords: &quot;);\r\n            add(statusBarPanel, BorderLayout.SOUTH);\r\n            add(mainPanel,BorderLayout.CENTER);\r\n            mainPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));\r\n            statusBarPanel.add(statusBar,BorderLayout.CENTER);\r\n            button = new JButton(&quot;Default text&quot;);\r\n            mainPanel.add(button);\r\n            MyMouseListener myMouseListener=new MyMouseListener();\r\n            mainPanel.addMouseMotionListener(new MouseMotionAdapter() {\r\n                @Override\r\n                public void mouseMoved(MouseEvent e) {\r\n                    super.mouseMoved(e);\r\n                    statusBar.setText(&quot;Coords: (&quot;+e.getX()+&quot;:&quot;+e.getY()+&quot;)&quot;);\r\n                }\r\n            });\r\n            mainPanel.addMouseListener(new MouseAdapter() {\r\n                @Override\r\n                public void mouseClicked(MouseEvent e) {\r\n                    super.mouseClicked(e);\r\n                    button.setLocation(e.getX()-button.getWidth()/2,e.getY()-button.getHeight()/2);\r\n                }\r\n            });\r\n            mainPanel.setFocusable(true);\r\n            setVisible(true);\r\n        }\r\n    }\r\n```","title":"Move button on JFrame Java","body":"<p>I have a task to make an application which will do the following:</p>\n<ul>\n<li>If I move a mouse the coordinates should be shown on the status bar</li>\n<li>If mouse is clicked then the only one button which is on a JPanel should move to coordinates of click</li>\n</ul>\n<p>So the problem is that when I do mouse click - it's fine, button moves to coordinates of click, but when I start moving mouse the button comes back to the original position.</p>\n<pre><code>    public class Window extends JFrame {\n        private JLabel statusBar;\n        private JPanel mainPanel, statusBarPanel;\n        JButton button;\n        public Window()\n        {\n            super(&quot;Window&quot;);\n            setSize(400,600);\n            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            mainPanel=new JPanel();\n            statusBarPanel = new JPanel();\n            statusBar=new JLabel(&quot;Coords: &quot;);\n            add(statusBarPanel, BorderLayout.SOUTH);\n            add(mainPanel,BorderLayout.CENTER);\n            mainPanel.setBorder(new BevelBorder(BevelBorder.LOWERED));\n            statusBarPanel.add(statusBar,BorderLayout.CENTER);\n            button = new JButton(&quot;Default text&quot;);\n            mainPanel.add(button);\n            MyMouseListener myMouseListener=new MyMouseListener();\n            mainPanel.addMouseMotionListener(new MouseMotionAdapter() {\n                @Override\n                public void mouseMoved(MouseEvent e) {\n                    super.mouseMoved(e);\n                    statusBar.setText(&quot;Coords: (&quot;+e.getX()+&quot;:&quot;+e.getY()+&quot;)&quot;);\n                }\n            });\n            mainPanel.addMouseListener(new MouseAdapter() {\n                @Override\n                public void mouseClicked(MouseEvent e) {\n                    super.mouseClicked(e);\n                    button.setLocation(e.getX()-button.getWidth()/2,e.getY()-button.getHeight()/2);\n                }\n            });\n            mainPanel.setFocusable(true);\n            setVisible(true);\n        }\n    }\n</code></pre>\n"},{"tags":["java","spring","sqlite","jpa","dialect"],"answers":[{"tags":[],"owner":{"account_id":22392775,"reputation":29,"user_id":16604539,"display_name":"Vishal "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682362665,"creation_date":1682362665,"answer_id":76095203,"question_id":75361292,"body_markdown":"Use the hibernate community dialects [Hibernate ORM Hibernate Community Dialects for sql dialect git][1]. \r\nYou don&#39;t need to create any dialect for that. just add this dependency\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-community-dialects --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\r\n        &lt;version&gt;6.2.1.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/blob/main/hibernate-community-dialects/src/main/java/org/hibernate/community/dialect/SQLiteDialect.java","title":"i cant connect springboot and sqlite","body":"<p>Use the hibernate community dialects <a href=\"https://github.com/hibernate/hibernate-orm/blob/main/hibernate-community-dialects/src/main/java/org/hibernate/community/dialect/SQLiteDialect.java\" rel=\"nofollow noreferrer\">Hibernate ORM Hibernate Community Dialects for sql dialect git</a>.\nYou don't need to create any dialect for that. just add this dependency</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!-- https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-community-dialects --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\n    &lt;version&gt;6.2.1.Final&lt;/version&gt;\n&lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":24696653,"reputation":71,"user_id":18588529,"display_name":"Mehti Sadixov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682362665,"creation_date":1675686330,"question_id":75361292,"body_markdown":"I can&#39;t connect SQLite database with spring boot. I read a lot about it and learned that a dialect should be written for SQLite. I write the dialect, but when I write registerColumnType, it gives me an error: Cannot resolve method &#39;registerColumnType&#39; in &#39;SQLiteDialect&#39;. please help me\r\nmy pom.xml: \r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.examDemo&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;exam&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n\t&lt;name&gt;exam&lt;/name&gt;\r\n\t&lt;description&gt;exam Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;19&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n&lt;!--\t\t&lt;dependency&gt;--&gt;\r\n&lt;!--\t\t\t&lt;groupId&gt;com.github.gwenn&lt;/groupId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;artifactId&gt;sqlite-dialect&lt;/artifactId&gt;--&gt;\r\n&lt;!--\t\t\t&lt;version&gt;0.1.0&lt;/version&gt;--&gt;\r\n&lt;!--\t\t&lt;/dependency&gt;--&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.xerial&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.16.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;6.1.6.Final&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\nmy SQLiteDialect : \r\n\r\n```\r\npackage com.examDemo.exam.dialect;\r\nimport org.hibernate.dialect.Dialect;\r\nimport org.hibernate.dialect.function.StandardSQLFunction;\r\n\r\nimport java.sql.*;\r\n\r\npublic class SQLiteDialect extends Dialect {\r\n\tpublic SQLiteDialect() {\r\n\t\tregisterColumnType(Types.BIT, &quot;integer&quot;);\r\n\t\tregisterColumnType(Types.TINYINT, &quot;tinyint&quot;);\r\n\t\tregisterColumnType(Types.SMALLINT, &quot;smallint&quot;);\r\n\t\tregisterColumnType(Types.INTEGER, &quot;integer&quot;);\r\n\t\tregisterColumnType(Types.BIGINT, &quot;bigint&quot;);\r\n\t\tregisterColumnType(Types.FLOAT, &quot;float&quot;);\r\n\t\tregisterColumnType(Types.REAL, &quot;real&quot;);\r\n\t\tregisterColumnType(Types.DOUBLE, &quot;double&quot;);\r\n\t\tregisterColumnType(Types.NUMERIC, &quot;numeric&quot;);\r\n\t\tregisterColumnType(Types.DECIMAL, &quot;decimal&quot;);\r\n\t\tregisterColumnType(Types.CHAR, &quot;char&quot;);\r\n\t\tregisterColumnType(Types.VARCHAR, &quot;varchar&quot;);\r\n\t\tregisterColumnType(Types.LONGVARCHAR, &quot;longvarchar&quot;);\r\n\t\tregisterColumnType(Types.DATE, &quot;date&quot;);\r\n\t\tregisterColumnType(Types.TIME, &quot;time&quot;);\r\n\t\tregisterColumnType(Types.TIMESTAMP, &quot;timestamp&quot;);\r\n\t\tregisterColumnType(Types.BINARY, &quot;blob&quot;);\r\n\t\tregisterColumnType(Types.VARBINARY, &quot;blob&quot;);\r\n\t\tregisterColumnType(Types.LONGVARBINARY, &quot;blob&quot;);\r\n\t\t// registerColumnType(Types.NULL, &quot;null&quot;);\r\n\t\tregisterColumnType(Types.BLOB, &quot;blob&quot;);\r\n\t\tregisterColumnType(Types.CLOB, &quot;clob&quot;);\r\n\t\tregisterColumnType(Types.BOOLEAN, &quot;integer&quot;);\r\n\r\n\t\tregisterKeyword(&quot;concat&quot;, new VarArgsSQLFunction(StringType.INSTANCE, &quot;&quot;, &quot;||&quot;, &quot;&quot;));\r\n\t\tregisterKeyword(&quot;mod&quot;, new SQLFunctionTemplate(StringType.INSTANCE, &quot;?1 % ?2&quot;));\r\n\t\tregisterKeyword(&quot;substr&quot;, new StandardSQLFunction(&quot;substr&quot;, StringType.INSTANCE));\r\n\t\tregisterKeyword(&quot;substring&quot;, new StandardSQLFunction(&quot;substr&quot;, StringType.INSTANCE));\r\n\t}\r\n\r\n\tpublic boolean supportsIdentityColumns() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean hasDataTypeInIdentityColumn() {\r\n\t\treturn false; // As specify in NHibernate dialect\r\n\t}\r\n\r\n\tpublic String getIdentityColumnString() {\r\n\t\t// return &quot;integer primary key autoincrement&quot;;\r\n\t\treturn &quot;integer&quot;;\r\n\t}\r\n\r\n\tpublic String getIdentitySelectString() {\r\n\t\treturn &quot;select last_insert_rowid()&quot;;\r\n\t}\r\n\r\n\tpublic boolean supportsLimit() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprotected String getLimitString(String query, boolean hasOffset) {\r\n\t\treturn new StringBuffer(query.length() + 20).append(query).append(hasOffset ? &quot; limit ? offset ?&quot; : &quot; limit ?&quot;)\r\n\t\t\t\t.toString();\r\n\t}\r\n\r\n\tpublic boolean supportsTemporaryTables() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic String getCreateTemporaryTableString() {\r\n\t\treturn &quot;create temporary table if not exists&quot;;\r\n\t}\r\n\r\n\tpublic boolean dropTemporaryTableAfterUse() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic boolean supportsCurrentTimestampSelection() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean isCurrentTimestampSelectStringCallable() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic String getCurrentTimestampSelectString() {\r\n\t\treturn &quot;select current_timestamp&quot;;\r\n\t}\r\n\r\n\tpublic boolean supportsUnionAll() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean hasAlterTable() {\r\n\t\treturn false; // As specify in NHibernate dialect\r\n\t}\r\n\r\n\tpublic boolean dropConstraints() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic String getAddColumnString() {\r\n\t\treturn &quot;add column&quot;;\r\n\t}\r\n\r\n\tpublic String getForUpdateString() {\r\n\t\treturn &quot;&quot;;\r\n\t}\r\n\r\n\tpublic boolean supportsOuterJoinForUpdate() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic String getDropForeignKeyString() {\r\n\t\tthrow new UnsupportedOperationException(&quot;No drop foreign key syntax supported by SQLiteDialect&quot;);\r\n\t}\r\n\r\n\tpublic String getAddForeignKeyConstraintString(String constraintName, String[] foreignKey, String referencedTable,\r\n\t                                               String[] primaryKey, boolean referencesPrimaryKey) {\r\n\t\tthrow new UnsupportedOperationException(&quot;No add foreign key syntax supported by SQLiteDialect&quot;);\r\n\t}\r\n\r\n\tpublic String getAddPrimaryKeyConstraintString(String constraintName) {\r\n\t\tthrow new UnsupportedOperationException(&quot;No add primary key syntax supported by SQLiteDialect&quot;);\r\n\t}\r\n\r\n\tpublic boolean supportsIfExistsBeforeTableName() {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic boolean supportsCascadeDelete() {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI checked many things. and I have watched many videos but no one has encountered this problem unfortunately","title":"i cant connect springboot and sqlite","body":"<p>I can't connect SQLite database with spring boot. I read a lot about it and learned that a dialect should be written for SQLite. I write the dialect, but when I write registerColumnType, it gives me an error: Cannot resolve method 'registerColumnType' in 'SQLiteDialect'. please help me\nmy pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.examDemo&lt;/groupId&gt;\n    &lt;artifactId&gt;exam&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n    &lt;name&gt;exam&lt;/name&gt;\n    &lt;description&gt;exam Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jdbc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;com.github.gwenn&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;sqlite-dialect&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;version&gt;0.1.0&lt;/version&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.xerial&lt;/groupId&gt;\n            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.16.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-community-dialects&lt;/artifactId&gt;\n            &lt;version&gt;6.1.6.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>my SQLiteDialect :</p>\n<pre><code>package com.examDemo.exam.dialect;\nimport org.hibernate.dialect.Dialect;\nimport org.hibernate.dialect.function.StandardSQLFunction;\n\nimport java.sql.*;\n\npublic class SQLiteDialect extends Dialect {\n    public SQLiteDialect() {\n        registerColumnType(Types.BIT, &quot;integer&quot;);\n        registerColumnType(Types.TINYINT, &quot;tinyint&quot;);\n        registerColumnType(Types.SMALLINT, &quot;smallint&quot;);\n        registerColumnType(Types.INTEGER, &quot;integer&quot;);\n        registerColumnType(Types.BIGINT, &quot;bigint&quot;);\n        registerColumnType(Types.FLOAT, &quot;float&quot;);\n        registerColumnType(Types.REAL, &quot;real&quot;);\n        registerColumnType(Types.DOUBLE, &quot;double&quot;);\n        registerColumnType(Types.NUMERIC, &quot;numeric&quot;);\n        registerColumnType(Types.DECIMAL, &quot;decimal&quot;);\n        registerColumnType(Types.CHAR, &quot;char&quot;);\n        registerColumnType(Types.VARCHAR, &quot;varchar&quot;);\n        registerColumnType(Types.LONGVARCHAR, &quot;longvarchar&quot;);\n        registerColumnType(Types.DATE, &quot;date&quot;);\n        registerColumnType(Types.TIME, &quot;time&quot;);\n        registerColumnType(Types.TIMESTAMP, &quot;timestamp&quot;);\n        registerColumnType(Types.BINARY, &quot;blob&quot;);\n        registerColumnType(Types.VARBINARY, &quot;blob&quot;);\n        registerColumnType(Types.LONGVARBINARY, &quot;blob&quot;);\n        // registerColumnType(Types.NULL, &quot;null&quot;);\n        registerColumnType(Types.BLOB, &quot;blob&quot;);\n        registerColumnType(Types.CLOB, &quot;clob&quot;);\n        registerColumnType(Types.BOOLEAN, &quot;integer&quot;);\n\n        registerKeyword(&quot;concat&quot;, new VarArgsSQLFunction(StringType.INSTANCE, &quot;&quot;, &quot;||&quot;, &quot;&quot;));\n        registerKeyword(&quot;mod&quot;, new SQLFunctionTemplate(StringType.INSTANCE, &quot;?1 % ?2&quot;));\n        registerKeyword(&quot;substr&quot;, new StandardSQLFunction(&quot;substr&quot;, StringType.INSTANCE));\n        registerKeyword(&quot;substring&quot;, new StandardSQLFunction(&quot;substr&quot;, StringType.INSTANCE));\n    }\n\n    public boolean supportsIdentityColumns() {\n        return true;\n    }\n\n    public boolean hasDataTypeInIdentityColumn() {\n        return false; // As specify in NHibernate dialect\n    }\n\n    public String getIdentityColumnString() {\n        // return &quot;integer primary key autoincrement&quot;;\n        return &quot;integer&quot;;\n    }\n\n    public String getIdentitySelectString() {\n        return &quot;select last_insert_rowid()&quot;;\n    }\n\n    public boolean supportsLimit() {\n        return true;\n    }\n\n    protected String getLimitString(String query, boolean hasOffset) {\n        return new StringBuffer(query.length() + 20).append(query).append(hasOffset ? &quot; limit ? offset ?&quot; : &quot; limit ?&quot;)\n                .toString();\n    }\n\n    public boolean supportsTemporaryTables() {\n        return true;\n    }\n\n    public String getCreateTemporaryTableString() {\n        return &quot;create temporary table if not exists&quot;;\n    }\n\n    public boolean dropTemporaryTableAfterUse() {\n        return false;\n    }\n\n    public boolean supportsCurrentTimestampSelection() {\n        return true;\n    }\n\n    public boolean isCurrentTimestampSelectStringCallable() {\n        return false;\n    }\n\n    public String getCurrentTimestampSelectString() {\n        return &quot;select current_timestamp&quot;;\n    }\n\n    public boolean supportsUnionAll() {\n        return true;\n    }\n\n    public boolean hasAlterTable() {\n        return false; // As specify in NHibernate dialect\n    }\n\n    public boolean dropConstraints() {\n        return false;\n    }\n\n    public String getAddColumnString() {\n        return &quot;add column&quot;;\n    }\n\n    public String getForUpdateString() {\n        return &quot;&quot;;\n    }\n\n    public boolean supportsOuterJoinForUpdate() {\n        return false;\n    }\n\n    public String getDropForeignKeyString() {\n        throw new UnsupportedOperationException(&quot;No drop foreign key syntax supported by SQLiteDialect&quot;);\n    }\n\n    public String getAddForeignKeyConstraintString(String constraintName, String[] foreignKey, String referencedTable,\n                                                   String[] primaryKey, boolean referencesPrimaryKey) {\n        throw new UnsupportedOperationException(&quot;No add foreign key syntax supported by SQLiteDialect&quot;);\n    }\n\n    public String getAddPrimaryKeyConstraintString(String constraintName) {\n        throw new UnsupportedOperationException(&quot;No add primary key syntax supported by SQLiteDialect&quot;);\n    }\n\n    public boolean supportsIfExistsBeforeTableName() {\n        return true;\n    }\n\n    public boolean supportsCascadeDelete() {\n        return false;\n    }\n}\n\n</code></pre>\n<p>I checked many things. and I have watched many videos but no one has encountered this problem unfortunately</p>\n"},{"tags":["java","mysql","json","spring","spring-data-jpa"],"owner":{"account_id":3051726,"reputation":1,"user_id":2586129,"display_name":"Professor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682362548,"creation_date":1682360218,"question_id":76094914,"body_markdown":"I have a field, metadata in a given entity. I need to keep the type of this field as json in mysql. I am facing trouble mapping this column to entity attribute. I&#39;ve kept the data type to String in java DTO. But the problem is while creating a resource using POST - I need to pass the escape characters before double quotes(&quot;). Please help me in getting rid of those escape characters. In response - I am able to remove them via @JsonRawProperty.\r\n\r\n\r\nSo far I&#39;ve tried this:\r\n\r\n```\r\n@Entity\r\n@Table(name=&quot;Sample&quot;)\r\npublic class Sample\r\n{  \r\n    @Column(name = &quot;properties&quot;,columnDefinition = &quot;json&quot;)\r\n    @JsonRawProperty\r\n    private String properties;\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n}\r\n\r\nWith this - this works but I need to pass the json as string with escape characters in post request like this :\r\n\r\n{\r\n    &quot;name&quot;: &quot;test&quot;,\r\n    &quot;properties&quot;: &quot;{\\&quot;key\\&quot;:\\&quot;value\\&quot;},\r\n}\r\n\r\n```","title":"Map mysql Json field to Entity column in spring data jpa","body":"<p>I have a field, metadata in a given entity. I need to keep the type of this field as json in mysql. I am facing trouble mapping this column to entity attribute. I've kept the data type to String in java DTO. But the problem is while creating a resource using POST - I need to pass the escape characters before double quotes(&quot;). Please help me in getting rid of those escape characters. In response - I am able to remove them via @JsonRawProperty.</p>\n<p>So far I've tried this:</p>\n<pre><code>@Entity\n@Table(name=&quot;Sample&quot;)\npublic class Sample\n{  \n    @Column(name = &quot;properties&quot;,columnDefinition = &quot;json&quot;)\n    @JsonRawProperty\n    private String properties;\n    @Column(name = &quot;name&quot;)\n    private String name;\n}\n\nWith this - this works but I need to pass the json as string with escape characters in post request like this :\n\n{\n    &quot;name&quot;: &quot;test&quot;,\n    &quot;properties&quot;: &quot;{\\&quot;key\\&quot;:\\&quot;value\\&quot;},\n}\n\n</code></pre>\n"},{"tags":["java","apache-httpclient-4.x","java-17"],"comments":[{"owner":{"account_id":4165403,"reputation":878,"user_id":3414468,"accept_rate":50,"display_name":"Man&#231;aux Pierre-Alexandre"},"score":0,"creation_date":1682462302,"post_id":76094751,"comment_id":134219154,"body_markdown":"Do you have a finally block in call method that close the response and close the httpclient connection? \nIf yes can you post the entire method?","body":"Do you have a finally block in call method that close the response and close the httpclient connection?  If yes can you post the entire method?"}],"owner":{"account_id":1541447,"reputation":291,"user_id":1435998,"accept_rate":70,"display_name":"Belos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682362166,"creation_date":1682358810,"question_id":76094751,"body_markdown":"Code:\r\n\r\n    public static String stringFromHttpResponse(HttpResponse response) throws IOException {\r\n    \tif (isStatusOk(response.getStatusLine().getStatusCode())) {\r\n    \t\tHttpEntity entity = response.getEntity();\r\n    \t\tif (entity != null) {\r\n    \t\t\treturn EntityUtils.toString(entity);\r\n    \t\t} else {\r\n    \t\t\tthrow new IOException(&quot;HttpResponse has a null entity&quot;);\r\n    \t\t}\r\n    \t} else {\r\n    \t\tString err = String.format(&quot;HttpResponse status code is not Ok(code=%s, reason=%s)&quot;,\r\n    \t\t\t\tresponse.getStatusLine().getStatusCode(), response.getStatusLine().getReasonPhrase());\r\n    \t\tthrow new IOException(err);\r\n    \t}\r\n    }\r\n\r\nOutput from jstack:\r\n\r\n     &quot;main&quot; #1 prio=5 os_prio=0 cpu=8114.46ms elapsed=1102.01s tid=0x00007f897c0256e0 nid=0x66a6 runnable  [0x00007f89830a1000]\r\n       java.lang.Thread.State: RUNNABLE\r\n            at sun.nio.ch.SocketDispatcher.read0(java.base@17.0.2/Native Method)\r\n            at sun.nio.ch.SocketDispatcher.read(java.base@17.0.2/SocketDispatcher.java:47)\r\n            at sun.nio.ch.NioSocketImpl.tryRead(java.base@17.0.2/NioSocketImpl.java:261)\r\n            at sun.nio.ch.NioSocketImpl.implRead(java.base@17.0.2/NioSocketImpl.java:312)\r\n            at sun.nio.ch.NioSocketImpl.read(java.base@17.0.2/NioSocketImpl.java:350)\r\n            at sun.nio.ch.NioSocketImpl$1.read(java.base@17.0.2/NioSocketImpl.java:803)\r\n            at java.net.Socket$SocketInputStream.read(java.base@17.0.2/Socket.java:966)\r\n            at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n            at org.apache.http.impl.io.SessionInputBufferImpl.read(SessionInputBufferImpl.java:197)\r\n            at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:176)\r\n            at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)\r\n            at sun.nio.cs.StreamDecoder.readBytes(java.base@17.0.2/StreamDecoder.java:270)\r\n            at sun.nio.cs.StreamDecoder.implRead(java.base@17.0.2/StreamDecoder.java:313)\r\n            at sun.nio.cs.StreamDecoder.read(java.base@17.0.2/StreamDecoder.java:188)\r\n            - locked &lt;0x0000000476808f38&gt; (a java.io.InputStreamReader)\r\n            at java.io.InputStreamReader.read(java.base@17.0.2/InputStreamReader.java:177)\r\n            at java.io.Reader.read(java.base@17.0.2/Reader.java:250)\r\n            at org.apache.http.util.EntityUtils.toString(EntityUtils.java:227)\r\n            at org.apache.http.util.EntityUtils.toString(EntityUtils.java:308)\r\n\r\n\r\nThis happens sporadically and I am not sure what&#39;s triggering this state. I have tried adding timeouts at the HttpRequest level but it&#39;s not helping. This is apache httpclient 4.5.13","title":"Apache EntityUtils toString from HttpResponse blocks thread indefinitely","body":"<p>Code:</p>\n<pre><code>public static String stringFromHttpResponse(HttpResponse response) throws IOException {\n    if (isStatusOk(response.getStatusLine().getStatusCode())) {\n        HttpEntity entity = response.getEntity();\n        if (entity != null) {\n            return EntityUtils.toString(entity);\n        } else {\n            throw new IOException(&quot;HttpResponse has a null entity&quot;);\n        }\n    } else {\n        String err = String.format(&quot;HttpResponse status code is not Ok(code=%s, reason=%s)&quot;,\n                response.getStatusLine().getStatusCode(), response.getStatusLine().getReasonPhrase());\n        throw new IOException(err);\n    }\n}\n</code></pre>\n<p>Output from jstack:</p>\n<pre><code> &quot;main&quot; #1 prio=5 os_prio=0 cpu=8114.46ms elapsed=1102.01s tid=0x00007f897c0256e0 nid=0x66a6 runnable  [0x00007f89830a1000]\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.SocketDispatcher.read0(java.base@17.0.2/Native Method)\n        at sun.nio.ch.SocketDispatcher.read(java.base@17.0.2/SocketDispatcher.java:47)\n        at sun.nio.ch.NioSocketImpl.tryRead(java.base@17.0.2/NioSocketImpl.java:261)\n        at sun.nio.ch.NioSocketImpl.implRead(java.base@17.0.2/NioSocketImpl.java:312)\n        at sun.nio.ch.NioSocketImpl.read(java.base@17.0.2/NioSocketImpl.java:350)\n        at sun.nio.ch.NioSocketImpl$1.read(java.base@17.0.2/NioSocketImpl.java:803)\n        at java.net.Socket$SocketInputStream.read(java.base@17.0.2/Socket.java:966)\n        at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\n        at org.apache.http.impl.io.SessionInputBufferImpl.read(SessionInputBufferImpl.java:197)\n        at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:176)\n        at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)\n        at sun.nio.cs.StreamDecoder.readBytes(java.base@17.0.2/StreamDecoder.java:270)\n        at sun.nio.cs.StreamDecoder.implRead(java.base@17.0.2/StreamDecoder.java:313)\n        at sun.nio.cs.StreamDecoder.read(java.base@17.0.2/StreamDecoder.java:188)\n        - locked &lt;0x0000000476808f38&gt; (a java.io.InputStreamReader)\n        at java.io.InputStreamReader.read(java.base@17.0.2/InputStreamReader.java:177)\n        at java.io.Reader.read(java.base@17.0.2/Reader.java:250)\n        at org.apache.http.util.EntityUtils.toString(EntityUtils.java:227)\n        at org.apache.http.util.EntityUtils.toString(EntityUtils.java:308)\n</code></pre>\n<p>This happens sporadically and I am not sure what's triggering this state. I have tried adding timeouts at the HttpRequest level but it's not helping. This is apache httpclient 4.5.13</p>\n"},{"tags":["java","sentence","lorem-ipsum"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":2,"creation_date":1678607717,"post_id":75711741,"comment_id":133563753,"body_markdown":"Where is the Faker class from? Please provide a [mre].","body":"Where is the Faker class from? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1678607738,"post_id":75711741,"comment_id":133563757,"body_markdown":"https://en.m.wikipedia.org/wiki/Lorem_ipsum also Java Faker is not a translator.","body":"<a href=\"https://en.m.wikipedia.org/wiki/Lorem_ipsum\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Lorem_ipsum</a> also Java Faker is not a translator."},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1678607754,"post_id":75711741,"comment_id":133563761,"body_markdown":"Please read the tag description of the tags you&#39;re using. Neither the faker nor the lorem-ipsum tags are related to your question.","body":"Please read the tag description of the tags you&#39;re using. Neither the faker nor the lorem-ipsum tags are related to your question."},{"owner":{"account_id":10471985,"reputation":344,"user_id":8898840,"display_name":"Guy Incognito"},"score":6,"creation_date":1678607824,"post_id":75711741,"comment_id":133563766,"body_markdown":"The Faker class provides dozens of methods that generate all kinds of things. If you don&#39;t want the lorem ipsum text then don&#39;t use the lorem method. Pick something else.","body":"The Faker class provides dozens of methods that generate all kinds of things. If you don&#39;t want the lorem ipsum text then don&#39;t use the lorem method. Pick something else."},{"owner":{"account_id":13676551,"reputation":71,"user_id":11647767,"display_name":"Gulammustufa Momin"},"score":0,"creation_date":1678607923,"post_id":75711741,"comment_id":133563779,"body_markdown":"Faker class is in maven dependency, https://mvnrepository.com/artifact/com.github.javafaker/javafaker","body":"Faker class is in maven dependency, <a href=\"https://mvnrepository.com/artifact/com.github.javafaker/javafaker\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/com.github.javafaker/javafaker</a>"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1678609438,"post_id":75711741,"comment_id":133563963,"body_markdown":"@GulammustufaMomin What kind of text do you want to generate? There are [other faker categories](https://github.com/DiUS/java-faker#fakers) than &quot;Lorem&quot; in the library you can use.","body":"@GulammustufaMomin What kind of text do you want to generate? There are <a href=\"https://github.com/DiUS/java-faker#fakers\" rel=\"nofollow noreferrer\">other faker categories</a> than &quot;Lorem&quot; in the library you can use."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1678609776,"post_id":75711741,"comment_id":133564004,"body_markdown":"But frankly .... why do your even care what language the text is in?  It is ... by design ... nonsensical text.  Nonsense in one language is as good as nonsense in another.","body":"But frankly .... why do your even care what language the text is in?  It is ... by design ... nonsensical text.  Nonsense in one language is as good as nonsense in another."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":2,"creation_date":1678610638,"post_id":75711741,"comment_id":133564125,"body_markdown":"`Locale` is not used for `Lorem`, but for postcodes, counties, phone numbers, some number formats and similar. (see the [en-GB.yml](https://github.com/DiUS/java-faker/blob/master/src/main/resources/en-GB.yml) file). Reason: see previous comment - it is not expected for it to return any real word","body":"<code>Locale</code> is not used for <code>Lorem</code>, but for postcodes, counties, phone numbers, some number formats and similar. (see the <a href=\"https://github.com/DiUS/java-faker/blob/master/src/main/resources/en-GB.yml\" rel=\"nofollow noreferrer\">en-GB.yml</a> file). Reason: see previous comment - it is not expected for it to return any real word"},{"owner":{"account_id":13676551,"reputation":71,"user_id":11647767,"display_name":"Gulammustufa Momin"},"score":0,"creation_date":1678618671,"post_id":75711741,"comment_id":133565197,"body_markdown":"Yes, I got it. Locale is not used for Lorem.","body":"Yes, I got it. Locale is not used for Lorem."}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678622189,"creation_date":1678622189,"answer_id":75712936,"question_id":75711741,"body_markdown":"To translate Latin (or any other language) to English you would obviously need a translator as **[Java-Faker](https://javadoc.io/doc/com.github.javafaker/javafaker/latest/com/github/javafaker/Faker.html)** doesn&#39;t do this. The easiest (I should think) would be to snag the translation from the internet. \r\n\r\nI had the following method in my archives but I have no idea who wrote it. It does work but utilizes the *WhatsApp*&#39;s **WhatsMate WA Gateway** so, internet access is a requirement. I&#39;m not really sure this is necessarily a good thing or not but here is a runnable demo in any case:\r\n\r\n```\r\nimport com.github.javafaker.Faker;\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.io.OutputStream;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.InetSocketAddress;\r\nimport java.net.Socket;\r\nimport java.net.URL;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n\r\npublic class FakerDemo {\r\n\r\n    public static void main(String[] args) {\r\n        new FakerDemo().startApp(args);\r\n    }\r\n    \r\n    private void startApp(String[] args) {\r\n        Faker faker = new Faker(); \r\n        String title = faker.lorem().sentence(3);\r\n        try {\r\n            System.out.println(&quot;Title: -&gt; &quot; + translate(title, &quot;Latin&quot;, &quot;English&quot;));\r\n        }\r\n        catch (Exception ex) {\r\n            System.err.println(ex);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Sends out a WhatsApp message via WhatsMate WA Gateway. Can translate any\r\n     * language to any other language. Below is a list of 91 Languages and their\r\n     * respective abbreviation that this method can Translate to and from:\r\n     * &lt;pre&gt;\r\n     *\r\n     * Abbreviation, Language Name\r\n     *  &lt;table align=&quot;center&quot; cellpadding=&quot;1&quot; cellspacing=&quot;1&quot; border=&quot;1&quot;&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;af, Afrikaans&lt;/td&gt;&lt;td&gt;gl, Galician&lt;/td&gt;&lt;td&gt;lt, Lithuanian&lt;/td&gt;&lt;td&gt;so, Somali&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;ar, Arabic&lt;/td&gt;&lt;td&gt;gu, Gujarati&lt;/td&gt;&lt;td&gt;lv, Latvian&lt;/td&gt;&lt;td&gt;sq, Albanian&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;az, Azerbaijani&lt;/td&gt;&lt;td&gt;ha, Hausa&lt;/td&gt;&lt;td&gt;ma, Punjabi&lt;/td&gt;&lt;td&gt;sr, Serbian&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;be,\tBelarusian&lt;/td&gt;&lt;td&gt;hi, Hindi&lt;/td&gt;&lt;td&gt;mg, Malagasy&lt;/td&gt;&lt;td&gt;st, Sesotho&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;bg,\tBulgarian&lt;/td&gt;&lt;td&gt;hmn, Hmong&lt;/td&gt;&lt;td&gt;mi, Maori&lt;/td&gt;&lt;td&gt;su, Sudanese&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;bn,\tBengali&lt;/td&gt;&lt;td&gt;hr, Croatian&lt;/td&gt;&lt;td&gt;mk, Macedonian&lt;/td&gt;&lt;td&gt;sv, Swedish&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;bs,\tBosnian&lt;/td&gt;&lt;td&gt;ht, Haitian Creole&lt;/td&gt;&lt;td&gt;ml, Malayalam&lt;/td&gt;&lt;td&gt;sw, Swahili&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;ca,\tCatalan&lt;/td&gt;&lt;td&gt;hu, Hungarian&lt;/td&gt;&lt;td&gt;mn, Mongolian&lt;/td&gt;&lt;td&gt;ta, Tamil&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;ceb, Cebuano&lt;/td&gt;&lt;td&gt;hy, Armenian&lt;/td&gt;&lt;td&gt;mr, Marathi&lt;/td&gt;&lt;td&gt;te, Telugu&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;cs,\tCzech&lt;/td&gt;&lt;td&gt;id, Indonesian&lt;/td&gt;&lt;td&gt;ms, Malay&lt;/td&gt;&lt;td&gt;tg, Tajik&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;cy,\tWelsh&lt;/td&gt;&lt;td&gt;ig, Igbo&lt;/td&gt;&lt;td&gt;mt, Maltese&lt;/td&gt;&lt;td&gt;th, Thai&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;da,\tDanish&lt;/td&gt;&lt;td&gt;is, Icelandic&lt;/td&gt;&lt;td&gt;my, Myanmar (Burmese)&lt;/td&gt;&lt;td&gt;tl, Filipino&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;de,\tGerman&lt;/td&gt;&lt;td&gt;it, Italian&lt;/td&gt;&lt;td&gt;ne, Nepali&lt;/td&gt;&lt;td&gt;tr, Turkish&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;el,\tGreek&lt;/td&gt;&lt;td&gt;iw, Hebrew&lt;/td&gt;&lt;td&gt;nl, Dutch&lt;/td&gt;&lt;td&gt;uk, Ukrainian&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;en,\tEnglish&lt;/td&gt;&lt;td&gt;ja, Japanese&lt;/td&gt;&lt;td&gt;no, Norwegian&lt;/td&gt;&lt;td&gt;ur, Urdu&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;eo,\tEsperanto&lt;/td&gt;&lt;td&gt;jw, Javanese&lt;/td&gt;&lt;td&gt;ny, Chichewa&lt;/td&gt;&lt;td&gt;uz, Uzbek&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;es,\tSpanish&lt;/td&gt;&lt;td&gt;ka, Georgian&lt;/td&gt;&lt;td&gt;pl, Polish&lt;/td&gt;&lt;td&gt;vi, Vietnamese&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;et,\tEstonian&lt;/td&gt;&lt;td&gt;kk, Kazakh&lt;/td&gt;&lt;td&gt;pt, Portuguese&lt;/td&gt;&lt;td&gt;yi, Yiddish&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;eu,\tBasque&lt;/td&gt;&lt;td&gt;km, Khmer&lt;/td&gt;&lt;td&gt;ro, Romanian&lt;/td&gt;&lt;td&gt;yo, Yoruba&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;fa,\tPersian&lt;/td&gt;&lt;td&gt;kn, Kannada&lt;/td&gt;&lt;td&gt;ru, Russian&lt;/td&gt;&lt;td&gt;zcn, Chinese Simplified&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;fi,\tFinnish&lt;/td&gt;&lt;td&gt;ko, Korean&lt;/td&gt;&lt;td&gt;si, Sinhala&lt;/td&gt;&lt;td&gt;ztw, Chinese Traditional&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;fr,\tFrench&lt;/td&gt;&lt;td&gt;la, Latin&lt;/td&gt;&lt;td&gt;sk, Slovak&lt;/td&gt;&lt;td&gt;zu, Zulu&lt;/td&gt;&lt;/tr&gt;\r\n     *      &lt;tr&gt;&lt;td&gt;ga, Irish&lt;/td&gt;&lt;td&gt;lo, Lao&lt;/td&gt;&lt;td&gt;sl, Slovenian&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;\r\n     *  &lt;/table&gt;\r\n     * &lt;/pre&gt;&lt;br&gt;\r\n     * &lt;p&gt;\r\n     * This method also ensures that an Internet connection exists. General\r\n     * (simple) errors are returned as text string from this method.\r\n     *\r\n     * @param textToTranslate (String) The text to translate.&lt;br&gt;\r\n     * \r\n     * @param fromLang (String) The language Name or Abbreviation (as describe\r\n     *                 within the information above) to convert FROM.&lt;br&gt;\r\n     *\r\n     * @param toLang   (String) The language Name or Abbreviation (as describe\r\n     *                 within the information above) to convert TO.&lt;br&gt;\r\n     *\r\n     * @return (String) The language translation.&lt;br&gt;\r\n     *\r\n     * @throws java.lang.Exception Should any issue arise.\r\n     */\r\n    public static String translate(String textToTranslate, String fromLang, String toLang) throws Exception {\r\n        // Is there internet...\r\n        // ---------------------------------------\r\n        boolean hasInternet;\r\n        /* Connect to Google DNS via port 53. Sometimes Anti-Virus\r\n           applications will block standard internet access from \r\n           applications that do not contain a digital signature. This\r\n           is one way to get around that problem...at least for checking\r\n           to see if there is indeed internet access for the system.  */\r\n        String host = &quot;8.8.8.8&quot;;\r\n        int port = 53;\r\n        try (Socket socket = new Socket()) {\r\n            socket.connect(new InetSocketAddress(host, port), 5000);\r\n            hasInternet = true;\r\n        }\r\n        catch (IOException ex) {\r\n            hasInternet = false;\r\n        }\r\n        if (!hasInternet) {\r\n            return &quot;No Internet availalble to acquire translation!&quot;;\r\n        }\r\n        // ---------------------------------------\r\n\r\n        // Language Map...\r\n        HashMap&lt;String, String&gt; langMap = new HashMap&lt;&gt;();\r\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Language Map Data &quot;&gt;\r\n        langMap.put(&quot;af&quot;, &quot;Afrikaans&quot;);\r\n        langMap.put(&quot;ar&quot;, &quot;Arabic&quot;);\r\n        langMap.put(&quot;az&quot;, &quot;Azerbaijani&quot;);\r\n        langMap.put(&quot;be&quot;, &quot;Belarusian&quot;);\r\n        langMap.put(&quot;bg&quot;, &quot;Bulgarian&quot;);\r\n        langMap.put(&quot;bn&quot;, &quot;Bengali&quot;);\r\n        langMap.put(&quot;bs&quot;, &quot;Bosnian&quot;);\r\n        langMap.put(&quot;ca&quot;, &quot;Catalan&quot;);\r\n        langMap.put(&quot;ceb&quot;, &quot;Cebuano&quot;);\r\n        langMap.put(&quot;cs&quot;, &quot;Czech&quot;);\r\n        langMap.put(&quot;cy&quot;, &quot;Welsh&quot;);\r\n        langMap.put(&quot;da&quot;, &quot;Danish&quot;);\r\n        langMap.put(&quot;de&quot;, &quot;German&quot;);\r\n        langMap.put(&quot;el&quot;, &quot;Greek&quot;);\r\n        langMap.put(&quot;en&quot;, &quot;English&quot;);\r\n        langMap.put(&quot;eo&quot;, &quot;Esperanto&quot;);\r\n        langMap.put(&quot;es&quot;, &quot;Spanish&quot;);\r\n        langMap.put(&quot;et&quot;, &quot;Estonian&quot;);\r\n        langMap.put(&quot;eu&quot;, &quot;Basque&quot;);\r\n        langMap.put(&quot;fa&quot;, &quot;Persian&quot;);\r\n        langMap.put(&quot;fi&quot;, &quot;Finnish&quot;);\r\n        langMap.put(&quot;fr&quot;, &quot;French&quot;);\r\n        langMap.put(&quot;ga&quot;, &quot;Irish&quot;);\r\n        langMap.put(&quot;gl&quot;, &quot;Galician&quot;);\r\n        langMap.put(&quot;gu&quot;, &quot;Gujarati&quot;);\r\n        langMap.put(&quot;ha&quot;, &quot;Hausa&quot;);\r\n        langMap.put(&quot;hi&quot;, &quot;Hindi&quot;);\r\n        langMap.put(&quot;hmn&quot;, &quot;Hmong&quot;);\r\n        langMap.put(&quot;hr&quot;, &quot;Croatian&quot;);\r\n        langMap.put(&quot;ht&quot;, &quot;Haitian Creole&quot;);\r\n        langMap.put(&quot;hu&quot;, &quot;Hungarian&quot;);\r\n        langMap.put(&quot;hy&quot;, &quot;Armenian&quot;);\r\n        langMap.put(&quot;id&quot;, &quot;Indonesian&quot;);\r\n        langMap.put(&quot;ig&quot;, &quot;Igbo&quot;);\r\n        langMap.put(&quot;is&quot;, &quot;Icelandic&quot;);\r\n        langMap.put(&quot;it&quot;, &quot;Italian&quot;);\r\n        langMap.put(&quot;iw&quot;, &quot;Hebrew&quot;);\r\n        langMap.put(&quot;ja&quot;, &quot;Japanese&quot;);\r\n        langMap.put(&quot;jw&quot;, &quot;Javanese&quot;);\r\n        langMap.put(&quot;ka&quot;, &quot;Georgian&quot;);\r\n        langMap.put(&quot;kk&quot;, &quot;Kazakh&quot;);\r\n        langMap.put(&quot;km&quot;, &quot;Khmer&quot;);\r\n        langMap.put(&quot;kn&quot;, &quot;Kannada&quot;);\r\n        langMap.put(&quot;ko&quot;, &quot;Korean&quot;);\r\n        langMap.put(&quot;la&quot;, &quot;Latin&quot;);\r\n        langMap.put(&quot;lo&quot;, &quot;Lao&quot;);\r\n        langMap.put(&quot;lt&quot;, &quot;Lithuanian&quot;);\r\n        langMap.put(&quot;lv&quot;, &quot;Latvian&quot;);\r\n        langMap.put(&quot;ma&quot;, &quot;Punjabi&quot;);\r\n        langMap.put(&quot;mg&quot;, &quot;Malagasy&quot;);\r\n        langMap.put(&quot;mi&quot;, &quot;Maori&quot;);\r\n        langMap.put(&quot;mk&quot;, &quot;Macedonian&quot;);\r\n        langMap.put(&quot;ml&quot;, &quot;Malayalam&quot;);\r\n        langMap.put(&quot;mn&quot;, &quot;Mongolian&quot;);\r\n        langMap.put(&quot;mr&quot;, &quot;Marathi&quot;);\r\n        langMap.put(&quot;ms&quot;, &quot;Malay&quot;);\r\n        langMap.put(&quot;mt&quot;, &quot;Maltese&quot;);\r\n        langMap.put(&quot;my&quot;, &quot;Myanmar (Burmese)&quot;);\r\n        langMap.put(&quot;ne&quot;, &quot;Nepali&quot;);\r\n        langMap.put(&quot;nl&quot;, &quot;Dutch&quot;);\r\n        langMap.put(&quot;no&quot;, &quot;Norwegian&quot;);\r\n        langMap.put(&quot;ny&quot;, &quot;Chichewa&quot;);\r\n        langMap.put(&quot;pl&quot;, &quot;Polish&quot;);\r\n        langMap.put(&quot;pt&quot;, &quot;Portuguese&quot;);\r\n        langMap.put(&quot;ro&quot;, &quot;Romanian&quot;);\r\n        langMap.put(&quot;ru&quot;, &quot;Russian&quot;);\r\n        langMap.put(&quot;si&quot;, &quot;Sinhala&quot;);\r\n        langMap.put(&quot;sk&quot;, &quot;Slovak&quot;);\r\n        langMap.put(&quot;sl&quot;, &quot;Slovenian&quot;);\r\n        langMap.put(&quot;so&quot;, &quot;Somali&quot;);\r\n        langMap.put(&quot;sq&quot;, &quot;Albanian&quot;);\r\n        langMap.put(&quot;sr&quot;, &quot;Serbian&quot;);\r\n        langMap.put(&quot;st&quot;, &quot;Sesotho&quot;);\r\n        langMap.put(&quot;su&quot;, &quot;Sudanese&quot;);\r\n        langMap.put(&quot;sv&quot;, &quot;Swedish&quot;);\r\n        langMap.put(&quot;sw&quot;, &quot;Swahili&quot;);\r\n        langMap.put(&quot;ta&quot;, &quot;Tamil&quot;);\r\n        langMap.put(&quot;te&quot;, &quot;Telugu&quot;);\r\n        langMap.put(&quot;tg&quot;, &quot;Tajik&quot;);\r\n        langMap.put(&quot;th&quot;, &quot;Thai&quot;);\r\n        langMap.put(&quot;tl&quot;, &quot;Filipino&quot;);\r\n        langMap.put(&quot;tr&quot;, &quot;Turkish&quot;);\r\n        langMap.put(&quot;uk&quot;, &quot;Ukrainian&quot;);\r\n        langMap.put(&quot;ur&quot;, &quot;Urdu&quot;);\r\n        langMap.put(&quot;uz&quot;, &quot;Uzbek&quot;);\r\n        langMap.put(&quot;vi&quot;, &quot;Vietnamese&quot;);\r\n        langMap.put(&quot;yi&quot;, &quot;Yiddish&quot;);\r\n        langMap.put(&quot;yo&quot;, &quot;Yoruba&quot;);\r\n        langMap.put(&quot;zcn&quot;, &quot;Chinese Simplified&quot;);\r\n        langMap.put(&quot;zct&quot;, &quot;Chinese Traditional&quot;);\r\n        langMap.put(&quot;zu&quot;, &quot;Zulu&quot;);\r\n        //&lt;/editor-fold&gt;\r\n\r\n        // Ensure supplied FROM/TO Language spec&#39;s are in lowercase.\r\n        fromLang = fromLang.toLowerCase();\r\n        toLang = toLang.toLowerCase();\r\n\r\n        boolean foundLang = false;\r\n        // If only the FROM language abrieviation (map key) is provided...\r\n        // fromLang parameter...\r\n        if (fromLang.length() &lt; 4) {\r\n            if (!langMap.containsKey(fromLang.toLowerCase())) {\r\n                return &quot;ERROR! Can not locate specified &#39;FROM&#39; Language! --&gt; (&quot; + fromLang + &quot;)&quot;;\r\n            }\r\n        }\r\n        // If full FROM language Name (map value) is provided...\r\n        else {\r\n            String value = fromLang;\r\n            for (Map.Entry&lt;String, String&gt; entry : langMap.entrySet()) {\r\n                if (value.equalsIgnoreCase(entry.getValue())) {\r\n                    fromLang = entry.getKey();\r\n                    foundLang = true;\r\n                    break; //breaking because its one to one map\r\n                }\r\n            }\r\n            if (!foundLang) {\r\n                return &quot;ERROR! Can not locate specified &#39;FROM&#39; Language! --&gt; (&quot; + fromLang + &quot;)&quot;;\r\n            }\r\n        }\r\n        // If only the TO language abrieviation (map key) is provided... \r\n        // toLang parameter...\r\n        foundLang = false;\r\n        if (toLang.length() &lt; 4) {\r\n            if (!langMap.containsKey(toLang)) {\r\n                return &quot;ERROR! Can not locate specified &#39;TO&#39; Language! --&gt; (&quot; + toLang + &quot;)&quot;;\r\n            }\r\n        }\r\n        // If full TO language Name (map value) is provided...\r\n        else {\r\n            String value = toLang;\r\n            for (Map.Entry&lt;String, String&gt; entry : langMap.entrySet()) {\r\n                if (value.equalsIgnoreCase(entry.getValue())) {\r\n                    toLang = entry.getKey();\r\n                    foundLang = true;\r\n                    break; //breaking because its one to one map\r\n                }\r\n            }\r\n            if (!foundLang) {\r\n                return &quot;ERROR! Can not locate specified &#39;TO&#39; Language! --&gt; (&quot; + toLang + &quot;)&quot;;\r\n            }\r\n        }\r\n        if (fromLang.equalsIgnoreCase(&quot;zcn&quot;)) {\r\n            fromLang = &quot;zh-CN&quot;;\r\n        }\r\n        else if (fromLang.equalsIgnoreCase(&quot;zct&quot;)) {\r\n            fromLang = &quot;zh-CT&quot;;\r\n        }\r\n        if (toLang.equalsIgnoreCase(&quot;zcn&quot;)) {\r\n            toLang = &quot;zh-CN&quot;;\r\n        }\r\n        else if (toLang.equalsIgnoreCase(&quot;zct&quot;)) {\r\n            toLang = &quot;zh-CT&quot;;\r\n        }\r\n\r\n        String jsonPayload = new StringBuilder()\r\n                .append(&quot;{&quot;)\r\n                .append(&quot;\\&quot;fromLang\\&quot;:\\&quot;&quot;)\r\n                .append(fromLang)\r\n                .append(&quot;\\&quot;,&quot;)\r\n                .append(&quot;\\&quot;toLang\\&quot;:\\&quot;&quot;)\r\n                .append(toLang)\r\n                .append(&quot;\\&quot;,&quot;)\r\n                .append(&quot;\\&quot;text\\&quot;:\\&quot;&quot;)\r\n                .append(textToTranslate)\r\n                .append(&quot;\\&quot;&quot;)\r\n                .append(&quot;}&quot;)\r\n                .toString();\r\n\r\n        URL url = new URL(&quot;http://api.whatsmate.net/v1/translation/translate&quot;);\r\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n        conn.setDoOutput(true);\r\n        conn.setRequestMethod(&quot;POST&quot;);\r\n        conn.setRequestProperty(&quot;X-WM-CLIENT-ID&quot;, &quot;FREE_TRIAL_ACCOUNT&quot;);\r\n        conn.setRequestProperty(&quot;X-WM-CLIENT-SECRET&quot;, &quot;PUBLIC_SECRET&quot;);\r\n        conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n        // &#39;Try With Resources&#39; used here to auto-close stream.\r\n        try (OutputStream os = conn.getOutputStream()) {\r\n            os.write(jsonPayload.getBytes());\r\n            os.flush();\r\n        }\r\n\r\n        int statusCode = conn.getResponseCode();\r\n        // System.out.println(&quot;Status Code: &quot; + statusCode);\r\n        BufferedReader br = new BufferedReader(new InputStreamReader(\r\n                (statusCode == 200) ? conn.getInputStream() : conn.getErrorStream()\r\n        ));\r\n\r\n        String output;\r\n        StringBuilder sb = new StringBuilder();\r\n        while ((output = br.readLine()) != null) {\r\n            sb.append(output).append(System.lineSeparator());\r\n        }\r\n        return sb.toString();\r\n    }\r\n    \r\n}\r\n```\r\n","title":"Why java faker generating sentence in Latin language. I need in English language","body":"<p>To translate Latin (or any other language) to English you would obviously need a translator as <strong><a href=\"https://javadoc.io/doc/com.github.javafaker/javafaker/latest/com/github/javafaker/Faker.html\" rel=\"nofollow noreferrer\">Java-Faker</a></strong> doesn't do this. The easiest (I should think) would be to snag the translation from the internet.</p>\n<p>I had the following method in my archives but I have no idea who wrote it. It does work but utilizes the <em>WhatsApp</em>'s <strong>WhatsMate WA Gateway</strong> so, internet access is a requirement. I'm not really sure this is necessarily a good thing or not but here is a runnable demo in any case:</p>\n<pre><code>import com.github.javafaker.Faker;\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.net.URL;\nimport java.util.HashMap;\nimport java.util.Map;\n\n\npublic class FakerDemo {\n\n    public static void main(String[] args) {\n        new FakerDemo().startApp(args);\n    }\n    \n    private void startApp(String[] args) {\n        Faker faker = new Faker(); \n        String title = faker.lorem().sentence(3);\n        try {\n            System.out.println(&quot;Title: -&gt; &quot; + translate(title, &quot;Latin&quot;, &quot;English&quot;));\n        }\n        catch (Exception ex) {\n            System.err.println(ex);\n        }\n    }\n    \n    /**\n     * Sends out a WhatsApp message via WhatsMate WA Gateway. Can translate any\n     * language to any other language. Below is a list of 91 Languages and their\n     * respective abbreviation that this method can Translate to and from:\n     * &lt;pre&gt;\n     *\n     * Abbreviation, Language Name\n     *  &lt;table align=&quot;center&quot; cellpadding=&quot;1&quot; cellspacing=&quot;1&quot; border=&quot;1&quot;&gt;\n     *      &lt;tr&gt;&lt;td&gt;af, Afrikaans&lt;/td&gt;&lt;td&gt;gl, Galician&lt;/td&gt;&lt;td&gt;lt, Lithuanian&lt;/td&gt;&lt;td&gt;so, Somali&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;ar, Arabic&lt;/td&gt;&lt;td&gt;gu, Gujarati&lt;/td&gt;&lt;td&gt;lv, Latvian&lt;/td&gt;&lt;td&gt;sq, Albanian&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;az, Azerbaijani&lt;/td&gt;&lt;td&gt;ha, Hausa&lt;/td&gt;&lt;td&gt;ma, Punjabi&lt;/td&gt;&lt;td&gt;sr, Serbian&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;be, Belarusian&lt;/td&gt;&lt;td&gt;hi, Hindi&lt;/td&gt;&lt;td&gt;mg, Malagasy&lt;/td&gt;&lt;td&gt;st, Sesotho&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;bg, Bulgarian&lt;/td&gt;&lt;td&gt;hmn, Hmong&lt;/td&gt;&lt;td&gt;mi, Maori&lt;/td&gt;&lt;td&gt;su, Sudanese&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;bn, Bengali&lt;/td&gt;&lt;td&gt;hr, Croatian&lt;/td&gt;&lt;td&gt;mk, Macedonian&lt;/td&gt;&lt;td&gt;sv, Swedish&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;bs, Bosnian&lt;/td&gt;&lt;td&gt;ht, Haitian Creole&lt;/td&gt;&lt;td&gt;ml, Malayalam&lt;/td&gt;&lt;td&gt;sw, Swahili&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;ca, Catalan&lt;/td&gt;&lt;td&gt;hu, Hungarian&lt;/td&gt;&lt;td&gt;mn, Mongolian&lt;/td&gt;&lt;td&gt;ta, Tamil&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;ceb, Cebuano&lt;/td&gt;&lt;td&gt;hy, Armenian&lt;/td&gt;&lt;td&gt;mr, Marathi&lt;/td&gt;&lt;td&gt;te, Telugu&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;cs, Czech&lt;/td&gt;&lt;td&gt;id, Indonesian&lt;/td&gt;&lt;td&gt;ms, Malay&lt;/td&gt;&lt;td&gt;tg, Tajik&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;cy, Welsh&lt;/td&gt;&lt;td&gt;ig, Igbo&lt;/td&gt;&lt;td&gt;mt, Maltese&lt;/td&gt;&lt;td&gt;th, Thai&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;da, Danish&lt;/td&gt;&lt;td&gt;is, Icelandic&lt;/td&gt;&lt;td&gt;my, Myanmar (Burmese)&lt;/td&gt;&lt;td&gt;tl, Filipino&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;de, German&lt;/td&gt;&lt;td&gt;it, Italian&lt;/td&gt;&lt;td&gt;ne, Nepali&lt;/td&gt;&lt;td&gt;tr, Turkish&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;el, Greek&lt;/td&gt;&lt;td&gt;iw, Hebrew&lt;/td&gt;&lt;td&gt;nl, Dutch&lt;/td&gt;&lt;td&gt;uk, Ukrainian&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;en, English&lt;/td&gt;&lt;td&gt;ja, Japanese&lt;/td&gt;&lt;td&gt;no, Norwegian&lt;/td&gt;&lt;td&gt;ur, Urdu&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;eo, Esperanto&lt;/td&gt;&lt;td&gt;jw, Javanese&lt;/td&gt;&lt;td&gt;ny, Chichewa&lt;/td&gt;&lt;td&gt;uz, Uzbek&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;es, Spanish&lt;/td&gt;&lt;td&gt;ka, Georgian&lt;/td&gt;&lt;td&gt;pl, Polish&lt;/td&gt;&lt;td&gt;vi, Vietnamese&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;et, Estonian&lt;/td&gt;&lt;td&gt;kk, Kazakh&lt;/td&gt;&lt;td&gt;pt, Portuguese&lt;/td&gt;&lt;td&gt;yi, Yiddish&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;eu, Basque&lt;/td&gt;&lt;td&gt;km, Khmer&lt;/td&gt;&lt;td&gt;ro, Romanian&lt;/td&gt;&lt;td&gt;yo, Yoruba&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;fa, Persian&lt;/td&gt;&lt;td&gt;kn, Kannada&lt;/td&gt;&lt;td&gt;ru, Russian&lt;/td&gt;&lt;td&gt;zcn, Chinese Simplified&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;fi, Finnish&lt;/td&gt;&lt;td&gt;ko, Korean&lt;/td&gt;&lt;td&gt;si, Sinhala&lt;/td&gt;&lt;td&gt;ztw, Chinese Traditional&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;fr, French&lt;/td&gt;&lt;td&gt;la, Latin&lt;/td&gt;&lt;td&gt;sk, Slovak&lt;/td&gt;&lt;td&gt;zu, Zulu&lt;/td&gt;&lt;/tr&gt;\n     *      &lt;tr&gt;&lt;td&gt;ga, Irish&lt;/td&gt;&lt;td&gt;lo, Lao&lt;/td&gt;&lt;td&gt;sl, Slovenian&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;\n     *  &lt;/table&gt;\n     * &lt;/pre&gt;&lt;br&gt;\n     * &lt;p&gt;\n     * This method also ensures that an Internet connection exists. General\n     * (simple) errors are returned as text string from this method.\n     *\n     * @param textToTranslate (String) The text to translate.&lt;br&gt;\n     * \n     * @param fromLang (String) The language Name or Abbreviation (as describe\n     *                 within the information above) to convert FROM.&lt;br&gt;\n     *\n     * @param toLang   (String) The language Name or Abbreviation (as describe\n     *                 within the information above) to convert TO.&lt;br&gt;\n     *\n     * @return (String) The language translation.&lt;br&gt;\n     *\n     * @throws java.lang.Exception Should any issue arise.\n     */\n    public static String translate(String textToTranslate, String fromLang, String toLang) throws Exception {\n        // Is there internet...\n        // ---------------------------------------\n        boolean hasInternet;\n        /* Connect to Google DNS via port 53. Sometimes Anti-Virus\n           applications will block standard internet access from \n           applications that do not contain a digital signature. This\n           is one way to get around that problem...at least for checking\n           to see if there is indeed internet access for the system.  */\n        String host = &quot;8.8.8.8&quot;;\n        int port = 53;\n        try (Socket socket = new Socket()) {\n            socket.connect(new InetSocketAddress(host, port), 5000);\n            hasInternet = true;\n        }\n        catch (IOException ex) {\n            hasInternet = false;\n        }\n        if (!hasInternet) {\n            return &quot;No Internet availalble to acquire translation!&quot;;\n        }\n        // ---------------------------------------\n\n        // Language Map...\n        HashMap&lt;String, String&gt; langMap = new HashMap&lt;&gt;();\n        //&lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Language Map Data &quot;&gt;\n        langMap.put(&quot;af&quot;, &quot;Afrikaans&quot;);\n        langMap.put(&quot;ar&quot;, &quot;Arabic&quot;);\n        langMap.put(&quot;az&quot;, &quot;Azerbaijani&quot;);\n        langMap.put(&quot;be&quot;, &quot;Belarusian&quot;);\n        langMap.put(&quot;bg&quot;, &quot;Bulgarian&quot;);\n        langMap.put(&quot;bn&quot;, &quot;Bengali&quot;);\n        langMap.put(&quot;bs&quot;, &quot;Bosnian&quot;);\n        langMap.put(&quot;ca&quot;, &quot;Catalan&quot;);\n        langMap.put(&quot;ceb&quot;, &quot;Cebuano&quot;);\n        langMap.put(&quot;cs&quot;, &quot;Czech&quot;);\n        langMap.put(&quot;cy&quot;, &quot;Welsh&quot;);\n        langMap.put(&quot;da&quot;, &quot;Danish&quot;);\n        langMap.put(&quot;de&quot;, &quot;German&quot;);\n        langMap.put(&quot;el&quot;, &quot;Greek&quot;);\n        langMap.put(&quot;en&quot;, &quot;English&quot;);\n        langMap.put(&quot;eo&quot;, &quot;Esperanto&quot;);\n        langMap.put(&quot;es&quot;, &quot;Spanish&quot;);\n        langMap.put(&quot;et&quot;, &quot;Estonian&quot;);\n        langMap.put(&quot;eu&quot;, &quot;Basque&quot;);\n        langMap.put(&quot;fa&quot;, &quot;Persian&quot;);\n        langMap.put(&quot;fi&quot;, &quot;Finnish&quot;);\n        langMap.put(&quot;fr&quot;, &quot;French&quot;);\n        langMap.put(&quot;ga&quot;, &quot;Irish&quot;);\n        langMap.put(&quot;gl&quot;, &quot;Galician&quot;);\n        langMap.put(&quot;gu&quot;, &quot;Gujarati&quot;);\n        langMap.put(&quot;ha&quot;, &quot;Hausa&quot;);\n        langMap.put(&quot;hi&quot;, &quot;Hindi&quot;);\n        langMap.put(&quot;hmn&quot;, &quot;Hmong&quot;);\n        langMap.put(&quot;hr&quot;, &quot;Croatian&quot;);\n        langMap.put(&quot;ht&quot;, &quot;Haitian Creole&quot;);\n        langMap.put(&quot;hu&quot;, &quot;Hungarian&quot;);\n        langMap.put(&quot;hy&quot;, &quot;Armenian&quot;);\n        langMap.put(&quot;id&quot;, &quot;Indonesian&quot;);\n        langMap.put(&quot;ig&quot;, &quot;Igbo&quot;);\n        langMap.put(&quot;is&quot;, &quot;Icelandic&quot;);\n        langMap.put(&quot;it&quot;, &quot;Italian&quot;);\n        langMap.put(&quot;iw&quot;, &quot;Hebrew&quot;);\n        langMap.put(&quot;ja&quot;, &quot;Japanese&quot;);\n        langMap.put(&quot;jw&quot;, &quot;Javanese&quot;);\n        langMap.put(&quot;ka&quot;, &quot;Georgian&quot;);\n        langMap.put(&quot;kk&quot;, &quot;Kazakh&quot;);\n        langMap.put(&quot;km&quot;, &quot;Khmer&quot;);\n        langMap.put(&quot;kn&quot;, &quot;Kannada&quot;);\n        langMap.put(&quot;ko&quot;, &quot;Korean&quot;);\n        langMap.put(&quot;la&quot;, &quot;Latin&quot;);\n        langMap.put(&quot;lo&quot;, &quot;Lao&quot;);\n        langMap.put(&quot;lt&quot;, &quot;Lithuanian&quot;);\n        langMap.put(&quot;lv&quot;, &quot;Latvian&quot;);\n        langMap.put(&quot;ma&quot;, &quot;Punjabi&quot;);\n        langMap.put(&quot;mg&quot;, &quot;Malagasy&quot;);\n        langMap.put(&quot;mi&quot;, &quot;Maori&quot;);\n        langMap.put(&quot;mk&quot;, &quot;Macedonian&quot;);\n        langMap.put(&quot;ml&quot;, &quot;Malayalam&quot;);\n        langMap.put(&quot;mn&quot;, &quot;Mongolian&quot;);\n        langMap.put(&quot;mr&quot;, &quot;Marathi&quot;);\n        langMap.put(&quot;ms&quot;, &quot;Malay&quot;);\n        langMap.put(&quot;mt&quot;, &quot;Maltese&quot;);\n        langMap.put(&quot;my&quot;, &quot;Myanmar (Burmese)&quot;);\n        langMap.put(&quot;ne&quot;, &quot;Nepali&quot;);\n        langMap.put(&quot;nl&quot;, &quot;Dutch&quot;);\n        langMap.put(&quot;no&quot;, &quot;Norwegian&quot;);\n        langMap.put(&quot;ny&quot;, &quot;Chichewa&quot;);\n        langMap.put(&quot;pl&quot;, &quot;Polish&quot;);\n        langMap.put(&quot;pt&quot;, &quot;Portuguese&quot;);\n        langMap.put(&quot;ro&quot;, &quot;Romanian&quot;);\n        langMap.put(&quot;ru&quot;, &quot;Russian&quot;);\n        langMap.put(&quot;si&quot;, &quot;Sinhala&quot;);\n        langMap.put(&quot;sk&quot;, &quot;Slovak&quot;);\n        langMap.put(&quot;sl&quot;, &quot;Slovenian&quot;);\n        langMap.put(&quot;so&quot;, &quot;Somali&quot;);\n        langMap.put(&quot;sq&quot;, &quot;Albanian&quot;);\n        langMap.put(&quot;sr&quot;, &quot;Serbian&quot;);\n        langMap.put(&quot;st&quot;, &quot;Sesotho&quot;);\n        langMap.put(&quot;su&quot;, &quot;Sudanese&quot;);\n        langMap.put(&quot;sv&quot;, &quot;Swedish&quot;);\n        langMap.put(&quot;sw&quot;, &quot;Swahili&quot;);\n        langMap.put(&quot;ta&quot;, &quot;Tamil&quot;);\n        langMap.put(&quot;te&quot;, &quot;Telugu&quot;);\n        langMap.put(&quot;tg&quot;, &quot;Tajik&quot;);\n        langMap.put(&quot;th&quot;, &quot;Thai&quot;);\n        langMap.put(&quot;tl&quot;, &quot;Filipino&quot;);\n        langMap.put(&quot;tr&quot;, &quot;Turkish&quot;);\n        langMap.put(&quot;uk&quot;, &quot;Ukrainian&quot;);\n        langMap.put(&quot;ur&quot;, &quot;Urdu&quot;);\n        langMap.put(&quot;uz&quot;, &quot;Uzbek&quot;);\n        langMap.put(&quot;vi&quot;, &quot;Vietnamese&quot;);\n        langMap.put(&quot;yi&quot;, &quot;Yiddish&quot;);\n        langMap.put(&quot;yo&quot;, &quot;Yoruba&quot;);\n        langMap.put(&quot;zcn&quot;, &quot;Chinese Simplified&quot;);\n        langMap.put(&quot;zct&quot;, &quot;Chinese Traditional&quot;);\n        langMap.put(&quot;zu&quot;, &quot;Zulu&quot;);\n        //&lt;/editor-fold&gt;\n\n        // Ensure supplied FROM/TO Language spec's are in lowercase.\n        fromLang = fromLang.toLowerCase();\n        toLang = toLang.toLowerCase();\n\n        boolean foundLang = false;\n        // If only the FROM language abrieviation (map key) is provided...\n        // fromLang parameter...\n        if (fromLang.length() &lt; 4) {\n            if (!langMap.containsKey(fromLang.toLowerCase())) {\n                return &quot;ERROR! Can not locate specified 'FROM' Language! --&gt; (&quot; + fromLang + &quot;)&quot;;\n            }\n        }\n        // If full FROM language Name (map value) is provided...\n        else {\n            String value = fromLang;\n            for (Map.Entry&lt;String, String&gt; entry : langMap.entrySet()) {\n                if (value.equalsIgnoreCase(entry.getValue())) {\n                    fromLang = entry.getKey();\n                    foundLang = true;\n                    break; //breaking because its one to one map\n                }\n            }\n            if (!foundLang) {\n                return &quot;ERROR! Can not locate specified 'FROM' Language! --&gt; (&quot; + fromLang + &quot;)&quot;;\n            }\n        }\n        // If only the TO language abrieviation (map key) is provided... \n        // toLang parameter...\n        foundLang = false;\n        if (toLang.length() &lt; 4) {\n            if (!langMap.containsKey(toLang)) {\n                return &quot;ERROR! Can not locate specified 'TO' Language! --&gt; (&quot; + toLang + &quot;)&quot;;\n            }\n        }\n        // If full TO language Name (map value) is provided...\n        else {\n            String value = toLang;\n            for (Map.Entry&lt;String, String&gt; entry : langMap.entrySet()) {\n                if (value.equalsIgnoreCase(entry.getValue())) {\n                    toLang = entry.getKey();\n                    foundLang = true;\n                    break; //breaking because its one to one map\n                }\n            }\n            if (!foundLang) {\n                return &quot;ERROR! Can not locate specified 'TO' Language! --&gt; (&quot; + toLang + &quot;)&quot;;\n            }\n        }\n        if (fromLang.equalsIgnoreCase(&quot;zcn&quot;)) {\n            fromLang = &quot;zh-CN&quot;;\n        }\n        else if (fromLang.equalsIgnoreCase(&quot;zct&quot;)) {\n            fromLang = &quot;zh-CT&quot;;\n        }\n        if (toLang.equalsIgnoreCase(&quot;zcn&quot;)) {\n            toLang = &quot;zh-CN&quot;;\n        }\n        else if (toLang.equalsIgnoreCase(&quot;zct&quot;)) {\n            toLang = &quot;zh-CT&quot;;\n        }\n\n        String jsonPayload = new StringBuilder()\n                .append(&quot;{&quot;)\n                .append(&quot;\\&quot;fromLang\\&quot;:\\&quot;&quot;)\n                .append(fromLang)\n                .append(&quot;\\&quot;,&quot;)\n                .append(&quot;\\&quot;toLang\\&quot;:\\&quot;&quot;)\n                .append(toLang)\n                .append(&quot;\\&quot;,&quot;)\n                .append(&quot;\\&quot;text\\&quot;:\\&quot;&quot;)\n                .append(textToTranslate)\n                .append(&quot;\\&quot;&quot;)\n                .append(&quot;}&quot;)\n                .toString();\n\n        URL url = new URL(&quot;http://api.whatsmate.net/v1/translation/translate&quot;);\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n        conn.setDoOutput(true);\n        conn.setRequestMethod(&quot;POST&quot;);\n        conn.setRequestProperty(&quot;X-WM-CLIENT-ID&quot;, &quot;FREE_TRIAL_ACCOUNT&quot;);\n        conn.setRequestProperty(&quot;X-WM-CLIENT-SECRET&quot;, &quot;PUBLIC_SECRET&quot;);\n        conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n        // 'Try With Resources' used here to auto-close stream.\n        try (OutputStream os = conn.getOutputStream()) {\n            os.write(jsonPayload.getBytes());\n            os.flush();\n        }\n\n        int statusCode = conn.getResponseCode();\n        // System.out.println(&quot;Status Code: &quot; + statusCode);\n        BufferedReader br = new BufferedReader(new InputStreamReader(\n                (statusCode == 200) ? conn.getInputStream() : conn.getErrorStream()\n        ));\n\n        String output;\n        StringBuilder sb = new StringBuilder();\n        while ((output = br.readLine()) != null) {\n            sb.append(output).append(System.lineSeparator());\n        }\n        return sb.toString();\n    }\n    \n}\n</code></pre>\n"}],"owner":{"account_id":13676551,"reputation":71,"user_id":11647767,"display_name":"Gulammustufa Momin"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":331,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1682362078,"creation_date":1678607530,"question_id":75711741,"body_markdown":"Here is my code.\r\n\r\n    Faker faker = new Faker(new Locale(&quot;en-GB&quot;));\r\n    String title = faker.lorem().sentence(3);\r\n    System.out.println(&quot;title = &quot; + title);\r\n\r\nThe output is as below.\r\n\r\n    title = Ut at quis corrupti explicabo.\r\nI checked in google translate. It is in the Latin language. How can I get the sentence in the English language?","title":"Why java faker generating sentence in Latin language. I need in English language","body":"<p>Here is my code.</p>\n<pre><code>Faker faker = new Faker(new Locale(&quot;en-GB&quot;));\nString title = faker.lorem().sentence(3);\nSystem.out.println(&quot;title = &quot; + title);\n</code></pre>\n<p>The output is as below.</p>\n<pre><code>title = Ut at quis corrupti explicabo.\n</code></pre>\n<p>I checked in google translate. It is in the Latin language. How can I get the sentence in the English language?</p>\n"},{"tags":["java","arrays","arraylist","dynamic-programming"],"comments":[{"owner":{"account_id":16001561,"reputation":3061,"user_id":11548057,"display_name":"joshmeranda"},"score":1,"creation_date":1598107922,"post_id":63537467,"comment_id":112353076,"body_markdown":"please add  the runtime exception you are receiving to your question","body":"please add  the runtime exception you are receiving to your question"},{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":0,"creation_date":1598107937,"post_id":63537467,"comment_id":112353080,"body_markdown":"What runtime error are you getting and what line triggers it? Please post the entire stack trace.","body":"What runtime error are you getting and what line triggers it? Please post the entire stack trace."}],"answers":[{"tags":[],"owner":{"account_id":12819454,"reputation":2082,"user_id":9274948,"display_name":"Hawk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1598109054,"creation_date":1598108138,"answer_id":63537573,"question_id":63537467,"body_markdown":"You are declaring `int prefix_sum=0;` and `int suffix_sum=0;` as fields, not as local variables of the respective methods.\r\n\r\nYou are calling `suffix(A.size()-(B-i))` so with your example that is `10 - (4 -i)` which is `6 + i`. You iterate through `i` being in the range {0, ..., 10} so the value `6 + i` will be all the numbers 6 through 16. You cannot index in the array above 9, so you get an exception.\r\n\r\nYou need to change\r\n```\r\nfor(int i=0;i&lt;A.size();i++){\r\n```\r\nto\r\n```\r\nfor(int i=0; i &lt;= B; i++){\r\n```\r\nbecause you are trying to ask each iteration &quot;how many numbers are taken from the beginning&quot;? 0, 1, 2, 3 or 4 if B is 4\r\n\r\n\r\n---\r\nOther upgrades:\r\n1. You are calling `suffix(A.size()-(B-i))+prefix(i-1))` twice in a row. Call it only once, store it in a variable and reuse.\r\n\r\n2. You are calling `prefix(i-1)` but inside prefix() you are using the parameter `a` as `a + 1`. You don&#39;t need to subtract one and add one to the same thing","title":"Pick from both sides?","body":"<p>You are declaring <code>int prefix_sum=0;</code> and <code>int suffix_sum=0;</code> as fields, not as local variables of the respective methods.</p>\n<p>You are calling <code>suffix(A.size()-(B-i))</code> so with your example that is <code>10 - (4 -i)</code> which is <code>6 + i</code>. You iterate through <code>i</code> being in the range {0, ..., 10} so the value <code>6 + i</code> will be all the numbers 6 through 16. You cannot index in the array above 9, so you get an exception.</p>\n<p>You need to change</p>\n<pre><code>for(int i=0;i&lt;A.size();i++){\n</code></pre>\n<p>to</p>\n<pre><code>for(int i=0; i &lt;= B; i++){\n</code></pre>\n<p>because you are trying to ask each iteration &quot;how many numbers are taken from the beginning&quot;? 0, 1, 2, 3 or 4 if B is 4</p>\n<hr />\n<p>Other upgrades:</p>\n<ol>\n<li><p>You are calling <code>suffix(A.size()-(B-i))+prefix(i-1))</code> twice in a row. Call it only once, store it in a variable and reuse.</p>\n</li>\n<li><p>You are calling <code>prefix(i-1)</code> but inside prefix() you are using the parameter <code>a</code> as <code>a + 1</code>. You don't need to subtract one and add one to the same thing</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6174988,"reputation":11040,"user_id":4812170,"accept_rate":73,"display_name":"vaquar khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1604214263,"creation_date":1604212986,"answer_id":64629329,"question_id":63537467,"body_markdown":"\t\tpackage com.array;\r\n\r\n\t\timport java.util.Arrays;\r\n\t\timport java.util.List;\r\n\r\n\t\tpublic class PickFromBothSides {\r\n\r\n\t\t\tpublic static void main(String[] args) {\r\n\t\t\t\tInteger[] arr = { 5, -2, 3, 1, 2 };\r\n\t\t\t\tSystem.out.println(solve(Arrays.asList(arr), 3));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpublic static int solve(List&lt;Integer&gt; A, int B) {\r\n\r\n\t\t\t\tint n = A.size();\r\n\r\n\t\t\t\tint result = 0;\r\n\r\n\t\t\t\tfor (int i = 0; i &lt; B; i++) {\r\n\t\t\t\t\tresult += A.get(i);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tint sum = result;\r\n\r\n\t\t\t\tfor (int i = 0; i &lt; B; i++) {\r\n\t\t\t\t\tsum -= A.get(B - 1 - i);\r\n\t\t\t\t\tsum += A.get(n - 1 - i);\r\n\r\n\t\t\t\t\tresult = Math.max(result, sum);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\nRuntime O(n) \r\nSpace complexity O(1)","title":"Pick from both sides?","body":"<pre><code>    package com.array;\n\n    import java.util.Arrays;\n    import java.util.List;\n\n    public class PickFromBothSides {\n\n        public static void main(String[] args) {\n            Integer[] arr = { 5, -2, 3, 1, 2 };\n            System.out.println(solve(Arrays.asList(arr), 3));\n\n        }\n\n        public static int solve(List&lt;Integer&gt; A, int B) {\n\n            int n = A.size();\n\n            int result = 0;\n\n            for (int i = 0; i &lt; B; i++) {\n                result += A.get(i);\n            }\n\n            int sum = result;\n\n            for (int i = 0; i &lt; B; i++) {\n                sum -= A.get(B - 1 - i);\n                sum += A.get(n - 1 - i);\n\n                result = Math.max(result, sum);\n            }\n\n            return result;\n\n        }\n    }\n</code></pre>\n<p>Runtime O(n)\nSpace complexity O(1)</p>\n"},{"tags":[],"owner":{"account_id":15390263,"reputation":1,"user_id":11103218,"display_name":"Anshraj Shrivastava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682361738,"creation_date":1682361689,"answer_id":76095096,"question_id":63537467,"body_markdown":"PFB another approach to solve this problem(in Python3):\r\n\r\n     def solve(A, B):\r\n            left = [0]\r\n            for i in range(B):\r\n                left.append(left[-1]+A[i])\r\n            right = [0]\r\n            for i in range(B):\r\n                right.append(right[-1]+A[len(A)-i-1])\r\n            for i in range(B+1):\r\n                left[i] += right[B-i]\r\n            return max(left)\r\n\r\nHere I created a cumulative sum (or prefix and suffix sum) of B number of elements from the left and right sides of array A, Then added the sum of the first element of the left with the last element of the right. Thus finally returned the max of them.\r\n        \r\n            ","title":"Pick from both sides?","body":"<p>PFB another approach to solve this problem(in Python3):</p>\n<pre><code> def solve(A, B):\n        left = [0]\n        for i in range(B):\n            left.append(left[-1]+A[i])\n        right = [0]\n        for i in range(B):\n            right.append(right[-1]+A[len(A)-i-1])\n        for i in range(B+1):\n            left[i] += right[B-i]\n        return max(left)\n</code></pre>\n<p>Here I created a cumulative sum (or prefix and suffix sum) of B number of elements from the left and right sides of array A, Then added the sum of the first element of the left with the last element of the right. Thus finally returned the max of them.</p>\n"}],"owner":{"account_id":15415633,"reputation":31,"user_id":14148366,"display_name":" helloworld"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9308,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1682361738,"creation_date":1598107656,"question_id":63537467,"body_markdown":"The problem statement is :\r\nGiven an integer array A of size N.\r\n\r\nYou can pick B elements from either left or right end of the array A to get maximum sum.\r\nFind and return this maximum possible sum.\r\n\r\nNOTE: Suppose B = 4 and array A contains 10 elements then:\r\n\r\nYou can pick first four elements or can pick last four elements or can pick 1 from front and 3 from back etc . you need to return the maximum possible sum of elements you can pick.\r\n\r\n    public class Solution {\r\n    ArrayList&lt;Integer&gt; c = new ArrayList&lt;&gt;();\r\n    ArrayList&lt;Integer&gt; A= new ArrayList&lt;&gt;();\r\n    public int solve(ArrayList&lt;Integer&gt; A, int B) {\r\n       \r\n        if (B&gt;A.size()){\r\n            int sum=0;\r\n            for(int i=0;i&lt;A.size();i++)\r\n             sum= sum+A.get(i);\r\n            return sum;\r\n        }\r\n    \r\n       int max_sum=0;\r\n     for(int i=0;i&lt;A.size();i++){\r\n      if((max_sum&lt;suffix(A.size()-(B-i))+prefix(i-1)) ){\r\n           max_sum=suffix(A.size()-(B-i))+prefix(i-1);\r\n         }\r\n        }\r\n        return max_sum;\r\n    }\r\n        \r\n        int prefix_sum=0;\r\n      int prefix(int a)   {\r\n          \r\n           for(int p=0;p&lt;a+1;p++){\r\n               c=A;\r\n                prefix_sum=prefix_sum + c.get(p);\r\n                }\r\n              return prefix_sum;\r\n                         }\r\n    \r\n               int suffix_sum=0;\r\n               int suffix(int b){\r\n                   c=A;\r\n            for(int q=b;q&lt;c.size();q++){\r\n               suffix_sum=suffix_sum+c.get(q);\r\n              }\r\n                return suffix_sum;\r\n             }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nI am getting runtime error, I have tried to implement the suffix and prefix methods which return the sum from the index[ 0, i] and sum from [i, N-i] respectively, then in the solve function I am trying to find the sum of prefix [a-1] +suffix[N-(b-a)] and find out the maximum sum, the syntax is completely correct, there is something wrong with the logic I assume, please help me find the correct solution by correcting this code instead of providing an alternative method","title":"Pick from both sides?","body":"<p>The problem statement is :\nGiven an integer array A of size N.</p>\n<p>You can pick B elements from either left or right end of the array A to get maximum sum.\nFind and return this maximum possible sum.</p>\n<p>NOTE: Suppose B = 4 and array A contains 10 elements then:</p>\n<p>You can pick first four elements or can pick last four elements or can pick 1 from front and 3 from back etc . you need to return the maximum possible sum of elements you can pick.</p>\n<pre><code>public class Solution {\nArrayList&lt;Integer&gt; c = new ArrayList&lt;&gt;();\nArrayList&lt;Integer&gt; A= new ArrayList&lt;&gt;();\npublic int solve(ArrayList&lt;Integer&gt; A, int B) {\n   \n    if (B&gt;A.size()){\n        int sum=0;\n        for(int i=0;i&lt;A.size();i++)\n         sum= sum+A.get(i);\n        return sum;\n    }\n\n   int max_sum=0;\n for(int i=0;i&lt;A.size();i++){\n  if((max_sum&lt;suffix(A.size()-(B-i))+prefix(i-1)) ){\n       max_sum=suffix(A.size()-(B-i))+prefix(i-1);\n     }\n    }\n    return max_sum;\n}\n    \n    int prefix_sum=0;\n  int prefix(int a)   {\n      \n       for(int p=0;p&lt;a+1;p++){\n           c=A;\n            prefix_sum=prefix_sum + c.get(p);\n            }\n          return prefix_sum;\n                     }\n\n           int suffix_sum=0;\n           int suffix(int b){\n               c=A;\n        for(int q=b;q&lt;c.size();q++){\n           suffix_sum=suffix_sum+c.get(q);\n          }\n            return suffix_sum;\n         }\n</code></pre>\n<p>}</p>\n<p>I am getting runtime error, I have tried to implement the suffix and prefix methods which return the sum from the index[ 0, i] and sum from [i, N-i] respectively, then in the solve function I am trying to find the sum of prefix [a-1] +suffix[N-(b-a)] and find out the maximum sum, the syntax is completely correct, there is something wrong with the logic I assume, please help me find the correct solution by correcting this code instead of providing an alternative method</p>\n"},{"tags":["python","java","pandas","log4j","data-processing"],"owner":{"account_id":27260181,"reputation":15,"user_id":20783127,"display_name":"shrikant02"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682361305,"creation_date":1682340260,"question_id":76092027,"body_markdown":"I am building a application, in which I will read multiple logs and analyse the process and calls which are taking more time.\r\nIt is a multithreaded application, so the logs are not in order as shown below\r\n\r\n    2023.03.24 04:47:14,334 [INFO   ]  pool-499263-thread-13 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20114\r\n    2023.03.24 04:47:14,338 [INFO   ]  pool-499263-thread-10 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,338 [ERROR  ]  pool-499263-thread-10 SomeServiceAdapter: Error no result obtained 20897\r\n    2023.03.24 04:47:14,357 [INFO   ]  pool-499263-thread-12 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20806\r\n    2023.03.24 04:47:14,359 [INFO   ]  pool-499263-thread-11 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,377 [INFO   ]  pool-499263-thread-14 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20115\r\n    2023.03.24 04:47:14,382 [INFO   ]  pool-499263-thread-13 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,398 [INFO   ]  pool-499263-thread-15 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20116\r\n    2023.03.24 04:47:14,406 [INFO   ]  pool-499263-thread-12 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,419 [INFO   ]  pool-499263-thread-16 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/12064\r\n    2023.03.24 04:47:14,426 [INFO   ]  pool-499263-thread-14 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,426 [ERROR  ]  pool-499263-thread-14 SomeServiceAdapter: Error no result obtained 20115\r\n    2023.03.24 04:47:14,442 [INFO   ]  pool-499263-thread-17 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20110\r\n    2023.03.24 04:47:14,447 [INFO   ]  pool-499263-thread-15 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,463 [INFO   ]  pool-499263-thread-18 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20111\r\n    2023.03.24 04:47:14,468 [INFO   ]  pool-499263-thread-16 GetRequestHandler: Response received from SomeService.\r\n    2023.03.24 04:47:14,468 [ERROR  ]  pool-499263-thread-16 SomeServiceAdapter: Error no result obtained for 12064\r\n\r\n\r\n\r\nAs you can see the GET request to the service was executed by thread 13 and response for same request was received after 4-5 lines. I exported all the logs in pandas dataframe, and will use time of the logs to calculate the time taken by particular call. For that I need to group the logs of same call together and then subtract the times to calculate the difference.\r\n\r\n\r\nI can&#39;t think of any way to group the logs of same call together.\r\n\r\nThe snippet given below is how I want my logs to be shown. I want the threads in ascending order grouped by their own ID. The number following http:{...}/ is the ID of that process.\r\n\r\n    thread-1 Sending GET request to SomeService http:{.....}/12424 \r\n    thread-1 Response received from SomeService.\r\n    thread-2 Sending GET request to SomeService http:{....}/12344\r\n    thread-2 Error no result found 12344\r\n\r\nThere is no ID provided whenever a response is received successfully whereas an ID is provided for errors.  ","title":"Group log data based on threads","body":"<p>I am building a application, in which I will read multiple logs and analyse the process and calls which are taking more time.\nIt is a multithreaded application, so the logs are not in order as shown below</p>\n<pre><code>2023.03.24 04:47:14,334 [INFO   ]  pool-499263-thread-13 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20114\n2023.03.24 04:47:14,338 [INFO   ]  pool-499263-thread-10 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,338 [ERROR  ]  pool-499263-thread-10 SomeServiceAdapter: Error no result obtained 20897\n2023.03.24 04:47:14,357 [INFO   ]  pool-499263-thread-12 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20806\n2023.03.24 04:47:14,359 [INFO   ]  pool-499263-thread-11 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,377 [INFO   ]  pool-499263-thread-14 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20115\n2023.03.24 04:47:14,382 [INFO   ]  pool-499263-thread-13 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,398 [INFO   ]  pool-499263-thread-15 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20116\n2023.03.24 04:47:14,406 [INFO   ]  pool-499263-thread-12 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,419 [INFO   ]  pool-499263-thread-16 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/12064\n2023.03.24 04:47:14,426 [INFO   ]  pool-499263-thread-14 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,426 [ERROR  ]  pool-499263-thread-14 SomeServiceAdapter: Error no result obtained 20115\n2023.03.24 04:47:14,442 [INFO   ]  pool-499263-thread-17 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20110\n2023.03.24 04:47:14,447 [INFO   ]  pool-499263-thread-15 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,463 [INFO   ]  pool-499263-thread-18 GetRequestHandler: Sending GET request to SomeService http://{ request - url }/20111\n2023.03.24 04:47:14,468 [INFO   ]  pool-499263-thread-16 GetRequestHandler: Response received from SomeService.\n2023.03.24 04:47:14,468 [ERROR  ]  pool-499263-thread-16 SomeServiceAdapter: Error no result obtained for 12064\n</code></pre>\n<p>As you can see the GET request to the service was executed by thread 13 and response for same request was received after 4-5 lines. I exported all the logs in pandas dataframe, and will use time of the logs to calculate the time taken by particular call. For that I need to group the logs of same call together and then subtract the times to calculate the difference.</p>\n<p>I can't think of any way to group the logs of same call together.</p>\n<p>The snippet given below is how I want my logs to be shown. I want the threads in ascending order grouped by their own ID. The number following http:{...}/ is the ID of that process.</p>\n<pre><code>thread-1 Sending GET request to SomeService http:{.....}/12424 \nthread-1 Response received from SomeService.\nthread-2 Sending GET request to SomeService http:{....}/12344\nthread-2 Error no result found 12344\n</code></pre>\n<p>There is no ID provided whenever a response is received successfully whereas an ID is provided for errors.</p>\n"},{"tags":["java","double"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1682354304,"post_id":76094121,"comment_id":134198373,"body_markdown":"See https://stackoverflow.com/questions/588004 for why this happens. Please show what you&#39;ve *tried* with BigDecimal.","body":"See <a href=\"https://stackoverflow.com/questions/588004\">stackoverflow.com/questions/588004</a> for why this happens. Please show what you&#39;ve <i>tried</i> with BigDecimal."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1682354586,"post_id":76094121,"comment_id":134198439,"body_markdown":"Why not just use doubles and rounding?  Why is it necessary to improve on IEEE floating point arithmetic to add 12.69 to 15.99?  Seems silly.  The underlying problem is that you cannot represent 0.1 exactly in binary any more than you can 1/3 in decimal.","body":"Why not just use doubles and rounding?  Why is it necessary to improve on IEEE floating point arithmetic to add 12.69 to 15.99?  Seems silly.  The underlying problem is that you cannot represent 0.1 exactly in binary any more than you can 1/3 in decimal."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":1,"creation_date":1682355530,"post_id":76094121,"comment_id":134198664,"body_markdown":"Depending on  your application, you might be able to use rounding with [number formatting](https://docs.oracle.com/javase/tutorial/java/data/numberformat.html). If you need precision, as you would with monetary units, for example, you would use BigDecimal. Since you are not familiar with it, you should reference the [`BigDecimal` API](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html) .","body":"Depending on  your application, you might be able to use rounding with <a href=\"https://docs.oracle.com/javase/tutorial/java/data/numberformat.html\" rel=\"nofollow noreferrer\">number formatting</a>. If you need precision, as you would with monetary units, for example, you would use BigDecimal. Since you are not familiar with it, you should reference the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html\" rel=\"nofollow noreferrer\"><code>BigDecimal</code> API</a> ."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1682356916,"post_id":76094121,"comment_id":134198990,"body_markdown":"It might help to look for other questions tagged `java` and `bigdecimal`:  https://stackoverflow.com/questions/tagged/java+bigdecimal","body":"It might help to look for other questions tagged <code>java</code> and <code>bigdecimal</code>:  <a href=\"https://stackoverflow.com/questions/tagged/java+bigdecimal\">stackoverflow.com/questions/tagged/java+bigdecimal</a>"},{"owner":{"account_id":9359310,"reputation":3767,"user_id":7245145,"accept_rate":100,"display_name":"Steffi Keran Rani J"},"score":0,"creation_date":1682358464,"post_id":76094121,"comment_id":134199349,"body_markdown":"Could you take a look at the answer and let know if that&#39;s what you expected?","body":"Could you take a look at the answer and let know if that&#39;s what you expected?"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1682359330,"post_id":76094121,"comment_id":134199550,"body_markdown":"I get the expected answer  `(28.68)` for both `Double.parseDouble()` and `Double.valueOf()`.  Please post the code that is giving you the answer as you described it.","body":"I get the expected answer  <code>(28.68)</code> for both <code>Double.parseDouble()</code> and <code>Double.valueOf()</code>.  Please post the code that is giving you the answer as you described it."}],"answers":[{"tags":[],"owner":{"account_id":9359310,"reputation":3767,"user_id":7245145,"accept_rate":100,"display_name":"Steffi Keran Rani J"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682358412,"creation_date":1682358412,"answer_id":76094695,"question_id":76094121,"body_markdown":"I tried with `parseDouble`, `DecimalFormat` and it was able to provide me expected answer.\r\n\r\n### src\r\n\r\n\r\n    package org.example;\r\n    \r\n    import java.math.RoundingMode;\r\n    import java.text.DecimalFormat;\r\n    \r\n    import static java.lang.Double.parseDouble;\r\n    \r\n    public class JavaExercise {\r\n    \r\n        public JavaExercise() {\r\n            System.out.println(&quot;Hi&quot;);\r\n        }\r\n   \r\n    \r\n        Double addDouble(String a, String b){\r\n            DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\r\n            df.setRoundingMode(RoundingMode.FLOOR);\r\n            Double sum = parseDouble(a)+parseDouble(b);\r\n            return  parseDouble(df.format(sum));\r\n        }\r\n    }\r\n\r\n\r\n### test (Passed)\r\n\r\n    package org.example;\r\n    \r\n    import org.junit.jupiter.api.BeforeEach;\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.*;\r\n    \r\n    class JavaExerciseTest {\r\n    \r\n        JavaExercise javaExercise;\r\n    \r\n        @BeforeEach\r\n        void init(){\r\n            javaExercise = new JavaExercise();\r\n        }\r\n    \r\n    \r\n        @Test\r\n        public void testDouble(){\r\n            Double actual = javaExercise.addDouble(&quot;12.69&quot;, &quot;15.99&quot;);\r\n            Double expected = 28.68;\r\n            assertEquals(expected, actual);\r\n        }\r\n    \r\n        @Test\r\n        public void testLongDouble(){\r\n            Double actual = javaExercise.addDouble(&quot;12.690990&quot;, &quot;15.909990&quot;);\r\n            Double expected = 28.60;\r\n            assertEquals(expected, actual);\r\n        }\r\n    }","title":"Java: can&#39;t get exact sum of doubles","body":"<p>I tried with <code>parseDouble</code>, <code>DecimalFormat</code> and it was able to provide me expected answer.</p>\n<h3>src</h3>\n<pre><code>package org.example;\n\nimport java.math.RoundingMode;\nimport java.text.DecimalFormat;\n\nimport static java.lang.Double.parseDouble;\n\npublic class JavaExercise {\n\n    public JavaExercise() {\n        System.out.println(&quot;Hi&quot;);\n    }\n\n\n    Double addDouble(String a, String b){\n        DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\n        df.setRoundingMode(RoundingMode.FLOOR);\n        Double sum = parseDouble(a)+parseDouble(b);\n        return  parseDouble(df.format(sum));\n    }\n}\n</code></pre>\n<h3>test (Passed)</h3>\n<pre><code>package org.example;\n\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\nclass JavaExerciseTest {\n\n    JavaExercise javaExercise;\n\n    @BeforeEach\n    void init(){\n        javaExercise = new JavaExercise();\n    }\n\n\n    @Test\n    public void testDouble(){\n        Double actual = javaExercise.addDouble(&quot;12.69&quot;, &quot;15.99&quot;);\n        Double expected = 28.68;\n        assertEquals(expected, actual);\n    }\n\n    @Test\n    public void testLongDouble(){\n        Double actual = javaExercise.addDouble(&quot;12.690990&quot;, &quot;15.909990&quot;);\n        Double expected = 28.60;\n        assertEquals(expected, actual);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682360743,"creation_date":1682360743,"answer_id":76094986,"question_id":76094121,"body_markdown":"This answer comes in three parts:\r\n\r\n* Explanation of why doubles are inaccurate and why that isn&#39;t easily fixable.\r\n* The strategy that _usually_ results in the &#39;right&#39; answer with double math, and would in your case, but which has no particular guarantees\r\n* An explanation of how to use BigDecimal which does get you that guarantee, at the cost of other issues\r\n\r\n# Doubles are inaccurate\r\n\r\nTake a piece of paper.\r\n\r\nWrite down the result of 1 divided by 5. Write it down in decimal form. You&#39;ll write &quot;0.2&quot; and hand it back to me.\r\n\r\nSo far, so good.\r\n\r\nNow do the same thing, but this time, write down 1 divided by 3.\r\n\r\nYou&#39;ll find that this is not possible. You write 0.333333... and eventually you run out of space on the paper to write more threes. You hand it back to me and the number is very slightly inaccurate.\r\n\r\n`double` is __the same thing__. Except, computers are decimal. The reason 1/5 fits and 1/3 does not fit, is because we are writing in decimal (base 10), and 5 &#39;fits nicely&#39; in 10, but 3 does not. For the same reason, you can write down 1/2 (0.5 - because 2 fits in 10). Explaining why 1/4 fits is slightly more problematic (4 does not fit nicely into 10, but once you write down the part that does fit, which is 1/5, 1/20th is left, and 20 does fit nicely into 10) - but the same principle applies.\r\n\r\nComputers count in base 2. That&#39;s quite annoying - whereas the things that divide nicely into 10 is 1, 2, 5, 10, and anything that can be broken down into factors of those numbers, with base 2 it&#39;s _just_ 1 and 2. So 1/2, 1/4, 1/8, 5/16 - those all fit &#39;perfectly&#39;, but even something as simple as 0.1 (1/10th) does not fit.\r\n\r\nWitness:\r\n\r\n```\r\ndouble v = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\r\nSystem.out.println(v);\r\nSystem.out.println(1.0 == v);\r\n```\r\n\r\nThe above prints surprising results if you aren&#39;t aware of this rounding business. It does not print 1.0 (instead, 0.9999999), and it also does not print &#39;true&#39; - instead, it prints false. Which is weird.. 10 * 0.1 is obviously 1.0.\r\n\r\nThe rounding killed you here. It&#39;s identical to me asking you to write &#39;1/3&#39; on a note, do it two more times, and then asking you to add up the numbers on the 3 notes - which is no longer 1.0, but instead 0.9999999999 (not infinitely, just a lot, but a finite amount, of nines), and not equal to 1.0.\r\n\r\nA completely different way to think about it: `double` is represented by 64 bits.\r\n\r\nImagine I gave you 3 switches and the only way you can store information is by leaving the switching in an up or down state. You can &#39;remember&#39; 8 unique events: 000, 001, 010, 011, 100, 101, 110, and 111. That&#39;s it. Same with doubles, but instead of 8 (which is 2 to the 3rd power), it&#39;s a humongous number: 2 to the 64th power.\r\n\r\nBut that&#39;s still a finite amount of unique things you can remember, and there are an _infinite_ amount of numbers between 0 and 1, let alone between - and + infinity which is what double more or less oversimplified says it can represent.\r\n\r\nDoubles can actually only represent slightly fewer than 2^64 unique numbers. Let&#39;s call those the &#39;blessed&#39; numbers. For any number that isn&#39;t blessed, double math silently rounds to the nearest blessed number. The blessed numbers aren&#39;t uniformly divided: Near 1.0 there are very many, as you move away from 1.0 there are fewer and fewer.\r\n\r\n# So how do we use doubles?\r\n\r\nBy keeping in mind they have slight errors. This shows up in three ways:\r\n\r\n* When printing, always use `String.format` or similar.\r\n\r\nIf I slightly change our code above to:\r\n\r\n```\r\ndouble v = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\r\nSystem.out.println(String.format(&quot;%.3f&quot;, v));\r\n```\r\n\r\nIt prints 1.000, because the double we Have (0.99999999999999764 or so) indeed rounds to 1.000 if we explicitly say: Please print with at most 3 decimal places.\r\n\r\nIt is __always__ incorrect to just print a double, anywhere, unless you explicitly want the errors rendered. Instead, always, always use some rounding as you render.\r\n\r\nWhen comparing, keep in mind the error to, and use &#39;delta comparison&#39;. Instead of asking &#39;are `a` and `b` equal&#39;, ask &#39;is the absolute difference between `a` and `b` tiny?&#39;. This is how:\r\n\r\n```\r\ndouble EPSILON = 0.0000001;\r\ndouble v = 0.0;\r\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\r\nSystem.out.println(Math.abs(v - 1.0) &lt; EPSILON);\r\n```\r\n\r\nThat would print the desired `true`.\r\n\r\nBut, you&#39;re still playing with the fact that there are inaccuracies.\r\n\r\n# perfection and `BigDecimal`\r\n\r\nBigDecimal represents numbers perfectly and in decimal. The downside is, they are incredibly slow. Fortunately, computers are incredibly fast, so, that usually does not matter.\r\n\r\nThey also have all the downsides of the math itself: If you try to divide 1 by 3 in BigDecimal math, it throws an exception unless you tell it to round, which.. just gets you that rounding again. At least its controlled, but still.\r\n\r\n```\r\nBigDecimal a = new BigDecimal(&quot;12.69&quot;);\r\nBigDecimal b = new BigDecimal(&quot;15.99&quot;);\r\nBigDecimal c = a.add(b);\r\nSystem.out.println(c);\r\n```\r\n\r\nOften if you&#39;re trying to model something that has a distinct atomic unit, it&#39;s better to just store those atoms, in a `long`. For example, for most circumstances, the best way to store money is in cents. To store the bill total for 2 articles, one of which costs €15.99, the other  costs €12.69:\r\n\r\n```\r\nlong priceA = 1599;\r\nlong priceB = 1269;\r\nSystem.out.println(&quot;Bill total: €&quot; + formatCents(priceA + priceB));\r\n```\r\n\r\nworks great, where formatCents is from a library or if need be handwritten:\r\n\r\n\r\n```\r\npublic String formatCents(long v) {\r\n  boolean sign = v &gt;= 0;\r\n  if (!sign) v = -v;\r\n  int wholes = v / 100;\r\n  int parts = v % 100;\r\n  return String.format(&quot;%s%d.%02d&quot;, sign ? &quot; &quot; : &quot;-&quot;, wholes, parts);\r\n}\r\n```\r\n\r\n\r\nEvery currency has atomic units. Yen is just yen, dollars and euros have cents, even bitcoin has satoshis.\r\n","title":"Java: can&#39;t get exact sum of doubles","body":"<p>This answer comes in three parts:</p>\n<ul>\n<li>Explanation of why doubles are inaccurate and why that isn't easily fixable.</li>\n<li>The strategy that <em>usually</em> results in the 'right' answer with double math, and would in your case, but which has no particular guarantees</li>\n<li>An explanation of how to use BigDecimal which does get you that guarantee, at the cost of other issues</li>\n</ul>\n<h1>Doubles are inaccurate</h1>\n<p>Take a piece of paper.</p>\n<p>Write down the result of 1 divided by 5. Write it down in decimal form. You'll write &quot;0.2&quot; and hand it back to me.</p>\n<p>So far, so good.</p>\n<p>Now do the same thing, but this time, write down 1 divided by 3.</p>\n<p>You'll find that this is not possible. You write 0.333333... and eventually you run out of space on the paper to write more threes. You hand it back to me and the number is very slightly inaccurate.</p>\n<p><code>double</code> is <strong>the same thing</strong>. Except, computers are decimal. The reason 1/5 fits and 1/3 does not fit, is because we are writing in decimal (base 10), and 5 'fits nicely' in 10, but 3 does not. For the same reason, you can write down 1/2 (0.5 - because 2 fits in 10). Explaining why 1/4 fits is slightly more problematic (4 does not fit nicely into 10, but once you write down the part that does fit, which is 1/5, 1/20th is left, and 20 does fit nicely into 10) - but the same principle applies.</p>\n<p>Computers count in base 2. That's quite annoying - whereas the things that divide nicely into 10 is 1, 2, 5, 10, and anything that can be broken down into factors of those numbers, with base 2 it's <em>just</em> 1 and 2. So 1/2, 1/4, 1/8, 5/16 - those all fit 'perfectly', but even something as simple as 0.1 (1/10th) does not fit.</p>\n<p>Witness:</p>\n<pre><code>double v = 0.0;\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\nSystem.out.println(v);\nSystem.out.println(1.0 == v);\n</code></pre>\n<p>The above prints surprising results if you aren't aware of this rounding business. It does not print 1.0 (instead, 0.9999999), and it also does not print 'true' - instead, it prints false. Which is weird.. 10 * 0.1 is obviously 1.0.</p>\n<p>The rounding killed you here. It's identical to me asking you to write '1/3' on a note, do it two more times, and then asking you to add up the numbers on the 3 notes - which is no longer 1.0, but instead 0.9999999999 (not infinitely, just a lot, but a finite amount, of nines), and not equal to 1.0.</p>\n<p>A completely different way to think about it: <code>double</code> is represented by 64 bits.</p>\n<p>Imagine I gave you 3 switches and the only way you can store information is by leaving the switching in an up or down state. You can 'remember' 8 unique events: 000, 001, 010, 011, 100, 101, 110, and 111. That's it. Same with doubles, but instead of 8 (which is 2 to the 3rd power), it's a humongous number: 2 to the 64th power.</p>\n<p>But that's still a finite amount of unique things you can remember, and there are an <em>infinite</em> amount of numbers between 0 and 1, let alone between - and + infinity which is what double more or less oversimplified says it can represent.</p>\n<p>Doubles can actually only represent slightly fewer than 2^64 unique numbers. Let's call those the 'blessed' numbers. For any number that isn't blessed, double math silently rounds to the nearest blessed number. The blessed numbers aren't uniformly divided: Near 1.0 there are very many, as you move away from 1.0 there are fewer and fewer.</p>\n<h1>So how do we use doubles?</h1>\n<p>By keeping in mind they have slight errors. This shows up in three ways:</p>\n<ul>\n<li>When printing, always use <code>String.format</code> or similar.</li>\n</ul>\n<p>If I slightly change our code above to:</p>\n<pre><code>double v = 0.0;\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\nSystem.out.println(String.format(&quot;%.3f&quot;, v));\n</code></pre>\n<p>It prints 1.000, because the double we Have (0.99999999999999764 or so) indeed rounds to 1.000 if we explicitly say: Please print with at most 3 decimal places.</p>\n<p>It is <strong>always</strong> incorrect to just print a double, anywhere, unless you explicitly want the errors rendered. Instead, always, always use some rounding as you render.</p>\n<p>When comparing, keep in mind the error to, and use 'delta comparison'. Instead of asking 'are <code>a</code> and <code>b</code> equal', ask 'is the absolute difference between <code>a</code> and <code>b</code> tiny?'. This is how:</p>\n<pre><code>double EPSILON = 0.0000001;\ndouble v = 0.0;\nfor (int i = 0; i &lt; 10; i++) v += 0.1;\nSystem.out.println(Math.abs(v - 1.0) &lt; EPSILON);\n</code></pre>\n<p>That would print the desired <code>true</code>.</p>\n<p>But, you're still playing with the fact that there are inaccuracies.</p>\n<h1>perfection and <code>BigDecimal</code></h1>\n<p>BigDecimal represents numbers perfectly and in decimal. The downside is, they are incredibly slow. Fortunately, computers are incredibly fast, so, that usually does not matter.</p>\n<p>They also have all the downsides of the math itself: If you try to divide 1 by 3 in BigDecimal math, it throws an exception unless you tell it to round, which.. just gets you that rounding again. At least its controlled, but still.</p>\n<pre><code>BigDecimal a = new BigDecimal(&quot;12.69&quot;);\nBigDecimal b = new BigDecimal(&quot;15.99&quot;);\nBigDecimal c = a.add(b);\nSystem.out.println(c);\n</code></pre>\n<p>Often if you're trying to model something that has a distinct atomic unit, it's better to just store those atoms, in a <code>long</code>. For example, for most circumstances, the best way to store money is in cents. To store the bill total for 2 articles, one of which costs €15.99, the other  costs €12.69:</p>\n<pre><code>long priceA = 1599;\nlong priceB = 1269;\nSystem.out.println(&quot;Bill total: €&quot; + formatCents(priceA + priceB));\n</code></pre>\n<p>works great, where formatCents is from a library or if need be handwritten:</p>\n<pre><code>public String formatCents(long v) {\n  boolean sign = v &gt;= 0;\n  if (!sign) v = -v;\n  int wholes = v / 100;\n  int parts = v % 100;\n  return String.format(&quot;%s%d.%02d&quot;, sign ? &quot; &quot; : &quot;-&quot;, wholes, parts);\n}\n</code></pre>\n<p>Every currency has atomic units. Yen is just yen, dollars and euros have cents, even bitcoin has satoshis.</p>\n"}],"owner":{"account_id":7361469,"reputation":175,"user_id":5604617,"display_name":"Bia"},"comment_count":6,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1682718785,"answer_count":2,"score":-2,"last_activity_date":1682360743,"creation_date":1682354147,"question_id":76094121,"body_markdown":"I need to sum two or more doubles obtained from the parsing of strings.\r\nI verified that doubles are correctly interpreted. Suppose I have two doubles D1 = 12.69 and D2 = 15.99, I&#39;d expect sum to be D1+D2 = 28.68, but sum is actually composed by a huge number of decimal digits (ten or more). How can I get the sum with two decimal digits only?\r\n\r\nSomebody suggests to use BigDecimals in some other posts, but it&#39;s not clear to me how to use such kind of objects to obtain desired result.\r\n\r\n","title":"Java: can&#39;t get exact sum of doubles","body":"<p>I need to sum two or more doubles obtained from the parsing of strings.\nI verified that doubles are correctly interpreted. Suppose I have two doubles D1 = 12.69 and D2 = 15.99, I'd expect sum to be D1+D2 = 28.68, but sum is actually composed by a huge number of decimal digits (ten or more). How can I get the sum with two decimal digits only?</p>\n<p>Somebody suggests to use BigDecimals in some other posts, but it's not clear to me how to use such kind of objects to obtain desired result.</p>\n"},{"tags":["java","java-stream","flatmap","stream-operators"],"comments":[{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":3,"creation_date":1682349009,"post_id":76093196,"comment_id":134197075,"body_markdown":"It seems, you are looking for a &quot;one-liner&quot;? Something like `return repository.findById(id,number).map(Revision::getCommitId).flatMap(commitRepository::findById)`?","body":"It seems, you are looking for a &quot;one-liner&quot;? Something like <code>return repository.findById(id,number).map(Revision::getCommitId).fl&zwnj;&#8203;atMap(commitReposito&zwnj;&#8203;ry::findById)</code>?"}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682360326,"creation_date":1682360326,"answer_id":76094933,"question_id":76093196,"body_markdown":"As you mentioned, you should yous e the *flatMap* method. One way to do it would be like this:\r\n\r\n    repository.findById(id,number)\r\n    \t.map(revision -&gt; revision.getCommitId())\r\n    \t.flatMap(commitId -&gt; commitRepository.findById(commitId));\r\n    \t\r\nAdditionally, you can use method references for the *map* and *flatMap* parameters, resulting in a more concise code:\r\n\r\n    repository.findById(id,number)\r\n    \t.map(Revision::getCommitId)\r\n    \t.flatMap(commitRepository::findById);\r\n\r\n","title":"Java Stream Optional: How can I convert the multiple inner Optional present condition to Optional.flatMap()","body":"<p>As you mentioned, you should yous e the <em>flatMap</em> method. One way to do it would be like this:</p>\n<pre><code>repository.findById(id,number)\n    .map(revision -&gt; revision.getCommitId())\n    .flatMap(commitId -&gt; commitRepository.findById(commitId));\n    \n</code></pre>\n<p>Additionally, you can use method references for the <em>map</em> and <em>flatMap</em> parameters, resulting in a more concise code:</p>\n<pre><code>repository.findById(id,number)\n    .map(Revision::getCommitId)\n    .flatMap(commitRepository::findById);\n</code></pre>\n"}],"owner":{"account_id":20457178,"reputation":41,"user_id":15010561,"display_name":"Puneri Pagadi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682360326,"creation_date":1682347822,"question_id":76093196,"body_markdown":"I am trying to convert the multiple Optional isPresent to Optional.flatMap but not getting on how to do that.\r\n\r\n    private Optional&lt;Commit&gt; getCommit1 (String id, Integer number) {\r\n        **Optional&lt;Revision&gt; revision = repository.findById(id,number);\r\n        if (revision.isPresent()) {\r\n            Optional&lt;Commit&gt; commit = commitRepository.findById(revision.get().getCommitId());\r\n            if (commit.isPresent()) {\r\n                return commit;\r\n            }\r\n        }\r\n        return Optional.empty();**\r\n    }\r\n\r\n\r\nI want convert the bold part into single Optional.flatMap \r\nCan someone help here","title":"Java Stream Optional: How can I convert the multiple inner Optional present condition to Optional.flatMap()","body":"<p>I am trying to convert the multiple Optional isPresent to Optional.flatMap but not getting on how to do that.</p>\n<pre><code>private Optional&lt;Commit&gt; getCommit1 (String id, Integer number) {\n    **Optional&lt;Revision&gt; revision = repository.findById(id,number);\n    if (revision.isPresent()) {\n        Optional&lt;Commit&gt; commit = commitRepository.findById(revision.get().getCommitId());\n        if (commit.isPresent()) {\n            return commit;\n        }\n    }\n    return Optional.empty();**\n}\n</code></pre>\n<p>I want convert the bold part into single Optional.flatMap\nCan someone help here</p>\n"},{"tags":["java","spring-boot","maven","spring-boot-test"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1682360903,"post_id":76094853,"comment_id":134199890,"body_markdown":"Is there a good reason to have a separate module which contains those kind of test? What is special about those acceptance tests? Can you make a real example ?","body":"Is there a good reason to have a separate module which contains those kind of test? What is special about those acceptance tests? Can you make a real example ?"}],"answers":[{"comments":[{"owner":{"account_id":5888853,"reputation":467,"user_id":4636076,"accept_rate":32,"display_name":"Sandy"},"score":0,"creation_date":1682404150,"post_id":76094927,"comment_id":134205327,"body_markdown":"Thanks a lot Mark. Your suggestion works like a charm.. The main-app-boot was indeed a spring boot fat executable jar and I had to go ahead and make it as a normal jar and create a separate wrapper module.","body":"Thanks a lot Mark. Your suggestion works like a charm.. The main-app-boot was indeed a spring boot fat executable jar and I had to go ahead and make it as a normal jar and create a separate wrapper module."}],"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682360289,"creation_date":1682360289,"answer_id":76094927,"question_id":76094853,"body_markdown":"You haven&#39;t specified that explicitly, but according to the question&#39;s tags, I can assume that `main-app` is a spring boot application.\r\nIn this case, it is impossible to make a dependency on that jar (in this case on the `main-app` module) because Spring Boot application is not a jar. You can open it with WinRar/WinZip or any Linux utility and see that it doesn&#39;t follow the regular &quot;jar&quot; conventions, namely it includes a `BOOT-INF/lib` folder with all the dependencies on its own.\r\n\r\nSo, in terms of a solution, I suggest slightly refactor the application to use the following structure:\r\n\r\n```java\r\nparent\r\n\r\n|-- main-app-boot // this is a spring boot wrapper, no actual code is here\r\n\r\n|-- app-services  // all the business logic (services, other beans) are here, but no maven spring boot plugin in pom, so its a regular module\r\n\r\n|-- app-dao\r\n\r\n|-- acceptance-test // make a dependency on app-services here\r\n```\r\n\r\n\r\n","title":"Query regarding acceptance test maven module","body":"<p>You haven't specified that explicitly, but according to the question's tags, I can assume that <code>main-app</code> is a spring boot application.\nIn this case, it is impossible to make a dependency on that jar (in this case on the <code>main-app</code> module) because Spring Boot application is not a jar. You can open it with WinRar/WinZip or any Linux utility and see that it doesn't follow the regular &quot;jar&quot; conventions, namely it includes a <code>BOOT-INF/lib</code> folder with all the dependencies on its own.</p>\n<p>So, in terms of a solution, I suggest slightly refactor the application to use the following structure:</p>\n<pre class=\"lang-java prettyprint-override\"><code>parent\n\n|-- main-app-boot // this is a spring boot wrapper, no actual code is here\n\n|-- app-services  // all the business logic (services, other beans) are here, but no maven spring boot plugin in pom, so its a regular module\n\n|-- app-dao\n\n|-- acceptance-test // make a dependency on app-services here\n</code></pre>\n"}],"owner":{"account_id":5888853,"reputation":467,"user_id":4636076,"accept_rate":32,"display_name":"Sandy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76094927,"answer_count":1,"score":0,"last_activity_date":1682360289,"creation_date":1682359737,"question_id":76094853,"body_markdown":"I&#39;ve the following structure for my maven multi-module project:\r\n\r\n    parent\r\n    \r\n    |-- main-app\r\n    \r\n    |-- app-dao\r\n    \r\n    |-- acceptance-test\r\n\r\n\r\nThe pom.xml of acceptance-test module contains a maven dependency on main-app module.\r\n\r\nThe structure of the acceptance-test module looks like this:\r\n\r\n    acceptance-test\r\n    \r\n    |--src/test/java\r\n    |--src/test/resources\r\n\r\n\r\nThe `src/test/java` contains some test files which are dependent on some of the classes belonging to main-app module.\r\n\r\nWhen I run the acceptance test directly from my Intellij IDE, there is no compilation error and the Acceptance test works fine.\r\n\r\nBut as soon as I try to execute the acceptance-test module using `mvn clean install` command, it fails with Compilation Error.\r\n&quot;`Package abc.xyz doesn&#39;t exist`&quot;\r\n\r\n\r\nPlease help.\r\n","title":"Query regarding acceptance test maven module","body":"<p>I've the following structure for my maven multi-module project:</p>\n<pre><code>parent\n\n|-- main-app\n\n|-- app-dao\n\n|-- acceptance-test\n</code></pre>\n<p>The pom.xml of acceptance-test module contains a maven dependency on main-app module.</p>\n<p>The structure of the acceptance-test module looks like this:</p>\n<pre><code>acceptance-test\n\n|--src/test/java\n|--src/test/resources\n</code></pre>\n<p>The <code>src/test/java</code> contains some test files which are dependent on some of the classes belonging to main-app module.</p>\n<p>When I run the acceptance test directly from my Intellij IDE, there is no compilation error and the Acceptance test works fine.</p>\n<p>But as soon as I try to execute the acceptance-test module using <code>mvn clean install</code> command, it fails with Compilation Error.\n&quot;<code>Package abc.xyz doesn't exist</code>&quot;</p>\n<p>Please help.</p>\n"},{"tags":["java","android","nfc"],"owner":{"account_id":25030829,"reputation":15,"user_id":18888626,"display_name":"pol2020"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682360133,"creation_date":1682358965,"question_id":76094764,"body_markdown":"I use `NdefRecord.createApplicationRecord()` to write a NFC tag.\r\n\r\nI try to get a text when I read a NFC tag, it work when the app is launched\r\n\r\n```\r\nif (NfcAdapter.ACTION_TECH_DISCOVERED.equals(intent.getAction())) {\r\nParcelable[] ndefMessageArray = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);\r\n```\r\n\r\nbut when the tag launch the app, `intent.getAction()` is equals to `android.intent.action.MAIN` and not `android.nfc.action.TECH_DISCOVERED`\r\n\r\nI think `NfcAdapter.enableForegroundDispatch()` in the `onResume()` is not yet available to read the NFC tag in this case, how to solve this behavior ?\r\n\r\nThanks","title":"enableForegroundDispatch for Activity launched from an NFC tag","body":"<p>I use <code>NdefRecord.createApplicationRecord()</code> to write a NFC tag.</p>\n<p>I try to get a text when I read a NFC tag, it work when the app is launched</p>\n<pre><code>if (NfcAdapter.ACTION_TECH_DISCOVERED.equals(intent.getAction())) {\nParcelable[] ndefMessageArray = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);\n</code></pre>\n<p>but when the tag launch the app, <code>intent.getAction()</code> is equals to <code>android.intent.action.MAIN</code> and not <code>android.nfc.action.TECH_DISCOVERED</code></p>\n<p>I think <code>NfcAdapter.enableForegroundDispatch()</code> in the <code>onResume()</code> is not yet available to read the NFC tag in this case, how to solve this behavior ?</p>\n<p>Thanks</p>\n"},{"tags":["java","google-oauth","jakarta-mail","smtp-auth"],"comments":[{"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1682106522,"post_id":76076023,"comment_id":134169123,"body_markdown":"interesting idea,  not sure why you would want to.    It should work but you need to be sure to configure domain wide deligation to the service account and delicate to a user on your google workspace domain","body":"interesting idea,  not sure why you would want to.    It should work but you need to be sure to configure domain wide deligation to the service account and delicate to a user on your google workspace domain"},{"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1682106657,"post_id":76076023,"comment_id":134169140,"body_markdown":"just curious how did you make and apps password for a service account.   service account authorization is different than oauth2 I&#39;m ready surprised you got an access token at all","body":"just curious how did you make and apps password for a service account.   service account authorization is different than oauth2 I&#39;m ready surprised you got an access token at all"},{"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"score":0,"creation_date":1682351478,"post_id":76076023,"comment_id":134197750,"body_markdown":"Hi @LindaLawton-DaImTo\nI have configured domain wide delegation, there was a lot of push against it, given that according to google&#39;s documentation on OAuth2, DWD is optional and not needed; and a user need to setup an actual company, get a domain name and pay to access DWD.\n\nI did not make an App Password for the service account, my apologies if my question misinformed that. I meant to communicate that I had success with authenticating and sending mail when using a regular user and App-Password (given that Basic Auth is not supported i.e username and password).","body":"Hi @LindaLawton-DaImTo I have configured domain wide delegation, there was a lot of push against it, given that according to google&#39;s documentation on OAuth2, DWD is optional and not needed; and a user need to setup an actual company, get a domain name and pay to access DWD.  I did not make an App Password for the service account, my apologies if my question misinformed that. I meant to communicate that I had success with authenticating and sending mail when using a regular user and App-Password (given that Basic Auth is not supported i.e username and password)."},{"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"score":0,"creation_date":1682352097,"post_id":76076023,"comment_id":134197888,"body_markdown":"please see https://developers.google.com/identity/protocols/oauth2/service-account\nThere are two Libraries available that a user can use to get an access token for Oauth2. One would create the service account and setup so that it is live, then generate a key in JSON which contains the credentials of the service account, including private key. These are the step of (client-credential flow) what google refers to as service account.\nUsing GoogleCredential or ServiceAccountCredentials lib, you can acquire an access token to then use as documented here: https://javaee.github.io/javamail/OAuth2","body":"please see <a href=\"https://developers.google.com/identity/protocols/oauth2/service-account\" rel=\"nofollow noreferrer\">developers.google.com/identity/protocols/oauth2/service-acco&zwnj;&#8203;unt</a> There are two Libraries available that a user can use to get an access token for Oauth2. One would create the service account and setup so that it is live, then generate a key in JSON which contains the credentials of the service account, including private key. These are the step of (client-credential flow) what google refers to as service account. Using GoogleCredential or ServiceAccountCredentials lib, you can acquire an access token to then use as documented here: <a href=\"https://javaee.github.io/javamail/OAuth2\" rel=\"nofollow noreferrer\">javaee.github.io/javamail/OAuth2</a>"}],"answers":[{"comments":[{"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"score":0,"creation_date":1682397493,"post_id":76094898,"comment_id":134204561,"body_markdown":"I&#39;ll be running tests soon. I want to point that GoogleCredential is deprecated and does not support Oauth2. I will be using GoogleCredentials with &quot;s&quot; instead\nThis is for whomever may wish to follow in the future","body":"I&#39;ll be running tests soon. I want to point that GoogleCredential is deprecated and does not support Oauth2. I will be using GoogleCredentials with &quot;s&quot; instead This is for whomever may wish to follow in the future"},{"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1682414271,"post_id":76094898,"comment_id":134207521,"body_markdown":"Service account authencation isn&#39;t Oauth2 which is why i mentioned to begin with that im not even sure it will work but if you pass the access token returned it might work.     I will see if i can find some more up-to-date java code.","body":"Service account authencation isn&#39;t Oauth2 which is why i mentioned to begin with that im not even sure it will work but if you pass the access token returned it might work.     I will see if i can find some more up-to-date java code."},{"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"score":0,"creation_date":1682455791,"post_id":76094898,"comment_id":134218120,"body_markdown":"So I just ran some tests; I used GoogleCredentials instead of ServiceAccountCredentials. It still fails with the same syntax error\n\n[INFO] DEBUG SMTP: protocolConnect login, host=smtp.gmail.com, user=sample-service@smtpoauth2.iam.gserviceaccount.com, password=&lt;non-null&gt;\n[INFO] DEBUG SMTP: Authenticate with SASL\n[INFO] DEBUG SMTP: SASL mechanisms allowed: XOAUTH2\n[INFO] DEBUG SMTP: SASL Mechanisms:\n[INFO] DEBUG SMTP:  XOAUTH2\n[INFO] AUTH XOAUTH2 dXNlcj1kYmEtaWNuLWFwcEBzbXRwb2=\n[INFO] 555 5.5.2 Syntax error, goodbye. f17-20020ac86ed1000000b003ef2db16e72sm4715829qtv.94 - gsmtp","body":"So I just ran some tests; I used GoogleCredentials instead of ServiceAccountCredentials. It still fails with the same syntax error  [INFO] DEBUG SMTP: protocolConnect login, host=smtp.gmail.com, user=sample-service@smtpoauth2.iam.gserviceaccount.com, password=&lt;non-null&gt; [INFO] DEBUG SMTP: Authenticate with SASL [INFO] DEBUG SMTP: SASL mechanisms allowed: XOAUTH2 [INFO] DEBUG SMTP: SASL Mechanisms: [INFO] DEBUG SMTP:  XOAUTH2 [INFO] AUTH XOAUTH2 dXNlcj1kYmEtaWNuLWFwcEBzbXRwb2= [INFO] 555 5.5.2 Syntax error, goodbye. f17-20020ac86ed1000000b003ef2db16e72sm4715829qtv.94 - gsmtp"},{"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1682456245,"post_id":76094898,"comment_id":134218198,"body_markdown":"okay I will give it a try in the morning.    may ping the oauth team see what they have to say about this use case","body":"okay I will give it a try in the morning.    may ping the oauth team see what they have to say about this use case"},{"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"score":0,"creation_date":1682523537,"post_id":76094898,"comment_id":134230572,"body_markdown":"Thank you very much. the syntax error should come from the foramt of AUTH XOAUTH2 dXNlcj1kYmEtaWNuLWFwcEBzbXRwb2= i.e AUTH XOAUTH2 user+Bearer access token. \nBut it seems in accordance with googles documentation","body":"Thank you very much. the syntax error should come from the foramt of AUTH XOAUTH2 dXNlcj1kYmEtaWNuLWFwcEBzbXRwb2= i.e AUTH XOAUTH2 user+Bearer access token.  But it seems in accordance with googles documentation"}],"tags":[],"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682360064,"creation_date":1682360064,"answer_id":76094898,"question_id":76076023,"body_markdown":"I&#39;m just not sure why you want to use a service account with the smtp server.   A service account is used by gmail both api and smtp server to access the mail accounts of users on a google workspace domain.   If you are doing that then you should use the gmail api instead of the smtp server as its much easer to use.\r\n\r\n\r\nIf you are only accessing a single users gmail account then you could do this much easer with using an apps password for that user and then you can login when ever you need.   Or you could use Oauth2 and then store the refresh token and use that when ever you need to run the script.\r\n\r\n\r\nBut to answer your question to use a service account your going to have to denote which user on your google workspace domain you want to impersonate that is done by setting `setServiceAccountUser`\r\n\r\n    GoogleCredential credential = new GoogleCredential.Builder()\r\n      .setTransport(httpTransport)\r\n      .setJsonFactory(jsonFactory)\r\n      .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)\r\n      .setServiceAccountScopes(DirectoryScopes.ADMIN_DIRECTORY_USERS)\r\n      .setServiceAccountUser(userEmail)\r\n      .setServiceAccountPrivateKeyFromP12File(\r\n          new java.io.File(SERVICE_ACCOUNT_PKCS12_FILE_PATH))\r\n      .build();","title":"Does SMTP XOAUTH2 work when sending email using Google Services Account. It always returns: 555 5.5.2 Syntax error, goodbye. iy1-8plb.26 - gsmtp","body":"<p>I'm just not sure why you want to use a service account with the smtp server.   A service account is used by gmail both api and smtp server to access the mail accounts of users on a google workspace domain.   If you are doing that then you should use the gmail api instead of the smtp server as its much easer to use.</p>\n<p>If you are only accessing a single users gmail account then you could do this much easer with using an apps password for that user and then you can login when ever you need.   Or you could use Oauth2 and then store the refresh token and use that when ever you need to run the script.</p>\n<p>But to answer your question to use a service account your going to have to denote which user on your google workspace domain you want to impersonate that is done by setting <code>setServiceAccountUser</code></p>\n<pre><code>GoogleCredential credential = new GoogleCredential.Builder()\n  .setTransport(httpTransport)\n  .setJsonFactory(jsonFactory)\n  .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)\n  .setServiceAccountScopes(DirectoryScopes.ADMIN_DIRECTORY_USERS)\n  .setServiceAccountUser(userEmail)\n  .setServiceAccountPrivateKeyFromP12File(\n      new java.io.File(SERVICE_ACCOUNT_PKCS12_FILE_PATH))\n  .build();\n</code></pre>\n"}],"owner":{"account_id":15362393,"reputation":11,"user_id":11082852,"display_name":"Emmanuel Shedu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682360064,"creation_date":1682103408,"question_id":76076023,"body_markdown":"I have the following configuration to acquire an access token using Google&#39;s Service Account, use the access token to OAUTH2 authenticate and connect via SMTPTransport.\r\n\r\nThese are the mail session property:\r\n\r\n```\r\n&lt;mailSession description=&quot;SMTP javax.mail.session&quot; from=&quot;someone.iam.gserviceaccount.com&quot;&gt;\r\n    &lt;property name=&quot;mail.smtp.host&quot; value=&quot;smtp.gmail.com&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.auth&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.port&quot; value=&quot;587&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.ssl.enable&quot; value=&quot;false&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.sasl.enable&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.ehlo&quot; value=&quot;false&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.sasl.mechanisms&quot; value=&quot;XOAUTH2&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.auth.plain.disable&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.auth.login.disable&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.starttls.required&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.ssl.protocols&quot; value=&quot;TLSv1.2&quot;/&gt;\r\n    &lt;property name=&quot;mail.smtp.connectiontimeout&quot; value=&quot;10000&quot;/&gt;\r\n&lt;/mailSession&gt;\r\n```\r\n\r\nAcquire access token using Google Service Account Credentials:\r\n\r\n```\r\ntry (FileInputStream serviceAccountStream = new FileInputStream(credentialsPath)) { \r\n    credentials = ServiceAccountCredentials.fromStream(serviceAccountStream).createScoped(Collections.singleton(&quot;https://mail.google.com/&quot;));\r\n    credentials.refresh();\r\n    accessToken = credentials.getAccessToken();\r\n    System.out.println(&quot;Access token2: &quot; + accessToken.getTokenValue());\r\n}\r\n```\r\n\r\naccessToken holds the Access token Object. I have observed the token and confirmed the structure seems valid. i.e yaxx.c.dxVaekmxICgknK  \r\n  \r\nThis is where the error occurs, according to documentation on JavaMail 1.5.5+, authentication is done as follows:\r\n\r\n```\r\nSMTPTransport transport = new SMTPTransport(session, null);\r\ntransport.connect(&quot;smtp.gmail.com&quot;, 587, &quot;sender@example.com&quot;, accessToken);\r\n```\r\n\r\nThe above fails with the following error (private values have been edited):\r\n\r\n```\r\n250-ENHANCEDSTATUSCODES\r\n250-PIPELINING\r\n250-CHUNKING\r\n250 SMTPUTF8\r\nDEBUG SMTP: Found extension &quot;SIZE&quot;, arg &quot;35882577&quot;\r\nDEBUG SMTP: Found extension &quot;8BITMIME&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;AUTH&quot;, arg &quot;LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH&quot;\r\nDEBUG SMTP: Found extension &quot;ENHANCEDSTATUSCODES&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;PIPELINING&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;CHUNKING&quot;, arg &quot;&quot;\r\nDEBUG SMTP: Found extension &quot;SMTPUTF8&quot;, arg &quot;&quot;\r\nDEBUG SMTP: protocolConnect login, host=smtp.gmail.com, user=sample-service@gmail.iam.gserviceaccount.com, password=&lt;non-null&gt;\r\nDEBUG SMTP: Authenticate with SASL\r\nDEBUG SMTP: SASL mechanisms allowed: XOAUTH2\r\nDEBUG SMTP: SASL Mechanisms:\r\nDEBUG SMTP:  XOAUTH2\r\nDEBUG SMTP: \r\nDEBUG SMTP: SASL client XOAUTH2\r\nDEBUG SMTP: SASL callback length: 2\r\nDEBUG SMTP: SASL callback 0: javax.security.auth.callback.NameCallback@66fdec9\r\nDEBUG SMTP: SASL callback 1: javax.security.auth.callback.PasswordCallback@57abad67\r\nAUTH XOAUTH2 dXNlcj1zYW1wbGUtc2VydmljZUBnbWFpbC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbWF1dGg9QmVhcmVyIHlhMjkuYy5iMFZoZHNTVUhBanNvSldTT0lXU3VkbHNqc25zaXVoc2xpdW5hdVNVSDEzOHJsczgzbGFqYXFhaGhzOHVzaWRmamhza3VkYWRESAo=\r\n555 5.5.2 Syntax error, goodbye. f17-40040a170904ab9100b001922d98cb4esm19571022plr.288 - gsmtp\r\nDEBUG SMTP: SASL authentication failed\r\njavax.mail.AuthenticationFailedException: failed to connect\r\n\tat javax.mail.Service.connect(Service.java:403)\r\n```\r\n\r\nthe format of the sender and recipient are: &quot;someone@gmail.example.com&quot;  \r\nI am able to authenticate and thereby connect when using Google App Password (with the proper properties) but not this. I have also tried delegating users but that is not the issue. why do we get this\r\n\r\nI have tried different formats of the mail (e.g using &lt;&gt;)\r\nI have tried acquiring a G-suite in order to delegate users\r\n\r\n\r\nI expect to be able to Transport.connect and Transport.sendMessage using OAuth2.0, i.e my service account and token passed as the password","title":"Does SMTP XOAUTH2 work when sending email using Google Services Account. It always returns: 555 5.5.2 Syntax error, goodbye. iy1-8plb.26 - gsmtp","body":"<p>I have the following configuration to acquire an access token using Google's Service Account, use the access token to OAUTH2 authenticate and connect via SMTPTransport.</p>\n<p>These are the mail session property:</p>\n<pre><code>&lt;mailSession description=&quot;SMTP javax.mail.session&quot; from=&quot;someone.iam.gserviceaccount.com&quot;&gt;\n    &lt;property name=&quot;mail.smtp.host&quot; value=&quot;smtp.gmail.com&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.auth&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.port&quot; value=&quot;587&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.ssl.enable&quot; value=&quot;false&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.sasl.enable&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.ehlo&quot; value=&quot;false&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.sasl.mechanisms&quot; value=&quot;XOAUTH2&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.auth.plain.disable&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.auth.login.disable&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.starttls.required&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.ssl.protocols&quot; value=&quot;TLSv1.2&quot;/&gt;\n    &lt;property name=&quot;mail.smtp.connectiontimeout&quot; value=&quot;10000&quot;/&gt;\n&lt;/mailSession&gt;\n</code></pre>\n<p>Acquire access token using Google Service Account Credentials:</p>\n<pre><code>try (FileInputStream serviceAccountStream = new FileInputStream(credentialsPath)) { \n    credentials = ServiceAccountCredentials.fromStream(serviceAccountStream).createScoped(Collections.singleton(&quot;https://mail.google.com/&quot;));\n    credentials.refresh();\n    accessToken = credentials.getAccessToken();\n    System.out.println(&quot;Access token2: &quot; + accessToken.getTokenValue());\n}\n</code></pre>\n<p>accessToken holds the Access token Object. I have observed the token and confirmed the structure seems valid. i.e yaxx.c.dxVaekmxICgknK</p>\n<p>This is where the error occurs, according to documentation on JavaMail 1.5.5+, authentication is done as follows:</p>\n<pre><code>SMTPTransport transport = new SMTPTransport(session, null);\ntransport.connect(&quot;smtp.gmail.com&quot;, 587, &quot;sender@example.com&quot;, accessToken);\n</code></pre>\n<p>The above fails with the following error (private values have been edited):</p>\n<pre><code>250-ENHANCEDSTATUSCODES\n250-PIPELINING\n250-CHUNKING\n250 SMTPUTF8\nDEBUG SMTP: Found extension &quot;SIZE&quot;, arg &quot;35882577&quot;\nDEBUG SMTP: Found extension &quot;8BITMIME&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;AUTH&quot;, arg &quot;LOGIN PLAIN XOAUTH2 PLAIN-CLIENTTOKEN OAUTHBEARER XOAUTH&quot;\nDEBUG SMTP: Found extension &quot;ENHANCEDSTATUSCODES&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;PIPELINING&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;CHUNKING&quot;, arg &quot;&quot;\nDEBUG SMTP: Found extension &quot;SMTPUTF8&quot;, arg &quot;&quot;\nDEBUG SMTP: protocolConnect login, host=smtp.gmail.com, user=sample-service@gmail.iam.gserviceaccount.com, password=&lt;non-null&gt;\nDEBUG SMTP: Authenticate with SASL\nDEBUG SMTP: SASL mechanisms allowed: XOAUTH2\nDEBUG SMTP: SASL Mechanisms:\nDEBUG SMTP:  XOAUTH2\nDEBUG SMTP: \nDEBUG SMTP: SASL client XOAUTH2\nDEBUG SMTP: SASL callback length: 2\nDEBUG SMTP: SASL callback 0: javax.security.auth.callback.NameCallback@66fdec9\nDEBUG SMTP: SASL callback 1: javax.security.auth.callback.PasswordCallback@57abad67\nAUTH XOAUTH2 dXNlcj1zYW1wbGUtc2VydmljZUBnbWFpbC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbWF1dGg9QmVhcmVyIHlhMjkuYy5iMFZoZHNTVUhBanNvSldTT0lXU3VkbHNqc25zaXVoc2xpdW5hdVNVSDEzOHJsczgzbGFqYXFhaGhzOHVzaWRmamhza3VkYWRESAo=\n555 5.5.2 Syntax error, goodbye. f17-40040a170904ab9100b001922d98cb4esm19571022plr.288 - gsmtp\nDEBUG SMTP: SASL authentication failed\njavax.mail.AuthenticationFailedException: failed to connect\n    at javax.mail.Service.connect(Service.java:403)\n</code></pre>\n<p>the format of the sender and recipient are: &quot;someone@gmail.example.com&quot;<br />\nI am able to authenticate and thereby connect when using Google App Password (with the proper properties) but not this. I have also tried delegating users but that is not the issue. why do we get this</p>\n<p>I have tried different formats of the mail (e.g using &lt;&gt;)\nI have tried acquiring a G-suite in order to delegate users</p>\n<p>I expect to be able to Transport.connect and Transport.sendMessage using OAuth2.0, i.e my service account and token passed as the password</p>\n"},{"tags":["java","spring","spring-security","access-token"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1670956178,"post_id":74781904,"comment_id":131991481,"body_markdown":"maybe this tutorial will help: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui In there, I send OAuth2 authorized requests from a client (Tymeleaf @Controller) to a resource-server (@RestController) using `WebClient` configured to use identified user&#39;s access-token","body":"maybe this tutorial will help: <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">github.com/ch4mpy/spring-addons/tree/master/samples/tutorial&zwnj;&#8203;s/&hellip;</a> In there, I send OAuth2 authorized requests from a client (Tymeleaf @Controller) to a resource-server (@RestController) using <code>WebClient</code> configured to use identified user&#39;s access-token"},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1671093950,"post_id":74781904,"comment_id":132024743,"body_markdown":"&quot;The aim here is to demo OAuth2 configuration when a Spring backend is both a client and a resource-server.&quot; - sound extremely promising. I&#39;ll try to follow this now and tell you how it went.","body":"&quot;The aim here is to demo OAuth2 configuration when a Spring backend is both a client and a resource-server.&quot; - sound extremely promising. I&#39;ll try to follow this now and tell you how it went."},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1671784160,"post_id":74781904,"comment_id":132175124,"body_markdown":"Unfortunately, the prerequisites didn&#39;t fit my needs. Thanks for sharing, though!","body":"Unfortunately, the prerequisites didn&#39;t fit my needs. Thanks for sharing, though!"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1671787122,"post_id":74781904,"comment_id":132175768,"body_markdown":"What prerequisite exactly?","body":"What prerequisite exactly?"},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1672401883,"post_id":74781904,"comment_id":132282999,"body_markdown":"The one that disallows my to redirect unauthorized users to a login-page.","body":"The one that disallows my to redirect unauthorized users to a login-page."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672422187,"post_id":74781904,"comment_id":132288312,"body_markdown":"Then you&#39;ll have important security issues","body":"Then you&#39;ll have important security issues"},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1672645390,"post_id":74781904,"comment_id":132317507,"body_markdown":"Could be more specific? What important issues? I&#39;d be interested to understand what you know.","body":"Could be more specific? What important issues? I&#39;d be interested to understand what you know."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672673086,"post_id":74781904,"comment_id":132324591,"body_markdown":"To start with, users credentials are authorization-server business and should be exposed to neither client nor resource server.  The more actors see it, the larger is the attack surface. Second, unless you do not use any client side scripting language, you take the responsibility that the versions of those languages (and the platforms it runs into) are not exposed to any breach. All that not mentioning that if you spread login a cross clients, security improvements will have to be applied to all clients (MFA, security patches,...).","body":"To start with, users credentials are authorization-server business and should be exposed to neither client nor resource server.  The more actors see it, the larger is the attack surface. Second, unless you do not use any client side scripting language, you take the responsibility that the versions of those languages (and the platforms it runs into) are not exposed to any breach. All that not mentioning that if you spread login a cross clients, security improvements will have to be applied to all clients (MFA, security patches,...)."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672673855,"post_id":74781904,"comment_id":132324801,"body_markdown":"To take a simple sample, I would not trust a third party client asking my Google password to query Google API because this is precisely what OAuth2 solves. It would mean that the authors intentionally want to access my password or have not understood OAuth2 (which isn&#39;t a good news for security and is enough to prevent me from giving them any secret)","body":"To take a simple sample, I would not trust a third party client asking my Google password to query Google API because this is precisely what OAuth2 solves. It would mean that the authors intentionally want to access my password or have not understood OAuth2 (which isn&#39;t a good news for security and is enough to prevent me from giving them any secret)"}],"answers":[{"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1671792528,"post_id":74897600,"comment_id":132177087,"body_markdown":"Access-token format and validation is resource-server business, not client. From client perspective, access-tokens should remain black boxes. Do not try to decode a JWT or try to introspect an access-token from a client.","body":"Access-token format and validation is resource-server business, not client. From client perspective, access-tokens should remain black boxes. Do not try to decode a JWT or try to introspect an access-token from a client."},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":0,"creation_date":1672401851,"post_id":74897600,"comment_id":132282985,"body_markdown":"But my client needs to display certain information/options based on values from within the access token in the frontend. Any way of doing that without parsing the token in the client or elaborate token-ping-pong?","body":"But my client needs to display certain information/options based on values from within the access token in the frontend. Any way of doing that without parsing the token in the client or elaborate token-ping-pong?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672422129,"post_id":74897600,"comment_id":132288299,"body_markdown":"Use ID token or user info endpoint on clients. You can have config with opaque access tokens and JWT ID tokens (or no ID token at all and a user-info endpoint)","body":"Use ID token or user info endpoint on clients. You can have config with opaque access tokens and JWT ID tokens (or no ID token at all and a user-info endpoint)"},{"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"score":1,"creation_date":1672666443,"post_id":74897600,"comment_id":132322697,"body_markdown":"My token explicitly has &quot;frontend&quot; in the audience tag. The configuration is known not to change. I could try to use the userinfo-enpoint, but why would I if I already have the required information? Any justified arguments are welcome!","body":"My token explicitly has &quot;frontend&quot; in the audience tag. The configuration is known not to change. I could try to use the userinfo-enpoint, but why would I if I already have the required information? Any justified arguments are welcome!"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672672234,"post_id":74897600,"comment_id":132324359,"body_markdown":"https://auth0.com/blog/id-token-access-token-what-is-the-difference/","body":"<a href=\"https://auth0.com/blog/id-token-access-token-what-is-the-difference/\" rel=\"nofollow noreferrer\">auth0.com/blog/id-token-access-token-what-is-the-difference</a>"}],"tags":[],"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"comment_count":5,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1671784003,"creation_date":1671784003,"answer_id":74897600,"question_id":74781904,"body_markdown":"Thanks to those who tried to help me, but eventually I figured it out myself.\r\n\r\nI extended my Controllers by two attributes: `OAuth2AuthenticationToken authentication` and `HttpServletRequest request`.\r\n\r\n[![Controller-methods signature][1]][1]\r\n\r\nAlso, I `@Autowired` in the `OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository`.\r\n\r\n[![Autowired client-repository][2]][2]\r\n\r\nThis then allows the following call returning the value of the accessToken:\r\n`(oAuth2AuthorizedClientRepository.loadAuthorizedClient(myClientRegistrationId, authentication, request)).client.getAccessToken().getTokenValue();`.\r\n\r\nAfter that, it&#39;s just parsing the token and retrieving the values using `JWTParser.parse()` and provided methods from the `JWT`-result.\r\n\r\nPersonal note: Don&#39;t do the parsing and retrieving value parts in your controller to keep any more complex logic out of it.\r\n\r\nI hope this helps somebody!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/beJz0.png\r\n  [2]: https://i.stack.imgur.com/pUpHY.png","title":"Get the OAuth2/OIDC access token with every request in Spring","body":"<p>Thanks to those who tried to help me, but eventually I figured it out myself.</p>\n<p>I extended my Controllers by two attributes: <code>OAuth2AuthenticationToken authentication</code> and <code>HttpServletRequest request</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/beJz0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/beJz0.png\" alt=\"Controller-methods signature\" /></a></p>\n<p>Also, I <code>@Autowired</code> in the <code>OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/pUpHY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pUpHY.png\" alt=\"Autowired client-repository\" /></a></p>\n<p>This then allows the following call returning the value of the accessToken:\n<code>(oAuth2AuthorizedClientRepository.loadAuthorizedClient(myClientRegistrationId, authentication, request)).client.getAccessToken().getTokenValue();</code>.</p>\n<p>After that, it's just parsing the token and retrieving the values using <code>JWTParser.parse()</code> and provided methods from the <code>JWT</code>-result.</p>\n<p>Personal note: Don't do the parsing and retrieving value parts in your controller to keep any more complex logic out of it.</p>\n<p>I hope this helps somebody!</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671808773,"creation_date":1671796290,"answer_id":74899318,"question_id":74781904,"body_markdown":"Split your security in two with `http.securityMatcher` in the first picked `SecurityFilterChain` bean to restrict the endpoints it applies to (use `@Order` to control that), and configure WebClient to add access-token as Authorization header to its requests to resource-server (REST endpoints). This is demoed in [the tutorial][4] I already linked in my comment to your question. This tutorial matches exactly what you are asking, the fact that it uses Keycloak instead of PingOne as authorization server is a detail (solved by editing a property or two). \r\n\r\n# Resource-server security filter-chain\r\nAs reminder, a resource-server is a REST API secured with OAuth2. All end-points of `@RestController` and `@Controller` with `@ResponseBody` should be secured with a `SecurityFilterChain` containing `http.oauth2ResourceServer()`. The easiest way to configure a resource-server with Spring is using `spring-boot-starter-oauth2-resource-server` (or one of the very [thin wrappers I wrote][1] around it which enable to configure it from properties with 0 java conf)\r\n\r\nBy default with such filter-chains, Spring populates the security-context with a sub-class of `AbstractOAuth2TokenAuthenticationToken&lt;?&gt;`. You can retrieve the access-token from it. At least 2 options to access this Authentication instance:\r\n- `SecurityContextHolder.getContext().getAuthentication()`\r\n- have Spring auto-magically inject `AbstractOAuth2TokenAuthenticationToken&lt;?&gt; auth` as controller method parameter\r\n\r\nYou can also have the original authorization header injected as controller method parameter with `@RequestHeader(value = HttpHeaders.AUTHORIZATION) String authorizationHeader`.\r\n\r\nI expose various ways to configure resource-servers security filter-chain in [this tutorials][2].\r\n\r\n# Client security filter-chain\r\nEnd-points of `@Controller` returning a template name and secured with OAuth2 are clients. The easiest way to configure a Spring client is with `spring-boot-starter-oauth2-client` and `http.oauth2Login()`.\r\n\r\nNote that in this configuration, the request between the browser and the Spring client is not OAuth2 (it is most frequently secured with a session cookie, not a `Bearer` access-token in `Authorization` header). Only requests sent by the Spring client (on the server) to resource-servers are secured with OAuth2.\r\n\r\nWith client security filter-chain, security-context is populated with `OAuth2AuthenticationToken` which, on purpose, exposes ID-token  and not access-token. As reminder, ID tokens are holding user identity data and are intended to be used by clients when access-tokens audience is resource-servers and is designed for access-control. Clients should consider access-tokens as black box and use it only to authorize their requests to resource-servers (set `Bearer` `Authorization` header).\r\n\r\nYou can get the access-token string from `OAuth2AuthorizedClient`: `authorizedClient.getAccessToken().getTokenValue()`, which is itself retrieved from the `OAuth2AuthorizedClientService` you can auto-wire in your controllers: `authorizedClientService.loadAuthorizedClient(&quot;your-client-id&quot;, auth.getName())` (`auth` being the `OAuth2AuthenticationToken` instance retrieved from security-context via `SecurityContextHolder` or controller method parameter injection)\r\n\r\nIf you need to authorize a `WebClient` request from client to resource-server, you can do simpler than retrieve access token and position authorization header: do as in the [UiController][3] of [the tutorial][4] already linked in my comment to your question:\r\n```java\r\nfinal var authorizedClient = authorizedClientService.loadAuthorizedClient(&quot;spring-addons-public&quot;, auth.getName());\r\nfinal var response = webClient.get().uri(&quot;http://localhost:8080/api/greet&quot;)\r\n\t\t\t\t\t.attributes(ServerOAuth2AuthorizedClientExchangeFilterFunction.oauth2AuthorizedClient(authorizedClient))\r\n\t\t\t\t\t...\r\n```\r\nWith WebClient configured as follow:\r\n```java\r\n\t@Bean\r\n\tWebClient webClient(ClientRegistrationRepository clientRegistrationRepository,\r\n\t\t\tOAuth2AuthorizedClientService authorizedClientService) {\r\n\t\tvar oauth = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\r\n\t\t\t\tnew AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository,\r\n\t\t\t\t\t\tauthorizedClientService));\r\n\t\toauth.setDefaultClientRegistrationId(&quot;spring-addons-public&quot;);\r\n\t\treturn WebClient.builder().apply(oauth.oauth2Configuration()).build();\r\n\t}\r\n```\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\r\n  [3]: https://github.com/ch4mpy/spring-addons/blob/master/samples/tutorials/resource-server_with_ui/src/main/java/com/c4soft/springaddons/tutorials/UiController.java\r\n  [4]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui","title":"Get the OAuth2/OIDC access token with every request in Spring","body":"<p>Split your security in two with <code>http.securityMatcher</code> in the first picked <code>SecurityFilterChain</code> bean to restrict the endpoints it applies to (use <code>@Order</code> to control that), and configure WebClient to add access-token as Authorization header to its requests to resource-server (REST endpoints). This is demoed in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">the tutorial</a> I already linked in my comment to your question. This tutorial matches exactly what you are asking, the fact that it uses Keycloak instead of PingOne as authorization server is a detail (solved by editing a property or two).</p>\n<h1>Resource-server security filter-chain</h1>\n<p>As reminder, a resource-server is a REST API secured with OAuth2. All end-points of <code>@RestController</code> and <code>@Controller</code> with <code>@ResponseBody</code> should be secured with a <code>SecurityFilterChain</code> containing <code>http.oauth2ResourceServer()</code>. The easiest way to configure a resource-server with Spring is using <code>spring-boot-starter-oauth2-resource-server</code> (or one of the very <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">thin wrappers I wrote</a> around it which enable to configure it from properties with 0 java conf)</p>\n<p>By default with such filter-chains, Spring populates the security-context with a sub-class of <code>AbstractOAuth2TokenAuthenticationToken&lt;?&gt;</code>. You can retrieve the access-token from it. At least 2 options to access this Authentication instance:</p>\n<ul>\n<li><code>SecurityContextHolder.getContext().getAuthentication()</code></li>\n<li>have Spring auto-magically inject <code>AbstractOAuth2TokenAuthenticationToken&lt;?&gt; auth</code> as controller method parameter</li>\n</ul>\n<p>You can also have the original authorization header injected as controller method parameter with <code>@RequestHeader(value = HttpHeaders.AUTHORIZATION) String authorizationHeader</code>.</p>\n<p>I expose various ways to configure resource-servers security filter-chain in <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">this tutorials</a>.</p>\n<h1>Client security filter-chain</h1>\n<p>End-points of <code>@Controller</code> returning a template name and secured with OAuth2 are clients. The easiest way to configure a Spring client is with <code>spring-boot-starter-oauth2-client</code> and <code>http.oauth2Login()</code>.</p>\n<p>Note that in this configuration, the request between the browser and the Spring client is not OAuth2 (it is most frequently secured with a session cookie, not a <code>Bearer</code> access-token in <code>Authorization</code> header). Only requests sent by the Spring client (on the server) to resource-servers are secured with OAuth2.</p>\n<p>With client security filter-chain, security-context is populated with <code>OAuth2AuthenticationToken</code> which, on purpose, exposes ID-token  and not access-token. As reminder, ID tokens are holding user identity data and are intended to be used by clients when access-tokens audience is resource-servers and is designed for access-control. Clients should consider access-tokens as black box and use it only to authorize their requests to resource-servers (set <code>Bearer</code> <code>Authorization</code> header).</p>\n<p>You can get the access-token string from <code>OAuth2AuthorizedClient</code>: <code>authorizedClient.getAccessToken().getTokenValue()</code>, which is itself retrieved from the <code>OAuth2AuthorizedClientService</code> you can auto-wire in your controllers: <code>authorizedClientService.loadAuthorizedClient(&quot;your-client-id&quot;, auth.getName())</code> (<code>auth</code> being the <code>OAuth2AuthenticationToken</code> instance retrieved from security-context via <code>SecurityContextHolder</code> or controller method parameter injection)</p>\n<p>If you need to authorize a <code>WebClient</code> request from client to resource-server, you can do simpler than retrieve access token and position authorization header: do as in the <a href=\"https://github.com/ch4mpy/spring-addons/blob/master/samples/tutorials/resource-server_with_ui/src/main/java/com/c4soft/springaddons/tutorials/UiController.java\" rel=\"nofollow noreferrer\">UiController</a> of <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_with_ui\" rel=\"nofollow noreferrer\">the tutorial</a> already linked in my comment to your question:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final var authorizedClient = authorizedClientService.loadAuthorizedClient(&quot;spring-addons-public&quot;, auth.getName());\nfinal var response = webClient.get().uri(&quot;http://localhost:8080/api/greet&quot;)\n                    .attributes(ServerOAuth2AuthorizedClientExchangeFilterFunction.oauth2AuthorizedClient(authorizedClient))\n                    ...\n</code></pre>\n<p>With WebClient configured as follow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Bean\n    WebClient webClient(ClientRegistrationRepository clientRegistrationRepository,\n            OAuth2AuthorizedClientService authorizedClientService) {\n        var oauth = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n                new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository,\n                        authorizedClientService));\n        oauth.setDefaultClientRegistrationId(&quot;spring-addons-public&quot;);\n        return WebClient.builder().apply(oauth.oauth2Configuration()).build();\n    }\n</code></pre>\n"}],"owner":{"account_id":24339691,"reputation":19,"user_id":18277288,"display_name":"thies"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3064,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74897600,"answer_count":2,"score":2,"last_activity_date":1682359878,"creation_date":1670920090,"question_id":74781904,"body_markdown":"I&#39;m trying to enable multi-tenancy for a previously single-user system. The application used to run on a local server and had a relatively simple frontend baked in.\r\n\r\nNow I want to allow multiple users to simultaneously use it in a cloud environment. I went ahead and implemented Auth2 with OIDC and PKCE to redirect users to an external Auth Provider. What I want now is that for every request, the user sends his Access token with the request in order for me to decide what data to provide with the answer.\r\n\r\nI could not figure out how to obtain that data, as it seems that the spring framework (by default) only sends the ID token with the request. I suspect the fact that my software would simultaneously be the client and the resource server has something to do with it.\r\n\r\nThis is my first question, so I&#39;m very happy to modify or extend my question if I&#39;ve forgotten anything.\r\n\r\nWhat I&#39;ve tried to far:\r\n\r\nI&#39;ve used Postman to verify that the three tokens, ID token, refresh token and access token are issued correctly and can be retrieved with my credentials.\r\n\r\nI tried getting the access token from the request itself. Any parameters (like `@AuthenticationPrincipal OidcUser oidcUser`) in the controller that include the token, however, are only showing the ID token and not the access token.\r\n\r\nGetting the token via the `OAuth2AuthorizedClientService` does not work either, same problem, as I can only get the ID token, but not the access token.\r\n\r\n----------\r\n\r\nUpdate #1, 13.12.2022/11:40: I am using PingOne by PingIdentity as the authentication provider and the following dependencies are or might be related or helpful to this matter:\r\n\r\n - spring-boot-starter-web\r\n - spring-boot-starter-security\r\n - spring-boot-starter-thymeleaf\r\n - spring-boot-starter-web-services\r\n - spring-boot-starter-oauth2-resource-server","title":"Get the OAuth2/OIDC access token with every request in Spring","body":"<p>I'm trying to enable multi-tenancy for a previously single-user system. The application used to run on a local server and had a relatively simple frontend baked in.</p>\n<p>Now I want to allow multiple users to simultaneously use it in a cloud environment. I went ahead and implemented Auth2 with OIDC and PKCE to redirect users to an external Auth Provider. What I want now is that for every request, the user sends his Access token with the request in order for me to decide what data to provide with the answer.</p>\n<p>I could not figure out how to obtain that data, as it seems that the spring framework (by default) only sends the ID token with the request. I suspect the fact that my software would simultaneously be the client and the resource server has something to do with it.</p>\n<p>This is my first question, so I'm very happy to modify or extend my question if I've forgotten anything.</p>\n<p>What I've tried to far:</p>\n<p>I've used Postman to verify that the three tokens, ID token, refresh token and access token are issued correctly and can be retrieved with my credentials.</p>\n<p>I tried getting the access token from the request itself. Any parameters (like <code>@AuthenticationPrincipal OidcUser oidcUser</code>) in the controller that include the token, however, are only showing the ID token and not the access token.</p>\n<p>Getting the token via the <code>OAuth2AuthorizedClientService</code> does not work either, same problem, as I can only get the ID token, but not the access token.</p>\n<hr />\n<p>Update #1, 13.12.2022/11:40: I am using PingOne by PingIdentity as the authentication provider and the following dependencies are or might be related or helpful to this matter:</p>\n<ul>\n<li>spring-boot-starter-web</li>\n<li>spring-boot-starter-security</li>\n<li>spring-boot-starter-thymeleaf</li>\n<li>spring-boot-starter-web-services</li>\n<li>spring-boot-starter-oauth2-resource-server</li>\n</ul>\n"},{"tags":["java","intellij-idea","command-line","console","development-environment"],"comments":[{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":3,"creation_date":1363007666,"post_id":15339148,"comment_id":21663798,"body_markdown":"IntelliJ: check if System property `java.library.path` contains `C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 12.0.1\\bin`, or something like it","body":"IntelliJ: check if System property <code>java.library.path</code> contains <code>C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 12.0.1\\bin</code>, or something like it"},{"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"score":1,"creation_date":1492814788,"post_id":15339148,"comment_id":74158430,"body_markdown":"@vikingsteve: Caution, this only works on `Windows`. See my answer below for a platform-independent solution","body":"@vikingsteve: Caution, this only works on <code>Windows</code>. See my answer below for a platform-independent solution"}],"answers":[{"comments":[{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":2,"creation_date":1363009012,"post_id":15339663,"comment_id":21664711,"body_markdown":"That&#39;s great if you are running the IDE yourself :) If not, he needs another solution.","body":"That&#39;s great if you are running the IDE yourself :) If not, he needs another solution."},{"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"score":0,"creation_date":1363009990,"post_id":15339663,"comment_id":21665401,"body_markdown":"True. I don&#39;t see any reliable solution for the problem though. At least none that would not require user intervention to detect the environment.","body":"True. I don&#39;t see any reliable solution for the problem though. At least none that would not require user intervention to detect the environment."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1363013559,"post_id":15339663,"comment_id":21667775,"body_markdown":"Well did u see my comment on the question. It appears that IntelliJ leaves a hint in `java.library.path`... at least on v12.","body":"Well did u see my comment on the question. It appears that IntelliJ leaves a hint in <code>java.library.path</code>... at least on v12."},{"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"score":0,"creation_date":1363018953,"post_id":15339663,"comment_id":21671352,"body_markdown":"How is that a reliable solution that works across any IDE ? You cannot assume that the presence of the word &#39;eclipse&#39; or &#39;intellij&#39; on a library path means that the application was launched from the IDE. RCP applications still need eclipse equinox libraries. The same applies to applications that extend the Netbeans framework. Equinox can also serve as an OSGi container outside of eclipse.","body":"How is that a reliable solution that works across any IDE ? You cannot assume that the presence of the word &#39;eclipse&#39; or &#39;intellij&#39; on a library path means that the application was launched from the IDE. RCP applications still need eclipse equinox libraries. The same applies to applications that extend the Netbeans framework. Equinox can also serve as an OSGi container outside of eclipse."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":1,"creation_date":1363078099,"post_id":15339663,"comment_id":21694976,"body_markdown":"...of course it won&#39;t work across all IDE&#39;s (how many IDE&#39;s are there in the universe?), however if he only wants to identify a couple of them (for example Eclipse or IntelliJ) then a little bit of detective work might indeed show that from the runtime environment.","body":"...of course it won&#39;t work across all IDE&#39;s (how many IDE&#39;s are there in the universe?), however if he only wants to identify a couple of them (for example Eclipse or IntelliJ) then a little bit of detective work might indeed show that from the runtime environment."}],"tags":[],"owner":{"account_id":441056,"reputation":11115,"user_id":830964,"accept_rate":50,"display_name":"Deepak Bala"},"comment_count":5,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1363007982,"creation_date":1363007982,"answer_id":15339663,"question_id":15339148,"body_markdown":"There is no reliable way to do that. The IDE itself would use a JRE / JDK that is installed on your system or one that comes packaged with the IDE. There is nothing in the SDK / JVM that specifically identifies itself as running from within an IDE. \r\n\r\nIf you need to identify this in your program, pass a system property through the -D flag when you run the code from the IDE. The presence (or absence) of this property can be used to determine where the code is being run from.","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>There is no reliable way to do that. The IDE itself would use a JRE / JDK that is installed on your system or one that comes packaged with the IDE. There is nothing in the SDK / JVM that specifically identifies itself as running from within an IDE. </p>\n\n<p>If you need to identify this in your program, pass a system property through the -D flag when you run the code from the IDE. The presence (or absence) of this property can be used to determine where the code is being run from.</p>\n"},{"comments":[{"owner":{"account_id":4262902,"reputation":296,"user_id":3486801,"accept_rate":82,"display_name":"dominic.e"},"score":1,"creation_date":1503295339,"post_id":37049420,"comment_id":78538032,"body_markdown":"Still working and tested on MacOS latest IntelliJ. Thanks ;)","body":"Still working and tested on MacOS latest IntelliJ. Thanks ;)"},{"owner":{"account_id":1144386,"reputation":28762,"user_id":1127485,"accept_rate":83,"display_name":"sschuberth"},"score":1,"creation_date":1627575681,"post_id":37049420,"comment_id":121199000,"body_markdown":"That&#39;s not working anymore for me with IntelliJ 2021.2 (in a Kotlin / Gradle project). It used to work before.","body":"That&#39;s not working anymore for me with IntelliJ 2021.2 (in a Kotlin / Gradle project). It used to work before."},{"owner":{"account_id":1395326,"reputation":8690,"user_id":1325216,"accept_rate":58,"display_name":"Sander Verhagen"},"score":1,"creation_date":1638689487,"post_id":37049420,"comment_id":124151142,"body_markdown":"I believe it still works for debug-runs, but not for non-debug ones.","body":"I believe it still works for debug-runs, but not for non-debug ones."}],"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"comment_count":3,"down_vote_count":1,"up_vote_count":28,"is_accepted":false,"score":27,"last_activity_date":1552039495,"creation_date":1462447667,"answer_id":37049420,"question_id":15339148,"body_markdown":"The following code can detect whether your code is ran from [`IntelliJ IDEA`][1] or not.\r\n\r\n\tpublic static boolean runningFromIntelliJ()\r\n\t{\r\n\t\tString classPath = System.getProperty(&quot;java.class.path&quot;);\r\n\t\treturn classPath.contains(&quot;idea_rt.jar&quot;);\r\n\t}\r\n\r\nIt&#39;s tested working on `Linux`, `Mac OS X` and `Windows` so it should be platform independent.\r\n\r\n  [1]: https://www.jetbrains.com/idea/","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>The following code can detect whether your code is ran from <a href=\"https://www.jetbrains.com/idea/\" rel=\"noreferrer\"><code>IntelliJ IDEA</code></a> or not.</p>\n\n<pre><code>public static boolean runningFromIntelliJ()\n{\n    String classPath = System.getProperty(\"java.class.path\");\n    return classPath.contains(\"idea_rt.jar\");\n}\n</code></pre>\n\n<p>It's tested working on <code>Linux</code>, <code>Mac OS X</code> and <code>Windows</code> so it should be platform independent.</p>\n"},{"comments":[{"owner":{"account_id":121188,"reputation":5073,"user_id":314089,"accept_rate":60,"display_name":"icyerasor"},"score":1,"creation_date":1663257487,"post_id":56972144,"comment_id":130201955,"body_markdown":"Seems to not be working anymore, at least if its a gradle project. Manually setting a System Property or EnvVariable when launching through IDE seems to be the way to go.","body":"Seems to not be working anymore, at least if its a gradle project. Manually setting a System Property or EnvVariable when launching through IDE seems to be the way to go."},{"owner":{"account_id":147942,"reputation":1844,"user_id":359394,"accept_rate":75,"display_name":"gdt"},"score":0,"creation_date":1663344899,"post_id":56972144,"comment_id":130225347,"body_markdown":"Yeah. that&#39;s probably for the best!","body":"Yeah. that&#39;s probably for the best!"}],"tags":[],"owner":{"account_id":147942,"reputation":1844,"user_id":359394,"accept_rate":75,"display_name":"gdt"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1562766466,"creation_date":1562766466,"answer_id":56972144,"question_id":15339148,"body_markdown":"This only works if you&#39;re not using one of the &quot;Shorten command line&quot; options from the Run/Debug configuration. As we need to shorten the command line (the classpath was geting too long) I&#39;m now using\r\n\r\n```\r\npublic static boolean runningFromIntelliJ()\r\n{\r\n    return System.getProperty(&quot;idea.test.cyclic.buffer.size&quot;) != null;\r\n}\r\n```\r\n\r\nIntelliJ sets that property when it&#39;s running tests.","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>This only works if you're not using one of the \"Shorten command line\" options from the Run/Debug configuration. As we need to shorten the command line (the classpath was geting too long) I'm now using</p>\n\n<pre><code>public static boolean runningFromIntelliJ()\n{\n    return System.getProperty(\"idea.test.cyclic.buffer.size\") != null;\n}\n</code></pre>\n\n<p>IntelliJ sets that property when it's running tests.</p>\n"},{"tags":[],"owner":{"account_id":16917,"reputation":37,"user_id":37358,"display_name":"piero B"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668262496,"creation_date":1668262496,"answer_id":74413669,"question_id":15339148,"body_markdown":"Tested on a Mac with Eclipse and IntelliJ:\r\n\r\n```String xpcsce = System.getenv(&quot;XPC_SERVICE_NAME&quot;) );```\r\n\r\nwill return &quot;0&quot; with Terminal, &quot;application.org.eclipse.platform.ide....&quot; with Eclipse and &quot;application.com.jetbrains.intellij.ie-EAP....&quot; with IntelliJ... \r\n\r\nBut XPC Service is a MacOS specific feature so this won&#39;t work on any other platform.","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>Tested on a Mac with Eclipse and IntelliJ:</p>\n<p><code>String xpcsce = System.getenv(&quot;XPC_SERVICE_NAME&quot;) );</code></p>\n<p>will return &quot;0&quot; with Terminal, &quot;application.org.eclipse.platform.ide....&quot; with Eclipse and &quot;application.com.jetbrains.intellij.ie-EAP....&quot; with IntelliJ...</p>\n<p>But XPC Service is a MacOS specific feature so this won't work on any other platform.</p>\n"},{"comments":[{"owner":{"account_id":14886556,"reputation":4394,"user_id":10749567,"display_name":"Ola Str&#246;m"},"score":1,"creation_date":1681888347,"post_id":75229355,"comment_id":134127649,"body_markdown":"Thanks - This is the only one that&#39;s working as of 2023 (IntelliJ IDEA 2022.3.2)","body":"Thanks - This is the only one that&#39;s working as of 2023 (IntelliJ IDEA 2022.3.2)"}],"tags":[],"owner":{"account_id":1062115,"reputation":2086,"user_id":1063501,"display_name":"Mark Woon"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1674616044,"creation_date":1674616044,"answer_id":75229355,"question_id":15339148,"body_markdown":"There is no reliable way of doing this without a custom run argument, BUT!\r\n\r\nThis works more reliably than checking for `idea_rt.jar`:\r\n\r\n```\r\npublic static void main(String[] args)  {\r\n   boolean intellij = false;\r\n   try {\r\n      intellij = Main.class.getClassLoader().loadClass(&quot;com.intellij.rt.execution.application.AppMainV2&quot;) != null;\r\n   } catch (ClassNotFoundException e) {\r\n   }\r\n   System.out.println(intellij);\r\n}\r\n```\r\n\r\nSource: https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000015340/comments/360000017399","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>There is no reliable way of doing this without a custom run argument, BUT!</p>\n<p>This works more reliably than checking for <code>idea_rt.jar</code>:</p>\n<pre><code>public static void main(String[] args)  {\n   boolean intellij = false;\n   try {\n      intellij = Main.class.getClassLoader().loadClass(&quot;com.intellij.rt.execution.application.AppMainV2&quot;) != null;\n   } catch (ClassNotFoundException e) {\n   }\n   System.out.println(intellij);\n}\n</code></pre>\n<p>Source: <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000015340/comments/360000017399\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000015340/comments/360000017399</a></p>\n"},{"tags":[],"owner":{"account_id":27042767,"reputation":33,"user_id":20597388,"display_name":"pvpb0t"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682359780,"creation_date":1682359369,"answer_id":76094811,"question_id":15339148,"body_markdown":"Here is some ways:\r\n\r\n```java\r\n    private static boolean checkIntelliJIDEA() {\r\n        try {\r\n            URL ideDetectorClassLocation = IdeDetector.class.getProtectionDomain().getCodeSource().getLocation();\r\n            File ideDetectorClassFile = new File(ideDetectorClassLocation.toURI());\r\n            return ideDetectorClassFile.isDirectory();\r\n        } catch (URISyntaxException e) {\r\n            System.err.println(&quot;Error determining if the application is running in an IDE: &quot; + e.getMessage());\r\n        }\r\n\r\n        String ideaLaunchProperty = System.getProperty(&quot;idea.launcher.port&quot;);\r\n        String ideaRunConfigProperty = System.getProperty(&quot;idea.run.configuration&quot;);\r\n        String classpath = System.getProperty(&quot;java.class.path&quot;);\r\n         if(classpath.contains(&quot;idea_rt.jar&quot;)) return true;\r\n         if(ideaLaunchProperty != null) return true;\r\n         if(ideaRunConfigProperty != null) return true;\r\n        if(ideaRunConfigProperty != null) return true;\r\n        try {\r\n            Class.forName(&quot;com.intellij.rt.execution.application.AppMainV2&quot;);\r\n            Class.forName(&quot;com.intellij.rt.execution.application.AppMain&quot;);\r\n            return true;\r\n        } catch (ClassNotFoundException e) {\r\n            return false;\r\n        }\r\n\r\n    }\r\n```","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>Here is some ways:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static boolean checkIntelliJIDEA() {\n        try {\n            URL ideDetectorClassLocation = IdeDetector.class.getProtectionDomain().getCodeSource().getLocation();\n            File ideDetectorClassFile = new File(ideDetectorClassLocation.toURI());\n            return ideDetectorClassFile.isDirectory();\n        } catch (URISyntaxException e) {\n            System.err.println(&quot;Error determining if the application is running in an IDE: &quot; + e.getMessage());\n        }\n\n        String ideaLaunchProperty = System.getProperty(&quot;idea.launcher.port&quot;);\n        String ideaRunConfigProperty = System.getProperty(&quot;idea.run.configuration&quot;);\n        String classpath = System.getProperty(&quot;java.class.path&quot;);\n         if(classpath.contains(&quot;idea_rt.jar&quot;)) return true;\n         if(ideaLaunchProperty != null) return true;\n         if(ideaRunConfigProperty != null) return true;\n        if(ideaRunConfigProperty != null) return true;\n        try {\n            Class.forName(&quot;com.intellij.rt.execution.application.AppMainV2&quot;);\n            Class.forName(&quot;com.intellij.rt.execution.application.AppMain&quot;);\n            return true;\n        } catch (ClassNotFoundException e) {\n            return false;\n        }\n\n    }\n</code></pre>\n"}],"owner":{"account_id":1691660,"reputation":1564,"user_id":1553874,"accept_rate":88,"display_name":"Nir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4247,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":15339663,"answer_count":6,"score":10,"last_activity_date":1682359780,"creation_date":1363006554,"question_id":15339148,"body_markdown":"I would like to know if there is a way (programmatically) to check if a code is running within Eclipse, IntelliJ, any other editor or running from the command line (console).\r\n\r\nI was thinking to use System.getProperty() but is there any property that indicate this?","title":"Check if Java code is running from IntelliJ, Eclipse, etc or command line","body":"<p>I would like to know if there is a way (programmatically) to check if a code is running within Eclipse, IntelliJ, any other editor or running from the command line (console).</p>\n<p>I was thinking to use System.getProperty() but is there any property that indicate this?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1671107227,"post_id":74810287,"comment_id":132029251,"body_markdown":"Why does `spring-boot-starter-validation` have a version? This either means you are mixing modules from different version of Spring and Spring Boot or that you have another issue in your setup.","body":"Why does <code>spring-boot-starter-validation</code> have a version? This either means you are mixing modules from different version of Spring and Spring Boot or that you have another issue in your setup."},{"owner":{"account_id":3766723,"reputation":246,"user_id":3130060,"accept_rate":67,"display_name":"unknowncodder"},"score":0,"creation_date":1672211846,"post_id":74810287,"comment_id":132241976,"body_markdown":"Did you solve this problem ? @Captain Adil","body":"Did you solve this problem ? @Captain Adil"},{"owner":{"account_id":9727108,"reputation":33,"user_id":15305756,"display_name":"Captain Adil"},"score":0,"creation_date":1673873541,"post_id":74810287,"comment_id":132587551,"body_markdown":"Yes i solved. I was sending scope instead of scopes in postman . It is now working","body":"Yes i solved. I was sending scope instead of scopes in postman . It is now working"}],"answers":[{"comments":[{"owner":{"account_id":12939173,"reputation":990,"user_id":9355534,"display_name":"Shark Deng"},"score":0,"creation_date":1695042245,"post_id":75098281,"comment_id":135967122,"body_markdown":"Good answer! Solved my problem!","body":"Good answer! Solved my problem!"}],"tags":[],"owner":{"account_id":2042407,"reputation":713,"user_id":1823251,"accept_rate":57,"display_name":"Mihai Ocneanu"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1673535520,"creation_date":1673535520,"answer_id":75098281,"question_id":74810287,"body_markdown":"I had a similar problem - I don&#39;t know what changed under the hood from 0.3 to 1.0, but there is a sample app available for the authorization server [here][1].\r\n\r\nBasically, the SecurityFilterChain bean configuration is different, and it will also require a JwtDecoder [bean][2].\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-authorization-server/blob/f06ed40bbf3e6765626f6850909507203fde59c5/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java#L64\r\n  [2]: https://github.com/spring-projects/spring-authorization-server/blob/f06ed40bbf3e6765626f6850909507203fde59c5/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java#L124","title":"I was trying to update new spring security oauth2 authorization server from 0.3.1 to 1.0.0 and got an invalide scope error.How to fix it","body":"<p>I had a similar problem - I don't know what changed under the hood from 0.3 to 1.0, but there is a sample app available for the authorization server <a href=\"https://github.com/spring-projects/spring-authorization-server/blob/f06ed40bbf3e6765626f6850909507203fde59c5/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java#L64\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Basically, the SecurityFilterChain bean configuration is different, and it will also require a JwtDecoder <a href=\"https://github.com/spring-projects/spring-authorization-server/blob/f06ed40bbf3e6765626f6850909507203fde59c5/samples/default-authorizationserver/src/main/java/sample/config/AuthorizationServerConfig.java#L124\" rel=\"nofollow noreferrer\">bean</a>.</p>\n"}],"owner":{"account_id":9727108,"reputation":33,"user_id":15305756,"display_name":"Captain Adil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1973,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":75098281,"answer_count":1,"score":2,"last_activity_date":1682359712,"creation_date":1671101104,"question_id":74810287,"body_markdown":"This is the error i get\r\n\r\n    https://spring.io/?error=invalid_scope&amp;error_description=OAuth%202.0%20Parameter:%20scope&amp;error_uri=https://datatracker.ietf.org/doc/html/rfc6749%23section-4.1.2.1\r\n\r\nI get clients from database here is my oauth2 configuration:\r\n\r\n    @Bean\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public SecurityFilterChain securityAuthFilterChain(HttpSecurity http) throws Exception {\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n        return http.formLogin().and().build();\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public AuthorizationServerSettings authorizationServerSettings(){return AuthorizationServerSettings.builder().build();}\r\n\r\n    @Bean\r\n    public JWKSource&lt;SecurityContext&gt; jwkSource(){\r\n\r\n        RSAKey rsaKey = JwksKeys.generateRSAKey();\r\n        JWKSet set = new JWKSet(rsaKey);\r\n        return (j, sc) -&gt; j.select(set);\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public OAuth2TokenCustomizer&lt;JwtEncodingContext&gt; jwtCustomizer() {\r\n        return context -&gt; {\r\n            if (context.getTokenType() == OAuth2TokenType.ACCESS_TOKEN) {\r\n                Authentication principal = context.getPrincipal();\r\n                Set&lt;String&gt; authorities = principal.getAuthorities().stream()\r\n                        .map(GrantedAuthority::getAuthority)\r\n                        .collect(Collectors.toSet());\r\n                for (String s:authorities)\r\n                    System.out.println(s);\r\n                context.getClaims().claim(&quot;roles&quot;, authorities);\r\n            }\r\n        };\r\n    }\r\nThis is my WebSecurity Class :\r\n\r\n     private final CorsCustomizer corsCustomizer;\r\n    private final UserService userService;\r\n    private final ClientService clientService;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        OAuth2AuthorizationServerConfigurer configurer = new OAuth2AuthorizationServerConfigurer();\r\n        http.apply(configurer);\r\n\r\n        configurer.registeredClientRepository(clientService);\r\n        corsCustomizer.customize(http);\r\n\r\n        return http.formLogin()\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/users/**&quot;).permitAll()\r\n                .requestMatchers(&quot;/clients/**&quot;).permitAll()\r\n                .requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/**&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .csrf().ignoringRequestMatchers(&quot;/users/**&quot;, &quot;/clients/**&quot;)\r\n                .and().build();\r\n    }\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        var provider = new DaoAuthenticationProvider();\r\n        provider.setUserDetailsService(userService);\r\n        provider.setPasswordEncoder(passwordEncoder());\r\n        return new ProviderManager(provider);\r\n    }\r\n\r\n\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder(){\r\n        return NoOpPasswordEncoder.getInstance();\r\n    }\r\n\r\n\r\nAnd it is how i send request :\r\n\r\n    http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=client&amp;scope=openid&amp;redirect_uri=https://spring.io/auth\r\n\r\n\r\nThis is my pom :\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n            &lt;version&gt;1.18.22&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.2.25&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\r\n            &lt;version&gt;1.4.2.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nMy client service :\r\n\r\n    private final ClientRepository clientRepository;\r\n\r\n    @Override\r\n    public void save(RegisteredClient registeredClient) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public RegisteredClient findById(String id) {\r\n        Client client = clientRepository.findById(id).orElseThrow();\r\n        return toRegisteredClient(client);\r\n    }\r\n\r\n    @Override\r\n    public RegisteredClient findByClientId(String clientId) {\r\n        return findById(clientId);\r\n    }\r\n\r\n    public ClientDto createClient(CreateClientRequest request) {\r\n        var client = new Client(request);\r\n        var scopes = request.getScopes().stream().map(ClientScope::new).collect(Collectors.toSet());\r\n        client.setScopes(scopes);\r\n        client.setClientRedirectUrls(request.getRedirectUris().stream()\r\n                .map(url -&gt; new ClientRedirectUrl(url, client))\r\n                .collect(Collectors.toSet()));\r\n        clientRepository.save(client);\r\n        return new ClientDto(client);\r\n    }\r\n\r\n    public RegisteredClient toRegisteredClient(Client client) {\r\n        RegisteredClient.Builder builder = RegisteredClient.withId(client.getId())\r\n                .clientId(client.getId())\r\n                .clientSecret(client.getSecret())\r\n                .clientAuthenticationMethod(client.getAuthenticationMethod())\r\n                .authorizationGrantTypes(\r\n                        authorizationGrantTypes -&gt; authorizationGrantTypes.addAll(client.getGrantTypes()))\r\n                .redirectUris(\r\n                        redirectUris -&gt; redirectUris.addAll(client.getClientRedirectUrls()\r\n                                .stream()\r\n                                .map(ClientRedirectUrl::getUrl)\r\n                                .collect(Collectors.toSet())))\r\n                .scopes(scopes -&gt; scopes.addAll(client.getScopes()\r\n                        .stream()\r\n                        .map(ClientScope::getScope)\r\n                        .collect(Collectors.toSet())));\r\n        return builder.build();\r\n    }\r\nAfter i updated to oauth2 1.0.0 it began to give me invalid scope error and it doesn&#39;t redirect to login page like it did before. How can i fix it?","title":"I was trying to update new spring security oauth2 authorization server from 0.3.1 to 1.0.0 and got an invalide scope error.How to fix it","body":"<p>This is the error i get</p>\n<pre><code>https://spring.io/?error=invalid_scope&amp;error_description=OAuth%202.0%20Parameter:%20scope&amp;error_uri=https://datatracker.ietf.org/doc/html/rfc6749%23section-4.1.2.1\n</code></pre>\n<p>I get clients from database here is my oauth2 configuration:</p>\n<pre><code>@Bean\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic SecurityFilterChain securityAuthFilterChain(HttpSecurity http) throws Exception {\n    OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n    return http.formLogin().and().build();\n}\n\n\n\n@Bean\npublic AuthorizationServerSettings authorizationServerSettings(){return AuthorizationServerSettings.builder().build();}\n\n@Bean\npublic JWKSource&lt;SecurityContext&gt; jwkSource(){\n\n    RSAKey rsaKey = JwksKeys.generateRSAKey();\n    JWKSet set = new JWKSet(rsaKey);\n    return (j, sc) -&gt; j.select(set);\n}\n\n\n\n@Bean\npublic OAuth2TokenCustomizer&lt;JwtEncodingContext&gt; jwtCustomizer() {\n    return context -&gt; {\n        if (context.getTokenType() == OAuth2TokenType.ACCESS_TOKEN) {\n            Authentication principal = context.getPrincipal();\n            Set&lt;String&gt; authorities = principal.getAuthorities().stream()\n                    .map(GrantedAuthority::getAuthority)\n                    .collect(Collectors.toSet());\n            for (String s:authorities)\n                System.out.println(s);\n            context.getClaims().claim(&quot;roles&quot;, authorities);\n        }\n    };\n}\n</code></pre>\n<p>This is my WebSecurity Class :</p>\n<pre><code> private final CorsCustomizer corsCustomizer;\nprivate final UserService userService;\nprivate final ClientService clientService;\n\n@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    OAuth2AuthorizationServerConfigurer configurer = new OAuth2AuthorizationServerConfigurer();\n    http.apply(configurer);\n\n    configurer.registeredClientRepository(clientService);\n    corsCustomizer.customize(http);\n\n    return http.formLogin()\n            .and()\n            .authorizeHttpRequests()\n            .requestMatchers(&quot;/users/**&quot;).permitAll()\n            .requestMatchers(&quot;/clients/**&quot;).permitAll()\n            .requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/**&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .csrf().ignoringRequestMatchers(&quot;/users/**&quot;, &quot;/clients/**&quot;)\n            .and().build();\n}\n\n@Bean\npublic AuthenticationManager authenticationManagerBean() throws Exception {\n    var provider = new DaoAuthenticationProvider();\n    provider.setUserDetailsService(userService);\n    provider.setPasswordEncoder(passwordEncoder());\n    return new ProviderManager(provider);\n}\n\n\n\n@Bean\npublic PasswordEncoder passwordEncoder(){\n    return NoOpPasswordEncoder.getInstance();\n}\n</code></pre>\n<p>And it is how i send request :</p>\n<pre><code>http://localhost:8080/oauth2/authorize?response_type=code&amp;client_id=client&amp;scope=openid&amp;redirect_uri=https://spring.io/auth\n</code></pre>\n<p>This is my pom :</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n        &lt;version&gt;1.18.22&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n        &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n        &lt;version&gt;1.6.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;42.2.25&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n        &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n        &lt;version&gt;1.4.2.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>My client service :</p>\n<pre><code>private final ClientRepository clientRepository;\n\n@Override\npublic void save(RegisteredClient registeredClient) {\n\n}\n\n@Override\npublic RegisteredClient findById(String id) {\n    Client client = clientRepository.findById(id).orElseThrow();\n    return toRegisteredClient(client);\n}\n\n@Override\npublic RegisteredClient findByClientId(String clientId) {\n    return findById(clientId);\n}\n\npublic ClientDto createClient(CreateClientRequest request) {\n    var client = new Client(request);\n    var scopes = request.getScopes().stream().map(ClientScope::new).collect(Collectors.toSet());\n    client.setScopes(scopes);\n    client.setClientRedirectUrls(request.getRedirectUris().stream()\n            .map(url -&gt; new ClientRedirectUrl(url, client))\n            .collect(Collectors.toSet()));\n    clientRepository.save(client);\n    return new ClientDto(client);\n}\n\npublic RegisteredClient toRegisteredClient(Client client) {\n    RegisteredClient.Builder builder = RegisteredClient.withId(client.getId())\n            .clientId(client.getId())\n            .clientSecret(client.getSecret())\n            .clientAuthenticationMethod(client.getAuthenticationMethod())\n            .authorizationGrantTypes(\n                    authorizationGrantTypes -&gt; authorizationGrantTypes.addAll(client.getGrantTypes()))\n            .redirectUris(\n                    redirectUris -&gt; redirectUris.addAll(client.getClientRedirectUrls()\n                            .stream()\n                            .map(ClientRedirectUrl::getUrl)\n                            .collect(Collectors.toSet())))\n            .scopes(scopes -&gt; scopes.addAll(client.getScopes()\n                    .stream()\n                    .map(ClientScope::getScope)\n                    .collect(Collectors.toSet())));\n    return builder.build();\n}\n</code></pre>\n<p>After i updated to oauth2 1.0.0 it began to give me invalid scope error and it doesn't redirect to login page like it did before. How can i fix it?</p>\n"},{"tags":["java","spring-boot","spring-security","google-oauth"],"answers":[{"comments":[{"owner":{"account_id":27353774,"reputation":1,"user_id":20862515,"display_name":"Ezio"},"score":0,"creation_date":1672060052,"post_id":74918506,"comment_id":132214294,"body_markdown":"Thanks for the tutorials link. I forgot to mention that I am using **Google** as the Authentication provider. I added the Google client ID and secret key and changed the _jwt-issuer-uri_ and _jwk-set-uri_ in your application. What other changes do I have to bring to redirect to google for authentication? I am new to this concept so can you help me out?","body":"Thanks for the tutorials link. I forgot to mention that I am using <b>Google</b> as the Authentication provider. I added the Google client ID and secret key and changed the <i>jwt-issuer-uri</i> and <i>jwk-set-uri</i> in your application. What other changes do I have to bring to redirect to google for authentication? I am new to this concept so can you help me out?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672065568,"post_id":74918506,"comment_id":132215328,"body_markdown":"Are you sure that the access tokens you get from Google are JWTs? Check it on https://jwt.io. For opaque tokens, introspection should be used instead of JWT decoder.","body":"Are you sure that the access tokens you get from Google are JWTs? Check it on <a href=\"https://jwt.io\" rel=\"nofollow noreferrer\">jwt.io</a>. For opaque tokens, introspection should be used instead of JWT decoder."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672065742,"post_id":74918506,"comment_id":132215361,"body_markdown":"Also, as far as I know, Google authorization-servers are &quot;reserved&quot; to Google resource-servers. Use an authorization-server of your own with &quot;social login&quot; in front of it. Many OIDC authorization-server do it out of the box (Keycloak, Auth0, Amazon Cognito,...)","body":"Also, as far as I know, Google authorization-servers are &quot;reserved&quot; to Google resource-servers. Use an authorization-server of your own with &quot;social login&quot; in front of it. Many OIDC authorization-server do it out of the box (Keycloak, Auth0, Amazon Cognito,...)"},{"owner":{"account_id":27353774,"reputation":1,"user_id":20862515,"display_name":"Ezio"},"score":0,"creation_date":1672074064,"post_id":74918506,"comment_id":132217051,"body_markdown":"Yeah, actually it generates opaque token as well as JWT. So, using my own authorization-server is the way to do it? Can you suggest any reference material for learning Keycloak?","body":"Yeah, actually it generates opaque token as well as JWT. So, using my own authorization-server is the way to do it? Can you suggest any reference material for learning Keycloak?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672079148,"post_id":74918506,"comment_id":132218071,"body_markdown":"Their getting started guide is quite good. You can also have a look at my tutorials. For production environments, you should also consider OIDC SaaS offers like Auth0, Cognito, etc., it could save you quite some hassle","body":"Their getting started guide is quite good. You can also have a look at my tutorials. For production environments, you should also consider OIDC SaaS offers like Auth0, Cognito, etc., it could save you quite some hassle"},{"owner":{"account_id":27353774,"reputation":1,"user_id":20862515,"display_name":"Ezio"},"score":0,"creation_date":1672244962,"post_id":74918506,"comment_id":132250811,"body_markdown":"Thanks. Cam you suggest where to look for the introspection uri of google?","body":"Thanks. Cam you suggest where to look for the introspection uri of google?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1672251618,"post_id":74918506,"comment_id":132252686,"body_markdown":"I have not found a standard introspection endpoint. I fear you&#39;ll have to write your own introspector using the user-info endpoint. I personally don&#39;t use introspection for performance reasons (this is way too inefficient and slow)","body":"I have not found a standard introspection endpoint. I fear you&#39;ll have to write your own introspector using the user-info endpoint. I personally don&#39;t use introspection for performance reasons (this is way too inefficient and slow)"}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672043313,"creation_date":1672043313,"answer_id":74918506,"question_id":74917751,"body_markdown":"Requests between a web-browser and a Spring OAuth2 **client** are not OAuth2. By default, it is secured with sessions, not `Bearer` `Authorization` header.\r\n\r\nPostman is primarily a REST client, not a web browser. It is intended to test REST APIs (`@RestController` or `@Controller` with `@ResponseBody`) which are **resource-servers**, not clients.\r\n\r\nIt is possible for an app to be both a resource-server (REST API) and a client (`@Controller` with methods returning the name of Thymeleaf templates or using WebClient to query other OAuth2 web-services), but you&#39;ll have to configure two separate SecurityFilterChains segregated with `securityMatcher`:\r\n- a &quot;client&quot; one with sessions, CSRF protection and oauth2Login for your Thymeleaf pages (or JSF or any other server-side rendering framework)\r\n- a &quot;resource-server&quot; one with JWT decoder or introspection and likely disabled sessions and CSRF.\r\n\r\nYou can refer to [those tutorials][1] I wrote for instructions to configure a resource-server (there is even a tutorial with a Spring app being both resource-server and client)\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"Cannot access protected URL using postman","body":"<p>Requests between a web-browser and a Spring OAuth2 <strong>client</strong> are not OAuth2. By default, it is secured with sessions, not <code>Bearer</code> <code>Authorization</code> header.</p>\n<p>Postman is primarily a REST client, not a web browser. It is intended to test REST APIs (<code>@RestController</code> or <code>@Controller</code> with <code>@ResponseBody</code>) which are <strong>resource-servers</strong>, not clients.</p>\n<p>It is possible for an app to be both a resource-server (REST API) and a client (<code>@Controller</code> with methods returning the name of Thymeleaf templates or using WebClient to query other OAuth2 web-services), but you'll have to configure two separate SecurityFilterChains segregated with <code>securityMatcher</code>:</p>\n<ul>\n<li>a &quot;client&quot; one with sessions, CSRF protection and oauth2Login for your Thymeleaf pages (or JSF or any other server-side rendering framework)</li>\n<li>a &quot;resource-server&quot; one with JWT decoder or introspection and likely disabled sessions and CSRF.</li>\n</ul>\n<p>You can refer to <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">those tutorials</a> I wrote for instructions to configure a resource-server (there is even a tutorial with a Spring app being both resource-server and client)</p>\n"}],"owner":{"account_id":27353774,"reputation":1,"user_id":20862515,"display_name":"Ezio"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682359264,"creation_date":1672036029,"question_id":74917751,"body_markdown":"I am having trouble with a Spring Boot OAuth2 project. I created my application as a client and started the server. I am able to access the protected URLs using my browser but cannot do the same using Postman (even after creating an OAuth2.0 Token and sending it as an Authorization header). While trying it with Postman it always returns an HTML document of the google sign in page.\r\nI&#39;m using the \r\n```\r\noauth2-client \r\n```\r\ndependency for my application.\r\n\r\nI tried adding a custom filter but it&#39;s not working. I even tried using the JWT token instead of the access_token (opaque token) issued but that didn&#39;t work either. \r\nWhen I&#39;m trying to access the protected URLs using the browser it is able to get information of the signed in user and is returning the expected value.\r\n\r\nEdit: I am using Google as the authentication provider.","title":"Cannot access protected URL using postman","body":"<p>I am having trouble with a Spring Boot OAuth2 project. I created my application as a client and started the server. I am able to access the protected URLs using my browser but cannot do the same using Postman (even after creating an OAuth2.0 Token and sending it as an Authorization header). While trying it with Postman it always returns an HTML document of the google sign in page.\nI'm using the</p>\n<pre><code>oauth2-client \n</code></pre>\n<p>dependency for my application.</p>\n<p>I tried adding a custom filter but it's not working. I even tried using the JWT token instead of the access_token (opaque token) issued but that didn't work either.\nWhen I'm trying to access the protected URLs using the browser it is able to get information of the signed in user and is returning the expected value.</p>\n<p>Edit: I am using Google as the authentication provider.</p>\n"},{"tags":["java","spring","spring-boot","h2"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1682237623,"post_id":76083694,"comment_id":134181204,"body_markdown":"Hello, the error is not about price in product table but in inoices_details. You have it defined in DB but not in Java code. Add it to entity and set a value. Or remove from the table if not needed.","body":"Hello, the error is not about price in product table but in inoices_details. You have it defined in DB but not in Java code. Add it to entity and set a value. Or remove from the table if not needed."},{"owner":{"account_id":25091091,"reputation":3,"user_id":18942722,"display_name":"ramalandajo"},"score":0,"creation_date":1682265111,"post_id":76083694,"comment_id":134184433,"body_markdown":"@Mar-Z you are absolutely right, I deleted the price in the schema and the error went away, I got a stackoverflow instead but already solved it. Thanks a bunch!","body":"@Mar-Z you are absolutely right, I deleted the price in the schema and the error went away, I got a stackoverflow instead but already solved it. Thanks a bunch!"}],"owner":{"account_id":25091091,"reputation":3,"user_id":18942722,"display_name":"ramalandajo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682358899,"creation_date":1682236251,"question_id":76083694,"body_markdown":"I am doing a SpringBoot Java project simulating a VERY basic ecommerce. I need to do a Post using postman to create a new Invoice to simulate a client buying something. The Post would be like this:\r\n\r\n```\r\n{\r\n    &quot;client&quot;: {\r\n        &quot;id&quot;: 1, \r\n        &quot;name&quot;: &quot;Ramiro&quot;,\r\n        &quot;lastname&quot;: &quot;Landajo&quot;,\r\n        &quot;docnumber&quot;: &quot;11111111&quot; \r\n        },\r\n    &quot;items&quot;: [\r\n        {\r\n            &quot;amount&quot;: 20,\r\n            &quot;product&quot;: {\r\n                &quot;id&quot;: 1,\r\n                &quot;description&quot;: &quot;Control Remoto&quot;,\r\n                &quot;code&quot;: &quot;123&quot;,\r\n                &quot;stock&quot;: 50,\r\n                &quot;price&quot;: 100.00\r\n            }\r\n        },\r\n        {\r\n            &quot;amount&quot;: 2,\r\n            &quot;product&quot;: {\r\n                &quot;id&quot;: 2,\r\n                &quot;description&quot;: &quot;PlayStation 5&quot;,\r\n                &quot;code&quot;: &quot;567&quot;,\r\n                &quot;stock&quot;: 2,\r\n                &quot;price&quot;: 2000.00\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nSo I have a ClientModel class, a ProductModel class, an InvoiceModel class and inside the invoice model one of the attributes is a list containing InvoiceDetailsModel class which would be the items in the postman request, one for each product. The first problem I am having is that when send the post, the id on the InvoicesDetailsModel doesnt autogenerate and is always null, although I have GenerationType.IDENTITY set up, as you can see here:\r\n\r\n```\r\n2023-04-22 20:13:49.832  INFO 14448 --- [nio-8080-exec-2] c.L.D.services.InvoiceService            : Saved Invoice: InvoiceModel(id=3, client=ClientModel(id=1, name=Ramiro, lastname=Landajo, docnumber=11111111), created_at=2023-04-22T20:13:49.788108800, items=[InvoiceDetailsModel(id=null, amount=20, product=ProductModel(id=1, description=Control Remoto, code=123, stock=50, price=100.0)), **InvoiceDetailsModel(id=null**, amount=2, product=ProductModel(id=2, description=PlayStation 5, code=567, stock=2, price=2000.0))], total=6000.0)\r\n2023-04-22 20:13:49.832  INFO 14448 --- [nio-8080-exec-2] c.L.D.services.InvoiceService            : Test: InvoiceDetailsModel(id=null, amount=20, product=ProductModel(id=1, description=Control Remoto, code=123, stock=50, price=100.0))\r\n```\r\n\r\nBut it still works so maybe thats because of the other error im getting. The other error says the following:\r\n\r\n```\r\n2023-04-22 20:13:49.837 ERROR 14448 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column &quot;PRICE&quot;; SQL statement:\r\ninsert into invoices_details (invoice_detail_id, amount, invoice_id, product_id) values (default, ?, ?, ?) [23502-214]\r\n2023-04-22 20:13:49.849 ERROR 14448 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause\r\norg.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;PRICE&quot;; SQL statement:\r\ninsert into invoices_details (invoice_detail_id, amount, invoice_id, product_id) values (default, ?, ?, ?) [23502-214]\r\n\r\n```\r\nIt says i have an error on line 63 where its where im saving the InvoicesDetailsModel on the DB (which is h2 btw). This is the part of the Invoice service class (that saves the Invoices and the InvoicesDetails, there is no InvoicesDetailsService class).\r\n\r\n```\r\nList&lt;InvoiceDetailsModel&gt; listDetails = new ArrayList&lt;&gt;();\r\nfor (InvoiceDetailsModel item : newInvoice.getItems()){\r\n    log.info(&quot;Prueba: &quot; + item.toString());\r\n    item.setInvoice(newInvoice);\r\n    listDetails.add(item);\r\n    this.invoiceDetailsRepository.save(item);\r\n}\r\n```\r\n\r\n\r\nI dont understand why it says that price is null when i clearly am sending the price in postman AND it appears in the logs on the IDE. Can anyone PLEASE help me?\r\nHere are the models, schema and invoice service:\r\nInvoiceModel.java\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport javax.persistence.*;\r\nimport javax.validation.constraints.Min;\r\nimport javax.validation.constraints.NotNull;\r\nimport java.time.LocalDateTime;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@Table(name = &quot;invoices&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class InvoiceModel {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    @NotNull\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;client_id&quot;)\r\n    private ClientModel client;\r\n    @NotNull\r\n    @JsonIgnore\r\n    private LocalDateTime created_at; // YYYY-MM-DD ...\r\n    @NotNull\r\n    @OneToMany(mappedBy = &quot;invoice&quot;)\r\n    private List&lt;InvoiceDetailsModel&gt; items;\r\n    @Min(0)\r\n    @NotNull\r\n    @JsonIgnore\r\n    private double total;\r\n\r\n}\r\n```\r\nInvoicesDetailsModel.java\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;invoices_details&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class InvoiceDetailsModel {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;invoice_detail_id&quot;)\r\n    private Long id;\r\n    @NotNull\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;invoice_id&quot;)\r\n    @ToString.Exclude\r\n    private InvoiceModel invoice;   //comprobante al que pertenece\r\n    @Min(0)\r\n    private int amount;  //cantidad del producto comprado\r\n    @NotNull\r\n    @ManyToOne\r\n    @JoinColumn(name = &quot;product_id&quot;)\r\n    private ProductModel product;\r\n\r\n}\r\n```\r\nProductModel.java\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;products&quot;)\r\n@Data\r\n@NoArgsConstructor\r\npublic class ProductModel {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    private String description;\r\n    @NotNull\r\n    private String code;\r\n    @Min(0)\r\n    private int stock;\r\n    private double price;\r\n\r\n}\r\n```\r\nschema\r\n\r\n```\r\nCREATE TABLE clients(\r\n    id integer PRIMARY KEY AUTO_INCREMENT,\r\n    name varchar(75) not null ,\r\n    lastname varchar(75) not null ,\r\n    docnumber varchar(11) unique not null\r\n);\r\n\r\nCREATE TABLE products(\r\n    id integer PRIMARY KEY AUTO_INCREMENT,\r\n    description varchar(150),\r\n    code varchar(50) unique not null ,\r\n    stock int,\r\n    price double not null\r\n);\r\n\r\nCREATE TABLE invoices(\r\n    id integer PRIMARY KEY AUTO_INCREMENT,\r\n    client_id int,\r\n    created_at date not null ,\r\n    total double not null,\r\n    constraint fk_client_id foreign key(client_id) references clients(id)\r\n);\r\n\r\nCREATE TABLE invoices_details(\r\n    invoice_detail_id integer PRIMARY KEY AUTO_INCREMENT,\r\n    invoice_id int,\r\n    amount int not null ,\r\n    product_id int,\r\n    price double not null,\r\n    constraint fk_invoice_id foreign key(invoice_id) references invoices(id),\r\n    constraint fk_product_id foreign key(product_id) references products(id)\r\n);\r\n\r\ninsert into clients(name, lastname, docnumber) values (&#39;Ramiro&#39;, &#39;Landajo&#39;, &#39;11111111&#39;), (&#39;Dibu&#39;,&#39;Martinez&#39;, &#39;22222222&#39;);\r\n\r\ninsert into products(description, code, stock, price) values (&#39;Control Remoto&#39;, &#39;123&#39;, 50, 100), (&#39;PlayStation 5&#39;, &#39;567&#39;, 2, 2000);\r\n\r\ninsert into invoices(client_id, created_at, total) values (2, &#39;2023-04-08&#39;, 2500), (1, &#39;2023-04-09&#39;, 150);\r\n\r\ninsert into invoices_details(invoice_id, amount, product_id, price) values (1, 1, 2, 2000+500), (2, 1, 1, 100+50);\r\n```\r\nInvoice Service createInvoice method\r\n\r\n```\r\n@Slf4j\r\n@Service\r\npublic class InvoiceService {\r\n\r\n    @Autowired\r\n    InvoiceRepository invoiceRepository;\r\n    @Autowired\r\n    ClientService clientService;\r\n    @Autowired\r\n    InvoiceDetailsRepository invoiceDetailsRepository;\r\n    @Autowired\r\n    ProductService productService;\r\n\r\n    public InvoiceModel createInvoice(InvoiceModel newInvoice) throws Exception {\r\n        if (newInvoice == null){        // para chequear que el comprobante no este vacio\r\n            log.info(&quot;No se puede crear un comprobante vacio&quot;);\r\n            throw new InvoiceEmptyException(&quot;No se puede crear un comprobante vacio&quot;);\r\n        }\r\n\r\n        this.clientService.findClientById(newInvoice.getClient().getId()); //chequear que el cliente existe en la BD\r\n\r\n        // chequeamos que haya stock de cada producto a comprar\r\n        for (InvoiceDetailsModel item : newInvoice.getItems()){\r\n            if (item.getProduct().getStock() - item.getAmount() &lt; 0){\r\n                log.info(&quot;Stock insuficiente del producto: &quot; + item.getProduct());\r\n                throw new Exception(&quot;Stock insuficiente del producto: &quot; + item.getProduct());\r\n            }\r\n        }\r\n\r\n        double total = calculateTotal(newInvoice.getItems()); //calculamos el total a abonar\r\n\r\n        // seteamos los valores de fecha y total a abonar\r\n        newInvoice.setCreated_at(LocalDateTime.now());\r\n        newInvoice.setTotal(total);\r\n\r\n        //guardamos el comprobante y obtenemos el id\r\n        this.invoiceRepository.save(newInvoice);\r\n        log.info(&quot;El comprobante guardado: &quot; + newInvoice);\r\n\r\n        //creamos una lista para guardar los detalles de cada producto del comprobante en el invoiceDetailsRepository\r\n        List&lt;InvoiceDetailsModel&gt; listDetails = new ArrayList&lt;&gt;();\r\n        for (InvoiceDetailsModel item : newInvoice.getItems()){\r\n            log.info(&quot;Prueba: &quot; + item.toString());\r\n            item.setInvoice(newInvoice);            // se le asigna el invoice para que el detalle sepa a que factura pertenece\r\n            listDetails.add(item);\r\n            this.invoiceDetailsRepository.save(item);\r\n        }\r\n        newInvoice.setItems(listDetails);\r\n        log.info(&quot;INVOICE COMPLETE : &quot; + newInvoice);\r\n\r\n        //actualizamos el stock\r\n        this.productService.updateStock(newInvoice);\r\n\r\n        return newInvoice;\r\n    }\r\n```\r\n\r\nI tried manually setting the ids in postman and it works but it should be autogenerated, and the price error still shows up. Tried setting Double instead of double and saying @nullable to see if maybe it shows up as null but still saves it on the DB but no good. I know that using a DTO should be the best option and much easier for handling this, but I havent learned how to use them yet.\r\n\r\nEDIT: Issues Solved.\r\nI had a column named price in the schema for invoices_details table, and it should not have been there, so deleting it worked perfectly, and the id=null for the invoice_details was happenning because it was not yet saved in the repository, so the id wasn&#39;t autogenerated yet, when I fixed the issue the id showed up without a problem. After fixing it I got a Stack Overflow error instead, but i just had to add a @JsonIgnore on the invoice column in the InvoiceDetailsModel so it wouldn&#39;t create a cicle.","title":"Why is GenerationType.IDENTITY not working? Also, column price saying its null when I post in postman","body":"<p>I am doing a SpringBoot Java project simulating a VERY basic ecommerce. I need to do a Post using postman to create a new Invoice to simulate a client buying something. The Post would be like this:</p>\n<pre><code>{\n    &quot;client&quot;: {\n        &quot;id&quot;: 1, \n        &quot;name&quot;: &quot;Ramiro&quot;,\n        &quot;lastname&quot;: &quot;Landajo&quot;,\n        &quot;docnumber&quot;: &quot;11111111&quot; \n        },\n    &quot;items&quot;: [\n        {\n            &quot;amount&quot;: 20,\n            &quot;product&quot;: {\n                &quot;id&quot;: 1,\n                &quot;description&quot;: &quot;Control Remoto&quot;,\n                &quot;code&quot;: &quot;123&quot;,\n                &quot;stock&quot;: 50,\n                &quot;price&quot;: 100.00\n            }\n        },\n        {\n            &quot;amount&quot;: 2,\n            &quot;product&quot;: {\n                &quot;id&quot;: 2,\n                &quot;description&quot;: &quot;PlayStation 5&quot;,\n                &quot;code&quot;: &quot;567&quot;,\n                &quot;stock&quot;: 2,\n                &quot;price&quot;: 2000.00\n            }\n        }\n    ]\n}\n</code></pre>\n<p>So I have a ClientModel class, a ProductModel class, an InvoiceModel class and inside the invoice model one of the attributes is a list containing InvoiceDetailsModel class which would be the items in the postman request, one for each product. The first problem I am having is that when send the post, the id on the InvoicesDetailsModel doesnt autogenerate and is always null, although I have GenerationType.IDENTITY set up, as you can see here:</p>\n<pre><code>2023-04-22 20:13:49.832  INFO 14448 --- [nio-8080-exec-2] c.L.D.services.InvoiceService            : Saved Invoice: InvoiceModel(id=3, client=ClientModel(id=1, name=Ramiro, lastname=Landajo, docnumber=11111111), created_at=2023-04-22T20:13:49.788108800, items=[InvoiceDetailsModel(id=null, amount=20, product=ProductModel(id=1, description=Control Remoto, code=123, stock=50, price=100.0)), **InvoiceDetailsModel(id=null**, amount=2, product=ProductModel(id=2, description=PlayStation 5, code=567, stock=2, price=2000.0))], total=6000.0)\n2023-04-22 20:13:49.832  INFO 14448 --- [nio-8080-exec-2] c.L.D.services.InvoiceService            : Test: InvoiceDetailsModel(id=null, amount=20, product=ProductModel(id=1, description=Control Remoto, code=123, stock=50, price=100.0))\n</code></pre>\n<p>But it still works so maybe thats because of the other error im getting. The other error says the following:</p>\n<pre><code>2023-04-22 20:13:49.837 ERROR 14448 --- [nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : NULL not allowed for column &quot;PRICE&quot;; SQL statement:\ninsert into invoices_details (invoice_detail_id, amount, invoice_id, product_id) values (default, ?, ?, ?) [23502-214]\n2023-04-22 20:13:49.849 ERROR 14448 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException: could not execute statement; SQL [n/a]; constraint [null]; nested exception is org.hibernate.exception.ConstraintViolationException: could not execute statement] with root cause\norg.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: NULL not allowed for column &quot;PRICE&quot;; SQL statement:\ninsert into invoices_details (invoice_detail_id, amount, invoice_id, product_id) values (default, ?, ?, ?) [23502-214]\n\n</code></pre>\n<p>It says i have an error on line 63 where its where im saving the InvoicesDetailsModel on the DB (which is h2 btw). This is the part of the Invoice service class (that saves the Invoices and the InvoicesDetails, there is no InvoicesDetailsService class).</p>\n<pre><code>List&lt;InvoiceDetailsModel&gt; listDetails = new ArrayList&lt;&gt;();\nfor (InvoiceDetailsModel item : newInvoice.getItems()){\n    log.info(&quot;Prueba: &quot; + item.toString());\n    item.setInvoice(newInvoice);\n    listDetails.add(item);\n    this.invoiceDetailsRepository.save(item);\n}\n</code></pre>\n<p>I dont understand why it says that price is null when i clearly am sending the price in postman AND it appears in the logs on the IDE. Can anyone PLEASE help me?\nHere are the models, schema and invoice service:\nInvoiceModel.java</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.*;\nimport javax.validation.constraints.Min;\nimport javax.validation.constraints.NotNull;\nimport java.time.LocalDateTime;\nimport java.util.List;\n\n@Entity\n@Table(name = &quot;invoices&quot;)\n@Data\n@NoArgsConstructor\npublic class InvoiceModel {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @NotNull\n    @ManyToOne\n    @JoinColumn(name = &quot;client_id&quot;)\n    private ClientModel client;\n    @NotNull\n    @JsonIgnore\n    private LocalDateTime created_at; // YYYY-MM-DD ...\n    @NotNull\n    @OneToMany(mappedBy = &quot;invoice&quot;)\n    private List&lt;InvoiceDetailsModel&gt; items;\n    @Min(0)\n    @NotNull\n    @JsonIgnore\n    private double total;\n\n}\n</code></pre>\n<p>InvoicesDetailsModel.java</p>\n<pre><code>@Entity\n@Table(name = &quot;invoices_details&quot;)\n@Data\n@NoArgsConstructor\npublic class InvoiceDetailsModel {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;invoice_detail_id&quot;)\n    private Long id;\n    @NotNull\n    @ManyToOne\n    @JoinColumn(name = &quot;invoice_id&quot;)\n    @ToString.Exclude\n    private InvoiceModel invoice;   //comprobante al que pertenece\n    @Min(0)\n    private int amount;  //cantidad del producto comprado\n    @NotNull\n    @ManyToOne\n    @JoinColumn(name = &quot;product_id&quot;)\n    private ProductModel product;\n\n}\n</code></pre>\n<p>ProductModel.java</p>\n<pre><code>@Entity\n@Table(name = &quot;products&quot;)\n@Data\n@NoArgsConstructor\npublic class ProductModel {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    private String description;\n    @NotNull\n    private String code;\n    @Min(0)\n    private int stock;\n    private double price;\n\n}\n</code></pre>\n<p>schema</p>\n<pre><code>CREATE TABLE clients(\n    id integer PRIMARY KEY AUTO_INCREMENT,\n    name varchar(75) not null ,\n    lastname varchar(75) not null ,\n    docnumber varchar(11) unique not null\n);\n\nCREATE TABLE products(\n    id integer PRIMARY KEY AUTO_INCREMENT,\n    description varchar(150),\n    code varchar(50) unique not null ,\n    stock int,\n    price double not null\n);\n\nCREATE TABLE invoices(\n    id integer PRIMARY KEY AUTO_INCREMENT,\n    client_id int,\n    created_at date not null ,\n    total double not null,\n    constraint fk_client_id foreign key(client_id) references clients(id)\n);\n\nCREATE TABLE invoices_details(\n    invoice_detail_id integer PRIMARY KEY AUTO_INCREMENT,\n    invoice_id int,\n    amount int not null ,\n    product_id int,\n    price double not null,\n    constraint fk_invoice_id foreign key(invoice_id) references invoices(id),\n    constraint fk_product_id foreign key(product_id) references products(id)\n);\n\ninsert into clients(name, lastname, docnumber) values ('Ramiro', 'Landajo', '11111111'), ('Dibu','Martinez', '22222222');\n\ninsert into products(description, code, stock, price) values ('Control Remoto', '123', 50, 100), ('PlayStation 5', '567', 2, 2000);\n\ninsert into invoices(client_id, created_at, total) values (2, '2023-04-08', 2500), (1, '2023-04-09', 150);\n\ninsert into invoices_details(invoice_id, amount, product_id, price) values (1, 1, 2, 2000+500), (2, 1, 1, 100+50);\n</code></pre>\n<p>Invoice Service createInvoice method</p>\n<pre><code>@Slf4j\n@Service\npublic class InvoiceService {\n\n    @Autowired\n    InvoiceRepository invoiceRepository;\n    @Autowired\n    ClientService clientService;\n    @Autowired\n    InvoiceDetailsRepository invoiceDetailsRepository;\n    @Autowired\n    ProductService productService;\n\n    public InvoiceModel createInvoice(InvoiceModel newInvoice) throws Exception {\n        if (newInvoice == null){        // para chequear que el comprobante no este vacio\n            log.info(&quot;No se puede crear un comprobante vacio&quot;);\n            throw new InvoiceEmptyException(&quot;No se puede crear un comprobante vacio&quot;);\n        }\n\n        this.clientService.findClientById(newInvoice.getClient().getId()); //chequear que el cliente existe en la BD\n\n        // chequeamos que haya stock de cada producto a comprar\n        for (InvoiceDetailsModel item : newInvoice.getItems()){\n            if (item.getProduct().getStock() - item.getAmount() &lt; 0){\n                log.info(&quot;Stock insuficiente del producto: &quot; + item.getProduct());\n                throw new Exception(&quot;Stock insuficiente del producto: &quot; + item.getProduct());\n            }\n        }\n\n        double total = calculateTotal(newInvoice.getItems()); //calculamos el total a abonar\n\n        // seteamos los valores de fecha y total a abonar\n        newInvoice.setCreated_at(LocalDateTime.now());\n        newInvoice.setTotal(total);\n\n        //guardamos el comprobante y obtenemos el id\n        this.invoiceRepository.save(newInvoice);\n        log.info(&quot;El comprobante guardado: &quot; + newInvoice);\n\n        //creamos una lista para guardar los detalles de cada producto del comprobante en el invoiceDetailsRepository\n        List&lt;InvoiceDetailsModel&gt; listDetails = new ArrayList&lt;&gt;();\n        for (InvoiceDetailsModel item : newInvoice.getItems()){\n            log.info(&quot;Prueba: &quot; + item.toString());\n            item.setInvoice(newInvoice);            // se le asigna el invoice para que el detalle sepa a que factura pertenece\n            listDetails.add(item);\n            this.invoiceDetailsRepository.save(item);\n        }\n        newInvoice.setItems(listDetails);\n        log.info(&quot;INVOICE COMPLETE : &quot; + newInvoice);\n\n        //actualizamos el stock\n        this.productService.updateStock(newInvoice);\n\n        return newInvoice;\n    }\n</code></pre>\n<p>I tried manually setting the ids in postman and it works but it should be autogenerated, and the price error still shows up. Tried setting Double instead of double and saying @nullable to see if maybe it shows up as null but still saves it on the DB but no good. I know that using a DTO should be the best option and much easier for handling this, but I havent learned how to use them yet.</p>\n<p>EDIT: Issues Solved.\nI had a column named price in the schema for invoices_details table, and it should not have been there, so deleting it worked perfectly, and the id=null for the invoice_details was happenning because it was not yet saved in the repository, so the id wasn't autogenerated yet, when I fixed the issue the id showed up without a problem. After fixing it I got a Stack Overflow error instead, but i just had to add a @JsonIgnore on the invoice column in the InvoiceDetailsModel so it wouldn't create a cicle.</p>\n"},{"tags":["java","spring","spring-boot","auth0"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1673535650,"post_id":75089387,"comment_id":132525282,"body_markdown":"The `/person` should already match. I suspect it is due to you are adding params directly in the URL instead of passing them as parameters for the request. You should do `curl http://localhost:8080/person -d &quot;email=me@me.co&quot;`. That will add it as a parameter, else it will be treated as a URL by cUrl and encoded and thus you will fallthrough to the `anyRequest().authenticated()`. So the problem is not the Spring Secuirty config but your cUrl usage.","body":"The <code>&#47;person</code> should already match. I suspect it is due to you are adding params directly in the URL instead of passing them as parameters for the request. You should do <code>curl http:&#47;&#47;localhost:8080&#47;person -d &quot;email=me@me.co&quot;</code>. That will add it as a parameter, else it will be treated as a URL by cUrl and encoded and thus you will fallthrough to the <code>anyRequest().authenticated()</code>. So the problem is not the Spring Secuirty config but your cUrl usage."},{"owner":{"account_id":22143607,"reputation":193,"user_id":16393274,"display_name":"Jose Gleeson"},"score":0,"creation_date":1673540015,"post_id":75089387,"comment_id":132527040,"body_markdown":"So this is saying I cannot use Query parameters with Spring Security?","body":"So this is saying I cannot use Query parameters with Spring Security?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1673548892,"post_id":75089387,"comment_id":132530014,"body_markdown":"You don&#39;t need to, and the curl request was wrong as it was using what you had as the full URL (curl will encode it as a full url and not as a URL with query parameters).","body":"You don&#39;t need to, and the curl request was wrong as it was using what you had as the full URL (curl will encode it as a full url and not as a URL with query parameters)."},{"owner":{"account_id":22143607,"reputation":193,"user_id":16393274,"display_name":"Jose Gleeson"},"score":0,"creation_date":1673637147,"post_id":75089387,"comment_id":132551832,"body_markdown":"Not sure I am sure I follow both curl and commands work on bash. you have to wrap in a quote on ZShell but I confirmed both commands work","body":"Not sure I am sure I follow both curl and commands work on bash. you have to wrap in a quote on ZShell but I confirmed both commands work"}],"owner":{"account_id":22143607,"reputation":193,"user_id":16393274,"display_name":"Jose Gleeson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":604,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682358505,"creation_date":1673474018,"question_id":75089387,"body_markdown":"I have the following code...\r\n\r\n```java\r\n\r\nimport com.purepm.admin.services.authentication.AudienceValidator;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.Customizer;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.oauth2.core.DelegatingOAuth2TokenValidator;\r\nimport org.springframework.security.oauth2.core.OAuth2TokenValidator;\r\nimport org.springframework.security.oauth2.jwt.*;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\n\r\n@EnableWebSecurity\r\n@Configuration\r\npublic class SecurityConfig{\r\n\r\n    @Value(&quot;${auth0.audience}&quot;)\r\n    private String audience;\r\n\r\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\r\n    private String issuer;\r\n    @Bean\r\n    JwtDecoder jwtDecoder() {\r\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)\r\n                JwtDecoders.fromOidcIssuerLocation(issuer);\r\n\r\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\r\n\r\n        jwtDecoder.setJwtValidator(withAudience);\r\n\r\n        return jwtDecoder;\r\n    }\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.authorizeHttpRequests()\r\n                .requestMatchers(&quot;/&quot;).permitAll()\r\n                .requestMatchers(&quot;/person&quot;).hasAuthority(&quot;SCOPE_blahablah&quot;)\r\n                .anyRequest().authenticated();\r\n\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\nBut when I use the following command to run the request `curl http://localhost:8080/person -v` I see the expected 403...\r\n\r\n```\r\n*   Trying 127.0.0.1:8080...\r\n* Connected to localhost (127.0.0.1) port 8080 (#0)\r\n&gt; GET /person HTTP/1.1\r\n&gt; Host: localhost:8080\r\n&gt; User-Agent: curl/7.85.0\r\n&gt; Accept: */*\r\n&gt; \r\n* Mark bundle as not supporting multiuse\r\n&lt; HTTP/1.1 403 \r\n&lt; Set-Cookie: JSESSIONID=EFD9C400D91760FE8FA2119AC2EB382B; Path=/; HttpOnly\r\n&lt; X-Content-Type-Options: nosniff\r\n&lt; X-XSS-Protection: 0\r\n&lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate\r\n&lt; Pragma: no-cache\r\n&lt; Expires: 0\r\n&lt; X-Frame-Options: DENY\r\n&lt; Content-Length: 0\r\n&lt; Date: Wed, 11 Jan 2023 21:45:16 GMT\r\n&lt; \r\n* Connection #0 to host localhost left intact\r\n```\r\n\r\nThis is as expected since I am not providing an Authorization header (Although I would expect a 401). \r\n\r\nBut when I add the query param like `curl http://localhost:8080/person?email=me@me.co` it just lets it right through and I get a 200. Is there a way to use the query string to enforce the 403 when there is a query param as well?","title":"How do I include endpoints with query params when configuring requestMatchers in Spring security 6?","body":"<p>I have the following code...</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport com.purepm.admin.services.authentication.AudienceValidator;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.Customizer;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.oauth2.core.DelegatingOAuth2TokenValidator;\nimport org.springframework.security.oauth2.core.OAuth2TokenValidator;\nimport org.springframework.security.oauth2.jwt.*;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@EnableWebSecurity\n@Configuration\npublic class SecurityConfig{\n\n    @Value(&quot;${auth0.audience}&quot;)\n    private String audience;\n\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\n    private String issuer;\n    @Bean\n    JwtDecoder jwtDecoder() {\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)\n                JwtDecoders.fromOidcIssuerLocation(issuer);\n\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\n\n        jwtDecoder.setJwtValidator(withAudience);\n\n        return jwtDecoder;\n    }\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests()\n                .requestMatchers(&quot;/&quot;).permitAll()\n                .requestMatchers(&quot;/person&quot;).hasAuthority(&quot;SCOPE_blahablah&quot;)\n                .anyRequest().authenticated();\n\n        return http.build();\n    }\n}\n</code></pre>\n<p>But when I use the following command to run the request <code>curl http://localhost:8080/person -v</code> I see the expected 403...</p>\n<pre><code>*   Trying 127.0.0.1:8080...\n* Connected to localhost (127.0.0.1) port 8080 (#0)\n&gt; GET /person HTTP/1.1\n&gt; Host: localhost:8080\n&gt; User-Agent: curl/7.85.0\n&gt; Accept: */*\n&gt; \n* Mark bundle as not supporting multiuse\n&lt; HTTP/1.1 403 \n&lt; Set-Cookie: JSESSIONID=EFD9C400D91760FE8FA2119AC2EB382B; Path=/; HttpOnly\n&lt; X-Content-Type-Options: nosniff\n&lt; X-XSS-Protection: 0\n&lt; Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n&lt; Pragma: no-cache\n&lt; Expires: 0\n&lt; X-Frame-Options: DENY\n&lt; Content-Length: 0\n&lt; Date: Wed, 11 Jan 2023 21:45:16 GMT\n&lt; \n* Connection #0 to host localhost left intact\n</code></pre>\n<p>This is as expected since I am not providing an Authorization header (Although I would expect a 401).</p>\n<p>But when I add the query param like <code>curl http://localhost:8080/person?email=me@me.co</code> it just lets it right through and I get a 200. Is there a way to use the query string to enforce the 403 when there is a query param as well?</p>\n"},{"tags":["java","spring","logging","aspectj"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682146761,"post_id":76074561,"comment_id":134172579,"body_markdown":"If you do not like the `@Autowired` workaround, native AspectJ is the way to go. But then you need to decide if you want compile-time weaving (using the Freefair plugin in Gradle, like in your example above) or load-time weaving (using a java agant, as described in the Spring manual). Either way, you should then remove the `@Component` annotation from your aspect, because you do not want a native AspectJ aspect to be re-applied by Spring AOP. If you would share a minimal reproducer on GitHub, I could take a closer look. But there should be plenty examples here already.","body":"If you do not like the <code>@Autowired</code> workaround, native AspectJ is the way to go. But then you need to decide if you want compile-time weaving (using the Freefair plugin in Gradle, like in your example above) or load-time weaving (using a java agant, as described in the Spring manual). Either way, you should then remove the <code>@Component</code> annotation from your aspect, because you do not want a native AspectJ aspect to be re-applied by Spring AOP. If you would share a minimal reproducer on GitHub, I could take a closer look. But there should be plenty examples here already."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682146822,"post_id":76074561,"comment_id":134172582,"body_markdown":"One more thought: It looks quite inefficient to create a new logger instance for every method call. If I were you, I would not do that.","body":"One more thought: It looks quite inefficient to create a new logger instance for every method call. If I were you, I would not do that."},{"owner":{"account_id":22923323,"reputation":11,"user_id":17058834,"display_name":"Norbert Maszlag"},"score":0,"creation_date":1682339459,"post_id":76074561,"comment_id":134194496,"body_markdown":"@kriegaex Thank you, your comment definitely help a lot. Since then I&#39;ve managed to get the post comple weaving get to work and now the nested logging works. The only thing is that the logs at the start of a fuctions are printed twice. The end of the function log is only once. Have you ever come accross anything like this? \nI&#39;ve removed the Component annotation, but there only one instance of the LoggingAspect class, I&#39;ve tried making it a slingleton and the error persisted so thats not the problem.","body":"@kriegaex Thank you, your comment definitely help a lot. Since then I&#39;ve managed to get the post comple weaving get to work and now the nested logging works. The only thing is that the logs at the start of a fuctions are printed twice. The end of the function log is only once. Have you ever come accross anything like this?  I&#39;ve removed the Component annotation, but there only one instance of the LoggingAspect class, I&#39;ve tried making it a slingleton and the error persisted so thats not the problem."},{"owner":{"account_id":22923323,"reputation":11,"user_id":17058834,"display_name":"Norbert Maszlag"},"score":0,"creation_date":1682339938,"post_id":76074561,"comment_id":134194612,"body_markdown":"@kriegaex\n\nid(&quot;io.freefair.aspectj.post-compile-weaving&quot;) version &quot;6.5.1&quot;\n\noptions.compilerArgs.add(&quot;-Xlint:unchecked&quot;)\noptions.compilerArgs.add(&quot;-Xlint:deprecation&quot;)\n\ntasks.withType&lt;JavaCompile&gt; {\n    doFirst {\n options.compilerArgs.add(&quot;-Xlint:unchecked&quot;)\noptions.compilerArgs.add(&quot;-Xlint:deprecation&quot;)\n}\n}\n\ntasks.withType&lt;Test&gt; {\n    doFirst {\n        val aspectjweaverPath = configurations[&quot;testRuntimeClasspath&quot;].find { it.name.contains(&quot;aspectjweaver&quot;) }\njvmArgs(&quot;-javaagent:${aspectjweaverPath}&quot;)\n}}\n\nThese are the changes I made to the gradle file.","body":"@kriegaex  id(&quot;io.freefair.aspectj.post-compile-weaving&quot;) version &quot;6.5.1&quot;  options.compilerArgs.add(&quot;-Xlint:unchecked&quot;) options.compilerArgs.add(&quot;-Xlint:deprecation&quot;)  tasks.withType&lt;JavaCompile&gt; {     doFirst {  options.compilerArgs.add(&quot;-Xlint:unchecked&quot;) options.compilerArgs.add(&quot;-Xlint:deprecation&quot;) } }  tasks.withType&lt;Test&gt; {     doFirst {         val aspectjweaverPath = configurations[&quot;testRuntimeClasspath&quot;].find { it.name.contains(&quot;aspectjweaver&quot;) } jvmArgs(&quot;-javaagent:${aspectjweaverPath}&quot;) }}  These are the changes I made to the gradle file."}],"answers":[{"comments":[{"owner":{"account_id":22923323,"reputation":11,"user_id":17058834,"display_name":"Norbert Maszlag"},"score":0,"creation_date":1682105982,"post_id":76075479,"comment_id":134169031,"body_markdown":"This approach introduces a circle in the dependencies, so it doesn&#39;t work. (I&#39;m using Spring boot 3) I know that Spring AOP on its own should not be able to do this, but I&#39;ve heard that AspectJ can be used for this, but do not find anything about it.","body":"This approach introduces a circle in the dependencies, so it doesn&#39;t work. (I&#39;m using Spring boot 3) I know that Spring AOP on its own should not be able to do this, but I&#39;ve heard that AspectJ can be used for this, but do not find anything about it."},{"owner":{"account_id":22923323,"reputation":11,"user_id":17058834,"display_name":"Norbert Maszlag"},"score":0,"creation_date":1682106518,"post_id":76075479,"comment_id":134169121,"body_markdown":"Sorry in more dept, I&#39;ve heard that AspectJ&#39;s native weaving does not have this limitation. You can use AspectJ compiler (ajc) and its weaving capabilities to weave aspects at compile-time or load -time. This allows aspects to be applied even to internal method calls. But I&#39;ve have not managed to find a way to properly use it.","body":"Sorry in more dept, I&#39;ve heard that AspectJ&#39;s native weaving does not have this limitation. You can use AspectJ compiler (ajc) and its weaving capabilities to weave aspects at compile-time or load -time. This allows aspects to be applied even to internal method calls. But I&#39;ve have not managed to find a way to properly use it."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1682146401,"post_id":76075479,"comment_id":134172556,"body_markdown":"Not being a Spring user, I never tried `@Resource`. But if you use `@Autowired`, it should work. There is no circular dependency. Fore more information about how Spring proxies work (and how they do not), and what the alternatives are, see [my answer here](https://stackoverflow.com/a/56616248/1082681).","body":"Not being a Spring user, I never tried <code>@Resource</code>. But if you use <code>@Autowired</code>, it should work. There is no circular dependency. Fore more information about how Spring proxies work (and how they do not), and what the alternatives are, see <a href=\"https://stackoverflow.com/a/56616248/1082681\">my answer here</a>."}],"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682098126,"creation_date":1682098126,"answer_id":76075479,"question_id":76074561,"body_markdown":"It is like Spring AOP works. Aspects are not called when you call a method inside the same class, but only from outside of the class. However, if you want to enforce to have the Aspect called inside the same class, you can do something like this:\r\n\r\n    @Resource\r\n    private ExampleService self = this;\r\n\r\n    public void someMethod() {\r\n        self.method2();\r\n    }\r\n\r\n    public void anOtherMethod() {\r\n\r\n    }\r\n\r\nCheck this out for more info: https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-understanding-aop-proxies\r\n","title":"How can I implement nested logging within a Spring component with AspectJ?","body":"<p>It is like Spring AOP works. Aspects are not called when you call a method inside the same class, but only from outside of the class. However, if you want to enforce to have the Aspect called inside the same class, you can do something like this:</p>\n<pre><code>@Resource\nprivate ExampleService self = this;\n\npublic void someMethod() {\n    self.method2();\n}\n\npublic void anOtherMethod() {\n\n}\n</code></pre>\n<p>Check this out for more info: <a href=\"https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-understanding-aop-proxies\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#aop-understanding-aop-proxies</a></p>\n"},{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682358375,"creation_date":1682347164,"answer_id":76093080,"question_id":76074561,"body_markdown":"&gt; @kriegaex Thank you, your comment definitely help a lot. Since then I&#39;ve managed to get the post comple weaving get to work and now the nested logging works. The only thing is that the logs at the start of a fuctions are printed twice.\r\n\r\nAs a previous Spring AOP user, you might be used to the fact that Spring AOP only knows `execution` joinpoints, but native AspectJ knows several more, most prominently `call` ones. I.e., for the same method, it can intercept the method call (in the calling method) and the method execution (in the called method).\r\n\r\n&gt; The end of the function log is only once. \r\n\r\nThat would surprise me. For the same method call/execution, the result should be consistent. Probably you overlooked or misinterpreted something in your log.\r\n\r\nIn order to see the difference, simply add something like\r\n\r\n```java\r\nSystem.out.println(&quot;[ENTER] &quot; + joinPoint);\r\n```\r\n\r\nand\r\n\r\n```java\r\nSystem.out.println(&quot;[EXIT] &quot; + joinPoint);\r\n```\r\n\r\nto your advice methods.\r\n\r\nYou can fix the problem in several ways, e.g. like this:\r\n\r\n```java\r\n@Before(&quot;@annotation(Loggable) &amp;&amp; execution(* *(..))&quot;)\r\n```\r\n\r\nIf you do not wish to repeat the same pointcut expression in 3 separate advice methods, simply factor them out into one `@Pointcut` expression, referring to the same pointcut in all advice methods.","title":"How can I implement nested logging within a Spring component with AspectJ?","body":"<blockquote>\n<p>@kriegaex Thank you, your comment definitely help a lot. Since then I've managed to get the post comple weaving get to work and now the nested logging works. The only thing is that the logs at the start of a fuctions are printed twice.</p>\n</blockquote>\n<p>As a previous Spring AOP user, you might be used to the fact that Spring AOP only knows <code>execution</code> joinpoints, but native AspectJ knows several more, most prominently <code>call</code> ones. I.e., for the same method, it can intercept the method call (in the calling method) and the method execution (in the called method).</p>\n<blockquote>\n<p>The end of the function log is only once.</p>\n</blockquote>\n<p>That would surprise me. For the same method call/execution, the result should be consistent. Probably you overlooked or misinterpreted something in your log.</p>\n<p>In order to see the difference, simply add something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;[ENTER] &quot; + joinPoint);\n</code></pre>\n<p>and</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;[EXIT] &quot; + joinPoint);\n</code></pre>\n<p>to your advice methods.</p>\n<p>You can fix the problem in several ways, e.g. like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Before(&quot;@annotation(Loggable) &amp;&amp; execution(* *(..))&quot;)\n</code></pre>\n<p>If you do not wish to repeat the same pointcut expression in 3 separate advice methods, simply factor them out into one <code>@Pointcut</code> expression, referring to the same pointcut in all advice methods.</p>\n"}],"owner":{"account_id":22923323,"reputation":11,"user_id":17058834,"display_name":"Norbert Maszlag"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":288,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1682358375,"creation_date":1682090476,"question_id":76074561,"body_markdown":"I&#39;m working on a Spring Boot Gradle project with Java, where logging is done manually in every function that needs to be logged. In each function that requires logging, a new instance of a custom logger is initialized with the help of Lombok&#39;s @Cleanup annotation. The custom logger implements the AutoCloseable interface, so the @Cleanup annotation automatically closes the resource when the function ends. It works like this:\r\n\r\n```\r\npublic void someFuction(String str) {\r\n    @Cleanup var logging = new CustomLogger(log, &quot;someFuction&quot;, str); //NOSONAR\r\n    logging.startLogging();\r\n    ....\r\n    Some logic\r\n    .....\r\n}\r\n```\r\n\r\nThe @Cleanup annotation essentially puts the code in a *try/finally* block, so it works something like this under the hood:\r\n\r\n```\r\npublic void someFuction(String str) {\r\n    try{\r\n        CustomLogger logging = new CustomLogger(log, &quot;someFuction&quot;, str); //NOSONAR\r\n        logging.startLogging();\r\n        ....\r\n        Some logic\r\n        .....\r\n    } finally(){\r\n        logging.close();\r\n    }\r\n}\r\n```\r\n\r\nThis approach works fine, but having to copy two lines into every function that needs to be logged and manually passing the function name, logger, and parameters of the function every time does not seem like a &quot;clean&quot; solution, and it introduces critical Sonar problems as well.\r\n\r\nSo, I thought I could achieve the same effect easily with a custom annotation and with the help of Spring AOP, more specifically, the AspectJ library.\r\n\r\n    import lombok.extern.slf4j.Slf4j; \r\n    import org.aspectj.lang.JoinPoint; \r\n    import org.aspectj.lang.annotation.AfterReturning; \r\n    import org.aspectj.lang.annotation.AfterThrowing; \r\n    import org.aspectj.lang.annotation.Aspect; \r\n    import org.aspectj.lang.annotation.Before; \r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Aspect \r\n    @Component \r\n    @Slf4j \r\n    public class LoggingAspect {\r\n        private ThreadLocal&lt;CustomLogger&gt; businessLoggingThreadLocal = new ThreadLocal&lt;&gt;();\r\n    \r\n        @Before(&quot;@annotation(Loggable)&quot;)\r\n        public void logMethodStart(JoinPoint joinPoint) {\r\n            String methodName = joinPoint.getSignature().getName();\r\n            Object[] args = joinPoint.getArgs();\r\n    \r\n            CustomLogger businessLogging = new CustomLogger(log, methodName, args);\r\n            businessLoggingThreadLocal.set(businessLogging);\r\n            businessLogging.logMethodStart();\r\n        }\r\n    \r\n        @AfterReturning(pointcut = &quot;@annotation(Loggable)&quot;, returning = &quot;result&quot;)\r\n        public void logMethodEnd(JoinPoint joinPoint, Object result) {\r\n            CustomLogger businessLogging = businessLoggingThreadLocal.get();\r\n            if (businessLogging != null) {\r\n                businessLogging.close();\r\n                businessLoggingThreadLocal.remove();\r\n            }\r\n        }\r\n    \r\n        @AfterThrowing(pointcut = &quot;@annotation(Loggable)&quot;, throwing = &quot;exception&quot;)\r\n        public void logMethodException(JoinPoint joinPoint, Throwable exception) {\r\n            CustomLogger businessLogging = businessLoggingThreadLocal.get();\r\n            if (businessLogging != null) {\r\n                businessLogging.close();\r\n                businessLoggingThreadLocal.remove();\r\n            }\r\n        }\r\n    }\r\n\r\nThis is my custom annotation:\r\n\r\n```\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.METHOD)\r\npublic @interface Loggable {}\r\n```\r\n\r\nThis &quot;wrapper&quot; around the existing logging mechanism seems fine at first glance, but it cannot perform nested logging within the same Spring component. If a method calls a method in another component, the logging works fine, but if it were to call a method in the same component, it simply does not log the other method.\r\n\r\nFor example:\r\n\r\n    @Service \r\n    public class ExampleService { \r\n        .... \r\n    \r\n        @Loggable \r\n        public void someMethod(){ \r\n            .... \r\n            some logic \r\n            .... \r\n            anOtherMethod(); \r\n        }\r\n    \r\n        @Loggable\r\n        public void anOtherMethod(){\r\n            ....\r\n            some logic\r\n            ....\r\n        }\r\n    }\r\n\r\nThe expected logging would be:\r\n\r\n```\r\nMethod started: someMethod()\r\nMethod started: anOtherMethod()\r\nMethod ended: anOtherMethod()\r\nMethod ended: someMethod()\r\n```\r\n\r\nBut the actual logging, when both of the fuctions are in the same component, is:  \r\n(It works fine, the above mentioned way, if the anOtherMethod() in an a different component)\r\n\r\n```\r\nMethod started: someMethod()\r\nMethod ended: someMethod()\r\n```\r\n\r\nI&#39;m using this gradle plugin:  \r\n`id(&quot;io.freefair.aspectj&quot;) version &quot;8.0.1&quot;`\r\n\r\nand this dependency:  \r\n`implementation(&quot;org.aspectj:aspectjrt:1.9.7&quot;)`\r\n\r\nIt is possible to do nested logging in the same component with AspectJ?If not or if it is not recommended are there better ways to approach this problem?","title":"How can I implement nested logging within a Spring component with AspectJ?","body":"<p>I'm working on a Spring Boot Gradle project with Java, where logging is done manually in every function that needs to be logged. In each function that requires logging, a new instance of a custom logger is initialized with the help of Lombok's @Cleanup annotation. The custom logger implements the AutoCloseable interface, so the @Cleanup annotation automatically closes the resource when the function ends. It works like this:</p>\n<pre><code>public void someFuction(String str) {\n    @Cleanup var logging = new CustomLogger(log, &quot;someFuction&quot;, str); //NOSONAR\n    logging.startLogging();\n    ....\n    Some logic\n    .....\n}\n</code></pre>\n<p>The @Cleanup annotation essentially puts the code in a <em>try/finally</em> block, so it works something like this under the hood:</p>\n<pre><code>public void someFuction(String str) {\n    try{\n        CustomLogger logging = new CustomLogger(log, &quot;someFuction&quot;, str); //NOSONAR\n        logging.startLogging();\n        ....\n        Some logic\n        .....\n    } finally(){\n        logging.close();\n    }\n}\n</code></pre>\n<p>This approach works fine, but having to copy two lines into every function that needs to be logged and manually passing the function name, logger, and parameters of the function every time does not seem like a &quot;clean&quot; solution, and it introduces critical Sonar problems as well.</p>\n<p>So, I thought I could achieve the same effect easily with a custom annotation and with the help of Spring AOP, more specifically, the AspectJ library.</p>\n<pre><code>import lombok.extern.slf4j.Slf4j; \nimport org.aspectj.lang.JoinPoint; \nimport org.aspectj.lang.annotation.AfterReturning; \nimport org.aspectj.lang.annotation.AfterThrowing; \nimport org.aspectj.lang.annotation.Aspect; \nimport org.aspectj.lang.annotation.Before; \nimport org.springframework.stereotype.Component;\n\n@Aspect \n@Component \n@Slf4j \npublic class LoggingAspect {\n    private ThreadLocal&lt;CustomLogger&gt; businessLoggingThreadLocal = new ThreadLocal&lt;&gt;();\n\n    @Before(&quot;@annotation(Loggable)&quot;)\n    public void logMethodStart(JoinPoint joinPoint) {\n        String methodName = joinPoint.getSignature().getName();\n        Object[] args = joinPoint.getArgs();\n\n        CustomLogger businessLogging = new CustomLogger(log, methodName, args);\n        businessLoggingThreadLocal.set(businessLogging);\n        businessLogging.logMethodStart();\n    }\n\n    @AfterReturning(pointcut = &quot;@annotation(Loggable)&quot;, returning = &quot;result&quot;)\n    public void logMethodEnd(JoinPoint joinPoint, Object result) {\n        CustomLogger businessLogging = businessLoggingThreadLocal.get();\n        if (businessLogging != null) {\n            businessLogging.close();\n            businessLoggingThreadLocal.remove();\n        }\n    }\n\n    @AfterThrowing(pointcut = &quot;@annotation(Loggable)&quot;, throwing = &quot;exception&quot;)\n    public void logMethodException(JoinPoint joinPoint, Throwable exception) {\n        CustomLogger businessLogging = businessLoggingThreadLocal.get();\n        if (businessLogging != null) {\n            businessLogging.close();\n            businessLoggingThreadLocal.remove();\n        }\n    }\n}\n</code></pre>\n<p>This is my custom annotation:</p>\n<pre><code>import java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface Loggable {}\n</code></pre>\n<p>This &quot;wrapper&quot; around the existing logging mechanism seems fine at first glance, but it cannot perform nested logging within the same Spring component. If a method calls a method in another component, the logging works fine, but if it were to call a method in the same component, it simply does not log the other method.</p>\n<p>For example:</p>\n<pre><code>@Service \npublic class ExampleService { \n    .... \n\n    @Loggable \n    public void someMethod(){ \n        .... \n        some logic \n        .... \n        anOtherMethod(); \n    }\n\n    @Loggable\n    public void anOtherMethod(){\n        ....\n        some logic\n        ....\n    }\n}\n</code></pre>\n<p>The expected logging would be:</p>\n<pre><code>Method started: someMethod()\nMethod started: anOtherMethod()\nMethod ended: anOtherMethod()\nMethod ended: someMethod()\n</code></pre>\n<p>But the actual logging, when both of the fuctions are in the same component, is:<br />\n(It works fine, the above mentioned way, if the anOtherMethod() in an a different component)</p>\n<pre><code>Method started: someMethod()\nMethod ended: someMethod()\n</code></pre>\n<p>I'm using this gradle plugin:<br />\n<code>id(&quot;io.freefair.aspectj&quot;) version &quot;8.0.1&quot;</code></p>\n<p>and this dependency:<br />\n<code>implementation(&quot;org.aspectj:aspectjrt:1.9.7&quot;)</code></p>\n<p>It is possible to do nested logging in the same component with AspectJ?If not or if it is not recommended are there better ways to approach this problem?</p>\n"},{"tags":["java","windows","environment-variables"],"comments":[{"owner":{"account_id":28372160,"reputation":27,"user_id":21700578,"display_name":"PleasePleasePleaseHelp"},"score":0,"creation_date":1682359100,"post_id":76094443,"comment_id":134199483,"body_markdown":"Sorry, your solution didn&#39;t work. Also, are you referring to the Path System variable? Not sure what you mean by User Path System variable","body":"Sorry, your solution didn&#39;t work. Also, are you referring to the Path System variable? Not sure what you mean by User Path System variable"},{"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"score":0,"creation_date":1682499718,"post_id":76094443,"comment_id":134224301,"body_markdown":"let me check, I will fix it","body":"let me check, I will fix it"}],"answers":[{"comments":[{"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"score":0,"creation_date":1682361309,"post_id":76094519,"comment_id":134199978,"body_markdown":"While this is correct and occasionally useful to know, the screenshot shows that there&#39;s no name conflict. They are using the system variable in the user&#39;s PATH.","body":"While this is correct and occasionally useful to know, the screenshot shows that there&#39;s no name conflict. They are using the system variable in the user&#39;s PATH."},{"owner":{"account_id":26200443,"reputation":1,"user_id":19880937,"display_name":"Tony Zhu"},"score":0,"creation_date":1682371909,"post_id":76094519,"comment_id":134202066,"body_markdown":"when you compile java files using ```javac```, it should be found from the ```path``` variable. that&#39;s why you must modify the path from jdk8 to JDK 11 for your user variables. ```JAVA_HOME``` means where to find the classes from JDK to compile. for example, ```import java.util.ArrayList;```, the compiler knows where to find the class  ```ArrayList```. They are different.","body":"when you compile java files using <code>javac</code>, it should be found from the <code>path</code> variable. that&#39;s why you must modify the path from jdk8 to JDK 11 for your user variables. <code>JAVA_HOME</code> means where to find the classes from JDK to compile. for example, <code>import java.util.ArrayList;</code>, the compiler knows where to find the class  <code>ArrayList</code>. They are different."}],"tags":[],"owner":{"account_id":26200443,"reputation":1,"user_id":19880937,"display_name":"Tony Zhu"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682357104,"creation_date":1682357104,"answer_id":76094519,"question_id":76094443,"body_markdown":"in Windows, user variables will override system variables.\r\nto solve your problem, just remove the path of Java in user variables simply.\r\nor, you can set the same value of path for Java 11 in user variables.","title":"JAVA_HOME not updating in Environment Variables? (Windows 10)","body":"<p>in Windows, user variables will override system variables.\nto solve your problem, just remove the path of Java in user variables simply.\nor, you can set the same value of path for Java 11 in user variables.</p>\n"},{"comments":[{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1682357301,"post_id":76094549,"comment_id":134199073,"body_markdown":"Do not post comments as answers.","body":"Do not post comments as answers."},{"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"score":0,"creation_date":1682357400,"post_id":76094549,"comment_id":134199102,"body_markdown":"This is not a comment, I reproduced the issue on my machine exactly as shown in the screenshot. It goes away when the user presses Ok on this dialog. I changed the wording to not make it a question/comment.","body":"This is not a comment, I reproduced the issue on my machine exactly as shown in the screenshot. It goes away when the user presses Ok on this dialog. I changed the wording to not make it a question/comment."},{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1682357437,"post_id":76094549,"comment_id":134199112,"body_markdown":"Well ... you edited your post. At first, it was a question without any screenshot. ;-)","body":"Well ... you edited your post. At first, it was a question without any screenshot. ;-)"},{"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"score":0,"creation_date":1682357660,"post_id":76094549,"comment_id":134199164,"body_markdown":"The screenshot didn&#39;t add anything that was not already in the answer text, but I agree I shouldn&#39;t have worded it as a comment.","body":"The screenshot didn&#39;t add anything that was not already in the answer text, but I agree I shouldn&#39;t have worded it as a comment."},{"owner":{"account_id":28372160,"reputation":27,"user_id":21700578,"display_name":"PleasePleasePleaseHelp"},"score":0,"creation_date":1682359406,"post_id":76094549,"comment_id":134199573,"body_markdown":"Sorry, I&#39;ve done this a few times, however clicking ok in the System properties dialog did not work for me","body":"Sorry, I&#39;ve done this a few times, however clicking ok in the System properties dialog did not work for me"}],"tags":[],"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682357389,"creation_date":1682357254,"answer_id":76094549,"question_id":76094443,"body_markdown":"The system variables are re-applied to the user&#39;s Path when you  press `OK` on the System Properties dialog (the one immediately before your Environment Variables dialog). It should reflect the updated value when you re-open it.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/PCUXs.png","title":"JAVA_HOME not updating in Environment Variables? (Windows 10)","body":"<p>The system variables are re-applied to the user's Path when you  press <code>OK</code> on the System Properties dialog (the one immediately before your Environment Variables dialog). It should reflect the updated value when you re-open it.</p>\n<p><a href=\"https://i.stack.imgur.com/PCUXs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PCUXs.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"owner":{"account_id":28372160,"reputation":27,"user_id":21700578,"display_name":"PleasePleasePleaseHelp"},"score":0,"creation_date":1682359371,"post_id":76094562,"comment_id":134199559,"body_markdown":"Sorry, this did not work for me","body":"Sorry, this did not work for me"},{"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"score":0,"creation_date":1682499571,"post_id":76094562,"comment_id":134224261,"body_markdown":"@PleasePleasePleaseHelp let me check, I will fix it","body":"@PleasePleasePleaseHelp let me check, I will fix it"}],"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682357385,"creation_date":1682357385,"answer_id":76094562,"question_id":76094443,"body_markdown":"Follow these steps:\r\n\r\n1) Open Environment Variables.\r\n2) Edit the User Path Variable in the System Variables section.\r\n3) Find the path corresponding to the v8 JDK.\r\n4) Edit that path to the v11 JDK path.\r\n5) Save changes and close the Environment Variables window.\r\n6) User Path Variable should now use the v11 JDK.","title":"JAVA_HOME not updating in Environment Variables? (Windows 10)","body":"<p>Follow these steps:</p>\n<ol>\n<li>Open Environment Variables.</li>\n<li>Edit the User Path Variable in the System Variables section.</li>\n<li>Find the path corresponding to the v8 JDK.</li>\n<li>Edit that path to the v11 JDK path.</li>\n<li>Save changes and close the Environment Variables window.</li>\n<li>User Path Variable should now use the v11 JDK.</li>\n</ol>\n"}],"owner":{"account_id":28372160,"reputation":27,"user_id":21700578,"display_name":"PleasePleasePleaseHelp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1172,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1682357389,"creation_date":1682356521,"question_id":76094443,"body_markdown":"When I update my JAVA_HOME System variable to the v11 jdk, the %JAVA_HOME% in the User Path Variable doesn&#39;t update. \r\n\r\n[Environment Variables][1]\r\n\r\nAs you can see in the image, the JAVA_HOME is set to v11 while the Path User variable is still set to v8. Any ideas?\r\n\r\nI should mention that I have v8 and v11 JDKs successfully installed on my computer. I&#39;ve tried saving and reopening the Environment variables window and restarting the computer. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cy8t2.png","title":"JAVA_HOME not updating in Environment Variables? (Windows 10)","body":"<p>When I update my JAVA_HOME System variable to the v11 jdk, the %JAVA_HOME% in the User Path Variable doesn't update.</p>\n<p><a href=\"https://i.stack.imgur.com/cy8t2.png\" rel=\"nofollow noreferrer\">Environment Variables</a></p>\n<p>As you can see in the image, the JAVA_HOME is set to v11 while the Path User variable is still set to v8. Any ideas?</p>\n<p>I should mention that I have v8 and v11 JDKs successfully installed on my computer. I've tried saving and reopening the Environment variables window and restarting the computer.</p>\n"},{"tags":["javascript","java","angular","angularjs"],"owner":{"account_id":10701786,"reputation":53,"user_id":7876869,"display_name":"Dallas2017"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682357340,"creation_date":1680791643,"question_id":75950751,"body_markdown":"I want to able to play video on demand. I have Spring Boot Java app as a server and Angular/JavaScript app as a client. What I want to accomplish is that whenever a user want to play video on a browser, sends Rest API request to server side. The server side sends chunks as byte array. Then the client side converts that byte array and starts playing the video using HTML5 `&lt;video&gt;` tag.\r\n\r\nThe issue: I have the server side sending the video file as chunks of byte array, reading it from FileInputStream\r\n\r\n```\r\npublic byte[] streamMovie(String filepath) throws IOException {\r\n    int SIZE = 1024 * 1024;\r\n    File file = new File(filepath);\r\n    FileInputStream fis = new FileInputStream(filepath);\r\n    byte[] v = IOUtils.readBytesAndClose(fis, SIZE);\r\n    return v;\r\n}\r\n```\r\n\r\nBut on the client side, I can&#39;t find any solution that can convert this byte array in to suitable format, that I can use to create a blob in JavaScript;\r\n\r\nOn Client side\r\n\r\n```\r\nconst player = document.getElementById(&quot;video-player&quot;);\r\n\r\n// response is the response came from the server side i.e. byte array\r\nconst uint8array = toUint8Array(response.data);\r\n\r\nconst blob = new Blob(uint8array, { type: &#39;video/mp4&#39; });\r\nplayer.src = URL.createObjectURL(blob);\r\nplayer.play();\r\n\r\nfunction toUint8Array(data) {\r\n    let byteNumbers = new Array(data.length);\r\n    for (let i = 0; i &lt; data.length; i++) {\r\n        byteNumbers[i] = data.charCodeAt(i) &amp; 0xFF;\r\n    }\r\n    const byteArray = new Uint8Array(byteNumbers);\r\n    return byteArray;\r\n}\r\n```\r\n\r\nThen I keep getting:\r\n\r\n```\r\nUncaught (in promise) DOMException: Failed to load because no supported source was found.\r\n```\r\n","title":"How to stream video on demand?","body":"<p>I want to able to play video on demand. I have Spring Boot Java app as a server and Angular/JavaScript app as a client. What I want to accomplish is that whenever a user want to play video on a browser, sends Rest API request to server side. The server side sends chunks as byte array. Then the client side converts that byte array and starts playing the video using HTML5 <code>&lt;video&gt;</code> tag.</p>\n<p>The issue: I have the server side sending the video file as chunks of byte array, reading it from FileInputStream</p>\n<pre><code>public byte[] streamMovie(String filepath) throws IOException {\n    int SIZE = 1024 * 1024;\n    File file = new File(filepath);\n    FileInputStream fis = new FileInputStream(filepath);\n    byte[] v = IOUtils.readBytesAndClose(fis, SIZE);\n    return v;\n}\n</code></pre>\n<p>But on the client side, I can't find any solution that can convert this byte array in to suitable format, that I can use to create a blob in JavaScript;</p>\n<p>On Client side</p>\n<pre><code>const player = document.getElementById(&quot;video-player&quot;);\n\n// response is the response came from the server side i.e. byte array\nconst uint8array = toUint8Array(response.data);\n\nconst blob = new Blob(uint8array, { type: 'video/mp4' });\nplayer.src = URL.createObjectURL(blob);\nplayer.play();\n\nfunction toUint8Array(data) {\n    let byteNumbers = new Array(data.length);\n    for (let i = 0; i &lt; data.length; i++) {\n        byteNumbers[i] = data.charCodeAt(i) &amp; 0xFF;\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    return byteArray;\n}\n</code></pre>\n<p>Then I keep getting:</p>\n<pre><code>Uncaught (in promise) DOMException: Failed to load because no supported source was found.\n</code></pre>\n"},{"tags":["java","arrays","io"],"answers":[{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682357100,"creation_date":1682357100,"answer_id":76094517,"question_id":76094462,"body_markdown":"Have a counter variable that increments for each card. Use something like the following to alternate between lists:\r\n\r\n    if(counter % 2 == 1) {\r\n        oddList.add(card);\r\n    } else {\r\n        evenList.add(card);\r\n    }\r\n    ","title":"reading in file and storing elements in alternate arrays","body":"<p>Have a counter variable that increments for each card. Use something like the following to alternate between lists:</p>\n<pre><code>if(counter % 2 == 1) {\n    oddList.add(card);\n} else {\n    evenList.add(card);\n}\n</code></pre>\n"}],"owner":{"account_id":23035625,"reputation":13,"user_id":17154427,"display_name":"jeremslol"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76094517,"answer_count":1,"score":-1,"last_activity_date":1682357100,"creation_date":1682356652,"question_id":76094462,"body_markdown":"Say i have a file formatted like this, the first line being the number of elements to be read\r\n```\r\n4\r\n2\r\nHearts\r\n10\r\nSpades\r\n\r\n```\r\n\r\nHow would I go about reading the first 2 lines, storing it in a &quot;Card&quot; object (card value and suit), and putting into one list, and doing the same for the next to lines, but storing it in a separate list, continuing to alternate in this pattern if there are more elements in the file.","title":"reading in file and storing elements in alternate arrays","body":"<p>Say i have a file formatted like this, the first line being the number of elements to be read</p>\n<pre><code>4\n2\nHearts\n10\nSpades\n\n</code></pre>\n<p>How would I go about reading the first 2 lines, storing it in a &quot;Card&quot; object (card value and suit), and putting into one list, and doing the same for the next to lines, but storing it in a separate list, continuing to alternate in this pattern if there are more elements in the file.</p>\n"},{"tags":["java","spring-mvc","servlets","apache-commons-fileupload"],"comments":[{"owner":{"account_id":1455702,"reputation":15684,"user_id":1371329,"accept_rate":64,"display_name":"jaco0646"},"score":2,"creation_date":1682357171,"post_id":76094493,"comment_id":134199040,"body_markdown":"&quot;_Users of affected versions should apply the following mitigation: 5.3.x users should upgrade to 5.3.20; 5.2.x users should upgrade to 5.2.22. No other steps are necessary._&quot;","body":"&quot;<i>Users of affected versions should apply the following mitigation: 5.3.x users should upgrade to 5.3.20; 5.2.x users should upgrade to 5.2.22. No other steps are necessary.</i>&quot;"},{"owner":{"account_id":2007211,"reputation":581,"user_id":1796748,"accept_rate":40,"display_name":"yonikawa"},"score":0,"creation_date":1682358381,"post_id":76094493,"comment_id":134199321,"body_markdown":"@jaco0646 - Its a legacy app and hence upgrading to latest Spring is a huge effort and we have time constraints to deliver a temporary fix to the clients during the interim. Hence looking for alternative options. We are on Spring 4.x (un supported version)","body":"@jaco0646 - Its a legacy app and hence upgrading to latest Spring is a huge effort and we have time constraints to deliver a temporary fix to the clients during the interim. Hence looking for alternative options. We are on Spring 4.x (un supported version)"}],"owner":{"account_id":2007211,"reputation":581,"user_id":1796748,"accept_rate":40,"display_name":"yonikawa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682356869,"creation_date":1682356869,"question_id":76094493,"body_markdown":"Can you have `Spring Controller/MVC` and the traditional `Java Servlet code (doPost)` executed through  the same servlet? We have a legacy webapp that implements a mix of Spring MVC on certain areas and Java Servlet code to support other areas. Now due to the below vulnerability identified, we are trying to replace `Spring multipart file` feature with `Apache Commons FileUpload`. \r\n\r\n[Spring Multipart/form-data vulnerability][1]\r\n\r\nIs there a way to add the doPost() handler to exclusively handle the fileUpload feature in a Spring Controller class? (implemented using @Controller).\r\n\r\nIn other words, use `Spring Controller` for rest of the functionalities and `doPost()` just for the file upload feature in the same servlet?\r\n\r\n**Spring Controller Code:**\r\n\r\n    \t@RequestMapping(value = &quot;/uploadFile&quot;, method = RequestMethod.POST)\r\n\tpublic ModelAndView uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file,\r\n\t\t\tHttpServletRequest request, HttpServletResponse response) {\r\n\r\n\t\ttry {\r\n\t\t\tboolean updated = false;\r\n\t\t\tString uploadDir = &quot;/WEB-INF/&quot;;\r\n\t\t\tString realPath = request.getServletContext()\r\n\t\t\t\t\t.getRealPath(uploadDir);\r\n\r\n\t\t\tFile transferFile = new File(\r\n\t\t\t\t\trealPath + &quot;/&quot; + file.getOriginalFilename());\r\n\t\t\tfile.transferTo(transferFile);\r\n\t\t\tString contents = new String(Files.readAllBytes(\r\n\t\t\t\t\tPaths.get(realPath + file.getOriginalFilename())));\r\n\t\t\tlogger.debug(contents);\r\n\r\n\t\t\t..........\r\n\t\t\t\tmore code\r\n\t\t\t\t\r\n\t\t\t\t\tupdated = true;\r\n\t\t\t\t\t((ModelMap) model).addAttribute(&quot;errors&quot;, &quot;&quot;); //reset any previous errors\r\n\t\t\t\r\n\t\t\t} else {//if invalid file, show error msg\r\n\t\t\t\tString error = MessageBoxUtil.getErrorMessageBox(\r\n\t\t\t\t\t\t&quot;Invalid Key Found. Please try again.&quot;);\r\n\t\t\t\t((ModelMap) model).addAttribute(&quot;errors&quot;, error);\r\n\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmodel.put(&quot;updated&quot;, updated);\r\n\r\n\t\t\treturn mv;\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\tlogger.debug(&quot;Exception ocurred: &quot; +e);\r\n\t\t\t//e.printStackTrace();\r\n\t\t\tnew TemplateManager(request).doError(e, request, response);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n**Replace the above with the code below:**\r\n\r\n    \t/* Apache Commons File Upload */\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n\t\t \r\n\t\t  try {\r\n\r\n\t    DiskFileItemFactory factory = new DiskFileItemFactory();\r\n\t\t    factory.setRepository(new File(&quot;C:\\\\temp\\\\&quot;));\r\n\t\t\tServletFileUpload fileUpload = new ServletFileUpload(factory);\r\n\t\t\tList&lt;FileItem&gt; fileItems = fileUpload.parseRequest(request);\r\n\t\tfor(FileItem fileItem : fileItems) {\r\n\t\t\t  if(!fileItem.isFormField()) {\t  \r\n\t\t\t    File file = new File(fileItem.getName());  \r\n\t\t\t\tFile fNew= new File(&quot;C:\\\\upload\\\\&quot;  + file.getName());\r\n\t\t\t\tfileItem.write(fNew);\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t  } catch (Exception e) {\r\n\t\t    String fileUploadError = &quot;Problem with Apache Commons File Upload.&quot;;\r\n\t\t    System.out.println(fileUploadError);\r\n\t\t  } \r\n\t\t}\r\n\r\n\r\nJSp Code:\r\n\r\n    \t &lt;form name=&quot;uploadFile&quot; method=&quot;POST&quot; action=&quot;uploadFile&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n \t\t\t&lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;&lt;br /&gt;\t\t\r\n\t\t\t&lt;input type=&quot;submit&quot; name=&quot;submit&quot; id=&quot;importkey&quot; value=&quot;Import Key&quot;/&gt;\r\n \t&lt;/form&gt;\r\n\r\n\r\n  [1]: https://spring.io/security/cve-2022-22970","title":"SpringMVC and Java Servlet code in the same class","body":"<p>Can you have <code>Spring Controller/MVC</code> and the traditional <code>Java Servlet code (doPost)</code> executed through  the same servlet? We have a legacy webapp that implements a mix of Spring MVC on certain areas and Java Servlet code to support other areas. Now due to the below vulnerability identified, we are trying to replace <code>Spring multipart file</code> feature with <code>Apache Commons FileUpload</code>.</p>\n<p><a href=\"https://spring.io/security/cve-2022-22970\" rel=\"nofollow noreferrer\">Spring Multipart/form-data vulnerability</a></p>\n<p>Is there a way to add the doPost() handler to exclusively handle the fileUpload feature in a Spring Controller class? (implemented using @Controller).</p>\n<p>In other words, use <code>Spring Controller</code> for rest of the functionalities and <code>doPost()</code> just for the file upload feature in the same servlet?</p>\n<p><strong>Spring Controller Code:</strong></p>\n<pre><code>    @RequestMapping(value = &quot;/uploadFile&quot;, method = RequestMethod.POST)\npublic ModelAndView uploadFile(@RequestParam(&quot;file&quot;) MultipartFile file,\n        HttpServletRequest request, HttpServletResponse response) {\n\n    try {\n        boolean updated = false;\n        String uploadDir = &quot;/WEB-INF/&quot;;\n        String realPath = request.getServletContext()\n                .getRealPath(uploadDir);\n\n        File transferFile = new File(\n                realPath + &quot;/&quot; + file.getOriginalFilename());\n        file.transferTo(transferFile);\n        String contents = new String(Files.readAllBytes(\n                Paths.get(realPath + file.getOriginalFilename())));\n        logger.debug(contents);\n\n        ..........\n            more code\n            \n                updated = true;\n                ((ModelMap) model).addAttribute(&quot;errors&quot;, &quot;&quot;); //reset any previous errors\n        \n        } else {//if invalid file, show error msg\n            String error = MessageBoxUtil.getErrorMessageBox(\n                    &quot;Invalid Key Found. Please try again.&quot;);\n            ((ModelMap) model).addAttribute(&quot;errors&quot;, error);\n\n        }\n        \n        model.put(&quot;updated&quot;, updated);\n\n        return mv;\n\n    } catch (Exception e) {\n        logger.debug(&quot;Exception ocurred: &quot; +e);\n        //e.printStackTrace();\n        new TemplateManager(request).doError(e, request, response);\n    }\n    return null;\n}\n</code></pre>\n<p><strong>Replace the above with the code below:</strong></p>\n<pre><code>    /* Apache Commons File Upload */\nprotected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n     \n      try {\n\n    DiskFileItemFactory factory = new DiskFileItemFactory();\n        factory.setRepository(new File(&quot;C:\\\\temp\\\\&quot;));\n        ServletFileUpload fileUpload = new ServletFileUpload(factory);\n        List&lt;FileItem&gt; fileItems = fileUpload.parseRequest(request);\n    for(FileItem fileItem : fileItems) {\n          if(!fileItem.isFormField()) {   \n            File file = new File(fileItem.getName());  \n            File fNew= new File(&quot;C:\\\\upload\\\\&quot;  + file.getName());\n            fileItem.write(fNew);\n          }\n        }\n      } catch (Exception e) {\n        String fileUploadError = &quot;Problem with Apache Commons File Upload.&quot;;\n        System.out.println(fileUploadError);\n      } \n    }\n</code></pre>\n<p>JSp Code:</p>\n<pre><code>     &lt;form name=&quot;uploadFile&quot; method=&quot;POST&quot; action=&quot;uploadFile&quot; enctype=&quot;multipart/form-data&quot;&gt;\n        &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;&lt;br /&gt;     \n        &lt;input type=&quot;submit&quot; name=&quot;submit&quot; id=&quot;importkey&quot; value=&quot;Import Key&quot;/&gt;\n&lt;/form&gt;\n</code></pre>\n"},{"tags":["java","spring","junit","dependency-injection","spring-test"],"comments":[{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1682346338,"post_id":76092878,"comment_id":134196299,"body_markdown":"have you tried to direclty `@Autowired` the field? and remove the test constructor?","body":"have you tried to direclty <code>@Autowired</code> the field? and remove the test constructor?"},{"owner":{"account_id":6627426,"reputation":229,"user_id":5117196,"accept_rate":50,"display_name":"Andrew Kachalin"},"score":0,"creation_date":1682346396,"post_id":76092878,"comment_id":134196323,"body_markdown":"@EmanuelTrandafir We have command agreement, that we will inject via constructor.","body":"@EmanuelTrandafir We have command agreement, that we will inject via constructor."},{"owner":{"account_id":6627426,"reputation":229,"user_id":5117196,"accept_rate":50,"display_name":"Andrew Kachalin"},"score":0,"creation_date":1682350516,"post_id":76092878,"comment_id":134197484,"body_markdown":"@ZufarSunagatov yes, but I am not full satisfy","body":"@ZufarSunagatov yes, but I am not full satisfy"}],"answers":[{"comments":[{"owner":{"account_id":6627426,"reputation":229,"user_id":5117196,"accept_rate":50,"display_name":"Andrew Kachalin"},"score":0,"creation_date":1682350450,"post_id":76093211,"comment_id":134197469,"body_markdown":"Yes. It&#39;s work for me, but I prefer to code at  the interface level. \nIn you code variant please type  @Autowired\n    public SimpleClassImplTest(SimpleClassImpl simpleClass) as in your answer","body":"Yes. It&#39;s work for me, but I prefer to code at  the interface level.  In you code variant please type  @Autowired     public SimpleClassImplTest(SimpleClassImpl simpleClass) as in your answer"},{"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"score":0,"creation_date":1682355063,"post_id":76093211,"comment_id":134198553,"body_markdown":"@AndrewKachalin I fixed it, check","body":"@AndrewKachalin I fixed it, check"},{"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"score":0,"creation_date":1682355603,"post_id":76093211,"comment_id":134198675,"body_markdown":"@AndrewKachalin all good?","body":"@AndrewKachalin all good?"},{"owner":{"account_id":6627426,"reputation":229,"user_id":5117196,"accept_rate":50,"display_name":"Andrew Kachalin"},"score":0,"creation_date":1682356047,"post_id":76093211,"comment_id":134198767,"body_markdown":"Not all good. Your implementation doesn&#39;t work without @SpringBootTest(classes = SimpleClassImpl.class)","body":"Not all good. Your implementation doesn&#39;t work without @SpringBootTest(classes = SimpleClassImpl.class)"},{"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"score":0,"creation_date":1682357179,"post_id":76093211,"comment_id":134199044,"body_markdown":"@AndrewKachalin all good, now? :-)","body":"@AndrewKachalin all good, now? :-)"}],"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1682356588,"creation_date":1682347899,"answer_id":76093211,"question_id":76092878,"body_markdown":"&gt; Question: how to change (what to add) to SimpleClassImplTest so that\r\n&gt; the bean is normally injected through the constructor?\r\n\r\n1) Annotate constructor with `@Autowired`.\r\n\r\n2) As you use Unit 5, use the `@ExtendWith` instead of the deprecated `@RunWith` annotation.\r\n\r\nHere is the code:\r\n\r\n```\r\n@SpringBootTest\r\n@ExtendWith(SpringExtension.class)\r\n@ComponentScan(&quot;there is path to my directory&quot;)\r\npublic class SimpleClassImplTest {\r\n\r\n    private final SimpleClass simpleClass;\r\n\r\n    @Autowired\r\n    public SimpleClassImplTest(SimpleClass simpleClass){\r\n        this.simpleClass = simpleClass;\r\n    }\r\n\r\n    @Test\r\n    public void testGetString(){\r\n        assertNotNull(simpleClass.getString());\r\n    }\r\n}\r\n```\r\nIf you want to test the `SimpleClass interface` without any concrete implementation, you can use a mock object framework like `Mockito` to create a mock object of the `interface`. \r\nHere is the code:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class SimpleClassImplTest {\r\n\r\n    @Mock\r\n    private SimpleClass simpleClass;\r\n\r\n    @Test\r\n    public void testGetString(){\r\n        when(simpleClass.getString()).thenReturn(&quot;Hello World&quot;);\r\n        assertNotNull(simpleClass.getString());\r\n    }\r\n}\r\n```","title":"How to inject @Service bean into test junit 5 via constructor, so application doesn&#39;t crash?","body":"<blockquote>\n<p>Question: how to change (what to add) to SimpleClassImplTest so that\nthe bean is normally injected through the constructor?</p>\n</blockquote>\n<ol>\n<li><p>Annotate constructor with <code>@Autowired</code>.</p>\n</li>\n<li><p>As you use Unit 5, use the <code>@ExtendWith</code> instead of the deprecated <code>@RunWith</code> annotation.</p>\n</li>\n</ol>\n<p>Here is the code:</p>\n<pre><code>@SpringBootTest\n@ExtendWith(SpringExtension.class)\n@ComponentScan(&quot;there is path to my directory&quot;)\npublic class SimpleClassImplTest {\n\n    private final SimpleClass simpleClass;\n\n    @Autowired\n    public SimpleClassImplTest(SimpleClass simpleClass){\n        this.simpleClass = simpleClass;\n    }\n\n    @Test\n    public void testGetString(){\n        assertNotNull(simpleClass.getString());\n    }\n}\n</code></pre>\n<p>If you want to test the <code>SimpleClass interface</code> without any concrete implementation, you can use a mock object framework like <code>Mockito</code> to create a mock object of the <code>interface</code>.\nHere is the code:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class SimpleClassImplTest {\n\n    @Mock\n    private SimpleClass simpleClass;\n\n    @Test\n    public void testGetString(){\n        when(simpleClass.getString()).thenReturn(&quot;Hello World&quot;);\n        assertNotNull(simpleClass.getString());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":6627426,"reputation":229,"user_id":5117196,"accept_rate":50,"display_name":"Andrew Kachalin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":916,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682356588,"creation_date":1682345927,"question_id":76092878,"body_markdown":"Suppose I have a business logic layer in my spring boot application. To simplify:\r\n\r\n    public interface SimpleClass {\r\n        public String getString();\r\n    }\r\n    \r\n    @Service\r\n    public class SimpleClassImpl implements SimpleClass {\r\n    \r\n        public String getString(){\r\n            return &quot;Hello World&quot;;\r\n        }\r\n    }\r\n\r\nI need to test a single method. I wrote something like this:\r\n\r\n    @SpringBootTest\r\n    @ExtendWith(SpringExtension.class)\r\n    @ComponentScan(&quot;there is path to my directory&quot;)\r\n    class SimpleClassImplTest {\r\n    \r\n        private SimpleClass simpleClass;\r\n    \r\n        @Autowired\r\n        SimpleClassImplTest(SimpleClass simpleClass){\r\n            this.simpleClass = simpleClass;\r\n        }\r\n    \r\n        @Test\r\n        public void testGetString(){\r\n         assertNotNull( simpleClass.getString());\r\n        }    \r\n    }\r\n\r\nThat is, in the test, I want to inject an instance of the business logic class through the constructor (this is necessary for my tasks). The application however crashes with error:  `org.junit.jupiter.api.extension.ParameterResolutionException: Failed to resolve parameter in constructor.`\r\n\r\n**Question:** how to change (what to add) to SimpleClassImplTest so that the bean is normally injected through the constructor?","title":"How to inject @Service bean into test junit 5 via constructor, so application doesn&#39;t crash?","body":"<p>Suppose I have a business logic layer in my spring boot application. To simplify:</p>\n<pre><code>public interface SimpleClass {\n    public String getString();\n}\n\n@Service\npublic class SimpleClassImpl implements SimpleClass {\n\n    public String getString(){\n        return &quot;Hello World&quot;;\n    }\n}\n</code></pre>\n<p>I need to test a single method. I wrote something like this:</p>\n<pre><code>@SpringBootTest\n@ExtendWith(SpringExtension.class)\n@ComponentScan(&quot;there is path to my directory&quot;)\nclass SimpleClassImplTest {\n\n    private SimpleClass simpleClass;\n\n    @Autowired\n    SimpleClassImplTest(SimpleClass simpleClass){\n        this.simpleClass = simpleClass;\n    }\n\n    @Test\n    public void testGetString(){\n     assertNotNull( simpleClass.getString());\n    }    \n}\n</code></pre>\n<p>That is, in the test, I want to inject an instance of the business logic class through the constructor (this is necessary for my tasks). The application however crashes with error:  <code>org.junit.jupiter.api.extension.ParameterResolutionException: Failed to resolve parameter in constructor.</code></p>\n<p><strong>Question:</strong> how to change (what to add) to SimpleClassImplTest so that the bean is normally injected through the constructor?</p>\n"},{"tags":["java","encryption","bouncycastle","pgp","openpgp"],"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1682353824,"post_id":76093779,"comment_id":134198263,"body_markdown":"**[That exception should have a caused-by block in its stacktrace.](https://github.com/bcgit/bc-java/blob/master/pg/src/main/java/org/bouncycastle/openpgp/PGPPublicKeyEncryptedData.java#L218)** Please include it if available; it&#39;s highly relevant.","body":"<b><a href=\"https://github.com/bcgit/bc-java/blob/master/pg/src/main/java/org/bouncycastle/openpgp/PGPPublicKeyEncryptedData.java#L218\" rel=\"nofollow noreferrer\">That exception should have a caused-by block in its stacktrace.</a></b> Please include it if available; it&#39;s highly relevant."},{"owner":{"account_id":28376596,"reputation":1,"user_id":21704561,"display_name":"javaConsumtion"},"score":0,"creation_date":1682356514,"post_id":76093779,"comment_id":134198870,"body_markdown":"@dave_thompson_085 thank you. I have updated my post to include the stacktrace.","body":"@dave_thompson_085 thank you. I have updated my post to include the stacktrace."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1682381864,"post_id":76093779,"comment_id":134203173,"body_markdown":"Okay, premature EOF pretty strongly suggests the message is wrongly formatted/encoded, or damaged. How are you doing the encryption? Do you have or can you get GnuPG? If so, look at `gpg --list-packets $file`.","body":"Okay, premature EOF pretty strongly suggests the message is wrongly formatted/encoded, or damaged. How are you doing the encryption? Do you have or can you get GnuPG? If so, look at <code>gpg --list-packets $file</code>."},{"owner":{"account_id":15457133,"reputation":185,"user_id":11150851,"display_name":"vanitasvitae"},"score":0,"creation_date":1687189998,"post_id":76093779,"comment_id":134898833,"body_markdown":"If your implementation produced the encrypted message, then it is very likely that you forgot to close the OutputStream obtained from the PGPEncryptedDataGenerator.","body":"If your implementation produced the encrypted message, then it is very likely that you forgot to close the OutputStream obtained from the PGPEncryptedDataGenerator."}],"owner":{"account_id":28376596,"reputation":1,"user_id":21704561,"display_name":"javaConsumtion"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":164,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682356469,"creation_date":1682351533,"question_id":76093779,"body_markdown":"I am facing an issue that is causing the PGPException: Exception starting decryption.\r\n\r\n\r\n```\r\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Got encrypted stream from input stream\r\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Creating decryptor with provider: BC\r\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Using private key with ID: 3d1dc62715cb3e82\r\norg.bouncycastle.openpgp.PGPException: Exception starting decryption\r\n\tat org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)\r\n\tat com.rxbenefits.service.impl.PGPEncryptionService.decryptFile(PGPEncryptionService.java:142)\r\n\tat com.rxbenefits.service.impl.PGPEncryptionServiceTest.testDecryptFile(PGPEncryptionServiceTest.java:86)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: java.io.EOFException: premature end of stream in PartialInputStream\r\n\tat org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.read(Unknown Source)\r\n\tat org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)\r\n\tat java.base/java.io.InputStream.read(InputStream.java:205)\r\n\tat java.base/javax.crypto.CipherInputStream.getMoreData(CipherInputStream.java:121)\r\n\tat java.base/javax.crypto.CipherInputStream.read(CipherInputStream.java:197)\r\n\tat org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)\r\n\tat org.bouncycastle.openpgp.PGPEncryptedData$TruncatedStream.&lt;init&gt;(Unknown Source)\r\n\t... 30 more\r\n```\r\n\r\nThe code is saying I am throwing the error at the `InputStream clearStream = publicKeyEncryptedData.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder()\r\n                    .setProvider(new BouncyCastleProvider())\r\n                    .build(privateKey));` line within the decryption method below. I have a feeling that it might have something to do with the `Security.addProvider(new BouncyCastleProvider());` line at the top of my decryption method....but I am not sure. \r\n\r\nThis is my first time working with encryption, so would like any guidance if possible.\r\n\r\n\r\n```\r\npublic static void decryptFile(InputStream in, OutputStream out, InputStream keyIn, char[] passwd) throws IOException, PGPException {\r\n        Security.addProvider(new BouncyCastleProvider());\r\n        try (InputStream encryptedStream = PGPUtil.getDecoderStream(in)) {\r\n            log.info(&quot;Got encrypted stream from input stream&quot;);\r\n\r\n            PGPObjectFactory pgpFactory = new PGPObjectFactory(encryptedStream, new JcaKeyFingerprintCalculator());\r\n            PGPEncryptedDataList encryptedDataList = (PGPEncryptedDataList) pgpFactory.nextObject();\r\n\r\n            if (encryptedDataList == null) {\r\n                log.info(&quot;No encrypted data found in input stream&quot;);\r\n                throw new PGPException(&quot;No encrypted data found in input stream&quot;);\r\n            }\r\n\r\n            // find the secret key needed to decrypt the message\r\n            PGPSecretKeyRingCollection secretKeyRingCollection = new PGPSecretKeyRingCollection(PGPUtil.getDecoderStream(keyIn), new JcaKeyFingerprintCalculator());\r\n            PGPPrivateKey privateKey = null;\r\n            PGPPublicKeyEncryptedData publicKeyEncryptedData = null;\r\n            for (Object encryptedData : encryptedDataList) {\r\n                if (encryptedData instanceof PGPPublicKeyEncryptedData) {\r\n                    publicKeyEncryptedData = (PGPPublicKeyEncryptedData) encryptedData;\r\n                    PGPSecretKey secretKey = secretKeyRingCollection.getSecretKey(publicKeyEncryptedData.getKeyID());\r\n                    if (secretKey != null) {\r\n                        privateKey = secretKey.extractPrivateKey(new JcePBESecretKeyDecryptorBuilder().setProvider(&quot;BC&quot;).build(passwd));\r\n                        break;\r\n                    } else {\r\n                        log.info(&quot;No secret key found for message&quot;);\r\n                        throw new IllegalArgumentException(&quot;No secret key found for message&quot;);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (privateKey == null) {\r\n                log.info(&quot;No private key found for message&quot;);\r\n                throw new IllegalArgumentException(&quot;No private key found for message&quot;);\r\n            }\r\n            log.info(&quot;Creating decryptor with provider: &quot; + Security.getProvider(&quot;BC&quot;).getName());\r\n            log.info(&quot;Using private key with ID: &quot; + Long.toHexString(publicKeyEncryptedData.getKeyID()));\r\n            // create the decryptor and decrypt the message\r\n            InputStream clearStream = publicKeyEncryptedData.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder()\r\n                    .setProvider(new BouncyCastleProvider())\r\n                    .build(privateKey));\r\n            log.info(&quot;Created decryptor and decrypted message&quot;);\r\n\r\n            PGPObjectFactory plainFactory = new PGPObjectFactory(clearStream, new JcaKeyFingerprintCalculator());\r\n            Object message = plainFactory.nextObject();\r\n\r\n            // handle the decrypted message\r\n            if (message instanceof PGPCompressedData) {\r\n                PGPCompressedData compressedData = (PGPCompressedData) message;\r\n                InputStream compressedStream = new BufferedInputStream(compressedData.getDataStream());\r\n                message = new PGPObjectFactory(compressedStream, new JcaKeyFingerprintCalculator()).nextObject();\r\n            }\r\n\r\n            if (message instanceof PGPLiteralData) {\r\n                PGPLiteralData literalData = (PGPLiteralData) message;\r\n                try (InputStream literalStream = literalData.getInputStream()) {\r\n                    byte[] buffer = new byte[4096];\r\n                    int bytesRead;\r\n                    while ((bytesRead = literalStream.read(buffer)) != -1) {\r\n                        out.write(buffer, 0, bytesRead);\r\n                    }\r\n                }\r\n                log.info(&quot;Decrypted message of type PGPLiteralData&quot;);\r\n            } else {\r\n                log.info(&quot;Unknown message type: &quot; + message.getClass().getName());\r\n                throw new PGPException(&quot;Unknown message type: &quot; + message.getClass().getName());\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n\r\nI am trying to decrypt an encrypted file. I encrypted the file using a pub key provided to me by work and am decrypting by using the sec key and password provided by them as well.\r\n\r\nIt seems to be failing when trying to actually decrypt.\r\nKnowing the pub and sec key are correct, along with the password, I am wondering if I might not be encrypting the file correctly? Could this be a possibility? When I open the encrypted file it looks very encrypted.\r\n\r\n\r\nPho","title":"Java - PGP Decryption Throwing &#39;Exception Starting Decryption&#39;","body":"<p>I am facing an issue that is causing the PGPException: Exception starting decryption.</p>\n<pre><code>[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Got encrypted stream from input stream\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Creating decryptor with provider: BC\n[main] INFO com.rxbenefits.service.impl.PGPEncryptionService - Using private key with ID: 3d1dc62715cb3e82\norg.bouncycastle.openpgp.PGPException: Exception starting decryption\n    at org.bouncycastle.openpgp.PGPPublicKeyEncryptedData.getDataStream(Unknown Source)\n    at com.rxbenefits.service.impl.PGPEncryptionService.decryptFile(PGPEncryptionService.java:142)\n    at com.rxbenefits.service.impl.PGPEncryptionServiceTest.testDecryptFile(PGPEncryptionServiceTest.java:86)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: java.io.EOFException: premature end of stream in PartialInputStream\n    at org.bouncycastle.bcpg.BCPGInputStream$PartialInputStream.read(Unknown Source)\n    at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)\n    at java.base/java.io.InputStream.read(InputStream.java:205)\n    at java.base/javax.crypto.CipherInputStream.getMoreData(CipherInputStream.java:121)\n    at java.base/javax.crypto.CipherInputStream.read(CipherInputStream.java:197)\n    at org.bouncycastle.bcpg.BCPGInputStream.read(Unknown Source)\n    at org.bouncycastle.openpgp.PGPEncryptedData$TruncatedStream.&lt;init&gt;(Unknown Source)\n    ... 30 more\n</code></pre>\n<p>The code is saying I am throwing the error at the <code>InputStream clearStream = publicKeyEncryptedData.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder() .setProvider(new BouncyCastleProvider()) .build(privateKey));</code> line within the decryption method below. I have a feeling that it might have something to do with the <code>Security.addProvider(new BouncyCastleProvider());</code> line at the top of my decryption method....but I am not sure.</p>\n<p>This is my first time working with encryption, so would like any guidance if possible.</p>\n<pre><code>public static void decryptFile(InputStream in, OutputStream out, InputStream keyIn, char[] passwd) throws IOException, PGPException {\n        Security.addProvider(new BouncyCastleProvider());\n        try (InputStream encryptedStream = PGPUtil.getDecoderStream(in)) {\n            log.info(&quot;Got encrypted stream from input stream&quot;);\n\n            PGPObjectFactory pgpFactory = new PGPObjectFactory(encryptedStream, new JcaKeyFingerprintCalculator());\n            PGPEncryptedDataList encryptedDataList = (PGPEncryptedDataList) pgpFactory.nextObject();\n\n            if (encryptedDataList == null) {\n                log.info(&quot;No encrypted data found in input stream&quot;);\n                throw new PGPException(&quot;No encrypted data found in input stream&quot;);\n            }\n\n            // find the secret key needed to decrypt the message\n            PGPSecretKeyRingCollection secretKeyRingCollection = new PGPSecretKeyRingCollection(PGPUtil.getDecoderStream(keyIn), new JcaKeyFingerprintCalculator());\n            PGPPrivateKey privateKey = null;\n            PGPPublicKeyEncryptedData publicKeyEncryptedData = null;\n            for (Object encryptedData : encryptedDataList) {\n                if (encryptedData instanceof PGPPublicKeyEncryptedData) {\n                    publicKeyEncryptedData = (PGPPublicKeyEncryptedData) encryptedData;\n                    PGPSecretKey secretKey = secretKeyRingCollection.getSecretKey(publicKeyEncryptedData.getKeyID());\n                    if (secretKey != null) {\n                        privateKey = secretKey.extractPrivateKey(new JcePBESecretKeyDecryptorBuilder().setProvider(&quot;BC&quot;).build(passwd));\n                        break;\n                    } else {\n                        log.info(&quot;No secret key found for message&quot;);\n                        throw new IllegalArgumentException(&quot;No secret key found for message&quot;);\n                    }\n                }\n            }\n\n            if (privateKey == null) {\n                log.info(&quot;No private key found for message&quot;);\n                throw new IllegalArgumentException(&quot;No private key found for message&quot;);\n            }\n            log.info(&quot;Creating decryptor with provider: &quot; + Security.getProvider(&quot;BC&quot;).getName());\n            log.info(&quot;Using private key with ID: &quot; + Long.toHexString(publicKeyEncryptedData.getKeyID()));\n            // create the decryptor and decrypt the message\n            InputStream clearStream = publicKeyEncryptedData.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder()\n                    .setProvider(new BouncyCastleProvider())\n                    .build(privateKey));\n            log.info(&quot;Created decryptor and decrypted message&quot;);\n\n            PGPObjectFactory plainFactory = new PGPObjectFactory(clearStream, new JcaKeyFingerprintCalculator());\n            Object message = plainFactory.nextObject();\n\n            // handle the decrypted message\n            if (message instanceof PGPCompressedData) {\n                PGPCompressedData compressedData = (PGPCompressedData) message;\n                InputStream compressedStream = new BufferedInputStream(compressedData.getDataStream());\n                message = new PGPObjectFactory(compressedStream, new JcaKeyFingerprintCalculator()).nextObject();\n            }\n\n            if (message instanceof PGPLiteralData) {\n                PGPLiteralData literalData = (PGPLiteralData) message;\n                try (InputStream literalStream = literalData.getInputStream()) {\n                    byte[] buffer = new byte[4096];\n                    int bytesRead;\n                    while ((bytesRead = literalStream.read(buffer)) != -1) {\n                        out.write(buffer, 0, bytesRead);\n                    }\n                }\n                log.info(&quot;Decrypted message of type PGPLiteralData&quot;);\n            } else {\n                log.info(&quot;Unknown message type: &quot; + message.getClass().getName());\n                throw new PGPException(&quot;Unknown message type: &quot; + message.getClass().getName());\n            }\n        }\n    }\n</code></pre>\n<p>I am trying to decrypt an encrypted file. I encrypted the file using a pub key provided to me by work and am decrypting by using the sec key and password provided by them as well.</p>\n<p>It seems to be failing when trying to actually decrypt.\nKnowing the pub and sec key are correct, along with the password, I am wondering if I might not be encrypting the file correctly? Could this be a possibility? When I open the encrypted file it looks very encrypted.</p>\n<p>Pho</p>\n"},{"tags":["java","dom-events","vaadin-flow"],"answers":[{"comments":[{"owner":{"account_id":3658297,"reputation":39,"user_id":3048737,"display_name":"Vincent"},"score":0,"creation_date":1682340197,"post_id":76091548,"comment_id":134194664,"body_markdown":"O @Leif, I&#39;m super thankful to you. Your implementation returns the correct currentTime as video plays. However, it repeatedly pauses and plays it so that the playback is not smooth. Though happens fast, the pausing and playing troubles the they eyes. Any idea how it could stop the pausing and playing or at least make unnoticeable? Thank you ahead","body":"O @Leif, I&#39;m super thankful to you. Your implementation returns the correct currentTime as video plays. However, it repeatedly pauses and plays it so that the playback is not smooth. Though happens fast, the pausing and playing troubles the they eyes. Any idea how it could stop the pausing and playing or at least make unnoticeable? Thank you ahead"},{"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"score":0,"creation_date":1682355965,"post_id":76091548,"comment_id":134198747,"body_markdown":"I would guess your network connection is overwhelmed by handling up to 60 requests per second to the server only to update the millsecond part of the timestamp. This prevents it from loading video data quickly enough which in turn causes the video to pause while buffering. What you would need is thus some logic to skip events to send them e.g. only once per second.","body":"I would guess your network connection is overwhelmed by handling up to 60 requests per second to the server only to update the millsecond part of the timestamp. This prevents it from loading video data quickly enough which in turn causes the video to pause while buffering. What you would need is thus some logic to skip events to send them e.g. only once per second."},{"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"score":0,"creation_date":1682356395,"post_id":76091548,"comment_id":134198845,"body_markdown":"I realized that there&#39;s even a bulit-in mechanism for throttling events. I updated the answer accordingly.","body":"I realized that there&#39;s even a bulit-in mechanism for throttling events. I updated the answer accordingly."},{"owner":{"account_id":3658297,"reputation":39,"user_id":3048737,"display_name":"Vincent"},"score":0,"creation_date":1682378142,"post_id":76091548,"comment_id":134202856,"body_markdown":"the mechanism didn&#39;t avail much. It&#39;s not stopping the repeating pause and play. However, many thanks for even investing time to help me move past this bottle neck in my project. I appreciate you greatly.","body":"the mechanism didn&#39;t avail much. It&#39;s not stopping the repeating pause and play. However, many thanks for even investing time to help me move past this bottle neck in my project. I appreciate you greatly."},{"owner":{"account_id":3658297,"reputation":39,"user_id":3048737,"display_name":"Vincent"},"score":1,"creation_date":1682379126,"post_id":76091548,"comment_id":134202947,"body_markdown":"To buttress my attempt,  I even cranked up the throttle to 10k like so:.throttle(10000) and the pause-play thing persisted. For now , I suspect the glitch could be from my controller class where I configured Httpheaders.set(&#39;accept-ranges, &#39;bytes&#39;)...just so the video could allow seek. Anyway, again thank you so far, @Leif","body":"To buttress my attempt,  I even cranked up the throttle to 10k like so:.throttle(10000) and the pause-play thing persisted. For now , I suspect the glitch could be from my controller class where I configured Httpheaders.set(&#39;accept-ranges, &#39;bytes&#39;)...just so the video could allow seek. Anyway, again thank you so far, @Leif"}],"tags":[],"owner":{"account_id":2759852,"reputation":7920,"user_id":2376954,"display_name":"Leif &#197;strand"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682356361,"creation_date":1682336990,"answer_id":76091548,"question_id":76090749,"body_markdown":"First a word of warning: The `timeupdate` event is fired up to 60 times per second. It is not advisable to send updates to the server with that kind of frequency. You would probably have to implement some client-side logic to process the events and then occasionally send an aggregated update to the server.\r\n\r\nFor similar reasons, Flow is not eagerly synchronizing all changes to all DOM properties to the server. Instead, you need to instruct it to use some specific DOM event as a trigger to synchronize some specific property. The most convenient way of doing that is with the `Element::addPropertyChangeListener` overload that also accepts a DOM event name. Furthermore, you can use the return value from `addPropertyChangeListener` to further configure the listener to only send an update to the server if it&#39;s e.g. more than 1000ms since the last time an update was sent.\r\n\r\nIn your case, that could be like this:\r\n```java\r\ngetElement().addPropertyChangeListener(&quot;currentTime&quot;, &quot;timeupdate&quot;,\r\n    event -&gt; System.out.println(event.getValue()))\r\n  .throttle(1000);\r\n```","title":"How to get currentTime with an Event Listener in vaadin app","body":"<p>First a word of warning: The <code>timeupdate</code> event is fired up to 60 times per second. It is not advisable to send updates to the server with that kind of frequency. You would probably have to implement some client-side logic to process the events and then occasionally send an aggregated update to the server.</p>\n<p>For similar reasons, Flow is not eagerly synchronizing all changes to all DOM properties to the server. Instead, you need to instruct it to use some specific DOM event as a trigger to synchronize some specific property. The most convenient way of doing that is with the <code>Element::addPropertyChangeListener</code> overload that also accepts a DOM event name. Furthermore, you can use the return value from <code>addPropertyChangeListener</code> to further configure the listener to only send an update to the server if it's e.g. more than 1000ms since the last time an update was sent.</p>\n<p>In your case, that could be like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>getElement().addPropertyChangeListener(&quot;currentTime&quot;, &quot;timeupdate&quot;,\n    event -&gt; System.out.println(event.getValue()))\n  .throttle(1000);\n</code></pre>\n"}],"owner":{"account_id":3658297,"reputation":39,"user_id":3048737,"display_name":"Vincent"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682356361,"creation_date":1682330807,"question_id":76090749,"body_markdown":"Vaadin doesn&#39;t have any out-of-the-box video component. So I created a custom class to serve as video component. Everything works well except that timeupdate event returns null as currentTime as the video plays.\r\n\r\n    @tag(&#39;video&#39;)\r\n    public class Video extends component implements clickNotifier{\r\n    public Video(){\r\n    getElement().addEventListener(&#39;timeupdate&#39;, event -&gt; {     System.out.println(this.getProperty(&#39;currentTime&#39;));\r\n    });\r\n\r\n    }\r\n    }","title":"How to get currentTime with an Event Listener in vaadin app","body":"<p>Vaadin doesn't have any out-of-the-box video component. So I created a custom class to serve as video component. Everything works well except that timeupdate event returns null as currentTime as the video plays.</p>\n<pre><code>@tag('video')\npublic class Video extends component implements clickNotifier{\npublic Video(){\ngetElement().addEventListener('timeupdate', event -&gt; {     System.out.println(this.getProperty('currentTime'));\n});\n\n}\n}\n</code></pre>\n"},{"tags":["java","algorithm","data-structures"],"answers":[{"comments":[{"owner":{"account_id":26494474,"reputation":23,"user_id":20132436,"display_name":"Joshrem"},"score":0,"creation_date":1682356862,"post_id":76094420,"comment_id":134198982,"body_markdown":"Thanks a lot! I&#39;ve been checking all through the main method and didn&#39;t look at this trivial function I wrote at first.","body":"Thanks a lot! I&#39;ve been checking all through the main method and didn&#39;t look at this trivial function I wrote at first."},{"owner":{"account_id":8497550,"reputation":79,"user_id":6371684,"accept_rate":0,"display_name":"Waqas Baig"},"score":0,"creation_date":1691951876,"post_id":76094420,"comment_id":135557025,"body_markdown":"When I input as under sequence it&#39;s given me OutOfMemoryError: Java heap space:\n0 1 3\n2 4 8\n7 8 6\n\nLine# 20 and 102.","body":"When I input as under sequence it&#39;s given me OutOfMemoryError: Java heap space: 0 1 3 2 4 8 7 8 6  Line# 20 and 102."}],"tags":[],"owner":{"account_id":19316522,"reputation":608,"user_id":14121186,"display_name":"Caleb Keller"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682356359,"creation_date":1682356359,"answer_id":76094420,"question_id":76094246,"body_markdown":"You were really close! You accidentally mixed up `x` and `y` in your `Manhattan()` function. No matter what board state you passed into it, it would return a non-zero distance, so your code would keep searching forever until it used up all the memory and crashed.\r\n\r\nAfter switching those around, I ran it and got your expected result:\r\n\r\n```\r\n0 1 3 \r\n4 2 5 \r\n7 8 6 \r\n\r\n1 0 3 \r\n4 2 5 \r\n7 8 6 \r\n\r\n1 2 3 \r\n4 0 5 \r\n7 8 6 \r\n\r\n1 2 3 \r\n4 5 0 \r\n7 8 6 \r\n\r\n1 2 3 \r\n4 5 6 \r\n7 8 0 \r\n\r\n```\r\n\r\nHere&#39;s the change:\r\n\r\n```java\r\n    static int Manhattan(int[][] arr) {\r\n        int ans = 0;\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (arr[i][j] == 0) continue;\r\n                int y = (arr[i][j] - 1) % 3; // Was x\r\n                int x = (arr[i][j] - 1) / 3; // Was y\r\n                ans += Math.abs(x - i) + Math.abs(y - j);\r\n            }\r\n        }\r\n        return ans;\r\n    }\r\n```\r\n\r\nAs a rule of thumb for the future, if your algorithm is causing an OutOfMemory error, the exit condition has probably been set up incorrectly. Computers have a lot of memory, so you have to search through a *considerable* number of states for that to be an issue. It&#39;s definitely possible, especially for really difficult problems, but that&#39;s always the first place I look.","title":"solve 8-puzzle problem using A* algorithm in java","body":"<p>You were really close! You accidentally mixed up <code>x</code> and <code>y</code> in your <code>Manhattan()</code> function. No matter what board state you passed into it, it would return a non-zero distance, so your code would keep searching forever until it used up all the memory and crashed.</p>\n<p>After switching those around, I ran it and got your expected result:</p>\n<pre><code>0 1 3 \n4 2 5 \n7 8 6 \n\n1 0 3 \n4 2 5 \n7 8 6 \n\n1 2 3 \n4 0 5 \n7 8 6 \n\n1 2 3 \n4 5 0 \n7 8 6 \n\n1 2 3 \n4 5 6 \n7 8 0 \n\n</code></pre>\n<p>Here's the change:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static int Manhattan(int[][] arr) {\n        int ans = 0;\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) continue;\n                int y = (arr[i][j] - 1) % 3; // Was x\n                int x = (arr[i][j] - 1) / 3; // Was y\n                ans += Math.abs(x - i) + Math.abs(y - j);\n            }\n        }\n        return ans;\n    }\n</code></pre>\n<p>As a rule of thumb for the future, if your algorithm is causing an OutOfMemory error, the exit condition has probably been set up incorrectly. Computers have a lot of memory, so you have to search through a <em>considerable</em> number of states for that to be an issue. It's definitely possible, especially for really difficult problems, but that's always the first place I look.</p>\n"}],"owner":{"account_id":26494474,"reputation":23,"user_id":20132436,"display_name":"Joshrem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":518,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76094420,"answer_count":1,"score":2,"last_activity_date":1682356359,"creation_date":1682354993,"question_id":76094246,"body_markdown":"I&#39;m working on problem using the A* algorithm to solve a 8-puzzle problem in Java. The problem asks for the optimal solution for the following transmission:\r\n\r\n```\r\n0 1 3\r\n4 2 5\r\n7 8 6\r\n---------&gt;\r\n1 2 3\r\n4 5 6\r\n7 8 0\r\n```\r\n\r\nby virtue of moving one number to the place of &#39;0&#39; in one time.\r\n\r\nI basically want to imitate the solution in this tutorial: https://www.javatpoint.com/8-puzzle-problems-in-java\r\n\r\nBut my code do not work properly:\r\n\r\n```java\r\nimport java.util.*;\r\n\r\npublic class Puzzle8 {\r\n    static class State {\r\n        int[][] board;\r\n        int x;\r\n        int y;\r\n        int cost;\r\n        int depth;\r\n        State parent;\r\n\r\n        State(int[][] board, int x, int y, int cost, int depth, State parent) {\r\n            this.board = new int[3][3];\r\n            for (int i = 0; i &lt; 3; i++) {\r\n                for (int j = 0; j &lt; 3; j++) {\r\n                    this.board[i][j] = board[i][j];\r\n                }\r\n            }\r\n            this.x = x;\r\n            this.y = y;\r\n            this.cost = cost;\r\n            this.depth = depth;\r\n            this.parent = parent;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o) return true;\r\n            if (o == null || getClass() != o.getClass()) return false;\r\n            State state = (State) o;\r\n            return Arrays.deepEquals(board, state.board);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return Arrays.deepHashCode(board);\r\n        }\r\n    }\r\n\r\n    static int[] dx = {-1, 1, 0, 0};\r\n    static int[] dy = {0, 0, -1, 1};\r\n\r\n    public static void main(String[] args) {\r\n        int[][] board = new int[3][3];\r\n        Scanner sc = new Scanner(System.in);\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                board[i][j] = sc.nextInt();\r\n            }\r\n        }\r\n        PriorityQueue&lt;State&gt; pq = new PriorityQueue&lt;&gt;(new Comparator&lt;State&gt;() {\r\n            @Override\r\n            public int compare(State o1, State o2) {\r\n                return o1.cost - o2.cost;\r\n            }\r\n        });\r\n        int[] pos = new int[2];\r\n        find_zero(board, pos);\r\n        State initialState = new State(board, pos[0], pos[1], Manhattan(board), 0, null);\r\n        pq.add(initialState);\r\n\r\n        State goalState = null;\r\n\r\n        while (!pq.isEmpty()) {\r\n            State cur = pq.poll();\r\n            board = cur.board;\r\n\r\n            if (Manhattan(board) == 0) {\r\n                goalState = cur;\r\n                break;\r\n            }\r\n\r\n            find_zero(board, pos);\r\n            int x = pos[0];\r\n            int y = pos[1];\r\n            for (int k = 0; k &lt; 4; k++) {\r\n                int nx = x + dx[k];\r\n                int ny = y + dy[k];\r\n                if (nx &gt;= 0 &amp;&amp; nx &lt; 3 &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; 3) {\r\n                    int[][] new_board = new int[3][3];\r\n                    for (int i = 0; i &lt; 3; i++) {\r\n                        for (int j = 0; j &lt; 3; j++) {\r\n                            new_board[i][j] = board[i][j];\r\n                        }\r\n                    }\r\n                    new_board[x][y] = new_board[nx][ny];\r\n                    new_board[nx][ny] = 0;\r\n                    var newState = new State(new_board, nx, ny, Manhattan(new_board) + cur.depth + 1, cur.depth + 1, cur);\r\n                    pq.add(newState);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (goalState != null) {\r\n            Stack&lt;State&gt; path = new Stack&lt;&gt;();\r\n            State currentState = goalState;\r\n            while (currentState != null) {\r\n                path.push(currentState);\r\n                currentState = currentState.parent;\r\n            }\r\n\r\n            while (!path.isEmpty()) {\r\n                State state = path.pop();\r\n                printArr(state.board);\r\n            }\r\n        } else {\r\n            System.out.println(&quot;No solution found.&quot;);\r\n        }\r\n    }\r\n\r\n    static void printArr(int[][] arr) {\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                System.out.print(arr[i][j] + &quot; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\n    static void find_zero(int[][] arr, int[] pos) {\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (arr[i][j] == 0) {\r\n                    pos[0] = i;\r\n                    pos[1] = j;\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static int Manhattan(int[][] arr) {\r\n        int ans = 0;\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            for (int j = 0; j &lt; 3; j++) {\r\n                if (arr[i][j] == 0) continue;\r\n                int x = (arr[i][j] - 1) % 3;\r\n                int y = (arr[i][j] - 1) / 3;\r\n                ans += Math.abs(x - i) + Math.abs(y - j);\r\n            }\r\n        }\r\n        return ans;\r\n    }\r\n}\r\n```\r\n\r\nIn my code, the class &#39;state&#39; should store the current board, current position of &#39;0&#39; element (I think this is not necessary now, maybe I&#39;ll impove it later), the cost (in my implementation I deem the cost = Manhattan distance of all blocks to the right position + steps have been taken, the number of steps taken is stored in depth) and the parent in order to trace back the solution to print.\r\n\r\n\r\n\r\n\r\n```\r\ninput:\r\n0 1 3\r\n4 2 5\r\n7 8 6\r\nexpected output:\r\n4\r\n\r\n0 1 3\r\n4 2 5 \r\n7 8 6\r\n\r\n1 0 3 \r\n4 2 5 \r\n7 8 6\r\n\r\n1 2 3 \r\n4 0 5 \r\n7 8 6\r\n\r\n1 2 3 \r\n4 5 0 \r\n7 8 6\r\n\r\n1 2 3 \r\n4 5 6\r\n7 8 0\r\n```\r\n\r\nMy code encounter the exception of &quot;Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at Puzzle8.main(Puzzle8.java:80)&quot;.\r\n\r\nI&#39;m new to data structures and algorithms. Could you please provide some suggestions for debugging or tell me where did I do wrong?","title":"solve 8-puzzle problem using A* algorithm in java","body":"<p>I'm working on problem using the A* algorithm to solve a 8-puzzle problem in Java. The problem asks for the optimal solution for the following transmission:</p>\n<pre><code>0 1 3\n4 2 5\n7 8 6\n---------&gt;\n1 2 3\n4 5 6\n7 8 0\n</code></pre>\n<p>by virtue of moving one number to the place of '0' in one time.</p>\n<p>I basically want to imitate the solution in this tutorial: <a href=\"https://www.javatpoint.com/8-puzzle-problems-in-java\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/8-puzzle-problems-in-java</a></p>\n<p>But my code do not work properly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Puzzle8 {\n    static class State {\n        int[][] board;\n        int x;\n        int y;\n        int cost;\n        int depth;\n        State parent;\n\n        State(int[][] board, int x, int y, int cost, int depth, State parent) {\n            this.board = new int[3][3];\n            for (int i = 0; i &lt; 3; i++) {\n                for (int j = 0; j &lt; 3; j++) {\n                    this.board[i][j] = board[i][j];\n                }\n            }\n            this.x = x;\n            this.y = y;\n            this.cost = cost;\n            this.depth = depth;\n            this.parent = parent;\n        }\n\n        @Override\n        public boolean equals(Object o) {\n            if (this == o) return true;\n            if (o == null || getClass() != o.getClass()) return false;\n            State state = (State) o;\n            return Arrays.deepEquals(board, state.board);\n        }\n\n        @Override\n        public int hashCode() {\n            return Arrays.deepHashCode(board);\n        }\n    }\n\n    static int[] dx = {-1, 1, 0, 0};\n    static int[] dy = {0, 0, -1, 1};\n\n    public static void main(String[] args) {\n        int[][] board = new int[3][3];\n        Scanner sc = new Scanner(System.in);\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                board[i][j] = sc.nextInt();\n            }\n        }\n        PriorityQueue&lt;State&gt; pq = new PriorityQueue&lt;&gt;(new Comparator&lt;State&gt;() {\n            @Override\n            public int compare(State o1, State o2) {\n                return o1.cost - o2.cost;\n            }\n        });\n        int[] pos = new int[2];\n        find_zero(board, pos);\n        State initialState = new State(board, pos[0], pos[1], Manhattan(board), 0, null);\n        pq.add(initialState);\n\n        State goalState = null;\n\n        while (!pq.isEmpty()) {\n            State cur = pq.poll();\n            board = cur.board;\n\n            if (Manhattan(board) == 0) {\n                goalState = cur;\n                break;\n            }\n\n            find_zero(board, pos);\n            int x = pos[0];\n            int y = pos[1];\n            for (int k = 0; k &lt; 4; k++) {\n                int nx = x + dx[k];\n                int ny = y + dy[k];\n                if (nx &gt;= 0 &amp;&amp; nx &lt; 3 &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; 3) {\n                    int[][] new_board = new int[3][3];\n                    for (int i = 0; i &lt; 3; i++) {\n                        for (int j = 0; j &lt; 3; j++) {\n                            new_board[i][j] = board[i][j];\n                        }\n                    }\n                    new_board[x][y] = new_board[nx][ny];\n                    new_board[nx][ny] = 0;\n                    var newState = new State(new_board, nx, ny, Manhattan(new_board) + cur.depth + 1, cur.depth + 1, cur);\n                    pq.add(newState);\n                }\n            }\n        }\n\n        if (goalState != null) {\n            Stack&lt;State&gt; path = new Stack&lt;&gt;();\n            State currentState = goalState;\n            while (currentState != null) {\n                path.push(currentState);\n                currentState = currentState.parent;\n            }\n\n            while (!path.isEmpty()) {\n                State state = path.pop();\n                printArr(state.board);\n            }\n        } else {\n            System.out.println(&quot;No solution found.&quot;);\n        }\n    }\n\n    static void printArr(int[][] arr) {\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                System.out.print(arr[i][j] + &quot; &quot;);\n            }\n            System.out.println();\n        }\n        System.out.println();\n    }\n\n    static void find_zero(int[][] arr, int[] pos) {\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) {\n                    pos[0] = i;\n                    pos[1] = j;\n                    return;\n                }\n            }\n        }\n    }\n\n    static int Manhattan(int[][] arr) {\n        int ans = 0;\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) continue;\n                int x = (arr[i][j] - 1) % 3;\n                int y = (arr[i][j] - 1) / 3;\n                ans += Math.abs(x - i) + Math.abs(y - j);\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>\n<p>In my code, the class 'state' should store the current board, current position of '0' element (I think this is not necessary now, maybe I'll impove it later), the cost (in my implementation I deem the cost = Manhattan distance of all blocks to the right position + steps have been taken, the number of steps taken is stored in depth) and the parent in order to trace back the solution to print.</p>\n<pre><code>input:\n0 1 3\n4 2 5\n7 8 6\nexpected output:\n4\n\n0 1 3\n4 2 5 \n7 8 6\n\n1 0 3 \n4 2 5 \n7 8 6\n\n1 2 3 \n4 0 5 \n7 8 6\n\n1 2 3 \n4 5 0 \n7 8 6\n\n1 2 3 \n4 5 6\n7 8 0\n</code></pre>\n<p>My code encounter the exception of &quot;Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at Puzzle8.main(Puzzle8.java:80)&quot;.</p>\n<p>I'm new to data structures and algorithms. Could you please provide some suggestions for debugging or tell me where did I do wrong?</p>\n"},{"tags":["java","javafx"],"answers":[{"tags":[],"owner":{"account_id":4882335,"reputation":659,"user_id":10489834,"display_name":"Stefan Pfeifer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682356293,"creation_date":1682356293,"answer_id":76094412,"question_id":76046918,"body_markdown":"My best solution so far is to extend the `TreeItem` class and keep a separate, sorted list of children that is then mirrored to the actual list of children.\r\nIt is based on this Stackoverflow answer for filterable tree items: https://stackoverflow.com/a/34426897.\r\n\r\n\r\n\r\n\r\n```\r\npublic class SortedTreeItem&lt;T&gt; extends TreeItem&lt;T&gt; {\r\n    private final ObservableList&lt;TreeItem&lt;T&gt;&gt; sourceChildren;\r\n    private final SortedList&lt;TreeItem&lt;T&gt;&gt; sortedChildren;\r\n\r\n    public SortedTreeItem(T value, Callback&lt;T, Observable[]&gt; extractor) {\r\n        super(value, null);\r\n\r\n        // Initialize source list with given extractor\r\n        sourceChildren = FXCollections.observableArrayList(item -&gt; extractor.call(item.getValue()));\r\n\r\n        // Create sorted list of children backed by the source list\r\n        sortedChildren = new SortedList&lt;&gt;(sourceChildren);\r\n\r\n        // Keep actual children list in sync with the sorted children\r\n        // We can&#39;t just override getChildren() because of https://bugs.openjdk.org/browse/JDK-8089158\r\n        Bindings.bindContent(getChildren(), sortedChildren);\r\n    }\r\n\r\n    // Comparator by which the child items are sorted\r\n    public ObjectProperty&lt;Comparator&lt;? super TreeItem&lt;T&gt;&gt;&gt; comparatorProperty() {\r\n        return sortedChildren.comparatorProperty();\r\n    }\r\n\r\n    // For accessing and modifying the source list\r\n    public ObservableList&lt;TreeItem&lt;T&gt;&gt; getSourceChildren() {\r\n        return sourceChildren;\r\n    }\r\n}\r\n```\r\n\r\nOne drawback is that the items must only be modified by using `getSourceChildren()`.\r\nTo enable sorting, the item&#39;s comparators are bound to that of the TreeTableView like this\r\n\r\n```\r\nSortedTreeItem&lt;Entry&gt; item = new SortedTreeItem&lt;&gt;(entry, Entry::extractor);\r\nitem.comparatorProperty().bind(treeTableView.comparatorProperty());\r\n```\r\n\r\nAlso, the default sorting (which would interfere with this solution) is disabled by giving the table an empty sort policy\r\n\r\n```\r\ntreeTableView.setSortPolicy(table -&gt; true);\r\n```","title":"Keep JavaFX TreeTableView sorted when Items change","body":"<p>My best solution so far is to extend the <code>TreeItem</code> class and keep a separate, sorted list of children that is then mirrored to the actual list of children.\nIt is based on this Stackoverflow answer for filterable tree items: <a href=\"https://stackoverflow.com/a/34426897\">https://stackoverflow.com/a/34426897</a>.</p>\n<pre><code>public class SortedTreeItem&lt;T&gt; extends TreeItem&lt;T&gt; {\n    private final ObservableList&lt;TreeItem&lt;T&gt;&gt; sourceChildren;\n    private final SortedList&lt;TreeItem&lt;T&gt;&gt; sortedChildren;\n\n    public SortedTreeItem(T value, Callback&lt;T, Observable[]&gt; extractor) {\n        super(value, null);\n\n        // Initialize source list with given extractor\n        sourceChildren = FXCollections.observableArrayList(item -&gt; extractor.call(item.getValue()));\n\n        // Create sorted list of children backed by the source list\n        sortedChildren = new SortedList&lt;&gt;(sourceChildren);\n\n        // Keep actual children list in sync with the sorted children\n        // We can't just override getChildren() because of https://bugs.openjdk.org/browse/JDK-8089158\n        Bindings.bindContent(getChildren(), sortedChildren);\n    }\n\n    // Comparator by which the child items are sorted\n    public ObjectProperty&lt;Comparator&lt;? super TreeItem&lt;T&gt;&gt;&gt; comparatorProperty() {\n        return sortedChildren.comparatorProperty();\n    }\n\n    // For accessing and modifying the source list\n    public ObservableList&lt;TreeItem&lt;T&gt;&gt; getSourceChildren() {\n        return sourceChildren;\n    }\n}\n</code></pre>\n<p>One drawback is that the items must only be modified by using <code>getSourceChildren()</code>.\nTo enable sorting, the item's comparators are bound to that of the TreeTableView like this</p>\n<pre><code>SortedTreeItem&lt;Entry&gt; item = new SortedTreeItem&lt;&gt;(entry, Entry::extractor);\nitem.comparatorProperty().bind(treeTableView.comparatorProperty());\n</code></pre>\n<p>Also, the default sorting (which would interfere with this solution) is disabled by giving the table an empty sort policy</p>\n<pre><code>treeTableView.setSortPolicy(table -&gt; true);\n</code></pre>\n"}],"owner":{"account_id":4882335,"reputation":659,"user_id":10489834,"display_name":"Stefan Pfeifer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682356293,"creation_date":1681834839,"question_id":76046918,"body_markdown":"I have a JavaFX application with a `TreeTableView` that shows a tree of items that can change in two ways:\r\n\r\n1. Items may be added or removed in the background\r\n2. The data of the items (shown in the table columns) may change\r\n\r\nThe TreeTableView, like the TableView, can be sorted either by users clickinig on the column headers or by setting the sort order in the code. This sorting however does not seem to persist when new items are added or when the data changes.\r\n\r\nHere is a simple example (tested with OpenJFX 20) that shows my problem. A table is created and also a button for adding random tree elements. Even though the table is supposed to be sorted by the first column, new items always show up on the last row instead of being inserted at their correct location. Only manually re-sorting restores the correct order.\r\n\r\n```\r\nimport javafx.application.Application;\r\nimport javafx.beans.property.ReadOnlyStringProperty;\r\nimport javafx.beans.property.ReadOnlyStringWrapper;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.*;\r\nimport javafx.scene.layout.VBox;\r\nimport javafx.stage.Stage;\r\n\r\nimport java.util.Random;\r\n\r\npublic class TestApplication extends Application {\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        TreeTableColumn&lt;Entry, String&gt; columnFirst = new TreeTableColumn&lt;&gt;(&quot;First&quot;);\r\n        columnFirst.setCellValueFactory(p -&gt; p.getValue().getValue().firstProperty());\r\n\r\n        TreeTableColumn&lt;Entry, String&gt; columnSecond = new TreeTableColumn&lt;&gt;(&quot;Second&quot;);\r\n        columnSecond.setCellValueFactory(p -&gt; p.getValue().getValue().secondProperty());\r\n\r\n        TreeTableView&lt;Entry&gt; treeTableView = new TreeTableView&lt;&gt;();\r\n        treeTableView.getColumns().add(columnFirst);\r\n        treeTableView.getColumns().add(columnSecond);\r\n\r\n        Button button = new Button(&quot;Add Entry&quot;);\r\n        button.setOnAction(event -&gt; {\r\n            Random random = new Random();\r\n            String first = String.valueOf((char)(random.nextInt(&#39;Z&#39; - &#39;A&#39;) + &#39;A&#39;));\r\n            String second = String.valueOf((char)(random.nextInt(&#39;Z&#39; - &#39;A&#39;) + &#39;A&#39;));\r\n            Entry entry = new Entry(first, second);\r\n\r\n            if(treeTableView.getRoot() == null) {\r\n                treeTableView.setRoot(new TreeItem&lt;&gt;(entry));\r\n                treeTableView.getRoot().setExpanded(true);\r\n                treeTableView.getSortOrder().add(columnFirst);\r\n            }\r\n            else {\r\n                treeTableView.getRoot().getChildren().add(new TreeItem&lt;&gt;(entry));\r\n            }\r\n        });\r\n\r\n        VBox vbox = new VBox();\r\n        vbox.getChildren().add(treeTableView);\r\n        vbox.getChildren().add(button);\r\n\r\n        Scene scene = new Scene(vbox);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.setTitle(&quot;TreeTableView Sorting&quot;);\r\n        primaryStage.show();\r\n    }\r\n\r\n    public static class Entry {\r\n        private final String first;\r\n        private final String second;\r\n\r\n        public Entry(String first, String second) {\r\n            this.first = first;\r\n            this.second = second;\r\n        }\r\n\r\n        public ReadOnlyStringProperty firstProperty() {\r\n            return new ReadOnlyStringWrapper(first);\r\n        }\r\n\r\n        public ReadOnlyStringProperty secondProperty() {\r\n            return new ReadOnlyStringWrapper(second);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nFor JavaFX&#39;s TableView I could achieve a persistent sorting by using a `SortedList&lt;T&gt;` and binding its comparator to that of the TableView (as suggested in the [documentation](https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html)).\r\nTogether with setting an [extractor](https://openjfx.io/javadoc/18/javafx.base/javafx/collections/FXCollections.html#observableArrayList(javafx.util.Callback)) to observe changes to the list items themselves this basically solves the problem for the TableView. It just stays sorted in the user-specified way no matter how the data changes.\r\n\r\nBut I failed to find anything similar for the TreeTableView. The items have an internal observable list that can be accessed with `getChildren()` but there don&#39;t seem to be any customization points here.\r\n\r\nIs there an obvious solution to this that I overlooked? Ideally I would like to avoid calling `sort()` after each change to the backing data.","title":"Keep JavaFX TreeTableView sorted when Items change","body":"<p>I have a JavaFX application with a <code>TreeTableView</code> that shows a tree of items that can change in two ways:</p>\n<ol>\n<li>Items may be added or removed in the background</li>\n<li>The data of the items (shown in the table columns) may change</li>\n</ol>\n<p>The TreeTableView, like the TableView, can be sorted either by users clickinig on the column headers or by setting the sort order in the code. This sorting however does not seem to persist when new items are added or when the data changes.</p>\n<p>Here is a simple example (tested with OpenJFX 20) that shows my problem. A table is created and also a button for adding random tree elements. Even though the table is supposed to be sorted by the first column, new items always show up on the last row instead of being inserted at their correct location. Only manually re-sorting restores the correct order.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.ReadOnlyStringProperty;\nimport javafx.beans.property.ReadOnlyStringWrapper;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\nimport java.util.Random;\n\npublic class TestApplication extends Application {\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        TreeTableColumn&lt;Entry, String&gt; columnFirst = new TreeTableColumn&lt;&gt;(&quot;First&quot;);\n        columnFirst.setCellValueFactory(p -&gt; p.getValue().getValue().firstProperty());\n\n        TreeTableColumn&lt;Entry, String&gt; columnSecond = new TreeTableColumn&lt;&gt;(&quot;Second&quot;);\n        columnSecond.setCellValueFactory(p -&gt; p.getValue().getValue().secondProperty());\n\n        TreeTableView&lt;Entry&gt; treeTableView = new TreeTableView&lt;&gt;();\n        treeTableView.getColumns().add(columnFirst);\n        treeTableView.getColumns().add(columnSecond);\n\n        Button button = new Button(&quot;Add Entry&quot;);\n        button.setOnAction(event -&gt; {\n            Random random = new Random();\n            String first = String.valueOf((char)(random.nextInt('Z' - 'A') + 'A'));\n            String second = String.valueOf((char)(random.nextInt('Z' - 'A') + 'A'));\n            Entry entry = new Entry(first, second);\n\n            if(treeTableView.getRoot() == null) {\n                treeTableView.setRoot(new TreeItem&lt;&gt;(entry));\n                treeTableView.getRoot().setExpanded(true);\n                treeTableView.getSortOrder().add(columnFirst);\n            }\n            else {\n                treeTableView.getRoot().getChildren().add(new TreeItem&lt;&gt;(entry));\n            }\n        });\n\n        VBox vbox = new VBox();\n        vbox.getChildren().add(treeTableView);\n        vbox.getChildren().add(button);\n\n        Scene scene = new Scene(vbox);\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;TreeTableView Sorting&quot;);\n        primaryStage.show();\n    }\n\n    public static class Entry {\n        private final String first;\n        private final String second;\n\n        public Entry(String first, String second) {\n            this.first = first;\n            this.second = second;\n        }\n\n        public ReadOnlyStringProperty firstProperty() {\n            return new ReadOnlyStringWrapper(first);\n        }\n\n        public ReadOnlyStringProperty secondProperty() {\n            return new ReadOnlyStringWrapper(second);\n        }\n    }\n}\n</code></pre>\n<p>For JavaFX's TableView I could achieve a persistent sorting by using a <code>SortedList&lt;T&gt;</code> and binding its comparator to that of the TableView (as suggested in the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\">documentation</a>).\nTogether with setting an <a href=\"https://openjfx.io/javadoc/18/javafx.base/javafx/collections/FXCollections.html#observableArrayList(javafx.util.Callback)\" rel=\"nofollow noreferrer\">extractor</a> to observe changes to the list items themselves this basically solves the problem for the TableView. It just stays sorted in the user-specified way no matter how the data changes.</p>\n<p>But I failed to find anything similar for the TreeTableView. The items have an internal observable list that can be accessed with <code>getChildren()</code> but there don't seem to be any customization points here.</p>\n<p>Is there an obvious solution to this that I overlooked? Ideally I would like to avoid calling <code>sort()</code> after each change to the backing data.</p>\n"},{"tags":["java","ibm-mq","tls1.2"],"comments":[{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":0,"creation_date":1562334134,"post_id":55233923,"comment_id":100353127,"body_markdown":"Did one id the answers help you solve your problem?   If it did please accept it.","body":"Did one id the answers help you solve your problem?   If it did please accept it."}],"answers":[{"tags":[],"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553091874,"creation_date":1553091874,"answer_id":55263101,"question_id":55233923,"body_markdown":"I don&#39;t think you can, but you can use `key tool` to create a `.jks` keystone and import the server certificate or truststore certificate. \r\n\r\n````\r\nkeytool -keystore clientkey.jks -storetype jks -importcert -file servercert.pem -alias server-cert\r\n````\r\n\r\nLook in the TLS section in https://github.com/ibm-messaging/mq-dev-patterns","title":"KDB to JKS keystore conversion","body":"<p>I don't think you can, but you can use <code>key tool</code> to create a <code>.jks</code> keystone and import the server certificate or truststore certificate. </p>\n\n<pre><code>keytool -keystore clientkey.jks -storetype jks -importcert -file servercert.pem -alias server-cert\n</code></pre>\n\n<p>Look in the TLS section in <a href=\"https://github.com/ibm-messaging/mq-dev-patterns\" rel=\"nofollow noreferrer\">https://github.com/ibm-messaging/mq-dev-patterns</a></p>\n"},{"comments":[{"owner":{"account_id":2471649,"reputation":924,"user_id":2153350,"accept_rate":50,"display_name":"Alexander Gonchiy"},"score":1,"creation_date":1673883526,"post_id":55311445,"comment_id":132591007,"body_markdown":"Thank you, this is an extremely helpful and detailed answer.","body":"Thank you, this is an extremely helpful and detailed answer."}],"tags":[],"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1553325810,"creation_date":1553324674,"answer_id":55311445,"question_id":55233923,"body_markdown":"You do not mention which version of the MQ client you are using, for the purpose of this answer I will assume you are using a MQ client 7.1 or later.\r\n\r\n---\r\n\r\nYou can build a Java Key Store (jks) from a source kdb file.\r\n\r\nThis will take two steps to complete:\r\n\r\n1. Create an empty Java Key Store (jks):\r\n\r\n    `runmqckm -keydb -create -db target.jks -type jks`  \r\nThis will prompt for a password that will be used to protect the jks file.\r\n\r\n\r\n2. Import all certs from the source kdb file to the target jks file created above:\r\n\r\n    `runmqckm -cert -import -db source.kdb -type cms -target target.jks -target_type jks`  \r\nThis will prompt for two passwords, the first is the password of the kdb file, the second is the password of the jks file.  If you add the flag &#39;-stashed&#39; it will eliminate the first password prompt.\r\n\r\n3. You can then list the certs contained in both the kdb and the jks to compare and validate that all certs were copied over:\r\n\r\n   `runmqckm -cert -list -db source.kdb -type cms -stashed`  \r\nThe command above will NOT prompt for a password because of the `-stashed` flag.  \r\n\r\n   `runmqckm -cert -list -db target.jks -type jks`  \r\nThe command above WILL prompt for the jks password.\r\n\r\n---\r\n\r\nNotes\r\n--\r\n\r\n1. The kdb/rdb/sth files together represent an IBM Certificate Management Services (CMS) keystore.\r\n2. There is a `-keydb -convert` option that indicates it should have the same outcome as the two steps I provided above, however I have noted that it does not always copy all of the certs.","title":"KDB to JKS keystore conversion","body":"<p>You do not mention which version of the MQ client you are using, for the purpose of this answer I will assume you are using a MQ client 7.1 or later.</p>\n\n<hr>\n\n<p>You can build a Java Key Store (jks) from a source kdb file.</p>\n\n<p>This will take two steps to complete:</p>\n\n<ol>\n<li><p>Create an empty Java Key Store (jks):</p>\n\n<p><code>runmqckm -keydb -create -db target.jks -type jks</code><br>\nThis will prompt for a password that will be used to protect the jks file.</p></li>\n<li><p>Import all certs from the source kdb file to the target jks file created above:</p>\n\n<p><code>runmqckm -cert -import -db source.kdb -type cms -target target.jks -target_type jks</code><br>\nThis will prompt for two passwords, the first is the password of the kdb file, the second is the password of the jks file.  If you add the flag '-stashed' it will eliminate the first password prompt.</p></li>\n<li><p>You can then list the certs contained in both the kdb and the jks to compare and validate that all certs were copied over:</p>\n\n<p><code>runmqckm -cert -list -db source.kdb -type cms -stashed</code><br>\nThe command above will NOT prompt for a password because of the <code>-stashed</code> flag.  </p>\n\n<p><code>runmqckm -cert -list -db target.jks -type jks</code><br>\nThe command above WILL prompt for the jks password.</p></li>\n</ol>\n\n<hr>\n\n<h2>Notes</h2>\n\n<ol>\n<li>The kdb/rdb/sth files together represent an IBM Certificate Management Services (CMS) keystore.</li>\n<li>There is a <code>-keydb -convert</code> option that indicates it should have the same outcome as the two steps I provided above, however I have noted that it does not always copy all of the certs.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":9804285,"reputation":10345,"user_id":7264620,"display_name":"JoshMc"},"score":0,"creation_date":1682393658,"post_id":76094363,"comment_id":134204252,"body_markdown":"See my answer, you can do the same direct to a jks with two commands, no loop required, using the runmqckm command that is supplied with IBM MQ.","body":"See my answer, you can do the same direct to a jks with two commands, no loop required, using the runmqckm command that is supplied with IBM MQ."}],"tags":[],"owner":{"account_id":3816501,"reputation":129,"user_id":3165751,"display_name":"aver"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682355885,"creation_date":1682355885,"answer_id":76094363,"question_id":55233923,"body_markdown":"Java supports JKS and PKCS12 key store types. It also distinguishes between keyStore (which contains client certificates) and trustStore (which contains trusted certificates). Both keyStore and trustStore are needed.\r\n\r\nClient certificates (keyStore) can be exported from .kdb directly by gsk8capicmd_64 command:\r\n\r\n    gsk8capicmd_64 -cert -export -db file.kdb -pw your_password -target file.p12 -target_pw your_password\r\n\r\nTrustStore .jks can be created by exporting trusted certificates from .kdb and inserting them to new .jks:\r\n\r\n    for CERT_LABEL in $(gsk8capicmd_64 -cert -list -db file.kdb -pw your_password | grep ^! | cut -f2);\r\n    do\r\n        gsk8capicmd_64 -cert -extract -db file.kdb -pw your_password -label ${CERT_LABEL} -target temp.cert;\r\n        yes | keytool -importcert -alias ${CERT_LABEL} -file temp.cert -keystore file.jks -storepass your_password;\r\n    done;\r\n\r\nKeyStore and trustStore can be then configured on command line or directly in the code this way:\r\n\r\n    System.setProperty(&quot;javax.net.ssl.keyStore&quot;, &quot;file.p12&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;your_password&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.keyStoreType&quot;, &quot;pkcs12&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;file.jks&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;your_password&quot;);\r\n    System.setProperty(&quot;javax.net.ssl.trustStoreType&quot;, &quot;jks&quot;);","title":"KDB to JKS keystore conversion","body":"<p>Java supports JKS and PKCS12 key store types. It also distinguishes between keyStore (which contains client certificates) and trustStore (which contains trusted certificates). Both keyStore and trustStore are needed.</p>\n<p>Client certificates (keyStore) can be exported from .kdb directly by gsk8capicmd_64 command:</p>\n<pre><code>gsk8capicmd_64 -cert -export -db file.kdb -pw your_password -target file.p12 -target_pw your_password\n</code></pre>\n<p>TrustStore .jks can be created by exporting trusted certificates from .kdb and inserting them to new .jks:</p>\n<pre><code>for CERT_LABEL in $(gsk8capicmd_64 -cert -list -db file.kdb -pw your_password | grep ^! | cut -f2);\ndo\n    gsk8capicmd_64 -cert -extract -db file.kdb -pw your_password -label ${CERT_LABEL} -target temp.cert;\n    yes | keytool -importcert -alias ${CERT_LABEL} -file temp.cert -keystore file.jks -storepass your_password;\ndone;\n</code></pre>\n<p>KeyStore and trustStore can be then configured on command line or directly in the code this way:</p>\n<pre><code>System.setProperty(&quot;javax.net.ssl.keyStore&quot;, &quot;file.p12&quot;);\nSystem.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;your_password&quot;);\nSystem.setProperty(&quot;javax.net.ssl.keyStoreType&quot;, &quot;pkcs12&quot;);\nSystem.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;file.jks&quot;);\nSystem.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;your_password&quot;);\nSystem.setProperty(&quot;javax.net.ssl.trustStoreType&quot;, &quot;jks&quot;);\n</code></pre>\n"}],"owner":{"account_id":15558504,"reputation":11,"user_id":11224197,"display_name":"able"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11821,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1682355885,"creation_date":1552971569,"question_id":55233923,"body_markdown":"I am new to TLS in java. I have files with KDB, RDB, and STN extensions.\r\nHow can I setup a JKS keystore and use that in a java application to implement TLS, which uses IBM WebSphere MQ client?\r\n\r\nMy doubts are:\r\n\r\n1. Can I use ikeyman for the conversion?\r\n2. Can I convert the KDB files directly to JKS keystore?\r\n3. Do I need any other certificates to imlpement TLS in the IBM native MQ test application?\r\n4. How can I add the TLS parameters to IBM Native MQ API?\r\n\r\nI have tried to launch ikeyman. But I can&#39;t.","title":"KDB to JKS keystore conversion","body":"<p>I am new to TLS in java. I have files with KDB, RDB, and STN extensions.\nHow can I setup a JKS keystore and use that in a java application to implement TLS, which uses IBM WebSphere MQ client?</p>\n\n<p>My doubts are:</p>\n\n<ol>\n<li>Can I use ikeyman for the conversion?</li>\n<li>Can I convert the KDB files directly to JKS keystore?</li>\n<li>Do I need any other certificates to imlpement TLS in the IBM native MQ test application?</li>\n<li>How can I add the TLS parameters to IBM Native MQ API?</li>\n</ol>\n\n<p>I have tried to launch ikeyman. But I can't.</p>\n"},{"tags":["java","kubernetes","apache-flink","k3s","k3d"],"answers":[{"comments":[{"owner":{"account_id":6268313,"reputation":197,"user_id":4873261,"display_name":"Koman"},"score":1,"creation_date":1647431523,"post_id":68779353,"comment_id":126368173,"body_markdown":"Thank you, manually downloading the jar files and copying them to .../flink-1.14.3/lib solved my problem with k3s (Rancher Desktop). I was then able to do a &quot;flink run-application --target kubernetes-application ...&quot;","body":"Thank you, manually downloading the jar files and copying them to .../flink-1.14.3/lib solved my problem with k3s (Rancher Desktop). I was then able to do a &quot;flink run-application --target kubernetes-application ...&quot;"},{"owner":{"account_id":3743193,"reputation":1882,"user_id":3112506,"accept_rate":77,"display_name":"Logister"},"score":1,"creation_date":1697227956,"post_id":68779353,"comment_id":136258550,"body_markdown":"Same thing works for the same issue when using spark","body":"Same thing works for the same issue when using spark"}],"tags":[],"owner":{"account_id":2273748,"reputation":46611,"user_id":2000548,"accept_rate":92,"display_name":"Hongbo Miao"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1682355763,"creation_date":1628898778,"answer_id":68779353,"question_id":68761409,"body_markdown":"# TL;DR\r\n\r\nDownload latest version of `bcprov-jdk15on` and `bcpkix-jdk15on` jar files from\r\n\r\n- https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on\r\n- https://mvnrepository.com/artifact/org.bouncycastle/bcpkix-jdk15on\r\n\r\nThen move to your apache-flink folder. In my case, it is\r\n\r\n```\r\n/usr/local/Cellar/apache-flink/{version}/libexec/lib\r\n```\r\n\r\nThen you are good to go!\r\n\r\n---\r\n\r\n# How I Found Out\r\n\r\nAfter checking the code of\r\n\r\n- /usr/local/Cellar/apache-flink/1.13.1/libexec/bin/kubernetes-session.sh\r\n- /usr/local/Cellar/apache-flink/1.13.1/libexec/libexec/kubernetes-session.sh\r\n\r\nThe first script is pointing to the second script, and the second script has\r\n\r\n```\r\n# ...\r\nCC_CLASSPATH=`manglePathList $(constructFlinkClassPath):$INTERNAL_HADOOP_CLASSPATHS`\r\n\r\n# ...\r\n&quot;$JAVA_RUN&quot; $JVM_ARGS -classpath &quot;$CC_CLASSPATH&quot; $log_setting org.apache.flink.kubernetes.cli.KubernetesSessionCli &quot;$@&quot;\r\n```\r\n\r\nI added `echo $CC_CLASSPATH`, and printed out the classpath.\r\n\r\nIn my case, it is at `/usr/local/Cellar/apache-flink/1.13.1/libexec/lib`.\r\n\r\nAfter I put `bcprov-jdk15on-1.69.jar` and `bcpkix-jdk15on-1.69.jar` in the folder above, Flink can be deployed to k3s (k3d) now in both session and application modes.\r\n","title":"JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add dependency to classpath","body":"<h1>TL;DR</h1>\n<p>Download latest version of <code>bcprov-jdk15on</code> and <code>bcpkix-jdk15on</code> jar files from</p>\n<ul>\n<li><a href=\"https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.bouncycastle/bcprov-jdk15on</a></li>\n<li><a href=\"https://mvnrepository.com/artifact/org.bouncycastle/bcpkix-jdk15on\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.bouncycastle/bcpkix-jdk15on</a></li>\n</ul>\n<p>Then move to your apache-flink folder. In my case, it is</p>\n<pre><code>/usr/local/Cellar/apache-flink/{version}/libexec/lib\n</code></pre>\n<p>Then you are good to go!</p>\n<hr />\n<h1>How I Found Out</h1>\n<p>After checking the code of</p>\n<ul>\n<li>/usr/local/Cellar/apache-flink/1.13.1/libexec/bin/kubernetes-session.sh</li>\n<li>/usr/local/Cellar/apache-flink/1.13.1/libexec/libexec/kubernetes-session.sh</li>\n</ul>\n<p>The first script is pointing to the second script, and the second script has</p>\n<pre><code># ...\nCC_CLASSPATH=`manglePathList $(constructFlinkClassPath):$INTERNAL_HADOOP_CLASSPATHS`\n\n# ...\n&quot;$JAVA_RUN&quot; $JVM_ARGS -classpath &quot;$CC_CLASSPATH&quot; $log_setting org.apache.flink.kubernetes.cli.KubernetesSessionCli &quot;$@&quot;\n</code></pre>\n<p>I added <code>echo $CC_CLASSPATH</code>, and printed out the classpath.</p>\n<p>In my case, it is at <code>/usr/local/Cellar/apache-flink/1.13.1/libexec/lib</code>.</p>\n<p>After I put <code>bcprov-jdk15on-1.69.jar</code> and <code>bcpkix-jdk15on-1.69.jar</code> in the folder above, Flink can be deployed to k3s (k3d) now in both session and application modes.</p>\n"},{"tags":[],"owner":{"account_id":125489,"reputation":2023,"user_id":321307,"accept_rate":73,"display_name":"sschober"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1657035012,"creation_date":1657035012,"answer_id":72872000,"question_id":68761409,"body_markdown":"I stumbled upon this problem today on my m1 mac using docker and k3d to create a k3s cluster.\r\n\r\nI solved it by actually doing what the error message says: adding bouncy castle to the class path. \r\n\r\n_But_ you need to add bc to the **plugin&#39;s class path** in the `pom.xml`, like so:\r\n\r\n```xml\r\n...\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\r\n        &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\r\n        &lt;extensions&gt;true&lt;/extensions&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;build&lt;/goal&gt;\r\n              &lt;goal&gt;generate-code&lt;/goal&gt;\r\n              &lt;goal&gt;generate-code-tests&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n\r\n        &lt;!-- add bouncy castle to class path, so that elliptic curve keys work --&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n              &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\r\n              &lt;version&gt;1.69&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n              &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n              &lt;version&gt;1.69&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n              &lt;artifactId&gt;bcprov-ext-jdk15on&lt;/artifactId&gt;\r\n              &lt;version&gt;1.69&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n      &lt;/plugin&gt;\r\n...\r\n```\r\n\r\nI don&#39;t know, it seems to me, that k3d always generates EC keys, as I had this exact problem on a totally different machine (win10/wsl2 + k3d) also.","title":"JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add dependency to classpath","body":"<p>I stumbled upon this problem today on my m1 mac using docker and k3d to create a k3s cluster.</p>\n<p>I solved it by actually doing what the error message says: adding bouncy castle to the class path.</p>\n<p><em>But</em> you need to add bc to the <strong>plugin's class path</strong> in the <code>pom.xml</code>, like so:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n      &lt;plugin&gt;\n        &lt;groupId&gt;${quarkus.platform.group-id}&lt;/groupId&gt;\n        &lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${quarkus.platform.version}&lt;/version&gt;\n        &lt;extensions&gt;true&lt;/extensions&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;build&lt;/goal&gt;\n              &lt;goal&gt;generate-code&lt;/goal&gt;\n              &lt;goal&gt;generate-code-tests&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n\n        &lt;!-- add bouncy castle to class path, so that elliptic curve keys work --&gt;\n        &lt;dependencies&gt;\n          &lt;dependency&gt;\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n              &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n              &lt;version&gt;1.69&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n              &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n              &lt;version&gt;1.69&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n              &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n              &lt;artifactId&gt;bcprov-ext-jdk15on&lt;/artifactId&gt;\n              &lt;version&gt;1.69&lt;/version&gt;\n          &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n      &lt;/plugin&gt;\n...\n</code></pre>\n<p>I don't know, it seems to me, that k3d always generates EC keys, as I had this exact problem on a totally different machine (win10/wsl2 + k3d) also.</p>\n"}],"owner":{"account_id":2273748,"reputation":46611,"user_id":2000548,"accept_rate":92,"display_name":"Hongbo Miao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3719,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":68779353,"answer_count":2,"score":5,"last_activity_date":1682355763,"creation_date":1628787002,"question_id":68761409,"body_markdown":"I have a simple Flink streaming app. It runs well in a cluster created by `start-cluster.sh` command.\r\n\r\nNow based on the [Flink tutorial](https://ci.apache.org/projects/flink/flink-docs-release-1.13/docs/deployment/resource-providers/native_kubernetes/#application-mode), I hope to deploy it in application mode natively in a Kubernetes cluster created by [k3d](https://k3d.io/) on macOS.\r\n\r\nFirst, I created a cluster by `k3d cluster create dev`.\r\n\r\nHere is my **Dockerfile**:\r\n\r\n```\r\nFROM flink\r\nRUN mkdir -p $FLINK_HOME/usrlib\r\nCOPY target/streaming-0.1.jar $FLINK_HOME/usrlib/streaming-0.1.jar\r\n```\r\n\r\nI built and pushed it to Docker Hub.\r\n\r\nMy cluster name is `k3d-dev`, so I ran\r\n\r\n```\r\nflink run-application \\\r\n    --target kubernetes-application \\\r\n    -Dkubernetes.cluster-id=k3d-dev \\\r\n    -Dkubernetes.container.image=hongbomiao/my-flink-xxx:latest \\\r\n    local:///opt/flink/usrlib/streaming-0.1.jar\r\n\r\n```\r\n\r\nHowever, I got error:\r\n\r\n```\r\n The program finished with the following exception:\r\n\r\nio.fabric8.kubernetes.client.KubernetesClientException: JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add this dependency to classpath.\r\n\tat io.fabric8.kubernetes.client.internal.CertUtils.handleECKey(CertUtils.java:161)\r\n\tat io.fabric8.kubernetes.client.internal.CertUtils.loadKey(CertUtils.java:131)\r\n\tat io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:111)\r\n\tat io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:243)\r\n\tat io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:128)\r\n\tat io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:122)\r\n\tat io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:82)\r\n\tat io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:62)\r\n\tat io.fabric8.kubernetes.client.BaseClient.&lt;init&gt;(BaseClient.java:51)\r\n\tat io.fabric8.kubernetes.client.DefaultKubernetesClient.&lt;init&gt;(DefaultKubernetesClient.java:105)\r\n\tat org.apache.flink.kubernetes.kubeclient.FlinkKubeClientFactory.fromConfiguration(FlinkKubeClientFactory.java:102)\r\n\tat org.apache.flink.kubernetes.KubernetesClusterClientFactory.createClusterDescriptor(KubernetesClusterClientFactory.java:61)\r\n\tat org.apache.flink.kubernetes.KubernetesClusterClientFactory.createClusterDescriptor(KubernetesClusterClientFactory.java:39)\r\n\tat org.apache.flink.client.deployment.application.cli.ApplicationClusterDeployer.run(ApplicationClusterDeployer.java:63)\r\n\tat org.apache.flink.client.cli.CliFrontend.runApplication(CliFrontend.java:213)\r\n\tat org.apache.flink.client.cli.CliFrontend.parseAndRun(CliFrontend.java:1057)\r\n\tat org.apache.flink.client.cli.CliFrontend.lambda$main$10(CliFrontend.java:1132)\r\n\tat org.apache.flink.runtime.security.contexts.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:28)\r\n\tat org.apache.flink.client.cli.CliFrontend.main(CliFrontend.java:1132)\r\n```\r\n\r\n\r\nAfter reading\r\n\r\n- https://www.mail-archive.com/search?l=dev@spark.apache.org&amp;q=subject:&quot;Should+we+add+built+in+support+for+bouncy+castle+EC+w\\%2FKube&quot;&amp;o=newest&amp;f=1\r\n- https://github.com/de-jcup/ekube/issues/63#issuecomment-753508790\r\n\r\nI added\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\r\n    &lt;version&gt;1.69&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n    &lt;version&gt;1.69&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bcprov-ext-jdk15on&lt;/artifactId&gt;\r\n    &lt;version&gt;1.69&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nto my **pom.xml** file. I built and pushed to Docker Hub again.\r\n\r\nWhen I ran the Flink command above, I still got same error. Any idea? Thanks!\r\n\r\n---\r\n\r\n**UPDATE 1:**\r\n\r\nBesides above **pom.xml** change, I manually downloaded those 3 jars and changed my Dockerfile to\r\n\r\n\r\n```\r\nFROM flink\r\nCOPY lib/* $FLINK_HOME/lib\r\nRUN mkdir -p $FLINK_HOME/usrlib\r\nCOPY target/streaming-0.1.jar $FLINK_HOME/usrlib/streaming-0.1.jar\r\n```\r\n\r\nand tried again, but still same error.\r\n\r\nI can confirm the 3 jar files `bcpkix-jdk15on-1.69.jar`, `bcprov-ext-jdk15on-1.69.jar`, `bcprov-jdk15on-1.69.jar` are in the docker image:\r\n\r\n```\r\n➜ docker run -it 6c48af48db55c334003a307d1ef7a5fc5181f389613284b66b5cb97588b9708d sh\r\n\r\n$ cd lib &amp;&amp; ls\r\nbcpkix-jdk15on-1.69.jar      flink-dist_2.12-1.13.2.jar\t\tflink-table_2.12-1.13.2.jar  log4j-slf4j-impl-2.12.1.jar\r\nbcprov-ext-jdk15on-1.69.jar  flink-json-1.13.2.jar\t\tlog4j-1.2-api-2.12.1.jar\r\nbcprov-jdk15on-1.69.jar      flink-shaded-zookeeper-3.4.14.jar\tlog4j-api-2.12.1.jar\r\nflink-csv-1.13.2.jar\t     flink-table-blink_2.12-1.13.2.jar\tlog4j-core-2.12.1.jar\r\n$ cd ../usrlib &amp;&amp; ls\r\nstreaming-0.1.jar\r\n```\r\n\r\n---\r\n\r\n**UPDATE 2:**\r\n\r\nI tried to start the session mode by\r\n\r\n```\r\n/usr/local/Cellar/apache-flink/1.13.1/libexec/bin/kubernetes-session.sh\r\n```\r\n\r\nbut still got same error. So now I can confirm when I was using application mode before, the issue is not related my Docker image.\r\n\r\nI have those jars are located at `~/.m2` on my machine:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nDid I miss any other jars?\r\n\r\nAlso, I found the error only happens to the cluster created by k3d/k3s, but not minikube.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hQNf8.png","title":"JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add dependency to classpath","body":"<p>I have a simple Flink streaming app. It runs well in a cluster created by <code>start-cluster.sh</code> command.</p>\n<p>Now based on the <a href=\"https://ci.apache.org/projects/flink/flink-docs-release-1.13/docs/deployment/resource-providers/native_kubernetes/#application-mode\" rel=\"noreferrer\">Flink tutorial</a>, I hope to deploy it in application mode natively in a Kubernetes cluster created by <a href=\"https://k3d.io/\" rel=\"noreferrer\">k3d</a> on macOS.</p>\n<p>First, I created a cluster by <code>k3d cluster create dev</code>.</p>\n<p>Here is my <strong>Dockerfile</strong>:</p>\n<pre><code>FROM flink\nRUN mkdir -p $FLINK_HOME/usrlib\nCOPY target/streaming-0.1.jar $FLINK_HOME/usrlib/streaming-0.1.jar\n</code></pre>\n<p>I built and pushed it to Docker Hub.</p>\n<p>My cluster name is <code>k3d-dev</code>, so I ran</p>\n<pre><code>flink run-application \\\n    --target kubernetes-application \\\n    -Dkubernetes.cluster-id=k3d-dev \\\n    -Dkubernetes.container.image=hongbomiao/my-flink-xxx:latest \\\n    local:///opt/flink/usrlib/streaming-0.1.jar\n\n</code></pre>\n<p>However, I got error:</p>\n<pre><code> The program finished with the following exception:\n\nio.fabric8.kubernetes.client.KubernetesClientException: JcaPEMKeyConverter is provided by BouncyCastle, an optional dependency. To use support for EC Keys you must explicitly add this dependency to classpath.\n    at io.fabric8.kubernetes.client.internal.CertUtils.handleECKey(CertUtils.java:161)\n    at io.fabric8.kubernetes.client.internal.CertUtils.loadKey(CertUtils.java:131)\n    at io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:111)\n    at io.fabric8.kubernetes.client.internal.CertUtils.createKeyStore(CertUtils.java:243)\n    at io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:128)\n    at io.fabric8.kubernetes.client.internal.SSLUtils.keyManagers(SSLUtils.java:122)\n    at io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:82)\n    at io.fabric8.kubernetes.client.utils.HttpClientUtils.createHttpClient(HttpClientUtils.java:62)\n    at io.fabric8.kubernetes.client.BaseClient.&lt;init&gt;(BaseClient.java:51)\n    at io.fabric8.kubernetes.client.DefaultKubernetesClient.&lt;init&gt;(DefaultKubernetesClient.java:105)\n    at org.apache.flink.kubernetes.kubeclient.FlinkKubeClientFactory.fromConfiguration(FlinkKubeClientFactory.java:102)\n    at org.apache.flink.kubernetes.KubernetesClusterClientFactory.createClusterDescriptor(KubernetesClusterClientFactory.java:61)\n    at org.apache.flink.kubernetes.KubernetesClusterClientFactory.createClusterDescriptor(KubernetesClusterClientFactory.java:39)\n    at org.apache.flink.client.deployment.application.cli.ApplicationClusterDeployer.run(ApplicationClusterDeployer.java:63)\n    at org.apache.flink.client.cli.CliFrontend.runApplication(CliFrontend.java:213)\n    at org.apache.flink.client.cli.CliFrontend.parseAndRun(CliFrontend.java:1057)\n    at org.apache.flink.client.cli.CliFrontend.lambda$main$10(CliFrontend.java:1132)\n    at org.apache.flink.runtime.security.contexts.NoOpSecurityContext.runSecured(NoOpSecurityContext.java:28)\n    at org.apache.flink.client.cli.CliFrontend.main(CliFrontend.java:1132)\n</code></pre>\n<p>After reading</p>\n<ul>\n<li><a href=\"https://www.mail-archive.com/search?l=dev@spark.apache.org&amp;q=subject:%22Should+we+add+built+in+support+for+bouncy+castle+EC+w%5C%2FKube%22&amp;o=newest&amp;f=1\" rel=\"noreferrer\">https://www.mail-archive.com/search?l=dev@spark.apache.org&amp;q=subject:&quot;Should+we+add+built+in+support+for+bouncy+castle+EC+w\\%2FKube&quot;&amp;o=newest&amp;f=1</a></li>\n<li><a href=\"https://github.com/de-jcup/ekube/issues/63#issuecomment-753508790\" rel=\"noreferrer\">https://github.com/de-jcup/ekube/issues/63#issuecomment-753508790</a></li>\n</ul>\n<p>I added</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n    &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n    &lt;version&gt;1.69&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n    &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n    &lt;version&gt;1.69&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n    &lt;artifactId&gt;bcprov-ext-jdk15on&lt;/artifactId&gt;\n    &lt;version&gt;1.69&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to my <strong>pom.xml</strong> file. I built and pushed to Docker Hub again.</p>\n<p>When I ran the Flink command above, I still got same error. Any idea? Thanks!</p>\n<hr />\n<p><strong>UPDATE 1:</strong></p>\n<p>Besides above <strong>pom.xml</strong> change, I manually downloaded those 3 jars and changed my Dockerfile to</p>\n<pre><code>FROM flink\nCOPY lib/* $FLINK_HOME/lib\nRUN mkdir -p $FLINK_HOME/usrlib\nCOPY target/streaming-0.1.jar $FLINK_HOME/usrlib/streaming-0.1.jar\n</code></pre>\n<p>and tried again, but still same error.</p>\n<p>I can confirm the 3 jar files <code>bcpkix-jdk15on-1.69.jar</code>, <code>bcprov-ext-jdk15on-1.69.jar</code>, <code>bcprov-jdk15on-1.69.jar</code> are in the docker image:</p>\n<pre><code>➜ docker run -it 6c48af48db55c334003a307d1ef7a5fc5181f389613284b66b5cb97588b9708d sh\n\n$ cd lib &amp;&amp; ls\nbcpkix-jdk15on-1.69.jar      flink-dist_2.12-1.13.2.jar     flink-table_2.12-1.13.2.jar  log4j-slf4j-impl-2.12.1.jar\nbcprov-ext-jdk15on-1.69.jar  flink-json-1.13.2.jar      log4j-1.2-api-2.12.1.jar\nbcprov-jdk15on-1.69.jar      flink-shaded-zookeeper-3.4.14.jar  log4j-api-2.12.1.jar\nflink-csv-1.13.2.jar         flink-table-blink_2.12-1.13.2.jar  log4j-core-2.12.1.jar\n$ cd ../usrlib &amp;&amp; ls\nstreaming-0.1.jar\n</code></pre>\n<hr />\n<p><strong>UPDATE 2:</strong></p>\n<p>I tried to start the session mode by</p>\n<pre><code>/usr/local/Cellar/apache-flink/1.13.1/libexec/bin/kubernetes-session.sh\n</code></pre>\n<p>but still got same error. So now I can confirm when I was using application mode before, the issue is not related my Docker image.</p>\n<p>I have those jars are located at <code>~/.m2</code> on my machine:</p>\n<p><a href=\"https://i.stack.imgur.com/hQNf8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hQNf8.png\" alt=\"enter image description here\" /></a></p>\n<p>Did I miss any other jars?</p>\n<p>Also, I found the error only happens to the cluster created by k3d/k3s, but not minikube.</p>\n"},{"tags":["java","mysql","google-app-engine","google-cloud-datastore"],"answers":[{"comments":[{"owner":{"account_id":1372184,"reputation":1767,"user_id":1306976,"accept_rate":53,"display_name":"danielz"},"score":0,"creation_date":1485455704,"post_id":41879429,"comment_id":70943193,"body_markdown":"I am just confused because at the bottom of this paragraph: https://cloud.google.com/datastore/docs/concepts/entities#assigning_identifiers\nIt says that you can allocate manual ids using allocateIds, but I can&#39;t find the method.","body":"I am just confused because at the bottom of this paragraph: <a href=\"https://cloud.google.com/datastore/docs/concepts/entities#assigning_identifiers\" rel=\"nofollow noreferrer\">cloud.google.com/datastore/docs/concepts/&hellip;</a> It says that you can allocate manual ids using allocateIds, but I can&#39;t find the method."},{"owner":{"account_id":2661088,"reputation":2927,"user_id":2300755,"display_name":"Ed Davisson"},"score":0,"creation_date":1485465761,"post_id":41879429,"comment_id":70948720,"body_markdown":"There is a method `allocateId` on `com.google.cloud.datastore.Datastore`, but it will only accept an incomplete key (one which does not already specify the ID or name). The paragraph you linked to is slightly misleading on that front -- I&#39;ll see about getting that fixed.","body":"There is a method <code>allocateId</code> on <code>com.google.cloud.datastore.Datastore</code>, but it will only accept an incomplete key (one which does not already specify the ID or name). The paragraph you linked to is slightly misleading on that front -- I&#39;ll see about getting that fixed."},{"owner":{"account_id":1468120,"reputation":2217,"user_id":1380407,"display_name":"Sai Pullabhotla"},"score":0,"creation_date":1485467787,"post_id":41879429,"comment_id":70949814,"body_markdown":"@EdDavisson - The allocateId method accepts both IncompleteKey and Key (because Key extends IncompleteKey) and it happily returns a Key with a &quot;new&quot; ID. Any ID you set in the input is pretty much discarded. Perhaps this method also needs a fix to reject Key objects (that have a ID).","body":"@EdDavisson - The allocateId method accepts both IncompleteKey and Key (because Key extends IncompleteKey) and it happily returns a Key with a &quot;new&quot; ID. Any ID you set in the input is pretty much discarded. Perhaps this method also needs a fix to reject Key objects (that have a ID)."},{"owner":{"account_id":2661088,"reputation":2927,"user_id":2300755,"display_name":"Ed Davisson"},"score":0,"creation_date":1485470315,"post_id":41879429,"comment_id":70950907,"body_markdown":"@SaiPullabhotla: Thanks for pointing that out! I&#39;ve filed https://github.com/GoogleCloudPlatform/google-cloud-java/issues/1567","body":"@SaiPullabhotla: Thanks for pointing that out! I&#39;ve filed <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-java/issues/1567\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/google-cloud-java/issues/1567</a>"}],"tags":[],"owner":{"account_id":2661088,"reputation":2927,"user_id":2300755,"display_name":"Ed Davisson"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1485451810,"creation_date":1485451810,"answer_id":41879429,"question_id":41878706,"body_markdown":"The Cloud Datastore API does not expose a method for reserving a user-specified ID. The `AllocateIds` method picks IDs for you.\r\n\r\nOne possible approach would be to assign the MySQL-generated IDs to the `name` (string) field in your keys. Cloud Datastore never auto-assigns the `name` field. The downside is that your application code would be responsible for generating future values.","title":"Where is allocateIds in the Google Cloud Datastore java library?","body":"<p>The Cloud Datastore API does not expose a method for reserving a user-specified ID. The <code>AllocateIds</code> method picks IDs for you.</p>\n\n<p>One possible approach would be to assign the MySQL-generated IDs to the <code>name</code> (string) field in your keys. Cloud Datastore never auto-assigns the <code>name</code> field. The downside is that your application code would be responsible for generating future values.</p>\n"},{"tags":[],"owner":{"account_id":7117346,"reputation":371,"user_id":5443134,"display_name":"Craig D"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682355575,"creation_date":1682355575,"answer_id":76094325,"question_id":41878706,"body_markdown":"The google example code provides code like below to auto-generate an id or key using com.google.cloud.datastore (gen2 java):\r\n\r\n    public static Key getAutoGenKey(String projectId, String kindName) {\r\n    \t\r\n    \tDatastore datastore = DatastoreOptions.getDefaultInstance().getService().getDatastore();\r\n    \r\n    \t// Code below taken from Google, here:\r\n    \t//    https://github.com/googleapis/google-cloud-java/blob/main/google-cloud-examples/src/main/java/com/google/cloud/examples/datastore/snippets/DatastoreSnippets.java\r\n\r\n        KeyFactory keyFactory = datastore.newKeyFactory().setKind(kindName).setProjectId(projectId);\r\n        IncompleteKey incompleteKey = keyFactory.newKey();\r\n    \r\n        // let cloud datastore automatically assign an id:\r\n        Key key = datastore.allocateId(incompleteKey);\r\n    \t\r\n    \treturn key;\r\n    }\r\n\r\n","title":"Where is allocateIds in the Google Cloud Datastore java library?","body":"<p>The google example code provides code like below to auto-generate an id or key using com.google.cloud.datastore (gen2 java):</p>\n<pre><code>public static Key getAutoGenKey(String projectId, String kindName) {\n    \n    Datastore datastore = DatastoreOptions.getDefaultInstance().getService().getDatastore();\n\n    // Code below taken from Google, here:\n    //    https://github.com/googleapis/google-cloud-java/blob/main/google-cloud-examples/src/main/java/com/google/cloud/examples/datastore/snippets/DatastoreSnippets.java\n\n    KeyFactory keyFactory = datastore.newKeyFactory().setKind(kindName).setProjectId(projectId);\n    IncompleteKey incompleteKey = keyFactory.newKey();\n\n    // let cloud datastore automatically assign an id:\n    Key key = datastore.allocateId(incompleteKey);\n    \n    return key;\n}\n</code></pre>\n"}],"owner":{"account_id":1372184,"reputation":1767,"user_id":1306976,"accept_rate":53,"display_name":"danielz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":358,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41879429,"answer_count":2,"score":1,"last_activity_date":1682355575,"creation_date":1485449424,"question_id":41878706,"body_markdown":"I moving some data from Mysql to the Datastore and for this data migaration I want to keep the old Ids from Mysql.\r\n\r\nI found this note [here][1]\r\n\r\n\r\n  [1]: https://cloud.google.com/datastore/docs/concepts/entities#assigning_identifiers:\r\n\r\n    Instead of using key name strings or generating numeric IDs automatically, advanced applications may sometimes wish to assign their own numeric IDs manually to the entities they create. Be aware, however, that there is nothing to prevent Datastore from assigning one of your manual numeric IDs to another entity. The only way to avoid such conflicts is to have your application obtain a block of IDs with the allocateIds() method. Cloud Datastore&#39;s automatic ID generator will keep track of IDs that have been allocated with these methods and will avoid reusing them for another entity, so you can safely use such IDs without conflict.\r\n\r\nSo allocateIds seems perfect for what I am trying to do. I want to use the method to allocate all the auto incremented ids from Mysql so that I can then use the datastore Id generator without worrying about collision.\r\n\r\nHowever I can&#39;t find this method anywhere. I am using the cloud datastore java library as a standalone library, without using the app engine. ","title":"Where is allocateIds in the Google Cloud Datastore java library?","body":"<p>I moving some data from Mysql to the Datastore and for this data migaration I want to keep the old Ids from Mysql.</p>\n\n<p>I found this note <a href=\"https://cloud.google.com/datastore/docs/concepts/entities#assigning_identifiers:\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>Instead of using key name strings or generating numeric IDs automatically, advanced applications may sometimes wish to assign their own numeric IDs manually to the entities they create. Be aware, however, that there is nothing to prevent Datastore from assigning one of your manual numeric IDs to another entity. The only way to avoid such conflicts is to have your application obtain a block of IDs with the allocateIds() method. Cloud Datastore's automatic ID generator will keep track of IDs that have been allocated with these methods and will avoid reusing them for another entity, so you can safely use such IDs without conflict.\n</code></pre>\n\n<p>So allocateIds seems perfect for what I am trying to do. I want to use the method to allocate all the auto incremented ids from Mysql so that I can then use the datastore Id generator without worrying about collision.</p>\n\n<p>However I can't find this method anywhere. I am using the cloud datastore java library as a standalone library, without using the app engine. </p>\n"},{"tags":["java","anylogic"],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1682355441,"creation_date":1682355441,"answer_id":76094315,"question_id":76093470,"body_markdown":"You only have access to `Main` in the &quot;after simulation run&quot; code field in your Param-Var experiment. You need to use the keyword `root` to access `Main` from there.\r\n\r\nIf you had an xls sheet &quot;outputs&quot; with columns &quot;iterationNo, ReplicationNo, value&quot;, you could use code like this to store unique run results:\r\n\r\n    int rowIndex = 0; // increase this after every round\r\n    excelFile.setCellValue(getCurrentIteration(), &quot;outputs&quot;, rowIndex, 0); // first column\r\n    excelFile.setCellValue(getCurrentReplication(), &quot;outputs&quot;, rowIndex, 1); // 2nd column\r\n    excelFile.setCellValue(root.someValueToStore, &quot;outputs&quot;, rowIndex, 2); // 3rd column\r\n    rowIndex++; // for next run\r\n\r\nLikely needs some adjustments, but this is the zest","title":"Is it possible to do a ParametersVariation, access values from main and store them in an excel after iteration?","body":"<p>You only have access to <code>Main</code> in the &quot;after simulation run&quot; code field in your Param-Var experiment. You need to use the keyword <code>root</code> to access <code>Main</code> from there.</p>\n<p>If you had an xls sheet &quot;outputs&quot; with columns &quot;iterationNo, ReplicationNo, value&quot;, you could use code like this to store unique run results:</p>\n<pre><code>int rowIndex = 0; // increase this after every round\nexcelFile.setCellValue(getCurrentIteration(), &quot;outputs&quot;, rowIndex, 0); // first column\nexcelFile.setCellValue(getCurrentReplication(), &quot;outputs&quot;, rowIndex, 1); // 2nd column\nexcelFile.setCellValue(root.someValueToStore, &quot;outputs&quot;, rowIndex, 2); // 3rd column\nrowIndex++; // for next run\n</code></pre>\n<p>Likely needs some adjustments, but this is the zest</p>\n"}],"owner":{"account_id":27527886,"reputation":55,"user_id":21006896,"display_name":"FroggyJoggy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76094315,"answer_count":1,"score":1,"last_activity_date":1682355441,"creation_date":1682349558,"question_id":76093470,"body_markdown":"I am running a number of experiments and after the simulation is over the results are stored in an excel called excelFile.\r\nAt the moment I am doing one experiment after another, because if I use Parameter Variation I do not know how to get access to the measured values in the main from the Experiment `ParametersVariation: Main`\r\nThis is what I use in the single experiment runs with an excel in the Main :\r\n\r\n`excelFile.createCell(1, t, 2);`\r\n\r\n`excelFile.setCellValue(shopfloor_throughput_time.mean() ,1 , t , 2);`\r\n\r\nBut I want to run 30 experiments at the same time and have the excel in the ParameterVariations environment.\r\nI don&#39;t know how to access the measured values in the Main from the ParametersVariation to write them into the excel in the ParametersVariation.\r\n\r\nI tried this:\r\n\r\n`excelFile.createCell(1, getCurrentIteration(), 1);`\r\n\r\n`excelFile.setCellValue(main.shopfloor_throughput_time.mean() ,1 ,getCurrentIteration() , 1);`\r\n\r\nin the ParametersVariation environment on *After iteration*.\r\n","title":"Is it possible to do a ParametersVariation, access values from main and store them in an excel after iteration?","body":"<p>I am running a number of experiments and after the simulation is over the results are stored in an excel called excelFile.\nAt the moment I am doing one experiment after another, because if I use Parameter Variation I do not know how to get access to the measured values in the main from the Experiment <code>ParametersVariation: Main</code>\nThis is what I use in the single experiment runs with an excel in the Main :</p>\n<p><code>excelFile.createCell(1, t, 2);</code></p>\n<p><code>excelFile.setCellValue(shopfloor_throughput_time.mean() ,1 , t , 2);</code></p>\n<p>But I want to run 30 experiments at the same time and have the excel in the ParameterVariations environment.\nI don't know how to access the measured values in the Main from the ParametersVariation to write them into the excel in the ParametersVariation.</p>\n<p>I tried this:</p>\n<p><code>excelFile.createCell(1, getCurrentIteration(), 1);</code></p>\n<p><code>excelFile.setCellValue(main.shopfloor_throughput_time.mean() ,1 ,getCurrentIteration() , 1);</code></p>\n<p>in the ParametersVariation environment on <em>After iteration</em>.</p>\n"},{"tags":["java","list","collections","set","hashset"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1476855249,"post_id":40122910,"comment_id":67516162,"body_markdown":"Use a `HashMap&lt;Intger, Customer&gt;`","body":"Use a <code>HashMap&lt;Intger, Customer&gt;</code>"},{"owner":{"account_id":3808934,"reputation":175,"user_id":3160502,"display_name":"Sachin  Mesare"},"score":0,"creation_date":1476857374,"post_id":40122910,"comment_id":67517050,"body_markdown":"This post will be useful  to  you [Remove Duplicate](http://stackoverflow.com/questions/20433692/java-remove-duplicate-objects-in-arraylist)","body":"This post will be useful  to  you <a href=\"http://stackoverflow.com/questions/20433692/java-remove-duplicate-objects-in-arraylist\">Remove Duplicate</a>"}],"answers":[{"comments":[{"owner":{"account_id":4964700,"reputation":155,"user_id":3994481,"display_name":"PSabuwala"},"score":0,"creation_date":1476856004,"post_id":40123041,"comment_id":67516492,"body_markdown":"agreed, also we can use foreach. thnx","body":"agreed, also we can use foreach. thnx"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1476856032,"post_id":40123041,"comment_id":67516499,"body_markdown":"What is `lst`? Do you mean `lstCustomer`?","body":"What is <code>lst</code>? Do you mean <code>lstCustomer</code>?"},{"owner":{"account_id":4964700,"reputation":155,"user_id":3994481,"display_name":"PSabuwala"},"score":0,"creation_date":1476856113,"post_id":40123041,"comment_id":67516529,"body_markdown":"it is lstCustomer, needs to replace.","body":"it is lstCustomer, needs to replace."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1476856129,"post_id":40123041,"comment_id":67516540,"body_markdown":"Really you answer does not add anything to my top-most comment","body":"Really you answer does not add anything to my top-most comment"},{"owner":{"account_id":4964700,"reputation":155,"user_id":3994481,"display_name":"PSabuwala"},"score":0,"creation_date":1476856308,"post_id":40123041,"comment_id":67516597,"body_markdown":"i am busy with my answer after submission of that i see your comment.","body":"i am busy with my answer after submission of that i see your comment."}],"tags":[],"owner":{"account_id":4964700,"reputation":155,"user_id":3994481,"display_name":"PSabuwala"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1476856067,"creation_date":1476855664,"answer_id":40123041,"question_id":40122910,"body_markdown":"You can use HapMap for this,\r\n\r\n\r\n    List&lt;Customer&gt; lstCustomer = new ArrayList&lt;Customer&gt;(); // list of customer\r\n\tMap&lt;Integer,Customer&gt; map = new HashMap&lt;Integer, Customer&gt;(); //here integer is your id type\r\n\t\r\n    for(int i=0;i&lt;lstCustomer .size();i++){\r\n\t\tif(map.get(lstCustomer .get(i).getId())==null){\r\n\t\t\tmap.put(lstCustomer .get(i).getId(),lst.get(i));\r\n\t\t}else{\r\n\t\t\tSystem.out.println(lstCustomer .get(i).getId()); // duplicate customer id\r\n\t\t}\r\n\t}\r\n\r\nHope it helps you.","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<p>You can use HapMap for this,</p>\n\n<pre><code>List&lt;Customer&gt; lstCustomer = new ArrayList&lt;Customer&gt;(); // list of customer\nMap&lt;Integer,Customer&gt; map = new HashMap&lt;Integer, Customer&gt;(); //here integer is your id type\n\nfor(int i=0;i&lt;lstCustomer .size();i++){\n    if(map.get(lstCustomer .get(i).getId())==null){\n        map.put(lstCustomer .get(i).getId(),lst.get(i));\n    }else{\n        System.out.println(lstCustomer .get(i).getId()); // duplicate customer id\n    }\n}\n</code></pre>\n\n<p>Hope it helps you.</p>\n"},{"tags":[],"owner":{"account_id":7815129,"reputation":3299,"user_id":5910091,"display_name":"ujulu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476858261,"creation_date":1476858261,"answer_id":40123712,"question_id":40122910,"body_markdown":"&gt; I tried adding the customers to a set (because set would not add duplicates), but how do I state that it is the customerId, not the customer, that cannot be duplicated in this list?\r\n\r\nThis is possible if you override the `equals()` method based on the ID field, thereby telling the set that two customers are logically equal if they have the same ID. Here is an example implementation generated by my IDE (assuming id is of type `String`; if the type is some primitive type use its wrapper):\r\n\r\n    @Override\r\n\tpublic boolean equals(final Object obj) {\r\n\t\tif (this == obj) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (obj == null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (getClass() != obj.getClass()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfinal Student other = (Student) obj;\r\n\t\tif (id == null) {\r\n\t\t\tif (other.id!= null) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else if (!id.equals(other.id)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n    @Override\r\n\tpublic int hashCode() {\r\n\t\tfinal int prime = 31;\r\n\t\tint result = 1;\r\n\t\tresult = (prime * result) + ((id == null) ? 0 : id.hashCode());\r\n\t\treturn result;\r\n\t}\r\n\r\n    final Set&lt;Customer&gt; myCustomerSet = new HashSet&lt;Customer&gt;();\r\n    myCustomerSet.add(customer1);\r\n    ...\r\n\r\nThen when you add customers to the set you should have only one entry with the same ID in the set.\r\nThe `hashCode()` is not necessary for your case, but normally if you override `equals()`, you  should also override the `hashCode()`.","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<blockquote>\n  <p>I tried adding the customers to a set (because set would not add duplicates), but how do I state that it is the customerId, not the customer, that cannot be duplicated in this list?</p>\n</blockquote>\n\n<p>This is possible if you override the <code>equals()</code> method based on the ID field, thereby telling the set that two customers are logically equal if they have the same ID. Here is an example implementation generated by my IDE (assuming id is of type <code>String</code>; if the type is some primitive type use its wrapper):</p>\n\n<pre><code>@Override\npublic boolean equals(final Object obj) {\n    if (this == obj) {\n        return true;\n    }\n    if (obj == null) {\n        return false;\n    }\n    if (getClass() != obj.getClass()) {\n        return false;\n    }\n    final Student other = (Student) obj;\n    if (id == null) {\n        if (other.id!= null) {\n            return false;\n        }\n    } else if (!id.equals(other.id)) {\n        return false;\n    }\n    return true;\n}\n\n@Override\npublic int hashCode() {\n    final int prime = 31;\n    int result = 1;\n    result = (prime * result) + ((id == null) ? 0 : id.hashCode());\n    return result;\n}\n\nfinal Set&lt;Customer&gt; myCustomerSet = new HashSet&lt;Customer&gt;();\nmyCustomerSet.add(customer1);\n...\n</code></pre>\n\n<p>Then when you add customers to the set you should have only one entry with the same ID in the set.\nThe <code>hashCode()</code> is not necessary for your case, but normally if you override <code>equals()</code>, you  should also override the <code>hashCode()</code>.</p>\n"},{"tags":[],"owner":{"account_id":6649487,"reputation":61,"user_id":5210168,"display_name":"Naveen Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476867031,"creation_date":1476867031,"answer_id":40126471,"question_id":40122910,"body_markdown":"Create a TreeSet with a custom comparator as an input paramater.\r\ninside comparator write your equals logic.\r\nNow add each customer to treeset. The final treeset will not have duplicates.","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<p>Create a TreeSet with a custom comparator as an input paramater.\ninside comparator write your equals logic.\nNow add each customer to treeset. The final treeset will not have duplicates.</p>\n"},{"tags":[],"owner":{"account_id":16300382,"reputation":1,"user_id":11771657,"display_name":"Karthik Gunasekaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682355288,"creation_date":1565246256,"answer_id":57406515,"question_id":40122910,"body_markdown":"You can write a custom method using inbuild function: frequency()\r\n\r\nSample Code:\r\n        // Let us create a list with 4 items \r\n        ArrayList&lt;String&gt; list = \r\n                        new ArrayList&lt;String&gt;(); \r\n        list.add(&quot;Id100&quot;); \r\n        list.add(&quot;Id101&quot;); \r\n        list.add(&quot;Id100&quot;); \r\n        list.add(&quot;Id100&quot;); \r\n      \r\n        // count the frequency of the duplicate Id &quot;Id100&quot; \r\n        System.out.println(Collections.frequency(list, &quot;Id100&quot;));  \r\n","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<p>You can write a custom method using inbuild function: frequency()</p>\n<p>Sample Code:\n// Let us create a list with 4 items\nArrayList list =\nnew ArrayList();\nlist.add(&quot;Id100&quot;);\nlist.add(&quot;Id101&quot;);\nlist.add(&quot;Id100&quot;);\nlist.add(&quot;Id100&quot;);</p>\n<pre><code>    // count the frequency of the duplicate Id &quot;Id100&quot; \n    System.out.println(Collections.frequency(list, &quot;Id100&quot;));  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16300382,"reputation":1,"user_id":11771657,"display_name":"Karthik Gunasekaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1566364705,"creation_date":1566364705,"answer_id":57584861,"question_id":40122910,"body_markdown":"     \r\n    import java.util.ArrayList;\r\n    import java.util.HashSet;\r\n    import java.util.LinkedHashSet;\r\n    import java.util.*;\r\n     \r\n    public class RemoveDuplicatesArrayListMain {\r\n\r\n    \tpublic static void main(String[] args) {\r\n    \t\tArrayList employeeNameList = new ArrayList();\r\n    \t\temployeeNameList.add(&quot;John&quot;);\r\n    \t\temployeeNameList.add(&quot;Ankit&quot;);\r\n    \t\temployeeNameList.add(&quot;Rohan&quot;);\r\n    \t\temployeeNameList.add(&quot;John&quot;);\r\n    \t\temployeeNameList.add(&quot;Amit&quot;);\r\n    \t\temployeeNameList.add(&quot;Ankit&quot;);\r\n     \r\n    \t\tSystem.out.println(&quot;Removing duplicates from list:&quot;);\r\n    \t\t// Using iterative approach\r\n    \t\tArrayList uniqueElements = new ArrayList();\r\n    \t\tfor (String empName : employeeNameList) {\r\n     \r\n    \t\t\tif (!uniqueElements.contains(empName)) {\r\n    \t\t\t\tuniqueElements.add(empName);\r\n    \t\t\t}\r\n    \t\t}\r\n     \r\n    \t\tSystem.out.println(&quot;Using iterative approach:&quot;);\r\n    \t\tfor (String uniqElem : uniqueElements) {\r\n    \t\t\tSystem.out.println(uniqElem);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;*******************************&quot;);\r\n    \t\tSystem.out.println(&quot;Using HashSet :&quot;);\r\n    \t\t// using HashSet but does not maintain order\r\n    \t\tuniqueElements = new ArrayList(new HashSet(\r\n    \t\t\t\temployeeNameList));\r\n    \t\tfor (String uniqElem : uniqueElements) {\r\n    \t\t\tSystem.out.println(uniqElem);\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;*******************************&quot;);\r\n    \t\tSystem.out.println(&quot;Using LinkedHashSet :&quot;);\r\n    \t\t// using LinkedHashSet maintaining order\r\n    \t\tuniqueElements = new ArrayList(new LinkedHashSet(\r\n    \t\t\t\temployeeNameList));\r\n    \t\tfor (String uniqElem : uniqueElements) {\r\n    \t\t\tSystem.out.println(uniqElem);\r\n    \t\t}\r\n     \r\n    \t}\r\n    }","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<pre><code>import java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.LinkedHashSet;\nimport java.util.*;\n\npublic class RemoveDuplicatesArrayListMain {\n\n    public static void main(String[] args) {\n        ArrayList employeeNameList = new ArrayList();\n        employeeNameList.add(\"John\");\n        employeeNameList.add(\"Ankit\");\n        employeeNameList.add(\"Rohan\");\n        employeeNameList.add(\"John\");\n        employeeNameList.add(\"Amit\");\n        employeeNameList.add(\"Ankit\");\n\n        System.out.println(\"Removing duplicates from list:\");\n        // Using iterative approach\n        ArrayList uniqueElements = new ArrayList();\n        for (String empName : employeeNameList) {\n\n            if (!uniqueElements.contains(empName)) {\n                uniqueElements.add(empName);\n            }\n        }\n\n        System.out.println(\"Using iterative approach:\");\n        for (String uniqElem : uniqueElements) {\n            System.out.println(uniqElem);\n        }\n        System.out.println(\"*******************************\");\n        System.out.println(\"Using HashSet :\");\n        // using HashSet but does not maintain order\n        uniqueElements = new ArrayList(new HashSet(\n                employeeNameList));\n        for (String uniqElem : uniqueElements) {\n            System.out.println(uniqElem);\n        }\n        System.out.println(\"*******************************\");\n        System.out.println(\"Using LinkedHashSet :\");\n        // using LinkedHashSet maintaining order\n        uniqueElements = new ArrayList(new LinkedHashSet(\n                employeeNameList));\n        for (String uniqElem : uniqueElements) {\n            System.out.println(uniqElem);\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4171061,"reputation":31,"user_id":3418813,"display_name":"Amie Chu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1682355288,"creation_date":1476855107,"question_id":40122910,"body_markdown":"A complete newbie here so I apologize if my question is stupid. I honestly tried before posting.\r\nI have a list of some customers, with their customer Id&#39;s as one column and customer name as the other, and age as the third column. \r\n\r\nI want to go through this list and identify whether the same customerId is in the list more than once. In that case, I need to delete that whole customer (even if his name or age is different). \r\n\r\nCan you please advise what to use to do this logic? \r\n\r\nI tried adding the customers to a set (because set would not add duplicates), but how do I state that it is the customerId, not the customer, that cannot be duplicated in this list?\r\n\r\nSo far I got this below, but in my logic nothing says that customer is considered a duplicate when his customerId is a duplicate. (I don&#39;t necessarily need to use a list. Customer is an object).\r\n\r\n       //Customer is a class that contains a private variable customerId, so I   can do customer.getCustomerId();\r\n     \r\n        List&lt;Customer&gt; notDuplicatedCustomers = new ArrayList&lt;Customer&gt;(); //list  of customers\r\n        final Set&lt;Customer&gt; setToReturn = new HashSet&lt;Customer&gt;();\r\n        final Set&lt;Customer&gt; initialSet = new HashSet&lt;Customer&gt;();\r\n     \r\n        for (Customer customer: notDuplicatedCustomers ) {\r\n        if (!initialSet.add(customer)) {\r\n        setToReturn.add(customer);\r\n           } \r\n        }","title":"Identify duplicate customer id&#39;s in a list of customers","body":"<p>A complete newbie here so I apologize if my question is stupid. I honestly tried before posting.\nI have a list of some customers, with their customer Id's as one column and customer name as the other, and age as the third column. </p>\n\n<p>I want to go through this list and identify whether the same customerId is in the list more than once. In that case, I need to delete that whole customer (even if his name or age is different). </p>\n\n<p>Can you please advise what to use to do this logic? </p>\n\n<p>I tried adding the customers to a set (because set would not add duplicates), but how do I state that it is the customerId, not the customer, that cannot be duplicated in this list?</p>\n\n<p>So far I got this below, but in my logic nothing says that customer is considered a duplicate when his customerId is a duplicate. (I don't necessarily need to use a list. Customer is an object).</p>\n\n<pre><code>   //Customer is a class that contains a private variable customerId, so I   can do customer.getCustomerId();\n\n    List&lt;Customer&gt; notDuplicatedCustomers = new ArrayList&lt;Customer&gt;(); //list  of customers\n    final Set&lt;Customer&gt; setToReturn = new HashSet&lt;Customer&gt;();\n    final Set&lt;Customer&gt; initialSet = new HashSet&lt;Customer&gt;();\n\n    for (Customer customer: notDuplicatedCustomers ) {\n    if (!initialSet.add(customer)) {\n    setToReturn.add(customer);\n       } \n    }\n</code></pre>\n"},{"tags":["java","javafx","gson"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1682353874,"post_id":76091092,"comment_id":134198272,"body_markdown":"The easiest solution is probably to serialize some other representation of the color, e.g. rgba values or a web string.","body":"The easiest solution is probably to serialize some other representation of the color, e.g. rgba values or a web string."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682357311,"post_id":76091092,"comment_id":134199076,"body_markdown":"You can&#39;t `opens` a package that is not in your own module via the `module-info` descriptor. You&#39;d have to use an `--add-opens` JVM argument. But the better solution is to customize the (de)serialization, as [demonstrated by James](https://stackoverflow.com/a/76094273/6395627).","body":"You can&#39;t <code>opens</code> a package that is not in your own module via the <code>module-info</code> descriptor. You&#39;d have to use an <code>--add-opens</code> JVM argument. But the better solution is to customize the (de)serialization, as <a href=\"https://stackoverflow.com/a/76094273/6395627\">demonstrated by James</a>."}],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682355189,"creation_date":1682355189,"answer_id":76094273,"question_id":76091092,"body_markdown":"Not tested, but try creating custom [de]serializers for `Color`:\r\n\r\n    public class ColorSerializer implements JsonSerializer&lt;Color&gt; {\r\n    \r\n        @Override\r\n        public JsonElement serialize(Color color, Type colorType, JsonSerializationContext context) {\r\n            JsonObject json = new JsonObject();\r\n            json.addProperty(&quot;red&quot;, color.getRed());\r\n            json.addProperty(&quot;green&quot;, color.getGreen());\r\n            json.addProperty(&quot;blue&quot;, color.getBlue());\r\n            json.addProperty(&quot;opacity&quot;, color.getOpacity());\r\n            return json;\r\n        }\r\n    }\r\n\r\nand\r\n\r\n    public class ColorDeserializer implements JsonDeserializer&lt;Color&gt; {\r\n    \r\n        @Override\r\n        public Color deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext context) {\r\n            JsonObject json = jsonElement.getAsJsonObject();\r\n            double red = json.get(&quot;red&quot;).getAsDouble();\r\n            double green = json.get(&quot;green&quot;).getAsDouble();\r\n            double blue = json.get(&quot;blue&quot;).getAsDouble();\r\n            double opacity = json.get(&quot;opacity&quot;).getAsDouble();\r\n            return Color.color(red, green, blue, opacity);\r\n        }\r\n    }\r\n\r\nThen of course just do\r\n\r\n    Gson gson = new GsonBuilder()\r\n        .registerTypeAdapter(Color.class, new ColorSerializer())\r\n        .setPrettyPrinting()\r\n        .create();\r\n    FileWriter fWriter = new FileWriter(&quot;pixel.json&quot;);\r\n    fWriter.write(gson.toJson(list));\r\n\r\n\r\nAnd to read it back in, register a `ColorDeserializer`.","title":"Error serializing javafx.Color with Gson lib","body":"<p>Not tested, but try creating custom [de]serializers for <code>Color</code>:</p>\n<pre><code>public class ColorSerializer implements JsonSerializer&lt;Color&gt; {\n\n    @Override\n    public JsonElement serialize(Color color, Type colorType, JsonSerializationContext context) {\n        JsonObject json = new JsonObject();\n        json.addProperty(&quot;red&quot;, color.getRed());\n        json.addProperty(&quot;green&quot;, color.getGreen());\n        json.addProperty(&quot;blue&quot;, color.getBlue());\n        json.addProperty(&quot;opacity&quot;, color.getOpacity());\n        return json;\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class ColorDeserializer implements JsonDeserializer&lt;Color&gt; {\n\n    @Override\n    public Color deserialize(JsonElement jsonElement, Type type, JsonDeserializationContext context) {\n        JsonObject json = jsonElement.getAsJsonObject();\n        double red = json.get(&quot;red&quot;).getAsDouble();\n        double green = json.get(&quot;green&quot;).getAsDouble();\n        double blue = json.get(&quot;blue&quot;).getAsDouble();\n        double opacity = json.get(&quot;opacity&quot;).getAsDouble();\n        return Color.color(red, green, blue, opacity);\n    }\n}\n</code></pre>\n<p>Then of course just do</p>\n<pre><code>Gson gson = new GsonBuilder()\n    .registerTypeAdapter(Color.class, new ColorSerializer())\n    .setPrettyPrinting()\n    .create();\nFileWriter fWriter = new FileWriter(&quot;pixel.json&quot;);\nfWriter.write(gson.toJson(list));\n</code></pre>\n<p>And to read it back in, register a <code>ColorDeserializer</code>.</p>\n"}],"owner":{"account_id":27486622,"reputation":31,"user_id":20972763,"display_name":"roccia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1682355189,"creation_date":1682333195,"question_id":76091092,"body_markdown":"i&#39;m creating a program where i need to write an array of Pixel(x, y, Color)(Where x and y are int) in a Json file with the Gson library; (Im using Intellij on Arch)\r\n\r\nThis is what i did to add &quot;Pixel&quot; in the list:\r\n\r\n```\r\nList &lt;Pixel&gt; list = new ArrayList&lt;&gt;();\r\n        list.add(new Pixel(1,1,Color.TRANSPARENT));\r\n        list.add(new Pixel(1, 2, Color.BEIGE));\r\n        list.add(new Pixel(2, 1, Color.RED));\r\n```\r\n\r\nThen i wrote them in the json file with:\r\n\r\n```\r\nGson gson = new GsonBuilder().setPrettyPrinting().create();\r\n        FileWriter fWriter = new FileWriter(&quot;pixel.json&quot;);\r\nfWriter.write(gson.toJson(list));\r\n```\r\n\r\nWhen i start the program i had these errors:\r\n\r\nCaused by: com.google.gson.JsonIOException: Failed making field &#39;javafx.scene.paint.Color#red&#39; accessible; either increase its visibility or write a custom TypeAdapter for its declaring type.\r\n\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final float javafx.scene.paint.Color.red accessible: module javafx.graphics does not &quot;opens javafx.scene.paint&quot; to module com.google.gson\r\n\r\nSo i add in module-info.java:\r\n\r\n`opens javafx.scene.paint to com.google.gson;`\r\n\r\nBut then i had this problem:\r\n\r\n```\r\nwarning: package is empty or does not exist: javafx.scene.paint\r\n    opens javafx.scene.paint to com.google.gson;\r\n```","title":"Error serializing javafx.Color with Gson lib","body":"<p>i'm creating a program where i need to write an array of Pixel(x, y, Color)(Where x and y are int) in a Json file with the Gson library; (Im using Intellij on Arch)</p>\n<p>This is what i did to add &quot;Pixel&quot; in the list:</p>\n<pre><code>List &lt;Pixel&gt; list = new ArrayList&lt;&gt;();\n        list.add(new Pixel(1,1,Color.TRANSPARENT));\n        list.add(new Pixel(1, 2, Color.BEIGE));\n        list.add(new Pixel(2, 1, Color.RED));\n</code></pre>\n<p>Then i wrote them in the json file with:</p>\n<pre><code>Gson gson = new GsonBuilder().setPrettyPrinting().create();\n        FileWriter fWriter = new FileWriter(&quot;pixel.json&quot;);\nfWriter.write(gson.toJson(list));\n</code></pre>\n<p>When i start the program i had these errors:</p>\n<p>Caused by: com.google.gson.JsonIOException: Failed making field 'javafx.scene.paint.Color#red' accessible; either increase its visibility or write a custom TypeAdapter for its declaring type.</p>\n<p>Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final float javafx.scene.paint.Color.red accessible: module javafx.graphics does not &quot;opens javafx.scene.paint&quot; to module com.google.gson</p>\n<p>So i add in module-info.java:</p>\n<p><code>opens javafx.scene.paint to com.google.gson;</code></p>\n<p>But then i had this problem:</p>\n<pre><code>warning: package is empty or does not exist: javafx.scene.paint\n    opens javafx.scene.paint to com.google.gson;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1682350860,"post_id":76093619,"comment_id":134197581,"body_markdown":"Please share the complete and literal error message.","body":"Please share the complete and literal error message."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1682351036,"post_id":76093619,"comment_id":134197635,"body_markdown":"Hint: what would you expect `p.get(&quot;FFF&quot;).add(&quot;This is a string&quot;)` to do? That should work, right, because `p.get(&quot;FFF&quot;)` returns a `List&lt;Object&gt;`. But then what do you expect `x.get(2)` to return, given that it finds a string instead of a `BigDecimal`? (Basically a `List&lt;Object&gt;` is &quot;a list that can contain anything&quot; - whereas a `List&lt;BigDecimal&gt;` is &quot;a list that can contain BigDecimal references&quot; - that&#39;s not the same thing.)","body":"Hint: what would you expect <code>p.get(&quot;FFF&quot;).add(&quot;This is a string&quot;)</code> to do? That should work, right, because <code>p.get(&quot;FFF&quot;)</code> returns a <code>List&lt;Object&gt;</code>. But then what do you expect <code>x.get(2)</code> to return, given that it finds a string instead of a <code>BigDecimal</code>? (Basically a <code>List&lt;Object&gt;</code> is &quot;a list that can contain anything&quot; - whereas a <code>List&lt;BigDecimal&gt;</code> is &quot;a list that can contain BigDecimal references&quot; - that&#39;s not the same thing.)"},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":0,"creation_date":1682351198,"post_id":76093619,"comment_id":134197677,"body_markdown":"Does this answer your question? [What is PECS (Producer Extends Consumer Super)?](https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super\">What is PECS (Producer Extends Consumer Super)?</a>"},{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1682351493,"post_id":76093619,"comment_id":134197754,"body_markdown":"In short: Even if `BigDecimal` is a subtype of `Object`, the type `List&lt;BigDecimal&gt;` is _not_ a subtype of `List&lt;Object&gt;`.","body":"In short: Even if <code>BigDecimal</code> is a subtype of <code>Object</code>, the type <code>List&lt;BigDecimal&gt;</code> is <i>not</i> a subtype of <code>List&lt;Object&gt;</code>."}],"answers":[{"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1682354899,"post_id":76093788,"comment_id":134198515,"body_markdown":"In general, you shouldn&#39;t use wildcards in return types, only in method parameters. So, `ArrayList&lt;T&gt; transmutate(ArrayList&lt;? super T&gt;)` would be better (and no less generic). That said, the only change necessary to OP&#39;s code is to use `List&lt;Object&gt; x` instead of `List&lt;BigDecimal&gt;`.","body":"In general, you shouldn&#39;t use wildcards in return types, only in method parameters. So, <code>ArrayList&lt;T&gt; transmutate(ArrayList&lt;? super T&gt;)</code> would be better (and no less generic). That said, the only change necessary to OP&#39;s code is to use <code>List&lt;Object&gt; x</code> instead of <code>List&lt;BigDecimal&gt;</code>."}],"tags":[],"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682355140,"creation_date":1682351585,"answer_id":76093788,"question_id":76093619,"body_markdown":"This is an example of [Contravariance](https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)), and is by design. Here&#39;s an example that shows why this is forbidden:\r\n\r\n    public ArrayList&lt;Object&gt; transmutate(ArrayList&lt;BigDecimal&gt; input) {\r\n        // Just return the input, but as ArrayList&lt;Object&gt;.\r\n        // This is a forbidden function that will give the error you saw.\r\n        return input;\r\n    }\r\n    \r\n    // Create a BigDecimal array list.\r\n    ArrayList&lt;BigDecimal&gt; x = new ArrayList&lt;&gt;();\r\n    x.add(0.43443434344);\r\n    x.add(0.43443434343);\r\n    \r\n    // Use the forbidden function to transform it into ArrayList&lt;Object&gt;.\r\n    ArrayList&lt;Object&gt; y = transmutate(x);\r\n    // Should be allowed, because y is a list of objects.\r\n    y.add(&quot;string&quot;);\r\n    \r\n    // However, because x=y...\r\n    x.get(2)\r\n    // Would print &quot;string&quot;, but it&#39;s supposed to be a list of BigDecimal!\r\n\r\nThe method signature you&#39;re looking for is probably using [Generic Wildcards](https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html).\r\n\r\n    public &lt;T&gt; ArrayList&lt;T&gt; transmutate(ArrayList&lt;? super T&gt;) input) {\r\n\r\n\r\n","title":"List&lt;Object&gt; not accepting lists with mutiple other generic data types","body":"<p>This is an example of <a href=\"https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)\" rel=\"nofollow noreferrer\">Contravariance</a>, and is by design. Here's an example that shows why this is forbidden:</p>\n<pre><code>public ArrayList&lt;Object&gt; transmutate(ArrayList&lt;BigDecimal&gt; input) {\n    // Just return the input, but as ArrayList&lt;Object&gt;.\n    // This is a forbidden function that will give the error you saw.\n    return input;\n}\n\n// Create a BigDecimal array list.\nArrayList&lt;BigDecimal&gt; x = new ArrayList&lt;&gt;();\nx.add(0.43443434344);\nx.add(0.43443434343);\n\n// Use the forbidden function to transform it into ArrayList&lt;Object&gt;.\nArrayList&lt;Object&gt; y = transmutate(x);\n// Should be allowed, because y is a list of objects.\ny.add(&quot;string&quot;);\n\n// However, because x=y...\nx.get(2)\n// Would print &quot;string&quot;, but it's supposed to be a list of BigDecimal!\n</code></pre>\n<p>The method signature you're looking for is probably using <a href=\"https://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html\" rel=\"nofollow noreferrer\">Generic Wildcards</a>.</p>\n<pre><code>public &lt;T&gt; ArrayList&lt;T&gt; transmutate(ArrayList&lt;? super T&gt;) input) {\n</code></pre>\n"}],"owner":{"account_id":27528457,"reputation":39,"user_id":21007380,"display_name":"Pratik"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682355140,"creation_date":1682350495,"question_id":76093619,"body_markdown":"I am trying to write a method as follows.\r\n\r\n   \r\n\r\n     public Map&lt;String,List&lt;Object&gt;&gt; getFFF(){\r\n        Map&lt;String,List&lt;Object&gt;&gt; p= new HashMap&lt;&gt;();\r\n        List&lt;BigDecimal&gt; x= new ArrayList&lt;&gt;();\r\n        x.add(0.43443434344);\r\n        x.add(0.43443434343);\r\n        \r\n        p.put(&quot;FFF&quot;,x);//getting compile error at this line\r\n        \r\n        return p\r\n        \r\n        }\r\nI am getting compile error at the line 6 on 2nd parameter x. It says \r\n\r\n    Required type:\r\n    List\r\n    &lt;Object&gt;\r\n    Provided:\r\n    List\r\n    &lt;BigDecimal&gt;\r\n\r\nI was expecting `List&lt;Object&gt;` to accept all List types. I want to add `List&lt;String&gt;`, and `List&lt;long&gt;` as well to the `List&lt;Object&gt;`. Basically, I want the Method return type as a List to accept all argument types. Any other way I can use to do so? I am new to Java hence I wanted some clarity on this. Can&#39;t I have a generic List that will accept all List types, whether String, Float, Long, or any data type?","title":"List&lt;Object&gt; not accepting lists with mutiple other generic data types","body":"<p>I am trying to write a method as follows.</p>\n<pre><code> public Map&lt;String,List&lt;Object&gt;&gt; getFFF(){\n    Map&lt;String,List&lt;Object&gt;&gt; p= new HashMap&lt;&gt;();\n    List&lt;BigDecimal&gt; x= new ArrayList&lt;&gt;();\n    x.add(0.43443434344);\n    x.add(0.43443434343);\n    \n    p.put(&quot;FFF&quot;,x);//getting compile error at this line\n    \n    return p\n    \n    }\n</code></pre>\n<p>I am getting compile error at the line 6 on 2nd parameter x. It says</p>\n<pre><code>Required type:\nList\n&lt;Object&gt;\nProvided:\nList\n&lt;BigDecimal&gt;\n</code></pre>\n<p>I was expecting <code>List&lt;Object&gt;</code> to accept all List types. I want to add <code>List&lt;String&gt;</code>, and <code>List&lt;long&gt;</code> as well to the <code>List&lt;Object&gt;</code>. Basically, I want the Method return type as a List to accept all argument types. Any other way I can use to do so? I am new to Java hence I wanted some clarity on this. Can't I have a generic List that will accept all List types, whether String, Float, Long, or any data type?</p>\n"},{"tags":["java","if-statement"],"comments":[{"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"score":2,"creation_date":1682348947,"post_id":76093353,"comment_id":134197059,"body_markdown":"You can simplify your conditions, knowing that the `else` is only run if the preceding `if` conditions were false.","body":"You can simplify your conditions, knowing that the <code>else</code> is only run if the preceding <code>if</code> conditions were false."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1682354716,"post_id":76093353,"comment_id":134198474,"body_markdown":"There&#39;s no reason to compare to `0.` (but no harm in doing so). You can just use `0`, and it will automatically be widened to double `0`. (But, at the very least, be consistent: sometimes you compare to `0.`, sometimes to `0`)","body":"There&#39;s no reason to compare to <code>0.</code> (but no harm in doing so). You can just use <code>0</code>, and it will automatically be widened to double <code>0</code>. (But, at the very least, be consistent: sometimes you compare to <code>0.</code>, sometimes to <code>0</code>)"}],"answers":[{"comments":[{"owner":{"account_id":17197306,"reputation":119,"user_id":12449753,"display_name":"w97802"},"score":0,"creation_date":1682406357,"post_id":76093420,"comment_id":134205690,"body_markdown":"Thank you! If we know that the case for price = (b+a)/2 is actually the most common one that will happen &gt;95% of the time, is it true that we should put it first in the if statement?","body":"Thank you! If we know that the case for price = (b+a)/2 is actually the most common one that will happen &gt;95% of the time, is it true that we should put it first in the if statement?"},{"owner":{"account_id":2552656,"reputation":2755,"user_id":2216129,"accept_rate":58,"display_name":"Topological Sort"},"score":0,"creation_date":1682426010,"post_id":76093420,"comment_id":134210314,"body_markdown":"On the one hand, no, because no matter how you arrange it it&#39;s O(1), and so we&#39;re really not going to notice any difference in speed. On the other hand, efficiency never hurts, so you can rearrange it that way if you prefer. I go for clean and clear over clumsy and efficient when it&#39;s barely noticeable, but it&#39;s a judgment call.","body":"On the one hand, no, because no matter how you arrange it it&#39;s O(1), and so we&#39;re really not going to notice any difference in speed. On the other hand, efficiency never hurts, so you can rearrange it that way if you prefer. I go for clean and clear over clumsy and efficient when it&#39;s barely noticeable, but it&#39;s a judgment call."}],"tags":[],"owner":{"account_id":2552656,"reputation":2755,"user_id":2216129,"accept_rate":58,"display_name":"Topological Sort"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682350109,"creation_date":1682349262,"answer_id":76093420,"question_id":76093353,"body_markdown":"This looks more like human reasoning and is thus clearer (while being no more costly for the computer):\r\n\r\n    if a and b are 0\r\n      if last price is also 0 price = previous close\r\n      else price = last price\r\n    else if b is zero /* and therefore at this point a isn&#39;t */ price = a\r\n    else if a is zero /* and therefore b isn&#39;t */ price = b\r\n    else /*a and b are nonzero, so */ price = (b+a)/2\r\n","title":"Is there a better way to do if else statement in this context","body":"<p>This looks more like human reasoning and is thus clearer (while being no more costly for the computer):</p>\n<pre><code>if a and b are 0\n  if last price is also 0 price = previous close\n  else price = last price\nelse if b is zero /* and therefore at this point a isn't */ price = a\nelse if a is zero /* and therefore b isn't */ price = b\nelse /*a and b are nonzero, so */ price = (b+a)/2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18172019,"reputation":11,"user_id":13221494,"display_name":"bramvanpevenage"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682350700,"creation_date":1682350020,"answer_id":76093538,"question_id":76093353,"body_markdown":"Here&#39;s an improved if-else statement by removing some duplication checkings.\r\n\r\n    if (b != 0. &amp;&amp; a != 0.) {\r\n      price = (b + a) / 2;\r\n    } else if (b == 0.) { //don&#39;t need to check a not equal to zero, because if so we would have been in the previous condition.\r\n       price = a;\r\n    } else if (a == 0) { // same here\r\n       price = b;\r\n    } else if (LastPrice != 0.) { // same here don&#39;t need to check that a and b are not null already checked that case on the first line\r\n        price = LastPrice;\r\n    } else {\r\n       price = previous close;\r\n    }\r\n\r\nor you could do some nesting of if statements\r\n   \r\n\r\n     if (b == 0. &amp;&amp; a == 0. &amp;&amp; LastPrice == 0.) {\r\n        price = previous close;\r\n      } else {\r\n       if (b == 0.) { \r\n         price = a;\r\n       } else if (a == 0) { \r\n         price = b;\r\n       } else if { \r\n         price = LastPrice;\r\n       }\r\n    }","title":"Is there a better way to do if else statement in this context","body":"<p>Here's an improved if-else statement by removing some duplication checkings.</p>\n<pre><code>if (b != 0. &amp;&amp; a != 0.) {\n  price = (b + a) / 2;\n} else if (b == 0.) { //don't need to check a not equal to zero, because if so we would have been in the previous condition.\n   price = a;\n} else if (a == 0) { // same here\n   price = b;\n} else if (LastPrice != 0.) { // same here don't need to check that a and b are not null already checked that case on the first line\n    price = LastPrice;\n} else {\n   price = previous close;\n}\n</code></pre>\n<p>or you could do some nesting of if statements</p>\n<pre><code> if (b == 0. &amp;&amp; a == 0. &amp;&amp; LastPrice == 0.) {\n    price = previous close;\n  } else {\n   if (b == 0.) { \n     price = a;\n   } else if (a == 0) { \n     price = b;\n   } else if { \n     price = LastPrice;\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682354614,"creation_date":1682354614,"answer_id":76094188,"question_id":76093353,"body_markdown":"You can write this using streams:\r\n\r\n```\r\nprice = DoubleStream.of(a, b)\r\n    .filter(x -&gt; x != 0)\r\n    .average()\r\n    .orElse(LastPrice != 0 ? LastPrice : previousClose)\r\n```","title":"Is there a better way to do if else statement in this context","body":"<p>You can write this using streams:</p>\n<pre><code>price = DoubleStream.of(a, b)\n    .filter(x -&gt; x != 0)\n    .average()\n    .orElse(LastPrice != 0 ? LastPrice : previousClose)\n</code></pre>\n"}],"owner":{"account_id":17197306,"reputation":119,"user_id":12449753,"display_name":"w97802"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"closed_date":1682623634,"answer_count":3,"score":-1,"last_activity_date":1682354614,"creation_date":1682348892,"question_id":76093353,"body_markdown":"I have if-else statements like below:\r\n```\r\nif (b != 0. &amp;&amp; a != 0.) {\r\n    price = (b + a) / 2;\r\n} else if (b == 0. &amp;&amp; a! = 0.) {\r\n    price = a;\r\n} else if (a == 0 &amp;&amp; b != 0.) {\r\n    price = b;\r\n} else if (b == 0 &amp;&amp; a == 0. &amp;&amp; LastPrice != 0.) {\r\n    price = LastPrice;\r\n} else {\r\n    price = previous close;\r\n}\r\n```\r\n\r\nThe idea is that,\r\n1. if `b` &amp; `a` not equal 0 , price = (b + a) / 2;\r\n2. if `b` is 0 but `a` isn&#39;t, then take `a`, vice versa\r\n3. if `b` &amp; `a` are both 0 but lastPrice is not, then take lastPrice\r\n4. else we take previous close\r\n\r\nHowever, the way I wrote it is very clumsy, is there a cleaner way to do it with better coding style?\r\n\r\nThanks in advance.\r\n","title":"Is there a better way to do if else statement in this context","body":"<p>I have if-else statements like below:</p>\n<pre><code>if (b != 0. &amp;&amp; a != 0.) {\n    price = (b + a) / 2;\n} else if (b == 0. &amp;&amp; a! = 0.) {\n    price = a;\n} else if (a == 0 &amp;&amp; b != 0.) {\n    price = b;\n} else if (b == 0 &amp;&amp; a == 0. &amp;&amp; LastPrice != 0.) {\n    price = LastPrice;\n} else {\n    price = previous close;\n}\n</code></pre>\n<p>The idea is that,</p>\n<ol>\n<li>if <code>b</code> &amp; <code>a</code> not equal 0 , price = (b + a) / 2;</li>\n<li>if <code>b</code> is 0 but <code>a</code> isn't, then take <code>a</code>, vice versa</li>\n<li>if <code>b</code> &amp; <code>a</code> are both 0 but lastPrice is not, then take lastPrice</li>\n<li>else we take previous close</li>\n</ol>\n<p>However, the way I wrote it is very clumsy, is there a cleaner way to do it with better coding style?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","email","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":146411,"reputation":9094,"user_id":356857,"accept_rate":80,"display_name":"WeMakeSoftware"},"score":0,"creation_date":1471606004,"post_id":39037796,"comment_id":65425135,"body_markdown":"did you configure the gmail account to accept IMAP / POP3 requests?","body":"did you configure the gmail account to accept IMAP / POP3 requests?"}],"answers":[{"tags":[],"owner":{"account_id":40862,"reputation":23767,"user_id":118587,"accept_rate":75,"display_name":"Grzegorz Oledzki"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1471606075,"creation_date":1471606075,"answer_id":39037931,"question_id":39037796,"body_markdown":"Any chance that might be a typo in your configuration?\r\n\r\nLook at \r\n\r\n     sprint.mail.username \r\n\r\nShouldn&#39;t it be `spring...`?","title":"Unable to send emails in Spring Boot using Gmail SMTP","body":"<p>Any chance that might be a typo in your configuration?</p>\n\n<p>Look at </p>\n\n<pre><code> sprint.mail.username \n</code></pre>\n\n<p>Shouldn't it be <code>spring...</code>?</p>\n"},{"comments":[{"owner":{"account_id":7423325,"reputation":1596,"user_id":5646794,"display_name":"Touhid"},"score":1,"creation_date":1619125455,"post_id":39038089,"comment_id":118818038,"body_markdown":"https://www.google.com/settings/security/lesssecureapps this is actual problem, There are lots of code available but Google is rejecting to login.","body":"<a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"nofollow noreferrer\">google.com/settings/security/lesssecureapps</a> this is actual problem, There are lots of code available but Google is rejecting to login."}],"tags":[],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1471606561,"creation_date":1471606561,"answer_id":39038089,"question_id":39037796,"body_markdown":"Turn on **Less secure apps**\r\n\r\nhttps://www.google.com/settings/security/lesssecureapps\r\n\r\nFYI: https://support.google.com/accounts/answer/6010255?hl=en\r\n\r\nThen re-test sending email.","title":"Unable to send emails in Spring Boot using Gmail SMTP","body":"<p>Turn on <strong>Less secure apps</strong></p>\n\n<p><a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"noreferrer\">https://www.google.com/settings/security/lesssecureapps</a></p>\n\n<p>FYI: <a href=\"https://support.google.com/accounts/answer/6010255?hl=en\" rel=\"noreferrer\">https://support.google.com/accounts/answer/6010255?hl=en</a></p>\n\n<p>Then re-test sending email.</p>\n"}],"owner":{"account_id":7620986,"reputation":779,"user_id":5779015,"accept_rate":67,"display_name":"I.shL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5687,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":39037931,"answer_count":2,"score":2,"last_activity_date":1682354378,"creation_date":1471605674,"question_id":39037796,"body_markdown":"I want to send emails in Spring Boot using `JavaMailSender`. Whenever I run my project I get this error:\r\n\r\n&gt; org.springframework.mail.MailSendException: Failed messages: com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at\r\n530 5.5.1  https://support.google.com/mail/answer/14257 ps2sm10628859pab.10 - gsmtp\r\n\r\nI&#39;m not using 2-step verification for my account and the password is right too, I checked it.\r\n\r\nThis is my application.properties file:\r\n\r\n    spring.mail.host = smtp.gmail.com\r\n    sprint.mail.username = apptestacc1234@gmail.com\r\n    sprint.mail.password = *******\r\n    send.from.email= apptestacc1234@gmail.com\r\n    spring.mail.properties.mail.smtp.auth = true;\r\n    spring.mail.properties.mail.smtp.starttls.enable = true\r\n    spring.mail.properties.mail.smtp.ssl.enable = true\r\n    spring.mail.properties.mail.socketFactory.port=587\r\n    spring.mail.properties.mail.socketFactory.class=javax.net.ssl.SSLSocketFactory\r\n    spring.mail.properties.mail.socketFactory.fallback=false\r\n    spring.mail.smtp.port= 587\r\n\r\n\r\nMy MailService class:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.mail.MailException;\r\n    import org.springframework.mail.SimpleMailMessage;\r\n    import org.springframework.mail.javamail.JavaMailSender;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class MailService {\r\n\r\n\t@Autowired\r\n\tprivate JavaMailSender javaMailSender;\r\n\t\r\n\t\r\n\t//public MailService(JavaMailSender javaMailSender){\r\n\t//\tthis.javaMailSender = javaMailSender;\r\n\t//}\r\n\t\r\n\t\r\n\tpublic void sendMail() throws MailException{\r\n\t\t\r\n\t\tSimpleMailMessage mail = new SimpleMailMessage();\r\n\t\tmail.setTo(&quot;loonaishmita@gmail.com&quot;);\r\n\t\tmail.setFrom(&quot;apptestacc1234@gmail.com&quot;);\r\n\t\tmail.setSubject(&quot;Test&quot;);\r\n\t\tmail.setText(&quot;test mail&quot;);\r\n\t\tjavaMailSender.send(mail);\r\n\t}\r\n}\r\n\r\nThis is my controller:\r\n\r\n    @Controller\r\n    @EnableAutoConfiguration\r\n    public class MailController {\r\n    \t@Autowired\r\n    \tprivate MailService mailService;\r\n    \t\r\n\t@RequestMapping(&quot;/api/sendmail&quot;)\r\n    @ResponseBody\r\n    private String sendMail() {\r\n\t\ttry{\r\n\t\t\tmailService.sendMail();\r\n\t\t\treturn &quot;mail sent&quot;;\r\n\t\t}catch(MailException e){\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn &quot;thanks&quot;;\r\n    }\r\n\r\n\t\r\n}\r\n\r\n\r\nI followed almost all the threads related to this problem on stackoverflow but still not able to figure it out. Please help!\r\n\r\n\r\n","title":"Unable to send emails in Spring Boot using Gmail SMTP","body":"<p>I want to send emails in Spring Boot using <code>JavaMailSender</code>. Whenever I run my project I get this error:</p>\n\n<blockquote>\n  <p>org.springframework.mail.MailSendException: Failed messages: com.sun.mail.smtp.SMTPSendFailedException: 530-5.5.1 Authentication Required. Learn more at\n  530 5.5.1  <a href=\"https://support.google.com/mail/answer/14257\" rel=\"nofollow\">https://support.google.com/mail/answer/14257</a> ps2sm10628859pab.10 - gsmtp</p>\n</blockquote>\n\n<p>I'm not using 2-step verification for my account and the password is right too, I checked it.</p>\n\n<p>This is my application.properties file:</p>\n\n<pre><code>spring.mail.host = smtp.gmail.com\nsprint.mail.username = apptestacc1234@gmail.com\nsprint.mail.password = *******\nsend.from.email= apptestacc1234@gmail.com\nspring.mail.properties.mail.smtp.auth = true;\nspring.mail.properties.mail.smtp.starttls.enable = true\nspring.mail.properties.mail.smtp.ssl.enable = true\nspring.mail.properties.mail.socketFactory.port=587\nspring.mail.properties.mail.socketFactory.class=javax.net.ssl.SSLSocketFactory\nspring.mail.properties.mail.socketFactory.fallback=false\nspring.mail.smtp.port= 587\n</code></pre>\n\n<p>My MailService class:</p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.mail.MailException;\nimport org.springframework.mail.SimpleMailMessage;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class MailService {\n\n@Autowired\nprivate JavaMailSender javaMailSender;\n\n\n//public MailService(JavaMailSender javaMailSender){\n//  this.javaMailSender = javaMailSender;\n//}\n\n\npublic void sendMail() throws MailException{\n\n    SimpleMailMessage mail = new SimpleMailMessage();\n    mail.setTo(\"loonaishmita@gmail.com\");\n    mail.setFrom(\"apptestacc1234@gmail.com\");\n    mail.setSubject(\"Test\");\n    mail.setText(\"test mail\");\n    javaMailSender.send(mail);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>This is my controller:</p>\n\n<pre><code>@Controller\n@EnableAutoConfiguration\npublic class MailController {\n    @Autowired\n    private MailService mailService;\n\n@RequestMapping(\"/api/sendmail\")\n@ResponseBody\nprivate String sendMail() {\n    try{\n        mailService.sendMail();\n        return \"mail sent\";\n    }catch(MailException e){\n        e.printStackTrace();\n    }\n    return \"thanks\";\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I followed almost all the threads related to this problem on stackoverflow but still not able to figure it out. Please help!</p>\n"},{"tags":["java","regex","cucumber","gherkin","cucumber-java"],"comments":[{"owner":{"account_id":27900922,"reputation":5928,"user_id":21305238,"display_name":"InSync"},"score":1,"creation_date":1682339172,"post_id":76091301,"comment_id":134194427,"body_markdown":"Could you format the question properly, please?","body":"Could you format the question properly, please?"}],"owner":{"account_id":7292198,"reputation":169,"user_id":5558240,"display_name":"Shreyas Holla P"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682354111,"creation_date":1682334857,"question_id":76091301,"body_markdown":"Here is my feature file,\r\n```\r\n Given user raises a referral to supervisor\r\n    When user raises a referral by passing &quot;&lt;entityName&gt;&quot;,&quot;&lt;entityHeaderDetails&gt;&quot;,&lt;newEntityDetails&gt;&quot;\r\n    Then user recieves a referral created status\r\nExamples:\r\n    | entityName       | entityHeaderDetails | newEntityDetails|                \r\n\t| Approval Process | {&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user&quot;,&quot;httpMethod&quot;: &quot;POST&quot;,&quot;headers&quot;: {&quot;x-tenant-id&quot;:&quot;ESSENCE&quot;,&quot;Content-Type&quot;: &quot;application/json&quot;}} | {&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-31&quot;,&quot;alternatePhone&quot;: &quot;9111111113&quot;,&quot;bankCode&quot;: &quot;MODELBANK&quot;,&quot;emailId&quot;: &quot;MCTestUser@mail.com&quot;,&quot;mobileNumber&quot;: &quot;9111111114&quot;,&quot;readOnlyFlag&quot;: &quot;N&quot;,&quot;userBankDetail&quot;: [{&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-31&quot;,&quot;bankCode&quot;: &quot;MODELBANK&quot;,&quot;bankRoleDetail&quot;: [{&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-25&quot;,&quot;branchCode&quot;: &quot;BRANCH_002&quot;,&quot;defaultRoleFlag&quot;: &quot;Y&quot;,&quot;roleCode&quot;: &quot;B2E_SYSTEM_ROLE&quot;,&quot;roleName&quot;: &quot;Bank Employee system Role&quot;}],&quot;branchCode&quot;: &quot;BRANCH_002&quot;}],&quot;userCategoryCode&quot;: &quot;BANK_EMPLOYEE&quot;,&quot;userLanguageCode&quot;: &quot;en_GB&quot;,&quot;userLoginId&quot;: &quot;MCTestUser&quot;,&quot;userTypeCode&quot;: &quot;NORMAL&quot;} | \r\n```\r\n\t\r\nSo trying to get the same in test file and tried this,\r\n\r\n```java\r\n @When(&quot;^user raises a referral by passing \\&quot;([^\\&quot;]*)\\&quot;, \\&quot;(.*?)\\&quot;,\\&quot;(.*?)\\&quot;$&quot;)\r\n    public void userRaisesAReferralByPassing(String entityName,String entityHeaderDetails, String newEntityDetails) throws Throwable \r\n    {\t\r\n```\r\n\t\r\nCucumber is able to identify the test method and it calls the same. But mapping of values is failing.\r\n\r\nFor example the above value of `{&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user&quot;,&quot;httpMethod&quot;: &quot;POST&quot;,&quot;headers&quot;: {&quot;x-tenant-id&quot;:&quot;ESSENCE&quot;,&quot;Content-Type&quot;: &quot;application/json&quot;}}`  is mapped as `{&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user`.\r\n\t","title":"How to pass dynamic json structure to cucumber test","body":"<p>Here is my feature file,</p>\n<pre><code> Given user raises a referral to supervisor\n    When user raises a referral by passing &quot;&lt;entityName&gt;&quot;,&quot;&lt;entityHeaderDetails&gt;&quot;,&lt;newEntityDetails&gt;&quot;\n    Then user recieves a referral created status\nExamples:\n    | entityName       | entityHeaderDetails | newEntityDetails|                \n    | Approval Process | {&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user&quot;,&quot;httpMethod&quot;: &quot;POST&quot;,&quot;headers&quot;: {&quot;x-tenant-id&quot;:&quot;ESSENCE&quot;,&quot;Content-Type&quot;: &quot;application/json&quot;}} | {&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-31&quot;,&quot;alternatePhone&quot;: &quot;9111111113&quot;,&quot;bankCode&quot;: &quot;MODELBANK&quot;,&quot;emailId&quot;: &quot;MCTestUser@mail.com&quot;,&quot;mobileNumber&quot;: &quot;9111111114&quot;,&quot;readOnlyFlag&quot;: &quot;N&quot;,&quot;userBankDetail&quot;: [{&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-31&quot;,&quot;bankCode&quot;: &quot;MODELBANK&quot;,&quot;bankRoleDetail&quot;: [{&quot;activeFlag&quot;: &quot;Y&quot;,&quot;activeFrom&quot;: &quot;2022-10-19&quot;,&quot;activeTill&quot;: &quot;2022-10-25&quot;,&quot;branchCode&quot;: &quot;BRANCH_002&quot;,&quot;defaultRoleFlag&quot;: &quot;Y&quot;,&quot;roleCode&quot;: &quot;B2E_SYSTEM_ROLE&quot;,&quot;roleName&quot;: &quot;Bank Employee system Role&quot;}],&quot;branchCode&quot;: &quot;BRANCH_002&quot;}],&quot;userCategoryCode&quot;: &quot;BANK_EMPLOYEE&quot;,&quot;userLanguageCode&quot;: &quot;en_GB&quot;,&quot;userLoginId&quot;: &quot;MCTestUser&quot;,&quot;userTypeCode&quot;: &quot;NORMAL&quot;} | \n</code></pre>\n<p>So trying to get the same in test file and tried this,</p>\n<pre class=\"lang-java prettyprint-override\"><code> @When(&quot;^user raises a referral by passing \\&quot;([^\\&quot;]*)\\&quot;, \\&quot;(.*?)\\&quot;,\\&quot;(.*?)\\&quot;$&quot;)\n    public void userRaisesAReferralByPassing(String entityName,String entityHeaderDetails, String newEntityDetails) throws Throwable \n    {   \n</code></pre>\n<p>Cucumber is able to identify the test method and it calls the same. But mapping of values is failing.</p>\n<p>For example the above value of <code>{&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user&quot;,&quot;httpMethod&quot;: &quot;POST&quot;,&quot;headers&quot;: {&quot;x-tenant-id&quot;:&quot;ESSENCE&quot;,&quot;Content-Type&quot;: &quot;application/json&quot;}}</code>  is mapped as <code>{&quot;url&quot;: &quot;http://localhost:9909/essence/feus/v1/b2e/user</code>.</p>\n"},{"tags":["java","java-8","option-type"],"comments":[{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":28,"creation_date":1439218793,"post_id":31922866,"comment_id":51758330,"body_markdown":"If you used optionals, wouldn&#39;t you have to check that the optional passed as a parameter isn&#39;t `null`?","body":"If you used optionals, wouldn&#39;t you have to check that the optional passed as a parameter isn&#39;t <code>null</code>?"},{"owner":{"account_id":4858495,"reputation":6835,"user_id":3918862,"display_name":"Neil Stevens"},"score":43,"creation_date":1439219108,"post_id":31922866,"comment_id":51758560,"body_markdown":"Yes, but it would make it obvious to some one else maintaining the code in the future that the parameter can be empty/null, therefore potentially avoiding a null pointer exception in the future","body":"Yes, but it would make it obvious to some one else maintaining the code in the future that the parameter can be empty/null, therefore potentially avoiding a null pointer exception in the future"},{"owner":{"account_id":3027632,"reputation":1789,"user_id":2567273,"accept_rate":70,"display_name":"Luminous"},"score":1,"creation_date":1439219530,"post_id":31922866,"comment_id":51758850,"body_markdown":"Wow. Null arguments being passed into a method? That&#39;s so Visual Basic. What principle is it violating? SRP (maybe). It also violates another principle whose name leaves me bereft goes along the lines of passing in ONLY the necessary information for a method or function to do its job.","body":"Wow. Null arguments being passed into a method? That&#39;s so Visual Basic. What principle is it violating? SRP (maybe). It also violates another principle whose name leaves me bereft goes along the lines of passing in ONLY the necessary information for a method or function to do its job."},{"owner":{"account_id":249169,"reputation":19388,"user_id":525036,"accept_rate":25,"display_name":"Didier L"},"score":0,"creation_date":1439222743,"post_id":31922866,"comment_id":51760998,"body_markdown":"possible duplicate of [Uses for Java8 Optional](http://stackoverflow.com/questions/23454952/uses-for-java8-optional)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/23454952/uses-for-java8-optional\">Uses for Java8 Optional</a>"},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":1,"creation_date":1467387224,"post_id":31922866,"comment_id":63727936,"body_markdown":"@NeilStevens You forget that a reference of type `Optional&lt;Whatever&gt;` can itself be `null`.","body":"@NeilStevens You forget that a reference of type <code>Optional&lt;Whatever&gt;</code> can itself be <code>null</code>."},{"owner":{"account_id":1063177,"reputation":1671,"user_id":1064375,"display_name":"yeoman"},"score":38,"creation_date":1503154655,"post_id":31922866,"comment_id":78503967,"body_markdown":"Everything theoretically possibly being null is like every method in a library possibly calling System.exit(0). You cannot check against tis and you shouldn&#39;t check against this. Everything you would have to do all the time you in fact should (almost) never do. Like making all parameters final. Let your tools help you prevent changing parameter values or forgetting to initialize fields instead of making your code unreadable by thousand finals and as many null checks.","body":"Everything theoretically possibly being null is like every method in a library possibly calling System.exit(0). You cannot check against tis and you shouldn&#39;t check against this. Everything you would have to do all the time you in fact should (almost) never do. Like making all parameters final. Let your tools help you prevent changing parameter values or forgetting to initialize fields instead of making your code unreadable by thousand finals and as many null checks."},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":13,"creation_date":1517354895,"post_id":31922866,"comment_id":84059888,"body_markdown":"Actually just use the NonNull/Nullable annotations, that&#39;s what you&#39;re looking for in this situation, not optional.","body":"Actually just use the NonNull/Nullable annotations, that&#39;s what you&#39;re looking for in this situation, not optional."},{"owner":{"account_id":5481141,"reputation":7665,"user_id":4398050,"accept_rate":94,"display_name":"pedrorijo91"},"score":5,"creation_date":1582614172,"post_id":31922866,"comment_id":106827966,"body_markdown":"don&#39;t really understand the argument that Optional&lt;&gt; can be null itself. If you stablish that in your codebase there are no nulls (in every boundary with external libs you ensure that), then you can rest assured there are no nulls. I worked in a codebase like that for 2 years and we never got a NPE. Now in a codebase that wants to use solution 2 we get NPE every couple of weeks, so it can&#39;t be better, sorry. I vouch for solution 1 every single time. Scala does the same as well and no one thinks about nulls. And I think kotlin too","body":"don&#39;t really understand the argument that Optional&lt;&gt; can be null itself. If you stablish that in your codebase there are no nulls (in every boundary with external libs you ensure that), then you can rest assured there are no nulls. I worked in a codebase like that for 2 years and we never got a NPE. Now in a codebase that wants to use solution 2 we get NPE every couple of weeks, so it can&#39;t be better, sorry. I vouch for solution 1 every single time. Scala does the same as well and no one thinks about nulls. And I think kotlin too"},{"owner":{"account_id":2450311,"reputation":3009,"user_id":2136767,"accept_rate":74,"display_name":"Paul"},"score":0,"creation_date":1652272648,"post_id":31922866,"comment_id":127565787,"body_markdown":"An argument can be made that Optional is a hack to work around the lack of type unions in Java (and similar classes, in other languages).   This might be of interest: https://www.youtube.com/watch?v=YR5WdGrpoug   If you did, the Optional passed to a method could still be null, so you&#39;d have to check that too - making the code even more complicated.  And if you started non-optional T and widened the method to allow Optional&lt;T&gt;, you&#39;ve broken all your callers by changing the type.","body":"An argument can be made that Optional is a hack to work around the lack of type unions in Java (and similar classes, in other languages).   This might be of interest: <a href=\"https://www.youtube.com/watch?v=YR5WdGrpoug\" rel=\"nofollow noreferrer\">youtube.com/watch?v=YR5WdGrpoug</a>   If you did, the Optional passed to a method could still be null, so you&#39;d have to check that too - making the code even more complicated.  And if you started non-optional T and widened the method to allow Optional&lt;T&gt;, you&#39;ve broken all your callers by changing the type."}],"answers":[{"tags":[],"owner":{"account_id":1810883,"reputation":1413,"user_id":1646982,"display_name":"Danil Gaponov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1439219028,"creation_date":1439219028,"answer_id":31922994,"question_id":31922866,"body_markdown":"I think that is because you usually write your functions to manipulate data, and then lift it to `Optional` using `map` and similar functions. This adds the default `Optional` behavior to it.\r\nOf course, there might be cases, when it is necessary to write your own auxilary function that works on `Optional`.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I think that is because you usually write your functions to manipulate data, and then lift it to <code>Optional</code> using <code>map</code> and similar functions. This adds the default <code>Optional</code> behavior to it.\nOf course, there might be cases, when it is necessary to write your own auxilary function that works on <code>Optional</code>.</p>\n"},{"comments":[{"owner":{"account_id":3710820,"reputation":462,"user_id":3088208,"display_name":"pvgoran"},"score":5,"creation_date":1463124126,"post_id":31923015,"comment_id":61938988,"body_markdown":"Passing a null Optional reference can be considered a programming error (because Optional provides an *explicit* way of passing an &quot;empty&quot; value), so it&#39;s not worth checking, unless you want to avoid throwing exceptions in all cases.","body":"Passing a null Optional reference can be considered a programming error (because Optional provides an <i>explicit</i> way of passing an &quot;empty&quot; value), so it&#39;s not worth checking, unless you want to avoid throwing exceptions in all cases."}],"tags":[],"owner":{"account_id":1187920,"reputation":607,"user_id":1161494,"accept_rate":44,"display_name":"Macchiatow"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1439219084,"creation_date":1439219084,"answer_id":31923015,"question_id":31922866,"body_markdown":"I believe the reson of being is you have to first check whether or not Optional is null itself and then try to evaluate value it wraps. Too many unnecessary validations.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I believe the reson of being is you have to first check whether or not Optional is null itself and then try to evaluate value it wraps. Too many unnecessary validations.</p>\n"},{"comments":[{"owner":{"account_id":293529,"reputation":482,"user_id":596869,"display_name":"dwegener"},"score":2,"creation_date":1469918396,"post_id":31923042,"comment_id":64737790,"body_markdown":"Problem here is rather that @NotNull is not the default case and has to be annotated explicitly - hence boilerplate and stuff that people will just not do due to laziness.","body":"Problem here is rather that @NotNull is not the default case and has to be annotated explicitly - hence boilerplate and stuff that people will just not do due to laziness."},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":1,"creation_date":1469919041,"post_id":31923042,"comment_id":64737928,"body_markdown":"@dwegener Yes, but `Optional`doesn&#39;t fix the issue either, hence my suggestion for the annotations.","body":"@dwegener Yes, but <code>Optional</code>doesn&#39;t fix the issue either, hence my suggestion for the annotations."},{"owner":{"account_id":1259218,"reputation":2475,"user_id":1218010,"display_name":"Ajax"},"score":4,"creation_date":1485291121,"post_id":31923042,"comment_id":70862736,"body_markdown":"It&#39;s a lot harder to ignore Optional than it is to ignore an annotation that you will only notice if reading the docs / source or if your tooling can catch it (static analysis can&#39;t always determine nullability correctly).","body":"It&#39;s a lot harder to ignore Optional than it is to ignore an annotation that you will only notice if reading the docs / source or if your tooling can catch it (static analysis can&#39;t always determine nullability correctly)."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1497230683,"post_id":31923042,"comment_id":75974568,"body_markdown":"Note that @Nullable may not mean you &quot;accept&quot; null as a valid value, i.e. not throw any exception. It may just mean that you guard against this case, but will still throw an exception (This is the Findbugs semantics). So you can introduce ambiguity with such annotations instead of clarity.","body":"Note that @Nullable may not mean you &quot;accept&quot; null as a valid value, i.e. not throw any exception. It may just mean that you guard against this case, but will still throw an exception (This is the Findbugs semantics). So you can introduce ambiguity with such annotations instead of clarity."},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1497231355,"post_id":31923042,"comment_id":75974663,"body_markdown":"I&#39;m not sure what ambiguity there is @user2986984.  &quot;Not handling null&quot; could only realistically mean an exception is thrown.","body":"I&#39;m not sure what ambiguity there is @user2986984.  &quot;Not handling null&quot; could only realistically mean an exception is thrown."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1497351052,"post_id":31923042,"comment_id":76030535,"body_markdown":"The ambiguity is for Nullable, not for Nonnull","body":"The ambiguity is for Nullable, not for Nonnull"}],"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"comment_count":6,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1439219176,"creation_date":1439219176,"answer_id":31923042,"question_id":31922866,"body_markdown":"The pattern with `Optional` is for one to avoid *returning* `null`.  It&#39;s still perfectly possible to pass in `null` to a method.\r\n\r\nWhile these aren&#39;t really official yet, you can use [JSR-308 style](https://stackoverflow.com/questions/4963300/which-notnull-java-annotation-should-i-use) annotations to indicate whether or not you accept `null` values into the function.  Note that you&#39;d have to have the right tooling to actually identify it, and it&#39;d provide more of a static check than an enforceable runtime policy, but it would help.\r\n\r\n    public int calculateSomething(@NotNull final String p1, @NotNull final String p2) {}\r\n\r\n  ","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>The pattern with <code>Optional</code> is for one to avoid <em>returning</em> <code>null</code>.  It's still perfectly possible to pass in <code>null</code> to a method.</p>\n\n<p>While these aren't really official yet, you can use <a href=\"https://stackoverflow.com/questions/4963300/which-notnull-java-annotation-should-i-use\">JSR-308 style</a> annotations to indicate whether or not you accept <code>null</code> values into the function.  Note that you'd have to have the right tooling to actually identify it, and it'd provide more of a static check than an enforceable runtime policy, but it would help.</p>\n\n<pre><code>public int calculateSomething(@NotNull final String p1, @NotNull final String p2) {}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":74,"creation_date":1439221438,"post_id":31923105,"comment_id":51760125,"body_markdown":"Actually, having an `Optional` parameter represents one of three states: a `null` Optional, a non-null `Optional` with `isPresent() == false` and a non-null `Optional` wrapping an actual value.","body":"Actually, having an <code>Optional</code> parameter represents one of three states: a <code>null</code> Optional, a non-null <code>Optional</code> with <code>isPresent() == false</code> and a non-null <code>Optional</code> wrapping an actual value."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":27,"creation_date":1439221996,"post_id":31923105,"comment_id":51760511,"body_markdown":"@biziclop yes, an unavoidable point already criticized. But the _intention_ is to have non-null expressions only. That it did not take long, to hear the advise to avoid Optional in some cases too, is quite ironic. A `@NotNull Optional`.","body":"@biziclop yes, an unavoidable point already criticized. But the <i>intention</i> is to have non-null expressions only. That it did not take long, to hear the advise to avoid Optional in some cases too, is quite ironic. A <code>@NotNull Optional</code>."},{"owner":{"account_id":37136,"reputation":57822,"user_id":106104,"accept_rate":62,"display_name":"user253751"},"score":118,"creation_date":1443168474,"post_id":31923105,"comment_id":53393635,"body_markdown":"@biziclop Note that if you&#39;re using `Optional` at all, then state 1 (`null` Optional) usually indicates a programming error, so you might as well not handle it (just let it throw a `NullPointerException`)","body":"@biziclop Note that if you&#39;re using <code>Optional</code> at all, then state 1 (<code>null</code> Optional) usually indicates a programming error, so you might as well not handle it (just let it throw a <code>NullPointerException</code>)"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1443171301,"post_id":31923105,"comment_id":53395217,"body_markdown":"@immibis I agree but it would be nice to have some compiler-time guarantee (as much as a compiler can give at least, if someone nulls out an `Optional` variable via reflection or deserialization, that&#39;s tough luck) about optionals. Without that guarantee its use is fairly limited.","body":"@immibis I agree but it would be nice to have some compiler-time guarantee (as much as a compiler can give at least, if someone nulls out an <code>Optional</code> variable via reflection or deserialization, that&#39;s tough luck) about optionals. Without that guarantee its use is fairly limited."},{"owner":{"account_id":90792,"reputation":448,"user_id":249724,"display_name":"Kacper86"},"score":126,"creation_date":1478691072,"post_id":31923105,"comment_id":68254358,"body_markdown":"&quot;suboptimal for the compiler&quot;, &quot;In comparison to nullable parameters Optional is more costly&quot; - these arguments could be valid for C language and not for Java language. Java programmers should focus on clean code, portability, testability, good architecture, modularity, etc., and not on &quot;Optional is more costly that null reference&quot;. And if you find that you need to focus on micro-optimizations, then you&#39;d better skip Objects, Lists, Generics and switch to arrays and primitives (I don&#39;t want to be offensive here, I&#39;m just sharing my opinion).","body":"&quot;suboptimal for the compiler&quot;, &quot;In comparison to nullable parameters Optional is more costly&quot; - these arguments could be valid for C language and not for Java language. Java programmers should focus on clean code, portability, testability, good architecture, modularity, etc., and not on &quot;Optional is more costly that null reference&quot;. And if you find that you need to focus on micro-optimizations, then you&#39;d better skip Objects, Lists, Generics and switch to arrays and primitives (I don&#39;t want to be offensive here, I&#39;m just sharing my opinion)."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":4,"creation_date":1478722634,"post_id":31923105,"comment_id":68272168,"body_markdown":"@Kacper86 thank you for stating that, as I mostly avoid nulls in favor of Optional. However there are some &quot;clean-coders&quot; evidently that argument to avoid Optional as input parameters, and I wanted to list all down to earth pluses and minuses, **without judgement**. I think that is important as we still have not much experience. 3. `f(Optional.ofNullable(x))` reeks a bit, but 4. is indeed the C attitude of &quot;I do not need to earth my electric device.&quot;","body":"@Kacper86 thank you for stating that, as I mostly avoid nulls in favor of Optional. However there are some &quot;clean-coders&quot; evidently that argument to avoid Optional as input parameters, and I wanted to list all down to earth pluses and minuses, <b>without judgement</b>. I think that is important as we still have not much experience. 3. <code>f(Optional.ofNullable(x))</code> reeks a bit, but 4. is indeed the C attitude of &quot;I do not need to earth my electric device.&quot;"},{"owner":{"account_id":1181167,"reputation":2327,"user_id":1156067,"accept_rate":44,"display_name":"Elad Tabak"},"score":2,"creation_date":1480407996,"post_id":31923105,"comment_id":68937515,"body_markdown":"I think this list is not really helpful: using the words &quot;contra-productive&quot; is not descriptive enough to explain the issue. Also checking null is the same amount of code, so I don&#39;t see what&#39;s contra-productive more than the obvious solution. Second, considering compiler level optimizations in design is not the correct approach when describing your API.","body":"I think this list is not really helpful: using the words &quot;contra-productive&quot; is not descriptive enough to explain the issue. Also checking null is the same amount of code, so I don&#39;t see what&#39;s contra-productive more than the obvious solution. Second, considering compiler level optimizations in design is not the correct approach when describing your API."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1480426217,"post_id":31923105,"comment_id":68949578,"body_markdown":"@EladTabak several commenters and also you convinced me that this question would have been for some other forum (CodeReview?) and dealt in more detail. We would probably share some points.","body":"@EladTabak several commenters and also you convinced me that this question would have been for some other forum (CodeReview?) and dealt in more detail. We would probably share some points."},{"owner":{"account_id":86049,"reputation":7044,"user_id":239558,"accept_rate":72,"display_name":"user239558"},"score":2,"creation_date":1487602689,"post_id":31923105,"comment_id":71846658,"body_markdown":"&quot;Using Optional parameters causing conditional logic inside the methods is literally contra-productive.&quot; - bad argument.  map and flatMap is the FP way and no conditional logic is introduced.","body":"&quot;Using Optional parameters causing conditional logic inside the methods is literally contra-productive.&quot; - bad argument.  map and flatMap is the FP way and no conditional logic is introduced."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1488145413,"post_id":31923105,"comment_id":72089601,"body_markdown":"@user239558 thanks and java 8&#39;s `Optional` still is lacking some stream features (see java 9). Though I would not be so categorical, especially for non.FP objects passed around.","body":"@user239558 thanks and java 8&#39;s <code>Optional</code> still is lacking some stream features (see java 9). Though I would not be so categorical, especially for non.FP objects passed around."},{"owner":{"account_id":1700887,"reputation":7511,"user_id":1908650,"accept_rate":60,"display_name":"Mohan"},"score":37,"creation_date":1510084714,"post_id":31923105,"comment_id":81282664,"body_markdown":"&quot;suboptimal for the compiler&quot;: Premature optimisation is the root of all evil... if you aren&#39;t writing performance critical code (which is often the case when trying to specify a clean interface), this shouldn&#39;t be a concern.","body":"&quot;suboptimal for the compiler&quot;: Premature optimisation is the root of all evil... if you aren&#39;t writing performance critical code (which is often the case when trying to specify a clean interface), this shouldn&#39;t be a concern."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":2,"creation_date":1510100264,"post_id":31923105,"comment_id":81288890,"body_markdown":"@Mohan I _do_ love using Optional all the time, especially when doing old code. However for the question&#39;s context it seems a valid argument, as it is not premature optimisation using `int` instead of `Integer`.  Doing an `f(Optional.ofNullable(x))` falls a bit in that int/Integer category of unneeded boxing/unboxing, wrapping/unwrapping. As I said I am a big fan of Optional, so thanks.","body":"@Mohan I <i>do</i> love using Optional all the time, especially when doing old code. However for the question&#39;s context it seems a valid argument, as it is not premature optimisation using <code>int</code> instead of <code>Integer</code>.  Doing an <code>f(Optional.ofNullable(x))</code> falls a bit in that int/Integer category of unneeded boxing/unboxing, wrapping/unwrapping. As I said I am a big fan of Optional, so thanks."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":4,"creation_date":1538605455,"post_id":31923105,"comment_id":92206073,"body_markdown":"I have come to hate Optional. Most of its uses are completely unnecessary. I would add one more guideline: Only use optional where the value can actually be null. I&#39;ve seen it used on getters for constructor-injected members that are final and can&#39;t possibly be null. Before Optional came along, I saw code with a lot of unnecessary null checks. Optional has only made it worse.","body":"I have come to hate Optional. Most of its uses are completely unnecessary. I would add one more guideline: Only use optional where the value can actually be null. I&#39;ve seen it used on getters for constructor-injected members that are final and can&#39;t possibly be null. Before Optional came along, I saw code with a lot of unnecessary null checks. Optional has only made it worse."},{"owner":{"account_id":2903817,"reputation":107,"user_id":2489767,"display_name":"Hangfei Lin"},"score":1,"creation_date":1547882560,"post_id":31923105,"comment_id":95353654,"body_markdown":"I feel this does not provide a solution but only criticism.","body":"I feel this does not provide a solution but only criticism."},{"owner":{"account_id":2465829,"reputation":11057,"user_id":2148953,"accept_rate":96,"display_name":"aran"},"score":5,"creation_date":1557744701,"post_id":31923105,"comment_id":98855274,"body_markdown":"I don&#39;t get the compiler related oppinions. So, if you program in Java, you won&#39;t bother about optimizations, that&#39;s all you are saying? Well, that may be the case for front-end or typical java apps. But Java is often used for critical systems, big data processing, real time transforms, etc. In that case, YOU DO NEED optimizations, and yes, it makes a HUGE difference on those systems. If you just make fancy interfaces, front-end apps or so on, maybe you don&#39;t mind about Joop Eggen&#39;s recommendation about compiler. If you make more serious things, you DO mind. Don&#39;t generalize a whole language","body":"I don&#39;t get the compiler related oppinions. So, if you program in Java, you won&#39;t bother about optimizations, that&#39;s all you are saying? Well, that may be the case for front-end or typical java apps. But Java is often used for critical systems, big data processing, real time transforms, etc. In that case, YOU DO NEED optimizations, and yes, it makes a HUGE difference on those systems. If you just make fancy interfaces, front-end apps or so on, maybe you don&#39;t mind about Joop Eggen&#39;s recommendation about compiler. If you make more serious things, you DO mind. Don&#39;t generalize a whole language"},{"owner":{"account_id":8897,"reputation":11219,"user_id":16206,"accept_rate":78,"display_name":"borjab"},"score":0,"creation_date":1584622791,"post_id":31923105,"comment_id":107496741,"body_markdown":"Note calling any method that returns an Optional will make point 3 void. You already have the Optional object created.","body":"Note calling any method that returns an Optional will make point 3 void. You already have the Optional object created."},{"owner":{"account_id":1361789,"reputation":2778,"user_id":1299008,"accept_rate":42,"display_name":"Hoobajoob"},"score":0,"creation_date":1666310202,"post_id":31923105,"comment_id":130912832,"body_markdown":"#2 is incompletely stated or invalid. If arguments can be sometimes null and sometimes not then the method will likely *have* to include conditional logic for the two cases unless it&#39;s forwarding the arguments to other methods. Use of Optional vs null changes nothing in this regard","body":"#2 is incompletely stated or invalid. If arguments can be sometimes null and sometimes not then the method will likely <i>have</i> to include conditional logic for the two cases unless it&#39;s forwarding the arguments to other methods. Use of Optional vs null changes nothing in this regard"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1666334927,"post_id":31923105,"comment_id":130916692,"body_markdown":"@HangfeiLin thanks, though optional things are very real, and just using null then seems understating the importance of characterizing the optionality. And also the expressiveness of mapping to an (optional) field with just `map` I have come to like. But you might be right about the stating of #2.","body":"@HangfeiLin thanks, though optional things are very real, and just using null then seems understating the importance of characterizing the optionality. And also the expressiveness of mapping to an (optional) field with just <code>map</code> I have come to like. But you might be right about the stating of #2."}],"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"comment_count":18,"down_vote_count":21,"up_vote_count":362,"is_accepted":true,"score":341,"last_activity_date":1606118652,"creation_date":1439219320,"answer_id":31923105,"question_id":31922866,"body_markdown":"Oh, those coding styles are to be taken with a bit of salt.\r\n\r\n1. (+) Passing an Optional result to another method, without any semantic analysis; leaving that to the method, is quite alright.\r\n2. (-) Using Optional parameters causing conditional logic inside the methods is literally contra-productive.\r\n3. (-) Needing to pack an argument in an Optional, is suboptimal for the compiler, and does an unnecessary wrapping.\r\n4. (-) In comparison to nullable parameters Optional is more costly.\r\n5. (-) The risk of someone passing the Optional as null in actual parameters.\r\n\r\nIn general: Optional unifies two states, which have to be unraveled. Hence better suited for result than input, for the complexity of the data flow.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Oh, those coding styles are to be taken with a bit of salt.</p>\n<ol>\n<li>(+) Passing an Optional result to another method, without any semantic analysis; leaving that to the method, is quite alright.</li>\n<li>(-) Using Optional parameters causing conditional logic inside the methods is literally contra-productive.</li>\n<li>(-) Needing to pack an argument in an Optional, is suboptimal for the compiler, and does an unnecessary wrapping.</li>\n<li>(-) In comparison to nullable parameters Optional is more costly.</li>\n<li>(-) The risk of someone passing the Optional as null in actual parameters.</li>\n</ol>\n<p>In general: Optional unifies two states, which have to be unraveled. Hence better suited for result than input, for the complexity of the data flow.</p>\n"},{"tags":[],"owner":{"account_id":3286109,"reputation":14055,"user_id":2765603,"accept_rate":90,"display_name":"llogiq"},"comment_count":0,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1439219604,"creation_date":1439219604,"answer_id":31923211,"question_id":31922866,"body_markdown":"This advice is a variant of the &quot;be as unspecific as possible regarding inputs and as specific as possible regarding outputs&quot; rule of thumb.\r\n\r\nUsually if you have a method that takes a plain non-null value, you can map it over the `Optional`, so the plain version is strictly more unspecific regarding inputs. *However* there are a bunch of possible reasons why you would want to require an `Optional` argument nonetheless:\r\n\r\n * you want your function to be used in conjunction with another API that returns an `Optional`\r\n * Your function should return something other than an empty `Optional` if the given value is empty\r\n * &lt;s&gt;You think `Optional` is so awesome that whoever uses your API should be required to learn about it ;-)&lt;/s&gt;","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>This advice is a variant of the \"be as unspecific as possible regarding inputs and as specific as possible regarding outputs\" rule of thumb.</p>\n\n<p>Usually if you have a method that takes a plain non-null value, you can map it over the <code>Optional</code>, so the plain version is strictly more unspecific regarding inputs. <em>However</em> there are a bunch of possible reasons why you would want to require an <code>Optional</code> argument nonetheless:</p>\n\n<ul>\n<li>you want your function to be used in conjunction with another API that returns an <code>Optional</code></li>\n<li>Your function should return something other than an empty <code>Optional</code> if the given value is empty</li>\n<li><s>You think <code>Optional</code> is so awesome that whoever uses your API should be required to learn about it ;-)</s></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":481212,"reputation":6556,"user_id":894885,"accept_rate":88,"display_name":"Samuel Edwin Ward"},"score":11,"creation_date":1439234439,"post_id":31923214,"comment_id":51767173,"body_markdown":"Can&#39;t return values and fields be null as well?  So `Optional` is pointless entirely?","body":"Can&#39;t return values and fields be null as well?  So <code>Optional</code> is pointless entirely?"}],"tags":[],"owner":{"account_id":10340,"reputation":55904,"user_id":19479,"accept_rate":69,"display_name":"Steve B."},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1439219612,"creation_date":1439219612,"answer_id":31923214,"question_id":31922866,"body_markdown":"This seems a bit silly to me, but the only reason I can think of is that object arguments in method parameters already are optional in a way - they can be null. Therefore forcing someone to take an existing object and wrap it in an optional is sort of pointless. \r\n\r\nThat being said, chaining methods together that take/return optionals is a reasonable thing to do, e.g. Maybe monad.\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>This seems a bit silly to me, but the only reason I can think of is that object arguments in method parameters already are optional in a way - they can be null. Therefore forcing someone to take an existing object and wrap it in an optional is sort of pointless. </p>\n\n<p>That being said, chaining methods together that take/return optionals is a reasonable thing to do, e.g. Maybe monad.</p>\n"},{"comments":[{"owner":{"account_id":90792,"reputation":448,"user_id":249724,"display_name":"Kacper86"},"score":10,"creation_date":1510206834,"post_id":31923227,"comment_id":81338482,"body_markdown":"I&#39;m sorry, but I cannot agree with the argument &quot;wasn&#39;t designed&quot; or &quot;somebody recommends against it&quot;. An an engineer we should be specific. Using @Nullable is much worse tham using Optional, because Optionals are much more verbose from an API point of view. I don&#39;t see any good reasons against using Optionals as arguments (provided you don&#39;t want to use method overloading)","body":"I&#39;m sorry, but I cannot agree with the argument &quot;wasn&#39;t designed&quot; or &quot;somebody recommends against it&quot;. An an engineer we should be specific. Using @Nullable is much worse tham using Optional, because Optionals are much more verbose from an API point of view. I don&#39;t see any good reasons against using Optionals as arguments (provided you don&#39;t want to use method overloading)"},{"owner":{"account_id":999257,"reputation":2244,"user_id":1014479,"accept_rate":0,"display_name":"Dmitrii Semikin"},"score":1,"creation_date":1605021003,"post_id":31923227,"comment_id":114521734,"body_markdown":"Am I wrong, or @Nullable is not in part of java standard? As far as I remember it was voted out...","body":"Am I wrong, or @Nullable is not in part of java standard? As far as I remember it was voted out..."},{"owner":{"account_id":4635391,"reputation":1131,"user_id":3756780,"display_name":"slindenau"},"score":0,"creation_date":1676215036,"post_id":31923227,"comment_id":133088367,"body_markdown":"There is indeed no `@Nullable` in the JRE. It is however specified in [JSR 305](https://dzone.com/articles/when-to-use-jsr-305-for-nullability-in-java), and multiple libraries have their own [version](https://stackoverflow.com/questions/19030954/cant-find-nullable-inside-javax-annotation). It was also part of `jaxb` and intended for XML marshalling only (before that was removed from the JRE to a separate artifact). But those were in the `com.sun.istack.internal` package, so a double no-no (you&#39;re not supposed to depend on legacy sun packages nor on internal implementations).","body":"There is indeed no <code>@Nullable</code> in the JRE. It is however specified in <a href=\"https://dzone.com/articles/when-to-use-jsr-305-for-nullability-in-java\" rel=\"nofollow noreferrer\">JSR 305</a>, and multiple libraries have their own <a href=\"https://stackoverflow.com/questions/19030954/cant-find-nullable-inside-javax-annotation\">version</a>. It was also part of <code>jaxb</code> and intended for XML marshalling only (before that was removed from the JRE to a separate artifact). But those were in the <code>com.sun.istack.internal</code> package, so a double no-no (you&#39;re not supposed to depend on legacy sun packages nor on internal implementations)."}],"tags":[],"owner":{"account_id":449395,"reputation":343,"user_id":5164569,"display_name":"Kieran"},"comment_count":3,"down_vote_count":8,"up_vote_count":8,"is_accepted":false,"score":0,"last_activity_date":1439219643,"creation_date":1439219643,"answer_id":31923227,"question_id":31922866,"body_markdown":"Optionals aren&#39;t designed for this purpose, as explained nicely by [Brian Goetz][1].\r\n\r\nYou can always use [@Nullable][2] to denote that a method argument can be null. Using an optional does not really enable you to write your method logic more neatly.\r\n\r\n  [1]: https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555\r\n  [2]: https://stackoverflow.com/questions/14076296/nullable-annotation-usage","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Optionals aren't designed for this purpose, as explained nicely by <a href=\"https://stackoverflow.com/questions/26327957/should-java-8-getters-return-optional-type/26328555#26328555\">Brian Goetz</a>.</p>\n\n<p>You can always use <a href=\"https://stackoverflow.com/questions/14076296/nullable-annotation-usage\">@Nullable</a> to denote that a method argument can be null. Using an optional does not really enable you to write your method logic more neatly.</p>\n"},{"comments":[{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":5,"creation_date":1465578389,"post_id":31924845,"comment_id":62976859,"body_markdown":"How about using `@Nonnull` and `@Nullable` from javax.annotation instead? I use them extensively in a library I develop, and the support provided by the IDE (IntelliJ) is very good.","body":"How about using <code>@Nonnull</code> and <code>@Nullable</code> from javax.annotation instead? I use them extensively in a library I develop, and the support provided by the IDE (IntelliJ) is very good."},{"owner":{"account_id":4793258,"reputation":1654,"user_id":3871834,"display_name":"Mark Perry"},"score":1,"creation_date":1465777972,"post_id":31924845,"comment_id":63028290,"body_markdown":"That is fine, but you have to use this annotation everywhere and you need a library to support methods such as map, flatMap/bind, liftM2, sequence, etc.","body":"That is fine, but you have to use this annotation everywhere and you need a library to support methods such as map, flatMap/bind, liftM2, sequence, etc."},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":24,"creation_date":1469743611,"post_id":31924845,"comment_id":64677680,"body_markdown":"*Functional programming languages encourage Optional parameters.* Citation needed. Most functions should not take an optional; instead, the onus of dealing (using appropriate higher-order functions) with the presence or absence of a value is on the caller of the function in question.","body":"<i>Functional programming languages encourage Optional parameters.</i> Citation needed. Most functions should not take an optional; instead, the onus of dealing (using appropriate higher-order functions) with the presence or absence of a value is on the caller of the function in question."},{"owner":{"account_id":985380,"reputation":7450,"user_id":1005102,"accept_rate":71,"display_name":"Utku &#214;zdemir"},"score":5,"creation_date":1473808512,"post_id":31924845,"comment_id":66279719,"body_markdown":"This. Indeed, none of the answers are convincing enough, and none of them answers this specific question &quot;why using optionals as method parameters is considered bad practice while annotating method parameters with `@NonNull` is totally fine if they serve the same purpose in different ways?&quot;    For me, there is only one argument that makes at least some sense: &quot;Optional should be used to provide better APIs which has a clear return type. However for method arguments, overloaded functions can be used.&quot; - still, I do not think this is an argument that is strong enough.","body":"This. Indeed, none of the answers are convincing enough, and none of them answers this specific question &quot;why using optionals as method parameters is considered bad practice while annotating method parameters with <code>@NonNull</code> is totally fine if they serve the same purpose in different ways?&quot;    For me, there is only one argument that makes at least some sense: &quot;Optional should be used to provide better APIs which has a clear return type. However for method arguments, overloaded functions can be used.&quot; - still, I do not think this is an argument that is strong enough."},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":0,"creation_date":1502386531,"post_id":31924845,"comment_id":78199777,"body_markdown":"@Utku&#214;zdemir Function overloading requires 2^n definition of the same function when I have n optional parameters of different types; in my case n = 3 so I need 8. Or at lease I should have some magic annotation to generate the overloaded functions for me.","body":"@Utku&#214;zdemir Function overloading requires 2^n definition of the same function when I have n optional parameters of different types; in my case n = 3 so I need 8. Or at lease I should have some magic annotation to generate the overloaded functions for me."},{"owner":{"account_id":1063177,"reputation":1671,"user_id":1064375,"display_name":"yeoman"},"score":0,"creation_date":1503139930,"post_id":31924845,"comment_id":78499418,"body_markdown":"One downside of overusing optionals for arguments is having a lot of methods that, together with a totally unnecessary final for every parameter, use it all over the place, you&#39;d get signatures reading &quot;final Optional..., final Optional..., final Optional&quot;, the ... signifying the part people tend to skip over because &gt; 10 characters ^^","body":"One downside of overusing optionals for arguments is having a lot of methods that, together with a totally unnecessary final for every parameter, use it all over the place, you&#39;d get signatures reading &quot;final Optional..., final Optional..., final Optional&quot;, the ... signifying the part people tend to skip over because &gt; 10 characters ^^"},{"owner":{"account_id":1063177,"reputation":1671,"user_id":1064375,"display_name":"yeoman"},"score":3,"creation_date":1503139999,"post_id":31924845,"comment_id":78499435,"body_markdown":"Of course, preferrable to null, but what&#39;s even more preferrable is not to need a lot of optional values in the first place because good design :D","body":"Of course, preferrable to null, but what&#39;s even more preferrable is not to need a lot of optional values in the first place because good design :D"},{"owner":{"account_id":936270,"reputation":3215,"user_id":965150,"accept_rate":70,"display_name":"Planky"},"score":5,"creation_date":1529347655,"post_id":31924845,"comment_id":88831361,"body_markdown":"Those comments from Brian Goetz aren&#39;t arguments from authority. You provided the reasons for his claims...","body":"Those comments from Brian Goetz aren&#39;t arguments from authority. You provided the reasons for his claims..."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":2,"creation_date":1538749511,"post_id":31924845,"comment_id":92265318,"body_markdown":"I&#39;ve found that Optionals in parameters makes the code harder to use, and actually adds new ways to introduce bugs. Anything that increases the complexity of use will make bugs more likely. The idea that we should avoid using null has led to code like this: if(Optional.ofNullable(x).isPresent())... instead if(x != null)... All this does is add verbosity and make mistakes more likely. (For example, the coder could accidentally write if(Optional.of(x).isPresent())... which won&#39;t work.) Optional are necessary and useful for functional programming. Elsewhere, they&#39;re pointless.","body":"I&#39;ve found that Optionals in parameters makes the code harder to use, and actually adds new ways to introduce bugs. Anything that increases the complexity of use will make bugs more likely. The idea that we should avoid using null has led to code like this: if(Optional.ofNullable(x).isPresent())... instead if(x != null)... All this does is add verbosity and make mistakes more likely. (For example, the coder could accidentally write if(Optional.of(x).isPresent())... which won&#39;t work.) Optional are necessary and useful for functional programming. Elsewhere, they&#39;re pointless."},{"owner":{"account_id":5099598,"reputation":347,"user_id":4089618,"display_name":"pokkanome"},"score":2,"creation_date":1553637890,"post_id":31924845,"comment_id":97457331,"body_markdown":"@MiguelMunoz Optional.ofNullable(x).isPresent() is an ignorance of the standard library. As of Java 8 there&#39;s Objects.isNull(x) and Objects.nonNull(x)","body":"@MiguelMunoz Optional.ofNullable(x).isPresent() is an ignorance of the standard library. As of Java 8 there&#39;s Objects.isNull(x) and Objects.nonNull(x)"},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1553899175,"post_id":31924845,"comment_id":97571724,"body_markdown":"@pokkanome True. I think there was a great enthusiasm for avoiding null errors that people began looking for ways to use Optional to rid their code of nulls, rather than looking for other new methods that are better suited to the task.","body":"@pokkanome True. I think there was a great enthusiasm for avoiding null errors that people began looking for ways to use Optional to rid their code of nulls, rather than looking for other new methods that are better suited to the task."},{"owner":{"account_id":5099598,"reputation":347,"user_id":4089618,"display_name":"pokkanome"},"score":2,"creation_date":1553988634,"post_id":31924845,"comment_id":97590503,"body_markdown":"isNull and nonNull were added for functional programming also, meant to be used as lambdas. But I think there are cases where they make sense outside of functional programming. Bending over backwards to avoid the null keyword is dumb, but limiting its use in simple ways is smart.","body":"isNull and nonNull were added for functional programming also, meant to be used as lambdas. But I think there are cases where they make sense outside of functional programming. Bending over backwards to avoid the null keyword is dumb, but limiting its use in simple ways is smart."},{"owner":{"account_id":304966,"reputation":12275,"user_id":614800,"accept_rate":88,"display_name":"beluchin"},"score":0,"creation_date":1611174486,"post_id":31924845,"comment_id":116369701,"body_markdown":"+100 for _As Java programmers we should only be using null to interact with legacy libraries_","body":"+100 for <i>As Java programmers we should only be using null to interact with legacy libraries</i>"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":0,"creation_date":1675077119,"post_id":31924845,"comment_id":132843610,"body_markdown":"Oh the irony of dismissing an *actual, relevant authority* by [falsely](https://en.wikipedia.org/wiki/Argument_from_authority#:~:text=Some%20consider,given%20context) appealing to the “argument by authority” fallacy, while making claims without providing any evidence or arguments.","body":"Oh the irony of dismissing an <i>actual, relevant authority</i> by <a href=\"https://en.wikipedia.org/wiki/Argument_from_authority#:~:text=Some%20consider,given%20context\" rel=\"nofollow noreferrer\">falsely</a> appealing to the “argument by authority” fallacy, while making claims without providing any evidence or arguments."}],"tags":[],"owner":{"account_id":4793258,"reputation":1654,"user_id":3871834,"display_name":"Mark Perry"},"comment_count":14,"down_vote_count":21,"up_vote_count":156,"is_accepted":false,"score":135,"last_activity_date":1528963387,"creation_date":1439224790,"answer_id":31924845,"question_id":31922866,"body_markdown":"There are almost no good reasons for not using `Optional` as parameters.  The arguments against this rely on arguments from authority (see Brian Goetz - his argument is we can&#39;t enforce non null optionals) or that the `Optional` arguments may be null (essentially the same argument).  Of course, any reference in Java can be null, we need to encourage rules being enforced by the compiler, not programmers memory (which is problematic and does not scale).  \r\n\r\nFunctional programming languages encourage `Optional` parameters.  One of the best ways of using this is to have multiple optional parameters and using `liftM2` to use a function assuming the parameters are not empty and returning an optional (see http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html#liftM2-fj.F-).  Java 8 has unfortunately implemented a very limited library supporting optional.\r\n\r\nAs Java programmers we should only be using null to interact with legacy libraries.\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>There are almost no good reasons for not using <code>Optional</code> as parameters.  The arguments against this rely on arguments from authority (see Brian Goetz - his argument is we can't enforce non null optionals) or that the <code>Optional</code> arguments may be null (essentially the same argument).  Of course, any reference in Java can be null, we need to encourage rules being enforced by the compiler, not programmers memory (which is problematic and does not scale).  </p>\n\n<p>Functional programming languages encourage <code>Optional</code> parameters.  One of the best ways of using this is to have multiple optional parameters and using <code>liftM2</code> to use a function assuming the parameters are not empty and returning an optional (see <a href=\"http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html#liftM2-fj.F-\" rel=\"noreferrer\">http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html#liftM2-fj.F-</a>).  Java 8 has unfortunately implemented a very limited library supporting optional.</p>\n\n<p>As Java programmers we should only be using null to interact with legacy libraries.</p>\n"},{"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":20,"creation_date":1484237323,"post_id":39005452,"comment_id":70437076,"body_markdown":"That&#39;s a lot of copy+paste when only one or two paragraphs are relevant.","body":"That&#39;s a lot of copy+paste when only one or two paragraphs are relevant."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":99,"creation_date":1484237444,"post_id":39005452,"comment_id":70437171,"body_markdown":"Unfortunately this explanation doesn&#39;t address the concern of when the caller is e.g. parsing some information may be optional. With method overloading (as recommended above), the calling code has to say, &quot;Is X present? If so, I&#39;ll call overloaded method A. Is Y present? I&#39;ll have to call overloaded method B. If X and Y are present, I&#39;ll have to call overloaded method C.&quot; And so on. There may be a good answer to this, but this explanation of &quot;why&quot; doesn&#39;t cover it.","body":"Unfortunately this explanation doesn&#39;t address the concern of when the caller is e.g. parsing some information may be optional. With method overloading (as recommended above), the calling code has to say, &quot;Is X present? If so, I&#39;ll call overloaded method A. Is Y present? I&#39;ll have to call overloaded method B. If X and Y are present, I&#39;ll have to call overloaded method C.&quot; And so on. There may be a good answer to this, but this explanation of &quot;why&quot; doesn&#39;t cover it."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":1,"creation_date":1484328780,"post_id":39005452,"comment_id":70480392,"body_markdown":"@GarretWilson You should post a new question instead of commenting on this answer. It will help fleshing out your use-case.","body":"@GarretWilson You should post a new question instead of commenting on this answer. It will help fleshing out your use-case."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1484342507,"post_id":39005452,"comment_id":70487100,"body_markdown":"I would, if only I had the time. I thought that would be better than nothing.","body":"I would, if only I had the time. I thought that would be better than nothing."},{"owner":{"account_id":1259218,"reputation":2475,"user_id":1218010,"display_name":"Ajax"},"score":10,"creation_date":1485291009,"post_id":39005452,"comment_id":70862673,"body_markdown":"Also, when it comes to collections, there is a distinct difference between an empty collection and no collection.  For example, a cache.  Was it a cache miss?  empty optional / null.  Was there a cache hit that happens to be an empty collection? full optional / collection.","body":"Also, when it comes to collections, there is a distinct difference between an empty collection and no collection.  For example, a cache.  Was it a cache miss?  empty optional / null.  Was there a cache hit that happens to be an empty collection? full optional / collection."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":2,"creation_date":1485315068,"post_id":39005452,"comment_id":70870660,"body_markdown":"@Ajax I think you&#39;re misunderstanding the article. They are quoting a point advocated by the [Effective Java](https://www.amazon.ca/Effective-Java-2nd-Joshua-Bloch/dp/0321356683) book, which says that when a method return type is a Collection (not an arbitrary object as a cache would return) then you should favor returning an empty collection instead of `null` or `Optional`.","body":"@Ajax I think you&#39;re misunderstanding the article. They are quoting a point advocated by the <a href=\"https://www.amazon.ca/Effective-Java-2nd-Joshua-Bloch/dp/0321356683\" rel=\"nofollow noreferrer\">Effective Java</a> book, which says that when a method return type is a Collection (not an arbitrary object as a cache would return) then you should favor returning an empty collection instead of <code>null</code> or <code>Optional</code>."},{"owner":{"account_id":1259218,"reputation":2475,"user_id":1218010,"display_name":"Ajax"},"score":6,"creation_date":1485353263,"post_id":39005452,"comment_id":70890987,"body_markdown":"Sure, you should _favor_ it, but you don&#39;t always have control over some code, and, in a very real sense, you may want to differentiate between &quot;there is a value and it is an empty collection&quot; versus &quot;there is no value defined (yet)&quot;.  Since &quot;magic null&quot; is also a discouraged practice, it is up to you, the developer, to chose the least bad option.  I prefer empty optional to represent a cache miss instead of an empty collection, since the actual cached value may *be* an empty collection.","body":"Sure, you should <i>favor</i> it, but you don&#39;t always have control over some code, and, in a very real sense, you may want to differentiate between &quot;there is a value and it is an empty collection&quot; versus &quot;there is no value defined (yet)&quot;.  Since &quot;magic null&quot; is also a discouraged practice, it is up to you, the developer, to chose the least bad option.  I prefer empty optional to represent a cache miss instead of an empty collection, since the actual cached value may <i>be</i> an empty collection."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":2,"creation_date":1485359796,"post_id":39005452,"comment_id":70895752,"body_markdown":"@Ajax The article doesn&#39;t disagree. You should favor returning empty collections unless you have a good reason not to. In your case, you have a good reason not to.","body":"@Ajax The article doesn&#39;t disagree. You should favor returning empty collections unless you have a good reason not to. In your case, you have a good reason not to."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":2,"creation_date":1490265520,"post_id":39005452,"comment_id":73039373,"body_markdown":"I just wonder how method overloading would be for two or three optional parameters...  Uncle Bob still wouldn’t be proud.","body":"I just wonder how method overloading would be for two or three optional parameters...  Uncle Bob still wouldn’t be proud."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":1,"creation_date":1490273542,"post_id":39005452,"comment_id":73045087,"body_markdown":"@CarlosHeuberger I would advocate the use of the builder pattern when you have many optional parameters.","body":"@CarlosHeuberger I would advocate the use of the builder pattern when you have many optional parameters."},{"owner":{"account_id":2299435,"reputation":9252,"user_id":4451732,"accept_rate":75,"display_name":"Franklin Yu"},"score":0,"creation_date":1510070715,"post_id":39005452,"comment_id":81274374,"body_markdown":"How about two optional parameters with same class? Like `String key` and `String value`. What if user only want to provide `value`?","body":"How about two optional parameters with same class? Like <code>String key</code> and <code>String value</code>. What if user only want to provide <code>value</code>?"},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":2,"creation_date":1510071415,"post_id":39005452,"comment_id":81274856,"body_markdown":"@FranklinYu Static factory methods or the builder pattern are probably appropriate in your case.","body":"@FranklinYu Static factory methods or the builder pattern are probably appropriate in your case."},{"owner":{"account_id":1230617,"reputation":420,"user_id":1195309,"accept_rate":83,"display_name":"hdkrus"},"score":0,"creation_date":1534080253,"post_id":39005452,"comment_id":90573547,"body_markdown":"I don&#39;t see Optionals as a distraction in code, actually provides clarity. That&#39;s because it states in the contract of the method that an argument value may or not be passed and the method considers that possibility. As opposed to for example having an argument with plain type (as String), in such case we don&#39;t know if method checks for null or just throws an exception(breaking the natural flow of execution).","body":"I don&#39;t see Optionals as a distraction in code, actually provides clarity. That&#39;s because it states in the contract of the method that an argument value may or not be passed and the method considers that possibility. As opposed to for example having an argument with plain type (as String), in such case we don&#39;t know if method checks for null or just throws an exception(breaking the natural flow of execution)."},{"owner":{"account_id":1396489,"reputation":554,"user_id":1326149,"display_name":"digital_infinity"},"score":1,"creation_date":1589211194,"post_id":39005452,"comment_id":109196315,"body_markdown":"@hdkrus if you use overloading you don&#39;t need to check anything in implementing code. You just state explicitly that your method can be called with a parameter or without it. As a bonus you have a best error check the one at compile time.","body":"@hdkrus if you use overloading you don&#39;t need to check anything in implementing code. You just state explicitly that your method can be called with a parameter or without it. As a bonus you have a best error check the one at compile time."},{"owner":{"account_id":1230617,"reputation":420,"user_id":1195309,"accept_rate":83,"display_name":"hdkrus"},"score":0,"creation_date":1589687083,"post_id":39005452,"comment_id":109389934,"body_markdown":"@digital_infinity if you use overloading then you&#39;ll have:\n\n1. to repeat code (when you have the argument or not) for each method overload or\n\n2. to pass a null value from the overloaded method without the argument, which would imply you accept nulls in the method with the argument. The whole point here with Optionals is having a readable contract in for arguments allowing null values.","body":"@digital_infinity if you use overloading then you&#39;ll have:  1. to repeat code (when you have the argument or not) for each method overload or  2. to pass a null value from the overloaded method without the argument, which would imply you accept nulls in the method with the argument. The whole point here with Optionals is having a readable contract in for arguments allowing null values."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":1,"creation_date":1589777858,"post_id":39005452,"comment_id":109417492,"body_markdown":"@hdkrus You seem to be conflating absent values with null. The goal isn&#39;t &quot;null&quot;. The goal is for methods to assign a default value to absent parameters. In my experience, default values are never null. Even if they are null for some reason, the constructor you&#39;d delegate to would be private. Meaning, the use of &quot;null&quot; is an implementation detail. Users would never get to pass in null themselves.","body":"@hdkrus You seem to be conflating absent values with null. The goal isn&#39;t &quot;null&quot;. The goal is for methods to assign a default value to absent parameters. In my experience, default values are never null. Even if they are null for some reason, the constructor you&#39;d delegate to would be private. Meaning, the use of &quot;null&quot; is an implementation detail. Users would never get to pass in null themselves."},{"owner":{"account_id":1230617,"reputation":420,"user_id":1195309,"accept_rate":83,"display_name":"hdkrus"},"score":0,"creation_date":1589829903,"post_id":39005452,"comment_id":109444059,"body_markdown":"@Gili The thing is that absence of values is not the same that default values either, right now the only true approach to absence of values is &quot;optional&quot; values which is achieved perfectly with Optional type (similarity in the name is not coincidence). The only way to achieve this without Optional would be through default values and null is the common usage.","body":"@Gili The thing is that absence of values is not the same that default values either, right now the only true approach to absence of values is &quot;optional&quot; values which is achieved perfectly with Optional type (similarity in the name is not coincidence). The only way to achieve this without Optional would be through default values and null is the common usage."},{"owner":{"account_id":1396489,"reputation":554,"user_id":1326149,"display_name":"digital_infinity"},"score":0,"creation_date":1590074721,"post_id":39005452,"comment_id":109548086,"body_markdown":"@hdkrus the optionality (in optional value) means do something if this value is absent. Whether it is: do nothing or evaluate (set to) default value. Both of these could be perfectly modeled by overloading without using of null values in public class/interface API. If there is some place where something could be optionally set, maybe it is a place for derived class that must have this field set ?","body":"@hdkrus the optionality (in optional value) means do something if this value is absent. Whether it is: do nothing or evaluate (set to) default value. Both of these could be perfectly modeled by overloading without using of null values in public class/interface API. If there is some place where something could be optionally set, maybe it is a place for derived class that must have this field set ?"},{"owner":{"account_id":1230617,"reputation":420,"user_id":1195309,"accept_rate":83,"display_name":"hdkrus"},"score":0,"creation_date":1590103035,"post_id":39005452,"comment_id":109561621,"body_markdown":"@digital_infinity, the optional value here has exactly the same meaning that the English word &quot;Optional&quot; and the same meaning that the Option Monad in Functional Programming, and that&#39;s: 1. It might have a value, or 2. It might not. \nIt&#39;s up to you how you use this semantic in your code, you can asume it to have a default value or you can simply ignore it.","body":"@digital_infinity, the optional value here has exactly the same meaning that the English word &quot;Optional&quot; and the same meaning that the Option Monad in Functional Programming, and that&#39;s: 1. It might have a value, or 2. It might not.  It&#39;s up to you how you use this semantic in your code, you can asume it to have a default value or you can simply ignore it."},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":2,"creation_date":1601734142,"post_id":39005452,"comment_id":113500542,"body_markdown":"But what if there are 2 or 3 or 4 optional params, that means you overload the method multiple times.  It could be 2 ^ #ofParams variations.","body":"But what if there are 2 or 3 or 4 optional params, that means you overload the method multiple times.  It could be 2 ^ #ofParams variations."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1601834175,"post_id":39005452,"comment_id":113522362,"body_markdown":"@JoseMartinez Static factory methods or the builder pattern are probably more appropriate in your case.","body":"@JoseMartinez Static factory methods or the builder pattern are probably more appropriate in your case."},{"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"score":0,"creation_date":1601898955,"post_id":39005452,"comment_id":113539825,"body_markdown":"@Gil yeah but then the called method will have to do null checks on all the fields.  Its easier to use Optional in the implementation of the method being called, versus null checks.  Optionals allow for a more fluid/functional/clean way of implementing the method.","body":"@Gil yeah but then the called method will have to do null checks on all the fields.  Its easier to use Optional in the implementation of the method being called, versus null checks.  Optionals allow for a more fluid/functional/clean way of implementing the method."}],"tags":[],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":22,"down_vote_count":9,"up_vote_count":231,"is_accepted":false,"score":222,"last_activity_date":1526944746,"creation_date":1471464714,"answer_id":39005452,"question_id":31922866,"body_markdown":"The [best post][1] I&#39;ve seen on the topic was written by [Daniel Olszewski](https://stackoverflow.com/users/1487809/daniel-olszewski):\r\n\r\n&gt; Although it might be tempting to consider Optional for not mandatory method parameters, such a solution pale in comparison with other possible alternatives. To illustrate the problem, examine the following constructor declaration:\r\n&gt; \r\n&gt;     public SystemMessage(String title, String content, Optional&lt;Attachment&gt; attachment) {\r\n&gt;         // assigning field values\r\n&gt;     }\r\n&gt; \r\n&gt; At first glance it may look as a right design decision. After all, we\r\n&gt; explicitly marked the attachment parameter as optional. However, as\r\n&gt; for calling the constructor, client code can become a little bit\r\n&gt; clumsy.\r\n&gt; \r\n&gt;     SystemMessage withoutAttachment = new SystemMessage(&quot;title&quot;, &quot;content&quot;, Optional.empty());\r\n&gt;     Attachment attachment = new Attachment();\r\n&gt;     SystemMessage withAttachment = new SystemMessage(&quot;title&quot;, &quot;content&quot;, Optional.ofNullable(attachment));\r\n&gt; \r\n&gt; Instead of providing clarity, the factory methods of the Optional\r\n&gt; class only distract the reader. Note there’s only one optional\r\n&gt; parameter, but imagine having two or three. Uncle Bob definitely\r\n&gt; wouldn’t be proud of such code &#128521;\r\n&gt; \r\n&gt; **When a method can accept optional parameters, it’s preferable to adopt the well-proven approach and design such case using method\r\n&gt; overloading.** In the example of the SystemMessage class, declaring\r\n&gt; two separate constructors are superior to using Optional.\r\n&gt; \r\n&gt;     public SystemMessage(String title, String content) {\r\n&gt;         this(title, content, null);\r\n&gt;     }\r\n&gt;     \r\n&gt;     public SystemMessage(String title, String content, Attachment attachment) {\r\n&gt;         // assigning field values\r\n&gt;     }\r\n&gt; \r\n&gt; That change makes client code much simpler and easier to read.\r\n&gt; \r\n&gt;     SystemMessage withoutAttachment = new SystemMessage(&quot;title&quot;, &quot;content&quot;);\r\n&gt;     Attachment attachment = new Attachment();\r\n&gt;     SystemMessage withAttachment = new SystemMessage(&quot;title&quot;, &quot;content&quot;, attachment);\r\n\r\n\r\n  [1]: http://dolszewski.com/java/java-8-optional-use-cases/","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>The <a href=\"http://dolszewski.com/java/java-8-optional-use-cases/\" rel=\"noreferrer\">best post</a> I've seen on the topic was written by <a href=\"https://stackoverflow.com/users/1487809/daniel-olszewski\">Daniel Olszewski</a>:</p>\n\n<blockquote>\n  <p>Although it might be tempting to consider Optional for not mandatory method parameters, such a solution pale in comparison with other possible alternatives. To illustrate the problem, examine the following constructor declaration:</p>\n\n<pre><code>public SystemMessage(String title, String content, Optional&lt;Attachment&gt; attachment) {\n    // assigning field values\n}\n</code></pre>\n  \n  <p>At first glance it may look as a right design decision. After all, we\n  explicitly marked the attachment parameter as optional. However, as\n  for calling the constructor, client code can become a little bit\n  clumsy.</p>\n\n<pre><code>SystemMessage withoutAttachment = new SystemMessage(\"title\", \"content\", Optional.empty());\nAttachment attachment = new Attachment();\nSystemMessage withAttachment = new SystemMessage(\"title\", \"content\", Optional.ofNullable(attachment));\n</code></pre>\n  \n  <p>Instead of providing clarity, the factory methods of the Optional\n  class only distract the reader. Note there’s only one optional\n  parameter, but imagine having two or three. Uncle Bob definitely\n  wouldn’t be proud of such code 😉</p>\n  \n  <p><strong>When a method can accept optional parameters, it’s preferable to adopt the well-proven approach and design such case using method\n  overloading.</strong> In the example of the SystemMessage class, declaring\n  two separate constructors are superior to using Optional.</p>\n\n<pre><code>public SystemMessage(String title, String content) {\n    this(title, content, null);\n}\n\npublic SystemMessage(String title, String content, Attachment attachment) {\n    // assigning field values\n}\n</code></pre>\n  \n  <p>That change makes client code much simpler and easier to read.</p>\n\n<pre><code>SystemMessage withoutAttachment = new SystemMessage(\"title\", \"content\");\nAttachment attachment = new Attachment();\nSystemMessage withAttachment = new SystemMessage(\"title\", \"content\", attachment);\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":220750,"reputation":83,"user_id":2038419,"display_name":"Swaraj Yadav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1476433980,"creation_date":1476433980,"answer_id":40038584,"question_id":31922866,"body_markdown":"One more approach, what you can do is \r\n\r\n    // get your optionals first\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n\r\n    // bind values to a function\r\n    Supplier&lt;Integer&gt; calculatedValueSupplier = () -&gt; { // your logic here using both optional as state}\r\n\r\nOnce you have built a function(supplier in this case) you will be able to pass this around as any other variable and would be able to call it using\r\n\r\n    calculatedValueSupplier.apply();\r\n\r\nThe idea here being whether you have got optional value or not will be internal detail of your function and will not be in parameter. Thinking functions when thinking about optional as parameter is actually very useful technique that I have found.\r\n\r\nAs to your question whether you should actually do it or not is based on your preference, but as others said it makes your API ugly to say the least.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>One more approach, what you can do is </p>\n\n<pre><code>// get your optionals first\nOptional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\n\n// bind values to a function\nSupplier&lt;Integer&gt; calculatedValueSupplier = () -&gt; { // your logic here using both optional as state}\n</code></pre>\n\n<p>Once you have built a function(supplier in this case) you will be able to pass this around as any other variable and would be able to call it using</p>\n\n<pre><code>calculatedValueSupplier.apply();\n</code></pre>\n\n<p>The idea here being whether you have got optional value or not will be internal detail of your function and will not be in parameter. Thinking functions when thinking about optional as parameter is actually very useful technique that I have found.</p>\n\n<p>As to your question whether you should actually do it or not is based on your preference, but as others said it makes your API ugly to say the least.</p>\n"},{"tags":[],"owner":{"account_id":96378,"reputation":1682,"user_id":261984,"accept_rate":62,"display_name":"Eddy"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1481292826,"creation_date":1481292826,"answer_id":41062364,"question_id":31922866,"body_markdown":"My take is that Optional should be a Monad and these are not conceivable in Java.\r\n\r\nIn functional programming you deal with pure and higher order functions that take and compose their arguments only based on their &quot;business domain type&quot;. Composing functions that feed on, or whose computation should be reported to, the real-world (so called side effects) requires the application of functions that take care of automatically unpacking the values out of the monads representing the outside world (State, Configuration, Futures, Maybe, Either, Writer, etc...); this is called lifting. You can think of it as a kind of separation of concerns.\r\n\r\nMixing these two levels of abstraction doesn&#39;t facilitate legibility so you&#39;re better off just avoiding it.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>My take is that Optional should be a Monad and these are not conceivable in Java.</p>\n\n<p>In functional programming you deal with pure and higher order functions that take and compose their arguments only based on their \"business domain type\". Composing functions that feed on, or whose computation should be reported to, the real-world (so called side effects) requires the application of functions that take care of automatically unpacking the values out of the monads representing the outside world (State, Configuration, Futures, Maybe, Either, Writer, etc...); this is called lifting. You can think of it as a kind of separation of concerns.</p>\n\n<p>Mixing these two levels of abstraction doesn't facilitate legibility so you're better off just avoiding it.</p>\n"},{"comments":[{"owner":{"account_id":1230617,"reputation":420,"user_id":1195309,"accept_rate":83,"display_name":"hdkrus"},"score":2,"creation_date":1534080594,"post_id":42783884,"comment_id":90573640,"body_markdown":"I think that&#39;s not a good reason. The same logic could be applied for checking if param is null when not optional is used. Actually, the `if(param.isPresent())` is not the best approach to use Optional, instead you may use: `param.forEach(() -&gt; {...})`","body":"I think that&#39;s not a good reason. The same logic could be applied for checking if param is null when not optional is used. Actually, the <code>if(param.isPresent())</code> is not the best approach to use Optional, instead you may use: <code>param.forEach(() -&gt; {...})</code>"},{"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"score":0,"creation_date":1534084025,"post_id":42783884,"comment_id":90574443,"body_markdown":"I don’t like the idea of passing nullable params neither. Anyway, I said you could favor, of course there are exceptions you may use it, it’s up to you, just use it carefully, that’s all. There isn’t any rule which applies for all the scenarios.","body":"I don’t like the idea of passing nullable params neither. Anyway, I said you could favor, of course there are exceptions you may use it, it’s up to you, just use it carefully, that’s all. There isn’t any rule which applies for all the scenarios."}],"tags":[],"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"comment_count":2,"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1489488468,"creation_date":1489488468,"answer_id":42783884,"question_id":31922866,"body_markdown":"Another reason to be carefully when pass an `Optional` as parameter is that a method should do one thing... If you pass an `Optional` param you could favor do more than one thing, it could be similar to pass a boolean param.\r\n\r\n    public void method(Optional&lt;MyClass&gt; param) {\r\n         if(param.isPresent()) {\r\n             //do something\r\n         } else {\r\n             //do some other\r\n         }\r\n     }\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Another reason to be carefully when pass an <code>Optional</code> as parameter is that a method should do one thing... If you pass an <code>Optional</code> param you could favor do more than one thing, it could be similar to pass a boolean param.</p>\n\n<pre><code>public void method(Optional&lt;MyClass&gt; param) {\n     if(param.isPresent()) {\n         //do something\n     } else {\n         //do some other\n     }\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1316033,"reputation":7855,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"score":1,"creation_date":1604497189,"post_id":43937935,"comment_id":114364461,"body_markdown":"A good API designer always looks from the user perspective.  Perhaps it would be better to say this is API implementor vs API user :)","body":"A good API designer always looks from the user perspective.  Perhaps it would be better to say this is API implementor vs API user :)"}],"tags":[],"owner":{"account_id":1868561,"reputation":96,"user_id":1691457,"display_name":"Torsten"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1494592538,"creation_date":1494592538,"answer_id":43937935,"question_id":31922866,"body_markdown":"At first, I also preferred to pass Optionals as parameter, but if you switch from an API-Designer perspective to a API-User perspective, you see the disadvantages. \r\n\r\nFor your example, where each parameter is optional, I would suggest to change the calculation method into an own class like follows: \r\n\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n    \r\n    MyCalculator mc = new MyCalculator();\r\n    p1.map(mc::setP1);\r\n    p2.map(mc::setP2);\r\n    int result = mc.calculate();\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>At first, I also preferred to pass Optionals as parameter, but if you switch from an API-Designer perspective to a API-User perspective, you see the disadvantages. </p>\n\n<p>For your example, where each parameter is optional, I would suggest to change the calculation method into an own class like follows: </p>\n\n<pre><code>Optional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\n\nMyCalculator mc = new MyCalculator();\np1.map(mc::setP1);\np2.map(mc::setP2);\nint result = mc.calculate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5023471,"reputation":61,"user_id":4052827,"display_name":"Blair"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1509112457,"creation_date":1509112457,"answer_id":46976742,"question_id":31922866,"body_markdown":"I know that this question is more about opinion rather than hard facts. But I recently moved from being a .net developer to a java one, so I have only recently joined the Optional party. *Also, I&#39;d prefer to state this as a comment, but since my point level does not allow me to comment, I am forced to put this as an answer instead.*\r\n\r\nWhat I have been doing, which has served me well as a rule of thumb. Is to use Optionals for return types, and only use Optionals as parameters, if I require both the value of the Optional, and weather or not the Optional had a value within the method.\r\n\r\nIf I only care about the value, I check isPresent before calling the method, if I have some kind of logging or different logic within the method that depends on if the value exists, then I will happily pass in the Optional.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I know that this question is more about opinion rather than hard facts. But I recently moved from being a .net developer to a java one, so I have only recently joined the Optional party. <em>Also, I'd prefer to state this as a comment, but since my point level does not allow me to comment, I am forced to put this as an answer instead.</em></p>\n\n<p>What I have been doing, which has served me well as a rule of thumb. Is to use Optionals for return types, and only use Optionals as parameters, if I require both the value of the Optional, and weather or not the Optional had a value within the method.</p>\n\n<p>If I only care about the value, I check isPresent before calling the method, if I have some kind of logging or different logic within the method that depends on if the value exists, then I will happily pass in the Optional.</p>\n"},{"tags":[],"owner":{"account_id":11182,"reputation":13135,"user_id":21424,"accept_rate":70,"display_name":"gpilotino"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1519814819,"creation_date":1519814819,"answer_id":49027694,"question_id":31922866,"body_markdown":"Accepting Optional as parameters causes unnecessary wrapping at caller level.\r\n\r\nFor example in the case of:\r\n\r\n    public int calculateSomething(Optional&lt;String&gt; p1, Optional&lt;BigDecimal&gt; p2 {}\r\n\r\nSuppose you have two not-null strings (ie. returned from some other method):\r\n\r\n    String p1 = &quot;p1&quot;; \r\n    String p2 = &quot;p2&quot;;\r\n\r\nYou&#39;re forced to wrap them in Optional even if you know they are not Empty.\r\n\r\nThis get even worse when you have to compose with other &quot;mappable&quot; structures, ie. [Eithers](http://www.vavr.io/vavr-docs/#_either):\r\n\r\n    Either&lt;Error, String&gt; value = compute().right().map((s) -&gt; calculateSomething(\r\n    &lt; here you have to wrap the parameter in a Optional even if you know it&#39;s a \r\n      string &gt;));\r\n\r\nref:\r\n\r\n&gt; methods shouldn&#39;t expect Option as parameters, this is almost always a\r\n&gt; code smell that indicated a leakage of control flow from the caller to\r\n&gt; the callee, it should be responsibility of the caller to check the\r\n&gt; content of an Option\r\n\r\nref. https://github.com/teamdigitale/digital-citizenship-functions/pull/148#discussion_r170862749\r\n\r\n\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Accepting Optional as parameters causes unnecessary wrapping at caller level.</p>\n\n<p>For example in the case of:</p>\n\n<pre><code>public int calculateSomething(Optional&lt;String&gt; p1, Optional&lt;BigDecimal&gt; p2 {}\n</code></pre>\n\n<p>Suppose you have two not-null strings (ie. returned from some other method):</p>\n\n<pre><code>String p1 = \"p1\"; \nString p2 = \"p2\";\n</code></pre>\n\n<p>You're forced to wrap them in Optional even if you know they are not Empty.</p>\n\n<p>This get even worse when you have to compose with other \"mappable\" structures, ie. <a href=\"http://www.vavr.io/vavr-docs/#_either\" rel=\"noreferrer\">Eithers</a>:</p>\n\n<pre><code>Either&lt;Error, String&gt; value = compute().right().map((s) -&gt; calculateSomething(\n&lt; here you have to wrap the parameter in a Optional even if you know it's a \n  string &gt;));\n</code></pre>\n\n<p>ref:</p>\n\n<blockquote>\n  <p>methods shouldn't expect Option as parameters, this is almost always a\n  code smell that indicated a leakage of control flow from the caller to\n  the callee, it should be responsibility of the caller to check the\n  content of an Option</p>\n</blockquote>\n\n<p>ref. <a href=\"https://github.com/teamdigitale/digital-citizenship-functions/pull/148#discussion_r170862749\" rel=\"noreferrer\">https://github.com/teamdigitale/digital-citizenship-functions/pull/148#discussion_r170862749</a></p>\n"},{"tags":[],"owner":{"account_id":555014,"reputation":2838,"user_id":1061575,"accept_rate":17,"display_name":"speedogoo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1537322981,"creation_date":1537322981,"answer_id":52397027,"question_id":31922866,"body_markdown":"This is because we have different requirements to an API user and an API developer. \r\n\r\nA developer is responsible for providing a precise specification and a correct implementation. Therefore if the developer is already aware that an argument is optional the implementation must deal with it correctly, whether it being a null or an Optional. The API should be as simple as possible to the user, and null is the simplest.\r\n\r\nOn the other hand, the result is passed from the API developer to the user. However the specification is complete and verbose, there is still a chance that the user is either unaware of it or just lazy to deal with it. In this case, the Optional result forces the user to write some extra code to deal with a possible empty result.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>This is because we have different requirements to an API user and an API developer. </p>\n\n<p>A developer is responsible for providing a precise specification and a correct implementation. Therefore if the developer is already aware that an argument is optional the implementation must deal with it correctly, whether it being a null or an Optional. The API should be as simple as possible to the user, and null is the simplest.</p>\n\n<p>On the other hand, the result is passed from the API developer to the user. However the specification is complete and verbose, there is still a chance that the user is either unaware of it or just lazy to deal with it. In this case, the Optional result forces the user to write some extra code to deal with a possible empty result.</p>\n"},{"comments":[{"owner":{"account_id":5763746,"reputation":415,"user_id":5652258,"display_name":"Some Guy"},"score":2,"creation_date":1544428822,"post_id":52667906,"comment_id":94257792,"body_markdown":"Well, that&#39;s ONE of the reasons it was added to Java. There are plenty of others. Replacing long chains of nested &#39;if&#39; statements which traverse into a data structure with a single sequence of chained calls to Optional.map is my personal favorite. The Functional Languages programming world has many interesting uses for Optional besides simply replacing null checks like this.","body":"Well, that&#39;s ONE of the reasons it was added to Java. There are plenty of others. Replacing long chains of nested &#39;if&#39; statements which traverse into a data structure with a single sequence of chained calls to Optional.map is my personal favorite. The Functional Languages programming world has many interesting uses for Optional besides simply replacing null checks like this."}],"tags":[],"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538749864,"creation_date":1538749864,"answer_id":52667906,"question_id":31922866,"body_markdown":"First of all, if you&#39;re using method 3, you can replace those last 14 lines of code with this:\r\n\r\n`int result = myObject.calculateSomething(p1.orElse(null), p2.orElse(null));`\r\n\r\nThe four variations you wrote are *convenience* methods. You should only use them when they&#39;re more convenient. That&#39;s also the best approach. That way, the API is very clear which members are necessary and which aren&#39;t. If you don&#39;t want to write four methods, you can clarify things by how you name your parameters: \r\n\r\n`public int calculateSomething(String p1OrNull, BigDecimal p2OrNull)`\r\n\r\nThis way, it&#39;s clear that null values are allowed.\r\n\r\nYour use of `p1.orElse(null)` illustrates how verbose our code gets when using Optional, which is part of why I avoid it. Optional was written for functional programming. Streams need it. Your methods should probably never return Optional unless it&#39;s necessary to use them in functional programming. There are methods, like `Optional.flatMap()` method, that requires a reference to a function that returns Optional. Here&#39;s its signature:\r\n\r\n`public &lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, ? extends Optional&lt;? extends U&gt;&gt; mapper)`\r\n\r\nSo that&#39;s usually the only good reason for writing a method that returns Optional. But even there, it can be avoided. You can pass a getter that doesn&#39;t return Optional to a method like flatMap(), by wrapping it in a another method that converts the function to the right type. The wrapper method looks like this:\r\n\r\n\tpublic static &lt;T, U&gt; Function&lt;? super T, Optional&lt;U&gt;&gt; optFun(Function&lt;T, U&gt; function) {\r\n\t\treturn t -&gt; Optional.ofNullable(function.apply(t));\r\n\t}\r\n\r\nSo suppose you have a getter like this: `String getName()`\r\n\r\nYou can&#39;t pass it to flatMap like this: \r\n\r\n`opt.flatMap(Widget::getName) // Won&#39;t work!`\r\n\r\nBut you can pass it like this:\r\n\r\n`opt.flatMap(optFun(Widget::getName)) // Works great!`\r\n\r\nOutside of functional programming, Optionals should be avoided. \r\n\r\nBrian Goetz said it best when he said this:\r\n\r\nThe reason Optional was added to Java is because this:\r\n\r\n    return Arrays.asList(enclosingInfo.getEnclosingClass().getDeclaredMethods())\r\n        .stream()\r\n        .filter(m -&gt; Objects.equals(m.getName(), enclosingInfo.getName())\r\n        .filter(m -&gt;  Arrays.equals(m.getParameterTypes(), parameterClasses))\r\n        .filter(m -&gt; Objects.equals(m.getReturnType(), returnType))\r\n        .findFirst()\r\n        .getOrThrow(() -&gt; new InternalError(...));\r\n\r\nis cleaner than this:\r\n\r\n    Method matching =\r\n        Arrays.asList(enclosingInfo.getEnclosingClass().getDeclaredMethods())\r\n        .stream()\r\n        .filter(m -&gt; Objects.equals(m.getName(), enclosingInfo.getName())\r\n        .filter(m -&gt;  Arrays.equals(m.getParameterTypes(), parameterClasses))\r\n        .filter(m -&gt; Objects.equals(m.getReturnType(), returnType))\r\n        .getFirst();\r\n    if (matching == null)\r\n      throw new InternalError(&quot;Enclosing method not found&quot;);\r\n    return matching;\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>First of all, if you're using method 3, you can replace those last 14 lines of code with this:</p>\n\n<p><code>int result = myObject.calculateSomething(p1.orElse(null), p2.orElse(null));</code></p>\n\n<p>The four variations you wrote are <em>convenience</em> methods. You should only use them when they're more convenient. That's also the best approach. That way, the API is very clear which members are necessary and which aren't. If you don't want to write four methods, you can clarify things by how you name your parameters: </p>\n\n<p><code>public int calculateSomething(String p1OrNull, BigDecimal p2OrNull)</code></p>\n\n<p>This way, it's clear that null values are allowed.</p>\n\n<p>Your use of <code>p1.orElse(null)</code> illustrates how verbose our code gets when using Optional, which is part of why I avoid it. Optional was written for functional programming. Streams need it. Your methods should probably never return Optional unless it's necessary to use them in functional programming. There are methods, like <code>Optional.flatMap()</code> method, that requires a reference to a function that returns Optional. Here's its signature:</p>\n\n<p><code>public &lt;U&gt; Optional&lt;U&gt; flatMap(Function&lt;? super T, ? extends Optional&lt;? extends U&gt;&gt; mapper)</code></p>\n\n<p>So that's usually the only good reason for writing a method that returns Optional. But even there, it can be avoided. You can pass a getter that doesn't return Optional to a method like flatMap(), by wrapping it in a another method that converts the function to the right type. The wrapper method looks like this:</p>\n\n<pre><code>public static &lt;T, U&gt; Function&lt;? super T, Optional&lt;U&gt;&gt; optFun(Function&lt;T, U&gt; function) {\n    return t -&gt; Optional.ofNullable(function.apply(t));\n}\n</code></pre>\n\n<p>So suppose you have a getter like this: <code>String getName()</code></p>\n\n<p>You can't pass it to flatMap like this: </p>\n\n<p><code>opt.flatMap(Widget::getName) // Won't work!</code></p>\n\n<p>But you can pass it like this:</p>\n\n<p><code>opt.flatMap(optFun(Widget::getName)) // Works great!</code></p>\n\n<p>Outside of functional programming, Optionals should be avoided. </p>\n\n<p>Brian Goetz said it best when he said this:</p>\n\n<p>The reason Optional was added to Java is because this:</p>\n\n<pre><code>return Arrays.asList(enclosingInfo.getEnclosingClass().getDeclaredMethods())\n    .stream()\n    .filter(m -&gt; Objects.equals(m.getName(), enclosingInfo.getName())\n    .filter(m -&gt;  Arrays.equals(m.getParameterTypes(), parameterClasses))\n    .filter(m -&gt; Objects.equals(m.getReturnType(), returnType))\n    .findFirst()\n    .getOrThrow(() -&gt; new InternalError(...));\n</code></pre>\n\n<p>is cleaner than this:</p>\n\n<pre><code>Method matching =\n    Arrays.asList(enclosingInfo.getEnclosingClass().getDeclaredMethods())\n    .stream()\n    .filter(m -&gt; Objects.equals(m.getName(), enclosingInfo.getName())\n    .filter(m -&gt;  Arrays.equals(m.getParameterTypes(), parameterClasses))\n    .filter(m -&gt; Objects.equals(m.getReturnType(), returnType))\n    .getFirst();\nif (matching == null)\n  throw new InternalError(\"Enclosing method not found\");\nreturn matching;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9938679,"reputation":121,"user_id":7356068,"display_name":"Xiaolong"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1550680392,"creation_date":1548895618,"answer_id":54451798,"question_id":31922866,"body_markdown":"Check out the JavaDoc in JDK10, https://docs.oracle.com/javase/10/docs/api/java/util/Optional.html, an API note is added:\r\n&gt;API Note:\r\n&gt;Optional is primarily intended for use as a method return type where there is a clear need to represent &quot;no result,&quot; and where using null is likely to cause errors.\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Check out the JavaDoc in JDK10, <a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/Optional.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/10/docs/api/java/util/Optional.html</a>, an API note is added:</p>\n\n<blockquote>\n  <p>API Note:\n  Optional is primarily intended for use as a method return type where there is a clear need to represent \"no result,\" and where using null is likely to cause errors.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":19259266,"reputation":1853,"user_id":14075508,"display_name":"Alex Vergara"},"score":3,"creation_date":1637241063,"post_id":63007569,"comment_id":123776762,"body_markdown":"One of the best explanations related to the topic asked","body":"One of the best explanations related to the topic asked"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":1,"creation_date":1680939956,"post_id":63007569,"comment_id":133982013,"body_markdown":"You have to use the tools you have.  Until Oracle actually makes a `Maybe` this is the closest thing.","body":"You have to use the tools you have.  Until Oracle actually makes a <code>Maybe</code> this is the closest thing."}],"tags":[],"owner":{"account_id":309636,"reputation":2999,"user_id":622192,"accept_rate":100,"display_name":"drew"},"comment_count":2,"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1595306798,"creation_date":1595306798,"answer_id":63007569,"question_id":31922866,"body_markdown":"Let&#39;s make something perfectly clear: in other languages, there is no general recommendation against the use of a Maybe type as a field type, a constructor parameter type, a method parameter type, or a function parameter type. \r\n\r\nSo if you &quot;shouldn&#39;t&quot; use Optional as a parameter type in Java, the reason is **specific** to Optional, to Java, or to both. \r\n\r\nReasoning that might apply to other Maybe types, or other languages, is probably not valid here.\r\n\r\nPer [Brian Goetz][1], \r\n\r\n&gt; [W]e did have a clear\r\n&gt; intention when adding [Optional], and it was not to be a general\r\n&gt; purpose Maybe type, as much as many people would have liked us to do\r\n&gt; so. Our intention was to provide a limited mechanism for library\r\n&gt; method return types where there needed to be a clear way to represent\r\n&gt; &quot;no result&quot;, and using null for such was overwhelmingly likely to\r\n&gt; cause errors.\r\n&gt; \r\n&gt; For example, you probably should never use it for something that\r\n&gt; returns an array of results, or a list of results; instead return an\r\n&gt; empty array or list. You should almost never use it as a field of\r\n&gt; something or a method parameter.\r\n\r\nSo the answer is specific to Optional: it isn&#39;t &quot;a general purpose Maybe type&quot;; as such, it is limited, and it may be limited in ways that limit its usefulness as a field type or a parameter type.\r\n\r\nThat said, in practice, I&#39;ve rarely found using Optional as a field type or a parameter type to be an issue. If Optional, despite its limitations, works as a parameter type or a field type for your use case, use it.\r\n\r\n  [1]: https://stackoverflow.com/a/26328555","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Let's make something perfectly clear: in other languages, there is no general recommendation against the use of a Maybe type as a field type, a constructor parameter type, a method parameter type, or a function parameter type.</p>\n<p>So if you &quot;shouldn't&quot; use Optional as a parameter type in Java, the reason is <strong>specific</strong> to Optional, to Java, or to both.</p>\n<p>Reasoning that might apply to other Maybe types, or other languages, is probably not valid here.</p>\n<p>Per <a href=\"https://stackoverflow.com/a/26328555\">Brian Goetz</a>,</p>\n<blockquote>\n<p>[W]e did have a clear\nintention when adding [Optional], and it was not to be a general\npurpose Maybe type, as much as many people would have liked us to do\nso. Our intention was to provide a limited mechanism for library\nmethod return types where there needed to be a clear way to represent\n&quot;no result&quot;, and using null for such was overwhelmingly likely to\ncause errors.</p>\n<p>For example, you probably should never use it for something that\nreturns an array of results, or a list of results; instead return an\nempty array or list. You should almost never use it as a field of\nsomething or a method parameter.</p>\n</blockquote>\n<p>So the answer is specific to Optional: it isn't &quot;a general purpose Maybe type&quot;; as such, it is limited, and it may be limited in ways that limit its usefulness as a field type or a parameter type.</p>\n<p>That said, in practice, I've rarely found using Optional as a field type or a parameter type to be an issue. If Optional, despite its limitations, works as a parameter type or a field type for your use case, use it.</p>\n"},{"comments":[{"owner":{"account_id":1931877,"reputation":1731,"user_id":1741107,"accept_rate":60,"display_name":"Jasper Citi"},"score":0,"creation_date":1635480723,"post_id":64773593,"comment_id":123315214,"body_markdown":"Regarding the last paragraph, my convention is a post-fix `OrNull` for example `getUrlOrNull()` which is clear to the user that this method might potentially return a null.","body":"Regarding the last paragraph, my convention is a post-fix <code>OrNull</code> for example <code>getUrlOrNull()</code> which is clear to the user that this method might potentially return a null."},{"owner":{"account_id":2394647,"reputation":1087,"user_id":2093713,"display_name":"djtubig-malicex"},"score":0,"creation_date":1666162825,"post_id":64773593,"comment_id":130867326,"body_markdown":"Finally someone said it, use of Optional introduces a performance penalty.","body":"Finally someone said it, use of Optional introduces a performance penalty."}],"tags":[],"owner":{"account_id":999257,"reputation":2244,"user_id":1014479,"accept_rate":0,"display_name":"Dmitrii Semikin"},"comment_count":2,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1610369020,"creation_date":1605028633,"answer_id":64773593,"question_id":31922866,"body_markdown":"Maybe I will provoke a bunch of down-votes and negative comments, but... I cannot stand.\r\n\r\nDisclaimer: what I write below is not really an answer to the original question, but rather my thoughts on the topic. And the only source for it is my thoughts and my experience (with Java and other languages).\r\n\r\nFirst let&#39;s check, why would anyone like to use Optional at all?\r\n\r\nFor me the reason is simple: unlike other languages java does not have built-in capability to define variable (or type) as nullable or not. All &quot;object&quot;-variables are nullable and all primitive-types are not. For the sake of simplicity let&#39;t not consider primitive types in further discussion, so I will claim simply that all variables are nullable.\r\n\r\nWhy would one need to declare variables as nullable/non-nullable? Well, the reason for me is: explicit is always better, than implicit. Besides having explicit decoration (e.g. annotation or type) could help static analyzer (or compiler) to catch some null-pointer related issues.\r\n\r\nMany people argue in the comments above, that functions do not need to have nullable arguments. Instead overloads should be used. But such statement is only good in a school-book. In real life there are different situations. Consider class, which represents settings of some system, or personal data of some user, or in fact any composite data-structure, which contains lots of fields - many of those with repeated types, and some of the fields are mandatory while others are optional. In such cases inheritance/constructor overloads do not really help.\r\n\r\nRandom example: Let&#39;s say, we need to collect data about people. But some people don&#39;t want to provide all the data. And of course this is POD, so basically type with value-semantics, so I want it to be more or less immutable (no setters).\r\n\r\n```\r\nclass PersonalData {\r\n    private final String name; // mandatory\r\n    private final int age; // mandatory\r\n    private final Address homeAddress; // optional\r\n    private final PhoneNumber phoneNumber; // optional. Dedicated class to handle constraints\r\n    private final BigDecimal income; // optional.\r\n    // ... further fields\r\n\r\n    // How many constructor- (or factory-) overloads do we need to handle all cases\r\n    // without nullable arguments? If I am not mistaken, 8. And what if we have more optional\r\n    // fields?\r\n\r\n    // ...\r\n}\r\n``` \r\n\r\nSo, IMO discussion above shows, that even though mostly we can survive without nullable arguments, but sometimes it is not really feasible.\r\n\r\nNow we come to the problem: if some of the arguments are nullable and others are not, how do we know, which one?\r\n\r\nApproach 1: All arguments are nullable (according to java standrd, except primitive types). So we check all of them.\r\n\r\nResult: code explodes with checks, which are mostly unneeded, because as we discussed above almost all of the time we can go ahead with nullable variables, and only in some rare cases &quot;nullables&quot; are needed.\r\n\r\nApproach 2: Use documentation and/or comments to describe, which arguments/fields are nullable and which not.\r\n\r\nResult: It does not really work. People are lazy to write and read the docs. Besides lately the trend is, that we should avoid writing documentation in favor of making the code itself self-describing. Besides all the reasoning about modifying the code and forgeting to modify the documentation is still valid.\r\n\r\nApproach 3: @Nullable @NonNull etc... I personally find them to be nice. But there are certain disadvantages : (e.g. they are only respected by external tools, not the compiler), the worst of which is that they are not standard, which means, that 1. I would need to add external dependency to my project to benefit from them, and 2. The way they are treated by different systems are not uniform. As far as I know, they were voted out of official Java standard (and I don&#39;t know if there are any plans to try again).\r\n\r\nApproach 4: Optional&lt;&gt;. The disadvantages are already mentioned in other comments, the worst of which is (IMO) performance penalty. Also it adds a bit of boilerplate, even thoough I personally find, use of Optional.empty() and Optional.of() to be not so bad. The advantages are obvious: \r\n\r\n1. It is part of the Java standard. \r\n2. It makes obvious to the reader of the code (or to the user of API), that these arguments may be null. Moreover, it forces both: user of the API and developer of the method to aknolage this fact by explicitly wrapping/unwrapping the values (which is not the case, when annotations like @Nullable etc. are used).\r\n\r\nSo in my point, there is no black-and-white in regard of any methodology including this one. I personally ended up with the following guidelines and conventions (which are still not strict rules):\r\n\r\n1. Inside my own code all the variables must be not-null (but probably Optional&lt;&gt;).\r\n2. If I have a method with one or two optional arguments I try to redesign it using overloads, inheritance etc.\r\n3. If I cannot find the solution in reasonable time, I start thinking, if the performance is critical (i.e. if there are millions of the objects to be processed). Usually it is not the case.\r\n4. If not, I use Optional as argument types and/or field types.\r\n\r\nThere are still grey areas, where these conventions do not work:\r\n - We need high performance (e.g. processing of huge amounts of data, so that total execution time is very large, or situations when throughput is critical). In this cases performance penalty introduced by Optional may be really unwanted.\r\n - We are on the boundary of the code, which we write ourselves, e.g.: we read from the DB, Rest Endpoint, parse file etc.\r\n - Or we just use some external libraries, which do not follow our conventions, so again, we should be careful...\r\n\r\nBy the way, the last two cases can also be the source of need in the optional fields/arguments. I.e. when the structure of the data is not developed by ourselves, but is imposed by some external interfaces, db-schemas etc...\r\n\r\nAt the end, I think, that one should think about the problem, which is being solved, and try to find the appropriate tools. If Optional&lt;&gt; is appropriate, then I see no reason not to use it.\r\n\r\n**Edit**: Approach 5: I used this one recently, when I could not use `Optional`. The idea is simply to use naming convention for method arguments and class variables. I used &quot;maybe&quot;-prefix, so that if e.g. &quot;url&quot; argument is nullable, then it becomes `maybeUrl`. The advantage is that it slightly improves understandability of the intent (and does not have disadvantages of other approaches, like external dependencies or performance penalty). But there are also drawbacks, like: there is no tooling to support this convention (your IDE will not show you any warning, if you access &quot;maybe&quot;-variable without first checking it). Another problem is that it only helps, when applied consistently by all people working on the project.\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Maybe I will provoke a bunch of down-votes and negative comments, but... I cannot stand.</p>\n<p>Disclaimer: what I write below is not really an answer to the original question, but rather my thoughts on the topic. And the only source for it is my thoughts and my experience (with Java and other languages).</p>\n<p>First let's check, why would anyone like to use Optional at all?</p>\n<p>For me the reason is simple: unlike other languages java does not have built-in capability to define variable (or type) as nullable or not. All &quot;object&quot;-variables are nullable and all primitive-types are not. For the sake of simplicity let't not consider primitive types in further discussion, so I will claim simply that all variables are nullable.</p>\n<p>Why would one need to declare variables as nullable/non-nullable? Well, the reason for me is: explicit is always better, than implicit. Besides having explicit decoration (e.g. annotation or type) could help static analyzer (or compiler) to catch some null-pointer related issues.</p>\n<p>Many people argue in the comments above, that functions do not need to have nullable arguments. Instead overloads should be used. But such statement is only good in a school-book. In real life there are different situations. Consider class, which represents settings of some system, or personal data of some user, or in fact any composite data-structure, which contains lots of fields - many of those with repeated types, and some of the fields are mandatory while others are optional. In such cases inheritance/constructor overloads do not really help.</p>\n<p>Random example: Let's say, we need to collect data about people. But some people don't want to provide all the data. And of course this is POD, so basically type with value-semantics, so I want it to be more or less immutable (no setters).</p>\n<pre><code>class PersonalData {\n    private final String name; // mandatory\n    private final int age; // mandatory\n    private final Address homeAddress; // optional\n    private final PhoneNumber phoneNumber; // optional. Dedicated class to handle constraints\n    private final BigDecimal income; // optional.\n    // ... further fields\n\n    // How many constructor- (or factory-) overloads do we need to handle all cases\n    // without nullable arguments? If I am not mistaken, 8. And what if we have more optional\n    // fields?\n\n    // ...\n}\n</code></pre>\n<p>So, IMO discussion above shows, that even though mostly we can survive without nullable arguments, but sometimes it is not really feasible.</p>\n<p>Now we come to the problem: if some of the arguments are nullable and others are not, how do we know, which one?</p>\n<p>Approach 1: All arguments are nullable (according to java standrd, except primitive types). So we check all of them.</p>\n<p>Result: code explodes with checks, which are mostly unneeded, because as we discussed above almost all of the time we can go ahead with nullable variables, and only in some rare cases &quot;nullables&quot; are needed.</p>\n<p>Approach 2: Use documentation and/or comments to describe, which arguments/fields are nullable and which not.</p>\n<p>Result: It does not really work. People are lazy to write and read the docs. Besides lately the trend is, that we should avoid writing documentation in favor of making the code itself self-describing. Besides all the reasoning about modifying the code and forgeting to modify the documentation is still valid.</p>\n<p>Approach 3: @Nullable @NonNull etc... I personally find them to be nice. But there are certain disadvantages : (e.g. they are only respected by external tools, not the compiler), the worst of which is that they are not standard, which means, that 1. I would need to add external dependency to my project to benefit from them, and 2. The way they are treated by different systems are not uniform. As far as I know, they were voted out of official Java standard (and I don't know if there are any plans to try again).</p>\n<p>Approach 4: Optional&lt;&gt;. The disadvantages are already mentioned in other comments, the worst of which is (IMO) performance penalty. Also it adds a bit of boilerplate, even thoough I personally find, use of Optional.empty() and Optional.of() to be not so bad. The advantages are obvious:</p>\n<ol>\n<li>It is part of the Java standard.</li>\n<li>It makes obvious to the reader of the code (or to the user of API), that these arguments may be null. Moreover, it forces both: user of the API and developer of the method to aknolage this fact by explicitly wrapping/unwrapping the values (which is not the case, when annotations like @Nullable etc. are used).</li>\n</ol>\n<p>So in my point, there is no black-and-white in regard of any methodology including this one. I personally ended up with the following guidelines and conventions (which are still not strict rules):</p>\n<ol>\n<li>Inside my own code all the variables must be not-null (but probably Optional&lt;&gt;).</li>\n<li>If I have a method with one or two optional arguments I try to redesign it using overloads, inheritance etc.</li>\n<li>If I cannot find the solution in reasonable time, I start thinking, if the performance is critical (i.e. if there are millions of the objects to be processed). Usually it is not the case.</li>\n<li>If not, I use Optional as argument types and/or field types.</li>\n</ol>\n<p>There are still grey areas, where these conventions do not work:</p>\n<ul>\n<li>We need high performance (e.g. processing of huge amounts of data, so that total execution time is very large, or situations when throughput is critical). In this cases performance penalty introduced by Optional may be really unwanted.</li>\n<li>We are on the boundary of the code, which we write ourselves, e.g.: we read from the DB, Rest Endpoint, parse file etc.</li>\n<li>Or we just use some external libraries, which do not follow our conventions, so again, we should be careful...</li>\n</ul>\n<p>By the way, the last two cases can also be the source of need in the optional fields/arguments. I.e. when the structure of the data is not developed by ourselves, but is imposed by some external interfaces, db-schemas etc...</p>\n<p>At the end, I think, that one should think about the problem, which is being solved, and try to find the appropriate tools. If Optional&lt;&gt; is appropriate, then I see no reason not to use it.</p>\n<p><strong>Edit</strong>: Approach 5: I used this one recently, when I could not use <code>Optional</code>. The idea is simply to use naming convention for method arguments and class variables. I used &quot;maybe&quot;-prefix, so that if e.g. &quot;url&quot; argument is nullable, then it becomes <code>maybeUrl</code>. The advantage is that it slightly improves understandability of the intent (and does not have disadvantages of other approaches, like external dependencies or performance penalty). But there are also drawbacks, like: there is no tooling to support this convention (your IDE will not show you any warning, if you access &quot;maybe&quot;-variable without first checking it). Another problem is that it only helps, when applied consistently by all people working on the project.</p>\n"},{"tags":[],"owner":{"account_id":21861740,"reputation":21,"user_id":16152472,"display_name":"low_key"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1623059711,"creation_date":1623059711,"answer_id":67869531,"question_id":31922866,"body_markdown":"Using Optional as parameters might be useful in some use cases which involves protobufs or setting fields in a configuration object.\r\n\r\n```\r\npublic void setParameters(Optional&lt;A&gt; op1, Optional&lt;B&gt; op2) {\r\n    ProtoRequest.Builder builder = ProtoRequest.newBuilder();\r\n    op1.ifPresent(builder::setOp1);\r\n    op2.ifPresent(builder::setOp2);\r\n...\r\n}\r\n```\r\n\r\nI think in such cases it might be useful to have optional as parameters. API receiving the proto request would handle the different fields. \r\nIf a function is not doing additional computations on these parameters then using Optional might be simpler.\r\n\r\n```\r\npublic void setParameters(A op1, B op2) {\r\n    ProtoRequest.Builder builder = ProtoRequest.newBuilder();\r\n    if (op1 != null) {\r\n        builder.setOp1(op1);\r\n    }\r\n    if (op2 != null) {\r\n        builder.setOp2(op2);\r\n    }\r\n...\r\n}\r\n```\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Using Optional as parameters might be useful in some use cases which involves protobufs or setting fields in a configuration object.</p>\n<pre><code>public void setParameters(Optional&lt;A&gt; op1, Optional&lt;B&gt; op2) {\n    ProtoRequest.Builder builder = ProtoRequest.newBuilder();\n    op1.ifPresent(builder::setOp1);\n    op2.ifPresent(builder::setOp2);\n...\n}\n</code></pre>\n<p>I think in such cases it might be useful to have optional as parameters. API receiving the proto request would handle the different fields.\nIf a function is not doing additional computations on these parameters then using Optional might be simpler.</p>\n<pre><code>public void setParameters(A op1, B op2) {\n    ProtoRequest.Builder builder = ProtoRequest.newBuilder();\n    if (op1 != null) {\n        builder.setOp1(op1);\n    }\n    if (op2 != null) {\n        builder.setOp2(op2);\n    }\n...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3142408,"reputation":1,"user_id":2657616,"accept_rate":78,"display_name":"Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642659943,"creation_date":1642659599,"answer_id":70781610,"question_id":31922866,"body_markdown":"Irrespective of Java 8, Use old school method overloading technique to bring clarity and flexibility, suppose you have following method with two args\r\n\r\n    public void doSomething(arg1,arg2);\r\n\r\nin case you want to add additional optional parameter then overload the method\r\n\r\n    public void doSomething(arg1,arg2,arg3) {\r\n    Result result = doSomething(arg1,arg2);\r\n    // do additional working\r\n    }\r\n\r\n\r\n\r\n","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>Irrespective of Java 8, Use old school method overloading technique to bring clarity and flexibility, suppose you have following method with two args</p>\n<pre><code>public void doSomething(arg1,arg2);\n</code></pre>\n<p>in case you want to add additional optional parameter then overload the method</p>\n<pre><code>public void doSomething(arg1,arg2,arg3) {\nResult result = doSomething(arg1,arg2);\n// do additional working\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1429890,"reputation":6439,"user_id":1352530,"accept_rate":75,"display_name":"Whimusical"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644084011,"creation_date":1644084011,"answer_id":71000694,"question_id":31922866,"body_markdown":"A good example were Optional as arguments would be nice is JPA Repositories. Id love to do something like findByNameAndSurname(Optional&lt;String&gt;,Optional&lt;String&gt;). That way, if the Optional is empty, no WHERE param=y is performed","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>A good example were Optional as arguments would be nice is JPA Repositories. Id love to do something like findByNameAndSurname(Optional,Optional). That way, if the Optional is empty, no WHERE param=y is performed</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1679386443,"creation_date":1675500203,"answer_id":75343920,"question_id":31922866,"body_markdown":"So, if you would permit the pun, Oracle issued an oracle: \r\n\r\n&gt; Thou shalt not use `Optional` but for function return values.\r\n\r\nI love it how most of the answers so far are going along with the narrative of Oracle&#39;s oracle, which is re-iterated unquestioned all over the interwebz, in the &quot;many Web sites&quot; mentioned in the question. This is very typical of stack overflow: if something is allegedly supposed to be a certain way, and you ask why it is supposed to be that way, almost everyone will offer reasons why; almost nobody will question whether it should in fact be that way. \r\n\r\nSo, here is a dissenting opinion:\r\n\r\n&gt; You can completely eliminate `null` from your code base by using `Optional` ***everywhere***: not only in function return values, but also in function parameters, in class members, in array members, even in local variables.\r\n\r\nI have done it in a 100k-lines-of-code project. It worked.\r\n\r\nIf you decide to go along this path, then you will need to be thorough, so you will have a lot of work to do. The example mentioned in the accepted answer with `Optional.ofNulable()` should never occur, because if you are thorough, then you should not have `null` anywhere, and therefore no need for `Optional.ofNullable()`. In that 100k-lines-of-code project that I mentioned above, I have only used `Optional.ofNullable()` a couple of times when receiving results from external methods that I have no control over.\r\n\r\nNow, if you decide to go along this path, your solution will not be the most performant solution possible, because you will be allocating lots of instances of `Optional`. However:\r\n\r\n1. It is nothing but a runtime performance disadvantage.\r\n1. Although the disadvantage is non-negligible, it is also not severe.\r\n1. It is Java&#39;s problem, not your problem. \r\n\r\nLet me explain that last bit.\r\n\r\nJava does not offer explicit nullability of reference types as C# does (since version 8.0) so it is inferior in this regard. (I said &quot;in this regard&quot;; in other regards, Java is better; but that&#39;s off-topic right now.)\r\n\r\nThe only proper alternative to explicit nullability of reference types is the `Optional` type. (And it is arguably even slightly better, because with `Optional` you can indicate optional-of-optional if you must, whereas with explicit nullability you cannot have `ReferenceType??`, or at least you cannot in C# as it is currently implemented.)\r\n\r\n`Optional` does not *have to* add overhead, it only does so in Java. That&#39;s because Java also does not support true value types, as C# and Scala do. In this regard, Java is severely inferior to those languages. (Again, I said &quot;in this regard&quot;; in other regards, Java is better; but that&#39;s off-topic right now.) If Java did support true value types, then `Optional` would have been implemented as a single machine word, which would mean that the runtime overhead of using it would be zero. \r\n\r\nSo, the question that it ultimately boils down to is: \r\n\r\nDo you want perfect clarity and type safety in your code, or do you prefer maximum performance? \r\n\r\nI believe that for high-level languages, (of which Java certainly aims to be one,) this question was settled a long time ago.","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>So, if you would permit the pun, Oracle issued an oracle:</p>\n<blockquote>\n<p>Thou shalt not use <code>Optional</code> but for function return values.</p>\n</blockquote>\n<p>I love it how most of the answers so far are going along with the narrative of Oracle's oracle, which is re-iterated unquestioned all over the interwebz, in the &quot;many Web sites&quot; mentioned in the question. This is very typical of stack overflow: if something is allegedly supposed to be a certain way, and you ask why it is supposed to be that way, almost everyone will offer reasons why; almost nobody will question whether it should in fact be that way.</p>\n<p>So, here is a dissenting opinion:</p>\n<blockquote>\n<p>You can completely eliminate <code>null</code> from your code base by using <code>Optional</code> <em><strong>everywhere</strong></em>: not only in function return values, but also in function parameters, in class members, in array members, even in local variables.</p>\n</blockquote>\n<p>I have done it in a 100k-lines-of-code project. It worked.</p>\n<p>If you decide to go along this path, then you will need to be thorough, so you will have a lot of work to do. The example mentioned in the accepted answer with <code>Optional.ofNulable()</code> should never occur, because if you are thorough, then you should not have <code>null</code> anywhere, and therefore no need for <code>Optional.ofNullable()</code>. In that 100k-lines-of-code project that I mentioned above, I have only used <code>Optional.ofNullable()</code> a couple of times when receiving results from external methods that I have no control over.</p>\n<p>Now, if you decide to go along this path, your solution will not be the most performant solution possible, because you will be allocating lots of instances of <code>Optional</code>. However:</p>\n<ol>\n<li>It is nothing but a runtime performance disadvantage.</li>\n<li>Although the disadvantage is non-negligible, it is also not severe.</li>\n<li>It is Java's problem, not your problem.</li>\n</ol>\n<p>Let me explain that last bit.</p>\n<p>Java does not offer explicit nullability of reference types as C# does (since version 8.0) so it is inferior in this regard. (I said &quot;in this regard&quot;; in other regards, Java is better; but that's off-topic right now.)</p>\n<p>The only proper alternative to explicit nullability of reference types is the <code>Optional</code> type. (And it is arguably even slightly better, because with <code>Optional</code> you can indicate optional-of-optional if you must, whereas with explicit nullability you cannot have <code>ReferenceType??</code>, or at least you cannot in C# as it is currently implemented.)</p>\n<p><code>Optional</code> does not <em>have to</em> add overhead, it only does so in Java. That's because Java also does not support true value types, as C# and Scala do. In this regard, Java is severely inferior to those languages. (Again, I said &quot;in this regard&quot;; in other regards, Java is better; but that's off-topic right now.) If Java did support true value types, then <code>Optional</code> would have been implemented as a single machine word, which would mean that the runtime overhead of using it would be zero.</p>\n<p>So, the question that it ultimately boils down to is:</p>\n<p>Do you want perfect clarity and type safety in your code, or do you prefer maximum performance?</p>\n<p>I believe that for high-level languages, (of which Java certainly aims to be one,) this question was settled a long time ago.</p>\n"},{"tags":[],"owner":{"account_id":5533119,"reputation":7118,"user_id":5771750,"accept_rate":85,"display_name":"Chris Happy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682117138,"creation_date":1682117138,"answer_id":76077167,"question_id":31922866,"body_markdown":"## If wanting an optional primitive type, just use the primitive&#39;s class.\r\n\r\nFor those coming from a C++ background and got confused.\r\n\r\nE.g. for an optional `boolean`, use `Boolean`.\r\n\r\nThe biggest problem is that `Optional&lt;Boolean&gt;` itself could be set to null, so now you have three states instead of two.\r\n\r\nE.g. `Optional&lt;Boolean&gt;` can be (null, empty, or not-empty) but `Boolean` can only be (null or non-empty).","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<h2>If wanting an optional primitive type, just use the primitive's class.</h2>\n<p>For those coming from a C++ background and got confused.</p>\n<p>E.g. for an optional <code>boolean</code>, use <code>Boolean</code>.</p>\n<p>The biggest problem is that <code>Optional&lt;Boolean&gt;</code> itself could be set to null, so now you have three states instead of two.</p>\n<p>E.g. <code>Optional&lt;Boolean&gt;</code> can be (null, empty, or not-empty) but <code>Boolean</code> can only be (null or non-empty).</p>\n"},{"tags":[],"owner":{"account_id":3161504,"reputation":936,"user_id":2672500,"display_name":"Jean Spector"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682353876,"creation_date":1682353876,"answer_id":76094093,"question_id":31922866,"body_markdown":"I noticed that you mentioned a a number of approaches, and during the years since the question was asked, one alternative wasn&#39;t really explored - the `Builder` design pattern.\r\n\r\nThe idea is that with a builder you only set those parameters that you need, and it scales very well as the number of arguments grows (as opposed to overloading).\r\n\r\nHere&#39;s an example of a class you could use:\r\n\r\n```\r\npublic class Something {\r\n    private String p1;\r\n    private Integer p2;\r\n\r\n    private Something(String p1, Integer p2) {\r\n        this.p1 = p1;\r\n        this.p2 = p2;\r\n    }\r\n\r\n    public static class Builder {\r\n\r\n        private String p1;\r\n        private Integer p2;\r\n\r\n        public Builder setP1(String value) {\r\n            this.p1 = value;\r\n            return this;\r\n        }\r\n\r\n        public Builder setP2(Integer value) {\r\n            this.p2 = value;\r\n            return this;\r\n        }\r\n\r\n        public Something build() {\r\n            // Validate input and set defaults here\r\n\r\n            return new Something(p1, p2);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere&#39;s how you&#39;d use it:\r\n```\r\nvar something = Something.Builder().setP1(&quot;blah&quot;).setP2(12345).build();\r\ncalculate(something); // or something.calculate()\r\n```\r\n\r\nNow you may notice that the above implementation contains a fair amount of boilerplate code, which is its main downside. Having said that, there are libraries that eliminate it for you, e.g. [FreeBuilder](https://www.baeldung.com/java-builder-pattern-freebuilder), making the code short and tidy (relatively speaking - Java isn&#39;t known for its code compactness).","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I noticed that you mentioned a a number of approaches, and during the years since the question was asked, one alternative wasn't really explored - the <code>Builder</code> design pattern.</p>\n<p>The idea is that with a builder you only set those parameters that you need, and it scales very well as the number of arguments grows (as opposed to overloading).</p>\n<p>Here's an example of a class you could use:</p>\n<pre><code>public class Something {\n    private String p1;\n    private Integer p2;\n\n    private Something(String p1, Integer p2) {\n        this.p1 = p1;\n        this.p2 = p2;\n    }\n\n    public static class Builder {\n\n        private String p1;\n        private Integer p2;\n\n        public Builder setP1(String value) {\n            this.p1 = value;\n            return this;\n        }\n\n        public Builder setP2(Integer value) {\n            this.p2 = value;\n            return this;\n        }\n\n        public Something build() {\n            // Validate input and set defaults here\n\n            return new Something(p1, p2);\n        }\n    }\n}\n</code></pre>\n<p>Here's how you'd use it:</p>\n<pre><code>var something = Something.Builder().setP1(&quot;blah&quot;).setP2(12345).build();\ncalculate(something); // or something.calculate()\n</code></pre>\n<p>Now you may notice that the above implementation contains a fair amount of boilerplate code, which is its main downside. Having said that, there are libraries that eliminate it for you, e.g. <a href=\"https://www.baeldung.com/java-builder-pattern-freebuilder\" rel=\"nofollow noreferrer\">FreeBuilder</a>, making the code short and tidy (relatively speaking - Java isn't known for its code compactness).</p>\n"}],"owner":{"account_id":4858495,"reputation":6835,"user_id":3918862,"display_name":"Neil Stevens"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303927,"favorite_count":0,"down_vote_count":0,"up_vote_count":641,"accepted_answer_id":31923105,"answer_count":26,"score":641,"last_activity_date":1682353876,"creation_date":1439218680,"question_id":31922866,"body_markdown":"I&#39;ve read on many Web sites Optional should be used as a return type only, and not used in method arguments.  I&#39;m struggling to find a logical reason why.  For example I have a piece of logic which has 2 optional parameters.  Therefore I think it would make sense to write my method signature like this (solution 1):\r\n\r\n    public int calculateSomething(Optional&lt;String&gt; p1, Optional&lt;BigDecimal&gt; p2) {\r\n        // my logic\r\n    }\r\n\t\r\nMany web pages specify Optional should not be used as method arguments. With this in mind, I could use the following method signature and add a clear Javadoc comment to specify that the arguments may be null, hoping future maintainers will read the Javadoc and therefore always carry out null checks prior to using the arguments (solution 2):\r\n\r\n    public int calculateSomething(String p1, BigDecimal p2) {\r\n        // my logic\r\n    }\r\n\t\r\nAlternatively I could replace my method with four public methods to provide a nicer interface and make it more obvious p1 and p2 are optional (solution 3):\r\n\r\n    public int calculateSomething() {\r\n        calculateSomething(null, null);\r\n    }\r\n    \r\n    public int calculateSomething(String p1) {\r\n        calculateSomething(p1, null);\r\n    }\r\n\t\r\n    public int calculateSomething(BigDecimal p2) {\r\n        calculateSomething(null, p2);\r\n    }\r\n\t\r\n    public int calculateSomething(String p1, BigDecimal p2) {\r\n        // my logic\r\n    }\r\n\r\nNow I try writing the code of the class which invokes this piece of logic for each approach.  I first retrieve the two input parameters from another object which returns ``Optional``s and then, I invoke ``calculateSomething``.  Therefore, if solution 1 is used the calling code would look like this:\r\n\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n    int result = myObject.calculateSomething(p1, p2);\r\n\t\r\nif solution 2 is used, the calling code would look like this:\r\n\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n    int result = myObject.calculateSomething(p1.orElse(null), p2.orElse(null));\r\n\t\r\nif solution 3 is applied, I could use the code above or I could use the following (but it&#39;s significantly more code):\r\n\r\n    Optional&lt;String&gt; p1 = otherObject.getP1();\r\n    Optional&lt;BigInteger&gt; p2 = otherObject.getP2();\r\n    int result;\r\n    if (p1.isPresent()) {\r\n        if (p2.isPresent()) {\r\n            result = myObject.calculateSomething(p1, p2);\r\n        } else {\r\n            result = myObject.calculateSomething(p1);\r\n        }\r\n    } else {\r\n        if (p2.isPresent()) {\r\n            result = myObject.calculateSomething(p2);\r\n        } else {\r\n            result = myObject.calculateSomething();\r\n        }\r\n    }\r\n\t\r\n**So my question is: Why is it considered bad practice to use ``Optional``s as method arguments (see solution 1)?**  It looks like the most readable solution to me and makes it most obvious that the parameters could be empty/null to future maintainers.  (I&#39;m aware the designers of ``Optional`` intended it to only be used as a return type, but I can&#39;t find any logical reasons not to use it in this scenario).","title":"Why should Java 8&#39;s Optional not be used in arguments","body":"<p>I've read on many Web sites Optional should be used as a return type only, and not used in method arguments.  I'm struggling to find a logical reason why.  For example I have a piece of logic which has 2 optional parameters.  Therefore I think it would make sense to write my method signature like this (solution 1):</p>\n<pre><code>public int calculateSomething(Optional&lt;String&gt; p1, Optional&lt;BigDecimal&gt; p2) {\n    // my logic\n}\n</code></pre>\n<p>Many web pages specify Optional should not be used as method arguments. With this in mind, I could use the following method signature and add a clear Javadoc comment to specify that the arguments may be null, hoping future maintainers will read the Javadoc and therefore always carry out null checks prior to using the arguments (solution 2):</p>\n<pre><code>public int calculateSomething(String p1, BigDecimal p2) {\n    // my logic\n}\n</code></pre>\n<p>Alternatively I could replace my method with four public methods to provide a nicer interface and make it more obvious p1 and p2 are optional (solution 3):</p>\n<pre><code>public int calculateSomething() {\n    calculateSomething(null, null);\n}\n\npublic int calculateSomething(String p1) {\n    calculateSomething(p1, null);\n}\n\npublic int calculateSomething(BigDecimal p2) {\n    calculateSomething(null, p2);\n}\n\npublic int calculateSomething(String p1, BigDecimal p2) {\n    // my logic\n}\n</code></pre>\n<p>Now I try writing the code of the class which invokes this piece of logic for each approach.  I first retrieve the two input parameters from another object which returns <code>Optional</code>s and then, I invoke <code>calculateSomething</code>.  Therefore, if solution 1 is used the calling code would look like this:</p>\n<pre><code>Optional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\nint result = myObject.calculateSomething(p1, p2);\n</code></pre>\n<p>if solution 2 is used, the calling code would look like this:</p>\n<pre><code>Optional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\nint result = myObject.calculateSomething(p1.orElse(null), p2.orElse(null));\n</code></pre>\n<p>if solution 3 is applied, I could use the code above or I could use the following (but it's significantly more code):</p>\n<pre><code>Optional&lt;String&gt; p1 = otherObject.getP1();\nOptional&lt;BigInteger&gt; p2 = otherObject.getP2();\nint result;\nif (p1.isPresent()) {\n    if (p2.isPresent()) {\n        result = myObject.calculateSomething(p1, p2);\n    } else {\n        result = myObject.calculateSomething(p1);\n    }\n} else {\n    if (p2.isPresent()) {\n        result = myObject.calculateSomething(p2);\n    } else {\n        result = myObject.calculateSomething();\n    }\n}\n</code></pre>\n<p><strong>So my question is: Why is it considered bad practice to use <code>Optional</code>s as method arguments (see solution 1)?</strong>  It looks like the most readable solution to me and makes it most obvious that the parameters could be empty/null to future maintainers.  (I'm aware the designers of <code>Optional</code> intended it to only be used as a return type, but I can't find any logical reasons not to use it in this scenario).</p>\n"},{"tags":["java","docker","docker-compose","rabbitmq"],"comments":[{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1682353955,"post_id":76094022,"comment_id":134198292,"body_markdown":"&quot;factory.setPort(5673);&quot; you sure that&#39;s the correct port?  [Normally](https://www.rabbitmq.com/networking.html) it would be 5672 but you can configure rabbit to listen on something else.  make sure they both match. Connection refused means you could reach the server but it&#39;s not listening on that port","body":"&quot;factory.setPort(5673);&quot; you sure that&#39;s the correct port?  <a href=\"https://www.rabbitmq.com/networking.html\" rel=\"nofollow noreferrer\">Normally</a> it would be 5672 but you can configure rabbit to listen on something else.  make sure they both match. Connection refused means you could reach the server but it&#39;s not listening on that port"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1682354400,"post_id":76094022,"comment_id":134198395,"body_markdown":"To communicate between docker containers, you use the original port of the image, not the rebound port, that is you need to use port 5672, not 5673.","body":"To communicate between docker containers, you use the original port of the image, not the rebound port, that is you need to use port 5672, not 5673."}],"owner":{"account_id":11475744,"reputation":205,"user_id":8411319,"display_name":"Radu Aramă"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682353440,"creation_date":1682353440,"question_id":76094022,"body_markdown":"I have a Java container which has to fetch messages from a RabbitMQ container. This is the code I am using in order to connect to it (I have:\r\n\r\n    ConnectionFactory factory = new ConnectionFactory();\r\n        factory.setHost(&quot;rabbit2&quot;);\r\n        factory.setPort(5673);\r\n        factory.setUsername(&quot;guest&quot;);\r\n        factory.setPassword(&quot;guest&quot;);\r\n    \r\n        log.info(&quot;Got here!&quot;);\r\n    \r\n        Connection connection = null;\r\n    \r\n        try {\r\n          connection = factory.newConnection(&quot;Connection1&quot;);\r\n        } catch (Exception e) {\r\n          log.error(e.getMessage(), e);\r\n          throw e;\r\n        }\r\n\r\nThis is the library I am using:\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\r\n                &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n\r\nThe hostname of the rabbitmq container was configured to be rabbit2. I am using docker compose.\r\nThis is the config for the rabbit mq instance:\r\n\r\n    output_mb:\r\n        image: rabbitmq:3-management\r\n        hostname: rabbit2\r\n        container_name: output_mb\r\n        ports:\r\n            - 5673:5672\r\n            - 15673:15672\r\n        volumes:\r\n            - &quot;./output_mb/rabbitmq.config:/etc/rabbitmq/rabbitmq.config&quot;\r\n            - &quot;./output_mb/definitions.json:/etc/rabbitmq/definitions.json&quot;\r\n        networks:\r\n            - common_network\r\n\r\nAnd this is the config for the java instance:\r\n\r\n    pollution_dashboard:\r\n        container_name: pollution_dashboard\r\n        image: pollution_dashboard:latest\r\n        restart: on-failure\r\n        hostname: pollution_dashboard\r\n        depends_on:\r\n            - input_mb\r\n            - output_mb\r\n        ports:\r\n            - 8080:8080\r\n        build:\r\n            context: ./pollution_dashboard/pollution_dashboard\r\n            dockerfile: ./Dockerfile\r\n        networks:\r\n            - common_network\r\n\r\nHowever, I keep getting **Connection refused** in my java service when I run my docker compose. There are other services in the stack as well that do not have issues communicating with the rabbitmq instance. (They are using other languages)\r\n\r\nWhat could be the problem?","title":"Connection refused when trying to connect to RabbitMQ docker container from Java docker container","body":"<p>I have a Java container which has to fetch messages from a RabbitMQ container. This is the code I am using in order to connect to it (I have:</p>\n<pre><code>ConnectionFactory factory = new ConnectionFactory();\n    factory.setHost(&quot;rabbit2&quot;);\n    factory.setPort(5673);\n    factory.setUsername(&quot;guest&quot;);\n    factory.setPassword(&quot;guest&quot;);\n\n    log.info(&quot;Got here!&quot;);\n\n    Connection connection = null;\n\n    try {\n      connection = factory.newConnection(&quot;Connection1&quot;);\n    } catch (Exception e) {\n      log.error(e.getMessage(), e);\n      throw e;\n    }\n</code></pre>\n<p>This is the library I am using:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.rabbitmq&lt;/groupId&gt;\n            &lt;artifactId&gt;amqp-client&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The hostname of the rabbitmq container was configured to be rabbit2. I am using docker compose.\nThis is the config for the rabbit mq instance:</p>\n<pre><code>output_mb:\n    image: rabbitmq:3-management\n    hostname: rabbit2\n    container_name: output_mb\n    ports:\n        - 5673:5672\n        - 15673:15672\n    volumes:\n        - &quot;./output_mb/rabbitmq.config:/etc/rabbitmq/rabbitmq.config&quot;\n        - &quot;./output_mb/definitions.json:/etc/rabbitmq/definitions.json&quot;\n    networks:\n        - common_network\n</code></pre>\n<p>And this is the config for the java instance:</p>\n<pre><code>pollution_dashboard:\n    container_name: pollution_dashboard\n    image: pollution_dashboard:latest\n    restart: on-failure\n    hostname: pollution_dashboard\n    depends_on:\n        - input_mb\n        - output_mb\n    ports:\n        - 8080:8080\n    build:\n        context: ./pollution_dashboard/pollution_dashboard\n        dockerfile: ./Dockerfile\n    networks:\n        - common_network\n</code></pre>\n<p>However, I keep getting <strong>Connection refused</strong> in my java service when I run my docker compose. There are other services in the stack as well that do not have issues communicating with the rabbitmq instance. (They are using other languages)</p>\n<p>What could be the problem?</p>\n"},{"tags":["java","activemq"],"comments":[{"owner":{"account_id":12201936,"reputation":414,"user_id":8906016,"display_name":"canillas"},"score":0,"creation_date":1517220428,"post_id":48498559,"comment_id":83990511,"body_markdown":"What about use `.values()`to get an array of all the enum constants? then you can do `myArray.get(myArray.size())`","body":"What about use <code>.values()</code>to get an array of all the enum constants? then you can do <code>myArray.get(myArray.size())</code>"},{"owner":{"account_id":6408735,"reputation":1656,"user_id":4969121,"accept_rate":58,"display_name":"Abhijeet Kale"},"score":0,"creation_date":1517220681,"post_id":48498559,"comment_id":83990705,"body_markdown":"@canillas Enumeration interface is different that Enum, Enumeration is similar to iterator. Enumeration does not have constants/values it iterates on a datastructure.","body":"@canillas Enumeration interface is different that Enum, Enumeration is similar to iterator. Enumeration does not have constants/values it iterates on a datastructure."}],"answers":[{"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1682350657,"post_id":48499018,"comment_id":134197516,"body_markdown":"This code _still_ has to &quot;browse&quot; the messages which will involve traversing all the messages in queue which is what the OP is trying to avoid.","body":"This code <i>still</i> has to &quot;browse&quot; the messages which will involve traversing all the messages in queue which is what the OP is trying to avoid."}],"tags":[],"owner":{"account_id":8694271,"reputation":3895,"user_id":6506229,"display_name":"Hassen Bennour"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1517221514,"creation_date":1517221514,"answer_id":48499018,"question_id":48498559,"body_markdown":"is JMX possible ??\r\nsee below example, you can order the messages as you want after loading them into a list.\r\n\r\n\r\n\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    \r\n    import javax.management.MBeanServerConnection;\r\n    import javax.management.MBeanServerInvocationHandler;\r\n    import javax.management.ObjectName;\r\n    import javax.management.remote.JMXConnector;\r\n    import javax.management.remote.JMXConnectorFactory;\r\n    import javax.management.remote.JMXServiceURL;\r\n    \r\n    import org.apache.activemq.broker.jmx.BrokerViewMBean;\r\n    import org.apache.activemq.broker.jmx.QueueViewMBean;\r\n    \r\n    public class JMXGetDestinationInfos {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tJMXServiceURL url = new JMXServiceURL(&quot;service:jmx:rmi:///jndi/rmi://host:1099/jmxrmi&quot;);\r\n    \t\tMap&lt;String, String[]&gt; env = new HashMap&lt;&gt;();\r\n    \t\tString[] creds = { &quot;admin&quot;, &quot;admin&quot; };\r\n    \t\tenv.put(JMXConnector.CREDENTIALS, creds);\r\n    \t\tJMXConnector jmxc = JMXConnectorFactory.connect(url, env);\r\n    \t\tMBeanServerConnection conn = jmxc.getMBeanServerConnection();\r\n    \r\n    \t\tObjectName activeMq = new ObjectName(&quot;org.apache.activemq:type=Broker,brokerName=localhost&quot;);\r\n    \r\n    \t\tBrokerViewMBean mbean = MBeanServerInvocationHandler.newProxyInstance(conn, activeMq, BrokerViewMBean.class,\r\n    \t\t\t\ttrue);\r\n    \t\tfor (ObjectName name : mbean.getQueues()) {\r\n    \t\t\tif ((&quot;TEST&quot;.equals(name.getKeyProperty(&quot;destinationName&quot;)))) {\r\n    \t\t\t\tQueueViewMBean queueMbean = MBeanServerInvocationHandler.newProxyInstance(conn, name,\r\n    \t\t\t\t\t\tQueueViewMBean.class, true);\r\n    \t\t\t\tList&lt;?&gt; messages = queueMbean.browseMessages();\r\n    \t\t\t\tSystem.out.println(messages.get(messages.size() -1));\r\n    \t\t\t\t\r\n    \t\t\t\tSystem.out.println(queueMbean.browseAsTable());\r\n    \t\t\t\tSystem.out.println(queueMbean.browseMessages());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nanother option if your counter is always available and connected is to use http://activemq.apache.org/advisory-message.html\r\n\r\n\r\n&gt; ActiveMQ.Advisory.MessageDelivered.Queue Message delivered to the\r\n&gt; broker.\r\n&gt; \r\n&gt; ActiveMQ.Advisory.MessageDelivered.Topic Message delivered to the\r\n&gt; broker.","title":"Get Last Inserted Message in ActiveMQ - Java","body":"<p>is JMX possible ??\nsee below example, you can order the messages as you want after loading them into a list.</p>\n\n<pre><code>import java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport javax.management.MBeanServerConnection;\nimport javax.management.MBeanServerInvocationHandler;\nimport javax.management.ObjectName;\nimport javax.management.remote.JMXConnector;\nimport javax.management.remote.JMXConnectorFactory;\nimport javax.management.remote.JMXServiceURL;\n\nimport org.apache.activemq.broker.jmx.BrokerViewMBean;\nimport org.apache.activemq.broker.jmx.QueueViewMBean;\n\npublic class JMXGetDestinationInfos {\n\n    public static void main(String[] args) throws Exception {\n        JMXServiceURL url = new JMXServiceURL(\"service:jmx:rmi:///jndi/rmi://host:1099/jmxrmi\");\n        Map&lt;String, String[]&gt; env = new HashMap&lt;&gt;();\n        String[] creds = { \"admin\", \"admin\" };\n        env.put(JMXConnector.CREDENTIALS, creds);\n        JMXConnector jmxc = JMXConnectorFactory.connect(url, env);\n        MBeanServerConnection conn = jmxc.getMBeanServerConnection();\n\n        ObjectName activeMq = new ObjectName(\"org.apache.activemq:type=Broker,brokerName=localhost\");\n\n        BrokerViewMBean mbean = MBeanServerInvocationHandler.newProxyInstance(conn, activeMq, BrokerViewMBean.class,\n                true);\n        for (ObjectName name : mbean.getQueues()) {\n            if ((\"TEST\".equals(name.getKeyProperty(\"destinationName\")))) {\n                QueueViewMBean queueMbean = MBeanServerInvocationHandler.newProxyInstance(conn, name,\n                        QueueViewMBean.class, true);\n                List&lt;?&gt; messages = queueMbean.browseMessages();\n                System.out.println(messages.get(messages.size() -1));\n\n                System.out.println(queueMbean.browseAsTable());\n                System.out.println(queueMbean.browseMessages());\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>another option if your counter is always available and connected is to use <a href=\"http://activemq.apache.org/advisory-message.html\" rel=\"nofollow noreferrer\">http://activemq.apache.org/advisory-message.html</a></p>\n\n<blockquote>\n  <p>ActiveMQ.Advisory.MessageDelivered.Queue Message delivered to the\n  broker.</p>\n  \n  <p>ActiveMQ.Advisory.MessageDelivered.Topic Message delivered to the\n  broker.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682353262,"creation_date":1682353262,"answer_id":76094005,"question_id":48498559,"body_markdown":"There&#39;s no way to fetch the last message in the queue without traversing all the other messages with a browser (or something like a browser).\r\n\r\nKeep in mind that a queue is not like a database table. You can&#39;t just pick out only the messages you want.","title":"Get Last Inserted Message in ActiveMQ - Java","body":"<p>There's no way to fetch the last message in the queue without traversing all the other messages with a browser (or something like a browser).</p>\n<p>Keep in mind that a queue is not like a database table. You can't just pick out only the messages you want.</p>\n"}],"owner":{"account_id":6408735,"reputation":1656,"user_id":4969121,"accept_rate":58,"display_name":"Abhijeet Kale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":929,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1682353262,"creation_date":1517219963,"question_id":48498559,"body_markdown":"I am looking for an optimal way to browse/check the last message inserted in a particular queue.\r\nSo far I am thinking of `ActiveMQQueueBrowser`. See the code below:\r\n\r\n    ActiveMQQueueBrowser browser = (ActiveMQQueueBrowser) session.createBrowser(queue);\r\n    Enumeration e = browser.getEnumeration();\r\n\tTextMessage message = null;\r\n\twhile (e.hasMoreElements()) {\r\n\t    message = (TextMessage) e.nextElement();\r\n\t}\r\n\r\nBut this code will need to traverse all the messages in queue, untill it gives last message.\r\n\r\nplz suggest if there is any other way to do so.","title":"Get Last Inserted Message in ActiveMQ - Java","body":"<p>I am looking for an optimal way to browse/check the last message inserted in a particular queue.\nSo far I am thinking of <code>ActiveMQQueueBrowser</code>. See the code below:</p>\n\n<pre><code>ActiveMQQueueBrowser browser = (ActiveMQQueueBrowser) session.createBrowser(queue);\nEnumeration e = browser.getEnumeration();\nTextMessage message = null;\nwhile (e.hasMoreElements()) {\n    message = (TextMessage) e.nextElement();\n}\n</code></pre>\n\n<p>But this code will need to traverse all the messages in queue, untill it gives last message.</p>\n\n<p>plz suggest if there is any other way to do so.</p>\n"},{"tags":["java","spring-boot","oauth-2.0","keycloak"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1682264222,"post_id":76085513,"comment_id":134184296,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":356896,"reputation":1317,"user_id":696714,"accept_rate":56,"display_name":"TOUDIdel"},"score":0,"creation_date":1689928523,"post_id":76085513,"comment_id":135285434,"body_markdown":"I have the same problem during tests using REST-assured + Testcontainers + Keycloak.\nI receive `WWW-Authenticate: Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;`\nOnly one difference I can see between real JWT token and token generated by testcontainers-keycloak is order in field `scope`.\nThe real valid token has value `&quot;email profile&quot;` during in test this has `&quot;profile email&quot;`","body":"I have the same problem during tests using REST-assured + Testcontainers + Keycloak. I receive <code>WWW-Authenticate: Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https:&#47;&#47;tools.ietf.org&#47;html&#47;rfc6750#section-3.1&quot;</code> Only one difference I can see between real JWT token and token generated by testcontainers-keycloak is order in field <code>scope</code>. The real valid token has value <code>&quot;email profile&quot;</code> during in test this has <code>&quot;profile email&quot;</code>"}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682284280,"creation_date":1682282367,"answer_id":76087165,"question_id":76085513,"body_markdown":"Apparently, you have not configured an authentication converter, which means the spring authorities are mapped from the scope claim with `SCOPE_` prefix (and not Keycloak private claims with `ROLE_` prefix which is required by `hasRole`).\r\n\r\nWhat you need is change your resource-server configuration to `http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.jwtAuthenticationConverter(...))` and provide an authentication converter mapping authorities from `realm_access.roles` (adding `ROLE_` prefix), and then build a `JwtAuthenticationToken` from it. Samples in [this answer][1] and [those tutorials][2] I wrote (and my bet is you should read the introduction README).\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"insufficient_scope error while using Keycloak with Spring Boot","body":"<p>Apparently, you have not configured an authentication converter, which means the spring authorities are mapped from the scope claim with <code>SCOPE_</code> prefix (and not Keycloak private claims with <code>ROLE_</code> prefix which is required by <code>hasRole</code>).</p>\n<p>What you need is change your resource-server configuration to <code>http.oauth2ResourceServer(oauth2 -&gt; oauth2.jwt(jwt -&gt; jwt.jwtAuthenticationConverter(...))</code> and provide an authentication converter mapping authorities from <code>realm_access.roles</code> (adding <code>ROLE_</code> prefix), and then build a <code>JwtAuthenticationToken</code> from it. Samples in <a href=\"https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3/74572732#74572732\">this answer</a> and <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">those tutorials</a> I wrote (and my bet is you should read the introduction README).</p>\n"}],"owner":{"account_id":4158070,"reputation":11,"user_id":3408773,"display_name":"juancarlosparr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3014,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1682353202,"creation_date":1682261339,"question_id":76085513,"body_markdown":"I use keycloak with Spring Boot api rest, but I get this error:\r\n\r\n&gt; Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;\r\n\r\nI believe this token is valid.\r\n\r\nCode:\r\n\r\n\t    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t    \t\r\n\t    \tSystem.out.println(&quot;Entro a seguridad&quot;);\r\n\t        http.authorizeHttpRequests()\r\n\t            .requestMatchers(&quot;/all/**&quot;)\r\n\t            .hasAnyRole(&quot;user_roles&quot;)\r\n\t            .anyRequest()\r\n\t            .permitAll();\r\n\t        http.oauth2Login()\r\n\t            .and()\r\n\t            .logout()\r\n\t            .addLogoutHandler((LogoutHandler) keycloakLogoutHandler)\r\n\t            .logoutSuccessUrl(&quot;/&quot;);\r\n\t        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\r\n\t        return http.build();\r\n\r\n[jwt](https://i.stack.imgur.com/ExaSI.png)\r\n\r\nI expect the token works. How do I fix this error?\r\n","title":"insufficient_scope error while using Keycloak with Spring Boot","body":"<p>I use keycloak with Spring Boot api rest, but I get this error:</p>\n<blockquote>\n<p>Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The request requires higher privileges than provided by the access token.&quot;, error_uri=&quot;https://tools.ietf.org/html/rfc6750#section-3.1&quot;</p>\n</blockquote>\n<p>I believe this token is valid.</p>\n<p>Code:</p>\n<pre><code>    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        \n        System.out.println(&quot;Entro a seguridad&quot;);\n        http.authorizeHttpRequests()\n            .requestMatchers(&quot;/all/**&quot;)\n            .hasAnyRole(&quot;user_roles&quot;)\n            .anyRequest()\n            .permitAll();\n        http.oauth2Login()\n            .and()\n            .logout()\n            .addLogoutHandler((LogoutHandler) keycloakLogoutHandler)\n            .logoutSuccessUrl(&quot;/&quot;);\n        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n        return http.build();\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ExaSI.png\" rel=\"nofollow noreferrer\">jwt</a></p>\n<p>I expect the token works. How do I fix this error?</p>\n"},{"tags":["java","string-matching"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":0,"creation_date":1682346393,"post_id":76092943,"comment_id":134196321,"body_markdown":"Please post the regex you used to try and solve this problem.","body":"Please post the regex you used to try and solve this problem."},{"owner":{"account_id":3925658,"reputation":5569,"user_id":3246362,"display_name":"Sam"},"score":0,"creation_date":1682346659,"post_id":76092943,"comment_id":134196405,"body_markdown":"I think you will have better results with JsonMapper and JsonNode","body":"I think you will have better results with JsonMapper and JsonNode"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":3,"creation_date":1682346700,"post_id":76092943,"comment_id":134196415,"body_markdown":"Using regex to process JSON is a bad match (no pun intended). Use JSON libraries to parse JSON.","body":"Using regex to process JSON is a bad match (no pun intended). Use JSON libraries to parse JSON."}],"answers":[{"comments":[{"owner":{"account_id":4683705,"reputation":3,"user_id":3791720,"display_name":"J055Y"},"score":1,"creation_date":1682523697,"post_id":76093181,"comment_id":134230619,"body_markdown":"Thank you very much! In the end I created a custom Json deserialiser to handle the different combination of objects in my array. I can&#39;t believe I didn&#39;t think of this earlier.","body":"Thank you very much! In the end I created a custom Json deserialiser to handle the different combination of objects in my array. I can&#39;t believe I didn&#39;t think of this earlier."}],"tags":[],"owner":{"account_id":91942,"reputation":8072,"user_id":252218,"accept_rate":91,"display_name":"BoppreH"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682348304,"creation_date":1682347761,"answer_id":76093181,"question_id":76092943,"body_markdown":"[Technically possible](https://stackoverflow.com/questions/47162098/is-it-possible-to-match-nested-brackets-with-a-regex-without-using-recursion-or/47162099#47162099) with a single regex, but probably not worth it. Note that the linked answer is for one type of parenthesis only; your program is harder because you have {} *and* [].\r\n\r\nThe problem is that nested expressions are not a [regular language](https://en.wikipedia.org/wiki/Regular_language); regex libraries can sometimes parse non-regular languages with the help of extensions (like forward and backward references), but the results are generally fragile and unreadable. This issue is [quite famous on StackOverflow](https://stackoverflow.com/a/1732454/252218).\r\n\r\nSince your input is already a JSON string, you&#39;re much better off using a real JSON parser. I promise you it&#39;ll be much less painful than what you&#39;ve already done.\r\n\r\n---\r\n\r\nIf you really must use regex, I suggest doing it in iteratively:\r\n\r\n1. Create a regex that finds all {} or [] that don&#39;t have any {} or [] inside.\r\n2. Search for matches in your input string.\r\n3. Replace each match with a unique token, like &quot;TOKEN_N&quot;. Remember what was the match string for each of these tokens.\r\n4. Repeat 2-3 until there are no more matches.\r\n\r\nIn the end you&#39;ll have transformed the input into something like \r\n\r\n    [TOKEN1, &quot;&amp;&amp;&quot;, TOKEN2, &quot;||&quot;, TOKEN3]\r\n\r\nAnd a recursive dictionary of everything you replaced:\r\n\r\n    TOKEN1={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\r\n    TOKEN2=[TOKEN4, &quot;||&quot;, TOKEN5]\r\n    TOKEN3={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\r\n    TOKEN4={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\r\n    TOKEN5={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\r\n\r\nThis is a stringified [Abstract Syntax Tree](https://en.wikipedia.org/wiki/Abstract_syntax_tree) of your expression, and from here you can process it however you like.","title":"Regex - Matching the contents between two characters only if the latter character is not followed by the latter character before the former character","body":"<p><a href=\"https://stackoverflow.com/questions/47162098/is-it-possible-to-match-nested-brackets-with-a-regex-without-using-recursion-or/47162099#47162099\">Technically possible</a> with a single regex, but probably not worth it. Note that the linked answer is for one type of parenthesis only; your program is harder because you have {} <em>and</em> [].</p>\n<p>The problem is that nested expressions are not a <a href=\"https://en.wikipedia.org/wiki/Regular_language\" rel=\"nofollow noreferrer\">regular language</a>; regex libraries can sometimes parse non-regular languages with the help of extensions (like forward and backward references), but the results are generally fragile and unreadable. This issue is <a href=\"https://stackoverflow.com/a/1732454/252218\">quite famous on StackOverflow</a>.</p>\n<p>Since your input is already a JSON string, you're much better off using a real JSON parser. I promise you it'll be much less painful than what you've already done.</p>\n<hr />\n<p>If you really must use regex, I suggest doing it in iteratively:</p>\n<ol>\n<li>Create a regex that finds all {} or [] that don't have any {} or [] inside.</li>\n<li>Search for matches in your input string.</li>\n<li>Replace each match with a unique token, like &quot;TOKEN_N&quot;. Remember what was the match string for each of these tokens.</li>\n<li>Repeat 2-3 until there are no more matches.</li>\n</ol>\n<p>In the end you'll have transformed the input into something like</p>\n<pre><code>[TOKEN1, &quot;&amp;&amp;&quot;, TOKEN2, &quot;||&quot;, TOKEN3]\n</code></pre>\n<p>And a recursive dictionary of everything you replaced:</p>\n<pre><code>TOKEN1={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\nTOKEN2=[TOKEN4, &quot;||&quot;, TOKEN5]\nTOKEN3={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\nTOKEN4={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\nTOKEN5={&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}\n</code></pre>\n<p>This is a stringified <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\" rel=\"nofollow noreferrer\">Abstract Syntax Tree</a> of your expression, and from here you can process it however you like.</p>\n"}],"owner":{"account_id":4683705,"reputation":3,"user_id":3791720,"display_name":"J055Y"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76093181,"answer_count":1,"score":0,"last_activity_date":1682353139,"creation_date":1682346323,"question_id":76092943,"body_markdown":"I&#39;m trying to match JSON condition strings in Java and have been hitting my head against a wall trying to find a solution. \r\nIn these condition strings, conditions are JSON objects &quot;{}&quot;, which may be evaluated on their own, or in a group. These groups are represented as arrays of condition objects &quot;[]&quot;. I had a solution that worked fine to match the contents between characters for groups and objects respectively, however, this went out the window when I attempted to store groups inside other groups.\r\n\r\nExample string:\r\n\r\n    [{&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}, &quot;&amp;&amp;&quot;,\r\n      [{&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}, &quot;||&quot;, \r\n       {&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}], &quot;||&quot;, \r\n       {&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}]\r\n\r\n\r\n\r\nThe intended outcome was to match the contents of the string between (and including) the characters \\[ and \\].\r\n\r\nI&#39;ve worked out that what I need is to match the contents of \\[ ... \\] until there is a \\] that is not followed (somewhere ahead, i.e., .+?) by another \\] before a \\[.\r\nDoing a lazy search for \\] will stop the match at the first occurence, but doing a greedy match will match the entire string up to the last occurence, which may contain many other groups/objects. I&#39;ve experimented with lookbehinds/lookaheads, but these require statically defined character positions, and cannot stretch to find (or not find) an occurence of a character.\r\n\r\nAt this point, I&#39;m stumped and would greatly appreciate any advice you have to offer.","title":"Regex - Matching the contents between two characters only if the latter character is not followed by the latter character before the former character","body":"<p>I'm trying to match JSON condition strings in Java and have been hitting my head against a wall trying to find a solution.\nIn these condition strings, conditions are JSON objects &quot;{}&quot;, which may be evaluated on their own, or in a group. These groups are represented as arrays of condition objects &quot;[]&quot;. I had a solution that worked fine to match the contents between characters for groups and objects respectively, however, this went out the window when I attempted to store groups inside other groups.</p>\n<p>Example string:</p>\n<pre><code>[{&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}, &quot;&amp;&amp;&quot;,\n  [{&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}, &quot;||&quot;, \n   {&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}], &quot;||&quot;, \n   {&quot;field&quot;:&quot;type&quot;,&quot;operand&quot;:&quot;=&quot;,&quot;value&quot;:&quot;column&quot;}]\n</code></pre>\n<p>The intended outcome was to match the contents of the string between (and including) the characters [ and ].</p>\n<p>I've worked out that what I need is to match the contents of [ ... ] until there is a ] that is not followed (somewhere ahead, i.e., .+?) by another ] before a [.\nDoing a lazy search for ] will stop the match at the first occurence, but doing a greedy match will match the entire string up to the last occurence, which may contain many other groups/objects. I've experimented with lookbehinds/lookaheads, but these require statically defined character positions, and cannot stretch to find (or not find) an occurence of a character.</p>\n<p>At this point, I'm stumped and would greatly appreciate any advice you have to offer.</p>\n"},{"tags":["java","twilio","keycloak"],"comments":[{"owner":{"account_id":51393,"reputation":2475,"user_id":153562,"accept_rate":89,"display_name":"Nimrod Shory"},"score":0,"creation_date":1578583047,"post_id":58431085,"comment_id":105492948,"body_markdown":"I haven&#39;t tried it yet but did you look at this plugin: https://github.com/sangyoon-lee/keycloak-sms-authenticator  \n\nLooks like a good starting point.","body":"I haven&#39;t tried it yet but did you look at this plugin: <a href=\"https://github.com/sangyoon-lee/keycloak-sms-authenticator\" rel=\"nofollow noreferrer\">github.com/sangyoon-lee/keycloak-sms-authenticator</a>    Looks like a good starting point."}],"answers":[{"tags":[],"owner":{"account_id":1877660,"reputation":1745,"user_id":1698509,"accept_rate":75,"display_name":"Guilherme"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682353067,"creation_date":1682353067,"answer_id":76093978,"question_id":58431085,"body_markdown":"[Dasniko][1] has a good implementation of 2FA with SMS, made using Keycloak&#39;s Service Provider Interfaces (SPI)\r\n\r\nAs I see, you would just need to re-write the `AwsSmsService` into a service using Twilio\r\n\r\nhttps://github.com/dasniko/keycloak-2fa-sms-authenticator\r\n\r\nAnd he also have a youtube video explaining the usage https://www.youtube.com/watch?v=GQi19817fFk\r\n\r\n  [1]: https://github.com/dasniko","title":"Keycloak phone number verification using Twilio","body":"<p><a href=\"https://github.com/dasniko\" rel=\"nofollow noreferrer\">Dasniko</a> has a good implementation of 2FA with SMS, made using Keycloak's Service Provider Interfaces (SPI)</p>\n<p>As I see, you would just need to re-write the <code>AwsSmsService</code> into a service using Twilio</p>\n<p><a href=\"https://github.com/dasniko/keycloak-2fa-sms-authenticator\" rel=\"nofollow noreferrer\">https://github.com/dasniko/keycloak-2fa-sms-authenticator</a></p>\n<p>And he also have a youtube video explaining the usage <a href=\"https://www.youtube.com/watch?v=GQi19817fFk\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=GQi19817fFk</a></p>\n"}],"owner":{"account_id":16898363,"reputation":21,"user_id":12220398,"display_name":"Senior developer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1221,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1682353067,"creation_date":1571310087,"question_id":58431085,"body_markdown":"I would like to customize key cloak resister page with phone number. I would like to use Twilio to send sms. But there is no example anywhere similar to this project.&quot;\r\n\r\nI have already setup keycloak server and keycloak does not support Twilio.\r\n\r\nPlease provide me similar project. Thank you.\r\n\r\n    03:59:41,668 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (default task-1) Uncaught server error: java.lang.NoClassDefFoundError: org/apache/commons/codec/binary/Base64InputStream\r\n    \tat six.six.gateway.govuk.notify.NotifySMSService.&lt;init&gt;(NotifySMSService.java:24)\r\n    \tat six.six.keycloak.authenticator.KeycloakSmsAuthenticatorUtil.sendSmsCode(KeycloakSmsAuthenticatorUtil.java:197)\r\n    \tat six.six.keycloak.authenticator.KeycloakSmsAuthenticator.authenticate(KeycloakSmsAuthenticator.java:82)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processFlow(DefaultAuthenticationFlow.java:232)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:128)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:99)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.AuthenticationProcessor.authenticationAction(AuthenticationProcessor.java:873)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.processFlow(LoginActionsService.java:296)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.processAuthentication(LoginActionsService.java:267)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.authenticate(LoginActionsService.java:263)\r\n    \tat org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.authenticateForm(LoginActionsService.java:324)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)","title":"Keycloak phone number verification using Twilio","body":"<p>I would like to customize key cloak resister page with phone number. I would like to use Twilio to send sms. But there is no example anywhere similar to this project.\"</p>\n\n<p>I have already setup keycloak server and keycloak does not support Twilio.</p>\n\n<p>Please provide me similar project. Thank you.</p>\n\n<pre><code>03:59:41,668 ERROR [org.keycloak.services.error.KeycloakErrorHandler] (default task-1) Uncaught server error: java.lang.NoClassDefFoundError: org/apache/commons/codec/binary/Base64InputStream\n    at six.six.gateway.govuk.notify.NotifySMSService.&lt;init&gt;(NotifySMSService.java:24)\n    at six.six.keycloak.authenticator.KeycloakSmsAuthenticatorUtil.sendSmsCode(KeycloakSmsAuthenticatorUtil.java:197)\n    at six.six.keycloak.authenticator.KeycloakSmsAuthenticator.authenticate(KeycloakSmsAuthenticator.java:82)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processFlow(DefaultAuthenticationFlow.java:232)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:128)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.DefaultAuthenticationFlow.processAction(DefaultAuthenticationFlow.java:99)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.authentication.AuthenticationProcessor.authenticationAction(AuthenticationProcessor.java:873)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.processFlow(LoginActionsService.java:296)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.processAuthentication(LoginActionsService.java:267)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.authenticate(LoginActionsService.java:263)\n    at org.keycloak.keycloak-services@7.0.0//org.keycloak.services.resources.LoginActionsService.authenticateForm(LoginActionsService.java:324)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"score":0,"creation_date":1682539138,"post_id":76093886,"comment_id":134233919,"body_markdown":"What is the purpose of keeping track of the sides?  Is this important to the game?  If I start in the top left corner of a square, and continue following it&#39;s sides all the way back to my start point, I have basically walked a straight line.  Think now of an array, let&#39;s call it `squares[10]`.  If I start at the first index, `squares[0]` and walk all the way to the end, `squares[9]`, what happens if I walk one space forward?  In this case, I&#39;ll end up back at `squares[0]`.","body":"What is the purpose of keeping track of the sides?  Is this important to the game?  If I start in the top left corner of a square, and continue following it&#39;s sides all the way back to my start point, I have basically walked a straight line.  Think now of an array, let&#39;s call it <code>squares[10]</code>.  If I start at the first index, <code>squares[0]</code> and walk all the way to the end, <code>squares[9]</code>, what happens if I walk one space forward?  In this case, I&#39;ll end up back at <code>squares[0]</code>."}],"owner":{"account_id":28402287,"reputation":1,"user_id":21726916,"display_name":"Gabriel "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1682352385,"creation_date":1682352385,"question_id":76093886,"body_markdown":"So for our final project in school we got to pick our own thing to do. I decided to make the game Ludo, in Java. For starters I&#39;m making a simplified version that goes around a square, not a plus-shape as it usually is. Im having trouble in drawing the piece going around the board. For starters Im just making the board be outlined, black circles, with a full circle moving around the board when you roll the dice. Check picture:\r\n[The simplified Ludo Board](https://i.stack.imgur.com/Ra7aL.png)\r\n\r\n```\r\n    @Override\r\n    protected void paintComponent(Graphics g) {\r\n        super.paintComponent(g);\r\n        g.setColor(Color.BLACK);\r\n        for (int i = 0; i &lt; boardSide; i++) {\r\n            g.drawOval(i*squareSize,0,squareSize,squareSize);\r\n        }\r\n        for (int i = 0; i &lt; boardSide; i++) {\r\n            g.drawOval(0,i*squareSize,squareSize,squareSize);\r\n        }\r\n        for (int i = boardSide; i &gt; 0; i--) {\r\n            g.drawOval(i*squareSize,boardSide-squareSize,squareSize,squareSize);\r\n        }\r\n        for (int i = boardSide; i &gt; 0; i--) {\r\n            g.drawOval(boardSide-squareSize,i*squareSize,squareSize,squareSize);\r\n        }\r\n        g.setColor(Color.GREEN);\r\n        switch (squares[squarePlace]%8){\r\n            case 1 -&gt; g.fillOval(0,0,squareSize,squareSize);\r\n        }\r\n    }\r\n```\r\nboardSide is the amount of squares on one side, squareSize is how big each square is and squares[] is an int array of all the squares on the board, all empty squares have a value of -1. squarePlace is an int keeping track off where the green square is and has the value 1.\r\n\r\n\r\nIm thinking that I should use a switch-case to check where the green square is in the array. Then use %-operator to check if it should be on the top, right, bottom or left of the board. I just can&#39;t think off how I should do that. I need to check how far into the array the square is, or check the position in the array, and then use % but I dont know how. ","title":"How to make a Ludo piece go around the board?","body":"<p>So for our final project in school we got to pick our own thing to do. I decided to make the game Ludo, in Java. For starters I'm making a simplified version that goes around a square, not a plus-shape as it usually is. Im having trouble in drawing the piece going around the board. For starters Im just making the board be outlined, black circles, with a full circle moving around the board when you roll the dice. Check picture:\n<a href=\"https://i.stack.imgur.com/Ra7aL.png\" rel=\"nofollow noreferrer\">The simplified Ludo Board</a></p>\n<pre><code>    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        g.setColor(Color.BLACK);\n        for (int i = 0; i &lt; boardSide; i++) {\n            g.drawOval(i*squareSize,0,squareSize,squareSize);\n        }\n        for (int i = 0; i &lt; boardSide; i++) {\n            g.drawOval(0,i*squareSize,squareSize,squareSize);\n        }\n        for (int i = boardSide; i &gt; 0; i--) {\n            g.drawOval(i*squareSize,boardSide-squareSize,squareSize,squareSize);\n        }\n        for (int i = boardSide; i &gt; 0; i--) {\n            g.drawOval(boardSide-squareSize,i*squareSize,squareSize,squareSize);\n        }\n        g.setColor(Color.GREEN);\n        switch (squares[squarePlace]%8){\n            case 1 -&gt; g.fillOval(0,0,squareSize,squareSize);\n        }\n    }\n</code></pre>\n<p>boardSide is the amount of squares on one side, squareSize is how big each square is and squares[] is an int array of all the squares on the board, all empty squares have a value of -1. squarePlace is an int keeping track off where the green square is and has the value 1.</p>\n<p>Im thinking that I should use a switch-case to check where the green square is in the array. Then use %-operator to check if it should be on the top, right, bottom or left of the board. I just can't think off how I should do that. I need to check how far into the array the square is, or check the position in the array, and then use % but I dont know how.</p>\n"},{"tags":["java","android","kotlin","android-developer-api"],"comments":[{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1682091177,"post_id":76074528,"comment_id":134166105,"body_markdown":"You may want to expand your explanation and code examples. I, for one, am not clear on what you&#39;re asking or trying to achieve.","body":"You may want to expand your explanation and code examples. I, for one, am not clear on what you&#39;re asking or trying to achieve."},{"owner":{"account_id":21373830,"reputation":595,"user_id":15740938,"display_name":"ladytoky0"},"score":0,"creation_date":1682341814,"post_id":76074528,"comment_id":134195067,"body_markdown":"@dominicoder I added an example! thank you","body":"@dominicoder I added an example! thank you"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1682350910,"post_id":76074528,"comment_id":134197602,"body_markdown":"What or where is `userOption` though? Are you looking for [SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences)?","body":"What or where is <code>userOption</code> though? Are you looking for <a href=\"https://developer.android.com/reference/android/content/SharedPreferences\" rel=\"nofollow noreferrer\">SharedPreferences</a>?"},{"owner":{"account_id":21373830,"reputation":595,"user_id":15740938,"display_name":"ladytoky0"},"score":0,"creation_date":1682350971,"post_id":76074528,"comment_id":134197617,"body_markdown":"userOption is the selected item of a spinner","body":"userOption is the selected item of a spinner"},{"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"score":0,"creation_date":1682351033,"post_id":76074528,"comment_id":134197632,"body_markdown":"No, that&#39;s the value. What is the _variable_? `val userOption` - what is that? Where does that live? Where is it defined?","body":"No, that&#39;s the value. What is the <i>variable</i>? <code>val userOption</code> - what is that? Where does that live? Where is it defined?"}],"answers":[{"comments":[{"owner":{"account_id":18463410,"reputation":18363,"user_id":13598222,"display_name":"cactustictacs"},"score":0,"creation_date":1682113477,"post_id":76074907,"comment_id":134170208,"body_markdown":"Yeah this is probably your best option, since an enum is *enumerated* so each constant has a specific &quot;index&quot; you can refer to it by. So you can easily display all the enum `values()` in a spinner or list, and use the index of the chosen option to fetch the associated constant. And they play nice with serialisation too!","body":"Yeah this is probably your best option, since an enum is <i>enumerated</i> so each constant has a specific &quot;index&quot; you can refer to it by. So you can easily display all the enum <code>values()</code> in a spinner or list, and use the index of the chosen option to fetch the associated constant. And they play nice with serialisation too!"},{"owner":{"account_id":21373830,"reputation":595,"user_id":15740938,"display_name":"ladytoky0"},"score":0,"creation_date":1682341485,"post_id":76074907,"comment_id":134194985,"body_markdown":"not exactly what I wanted because here you are accessing the value with the variable name &quot;A2&quot; and in my case I have the value in another variable name that is not in the enum class","body":"not exactly what I wanted because here you are accessing the value with the variable name &quot;A2&quot; and in my case I have the value in another variable name that is not in the enum class"}],"tags":[],"owner":{"account_id":14331430,"reputation":783,"user_id":10352079,"display_name":"Razvan S."},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682093141,"creation_date":1682093141,"answer_id":76074907,"question_id":76074528,"body_markdown":"Not sure I understand your question but I would use enums like in the playground example below:\r\n\r\n    enum class Props {\r\n        A1,\r\n        A2,\r\n        A3\r\n    }\r\n    \r\n    fun main() {\r\n        var userChoice: Props = Props.A2\r\n        val index = userChoice.ordinal\r\n        val literal = Props.values()[index]\r\n        print(index)\r\n        print(literal)\r\n    }\r\n\r\nThe only difference is that the values start at 0. So A1 is 0, A2 is 1 and A3 is 2.\r\nPrinting the index will show 1. And printing the literal will show A2. \r\n\r\nYou can do more fancy stuff using enums but I think it&#39;s a better start than other approaches.","title":"Access to a constant value with a variable name in Kotlin","body":"<p>Not sure I understand your question but I would use enums like in the playground example below:</p>\n<pre><code>enum class Props {\n    A1,\n    A2,\n    A3\n}\n\nfun main() {\n    var userChoice: Props = Props.A2\n    val index = userChoice.ordinal\n    val literal = Props.values()[index]\n    print(index)\n    print(literal)\n}\n</code></pre>\n<p>The only difference is that the values start at 0. So A1 is 0, A2 is 1 and A3 is 2.\nPrinting the index will show 1. And printing the literal will show A2.</p>\n<p>You can do more fancy stuff using enums but I think it's a better start than other approaches.</p>\n"}],"owner":{"account_id":21373830,"reputation":595,"user_id":15740938,"display_name":"ladytoky0"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1682351624,"creation_date":1682090187,"question_id":76074528,"body_markdown":"First of all, I don&#39;t know if there is a way to achieve what I want to, but I don&#39;t lose nothing asking for.\r\n\r\nSO, I have an object with some constant values, let&#39;s say:\r\n\r\n    object Properties {\r\n        const val A1 = 1\r\n        const val A2 = 2\r\n        const val A3 = 3\r\n        ....\r\n    }\r\n\r\nThe user in the app, will choose one of these options: A1, A2,A3,..., An, and I&#39;m saving the user&#39;s option in the variable\r\n\r\n    val userOption\r\n\r\nNow, I want to access which value is userOption (1,2,3,...,n) referring to the object Properties, something like this:\r\n\r\n    val index = Properties.$userOption\r\n\r\nObviously, this is wrong, but I wanted to know if it exists something similar to access a constant value with another variable name.what So basically, I have the value in another variable name that is not in the class and is called &quot;userOption&quot;.\r\n\r\nFor example,the user has many options in a spinner: A1, A2, ..., An\r\n\r\n    var userOption: String = null\r\n    override fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View?, pos: Int, id: Long) {\r\n            // retrieve the selected item\r\n            userOption = parent.getItemAtPosition(pos).toString()\r\n        }\r\n\r\n    private fun getIndexUserOption(){\r\n        val indexUser = Properties.$userOption // this is wrong!\r\n    }\r\n\r\n \r\nThank you all!\r\n\r\nPS. I do not want to use a dictionary in this class because it has to work in differents classes.","title":"Access to a constant value with a variable name in Kotlin","body":"<p>First of all, I don't know if there is a way to achieve what I want to, but I don't lose nothing asking for.</p>\n<p>SO, I have an object with some constant values, let's say:</p>\n<pre><code>object Properties {\n    const val A1 = 1\n    const val A2 = 2\n    const val A3 = 3\n    ....\n}\n</code></pre>\n<p>The user in the app, will choose one of these options: A1, A2,A3,..., An, and I'm saving the user's option in the variable</p>\n<pre><code>val userOption\n</code></pre>\n<p>Now, I want to access which value is userOption (1,2,3,...,n) referring to the object Properties, something like this:</p>\n<pre><code>val index = Properties.$userOption\n</code></pre>\n<p>Obviously, this is wrong, but I wanted to know if it exists something similar to access a constant value with another variable name.what So basically, I have the value in another variable name that is not in the class and is called &quot;userOption&quot;.</p>\n<p>For example,the user has many options in a spinner: A1, A2, ..., An</p>\n<pre><code>var userOption: String = null\noverride fun onItemSelected(parent: AdapterView&lt;*&gt;, view: View?, pos: Int, id: Long) {\n        // retrieve the selected item\n        userOption = parent.getItemAtPosition(pos).toString()\n    }\n\nprivate fun getIndexUserOption(){\n    val indexUser = Properties.$userOption // this is wrong!\n}\n</code></pre>\n<p>Thank you all!</p>\n<p>PS. I do not want to use a dictionary in this class because it has to work in differents classes.</p>\n"},{"tags":["java","tomcat","servlets"],"comments":[{"owner":{"account_id":6338626,"reputation":2513,"user_id":4921317,"accept_rate":91,"display_name":"Gatusko"},"score":1,"creation_date":1682349583,"post_id":76093287,"comment_id":134197238,"body_markdown":"Can you add all the stacktrace please","body":"Can you add all the stacktrace please"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1682350703,"post_id":76093287,"comment_id":134197525,"body_markdown":"&quot;upgraded servlet jar&quot;: Does that include _all of your code_ that now uses the jakarta variant? And _all of the other external libraries_ that you might have in your project, that might depend on the javax-classes as well? Please check [ask] and provide a [mcve].","body":"&quot;upgraded servlet jar&quot;: Does that include <i>all of your code</i> that now uses the jakarta variant? And <i>all of the other external libraries</i> that you might have in your project, that might depend on the javax-classes as well? Please check <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":9979607,"reputation":21,"user_id":7382973,"display_name":"Abhinav"},"score":0,"creation_date":1682351482,"post_id":76093287,"comment_id":134197751,"body_markdown":"@Gatusko pasted the server logs above.","body":"@Gatusko pasted the server logs above."},{"owner":{"account_id":6338626,"reputation":2513,"user_id":4921317,"accept_rate":91,"display_name":"Gatusko"},"score":0,"creation_date":1682351622,"post_id":76093287,"comment_id":134197788,"body_markdown":"I think you are having this issue it is well know https://stackoverflow.com/questions/66711660/tomcat-10-x-throws-java-lang-noclassdeffounderror-on-javax-servlet","body":"I think you are having this issue it is well know <a href=\"https://stackoverflow.com/questions/66711660/tomcat-10-x-throws-java-lang-noclassdeffounderror-on-javax-servlet\" title=\"tomcat 10 x throws java lang noclassdeffounderror on javax servlet\">stackoverflow.com/questions/66711660/&hellip;</a>"},{"owner":{"account_id":9979607,"reputation":21,"user_id":7382973,"display_name":"Abhinav"},"score":0,"creation_date":1682351861,"post_id":76093287,"comment_id":134197838,"body_markdown":"@OlafKock yes, my application is using Jakarta variant now, and rest of the external libs are upgraded too if need in most of the case I tried to do the minimal change in external libs as I am trying to figure out what is causing me this issue, will provide you more info about how to reproduce this issue as I tried something similar with new project containing no external libs and it get deployed fine and I am able to consume the demo webservice as well.","body":"@OlafKock yes, my application is using Jakarta variant now, and rest of the external libs are upgraded too if need in most of the case I tried to do the minimal change in external libs as I am trying to figure out what is causing me this issue, will provide you more info about how to reproduce this issue as I tried something similar with new project containing no external libs and it get deployed fine and I am able to consume the demo webservice as well."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1682352216,"post_id":76093287,"comment_id":134197928,"body_markdown":"*&quot;upgraded servlet jar from 2.5 to 6.0.0&quot;* this phrase is scary because **normally** you upgrade merely the servletcontainer (Tomcat) from the one to the other version and not the individual `servlet.jar` file. Do you really have a `servlet.jar` bundled in `/WEB-INF/lib`? This is absolutely not correct. That&#39;s supposed to be already provided by the servletcontainer itself (Tomcat in your case).","body":"<i>&quot;upgraded servlet jar from 2.5 to 6.0.0&quot;</i> this phrase is scary because <b>normally</b> you upgrade merely the servletcontainer (Tomcat) from the one to the other version and not the individual <code>servlet.jar</code> file. Do you really have a <code>servlet.jar</code> bundled in <code>&#47;WEB-INF&#47;lib</code>? This is absolutely not correct. That&#39;s supposed to be already provided by the servletcontainer itself (Tomcat in your case)."},{"owner":{"account_id":9979607,"reputation":21,"user_id":7382973,"display_name":"Abhinav"},"score":0,"creation_date":1682412125,"post_id":76093287,"comment_id":134206999,"body_markdown":"@BalusC, that true by upgrading servlet jar from 2.5 to 6.0.0 I mean upgrading the servlet container. Thanks for bring this up as I need to edit the scope of my dependency so that it should not be present in /WEB-INF/lib when I am building the project.","body":"@BalusC, that true by upgrading servlet jar from 2.5 to 6.0.0 I mean upgrading the servlet container. Thanks for bring this up as I need to edit the scope of my dependency so that it should not be present in /WEB-INF/lib when I am building the project."}],"owner":{"account_id":9979607,"reputation":21,"user_id":7382973,"display_name":"Abhinav"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1682352222,"answer_count":0,"score":0,"last_activity_date":1682351356,"creation_date":1682348466,"question_id":76093287,"body_markdown":"I am currently upgrading my application java version from jdk 1.7 to 17 and tomcat from 9.0.20 version to 10.1.7, made all the changes related to servelte libs update and removed all the compilation error but when I am deploying my war I am getting below error.\r\n\r\n```\r\n24-Apr-2023 21:01:50.458 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war]\r\n24-Apr-2023 21:02:01.488 INFO [Catalina-utility-1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n24-Apr-2023 21:02:01.488 SEVERE [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war]\r\n\tjava.lang.IllegalStateException: Error starting child\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\r\n\t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:975)\r\n\t\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1949)\r\n\t\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\t\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\t\tat java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:776)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:426)\r\n\t\tat org.apache.catalina.startup.HostConfig.check(HostConfig.java:1705)\r\n\t\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:305)\r\n\t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n\t\tat org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1102)\r\n\t\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1301)\r\n\t\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1305)\r\n\t\tat org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1283)\r\n\t\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\t\tat java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\r\n\t\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\t\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\t\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\t\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\tCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/WebApp_demo_version3]]\r\n\t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\r\n\t\t... 24 more\r\n\tCaused by: java.lang.NoClassDefFoundError: javax/servlet/ServletRequestListener\r\n\t\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\t\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012)\r\n\t\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2487)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:865)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1401)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1245)\r\n\t\tat org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:490)\r\n\t\tat org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:472)\r\n\t\tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:142)\r\n\t\tat org.apache.catalina.core.ApplicationContext.addListener(ApplicationContext.java:1010)\r\n\t\tat org.apache.catalina.core.ApplicationContextFacade.addListener(ApplicationContextFacade.java:549)\r\n\t\tat org.apache.jasper.servlet.JasperInitializer.onStartup(JasperInitializer.java:90)\r\n\t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4875)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\t... 25 more\r\n\tCaused by: java.lang.ClassNotFoundException: javax.servlet.ServletRequestListener\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1437)\r\n\t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1245)\r\n\t\t... 40 more\r\n24-Apr-2023 21:02:01.496 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war] has finished in [11,038] ms\r\n```\r\n\r\nwhereas I am not even using this servlet package anymore i upgraded to version 6.0.0 which use jakarta.servlet package, any suggestion on same is appreciated.\r\n\r\ntried below points.\r\n\r\n- upgraded servlet jar from 2.5 to 6.0.0\r\n- updated my xml file from web-app_2_5.xsd to web-app_4_0.xsd\r\n\r\nI am expecting to upgrade my application to jdk 17 and tomcat 10.1.7.","title":"JAVA and tomcat upgrade","body":"<p>I am currently upgrading my application java version from jdk 1.7 to 17 and tomcat from 9.0.20 version to 10.1.7, made all the changes related to servelte libs update and removed all the compilation error but when I am deploying my war I am getting below error.</p>\n<pre><code>24-Apr-2023 21:01:50.458 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war]\n24-Apr-2023 21:02:01.488 INFO [Catalina-utility-1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n24-Apr-2023 21:02:01.488 SEVERE [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war]\n    java.lang.IllegalStateException: Error starting child\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:686)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:713)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:975)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1949)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:123)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:776)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:426)\n        at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1705)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:305)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1102)\n        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1301)\n        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1305)\n        at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1283)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n        at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/WebApp_demo_version3]]\n        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n        ... 24 more\n    Caused by: java.lang.NoClassDefFoundError: javax/servlet/ServletRequestListener\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012)\n        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\n        at org.apache.catalina.loader.WebappClassLoaderBase.findClassInternal(WebappClassLoaderBase.java:2487)\n        at org.apache.catalina.loader.WebappClassLoaderBase.findClass(WebappClassLoaderBase.java:865)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1401)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1245)\n        at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:490)\n        at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:472)\n        at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:142)\n        at org.apache.catalina.core.ApplicationContext.addListener(ApplicationContext.java:1010)\n        at org.apache.catalina.core.ApplicationContextFacade.addListener(ApplicationContextFacade.java:549)\n        at org.apache.jasper.servlet.JasperInitializer.onStartup(JasperInitializer.java:90)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4875)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        ... 25 more\n    Caused by: java.lang.ClassNotFoundException: javax.servlet.ServletRequestListener\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1437)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1245)\n        ... 40 more\n24-Apr-2023 21:02:01.496 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [C:\\Users\\absharma\\Desktop\\TASK\\tomcat\\webapps\\WebApp_demo_version3.war] has finished in [11,038] ms\n</code></pre>\n<p>whereas I am not even using this servlet package anymore i upgraded to version 6.0.0 which use jakarta.servlet package, any suggestion on same is appreciated.</p>\n<p>tried below points.</p>\n<ul>\n<li>upgraded servlet jar from 2.5 to 6.0.0</li>\n<li>updated my xml file from web-app_2_5.xsd to web-app_4_0.xsd</li>\n</ul>\n<p>I am expecting to upgrade my application to jdk 17 and tomcat 10.1.7.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1682312292,"post_id":76088432,"comment_id":134189462,"body_markdown":"Vbox of HBoxes with alignment on the vbox set to center, but there are other options if you prefer.  For instance, you can set halignment on individual cells in a GridPane.  SceneBuilder is good for prototyping layouts, even if you decide not to use FXML.","body":"Vbox of HBoxes with alignment on the vbox set to center, but there are other options if you prefer.  For instance, you can set halignment on individual cells in a GridPane.  SceneBuilder is good for prototyping layouts, even if you decide not to use FXML."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1682319466,"post_id":76088432,"comment_id":134190347,"body_markdown":"&quot;_with the clear and start buttons sticking out on both sides_&quot; -- If I understand this correctly, then you simply need to configure the nodes in the first column to align to the right when there&#39;s empty space. You can do this for the entire column via a [`ColumnConstraints`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/ColumnConstraints.html) or for individual nodes via [`GridPane#setHalignment(Node, HPos)`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/GridPane.html#setHalignment(javafx.scene.Node,javafx.geometry.HPos)).","body":"&quot;<i>with the clear and start buttons sticking out on both sides</i>&quot; -- If I understand this correctly, then you simply need to configure the nodes in the first column to align to the right when there&#39;s empty space. You can do this for the entire column via a <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/ColumnConstraints.html\" rel=\"nofollow noreferrer\"><code>ColumnConstraints</code></a> or for individual nodes via <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/GridPane.html#setHalignment(javafx.scene.Node,javafx.geometry.HPos)\" rel=\"nofollow noreferrer\"><code>GridPane#setHalignment(Node, HPos)</code></a>."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1682327169,"post_id":76088432,"comment_id":134191843,"body_markdown":"_It&#39;s kinda hard to explain to a search engine_ a good first step in research is the api doc https://openjfx.io/javadoc/18/javafx.graphics/javafx/scene/layout/GridPane.html :) That&#39;s for learning which configuration options are available specifically the class you want to use. Another good stepping stone is are - here: layout - tutorials (the javafx tag wiki has references).","body":"<i>It&#39;s kinda hard to explain to a search engine</i> a good first step in research is the api doc <a href=\"https://openjfx.io/javadoc/18/javafx.graphics/javafx/scene/layout/GridPane.html\" rel=\"nofollow noreferrer\">openjfx.io/javadoc/18/javafx.graphics/javafx/scene/layout/&hellip;</a> :) That&#39;s for learning which configuration options are available specifically the class you want to use. Another good stepping stone is are - here: layout - tutorials (the javafx tag wiki has references)."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1682327251,"post_id":76088432,"comment_id":134191855,"body_markdown":"btw: layout classes are meant for using, not for extending - actually, it&#39;s a general rule: never-ever extend if you can achieve the same by configuration","body":"btw: layout classes are meant for using, not for extending - actually, it&#39;s a general rule: never-ever extend if you can achieve the same by configuration"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1682336871,"post_id":76088432,"comment_id":134193982,"body_markdown":"Can you be more specific about the layout you actually want? If you just want the numeric buttons to expand so there is no gap, that is essentially covered in the [standard Oracle tutorial](https://docs.oracle.com/javafx/2/layout/size_align.htm): use `numpad[i].setMaxWidth(Double.MAX_VALUE);` and `GridPane.setFillWidth(numpad[i], true);`. If you want the columns to be the same width, use [`ColumnConstraints`](https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/ColumnConstraints.html) with `percentWidth` set. If you want something else, explain...","body":"Can you be more specific about the layout you actually want? If you just want the numeric buttons to expand so there is no gap, that is essentially covered in the <a href=\"https://docs.oracle.com/javafx/2/layout/size_align.htm\" rel=\"nofollow noreferrer\">standard Oracle tutorial</a>: use <code>numpad[i].setMaxWidth(Double.MAX_VALUE);</code> and <code>GridPane.setFillWidth(numpad[i], true);</code>. If you want the columns to be the same width, use <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/layout/ColumnConstraints.html\" rel=\"nofollow noreferrer\"><code>ColumnConstraints</code></a> with <code>percentWidth</code> set. If you want something else, explain..."},{"owner":{"account_id":28382762,"reputation":73,"user_id":21709774,"display_name":"Choosechee"},"score":0,"creation_date":1682351463,"post_id":76088432,"comment_id":134197743,"body_markdown":"@kleopatra Well, shoot, the textbook I was reading extended panes, so I thought that was what you were supposed to do.","body":"@kleopatra Well, shoot, the textbook I was reading extended panes, so I thought that was what you were supposed to do."}],"answers":[{"tags":[],"owner":{"account_id":28382762,"reputation":73,"user_id":21709774,"display_name":"Choosechee"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682351188,"creation_date":1682351188,"answer_id":76093722,"question_id":76088432,"body_markdown":"&gt; &quot;with the clear and start buttons sticking out on both sides&quot; -- If I understand this correctly, then you simply need to configure the nodes in the first column to align to the right when there&#39;s empty space. You can do this for the entire column via a ColumnConstraints or for individual nodes via GridPane#setHalignment(Node, HPos) -Slaw\r\n\r\nThank you so much! I added:\r\n\r\n```java\r\nColumnConstraints column0 = new ColumnConstraints();\r\ncolumn0.setHalignment(HPos.RIGHT);\r\ngetColumnConstraints().add(column0);\r\n```\r\n\r\nand now it looks like this:\r\n\r\n[![The first column is now aligned to the right, removing the gap][1]][1]\r\n\r\nwhich is how I wanted!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9k1kx.png","title":"How to remove a gap between nodes in a GridPane caused by different-sized nodes?","body":"<blockquote>\n<p>&quot;with the clear and start buttons sticking out on both sides&quot; -- If I understand this correctly, then you simply need to configure the nodes in the first column to align to the right when there's empty space. You can do this for the entire column via a ColumnConstraints or for individual nodes via GridPane#setHalignment(Node, HPos) -Slaw</p>\n</blockquote>\n<p>Thank you so much! I added:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ColumnConstraints column0 = new ColumnConstraints();\ncolumn0.setHalignment(HPos.RIGHT);\ngetColumnConstraints().add(column0);\n</code></pre>\n<p>and now it looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/9k1kx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9k1kx.png\" alt=\"The first column is now aligned to the right, removing the gap\" /></a></p>\n<p>which is how I wanted!</p>\n"}],"owner":{"account_id":28382762,"reputation":73,"user_id":21709774,"display_name":"Choosechee"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1682351188,"creation_date":1682307699,"question_id":76088432,"body_markdown":"I&#39;m trying to make a number pad with a clear and start button, but because the clear and start button are wider than the number buttons, there&#39;s a gap between the first two columns. Here&#39;s a picture:\r\n\r\nNumberpad with a gap between the first two columns:\r\n\r\n[![numberpad][1]][1]\r\n\r\nI&#39;ve tried looking up answers, but I haven&#39;t found anything like this. It&#39;s kinda hard to explain to a search engine.\r\n\r\nI expected the 0 button to align with the middle of the numpad (which it does), with the clear and start buttons sticking out on both sides. But it aligned the clear button with the 7 button, causing the gap. Here&#39;s a reproducible example:\r\n\r\n```java\r\nimport javafx.application.Application;\r\nimport static javafx.application.Application.launch;\r\nimport javafx.geometry.Insets;\r\nimport javafx.geometry.Pos;\r\nimport javafx.scene.Scene;\r\nimport javafx.scene.control.Button;\r\nimport javafx.scene.layout.GridPane;\r\nimport javafx.scene.text.Font;\r\nimport javafx.stage.Stage;\r\n\r\npublic class ReproducibleGap extends Application {\r\n    @Override\r\n    public void start(Stage primaryStage) {\r\n        Scene scene = new Scene(new ButtonGrid());\r\n        \r\n        primaryStage.setTitle(&quot;Numpad&quot;);\r\n        primaryStage.setScene(scene);\r\n        primaryStage.show();\r\n    }\r\n\r\n\r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n}\r\n\r\nclass ButtonGrid extends GridPane {\r\n\r\n    protected Button[] numpad = new Button[10];\r\n    protected Button clear;\r\n    protected Button start;\r\n\r\n    ButtonGrid() {\r\n        Font buttonFont = new Font(18);\r\n        for (int i = 0; i &lt; numpad.length; i++) {\r\n            numpad[i] = new Button(String.valueOf(i));\r\n            numpad[i].setFont(buttonFont);\r\n        }\r\n\r\n        setAlignment(Pos.CENTER);\r\n        setPadding(new Insets(50, 0, 0, 0));\r\n\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            addRow(i, numpad[i * 3 + 1], numpad[i * 3 + 2], numpad[i * 3 + 3]);\r\n        }\r\n\r\n        clear = new Button(&quot;Clear&quot;);\r\n        clear.setFont(buttonFont);\r\n\r\n        start = new Button(&quot;Start&quot;);\r\n        start.setFont(buttonFont);\r\n\r\n        addRow(3, clear, numpad[0], start);\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qTEzX.png","title":"How to remove a gap between nodes in a GridPane caused by different-sized nodes?","body":"<p>I'm trying to make a number pad with a clear and start button, but because the clear and start button are wider than the number buttons, there's a gap between the first two columns. Here's a picture:</p>\n<p>Numberpad with a gap between the first two columns:</p>\n<p><a href=\"https://i.stack.imgur.com/qTEzX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qTEzX.png\" alt=\"numberpad\" /></a></p>\n<p>I've tried looking up answers, but I haven't found anything like this. It's kinda hard to explain to a search engine.</p>\n<p>I expected the 0 button to align with the middle of the numpad (which it does), with the clear and start buttons sticking out on both sides. But it aligned the clear button with the 7 button, causing the gap. Here's a reproducible example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.application.Application;\nimport static javafx.application.Application.launch;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.GridPane;\nimport javafx.scene.text.Font;\nimport javafx.stage.Stage;\n\npublic class ReproducibleGap extends Application {\n    @Override\n    public void start(Stage primaryStage) {\n        Scene scene = new Scene(new ButtonGrid());\n        \n        primaryStage.setTitle(&quot;Numpad&quot;);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n\nclass ButtonGrid extends GridPane {\n\n    protected Button[] numpad = new Button[10];\n    protected Button clear;\n    protected Button start;\n\n    ButtonGrid() {\n        Font buttonFont = new Font(18);\n        for (int i = 0; i &lt; numpad.length; i++) {\n            numpad[i] = new Button(String.valueOf(i));\n            numpad[i].setFont(buttonFont);\n        }\n\n        setAlignment(Pos.CENTER);\n        setPadding(new Insets(50, 0, 0, 0));\n\n        for (int i = 0; i &lt; 3; i++) {\n            addRow(i, numpad[i * 3 + 1], numpad[i * 3 + 2], numpad[i * 3 + 3]);\n        }\n\n        clear = new Button(&quot;Clear&quot;);\n        clear.setFont(buttonFont);\n\n        start = new Button(&quot;Start&quot;);\n        start.setFont(buttonFont);\n\n        addRow(3, clear, numpad[0], start);\n    }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":10587710,"reputation":2772,"user_id":7799462,"display_name":"Halil Ozel"},"score":0,"creation_date":1682320897,"post_id":76088373,"comment_id":134190561,"body_markdown":"You should add Logs or more details.","body":"You should add Logs or more details."},{"owner":{"account_id":15431364,"reputation":770,"user_id":11132702,"display_name":"private static"},"score":0,"creation_date":1682375166,"post_id":76088373,"comment_id":134202488,"body_markdown":"Try completely uninstalling and reinstalling the app. Or rewrite the whole MainActivity.class from scratch","body":"Try completely uninstalling and reinstalling the app. Or rewrite the whole MainActivity.class from scratch"}],"answers":[{"comments":[{"owner":{"account_id":25814844,"reputation":1,"user_id":19554966,"display_name":"Theodore Myker"},"score":0,"creation_date":1682344311,"post_id":76090913,"comment_id":134195747,"body_markdown":"hmmm, it still not working, let&#39;s see full code: https://github.com/QuDaMyker/listView, please help me review this code, thanks.","body":"hmmm, it still not working, let&#39;s see full code: <a href=\"https://github.com/QuDaMyker/listView\" rel=\"nofollow noreferrer\">github.com/QuDaMyker/listView</a>, please help me review this code, thanks."},{"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"score":0,"creation_date":1682351271,"post_id":76090913,"comment_id":134197695,"body_markdown":"I edited my answer. I have used ListAdapter instead of Adapter. Try out this change.","body":"I edited my answer. I have used ListAdapter instead of Adapter. Try out this change."},{"owner":{"account_id":25814844,"reputation":1,"user_id":19554966,"display_name":"Theodore Myker"},"score":0,"creation_date":1682415254,"post_id":76090913,"comment_id":134207759,"body_markdown":"I find issue in Checkbox, when i use checkbox, i can&#39;t use onClickItemListener, if i remove checkbox, onClickItemListerner working good, now i think why haveing this issue","body":"I find issue in Checkbox, when i use checkbox, i can&#39;t use onClickItemListener, if i remove checkbox, onClickItemListerner working good, now i think why haveing this issue"}],"tags":[],"owner":{"account_id":5849714,"reputation":92,"user_id":5362509,"display_name":"Lakshmi"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682351107,"creation_date":1682331974,"answer_id":76090913,"question_id":76088373,"body_markdown":"  \r\nChange getApplicationContext() to **MainActivity.this** in your Toast statement of your MainActivity-&gt;listView.setOnItemClickListener method. Then the Toast message will show up. I tried it and it worked fine. Here is my tested code.\r\n\r\n        ListView lv = findViewById(R.id.lstv);\r\n        List&lt;String&gt; arr = new ArrayList&lt;&gt;();\r\n        arr.add(&quot;aa&quot;);\r\n        arr.add(&quot;bb&quot;);\r\n        arr.add(&quot;cc&quot;);\r\n        arr.add(&quot;dd&quot;);\r\n        arr.add(&quot;ee&quot;);\r\n        ListAdapter adapter = new ArrayAdapter&lt;String&gt;(this, androidx.appcompat.R.layout.support_simple_spinner_dropdown_item, arr);\r\n        lv.setAdapter(adapter);\r\n\r\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                Toast.makeText(MainActivity.this, &quot;Hello&quot;, Toast.LENGTH_LONG).show();\r\n\r\n            }\r\n        });","title":"Can&#39;s show toast when click - Android app","body":"<p>Change getApplicationContext() to <strong>MainActivity.this</strong> in your Toast statement of your MainActivity-&gt;listView.setOnItemClickListener method. Then the Toast message will show up. I tried it and it worked fine. Here is my tested code.</p>\n<pre><code>    ListView lv = findViewById(R.id.lstv);\n    List&lt;String&gt; arr = new ArrayList&lt;&gt;();\n    arr.add(&quot;aa&quot;);\n    arr.add(&quot;bb&quot;);\n    arr.add(&quot;cc&quot;);\n    arr.add(&quot;dd&quot;);\n    arr.add(&quot;ee&quot;);\n    ListAdapter adapter = new ArrayAdapter&lt;String&gt;(this, androidx.appcompat.R.layout.support_simple_spinner_dropdown_item, arr);\n    lv.setAdapter(adapter);\n\n    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n        @Override\n        public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n            Toast.makeText(MainActivity.this, &quot;Hello&quot;, Toast.LENGTH_LONG).show();\n\n        }\n    });\n</code></pre>\n"}],"owner":{"account_id":25814844,"reputation":1,"user_id":19554966,"display_name":"Theodore Myker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1682351107,"creation_date":1682306575,"question_id":76088373,"body_markdown":"I have a problem with listview, I can&#39;t click on item listview, I find problem in `Checkbox` it understand checkbox.setoncheckedchangeLisnter when Click, how can fix it?\r\n\r\nfullcode: https://github.com/QuDaMyker/listView\r\n\r\n`Adapter.java`\r\n[Adapter](https://i.stack.imgur.com/i3HYR.png)\r\n```java\r\npackage com.example.testlistview;\r\n\r\nimport android.content.Context;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.CheckBox;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\n\r\nimport java.util.List;\r\n\r\npublic class Adapter extends ArrayAdapter&lt;TodoClass&gt; {\r\n    private Context context;\r\n    private List&lt;TodoClass&gt; list;\r\n\r\n    public Adapter(@NonNull Context context, int resource, @NonNull List&lt;TodoClass&gt; objects) {\r\n        super(context, resource, objects);\r\n        this.context = context;\r\n        this.list = objects;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n        convertView = LayoutInflater.from(context.getApplicationContext()).inflate(R.layout.item_listview, parent, false);\r\n\r\n        TextView stt = convertView.findViewById(R.id.stt);\r\n        stt.setText(String.valueOf(position));\r\n\r\n        TextView title = convertView.findViewById(R.id.title);\r\n        title.setText(list.get(position).getTitle());\r\n\r\n        TextView date = convertView.findViewById(R.id.date);\r\n        date.setText(list.get(position).getDate());\r\n\r\n        CheckBox checkBox = convertView.findViewById(R.id.checkBox);\r\n        checkBox.setChecked(list.get(position).getChecked());\r\n\r\n        return convertView;\r\n    }\r\n}\r\n\r\n```\r\n\r\n`MainActivity`\r\n[MainActivity](https://i.stack.imgur.com/SoSQC.png)\r\n```java\r\npackage com.example.testlistview;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.CheckBox;\r\nimport android.widget.ListView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private ListView listView;\r\n    private List&lt;TodoClass&gt; list;\r\n    private Adapter adapter;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        listView = findViewById(R.id.listView);\r\n        list = new ArrayList&lt;&gt;();\r\n        list.add(new TodoClass(&quot;1&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;2&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;3&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;4&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;5&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;6&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;7&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;8&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n        list.add(new TodoClass(&quot;8&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\r\n\r\n\r\n\r\n        adapter = new Adapter(MainActivity.this, R.layout.item_listview, list);\r\n        listView.setAdapter(adapter);\r\n\r\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                Toast.makeText(getApplicationContext(), &quot;Click&quot;, Toast.LENGTH_SHORT).show();\r\n                CheckBox checkBox = view.findViewById(R.id.checkBox);\r\n\r\n                list.get(position).setChecked(!list.get(position).getChecked());\r\n                checkBox.setChecked(list.get(position).getChecked());\r\n            }\r\n        });\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n`TodoClass`\r\n[TodoClass](https://i.stack.imgur.com/5OqIm.png)\r\n```java\r\npackage com.example.testlistview;\r\n\r\npublic class TodoClass {\r\n    private String Title;\r\n    private String Desc;\r\n    private String Date;\r\n    private Boolean Checked;\r\n\r\n    public TodoClass(String title, String desc, String date, Boolean checked) {\r\n        Title = title;\r\n        Desc = desc;\r\n        Date = date;\r\n        Checked = checked;\r\n    }\r\n\r\n    public String getTitle() {\r\n        return Title;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        Title = title;\r\n    }\r\n\r\n    public String getDesc() {\r\n        return Desc;\r\n    }\r\n\r\n    public void setDesc(String desc) {\r\n        Desc = desc;\r\n    }\r\n\r\n    public String getDate() {\r\n        return Date;\r\n    }\r\n\r\n    public void setDate(String date) {\r\n        Date = date;\r\n    }\r\n\r\n    public Boolean getChecked() {\r\n        return Checked;\r\n    }\r\n\r\n    public void setChecked(Boolean checked) {\r\n        Checked = checked;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nThanks for your help, i stuck in this bug so long time :((((\r\n\r\nnot working Toast  \r\nAndroid don&#39;t show error ","title":"Can&#39;s show toast when click - Android app","body":"<p>I have a problem with listview, I can't click on item listview, I find problem in <code>Checkbox</code> it understand checkbox.setoncheckedchangeLisnter when Click, how can fix it?</p>\n<p>fullcode: <a href=\"https://github.com/QuDaMyker/listView\" rel=\"nofollow noreferrer\">https://github.com/QuDaMyker/listView</a></p>\n<p><code>Adapter.java</code>\n<a href=\"https://i.stack.imgur.com/i3HYR.png\" rel=\"nofollow noreferrer\">Adapter</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.testlistview;\n\nimport android.content.Context;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ArrayAdapter;\nimport android.widget.CheckBox;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\n\nimport java.util.List;\n\npublic class Adapter extends ArrayAdapter&lt;TodoClass&gt; {\n    private Context context;\n    private List&lt;TodoClass&gt; list;\n\n    public Adapter(@NonNull Context context, int resource, @NonNull List&lt;TodoClass&gt; objects) {\n        super(context, resource, objects);\n        this.context = context;\n        this.list = objects;\n    }\n\n    @NonNull\n    @Override\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\n        convertView = LayoutInflater.from(context.getApplicationContext()).inflate(R.layout.item_listview, parent, false);\n\n        TextView stt = convertView.findViewById(R.id.stt);\n        stt.setText(String.valueOf(position));\n\n        TextView title = convertView.findViewById(R.id.title);\n        title.setText(list.get(position).getTitle());\n\n        TextView date = convertView.findViewById(R.id.date);\n        date.setText(list.get(position).getDate());\n\n        CheckBox checkBox = convertView.findViewById(R.id.checkBox);\n        checkBox.setChecked(list.get(position).getChecked());\n\n        return convertView;\n    }\n}\n\n</code></pre>\n<p><code>MainActivity</code>\n<a href=\"https://i.stack.imgur.com/SoSQC.png\" rel=\"nofollow noreferrer\">MainActivity</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.testlistview;\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.AdapterView;\nimport android.widget.CheckBox;\nimport android.widget.ListView;\nimport android.widget.Toast;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity {\n    private ListView listView;\n    private List&lt;TodoClass&gt; list;\n    private Adapter adapter;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        listView = findViewById(R.id.listView);\n        list = new ArrayList&lt;&gt;();\n        list.add(new TodoClass(&quot;1&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;2&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;3&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;4&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;5&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;6&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;7&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;8&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n        list.add(new TodoClass(&quot;8&quot;, &quot;1&quot;, &quot;04/24/2003&quot;, false));\n\n\n\n        adapter = new Adapter(MainActivity.this, R.layout.item_listview, list);\n        listView.setAdapter(adapter);\n\n        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                Toast.makeText(getApplicationContext(), &quot;Click&quot;, Toast.LENGTH_SHORT).show();\n                CheckBox checkBox = view.findViewById(R.id.checkBox);\n\n                list.get(position).setChecked(!list.get(position).getChecked());\n                checkBox.setChecked(list.get(position).getChecked());\n            }\n        });\n\n\n\n    }\n}\n\n</code></pre>\n<p><code>TodoClass</code>\n<a href=\"https://i.stack.imgur.com/5OqIm.png\" rel=\"nofollow noreferrer\">TodoClass</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.testlistview;\n\npublic class TodoClass {\n    private String Title;\n    private String Desc;\n    private String Date;\n    private Boolean Checked;\n\n    public TodoClass(String title, String desc, String date, Boolean checked) {\n        Title = title;\n        Desc = desc;\n        Date = date;\n        Checked = checked;\n    }\n\n    public String getTitle() {\n        return Title;\n    }\n\n    public void setTitle(String title) {\n        Title = title;\n    }\n\n    public String getDesc() {\n        return Desc;\n    }\n\n    public void setDesc(String desc) {\n        Desc = desc;\n    }\n\n    public String getDate() {\n        return Date;\n    }\n\n    public void setDate(String date) {\n        Date = date;\n    }\n\n    public Boolean getChecked() {\n        return Checked;\n    }\n\n    public void setChecked(Boolean checked) {\n        Checked = checked;\n    }\n}\n\n</code></pre>\n<p>Thanks for your help, i stuck in this bug so long time :((((</p>\n<p>not working Toast<br />\nAndroid don't show error</p>\n"},{"tags":["java","android","google-translate"],"answers":[{"comments":[{"owner":{"account_id":2410471,"reputation":5958,"user_id":2105657,"accept_rate":60,"display_name":"Teo Inke"},"score":1,"creation_date":1375228735,"post_id":14789986,"comment_id":26249601,"body_markdown":"As now Google translator API is paid, isn&#39;t possible to get the result through HTTP request?","body":"As now Google translator API is paid, isn&#39;t possible to get the result through HTTP request?"}],"tags":[],"owner":{"account_id":2293110,"reputation":6721,"user_id":2015318,"accept_rate":82,"display_name":"StarsSky"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1360426332,"creation_date":1360426332,"answer_id":14789986,"question_id":14789937,"body_markdown":"Google translate provide API for retrieving translations. You should use json object and GET request to the google translate server.\r\nIn [this link][1] you can find the official Developer&#39;s Guide with code examples.\r\n\r\n\r\n  [1]: https://developers.google.com/translate/v2/using_rest?hl=it","title":"How to use Google translate API from code","body":"<p>Google translate provide API for retrieving translations. You should use json object and GET request to the google translate server.\nIn <a href=\"https://developers.google.com/translate/v2/using_rest?hl=it\" rel=\"noreferrer\">this link</a> you can find the official Developer's Guide with code examples.</p>\n"},{"tags":[],"owner":{"account_id":23126893,"reputation":21,"user_id":17232557,"display_name":"nopenope"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647502683,"creation_date":1647502683,"answer_id":71508569,"question_id":14789937,"body_markdown":"You will get json response from this\r\n\r\nhttps://translate.googleapis.com/translate_a/single?client=gtx&amp;sl=en&amp;tl=ru&amp;dt=t&amp;dt=bd&amp;dj=1&amp;q=hello\r\n\r\nHere &#39;hello&#39; is translated to russian\r\n\r\nNO API KEY REQUIRED","title":"How to use Google translate API from code","body":"<p>You will get json response from this</p>\n<p><a href=\"https://translate.googleapis.com/translate_a/single?client=gtx&amp;sl=en&amp;tl=ru&amp;dt=t&amp;dt=bd&amp;dj=1&amp;q=hello\" rel=\"nofollow noreferrer\">https://translate.googleapis.com/translate_a/single?client=gtx&amp;sl=en&amp;tl=ru&amp;dt=t&amp;dt=bd&amp;dj=1&amp;q=hello</a></p>\n<p>Here 'hello' is translated to russian</p>\n<p>NO API KEY REQUIRED</p>\n"}],"owner":{"account_id":2347509,"reputation":45,"user_id":2057343,"display_name":"user2057343"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12245,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":14789986,"answer_count":2,"score":4,"last_activity_date":1682350917,"creation_date":1360425996,"question_id":14789937,"body_markdown":"I am trying to create an app that send a word to *translate.google.com*, take the result of the translation and display it to the user. I composed the URL but I do not know how to extract the word/phrase from the webpage. \r\n\r\nExample pseudo:\r\nen is code for english and es is code for spanish\r\n\r\n    String from = &quot;en&quot;;\r\n    String to = &quot;es&quot;;\r\n    String word = &quot;hello&quot;; //this will be user input text really\r\n    String URL = &quot;http://www.translate.google.com/#&quot; + from + &quot;/&quot; + to + &quot;/&quot; + word;\r\n\r\nTherefore the request URL will look like http://www.translate.google.com/#en/es/hello\r\n\r\nI now need to be able to retrieve the information from the result box and place it in a String so I can display it to the user. \r\n","title":"How to use Google translate API from code","body":"<p>I am trying to create an app that send a word to <em>translate.google.com</em>, take the result of the translation and display it to the user. I composed the URL but I do not know how to extract the word/phrase from the webpage. </p>\n\n<p>Example pseudo:\nen is code for english and es is code for spanish</p>\n\n<pre><code>String from = \"en\";\nString to = \"es\";\nString word = \"hello\"; //this will be user input text really\nString URL = \"http://www.translate.google.com/#\" + from + \"/\" + to + \"/\" + word;\n</code></pre>\n\n<p>Therefore the request URL will look like <a href=\"http://www.translate.google.com/#en/es/hello\" rel=\"nofollow\">http://www.translate.google.com/#en/es/hello</a></p>\n\n<p>I now need to be able to retrieve the information from the result box and place it in a String so I can display it to the user. </p>\n"},{"tags":["java","serialization","apache-kafka","apache-kafka-streams","avro"],"owner":{"account_id":14197413,"reputation":169,"user_id":10256308,"display_name":"David Breton"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682350551,"creation_date":1682327930,"question_id":76090400,"body_markdown":"I wrote a Serde for Kafka streams. My Serde class has generic type. It works fine when I explicitly pass it in an API method (overriding the default) but it doesn&#39;t work when I specify it via the ```Properties``` to set it as default.\r\n\r\nSo I look up the [docs][1] and it indeed tells me I cannot do this:\r\n\r\n&gt; If a ```Serde``` is specified via ```Properties```, the ```Serde``` class cannot have generic types, i.e., a class ```MySerde&lt;T extends Number&gt; implements Serde&lt;T&gt;``` cannot be used. This implies that you cannot use any ```Serde``` that is created via ```Serdes.serdeFrom(Serializer&lt;T&gt;, Deserializer&lt;T&gt;)```. Only fully typed ```Serde``` classes like ```MySerde implements Serde&lt;MyCustomType&gt;``` are supported due to Java type erasure.\r\n\r\nOk, fine. However there is [SpecificAvroSerde][2] which works just fine when specified in the ```Properties``` like so:\r\n```\r\nstreamsConfiguration.put(StreamsConfig.VALUE_SERDE_CLASS_CONFIG, SpecificAvroSerde.class);\r\n```\r\nHere&#39;s the first few lines of the class definition from GitHub\r\n\r\n```\r\npublic class SpecificAvroSerde&lt;T extends org.apache.avro.specific.SpecificRecord&gt; implements Serde&lt;T&gt; {\r\n  private final Serde&lt;T&gt; inner;\r\n\r\n  public SpecificAvroSerde() {\r\n    inner = Serdes.serdeFrom(new SpecificAvroSerializer&lt;T&gt;(), new SpecificAvroDeserializer&lt;T&gt;());\r\n  }\r\n```\r\nIsn&#39;t that a direct contradiction of the documentation? Why is it that ```SpecificAvroSerde``` works just fine when specified as default in the ```Properties```?\r\n\r\n  [1]: https://docs.confluent.io/platform/current/streams/developer-guide/datatypes.html#kstreams-data-types-and-serialization\r\n  [2]: https://github.com/confluentinc/schema-registry/blob/master/avro-serde/src/main/java/io/confluent/kafka/streams/serdes/avro/SpecificAvroSerde.java","title":"Kafka Streams Serdes for Generic type","body":"<p>I wrote a Serde for Kafka streams. My Serde class has generic type. It works fine when I explicitly pass it in an API method (overriding the default) but it doesn't work when I specify it via the <code>Properties</code> to set it as default.</p>\n<p>So I look up the <a href=\"https://docs.confluent.io/platform/current/streams/developer-guide/datatypes.html#kstreams-data-types-and-serialization\" rel=\"nofollow noreferrer\">docs</a> and it indeed tells me I cannot do this:</p>\n<blockquote>\n<p>If a <code>Serde</code> is specified via <code>Properties</code>, the <code>Serde</code> class cannot have generic types, i.e., a class <code>MySerde&lt;T extends Number&gt; implements Serde&lt;T&gt;</code> cannot be used. This implies that you cannot use any <code>Serde</code> that is created via <code>Serdes.serdeFrom(Serializer&lt;T&gt;, Deserializer&lt;T&gt;)</code>. Only fully typed <code>Serde</code> classes like <code>MySerde implements Serde&lt;MyCustomType&gt;</code> are supported due to Java type erasure.</p>\n</blockquote>\n<p>Ok, fine. However there is <a href=\"https://github.com/confluentinc/schema-registry/blob/master/avro-serde/src/main/java/io/confluent/kafka/streams/serdes/avro/SpecificAvroSerde.java\" rel=\"nofollow noreferrer\">SpecificAvroSerde</a> which works just fine when specified in the <code>Properties</code> like so:</p>\n<pre><code>streamsConfiguration.put(StreamsConfig.VALUE_SERDE_CLASS_CONFIG, SpecificAvroSerde.class);\n</code></pre>\n<p>Here's the first few lines of the class definition from GitHub</p>\n<pre><code>public class SpecificAvroSerde&lt;T extends org.apache.avro.specific.SpecificRecord&gt; implements Serde&lt;T&gt; {\n  private final Serde&lt;T&gt; inner;\n\n  public SpecificAvroSerde() {\n    inner = Serdes.serdeFrom(new SpecificAvroSerializer&lt;T&gt;(), new SpecificAvroDeserializer&lt;T&gt;());\n  }\n</code></pre>\n<p>Isn't that a direct contradiction of the documentation? Why is it that <code>SpecificAvroSerde</code> works just fine when specified as default in the <code>Properties</code>?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3064268,"reputation":3881,"user_id":2596334,"accept_rate":97,"display_name":"Scott Solmer"},"score":3,"creation_date":1427283535,"post_id":29254573,"comment_id":46712147,"body_markdown":"Sharing your research helps everyone. Tell us what you&#39;ve tried and why it didn’t meet your needs. This demonstrates that you’ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! Also see [how to ask](http://stackoverflow.com/help/how-to-ask)","body":"Sharing your research helps everyone. Tell us what you&#39;ve tried and why it didn’t meet your needs. This demonstrates that you’ve taken the time to try to help yourself, it saves us from reiterating obvious answers, and most of all it helps you get a more specific and relevant answer! Also see <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a>"},{"owner":{"account_id":5352280,"reputation":491,"user_id":4266091,"accept_rate":80,"display_name":"McShep"},"score":0,"creation_date":1427283615,"post_id":29254573,"comment_id":46712199,"body_markdown":"in some exceptional languages (such as Scala) yes as you are able to define functions within the interface, though in genereally no (such as c#), as you would never be able to access the parametes","body":"in some exceptional languages (such as Scala) yes as you are able to define functions within the interface, though in genereally no (such as c#), as you would never be able to access the parametes"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1427283765,"post_id":29254573,"comment_id":46712293,"body_markdown":"`interface` purpose is to define interface, not state. State is *class* domain. Also `private` means that it will not be accessible directly by subclass so how would you want to access it?","body":"<code>interface</code> purpose is to define interface, not state. State is <i>class</i> domain. Also <code>private</code> means that it will not be accessible directly by subclass so how would you want to access it?"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":1,"creation_date":1427283877,"post_id":29254573,"comment_id":46712370,"body_markdown":"I&#39;m voting to close this question as off-topic because this is addressed eloquently by the [official Java documentation](http://docs.oracle.com/javase/tutorial/java/IandI/interfaceDef.html), which the user could have consulted prior to asking.","body":"I&#39;m voting to close this question as off-topic because this is addressed eloquently by the <a href=\"http://docs.oracle.com/javase/tutorial/java/IandI/interfaceDef.html\" rel=\"nofollow noreferrer\">official Java documentation</a>, which the user could have consulted prior to asking."},{"owner":{"account_id":5352280,"reputation":491,"user_id":4266091,"accept_rate":80,"display_name":"McShep"},"score":0,"creation_date":1427283941,"post_id":29254573,"comment_id":46712415,"body_markdown":"I agree, though a language was not specified by the original question","body":"I agree, though a language was not specified by the original question"},{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1427283987,"post_id":29254573,"comment_id":46712444,"body_markdown":"@McShep that would have made it even a worse question in my opinion.","body":"@McShep that would have made it even a worse question in my opinion."}],"answers":[{"comments":[{"owner":{"account_id":5352280,"reputation":491,"user_id":4266091,"accept_rate":80,"display_name":"McShep"},"score":0,"creation_date":1427283815,"post_id":29254659,"comment_id":46712320,"body_markdown":"though in some languages such as Scala the interface is different as is a trait, so it is possible, but is dependent on langauge, then again... it isnt an interface in that case so no","body":"though in some languages such as Scala the interface is different as is a trait, so it is possible, but is dependent on langauge, then again... it isnt an interface in that case so no"},{"owner":{"account_id":312681,"reputation":7087,"user_id":626894,"accept_rate":75,"display_name":"Bill Gregg"},"score":0,"creation_date":1427283901,"post_id":29254659,"comment_id":46712393,"body_markdown":"@McShep Thanks for the info. I&#39;ve not written Scala before.","body":"@McShep Thanks for the info. I&#39;ve not written Scala before."},{"owner":{"account_id":4707943,"reputation":223,"user_id":3809427,"display_name":"Loran"},"score":0,"creation_date":1665116889,"post_id":29254659,"comment_id":130628723,"body_markdown":"Is it desirable that member variables used only in methods of the interface are private? (For example, `Random RANDOM = new Random();` is desirable to be initialized only once.)","body":"Is it desirable that member variables used only in methods of the interface are private? (For example, <code>Random RANDOM = new Random();</code> is desirable to be initialized only once.)"}],"tags":[],"owner":{"account_id":312681,"reputation":7087,"user_id":626894,"accept_rate":75,"display_name":"Bill Gregg"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1427283681,"creation_date":1427283681,"answer_id":29254659,"question_id":29254573,"body_markdown":"Having private or protected members in an interface doesn&#39;t make sense conceptually. By definition something that is &quot;private&quot; isn&#39;t exposed and therefore, anyone consuming the interface would not care if the implementing class had a private email field or not.\r\n\r\nOnly public members matter to the code consuming the interface.","title":"Can we use private or protected member variables in an interface?","body":"<p>Having private or protected members in an interface doesn't make sense conceptually. By definition something that is \"private\" isn't exposed and therefore, anyone consuming the interface would not care if the implementing class had a private email field or not.</p>\n\n<p>Only public members matter to the code consuming the interface.</p>\n"},{"tags":[],"owner":{"account_id":5986627,"reputation":161,"user_id":4704031,"display_name":"Dani"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1427283685,"creation_date":1427283685,"answer_id":29254663,"question_id":29254573,"body_markdown":"being java\r\n\r\n&gt; only public, static &amp; final are permitted\r\n\r\nYou should use an `abstract` class instead of an `interface` if you want to declare its fields.","title":"Can we use private or protected member variables in an interface?","body":"<p>being java</p>\n\n<blockquote>\n  <p>only public, static &amp; final are permitted</p>\n</blockquote>\n\n<p>You should use an <code>abstract</code> class instead of an <code>interface</code> if you want to declare its fields.</p>\n"}],"owner":{"account_id":2651905,"reputation":191,"user_id":2293345,"accept_rate":0,"display_name":"Tamanna Iruu"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15777,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"answer_count":2,"score":8,"last_activity_date":1682350146,"creation_date":1427283442,"question_id":29254573,"body_markdown":"Is it possible to define an interface like this:\r\n   \r\n    public interface Test{\r\n       public string name1;\r\n       private String email;\r\n       protected pass;\r\n    }\r\n","title":"Can we use private or protected member variables in an interface?","body":"<p>Is it possible to define an interface like this:</p>\n\n<pre><code>public interface Test{\n   public string name1;\n   private String email;\n   protected pass;\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","testng","pageobjects","webdriver-manager"],"comments":[{"owner":{"account_id":70917,"reputation":17743,"user_id":205233,"accept_rate":90,"display_name":"Filburt"},"score":1,"creation_date":1682319899,"post_id":76089262,"comment_id":134190405,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":28394370,"reputation":11,"user_id":21719642,"display_name":"Hoxzy"},"score":0,"creation_date":1682324154,"post_id":76089262,"comment_id":134191227,"body_markdown":"Fixed it, i forgot to add public access modifiers for methods in TestBase class, this solved the problem","body":"Fixed it, i forgot to add public access modifiers for methods in TestBase class, this solved the problem"},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":1,"creation_date":1682344298,"post_id":76089262,"comment_id":134195745,"body_markdown":"Since this question is already answered, you should either delete the question or add your own answer and accept it so it doesn&#39;t appear to be unanswered.","body":"Since this question is already answered, you should either delete the question or add your own answer and accept it so it doesn&#39;t appear to be unanswered."}],"answers":[{"tags":[],"owner":{"account_id":28394370,"reputation":11,"user_id":21719642,"display_name":"Hoxzy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682350083,"creation_date":1682350083,"answer_id":76093553,"question_id":76089262,"body_markdown":"Fixed it, i forgot to add public access modifiers for methods in TestBase class, this solved the problem","title":"NullPointerException Cannot invoke &quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null","body":"<p>Fixed it, i forgot to add public access modifiers for methods in TestBase class, this solved the problem</p>\n"}],"owner":{"account_id":28394370,"reputation":11,"user_id":21719642,"display_name":"Hoxzy"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":490,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1682350083,"creation_date":1682319321,"question_id":76089262,"body_markdown":"I am encountering a java.lang.NullPointerException error when trying to run my Selenium test with TestNG. The error message states: Cannot invoke **&quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null.**\r\n\r\nI have provided the relevant code snippets below:\r\n\r\nLandingPage (Page Object class):\r\n\r\n```java\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\nimport org.openqa.selenium.support.FindBy;\r\nimport org.openqa.selenium.support.PageFactory;\r\n\r\npublic class LandingPage {\r\n\r\n    @FindBy(linkText = &quot;Enter the Store&quot;)\r\n    private WebElement linkToStore;\r\n\r\n    public LandingPage(WebDriver driver) {\r\n      \r\n        PageFactory.initElements(driver, this);\r\n    }\r\n\r\n    public void enterTheStore() {\r\n        linkToStore.click();\r\n    }\r\n}\r\n\r\n```\r\n\r\nTestBase (Test base class):\r\n\r\n```java\r\n\r\nimport io.github.bonigarcia.wdm.WebDriverManager;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.chrome.ChromeDriver;\r\nimport org.testng.annotations.AfterMethod;\r\nimport org.testng.annotations.BeforeMethod;\r\nimport org.testng.annotations.BeforeTest;\r\n\r\nimport java.time.Duration;\r\n\r\npublic class TestBase {\r\n    public WebDriver driver;\r\n\r\n    @BeforeTest\r\n    void setUpAll() {\r\n        WebDriverManager.chromedriver().setup();\r\n    }\r\n\r\n    @BeforeMethod\r\n    void setupEach() {\r\n        driver = new ChromeDriver();\r\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\r\n        driver.get(&quot;http://przyklady.javastart.pl/jpetstore/&quot;);\r\n    }\r\n\r\n    @AfterMethod\r\n    void quit() {\r\n        driver.close();\r\n        driver.quit();\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\nFailedLoginTest (Test class):\r\n\r\n```java\r\n\r\nimport com.javastart.buildingFramework.page.objects.LandingPage;\r\nimport com.javastart.tests.base.TestBase;\r\nimport org.testng.annotations.Test;\r\n\r\npublic class FailedLoginTest extends TestBase {\r\n\r\n    @Test\r\n    void failedLoginTest() throws InterruptedException {\r\n        LandingPage landingPage = new LandingPage(driver);\r\n        landingPage.enterTheStore();\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nWhen I try to run FailedLoginTest, I got this error: **java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null** and Im not sure why is it being thrown. Any help will be appreciated :)","title":"NullPointerException Cannot invoke &quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null","body":"<p>I am encountering a java.lang.NullPointerException error when trying to run my Selenium test with TestNG. The error message states: Cannot invoke <strong>&quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null.</strong></p>\n<p>I have provided the relevant code snippets below:</p>\n<p>LandingPage (Page Object class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.FindBy;\nimport org.openqa.selenium.support.PageFactory;\n\npublic class LandingPage {\n\n    @FindBy(linkText = &quot;Enter the Store&quot;)\n    private WebElement linkToStore;\n\n    public LandingPage(WebDriver driver) {\n      \n        PageFactory.initElements(driver, this);\n    }\n\n    public void enterTheStore() {\n        linkToStore.click();\n    }\n}\n\n</code></pre>\n<p>TestBase (Test base class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport io.github.bonigarcia.wdm.WebDriverManager;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.BeforeTest;\n\nimport java.time.Duration;\n\npublic class TestBase {\n    public WebDriver driver;\n\n    @BeforeTest\n    void setUpAll() {\n        WebDriverManager.chromedriver().setup();\n    }\n\n    @BeforeMethod\n    void setupEach() {\n        driver = new ChromeDriver();\n        driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(10));\n        driver.get(&quot;http://przyklady.javastart.pl/jpetstore/&quot;);\n    }\n\n    @AfterMethod\n    void quit() {\n        driver.close();\n        driver.quit();\n    }\n}\n\n\n</code></pre>\n<p>FailedLoginTest (Test class):</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport com.javastart.buildingFramework.page.objects.LandingPage;\nimport com.javastart.tests.base.TestBase;\nimport org.testng.annotations.Test;\n\npublic class FailedLoginTest extends TestBase {\n\n    @Test\n    void failedLoginTest() throws InterruptedException {\n        LandingPage landingPage = new LandingPage(driver);\n        landingPage.enterTheStore();\n    }\n}\n\n</code></pre>\n<p>When I try to run FailedLoginTest, I got this error: <strong>java.lang.NullPointerException: Cannot invoke &quot;org.openqa.selenium.SearchContext.findElement(org.openqa.selenium.By)&quot; because &quot;this.searchContext&quot; is null</strong> and Im not sure why is it being thrown. Any help will be appreciated :)</p>\n"},{"tags":["java","android","android-camera"],"comments":[{"owner":{"account_id":6312781,"reputation":1240,"user_id":4903809,"accept_rate":75,"display_name":"NGR"},"score":0,"creation_date":1509201054,"post_id":36715739,"comment_id":80928125,"body_markdown":"Did you find answer of this?","body":"Did you find answer of this?"},{"owner":{"account_id":1977945,"reputation":1333,"user_id":1775292,"accept_rate":80,"display_name":"Dmitrijs"},"score":0,"creation_date":1553249623,"post_id":36715739,"comment_id":97322979,"body_markdown":"Can you debug it? What exactly not working? Also, test mlKit on a real device, I was unable to get bytes from cameraSource on emulator.","body":"Can you debug it? What exactly not working? Also, test mlKit on a real device, I was unable to get bytes from cameraSource on emulator."}],"answers":[{"tags":[],"owner":{"account_id":28341280,"reputation":1,"user_id":21674230,"display_name":"somedude"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682349926,"creation_date":1681834575,"answer_id":76046871,"question_id":36715739,"body_markdown":"For anyone who finds this, there its a problem in the variable path. \r\n\r\nJust change: \r\n```\r\nString path = getExternalFilesDir(Environment.DIRECTORY_DCIM).getPath();\r\n```\r\nto:\r\n```\r\nString path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getAbsolutePath();\r\n```\r\n\r\nand add line `file.createNewFile();` after `new File()` like so:\r\n\r\n\r\n    File file = new File(path, &quot;FitnessGirl&quot;+&quot;.jpg&quot;);\r\n\r\n    try {\r\n        file.createNewFile();\r\n    }catch(Exception e){\r\n        e.printStackTrace();\r\n    }","title":"camerasource takepicture is not working","body":"<p>For anyone who finds this, there its a problem in the variable path.</p>\n<p>Just change:</p>\n<pre><code>String path = getExternalFilesDir(Environment.DIRECTORY_DCIM).getPath();\n</code></pre>\n<p>to:</p>\n<pre><code>String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getAbsolutePath();\n</code></pre>\n<p>and add line <code>file.createNewFile();</code> after <code>new File()</code> like so:</p>\n<pre><code>File file = new File(path, &quot;FitnessGirl&quot;+&quot;.jpg&quot;);\n\ntry {\n    file.createNewFile();\n}catch(Exception e){\n    e.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":7240772,"reputation":595,"user_id":5524420,"accept_rate":50,"display_name":"Mithun Kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2564,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1682349926,"creation_date":1461061783,"question_id":36715739,"body_markdown":"I am trying to capture and save the image from camera using this project https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker\r\n\r\nThe code to capture image is in face track activity java file\r\n\r\n\tfinal CameraSource.ShutterCallback shutterCallback = new CameraSource.ShutterCallback() {\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onShutter() {\r\n\t\t\t\t\tLog.d(TAG, &quot;onShutter&quot;);\r\n\t\t\t\t\tToast.makeText(view.getContext(),&quot;sd&quot;,Toast.LENGTH_SHORT).show();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tCameraSource.PictureCallback myPictureCallback_JPG = new CameraSource.PictureCallback(){\r\n\t\t\t\t@Override\r\n\t\t\t\tpublic void onPictureTaken(byte[] arg0) {\r\n\t\t\t\tBitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);\r\n\r\n\t\t\t\t//save file\r\n\t\t\t\tString path = Environment.DIRECTORY_DCIM.toString();\r\n\t\t\t\t//Toast.makeText(getApplicationContext(),path,Toast.LENGTH_SHORT).show();\r\n\t\t\t\tOutputStream fOut = null;\r\n\t\t\t\tFile file = new File(path, &quot;FitnessGirl&quot;+&quot;.jpg&quot;); // the File to save to\r\n\t\t\t\ttry{\r\n\t\t\t\t\tfOut = new FileOutputStream(file);\r\n\t\t\t\t\tbitmapPicture.compress(Bitmap.CompressFormat.JPEG, 85, fOut); // saving the Bitmap to a file compressed as a JPEG with 85% compression rate\r\n\t\t\t\t\tMediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());\r\n\t\t\t\t\tfOut.flush();\r\n\t\t\t\t\tfOut.close(); // do not forget to close the stream\r\n\r\n\t\t\t\t}catch (FileNotFoundException exception){\r\n\r\n\t\t\t\t}catch (IOException e){\r\n\r\n\t\t\t\t}\r\n\t\t\t\t//save file\r\n\t\t\t\t}};\r\n\r\n\t\t\tmCameraSource.takePicture(shutterCallback, myPictureCallback_JPG);\r\n\r\n\r\nabove code is not working, can anyone help?","title":"camerasource takepicture is not working","body":"<p>I am trying to capture and save the image from camera using this project <a href=\"https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker\" rel=\"nofollow\">https://github.com/googlesamples/android-vision/tree/master/visionSamples/FaceTracker</a></p>\n\n<p>The code to capture image is in face track activity java file</p>\n\n<pre><code>final CameraSource.ShutterCallback shutterCallback = new CameraSource.ShutterCallback() {\n            @Override\n            public void onShutter() {\n                Log.d(TAG, \"onShutter\");\n                Toast.makeText(view.getContext(),\"sd\",Toast.LENGTH_SHORT).show();\n            }\n        };\n        CameraSource.PictureCallback myPictureCallback_JPG = new CameraSource.PictureCallback(){\n            @Override\n            public void onPictureTaken(byte[] arg0) {\n            Bitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);\n\n            //save file\n            String path = Environment.DIRECTORY_DCIM.toString();\n            //Toast.makeText(getApplicationContext(),path,Toast.LENGTH_SHORT).show();\n            OutputStream fOut = null;\n            File file = new File(path, \"FitnessGirl\"+\".jpg\"); // the File to save to\n            try{\n                fOut = new FileOutputStream(file);\n                bitmapPicture.compress(Bitmap.CompressFormat.JPEG, 85, fOut); // saving the Bitmap to a file compressed as a JPEG with 85% compression rate\n                MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName());\n                fOut.flush();\n                fOut.close(); // do not forget to close the stream\n\n            }catch (FileNotFoundException exception){\n\n            }catch (IOException e){\n\n            }\n            //save file\n            }};\n\n        mCameraSource.takePicture(shutterCallback, myPictureCallback_JPG);\n</code></pre>\n\n<p>above code is not working, can anyone help?</p>\n"},{"tags":["java","spring-boot","design-patterns","spring-data-jpa","callback"],"comments":[{"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"score":0,"creation_date":1682298416,"post_id":76082820,"comment_id":134188346,"body_markdown":"@xerx593 user:592355 https://stackoverflow.com/users/592355/xerx593 what happened? :/","body":"@xerx593 user:592355 <a href=\"https://stackoverflow.com/users/592355/xerx593\">stackoverflow.com/users/592355/xerx593</a> what happened? :/"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682347360,"post_id":76082820,"comment_id":134196606,"body_markdown":"Sorry, I deleted, but hope you still have the &quot;useful links&quot;...going deeper, I started to doubt my answer/approach","body":"Sorry, I deleted, but hope you still have the &quot;useful links&quot;...going deeper, I started to doubt my answer/approach"},{"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"score":0,"creation_date":1682350071,"post_id":76082820,"comment_id":134197365,"body_markdown":"Yes, I think so. Basically I am getting different Entities from the third party class, depending on what request(Entity) is passed to the third party class from the controller. And I want to save all this list of Entities in the database. Each Entity can have its own table. So when /employee is called, the third party class wil return a list of Employees, and I want to save it to the Employee database table. When Contractor is called, I get back a list of contractors and I want to save them to the database tabe Contractor.","body":"Yes, I think so. Basically I am getting different Entities from the third party class, depending on what request(Entity) is passed to the third party class from the controller. And I want to save all this list of Entities in the database. Each Entity can have its own table. So when /employee is called, the third party class wil return a list of Employees, and I want to save it to the Employee database table. When Contractor is called, I get back a list of contractors and I want to save them to the database tabe Contractor."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682364390,"post_id":76082820,"comment_id":134200577,"body_markdown":"[here](https://github.com/xerx593/demo-generic-mj) we can play :)","body":"<a href=\"https://github.com/xerx593/demo-generic-mj\" rel=\"nofollow noreferrer\">here</a> we can play :)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682365610,"post_id":76082820,"comment_id":134200809,"body_markdown":"so first of all, we should clarify/identify: do we need &quot;prototype&quot; scope? (since that complicates some) ... for &quot;generic bean&quot; (definitions), [this](https://stackoverflow.com/q/51624481/592355) is sweat!","body":"so first of all, we should clarify/identify: do we need &quot;prototype&quot; scope? (since that complicates some) ... for &quot;generic bean&quot; (definitions), <a href=\"https://stackoverflow.com/q/51624481/592355\">this</a> is sweat!"},{"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"score":0,"creation_date":1682366611,"post_id":76082820,"comment_id":134201008,"body_markdown":"Going through your example and tyring to understand it..I was thinking to simplify things we don&#39;t need the CallbackImpl to be a Spring managed bean? It can be a simple java class with type T. The common service will call this class and pass in the type T. The Employee service will call in the common service and pass in type T. I only want to save the entities, so I have EmployeeRepository in EmployeeService, and pass it to the common service, which passes it to the CallBackImpl, which does a saveAll(employees). If that makes sense. Will read up on ObjectProvider to understand your code","body":"Going through your example and tyring to understand it..I was thinking to simplify things we don&#39;t need the CallbackImpl to be a Spring managed bean? It can be a simple java class with type T. The common service will call this class and pass in the type T. The Employee service will call in the common service and pass in type T. I only want to save the entities, so I have EmployeeRepository in EmployeeService, and pass it to the common service, which passes it to the CallBackImpl, which does a saveAll(employees). If that makes sense. Will read up on ObjectProvider to understand your code"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":1,"creation_date":1682366717,"post_id":76082820,"comment_id":134201043,"body_markdown":"in test i use it (ObjectProvider with according generic parameter) only as a &quot;collection&quot; of all services, elsewhere i use it to obtain &quot;fresh prototypes&quot;","body":"in test i use it (ObjectProvider with according generic parameter) only as a &quot;collection&quot; of all services, elsewhere i use it to obtain &quot;fresh prototypes&quot;"}],"owner":{"account_id":2842013,"reputation":1289,"user_id":2441441,"accept_rate":65,"display_name":"user2441441"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1682349845,"creation_date":1682216170,"question_id":76082820,"body_markdown":"I&#39;m confused about the design using Spring boot and JPA when callbacks are involved.\r\n\r\nExample:\r\n\r\nController will call the Service class and pass in the value of T, i.e Employee in our example:\r\n\r\n    @Controller\r\n    public class Controller1{\r\n     \r\n     @Autowired\r\n     Service1 service1;\r\n\r\n     @RequestMapping(&quot;/employee&quot;)\r\n      public ResponseEntity&lt;Object&gt; employees(Request request){\r\n        //Since employee is called I know that T should be of type Employee\r\n        service1.runService(new Employee()); //I want to pass the type T as \r\n                                           //Employee, so that in the \r\n                                           //database all Employees can be saved\r\n      }\r\n\r\n\r\n    }\r\n\r\nI have a service:\r\n\r\n     \r\n    //Controller will call this service and pass in T type\r\n    @Service\r\n    public class Service1{\r\n      @Autowired\r\n      Dependency1 dependency1;\r\n    \r\n     //@Autowire CallbackImpl -&gt; this won&#39;t work because I need to create a new \r\n     //                          instance of type T for each different request from \r\n     //                            controller\r\n    \r\n\r\n    public void runService(T t){\r\n    //CallbackImpl&lt;Employee&gt; callbackImpl= new CallbackImpl&lt;&gt;();-&gt; this won&#39;t work because \r\n                                           //           it is not managed by Spring\r\n                                           //           and the Repository bean \r\n                                           //           throws null pointer exception\r\n      \r\n       //Here I want to invoke the callbackImpl&lt;T&gt; class and specify the type T.. \r\n       // ..(which will be  an Entity type)\r\n      \r\n      ThirdPartyClass.get(callbackImpl) // callbackImpl is of type T (i.e Employee \r\n                                        // in this example)\r\n     }\r\n    }\r\n\r\nThis ThirdPartyClass.get() method provides an interface IThirdPartyCallback.\r\n\r\nMy class CallbackImpl implements this interface, gets the values and saves it to database like this:\r\n\r\n    CallbackImpl&lt;T&gt; implements IThirdPartyCallback{\r\n     \r\n    @Autowired\r\n    BaseRepository&lt;T, Long&gt; baseRepository // The sub-class EmployeeRepository \r\n                                           //..that \r\n                                          //..implements BaseRepository is called \r\n                                          //..based on type T\r\n    \r\n    @Override\r\n    public void callback(String result){\r\n    // convert result to List&lt;T&gt; type, in this example T is Employee\r\n\r\n    baseRepository.saveAll(listOfResultsOfTypeT);  //in this result will be converted to List&lt;T&gt; \r\n                                     //and saved. In this example result will be \r\n                                     // List&lt;Employee&gt;\r\n    }\r\n      }\r\n\r\n\r\nI need multiple instances/beans of CallbackImpl. What would be a recommended wat to achieve that?\r\n\r\n1. I could create a Factory with a @Configuration, and have a method return a new CallbackImpl&lt;T&gt; bean for every request\r\n\r\n2. Perhaps I could remove Autowired from the BaseRepository, and pass in the BaseRepository through the Service -&gt; Is this a good design? i.e Repository should be only defined in Service and the Service passes around the Repository  bean with helper classes when needed?\r\n\r\n3. Declare the CallbackImpl as prototype scope. It&#39;s not clear to me how I will call create new instances each time with a different type T using this approach.\r\n\r\n4. Perhaps I can create N repositories with N services for N entities that I want to save in the database tables. And have N controllers as well, so this entire problem is eliminated, but this looks like a lot of similar code repeated, if all I&#39;m doing is saving different types of entities like Employee, Contractor, Chair etc. i.e unrelated entities.\r\n\r\n5. Use EntityManger somehow to persist different entities\r\n\r\nOr is this completely bonkers and there is a much better way to get what I want using a much better or simpler design?","title":"Design classes using Spring boot, JPA using callbacks of generic type","body":"<p>I'm confused about the design using Spring boot and JPA when callbacks are involved.</p>\n<p>Example:</p>\n<p>Controller will call the Service class and pass in the value of T, i.e Employee in our example:</p>\n<pre><code>@Controller\npublic class Controller1{\n \n @Autowired\n Service1 service1;\n\n @RequestMapping(&quot;/employee&quot;)\n  public ResponseEntity&lt;Object&gt; employees(Request request){\n    //Since employee is called I know that T should be of type Employee\n    service1.runService(new Employee()); //I want to pass the type T as \n                                       //Employee, so that in the \n                                       //database all Employees can be saved\n  }\n\n\n}\n</code></pre>\n<p>I have a service:</p>\n<pre><code>//Controller will call this service and pass in T type\n@Service\npublic class Service1{\n  @Autowired\n  Dependency1 dependency1;\n\n //@Autowire CallbackImpl -&gt; this won't work because I need to create a new \n //                          instance of type T for each different request from \n //                            controller\n\n\npublic void runService(T t){\n//CallbackImpl&lt;Employee&gt; callbackImpl= new CallbackImpl&lt;&gt;();-&gt; this won't work because \n                                       //           it is not managed by Spring\n                                       //           and the Repository bean \n                                       //           throws null pointer exception\n  \n   //Here I want to invoke the callbackImpl&lt;T&gt; class and specify the type T.. \n   // ..(which will be  an Entity type)\n  \n  ThirdPartyClass.get(callbackImpl) // callbackImpl is of type T (i.e Employee \n                                    // in this example)\n }\n}\n</code></pre>\n<p>This ThirdPartyClass.get() method provides an interface IThirdPartyCallback.</p>\n<p>My class CallbackImpl implements this interface, gets the values and saves it to database like this:</p>\n<pre><code>CallbackImpl&lt;T&gt; implements IThirdPartyCallback{\n \n@Autowired\nBaseRepository&lt;T, Long&gt; baseRepository // The sub-class EmployeeRepository \n                                       //..that \n                                      //..implements BaseRepository is called \n                                      //..based on type T\n\n@Override\npublic void callback(String result){\n// convert result to List&lt;T&gt; type, in this example T is Employee\n\nbaseRepository.saveAll(listOfResultsOfTypeT);  //in this result will be converted to List&lt;T&gt; \n                                 //and saved. In this example result will be \n                                 // List&lt;Employee&gt;\n}\n  }\n</code></pre>\n<p>I need multiple instances/beans of CallbackImpl. What would be a recommended wat to achieve that?</p>\n<ol>\n<li><p>I could create a Factory with a @Configuration, and have a method return a new CallbackImpl bean for every request</p>\n</li>\n<li><p>Perhaps I could remove Autowired from the BaseRepository, and pass in the BaseRepository through the Service -&gt; Is this a good design? i.e Repository should be only defined in Service and the Service passes around the Repository  bean with helper classes when needed?</p>\n</li>\n<li><p>Declare the CallbackImpl as prototype scope. It's not clear to me how I will call create new instances each time with a different type T using this approach.</p>\n</li>\n<li><p>Perhaps I can create N repositories with N services for N entities that I want to save in the database tables. And have N controllers as well, so this entire problem is eliminated, but this looks like a lot of similar code repeated, if all I'm doing is saving different types of entities like Employee, Contractor, Chair etc. i.e unrelated entities.</p>\n</li>\n<li><p>Use EntityManger somehow to persist different entities</p>\n</li>\n</ol>\n<p>Or is this completely bonkers and there is a much better way to get what I want using a much better or simpler design?</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9746,"page":479,"page_size":100}
