{"items":[{"tags":["java","cucumber","gherkin","serenity"],"comments":[{"owner":{"account_id":29512370,"reputation":1,"user_id":22617123,"display_name":"michael Schreiber"},"score":0,"creation_date":1695661434,"post_id":77160625,"comment_id":136051399,"body_markdown":"I am not exactly sure what you&#39;re saying. This is my first post on SO and I am not allowed to embed images in my posts yet.","body":"I am not exactly sure what you&#39;re saying. This is my first post on SO and I am not allowed to embed images in my posts yet."}],"owner":{"account_id":29512370,"reputation":1,"user_id":22617123,"display_name":"michael Schreiber"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695416244,"creation_date":1695416178,"question_id":77160625,"body_markdown":"I am trying to take an ID string value that is generated in the network response log after the webapp hits an API and generates an object. The object has an ID value that is present in the network &gt; response log and I need to copy it so I can use the value in other test steps. \r\n\r\n[the network response](https://i.stack.imgur.com/KI0Bb.png) \r\n\r\nEssentially, these are the steps I am automating \r\n```\r\nThen Click the submit button\r\nAnd Save the [object ID value] that is generated\r\nThen search for the [object ID value] in the home page search bar.\r\n```\r\n\r\nI have tried to search for ways to copy values from the network log but the responses I&#39;ve found seem to be too complex for what I need to do.","title":"Serenity method to save a network response value for use in next step of test","body":"<p>I am trying to take an ID string value that is generated in the network response log after the webapp hits an API and generates an object. The object has an ID value that is present in the network &gt; response log and I need to copy it so I can use the value in other test steps.</p>\n<p><a href=\"https://i.stack.imgur.com/KI0Bb.png\" rel=\"nofollow noreferrer\">the network response</a></p>\n<p>Essentially, these are the steps I am automating</p>\n<pre><code>Then Click the submit button\nAnd Save the [object ID value] that is generated\nThen search for the [object ID value] in the home page search bar.\n</code></pre>\n<p>I have tried to search for ways to copy values from the network log but the responses I've found seem to be too complex for what I need to do.</p>\n"},{"tags":["java","interface"],"comments":[{"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"score":2,"creation_date":1274215244,"post_id":2860977,"comment_id":2905243,"body_markdown":"they have javadocs ;) look in `java.lang.` and `java.util.` packages.","body":"they have javadocs ;) look in <code>java.lang.</code> and <code>java.util.</code> packages."}],"answers":[{"tags":[],"owner":{"account_id":114848,"reputation":134179,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1274215501,"creation_date":1274215501,"answer_id":2861034,"question_id":2860977,"body_markdown":"[`Runnable`](http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html) is the one I use most.","title":"Standard Interfaces","body":"<p><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html\" rel=\"nofollow noreferrer\"><code>Runnable</code></a> is the one I use most.</p>\n"},{"tags":[],"owner":{"account_id":111464,"reputation":1359,"user_id":294435,"accept_rate":90,"display_name":"jamesbtate"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1274215506,"creation_date":1274215506,"answer_id":2861037,"question_id":2860977,"body_markdown":"Comparable is one I use all the time. There is a list: http://java.sun.com/j2se/1.5.0/docs/api/ but it is HUGE. (You have to scroll about 2/3 of the way down the page to get to the interface tree.","title":"Standard Interfaces","body":"<p>Comparable is one I use all the time. There is a list: <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/\" rel=\"nofollow noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/</a> but it is HUGE. (You have to scroll about 2/3 of the way down the page to get to the interface tree.</p>\n"},{"tags":[],"owner":{"account_id":7450,"reputation":269210,"user_id":12960,"display_name":"Brian Agnew"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1274215639,"creation_date":1274215639,"answer_id":2861051,"question_id":2860977,"body_markdown":"You&#39;re correct re. `Cloneable` and to partly answer your question, I would *never* use it. For more info read [this interview][1] with Joshua Bloch.\r\n\r\n\r\n  [1]: http://www.artima.com/intv/bloch13.html","title":"Standard Interfaces","body":"<p>You're correct re. <code>Cloneable</code> and to partly answer your question, I would <em>never</em> use it. For more info read <a href=\"http://www.artima.com/intv/bloch13.html\" rel=\"nofollow noreferrer\">this interview</a> with Joshua Bloch.</p>\n"},{"tags":[],"owner":{"account_id":64432,"reputation":65199,"user_id":190201,"accept_rate":83,"display_name":"ataylor"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1274215719,"creation_date":1274215719,"answer_id":2861067,"question_id":2860977,"body_markdown":"Here&#39;s a list of all of the *able classes and interfaces in java.  There&#39;s a only a few that are really widely used: I&#39;d add `Comparable` and `Runnable` to your list.\r\n\r\n    $ jar tf $JAVA_HOME/jre/lib/rt.jar | grep [a-z]able\\.class | grep -v ^com | grep -v ^sun | sort\r\n    java/awt/Adjustable.class\r\n    java/awt/Container$WakingRunnable.class\r\n    java/awt/datatransfer/Transferable.class\r\n    java/awt/Dialog$WakingRunnable.class\r\n    java/awt/ItemSelectable.class\r\n    java/awt/print/Pageable.class\r\n    java/awt/print/Printable.class\r\n    java/awt/ScrollPaneAdjustable.class\r\n    java/io/Closeable.class\r\n    java/io/Externalizable.class\r\n    java/io/Flushable.class\r\n    java/io/Serializable.class\r\n    java/lang/Appendable.class\r\n    java/lang/Cloneable.class\r\n    java/lang/Comparable.class\r\n    java/lang/Iterable.class\r\n    java/lang/ProcessEnvironment$Variable.class\r\n    java/lang/Readable.class\r\n    java/lang/reflect/TypeVariable.class\r\n    java/lang/Runnable.class\r\n    java/lang/Throwable.class\r\n    java/rmi/activation/Activatable.class\r\n    java/util/Collections$SelfComparable.class\r\n    java/util/concurrent/Callable.class\r\n    java/util/concurrent/Executors$PrivilegedCallable.class\r\n    java/util/Formattable.class\r\n    java/util/Hashtable.class\r\n    java/util/Observable.class\r\n    javax/accessibility/AccessibleStreamable.class\r\n    javax/lang/model/type/TypeVariable.class\r\n    javax/management/remote/JMXAddressable.class\r\n    javax/naming/Referenceable.class\r\n    javax/script/Compilable.class\r\n    javax/script/Invocable.class\r\n    javax/security/auth/Destroyable.class\r\n    javax/security/auth/Refreshable.class\r\n    javax/sql/rowset/Joinable.class\r\n    javax/swing/JSlider$1SmartHashtable.class\r\n    javax/swing/JTable$ThreadSafePrintable.class\r\n    javax/swing/plaf/basic/BasicFileChooserUI$FileTransferHandler$FileTransferable.class\r\n    javax/swing/plaf/basic/BasicTextUI$TextTransferHandler$TextTransferable.class\r\n    javax/swing/plaf/basic/BasicTransferable.class\r\n    javax/swing/RepaintManager$DisplayChangedRunnable.class\r\n    javax/swing/Scrollable.class\r\n    javax/swing/SwingWorker$DoSubmitAccumulativeRunnable.class\r\n    javax/swing/TablePrintable.class\r\n    javax/swing/text/DefaultStyledDocument$ChangeUpdateRunnable.class\r\n    javax/swing/TransferHandler$PropertyTransferable.class\r\n    javax/swing/undo/StateEditable.class\r\n    org/omg/CORBA/portable/Streamable.class\r\n\r\n","title":"Standard Interfaces","body":"<p>Here's a list of all of the *able classes and interfaces in java.  There's a only a few that are really widely used: I'd add <code>Comparable</code> and <code>Runnable</code> to your list.</p>\n\n<pre><code>$ jar tf $JAVA_HOME/jre/lib/rt.jar | grep [a-z]able\\.class | grep -v ^com | grep -v ^sun | sort\njava/awt/Adjustable.class\njava/awt/Container$WakingRunnable.class\njava/awt/datatransfer/Transferable.class\njava/awt/Dialog$WakingRunnable.class\njava/awt/ItemSelectable.class\njava/awt/print/Pageable.class\njava/awt/print/Printable.class\njava/awt/ScrollPaneAdjustable.class\njava/io/Closeable.class\njava/io/Externalizable.class\njava/io/Flushable.class\njava/io/Serializable.class\njava/lang/Appendable.class\njava/lang/Cloneable.class\njava/lang/Comparable.class\njava/lang/Iterable.class\njava/lang/ProcessEnvironment$Variable.class\njava/lang/Readable.class\njava/lang/reflect/TypeVariable.class\njava/lang/Runnable.class\njava/lang/Throwable.class\njava/rmi/activation/Activatable.class\njava/util/Collections$SelfComparable.class\njava/util/concurrent/Callable.class\njava/util/concurrent/Executors$PrivilegedCallable.class\njava/util/Formattable.class\njava/util/Hashtable.class\njava/util/Observable.class\njavax/accessibility/AccessibleStreamable.class\njavax/lang/model/type/TypeVariable.class\njavax/management/remote/JMXAddressable.class\njavax/naming/Referenceable.class\njavax/script/Compilable.class\njavax/script/Invocable.class\njavax/security/auth/Destroyable.class\njavax/security/auth/Refreshable.class\njavax/sql/rowset/Joinable.class\njavax/swing/JSlider$1SmartHashtable.class\njavax/swing/JTable$ThreadSafePrintable.class\njavax/swing/plaf/basic/BasicFileChooserUI$FileTransferHandler$FileTransferable.class\njavax/swing/plaf/basic/BasicTextUI$TextTransferHandler$TextTransferable.class\njavax/swing/plaf/basic/BasicTransferable.class\njavax/swing/RepaintManager$DisplayChangedRunnable.class\njavax/swing/Scrollable.class\njavax/swing/SwingWorker$DoSubmitAccumulativeRunnable.class\njavax/swing/TablePrintable.class\njavax/swing/text/DefaultStyledDocument$ChangeUpdateRunnable.class\njavax/swing/TransferHandler$PropertyTransferable.class\njavax/swing/undo/StateEditable.class\norg/omg/CORBA/portable/Streamable.class\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1274217679,"creation_date":1274215759,"answer_id":2861070,"question_id":2860977,"body_markdown":"From the API docs:\r\n\r\n    AccessibleStreamable\r\n    AdapterActivatorOperations\r\n    Callable\r\n    Cloneable\r\n    Closeable\r\n    Comparable\r\n    Compilable\r\n    Destroyable\r\n    Externalizable\r\n    Flushable\r\n    Formattable\r\n    Invocable\r\n    ItemSelectable\r\n    Iterable\r\n    JMXAddressable\r\n    Joinable\r\n    Pageable\r\n    Printable\r\n    Readable\r\n    Referenceable\r\n    Refreshable\r\n    Runnable\r\n    Scrollable\r\n    Serializable\r\n    StateEditable\r\n    Streamable\r\n    Transferable\r\n    TypeVariable\r\n    TypeVariable\r\n    VM_TRUNCATABLE\r\n\r\nI use Cloneable, Comparable, Iterable, Runnable and of course &lt;strike&gt;Throwable&lt;/strike&gt; :-)","title":"Standard Interfaces","body":"<p>From the API docs:</p>\n\n<pre><code>AccessibleStreamable\nAdapterActivatorOperations\nCallable\nCloneable\nCloseable\nComparable\nCompilable\nDestroyable\nExternalizable\nFlushable\nFormattable\nInvocable\nItemSelectable\nIterable\nJMXAddressable\nJoinable\nPageable\nPrintable\nReadable\nReferenceable\nRefreshable\nRunnable\nScrollable\nSerializable\nStateEditable\nStreamable\nTransferable\nTypeVariable\nTypeVariable\nVM_TRUNCATABLE\n</code></pre>\n\n<p>I use Cloneable, Comparable, Iterable, Runnable and of course <strike>Throwable</strike> :-)</p>\n"},{"tags":[],"owner":{"account_id":128551,"reputation":57229,"user_id":326480,"accept_rate":82,"display_name":"mdma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1274216290,"creation_date":1274215914,"answer_id":2861082,"question_id":2860977,"body_markdown":"There are lots of interfaces, just as there are lots of classes, enums, and exceptions. If you just look at interfaces in isolation you will not see the complete picture. Some interfaces are nouns made into adjectives (-able) others are not - and the division is as much about what&#39;s sensible in English than any technical distinction. \r\n\r\nIt&#39;s probably best to investigate in the area you are trying to solve rather than looking into what interfaces are available across the JRE - most won&#39;t make much sense until you have a specific problem scenario in mind, and look at them in context with their collaborators.\r\n\r\nAs you are starting out, begin with interfaces in the `java.lang` package, then `java.io`, `java.util`, and possibly `java.util.concurrent`, this will give you a good grounding, and then look into specific application areas. \r\n\r\nGood luck!","title":"Standard Interfaces","body":"<p>There are lots of interfaces, just as there are lots of classes, enums, and exceptions. If you just look at interfaces in isolation you will not see the complete picture. Some interfaces are nouns made into adjectives (-able) others are not - and the division is as much about what's sensible in English than any technical distinction. </p>\n\n<p>It's probably best to investigate in the area you are trying to solve rather than looking into what interfaces are available across the JRE - most won't make much sense until you have a specific problem scenario in mind, and look at them in context with their collaborators.</p>\n\n<p>As you are starting out, begin with interfaces in the <code>java.lang</code> package, then <code>java.io</code>, <code>java.util</code>, and possibly <code>java.util.concurrent</code>, this will give you a good grounding, and then look into specific application areas. </p>\n\n<p>Good luck!</p>\n"},{"tags":[],"owner":{"account_id":1146,"reputation":49086,"user_id":1527,"accept_rate":92,"display_name":"Pete Kirkham"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695414625,"creation_date":1274216121,"answer_id":2861108,"question_id":2860977,"body_markdown":"There&#39;s a list of all the interfaces in the Java API specification. For that, follow the link for the appropriate version then search for &quot;Interface Hierarchy&quot;:\r\n - [JAVA SE 6][1]\r\n - [JAVA SE 21][2]\r\n\r\nFor a more concise list, you could check the *Interfaces* tab in the main packages. For JDK 21:\r\n - [java.lang][3]\r\n - [java.util][4]\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/overview-tree.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/overview-tree.html\r\n\r\n  [3]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/package-summary.html\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/package-summary.html\r\n","title":"Standard Interfaces","body":"<p>There's a list of all the interfaces in the Java API specification. For that, follow the link for the appropriate version then search for &quot;Interface Hierarchy&quot;:</p>\n<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/overview-tree.html\" rel=\"nofollow noreferrer\">JAVA SE 6</a></li>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/overview-tree.html\" rel=\"nofollow noreferrer\">JAVA SE 21</a></li>\n</ul>\n<p>For a more concise list, you could check the <em>Interfaces</em> tab in the main packages. For JDK 21:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/package-summary.html\" rel=\"nofollow noreferrer\">java.lang</a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/package-summary.html\" rel=\"nofollow noreferrer\">java.util</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8732,"reputation":87908,"user_id":15880,"accept_rate":75,"display_name":"Powerlord"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1274245304,"creation_date":1274216768,"answer_id":2861169,"question_id":2860977,"body_markdown":"The Interfaces you&#39;re most likely to implement are:  \r\n`java.lang.Comparable`  \r\n`java.lang.Runnable`  \r\n`java.io.Serializable`  \r\n\r\nInterfaces that you&#39;re most likely to call methods on but not implement yourself are:  \r\n`java.lang.Appendable` (StringBuffer / StringBuilder / Writers)  \r\n`java.lang.CharSequence` (String / StringBuffer / StringBuilder)  \r\n`java.lang.Iterable` (Collections, either explicitly or with `for Blah blah : List&lt;Blah&gt;`)  \r\n`java.lang.Readable` (Readers)  \r\n`java.io.Closeable` (Streams)  \r\n`java.io.Flushable` (Streams)  \r\n`java.util.Collection` (Collections)  \r\n`java.util.Deque` (Collections)  \r\n`java.util.List` (Collections)  \r\n`java.util.Map` (Collections)  \r\n`java.util.Set` (Collections)  \r\n\r\nInterfaces that are most likely to blow up in your face:  \r\n`java.lang.Cloneable`\r\n\r\nEdit: Whoops, Throwable&#39;s not an interface.\r\n\r\nUsually, it&#39;s better to write a Copy Constructor rather than use a `clone()` method.","title":"Standard Interfaces","body":"<p>The Interfaces you're most likely to implement are:<br>\n<code>java.lang.Comparable</code><br>\n<code>java.lang.Runnable</code><br>\n<code>java.io.Serializable</code>  </p>\n\n<p>Interfaces that you're most likely to call methods on but not implement yourself are:<br>\n<code>java.lang.Appendable</code> (StringBuffer / StringBuilder / Writers)<br>\n<code>java.lang.CharSequence</code> (String / StringBuffer / StringBuilder)<br>\n<code>java.lang.Iterable</code> (Collections, either explicitly or with <code>for Blah blah : List&lt;Blah&gt;</code>)<br>\n<code>java.lang.Readable</code> (Readers)<br>\n<code>java.io.Closeable</code> (Streams)<br>\n<code>java.io.Flushable</code> (Streams)<br>\n<code>java.util.Collection</code> (Collections)<br>\n<code>java.util.Deque</code> (Collections)<br>\n<code>java.util.List</code> (Collections)<br>\n<code>java.util.Map</code> (Collections)<br>\n<code>java.util.Set</code> (Collections)  </p>\n\n<p>Interfaces that are most likely to blow up in your face:<br>\n<code>java.lang.Cloneable</code></p>\n\n<p>Edit: Whoops, Throwable's not an interface.</p>\n\n<p>Usually, it's better to write a Copy Constructor rather than use a <code>clone()</code> method.</p>\n"}],"owner":{"account_id":55445,"reputation":77403,"user_id":166067,"accept_rate":77,"display_name":"Amir Rachum"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10440,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":2861070,"answer_count":8,"score":11,"last_activity_date":1695414625,"creation_date":1274215106,"question_id":2860977,"body_markdown":"I&#39;ve used Java for some time and I keep hearing about interfaces such as `Cloneable`, `Iterable` and other X-`able`s. \r\n\r\nI was wondering if there is a list somewhere of all of these and more importantly - which ones do you regularly use day-to-day? \r\n\r\nFor example, I&#39;ve read that `Cloneable` is considered badly written and isn&#39;t widely used.","title":"Standard Interfaces","body":"<p>I've used Java for some time and I keep hearing about interfaces such as <code>Cloneable</code>, <code>Iterable</code> and other X-<code>able</code>s. </p>\n\n<p>I was wondering if there is a list somewhere of all of these and more importantly - which ones do you regularly use day-to-day? </p>\n\n<p>For example, I've read that <code>Cloneable</code> is considered badly written and isn't widely used.</p>\n"},{"tags":["java","arrays","idioms"],"comments":[{"owner":{"account_id":588291,"reputation":2977,"user_id":259029,"display_name":"MichaelScott"},"score":39,"creation_date":1264486659,"post_id":2137755,"comment_id":2077929,"body_markdown":"I see what I did wrong.  Should be validData.length/2.  Otherwise it will reverse itself then un-reverse itself.","body":"I see what I did wrong.  Should be validData.length/2.  Otherwise it will reverse itself then un-reverse itself."},{"owner":{"account_id":45510,"reputation":9296,"user_id":134176,"accept_rate":100,"display_name":"Dean Povey"},"score":4,"creation_date":1264491060,"post_id":2137755,"comment_id":2078171,"body_markdown":"See http://en.wikipedia.org/wiki/In-place_algorithm which contains a description of the correct version of this algorithm.","body":"See <a href=\"http://en.wikipedia.org/wiki/In-place_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/In-place_algorithm</a> which contains a description of the correct version of this algorithm."},{"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":0,"creation_date":1540804083,"post_id":2137755,"comment_id":92983316,"body_markdown":"Java 8 : https://stackoverflow.com/a/46756353/1216775","body":"Java 8 : <a href=\"https://stackoverflow.com/a/46756353/1216775\">stackoverflow.com/a/46756353/1216775</a>"}],"answers":[{"tags":[],"owner":{"account_id":19219,"reputation":80037,"user_id":44852,"accept_rate":98,"display_name":"Tarik"},"down_vote_count":13,"up_vote_count":74,"is_accepted":false,"score":61,"last_activity_date":1476439317,"creation_date":1264486301,"answer_id":2137766,"question_id":2137755,"body_markdown":"    public class ArrayHandle {\r\n        public static Object[] reverse(Object[] arr) {\r\n            List&lt;Object&gt; list = Arrays.asList(arr);\r\n            Collections.reverse(list);\r\n            return list.toArray();\r\n        }\r\n    }","title":"How do I reverse an int array in Java?","body":"<pre><code>public class ArrayHandle {\n    public static Object[] reverse(Object[] arr) {\n        List&lt;Object&gt; list = Arrays.asList(arr);\n        Collections.reverse(list);\n        return list.toArray();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":82004,"reputation":9518,"user_id":230900,"display_name":"3lectrologos"},"down_vote_count":1,"up_vote_count":345,"is_accepted":true,"score":344,"last_activity_date":1472680004,"creation_date":1264486664,"answer_id":2137791,"question_id":2137755,"body_markdown":"To reverse an int array, you swap items up until you reach the midpoint, like this:\r\n\r\n    for(int i = 0; i &lt; validData.length / 2; i++)\r\n    {\r\n        int temp = validData[i];\r\n        validData[i] = validData[validData.length - i - 1];\r\n        validData[validData.length - i - 1] = temp;\r\n    }\r\n\r\nThe way you are doing it, you swap each element twice, so the result is the same as the initial list.","title":"How do I reverse an int array in Java?","body":"<p>To reverse an int array, you swap items up until you reach the midpoint, like this:</p>\n\n<pre><code>for(int i = 0; i &lt; validData.length / 2; i++)\n{\n    int temp = validData[i];\n    validData[i] = validData[validData.length - i - 1];\n    validData[validData.length - i - 1] = temp;\n}\n</code></pre>\n\n<p>The way you are doing it, you swap each element twice, so the result is the same as the initial list.</p>\n"},{"tags":[],"owner":{"account_id":82809,"reputation":4958,"user_id":232574,"accept_rate":77,"display_name":"Nick Strupat"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1264486889,"creation_date":1264486889,"answer_id":2137804,"question_id":2137755,"body_markdown":"It is most efficient to simply iterate the array backwards.\r\n\r\nI&#39;m not sure if Aaron&#39;s solution does this vi this call `Collections.reverse(list);` Does anyone know?","title":"How do I reverse an int array in Java?","body":"<p>It is most efficient to simply iterate the array backwards.</p>\n\n<p>I'm not sure if Aaron's solution does this vi this call <code>Collections.reverse(list);</code> Does anyone know?</p>\n"},{"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1264535059,"creation_date":1264488223,"answer_id":2137858,"question_id":2137755,"body_markdown":"Your program will work for only `length = 0, 1`.\r\nYou can try :\r\n\r\n    int i = 0, j = validData.length-1 ; \r\n    while(i &lt; j)\r\n    {\r\n         swap(validData, i++, j--);  // code for swap not shown, but easy enough\r\n    }\r\n","title":"How do I reverse an int array in Java?","body":"<p>Your program will work for only <code>length = 0, 1</code>.\nYou can try :</p>\n\n<pre><code>int i = 0, j = validData.length-1 ; \nwhile(i &lt; j)\n{\n     swap(validData, i++, j--);  // code for swap not shown, but easy enough\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13345,"reputation":8533,"user_id":26737,"accept_rate":83,"display_name":"Manur"},"down_vote_count":6,"up_vote_count":336,"is_accepted":false,"score":330,"last_activity_date":1264490829,"creation_date":1264490829,"answer_id":2138004,"question_id":2137755,"body_markdown":"With [Commons.Lang][1], you could simply use \r\n\r\n    ArrayUtils.reverse(int[] array)\r\n\r\nMost of the time, it&#39;s quicker and more bug-safe to stick with easily available libraries already unit-tested and user-tested when they take care of your problem.\r\n\r\n[1]: http://commons.apache.org/lang/","title":"How do I reverse an int array in Java?","body":"<p>With <a href=\"http://commons.apache.org/lang/\" rel=\"noreferrer\">Commons.Lang</a>, you could simply use </p>\n\n<pre><code>ArrayUtils.reverse(int[] array)\n</code></pre>\n\n<p>Most of the time, it's quicker and more bug-safe to stick with easily available libraries already unit-tested and user-tested when they take care of your problem.</p>\n"},{"tags":[],"owner":{"account_id":970,"reputation":399857,"user_id":1288,"accept_rate":93,"display_name":"Bill the Lizard"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1282229885,"creation_date":1282229885,"answer_id":3523066,"question_id":2137755,"body_markdown":"I think it&#39;s a little bit easier to follow the logic of the algorithm if you declare explicit variables to keep track of the indices that you&#39;re swapping at each iteration of  the loop.\r\n\r\n    public static void reverse(int[] data) {\r\n        for (int left = 0, right = data.length - 1; left &lt; right; left++, right--) {\r\n            // swap the values at the left and right indices\r\n            int temp = data[left];\r\n            data[left]  = data[right];\r\n            data[right] = temp;\r\n        }\r\n    }\r\n\r\nI also think it&#39;s more readable to do this in a while loop.\r\n\r\n    public static void reverse(int[] data) {\r\n        int left = 0;\r\n        int right = data.length - 1;\r\n\t\t\r\n        while( left &lt; right ) {\r\n            // swap the values at the left and right indices\r\n            int temp = data[left];\r\n            data[left] = data[right];\r\n            data[right] = temp;\r\n\t\t\t\r\n            // move the left and right index pointers in toward the center\r\n            left++;\r\n            right--;\r\n        }\r\n    }","title":"How do I reverse an int array in Java?","body":"<p>I think it's a little bit easier to follow the logic of the algorithm if you declare explicit variables to keep track of the indices that you're swapping at each iteration of  the loop.</p>\n\n<pre><code>public static void reverse(int[] data) {\n    for (int left = 0, right = data.length - 1; left &lt; right; left++, right--) {\n        // swap the values at the left and right indices\n        int temp = data[left];\n        data[left]  = data[right];\n        data[right] = temp;\n    }\n}\n</code></pre>\n\n<p>I also think it's more readable to do this in a while loop.</p>\n\n<pre><code>public static void reverse(int[] data) {\n    int left = 0;\n    int right = data.length - 1;\n\n    while( left &lt; right ) {\n        // swap the values at the left and right indices\n        int temp = data[left];\n        data[left] = data[right];\n        data[right] = temp;\n\n        // move the left and right index pointers in toward the center\n        left++;\n        right--;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":906861,"reputation":69,"user_id":941563,"display_name":"AbsoluteBlue"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1315872260,"creation_date":1315872260,"answer_id":7395428,"question_id":2137755,"body_markdown":"If working with data that is more primitive (i.e. char, byte, int, etc) then you can do some fun XOR operations.\r\n\r\n    public static void reverseArray4(int[] array) {\r\n\t\tint len = array.length;\r\n\t\tfor (int i = 0; i &lt; len/2; i++) {\r\n\t\t\tarray[i] = array[i] ^ array[len - i  - 1];\r\n\t\t\tarray[len - i  - 1] = array[i] ^ array[len - i  - 1];\r\n\t\t\tarray[i] = array[i] ^ array[len - i  - 1];\r\n\t\t}\r\n\t}","title":"How do I reverse an int array in Java?","body":"<p>If working with data that is more primitive (i.e. char, byte, int, etc) then you can do some fun XOR operations.</p>\n\n<pre><code>public static void reverseArray4(int[] array) {\n    int len = array.length;\n    for (int i = 0; i &lt; len/2; i++) {\n        array[i] = array[i] ^ array[len - i  - 1];\n        array[len - i  - 1] = array[i] ^ array[len - i  - 1];\n        array[i] = array[i] ^ array[len - i  - 1];\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1193089,"reputation":37,"user_id":1165432,"display_name":"ghost programmer"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1327341557,"creation_date":1327338407,"answer_id":8975579,"question_id":2137755,"body_markdown":"    public void display(){\r\n      String x[]=new String [5];\r\n      for(int i = 4 ; i &gt; = 0 ; i-- ){//runs backwards\r\n\r\n        //i is the nums running backwards therefore its printing from       \r\n        //highest element to the lowest(ie the back of the array to the front) as i decrements\r\n \r\n        System.out.println(x[i]);\r\n      }\r\n    }","title":"How do I reverse an int array in Java?","body":"<pre><code>public void display(){\n  String x[]=new String [5];\n  for(int i = 4 ; i &gt; = 0 ; i-- ){//runs backwards\n\n    //i is the nums running backwards therefore its printing from       \n    //highest element to the lowest(ie the back of the array to the front) as i decrements\n\n    System.out.println(x[i]);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1195830,"reputation":7,"user_id":1167594,"display_name":"Kane"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1327426369,"creation_date":1327426369,"answer_id":8991351,"question_id":2137755,"body_markdown":"\tpublic static void main (String args[]){\r\n\r\n\t\t//create  array\r\n\t\tString[] stuff ={&quot;eggs&quot;,&quot;lasers&quot;,&quot;hats&quot;,&quot;pie&quot;,&quot;apples&quot;};\r\n\r\n\t\t//print out  array\r\n\t\tfor(String x :stuff)\r\n\t\t\tSystem.out.printf(&quot;%s &quot;, x);\r\n\t\t\t\tSystem.out.println();\r\n\r\n\t\t\t\t//print out array in reverse order\r\n\t\t\t\tfor(int i=stuff.length-1; i &gt;= 0; i--)\r\n\t\t\t\t\tSystem.out.printf(&quot;%s &quot;,stuff[i]);\t\r\n\r\n\t}","title":"How do I reverse an int array in Java?","body":"<pre><code>public static void main (String args[]){\n\n    //create  array\n    String[] stuff ={\"eggs\",\"lasers\",\"hats\",\"pie\",\"apples\"};\n\n    //print out  array\n    for(String x :stuff)\n        System.out.printf(\"%s \", x);\n            System.out.println();\n\n            //print out array in reverse order\n            for(int i=stuff.length-1; i &gt;= 0; i--)\n                System.out.printf(\"%s \",stuff[i]);  \n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1703654,"reputation":2068,"user_id":1563174,"display_name":"Krishna Kumar Chourasiya"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1428898604,"creation_date":1384249350,"answer_id":19925680,"question_id":2137755,"body_markdown":"This will help you\r\n\r\n    int a[] = {1,2,3,4,5};\r\n    for (int k = 0; k &lt; a.length/2; k++) {\r\n        int temp = a[k];\r\n        a[k] = a[a.length-(1+k)];\r\n        a[a.length-(1+k)] = temp;\r\n    }","title":"How do I reverse an int array in Java?","body":"<p>This will help you</p>\n\n<pre><code>int a[] = {1,2,3,4,5};\nfor (int k = 0; k &lt; a.length/2; k++) {\n    int temp = a[k];\n    a[k] = a[a.length-(1+k)];\n    a[a.length-(1+k)] = temp;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1100048,"reputation":1008,"user_id":1092670,"accept_rate":93,"display_name":"AnthonyJClink"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1537570056,"creation_date":1396503063,"answer_id":22828623,"question_id":2137755,"body_markdown":"This is how I would personally solve it. The reason behind creating the parametrized method is to allow any array to be sorted... not just your integers.\r\n\r\nI hope you glean something from it.\r\n\r\n\t@Test\r\n\tpublic void reverseTest(){\r\n       Integer[] ints = { 1, 2, 3, 4 };\r\n       Integer[] reversedInts = reverse(ints);\r\n\r\n       assert ints[0].equals(reversedInts[3]);\r\n       assert ints[1].equals(reversedInts[2]);\r\n       assert ints[2].equals(reversedInts[1]);\r\n       assert ints[3].equals(reversedInts[0]);\r\n\r\n       reverseInPlace(reversedInts);\r\n       assert ints[0].equals(reversedInts[0]);\r\n\t}\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    private static &lt;T&gt; T[] reverse(T[] array) {\r\n        if (array == null) {\r\n            return (T[]) new ArrayList&lt;T&gt;().toArray();\r\n        }\r\n        List&lt;T&gt; copyOfArray = Arrays.asList(Arrays.copyOf(array, array.length));\r\n        Collections.reverse(copyOfArray);\r\n        return copyOfArray.toArray(array);\r\n    }\r\n\r\n    private static &lt;T&gt; T[] reverseInPlace(T[] array) {\r\n        if(array == null) {\r\n            // didn&#39;t want two unchecked suppressions\r\n            return reverse(array);\r\n        }\r\n        \r\n        Collections.reverse(Arrays.asList(array));\r\n        return array;\r\n    }","title":"How do I reverse an int array in Java?","body":"<p>This is how I would personally solve it. The reason behind creating the parametrized method is to allow any array to be sorted... not just your integers.</p>\n\n<p>I hope you glean something from it.</p>\n\n<pre><code>@Test\npublic void reverseTest(){\n   Integer[] ints = { 1, 2, 3, 4 };\n   Integer[] reversedInts = reverse(ints);\n\n   assert ints[0].equals(reversedInts[3]);\n   assert ints[1].equals(reversedInts[2]);\n   assert ints[2].equals(reversedInts[1]);\n   assert ints[3].equals(reversedInts[0]);\n\n   reverseInPlace(reversedInts);\n   assert ints[0].equals(reversedInts[0]);\n}\n\n@SuppressWarnings(\"unchecked\")\nprivate static &lt;T&gt; T[] reverse(T[] array) {\n    if (array == null) {\n        return (T[]) new ArrayList&lt;T&gt;().toArray();\n    }\n    List&lt;T&gt; copyOfArray = Arrays.asList(Arrays.copyOf(array, array.length));\n    Collections.reverse(copyOfArray);\n    return copyOfArray.toArray(array);\n}\n\nprivate static &lt;T&gt; T[] reverseInPlace(T[] array) {\n    if(array == null) {\n        // didn't want two unchecked suppressions\n        return reverse(array);\n    }\n\n    Collections.reverse(Arrays.asList(array));\n    return array;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3961583,"reputation":360,"user_id":3268405,"accept_rate":86,"display_name":"Moddl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1407131895,"creation_date":1407131895,"answer_id":25112547,"question_id":2137755,"body_markdown":"Wouldn&#39;t doing it this way be much more unlikely for mistakes?\r\n\r\n\t    int[] intArray = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\r\n\t\tint[] temp = new int[intArray.length];\r\n\t    for(int i = intArray.length - 1; i &gt; -1; i --){\r\n\t    \t\ttemp[intArray.length - i -1] = intArray[i];\r\n\t    }\r\n\t    intArray = temp;","title":"How do I reverse an int array in Java?","body":"<p>Wouldn't doing it this way be much more unlikely for mistakes?</p>\n\n<pre><code>    int[] intArray = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n    int[] temp = new int[intArray.length];\n    for(int i = intArray.length - 1; i &gt; -1; i --){\n            temp[intArray.length - i -1] = intArray[i];\n    }\n    intArray = temp;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1003835,"reputation":1376,"user_id":1018075,"accept_rate":74,"display_name":"Mdhar9e"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1408017332,"creation_date":1408017332,"answer_id":25307474,"question_id":2137755,"body_markdown":"below is the complete program to run in your machine.\r\n\r\n    public class ReverseArray {\r\n    \tpublic static void main(String[] args) {\r\n            int arr[] = new int[] { 10,20,30,50,70 };\r\n    \t\tSystem.out.println(&quot;reversing an array:&quot;);\r\n    \t\tfor(int i = 0; i &lt; arr.length / 2; i++){\r\n    \t\t    int temp = arr[i];\r\n    \t\t    arr[i] = arr[arr.length - i - 1];\r\n    \t\t    arr[arr.length - i - 1] = temp;\r\n    \t\t}\r\n    \t\tfor (int i = 0; i &lt; arr.length; i++) {\r\n    \t\t\tSystem.out.println(arr[i]);\r\n    \t\t}\t\r\n    \t}\r\n    }\r\n\r\nFor programs on matrix using arrays [this will be the good source][1].Go through the link.\r\n\r\n\r\n  [1]: http://javabynataraj.blogspot.in/2014/08/matrix-multiplication-using-arrays-in.html","title":"How do I reverse an int array in Java?","body":"<p>below is the complete program to run in your machine.</p>\n\n<pre><code>public class ReverseArray {\n    public static void main(String[] args) {\n        int arr[] = new int[] { 10,20,30,50,70 };\n        System.out.println(\"reversing an array:\");\n        for(int i = 0; i &lt; arr.length / 2; i++){\n            int temp = arr[i];\n            arr[i] = arr[arr.length - i - 1];\n            arr[arr.length - i - 1] = temp;\n        }\n        for (int i = 0; i &lt; arr.length; i++) {\n            System.out.println(arr[i]);\n        }   \n    }\n}\n</code></pre>\n\n<p>For programs on matrix using arrays <a href=\"http://javabynataraj.blogspot.in/2014/08/matrix-multiplication-using-arrays-in.html\" rel=\"nofollow\">this will be the good source</a>.Go through the link.</p>\n"},{"tags":[],"owner":{"account_id":4833354,"reputation":611,"user_id":3900923,"display_name":"Stuart Clark"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1428898803,"creation_date":1418154363,"answer_id":27387496,"question_id":2137755,"body_markdown":"    private static int[] reverse(int[] array){\r\n        int[] reversedArray = new int[array.length];\r\n        for(int i = 0; i &lt; array.length; i++){\r\n            reversedArray[i] = array[array.length - i - 1];\r\n        }\r\n        return reversedArray;\r\n    } \r\n\r\n\r\n\r\n","title":"How do I reverse an int array in Java?","body":"<pre><code>private static int[] reverse(int[] array){\n    int[] reversedArray = new int[array.length];\n    for(int i = 0; i &lt; array.length; i++){\n        reversedArray[i] = array[array.length - i - 1];\n    }\n    return reversedArray;\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2998181,"reputation":1042,"user_id":2600184,"accept_rate":67,"display_name":"vikarjramun"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1419706241,"creation_date":1419706241,"answer_id":27670432,"question_id":2137755,"body_markdown":"Using the XOR solution to avoid the temp variable your code should look like\r\n\r\n    for(int i = 0; i &lt; validData.length; i++){\r\n        validData[i] = validData[i] ^ validData[validData.length - i - 1];\r\n        validData[validData.length - i - 1] = validData[i] ^ validData[validData.length - i - 1];\r\n        validData[i] = validData[i] ^ validData[validData.length - i - 1];\r\n    }\r\n\r\n\r\nSee this link for a better explanation:\r\n\r\n&lt;http://betterexplained.com/articles/swap-two-variables-using-xor/&gt;","title":"How do I reverse an int array in Java?","body":"<p>Using the XOR solution to avoid the temp variable your code should look like</p>\n\n<pre><code>for(int i = 0; i &lt; validData.length; i++){\n    validData[i] = validData[i] ^ validData[validData.length - i - 1];\n    validData[validData.length - i - 1] = validData[i] ^ validData[validData.length - i - 1];\n    validData[i] = validData[i] ^ validData[validData.length - i - 1];\n}\n</code></pre>\n\n<p>See this link for a better explanation:</p>\n\n<p><a href=\"http://betterexplained.com/articles/swap-two-variables-using-xor/\" rel=\"nofollow\">http://betterexplained.com/articles/swap-two-variables-using-xor/</a></p>\n"},{"tags":[],"owner":{"account_id":5505143,"reputation":303,"user_id":4373184,"display_name":"Apetrei Ionut"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1422715677,"creation_date":1422715677,"answer_id":28252879,"question_id":2137755,"body_markdown":"    public class TryReverse {\r\n    \tpublic static void main(String[] args) {\t\t\r\n    \t\tint [] array = {2,3,4,5,6,7,8,9};\t\t\r\n    \t\treverse(array);\r\n    \t\tfor(int i=0; i&lt;array.length; ++i)\r\n    \t\t\tSystem.out.print(array[i] + &quot; &quot;);\r\n    \t}\r\n    \tpublic static void reverse (int [] array){\r\n    \t\tfor(int start=0, end=array.length-1; start&lt;=end; start++, end--){\r\n    \t\t\tint aux = array[start];\r\n    \t\t\tarray[start]=array[end];\r\n    \t\t\tarray[end]=aux;\r\n    \t\t}\r\n    \t}\r\n    }","title":"How do I reverse an int array in Java?","body":"<pre><code>public class TryReverse {\n    public static void main(String[] args) {        \n        int [] array = {2,3,4,5,6,7,8,9};       \n        reverse(array);\n        for(int i=0; i&lt;array.length; ++i)\n            System.out.print(array[i] + \" \");\n    }\n    public static void reverse (int [] array){\n        for(int start=0, end=array.length-1; start&lt;=end; start++, end--){\n            int aux = array[start];\n            array[start]=array[end];\n            array[end]=aux;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5505143,"reputation":303,"user_id":4373184,"display_name":"Apetrei Ionut"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1479699488,"creation_date":1422718002,"answer_id":28253263,"question_id":2137755,"body_markdown":"Simple for loop!\r\n\t\t\r\n\r\n    for (int start = 0, end = array.length - 1; start &lt;= end; start++, end--) {\r\n        int aux = array[start];\r\n        array[start]=array[end];\r\n        array[end]=aux;\r\n    }","title":"How do I reverse an int array in Java?","body":"<p>Simple for loop!</p>\n\n<pre><code>for (int start = 0, end = array.length - 1; start &lt;= end; start++, end--) {\n    int aux = array[start];\n    array[start]=array[end];\n    array[end]=aux;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3390327,"reputation":2668,"user_id":2845282,"accept_rate":68,"display_name":"Nikhil Kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1429516498,"creation_date":1429516498,"answer_id":29742155,"question_id":2137755,"body_markdown":"Try this program in JAVA :-\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class Rev_one_D {\r\n    \r\n    \tstatic int row;\r\n    \r\n    \tstatic int[] trans_arr = new int[row];\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tint n = sc.nextInt();\r\n    \t\trow = n;\r\n    \r\n    \t\tint[] arr = new int[row];\r\n    \t\tfor (int i = 0; i &lt; row; i++) {\r\n    \r\n    \t\t\tarr[i] = sc.nextInt();\r\n    \t\t\tSystem.out.print(arr[i] + &quot; &quot;);\r\n    \r\n    \t\t\tSystem.out.println();\r\n    \t\t}\r\n    \r\n    \t\tfor (int i = 0; i &lt; arr.length / 2; i++) {\r\n    \t\t\tint temp = arr[i];\r\n    \t\t\tarr[i] = arr[arr.length - i - 1];\r\n    \t\t\tarr[arr.length - i - 1] = temp;\r\n    \r\n    \t\t}\r\n    \r\n    \t\tfor (int i = 0; i &lt; row; i++) {\r\n    \t\t\tSystem.out.print(arr[i] + &quot; &quot;);\r\n    \t\t\tSystem.out.println();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"How do I reverse an int array in Java?","body":"<p>Try this program in JAVA :-</p>\n\n<pre><code>import java.util.Scanner;\n\npublic class Rev_one_D {\n\n    static int row;\n\n    static int[] trans_arr = new int[row];\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int n = sc.nextInt();\n        row = n;\n\n        int[] arr = new int[row];\n        for (int i = 0; i &lt; row; i++) {\n\n            arr[i] = sc.nextInt();\n            System.out.print(arr[i] + \" \");\n\n            System.out.println();\n        }\n\n        for (int i = 0; i &lt; arr.length / 2; i++) {\n            int temp = arr[i];\n            arr[i] = arr[arr.length - i - 1];\n            arr[arr.length - i - 1] = temp;\n\n        }\n\n        for (int i = 0; i &lt; row; i++) {\n            System.out.print(arr[i] + \" \");\n            System.out.println();\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2809343,"reputation":460,"user_id":2415900,"accept_rate":0,"display_name":"Deepak Singh"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1439706561,"creation_date":1439706561,"answer_id":32032464,"question_id":2137755,"body_markdown":"    for(int i=validData.length-1; i&gt;=0; i--){\r\n      System.out.println(validData[i]);\r\n     }","title":"How do I reverse an int array in Java?","body":"<pre><code>for(int i=validData.length-1; i&gt;=0; i--){\n  System.out.println(validData[i]);\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1075625,"reputation":139,"user_id":1073857,"accept_rate":0,"display_name":"FrederikH"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1443112445,"creation_date":1443112445,"answer_id":32766565,"question_id":2137755,"body_markdown":"You can use this\r\n\r\n    public final class ReverseComparator&lt;T extends Comparable&lt;T&gt;&gt; implements  Comparator&lt;T&gt; {\r\n      @Override\r\n      public int compare(T o1, T o2) {\t\t\r\n        return o2.compareTo(o1);\r\n      }\r\n    }\r\n\r\nAn simply\r\n\r\n    Integer[] a = {1,6,23,4,6,8,2}\r\n    Arrays.sort(a, new ReverseComparator&lt;Integer&gt;());\r\n","title":"How do I reverse an int array in Java?","body":"<p>You can use this</p>\n\n<pre><code>public final class ReverseComparator&lt;T extends Comparable&lt;T&gt;&gt; implements  Comparator&lt;T&gt; {\n  @Override\n  public int compare(T o1, T o2) {      \n    return o2.compareTo(o1);\n  }\n}\n</code></pre>\n\n<p>An simply</p>\n\n<pre><code>Integer[] a = {1,6,23,4,6,8,2}\nArrays.sort(a, new ReverseComparator&lt;Integer&gt;());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5915450,"reputation":95,"user_id":4654394,"display_name":"Soumya Sarkar"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1448874907,"creation_date":1448874907,"answer_id":33994997,"question_id":2137755,"body_markdown":"Try this code: \r\n\r\n        int arr[] = new int[]{1,2,3,4,5,6,7};\r\n        for(int i=0;i&lt;arr.length/2;i++){\r\n\t        int temp = arr[i];\r\n\t        arr[i] = arr[(arr.length-1)-i];\r\n\t        arr[(arr.length-1)-i] = temp;\r\n         }\r\n         System.out.println(Arrays.toString(arr));\r\n    ","title":"How do I reverse an int array in Java?","body":"<p>Try this code: </p>\n\n<pre><code>    int arr[] = new int[]{1,2,3,4,5,6,7};\n    for(int i=0;i&lt;arr.length/2;i++){\n        int temp = arr[i];\n        arr[i] = arr[(arr.length-1)-i];\n        arr[(arr.length-1)-i] = temp;\n     }\n     System.out.println(Arrays.toString(arr));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4634476,"reputation":426,"user_id":3756090,"accept_rate":25,"display_name":"subinksoman"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1501568516,"creation_date":1449642173,"answer_id":34172032,"question_id":2137755,"body_markdown":"    public void getDSCSort(int[] data){\r\n    \t\tfor (int left = 0, right = data.length - 1; left &lt; right; left++, right--){\r\n\t            // swap the values at the left and right indices\r\n\t            int temp = data[left];\r\n\t            data[left]  = data[right];\r\n\t            data[right] = temp;\r\n\t        }\r\n    \t}","title":"How do I reverse an int array in Java?","body":"<pre><code>public void getDSCSort(int[] data){\n        for (int left = 0, right = data.length - 1; left &lt; right; left++, right--){\n            // swap the values at the left and right indices\n            int temp = data[left];\n            data[left]  = data[right];\n            data[right] = temp;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5091125,"reputation":4770,"user_id":4084160,"accept_rate":100,"display_name":"HenryDev"},"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1452643527,"creation_date":1452643527,"answer_id":34756125,"question_id":2137755,"body_markdown":"Here&#39;s a simple an quick solution. Hope it helps!.\r\n\r\n    public int[] reverse(int[] arr) {\r\n\t\tfor(int i = arr.length; i &gt; 0 ; i--){\r\n\t\t\tSystem.out.print(arr[i-1] + &quot; &quot;);\r\n\t\t}\r\n\t\treturn arr;\r\n\t}","title":"How do I reverse an int array in Java?","body":"<p>Here's a simple an quick solution. Hope it helps!.</p>\n\n<pre><code>public int[] reverse(int[] arr) {\n    for(int i = arr.length; i &gt; 0 ; i--){\n        System.out.print(arr[i-1] + \" \");\n    }\n    return arr;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1891952,"reputation":2743,"user_id":1709793,"accept_rate":0,"display_name":"craftsmannadeem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1454089615,"creation_date":1454089615,"answer_id":35090812,"question_id":2137755,"body_markdown":"Here is a simple implementation, to reverse array of **any type**, plus **full/partial** support.\r\n\r\n    import java.util.logging.Logger;\r\n\r\n    public final class ArrayReverser {\r\n\t private static final Logger LOGGER = Logger.getLogger(ArrayReverser.class.getName());\r\n\t\r\n\t private ArrayReverser () {\r\n\t\t\r\n\t }\r\n\t\r\n\t public static &lt;T&gt; void reverse(T[] seed) {\r\n\t\treverse(seed, 0, seed.length);\r\n\t }\r\n\r\n\t public static &lt;T&gt; void reverse(T[] seed, int startIndexInclusive, int endIndexExclusive) {\r\n\t\tif (seed == null || seed.length == 0) {\r\n\t\t\tLOGGER.warning(&quot;Nothing to rotate&quot;);\r\n\t\t}\r\n\t\tint start = startIndexInclusive &lt; 0 ? 0 : startIndexInclusive;\r\n\t\tint end = Math.min(seed.length, endIndexExclusive) - 1;\r\n\t\twhile (start &lt; end) {\r\n\t\t\tswap(seed, start, end);\r\n\t\t\tstart++;\r\n\t\t\tend--;\r\n\t\t}\r\n\t}\r\n\r\n\t private static &lt;T&gt; void swap(T[] seed, int start, int end) {\r\n\t\tT temp =  seed[start];\r\n\t\tseed[start] = seed[end];\r\n\t\tseed[end] = temp;\r\n\t }\t\r\n\t\r\n    }\r\n\r\nHere is the corresponding Unit Test &lt;br&gt;\r\n\r\n    import static org.hamcrest.CoreMatchers.is;\r\n    import static org.junit.Assert.assertThat;\r\n\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n\r\n    public class ArrayReverserTest {\r\n\tprivate Integer[] seed;\r\n\r\n\t@Before\r\n\tpublic void doBeforeEachTestCase() {\r\n\t\tthis.seed = new Integer[]{1,2,3,4,5,6,7,8};\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void wholeArrayReverse() {\r\n\t\tArrayReverser.&lt;Integer&gt;reverse(seed);\r\n\t\tassertThat(seed[0], is(8));\r\n\t}\r\n\r\n\t @Test\r\n\t public void partialArrayReverse() {\r\n\t\tArrayReverser.&lt;Integer&gt;reverse(seed, 1, 5);\r\n\t\tassertThat(seed[1], is(5));\r\n\t }\r\n    }\r\n\r\n","title":"How do I reverse an int array in Java?","body":"<p>Here is a simple implementation, to reverse array of <strong>any type</strong>, plus <strong>full/partial</strong> support.</p>\n\n<pre><code>import java.util.logging.Logger;\n\npublic final class ArrayReverser {\n private static final Logger LOGGER = Logger.getLogger(ArrayReverser.class.getName());\n\n private ArrayReverser () {\n\n }\n\n public static &lt;T&gt; void reverse(T[] seed) {\n    reverse(seed, 0, seed.length);\n }\n\n public static &lt;T&gt; void reverse(T[] seed, int startIndexInclusive, int endIndexExclusive) {\n    if (seed == null || seed.length == 0) {\n        LOGGER.warning(\"Nothing to rotate\");\n    }\n    int start = startIndexInclusive &lt; 0 ? 0 : startIndexInclusive;\n    int end = Math.min(seed.length, endIndexExclusive) - 1;\n    while (start &lt; end) {\n        swap(seed, start, end);\n        start++;\n        end--;\n    }\n}\n\n private static &lt;T&gt; void swap(T[] seed, int start, int end) {\n    T temp =  seed[start];\n    seed[start] = seed[end];\n    seed[end] = temp;\n }  \n\n}\n</code></pre>\n\n<p>Here is the corresponding Unit Test <br></p>\n\n<pre><code>import static org.hamcrest.CoreMatchers.is;\nimport static org.junit.Assert.assertThat;\n\nimport org.junit.Before;\nimport org.junit.Test;\n\npublic class ArrayReverserTest {\nprivate Integer[] seed;\n\n@Before\npublic void doBeforeEachTestCase() {\n    this.seed = new Integer[]{1,2,3,4,5,6,7,8};\n}\n\n@Test\npublic void wholeArrayReverse() {\n    ArrayReverser.&lt;Integer&gt;reverse(seed);\n    assertThat(seed[0], is(8));\n}\n\n @Test\n public void partialArrayReverse() {\n    ArrayReverser.&lt;Integer&gt;reverse(seed, 1, 5);\n    assertThat(seed[1], is(5));\n }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1870321,"reputation":3740,"user_id":1692714,"accept_rate":75,"display_name":"escitalopram"},"down_vote_count":5,"up_vote_count":89,"is_accepted":false,"score":84,"last_activity_date":1460105834,"creation_date":1460105834,"answer_id":36495496,"question_id":2137755,"body_markdown":"    Collections.reverse(Arrays.asList(yourArray));\r\n\r\n`java.util.Collections.reverse()` can reverse `java.util.List`s and `java.util.Arrays.asList()` returns a list that wraps the the specific array you pass to it, therefore `yourArray` is reversed after the invocation of `Collections.reverse()`.\r\n\r\nThe cost is just the creation of one List-object and no additional libraries are required.\r\n\r\nA similar solution has been presented in the answer of Tarik and their commentors, but I think this answer would be more concise and more easily parsable.","title":"How do I reverse an int array in Java?","body":"<pre><code>Collections.reverse(Arrays.asList(yourArray));\n</code></pre>\n\n<p><code>java.util.Collections.reverse()</code> can reverse <code>java.util.List</code>s and <code>java.util.Arrays.asList()</code> returns a list that wraps the the specific array you pass to it, therefore <code>yourArray</code> is reversed after the invocation of <code>Collections.reverse()</code>.</p>\n\n<p>The cost is just the creation of one List-object and no additional libraries are required.</p>\n\n<p>A similar solution has been presented in the answer of Tarik and their commentors, but I think this answer would be more concise and more easily parsable.</p>\n"},{"tags":[],"owner":{"account_id":1615361,"reputation":1,"user_id":1493229,"display_name":"marela"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1471103931,"creation_date":1471103931,"answer_id":38934502,"question_id":2137755,"body_markdown":"Another way to reverse array \r\n\r\n    public static int []reversing(int[] array){\r\n    \tint arraysize = array.length;\r\n        int[] reverse = new int [arraysize+1];\r\n        for(int i=1; i &lt;= arraysize ; i++){\r\n        \tint dec= arraysize -i;\r\n            reverse[i] = array[dec];\r\n        }\r\n        return reverse;\r\n    }","title":"How do I reverse an int array in Java?","body":"<p>Another way to reverse array </p>\n\n<pre><code>public static int []reversing(int[] array){\n    int arraysize = array.length;\n    int[] reverse = new int [arraysize+1];\n    for(int i=1; i &lt;= arraysize ; i++){\n        int dec= arraysize -i;\n        reverse[i] = array[dec];\n    }\n    return reverse;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"down_vote_count":2,"up_vote_count":16,"is_accepted":false,"score":14,"last_activity_date":1674894873,"creation_date":1481259468,"answer_id":41053380,"question_id":2137755,"body_markdown":"# Guava\r\n\r\nUsing the [*Google Guava*][1] library:\r\n\r\n    Collections.reverse(Ints.asList(array));\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Google_Guava","title":"How do I reverse an int array in Java?","body":"<h1>Guava</h1>\n<p>Using the <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\"><em>Google Guava</em></a> library:</p>\n<pre><code>Collections.reverse(Ints.asList(array));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4977012,"reputation":564,"user_id":4003055,"accept_rate":64,"display_name":"Mathieu Brouwers"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1484319369,"creation_date":1484319369,"answer_id":41637385,"question_id":2137755,"body_markdown":"As I intended to keep my original Array as it was, I solved this problem in the following manner:\r\n\r\n    List&lt;Integer&gt; normalArray= new ArrayList&lt;&gt;();\r\n    List&lt;Integer&gt; reversedArray = new ArrayList&lt;&gt;();\r\n\r\n    // Fill up array here\r\n\r\n    for (int i = 1; i &lt;= normalArray.size(); i++) {\r\n      reversedArray .add(normalArray.get(normalArray.size()-i));\r\n    }\r\n\r\nSo basically loop through the initial array and add all the values in reversed order to the new (reversed) array. The type of the list can be anything.\r\nI work my way through this code multiple times, this causes some of the other solutions not to work.","title":"How do I reverse an int array in Java?","body":"<p>As I intended to keep my original Array as it was, I solved this problem in the following manner:</p>\n\n<pre><code>List&lt;Integer&gt; normalArray= new ArrayList&lt;&gt;();\nList&lt;Integer&gt; reversedArray = new ArrayList&lt;&gt;();\n\n// Fill up array here\n\nfor (int i = 1; i &lt;= normalArray.size(); i++) {\n  reversedArray .add(normalArray.get(normalArray.size()-i));\n}\n</code></pre>\n\n<p>So basically loop through the initial array and add all the values in reversed order to the new (reversed) array. The type of the list can be anything.\nI work my way through this code multiple times, this causes some of the other solutions not to work.</p>\n"},{"tags":[],"owner":{"account_id":7381316,"reputation":57,"user_id":5617926,"accept_rate":33,"display_name":"Doncho Balamjiev"},"down_vote_count":6,"up_vote_count":0,"is_accepted":false,"score":-6,"last_activity_date":1484909792,"creation_date":1484909792,"answer_id":41761949,"question_id":2137755,"body_markdown":"    int[] arrTwo = {5, 8, 18, 6, 20, 50, 6};\r\n\r\n        for (int i = arrTwo.length-1; i &gt; 0; i--)\r\n        {\r\n            System.out.print(arrTwo[i] + &quot; &quot;);\r\n        }","title":"How do I reverse an int array in Java?","body":"<pre><code>int[] arrTwo = {5, 8, 18, 6, 20, 50, 6};\n\n    for (int i = arrTwo.length-1; i &gt; 0; i--)\n    {\n        System.out.print(arrTwo[i] + \" \");\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7537037,"reputation":4882,"user_id":7098259,"display_name":"Patrick Parker"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1674907736,"creation_date":1486978657,"answer_id":42200856,"question_id":2137755,"body_markdown":"# Use a stream to reverse \r\n\r\nThere are already a lot of answers here, mostly focused on modifying the array in-place. But for the sake of completeness, here is another approach using Java streams to preserve the original array and create a new reversed array:\r\n\r\n    int[] a = {8, 6, 7, 5, 3, 0, 9};\r\n    int[] b = IntStream.rangeClosed(1, a.length).map(i -&gt; a[a.length-i]).toArray();\r\n\r\n","title":"How do I reverse an int array in Java?","body":"<h1>Use a stream to reverse</h1>\n<p>There are already a lot of answers here, mostly focused on modifying the array in-place. But for the sake of completeness, here is another approach using Java streams to preserve the original array and create a new reversed array:</p>\n<pre><code>int[] a = {8, 6, 7, 5, 3, 0, 9};\nint[] b = IntStream.rangeClosed(1, a.length).map(i -&gt; a[a.length-i]).toArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1309732,"reputation":4219,"user_id":1257986,"accept_rate":63,"display_name":"Simple-Solution"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510928388,"creation_date":1487282127,"answer_id":42285420,"question_id":2137755,"body_markdown":"Here is what I&#39;ve come up with:\r\n\r\n    // solution 1 - boiler plated \r\n    Integer[] original = {100, 200, 300, 400};\r\n    Integer[] reverse = new Integer[original.length];\r\n        \r\n    int lastIdx = original.length -1;\r\n    int startIdx = 0;\r\n        \r\n    for (int endIdx = lastIdx; endIdx &gt;= 0; endIdx--, startIdx++)\r\n       reverse[startIdx] = original[endIdx];\r\n        \r\n    System.out.printf(&quot;reverse form: %s&quot;, Arrays.toString(reverse));\r\n\r\n    // solution 2 - abstracted \r\n    // convert to list then use Collections static reverse()\r\n    List&lt;Integer&gt; l = Arrays.asList(original);\r\n    Collections.reverse(l);\r\n    System.out.printf(&quot;reverse form: %s&quot;, l);","title":"How do I reverse an int array in Java?","body":"<p>Here is what I've come up with:</p>\n\n<pre><code>// solution 1 - boiler plated \nInteger[] original = {100, 200, 300, 400};\nInteger[] reverse = new Integer[original.length];\n\nint lastIdx = original.length -1;\nint startIdx = 0;\n\nfor (int endIdx = lastIdx; endIdx &gt;= 0; endIdx--, startIdx++)\n   reverse[startIdx] = original[endIdx];\n\nSystem.out.printf(\"reverse form: %s\", Arrays.toString(reverse));\n\n// solution 2 - abstracted \n// convert to list then use Collections static reverse()\nList&lt;Integer&gt; l = Arrays.asList(original);\nCollections.reverse(l);\nSystem.out.printf(\"reverse form: %s\", l);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1257650,"reputation":23479,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1578619056,"creation_date":1508079142,"answer_id":46756353,"question_id":2137755,"body_markdown":"In case of **Java 8** we can also use `IntStream` to reverse the array of integers  as:\r\n    \r\n\r\n    int[] sample = new int[]{1,2,3,4,5};\r\n    int size = sample.length;\r\n    int[] reverseSample = IntStream.range(0,size).map(i -&gt; sample[size-i-1])\r\n                          .toArray(); //Output: [5, 4, 3, 2, 1]\r\n\r\n","title":"How do I reverse an int array in Java?","body":"<p>In case of <strong>Java 8</strong> we can also use <code>IntStream</code> to reverse the array of integers  as:</p>\n\n<pre><code>int[] sample = new int[]{1,2,3,4,5};\nint size = sample.length;\nint[] reverseSample = IntStream.range(0,size).map(i -&gt; sample[size-i-1])\n                      .toArray(); //Output: [5, 4, 3, 2, 1]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3407663,"reputation":171,"user_id":2858355,"accept_rate":0,"display_name":"user11016"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1508406174,"creation_date":1508406174,"answer_id":46827036,"question_id":2137755,"body_markdown":"Solution with o(n) time complexity and o(1) space complexity.\r\n\r\n    void reverse(int[] array) {\r\n        int start = 0;\r\n        int end = array.length - 1;\r\n        while (start &lt; end) {\r\n            int temp = array[start];\r\n            array[start] = array[end];\r\n            array[end] = temp;\r\n            start++;\r\n            end--;\r\n        }\r\n    }","title":"How do I reverse an int array in Java?","body":"<p>Solution with o(n) time complexity and o(1) space complexity.</p>\n\n<pre><code>void reverse(int[] array) {\n    int start = 0;\n    int end = array.length - 1;\n    while (start &lt; end) {\n        int temp = array[start];\n        array[start] = array[end];\n        array[end] = temp;\n        start++;\n        end--;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9010688,"reputation":1381,"user_id":6715431,"display_name":"jagdish khetre"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1516147428,"creation_date":1516147428,"answer_id":48291738,"question_id":2137755,"body_markdown":"       import java.util.Scanner;\r\n    class ReverseArray \r\n    {\r\n    \tpublic static void main(String[] args) \r\n    \t{\r\n    \t\tint[] arra = new int[10];\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tSystem.out.println(&quot;Enter Array Elements : &quot;);\r\n    \t\tfor(int i = 0 ; i &lt;arra.length;i++)\r\n    \t\t{\r\n    \t\t\tarra[i] = sc.nextInt();\r\n    \t\t}\r\n    \r\n    \t\tSystem.out.println(&quot;Printing  Array : &quot;);\r\n    \t\tfor(int i = 0; i &lt;arra.length;i++)\r\n    \t\t{\r\n    \t\t\tSystem.out.print(arra[i] + &quot; &quot;);\r\n    \t\t}\r\n    \t\t\r\n    \t\tSystem.out.println();\r\n    \t\tSystem.out.println(&quot;Printing  Reverse Array : &quot;);\r\n    \t\tfor(int i = arra.length-1; i &gt;=0;i--)\r\n    \t\t{\r\n    \t\t\tSystem.out.print(arra[i] + &quot; &quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n","title":"How do I reverse an int array in Java?","body":"<pre><code>   import java.util.Scanner;\nclass ReverseArray \n{\n    public static void main(String[] args) \n    {\n        int[] arra = new int[10];\n        Scanner sc = new Scanner(System.in);\n        System.out.println(\"Enter Array Elements : \");\n        for(int i = 0 ; i &lt;arra.length;i++)\n        {\n            arra[i] = sc.nextInt();\n        }\n\n        System.out.println(\"Printing  Array : \");\n        for(int i = 0; i &lt;arra.length;i++)\n        {\n            System.out.print(arra[i] + \" \");\n        }\n\n        System.out.println();\n        System.out.println(\"Printing  Reverse Array : \");\n        for(int i = arra.length-1; i &gt;=0;i--)\n        {\n            System.out.print(arra[i] + \" \");\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6392843,"reputation":1977,"user_id":4958332,"accept_rate":38,"display_name":"Karan Khanna"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1524521396,"creation_date":1524521396,"answer_id":49990650,"question_id":2137755,"body_markdown":"There are two ways to have a solution for the problem:\r\n\r\n**1. Reverse an array in space.**\r\n\r\nStep 1. Swap the elements at the start and the end index.\r\n\r\nStep 2. Increment the start index decrement the end index.\r\n\r\nStep 3. Iterate Step 1 and Step 2 till start index &lt; end index\r\n\r\nFor this, the time complexity will be O(n) and the space complexity will be O(1)\r\n\r\nSample code for reversing an array in space is like:\r\n\r\n    public static int[] reverseAnArrayInSpace(int[] array) {\r\n        int startIndex = 0;\r\n        int endIndex = array.length - 1;\r\n        while(startIndex &lt; endIndex) {\r\n        \tint temp = array[endIndex];\r\n        \tarray[endIndex] = array[startIndex];\r\n        \tarray[startIndex] = temp;\r\n        \tstartIndex++;\r\n        \tendIndex--;\r\n        }\r\n        return array;\r\n    }\r\n\r\n**2. Reverse an array using an auxiliary array.**\r\n\r\nStep 1. Create a new array of size equal to the given array.\r\n\r\nStep 2. Insert elements to the new array starting from the start index, from the \r\ngiven array starting from end index.\r\n\r\nFor this, the time complexity will be O(n) and the space complexity will be O(n)\r\n\r\nSample code for reversing an array with auxiliary array is like:\r\n     \r\n    public static int[] reverseAnArrayWithAuxiliaryArray(int[] array) {\r\n    \tint[] reversedArray = new int[array.length];\r\n    \tfor(int index = 0; index &lt; array.length; index++) {\r\n    \t\treversedArray[index] = array[array.length - index -1]; \r\n    \t}\r\n    \treturn reversedArray;\r\n    }\r\n    \r\n**Also, we can use the Collections API from Java to do this.**    \r\n\r\nThe Collections API internally uses the same reverse in space approach.\r\n\r\nSample code for using the Collections API is like:\r\n\r\n    public static Integer[] reverseAnArrayWithCollections(Integer[] array) {\r\n    \tList&lt;Integer&gt; arrayList = Arrays.asList(array);\r\n    \tCollections.reverse(arrayList);\r\n    \treturn arrayList.toArray(array);\r\n    }\r\n\r\n","title":"How do I reverse an int array in Java?","body":"<p>There are two ways to have a solution for the problem:</p>\n\n<p><strong>1. Reverse an array in space.</strong></p>\n\n<p>Step 1. Swap the elements at the start and the end index.</p>\n\n<p>Step 2. Increment the start index decrement the end index.</p>\n\n<p>Step 3. Iterate Step 1 and Step 2 till start index &lt; end index</p>\n\n<p>For this, the time complexity will be O(n) and the space complexity will be O(1)</p>\n\n<p>Sample code for reversing an array in space is like:</p>\n\n<pre><code>public static int[] reverseAnArrayInSpace(int[] array) {\n    int startIndex = 0;\n    int endIndex = array.length - 1;\n    while(startIndex &lt; endIndex) {\n        int temp = array[endIndex];\n        array[endIndex] = array[startIndex];\n        array[startIndex] = temp;\n        startIndex++;\n        endIndex--;\n    }\n    return array;\n}\n</code></pre>\n\n<p><strong>2. Reverse an array using an auxiliary array.</strong></p>\n\n<p>Step 1. Create a new array of size equal to the given array.</p>\n\n<p>Step 2. Insert elements to the new array starting from the start index, from the \ngiven array starting from end index.</p>\n\n<p>For this, the time complexity will be O(n) and the space complexity will be O(n)</p>\n\n<p>Sample code for reversing an array with auxiliary array is like:</p>\n\n<pre><code>public static int[] reverseAnArrayWithAuxiliaryArray(int[] array) {\n    int[] reversedArray = new int[array.length];\n    for(int index = 0; index &lt; array.length; index++) {\n        reversedArray[index] = array[array.length - index -1]; \n    }\n    return reversedArray;\n}\n</code></pre>\n\n<p><strong>Also, we can use the Collections API from Java to do this.</strong>    </p>\n\n<p>The Collections API internally uses the same reverse in space approach.</p>\n\n<p>Sample code for using the Collections API is like:</p>\n\n<pre><code>public static Integer[] reverseAnArrayWithCollections(Integer[] array) {\n    List&lt;Integer&gt; arrayList = Arrays.asList(array);\n    Collections.reverse(arrayList);\n    return arrayList.toArray(array);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":343316,"reputation":129,"user_id":674946,"display_name":"Z A Abbasi"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1525100846,"creation_date":1525100846,"answer_id":50103281,"question_id":2137755,"body_markdown":"\r\n\r\n    static int[] reverseArray(int[] a) {\r\n         int ret[] = new int[a.length];\r\n         for(int i=0, j=a.length-1; i&lt;a.length &amp;&amp; j&gt;=0; i++, j--)\r\n             ret[i] = a[j];\r\n         return ret;\r\n    }","title":"How do I reverse an int array in Java?","body":"<pre><code>static int[] reverseArray(int[] a) {\n     int ret[] = new int[a.length];\n     for(int i=0, j=a.length-1; i&lt;a.length &amp;&amp; j&gt;=0; i++, j--)\n         ret[i] = a[j];\n     return ret;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9475267,"reputation":115,"user_id":7044810,"display_name":"Sameer Shrestha"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1526649568,"creation_date":1526649568,"answer_id":50412261,"question_id":2137755,"body_markdown":"2 ways to reverse an Array .\r\n\r\n1. Using For loop and swap the elements till the mid point with time complexity of O(n/2).\r\n      \r\n        private static void reverseArray() {\r\n\t\tint[] array = new int[] { 1, 2, 3, 4, 5, 6 };\r\n\r\n\t\tfor (int i = 0; i &lt; array.length / 2; i++) {\r\n\t\t\tint temp = array[i];\r\n\t\t\tint index = array.length - i - 1;\r\n\t\t\tarray[i] = array[index];\r\n\t\t\tarray[index] = temp;\r\n\t\t}\r\n\t\tSystem.out.println(Arrays.toString(array));\r\n\t}\r\n\r\n2. Using built in function (Collections.reverse())\r\n\r\n        private static void reverseArrayUsingBuiltInFun() {\r\n\t\tint[] array = new int[] { 1, 2, 3, 4, 5, 6 };\r\n\r\n\t\tCollections.reverse(Ints.asList(array));\r\n\t\tSystem.out.println(Arrays.toString(array));\r\n\t}\r\n\r\n\t\r\n\tOutput : [6, 5, 4, 3, 2, 1]","title":"How do I reverse an int array in Java?","body":"<p>2 ways to reverse an Array .</p>\n\n<ol>\n<li><p>Using For loop and swap the elements till the mid point with time complexity of O(n/2).</p>\n\n<pre><code>private static void reverseArray() {\nint[] array = new int[] { 1, 2, 3, 4, 5, 6 };\n\nfor (int i = 0; i &lt; array.length / 2; i++) {\n    int temp = array[i];\n    int index = array.length - i - 1;\n    array[i] = array[index];\n    array[index] = temp;\n}\nSystem.out.println(Arrays.toString(array));\n</code></pre>\n\n<p>}</p></li>\n<li><p>Using built in function (Collections.reverse())</p>\n\n<pre><code>private static void reverseArrayUsingBuiltInFun() {\nint[] array = new int[] { 1, 2, 3, 4, 5, 6 };\n\nCollections.reverse(Ints.asList(array));\nSystem.out.println(Arrays.toString(array));\n</code></pre>\n\n<p>}</p>\n\n<p>Output : [6, 5, 4, 3, 2, 1]</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6724779,"reputation":1030,"user_id":5922271,"display_name":"roshan posakya"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1532529132,"creation_date":1532529132,"answer_id":51521511,"question_id":2137755,"body_markdown":"     public static int[] reverse(int[] array) {\r\n        \r\n        int j = array.length-1;\r\n        // swap the values at the left and right indices //////\r\n            for(int i=0; i&lt;=j; i++)\r\n            {\r\n                 int temp = array[i];\r\n                    array[i] = array[j];\r\n                    array[j] = temp;\r\n               j--;\r\n            }\r\n             \r\n             return array;\r\n        }\r\n        \r\n          public static void main(String []args){\r\n            int[] data = {1,2,3,4,5,6,7,8,9};\r\n            reverse(data);\r\n             \r\n        }","title":"How do I reverse an int array in Java?","body":"<pre><code> public static int[] reverse(int[] array) {\n\n    int j = array.length-1;\n    // swap the values at the left and right indices //////\n        for(int i=0; i&lt;=j; i++)\n        {\n             int temp = array[i];\n                array[i] = array[j];\n                array[j] = temp;\n           j--;\n        }\n\n         return array;\n    }\n\n      public static void main(String []args){\n        int[] data = {1,2,3,4,5,6,7,8,9};\n        reverse(data);\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8979120,"reputation":31,"user_id":6694904,"display_name":"Kalidindi Prashanth"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557120579,"creation_date":1557081620,"answer_id":55995195,"question_id":2137755,"body_markdown":"\r\n        \r\n        public static void main(String args[])    {\r\n            int [] arr = {10, 20, 30, 40, 50}; \r\n            reverse(arr, arr.length);\r\n        }\r\n    \r\n    \tprivate static void reverse(int[] arr,    int length)    {\r\n    \t\t\r\n            for(int i=length;i&gt;0;i--)    { \r\n    \t\t    System.out.println(arr[i-1]); \r\n    \t\t}\r\n    \t}\r\n    \r\n   ","title":"How do I reverse an int array in Java?","body":"<pre><code>    public static void main(String args[])    {\n        int [] arr = {10, 20, 30, 40, 50}; \n        reverse(arr, arr.length);\n    }\n\n    private static void reverse(int[] arr,    int length)    {\n\n        for(int i=length;i&gt;0;i--)    { \n            System.out.println(arr[i-1]); \n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12833571,"reputation":2008,"user_id":9283958,"display_name":"Ahmad Dalao"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1576424898,"creation_date":1576423711,"answer_id":59345312,"question_id":2137755,"body_markdown":"There are some great answers above, but this is how I did it:\r\n\r\n```java\r\npublic static int[] test(int[] arr) {\r\n\r\n    int[] output = arr.clone();\r\n    for (int i = arr.length - 1; i &gt; -1; i--) {\r\n        output[i] = arr[arr.length - i - 1];\r\n    }\r\n    return output;\r\n}\r\n```","title":"How do I reverse an int array in Java?","body":"<p>There are some great answers above, but this is how I did it:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static int[] test(int[] arr) {\n\n    int[] output = arr.clone();\n    for (int i = arr.length - 1; i &gt; -1; i--) {\n        output[i] = arr[arr.length - i - 1];\n    }\n    return output;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14401721,"reputation":1213,"user_id":10403133,"display_name":"Nasib"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1581606218,"creation_date":1581606218,"answer_id":60210806,"question_id":2137755,"body_markdown":"[![enter image description here][1]][1]\n\na piece of cake.\ni did it for string but, it&#39;s not much different\n\n  [1]: https://i.stack.imgur.com/4mTDB.png","title":"How do I reverse an int array in Java?","body":"<p><a href=\"https://i.stack.imgur.com/4mTDB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4mTDB.png\" alt=\"enter image description here\" /></a></p>\n<p>a piece of cake.\ni did it for string but, it's not much different</p>\n"},{"tags":[],"owner":{"account_id":17988224,"reputation":81,"user_id":13072965,"display_name":"Bwizz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596081387,"creation_date":1596081022,"answer_id":63165907,"question_id":2137755,"body_markdown":"A short way to reverse without additional libraries, imports, or static references.\r\n```\r\nint[] a = {1,2,3,4,5,6,7,23,9}, b; //compound declaration\r\nvar j = a.length;\r\nb = new int[j];\r\nfor (var i : a)\r\n    b[--j] = i; //--j so you don&#39;t have to subtract 1 from j. Otherwise you would get ArrayIndexOutOfBoundsException;\r\nSystem.out.println(Arrays.toString(b));\r\n```\r\nOf course if you actually need ```a``` to be the reversed array just use \r\n```\r\na = b; //after the loop\r\n``` \r\n","title":"How do I reverse an int array in Java?","body":"<p>A short way to reverse without additional libraries, imports, or static references.</p>\n<pre><code>int[] a = {1,2,3,4,5,6,7,23,9}, b; //compound declaration\nvar j = a.length;\nb = new int[j];\nfor (var i : a)\n    b[--j] = i; //--j so you don't have to subtract 1 from j. Otherwise you would get ArrayIndexOutOfBoundsException;\nSystem.out.println(Arrays.toString(b));\n</code></pre>\n<p>Of course if you actually need <code>a</code> to be the reversed array just use</p>\n<pre><code>a = b; //after the loop\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16813958,"reputation":41,"user_id":12156282,"display_name":"James Guest"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600966725,"creation_date":1600966725,"answer_id":64051058,"question_id":2137755,"body_markdown":"Here is a condensed version:\r\n\r\n&gt; My solution creates a new array reversed\r\n&gt; With each iteration of i the for loop inserts the last index [array.length - 1] into the current index [i]\r\n&gt; Then continues the same process by subtracting the current iteration array[(array.length - 1) - i] from the last index and inserting the element into the next index of the reverse array!\r\n\r\n    private static void reverse(int[] array) {\r\n        int[] reversed = new int[array.length];\r\n \r\n        for (int i = 0; i &lt; array.length; i++) {\r\n            reversed[i] = array[(array.length - 1) - i];\r\n        }\r\n        System.out.println(Arrays.toString(reversed));\r\n    }","title":"How do I reverse an int array in Java?","body":"<p>Here is a condensed version:</p>\n<blockquote>\n<p>My solution creates a new array reversed\nWith each iteration of i the for loop inserts the last index [array.length - 1] into the current index [i]\nThen continues the same process by subtracting the current iteration array[(array.length - 1) - i] from the last index and inserting the element into the next index of the reverse array!</p>\n</blockquote>\n<pre><code>private static void reverse(int[] array) {\n    int[] reversed = new int[array.length];\n\n    for (int i = 0; i &lt; array.length; i++) {\n        reversed[i] = array[(array.length - 1) - i];\n    }\n    System.out.println(Arrays.toString(reversed));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3191144,"reputation":5197,"user_id":2695344,"accept_rate":42,"display_name":"Martin Kersten"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1601402906,"creation_date":1601396667,"answer_id":64123740,"question_id":2137755,"body_markdown":"Just for the sake of it. People often do only need a &#39;view&#39; on an array or list in reversed order instead of a completely   do not need a reversed array when working with streams and collections but a &#39;reversed&#39; view on the original array/collection. , it is best to create a toolkit that has a reverse view on a list / array.\r\n\r\nSo create your Iterator&lt;Long&gt; implementation that takes an array or list and provide the input. \r\n\r\n    /// Reverse Iterator\r\n    public class ReverseIterator&lt;T&gt; implements Iterator&lt;T&gt; {\r\n      private int index;\r\n      private final List&lt;T&gt; list;\r\n      public ReverseIterator(List&lt;T&gt; list) {\r\n         this.list = list;\r\n         this.index = list.size() - 1;\r\n      }\r\n      public boolean hasNext() {\r\n        return index &gt;= 0 ? true : false;\r\n      }\r\n      public T next() {\r\n        if(index &gt;= 0) \r\n          return list.get(index--);\r\n        else \r\n          throw new NoSuchElementException();\r\n      }\r\n    }\r\n\r\nAn implementation for the array situation is quite similar. Of cause an iterator can be source for a stream or a collection as well.\r\n\r\nSo not always it is best to create a new array just to provide a reverse view when all you want to do is iterating over the array / list or feed it into a stream or a new collection / array.\r\n\r\n","title":"How do I reverse an int array in Java?","body":"<p>Just for the sake of it. People often do only need a 'view' on an array or list in reversed order instead of a completely   do not need a reversed array when working with streams and collections but a 'reversed' view on the original array/collection. , it is best to create a toolkit that has a reverse view on a list / array.</p>\n<p>So create your Iterator implementation that takes an array or list and provide the input.</p>\n<pre><code>/// Reverse Iterator\npublic class ReverseIterator&lt;T&gt; implements Iterator&lt;T&gt; {\n  private int index;\n  private final List&lt;T&gt; list;\n  public ReverseIterator(List&lt;T&gt; list) {\n     this.list = list;\n     this.index = list.size() - 1;\n  }\n  public boolean hasNext() {\n    return index &gt;= 0 ? true : false;\n  }\n  public T next() {\n    if(index &gt;= 0) \n      return list.get(index--);\n    else \n      throw new NoSuchElementException();\n  }\n}\n</code></pre>\n<p>An implementation for the array situation is quite similar. Of cause an iterator can be source for a stream or a collection as well.</p>\n<p>So not always it is best to create a new array just to provide a reverse view when all you want to do is iterating over the array / list or feed it into a stream or a new collection / array.</p>\n"},{"tags":[],"owner":{"account_id":5223818,"reputation":641,"user_id":4176408,"display_name":"Aalishan Ansari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617436868,"creation_date":1617436868,"answer_id":66928941,"question_id":2137755,"body_markdown":"This has 2 solution \r\n1. Loop\r\n2. Recursion\r\n\r\n    public class _1_ReverseArray {\r\n    \r\n        public static void main(String[] args) {\r\n            int array[] = {2, 3, 1, 4, 9};\r\n            //reverseArray(array, 0, array.length - 1);\r\n            reverseArrayWhileLoop(array, 0, array.length - 1);\r\n            printArray(array);\r\n        }\r\n    \r\n        private static void printArray(int[] array) {\r\n            for (int a : array) {\r\n                System.out.println(a);\r\n            }\r\n        }\r\n    \r\n        private static void reverseArray(int[] array, int start, int end) {\r\n            if (start &gt; end) {\r\n                return;\r\n            } else {\r\n                int temp;\r\n                temp = array[start];\r\n                array[start] = array[end];\r\n                array[end] = temp;\r\n                reverseArray(array, start + 1, end - 1);\r\n            }\r\n        }\r\n    \r\n        private static void reverseArrayWhileLoop(int[] array, int start, int end) {\r\n            while (start &lt; end) {\r\n                int temp;\r\n                temp = array[start];\r\n                array[start] = array[end];\r\n                array[end] = temp;\r\n                start++;\r\n                end--;\r\n            }\r\n        }\r\n    \r\n    }","title":"How do I reverse an int array in Java?","body":"<p>This has 2 solution</p>\n<ol>\n<li><p>Loop</p>\n</li>\n<li><p>Recursion</p>\n<p>public class _1_ReverseArray {</p>\n<pre><code> public static void main(String[] args) {\n     int array[] = {2, 3, 1, 4, 9};\n     //reverseArray(array, 0, array.length - 1);\n     reverseArrayWhileLoop(array, 0, array.length - 1);\n     printArray(array);\n }\n\n private static void printArray(int[] array) {\n     for (int a : array) {\n         System.out.println(a);\n     }\n }\n\n private static void reverseArray(int[] array, int start, int end) {\n     if (start &gt; end) {\n         return;\n     } else {\n         int temp;\n         temp = array[start];\n         array[start] = array[end];\n         array[end] = temp;\n         reverseArray(array, start + 1, end - 1);\n     }\n }\n\n private static void reverseArrayWhileLoop(int[] array, int start, int end) {\n     while (start &lt; end) {\n         int temp;\n         temp = array[start];\n         array[start] = array[end];\n         array[end] = temp;\n         start++;\n         end--;\n     }\n }\n</code></pre>\n<p>}</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8281147,"reputation":420,"user_id":6225803,"display_name":"krishna T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1630762578,"creation_date":1624218791,"answer_id":68059552,"question_id":2137755,"body_markdown":"A implementation using generics for arrays of non primitive types. \r\n\r\n    \t//Reverse and get new Array -preferred\r\n    \tpublic static final &lt;T&gt; T[] reverse(final T[] array) {\r\n    \t\tfinal int len = array.length;\r\n    \t\tfinal T[] reverse = (T[]) Array.newInstance(array.getClass().getComponentType(), len);\r\n    \t\tfor (int i = 0; i &lt; len; i++) {\r\n    \t\t\treverse[i] = array[len-(i+1)];\r\n    \t\t}\r\n    \t\treturn reverse;\r\n    \t}\r\n    \t\r\n    \t//Reverse existing array - don&#39;t have to return it\r\n    \tpublic static final &lt;T&gt; T[] reverseExisting(final T[] array) {\r\n    \t\tfinal int len = array.length;\r\n    \t\tfor (int i = 0; i &lt; len/2; i++) {\r\n    \t\t\tfinal T temp = array[i];\r\n    \t\t\tarray[i] = array[len-(i+1)];\r\n    \t\t\tarray[len-(i+1)] = temp;\r\n    \t\t}\r\n    \t\treturn array;\r\n    \t}","title":"How do I reverse an int array in Java?","body":"<p>A implementation using generics for arrays of non primitive types.</p>\n<pre><code>    //Reverse and get new Array -preferred\n    public static final &lt;T&gt; T[] reverse(final T[] array) {\n        final int len = array.length;\n        final T[] reverse = (T[]) Array.newInstance(array.getClass().getComponentType(), len);\n        for (int i = 0; i &lt; len; i++) {\n            reverse[i] = array[len-(i+1)];\n        }\n        return reverse;\n    }\n    \n    //Reverse existing array - don't have to return it\n    public static final &lt;T&gt; T[] reverseExisting(final T[] array) {\n        final int len = array.length;\n        for (int i = 0; i &lt; len/2; i++) {\n            final T temp = array[i];\n            array[i] = array[len-(i+1)];\n            array[len-(i+1)] = temp;\n        }\n        return array;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1651432535,"creation_date":1651432535,"answer_id":72079720,"question_id":2137755,"body_markdown":"Simple way to do this:\r\n\r\n        for(int i=queue.length-1;i&gt;=0;i--){\r\n                    System.out.print(queue[i] + &quot;  &quot;);\r\n        }","title":"How do I reverse an int array in Java?","body":"<p>Simple way to do this:</p>\n<pre><code>    for(int i=queue.length-1;i&gt;=0;i--){\n                System.out.print(queue[i] + &quot;  &quot;);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3505189,"reputation":1449,"user_id":2930864,"display_name":"Percy Vega"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695414256,"creation_date":1695414256,"answer_id":77160481,"question_id":2137755,"body_markdown":"For Java 8+, you can use the following to reverse an int[]:\r\n\r\n    int[] validData = {1, 2, 3};\r\n    validData = Arrays.stream(validData)\r\n            .boxed()\r\n            .sorted(Collections.reverseOrder())\r\n            .mapToInt(Integer::intValue)\r\n            .toArray();\r\n\r\nAfter this, validData will contain {3, 2, 1}.","title":"How do I reverse an int array in Java?","body":"<p>For Java 8+, you can use the following to reverse an int[]:</p>\n<pre><code>int[] validData = {1, 2, 3};\nvalidData = Arrays.stream(validData)\n        .boxed()\n        .sorted(Collections.reverseOrder())\n        .mapToInt(Integer::intValue)\n        .toArray();\n</code></pre>\n<p>After this, validData will contain {3, 2, 1}.</p>\n"}],"owner":{"account_id":588291,"reputation":2977,"user_id":259029,"display_name":"MichaelScott"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":680958,"favorite_count":0,"down_vote_count":3,"up_vote_count":298,"accepted_answer_id":2137791,"answer_count":48,"score":295,"last_activity_date":1695414256,"creation_date":1264486157,"question_id":2137755,"body_markdown":"I am trying to reverse an int array in Java.\r\n\r\nThis method does not reverse the array.  \r\n\r\n    for(int i = 0; i &lt; validData.length; i++)\r\n    {\r\n    \tint temp = validData[i];\r\n    \tvalidData[i] = validData[validData.length - i - 1];\r\n    \tvalidData[validData.length - i - 1] = temp;\r\n    }\r\n\r\nWhat is wrong with it?","title":"How do I reverse an int array in Java?","body":"<p>I am trying to reverse an int array in Java.</p>\n\n<p>This method does not reverse the array.  </p>\n\n<pre><code>for(int i = 0; i &lt; validData.length; i++)\n{\n    int temp = validData[i];\n    validData[i] = validData[validData.length - i - 1];\n    validData[validData.length - i - 1] = temp;\n}\n</code></pre>\n\n<p>What is wrong with it?</p>\n"},{"tags":["java","initialization"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1695396740,"post_id":77158965,"comment_id":136023505,"body_markdown":"the initial value can also be part of the declaration of the field: `private ArrayList&lt;String&gt; someArrayList = null;`, it doesn&#39;t need to be in the constructor.","body":"the initial value can also be part of the declaration of the field: <code>private ArrayList&lt;String&gt; someArrayList = null;</code>, it doesn&#39;t need to be in the constructor."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1695396743,"post_id":77158965,"comment_id":136023506,"body_markdown":"Fields are null by default (unless they&#39;re primitives e.g. int). So assigning null with `= null` doesn&#39;t do anything. It&#39;s not *incorrect*, it&#39;s just redundant.","body":"Fields are null by default (unless they&#39;re primitives e.g. int). So assigning null with <code>= null</code> doesn&#39;t do anything. It&#39;s not <i>incorrect</i>, it&#39;s just redundant."},{"owner":{"display_name":"user6073886"},"score":4,"creation_date":1695396781,"post_id":77158965,"comment_id":136023513,"body_markdown":"[The Java Tutorials - Initializing Fields](https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)","body":"<a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html\" rel=\"nofollow noreferrer\">The Java Tutorials - Initializing Fields</a>"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695397229,"post_id":77158965,"comment_id":136023595,"body_markdown":"well, it also depends on whether you are using keywords like `static` or `final` what you are doing now is redundant, though sometimes IDEs would warn/highlight is as uninitialized if you did not assign a null to a variable and only declared it.","body":"well, it also depends on whether you are using keywords like <code>static</code> or <code>final</code> what you are doing now is redundant, though sometimes IDEs would warn/highlight is as uninitialized if you did not assign a null to a variable and only declared it."},{"owner":{"account_id":251706,"reputation":5298,"user_id":529282,"display_name":"Martheen"},"score":0,"creation_date":1695397418,"post_id":77158965,"comment_id":136023628,"body_markdown":"Collections are usually initialized as empty collections, that way usual operations like modifying or querying its member/size don&#39;t have to check if it&#39;s not null, though that might depend on the business process, whether, say, someone who doesn&#39;t smoke will have their list of preferred cigarette brand as a null or empty list.","body":"Collections are usually initialized as empty collections, that way usual operations like modifying or querying its member/size don&#39;t have to check if it&#39;s not null, though that might depend on the business process, whether, say, someone who doesn&#39;t smoke will have their list of preferred cigarette brand as a null or empty list."},{"owner":{"account_id":29510405,"reputation":5,"user_id":22615586,"display_name":"snow"},"score":0,"creation_date":1695397431,"post_id":77158965,"comment_id":136023630,"body_markdown":"Thanks! I&#39;m getting clearer about the initialization right now.","body":"Thanks! I&#39;m getting clearer about the initialization right now."}],"answers":[{"tags":[],"owner":{"account_id":24000166,"reputation":220,"user_id":17985195,"display_name":"TP95"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695397475,"creation_date":1695397475,"answer_id":77159061,"question_id":77158965,"body_markdown":"Initial property values can be set within a class constructor so when you create the class, those properties are already filled up by your default values:\r\n\r\n```java\r\nclass MyObject\r\n{\r\n   int variableOne;\r\n   int variableTwo;\r\n\r\n   // Constructor\r\n   public MyObject() {\r\n     variableOne = 5;\r\n     variableTwo = 10;\r\n   }\r\n}\r\n\r\n// Create the instance of class\r\nMyObject myObject = new MyObject(); // This automatically has the values 5 and 10 in variableOne and variableTwo\r\n```\r\n\r\nAlso note some suggestions in the comments have static infront of fields that can be instantly initialized without a constructor. However, there can be an issue if there are multiple instances of the same class, all those static variables are shared amongst all the object. This is good only in very special scenarios.","title":"How can I create an empty instance of class in java or how should I initialize it?","body":"<p>Initial property values can be set within a class constructor so when you create the class, those properties are already filled up by your default values:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyObject\n{\n   int variableOne;\n   int variableTwo;\n\n   // Constructor\n   public MyObject() {\n     variableOne = 5;\n     variableTwo = 10;\n   }\n}\n\n// Create the instance of class\nMyObject myObject = new MyObject(); // This automatically has the values 5 and 10 in variableOne and variableTwo\n</code></pre>\n<p>Also note some suggestions in the comments have static infront of fields that can be instantly initialized without a constructor. However, there can be an issue if there are multiple instances of the same class, all those static variables are shared amongst all the object. This is good only in very special scenarios.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695413235,"creation_date":1695413235,"answer_id":77160398,"question_id":77158965,"body_markdown":"Using one class, this shows various ways to initialize the values.\r\n- The first is by default.  Just assign the values when the instance fields are declared.\r\n```\r\nMyClass mc1 = new MyClass();\r\nSystem.out.println(mc1);\r\n```\r\nprints\r\n```\r\n10, 20, Java\r\n```\r\n- The most common method is to use a constructor by passing arguments to the class.\r\n```\r\nMyClass mc2 = new MyClass(100,200,&quot;Java!!&quot;);\r\nSystem.out.println(mc2);\r\n```\r\nprints\r\n```\r\n100, 200, Java!!\r\n```\r\n- Setters are used to assign different values as needed.\r\n```\r\n\r\n \r\nMyClass mc3 = new MyClass();\r\nSystem.out.println(&quot;Before assignment: &quot; + mc3); \r\nmc3.setVar1(1000);\r\nmc3.setVar2(2000);\r\nmc3.setVar3(&quot;Java!!&quot;);\r\nSystem.out.println(&quot;After assignment:  &quot; + mc3);\r\n\r\n```\r\nprints\r\n```\r\nBefore assignment: 10, 20, Java\r\nAfter assignment:  1000, 2000, Java!!\r\n\r\n```\r\n```\r\nclass MyClass {\r\n    int var1 = 10;\r\n    int var2 = 20;\r\n    String var3 = &quot;Java&quot;;\r\n    public MyClass(int var1, int var2, String var3) {\r\n        this.var1 = var1;\r\n        this.var2 = var2;\r\n        this.var3 = var3;\r\n    }\r\n    public MyClass() {\r\n    }\r\n    public void setVar1(int v) {\r\n       this.var1 = v;\r\n    }\r\n    public void setVar2(int v) {\r\n       this.var2 = v;\r\n    }\r\n    public void setVar3 (String v) {\r\n       this.var3 = v;\r\n    }\r\n    public String toString() {\r\n        return var1 + &quot;, &quot; + var2 + &quot;, &quot; + var3;\r\n    }\r\n}\r\n```\r\nFor arrays lists one use `List.of()` which creates an immutable list.  If you want to create a mutable list, pass it as an argument to the `List` implementation constructor. This is demonstrated for maps as well.\r\n```\r\nList&lt;Integer&gt; list = new ArrayList&lt;&gt;(List.of(1, 2, 3, 4));\r\n```\r\nMaps are similar but are limited to `10 key/value` pairs via(`k1, v1, k2, v2, etc`) when initializing this way. \r\n```\r\nMap&lt;Integer, String&gt; map = new HashMap&lt;&gt;(Map.of(1, &quot;One&quot;, 2, &quot;Two&quot;, 3, &quot;Three&quot;, 4, &quot;Four&quot;));\r\n```\r\nor for any number of entries\r\n```\r\nMap&lt;Integer, String&gt; map = new HashMap&lt;&gt;(Map.ofEntries(\r\n         Map.entry(1,&quot;One&quot;),\r\n         Map.entry(2,&quot;Two),\r\n         Map.entry(3,&quot;Three&quot;),\r\n         Map.entry(4,&quot;Four&quot;));","title":"How can I create an empty instance of class in java or how should I initialize it?","body":"<p>Using one class, this shows various ways to initialize the values.</p>\n<ul>\n<li>The first is by default.  Just assign the values when the instance fields are declared.</li>\n</ul>\n<pre><code>MyClass mc1 = new MyClass();\nSystem.out.println(mc1);\n</code></pre>\n<p>prints</p>\n<pre><code>10, 20, Java\n</code></pre>\n<ul>\n<li>The most common method is to use a constructor by passing arguments to the class.</li>\n</ul>\n<pre><code>MyClass mc2 = new MyClass(100,200,&quot;Java!!&quot;);\nSystem.out.println(mc2);\n</code></pre>\n<p>prints</p>\n<pre><code>100, 200, Java!!\n</code></pre>\n<ul>\n<li>Setters are used to assign different values as needed.</li>\n</ul>\n<pre><code>\n \nMyClass mc3 = new MyClass();\nSystem.out.println(&quot;Before assignment: &quot; + mc3); \nmc3.setVar1(1000);\nmc3.setVar2(2000);\nmc3.setVar3(&quot;Java!!&quot;);\nSystem.out.println(&quot;After assignment:  &quot; + mc3);\n\n</code></pre>\n<p>prints</p>\n<pre><code>Before assignment: 10, 20, Java\nAfter assignment:  1000, 2000, Java!!\n\n</code></pre>\n<pre><code>class MyClass {\n    int var1 = 10;\n    int var2 = 20;\n    String var3 = &quot;Java&quot;;\n    public MyClass(int var1, int var2, String var3) {\n        this.var1 = var1;\n        this.var2 = var2;\n        this.var3 = var3;\n    }\n    public MyClass() {\n    }\n    public void setVar1(int v) {\n       this.var1 = v;\n    }\n    public void setVar2(int v) {\n       this.var2 = v;\n    }\n    public void setVar3 (String v) {\n       this.var3 = v;\n    }\n    public String toString() {\n        return var1 + &quot;, &quot; + var2 + &quot;, &quot; + var3;\n    }\n}\n</code></pre>\n<p>For arrays lists one use <code>List.of()</code> which creates an immutable list.  If you want to create a mutable list, pass it as an argument to the <code>List</code> implementation constructor. This is demonstrated for maps as well.</p>\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;(List.of(1, 2, 3, 4));\n</code></pre>\n<p>Maps are similar but are limited to <code>10 key/value</code> pairs via(<code>k1, v1, k2, v2, etc</code>) when initializing this way.</p>\n<pre><code>Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;(Map.of(1, &quot;One&quot;, 2, &quot;Two&quot;, 3, &quot;Three&quot;, 4, &quot;Four&quot;));\n</code></pre>\n<p>or for any number of entries</p>\n<pre><code>Map&lt;Integer, String&gt; map = new HashMap&lt;&gt;(Map.ofEntries(\n         Map.entry(1,&quot;One&quot;),\n         Map.entry(2,&quot;Two),\n         Map.entry(3,&quot;Three&quot;),\n         Map.entry(4,&quot;Four&quot;));\n</code></pre>\n"}],"owner":{"account_id":29510405,"reputation":5,"user_id":22615586,"display_name":"snow"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77159061,"answer_count":2,"score":0,"last_activity_date":1695413235,"creation_date":1695396605,"question_id":77158965,"body_markdown":"Just like the title I described above. \r\n\r\nI&#39;m a little confused about **how to initialize variables** such as an instance of a class or some collections like **ArrayList** or **HashMap**, so I tried something below:\r\n```\r\nprivate MyObject someObject; // custom class\r\nprivate ArrayList&lt;String&gt; someArrayList;\r\n\r\n// in Constructor Method\r\nthis.someObject = null; // is it correct?\r\n```\r\nI made an initialization statement in the Constructor, but I don&#39;t know if it is right.\r\nThanks for your reading and concern.\r\n","title":"How can I create an empty instance of class in java or how should I initialize it?","body":"<p>Just like the title I described above.</p>\n<p>I'm a little confused about <strong>how to initialize variables</strong> such as an instance of a class or some collections like <strong>ArrayList</strong> or <strong>HashMap</strong>, so I tried something below:</p>\n<pre><code>private MyObject someObject; // custom class\nprivate ArrayList&lt;String&gt; someArrayList;\n\n// in Constructor Method\nthis.someObject = null; // is it correct?\n</code></pre>\n<p>I made an initialization statement in the Constructor, but I don't know if it is right.\nThanks for your reading and concern.</p>\n"},{"tags":["java","spring-boot","websocket","jackson","sockjs"],"comments":[{"owner":{"account_id":11938716,"reputation":98,"user_id":8736267,"display_name":"kepich"},"score":0,"creation_date":1645614471,"post_id":71234278,"comment_id":125917235,"body_markdown":"Also, i note, that `[Ljava.lang.String;` - is so strange, it looks like broken string (type), but i dont know, why it&#39;s here apeared...","body":"Also, i note, that <code>[Ljava.lang.String;</code> - is so strange, it looks like broken string (type), but i dont know, why it&#39;s here apeared..."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1684979059,"post_id":71234278,"comment_id":134597871,"body_markdown":"`[Ljava.lang.String;` is `String[].class`","body":"<code>[Ljava.lang.String;</code> is <code>String[].class</code>"}],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645616603,"creation_date":1645610415,"answer_id":71234831,"question_id":71234278,"body_markdown":"The problem is that with the tool that you send the request (I suppose it is postman) you send it as raw text. So the desirializer expects it to be a simple String and so it can not convert it into a complex object.\r\n\r\nYou should have informed the controller that what it receives is a Json request, so that it can parse it with the correct `message body reader` and convert it into a `Event` object.\r\n\r\nTo do so, use the following header in your request you make\r\n\r\n    Content-Type: application/json\r\n\r\nAlso the problem here seems to be the url that you use to send the message. This url does not seem to represent the controller endpoint which should end with `emit`. I think you send the request directly to the message broker and not the controller of the application.","title":"Cannot deserialize value of type","body":"<p>The problem is that with the tool that you send the request (I suppose it is postman) you send it as raw text. So the desirializer expects it to be a simple String and so it can not convert it into a complex object.</p>\n<p>You should have informed the controller that what it receives is a Json request, so that it can parse it with the correct <code>message body reader</code> and convert it into a <code>Event</code> object.</p>\n<p>To do so, use the following header in your request you make</p>\n<pre><code>Content-Type: application/json\n</code></pre>\n<p>Also the problem here seems to be the url that you use to send the message. This url does not seem to represent the controller endpoint which should end with <code>emit</code>. I think you send the request directly to the message broker and not the controller of the application.</p>\n"}],"owner":{"account_id":11938716,"reputation":98,"user_id":8736267,"display_name":"kepich"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12185,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695413045,"creation_date":1645608146,"question_id":71234278,"body_markdown":"I try to create interactive apllication and working with sockets.\r\nI send data by postman in socket, but SpringBoot cannot deserialize it. Pleasr, help)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n**My dto**\r\n\r\n    public class Event {\r\n        @JsonProperty(&quot;eventType&quot;)\r\n        private String eventType;\r\n    \r\n        public Event(String eventType) {\r\n            this.eventType = eventType;\r\n        }\r\n    \r\n        public String getEventType() {\r\n            return eventType;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;Event{&quot; +\r\n                    &quot;eventType=&#39;&quot; + eventType + &#39;\\&#39;&#39; +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\n**Controller**\r\n\r\n    @Controller\r\n    public class GameController {\r\n    \r\n        @MessageMapping(&quot;/emit&quot;)\r\n        @SendTo(&quot;/topic/events&quot;)\r\n        public Event emitEvent(Event event) {\r\n            return event;\r\n        }\r\n    }\r\n\r\n**Error**\r\n\r\n    2022-02-23 16:19:41.359 ERROR 12468 --- [nio-8080-exec-6] s.w.s.s.t.s.WebSocketServerSockJsSession : Broken data received. Terminating WebSocket connection abruptly\r\n    \r\n    com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `[Ljava.lang.String;` from Object value (token `JsonToken.START_OBJECT`)\r\n     at [Source: (String)&quot;{\r\n        &quot;eventType&quot;: &quot;TestData&quot;\r\n    }&quot;; line: 1, column: 1]\r\n\r\n\r\nUpdate 1:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X5Cfl.png\r\n  [2]: https://i.stack.imgur.com/prboL.png","title":"Cannot deserialize value of type","body":"<p>I try to create interactive apllication and working with sockets.\nI send data by postman in socket, but SpringBoot cannot deserialize it. Pleasr, help)</p>\n<p><a href=\"https://i.stack.imgur.com/X5Cfl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X5Cfl.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>My dto</strong></p>\n<pre><code>public class Event {\n    @JsonProperty(&quot;eventType&quot;)\n    private String eventType;\n\n    public Event(String eventType) {\n        this.eventType = eventType;\n    }\n\n    public String getEventType() {\n        return eventType;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Event{&quot; +\n                &quot;eventType='&quot; + eventType + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<p><strong>Controller</strong></p>\n<pre><code>@Controller\npublic class GameController {\n\n    @MessageMapping(&quot;/emit&quot;)\n    @SendTo(&quot;/topic/events&quot;)\n    public Event emitEvent(Event event) {\n        return event;\n    }\n}\n</code></pre>\n<p><strong>Error</strong></p>\n<pre><code>2022-02-23 16:19:41.359 ERROR 12468 --- [nio-8080-exec-6] s.w.s.s.t.s.WebSocketServerSockJsSession : Broken data received. Terminating WebSocket connection abruptly\n\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `[Ljava.lang.String;` from Object value (token `JsonToken.START_OBJECT`)\n at [Source: (String)&quot;{\n    &quot;eventType&quot;: &quot;TestData&quot;\n}&quot;; line: 1, column: 1]\n</code></pre>\n<p>Update 1:</p>\n<p><a href=\"https://i.stack.imgur.com/prboL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/prboL.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","alert","newrelic","agent"],"answers":[{"tags":[],"owner":{"account_id":28332573,"reputation":21,"user_id":21666618,"display_name":"Daniel New Relic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695411436,"creation_date":1695411436,"answer_id":77160275,"question_id":77099738,"body_markdown":"Likely the alert only counts 1 because the default &#39;window duration&#39; is 1 minute. When the query may find 11, because the default query duration is 60 minutes.\r\n\r\nTo solve this: you can increase the window duration to 1h. however (unless using threshold type &#39;at least once in&#39;) this may delay your alert significantly.\r\n\r\nIdeally, you need to review the correct &#39;window duration&#39; needed to have sufficient events to consider that an outage worthy of being notified is happening. This will vary for all use cases.\r\n\r\nIn order to troubleshoot issues like these, you can review what the alert is evaluating by querying select * from NrAiSignal where conditionId = &lt;your condition id&gt;","title":"How to create alert according to newrelic error logs","body":"<p>Likely the alert only counts 1 because the default 'window duration' is 1 minute. When the query may find 11, because the default query duration is 60 minutes.</p>\n<p>To solve this: you can increase the window duration to 1h. however (unless using threshold type 'at least once in') this may delay your alert significantly.</p>\n<p>Ideally, you need to review the correct 'window duration' needed to have sufficient events to consider that an outage worthy of being notified is happening. This will vary for all use cases.</p>\n<p>In order to troubleshoot issues like these, you can review what the alert is evaluating by querying select * from NrAiSignal where conditionId = </p>\n"}],"owner":{"account_id":19663081,"reputation":11,"user_id":14394135,"display_name":"Furkan Kaya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695411436,"creation_date":1694630639,"question_id":77099738,"body_markdown":"I have a Java application running in a microservices architecture. I collect the logs and error conditions of the services on the New Relic platform using the New Relic agent. I want to create alarms through the New Relic platform based on error logs. These alarms should be mostly unique for similar error logs and should include the error stack in the alert notification. I&#39;m not sure how to define alarms and use correlation decisions to achieve this goal. I would appreciate it if you could help.\r\n\r\nI have created simple alarms, but each issue that is currently triggered includes recent errors. This means that one issue can contain multiple errors or no errors at all.","title":"How to create alert according to newrelic error logs","body":"<p>I have a Java application running in a microservices architecture. I collect the logs and error conditions of the services on the New Relic platform using the New Relic agent. I want to create alarms through the New Relic platform based on error logs. These alarms should be mostly unique for similar error logs and should include the error stack in the alert notification. I'm not sure how to define alarms and use correlation decisions to achieve this goal. I would appreciate it if you could help.</p>\n<p>I have created simple alarms, but each issue that is currently triggered includes recent errors. This means that one issue can contain multiple errors or no errors at all.</p>\n"},{"tags":["java","jar","subroutine"],"owner":{"account_id":5706096,"reputation":37,"user_id":4509573,"display_name":"fluxrope"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695407984,"creation_date":1695407984,"question_id":77160001,"body_markdown":"I am building an MP3 player in java and the script I have written can play an mp3 in main but when I put the same code in a subroutine in a different java file, it fails.\r\n\r\nHere is the script when its in the main (StandAlone.java):\r\n```\r\nimport javazoom.jl.decoder.Bitstream;\r\nimport javazoom.jl.decoder.JavaLayerException;\r\nimport javazoom.jl.player.advanced.AdvancedPlayer;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\n\r\npublic class Stand_Alone {\r\n    public static void main(String[] args) {\r\n        String mp3FilePath = &quot;song.mp3&quot;;\r\n\r\n        try (FileInputStream fileInputStream = new FileInputStream(mp3FilePath)) {\r\n            AdvancedPlayer player = new AdvancedPlayer(fileInputStream);\r\n\r\n            player.play();\r\n\r\n        } catch (JavaLayerException | IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHere is the code as a main and subroutine (Main.java and SongPlayer.java):\r\n\r\n```\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\nSongPlayer.load();\r\n    }\r\n}\r\n\r\n\r\n```\r\n```\r\nimport javazoom.jl.decoder.Bitstream;\r\nimport javazoom.jl.decoder.JavaLayerException;\r\nimport javazoom.jl.player.advanced.AdvancedPlayer;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\n\r\npublic class SongPlayer {\r\n    public static void load()  {\r\n       String mp3FilePath = &quot;song.mp3&quot;;\r\n       System.out.println(mp3FilePath);\r\n       try (FileInputStream fileInputStream = new FileInputStream(mp3FilePath)) {\r\n           AdvancedPlayer player = new AdvancedPlayer(fileInputStream);\r\n\r\n            player.play();\r\n\r\n        } catch (JavaLayerException | IOException e) {\r\n            e.printStackTrace();\r\n      }\r\n    }\r\n}\r\n\r\n```\r\nI am using Windows, I run it in the command prompt with the commands:\r\n```\r\njavac -cp javazoom_1.0.1.jar SongPlayer.java Main.java\r\njava Main\r\n```\r\nThe two scripts, the song and the javazoom jar are all in the same folder.\r\n\r\nThe result of running the command is:\r\n```\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: javazoom/jl/decoder/JavaLayerException\r\n        at Main.main(Main.java:4)\r\nCaused by: java.lang.ClassNotFoundException: javazoom.jl.decoder.JavaLayerException\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n        ... 1 more\r\n```\r\n\r\nThe question is, why is java not able to see javazoom package when commands are launched from a subroutine, when it is able to see it from main in the stand alone case.\r\n\r\nHow can I get java to see javazoom from the subroutine?\r\n\r\nPlease help me, this is driving me nuts and halting my progress.  I could put everything in one big java file but that&#39;s messy and confusing.\r\n","title":"javazoom package works in main but fails in subroutine (.NoClassDefFoundError: javazoom/jl/decoder/JavaLayerException)","body":"<p>I am building an MP3 player in java and the script I have written can play an mp3 in main but when I put the same code in a subroutine in a different java file, it fails.</p>\n<p>Here is the script when its in the main (StandAlone.java):</p>\n<pre><code>import javazoom.jl.decoder.Bitstream;\nimport javazoom.jl.decoder.JavaLayerException;\nimport javazoom.jl.player.advanced.AdvancedPlayer;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\n\npublic class Stand_Alone {\n    public static void main(String[] args) {\n        String mp3FilePath = &quot;song.mp3&quot;;\n\n        try (FileInputStream fileInputStream = new FileInputStream(mp3FilePath)) {\n            AdvancedPlayer player = new AdvancedPlayer(fileInputStream);\n\n            player.play();\n\n        } catch (JavaLayerException | IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Here is the code as a main and subroutine (Main.java and SongPlayer.java):</p>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\nSongPlayer.load();\n    }\n}\n\n\n</code></pre>\n<pre><code>import javazoom.jl.decoder.Bitstream;\nimport javazoom.jl.decoder.JavaLayerException;\nimport javazoom.jl.player.advanced.AdvancedPlayer;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\n\npublic class SongPlayer {\n    public static void load()  {\n       String mp3FilePath = &quot;song.mp3&quot;;\n       System.out.println(mp3FilePath);\n       try (FileInputStream fileInputStream = new FileInputStream(mp3FilePath)) {\n           AdvancedPlayer player = new AdvancedPlayer(fileInputStream);\n\n            player.play();\n\n        } catch (JavaLayerException | IOException e) {\n            e.printStackTrace();\n      }\n    }\n}\n\n</code></pre>\n<p>I am using Windows, I run it in the command prompt with the commands:</p>\n<pre><code>javac -cp javazoom_1.0.1.jar SongPlayer.java Main.java\njava Main\n</code></pre>\n<p>The two scripts, the song and the javazoom jar are all in the same folder.</p>\n<p>The result of running the command is:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: javazoom/jl/decoder/JavaLayerException\n        at Main.main(Main.java:4)\nCaused by: java.lang.ClassNotFoundException: javazoom.jl.decoder.JavaLayerException\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        ... 1 more\n</code></pre>\n<p>The question is, why is java not able to see javazoom package when commands are launched from a subroutine, when it is able to see it from main in the stand alone case.</p>\n<p>How can I get java to see javazoom from the subroutine?</p>\n<p>Please help me, this is driving me nuts and halting my progress.  I could put everything in one big java file but that's messy and confusing.</p>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1695407645,"post_id":77159619,"comment_id":136025379,"body_markdown":"Here is a link to various [Java tutorials](https://docs.oracle.com/javase/tutorial/index.html). The section on &quot;Deployment&quot; has examples for creating jar files.","body":"Here is a link to various <a href=\"https://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\">Java tutorials</a>. The section on &quot;Deployment&quot; has examples for creating jar files."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1695407811,"post_id":77159619,"comment_id":136025403,"body_markdown":"This question was originally closed as a duplicate of: https://stackoverflow.com/questions/10856996/how-to-create-a-jar-with-only-the-class-files-needed-by-a-given-class. The accepted answer has a link to a 3rd party product. I reopened the question given that there is no need to use a 3rd party product.","body":"This question was originally closed as a duplicate of: <a href=\"https://stackoverflow.com/questions/10856996/how-to-create-a-jar-with-only-the-class-files-needed-by-a-given-class\" title=\"how to create a jar with only the class files needed by a given class\">stackoverflow.com/questions/10856996/&hellip;</a>. The accepted answer has a link to a 3rd party product. I reopened the question given that there is no need to use a 3rd party product."},{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":0,"creation_date":1695413309,"post_id":77159619,"comment_id":136026212,"body_markdown":"In the end, .jar files are only .zip files with an additional `metadata.inf` file. If you have 7zip, you can simply right-click a jar file, or open the .jar file with a zip file manager. There you see how the contents are ordered. (Same goes for new MS Office file formats like docx, xslx etc, and many more btw).","body":"In the end, .jar files are only .zip files with an additional <code>metadata.inf</code> file. If you have 7zip, you can simply right-click a jar file, or open the .jar file with a zip file manager. There you see how the contents are ordered. (Same goes for new MS Office file formats like docx, xslx etc, and many more btw)."}],"answers":[{"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695404036,"creation_date":1695404036,"answer_id":77159655,"question_id":77159619,"body_markdown":"&gt; I have some class files, but I have not correspondent java file, I would create a jar. How can I create a jar file contains only some class files?\r\n\r\nYou can use this example:\r\n\r\n```\r\njar cvf myJar.jar MyClass.class MyClass2.class\r\n```","title":"Create a JAR file from a set o class file","body":"<blockquote>\n<p>I have some class files, but I have not correspondent java file, I would create a jar. How can I create a jar file contains only some class files?</p>\n</blockquote>\n<p>You can use this example:</p>\n<pre><code>jar cvf myJar.jar MyClass.class MyClass2.class\n</code></pre>\n"}],"owner":{"account_id":1226320,"reputation":825,"user_id":8954551,"display_name":"Vito Lipari"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77159655,"answer_count":1,"score":0,"last_activity_date":1695407819,"creation_date":1695403493,"question_id":77159619,"body_markdown":"I have some class files, but I have not correspondent java file, I would create a jar.\r\nHow can I create a jar file contains only some class files?\r\n\r\n*Sorry for my english*","title":"Create a JAR file from a set o class file","body":"<p>I have some class files, but I have not correspondent java file, I would create a jar.\nHow can I create a jar file contains only some class files?</p>\n<p><em>Sorry for my english</em></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1695379011,"post_id":77156813,"comment_id":136019777,"body_markdown":"Please [edit] your question to show the code that does that vertically, so we can start from there.","body":"Please <a href=\"https://stackoverflow.com/posts/77156813/edit\">edit</a> your question to show the code that does that vertically, so we can start from there."},{"owner":{"account_id":1868353,"reputation":9514,"user_id":1691311,"accept_rate":100,"display_name":"Randy"},"score":0,"creation_date":1695379156,"post_id":77156813,"comment_id":136019801,"body_markdown":"System.out.println(String.join(&quot; &quot;, &quot;Hello, World!&quot;.split(&quot;&quot;)));","body":"System.out.println(String.join(&quot; &quot;, &quot;Hello, World!&quot;.split(&quot;&quot;)));"},{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1695380200,"post_id":77156813,"comment_id":136019983,"body_markdown":"`for (; number &gt; 0; number \\= 10) System.out.print(number % 10);`","body":"<code>for (; number &gt; 0; number \\= 10) System.out.print(number % 10);</code>"},{"owner":{"account_id":13203350,"reputation":868,"user_id":9535950,"display_name":"Thomas Behr"},"score":0,"creation_date":1695380983,"post_id":77156813,"comment_id":136020140,"body_markdown":"No `if`, no `for`, no `while` makes this kind of difficult to solve, because this essentially prevents you from knowing when you are done separating, doesn&#39;t it? Are you allowed to use `switch`? `switch` could be used as a complicated way to enforce a condition (i.e. `if` substitute).","body":"No <code>if</code>, no <code>for</code>, no <code>while</code> makes this kind of difficult to solve, because this essentially prevents you from knowing when you are done separating, doesn&#39;t it? Are you allowed to use <code>switch</code>? <code>switch</code> could be used as a complicated way to enforce a condition (i.e. <code>if</code> substitute)."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1695381024,"post_id":77156813,"comment_id":136020151,"body_markdown":"Thanks for adding your code. You&#39;re almost there (even if you strayed away from the original request of only using arithmetic operators). Check out the difference between [`print`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#print(char)) and [`println`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#println(char))","body":"Thanks for adding your code. You&#39;re almost there (even if you strayed away from the original request of only using arithmetic operators). Check out the difference between <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#print(char)\" rel=\"nofollow noreferrer\"><code>print</code></a> and <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/PrintStream.html#println(char)\" rel=\"nofollow noreferrer\"><code>println</code></a>"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1695381098,"post_id":77156813,"comment_id":136020164,"body_markdown":"But since you can&#39;t use `for` etc, check out Bohemian&#39;s comment up here. You can do that same thing manually without a loop if the number always have four digits.","body":"But since you can&#39;t use <code>for</code> etc, check out Bohemian&#39;s comment up here. You can do that same thing manually without a loop if the number always have four digits."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1695383340,"post_id":77156813,"comment_id":136020637,"body_markdown":"As this looks like some kind of homework or test, please add also your knowledge level in Java (as you see yourself) so we have the chance to find a suitable solution and also the necessary grade of explanations. And please add the assignment with a bit more details to your question, even if &quot;the title says it all&quot; it would look better.","body":"As this looks like some kind of homework or test, please add also your knowledge level in Java (as you see yourself) so we have the chance to find a suitable solution and also the necessary grade of explanations. And please add the assignment with a bit more details to your question, even if &quot;the title says it all&quot; it would look better."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1695383440,"post_id":77156813,"comment_id":136020649,"body_markdown":"@Randy the guidelines say &quot;no arrays&quot;, but `String.split` returns an array.","body":"@Randy the guidelines say &quot;no arrays&quot;, but <code>String.split</code> returns an array."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695385474,"post_id":77156813,"comment_id":136021034,"body_markdown":"for avoiding loops we can use recursion; but not using any conditional like `if` or the conditional operator (`? :`) makes it tricky (and not the best programming practice)","body":"for avoiding loops we can use recursion; but not using any conditional like <code>if</code> or the conditional operator (<code>? :</code>) makes it tricky (and not the best programming practice)"},{"owner":{"account_id":9995852,"reputation":6086,"user_id":7393478,"display_name":"Kaddath"},"score":0,"creation_date":1695389683,"post_id":77156813,"comment_id":136021900,"body_markdown":"@user85421 I think the recursion end can be handled by a `try ... catch`, something like provoking a division by zero should be OK","body":"@user85421 I think the recursion end can be handled by a <code>try ... catch</code>, something like provoking a division by zero should be OK"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695393059,"post_id":77156813,"comment_id":136022662,"body_markdown":"&quot;I can make the list vertically, just not horizontally.&quot; Then use `System.out.print` instead of `System.out.println` (and don&#39;t forget to add spaces)","body":"&quot;I can make the list vertically, just not horizontally.&quot; Then use <code>System.out.print</code> instead of <code>System.out.println</code> (and don&#39;t forget to add spaces)"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695393168,"post_id":77156813,"comment_id":136022688,"body_markdown":"By the way, you haven&#39;t done &quot;Use the basic 5 arithmetic operators (+ - * / %) only for each digit separation.&quot; correctly. It wants you to use math operations, not splitting a String into characters.","body":"By the way, you haven&#39;t done &quot;Use the basic 5 arithmetic operators (+ - * / %) only for each digit separation.&quot; correctly. It wants you to use math operations, not splitting a String into characters."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695402523,"post_id":77156813,"comment_id":136024515,"body_markdown":"@Kaddath an example of what I meant with &quot;tricky&quot;  and &quot;not best practice&quot;","body":"@Kaddath an example of what I meant with &quot;tricky&quot;  and &quot;not best practice&quot;"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695404661,"post_id":77156813,"comment_id":136024888,"body_markdown":"A Java 8 Streams approach: `IntStream.iterate(n, i -&gt; i/10).limit((int)Math.log10(n)+1).map(i -&gt; i%10).boxed().collect(Collector.of(StringBuilder::new, (s,i) -&gt; s.insert(0, i).insert(1,&quot; &quot;), StringBuilder::append, StringBuilder::toString)).trim()` (no Exception... but some hidden loops? conditionals?)","body":"A Java 8 Streams approach: <code>IntStream.iterate(n, i -&gt; i&#47;10).limit((int)Math.log10(n)+1).map(i -&gt; i%10).boxed().collect(Collector.of(StringBuilder::new, (s,i) -&gt; s.insert(0, i).insert(1,&quot; &quot;), StringBuilder::append, StringBuilder::toString)).trim()</code> (no Exception... but some hidden loops? conditionals?)"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695394814,"creation_date":1695393198,"answer_id":77158546,"question_id":77156813,"body_markdown":"I suspect there is more to this than what you have described. You may need to clarify the constraints with your instructor as using loops and if statements are a fundamental part of writing software.  But here is an example that satisfies your requirements but it is contrived and not a good practice.\r\n\r\n- use recursion, that avoids the loop.\r\n- artificially induce a runtime exception to stop the process.\r\n\r\nThe `for loop` is just to demonstrate and not part of the actual solution.\r\n```\r\nfor (int v : new int[] {123, 2345, 1, 123456780}) {\r\n    System.out.println(separateDigits(v));\r\n}\r\n```\r\nprints\r\n```\r\n1 2 3 \r\n2 3 4 5 \r\n1 \r\n1 2 3 4 5 6 7 8 0 \r\n```\r\nUsing recursion, the values are computed in reverse order of what you want. But when returning from the exception. The string is built in the proper order and eventually returned as the result.\r\n```\r\npublic static String separateDigits(int v) {\r\n    try {\r\n        int q = 10/v; // force exception when v == 0\r\n        return separateDigits(v/10) + v%10 + &quot; &quot;;\r\n    } catch (ArithmeticException ae) {\r\n        return &quot;&quot;;\r\n    }\r\n}\r\n","title":"Separate a whole number horizontally e.g 1234 -&gt; 1 2 3 4","body":"<p>I suspect there is more to this than what you have described. You may need to clarify the constraints with your instructor as using loops and if statements are a fundamental part of writing software.  But here is an example that satisfies your requirements but it is contrived and not a good practice.</p>\n<ul>\n<li>use recursion, that avoids the loop.</li>\n<li>artificially induce a runtime exception to stop the process.</li>\n</ul>\n<p>The <code>for loop</code> is just to demonstrate and not part of the actual solution.</p>\n<pre><code>for (int v : new int[] {123, 2345, 1, 123456780}) {\n    System.out.println(separateDigits(v));\n}\n</code></pre>\n<p>prints</p>\n<pre><code>1 2 3 \n2 3 4 5 \n1 \n1 2 3 4 5 6 7 8 0 \n</code></pre>\n<p>Using recursion, the values are computed in reverse order of what you want. But when returning from the exception. The string is built in the proper order and eventually returned as the result.</p>\n<pre><code>public static String separateDigits(int v) {\n    try {\n        int q = 10/v; // force exception when v == 0\n        return separateDigits(v/10) + v%10 + &quot; &quot;;\n    } catch (ArithmeticException ae) {\n        return &quot;&quot;;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695407594,"creation_date":1695407594,"answer_id":77159965,"question_id":77156813,"body_markdown":"You could use a regular expression this way:\r\n``` lang-java\r\nint number = 1234;\r\nString stringified = String.valueof(number);\r\nSystem.out.println(stringified.replaceAll(&quot;\\\\d(?=\\\\d)&quot;, &quot;$0 &quot;));\r\n```\r\nThis will show `1 2 3 4`.\r\n\r\nThis replaces each diget (`\\\\d`) that is followed by another digit (`(?=\\\\d)`) with itself (`$0` group 0 is the whole match) followed by a space. ","title":"Separate a whole number horizontally e.g 1234 -&gt; 1 2 3 4","body":"<p>You could use a regular expression this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int number = 1234;\nString stringified = String.valueof(number);\nSystem.out.println(stringified.replaceAll(&quot;\\\\d(?=\\\\d)&quot;, &quot;$0 &quot;));\n</code></pre>\n<p>This will show <code>1 2 3 4</code>.</p>\n<p>This replaces each diget (<code>\\\\d</code>) that is followed by another digit (<code>(?=\\\\d)</code>) with itself (<code>$0</code> group 0 is the whole match) followed by a space.</p>\n"}],"owner":{"account_id":29508247,"reputation":1,"user_id":22613822,"display_name":"MattMartin"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":2,"score":-3,"last_activity_date":1695407594,"creation_date":1695378421,"question_id":77156813,"body_markdown":"The guidelines say:\r\n\r\n&gt; Do not use conditional if nor loops (e.g. for) for this question nor arrays, etc.  Use the basic 5 arithmetic operators (+ - * / %) only for each digit separation.\r\n\r\nI can make the list vertically, just not horizontally.\r\n\r\n\r\n \r\n\r\n    \r\n    import java.util.Scanner;\r\n    \r\n    \r\n    public class SeparateDigits {\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            \r\n            System.out.print(&quot;Enter a full number: &quot;);\r\n            int number = scanner.nextInt();\r\n            \r\n            separateAndPrintDigits(number);\r\n            \r\n            scanner.close();\r\n        }\r\n        \r\n        public static void separateAndPrintDigits(int number) {\r\n            // Convert the number to a string to easily separate digits\r\n            String numberStr = Integer.toString(number);\r\n            \r\n            System.out.println(&quot;Separating digits:&quot;);\r\n            for (int i = 0; i &lt; numberStr.length(); i++) {\r\n                char digit = numberStr.charAt(i);\r\n                System.out.println(digit);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"Separate a whole number horizontally e.g 1234 -&gt; 1 2 3 4","body":"<p>The guidelines say:</p>\n<blockquote>\n<p>Do not use conditional if nor loops (e.g. for) for this question nor arrays, etc.  Use the basic 5 arithmetic operators (+ - * / %) only for each digit separation.</p>\n</blockquote>\n<p>I can make the list vertically, just not horizontally.</p>\n<pre><code>import java.util.Scanner;\n\n\npublic class SeparateDigits {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        \n        System.out.print(&quot;Enter a full number: &quot;);\n        int number = scanner.nextInt();\n        \n        separateAndPrintDigits(number);\n        \n        scanner.close();\n    }\n    \n    public static void separateAndPrintDigits(int number) {\n        // Convert the number to a string to easily separate digits\n        String numberStr = Integer.toString(number);\n        \n        System.out.println(&quot;Separating digits:&quot;);\n        for (int i = 0; i &lt; numberStr.length(); i++) {\n            char digit = numberStr.charAt(i);\n            System.out.println(digit);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","c#","hp-uft"],"comments":[{"owner":{"account_id":2737,"reputation":111800,"user_id":3848,"accept_rate":92,"display_name":"Motti"},"score":0,"creation_date":1695759757,"post_id":77159874,"comment_id":136066856,"body_markdown":"What objects are you expecting to see? The question is tagged `Java` and `C#`, is it one of those?","body":"What objects are you expecting to see? The question is tagged <code>Java</code> and <code>C#</code>, is it one of those?"},{"owner":{"account_id":23419759,"reputation":25,"user_id":17480142,"display_name":"Alex Bravo"},"score":0,"creation_date":1695848963,"post_id":77159874,"comment_id":136080554,"body_markdown":"Hi, Java app in java 6","body":"Hi, Java app in java 6"},{"owner":{"account_id":2737,"reputation":111800,"user_id":3848,"accept_rate":92,"display_name":"Motti"},"score":0,"creation_date":1695890265,"post_id":77159874,"comment_id":136085075,"body_markdown":"Have you verified that the Java Addin is loaded and that the correct options are set in the Record &amp; Run settings dialog?","body":"Have you verified that the Java Addin is loaded and that the correct options are set in the Record &amp; Run settings dialog?"},{"owner":{"account_id":23419759,"reputation":25,"user_id":17480142,"display_name":"Alex Bravo"},"score":0,"creation_date":1695902996,"post_id":77159874,"comment_id":136087552,"body_markdown":"Yes, it could be the system environment variables, you have Java 11 natively","body":"Yes, it could be the system environment variables, you have Java 11 natively"}],"owner":{"account_id":23419759,"reputation":25,"user_id":17480142,"display_name":"Alex Bravo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695406500,"creation_date":1695406500,"question_id":77159874,"body_markdown":"I want to do some testing of Windows desktop applications with UFT 2022 and it doesn&#39;t let me see the element tree with the inspector(Object Spy).\r\n\r\nWith uft 15.02 it does let me, however with 2022 it doesn&#39;t show me the tree.\r\n\r\nAm I missing some registry, local, variable configuration?\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/acpej.png","title":"UFT-ONE 2022 error Object Spy element GUI Desktop","body":"<p>I want to do some testing of Windows desktop applications with UFT 2022 and it doesn't let me see the element tree with the inspector(Object Spy).</p>\n<p>With uft 15.02 it does let me, however with 2022 it doesn't show me the tree.</p>\n<p>Am I missing some registry, local, variable configuration?</p>\n<p><a href=\"https://i.stack.imgur.com/acpej.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/acpej.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","security","serialization","deserialization"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":2,"creation_date":1472564174,"post_id":39228918,"comment_id":65795071,"body_markdown":"Some nice guidelines: https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=27492407","body":"Some nice guidelines: <a href=\"https://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=27492407\" rel=\"nofollow noreferrer\">securecoding.cert.org/confluence/pages/&hellip;</a>"},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":1,"creation_date":1472565537,"post_id":39228918,"comment_id":65796113,"body_markdown":"Perhaps use of a transport format such as json, xml or protocol buffer is another alternative?","body":"Perhaps use of a transport format such as json, xml or protocol buffer is another alternative?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1472565540,"post_id":39228918,"comment_id":65796116,"body_markdown":"Solution 4: Only accept data from trusted sources - verifyable e.g. by a RSA/ECC signature.","body":"Solution 4: Only accept data from trusted sources - verifyable e.g. by a RSA/ECC signature."},{"owner":{"account_id":3261103,"reputation":930,"user_id":2746681,"accept_rate":60,"display_name":"s.ijpma"},"score":0,"creation_date":1472565581,"post_id":39228918,"comment_id":65796150,"body_markdown":"Update your commons collection jar to version 3.2.2.","body":"Update your commons collection jar to version 3.2.2."},{"owner":{"account_id":5474407,"reputation":425,"user_id":4352759,"accept_rate":67,"display_name":"Sudershan"},"score":0,"creation_date":1472565715,"post_id":39228918,"comment_id":65796244,"body_markdown":"@GhostCat Yeah. SER04-J, SER12-J, SER13-J comes within the context and i think most of the information has already been included in the post.\n\nhttps://tersesystems.com/2015/11/08/closing-the-open-door-of-java-object-serialization/ can be referred to know why SecurityManager and some other data validations aren&#39;t enough.","body":"@GhostCat Yeah. SER04-J, SER12-J, SER13-J comes within the context and i think most of the information has already been included in the post.  <a href=\"https://tersesystems.com/2015/11/08/closing-the-open-door-of-java-object-serialization/\" rel=\"nofollow noreferrer\">tersesystems.com/2015/11/08/&hellip;</a> can be referred to know why SecurityManager and some other data validations aren&#39;t enough."},{"owner":{"account_id":5474407,"reputation":425,"user_id":4352759,"accept_rate":67,"display_name":"Sudershan"},"score":0,"creation_date":1472565855,"post_id":39228918,"comment_id":65796335,"body_markdown":"@Taylor, In case where &quot;serialization/deserialization cannot be neglected&quot;.\n\nThe options you gave are alternatives for serialization.","body":"@Taylor, In case where &quot;serialization/deserialization cannot be neglected&quot;.  The options you gave are alternatives for serialization."},{"owner":{"account_id":5474407,"reputation":425,"user_id":4352759,"accept_rate":67,"display_name":"Sudershan"},"score":0,"creation_date":1472568402,"post_id":39228918,"comment_id":65798188,"body_markdown":"@Robert Yes, signatures can be used. Limits to the scenario where our clients are known and pre-defined, if i am not wrong.\n\nBut there might be use-cases where the endpoint is open to the world.","body":"@Robert Yes, signatures can be used. Limits to the scenario where our clients are known and pre-defined, if i am not wrong.  But there might be use-cases where the endpoint is open to the world."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":2,"creation_date":1472568579,"post_id":39228918,"comment_id":65798333,"body_markdown":"@Sudershan In such a case only solution 3 is secure. The Java serialization format is mobile code and you should never expose an code execution interface to the world. Use a data-only format instead.","body":"@Sudershan In such a case only solution 3 is secure. The Java serialization format is mobile code and you should never expose an code execution interface to the world. Use a data-only format instead."}],"answers":[{"tags":[],"owner":{"account_id":2871723,"reputation":836,"user_id":2464918,"display_name":"Gil Cohen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642929757,"creation_date":1642929757,"answer_id":70820683,"question_id":39228918,"body_markdown":"First, you need to think of the risk and who gets the serialized data. An internal admin interface with only 3 super-admins able to access it, does not require the same attention as a public website. In the first case, you might even not fix it and settle with the compensating controls.\r\nSecond, you need to prioritize your suggestions: turning off serialization is the best option as it eliminates the risk. White listing specific classes is the second best and should be chosen if serialization cannot be turned off, but blacklisting is not recommended as you won&#39;t think of all of the options and it would be bypassed. I wouldn&#39;t consider blacklisting as a valid solution.\r\nAnother possible solution, depending on the use-case, is encryption and\\or signing (HMAC) of the serialized data. In .NET you have the Viewstate that can be used for deserialization attacks to take over it, but if it is signed or encrypted in a proper manner, you cannot modify it, so this is another valid solution. So you can choose one of these 3 (excluding blacklisting).\r\n ","title":"java - deserialization of untrusted data workaround","body":"<p>First, you need to think of the risk and who gets the serialized data. An internal admin interface with only 3 super-admins able to access it, does not require the same attention as a public website. In the first case, you might even not fix it and settle with the compensating controls.\nSecond, you need to prioritize your suggestions: turning off serialization is the best option as it eliminates the risk. White listing specific classes is the second best and should be chosen if serialization cannot be turned off, but blacklisting is not recommended as you won't think of all of the options and it would be bypassed. I wouldn't consider blacklisting as a valid solution.\nAnother possible solution, depending on the use-case, is encryption and\\or signing (HMAC) of the serialized data. In .NET you have the Viewstate that can be used for deserialization attacks to take over it, but if it is signed or encrypted in a proper manner, you cannot modify it, so this is another valid solution. So you can choose one of these 3 (excluding blacklisting).</p>\n"}],"owner":{"account_id":5474407,"reputation":425,"user_id":4352759,"accept_rate":67,"display_name":"Sudershan"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11258,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":1,"score":16,"last_activity_date":1695405935,"creation_date":1472563860,"question_id":39228918,"body_markdown":"Last year we encountered the so-called **java object deserialization vulnerability** (not a java&#39;s problem as it looks), which is deserializing an object which might lead to Remote Code Execution (RCE) or Denial of Service (DoS) attacks.\n\nRefer, https://dzone.com/articles/java-serialization-vulnerability-threatens-million for details.\n\nBasically, if the code fails to validate the incoming object, it&#39;s vulnerable.\n\nImpact of this attack would be pretty high as described in,\nhttps://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java/19109839#19109839\n\nFirst the attacker used classes from **InvokerTransformer** from **Apache Commons Collections** as a way to build the attack chain.\n\n**Solution 1 : Blacklisting** The classes which have been used to build the gadget chain are not accepted.\n\nBut, this is not enough as the attack chain can be constructed in many other ways. Refer,\n\nhttps://github.com/frohoff/ysoserial/tree/master/src/main/java/ysoserial/payloads\n\n**Solution 2 : Whitelisting** By overriding the ObjectStream with a &quot;SecureObjectStream&quot;, which validates for classes that are actually expected by the application.\n\nAgain, this doesn&#39;t negate the attacks completely. There is a RCE using jre7u21 and a Denial of Service attack using HashSets.\n\n**Solution 3 : Turn off deserialization** The best one yet.\n\n## Question ##\nIn cases where deserialization cannot be neglected, is there a better way to validate and stop the bad data before it explodes other than black &amp; white lists?","title":"java - deserialization of untrusted data workaround","body":"<p>Last year we encountered the so-called <strong>java object deserialization vulnerability</strong> (not a java's problem as it looks), which is deserializing an object which might lead to Remote Code Execution (RCE) or Denial of Service (DoS) attacks.</p>\n<p>Refer, <a href=\"https://dzone.com/articles/java-serialization-vulnerability-threatens-million\" rel=\"noreferrer\">https://dzone.com/articles/java-serialization-vulnerability-threatens-million</a> for details.</p>\n<p>Basically, if the code fails to validate the incoming object, it's vulnerable.</p>\n<p>Impact of this attack would be pretty high as described in,\n<a href=\"https://stackoverflow.com/questions/19054460/what-is-the-security-impact-of-deserializing-untrusted-data-in-java/19109839#19109839\">What is the security impact of deserializing untrusted data in Java?</a></p>\n<p>First the attacker used classes from <strong>InvokerTransformer</strong> from <strong>Apache Commons Collections</strong> as a way to build the attack chain.</p>\n<p><strong>Solution 1 : Blacklisting</strong> The classes which have been used to build the gadget chain are not accepted.</p>\n<p>But, this is not enough as the attack chain can be constructed in many other ways. Refer,</p>\n<p><a href=\"https://github.com/frohoff/ysoserial/tree/master/src/main/java/ysoserial/payloads\" rel=\"noreferrer\">https://github.com/frohoff/ysoserial/tree/master/src/main/java/ysoserial/payloads</a></p>\n<p><strong>Solution 2 : Whitelisting</strong> By overriding the ObjectStream with a &quot;SecureObjectStream&quot;, which validates for classes that are actually expected by the application.</p>\n<p>Again, this doesn't negate the attacks completely. There is a RCE using jre7u21 and a Denial of Service attack using HashSets.</p>\n<p><strong>Solution 3 : Turn off deserialization</strong> The best one yet.</p>\n<h2>Question</h2>\n<p>In cases where deserialization cannot be neglected, is there a better way to validate and stop the bad data before it explodes other than black &amp; white lists?</p>\n"},{"tags":["java","xml","jackson"],"comments":[{"owner":{"account_id":6641230,"reputation":117,"user_id":5126865,"display_name":"Rich Ackroyd"},"score":0,"creation_date":1535221530,"post_id":52019861,"comment_id":90990523,"body_markdown":"Hi - what happens if you add a constructor to the DTO class setting the values - I recall this solving it for a json input, not sure if the same for xml","body":"Hi - what happens if you add a constructor to the DTO class setting the values - I recall this solving it for a json input, not sure if the same for xml"},{"owner":{"account_id":1516810,"reputation":3867,"user_id":1417633,"accept_rate":59,"display_name":"Tom"},"score":0,"creation_date":1535223278,"post_id":52019861,"comment_id":90991010,"body_markdown":"@RichAckroyd didn&#39;t work a constructor that was using two strings (id/value) gets ignored. If I use a single string constructor and put a breakpoint in, I can see it gives me the content of the value attribute, but Jackson then crashes further down the line.","body":"@RichAckroyd didn&#39;t work a constructor that was using two strings (id/value) gets ignored. If I use a single string constructor and put a breakpoint in, I can see it gives me the content of the value attribute, but Jackson then crashes further down the line."}],"answers":[{"tags":[],"owner":{"account_id":1516810,"reputation":3867,"user_id":1417633,"accept_rate":59,"display_name":"Tom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535279175,"creation_date":1535279175,"answer_id":52025331,"question_id":52019861,"body_markdown":"Ok nevermind I made a stupid error. The 0.6.2 version of Jackson Dataformat Xml should have made me suspicious in the first place. It seems at some point they moved to a new namespace and I was using the old namespace in gradle which sadly resolved to a maven repository that has last been updated in 2011. \r\nUpdating the namespace made it resolve 2.9.5 which has the useWrapping property. Setting this resolved the issue.","title":"Cannot parse list of elements from xml with Jackson","body":"<p>Ok nevermind I made a stupid error. The 0.6.2 version of Jackson Dataformat Xml should have made me suspicious in the first place. It seems at some point they moved to a new namespace and I was using the old namespace in gradle which sadly resolved to a maven repository that has last been updated in 2011. \nUpdating the namespace made it resolve 2.9.5 which has the useWrapping property. Setting this resolved the issue.</p>\n"},{"tags":[],"owner":{"account_id":1590669,"reputation":145,"user_id":1474045,"display_name":"Suresh Ganta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695405734,"creation_date":1695405734,"answer_id":77159815,"question_id":52019861,"body_markdown":"Like Tom answered, I used old namespace for dependency.\r\n\r\nRemoved below old dependency from pom.xml \r\n\r\n    &lt;!--&lt;dependency&gt; &lt;groupId&gt;com.fasterxml&lt;/groupId&gt; &lt;artifactId&gt;jackson-xml-databind&lt;/artifactId&gt; &lt;version&gt;RELEASE&lt;/version&gt; \r\n    &lt;/dependency&gt;--&gt;\r\n\r\nAnd Added: \r\n\r\n    &lt;dependency&gt;&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n     &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n     &lt;version&gt;2.15.2&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n\r\n","title":"Cannot parse list of elements from xml with Jackson","body":"<p>Like Tom answered, I used old namespace for dependency.</p>\n<p>Removed below old dependency from pom.xml</p>\n<pre><code>&lt;!--&lt;dependency&gt; &lt;groupId&gt;com.fasterxml&lt;/groupId&gt; &lt;artifactId&gt;jackson-xml-databind&lt;/artifactId&gt; &lt;version&gt;RELEASE&lt;/version&gt; \n&lt;/dependency&gt;--&gt;\n</code></pre>\n<p>And Added:</p>\n<pre><code>&lt;dependency&gt;&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n &lt;version&gt;2.15.2&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1516810,"reputation":3867,"user_id":1417633,"accept_rate":59,"display_name":"Tom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":776,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695405734,"creation_date":1535219709,"question_id":52019861,"body_markdown":"when I try to parse the following XML I get an error with Jackson:\r\n\r\n    &lt;root&gt;\r\n      &lt;aCollection&gt;\r\n        &lt;language xml:lang=&quot;en&quot;&gt;\r\n          &lt;entry id=&quot;1&quot; value=&quot;foo&quot;/&gt;\r\n          &lt;entry id=&quot;2&quot; value=&quot;bar&quot;/&gt;\r\n          &lt;entry id=&quot;3&quot; value=&quot;blah&quot;/&gt;\r\n        &lt;/language&gt;\r\n      &lt;/aCollection&gt;\r\n    &lt;/root&gt;\r\n\r\nThe classes I use are:\r\n\r\n    @Data\r\n    @JacksonXmlRootElement(localName = &quot;root&quot;)\r\n    public class RootDTO {\r\n      @JacksonXmlProperty(localName = &quot;aCollection&quot;)\r\n      private CollectionDTO collection;\r\n    }\r\n\r\n    @Data\r\n    public class CollectionDTO {\r\n      @JacksonXmlProperty(localName = &quot;language&quot;)\r\n      LanguageDTO language;\r\n    }\r\n\r\n    @Data\r\n    public class LanguageDTO {\r\n      @JacksonXmlProperty(localName = &quot;entry&quot;)\r\n      EntryDTO[] entries;\r\n    }\r\n\r\n    @Data\r\n    public class EntryDTO {\r\n\r\n      @JacksonXmlProperty(isAttribute = true)\r\n      private String id;\r\n\r\n      @JacksonXmlProperty(isAttribute = true)\r\n      private String value;\r\n\r\n    }\r\n\r\nThe error is:\r\n`Can not instantiate value of type [simple type, class com.tinkerdesk.viewer.model.DTO.EntryDTO] from JSON String; no single-String constructor/factory method`\r\n\r\nIf I remove the array brackets it works but of course only parses the first `entry` element. I found that I should maybe use ` @JacksonXmlElementWrapper(useWrapping = false)` on top of `EntryDTO[] entries;` since the elements are not wrapped. However this does not comile for me because there is no `useWrapping` in the `com.fasterxml.jackson.xml.annotate.JacksonXmlElementWrapper`.  My Jackson core version is 2.9.6 and xml-databind 0.6.2. Is there now a newer way to do this?\r\n","title":"Cannot parse list of elements from xml with Jackson","body":"<p>when I try to parse the following XML I get an error with Jackson:</p>\n\n<pre><code>&lt;root&gt;\n  &lt;aCollection&gt;\n    &lt;language xml:lang=\"en\"&gt;\n      &lt;entry id=\"1\" value=\"foo\"/&gt;\n      &lt;entry id=\"2\" value=\"bar\"/&gt;\n      &lt;entry id=\"3\" value=\"blah\"/&gt;\n    &lt;/language&gt;\n  &lt;/aCollection&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>The classes I use are:</p>\n\n<pre><code>@Data\n@JacksonXmlRootElement(localName = \"root\")\npublic class RootDTO {\n  @JacksonXmlProperty(localName = \"aCollection\")\n  private CollectionDTO collection;\n}\n\n@Data\npublic class CollectionDTO {\n  @JacksonXmlProperty(localName = \"language\")\n  LanguageDTO language;\n}\n\n@Data\npublic class LanguageDTO {\n  @JacksonXmlProperty(localName = \"entry\")\n  EntryDTO[] entries;\n}\n\n@Data\npublic class EntryDTO {\n\n  @JacksonXmlProperty(isAttribute = true)\n  private String id;\n\n  @JacksonXmlProperty(isAttribute = true)\n  private String value;\n\n}\n</code></pre>\n\n<p>The error is:\n<code>Can not instantiate value of type [simple type, class com.tinkerdesk.viewer.model.DTO.EntryDTO] from JSON String; no single-String constructor/factory method</code></p>\n\n<p>If I remove the array brackets it works but of course only parses the first <code>entry</code> element. I found that I should maybe use <code>@JacksonXmlElementWrapper(useWrapping = false)</code> on top of <code>EntryDTO[] entries;</code> since the elements are not wrapped. However this does not comile for me because there is no <code>useWrapping</code> in the <code>com.fasterxml.jackson.xml.annotate.JacksonXmlElementWrapper</code>.  My Jackson core version is 2.9.6 and xml-databind 0.6.2. Is there now a newer way to do this?</p>\n"},{"tags":["java","spring-data","spring-data-jpa"],"comments":[{"owner":{"account_id":7494789,"reputation":698,"user_id":5695421,"accept_rate":25,"display_name":"dk7"},"score":0,"creation_date":1555800364,"post_id":49784730,"comment_id":98228559,"body_markdown":"I&#39;m having the same issue! I&#39;m not getting why it behaves like that, why it skips the catch :(","body":"I&#39;m having the same issue! I&#39;m not getting why it behaves like that, why it skips the catch :("}],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1523482541,"creation_date":1523482541,"answer_id":49784801,"question_id":49784730,"body_markdown":"`getOne()` is just a wrapper for `EntityManager.getReference()`. That method will not throw any exception. \r\n\r\nIt returns an uninitialized proxy, **assuming** that the entity indeed exists. It doesn&#39;t get the entity state from the database, and thus doesn&#39;t even know if it exists. It assumes it does.\r\n\r\nYou&#39;ll only get an exception later, if you try to access the state of the entity. \r\n\r\nUse `findById()`/`findOne()`, check if you get a non-empty/non-null result (because these methods don&#39;t throw any exception if the entity doesn&#39;t exist, they return empty or null), and throw your exception if that&#39;s the case. ","title":"Spring JPA Repository Cannot Catch EntityNotFoundException","body":"<p><code>getOne()</code> is just a wrapper for <code>EntityManager.getReference()</code>. That method will not throw any exception. </p>\n\n<p>It returns an uninitialized proxy, <strong>assuming</strong> that the entity indeed exists. It doesn't get the entity state from the database, and thus doesn't even know if it exists. It assumes it does.</p>\n\n<p>You'll only get an exception later, if you try to access the state of the entity. </p>\n\n<p>Use <code>findById()</code>/<code>findOne()</code>, check if you get a non-empty/non-null result (because these methods don't throw any exception if the entity doesn't exist, they return empty or null), and throw your exception if that's the case. </p>\n"},{"tags":[],"owner":{"display_name":"user1092126"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1523483055,"creation_date":1523483055,"answer_id":49784888,"question_id":49784730,"body_markdown":"You need to annotate your repository class with @Repository annotation to perform wrapping of exceptions to specific persistence exceptions.\r\n\r\nWhat regarding question - you don&#39;t need to use getOne() with potential exception, but could use some other methods without throwing errors in case if entity not present, like findById() or another one that return Optional&lt;&gt; object","title":"Spring JPA Repository Cannot Catch EntityNotFoundException","body":"<p>You need to annotate your repository class with @Repository annotation to perform wrapping of exceptions to specific persistence exceptions.</p>\n\n<p>What regarding question - you don't need to use getOne() with potential exception, but could use some other methods without throwing errors in case if entity not present, like findById() or another one that return Optional&lt;> object</p>\n"},{"tags":[],"owner":{"account_id":6625221,"reputation":5148,"user_id":5115670,"accept_rate":70,"display_name":"Girdhar Singh Rathore"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1577715466,"creation_date":1577715466,"answer_id":59532288,"question_id":49784730,"body_markdown":"you can catch `DataAccessException` instead of `EntityNotFoundException` \r\n\r\n    try {\r\n        Object obj = repository.getOne(id)\r\n    }\r\n    catch (DataAccessException e) {\r\n        throw CustomException(&quot;message&quot;);\r\n    }","title":"Spring JPA Repository Cannot Catch EntityNotFoundException","body":"<p>you can catch <code>DataAccessException</code> instead of <code>EntityNotFoundException</code> </p>\n\n<pre><code>try {\n    Object obj = repository.getOne(id)\n}\ncatch (DataAccessException e) {\n    throw CustomException(\"message\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6635910,"reputation":21,"user_id":5123093,"display_name":"Victor Kirov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636738233,"creation_date":1636738233,"answer_id":69946867,"question_id":49784730,"body_markdown":"You can try this:\r\n\r\n    try {\r\n        Object obj = repository.findById(id).orElseThrow(EntityNotFoundException::new);\r\n    }\r\n    catch (EntityNotFoundException e) {\r\n        throw CustomException(&quot;message&quot;);\r\n    }\r\n\r\n","title":"Spring JPA Repository Cannot Catch EntityNotFoundException","body":"<p>You can try this:</p>\n<pre><code>try {\n    Object obj = repository.findById(id).orElseThrow(EntityNotFoundException::new);\n}\ncatch (EntityNotFoundException e) {\n    throw CustomException(&quot;message&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":11024584,"reputation":165,"user_id":8097862,"accept_rate":0,"display_name":"Keifer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11399,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":4,"score":10,"last_activity_date":1695405521,"creation_date":1523482119,"question_id":49784730,"body_markdown":"I want to throw a custom error class when a user searches my repo with an invalid ID.  This should be very straight forward, but I cannot seem to catch any errors thrown by JpaRepository.  I have made several attempts to solve this, but the following is my most straight forward attempt:\r\n\r\n    try {\r\n        Object obj = repository.getOne(id)\r\n    }\r\n    catch (EntityNotFoundException e) {\r\n        throw CustomException(&quot;message&quot;);\r\n    }\r\n\r\nWhen running this in a debugger, repository throws the exact exception I am expecting `javax.persistence.EntityNotFoundException`, but the code simply skips over my catch statement and the function returns with an error.\r\n\r\nI tried using `repository.findById(id)` with similar results.  I also tried catching `Exception` and `Throwable`.  Any ideas?  I will add more information to my post if it ends up my problem is not immediately obvious.  ","title":"Spring JPA Repository Cannot Catch EntityNotFoundException","body":"<p>I want to throw a custom error class when a user searches my repo with an invalid ID.  This should be very straight forward, but I cannot seem to catch any errors thrown by JpaRepository.  I have made several attempts to solve this, but the following is my most straight forward attempt:</p>\n<pre><code>try {\n    Object obj = repository.getOne(id)\n}\ncatch (EntityNotFoundException e) {\n    throw CustomException(&quot;message&quot;);\n}\n</code></pre>\n<p>When running this in a debugger, repository throws the exact exception I am expecting <code>javax.persistence.EntityNotFoundException</code>, but the code simply skips over my catch statement and the function returns with an error.</p>\n<p>I tried using <code>repository.findById(id)</code> with similar results.  I also tried catching <code>Exception</code> and <code>Throwable</code>.  Any ideas?  I will add more information to my post if it ends up my problem is not immediately obvious.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":12849899,"reputation":996,"user_id":9295125,"display_name":"Daniel Rafael Wosch"},"score":0,"creation_date":1621452496,"post_id":67609602,"comment_id":119503322,"body_markdown":"You could build a wrapper which takes a supplier and wraps that supplier call in an try catch. If you can return the Id than return the id in an optional. On exception return an optional.empty. If you get optional empty back from your wrapper then return the message to the user","body":"You could build a wrapper which takes a supplier and wraps that supplier call in an try catch. If you can return the Id than return the id in an optional. On exception return an optional.empty. If you get optional empty back from your wrapper then return the message to the user"}],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621496586,"creation_date":1621456818,"answer_id":67610583,"question_id":67609602,"body_markdown":"If the insert is failed because of the invalid foreign key , hibernate will throw `org.hibernate.exception.ConstraintViolationException` which internally has the name of the DB constraint that causes this exception. You can then use it to determine which foreign key causes it.\r\n\r\nPlease note that Spring may wrap this exception with it own Exception object due to its [persistence exception translation feature][1]. That means after you catch the exception thrown by spring-data , you may have to traverse the causal chain of the exception to find out `ConstraintViolationException` . I normally use [Guava][2] for doing it . Something likes: \r\n\r\n``` java\r\ntry{\r\n  repository.saveAndFlush(employee);\r\n} catch (Exception ex){\r\n\t Set&lt;String&gt; violateConstraintNames= Throwables.getCausalChain(ex).stream()\r\n\t   .filter(e -&gt; e instanceof ConstraintViolationException)\r\n       .map(e -&gt; (ConstraintViolationException) e)\r\n       .map(ConstraintViolationException::getConstraintName)\r\n       .collect(toSet());\r\n\r\n     if(violateConstraintNames.contain(&quot;employee_department_fk&quot;)){\r\n         throw new RuntimeException(&quot;Department does not exist&quot;);\r\n     }else if (violateConstraintNames.contain(&quot;employee_manager_fk&quot;)){\r\n         throw new RuntimeException(&quot;Manager does not exist&quot;);\r\n     }else{\r\n     \t throw ex;\r\n     }\r\n}\r\n```\r\n\r\nThe code looks ugly to me when comparing to using `findById()` to get and check if the referenced objects are valid or not. It also leaks the DB implementation details (i.e name of the foreign key) to the codes which is something that I would avoid. You are right that it will introduce additional select SQL, but I would consider it as premature optimisation as select by ID should be very fast thanks to the database index. Also in the non-trivial application, it is very common that you will sooner or later find that you have to get those referenced objects for checking if it pass some business rules or not.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#orm-exception-translation\r\n  [2]: https://github.com/google/guava/wiki/ThrowablesExplained#causal-chain","title":"How to catch EntityNotFoundException with getOne() method in Spring Data JPA?","body":"<p>If the insert is failed because of the invalid foreign key , hibernate will throw <code>org.hibernate.exception.ConstraintViolationException</code> which internally has the name of the DB constraint that causes this exception. You can then use it to determine which foreign key causes it.</p>\n<p>Please note that Spring may wrap this exception with it own Exception object due to its <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/data-access.html#orm-exception-translation\" rel=\"nofollow noreferrer\">persistence exception translation feature</a>. That means after you catch the exception thrown by spring-data , you may have to traverse the causal chain of the exception to find out <code>ConstraintViolationException</code> . I normally use <a href=\"https://github.com/google/guava/wiki/ThrowablesExplained#causal-chain\" rel=\"nofollow noreferrer\">Guava</a> for doing it . Something likes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try{\n  repository.saveAndFlush(employee);\n} catch (Exception ex){\n     Set&lt;String&gt; violateConstraintNames= Throwables.getCausalChain(ex).stream()\n       .filter(e -&gt; e instanceof ConstraintViolationException)\n       .map(e -&gt; (ConstraintViolationException) e)\n       .map(ConstraintViolationException::getConstraintName)\n       .collect(toSet());\n\n     if(violateConstraintNames.contain(&quot;employee_department_fk&quot;)){\n         throw new RuntimeException(&quot;Department does not exist&quot;);\n     }else if (violateConstraintNames.contain(&quot;employee_manager_fk&quot;)){\n         throw new RuntimeException(&quot;Manager does not exist&quot;);\n     }else{\n         throw ex;\n     }\n}\n</code></pre>\n<p>The code looks ugly to me when comparing to using <code>findById()</code> to get and check if the referenced objects are valid or not. It also leaks the DB implementation details (i.e name of the foreign key) to the codes which is something that I would avoid. You are right that it will introduce additional select SQL, but I would consider it as premature optimisation as select by ID should be very fast thanks to the database index. Also in the non-trivial application, it is very common that you will sooner or later find that you have to get those referenced objects for checking if it pass some business rules or not.</p>\n"},{"tags":[],"owner":{"account_id":11116969,"reputation":846,"user_id":8161014,"accept_rate":29,"display_name":"Emilio Numazaki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695405474,"creation_date":1695405474,"answer_id":77159783,"question_id":67609602,"body_markdown":"I know the question is pretty old today but in this case, you must catch `JpaObjectRetrievalFailureException` instead of `EntityNotFoundException`.","title":"How to catch EntityNotFoundException with getOne() method in Spring Data JPA?","body":"<p>I know the question is pretty old today but in this case, you must catch <code>JpaObjectRetrievalFailureException</code> instead of <code>EntityNotFoundException</code>.</p>\n"}],"owner":{"account_id":17323025,"reputation":1344,"user_id":12547954,"display_name":"Hasindu Dahanayake"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":520,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695405474,"creation_date":1621451961,"question_id":67609602,"body_markdown":"I need to know how can I catch the `EntityNotFoundException` with the `getOne()` method. \r\n\r\nI know you will suggest me to go with a method like `findById()` or `findOne()` which are retrieving the real entity rather than a proxy Object. \r\n\r\nBut in my case, I have two foreign keys to set before inserting the object. So to set those keys If I use a method starting with &quot;find*&quot; you can clearly see there will be redundant database calls to fetch those entities. \r\n\r\nBut according to my knowledge with the aid of this proxy object which was return from the `getOne()` method I can perform this operation with a single insert query. \r\n\r\nSo now the problem is in a case of an invalid foreign key passed to the `getOne()` method I need to send an error response to the end user by catching the `EntityNotFoundException` that the inserted foreign key is not valid. \r\n\r\nHow can I achieve this?","title":"How to catch EntityNotFoundException with getOne() method in Spring Data JPA?","body":"<p>I need to know how can I catch the <code>EntityNotFoundException</code> with the <code>getOne()</code> method.</p>\n<p>I know you will suggest me to go with a method like <code>findById()</code> or <code>findOne()</code> which are retrieving the real entity rather than a proxy Object.</p>\n<p>But in my case, I have two foreign keys to set before inserting the object. So to set those keys If I use a method starting with &quot;find*&quot; you can clearly see there will be redundant database calls to fetch those entities.</p>\n<p>But according to my knowledge with the aid of this proxy object which was return from the <code>getOne()</code> method I can perform this operation with a single insert query.</p>\n<p>So now the problem is in a case of an invalid foreign key passed to the <code>getOne()</code> method I need to send an error response to the end user by catching the <code>EntityNotFoundException</code> that the inserted foreign key is not valid.</p>\n<p>How can I achieve this?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":11188,"reputation":75684,"user_id":21441,"accept_rate":100,"display_name":"Mark Elliot"},"down_vote_count":2,"up_vote_count":115,"is_accepted":true,"score":113,"last_activity_date":1264451394,"creation_date":1264451394,"answer_id":2135396,"question_id":2135379,"body_markdown":"Use [`Arrays.asList`][1]:\r\n\r\n    if( Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).contains(&quot;a&quot;) )\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Arrays.html#asList%28T...%29","title":"One liner to check if element is in the list","body":"<p>Use <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Arrays.html#asList%28T...%29\" rel=\"noreferrer\"><code>Arrays.asList</code></a>:</p>\n\n<pre><code>if( Arrays.asList(\"a\",\"b\",\"c\").contains(\"a\") )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87304,"reputation":1857,"user_id":242182,"accept_rate":75,"display_name":"rayd09"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1264451625,"creation_date":1264451625,"answer_id":2135425,"question_id":2135379,"body_markdown":"There is a boolean contains(Object obj) method within the List interface.\r\n\r\nYou should be able to say:\r\n\r\n    if (list.contains(&quot;a&quot;)) {\r\n        System.out.println(&quot;It&#39;s there&quot;);\r\n    }\r\n\r\n\r\nAccording to the &lt;a href=&quot;http://java.sun.com/javase/6/docs/api/java/util/List.html#contains(java.lang.Object)&quot;&gt;javadoc&lt;/a&gt;:\r\n&lt;pre&gt;\r\nboolean contains(Object o)\r\n\r\n    Returns true if this list contains the specified element. \r\n    More formally, returns true if and only if this list contains at \r\n    least one element e such that (o==null ? e==null : o.equals(e)).\r\n&lt;pre&gt;\r\n","title":"One liner to check if element is in the list","body":"<p>There is a boolean contains(Object obj) method within the List interface.</p>\n\n<p>You should be able to say:</p>\n\n<pre><code>if (list.contains(\"a\")) {\n    System.out.println(\"It's there\");\n}\n</code></pre>\n\n<p>According to the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/List.html#contains(java.lang.Object)\" rel=\"noreferrer\">javadoc</a>:\n<pre>\nboolean contains(Object o)</p>\n\n<code>Returns true if this list contains the specified element. \nMore formally, returns true if and only if this list contains at \nleast one element e such that (o==null ? e==null : o.equals(e)).\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":12007,"reputation":17671,"user_id":23424,"accept_rate":92,"display_name":"VoidPointer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1264452832,"creation_date":1264451822,"answer_id":2135443,"question_id":2135379,"body_markdown":"You can use java.util.Arrays.binarySearch to find an element in an array or to check for its existence:\r\n\r\n    import java.util.Arrays;\r\n    ...\r\n\r\n    char[] array = new char[] {&#39;a&#39;, &#39;x&#39;, &#39;m&#39;};\r\n    Arrays.sort(array); \r\n    if (Arrays.binarySearch(array, &#39;m&#39;) &gt;= 0) {\r\n        System.out.println(&quot;Yes, m is there&quot;);\r\n    }\r\n\r\nBe aware that for binarySearch to work correctly, the array needs to be sorted. Hence the call to Arrays.sort() in the example. If your data is already sorted, you don&#39;t need to do that. Thus, this isn&#39;t strictly a one-liner if you need to sort your array first. Unfortunately, Arrays.sort() does not return a reference to the array - thus it is not possible to combine sort and binarySearch (i.e. Arrays.binarySearch(Arrays.sort(myArray), key)) does not work). \r\n\r\nIf you can afford the extra allocation, using Arrays.asList() seems cleaner.","title":"One liner to check if element is in the list","body":"<p>You can use java.util.Arrays.binarySearch to find an element in an array or to check for its existence:</p>\n\n<pre><code>import java.util.Arrays;\n...\n\nchar[] array = new char[] {'a', 'x', 'm'};\nArrays.sort(array); \nif (Arrays.binarySearch(array, 'm') &gt;= 0) {\n    System.out.println(\"Yes, m is there\");\n}\n</code></pre>\n\n<p>Be aware that for binarySearch to work correctly, the array needs to be sorted. Hence the call to Arrays.sort() in the example. If your data is already sorted, you don't need to do that. Thus, this isn't strictly a one-liner if you need to sort your array first. Unfortunately, Arrays.sort() does not return a reference to the array - thus it is not possible to combine sort and binarySearch (i.e. Arrays.binarySearch(Arrays.sort(myArray), key)) does not work). </p>\n\n<p>If you can afford the extra allocation, using Arrays.asList() seems cleaner.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1264451841,"creation_date":1264451841,"answer_id":2135447,"question_id":2135379,"body_markdown":"If he really wants a one liner without any collections, OK, he can have one:\r\n\r\n    for(String s:new String[]{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)) if (s.equals(&quot;a&quot;)) System.out.println(&quot;It&#39;s there&quot;);\r\n\r\n\\*smile\\*\r\n\r\n(Isn&#39;t it ugly? Please, don&#39;t use it in real code)","title":"One liner to check if element is in the list","body":"<p>If he really wants a one liner without any collections, OK, he can have one:</p>\n\n<pre><code>for(String s:new String[]{\"a\", \"b\", \"c\")) if (s.equals(\"a\")) System.out.println(\"It's there\");\n</code></pre>\n\n<p>*smile*</p>\n\n<p>(Isn't it ugly? Please, don't use it in real code)</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":3,"up_vote_count":6,"is_accepted":false,"score":3,"last_activity_date":1264452245,"creation_date":1264452245,"answer_id":2135488,"question_id":2135379,"body_markdown":"You could try using Strings with a separator which does not appear in any element.\r\n\r\n    if (&quot;|a|b|c|&quot;.contains(&quot;|a|&quot;))","title":"One liner to check if element is in the list","body":"<p>You could try using Strings with a separator which does not appear in any element.</p>\n\n<pre><code>if (\"|a|b|c|\".contains(\"|a|\"))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1549071612,"creation_date":1264452815,"answer_id":2135548,"question_id":2135379,"body_markdown":"In JDK7:\r\n\r\n    if ({&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}.contains(&quot;a&quot;)) {\r\n\r\nAssuming the Project Coin collections literals project goes through.\r\n\r\n**Edit:** It didn&#39;t.","title":"One liner to check if element is in the list","body":"<p>In JDK7:</p>\n\n<pre><code>if ({\"a\", \"b\", \"c\"}.contains(\"a\")) {\n</code></pre>\n\n<p>Assuming the Project Coin collections literals project goes through.</p>\n\n<p><strong>Edit:</strong> It didn't.</p>\n"},{"tags":[],"owner":{"account_id":12941972,"reputation":1386,"user_id":9357484,"accept_rate":50,"display_name":"Encipher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549072384,"creation_date":1549072384,"answer_id":54489288,"question_id":2135379,"body_markdown":"     public class Itemfound{ \r\n            public static void main(String args[]){\r\n    \r\n                    if( Arrays.asList(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).contains(&quot;a&quot;){\r\n                          System.out.println(&quot;It is here&quot;);\r\n             }\r\n        }\r\n   }\r\n\r\nThis is what you looking for. The contains() method simply checks the index of element in the list. If the index is greater than &#39;0&#39; than element is present in the list.\r\n\r\n    public boolean contains(Object o) {\r\n    return indexOf(o) &gt;= 0;\r\n    }\r\n\r\n\r\n","title":"One liner to check if element is in the list","body":"<pre><code> public class Itemfound{ \n        public static void main(String args[]){\n\n                if( Arrays.asList(\"a\",\"b\",\"c\").contains(\"a\"){\n                      System.out.println(\"It is here\");\n         }\n    }\n</code></pre>\n\n<p>}</p>\n\n<p>This is what you looking for. The contains() method simply checks the index of element in the list. If the index is greater than '0' than element is present in the list.</p>\n\n<pre><code>public boolean contains(Object o) {\nreturn indexOf(o) &gt;= 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1261134,"reputation":8171,"user_id":1219389,"accept_rate":100,"display_name":"PPartisan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1551082305,"creation_date":1551082305,"answer_id":54861934,"question_id":2135379,"body_markdown":"I would use:\r\n\r\n    if (Stream.of(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).anyMatch(&quot;a&quot;::equals)) {\r\n        //Code to execute\r\n    };\r\n\r\nor:\r\n\r\n    Stream.of(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)\r\n        .filter(&quot;a&quot;::equals)\r\n        .findAny()\r\n        .ifPresent(ignore -&gt; /*Code to execute*/);","title":"One liner to check if element is in the list","body":"<p>I would use:</p>\n\n<pre><code>if (Stream.of(\"a\",\"b\",\"c\").anyMatch(\"a\"::equals)) {\n    //Code to execute\n};\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>Stream.of(\"a\",\"b\",\"c\")\n    .filter(\"a\"::equals)\n    .findAny()\n    .ifPresent(ignore -&gt; /*Code to execute*/);\n</code></pre>\n"}],"owner":{"account_id":67484,"reputation":20119,"user_id":197473,"accept_rate":61,"display_name":"Vishal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159825,"favorite_count":0,"down_vote_count":1,"up_vote_count":51,"accepted_answer_id":2135396,"answer_count":8,"score":50,"last_activity_date":1695404503,"creation_date":1264451257,"question_id":2135379,"body_markdown":"I have been working on and off with Java/Python. Now in this situation I want to check if the element is in the list and do stuff...\r\n\r\nPython says:\r\n\r\n    if &quot;a&quot; in [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]:\r\n        print &quot;It&#39;s there!&quot;\r\n\r\nDoes Java provide any one liner for this rather than creating `ArrayList` / `Set` or similar data structure in steps and adding elements to it?\r\n\r\nThanks.\r\n","title":"One liner to check if element is in the list","body":"<p>I have been working on and off with Java/Python. Now in this situation I want to check if the element is in the list and do stuff...</p>\n<p>Python says:</p>\n<pre><code>if &quot;a&quot; in [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]:\n    print &quot;It's there!&quot;\n</code></pre>\n<p>Does Java provide any one liner for this rather than creating <code>ArrayList</code> / <code>Set</code> or similar data structure in steps and adding elements to it?</p>\n<p>Thanks.</p>\n"},{"tags":["java","spring","postgresql","transactions"],"owner":{"account_id":12319723,"reputation":33,"user_id":8989302,"display_name":"ChpokHead"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695404287,"creation_date":1692876261,"question_id":76968779,"body_markdown":"The paragraph related to a Repeatable Read isolation level in the official PostgreSQL documentation says: &quot;Applications using this level must be prepared to retry transactions due to serialization failures.&quot; I tried to simulate the failure using psql console and got &quot;ERROR:  could not serialize access due to concurrent update&quot;, but I didn&#39;t find any information related to the actual Java exception being thrown, how to handle it in Spring (JdbcTemplate be more precise) in order to execute the transaction again with the updated row?","title":"How to handle Repeatable Read isolation level serialization exceptions in Spring?","body":"<p>The paragraph related to a Repeatable Read isolation level in the official PostgreSQL documentation says: &quot;Applications using this level must be prepared to retry transactions due to serialization failures.&quot; I tried to simulate the failure using psql console and got &quot;ERROR:  could not serialize access due to concurrent update&quot;, but I didn't find any information related to the actual Java exception being thrown, how to handle it in Spring (JdbcTemplate be more precise) in order to execute the transaction again with the updated row?</p>\n"},{"tags":["java","spring","hibernate","jboss","hibernate-envers"],"comments":[{"owner":{"account_id":1087695,"reputation":2278,"user_id":1083026,"display_name":"Avinash T."},"score":0,"creation_date":1357220912,"post_id":14139856,"comment_id":19580280,"body_markdown":"is it a SQL query or HQL Query?","body":"is it a SQL query or HQL Query?"}],"answers":[{"tags":[],"owner":{"account_id":1987554,"reputation":8119,"user_id":1782379,"accept_rate":84,"display_name":"bsiamionau"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1357226082,"creation_date":1357226082,"answer_id":14141667,"question_id":14139856,"body_markdown":"It looks like **Avinash T.** is right - if you want to create native SQL query, use `createNativeQuery(String sqlString)` method of `EntityManager`. Using `createQuery(String ejbqlString)` is only possible if you&#39;re using EJB QL. Hope it would help.","title":"Hibernate Envers - Doesn&#39;t write audit records for createQuery(...).executeUpdate(), only .persist() and .merge()","body":"<p>It looks like <strong>Avinash T.</strong> is right - if you want to create native SQL query, use <code>createNativeQuery(String sqlString)</code> method of <code>EntityManager</code>. Using <code>createQuery(String ejbqlString)</code> is only possible if you're using EJB QL. Hope it would help.</p>\n"},{"tags":[],"owner":{"account_id":1087695,"reputation":2278,"user_id":1083026,"display_name":"Avinash T."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1357271449,"creation_date":1357271449,"answer_id":14150836,"question_id":14139856,"body_markdown":"Try this - \r\n\r\n        public int updateStatus(String id, String status) {\r\n    \r\n        final int changes =\r\n                    entityManager.createQuery(&quot;Update Item set state = :newState,&quot; +\r\n                            &quot; lastModified = CURRENT_TIMESTAMP&quot; +\r\n                            &quot; where id = : id &quot;)\r\n                        .setParameter(&quot;newState&quot;, status)\r\n                        .setParameter(&quot;id&quot;, id)\r\n                        .executeUpdate();\r\n    \r\n                return changes;\r\n    }\r\n\r\n\r\nFollowing link wiil help you to learn more about JPQL -\r\n\r\nhttp://docs.oracle.com/javaee/6/tutorial/doc/bnbtg.html","title":"Hibernate Envers - Doesn&#39;t write audit records for createQuery(...).executeUpdate(), only .persist() and .merge()","body":"<p>Try this - </p>\n\n<pre><code>    public int updateStatus(String id, String status) {\n\n    final int changes =\n                entityManager.createQuery(\"Update Item set state = :newState,\" +\n                        \" lastModified = CURRENT_TIMESTAMP\" +\n                        \" where id = : id \")\n                    .setParameter(\"newState\", status)\n                    .setParameter(\"id\", id)\n                    .executeUpdate();\n\n            return changes;\n}\n</code></pre>\n\n<p>Following link wiil help you to learn more about JPQL -</p>\n\n<p><a href=\"http://docs.oracle.com/javaee/6/tutorial/doc/bnbtg.html\" rel=\"nofollow\">http://docs.oracle.com/javaee/6/tutorial/doc/bnbtg.html</a></p>\n"},{"tags":[],"owner":{"account_id":149784,"reputation":8168,"user_id":362531,"accept_rate":69,"display_name":"adamw"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1357555370,"creation_date":1357555370,"answer_id":14194260,"question_id":14139856,"body_markdown":"No, Envers won&#39;t work if you are using executeUpdate. That is because the update doesn&#39;t pass through Hibernate&#39;s event mechanism, so Envers has no chances of intercepting the change, and writing the audit.","title":"Hibernate Envers - Doesn&#39;t write audit records for createQuery(...).executeUpdate(), only .persist() and .merge()","body":"<p>No, Envers won't work if you are using executeUpdate. That is because the update doesn't pass through Hibernate's event mechanism, so Envers has no chances of intercepting the change, and writing the audit.</p>\n"},{"tags":[],"owner":{"account_id":18486228,"reputation":13,"user_id":13467124,"display_name":"Mihai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695404106,"creation_date":1695404106,"answer_id":77159667,"question_id":14139856,"body_markdown":"I also needed to update a single field of my entity. If you don&#39;t need to directly use the `EntityManager`, in my case a solution for Envers to be aware of the entity-state change was to annotate my `@Entity` class with `@DynamicUpdate`, and wrap with `@Transactional` the method that set the field I wanted to update. \r\n\r\nSee this answer: [Update single field using spring data jpa][1]\r\n\r\nHibernate code that checks the `@DynamicUpdate` annotation: \r\norg.hibernate.persister.entity.mutation.UpdateCoordinatorStandard#coordinateUpdate\r\n\r\nBut be aware that using `@DynamicUpate` might incur some performance costs:\r\n\r\n&gt; Specifies that SQL update statements for the annotated entity are\r\n&gt; generated dynamically, and only include columns which are actually\r\n&gt; being updated. This might result in improved performance if it is\r\n&gt; common to change only some of the attributes of the entity. However,\r\n&gt; there is a cost associated with generating the SQL at runtime\r\n\r\n  [1]: https://stackoverflow.com/a/50297862/13467124","title":"Hibernate Envers - Doesn&#39;t write audit records for createQuery(...).executeUpdate(), only .persist() and .merge()","body":"<p>I also needed to update a single field of my entity. If you don't need to directly use the <code>EntityManager</code>, in my case a solution for Envers to be aware of the entity-state change was to annotate my <code>@Entity</code> class with <code>@DynamicUpdate</code>, and wrap with <code>@Transactional</code> the method that set the field I wanted to update.</p>\n<p>See this answer: <a href=\"https://stackoverflow.com/a/50297862/13467124\">Update single field using spring data jpa</a></p>\n<p>Hibernate code that checks the <code>@DynamicUpdate</code> annotation:\norg.hibernate.persister.entity.mutation.UpdateCoordinatorStandard#coordinateUpdate</p>\n<p>But be aware that using <code>@DynamicUpate</code> might incur some performance costs:</p>\n<blockquote>\n<p>Specifies that SQL update statements for the annotated entity are\ngenerated dynamically, and only include columns which are actually\nbeing updated. This might result in improved performance if it is\ncommon to change only some of the attributes of the entity. However,\nthere is a cost associated with generating the SQL at runtime</p>\n</blockquote>\n"}],"owner":{"account_id":1561242,"reputation":423,"user_id":1451064,"accept_rate":56,"display_name":"babb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6404,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":14141667,"answer_count":4,"score":6,"last_activity_date":1695404106,"creation_date":1357219630,"question_id":14139856,"body_markdown":"I have 3 ways things get written to the DB\r\n\r\n\tpublic void create(T object) {\r\n\t\tentityManager.persist(object);\r\n\t}\r\n\r\n\tpublic void update(T object) {\r\n\t\tobject = entityManager.merge(object);\r\n\t}\r\n\r\n\tpublic int updateStatus(String id, String status) {\r\n\t\t\r\n\t\tfinal int changes =\r\n\t\t\t        entityManager.createQuery(&quot;update item set state = :newState,&quot; +\r\n\t\t\t        \t\t&quot; last_modified = current_timestamp&quot; +\r\n\t\t\t        \t\t&quot; where id = : id &quot;)\r\n\t\t\t        \t.setParameter(&quot;newState&quot;, status)\r\n\t\t\t        \t.setParameter(&quot;id&quot;, id)\r\n\t\t\t            .executeUpdate();\r\n\r\n\t\t\t    return changes;\r\n\t}\r\n\r\nThe problem I have, is in order to get the Hibernate Envers to actually write the audit records to the corrsponsing x_aud and revinfo DB tables. It only works successfully for &#39;.persist()&#39; or &#39;.merge()&#39;. I cannot get it to work for &#39;createQuery(...)**.executeUpdate()**&#39;\r\n\r\nAm I missing something or does it just not work for this. The problem is, a lot of my code has been written using .executeUpdate and not merge, so really I need this to work with the existing code.\r\n\r\nCan anyone help please?","title":"Hibernate Envers - Doesn&#39;t write audit records for createQuery(...).executeUpdate(), only .persist() and .merge()","body":"<p>I have 3 ways things get written to the DB</p>\n\n<pre><code>public void create(T object) {\n    entityManager.persist(object);\n}\n\npublic void update(T object) {\n    object = entityManager.merge(object);\n}\n\npublic int updateStatus(String id, String status) {\n\n    final int changes =\n                entityManager.createQuery(\"update item set state = :newState,\" +\n                        \" last_modified = current_timestamp\" +\n                        \" where id = : id \")\n                    .setParameter(\"newState\", status)\n                    .setParameter(\"id\", id)\n                    .executeUpdate();\n\n            return changes;\n}\n</code></pre>\n\n<p>The problem I have, is in order to get the Hibernate Envers to actually write the audit records to the corrsponsing x_aud and revinfo DB tables. It only works successfully for '.persist()' or '.merge()'. I cannot get it to work for 'createQuery(...)<strong>.executeUpdate()</strong>'</p>\n\n<p>Am I missing something or does it just not work for this. The problem is, a lot of my code has been written using .executeUpdate and not merge, so really I need this to work with the existing code.</p>\n\n<p>Can anyone help please?</p>\n"},{"tags":["java","mysql","exception","connector"],"comments":[{"owner":{"account_id":5961968,"reputation":1269,"user_id":4686871,"accept_rate":100,"display_name":"Sergei Sirik"},"score":2,"creation_date":1526504777,"post_id":50379839,"comment_id":87776007,"body_markdown":"Please, provide some code: how are you trying to connect. Stack trace of the exception would be helpful as well.","body":"Please, provide some code: how are you trying to connect. Stack trace of the exception would be helpful as well."},{"owner":{"account_id":1296827,"reputation":524,"user_id":1247667,"display_name":"Ryabinin Sergey"},"score":1,"creation_date":1666271749,"post_id":50379839,"comment_id":130900454,"body_markdown":"For connectrion need add to dburl : allowPublicKeyRetrieval=true","body":"For connectrion need add to dburl : allowPublicKeyRetrieval=true"}],"answers":[{"tags":[],"owner":{"account_id":2780943,"reputation":9651,"user_id":2393509,"accept_rate":88,"display_name":"jtomaszk"},"down_vote_count":0,"up_vote_count":761,"is_accepted":true,"score":761,"last_activity_date":1674757887,"creation_date":1526846247,"answer_id":50438872,"question_id":50379839,"body_markdown":"You should add client option to your mysql-connector `allowPublicKeyRetrieval=true` to allow the client to automatically request the public key from the server. Note that `allowPublicKeyRetrieval=True` could allow a malicious proxy to perform a MITM attack to get the plaintext password, so it is False by default and must be explicitly enabled.\r\n\r\nSee [MySQL .NET Connection String Options](https://mysql-net.github.io/MySqlConnector/connection-options/)\r\n\r\nyou could also try adding `useSSL=false` when you use it for testing/develop purposes \r\n\r\nexample:\r\n\r\n\r\n    jdbc:mysql://localhost:3306/db?allowPublicKeyRetrieval=true&amp;useSSL=false","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>You should add client option to your mysql-connector <code>allowPublicKeyRetrieval=true</code> to allow the client to automatically request the public key from the server. Note that <code>allowPublicKeyRetrieval=True</code> could allow a malicious proxy to perform a MITM attack to get the plaintext password, so it is False by default and must be explicitly enabled.</p>\n<p>See <a href=\"https://mysql-net.github.io/MySqlConnector/connection-options/\" rel=\"noreferrer\">MySQL .NET Connection String Options</a></p>\n<p>you could also try adding <code>useSSL=false</code> when you use it for testing/develop purposes</p>\n<p>example:</p>\n<pre><code>jdbc:mysql://localhost:3306/db?allowPublicKeyRetrieval=true&amp;useSSL=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9911529,"reputation":3538,"user_id":7338066,"display_name":"susan097"},"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1643526346,"creation_date":1530523724,"answer_id":51132931,"question_id":50379839,"body_markdown":"Use  `jdbc url` as :\r\n\r\n    jdbc:mysql://localhost:3306/Database_dbName?allowPublicKeyRetrieval=true&amp;useSSL=False;\r\n\r\n**`PortNo: 3306` can be different in your configuation**","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>Use  <code>jdbc url</code> as :</p>\n<pre><code>jdbc:mysql://localhost:3306/Database_dbName?allowPublicKeyRetrieval=true&amp;useSSL=False;\n</code></pre>\n<p><strong><code>PortNo: 3306</code> can be different in your configuation</strong></p>\n"},{"tags":[],"owner":{"account_id":12511931,"reputation":3963,"user_id":9106684,"display_name":"duyuanchao"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1535297994,"creation_date":1535297994,"answer_id":52027796,"question_id":50379839,"body_markdown":"I solve this issue using below configuration on spring boot framework\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/db-name?useUnicode=true&amp;characterEncoding=UTF-8&amp;allowPublicKeyRetrieval=true&amp;useSSL=false\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>I solve this issue using below configuration on spring boot framework</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/db-name?useUnicode=true&amp;characterEncoding=UTF-8&amp;allowPublicKeyRetrieval=true&amp;useSSL=false\nspring.datasource.username=root\nspring.datasource.password=root\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2559426,"reputation":1044,"user_id":2220759,"display_name":"Torsten Ojaperv"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1542199070,"creation_date":1542199070,"answer_id":53300421,"question_id":50379839,"body_markdown":"Alternatively to the suggested answers you could try and use *mysql_native_password* authentication plugin instead of *caching_sha2_password* authentication plugin.\r\n\r\n    ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;your_password_here&#39;; ","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>Alternatively to the suggested answers you could try and use <em>mysql_native_password</em> authentication plugin instead of <em>caching_sha2_password</em> authentication plugin.</p>\n\n<pre><code>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'your_password_here'; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":9421037,"reputation":530,"user_id":9851598,"display_name":"surendrapanday"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543113660,"creation_date":1543112144,"answer_id":53464109,"question_id":50379839,"body_markdown":"This solution worked for MacOS Sierra, and running MySQL version 8.0.11. Please make sure driver you have added in your build path - &quot;add external jar&quot; should match up with SQL version.\r\n\r\n\r\n\r\n    String url = &quot;jdbc:mysql://localhost:3306/syscharacterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true&quot;;","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>This solution worked for MacOS Sierra, and running MySQL version 8.0.11. Please make sure driver you have added in your build path - \"add external jar\" should match up with SQL version.</p>\n\n<pre><code>String url = \"jdbc:mysql://localhost:3306/syscharacterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=UTC&amp;rewriteBatchedStatements=true\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1855835,"reputation":1651,"user_id":1681440,"display_name":"juice"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1543627061,"creation_date":1543627061,"answer_id":53566930,"question_id":50379839,"body_markdown":"In my case it was user error. I was using the `root` user with an invalid password. I am not sure why I didn&#39;t get an auth error but instead received this cryptic message.","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>In my case it was user error. I was using the <code>root</code> user with an invalid password. I am not sure why I didn't get an auth error but instead received this cryptic message.</p>\n"},{"tags":[],"owner":{"account_id":11523250,"reputation":1153,"user_id":8444441,"display_name":"risingStark"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1544986143,"creation_date":1544986143,"answer_id":53805393,"question_id":50379839,"body_markdown":"The above error in my case was actually due to the wrong username and password.\r\nSolving the issue:\r\n1. Go to the line DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/&lt;your_database_name_here&gt;?useSSL=false&quot;, &quot;username&quot;, &quot;password&quot;);\r\nThe fields username and password might be wrong. Enter the username and password which you use to start your mysql client. The username is generally root and password is the string which you enter when a screen similar to this appears [Startup screen of mysql][1]\r\n\r\nNote: The portname 3306 might be different in your case.\r\n\r\n  [1]: https://i.stack.imgur.com/GLfhY.png","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>The above error in my case was actually due to the wrong username and password.\nSolving the issue:\n1. Go to the line DriverManager.getConnection(\"jdbc:mysql://localhost:3306/?useSSL=false\", \"username\", \"password\");\nThe fields username and password might be wrong. Enter the username and password which you use to start your mysql client. The username is generally root and password is the string which you enter when a screen similar to this appears <a href=\"https://i.stack.imgur.com/GLfhY.png\" rel=\"nofollow noreferrer\">Startup screen of mysql</a></p>\n\n<p>Note: The portname 3306 might be different in your case.</p>\n"},{"tags":[],"owner":{"account_id":1094163,"reputation":3336,"user_id":7023816,"display_name":"Cameron Hudson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549228808,"creation_date":1549228808,"answer_id":54507703,"question_id":50379839,"body_markdown":"I found this issue frustrating because I was able to interact with the database yesterday, but after coming back this morning, I started getting this error.\r\n\r\nI tried adding the `allowPublicKeyRetrieval=true` flag, but I kept getting the error.\r\n\r\nWhat fixed it for me was doing `Project-&gt;Clean` in Eclipse and `Clean` on my Tomcat server. One (or both) of those fixed it.\r\n\r\nI don&#39;t understand why, because I build my project using Maven, and have been restarting my server after each code change. Very irritating...","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>I found this issue frustrating because I was able to interact with the database yesterday, but after coming back this morning, I started getting this error.</p>\n\n<p>I tried adding the <code>allowPublicKeyRetrieval=true</code> flag, but I kept getting the error.</p>\n\n<p>What fixed it for me was doing <code>Project-&gt;Clean</code> in Eclipse and <code>Clean</code> on my Tomcat server. One (or both) of those fixed it.</p>\n\n<p>I don't understand why, because I build my project using Maven, and have been restarting my server after each code change. Very irritating...</p>\n"},{"tags":[],"owner":{"account_id":6533811,"reputation":99,"user_id":5054104,"display_name":"samit tiwary"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1557897182,"creation_date":1557897182,"answer_id":56142146,"question_id":50379839,"body_markdown":"Give connection URL as \r\njdbc:mysql://localhost:3306/hb_student_tracker?allowPublicKeyRetrieval=true&amp;amp;useSSL=false&amp;amp;serverTimezone=UTC","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>Give connection URL as \njdbc:mysql://localhost:3306/hb_student_tracker?allowPublicKeyRetrieval=true&amp;useSSL=false&amp;serverTimezone=UTC</p>\n"},{"tags":[],"owner":{"account_id":2495334,"reputation":181,"user_id":2171938,"display_name":"Rohtash Lakra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563233204,"creation_date":1563233204,"answer_id":57048261,"question_id":50379839,"body_markdown":"If you are getting the following error while connecting the mysql (either local or mysql container running the mysql):\r\n\r\njava.sql.SQLNonTransientConnectionException: Public Key Retrieval is not allowed\r\n\r\nSolution:\r\nAdd the following line in your database service:\r\n\r\n    command: --default-authentication-plugin=mysql_native_password","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>If you are getting the following error while connecting the mysql (either local or mysql container running the mysql):</p>\n\n<p>java.sql.SQLNonTransientConnectionException: Public Key Retrieval is not allowed</p>\n\n<p>Solution:\nAdd the following line in your database service:</p>\n\n<pre><code>command: --default-authentication-plugin=mysql_native_password\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5564268,"reputation":637,"user_id":4412155,"display_name":"Bheem  Singh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1573374022,"creation_date":1573374022,"answer_id":58786867,"question_id":50379839,"body_markdown":"Update the useSSL=true in spring boot application connection with mysql;\r\n\r\n    jdbc:mysql://localhost:3306/demo?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC\r\n\r\n","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>Update the useSSL=true in spring boot application connection with mysql;</p>\n\n<pre><code>jdbc:mysql://localhost:3306/demo?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&amp;useLegacyDatetimeCode=false&amp;serverTimezone=UTC\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12493206,"reputation":8470,"user_id":9094093,"display_name":"Javier Aviles"},"down_vote_count":1,"up_vote_count":575,"is_accepted":false,"score":574,"last_activity_date":1691670003,"creation_date":1579210280,"answer_id":59778108,"question_id":50379839,"body_markdown":"For **DBeaver** users:\r\n\r\n1. Right-click your connection, choose &quot;Edit Connection&quot;\r\n\r\n2. On the &quot;Connection settings&quot; screen (main screen), click on &quot;Edit Driver Settings&quot;\r\n\r\n3. Click on &quot;Driver properties&quot;\r\n\r\n4. Change two properties: &quot;useSSL&quot; and &quot;allowPublicKeyRetrieval&quot;\r\n\r\n4. Set their values to  &quot;false&quot; and &quot;true&quot; by double-clicking on the &quot;value&quot; column","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>For <strong>DBeaver</strong> users:</p>\n<ol>\n<li><p>Right-click your connection, choose &quot;Edit Connection&quot;</p>\n</li>\n<li><p>On the &quot;Connection settings&quot; screen (main screen), click on &quot;Edit Driver Settings&quot;</p>\n</li>\n<li><p>Click on &quot;Driver properties&quot;</p>\n</li>\n<li><p>Change two properties: &quot;useSSL&quot; and &quot;allowPublicKeyRetrieval&quot;</p>\n</li>\n<li><p>Set their values to  &quot;false&quot; and &quot;true&quot; by double-clicking on the &quot;value&quot; column</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13723512,"reputation":869,"user_id":9902875,"display_name":"Arun s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582190779,"creation_date":1582190779,"answer_id":60316596,"question_id":50379839,"body_markdown":"I was also facing such an issue while dockerizing our existing application. The solution si to add **allowPublicKeyRetrieval** connection option of MySQL with a value of **true** to the JDBC connection string.\r\nIf that is not working , try adding **useSSL** option to **false** as well .\r\n\r\nThe resultant string would look like this : \r\n\r\n    jdbc:mysql://&lt;database server ip&gt;:3306/databaseName?allowPublicKeyRetrieval=true&amp;useSSL=false\r\n\r\n","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>I was also facing such an issue while dockerizing our existing application. The solution si to add <strong>allowPublicKeyRetrieval</strong> connection option of MySQL with a value of <strong>true</strong> to the JDBC connection string.\nIf that is not working , try adding <strong>useSSL</strong> option to <strong>false</strong> as well .</p>\n\n<p>The resultant string would look like this : </p>\n\n<pre><code>jdbc:mysql://&lt;database server ip&gt;:3306/databaseName?allowPublicKeyRetrieval=true&amp;useSSL=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7398529,"reputation":121,"user_id":5629666,"display_name":"Vinod Kumar K V"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1591957940,"creation_date":1591957940,"answer_id":62342418,"question_id":50379839,"body_markdown":"First of all, please make sure your Database server is up and running. \r\nI was getting the same error, after trying all the answers listed here I found out that my Database server was not running.\r\n\r\nYou can check the same from MySQL Workbench, or Command line using \r\n\r\n    mysql -u USERNAME -p\r\n\r\nThis sounds obvious, but many times we assume that Database server is up and running all the time, especially when we are working on our local machine, when we restart/shutdown the machine, Database server will be shutdown automatically.","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>First of all, please make sure your Database server is up and running. \nI was getting the same error, after trying all the answers listed here I found out that my Database server was not running.</p>\n\n<p>You can check the same from MySQL Workbench, or Command line using </p>\n\n<pre><code>mysql -u USERNAME -p\n</code></pre>\n\n<p>This sounds obvious, but many times we assume that Database server is up and running all the time, especially when we are working on our local machine, when we restart/shutdown the machine, Database server will be shutdown automatically.</p>\n"},{"tags":[],"owner":{"account_id":6398919,"reputation":194,"user_id":4962360,"display_name":"HashanR"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1599759388,"creation_date":1599759388,"answer_id":63834960,"question_id":50379839,"body_markdown":"This also can be happened due to wrong user name or password. \r\nAs solutions I&#39;ve added  `allowPublicKeyRetrieval=true&amp;useSSL=false` part but still I got error then I checked the password and it was wrong.","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>This also can be happened due to wrong user name or password.\nAs solutions I've added  <code>allowPublicKeyRetrieval=true&amp;useSSL=false</code> part but still I got error then I checked the password and it was wrong.</p>\n"},{"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Micha Krzywaski"},"down_vote_count":0,"up_vote_count":83,"is_accepted":false,"score":83,"last_activity_date":1607258175,"creation_date":1607258175,"answer_id":65168110,"question_id":50379839,"body_markdown":"When doing this from **DBeaver** I had to go to &quot;Connection settings&quot; -&gt; &quot;SSL&quot; tab and then : \r\n\r\n - uncheck the &quot;Verify server certificate&quot; \r\n - check the &quot;Allow public key retrival&quot;\r\n\r\nThis is how it looks like.\r\n[![DBeaver configuration][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/mbL65.png\r\n\r\nNote that this is suitable for local development only.","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>When doing this from <strong>DBeaver</strong> I had to go to &quot;Connection settings&quot; -&gt; &quot;SSL&quot; tab and then :</p>\n<ul>\n<li>uncheck the &quot;Verify server certificate&quot;</li>\n<li>check the &quot;Allow public key retrival&quot;</li>\n</ul>\n<p>This is how it looks like.\n<a href=\"https://i.stack.imgur.com/mbL65.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mbL65.png\" alt=\"DBeaver configuration\" /></a></p>\n<p>Note that this is suitable for local development only.</p>\n"},{"tags":[],"owner":{"account_id":959866,"reputation":25909,"user_id":984471,"display_name":"Manohar Reddy Poreddy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620039541,"creation_date":1620039541,"answer_id":67367808,"question_id":50379839,"body_markdown":"---\r\n\r\n&gt; Setting `Server Time Zone` to my local place, fixed the issue.\r\n\r\n---\r\n\r\n[![ServerTimeZone][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Cr3Tx.png","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<hr />\n<blockquote>\n<p>Setting <code>Server Time Zone</code> to my local place, fixed the issue.</p>\n</blockquote>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/Cr3Tx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cr3Tx.png\" alt=\"ServerTimeZone\" /></a></p>\n"},{"tags":[],"owner":{"account_id":3048377,"reputation":3402,"user_id":2583490,"accept_rate":92,"display_name":"Savrige"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626459762,"creation_date":1626459762,"answer_id":68413682,"question_id":50379839,"body_markdown":"My problem was in `pom.xml` (spring boot). \r\nMy pom.xml had two dependencies entries for different databases. Make sure to keep only the MySQL dependency and remove any other database dependency entry.\r\n","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>My problem was in <code>pom.xml</code> (spring boot).\nMy pom.xml had two dependencies entries for different databases. Make sure to keep only the MySQL dependency and remove any other database dependency entry.</p>\n"},{"tags":[],"owner":{"account_id":9530934,"reputation":221,"user_id":7082648,"display_name":"Ravi"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1631199189,"creation_date":1631199189,"answer_id":69120404,"question_id":50379839,"body_markdown":"Another way, on DBeaver.\r\n\r\nYou can edit the connection of a database, go to SSL tab in connection settings. There&#39;s a checkbox &quot;allow public key retrieval&quot; mark it as true. That&#39;ll sove the issue.\r\n","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>Another way, on DBeaver.</p>\n<p>You can edit the connection of a database, go to SSL tab in connection settings. There's a checkbox &quot;allow public key retrieval&quot; mark it as true. That'll sove the issue.</p>\n"},{"tags":[],"owner":{"account_id":1994047,"reputation":750,"user_id":1787363,"display_name":"Yoseph"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1636421231,"creation_date":1636421231,"answer_id":69891774,"question_id":50379839,"body_markdown":"In MySQL 8.0 the default authentication plugin was changed from mysql_native_password to caching_sha2_password. \r\nSee https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-caching-sha2-password for more information about this change.\r\n\r\nWhat that means is that in order to use caching_sha2_password the connection must do one of the following:\r\n\r\n - use a secure connection (useSSL=true)\r\n - use an unencrypted connection that supports password exchange using an RSA key pair (useSSL=false and additional configuration parameters - see https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html)\r\n\r\nYou have a few options:\r\n\r\n - ALTER the users to use the mysql_native_password plugin (like how it was doing historically and will also work with older clients / connections which don&#39;t support caching_sha2_password)\r\n - useSSL=true \r\n - useSSL=false and configure public key retrieval (this doesn&#39;t mean using allowPublicKeyRetrieval=true which would avoid the error - but defeats the objective of this extra security and is slow - it does mean using something like server-public-key-path to point to the client side copy of the public key)","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>In MySQL 8.0 the default authentication plugin was changed from mysql_native_password to caching_sha2_password.\nSee <a href=\"https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-caching-sha2-password\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-caching-sha2-password</a> for more information about this change.</p>\n<p>What that means is that in order to use caching_sha2_password the connection must do one of the following:</p>\n<ul>\n<li>use a secure connection (useSSL=true)</li>\n<li>use an unencrypted connection that supports password exchange using an RSA key pair (useSSL=false and additional configuration parameters - see <a href=\"https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/caching-sha2-pluggable-authentication.html</a>)</li>\n</ul>\n<p>You have a few options:</p>\n<ul>\n<li>ALTER the users to use the mysql_native_password plugin (like how it was doing historically and will also work with older clients / connections which don't support caching_sha2_password)</li>\n<li>useSSL=true</li>\n<li>useSSL=false and configure public key retrieval (this doesn't mean using allowPublicKeyRetrieval=true which would avoid the error - but defeats the objective of this extra security and is slow - it does mean using something like server-public-key-path to point to the client side copy of the public key)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13898671,"reputation":504,"user_id":10034762,"display_name":"Duc Toan Pham"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1645002920,"creation_date":1645002920,"answer_id":71139026,"question_id":50379839,"body_markdown":"I updated this parameter when I faced the issue of &quot;public-key-retrieval-is-not-allowed&quot; with root account.\r\n\r\n[![DBeaver update this parameter][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xxj11.png","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>I updated this parameter when I faced the issue of &quot;public-key-retrieval-is-not-allowed&quot; with root account.</p>\n<p><a href=\"https://i.stack.imgur.com/xxj11.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/xxj11.png\" alt=\"DBeaver update this parameter\" /></a></p>\n"},{"tags":[],"owner":{"account_id":18314899,"reputation":680,"user_id":13336872,"display_name":"Damika"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1654187002,"creation_date":1654187002,"answer_id":72479366,"question_id":50379839,"body_markdown":"    spring.datasource.url=jdbc:mysql://localhost:3306/database?createDatabaseIfNotExist=true&amp;allowPublicKeyRetrieval=true&amp;useSSL=false\r\n\r\nYou can insert this line to your applications.properties file and this means,\r\n\r\n- `spring.datasource.url=jdbc:mysql://localhost:3306/` This one uses mysql as the database service. I think this can changed by using relavent name and the port of your database name.\r\n- `database?createDatabaseIfNotExist=true` = use the database named database if you haven&#39;t already make a database like that, make a new one.\r\n- `allowPublicKeyRetrieval=true` = to allow the client to automatically request the public key from the server. (This part might be additional)\r\n- `useSSL=false` = This will disable SSL and also suppress the SSL errors\r\n\r\nFurthermore, be alert about the `spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect` property in the same file.\r\n\r\nFinally check whether you&#39;ve added following dependency in dependencies in your pom.xml file.\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;8.0.23&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/database?createDatabaseIfNotExist=true&amp;allowPublicKeyRetrieval=true&amp;useSSL=false\n</code></pre>\n<p>You can insert this line to your applications.properties file and this means,</p>\n<ul>\n<li><code>spring.datasource.url=jdbc:mysql://localhost:3306/</code> This one uses mysql as the database service. I think this can changed by using relavent name and the port of your database name.</li>\n<li><code>database?createDatabaseIfNotExist=true</code> = use the database named database if you haven't already make a database like that, make a new one.</li>\n<li><code>allowPublicKeyRetrieval=true</code> = to allow the client to automatically request the public key from the server. (This part might be additional)</li>\n<li><code>useSSL=false</code> = This will disable SSL and also suppress the SSL errors</li>\n</ul>\n<p>Furthermore, be alert about the <code>spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect</code> property in the same file.</p>\n<p>Finally check whether you've added following dependency in dependencies in your pom.xml file.</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;8.0.23&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16018376,"reputation":338,"user_id":11560443,"display_name":"Reshnu chandran"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1667050067,"creation_date":1667050067,"answer_id":74245704,"question_id":50379839,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dB23y.png\r\n\r\nOpen DBeaver-&gt;Edit connection-&gt;find driver properties-&gt;`allowPublicKeyRetrieval=true` and `useSSl=true`","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p><a href=\"https://i.stack.imgur.com/dB23y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dB23y.png\" alt=\"enter image description here\" /></a></p>\n<p>Open DBeaver-&gt;Edit connection-&gt;find driver properties-&gt;<code>allowPublicKeyRetrieval=true</code> and <code>useSSl=true</code></p>\n"},{"tags":[],"owner":{"account_id":7349206,"reputation":791,"user_id":5595994,"accept_rate":96,"display_name":"Hashmatullah Noorzai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1682351531,"creation_date":1682351531,"answer_id":76093778,"question_id":50379839,"body_markdown":"For folks that are using a .xml file to store their database connection details, modifying your jdbcUrl to below should make your connection from your test tomcat server to your database valid again:\r\n\r\n    jdbcUrl=&quot;jdbc:mysql://localhost:3306/DB_NAME?autoReconnect=true&amp;amp;allowPublicKeyRetrieval=true&amp;amp;useSSL=false&quot;","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>For folks that are using a .xml file to store their database connection details, modifying your jdbcUrl to below should make your connection from your test tomcat server to your database valid again:</p>\n<pre><code>jdbcUrl=&quot;jdbc:mysql://localhost:3306/DB_NAME?autoReconnect=true&amp;amp;allowPublicKeyRetrieval=true&amp;amp;useSSL=false&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6041854,"reputation":685,"user_id":9641952,"display_name":"Volex"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1685378954,"creation_date":1685091744,"answer_id":76339271,"question_id":50379839,"body_markdown":"I managed to connect to MySQL using SSL through DBeaver with ```allowPublicKeyRetrieval=false``` and ```useSSL=true``` driver settings, which is preferred solution from security perspective, so I wanted to share my solution here.\r\n\r\nTo establish a successful SSL connection, you need to provide the correct paths to the certificates in your client (e.g., DBeaver). \r\n\r\nMySQL generates the certificates by default, so you don&#39;t need to generate them manually.\r\n\r\nThey are located in the `/var/lib/mysql` directory.\r\n\r\nThis is from official MySQL documentation:\r\n\r\n&gt; Automatic SSL and RSA File Generation\r\n&gt; \r\n&gt; For MySQL distributions compiled using OpenSSL, the MySQL server has\r\n&gt; the capability of automatically generating missing SSL and RSA files\r\n&gt; at startup. The auto_generate_certs,\r\n&gt; sha256_password_auto_generate_rsa_keys, and\r\n&gt; caching_sha2_password_auto_generate_rsa_keys system variables control\r\n&gt; automatic generation of these files. These variables are enabled by\r\n&gt; default. They can be enabled at startup and inspected but not set at\r\n&gt; runtime.\r\n&gt; \r\n&gt; At startup, the server automatically generates server-side and\r\n&gt; client-side SSL certificate and key files in the data directory if the\r\n&gt; auto_generate_certs system variable is enabled, no SSL options other\r\n&gt; than --ssl are specified, and the server-side SSL files are missing\r\n&gt; from the data directory. These files enable encrypted client\r\n&gt; connections using SSL; see Section 6.3.1, Configuring MySQL to Use\r\n&gt; Encrypted Connections.\r\n\r\nIf you can&#39;t find the certificates there, it&#39;s likely that you have modified the default behavior of MySQL using system variables. In that case, please refer to the documentation to learn how to resolve this issue.\r\n\r\nThe required certificate files for SSL connection are as follows:\r\n\r\n- CA Certificate: `/var/lib/mysql/ca.pem`\r\n- Client Certificate: `/var/lib/mysql/client-cert.pem`\r\n- Client Private Key: `/var/lib/mysql/client-key.pem`\r\n\r\nBy providing these paths in the SSL configuration of your client application, you should be able to connect to MySQL using SSL successfully.\r\n\r\nI hope this helps others who might encounter similar SSL connection issues with MySQL and DBeaver.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tPqSQ.png\r\n\r\n\r\nP.S If you use Docker Image, you need to copy certificates and key from docker container to your local computer, so MySQL client (e.g DBeaver) could find them there.","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>I managed to connect to MySQL using SSL through DBeaver with <code>allowPublicKeyRetrieval=false</code> and <code>useSSL=true</code> driver settings, which is preferred solution from security perspective, so I wanted to share my solution here.</p>\n<p>To establish a successful SSL connection, you need to provide the correct paths to the certificates in your client (e.g., DBeaver).</p>\n<p>MySQL generates the certificates by default, so you don't need to generate them manually.</p>\n<p>They are located in the <code>/var/lib/mysql</code> directory.</p>\n<p>This is from official MySQL documentation:</p>\n<blockquote>\n<p>Automatic SSL and RSA File Generation</p>\n<p>For MySQL distributions compiled using OpenSSL, the MySQL server has\nthe capability of automatically generating missing SSL and RSA files\nat startup. The auto_generate_certs,\nsha256_password_auto_generate_rsa_keys, and\ncaching_sha2_password_auto_generate_rsa_keys system variables control\nautomatic generation of these files. These variables are enabled by\ndefault. They can be enabled at startup and inspected but not set at\nruntime.</p>\n<p>At startup, the server automatically generates server-side and\nclient-side SSL certificate and key files in the data directory if the\nauto_generate_certs system variable is enabled, no SSL options other\nthan --ssl are specified, and the server-side SSL files are missing\nfrom the data directory. These files enable encrypted client\nconnections using SSL; see Section 6.3.1, Configuring MySQL to Use\nEncrypted Connections.</p>\n</blockquote>\n<p>If you can't find the certificates there, it's likely that you have modified the default behavior of MySQL using system variables. In that case, please refer to the documentation to learn how to resolve this issue.</p>\n<p>The required certificate files for SSL connection are as follows:</p>\n<ul>\n<li>CA Certificate: <code>/var/lib/mysql/ca.pem</code></li>\n<li>Client Certificate: <code>/var/lib/mysql/client-cert.pem</code></li>\n<li>Client Private Key: <code>/var/lib/mysql/client-key.pem</code></li>\n</ul>\n<p>By providing these paths in the SSL configuration of your client application, you should be able to connect to MySQL using SSL successfully.</p>\n<p>I hope this helps others who might encounter similar SSL connection issues with MySQL and DBeaver.</p>\n<p><a href=\"https://i.stack.imgur.com/tPqSQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tPqSQ.png\" alt=\"enter image description here\" /></a></p>\n<p>P.S If you use Docker Image, you need to copy certificates and key from docker container to your local computer, so MySQL client (e.g DBeaver) could find them there.</p>\n"}],"owner":{"account_id":13588641,"reputation":4677,"user_id":9802634,"display_name":"danny"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":674561,"favorite_count":0,"down_vote_count":0,"up_vote_count":451,"accepted_answer_id":50438872,"answer_count":25,"score":451,"last_activity_date":1695404087,"creation_date":1526504539,"question_id":50379839,"body_markdown":"I try to connect MySQL database with Java using connector 8.0.11.   Everything seems to be OK, but I get this exception:\r\n\r\n    Exception in thread &quot;main&quot; java.sql.SQLNonTransientConnectionException: Public Key Retrieval is not allowed at\r\n         com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:108) at \r\n         com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:95) at\r\n         com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) at     \r\n         com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:862) at \r\n         com.mysql.cj.jdbc.ConnectionImpl.(ConnectionImpl.java:444) at\r\n         com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:230) at\r\n         com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:226) at\r\n         com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:438) at\r\n         com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:146) at\r\n         com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:119) at\r\n         ConnectionManager.getConnection(ConnectionManager.java:28) at\r\n         Main.main(Main.java:8)\r\n\r\nHere is my Connection Manager class:\r\n\r\n    public class ConnectionManager {\r\n    \r\n        public static final String serverTimeZone = &quot;UTC&quot;;\r\n        public static final String serverName = &quot;localhost&quot;;\r\n        public static final String databaseName =&quot;biblioteka&quot;;\r\n        public static final int portNumber = 3306;\r\n        public static final String user = &quot;anyroot&quot;;\r\n        public static final String password = &quot;anyroot&quot;;\r\n        \r\n        public static Connection getConnection() throws SQLException {\r\n        \r\n            MysqlDataSource dataSource = new MysqlDataSource();\r\n        \r\n            dataSource.setUseSSL( false );\r\n            dataSource.setServerTimezone( serverTimeZone );\r\n            dataSource.setServerName( serverName );\r\n            dataSource.setDatabaseName( databaseName );\r\n            dataSource.setPortNumber( portNumber );\r\n            dataSource.setUser( user );\r\n            dataSource.setPassword( password );\r\n            \r\n            return dataSource.getConnection();\r\n        }\r\n    }\r\n","title":"Connection Java - MySQL : Public Key Retrieval is not allowed","body":"<p>I try to connect MySQL database with Java using connector 8.0.11.   Everything seems to be OK, but I get this exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.sql.SQLNonTransientConnectionException: Public Key Retrieval is not allowed at\n     com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:108) at \n     com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:95) at\n     com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) at     \n     com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:862) at \n     com.mysql.cj.jdbc.ConnectionImpl.(ConnectionImpl.java:444) at\n     com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:230) at\n     com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:226) at\n     com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:438) at\n     com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:146) at\n     com.mysql.cj.jdbc.MysqlDataSource.getConnection(MysqlDataSource.java:119) at\n     ConnectionManager.getConnection(ConnectionManager.java:28) at\n     Main.main(Main.java:8)\n</code></pre>\n<p>Here is my Connection Manager class:</p>\n<pre><code>public class ConnectionManager {\n\n    public static final String serverTimeZone = &quot;UTC&quot;;\n    public static final String serverName = &quot;localhost&quot;;\n    public static final String databaseName =&quot;biblioteka&quot;;\n    public static final int portNumber = 3306;\n    public static final String user = &quot;anyroot&quot;;\n    public static final String password = &quot;anyroot&quot;;\n    \n    public static Connection getConnection() throws SQLException {\n    \n        MysqlDataSource dataSource = new MysqlDataSource();\n    \n        dataSource.setUseSSL( false );\n        dataSource.setServerTimezone( serverTimeZone );\n        dataSource.setServerName( serverName );\n        dataSource.setDatabaseName( databaseName );\n        dataSource.setPortNumber( portNumber );\n        dataSource.setUser( user );\n        dataSource.setPassword( password );\n        \n        return dataSource.getConnection();\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":4,"creation_date":1695388354,"post_id":77157917,"comment_id":136021608,"body_markdown":"What makes you think that the default should be true before false? Generally default sorting orders are ascending, so false (0) then true (1).","body":"What makes you think that the default should be true before false? Generally default sorting orders are ascending, so false (0) then true (1)."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1695388673,"post_id":77157917,"comment_id":136021671,"body_markdown":"You are not comparing false and true but 1 and 0. 0 comes first and means not isRaid.","body":"You are not comparing false and true but 1 and 0. 0 comes first and means not isRaid."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1695388706,"post_id":77157917,"comment_id":136021679,"body_markdown":"*_isRaid = isRaid;* The only time you should see underscores in Java is in the names of constants (or maybe in digit separation). There&#39;s also [no need](https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions) to invent different names for ctor parameters. `this.isRaid = isRaid` is all that&#39;s needed","body":"<i>_isRaid = isRaid;</i> The only time you should see underscores in Java is in the names of constants (or maybe in digit separation). There&#39;s also <a href=\"https://technojeeves.com/index.php/aliasjava1/106-java-style-conventions\" rel=\"nofollow noreferrer\">no need</a> to invent different names for ctor parameters. <code>this.isRaid = isRaid</code> is all that&#39;s needed"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1695389013,"post_id":77157917,"comment_id":136021745,"body_markdown":"And Comparable Boolean orders false before true","body":"And Comparable Boolean orders false before true"},{"owner":{"account_id":29509417,"reputation":41,"user_id":22614791,"display_name":"edith finch"},"score":0,"creation_date":1695389944,"post_id":77157917,"comment_id":136021955,"body_markdown":"g00se thanks for clarify that, i did not know.","body":"g00se thanks for clarify that, i did not know."},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1700228803,"post_id":77157917,"comment_id":136631921,"body_markdown":"@JoopEggen they&#39;re not comparing 1 and 0, but actual true and false (without converting to int). See [my earlier comment](https://stackoverflow.com/questions/77157917/why-comparator-comparing-in-boolean-value-return-reversed-by-default/77157949#comment136630961_77157949)","body":"@JoopEggen they&#39;re not comparing 1 and 0, but actual true and false (without converting to int). See <a href=\"https://stackoverflow.com/questions/77157917/why-comparator-comparing-in-boolean-value-return-reversed-by-default/77157949#comment136630961_77157949\">my earlier comment</a>"}],"answers":[{"tags":[],"owner":{"account_id":2714969,"reputation":5858,"user_id":2342558,"accept_rate":67,"display_name":"user2342558"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695403781,"creation_date":1695388501,"answer_id":77157949,"question_id":77157917,"body_markdown":"`Comparator.comparing()` performs an ordering by evaluating `false` to `0` and `true` to `1`. So, `false` comes first. \r\n\r\nYou should specify your custom `Comparator` in order to change the default comparing ordering. \r\n\r\nCall [`Comparator::reversed`][1]. The `true` values will sort first, before the `false` values. \r\n\r\n    Collections.sort( list,  Comparator.comparing( Monster::isRaid ).reversed() );\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html#reversed()","title":"Why Comparator.comparing() in boolean value return reversed() by default?","body":"<p><code>Comparator.comparing()</code> performs an ordering by evaluating <code>false</code> to <code>0</code> and <code>true</code> to <code>1</code>. So, <code>false</code> comes first.</p>\n<p>You should specify your custom <code>Comparator</code> in order to change the default comparing ordering.</p>\n<p>Call <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Comparator.html#reversed()\" rel=\"nofollow noreferrer\"><code>Comparator::reversed</code></a>. The <code>true</code> values will sort first, before the <code>false</code> values.</p>\n<pre><code>Collections.sort( list,  Comparator.comparing( Monster::isRaid ).reversed() );\n</code></pre>\n"}],"owner":{"account_id":29509417,"reputation":41,"user_id":22614791,"display_name":"edith finch"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1695403781,"creation_date":1695388283,"question_id":77157917,"body_markdown":"I wrote a code using Comparator.comparing() and i provide a method that return a boolean. Sorting should bring on top (first element) all that return true. But the Comparator.comparing() bring on top those that give false. I need to use the reversed() to make it work properly.\r\n\r\nI did another test.\r\n\r\n\r\n```\r\nCollections.sort(list, Comparator.comparing(s -&gt; s.isRaid() ? 1 : 0));\r\n```\r\n\r\nAnd this bring on top the monsters that are not raid. Why this happen?\r\n\r\n\r\n```\r\npublic static void main(final String[] args)\r\n\t{\r\n\t\tfinal List&lt;Monster&gt; list = new ArrayList&lt;&gt;();\r\n\r\n\t\tfor (int i = 0; i &lt; 15; i++)\r\n\t\t{\r\n\t\t\tlist.add(new Monster(&quot;Name&quot; + i, Rnd.nextDouble() &lt; 0.20));\r\n\t\t}\r\n\r\n\t\tCollections.sort(list, Comparator.comparing(Monster::isRaid));\r\n\r\n\t\tSystem.out.println(&quot;LEADER -&gt; &quot; + list.get(0).getName() + &quot; &quot; + list.get(0).isRaid());\r\n\r\n\t\tfor (final Monster monster : list)\r\n\t\t{\r\n\t\t\tSystem.out.println(monster.getName() + &quot; &quot; + monster.isRaid());\r\n\t\t}\r\n\t}\r\n\r\n\tstatic class Monster\r\n\t{\r\n\t\tprivate final String _name;\r\n\t\tprivate final boolean _isRaid;\r\n\r\n\t\tpublic Monster(final String name, final boolean isRaid)\r\n\t\t{\r\n\t\t\t_name = name;\r\n\t\t\t_isRaid = isRaid;\r\n\t\t}\r\n\r\n\t\tpublic String getName()\r\n\t\t{\r\n\t\t\treturn _name;\r\n\t\t}\r\n\r\n\t\tpublic boolean isRaid()\r\n\t\t{\r\n\t\t\treturn _isRaid;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nResult of my code:\r\n\r\n```\r\nLEADER -&gt; Name0 false\r\nName0 false\r\nName1 false\r\nName2 false\r\nName3 false\r\nName4 false\r\nName5 false\r\nName6 false\r\nName7 false\r\nName8 false\r\nName9 false\r\nName10 false\r\nName11 false\r\nName13 false\r\nName12 true\r\nName14 true\r\n```\r\n\r\nWhile the raid (entry 12 and 14) should be on top.","title":"Why Comparator.comparing() in boolean value return reversed() by default?","body":"<p>I wrote a code using Comparator.comparing() and i provide a method that return a boolean. Sorting should bring on top (first element) all that return true. But the Comparator.comparing() bring on top those that give false. I need to use the reversed() to make it work properly.</p>\n<p>I did another test.</p>\n<pre><code>Collections.sort(list, Comparator.comparing(s -&gt; s.isRaid() ? 1 : 0));\n</code></pre>\n<p>And this bring on top the monsters that are not raid. Why this happen?</p>\n<pre><code>public static void main(final String[] args)\n    {\n        final List&lt;Monster&gt; list = new ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; 15; i++)\n        {\n            list.add(new Monster(&quot;Name&quot; + i, Rnd.nextDouble() &lt; 0.20));\n        }\n\n        Collections.sort(list, Comparator.comparing(Monster::isRaid));\n\n        System.out.println(&quot;LEADER -&gt; &quot; + list.get(0).getName() + &quot; &quot; + list.get(0).isRaid());\n\n        for (final Monster monster : list)\n        {\n            System.out.println(monster.getName() + &quot; &quot; + monster.isRaid());\n        }\n    }\n\n    static class Monster\n    {\n        private final String _name;\n        private final boolean _isRaid;\n\n        public Monster(final String name, final boolean isRaid)\n        {\n            _name = name;\n            _isRaid = isRaid;\n        }\n\n        public String getName()\n        {\n            return _name;\n        }\n\n        public boolean isRaid()\n        {\n            return _isRaid;\n        }\n    }\n</code></pre>\n<p>Result of my code:</p>\n<pre><code>LEADER -&gt; Name0 false\nName0 false\nName1 false\nName2 false\nName3 false\nName4 false\nName5 false\nName6 false\nName7 false\nName8 false\nName9 false\nName10 false\nName11 false\nName13 false\nName12 true\nName14 true\n</code></pre>\n<p>While the raid (entry 12 and 14) should be on top.</p>\n"},{"tags":["java","grpc","guava"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695226486,"post_id":77144071,"comment_id":135997169,"body_markdown":"Are you looking for [`Context.currentContextExecutor`](https://grpc.github.io/grpc-java/javadoc/io/grpc/Context.html#currentContextExecutor(java.util.concurrent.Executor)) ?","body":"Are you looking for <a href=\"https://grpc.github.io/grpc-java/javadoc/io/grpc/Context.html#currentContextExecutor(java.util.concurrent.Executor)\" rel=\"nofollow noreferrer\"><code>Context.currentContextExecutor</code></a> ?"},{"owner":{"account_id":2158186,"reputation":182,"user_id":1912944,"display_name":"David"},"score":0,"creation_date":1695226728,"post_id":77144071,"comment_id":135997221,"body_markdown":"I don&#39;t think so, unless there&#39;s a way to associate that executor into an arbitrary executor service I was given. I want something which, given a service, returns a wrapping service. What I&#39;d hoped to have seen is `Context.currentContextExecutorService(ExecutorService delegate)`","body":"I don&#39;t think so, unless there&#39;s a way to associate that executor into an arbitrary executor service I was given. I want something which, given a service, returns a wrapping service. What I&#39;d hoped to have seen is <code>Context.currentContextExecutorService(ExecutorService delegate)</code>"}],"answers":[{"tags":[],"owner":{"account_id":2158186,"reputation":182,"user_id":1912944,"display_name":"David"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695403216,"creation_date":1695249878,"answer_id":77146269,"question_id":77144071,"body_markdown":"So far the best answer I can come up with is the alternate suggestion from the question. It seems to work and I can&#39;t see an obvious way why it&#39;s wrong:\r\n\r\n1. Create subclass of `FutureTask` and have it wrap the callable/runnable in the constructor (important to wrap here and not when invoked).\r\n\r\n```java\r\n  private static final class GrpcPropagatingTask&lt;V&gt; extends FutureTask&lt;V&gt; {\r\n    public GrpcPropagatingTask(Callable&lt;V&gt; callable) {\r\n      super(Context.current().wrap(callable));\r\n    }\r\n\r\n    public GrpcPropagatingTask(Runnable runnable, V result) {\r\n      super(Context.current().wrap(runnable), result);\r\n    }\r\n  }\r\n```\r\n\r\n2. Then create a subclass of `AbstractExecutorService` with a `delegate`, and override the `newTaskFor()` methods:\r\n\r\n```java\r\n  private final ExecutorService delegate;\r\n\r\n  private GrpcPropagatingExecutorService(ExecutorService delegate) {\r\n    this.delegate = delegate;\r\n  }\r\n\r\n  @Override\r\n  protected &lt;T&gt; RunnableFuture&lt;T&gt; newTaskFor(Runnable runnable, T value) {\r\n    return new GrpcPropagatingTask&lt;&gt;(runnable, value);\r\n  }\r\n\r\n  @Override\r\n  protected &lt;T&gt; RunnableFuture&lt;T&gt; newTaskFor(Callable&lt;T&gt; callable) {\r\n    return new GrpcPropagatingTask&lt;&gt;(callable);\r\n  }\r\n```\r\n\r\n3. Then implement `execute()` to conditionally wrap `Runnable` instances:\r\n\r\n```java\r\n  @Override\r\n  public void execute(Runnable command) {\r\n    if (!(command instanceof GrpcPropagatingTask)) {\r\n      command = Context.current().wrap(command);\r\n    }\r\n    delegate.execute(command);\r\n  }\r\n```\r\n\r\n4. Implement other methods of `AbstractExecutorService` to trivially call the delegate instance (i.e. methods like `shutdown()` or `awaitTermination()` which never see a task/runnable).\r\n\r\nNow it should be true that:\r\n1. Any runnables/callables passed to any `ExecutorService` methods will be wrapped with the calling thread&#39;s gRPC context.\r\n2. Even using the service as a plain `Executor` will work.\r\n3. Tasks won&#39;t be wrapped more than once.","title":"Best way to adapt Guava&#39;s AbstractExecutorService to achieve (gRPC) context propagation?","body":"<p>So far the best answer I can come up with is the alternate suggestion from the question. It seems to work and I can't see an obvious way why it's wrong:</p>\n<ol>\n<li>Create subclass of <code>FutureTask</code> and have it wrap the callable/runnable in the constructor (important to wrap here and not when invoked).</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>  private static final class GrpcPropagatingTask&lt;V&gt; extends FutureTask&lt;V&gt; {\n    public GrpcPropagatingTask(Callable&lt;V&gt; callable) {\n      super(Context.current().wrap(callable));\n    }\n\n    public GrpcPropagatingTask(Runnable runnable, V result) {\n      super(Context.current().wrap(runnable), result);\n    }\n  }\n</code></pre>\n<ol start=\"2\">\n<li>Then create a subclass of <code>AbstractExecutorService</code> with a <code>delegate</code>, and override the <code>newTaskFor()</code> methods:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>  private final ExecutorService delegate;\n\n  private GrpcPropagatingExecutorService(ExecutorService delegate) {\n    this.delegate = delegate;\n  }\n\n  @Override\n  protected &lt;T&gt; RunnableFuture&lt;T&gt; newTaskFor(Runnable runnable, T value) {\n    return new GrpcPropagatingTask&lt;&gt;(runnable, value);\n  }\n\n  @Override\n  protected &lt;T&gt; RunnableFuture&lt;T&gt; newTaskFor(Callable&lt;T&gt; callable) {\n    return new GrpcPropagatingTask&lt;&gt;(callable);\n  }\n</code></pre>\n<ol start=\"3\">\n<li>Then implement <code>execute()</code> to conditionally wrap <code>Runnable</code> instances:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override\n  public void execute(Runnable command) {\n    if (!(command instanceof GrpcPropagatingTask)) {\n      command = Context.current().wrap(command);\n    }\n    delegate.execute(command);\n  }\n</code></pre>\n<ol start=\"4\">\n<li>Implement other methods of <code>AbstractExecutorService</code> to trivially call the delegate instance (i.e. methods like <code>shutdown()</code> or <code>awaitTermination()</code> which never see a task/runnable).</li>\n</ol>\n<p>Now it should be true that:</p>\n<ol>\n<li>Any runnables/callables passed to any <code>ExecutorService</code> methods will be wrapped with the calling thread's gRPC context.</li>\n<li>Even using the service as a plain <code>Executor</code> will work.</li>\n<li>Tasks won't be wrapped more than once.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":14008,"reputation":3782,"user_id":28465,"display_name":"Chris Povirk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695302269,"creation_date":1695302269,"answer_id":77150644,"question_id":77144071,"body_markdown":"I no longer remember anything from when we originally wrote the class, but: We have a similar utility. It implements `ExecutorService` directly (without extending `AbstractExecutorService`), and it implements each method by wrapping and delegating:\r\n\r\n```java\r\n@Override\r\npublic void execute(Runnable command) {\r\n  delegate.execute(Context.current().wrap(command));    \r\n}\r\n\r\n@Override\r\npublic &lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task) {\r\n  return delegate.submit(Context.current().wrap(task));    \r\n}\r\n\r\n// etc.\r\n```","title":"Best way to adapt Guava&#39;s AbstractExecutorService to achieve (gRPC) context propagation?","body":"<p>I no longer remember anything from when we originally wrote the class, but: We have a similar utility. It implements <code>ExecutorService</code> directly (without extending <code>AbstractExecutorService</code>), and it implements each method by wrapping and delegating:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void execute(Runnable command) {\n  delegate.execute(Context.current().wrap(command));    \n}\n\n@Override\npublic &lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task) {\n  return delegate.submit(Context.current().wrap(task));    \n}\n\n// etc.\n</code></pre>\n"}],"owner":{"account_id":2158186,"reputation":182,"user_id":1912944,"display_name":"David"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695403216,"creation_date":1695224598,"question_id":77144071,"body_markdown":"I had hoped to find a simple class that just does this in gRPC Context library, but sadly no luck. I want to wrap an arbitrary `ExecutorService` so it will wrap its tasks in order to propagate the current context of the thread which submitted them.\r\n\r\nSo far I have:\r\n\r\n```java\r\nimport io.grpc.Context;\r\n\r\npublic final class GrpcPropagatingExecutorService extends AbstractExecutorService {\r\n  private final ExecutorService delegate;\r\n\r\n  public GrpcPropagatingExecutorService(ExecutorService delegate) {\r\n    this.delegate = checkNotNull(delegate);\r\n  }\r\n\r\n  @Override\r\n  protected &lt;T&gt; RunnableFuture&lt;T&gt; newTaskFor(Runnable runnable, T value) {\r\n    // Option 1: I could put code here...\r\n    super.newTaskFor(Context.current().wrap(runnable), value);\r\n  }\r\n\r\n  @Override\r\n  protected &lt;T&gt; RunnableFuture&lt;T&gt; newTaskFor(Callable&lt;T&gt; callable) {\r\n    // ... and here.\r\n    super.newTaskFor(Context.current().wrap(callable));\r\n  }\r\n\r\n  @Override\r\n  public void execute(Runnable command) {\r\n    // Option 2: Or I could put code here.\r\n    super.execute(Context.current().wrap(command));    \r\n  }\r\n\r\n  // Other methods are trivial...\r\n}\r\n```\r\n\r\nMy question is:\r\nWhich is the best approach, or are they equivalent?\r\n\r\nPutting the wrapping code in `newTaskFor()` feels better to me, but leaves a problem (i.e. what if someone uses the service as a plain `Executor` and directly calls `execute()`, which isn&#39;t wrapping the given `Runnable`?)\r\n\r\nPutting the wrapping code only in `execute()` might be okay, but only if that&#39;s always called in the thread which is scheduling the task, and never in some worker thread (that&#39;s not at all clear from the docs and in theory I think it could be violated by a service which wraps this one).\r\n\r\nPutting the wrapping code in both (belt &amp; braces) is possible, but I&#39;d need a new type so I can detect `Runnables` which have already be wrapped (and I don&#39;t think even that&#39;s particularly robust tbh).\r\n\r\nSo do I just have to wrap things in both places and suffer wrapping almost all tasks twice, or am I missing something?\r\n\r\nEDIT - An alternative idea I just thought of is:\r\n\r\n```java\r\n  private static final class GrpcPropagatingTask&lt;V&gt; extends FutureTask&lt;V&gt; {\r\n    public GrpcPropagatingTask(Callable&lt;V&gt; callable) {\r\n      super(Context.current().wrap(callable));\r\n    }\r\n\r\n    public GrpcPropagatingTask(Runnable runnable, V result) {\r\n      super(Context.current().wrap(runnable), result);\r\n    }\r\n  }\r\n```\r\n\r\nAnd returning that from `newTaskFor()` methods. Then in `execute()` I can do:\r\n\r\n```java\r\n  @Override\r\n  public void execute(Runnable command) {\r\n    if (!(command instanceof GrpcPropagatingTask)) {\r\n      command = Context.current().wrap(command);\r\n    }\r\n    delegate.execute(command);\r\n  }\r\n```\r\n\r\nwhich I think would resolve my fears about `execute()` being called directly.","title":"Best way to adapt Guava&#39;s AbstractExecutorService to achieve (gRPC) context propagation?","body":"<p>I had hoped to find a simple class that just does this in gRPC Context library, but sadly no luck. I want to wrap an arbitrary <code>ExecutorService</code> so it will wrap its tasks in order to propagate the current context of the thread which submitted them.</p>\n<p>So far I have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.grpc.Context;\n\npublic final class GrpcPropagatingExecutorService extends AbstractExecutorService {\n  private final ExecutorService delegate;\n\n  public GrpcPropagatingExecutorService(ExecutorService delegate) {\n    this.delegate = checkNotNull(delegate);\n  }\n\n  @Override\n  protected &lt;T&gt; RunnableFuture&lt;T&gt; newTaskFor(Runnable runnable, T value) {\n    // Option 1: I could put code here...\n    super.newTaskFor(Context.current().wrap(runnable), value);\n  }\n\n  @Override\n  protected &lt;T&gt; RunnableFuture&lt;T&gt; newTaskFor(Callable&lt;T&gt; callable) {\n    // ... and here.\n    super.newTaskFor(Context.current().wrap(callable));\n  }\n\n  @Override\n  public void execute(Runnable command) {\n    // Option 2: Or I could put code here.\n    super.execute(Context.current().wrap(command));    \n  }\n\n  // Other methods are trivial...\n}\n</code></pre>\n<p>My question is:\nWhich is the best approach, or are they equivalent?</p>\n<p>Putting the wrapping code in <code>newTaskFor()</code> feels better to me, but leaves a problem (i.e. what if someone uses the service as a plain <code>Executor</code> and directly calls <code>execute()</code>, which isn't wrapping the given <code>Runnable</code>?)</p>\n<p>Putting the wrapping code only in <code>execute()</code> might be okay, but only if that's always called in the thread which is scheduling the task, and never in some worker thread (that's not at all clear from the docs and in theory I think it could be violated by a service which wraps this one).</p>\n<p>Putting the wrapping code in both (belt &amp; braces) is possible, but I'd need a new type so I can detect <code>Runnables</code> which have already be wrapped (and I don't think even that's particularly robust tbh).</p>\n<p>So do I just have to wrap things in both places and suffer wrapping almost all tasks twice, or am I missing something?</p>\n<p>EDIT - An alternative idea I just thought of is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private static final class GrpcPropagatingTask&lt;V&gt; extends FutureTask&lt;V&gt; {\n    public GrpcPropagatingTask(Callable&lt;V&gt; callable) {\n      super(Context.current().wrap(callable));\n    }\n\n    public GrpcPropagatingTask(Runnable runnable, V result) {\n      super(Context.current().wrap(runnable), result);\n    }\n  }\n</code></pre>\n<p>And returning that from <code>newTaskFor()</code> methods. Then in <code>execute()</code> I can do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override\n  public void execute(Runnable command) {\n    if (!(command instanceof GrpcPropagatingTask)) {\n      command = Context.current().wrap(command);\n    }\n    delegate.execute(command);\n  }\n</code></pre>\n<p>which I think would resolve my fears about <code>execute()</code> being called directly.</p>\n"},{"tags":["java","performance","tomcat","memory-management","birt"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1695462764,"post_id":77159590,"comment_id":136029908,"body_markdown":"Oddly, it&#39;s more likely your GC scheme if you have one, the memory will fill but it won&#39;t clean out it&#39;s dump space until it is critical to it. You need to put in a GC scheme probably.      https://www.oracle.com/technetwork/tutorials/tutorials-1876574.html      https://www.middlewareinventory.com/blog/set-heapmemory-jvm-arguments-tomcat/","body":"Oddly, it&#39;s more likely your GC scheme if you have one, the memory will fill but it won&#39;t clean out it&#39;s dump space until it is critical to it. You need to put in a GC scheme probably.      <a href=\"https://www.oracle.com/technetwork/tutorials/tutorials-1876574.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/tutorials/tutorials-1876574.html</a>      <a href=\"https://www.middlewareinventory.com/blog/set-heapmemory-jvm-arguments-tomcat/\" rel=\"nofollow noreferrer\">middlewareinventory.com/blog/&hellip;</a>"},{"owner":{"account_id":3349759,"reputation":2483,"user_id":2814025,"display_name":"hvb"},"score":0,"creation_date":1695624502,"post_id":77159590,"comment_id":136043929,"body_markdown":"The response is heavily depending on the way you are processing parallel requests. Noby can answer this without more details. A wild guess: Your are processing all reports one after the other in some way (not in a parallel fashion), so if e.g. you have 1 request per second and report generation takes 1.5 secs, then for the first report there is a response time of 1.5 secs, 2 secs for the second report, 2.5 for the 3rd report and so on.","body":"The response is heavily depending on the way you are processing parallel requests. Noby can answer this without more details. A wild guess: Your are processing all reports one after the other in some way (not in a parallel fashion), so if e.g. you have 1 request per second and report generation takes 1.5 secs, then for the first report there is a response time of 1.5 secs, 2 secs for the second report, 2.5 for the 3rd report and so on."}],"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695403199,"creation_date":1695403199,"question_id":77159590,"body_markdown":"I am using Birt Report to generate transactional reports in PDF format. Currently, the service receives approximately 50 requests per minute. The problem is that over time, the response times and PDF generation speed start to decrease, as can be seen in the graph:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nInitially, I thought it might be a problem with heap memory usage, but I don&#39;t see the same pattern there:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI do see a similar pattern in non-heap memory usage.\r\n\r\n[![enter image description here][3]][3]\r\n\r\nWhere should I start looking for the problem? I don&#39;t know much about non-heap memory usage, and I&#39;m not sure if this is the issue\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nmZgD.png\r\n  [2]: https://i.stack.imgur.com/mU1z7.png\r\n  [3]: https://i.stack.imgur.com/pcv65.png","title":"Birt Report strange response time behaviour","body":"<p>I am using Birt Report to generate transactional reports in PDF format. Currently, the service receives approximately 50 requests per minute. The problem is that over time, the response times and PDF generation speed start to decrease, as can be seen in the graph:</p>\n<p><a href=\"https://i.stack.imgur.com/nmZgD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nmZgD.png\" alt=\"enter image description here\" /></a></p>\n<p>Initially, I thought it might be a problem with heap memory usage, but I don't see the same pattern there:</p>\n<p><a href=\"https://i.stack.imgur.com/mU1z7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mU1z7.png\" alt=\"enter image description here\" /></a></p>\n<p>I do see a similar pattern in non-heap memory usage.</p>\n<p><a href=\"https://i.stack.imgur.com/pcv65.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pcv65.png\" alt=\"enter image description here\" /></a></p>\n<p>Where should I start looking for the problem? I don't know much about non-heap memory usage, and I'm not sure if this is the issue</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1695152784,"post_id":77137478,"comment_id":135984971,"body_markdown":"I think the regex that you want is: (^k)|(?:\\W)k|^s|(?:\\W)s/gmi","body":"I think the regex that you want is: (^k)|(?:\\W)k|^s|(?:\\W)s/gmi"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":2,"creation_date":1695152875,"post_id":77137478,"comment_id":135984992,"body_markdown":"https://regex101.com/","body":"<a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a>"},{"owner":{"account_id":3588984,"reputation":115,"user_id":2995460,"display_name":"anteastra"},"score":1,"creation_date":1695152909,"post_id":77137478,"comment_id":135984999,"body_markdown":"I am not sure if this is correct question on SO. But here the proposal from me. You already have a list of Strings on which you should return true. You can put them in a set and then check if this set contains your input String","body":"I am not sure if this is correct question on SO. But here the proposal from me. You already have a list of Strings on which you should return true. You can put them in a set and then check if this set contains your input String"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695152915,"post_id":77137478,"comment_id":135985001,"body_markdown":"@ControlAltDel  `/gmi` for java ? @roman_s is the *search term* given? (if the search term is  `s`, maybe the regex is `&quot;(\\\\b| )\\\\Q&quot; + s + &quot;\\\\E&quot;` or similar)","body":"@ControlAltDel  <code>&#47;gmi</code> for java ? @roman_s is the <i>search term</i> given? (if the search term is  <code>s</code>, maybe the regex is <code>&quot;(\\\\b| )\\\\Q&quot; + s + &quot;\\\\E&quot;</code> or similar)"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1695154160,"post_id":77137478,"comment_id":135985231,"body_markdown":"@user85421 re:/gmi - to appropriate a quote for The Karate Kid: &quot;Regex do yes? ok Regex do no? ok. Regex just to get it to pass the unit testing? *Squish* just like bug&quot; My original regex proposal should have had a / at the start","body":"@user85421 re:/gmi - to appropriate a quote for The Karate Kid: &quot;Regex do yes? ok Regex do no? ok. Regex just to get it to pass the unit testing? <i>Squish</i> just like bug&quot; My original regex proposal should have had a / at the start"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1695159581,"post_id":77137478,"comment_id":135986121,"body_markdown":"Can you provide more information about the _&quot;search terms&quot;_?  Why would _&quot;i&quot;_ return _false_?  If the the text ends with an _&quot;i&quot;_?","body":"Can you provide more information about the <i>&quot;search terms&quot;</i>?  Why would <i>&quot;i&quot;</i> return <i>false</i>?  If the the text ends with an <i>&quot;i&quot;</i>?"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1695160781,"post_id":77137478,"comment_id":135986286,"body_markdown":"It&#39;s not clear to me how you decide what should be accepted and what not. Is this about word boundaries? Then check the `\\b` regex special character. Also check [ask].","body":"It&#39;s not clear to me how you decide what should be accepted and what not. Is this about word boundaries? Then check the <code>\\b</code> regex special character. Also check <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695161740,"creation_date":1695161740,"answer_id":77138238,"question_id":77137478,"body_markdown":"It seems from your examples that a term should &quot;match&quot; if it&#39;s a case-insensitive substring of the search string and either:\r\n\r\n - the first character is a non-letter, or\r\n - it matches at the start of a word\r\n\r\nYou can use regex:\r\n\r\n```\r\nString search;\r\nString term;\r\n\r\nboolean match = search.matches(&quot;.*(?=\\\\W|\\\\b)\\\\Q&quot; + term + &quot;\\\\E.*&quot;);\r\n```\r\n","title":"Given a string, check if search term matches the beginning of any substring","body":"<p>It seems from your examples that a term should &quot;match&quot; if it's a case-insensitive substring of the search string and either:</p>\n<ul>\n<li>the first character is a non-letter, or</li>\n<li>it matches at the start of a word</li>\n</ul>\n<p>You can use regex:</p>\n<pre><code>String search;\nString term;\n\nboolean match = search.matches(&quot;.*(?=\\\\W|\\\\b)\\\\Q&quot; + term + &quot;\\\\E.*&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25859588,"reputation":31,"user_id":19592256,"display_name":"roman_s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695402695,"creation_date":1695399068,"answer_id":77159228,"question_id":77137478,"body_markdown":"Thanks @ControlAltDel I ended up using your regex with this java code.\r\n\r\n    String searchTerm = &quot;siz&quot;;\r\n    Pattern pattern = Pattern.compile(&quot;(^&quot; + searchTerm + &quot;)|(?:\\\\W)&quot;\r\n    + searchTerm, Pattern.CASE_INSENSITIVE);\r\n    Matcher matcher = pattern.matcher(&quot;KING-SIZE (KS)&quot;);\r\n    \r\n    System.out.println(matcher.find());\r\n    // Outputs &quot;true&quot;\r\n\r\nFeel free to post to your answer so I could mark it as solved","title":"Given a string, check if search term matches the beginning of any substring","body":"<p>Thanks @ControlAltDel I ended up using your regex with this java code.</p>\n<pre><code>String searchTerm = &quot;siz&quot;;\nPattern pattern = Pattern.compile(&quot;(^&quot; + searchTerm + &quot;)|(?:\\\\W)&quot;\n+ searchTerm, Pattern.CASE_INSENSITIVE);\nMatcher matcher = pattern.matcher(&quot;KING-SIZE (KS)&quot;);\n\nSystem.out.println(matcher.find());\n// Outputs &quot;true&quot;\n</code></pre>\n<p>Feel free to post to your answer so I could mark it as solved</p>\n"}],"owner":{"account_id":25859588,"reputation":31,"user_id":19592256,"display_name":"roman_s"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695402695,"creation_date":1695151991,"question_id":77137478,"body_markdown":"Given this string: \r\n```\r\n&quot;KING-SIZE (KS)&quot;\r\n```\r\nThese search terms should return **true** for matching the given string: \r\n```\r\n&quot;k&quot;, &quot;ki&quot;, &quot;kin&quot;, &quot;king&quot;, &quot;s&quot;, &quot;si&quot;, &quot;siz&quot;, &quot;size&quot;, &quot;-size&quot;, &quot;(k&quot;, &quot;(ks&quot;, &quot;(ks)&quot;, &quot;ks&quot;, &quot;king-size&quot;\r\n```\r\n\r\nThese search terms should return **false** for matching the given string: \r\n```\r\n&quot;i&quot;, &quot;in&quot;, &quot;ing&quot;, &quot;iz&quot;, &quot;ize&quot;\r\n```\r\n\r\n\r\nI&#39;m coding in Java and at first I thought I&#39;d use \r\n```\r\n&quot;KING-SIZE (KS)&quot;.contains(searchTerm)\r\n```\r\nBut I need the condition to return **false** if a user enters a search term that matches just a middle section of each substring.\r\n\r\nI thought about using regex but I&#39;m not sure how the expression would work for this use case. ","title":"Given a string, check if search term matches the beginning of any substring","body":"<p>Given this string:</p>\n<pre><code>&quot;KING-SIZE (KS)&quot;\n</code></pre>\n<p>These search terms should return <strong>true</strong> for matching the given string:</p>\n<pre><code>&quot;k&quot;, &quot;ki&quot;, &quot;kin&quot;, &quot;king&quot;, &quot;s&quot;, &quot;si&quot;, &quot;siz&quot;, &quot;size&quot;, &quot;-size&quot;, &quot;(k&quot;, &quot;(ks&quot;, &quot;(ks)&quot;, &quot;ks&quot;, &quot;king-size&quot;\n</code></pre>\n<p>These search terms should return <strong>false</strong> for matching the given string:</p>\n<pre><code>&quot;i&quot;, &quot;in&quot;, &quot;ing&quot;, &quot;iz&quot;, &quot;ize&quot;\n</code></pre>\n<p>I'm coding in Java and at first I thought I'd use</p>\n<pre><code>&quot;KING-SIZE (KS)&quot;.contains(searchTerm)\n</code></pre>\n<p>But I need the condition to return <strong>false</strong> if a user enters a search term that matches just a middle section of each substring.</p>\n<p>I thought about using regex but I'm not sure how the expression would work for this use case.</p>\n"},{"tags":["java","executorservice"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":2,"creation_date":1695356326,"post_id":77154823,"comment_id":136016216,"body_markdown":"does it have anything to do with the ShopifyBulkSyncCoupons bean? Are you sure that it is running properly when you say it executes for second, third and last elements of the list? Since the bean is a singleton, and you set it for each and return the same bean, are you sure it runs &quot;correctly&quot;? it seems more like as it iterates, each of the threads are executing the same id which is the last one","body":"does it have anything to do with the ShopifyBulkSyncCoupons bean? Are you sure that it is running properly when you say it executes for second, third and last elements of the list? Since the bean is a singleton, and you set it for each and return the same bean, are you sure it runs &quot;correctly&quot;? it seems more like as it iterates, each of the threads are executing the same id which is the last one"},{"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"score":0,"creation_date":1695358000,"post_id":77154823,"comment_id":136016339,"body_markdown":"@experimentunit1998X Do you suggest I should make the scope as Prototype for the bean ?","body":"@experimentunit1998X Do you suggest I should make the scope as Prototype for the bean ?"},{"owner":{"account_id":1547939,"reputation":992,"user_id":1441011,"display_name":"Tjad Clark"},"score":0,"creation_date":1695358107,"post_id":77154823,"comment_id":136016348,"body_markdown":"@ShreyaAggarwal, that would be 1 way to resolve your issue.","body":"@ShreyaAggarwal, that would be 1 way to resolve your issue."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1695358500,"post_id":77154823,"comment_id":136016379,"body_markdown":"That wont help if it continues to use the same instance for each iteration of the loop. It needs a new instance for each coupon ID.","body":"That wont help if it continues to use the same instance for each iteration of the loop. It needs a new instance for each coupon ID."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695361534,"post_id":77154823,"comment_id":136016647,"body_markdown":"What is `shopifyBulkSyncCoupons` exactly? I see no such variable anywhere. Is this a singleton? Are we calling `setCouponId` on the same object over and over again? Seems like we do not have enough information here to debug.","body":"What is <code>shopifyBulkSyncCoupons</code> exactly? I see no such variable anywhere. Is this a singleton? Are we calling <code>setCouponId</code> on the same object over and over again? Seems like we do not have enough information here to debug."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695361585,"post_id":77154823,"comment_id":136016655,"body_markdown":"You call `task.setCouponId` but I see no `ShopifyBulkSyncCoupons#setCopuonId` method on your `ShopifyBulkSyncCoupons` class.","body":"You call <code>task.setCouponId</code> but I see no <code>ShopifyBulkSyncCoupons#setCopuonId</code> method on your <code>ShopifyBulkSyncCoupons</code> class."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695361645,"post_id":77154823,"comment_id":136016663,"body_markdown":"When posting here, and when debugging, you should contrive some simplistic analog of your actual code, to detect where the original goes wrong.","body":"When posting here, and when debugging, you should contrive some simplistic analog of your actual code, to detect where the original goes wrong."},{"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"score":0,"creation_date":1695363483,"post_id":77154823,"comment_id":136016879,"body_markdown":"Hi @BasilBourque shopifyBulkSyncCoupons is a bean . There is a stataement as \n         Autowired\n\tprivate ShopifyBulkSyncCoupons shopifyBulkSyncCoupons; in the beginning of the class . there is a setter method too to set CouponId in the ShopifyBulkSyncCoupons .","body":"Hi @BasilBourque shopifyBulkSyncCoupons is a bean . There is a stataement as           Autowired \tprivate ShopifyBulkSyncCoupons shopifyBulkSyncCoupons; in the beginning of the class . there is a setter method too to set CouponId in the ShopifyBulkSyncCoupons ."},{"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"score":0,"creation_date":1695363539,"post_id":77154823,"comment_id":136016887,"body_markdown":"I will be happy to share more details . However this is the major chunk of the code .","body":"I will be happy to share more details . However this is the major chunk of the code ."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695402547,"creation_date":1695362956,"answer_id":77155219,"question_id":77154823,"body_markdown":"You have not given sufficient detail for us to debug, as noted in the Comments. \r\n\r\nMost concerning are your two lines:\r\n\r\n```java\r\nShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;\r\ntask.setCouponId(id);\r\n```\r\n\r\nWe have no idea what is `shopifyBulkSyncCoupons`. I suspect you have a singleton object on which you are resetting the assigned coupon `id`. Changing a crucial value while having multiple threads operating on that singleton is a recipe for disaster. \r\n\r\n# Example code\r\n\r\nI can give you a skeleton of code paralleling your code. \r\n\r\nThe following code works successfully. I suggest adding to this skeleton piece by piece of your real work, until discovering the problem.\r\n\r\n## Constructor on `Runnable`\r\n\r\nNotice how our task, our `Runnable` implementation, below has a constructor taking as an argument the coupon id. That coupon id is then saved to a member variable of the task object.\r\n\r\nThis mean each of the multiple task objects we instantiate in a loop has its own coupon id value. No singleton, no changing an established value. To ensure no change, we mark both the parameter and the member field as `final`. \r\n\r\n## Try-with-resources\r\n\r\nNote that in modern Java, `ExecutorService` is `AutoCloseable`. So we can use try-with-resources syntax to properly shutdown the executor service. \r\n\r\nYour Question&#39;s code was woefully short in that area  see the shutdown boilerplate given to you in the `ExecutorService` Javadoc. The default implementation of the `close` method added to `ExecutorService` is essentially a copy of that boilerplate.\r\n\r\n## Avoid `execute`\r\n\r\nDo not call `Executor#execute` on your `ExecutorService`. That method is documented as *maybe* executing the task on another thread *or* executing the task on the same thread. To ensure the use of background threads, call another method such as `submit`.\r\n\r\n## Skeleton code\r\n\r\nDefine the task class:\r\n\r\n```java\r\npackage work.basil.example.coupon;\r\n\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n\r\npublic class CouponProcessor implements Runnable\r\n{\r\n    private final Long couponId;\r\n\r\n    public CouponProcessor ( final Long couponId ) { this.couponId = couponId; }\r\n\r\n    @Override\r\n    public void run ( )\r\n    {\r\n        System.out.println ( &quot;Thread ID # &quot; + Thread.currentThread ( ).threadId ( ) + &quot; starting to process coupon ID # &quot; + this.couponId + &quot; at &quot; + Instant.now ( ) );\r\n        try { Thread.sleep ( Duration.ofSeconds ( ThreadLocalRandom.current ( ).nextInt ( 1 , 7 ) ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\r\n        System.out.println ( &quot;Thread ID # &quot; + Thread.currentThread ( ).threadId ( ) + &quot; done process coupon ID # &quot; + this.couponId + &quot; at &quot; + Instant.now ( ) );\r\n    }\r\n}\r\n```\r\n\r\nAnd write an `App` class to process some coupon ids.\r\n\r\n```java\r\npackage work.basil.example.coupon;\r\n\r\nimport java.time.Instant;\r\nimport java.util.List;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class App\r\n{\r\n    public static void main ( String[] args )\r\n    {\r\n        App app = new App ( );\r\n        app.demo ( );\r\n    }\r\n\r\n    private void demo ( )\r\n    {\r\n        System.out.println ( &quot;INFO - Demo starting at &quot; + Instant.now ( ) );\r\n\r\n        List &lt; Long &gt; couponIds = List.of ( 7L , 42L , 99L , 101L );  // Auto-boxing converts primitives to objects.\r\n        try ( // Use try-with-resources syntax to automatically close the executor service when all submitted tasks have completed.\r\n                ExecutorService executorService = Executors.newFixedThreadPool ( 3 ) ;\r\n        )\r\n        {\r\n            for ( Long couponId : couponIds )\r\n            {\r\n                Runnable task = new CouponProcessor ( couponId );\r\n                executorService.submit ( task );\r\n            }\r\n        }\r\n        System.out.println ( &quot;INFO - Executor service shutdown at &quot; + Instant.now ( ) );\r\n\r\n        System.out.println ( &quot;INFO - Demo done at &quot; + Instant.now ( ) );\r\n    }\r\n}\r\n```\r\n\r\nWhen run:\r\n\r\n```none\r\nINFO - Demo starting at 2023-09-22T06:00:22.962114Z\r\nThread ID # 22 starting to process coupon ID # 42 at 2023-09-22T06:00:22.966858Z\r\nThread ID # 23 starting to process coupon ID # 99 at 2023-09-22T06:00:22.966860Z\r\nThread ID # 21 starting to process coupon ID # 7 at 2023-09-22T06:00:22.966859Z\r\nThread ID # 22 done process coupon ID # 42 at 2023-09-22T06:00:27.051596Z\r\nThread ID # 22 starting to process coupon ID # 101 at 2023-09-22T06:00:27.053034Z\r\nThread ID # 21 done process coupon ID # 7 at 2023-09-22T06:00:27.980626Z\r\nThread ID # 23 done process coupon ID # 99 at 2023-09-22T06:00:28.051538Z\r\nThread ID # 22 done process coupon ID # 101 at 2023-09-22T06:00:31.125844Z\r\nINFO - Executor service shutdown at 2023-09-22T06:00:31.135371Z\r\nINFO - Demo done at 2023-09-22T06:00:31.136004Z\r\n```\r\n\r\nBeware: Output from `System.out.println` does *not* necessarily appear on the console in chronological order when called across threads. If you care about the order, include a timestamp to be studied. Or else gather the messages into a thread-safe collection rather than feeding to `println` calls.\r\n\r\n## Virtual threads\r\n\r\nIn Java 21+, if your task involves [blocking][1] (is not entirely [CPU-bound][2]), use [virtual threads][3]. \r\n\r\n    ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor() ;\r\n\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/Blocking_%28computing%29\r\n  [2]: https://en.m.wikipedia.org/wiki/CPU-bound\r\n  [3]: https://openjdk.org/jeps/444","title":"Executor service doesn&#39;t process all data passed in arraylist","body":"<p>You have not given sufficient detail for us to debug, as noted in the Comments.</p>\n<p>Most concerning are your two lines:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;\ntask.setCouponId(id);\n</code></pre>\n<p>We have no idea what is <code>shopifyBulkSyncCoupons</code>. I suspect you have a singleton object on which you are resetting the assigned coupon <code>id</code>. Changing a crucial value while having multiple threads operating on that singleton is a recipe for disaster.</p>\n<h1>Example code</h1>\n<p>I can give you a skeleton of code paralleling your code.</p>\n<p>The following code works successfully. I suggest adding to this skeleton piece by piece of your real work, until discovering the problem.</p>\n<h2>Constructor on <code>Runnable</code></h2>\n<p>Notice how our task, our <code>Runnable</code> implementation, below has a constructor taking as an argument the coupon id. That coupon id is then saved to a member variable of the task object.</p>\n<p>This mean each of the multiple task objects we instantiate in a loop has its own coupon id value. No singleton, no changing an established value. To ensure no change, we mark both the parameter and the member field as <code>final</code>.</p>\n<h2>Try-with-resources</h2>\n<p>Note that in modern Java, <code>ExecutorService</code> is <code>AutoCloseable</code>. So we can use try-with-resources syntax to properly shutdown the executor service.</p>\n<p>Your Question's code was woefully short in that area  see the shutdown boilerplate given to you in the <code>ExecutorService</code> Javadoc. The default implementation of the <code>close</code> method added to <code>ExecutorService</code> is essentially a copy of that boilerplate.</p>\n<h2>Avoid <code>execute</code></h2>\n<p>Do not call <code>Executor#execute</code> on your <code>ExecutorService</code>. That method is documented as <em>maybe</em> executing the task on another thread <em>or</em> executing the task on the same thread. To ensure the use of background threads, call another method such as <code>submit</code>.</p>\n<h2>Skeleton code</h2>\n<p>Define the task class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.coupon;\n\nimport java.time.Duration;\nimport java.time.Instant;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic class CouponProcessor implements Runnable\n{\n    private final Long couponId;\n\n    public CouponProcessor ( final Long couponId ) { this.couponId = couponId; }\n\n    @Override\n    public void run ( )\n    {\n        System.out.println ( &quot;Thread ID # &quot; + Thread.currentThread ( ).threadId ( ) + &quot; starting to process coupon ID # &quot; + this.couponId + &quot; at &quot; + Instant.now ( ) );\n        try { Thread.sleep ( Duration.ofSeconds ( ThreadLocalRandom.current ( ).nextInt ( 1 , 7 ) ) ); } catch ( InterruptedException e ) { throw new RuntimeException ( e ); }\n        System.out.println ( &quot;Thread ID # &quot; + Thread.currentThread ( ).threadId ( ) + &quot; done process coupon ID # &quot; + this.couponId + &quot; at &quot; + Instant.now ( ) );\n    }\n}\n</code></pre>\n<p>And write an <code>App</code> class to process some coupon ids.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.coupon;\n\nimport java.time.Instant;\nimport java.util.List;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        System.out.println ( &quot;INFO - Demo starting at &quot; + Instant.now ( ) );\n\n        List &lt; Long &gt; couponIds = List.of ( 7L , 42L , 99L , 101L );  // Auto-boxing converts primitives to objects.\n        try ( // Use try-with-resources syntax to automatically close the executor service when all submitted tasks have completed.\n                ExecutorService executorService = Executors.newFixedThreadPool ( 3 ) ;\n        )\n        {\n            for ( Long couponId : couponIds )\n            {\n                Runnable task = new CouponProcessor ( couponId );\n                executorService.submit ( task );\n            }\n        }\n        System.out.println ( &quot;INFO - Executor service shutdown at &quot; + Instant.now ( ) );\n\n        System.out.println ( &quot;INFO - Demo done at &quot; + Instant.now ( ) );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>INFO - Demo starting at 2023-09-22T06:00:22.962114Z\nThread ID # 22 starting to process coupon ID # 42 at 2023-09-22T06:00:22.966858Z\nThread ID # 23 starting to process coupon ID # 99 at 2023-09-22T06:00:22.966860Z\nThread ID # 21 starting to process coupon ID # 7 at 2023-09-22T06:00:22.966859Z\nThread ID # 22 done process coupon ID # 42 at 2023-09-22T06:00:27.051596Z\nThread ID # 22 starting to process coupon ID # 101 at 2023-09-22T06:00:27.053034Z\nThread ID # 21 done process coupon ID # 7 at 2023-09-22T06:00:27.980626Z\nThread ID # 23 done process coupon ID # 99 at 2023-09-22T06:00:28.051538Z\nThread ID # 22 done process coupon ID # 101 at 2023-09-22T06:00:31.125844Z\nINFO - Executor service shutdown at 2023-09-22T06:00:31.135371Z\nINFO - Demo done at 2023-09-22T06:00:31.136004Z\n</code></pre>\n<p>Beware: Output from <code>System.out.println</code> does <em>not</em> necessarily appear on the console in chronological order when called across threads. If you care about the order, include a timestamp to be studied. Or else gather the messages into a thread-safe collection rather than feeding to <code>println</code> calls.</p>\n<h2>Virtual threads</h2>\n<p>In Java 21+, if your task involves <a href=\"https://en.m.wikipedia.org/wiki/Blocking_%28computing%29\" rel=\"nofollow noreferrer\">blocking</a> (is not entirely <a href=\"https://en.m.wikipedia.org/wiki/CPU-bound\" rel=\"nofollow noreferrer\">CPU-bound</a>), use <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">virtual threads</a>.</p>\n<pre><code>ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor() ;\n</code></pre>\n"}],"owner":{"account_id":29505823,"reputation":19,"user_id":22611816,"display_name":"Shreya Aggarwal"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695402547,"creation_date":1695355982,"question_id":77154823,"body_markdown":"I am trying to create a thread pool of 3 threads using `ExecutorService`, but whenever I process an `ArrayList` using these threads only second third and last element of the list gets processed by `run()` and then process gets stuck on last element and keeps processing it multiple times. This is my code:\r\n```java\r\npublic ResponseEntity&lt;?&gt; syncShopifyPriceRulesListToMongoV3(List&lt;Long&gt; ids) {\r\n\tlogger.info(&quot;Start :: syncShopifyPriceRulesListToMongoV3 for ids size = &quot;+ids.size());\r\n\tExecutorService service = Executors.newFixedThreadPool(3);\r\n\ttry {\r\n\t\tif (ids.size() &gt; 0) {\r\n\t\t\tfor (Long id : ids) {\r\n\t\t\t\tlogger.info(&quot;id inside for&quot;+id);\r\n\t\t\t\tShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;\r\n\t\t\t\ttask.setCouponId(id); // Set the &#39;id&#39; value using the setter method\r\n\t\t\t\tservice.execute(task);\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (Exception e) {\r\n\t\tthrow new RuntimeException(e);\r\n\t}\r\n\tlogger.info(&quot;End :: syncShopifyPriceRulesListToMongoV3&quot;);\r\n\tservice.shutdown();\r\n\treturn new ResponseEntity&lt;&gt;(HttpStatus.OK);\r\n}\r\n```\r\nThis is my `ShopifyBulkSyncCoupons` class:\r\n```java\r\n@Component\r\npublic class ShopifyBulkSyncCoupons implements Runnable\r\n{\r\n    @Override\r\n    public void run()\r\n    {\r\n        logger.info(&quot;Inside run for id &quot;+CouponId);\r\n        logger.info(&quot;ShopifyClientBean &quot;+shopifyClient);\r\n\r\n        PriceRuleService priceRuleService = new PriceRuleServiceImpl();\r\n\r\n        ShopifyPriceRuleResponse priceRuleResponse = shopifyClient.getPriceRuleById(CouponId);\r\n        if(null!=priceRuleResponse &amp;&amp; null!=priceRuleResponse.getPriceRule()) {\r\n            PriceRuleDetails priceRuleDetails = new PriceRuleDetails();\r\n            List&lt;Long&gt; finalEntitledVariants = new ArrayList&lt;&gt;();\r\n            priceRuleDetails = priceRuleService.mapShopifyPriceRuleToModel(priceRuleResponse.getPriceRule());\r\n            if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledCollectionIds())) {\r\n                List&lt;Long&gt; collectionIds = priceRuleDetails.getEntitledCollectionIds();\r\n                List&lt;ProductAttributes&gt; prodAttr = productAttrRepository.findByCollectionsIn(collectionIds);\r\n                for (ProductAttributes prod : prodAttr) {\r\n                    finalEntitledVariants.add(prod.getVariantId());\r\n                }\r\n            }\r\n            if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledProductIds())) {\r\n                List&lt;ProductAttributes&gt; productAttributesList = productAttrRepository.findByProductIdIn(priceRuleDetails.getEntitledProductIds());\r\n                for (ProductAttributes prod : productAttributesList) {\r\n                    finalEntitledVariants.add(prod.getVariantId());\r\n                }\r\n            }\r\n            if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledVariantIds())) {\r\n                finalEntitledVariants.addAll(priceRuleDetails.getEntitledVariantIds());\r\n            }\r\npriceRuleDetails.setEntitledVariantIds(finalEntitledVariants);\r\n            priceRuleDetailsRepo.save(priceRuleDetails);\r\n        }\r\n    }\r\n}\r\n```\r\nI have already tried numerous ways to fix this. Can someone please help in identifying what is going wrong?\r\n","title":"Executor service doesn&#39;t process all data passed in arraylist","body":"<p>I am trying to create a thread pool of 3 threads using <code>ExecutorService</code>, but whenever I process an <code>ArrayList</code> using these threads only second third and last element of the list gets processed by <code>run()</code> and then process gets stuck on last element and keeps processing it multiple times. This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ResponseEntity&lt;?&gt; syncShopifyPriceRulesListToMongoV3(List&lt;Long&gt; ids) {\n    logger.info(&quot;Start :: syncShopifyPriceRulesListToMongoV3 for ids size = &quot;+ids.size());\n    ExecutorService service = Executors.newFixedThreadPool(3);\n    try {\n        if (ids.size() &gt; 0) {\n            for (Long id : ids) {\n                logger.info(&quot;id inside for&quot;+id);\n                ShopifyBulkSyncCoupons task = shopifyBulkSyncCoupons;\n                task.setCouponId(id); // Set the 'id' value using the setter method\n                service.execute(task);\n            }\n        }\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n    logger.info(&quot;End :: syncShopifyPriceRulesListToMongoV3&quot;);\n    service.shutdown();\n    return new ResponseEntity&lt;&gt;(HttpStatus.OK);\n}\n</code></pre>\n<p>This is my <code>ShopifyBulkSyncCoupons</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class ShopifyBulkSyncCoupons implements Runnable\n{\n    @Override\n    public void run()\n    {\n        logger.info(&quot;Inside run for id &quot;+CouponId);\n        logger.info(&quot;ShopifyClientBean &quot;+shopifyClient);\n\n        PriceRuleService priceRuleService = new PriceRuleServiceImpl();\n\n        ShopifyPriceRuleResponse priceRuleResponse = shopifyClient.getPriceRuleById(CouponId);\n        if(null!=priceRuleResponse &amp;&amp; null!=priceRuleResponse.getPriceRule()) {\n            PriceRuleDetails priceRuleDetails = new PriceRuleDetails();\n            List&lt;Long&gt; finalEntitledVariants = new ArrayList&lt;&gt;();\n            priceRuleDetails = priceRuleService.mapShopifyPriceRuleToModel(priceRuleResponse.getPriceRule());\n            if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledCollectionIds())) {\n                List&lt;Long&gt; collectionIds = priceRuleDetails.getEntitledCollectionIds();\n                List&lt;ProductAttributes&gt; prodAttr = productAttrRepository.findByCollectionsIn(collectionIds);\n                for (ProductAttributes prod : prodAttr) {\n                    finalEntitledVariants.add(prod.getVariantId());\n                }\n            }\n            if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledProductIds())) {\n                List&lt;ProductAttributes&gt; productAttributesList = productAttrRepository.findByProductIdIn(priceRuleDetails.getEntitledProductIds());\n                for (ProductAttributes prod : productAttributesList) {\n                    finalEntitledVariants.add(prod.getVariantId());\n                }\n            }\n            if (!CollectionUtils.isEmpty(priceRuleDetails.getEntitledVariantIds())) {\n                finalEntitledVariants.addAll(priceRuleDetails.getEntitledVariantIds());\n            }\npriceRuleDetails.setEntitledVariantIds(finalEntitledVariants);\n            priceRuleDetailsRepo.save(priceRuleDetails);\n        }\n    }\n}\n</code></pre>\n<p>I have already tried numerous ways to fix this. Can someone please help in identifying what is going wrong?</p>\n"},{"tags":["java","json","spring","uri","spring-webclient"],"comments":[{"owner":{"account_id":3575751,"reputation":374,"user_id":2985057,"display_name":"Kelsey"},"score":1,"creation_date":1695398260,"post_id":77159085,"comment_id":136023788,"body_markdown":"would you mind pasting where tag is defined?","body":"would you mind pasting where tag is defined?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1695398502,"post_id":77159085,"comment_id":136023829,"body_markdown":"Please provide an [mcve]","body":"Please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":22025771,"reputation":11,"user_id":16293797,"display_name":"mrvibes"},"score":0,"creation_date":1695401646,"post_id":77159085,"comment_id":136024394,"body_markdown":"@Jens What other context is necessary?","body":"@Jens What other context is necessary?"},{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1695401887,"post_id":77159085,"comment_id":136024430,"body_markdown":"Is your tag supposed to be a URI fragment?","body":"Is your tag supposed to be a URI fragment?"},{"owner":{"account_id":22025771,"reputation":11,"user_id":16293797,"display_name":"mrvibes"},"score":1,"creation_date":1695402122,"post_id":77159085,"comment_id":136024459,"body_markdown":"No, frustratingly enough it&#39;s just part of the player identifier. There is also no other way to look up a player&#39;s info (no numerical ID or something), so I have to end the URI with `.../players/%238QQRVVL0`.","body":"No, frustratingly enough it&#39;s just part of the player identifier. There is also no other way to look up a player&#39;s info (no numerical ID or something), so I have to end the URI with <code>...&#47;players&#47;%238QQRVVL0</code>."}],"answers":[{"tags":[],"owner":{"account_id":3575751,"reputation":374,"user_id":2985057,"display_name":"Kelsey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695401086,"creation_date":1695398494,"answer_id":77159172,"question_id":77159085,"body_markdown":"You could try something like:\r\n\r\n    String url = &quot;https://example.com?q=&quot; + URLEncoder.encode(q, StandardCharsets.UTF_8);\r\n\r\n\r\n\r\nThe reason this is happening is because Java spring uses what is known as percent encoding - that&#39;s why % is being converted to a %25, more on this here:\r\nhttps://en.wikipedia.org/wiki/Percent-encoding\r\n\r\n\r\nIf you can give some more details about where &amp; how you&#39;ve defined tag, I may be able to give other specific suggestions.\r\n\r\nUpdate:\r\nMaybe you could try something like this?\r\n\r\n    JSONObject json = webClient.get()\r\n                .uri(playersEndpoint + UriUtils.encodePath(tag, &quot;UTF-8&quot;)))\r\n                .retrieve()\r\n                .bodyToMono(JSONObject.class)\r\n                .block();\r\n\r\nFollow up update:\r\n\r\nTry updating the / inside of playersEndpoint with %2F instead? \r\n","title":"WebClient in Java Spring replaces the &#39;%&#39; character when I don&#39;t want it to","body":"<p>You could try something like:</p>\n<pre><code>String url = &quot;https://example.com?q=&quot; + URLEncoder.encode(q, StandardCharsets.UTF_8);\n</code></pre>\n<p>The reason this is happening is because Java spring uses what is known as percent encoding - that's why % is being converted to a %25, more on this here:\n<a href=\"https://en.wikipedia.org/wiki/Percent-encoding\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Percent-encoding</a></p>\n<p>If you can give some more details about where &amp; how you've defined tag, I may be able to give other specific suggestions.</p>\n<p>Update:\nMaybe you could try something like this?</p>\n<pre><code>JSONObject json = webClient.get()\n            .uri(playersEndpoint + UriUtils.encodePath(tag, &quot;UTF-8&quot;)))\n            .retrieve()\n            .bodyToMono(JSONObject.class)\n            .block();\n</code></pre>\n<p>Follow up update:</p>\n<p>Try updating the / inside of playersEndpoint with %2F instead?</p>\n"}],"owner":{"account_id":22025771,"reputation":11,"user_id":16293797,"display_name":"mrvibes"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695402514,"creation_date":1695397719,"question_id":77159085,"body_markdown":"I am trying to create a URI that contains a &#39;#&#39;. I understand that that needs to be replaced by &quot;%23&quot;, so I do. However, when using WebClient to connect to the endpoint, it automatically replaces the &#39;%&#39; with &quot;%25&quot;, so I end up with &quot;%2523&quot;. \r\n\r\nI tried just leaving the &#39;#&#39; character in, thinking that it replaced all illegal characters with their encoded format (I may be using the wrong terms here) but it does not replace it. Below is what I have, nothing too complicated.\r\n\r\nUPDATE: tag is a short string that contains a &#39;#&#39; character with every other character being valid. In the below example, tag is `#8QQRVVL0`. It is not a URI fragment, just the way the identifier system was designed.\r\n\r\n\r\n\r\n\r\n```\r\nif(tag.contains(&quot;#&quot;)){\r\n            tag = tag.replace(&quot;#&quot;, &quot;%23&quot;);\r\n        }\r\n        UserStatistics user = new UserStatistics();\r\n        String playersEndpoint = &quot;players/&quot;;\r\n        JSONObject json = webClient.get()\r\n                .uri(playersEndpoint + tag)\r\n                .retrieve()\r\n                .bodyToMono(JSONObject.class)\r\n                .block();\r\n```\r\n\r\nThe rest of my URI is created when I instantiate the WebClient object, prior in the Class.\r\n\r\n","title":"WebClient in Java Spring replaces the &#39;%&#39; character when I don&#39;t want it to","body":"<p>I am trying to create a URI that contains a '#'. I understand that that needs to be replaced by &quot;%23&quot;, so I do. However, when using WebClient to connect to the endpoint, it automatically replaces the '%' with &quot;%25&quot;, so I end up with &quot;%2523&quot;.</p>\n<p>I tried just leaving the '#' character in, thinking that it replaced all illegal characters with their encoded format (I may be using the wrong terms here) but it does not replace it. Below is what I have, nothing too complicated.</p>\n<p>UPDATE: tag is a short string that contains a '#' character with every other character being valid. In the below example, tag is <code>#8QQRVVL0</code>. It is not a URI fragment, just the way the identifier system was designed.</p>\n<pre><code>if(tag.contains(&quot;#&quot;)){\n            tag = tag.replace(&quot;#&quot;, &quot;%23&quot;);\n        }\n        UserStatistics user = new UserStatistics();\n        String playersEndpoint = &quot;players/&quot;;\n        JSONObject json = webClient.get()\n                .uri(playersEndpoint + tag)\n                .retrieve()\n                .bodyToMono(JSONObject.class)\n                .block();\n</code></pre>\n<p>The rest of my URI is created when I instantiate the WebClient object, prior in the Class.</p>\n"},{"tags":["java","arrays","random","probability-distribution"],"comments":[{"owner":{"account_id":19410276,"reputation":1735,"user_id":14194793,"display_name":"MFerguson"},"score":0,"creation_date":1637238654,"post_id":70019852,"comment_id":123775795,"body_markdown":"Just use Math.random to generate a number, then use an if to check if it is above/below a certain value to get your &quot;probability&quot;","body":"Just use Math.random to generate a number, then use an if to check if it is above/below a certain value to get your &quot;probability&quot;"}],"answers":[{"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695402233,"creation_date":1637240166,"answer_id":70020243,"question_id":70019852,"body_markdown":"Let&#39;s say you specify your probabilities in an array:\r\n\r\n    double[] probs = {50, 30, 12, 2.5, 0.85 /*, ...*/};\r\n\r\nYou can calculate the total of the probabilities:\r\n\r\n    double totalProbs = DoubleStream.of(probs).sum();\r\n\r\nAnd declare a random object:\r\n\r\n    Random random = new Random();\r\n\r\nYou can then write a method that returns a random goal:\r\n\r\n    public int randomGoal() {\r\n        double x = random.nextDouble() * totalProbs;\r\n        for (int i = 0; i &lt; probs.length; ++i) {\r\n            x -= probs[i];\r\n            if (x &lt;= 0) {\r\n                return goals[i];\r\n            }\r\n        }\r\n        return goals[goals.length - 1];\r\n    }\r\n","title":"How to pick an element from an array with a probability distribution?","body":"<p>Let's say you specify your probabilities in an array:</p>\n<pre><code>double[] probs = {50, 30, 12, 2.5, 0.85 /*, ...*/};\n</code></pre>\n<p>You can calculate the total of the probabilities:</p>\n<pre><code>double totalProbs = DoubleStream.of(probs).sum();\n</code></pre>\n<p>And declare a random object:</p>\n<pre><code>Random random = new Random();\n</code></pre>\n<p>You can then write a method that returns a random goal:</p>\n<pre><code>public int randomGoal() {\n    double x = random.nextDouble() * totalProbs;\n    for (int i = 0; i &lt; probs.length; ++i) {\n        x -= probs[i];\n        if (x &lt;= 0) {\n            return goals[i];\n        }\n    }\n    return goals[goals.length - 1];\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1082349,"reputation":2292,"user_id":1078986,"accept_rate":79,"display_name":"asinkxcoswt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1637241309,"creation_date":1637240395,"answer_id":70020299,"question_id":70019852,"body_markdown":"You can create an array of 100 elements, then for each number `i` in the array `goals`, put `i` into the new array `n` times where `n` equals the probability of `i` times the array size (100). Then randomly pick an element from the new array.\r\n\r\nYou can increase the array size (100) to get a more precise result. The most precise result will be when you pick the array size that makes every `n` a whole number.\r\n\r\n**Example:**\r\n\r\nhttps://jsfiddle.net/o5hmjxd2/28/\r\n\r\n```\r\nconst x = [0,1,2,3,4,5,6,7,8,9];\r\nconst p = [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]\r\nconst l = 100;\r\n\r\nlet y = [];\r\n\r\n\r\nfor (const i = 0; i &lt; x.length; i++) {\r\n  y = y.concat(new Array(l*p[i]).fill(x[i]));\r\n}\r\n\r\nfunction getRandomInt(max) {\r\n  return Math.floor(Math.random() * max);\r\n}\r\n\r\n// result\r\nconsole.log(y);\r\nconsole.log(y[getRandomInt(y.length - 1)])\r\n```","title":"How to pick an element from an array with a probability distribution?","body":"<p>You can create an array of 100 elements, then for each number <code>i</code> in the array <code>goals</code>, put <code>i</code> into the new array <code>n</code> times where <code>n</code> equals the probability of <code>i</code> times the array size (100). Then randomly pick an element from the new array.</p>\n<p>You can increase the array size (100) to get a more precise result. The most precise result will be when you pick the array size that makes every <code>n</code> a whole number.</p>\n<p><strong>Example:</strong></p>\n<p><a href=\"https://jsfiddle.net/o5hmjxd2/28/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/o5hmjxd2/28/</a></p>\n<pre><code>const x = [0,1,2,3,4,5,6,7,8,9];\nconst p = [0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1]\nconst l = 100;\n\nlet y = [];\n\n\nfor (const i = 0; i &lt; x.length; i++) {\n  y = y.concat(new Array(l*p[i]).fill(x[i]));\n}\n\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\n// result\nconsole.log(y);\nconsole.log(y[getRandomInt(y.length - 1)])\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user17233545"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1637242933,"creation_date":1637242933,"answer_id":70020920,"question_id":70019852,"body_markdown":"Try this.\r\n\r\n    public class DistributedProbability {\r\n\r\n        final NavigableMap&lt;Double, Integer&gt; distribution = new TreeMap&lt;&gt;();\r\n        final Random random = new Random();\r\n        public final int size;\r\n        public final double max;\r\n\r\n        public DistributedProbability(double... rates) {\r\n            double sum = 0;\r\n            int index = 0;\r\n            for (double rate : rates) {\r\n                sum += rate;\r\n                this.distribution.put(sum, index++);\r\n            }\r\n            size = index;\r\n            max = sum;\r\n        }\r\n\r\n        int next() {\r\n            double d = random.nextDouble(max);\r\n            Entry&lt;Double, Integer&gt; entry = distribution.higherEntry(d);\r\n            return entry.getValue();\r\n        }\r\n    }\r\n\r\nand\r\n\r\n    public static void main(String[] args) {\r\n        DistributedProbability d = new DistributedProbability(\r\n            50, 30, 12, 2.5, 0.85, 4.65);\r\n\r\n        int[] counts = new int[d.size];\r\n        for (int i = 0; i &lt; 100000; ++i)\r\n            ++counts[d.next()];\r\n\r\n        System.out.println(Arrays.toString(counts));\r\n    }\r\n\r\noutput:\r\n\r\n    [49844, 30101, 12023, 2512, 845, 4675]\r\n","title":"How to pick an element from an array with a probability distribution?","body":"<p>Try this.</p>\n<pre><code>public class DistributedProbability {\n\n    final NavigableMap&lt;Double, Integer&gt; distribution = new TreeMap&lt;&gt;();\n    final Random random = new Random();\n    public final int size;\n    public final double max;\n\n    public DistributedProbability(double... rates) {\n        double sum = 0;\n        int index = 0;\n        for (double rate : rates) {\n            sum += rate;\n            this.distribution.put(sum, index++);\n        }\n        size = index;\n        max = sum;\n    }\n\n    int next() {\n        double d = random.nextDouble(max);\n        Entry&lt;Double, Integer&gt; entry = distribution.higherEntry(d);\n        return entry.getValue();\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>public static void main(String[] args) {\n    DistributedProbability d = new DistributedProbability(\n        50, 30, 12, 2.5, 0.85, 4.65);\n\n    int[] counts = new int[d.size];\n    for (int i = 0; i &lt; 100000; ++i)\n        ++counts[d.next()];\n\n    System.out.println(Arrays.toString(counts));\n}\n</code></pre>\n<p>output:</p>\n<pre><code>[49844, 30101, 12023, 2512, 845, 4675]\n</code></pre>\n"}],"owner":{"account_id":20206009,"reputation":251,"user_id":14820406,"display_name":"alejandroMAD"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1805,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1637254065,"accepted_answer_id":70020299,"answer_count":3,"score":0,"last_activity_date":1695402233,"creation_date":1637238482,"question_id":70019852,"body_markdown":"I have a mathematical/programming question about a problem I am trying to solve. Given this simple array of integers:\r\n\r\n```int[] goals = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};```\r\n\r\nDo you know how could I implement a function to pick an element from the array given a distributed probability like the one from this example?:\r\n\r\n- The probability of picking goals[0] is 50%\r\n- The probability of picking goals[1] is 30%\r\n- The probability of picking goals[2] is 12%\r\n- The probability of picking goals[3] is 2.5%\r\n- The probability of picking goals[4] is 0.85%\r\n- etcetera\r\n\r\nThe probability distribution is of my choice, hardcoded to keep things simple.\r\n\r\nThank you very much for your inputs!","title":"How to pick an element from an array with a probability distribution?","body":"<p>I have a mathematical/programming question about a problem I am trying to solve. Given this simple array of integers:</p>\n<p><code>int[] goals = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10};</code></p>\n<p>Do you know how could I implement a function to pick an element from the array given a distributed probability like the one from this example?:</p>\n<ul>\n<li>The probability of picking goals[0] is 50%</li>\n<li>The probability of picking goals[1] is 30%</li>\n<li>The probability of picking goals[2] is 12%</li>\n<li>The probability of picking goals[3] is 2.5%</li>\n<li>The probability of picking goals[4] is 0.85%</li>\n<li>etcetera</li>\n</ul>\n<p>The probability distribution is of my choice, hardcoded to keep things simple.</p>\n<p>Thank you very much for your inputs!</p>\n"},{"tags":["java","gradle","tomcat","build.gradle"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1695392138,"post_id":77156447,"comment_id":136022467,"body_markdown":"Are you sure that that contextPath value for gretty actually works? Where does your application physically end up at runtime?","body":"Are you sure that that contextPath value for gretty actually works? Where does your application physically end up at runtime?"},{"owner":{"account_id":24718870,"reputation":33,"user_id":18608248,"display_name":"helloi"},"score":0,"creation_date":1695400361,"post_id":77156447,"comment_id":136024170,"body_markdown":"@nitind It&#39;s supposed to render a jsp page","body":"@nitind It&#39;s supposed to render a jsp page"},{"owner":{"account_id":24718870,"reputation":33,"user_id":18608248,"display_name":"helloi"},"score":0,"creation_date":1695400601,"post_id":77156447,"comment_id":136024208,"body_markdown":"@nitind I&#39;ve edited the question, please verify","body":"@nitind I&#39;ve edited the question, please verify"}],"owner":{"account_id":24718870,"reputation":33,"user_id":18608248,"display_name":"helloi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695400555,"creation_date":1695375225,"question_id":77156447,"body_markdown":"I have a Spring application. I&#39;m trying to run it on localhost:8080 using gradle. This is the build.gradle file:\r\n```\r\nplugins {\r\n    id &#39;war&#39;\r\n    id &#39;org.gretty&#39; version &#39;3.0.5&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    providedCompile &#39;javax.servlet:javax.servlet-api:4.0.1&#39;\r\n    gretty &#39;org.apache.tomcat.embed:tomcat-embed-core:9.0.54&#39;\r\n}\r\n\r\ngretty {\r\n    httpPort = 8080  // Port on which the embedded Tomcat server will listen\r\n    contextPath = &#39;/&#39;  // Context path for your application\r\n    servletContainer = &#39;tomcat9&#39;  \r\n}\r\n```\r\nThis is the web.xml configuration:\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\nxmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\nxmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;\r\nxsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee\r\nhttp://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; version=&quot;2.5&quot;&gt;\r\n\t \r\n    \r\n    &lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;V2_GACD&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;com.V2_GACDServlet&lt;/servlet-class&gt;\r\n\t&lt;/servlet&gt;\r\n\t&lt;servlet-mapping&gt;\r\n\t\t&lt;servlet-name&gt;V2_GACD&lt;/servlet-name&gt;\r\n\t\t&lt;url-pattern&gt;/v2_gacd&lt;/url-pattern&gt;\r\n\t&lt;/servlet-mapping&gt;\r\n\t\r\n\t\r\n\t&lt;context-param&gt;\r\n\t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n\t\t&lt;param-value&gt;/WEB-INF/dispatch-servlet.xml&lt;/param-value&gt;\r\n\t&lt;/context-param&gt;\r\n\r\n\t&lt;servlet&gt;\r\n\t\t&lt;servlet-name&gt;dispatch&lt;/servlet-name&gt;\r\n\t\t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n\t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n\t&lt;/servlet&gt;\r\n\t&lt;servlet-mapping&gt;\r\n\t\t&lt;servlet-name&gt;dispatch&lt;/servlet-name&gt;\r\n\t\t&lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n\t&lt;/servlet-mapping&gt; \r\n```\r\n\r\nThis starts the Tomcat server, but when I access the url `http://localhost:8080/`, it gives me a 404 error. But when I ran the same in app engine, it was showing the index.jsp page as soon as the base url is hit. What could be the issue? \r\n\r\nEdit:\r\nThis is the file that has the code that will return a jsp page\r\n```package com.action;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.io.OutputStreamWriter;\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.URL;\r\nimport java.text.ParseException;\r\nimport java.util.HashMap;\r\nimport java.util.ResourceBundle;\r\nimport java.util.Set;\r\nimport java.util.stream.Collectors;\r\nimport java.util.Properties;\r\n\r\nimport javax.servlet.ServletOutputStream;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\nimport javax.mail.Message;\r\nimport javax.mail.MessagingException;\r\nimport javax.mail.Session;\r\nimport javax.mail.Transport;\r\nimport javax.mail.internet.AddressException;\r\nimport javax.mail.internet.InternetAddress;\r\nimport javax.mail.internet.MimeMessage;\r\n\r\nimport org.apache.commons.io.IOUtils;\r\nimport org.apache.logging.log4j.LogManager;\r\nimport org.apache.logging.log4j.Logger;\r\n\r\nimport org.codehaus.jackson.JsonGenerator;\r\nimport org.codehaus.jackson.JsonParser;\r\nimport org.codehaus.jackson.map.DeserializationConfig;\r\nimport org.codehaus.jackson.map.ObjectMapper;\r\nimport org.codehaus.jackson.map.SerializationConfig;\r\nimport org.codehaus.jackson.map.annotate.JsonSerialize;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestHeader;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.ResponseBody;\r\n\r\nimport com.fullauth.api.enums.OauthResponseType;\r\nimport com.fullauth.api.exception.TokenResponseException;\r\nimport com.fullauth.api.model.oauth.OauthAccessToken;\r\nimport com.fullauth.api.service.FullAuthOauthService;\r\nimport com.google.appengine.labs.repackaged.org.json.JSONArray;\r\nimport com.google.appengine.labs.repackaged.org.json.JSONObject;\r\nimport com.service.AgentHelper;\r\n//import com.service.CallData;\r\nimport com.service.GoClockService;\r\n//import com.service.PMF;\r\nimport com.service.RequestHandler;\r\nimport com.service.StackTraceWriter;\r\nimport com.google.cloud.kms.v1.*;\r\nimport com.google.cloud.kms.v1.KeyManagementServiceClient;\r\nimport com.google.protobuf.ByteString;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.File; \r\n\r\n@Controller\r\n@RequestMapping(&quot;/AgentInfoAction&quot;)\r\npublic class AgentInfoAction {\r\n\tResourceBundle resourceBundle = ResourceBundle\r\n\t\t\t.getBundle(&quot;ApplicationResources&quot;);\r\n\tString sb_path = resourceBundle.getString(&quot;sb.domain.name&quot;);\r\n\r\n\tprivate static final Logger logger = LogManager.getLogger(AgentInfoAction.class\r\n\t\t\t.getPackage().getName());\r\n\t\r\n\tstatic final ObjectMapper mapper = new ObjectMapper();\r\n\tstatic {\r\n\t\tmapper.configure(JsonGenerator.Feature.QUOTE_FIELD_NAMES, true);\r\n\r\n\t\tmapper.configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\r\n\t\tmapper.configure(SerializationConfig.Feature.WRITE_DATES_AS_TIMESTAMPS,\r\n\t\t\t\ttrue);\r\n\t\tmapper.configure(\r\n\t\t\t\tDeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n\t\tmapper.getSerializationConfig().setSerializationInclusion(\r\n\t\t\t\tJsonSerialize.Inclusion.NON_NULL);\r\n\t}\r\n\r\n\t@ResponseBody\r\n\t@RequestMapping(&quot;/saveAgentInfo&quot;)\r\n\tpublic String saveAgentInfo(HttpServletRequest req, HttpServletResponse res) throws IOException {\r\n//\t\tString agent = req.getParameter(&quot;agent&quot;);\r\n\t\tString state = req.getParameter(&quot;state&quot;);\r\n//\t\tString readypercent = req.getParameter(&quot;readypercent&quot;);\r\n//\t\tString agentname = req.getParameter(&quot;agentname&quot;);\r\n//\t\tString v2login = req.getParameter(&quot;v2login&quot;);\r\n\t\tString email = req.getParameter(&quot;email&quot;);\r\n\t\tString sessionId = req.getParameter(&quot;sessionId&quot;);\r\n\t\tString _uniquePin = req.getParameter(&quot;uniquePin&quot;) == null ? req\r\n\t\t\t\t.getParameter(&quot;uniquepin&quot;) : req.getParameter(&quot;uniquePin&quot;);\r\n\t\tString _eventLongTime = req.getParameter(&quot;eventTime&quot;) == null ?  String.valueOf(System.currentTimeMillis()) : req.getParameter(&quot;eventTime&quot;);//req.getParameter(&quot;eventLongTime&quot;);\r\n\t\t//String _eventLongTime = String.valueOf(System.currentTimeMillis()) ;\t\r\n\t\tString clockingStatus = req.getParameter(&quot;clockingStatus&quot;);\r\n\t\tString contactId = req.getParameter(&quot;contactId&quot;);\r\n\t\tString response = &quot;&quot;;\r\n\t\t//logger.info(&quot;req is : &quot;+req);\r\n\t\t//logger.info(&quot;isMissedStatus --=&gt; &quot;+req.getParameter(&quot;isMissedStatus&quot;));\r\n\t\t\r\n\t\tString serverAccessToken = new AgentHelper().getOauthAccessTokenWithJWT().getAccessToken();\r\n\t\ttry {\r\n\t\t\tHashMap&lt;String, String&gt; userMetaData = new HashMap&lt;String, String&gt;();\r\n\t\t\tuserMetaData.put(&quot;country&quot;, req.getHeader(&quot;X-AppEngine-Country&quot;));\r\n\t\t\tuserMetaData.put(&quot;region&quot;, req.getHeader(&quot;X-AppEngine-Region&quot;));\r\n\t\t\tuserMetaData.put(&quot;city&quot;, req.getHeader(&quot;X-AppEngine-City&quot;));\r\n\t\t\tuserMetaData.put(&quot;latlong&quot;,\r\n\t\t\t\t\treq.getHeader(&quot;X-AppEngine-CityLatLong&quot;));\r\n\t\t\tresponse = new GoClockService().trackEvent(state,\r\n\t\t\t\t\treq.getRemoteAddr(), email, sessionId,\r\n\t\t\t\t\tuserMetaData, _uniquePin, _eventLongTime, clockingStatus,contactId,serverAccessToken);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn response;\r\n\t}\r\n\r\n\t@RequestMapping(&quot;/ccpView&quot;)\r\n\tpublic String ccpView(HttpServletRequest request,\r\n\t\t\tHttpServletResponse response) {\r\n\t\treturn &quot;mainpage&quot;;\r\n\t}\r\n```\r\n    `mainpage` will return the index.jsp page. Works fine for app engine. Even tried to hit the exact url with /AgentInfoAction/ccpView at the end of localhost:8080, nothing seems to be working","title":"Tomcat server sends 404 error when hitting the url","body":"<p>I have a Spring application. I'm trying to run it on localhost:8080 using gradle. This is the build.gradle file:</p>\n<pre><code>plugins {\n    id 'war'\n    id 'org.gretty' version '3.0.5'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    providedCompile 'javax.servlet:javax.servlet-api:4.0.1'\n    gretty 'org.apache.tomcat.embed:tomcat-embed-core:9.0.54'\n}\n\ngretty {\n    httpPort = 8080  // Port on which the embedded Tomcat server will listen\n    contextPath = '/'  // Context path for your application\n    servletContainer = 'tomcat9'  \n}\n</code></pre>\n<p>This is the web.xml configuration:</p>\n<pre><code>&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\nxmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;\nxsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee\nhttp://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; version=&quot;2.5&quot;&gt;\n     \n    \n    &lt;servlet&gt;\n        &lt;servlet-name&gt;V2_GACD&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;com.V2_GACDServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;V2_GACD&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/v2_gacd&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    \n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/dispatch-servlet.xml&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;dispatch&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;dispatch&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt; \n</code></pre>\n<p>This starts the Tomcat server, but when I access the url <code>http://localhost:8080/</code>, it gives me a 404 error. But when I ran the same in app engine, it was showing the index.jsp page as soon as the base url is hit. What could be the issue?</p>\n<p>Edit:\nThis is the file that has the code that will return a jsp page</p>\n<pre><code>\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.io.UnsupportedEncodingException;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.text.ParseException;\nimport java.util.HashMap;\nimport java.util.ResourceBundle;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport java.util.Properties;\n\nimport javax.servlet.ServletOutputStream;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.Session;\nimport javax.mail.Transport;\nimport javax.mail.internet.AddressException;\nimport javax.mail.internet.InternetAddress;\nimport javax.mail.internet.MimeMessage;\n\nimport org.apache.commons.io.IOUtils;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\n\nimport org.codehaus.jackson.JsonGenerator;\nimport org.codehaus.jackson.JsonParser;\nimport org.codehaus.jackson.map.DeserializationConfig;\nimport org.codehaus.jackson.map.ObjectMapper;\nimport org.codehaus.jackson.map.SerializationConfig;\nimport org.codehaus.jackson.map.annotate.JsonSerialize;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestHeader;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport com.fullauth.api.enums.OauthResponseType;\nimport com.fullauth.api.exception.TokenResponseException;\nimport com.fullauth.api.model.oauth.OauthAccessToken;\nimport com.fullauth.api.service.FullAuthOauthService;\nimport com.google.appengine.labs.repackaged.org.json.JSONArray;\nimport com.google.appengine.labs.repackaged.org.json.JSONObject;\nimport com.service.AgentHelper;\n//import com.service.CallData;\nimport com.service.GoClockService;\n//import com.service.PMF;\nimport com.service.RequestHandler;\nimport com.service.StackTraceWriter;\nimport com.google.cloud.kms.v1.*;\nimport com.google.cloud.kms.v1.KeyManagementServiceClient;\nimport com.google.protobuf.ByteString;\n\nimport java.io.BufferedReader;\nimport java.io.File; \n\n@Controller\n@RequestMapping(&quot;/AgentInfoAction&quot;)\npublic class AgentInfoAction {\n    ResourceBundle resourceBundle = ResourceBundle\n            .getBundle(&quot;ApplicationResources&quot;);\n    String sb_path = resourceBundle.getString(&quot;sb.domain.name&quot;);\n\n    private static final Logger logger = LogManager.getLogger(AgentInfoAction.class\n            .getPackage().getName());\n    \n    static final ObjectMapper mapper = new ObjectMapper();\n    static {\n        mapper.configure(JsonGenerator.Feature.QUOTE_FIELD_NAMES, true);\n\n        mapper.configure(JsonParser.Feature.ALLOW_UNQUOTED_FIELD_NAMES, true);\n        mapper.configure(SerializationConfig.Feature.WRITE_DATES_AS_TIMESTAMPS,\n                true);\n        mapper.configure(\n                DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        mapper.getSerializationConfig().setSerializationInclusion(\n                JsonSerialize.Inclusion.NON_NULL);\n    }\n\n    @ResponseBody\n    @RequestMapping(&quot;/saveAgentInfo&quot;)\n    public String saveAgentInfo(HttpServletRequest req, HttpServletResponse res) throws IOException {\n//      String agent = req.getParameter(&quot;agent&quot;);\n        String state = req.getParameter(&quot;state&quot;);\n//      String readypercent = req.getParameter(&quot;readypercent&quot;);\n//      String agentname = req.getParameter(&quot;agentname&quot;);\n//      String v2login = req.getParameter(&quot;v2login&quot;);\n        String email = req.getParameter(&quot;email&quot;);\n        String sessionId = req.getParameter(&quot;sessionId&quot;);\n        String _uniquePin = req.getParameter(&quot;uniquePin&quot;) == null ? req\n                .getParameter(&quot;uniquepin&quot;) : req.getParameter(&quot;uniquePin&quot;);\n        String _eventLongTime = req.getParameter(&quot;eventTime&quot;) == null ?  String.valueOf(System.currentTimeMillis()) : req.getParameter(&quot;eventTime&quot;);//req.getParameter(&quot;eventLongTime&quot;);\n        //String _eventLongTime = String.valueOf(System.currentTimeMillis()) ;  \n        String clockingStatus = req.getParameter(&quot;clockingStatus&quot;);\n        String contactId = req.getParameter(&quot;contactId&quot;);\n        String response = &quot;&quot;;\n        //logger.info(&quot;req is : &quot;+req);\n        //logger.info(&quot;isMissedStatus --=&gt; &quot;+req.getParameter(&quot;isMissedStatus&quot;));\n        \n        String serverAccessToken = new AgentHelper().getOauthAccessTokenWithJWT().getAccessToken();\n        try {\n            HashMap&lt;String, String&gt; userMetaData = new HashMap&lt;String, String&gt;();\n            userMetaData.put(&quot;country&quot;, req.getHeader(&quot;X-AppEngine-Country&quot;));\n            userMetaData.put(&quot;region&quot;, req.getHeader(&quot;X-AppEngine-Region&quot;));\n            userMetaData.put(&quot;city&quot;, req.getHeader(&quot;X-AppEngine-City&quot;));\n            userMetaData.put(&quot;latlong&quot;,\n                    req.getHeader(&quot;X-AppEngine-CityLatLong&quot;));\n            response = new GoClockService().trackEvent(state,\n                    req.getRemoteAddr(), email, sessionId,\n                    userMetaData, _uniquePin, _eventLongTime, clockingStatus,contactId,serverAccessToken);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return response;\n    }\n\n    @RequestMapping(&quot;/ccpView&quot;)\n    public String ccpView(HttpServletRequest request,\n            HttpServletResponse response) {\n        return &quot;mainpage&quot;;\n    }\n</code></pre>\n<pre><code>`mainpage` will return the index.jsp page. Works fine for app engine. Even tried to hit the exact url with /AgentInfoAction/ccpView at the end of localhost:8080, nothing seems to be working\n</code></pre>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695253045,"post_id":77146414,"comment_id":136001206,"body_markdown":"How do you even see the drawn rectangles since they are all surrounded by filled rectangles of the same color? The only place you&#39;ll see an edge is at the edge of the entire board.","body":"How do you even see the drawn rectangles since they are all surrounded by filled rectangles of the same color? The only place you&#39;ll see an edge is at the edge of the entire board."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1695253106,"post_id":77146414,"comment_id":136001213,"body_markdown":"Myself, I wouldn&#39;t even draw the grid as you&#39;re doing but rather would use a grid of JPanels placed in a GridLayout. My reasoning is that I want the chess square to be able to hold a chess piece (probably a JLabel with an image icon), and a JPanel would work perfectly for this.","body":"Myself, I wouldn&#39;t even draw the grid as you&#39;re doing but rather would use a grid of JPanels placed in a GridLayout. My reasoning is that I want the chess square to be able to hold a chess piece (probably a JLabel with an image icon), and a JPanel would work perfectly for this."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1695253200,"post_id":77146414,"comment_id":136001220,"body_markdown":"`private int rectX = 0;     private int rectY = 0;` Those variables are used in the painting method and should be initialized in the painting method, otherwise they never reset to 0, the next time the panel is painted. So the panel simply gets cleared by the super.paintComponent(...) statement. Also, you should not be using static variables. Your painting panel should not need to reference the frame directly.","body":"<code>private int rectX = 0;     private int rectY = 0;</code> Those variables are used in the painting method and should be initialized in the painting method, otherwise they never reset to 0, the next time the panel is painted. So the panel simply gets cleared by the super.paintComponent(...) statement. Also, you should not be using static variables. Your painting panel should not need to reference the frame directly."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1695253205,"post_id":77146414,"comment_id":136001221,"body_markdown":"[For example](https://stackoverflow.com/a/21432607/522444)","body":"<a href=\"https://stackoverflow.com/a/21432607/522444\">For example</a>"},{"owner":{"account_id":23547612,"reputation":23,"user_id":17590799,"display_name":"grenade05"},"score":0,"creation_date":1695253258,"post_id":77146414,"comment_id":136001225,"body_markdown":"@HovercraftFullOfEels That&#39;s what I was thinking of doing instead. I&#39;ll try doing that instead, and post an update when done.","body":"@HovercraftFullOfEels That&#39;s what I was thinking of doing instead. I&#39;ll try doing that instead, and post an update when done."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1695253400,"post_id":77146414,"comment_id":136001238,"body_markdown":"`private static JFrame frame; private static Container contentPanel;` are code smells and generally a bad idea","body":"<code>private static JFrame frame; private static Container contentPanel;</code> are code smells and generally a bad idea"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1695253602,"post_id":77146414,"comment_id":136001257,"body_markdown":"@HovercraftFullOfEels *How do you even see the drawn rectangle* - the code uses a `drawRect(...)` and `fillRect(...)`. So the background of the drawRect will be the background of the panel. Tricky, but the painting logic is still wrong (it paints columns of the same colour not alternating squares).","body":"@HovercraftFullOfEels <i>How do you even see the drawn rectangle</i> - the code uses a <code>drawRect(...)</code> and <code>fillRect(...)</code>. So the background of the drawRect will be the background of the panel. Tricky, but the painting logic is still wrong (it paints columns of the same colour not alternating squares)."}],"answers":[{"tags":[],"owner":{"account_id":23547612,"reputation":23,"user_id":17590799,"display_name":"grenade05"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695400546,"creation_date":1695261611,"answer_id":77146792,"question_id":77146414,"body_markdown":"Solution suggested by [@Hovercraft Full Of Eels][1]\r\n\r\nI took some personal liberties in formatting the code, but this idea worked. I have ActionListener there for when I add the game&#39;s functionality.\r\n\r\n```java\r\n@SuppressWarnings(&quot;serial&quot;)\r\npublic class Main extends JPanel implements ActionListener {\r\n\t\r\n\tprivate static final int ranks = 8;\r\n\tprivate static final int files = ranks;\r\n\tprivate static final Dimension squareSize = new Dimension(80, 80);\r\n\tprivate static final Color lightSquareColor = Color.gray;\r\n\tprivate static final Color darkSquareColor = Color.black;\r\n\t\r\n\tprivate static List&lt;JPanel&gt; boardSquares = new ArrayList&lt;JPanel&gt;();\r\n\t\r\n\tprivate JPanel chessBoard = new JPanel(new GridLayout(ranks, files));\r\n\t\r\n\tpublic Main() {\r\n\t\t// create ranks/files\r\n\t\tfor (int rank = 0; rank &lt; ranks; rank++) {\r\n\t\t\tfor (int file = 0; file &lt; files; file++) {\r\n\t\t\t\t// create a square and set its size/color\r\n\t\t\t\tJPanel square = new JPanel();\r\n\t\t\t\tsquare.setPreferredSize(squareSize);\r\n\t\t\t\tColor squareColor = (rank % 2 == file % 2) ? lightSquareColor : darkSquareColor;\r\n\t\t\t\tsquare.setBackground(squareColor);\r\n\t\t\t\t// add square to the chess board and to the list of squares for game functionality purposes\r\n\t\t\t\tchessBoard.add(square);\r\n\t\t\t\tboardSquares.add(square);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic void createGrid() {\r\n\t\t// define layout for main panel\r\n\t\tsetLayout(new GridBagLayout());\r\n\t\tGridBagConstraints gbConstraints = new GridBagConstraints();\r\n\t\t\r\n\t\t// left-side rank labels\r\n\t\tgbConstraints.gridx = 0;\r\n\t\tgbConstraints.gridy = 1;\r\n\t\tgbConstraints.gridwidth = 1;\r\n\t\tgbConstraints.gridheight = 1;\r\n\t\tgbConstraints.weightx = 0.0;\r\n\t\tgbConstraints.weighty = 0.0;\r\n\t\tgbConstraints.fill = GridBagConstraints.BOTH;\r\n\t\tgbConstraints.anchor = GridBagConstraints.WEST;\r\n\t\tgbConstraints.insets = new Insets(0, 10, 0, 10);\r\n\t\tadd(createRankPanel(), gbConstraints);\r\n\t\t\r\n\t\t// right-size rank labels\r\n\t\tgbConstraints.gridx = 2;\r\n\t\tgbConstraints.anchor = GridBagConstraints.EAST;\r\n\t\tadd(createRankPanel(), gbConstraints);\r\n\t\t\r\n\t\t// top file labels\r\n\t\tgbConstraints.gridx = 1;\r\n\t\tgbConstraints.gridy = 0;\r\n\t\tgbConstraints.anchor = GridBagConstraints.SOUTH;\r\n\t\tgbConstraints.insets = new Insets(5, 0, 5, 0);\r\n\t\tadd(createFilePanel(), gbConstraints);\r\n\t\t\r\n\t\t// bottom file labels\r\n\t\tgbConstraints.gridy = 2;\r\n\t\tgbConstraints.anchor = GridBagConstraints.NORTH;\r\n\t\tadd(createFilePanel(), gbConstraints);\r\n\t\t\r\n\t\t// the chess board itself\r\n\t\tgbConstraints.gridx = 1;\r\n\t\tgbConstraints.gridy = 1;\r\n\t\tgbConstraints.anchor = GridBagConstraints.CENTER;\r\n\t\tgbConstraints.insets = new Insets(0, 0, 0 ,0);\r\n\t\tadd(chessBoard, gbConstraints);\r\n\t}\r\n\t\r\n\t// creates a files panel (for labeling) and returns the panel\r\n\tprivate JPanel createFilePanel() {\r\n\t\tJPanel filePanel = new JPanel(new GridLayout(1,0));\r\n\t\tfor (int i = 0; i &lt; files; i++) {\r\n\t\t\t// set current letter by increasing its ASCII value\r\n\t\t\tchar fileLetter = (char) (&#39;A&#39; + i);\r\n\t\t\tfilePanel.add(new JLabel(String.valueOf(fileLetter), SwingConstants.CENTER));\r\n\t\t}\r\n\t\treturn filePanel;\r\n\t}\r\n\t\r\n\t// creates a ranks panel (for labeling) and returns the panel\r\n\tprivate JPanel createRankPanel() {\r\n\t\tJPanel rankPanel = new JPanel(new GridLayout(0,1));\r\n\t\tfor (int i = 0; i &lt; ranks; i++) {\r\n\t\t\t// count down rather than up\r\n\t\t\tint currentRow = ranks - i;\r\n\t\t\trankPanel.add(new JLabel(String.valueOf(currentRow)));\r\n\t\t}\r\n\t\treturn rankPanel;\r\n\t}\r\n\r\n\t// method to start app\r\n\tprivate static void createAndShowGui() {\r\n\t\t// calls\r\n\t\tMain mainPanel = new Main();\r\n\t\tmainPanel.createGrid();\r\n\t\t\r\n\t\t// make and configure window\r\n\t\tJFrame frame = new JFrame(&quot;Java Chess v1.0&quot;);\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tframe.getContentPane().add(mainPanel);\r\n\t\tframe.pack();\r\n\t\tframe.setLocationByPlatform(true);\r\n\t\tframe.setVisible(true);\r\n\t}\r\n\t\r\n\t// start the app\r\n\tpublic static void main(String[] args) {\r\n\t\tSwingUtilities.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\tcreateAndShowGui();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\r\n\t}\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/522444/hovercraft-full-of-eels","title":"Rectangles created from java.awt.Graphics dissapear shortly after window is launched","body":"<p>Solution suggested by <a href=\"https://stackoverflow.com/users/522444/hovercraft-full-of-eels\">@Hovercraft Full Of Eels</a></p>\n<p>I took some personal liberties in formatting the code, but this idea worked. I have ActionListener there for when I add the game's functionality.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SuppressWarnings(&quot;serial&quot;)\npublic class Main extends JPanel implements ActionListener {\n    \n    private static final int ranks = 8;\n    private static final int files = ranks;\n    private static final Dimension squareSize = new Dimension(80, 80);\n    private static final Color lightSquareColor = Color.gray;\n    private static final Color darkSquareColor = Color.black;\n    \n    private static List&lt;JPanel&gt; boardSquares = new ArrayList&lt;JPanel&gt;();\n    \n    private JPanel chessBoard = new JPanel(new GridLayout(ranks, files));\n    \n    public Main() {\n        // create ranks/files\n        for (int rank = 0; rank &lt; ranks; rank++) {\n            for (int file = 0; file &lt; files; file++) {\n                // create a square and set its size/color\n                JPanel square = new JPanel();\n                square.setPreferredSize(squareSize);\n                Color squareColor = (rank % 2 == file % 2) ? lightSquareColor : darkSquareColor;\n                square.setBackground(squareColor);\n                // add square to the chess board and to the list of squares for game functionality purposes\n                chessBoard.add(square);\n                boardSquares.add(square);\n            }\n        }\n    }\n    \n    public void createGrid() {\n        // define layout for main panel\n        setLayout(new GridBagLayout());\n        GridBagConstraints gbConstraints = new GridBagConstraints();\n        \n        // left-side rank labels\n        gbConstraints.gridx = 0;\n        gbConstraints.gridy = 1;\n        gbConstraints.gridwidth = 1;\n        gbConstraints.gridheight = 1;\n        gbConstraints.weightx = 0.0;\n        gbConstraints.weighty = 0.0;\n        gbConstraints.fill = GridBagConstraints.BOTH;\n        gbConstraints.anchor = GridBagConstraints.WEST;\n        gbConstraints.insets = new Insets(0, 10, 0, 10);\n        add(createRankPanel(), gbConstraints);\n        \n        // right-size rank labels\n        gbConstraints.gridx = 2;\n        gbConstraints.anchor = GridBagConstraints.EAST;\n        add(createRankPanel(), gbConstraints);\n        \n        // top file labels\n        gbConstraints.gridx = 1;\n        gbConstraints.gridy = 0;\n        gbConstraints.anchor = GridBagConstraints.SOUTH;\n        gbConstraints.insets = new Insets(5, 0, 5, 0);\n        add(createFilePanel(), gbConstraints);\n        \n        // bottom file labels\n        gbConstraints.gridy = 2;\n        gbConstraints.anchor = GridBagConstraints.NORTH;\n        add(createFilePanel(), gbConstraints);\n        \n        // the chess board itself\n        gbConstraints.gridx = 1;\n        gbConstraints.gridy = 1;\n        gbConstraints.anchor = GridBagConstraints.CENTER;\n        gbConstraints.insets = new Insets(0, 0, 0 ,0);\n        add(chessBoard, gbConstraints);\n    }\n    \n    // creates a files panel (for labeling) and returns the panel\n    private JPanel createFilePanel() {\n        JPanel filePanel = new JPanel(new GridLayout(1,0));\n        for (int i = 0; i &lt; files; i++) {\n            // set current letter by increasing its ASCII value\n            char fileLetter = (char) ('A' + i);\n            filePanel.add(new JLabel(String.valueOf(fileLetter), SwingConstants.CENTER));\n        }\n        return filePanel;\n    }\n    \n    // creates a ranks panel (for labeling) and returns the panel\n    private JPanel createRankPanel() {\n        JPanel rankPanel = new JPanel(new GridLayout(0,1));\n        for (int i = 0; i &lt; ranks; i++) {\n            // count down rather than up\n            int currentRow = ranks - i;\n            rankPanel.add(new JLabel(String.valueOf(currentRow)));\n        }\n        return rankPanel;\n    }\n\n    // method to start app\n    private static void createAndShowGui() {\n        // calls\n        Main mainPanel = new Main();\n        mainPanel.createGrid();\n        \n        // make and configure window\n        JFrame frame = new JFrame(&quot;Java Chess v1.0&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().add(mainPanel);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n    \n    // start the app\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                createAndShowGui();\n            }\n        });\n    }\n    \n    \n    @Override\n    public void actionPerformed(ActionEvent e) {\n        // TODO Auto-generated method stub\n        \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695334818,"creation_date":1695330722,"answer_id":77153671,"question_id":77146414,"body_markdown":"Utilize a _[GridLayout](https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/GridLayout.html)_ to create the pattern.\r\n\r\n```java\r\npublic class Main extends JPanel {\r\n\r\n    private static JFrame frame;\r\n    private static Container contentPanel;\r\n\r\n    Main() {\r\n        draw();\r\n    }\r\n\r\n    // draw game textures\r\n    private void draw() {\r\n        setLayout(new GridLayout(8, 8));\r\n        double w = getPreferredSize().getWidth(),\r\n               h = getPreferredSize().getHeight();\r\n        Dimension d = new Dimension((int) (w / 8), (int) (h / 8));\r\n        Color cb = Color.black, cw = Color.white;\r\n        boolean b = true;\r\n        JLabel label;\r\n        for (int i = 0; i &lt; 8 * 8; i++) {\r\n            label = new JLabel();\r\n            label.setPreferredSize(d);\r\n            b = i % 8 == 0 == b;\r\n            label.setBackground(b ? cb : cw);\r\n            label.setOpaque(true);\r\n            add(label);\r\n        }\r\n    }\r\n\r\n    // define preferred size\r\n    @Override\r\n    public Dimension getPreferredSize() {\r\n        return new Dimension(800, 800);\r\n    }\r\n\r\n    // create GUI\r\n    private static void createAndShowGui() {\r\n        Main main = new Main();\r\n\r\n        frame = new JFrame(&quot;Java Chess V1.0&quot;);\r\n        contentPanel = frame.getContentPane();\r\n        contentPanel.add(main);\r\n\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.pack();\r\n        frame.setLocationByPlatform(true);\r\n        frame.setVisible(true);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(new Runnable() {\r\n            public void run() {\r\n                createAndShowGui();\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\n\r\n&lt;a href=&quot;https://i.stack.imgur.com/exsko.png&quot;&gt;&lt;img src=&quot;https://i.stack.imgur.com/exsko.png&quot; width=&quot;300&quot; height=&quot;332&quot; /&gt;&lt;/a&gt;\r\n\r\nHere is the _Java_ tutorial on _GridLayout_.\r\n- _[How to Use GridLayout (The Java&amp;trade; Tutorials &amp;gt; Creating a GUI With Swing &amp;gt; Laying Out Components Within a Container)](https://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)_.","title":"Rectangles created from java.awt.Graphics dissapear shortly after window is launched","body":"<p>Utilize a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/java/awt/GridLayout.html\" rel=\"nofollow noreferrer\">GridLayout</a></em> to create the pattern.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main extends JPanel {\n\n    private static JFrame frame;\n    private static Container contentPanel;\n\n    Main() {\n        draw();\n    }\n\n    // draw game textures\n    private void draw() {\n        setLayout(new GridLayout(8, 8));\n        double w = getPreferredSize().getWidth(),\n               h = getPreferredSize().getHeight();\n        Dimension d = new Dimension((int) (w / 8), (int) (h / 8));\n        Color cb = Color.black, cw = Color.white;\n        boolean b = true;\n        JLabel label;\n        for (int i = 0; i &lt; 8 * 8; i++) {\n            label = new JLabel();\n            label.setPreferredSize(d);\n            b = i % 8 == 0 == b;\n            label.setBackground(b ? cb : cw);\n            label.setOpaque(true);\n            add(label);\n        }\n    }\n\n    // define preferred size\n    @Override\n    public Dimension getPreferredSize() {\n        return new Dimension(800, 800);\n    }\n\n    // create GUI\n    private static void createAndShowGui() {\n        Main main = new Main();\n\n        frame = new JFrame(&quot;Java Chess V1.0&quot;);\n        contentPanel = frame.getContentPane();\n        contentPanel.add(main);\n\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                createAndShowGui();\n            }\n        });\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/exsko.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/exsko.png\" width=\"300\" height=\"332\" /></a></p>\n<p>Here is the <em>Java</em> tutorial on <em>GridLayout</em>.</p>\n<ul>\n<li><em><a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html\" rel=\"nofollow noreferrer\">How to Use GridLayout (The Java Tutorials &gt; Creating a GUI With Swing &gt; Laying Out Components Within a Container)</a></em>.</li>\n</ul>\n"}],"owner":{"account_id":23547612,"reputation":23,"user_id":17590799,"display_name":"grenade05"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77153671,"answer_count":2,"score":2,"last_activity_date":1695400546,"creation_date":1695252778,"question_id":77146414,"body_markdown":"**Overview:** I&#39;m making a chess game using Swing (Java) and while making the checkered-board pattern, I&#39;ve run into an issue where the rectangles that I created with `drawRect` disappear shortly after the window is launched. \r\n\r\nThis problem does not occur when the rectangles I created are not in a `for` loop, though I am not sure as to why.\r\n\r\n```java\r\npublic class Main extends JPanel {\r\n\t\r\n\tprivate static JFrame frame;\r\n\tprivate static Container contentPanel;\r\n\tprivate int rectX = 0;\r\n\tprivate int rectY = 0;\r\n\t\r\n\t// draw game textures\r\n\t@Override\r\n\tprotected void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\t\r\n\t\t// draw chess board\r\n\t\tfor (int i = 1; i &lt;= 64; i++) {\r\n\t\t\t\r\n\t\t\t// light square\r\n\t\t\tif (i % 2 != 0) {\r\n\t\t\t\tg.drawRect(rectX, rectY, 100, 100);\r\n\t\t\t\trectX += 100;\r\n\t\t\t}\r\n\t\t\t// dark square\r\n\t\t\telse {\r\n\t\t\t\tg.fillRect(rectX, rectY, 100, 100);\r\n\t\t\t\trectX += 100;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// check if the row has ended\r\n\t\t\tif (i % 8 == 0 &amp;&amp; i != 0) {\r\n\t\t\t\trectX = 0;\r\n\t\t\t\trectY += 100;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// define preferred size\r\n\t@Override\r\n\tpublic Dimension getPreferredSize() {\r\n\t\treturn new Dimension(800, 800);\r\n\t}\r\n\t\r\n\t// create GUI\r\n\tprivate static void createAndShowGui() {\r\n\t\tMain main = new Main();\r\n\t\t\r\n\t\tframe = new JFrame(&quot;Java Chess V1.0&quot;);\r\n\t\tcontentPanel = frame.getContentPane();\r\n\t\tcontentPanel.add(main);\r\n\t\t\r\n\t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\t\tframe.pack();\r\n\t\tframe.setLocationByPlatform(true);\r\n\t\tframe.setVisible(true);\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tSwingUtilities.invokeLater(new Runnable() {\r\n\t\t\tpublic void run() {\r\n\t\t\t\tcreateAndShowGui();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n```\r\n\r\n\r\nI&#39;ve tried making individual rectangles instead of using a `for` loop, which works, but I&#39;d rather not have 64 lines of `g.drawRect(...)` if possible.","title":"Rectangles created from java.awt.Graphics dissapear shortly after window is launched","body":"<p><strong>Overview:</strong> I'm making a chess game using Swing (Java) and while making the checkered-board pattern, I've run into an issue where the rectangles that I created with <code>drawRect</code> disappear shortly after the window is launched.</p>\n<p>This problem does not occur when the rectangles I created are not in a <code>for</code> loop, though I am not sure as to why.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main extends JPanel {\n    \n    private static JFrame frame;\n    private static Container contentPanel;\n    private int rectX = 0;\n    private int rectY = 0;\n    \n    // draw game textures\n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        \n        // draw chess board\n        for (int i = 1; i &lt;= 64; i++) {\n            \n            // light square\n            if (i % 2 != 0) {\n                g.drawRect(rectX, rectY, 100, 100);\n                rectX += 100;\n            }\n            // dark square\n            else {\n                g.fillRect(rectX, rectY, 100, 100);\n                rectX += 100;\n            }\n            \n            // check if the row has ended\n            if (i % 8 == 0 &amp;&amp; i != 0) {\n                rectX = 0;\n                rectY += 100;\n            }\n        }\n    }\n    \n    // define preferred size\n    @Override\n    public Dimension getPreferredSize() {\n        return new Dimension(800, 800);\n    }\n    \n    // create GUI\n    private static void createAndShowGui() {\n        Main main = new Main();\n        \n        frame = new JFrame(&quot;Java Chess V1.0&quot;);\n        contentPanel = frame.getContentPane();\n        contentPanel.add(main);\n        \n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n    \n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                createAndShowGui();\n            }\n        });\n    }\n}\n</code></pre>\n<p>I've tried making individual rectangles instead of using a <code>for</code> loop, which works, but I'd rather not have 64 lines of <code>g.drawRect(...)</code> if possible.</p>\n"},{"tags":["java","azure-active-directory","msal"],"owner":{"account_id":29501143,"reputation":1,"user_id":22608135,"display_name":"Sureshbabu AD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695400375,"creation_date":1695305874,"question_id":77151119,"body_markdown":"I am using msal4j-1.13.10.jar file for certification based authentication to Sharepoint app from a web based application.\r\n\r\nSince I have already created the CLIENT ASSERTION using PowerShell, I have used the below code to get the access token in Java. \r\n\r\nThis code is getting compiled well, but while executing the code from application, it is throwing error: \r\n\r\n&gt; java.lang.NoSuchMethodError:\r\n&gt; &#39;com.microsoft.aad.msal4j.ClientApplicationBase$Builder\r\n&gt; com.microsoft.aad.msal4j.ConfidentialClientApplication$Builder.authority(java.lang.String)&#39;\r\n\r\nLater I found that ClientApplicationBase.class file is missing in the msal4j-1.13.10.jar file. Is this a bug in the jar file or did I miss something.\r\n\r\n\r\n        IClientAssertion iClientAssertion = ClientCredentialFactory.createFromClientAssertion(CLIENT_ASSERTION);\r\n        ConfidentialClientApplication cca;\r\n        try {\r\n            cca = ConfidentialClientApplication\r\n                    .builder(CLIENT_ID, iClientAssertion)\r\n                    .authority(AUTHORITY)\r\n                    .build();\r\n\r\n            ClientCredentialParameters parameters =\r\n                    ClientCredentialParameters\r\n                            .builder(SCOPE)\r\n                            .build();\r\n\r\n            IAuthenticationResult result = cca.acquireToken(parameters).join();\r\n            System.out.println(&quot;Access token: &quot; + result.accessToken());\r\n            return result.accessToken();\r\n        } catch (MalformedURLException e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n\r\n\r\n\r\n","title":"ClientApplicationBase java class file is missing msal4j.jar and so NoSuchMethodError is coming at runtime while executing ClientCredentialGrant.java","body":"<p>I am using msal4j-1.13.10.jar file for certification based authentication to Sharepoint app from a web based application.</p>\n<p>Since I have already created the CLIENT ASSERTION using PowerShell, I have used the below code to get the access token in Java.</p>\n<p>This code is getting compiled well, but while executing the code from application, it is throwing error:</p>\n<blockquote>\n<p>java.lang.NoSuchMethodError:\n'com.microsoft.aad.msal4j.ClientApplicationBase$Builder\ncom.microsoft.aad.msal4j.ConfidentialClientApplication$Builder.authority(java.lang.String)'</p>\n</blockquote>\n<p>Later I found that ClientApplicationBase.class file is missing in the msal4j-1.13.10.jar file. Is this a bug in the jar file or did I miss something.</p>\n<pre><code>    IClientAssertion iClientAssertion = ClientCredentialFactory.createFromClientAssertion(CLIENT_ASSERTION);\n    ConfidentialClientApplication cca;\n    try {\n        cca = ConfidentialClientApplication\n                .builder(CLIENT_ID, iClientAssertion)\n                .authority(AUTHORITY)\n                .build();\n\n        ClientCredentialParameters parameters =\n                ClientCredentialParameters\n                        .builder(SCOPE)\n                        .build();\n\n        IAuthenticationResult result = cca.acquireToken(parameters).join();\n        System.out.println(&quot;Access token: &quot; + result.accessToken());\n        return result.accessToken();\n    } catch (MalformedURLException e) {\n        e.printStackTrace();\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","testng"],"owner":{"account_id":29499448,"reputation":1,"user_id":22606789,"display_name":"Vishal Jadhav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695400084,"creation_date":1695291339,"question_id":77149306,"body_markdown":"\r\n```xml\r\n&lt;suite name=&quot;Parallel_Run&quot; parallel=&quot;true&quot;&gt;\r\n  &lt;suite-files&gt;\r\n    &lt;suite-file path=&quot;suite1.xml&quot;/&gt;\r\n    &lt;suite-file path=&quot;suite2.xml&quot;/&gt;\r\n  &lt;/suite-files&gt;\r\n&lt;/suite&gt;\r\n```\r\n\r\nI am using above XML file to run two xml files but it is running sequentially, I tried putting `parallel=&quot;true&quot;` as well but the same output\r\n\r\nI want to run both XML files in parallel.","title":"How to run two suite files in parallel in TestNG","body":"<pre class=\"lang-xml prettyprint-override\"><code>&lt;suite name=&quot;Parallel_Run&quot; parallel=&quot;true&quot;&gt;\n  &lt;suite-files&gt;\n    &lt;suite-file path=&quot;suite1.xml&quot;/&gt;\n    &lt;suite-file path=&quot;suite2.xml&quot;/&gt;\n  &lt;/suite-files&gt;\n&lt;/suite&gt;\n</code></pre>\n<p>I am using above XML file to run two xml files but it is running sequentially, I tried putting <code>parallel=&quot;true&quot;</code> as well but the same output</p>\n<p>I want to run both XML files in parallel.</p>\n"},{"tags":["java","gradle","groovy","spock"],"answers":[{"tags":[],"owner":{"account_id":27083,"reputation":1400,"user_id":71066,"accept_rate":90,"display_name":"James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695319296,"creation_date":1695319296,"answer_id":77152612,"question_id":77151709,"body_markdown":"Nearest I could find was the following alteration to the gradle `Test` task:\r\n\r\n```groovy\r\nString ANSI_RESET = &quot;\\u001B[0m&quot;\r\nString ANSI_RED = &quot;\\u001B[31m&quot;\r\nString ANSI_GREEN = &quot;\\u001B[32m&quot;\r\nString ANSI_YELLOW = &quot;\\u001B[33m&quot;\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n    testLogging {\r\n        events &quot;failed&quot;\r\n        showExceptions true\r\n        exceptionFormat &quot;full&quot;\r\n    }\r\n    afterTest { TestDescriptor descriptor, TestResult result -&gt;\r\n        if(result.failedTestCount &gt; 0) {\r\n            println &quot;${descriptor.className} &gt; ${descriptor.name} ${ANSI_RED}FAILED${ANSI_RESET}&quot;\r\n        } else if(result.skippedTestCount &gt; 0) {\r\n            println &quot;${descriptor.className} &gt; ${descriptor.name} ${ANSI_YELLOW}SKIPPED${ANSI_RESET}&quot;\r\n        } else {\r\n            println &quot;${descriptor.className} &gt; ${descriptor.name} ${ANSI_GREEN}PASSED${ANSI_RESET}&quot;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIt results in a slight bit of redundancy in the event of a test failure, but that way it will still emit a stack trace to assist the developer. ","title":"Gradle: How to change test result output","body":"<p>Nearest I could find was the following alteration to the gradle <code>Test</code> task:</p>\n<pre><code>String ANSI_RESET = &quot;\\u001B[0m&quot;\nString ANSI_RED = &quot;\\u001B[31m&quot;\nString ANSI_GREEN = &quot;\\u001B[32m&quot;\nString ANSI_YELLOW = &quot;\\u001B[33m&quot;\n\ntest {\n    useJUnitPlatform()\n    testLogging {\n        events &quot;failed&quot;\n        showExceptions true\n        exceptionFormat &quot;full&quot;\n    }\n    afterTest { TestDescriptor descriptor, TestResult result -&gt;\n        if(result.failedTestCount &gt; 0) {\n            println &quot;${descriptor.className} &gt; ${descriptor.name} ${ANSI_RED}FAILED${ANSI_RESET}&quot;\n        } else if(result.skippedTestCount &gt; 0) {\n            println &quot;${descriptor.className} &gt; ${descriptor.name} ${ANSI_YELLOW}SKIPPED${ANSI_RESET}&quot;\n        } else {\n            println &quot;${descriptor.className} &gt; ${descriptor.name} ${ANSI_GREEN}PASSED${ANSI_RESET}&quot;\n        }\n    }\n}\n</code></pre>\n<p>It results in a slight bit of redundancy in the event of a test failure, but that way it will still emit a stack trace to assist the developer.</p>\n"},{"tags":[],"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695399634,"creation_date":1695399634,"answer_id":77159287,"question_id":77151709,"body_markdown":"I&#39;ve already answered it in https://stackoverflow.com/a/76946372/2145769\r\n\r\nYou can control the detail by setting the `displayGranularity` in [TestLogging](https://docs.gradle.org/current/dsl/org.gradle.api.tasks.testing.logging.TestLogging.html) and enabling the logging of relevant events.\r\n\r\n&gt; The display granularity of the events to be logged. For example, if set to 0, a method-level event will be displayed as &quot;Test Run &gt; Test Worker x &gt; org.SomeClass &gt; org.someMethod&quot;. If set to 2, the same event will be displayed as &quot;org.someClass &gt; org.someMethod&quot;. \r\n\r\n```kotlin\r\ntasks.test {\r\n    testLogging {\r\n        events (&quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;)\r\n        displayGranularity = 1\r\n    }\r\n}\r\n```","title":"Gradle: How to change test result output","body":"<p>I've already answered it in <a href=\"https://stackoverflow.com/a/76946372/2145769\">https://stackoverflow.com/a/76946372/2145769</a></p>\n<p>You can control the detail by setting the <code>displayGranularity</code> in <a href=\"https://docs.gradle.org/current/dsl/org.gradle.api.tasks.testing.logging.TestLogging.html\" rel=\"nofollow noreferrer\">TestLogging</a> and enabling the logging of relevant events.</p>\n<blockquote>\n<p>The display granularity of the events to be logged. For example, if set to 0, a method-level event will be displayed as &quot;Test Run &gt; Test Worker x &gt; org.SomeClass &gt; org.someMethod&quot;. If set to 2, the same event will be displayed as &quot;org.someClass &gt; org.someMethod&quot;.</p>\n</blockquote>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.test {\n    testLogging {\n        events (&quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;)\n        displayGranularity = 1\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27083,"reputation":1400,"user_id":71066,"accept_rate":90,"display_name":"James"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77152612,"answer_count":2,"score":0,"last_activity_date":1695399634,"creation_date":1695310693,"question_id":77151709,"body_markdown":"By default, when executing `gradle test`, the output looks as such: \r\n\r\n```\r\nExampleSpec &gt; get all examples PASSED\r\n\r\n```\r\n\r\nIf I remember correctly, back in the early days of Gradle the class would have the package name prepended. Hence you&#39;d get a result more akin to:\r\n\r\n```\r\ncom.company.ExampleSpec &gt; get all examples PASSED\r\n```\r\n\r\nIs there any way to change how Gradle logs the finished tests to show the package name for each? ","title":"Gradle: How to change test result output","body":"<p>By default, when executing <code>gradle test</code>, the output looks as such:</p>\n<pre><code>ExampleSpec &gt; get all examples PASSED\n\n</code></pre>\n<p>If I remember correctly, back in the early days of Gradle the class would have the package name prepended. Hence you'd get a result more akin to:</p>\n<pre><code>com.company.ExampleSpec &gt; get all examples PASSED\n</code></pre>\n<p>Is there any way to change how Gradle logs the finished tests to show the package name for each?</p>\n"},{"tags":["java","thymeleaf","program-entry-point","template-engine"],"comments":[{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1581599493,"post_id":60208627,"comment_id":106495136,"body_markdown":"I don&#39;t understand what you&#39;re asking. Your main method can be wherever you want.","body":"I don&#39;t understand what you&#39;re asking. Your main method can be wherever you want."},{"owner":{"account_id":17755084,"reputation":53,"user_id":12892350,"display_name":"FC_Termi"},"score":0,"creation_date":1581600484,"post_id":60208627,"comment_id":106495763,"body_markdown":"Ok, then how do I launch the webapp ? By instantiating inside the main method &quot;GTVGApplication gtvgApplication = new GTVGApplication()&quot;  ?","body":"Ok, then how do I launch the webapp ? By instantiating inside the main method &quot;GTVGApplication gtvgApplication = new GTVGApplication()&quot;  ?"}],"answers":[{"tags":[],"owner":{"account_id":11417592,"reputation":221,"user_id":8370004,"display_name":"mklepa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1581600001,"creation_date":1581600001,"answer_id":60208832,"question_id":60208627,"body_markdown":"You can create your main method in any class that you created and then create Thymeleaf objects that you need.\r\n[This might help][1]\r\n\r\n\r\n  [1]: https://github.com/thymeleaf/thymeleaf/issues/561","title":"How to use Thymeleaf to make only a simple Java app (without Spring)","body":"<p>You can create your main method in any class that you created and then create Thymeleaf objects that you need.\n<a href=\"https://github.com/thymeleaf/thymeleaf/issues/561\" rel=\"nofollow noreferrer\">This might help</a></p>\n"},{"tags":[],"owner":{"account_id":11726648,"reputation":19523,"user_id":8583692,"display_name":"Mahozad"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695399258,"creation_date":1650870021,"answer_id":71995574,"question_id":60208627,"body_markdown":"Borrowing from [this comment on GitHub](https://github.com/thymeleaf/thymeleaf/issues/561#issuecomment-490648829), here is how to use Thymeleaf in a simple app.\r\n\r\nFirst, add the Thymeleaf library (dependency):\r\n\r\n  - If you are using Maven, add this to your *pom.xml* file:\r\n    ```xml\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.15.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Add this if you don&#39;t like seeing messages in stdout from SLF4J --&gt;\r\n        &lt;!-- \r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-nop&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.36&lt;/version&gt;\r\n        &lt;/dependency&gt; \r\n        --&gt;\r\n    &lt;/dependencies&gt;\r\n    ```\r\n  - If you are using Gradle, add this to your *build.gradle[.kts]* file:\r\n    ```kotlin\r\n    dependencies {\r\n        implementation(&quot;org.thymeleaf:thymeleaf:3.0.15.RELEASE&quot;)\r\n        // Add this if you don&#39;t like seeing messages in stdout from SLF4J\r\n        // implementation(&quot;org.slf4j:slf4j-nop:1.7.36&quot;)\r\n    }\r\n    ```\r\n\r\nPlace your template HTML files in *templates/* subdirectory of your [classpath][1] (for example, in *src/main/resources/templates/*).\r\n\r\nsrc/main/resources/templates/index.html:\r\n\r\n```html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n  &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n  &lt;title&gt;Sample Thymeleaf template&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\r\n&lt;p th:text=&quot;|Hello, ${name}!|&quot;&gt;Hello, user!&lt;/p&gt;\r\n&lt;p th:text=&quot;|Today is ${date}.|&quot;&gt;Today is ...&lt;/p&gt;\r\n\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nAnd here is the program code if you are using Java language:\r\n\r\n```java\r\nimport org.thymeleaf.TemplateEngine;\r\nimport org.thymeleaf.context.Context;\r\nimport org.thymeleaf.templatemode.TemplateMode;\r\nimport org.thymeleaf.templateresolver.ClassLoaderTemplateResolver;\r\nimport java.time.LocalDate;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        // From Java 10, you can use var instead of declaring the type explicitly\r\n        var resolver = new ClassLoaderTemplateResolver();\r\n        resolver.setTemplateMode(TemplateMode.HTML);\r\n        resolver.setCharacterEncoding(&quot;UTF-8&quot;);\r\n        resolver.setPrefix(&quot;/templates/&quot;);\r\n        resolver.setSuffix(&quot;.html&quot;);\r\n\r\n        var context = new Context();\r\n        context.setVariable(&quot;name&quot;, &quot;Bunny&quot;);\r\n        context.setVariable(&quot;date&quot;, LocalDate.now().toString());\r\n\r\n        var templateEngine = new TemplateEngine();\r\n        templateEngine.setTemplateResolver(resolver);\r\n\r\n        var result = templateEngine.process(&quot;index&quot;, context);\r\n        System.out.println(result);\r\n    }\r\n}\r\n```\r\n\r\nAnd here is the program code if you are using [Kotlin language][2]:\r\n\r\n```kotlin\r\nimport org.thymeleaf.TemplateEngine\r\nimport org.thymeleaf.context.Context\r\nimport org.thymeleaf.templatemode.TemplateMode\r\nimport org.thymeleaf.templateresolver.ClassLoaderTemplateResolver\r\nimport java.time.LocalDate\r\n\r\nfun main() {\r\n    val resolver = ClassLoaderTemplateResolver().apply {\r\n        templateMode = TemplateMode.HTML\r\n        characterEncoding = &quot;UTF-8&quot;\r\n        prefix = &quot;/templates/&quot;\r\n        suffix = &quot;.html&quot;\r\n    }\r\n    val context = Context().apply {\r\n        setVariable(&quot;name&quot;, &quot;Bunny&quot;)\r\n        setVariable(&quot;date&quot;, LocalDate.now().toString())\r\n    }\r\n    val templateEngine = TemplateEngine().apply {\r\n        setTemplateResolver(resolver)\r\n    }\r\n    val result = templateEngine.process(&quot;index&quot;, context)\r\n    println(result)\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/2396493/8583692\r\n  [2]: https://kotlinlang.org/","title":"How to use Thymeleaf to make only a simple Java app (without Spring)","body":"<p>Borrowing from <a href=\"https://github.com/thymeleaf/thymeleaf/issues/561#issuecomment-490648829\" rel=\"nofollow noreferrer\">this comment on GitHub</a>, here is how to use Thymeleaf in a simple app.</p>\n<p>First, add the Thymeleaf library (dependency):</p>\n<ul>\n<li>If you are using Maven, add this to your <em>pom.xml</em> file:\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n        &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n        &lt;version&gt;3.0.15.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- Add this if you don't like seeing messages in stdout from SLF4J --&gt;\n    &lt;!-- \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-nop&lt;/artifactId&gt;\n        &lt;version&gt;1.7.36&lt;/version&gt;\n    &lt;/dependency&gt; \n    --&gt;\n&lt;/dependencies&gt;\n</code></pre>\n</li>\n<li>If you are using Gradle, add this to your <em>build.gradle[.kts]</em> file:\n<pre class=\"lang-kotlin prettyprint-override\"><code>dependencies {\n    implementation(&quot;org.thymeleaf:thymeleaf:3.0.15.RELEASE&quot;)\n    // Add this if you don't like seeing messages in stdout from SLF4J\n    // implementation(&quot;org.slf4j:slf4j-nop:1.7.36&quot;)\n}\n</code></pre>\n</li>\n</ul>\n<p>Place your template HTML files in <em>templates/</em> subdirectory of your <a href=\"https://stackoverflow.com/q/2396493/8583692\">classpath</a> (for example, in <em>src/main/resources/templates/</em>).</p>\n<p>src/main/resources/templates/index.html:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n  &lt;meta charset=&quot;UTF-8&quot;&gt;\n  &lt;title&gt;Sample Thymeleaf template&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;p th:text=&quot;|Hello, ${name}!|&quot;&gt;Hello, user!&lt;/p&gt;\n&lt;p th:text=&quot;|Today is ${date}.|&quot;&gt;Today is ...&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>And here is the program code if you are using Java language:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.thymeleaf.TemplateEngine;\nimport org.thymeleaf.context.Context;\nimport org.thymeleaf.templatemode.TemplateMode;\nimport org.thymeleaf.templateresolver.ClassLoaderTemplateResolver;\nimport java.time.LocalDate;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        // From Java 10, you can use var instead of declaring the type explicitly\n        var resolver = new ClassLoaderTemplateResolver();\n        resolver.setTemplateMode(TemplateMode.HTML);\n        resolver.setCharacterEncoding(&quot;UTF-8&quot;);\n        resolver.setPrefix(&quot;/templates/&quot;);\n        resolver.setSuffix(&quot;.html&quot;);\n\n        var context = new Context();\n        context.setVariable(&quot;name&quot;, &quot;Bunny&quot;);\n        context.setVariable(&quot;date&quot;, LocalDate.now().toString());\n\n        var templateEngine = new TemplateEngine();\n        templateEngine.setTemplateResolver(resolver);\n\n        var result = templateEngine.process(&quot;index&quot;, context);\n        System.out.println(result);\n    }\n}\n</code></pre>\n<p>And here is the program code if you are using <a href=\"https://kotlinlang.org/\" rel=\"nofollow noreferrer\">Kotlin language</a>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.thymeleaf.TemplateEngine\nimport org.thymeleaf.context.Context\nimport org.thymeleaf.templatemode.TemplateMode\nimport org.thymeleaf.templateresolver.ClassLoaderTemplateResolver\nimport java.time.LocalDate\n\nfun main() {\n    val resolver = ClassLoaderTemplateResolver().apply {\n        templateMode = TemplateMode.HTML\n        characterEncoding = &quot;UTF-8&quot;\n        prefix = &quot;/templates/&quot;\n        suffix = &quot;.html&quot;\n    }\n    val context = Context().apply {\n        setVariable(&quot;name&quot;, &quot;Bunny&quot;)\n        setVariable(&quot;date&quot;, LocalDate.now().toString())\n    }\n    val templateEngine = TemplateEngine().apply {\n        setTemplateResolver(resolver)\n    }\n    val result = templateEngine.process(&quot;index&quot;, context)\n    println(result)\n}\n</code></pre>\n"}],"owner":{"account_id":17755084,"reputation":53,"user_id":12892350,"display_name":"FC_Termi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3842,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":60208832,"answer_count":2,"score":5,"last_activity_date":1695399258,"creation_date":1581599316,"question_id":60208627,"body_markdown":"I&#39;m following the official Thymeleaf tutorial on [its website][1] and I&#39;m currently on the section [*Executing the template engine*][2].\r\n\r\nFrom what I understood, I should already be able to run the app coded so far, but I absolutely don&#39;t see how to run it. There is no `main(String[] args)` method to run at all.\r\n\r\nI tried searching for other tutorials but they all use Spring which is not what I&#39;m looking for right now.\r\n\r\nAnyone knows where I should insert a `main(String[] args)` method to run this Thymeleaf app and view my HTML template? I don&#39;t understand where the entry point is or should be.\r\n\r\nI apologize in advance if this question sounds dumb and thanks for your future replies.\r\n\r\n---\r\n\r\nEdit:\r\n\r\nUntil now, when following the tutorial I wrote 3 Java files:\r\n - [GTVGApplication][3] class\r\n - [IGTVGController][4] interface\r\n - [HomeController][5] class\r\n - [home.html][6] template to be displayed\r\n\r\nSo I thought of writing a main method like so:\r\n[Main class containing main(String[] args) method][7]\r\n\r\nBut I don&#39;t see how to correctly instantiate the *servletContext* and I&#39;m not even sure if everything will work out once this is done.\r\n\r\n\r\n  [1]: https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html\r\n  [2]: https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#executing-the-template-engine\r\n  [3]: https://i.stack.imgur.com/GHkbF.png\r\n  [4]: https://i.stack.imgur.com/6fGoQ.png\r\n  [5]: https://i.stack.imgur.com/HDjej.png\r\n  [6]: https://i.stack.imgur.com/zxQdk.png\r\n  [7]: https://i.stack.imgur.com/rgt9Y.png\r\n","title":"How to use Thymeleaf to make only a simple Java app (without Spring)","body":"<p>I'm following the official Thymeleaf tutorial on <a href=\"https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html\" rel=\"nofollow noreferrer\">its website</a> and I'm currently on the section <a href=\"https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#executing-the-template-engine\" rel=\"nofollow noreferrer\"><em>Executing the template engine</em></a>.</p>\n<p>From what I understood, I should already be able to run the app coded so far, but I absolutely don't see how to run it. There is no <code>main(String[] args)</code> method to run at all.</p>\n<p>I tried searching for other tutorials but they all use Spring which is not what I'm looking for right now.</p>\n<p>Anyone knows where I should insert a <code>main(String[] args)</code> method to run this Thymeleaf app and view my HTML template? I don't understand where the entry point is or should be.</p>\n<p>I apologize in advance if this question sounds dumb and thanks for your future replies.</p>\n<hr />\n<p>Edit:</p>\n<p>Until now, when following the tutorial I wrote 3 Java files:</p>\n<ul>\n<li><a href=\"https://i.stack.imgur.com/GHkbF.png\" rel=\"nofollow noreferrer\">GTVGApplication</a> class</li>\n<li><a href=\"https://i.stack.imgur.com/6fGoQ.png\" rel=\"nofollow noreferrer\">IGTVGController</a> interface</li>\n<li><a href=\"https://i.stack.imgur.com/HDjej.png\" rel=\"nofollow noreferrer\">HomeController</a> class</li>\n<li><a href=\"https://i.stack.imgur.com/zxQdk.png\" rel=\"nofollow noreferrer\">home.html</a> template to be displayed</li>\n</ul>\n<p>So I thought of writing a main method like so:\n<a href=\"https://i.stack.imgur.com/rgt9Y.png\" rel=\"nofollow noreferrer\">Main class containing main(String[] args) method</a></p>\n<p>But I don't see how to correctly instantiate the <em>servletContext</em> and I'm not even sure if everything will work out once this is done.</p>\n"},{"tags":["java","spring","spring-integration","spring-integration-dsl"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695399075,"creation_date":1695399075,"answer_id":77159229,"question_id":77158030,"body_markdown":"I suggest you to move `transactional()` to the `poller()` configuration of the source polling channel adapter for that `Jpa.inboundAdapter(entityMaanger)`.\r\n\r\nRight now it looks like you rely on default poller (probably auto-configured by Spring Boot), but you would need to have a second arg on that `from()`:\r\n\r\n    IntegrationFlows\r\n      .from(\r\n         Jpa\r\n          .inboundAdapter(entityMaanger)\r\n          .entityClass(...)\r\n          .nameqQuery(...),\r\n         e -&gt; e.poller(p -&gt; p.fixedDelay(1000).transactional())\r\n      )","title":"Spring Integration: Error handling for Jpa Outbound Adapter","body":"<p>I suggest you to move <code>transactional()</code> to the <code>poller()</code> configuration of the source polling channel adapter for that <code>Jpa.inboundAdapter(entityMaanger)</code>.</p>\n<p>Right now it looks like you rely on default poller (probably auto-configured by Spring Boot), but you would need to have a second arg on that <code>from()</code>:</p>\n<pre><code>IntegrationFlows\n  .from(\n     Jpa\n      .inboundAdapter(entityMaanger)\n      .entityClass(...)\n      .nameqQuery(...),\n     e -&gt; e.poller(p -&gt; p.fixedDelay(1000).transactional())\n  )\n</code></pre>\n"}],"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695399075,"creation_date":1695389135,"question_id":77158030,"body_markdown":"i have a Spring Integration flow that uses Jpa.inboundAdapter() as a source, manipulates the read entities in transform and finally stores them again using Jpa.outboundAdapter. \r\n\r\nHowever, during persisting exceptions may occure (Unique Constraint Violation). In that case, the flow kind of &quot;hangs&quot;, as it reads from source in a specified order, immediately triggering the same order.\r\n\r\nHow can I properly do error handling to mark or skip &quot;bad&quot; entities read from source?\r\n\r\nThe flow:\r\n\r\n```java\r\nIntegrationFlows\r\n  .from(\r\n     Jpa\r\n      .inboundAdapter(entityMaanger)\r\n      .entityClass(...)\r\n      .nameqQuery(...)\r\n      .get()\r\n  )\r\n  .split()\r\n  .transform( ..)\r\n  .handle(\r\n     Jpa\r\n       .outboundAdapter(entityManager)\r\n       .entityClass(...)\r\n       .persistMode(MERGER)\r\n       .flush(true)\r\n       .get(),\r\n     e -&gt; e.transactional())\r\n   )\r\n);\r\n\r\n\r\n\r\n","title":"Spring Integration: Error handling for Jpa Outbound Adapter","body":"<p>i have a Spring Integration flow that uses Jpa.inboundAdapter() as a source, manipulates the read entities in transform and finally stores them again using Jpa.outboundAdapter.</p>\n<p>However, during persisting exceptions may occure (Unique Constraint Violation). In that case, the flow kind of &quot;hangs&quot;, as it reads from source in a specified order, immediately triggering the same order.</p>\n<p>How can I properly do error handling to mark or skip &quot;bad&quot; entities read from source?</p>\n<p>The flow:</p>\n<pre class=\"lang-java prettyprint-override\"><code>IntegrationFlows\n  .from(\n     Jpa\n      .inboundAdapter(entityMaanger)\n      .entityClass(...)\n      .nameqQuery(...)\n      .get()\n  )\n  .split()\n  .transform( ..)\n  .handle(\n     Jpa\n       .outboundAdapter(entityManager)\n       .entityClass(...)\n       .persistMode(MERGER)\n       .flush(true)\n       .get(),\n     e -&gt; e.transactional())\n   )\n);\n\n\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","java-17"],"comments":[{"owner":{"account_id":1362416,"reputation":4479,"user_id":1299533,"display_name":"Scott Frederick"},"score":3,"creation_date":1686433621,"post_id":76448040,"comment_id":134798661,"body_markdown":"Spring Boot 3.1.0 depends on Spring Framework 6.0.9 by default. What are you trying to do by downgrading the Spring Framework version to 6.0.0? See https://docs.spring.io/spring-boot/docs/3.1.0/reference/htmlsingle/#appendix.dependency-versions","body":"Spring Boot 3.1.0 depends on Spring Framework 6.0.9 by default. What are you trying to do by downgrading the Spring Framework version to 6.0.0? See <a href=\"https://docs.spring.io/spring-boot/docs/3.1.0/reference/htmlsingle/#appendix.dependency-versions\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/3.1.0/reference/htmlsingle/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1686551301,"post_id":76448040,"comment_id":134808138,"body_markdown":"The fact that you are using Spring Boot and have tons of individual dependencies added makes me wonder what you added more. Basically don&#39;t do this as this will lead to incompatible combinations of jars/modules. Instead just use the Spring Boot Starters and not individual dependencies.","body":"The fact that you are using Spring Boot and have tons of individual dependencies added makes me wonder what you added more. Basically don&#39;t do this as this will lead to incompatible combinations of jars/modules. Instead just use the Spring Boot Starters and not individual dependencies."},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1686578350,"post_id":76448040,"comment_id":134813820,"body_markdown":"@M.Deinum springboot idea is broken when developer have to avoid vulnerable jars. There are no trivy-proven spring-boot releases, so I have to go through the trivy results list and increase the version numbers of the inidividual devs","body":"@M.Deinum springboot idea is broken when developer have to avoid vulnerable jars. There are no trivy-proven spring-boot releases, so I have to go through the trivy results list and increase the version numbers of the inidividual devs"},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1686578578,"post_id":76448040,"comment_id":134813882,"body_markdown":"@M.Deinum how I can know what particular incompablitiy breaks the build? The stacktrace isn&#39;t informative","body":"@M.Deinum how I can know what particular incompablitiy breaks the build? The stacktrace isn&#39;t informative"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686578712,"post_id":76448040,"comment_id":134813917,"body_markdown":"No you shouldn&#39;t increase the version of the individual dependencies you should increase the version of the library. Don&#39;t mix jars from different versions of a framework as that is trouble waiting to happen (and you asking a question again about why version x.y.1 doesn&#39;t work with x.y.2, because it wasn&#39;t meant to work in that combo).  With Spring Boot this is actually pretty easy as for all managed dependencies you can simply override the version and not indivudal dependencies! Which is the recommended **and** documented way.","body":"No you shouldn&#39;t increase the version of the individual dependencies you should increase the version of the library. Don&#39;t mix jars from different versions of a framework as that is trouble waiting to happen (and you asking a question again about why version x.y.1 doesn&#39;t work with x.y.2, because it wasn&#39;t meant to work in that combo).  With Spring Boot this is actually pretty easy as for all managed dependencies you can simply override the version and not indivudal dependencies! Which is the recommended <b>and</b> documented way."},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1686579444,"post_id":76448040,"comment_id":134814086,"body_markdown":"how can i do it, if vulnerabilities scanner point me to individual dependencies and it almost impossible to know the library version based on that; moreover, to avoit scanner issues, it may require to use different ranges of the versions, since differenv vulnerabilities reside in the different version numbers.","body":"how can i do it, if vulnerabilities scanner point me to individual dependencies and it almost impossible to know the library version based on that; moreover, to avoit scanner issues, it may require to use different ranges of the versions, since differenv vulnerabilities reside in the different version numbers."},{"owner":{"account_id":494704,"reputation":5171,"user_id":1225882,"accept_rate":100,"display_name":"anothernode"},"score":0,"creation_date":1687513747,"post_id":76448040,"comment_id":134950715,"body_markdown":"@Eljah If you don&#39;t trust the Spring developers to do a decent job managing vulnerabilities in their product, you probably should refrain from using it.","body":"@Eljah If you don&#39;t trust the Spring developers to do a decent job managing vulnerabilities in their product, you probably should refrain from using it."},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1687519818,"post_id":76448040,"comment_id":134951883,"body_markdown":"@anothernode as a normal worker I do what I was said in terms &quot;remove trivy scans from your app&quot; and as a normal developer I do trust Spring developers. Not all tasks are intended on the resolving the real problems. So I personally always do what some other people told to do, not what I consider right. Sorry for that sad truth.","body":"@anothernode as a normal worker I do what I was said in terms &quot;remove trivy scans from your app&quot; and as a normal developer I do trust Spring developers. Not all tasks are intended on the resolving the real problems. So I personally always do what some other people told to do, not what I consider right. Sorry for that sad truth."}],"answers":[{"tags":[],"owner":{"account_id":14661536,"reputation":89,"user_id":10588571,"display_name":"Erick Jhorman Romero"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695398790,"creation_date":1695158360,"answer_id":77138029,"question_id":76448040,"body_markdown":"Hey I also got it and solved it updating this dependency to this version.\r\n    \r\n\r\n    implementation(&#39;org.springframework:spring-context:6.0.11&#39;)\r\n\r\n","title":"org.springframework.core.NestedIOException when have migrated to Spring Boot 3.1.0, Spring 6.0.0 and Java 17","body":"<p>Hey I also got it and solved it updating this dependency to this version.</p>\n<pre><code>implementation('org.springframework:spring-context:6.0.11')\n</code></pre>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1924,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695398790,"creation_date":1686428678,"question_id":76448040,"body_markdown":"The application worked well on Spring Boot 3.1.0 and Java 17, but whn was migrated to Spring 6.0.0 with such modules upgrated, isnt started with below error:\r\n\r\n    implementation &#39;org.springframework:spring-core:6.0.0&#39;\r\n    implementation &#39;org.springframework:spring-beans:6.0.0&#39;\r\n    implementation &#39;org.springframework:spring-expression:6.0.0&#39;\r\n    implementation &#39;org.springframework:spring-webflux:6.0.0&#39;\r\n    implementation &#39;org.springframework:spring-webmvc:6.0.0&#39;\r\n    implementation &#39;org.springframework:spring-web:6.0.0&#39;\r\n\r\nand the logs output is: \r\n\r\n    2023-06-10 23:17:34.892 [main] ERROR o.s.boot.SpringApplication - Application run failed\r\n    java.lang.NoClassDefFoundError: org/springframework/core/NestedIOException\r\n    \tat org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:312)\r\n    \tat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:236)\r\n    \tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:280)\r\n    \tat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:96)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:707)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:533)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:405)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\r\n    \tat org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:140)\r\n    \tat org.springframework.cloud.bootstrap.BootstrapApplicationListener.bootstrapServiceContext(BootstrapApplicationListener.java:212)\r\n    \tat org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:117)\r\n    \tat org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:74)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\r\n    \tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:80)\r\n    \tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\r\n    \tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1237)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\r\n    \tat rf.dom.billing.ap.Application.main(Application.java:24)\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.core.NestedIOException\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \t... 25 common frames omitted","title":"org.springframework.core.NestedIOException when have migrated to Spring Boot 3.1.0, Spring 6.0.0 and Java 17","body":"<p>The application worked well on Spring Boot 3.1.0 and Java 17, but whn was migrated to Spring 6.0.0 with such modules upgrated, isnt started with below error:</p>\n<pre><code>implementation 'org.springframework:spring-core:6.0.0'\nimplementation 'org.springframework:spring-beans:6.0.0'\nimplementation 'org.springframework:spring-expression:6.0.0'\nimplementation 'org.springframework:spring-webflux:6.0.0'\nimplementation 'org.springframework:spring-webmvc:6.0.0'\nimplementation 'org.springframework:spring-web:6.0.0'\n</code></pre>\n<p>and the logs output is:</p>\n<pre><code>2023-06-10 23:17:34.892 [main] ERROR o.s.boot.SpringApplication - Application run failed\njava.lang.NoClassDefFoundError: org/springframework/core/NestedIOException\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:312)\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:236)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:280)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:96)\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:707)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:533)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:405)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\n    at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:140)\n    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.bootstrapServiceContext(BootstrapApplicationListener.java:212)\n    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:117)\n    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:74)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:80)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)\n    at rf.dom.billing.ap.Application.main(Application.java:24)\nCaused by: java.lang.ClassNotFoundException: org.springframework.core.NestedIOException\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 25 common frames omitted\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven","maven-multi-module"],"owner":{"account_id":10491189,"reputation":153,"user_id":7733017,"display_name":"Aleix Marin&#233;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695398302,"creation_date":1695398302,"question_id":77159143,"body_markdown":"So I have [this spring-boot project](https://github.com/AleixMT/eChempad) that contains the web services of an application. Now I want to add a new module to my application that is not related to the web services. To do so in Java I found that you can create a multi-module project.\r\n\r\nWhat I have been trying for the past hours is to convert the whole project to a single submodule of a bigger project. I kind of achieved it, but some of the plugins change and my code gives error about a circular dependency, so this is not a valid solution. My code should be working as it was before I changed the project structure. \r\n\r\nI think that the problem comes from the fact that to convert this project into a multi-module project I needed to delete the [POM parent of my application](https://github.com/AleixMT/eChempad/blob/master/pom.xml) (spring-boot-starter), because the new parent is going to be the global project.\r\n\r\nSo, in [this documentation](https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/), there is explained what do you need to do to not use the parent POM. \r\n\r\nThey tell you that to override libraries and achieve the same result you need to put the dependencies in the *dependencyManagement* section. This is not working for me. When doing so, dependencies are not used to compile and they do disappear from maven, resulting in not finding libraries in my code. \r\n\r\nAnother thing that changes a lot (and maybe is the source of my error) is that almost all maven plugins change versions when deleting the parent. Do I need to set all the plugins and their versions manually now that they are not managed by the spring-boot parent POM? Would it make sense to think that maybe because of changing the versions of the plugins now there is a circular reference in my code?\r\n\r\nI would like to see an exhaustive step-by-step guide to convert a spring boot project into a maven multi-module project (where one of the submodules is the original spring-boot project converted into module). There are a lot of instructions and guides on the Internet but most of the time they do not explain why are they doing what they doing and also they are not exhaustive. They usually use very small example projects and it seems to me that they do not take into account all the aspects that need to be taken care of when migrating a large project. I would like to see how can I move the project and also conserving all the aspects, plugins and dependencies of it, so it is basically a clone of the original project but in a module and works exactly the same.\r\n\r\nPlease, notice that [there may be similar questions as the one I am posting](https://stackoverflow.com/questions/22537171/convert-maven-project-to-submodule-of-multi-module-project), but the answers do not satisfy me at all and / or are not working for me. \r\n\r\nYou can also answer me by proposing any possible workaround. For example, having a solution that implies to not delete the spring-boot parent POM would be the cleanest.\r\n\r\nThank you so much for the help. It is very valuable to me.  ","title":"How to convert springboot project to its equivalent maven multi-module project","body":"<p>So I have <a href=\"https://github.com/AleixMT/eChempad\" rel=\"nofollow noreferrer\">this spring-boot project</a> that contains the web services of an application. Now I want to add a new module to my application that is not related to the web services. To do so in Java I found that you can create a multi-module project.</p>\n<p>What I have been trying for the past hours is to convert the whole project to a single submodule of a bigger project. I kind of achieved it, but some of the plugins change and my code gives error about a circular dependency, so this is not a valid solution. My code should be working as it was before I changed the project structure.</p>\n<p>I think that the problem comes from the fact that to convert this project into a multi-module project I needed to delete the <a href=\"https://github.com/AleixMT/eChempad/blob/master/pom.xml\" rel=\"nofollow noreferrer\">POM parent of my application</a> (spring-boot-starter), because the new parent is going to be the global project.</p>\n<p>So, in <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/\" rel=\"nofollow noreferrer\">this documentation</a>, there is explained what do you need to do to not use the parent POM.</p>\n<p>They tell you that to override libraries and achieve the same result you need to put the dependencies in the <em>dependencyManagement</em> section. This is not working for me. When doing so, dependencies are not used to compile and they do disappear from maven, resulting in not finding libraries in my code.</p>\n<p>Another thing that changes a lot (and maybe is the source of my error) is that almost all maven plugins change versions when deleting the parent. Do I need to set all the plugins and their versions manually now that they are not managed by the spring-boot parent POM? Would it make sense to think that maybe because of changing the versions of the plugins now there is a circular reference in my code?</p>\n<p>I would like to see an exhaustive step-by-step guide to convert a spring boot project into a maven multi-module project (where one of the submodules is the original spring-boot project converted into module). There are a lot of instructions and guides on the Internet but most of the time they do not explain why are they doing what they doing and also they are not exhaustive. They usually use very small example projects and it seems to me that they do not take into account all the aspects that need to be taken care of when migrating a large project. I would like to see how can I move the project and also conserving all the aspects, plugins and dependencies of it, so it is basically a clone of the original project but in a module and works exactly the same.</p>\n<p>Please, notice that <a href=\"https://stackoverflow.com/questions/22537171/convert-maven-project-to-submodule-of-multi-module-project\">there may be similar questions as the one I am posting</a>, but the answers do not satisfy me at all and / or are not working for me.</p>\n<p>You can also answer me by proposing any possible workaround. For example, having a solution that implies to not delete the spring-boot parent POM would be the cleanest.</p>\n<p>Thank you so much for the help. It is very valuable to me.</p>\n"},{"tags":["java","maven","logging","slf4j"],"answers":[{"tags":[],"owner":{"account_id":171331,"reputation":310904,"user_id":398670,"accept_rate":73,"display_name":"Craig Ringer"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1695397743,"creation_date":1557982717,"answer_id":56161111,"question_id":56161110,"body_markdown":"Maven uses [slf4j-simple](https://www.slf4j.org/api/org/slf4j/impl/SimpleLogger.html). Its configuration is loaded from the classpath in a file [`simplelogger.properties`](https://github.com/apache/maven/blob/master/apache-maven/src/conf/logging/simplelogger.properties). You can modify the classpath to put your own copy of this file first, but you can also override these properties by setting system properties.\r\n\r\nFirst re-run your build with `-Dorg.slf4j.simpleLogger.showLogName=true` so you can see which classes the logs are coming from. Then adjust log levels as desired by setting additional properties named `-Dorg.slf4.simpleLogger.log.[[classname]]=[[level]]`.\r\n\r\n**You may require the `-B` (batch) flag too**.\r\n\r\nI find it convenient to set these in a `.mvn/maven.config` file in my project, but you can use `MAVEN_OPTS` or the command line instead. An example [`.mvn/maven.config`](https://maven.apache.org/configure.html) might be:\r\n\r\n    -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn\r\n    -Dorg.slf4j.simpleLogger.log.com.igormaznitsa.jcp.maven.PreprocessorMojo=warn\r\n    -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.event.ExecutionEventLogger=warn\r\n    -Dorg.slf4j.simpleLogger.log.org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering=warn\r\n    -Dorg.slf4j.simpleLogger.log.org.apache.maven.plugin.clean.CleanMojo=warn\r\n    -Dorg.slf4j.simpleLogger.showLogName=true\r\n\r\nNote that putting these options in a `simplelogging.properties` of the project *being compiled* will *not work*, it must be in the classpath of the *maven runtime*.\r\n\r\nAlso beware that `.mvn/maven.config` doesn&#39;t appear to support comments. I tried `#`, `;`, `//`, `/* .. */`.","title":"How do I suppress some Maven logs but keep other output?","body":"<p>Maven uses <a href=\"https://www.slf4j.org/api/org/slf4j/impl/SimpleLogger.html\" rel=\"nofollow noreferrer\">slf4j-simple</a>. Its configuration is loaded from the classpath in a file <a href=\"https://github.com/apache/maven/blob/master/apache-maven/src/conf/logging/simplelogger.properties\" rel=\"nofollow noreferrer\"><code>simplelogger.properties</code></a>. You can modify the classpath to put your own copy of this file first, but you can also override these properties by setting system properties.</p>\n<p>First re-run your build with <code>-Dorg.slf4j.simpleLogger.showLogName=true</code> so you can see which classes the logs are coming from. Then adjust log levels as desired by setting additional properties named <code>-Dorg.slf4.simpleLogger.log.[[classname]]=[[level]]</code>.</p>\n<p><strong>You may require the <code>-B</code> (batch) flag too</strong>.</p>\n<p>I find it convenient to set these in a <code>.mvn/maven.config</code> file in my project, but you can use <code>MAVEN_OPTS</code> or the command line instead. An example <a href=\"https://maven.apache.org/configure.html\" rel=\"nofollow noreferrer\"><code>.mvn/maven.config</code></a> might be:</p>\n<pre><code>-Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn\n-Dorg.slf4j.simpleLogger.log.com.igormaznitsa.jcp.maven.PreprocessorMojo=warn\n-Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.event.ExecutionEventLogger=warn\n-Dorg.slf4j.simpleLogger.log.org.apache.maven.shared.filtering.DefaultMavenResourcesFiltering=warn\n-Dorg.slf4j.simpleLogger.log.org.apache.maven.plugin.clean.CleanMojo=warn\n-Dorg.slf4j.simpleLogger.showLogName=true\n</code></pre>\n<p>Note that putting these options in a <code>simplelogging.properties</code> of the project <em>being compiled</em> will <em>not work</em>, it must be in the classpath of the <em>maven runtime</em>.</p>\n<p>Also beware that <code>.mvn/maven.config</code> doesn't appear to support comments. I tried <code>#</code>, <code>;</code>, <code>//</code>, <code>/* .. */</code>.</p>\n"}],"owner":{"account_id":171331,"reputation":310904,"user_id":398670,"accept_rate":73,"display_name":"Craig Ringer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1530,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695397743,"creation_date":1557982717,"question_id":56161110,"body_markdown":"I&#39;m running Maven in a CI environment and want to see some of its log output - but I don&#39;t want to see routine messages about downloading artifacts etc.\r\n\r\nI can use `-q` but that suppresses everything useful too.\r\n\r\nMaven uses slf4j and by default uses the slf4j-simple backend so there&#39;s no `logging.properties` etc, and anyway how would I even find out which class generates the log messages?\r\n\r\ne.g. if I have\r\n\r\n```\r\n[INFO] Scanning for projects...\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Reactor Build Order:\r\n[INFO] \r\n[INFO] XXX JDBC Driver - JDBC 4.2                             [bundle]\r\n[INFO] XXX JDBC Driver aggregate                                   [pom]\r\n[INFO] \r\n[INFO] -----------------&lt; XXX:XXX &gt;------------------\r\n[INFO] Building XXX JDBC Driver - JDBC 4.2 XXXX           [1/2]\r\n[INFO] -------------------------------[ bundle ]-------------------------------\r\n[INFO] \r\n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ XXXX-jdbc ---\r\n[INFO] Deleting XXXX/target\r\n[INFO] \r\n[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-java) @ XXX-jdbc ---\r\n[INFO] \r\n[INFO] --- build-helper-maven-plugin:1.5:parse-version (parse-version) @ XXXX-jdbc ---\r\n[INFO] \r\n[INFO] --- properties-maven-plugin:1.0-alpha-2:read-project-properties (default) @ XXXX-jdbc ---\r\n[WARNING] Ignoring missing properties file: XXX/build.local.properties\r\n[INFO] \r\n[INFO] --- jcp:6.0.1:preprocess (preprocessSources) @ XXX-jdbc ---\r\n[INFO] Added MAVEN property mvn.project.name=XXX JDBC Driver - JDBC 4.2\r\n[INFO] Added MAVEN property mvn.project.version=XX.YY.ZZ\r\n.... blah blah blah ...\r\n-------------------------------------------------------\r\n T E S T S\r\n-------------------------------------------------------\r\n\r\nRunning XXX.TestSuite\r\nTests run: 58, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 6.43 sec\r\n```\r\n\r\n\r\nand for this task I just want the test output, how do I do that?","title":"How do I suppress some Maven logs but keep other output?","body":"<p>I'm running Maven in a CI environment and want to see some of its log output - but I don't want to see routine messages about downloading artifacts etc.</p>\n\n<p>I can use <code>-q</code> but that suppresses everything useful too.</p>\n\n<p>Maven uses slf4j and by default uses the slf4j-simple backend so there's no <code>logging.properties</code> etc, and anyway how would I even find out which class generates the log messages?</p>\n\n<p>e.g. if I have</p>\n\n<pre><code>[INFO] Scanning for projects...\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Build Order:\n[INFO] \n[INFO] XXX JDBC Driver - JDBC 4.2                             [bundle]\n[INFO] XXX JDBC Driver aggregate                                   [pom]\n[INFO] \n[INFO] -----------------&lt; XXX:XXX &gt;------------------\n[INFO] Building XXX JDBC Driver - JDBC 4.2 XXXX           [1/2]\n[INFO] -------------------------------[ bundle ]-------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ XXXX-jdbc ---\n[INFO] Deleting XXXX/target\n[INFO] \n[INFO] --- maven-enforcer-plugin:1.3.1:enforce (enforce-java) @ XXX-jdbc ---\n[INFO] \n[INFO] --- build-helper-maven-plugin:1.5:parse-version (parse-version) @ XXXX-jdbc ---\n[INFO] \n[INFO] --- properties-maven-plugin:1.0-alpha-2:read-project-properties (default) @ XXXX-jdbc ---\n[WARNING] Ignoring missing properties file: XXX/build.local.properties\n[INFO] \n[INFO] --- jcp:6.0.1:preprocess (preprocessSources) @ XXX-jdbc ---\n[INFO] Added MAVEN property mvn.project.name=XXX JDBC Driver - JDBC 4.2\n[INFO] Added MAVEN property mvn.project.version=XX.YY.ZZ\n.... blah blah blah ...\n-------------------------------------------------------\n T E S T S\n-------------------------------------------------------\n\nRunning XXX.TestSuite\nTests run: 58, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 6.43 sec\n</code></pre>\n\n<p>and for this task I just want the test output, how do I do that?</p>\n"},{"tags":["java","sql","arrays","base64","uuid"],"comments":[{"owner":{"account_id":31905,"reputation":36212,"user_id":87971,"accept_rate":94,"display_name":"Stijn Sanders"},"score":0,"creation_date":1240323760,"post_id":772802,"comment_id":583941,"body_markdown":"One way to look at it is that a UUID is 128 random bits, so 6 bits per base64-item, is 128/6=21.3, so you&#39;re right that you need 22 base64 positions to store the same data.","body":"One way to look at it is that a UUID is 128 random bits, so 6 bits per base64-item, is 128/6=21.3, so you&#39;re right that you need 22 base64 positions to store the same data."},{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":1,"creation_date":1240325694,"post_id":772802,"comment_id":584072,"body_markdown":"You previous question seems essentially the same: http://stackoverflow.com/questions/772325/what-is-the-smallest-way-to-store-a-uuid-that-is-human-readable","body":"You previous question seems essentially the same: <a href=\"http://stackoverflow.com/questions/772325/what-is-the-smallest-way-to-store-a-uuid-that-is-human-readable\" title=\"what is the smallest way to store a uuid that is human readable\">stackoverflow.com/questions/772325/&hellip;</a>"},{"owner":{"account_id":42844,"reputation":4760,"user_id":124974,"accept_rate":69,"display_name":"Jon Tirsen"},"score":1,"creation_date":1328012159,"post_id":772802,"comment_id":11398454,"body_markdown":"I&#39;m not sure your code is correct in the second for loop of asByteBuffer you subtract i from 7 but i iterates from 8 to 16 which means it will shift by a negative number. IIRC &lt;&lt;&lt; wraps around but it still doesn&#39;t seem correct.","body":"I&#39;m not sure your code is correct in the second for loop of asByteBuffer you subtract i from 7 but i iterates from 8 to 16 which means it will shift by a negative number. IIRC &lt;&lt;&lt; wraps around but it still doesn&#39;t seem correct."},{"owner":{"account_id":42844,"reputation":4760,"user_id":124974,"accept_rate":69,"display_name":"Jon Tirsen"},"score":1,"creation_date":1328012184,"post_id":772802,"comment_id":11398463,"body_markdown":"I think it&#39;s easier to just use ByteBuffer to convert the two longs to a byte array like in this question: http://stackoverflow.com/questions/6881659/how-to-convert-two-longs-to-a-byte-array-how-to-convert-uuid-to-byte-array","body":"I think it&#39;s easier to just use ByteBuffer to convert the two longs to a byte array like in this question: <a href=\"http://stackoverflow.com/questions/6881659/how-to-convert-two-longs-to-a-byte-array-how-to-convert-uuid-to-byte-array\" title=\"how to convert two longs to a byte array how to convert uuid to byte array\">stackoverflow.com/questions/6881659/&hellip;</a>"},{"owner":{"account_id":370787,"reputation":2276,"user_id":718960,"accept_rate":33,"display_name":"theking2"},"score":0,"creation_date":1664224588,"post_id":772802,"comment_id":130418257,"body_markdown":"What is the point of &quot;human readable&quot;? Take a look at what the  uuid_short() mysql/mariadb function  does.","body":"What is the point of &quot;human readable&quot;? Take a look at what the  uuid_short() mysql/mariadb function  does."},{"owner":{"account_id":15834,"reputation":13713,"user_id":33863,"accept_rate":92,"display_name":"mainstringargs"},"score":0,"creation_date":1664226375,"post_id":772802,"comment_id":130418697,"body_markdown":"URLs and sharing them","body":"URLs and sharing them"}],"answers":[{"tags":[],"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1240324233,"creation_date":1240324233,"answer_id":772859,"question_id":772802,"body_markdown":"You don&#39;t say what DBMS you&#39;re using, but it seems that RAW would be the best approach if you&#39;re concerned about saving space. You just need to remember to convert for all queries, or you&#39;ll risk a huge performance drop.\r\n\r\nBut I have to ask: are bytes really that expensive where you live?","title":"Storing UUID as base64 String","body":"<p>You don't say what DBMS you're using, but it seems that RAW would be the best approach if you're concerned about saving space. You just need to remember to convert for all queries, or you'll risk a huge performance drop.</p>\n\n<p>But I have to ask: are bytes really that expensive where you live?</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":1,"up_vote_count":36,"is_accepted":true,"score":35,"last_activity_date":1598625378,"creation_date":1240325178,"answer_id":772932,"question_id":772802,"body_markdown":"You can safely drop the padding &quot;==&quot; in this application. If you were to decode the base-64 text back to bytes, some libraries would expect it to be there, but since you are just using the resulting string as a key, it&#39;s not a problem.\r\n\r\nI&#39;d use Base-64 because its encoding characters can be URL-safe, and it looks less like gibberish. But there&#39;s also [Base-85][1]. It uses more symbols and codes 4 bytes as 5 characters, so you could get your text down to 20 characters.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Base-85","title":"Storing UUID as base64 String","body":"<p>You can safely drop the padding &quot;==&quot; in this application. If you were to decode the base-64 text back to bytes, some libraries would expect it to be there, but since you are just using the resulting string as a key, it's not a problem.</p>\n<p>I'd use Base-64 because its encoding characters can be URL-safe, and it looks less like gibberish. But there's also <a href=\"http://en.wikipedia.org/wiki/Base-85\" rel=\"nofollow noreferrer\">Base-85</a>. It uses more symbols and codes 4 bytes as 5 characters, so you could get your text down to 20 characters.</p>\n"},{"tags":[],"owner":{"account_id":32641,"reputation":32939,"user_id":90723,"accept_rate":94,"display_name":"Bob Aman"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1240587322,"creation_date":1240587322,"answer_id":786372,"question_id":772802,"body_markdown":"I have an application where I&#39;m doing almost exactly this.  22 char encoded UUID.  It works fine.  However, the main reason I&#39;m doing it this way is that the IDs are exposed in the web app&#39;s URIs, and 36 characters is really quite big for something that appears in a URI.  22 characters is still kinda long, but we make do.\r\n\r\nHere&#39;s the Ruby code for this:\r\n\r\n      # Make an array of 64 URL-safe characters\r\n      CHARS64 = (&quot;a&quot;..&quot;z&quot;).to_a + (&quot;A&quot;..&quot;Z&quot;).to_a + (&quot;0&quot;..&quot;9&quot;).to_a + [&quot;-&quot;, &quot;_&quot;]\r\n      # Return a 22 byte URL-safe string, encoded six bits at a time using 64 characters\r\n      def to_s22\r\n        integer = self.to_i # UUID as a raw integer\r\n        rval = &quot;&quot;\r\n        22.times do\r\n          c = (integer &amp; 0x3F)\r\n          rval += CHARS64[c]\r\n          integer = integer &gt;&gt; 6\r\n        end\r\n        return rval.reverse\r\n      end\r\n\r\nIt&#39;s not exactly the same as base64 encoding because base64 uses characters that would have to be escaped if they appeared in a URI path component.  The Java implementation is likely to be quite different since you&#39;re more likely to have an array of raw bytes instead of a really big integer.\r\n","title":"Storing UUID as base64 String","body":"<p>I have an application where I'm doing almost exactly this.  22 char encoded UUID.  It works fine.  However, the main reason I'm doing it this way is that the IDs are exposed in the web app's URIs, and 36 characters is really quite big for something that appears in a URI.  22 characters is still kinda long, but we make do.</p>\n\n<p>Here's the Ruby code for this:</p>\n\n<pre><code>  # Make an array of 64 URL-safe characters\n  CHARS64 = (\"a\"..\"z\").to_a + (\"A\"..\"Z\").to_a + (\"0\"..\"9\").to_a + [\"-\", \"_\"]\n  # Return a 22 byte URL-safe string, encoded six bits at a time using 64 characters\n  def to_s22\n    integer = self.to_i # UUID as a raw integer\n    rval = \"\"\n    22.times do\n      c = (integer &amp; 0x3F)\n      rval += CHARS64[c]\n      integer = integer &gt;&gt; 6\n    end\n    return rval.reverse\n  end\n</code></pre>\n\n<p>It's not exactly the same as base64 encoding because base64 uses characters that would have to be escaped if they appeared in a URI path component.  The Java implementation is likely to be quite different since you're more likely to have an array of raw bytes instead of a really big integer.</p>\n"},{"tags":[],"owner":{"account_id":34729,"reputation":747,"user_id":98177,"accept_rate":67,"display_name":"Dennis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1315755389,"creation_date":1315755389,"answer_id":7379294,"question_id":772802,"body_markdown":"Below is what I use for a UUID (Comb style). It includes code for converting a uuid string or uuid type to base64. I do it per 64 bits, so I don&#39;t deal with any equal signs:\r\n\r\nJAVA\r\n--------\r\n    import java.util.Calendar;\r\n    import java.util.UUID;\r\n    import org.apache.commons.codec.binary.Base64;\r\n    \r\n    public class UUIDUtil{\r\n    \tpublic static UUID combUUID(){\r\n    \t    private UUID srcUUID = UUID.randomUUID();\r\n    \t    private java.sql.Timestamp ts = new java.sql.Timestamp(Calendar.getInstance().getTime().getTime());\r\n    \t\t\r\n    \t\tlong upper16OfLowerUUID = this.zeroLower48BitsOfLong( srcUUID.getLeastSignificantBits() );\r\n    \t\tlong lower48Time = UUIDUtil.zeroUpper16BitsOfLong( ts );\r\n    \t\tlong lowerLongForNewUUID = upper16OfLowerUUID | lower48Time;\r\n    \t\treturn new UUID( srcUUID.getMostSignificantBits(), lowerLongForNewUUID );\r\n        }\t\r\n    \tpublic static base64URLSafeOfUUIDObject( UUID uuid ){\r\n    \t\tbyte[] bytes = ByteBuffer.allocate(16).putLong(0, uuid.getLeastSignificantBits()).putLong(8, uuid.getMostSignificantBits()).array();\r\n    \t\treturn Base64.encodeBase64URLSafeString( bytes );\r\n    \t}\r\n    \tpublic static base64URLSafeOfUUIDString( String uuidString ){\r\n    \tUUID uuid = UUID.fromString( uuidString );\r\n\t\t    return UUIDUtil.base64URLSafeOfUUIDObject( uuid );\r\n    \t}\r\n        private static long zeroLower48BitsOfLong( long longVar ){\r\n    \t\tlong upper16BitMask =  -281474976710656L;\r\n    \t\treturn longVar &amp; upper16BitMask;\r\n    \t}\r\n    \tprivate static void zeroUpper16BitsOfLong( long longVar ){\r\n    \t    long lower48BitMask =  281474976710656L-1L;\r\n    \t    return longVar &amp; lower48BitMask;\r\n    \t}\r\n    }","title":"Storing UUID as base64 String","body":"<p>Below is what I use for a UUID (Comb style). It includes code for converting a uuid string or uuid type to base64. I do it per 64 bits, so I don't deal with any equal signs:</p>\n\n<h2>JAVA</h2>\n\n<pre><code>import java.util.Calendar;\nimport java.util.UUID;\nimport org.apache.commons.codec.binary.Base64;\n\npublic class UUIDUtil{\n    public static UUID combUUID(){\n        private UUID srcUUID = UUID.randomUUID();\n        private java.sql.Timestamp ts = new java.sql.Timestamp(Calendar.getInstance().getTime().getTime());\n\n        long upper16OfLowerUUID = this.zeroLower48BitsOfLong( srcUUID.getLeastSignificantBits() );\n        long lower48Time = UUIDUtil.zeroUpper16BitsOfLong( ts );\n        long lowerLongForNewUUID = upper16OfLowerUUID | lower48Time;\n        return new UUID( srcUUID.getMostSignificantBits(), lowerLongForNewUUID );\n    }   \n    public static base64URLSafeOfUUIDObject( UUID uuid ){\n        byte[] bytes = ByteBuffer.allocate(16).putLong(0, uuid.getLeastSignificantBits()).putLong(8, uuid.getMostSignificantBits()).array();\n        return Base64.encodeBase64URLSafeString( bytes );\n    }\n    public static base64URLSafeOfUUIDString( String uuidString ){\n    UUID uuid = UUID.fromString( uuidString );\n        return UUIDUtil.base64URLSafeOfUUIDObject( uuid );\n    }\n    private static long zeroLower48BitsOfLong( long longVar ){\n        long upper16BitMask =  -281474976710656L;\n        return longVar &amp; upper16BitMask;\n    }\n    private static void zeroUpper16BitsOfLong( long longVar ){\n        long lower48BitMask =  281474976710656L-1L;\n        return longVar &amp; lower48BitMask;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":522088,"reputation":2057,"user_id":977216,"display_name":"swill"},"down_vote_count":0,"up_vote_count":70,"is_accepted":false,"score":70,"last_activity_date":1476482296,"creation_date":1361484653,"answer_id":15013205,"question_id":772802,"body_markdown":"I was also trying to do something similar.  I am working with a Java application which uses UUIDs of the form `6fcb514b-b878-4c9d-95b7-8dc3a7ce6fd8` (which are generated with the standard UUID lib in Java).  In my case I needed to be able to get this UUID down to 30 characters or less.  I used Base64 and these are my convenience functions.  Hopefully they will be helpful for someone as the solution was not obvious to me right away.\r\n\r\n**Usage:**\r\n\r\n    String uuid_str = &quot;6fcb514b-b878-4c9d-95b7-8dc3a7ce6fd8&quot;;\r\n    String uuid_as_64 = uuidToBase64(uuid_str);\r\n    System.out.println(&quot;as base64: &quot;+uuid_as_64);\r\n    System.out.println(&quot;as uuid: &quot;+uuidFromBase64(uuid_as_64));\r\n\r\n**Output:**\r\n\r\n    as base64: b8tRS7h4TJ2Vt43Dp85v2A\r\n    as uuid  : 6fcb514b-b878-4c9d-95b7-8dc3a7ce6fd8\r\n\r\n**Functions:**\r\n   \r\n    import org.apache.commons.codec.binary.Base64;\r\n\r\n    private static String uuidToBase64(String str) {\r\n        Base64 base64 = new Base64();\r\n        UUID uuid = UUID.fromString(str);\r\n        ByteBuffer bb = ByteBuffer.wrap(new byte[16]);\r\n        bb.putLong(uuid.getMostSignificantBits());\r\n        bb.putLong(uuid.getLeastSignificantBits());\r\n        return base64.encodeBase64URLSafeString(bb.array());\r\n    }\r\n    private static String uuidFromBase64(String str) {\r\n        Base64 base64 = new Base64(); \r\n        byte[] bytes = base64.decodeBase64(str);\r\n        ByteBuffer bb = ByteBuffer.wrap(bytes);\r\n        UUID uuid = new UUID(bb.getLong(), bb.getLong());\r\n        return uuid.toString();\r\n    }","title":"Storing UUID as base64 String","body":"<p>I was also trying to do something similar.  I am working with a Java application which uses UUIDs of the form <code>6fcb514b-b878-4c9d-95b7-8dc3a7ce6fd8</code> (which are generated with the standard UUID lib in Java).  In my case I needed to be able to get this UUID down to 30 characters or less.  I used Base64 and these are my convenience functions.  Hopefully they will be helpful for someone as the solution was not obvious to me right away.</p>\n\n<p><strong>Usage:</strong></p>\n\n<pre><code>String uuid_str = \"6fcb514b-b878-4c9d-95b7-8dc3a7ce6fd8\";\nString uuid_as_64 = uuidToBase64(uuid_str);\nSystem.out.println(\"as base64: \"+uuid_as_64);\nSystem.out.println(\"as uuid: \"+uuidFromBase64(uuid_as_64));\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>as base64: b8tRS7h4TJ2Vt43Dp85v2A\nas uuid  : 6fcb514b-b878-4c9d-95b7-8dc3a7ce6fd8\n</code></pre>\n\n<p><strong>Functions:</strong></p>\n\n<pre><code>import org.apache.commons.codec.binary.Base64;\n\nprivate static String uuidToBase64(String str) {\n    Base64 base64 = new Base64();\n    UUID uuid = UUID.fromString(str);\n    ByteBuffer bb = ByteBuffer.wrap(new byte[16]);\n    bb.putLong(uuid.getMostSignificantBits());\n    bb.putLong(uuid.getLeastSignificantBits());\n    return base64.encodeBase64URLSafeString(bb.array());\n}\nprivate static String uuidFromBase64(String str) {\n    Base64 base64 = new Base64(); \n    byte[] bytes = base64.decodeBase64(str);\n    ByteBuffer bb = ByteBuffer.wrap(bytes);\n    UUID uuid = new UUID(bb.getLong(), bb.getLong());\n    return uuid.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":552790,"reputation":1926,"user_id":918030,"accept_rate":40,"display_name":"stikkos"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1375864405,"creation_date":1375702407,"answer_id":18057117,"question_id":772802,"body_markdown":"Here&#39;s my code, it uses org.apache.commons.codec.binary.Base64 to produce url-safe unique strings that are 22 characters in length (and that have the same uniqueness as UUID).\r\n\r\n    private static Base64 BASE64 = new Base64(true);\r\n\tpublic static String generateKey(){\r\n\t\tUUID uuid = UUID.randomUUID();\r\n    \tbyte[] uuidArray = KeyGenerator.toByteArray(uuid);\r\n\t\tbyte[] encodedArray = BASE64.encode(uuidArray);\r\n\t\tString returnValue = new String(encodedArray);\r\n\t\treturnValue = StringUtils.removeEnd(returnValue, &quot;\\r\\n&quot;);\r\n        return returnValue;\r\n\t}\r\n\tpublic static UUID convertKey(String key){\r\n\t\tUUID returnValue = null;\r\n\t\tif(StringUtils.isNotBlank(key)){\r\n            // Convert base64 string to a byte array\r\n\t\t\tbyte[] decodedArray = BASE64.decode(key);\r\n    \t\treturnValue = KeyGenerator.fromByteArray(decodedArray);\r\n\t\t}\r\n\t\treturn returnValue;\r\n\t}\r\n\tprivate static byte[] toByteArray(UUID uuid) {\r\n\t\tbyte[] byteArray = new byte[(Long.SIZE / Byte.SIZE) * 2];\r\n\t\tByteBuffer buffer = ByteBuffer.wrap(byteArray);\r\n\t\tLongBuffer longBuffer = buffer.asLongBuffer();\r\n\t\tlongBuffer.put(new long[] { uuid.getMostSignificantBits(), uuid.getLeastSignificantBits() });\r\n\t\treturn byteArray;\r\n\t}\r\n\tprivate static UUID fromByteArray(byte[] bytes) {\r\n\t\tByteBuffer buffer = ByteBuffer.wrap(bytes);\r\n\t \tLongBuffer longBuffer = buffer.asLongBuffer();\r\n\t  \treturn new UUID(longBuffer.get(0), longBuffer.get(1));\r\n\t}","title":"Storing UUID as base64 String","body":"<p>Here's my code, it uses org.apache.commons.codec.binary.Base64 to produce url-safe unique strings that are 22 characters in length (and that have the same uniqueness as UUID).</p>\n\n<pre><code>private static Base64 BASE64 = new Base64(true);\npublic static String generateKey(){\n    UUID uuid = UUID.randomUUID();\n    byte[] uuidArray = KeyGenerator.toByteArray(uuid);\n    byte[] encodedArray = BASE64.encode(uuidArray);\n    String returnValue = new String(encodedArray);\n    returnValue = StringUtils.removeEnd(returnValue, \"\\r\\n\");\n    return returnValue;\n}\npublic static UUID convertKey(String key){\n    UUID returnValue = null;\n    if(StringUtils.isNotBlank(key)){\n        // Convert base64 string to a byte array\n        byte[] decodedArray = BASE64.decode(key);\n        returnValue = KeyGenerator.fromByteArray(decodedArray);\n    }\n    return returnValue;\n}\nprivate static byte[] toByteArray(UUID uuid) {\n    byte[] byteArray = new byte[(Long.SIZE / Byte.SIZE) * 2];\n    ByteBuffer buffer = ByteBuffer.wrap(byteArray);\n    LongBuffer longBuffer = buffer.asLongBuffer();\n    longBuffer.put(new long[] { uuid.getMostSignificantBits(), uuid.getLeastSignificantBits() });\n    return byteArray;\n}\nprivate static UUID fromByteArray(byte[] bytes) {\n    ByteBuffer buffer = ByteBuffer.wrap(bytes);\n    LongBuffer longBuffer = buffer.asLongBuffer();\n    return new UUID(longBuffer.get(0), longBuffer.get(1));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1044212,"reputation":3002,"user_id":1049542,"accept_rate":36,"display_name":"Sergey Ponomarev"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1554207403,"creation_date":1554207403,"answer_id":55474589,"question_id":772802,"body_markdown":"Here is an example with `java.util.Base64` introduced in JDK8:\r\n\r\n    import java.nio.ByteBuffer;\r\n    import java.util.Base64;\r\n    import java.util.Base64.Encoder;\r\n    import java.util.UUID;\r\n    \r\n    public class Uuid64 {\r\n    \r\n      private static final Encoder BASE64_URL_ENCODER = Base64.getUrlEncoder().withoutPadding();\r\n    \r\n      public static void main(String[] args) {\r\n        // String uuidStr = UUID.randomUUID().toString();\r\n        String uuidStr = &quot;eb55c9cc-1fc1-43da-9adb-d9c66bb259ad&quot;;\r\n        String uuid64 = uuidHexToUuid64(uuidStr);\r\n        System.out.println(uuid64); //=&gt; 61XJzB_BQ9qa29nGa7JZrQ\r\n        System.out.println(uuid64.length()); //=&gt; 22\r\n        String uuidHex = uuid64ToUuidHex(uuid64);\r\n        System.out.println(uuidHex); //=&gt; eb55c9cc-1fc1-43da-9adb-d9c66bb259ad\r\n      }\r\n    \r\n      public static String uuidHexToUuid64(String uuidStr) {\r\n        UUID uuid = UUID.fromString(uuidStr);\r\n        byte[] bytes = uuidToBytes(uuid);\r\n        return BASE64_URL_ENCODER.encodeToString(bytes);\r\n      }\r\n    \r\n      public static String uuid64ToUuidHex(String uuid64) {\r\n        byte[] decoded = Base64.getUrlDecoder().decode(uuid64);\r\n        UUID uuid = uuidFromBytes(decoded);\r\n        return uuid.toString();\r\n      }\r\n    \r\n      public static byte[] uuidToBytes(UUID uuid) {\r\n        ByteBuffer bb = ByteBuffer.wrap(new byte[16]);\r\n        bb.putLong(uuid.getMostSignificantBits());\r\n        bb.putLong(uuid.getLeastSignificantBits());\r\n        return bb.array();\r\n      }\r\n    \r\n      public static UUID uuidFromBytes(byte[] decoded) {\r\n        ByteBuffer bb = ByteBuffer.wrap(decoded);\r\n        long mostSigBits = bb.getLong();\r\n        long leastSigBits = bb.getLong();\r\n        return new UUID(mostSigBits, leastSigBits);\r\n      }\r\n    }\r\n\r\nThe UUID encoded in Base64 is URL safe and without padding.","title":"Storing UUID as base64 String","body":"<p>Here is an example with <code>java.util.Base64</code> introduced in JDK8:</p>\n\n<pre><code>import java.nio.ByteBuffer;\nimport java.util.Base64;\nimport java.util.Base64.Encoder;\nimport java.util.UUID;\n\npublic class Uuid64 {\n\n  private static final Encoder BASE64_URL_ENCODER = Base64.getUrlEncoder().withoutPadding();\n\n  public static void main(String[] args) {\n    // String uuidStr = UUID.randomUUID().toString();\n    String uuidStr = \"eb55c9cc-1fc1-43da-9adb-d9c66bb259ad\";\n    String uuid64 = uuidHexToUuid64(uuidStr);\n    System.out.println(uuid64); //=&gt; 61XJzB_BQ9qa29nGa7JZrQ\n    System.out.println(uuid64.length()); //=&gt; 22\n    String uuidHex = uuid64ToUuidHex(uuid64);\n    System.out.println(uuidHex); //=&gt; eb55c9cc-1fc1-43da-9adb-d9c66bb259ad\n  }\n\n  public static String uuidHexToUuid64(String uuidStr) {\n    UUID uuid = UUID.fromString(uuidStr);\n    byte[] bytes = uuidToBytes(uuid);\n    return BASE64_URL_ENCODER.encodeToString(bytes);\n  }\n\n  public static String uuid64ToUuidHex(String uuid64) {\n    byte[] decoded = Base64.getUrlDecoder().decode(uuid64);\n    UUID uuid = uuidFromBytes(decoded);\n    return uuid.toString();\n  }\n\n  public static byte[] uuidToBytes(UUID uuid) {\n    ByteBuffer bb = ByteBuffer.wrap(new byte[16]);\n    bb.putLong(uuid.getMostSignificantBits());\n    bb.putLong(uuid.getLeastSignificantBits());\n    return bb.array();\n  }\n\n  public static UUID uuidFromBytes(byte[] decoded) {\n    ByteBuffer bb = ByteBuffer.wrap(decoded);\n    long mostSigBits = bb.getLong();\n    long leastSigBits = bb.getLong();\n    return new UUID(mostSigBits, leastSigBits);\n  }\n}\n</code></pre>\n\n<p>The UUID encoded in Base64 is URL safe and without padding.</p>\n"},{"tags":[],"owner":{"account_id":20221,"reputation":602,"user_id":48119,"accept_rate":75,"display_name":"Jan Rychter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1580817159,"creation_date":1580817159,"answer_id":60056828,"question_id":772802,"body_markdown":"This is not exactly what you asked for (it isn&#39;t Base64), but worth looking at, because of added flexibility: there is a Clojure library that implements a compact 26-char URL-safe representation of UUIDs (https://github.com/tonsky/compact-uuids).\r\n\r\nSome highlights:\r\n\r\n* Produces strings that are 30% smaller (26 chars vs traditional 36 chars)\r\n* Supports full UUID range (128 bits)\r\n* Encoding-safe (uses only readable characters from ASCII)\r\n* URL/file-name safe\r\n* Lowercase/uppercase safe\r\n* Avoids ambiguous characters (i/I/l/L/1/O/o/0)\r\n* Alphabetical sort on encoded 26-char strings matches default UUID sort order\r\n\r\nThese are rather nice properties. I&#39;ve been using this encoding in my applications both for database keys and for user-visible identifiers, and it works very well.","title":"Storing UUID as base64 String","body":"<p>This is not exactly what you asked for (it isn't Base64), but worth looking at, because of added flexibility: there is a Clojure library that implements a compact 26-char URL-safe representation of UUIDs (<a href=\"https://github.com/tonsky/compact-uuids\" rel=\"nofollow noreferrer\">https://github.com/tonsky/compact-uuids</a>).</p>\n\n<p>Some highlights:</p>\n\n<ul>\n<li>Produces strings that are 30% smaller (26 chars vs traditional 36 chars)</li>\n<li>Supports full UUID range (128 bits)</li>\n<li>Encoding-safe (uses only readable characters from ASCII)</li>\n<li>URL/file-name safe</li>\n<li>Lowercase/uppercase safe</li>\n<li>Avoids ambiguous characters (i/I/l/L/1/O/o/0)</li>\n<li>Alphabetical sort on encoded 26-char strings matches default UUID sort order</li>\n</ul>\n\n<p>These are rather nice properties. I've been using this encoding in my applications both for database keys and for user-visible identifiers, and it works very well.</p>\n"},{"tags":[],"owner":{"account_id":32915,"reputation":10482,"user_id":1038182,"accept_rate":78,"display_name":"Ori Popowski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1617284525,"creation_date":1617284525,"answer_id":66905629,"question_id":772802,"body_markdown":"Surprised no one mentioned `uuidToByteArray()` from commons-lang3.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n        &lt;version&gt;3.12.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd then the code will be\r\n\r\n    import org.apache.commons.lang3.Conversion;\r\n    import java.util.*;\r\n\r\n\r\n    public static byte[] asByteArray(UUID uuid) {\r\n        return Conversion.uuidToByteArray(uuid, new byte[16], 0, 16);\r\n    }","title":"Storing UUID as base64 String","body":"<p>Surprised no one mentioned <code>uuidToByteArray()</code> from commons-lang3.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n    &lt;version&gt;3.12.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And then the code will be</p>\n<pre><code>import org.apache.commons.lang3.Conversion;\nimport java.util.*;\n\n\npublic static byte[] asByteArray(UUID uuid) {\n    return Conversion.uuidToByteArray(uuid, new byte[16], 0, 16);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1053260,"reputation":1032,"user_id":1056610,"display_name":"fabiolimace"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695397597,"creation_date":1629818571,"answer_id":68909992,"question_id":772802,"body_markdown":"\r\nThe codecs [`Base64Codec`](https://github.com/f4b6a3/uuid-creator/blob/master/src/main/java/com/github/f4b6a3/uuid/codec/base/Base64Codec.java) and [`Base64UrlCodec`](https://github.com/f4b6a3/uuid-creator/blob/master/src/main/java/com/github/f4b6a3/uuid/codec/base/Base64UrlCodec.java) can encode UUIDs efficiently to base-64 and base-64-url.\r\n\r\n```java\r\n// Returns a base-64 string\r\n// input:: 01234567-89AB-4DEF-A123-456789ABCDEF\r\n// output: ASNFZ4mrTe+hI0VniavN7w\r\nString string = Base64Codec.INSTANCE.encode(uuid);\r\n```\r\n```java\r\n// Returns a base-64-url string\r\n// input:: 01234567-89AB-4DEF-A123-456789ABCDEF\r\n// output: ASNFZ4mrTe-hI0VniavN7w\r\nString string = Base64UrlCodec.INSTANCE.encode(uuid);\r\n```\r\n\r\nThere are codecs for other encodings in the same [package](https://github.com/f4b6a3/uuid-creator/tree/master/src/main/java/com/github/f4b6a3/uuid/codec/base) of [uuid-creator](https://github.com/f4b6a3/uuid-creator).\r\n\r\n---\r\n**Disclaimer**: I&#39;m the main contributor of `uuid-creator`.","title":"Storing UUID as base64 String","body":"<p>The codecs <a href=\"https://github.com/f4b6a3/uuid-creator/blob/master/src/main/java/com/github/f4b6a3/uuid/codec/base/Base64Codec.java\" rel=\"nofollow noreferrer\"><code>Base64Codec</code></a> and <a href=\"https://github.com/f4b6a3/uuid-creator/blob/master/src/main/java/com/github/f4b6a3/uuid/codec/base/Base64UrlCodec.java\" rel=\"nofollow noreferrer\"><code>Base64UrlCodec</code></a> can encode UUIDs efficiently to base-64 and base-64-url.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Returns a base-64 string\n// input:: 01234567-89AB-4DEF-A123-456789ABCDEF\n// output: ASNFZ4mrTe+hI0VniavN7w\nString string = Base64Codec.INSTANCE.encode(uuid);\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// Returns a base-64-url string\n// input:: 01234567-89AB-4DEF-A123-456789ABCDEF\n// output: ASNFZ4mrTe-hI0VniavN7w\nString string = Base64UrlCodec.INSTANCE.encode(uuid);\n</code></pre>\n<p>There are codecs for other encodings in the same <a href=\"https://github.com/f4b6a3/uuid-creator/tree/master/src/main/java/com/github/f4b6a3/uuid/codec/base\" rel=\"nofollow noreferrer\">package</a> of <a href=\"https://github.com/f4b6a3/uuid-creator\" rel=\"nofollow noreferrer\">uuid-creator</a>.</p>\n<hr />\n<p><strong>Disclaimer</strong>: I'm the main contributor of <code>uuid-creator</code>.</p>\n"},{"tags":[],"owner":{"account_id":1080327,"reputation":819,"user_id":1077487,"display_name":"Mitch1077487"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671130474,"creation_date":1671130474,"answer_id":74816271,"question_id":772802,"body_markdown":"Here&#39;s my approach in kotlin:\r\n```\r\n            val uuid: UUID = UUID.randomUUID()\r\n            val uid = BaseEncoding.base64Url().encode(\r\n                ByteBuffer.allocate(16)\r\n                    .putLong(uuid.mostSignificantBits)\r\n                    .putLong(uuid.leastSignificantBits)\r\n                    .array()\r\n            ).trimEnd(&#39;=&#39;)\r\n\r\n```","title":"Storing UUID as base64 String","body":"<p>Here's my approach in kotlin:</p>\n<pre><code>            val uuid: UUID = UUID.randomUUID()\n            val uid = BaseEncoding.base64Url().encode(\n                ByteBuffer.allocate(16)\n                    .putLong(uuid.mostSignificantBits)\n                    .putLong(uuid.leastSignificantBits)\n                    .array()\n            ).trimEnd('=')\n\n</code></pre>\n"}],"owner":{"account_id":15834,"reputation":13713,"user_id":33863,"accept_rate":92,"display_name":"mainstringargs"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117786,"favorite_count":0,"down_vote_count":0,"up_vote_count":94,"accepted_answer_id":772932,"answer_count":11,"score":94,"last_activity_date":1695397597,"creation_date":1240323481,"question_id":772802,"body_markdown":"I have been experimenting with using UUIDs as database keys.  I want to take up the least amount of bytes as possible, while still keeping the UUID representation human readable.\r\n\r\nI think that I have gotten it down to 22 bytes using base64 and removing some trailing &quot;==&quot; that seem to be unnecessary to store for my purposes.  Are there any flaws with this approach?  \r\n\r\nBasically my test code does a bunch of conversions to get the UUID down to a 22 byte String, then converts it back into a UUID.\r\n\r\n    import java.io.IOException;\r\n    import java.util.UUID;\r\n    \r\n    public class UUIDTest {\r\n    \r\n    \tpublic static void main(String[] args){\r\n    \t\tUUID uuid = UUID.randomUUID();\r\n    \t\tSystem.out.println(&quot;UUID String: &quot; + uuid.toString());\r\n    \t\tSystem.out.println(&quot;Number of Bytes: &quot; + uuid.toString().getBytes().length);\r\n    \t\tSystem.out.println();\r\n    \t\t\r\n    \t\tbyte[] uuidArr = asByteArray(uuid);\r\n    \t\tSystem.out.print(&quot;UUID Byte Array: &quot;);\r\n    \t\tfor(byte b: uuidArr){\r\n    \t\t\tSystem.out.print(b +&quot; &quot;);\r\n    \t\t}\r\n    \t\tSystem.out.println();\r\n    \t\tSystem.out.println(&quot;Number of Bytes: &quot; + uuidArr.length);\r\n    \t\tSystem.out.println();\r\n    \t\t\r\n    \t\t\r\n    \t    try {\r\n    \t        // Convert a byte array to base64 string\r\n    \t        String s = new sun.misc.BASE64Encoder().encode(uuidArr);\r\n    \t        System.out.println(&quot;UUID Base64 String: &quot; +s);\r\n    \t        System.out.println(&quot;Number of Bytes: &quot; + s.getBytes().length);\r\n    \t        System.out.println();\r\n    \t        \r\n    \t        \r\n    \t        String trimmed = s.split(&quot;=&quot;)[0];\r\n    \t        System.out.println(&quot;UUID Base64 String Trimmed: &quot; +trimmed);\r\n    \t        System.out.println(&quot;Number of Bytes: &quot; + trimmed.getBytes().length);\r\n    \t        System.out.println();\r\n    \t        \r\n    \t        // Convert base64 string to a byte array\r\n    \t        byte[] backArr = new sun.misc.BASE64Decoder().decodeBuffer(trimmed);\r\n    \t\t\tSystem.out.print(&quot;Back to UUID Byte Array: &quot;);\r\n    \t\t\tfor(byte b: backArr){\r\n    \t\t\t\tSystem.out.print(b +&quot; &quot;);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println();\r\n    \t\t\tSystem.out.println(&quot;Number of Bytes: &quot; + backArr.length);\r\n    \t\t\t\r\n    \t\t\tbyte[] fixedArr = new byte[16];\r\n    \t\t\tfor(int i= 0; i&lt;16; i++){\r\n    \t\t\t\tfixedArr[i] = backArr[i];\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println();\r\n    \t\t\tSystem.out.print(&quot;Fixed UUID Byte Array: &quot;);\r\n    \t\t\tfor(byte b: fixedArr){\r\n    \t\t\t\tSystem.out.print(b +&quot; &quot;);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println();\r\n    \t\t\tSystem.out.println(&quot;Number of Bytes: &quot; + fixedArr.length);\r\n    \t\t\t\r\n    \t\t\tSystem.out.println();\r\n    \t\t\tUUID newUUID = toUUID(fixedArr);\r\n    \t\t\tSystem.out.println(&quot;UUID String: &quot; + newUUID.toString());\r\n    \t\t\tSystem.out.println(&quot;Number of Bytes: &quot; + newUUID.toString().getBytes().length);\r\n    \t\t\tSystem.out.println();\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(&quot;Equal to Start UUID? &quot;+newUUID.equals(uuid));\r\n    \t\t\tif(!newUUID.equals(uuid)){\r\n    \t\t\t\tSystem.exit(0);\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t\r\n    \t    } catch (IOException e) {\r\n    \t    }\r\n    \r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic static byte[] asByteArray(UUID uuid) {\r\n    \r\n    \t\tlong msb = uuid.getMostSignificantBits();\r\n    \t\tlong lsb = uuid.getLeastSignificantBits();\r\n    \t\tbyte[] buffer = new byte[16];\r\n    \r\n    \t\tfor (int i = 0; i &lt; 8; i++) {\r\n    \t\t\tbuffer[i] = (byte) (msb &gt;&gt;&gt; 8 * (7 - i));\r\n    \t\t}\r\n    \t\tfor (int i = 8; i &lt; 16; i++) {\r\n    \t\t\tbuffer[i] = (byte) (lsb &gt;&gt;&gt; 8 * (7 - i));\r\n    \t\t}\r\n    \r\n    \t\treturn buffer;\r\n    \r\n    \t}\r\n    \t\r\n    \tpublic static UUID toUUID(byte[] byteArray) {\r\n    \r\n    \t\tlong msb = 0;\r\n    \t\tlong lsb = 0;\r\n    \t\tfor (int i = 0; i &lt; 8; i++)\r\n    \t\t\tmsb = (msb &lt;&lt; 8) | (byteArray[i] &amp; 0xff);\r\n    \t\tfor (int i = 8; i &lt; 16; i++)\r\n    \t\t\tlsb = (lsb &lt;&lt; 8) | (byteArray[i] &amp; 0xff);\r\n    \t\tUUID result = new UUID(msb, lsb);\r\n    \r\n    \t\treturn result;\r\n    \t}\r\n    \t\r\n    }\r\n\r\noutput:\r\n\r\n    UUID String: cdaed56d-8712-414d-b346-01905d0026fe\r\n    Number of Bytes: 36\r\n    \r\n    UUID Byte Array: -51 -82 -43 109 -121 18 65 77 -77 70 1 -112 93 0 38 -2 \r\n    Number of Bytes: 16\r\n    \r\n    UUID Base64 String: za7VbYcSQU2zRgGQXQAm/g==\r\n    Number of Bytes: 24\r\n    \r\n    UUID Base64 String Trimmed: za7VbYcSQU2zRgGQXQAm/g\r\n    Number of Bytes: 22\r\n    \r\n    Back to UUID Byte Array: -51 -82 -43 109 -121 18 65 77 -77 70 1 -112 93 0 38 -2 0 38 \r\n    Number of Bytes: 18\r\n    \r\n    Fixed UUID Byte Array: -51 -82 -43 109 -121 18 65 77 -77 70 1 -112 93 0 38 -2 \r\n    Number of Bytes: 16\r\n    \r\n    UUID String: cdaed56d-8712-414d-b346-01905d0026fe\r\n    Number of Bytes: 36\r\n    \r\n    Equal to Start UUID? true\r\n\r\n","title":"Storing UUID as base64 String","body":"<p>I have been experimenting with using UUIDs as database keys.  I want to take up the least amount of bytes as possible, while still keeping the UUID representation human readable.</p>\n\n<p>I think that I have gotten it down to 22 bytes using base64 and removing some trailing \"==\" that seem to be unnecessary to store for my purposes.  Are there any flaws with this approach?  </p>\n\n<p>Basically my test code does a bunch of conversions to get the UUID down to a 22 byte String, then converts it back into a UUID.</p>\n\n<pre><code>import java.io.IOException;\nimport java.util.UUID;\n\npublic class UUIDTest {\n\n    public static void main(String[] args){\n        UUID uuid = UUID.randomUUID();\n        System.out.println(\"UUID String: \" + uuid.toString());\n        System.out.println(\"Number of Bytes: \" + uuid.toString().getBytes().length);\n        System.out.println();\n\n        byte[] uuidArr = asByteArray(uuid);\n        System.out.print(\"UUID Byte Array: \");\n        for(byte b: uuidArr){\n            System.out.print(b +\" \");\n        }\n        System.out.println();\n        System.out.println(\"Number of Bytes: \" + uuidArr.length);\n        System.out.println();\n\n\n        try {\n            // Convert a byte array to base64 string\n            String s = new sun.misc.BASE64Encoder().encode(uuidArr);\n            System.out.println(\"UUID Base64 String: \" +s);\n            System.out.println(\"Number of Bytes: \" + s.getBytes().length);\n            System.out.println();\n\n\n            String trimmed = s.split(\"=\")[0];\n            System.out.println(\"UUID Base64 String Trimmed: \" +trimmed);\n            System.out.println(\"Number of Bytes: \" + trimmed.getBytes().length);\n            System.out.println();\n\n            // Convert base64 string to a byte array\n            byte[] backArr = new sun.misc.BASE64Decoder().decodeBuffer(trimmed);\n            System.out.print(\"Back to UUID Byte Array: \");\n            for(byte b: backArr){\n                System.out.print(b +\" \");\n            }\n            System.out.println();\n            System.out.println(\"Number of Bytes: \" + backArr.length);\n\n            byte[] fixedArr = new byte[16];\n            for(int i= 0; i&lt;16; i++){\n                fixedArr[i] = backArr[i];\n            }\n            System.out.println();\n            System.out.print(\"Fixed UUID Byte Array: \");\n            for(byte b: fixedArr){\n                System.out.print(b +\" \");\n            }\n            System.out.println();\n            System.out.println(\"Number of Bytes: \" + fixedArr.length);\n\n            System.out.println();\n            UUID newUUID = toUUID(fixedArr);\n            System.out.println(\"UUID String: \" + newUUID.toString());\n            System.out.println(\"Number of Bytes: \" + newUUID.toString().getBytes().length);\n            System.out.println();\n\n            System.out.println(\"Equal to Start UUID? \"+newUUID.equals(uuid));\n            if(!newUUID.equals(uuid)){\n                System.exit(0);\n            }\n\n\n        } catch (IOException e) {\n        }\n\n    }\n\n\n    public static byte[] asByteArray(UUID uuid) {\n\n        long msb = uuid.getMostSignificantBits();\n        long lsb = uuid.getLeastSignificantBits();\n        byte[] buffer = new byte[16];\n\n        for (int i = 0; i &lt; 8; i++) {\n            buffer[i] = (byte) (msb &gt;&gt;&gt; 8 * (7 - i));\n        }\n        for (int i = 8; i &lt; 16; i++) {\n            buffer[i] = (byte) (lsb &gt;&gt;&gt; 8 * (7 - i));\n        }\n\n        return buffer;\n\n    }\n\n    public static UUID toUUID(byte[] byteArray) {\n\n        long msb = 0;\n        long lsb = 0;\n        for (int i = 0; i &lt; 8; i++)\n            msb = (msb &lt;&lt; 8) | (byteArray[i] &amp; 0xff);\n        for (int i = 8; i &lt; 16; i++)\n            lsb = (lsb &lt;&lt; 8) | (byteArray[i] &amp; 0xff);\n        UUID result = new UUID(msb, lsb);\n\n        return result;\n    }\n\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>UUID String: cdaed56d-8712-414d-b346-01905d0026fe\nNumber of Bytes: 36\n\nUUID Byte Array: -51 -82 -43 109 -121 18 65 77 -77 70 1 -112 93 0 38 -2 \nNumber of Bytes: 16\n\nUUID Base64 String: za7VbYcSQU2zRgGQXQAm/g==\nNumber of Bytes: 24\n\nUUID Base64 String Trimmed: za7VbYcSQU2zRgGQXQAm/g\nNumber of Bytes: 22\n\nBack to UUID Byte Array: -51 -82 -43 109 -121 18 65 77 -77 70 1 -112 93 0 38 -2 0 38 \nNumber of Bytes: 18\n\nFixed UUID Byte Array: -51 -82 -43 109 -121 18 65 77 -77 70 1 -112 93 0 38 -2 \nNumber of Bytes: 16\n\nUUID String: cdaed56d-8712-414d-b346-01905d0026fe\nNumber of Bytes: 36\n\nEqual to Start UUID? true\n</code></pre>\n"},{"tags":["java","encoding","uuid"],"comments":[{"owner":{"account_id":2437284,"reputation":3902,"user_id":2126854,"accept_rate":80,"display_name":"Glenn Lane"},"score":1,"creation_date":1389656779,"post_id":21103363,"comment_id":31749288,"body_markdown":"I imagine he wants to condense the characters needed to express a UUID for an HTTP GET.  There is a non-trivial limit on the length of an HTTP GET after all.  I don&#39;t see anything wrong with this question at all.","body":"I imagine he wants to condense the characters needed to express a UUID for an HTTP GET.  There is a non-trivial limit on the length of an HTTP GET after all.  I don&#39;t see anything wrong with this question at all."},{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":1,"creation_date":1389657336,"post_id":21103363,"comment_id":31749465,"body_markdown":"@GlennLane Both Base64 and Base32 would **increase** the size of the UUID, and since it&#39;s already a hex string (with dashes) there&#39;s no issues with using it in urls re: encoding. Hence &quot;Why would you ever do that&quot;.","body":"@GlennLane Both Base64 and Base32 would <b>increase</b> the size of the UUID, and since it&#39;s already a hex string (with dashes) there&#39;s no issues with using it in urls re: encoding. Hence &quot;Why would you ever do that&quot;."},{"owner":{"account_id":2437284,"reputation":3902,"user_id":2126854,"accept_rate":80,"display_name":"Glenn Lane"},"score":1,"creation_date":1389657662,"post_id":21103363,"comment_id":31749571,"body_markdown":"He&#39;s using them in a URL... so they are expressed as strings.  Most people would use hex, but it&#39;s 32 characters.  Using Base64 is 22 characters.","body":"He&#39;s using them in a URL... so they are expressed as strings.  Most people would use hex, but it&#39;s 32 characters.  Using Base64 is 22 characters."},{"owner":{"account_id":2437284,"reputation":3902,"user_id":2126854,"accept_rate":80,"display_name":"Glenn Lane"},"score":1,"creation_date":1389662961,"post_id":21103363,"comment_id":31751039,"body_markdown":"@BrianRoach I think I know the confusion here... he doesn&#39;t want to Base32 encode the 36-character UUID hex-string.  He wants to encode the 16-byte binary.","body":"@BrianRoach I think I know the confusion here... he doesn&#39;t want to Base32 encode the 36-character UUID hex-string.  He wants to encode the 16-byte binary."},{"owner":{"account_id":93777,"reputation":603,"user_id":256401,"accept_rate":88,"display_name":"Mafuba"},"score":0,"creation_date":1389670186,"post_id":21103363,"comment_id":31752756,"body_markdown":"That&#39;s right. If there isn&#39;t much overhead doing the encoding after generation, the space savings starts to get significant when it&#39;s over billions of nodes.","body":"That&#39;s right. If there isn&#39;t much overhead doing the encoding after generation, the space savings starts to get significant when it&#39;s over billions of nodes."},{"owner":{"account_id":93777,"reputation":603,"user_id":256401,"accept_rate":88,"display_name":"Mafuba"},"score":0,"creation_date":1389670624,"post_id":21103363,"comment_id":31752866,"body_markdown":"Also, unless I *need* the ID to be UUID compliant, it&#39;s easier to just do something like `new BigInteger(130,new SecureRandom()).toString(32)` - I just wanted to see if anyone had tricks up their sleeve with UUIDs.","body":"Also, unless I <i>need</i> the ID to be UUID compliant, it&#39;s easier to just do something like <code>new BigInteger(130,new SecureRandom()).toString(32)</code> - I just wanted to see if anyone had tricks up their sleeve with UUIDs."},{"owner":{"account_id":2437284,"reputation":3902,"user_id":2126854,"accept_rate":80,"display_name":"Glenn Lane"},"score":0,"creation_date":1389813636,"post_id":21103363,"comment_id":31826406,"body_markdown":"@Mafuba Some DB&#39;s (like PostgreSQL) can use UUID as a formal datatype.  There is a small constraint in UUID in that the version number is encoded inside, so if you ever anticipate using previously &quot;randomly generated codes&quot; as UUID down the road, then you should probably use UUID&#39;s from the get-go.","body":"@Mafuba Some DB&#39;s (like PostgreSQL) can use UUID as a formal datatype.  There is a small constraint in UUID in that the version number is encoded inside, so if you ever anticipate using previously &quot;randomly generated codes&quot; as UUID down the road, then you should probably use UUID&#39;s from the get-go."},{"owner":{"account_id":93777,"reputation":603,"user_id":256401,"accept_rate":88,"display_name":"Mafuba"},"score":0,"creation_date":1389826443,"post_id":21103363,"comment_id":31833600,"body_markdown":"Thanks Glenn. The main data stores involved are graph stores (like Neo4j) with some other messaging and NoSQL systems for ancillary data (sorry Brian, no Riak ;-)). And like I said above, I would only use the UUIDs if I had a need for compliance with the standard, which I do not forsee. It just would have been handy. I was just wondering if anyone had combined in a simple way the way .NET does ToByteArray for GUIDs with variable encodings.","body":"Thanks Glenn. The main data stores involved are graph stores (like Neo4j) with some other messaging and NoSQL systems for ancillary data (sorry Brian, no Riak ;-)). And like I said above, I would only use the UUIDs if I had a need for compliance with the standard, which I do not forsee. It just would have been handy. I was just wondering if anyone had combined in a simple way the way .NET does ToByteArray for GUIDs with variable encodings."}],"answers":[{"tags":[],"owner":{"account_id":2437284,"reputation":3902,"user_id":2126854,"accept_rate":80,"display_name":"Glenn Lane"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1389663118,"creation_date":1389656561,"answer_id":21103563,"question_id":21103363,"body_markdown":"Base32 still pads with the `=` character, so you&#39;ll need to do something with that if you really want to avoid URL escaping.\r\n\r\nIf you really want to avoid Base16, I recommend you use Base64 instead of Base32.  If you want to use an RFC standard, try [base64url][1].  However, that standard also uses &quot;=&quot; for the trailing padding, so you need to escape that.  It&#39;s substitutions are:\r\n\r\n- `+ -&gt; -`\r\n- `/ -&gt; _`\r\n- `= -&gt; =`\r\n\r\nPersonally, I use a variant called Y64.  It&#39;s substitutions are:\r\n\r\n- `+ -&gt; .`\r\n- `/ -&gt; _`\r\n- `= -&gt; -`\r\n\r\nIt&#39;s not an RFC standard, but at least you don&#39;t have to worry about escaping the trailing &quot;=&quot;.\r\n\r\nApache Commons Codec provides both Base64 and Base32.  Here&#39;s an example with Base64 with the Y64 variant\r\n\r\nTo encode:\r\n\r\n\tUUID uuid = UUID.randomUUID();\r\n\tByteBuffer uuidBuffer = ByteBuffer.allocate(16);\r\n\tLongBuffer longBuffer = uuidBuffer.asLongBuffer();\r\n\tlongBuffer.put(uuid.getMostSignificantBits());\r\n\tlongBuffer.put(uuid.getLeastSignificantBits());\r\n\tString encoded = new String(Base64.encode(uuidBuffer.array()), \r\n\t\t\tCharset.forName(&quot;US-ASCII&quot;));\r\n\tencoded = encoded.replace(&#39;+&#39;, &#39;.&#39;)\r\n\t\t\t.replace(&#39;/&#39;, &#39;_&#39;)\r\n\t\t\t.replace(&#39;=&#39;, &#39;-&#39;);\r\n\r\nAnd decode:\r\n\r\n\tString encoded; // from your request parameters or whatever\r\n\tencoded = encoded.replace(&#39;.&#39;, &#39;+&#39;)\r\n\t\t\t.replace(&#39;_&#39;, &#39;/&#39;)\r\n\t\t\t.replace(&#39;-&#39;, &#39;=&#39;);\r\n\tByteBuffer uuidBuffer = ByteBuffer.wrap(Base64.decode(\r\n\t\t\tencoded.getBytes(Charset.forName(&quot;US-ASCII&quot;))));\r\n\tLongBuffer longBuffer = uuidBuffer.asLongBuffer();\r\n\tUUID uuid = new UUID(longBuffer.get(), longBuffer.get());\r\n\r\n\r\n\r\n\r\n  [1]: https://www.rfc-editor.org/rfc/rfc4648#section-5","title":"Base32 encode UUID in Java","body":"<p>Base32 still pads with the <code>=</code> character, so you'll need to do something with that if you really want to avoid URL escaping.</p>\n<p>If you really want to avoid Base16, I recommend you use Base64 instead of Base32.  If you want to use an RFC standard, try <a href=\"https://www.rfc-editor.org/rfc/rfc4648#section-5\" rel=\"nofollow noreferrer\">base64url</a>.  However, that standard also uses &quot;=&quot; for the trailing padding, so you need to escape that.  It's substitutions are:</p>\n<ul>\n<li><code>+ -&gt; -</code></li>\n<li><code>/ -&gt; _</code></li>\n<li><code>= -&gt; =</code></li>\n</ul>\n<p>Personally, I use a variant called Y64.  It's substitutions are:</p>\n<ul>\n<li><code>+ -&gt; .</code></li>\n<li><code>/ -&gt; _</code></li>\n<li><code>= -&gt; -</code></li>\n</ul>\n<p>It's not an RFC standard, but at least you don't have to worry about escaping the trailing &quot;=&quot;.</p>\n<p>Apache Commons Codec provides both Base64 and Base32.  Here's an example with Base64 with the Y64 variant</p>\n<p>To encode:</p>\n<pre><code>UUID uuid = UUID.randomUUID();\nByteBuffer uuidBuffer = ByteBuffer.allocate(16);\nLongBuffer longBuffer = uuidBuffer.asLongBuffer();\nlongBuffer.put(uuid.getMostSignificantBits());\nlongBuffer.put(uuid.getLeastSignificantBits());\nString encoded = new String(Base64.encode(uuidBuffer.array()), \n        Charset.forName(&quot;US-ASCII&quot;));\nencoded = encoded.replace('+', '.')\n        .replace('/', '_')\n        .replace('=', '-');\n</code></pre>\n<p>And decode:</p>\n<pre><code>String encoded; // from your request parameters or whatever\nencoded = encoded.replace('.', '+')\n        .replace('_', '/')\n        .replace('-', '=');\nByteBuffer uuidBuffer = ByteBuffer.wrap(Base64.decode(\n        encoded.getBytes(Charset.forName(&quot;US-ASCII&quot;))));\nLongBuffer longBuffer = uuidBuffer.asLongBuffer();\nUUID uuid = new UUID(longBuffer.get(), longBuffer.get());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1053260,"reputation":1032,"user_id":1056610,"display_name":"fabiolimace"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695397574,"creation_date":1609048749,"answer_id":65463266,"question_id":21103363,"body_markdown":"The codec [`Base32Codec`](https://github.com/f4b6a3/uuid-creator/blob/master/src/main/java/com/github/f4b6a3/uuid/codec/base/Base32Codec.java) can encode UUIDs efficiently to base-32.\r\n\r\n```java\r\n// Returns a base-32 string\r\n// uuid::: 01234567-89AB-4DEF-A123-456789ABCDEF\r\n// base32: aerukz4jvng67ijdivtytk6n54\r\nString string = Base32Codec.INSTANCE.encode(uuid);\r\n```\r\n\r\nThere are codecs for other encodings in the same [package](https://github.com/f4b6a3/uuid-creator/tree/master/src/main/java/com/github/f4b6a3/uuid/codec/base) of [uuid-creator](https://github.com/f4b6a3/uuid-creator).\r\n\r\n---\r\n**Disclaimer**: I&#39;m the main contributor of `uuid-creator`.","title":"Base32 encode UUID in Java","body":"<p>The codec <a href=\"https://github.com/f4b6a3/uuid-creator/blob/master/src/main/java/com/github/f4b6a3/uuid/codec/base/Base32Codec.java\" rel=\"nofollow noreferrer\"><code>Base32Codec</code></a> can encode UUIDs efficiently to base-32.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Returns a base-32 string\n// uuid::: 01234567-89AB-4DEF-A123-456789ABCDEF\n// base32: aerukz4jvng67ijdivtytk6n54\nString string = Base32Codec.INSTANCE.encode(uuid);\n</code></pre>\n<p>There are codecs for other encodings in the same <a href=\"https://github.com/f4b6a3/uuid-creator/tree/master/src/main/java/com/github/f4b6a3/uuid/codec/base\" rel=\"nofollow noreferrer\">package</a> of <a href=\"https://github.com/f4b6a3/uuid-creator\" rel=\"nofollow noreferrer\">uuid-creator</a>.</p>\n<hr />\n<p><strong>Disclaimer</strong>: I'm the main contributor of <code>uuid-creator</code>.</p>\n"},{"tags":[],"owner":{"account_id":4762496,"reputation":1608,"user_id":3849555,"display_name":"Chayne P. S."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629760575,"creation_date":1629760575,"answer_id":68900041,"question_id":21103363,"body_markdown":"I agreed with the discussion that Base64Url might be more suitable but I also see the benefit of generating unique value in Base32. It&#39;s case insensitive that is easier to handle if human is involved.\r\n\r\nThis is my code to convert UUID to Base32 using Guava&#39;s BaseEncoding.\r\n```\r\n    public static String toBase32(UUID uuid){\r\n        ByteBuffer bb = ByteBuffer.wrap(new byte[16]);\r\n        bb.putLong(uuid.getMostSignificantBits());\r\n        bb.putLong(uuid.getLeastSignificantBits());\r\n        return BaseEncoding.base32().omitPadding().encode(bb.array());\r\n    }\r\n```","title":"Base32 encode UUID in Java","body":"<p>I agreed with the discussion that Base64Url might be more suitable but I also see the benefit of generating unique value in Base32. It's case insensitive that is easier to handle if human is involved.</p>\n<p>This is my code to convert UUID to Base32 using Guava's BaseEncoding.</p>\n<pre><code>    public static String toBase32(UUID uuid){\n        ByteBuffer bb = ByteBuffer.wrap(new byte[16]);\n        bb.putLong(uuid.getMostSignificantBits());\n        bb.putLong(uuid.getLeastSignificantBits());\n        return BaseEncoding.base32().omitPadding().encode(bb.array());\n    }\n</code></pre>\n"}],"owner":{"account_id":93777,"reputation":603,"user_id":256401,"accept_rate":88,"display_name":"Mafuba"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6819,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":21103563,"answer_count":3,"score":4,"last_activity_date":1695397574,"creation_date":1389655383,"question_id":21103363,"body_markdown":"What is the most time efficient way to create and Base32 encode a random UUID in Java? I would like to use Base32 encoding to store globally unique IDs that are usable in URLs.","title":"Base32 encode UUID in Java","body":"<p>What is the most time efficient way to create and Base32 encode a random UUID in Java? I would like to use Base32 encoding to store globally unique IDs that are usable in URLs.</p>\n"},{"tags":["java","reactive-programming","uuid","spring-webflux","project-reactor"],"comments":[{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":7,"creation_date":1580997146,"post_id":60096442,"comment_id":106288007,"body_markdown":"Is this really a problem? Getting enough random bytes from the OS random number source used to be a problem on older Linux versions, but it should be pretty fast now. And maybe that this only happens the first time you generate a UUID?","body":"Is this really a problem? Getting enough random bytes from the OS random number source used to be a problem on older Linux versions, but it should be pretty fast now. And maybe that this only happens the first time you generate a UUID?"},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":5,"creation_date":1580997299,"post_id":60096442,"comment_id":106288105,"body_markdown":"See this thread for a discussion about why the default entropy source can be slow and how to select a different one: https://stackoverflow.com/questions/137212/how-to-deal-with-a-slow-securerandom-generator","body":"See this thread for a discussion about why the default entropy source can be slow and how to select a different one: <a href=\"https://stackoverflow.com/questions/137212/how-to-deal-with-a-slow-securerandom-generator\" title=\"how to deal with a slow securerandom generator\">stackoverflow.com/questions/137212/&hellip;</a>"},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":6,"creation_date":1580997413,"post_id":60096442,"comment_id":106288187,"body_markdown":"If you do run into slowness and don&#39;t want to block your &quot;reactive&quot; thread, you could generate all UUID on a dedicated worker pool, same as you would do with other blocking things. But it does seem overkill.","body":"If you do run into slowness and don&#39;t want to block your &quot;reactive&quot; thread, you could generate all UUID on a dedicated worker pool, same as you would do with other blocking things. But it does seem overkill."},{"owner":{"account_id":3284546,"reputation":403,"user_id":2764341,"display_name":"linkebon"},"score":0,"creation_date":1580997819,"post_id":60096442,"comment_id":106288451,"body_markdown":"Thanks for answers. Blocking calls should not be used in reactive program even though they are fast. I agree creating a separate thread pool for generating the uuid seems overkill. No other library available for generating random id&#39;s that is recommended to use for reactive applications?","body":"Thanks for answers. Blocking calls should not be used in reactive program even though they are fast. I agree creating a separate thread pool for generating the uuid seems overkill. No other library available for generating random id&#39;s that is recommended to use for reactive applications?"},{"owner":{"account_id":8326,"reputation":258545,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":3,"creation_date":1581031680,"post_id":60096442,"comment_id":106304081,"body_markdown":"There is no problem with this (unless seeding the SecureRandom is really slow). Class-loading is blocking as well. Don&#39;t fall into the premature &quot;optimisation&quot; trap and focus on demonstrable performance issues.","body":"There is no problem with this (unless seeding the SecureRandom is really slow). Class-loading is blocking as well. Don&#39;t fall into the premature &quot;optimisation&quot; trap and focus on demonstrable performance issues."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1581193598,"post_id":60096442,"comment_id":106351354,"body_markdown":"my question is, is it a problem that the uuid random is blocking? have you measured it to be a problem?","body":"my question is, is it a problem that the uuid random is blocking? have you measured it to be a problem?"},{"owner":{"account_id":14482834,"reputation":3894,"user_id":10461625,"display_name":"PatPanda"},"score":0,"creation_date":1599686687,"post_id":60096442,"comment_id":112854039,"body_markdown":"Is it possible to provide a workaround on this blocking call, regardless of how small is the impact?","body":"Is it possible to provide a workaround on this blocking call, regardless of how small is the impact?"},{"owner":{"account_id":408579,"reputation":9103,"user_id":779340,"accept_rate":69,"display_name":"rascio"},"score":0,"creation_date":1621601780,"post_id":60096442,"comment_id":119552007,"body_markdown":"If there&#39;s no way to say to blockhound that this is not an error I think the error is that one should disable the entire blockhound checks to use the UUID, was any solution found for this?","body":"If there&#39;s no way to say to blockhound that this is not an error I think the error is that one should disable the entire blockhound checks to use the UUID, was any solution found for this?"},{"owner":{"account_id":2242741,"reputation":6993,"user_id":1976843,"display_name":"JEY"},"score":2,"creation_date":1634887149,"post_id":60096442,"comment_id":123151764,"body_markdown":"You should check on the first comment about why the call is taking so much time. But in general to wrap a synchronous blocking call you go Mono.fromCallable(UUID::randomUUID).subscribeOn(Schedulers.boundedElastic())","body":"You should check on the first comment about why the call is taking so much time. But in general to wrap a synchronous blocking call you go Mono.fromCallable(UUID::randomUUID).subscribeOn(Schedulers.b&zwnj;&#8203;oundedElastic())"},{"owner":{"account_id":1481915,"reputation":12601,"user_id":1542667,"accept_rate":75,"display_name":"Yuri Schimke"},"score":0,"creation_date":1639037792,"post_id":60096442,"comment_id":124247349,"body_markdown":"+1 to suggestion by @JEY - this is the right fix for an operation like this that does have IO and is blocking even if expected to be quick.","body":"+1 to suggestion by @JEY - this is the right fix for an operation like this that does have IO and is blocking even if expected to be quick."}],"answers":[{"tags":[],"owner":{"account_id":1053260,"reputation":1032,"user_id":1056610,"display_name":"fabiolimace"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1695397517,"creation_date":1639036674,"answer_id":70286396,"question_id":60096442,"body_markdown":"This is a list of three examples on how to use [uuid-creator](https://github.com/f4b6a3/uuid-creator) to reduce thread contention on Linux.\r\n\r\nAn additional example uses [ulid-creator](https://github.com/f4b6a3/ulid-creator) to generate [Monotonic ULIDs](https://github.com/ulid/spec) and then turn them into RFC-4122 UUID (standard). Monotonic ULID generation is *very fast*.\r\n\r\nThe benchmark code is available on a [GitHub Gist](https://gist.github.com/fabiolimace/e6b773ccce864bc35e4c1797131f2f27).\r\n\r\n### Example 1: using `UuidCreator` and `SHA1PRNG`\r\n\r\nHow to setup the `SHA1PRNG` algorithm to be used by `UuidCreator`:\r\n\r\n```bash\r\n# Append to /etc/environment or ~/.profile\r\n# Use the the algorithm SHA1PRNG for SecureRandom\r\nexport UUIDCREATOR_SECURERANDOM=&quot;SHA1PRNG&quot;\r\n```\r\n\r\n```java\r\n// generate a random-based UUID\r\nUUID uuid = UuidCreator.getRandomBased();\r\n```\r\n\r\n`UuidCreator` uses a fixed pool of `SecureRandom`. The variable `UUIDCREATOR_SECURERANDOM` tells `UuidCreator` to use another `SecureRandom` algorithm, instead of `NativePRNG` on Linux. `UuidCreator` along with `SHA1PRNG` algorithm generates UUIDs with less thread contention (less-blocking) than `UUID.randomUUID()`.\r\n\r\nSee the benchmark using 4 threads:\r\n\r\n```text\r\n----------------------------------------------------------------------\r\nBenchmark                      Mode  Cnt      Score     Error   Units\r\n----------------------------------------------------------------------\r\nUUID.randomUUID()             thrpt    5   1423,060 &#177;  30,125  ops/ms\r\nUuidCreator.getRandomBased()  thrpt    5  10616,016 &#177; 281,486  ops/ms\r\n----------------------------------------------------------------------\r\n```\r\n\r\n### Example 2: using `ThreadLocalRandom`\r\n\r\nHow to implement a UUID generator using `ThreadLocalRandom`:\r\n\r\n```java\r\npublic class UuidGenerator {\r\n\r\n    private static final RandomBasedFactory UUID_FACTORY;\r\n\r\n    static {\r\n        UUID_FACTORY = new RandomBasedFactory((int length) -&gt; {\r\n            final byte[] bytes = new byte[length];\r\n            ThreadLocalRandom.current().nextBytes(bytes);\r\n            return bytes;\r\n        });\r\n    }\r\n\r\n    public static UUID generate() {\r\n        return UUID_FACTORY.create();\r\n    }\r\n}\r\n```\r\n\r\n`ThreadLocalRandom` is a fast (and unsafe) random generator without thread contention (non-blocking).\r\n\r\nSee the benchmark using 4 threads:\r\n\r\n```text\r\n----------------------------------------------------------------------\r\nBenchmark                     Mode  Cnt      Score      Error   Units\r\n----------------------------------------------------------------------\r\nUUID.randomUUID()            thrpt    5   1423,060 &#177;   30,125  ops/ms\r\nUuidGenerator.generate()     thrpt    5  85390,979 &#177; 1564,589  ops/ms\r\n----------------------------------------------------------------------\r\n```\r\n\r\n### Example 3: using `RandomBasedFactory[]` and `SHA1PRNG`\r\n\r\nHow to implement a UUID generator using ana array of `RandomBasedFactory` and `SHA1PRNG` algorithm:\r\n\r\n```java\r\n\tpublic static class UuidGenerator {\r\n\r\n\t\tprivate static final int SIZE = 8; // you choose\r\n\t\tprivate static final RandomBasedFactory[] FACTORIES;\r\n\r\n\t\tstatic {\r\n\t\t\tFACTORIES = new RandomBasedFactory[SIZE];\r\n\t\t\ttry {\r\n\t\t\t\tfor (int i = 0; i &lt; FACTORIES.length; i++) {\r\n\t\t\t\t\t// SHA1PRNG or DRBG can be used to reduce thread contention.\r\n\t\t\t\t\tSecureRandom argument = SecureRandom.getInstance(&quot;SHA1PRNG&quot;);\r\n\t\t\t\t\tFACTORIES[i] = new RandomBasedFactory(argument);\r\n\t\t\t\t}\r\n\t\t\t} catch (NoSuchAlgorithmException e) {\r\n\t\t\t\t// oops!\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic static UUID generate() {\r\n\t\t\t// calculate the factory index given the current thread ID\r\n\t\t\tfinal int index = (int) Thread.currentThread().getId() % SIZE;\r\n\t\t\treturn FACTORIES[index].create();\r\n\t\t}\r\n\t}\r\n```\r\n\r\nAn array of `RandomBasedFactory` with and `SHA1PRNG` algorithm can generate UUIDs with less thread contention (less-blocking).\r\n\r\nSee the benchmark using 4 threads:\r\n\r\n```text\r\n----------------------------------------------------------------------\r\nBenchmark                     Mode  Cnt      Score      Error   Units\r\n----------------------------------------------------------------------\r\nUUID.randomUUID()            thrpt    5   1423,060 &#177;   30,125  ops/ms\r\nUuidGenerator.generate()     thrpt    5  10048,747 &#177;  195,209  ops/ms\r\n----------------------------------------------------------------------\r\n```\r\n\r\n### Example 4: using `UlidCreator` and `Monotonic ULIDs`\r\n\r\nHow to use [ulid-creator](https://github.com/f4b6a3/ulid-creator) to generate RFC-4122 UUIDs from [Monotonic ULIDs](https://github.com/ulid/spec):\r\n\r\n```java\r\n// create a Monotonic ULID and convert it to RFC-4122 UUID v4\r\nUUID uuid = UlidCreator.getMonotonicUlid().toRfc4122().toUuid();\r\n```\r\n\r\nSee the benchmark using 4 threads:\r\n\r\n```text\r\n-----------------------------------------------------------------------\r\nBenchmark                       Mode  Cnt     Score      Error   Units\r\n-----------------------------------------------------------------------\r\nUUID.randomUUID()              thrpt    5  1423,060 &#177;   30,125  ops/ms\r\nUlidCreator.getMonotonicUlid() thrpt    5  7391,917 &#177;  871,799  ops/ms\r\n-----------------------------------------------------------------------\r\n```\r\n\r\n**EDIT**: added the 4th example that uses Monotonic ULID.\r\n\r\n---\r\n**Disclaimer**: I&#39;m the main contributor of `uuid-creator`.","title":"Generate random UUID non blocking","body":"<p>This is a list of three examples on how to use <a href=\"https://github.com/f4b6a3/uuid-creator\" rel=\"nofollow noreferrer\">uuid-creator</a> to reduce thread contention on Linux.</p>\n<p>An additional example uses <a href=\"https://github.com/f4b6a3/ulid-creator\" rel=\"nofollow noreferrer\">ulid-creator</a> to generate <a href=\"https://github.com/ulid/spec\" rel=\"nofollow noreferrer\">Monotonic ULIDs</a> and then turn them into RFC-4122 UUID (standard). Monotonic ULID generation is <em>very fast</em>.</p>\n<p>The benchmark code is available on a <a href=\"https://gist.github.com/fabiolimace/e6b773ccce864bc35e4c1797131f2f27\" rel=\"nofollow noreferrer\">GitHub Gist</a>.</p>\n<h3>Example 1: using <code>UuidCreator</code> and <code>SHA1PRNG</code></h3>\n<p>How to setup the <code>SHA1PRNG</code> algorithm to be used by <code>UuidCreator</code>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Append to /etc/environment or ~/.profile\n# Use the the algorithm SHA1PRNG for SecureRandom\nexport UUIDCREATOR_SECURERANDOM=&quot;SHA1PRNG&quot;\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>// generate a random-based UUID\nUUID uuid = UuidCreator.getRandomBased();\n</code></pre>\n<p><code>UuidCreator</code> uses a fixed pool of <code>SecureRandom</code>. The variable <code>UUIDCREATOR_SECURERANDOM</code> tells <code>UuidCreator</code> to use another <code>SecureRandom</code> algorithm, instead of <code>NativePRNG</code> on Linux. <code>UuidCreator</code> along with <code>SHA1PRNG</code> algorithm generates UUIDs with less thread contention (less-blocking) than <code>UUID.randomUUID()</code>.</p>\n<p>See the benchmark using 4 threads:</p>\n<pre><code>----------------------------------------------------------------------\nBenchmark                      Mode  Cnt      Score     Error   Units\n----------------------------------------------------------------------\nUUID.randomUUID()             thrpt    5   1423,060   30,125  ops/ms\nUuidCreator.getRandomBased()  thrpt    5  10616,016  281,486  ops/ms\n----------------------------------------------------------------------\n</code></pre>\n<h3>Example 2: using <code>ThreadLocalRandom</code></h3>\n<p>How to implement a UUID generator using <code>ThreadLocalRandom</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UuidGenerator {\n\n    private static final RandomBasedFactory UUID_FACTORY;\n\n    static {\n        UUID_FACTORY = new RandomBasedFactory((int length) -&gt; {\n            final byte[] bytes = new byte[length];\n            ThreadLocalRandom.current().nextBytes(bytes);\n            return bytes;\n        });\n    }\n\n    public static UUID generate() {\n        return UUID_FACTORY.create();\n    }\n}\n</code></pre>\n<p><code>ThreadLocalRandom</code> is a fast (and unsafe) random generator without thread contention (non-blocking).</p>\n<p>See the benchmark using 4 threads:</p>\n<pre><code>----------------------------------------------------------------------\nBenchmark                     Mode  Cnt      Score      Error   Units\n----------------------------------------------------------------------\nUUID.randomUUID()            thrpt    5   1423,060    30,125  ops/ms\nUuidGenerator.generate()     thrpt    5  85390,979  1564,589  ops/ms\n----------------------------------------------------------------------\n</code></pre>\n<h3>Example 3: using <code>RandomBasedFactory[]</code> and <code>SHA1PRNG</code></h3>\n<p>How to implement a UUID generator using ana array of <code>RandomBasedFactory</code> and <code>SHA1PRNG</code> algorithm:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static class UuidGenerator {\n\n        private static final int SIZE = 8; // you choose\n        private static final RandomBasedFactory[] FACTORIES;\n\n        static {\n            FACTORIES = new RandomBasedFactory[SIZE];\n            try {\n                for (int i = 0; i &lt; FACTORIES.length; i++) {\n                    // SHA1PRNG or DRBG can be used to reduce thread contention.\n                    SecureRandom argument = SecureRandom.getInstance(&quot;SHA1PRNG&quot;);\n                    FACTORIES[i] = new RandomBasedFactory(argument);\n                }\n            } catch (NoSuchAlgorithmException e) {\n                // oops!\n            }\n        }\n\n        public static UUID generate() {\n            // calculate the factory index given the current thread ID\n            final int index = (int) Thread.currentThread().getId() % SIZE;\n            return FACTORIES[index].create();\n        }\n    }\n</code></pre>\n<p>An array of <code>RandomBasedFactory</code> with and <code>SHA1PRNG</code> algorithm can generate UUIDs with less thread contention (less-blocking).</p>\n<p>See the benchmark using 4 threads:</p>\n<pre><code>----------------------------------------------------------------------\nBenchmark                     Mode  Cnt      Score      Error   Units\n----------------------------------------------------------------------\nUUID.randomUUID()            thrpt    5   1423,060    30,125  ops/ms\nUuidGenerator.generate()     thrpt    5  10048,747   195,209  ops/ms\n----------------------------------------------------------------------\n</code></pre>\n<h3>Example 4: using <code>UlidCreator</code> and <code>Monotonic ULIDs</code></h3>\n<p>How to use <a href=\"https://github.com/f4b6a3/ulid-creator\" rel=\"nofollow noreferrer\">ulid-creator</a> to generate RFC-4122 UUIDs from <a href=\"https://github.com/ulid/spec\" rel=\"nofollow noreferrer\">Monotonic ULIDs</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// create a Monotonic ULID and convert it to RFC-4122 UUID v4\nUUID uuid = UlidCreator.getMonotonicUlid().toRfc4122().toUuid();\n</code></pre>\n<p>See the benchmark using 4 threads:</p>\n<pre><code>-----------------------------------------------------------------------\nBenchmark                       Mode  Cnt     Score      Error   Units\n-----------------------------------------------------------------------\nUUID.randomUUID()              thrpt    5  1423,060    30,125  ops/ms\nUlidCreator.getMonotonicUlid() thrpt    5  7391,917   871,799  ops/ms\n-----------------------------------------------------------------------\n</code></pre>\n<p><strong>EDIT</strong>: added the 4th example that uses Monotonic ULID.</p>\n<hr />\n<p><strong>Disclaimer</strong>: I'm the main contributor of <code>uuid-creator</code>.</p>\n"},{"tags":[],"owner":{"account_id":3918931,"reputation":620,"user_id":3242022,"display_name":"downvoteit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678382128,"creation_date":1677364757,"answer_id":75568880,"question_id":60096442,"body_markdown":"The original solution has been suggested by JEY (https://stackoverflow.com/users/1976843/jey) in the comments. \r\n\r\nI am just sharing my BlockHound tested code for `UUID` and `SecureRandom`.\r\n\r\nFor `UUID`:\r\n\r\n```java\r\nMono.fromCallable(() -&gt; UUID.randomUUID().toString())\r\n  .subscribeOn(Schedulers.boundedElastic());\r\n```\r\n\r\nAnd another commonly used apparently blocking, `SecureRandom`:\r\n\r\n```java\r\nprivate final SecureRandom random = new SecureRandom();\r\n\r\nMono.fromCallable(() -&gt; random.nextInt(1_000))\r\n  .subscribeOn(Schedulers.boundedElastic());\r\n```\r\n\r\nTested on:\r\n\r\n- Java 17\r\n- Spring Boot 2.7.6\r\n- BlockHound 1.0.7.RELEASE (no modifications)","title":"Generate random UUID non blocking","body":"<p>The original solution has been suggested by JEY (<a href=\"https://stackoverflow.com/users/1976843/jey\">https://stackoverflow.com/users/1976843/jey</a>) in the comments.</p>\n<p>I am just sharing my BlockHound tested code for <code>UUID</code> and <code>SecureRandom</code>.</p>\n<p>For <code>UUID</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Mono.fromCallable(() -&gt; UUID.randomUUID().toString())\n  .subscribeOn(Schedulers.boundedElastic());\n</code></pre>\n<p>And another commonly used apparently blocking, <code>SecureRandom</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final SecureRandom random = new SecureRandom();\n\nMono.fromCallable(() -&gt; random.nextInt(1_000))\n  .subscribeOn(Schedulers.boundedElastic());\n</code></pre>\n<p>Tested on:</p>\n<ul>\n<li>Java 17</li>\n<li>Spring Boot 2.7.6</li>\n<li>BlockHound 1.0.7.RELEASE (no modifications)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":24374955,"reputation":31,"user_id":18307421,"display_name":"entropie"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1678382180,"creation_date":1678381888,"answer_id":75687886,"question_id":60096442,"body_markdown":"There [is a way][1] to tell BlockHound to ignore `UUID.randomUUID()`.\r\n\r\nAnd there is a good reason to do so.\r\nBlockhound blames UUID.randomUUID() to use a file read operation, because file operations contain the risk to transfer some data to/from a disk.\r\n\r\n/dev/random and /dev/urandom are not of that kind. The data is coming from the memory directly. \r\n\r\nSince Java 8, Java uses /dev/urandom, which guarantees on top of /dev/random, that it won&#39;t block even if the entropy pool runs low. Which means, that in the whole stack down to the kernel, the CPU has always work to do.\r\n\r\nNot using /dev/urandom makes solutions cryptographically weak. You could directly fallback to time-based UUIDs.\r\nPushing it to other Threads as suggested by @downvoteit just adds overhead. The work needs to be done anyway to handle the request.\r\n\r\nThe performance-measurements by @fabiolimace indicate, that even using a cryptographically questionable solution and only generating UUIDs, you gain the factor 10 at its best. In reality, when UUID generation is not your bottleneck, you probably won&#39;t even notice the difference in terms of throughput.\r\n\r\n\r\n  [1]: https://github.com/reactor/BlockHound/blob/master/docs/customization.md#dis-allowing-blocking-calls-inside-methods","title":"Generate random UUID non blocking","body":"<p>There <a href=\"https://github.com/reactor/BlockHound/blob/master/docs/customization.md#dis-allowing-blocking-calls-inside-methods\" rel=\"nofollow noreferrer\">is a way</a> to tell BlockHound to ignore <code>UUID.randomUUID()</code>.</p>\n<p>And there is a good reason to do so.\nBlockhound blames UUID.randomUUID() to use a file read operation, because file operations contain the risk to transfer some data to/from a disk.</p>\n<p>/dev/random and /dev/urandom are not of that kind. The data is coming from the memory directly.</p>\n<p>Since Java 8, Java uses /dev/urandom, which guarantees on top of /dev/random, that it won't block even if the entropy pool runs low. Which means, that in the whole stack down to the kernel, the CPU has always work to do.</p>\n<p>Not using /dev/urandom makes solutions cryptographically weak. You could directly fallback to time-based UUIDs.\nPushing it to other Threads as suggested by @downvoteit just adds overhead. The work needs to be done anyway to handle the request.</p>\n<p>The performance-measurements by @fabiolimace indicate, that even using a cryptographically questionable solution and only generating UUIDs, you gain the factor 10 at its best. In reality, when UUID generation is not your bottleneck, you probably won't even notice the difference in terms of throughput.</p>\n"}],"owner":{"account_id":3284546,"reputation":403,"user_id":2764341,"display_name":"linkebon"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4407,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"answer_count":3,"score":15,"last_activity_date":1695397517,"creation_date":1580996811,"question_id":60096442,"body_markdown":"By using Blockhound *io.projectreactor.tools blockhound-junit-platform* i found out that UUID.randomUUID is a blocking call which is a problem for us since we are using Spring boot Webflux version 2.2.2.RELEASE\r\n\r\nIs there any other way to get a random uuid in a non blocking way or is there any other java library recommended for non blocking generation of randomized strings.\r\n\r\nStack trace from blockhound:\r\n\r\n    java.lang.Error: Blocking call! java.io.FileInputStream#readBytes\r\n    at reactor.blockhound.BlockHound$Builder.lambda$new$0(BlockHound.java:196) ~[blockhound-1.0.1.RELEASE.jar:na]\r\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\n    Error has been observed at the following site(s):\r\n    |_ checkpoint  org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter [DefaultWebFilterChain][ExceptionHandlingWebHandler]\r\n    Stack trace:\r\n        at reactor.blockhound.BlockHound$Builder.lambda$new$0(BlockHound.java:196) ~[blockhound-1.0.1.RELEASE.jar:na]\r\n        at reactor.blockhound.BlockHound$Builder.lambda$install$6(BlockHound.java:318) ~[blockhound-1.0.1.RELEASE.jar:na]\r\n        at reactor.blockhound.BlockHoundRuntime.checkBlocking(BlockHoundRuntime.java:46) ~[na:na]\r\n        at java.base/java.io.FileInputStream.readBytes(FileInputStream.java) ~[na:na]\r\n        at java.base/java.io.FileInputStream.read(FileInputStream.java:279) ~[na:na]\r\n        at java.base/java.io.FilterInputStream.read(FilterInputStream.java:133) ~[na:na]\r\n        at java.base/sun.security.provider.NativePRNG$RandomIO.readFully(NativePRNG.java:424) ~[na:na]\r\n        at java.base/sun.security.provider.NativePRNG$RandomIO.ensureBufferValid(NativePRNG.java:526) ~[na:na]\r\n        at java.base/sun.security.provider.NativePRNG$RandomIO.implNextBytes(NativePRNG.java:545) ~[na:na]\r\n        at java.base/sun.security.provider.NativePRNG.engineNextBytes(NativePRNG.java:220) ~[na:na]\r\n        at java.base/java.security.SecureRandom.nextBytes(SecureRandom.java:741) ~[na:na]\r\n        at java.base/java.util.UUID.randomUUID(UUID.java:150) ~[na:na]\r\n","title":"Generate random UUID non blocking","body":"<p>By using Blockhound <em>io.projectreactor.tools blockhound-junit-platform</em> i found out that UUID.randomUUID is a blocking call which is a problem for us since we are using Spring boot Webflux version 2.2.2.RELEASE</p>\n\n<p>Is there any other way to get a random uuid in a non blocking way or is there any other java library recommended for non blocking generation of randomized strings.</p>\n\n<p>Stack trace from blockhound:</p>\n\n<pre><code>java.lang.Error: Blocking call! java.io.FileInputStream#readBytes\nat reactor.blockhound.BlockHound$Builder.lambda$new$0(BlockHound.java:196) ~[blockhound-1.0.1.RELEASE.jar:na]\nSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nError has been observed at the following site(s):\n|_ checkpoint  org.springframework.boot.actuate.metrics.web.reactive.server.MetricsWebFilter [DefaultWebFilterChain][ExceptionHandlingWebHandler]\nStack trace:\n    at reactor.blockhound.BlockHound$Builder.lambda$new$0(BlockHound.java:196) ~[blockhound-1.0.1.RELEASE.jar:na]\n    at reactor.blockhound.BlockHound$Builder.lambda$install$6(BlockHound.java:318) ~[blockhound-1.0.1.RELEASE.jar:na]\n    at reactor.blockhound.BlockHoundRuntime.checkBlocking(BlockHoundRuntime.java:46) ~[na:na]\n    at java.base/java.io.FileInputStream.readBytes(FileInputStream.java) ~[na:na]\n    at java.base/java.io.FileInputStream.read(FileInputStream.java:279) ~[na:na]\n    at java.base/java.io.FilterInputStream.read(FilterInputStream.java:133) ~[na:na]\n    at java.base/sun.security.provider.NativePRNG$RandomIO.readFully(NativePRNG.java:424) ~[na:na]\n    at java.base/sun.security.provider.NativePRNG$RandomIO.ensureBufferValid(NativePRNG.java:526) ~[na:na]\n    at java.base/sun.security.provider.NativePRNG$RandomIO.implNextBytes(NativePRNG.java:545) ~[na:na]\n    at java.base/sun.security.provider.NativePRNG.engineNextBytes(NativePRNG.java:220) ~[na:na]\n    at java.base/java.security.SecureRandom.nextBytes(SecureRandom.java:741) ~[na:na]\n    at java.base/java.util.UUID.randomUUID(UUID.java:150) ~[na:na]\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot"],"owner":{"account_id":4277236,"reputation":41,"user_id":3497581,"accept_rate":0,"display_name":"user3497581"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695397514,"creation_date":1695397514,"question_id":77159067,"body_markdown":"I&#39;m new to using Mongo DB in Spring. I have a mongo db query\r\n    \r\n    [\r\n        { &quot;$group&quot;: {\r\n            &quot;_id&quot;: {\r\n                &quot;email&quot;: &quot;$email&quot;,\r\n                &quot;faxType&quot;: &quot;$faxType&quot;\r\n            },\r\n            &quot;faxCount&quot;: { &quot;$sum&quot;: 1 }\r\n        }},\r\n        { &quot;$group&quot;: {\r\n            &quot;_id&quot;: &quot;$_id.email&quot;,\r\n            &quot;faxTypes&quot;: { \r\n                &quot;$push&quot;: { \r\n                    &quot;faxType&quot;: &quot;$_id.faxType&quot;,\r\n                    &quot;count&quot;: &quot;$faxCount&quot;\r\n                },\r\n            },\r\n            &quot;count&quot;: { &quot;$sum&quot;: &quot;$faxCount&quot; }\r\n        }},\r\n        { &quot;$sort&quot;: { &quot;count&quot;: -1 } },\r\n        { &quot;$limit&quot;: 2 },\r\n        { &quot;$project&quot;: {\r\n            &quot;faxTypes&quot;: { &quot;$slice&quot;: [ &quot;$faxTypes&quot;, 2 ] },\r\n            &quot;count&quot;: 1\r\n        }}\r\n    ]\r\n    \r\nI need the equivalent of above that i can execute in SpringBoot using Mongo Template. I tried converting above using MongoCompass, but the resultant query gives compile time error.\r\n    \r\nI understand that i need to create multiple Groups.. So i started with first like this\r\n    \r\n    GroupOperation groupOperationOne = Aggregation.group(propertyName, &quot;faxType&quot;).count().as(&quot;faxCount&quot;);\r\n    \r\n    GroupOperation groupOperationTwo = Aggregation.group(groupOperationOne.getFields().getField(&quot;email&quot;)).push(&quot;faxTypes&quot;);\r\n    \r\nI&#39;m unable to figure out how to refer to _id.email from first Group Operation.\r\n\r\nEach document in collection has an email, and a faxType (Inbound or Outbound). I need to group all records based on email and for each email, i need count of INBOUND faxType and OUTBOUND\r\n\r\n","title":"Spring Mongo Agregation Query","body":"<p>I'm new to using Mongo DB in Spring. I have a mongo db query</p>\n<pre><code>[\n    { &quot;$group&quot;: {\n        &quot;_id&quot;: {\n            &quot;email&quot;: &quot;$email&quot;,\n            &quot;faxType&quot;: &quot;$faxType&quot;\n        },\n        &quot;faxCount&quot;: { &quot;$sum&quot;: 1 }\n    }},\n    { &quot;$group&quot;: {\n        &quot;_id&quot;: &quot;$_id.email&quot;,\n        &quot;faxTypes&quot;: { \n            &quot;$push&quot;: { \n                &quot;faxType&quot;: &quot;$_id.faxType&quot;,\n                &quot;count&quot;: &quot;$faxCount&quot;\n            },\n        },\n        &quot;count&quot;: { &quot;$sum&quot;: &quot;$faxCount&quot; }\n    }},\n    { &quot;$sort&quot;: { &quot;count&quot;: -1 } },\n    { &quot;$limit&quot;: 2 },\n    { &quot;$project&quot;: {\n        &quot;faxTypes&quot;: { &quot;$slice&quot;: [ &quot;$faxTypes&quot;, 2 ] },\n        &quot;count&quot;: 1\n    }}\n]\n</code></pre>\n<p>I need the equivalent of above that i can execute in SpringBoot using Mongo Template. I tried converting above using MongoCompass, but the resultant query gives compile time error.</p>\n<p>I understand that i need to create multiple Groups.. So i started with first like this</p>\n<pre><code>GroupOperation groupOperationOne = Aggregation.group(propertyName, &quot;faxType&quot;).count().as(&quot;faxCount&quot;);\n\nGroupOperation groupOperationTwo = Aggregation.group(groupOperationOne.getFields().getField(&quot;email&quot;)).push(&quot;faxTypes&quot;);\n</code></pre>\n<p>I'm unable to figure out how to refer to _id.email from first Group Operation.</p>\n<p>Each document in collection has an email, and a faxType (Inbound or Outbound). I need to group all records based on email and for each email, i need count of INBOUND faxType and OUTBOUND</p>\n"},{"tags":["java","uuid"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":0,"creation_date":1376530269,"post_id":18244897,"comment_id":26752141,"body_markdown":"No, the Java SDK does not include a different UUID class than `UUID`.","body":"No, the Java SDK does not include a different UUID class than <code>UUID</code>."},{"owner":{"account_id":2522885,"reputation":2696,"user_id":2192875,"accept_rate":55,"display_name":"dogfish"},"score":1,"creation_date":1376530495,"post_id":18244897,"comment_id":26752180,"body_markdown":"The UUID class however provides methods such as public long timestamp() to get the timestamp from the UUID if it is time based.. but theres no method to generate it","body":"The UUID class however provides methods such as public long timestamp() to get the timestamp from the UUID if it is time based.. but theres no method to generate it"},{"owner":{"account_id":305991,"reputation":39137,"user_id":616460,"accept_rate":93,"display_name":"Jason C"},"score":1,"creation_date":1376531024,"post_id":18244897,"comment_id":26752282,"body_markdown":"Check out JUG @ http://wiki.fasterxml.com/JugHome, it can do type 1.","body":"Check out JUG @ <a href=\"http://wiki.fasterxml.com/JugHome\" rel=\"nofollow noreferrer\">wiki.fasterxml.com/JugHome</a>, it can do type 1."},{"owner":{"account_id":2522885,"reputation":2696,"user_id":2192875,"accept_rate":55,"display_name":"dogfish"},"score":0,"creation_date":1376541165,"post_id":18244897,"comment_id":26754273,"body_markdown":"JUG works pretty nice !","body":"JUG works pretty nice !"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1671208424,"post_id":18244897,"comment_id":132056894,"body_markdown":"By the way, FYI, work is underway to [define new Versions 6, 7, and 8](https://www.ietf.org/archive/id/draft-peabody-dispatch-new-uuid-format-04.html#name-table-of-contents-2) of UUID.","body":"By the way, FYI, work is underway to <a href=\"https://www.ietf.org/archive/id/draft-peabody-dispatch-new-uuid-format-04.html#name-table-of-contents-2\" rel=\"nofollow noreferrer\">define new Versions 6, 7, and 8</a> of UUID."}],"answers":[{"tags":[],"owner":{"account_id":4845112,"reputation":101,"user_id":3908944,"display_name":"findsandeep"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1407285979,"creation_date":1407215748,"answer_id":25131608,"question_id":18244897,"body_markdown":"Be very careful using com.eaio.uuid.UUID, if you need to generate GUID by time other than current time, as this will always generate the same UUID for given time. So if your data has requirement to generate UUID, where records may have same time, this will generate same UUID. \r\n\r\nWe needed this to generate UUID for records, which are created ahead and also multiple records at same time, we tried to tweak it by trying to use UUIDGen.createTime(&lt;originalTime&gt;). We found that it has a side effect to mutate the time for records out of order.  If a subsequent request to create `UUID` has a time stamp older than previous request, you end up having a `UUID`, which is based on previous request&#39;s time stamp.\r\n\r\nAfter all the analysis, we had to simply go back to create `UUID` at the time of creation, so that we don&#39;t have to pass it as an argument. Whichever solution we come up with to generate `UUID` at a later time, every one has a drawback. ","title":"How to generate time based UUIDs?","body":"<p>Be very careful using com.eaio.uuid.UUID, if you need to generate GUID by time other than current time, as this will always generate the same UUID for given time. So if your data has requirement to generate UUID, where records may have same time, this will generate same UUID. </p>\n\n<p>We needed this to generate UUID for records, which are created ahead and also multiple records at same time, we tried to tweak it by trying to use UUIDGen.createTime(). We found that it has a side effect to mutate the time for records out of order.  If a subsequent request to create <code>UUID</code> has a time stamp older than previous request, you end up having a <code>UUID</code>, which is based on previous request's time stamp.</p>\n\n<p>After all the analysis, we had to simply go back to create <code>UUID</code> at the time of creation, so that we don't have to pass it as an argument. Whichever solution we come up with to generate <code>UUID</code> at a later time, every one has a drawback. </p>\n"},{"tags":[],"owner":{"account_id":6640787,"reputation":498,"user_id":5126545,"display_name":"Avinash Mishra"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1490869010,"creation_date":1490853305,"answer_id":43109601,"question_id":18244897,"body_markdown":"    String timeuuid = com.datastax.driver.core.utils.UUIDs.timeBased().toString();\r\n\r\nhave a look at\r\nhttps://docs.datastax.com/en/drivers/java/2.0/com/datastax/driver/core/utils/UUIDs.html","title":"How to generate time based UUIDs?","body":"<pre><code>String timeuuid = com.datastax.driver.core.utils.UUIDs.timeBased().toString();\n</code></pre>\n\n<p>have a look at\n<a href=\"https://docs.datastax.com/en/drivers/java/2.0/com/datastax/driver/core/utils/UUIDs.html\" rel=\"noreferrer\">https://docs.datastax.com/en/drivers/java/2.0/com/datastax/driver/core/utils/UUIDs.html</a></p>\n"},{"tags":[],"owner":{"account_id":297814,"reputation":25314,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1518437600,"creation_date":1518437600,"answer_id":48746254,"question_id":18244897,"body_markdown":"FasterXML Java Uuid Generator (JUG)\r\n\r\nhttps://github.com/cowtowncoder/java-uuid-generator\r\n\r\n    UUID uuid = Generators.timeBasedGenerator().generate();","title":"How to generate time based UUIDs?","body":"<p>FasterXML Java Uuid Generator (JUG)</p>\n\n<p><a href=\"https://github.com/cowtowncoder/java-uuid-generator\" rel=\"noreferrer\">https://github.com/cowtowncoder/java-uuid-generator</a></p>\n\n<pre><code>UUID uuid = Generators.timeBasedGenerator().generate();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3253096,"reputation":4401,"user_id":2987755,"accept_rate":50,"display_name":"dkb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563881311,"creation_date":1537427157,"answer_id":52419450,"question_id":18244897,"body_markdown":"[Cassandra&#39;s implementation][1] or in [Github][4] of type 1 UUID: [usage][2]\r\nDo note that you do not compare these uuids like uuid1&gt;uuid2 etc because of known [bug][3]\r\n\r\n\r\n  [1]:https://gitbox.apache.org/repos/asf?p=cassandra.git;a=blob;f=src/java/org/apache/cassandra/utils/UUIDGen.java;hb=HEAD    \r\n  [2]: https://www.programcreek.com/java-api-examples/index.php?api=org.apache.cassandra.utils.UUIDGen\r\n  [3]: https://bugs.java.com/bugdatabase/view_bug.do?bug_id=7025832\r\n  [4]: https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/utils/UUIDGen.java\r\n","title":"How to generate time based UUIDs?","body":"<p><a href=\"https://gitbox.apache.org/repos/asf?p=cassandra.git;a=blob;f=src/java/org/apache/cassandra/utils/UUIDGen.java;hb=HEAD\" rel=\"nofollow noreferrer\">Cassandra's implementation</a> or in <a href=\"https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/utils/UUIDGen.java\" rel=\"nofollow noreferrer\">Github</a> of type 1 UUID: <a href=\"https://www.programcreek.com/java-api-examples/index.php?api=org.apache.cassandra.utils.UUIDGen\" rel=\"nofollow noreferrer\">usage</a>\nDo note that you do not compare these uuids like uuid1>uuid2 etc because of known <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=7025832\" rel=\"nofollow noreferrer\">bug</a></p>\n"},{"tags":[],"owner":{"account_id":9906507,"reputation":39,"user_id":7334867,"display_name":"tina"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1561099863,"creation_date":1561099863,"answer_id":56698289,"question_id":18244897,"body_markdown":"To test our application, we have to generate data which has time-based UUID, using com.eaio.uuid.UUID we generated old time stamp UUIDs and hence were able to control the timestamp as per our test cases. \r\n**Note**: - We cannot generate future timestamp UUID\r\n\r\nWe generated in below way -\r\n\r\n    import com.eaio.uuid.UUID;\r\n    import com.eaio.uuid.UUIDGen;\r\n    \r\n        long time = DateUtil.getEpochtimeFromDate(&quot;21-06-2018 12:30:31&quot;, &quot;dd-M-yyy hh:hh:ss&quot;);\r\n        UUID time_based_uuid = new UUID(UUIDGen.createTime(time), UUIDGen.getClockSeqAndNode());","title":"How to generate time based UUIDs?","body":"<p>To test our application, we have to generate data which has time-based UUID, using com.eaio.uuid.UUID we generated old time stamp UUIDs and hence were able to control the timestamp as per our test cases. \n<strong>Note</strong>: - We cannot generate future timestamp UUID</p>\n\n<p>We generated in below way -</p>\n\n<pre><code>import com.eaio.uuid.UUID;\nimport com.eaio.uuid.UUIDGen;\n\n    long time = DateUtil.getEpochtimeFromDate(\"21-06-2018 12:30:31\", \"dd-M-yyy hh:hh:ss\");\n    UUID time_based_uuid = new UUID(UUIDGen.createTime(time), UUIDGen.getClockSeqAndNode());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1053260,"reputation":1032,"user_id":1056610,"display_name":"fabiolimace"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1695397457,"creation_date":1569221613,"answer_id":58057061,"question_id":18244897,"body_markdown":"# *UUID Creator* library\r\n\r\nHere is another way to generate time-based UUIDs using the open-source project [*UUID Creator*](https://github.com/f4b6a3/uuid-creator):\r\n\r\n```java\r\nUUID uuid = UuidCreator.getTimeBased();\r\n```\r\n\r\n# Version 6 *Time-Ordered* UUID\r\n\r\nThis library can also generate time-ordered UUIDs, aka UUID v6. \r\n\r\nUUID v6, v7, &amp; v8 are [proposed additions][1] to [RFC 4122][2]. *The draft is being discussed in a [GitHub repository][5]*.\r\n\r\nSee the articles [here][3] and [here][4] to understand the reason for new UUIDs.\r\n\r\nAn implementation of v6 can be found on that same [*UUID Creator*](https://github.com/f4b6a3/uuid-creator) library. See this exemple:\r\n\r\n```java\r\nUUID uuid = UuidCreator.getTimeOrdered();\r\n```\r\n\r\n---\r\n**Disclaimer**: I&#39;m the main contributor of `uuid-creator`.\r\n\r\n  [1]: https://datatracker.ietf.org/doc/html/draft-peabody-dispatch-new-uuid-format-02#section-4.3\r\n  [2]: https://www.rfc-editor.org/rfc/rfc4122\r\n  [3]: https://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/\r\n  [4]: http://gh.peabody.io/uuidv6/\r\n  [5]: https://github.com/uuid6/uuid6-ietf-draft\r\n\r\n\r\n","title":"How to generate time based UUIDs?","body":"<h1><em>UUID Creator</em> library</h1>\n<p>Here is another way to generate time-based UUIDs using the open-source project <a href=\"https://github.com/f4b6a3/uuid-creator\" rel=\"nofollow noreferrer\"><em>UUID Creator</em></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UUID uuid = UuidCreator.getTimeBased();\n</code></pre>\n<h1>Version 6 <em>Time-Ordered</em> UUID</h1>\n<p>This library can also generate time-ordered UUIDs, aka UUID v6.</p>\n<p>UUID v6, v7, &amp; v8 are <a href=\"https://datatracker.ietf.org/doc/html/draft-peabody-dispatch-new-uuid-format-02#section-4.3\" rel=\"nofollow noreferrer\">proposed additions</a> to <a href=\"https://www.rfc-editor.org/rfc/rfc4122\" rel=\"nofollow noreferrer\">RFC 4122</a>. <em>The draft is being discussed in a <a href=\"https://github.com/uuid6/uuid6-ietf-draft\" rel=\"nofollow noreferrer\">GitHub repository</a></em>.</p>\n<p>See the articles <a href=\"https://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://gh.peabody.io/uuidv6/\" rel=\"nofollow noreferrer\">here</a> to understand the reason for new UUIDs.</p>\n<p>An implementation of v6 can be found on that same <a href=\"https://github.com/f4b6a3/uuid-creator\" rel=\"nofollow noreferrer\"><em>UUID Creator</em></a> library. See this exemple:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UUID uuid = UuidCreator.getTimeOrdered();\n</code></pre>\n<hr />\n<p><strong>Disclaimer</strong>: I'm the main contributor of <code>uuid-creator</code>.</p>\n"},{"tags":[],"owner":{"account_id":12099769,"reputation":31,"user_id":8841485,"display_name":"Bhavik Prajapati"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582195260,"creation_date":1582195260,"answer_id":60318055,"question_id":18244897,"body_markdown":"To generate time based UUIDs in maven project you have add the dependency of Generator that is generate time based UUIDs.\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.uuid&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;java-uuid-generator&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.1.4&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nIf you have a normal java project you have to import library of Generator\r\n [java-uuid-generator][1].\r\n  \r\nThen generate the UUID:\r\n\r\n    UUID uuid= Generators.timeBasedGenerator().generate();\r\n\r\nNow if you want to check the UUID time and date [check here][2].\r\n\r\nEnter generated UUID and your current time zone.\r\n\r\n\r\n  [1]: https://jar-download.com/artifacts/com.fasterxml.uuid/java-uuid-generator/3.1.4/source-code\r\n  [2]: https://www.famkruithof.net/uuid/uuidgen","title":"How to generate time based UUIDs?","body":"<p>To generate time based UUIDs in maven project you have add the dependency of Generator that is generate time based UUIDs.</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.uuid&lt;/groupId&gt;\n        &lt;artifactId&gt;java-uuid-generator&lt;/artifactId&gt;\n        &lt;version&gt;3.1.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>If you have a normal java project you have to import library of Generator\n <a href=\"https://jar-download.com/artifacts/com.fasterxml.uuid/java-uuid-generator/3.1.4/source-code\" rel=\"nofollow noreferrer\">java-uuid-generator</a>.</p>\n\n<p>Then generate the UUID:</p>\n\n<pre><code>UUID uuid= Generators.timeBasedGenerator().generate();\n</code></pre>\n\n<p>Now if you want to check the UUID time and date <a href=\"https://www.famkruithof.net/uuid/uuidgen\" rel=\"nofollow noreferrer\">check here</a>.</p>\n\n<p>Enter generated UUID and your current time zone.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1593384140,"creation_date":1593384140,"answer_id":62628976,"question_id":18244897,"body_markdown":"# Version 1 represents a point in space *and* time\r\n\r\n[Version 1][1] UUIDs actually represent a point in space *and* in time. \r\n\r\nThe &quot;space&quot; part is the [MAC address][2] taken from the networking port of the computer to uniquely identify where the id was generated (nearly unique, there have been some infamous screw-ups in assigning MAC addresses by the networking hardware manufacturers). \r\n\r\nThe &quot;time&quot; part is a 60-bit timestamp, being the number of 100-[nanosecond][3] intervals since [midnight 15 October 1582][4] [Coordinated Universal Time (UTC)][5].\r\n\r\n# Java omits Version 1\r\n\r\nAs you have noticed, no implementation of Version 1 UUID is required by the Java specifications. \r\n\r\nPresumably this is because of the security and privacy concerns from potentially divulging your MAC address and the moment of creation. \r\n\r\n# 3rd party implementations\r\n\r\nAs seen on the other Answers, there are 3rd-party implementations of Version 1 UUIDs available. \r\n\r\nAsking for library recommendations is off-topic here on Stack Overflow. So I asked on the sister site, *Software Recommendations Stack Exchange*, the question [*Library to generate Version 1 UUIDs to be called from Java*](https://softwarerecs.stackexchange.com/q/75168/1255). \r\n\r\nAnd here is a condensed list of the implementations mentioned in other Answers here and elsewhere that seem to still be actively supported.\r\n\r\n - [*UUID Creator*](https://github.com/f4b6a3/uuid-creator#uuid-creator) providing Versions 1, 2, 3, 4, 5, and 6. \r\n - [*Java Uuid Generator (JUG)*](https://github.com/cowtowncoder/java-uuid-generator) originally by Tatu Saloranta. \r\n - [*UUIDGen*](https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/utils/UUIDGen.java) class source code, part of the [*Apache Cassandra*][6] project. This source code is published under the Apache 2 license.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_1_(date-time_and_MAC_address)\r\n  [2]: https://en.wikipedia.org/wiki/MAC_address\r\n  [3]: https://en.wikipedia.org/wiki/Nanosecond\r\n  [4]: https://en.wikipedia.org/wiki/Gregorian_calendar#Adoption\r\n  [5]: https://en.wikipedia.org/wiki/Coordinated_Universal_Time\r\n  [6]: https://en.wikipedia.org/wiki/Apache_Cassandra","title":"How to generate time based UUIDs?","body":"<h1>Version 1 represents a point in space <em>and</em> time</h1>\n<p><a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_1_(date-time_and_MAC_address)\" rel=\"noreferrer\">Version 1</a> UUIDs actually represent a point in space <em>and</em> in time.</p>\n<p>The &quot;space&quot; part is the <a href=\"https://en.wikipedia.org/wiki/MAC_address\" rel=\"noreferrer\">MAC address</a> taken from the networking port of the computer to uniquely identify where the id was generated (nearly unique, there have been some infamous screw-ups in assigning MAC addresses by the networking hardware manufacturers).</p>\n<p>The &quot;time&quot; part is a 60-bit timestamp, being the number of 100-<a href=\"https://en.wikipedia.org/wiki/Nanosecond\" rel=\"noreferrer\">nanosecond</a> intervals since <a href=\"https://en.wikipedia.org/wiki/Gregorian_calendar#Adoption\" rel=\"noreferrer\">midnight 15 October 1582</a> <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">Coordinated Universal Time (UTC)</a>.</p>\n<h1>Java omits Version 1</h1>\n<p>As you have noticed, no implementation of Version 1 UUID is required by the Java specifications.</p>\n<p>Presumably this is because of the security and privacy concerns from potentially divulging your MAC address and the moment of creation.</p>\n<h1>3rd party implementations</h1>\n<p>As seen on the other Answers, there are 3rd-party implementations of Version 1 UUIDs available.</p>\n<p>Asking for library recommendations is off-topic here on Stack Overflow. So I asked on the sister site, <em>Software Recommendations Stack Exchange</em>, the question <a href=\"https://softwarerecs.stackexchange.com/q/75168/1255\"><em>Library to generate Version 1 UUIDs to be called from Java</em></a>.</p>\n<p>And here is a condensed list of the implementations mentioned in other Answers here and elsewhere that seem to still be actively supported.</p>\n<ul>\n<li><a href=\"https://github.com/f4b6a3/uuid-creator#uuid-creator\" rel=\"noreferrer\"><em>UUID Creator</em></a> providing Versions 1, 2, 3, 4, 5, and 6.</li>\n<li><a href=\"https://github.com/cowtowncoder/java-uuid-generator\" rel=\"noreferrer\"><em>Java Uuid Generator (JUG)</em></a> originally by Tatu Saloranta.</li>\n<li><a href=\"https://github.com/apache/cassandra/blob/trunk/src/java/org/apache/cassandra/utils/UUIDGen.java\" rel=\"noreferrer\"><em>UUIDGen</em></a> class source code, part of the <a href=\"https://en.wikipedia.org/wiki/Apache_Cassandra\" rel=\"noreferrer\"><em>Apache Cassandra</em></a> project. This source code is published under the Apache 2 license.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":21889,"reputation":30982,"user_id":53538,"accept_rate":88,"display_name":"Guss"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653296155,"creation_date":1653257989,"answer_id":72341671,"question_id":18244897,"body_markdown":"If you aren&#39;t interested in integrating Yet Another Java Library, here&#39;s a bit of Java code to generate Version 1 UUIDs. Home brew, so YMMV.\r\n\r\nPre-conditions:\r\n - clock sequence: [RFC 4122](https://www.rfc-editor.org/rfc/rfc4122#section-4.2) goes into a bit of details what it ideally should be, but then hand waves it with &quot;it can be a pseudo random number&quot;, so that&#39;s what we use here.\r\n - node id: the RFC wants this to be a MAC address - I leave getting a relevant MAC address as an exercise to the reader, and in this implementation we rely on more hand waving from the RFC and use a bunch of random bytes in the correct amount, instead.\r\n\r\n```java\r\n// fake clock_sequence and node_id\r\nvar rng = SecureRandom.getInstanceStrong();\r\nshort clock_sequence = (short) rng.nextInt(0x10000);\r\nbyte[] node = new byte[6];\r\nrng.nextBytes(node);\r\n\r\nInstant time = Instant.now(); // if you don&#39;t want &quot;now&quot;, pick something else\r\nvar dur = Duration.between(ZonedDateTime.of(1582, 10, 15, 0, 0, 0, 0,\r\n\t\tZoneOffset.UTC), // RFC-specified epoch, no idea why\r\n\t\ttime.atZone(ZoneOffset.UTC));\r\nvar timestamp = dur.getSeconds() * 10000 + dur.getNano() / 100;\r\nvar time_low = timestamp &amp; 0xFFFFFFFFL;\r\ntimestamp &gt;&gt;&gt;= 32;\r\nvar time_mid = timestamp &amp; 0xFFFFL;\r\ntimestamp &gt;&gt;&gt;= 16;\r\nvar time_high_and_ver = timestamp &amp; 0xFFF | (1 &lt;&lt; 12); // add version 1\r\nvar msb = time_low &lt;&lt; 32 | time_mid &lt;&lt; 16 | time_high_and_ver;\r\n\r\nByteBuffer data = ByteBuffer.allocate(8);\r\ndata.putShort(clock_sequence &amp; 0x3FFF | 0x8000); // add RFC variant\r\ndata.put(node);\r\ndata.flip();\r\nvar lsb = data.getLong();\r\n\r\n// compose the UUID\r\nreturn new java.util.UUID(msb, lsb);\r\n```\r\n\r\nThe full implementation is also available, MIT licensed, for download at https://github.com/guss77/java-uuid","title":"How to generate time based UUIDs?","body":"<p>If you aren't interested in integrating Yet Another Java Library, here's a bit of Java code to generate Version 1 UUIDs. Home brew, so YMMV.</p>\n<p>Pre-conditions:</p>\n<ul>\n<li>clock sequence: <a href=\"https://www.rfc-editor.org/rfc/rfc4122#section-4.2\" rel=\"nofollow noreferrer\">RFC 4122</a> goes into a bit of details what it ideally should be, but then hand waves it with &quot;it can be a pseudo random number&quot;, so that's what we use here.</li>\n<li>node id: the RFC wants this to be a MAC address - I leave getting a relevant MAC address as an exercise to the reader, and in this implementation we rely on more hand waving from the RFC and use a bunch of random bytes in the correct amount, instead.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>// fake clock_sequence and node_id\nvar rng = SecureRandom.getInstanceStrong();\nshort clock_sequence = (short) rng.nextInt(0x10000);\nbyte[] node = new byte[6];\nrng.nextBytes(node);\n\nInstant time = Instant.now(); // if you don't want &quot;now&quot;, pick something else\nvar dur = Duration.between(ZonedDateTime.of(1582, 10, 15, 0, 0, 0, 0,\n        ZoneOffset.UTC), // RFC-specified epoch, no idea why\n        time.atZone(ZoneOffset.UTC));\nvar timestamp = dur.getSeconds() * 10000 + dur.getNano() / 100;\nvar time_low = timestamp &amp; 0xFFFFFFFFL;\ntimestamp &gt;&gt;&gt;= 32;\nvar time_mid = timestamp &amp; 0xFFFFL;\ntimestamp &gt;&gt;&gt;= 16;\nvar time_high_and_ver = timestamp &amp; 0xFFF | (1 &lt;&lt; 12); // add version 1\nvar msb = time_low &lt;&lt; 32 | time_mid &lt;&lt; 16 | time_high_and_ver;\n\nByteBuffer data = ByteBuffer.allocate(8);\ndata.putShort(clock_sequence &amp; 0x3FFF | 0x8000); // add RFC variant\ndata.put(node);\ndata.flip();\nvar lsb = data.getLong();\n\n// compose the UUID\nreturn new java.util.UUID(msb, lsb);\n</code></pre>\n<p>The full implementation is also available, MIT licensed, for download at <a href=\"https://github.com/guss77/java-uuid\" rel=\"nofollow noreferrer\">https://github.com/guss77/java-uuid</a></p>\n"}],"owner":{"account_id":2522885,"reputation":2696,"user_id":2192875,"accept_rate":55,"display_name":"dogfish"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98356,"favorite_count":0,"down_vote_count":2,"up_vote_count":80,"answer_count":9,"score":78,"last_activity_date":1695397457,"creation_date":1376529621,"question_id":18244897,"body_markdown":"I want to generate time-based universally unique identifier (UUID) in Java. \r\n\r\nThe method [`java.util.UUID.randomUUID()`][1] generates a [UUID Version 4][2] where 122 of the 128 bits are from a [cryptographically-strong][3] random number generator. \r\n\r\nHow to generate a [Version 1][4] (time based) UUID ? Is there a separate library for that or is it some how provided in the Java 7 API and I am missing it.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/UUID.html#randomUUID()\r\n  [2]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)\r\n  [3]: https://en.wikipedia.org/wiki/Strong_cryptography#Cryptographically_strong_algorithms\r\n  [4]: https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_1_(date-time_and_MAC_address)","title":"How to generate time based UUIDs?","body":"<p>I want to generate time-based universally unique identifier (UUID) in Java.</p>\n<p>The method <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/UUID.html#randomUUID()\" rel=\"noreferrer\"><code>java.util.UUID.randomUUID()</code></a> generates a <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_4_(random)\" rel=\"noreferrer\">UUID Version 4</a> where 122 of the 128 bits are from a <a href=\"https://en.wikipedia.org/wiki/Strong_cryptography#Cryptographically_strong_algorithms\" rel=\"noreferrer\">cryptographically-strong</a> random number generator.</p>\n<p>How to generate a <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier#Version_1_(date-time_and_MAC_address)\" rel=\"noreferrer\">Version 1</a> (time based) UUID ? Is there a separate library for that or is it some how provided in the Java 7 API and I am missing it.</p>\n"},{"tags":["java","android","kotlin","android-jetpack-compose","coil"],"answers":[{"tags":[],"owner":{"account_id":12239219,"reputation":1,"user_id":20974299,"display_name":"Rufaro Mutepfa"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695397314,"creation_date":1695397314,"answer_id":77159047,"question_id":77158961,"body_markdown":"Here are some possible solutions for your problem:\r\n\r\n1. **Use a different image cache for the two screens.** This is probably the simplest and most effective solution. You can use a different instance of `ImageCache` for each screen, or you can use a library like `Coil` or `Glide` which provides more control over image caching.\r\n2. **Manually resize the image on the second screen.** You can do this by using the `ImageResizer` class to resize the image before it is displayed.\r\n3. **Use a different `AsyncImage` implementation.** There are a number of third-party `AsyncImage` implementations which provide more control over image caching and resizing. For example, the `Coil` library provides a `ImageCoil` class which allows you to specify a custom `ImageCache` and `ImageResizer`.\r\n\r\nHere is an example of how to use a different image cache for the two screens:\r\n\r\n```\r\nclass FirstScreen : Screen() {\r\n    private val imageCache = ImageCache()\r\n\r\n    @Composable\r\n    override fun Content() {\r\n        AsyncImage(\r\n            model = ImageRequest.Builder(LocalContext.current)\r\n                .data(stringResource(id = R.string.base_image_url) + movie.posterPath)\r\n                .placeholder(R.drawable.loading_image)\r\n                .error(R.drawable.default_movie_image)\r\n                .crossfade(true)\r\n                .build(),\r\n            modifier = Modifier.fillMaxSize(),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n            imageCache = imageCache\r\n        )\r\n    }\r\n}\r\n\r\nclass SecondScreen : Screen() {\r\n    private val imageCache = ImageCache()\r\n\r\n    @Composable\r\n    override fun Content() {\r\n        AsyncImage(\r\n            model = ImageRequest.Builder(LocalContext.current)\r\n                .data(stringResource(id = R.string.base_image_url) + movie.poster_path)\r\n                .placeholder(R.drawable.loading_image)\r\n                .error(R.drawable.default_movie_image)\r\n                .crossfade(true)\r\n                .build(),\r\n            modifier = Modifier.fillMaxWidth().weight(0.6f),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n            imageCache = imageCache\r\n        )\r\n    }\r\n}\r\n```\r\n\r\nHere is an example of how to manually resize the image on the second screen:\r\n\r\n```\r\nclass SecondScreen : Screen() {\r\n\r\n    @Composable\r\n    override fun Content() {\r\n        val image = AsyncImage(\r\n            model = ImageRequest.Builder(LocalContext.current)\r\n                .data(stringResource(id = R.string.base_image_url) + movie.poster_path)\r\n                .placeholder(R.drawable.loading_image)\r\n                .error(R.drawable.default_movie_image)\r\n                .crossfade(true)\r\n                .build(),\r\n        )\r\n\r\n        val resizedImage = ImageResizer(image.bitmap).resize(width = 100, height = 100)\r\n\r\n        Image(\r\n            bitmap = resizedImage,\r\n            modifier = Modifier.fillMaxWidth().weight(0.6f),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop\r\n        )\r\n    }\r\n}\r\n```\r\n\r\nHere is an example of how to use the `Coil` library to display the image on the second screen:\r\n\r\n```\r\nclass SecondScreen : Screen() {\r\n\r\n    @Composable\r\n    override fun Content() {\r\n        CoilImage(\r\n            model = stringResource(id = R.string.base_image_url) + movie.poster_path,\r\n            modifier = Modifier.fillMaxWidth().weight(0.6f),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop\r\n        )\r\n    }\r\n}\r\n```\r\n\r\nWhich solution you choose will depend on your specific needs and preferences. I recommend trying out a few different solutions to see what works best for you.","title":"Coil AsyncImage get larger after back stack","body":"<p>Here are some possible solutions for your problem:</p>\n<ol>\n<li><strong>Use a different image cache for the two screens.</strong> This is probably the simplest and most effective solution. You can use a different instance of <code>ImageCache</code> for each screen, or you can use a library like <code>Coil</code> or <code>Glide</code> which provides more control over image caching.</li>\n<li><strong>Manually resize the image on the second screen.</strong> You can do this by using the <code>ImageResizer</code> class to resize the image before it is displayed.</li>\n<li><strong>Use a different <code>AsyncImage</code> implementation.</strong> There are a number of third-party <code>AsyncImage</code> implementations which provide more control over image caching and resizing. For example, the <code>Coil</code> library provides a <code>ImageCoil</code> class which allows you to specify a custom <code>ImageCache</code> and <code>ImageResizer</code>.</li>\n</ol>\n<p>Here is an example of how to use a different image cache for the two screens:</p>\n<pre><code>class FirstScreen : Screen() {\n    private val imageCache = ImageCache()\n\n    @Composable\n    override fun Content() {\n        AsyncImage(\n            model = ImageRequest.Builder(LocalContext.current)\n                .data(stringResource(id = R.string.base_image_url) + movie.posterPath)\n                .placeholder(R.drawable.loading_image)\n                .error(R.drawable.default_movie_image)\n                .crossfade(true)\n                .build(),\n            modifier = Modifier.fillMaxSize(),\n            contentDescription = null,\n            contentScale = ContentScale.Crop,\n            imageCache = imageCache\n        )\n    }\n}\n\nclass SecondScreen : Screen() {\n    private val imageCache = ImageCache()\n\n    @Composable\n    override fun Content() {\n        AsyncImage(\n            model = ImageRequest.Builder(LocalContext.current)\n                .data(stringResource(id = R.string.base_image_url) + movie.poster_path)\n                .placeholder(R.drawable.loading_image)\n                .error(R.drawable.default_movie_image)\n                .crossfade(true)\n                .build(),\n            modifier = Modifier.fillMaxWidth().weight(0.6f),\n            contentDescription = null,\n            contentScale = ContentScale.Crop,\n            imageCache = imageCache\n        )\n    }\n}\n</code></pre>\n<p>Here is an example of how to manually resize the image on the second screen:</p>\n<pre><code>class SecondScreen : Screen() {\n\n    @Composable\n    override fun Content() {\n        val image = AsyncImage(\n            model = ImageRequest.Builder(LocalContext.current)\n                .data(stringResource(id = R.string.base_image_url) + movie.poster_path)\n                .placeholder(R.drawable.loading_image)\n                .error(R.drawable.default_movie_image)\n                .crossfade(true)\n                .build(),\n        )\n\n        val resizedImage = ImageResizer(image.bitmap).resize(width = 100, height = 100)\n\n        Image(\n            bitmap = resizedImage,\n            modifier = Modifier.fillMaxWidth().weight(0.6f),\n            contentDescription = null,\n            contentScale = ContentScale.Crop\n        )\n    }\n}\n</code></pre>\n<p>Here is an example of how to use the <code>Coil</code> library to display the image on the second screen:</p>\n<pre><code>class SecondScreen : Screen() {\n\n    @Composable\n    override fun Content() {\n        CoilImage(\n            model = stringResource(id = R.string.base_image_url) + movie.poster_path,\n            modifier = Modifier.fillMaxWidth().weight(0.6f),\n            contentDescription = null,\n            contentScale = ContentScale.Crop\n        )\n    }\n}\n</code></pre>\n<p>Which solution you choose will depend on your specific needs and preferences. I recommend trying out a few different solutions to see what works best for you.</p>\n"}],"owner":{"account_id":16762153,"reputation":1,"user_id":12116605,"display_name":"Phan L&#234; Thng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695397438,"creation_date":1695396575,"question_id":77158961,"body_markdown":"I have a screen that displays a list of image movies using AsyncImage&lt;br&gt;\r\nhttps://i.stack.imgur.com/mhSUh.jpg\r\n\r\nWhen I click an item, the Detail screen will display with a full-screen image&lt;br&gt;\r\nhttps://i.stack.imgur.com/pd9se.jpg  \r\n\r\nAnd when I back stack to the first screen, the image gets large&lt;br&gt;\r\nhttps://i.stack.imgur.com/cb80K.jpg\r\n\r\nHere is the code that displays the image on the first screen\r\n```\r\n        AsyncImage(\r\n                model = ImageRequest.Builder(LocalContext.current)\r\n                    .data(stringResource(id = R.string.base_image_url) + movie.posterPath)\r\n                    .placeholder(R.drawable.loading_image)\r\n                    .error(R.drawable.default_movie_image)\r\n                    .crossfade(true)\r\n                    .build(),\r\n                modifier = Modifier.fillMaxSize(),\r\n                contentDescription = null,\r\n                contentScale = ContentScale.Crop,\r\n            )\r\n```\r\nHere is the code that displays the image on the second screen\r\n```\r\n        AsyncImage(\r\n            model = ImageRequest.Builder(LocalContext.current)\r\n                .data(stringResource(id = R.string.base_image_url) + movie.poster_path)\r\n                .placeholder(R.drawable.loading_image)\r\n                .error(R.drawable.default_movie_image)\r\n                .crossfade(true)\r\n                .build(),\r\n            modifier = Modifier.fillMaxWidth().weight(0.6f),\r\n            contentDescription = null,\r\n            contentScale = ContentScale.Crop,\r\n        )\r\n```\r\nI want the image on the first screen will keep the size as normal. Please help me","title":"Coil AsyncImage get larger after back stack","body":"<p>I have a screen that displays a list of image movies using AsyncImage<br>\n<a href=\"https://i.stack.imgur.com/mhSUh.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/mhSUh.jpg</a></p>\n<p>When I click an item, the Detail screen will display with a full-screen image<br>\n<a href=\"https://i.stack.imgur.com/pd9se.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/pd9se.jpg</a></p>\n<p>And when I back stack to the first screen, the image gets large<br>\n<a href=\"https://i.stack.imgur.com/cb80K.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/cb80K.jpg</a></p>\n<p>Here is the code that displays the image on the first screen</p>\n<pre><code>        AsyncImage(\n                model = ImageRequest.Builder(LocalContext.current)\n                    .data(stringResource(id = R.string.base_image_url) + movie.posterPath)\n                    .placeholder(R.drawable.loading_image)\n                    .error(R.drawable.default_movie_image)\n                    .crossfade(true)\n                    .build(),\n                modifier = Modifier.fillMaxSize(),\n                contentDescription = null,\n                contentScale = ContentScale.Crop,\n            )\n</code></pre>\n<p>Here is the code that displays the image on the second screen</p>\n<pre><code>        AsyncImage(\n            model = ImageRequest.Builder(LocalContext.current)\n                .data(stringResource(id = R.string.base_image_url) + movie.poster_path)\n                .placeholder(R.drawable.loading_image)\n                .error(R.drawable.default_movie_image)\n                .crossfade(true)\n                .build(),\n            modifier = Modifier.fillMaxWidth().weight(0.6f),\n            contentDescription = null,\n            contentScale = ContentScale.Crop,\n        )\n</code></pre>\n<p>I want the image on the first screen will keep the size as normal. Please help me</p>\n"},{"tags":["java","uuid"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1477362034,"post_id":40230276,"comment_id":67723741,"body_markdown":"Maybe this helps https://modules.ceylon-lang.org/repo/1/herd/uuid/0.0.10/module-doc/api/index.html","body":"Maybe this helps <a href=\"https://modules.ceylon-lang.org/repo/1/herd/uuid/0.0.10/module-doc/api/index.html\" rel=\"nofollow noreferrer\">modules.ceylon-lang.org/repo/1/herd/uuid/0.0.10/module-doc/a&zwnj;&#8203;pi/&hellip;</a>"},{"owner":{"account_id":2476969,"reputation":1552,"user_id":2157401,"accept_rate":100,"display_name":"MordechayS"},"score":0,"creation_date":1477362056,"post_id":40230276,"comment_id":67723750,"body_markdown":"Possible duplicate of [this Java UUID5 implementation not passing unit test](http://stackoverflow.com/questions/16501357/this-java-uuid5-implementation-not-passing-unit-test)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/16501357/this-java-uuid5-implementation-not-passing-unit-test\">this Java UUID5 implementation not passing unit test</a>"}],"answers":[{"tags":[],"owner":{"account_id":1562546,"reputation":24865,"user_id":1452094,"display_name":"Kiskae"},"down_vote_count":1,"up_vote_count":28,"is_accepted":true,"score":27,"last_activity_date":1477419213,"creation_date":1477362286,"answer_id":40230410,"question_id":40230276,"body_markdown":"You can implement it yourself by following the code proposed in https://stackoverflow.com/a/28776880/1452094.\nHowever this does require some fiddling since the j.u.UUID constructor takes longs. \n\nAs of `Java 8` the standard library does not seem to support type 5. But third party libraries like &quot;Apache Commons Id&quot; have UUID implementations that do support it.\n\nEDIT: Here is a fully functional implementation:\n\n    import java.nio.charset.Charset;\n    import java.security.MessageDigest;\n    import java.security.NoSuchAlgorithmException;\n    import java.util.Objects;\n    import java.util.UUID;\n    \n    public class UUIDType5 {\n        private static final Charset UTF8 = Charset.forName(&quot;UTF-8&quot;);\n        public static final UUID NAMESPACE_DNS = UUID.fromString(&quot;6ba7b810-9dad-11d1-80b4-00c04fd430c8&quot;);\n        public static final UUID NAMESPACE_URL = UUID.fromString(&quot;6ba7b811-9dad-11d1-80b4-00c04fd430c8&quot;);\n        public static final UUID NAMESPACE_OID = UUID.fromString(&quot;6ba7b812-9dad-11d1-80b4-00c04fd430c8&quot;);\n        public static final UUID NAMESPACE_X500 = UUID.fromString(&quot;6ba7b814-9dad-11d1-80b4-00c04fd430c8&quot;);\n    \n        public static UUID nameUUIDFromNamespaceAndString(UUID namespace, String name) {\n            return nameUUIDFromNamespaceAndBytes(namespace, Objects.requireNonNull(name, &quot;name == null&quot;).getBytes(UTF8));\n        }\n    \n        public static UUID nameUUIDFromNamespaceAndBytes(UUID namespace, byte[] name) {\n            MessageDigest md;\n            try {\n                md = MessageDigest.getInstance(&quot;SHA-1&quot;);\n            } catch (NoSuchAlgorithmException nsae) {\n                throw new InternalError(&quot;SHA-1 not supported&quot;);\n            }\n            md.update(toBytes(Objects.requireNonNull(namespace, &quot;namespace is null&quot;)));\n            md.update(Objects.requireNonNull(name, &quot;name is null&quot;));\n            byte[] sha1Bytes = md.digest();\n            sha1Bytes[6] &amp;= 0x0f;  /* clear version        */\n            sha1Bytes[6] |= 0x50;  /* set to version 5     */\n            sha1Bytes[8] &amp;= 0x3f;  /* clear variant        */\n            sha1Bytes[8] |= 0x80;  /* set to IETF variant  */\n            return fromBytes(sha1Bytes);\n        }\n    \n        private static UUID fromBytes(byte[] data) {\n            // Based on the private UUID(bytes[]) constructor\n            long msb = 0;\n            long lsb = 0;\n            assert data.length &gt;= 16;\n            for (int i = 0; i &lt; 8; i++)\n                msb = (msb &lt;&lt; 8) | (data[i] &amp; 0xff);\n            for (int i = 8; i &lt; 16; i++)\n                lsb = (lsb &lt;&lt; 8) | (data[i] &amp; 0xff);\n            return new UUID(msb, lsb);\n        }\n    \n        private static byte[] toBytes(UUID uuid) {\n            // inverted logic of fromBytes()\n            byte[] out = new byte[16];\n            long msb = uuid.getMostSignificantBits();\n            long lsb = uuid.getLeastSignificantBits();\n            for (int i = 0; i &lt; 8; i++)\n                out[i] = (byte) ((msb &gt;&gt; ((7 - i) * 8)) &amp; 0xff);\n            for (int i = 8; i &lt; 16; i++)\n                out[i] = (byte) ((lsb &gt;&gt; ((15 - i) * 8)) &amp; 0xff);\n            return out;\n        }\n    }\n\nTo verify it works I ran the following code:\n\n    public static void main(String[] args) {\n        UUID test = UUIDType5.nameUUIDFromNamespaceAndString(NAMESPACE_URL, &quot;google.com&quot;);\n        System.out.println(test);\n        System.out.println(test.version());\n    }\n\nThis created the output: \n\n&gt; fedb2fa3-8f5c-5189-80e6-f563dd1cb8f9\n&gt;\n&gt; 5\n\nVerified against the official python implementation:\n\n&gt; \\&gt;&gt;&gt; print(uuid.uuid5(uuid.NAMESPACE_URL, &#39;google.com&#39;))\n&gt;\n&gt; fedb2fa3-8f5c-5189-80e6-f563dd1cb8f9","title":"How to make a Type 5 UUID in Java?","body":"<p>You can implement it yourself by following the code proposed in <a href=\"https://stackoverflow.com/a/28776880/1452094\">https://stackoverflow.com/a/28776880/1452094</a>.\nHowever this does require some fiddling since the j.u.UUID constructor takes longs.</p>\n<p>As of <code>Java 8</code> the standard library does not seem to support type 5. But third party libraries like &quot;Apache Commons Id&quot; have UUID implementations that do support it.</p>\n<p>EDIT: Here is a fully functional implementation:</p>\n<pre><code>import java.nio.charset.Charset;\nimport java.security.MessageDigest;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Objects;\nimport java.util.UUID;\n\npublic class UUIDType5 {\n    private static final Charset UTF8 = Charset.forName(&quot;UTF-8&quot;);\n    public static final UUID NAMESPACE_DNS = UUID.fromString(&quot;6ba7b810-9dad-11d1-80b4-00c04fd430c8&quot;);\n    public static final UUID NAMESPACE_URL = UUID.fromString(&quot;6ba7b811-9dad-11d1-80b4-00c04fd430c8&quot;);\n    public static final UUID NAMESPACE_OID = UUID.fromString(&quot;6ba7b812-9dad-11d1-80b4-00c04fd430c8&quot;);\n    public static final UUID NAMESPACE_X500 = UUID.fromString(&quot;6ba7b814-9dad-11d1-80b4-00c04fd430c8&quot;);\n\n    public static UUID nameUUIDFromNamespaceAndString(UUID namespace, String name) {\n        return nameUUIDFromNamespaceAndBytes(namespace, Objects.requireNonNull(name, &quot;name == null&quot;).getBytes(UTF8));\n    }\n\n    public static UUID nameUUIDFromNamespaceAndBytes(UUID namespace, byte[] name) {\n        MessageDigest md;\n        try {\n            md = MessageDigest.getInstance(&quot;SHA-1&quot;);\n        } catch (NoSuchAlgorithmException nsae) {\n            throw new InternalError(&quot;SHA-1 not supported&quot;);\n        }\n        md.update(toBytes(Objects.requireNonNull(namespace, &quot;namespace is null&quot;)));\n        md.update(Objects.requireNonNull(name, &quot;name is null&quot;));\n        byte[] sha1Bytes = md.digest();\n        sha1Bytes[6] &amp;= 0x0f;  /* clear version        */\n        sha1Bytes[6] |= 0x50;  /* set to version 5     */\n        sha1Bytes[8] &amp;= 0x3f;  /* clear variant        */\n        sha1Bytes[8] |= 0x80;  /* set to IETF variant  */\n        return fromBytes(sha1Bytes);\n    }\n\n    private static UUID fromBytes(byte[] data) {\n        // Based on the private UUID(bytes[]) constructor\n        long msb = 0;\n        long lsb = 0;\n        assert data.length &gt;= 16;\n        for (int i = 0; i &lt; 8; i++)\n            msb = (msb &lt;&lt; 8) | (data[i] &amp; 0xff);\n        for (int i = 8; i &lt; 16; i++)\n            lsb = (lsb &lt;&lt; 8) | (data[i] &amp; 0xff);\n        return new UUID(msb, lsb);\n    }\n\n    private static byte[] toBytes(UUID uuid) {\n        // inverted logic of fromBytes()\n        byte[] out = new byte[16];\n        long msb = uuid.getMostSignificantBits();\n        long lsb = uuid.getLeastSignificantBits();\n        for (int i = 0; i &lt; 8; i++)\n            out[i] = (byte) ((msb &gt;&gt; ((7 - i) * 8)) &amp; 0xff);\n        for (int i = 8; i &lt; 16; i++)\n            out[i] = (byte) ((lsb &gt;&gt; ((15 - i) * 8)) &amp; 0xff);\n        return out;\n    }\n}\n</code></pre>\n<p>To verify it works I ran the following code:</p>\n<pre><code>public static void main(String[] args) {\n    UUID test = UUIDType5.nameUUIDFromNamespaceAndString(NAMESPACE_URL, &quot;google.com&quot;);\n    System.out.println(test);\n    System.out.println(test.version());\n}\n</code></pre>\n<p>This created the output:</p>\n<blockquote>\n<p>fedb2fa3-8f5c-5189-80e6-f563dd1cb8f9</p>\n<p>5</p>\n</blockquote>\n<p>Verified against the official python implementation:</p>\n<blockquote>\n<p>&gt;&gt;&gt; print(uuid.uuid5(uuid.NAMESPACE_URL, 'google.com'))</p>\n<p>fedb2fa3-8f5c-5189-80e6-f563dd1cb8f9</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1053260,"reputation":1032,"user_id":1056610,"display_name":"fabiolimace"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695397165,"creation_date":1569219698,"answer_id":58056648,"question_id":40230276,"body_markdown":"\r\nIn the case someone else needs a library that generates version 5 UUIDs.\r\n\r\n```java\r\nUUID uuid = UuidCreator.getNameBasedSha1(&quot;google.com&quot;);\r\n```\r\n\r\n```java\r\nUUID uuid = UuidCreator.getNameBasedSha1(UuidCreator.NAMESPACE_URL, &quot;google.com&quot;);\r\n```\r\n\r\nhttps://github.com/f4b6a3/uuid-creator\r\n\r\n---\r\n**Disclaimer**: I&#39;m the main contributor of this library.\r\n\r\n","title":"How to make a Type 5 UUID in Java?","body":"<p>In the case someone else needs a library that generates version 5 UUIDs.</p>\n<pre class=\"lang-java prettyprint-override\"><code>UUID uuid = UuidCreator.getNameBasedSha1(&quot;google.com&quot;);\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>UUID uuid = UuidCreator.getNameBasedSha1(UuidCreator.NAMESPACE_URL, &quot;google.com&quot;);\n</code></pre>\n<p><a href=\"https://github.com/f4b6a3/uuid-creator\" rel=\"nofollow noreferrer\">https://github.com/f4b6a3/uuid-creator</a></p>\n<hr />\n<p><strong>Disclaimer</strong>: I'm the main contributor of this library.</p>\n"},{"tags":[],"owner":{"account_id":357783,"reputation":5010,"user_id":698168,"display_name":"Julien Kronegg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678565082,"creation_date":1677739790,"answer_id":75612102,"question_id":40230276,"body_markdown":"The java-uuid-generator (JUG) library can generate version 5 UUIDs:\r\n\r\n    UUID uuid = Generators.nameBasedgenerator().generate(&quot;string to hash&quot;); // Version 5\r\n\r\n\r\nhttps://github.com/cowtowncoder/java-uuid-generator","title":"How to make a Type 5 UUID in Java?","body":"<p>The java-uuid-generator (JUG) library can generate version 5 UUIDs:</p>\n<pre><code>UUID uuid = Generators.nameBasedgenerator().generate(&quot;string to hash&quot;); // Version 5\n</code></pre>\n<p><a href=\"https://github.com/cowtowncoder/java-uuid-generator\" rel=\"nofollow noreferrer\">https://github.com/cowtowncoder/java-uuid-generator</a></p>\n"}],"owner":{"account_id":1482763,"reputation":17121,"user_id":1391717,"accept_rate":55,"display_name":"Matthew Moisen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18079,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":40230410,"answer_count":3,"score":17,"last_activity_date":1695397165,"creation_date":1477361343,"question_id":40230276,"body_markdown":"In python, to make a Type 5 UUID we can simply do:\r\n\r\n    import uuid\r\n    print uuid.uuid5(uuid.NAMESPACE_URL, &#39;my string&#39;)\r\n\r\nLooking through the [java documentation for java.util.UUID](https://docs.oracle.com/javase/7/docs/api/java/util/UUID.html), I don&#39;t see how to do it. First off, type 5 isn&#39;t mentioned. They do have a Type 3, but the signature is:\r\n\r\n     nameUUIDFromBytes(byte[] name)\r\n     Static factory to retrieve a type 3 (name based) UUID based on the specified byte array.\r\n\r\n**How can we make a Type 5 UUID in Java?**","title":"How to make a Type 5 UUID in Java?","body":"<p>In python, to make a Type 5 UUID we can simply do:</p>\n\n<pre><code>import uuid\nprint uuid.uuid5(uuid.NAMESPACE_URL, 'my string')\n</code></pre>\n\n<p>Looking through the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/UUID.html\" rel=\"noreferrer\">java documentation for java.util.UUID</a>, I don't see how to do it. First off, type 5 isn't mentioned. They do have a Type 3, but the signature is:</p>\n\n<pre><code> nameUUIDFromBytes(byte[] name)\n Static factory to retrieve a type 3 (name based) UUID based on the specified byte array.\n</code></pre>\n\n<p><strong>How can we make a Type 5 UUID in Java?</strong></p>\n"},{"tags":["java","uuid"],"comments":[{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha Ziober"},"score":0,"creation_date":1362307777,"post_id":15184820,"comment_id":21391872,"body_markdown":"Why are you don&#39;t use sequence? Are you able to use things like that? Or UUID this is a solution which you have to use?","body":"Why are you don&#39;t use sequence? Are you able to use things like that? Or UUID this is a solution which you have to use?"},{"owner":{"account_id":335755,"reputation":16443,"user_id":663011,"accept_rate":83,"display_name":"Saurabh Kumar"},"score":0,"creation_date":1362308016,"post_id":15184820,"comment_id":21391925,"body_markdown":"can you explain more about sequence","body":"can you explain more about sequence"},{"owner":{"account_id":1692169,"reputation":5294,"user_id":1554314,"accept_rate":100,"display_name":"Taky"},"score":0,"creation_date":1362308431,"post_id":15184820,"comment_id":21392022,"body_markdown":"What DB do you use? What db framework do you use(JDBC, Hibernate, myBatis)?","body":"What DB do you use? What db framework do you use(JDBC, Hibernate, myBatis)?"},{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha Ziober"},"score":0,"creation_date":1362308497,"post_id":15184820,"comment_id":21392038,"body_markdown":"Please read about PostgreSQL sequence http://www.neilconway.org/docs/sequences/. This is just an example. In your database you should fine something similar to it.","body":"Please read about PostgreSQL sequence <a href=\"http://www.neilconway.org/docs/sequences/\" rel=\"nofollow noreferrer\">neilconway.org/docs/sequences</a>. This is just an example. In your database you should fine something similar to it."},{"owner":{"account_id":335755,"reputation":16443,"user_id":663011,"accept_rate":83,"display_name":"Saurabh Kumar"},"score":0,"creation_date":1362308662,"post_id":15184820,"comment_id":21392073,"body_markdown":"I am using mysql. I want to do it in application side because if i will do it in database side i have to fire one more query again to get the id of the row..and i want to avoid that","body":"I am using mysql. I want to do it in application side because if i will do it in database side i have to fire one more query again to get the id of the row..and i want to avoid that"},{"owner":{"account_id":872093,"reputation":13753,"user_id":922712,"accept_rate":55,"display_name":"user93353"},"score":0,"creation_date":1362309575,"post_id":15184820,"comment_id":21392268,"body_markdown":"Why do you think MostSignificantBits of the UUID will be unique? The UUID will be unique, but not necessarily the MostSignificantBits of the UUID.","body":"Why do you think MostSignificantBits of the UUID will be unique? The UUID will be unique, but not necessarily the MostSignificantBits of the UUID."},{"owner":{"account_id":335755,"reputation":16443,"user_id":663011,"accept_rate":83,"display_name":"Saurabh Kumar"},"score":0,"creation_date":1362309747,"post_id":15184820,"comment_id":21392305,"body_markdown":"yes u are right user93353 . i just checked the java docs of UUID.","body":"yes u are right user93353 . i just checked the java docs of UUID."},{"owner":{"account_id":4875570,"reputation":171,"user_id":3930805,"display_name":"Shajee Lawrence"},"score":0,"creation_date":1540020543,"post_id":15184820,"comment_id":92717975,"body_markdown":"This scenario becomes more compelling if your application is database agnostic and you have to manage your own sequence. Keeping the primary key as a uuid string by far may not be as efficient compared to a number","body":"This scenario becomes more compelling if your application is database agnostic and you have to manage your own sequence. Keeping the primary key as a uuid string by far may not be as efficient compared to a number"},{"owner":{"account_id":3138243,"reputation":371,"user_id":3383941,"display_name":"ProjectDelta"},"score":0,"creation_date":1557229446,"post_id":15184820,"comment_id":98687379,"body_markdown":"Most databases that I have used(including MySQL) will return to you the ID that was generated for the newly inserted item on the insert method ie: the insert method returns a long which is the ID of the item that was inserted, likewise if you insert a list of items it will return a list of longs with indexes matching the list that was inserted","body":"Most databases that I have used(including MySQL) will return to you the ID that was generated for the newly inserted item on the insert method ie: the insert method returns a long which is the ID of the item that was inserted, likewise if you insert a list of items it will return a list of longs with indexes matching the list that was inserted"}],"answers":[{"tags":[],"owner":{"account_id":335755,"reputation":16443,"user_id":663011,"accept_rate":83,"display_name":"Saurabh Kumar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1362310632,"creation_date":1362310632,"answer_id":15185243,"question_id":15184820,"body_markdown":"I just came across this solution. I am for the time being trying to understand the solution.It says Java implementation of twitter snowflake. 64 bit sequential ID generator based on twitter snowflake ID generation algorithm. \r\n\r\n\r\nhttps://github.com/Predictor/javasnowflake\r\n\r\nAny suggestions are welcome.","title":"How to generate unique positive Long using UUID","body":"<p>I just came across this solution. I am for the time being trying to understand the solution.It says Java implementation of twitter snowflake. 64 bit sequential ID generator based on twitter snowflake ID generation algorithm. </p>\n\n<p><a href=\"https://github.com/Predictor/javasnowflake\" rel=\"nofollow\">https://github.com/Predictor/javasnowflake</a></p>\n\n<p>Any suggestions are welcome.</p>\n"},{"tags":[],"owner":{"account_id":2390155,"reputation":586,"user_id":2090146,"display_name":"Doron Manor"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1362312037,"creation_date":1362312037,"answer_id":15185420,"question_id":15184820,"body_markdown":"Take a look at http://commons.apache.org/sandbox/commons-id//index.html\r\nIt has a LongGenerator that can give you exactly what you need.\r\n\r\nIn addition if you are using Hibernate then you can ask it to generate IDs for you (it has several algorithms you can choose from), in if not you can just take a look at their implementation for example http://grepcode.com/file/repo1.maven.org/maven2/hibernate/hibernate/2.1.8/net/sf/hibernate/id/TableHiLoGenerator.java#TableHiLoGenerator) ","title":"How to generate unique positive Long using UUID","body":"<p>Take a look at <a href=\"http://commons.apache.org/sandbox/commons-id//index.html\" rel=\"noreferrer\">http://commons.apache.org/sandbox/commons-id//index.html</a>\nIt has a LongGenerator that can give you exactly what you need.</p>\n\n<p>In addition if you are using Hibernate then you can ask it to generate IDs for you (it has several algorithms you can choose from), in if not you can just take a look at their implementation for example <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/hibernate/hibernate/2.1.8/net/sf/hibernate/id/TableHiLoGenerator.java#TableHiLoGenerator\" rel=\"noreferrer\">http://grepcode.com/file/repo1.maven.org/maven2/hibernate/hibernate/2.1.8/net/sf/hibernate/id/TableHiLoGenerator.java#TableHiLoGenerator</a>) </p>\n"},{"tags":[],"owner":{"account_id":1362100,"reputation":635,"user_id":1299267,"display_name":"Daniel Nuriyev"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1463673439,"creation_date":1463673439,"answer_id":37328460,"question_id":15184820,"body_markdown":"As the others have written, long does not have enough space for a unique number. But in many cases a number may be unique enough for a specific use.\r\nFor example, a timestamp with the nanosecond precision is often good enough.\r\nTo get it, shift the current milliseconds 20 bits left to allocate space for nanoseconds and then overlay it with the nanoseconds:\r\n\r\n    (System.currentTimeMillis() &lt;&lt; 20) | (System.nanoTime() &amp; ~9223372036854251520L);\r\n\r\nThe **nano &amp; ~9223372036854251520L** part takes the current nanoseconds and sets the first 44 bytes to 0, leaving only the right 20 bits which represent nanoseconds up to one millisecond (999999 nanos)\r\nIt is the same as: \r\n\r\n    nanoseconds &amp; ~1111111111111111111111111111111111111111111100000000000000000000\r\n\r\nSide note: nanoseconds should not be used to represent the current time because their starting point is not fixed in time and because they are recycled when they reach the maximum.\r\n\r\nYou can use any other bit manipulation. It is usually good to take into account the current time and something else such as the current thread id, process id, ip.\r\n\r\n\r\n","title":"How to generate unique positive Long using UUID","body":"<p>As the others have written, long does not have enough space for a unique number. But in many cases a number may be unique enough for a specific use.\nFor example, a timestamp with the nanosecond precision is often good enough.\nTo get it, shift the current milliseconds 20 bits left to allocate space for nanoseconds and then overlay it with the nanoseconds:</p>\n\n<pre><code>(System.currentTimeMillis() &lt;&lt; 20) | (System.nanoTime() &amp; ~9223372036854251520L);\n</code></pre>\n\n<p>The <strong>nano &amp; ~9223372036854251520L</strong> part takes the current nanoseconds and sets the first 44 bytes to 0, leaving only the right 20 bits which represent nanoseconds up to one millisecond (999999 nanos)\nIt is the same as: </p>\n\n<pre><code>nanoseconds &amp; ~1111111111111111111111111111111111111111111100000000000000000000\n</code></pre>\n\n<p>Side note: nanoseconds should not be used to represent the current time because their starting point is not fixed in time and because they are recycled when they reach the maximum.</p>\n\n<p>You can use any other bit manipulation. It is usually good to take into account the current time and something else such as the current thread id, process id, ip.</p>\n"},{"tags":[],"owner":{"account_id":4764498,"reputation":666,"user_id":3851001,"display_name":"Sasha Pechenyi"},"down_vote_count":0,"up_vote_count":65,"is_accepted":true,"score":65,"last_activity_date":1534611537,"creation_date":1484224427,"answer_id":41613362,"question_id":15184820,"body_markdown":"&lt;!-- language: lang-java --&gt;\r\n\r\n    UUID.randomUUID().getMostSignificantBits() &amp; Long.MAX_VALUE\r\n\r\nThe reason why this works is, when you do bitwise &amp; with 1 it allows the same digit to pass as it is and when you do bitwise &amp; with 0 it blocks it and result is 0. Now, Long.MAX_Value in binary is \r\n\r\n    0111111111111111111111111111111111111111111111111111111111111111 \r\n\r\nthis is 0 followed by 63 1s (total is 64 bits, it&#39;s long in java)\r\n\r\nSo when you bitwise &amp; a number X with this above number then you will get the same number X except that the leftmost bit is now turned into a zero. Which means you&#39;ve only changed the sign of that number and not the value.","title":"How to generate unique positive Long using UUID","body":"<pre class=\"lang-java prettyprint-override\"><code>UUID.randomUUID().getMostSignificantBits() &amp; Long.MAX_VALUE\n</code></pre>\n\n<p>The reason why this works is, when you do bitwise &amp; with 1 it allows the same digit to pass as it is and when you do bitwise &amp; with 0 it blocks it and result is 0. Now, Long.MAX_Value in binary is </p>\n\n<pre><code>0111111111111111111111111111111111111111111111111111111111111111 \n</code></pre>\n\n<p>this is 0 followed by 63 1s (total is 64 bits, it's long in java)</p>\n\n<p>So when you bitwise &amp; a number X with this above number then you will get the same number X except that the leftmost bit is now turned into a zero. Which means you've only changed the sign of that number and not the value.</p>\n"},{"tags":[],"owner":{"account_id":218623,"reputation":445,"user_id":475044,"accept_rate":67,"display_name":"wcmatthysen"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1578506302,"creation_date":1578394777,"answer_id":59627104,"question_id":15184820,"body_markdown":"This code is inspired by @Daniel Nuriyev&#39;s answer. But, instead of using nano-time, a counter (or discriminator as I&#39;ve seen it called) is used when collisions occur in the same millisecond:\r\n\r\n    private static long previousTimeMillis = System.currentTimeMillis();\r\n    private static long counter = 0L;\r\n\r\n    public static synchronized long nextID() {\r\n        long currentTimeMillis = System.currentTimeMillis();\r\n        counter = (currentTimeMillis == previousTimeMillis) ? (counter + 1L) &amp; 1048575L : 0L;\r\n        previousTimeMillis = currentTimeMillis;\r\n        long timeComponent = (currentTimeMillis &amp; 8796093022207L) &lt;&lt; 20;\r\n        return timeComponent | counter;\r\n    }\r\n\r\nThis method generates a semi-unique ID by packing a millisecond timestamp-component together with a counter-component. The algorithm allows for roughly a million (or 1048575 to be exact) unique IDs to be generated in the same millisecond before collisions start to occur. Unique IDs are generated until the year 2248 at which point it will wrap around and start at 0 again.\r\n\r\n\r\nThe ID-generation is done as follows:\r\n\r\nMilliseconds since epoch:\r\n\r\n`|0|000000000000000000000010110111101111100110001001111100101011111|`\r\n\r\nBitwise AND with (8796093022207L):\r\n\r\n`|0|000000000000000000001111111111111111111111111111111111111111111|`\r\n\r\nto give you the 43 least significant bits as the time-component.\r\n\r\nThen shift this to the left by 20 bits to give you:\r\n\r\n`|0|0010110111101111100110001001111100101011111|00000000000000000000|`\r\n\r\nBitwise OR with 20 bits of counter (e.g. if counter is 3) to give you:\r\n\r\n`|0|0010110111101111100110001001111100101011111|00000000000000000101|`\r\n\r\nOnly 43 bits (and not 44) are used for the time-component as we do not want to allow the most significant bit (which is the sign of the number) to be changed. This results in only positive IDs to be generated.","title":"How to generate unique positive Long using UUID","body":"<p>This code is inspired by @Daniel Nuriyev's answer. But, instead of using nano-time, a counter (or discriminator as I've seen it called) is used when collisions occur in the same millisecond:</p>\n\n<pre><code>private static long previousTimeMillis = System.currentTimeMillis();\nprivate static long counter = 0L;\n\npublic static synchronized long nextID() {\n    long currentTimeMillis = System.currentTimeMillis();\n    counter = (currentTimeMillis == previousTimeMillis) ? (counter + 1L) &amp; 1048575L : 0L;\n    previousTimeMillis = currentTimeMillis;\n    long timeComponent = (currentTimeMillis &amp; 8796093022207L) &lt;&lt; 20;\n    return timeComponent | counter;\n}\n</code></pre>\n\n<p>This method generates a semi-unique ID by packing a millisecond timestamp-component together with a counter-component. The algorithm allows for roughly a million (or 1048575 to be exact) unique IDs to be generated in the same millisecond before collisions start to occur. Unique IDs are generated until the year 2248 at which point it will wrap around and start at 0 again.</p>\n\n<p>The ID-generation is done as follows:</p>\n\n<p>Milliseconds since epoch:</p>\n\n<p><code>|0|000000000000000000000010110111101111100110001001111100101011111|</code></p>\n\n<p>Bitwise AND with (8796093022207L):</p>\n\n<p><code>|0|000000000000000000001111111111111111111111111111111111111111111|</code></p>\n\n<p>to give you the 43 least significant bits as the time-component.</p>\n\n<p>Then shift this to the left by 20 bits to give you:</p>\n\n<p><code>|0|0010110111101111100110001001111100101011111|00000000000000000000|</code></p>\n\n<p>Bitwise OR with 20 bits of counter (e.g. if counter is 3) to give you:</p>\n\n<p><code>|0|0010110111101111100110001001111100101011111|00000000000000000101|</code></p>\n\n<p>Only 43 bits (and not 44) are used for the time-component as we do not want to allow the most significant bit (which is the sign of the number) to be changed. This results in only positive IDs to be generated.</p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578395805,"creation_date":1578395805,"answer_id":59627354,"question_id":15184820,"body_markdown":"&gt; I want to do it in application side because if i will do it in database side i have to fire one more query again to get the id of the row..and i want to avoid that.\r\n\r\n***NO!*** You can use an AUTOINCREMENT primary key, and in JDBC retrieve the generated key with the INSERT.\r\n\r\n    String insertSQL = &quot;INSERT INTO table... (name, ...)&quot;\r\n            + &quot; VALUES(?, ..., ?)&quot;;\r\n    try (Connection connection = getConnection();\r\n            PreparedStatement stmt = connection.prepareStatement(insertSQL,\r\n                    Statement.RETURN_GENERATED_KEYS)) {\r\n        stmt.setString(1, ...);\r\n        stmt.setInt(2, ...);\r\n        stmt.setBigDecimal(3, ...);\r\n        ...\r\n        stmt.executeUpdate();\r\n\r\n        ResultSet keysRS = stmt.getGeneratedKeys();\r\n        if (keysRS.next()) {\r\n            long id = keysRS.getInt(1);\r\n        }\r\n    }\r\n\r\nThis is more efficient, and definitely easier, and safer. UUID are 128 bits. Taking just 64 bits reduces its uniqueness. So at least subjectively not 100% perfect. At least XOR (`^`) both long parts.","title":"How to generate unique positive Long using UUID","body":"<blockquote>\n  <p>I want to do it in application side because if i will do it in database side i have to fire one more query again to get the id of the row..and i want to avoid that.</p>\n</blockquote>\n\n<p><strong><em>NO!</em></strong> You can use an AUTOINCREMENT primary key, and in JDBC retrieve the generated key with the INSERT.</p>\n\n<pre><code>String insertSQL = \"INSERT INTO table... (name, ...)\"\n        + \" VALUES(?, ..., ?)\";\ntry (Connection connection = getConnection();\n        PreparedStatement stmt = connection.prepareStatement(insertSQL,\n                Statement.RETURN_GENERATED_KEYS)) {\n    stmt.setString(1, ...);\n    stmt.setInt(2, ...);\n    stmt.setBigDecimal(3, ...);\n    ...\n    stmt.executeUpdate();\n\n    ResultSet keysRS = stmt.getGeneratedKeys();\n    if (keysRS.next()) {\n        long id = keysRS.getInt(1);\n    }\n}\n</code></pre>\n\n<p>This is more efficient, and definitely easier, and safer. UUID are 128 bits. Taking just 64 bits reduces its uniqueness. So at least subjectively not 100% perfect. At least XOR (<code>^</code>) both long parts.</p>\n"},{"tags":[],"owner":{"account_id":13138794,"reputation":148,"user_id":9490988,"display_name":"Priyam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673863908,"creation_date":1673863908,"answer_id":75132757,"question_id":15184820,"body_markdown":"A bit late to reply but anyone reading this now, you can also implement LUHN algorithm to generate unique Id for your Primary Key. We have been using it for more than 5 years in our product and it does the job.","title":"How to generate unique positive Long using UUID","body":"<p>A bit late to reply but anyone reading this now, you can also implement LUHN algorithm to generate unique Id for your Primary Key. We have been using it for more than 5 years in our product and it does the job.</p>\n"},{"tags":[],"owner":{"account_id":1053260,"reputation":1032,"user_id":1056610,"display_name":"fabiolimace"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695397098,"creation_date":1678505652,"answer_id":75702619,"question_id":15184820,"body_markdown":"\r\nYou can also use a *Time-Sorted Identifier (TSID)*, which is derived from [Twitter&#39;s Snowflake](https://en.wikipedia.org/wiki/Snowflake_ID) ID.\r\n\r\nA TSID is very similar to other ideas that have been shown here. There is no need to explain what others explained well a long time ago.\r\n\r\nExample code:\r\n\r\n```java\r\npublic class TSID {\r\n\r\n\tprivate static final int RANDOM_BITS = 22;\r\n\tprivate static final int RANDOM_MASK = 0x003fffff;\r\n\tprivate static final long TSID_EPOCH = Instant.parse(&quot;2020-01-01T00:00:00.000Z&quot;).toEpochMilli();\r\n\tprivate static final AtomicInteger counter = new AtomicInteger((new SecureRandom()).nextInt());\r\n\r\n\tpublic static long next() {\r\n\t\tfinal long time = (System.currentTimeMillis() - TSID_EPOCH) &lt;&lt; RANDOM_BITS;\r\n\t\tfinal long tail = counter.incrementAndGet() &amp; RANDOM_MASK;\r\n\t\treturn (time | tail);\r\n\t}\r\n}\r\n```\r\n\r\nThe above code was copied from [Tsid](https://github.com/f4b6a3/tsid-creator/blob/master/src/main/java/com/github/f4b6a3/tsid/Tsid.java) and adapted to create a small example. It can generate up to 4,194,304 IDs per millisecond without collisions, assuming there is only one ID generator.\r\n\r\nIf you have concerns about security, i.e. generation time leakage and sequence guessing, check out Francesco&#39;s [ID Encryptor](https://github.com/fillumina/id-encryptor) library.\r\n\r\nNote that if you intend to use 64-bit identifiers in Javascript, which has  [52-bit precision](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number), you need to convert them to some string format, i.e. hex, base-32, base-62, etc.\r\n\r\n\r\nFor more information, read these excellent articles by Vlad:\r\n* [The best UUID type for a database Primary Key](https://vladmihalcea.com/uuid-database-primary-key)\r\n* [The best way to generate a TSID entity identifier with JPA and Hibernate](https://vladmihalcea.com/tsid-identifier-jpa-hibernate)\r\n\r\n---\r\n**Disclaimer**: I am the author of `tsid-creator`.","title":"How to generate unique positive Long using UUID","body":"<p>You can also use a <em>Time-Sorted Identifier (TSID)</em>, which is derived from <a href=\"https://en.wikipedia.org/wiki/Snowflake_ID\" rel=\"nofollow noreferrer\">Twitter's Snowflake</a> ID.</p>\n<p>A TSID is very similar to other ideas that have been shown here. There is no need to explain what others explained well a long time ago.</p>\n<p>Example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class TSID {\n\n    private static final int RANDOM_BITS = 22;\n    private static final int RANDOM_MASK = 0x003fffff;\n    private static final long TSID_EPOCH = Instant.parse(&quot;2020-01-01T00:00:00.000Z&quot;).toEpochMilli();\n    private static final AtomicInteger counter = new AtomicInteger((new SecureRandom()).nextInt());\n\n    public static long next() {\n        final long time = (System.currentTimeMillis() - TSID_EPOCH) &lt;&lt; RANDOM_BITS;\n        final long tail = counter.incrementAndGet() &amp; RANDOM_MASK;\n        return (time | tail);\n    }\n}\n</code></pre>\n<p>The above code was copied from <a href=\"https://github.com/f4b6a3/tsid-creator/blob/master/src/main/java/com/github/f4b6a3/tsid/Tsid.java\" rel=\"nofollow noreferrer\">Tsid</a> and adapted to create a small example. It can generate up to 4,194,304 IDs per millisecond without collisions, assuming there is only one ID generator.</p>\n<p>If you have concerns about security, i.e. generation time leakage and sequence guessing, check out Francesco's <a href=\"https://github.com/fillumina/id-encryptor\" rel=\"nofollow noreferrer\">ID Encryptor</a> library.</p>\n<p>Note that if you intend to use 64-bit identifiers in Javascript, which has  <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number\" rel=\"nofollow noreferrer\">52-bit precision</a>, you need to convert them to some string format, i.e. hex, base-32, base-62, etc.</p>\n<p>For more information, read these excellent articles by Vlad:</p>\n<ul>\n<li><a href=\"https://vladmihalcea.com/uuid-database-primary-key\" rel=\"nofollow noreferrer\">The best UUID type for a database Primary Key</a></li>\n<li><a href=\"https://vladmihalcea.com/tsid-identifier-jpa-hibernate\" rel=\"nofollow noreferrer\">The best way to generate a TSID entity identifier with JPA and Hibernate</a></li>\n</ul>\n<hr />\n<p><strong>Disclaimer</strong>: I am the author of <code>tsid-creator</code>.</p>\n"}],"owner":{"account_id":335755,"reputation":16443,"user_id":663011,"accept_rate":83,"display_name":"Saurabh Kumar"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91407,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":41613362,"answer_count":8,"score":50,"last_activity_date":1695397098,"creation_date":1362307425,"question_id":15184820,"body_markdown":"I have a requirement to generate unique Long ids for my database primary key column.\r\n\r\n   I thought i can use **UUID.randomUUID().getMostSignificantBits()** but sometimes its generating some negative long also which is problem for me.\r\n\r\n Is it possible to generate only positive long from UUID ?There will be like billions of entries so i want that each generated key must be unique.\r\n\r\n","title":"How to generate unique positive Long using UUID","body":"<p>I have a requirement to generate unique Long ids for my database primary key column.</p>\n\n<p>I thought i can use <strong>UUID.randomUUID().getMostSignificantBits()</strong> but sometimes its generating some negative long also which is problem for me.</p>\n\n<p>Is it possible to generate only positive long from UUID ?There will be like billions of entries so i want that each generated key must be unique.</p>\n"},{"tags":["java","iso","apdu","iso-19794"],"answers":[{"tags":[],"owner":{"account_id":22883167,"reputation":465,"user_id":17024479,"display_name":"nvf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635176830,"creation_date":1635175926,"answer_id":69710872,"question_id":69698977,"body_markdown":"Usually error SW=6987 means that your secure channel protocol is not implemented correctly. For example, secured case 3 command should contain DO 87 (87-L-01-encrypted data) and DO 8E (8E-L-MAC). If you don&#39;t put DO 8E in the end of secured APDU data field, you&#39;ll have error &quot;Expected secure messaging DOs missing&quot;.\r\nBy the way, Doc 9303 compliant cards don&#39;t store minutiae data. They store fingerprint image.","title":"Error 69 87 when do APDU verify instruction with biometric","body":"<p>Usually error SW=6987 means that your secure channel protocol is not implemented correctly. For example, secured case 3 command should contain DO 87 (87-L-01-encrypted data) and DO 8E (8E-L-MAC). If you don't put DO 8E in the end of secured APDU data field, you'll have error &quot;Expected secure messaging DOs missing&quot;.\nBy the way, Doc 9303 compliant cards don't store minutiae data. They store fingerprint image.</p>\n"}],"owner":{"account_id":1076047,"reputation":138,"user_id":1074182,"display_name":"Tito"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":326,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695397065,"creation_date":1635095016,"question_id":69698977,"body_markdown":"I&#39;m doing a fingerprint verification process with a Chilean ID card.\r\nIt compliant with:\r\nICAO 9303 Part 3, Volume 2\r\n ICAO Technical Report LDS 1.7\r\n IAS ECC v1.0.1 specification\r\n ISO 14443, Type B\r\n ISO 7810\r\n ISO 7816-15\r\n ISO 19794-2 \r\n ISO 19794-5 \r\n Java Card 2.2.2\r\n Global Platform 2.1.1 \r\n\r\n It have Match On Card fingerprint verification.\r\n\r\nIt use iso 19794-2:2005 smart card.\r\nI convert minutiae from ANSI 378 TO iso 19794-2:2005 smart card.\r\nI did all process of security, challenger, mutual authentication, etc.\r\nBut when i send a encrypt APDU with INS 21 ( verify) I have this return message:\r\n69 87 : Expected secure messaging (SM) object missing. I don&#39;t know what mean because when we sent unencrypted message it return 69 88, and we check that enc key, mac , etc are ok.\r\nAnyone can help to discovery what mean?\r\nwe did try with different APDU ( with code 20,21, with tag 81 and 95, etc)\r\nThis is the last APU that we are using:\r\n\r\n 00210000BE7F2EBB81B4600b5c1f33800b082e334150087240411109720d991130c00d032e30412a033b40411b0c3b12a11b4140120f2e4141220f314041101031178110184017022e18413902520041111752229c112a8022082e2a4160082e40410e202e2ea10e3c402e0e173c205b0e264020062226304306144030052e144140055b00411a255b359c1a3d8035082e3d414f087140410f2c713f9a0f44c03f041744207304494020082d49405f084b80400b174b21420b04402104329503080910\r\n\r\nThanks!!\r\n\r\n\r\n\r\n","title":"Error 69 87 when do APDU verify instruction with biometric","body":"<p>I'm doing a fingerprint verification process with a Chilean ID card.\nIt compliant with:\nICAO 9303 Part 3, Volume 2\n ICAO Technical Report LDS 1.7\n IAS ECC v1.0.1 specification\n ISO 14443, Type B\n ISO 7810\n ISO 7816-15\n ISO 19794-2\n ISO 19794-5\n Java Card 2.2.2\n Global Platform 2.1.1</p>\n<p>It have Match On Card fingerprint verification.</p>\n<p>It use iso 19794-2:2005 smart card.\nI convert minutiae from ANSI 378 TO iso 19794-2:2005 smart card.\nI did all process of security, challenger, mutual authentication, etc.\nBut when i send a encrypt APDU with INS 21 ( verify) I have this return message:\n69 87 : Expected secure messaging (SM) object missing. I don't know what mean because when we sent unencrypted message it return 69 88, and we check that enc key, mac , etc are ok.\nAnyone can help to discovery what mean?\nwe did try with different APDU ( with code 20,21, with tag 81 and 95, etc)\nThis is the last APU that we are using:</p>\n<p>00210000BE7F2EBB81B4600b5c1f33800b082e334150087240411109720d991130c00d032e30412a033b40411b0c3b12a11b4140120f2e4141220f314041101031178110184017022e18413902520041111752229c112a8022082e2a4160082e40410e202e2ea10e3c402e0e173c205b0e264020062226304306144030052e144140055b00411a255b359c1a3d8035082e3d414f087140410f2c713f9a0f44c03f041744207304494020082d49405f084b80400b174b21420b04402104329503080910</p>\n<p>Thanks!!</p>\n"},{"tags":["java","mysql","uuid"],"comments":[{"owner":{"account_id":369687,"reputation":56616,"user_id":717214,"accept_rate":86,"display_name":"Aleks G"},"score":1,"creation_date":1397638969,"post_id":23104610,"comment_id":35316679,"body_markdown":"Why not just have `integer auto_increment` field and use it for default sorting?","body":"Why not just have <code>integer auto_increment</code> field and use it for default sorting?"},{"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"score":0,"creation_date":1397639575,"post_id":23104610,"comment_id":35317034,"body_markdown":"For research purpose I&#39;d like to be completely free from database generated values (so no `auto_increment`)","body":"For research purpose I&#39;d like to be completely free from database generated values (so no <code>auto_increment</code>)"},{"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"score":0,"creation_date":1397639743,"post_id":23104610,"comment_id":35317147,"body_markdown":"Can&#39;t you just sort by `created_at`?","body":"Can&#39;t you just sort by <code>created_at</code>?"},{"owner":{"account_id":22149,"reputation":2417,"user_id":54376,"accept_rate":90,"display_name":"Mike"},"score":4,"creation_date":1397639817,"post_id":23104610,"comment_id":35317197,"body_markdown":"UUIDs aren&#39;t designed to be ordered. If you want to select based on insertion order you need to order based on created_by.","body":"UUIDs aren&#39;t designed to be ordered. If you want to select based on insertion order you need to order based on created_by."},{"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"score":0,"creation_date":1397640112,"post_id":23104610,"comment_id":35317401,"body_markdown":"Why not working with my `created_at` column but in it&#39;s current form it isn&#39;t precise enough (there are duplicates) how could I deal with it ?","body":"Why not working with my <code>created_at</code> column but in it&#39;s current form it isn&#39;t precise enough (there are duplicates) how could I deal with it ?"},{"owner":{"account_id":989600,"reputation":30745,"user_id":1007273,"display_name":"hovanessyan"},"score":1,"creation_date":1397643644,"post_id":23104610,"comment_id":35319869,"body_markdown":"@AlexandreJacob why would you need to have ordered inserts?","body":"@AlexandreJacob why would you need to have ordered inserts?"},{"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"score":0,"creation_date":1397645791,"post_id":23104610,"comment_id":35321294,"body_markdown":"Ah good question, I want to fetch X rows that come before row id Y ordered by `id desc`. Now I&#39;m starting to think that I can do otherwise ...","body":"Ah good question, I want to fetch X rows that come before row id Y ordered by <code>id desc</code>. Now I&#39;m starting to think that I can do otherwise ..."}],"answers":[{"tags":[],"owner":{"account_id":1428213,"reputation":729,"user_id":1831702,"display_name":"Pranab Sharma"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1447649669,"creation_date":1447649669,"answer_id":33728751,"question_id":23104610,"body_markdown":"Please see this link \r\nhttps://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/\r\n\r\nHere the author rearranged the UUID to make it sequential, for this he created one MySQL user defined function.","title":"How to maintain insertion order using UUID","body":"<p>Please see this link \n<a href=\"https://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/\" rel=\"nofollow\">https://www.percona.com/blog/2014/12/19/store-uuid-optimized-way/</a></p>\n\n<p>Here the author rearranged the UUID to make it sequential, for this he created one MySQL user defined function.</p>\n"},{"tags":[],"owner":{"account_id":1053260,"reputation":1032,"user_id":1056610,"display_name":"fabiolimace"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1695397031,"creation_date":1594088677,"answer_id":62767227,"question_id":23104610,"body_markdown":"Today there&#39;s a proposal to a new version that keeps the byte order of the timestamp, the version 6.\r\n\r\nIf you want to create a UUIDv6 by yourself, first generate a UUIDv1 and chenge the byte order this way:\r\n\r\n```\r\nFrom: aaaaaaaa-bbbb-1ccc-dddd-eeeeeeeeeeee (time-based, version 1)\r\nTo:   cccbbbba-aaaa-6aaa-dddd-eeeeeeeeeeee (time-ordered, version 6)\r\n```\r\n\r\nIf you want a library that already does it, you may use `uuid-creator`, assuming you are coding in Java. Example:\r\n\r\n```java\r\n// Generate a UUIDv6\r\nUUID uuid = UuidCreator.getTimeOrdered();\r\n```\r\n\r\nProject on github: https://github.com/f4b6a3/uuid-creator\r\n\r\nIf you are coding in PHP, you can use a library from Ben Ramsey. I think it was the first project to implement UUIDv6:\r\n\r\nProject on github: https://github.com/ramsey/uuid\r\n\r\n---\r\n**Disclaimer**: I&#39;m the main contributor of `uuid-creator`.","title":"How to maintain insertion order using UUID","body":"<p>Today there's a proposal to a new version that keeps the byte order of the timestamp, the version 6.</p>\n<p>If you want to create a UUIDv6 by yourself, first generate a UUIDv1 and chenge the byte order this way:</p>\n<pre><code>From: aaaaaaaa-bbbb-1ccc-dddd-eeeeeeeeeeee (time-based, version 1)\nTo:   cccbbbba-aaaa-6aaa-dddd-eeeeeeeeeeee (time-ordered, version 6)\n</code></pre>\n<p>If you want a library that already does it, you may use <code>uuid-creator</code>, assuming you are coding in Java. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Generate a UUIDv6\nUUID uuid = UuidCreator.getTimeOrdered();\n</code></pre>\n<p>Project on github: <a href=\"https://github.com/f4b6a3/uuid-creator\" rel=\"nofollow noreferrer\">https://github.com/f4b6a3/uuid-creator</a></p>\n<p>If you are coding in PHP, you can use a library from Ben Ramsey. I think it was the first project to implement UUIDv6:</p>\n<p>Project on github: <a href=\"https://github.com/ramsey/uuid\" rel=\"nofollow noreferrer\">https://github.com/ramsey/uuid</a></p>\n<hr />\n<p><strong>Disclaimer</strong>: I'm the main contributor of <code>uuid-creator</code>.</p>\n"}],"owner":{"account_id":1573273,"reputation":3033,"user_id":1460467,"accept_rate":88,"display_name":"Alexandre Jacob"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17187,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":2,"score":14,"last_activity_date":1695397031,"creation_date":1397638781,"question_id":23104610,"body_markdown":"On a pet project I started to work with UUIDs.\r\nThe application is fairly simple, it adds data in a MySQL database with `binary(16)` primary keys.\r\n\r\nTo generate PK&#39;s I&#39;m using [JUG][1] this way :\r\n\r\n`UUID uuid = Generators.timeBasedGenerator().generate();`\r\n\r\nThen I convert it to a byte array :\r\n\r\n`byte[] b = UUIDUtil.asByteArray(uuid);`\r\n\r\nThe problem now is that I have no idea on the insertion order of my rows.\r\nIf I sort my rows by the ID some recent rows comes before older rows (according to a `DATETIME` field)\r\n\r\nWhat should I do to be able to keep the insertion order of my rows (for sorting purpose) ?\r\n\r\nIllustration of the problem, UUIDs are sorted ASC, I&#39;m expecting created_at being in the same order.\r\n\r\n`select hex(id), created_at from myTable order by id`\r\n\r\n\t+----------------------------------+---------------------+\r\n\t| hex(id)                          | created_at          |\r\n\t+----------------------------------+---------------------+\r\n\t| 0913FF1FC53911E39D8D6F7C246EE143 | 2014-04-16 09:30:50 |\r\n\t| 09378CB1C53911E39D8DD94CAEA8D23F | 2014-04-16 09:30:50 |\r\n\t| 094A9F83C53911E39D8DDF087D0ED31A | 2014-04-16 09:30:51 |\r\n\t| 0CBE40D5C0B711E38172B9CB0C485EE3 | 2014-04-10 15:50:17 |\r\n\t| 0CBF5247C0B711E3817277CAF5E1D5B5 | 2014-04-10 15:50:17 |\r\n\t| 0CC03CA9C0B711E381721BA12057F9E2 | 2014-04-10 15:50:17 |\r\n\t| 0CC14E1BC0B711E381720505D5FFDCD3 | 2014-04-10 15:50:17 |\r\n\t| 0CC2387DC0B711E38172F9A6B29EB613 | 2014-04-10 15:50:17 |\r\n\t| 0CC349EFC0B711E381723D1DB8515E3F | 2014-04-10 15:50:17 |\r\n\t| 0CC43451C0B711E3817257D8AFFD09B8 | 2014-04-10 15:50:17 |\r\n\t| 0CC545C3C0B711E381729B3CB87CD707 | 2014-04-10 15:50:17 |\r\n\t| 0CC8C835C0B711E38172CDA11992F9BC | 2014-04-10 15:50:17 |\r\n\t| 0E33A6B5C08B11E396829782BD5365D2 | 2014-04-10 10:35:22 |\r\n\t| 0E368CE7C08B11E39682A9F63D5EF0E6 | 2014-04-10 10:35:22 |\r\n\t| 0E383A99C08B11E396825D6048BFC696 | 2014-04-10 10:35:22 |\r\n\t| 128DD6C5C53911E39D8D7577DB523A2C | 2014-04-16 09:31:06 |\r\n\t+----------------------------------+---------------------+\r\n\r\n**EDIT**\r\n\r\nJust to clarify, I of course know and am used to `auto_increment` PK&#39;s, I just wanted to see how it was achievable to work without them. (In case it is !)\r\n\r\n  [1]: http://wiki.fasterxml.com/JugHome","title":"How to maintain insertion order using UUID","body":"<p>On a pet project I started to work with UUIDs.\nThe application is fairly simple, it adds data in a MySQL database with <code>binary(16)</code> primary keys.</p>\n\n<p>To generate PK's I'm using <a href=\"http://wiki.fasterxml.com/JugHome\" rel=\"noreferrer\">JUG</a> this way :</p>\n\n<p><code>UUID uuid = Generators.timeBasedGenerator().generate();</code></p>\n\n<p>Then I convert it to a byte array :</p>\n\n<p><code>byte[] b = UUIDUtil.asByteArray(uuid);</code></p>\n\n<p>The problem now is that I have no idea on the insertion order of my rows.\nIf I sort my rows by the ID some recent rows comes before older rows (according to a <code>DATETIME</code> field)</p>\n\n<p>What should I do to be able to keep the insertion order of my rows (for sorting purpose) ?</p>\n\n<p>Illustration of the problem, UUIDs are sorted ASC, I'm expecting created_at being in the same order.</p>\n\n<p><code>select hex(id), created_at from myTable order by id</code></p>\n\n<pre><code>+----------------------------------+---------------------+\n| hex(id)                          | created_at          |\n+----------------------------------+---------------------+\n| 0913FF1FC53911E39D8D6F7C246EE143 | 2014-04-16 09:30:50 |\n| 09378CB1C53911E39D8DD94CAEA8D23F | 2014-04-16 09:30:50 |\n| 094A9F83C53911E39D8DDF087D0ED31A | 2014-04-16 09:30:51 |\n| 0CBE40D5C0B711E38172B9CB0C485EE3 | 2014-04-10 15:50:17 |\n| 0CBF5247C0B711E3817277CAF5E1D5B5 | 2014-04-10 15:50:17 |\n| 0CC03CA9C0B711E381721BA12057F9E2 | 2014-04-10 15:50:17 |\n| 0CC14E1BC0B711E381720505D5FFDCD3 | 2014-04-10 15:50:17 |\n| 0CC2387DC0B711E38172F9A6B29EB613 | 2014-04-10 15:50:17 |\n| 0CC349EFC0B711E381723D1DB8515E3F | 2014-04-10 15:50:17 |\n| 0CC43451C0B711E3817257D8AFFD09B8 | 2014-04-10 15:50:17 |\n| 0CC545C3C0B711E381729B3CB87CD707 | 2014-04-10 15:50:17 |\n| 0CC8C835C0B711E38172CDA11992F9BC | 2014-04-10 15:50:17 |\n| 0E33A6B5C08B11E396829782BD5365D2 | 2014-04-10 10:35:22 |\n| 0E368CE7C08B11E39682A9F63D5EF0E6 | 2014-04-10 10:35:22 |\n| 0E383A99C08B11E396825D6048BFC696 | 2014-04-10 10:35:22 |\n| 128DD6C5C53911E39D8D7577DB523A2C | 2014-04-16 09:31:06 |\n+----------------------------------+---------------------+\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Just to clarify, I of course know and am used to <code>auto_increment</code> PK's, I just wanted to see how it was achievable to work without them. (In case it is !)</p>\n"},{"tags":["java","postgresql","ssl"],"comments":[{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1464015397,"post_id":37394078,"comment_id":62297350,"body_markdown":"Post your Java code.  Are you setting the connection properties for SSL?   See https://jdbc.postgresql.org/documentation/head/connect.html","body":"Post your Java code.  Are you setting the connection properties for SSL?   See <a href=\"https://jdbc.postgresql.org/documentation/head/connect.html\" rel=\"nofollow noreferrer\">jdbc.postgresql.org/documentation/head/connect.html</a>"},{"owner":{"account_id":248044,"reputation":16466,"user_id":523168,"accept_rate":77,"display_name":"Valter Silva"},"score":0,"creation_date":1464015767,"post_id":37394078,"comment_id":62297559,"body_markdown":"@AndrewHenle yes, I have set the properties for this connection on a file. I have edited my question. I&#39;m calling my database via `maven` to build my application which access my database in order to do some tests.","body":"@AndrewHenle yes, I have set the properties for this connection on a file. I have edited my question. I&#39;m calling my database via <code>maven</code> to build my application which access my database in order to do some tests."},{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":1,"creation_date":1464016991,"post_id":37394078,"comment_id":62298344,"body_markdown":"Assuming your connected works without SSL enabled, can you set `-Djavax.net.debug=all` in MAVEN_OPTS to get Java connection debugging data?  See http://stackoverflow.com/questions/2007192/maven-jetty-plugin-how-to-control-vm-arguments  (I&#39;m no Maven guru...)","body":"Assuming your connected works without SSL enabled, can you set <code>-Djavax.net.debug=all</code> in MAVEN_OPTS to get Java connection debugging data?  See <a href=\"http://stackoverflow.com/questions/2007192/maven-jetty-plugin-how-to-control-vm-arguments\" title=\"maven jetty plugin how to control vm arguments\">stackoverflow.com/questions/2007192/&hellip;</a>  (I&#39;m no Maven guru...)"}],"answers":[{"tags":[],"owner":{"account_id":198788,"reputation":6200,"user_id":443664,"accept_rate":97,"display_name":"Dexter"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1540748117,"creation_date":1493578287,"answer_id":43710113,"question_id":37394078,"body_markdown":"Need a keystore too I believe. Since ssl=true should require a private key for your self-signed cert. I also would add &quot;nonValidating SSLFactory&quot; setting \r\n\r\n    ?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory\r\n\r\nAlso your port setting for `server_name:1234` does not match `5432`. \r\n\r\n`&quot;parseUrl&quot;` is a null error, maybe there&#39;s a variable somewhere in the JDBC url that is incorrectly set.","title":"How to connect with PostgreSQL database over SSL?","body":"<p>Need a keystore too I believe. Since ssl=true should require a private key for your self-signed cert. I also would add \"nonValidating SSLFactory\" setting </p>\n\n<pre><code>?ssl=true&amp;sslfactory=org.postgresql.ssl.NonValidatingFactory\n</code></pre>\n\n<p>Also your port setting for <code>server_name:1234</code> does not match <code>5432</code>. </p>\n\n<p><code>\"parseUrl\"</code> is a null error, maybe there's a variable somewhere in the JDBC url that is incorrectly set.</p>\n"},{"tags":[],"owner":{"account_id":4437257,"reputation":129,"user_id":3612771,"accept_rate":75,"display_name":"D V Santhosh Kiran"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1570143667,"creation_date":1570143667,"answer_id":58227927,"question_id":37394078,"body_markdown":"    url=jdbc:postgresql://&lt;host_url_or_ip&gt;:&lt;port&gt;/&lt;db_name&gt;?currentSchema=&lt;schema_name&gt;&amp;sslmode=verify-ca&amp;sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory\r\n\r\nNote: if `schema_name` is `public`, it is not required. But port even if is default i.e. 5432, you have to provide it.\r\n\r\nFor sslmode values ref: https://jdbc.postgresql.org/documentation/head/ssl-client.html\r\nset `sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory` to enable validation. \r\n\r\nFor non-validating ssl connection,  you can use `sslfactory=org.postgresql.ssl.NonValidatingFactory`\r\n\r\nBut remember, once you enable SSL validation, it may require a root CA certificate. \r\n\r\nYou have various options as follows (may not be exhaustive. but these worked for me.)\r\n \r\n1. You can place it in its default place i.e ~/Postgres/root.crt OR\r\n2. Set `PGSSLROOTCERT` env variable to its path OR\r\n3. import into a truststore and pass it path as:\r\n`-Djavax.net.ssl.trustStore=[trust_store_path] -Djavax.net.ssl.trustStorePassword=[trust_store_password]`. If you are using default truststore i.e. JRE&#39;s `cacerts` these two env variables are not required.\r\n\r\nRef: \r\n\r\nhttps://jdbc.postgresql.org/documentation/head/ssl-client.html\r\n\r\nhttps://www.postgresql.org/docs/9.0/libpq-ssl.html\r\n","title":"How to connect with PostgreSQL database over SSL?","body":"<pre><code>url=jdbc:postgresql://&lt;host_url_or_ip&gt;:&lt;port&gt;/&lt;db_name&gt;?currentSchema=&lt;schema_name&gt;&amp;sslmode=verify-ca&amp;sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory\n</code></pre>\n\n<p>Note: if <code>schema_name</code> is <code>public</code>, it is not required. But port even if is default i.e. 5432, you have to provide it.</p>\n\n<p>For sslmode values ref: <a href=\"https://jdbc.postgresql.org/documentation/head/ssl-client.html\" rel=\"noreferrer\">https://jdbc.postgresql.org/documentation/head/ssl-client.html</a>\nset <code>sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory</code> to enable validation. </p>\n\n<p>For non-validating ssl connection,  you can use <code>sslfactory=org.postgresql.ssl.NonValidatingFactory</code></p>\n\n<p>But remember, once you enable SSL validation, it may require a root CA certificate. </p>\n\n<p>You have various options as follows (may not be exhaustive. but these worked for me.)</p>\n\n<ol>\n<li>You can place it in its default place i.e ~/Postgres/root.crt OR</li>\n<li>Set <code>PGSSLROOTCERT</code> env variable to its path OR</li>\n<li>import into a truststore and pass it path as:\n<code>-Djavax.net.ssl.trustStore=[trust_store_path] -Djavax.net.ssl.trustStorePassword=[trust_store_password]</code>. If you are using default truststore i.e. JRE's <code>cacerts</code> these two env variables are not required.</li>\n</ol>\n\n<p>Ref: </p>\n\n<p><a href=\"https://jdbc.postgresql.org/documentation/head/ssl-client.html\" rel=\"noreferrer\">https://jdbc.postgresql.org/documentation/head/ssl-client.html</a></p>\n\n<p><a href=\"https://www.postgresql.org/docs/9.0/libpq-ssl.html\" rel=\"noreferrer\">https://www.postgresql.org/docs/9.0/libpq-ssl.html</a></p>\n"},{"tags":[],"owner":{"account_id":4480628,"reputation":1792,"user_id":3758005,"display_name":"Oleksandr Shmyrko"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695396764,"creation_date":1586988099,"answer_id":61239382,"question_id":37394078,"body_markdown":"If you don&#39;t need to verify database client, just comment out `ssl_ca_file` in `postgresql.conf`.\r\n\r\n&gt; `ssl_ca_file` - trusted certificate authorities, checks that client certificate is signed by a trusted certificate authority.\r\n\r\nYour database URL should look like this:\r\n```\r\nurl=jdbc:postgresql://host:5432/db_name?ssl=true&amp;sslmode=require\r\n```\r\n\r\nIn case you need to verify the database client, you should add `sslcert=...` and `sslkey=...` parameters to your database URL, e.g.:\r\n\r\n```\r\nurl=jdbc:postgresql://host:5432/db_name?sslmode=verify-full&amp;sslrootcert=CA.crt&amp;sslcert=db-client.crt&amp;sslkey=db-client.pk8\r\n```\r\n\r\nRefer to [PostgreSQL JDBC docs][1] for more details on `sslmode`.\r\n\r\n[1]: https://jdbc.postgresql.org/documentation/head/ssl-client.html","title":"How to connect with PostgreSQL database over SSL?","body":"<p>If you don't need to verify database client, just comment out <code>ssl_ca_file</code> in <code>postgresql.conf</code>.</p>\n<blockquote>\n<p><code>ssl_ca_file</code> - trusted certificate authorities, checks that client certificate is signed by a trusted certificate authority.</p>\n</blockquote>\n<p>Your database URL should look like this:</p>\n<pre><code>url=jdbc:postgresql://host:5432/db_name?ssl=true&amp;sslmode=require\n</code></pre>\n<p>In case you need to verify the database client, you should add <code>sslcert=...</code> and <code>sslkey=...</code> parameters to your database URL, e.g.:</p>\n<pre><code>url=jdbc:postgresql://host:5432/db_name?sslmode=verify-full&amp;sslrootcert=CA.crt&amp;sslcert=db-client.crt&amp;sslkey=db-client.pk8\n</code></pre>\n<p>Refer to <a href=\"https://jdbc.postgresql.org/documentation/head/ssl-client.html\" rel=\"nofollow noreferrer\">PostgreSQL JDBC docs</a> for more details on <code>sslmode</code>.</p>\n"},{"tags":[],"owner":{"account_id":13690978,"reputation":519,"user_id":9878763,"display_name":"Vijay Kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669913614,"creation_date":1622312238,"answer_id":67754532,"question_id":37394078,"body_markdown":"i had issue with jfrog artifactory connection to azure postgres, this below worked for me\r\n\r\n    sudo cat &lt;&lt;EOF &gt;/opt/jfrog/artifactory/var/etc/system.yaml\r\n    configVersion: 1\r\n    shared:\r\n        node:\r\n        database:\r\n            type: postgresql\r\n            driver: org.postgresql.Driver\r\n            url: &quot;jdbc:postgresql://test-psqlserver.postgres.database.azure.com:5432/postgres?ssl=true&amp;sslmode=require&quot;\r\n            username: psqladminun@test-psqlserver\r\n            password: password:-)\r\n    EOF","title":"How to connect with PostgreSQL database over SSL?","body":"<p>i had issue with jfrog artifactory connection to azure postgres, this below worked for me</p>\n<pre><code>sudo cat &lt;&lt;EOF &gt;/opt/jfrog/artifactory/var/etc/system.yaml\nconfigVersion: 1\nshared:\n    node:\n    database:\n        type: postgresql\n        driver: org.postgresql.Driver\n        url: &quot;jdbc:postgresql://test-psqlserver.postgres.database.azure.com:5432/postgres?ssl=true&amp;sslmode=require&quot;\n        username: psqladminun@test-psqlserver\n        password: password:-)\nEOF\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25285861,"reputation":31,"user_id":19112865,"display_name":"Hightower"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662495584,"creation_date":1662495584,"answer_id":73627379,"question_id":37394078,"body_markdown":"https://stackoverflow.com/users/3612771/d-v-santhosh-kiran is on to something here guys.\r\n\r\nSome of their information is not perfectly accurate.\r\nsslfactory=org.postgresql.ssl.DefaultJavaSSLFactory is good - but it relies on  SSLSocketFactory.getDefault() which knows how to read CA trust stores from $JAVA_HOME/lib/security/cacerts, or from javax.net.ssl.* properties as per point number 3 in that answer.  Points 1 and 2 are correct if you are using the default sslfactory, org.postgresql.ssl.LibPQFactory, but are 100% not at all compatible with DefaultJavaSSLFactory.  So be careful.\r\n\r\nAlso, I propose option number 4. Add root CA to JRE cacerts file, and let java do its default thing.\r\nYou&#39;ll have to get out keytool for this one, but it is more flexible than java.net.ssl settings if you have more than one client in your jvm at runtime.\r\n```\r\nkeytool -importcert -keystore $JAVA_HOME/lib/security/cacerts -storepass changeit -noprompt -alias &quot;$ALIAS&quot; -file $YOUR_CERT -trustcacerts\r\n```\r\nSee https://docs.oracle.com/en/java/javase/11/tools/keytool.html and mileage may vary.  What you are trying to do is import (x509/pkix) certificates into the cacerts java keystore\r\n\r\nfwiw org.postgresql.ssl.LibPQFactory is a terrible name that makes people think that the postgres driver will do some JNI and call into C.  That is not what the author intended.  The class could have been SslFactoryThatDoesPathsLikeLibPQBro.  That&#39;s all it does regarding libpq:  looks for certs in paths like LibPQ does.  Apart from that it uses regular old java JSSE to load truststore certs for TLS.\r\nHave a look at the source code: https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/ssl/LibPQFactory.java#L102\r\n```\r\nSSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\r\n... stuff about libpq path locations ...\r\nTrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;PKIX&quot;);\r\n...\r\nks = KeyStore.getInstance(&quot;jks&quot;);\r\n...\r\nCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\r\nObject[] certs = cf.generateCertificates(fis).toArray(new Certificate[]{});\r\nks.load(null, null);\r\nfor (int i = 0; i &lt; certs.length; i++) {\r\n  ks.setCertificateEntry(&quot;cert&quot; + i, (Certificate) certs[i]);\r\n}\r\ntmf.init(ks);\r\ntm = tmf.getTrustManagers();\r\n...\r\n// finally we can initialize the context\r\n...\r\n        KeyManager km = this.km;\r\n        ctx.init(km == null ? null : new KeyManager[]{km}, tm, null);\r\n...\r\n      factory = ctx.getSocketFactory();\r\n```","title":"How to connect with PostgreSQL database over SSL?","body":"<p><a href=\"https://stackoverflow.com/users/3612771/d-v-santhosh-kiran\">https://stackoverflow.com/users/3612771/d-v-santhosh-kiran</a> is on to something here guys.</p>\n<p>Some of their information is not perfectly accurate.\nsslfactory=org.postgresql.ssl.DefaultJavaSSLFactory is good - but it relies on  SSLSocketFactory.getDefault() which knows how to read CA trust stores from $JAVA_HOME/lib/security/cacerts, or from javax.net.ssl.* properties as per point number 3 in that answer.  Points 1 and 2 are correct if you are using the default sslfactory, org.postgresql.ssl.LibPQFactory, but are 100% not at all compatible with DefaultJavaSSLFactory.  So be careful.</p>\n<p>Also, I propose option number 4. Add root CA to JRE cacerts file, and let java do its default thing.\nYou'll have to get out keytool for this one, but it is more flexible than java.net.ssl settings if you have more than one client in your jvm at runtime.</p>\n<pre><code>keytool -importcert -keystore $JAVA_HOME/lib/security/cacerts -storepass changeit -noprompt -alias &quot;$ALIAS&quot; -file $YOUR_CERT -trustcacerts\n</code></pre>\n<p>See <a href=\"https://docs.oracle.com/en/java/javase/11/tools/keytool.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/11/tools/keytool.html</a> and mileage may vary.  What you are trying to do is import (x509/pkix) certificates into the cacerts java keystore</p>\n<p>fwiw org.postgresql.ssl.LibPQFactory is a terrible name that makes people think that the postgres driver will do some JNI and call into C.  That is not what the author intended.  The class could have been SslFactoryThatDoesPathsLikeLibPQBro.  That's all it does regarding libpq:  looks for certs in paths like LibPQ does.  Apart from that it uses regular old java JSSE to load truststore certs for TLS.\nHave a look at the source code: <a href=\"https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/ssl/LibPQFactory.java#L102\" rel=\"nofollow noreferrer\">https://github.com/pgjdbc/pgjdbc/blob/master/pgjdbc/src/main/java/org/postgresql/ssl/LibPQFactory.java#L102</a></p>\n<pre><code>SSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\n... stuff about libpq path locations ...\nTrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;PKIX&quot;);\n...\nks = KeyStore.getInstance(&quot;jks&quot;);\n...\nCertificateFactory cf = CertificateFactory.getInstance(&quot;X.509&quot;);\nObject[] certs = cf.generateCertificates(fis).toArray(new Certificate[]{});\nks.load(null, null);\nfor (int i = 0; i &lt; certs.length; i++) {\n  ks.setCertificateEntry(&quot;cert&quot; + i, (Certificate) certs[i]);\n}\ntmf.init(ks);\ntm = tmf.getTrustManagers();\n...\n// finally we can initialize the context\n...\n        KeyManager km = this.km;\n        ctx.init(km == null ? null : new KeyManager[]{km}, tm, null);\n...\n      factory = ctx.getSocketFactory();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1957539,"reputation":5468,"user_id":1760179,"accept_rate":56,"display_name":"Espresso"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663792008,"creation_date":1663792008,"answer_id":73806574,"question_id":37394078,"body_markdown":"For those that use Springboot &amp; SSL \r\n\r\nConvert the key from pem to pkcs8\r\n```\r\nopenssl pkcs8 -topk8 -inform PEM -outform DER \\\r\n   -in client-key.pem \\\r\n   -out client-key.pkcs8 -nocrypt\r\n```\r\n\r\n\r\nAdd the certs to db url in applications.properties\r\n```\r\nspring.datasource.url=jdbc:postgresql://&lt;DB_IP&gt;/mydbName?ssl=true&amp;sslmode=verify-ca\\\r\n&amp;sslcert=BOOT-INF/classes/db/certs/client-cert.pem\\\r\n&amp;sslkey=BOOT-INF/classes/db/certs/client-key.pkcs8\\\r\n&amp;sslrootcert=BOOT-INF/classes/db/certs/server-ca.pem\r\n```\r\n\r\nHey, if anyone find a way to put this certs/key in env var and use inside jdbc-url, please edit/add that info. That would be better aligned with cloudnative/k8s.\r\n\r\n","title":"How to connect with PostgreSQL database over SSL?","body":"<p>For those that use Springboot &amp; SSL</p>\n<p>Convert the key from pem to pkcs8</p>\n<pre><code>openssl pkcs8 -topk8 -inform PEM -outform DER \\\n   -in client-key.pem \\\n   -out client-key.pkcs8 -nocrypt\n</code></pre>\n<p>Add the certs to db url in applications.properties</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://&lt;DB_IP&gt;/mydbName?ssl=true&amp;sslmode=verify-ca\\\n&amp;sslcert=BOOT-INF/classes/db/certs/client-cert.pem\\\n&amp;sslkey=BOOT-INF/classes/db/certs/client-key.pkcs8\\\n&amp;sslrootcert=BOOT-INF/classes/db/certs/server-ca.pem\n</code></pre>\n<p>Hey, if anyone find a way to put this certs/key in env var and use inside jdbc-url, please edit/add that info. That would be better aligned with cloudnative/k8s.</p>\n"}],"owner":{"account_id":248044,"reputation":16466,"user_id":523168,"accept_rate":77,"display_name":"Valter Silva"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58375,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":6,"score":17,"last_activity_date":1695396764,"creation_date":1464014757,"question_id":37394078,"body_markdown":"I have created my own certificate and configured `postgresql.conf` file:\r\n\r\n    ...\r\n    #authentication_timeout = 1min          # 1s-600s\r\n    ssl = true                              # (change requires restart)\r\n    ssl_ciphers = &#39;HIGH:MEDIUM:+3DES:!aNULL&#39; # allowed SSL ciphers\r\n                                            # (change requires restart)\r\n    #ssl_prefer_server_ciphers = on         # (change requires restart)\r\n    #ssl_ecdh_curve = &#39;prime256v1&#39;          # (change requires restart)\r\n    ssl_cert_file = &#39;/etc/ssl/certs/company/database/certificate&#39;           # (change requires restart)\r\n    ssl_key_file = &#39;/etc/ssl/certs/company/database/key&#39;            # (change requires restart)\r\n    ssl_ca_file = &#39;/usr/share/ca-certificates/company/ca/certificate&#39;                        # (change requires restart)\r\n    #ssl_crl_file = &#39;&#39;                      # (change requires restart)\r\n    #password_encryption = on\r\n    #db_user_namespace = off\r\n    #row_security = on\r\n    ...\r\n\r\nThen, I allow my server to connect with my database, `pg_hba.conf`:\r\n\r\n    ...\r\n    hostssl    postgres             postgres             XXX.XXX.XXX.XXX/0            md5\r\n    ...\r\n\r\nSo, I can connect to it via `psql` command line:\r\n\r\n\r\n    psql (9.5.3)\r\n    SSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)\r\n    Type &quot;help&quot; for help.\r\n    \r\n    postgres=#\r\n\r\nBut, when I try to open a connection with the database via my java application, **even when I provide the truststore with my database certificate included**, I keep getting no connection with it:\r\n\r\n    mvn package -Djavax.net.ssl.trustStore=/opt/app/truststore -Djavax.net.ssl.trustStorePassword=changeit\r\n\r\nException:\r\n\r\n    2016-05-23 16:28:32,900 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicResourcePool@75fa1be3 is interrupting all Threads waiting on a resource to check out. Will try again in response to new client requests.&gt;\r\n    2016-05-23 16:28:32,900 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@2be057bf -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: &gt;\r\n    java.lang.NullPointerException\r\n    \tat org.postgresql.Driver.parseURL(Driver.java:532)\r\n    \tat org.postgresql.Driver.acceptsURL(Driver.java:431)\r\n    \tat java.sql.DriverManager.getDriver(DriverManager.java:299)\r\n    \tat com.mchange.v2.c3p0.DriverManagerDataSource.driver(DriverManagerDataSource.java:285)\r\n    \tat com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:161)\r\n    \tat com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:161)\r\n    \tat com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:147)\r\n    \tat com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:202)\r\n    \tat com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1138)\r\n    \tat com.mchange.v2.resourcepool.BasicResourcePool.doAcquireAndDecrementPendingAcquiresWithinLockOnSuccess(BasicResourcePool.java:1125)\r\n    \tat com.mchange.v2.resourcepool.BasicResourcePool.access$700(BasicResourcePool.java:44)\r\n    \tat com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask.run(BasicResourcePool.java:1870)\r\n    \tat com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:696)\r\n    2016-05-23 16:28:32,901 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicResourcePool@75fa1be3 is interrupting all Threads waiting on a resource to check out. Will try again in response to new client requests.&gt;\r\n\r\nVia `psql` everything seems to be working fine, not with my application.\r\nAny suggestion ?\r\n\r\n**EDIT:**\r\n\r\nMy `props.properties` file:\r\n\r\n    uatDb.user=postgres\r\n    uatDb.password=password\r\n    uatDb.driverClass=org.postgresql.Driver\r\n    uatDb.jdbcUrl=jdbc:postgresql://&lt;server_name&gt;:1234/uat?ssl=true\r\n    uatDb.port=5443\r\n    uatDb.name=uat\r\n    uatDb.host=&lt;server_name&gt;","title":"How to connect with PostgreSQL database over SSL?","body":"<p>I have created my own certificate and configured <code>postgresql.conf</code> file:</p>\n\n<pre><code>...\n#authentication_timeout = 1min          # 1s-600s\nssl = true                              # (change requires restart)\nssl_ciphers = 'HIGH:MEDIUM:+3DES:!aNULL' # allowed SSL ciphers\n                                        # (change requires restart)\n#ssl_prefer_server_ciphers = on         # (change requires restart)\n#ssl_ecdh_curve = 'prime256v1'          # (change requires restart)\nssl_cert_file = '/etc/ssl/certs/company/database/certificate'           # (change requires restart)\nssl_key_file = '/etc/ssl/certs/company/database/key'            # (change requires restart)\nssl_ca_file = '/usr/share/ca-certificates/company/ca/certificate'                        # (change requires restart)\n#ssl_crl_file = ''                      # (change requires restart)\n#password_encryption = on\n#db_user_namespace = off\n#row_security = on\n...\n</code></pre>\n\n<p>Then, I allow my server to connect with my database, <code>pg_hba.conf</code>:</p>\n\n<pre><code>...\nhostssl    postgres             postgres             XXX.XXX.XXX.XXX/0            md5\n...\n</code></pre>\n\n<p>So, I can connect to it via <code>psql</code> command line:</p>\n\n<pre><code>psql (9.5.3)\nSSL connection (protocol: TLSv1.2, cipher: ECDHE-RSA-AES256-GCM-SHA384, bits: 256, compression: off)\nType \"help\" for help.\n\npostgres=#\n</code></pre>\n\n<p>But, when I try to open a connection with the database via my java application, <strong>even when I provide the truststore with my database certificate included</strong>, I keep getting no connection with it:</p>\n\n<pre><code>mvn package -Djavax.net.ssl.trustStore=/opt/app/truststore -Djavax.net.ssl.trustStorePassword=changeit\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>2016-05-23 16:28:32,900 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicResourcePool@75fa1be3 is interrupting all Threads waiting on a resource to check out. Will try again in response to new client requests.&gt;\n2016-05-23 16:28:32,900 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask@2be057bf -- Acquisition Attempt Failed!!! Clearing pending acquires. While trying to acquire a needed new resource, we failed to succeed more than the maximum number of allowed acquisition attempts (30). Last acquisition attempt exception: &gt;\njava.lang.NullPointerException\n    at org.postgresql.Driver.parseURL(Driver.java:532)\n    at org.postgresql.Driver.acceptsURL(Driver.java:431)\n    at java.sql.DriverManager.getDriver(DriverManager.java:299)\n    at com.mchange.v2.c3p0.DriverManagerDataSource.driver(DriverManagerDataSource.java:285)\n    at com.mchange.v2.c3p0.DriverManagerDataSource.getConnection(DriverManagerDataSource.java:161)\n    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:161)\n    at com.mchange.v2.c3p0.WrapperConnectionPoolDataSource.getPooledConnection(WrapperConnectionPoolDataSource.java:147)\n    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.acquireResource(C3P0PooledConnectionPool.java:202)\n    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquire(BasicResourcePool.java:1138)\n    at com.mchange.v2.resourcepool.BasicResourcePool.doAcquireAndDecrementPendingAcquiresWithinLockOnSuccess(BasicResourcePool.java:1125)\n    at com.mchange.v2.resourcepool.BasicResourcePool.access$700(BasicResourcePool.java:44)\n    at com.mchange.v2.resourcepool.BasicResourcePool$ScatteredAcquireTask.run(BasicResourcePool.java:1870)\n    at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:696)\n2016-05-23 16:28:32,901 WARN [com.mchange.v2.resourcepool.BasicResourcePool] - &lt;Having failed to acquire a resource, com.mchange.v2.resourcepool.BasicResourcePool@75fa1be3 is interrupting all Threads waiting on a resource to check out. Will try again in response to new client requests.&gt;\n</code></pre>\n\n<p>Via <code>psql</code> everything seems to be working fine, not with my application.\nAny suggestion ?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>My <code>props.properties</code> file:</p>\n\n<pre><code>uatDb.user=postgres\nuatDb.password=password\nuatDb.driverClass=org.postgresql.Driver\nuatDb.jdbcUrl=jdbc:postgresql://&lt;server_name&gt;:1234/uat?ssl=true\nuatDb.port=5443\nuatDb.name=uat\nuatDb.host=&lt;server_name&gt;\n</code></pre>\n"},{"tags":["java","stripes"],"owner":{"account_id":2602969,"reputation":149,"user_id":2254827,"display_name":"MADARASSOU David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695396208,"creation_date":1695394433,"question_id":77158694,"body_markdown":"With Java, I&#39;m trying to create a customer in Stripe (Version 2022-11-15).\r\nI get this error:\r\n\r\n    com.stripe.exception.InvalidRequestException Invalid Object....\r\n\r\nHow can I solve this problem?\r\n\r\nHere&#39;s the code:\r\n\r\n    String idempotencyKey = UUID.randomUUID().toString();\r\n    RequestOptions requestOptions = RequestOptions.builder().setApiKey(Constantes.STRIPE_KEY_TEST).build();\r\n    // CUSTOMER\r\n    CustomerCreateParams paramsCustomer = CustomerCreateParams.builder()\r\n        .setEmail(&quot;product_name_price_199@nj.tiago&quot;)\r\n        .setName(&quot;John Doe&quot;)\r\n        .putExtraParam(&quot;address&quot;, &quot;123 avenidad da Saudade CopaCabana RJ&quot;)\r\n        .setPaymentMethod(&quot;pm_card_br&quot;)\r\n        .build();\r\n   \r\n    Customer customer = null;\r\n    try {\r\n        customer = Customer.create(paramsCustomer);\r\n        System.out.println(&quot;Customer ID: &quot; + customer.getId());\r\n    } catch (StripeException e) {\r\n        e.printStackTrace();\r\n    }\r\n","title":"Stripe Java : Creating a Customer Programmatically in Stripe Java Failed","body":"<p>With Java, I'm trying to create a customer in Stripe (Version 2022-11-15).\nI get this error:</p>\n<pre><code>com.stripe.exception.InvalidRequestException Invalid Object....\n</code></pre>\n<p>How can I solve this problem?</p>\n<p>Here's the code:</p>\n<pre><code>String idempotencyKey = UUID.randomUUID().toString();\nRequestOptions requestOptions = RequestOptions.builder().setApiKey(Constantes.STRIPE_KEY_TEST).build();\n// CUSTOMER\nCustomerCreateParams paramsCustomer = CustomerCreateParams.builder()\n    .setEmail(&quot;product_name_price_199@nj.tiago&quot;)\n    .setName(&quot;John Doe&quot;)\n    .putExtraParam(&quot;address&quot;, &quot;123 avenidad da Saudade CopaCabana RJ&quot;)\n    .setPaymentMethod(&quot;pm_card_br&quot;)\n    .build();\n\nCustomer customer = null;\ntry {\n    customer = Customer.create(paramsCustomer);\n    System.out.println(&quot;Customer ID: &quot; + customer.getId());\n} catch (StripeException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":["java","spring-boot","authentication","spring-security","jwt"],"comments":[{"owner":{"account_id":28695489,"reputation":611,"user_id":21973805,"display_name":"Ahmed Nabil"},"score":0,"creation_date":1695210244,"post_id":77139317,"comment_id":135993092,"body_markdown":"show screen shots of how exactly you send the request","body":"show screen shots of how exactly you send the request"},{"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"score":0,"creation_date":1695214929,"post_id":77139317,"comment_id":135994222,"body_markdown":"I add the screenshot above","body":"I add the screenshot above"}],"answers":[{"tags":[],"owner":{"account_id":24877126,"reputation":441,"user_id":18750808,"display_name":"Sve Kamenska"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695239337,"creation_date":1695238479,"answer_id":77145467,"question_id":77139317,"body_markdown":"There might be issue with the role naming.\r\n1. Which role does your user have? &quot;CUSTOMER&quot; or &quot;ROLE_CUSTOMER&quot;? It should be &quot;ROLE_CUSTOMER&quot; in the database.\r\n2. Note that you double check user&#39;s role and use different wording with and without &quot;ROLE_&quot; prefix\r\n- in the security config: \r\n\r\n    `.requestMatchers(&quot;/api/test/customer&quot;).hasRole(&quot;ROLE_CUSTOMER&quot;)`\r\n- in the method annotation \r\n\r\n    `@PreAuthorize(&quot;hasRole(&#39;CUSTOMER&#39;)&quot;)`\r\n\r\nSpring after version 4, I guess, adds &quot;ROLE_&quot; frefix on its own, so you can check `hasRole(&quot;CUSTOMER&quot;)`, but the role in the database should be with prefix, i.e. &quot;ROLE_CUSTOMER&quot;. Some spring versions don&#39;t add prefix, so you have to check `hasRole(&quot;ROLE_CUSTOMER&quot;)`.\r\n\r\nPlease, check this answer here as well, it might help\r\n[StackOverflow: getting-401-unauthorized-even-when-the-user-is-authenticated-spring-security][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/71810226/getting-401-unauthorized-even-when-the-user-is-authenticated-spring-security/71819541#71819541","title":"Problem with Authentication (SPRING SECURITY)","body":"<p>There might be issue with the role naming.</p>\n<ol>\n<li>Which role does your user have? &quot;CUSTOMER&quot; or &quot;ROLE_CUSTOMER&quot;? It should be &quot;ROLE_CUSTOMER&quot; in the database.</li>\n<li>Note that you double check user's role and use different wording with and without &quot;ROLE_&quot; prefix</li>\n</ol>\n<ul>\n<li><p>in the security config:</p>\n<p><code>.requestMatchers(&quot;/api/test/customer&quot;).hasRole(&quot;ROLE_CUSTOMER&quot;)</code></p>\n</li>\n<li><p>in the method annotation</p>\n<p><code>@PreAuthorize(&quot;hasRole('CUSTOMER')&quot;)</code></p>\n</li>\n</ul>\n<p>Spring after version 4, I guess, adds &quot;ROLE_&quot; frefix on its own, so you can check <code>hasRole(&quot;CUSTOMER&quot;)</code>, but the role in the database should be with prefix, i.e. &quot;ROLE_CUSTOMER&quot;. Some spring versions don't add prefix, so you have to check <code>hasRole(&quot;ROLE_CUSTOMER&quot;)</code>.</p>\n<p>Please, check this answer here as well, it might help\n<a href=\"https://stackoverflow.com/questions/71810226/getting-401-unauthorized-even-when-the-user-is-authenticated-spring-security/71819541#71819541\">StackOverflow: getting-401-unauthorized-even-when-the-user-is-authenticated-spring-security</a></p>\n"},{"tags":[],"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695396177,"creation_date":1695396177,"answer_id":77158920,"question_id":77139317,"body_markdown":"I miss validate token, so the token send to the server always be 401","title":"Problem with Authentication (SPRING SECURITY)","body":"<p>I miss validate token, so the token send to the server always be 401</p>\n"}],"owner":{"account_id":23511795,"reputation":9,"user_id":17560284,"display_name":"Quan Pham"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1695396177,"creation_date":1695184555,"question_id":77139317,"body_markdown":"I have a problem, I&#39;m using spring security to create endpoint login. After login success the response with token will be created. But when I using postman to send request(I&#39;m using correct method, the header contain Bearer token, token still alive I also can decode token) but I always be 401 error\r\nhere is my config\r\n\r\n```\r\n@Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        return http\r\n                .cors()\r\n                .and().csrf().disable() \r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/register/&quot;, &quot;/api/test/all&quot;, &quot;/api/test/login&quot;)\r\n                .permitAll() \r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/users/&quot;)\r\n                .hasAnyAuthority(&quot;CUSTOMER&quot;, &quot;ADMIN&quot;, &quot;EXPERT&quot;) \r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/api/test/customer&quot;)\r\n                .hasRole(&quot;ROLE_CUSTOMER&quot;)\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(&quot;/api/test/customer&quot;)\r\n                .authenticated()\r\n                .and()\r\n                .formLogin() \r\n                .defaultSuccessUrl(&quot;/api/test/customer&quot;)\r\n                .and()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(new AuthenticationEntryPoint() {\r\n                    @Override\r\n                    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\r\n                        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, authException.getMessage());\r\n                    }\r\n                })\r\n                .and()\r\n                .build();\r\n    }\r\n//and the endpoint I want to access after login success(the full is /api/test/customer)\r\n@PreAuthorize(&quot;hasRole(&#39;CUSTOMER&#39;)&quot;)\r\n    @GetMapping(&quot;/customer&quot;)\r\n    public String home() {\r\n        return &quot;Home after login for customer&quot;;\r\n    }\r\n```\r\n\r\n\r\nI want to fix that as soon as possible\r\n[I&#39;m using postman to send request][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QvxZe.png","title":"Problem with Authentication (SPRING SECURITY)","body":"<p>I have a problem, I'm using spring security to create endpoint login. After login success the response with token will be created. But when I using postman to send request(I'm using correct method, the header contain Bearer token, token still alive I also can decode token) but I always be 401 error\nhere is my config</p>\n<pre><code>@Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        return http\n                .cors()\n                .and().csrf().disable() \n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/register/&quot;, &quot;/api/test/all&quot;, &quot;/api/test/login&quot;)\n                .permitAll() \n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/users/&quot;)\n                .hasAnyAuthority(&quot;CUSTOMER&quot;, &quot;ADMIN&quot;, &quot;EXPERT&quot;) \n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/api/test/customer&quot;)\n                .hasRole(&quot;ROLE_CUSTOMER&quot;)\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/api/test/customer&quot;)\n                .authenticated()\n                .and()\n                .formLogin() \n                .defaultSuccessUrl(&quot;/api/test/customer&quot;)\n                .and()\n                .exceptionHandling()\n                .authenticationEntryPoint(new AuthenticationEntryPoint() {\n                    @Override\n                    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\n                        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, authException.getMessage());\n                    }\n                })\n                .and()\n                .build();\n    }\n//and the endpoint I want to access after login success(the full is /api/test/customer)\n@PreAuthorize(&quot;hasRole('CUSTOMER')&quot;)\n    @GetMapping(&quot;/customer&quot;)\n    public String home() {\n        return &quot;Home after login for customer&quot;;\n    }\n</code></pre>\n<p>I want to fix that as soon as possible\n<a href=\"https://i.stack.imgur.com/QvxZe.png\" rel=\"nofollow noreferrer\">I'm using postman to send request</a></p>\n"},{"tags":["java","postgresql","docker","dockerfile","opensuse"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695420655,"post_id":77157940,"comment_id":136027161,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":25574487,"reputation":11,"user_id":19354238,"display_name":"Behdin Talebi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695396079,"creation_date":1695396079,"answer_id":77158910,"question_id":77157940,"body_markdown":"try using this command on your docker file \r\nRUN echo &quot;deb http://apt.postgresql.org/pub/repos/apt/ precise-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list\r\nand using your custom version from this link:\r\nhttp://apt.postgresql.org/pub/repos/apt/pool/15/p/postgresql-15/\r\nhope its help ","title":"Not able to install 15.5 in opensuse using DockerFile","body":"<p>try using this command on your docker file\nRUN echo &quot;deb <a href=\"http://apt.postgresql.org/pub/repos/apt/\" rel=\"nofollow noreferrer\">http://apt.postgresql.org/pub/repos/apt/</a> precise-pgdg main&quot; &gt; /etc/apt/sources.list.d/pgdg.list\nand using your custom version from this link:\n<a href=\"http://apt.postgresql.org/pub/repos/apt/pool/15/p/postgresql-15/\" rel=\"nofollow noreferrer\">http://apt.postgresql.org/pub/repos/apt/pool/15/p/postgresql-15/</a>\nhope its help</p>\n"}],"owner":{"account_id":25888435,"reputation":1,"user_id":19616186,"display_name":"Rashmi Patil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695396079,"creation_date":1695388445,"question_id":77157940,"body_markdown":"I used DockerFile to build image where i want to install postgre 15.5. I have used below line in my code. But seems when i go into the container using docker exec and then check for postgre version installed it says it is 15.3 version\r\n\r\n\r\n```\r\n# install postgres\r\nRUN zypper --non-interactive --quiet addrepo --refresh -p 90  http://download.opensuse.org/repositories/server:database:postgresql/15.5/ PostgreSQL\r\nRUN zypper --gpg-auto-import-keys ref\r\nRUN zypper --non-interactive in postgresql postgresql-server postgresql-contrib\r\n```\r\n\r\n\r\nI need 15.5 to be installed. Can anyone help?\r\n\r\n\r\nTried different option but did not work","title":"Not able to install 15.5 in opensuse using DockerFile","body":"<p>I used DockerFile to build image where i want to install postgre 15.5. I have used below line in my code. But seems when i go into the container using docker exec and then check for postgre version installed it says it is 15.3 version</p>\n<pre><code># install postgres\nRUN zypper --non-interactive --quiet addrepo --refresh -p 90  http://download.opensuse.org/repositories/server:database:postgresql/15.5/ PostgreSQL\nRUN zypper --gpg-auto-import-keys ref\nRUN zypper --non-interactive in postgresql postgresql-server postgresql-contrib\n</code></pre>\n<p>I need 15.5 to be installed. Can anyone help?</p>\n<p>Tried different option but did not work</p>\n"},{"tags":["java","maven","pom.xml"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1695393969,"post_id":77158443,"comment_id":136022845,"body_markdown":"You should always define the versions (release versions!) of your dependencies and also of your plugins.. (pluginManagement) etc.","body":"You should always define the versions (release versions!) of your dependencies and also of your plugins.. (pluginManagement) etc."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1695404542,"post_id":77158443,"comment_id":136024872,"body_markdown":"Is this by chance a Spring Boot project? Because the SB starter parent includes another parent that defines many, many version numbers. Other parent poms may do the same thing, specifying dependency management details for dependencies. See [this answer](https://stackoverflow.com/a/12316462/636009) and try `mvn help:effective-pom` to see the versions maven is finding for your pom.","body":"Is this by chance a Spring Boot project? Because the SB starter parent includes another parent that defines many, many version numbers. Other parent poms may do the same thing, specifying dependency management details for dependencies. See <a href=\"https://stackoverflow.com/a/12316462/636009\">this answer</a> and try <code>mvn help:effective-pom</code> to see the versions maven is finding for your pom."}],"answers":[{"tags":[],"owner":{"account_id":20432834,"reputation":7,"user_id":14991409,"display_name":"OMGer"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695394533,"creation_date":1695393938,"answer_id":77158634,"question_id":77158443,"body_markdown":"indicate a version -&gt; use a spesific version.\r\n...\r\ndoesn&#39;t indicate a version -&gt; will try to fetch latest available version.\r\n\r\nThis might be tempting to think (wouldn&#39;t it be best to always take latest?)\r\nbut it might occur weird bugs over the time.\r\nImagine not entering to a project for two years and now anything is a mess and you don&#39;t know which part makes the mess.","title":"Should I indicate dependency versions in pom.xml?","body":"<p>indicate a version -&gt; use a spesific version.\n...\ndoesn't indicate a version -&gt; will try to fetch latest available version.</p>\n<p>This might be tempting to think (wouldn't it be best to always take latest?)\nbut it might occur weird bugs over the time.\nImagine not entering to a project for two years and now anything is a mess and you don't know which part makes the mess.</p>\n"},{"tags":[],"owner":{"account_id":957259,"reputation":29625,"user_id":982341,"display_name":"GreyBeardedGeek"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695394020,"creation_date":1695394020,"answer_id":77158647,"question_id":77158443,"body_markdown":"This is somewhat of an opinion-based question, but here&#39;s opinion:\r\n\r\nIf you don&#39;t specify a version, then there is no actual record in your version control repo of what version you get. I believe that you would get the latest version each time it is resolved. For production apps, this would, IMHO, not be acceptable at all.\r\n\r\nYou can specify just a major version, or major/minor or major/minor/patch.\r\n\r\nTheoretically, it _should_ be safe to specify major and minor versions to make sure that the version that you get it compatible with your code.\r\n\r\nBut, if you want to be really sure that your code and the library are entirely compatible, then you would specify the patch version as well.\r\n\r\nI tend to use just the major version number during initial development, and then lock down to the patch version for initial production deployment after verifying that all tests still pass.\r\n\r\nYou can then upgrade individual library versions later, if you become aware of security updates or new features that you want to use, again, after fully testing them.","title":"Should I indicate dependency versions in pom.xml?","body":"<p>This is somewhat of an opinion-based question, but here's opinion:</p>\n<p>If you don't specify a version, then there is no actual record in your version control repo of what version you get. I believe that you would get the latest version each time it is resolved. For production apps, this would, IMHO, not be acceptable at all.</p>\n<p>You can specify just a major version, or major/minor or major/minor/patch.</p>\n<p>Theoretically, it <em>should</em> be safe to specify major and minor versions to make sure that the version that you get it compatible with your code.</p>\n<p>But, if you want to be really sure that your code and the library are entirely compatible, then you would specify the patch version as well.</p>\n<p>I tend to use just the major version number during initial development, and then lock down to the patch version for initial production deployment after verifying that all tests still pass.</p>\n<p>You can then upgrade individual library versions later, if you become aware of security updates or new features that you want to use, again, after fully testing them.</p>\n"},{"tags":[],"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1695396070,"creation_date":1695396070,"answer_id":77158909,"question_id":77158443,"body_markdown":"I add a third answer because I think the other two missed the true meaning of your question.  Let us know what&#39;s the right one for your needs.\r\n\r\nIn Maven it is **mandatory** to specify the version number of each dependency.  If you see a block like this one:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\nwithout an explicit `&lt;version&gt;` tag, it means that the version is specified *elsewhere*, in a `&lt;dependencyManagement&gt;` block.  Tipically this block is in the root pom of the Maven project or in an external parent of the root pom. \r\n `spring-boot-starter-parent` is a well-known example of external parent that provides a `&lt;dependencyManagement&gt;` block.\r\n\r\nSee also the Maven documentation about [dependencyManagement][1].\r\n\r\n\r\n  [1]: https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-management","title":"Should I indicate dependency versions in pom.xml?","body":"<p>I add a third answer because I think the other two missed the true meaning of your question.  Let us know what's the right one for your needs.</p>\n<p>In Maven it is <strong>mandatory</strong> to specify the version number of each dependency.  If you see a block like this one:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>without an explicit <code>&lt;version&gt;</code> tag, it means that the version is specified <em>elsewhere</em>, in a <code>&lt;dependencyManagement&gt;</code> block.  Tipically this block is in the root pom of the Maven project or in an external parent of the root pom.\n<code>spring-boot-starter-parent</code> is a well-known example of external parent that provides a <code>&lt;dependencyManagement&gt;</code> block.</p>\n<p>See also the Maven documentation about <a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-management\" rel=\"nofollow noreferrer\">dependencyManagement</a>.</p>\n"}],"owner":{"account_id":10350169,"reputation":1,"user_id":8999457,"display_name":"Yin and yang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1695404589,"answer_count":3,"score":-1,"last_activity_date":1695396070,"creation_date":1695392435,"question_id":77158443,"body_markdown":"Most examples from the Internet on Java do not indicate the version of the dependencies in &lt;version&gt;&lt;/version&gt; tags. Should I indicate dependency versions in production pom.xml file?\r\n\r\nIf I do not indicate the version, where then is the number of the dependency version is stored of my project in GIT repo?","title":"Should I indicate dependency versions in pom.xml?","body":"<p>Most examples from the Internet on Java do not indicate the version of the dependencies in  tags. Should I indicate dependency versions in production pom.xml file?</p>\n<p>If I do not indicate the version, where then is the number of the dependency version is stored of my project in GIT repo?</p>\n"},{"tags":["java","maven","intellij-idea","junit","mockito"],"comments":[{"owner":{"account_id":9195431,"reputation":529,"user_id":6834313,"accept_rate":97,"display_name":"Bob"},"score":1,"creation_date":1511433729,"post_id":47453386,"comment_id":81861601,"body_markdown":"Try to right click on you project, then in the menu -&gt; maven -&gt; Download Sources (or Reimport)","body":"Try to right click on you project, then in the menu -&gt; maven -&gt; Download Sources (or Reimport)"}],"answers":[{"tags":[],"owner":{"account_id":1049814,"reputation":11925,"user_id":1054021,"accept_rate":81,"display_name":"Tobb"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1511433549,"creation_date":1511433549,"answer_id":47453468,"question_id":47453386,"body_markdown":"Try `View` -&gt; `Tool Windows` -&gt; `Maven projects`, then click the blue icon in the top left of the tool window (`Reimport all Maven projects`). You should be able to find the dependencies in the project view, under external libraries.\r\n\r\nIf this does not work, there is probably something wrong with your maven config (pom.xml). Try `mvn clean install` from the command line see if it gives any errors.","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>Try <code>View</code> -> <code>Tool Windows</code> -> <code>Maven projects</code>, then click the blue icon in the top left of the tool window (<code>Reimport all Maven projects</code>). You should be able to find the dependencies in the project view, under external libraries.</p>\n\n<p>If this does not work, there is probably something wrong with your maven config (pom.xml). Try <code>mvn clean install</code> from the command line see if it gives any errors.</p>\n"},{"tags":[],"owner":{"account_id":10441450,"reputation":194,"user_id":7697959,"display_name":"Shivangi Gupta"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1548053528,"creation_date":1548053528,"answer_id":54284765,"question_id":47453386,"body_markdown":"You can also use command \r\n\r\n&gt; mvn -U idea:idea\r\n\r\nThis command forces a check for missing dependencies and helps in resolving them.","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>You can also use command </p>\n\n<blockquote>\n  <p>mvn -U idea:idea</p>\n</blockquote>\n\n<p>This command forces a check for missing dependencies and helps in resolving them.</p>\n"},{"tags":[],"owner":{"account_id":2779211,"reputation":4624,"user_id":2392093,"accept_rate":71,"display_name":"kvm006"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1590741672,"creation_date":1570747983,"answer_id":58332104,"question_id":47453386,"body_markdown":"My IDE was not resolving JUnit &amp; Mockito dependencies. Tried reimport in IntelliJ and mvn clean install multiple times which didn&#39;t help. Reimport worked for me, but with the following steps. \r\n\r\n**Please be aware that you will lose any run configurations that you have created.**\r\n\r\n 1. Close IntelliJ\r\n 2. Go to Project Folder and remove .idea folder (rm -rf ./idea)\r\n 3. Import Maven project again (You will need to add back any run configurations that were deleted)","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>My IDE was not resolving JUnit &amp; Mockito dependencies. Tried reimport in IntelliJ and mvn clean install multiple times which didn't help. Reimport worked for me, but with the following steps. </p>\n\n<p><strong>Please be aware that you will lose any run configurations that you have created.</strong></p>\n\n<ol>\n<li>Close IntelliJ</li>\n<li>Go to Project Folder and remove .idea folder (rm -rf ./idea)</li>\n<li>Import Maven project again (You will need to add back any run configurations that were deleted)</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2470791,"reputation":1819,"user_id":2152704,"display_name":"Mohammed Elrashidy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1591540673,"creation_date":1591540673,"answer_id":62246935,"question_id":47453386,"body_markdown":"Restartig intellIJ fixed that for me","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>Restartig intellIJ fixed that for me</p>\n"},{"tags":[],"owner":{"account_id":9336815,"reputation":1022,"user_id":6930761,"accept_rate":67,"display_name":"Max.Futerman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591704203,"creation_date":1591704203,"answer_id":62282177,"question_id":47453386,"body_markdown":"For me, I deleted org.mockito package from m2 repository and then did mvn clean install.\r\nthis reimport the package. ","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>For me, I deleted org.mockito package from m2 repository and then did mvn clean install.\nthis reimport the package. </p>\n"},{"tags":[],"owner":{"account_id":17540978,"reputation":11,"user_id":12723151,"display_name":"pali7"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638804612,"creation_date":1638804612,"answer_id":70247907,"question_id":47453386,"body_markdown":"I solved this problem by adding mockito to module I used. Just go to `File` -&gt; `Project structure` and in `Modules` add mockito to your selected module - the one in which you use mockito (usually `Test`).","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>I solved this problem by adding mockito to module I used. Just go to <code>File</code> -&gt; <code>Project structure</code> and in <code>Modules</code> add mockito to your selected module - the one in which you use mockito (usually <code>Test</code>).</p>\n"},{"tags":[],"owner":{"account_id":20664326,"reputation":59,"user_id":15171549,"display_name":"sruju333"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673929918,"creation_date":1673929918,"answer_id":75142009,"question_id":47453386,"body_markdown":"Try using lower versions of junit and mockito. \r\n\r\nThe latest versions weren&#39;t working in my project but it worked once I used lower versions.\r\n\r\n\r\nFew other things you can do: \r\n\r\n - After adding the dependency just make sure to update the maven\r\n   project. (right-click on project folder -&gt; Maven -&gt; Reload project)\r\n \r\n - You can also try clicking on the tiny m symbol on the top right to   \r\n   load maven changes or select maven button to get clean+install   \r\n   options and click play button.\r\n\r\n[![Maven Reload project][1]][1]\r\n\r\n[![Maven Load and Clean Install options][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WVWf8.png\r\n  [2]: https://i.stack.imgur.com/maRH5.png","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>Try using lower versions of junit and mockito.</p>\n<p>The latest versions weren't working in my project but it worked once I used lower versions.</p>\n<p>Few other things you can do:</p>\n<ul>\n<li><p>After adding the dependency just make sure to update the maven\nproject. (right-click on project folder -&gt; Maven -&gt; Reload project)</p>\n</li>\n<li><p>You can also try clicking on the tiny m symbol on the top right to<br />\nload maven changes or select maven button to get clean+install<br />\noptions and click play button.</p>\n</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/WVWf8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WVWf8.png\" alt=\"Maven Reload project\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/maRH5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/maRH5.png\" alt=\"Maven Load and Clean Install options\" /></a></p>\n"},{"tags":[],"owner":{"account_id":124590,"reputation":8425,"user_id":319773,"accept_rate":89,"display_name":"Bevor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695395111,"creation_date":1695395111,"answer_id":77158793,"question_id":47453386,"body_markdown":"File -&gt; Invalid Caches does the trick for me.","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>File -&gt; Invalid Caches does the trick for me.</p>\n"}],"owner":{"account_id":8881930,"reputation":11986,"user_id":6644368,"accept_rate":100,"display_name":"Yash"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30360,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":47453468,"answer_count":8,"score":12,"last_activity_date":1695395111,"creation_date":1511433323,"question_id":47453386,"body_markdown":"I am using `IntelliJ idea` for writing simple unit test cases using `JUnit` and `Mockito`. I am using Maven for dependency management.\r\n\r\n`IntelliJ idea` keeps complaining that following imports cannot be resolved:\r\n\r\n    import org.junit.Test; //Cannot resolve symbol &#39;Test&#39;\r\n\r\n    import static org.mockito.Mockito.*; //Cannot resolve symbol &#39;mockito&#39;\r\n\r\nFollowing is the `dependencies` section of my project:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- Dependency for JUnit --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.12&lt;/version&gt;\r\n            &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Dependency for Mockito --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\r\n            &lt;version&gt;1.10.19&lt;/version&gt;\r\n            &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nFollowing is my project structure:\r\n\r\n[![Project Structure][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iAWsf.png","title":"IntelliJ Idea not resolving Mockito and JUnit dependencies with Maven","body":"<p>I am using <code>IntelliJ idea</code> for writing simple unit test cases using <code>JUnit</code> and <code>Mockito</code>. I am using Maven for dependency management.</p>\n\n<p><code>IntelliJ idea</code> keeps complaining that following imports cannot be resolved:</p>\n\n<pre><code>import org.junit.Test; //Cannot resolve symbol 'Test'\n\nimport static org.mockito.Mockito.*; //Cannot resolve symbol 'mockito'\n</code></pre>\n\n<p>Following is the <code>dependencies</code> section of my project:</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;!-- Dependency for JUnit --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n        &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;\n    &lt;/dependency&gt;\n    &lt;!-- Dependency for Mockito --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n        &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;\n        &lt;version&gt;1.10.19&lt;/version&gt;\n        &lt;!--&lt;scope&gt;test&lt;/scope&gt;--&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>Following is my project structure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/iAWsf.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/iAWsf.png\" alt=\"Project Structure\"></a></p>\n"},{"tags":["java","interface","implementation"],"comments":[{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":0,"creation_date":1454967136,"post_id":35277358,"comment_id":58271101,"body_markdown":"Reopened because this question is significantly more specific than the alleged duplicate.","body":"Reopened because this question is significantly more specific than the alleged duplicate."},{"owner":{"account_id":1671542,"reputation":11460,"user_id":1537925,"accept_rate":100,"display_name":"The Vee"},"score":1,"creation_date":1480074775,"post_id":35277358,"comment_id":68829581,"body_markdown":"For the record, if anyone is interested in what the &quot;alleged duplicate&quot; was, like myself: http://stackoverflow.com/questions/1321122/what-is-an-interface-in-java","body":"For the record, if anyone is interested in what the &quot;alleged duplicate&quot; was, like myself: <a href=\"http://stackoverflow.com/questions/1321122/what-is-an-interface-in-java\" title=\"what is an interface in java\">stackoverflow.com/questions/1321122/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3990326,"reputation":726,"user_id":5728209,"display_name":"Damanpreet Singh"},"down_vote_count":6,"up_vote_count":1,"is_accepted":false,"score":-5,"last_activity_date":1454958659,"creation_date":1454958659,"answer_id":35277404,"question_id":35277358,"body_markdown":"Interfaces can be implemented by multiple classes. There is no rule that only one class can implement these. Interfaces provide abstraction to the java. \r\n\r\nhttp://www.tutorialspoint.com/java/java_interfaces.htm\r\nYou can get more information about interfaces from this link","title":"Why should I use an interface when there is only one implementation class?","body":"<p>Interfaces can be implemented by multiple classes. There is no rule that only one class can implement these. Interfaces provide abstraction to the java. </p>\n\n<p><a href=\"http://www.tutorialspoint.com/java/java_interfaces.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/java/java_interfaces.htm</a>\nYou can get more information about interfaces from this link</p>\n"},{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":2,"up_vote_count":18,"is_accepted":true,"score":16,"last_activity_date":1454959129,"creation_date":1454958860,"answer_id":35277463,"question_id":35277358,"body_markdown":"You do this to prevent others from accessing your implementing type. For example, you could hide your implementing type inside a library, give the type package access, and return an instance of your interface to the users of your library:\r\n\r\n    // This is what the users of your library know about the class\r\n    // that does the work:\r\n    public interface SomeInterface {\r\n        void doSomethingUseful();\r\n        void doSomethingElse();\r\n    }\r\n\r\n    // This is the class itself, which is hidden from your clients\r\n    class MyImplementation implements SomeInterface {\r\n        private SomeDependency dependency = new SomeDependency();\r\n        public void doSomethingUseful() {\r\n            ...\r\n        }\r\n        public void doSomethingElse() {\r\n            ...\r\n        }\r\n    }\r\n\r\nYour clients obtain objects like this:\r\n\r\n    public class MyFactory {\r\n        static SomeInterface make() {\r\n            // MyFactory can see MyImplementation\r\n            return new MyImplementation();\r\n        }\r\n    }\r\n\r\nThis trick becomes useful when the implementation uses lots of libraries. You efficiently decouple the interface of your library from its implementation, so that the user wouldn&#39;t have to know about the dependencies internal to your library.","title":"Why should I use an interface when there is only one implementation class?","body":"<p>You do this to prevent others from accessing your implementing type. For example, you could hide your implementing type inside a library, give the type package access, and return an instance of your interface to the users of your library:</p>\n\n<pre><code>// This is what the users of your library know about the class\n// that does the work:\npublic interface SomeInterface {\n    void doSomethingUseful();\n    void doSomethingElse();\n}\n\n// This is the class itself, which is hidden from your clients\nclass MyImplementation implements SomeInterface {\n    private SomeDependency dependency = new SomeDependency();\n    public void doSomethingUseful() {\n        ...\n    }\n    public void doSomethingElse() {\n        ...\n    }\n}\n</code></pre>\n\n<p>Your clients obtain objects like this:</p>\n\n<pre><code>public class MyFactory {\n    static SomeInterface make() {\n        // MyFactory can see MyImplementation\n        return new MyImplementation();\n    }\n}\n</code></pre>\n\n<p>This trick becomes useful when the implementation uses lots of libraries. You efficiently decouple the interface of your library from its implementation, so that the user wouldn't have to know about the dependencies internal to your library.</p>\n"},{"tags":[],"owner":{"account_id":4083543,"reputation":41,"user_id":3353494,"display_name":"Gerald V."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1454960368,"creation_date":1454960368,"answer_id":35277883,"question_id":35277358,"body_markdown":"One reason is to maintain the open/closed principle, which states that your code should be open for extension, but closed for modification. Although you only have one implementing class now, chance is that you will need another differing implementation class with the passing of time. If you extract the implementation into an interface beforehand, you just have to write another implementing class ie. You don&#39;t have to modify a perfectly working piece of code, eliminating the risks of introducing bugs.","title":"Why should I use an interface when there is only one implementation class?","body":"<p>One reason is to maintain the open/closed principle, which states that your code should be open for extension, but closed for modification. Although you only have one implementing class now, chance is that you will need another differing implementation class with the passing of time. If you extract the implementation into an interface beforehand, you just have to write another implementing class ie. You don't have to modify a perfectly working piece of code, eliminating the risks of introducing bugs.</p>\n"},{"tags":[],"owner":{"account_id":6093107,"reputation":23142,"user_id":4754790,"accept_rate":94,"display_name":"Dragan Bozanovic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1454960489,"creation_date":1454960489,"answer_id":35277920,"question_id":35277358,"body_markdown":"It can give you the flexibility to add more implementations in the future without changing the client code which references the interface.\r\n\r\nAnother example of when it can be useful is to simulate multiple inheritance in Java when it is needed. For example, suppose you have an interface `MyInterface` and an implementation:\r\n\r\n    public interface MyInterface {\r\n      void aMethod1();\r\n      void aMethod2();\r\n    }\r\n    \r\n    class MyInterfaceImpl implements MyInterface {\r\n      public void aMethod1() {...}\r\n      public void aMethod2() {...}\r\n    }\r\n\r\nYou also have an unrelated class with its own hierarchy:\r\n\r\n    public class SomeClass extends SomeOtherClass {\r\n     ...\r\n    }\r\n\r\nNow you want to make `SomeClass` be of type `MyInterface` but you also want to inherit all the code that is already existing in `MyInterfaceImpl`. Since you cannot extend both `SomeOtherClass` and `MyInterfaceImpl`, you can implement the interface and use delegation:\r\n\r\n    public class SomeClass extends SomeOtherClass implements MyInterface {\r\n      private MyInterface myInterface = new MyInterfaceImpl();\r\n\r\n      public void aMethod1() {\r\n        myInterface.aMethod1();\r\n      }\r\n\r\n      public void aMethod2() {\r\n        myInterface.aMethod2();\r\n      }\r\n      ...\r\n    }","title":"Why should I use an interface when there is only one implementation class?","body":"<p>It can give you the flexibility to add more implementations in the future without changing the client code which references the interface.</p>\n\n<p>Another example of when it can be useful is to simulate multiple inheritance in Java when it is needed. For example, suppose you have an interface <code>MyInterface</code> and an implementation:</p>\n\n<pre><code>public interface MyInterface {\n  void aMethod1();\n  void aMethod2();\n}\n\nclass MyInterfaceImpl implements MyInterface {\n  public void aMethod1() {...}\n  public void aMethod2() {...}\n}\n</code></pre>\n\n<p>You also have an unrelated class with its own hierarchy:</p>\n\n<pre><code>public class SomeClass extends SomeOtherClass {\n ...\n}\n</code></pre>\n\n<p>Now you want to make <code>SomeClass</code> be of type <code>MyInterface</code> but you also want to inherit all the code that is already existing in <code>MyInterfaceImpl</code>. Since you cannot extend both <code>SomeOtherClass</code> and <code>MyInterfaceImpl</code>, you can implement the interface and use delegation:</p>\n\n<pre><code>public class SomeClass extends SomeOtherClass implements MyInterface {\n  private MyInterface myInterface = new MyInterfaceImpl();\n\n  public void aMethod1() {\n    myInterface.aMethod1();\n  }\n\n  public void aMethod2() {\n    myInterface.aMethod2();\n  }\n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7208586,"reputation":29,"user_id":5503454,"display_name":"Alain Bienvenue"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1455129727,"creation_date":1455129727,"answer_id":35323360,"question_id":35277358,"body_markdown":"To respect the Interface Segregation Principle.\r\n\r\nThe decision to create an interface should not be based on the number of implementing classes, but rather on the number of different ways that object is used. Each ways the object is used is represented by an interface, defined with the code that uses it. Say your object needs to be stored in memory, in collections that keep objects in order. That same object and also needs to be stored in some persistent storage. \r\n\r\nSay you implement persistence first. What is needed by the storage system is a unique identifier for the persisted objects. You create an interface, say Storable, with a method getUniqueId. You then implement the storage.\r\n\r\n\r\nThen, you implement the collection. You define what the collection needs from stored objects in an interface, like Comparable, with a method compareTo. You can then implement the collection with dependency on Comparable. \r\n\r\nThe class you want to define would implement both interfaces. \r\n\r\nIf the class you are defining implement a single interface, that interface would have to represent the needs of the collection and storage system. That would cause, for example:\r\n\r\n- unit tests for the collection would have to be written with objects that implement Storable, adding a level of complexity. \r\n\r\n\r\n- if the need arise later to display the object, you would have to add methods needed by the display code to the single interface, and modify the tests for collection and storage to also implement the methods needed for display. \r\n\r\nI talk about impact on test code here. The problem is larger if other production level objects need storage and not display. The larger the project, the larger the issue created by not respecting the interface segregation principle will become. \r\n\r\n","title":"Why should I use an interface when there is only one implementation class?","body":"<p>To respect the Interface Segregation Principle.</p>\n\n<p>The decision to create an interface should not be based on the number of implementing classes, but rather on the number of different ways that object is used. Each ways the object is used is represented by an interface, defined with the code that uses it. Say your object needs to be stored in memory, in collections that keep objects in order. That same object and also needs to be stored in some persistent storage. </p>\n\n<p>Say you implement persistence first. What is needed by the storage system is a unique identifier for the persisted objects. You create an interface, say Storable, with a method getUniqueId. You then implement the storage.</p>\n\n<p>Then, you implement the collection. You define what the collection needs from stored objects in an interface, like Comparable, with a method compareTo. You can then implement the collection with dependency on Comparable. </p>\n\n<p>The class you want to define would implement both interfaces. </p>\n\n<p>If the class you are defining implement a single interface, that interface would have to represent the needs of the collection and storage system. That would cause, for example:</p>\n\n<ul>\n<li><p>unit tests for the collection would have to be written with objects that implement Storable, adding a level of complexity. </p></li>\n<li><p>if the need arise later to display the object, you would have to add methods needed by the display code to the single interface, and modify the tests for collection and storage to also implement the methods needed for display. </p></li>\n</ul>\n\n<p>I talk about impact on test code here. The problem is larger if other production level objects need storage and not display. The larger the project, the larger the issue created by not respecting the interface segregation principle will become. </p>\n"},{"tags":[],"owner":{"account_id":9795689,"reputation":1259,"user_id":7258827,"display_name":"AppleCiderGuy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640288309,"creation_date":1640288048,"answer_id":70466666,"question_id":35277358,"body_markdown":"I see a lot of good points being made in this post. Also wanted to add my 2 cents to this collection of knowledge.\r\n\r\nInterfaces Encourage parallel development in a team environment. There can be 2 classes A and B, with A calling B&#39;s API. There can be 2 developers simultaneously working on A and B. while B is not ready, A can totally go about it&#39;s own implementation by integrating with B&#39;s interfaces.\r\n\r\nInterfaces serve as a good ground for establishing API Contracts between different layers of code.\r\n\r\nIt&#39;s good to have a separation of concerns with Interface handling implicit API documentation. it&#39;s super easy to refer to one and figure which APIs are accessible for the clients to call.\r\n\r\nLastly, it&#39;s better to practice using interfaces as a standard in a project than having to use it on a case by case bases (where you need multiple implementations). This ensures consistency in your project. \r\n\r\nFor the Art that Java Code is, interfaces make thmem even more beautiful :)","title":"Why should I use an interface when there is only one implementation class?","body":"<p>I see a lot of good points being made in this post. Also wanted to add my 2 cents to this collection of knowledge.</p>\n<p>Interfaces Encourage parallel development in a team environment. There can be 2 classes A and B, with A calling B's API. There can be 2 developers simultaneously working on A and B. while B is not ready, A can totally go about it's own implementation by integrating with B's interfaces.</p>\n<p>Interfaces serve as a good ground for establishing API Contracts between different layers of code.</p>\n<p>It's good to have a separation of concerns with Interface handling implicit API documentation. it's super easy to refer to one and figure which APIs are accessible for the clients to call.</p>\n<p>Lastly, it's better to practice using interfaces as a standard in a project than having to use it on a case by case bases (where you need multiple implementations). This ensures consistency in your project.</p>\n<p>For the Art that Java Code is, interfaces make thmem even more beautiful :)</p>\n"},{"tags":[],"owner":{"account_id":1313740,"reputation":2571,"user_id":1261162,"accept_rate":60,"display_name":"Rafael"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1650554156,"creation_date":1650554156,"answer_id":71956879,"question_id":35277358,"body_markdown":"You shoulnt do anything without thinking and reasoning.\r\n\r\nThere might be cases where you might want to add an interface even for a single implementation ... but IMO that&#39;s an **OBSOLETE PRACTICE** coming from old EJB times, that people use and enforce without the proper reasoning and reflection.\r\n\r\n... and both Martin Fowler, Adan Bien, and others has been saying it for years.\r\n\r\nhttps://martinfowler.com/bliki/InterfaceImplementationPair.html\r\n\r\nhttps://www.adam-bien.com/roller/abien/entry/service_s_new_serviceimpl_why","title":"Why should I use an interface when there is only one implementation class?","body":"<p>You shoulnt do anything without thinking and reasoning.</p>\n<p>There might be cases where you might want to add an interface even for a single implementation ... but IMO that's an <strong>OBSOLETE PRACTICE</strong> coming from old EJB times, that people use and enforce without the proper reasoning and reflection.</p>\n<p>... and both Martin Fowler, Adan Bien, and others has been saying it for years.</p>\n<p><a href=\"https://martinfowler.com/bliki/InterfaceImplementationPair.html\" rel=\"noreferrer\">https://martinfowler.com/bliki/InterfaceImplementationPair.html</a></p>\n<p><a href=\"https://www.adam-bien.com/roller/abien/entry/service_s_new_serviceimpl_why\" rel=\"noreferrer\">https://www.adam-bien.com/roller/abien/entry/service_s_new_serviceimpl_why</a></p>\n"},{"tags":[],"owner":{"account_id":29317993,"reputation":31,"user_id":22462274,"display_name":"unimatrix10"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695394985,"creation_date":1695394985,"answer_id":77158778,"question_id":35277358,"body_markdown":"There are many good answers to this question. And my contribution is:\r\n\r\nThe interface allows you to perform code substitution without having to make changes to the code that is currently using it.\r\n\r\nThis is particularly useful for unit testing, since it allows to replace the code that is actually executed by one prepared with a particular feature/situation/configuration/calculation such as simulating* access to a database, a file, a Web Service, a mail and even prepared to test the error cases thus verifying that the code is well executed and also correctly handles the error cases and special cases. This feature of the interface can even be used for development, refactoring and testing without affecting de current code.\r\n\r\nSo if you don&#39;t have that interface you won&#39;t be able to do the substitution and therefore the automatic unit tests would not be able to take advantage of the benefits mentioned above.\r\n\r\nIf you want to see a more visual example of this I recommend you to watch the following video:\r\n\r\nhttps://www.youtube.com/watch?v=J1f5b4vcxCQ&amp;list=PLotziLf0XP1htK1RYUd1GR13ly7suM-IC&amp;index=2&amp;t=667s\r\n\r\n*In java the act of substitute to simulation or test is called &quot;mock&quot;\r\n\r\nHappy Coding;\r\n","title":"Why should I use an interface when there is only one implementation class?","body":"<p>There are many good answers to this question. And my contribution is:</p>\n<p>The interface allows you to perform code substitution without having to make changes to the code that is currently using it.</p>\n<p>This is particularly useful for unit testing, since it allows to replace the code that is actually executed by one prepared with a particular feature/situation/configuration/calculation such as simulating* access to a database, a file, a Web Service, a mail and even prepared to test the error cases thus verifying that the code is well executed and also correctly handles the error cases and special cases. This feature of the interface can even be used for development, refactoring and testing without affecting de current code.</p>\n<p>So if you don't have that interface you won't be able to do the substitution and therefore the automatic unit tests would not be able to take advantage of the benefits mentioned above.</p>\n<p>If you want to see a more visual example of this I recommend you to watch the following video:</p>\n<p><a href=\"https://www.youtube.com/watch?v=J1f5b4vcxCQ&amp;list=PLotziLf0XP1htK1RYUd1GR13ly7suM-IC&amp;index=2&amp;t=667s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=J1f5b4vcxCQ&amp;list=PLotziLf0XP1htK1RYUd1GR13ly7suM-IC&amp;index=2&amp;t=667s</a></p>\n<p>*In java the act of substitute to simulation or test is called &quot;mock&quot;</p>\n<p>Happy Coding;</p>\n"}],"owner":{"account_id":7800313,"reputation":287,"user_id":5900005,"display_name":"Qais Sahel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10370,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":35277463,"answer_count":8,"score":27,"last_activity_date":1695394985,"creation_date":1454958487,"question_id":35277358,"body_markdown":"I&#39;m new at programming and I&#39;m learning Java. \r\nI was just wondering why I should use an interface when there is only one implementation class? ","title":"Why should I use an interface when there is only one implementation class?","body":"<p>I'm new at programming and I'm learning Java. \nI was just wondering why I should use an interface when there is only one implementation class? </p>\n"},{"tags":["java","jpa","jakarta-ee"],"answers":[{"tags":[],"owner":{"account_id":9867,"reputation":618181,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"down_vote_count":5,"up_vote_count":4,"is_accepted":false,"score":-1,"last_activity_date":1231242747,"creation_date":1231242747,"answer_id":416235,"question_id":416208,"body_markdown":"Collections in JPA refer to one-to-many or many-to-many relationships and they can only contain other entities.  Sorry, but you&#39;d need to wrap those enums in an entity.  If you think about it, you&#39;d need some sort of ID field and foreign key to store this information anyway.  That is unless you do something crazy like store a comma-separated list in a String (don&#39;t do this!).\r\n","title":"JPA map collection of Enums","body":"<p>Collections in JPA refer to one-to-many or many-to-many relationships and they can only contain other entities.  Sorry, but you'd need to wrap those enums in an entity.  If you think about it, you'd need some sort of ID field and foreign key to store this information anyway.  That is unless you do something crazy like store a comma-separated list in a String (don't do this!).</p>\n"},{"tags":[],"owner":{"display_name":"ant"},"down_vote_count":1,"up_vote_count":133,"is_accepted":true,"score":132,"last_activity_date":1649100248,"creation_date":1236952247,"answer_id":642805,"question_id":416208,"body_markdown":"using Hibernate you can do\r\n\r\n  \r\n\t@ElementCollection(targetElement = InterestsEnum.class)\r\n\t@JoinTable(name = &quot;tblInterests&quot;, joinColumns = @JoinColumn(name = &quot;personID&quot;))\r\n\t@Column(name = &quot;interest&quot;, nullable = false)\r\n\t@Enumerated(EnumType.STRING)\r\n\tCollection&lt;InterestsEnum&gt; interests;\r\n","title":"JPA map collection of Enums","body":"<p>using Hibernate you can do</p>\n<pre><code>@ElementCollection(targetElement = InterestsEnum.class)\n@JoinTable(name = &quot;tblInterests&quot;, joinColumns = @JoinColumn(name = &quot;personID&quot;))\n@Column(name = &quot;interest&quot;, nullable = false)\n@Enumerated(EnumType.STRING)\nCollection&lt;InterestsEnum&gt; interests;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":243192,"reputation":6619,"user_id":515205,"accept_rate":83,"display_name":"spaaarky21"},"down_vote_count":1,"up_vote_count":78,"is_accepted":false,"score":77,"last_activity_date":1330305869,"creation_date":1330305869,"answer_id":9458969,"question_id":416208,"body_markdown":"The link in Andy&#39;s answer is a great starting point for mapping collections of &quot;non-Entity&quot; objects in JPA 2, but isn&#39;t quite complete when it comes to mapping enums.  Here is what I came up with instead.\r\n\r\n    @Entity\r\n    public class Person {\r\n        @ElementCollection(targetClass=InterestsEnum.class)\r\n        @Enumerated(EnumType.STRING) // Possibly optional (I&#39;m not sure) but defaults to ORDINAL.\r\n        @CollectionTable(name=&quot;person_interest&quot;)\r\n        @Column(name=&quot;interest&quot;) // Column name in person_interest\r\n        Collection&lt;InterestsEnum&gt; interests;\r\n    }","title":"JPA map collection of Enums","body":"<p>The link in Andy's answer is a great starting point for mapping collections of \"non-Entity\" objects in JPA 2, but isn't quite complete when it comes to mapping enums.  Here is what I came up with instead.</p>\n\n<pre><code>@Entity\npublic class Person {\n    @ElementCollection(targetClass=InterestsEnum.class)\n    @Enumerated(EnumType.STRING) // Possibly optional (I'm not sure) but defaults to ORDINAL.\n    @CollectionTable(name=\"person_interest\")\n    @Column(name=\"interest\") // Column name in person_interest\n    Collection&lt;InterestsEnum&gt; interests;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5502833,"reputation":8715,"user_id":4371659,"accept_rate":80,"display_name":"Tobias Liefke"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1422424246,"creation_date":1422397631,"answer_id":28181217,"question_id":416208,"body_markdown":"I&#39;m using a slight modification of java.util.RegularEnumSet to have a persistent EnumSet:\r\n\r\n    @MappedSuperclass\r\n    @Access(AccessType.FIELD)\r\n    public class PersistentEnumSet&lt;E extends Enum&lt;E&gt;&gt; \r\n        extends AbstractSet&lt;E&gt; {\r\n      private long elements;\r\n\r\n      @Transient\r\n      private final Class&lt;E&gt; elementType;\r\n\r\n      @Transient\r\n      private final E[] universe;\r\n        \r\n      public PersistentEnumSet(final Class&lt;E&gt; elementType) {\r\n        this.elementType = elementType;\r\n        try {\r\n          this.universe = (E[]) elementType.getMethod(&quot;values&quot;).invoke(null);\r\n        } catch (final ReflectiveOperationException e) {\r\n          throw new IllegalArgumentException(&quot;Not an enum type: &quot; + elementType, e);\r\n        }\r\n        if (this.universe.length &gt; 64) {\r\n          throw new IllegalArgumentException(&quot;More than 64 enum elements are not allowed&quot;);\r\n        }\r\n      }\r\n\r\n      // Copy everything else from java.util.RegularEnumSet\r\n      // ...\r\n    }\r\n\r\nThis class is now the base for all of my enum sets:\r\n\r\n    @Embeddable\r\n    public class InterestsSet extends PersistentEnumSet&lt;InterestsEnum&gt; {\r\n      public InterestsSet() {\r\n        super(InterestsEnum.class);\r\n      }\r\n    }\r\n\r\nAnd that set I can use in my entity:\r\n\r\n    @Entity\r\n    public class MyEntity {\r\n      // ...\r\n      @Embedded\r\n      @AttributeOverride(name=&quot;elements&quot;, column=@Column(name=&quot;interests&quot;))\r\n      private InterestsSet interests = new InterestsSet();\r\n    }\r\n\r\n*Advantages:*\r\n\r\n - Working with a type safe and performant enum set in your code (see `java.util.EnumSet` for a description)\r\n - The set is just one numeric column in the database\r\n - everything is plain JPA (no provider specific *custom types*)\r\n - easy (and short) declaration of new fields of the same type, compared with the other solutions\r\n\r\n*Drawbacks:*\r\n\r\n - Code duplication (`RegularEnumSet` and `PersistentEnumSet` are nearly the same) \r\n   - You could wrap the result of `EnumSet.noneOf(enumType)` in your `PersistenEnumSet`, declare `AccessType.PROPERTY` and provide two access methods which use reflection to read and write the `elements` field\r\n - An additional set class is needed for every enum class that should be stored in a persistent set\r\n   - If your persistence provider supports embeddables without a public    constructor, you could add `@Embeddable` to `PersistentEnumSet` and drop the\r\n   extra class (`... interests = new PersistentEnumSet&lt;&gt;(InterestsEnum.class);`)\r\n - You must use an `@AttributeOverride`, as given in my example, if you&#39;ve got more than one `PersistentEnumSet` in your entity (otherwise both    would be stored to the same column &quot;elements&quot;)\r\n - The access of `values()` with reflection in the constructor is not optimal (especially when looking at the performance), but the two other options have their drawbacks as well: \r\n   - An implementation like `EnumSet.getUniverse()` makes use of a `sun.misc` class\r\n   - Providing the values array as parameter has the risk that the given values are not the correct ones\r\n - Only enums with up to 64 values are supported (is that really a drawback?)\r\n    - You could use BigInteger instead\r\n - It&#39;s not easy to use the elements field in a criteria query or JPQL\r\n    - You could use binary operators or a bitmask column with the appropriate functions, if your database supports that","title":"JPA map collection of Enums","body":"<p>I'm using a slight modification of java.util.RegularEnumSet to have a persistent EnumSet:</p>\n\n<pre><code>@MappedSuperclass\n@Access(AccessType.FIELD)\npublic class PersistentEnumSet&lt;E extends Enum&lt;E&gt;&gt; \n    extends AbstractSet&lt;E&gt; {\n  private long elements;\n\n  @Transient\n  private final Class&lt;E&gt; elementType;\n\n  @Transient\n  private final E[] universe;\n\n  public PersistentEnumSet(final Class&lt;E&gt; elementType) {\n    this.elementType = elementType;\n    try {\n      this.universe = (E[]) elementType.getMethod(\"values\").invoke(null);\n    } catch (final ReflectiveOperationException e) {\n      throw new IllegalArgumentException(\"Not an enum type: \" + elementType, e);\n    }\n    if (this.universe.length &gt; 64) {\n      throw new IllegalArgumentException(\"More than 64 enum elements are not allowed\");\n    }\n  }\n\n  // Copy everything else from java.util.RegularEnumSet\n  // ...\n}\n</code></pre>\n\n<p>This class is now the base for all of my enum sets:</p>\n\n<pre><code>@Embeddable\npublic class InterestsSet extends PersistentEnumSet&lt;InterestsEnum&gt; {\n  public InterestsSet() {\n    super(InterestsEnum.class);\n  }\n}\n</code></pre>\n\n<p>And that set I can use in my entity:</p>\n\n<pre><code>@Entity\npublic class MyEntity {\n  // ...\n  @Embedded\n  @AttributeOverride(name=\"elements\", column=@Column(name=\"interests\"))\n  private InterestsSet interests = new InterestsSet();\n}\n</code></pre>\n\n<p><em>Advantages:</em></p>\n\n<ul>\n<li>Working with a type safe and performant enum set in your code (see <code>java.util.EnumSet</code> for a description)</li>\n<li>The set is just one numeric column in the database</li>\n<li>everything is plain JPA (no provider specific <em>custom types</em>)</li>\n<li>easy (and short) declaration of new fields of the same type, compared with the other solutions</li>\n</ul>\n\n<p><em>Drawbacks:</em></p>\n\n<ul>\n<li>Code duplication (<code>RegularEnumSet</code> and <code>PersistentEnumSet</code> are nearly the same) \n<ul>\n<li>You could wrap the result of <code>EnumSet.noneOf(enumType)</code> in your <code>PersistenEnumSet</code>, declare <code>AccessType.PROPERTY</code> and provide two access methods which use reflection to read and write the <code>elements</code> field</li>\n</ul></li>\n<li>An additional set class is needed for every enum class that should be stored in a persistent set\n<ul>\n<li>If your persistence provider supports embeddables without a public    constructor, you could add <code>@Embeddable</code> to <code>PersistentEnumSet</code> and drop the\nextra class (<code>... interests = new PersistentEnumSet&lt;&gt;(InterestsEnum.class);</code>)</li>\n</ul></li>\n<li>You must use an <code>@AttributeOverride</code>, as given in my example, if you've got more than one <code>PersistentEnumSet</code> in your entity (otherwise both    would be stored to the same column \"elements\")</li>\n<li>The access of <code>values()</code> with reflection in the constructor is not optimal (especially when looking at the performance), but the two other options have their drawbacks as well: \n<ul>\n<li>An implementation like <code>EnumSet.getUniverse()</code> makes use of a <code>sun.misc</code> class</li>\n<li>Providing the values array as parameter has the risk that the given values are not the correct ones</li>\n</ul></li>\n<li>Only enums with up to 64 values are supported (is that really a drawback?)\n<ul>\n<li>You could use BigInteger instead</li>\n</ul></li>\n<li>It's not easy to use the elements field in a criteria query or JPQL\n<ul>\n<li>You could use binary operators or a bitmask column with the appropriate functions, if your database supports that</li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":5564647,"reputation":5151,"user_id":4412414,"accept_rate":100,"display_name":"megalucio"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1490219097,"creation_date":1490219097,"answer_id":42963219,"question_id":416208,"body_markdown":"I was able to accomplish this in this simple way:\r\n\r\n    @ElementCollection(fetch = FetchType.EAGER)\r\n    Collection&lt;InterestsEnum&gt; interests;\r\n\r\nEager loading is required in order to avoid lazy loading inizializing error as explained [here][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11746499/solve-failed-to-lazily-initialize-a-collection-of-role-exception","title":"JPA map collection of Enums","body":"<p>I was able to accomplish this in this simple way:</p>\n\n<pre><code>@ElementCollection(fetch = FetchType.EAGER)\nCollection&lt;InterestsEnum&gt; interests;\n</code></pre>\n\n<p>Eager loading is required in order to avoid lazy loading inizializing error as explained <a href=\"https://stackoverflow.com/questions/11746499/solve-failed-to-lazily-initialize-a-collection-of-role-exception\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":2932312,"reputation":1029,"user_id":2766687,"display_name":"Bruno Morais"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1695394899,"creation_date":1587170478,"answer_id":61282876,"question_id":416208,"body_markdown":"tl;dr A short solution would be the following:\r\n\r\n    @ElementCollection(targetClass = InterestsEnum.class)\r\n    @CollectionTable\r\n    @Enumerated(EnumType.STRING)\r\n    Collection&lt;InterestsEnum&gt; interests;\r\n\r\nThe long answer is that with this annotations JPA will create one table that will hold the list of InterestsEnum pointing to the main class identifier (Person.class in this case).\r\n\r\n`@ElementCollections` specify where JPA can find information about the Enum.\r\n\r\n`@CollectionTable` create the table that hold relationship from Person to InterestsEnum\r\n\r\n`@Enumerated(EnumType.STRING)` tells JPA to persist the Enum as String, could be `EnumType.ORDINAL`.","title":"JPA map collection of Enums","body":"<p>tl;dr A short solution would be the following:</p>\n<pre><code>@ElementCollection(targetClass = InterestsEnum.class)\n@CollectionTable\n@Enumerated(EnumType.STRING)\nCollection&lt;InterestsEnum&gt; interests;\n</code></pre>\n<p>The long answer is that with this annotations JPA will create one table that will hold the list of InterestsEnum pointing to the main class identifier (Person.class in this case).</p>\n<p><code>@ElementCollections</code> specify where JPA can find information about the Enum.</p>\n<p><code>@CollectionTable</code> create the table that hold relationship from Person to InterestsEnum</p>\n<p><code>@Enumerated(EnumType.STRING)</code> tells JPA to persist the Enum as String, could be <code>EnumType.ORDINAL</code>.</p>\n"}],"owner":{"account_id":18523,"reputation":5667,"user_id":42512,"accept_rate":73,"display_name":"Gennady Shumakher"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97806,"favorite_count":0,"down_vote_count":0,"up_vote_count":111,"accepted_answer_id":642805,"answer_count":6,"score":111,"last_activity_date":1695394899,"creation_date":1231242019,"question_id":416208,"body_markdown":"Is there a way in JPA to map a collection of Enums within the Entity class? Or the only solution is to wrap Enum with another domain class and use it to map the collection?\r\n\r\n\r\n\r\n    @Entity\r\n    public class Person {\r\n        public enum InterestsEnum {Books, Sport, etc...  }\r\n        //@???\r\n        Collection&lt;InterestsEnum&gt; interests;\r\n    }\r\n\r\nI am using Hibernate JPA implementation, but of course would prefer implementation agnostic solution.\r\n\r\n\r\n","title":"JPA map collection of Enums","body":"<p>Is there a way in JPA to map a collection of Enums within the Entity class? Or the only solution is to wrap Enum with another domain class and use it to map the collection?</p>\n\n<pre><code>@Entity\npublic class Person {\n    public enum InterestsEnum {Books, Sport, etc...  }\n    //@???\n    Collection&lt;InterestsEnum&gt; interests;\n}\n</code></pre>\n\n<p>I am using Hibernate JPA implementation, but of course would prefer implementation agnostic solution.</p>\n"},{"tags":["java","java-8","java-stream"],"comments":[{"owner":{"account_id":5419194,"reputation":5240,"user_id":4313437,"display_name":"sahitya"},"score":0,"creation_date":1441029294,"post_id":32312876,"comment_id":52500962,"body_markdown":"If you can use it, HashSet will ignore the key, if it already exists.","body":"If you can use it, HashSet will ignore the key, if it already exists."},{"owner":{"account_id":1315495,"reputation":17293,"user_id":1262477,"accept_rate":74,"display_name":"Patan"},"score":0,"creation_date":1441029528,"post_id":32312876,"comment_id":52501126,"body_markdown":"@captain-aryabhatta. Is it possible to have key values in hashset","body":"@captain-aryabhatta. Is it possible to have key values in hashset"}],"answers":[{"tags":[],"owner":{"account_id":1936546,"reputation":133665,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"down_vote_count":1,"up_vote_count":656,"is_accepted":true,"score":655,"last_activity_date":1471618062,"creation_date":1441029527,"answer_id":32313069,"question_id":32312876,"body_markdown":"This is possible using the `mergeFunction` parameter of [`Collectors.toMap(keyMapper, valueMapper, mergeFunction)`](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-):\r\n\r\n    Map&lt;String, String&gt; phoneBook = \r\n        people.stream()\r\n              .collect(Collectors.toMap(\r\n                 Person::getName,\r\n                 Person::getAddress,\r\n                 (address1, address2) -&gt; {\r\n                     System.out.println(&quot;duplicate key found!&quot;);\r\n                     return address1;\r\n                 }\r\n              ));\r\n\r\n`mergeFunction` is a function that operates on two values associated with the same key. `adress1` corresponds to the first address that was encountered when collecting elements and `adress2` corresponds to the second address encountered: this lambda just tells to keep the first address and ignores the second.","title":"Ignore duplicates when producing map using streams","body":"<p>This is possible using the <code>mergeFunction</code> parameter of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"noreferrer\"><code>Collectors.toMap(keyMapper, valueMapper, mergeFunction)</code></a>:</p>\n\n<pre><code>Map&lt;String, String&gt; phoneBook = \n    people.stream()\n          .collect(Collectors.toMap(\n             Person::getName,\n             Person::getAddress,\n             (address1, address2) -&gt; {\n                 System.out.println(\"duplicate key found!\");\n                 return address1;\n             }\n          ));\n</code></pre>\n\n<p><code>mergeFunction</code> is a function that operates on two values associated with the same key. <code>adress1</code> corresponds to the first address that was encountered when collecting elements and <code>adress2</code> corresponds to the second address encountered: this lambda just tells to keep the first address and ignores the second.</p>\n"},{"tags":[],"owner":{"account_id":1227394,"reputation":3921,"user_id":1192702,"accept_rate":75,"display_name":"alaster"},"down_vote_count":1,"up_vote_count":184,"is_accepted":false,"score":183,"last_activity_date":1668698310,"creation_date":1441029782,"answer_id":32313148,"question_id":32312876,"body_markdown":"As said in [JavaDocs][1]:\r\n\r\n&gt; If the mapped keys contains duplicates (according to\r\n&gt; `Object.equals(Object)`), an `IllegalStateException` is thrown when the\r\n&gt; collection operation is performed. If the mapped keys may have\r\n&gt; duplicates, use `toMap(Function keyMapper, Function valueMapper, BinaryOperator mergeFunction)` instead.\r\n\r\nSo you should use [`toMap(Function keyMapper, Function valueMapper, BinaryOperator mergeFunction)`][2] instead. Just provide a **merge function**, that will determine which one of duplicates is put in the map. \r\n\r\nFor example, if you don&#39;t care which one, just call\r\n\r\n    Map&lt;String, String&gt; phoneBook = people.stream().collect(\r\n            Collectors.toMap(Person::getName, Person::getAddress, (a1, a2) -&gt; a1));\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-","title":"Ignore duplicates when producing map using streams","body":"<p>As said in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"noreferrer\">JavaDocs</a>:</p>\n<blockquote>\n<p>If the mapped keys contains duplicates (according to\n<code>Object.equals(Object)</code>), an <code>IllegalStateException</code> is thrown when the\ncollection operation is performed. If the mapped keys may have\nduplicates, use <code>toMap(Function keyMapper, Function valueMapper, BinaryOperator mergeFunction)</code> instead.</p>\n</blockquote>\n<p>So you should use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"noreferrer\"><code>toMap(Function keyMapper, Function valueMapper, BinaryOperator mergeFunction)</code></a> instead. Just provide a <strong>merge function</strong>, that will determine which one of duplicates is put in the map.</p>\n<p>For example, if you don't care which one, just call</p>\n<pre><code>Map&lt;String, String&gt; phoneBook = people.stream().collect(\n        Collectors.toMap(Person::getName, Person::getAddress, (a1, a2) -&gt; a1));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1647608948,"creation_date":1529519460,"answer_id":50954897,"question_id":32312876,"body_markdown":"The answer from [alaster][1] helped me a lot, but I would like to add  meaningful information if someone is trying to **group** the data.\r\n\r\nIf you have, for example, two `Orders` with the same `code` but different `quantity` of products for each one, and your desire is to **sum** the quantities, you can do the following:\r\n\r\n    List&lt;Order&gt; listQuantidade = new ArrayList&lt;&gt;();\r\n    listOrders.add(new Order(&quot;COD_1&quot;, 1L));\r\n    listOrders.add(new Order(&quot;COD_1&quot;, 5L));\r\n    listOrders.add(new Order(&quot;COD_1&quot;, 3L));\r\n    listOrders.add(new Order(&quot;COD_2&quot;, 3L));\r\n    listOrders.add(new Order(&quot;COD_3&quot;, 4L));\r\n\r\n\tlistOrders.collect(Collectors.toMap(Order::getCode, \r\n                                        o -&gt; o.getQuantity(), \r\n                                        (o1, o2) -&gt; o1 + o2));\r\n\r\nResult:\r\n\r\n    {COD_3=4, COD_2=3, COD_1=9}\r\n\r\nOr, from the [javadocs][2], you can combine addresses:\r\n\r\n     Map&lt;String, String&gt; phoneBook\r\n         people.stream().collect(toMap(Person::getName,\r\n                                       Person::getAddress,\r\n                                       (s, a) -&gt; s + &quot;, &quot; + a));\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/1192702/alaster\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-","title":"Ignore duplicates when producing map using streams","body":"<p>The answer from <a href=\"https://stackoverflow.com/users/1192702/alaster\">alaster</a> helped me a lot, but I would like to add  meaningful information if someone is trying to <strong>group</strong> the data.</p>\n<p>If you have, for example, two <code>Orders</code> with the same <code>code</code> but different <code>quantity</code> of products for each one, and your desire is to <strong>sum</strong> the quantities, you can do the following:</p>\n<pre><code>List&lt;Order&gt; listQuantidade = new ArrayList&lt;&gt;();\nlistOrders.add(new Order(&quot;COD_1&quot;, 1L));\nlistOrders.add(new Order(&quot;COD_1&quot;, 5L));\nlistOrders.add(new Order(&quot;COD_1&quot;, 3L));\nlistOrders.add(new Order(&quot;COD_2&quot;, 3L));\nlistOrders.add(new Order(&quot;COD_3&quot;, 4L));\n\nlistOrders.collect(Collectors.toMap(Order::getCode, \n                                    o -&gt; o.getQuantity(), \n                                    (o1, o2) -&gt; o1 + o2));\n</code></pre>\n<p>Result:</p>\n<pre><code>{COD_3=4, COD_2=3, COD_1=9}\n</code></pre>\n<p>Or, from the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"noreferrer\">javadocs</a>, you can combine addresses:</p>\n<pre><code> Map&lt;String, String&gt; phoneBook\n     people.stream().collect(toMap(Person::getName,\n                                   Person::getAddress,\n                                   (s, a) -&gt; s + &quot;, &quot; + a));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6174988,"reputation":11040,"user_id":4812170,"accept_rate":73,"display_name":"vaquar khan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1543443856,"creation_date":1543443856,"answer_id":53529006,"question_id":32312876,"body_markdown":"Assuming you have people is List of object \r\n\r\n  \r\n\r\n      Map&lt;String, String&gt; phoneBook=people.stream()\r\n                                            .collect(toMap(Person::getName, Person::getAddress));\r\n\r\n \r\nNow you need two steps :\r\n\r\n1) \r\n\r\n    people =removeDuplicate(people);\r\n\r\n\r\n2) \r\n\r\n    Map&lt;String, String&gt; phoneBook=people.stream()\r\n                                            .collect(toMap(Person::getName, Person::getAddress));\r\n\r\nHere is method to remove duplicate \r\n\r\n    public static List removeDuplicate(Collection&lt;Person&gt;  list) {\r\n        \tif(list ==null || list.isEmpty()){\r\n        \t\treturn null;\r\n        \t}\r\n        \t\r\n        \tObject removedDuplicateList =\r\n        \t\t\tlist.stream()\r\n                         .distinct()\r\n                         .collect(Collectors.toList());\r\n         return (List) removedDuplicateList;\r\n           \r\n          }\r\n\r\n\r\nAdding full example here\r\n\r\n   \r\n\r\n     package com.example.khan.vaquar;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.Collection;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.stream.Collectors;\r\n    \r\n    public class RemovedDuplicate {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tPerson vaquar = new Person(1, &quot;Vaquar&quot;, &quot;Khan&quot;);\r\n    \t\tPerson zidan = new Person(2, &quot;Zidan&quot;, &quot;Khan&quot;);\r\n    \t\tPerson zerina = new Person(3, &quot;Zerina&quot;, &quot;Khan&quot;);\r\n    \r\n    \t\t// Add some random persons\r\n    \t\tCollection&lt;Person&gt; duplicateList = Arrays.asList(vaquar, zidan, zerina, vaquar, zidan, vaquar);\r\n    \r\n    \t\t//\r\n    \t\tSystem.out.println(&quot;Before removed duplicate list&quot; + duplicateList);\r\n    \t\t//\r\n    \t\tCollection&lt;Person&gt; nonDuplicateList = removeDuplicate(duplicateList);\r\n    \t\t//\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;After removed duplicate list&quot; + nonDuplicateList);\r\n    \t\t;\r\n    \r\n    \t\t// 1) solution Working code\r\n    \t\tMap&lt;Object, Object&gt; k = nonDuplicateList.stream().distinct()\r\n    \t\t\t\t.collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;Result 1 using method_______________________________________________&quot;);\r\n    \t\tSystem.out.println(&quot;k&quot; + k);\r\n    \t\tSystem.out.println(&quot;_____________________________________________________________________&quot;);\r\n    \r\n    \t\t// 2) solution using inline distinct()\r\n    \t\tMap&lt;Object, Object&gt; k1 = duplicateList.stream().distinct()\r\n    \t\t\t\t.collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;Result 2 using inline_______________________________________________&quot;);\r\n    \t\tSystem.out.println(&quot;k1&quot; + k1);\r\n    \t\tSystem.out.println(&quot;_____________________________________________________________________&quot;);\r\n    \t\t\r\n    \t\t//breacking code\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;Throwing exception _______________________________________________&quot;);\r\n    \t\tMap&lt;Object, Object&gt; k2 = duplicateList.stream()\r\n    \t\t\t\t.collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\r\n    \t\tSystem.out.println(&quot;&quot;);\r\n    \t\tSystem.out.println(&quot;k2&quot; + k2);\r\n    \t\tSystem.out.println(&quot;_____________________________________________________________________&quot;);\r\n    \t}\r\n    \r\n    \tpublic static List removeDuplicate(Collection&lt;Person&gt; list) {\r\n    \t\tif (list == null || list.isEmpty()) {\r\n    \t\t\treturn null;\r\n    \t\t}\r\n    \r\n    \t\tObject removedDuplicateList = list.stream().distinct().collect(Collectors.toList());\r\n    \t\treturn (List) removedDuplicateList;\r\n    \r\n    \t}\r\n    \r\n    }\r\n    \r\n    // Model class\r\n    class Person {\r\n    \tpublic Person(Integer id, String fname, String lname) {\r\n    \t\tsuper();\r\n    \t\tthis.id = id;\r\n    \t\tthis.fname = fname;\r\n    \t\tthis.lname = lname;\r\n    \t}\r\n    \r\n    \tprivate Integer id;\r\n    \tprivate String fname;\r\n    \tprivate String lname;\r\n    \r\n    \t// Getters and Setters\r\n    \r\n    \tpublic Integer getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(Integer id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getFname() {\r\n    \t\treturn fname;\r\n    \t}\r\n    \r\n    \tpublic void setFname(String fname) {\r\n    \t\tthis.fname = fname;\r\n    \t}\r\n    \r\n    \tpublic String getLname() {\r\n    \t\treturn lname;\r\n    \t}\r\n    \r\n    \tpublic void setLname(String lname) {\r\n    \t\tthis.lname = lname;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic String toString() {\r\n    \t\treturn &quot;Person [id=&quot; + id + &quot;, fname=&quot; + fname + &quot;, lname=&quot; + lname + &quot;]&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nResults :\r\n\r\n\r\n    Before removed duplicate list[Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=3, fname=Zerina, lname=Khan], Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=1, fname=Vaquar, lname=Khan]]\r\n    \r\n    After removed duplicate list[Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=3, fname=Zerina, lname=Khan]]\r\n    \r\n    Result 1 using method_______________________________________________\r\n    k{1=Person [id=1, fname=Vaquar, lname=Khan], 2=Person [id=2, fname=Zidan, lname=Khan], 3=Person [id=3, fname=Zerina, lname=Khan]}\r\n    _____________________________________________________________________\r\n    \r\n    Result 2 using inline_______________________________________________\r\n    k1{1=Person [id=1, fname=Vaquar, lname=Khan], 2=Person [id=2, fname=Zidan, lname=Khan], 3=Person [id=3, fname=Zerina, lname=Khan]}\r\n    _____________________________________________________________________\r\n    \r\n    Throwing exception _______________________________________________\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: Duplicate key Person [id=1, fname=Vaquar, lname=Khan]\r\n    \tat java.util.stream.Collectors.lambda$throwingMerger$0(Collectors.java:133)\r\n    \tat java.util.HashMap.merge(HashMap.java:1253)\r\n    \tat java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320)\r\n    \tat java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\r\n    \tat java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\r\n    \tat java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\r\n    \tat java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\r\n    \tat java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\r\n    \tat java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\r\n    \tat java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\r\n    \tat com.example.khan.vaquar.RemovedDuplicate.main(RemovedDuplicate.java:48)\r\n","title":"Ignore duplicates when producing map using streams","body":"<p>Assuming you have people is List of object </p>\n\n<pre><code>  Map&lt;String, String&gt; phoneBook=people.stream()\n                                        .collect(toMap(Person::getName, Person::getAddress));\n</code></pre>\n\n<p>Now you need two steps :</p>\n\n<p>1) </p>\n\n<pre><code>people =removeDuplicate(people);\n</code></pre>\n\n<p>2) </p>\n\n<pre><code>Map&lt;String, String&gt; phoneBook=people.stream()\n                                        .collect(toMap(Person::getName, Person::getAddress));\n</code></pre>\n\n<p>Here is method to remove duplicate </p>\n\n<pre><code>public static List removeDuplicate(Collection&lt;Person&gt;  list) {\n        if(list ==null || list.isEmpty()){\n            return null;\n        }\n\n        Object removedDuplicateList =\n                list.stream()\n                     .distinct()\n                     .collect(Collectors.toList());\n     return (List) removedDuplicateList;\n\n      }\n</code></pre>\n\n<p>Adding full example here</p>\n\n<pre><code> package com.example.khan.vaquar;\n\nimport java.util.Arrays;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\npublic class RemovedDuplicate {\n\n    public static void main(String[] args) {\n        Person vaquar = new Person(1, \"Vaquar\", \"Khan\");\n        Person zidan = new Person(2, \"Zidan\", \"Khan\");\n        Person zerina = new Person(3, \"Zerina\", \"Khan\");\n\n        // Add some random persons\n        Collection&lt;Person&gt; duplicateList = Arrays.asList(vaquar, zidan, zerina, vaquar, zidan, vaquar);\n\n        //\n        System.out.println(\"Before removed duplicate list\" + duplicateList);\n        //\n        Collection&lt;Person&gt; nonDuplicateList = removeDuplicate(duplicateList);\n        //\n        System.out.println(\"\");\n        System.out.println(\"After removed duplicate list\" + nonDuplicateList);\n        ;\n\n        // 1) solution Working code\n        Map&lt;Object, Object&gt; k = nonDuplicateList.stream().distinct()\n                .collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\n        System.out.println(\"\");\n        System.out.println(\"Result 1 using method_______________________________________________\");\n        System.out.println(\"k\" + k);\n        System.out.println(\"_____________________________________________________________________\");\n\n        // 2) solution using inline distinct()\n        Map&lt;Object, Object&gt; k1 = duplicateList.stream().distinct()\n                .collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\n        System.out.println(\"\");\n        System.out.println(\"Result 2 using inline_______________________________________________\");\n        System.out.println(\"k1\" + k1);\n        System.out.println(\"_____________________________________________________________________\");\n\n        //breacking code\n        System.out.println(\"\");\n        System.out.println(\"Throwing exception _______________________________________________\");\n        Map&lt;Object, Object&gt; k2 = duplicateList.stream()\n                .collect(Collectors.toMap(s1 -&gt; s1.getId(), s1 -&gt; s1));\n        System.out.println(\"\");\n        System.out.println(\"k2\" + k2);\n        System.out.println(\"_____________________________________________________________________\");\n    }\n\n    public static List removeDuplicate(Collection&lt;Person&gt; list) {\n        if (list == null || list.isEmpty()) {\n            return null;\n        }\n\n        Object removedDuplicateList = list.stream().distinct().collect(Collectors.toList());\n        return (List) removedDuplicateList;\n\n    }\n\n}\n\n// Model class\nclass Person {\n    public Person(Integer id, String fname, String lname) {\n        super();\n        this.id = id;\n        this.fname = fname;\n        this.lname = lname;\n    }\n\n    private Integer id;\n    private String fname;\n    private String lname;\n\n    // Getters and Setters\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getFname() {\n        return fname;\n    }\n\n    public void setFname(String fname) {\n        this.fname = fname;\n    }\n\n    public String getLname() {\n        return lname;\n    }\n\n    public void setLname(String lname) {\n        this.lname = lname;\n    }\n\n    @Override\n    public String toString() {\n        return \"Person [id=\" + id + \", fname=\" + fname + \", lname=\" + lname + \"]\";\n    }\n\n}\n</code></pre>\n\n<p>Results :</p>\n\n<pre><code>Before removed duplicate list[Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=3, fname=Zerina, lname=Khan], Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=1, fname=Vaquar, lname=Khan]]\n\nAfter removed duplicate list[Person [id=1, fname=Vaquar, lname=Khan], Person [id=2, fname=Zidan, lname=Khan], Person [id=3, fname=Zerina, lname=Khan]]\n\nResult 1 using method_______________________________________________\nk{1=Person [id=1, fname=Vaquar, lname=Khan], 2=Person [id=2, fname=Zidan, lname=Khan], 3=Person [id=3, fname=Zerina, lname=Khan]}\n_____________________________________________________________________\n\nResult 2 using inline_______________________________________________\nk1{1=Person [id=1, fname=Vaquar, lname=Khan], 2=Person [id=2, fname=Zidan, lname=Khan], 3=Person [id=3, fname=Zerina, lname=Khan]}\n_____________________________________________________________________\n\nThrowing exception _______________________________________________\nException in thread \"main\" java.lang.IllegalStateException: Duplicate key Person [id=1, fname=Vaquar, lname=Khan]\n    at java.util.stream.Collectors.lambda$throwingMerger$0(Collectors.java:133)\n    at java.util.HashMap.merge(HashMap.java:1253)\n    at java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320)\n    at java.util.stream.ReduceOps$3ReducingSink.accept(ReduceOps.java:169)\n    at java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n    at com.example.khan.vaquar.RemovedDuplicate.main(RemovedDuplicate.java:48)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1477140,"reputation":1906,"user_id":1387275,"accept_rate":100,"display_name":"Shessuky"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1553850105,"creation_date":1553850105,"answer_id":55413787,"question_id":32312876,"body_markdown":"I have encountered such a problem when grouping object, i always resolved them by a simple way: perform a custom filter using a java.util.Set to remove duplicate object with whatever attribute of your choice as bellow\r\n\r\n    Set&lt;String&gt; uniqueNames = new HashSet&lt;&gt;();\r\n    Map&lt;String, String&gt; phoneBook = people\r\n                      .stream()\r\n                      .filter(person -&gt; person != null &amp;&amp; !uniqueNames.add(person.getName()))\r\n                      .collect(toMap(Person::getName, Person::getAddress));\r\n\r\nHope this helps anyone having the same problem !","title":"Ignore duplicates when producing map using streams","body":"<p>I have encountered such a problem when grouping object, i always resolved them by a simple way: perform a custom filter using a java.util.Set to remove duplicate object with whatever attribute of your choice as bellow</p>\n\n<pre><code>Set&lt;String&gt; uniqueNames = new HashSet&lt;&gt;();\nMap&lt;String, String&gt; phoneBook = people\n                  .stream()\n                  .filter(person -&gt; person != null &amp;&amp; !uniqueNames.add(person.getName()))\n                  .collect(toMap(Person::getName, Person::getAddress));\n</code></pre>\n\n<p>Hope this helps anyone having the same problem !</p>\n"},{"tags":[],"owner":{"account_id":1829075,"reputation":1414,"user_id":2502267,"accept_rate":0,"display_name":"fjkjava"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1568064100,"creation_date":1568064100,"answer_id":57861353,"question_id":32312876,"body_markdown":"For grouping by Objects\r\n\r\n    Map&lt;Integer, Data&gt; dataMap = dataList.stream().collect(Collectors.toMap(Data::getId, data-&gt; data, (data1, data2)-&gt; {LOG.info(&quot;Duplicate Group For :&quot; + data2.getId());return data1;}));","title":"Ignore duplicates when producing map using streams","body":"<p>For grouping by Objects</p>\n\n<pre><code>Map&lt;Integer, Data&gt; dataMap = dataList.stream().collect(Collectors.toMap(Data::getId, data-&gt; data, (data1, data2)-&gt; {LOG.info(\"Duplicate Group For :\" + data2.getId());return data1;}));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":956228,"reputation":1898,"user_id":981477,"accept_rate":76,"display_name":"Andrew"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620418108,"creation_date":1576630289,"answer_id":59384109,"question_id":32312876,"body_markdown":"For anyone else getting this issue but without duplicate keys in the map being streamed, **make sure your keyMapper function isn&#39;t returning null values**.\r\n\r\nIt&#39;s very annoying to track this down because when it processes the second element, the Exception will say &quot;Duplicate key 1&quot; when 1 is actually the **value** of the entry instead of the key.\r\n\r\nIn my case, my keyMapper function tried to look up values in a different map, but due to a typo in the strings was returning null values.\r\n\r\n    final Map&lt;String, String&gt; doop = new HashMap&lt;&gt;();\r\n    doop.put(&quot;a&quot;, &quot;1&quot;);\r\n    doop.put(&quot;b&quot;, &quot;2&quot;);\r\n\r\n    final Map&lt;String, String&gt; lookup = new HashMap&lt;&gt;();\r\n    doop.put(&quot;c&quot;, &quot;e&quot;);\r\n    doop.put(&quot;d&quot;, &quot;f&quot;);\r\n\r\n    doop.entrySet().stream().collect(Collectors.toMap(e -&gt; lookup.get(e.getKey()), e -&gt; e.getValue()));\r\n","title":"Ignore duplicates when producing map using streams","body":"<p>For anyone else getting this issue but without duplicate keys in the map being streamed, <strong>make sure your keyMapper function isn't returning null values</strong>.</p>\n<p>It's very annoying to track this down because when it processes the second element, the Exception will say &quot;Duplicate key 1&quot; when 1 is actually the <strong>value</strong> of the entry instead of the key.</p>\n<p>In my case, my keyMapper function tried to look up values in a different map, but due to a typo in the strings was returning null values.</p>\n<pre><code>final Map&lt;String, String&gt; doop = new HashMap&lt;&gt;();\ndoop.put(&quot;a&quot;, &quot;1&quot;);\ndoop.put(&quot;b&quot;, &quot;2&quot;);\n\nfinal Map&lt;String, String&gt; lookup = new HashMap&lt;&gt;();\ndoop.put(&quot;c&quot;, &quot;e&quot;);\ndoop.put(&quot;d&quot;, &quot;f&quot;);\n\ndoop.entrySet().stream().collect(Collectors.toMap(e -&gt; lookup.get(e.getKey()), e -&gt; e.getValue()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620426968,"creation_date":1620421093,"answer_id":67441603,"question_id":32312876,"body_markdown":"Feels like `toMap` working often but not always is a dark underbelly of the java Streams.  Like they should have called it `toUniqueMap` or something...\r\n\r\nThe easiest way is to use `Collectors.groupingBy` [instead of][1] `Collectors.toMap`.\r\n\r\nIt will return a `List` type output by default, but collision problem is gone, and that maybe what you want in the presence of multiples anyway.\r\n\r\n      Map&lt;String, List&lt;Person&gt;&gt; phoneBook = people.stream()\r\n              .collect(groupingBy((x) -&gt; x.name));\r\n  \r\nIf  a `Set` type collection of the addresses associated with a particular name, `groupingBy` can do that [as well][2]: \r\n\r\n    Map&lt;String, Set&lt;String&gt;&gt; phoneBook = people.stream()\r\n              .collect(groupingBy((x) -&gt; x.name, mapping((x) -&gt; x.address, toSet())));\r\n\r\nThe other way is to &quot;start&quot; with either a Hash or a Set...And carefully track through to make sure the keys never duplicate in the output stream.  Ugh.  Here&#39;s an [example][3] that happens to survive this...sometimes...\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/45231743/32453\r\n  [2]: https://stackoverflow.com/a/39882789/32453\r\n  [3]: https://stackoverflow.com/q/33606014/32453","title":"Ignore duplicates when producing map using streams","body":"<p>Feels like <code>toMap</code> working often but not always is a dark underbelly of the java Streams.  Like they should have called it <code>toUniqueMap</code> or something...</p>\n<p>The easiest way is to use <code>Collectors.groupingBy</code> <a href=\"https://stackoverflow.com/a/45231743/32453\">instead of</a> <code>Collectors.toMap</code>.</p>\n<p>It will return a <code>List</code> type output by default, but collision problem is gone, and that maybe what you want in the presence of multiples anyway.</p>\n<pre><code>  Map&lt;String, List&lt;Person&gt;&gt; phoneBook = people.stream()\n          .collect(groupingBy((x) -&gt; x.name));\n</code></pre>\n<p>If  a <code>Set</code> type collection of the addresses associated with a particular name, <code>groupingBy</code> can do that <a href=\"https://stackoverflow.com/a/39882789/32453\">as well</a>:</p>\n<pre><code>Map&lt;String, Set&lt;String&gt;&gt; phoneBook = people.stream()\n          .collect(groupingBy((x) -&gt; x.name, mapping((x) -&gt; x.address, toSet())));\n</code></pre>\n<p>The other way is to &quot;start&quot; with either a Hash or a Set...And carefully track through to make sure the keys never duplicate in the output stream.  Ugh.  Here's an <a href=\"https://stackoverflow.com/q/33606014/32453\">example</a> that happens to survive this...sometimes...</p>\n"},{"tags":[],"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620427465,"creation_date":1620422729,"answer_id":67441847,"question_id":32312876,"body_markdown":"For completeness, here&#39;s how to &quot;reduce&quot; duplicates down to just one.\r\n\r\nIf you are OK with the last:\r\n\r\n      Map&lt;String, Person&gt; phoneBook = people.stream()\r\n              .collect(groupingBy(x -&gt; x.name, reducing(null, identity(), (first, last) -&gt; last)));\r\n\r\nIf you want only the first:\r\n\r\n      Map&lt;String, Person&gt; phoneBook = people.stream()\r\n              .collect(groupingBy(x -&gt; x.name, reducing(null, identity(), (first, last) -&gt; first != null ? first : last)));\r\n\r\nAnd if you want last but &quot;address as String&quot; (doesn&#39;t use the `identity()` as a parameter).\r\n\r\n      Map&lt;String, String&gt; phoneBook = people.stream()\r\n              .collect(groupingBy(x -&gt; x.name, reducing(null, x -&gt; x.address, (first, last) -&gt; last)));\r\n\r\n[source][1]\r\n\r\nSo in essence `groupingBy` paired with a `reducing` collector starts to behave very similarly to the `toMap` collector, having something similar to its mergeFunction...and identical end result...\r\n\r\n  [1]: https://stackoverflow.com/questions/34495816/stream-groupingby-reducing-to-first-element-of-list#comment110097397_48123966","title":"Ignore duplicates when producing map using streams","body":"<p>For completeness, here's how to &quot;reduce&quot; duplicates down to just one.</p>\n<p>If you are OK with the last:</p>\n<pre><code>  Map&lt;String, Person&gt; phoneBook = people.stream()\n          .collect(groupingBy(x -&gt; x.name, reducing(null, identity(), (first, last) -&gt; last)));\n</code></pre>\n<p>If you want only the first:</p>\n<pre><code>  Map&lt;String, Person&gt; phoneBook = people.stream()\n          .collect(groupingBy(x -&gt; x.name, reducing(null, identity(), (first, last) -&gt; first != null ? first : last)));\n</code></pre>\n<p>And if you want last but &quot;address as String&quot; (doesn't use the <code>identity()</code> as a parameter).</p>\n<pre><code>  Map&lt;String, String&gt; phoneBook = people.stream()\n          .collect(groupingBy(x -&gt; x.name, reducing(null, x -&gt; x.address, (first, last) -&gt; last)));\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/34495816/stream-groupingby-reducing-to-first-element-of-list#comment110097397_48123966\">source</a></p>\n<p>So in essence <code>groupingBy</code> paired with a <code>reducing</code> collector starts to behave very similarly to the <code>toMap</code> collector, having something similar to its mergeFunction...and identical end result...</p>\n"},{"tags":[],"owner":{"account_id":14335067,"reputation":722,"user_id":10354810,"display_name":"Jaja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647516359,"creation_date":1647516359,"answer_id":71511513,"question_id":32312876,"body_markdown":"One can use lambda function: the comparison is done on key string from key(...)\r\n\r\n    \r\n\r\n    List&lt;Blog&gt; blogsNoDuplicates = blogs.stream()\r\n                .collect(toMap(b-&gt;key(b), b-&gt;b, (b1, b2) -&gt; b1))  // b.getAuthor() &lt;~&gt;key(b) as Key criteria for Duplicate elimination\r\n                .values().stream().collect(Collectors.toList());\r\n\r\n    static String key(Blog b){\r\n        return b.getTitle()+b.getAuthor(); // make key as criteria of distinction\r\n    }","title":"Ignore duplicates when producing map using streams","body":"<p>One can use lambda function: the comparison is done on key string from key(...)</p>\n<pre><code>List&lt;Blog&gt; blogsNoDuplicates = blogs.stream()\n            .collect(toMap(b-&gt;key(b), b-&gt;b, (b1, b2) -&gt; b1))  // b.getAuthor() &lt;~&gt;key(b) as Key criteria for Duplicate elimination\n            .values().stream().collect(Collectors.toList());\n\nstatic String key(Blog b){\n    return b.getTitle()+b.getAuthor(); // make key as criteria of distinction\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20532870,"reputation":1,"user_id":15069678,"display_name":"ShaniW"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1647777223,"creation_date":1647777223,"answer_id":71546495,"question_id":32312876,"body_markdown":"I had the same case and found that the simplest solution (Assuming you want to just override the map value for duplicate key) is:\r\n\r\n    Map&lt;String, String&gt; phoneBook = \r\n           people.stream()\r\n               .collect(Collectors.toMap(Person::getName, \r\n                                      Person::getAddress, \r\n                                            (key1, key2)-&gt; key2));","title":"Ignore duplicates when producing map using streams","body":"<p>I had the same case and found that the simplest solution (Assuming you want to just override the map value for duplicate key) is:</p>\n<pre><code>Map&lt;String, String&gt; phoneBook = \n       people.stream()\n           .collect(Collectors.toMap(Person::getName, \n                                  Person::getAddress, \n                                        (key1, key2)-&gt; key2));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10809524,"reputation":601,"user_id":7950525,"display_name":"Thimira Pathirana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678117838,"creation_date":1678117388,"answer_id":75652883,"question_id":32312876,"body_markdown":"I got the same issue. A map stores key, value pairs and does not allow duplicate keys. If individual objects have duplicate names, you will get the error\r\n&gt; java.lang.IllegalStateException: Duplicate key\r\n\r\nEx: \r\n\r\n    Map&lt;String, String&gt; stringMap;\r\n            List&lt;Person&gt; personList = new ArrayList&lt;&gt;();\r\n            personList.add(new Person(1, &quot;Mark&quot;, &quot;Menlo Park&quot;));\r\n            personList.add(new Person(2, &quot;Sundar&quot;, &quot;1600 Amphitheatre Pkwy&quot;));\r\n            personList.add(new Person(3, &quot;Sundar&quot;, &quot;232 Santa Margarita Ave&quot;));\r\n            personList.add(new Person(4, &quot;Steve&quot;, &quot;Los Altos&quot;));\r\n    \r\n            stringMap = personList.stream().distinct().collect(Collectors.toMap(Person::getName, Person::getAddress));\r\n\r\n[![enter image description here][1]][1]\r\n\r\nTo resolve it, we need to use a different method with an additional parameter, the **mergeFunction**.\r\n\r\n        phoneBook = personList.stream().distinct().collect(Collectors.toMap(Person::getName, Person::getAddress\r\n                        , (existing, replacement) -&gt; existing));\r\n    \r\n    System.out.println(&quot;Map object output :&quot; + stringMap);\r\n\r\n\r\n&gt; Output: **Map object output :{Steve=Los Altos, Mark=Menlo Park, Sundar=1600 Amphitheatre Pkwy}**\r\n\r\nNOTE: When you change `(existing, replacement) -&gt; replacement)`. the old key is replaced with the new value.\r\nAnd if you need all addresses to store the same key check this \r\n[Multimap][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JOmn1.png\r\n  [2]: https://stackoverflow.com/a/75644186/7950525","title":"Ignore duplicates when producing map using streams","body":"<p>I got the same issue. A map stores key, value pairs and does not allow duplicate keys. If individual objects have duplicate names, you will get the error</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Duplicate key</p>\n</blockquote>\n<p>Ex:</p>\n<pre><code>Map&lt;String, String&gt; stringMap;\n        List&lt;Person&gt; personList = new ArrayList&lt;&gt;();\n        personList.add(new Person(1, &quot;Mark&quot;, &quot;Menlo Park&quot;));\n        personList.add(new Person(2, &quot;Sundar&quot;, &quot;1600 Amphitheatre Pkwy&quot;));\n        personList.add(new Person(3, &quot;Sundar&quot;, &quot;232 Santa Margarita Ave&quot;));\n        personList.add(new Person(4, &quot;Steve&quot;, &quot;Los Altos&quot;));\n\n        stringMap = personList.stream().distinct().collect(Collectors.toMap(Person::getName, Person::getAddress));\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/JOmn1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JOmn1.png\" alt=\"enter image description here\" /></a></p>\n<p>To resolve it, we need to use a different method with an additional parameter, the <strong>mergeFunction</strong>.</p>\n<pre><code>    phoneBook = personList.stream().distinct().collect(Collectors.toMap(Person::getName, Person::getAddress\n                    , (existing, replacement) -&gt; existing));\n\nSystem.out.println(&quot;Map object output :&quot; + stringMap);\n</code></pre>\n<blockquote>\n<p>Output: <strong>Map object output :{Steve=Los Altos, Mark=Menlo Park, Sundar=1600 Amphitheatre Pkwy}</strong></p>\n</blockquote>\n<p>NOTE: When you change <code>(existing, replacement) -&gt; replacement)</code>. the old key is replaced with the new value.\nAnd if you need all addresses to store the same key check this\n<a href=\"https://stackoverflow.com/a/75644186/7950525\">Multimap</a></p>\n"},{"tags":[],"owner":{"account_id":17722198,"reputation":63,"user_id":12866947,"display_name":"Pushpendra Kushvaha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695394828,"creation_date":1695394828,"answer_id":77158757,"question_id":32312876,"body_markdown":"If someone is looking get `Map&lt;String, List&lt;Person&gt;&gt;` then follow below steps:\r\n\r\n    Map&lt;String, List&lt;Person&gt;&gt; phoneBook = people\r\n                .stream()\r\n                .collect(Collectors.toMap(\r\n                        Person::getName,\r\n                        Function.identity(),\r\n                        (first, second) -&gt; first);\r\n\r\n**Function.identity():** is a convenient way to indicate that the values in the map should be the Person objects themselves without any modification.\r\n\r\n**(first, second) -&gt; first:** This is a merge function used to handle situations where there are duplicate keys in the stream. If two Person objects have the same name (a duplicate key), this function specifies that the value associated with that key should be the first Person encountered (address1) among the duplicates, effectively preserving the first occurrence and discarding the duplicates.\r\n\r\n***Use below two case as per you need:***\r\n\r\n - If we use `((first, second) -&gt; first)` specifies what to do in case\r\n   of duplicate keys it chooses the first encountered Person.\r\n \r\n - If we use `((first, second) -&gt; second)` specifies what to do in case \r\n   of duplicate keys it chooses the last encountered Person.","title":"Ignore duplicates when producing map using streams","body":"<p>If someone is looking get <code>Map&lt;String, List&lt;Person&gt;&gt;</code> then follow below steps:</p>\n<pre><code>Map&lt;String, List&lt;Person&gt;&gt; phoneBook = people\n            .stream()\n            .collect(Collectors.toMap(\n                    Person::getName,\n                    Function.identity(),\n                    (first, second) -&gt; first);\n</code></pre>\n<p><strong>Function.identity():</strong> is a convenient way to indicate that the values in the map should be the Person objects themselves without any modification.</p>\n<p><strong>(first, second) -&gt; first:</strong> This is a merge function used to handle situations where there are duplicate keys in the stream. If two Person objects have the same name (a duplicate key), this function specifies that the value associated with that key should be the first Person encountered (address1) among the duplicates, effectively preserving the first occurrence and discarding the duplicates.</p>\n<p><em><strong>Use below two case as per you need:</strong></em></p>\n<ul>\n<li><p>If we use <code>((first, second) -&gt; first)</code> specifies what to do in case\nof duplicate keys it chooses the first encountered Person.</p>\n</li>\n<li><p>If we use <code>((first, second) -&gt; second)</code> specifies what to do in case\nof duplicate keys it chooses the last encountered Person.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":1315495,"reputation":17293,"user_id":1262477,"accept_rate":74,"display_name":"Patan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":253440,"favorite_count":0,"down_vote_count":0,"up_vote_count":394,"accepted_answer_id":32313069,"answer_count":13,"score":394,"last_activity_date":1695394828,"creation_date":1441028985,"question_id":32312876,"body_markdown":"    Map&lt;String, String&gt; phoneBook = people.stream()\r\n                                          .collect(toMap(Person::getName,\r\n                                                         Person::getAddress));\r\n\r\nI get `java.lang.IllegalStateException: Duplicate key` when a duplicated element is found. \r\n\r\nIs it possible to ignore such exception on adding values to the map?\r\n\r\nWhen there is duplicate it simply should continue by ignoring that duplicate key.","title":"Ignore duplicates when producing map using streams","body":"<pre><code>Map&lt;String, String&gt; phoneBook = people.stream()\n                                      .collect(toMap(Person::getName,\n                                                     Person::getAddress));\n</code></pre>\n\n<p>I get <code>java.lang.IllegalStateException: Duplicate key</code> when a duplicated element is found. </p>\n\n<p>Is it possible to ignore such exception on adding values to the map?</p>\n\n<p>When there is duplicate it simply should continue by ignoring that duplicate key.</p>\n"},{"tags":["java","html","unit-testing","thymeleaf","jsoup"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1695394920,"post_id":77158696,"comment_id":136023068,"body_markdown":"Unless your `white-space` is set to `pre`, don&#39;t use &quot;\\n&quot; in your HTML. If you want a line-feed, use `&lt;br/&gt;`.","body":"Unless your <code>white-space</code> is set to <code>pre</code>, don&#39;t use &quot;\\n&quot; in your HTML. If you want a line-feed, use <code>&lt;br&#47;&gt;</code>."},{"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"score":0,"creation_date":1695395078,"post_id":77158696,"comment_id":136023107,"body_markdown":"@Mr.Polywhirl The actual html I&#39;m outputting does not have the newline tags. This was just a quick and dirty example.","body":"@Mr.Polywhirl The actual html I&#39;m outputting does not have the newline tags. This was just a quick and dirty example."}],"owner":{"account_id":2090213,"reputation":1431,"user_id":1860222,"accept_rate":52,"display_name":"pbuchheit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695395134,"answer_count":0,"score":0,"last_activity_date":1695394774,"creation_date":1695394439,"question_id":77158696,"body_markdown":"I&#39;m working on a java function that generates some html code for an email using a thymeleaf template. I then want to unit test the resulting html string using JSoup. The problem I&#39;m running into is that JSoup is picky about closing tags. While the browser can handle `&lt;p&gt;` blocks without a closing tag, JSoup requires the `&lt;/p&gt;` to correctly extract the element text.\r\n\r\nSo the obvious solution then would be to just make sure to close the `&lt;p&gt;` tag right? The problem is, closing the `&lt;p&gt;` is adding an extra line break. I want to display:\r\n\r\n&gt; &lt;p id=&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;\r\n&gt; &gt;&lt;strong&gt;Foo&lt;/strong&gt;&lt;br/&gt;\r\n&gt;                                                 &lt;span id=&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;&gt;&lt;strong&gt;Bar&lt;/strong&gt;&lt;/span&gt;\r\n\r\n&lt;br/&gt;\r\n\r\n\r\nbut if I close the paragraph I get the following instead: \r\n\r\n&gt; &lt;p id=&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot; &gt;&lt;strong&gt;Foo\r\n&gt; 2&lt;/strong&gt;&lt;/p&gt;\r\n&gt;                                                 &lt;span id=&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;&gt;&lt;strong&gt;Bar\r\n&gt; 2&lt;/strong&gt;&lt;/span&gt;\r\n\r\n\r\n \r\n\r\nBelow is an example of my test function. The first test will pass but the html will have the unwanted extra line break. The second function will display correctly but the test will fail. I&#39;m at a bit off a loss for how to handle this. How do I structure my html to produce the desired output while allowing JSoup to correctly parse when testing?\r\n\r\n```java\r\n@Test\r\npublic void testJsoupParsePClosed() {\r\n    // Test JSoup parsing with an explicitly closed paragraph tag\r\n    Document testDoc = Jsoup.parse(\r\n        &quot;&lt;html&gt; &lt;p id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot; &gt;&lt;strong&gt;A test  academic message&lt;/strong&gt;&lt;/p&gt;\\n&quot; +\r\n            &quot;&lt;span id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot;&gt;&lt;strong&gt;From: X Yz &lt;a href=\\&quot;mailto:xyz123@bucknell.edu?subject=Re:%20A%20test%20academic%20message\\&quot;&gt;&amp;lt;xyz123@bucknell.edu&amp;gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\\n&quot; +\r\n            &quot;&lt;div&gt;\\n&quot; +\r\n            &quot;\\n&quot; +\r\n            &quot;&lt;span&gt;This is a test of an academic message&lt;/span&gt;\\n&quot; +\r\n            &quot;&lt;/div&gt; &lt;/html&gt;&quot;);\r\n\r\n    String sp1 = testDoc.selectFirst(&quot;p#272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;).wholeText();\r\n    System.out.println(&quot;sp1 text: &quot; + sp1);\r\n    assertThat(sp1).isEqualTo(&quot;A test  academic message&quot;);\r\n}\r\n```\r\n\r\n```java\r\n@Test\r\npublic void testJsoupParsePOpen() {\r\n    // test JSoup parsing with an unclosed paragraph tag\r\n    Document testDoc2 = Jsoup.parse(\r\n        &quot;&lt;html&gt; &lt;p id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot; &gt;&lt;strong&gt;A test  academic message&lt;/strong&gt;&lt;br /&gt;\\n&quot; +\r\n            &quot;&lt;span id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot;&gt;&lt;strong&gt;From: X Yz &lt;a href=\\&quot;mailto:xyz123@bucknell.edu?subject=Re:%20A%20test%20academic%20message\\&quot;&gt;&amp;lt;xyz123@bucknell.edu&amp;gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\\n&quot; +\r\n            &quot;&lt;div&gt;\\n&quot; +\r\n            &quot;\\n&quot; +\r\n            &quot;&lt;span&gt;This is a test of an academic message&lt;/span&gt;\\n&quot; +\r\n            &quot;&lt;/div&gt; &lt;/html&gt;&quot;);\r\n\r\n    String sp2 = testDoc2.selectFirst(&quot;p#272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;).wholeText();\r\n    System.out.println(&quot;sp2 text: &quot; + sp2);\r\n    assertThat(sp2).isEqualTo(&quot;A test  academic message&quot;);\r\n}\r\n```\r\n","title":"Closing an HTML &lt;p&gt; tag without the added line break","body":"<p>I'm working on a java function that generates some html code for an email using a thymeleaf template. I then want to unit test the resulting html string using JSoup. The problem I'm running into is that JSoup is picky about closing tags. While the browser can handle <code>&lt;p&gt;</code> blocks without a closing tag, JSoup requires the <code>&lt;/p&gt;</code> to correctly extract the element text.</p>\n<p>So the obvious solution then would be to just make sure to close the <code>&lt;p&gt;</code> tag right? The problem is, closing the <code>&lt;p&gt;</code> is adding an extra line break. I want to display:</p>\n<blockquote>\n<strong>Foo</strong><br/>\n                                                <strong>Bar</strong>\n</blockquote>\n<br/>\n<p>but if I close the paragraph I get the following instead:</p>\n<blockquote>\n<strong>Foo\n2</strong></p>\n                                                <strong>Bar\n2</strong>\n</blockquote>\n<p>Below is an example of my test function. The first test will pass but the html will have the unwanted extra line break. The second function will display correctly but the test will fail. I'm at a bit off a loss for how to handle this. How do I structure my html to produce the desired output while allowing JSoup to correctly parse when testing?</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testJsoupParsePClosed() {\n    // Test JSoup parsing with an explicitly closed paragraph tag\n    Document testDoc = Jsoup.parse(\n        &quot;&lt;html&gt; &lt;p id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot; &gt;&lt;strong&gt;A test  academic message&lt;/strong&gt;&lt;/p&gt;\\n&quot; +\n            &quot;&lt;span id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot;&gt;&lt;strong&gt;From: X Yz &lt;a href=\\&quot;mailto:xyz123@bucknell.edu?subject=Re:%20A%20test%20academic%20message\\&quot;&gt;&amp;lt;xyz123@bucknell.edu&amp;gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\\n&quot; +\n            &quot;&lt;div&gt;\\n&quot; +\n            &quot;\\n&quot; +\n            &quot;&lt;span&gt;This is a test of an academic message&lt;/span&gt;\\n&quot; +\n            &quot;&lt;/div&gt; &lt;/html&gt;&quot;);\n\n    String sp1 = testDoc.selectFirst(&quot;p#272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;).wholeText();\n    System.out.println(&quot;sp1 text: &quot; + sp1);\n    assertThat(sp1).isEqualTo(&quot;A test  academic message&quot;);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testJsoupParsePOpen() {\n    // test JSoup parsing with an unclosed paragraph tag\n    Document testDoc2 = Jsoup.parse(\n        &quot;&lt;html&gt; &lt;p id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot; &gt;&lt;strong&gt;A test  academic message&lt;/strong&gt;&lt;br /&gt;\\n&quot; +\n            &quot;&lt;span id=\\&quot;272_6e8c478e-aabe-4789-ab22-8092e19c2dde\\&quot;&gt;&lt;strong&gt;From: X Yz &lt;a href=\\&quot;mailto:xyz123@bucknell.edu?subject=Re:%20A%20test%20academic%20message\\&quot;&gt;&amp;lt;xyz123@bucknell.edu&amp;gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br /&gt;\\n&quot; +\n            &quot;&lt;div&gt;\\n&quot; +\n            &quot;\\n&quot; +\n            &quot;&lt;span&gt;This is a test of an academic message&lt;/span&gt;\\n&quot; +\n            &quot;&lt;/div&gt; &lt;/html&gt;&quot;);\n\n    String sp2 = testDoc2.selectFirst(&quot;p#272_6e8c478e-aabe-4789-ab22-8092e19c2dde&quot;).wholeText();\n    System.out.println(&quot;sp2 text: &quot; + sp2);\n    assertThat(sp2).isEqualTo(&quot;A test  academic message&quot;);\n}\n</code></pre>\n"},{"tags":["java","ssl","soap","https","wsdl"],"comments":[{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695328872,"post_id":77153220,"comment_id":136013649,"body_markdown":"Hi, to understand your problem you need to post a minimum reproducible code sample so we can reproduce your problem and give you a solution.","body":"Hi, to understand your problem you need to post a minimum reproducible code sample so we can reproduce your problem and give you a solution."},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1695394136,"post_id":77153220,"comment_id":136022884,"body_markdown":"I added the code to help to the text explanation","body":"I added the code to help to the text explanation"},{"owner":{"account_id":5584931,"reputation":2048,"user_id":4425643,"accept_rate":64,"display_name":"CausingUnderflowsEverywhere"},"score":0,"creation_date":1695422904,"post_id":77153220,"comment_id":136027405,"body_markdown":"webServiceProduct = salesWSService.getSalesWSPort();\n\nThis should be webServiceSale = salesWSService.getSalesWSPort(); ?","body":"webServiceProduct = salesWSService.getSalesWSPort();  This should be webServiceSale = salesWSService.getSalesWSPort(); ?"},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1695469997,"post_id":77153220,"comment_id":136030545,"body_markdown":"A correct implementation of an [X509ExtendedTrustManager](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/X509ExtendedTrustManager.html) can select the certificate/key alias in the keystore for each HTTPS connection.","body":"A correct implementation of an <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/javax/net/ssl/X509ExtendedTrustManager.html\" rel=\"nofollow noreferrer\">X509ExtendedTrustManager</a> can select the certificate/key alias in the keystore for each HTTPS connection."},{"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"score":0,"creation_date":1695670562,"post_id":77153220,"comment_id":136052929,"body_markdown":"I checked the link https://stackoverflow.com/questions/908903/scope-of-the-java-system-properties about the scope of Java system properties and there&#39;s a reply where it says that system properties are per virtual machine. I uploaded the java web application on two wildfly&#39;s with different ports on same server. The results were that java system properties weren&#39;t shared so that&#39;s the goal I wanted to come","body":"I checked the link <a href=\"https://stackoverflow.com/questions/908903/scope-of-the-java-system-properties\" title=\"scope of the java system properties\">stackoverflow.com/questions/908903/&hellip;</a> about the scope of Java system properties and there&#39;s a reply where it says that system properties are per virtual machine. I uploaded the java web application on two wildfly&#39;s with different ports on same server. The results were that java system properties weren&#39;t shared so that&#39;s the goal I wanted to come"}],"owner":{"account_id":4471856,"reputation":315,"user_id":3637971,"accept_rate":14,"display_name":"user3637971"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695394499,"creation_date":1695325453,"question_id":77153220,"body_markdown":"I got a java web application and this has two https soap web service clients:\r\n\r\n    https://product.com?wsdl\r\n    https://sales.com?wsdl\r\n\r\nEach webservice has its own java class such as Product.java and Sales.java. Each class has its own implementation about how to invoke the web service entering the information like trustStore, trustStorePassword, keyStore, keyStorePassword, keyStoreType.\r\nI&#39;m understanding that these information are global for java. The classes are instaced using singleton. The thing is when the application invokes https://product.com?wsdl, it works. Then the app invokes https://sales.com?wsdl, it works. After that, the app invokes https://product.com?wsdl, it fails because the objects were instanced in singleton. Besides, the trustore and keystore information were not refreshed according to specific webservice. So in order to make it works is adding the code to refresh the trustore and keystore information before invokation. Other way is instacing without singleton but I think it&#39;s not a good idea because it can grow the ram memory.\r\n\r\nQuestion:\r\n1. Is it necessary to refresh the trustore and keystore information before invoking to a specefic webservice?\r\n2. Are there inconvenients if I don&#39;t use singleton for instancing?\r\n\r\nAdded:\r\n\r\nProduct.java\r\n\r\n    public class Products {\r\n    \tprivate static Products instance = null;\r\n    \tpublic ProductsWS webServiceProduct = null;\r\n    \t...\r\n    \t...\r\n    \r\n    \tprotected Products() {\r\n    \t\t\r\n    \t\ttry{\r\n        \t\tKeyManager[] keyManager = this.getKeyManagers(productKeyStore, productKeyStorePassword);\r\n    \t\t\tTrustManager[] trustManager = this.getTrustManagers(productTrustStore, productTrustStorePassword);\r\n    \t\t\tSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \t\t\tsslContext.init(keyManager, trustManager, null);\r\n    \t\t\tHostnameVerifier hostnameVerifier = new HostnameVerifier() {\r\n    \t\t\t\tpublic boolean verify(String hostname, SSLSession session) { return true; }\r\n    \t\t\t};\r\n    \t\t\tHttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);\r\n    \t\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\r\n                            \r\n    \t\t\tQName qname = new QName(&quot;http://product.net/&quot;, &quot;ProductsWSService&quot;);\r\n    \t\t\tProductsWSService productsWSService = new ProductsWSService(new URL(productUrl),qname);\r\n    \t\t\twebServiceProduct = productsWSService.getProductsWSPort();\r\n    \t\t\tSystem.out.println(&quot;Connection succeded&quot;);\r\n    \t\t}catch(Exception ex){\r\n    \t\t\tSystem.out.println(&quot;Error&quot;);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static Products getInstance(){\r\n    \t\tif(instance == null){\r\n                instance = new Products();\r\n    \t\t}\r\n    \t\treturn instance;\r\n                    \r\n    \t}\r\n\r\n\t\tpublic String getProductName(int number) {\r\n\t\t\tif (number==1)\r\n\t\t\t  return &quot;Radio&quot;;\r\n\t\t\telse\r\n\t\t\t  return &quot;Television&quot;;\r\n\t\t}\r\n    \t\r\n    }\r\n\r\nSales.java\r\n\r\n    public class Sales {\r\n    \tprivate static Sales instance = null;\r\n    \tpublic SalesWS webServiceSale = null;\r\n    \t...\r\n    \t...\r\n    \r\n    \tprotected Sales() {\r\n    \t\t\r\n    \t\ttry{\r\n        \t\tKeyManager[] keyManager = this.getKeyManagers(saleKeyStore, saleKeyStorePassword);\r\n    \t\t\tTrustManager[] trustManager = this.getTrustManagers(saleTrustStore, saleTrustStorePassword);\r\n    \t\t\tSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    \t\t\tsslContext.init(keyManager, trustManager, null);\r\n    \t\t\tHostnameVerifier hostnameVerifier = new HostnameVerifier() {\r\n    \t\t\t\tpublic boolean verify(String hostname, SSLSession session) { return true; }\r\n    \t\t\t};\r\n    \t\t\tHttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);\r\n\t\t\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\r\n                            \r\n    \t\t\tQName qname = new QName(&quot;http://sale.net/&quot;, &quot;SalesWSService&quot;);\r\n    \t\t\tSalesWSService salesWSService = new SalesWSService(new URL(productUrl),qname);\r\n    \t\t\twebServiceProduct = salesWSService.getSalesWSPort();\r\n    \t\t\tSystem.out.println(&quot;Connection succeded&quot;);\r\n    \t\t}catch(Exception ex){\r\n    \t\t\tSystem.out.println(&quot;Error&quot;);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic static Sales getInstance(){\r\n    \t\tif(instance == null){\r\n                instance = new Sales();\r\n    \t\t}\r\n    \t\treturn instance;\r\n                    \r\n    \t}\r\n\r\n\t\tpublic String getSaleDate(int number) {\r\n\t\t\tif (number==1)\r\n\t\t\t  return &quot;2023-01-01&quot;;\r\n\t\t\telse\r\n\t\t\t  return &quot;2023-02-01&quot;;\r\n\t\t}\r\n    \t\r\n    }\r\n\r\n\r\nClient.java\r\n\r\n    public class Client {\r\n    \r\n    \tprotected Client() {\t}\r\n    \r\n    \tpublic static void main(String args[]){\r\n    \t\tProducts clientProduct = Products.getInstance();\r\n\t\t\tString name = clientProduct.getProductName(1); // It works\r\n    \t\tSales saleProduct = Sales.getInstance();\r\n\t\t\tString date = saleProduct.getSaleDate(1); // It works\r\n\t\t\tname = clientProduct.getProductName(1); // It fails because the objects were instanced in singleton. \r\n\t\t\t//Besides, the trustore and keystore information were not refreshed according to specific webservice\r\n    \t}\r\n    \r\n    }","title":"How to avoid refresh ssl information for multiple https soap web services client in Java?","body":"<p>I got a java web application and this has two https soap web service clients:</p>\n<pre><code>https://product.com?wsdl\nhttps://sales.com?wsdl\n</code></pre>\n<p>Each webservice has its own java class such as Product.java and Sales.java. Each class has its own implementation about how to invoke the web service entering the information like trustStore, trustStorePassword, keyStore, keyStorePassword, keyStoreType.\nI'm understanding that these information are global for java. The classes are instaced using singleton. The thing is when the application invokes <a href=\"https://product.com?wsdl\" rel=\"nofollow noreferrer\">https://product.com?wsdl</a>, it works. Then the app invokes <a href=\"https://sales.com?wsdl\" rel=\"nofollow noreferrer\">https://sales.com?wsdl</a>, it works. After that, the app invokes <a href=\"https://product.com?wsdl\" rel=\"nofollow noreferrer\">https://product.com?wsdl</a>, it fails because the objects were instanced in singleton. Besides, the trustore and keystore information were not refreshed according to specific webservice. So in order to make it works is adding the code to refresh the trustore and keystore information before invokation. Other way is instacing without singleton but I think it's not a good idea because it can grow the ram memory.</p>\n<p>Question:</p>\n<ol>\n<li>Is it necessary to refresh the trustore and keystore information before invoking to a specefic webservice?</li>\n<li>Are there inconvenients if I don't use singleton for instancing?</li>\n</ol>\n<p>Added:</p>\n<p>Product.java</p>\n<pre><code>public class Products {\n    private static Products instance = null;\n    public ProductsWS webServiceProduct = null;\n    ...\n    ...\n\n    protected Products() {\n        \n        try{\n            KeyManager[] keyManager = this.getKeyManagers(productKeyStore, productKeyStorePassword);\n            TrustManager[] trustManager = this.getTrustManagers(productTrustStore, productTrustStorePassword);\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n            sslContext.init(keyManager, trustManager, null);\n            HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n                public boolean verify(String hostname, SSLSession session) { return true; }\n            };\n            HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);\n            HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\n                        \n            QName qname = new QName(&quot;http://product.net/&quot;, &quot;ProductsWSService&quot;);\n            ProductsWSService productsWSService = new ProductsWSService(new URL(productUrl),qname);\n            webServiceProduct = productsWSService.getProductsWSPort();\n            System.out.println(&quot;Connection succeded&quot;);\n        }catch(Exception ex){\n            System.out.println(&quot;Error&quot;);\n        }\n    }\n    \n    public static Products getInstance(){\n        if(instance == null){\n            instance = new Products();\n        }\n        return instance;\n                \n    }\n\n    public String getProductName(int number) {\n        if (number==1)\n          return &quot;Radio&quot;;\n        else\n          return &quot;Television&quot;;\n    }\n    \n}\n</code></pre>\n<p>Sales.java</p>\n<pre><code>public class Sales {\n    private static Sales instance = null;\n    public SalesWS webServiceSale = null;\n    ...\n    ...\n\n    protected Sales() {\n        \n        try{\n            KeyManager[] keyManager = this.getKeyManagers(saleKeyStore, saleKeyStorePassword);\n            TrustManager[] trustManager = this.getTrustManagers(saleTrustStore, saleTrustStorePassword);\n            SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n            sslContext.init(keyManager, trustManager, null);\n            HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n                public boolean verify(String hostname, SSLSession session) { return true; }\n            };\n            HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);\n            HttpsURLConnection.setDefaultSSLSocketFactory(sslContext.getSocketFactory());\n                        \n            QName qname = new QName(&quot;http://sale.net/&quot;, &quot;SalesWSService&quot;);\n            SalesWSService salesWSService = new SalesWSService(new URL(productUrl),qname);\n            webServiceProduct = salesWSService.getSalesWSPort();\n            System.out.println(&quot;Connection succeded&quot;);\n        }catch(Exception ex){\n            System.out.println(&quot;Error&quot;);\n        }\n    }\n    \n    public static Sales getInstance(){\n        if(instance == null){\n            instance = new Sales();\n        }\n        return instance;\n                \n    }\n\n    public String getSaleDate(int number) {\n        if (number==1)\n          return &quot;2023-01-01&quot;;\n        else\n          return &quot;2023-02-01&quot;;\n    }\n    \n}\n</code></pre>\n<p>Client.java</p>\n<pre><code>public class Client {\n\n    protected Client() {    }\n\n    public static void main(String args[]){\n        Products clientProduct = Products.getInstance();\n        String name = clientProduct.getProductName(1); // It works\n        Sales saleProduct = Sales.getInstance();\n        String date = saleProduct.getSaleDate(1); // It works\n        name = clientProduct.getProductName(1); // It fails because the objects were instanced in singleton. \n        //Besides, the trustore and keystore information were not refreshed according to specific webservice\n    }\n\n}\n</code></pre>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":0,"creation_date":1695137816,"post_id":77130323,"comment_id":135982456,"body_markdown":"Looks like it works if there is a sub directory.  Which is different format from svn to git.  Dont we put the dot project file at the root of the directory?","body":"Looks like it works if there is a sub directory.  Which is different format from svn to git.  Dont we put the dot project file at the root of the directory?"},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695396201,"post_id":77130323,"comment_id":136023395,"body_markdown":"I didn&#39;t understand the issue completely. Can you tell what issue you are exactly facing?","body":"I didn&#39;t understand the issue completely. Can you tell what issue you are exactly facing?"},{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":1,"creation_date":1695413061,"post_id":77130323,"comment_id":136026168,"body_markdown":"I am using this script with Eclipse and working set, but doesn&#39;t work with a project where the .project files are at the root of a project.\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;psf version=&quot;2.0&quot;&gt;\n&lt;provider id=&quot;org.eclipse.egit.core.GitProvider&quot;&gt;\n&lt;project reference=&quot;1.0,https://git.mygithub.com/git/my-project,main,my-project&quot;/&gt;\n&lt;/provider&gt;\n&lt;/psf&gt;\n\nFor example:\nHow can I make this work with source with the following:\n\nhttps://git.mygithub.com/git/my-project/.project","body":"I am using this script with Eclipse and working set, but doesn&#39;t work with a project where the .project files are at the root of a project.  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;psf version=&quot;2.0&quot;&gt; &lt;provider id=&quot;org.eclipse.egit.core.GitProvider&quot;&gt; &lt;project reference=&quot;1.0,<a href=\"https://git.mygithub.com/git/my-project,main,my-project&quot;/\" rel=\"nofollow noreferrer\">git.mygithub.com/git/my-project,main,my-proje&zwnj;&#8203;ct&quot;</a>&gt; &lt;/provider&gt; &lt;/psf&gt;  For example: How can I make this work with source with the following:  <a href=\"https://git.mygithub.com/git/my-project/.project\" rel=\"nofollow noreferrer\">git.mygithub.com/git/my-project/.project</a>"},{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695431481,"post_id":77130323,"comment_id":136027966,"body_markdown":"Ok got it. Looking into it.","body":"Ok got it. Looking into it."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":0,"creation_date":1695571371,"post_id":77130323,"comment_id":136039127,"body_markdown":"Please add the directory tree of your setup and also add the .project contents. If the structure is my-project/my-project then you probably have a custom source folders setup not just pointing to `src`. DId you committed both .project and .classpath files?\nAlso, please explain what &quot;but doesn&#39;t work&quot; means.","body":"Please add the directory tree of your setup and also add the .project contents. If the structure is my-project/my-project then you probably have a custom source folders setup not just pointing to <code>src</code>. DId you committed both .project and .classpath files? Also, please explain what &quot;but doesn&#39;t work&quot; means."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695629054,"post_id":77130323,"comment_id":136044697,"body_markdown":"You can do this and more with [Eclipse Oomph](https://wiki.eclipse.org/Eclipse_Oomph_Authoring).","body":"You can do this and more with <a href=\"https://wiki.eclipse.org/Eclipse_Oomph_Authoring\" rel=\"nofollow noreferrer\">Eclipse Oomph</a>."},{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":0,"creation_date":1695674212,"post_id":77130323,"comment_id":136053493,"body_markdown":"My package is this:\n\n&lt;repo&gt;/.project\n&lt;repo&gt;/src/main/java essetially","body":"My package is this:  &lt;repo&gt;/.project &lt;repo&gt;/src/main/java essetially"},{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":0,"creation_date":1695730803,"post_id":77130323,"comment_id":136061007,"body_markdown":"For oomph, do you have a more specific, detailed example","body":"For oomph, do you have a more specific, detailed example"},{"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"score":0,"creation_date":1695758817,"post_id":77130323,"comment_id":136066696,"body_markdown":"Also, are these project working set configs, really just doing a git clone or subversion svn co?  I could write a bash script.","body":"Also, are these project working set configs, really just doing a git clone or subversion svn co?  I could write a bash script."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1695885373,"post_id":77130323,"comment_id":136084111,"body_markdown":"There is a [tutorial for Eclipse Oomph here](https://eclipsesource.com/blogs/tutorials/oomph-basic-tutorial/). The idea of Eclipse Oomph is to setup up everything including the Eclipse IDE. If you only want to clone a collection of Git repositories, you can do this via [Git submodules](https://wiki.eclipse.org/EGit/User_Guide#Cloning_Repositories_with_Submodules).","body":"There is a <a href=\"https://eclipsesource.com/blogs/tutorials/oomph-basic-tutorial/\" rel=\"nofollow noreferrer\">tutorial for Eclipse Oomph here</a>. The idea of Eclipse Oomph is to setup up everything including the Eclipse IDE. If you only want to clone a collection of Git repositories, you can do this via <a href=\"https://wiki.eclipse.org/EGit/User_Guide#Cloning_Repositories_with_Submodules\" rel=\"nofollow noreferrer\">Git submodules</a>."}],"owner":{"account_id":6291,"reputation":11568,"user_id":10522,"accept_rate":78,"display_name":"Berlin Brown"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695394491,"creation_date":1695070305,"question_id":77130323,"body_markdown":"We used to use the working set configuration below, with subversion and the working set psf file would work... Visit the repository, pull down the source from that module, add the directory relative to the workspace and that is it.\r\n\r\nNow I am not clear how converting to git would work to accomplish the same thing.\r\n\r\nSo we had a subversion based project working set configuration where we would use import project set.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;psf version=&quot;2.0&quot;&gt;\r\n    &lt;provider id=&quot;org.tigris.subversion.subclipse.core.svnnature&quot;&gt;\r\n    \t&lt;project reference=&quot;1.0,http://repo.svn.com/svn/my-project/trunk,my-project&quot;/&gt;\r\n    &lt;/provider&gt;\r\n\r\nAnd the configuration above seemed to work as expected where the project was part of the workspace.  There was a .project at the root of the project and used configuration of that project.\r\n\r\nIf I use the git version, seems to do close but, things are off.  For example, it seems to use some git configuration default path when it pulls down the files (I am mac, uses ~/git).  May git configuration in git plugins.\r\n\r\nBut also, doesn&#39;t take the .project file from the root, in the example below, my-project has to be a sub directory.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;psf version=&quot;2.0&quot;&gt;\r\n    &lt;provider id=&quot;org.eclipse.egit.core.GitProvider&quot;&gt;\r\n    &lt;project reference=&quot;1.0,https://git.mygithub.com/git/my-project,main,my-project&quot;/&gt;\r\n    &lt;/provider&gt;\r\n    &lt;/psf&gt;","title":"Is there a way to automate pulling down multiple projects from a git repo using Eclipse","body":"<p>We used to use the working set configuration below, with subversion and the working set psf file would work... Visit the repository, pull down the source from that module, add the directory relative to the workspace and that is it.</p>\n<p>Now I am not clear how converting to git would work to accomplish the same thing.</p>\n<p>So we had a subversion based project working set configuration where we would use import project set.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;psf version=&quot;2.0&quot;&gt;\n&lt;provider id=&quot;org.tigris.subversion.subclipse.core.svnnature&quot;&gt;\n    &lt;project reference=&quot;1.0,http://repo.svn.com/svn/my-project/trunk,my-project&quot;/&gt;\n&lt;/provider&gt;\n</code></pre>\n<p>And the configuration above seemed to work as expected where the project was part of the workspace.  There was a .project at the root of the project and used configuration of that project.</p>\n<p>If I use the git version, seems to do close but, things are off.  For example, it seems to use some git configuration default path when it pulls down the files (I am mac, uses ~/git).  May git configuration in git plugins.</p>\n<p>But also, doesn't take the .project file from the root, in the example below, my-project has to be a sub directory.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;psf version=&quot;2.0&quot;&gt;\n&lt;provider id=&quot;org.eclipse.egit.core.GitProvider&quot;&gt;\n&lt;project reference=&quot;1.0,https://git.mygithub.com/git/my-project,main,my-project&quot;/&gt;\n&lt;/provider&gt;\n&lt;/psf&gt;\n</code></pre>\n"},{"tags":["java","performance","gatling","latency","gatling-plugin"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1695463165,"post_id":77158635,"comment_id":136029949,"body_markdown":"Lookup the word &quot;percentiles&quot; in relation to &quot;statistics&quot; in mathematics !   It&#39;s not so much averages, as &quot;groupings&quot; (data) in particular &quot;similar environment sets of(plural) results&quot; (ad hoc vaguely).","body":"Lookup the word &quot;percentiles&quot; in relation to &quot;statistics&quot; in mathematics !   It&#39;s not so much averages, as &quot;groupings&quot; (data) in particular &quot;similar environment sets of(plural) results&quot; (ad hoc vaguely)."},{"owner":{"account_id":6852429,"reputation":6319,"user_id":5269205,"display_name":"St&#233;phane LANDELLE"},"score":0,"creation_date":1695479018,"post_id":77158635,"comment_id":136031363,"body_markdown":"No way to tell unless you share your `simulation.log` file.","body":"No way to tell unless you share your <code>simulation.log</code> file."}],"owner":{"account_id":7929172,"reputation":1787,"user_id":6059506,"accept_rate":77,"display_name":"theprogrammer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393949,"creation_date":1695393949,"question_id":77158635,"body_markdown":"Consider this **gatling report overview**\r\n[![enter image description here][1]][1]\r\n\r\n\r\nAs you can see, the max response time is shown as `18389 ms`. Now let&#39;s check response time percentiles section below.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5aMEY.png\r\n  [2]: https://i.stack.imgur.com/yolJJ.png\r\n\r\nI have zoomed into the max spiked section. Now as you can see, the max shown here is `1966 ms` which is different compared to the max shown in the overall overview at the top(which in our case was `18389 ms`.\r\n\r\nSo why is there a discrepancy between these two values? That too such a large difference(an order of 10^1).","title":"Why does gatling report show different values in &quot;Response Time Percentiles&quot; Section and main report overview?","body":"<p>Consider this <strong>gatling report overview</strong>\n<a href=\"https://i.stack.imgur.com/5aMEY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5aMEY.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see, the max response time is shown as <code>18389 ms</code>. Now let's check response time percentiles section below.</p>\n<p><a href=\"https://i.stack.imgur.com/yolJJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yolJJ.png\" alt=\"enter image description here\" /></a></p>\n<p>I have zoomed into the max spiked section. Now as you can see, the max shown here is <code>1966 ms</code> which is different compared to the max shown in the overall overview at the top(which in our case was <code>18389 ms</code>.</p>\n<p>So why is there a discrepancy between these two values? That too such a large difference(an order of 10^1).</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-test"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1642015404,"post_id":70686277,"comment_id":124963014,"body_markdown":"does your application start when you run it without tests and does it respond when you call it.","body":"does your application start when you run it without tests and does it respond when you call it."},{"owner":{"account_id":18089135,"reputation":450,"user_id":13149219,"display_name":"Utsav10"},"score":0,"creation_date":1642065855,"post_id":70686277,"comment_id":124974568,"body_markdown":"@Toerktumlare Yes, the app runs. I&#39;ve checked the network call. It is working as expected","body":"@Toerktumlare Yes, the app runs. I&#39;ve checked the network call. It is working as expected"}],"answers":[{"tags":[],"owner":{"account_id":18089135,"reputation":450,"user_id":13149219,"display_name":"Utsav10"},"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1642068078,"creation_date":1642068078,"answer_id":70694659,"question_id":70686277,"body_markdown":"I added mocking the decoder in the test as \r\n\r\n```\r\n@MockBean\r\nprivate JwtDecoder jwtDecoder;\r\n```\r\n\r\nand the test ran !","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>I added mocking the decoder in the test as</p>\n<pre><code>@MockBean\nprivate JwtDecoder jwtDecoder;\n</code></pre>\n<p>and the test ran !</p>\n"},{"tags":[],"owner":{"account_id":4451500,"reputation":772,"user_id":3623232,"display_name":"Guillermo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685537187,"creation_date":1684761288,"answer_id":76306583,"question_id":70686277,"body_markdown":"I got this error when using `@SpringBootTest`. It started appearing when upgrading from spring boot version `2.5.12` to `2.7.8`.\r\n\r\nI could fix it by changing \r\n\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE)\r\n```\r\n\r\nto\r\n\r\n```java\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n```","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>I got this error when using <code>@SpringBootTest</code>. It started appearing when upgrading from spring boot version <code>2.5.12</code> to <code>2.7.8</code>.</p>\n<p>I could fix it by changing</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.NONE)\n</code></pre>\n<p>to</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2226374,"reputation":106,"user_id":1965042,"display_name":"vcg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688940005,"creation_date":1688940005,"answer_id":76649703,"question_id":70686277,"body_markdown":"Hi i was having same issue, then I realize on my test properties I missed to configure:   \r\n```security:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: realm_uri_here\r\n          jwk-set-uri: ${spring.security.oauth2.resource-server.jwt.issuer-uri}/protocol/openid-connect/certs```","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>Hi i was having same issue, then I realize on my test properties I missed to configure:</p>\n<pre><code>    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: realm_uri_here\n          jwk-set-uri: ${spring.security.oauth2.resource-server.jwt.issuer-uri}/protocol/openid-connect/certs```\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28425334,"reputation":11,"user_id":22615357,"display_name":"Kris Kto"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695393875,"creation_date":1695393875,"answer_id":77158623,"question_id":70686277,"body_markdown":"This configuration test also resolved problem in Unit Tests.\r\n\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: test","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>This configuration test also resolved problem in Unit Tests.</p>\n<pre><code>oauth2:\n  resourceserver:\n    jwt:\n      issuer-uri: test\n</code></pre>\n"}],"owner":{"account_id":18089135,"reputation":450,"user_id":13149219,"display_name":"Utsav10"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12061,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":70694659,"answer_count":4,"score":11,"last_activity_date":1695393875,"creation_date":1642010296,"question_id":70686277,"body_markdown":"I am trying to write a test for my controller but the test environment fails to load with the given stackTrace.\r\n\r\n```\r\n    @PreAuthorize(&quot;hasAuthority(&#39;my.scope&#39;)&quot;)\r\n    @GetMapping(value = &quot;/path&quot;, produces = APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;Map&lt;String, Set&lt;String&gt;&gt;&gt; getPath() {\r\n        return myService.pathFunction()\r\n            .map(ResponseEntity::ok);\r\n    }\r\n```\r\n\r\nand following is how I&#39;ve configured my security config\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\r\npublic class WebConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    private static final String PRINCIPAL = &quot;sub&quot;;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        JwtAuthenticationConverter authenticationConverter =\r\n            new JwtAuthenticationConverter();\r\n        authenticationConverter.setJwtGrantedAuthoritiesConverter(...);\r\n        authenticationConverter.setPrincipalClaimName(PRINCIPAL);\r\n\r\n        http.csrf().disable()\r\n            .cors()\r\n            .and()\r\n            .authorizeRequests().antMatchers(&quot;/actuator/**&quot;).permitAll()\r\n            .anyRequest().authenticated()\r\n            .and()\r\n            .oauth2ResourceServer()\r\n            .jwt()\r\n            .jwtAuthenticationConverter(authenticationConverter);\r\n    }\r\n}\r\n```\r\n**The controller is working as needed but my test fails with this error. I am not using any customer JwtDecoder**\r\n\r\n```\r\n@WebMvcTest(controllers = Controller.class)\r\nclass ControllerTest {\r\n\r\n    @MockBean\r\n    private MyService myService;\r\n\r\n    @Autowired\r\n    private MockMvc mockMvc;\r\n\r\n    @Test\r\n    @WithMockUser(authorities = {&quot;my.scope&quot;})\r\n    void controllerTest() throws Exception{\r\n        Map&lt;String, Set&lt;String&gt;&gt; mapResponse = Map.of(&quot;key&quot;, Set.of(&quot;foo1&quot;, &quot;foo2&quot;));\r\n        Mockito.when(myService.pathFunction()).thenReturn(Optional.of(mapResponse));\r\n\r\n        MockHttpServletResponse result = mockMvc.perform(get(&quot;/configuration/api-registry&quot;)\r\n                .contentType(MediaType.APPLICATION_JSON))\r\n            .andExpect(status().isOk())\r\n            .andReturn()\r\n            .getResponse();\r\n\r\n        String response = result.getContentAsString();\r\n        assertTrue(response.contains(&quot;foo1&quot;));\r\n    }\r\n\r\n}\r\n```\r\nHow do I run this test ?\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\t...\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\r\n\t... 90 more\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available\r\n\tat ...\r\n```","title":"ERROR No qualifying bean of type &#39;org.springframework.security.oauth2.jwt.JwtDecoder&#39; available","body":"<p>I am trying to write a test for my controller but the test environment fails to load with the given stackTrace.</p>\n<pre><code>    @PreAuthorize(&quot;hasAuthority('my.scope')&quot;)\n    @GetMapping(value = &quot;/path&quot;, produces = APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;Map&lt;String, Set&lt;String&gt;&gt;&gt; getPath() {\n        return myService.pathFunction()\n            .map(ResponseEntity::ok);\n    }\n</code></pre>\n<p>and following is how I've configured my security config</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true, prePostEnabled = true)\npublic class WebConfig extends WebSecurityConfigurerAdapter {\n\n    private static final String PRINCIPAL = &quot;sub&quot;;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        JwtAuthenticationConverter authenticationConverter =\n            new JwtAuthenticationConverter();\n        authenticationConverter.setJwtGrantedAuthoritiesConverter(...);\n        authenticationConverter.setPrincipalClaimName(PRINCIPAL);\n\n        http.csrf().disable()\n            .cors()\n            .and()\n            .authorizeRequests().antMatchers(&quot;/actuator/**&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .oauth2ResourceServer()\n            .jwt()\n            .jwtAuthenticationConverter(authenticationConverter);\n    }\n}\n</code></pre>\n<p><strong>The controller is working as needed but my test fails with this error. I am not using any customer JwtDecoder</strong></p>\n<pre><code>@WebMvcTest(controllers = Controller.class)\nclass ControllerTest {\n\n    @MockBean\n    private MyService myService;\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @Test\n    @WithMockUser(authorities = {&quot;my.scope&quot;})\n    void controllerTest() throws Exception{\n        Map&lt;String, Set&lt;String&gt;&gt; mapResponse = Map.of(&quot;key&quot;, Set.of(&quot;foo1&quot;, &quot;foo2&quot;));\n        Mockito.when(myService.pathFunction()).thenReturn(Optional.of(mapResponse));\n\n        MockHttpServletResponse result = mockMvc.perform(get(&quot;/configuration/api-registry&quot;)\n                .contentType(MediaType.APPLICATION_JSON))\n            .andExpect(status().isOk())\n            .andReturn()\n            .getResponse();\n\n        String response = result.getContentAsString();\n        assertTrue(response.contains(&quot;foo1&quot;));\n    }\n\n}\n</code></pre>\n<p>How do I run this test ?</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    ...\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 90 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.oauth2.jwt.JwtDecoder' available\n    at ...\n</code></pre>\n"},{"tags":["java","reactjs","servlets","cors","fetch"],"owner":{"account_id":25996762,"reputation":1,"user_id":19707999,"display_name":"salvador8a"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393798,"creation_date":1695393798,"question_id":77158613,"body_markdown":"I&#39;m running a React frontend for my Java WebServlets backend, up until now I&#39;ve found no trouble with CORS by just using &quot;response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;);&quot; to my POST and GET methods. However fetch API PUT requests give me the next error, even with the aforementioned header:\r\n\r\n&gt; Access to fetch at &#39;http://localhost:8080/ControladorPedido&#39; from origin &#39;http://localhost:3000&#39; has been blocked by CORS policy: Response to preflight request doesn&#39;t pass access control check: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. If an opaque response serves your needs, set the request&#39;s mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.\r\n\r\nHere&#39;s my fetch request:\r\n\r\n```\r\n    let handlePago = (evt) =&gt; {\r\n        evt.preventDefault();\r\n\r\n        let pago = {\r\n            pedido_id : info.id_pedido,\r\n            pedido_pagado : true\r\n        }\r\n\r\n        try{\r\n            fetch(&quot;http://localhost:8080/ControladorPedido&quot;, {\r\n                method: &quot;PUT&quot;,\r\n                headers: {\r\n                    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;\r\n                },\r\n                body: new URLSearchParams(pago)\r\n            })\r\n            .then(res =&gt; res.json())\r\n            .then(result =&gt; {\r\n                console.log(result)\r\n            })\r\n        }catch(e){\r\n            console.log(e)\r\n        }\r\n\r\n    }\r\n```\r\n\r\nHere are my doPut headers:\r\n\r\n```\r\nprotected void doPut(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    pool = conexion.connect();\r\n    response.setContentType(&quot;application/json&quot;);\r\n    response.setCharacterEncoding(&quot;utf-8&quot;);\r\n\r\n    response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;);\r\n    response.addHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, PATCH, PUT, DELETE, OPTIONS&quot;);\r\n    response.addHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Origin, Content-Type, X-Auth-Token&quot;);\r\n\r\n    PrintWriter print = response.getWriter();\r\n}\r\n```\r\n\r\nI&#39;ve tried using &quot;response.setHeader&quot; instead of &quot;response.addHeader&quot; but to no avail.","title":"Servlet doPut rejecting my frontend fetch due to CORS","body":"<p>I'm running a React frontend for my Java WebServlets backend, up until now I've found no trouble with CORS by just using &quot;response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;);&quot; to my POST and GET methods. However fetch API PUT requests give me the next error, even with the aforementioned header:</p>\n<blockquote>\n<p>Access to fetch at 'http://localhost:8080/ControladorPedido' from origin 'http://localhost:3000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</p>\n</blockquote>\n<p>Here's my fetch request:</p>\n<pre><code>    let handlePago = (evt) =&gt; {\n        evt.preventDefault();\n\n        let pago = {\n            pedido_id : info.id_pedido,\n            pedido_pagado : true\n        }\n\n        try{\n            fetch(&quot;http://localhost:8080/ControladorPedido&quot;, {\n                method: &quot;PUT&quot;,\n                headers: {\n                    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;\n                },\n                body: new URLSearchParams(pago)\n            })\n            .then(res =&gt; res.json())\n            .then(result =&gt; {\n                console.log(result)\n            })\n        }catch(e){\n            console.log(e)\n        }\n\n    }\n</code></pre>\n<p>Here are my doPut headers:</p>\n<pre><code>protected void doPut(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    pool = conexion.connect();\n    response.setContentType(&quot;application/json&quot;);\n    response.setCharacterEncoding(&quot;utf-8&quot;);\n\n    response.addHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;http://localhost:3000&quot;);\n    response.addHeader(&quot;Access-Control-Allow-Methods&quot;, &quot;GET, POST, PATCH, PUT, DELETE, OPTIONS&quot;);\n    response.addHeader(&quot;Access-Control-Allow-Headers&quot;, &quot;Origin, Content-Type, X-Auth-Token&quot;);\n\n    PrintWriter print = response.getWriter();\n}\n</code></pre>\n<p>I've tried using &quot;response.setHeader&quot; instead of &quot;response.addHeader&quot; but to no avail.</p>\n"},{"tags":["python","java","cryptography","aes"],"comments":[{"owner":{"account_id":4075612,"reputation":21,"user_id":3347376,"display_name":"Anaconda"},"score":0,"creation_date":1695394707,"post_id":77158609,"comment_id":136023002,"body_markdown":"Note to my future self and anyone else: Java appends the authentication tag while python gives it separately. Thats probably the issue here, will try and report bag.","body":"Note to my future self and anyone else: Java appends the authentication tag while python gives it separately. Thats probably the issue here, will try and report bag."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1695395142,"post_id":77158609,"comment_id":136023117,"body_markdown":"That&#39;s correct, but your Python code doesn&#39;t return a tag, which is because you are using `encrypt()` instead of [`encrypt_and_digest()`](https://pycryptodome.readthedocs.io/en/latest/src/cipher/modern.html#gcm-mode). The latter returns ciphertext and tag (which can then be concatenated for the Java code).","body":"That&#39;s correct, but your Python code doesn&#39;t return a tag, which is because you are using <code>encrypt()</code> instead of <a href=\"https://pycryptodome.readthedocs.io/en/latest/src/cipher/modern.html#gcm-mode\" rel=\"nofollow noreferrer\"><code>encrypt_and_digest()</code></a>. The latter returns ciphertext and tag (which can then be concatenated for the Java code)."},{"owner":{"account_id":4075612,"reputation":21,"user_id":3347376,"display_name":"Anaconda"},"score":0,"creation_date":1695395575,"post_id":77158609,"comment_id":136023226,"body_markdown":"@Topaco Yes that was the problem. I&#39;ve had encrypt_and_digest but didn&#39;t know what to do with the digest... It works if i just add it at the end of the cipher. Do you want to formualte an answer?","body":"@Topaco Yes that was the problem. I&#39;ve had encrypt_and_digest but didn&#39;t know what to do with the digest... It works if i just add it at the end of the cipher. Do you want to formualte an answer?"}],"owner":{"account_id":4075612,"reputation":21,"user_id":3347376,"display_name":"Anaconda"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393749,"creation_date":1695393749,"question_id":77158609,"body_markdown":"I&#39;m currently trying to write some Python Code (with pycryptodome) that encrypts some data which will be decrypted by a Java tool which is not in my control (so, the Java part is fixed).\r\n\r\nThe process includes RSA encrypting the AES key and adding the AES nonce. I&#39;ve got all these working, but the AES decryption itself seems to differ. I guess it comes down to some details in the cipher setup but after trying different settings I&#39;m now lost.\r\n\r\nThe strange part is, I can get the java part to decrypt my python cipher text, but I have to use the `Cipher.ENCRYPT_MODE`. Since I can&#39;t change the relevant Java code in production, and the Java code uses `Cipher.DECRYPT_MODE`, thats no solution (and it tells me I&#39;m doing something wrong). With `Cipher.DECRYPT_MODE`, I get `javax.crypto.AEADBadTagException: Tag mismatch`.\r\n\r\nI already tried calling `cipher.decrypt` on the Python part (instead of `cipher.encrypt`), but both give me the same result, so somehow Java makes a difference on encrypt / decrypt while Python doesn&#39;t... Or it&#39;s something completely different.\r\n\r\nI&#39;ve reduced the problem to a minimal example.\r\n\r\nPython Code to generate the cipher:\r\n\r\n```\r\nimport base64\r\nimport Crypto.Cipher.AES\r\n\r\naesnonce  = base64.b64decode(b&quot;nsHTfsEFKyVytEk2&quot;)\r\naeskey    = base64.b64decode(b&quot;2hn3S9IsCTut7Hr9SX/7Pg==&quot;)\r\ncipher    = Crypto.Cipher.AES.new(aeskey, Crypto.Cipher.AES.MODE_GCM, nonce=aesnonce)\r\n\r\nplaintext = b&#39;&#39;&#39;Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore.&#39;&#39;&#39;\r\ncrypted   = cipher.encrypt(plaintext)\r\n\r\nprint( base64.b64encode(crypted) )\r\n#w0ehWquycruj2KGkRES4M8pc6w4ZM+9HyI+KOXgqybmiYIuU1nsjZJwisZprxx2mczP280ZT5KlCXzSX0h24136m708N8sbX6m+5QlDVa73/r9dRyfSzFeByi51NqVm35wP4oHdxYW5iVx9P8iFFpcYd9c8=\r\n```\r\n\r\n\r\nAnd the Java Part \r\n\r\n```\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.IOException;\r\nimport java.security.InvalidAlgorithmParameterException;\r\nimport java.security.InvalidKeyException;\r\nimport java.security.NoSuchAlgorithmException;\r\nimport java.util.Base64;\r\n\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.CipherInputStream;\r\nimport javax.crypto.NoSuchPaddingException;\r\nimport javax.crypto.spec.GCMParameterSpec;\r\nimport javax.crypto.spec.SecretKeySpec;\r\n\r\npublic class MainTest {\r\n    static public void main(String[] args) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IOException {\r\n    \tbyte[] aesnonce    = Base64.getDecoder().decode(&quot;nsHTfsEFKyVytEk2&quot;);\r\n    \tbyte[] aeskeybytes = Base64.getDecoder().decode(&quot;2hn3S9IsCTut7Hr9SX/7Pg==&quot;);\r\n        byte[] crypted     = Base64.getDecoder().decode(&quot;w0ehWquycruj2KGkRES4M8pc6w4ZM+9HyI+KOXgqybmiYIuU1nsjZJwisZprxx2mczP280ZT5KlCXzSX0h24136m708N8sbX6m+5QlDVa73/r9dRyfSzFeByi51NqVm35wP4oHdxYW5iVx9P8iFFpcYd9c8=&quot;);\r\n                \r\n    \tSecretKeySpec secretKey = new SecretKeySpec(aeskeybytes, &quot;AES&quot;);\r\n\r\n        GCMParameterSpec gcmParameterSpec = new GCMParameterSpec(128, aesnonce);\r\n        Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n\r\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey, gcmParameterSpec);  // Works\r\n//      cipher.init(Cipher.DECRYPT_MODE, secretKey, gcmParameterSpec);  // Error\r\n\r\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(crypted);\r\n        CipherInputStream cipherInputStream = new CipherInputStream(inputStream, cipher);\r\n        \r\n        byte[] plaintext = cipherInputStream.readAllBytes();\r\n        System.out.print( new String(plaintext) );\r\n    }\r\n}\r\n```\r\n\r\nPS: I&#39;m no Java Guy, and the code is more or less taken from the actual implementation that will be used in production.\r\n\r\nPPS: I know that the authentication check is missing. But, since I do not control the protocol, that&#39;s what we have to work with.","title":"AES encryption - encrypt in Python and decrypt in Java - AEADBadTagException","body":"<p>I'm currently trying to write some Python Code (with pycryptodome) that encrypts some data which will be decrypted by a Java tool which is not in my control (so, the Java part is fixed).</p>\n<p>The process includes RSA encrypting the AES key and adding the AES nonce. I've got all these working, but the AES decryption itself seems to differ. I guess it comes down to some details in the cipher setup but after trying different settings I'm now lost.</p>\n<p>The strange part is, I can get the java part to decrypt my python cipher text, but I have to use the <code>Cipher.ENCRYPT_MODE</code>. Since I can't change the relevant Java code in production, and the Java code uses <code>Cipher.DECRYPT_MODE</code>, thats no solution (and it tells me I'm doing something wrong). With <code>Cipher.DECRYPT_MODE</code>, I get <code>javax.crypto.AEADBadTagException: Tag mismatch</code>.</p>\n<p>I already tried calling <code>cipher.decrypt</code> on the Python part (instead of <code>cipher.encrypt</code>), but both give me the same result, so somehow Java makes a difference on encrypt / decrypt while Python doesn't... Or it's something completely different.</p>\n<p>I've reduced the problem to a minimal example.</p>\n<p>Python Code to generate the cipher:</p>\n<pre><code>import base64\nimport Crypto.Cipher.AES\n\naesnonce  = base64.b64decode(b&quot;nsHTfsEFKyVytEk2&quot;)\naeskey    = base64.b64decode(b&quot;2hn3S9IsCTut7Hr9SX/7Pg==&quot;)\ncipher    = Crypto.Cipher.AES.new(aeskey, Crypto.Cipher.AES.MODE_GCM, nonce=aesnonce)\n\nplaintext = b'''Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore.'''\ncrypted   = cipher.encrypt(plaintext)\n\nprint( base64.b64encode(crypted) )\n#w0ehWquycruj2KGkRES4M8pc6w4ZM+9HyI+KOXgqybmiYIuU1nsjZJwisZprxx2mczP280ZT5KlCXzSX0h24136m708N8sbX6m+5QlDVa73/r9dRyfSzFeByi51NqVm35wP4oHdxYW5iVx9P8iFFpcYd9c8=\n</code></pre>\n<p>And the Java Part</p>\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.security.InvalidAlgorithmParameterException;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.Base64;\n\nimport javax.crypto.Cipher;\nimport javax.crypto.CipherInputStream;\nimport javax.crypto.NoSuchPaddingException;\nimport javax.crypto.spec.GCMParameterSpec;\nimport javax.crypto.spec.SecretKeySpec;\n\npublic class MainTest {\n    static public void main(String[] args) throws NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, InvalidAlgorithmParameterException, IOException {\n        byte[] aesnonce    = Base64.getDecoder().decode(&quot;nsHTfsEFKyVytEk2&quot;);\n        byte[] aeskeybytes = Base64.getDecoder().decode(&quot;2hn3S9IsCTut7Hr9SX/7Pg==&quot;);\n        byte[] crypted     = Base64.getDecoder().decode(&quot;w0ehWquycruj2KGkRES4M8pc6w4ZM+9HyI+KOXgqybmiYIuU1nsjZJwisZprxx2mczP280ZT5KlCXzSX0h24136m708N8sbX6m+5QlDVa73/r9dRyfSzFeByi51NqVm35wP4oHdxYW5iVx9P8iFFpcYd9c8=&quot;);\n                \n        SecretKeySpec secretKey = new SecretKeySpec(aeskeybytes, &quot;AES&quot;);\n\n        GCMParameterSpec gcmParameterSpec = new GCMParameterSpec(128, aesnonce);\n        Cipher cipher = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n\n        cipher.init(Cipher.ENCRYPT_MODE, secretKey, gcmParameterSpec);  // Works\n//      cipher.init(Cipher.DECRYPT_MODE, secretKey, gcmParameterSpec);  // Error\n\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(crypted);\n        CipherInputStream cipherInputStream = new CipherInputStream(inputStream, cipher);\n        \n        byte[] plaintext = cipherInputStream.readAllBytes();\n        System.out.print( new String(plaintext) );\n    }\n}\n</code></pre>\n<p>PS: I'm no Java Guy, and the code is more or less taken from the actual implementation that will be used in production.</p>\n<p>PPS: I know that the authentication check is missing. But, since I do not control the protocol, that's what we have to work with.</p>\n"},{"tags":["java","sonarqube"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1695394208,"post_id":77158575,"comment_id":136022903,"body_markdown":"If Sonar puts the marker at the top of the file, that must mean it&#39;s not getting a line number for where it is occurring, so I think it must be in generated code, perhaps by Lombok or some other annotation processor? I think if you decompile / delombok / `javap -c` the class file you may be able to identify the cause.","body":"If Sonar puts the marker at the top of the file, that must mean it&#39;s not getting a line number for where it is occurring, so I think it must be in generated code, perhaps by Lombok or some other annotation processor? I think if you decompile / delombok / <code>javap -c</code> the class file you may be able to identify the cause."}],"owner":{"account_id":1703211,"reputation":424,"user_id":1562808,"accept_rate":77,"display_name":"ldepablo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393415,"creation_date":1695393415,"question_id":77158575,"body_markdown":"Sonar is telling me there is an issue \r\n\r\n    Class com.xxx.MyClass creates and initializes a collection but never reads or gains information from it\r\n\r\nTwo things to say:\r\n\r\n 1. We can&#39;f find any collection in that situation and\r\n 2. The line sonar marks as incorrect (red underwrting) is the first line of the file, the `package com.xxx`\r\n\r\nI&#39;ve tried the \r\n\r\n    @SuppressWarnings(&quot;fb-contrib:WOC_WRITE_ONLY_COLLECTION_FIELD&quot;)\r\n\r\njust above the class declaration line but still receiving the same message.\r\n\r\nAny idea as to how to ignore this message or solve this issue?\r\n\r\nMany thanks","title":"sonar issue in package line &quot;creates and initializes a collection but never reads or gains information from it&quot;","body":"<p>Sonar is telling me there is an issue</p>\n<pre><code>Class com.xxx.MyClass creates and initializes a collection but never reads or gains information from it\n</code></pre>\n<p>Two things to say:</p>\n<ol>\n<li>We can'f find any collection in that situation and</li>\n<li>The line sonar marks as incorrect (red underwrting) is the first line of the file, the <code>package com.xxx</code></li>\n</ol>\n<p>I've tried the</p>\n<pre><code>@SuppressWarnings(&quot;fb-contrib:WOC_WRITE_ONLY_COLLECTION_FIELD&quot;)\n</code></pre>\n<p>just above the class declaration line but still receiving the same message.</p>\n<p>Any idea as to how to ignore this message or solve this issue?</p>\n<p>Many thanks</p>\n"},{"tags":["java","pdf","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1695398502,"post_id":77158544,"comment_id":136023830,"body_markdown":"*&quot;To encrypt it correctly I need to know what character is in the file&quot;* - you cannot count on knowing that. The &quot;text&quot; drawing instructions use character codes in arbitrary encodings, encodings that don&#39;t need to have anything to do with standard encodings, e.g. the first glyph used on a given page might have the code 1, the second glyph code 2, etc etc. And there doesn&#39;t need to be any map to resolve that. And even if there is such a map, it may map different glyphs to the same Unicode character. Also there may be single glyphs representing ligatures, i.e. multiple characters, etc.","body":"<i>&quot;To encrypt it correctly I need to know what character is in the file&quot;</i> - you cannot count on knowing that. The &quot;text&quot; drawing instructions use character codes in arbitrary encodings, encodings that don&#39;t need to have anything to do with standard encodings, e.g. the first glyph used on a given page might have the code 1, the second glyph code 2, etc etc. And there doesn&#39;t need to be any map to resolve that. And even if there is such a map, it may map different glyphs to the same Unicode character. Also there may be single glyphs representing ligatures, i.e. multiple characters, etc."},{"owner":{"account_id":29098189,"reputation":16,"user_id":22290633,"display_name":"omkar vanjare"},"score":0,"creation_date":1695721924,"post_id":77158544,"comment_id":136059259,"body_markdown":"Hi  @mkl, Sorry for responding late. I am trying to follow your suggestions in this answer https://stackoverflow.com/a/47850848/22290633 . In this answer you have given 5 steps to read and edit text in pdf at the end of the answer.  My current code is same as in this question : https://stackoverflow.com/q/60631596 . help me to figure out where I am going wrong.","body":"Hi  @mkl, Sorry for responding late. I am trying to follow your suggestions in this answer <a href=\"https://stackoverflow.com/a/47850848/22290633\">stackoverflow.com/a/47850848/22290633</a> . In this answer you have given 5 steps to read and edit text in pdf at the end of the answer.  My current code is same as in this question : <a href=\"https://stackoverflow.com/q/60631596\">stackoverflow.com/q/60631596</a> . help me to figure out where I am going wrong."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695744766,"post_id":77158544,"comment_id":136064255,"body_markdown":"*&quot;Sorry for responding late. I am trying to follow your suggestions in this answer&quot;* - Actually I there already said what I have said in my first comment here: *Each font in PDFs can use a different encoding for its strings, and these encodings don&#39;t even need to be standard encodings, they may be ad-hoc encodings created on the fly by the PDF creator program.* In that case without mappings to Unicode in the font object, it is very difficult to implement the step *decode the string contents according to the information in the font.*","body":"<i>&quot;Sorry for responding late. I am trying to follow your suggestions in this answer&quot;</i> - Actually I there already said what I have said in my first comment here: <i>Each font in PDFs can use a different encoding for its strings, and these encodings don&#39;t even need to be standard encodings, they may be ad-hoc encodings created on the fly by the PDF creator program.</i> In that case without mappings to Unicode in the font object, it is very difficult to implement the step <i>decode the string contents according to the information in the font.</i>"}],"owner":{"account_id":29098189,"reputation":16,"user_id":22290633,"display_name":"omkar vanjare"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393190,"creation_date":1695393190,"question_id":77158544,"body_markdown":"I want to edit text in pdf file. Example :- If my PDF is having text as &#39;HELLO WORLD&#39; then I want to encrypt it using one custom encryption algorithm to &quot;GDKKN VNQKC&quot; preserving font and location of text on page.\r\nTo encrypt it correctly I need to know what character is in the file and then apply my encryption algorithm on that and then write it in file in place of original character\r\nHow can I achieve this if it is even achievable using Apache PDFBox java library.\r\n\r\nI have found that TJ operator is used to display text in pdf. I am parsing ContentStream for page and getting TJ token. When I am calling COSString.getSTring() from COSString received from TJ it shows me some random characters because this string is encoded in font. Now I have to find out how to get real character from this encoded value from Font and then encrypt it and encode encrypted character using Font and replace original character with encrypted one.\r\n\r\nI have got this understanding from this posts [https://stackoverflow.com/a/47850848/22290633](https://stackoverflow.com),[https://stackoverflow.com/a/52586830/22290633](https://stackoverflow.com)","title":"How to edit text in pdf preserving format of all textual and non-textual content?","body":"<p>I want to edit text in pdf file. Example :- If my PDF is having text as 'HELLO WORLD' then I want to encrypt it using one custom encryption algorithm to &quot;GDKKN VNQKC&quot; preserving font and location of text on page.\nTo encrypt it correctly I need to know what character is in the file and then apply my encryption algorithm on that and then write it in file in place of original character\nHow can I achieve this if it is even achievable using Apache PDFBox java library.</p>\n<p>I have found that TJ operator is used to display text in pdf. I am parsing ContentStream for page and getting TJ token. When I am calling COSString.getSTring() from COSString received from TJ it shows me some random characters because this string is encoded in font. Now I have to find out how to get real character from this encoded value from Font and then encrypt it and encode encrypted character using Font and replace original character with encrypted one.</p>\n<p>I have got this understanding from this posts <a href=\"https://stackoverflow.com\">https://stackoverflow.com/a/47850848/22290633</a>,<a href=\"https://stackoverflow.com\">https://stackoverflow.com/a/52586830/22290633</a></p>\n"},{"tags":["java","spring-boot","redirect","swagger","http-redirect"],"comments":[{"owner":{"account_id":1581397,"reputation":1555,"user_id":1466713,"display_name":"leberknecht"},"score":0,"creation_date":1695374891,"post_id":77156369,"comment_id":136018904,"body_markdown":"from what i know, swagger is a specification how to describe APIs.. Are you talking about server/client lib that was generated from a swagger spec?","body":"from what i know, swagger is a specification how to describe APIs.. Are you talking about server/client lib that was generated from a swagger spec?"},{"owner":{"account_id":29507678,"reputation":1,"user_id":22613370,"display_name":"zlobeen"},"score":0,"creation_date":1695375081,"post_id":77156369,"comment_id":136018960,"body_markdown":"@leberknecht yes, I&#39;m writing code, one of the functions of which is to redirect to another page on the Internet. I can&#39;t navigate to another page while Swagger is required in my project.","body":"@leberknecht yes, I&#39;m writing code, one of the functions of which is to redirect to another page on the Internet. I can&#39;t navigate to another page while Swagger is required in my project."}],"owner":{"account_id":29507678,"reputation":1,"user_id":22613370,"display_name":"zlobeen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695393024,"creation_date":1695374673,"question_id":77156369,"body_markdown":"I configured Swagger in my project and it handles GET, POST and DELETE requests normally. However, in my project, clicking on one of these requests requires redirecting to another web resource, for example, *https://www.google.com/*. Swagger does not allow me to do this either by the methods:\r\n```\r\npublic String testUrl = &quot;https://www.google.com/&quot;;\r\n\r\n@GetMapping(&quot;/RedirectView&quot;)\r\npublic RedirectView redirectView() {\r\n    return new RedirectView(testUrl);\r\n}\r\n\r\n@GetMapping(&quot;/ResponseEntity&quot;)\r\npublic ResponseEntity&lt;Object&gt; responseEntity() throws URISyntaxException {\r\n    URI uri = new URI(testUrl);\r\n    HttpHeaders httpHeaders = new HttpHeaders();\r\n    httpHeaders.setLocation(uri);\r\n    return new ResponseEntity&lt;&gt;(httpHeaders, HttpStatus.SEE_OTHER);\r\n}\r\n\r\n@GetMapping(value = &quot;/HttpServletResponse&quot;)\r\npublic void httpServletResponse(HttpServletResponse httpServletResponse) throws IOException {\r\n    httpServletResponse.sendRedirect(testUrl);\r\n}\r\n```\r\nIn response to these methods it sends me an error:\r\n**Code:** *Undocumented*\r\n**Details:** *TypeError: Failed to fetch*\r\nAfter opening the page code, I saw the following error in the console:\r\n**Access to fetch at &#39;https://www.google.com/&#39; (redirected from &#39;http://localhost:8080/HttpServletResponse&#39;) from origin &#39;http://localhost:8080&#39; has been blocked by CORS policy: No &#39;Access-Control-Allow-Origin&#39; header is present on the requested resource. If an opaque response serves your needs, set the request&#39;s mode to &#39;no-cors&#39; to fetch the resource with CORS disabled.**\r\nI tried to solve the problem with CORS, even turned it off, but nothing seems to help me(\r\n\r\n","title":"Can&#39;t access External url from Swagger","body":"<p>I configured Swagger in my project and it handles GET, POST and DELETE requests normally. However, in my project, clicking on one of these requests requires redirecting to another web resource, for example, <em><a href=\"https://www.google.com/\" rel=\"nofollow noreferrer\">https://www.google.com/</a></em>. Swagger does not allow me to do this either by the methods:</p>\n<pre><code>public String testUrl = &quot;https://www.google.com/&quot;;\n\n@GetMapping(&quot;/RedirectView&quot;)\npublic RedirectView redirectView() {\n    return new RedirectView(testUrl);\n}\n\n@GetMapping(&quot;/ResponseEntity&quot;)\npublic ResponseEntity&lt;Object&gt; responseEntity() throws URISyntaxException {\n    URI uri = new URI(testUrl);\n    HttpHeaders httpHeaders = new HttpHeaders();\n    httpHeaders.setLocation(uri);\n    return new ResponseEntity&lt;&gt;(httpHeaders, HttpStatus.SEE_OTHER);\n}\n\n@GetMapping(value = &quot;/HttpServletResponse&quot;)\npublic void httpServletResponse(HttpServletResponse httpServletResponse) throws IOException {\n    httpServletResponse.sendRedirect(testUrl);\n}\n</code></pre>\n<p>In response to these methods it sends me an error:\n<strong>Code:</strong> <em>Undocumented</em>\n<strong>Details:</strong> <em>TypeError: Failed to fetch</em>\nAfter opening the page code, I saw the following error in the console:\n<strong>Access to fetch at 'https://www.google.com/' (redirected from 'http://localhost:8080/HttpServletResponse') from origin 'http://localhost:8080' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</strong>\nI tried to solve the problem with CORS, even turned it off, but nothing seems to help me(</p>\n"},{"tags":["java","reactjs","spring-boot","websocket","spring-websocket"],"owner":{"account_id":27495475,"reputation":3,"user_id":20980046,"display_name":"abhishek yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695392477,"creation_date":1695388784,"question_id":77157986,"body_markdown":"I&#39;m getting the above error when trying to run the application. I&#39;m using spring boot on the backend and websocket. And using js and sockjs library.\r\nThis is the error I&#39;m getting:\r\n\r\n\r\n    ChatRoom.js:45 Uncaught TypeError: Cannot read properties of null (reading &#39;addEventListener&#39;)&lt;br/&gt;\r\n    at ChatRoom (ChatRoom.js:45:1)&lt;br/&gt;\r\n    at renderWithHooks (react-dom.development.js:16305:1)&lt;br/&gt;\r\n    at mountIndeterminateComponent (react-dom.development.js:20074:1)&lt;br/&gt;\r\n    at beginWork (react-dom.development.js:21587:1)&lt;br/&gt;\r\n    at beginWork$1 (react-dom.development.js:27426:1)&lt;br/&gt;\r\n    at performUnitOfWork (react-dom.development.js:26557:1)&lt;br/&gt;\r\n    at workLoopSync (react-dom.development.js:26466:1)&lt;br/&gt;\r\n    at renderRootSync (react-dom.development.js:26434:1)&lt;br/&gt;\r\n    at performSyncWorkOnRoot (react-dom.development.js:26085:1)&lt;br/&gt;\r\n    at flushSyncCallbacks (react-dom.development.js:12042:1)&lt;br/&gt;\r\n    \r\n    \r\n    \r\n    abstract-xhr.js:132     GET https://localhost:8282/NotificationService/info?t=1695387828667 &lt;br/&gt;\r\n    net::ERR_CERT_AUTHORITY_INVALID\r\n\r\n\r\nEverything is working fine if instead of creating a separate file for the frontend code I put all the code in the spring boot project itself.\r\n\r\nThis is the component/chatRoom.js file\r\n\r\n```\r\nconst ChatRoom = () =&gt; {\r\n\r\n    let socket = new SockJS(&quot;https://localhost:8282/NotificationService&quot;);\r\n\r\n    let stompClient = over(socket);\r\n\r\n    stompClient.connect({}, (frame) =&gt; {\r\n        console.log(&#39;WebSocket connection established.&#39;);\r\n\r\n        stompClient.subscribe(&#39;/notification/message&#39;, (message) =&gt; {\r\n            const notification = JSON.parse(message.body);\r\n            displayMessage(notification);\r\n        });\r\n    });\r\n\r\n    function sendMessage() {\r\n        const messageInput = document.getElementById(&#39;messageInput&#39;);\r\n        const message = messageInput.value.trim();\r\n\r\n        if (message) {\r\n            const notification = {\r\n                messageContent: message,\r\n                messageRecipient: &#39;&#39;, // Set the recipient if required\r\n                status: &#39;&#39;,\r\n                createdDate: new Date().toISOString(),\r\n            };\r\n\r\n            stompClient.send(&#39;/app/sendMessage&#39;, {}, JSON.stringify(notification));\r\n            messageInput.value = &#39;&#39;;\r\n        }\r\n    }\r\n\r\n    function displayMessage(notification) {\r\n        const messageList = document.getElementById(&#39;messageList&#39;);\r\n        const messageElement = document.createElement(&#39;li&#39;);\r\n        messageElement.textContent = notification.messageContent;\r\n        messageList.appendChild(messageElement);\r\n    }\r\n\r\n    document.getElementById(&#39;sendButton&#39;).addEventListener(&#39;click&#39;, sendMessage);\r\n    document.getElementById(&#39;messageInput&#39;).addEventListener(&#39;keypress&#39;, (event) =&gt; {\r\n        if (event.key === &#39;Enter&#39;) {\r\n            sendMessage();\r\n        }\r\n    });\r\n\r\n    return (\r\n        &lt;html&gt;\r\n            &lt;head&gt;\r\n                &lt;title&gt;WebSocket Chat&lt;/title&gt;\r\n            &lt;/head&gt;\r\n            &lt;body&gt;\r\n                &lt;h1&gt;Received Messages&lt;/h1&gt;\r\n                &lt;ul id=&quot;messageList&quot;&gt;\r\n                &lt;/ul&gt;\r\n                &lt;div&gt;\r\n                    &lt;label for=&quot;messageInput&quot;&gt;&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;messageInput&quot; placeholder=&quot;Type your message...&quot; /&gt;\r\n                    &lt;button id=&quot;sendButton&quot;&gt;Send&lt;/button&gt;\r\n                &lt;/div&gt;\r\n\r\n            &lt;/body&gt;\r\n        &lt;/html&gt;\r\n    )\r\n}\r\n\r\n\r\nexport default ChatRoom\r\n```\r\n\r\nThis is the app.js file\r\n\r\n```\r\nimport React from &#39;react&#39;;\r\nimport ChatRoom from &#39;./component/ChatRoom&#39;;\r\n\r\nfunction App() {\r\n  return (\r\n   &lt;ChatRoom /&gt;\r\n  )\r\n}\r\n\r\nexport default App;\r\n```\r\n\r\nThis is index.js file\r\n\r\n```\r\nimport React from &#39;react&#39;;\r\nimport ReactDOM from &#39;react-dom&#39;;\r\nimport &#39;./index.css&#39;;\r\nimport App from &#39;./App&#39;;\r\n\r\nReactDOM.render(\r\n  &lt;React.StrictMode&gt;\r\n    &lt;App /&gt;\r\n  &lt;/React.StrictMode&gt;,\r\n  document.getElementById(&#39;root&#39;)\r\n);\r\n```","title":"Cannot read properties of null (reading &#39;addEventListener&#39;) Getting error while connecting to sockjs","body":"<p>I'm getting the above error when trying to run the application. I'm using spring boot on the backend and websocket. And using js and sockjs library.\nThis is the error I'm getting:</p>\n<pre><code>ChatRoom.js:45 Uncaught TypeError: Cannot read properties of null (reading 'addEventListener')&lt;br/&gt;\nat ChatRoom (ChatRoom.js:45:1)&lt;br/&gt;\nat renderWithHooks (react-dom.development.js:16305:1)&lt;br/&gt;\nat mountIndeterminateComponent (react-dom.development.js:20074:1)&lt;br/&gt;\nat beginWork (react-dom.development.js:21587:1)&lt;br/&gt;\nat beginWork$1 (react-dom.development.js:27426:1)&lt;br/&gt;\nat performUnitOfWork (react-dom.development.js:26557:1)&lt;br/&gt;\nat workLoopSync (react-dom.development.js:26466:1)&lt;br/&gt;\nat renderRootSync (react-dom.development.js:26434:1)&lt;br/&gt;\nat performSyncWorkOnRoot (react-dom.development.js:26085:1)&lt;br/&gt;\nat flushSyncCallbacks (react-dom.development.js:12042:1)&lt;br/&gt;\n\n\n\nabstract-xhr.js:132     GET https://localhost:8282/NotificationService/info?t=1695387828667 &lt;br/&gt;\nnet::ERR_CERT_AUTHORITY_INVALID\n</code></pre>\n<p>Everything is working fine if instead of creating a separate file for the frontend code I put all the code in the spring boot project itself.</p>\n<p>This is the component/chatRoom.js file</p>\n<pre><code>const ChatRoom = () =&gt; {\n\n    let socket = new SockJS(&quot;https://localhost:8282/NotificationService&quot;);\n\n    let stompClient = over(socket);\n\n    stompClient.connect({}, (frame) =&gt; {\n        console.log('WebSocket connection established.');\n\n        stompClient.subscribe('/notification/message', (message) =&gt; {\n            const notification = JSON.parse(message.body);\n            displayMessage(notification);\n        });\n    });\n\n    function sendMessage() {\n        const messageInput = document.getElementById('messageInput');\n        const message = messageInput.value.trim();\n\n        if (message) {\n            const notification = {\n                messageContent: message,\n                messageRecipient: '', // Set the recipient if required\n                status: '',\n                createdDate: new Date().toISOString(),\n            };\n\n            stompClient.send('/app/sendMessage', {}, JSON.stringify(notification));\n            messageInput.value = '';\n        }\n    }\n\n    function displayMessage(notification) {\n        const messageList = document.getElementById('messageList');\n        const messageElement = document.createElement('li');\n        messageElement.textContent = notification.messageContent;\n        messageList.appendChild(messageElement);\n    }\n\n    document.getElementById('sendButton').addEventListener('click', sendMessage);\n    document.getElementById('messageInput').addEventListener('keypress', (event) =&gt; {\n        if (event.key === 'Enter') {\n            sendMessage();\n        }\n    });\n\n    return (\n        &lt;html&gt;\n            &lt;head&gt;\n                &lt;title&gt;WebSocket Chat&lt;/title&gt;\n            &lt;/head&gt;\n            &lt;body&gt;\n                &lt;h1&gt;Received Messages&lt;/h1&gt;\n                &lt;ul id=&quot;messageList&quot;&gt;\n                &lt;/ul&gt;\n                &lt;div&gt;\n                    &lt;label for=&quot;messageInput&quot;&gt;&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;messageInput&quot; placeholder=&quot;Type your message...&quot; /&gt;\n                    &lt;button id=&quot;sendButton&quot;&gt;Send&lt;/button&gt;\n                &lt;/div&gt;\n\n            &lt;/body&gt;\n        &lt;/html&gt;\n    )\n}\n\n\nexport default ChatRoom\n</code></pre>\n<p>This is the app.js file</p>\n<pre><code>import React from 'react';\nimport ChatRoom from './component/ChatRoom';\n\nfunction App() {\n  return (\n   &lt;ChatRoom /&gt;\n  )\n}\n\nexport default App;\n</code></pre>\n<p>This is index.js file</p>\n<pre><code>import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  &lt;React.StrictMode&gt;\n    &lt;App /&gt;\n  &lt;/React.StrictMode&gt;,\n  document.getElementById('root')\n);\n</code></pre>\n"},{"tags":["java","android","kotlin","unit-testing","nfc"],"comments":[{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":1,"creation_date":1695393923,"post_id":77158439,"comment_id":136022832,"body_markdown":"There are not really many other options, other than manual testing with a real device, this is what I do. As most of the testing needed is for how to correctly handle Exceptions and timing issues generated quite often by user behaviour.","body":"There are not really many other options, other than manual testing with a real device, this is what I do. As most of the testing needed is for how to correctly handle Exceptions and timing issues generated quite often by user behaviour."}],"owner":{"account_id":21201496,"reputation":1037,"user_id":15592048,"display_name":"Mirco Bellagamba"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695392407,"creation_date":1695392407,"question_id":77158439,"body_markdown":"I am currently working on an Android application that involves NFC tags. In my app, I need to write to NFC tags, and I would like to write some unit tests that directly interact with the [`android.nfc.Tag`][1] class. The following method is an example of the functionality I need to test:\r\n\r\n```kotlin\r\n    fun write(tag: Tag, message: NdefMessage) {\r\n        val ndef = Ndef.get(tag) ?: throw Exception()\r\n        ndef.connect()\r\n        ndef.writeNdefMessage(message)\r\n        ndef.close()\r\n    }\r\n```\r\n\r\nIs there a way to instantiate the `Tag` class in unit tests?\r\n\r\nThe constructor of the `Tag` class is hidden, making it impossible to instantiate it outside the `android.nfc` package. Additionally, it&#39;s not extensible because the Tag class is marked as final. With Android SDK 34, it&#39;s also not possible to use reflection. I attempted the solution mentioned in this StackOverflow thread (https://stackoverflow.com/questions/30841803/how-to-mock-a-android-nfc-tag-object-for-unit-testing), but I encountered the error `java.lang.NoSuchMethodException: android.nfc.Tag.createMockTag`. It seems that the Android team has restricted access to that method for privacy reasons. I&#39;ve also tried the way suggested in https://stackoverflow.com/questions/34882171/testing-an-app-by-faking-nfc-tag-scan but without success for my use case because the Tag is not well formed.\r\n\r\nMy last option is to mock it using [Mockito][2] or another mocking library, but I am hesitant to do so because it would mean testing with a mocked implementation rather than the actual one.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/nfc/Tag\r\n  [2]: https://site.mockito.org/","title":"How to test NFC Tag interaction in Android since android.nfc.Tag cannot be instatiated?","body":"<p>I am currently working on an Android application that involves NFC tags. In my app, I need to write to NFC tags, and I would like to write some unit tests that directly interact with the <a href=\"https://developer.android.com/reference/android/nfc/Tag\" rel=\"nofollow noreferrer\"><code>android.nfc.Tag</code></a> class. The following method is an example of the functionality I need to test:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    fun write(tag: Tag, message: NdefMessage) {\n        val ndef = Ndef.get(tag) ?: throw Exception()\n        ndef.connect()\n        ndef.writeNdefMessage(message)\n        ndef.close()\n    }\n</code></pre>\n<p>Is there a way to instantiate the <code>Tag</code> class in unit tests?</p>\n<p>The constructor of the <code>Tag</code> class is hidden, making it impossible to instantiate it outside the <code>android.nfc</code> package. Additionally, it's not extensible because the Tag class is marked as final. With Android SDK 34, it's also not possible to use reflection. I attempted the solution mentioned in this StackOverflow thread (<a href=\"https://stackoverflow.com/questions/30841803/how-to-mock-a-android-nfc-tag-object-for-unit-testing\">How to mock a Android NFC Tag object for unit testing</a>), but I encountered the error <code>java.lang.NoSuchMethodException: android.nfc.Tag.createMockTag</code>. It seems that the Android team has restricted access to that method for privacy reasons. I've also tried the way suggested in <a href=\"https://stackoverflow.com/questions/34882171/testing-an-app-by-faking-nfc-tag-scan\">Testing an app by faking NFC tag scan</a> but without success for my use case because the Tag is not well formed.</p>\n<p>My last option is to mock it using <a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">Mockito</a> or another mocking library, but I am hesitant to do so because it would mean testing with a mocked implementation rather than the actual one.</p>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha Ziober"},"score":0,"creation_date":1549640764,"post_id":54595752,"comment_id":95987829,"body_markdown":"Do you want to find longest common prefix? Or any longest common subpath?","body":"Do you want to find longest common prefix? Or any longest common subpath?"},{"owner":{"account_id":14034180,"reputation":523,"user_id":10137268,"display_name":"Paul Erlenmeyer"},"score":0,"creation_date":1549640820,"post_id":54595752,"comment_id":95987863,"body_markdown":"You could split the strings and compare the parts in between the &quot;/&quot;. In the end return the correct substring.","body":"You could split the strings and compare the parts in between the &quot;/&quot;. In the end return the correct substring."},{"owner":{"account_id":7090,"reputation":54514,"user_id":12149,"accept_rate":66,"display_name":"Alex Spurling"},"score":1,"creation_date":1549651707,"post_id":54595752,"comment_id":95993254,"body_markdown":"@MichaZiober the longest common prefix. It should find the nearest parent directory that is common to both paths.","body":"@MichaZiober the longest common prefix. It should find the nearest parent directory that is common to both paths."}],"answers":[{"tags":[],"owner":{"account_id":4540696,"reputation":7790,"user_id":3688648,"accept_rate":54,"display_name":"Felk"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1549642283,"creation_date":1549641745,"answer_id":54596165,"question_id":54595752,"body_markdown":"    Path path1 = Paths.get(&quot;/a/b/c/d/e&quot;);\r\n    Path path2 = Paths.get(&quot;/a/b/c/g/h&quot;);\r\n\r\nYou can relativize the paths to one another:\r\n\r\n    Path relativePath = path1.relativize(path2).normalize();\r\n    // result: ../../g/h\r\n\r\nand then go to the parent until the path ends in `..`\r\n\r\n    while(relativePath != null &amp;&amp; !relativePath.endsWith(&quot;..&quot;)) {\r\n        relativePath = relativePath.getParent();\r\n    }\r\n    // result: ../.. (but may also be null)\r\n\r\nthe result can be applied back to any of the two paths:\r\n\r\n    Path result = path1.resolve(relativePath).normalize()\r\n    // result: /a/b/c","title":"Find the longest Path common to two Paths in Java","body":"<pre><code>Path path1 = Paths.get(\"/a/b/c/d/e\");\nPath path2 = Paths.get(\"/a/b/c/g/h\");\n</code></pre>\n\n<p>You can relativize the paths to one another:</p>\n\n<pre><code>Path relativePath = path1.relativize(path2).normalize();\n// result: ../../g/h\n</code></pre>\n\n<p>and then go to the parent until the path ends in <code>..</code></p>\n\n<pre><code>while(relativePath != null &amp;&amp; !relativePath.endsWith(\"..\")) {\n    relativePath = relativePath.getParent();\n}\n// result: ../.. (but may also be null)\n</code></pre>\n\n<p>the result can be applied back to any of the two paths:</p>\n\n<pre><code>Path result = path1.resolve(relativePath).normalize()\n// result: /a/b/c\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21287,"reputation":37465,"user_id":51591,"accept_rate":82,"display_name":"Micha Ziober"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1549664822,"creation_date":1549642561,"answer_id":54596369,"question_id":54595752,"body_markdown":"We can generate all subpaths starting from the longest possible and check which two are equal:\r\n\r\n    private Path commonPath(Path path0, Path path1) {\r\n    \tif (path0.equals(path1)) {\r\n    \t\treturn path0;\r\n    \t}\r\n    \r\n    \tpath0 = path0.normalize();\r\n    \tpath1 = path1.normalize();\r\n    \tint minCount = Math.min(path0.getNameCount(), path1.getNameCount());\r\n    \tfor (int i = minCount; i &gt; 0; i--) {\r\n    \t\tPath sp0 = path0.subpath(0, i);\r\n    \t\tif (sp0.equals(path1.subpath(0, i))) {\r\n    \t\t\tString root = Objects.toString(path0.getRoot(), &quot;&quot;);\r\n    \t\t\treturn Paths.get(root, sp0.toString());\r\n    \t\t}\r\n    \t}\r\n    \r\n    \treturn path0.getRoot();\r\n    }\r\n\r\nAnd usage:\r\n\r\n    Map&lt;String, String&gt; paths = new LinkedHashMap&lt;&gt;();\r\n    paths.put(&quot;/a/b/c&quot;, &quot;/a/b/d&quot;);\r\n    paths.put(&quot;/a/&quot;, &quot;/a/b/d&quot;);\r\n    paths.put(&quot;/f/b/c&quot;, &quot;/a/b/d&quot;);\r\n    paths.put(&quot;/a/b/c/d/e&quot;, &quot;/a/b/f/../c/g&quot;);\r\n    paths.put(&quot;C:/Winnt/System32&quot;, &quot;C:/Winnt/System64&quot;);\r\n    \r\n    paths.forEach((k, v) -&gt;\r\n    \t\tSystem.out.println(\r\n    \t\t\t\tk + &quot; = &quot; + v + &quot; =&gt; &quot; + commonPath(Paths.get(k), Paths.get(v))));\r\n\r\nAbove code prints:\r\n\r\n    /a/b/c = /a/b/d =&gt; /a/b\r\n    /a/ = /a/b/d =&gt; /a\r\n    /f/b/c = /a/b/d =&gt; /\r\n    /a/b/c/d/e = /a/b/f/../c/g =&gt; /a/b/c\r\n    C:/Winnt/System32 = C:/Winnt/System64 =&gt; C:/Winnt","title":"Find the longest Path common to two Paths in Java","body":"<p>We can generate all subpaths starting from the longest possible and check which two are equal:</p>\n\n<pre><code>private Path commonPath(Path path0, Path path1) {\n    if (path0.equals(path1)) {\n        return path0;\n    }\n\n    path0 = path0.normalize();\n    path1 = path1.normalize();\n    int minCount = Math.min(path0.getNameCount(), path1.getNameCount());\n    for (int i = minCount; i &gt; 0; i--) {\n        Path sp0 = path0.subpath(0, i);\n        if (sp0.equals(path1.subpath(0, i))) {\n            String root = Objects.toString(path0.getRoot(), \"\");\n            return Paths.get(root, sp0.toString());\n        }\n    }\n\n    return path0.getRoot();\n}\n</code></pre>\n\n<p>And usage:</p>\n\n<pre><code>Map&lt;String, String&gt; paths = new LinkedHashMap&lt;&gt;();\npaths.put(\"/a/b/c\", \"/a/b/d\");\npaths.put(\"/a/\", \"/a/b/d\");\npaths.put(\"/f/b/c\", \"/a/b/d\");\npaths.put(\"/a/b/c/d/e\", \"/a/b/f/../c/g\");\npaths.put(\"C:/Winnt/System32\", \"C:/Winnt/System64\");\n\npaths.forEach((k, v) -&gt;\n        System.out.println(\n                k + \" = \" + v + \" =&gt; \" + commonPath(Paths.get(k), Paths.get(v))));\n</code></pre>\n\n<p>Above code prints:</p>\n\n<pre><code>/a/b/c = /a/b/d =&gt; /a/b\n/a/ = /a/b/d =&gt; /a\n/f/b/c = /a/b/d =&gt; /\n/a/b/c/d/e = /a/b/f/../c/g =&gt; /a/b/c\nC:/Winnt/System32 = C:/Winnt/System64 =&gt; C:/Winnt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1654043,"reputation":2659,"user_id":1524027,"display_name":"mnesarco"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549661459,"creation_date":1549645267,"answer_id":54597109,"question_id":54595752,"body_markdown":"Try this simple idea\r\n\r\n        Path a = Paths.get(&quot;a/b/c/d/e&quot;);\r\n        Path b = Paths.get(&quot;a/b/c/g/h&quot;);\r\n\r\n        // Normalize\r\n        a = a.normalize();\r\n        b = b.normalize();\r\n\r\n        // Create common root\r\n        Path common = null;\r\n        if (a.isAbsolute() &amp;&amp; b.isAbsolute() &amp;&amp; a.getRoot().equals(b.getRoot())) {\r\n                common = a.getRoot();\r\n        }\r\n        else if (!a.isAbsolute() &amp;&amp; !b.isAbsolute()) {\r\n                common = Paths.get(&quot;&quot;);\r\n        }\r\n\r\n        // Iterate from root until names differ\r\n        if (common != null) {\r\n                int n = Math.min(a.getNameCount(), b.getNameCount());\r\n                for (int i=0; i&lt;n; i++) {\r\n                        if (a.getName(i).equals(b.getName(i))) {\r\n                                common = common.resolve(a.getName(i));\r\n                        }\r\n                        else {\r\n                                break;\r\n                        }\r\n                }\r\n        }\r\n\r\n        // Show\r\n        System.out.println(common);\r\n","title":"Find the longest Path common to two Paths in Java","body":"<p>Try this simple idea</p>\n\n<pre><code>    Path a = Paths.get(\"a/b/c/d/e\");\n    Path b = Paths.get(\"a/b/c/g/h\");\n\n    // Normalize\n    a = a.normalize();\n    b = b.normalize();\n\n    // Create common root\n    Path common = null;\n    if (a.isAbsolute() &amp;&amp; b.isAbsolute() &amp;&amp; a.getRoot().equals(b.getRoot())) {\n            common = a.getRoot();\n    }\n    else if (!a.isAbsolute() &amp;&amp; !b.isAbsolute()) {\n            common = Paths.get(\"\");\n    }\n\n    // Iterate from root until names differ\n    if (common != null) {\n            int n = Math.min(a.getNameCount(), b.getNameCount());\n            for (int i=0; i&lt;n; i++) {\n                    if (a.getName(i).equals(b.getName(i))) {\n                            common = common.resolve(a.getName(i));\n                    }\n                    else {\n                            break;\n                    }\n            }\n    }\n\n    // Show\n    System.out.println(common);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695392313,"creation_date":1639669061,"answer_id":70381752,"question_id":54595752,"body_markdown":"Whatever the question, it&#39;s always fun trying to answer using streams:\r\n\r\n    public static Path commonPath(Path a, Path b) {\r\n        Path other = b.normalize();\r\n        return Stream.iterate(a.normalize(), Path::getParent)\r\n            .takeWhile(Objects::nonNull)\r\n            .filter(parent -&gt; Stream.iterate(other, Path::getParent).takeWhile(Objects::nonNull)\r\n                                    .anyMatch(x -&gt; Objects.equals(x, parent)))\r\n            .findFirst().orElse(null);\r\n    }\r\n\r\nThis works on Windows / Linux, for example try the test data in @Micha Ziober answer. This just iterates up the parent hierarchy of first until it meets a parent of the other. \r\n\r\nWith the suggestion by Bass in comments, the common path check is more concise using the other version of `Stream.iterate`:\r\n\r\n    public static Path commonPath(Path a, Path b) {\r\n        return Stream.iterate(a.normalize(), Objects::nonNull, Path::getParent)\r\n            .filter(parent -&gt; Stream.iterate(b.normalize(), Objects::nonNull, Path::getParent)\r\n                                    .anyMatch(parent::equals))\r\n            .findFirst().orElse(null);\r\n    }\r\n\r\nA small refactoring could pull out `Stream.iterate(path.normalize(), Objects::nonNull, Path::getParent)` to a new method `Stream&lt;Path&gt; parentsOf(Path path)` as it is repeated twice above.\r\n\r\n\r\n","title":"Find the longest Path common to two Paths in Java","body":"<p>Whatever the question, it's always fun trying to answer using streams:</p>\n<pre><code>public static Path commonPath(Path a, Path b) {\n    Path other = b.normalize();\n    return Stream.iterate(a.normalize(), Path::getParent)\n        .takeWhile(Objects::nonNull)\n        .filter(parent -&gt; Stream.iterate(other, Path::getParent).takeWhile(Objects::nonNull)\n                                .anyMatch(x -&gt; Objects.equals(x, parent)))\n        .findFirst().orElse(null);\n}\n</code></pre>\n<p>This works on Windows / Linux, for example try the test data in @Micha Ziober answer. This just iterates up the parent hierarchy of first until it meets a parent of the other.</p>\n<p>With the suggestion by Bass in comments, the common path check is more concise using the other version of <code>Stream.iterate</code>:</p>\n<pre><code>public static Path commonPath(Path a, Path b) {\n    return Stream.iterate(a.normalize(), Objects::nonNull, Path::getParent)\n        .filter(parent -&gt; Stream.iterate(b.normalize(), Objects::nonNull, Path::getParent)\n                                .anyMatch(parent::equals))\n        .findFirst().orElse(null);\n}\n</code></pre>\n<p>A small refactoring could pull out <code>Stream.iterate(path.normalize(), Objects::nonNull, Path::getParent)</code> to a new method <code>Stream&lt;Path&gt; parentsOf(Path path)</code> as it is repeated twice above.</p>\n"},{"tags":[],"owner":{"account_id":1418937,"reputation":5014,"user_id":1343979,"accept_rate":80,"display_name":"Bass"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695389800,"creation_date":1695389800,"answer_id":77158104,"question_id":54595752,"body_markdown":"While the [answer](https://stackoverflow.com/a/70381752/1343979) by [DuncG](https://stackoverflow.com/users/4712734/duncg) is definitely the most concise and probably the most efficient one, I&#39;ll add my solution, too.\r\n\r\nConsider we have a function to transform a `Path` into a `Stream` of path entries:\r\n\r\n```java\r\n@NonNull Stream&lt;@NonNull Path&gt; pathEntries(final @NonNull Path path) {\r\n    return Stream.concat(Stream.ofNullable(path.getRoot()), StreamSupport.stream(path.spliterator(), false));\r\n}\r\n```\r\n\r\nNow, consider we have another helper function that [zips two streams](https://stackoverflow.com/a/43059312/1343979) together (e.g.: `Streams.zip()` from _Guava_):\r\n\r\n```java\r\n&lt;A, B, R&gt; @NonNull Stream&lt;R&gt; zip(\r\n        final @NonNull Stream&lt;A&gt; streamA,\r\n        final @NonNull Stream&lt;B&gt; streamB,\r\n        final BiFunction&lt;? super A, ? super B, ? extends R&gt; function\r\n) {\r\n    final Spliterator&lt;A&gt; splitrA = streamA.spliterator();\r\n    final Spliterator&lt;B&gt; splitrB = streamB.spliterator();\r\n    final int characteristics = splitrA.characteristics()\r\n            &amp; splitrB.characteristics()\r\n            &amp; (Spliterator.SIZED | Spliterator.ORDERED);\r\n    final Iterator&lt;A&gt; itrA = Spliterators.iterator(splitrA);\r\n    final Iterator&lt;B&gt; itrB = Spliterators.iterator(splitrB);\r\n    return StreamSupport.stream(new AbstractSpliterator&lt;R&gt;(Math.min(splitrA.estimateSize(), splitrB.estimateSize()), characteristics) {\r\n        @Override\r\n        public boolean tryAdvance(final @NonNull Consumer&lt;? super R&gt; action) {\r\n            if (itrA.hasNext() &amp;&amp; itrB.hasNext()) {\r\n                action.accept(function.apply(itrA.next(), itrB.next()));\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    }, false)\r\n            .onClose(streamA::close)\r\n            .onClose(streamB::close);\r\n}\r\n```\r\n\r\nThen, the solution will look like this:\r\n\r\n```java\r\n@Nullable Path commonOrNull(final @NonNull Path left, final @NonNull Path right) {\r\n    return zip(\r\n            pathEntries(left.normalize()),\r\n            pathEntries(right.normalize()),\r\n            (l, r) -&gt; l.equals(r) ? l : null\r\n    )\r\n            .takeWhile(Objects::nonNull)\r\n            .reduce(Path::resolve)\r\n            .orElse(null);\r\n}\r\n```\r\n\r\nThis will also work on _Windows_, returning `null` for any two paths that don&#39;t share a common file system root, like `C:\\foo` and `D:\\foo`.","title":"Find the longest Path common to two Paths in Java","body":"<p>While the <a href=\"https://stackoverflow.com/a/70381752/1343979\">answer</a> by <a href=\"https://stackoverflow.com/users/4712734/duncg\">DuncG</a> is definitely the most concise and probably the most efficient one, I'll add my solution, too.</p>\n<p>Consider we have a function to transform a <code>Path</code> into a <code>Stream</code> of path entries:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NonNull Stream&lt;@NonNull Path&gt; pathEntries(final @NonNull Path path) {\n    return Stream.concat(Stream.ofNullable(path.getRoot()), StreamSupport.stream(path.spliterator(), false));\n}\n</code></pre>\n<p>Now, consider we have another helper function that <a href=\"https://stackoverflow.com/a/43059312/1343979\">zips two streams</a> together (e.g.: <code>Streams.zip()</code> from <em>Guava</em>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;A, B, R&gt; @NonNull Stream&lt;R&gt; zip(\n        final @NonNull Stream&lt;A&gt; streamA,\n        final @NonNull Stream&lt;B&gt; streamB,\n        final BiFunction&lt;? super A, ? super B, ? extends R&gt; function\n) {\n    final Spliterator&lt;A&gt; splitrA = streamA.spliterator();\n    final Spliterator&lt;B&gt; splitrB = streamB.spliterator();\n    final int characteristics = splitrA.characteristics()\n            &amp; splitrB.characteristics()\n            &amp; (Spliterator.SIZED | Spliterator.ORDERED);\n    final Iterator&lt;A&gt; itrA = Spliterators.iterator(splitrA);\n    final Iterator&lt;B&gt; itrB = Spliterators.iterator(splitrB);\n    return StreamSupport.stream(new AbstractSpliterator&lt;R&gt;(Math.min(splitrA.estimateSize(), splitrB.estimateSize()), characteristics) {\n        @Override\n        public boolean tryAdvance(final @NonNull Consumer&lt;? super R&gt; action) {\n            if (itrA.hasNext() &amp;&amp; itrB.hasNext()) {\n                action.accept(function.apply(itrA.next(), itrB.next()));\n                return true;\n            }\n\n            return false;\n        }\n    }, false)\n            .onClose(streamA::close)\n            .onClose(streamB::close);\n}\n</code></pre>\n<p>Then, the solution will look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Nullable Path commonOrNull(final @NonNull Path left, final @NonNull Path right) {\n    return zip(\n            pathEntries(left.normalize()),\n            pathEntries(right.normalize()),\n            (l, r) -&gt; l.equals(r) ? l : null\n    )\n            .takeWhile(Objects::nonNull)\n            .reduce(Path::resolve)\n            .orElse(null);\n}\n</code></pre>\n<p>This will also work on <em>Windows</em>, returning <code>null</code> for any two paths that don't share a common file system root, like <code>C:\\foo</code> and <code>D:\\foo</code>.</p>\n"}],"owner":{"account_id":7090,"reputation":54514,"user_id":12149,"accept_rate":66,"display_name":"Alex Spurling"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1689,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":5,"score":5,"last_activity_date":1695392313,"creation_date":1549640300,"question_id":54595752,"body_markdown":"If I have two Paths, how can I find the longest common Path of the two?\r\n\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    \r\n    Path common(Path pathA, Path pathB) {\r\n        ...\r\n    }\r\n    ...\r\n    common(Paths.get(&quot;/a/b/c/d/e&quot;), Paths.get(&quot;/a/b/c/g/h&quot;))\r\n\r\nExpected output: \r\n    \r\n    Paths.get(&quot;/a/b/c&quot;)","title":"Find the longest Path common to two Paths in Java","body":"<p>If I have two Paths, how can I find the longest common Path of the two?</p>\n\n<pre><code>import java.nio.file.Path;\nimport java.nio.file.Paths;\n\nPath common(Path pathA, Path pathB) {\n    ...\n}\n...\ncommon(Paths.get(\"/a/b/c/d/e\"), Paths.get(\"/a/b/c/g/h\"))\n</code></pre>\n\n<p>Expected output: </p>\n\n<pre><code>Paths.get(\"/a/b/c\")\n</code></pre>\n"},{"tags":["java","spring-boot","microservices"],"owner":{"account_id":3405565,"reputation":840,"user_id":2856694,"accept_rate":30,"display_name":"Victor Soares"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695392238,"creation_date":1695392238,"question_id":77158421,"body_markdown":"I have a monorepo with a parent POM and several modules. One of the modules (Module A) is a Spring Boot application that has a dependency on another module (Module B). Both have their respective application.properties files.\r\n\r\nHowever, when Module A makes a call to Module B, an error occurs because the called module cannot find the values in its respective .properties file (using @Value).\r\n\r\n    Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder &#39;kafka.bootstrap-servers&#39; in value &quot;${kafka.bootstrap-servers}&quot;\r\n\r\nBoth properties are in the Spring applicationContext, but I believe the problem is that Module B does not manage the application.properties when the call comes from another module.\r\n\r\nDoes anyone know how to solve this?\r\n\r\n**applicationContext A:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**ApplicationContext B:**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nzxAD.png\r\n  [2]: https://i.stack.imgur.com/FIkQN.png","title":"Spring Boot - Multi Module and problem to find application.properties","body":"<p>I have a monorepo with a parent POM and several modules. One of the modules (Module A) is a Spring Boot application that has a dependency on another module (Module B). Both have their respective application.properties files.</p>\n<p>However, when Module A makes a call to Module B, an error occurs because the called module cannot find the values in its respective .properties file (using @Value).</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'kafka.bootstrap-servers' in value &quot;${kafka.bootstrap-servers}&quot;\n</code></pre>\n<p>Both properties are in the Spring applicationContext, but I believe the problem is that Module B does not manage the application.properties when the call comes from another module.</p>\n<p>Does anyone know how to solve this?</p>\n<p><strong>applicationContext A:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/nzxAD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nzxAD.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>ApplicationContext B:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/FIkQN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FIkQN.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","datetime","java-8","timezone","timezone-offset"],"comments":[{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1515420729,"post_id":48151335,"comment_id":83282452,"body_markdown":"Do you mean you receive a `DateTimeFormatter` object produced from one of the `DateTimeFormatter.ofPattern` methods (after this has parsed the format pattern string)? Or do you mean that you receive a `TemporalAccessor` that comes from one of the `DateTimeFormatter.parse` methods? Sorry, its not perfectly clear.","body":"Do you mean you receive a <code>DateTimeFormatter</code> object produced from one of the <code>DateTimeFormatter.ofPattern</code> methods (after this has parsed the format pattern string)? Or do you mean that you receive a <code>TemporalAccessor</code> that comes from one of the <code>DateTimeFormatter.parse</code> methods? Sorry, its not perfectly clear."},{"owner":{"account_id":2906108,"reputation":42988,"user_id":2491410,"accept_rate":100,"display_name":"Meno Hochschild"},"score":0,"creation_date":1515422754,"post_id":48151335,"comment_id":83283731,"body_markdown":"IMHO your idea to &quot;serialize&quot; formatters is not a good idea. It was a wise design decision not to make `DateTimeFormatter` serializable. Instead of &quot;formatting&quot; and &quot;reparsing&quot; inherently complex objects like formatters, you could better just send the format pattern strings together with a zone-id and maybe a locale, too, so the receiver can easily reconstruct the original formatter.","body":"IMHO your idea to &quot;serialize&quot; formatters is not a good idea. It was a wise design decision not to make <code>DateTimeFormatter</code> serializable. Instead of &quot;formatting&quot; and &quot;reparsing&quot; inherently complex objects like formatters, you could better just send the format pattern strings together with a zone-id and maybe a locale, too, so the receiver can easily reconstruct the original formatter."}],"answers":[{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1556452078,"creation_date":1515423406,"answer_id":48152779,"question_id":48151335,"body_markdown":"I see what you mean, and I havent found the perfect solution either, but I thought Id share a couple of options.\r\n\r\nIf its OK for you to set an offset like UTC to be used if the formatter cannot parse a zone or offset, I suggest:\r\n\r\n\tformatter = new DateTimeFormatterBuilder().append(formatter)\r\n\t\t\t.parseDefaulting(ChronoField.OFFSET_SECONDS, ZoneOffset.UTC.getTotalSeconds())\r\n\t\t\t.toFormatter();\r\n\r\nI have not yet found a case where this would do any harm. If the formatter already parses zone or offset information (or contains a default offset), this will have no effect. If it doesnt, the specified default offset will be used.\r\n\r\nThe above doesnt work for enforcing a time zone with variable offset (like a time zone with summer time (DST)). To enforce one, I believe youre supposed to parse, get and catch the exception and then enforce the time zone the way you have already found:\r\n\r\n\tZonedDateTime dateTime;\r\n\ttry {\r\n\t\tdateTime = ZonedDateTime.parse(dateTimeString, formatter);\r\n\t} catch (DateTimeParseException dtpe) {\r\n\t\tdateTime = ZonedDateTime.parse(dateTimeString, \r\n\t\t\t\t\t\tformatter.withZone(ZoneId.of(&quot;Europe/Amsterdam&quot;)));\r\n\t}\r\n\r\nThe downside is that catch clause will also catch errors not related to missing offset or zone. You might try to parse the exception message, but I believe that that just leaves you with a problem similar to the one you started out from. I would not bother.\r\n\r\nIMHO what we are really missing is a getter to get the fields that the formatter knows how to format and parse. For complicated formatters, the design and use of such a method would be challenging, though, so I tend to understand why they didnt provide one.","title":"Determine if a Java 8 DateTimeFormatter includes enough timezone information","body":"<p>I see what you mean, and I havent found the perfect solution either, but I thought Id share a couple of options.</p>\n\n<p>If its OK for you to set an offset like UTC to be used if the formatter cannot parse a zone or offset, I suggest:</p>\n\n<pre><code>formatter = new DateTimeFormatterBuilder().append(formatter)\n        .parseDefaulting(ChronoField.OFFSET_SECONDS, ZoneOffset.UTC.getTotalSeconds())\n        .toFormatter();\n</code></pre>\n\n<p>I have not yet found a case where this would do any harm. If the formatter already parses zone or offset information (or contains a default offset), this will have no effect. If it doesnt, the specified default offset will be used.</p>\n\n<p>The above doesnt work for enforcing a time zone with variable offset (like a time zone with summer time (DST)). To enforce one, I believe youre supposed to parse, get and catch the exception and then enforce the time zone the way you have already found:</p>\n\n<pre><code>ZonedDateTime dateTime;\ntry {\n    dateTime = ZonedDateTime.parse(dateTimeString, formatter);\n} catch (DateTimeParseException dtpe) {\n    dateTime = ZonedDateTime.parse(dateTimeString, \n                    formatter.withZone(ZoneId.of(\"Europe/Amsterdam\")));\n}\n</code></pre>\n\n<p>The downside is that catch clause will also catch errors not related to missing offset or zone. You might try to parse the exception message, but I believe that that just leaves you with a problem similar to the one you started out from. I would not bother.</p>\n\n<p>IMHO what we are really missing is a getter to get the fields that the formatter knows how to format and parse. For complicated formatters, the design and use of such a method would be challenging, though, so I tend to understand why they didnt provide one.</p>\n"},{"tags":[],"owner":{"account_id":2500328,"reputation":11,"user_id":2175627,"display_name":"user2175627"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695391843,"creation_date":1695391843,"answer_id":77158376,"question_id":48151335,"body_markdown":"I know this has been asked a long time ago, but in case someone else needs it, this is the approach I took facing the same problem:\r\n\r\n    public boolean formatterOutputsOffset(DateTimeFormatter dateTimeFormatter) {\r\n            DateTimeFormatter forTest = new DateTimeFormatterBuilder()\r\n                    .append(dateTimeFormatter)\r\n                    .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\r\n                    .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\r\n                    .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0)\r\n                    .toFormatter();\r\n            String dateTime = forTest.format(Instant.now().atOffset(ZoneOffset.UTC));\r\n            try {\r\n                OffsetDateTime.parse(dateTime, forTest);\r\n                return true;\r\n            } catch (DateTimeException ex) {\r\n                return false;\r\n            }\r\n        }\r\n\r\nHere I&#39;m testing if the the formatter can convert the current instant into a date string that it can convert back into OffsetDateTime. The parseDefaulting methods are invoked in case the formatter loses the hour, minute or second information which are required for the conversion back to OffsetDateTime. In case you expect loss of year, month or day you can add the corresponding parseDefaulting(...). \r\n\r\nThe method checks for the pattern availability of an offset, if you need a test for zones you can write practically the same method using ZonedDateTime.parse(...)","title":"Determine if a Java 8 DateTimeFormatter includes enough timezone information","body":"<p>I know this has been asked a long time ago, but in case someone else needs it, this is the approach I took facing the same problem:</p>\n<pre><code>public boolean formatterOutputsOffset(DateTimeFormatter dateTimeFormatter) {\n        DateTimeFormatter forTest = new DateTimeFormatterBuilder()\n                .append(dateTimeFormatter)\n                .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\n                .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\n                .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0)\n                .toFormatter();\n        String dateTime = forTest.format(Instant.now().atOffset(ZoneOffset.UTC));\n        try {\n            OffsetDateTime.parse(dateTime, forTest);\n            return true;\n        } catch (DateTimeException ex) {\n            return false;\n        }\n    }\n</code></pre>\n<p>Here I'm testing if the the formatter can convert the current instant into a date string that it can convert back into OffsetDateTime. The parseDefaulting methods are invoked in case the formatter loses the hour, minute or second information which are required for the conversion back to OffsetDateTime. In case you expect loss of year, month or day you can add the corresponding parseDefaulting(...).</p>\n<p>The method checks for the pattern availability of an offset, if you need a test for zones you can write practically the same method using ZonedDateTime.parse(...)</p>\n"}],"owner":{"account_id":39564,"reputation":10494,"user_id":114196,"accept_rate":80,"display_name":"Niels Basjes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1656,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":48152779,"answer_count":2,"score":3,"last_activity_date":1695391843,"creation_date":1515418183,"question_id":48151335,"body_markdown":"I have some code that receives a parsed `DateTimeFormatter` instance.\r\nNow in some cases I have seen that there is no timezone/offset information in there and thus I run into parsing errors (exceptions).\r\n\r\nTo avoid those errors I want to &#39;force&#39; a default timezone/offset in like `ZoneOffset.UTC` when nothing is specified.\r\n\r\nSo far I have not yet been able to find a &#39;clean and documented&#39; way of doing this. \r\n\r\nIn this example the `getZone()` method returns `null`\r\n```\r\nParseCaseSensitive(false)Value(DayOfMonth,2)&#39;/&#39;Text(MonthOfYear,SHORT)&#39;/&#39;Value(Year,4)&#39; &#39;Value(HourOfDay,2)&#39;:&#39;Value(MinuteOfHour,2)&#39;:&#39;Value(SecondOfMinute,2)&#39;.&#39;Value(MilliOfSecond,3)&#39; &#39;Offset(+HHMM,&#39;+0000&#39;)\r\n```\r\n\r\n\r\nThe best I have come up with so far is to do a &#39;toString()&#39; and then check if a desired substring is in there like this:\r\n\r\n    String formatterExpression = formatter.toString();\r\n    if (formatterExpression.lastIndexOf(&quot;Offset(&quot;) == -1 &amp;&amp;\r\n        formatterExpression.lastIndexOf(&quot;ZoneText(&quot;) == -1\r\n        ) {\r\n        formatter = formatter.withZone(defaultZone);\r\n        LOG.error(&quot;The timestamp format \\&quot;{}\\&quot; does NOT contain a timezone so we assume \\&quot;{}\\&quot;.&quot;,\r\n            formatter.toString(), defaultZone.getDisplayName(TextStyle.SHORT, Locale.ENGLISH));\r\n    }\r\n\r\nWhat is the proper way of doing this?\r\n\r\n***Additional background information***\r\nThis code is part of a system that allows parsing date/time text for which the format was specified using the strftime format.\r\n\r\nSee:\r\n\r\n - https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/antlr4/nl/basjes/parse/strftime/StrfTime.g4\r\n - https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/java/nl/basjes/parse/httpdlog/dissectors/StrfTimeToDateTimeFormatter.java\r\n","title":"Determine if a Java 8 DateTimeFormatter includes enough timezone information","body":"<p>I have some code that receives a parsed <code>DateTimeFormatter</code> instance.\nNow in some cases I have seen that there is no timezone/offset information in there and thus I run into parsing errors (exceptions).</p>\n\n<p>To avoid those errors I want to 'force' a default timezone/offset in like <code>ZoneOffset.UTC</code> when nothing is specified.</p>\n\n<p>So far I have not yet been able to find a 'clean and documented' way of doing this. </p>\n\n<p>In this example the <code>getZone()</code> method returns <code>null</code></p>\n\n<pre><code>ParseCaseSensitive(false)Value(DayOfMonth,2)'/'Text(MonthOfYear,SHORT)'/'Value(Year,4)' 'Value(HourOfDay,2)':'Value(MinuteOfHour,2)':'Value(SecondOfMinute,2)'.'Value(MilliOfSecond,3)' 'Offset(+HHMM,'+0000')\n</code></pre>\n\n<p>The best I have come up with so far is to do a 'toString()' and then check if a desired substring is in there like this:</p>\n\n<pre><code>String formatterExpression = formatter.toString();\nif (formatterExpression.lastIndexOf(\"Offset(\") == -1 &amp;&amp;\n    formatterExpression.lastIndexOf(\"ZoneText(\") == -1\n    ) {\n    formatter = formatter.withZone(defaultZone);\n    LOG.error(\"The timestamp format \\\"{}\\\" does NOT contain a timezone so we assume \\\"{}\\\".\",\n        formatter.toString(), defaultZone.getDisplayName(TextStyle.SHORT, Locale.ENGLISH));\n}\n</code></pre>\n\n<p>What is the proper way of doing this?</p>\n\n<p><strong><em>Additional background information</em></strong>\nThis code is part of a system that allows parsing date/time text for which the format was specified using the strftime format.</p>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/antlr4/nl/basjes/parse/strftime/StrfTime.g4\" rel=\"nofollow noreferrer\">https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/antlr4/nl/basjes/parse/strftime/StrfTime.g4</a></li>\n<li><a href=\"https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/java/nl/basjes/parse/httpdlog/dissectors/StrfTimeToDateTimeFormatter.java\" rel=\"nofollow noreferrer\">https://github.com/nielsbasjes/logparser/blob/master/httpdlog/httpdlog-parser/src/main/java/nl/basjes/parse/httpdlog/dissectors/StrfTimeToDateTimeFormatter.java</a></li>\n</ul>\n"},{"tags":["java","maven","karate"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1689029703,"post_id":76657730,"comment_id":135152716,"body_markdown":"See also [_Run a single test method with maven_](https://stackoverflow.com/q/1873995/230513).","body":"See also <a href=\"https://stackoverflow.com/q/1873995/230513\"><i>Run a single test method with maven</i></a>."}],"answers":[{"tags":[],"owner":{"account_id":3228074,"reputation":550,"user_id":2723924,"display_name":"Shreyansh Jain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689033287,"creation_date":1689033287,"answer_id":76657965,"question_id":76657730,"body_markdown":"Replace -Dkarate.en=qa to -Dkarate.env=qa ","title":"Unknown lifecycle phase while executing maven command","body":"<p>Replace -Dkarate.en=qa to -Dkarate.env=qa</p>\n"},{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689048082,"creation_date":1689048082,"answer_id":76658632,"question_id":76657730,"body_markdown":"Try:\r\n\r\n    -Dkarate.options=&quot;t @sampletest&quot;\r\n\r\n","title":"Unknown lifecycle phase while executing maven command","body":"<p>Try:</p>\n<pre><code>-Dkarate.options=&quot;t @sampletest&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9799402,"reputation":11,"user_id":7261208,"display_name":"Tebogo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695391811,"creation_date":1695391811,"answer_id":77158374,"question_id":76657730,"body_markdown":"I had the same issue, and it was resolved when I switched intellij terminal from using powershell to using cmd","title":"Unknown lifecycle phase while executing maven command","body":"<p>I had the same issue, and it was resolved when I switched intellij terminal from using powershell to using cmd</p>\n"}],"owner":{"account_id":18805726,"reputation":135,"user_id":13715111,"display_name":"satishsrip"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1695391811,"creation_date":1689028563,"question_id":76657730,"body_markdown":"\r\n\r\nI am using openjdk 17.6(temurin 17) and maven 3.9.3 to run my karate framework and I am getting following error while executing men command\r\n\r\n**Unknown lifecycle phase .env. You must specify valid lifecycle phase**\r\n\r\nMaven command\r\nMvn clean test -Dkarate.env=qa -Dkarate.options=-tags@sampletest\r\n\r\nNot sure why mvn command is failing.please help \r\n\r\n\r\n\r\nAdding additional detials \r\n\r\nfollowing changes have been made to pom file \r\n```\r\n&lt;maven.compiler.version&gt;3.10.1&lt;/maven.compiler.version&gt;\r\n&lt;maven.surefire.plugin&gt;3.1.0&lt;/maven.surefire.plugin&gt;\r\n&lt;karate.version&gt;1.4.1RC2&lt;/karate.version&gt;\r\n&lt;aspectj.version&gt;1.8.10&lt;/aspectj.version&gt;\r\n```\r\n\r\ngetting following issue \r\nFailed to execute goal org.apache.maven.plugin:3.10.1:testCompile\r\nFatal error compiling: Invalid target release 17\r\n\r\n","title":"Unknown lifecycle phase while executing maven command","body":"<p>I am using openjdk 17.6(temurin 17) and maven 3.9.3 to run my karate framework and I am getting following error while executing men command</p>\n<p><strong>Unknown lifecycle phase .env. You must specify valid lifecycle phase</strong></p>\n<p>Maven command\nMvn clean test -Dkarate.env=qa -Dkarate.options=-tags@sampletest</p>\n<p>Not sure why mvn command is failing.please help</p>\n<p>Adding additional detials</p>\n<p>following changes have been made to pom file</p>\n<pre><code>&lt;maven.compiler.version&gt;3.10.1&lt;/maven.compiler.version&gt;\n&lt;maven.surefire.plugin&gt;3.1.0&lt;/maven.surefire.plugin&gt;\n&lt;karate.version&gt;1.4.1RC2&lt;/karate.version&gt;\n&lt;aspectj.version&gt;1.8.10&lt;/aspectj.version&gt;\n</code></pre>\n<p>getting following issue\nFailed to execute goal org.apache.maven.plugin:3.10.1:testCompile\nFatal error compiling: Invalid target release 17</p>\n"},{"tags":["java","tomcat","centos","webserver","pki"],"owner":{"account_id":25600556,"reputation":11,"user_id":19375640,"display_name":"codemaster1101"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695391225,"creation_date":1695391225,"question_id":77158295,"body_markdown":"I am using Dogtag PKI 11.4.2 on CentOS 9\r\nI am facing an issue where Tomcat can not find the static css/image files as the GUI for dogtag is actually missing!\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fBu97.png\r\nThis  is the command i am using for installing the PKI:\r\n\r\n```\r\nsudo dnf install pki-server pki-tools pki-ca 389-ds-base -y\r\n\r\n```\r\n\r\nI tried looking up the common-ui folder on the internet but i could not find it anywhere :(","title":"Dogtag PKI &quot;/usr/share/pki/common-ui&quot; is missing","body":"<p>I am using Dogtag PKI 11.4.2 on CentOS 9\nI am facing an issue where Tomcat can not find the static css/image files as the GUI for dogtag is actually missing!</p>\n<p><a href=\"https://i.stack.imgur.com/fBu97.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fBu97.png\" alt=\"enter image description here\" /></a></p>\n<p>This  is the command i am using for installing the PKI:</p>\n<pre><code>sudo dnf install pki-server pki-tools pki-ca 389-ds-base -y\n\n</code></pre>\n<p>I tried looking up the common-ui folder on the internet but i could not find it anywhere :(</p>\n"},{"tags":["java","json","jackson","gson"],"answers":[{"tags":[],"owner":{"account_id":1202941,"reputation":1603,"user_id":1173227,"accept_rate":67,"display_name":"Vinit Prajapati"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1403177676,"creation_date":1403177026,"answer_id":24305400,"question_id":24305341,"body_markdown":"It is more easy\r\n\r\n    MyType myType = new ObjectMapper().readValue(input, new TypeReference&lt;List&lt;MyType&gt;&gt;() {});\r\n\r\n\r\nupdated answer.","title":"Parsing a list of objects with Jackson","body":"<p>It is more easy</p>\n\n<pre><code>MyType myType = new ObjectMapper().readValue(input, new TypeReference&lt;List&lt;MyType&gt;&gt;() {});\n</code></pre>\n\n<p>updated answer.</p>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1403177836,"creation_date":1403177836,"answer_id":24305656,"question_id":24305341,"body_markdown":"I&#39;ve found the solution in the mean time. Apparently, Jackson provides its own way of working around this:\r\n\r\n    List&lt;MyType&gt; list = new ObjectMapper().readValue(input, CollectionType.construct(List.class, SimpleType.construct(MyType.class));","title":"Parsing a list of objects with Jackson","body":"<p>I've found the solution in the mean time. Apparently, Jackson provides its own way of working around this:</p>\n\n<pre><code>List&lt;MyType&gt; list = new ObjectMapper().readValue(input, CollectionType.construct(List.class, SimpleType.construct(MyType.class));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10294926,"reputation":46,"user_id":12526166,"display_name":"pierre-vr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695391185,"creation_date":1695391185,"answer_id":77158291,"question_id":24305341,"body_markdown":"The following works with Jackson 2.7 and higher. It doesn&#39;t use the deprecated static methods to get the TypeFactory. Instead, it gets the TypeFactory from the object mapper.\r\n\r\n```\r\nfinal ObjectMapper mapper = new ObjectMapper();\r\n\r\nmapper.readValue(input, mapper.getTypeFactory().constructCollectionType(List.class, MyType.class));\r\n```","title":"Parsing a list of objects with Jackson","body":"<p>The following works with Jackson 2.7 and higher. It doesn't use the deprecated static methods to get the TypeFactory. Instead, it gets the TypeFactory from the object mapper.</p>\n<pre><code>final ObjectMapper mapper = new ObjectMapper();\n\nmapper.readValue(input, mapper.getTypeFactory().constructCollectionType(List.class, MyType.class));\n</code></pre>\n"}],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2630,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77158291,"answer_count":3,"score":1,"last_activity_date":1695391185,"creation_date":1403176845,"question_id":24305341,"body_markdown":"I want to use Jackson to parse a list of objects. With Gson, I can do this easily:\r\n\r\n    List&lt;MyType&gt; list = new Gson().fromJson(input, Types.listOf(MyType.class));\r\n\r\nWith Jackson, it seems to be more difficult:\r\n\r\n    List&lt;MyType&gt; list = new ObjectMapper().readValue(input, /* What to put here? */);\r\n\r\nThe code needs to work for lists of any type (like Gson does), so I can&#39;t just make a type that contains a list of `MyType` and pass that in.\r\n\r\nI&#39;ve tried using `new TypeLiteral&lt;List&lt;MyType&gt;&gt;(){}`, which works, but only for a single type. If I pass in the type to the method, it doesn&#39;t work any more:\r\n\r\n    public &lt;T&gt; List&lt;T&gt; parse(Class&lt;T&gt; myType) {\r\n        // returns a List&lt;Map&lt;?,?&gt;&gt; instead of List&lt;T&gt;\r\n        return new ObjectMapper().readValue(input, new TypeLiteral&lt;List&lt;T&gt;&gt;(){});\r\n    }\r\n\r\nHow do I do this with Jackson?","title":"Parsing a list of objects with Jackson","body":"<p>I want to use Jackson to parse a list of objects. With Gson, I can do this easily:</p>\n\n<pre><code>List&lt;MyType&gt; list = new Gson().fromJson(input, Types.listOf(MyType.class));\n</code></pre>\n\n<p>With Jackson, it seems to be more difficult:</p>\n\n<pre><code>List&lt;MyType&gt; list = new ObjectMapper().readValue(input, /* What to put here? */);\n</code></pre>\n\n<p>The code needs to work for lists of any type (like Gson does), so I can't just make a type that contains a list of <code>MyType</code> and pass that in.</p>\n\n<p>I've tried using <code>new TypeLiteral&lt;List&lt;MyType&gt;&gt;(){}</code>, which works, but only for a single type. If I pass in the type to the method, it doesn't work any more:</p>\n\n<pre><code>public &lt;T&gt; List&lt;T&gt; parse(Class&lt;T&gt; myType) {\n    // returns a List&lt;Map&lt;?,?&gt;&gt; instead of List&lt;T&gt;\n    return new ObjectMapper().readValue(input, new TypeLiteral&lt;List&lt;T&gt;&gt;(){});\n}\n</code></pre>\n\n<p>How do I do this with Jackson?</p>\n"},{"tags":["java","spring","spring-boot","serialization"],"owner":{"account_id":25532314,"reputation":25,"user_id":19320097,"display_name":" "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695391027,"creation_date":1695382868,"question_id":77157312,"body_markdown":"Building a Java project(java 19) with spring boot(3.1.3) and gradle(8.2).\r\nAlso use a Google Cloud Storage and when getting data I want to deserialize data in the object with SerializationUtils,but climbs out this error:\r\n\r\n```\r\njava.lang.ClassCastException: class com.example.pastebin.entity.Paste cannot be cast to class com.example.pastebin.entity.Paste (com.example.pastebin.entity.Paste is in unnamed module of loader &#39;app&#39;; com.example.pastebin.entity.Paste is in unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader @6ed949b0)\r\n\tat com.example.pastebin.services.PasteService.findAll(PasteService.java:46) ~[main/:na]\r\n\tat com.example.pastebin.controllers.PasteController.allPastes(PasteController.java:35) ~[main/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.12.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:110) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:101) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.3.jar:6.1.3]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n```\r\n\r\nbuild.gradle:\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.3&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n}\r\n\r\ngroup = &#39;org.example&#39;\r\nversion = &#39;1.0-SNAPSHOT&#39;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\nconfigurations {\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-redis&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.thymeleaf.extras:thymeleaf-extras-springsecurity6&#39;\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    runtimeOnly &#39;org.postgresql:postgresql&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    testImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n    implementation &#39;org.mapstruct:mapstruct:1.5.5.Final&#39;\r\n    annotationProcessor &#39;org.mapstruct:mapstruct-processor:1.5.5.Final&#39;\r\n    implementation &#39;com.google.cloud:google-cloud-storage:2.26.1&#39;\r\n    testImplementation platform(&#39;org.junit:junit-bom:5.9.1&#39;)\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\nPaste Entity:\r\n```\r\npackage com.example.pastebin.entity;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport java.io.Serial;\r\nimport java.io.Serializable;\r\nimport java.time.LocalDateTime;\r\n\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Paste implements Serializable {\r\n    @Serial\r\n    private static final long serialVersionUID = 8591616427310310802L;\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;title&quot;, nullable = false)\r\n    private String title;\r\n\r\n    @Column(name = &quot;text&quot;, nullable = false)\r\n    private String text;\r\n\r\n    @Lob\r\n    private byte[] bytes;\r\n\r\n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    private User user;\r\n\r\n    private LocalDateTime dateOfCreated;\r\n\r\n    @PrePersist\r\n    private void init() {\r\n        this.dateOfCreated = LocalDateTime.now();\r\n    }\r\n}\r\n```\r\n\r\nDTO:\r\n```\r\npackage com.example.pastebin.dto;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class PasteDTO {\r\n    private String title;\r\n    private String text;\r\n    private String author;\r\n}\r\n```\r\n\r\nPaste Service:\r\n```\r\npackage com.example.pastebin.services;\r\n\r\nimport com.example.pastebin.dto.PasteDTO;\r\nimport com.example.pastebin.entity.Paste;\r\nimport com.example.pastebin.entity.PasteDetails;\r\nimport com.example.pastebin.entity.User;\r\nimport com.example.pastebin.mappers.PasteMapper;\r\nimport com.example.pastebin.repositories.PasteDetailsRepository;\r\nimport com.example.pastebin.repositories.UserRepository;\r\nimport com.google.api.gax.paging.Page;\r\nimport com.google.cloud.storage.*;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.util.SerializationUtils;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Service\r\n@Slf4j\r\npublic class PasteService {\r\n    private final Storage storage = StorageOptions.getDefaultInstance().getService();\r\n    private final Bucket bucket = storage.get(&quot;pastebin1&quot;);\r\n\r\n    private final UserRepository userRepository;\r\n    private final PasteDetailsRepository pasteDetailsRepository;\r\n    private final PasteMapper pasteMapper;\r\n\r\n    public PasteService(UserRepository userRepository, PasteDetailsRepository pasteDetailsRepository, PasteMapper pasteMapper) {\r\n        this.userRepository = userRepository;\r\n        this.pasteDetailsRepository = pasteDetailsRepository;\r\n        this.pasteMapper = pasteMapper;\r\n    }\r\n\r\n    public List&lt;PasteDTO&gt; findAll() {\r\n        List&lt;PasteDTO&gt; pastes = new ArrayList&lt;&gt;();\r\n        Page&lt;Blob&gt; blobs = bucket.list();\r\n\r\n        for (Blob blob : blobs.getValues()) {\r\n            byte[] bytes = blob.getContent();\r\n\r\n            if (SerializationUtils.deserialize(bytes) == null) {\r\n                throw new IllegalArgumentException(&quot;The byte[] must not be null&quot;);\r\n            }\r\nerror here -&gt;   pastes.add(pasteMapper.fromPasteToDTO((Paste) SerializationUtils.deserialize(bytes)));\r\n        }\r\n\r\n        return pastes;\r\n    }\r\n\r\n    public void connectUserToPaste(String username, Paste paste) {\r\n        User user = userRepository.findByUsername(username);\r\n\r\n        if (user == null) {\r\n            throw new RuntimeException(&quot;User not found&quot;);\r\n        } else {\r\n            paste.setUser(user);\r\n            user.getPastes().add(paste);\r\n        }\r\n    }\r\n\r\n    public void saveText(PasteDTO pasteDTO, String username) {\r\n        Paste paste = Paste.builder()\r\n                .title(pasteDTO.getTitle())\r\n                .text(pasteDTO.getText())\r\n                .build();\r\n        this.connectUserToPaste(username, paste);\r\n\r\n        BlobId blobId = BlobId.of(&quot;pastebin1&quot;, &quot;paste_&quot; + paste.getId());\r\n        BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setContentType(&quot;text/plain&quot;).build();\r\n        Blob blob = storage.create(blobInfo, SerializationUtils.serialize(paste));\r\n\r\n        PasteDetails pasteDetails = PasteDetails.builder()\r\n                .blobId(blobId)\r\n                .bucket(blob.getBucket())\r\n                .build();\r\n\r\n        pasteDetailsRepository.save(pasteDetails);\r\n\r\n        log.info(&quot;Saving new bin with title : {}&quot;, paste.getTitle());\r\n    }\r\n\r\n    public PasteDTO findPasteByTitle(String title) {\r\n        Page&lt;Blob&gt; blobs = bucket.list();\r\n        for (Blob blob : blobs.getValues()) {\r\n            if (title.equals(blob.getName())) {\r\n                PasteDTO pasteDTO = pasteMapper.fromPasteToDTO((Paste) SerializationUtils.deserialize(blob.getContent()));\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nAnd Paste Controller:\r\n```\r\npackage com.example.pastebin.controllers;\r\n\r\nimport com.example.pastebin.dto.PasteDTO;\r\nimport com.example.pastebin.mappers.PasteMapper;\r\nimport com.example.pastebin.repositories.PasteDetailsRepository;\r\nimport com.example.pastebin.services.PasteService;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\n\r\nimport java.security.Principal;\r\n\r\n@Controller\r\npublic class PasteController {\r\n    private final PasteService pasteService;\r\n\r\n    public PasteController(PasteService pasteService) {\r\n        this.pasteService = pasteService;\r\n    }\r\n\r\n    @GetMapping(&quot;/add_paste&quot;)\r\n    public String addBinPage() {\r\n        return &quot;home&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/add_paste&quot;)\r\n    public String addBin(PasteDTO pasteDTO, Principal principal) {\r\n        pasteService.saveText(pasteDTO, principal.getName());\r\n        return &quot;redirect:/pastes&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;pastes&quot;)\r\n    public String allPastes(Model model) {\r\n        model.addAttribute(&quot;pastes&quot;, pasteService.findAll());\r\n        return &quot;pastes&quot;;\r\n    }\r\n}\r\n```\r\n\r\nAny help would be appreciated.Thank you.\r\n\r\n","title":"Building a pastebin app and can&#39;t to deserialize objects","body":"<p>Building a Java project(java 19) with spring boot(3.1.3) and gradle(8.2).\nAlso use a Google Cloud Storage and when getting data I want to deserialize data in the object with SerializationUtils,but climbs out this error:</p>\n<pre><code>java.lang.ClassCastException: class com.example.pastebin.entity.Paste cannot be cast to class com.example.pastebin.entity.Paste (com.example.pastebin.entity.Paste is in unnamed module of loader 'app'; com.example.pastebin.entity.Paste is in unnamed module of loader org.springframework.boot.devtools.restart.classloader.RestartClassLoader @6ed949b0)\n    at com.example.pastebin.services.PasteService.findAll(PasteService.java:46) ~[main/:na]\n    at com.example.pastebin.controllers.PasteController.allPastes(PasteController.java:35) ~[main/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.12.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.11.jar:6.0.11]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.12.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:110) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:101) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.1.3.jar:6.1.3]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.11.jar:6.0.11]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.12.jar:10.1.12]\n    at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n</code></pre>\n<p>build.gradle:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.3'\n    id 'io.spring.dependency-management' version '1.1.3'\n}\n\ngroup = 'org.example'\nversion = '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-data-redis'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.thymeleaf.extras:thymeleaf-extras-springsecurity6'\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n    implementation 'org.mapstruct:mapstruct:1.5.5.Final'\n    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'\n    implementation 'com.google.cloud:google-cloud-storage:2.26.1'\n    testImplementation platform('org.junit:junit-bom:5.9.1')\n    testImplementation 'org.junit.jupiter:junit-jupiter'\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>Paste Entity:</p>\n<pre><code>package com.example.pastebin.entity;\n\nimport jakarta.persistence.*;\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.io.Serial;\nimport java.io.Serializable;\nimport java.time.LocalDateTime;\n\n@Entity\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Paste implements Serializable {\n    @Serial\n    private static final long serialVersionUID = 8591616427310310802L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Column(name = &quot;title&quot;, nullable = false)\n    private String title;\n\n    @Column(name = &quot;text&quot;, nullable = false)\n    private String text;\n\n    @Lob\n    private byte[] bytes;\n\n    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    private User user;\n\n    private LocalDateTime dateOfCreated;\n\n    @PrePersist\n    private void init() {\n        this.dateOfCreated = LocalDateTime.now();\n    }\n}\n</code></pre>\n<p>DTO:</p>\n<pre><code>package com.example.pastebin.dto;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class PasteDTO {\n    private String title;\n    private String text;\n    private String author;\n}\n</code></pre>\n<p>Paste Service:</p>\n<pre><code>package com.example.pastebin.services;\n\nimport com.example.pastebin.dto.PasteDTO;\nimport com.example.pastebin.entity.Paste;\nimport com.example.pastebin.entity.PasteDetails;\nimport com.example.pastebin.entity.User;\nimport com.example.pastebin.mappers.PasteMapper;\nimport com.example.pastebin.repositories.PasteDetailsRepository;\nimport com.example.pastebin.repositories.UserRepository;\nimport com.google.api.gax.paging.Page;\nimport com.google.cloud.storage.*;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\nimport org.springframework.util.SerializationUtils;\n\nimport java.io.ByteArrayInputStream;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Service\n@Slf4j\npublic class PasteService {\n    private final Storage storage = StorageOptions.getDefaultInstance().getService();\n    private final Bucket bucket = storage.get(&quot;pastebin1&quot;);\n\n    private final UserRepository userRepository;\n    private final PasteDetailsRepository pasteDetailsRepository;\n    private final PasteMapper pasteMapper;\n\n    public PasteService(UserRepository userRepository, PasteDetailsRepository pasteDetailsRepository, PasteMapper pasteMapper) {\n        this.userRepository = userRepository;\n        this.pasteDetailsRepository = pasteDetailsRepository;\n        this.pasteMapper = pasteMapper;\n    }\n\n    public List&lt;PasteDTO&gt; findAll() {\n        List&lt;PasteDTO&gt; pastes = new ArrayList&lt;&gt;();\n        Page&lt;Blob&gt; blobs = bucket.list();\n\n        for (Blob blob : blobs.getValues()) {\n            byte[] bytes = blob.getContent();\n\n            if (SerializationUtils.deserialize(bytes) == null) {\n                throw new IllegalArgumentException(&quot;The byte[] must not be null&quot;);\n            }\nerror here -&gt;   pastes.add(pasteMapper.fromPasteToDTO((Paste) SerializationUtils.deserialize(bytes)));\n        }\n\n        return pastes;\n    }\n\n    public void connectUserToPaste(String username, Paste paste) {\n        User user = userRepository.findByUsername(username);\n\n        if (user == null) {\n            throw new RuntimeException(&quot;User not found&quot;);\n        } else {\n            paste.setUser(user);\n            user.getPastes().add(paste);\n        }\n    }\n\n    public void saveText(PasteDTO pasteDTO, String username) {\n        Paste paste = Paste.builder()\n                .title(pasteDTO.getTitle())\n                .text(pasteDTO.getText())\n                .build();\n        this.connectUserToPaste(username, paste);\n\n        BlobId blobId = BlobId.of(&quot;pastebin1&quot;, &quot;paste_&quot; + paste.getId());\n        BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setContentType(&quot;text/plain&quot;).build();\n        Blob blob = storage.create(blobInfo, SerializationUtils.serialize(paste));\n\n        PasteDetails pasteDetails = PasteDetails.builder()\n                .blobId(blobId)\n                .bucket(blob.getBucket())\n                .build();\n\n        pasteDetailsRepository.save(pasteDetails);\n\n        log.info(&quot;Saving new bin with title : {}&quot;, paste.getTitle());\n    }\n\n    public PasteDTO findPasteByTitle(String title) {\n        Page&lt;Blob&gt; blobs = bucket.list();\n        for (Blob blob : blobs.getValues()) {\n            if (title.equals(blob.getName())) {\n                PasteDTO pasteDTO = pasteMapper.fromPasteToDTO((Paste) SerializationUtils.deserialize(blob.getContent()));\n            }\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>And Paste Controller:</p>\n<pre><code>package com.example.pastebin.controllers;\n\nimport com.example.pastebin.dto.PasteDTO;\nimport com.example.pastebin.mappers.PasteMapper;\nimport com.example.pastebin.repositories.PasteDetailsRepository;\nimport com.example.pastebin.services.PasteService;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\n\nimport java.security.Principal;\n\n@Controller\npublic class PasteController {\n    private final PasteService pasteService;\n\n    public PasteController(PasteService pasteService) {\n        this.pasteService = pasteService;\n    }\n\n    @GetMapping(&quot;/add_paste&quot;)\n    public String addBinPage() {\n        return &quot;home&quot;;\n    }\n\n    @PostMapping(&quot;/add_paste&quot;)\n    public String addBin(PasteDTO pasteDTO, Principal principal) {\n        pasteService.saveText(pasteDTO, principal.getName());\n        return &quot;redirect:/pastes&quot;;\n    }\n\n    @GetMapping(&quot;pastes&quot;)\n    public String allPastes(Model model) {\n        model.addAttribute(&quot;pastes&quot;, pasteService.findAll());\n        return &quot;pastes&quot;;\n    }\n}\n</code></pre>\n<p>Any help would be appreciated.Thank you.</p>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-chromedriver"],"answers":[{"tags":[],"owner":{"account_id":18895932,"reputation":3508,"user_id":13785121,"display_name":"Abhinaba Chakraborty"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593495350,"creation_date":1593495350,"answer_id":62650899,"question_id":62650720,"body_markdown":"First, visit your app with Chrome and set camera to always allow.\r\n\r\nSecond, get the [chrome prefs][1] file\r\n\r\nThird, copy the default directory to some path /path/to/defaultconfig\r\n\r\nLastly, add that config path to chrome options before launching the driver:\r\n&quot;user-data-dir=/path/to/defaultconfig&quot;\r\n\r\n\r\n  [1]: http://www.forensicswiki.org/wiki/Google_Chrome#Configuration","title":"How to give access or dismiss to the microphone and camera popup in Chromedriver while running the Selenium test?","body":"<p>First, visit your app with Chrome and set camera to always allow.</p>\n<p>Second, get the <a href=\"http://www.forensicswiki.org/wiki/Google_Chrome#Configuration\" rel=\"nofollow noreferrer\">chrome prefs</a> file</p>\n<p>Third, copy the default directory to some path /path/to/defaultconfig</p>\n<p>Lastly, add that config path to chrome options before launching the driver:\n&quot;user-data-dir=/path/to/defaultconfig&quot;</p>\n"},{"tags":[],"owner":{"account_id":19757287,"reputation":1,"user_id":14467294,"display_name":"Nebisis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695390893,"creation_date":1695390893,"answer_id":77158251,"question_id":62650720,"body_markdown":"    ChromeOptions chromeOptions = new ChromeOptions();\r\n    \r\n    HashMap&lt;String, Integer&gt; preferences = new HashMap&lt;&gt;();\r\n    preferences.put(&quot;profile.default_content_setting_values.media_stream_mic&quot;, 1);    # 1:allow, 2:block \r\n    preferences.put(&quot;profile.default_content_setting_values.media_stream_camera&quot;, 1);    # 1:allow, 2:block \r\n    \r\n    chromeOptions.setExperimentalOption(&quot;prefs&quot;, preferences);\r\n    dvr = new ChromeDriver(chromeOptions);\r\n\r\n","title":"How to give access or dismiss to the microphone and camera popup in Chromedriver while running the Selenium test?","body":"<pre><code>ChromeOptions chromeOptions = new ChromeOptions();\n\nHashMap&lt;String, Integer&gt; preferences = new HashMap&lt;&gt;();\npreferences.put(&quot;profile.default_content_setting_values.media_stream_mic&quot;, 1);    # 1:allow, 2:block \npreferences.put(&quot;profile.default_content_setting_values.media_stream_camera&quot;, 1);    # 1:allow, 2:block \n\nchromeOptions.setExperimentalOption(&quot;prefs&quot;, preferences);\ndvr = new ChromeDriver(chromeOptions);\n</code></pre>\n"}],"owner":{"account_id":2369683,"reputation":3436,"user_id":2074563,"accept_rate":11,"display_name":"Bhupendra Singh Rautela"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695390893,"creation_date":1593494229,"question_id":62650720,"body_markdown":"I have applied the below ChromeOptions but not working for me. Due to this, I am unable to type on the &quot;Enter Pin&quot; input box on the screen. \r\n\r\n    ChromeOptions chromeOptions = new ChromeOptions();\r\n\tchromeOptions.addArguments(&quot;--disable-user-media-security=true&quot;);\r\n\tdvr = new ChromeDriver(chromeOptions);\r\n\r\n[![enter image description here][1]][1]\r\n\t\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zhK3w.png","title":"How to give access or dismiss to the microphone and camera popup in Chromedriver while running the Selenium test?","body":"<p>I have applied the below ChromeOptions but not working for me. Due to this, I am unable to type on the &quot;Enter Pin&quot; input box on the screen.</p>\n<pre><code>ChromeOptions chromeOptions = new ChromeOptions();\nchromeOptions.addArguments(&quot;--disable-user-media-security=true&quot;);\ndvr = new ChromeDriver(chromeOptions);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/zhK3w.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zhK3w.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","apache-kafka"],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695390885,"creation_date":1695390885,"answer_id":77158247,"question_id":77158181,"body_markdown":"Check javadoc \r\n\r\n&gt; *InvalidTopicException*\r\n&gt; \r\n&gt; For example the topic name is too long, contains invalid characters etc.\r\n\r\nIf you&#39;re sending a *valid* topic name, this isn&#39;t thrown, and you&#39;ll get that warning log instead, which isn&#39;t an exception that can be caught.\r\n\r\nAlso, there&#39;s no reason to `throw(e)`. Use `instanceof` to check the type of the Exception in the callback ","title":"Why is callback in producer.send method not being executed during failure to send a message?","body":"<p>Check javadoc</p>\n<blockquote>\n<p><em>InvalidTopicException</em></p>\n<p>For example the topic name is too long, contains invalid characters etc.</p>\n</blockquote>\n<p>If you're sending a <em>valid</em> topic name, this isn't thrown, and you'll get that warning log instead, which isn't an exception that can be caught.</p>\n<p>Also, there's no reason to <code>throw(e)</code>. Use <code>instanceof</code> to check the type of the Exception in the callback</p>\n"}],"owner":{"account_id":29509526,"reputation":3,"user_id":22614887,"display_name":"user22614887"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77158247,"answer_count":1,"score":0,"last_activity_date":1695390885,"creation_date":1695390397,"question_id":77158181,"body_markdown":"I am currently sending messages to kafka like so:\r\n\r\n```\r\ntry {\r\n\tproducer.send(record, new Callback() {\r\n\t\tpublic void onCompletion(RecordMetadata metadata, Exception e) {\r\n\t\t\tSystem.out.println(metadata);\r\n\t\t\tSystem.out.println(e);\r\n\t\t\tif (e != null)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(e);\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tthrow(e);\r\n\t\t\t\t} catch (InvalidTopicException er) {\r\n\t\t\t\t\tlogger.error(&quot;Unrecoverable error: &quot;, er);\r\n\t\t\t\t\tSystem.exit(-1);\r\n\t\t\t\t} //...otherfatalexceptions...\r\n\t\t\t\tcatch (UnknownServerException er) {\r\n\t\t\t\t\tlogger.error(&quot;Unrecoverable error: &quot;, er);\r\n\t\t\t\t\tSystem.exit(-1);\r\n\t\t\t\t}catch (Exception er) {\r\n\t\t\t\t\tlogger.error(&quot;Failed to send message to topic:&quot; + topic, er);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t});\r\n}catch (Exception e) {\r\n\tlogger.error(&quot;Failed to send message to topic:&quot; + topic, e);\r\n}\r\n```\r\n\r\ni am using producer.send and not waiting for the record metadata to be returned before sending the next record in a queue since it would take to long.\r\nInstead i am using `onCallback` method to handle that data.\r\n\r\nThe idea behind the code is to terminate the program in case i get an unrecoverable error.\r\n\r\nProducer is being initialized like so:\r\n\r\n```\r\nproducer = new KafkaProducer&lt;String, String&gt;(properties);\r\n```\r\nwith following properties\r\n\r\n```\r\nProperties mainKafkaProperties = new Properties();\r\nmainKafkaProperties.put(&quot;bootstrap.servers&quot;, kafkaUrl);\r\nmainKafkaProperties.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\nmainKafkaProperties.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\nmainKafkaProperties.put(&quot;acks&quot;, &quot;all&quot;);\r\n```\r\n\r\n\r\n\r\n\r\n\r\nWhen messages are being sent properly, System.out.println(metadata); line is properly printing metadata showing that messages are being sent properly,\r\nbut when i delete the topic to simulate the `InvalidTopicException` instead of executing the code in the catch method i only get the following warning:\r\n`[kafka-producer-network-thread | producer-1] WARN org.apache.kafka.clients.NetworkClient - [Producer clientId=producer-1] Error while fetching metadata with correlation id 97 : {em_om_messages_local=UNKNOWN_TOPIC_OR_PARTITION}`\r\n\r\nKafka library used is: org.apache.kafka.clients\r\nI am running the program on eclipse debugger\r\n\r\nI am getting the same error regardless how many partitions the topic has\r\nJava version 17.0.6+10\r\nSpring is not used","title":"Why is callback in producer.send method not being executed during failure to send a message?","body":"<p>I am currently sending messages to kafka like so:</p>\n<pre><code>try {\n    producer.send(record, new Callback() {\n        public void onCompletion(RecordMetadata metadata, Exception e) {\n            System.out.println(metadata);\n            System.out.println(e);\n            if (e != null)\n            {\n                System.out.println(e);\n                try\n                {\n                    throw(e);\n                } catch (InvalidTopicException er) {\n                    logger.error(&quot;Unrecoverable error: &quot;, er);\n                    System.exit(-1);\n                } //...otherfatalexceptions...\n                catch (UnknownServerException er) {\n                    logger.error(&quot;Unrecoverable error: &quot;, er);\n                    System.exit(-1);\n                }catch (Exception er) {\n                    logger.error(&quot;Failed to send message to topic:&quot; + topic, er);\n                }\n            }\n        }\n        });\n}catch (Exception e) {\n    logger.error(&quot;Failed to send message to topic:&quot; + topic, e);\n}\n</code></pre>\n<p>i am using producer.send and not waiting for the record metadata to be returned before sending the next record in a queue since it would take to long.\nInstead i am using <code>onCallback</code> method to handle that data.</p>\n<p>The idea behind the code is to terminate the program in case i get an unrecoverable error.</p>\n<p>Producer is being initialized like so:</p>\n<pre><code>producer = new KafkaProducer&lt;String, String&gt;(properties);\n</code></pre>\n<p>with following properties</p>\n<pre><code>Properties mainKafkaProperties = new Properties();\nmainKafkaProperties.put(&quot;bootstrap.servers&quot;, kafkaUrl);\nmainKafkaProperties.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\nmainKafkaProperties.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\nmainKafkaProperties.put(&quot;acks&quot;, &quot;all&quot;);\n</code></pre>\n<p>When messages are being sent properly, System.out.println(metadata); line is properly printing metadata showing that messages are being sent properly,\nbut when i delete the topic to simulate the <code>InvalidTopicException</code> instead of executing the code in the catch method i only get the following warning:\n<code>[kafka-producer-network-thread | producer-1] WARN org.apache.kafka.clients.NetworkClient - [Producer clientId=producer-1] Error while fetching metadata with correlation id 97 : {em_om_messages_local=UNKNOWN_TOPIC_OR_PARTITION}</code></p>\n<p>Kafka library used is: org.apache.kafka.clients\nI am running the program on eclipse debugger</p>\n<p>I am getting the same error regardless how many partitions the topic has\nJava version 17.0.6+10\nSpring is not used</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1486533413,"post_id":42105711,"comment_id":71380707,"body_markdown":"This is too abstract and vague.  Show us the class definitions of `Parent` and `Child` and explain what `parentType` is.  The question is not answerable in its present state.","body":"This is too abstract and vague.  Show us the class definitions of <code>Parent</code> and <code>Child</code> and explain what <code>parentType</code> is.  The question is not answerable in its present state."},{"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"score":0,"creation_date":1486533449,"post_id":42105711,"comment_id":71380726,"body_markdown":"@JimGarrison I am editing. Please wait.","body":"@JimGarrison I am editing. Please wait."},{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":0,"creation_date":1486533467,"post_id":42105711,"comment_id":71380733,"body_markdown":"If each parent/child combination will be handled by separate logic, then what you have isn&#39;t bad at all IMO.  If so, there is no avoiding specifying such logic.","body":"If each parent/child combination will be handled by separate logic, then what you have isn&#39;t bad at all IMO.  If so, there is no avoiding specifying such logic."},{"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"score":0,"creation_date":1486533712,"post_id":42105711,"comment_id":71380811,"body_markdown":"@JimGarrison Please see my edit and let me know if it is still unclear.","body":"@JimGarrison Please see my edit and let me know if it is still unclear."},{"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"score":0,"creation_date":1486533761,"post_id":42105711,"comment_id":71380838,"body_markdown":"@TimBiegeleisen Yes. For each parent and it&#39;s children logic is separare. But if children is C, then C logic is same for all parent who has C as children.","body":"@TimBiegeleisen Yes. For each parent and it&#39;s children logic is separare. But if children is C, then C logic is same for all parent who has C as children."},{"owner":{"account_id":4465009,"reputation":1505,"user_id":3632894,"accept_rate":50,"display_name":"user1211"},"score":0,"creation_date":1486534130,"post_id":42105711,"comment_id":71380961,"body_markdown":"Use factory pattern","body":"Use factory pattern"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1486558022,"post_id":42105711,"comment_id":71395670,"body_markdown":"@Gops AB : if else or switch statements are ok for situations where we know that the number of cases are fixed and the code for handling each case is also more or less same, swich is better than if else due to improved readability. But both of these should be avoided in case we see that number of cases would be added in future or code to handle cases needs to change, in such cases we have to modify classes just to add new case and to modify any one of the case handling. In such cases abstraction should be used, refer my answer below for more. http://stackoverflow.com/a/42106953/504133","body":"@Gops AB : if else or switch statements are ok for situations where we know that the number of cases are fixed and the code for handling each case is also more or less same, swich is better than if else due to improved readability. But both of these should be avoided in case we see that number of cases would be added in future or code to handle cases needs to change, in such cases we have to modify classes just to add new case and to modify any one of the case handling. In such cases abstraction should be used, refer my answer below for more. <a href=\"http://stackoverflow.com/a/42106953/504133\">stackoverflow.com/a/42106953/504133</a>"},{"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"score":0,"creation_date":1486558052,"post_id":42105711,"comment_id":71395687,"body_markdown":"Hope it will be helpful and if so you may wish to upvote or mark the answer as acceted","body":"Hope it will be helpful and if so you may wish to upvote or mark the answer as acceted"}],"answers":[{"tags":[],"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1486538349,"creation_date":1486538349,"answer_id":42106953,"question_id":42105711,"body_markdown":"As a guide `switch` is better than `if-else` statements as it is more readable.  \r\n\r\nAxis of change should be identified and both of these (if else and switch)  should be avoided if we find during initial requirement analysis or later with requirement changes  coming that there are new cases being added. \r\n\r\nIn such a case we need to respect `open close principle`. Swich case statements are not only bad as ocp is voilated but also is prone to errors, if we miss to add a new case at some place then issues may occur. \r\n\r\nIn such a scenario the cases must be handled through abstraction ( try to protect yourself from changes by abstrating what can change). \r\n\r\nYou can define a (abstract) parent class for such cases and each case can be mapped to a separate sub class.\r\nSuppose we had a case x : // contents;. Contents can be put in the implementation of the abstract method which we can have in the parent class. In case we have a new case added we can easily define a new class and provide the implementation. The client code should be dependent only upon abstract parent class amd concrete classes can be injected during run time.","title":"case statements with switch - case or if-else - best design?","body":"<p>As a guide <code>switch</code> is better than <code>if-else</code> statements as it is more readable.  </p>\n\n<p>Axis of change should be identified and both of these (if else and switch)  should be avoided if we find during initial requirement analysis or later with requirement changes  coming that there are new cases being added. </p>\n\n<p>In such a case we need to respect <code>open close principle</code>. Swich case statements are not only bad as ocp is voilated but also is prone to errors, if we miss to add a new case at some place then issues may occur. </p>\n\n<p>In such a scenario the cases must be handled through abstraction ( try to protect yourself from changes by abstrating what can change). </p>\n\n<p>You can define a (abstract) parent class for such cases and each case can be mapped to a separate sub class.\nSuppose we had a case x : // contents;. Contents can be put in the implementation of the abstract method which we can have in the parent class. In case we have a new case added we can easily define a new class and provide the implementation. The client code should be dependent only upon abstract parent class amd concrete classes can be injected during run time.</p>\n"},{"tags":[],"owner":{"display_name":"user22614691"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695387271,"creation_date":1695387172,"answer_id":77157783,"question_id":42105711,"body_markdown":"Following is just about using `switch` or using `if else` since there are object oriented alternatives addressing more suitable extensibility and maintainability than `switch` and `if else` statements.\r\n\r\nTalking about wide solution space complexity wise `switch` statement has an improved complexity than `if else` statements. Summary of technical details is that `switch` statement relies on an indexed solutions space (a jump table with `case` values being indexes) instead of traveling all branches until the matching one. For a narrow solutions space `if else` complexity is better.\r\n\r\nReadability wise the `if else` statement has an improved readability since the statement is placed at the beginning of the code block to run while with `switch` statement each `case` must have a start and a close statement (`case` and `break`) that could be interlaced (multiple `case` statements having one `break` statement) making cumbersome to follow the code block to run from its opening to its close.\r\n\r\nThe best design between the two is a choice between performance (that varies with the solutions space dimension) and readability. Are there enough values to make use of `switch` statement benefits? Or is a facile read preferred regardless of the performance improvements?","title":"case statements with switch - case or if-else - best design?","body":"<p>Following is just about using <code>switch</code> or using <code>if else</code> since there are object oriented alternatives addressing more suitable extensibility and maintainability than <code>switch</code> and <code>if else</code> statements.</p>\n<p>Talking about wide solution space complexity wise <code>switch</code> statement has an improved complexity than <code>if else</code> statements. Summary of technical details is that <code>switch</code> statement relies on an indexed solutions space (a jump table with <code>case</code> values being indexes) instead of traveling all branches until the matching one. For a narrow solutions space <code>if else</code> complexity is better.</p>\n<p>Readability wise the <code>if else</code> statement has an improved readability since the statement is placed at the beginning of the code block to run while with <code>switch</code> statement each <code>case</code> must have a start and a close statement (<code>case</code> and <code>break</code>) that could be interlaced (multiple <code>case</code> statements having one <code>break</code> statement) making cumbersome to follow the code block to run from its opening to its close.</p>\n<p>The best design between the two is a choice between performance (that varies with the solutions space dimension) and readability. Are there enough values to make use of <code>switch</code> statement benefits? Or is a facile read preferred regardless of the performance improvements?</p>\n"},{"tags":[],"owner":{"account_id":1010971,"reputation":11524,"user_id":1023553,"accept_rate":59,"display_name":"NoDataFound"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695390383,"creation_date":1695390383,"answer_id":77158179,"question_id":42105711,"body_markdown":"Rather than thinking about which is best, think about what&#39;s more readable to other maintainers: a `switch` is generally fine as is, but it is harder to read when there are variables from outer scope (eg: before the `switch`) used in each branches especially when the code is old and variables are not typed (eg: Object + cast each time we want to use said variables, making it especially unreadable and hard to fllow).\r\n\r\nYou can always declare variables inside a `switch` but it less readable (in my opinion) than when done in an `if`:\r\n\r\n    switch (...) {\r\n      case &#39;...&#39;: {\r\n        var n = ...;\r\n      }\r\n    }\r\n\r\nVersus:\r\n\r\n    if (...) {\r\n      var n = ...;\r\n    }\r\n\r\n\r\nIf you want to use a `switch`:\r\n\r\n- use methods when possible: the smaller the `switch` block, the easier it will be to read it. Same apply to `if`.\r\n- Use `enum` for your `ParentType` because the compiler **can** help you: if the `switch` does not have a `default` case, the compiler will issue an error. You won&#39;t get that with `String` and `int` even if you can have the compiler fails for `switch` without `default`.\r\n- [Try `switch` evolution available in Java 17][1]: this is similar to using methods; I can&#39;t say something good or bad because I rarely used them (I would have to be in Java 17 for that).\r\n- You could also try to not use `switch`: if your `parents` are a finite set, then you could try using enums or a couple of class with one interface. \r\n\r\n    enum ParentType {\r\n      TYPE1 {\r\n        public void doSomething(Context ctx) {\r\n          if(ctx.partent1.contains(ctx.childType1)) {\r\n            // ...\r\n          }\r\n        }\r\n      },;\r\n    \r\n      public abstract void doSomething(Context ctx);\r\n    }\r\n\r\n    record Context(Object parten1, Object childType1) {}\r\n\r\nAnd use it:\r\n\r\n    Map&lt;String, String&gt; children = parentDataHolder.getParent(parentType).getChildren();\r\n    parentType.doSomething(new Context(parten1, childType1));\r\n\r\nThe main points are:\r\n\r\n1. enumerate are finite: you are sure your switch handle all &quot;parent type&quot;; all that remains is a possible `null` check if there are case where it can be logically `null`.\r\n2. use an class to hold variables. You may already have that if you are inside a `class` with attributes: I simply used a `record` here which is available in Java 17.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/language/switch-expressions.html#GUID-BA4F63E3-4823-43C6-A5F3-BAA4A2EF3ADC","title":"case statements with switch - case or if-else - best design?","body":"<p>Rather than thinking about which is best, think about what's more readable to other maintainers: a <code>switch</code> is generally fine as is, but it is harder to read when there are variables from outer scope (eg: before the <code>switch</code>) used in each branches especially when the code is old and variables are not typed (eg: Object + cast each time we want to use said variables, making it especially unreadable and hard to fllow).</p>\n<p>You can always declare variables inside a <code>switch</code> but it less readable (in my opinion) than when done in an <code>if</code>:</p>\n<pre><code>switch (...) {\n  case '...': {\n    var n = ...;\n  }\n}\n</code></pre>\n<p>Versus:</p>\n<pre><code>if (...) {\n  var n = ...;\n}\n</code></pre>\n<p>If you want to use a <code>switch</code>:</p>\n<ul>\n<li><p>use methods when possible: the smaller the <code>switch</code> block, the easier it will be to read it. Same apply to <code>if</code>.</p>\n</li>\n<li><p>Use <code>enum</code> for your <code>ParentType</code> because the compiler <strong>can</strong> help you: if the <code>switch</code> does not have a <code>default</code> case, the compiler will issue an error. You won't get that with <code>String</code> and <code>int</code> even if you can have the compiler fails for <code>switch</code> without <code>default</code>.</p>\n</li>\n<li><p><a href=\"https://docs.oracle.com/en/java/javase/17/language/switch-expressions.html#GUID-BA4F63E3-4823-43C6-A5F3-BAA4A2EF3ADC\" rel=\"nofollow noreferrer\">Try <code>switch</code> evolution available in Java 17</a>: this is similar to using methods; I can't say something good or bad because I rarely used them (I would have to be in Java 17 for that).</p>\n</li>\n<li><p>You could also try to not use <code>switch</code>: if your <code>parents</code> are a finite set, then you could try using enums or a couple of class with one interface.</p>\n<p>enum ParentType {\nTYPE1 {\npublic void doSomething(Context ctx) {\nif(ctx.partent1.contains(ctx.childType1)) {\n// ...\n}\n}\n},;</p>\n<pre><code>public abstract void doSomething(Context ctx);\n</code></pre>\n<p>}</p>\n<p>record Context(Object parten1, Object childType1) {}</p>\n</li>\n</ul>\n<p>And use it:</p>\n<pre><code>Map&lt;String, String&gt; children = parentDataHolder.getParent(parentType).getChildren();\nparentType.doSomething(new Context(parten1, childType1));\n</code></pre>\n<p>The main points are:</p>\n<ol>\n<li>enumerate are finite: you are sure your switch handle all &quot;parent type&quot;; all that remains is a possible <code>null</code> check if there are case where it can be logically <code>null</code>.</li>\n<li>use an class to hold variables. You may already have that if you are inside a <code>class</code> with attributes: I simply used a <code>record</code> here which is available in Java 17.</li>\n</ol>\n"}],"owner":{"account_id":3189466,"reputation":22172,"user_id":2694184,"accept_rate":48,"display_name":"Gibbs"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1695390383,"creation_date":1486533261,"question_id":42105711,"body_markdown":"I am trying to explain my design problem with an example.\r\n\r\nAssume I have 5 parents [1,2,3,4,5]. Each parent has n children. children is like [a,b,c,d,e,f].\r\n\r\nI am trying to write something\r\n\r\n\r\n     Map&lt;String, String&gt; children = parentDataHolder.getParent(parentType).getChildren();\r\n     switch(parentType){\r\n          case 1:\r\n              if(partent1.contains(childType1)){\r\n              }\r\n              //Similarly for all child types\r\n          case 2:\r\n          case 3:\r\n             .......\r\n     }\r\n\r\nHere, Parent types are fixed. Child types are dynamic. I am getting in a map. For each map, I have to check whether child is present. If so, I have to take action according to child type.\r\n\r\nWhich design would be better? Above design doesn&#39;t look good for me.\r\n\r\nAny ideas?\r\n\r\n**EDIT:**\r\n\r\nparentHolder is an object which has methods to get parent type and children types.\r\neg:\r\n\r\n     {\r\n         parentType: &#39;1&#39;,\r\n         children:{\r\n           &quot;a&quot;:&quot;fileOne.xml&quot;,\r\n           &quot;c&quot; : &quot;fileTwo.gz&quot;\r\n         }\r\n      }\r\n\r\nOnce I received this json, I am storing the children values in a `Map` and then I am getting the parentType and passing to switch condition.\r\n\r\nInside switch cases, I have to apply logic for children. The above example has two children. In some other cases, parentType 1 will have a,b,c as children. So It should be generic. ","title":"case statements with switch - case or if-else - best design?","body":"<p>I am trying to explain my design problem with an example.</p>\n\n<p>Assume I have 5 parents [1,2,3,4,5]. Each parent has n children. children is like [a,b,c,d,e,f].</p>\n\n<p>I am trying to write something</p>\n\n<pre><code> Map&lt;String, String&gt; children = parentDataHolder.getParent(parentType).getChildren();\n switch(parentType){\n      case 1:\n          if(partent1.contains(childType1)){\n          }\n          //Similarly for all child types\n      case 2:\n      case 3:\n         .......\n }\n</code></pre>\n\n<p>Here, Parent types are fixed. Child types are dynamic. I am getting in a map. For each map, I have to check whether child is present. If so, I have to take action according to child type.</p>\n\n<p>Which design would be better? Above design doesn't look good for me.</p>\n\n<p>Any ideas?</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>parentHolder is an object which has methods to get parent type and children types.\neg:</p>\n\n<pre><code> {\n     parentType: '1',\n     children:{\n       \"a\":\"fileOne.xml\",\n       \"c\" : \"fileTwo.gz\"\n     }\n  }\n</code></pre>\n\n<p>Once I received this json, I am storing the children values in a <code>Map</code> and then I am getting the parentType and passing to switch condition.</p>\n\n<p>Inside switch cases, I have to apply logic for children. The above example has two children. In some other cases, parentType 1 will have a,b,c as children. So It should be generic. </p>\n"},{"tags":["java","xss","owasp"],"answers":[{"tags":[],"owner":{"account_id":16914570,"reputation":1532,"user_id":12232870,"display_name":"terrorrussia-keeps-killing"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1605692325,"creation_date":1605692325,"answer_id":64890480,"question_id":64884575,"body_markdown":"&gt; So when my input is &lt;a&gt;test&lt;/a&gt;, I expect it will return me the same result, cause I am allowing &quot;a&quot; tag. However, it returns &quot;test&quot; only.\r\n\r\nSome elements are disallowed by default if they do not have attributes provided. Just add the following clause to the policy builder:\r\n\r\n```java\r\n.allowWithoutAttributes(&quot;a&quot;)\r\n```\r\n\r\nIt would remove the `a` element from the internal `HtmlPolicyBuilder.skipIfEmpty` instance set that skips `a`, `font`, `img`, `input`, and `span` by default (see `HtmlPolicyBuilder.DEFAULT_SKIP_IF_EMPTY`).\r\n","title":"OWASP sanitizer generates unexpected results","body":"<blockquote>\n<p>So when my input is test, I expect it will return me the same result, cause I am allowing &quot;a&quot; tag. However, it returns &quot;test&quot; only.</p>\n</blockquote>\n<p>Some elements are disallowed by default if they do not have attributes provided. Just add the following clause to the policy builder:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.allowWithoutAttributes(&quot;a&quot;)\n</code></pre>\n<p>It would remove the <code>a</code> element from the internal <code>HtmlPolicyBuilder.skipIfEmpty</code> instance set that skips <code>a</code>, <code>font</code>, <code>img</code>, <code>input</code>, and <code>span</code> by default (see <code>HtmlPolicyBuilder.DEFAULT_SKIP_IF_EMPTY</code>).</p>\n"}],"owner":{"account_id":3546793,"reputation":1587,"user_id":2962555,"accept_rate":44,"display_name":"Laodao"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":747,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64890480,"answer_count":1,"score":0,"last_activity_date":1695390378,"creation_date":1605653783,"question_id":64884575,"body_markdown":"I am using OWASP sanitizer to do some clean for the input data. Below is the Policy I used \r\n\r\n                 return new HtmlPolicyBuilder()\r\n                        .allowElements(&quot;a&quot;, &quot;label&quot;, &quot;h1&quot;, &quot;h2&quot;, &quot;h3&quot;, &quot;h4&quot;, &quot;h5&quot;, &quot;h6&quot;,\r\n                                &quot;p&quot;, &quot;i&quot;, &quot;b&quot;, &quot;u&quot;, &quot;strong&quot;, &quot;em&quot;, &quot;small&quot;, &quot;big&quot;, &quot;pre&quot;, &quot;code&quot;,\r\n                                &quot;cite&quot;, &quot;samp&quot;, &quot;sub&quot;, &quot;sup&quot;, &quot;strike&quot;, &quot;center&quot;, &quot;blockquote&quot;,\r\n                                &quot;hr&quot;, &quot;br&quot;, &quot;col&quot;, &quot;font&quot;, &quot;span&quot;, &quot;div&quot;, &quot;img&quot;,\r\n                                &quot;ul&quot;, &quot;ol&quot;, &quot;li&quot;, &quot;dd&quot;, &quot;dt&quot;, &quot;dl&quot;, &quot;tbody&quot;, &quot;thead&quot;, &quot;tfoot&quot;,\r\n                                &quot;table&quot;, &quot;td&quot;, &quot;th&quot;, &quot;tr&quot;, &quot;colgroup&quot;, &quot;fieldset&quot;, &quot;legend&quot;)\r\n                        .allowAttributes(&quot;src&quot;, &quot;alt&quot;, &quot;align&quot;, &quot;title&quot;, &quot;hspace&quot;, &quot;vspace&quot;).onElements(&quot;img&quot;)\r\n                        .allowAttributes(&quot;href&quot;, &quot;target&quot;).onElements(&quot;a&quot;)\r\n                        .allowAttributes(&quot;border&quot;, &quot;cellpadding&quot;, &quot;cellspacing&quot;, &quot;style&quot;, &quot;class&quot;).onElements(&quot;table&quot;)\r\n                        .allowAttributes(&quot;colspan&quot;, &quot;rowspan&quot;, &quot;style&quot;, &quot;class&quot;, &quot;align&quot;, &quot;valign&quot;).onElements(&quot;td&quot;)\r\n                        .allowAttributes(&quot;border&quot;, &quot;height&quot;, &quot;width&quot;).globally()\r\n                        .allowStandardUrlProtocols()\r\n                        .requireRelNofollowOnLinks()\r\n                        .allowStyling()\r\n                        .toFactory();\r\n\r\n\r\nSo when my input is `&lt;a&gt;test&lt;/a&gt;`, I expect it will return me the same result, cause I am allowing &quot;a&quot; tag. However, it returns &quot;test&quot; only. Here is my gradle \r\n\r\ncompile group: &#39;com.googlecode.owasp-java-html-sanitizer&#39;, name: &#39;owasp-java-html-sanitizer&#39;, version: &#39;20191001.1&#39;\r\n\r\nI also tried disallowAttributes(&quot;script&quot;). It didn&#39;t work either. Any ideas? Thanks.\r\n\r\n","title":"OWASP sanitizer generates unexpected results","body":"<p>I am using OWASP sanitizer to do some clean for the input data. Below is the Policy I used</p>\n<pre><code>             return new HtmlPolicyBuilder()\n                    .allowElements(&quot;a&quot;, &quot;label&quot;, &quot;h1&quot;, &quot;h2&quot;, &quot;h3&quot;, &quot;h4&quot;, &quot;h5&quot;, &quot;h6&quot;,\n                            &quot;p&quot;, &quot;i&quot;, &quot;b&quot;, &quot;u&quot;, &quot;strong&quot;, &quot;em&quot;, &quot;small&quot;, &quot;big&quot;, &quot;pre&quot;, &quot;code&quot;,\n                            &quot;cite&quot;, &quot;samp&quot;, &quot;sub&quot;, &quot;sup&quot;, &quot;strike&quot;, &quot;center&quot;, &quot;blockquote&quot;,\n                            &quot;hr&quot;, &quot;br&quot;, &quot;col&quot;, &quot;font&quot;, &quot;span&quot;, &quot;div&quot;, &quot;img&quot;,\n                            &quot;ul&quot;, &quot;ol&quot;, &quot;li&quot;, &quot;dd&quot;, &quot;dt&quot;, &quot;dl&quot;, &quot;tbody&quot;, &quot;thead&quot;, &quot;tfoot&quot;,\n                            &quot;table&quot;, &quot;td&quot;, &quot;th&quot;, &quot;tr&quot;, &quot;colgroup&quot;, &quot;fieldset&quot;, &quot;legend&quot;)\n                    .allowAttributes(&quot;src&quot;, &quot;alt&quot;, &quot;align&quot;, &quot;title&quot;, &quot;hspace&quot;, &quot;vspace&quot;).onElements(&quot;img&quot;)\n                    .allowAttributes(&quot;href&quot;, &quot;target&quot;).onElements(&quot;a&quot;)\n                    .allowAttributes(&quot;border&quot;, &quot;cellpadding&quot;, &quot;cellspacing&quot;, &quot;style&quot;, &quot;class&quot;).onElements(&quot;table&quot;)\n                    .allowAttributes(&quot;colspan&quot;, &quot;rowspan&quot;, &quot;style&quot;, &quot;class&quot;, &quot;align&quot;, &quot;valign&quot;).onElements(&quot;td&quot;)\n                    .allowAttributes(&quot;border&quot;, &quot;height&quot;, &quot;width&quot;).globally()\n                    .allowStandardUrlProtocols()\n                    .requireRelNofollowOnLinks()\n                    .allowStyling()\n                    .toFactory();\n</code></pre>\n<p>So when my input is <code>&lt;a&gt;test&lt;/a&gt;</code>, I expect it will return me the same result, cause I am allowing &quot;a&quot; tag. However, it returns &quot;test&quot; only. Here is my gradle</p>\n<p>compile group: 'com.googlecode.owasp-java-html-sanitizer', name: 'owasp-java-html-sanitizer', version: '20191001.1'</p>\n<p>I also tried disallowAttributes(&quot;script&quot;). It didn't work either. Any ideas? Thanks.</p>\n"},{"tags":["java","maven","maven-2","pom.xml","artifactory"],"answers":[{"tags":[],"owner":{"account_id":2671839,"reputation":5341,"user_id":2309068,"display_name":"Clement Amarnath"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1462770665,"creation_date":1462770665,"answer_id":37108092,"question_id":37107859,"body_markdown":"Use mvn deploy to republish/deploy your artifacts into remote repository.\r\n\r\nEnsure that you are pointing the deploy directory to the remote repository in your master pom.\r\n\r\nIf you want to specifically upload a file, use the following command\r\n\r\n    mvn deploy:deploy-file -DpomFile=your pom -Dfile=the jar you want to upload\r\n     -Durl=Url of the repository where the artifact need to be uploaded \r\n     -DrepositoryId=repository ID\r\n\r\nReferences: \r\n\r\nhttps://maven.apache.org/plugins/maven-deploy-plugin/usage.html\r\n\r\nhttps://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html \r\n\r\nhttp://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html \r\n\r\nhttps://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm#MAVEN314 \r\n\r\n\r\n\r\n\r\n\r\n  ","title":"how to publishing local .m2 repository all artifacts to jfrog repository","body":"<p>Use mvn deploy to republish/deploy your artifacts into remote repository.</p>\n\n<p>Ensure that you are pointing the deploy directory to the remote repository in your master pom.</p>\n\n<p>If you want to specifically upload a file, use the following command</p>\n\n<pre><code>mvn deploy:deploy-file -DpomFile=your pom -Dfile=the jar you want to upload\n -Durl=Url of the repository where the artifact need to be uploaded \n -DrepositoryId=repository ID\n</code></pre>\n\n<p>References: </p>\n\n<p><a href=\"https://maven.apache.org/plugins/maven-deploy-plugin/usage.html\" rel=\"nofollow\">https://maven.apache.org/plugins/maven-deploy-plugin/usage.html</a></p>\n\n<p><a href=\"https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html\" rel=\"nofollow\">https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html</a> </p>\n\n<p><a href=\"http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html\" rel=\"nofollow\">http://maven.apache.org/plugins/maven-deploy-plugin/examples/deploy-ssh-external.html</a> </p>\n\n<p><a href=\"https://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm#MAVEN314\" rel=\"nofollow\">https://docs.oracle.com/middleware/1212/core/MAVEN/config_maven.htm#MAVEN314</a> </p>\n"},{"tags":[],"owner":{"account_id":1106320,"reputation":20178,"user_id":1097634,"display_name":"Dror Bereznitsky"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1462806844,"creation_date":1462806844,"answer_id":37119357,"question_id":37107859,"body_markdown":"Based on your comment that those artifacts are missing from a [remote repository][1], there are 2 possible options:\r\n\r\n 1. [Importing][2] the repository content from the local .m2 directory. Artifactory support the option of importing content from a directory on the server or an archive. It is possible to import files into remote repository caches.\r\n 2. Re-downloading the artifacts from the remote repository in order to repopulate the cache. This can be done by running a build which has those artifacts as dependencies.\r\n\r\n\r\n  [1]: https://www.jfrog.com/confluence/display/RTF/Remote+Repositories\r\n  [2]: https://www.jfrog.com/confluence/display/RTF/Importing+and+Exporting#ImportingandExporting-Import","title":"how to publishing local .m2 repository all artifacts to jfrog repository","body":"<p>Based on your comment that those artifacts are missing from a <a href=\"https://www.jfrog.com/confluence/display/RTF/Remote+Repositories\" rel=\"nofollow\">remote repository</a>, there are 2 possible options:</p>\n\n<ol>\n<li><a href=\"https://www.jfrog.com/confluence/display/RTF/Importing+and+Exporting#ImportingandExporting-Import\" rel=\"nofollow\">Importing</a> the repository content from the local .m2 directory. Artifactory support the option of importing content from a directory on the server or an archive. It is possible to import files into remote repository caches.</li>\n<li>Re-downloading the artifacts from the remote repository in order to repopulate the cache. This can be done by running a build which has those artifacts as dependencies.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20375424,"reputation":517,"user_id":14946729,"display_name":"grigouille"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695389958,"creation_date":1695389958,"answer_id":77158119,"question_id":37107859,"body_markdown":"- Package your directory into an archive (tar) file.\r\n- click &quot;Deploy&quot; and select your archive\r\n- checkboxes will appear : check &quot;Deploy as Bundle Artifact&quot;\r\n- fix the &quot;target path&quot; to your need\r\n- validate and you&#39;re done","title":"how to publishing local .m2 repository all artifacts to jfrog repository","body":"<ul>\n<li>Package your directory into an archive (tar) file.</li>\n<li>click &quot;Deploy&quot; and select your archive</li>\n<li>checkboxes will appear : check &quot;Deploy as Bundle Artifact&quot;</li>\n<li>fix the &quot;target path&quot; to your need</li>\n<li>validate and you're done</li>\n</ul>\n"}],"owner":{"account_id":6107344,"reputation":171,"user_id":4764734,"accept_rate":14,"display_name":"nikned"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2750,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":3,"score":3,"last_activity_date":1695389958,"creation_date":1462769008,"question_id":37107859,"body_markdown":"I upgraded JFrog Artifactory to the latest version, and after upgrade I see some artifacts are missing, and also pom files, I still have them in local .m2 directory. Is there a way I can republish/deploy  all these artifacts to a remote Artifactory repository at once ? \r\n","title":"how to publishing local .m2 repository all artifacts to jfrog repository","body":"<p>I upgraded JFrog Artifactory to the latest version, and after upgrade I see some artifacts are missing, and also pom files, I still have them in local .m2 directory. Is there a way I can republish/deploy  all these artifacts to a remote Artifactory repository at once ? </p>\n"},{"tags":["java","arrays","string","printing"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":5,"creation_date":1695145014,"post_id":77136756,"comment_id":135983822,"body_markdown":"The error message states that `tokenize` expects a `String` argument, not a `String[]`.","body":"The error message states that <code>tokenize</code> expects a <code>String</code> argument, not a <code>String[]</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1695145101,"post_id":77136756,"comment_id":135983837,"body_markdown":"It isn&#39;t. The message is telling you that `tokenize` expects a `String`, but found a String Array, i.e., `String []`.","body":"It isn&#39;t. The message is telling you that <code>tokenize</code> expects a <code>String</code>, but found a String Array, i.e., <code>String []</code>."}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695148014,"creation_date":1695148014,"answer_id":77137078,"question_id":77136756,"body_markdown":"The problem is **exactly because it isn&#39;t considering arr as a string**.\r\n\r\nThe error say that the method `tokenize(String)` expects a `String` as parameter but recived `String[]` (`arr`).\r\n\r\nTo solve this you can change the variable declaration to it be a `String`:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n\tString str = &quot;I went to the park at 2:30 and aw a dog It barked!&quot;;\r\n\tSystem.out.println(tokenize(str));\r\n}\r\n```","title":"passing in a String[] and printing it in main statement java","body":"<p>The problem is <strong>exactly because it isn't considering arr as a string</strong>.</p>\n<p>The error say that the method <code>tokenize(String)</code> expects a <code>String</code> as parameter but recived <code>String[]</code> (<code>arr</code>).</p>\n<p>To solve this you can change the variable declaration to it be a <code>String</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    String str = &quot;I went to the park at 2:30 and aw a dog It barked!&quot;;\n    System.out.println(tokenize(str));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24998171,"reputation":16,"user_id":18858798,"display_name":"Noob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695389533,"creation_date":1695389533,"answer_id":77158080,"question_id":77136756,"body_markdown":"The method tokenize(String) expects a String variable as an argument but you are passing tokenize(arr) which is a String array. That is the reason you are getting the error.\r\n\r\n\r\n","title":"passing in a String[] and printing it in main statement java","body":"<p>The method tokenize(String) expects a String variable as an argument but you are passing tokenize(arr) which is a String array. That is the reason you are getting the error.</p>\n"}],"owner":{"account_id":28123982,"reputation":1,"user_id":21489736,"display_name":"Emma Cheney"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1695389533,"creation_date":1695144827,"question_id":77136756,"body_markdown":"I want to print the result of a method that passes in a `String[]` but I&#39;m getting the error:\r\n\r\n```\r\nThe method tokenize(String) in the type ReadingScore is not applicable for the arguments (String[])\r\n```\r\n\r\nI have this so far:\r\n\r\n```java \r\npublic static void main(String[] args) {\r\n        String[] arr = {&quot;I&quot;, &quot;went&quot;, &quot;to&quot;, &quot;the&quot;, &quot;park&quot;, &quot;at&quot;, &quot;2:30&quot;, &quot;and&quot;, &quot;saw&quot;, &quot;a&quot;, &quot;dog.&quot;, &quot;It&quot;, &quot;barked!&quot;}; \r\n        System.out.println(tokenize(arr));\r\n    }\r\n}\r\n```\r\n\r\nbut I don&#39;t understand why it is considering arr as a string ","title":"passing in a String[] and printing it in main statement java","body":"<p>I want to print the result of a method that passes in a <code>String[]</code> but I'm getting the error:</p>\n<pre><code>The method tokenize(String) in the type ReadingScore is not applicable for the arguments (String[])\n</code></pre>\n<p>I have this so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n        String[] arr = {&quot;I&quot;, &quot;went&quot;, &quot;to&quot;, &quot;the&quot;, &quot;park&quot;, &quot;at&quot;, &quot;2:30&quot;, &quot;and&quot;, &quot;saw&quot;, &quot;a&quot;, &quot;dog.&quot;, &quot;It&quot;, &quot;barked!&quot;}; \n        System.out.println(tokenize(arr));\n    }\n}\n</code></pre>\n<p>but I don't understand why it is considering arr as a string</p>\n"},{"tags":["java","docker","dockerfile"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695276365,"post_id":77147543,"comment_id":136003237,"body_markdown":"i m pretty sure there are maven plugins for that, but what you dont want to specify in the docker file, you will have to specify to the plugin regardless? https://dmp.fabric8.io/","body":"i m pretty sure there are maven plugins for that, but what you dont want to specify in the docker file, you will have to specify to the plugin regardless? <a href=\"https://dmp.fabric8.io/\" rel=\"nofollow noreferrer\">dmp.fabric8.io</a>"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695276449,"post_id":77147543,"comment_id":136003255,"body_markdown":"See also this link that uses a similar plugin https://stackoverflow.com/q/57399529/16034206","body":"See also this link that uses a similar plugin <a href=\"https://stackoverflow.com/q/57399529/16034206\">stackoverflow.com/q/57399529/16034206</a>"},{"owner":{"account_id":8913863,"reputation":155,"user_id":6653070,"display_name":"Sudhir Goswami"},"score":0,"creation_date":1695276535,"post_id":77147543,"comment_id":136003262,"body_markdown":"@experimentunit1998X, I will check this option.","body":"@experimentunit1998X, I will check this option."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695276703,"post_id":77147543,"comment_id":136003287,"body_markdown":"wait, these are two different plugins. The second one is from [spotify](https://github.com/spotify/docker-maven-plugin/blob/master/README.md) but it seems that both support creating a docker file from a provided configuration so either one should work?","body":"wait, these are two different plugins. The second one is from <a href=\"https://github.com/spotify/docker-maven-plugin/blob/master/README.md\" rel=\"nofollow noreferrer\">spotify</a> but it seems that both support creating a docker file from a provided configuration so either one should work?"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695276896,"post_id":77147543,"comment_id":136003310,"body_markdown":"these are also valid options: https://medium.com/swlh/build-a-docker-image-using-maven-and-spring-boot-58147045a400","body":"these are also valid options: <a href=\"https://medium.com/swlh/build-a-docker-image-using-maven-and-spring-boot-58147045a400\" rel=\"nofollow noreferrer\">medium.com/swlh/&hellip;</a>"},{"owner":{"account_id":8913863,"reputation":155,"user_id":6653070,"display_name":"Sudhir Goswami"},"score":0,"creation_date":1695278225,"post_id":77147543,"comment_id":136003516,"body_markdown":"this video is also helpful to perform step by step https://www.youtube.com/watch?v=YVnQydym9Gw","body":"this video is also helpful to perform step by step <a href=\"https://www.youtube.com/watch?v=YVnQydym9Gw\" rel=\"nofollow noreferrer\">youtube.com/watch?v=YVnQydym9Gw</a>"},{"owner":{"account_id":8913863,"reputation":155,"user_id":6653070,"display_name":"Sudhir Goswami"},"score":0,"creation_date":1695388491,"post_id":77147543,"comment_id":136021639,"body_markdown":"Hi @experimentunit1998X, I have tried to put all the fabric plugin in pom.xml file but docker file is not getting generated. I am updating the configuration in question section.","body":"Hi @experimentunit1998X, I have tried to put all the fabric plugin in pom.xml file but docker file is not getting generated. I am updating the configuration in question section."},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1695389665,"post_id":77147543,"comment_id":136021895,"body_markdown":"Hi OP, this section of the documentation says it should, though I cannot confirm if it is true for you? https://dmp.fabric8.io/#docker:build &quot;When using this mode, the Dockerfile is created on the fly with all instructions extracted from the configuration given.&quot;","body":"Hi OP, this section of the documentation says it should, though I cannot confirm if it is true for you? <a href=\"https://dmp.fabric8.io/#docker:build\" rel=\"nofollow noreferrer\">dmp.fabric8.io/#docker:build</a> &quot;When using this mode, the Dockerfile is created on the fly with all instructions extracted from the configuration given.&quot;"}],"answers":[{"tags":[],"owner":{"account_id":1023013,"reputation":16655,"user_id":1032890,"accept_rate":100,"display_name":"GeertPt"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695389314,"creation_date":1695389314,"answer_id":77158048,"question_id":77147543,"body_markdown":"Fabric8 maven plugin does not generate a Dockerfile on disk, it immediately builds the Docker container. \r\n\r\nIf you specify a `&lt;dockerFile&gt;` configuration, it assumes it&#39;s an existing external Dockerfile, and skips generating one.\r\n\r\nAn alternative is the Jib maven plugin from google: https://cloud.google.com/java/getting-started/jib. However, it also does not generate an actual Dockerfile, it generates the container image directly.","title":"How to generate the dockerfile for java based project?","body":"<p>Fabric8 maven plugin does not generate a Dockerfile on disk, it immediately builds the Docker container.</p>\n<p>If you specify a <code>&lt;dockerFile&gt;</code> configuration, it assumes it's an existing external Dockerfile, and skips generating one.</p>\n<p>An alternative is the Jib maven plugin from google: <a href=\"https://cloud.google.com/java/getting-started/jib\" rel=\"nofollow noreferrer\">https://cloud.google.com/java/getting-started/jib</a>. However, it also does not generate an actual Dockerfile, it generates the container image directly.</p>\n"}],"owner":{"account_id":8913863,"reputation":155,"user_id":6653070,"display_name":"Sudhir Goswami"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695389314,"creation_date":1695276176,"question_id":77147543,"body_markdown":"I am looking for generate the Dockerfile for java based project? I don&#39;t want to write it manually. Because for .NET projects in Visual Studio, there is a Docker plugin that can generate the Dockerfile once you build the project. Please help me understand if it&#39;s the same for Java projects as well.\r\n\r\n    \t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;io.fabric8&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;0.43.4&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;verbose&gt;true&lt;/verbose&gt;\r\n\t\t\t\t\t&lt;images&gt;\r\n\t\t\t\t\t\t&lt;image&gt;\r\n\t\t\t\t\t\t\t&lt;name&gt;kbe-rest&lt;/name&gt;\r\n\t\t\t\t\t\t\t&lt;build&gt;\r\n\t\t\t\t\t\t\t\t&lt;assembly&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;descriptionRef&gt;artifact&lt;/descriptionRef&gt;\r\n\t\t\t\t\t\t\t\t&lt;/assembly&gt;\r\n\t\t\t\t\t\t\t\t&lt;dockerFile&gt;Dockerfile&lt;/dockerFile&gt;\r\n\t\t\t\t\t\t\t\t&lt;tags&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;tag&gt;latest&lt;/tag&gt;\r\n\t\t\t\t\t\t\t\t&lt;/tags&gt;\r\n\t\t\t\t\t\t\t&lt;/build&gt;\r\n\t\t\t\t\t\t&lt;/image&gt;\r\n\t\t\t\t\t&lt;/images&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;","title":"How to generate the dockerfile for java based project?","body":"<p>I am looking for generate the Dockerfile for java based project? I don't want to write it manually. Because for .NET projects in Visual Studio, there is a Docker plugin that can generate the Dockerfile once you build the project. Please help me understand if it's the same for Java projects as well.</p>\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;io.fabric8&lt;/groupId&gt;\n            &lt;artifactId&gt;docker-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;0.43.4&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;verbose&gt;true&lt;/verbose&gt;\n                &lt;images&gt;\n                    &lt;image&gt;\n                        &lt;name&gt;kbe-rest&lt;/name&gt;\n                        &lt;build&gt;\n                            &lt;assembly&gt;\n                                &lt;descriptionRef&gt;artifact&lt;/descriptionRef&gt;\n                            &lt;/assembly&gt;\n                            &lt;dockerFile&gt;Dockerfile&lt;/dockerFile&gt;\n                            &lt;tags&gt;\n                                &lt;tag&gt;latest&lt;/tag&gt;\n                            &lt;/tags&gt;\n                        &lt;/build&gt;\n                    &lt;/image&gt;\n                &lt;/images&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1486535523,"post_id":42106147,"comment_id":71381546,"body_markdown":"Strings are _immutable_ in Java. You cannot replace characters in a String, you have to build a new string, or use a `StringBuilder`, which _is_ mutable.","body":"Strings are <i>immutable</i> in Java. You cannot replace characters in a String, you have to build a new string, or use a <code>StringBuilder</code>, which <i>is</i> mutable."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1486535525,"post_id":42106147,"comment_id":71381548,"body_markdown":"`char x = &#39;x&#39;|&#39;X&#39;;` what are you trying to do here?","body":"<code>char x = &#39;x&#39;|&#39;X&#39;;</code> what are you trying to do here?"},{"owner":{"account_id":7756609,"reputation":31,"user_id":5870673,"accept_rate":20,"display_name":"Latz"},"score":0,"creation_date":1486535865,"post_id":42106147,"comment_id":71381699,"body_markdown":"char x = &#39;x&#39;|&#39;X&#39; // To handle user input if either x|X is entered.","body":"char x = &#39;x&#39;|&#39;X&#39; // To handle user input if either x|X is entered."},{"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"score":0,"creation_date":1486536679,"post_id":42106147,"comment_id":71382083,"body_markdown":"Using [`String.toCharArray`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray()) and [`String.indexOf`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)), it would be quite simple to do this without a loop (unless you have more than one character to replace)","body":"Using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray()\" rel=\"nofollow noreferrer\"><code>String.toCharArray</code></a> and <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)\" rel=\"nofollow noreferrer\"><code>String.indexOf</code></a>, it would be quite simple to do this without a loop (unless you have more than one character to replace)"},{"owner":{"account_id":2074932,"reputation":3824,"user_id":1848578,"accept_rate":75,"display_name":"qxz"},"score":3,"creation_date":1486536731,"post_id":42106147,"comment_id":71382103,"body_markdown":"@Latz Unfortunately you can only store one `char` inside a `char`. `&#39;x&#39; | &#39;X&#39;` evaluates to the bitwise-OR of the two char values `&#39;x&#39;` and `&#39;X&#39;`, which equals `120` (or in char form, simply `&#39;x&#39;`). If you want to compare to two chars, you&#39;re gonna have to do two comparisons in your `if` condition.","body":"@Latz Unfortunately you can only store one <code>char</code> inside a <code>char</code>. <code>&#39;x&#39; | &#39;X&#39;</code> evaluates to the bitwise-OR of the two char values <code>&#39;x&#39;</code> and <code>&#39;X&#39;</code>, which equals <code>120</code> (or in char form, simply <code>&#39;x&#39;</code>). If you want to compare to two chars, you&#39;re gonna have to do two comparisons in your <code>if</code> condition."},{"owner":{"account_id":2074932,"reputation":3824,"user_id":1848578,"accept_rate":75,"display_name":"qxz"},"score":1,"creation_date":1486536854,"post_id":42106147,"comment_id":71382153,"body_markdown":"Also, [`String.replace(char, char)`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)) doesn&#39;t do what you think it does; take a look at [the docs](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)). (It replaces _all_ occurrences of that char, not just one)","body":"Also, <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\"><code>String.replace(char, char)</code></a> doesn&#39;t do what you think it does; take a look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace(char,%20char)\" rel=\"nofollow noreferrer\">the docs</a>. (It replaces <i>all</i> occurrences of that char, not just one)"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1486541035,"creation_date":1486537478,"answer_id":42106720,"question_id":42106147,"body_markdown":"I am always a fan of using `StringBuilder`s, so here&#39;s a solution using that:\r\n\r\n    private static String replaceUnknownChars(String strWithUnknownChars, String fullStr) {\r\n        StringBuilder sb = new StringBuilder(strWithUnknownChars);\r\n        while ((int index = Math.max(sb.toString().indexOf(&#39;x&#39;), sb.toString().indexOf(&#39;X&#39;))) != -1) {\r\n            sb.setCharAt(index, fullStr.charAt(index));\r\n        }\r\n\r\n        return sb.toString();\r\n    }\r\n\r\nIt&#39;s quite straightforward. You create a new string builder. While a `x` or `X` can still be found in the string builder (`indexOf(&#39;X&#39;) != -1`), get the index and `setCharAt`.","title":"Replacing a character in a string from another string with the same char index","body":"<p>I am always a fan of using <code>StringBuilder</code>s, so here's a solution using that:</p>\n\n<pre><code>private static String replaceUnknownChars(String strWithUnknownChars, String fullStr) {\n    StringBuilder sb = new StringBuilder(strWithUnknownChars);\n    while ((int index = Math.max(sb.toString().indexOf('x'), sb.toString().indexOf('X'))) != -1) {\n        sb.setCharAt(index, fullStr.charAt(index));\n    }\n\n    return sb.toString();\n}\n</code></pre>\n\n<p>It's quite straightforward. You create a new string builder. While a <code>x</code> or <code>X</code> can still be found in the string builder (<code>indexOf('X') != -1</code>), get the index and <code>setCharAt</code>.</p>\n"},{"tags":[],"owner":{"account_id":5531638,"reputation":14395,"user_id":4391450,"display_name":"AxelH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486635238,"creation_date":1486537531,"answer_id":42106741,"question_id":42106147,"body_markdown":"Your are using `String.replace(char, char)` the wrong way, the doc says\r\n\r\n&gt; Returns a new string resulting from replacing all occurrences of oldChar in this string with newChar. \r\n\r\nSo you if you have more than one character, this will replace every one with the same value.\r\n\r\nYou need to &quot;change&quot; only the character at a specific spot, for this, the easiest is to use the char array that you can get with [`String.toCharArray`][3], from this, this is you can use the same logic.\r\n\r\nOf course, you can use [`String.indexOf`][2] to find the index of a specific character\r\n\r\nNote : `char c = &#39;x&#39;|&#39;X&#39;`; will not give you the expected result. This will do a binary operation giving a value that is not the one you want.\r\n\r\nThe OR will return 1 if one of the bit is 1. \r\n\r\n    0111 1000 (x)\r\n    0101 1000 (X)\r\n    OR\r\n    0111 1000 (x)\r\n\r\nBut the result will be an integer (every numeric operation return at minimum an integer, you can find more information about that)\r\n\r\nYou have two solution here, you either use two variable (or an array) or if you can, you use [`String.toLowerCase`][1] an use only `char c = &#39;x&#39;`\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toLowerCase()\r\n  [2]:https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)\r\n  [3]:https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray()","title":"Replacing a character in a string from another string with the same char index","body":"<p>Your are using <code>String.replace(char, char)</code> the wrong way, the doc says</p>\n\n<blockquote>\n  <p>Returns a new string resulting from replacing all occurrences of oldChar in this string with newChar. </p>\n</blockquote>\n\n<p>So you if you have more than one character, this will replace every one with the same value.</p>\n\n<p>You need to \"change\" only the character at a specific spot, for this, the easiest is to use the char array that you can get with <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toCharArray()\" rel=\"nofollow noreferrer\"><code>String.toCharArray</code></a>, from this, this is you can use the same logic.</p>\n\n<p>Of course, you can use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf(int)\" rel=\"nofollow noreferrer\"><code>String.indexOf</code></a> to find the index of a specific character</p>\n\n<p>Note : <code>char c = 'x'|'X'</code>; will not give you the expected result. This will do a binary operation giving a value that is not the one you want.</p>\n\n<p>The OR will return 1 if one of the bit is 1. </p>\n\n<pre><code>0111 1000 (x)\n0101 1000 (X)\nOR\n0111 1000 (x)\n</code></pre>\n\n<p>But the result will be an integer (every numeric operation return at minimum an integer, you can find more information about that)</p>\n\n<p>You have two solution here, you either use two variable (or an array) or if you can, you use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toLowerCase()\" rel=\"nofollow noreferrer\"><code>String.toLowerCase</code></a> an use only <code>char c = 'x'</code></p>\n"},{"tags":[],"owner":{"display_name":"user22614890"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695389076,"creation_date":1695389076,"answer_id":77158023,"question_id":42106147,"body_markdown":"With the level of details from the description the solution is less complex than imagine.\r\n\r\n```[Java]\r\nString voucherRecord = &quot;111122223333&quot;;\r\nString voucherNumber = &quot;1111x22xx333&quot;;\r\nString testVoucher = voucherNumber.replace(voucherNumber, voucherRecord);\r\n```\r\n\r\nAdditional details on what prevents replacing `voucherNumber` with `voucherRecord` definitely increase complexity.","title":"Replacing a character in a string from another string with the same char index","body":"<p>With the level of details from the description the solution is less complex than imagine.</p>\n<pre><code>String voucherRecord = &quot;111122223333&quot;;\nString voucherNumber = &quot;1111x22xx333&quot;;\nString testVoucher = voucherNumber.replace(voucherNumber, voucherRecord);\n</code></pre>\n<p>Additional details on what prevents replacing <code>voucherNumber</code> with <code>voucherRecord</code> definitely increase complexity.</p>\n"}],"owner":{"account_id":7756609,"reputation":31,"user_id":5870673,"accept_rate":20,"display_name":"Latz"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":42106720,"answer_count":3,"score":0,"last_activity_date":1695389076,"creation_date":1486535290,"question_id":42106147,"body_markdown":"I&#39;m trying to search and reveal unknown characters in a string. Both strings are of length 12.\r\n\r\n\r\nExample: \r\n         \r\n         String s1 = &quot;1x11222xx333&quot;;\r\n         String s2 = &quot;111122223333&quot;\r\n\r\nThe program should check for all unknowns in s1 represented by x|X and get the relevant chars in s2 and replace the x|X by the relevant char.\r\n\r\nSo far my code has replaced only the first x|X with the relevant char from s2 but printed duplicates for the rest of the unknowns with the char for the first x|X.\r\n\r\nHere is my code:\r\n\r\n\r\n        String VoucherNumber = &quot;1111x22xx333&quot;;\r\n        String VoucherRecord = &quot;111122223333&quot;;\r\n        String testVoucher = null;\r\n        char x = &#39;x&#39;|&#39;X&#39;;\r\n        \r\n        System.out.println(VoucherNumber); // including unknowns\r\n        \r\n            \r\n                //find x|X in the string VoucherNumber\r\n                for(int i = 0; i &lt; VoucherNumber.length(); i++){\r\n            \r\n                       if (VoucherNumber.charAt(i) == x){\r\n                           \r\n                           testVoucher = VoucherNumber.replace(VoucherNumber.charAt(i), VoucherRecord.charAt(i));\r\n                        \r\n                       }\r\n                    \r\n                         \r\n                }\r\n                \r\n                         System.out.println(testVoucher); //after replacing unknowns\r\n            }\r\n            \r\n           \r\n        }\r\n","title":"Replacing a character in a string from another string with the same char index","body":"<p>I'm trying to search and reveal unknown characters in a string. Both strings are of length 12.</p>\n\n<p>Example: </p>\n\n<pre><code>     String s1 = \"1x11222xx333\";\n     String s2 = \"111122223333\"\n</code></pre>\n\n<p>The program should check for all unknowns in s1 represented by x|X and get the relevant chars in s2 and replace the x|X by the relevant char.</p>\n\n<p>So far my code has replaced only the first x|X with the relevant char from s2 but printed duplicates for the rest of the unknowns with the char for the first x|X.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>    String VoucherNumber = \"1111x22xx333\";\n    String VoucherRecord = \"111122223333\";\n    String testVoucher = null;\n    char x = 'x'|'X';\n\n    System.out.println(VoucherNumber); // including unknowns\n\n\n            //find x|X in the string VoucherNumber\n            for(int i = 0; i &lt; VoucherNumber.length(); i++){\n\n                   if (VoucherNumber.charAt(i) == x){\n\n                       testVoucher = VoucherNumber.replace(VoucherNumber.charAt(i), VoucherRecord.charAt(i));\n\n                   }\n\n\n            }\n\n                     System.out.println(testVoucher); //after replacing unknowns\n        }\n\n\n    }\n</code></pre>\n"},{"tags":["java","queue","ignite","distributed"],"answers":[{"tags":[],"owner":{"account_id":27719614,"reputation":11,"user_id":21160483,"display_name":"user21160483"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695388807,"creation_date":1693932367,"answer_id":77046331,"question_id":77042456,"body_markdown":"How about this: The data in your cache that you are prioritizing has a parallel Java code deployment that maintains a priority queue of the same field as you want the cache prioritized on.\r\n\r\nThen follow this process for **get** operations:\r\n 1. Invoke get from your Java code which returns and removes the highest priority element in its queue.\r\n 2. Use that element to perform a get on the cache.\r\n\r\nFollow this process for **put** operations:\r\n 1. Put the object into your cache taking note of the priority field.\r\n 2. Put the same priority field value into you Java implementation. \r\n\r\n----------\r\n\r\nWhile the above may not be perfect under all circumstances it should perform well. Noted potential issues / assumptions:\r\n 1. Assumption that priority values are always distinct\r\n 2. There is a small and short window between when a priority item is added to the cache and when it appears in the Java priority queue. If this happened to be the next highest priority at the time it was added to the cache you might has a few milli-seconds before it actually was added to the Java code priority.\r\n 3. If your get from cache fails then your process should add the priority element back onto the Java queue implementation. Thoughts? If the Java process failed it would have to scan the cache data to set the proper priority on start up. ","title":"Implementation of an apache Ignite priority queue","body":"<p>How about this: The data in your cache that you are prioritizing has a parallel Java code deployment that maintains a priority queue of the same field as you want the cache prioritized on.</p>\n<p>Then follow this process for <strong>get</strong> operations:</p>\n<ol>\n<li>Invoke get from your Java code which returns and removes the highest priority element in its queue.</li>\n<li>Use that element to perform a get on the cache.</li>\n</ol>\n<p>Follow this process for <strong>put</strong> operations:</p>\n<ol>\n<li>Put the object into your cache taking note of the priority field.</li>\n<li>Put the same priority field value into you Java implementation.</li>\n</ol>\n<hr />\n<p>While the above may not be perfect under all circumstances it should perform well. Noted potential issues / assumptions:</p>\n<ol>\n<li>Assumption that priority values are always distinct</li>\n<li>There is a small and short window between when a priority item is added to the cache and when it appears in the Java priority queue. If this happened to be the next highest priority at the time it was added to the cache you might has a few milli-seconds before it actually was added to the Java code priority.</li>\n<li>If your get from cache fails then your process should add the priority element back onto the Java queue implementation. Thoughts? If the Java process failed it would have to scan the cache data to set the proper priority on start up.</li>\n</ol>\n"}],"owner":{"account_id":3151197,"reputation":599,"user_id":2664618,"accept_rate":59,"display_name":"Dani Gilboa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695388807,"creation_date":1693898438,"question_id":77042456,"body_markdown":"I need a distributed priority queue and looking through the different data structures that Apache Ignite provides I cannot find anything that resembles a priority queue. Is there anyway to create an Ignite priority queue or am I left to fetch data from the Ignite data structure and do the priority sorting myself?\r\n\r\n","title":"Implementation of an apache Ignite priority queue","body":"<p>I need a distributed priority queue and looking through the different data structures that Apache Ignite provides I cannot find anything that resembles a priority queue. Is there anyway to create an Ignite priority queue or am I left to fetch data from the Ignite data structure and do the priority sorting myself?</p>\n"},{"tags":["java","maven","intellij-idea","annotation-processing"],"comments":[{"owner":{"account_id":9059972,"reputation":3080,"user_id":6746785,"display_name":"gthanop"},"score":0,"creation_date":1695304724,"post_id":77149015,"comment_id":136008952,"body_markdown":"[This](https://stackoverflow.com/a/65654562/6746785) answer might help with annotation processors working on incremental builds. Basically the solution seems to be to keep track of consumed annotation constructs in a resource file and checking it inside `Processor.init`.","body":"<a href=\"https://stackoverflow.com/a/65654562/6746785\">This</a> answer might help with annotation processors working on incremental builds. Basically the solution seems to be to keep track of consumed annotation constructs in a resource file and checking it inside <code>Processor.init</code>."}],"answers":[{"tags":[],"owner":{"account_id":40213,"reputation":64391,"user_id":116472,"display_name":"Thomas Broyer"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695292761,"creation_date":1695292761,"answer_id":77149487,"question_id":77149015,"body_markdown":"Because IntelliJ IDEA is (partly) open source, we can poke at the source code.\r\n\r\nThat system property leads to https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JavacMain.java#L48, and from there we can find\r\n\r\n```java\r\n      final APIWrappers.ProcessingContext procContext;\r\n      final DiagnosticOutputConsumer diagnosticListener;\r\n      if (TRACK_AP_GENERATED_DEPENDENCIES &amp;&amp; isAnnotationProcessingEnabled) {\r\n        procContext = new APIWrappers.ProcessingContext(fileManager);\r\n        // use real processor class names and not names of processor wrappers\r\n        diagnosticListener = APIWrappers.newDiagnosticListenerWrapper(procContext, diagnosticConsumer);\r\n      }\r\n      else {\r\n        procContext = null;\r\n        diagnosticListener = diagnosticConsumer;\r\n      }\r\n\r\n      // \r\n\r\n      // note: `task` is a javax.tools.JavaCompiler.CompilationTask\r\n      if (TRACK_AP_GENERATED_DEPENDENCIES &amp;&amp; isAnnotationProcessingEnabled) {\r\n        final Iterable&lt;Processor&gt; processors = lookupAnnotationProcessors(procContext, getAnnotationProcessorNames(_options));\r\n        if (processors != null) {\r\n          task.setProcessors(processors);\r\n        }\r\n      }\r\n```\r\n\r\nThis then (through the `APIWrappers` wrapper classes) will eventually call https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JpsJavacFileManager.java#L665, which is then used to implement `javax.tools.JavaFileManager`&#39;s `getFileForOutput` and `getJavaFileForOutput`.\r\n\r\nI didn&#39;t look further but it looks like they&#39;re using a similar approach to Gradle&#39;s incremental annotation processing: tracing the &quot;originating elements&quot; for each generated file, so they can determine which other files/classes need to be reprocessed whenever a source file is being compiled after change.","title":"IntelliJ incremental Maven builds with annotations and APT","body":"<p>Because IntelliJ IDEA is (partly) open source, we can poke at the source code.</p>\n<p>That system property leads to <a href=\"https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JavacMain.java#L48\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JavacMain.java#L48</a>, and from there we can find</p>\n<pre class=\"lang-java prettyprint-override\"><code>      final APIWrappers.ProcessingContext procContext;\n      final DiagnosticOutputConsumer diagnosticListener;\n      if (TRACK_AP_GENERATED_DEPENDENCIES &amp;&amp; isAnnotationProcessingEnabled) {\n        procContext = new APIWrappers.ProcessingContext(fileManager);\n        // use real processor class names and not names of processor wrappers\n        diagnosticListener = APIWrappers.newDiagnosticListenerWrapper(procContext, diagnosticConsumer);\n      }\n      else {\n        procContext = null;\n        diagnosticListener = diagnosticConsumer;\n      }\n\n      // \n\n      // note: `task` is a javax.tools.JavaCompiler.CompilationTask\n      if (TRACK_AP_GENERATED_DEPENDENCIES &amp;&amp; isAnnotationProcessingEnabled) {\n        final Iterable&lt;Processor&gt; processors = lookupAnnotationProcessors(procContext, getAnnotationProcessorNames(_options));\n        if (processors != null) {\n          task.setProcessors(processors);\n        }\n      }\n</code></pre>\n<p>This then (through the <code>APIWrappers</code> wrapper classes) will eventually call <a href=\"https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JpsJavacFileManager.java#L665\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-community/blob/6a50833d3cbdfc342e8fe16d954938b9f465fb2e/jps/jps-builders-6/src/org/jetbrains/jps/javac/JpsJavacFileManager.java#L665</a>, which is then used to implement <code>javax.tools.JavaFileManager</code>'s <code>getFileForOutput</code> and <code>getJavaFileForOutput</code>.</p>\n<p>I didn't look further but it looks like they're using a similar approach to Gradle's incremental annotation processing: tracing the &quot;originating elements&quot; for each generated file, so they can determine which other files/classes need to be reprocessed whenever a source file is being compiled after change.</p>\n"},{"tags":[],"owner":{"account_id":28411028,"reputation":416,"user_id":21734429,"display_name":"romanv-jb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695388794,"creation_date":1695388794,"answer_id":77157987,"question_id":77149015,"body_markdown":"For Maven-based Projects IDEA, by default, delegates the the build process to its&#39; native Build System, see [Delegate IDE build/run actions to Maven][1] option.\r\n\r\nIDEA&#39;s Build System does support Incremental Annotation Processing. There are no limitations per se, as it only depends on how well the AP adheres to AP-writing best practices.\r\n\r\nSpecifically, that depends on how well AP reports on so-called &quot;origins&quot; when it returns the result of its&#39; work to IDEA/Javac.\r\n&quot;Origin&quot; indicates which object(s) data returned by AP relates to.\r\nBased off this &quot;origin&quot; data IDEA determines which objects within the Project have been updated and therefore have to be recompiled, removed, etc.\r\nUnfortunately, some APs do not provide this data or do not provide enough of it and in such cases you are likely to get inconsistent compilation results.\r\n\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/maven-runner.html","title":"IntelliJ incremental Maven builds with annotations and APT","body":"<p>For Maven-based Projects IDEA, by default, delegates the the build process to its' native Build System, see <a href=\"https://www.jetbrains.com/help/idea/maven-runner.html\" rel=\"nofollow noreferrer\">Delegate IDE build/run actions to Maven</a> option.</p>\n<p>IDEA's Build System does support Incremental Annotation Processing. There are no limitations per se, as it only depends on how well the AP adheres to AP-writing best practices.</p>\n<p>Specifically, that depends on how well AP reports on so-called &quot;origins&quot; when it returns the result of its' work to IDEA/Javac.\n&quot;Origin&quot; indicates which object(s) data returned by AP relates to.\nBased off this &quot;origin&quot; data IDEA determines which objects within the Project have been updated and therefore have to be recompiled, removed, etc.\nUnfortunately, some APs do not provide this data or do not provide enough of it and in such cases you are likely to get inconsistent compilation results.</p>\n"}],"owner":{"account_id":877636,"reputation":711,"user_id":120140,"display_name":"Mark Proctor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695388794,"creation_date":1695289152,"question_id":77149015,"body_markdown":"Gradle supports incremental annotation processing now, but I don&#39;t believe that helps those with Maven projects in IntelliJ. When I google on this I find a few references to IntelliJ and incremental annotation processing, but nothing describing how it works, its limitations etc. Is there any public information on this?\r\nhttps://github.com/JetBrains/intellij-community/tree/master/java/java-tests/testData/compileServer/incremental/annotations\r\n\r\nI&#39;ve found posts like this:\r\nhttps://intellij-support.jetbrains.com/hc/en-us/community/posts/7085229549586-JPS-incremental-annotation-processing-is-disabled\r\n\r\nAnd the property &quot;jps.track.ap.dependencies&quot;.\r\n\r\nSo this makes me believe IntelliJ is trying to do something that in some situations might be incremental...\r\n\r\nI&#39;ve done extensive searching and cannot find anything, I&#39;m hoping someone might be aware of a resource they can point to, or maybe have some internal Knowledge on this they can relate.","title":"IntelliJ incremental Maven builds with annotations and APT","body":"<p>Gradle supports incremental annotation processing now, but I don't believe that helps those with Maven projects in IntelliJ. When I google on this I find a few references to IntelliJ and incremental annotation processing, but nothing describing how it works, its limitations etc. Is there any public information on this?\n<a href=\"https://github.com/JetBrains/intellij-community/tree/master/java/java-tests/testData/compileServer/incremental/annotations\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-community/tree/master/java/java-tests/testData/compileServer/incremental/annotations</a></p>\n<p>I've found posts like this:\n<a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/7085229549586-JPS-incremental-annotation-processing-is-disabled\" rel=\"nofollow noreferrer\">https://intellij-support.jetbrains.com/hc/en-us/community/posts/7085229549586-JPS-incremental-annotation-processing-is-disabled</a></p>\n<p>And the property &quot;jps.track.ap.dependencies&quot;.</p>\n<p>So this makes me believe IntelliJ is trying to do something that in some situations might be incremental...</p>\n<p>I've done extensive searching and cannot find anything, I'm hoping someone might be aware of a resource they can point to, or maybe have some internal Knowledge on this they can relate.</p>\n"},{"tags":["java","gradle","intellij-idea","build.gradle","gradle-plugin"],"comments":[{"owner":{"account_id":11179248,"reputation":11890,"user_id":8203759,"display_name":"Konstantin Annikov"},"score":0,"creation_date":1695390777,"post_id":77157952,"comment_id":136022160,"body_markdown":"Does it work out of IntelliJ?","body":"Does it work out of IntelliJ?"}],"answers":[{"tags":[],"owner":{"account_id":27004317,"reputation":1,"user_id":20565072,"display_name":"user20565072"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695388741,"creation_date":1695388741,"answer_id":77157979,"question_id":77157952,"body_markdown":"Are you sure you have installed Gradle correctly on your machine? Check in the terminal using &#39;gradle -version","title":"Gradle Plugin is not found","body":"<p>Are you sure you have installed Gradle correctly on your machine? Check in the terminal using 'gradle -version</p>\n"}],"owner":{"account_id":29509379,"reputation":1,"user_id":22614757,"display_name":"Simone"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695388741,"creation_date":1695388528,"question_id":77157952,"body_markdown":"As you can see, the plugin [id: &#39;org.gradle.toolchains.foojay-resolver-convention&#39;, version: &#39;0.4.0&#39;] is not found, and I don&#39;t understand why. I am working on this project with other colleagues. The Gradle build works for them. We have analyzed our classes, and they are identical. I don&#39;t understand what I&#39;m doing wrong. (https://i.stack.imgur.com/ySIGD.png)\r\n\r\nI have cloned the project from the repository several times, but with no success. Furthermore, my colleagues have sent me their project folder, but that doesn&#39;t work for me either. Finally, I tried creating a new test project, adding Gradle from IntelliJ right away, and it works in this case.The environment variables appear to be correct.","title":"Gradle Plugin is not found","body":"<p>As you can see, the plugin [id: 'org.gradle.toolchains.foojay-resolver-convention', version: '0.4.0'] is not found, and I don't understand why. I am working on this project with other colleagues. The Gradle build works for them. We have analyzed our classes, and they are identical. I don't understand what I'm doing wrong. (<a href=\"https://i.stack.imgur.com/ySIGD.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/ySIGD.png</a>)</p>\n<p>I have cloned the project from the repository several times, but with no success. Furthermore, my colleagues have sent me their project folder, but that doesn't work for me either. Finally, I tried creating a new test project, adding Gradle from IntelliJ right away, and it works in this case.The environment variables appear to be correct.</p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":882111,"reputation":2915,"user_id":251370,"accept_rate":75,"display_name":"Bex"},"score":0,"creation_date":1441067647,"post_id":32300043,"comment_id":52518693,"body_markdown":"This is why the java.util.concurrent.locks.ReadWriteLock was created.","body":"This is why the java.util.concurrent.locks.ReadWriteLock was created."}],"answers":[{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1695388428,"creation_date":1440961396,"answer_id":32300110,"question_id":32300043,"body_markdown":"Here is one simple scenario that would produce a problem on unsynchronized `get`:\r\n\r\n- Thread A starts `get`, computes the hash bucket number, and gets pre-empted\r\n- Thread B calls `clear()`, so a smaller array of buckets gets allocated\r\n- Thread A wakes up, and may run into the index-out-of-bounds exception\r\n\r\nHere is a more complex scenario:\r\n\r\n- Thread A locks the map for an update, and gets pre-empted\r\n- Thread B initiates a `get` operation, computes the hash bucket number, and gets pre-empted\r\n- Thread A wakes up, and continues the `put`, and realizes that the buckets need resizing\r\n- Thread A allocates new buckets, copies old content into them, and adds the new item\r\n- Thread B wakes up, and continues the search using the old bucket index on the new array of buckets.\r\n\r\nAt this point, thread B is probably not going to find the right item, because it is very likely to be in a hash bucket at a different index. That is why `get` needs to be synchronized as well.","title":"Why does HashMap.get(key) needs to be synchronized when change operations are synchronized?","body":"<p>Here is one simple scenario that would produce a problem on unsynchronized <code>get</code>:</p>\n<ul>\n<li>Thread A starts <code>get</code>, computes the hash bucket number, and gets pre-empted</li>\n<li>Thread B calls <code>clear()</code>, so a smaller array of buckets gets allocated</li>\n<li>Thread A wakes up, and may run into the index-out-of-bounds exception</li>\n</ul>\n<p>Here is a more complex scenario:</p>\n<ul>\n<li>Thread A locks the map for an update, and gets pre-empted</li>\n<li>Thread B initiates a <code>get</code> operation, computes the hash bucket number, and gets pre-empted</li>\n<li>Thread A wakes up, and continues the <code>put</code>, and realizes that the buckets need resizing</li>\n<li>Thread A allocates new buckets, copies old content into them, and adds the new item</li>\n<li>Thread B wakes up, and continues the search using the old bucket index on the new array of buckets.</li>\n</ul>\n<p>At this point, thread B is probably not going to find the right item, because it is very likely to be in a hash bucket at a different index. That is why <code>get</code> needs to be synchronized as well.</p>\n"}],"owner":{"account_id":59715,"reputation":3561,"user_id":178597,"display_name":"Christian"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1414,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":32300110,"answer_count":1,"score":6,"last_activity_date":1695388428,"creation_date":1440960972,"question_id":32300043,"body_markdown":"I use the `.get(...)`, `.put(...)` and `.clear()` operations from multiple threads on one HashMap. `.put(...)` and `.clear()` are inside a `synchronized` block but `.get(...)` is not. I can&#39;t imagine that this will cause problems but in other code I&#39;ve seen `.get()` is pretty much always synchronized.\r\n\r\nrelevant code for get/put\r\n\r\n    Object value = map.get(key);\r\n    if(value == null) {\r\n      synchronized (map) {\r\n        value = map.get(key); // check again, might have been changed in between\r\n        if(value == null) {\r\n          map.put(key, new Value(...));\r\n        }\r\n      }\r\n    }\r\n\r\nand clear is just:\r\n\r\n    synchronized (map) {\r\n      map.clear();\r\n    }\r\n\r\nThe write operations will invalidate caches because of the synchronized and the `get(...)` returns either null or an instance. I can&#39;t really see what could go wrong or what would improve by putting the `.get(...)` operation into a `synchronized(map)` block.","title":"Why does HashMap.get(key) needs to be synchronized when change operations are synchronized?","body":"<p>I use the <code>.get(...)</code>, <code>.put(...)</code> and <code>.clear()</code> operations from multiple threads on one HashMap. <code>.put(...)</code> and <code>.clear()</code> are inside a <code>synchronized</code> block but <code>.get(...)</code> is not. I can't imagine that this will cause problems but in other code I've seen <code>.get()</code> is pretty much always synchronized.</p>\n\n<p>relevant code for get/put</p>\n\n<pre><code>Object value = map.get(key);\nif(value == null) {\n  synchronized (map) {\n    value = map.get(key); // check again, might have been changed in between\n    if(value == null) {\n      map.put(key, new Value(...));\n    }\n  }\n}\n</code></pre>\n\n<p>and clear is just:</p>\n\n<pre><code>synchronized (map) {\n  map.clear();\n}\n</code></pre>\n\n<p>The write operations will invalidate caches because of the synchronized and the <code>get(...)</code> returns either null or an instance. I can't really see what could go wrong or what would improve by putting the <code>.get(...)</code> operation into a <code>synchronized(map)</code> block.</p>\n"},{"tags":["java","maven","intellij-idea","sonarqube"],"comments":[{"owner":{"account_id":497945,"reputation":968,"user_id":1360035,"display_name":"moilejter"},"score":0,"creation_date":1538889262,"post_id":52685593,"comment_id":92298783,"body_markdown":"Did you also install the Java analyzer in your SonarQube installation on localhost?  (I don&#39;t remember if it&#39;s there by default, or if you have to install/enable it on your installation, for use in projects it analyzes...)","body":"Did you also install the Java analyzer in your SonarQube installation on localhost?  (I don&#39;t remember if it&#39;s there by default, or if you have to install/enable it on your installation, for use in projects it analyzes...)"},{"owner":{"account_id":13841510,"reputation":47,"user_id":9991694,"display_name":"Rolfen"},"score":0,"creation_date":1538889905,"post_id":52685593,"comment_id":92298879,"body_markdown":"@moilejter SonarJava it&#39;s there by default (I had to update it tho)","body":"@moilejter SonarJava it&#39;s there by default (I had to update it tho)"},{"owner":{"account_id":282043,"reputation":4264,"user_id":578706,"accept_rate":100,"display_name":"Tibor Blenessy"},"score":0,"creation_date":1538923284,"post_id":52685593,"comment_id":92306045,"body_markdown":"Can you please post the output from maven with debug (`-X`) enabled?","body":"Can you please post the output from maven with debug (<code>-X</code>) enabled?"}],"answers":[{"tags":[],"owner":{"account_id":966533,"reputation":944,"user_id":989875,"display_name":"Charles"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1538888894,"creation_date":1538888894,"answer_id":52685627,"question_id":52685593,"body_markdown":"Sonarqube works by analyzing jacoco outputs.  I don&#39;t see any configs for jacoco in your pom.  https://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/ is a good tutorial on how to set it up.  \r\n\r\nYou will also have to tell sonarqube where your jacoco.exec file is at.\r\nhttps://docs.sonarqube.org/display/PLUG/Code+Coverage+by+Unit+Tests+for+Java+Project","title":"SonarQube doesn&#39;t analyze the main java code with IntelliJ and Maven","body":"<p>Sonarqube works by analyzing jacoco outputs.  I don't see any configs for jacoco in your pom.  <a href=\"https://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/\" rel=\"nofollow noreferrer\">https://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/</a> is a good tutorial on how to set it up.  </p>\n\n<p>You will also have to tell sonarqube where your jacoco.exec file is at.\n<a href=\"https://docs.sonarqube.org/display/PLUG/Code+Coverage+by+Unit+Tests+for+Java+Project\" rel=\"nofollow noreferrer\">https://docs.sonarqube.org/display/PLUG/Code+Coverage+by+Unit+Tests+for+Java+Project</a></p>\n"},{"tags":[],"owner":{"account_id":13841510,"reputation":47,"user_id":9991694,"display_name":"Rolfen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1538935383,"creation_date":1538935383,"answer_id":52691355,"question_id":52685593,"body_markdown":"So, the problem was that IntelliJ was configured with Java SE Development Kit 11, I downgraded to Java SE Development Kit 8u181 and configured the POM so Maven works with that change, I executed the scanner again and it worked.\r\n\r\nChanges to pom.xml:\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\r\n        &lt;sonar.sources&gt;src/main/java&lt;/sonar.sources&gt;\r\n    &lt;/properties&gt;\r\n\r\nadded:\r\n\r\n    &lt;plugin&gt;\r\n       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n             &lt;version&gt;3.8.0&lt;/version&gt;\r\n             &lt;configuration&gt;\r\n                &lt;source&gt;8&lt;/source&gt;\r\n                &lt;target&gt;8&lt;/target&gt;\r\n             &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n[New analysis results][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QCj2z.png","title":"SonarQube doesn&#39;t analyze the main java code with IntelliJ and Maven","body":"<p>So, the problem was that IntelliJ was configured with Java SE Development Kit 11, I downgraded to Java SE Development Kit 8u181 and configured the POM so Maven works with that change, I executed the scanner again and it worked.</p>\n\n<p>Changes to pom.xml:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n\n    &lt;sonar.sources&gt;src/main/java&lt;/sonar.sources&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>added:</p>\n\n<pre><code>&lt;plugin&gt;\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n         &lt;version&gt;3.8.0&lt;/version&gt;\n         &lt;configuration&gt;\n            &lt;source&gt;8&lt;/source&gt;\n            &lt;target&gt;8&lt;/target&gt;\n         &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QCj2z.png\" rel=\"nofollow noreferrer\">New analysis results</a></p>\n"}],"owner":{"account_id":13841510,"reputation":47,"user_id":9991694,"display_name":"Rolfen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2442,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":52691355,"answer_count":2,"score":3,"last_activity_date":1695387700,"creation_date":1538888426,"question_id":52685593,"body_markdown":"I&#39;m using IntelliJ with Maven for my project and i have to analyze it with SonarQube, but when I scan my project with the command provided by the webApp it only analyzes the pom.xml file ignoring the rest of the project.\r\n\r\n[![Analysis results][1]][1]\r\n\r\n&gt; clean install sonar:sonar   -Dsonar.host.url=http://localhost:9000   -Dsonar.login=&quot;the corresponding key here&quot;\r\n\r\nMy pom.xml (what is inside the project tag):\r\n\r\n    &lt;groupId&gt;cl.itau.simulacionCredito&lt;/groupId&gt;\r\n    &lt;artifactId&gt;SimulacionCreditoIntelliJ&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;RELEASE&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/com.beust/jcommander --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.beust&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jcommander&lt;/artifactId&gt;\r\n            &lt;version&gt;1.72&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;6&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;\r\n    &lt;/properties&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;**/HomeTest.java&lt;/exclude&gt;\r\n                        &lt;exclude&gt;**/PropuestaTest.java&lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-M1&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\r\n                &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.5.0.1254&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n    &lt;distributionManagement&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;SimulacionCredito&lt;/id&gt;\r\n            &lt;name&gt;SimulacionCredito&lt;/name&gt;\r\n            &lt;url&gt;file:C:\\Users\\Pc\\IdeaProjects&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/distributionManagement&gt;\r\n\r\nI also tried to use this inside the configuration tag:\r\n\r\n    &lt;sonar.sources&gt;src/main/java&lt;/sonar.sources&gt; \r\n\r\nAnd this happened:\r\n\r\n[![Second analysis][2]][2]\r\n\r\nMy settings.xml in Maven&#39;s conf:\r\n\r\n    &lt;pluginGroups&gt;\r\n\t    &lt;pluginGroup&gt;org.sonarsource.scanner.maven&lt;/pluginGroup&gt;\r\n      &lt;/pluginGroups&gt;\r\n\r\n      &lt;proxies&gt;\r\n      &lt;/proxies&gt;\r\n\r\n      &lt;servers&gt;\r\n      &lt;/servers&gt;\r\n\r\n      &lt;mirrors&gt;\r\n      &lt;/mirrors&gt;\r\n\r\n      &lt;profiles&gt;\r\n\t    &lt;profile&gt;\r\n           &lt;id&gt;sonar&lt;/id&gt;\r\n           &lt;activation&gt;\r\n               &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\r\n           &lt;/activation&gt;\r\n           &lt;properties&gt;\r\n               &lt;sonar.host.url&gt;\r\n                 http://localhost:9000\r\n               &lt;/sonar.host.url&gt;\r\n            &lt;/properties&gt;\r\n         &lt;/profile&gt;\r\n      &lt;/profiles&gt;\r\n\r\nI&#39;ve been adding things to the POM because of different errors while trying to fix this.\r\n\r\nI have the latest version of SonarQube installed.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ycICh.png\r\n  [2]: https://i.stack.imgur.com/AGD3n.png","title":"SonarQube doesn&#39;t analyze the main java code with IntelliJ and Maven","body":"<p>I'm using IntelliJ with Maven for my project and i have to analyze it with SonarQube, but when I scan my project with the command provided by the webApp it only analyzes the pom.xml file ignoring the rest of the project.</p>\n<p><a href=\"https://i.stack.imgur.com/ycICh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ycICh.png\" alt=\"Analysis results\" /></a></p>\n<blockquote>\n<p>clean install sonar:sonar   -Dsonar.host.url=http://localhost:9000   -Dsonar.login=&quot;the corresponding key here&quot;</p>\n</blockquote>\n<p>My pom.xml (what is inside the project tag):</p>\n<pre><code>&lt;groupId&gt;cl.itau.simulacionCredito&lt;/groupId&gt;\n&lt;artifactId&gt;SimulacionCreditoIntelliJ&lt;/artifactId&gt;\n&lt;version&gt;1.0&lt;/version&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testng&lt;/groupId&gt;\n        &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;version&gt;RELEASE&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/com.beust/jcommander --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.beust&lt;/groupId&gt;\n        &lt;artifactId&gt;jcommander&lt;/artifactId&gt;\n        &lt;version&gt;1.72&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;6&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.6&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;**/HomeTest.java&lt;/exclude&gt;\n                    &lt;exclude&gt;**/PropuestaTest.java&lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-M1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.sonarsource.scanner.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;sonar-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.5.0.1254&lt;/version&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;distributionManagement&gt;\n    &lt;repository&gt;\n        &lt;id&gt;SimulacionCredito&lt;/id&gt;\n        &lt;name&gt;SimulacionCredito&lt;/name&gt;\n        &lt;url&gt;file:C:\\Users\\Pc\\IdeaProjects&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/distributionManagement&gt;\n</code></pre>\n<p>I also tried to use this inside the configuration tag:</p>\n<pre><code>&lt;sonar.sources&gt;src/main/java&lt;/sonar.sources&gt; \n</code></pre>\n<p>And this happened:</p>\n<p><a href=\"https://i.stack.imgur.com/AGD3n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AGD3n.png\" alt=\"Second analysis\" /></a></p>\n<p>My settings.xml in Maven's conf:</p>\n<pre><code>&lt;pluginGroups&gt;\n    &lt;pluginGroup&gt;org.sonarsource.scanner.maven&lt;/pluginGroup&gt;\n  &lt;/pluginGroups&gt;\n\n  &lt;proxies&gt;\n  &lt;/proxies&gt;\n\n  &lt;servers&gt;\n  &lt;/servers&gt;\n\n  &lt;mirrors&gt;\n  &lt;/mirrors&gt;\n\n  &lt;profiles&gt;\n    &lt;profile&gt;\n       &lt;id&gt;sonar&lt;/id&gt;\n       &lt;activation&gt;\n           &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;\n       &lt;/activation&gt;\n       &lt;properties&gt;\n           &lt;sonar.host.url&gt;\n             http://localhost:9000\n           &lt;/sonar.host.url&gt;\n        &lt;/properties&gt;\n     &lt;/profile&gt;\n  &lt;/profiles&gt;\n</code></pre>\n<p>I've been adding things to the POM because of different errors while trying to fix this.</p>\n<p>I have the latest version of SonarQube installed.</p>\n"},{"tags":["java","android","animation","height","android-linearlayout"],"answers":[{"tags":[],"owner":{"account_id":8899762,"reputation":412,"user_id":6643553,"display_name":"Tin Nguyen"},"down_vote_count":4,"up_vote_count":29,"is_accepted":true,"score":25,"last_activity_date":1481106120,"creation_date":1481106120,"answer_id":41014867,"question_id":41014530,"body_markdown":"Try this code:\r\n\r\n    linearLayout.measure(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\r\n    height = linearLayout.getMeasuredHeight();\r\n\r\n","title":"Get what the WRAP_CONTENT height would be","body":"<p>Try this code:</p>\n\n<pre><code>linearLayout.measure(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);\nheight = linearLayout.getMeasuredHeight();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5047443,"reputation":2588,"user_id":4052962,"accept_rate":100,"display_name":"Mikhail Spitsin"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1695387162,"creation_date":1695387162,"answer_id":77157780,"question_id":41014530,"body_markdown":"I think the approach proposed by @tin-nguyen is wrong, as `View.measure` method accepts `Int` as per `MeasureSpec` (here is a [doc](https://developer.android.com/reference/android/view/View#measure(int,%20int))). \r\n\r\nSo, yes, you can send `LayoutParams.WRAP_CONTENT`, but it will doesn&#39;t make much sense to the view you measuring. \r\n\r\nIf the measuring of the view is working for you, while you sent `WRAP_CONTENT` consider that pure luck.\r\n\r\nSo you actually need to call:\r\n\r\n```\r\nval unspecifiedSpec = linearLayout.measure(\r\n  /* widthMeasureSpec = */ MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),\r\n  /* heightMeasureSpec = */ MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)\r\n)\r\n```\r\n\r\nIn your case you want to imitate `WRAP_CONTENT` situation, which basically means you want to say to the view &quot;Please measure, I don&#39;t have any limitations for you&quot;. And `UNSPECIFIED` is literally for that ([doc link](https://developer.android.com/reference/android/view/View.MeasureSpec#UNSPECIFIED)).","title":"Get what the WRAP_CONTENT height would be","body":"<p>I think the approach proposed by @tin-nguyen is wrong, as <code>View.measure</code> method accepts <code>Int</code> as per <code>MeasureSpec</code> (here is a <a href=\"https://developer.android.com/reference/android/view/View#measure(int,%20int)\" rel=\"noreferrer\">doc</a>).</p>\n<p>So, yes, you can send <code>LayoutParams.WRAP_CONTENT</code>, but it will doesn't make much sense to the view you measuring.</p>\n<p>If the measuring of the view is working for you, while you sent <code>WRAP_CONTENT</code> consider that pure luck.</p>\n<p>So you actually need to call:</p>\n<pre><code>val unspecifiedSpec = linearLayout.measure(\n  /* widthMeasureSpec = */ MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),\n  /* heightMeasureSpec = */ MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)\n)\n</code></pre>\n<p>In your case you want to imitate <code>WRAP_CONTENT</code> situation, which basically means you want to say to the view &quot;Please measure, I don't have any limitations for you&quot;. And <code>UNSPECIFIED</code> is literally for that (<a href=\"https://developer.android.com/reference/android/view/View.MeasureSpec#UNSPECIFIED\" rel=\"noreferrer\">doc link</a>).</p>\n"}],"owner":{"account_id":9063804,"reputation":1074,"user_id":6749425,"accept_rate":38,"display_name":"Fabio Piunti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8357,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":41014867,"answer_count":2,"score":13,"last_activity_date":1695387162,"creation_date":1481105117,"question_id":41014530,"body_markdown":"My purpose is to have an invisible LinearLayout that appear whit an animation when click on a specific button. To do this i have set the default height to WRAP_CONTENT, get the height when the app start, set the height to 0 and start the animation when i click on the button. Here is the code:\r\n\r\n    \r\n    linearLayout.post(new Runnable() {\r\n        @Override\r\n        public void run(){\r\n            height = linearLayout.getMeasuredHeight();\r\n            linearLayout.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, 0));\r\n        }\r\n    });\r\n    \r\n\r\n    findViewById(R.id.btnOperator).setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View view) {\r\n            Animation ani = new ShowAnim(linearLayout, height/* target layout height */);\r\n            ani.setDuration(1000/* animation time */);\r\n            linearLayout.startAnimation(ani);\r\n            \r\n        }\r\n    });\r\n\r\nThis work pretty good, but i want to do different. I want that the default height is 0, and then calculate what the WRAP_CONTENT height would be, and pass it to:\r\n\r\n    Animation ani = new ShowAnim(linearLayout, height/* target layout height */);\r\n\r\nHow could i do this? I searched but found anything.\r\n\r\n\r\n\r\n","title":"Get what the WRAP_CONTENT height would be","body":"<p>My purpose is to have an invisible LinearLayout that appear whit an animation when click on a specific button. To do this i have set the default height to WRAP_CONTENT, get the height when the app start, set the height to 0 and start the animation when i click on the button. Here is the code:</p>\n\n<pre><code>linearLayout.post(new Runnable() {\n    @Override\n    public void run(){\n        height = linearLayout.getMeasuredHeight();\n        linearLayout.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, 0));\n    }\n});\n\n\nfindViewById(R.id.btnOperator).setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        Animation ani = new ShowAnim(linearLayout, height/* target layout height */);\n        ani.setDuration(1000/* animation time */);\n        linearLayout.startAnimation(ani);\n\n    }\n});\n</code></pre>\n\n<p>This work pretty good, but i want to do different. I want that the default height is 0, and then calculate what the WRAP_CONTENT height would be, and pass it to:</p>\n\n<pre><code>Animation ani = new ShowAnim(linearLayout, height/* target layout height */);\n</code></pre>\n\n<p>How could i do this? I searched but found anything.</p>\n"},{"tags":["java","android","pdf","itext","pdf-generation"],"comments":[{"owner":{"account_id":11363645,"reputation":2645,"user_id":8331157,"display_name":"BenjyTec"},"score":3,"creation_date":1695222265,"post_id":77143702,"comment_id":135996182,"body_markdown":"Welcome to Stackoverflow! Please paste your code as text into your post. You can edit your post to do so.","body":"Welcome to Stackoverflow! Please paste your code as text into your post. You can edit your post to do so."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695248822,"post_id":77143702,"comment_id":136000838,"body_markdown":"In your code you don&#39;t add anything to the PDF. Furthermore, what class is `Html`? It&#39;s not an iText class.","body":"In your code you don&#39;t add anything to the PDF. Furthermore, what class is <code>Html</code>? It&#39;s not an iText class."},{"owner":{"account_id":24707463,"reputation":1,"user_id":18598111,"display_name":"saeedbayat"},"score":0,"creation_date":1695387191,"post_id":77143702,"comment_id":136021387,"body_markdown":"I edited my question can you help me?","body":"I edited my question can you help me?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695396873,"post_id":77143702,"comment_id":136023533,"body_markdown":"I&#39;ve not had to deal with such layout details myself, so I don&#39;t have a working solution up my sleeve. Some hints, though:  (1) your `table.getKeepTogether()` calls essentially do nothing, they return a value which your code immediately ignores. You probably wanted to use `table.setKeepTogether` with `true` or `false`. (2) Another method to try is `table.setSplitLate` with `true` or `false`. (3) Yet another approach would be add several `Paragraph` objects to `cell2` each with just one line instead of that single `p1` containing all those lines.","body":"I&#39;ve not had to deal with such layout details myself, so I don&#39;t have a working solution up my sleeve. Some hints, though:  (1) your <code>table.getKeepTogether()</code> calls essentially do nothing, they return a value which your code immediately ignores. You probably wanted to use <code>table.setKeepTogether</code> with <code>true</code> or <code>false</code>. (2) Another method to try is <code>table.setSplitLate</code> with <code>true</code> or <code>false</code>. (3) Yet another approach would be add several <code>Paragraph</code> objects to <code>cell2</code> each with just one line instead of that single <code>p1</code> containing all those lines."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1695397351,"post_id":77143702,"comment_id":136023613,"body_markdown":"(4) Or, of course, use one cell per line.","body":"(4) Or, of course, use one cell per line."},{"owner":{"account_id":24707463,"reputation":1,"user_id":18598111,"display_name":"saeedbayat"},"score":0,"creation_date":1695503748,"post_id":77143702,"comment_id":136033960,"body_markdown":"dear mlk thank you.","body":"dear mlk thank you."}],"owner":{"account_id":24707463,"reputation":1,"user_id":18598111,"display_name":"saeedbayat"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695387104,"creation_date":1695221920,"question_id":77143702,"body_markdown":"I used Itext5 to create a PDF. Because the text is in Persian, I used a table to write. But now there is a big gap between the first and second paragraphs that I added to the project. I don&#39;t want this long distance. you can see my code an the pdf result below.\r\n\r\nthis is my result.\r\n\r\n[I don&#39;t want this long distance.](https://i.stack.imgur.com/ry4k0.png)\r\n\r\n\r\nthis is my code\r\n\r\n   \r\n\r\n      private void createPDF() throws FileNotFoundException {\r\n            Document doc = new Document(PageSize.A4, 10, 10, 50, 36);\r\n    \r\n            try {\r\n    \r\n                String root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString();\r\n                File dir = new File(root + &quot;/pdf&quot;);\r\n                if (!dir.exists()) {\r\n                    dir.mkdirs();\r\n                }\r\n                String filename = &quot;saeedsss.pdf&quot;;\r\n                File file = new File(dir, filename);\r\n                FileOutputStream fOut = new FileOutputStream(file);\r\n                PdfWriter.getInstance(doc, fOut);\r\n    \r\n                doc.open();\r\n                Paragraph p = new Paragraph();\r\n                BaseFont myFont = BaseFont.createFont(&quot;assets/font/XB Zar.ttf&quot;, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\r\n                BaseFont myFont1 = BaseFont.createFont(&quot;assets/font/BLOTUSB.TTF&quot;, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\r\n                com.itextpdf.text.Font paraFont = new com.itextpdf.text.Font(myFont, 20);\r\n                com.itextpdf.text.Font paraFont1 = new com.itextpdf.text.Font(myFont1, 19);\r\n                p.setFont(paraFont);\r\n                p.add(&quot;   &quot;);\r\n                p.add(Html.fromHtml(&quot;&lt;b&gt;   &lt;/b&gt; &quot;, 0).toString());\r\n                p.add(&quot;  &quot;);\r\n                Paragraph p1 = new Paragraph();\r\n                p1.setFont(paraFont1);\r\n    \r\n                p1.add(&quot;                   \\n&quot; +\r\n                        &quot;  : ...............\\n&quot; +\r\n                        &quot;   :                                   \\n&quot; +\r\n                        &quot;   : \\n&quot; +\r\n                        &quot;  : ......................................\\n&quot; +\r\n                        &quot;               ....        /       (                )  . \\n&quot; +\r\n                        &quot;:    101    : \\n&quot; +\r\n                        &quot;1 /       \\n&quot; +\r\n                        &quot;2 /       \\n&quot; +\r\n                        &quot;3 /       \\n&quot; +\r\n                        &quot;4 /       . \\n&quot; +\r\n                        &quot;:     1   2   3    4            . \\n&quot; +\r\n                        &quot; : 1      / .     / ..     / ..                     .       124              .\\n&quot; +\r\n                        &quot;  2    147      /  ..           /  .                 . \\n&quot; +\r\n                        &quot;  3          .\\n&quot; +\r\n                        &quot; 4                ......................    . \\n&quot; +\r\n                        &quot;:                       141     111 147       .\\n&quot; +\r\n                        &quot;:   /                                        .\\n&quot; +\r\n                        &quot;  :    ...........           \\n&quot; +\r\n                        &quot;  ........................\\n&quot; +\r\n                        &quot;    : \\n&quot; +\r\n                        &quot;1     2     3     4   \\n&quot; +\r\n                        &quot; : \\t \\t              \\t                      :\\n&quot; +\r\n                        &quot;\\n&quot; +\r\n                        &quot;\\n&quot; +\r\n                        &quot;\\n &quot;);\r\n    \r\n                PdfPTable table = new PdfPTable(1);\r\n                PdfPCell cell = new PdfPCell(p);\r\n                PdfPCell cell2 = new PdfPCell(p1);\r\n    \r\n                cell.setBorder(0);\r\n                cell2.setBorder(0);\r\n    \r\n                table.getKeepTogether();\r\n                cell2.setHorizontalAlignment(Element.ALIGN_JUSTIFIED);\r\n                cell.setHorizontalAlignment(Element.ALIGN_CENTER);\r\n                cell.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\r\n                cell2.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\r\n                cell.setPaddingBottom(20);\r\n                cell2.setLeading(20f, 0f);\r\n                table.getKeepTogether();\r\n                table.addCell(cell);\r\n                table.addCell(cell2);\r\n    \r\n                table.getKeepTogether();\r\n                doc.add(table);\r\n    \r\n    \r\n            } catch (DocumentException de) {\r\n                Log.e(&quot;PDFCreator&quot;, &quot;DocumentException:&quot; + de);\r\n            } catch (IOException e) {\r\n                Log.e(&quot;PDFCreator&quot;, &quot;ioException:&quot; + e);\r\n            } finally {\r\n    \r\n                doc.close();\r\n    \r\n            }\r\n    \r\n        }\r\n\r\n\r\n","title":"in Itext 5 my second page has far (white space) from my first page","body":"<p>I used Itext5 to create a PDF. Because the text is in Persian, I used a table to write. But now there is a big gap between the first and second paragraphs that I added to the project. I don't want this long distance. you can see my code an the pdf result below.</p>\n<p>this is my result.</p>\n<p><a href=\"https://i.stack.imgur.com/ry4k0.png\" rel=\"nofollow noreferrer\">I don't want this long distance.</a></p>\n<p>this is my code</p>\n<pre><code>  private void createPDF() throws FileNotFoundException {\n        Document doc = new Document(PageSize.A4, 10, 10, 50, 36);\n\n        try {\n\n            String root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).toString();\n            File dir = new File(root + &quot;/pdf&quot;);\n            if (!dir.exists()) {\n                dir.mkdirs();\n            }\n            String filename = &quot;saeedsss.pdf&quot;;\n            File file = new File(dir, filename);\n            FileOutputStream fOut = new FileOutputStream(file);\n            PdfWriter.getInstance(doc, fOut);\n\n            doc.open();\n            Paragraph p = new Paragraph();\n            BaseFont myFont = BaseFont.createFont(&quot;assets/font/XB Zar.ttf&quot;, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\n            BaseFont myFont1 = BaseFont.createFont(&quot;assets/font/BLOTUSB.TTF&quot;, BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\n            com.itextpdf.text.Font paraFont = new com.itextpdf.text.Font(myFont, 20);\n            com.itextpdf.text.Font paraFont1 = new com.itextpdf.text.Font(myFont1, 19);\n            p.setFont(paraFont);\n            p.add(&quot;   &quot;);\n            p.add(Html.fromHtml(&quot;&lt;b&gt;   &lt;/b&gt; &quot;, 0).toString());\n            p.add(&quot;  &quot;);\n            Paragraph p1 = new Paragraph();\n            p1.setFont(paraFont1);\n\n            p1.add(&quot;                   \\n&quot; +\n                    &quot;  : ...............\\n&quot; +\n                    &quot;   :                                   \\n&quot; +\n                    &quot;   : \\n&quot; +\n                    &quot;  : ......................................\\n&quot; +\n                    &quot;               ....        /       (                )  . \\n&quot; +\n                    &quot;:    101    : \\n&quot; +\n                    &quot;1 /       \\n&quot; +\n                    &quot;2 /       \\n&quot; +\n                    &quot;3 /       \\n&quot; +\n                    &quot;4 /       . \\n&quot; +\n                    &quot;:     1   2   3    4            . \\n&quot; +\n                    &quot; : 1      / .     / ..     / ..                     .       124              .\\n&quot; +\n                    &quot;  2    147      /  ..           /  .                 . \\n&quot; +\n                    &quot;  3          .\\n&quot; +\n                    &quot; 4                ......................    . \\n&quot; +\n                    &quot;:                       141     111 147       .\\n&quot; +\n                    &quot;:   /                                        .\\n&quot; +\n                    &quot;  :    ...........           \\n&quot; +\n                    &quot;  ........................\\n&quot; +\n                    &quot;    : \\n&quot; +\n                    &quot;1     2     3     4   \\n&quot; +\n                    &quot; : \\t \\t              \\t                      :\\n&quot; +\n                    &quot;\\n&quot; +\n                    &quot;\\n&quot; +\n                    &quot;\\n &quot;);\n\n            PdfPTable table = new PdfPTable(1);\n            PdfPCell cell = new PdfPCell(p);\n            PdfPCell cell2 = new PdfPCell(p1);\n\n            cell.setBorder(0);\n            cell2.setBorder(0);\n\n            table.getKeepTogether();\n            cell2.setHorizontalAlignment(Element.ALIGN_JUSTIFIED);\n            cell.setHorizontalAlignment(Element.ALIGN_CENTER);\n            cell.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\n            cell2.setRunDirection(PdfWriter.RUN_DIRECTION_RTL);\n            cell.setPaddingBottom(20);\n            cell2.setLeading(20f, 0f);\n            table.getKeepTogether();\n            table.addCell(cell);\n            table.addCell(cell2);\n\n            table.getKeepTogether();\n            doc.add(table);\n\n\n        } catch (DocumentException de) {\n            Log.e(&quot;PDFCreator&quot;, &quot;DocumentException:&quot; + de);\n        } catch (IOException e) {\n            Log.e(&quot;PDFCreator&quot;, &quot;ioException:&quot; + e);\n        } finally {\n\n            doc.close();\n\n        }\n\n    }\n</code></pre>\n"},{"tags":["java","kotlin","testing","junit","assertj"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695312395,"post_id":77151593,"comment_id":136010688,"body_markdown":"So just disable `withStrictTypeChecking`?","body":"So just disable <code>withStrictTypeChecking</code>?"},{"owner":{"account_id":13463440,"reputation":1896,"user_id":9714611,"display_name":"Stefano Cordio"},"score":1,"creation_date":1695316255,"post_id":77151593,"comment_id":136011494,"body_markdown":"@Jorn the OP stated that strict type checking should still be performed on the collection elements. Removing `withStrictTypeChecking` does not enforce strict type checking for the elements.","body":"@Jorn the OP stated that strict type checking should still be performed on the collection elements. Removing <code>withStrictTypeChecking</code> does not enforce strict type checking for the elements."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695323819,"post_id":77151593,"comment_id":136012892,"body_markdown":"I don&#39;t see the point. You can&#39;t just compare those using `equals`?","body":"I don&#39;t see the point. You can&#39;t just compare those using <code>equals</code>?"},{"owner":{"account_id":13463440,"reputation":1896,"user_id":9714611,"display_name":"Stefano Cordio"},"score":1,"creation_date":1695325563,"post_id":77151593,"comment_id":136013150,"body_markdown":"The element types might not implement `equals`, hence the usefulness of the recursive comparison.","body":"The element types might not implement <code>equals</code>, hence the usefulness of the recursive comparison."},{"owner":{"account_id":7424463,"reputation":331,"user_id":5647475,"accept_rate":50,"display_name":"mkapiczy"},"score":1,"creation_date":1695326657,"post_id":77151593,"comment_id":136013321,"body_markdown":"The code above is just an example. Let&#39;s say that I simply don&#39;t know the types of the collections for neither actual nor expected but I want to assert on their contents.","body":"The code above is just an example. Let&#39;s say that I simply don&#39;t know the types of the collections for neither actual nor expected but I want to assert on their contents."}],"answers":[{"tags":[],"owner":{"account_id":13463440,"reputation":1896,"user_id":9714611,"display_name":"Stefano Cordio"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695333368,"creation_date":1695328774,"answer_id":77153525,"question_id":77151593,"body_markdown":"Your target could be achieved with standard list assertions and a [`RecursiveComparator`][1]:\r\n\r\n    val listOfA = listOf(TestClassA(&quot;Name&quot;))\r\n    val arrayListOfB = arrayListOf(TestClassB(&quot;Name&quot;))\r\n\r\n    val configuration = RecursiveComparisonConfiguration()\r\n\r\n    configuration.strictTypeChecking(false) // default\r\n\r\n    assertThat(listOfA)\r\n        .usingElementComparator(RecursiveComparator(configuration))\r\n        .isEqualTo(arrayListOfB) // succeeds\r\n\r\n    configuration.strictTypeChecking(true)\r\n\r\n    assertThat(listOfA)\r\n        .usingElementComparator(RecursiveComparator(configuration))\r\n        .isEqualTo(arrayListOfB) // fails\r\n\r\nNot as fluent as one would expect but it&#39;s the best option I see at the moment.\r\n\r\n  [1]: https://www.javadoc.io/doc/org.assertj/assertj-core/latest/org/assertj/core/api/recursive/comparison/RecursiveComparator.html","title":"How to perform AssertJ recursive comparison with strict type checking only on collection elements?","body":"<p>Your target could be achieved with standard list assertions and a <a href=\"https://www.javadoc.io/doc/org.assertj/assertj-core/latest/org/assertj/core/api/recursive/comparison/RecursiveComparator.html\" rel=\"nofollow noreferrer\"><code>RecursiveComparator</code></a>:</p>\n<pre><code>val listOfA = listOf(TestClassA(&quot;Name&quot;))\nval arrayListOfB = arrayListOf(TestClassB(&quot;Name&quot;))\n\nval configuration = RecursiveComparisonConfiguration()\n\nconfiguration.strictTypeChecking(false) // default\n\nassertThat(listOfA)\n    .usingElementComparator(RecursiveComparator(configuration))\n    .isEqualTo(arrayListOfB) // succeeds\n\nconfiguration.strictTypeChecking(true)\n\nassertThat(listOfA)\n    .usingElementComparator(RecursiveComparator(configuration))\n    .isEqualTo(arrayListOfB) // fails\n</code></pre>\n<p>Not as fluent as one would expect but it's the best option I see at the moment.</p>\n"},{"tags":[],"owner":{"account_id":7424463,"reputation":331,"user_id":5647475,"accept_rate":50,"display_name":"mkapiczy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695386888,"creation_date":1695386888,"answer_id":77157752,"question_id":77151593,"body_markdown":"The response proposed by Stefano works for the given example. However, with more complex types inside the array it was failing. I am not 100% sure why but it seemed like ignoring collection order did not work. \r\n\r\nIn the end I was able to achieve my goal with a custom condition:\r\n\r\n```\r\n    private fun iterablesEqualCondition(recursiveComparisonConfiguration: RecursiveComparisonConfiguration, other: Iterable&lt;*&gt;): Condition&lt;Any&gt; {\r\n        fun condition(actual: Any): Boolean {\r\n            assertThat((actual as Iterable&lt;*&gt;).toList()).usingRecursiveComparison(recursiveComparisonConfiguration).isEqualTo(other.toList())\r\n            return true\r\n        }\r\n        return Condition(::condition, &quot;Iterables are equal condition&quot;)\r\n    }\r\n\r\nassertThat(listOfA).satisfies(iterablesEqualCondition(RecursiveComparisonConfiguration.builder()\r\n            .withStrictTypeChecking(true)\r\n            .withIgnoreCollectionOrder(true).build(), arrayListOfA))\r\n```\r\n ","title":"How to perform AssertJ recursive comparison with strict type checking only on collection elements?","body":"<p>The response proposed by Stefano works for the given example. However, with more complex types inside the array it was failing. I am not 100% sure why but it seemed like ignoring collection order did not work.</p>\n<p>In the end I was able to achieve my goal with a custom condition:</p>\n<pre><code>    private fun iterablesEqualCondition(recursiveComparisonConfiguration: RecursiveComparisonConfiguration, other: Iterable&lt;*&gt;): Condition&lt;Any&gt; {\n        fun condition(actual: Any): Boolean {\n            assertThat((actual as Iterable&lt;*&gt;).toList()).usingRecursiveComparison(recursiveComparisonConfiguration).isEqualTo(other.toList())\n            return true\n        }\n        return Condition(::condition, &quot;Iterables are equal condition&quot;)\n    }\n\nassertThat(listOfA).satisfies(iterablesEqualCondition(RecursiveComparisonConfiguration.builder()\n            .withStrictTypeChecking(true)\n            .withIgnoreCollectionOrder(true).build(), arrayListOfA))\n</code></pre>\n"}],"owner":{"account_id":7424463,"reputation":331,"user_id":5647475,"accept_rate":50,"display_name":"mkapiczy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1695386888,"creation_date":1695309721,"question_id":77151593,"body_markdown":"I would like to compare two collections using AssertJ with strict type checking. However, I only care about the strict types of collection elements not the collection itself.\r\n\r\nFor instace in the case below I would like assertion\r\n`assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isEqualTo(arrayListOfA)` to be true while now it&#39;s false because listOfA is of type `SingletonList` and arrayListOfA is of type `ArrayList`\r\n\r\n    @Test\r\n    fun `test`() {\r\n        val listOfA = listOf(TestClassA(&quot;Name&quot;))\r\n        val arrayListOfA = arrayListOf(TestClassA(&quot;Name&quot;))\r\n        val arrayListOfB = arrayListOf(TestClassB(&quot;Name&quot;))\r\n        assertThat(listOfA).usingRecursiveComparison().isEqualTo(arrayListOfA)\r\n        assertThat(listOfA).usingRecursiveComparison().isEqualTo(arrayListOfB)\r\n        assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isEqualTo(arrayListOfA)\r\n        assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isNotEqualTo(arrayListOfB)\r\n    }\r\n    \r\n    class TestClassA(val name: String)\r\n    \r\n    class TestClassB(val name: String)\r\n\r\n\r\nIs there any way to achieve this?","title":"How to perform AssertJ recursive comparison with strict type checking only on collection elements?","body":"<p>I would like to compare two collections using AssertJ with strict type checking. However, I only care about the strict types of collection elements not the collection itself.</p>\n<p>For instace in the case below I would like assertion\n<code>assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isEqualTo(arrayListOfA)</code> to be true while now it's false because listOfA is of type <code>SingletonList</code> and arrayListOfA is of type <code>ArrayList</code></p>\n<pre><code>@Test\nfun `test`() {\n    val listOfA = listOf(TestClassA(&quot;Name&quot;))\n    val arrayListOfA = arrayListOf(TestClassA(&quot;Name&quot;))\n    val arrayListOfB = arrayListOf(TestClassB(&quot;Name&quot;))\n    assertThat(listOfA).usingRecursiveComparison().isEqualTo(arrayListOfA)\n    assertThat(listOfA).usingRecursiveComparison().isEqualTo(arrayListOfB)\n    assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isEqualTo(arrayListOfA)\n    assertThat(listOfA).usingRecursiveComparison().withStrictTypeChecking().isNotEqualTo(arrayListOfB)\n}\n\nclass TestClassA(val name: String)\n\nclass TestClassB(val name: String)\n</code></pre>\n<p>Is there any way to achieve this?</p>\n"},{"tags":["java","uipath","rpa","uipath-studio"],"answers":[{"tags":[],"owner":{"account_id":1080513,"reputation":3759,"user_id":1077633,"accept_rate":95,"display_name":"kwoxer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695386832,"creation_date":1695386832,"answer_id":77157741,"question_id":77140875,"body_markdown":"Pretty easy. You need to set the proper type.\r\n\r\n1. Click `For Each`\r\n1. Select `TypeArgument`\r\n1. Make sure `JObject` is selected","title":"When I use For Each in UiPath, it shows &quot;Option Strict On disallows late binding&quot;","body":"<p>Pretty easy. You need to set the proper type.</p>\n<ol>\n<li>Click <code>For Each</code></li>\n<li>Select <code>TypeArgument</code></li>\n<li>Make sure <code>JObject</code> is selected</li>\n</ol>\n"}],"owner":{"account_id":26189284,"reputation":17,"user_id":19871382,"display_name":"Pip"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695386832,"creation_date":1695200516,"question_id":77140875,"body_markdown":"[![error image](https://i.stack.imgur.com/nNBbi.png)](https://i.stack.imgur.com/nNBbi.png)\r\n\r\nFirst, I call an API endpoint to get the response, and I convert the response to jsonResult by using Deserialize JSON.\r\n\r\njsonResult is an object, with fields such as &quot;code&quot;, &quot;status&quot;, &quot;data&quot;.\r\njsonResult(&quot;data&quot;) is a user List.\r\n\r\nNow I need to use these users&#39; name one by one.\r\nSo I use For Each on the List: jsonResult(&quot;data&quot;), the item in the List is named currentItem, then the username would be currentItem(&quot;name&quot;), right?\r\nBut it shows error: Option Strict On disallows late binding.\r\n\r\nBut before the &quot;For Each&quot;, if I print jsonResult(&quot;data&quot;)(0)(&quot;name&quot;), there&#39;s no error at all.\r\nAnd if I use &quot;For Each&quot; and then I print the currentItem directly instead of currentItem(&quot;name&quot;), there&#39;s no error either.\r\nHow can I solve this issue? I need to use these users&#39; name one by one for some activities.","title":"When I use For Each in UiPath, it shows &quot;Option Strict On disallows late binding&quot;","body":"<p><a href=\"https://i.stack.imgur.com/nNBbi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nNBbi.png\" alt=\"error image\" /></a></p>\n<p>First, I call an API endpoint to get the response, and I convert the response to jsonResult by using Deserialize JSON.</p>\n<p>jsonResult is an object, with fields such as &quot;code&quot;, &quot;status&quot;, &quot;data&quot;.\njsonResult(&quot;data&quot;) is a user List.</p>\n<p>Now I need to use these users' name one by one.\nSo I use For Each on the List: jsonResult(&quot;data&quot;), the item in the List is named currentItem, then the username would be currentItem(&quot;name&quot;), right?\nBut it shows error: Option Strict On disallows late binding.</p>\n<p>But before the &quot;For Each&quot;, if I print jsonResult(&quot;data&quot;)(0)(&quot;name&quot;), there's no error at all.\nAnd if I use &quot;For Each&quot; and then I print the currentItem directly instead of currentItem(&quot;name&quot;), there's no error either.\nHow can I solve this issue? I need to use these users' name one by one for some activities.</p>\n"},{"tags":["java","apache-poi","xwpf"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695308046,"post_id":77150882,"comment_id":136009695,"body_markdown":"Your method `mergeCellsV` not considers all issues with merging table cells. If cells get merged, cells needs to be removed too. See https://stackoverflow.com/search?tab=relevance&amp;q=user%3a3915431%20xwpftable%20merge&amp;searchOn=3 for some working examples.","body":"Your method <code>mergeCellsV</code> not considers all issues with merging table cells. If cells get merged, cells needs to be removed too. See <a href=\"https://stackoverflow.com/search?tab=relevance&amp;q=user%3a3915431%20xwpftable%20merge&amp;searchOn=3\">stackoverflow.com/&hellip;</a> for some working examples."},{"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"score":0,"creation_date":1695360369,"post_id":77150882,"comment_id":136016537,"body_markdown":"I tried your solutions with mergeCellVertically method , also adding grid to table but nothing helps, its still make problems when i have multiple merging in same row.","body":"I tried your solutions with mergeCellVertically method , also adding grid to table but nothing helps, its still make problems when i have multiple merging in same row."},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695361307,"post_id":77150882,"comment_id":136016626,"body_markdown":"Please provide a [Minimal, Reproducible Example](https://stackoverflow.com/help/minimal-reproducible-example) as my code samples also are. And please tell what Apache POI version used.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a> as my code samples also are. And please tell what Apache POI version used."},{"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"score":0,"creation_date":1695362036,"post_id":77150882,"comment_id":136016702,"body_markdown":"Here is code \nhttps://codefile.io/f/96vZGhkeZ4\nVersion is 4.1.1\nThanks in advance","body":"Here is code  <a href=\"https://codefile.io/f/96vZGhkeZ4\" rel=\"nofollow noreferrer\">codefile.io/f/96vZGhkeZ4</a> Version is 4.1.1 Thanks in advance"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":0,"creation_date":1695368194,"post_id":77150882,"comment_id":136017676,"body_markdown":"How is this code complete? But see my answer ;-).","body":"How is this code complete? But see my answer ;-)."}],"answers":[{"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695386544,"creation_date":1695368164,"answer_id":77155663,"question_id":77150882,"body_markdown":"The main question while merging table cells, aside the question what merging settings to use as there are multiple possible settings and as there are compatibility issues between different word processing applications, is: What about the cells which get merged? For example if you merge horizontally cell 3 and 4 in a table row having 6 cells, then after that that row only contains 5 cells. And if you then need merging vertically formerly cell 5 of that row with cell 5 of row below, then this will fail, because formerly cell 5 now is cell 4.\r\n\r\nThats why best practice for merging is following:\r\n\r\n - First create the table having all cells and content.\r\n - Then merge cells vertically as needed.\r\n - Then merge cells horizontally as needed.\r\n\r\nFollowing complete code shows this for the example you seems want to create:\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import java.math.BigInteger;\r\n    \r\n    import org.apache.poi.xwpf.usermodel.XWPFDocument;\r\n    import org.apache.poi.xwpf.usermodel.XWPFTable;\r\n    import org.apache.poi.xwpf.usermodel.XWPFTableCell;\r\n    import org.apache.poi.xwpf.usermodel.XWPFTableRow;\r\n    import org.apache.poi.xwpf.usermodel.XWPFParagraph;\r\n    import org.apache.poi.xwpf.usermodel.XWPFRun;\r\n    import org.apache.poi.xwpf.usermodel.ParagraphAlignment;\r\n    \r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTcPr;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.CTVMerge;\r\n    import org.openxmlformats.schemas.wordprocessingml.x2006.main.STMerge;\r\n    \r\n    public class CreateWordTableMergeTest {\r\n        \r\n     static final String FONT_FAMILY = &quot;Calibri&quot;;\r\n     static final int FONT_SIZE = 10;\r\n    \r\n     static void mergeCellVertically(XWPFTable table, int col, int fromRow, int toRow) {\r\n      for(int rowIndex = fromRow; rowIndex &lt;= toRow; rowIndex++) {\r\n       XWPFTableCell cell = table.getRow(rowIndex).getCell(col);\r\n       CTVMerge vmerge = CTVMerge.Factory.newInstance();\r\n       if(rowIndex == fromRow){\r\n        // The first merged cell is set with RESTART merge value\r\n        vmerge.setVal(STMerge.RESTART);\r\n       } else {\r\n        // Cells which join (merge) the first one, are set with CONTINUE\r\n        vmerge.setVal(STMerge.CONTINUE);\r\n        // and the content should be removed\r\n        for (int i = cell.getParagraphs().size(); i &gt; 0; i--) {\r\n         cell.removeParagraph(0);\r\n        }\r\n        cell.addParagraph();\r\n       }\r\n       // Try getting the TcPr. Not simply setting an new one every time.\r\n       CTTcPr tcPr = cell.getCTTc().getTcPr();\r\n       if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\r\n       tcPr.setVMerge(vmerge);\r\n      }\r\n     }\r\n     \r\n     //merging horizontally by setting grid span instead of using CTHMerge\r\n     static void mergeCellHorizontally(XWPFTable table, int row, int fromCol, int toCol) {\r\n      XWPFTableCell cell = table.getRow(row).getCell(fromCol);\r\n      // Try getting the TcPr. Not simply setting an new one every time.\r\n      CTTcPr tcPr = cell.getCTTc().getTcPr();\r\n      if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\r\n      // The first merged cell has grid span property set\r\n      if (tcPr.isSetGridSpan()) {\r\n       tcPr.getGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\r\n      } else {\r\n       tcPr.addNewGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\r\n      }\r\n      // Cells which join (merge) the first one, must be removed\r\n      for(int colIndex = toCol; colIndex &gt; fromCol; colIndex--) {\r\n       //table.getRow(row).removeCell(colIndex); // use only this for apache poi versions greater than 4.1.1\r\n       table.getRow(row).getCtRow().removeTc(colIndex); // use this for apache poi versions up to 4.1.1\r\n       table.getRow(row).removeCell(colIndex);\r\n      }\r\n     }\r\n     \r\n     static void createFormattedTableCell(XWPFTableCell cell, String text, String fontFamily, int fontSize, ParagraphAlignment align) {\r\n      XWPFParagraph paragraph = cell.getParagraphArray(0);\r\n      if (paragraph == null) {\r\n       paragraph = cell.addParagraph();\r\n      }\r\n      paragraph.setIndentationFirstLine(0);\r\n      paragraph.setIndentationLeft(0);\r\n    \r\n      XWPFRun run = paragraph.createRun();\r\n      run.setFontFamily(fontFamily);\r\n      run.setFontSize(fontSize);\r\n      String[] lines = text.split(&quot;\\n&quot;);\r\n      if (lines.length &gt; 1) {\r\n       run.setText(lines[0], 0);\r\n       for (int i = 1; i &lt; lines.length; i++) {\r\n        XWPFParagraph pnew = cell.addParagraph();\r\n        cell.addParagraph(pnew);\r\n        pnew.setSpacingAfter(0);\r\n        pnew.setSpacingBefore(0);\r\n        XWPFRun run2 = pnew.createRun();\r\n        run2.setText(lines[i], 0);\r\n        run2.setFontFamily(fontFamily);\r\n        run2.setFontSize(fontSize);\r\n        pnew.setAlignment(align);\r\n       }\r\n      } else {\r\n       run.setText(text);\r\n      }\r\n      paragraph.setAlignment(align);\r\n      paragraph.setSpacingBeforeLines(1);\r\n      paragraph.setSpacingAfterLines(1);\r\n      paragraph.setSpacingBefore(1);\r\n      paragraph.setSpacingAfter(1);\r\n    \r\n      cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.CENTER);\r\n    \r\n     }\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      XWPFDocument document= new XWPFDocument();\r\n    \r\n      XWPFParagraph paragraph = document.createParagraph();\r\n      XWPFRun run=paragraph.createRun();  \r\n      run.setText(&quot;The table:&quot;);\r\n    \r\n      //create table\r\n      XWPFTable table = document.createTable();\r\n    \r\n      table.setCellMargins(20, 0, 20, 0);\r\n      //styleTable(table, &quot;100%&quot;, ParagraphAlignment.CENTER);\r\n      table.setWidth(&quot;100%&quot;);\r\n      \r\n      //create CTTblGrid for this table with widths of the 7 columns. \r\n      //necessary for Libreoffice/Openoffice to accept the column widths.\r\n      //values are in unit twentieths of a point (1/1440 of an inch)\r\n      //first column = 1 inches width\r\n      table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\r\n      //other columns (6 in this case) also each 1 inches width\r\n      for (int col = 1 ; col &lt; 7; col++) {\r\n       table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\r\n      }\r\n      \r\n      //add table content\r\n      XWPFTableRow tableRow = table.getRow(0);\r\n      int numCells = 7;\r\n      for (int i = 0; i &lt; numCells; i++) {\r\n       XWPFTableCell tableCell = tableRow.getCell(i);\r\n       if (tableCell == null) {\r\n         tableCell = tableRow.addNewTableCell();\r\n         tableCell.setWidth(&quot;16.66%&quot;);\r\n       }\r\n      }\r\n      createFormattedTableCell(tableRow.getCell(0), &quot;PAKOVANJE / UNIT&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.LEFT);\r\n      createFormattedTableCell(tableRow.getCell(2), &quot;DIMENZIJE / DIMENSIONS&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(5), &quot;NETO&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(6), &quot;BRUTO&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      //mergeCellsH(tableRow.getCell(3), tableRow.getCell(5)); //this working fine - may be, but I doubt that\r\n      \r\n      table.createRow();\r\n      tableRow = table.getRow(1);\r\n      numCells = 7;\r\n      for (int i = 0; i &lt; numCells; i++) {\r\n       XWPFTableCell tableCell = tableRow.getCell(i);\r\n       if (tableCell == null) {\r\n        tableCell = tableRow.addNewTableCell();\r\n       }\r\n      }\r\n      createFormattedTableCell(tableRow.getCell(2), &quot;irina/Width&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(3), &quot;Dubina/Depth&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(4), &quot;Visina/Heigth&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      \r\n      table.createRow();\r\n      tableRow = table.getRow(2);\r\n      numCells = 7;\r\n      for (int i = 0; i &lt; numCells; i++) {\r\n       XWPFTableCell tableCell = tableRow.getCell(i);\r\n       if (tableCell == null) {\r\n        tableCell = tableRow.addNewTableCell();\r\n       }\r\n      }\r\n      createFormattedTableCell(tableRow.getCell(0), &quot;POJEDINANO / CONSUMER&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.LEFT);\r\n      createFormattedTableCell(tableRow.getCell(2), &quot;NAZIV AMBALAA&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(5), &quot;14&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(6), &quot;15&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n    \r\n      table.createRow();\r\n      tableRow = table.getRow(3);\r\n      numCells = 7;\r\n      for (int i = 0; i &lt; numCells; i++) {\r\n       XWPFTableCell tableCell = tableRow.getCell(i);\r\n       if (tableCell == null) {\r\n        tableCell = tableRow.addNewTableCell();\r\n       }\r\n      }\r\n      createFormattedTableCell(tableRow.getCell(2), &quot;11&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(3), &quot;12&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n      createFormattedTableCell(tableRow.getCell(4), &quot;13&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\r\n    \r\n      //merging cells\r\n      mergeCellVertically(table, 0, 0, 1);\r\n      mergeCellVertically(table, 1, 0, 1);\r\n      mergeCellVertically(table, 5, 0, 1);\r\n      mergeCellVertically(table, 6, 0, 1);\r\n      \r\n      mergeCellVertically(table, 0, 2, 3);\r\n      mergeCellVertically(table, 1, 2, 3);\r\n      mergeCellVertically(table, 5, 2, 3);\r\n      mergeCellVertically(table, 6, 2, 3);\r\n      \r\n      mergeCellHorizontally(table, 0, 2, 4);\r\n      mergeCellHorizontally(table, 2, 2, 4);\r\n                \r\n      paragraph = document.createParagraph();\r\n    \r\n      FileOutputStream out = new FileOutputStream(&quot;./create_table.docx&quot;); \r\n      document.write(out);\r\n      out.close();\r\n      document.close();\r\n     }\r\n    }\r\n\r\nAbove code is tested using Apache POI version 4.1.1. It produces:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/guDpe.png\r\n  [2]: https://i.stack.imgur.com/5kEvj.png","title":"Multiple vertical merge in XWPFTable Apache POI","body":"<p>The main question while merging table cells, aside the question what merging settings to use as there are multiple possible settings and as there are compatibility issues between different word processing applications, is: What about the cells which get merged? For example if you merge horizontally cell 3 and 4 in a table row having 6 cells, then after that that row only contains 5 cells. And if you then need merging vertically formerly cell 5 of that row with cell 5 of row below, then this will fail, because formerly cell 5 now is cell 4.</p>\n<p>Thats why best practice for merging is following:</p>\n<ul>\n<li>First create the table having all cells and content.</li>\n<li>Then merge cells vertically as needed.</li>\n<li>Then merge cells horizontally as needed.</li>\n</ul>\n<p>Following complete code shows this for the example you seems want to create:</p>\n<pre><code>import java.io.FileOutputStream;\n\nimport java.math.BigInteger;\n\nimport org.apache.poi.xwpf.usermodel.XWPFDocument;\nimport org.apache.poi.xwpf.usermodel.XWPFTable;\nimport org.apache.poi.xwpf.usermodel.XWPFTableCell;\nimport org.apache.poi.xwpf.usermodel.XWPFTableRow;\nimport org.apache.poi.xwpf.usermodel.XWPFParagraph;\nimport org.apache.poi.xwpf.usermodel.XWPFRun;\nimport org.apache.poi.xwpf.usermodel.ParagraphAlignment;\n\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.CTTcPr;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.CTVMerge;\nimport org.openxmlformats.schemas.wordprocessingml.x2006.main.STMerge;\n\npublic class CreateWordTableMergeTest {\n    \n static final String FONT_FAMILY = &quot;Calibri&quot;;\n static final int FONT_SIZE = 10;\n\n static void mergeCellVertically(XWPFTable table, int col, int fromRow, int toRow) {\n  for(int rowIndex = fromRow; rowIndex &lt;= toRow; rowIndex++) {\n   XWPFTableCell cell = table.getRow(rowIndex).getCell(col);\n   CTVMerge vmerge = CTVMerge.Factory.newInstance();\n   if(rowIndex == fromRow){\n    // The first merged cell is set with RESTART merge value\n    vmerge.setVal(STMerge.RESTART);\n   } else {\n    // Cells which join (merge) the first one, are set with CONTINUE\n    vmerge.setVal(STMerge.CONTINUE);\n    // and the content should be removed\n    for (int i = cell.getParagraphs().size(); i &gt; 0; i--) {\n     cell.removeParagraph(0);\n    }\n    cell.addParagraph();\n   }\n   // Try getting the TcPr. Not simply setting an new one every time.\n   CTTcPr tcPr = cell.getCTTc().getTcPr();\n   if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\n   tcPr.setVMerge(vmerge);\n  }\n }\n \n //merging horizontally by setting grid span instead of using CTHMerge\n static void mergeCellHorizontally(XWPFTable table, int row, int fromCol, int toCol) {\n  XWPFTableCell cell = table.getRow(row).getCell(fromCol);\n  // Try getting the TcPr. Not simply setting an new one every time.\n  CTTcPr tcPr = cell.getCTTc().getTcPr();\n  if (tcPr == null) tcPr = cell.getCTTc().addNewTcPr();\n  // The first merged cell has grid span property set\n  if (tcPr.isSetGridSpan()) {\n   tcPr.getGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\n  } else {\n   tcPr.addNewGridSpan().setVal(BigInteger.valueOf(toCol-fromCol+1));\n  }\n  // Cells which join (merge) the first one, must be removed\n  for(int colIndex = toCol; colIndex &gt; fromCol; colIndex--) {\n   //table.getRow(row).removeCell(colIndex); // use only this for apache poi versions greater than 4.1.1\n   table.getRow(row).getCtRow().removeTc(colIndex); // use this for apache poi versions up to 4.1.1\n   table.getRow(row).removeCell(colIndex);\n  }\n }\n \n static void createFormattedTableCell(XWPFTableCell cell, String text, String fontFamily, int fontSize, ParagraphAlignment align) {\n  XWPFParagraph paragraph = cell.getParagraphArray(0);\n  if (paragraph == null) {\n   paragraph = cell.addParagraph();\n  }\n  paragraph.setIndentationFirstLine(0);\n  paragraph.setIndentationLeft(0);\n\n  XWPFRun run = paragraph.createRun();\n  run.setFontFamily(fontFamily);\n  run.setFontSize(fontSize);\n  String[] lines = text.split(&quot;\\n&quot;);\n  if (lines.length &gt; 1) {\n   run.setText(lines[0], 0);\n   for (int i = 1; i &lt; lines.length; i++) {\n    XWPFParagraph pnew = cell.addParagraph();\n    cell.addParagraph(pnew);\n    pnew.setSpacingAfter(0);\n    pnew.setSpacingBefore(0);\n    XWPFRun run2 = pnew.createRun();\n    run2.setText(lines[i], 0);\n    run2.setFontFamily(fontFamily);\n    run2.setFontSize(fontSize);\n    pnew.setAlignment(align);\n   }\n  } else {\n   run.setText(text);\n  }\n  paragraph.setAlignment(align);\n  paragraph.setSpacingBeforeLines(1);\n  paragraph.setSpacingAfterLines(1);\n  paragraph.setSpacingBefore(1);\n  paragraph.setSpacingAfter(1);\n\n  cell.setVerticalAlignment(XWPFTableCell.XWPFVertAlign.CENTER);\n\n }\n\n public static void main(String[] args) throws Exception {\n\n  XWPFDocument document= new XWPFDocument();\n\n  XWPFParagraph paragraph = document.createParagraph();\n  XWPFRun run=paragraph.createRun();  \n  run.setText(&quot;The table:&quot;);\n\n  //create table\n  XWPFTable table = document.createTable();\n\n  table.setCellMargins(20, 0, 20, 0);\n  //styleTable(table, &quot;100%&quot;, ParagraphAlignment.CENTER);\n  table.setWidth(&quot;100%&quot;);\n  \n  //create CTTblGrid for this table with widths of the 7 columns. \n  //necessary for Libreoffice/Openoffice to accept the column widths.\n  //values are in unit twentieths of a point (1/1440 of an inch)\n  //first column = 1 inches width\n  table.getCTTbl().addNewTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\n  //other columns (6 in this case) also each 1 inches width\n  for (int col = 1 ; col &lt; 7; col++) {\n   table.getCTTbl().getTblGrid().addNewGridCol().setW(BigInteger.valueOf(1*1440));\n  }\n  \n  //add table content\n  XWPFTableRow tableRow = table.getRow(0);\n  int numCells = 7;\n  for (int i = 0; i &lt; numCells; i++) {\n   XWPFTableCell tableCell = tableRow.getCell(i);\n   if (tableCell == null) {\n     tableCell = tableRow.addNewTableCell();\n     tableCell.setWidth(&quot;16.66%&quot;);\n   }\n  }\n  createFormattedTableCell(tableRow.getCell(0), &quot;PAKOVANJE / UNIT&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.LEFT);\n  createFormattedTableCell(tableRow.getCell(2), &quot;DIMENZIJE / DIMENSIONS&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(5), &quot;NETO&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(6), &quot;BRUTO&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  //mergeCellsH(tableRow.getCell(3), tableRow.getCell(5)); //this working fine - may be, but I doubt that\n  \n  table.createRow();\n  tableRow = table.getRow(1);\n  numCells = 7;\n  for (int i = 0; i &lt; numCells; i++) {\n   XWPFTableCell tableCell = tableRow.getCell(i);\n   if (tableCell == null) {\n    tableCell = tableRow.addNewTableCell();\n   }\n  }\n  createFormattedTableCell(tableRow.getCell(2), &quot;irina/Width&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(3), &quot;Dubina/Depth&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(4), &quot;Visina/Heigth&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  \n  table.createRow();\n  tableRow = table.getRow(2);\n  numCells = 7;\n  for (int i = 0; i &lt; numCells; i++) {\n   XWPFTableCell tableCell = tableRow.getCell(i);\n   if (tableCell == null) {\n    tableCell = tableRow.addNewTableCell();\n   }\n  }\n  createFormattedTableCell(tableRow.getCell(0), &quot;POJEDINANO / CONSUMER&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.LEFT);\n  createFormattedTableCell(tableRow.getCell(2), &quot;NAZIV AMBALAA&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(5), &quot;14&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(6), &quot;15&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n\n  table.createRow();\n  tableRow = table.getRow(3);\n  numCells = 7;\n  for (int i = 0; i &lt; numCells; i++) {\n   XWPFTableCell tableCell = tableRow.getCell(i);\n   if (tableCell == null) {\n    tableCell = tableRow.addNewTableCell();\n   }\n  }\n  createFormattedTableCell(tableRow.getCell(2), &quot;11&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(3), &quot;12&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n  createFormattedTableCell(tableRow.getCell(4), &quot;13&quot;, FONT_FAMILY, FONT_SIZE, ParagraphAlignment.CENTER);\n\n  //merging cells\n  mergeCellVertically(table, 0, 0, 1);\n  mergeCellVertically(table, 1, 0, 1);\n  mergeCellVertically(table, 5, 0, 1);\n  mergeCellVertically(table, 6, 0, 1);\n  \n  mergeCellVertically(table, 0, 2, 3);\n  mergeCellVertically(table, 1, 2, 3);\n  mergeCellVertically(table, 5, 2, 3);\n  mergeCellVertically(table, 6, 2, 3);\n  \n  mergeCellHorizontally(table, 0, 2, 4);\n  mergeCellHorizontally(table, 2, 2, 4);\n            \n  paragraph = document.createParagraph();\n\n  FileOutputStream out = new FileOutputStream(&quot;./create_table.docx&quot;); \n  document.write(out);\n  out.close();\n  document.close();\n }\n}\n</code></pre>\n<p>Above code is tested using Apache POI version 4.1.1. It produces:</p>\n<p><a href=\"https://i.stack.imgur.com/guDpe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/guDpe.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/5kEvj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5kEvj.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":29373468,"reputation":13,"user_id":22505556,"display_name":"Milos Jelic"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77155663,"answer_count":1,"score":0,"last_activity_date":1695386544,"creation_date":1695304052,"question_id":77150882,"body_markdown":"I have problem with vertical merging cells if there is multiple merging in same row.\r\nFor example :\r\nI want to merge row(0).getCell(0) with row(1).getCell(0) and \r\nrow(0).getCell(1) with row(1).getCell(1) its merge only second.\r\n\r\n\r\nMethod which I use \r\n```\r\n private void mergeCellsV(XWPFTableCell cellStart, XWPFTableCell cellFinish) {\r\n    cellStart.getCTTc().addNewTcPr().addNewVMerge().setVal(STMerge.RESTART);\r\n    cellFinish.getCTTc().addNewTcPr().addNewVMerge().setVal(STMerge.CONTINUE);\r\n  }\r\nXWPFTableRow row0 = tablePK.getRow(0);\r\nXWPFTableRow row1 = tablePK.getRow(1);\r\nXWPFTableRow row2 = tablePK.getRow(2);\r\nXWPFTableRow row3 = tablePK.getRow(3);\r\n\r\nmergeCellsV(row0.getCell(0), row1.getCell(0));\r\nmergeCellsV(row0.getCell(1), row1.getCell(1));\r\nmergeCellsV(row0.getCell(5), row1.getCell(5));\r\nmergeCellsV(row0.getCell(6), row1.getCell(6));\r\n\r\n\r\nmergeCellsV(row2.getCell(0), row3.getCell(0));\r\nmergeCellsV(row2.getCell(1), row3.getCell(1));\r\nmergeCellsV(row2.getCell(5), row3.getCell(5));\r\nmergeCellsV(row2.getCell(6), row3.getCell(6));\r\n\r\n```\r\nResult : \r\n\r\nadding just one merge and works fine mergeCellsV(row2.getCell(6), row3.getCell(6));\r\n[![adding just one merge and works fine][1]][1]\r\n\r\nadd all merges\r\n[![add all merges][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/u8JVx.png\r\n  [2]: https://i.stack.imgur.com/YTmvr.png\r\n\r\n","title":"Multiple vertical merge in XWPFTable Apache POI","body":"<p>I have problem with vertical merging cells if there is multiple merging in same row.\nFor example :\nI want to merge row(0).getCell(0) with row(1).getCell(0) and\nrow(0).getCell(1) with row(1).getCell(1) its merge only second.</p>\n<p>Method which I use</p>\n<pre><code> private void mergeCellsV(XWPFTableCell cellStart, XWPFTableCell cellFinish) {\n    cellStart.getCTTc().addNewTcPr().addNewVMerge().setVal(STMerge.RESTART);\n    cellFinish.getCTTc().addNewTcPr().addNewVMerge().setVal(STMerge.CONTINUE);\n  }\nXWPFTableRow row0 = tablePK.getRow(0);\nXWPFTableRow row1 = tablePK.getRow(1);\nXWPFTableRow row2 = tablePK.getRow(2);\nXWPFTableRow row3 = tablePK.getRow(3);\n\nmergeCellsV(row0.getCell(0), row1.getCell(0));\nmergeCellsV(row0.getCell(1), row1.getCell(1));\nmergeCellsV(row0.getCell(5), row1.getCell(5));\nmergeCellsV(row0.getCell(6), row1.getCell(6));\n\n\nmergeCellsV(row2.getCell(0), row3.getCell(0));\nmergeCellsV(row2.getCell(1), row3.getCell(1));\nmergeCellsV(row2.getCell(5), row3.getCell(5));\nmergeCellsV(row2.getCell(6), row3.getCell(6));\n\n</code></pre>\n<p>Result :</p>\n<p>adding just one merge and works fine mergeCellsV(row2.getCell(6), row3.getCell(6));\n<a href=\"https://i.stack.imgur.com/u8JVx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u8JVx.png\" alt=\"adding just one merge and works fine\" /></a></p>\n<p>add all merges\n<a href=\"https://i.stack.imgur.com/YTmvr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YTmvr.png\" alt=\"add all merges\" /></a></p>\n"},{"tags":["java","performance","hibernate"],"answers":[{"tags":[],"owner":{"account_id":5447,"reputation":582,"user_id":8770,"display_name":"Alex Zuroff"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1236147945,"creation_date":1236147945,"answer_id":609430,"question_id":609351,"body_markdown":"Working backward through the code, the fetch counter only gets incremented when the entity is retrieved from the datasource (as opposed to any caches) -\r\n\r\n    \tprotected Object loadFromDatasource(\r\n\t\t\tfinal LoadEvent event,\r\n\t\t\tfinal EntityPersister persister,\r\n\t\t\tfinal EntityKey keyToLoad,\r\n\t\t\tfinal LoadEventListener.LoadType options) {\r\n\t\tfinal SessionImplementor source = event.getSession();\r\n\t\tObject entity = persister.load(\r\n\t\t\t\tevent.getEntityId(),\r\n\t\t\t\tevent.getInstanceToLoad(),\r\n\t\t\t\tevent.getLockMode(),\r\n\t\t\t\tsource\r\n\t\t);\r\n\r\n\t\tif ( event.isAssociationFetch() &amp;&amp; source.getFactory().getStatistics().isStatisticsEnabled() ) {\r\n\t\t\tsource.getFactory().getStatisticsImplementor().fetchEntity( event.getEntityClassName() );\r\n\t\t}\r\n\r\n\t\treturn entity;\r\n\t}\r\n\r\n\r\nThe load counter was called from too many places to track them all down, but it looks like it gets incremented any time the entity gets loaded, whether from the datasource or the caches.","title":"In hibernate statistics whats the difference between load and fetch","body":"<p>Working backward through the code, the fetch counter only gets incremented when the entity is retrieved from the datasource (as opposed to any caches) -</p>\n\n<pre><code>    protected Object loadFromDatasource(\n        final LoadEvent event,\n        final EntityPersister persister,\n        final EntityKey keyToLoad,\n        final LoadEventListener.LoadType options) {\n    final SessionImplementor source = event.getSession();\n    Object entity = persister.load(\n            event.getEntityId(),\n            event.getInstanceToLoad(),\n            event.getLockMode(),\n            source\n    );\n\n    if ( event.isAssociationFetch() &amp;&amp; source.getFactory().getStatistics().isStatisticsEnabled() ) {\n        source.getFactory().getStatisticsImplementor().fetchEntity( event.getEntityClassName() );\n    }\n\n    return entity;\n}\n</code></pre>\n\n<p>The load counter was called from too many places to track them all down, but it looks like it gets incremented any time the entity gets loaded, whether from the datasource or the caches.</p>\n"},{"tags":[],"owner":{"account_id":22254755,"reputation":21,"user_id":16487091,"display_name":"qdo_ln"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1695386136,"creation_date":1626776227,"answer_id":68453193,"question_id":609351,"body_markdown":"https://vladmihalcea.com/hibernate-statistics/\r\nThis article contains explicit difference between fetch and load counts:\r\n\r\n&gt; long **getEntityLoadCount()** It gives you the total number of entities\r\n&gt; that were loaded (**including the one fetched from the first or\r\n&gt; second-level cache or the database**) by the current\r\n&gt; EntityManagerFactory or SessionFactory.\r\n&gt; \r\n&gt;long **getEntityFetchCount()** It\r\n&gt; gives you the total number of entities that were fetched **from the\r\n&gt; database** by the current EntityManagerFactory or SessionFactory.\r\n\r\n","title":"In hibernate statistics whats the difference between load and fetch","body":"<p><a href=\"https://vladmihalcea.com/hibernate-statistics/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/hibernate-statistics/</a>\nThis article contains explicit difference between fetch and load counts:</p>\n<blockquote>\n<p>long <strong>getEntityLoadCount()</strong> It gives you the total number of entities\nthat were loaded (<strong>including the one fetched from the first or\nsecond-level cache or the database</strong>) by the current\nEntityManagerFactory or SessionFactory.</p>\n<p>long <strong>getEntityFetchCount()</strong> It\ngives you the total number of entities that were fetched <strong>from the\ndatabase</strong> by the current EntityManagerFactory or SessionFactory.</p>\n</blockquote>\n"}],"owner":{"account_id":16987,"reputation":6240,"user_id":37575,"accept_rate":95,"display_name":"Sam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3085,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":609430,"answer_count":2,"score":11,"last_activity_date":1695386136,"creation_date":1236145254,"question_id":609351,"body_markdown":"Im mainly looking at the EntityStatics (http://www.hibernate.org/hib_docs/v3/api/org/hibernate/stat/EntityStatistics.html).  I can see a lot of fetch, loads and updates and i cant find anywhere that says what the difference between them are.","title":"In hibernate statistics whats the difference between load and fetch","body":"<p>Im mainly looking at the EntityStatics (<a href=\"http://www.hibernate.org/hib_docs/v3/api/org/hibernate/stat/EntityStatistics.html\" rel=\"noreferrer\">http://www.hibernate.org/hib_docs/v3/api/org/hibernate/stat/EntityStatistics.html</a>).  I can see a lot of fetch, loads and updates and i cant find anywhere that says what the difference between them are.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":2488135,"reputation":1051,"user_id":2166177,"accept_rate":67,"display_name":"steve"},"score":0,"creation_date":1701280465,"post_id":77149711,"comment_id":136757297,"body_markdown":"I think the issue is that Size is a platform class and therefore is a fake implementation when context is not a device; in a unit test.","body":"I think the issue is that Size is a platform class and therefore is a fake implementation when context is not a device; in a unit test."}],"owner":{"account_id":2488135,"reputation":1051,"user_id":2166177,"accept_rate":67,"display_name":"steve"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695385777,"creation_date":1695294847,"question_id":77149711,"body_markdown":"I created a `android.util.Size`, but both `getWidth()` and `getHeight()` of the object return 0. Why is that? I expect the value from the getters to be the value I pass to the ctor.\r\n\r\n    @Test\r\n    public void testsize() {\r\n        Size size = new Size(11,22);\r\n        assertThat(size.getWidth(), is(11));\r\n        assertThat(size.getHeight(), is(22));\r\n    }\r\n\r\n`Junit` output:\r\n\r\n&gt; Expected: is &lt;11&gt;\r\n&gt;      but: was &lt;0&gt;\r\n\r\nDebugger says the object value (toString?) is &quot;null&quot; and when drill in: &quot;Class has no fields&quot;.\r\n\r\n`System.out.println` outputs &quot;0&quot; as well.\r\n\r\nWorking with `Android` API 30.","title":"How to use android.util.Size so getters report non-zero?","body":"<p>I created a <code>android.util.Size</code>, but both <code>getWidth()</code> and <code>getHeight()</code> of the object return 0. Why is that? I expect the value from the getters to be the value I pass to the ctor.</p>\n<pre><code>@Test\npublic void testsize() {\n    Size size = new Size(11,22);\n    assertThat(size.getWidth(), is(11));\n    assertThat(size.getHeight(), is(22));\n}\n</code></pre>\n<p><code>Junit</code> output:</p>\n<blockquote>\n<p>Expected: is &lt;11&gt;\nbut: was &lt;0&gt;</p>\n</blockquote>\n<p>Debugger says the object value (toString?) is &quot;null&quot; and when drill in: &quot;Class has no fields&quot;.</p>\n<p><code>System.out.println</code> outputs &quot;0&quot; as well.</p>\n<p>Working with <code>Android</code> API 30.</p>\n"},{"tags":["java","android","permissions"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1583189655,"post_id":60495944,"comment_id":107025395,"body_markdown":"Do not forget to add detail such as how the code fails / error description and android version.","body":"Do not forget to add detail such as how the code fails / error description and android version."}],"answers":[{"tags":[],"owner":{"account_id":16447171,"reputation":81,"user_id":11881626,"display_name":"Harel Brodai"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1584460163,"creation_date":1583339709,"answer_id":60530731,"question_id":60495944,"body_markdown":"Resolved by adding this permission:\r\n\r\n```\r\n&lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n```","title":"Android Change System Settings permission is not accessible","body":"<p>Resolved by adding this permission:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.WRITE_SETTINGS\"\n        tools:ignore=\"ProtectedPermissions\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27627442,"reputation":31,"user_id":21087148,"display_name":"ilaiyaraja MCA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695385744,"creation_date":1695385744,"answer_id":77157617,"question_id":60495944,"body_markdown":"**Just add this line on your manifest file it&#39;s will work 100%**\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n\r\n**More info**\r\n[Follow my youtube channel][1]\r\n\r\n\r\n  [1]: https://www.youtube.com/c/Rajmeetamil","title":"Android Change System Settings permission is not accessible","body":"<p><strong>Just add this line on your manifest file it's will work 100%</strong></p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_SETTINGS&quot;\n    tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n</code></pre>\n<p><strong>More info</strong>\n<a href=\"https://www.youtube.com/c/Rajmeetamil\" rel=\"nofollow noreferrer\">Follow my youtube channel</a></p>\n"}],"owner":{"account_id":16447171,"reputation":81,"user_id":11881626,"display_name":"Harel Brodai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2375,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695385744,"creation_date":1583179869,"question_id":60495944,"body_markdown":"The code below should allow access (permission / disable) to Change System Setting as below.\r\nBut it doesn&#39;t work - the switch can&#39;t be turned to on.\r\nMy android version is 9.\r\nWhat&#39;s wrong?\r\n\r\nMain Activity:\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Button btn = (Button) findViewById(R.id.btn);\r\n        btn.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                boolean enabled = true;\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !android.provider.Settings.System.canWrite(MainActivity.this)) {\r\n                    Intent intent = new Intent(android.provider.Settings.ACTION_MANAGE_WRITE_SETTINGS);\r\n                    intent.setData(Uri.parse(&quot;package:&quot; + getApplicationContext().getPackageName()));\r\n                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                    startActivity(intent);\r\n                }\r\n                Settings.System.putInt(getApplicationContext().getContentResolver(), Settings.System.ACCELEROMETER_ROTATION, 1);\r\n            }\r\n        });\r\n    }\r\n}\r\n```\r\nManifest:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.example.screenrotation&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACTION_MANAGE_WRITE_SETTINGS &quot;/&gt;\r\n    \r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/AppTheme&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```","title":"Android Change System Settings permission is not accessible","body":"<p>The code below should allow access (permission / disable) to Change System Setting as below.\nBut it doesn't work - the switch can't be turned to on.\nMy android version is 9.\nWhat's wrong?</p>\n\n<p>Main Activity:</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Button btn = (Button) findViewById(R.id.btn);\n        btn.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                boolean enabled = true;\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M &amp;&amp; !android.provider.Settings.System.canWrite(MainActivity.this)) {\n                    Intent intent = new Intent(android.provider.Settings.ACTION_MANAGE_WRITE_SETTINGS);\n                    intent.setData(Uri.parse(\"package:\" + getApplicationContext().getPackageName()));\n                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                    startActivity(intent);\n                }\n                Settings.System.putInt(getApplicationContext().getContentResolver(), Settings.System.ACCELEROMETER_ROTATION, 1);\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>Manifest:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.screenrotation\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.ACTION_MANAGE_WRITE_SETTINGS \"/&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","function"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695374519,"post_id":77156345,"comment_id":136018812,"body_markdown":"Did you forget an `else` before the second `if`?","body":"Did you forget an <code>else</code> before the second <code>if</code>?"},{"owner":{"account_id":251706,"reputation":5298,"user_id":529282,"display_name":"Martheen"},"score":0,"creation_date":1695374700,"post_id":77156345,"comment_id":136018852,"body_markdown":"Your IDE has a format/prettify function, you might want to try that to see how your if &amp; else are actually set up.","body":"Your IDE has a format/prettify function, you might want to try that to see how your if &amp; else are actually set up."},{"owner":{"account_id":28479754,"reputation":1,"user_id":21793881,"display_name":"Justin Hahn"},"score":0,"creation_date":1695375684,"post_id":77156345,"comment_id":136019100,"body_markdown":"@Martheen my ide(eclipse) has a formatting function, but it did not effectively change my code).\n  I had already thought of that, but unfortunately that doesn&#39;t help either. \nWhat still puzzles me is that the function is executed correctly as soon as I replace the conn.isvalid.","body":"@Martheen my ide(eclipse) has a formatting function, but it did not effectively change my code).   I had already thought of that, but unfortunately that doesn&#39;t help either.  What still puzzles me is that the function is executed correctly as soon as I replace the conn.isvalid."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1695377308,"post_id":77156345,"comment_id":136019437,"body_markdown":"Instead of saying works and does not work please say exactly what happens (paste in exception messages and stack traces if you have them) and what you wanted to happen instead.","body":"Instead of saying works and does not work please say exactly what happens (paste in exception messages and stack traces if you have them) and what you wanted to happen instead."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1695377414,"post_id":77156345,"comment_id":136019465,"body_markdown":"Also, please show us exactly what `Jdbc_mysql_connection.connecttodb(null)` does. My guess is that its returning `null`.","body":"Also, please show us exactly what <code>Jdbc_mysql_connection.connecttodb(null)</code> does. My guess is that its returning <code>null</code>."}],"answers":[{"tags":[],"owner":{"account_id":2184023,"reputation":464,"user_id":1932862,"display_name":"Ketan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695385559,"creation_date":1695377293,"answer_id":77156688,"question_id":77156345,"body_markdown":"If you have multiple `if` statements they will always be called. However, whether the body of the statement will be executed or not depends on the condition. \r\n\r\nIf you do not wish to execute the remaining if statements you have to look into [guard condition][1]\r\n\r\n\r\n  [1]: https://refactoring.guru/replace-nested-conditional-with-guard-clauses","title":"java only executes the second if statement in a function but not the first one if i use the conn.isValid function","body":"<p>If you have multiple <code>if</code> statements they will always be called. However, whether the body of the statement will be executed or not depends on the condition.</p>\n<p>If you do not wish to execute the remaining if statements you have to look into <a href=\"https://refactoring.guru/replace-nested-conditional-with-guard-clauses\" rel=\"nofollow noreferrer\">guard condition</a></p>\n"}],"owner":{"account_id":28479754,"reputation":1,"user_id":21793881,"display_name":"Justin Hahn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1695379975,"accepted_answer_id":77156688,"answer_count":1,"score":-3,"last_activity_date":1695385559,"creation_date":1695374478,"question_id":77156345,"body_markdown":"I have a Java function that is supposed to check the connection to the database. The problem is that when I call this function, the second if statment is always called, the first one is effectively never called.\r\n\r\n```\r\n\t\tpublic static void CheckConnection() {\r\n\t\t    if (conn == null) {\r\n\t\t        conn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t    } if (conn.isValid(10)) {\r\n\t\t        System.out.println(&quot;Datenbankverbindung besteht noch&quot;);\r\n\t\t    } else {\r\n\t\t        conn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t    }\r\n\t\t}\r\n```\r\n\r\nif I replace the conn.isValid(10) with a conn == null both are executed, but I can&#39;t imagine that the conn.isValid function causes the function to no longer be executed correctly.\r\n\r\nI have tried to correct the formatting, but it seems to be correct.\r\nWith else it does not work either \r\n\r\n```\r\n\tpublic static void CheckConnection()\r\n\t{\r\n\t\tif (conn == null)\r\n\t\t{\r\n\t\t\tconn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t}\r\n\t\telse {\r\n\t\tif (conn.isValid(10))\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Datenbankverbindung besteht noch&quot;);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tconn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t}}\r\n\t}\r\n```\r\n\r\nIt only works when i write it like this :\r\n``` \r\n\tpublic static void CheckConnection()\r\n\t{\r\n\t\tif (conn == null)\r\n\t\t{\r\n\t\t\tconn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\tif (conn.isValid(10))\r\n\t\t\t\t{\r\n\t\t\t\t\tSystem.out.println(&quot;Datenbankverbindung besteht noch&quot;);\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\tconn = Jdbc_mysql_connection.connecttodb(null);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch (SQLException e)\r\n\t\t\t{\r\n\t\t\t\tSystem.err.println(&quot;Fehler beim &#220;berpr&#252;fen der Datenbankverbindung: &quot; + e.getMessage());\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n```","title":"java only executes the second if statement in a function but not the first one if i use the conn.isValid function","body":"<p>I have a Java function that is supposed to check the connection to the database. The problem is that when I call this function, the second if statment is always called, the first one is effectively never called.</p>\n<pre><code>        public static void CheckConnection() {\n            if (conn == null) {\n                conn = Jdbc_mysql_connection.connecttodb(null);\n            } if (conn.isValid(10)) {\n                System.out.println(&quot;Datenbankverbindung besteht noch&quot;);\n            } else {\n                conn = Jdbc_mysql_connection.connecttodb(null);\n            }\n        }\n</code></pre>\n<p>if I replace the conn.isValid(10) with a conn == null both are executed, but I can't imagine that the conn.isValid function causes the function to no longer be executed correctly.</p>\n<p>I have tried to correct the formatting, but it seems to be correct.\nWith else it does not work either</p>\n<pre><code>    public static void CheckConnection()\n    {\n        if (conn == null)\n        {\n            conn = Jdbc_mysql_connection.connecttodb(null);\n        }\n        else {\n        if (conn.isValid(10))\n        {\n            System.out.println(&quot;Datenbankverbindung besteht noch&quot;);\n        }\n        else\n        {\n            conn = Jdbc_mysql_connection.connecttodb(null);\n        }}\n    }\n</code></pre>\n<p>It only works when i write it like this :</p>\n<pre><code>    public static void CheckConnection()\n    {\n        if (conn == null)\n        {\n            conn = Jdbc_mysql_connection.connecttodb(null);\n        }\n        else\n        {\n            try\n            {\n                if (conn.isValid(10))\n                {\n                    System.out.println(&quot;Datenbankverbindung besteht noch&quot;);\n                }\n                else\n                {\n                    conn = Jdbc_mysql_connection.connecttodb(null);\n                }\n            }\n            catch (SQLException e)\n            {\n                System.err.println(&quot;Fehler beim berprfen der Datenbankverbindung: &quot; + e.getMessage());\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","c++","android-ndk"],"comments":[{"owner":{"account_id":1991491,"reputation":9992,"user_id":1785412,"accept_rate":48,"display_name":"Siddharth_Vyas"},"score":1,"creation_date":1394785761,"post_id":22399572,"comment_id":34055456,"body_markdown":"Are you using any external jar files?","body":"Are you using any external jar files?"},{"owner":{"account_id":3472587,"reputation":2515,"user_id":2906564,"accept_rate":41,"display_name":"Karthik Sivam"},"score":0,"creation_date":1394788275,"post_id":22399572,"comment_id":34056880,"body_markdown":"@SiddharthVyas No , I&#39;m not using external jar files in this.","body":"@SiddharthVyas No , I&#39;m not using external jar files in this."},{"owner":{"account_id":71611,"reputation":26366,"user_id":6998684,"display_name":"IgorGanapolsky"},"score":1,"creation_date":1470759914,"post_id":22399572,"comment_id":65076177,"body_markdown":"Is your application multi-dexed?  If so, then that explains the problem.","body":"Is your application multi-dexed?  If so, then that explains the problem."},{"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"score":0,"creation_date":1499244775,"post_id":22399572,"comment_id":76818408,"body_markdown":"when i did a signed apk this error did not happen. just debug","body":"when i did a signed apk this error did not happen. just debug"},{"owner":{"account_id":4162891,"reputation":428,"user_id":3412567,"accept_rate":60,"display_name":"Benobab"},"score":0,"creation_date":1507304892,"post_id":22399572,"comment_id":80170824,"body_markdown":"Did you find a working solution ?","body":"Did you find a working solution ?"},{"owner":{"account_id":4951203,"reputation":7272,"user_id":3985071,"accept_rate":54,"display_name":"Arpit Patel"},"score":0,"creation_date":1595007341,"post_id":22399572,"comment_id":111336299,"body_markdown":"minifyEnabled false in debug block in-app Gradle will work","body":"minifyEnabled false in debug block in-app Gradle will work"}],"answers":[{"tags":[],"owner":{"account_id":2965421,"reputation":8290,"user_id":2518666,"accept_rate":42,"display_name":"Sushil"},"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1394785436,"creation_date":1394785436,"answer_id":22399630,"question_id":22399572,"body_markdown":"This seems to be problem in your case. The relative path of your activity in manifest is not correct:\r\n\r\n    &lt;activity android:name=&quot;android.app.POMActivity&quot;\r\n\r\nreplace this with :\r\n\r\n    &lt;activity android:name=&quot;.POMActivity&quot;\r\n\r\nor\r\n\r\n    &lt;activity android:name=&quot;com.irrlicht.example1.POMActivity&quot;","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This seems to be problem in your case. The relative path of your activity in manifest is not correct:</p>\n\n<pre><code>&lt;activity android:name=\"android.app.POMActivity\"\n</code></pre>\n\n<p>replace this with :</p>\n\n<pre><code>&lt;activity android:name=\".POMActivity\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;activity android:name=\"com.irrlicht.example1.POMActivity\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":201770,"reputation":947,"user_id":2846109,"display_name":"mnsalim"},"down_vote_count":4,"up_vote_count":66,"is_accepted":false,"score":62,"last_activity_date":1550577487,"creation_date":1397039477,"answer_id":22959847,"question_id":22399572,"body_markdown":"I had a similar problem, here&#39;s my solution:\r\n\r\n 1. Right click on your project and select **Properties**.\r\n 2. Select **Java Build Path** from the menu on the left.\r\n 3. Select the **Order and Export** tab.\r\n 4. From the list make sure the libraries or external jars you added to your project are *checked*.\r\n 5. Finally, clean your project &amp; run.\r\n\r\nYou may also check [this][1] answer.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/10866431/android-activity-classnotfoundexception-tried-everything?rq=1","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I had a similar problem, here's my solution:</p>\n\n<ol>\n<li>Right click on your project and select <strong>Properties</strong>.</li>\n<li>Select <strong>Java Build Path</strong> from the menu on the left.</li>\n<li>Select the <strong>Order and Export</strong> tab.</li>\n<li>From the list make sure the libraries or external jars you added to your project are <em>checked</em>.</li>\n<li>Finally, clean your project &amp; run.</li>\n</ol>\n\n<p>You may also check <a href=\"https://stackoverflow.com/questions/10866431/android-activity-classnotfoundexception-tried-everything?rq=1\">this</a> answer.</p>\n"},{"tags":[],"owner":{"account_id":2282492,"reputation":2049,"user_id":2007266,"accept_rate":44,"display_name":"hemantsb"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1399291099,"creation_date":1399291099,"answer_id":23471869,"question_id":22399572,"body_markdown":"Just Change your folder name from `lib` to `libs` ,\r\n\r\n\r\nThen you will see some error marks in your project, to resolve this rightClick on project &gt;\r\n\r\n `Properties &gt; Java Build Path &gt; libraries` :\r\n\r\n  Remove all the library with red marks on it, then `apply &gt; ok &gt;` after that  **clean your project** . TADA see the magic :)","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Just Change your folder name from <code>lib</code> to <code>libs</code> ,</p>\n\n<p>Then you will see some error marks in your project, to resolve this rightClick on project ></p>\n\n<p><code>Properties &gt; Java Build Path &gt; libraries</code> :</p>\n\n<p>Remove all the library with red marks on it, then <code>apply &gt; ok &gt;</code> after that  <strong>clean your project</strong> . TADA see the magic :)</p>\n"},{"tags":[],"owner":{"account_id":2487494,"reputation":349,"user_id":2165667,"display_name":"crazyjune"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1402638715,"creation_date":1402638715,"answer_id":24198565,"question_id":22399572,"body_markdown":"1. delete the bin folder  \r\n2. change the order of librarys  \r\n3. clean and rebuild  \r\n  \r\nworked for me.\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<ol>\n<li>delete the bin folder  </li>\n<li>change the order of librarys  </li>\n<li>clean and rebuild  </li>\n</ol>\n\n<p>worked for me.</p>\n"},{"tags":[],"owner":{"account_id":2215206,"reputation":2164,"user_id":1956013,"accept_rate":56,"display_name":"Ahmed Adel Ismail"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1443532405,"creation_date":1443532405,"answer_id":32844963,"question_id":22399572,"body_markdown":"after i tried the given answers, i found out another reason for the same Exception, that i had to add the library i&#39;m using manually to my main library through\r\n\r\n    Right click on my main library &gt; \r\n    Properties &gt; \r\n    Android &gt; \r\n    Go to the very bottom of the screen and click (Add) &gt; \r\n    Select my other library that caused the crash &gt;\r\n    Apply\r\n\r\nbefore this solution, i used the &quot;Fix Project setup&quot; from within the .java file in eclipse, but this did not work, so i had to add it manually here and it worked","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>after i tried the given answers, i found out another reason for the same Exception, that i had to add the library i'm using manually to my main library through</p>\n\n<pre><code>Right click on my main library &gt; \nProperties &gt; \nAndroid &gt; \nGo to the very bottom of the screen and click (Add) &gt; \nSelect my other library that caused the crash &gt;\nApply\n</code></pre>\n\n<p>before this solution, i used the \"Fix Project setup\" from within the .java file in eclipse, but this did not work, so i had to add it manually here and it worked</p>\n"},{"tags":[],"owner":{"account_id":7432408,"reputation":4084,"user_id":5652872,"accept_rate":71,"display_name":"Akash Bisariya"},"down_vote_count":1,"up_vote_count":28,"is_accepted":false,"score":27,"last_activity_date":1678926301,"creation_date":1464615146,"answer_id":37526993,"question_id":22399572,"body_markdown":"I should understand the problem by just seeing \r\n\r\n&gt; dex errors\r\n\r\nBut it took a half day to fix the issue. \r\nI fixed it by following the instructions on the Android Developers page:\r\nhttps://developer.android.com/studio/build/multidex.html\r\n\r\nFirst, add this to `build.gradle` file:\r\n\r\n    defaultConfig {\r\n        ...\r\n        minSdkVersion 15 \r\n        targetSdkVersion 33\r\n        // Enabling multidex support.\r\n        multiDexEnabled true\r\n    }\r\n\r\n     dependencies {\r\n         compile &#39;com.android.support:multidex:1.0.0&#39;\r\n\r\n     }\r\n\r\nThen extend the Application class with the `MultiDexApplication` class as instructed on the above link (or declare the application class in `AndroidManifest.xml` or override `attachBaseContext()` function if it is not possible to extend the application class).\r\n\r\nThat&#39;s all, and it solved the problem.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I should understand the problem by just seeing</p>\n<blockquote>\n<p>dex errors</p>\n</blockquote>\n<p>But it took a half day to fix the issue.\nI fixed it by following the instructions on the Android Developers page:\n<a href=\"https://developer.android.com/studio/build/multidex.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/multidex.html</a></p>\n<p>First, add this to <code>build.gradle</code> file:</p>\n<pre><code>defaultConfig {\n    ...\n    minSdkVersion 15 \n    targetSdkVersion 33\n    // Enabling multidex support.\n    multiDexEnabled true\n}\n\n dependencies {\n     compile 'com.android.support:multidex:1.0.0'\n\n }\n</code></pre>\n<p>Then extend the Application class with the <code>MultiDexApplication</code> class as instructed on the above link (or declare the application class in <code>AndroidManifest.xml</code> or override <code>attachBaseContext()</code> function if it is not possible to extend the application class).</p>\n<p>That's all, and it solved the problem.</p>\n"},{"tags":[],"owner":{"account_id":6867226,"reputation":8143,"user_id":5279156,"display_name":"Vlad"},"down_vote_count":2,"up_vote_count":41,"is_accepted":false,"score":39,"last_activity_date":1467910797,"creation_date":1467910797,"answer_id":38251279,"question_id":22399572,"body_markdown":"The deletion of app on device and cleaning of project works for me","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>The deletion of app on device and cleaning of project works for me</p>\n"},{"tags":[],"owner":{"account_id":6253582,"reputation":3528,"user_id":4862911,"accept_rate":76,"display_name":"aligur"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1664457525,"creation_date":1476367103,"answer_id":40023120,"question_id":22399572,"body_markdown":"the solution for me was : performing `./gradlew --stop` command in android studio terminal. After that just clean and rebuild the project. ","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>the solution for me was : performing <code>./gradlew --stop</code> command in android studio terminal. After that just clean and rebuild the project.</p>\n"},{"tags":[],"owner":{"account_id":4817825,"reputation":1261,"user_id":3889402,"accept_rate":67,"display_name":"dees91"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1479761811,"creation_date":1479761811,"answer_id":40729225,"question_id":22399572,"body_markdown":"If you receive this error after removing some gradle dependency, check your manifest and make sure that you removed all entries corresponding that dependency.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>If you receive this error after removing some gradle dependency, check your manifest and make sure that you removed all entries corresponding that dependency.</p>\n"},{"tags":[],"owner":{"account_id":8652943,"reputation":22446,"user_id":6478047,"accept_rate":76,"display_name":"Manohar"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1483601163,"creation_date":1483601163,"answer_id":41479407,"question_id":22399572,"body_markdown":"For any one who is having multidex enable write this\r\n\r\ninside **build.gradle**\r\n\r\n \r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n     defaultConfig {\r\n          multiDexEnabled true\r\n      }\r\n     dexOptions {\r\n            javaMaxHeapSize &quot;4g&quot;\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        compile &#39;com.android.support:appcompat-v7:+&#39;\r\n        compile &#39;com.google.android.gms:play-services:+&#39;\r\n        compile &#39;com.android.support:multidex:1.0.1&#39;\r\n    }\r\n\r\n\r\n\r\n  write a class `EnableMultiDex` like below\r\n\r\n     \r\n   \r\n    import android.content.Context;\r\n    import android.support.multidex.MultiDexApplication;\r\n\r\n    public class EnableMultiDex extends MultiDexApplication {\r\n        private static EnableMultiDex enableMultiDex;\r\n        public static Context context;\r\n    \r\n        public EnableMultiDex(){\r\n            enableMultiDex=this;\r\n        }\r\n    \r\n        public static EnableMultiDex getEnableMultiDexApp() {\r\n            return enableMultiDex;\r\n        }\r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n            context = getApplicationContext();\r\n    \r\n        }\r\n    }\r\n\r\n\r\nand in `AndroidManifest.xml` write this **className** inside Application tag\r\n\r\n     &lt;application\r\n        android:name=&quot;YourPakageName.EnableMultiDex&quot;\r\n        android:hardwareAccelerated=&quot;true&quot;\r\n        android:icon=&quot;@drawable/wowio_launch_logo&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:largeHeap=&quot;true&quot;\r\n        tools:node=&quot;replace&quot;&gt;\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>For any one who is having multidex enable write this</p>\n\n<p>inside <strong>build.gradle</strong></p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n defaultConfig {\n      multiDexEnabled true\n  }\n dexOptions {\n        javaMaxHeapSize \"4g\"\n    }\n}\n\ndependencies {\n    compile 'com.android.support:appcompat-v7:+'\n    compile 'com.google.android.gms:play-services:+'\n    compile 'com.android.support:multidex:1.0.1'\n}\n</code></pre>\n\n<p>write a class <code>EnableMultiDex</code> like below</p>\n\n<pre><code>import android.content.Context;\nimport android.support.multidex.MultiDexApplication;\n\npublic class EnableMultiDex extends MultiDexApplication {\n    private static EnableMultiDex enableMultiDex;\n    public static Context context;\n\n    public EnableMultiDex(){\n        enableMultiDex=this;\n    }\n\n    public static EnableMultiDex getEnableMultiDexApp() {\n        return enableMultiDex;\n    }\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        context = getApplicationContext();\n\n    }\n}\n</code></pre>\n\n<p>and in <code>AndroidManifest.xml</code> write this <strong>className</strong> inside Application tag</p>\n\n<pre><code> &lt;application\n    android:name=\"YourPakageName.EnableMultiDex\"\n    android:hardwareAccelerated=\"true\"\n    android:icon=\"@drawable/wowio_launch_logo\"\n    android:label=\"@string/app_name\"\n    android:largeHeap=\"true\"\n    tools:node=\"replace\"&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9498730,"reputation":61,"user_id":7060709,"display_name":"kabore abdoul mohamine"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1491932318,"creation_date":1491930764,"answer_id":43352294,"question_id":22399572,"body_markdown":"When you are using multidex , then try to extend your application class with MultiDexAppication instead of Application and override below method this required for Android below 5.0 (because 5.0 and above support to the multidex)\r\n\r\n    @Override\r\n    protected void attachBaseContext(Context base)\r\n    {\r\n        super.attachBaseContext(base);\r\n        MultiDex.install(BaseApplication.this);\r\n    }\r\n\r\nand in dependencies add this\r\n\r\n    compile &#39;com.android.support:multidex:1.0.1&#39;","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>When you are using multidex , then try to extend your application class with MultiDexAppication instead of Application and override below method this required for Android below 5.0 (because 5.0 and above support to the multidex)</p>\n\n<pre><code>@Override\nprotected void attachBaseContext(Context base)\n{\n    super.attachBaseContext(base);\n    MultiDex.install(BaseApplication.this);\n}\n</code></pre>\n\n<p>and in dependencies add this</p>\n\n<pre><code>compile 'com.android.support:multidex:1.0.1'\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user2306383"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1498215896,"creation_date":1498215896,"answer_id":44719899,"question_id":22399572,"body_markdown":"As per my understading i get the issue after update android studio 2.1 to 2.3 due to the instant feature my application will not run when i copy the apk from output and put into the sdcard.\r\nFor this problem i build the apk from build option do build apk in android studio.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>As per my understading i get the issue after update android studio 2.1 to 2.3 due to the instant feature my application will not run when i copy the apk from output and put into the sdcard.\nFor this problem i build the apk from build option do build apk in android studio.</p>\n"},{"tags":[],"owner":{"account_id":10204868,"reputation":1137,"user_id":7533900,"display_name":"Ashik Abbas"},"down_vote_count":2,"up_vote_count":95,"is_accepted":false,"score":93,"last_activity_date":1501054188,"creation_date":1501054188,"answer_id":45320244,"question_id":22399572,"body_markdown":"I tried all possible options but result is zero. Finally i found correct solution which is helpful for me. Just go to disable Instant Run Go to **File -&gt; Settings -&gt; Build,Execution, Deployment -&gt; Instant Run -&gt; Uncheck the checkbox for instant run**. Run your app once and this apk file work properly..","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I tried all possible options but result is zero. Finally i found correct solution which is helpful for me. Just go to disable Instant Run Go to <strong>File -> Settings -> Build,Execution, Deployment -> Instant Run -> Uncheck the checkbox for instant run</strong>. Run your app once and this apk file work properly..</p>\n"},{"tags":[],"owner":{"account_id":2370403,"reputation":574,"user_id":2075155,"display_name":"Romuald"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1554901835,"creation_date":1504682266,"answer_id":46069076,"question_id":22399572,"body_markdown":"If the project was compiling just before, you can try to clear the cache using : \r\n\r\n`./gradlew clean `\r\n\r\nor \r\n\r\n`./gradlew cleanBuildCache`\r\n\r\nor for windows \r\n\r\n`gradlew cleanBuildCache`\r\n\r\nhttps://developer.android.com/studio/build/build-cache.html\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>If the project was compiling just before, you can try to clear the cache using : </p>\n\n<p><code>./gradlew clean</code></p>\n\n<p>or </p>\n\n<p><code>./gradlew cleanBuildCache</code></p>\n\n<p>or for windows </p>\n\n<p><code>gradlew cleanBuildCache</code></p>\n\n<p><a href=\"https://developer.android.com/studio/build/build-cache.html\" rel=\"noreferrer\">https://developer.android.com/studio/build/build-cache.html</a></p>\n"},{"tags":[],"owner":{"account_id":9102688,"reputation":3351,"user_id":7369357,"accept_rate":76,"display_name":"nicolas asinovich"},"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1505379401,"creation_date":1505379401,"answer_id":46214681,"question_id":22399572,"body_markdown":"Just try **Clean Project** &amp; **Rebuild Project**.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Just try <strong>Clean Project</strong> &amp; <strong>Rebuild Project</strong>.</p>\n"},{"tags":[],"owner":{"account_id":350565,"reputation":7641,"user_id":686540,"accept_rate":100,"display_name":"petrnohejl"},"down_vote_count":1,"up_vote_count":26,"is_accepted":false,"score":25,"last_activity_date":1507795992,"creation_date":1507763881,"answer_id":46698959,"question_id":22399572,"body_markdown":"This exception can also occur when you have a **custom view** in your layout like this:\r\n\r\n    &lt;com.example.MyView\r\n    \tandroid:layout_width=&quot;match_parent&quot;\r\n    \tandroid:layout_height=&quot;match_parent&quot; /&gt;\r\n\r\nand you change the view&#39;s **package name** from &quot;com.example&quot; to something different, but you forget to change it in the layout as well.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This exception can also occur when you have a <strong>custom view</strong> in your layout like this:</p>\n\n<pre><code>&lt;com.example.MyView\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\" /&gt;\n</code></pre>\n\n<p>and you change the view's <strong>package name</strong> from \"com.example\" to something different, but you forget to change it in the layout as well.</p>\n"},{"tags":[],"owner":{"account_id":5675614,"reputation":591,"user_id":5312239,"accept_rate":40,"display_name":"Abdul Gaffar"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1518268826,"creation_date":1509951512,"answer_id":47131403,"question_id":22399572,"body_markdown":"We don&#39;t need to have customized **Application** class which extends **MultiDexApplication**. Instead, we can have like this on **AndroidManifest.xml**\r\n\r\n    &lt;application\r\n    android:name=&quot;android.support.multidex.MultiDexApplication&quot;\r\n    android:hardwareAccelerated=&quot;true&quot;\r\n    android:icon=&quot;@mipmap/ic_launcher&quot;\r\n    android:label=&quot;@string/app_name&quot;\r\n    android:supportsRtl=&quot;true&quot;\r\n    android:theme=&quot;@style/AppTheme&quot;&gt;\r\n\r\nAnd along with this on **build.gradle**(Module:app),\r\n\r\n    defaultConfig {\r\n          ...\r\n    \r\n          // Enabling multidex support.\r\n          multiDexEnabled true\r\n    }\r\n    \r\n    dependencies {\r\n         ... \r\n         compile &#39;com.android.support:multidex:1.0.2&#39;\r\n    }\r\n\r\nThanks.\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>We don't need to have customized <strong>Application</strong> class which extends <strong>MultiDexApplication</strong>. Instead, we can have like this on <strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;application\nandroid:name=\"android.support.multidex.MultiDexApplication\"\nandroid:hardwareAccelerated=\"true\"\nandroid:icon=\"@mipmap/ic_launcher\"\nandroid:label=\"@string/app_name\"\nandroid:supportsRtl=\"true\"\nandroid:theme=\"@style/AppTheme\"&gt;\n</code></pre>\n\n<p>And along with this on <strong>build.gradle</strong>(Module:app),</p>\n\n<pre><code>defaultConfig {\n      ...\n\n      // Enabling multidex support.\n      multiDexEnabled true\n}\n\ndependencies {\n     ... \n     compile 'com.android.support:multidex:1.0.2'\n}\n</code></pre>\n\n<p>Thanks.</p>\n"},{"tags":[],"owner":{"account_id":1264669,"reputation":499,"user_id":1222232,"display_name":"blinkmacalahan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1514571144,"creation_date":1514571144,"answer_id":48026641,"question_id":22399572,"body_markdown":"I was getting this crash only on Samsung Lollipop devices and this [solution][1] worked for me.\r\n\r\n    dexOptions {\r\n         preDexLibraries false\r\n    }\r\n\r\nI&#39;m posting this answer here because this question is currently the highest ranked search result on Google for this crash and none of the above answers worked for me. \r\n  [1]: https://stackoverflow.com/a/46816876","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I was getting this crash only on Samsung Lollipop devices and this <a href=\"https://stackoverflow.com/a/46816876\">solution</a> worked for me.</p>\n\n<pre><code>dexOptions {\n     preDexLibraries false\n}\n</code></pre>\n\n<p>I'm posting this answer here because this question is currently the highest ranked search result on Google for this crash and none of the above answers worked for me. </p>\n"},{"tags":[],"owner":{"account_id":244790,"reputation":4294,"user_id":517840,"accept_rate":58,"display_name":"passatgt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521390999,"creation_date":1521390999,"answer_id":49350332,"question_id":22399572,"body_markdown":"For me the issue appeared after i created a signed APK. To fix it, i generated a new, debug apk using Run / Build APK. After that, Run(cmd+r) works again without this error. ","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>For me the issue appeared after i created a signed APK. To fix it, i generated a new, debug apk using Run / Build APK. After that, Run(cmd+r) works again without this error. </p>\n"},{"tags":[],"owner":{"account_id":8549769,"reputation":233,"user_id":6407070,"display_name":"nkadu1"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1523151840,"creation_date":1522685925,"answer_id":49614815,"question_id":22399572,"body_markdown":"The following solution worked for me...\r\n\r\nI tried everything mentioned above but still didn&#39;t get my app running.\r\nI have react-native app running on latest version of gradle 4+ and android studio.\r\n\r\nI had the issue where if i run react-native run-android it was failing with issue saying its not able to find MainApplication class...i.e ClassNotFoundException\r\n\r\nI was able to resolve the issue when I updated my gradle.properties to use the compiler D8.\r\n\r\nI added:\r\n\r\nandroid.enableD8=true\r\n\r\nto my gradle.properties\r\n\r\nDoc Details here:\r\nhttps://android-developers.googleblog.com/2017/08/next-generation-dex-compiler-now-in.html","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>The following solution worked for me...</p>\n\n<p>I tried everything mentioned above but still didn't get my app running.\nI have react-native app running on latest version of gradle 4+ and android studio.</p>\n\n<p>I had the issue where if i run react-native run-android it was failing with issue saying its not able to find MainApplication class...i.e ClassNotFoundException</p>\n\n<p>I was able to resolve the issue when I updated my gradle.properties to use the compiler D8.</p>\n\n<p>I added:</p>\n\n<p>android.enableD8=true</p>\n\n<p>to my gradle.properties</p>\n\n<p>Doc Details here:\n<a href=\"https://android-developers.googleblog.com/2017/08/next-generation-dex-compiler-now-in.html\" rel=\"nofollow noreferrer\">https://android-developers.googleblog.com/2017/08/next-generation-dex-compiler-now-in.html</a></p>\n"},{"tags":[],"owner":{"account_id":3555029,"reputation":1963,"user_id":2968988,"accept_rate":100,"display_name":"Mohamed Nageh"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1531985591,"creation_date":1523373756,"answer_id":49757425,"question_id":22399572,"body_markdown":"I faced this Issue multiple times and they&#39;re all solved by disabling **Instant Run**.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I faced this Issue multiple times and they're all solved by disabling <strong>Instant Run</strong>.</p>\n"},{"tags":[],"owner":{"account_id":7910432,"reputation":1285,"user_id":5974647,"accept_rate":21,"display_name":"Harry .Naeem"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1528976801,"creation_date":1528976801,"answer_id":50856829,"question_id":22399572,"body_markdown":"In my case this issue arose because of Kotlin. In my existing code there was a class that was written Kotlin. I built the app, it installed and as soon as first activity opened app crashed. in the logcat this error was being shown. I then updated my Kotlin version from Kotlin website in app gradle file. Build the app again and it worked fine then.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>In my case this issue arose because of Kotlin. In my existing code there was a class that was written Kotlin. I built the app, it installed and as soon as first activity opened app crashed. in the logcat this error was being shown. I then updated my Kotlin version from Kotlin website in app gradle file. Build the app again and it worked fine then.</p>\n"},{"tags":[],"owner":{"account_id":3068374,"reputation":7527,"user_id":2599596,"accept_rate":63,"display_name":"Naveen Kumar M"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1530172230,"creation_date":1530172230,"answer_id":51077498,"question_id":22399572,"body_markdown":"If you are enabled `minifyEnabled` and `shrinkResources` to true in your app gradle file. You need to add the following line in `proguard-rules.pro` file\r\n\r\n&gt; -keep class com.yourpackage_name.** { *; }\r\n\r\nbecause minification is removed some important classes in our apk file. ","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>If you are enabled <code>minifyEnabled</code> and <code>shrinkResources</code> to true in your app gradle file. You need to add the following line in <code>proguard-rules.pro</code> file</p>\n\n<blockquote>\n  <p>-keep class com.yourpackage_name.** { *; }</p>\n</blockquote>\n\n<p>because minification is removed some important classes in our apk file. </p>\n"},{"tags":[],"owner":{"account_id":444211,"reputation":61229,"user_id":835883,"accept_rate":81,"display_name":"j2emanue"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1532940884,"creation_date":1532940884,"answer_id":51590259,"question_id":22399572,"body_markdown":"i had this issue before and the comments here helped in the past but this time it did not. i checked my proguard configuration and i **removed** the following lines and then it worked so proguard can have something to do with this error:\r\n\r\n     -optimizationpasses 5\r\n            -overloadaggressively\r\n            -repackageclasses &#39;&#39;\r\n            -allowaccessmodification\r\n            -dontskipnonpubliclibraryclassmembers","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>i had this issue before and the comments here helped in the past but this time it did not. i checked my proguard configuration and i <strong>removed</strong> the following lines and then it worked so proguard can have something to do with this error:</p>\n\n<pre><code> -optimizationpasses 5\n        -overloadaggressively\n        -repackageclasses ''\n        -allowaccessmodification\n        -dontskipnonpubliclibraryclassmembers\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4406855,"reputation":822,"user_id":3590996,"display_name":"PK Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1535108762,"creation_date":1535108762,"answer_id":52003123,"question_id":22399572,"body_markdown":"I was facing same issue. I tried everything possible for a day, but nothing worked.\r\nThe dependency which was causing problem was using lower compile sdk, target sdk and min sdk. I created library module for the project, copied all the sources and matched the sdk versions with application sdk versions. And finally it worked like a charm.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I was facing same issue. I tried everything possible for a day, but nothing worked.\nThe dependency which was causing problem was using lower compile sdk, target sdk and min sdk. I created library module for the project, copied all the sources and matched the sdk versions with application sdk versions. And finally it worked like a charm.</p>\n"},{"tags":[],"owner":{"account_id":2063502,"reputation":543,"user_id":1839558,"display_name":"lauksas"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1535456201,"creation_date":1535456201,"answer_id":52056903,"question_id":22399572,"body_markdown":"I had the same error and some answers mislead me on a newbie issue. I had the wrong package in my custom view descriptor like below. I hope it helps somebody.\r\n\r\n    &lt;com.my.app.wrong.package.MyActivity\r\n        android:id=&quot;@+id/myActivity&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginLeft=&quot;16dp&quot;\r\n        android:layout_marginRight=&quot;16dp&quot;\r\n        android:paddingTop=&quot;16dp&quot;\r\n        android:paddingBottom=&quot;8dp&quot;\r\n        android:gravity=&quot;left&quot; /&gt;\r\n\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I had the same error and some answers mislead me on a newbie issue. I had the wrong package in my custom view descriptor like below. I hope it helps somebody.</p>\n\n<pre><code>&lt;com.my.app.wrong.package.MyActivity\n    android:id=\"@+id/myActivity\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_marginLeft=\"16dp\"\n    android:layout_marginRight=\"16dp\"\n    android:paddingTop=\"16dp\"\n    android:paddingBottom=\"8dp\"\n    android:gravity=\"left\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1469918,"reputation":469,"user_id":6149323,"display_name":"hofs"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1539864022,"creation_date":1539864022,"answer_id":52873507,"question_id":22399572,"body_markdown":"Ashik abbas [answer][1] (disable **Instant Run**) work for me, but i need **Instant Run**, finally i found solution which is helpful for me.\r\njust disable **minifyEnabled**.\r\ngo to **build.gradle(Module: app)** in **debug** block and disable **minifyEnabled**:\r\n\r\n    debug {\r\n                minifyEnabled false\r\n    \r\n            }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/45320244/6149323","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Ashik abbas <a href=\"https://stackoverflow.com/a/45320244/6149323\">answer</a> (disable <strong>Instant Run</strong>) work for me, but i need <strong>Instant Run</strong>, finally i found solution which is helpful for me.\njust disable <strong>minifyEnabled</strong>.\ngo to <strong>build.gradle(Module: app)</strong> in <strong>debug</strong> block and disable <strong>minifyEnabled</strong>:</p>\n\n<pre><code>debug {\n            minifyEnabled false\n\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6959051,"reputation":622,"user_id":5339154,"display_name":"Andrii Artamonov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556398632,"creation_date":1556398632,"answer_id":55884808,"question_id":22399572,"body_markdown":"In my case, I used the old namespace library while my project was set up making use of androidx one. \r\n\r\nThe solution was to replace `android.support.design.widget.BottomNavigationView` component with the right one to escape from support library: `com.google.android.material.bottomnavigation.BottomNavigationView`.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>In my case, I used the old namespace library while my project was set up making use of androidx one. </p>\n\n<p>The solution was to replace <code>android.support.design.widget.BottomNavigationView</code> component with the right one to escape from support library: <code>com.google.android.material.bottomnavigation.BottomNavigationView</code>.</p>\n"},{"tags":[],"owner":{"account_id":451141,"reputation":775,"user_id":5685911,"display_name":"Akki"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1559764987,"creation_date":1559764987,"answer_id":56467234,"question_id":22399572,"body_markdown":"One possible reason would be the incorrect path of the activity in the Apps AndroidManifest.xml file.\r\nRegister the activity with in your AndroidManifest.xml with full relative path like below.\r\n\r\n    &lt;activity android:name=&quot;&lt;full_path&gt;.ActivityName&quot; /&gt;","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>One possible reason would be the incorrect path of the activity in the Apps AndroidManifest.xml file.\nRegister the activity with in your AndroidManifest.xml with full relative path like below.</p>\n\n<pre><code>&lt;activity android:name=\"&lt;full_path&gt;.ActivityName\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11679511,"reputation":1329,"user_id":8551764,"display_name":"Mostafa Arian Nejad"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1561633132,"creation_date":1561633132,"answer_id":56789533,"question_id":22399572,"body_markdown":"This solved my case:\r\n\r\nIn my case, I was getting the exception below (note that my application class was causing the exception, not my activity):\r\n\r\n    ClassNotFoundException: Didn&#39;t find class &quot;com.example.MyApplication&quot; on path: DexPathList\r\n\r\nI was getting this exception only on devices equal or below API 19, the reason was that I was extending `MultiDexApplication()` class and overriding `attachBaseContext` at the same time! When I removed `attachBaseContext` everything got on track.\r\n\r\n    class MyApplication : MultiDexApplication() {\r\n\r\n    override fun onCreate() {\r\n        super.onCreate()\r\n        // ...\r\n    }\r\n\r\n    override fun attachBaseContext(base: Context?) {\r\n        super.attachBaseContext(base)\r\n        MultiDex.install(this)\r\n    }\r\n\r\nSo if you happen to have such case as I had (Which isn&#39;t likely), there is no need to extend `MultiDexApplication()` and override `attachBaseContext` at the same time, doing one of these actions is enough.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This solved my case:</p>\n\n<p>In my case, I was getting the exception below (note that my application class was causing the exception, not my activity):</p>\n\n<pre><code>ClassNotFoundException: Didn't find class \"com.example.MyApplication\" on path: DexPathList\n</code></pre>\n\n<p>I was getting this exception only on devices equal or below API 19, the reason was that I was extending <code>MultiDexApplication()</code> class and overriding <code>attachBaseContext</code> at the same time! When I removed <code>attachBaseContext</code> everything got on track.</p>\n\n<pre><code>class MyApplication : MultiDexApplication() {\n\noverride fun onCreate() {\n    super.onCreate()\n    // ...\n}\n\noverride fun attachBaseContext(base: Context?) {\n    super.attachBaseContext(base)\n    MultiDex.install(this)\n}\n</code></pre>\n\n<p>So if you happen to have such case as I had (Which isn't likely), there is no need to extend <code>MultiDexApplication()</code> and override <code>attachBaseContext</code> at the same time, doing one of these actions is enough.</p>\n"},{"tags":[],"owner":{"account_id":15287035,"reputation":774,"user_id":11029770,"display_name":"ConcernedHobbit"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1577654795,"creation_date":1577654795,"answer_id":59523438,"question_id":22399572,"body_markdown":"This was similar to my problem--after adding a Kotlin file to an all Java app, my app kept crashing when I would access a view that used a Kotlin file. I shut down Android Studio and restarted it, and it prompted me with a message saying &quot;Kotlin not configured, would you like to configure?&quot;, which then solved my problem.\r\n\r\nWhat this ultimately did is add the following `classpath` line inside my project `build.gradle` file:\r\n\r\n```\r\nbuildscript {\r\n   ...\r\n   dependencies {\r\n      ...\r\n      classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n      ...\r\n   }\r\n   ...\r\n}\r\n```\r\n\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This was similar to my problem--after adding a Kotlin file to an all Java app, my app kept crashing when I would access a view that used a Kotlin file. I shut down Android Studio and restarted it, and it prompted me with a message saying \"Kotlin not configured, would you like to configure?\", which then solved my problem.</p>\n\n<p>What this ultimately did is add the following <code>classpath</code> line inside my project <code>build.gradle</code> file:</p>\n\n<pre><code>buildscript {\n   ...\n   dependencies {\n      ...\n      classpath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version\"\n      ...\n   }\n   ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9809771,"reputation":6806,"user_id":10699119,"display_name":"Sana Ebadi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587037957,"creation_date":1587037957,"answer_id":61249567,"question_id":22399572,"body_markdown":"in my case, I define the Activity in `Manifest.xml` and forgot to create any `activity`.\r\nSo I created Activity and define it in `manifest` and my error solved!","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>in my case, I define the Activity in <code>Manifest.xml</code> and forgot to create any <code>activity</code>.\nSo I created Activity and define it in <code>manifest</code> and my error solved!</p>\n"},{"tags":[],"owner":{"account_id":16958343,"reputation":303,"user_id":12266091,"display_name":"Psychopomp"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1593666782,"creation_date":1593665427,"answer_id":62689224,"question_id":22399572,"body_markdown":"delete &#39;android/app/.settings&#39; folder\r\n\r\nor\r\n\r\ndelete &#39;android/.settings&#39; folder\r\n\r\nor\r\n\r\ndelete &#39;android/.build&#39; folder\r\n\r\nor\r\n\r\ndelete &#39;android/.idea&#39; folder\r\n\r\nand \r\n\r\nyarn react-native run android","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>delete 'android/app/.settings' folder</p>\n<p>or</p>\n<p>delete 'android/.settings' folder</p>\n<p>or</p>\n<p>delete 'android/.build' folder</p>\n<p>or</p>\n<p>delete 'android/.idea' folder</p>\n<p>and</p>\n<p>yarn react-native run android</p>\n"},{"tags":[],"owner":{"account_id":8005925,"reputation":1108,"user_id":6039240,"display_name":"Amr"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1594487836,"creation_date":1594487836,"answer_id":62852289,"question_id":22399572,"body_markdown":"for anyone who comes across this problem now, with android studio 4.0+ you just have to enable java 8 as mentioned [here][1] \r\n\r\n    android {\r\n        defaultConfig {\r\n                ...\r\n        }\r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_1_8\r\n            targetCompatibility JavaVersion.VERSION_1_8\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/57789915/6039240","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>for anyone who comes across this problem now, with android studio 4.0+ you just have to enable java 8 as mentioned <a href=\"https://stackoverflow.com/a/57789915/6039240\">here</a></p>\n<pre><code>android {\n    defaultConfig {\n            ...\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4951203,"reputation":7272,"user_id":3985071,"accept_rate":54,"display_name":"Arpit Patel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595007604,"creation_date":1595007604,"answer_id":62959189,"question_id":22399572,"body_markdown":"I am going with @hofs but displaying where should put minifyEnabled. \r\n\r\nIn Module Gradle, Add **minifyEnabled false** in **Debug** block will work for me.\r\n\r\n     android {\r\n        compileSdkVersion 28\r\n        buildToolsVersion &quot;29.0.2&quot;\r\n        defaultConfig {\r\n            applicationId &quot;com.korechi.roamioapp&quot;\r\n            minSdkVersion 23\r\n            targetSdkVersion 28\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n            multiDexEnabled true\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n            debug {\r\n              minifyEnabled false\r\n            }\r\n        }\r\n    \r\n    }","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I am going with @hofs but displaying where should put minifyEnabled.</p>\n<p>In Module Gradle, Add <strong>minifyEnabled false</strong> in <strong>Debug</strong> block will work for me.</p>\n<pre><code> android {\n    compileSdkVersion 28\n    buildToolsVersion &quot;29.0.2&quot;\n    defaultConfig {\n        applicationId &quot;com.korechi.roamioapp&quot;\n        minSdkVersion 23\n        targetSdkVersion 28\n        versionCode 1\n        versionName &quot;1.0&quot;\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        multiDexEnabled true\n    }\n    buildTypes {\n        release {\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n        debug {\n          minifyEnabled false\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5445664,"reputation":4925,"user_id":4332316,"accept_rate":20,"display_name":"Ali Akram"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595009610,"creation_date":1595009610,"answer_id":62959645,"question_id":22399572,"body_markdown":"Flipper isn&#39;t working on `0.61.x`, so commenting out/removing `initializeFlipper(this)` in your `MainApplication.java` should do the trick.\r\n\r\nChill Pill.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Flipper isn't working on <code>0.61.x</code>, so commenting out/removing <code>initializeFlipper(this)</code> in your <code>MainApplication.java</code> should do the trick.</p>\n<p>Chill Pill.</p>\n"},{"tags":[],"owner":{"account_id":11990645,"reputation":616,"user_id":8773880,"display_name":"David Innocent"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598348424,"creation_date":1598348424,"answer_id":63576082,"question_id":22399572,"body_markdown":"For me what i ended up doing is disabling `minifyEnabled  false` and `shrinkResources  false`","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>For me what i ended up doing is disabling <code>minifyEnabled  false</code> and <code>shrinkResources  false</code></p>\n"},{"tags":[],"owner":{"account_id":2497935,"reputation":3239,"user_id":2173890,"accept_rate":30,"display_name":"sifr_dot_in"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1632383828,"creation_date":1632383828,"answer_id":69296072,"question_id":22399572,"body_markdown":"Open &quot;AndroidManifest&quot; file and check for errors&lt;br&gt;\r\nor&lt;br&gt;\r\ncheck whether you have declared that activity name (which we forget when we copy+paste class of activity).\r\n\r\n\r\nin my case i had replaced all occurrences &quot;com&quot; with &quot;ctrl&quot;+&quot;shift&quot;+&quot;R&quot; command, which also changed the names of activities (which started with com) in manifest.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>Open &quot;AndroidManifest&quot; file and check for errors<br>\nor<br>\ncheck whether you have declared that activity name (which we forget when we copy+paste class of activity).</p>\n<p>in my case i had replaced all occurrences &quot;com&quot; with &quot;ctrl&quot;+&quot;shift&quot;+&quot;R&quot; command, which also changed the names of activities (which started with com) in manifest.</p>\n"},{"tags":[],"owner":{"account_id":9332107,"reputation":374,"user_id":6927551,"display_name":"fazal ur Rehman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646132401,"creation_date":1646132401,"answer_id":71307429,"question_id":22399572,"body_markdown":"----------\r\n  Converting Java code to Kotlin code may cause this problem so configure kotlin in your project may remove this problem","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<hr />\n<p>Converting Java code to Kotlin code may cause this problem so configure kotlin in your project may remove this problem</p>\n"},{"tags":[],"owner":{"account_id":12690021,"reputation":594,"user_id":9220465,"display_name":"Mrudul Addipalli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653282909,"creation_date":1653282909,"answer_id":72343524,"question_id":22399572,"body_markdown":"I tried most of the cache related answers - but didn&#39;t work,\r\n\r\nRCA \r\n\r\n     I created broadcast receiver with android studio tool, and it didn&#39;t give correct package name,\r\n\r\nActual [ Added By Android Studio ]\r\n\r\n     package com.example.app;\r\n     \r\nExpected\r\n\r\n     package com.example.app.all_sms_reader;","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I tried most of the cache related answers - but didn't work,</p>\n<p>RCA</p>\n<pre><code> I created broadcast receiver with android studio tool, and it didn't give correct package name,\n</code></pre>\n<p>Actual [ Added By Android Studio ]</p>\n<pre><code> package com.example.app;\n \n</code></pre>\n<p>Expected</p>\n<pre><code> package com.example.app.all_sms_reader;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20481888,"reputation":21,"user_id":15029922,"display_name":"Nefnaf Raouf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662832644,"creation_date":1662832644,"answer_id":73674079,"question_id":22399572,"body_markdown":"&gt;src-&gt;main-&gt;kotlin..........\r\nMainActivity.kt\r\npackage your_package\r\n\r\nimport io.flutter.embedding.android.FlutterActivity\r\nimport io.flutter.embedding.android.FlutterFragmentActivity\r\n\r\nclass MainActivity: FlutterFragmentActivity() {\r\n}\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<blockquote>\n<p>src-&gt;main-&gt;kotlin..........\nMainActivity.kt\npackage your_package</p>\n</blockquote>\n<p>import io.flutter.embedding.android.FlutterActivity\nimport io.flutter.embedding.android.FlutterFragmentActivity</p>\n<p>class MainActivity: FlutterFragmentActivity() {\n}</p>\n"},{"tags":[],"owner":{"account_id":17441093,"reputation":632,"user_id":12643106,"display_name":"Muzammil Hussain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669486164,"creation_date":1669486164,"answer_id":74584540,"question_id":22399572,"body_markdown":"This issue occurs when your namespace didn&#39;t match with your package. To resolve this issue follow these steps:\r\n\r\nNote: If you are changing your application package follow these steps:\r\n\r\n 1. create New package you want by right click on java&gt;New&gt;package.\r\n 2. then select all of your code from previous package and drop it in new package. Android studio will refactor for you.\r\n 3. Goto Build.gradle(:app) and change namespace to new package you recently created.\r\n 4. Clean and Rebuild project and your issue will be resolved.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>This issue occurs when your namespace didn't match with your package. To resolve this issue follow these steps:</p>\n<p>Note: If you are changing your application package follow these steps:</p>\n<ol>\n<li>create New package you want by right click on java&gt;New&gt;package.</li>\n<li>then select all of your code from previous package and drop it in new package. Android studio will refactor for you.</li>\n<li>Goto Build.gradle(:app) and change namespace to new package you recently created.</li>\n<li>Clean and Rebuild project and your issue will be resolved.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1884098,"reputation":758,"user_id":1703677,"accept_rate":86,"display_name":"beyondtheteal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1680480645,"creation_date":1680480645,"answer_id":75915263,"question_id":22399572,"body_markdown":"My issue was because of `kapt`. \r\n\r\nI had a dependency on Hilt but the `kapt` method wasn&#39;t working, so I changed it to `implementation` just so it would compile. \r\n\r\nThe reason `kapt` was showing an error was because I was missing this plugin at the top of the file: \r\n\r\n    id(&quot;org.jetbrains.kotlin.android&quot;)","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>My issue was because of <code>kapt</code>.</p>\n<p>I had a dependency on Hilt but the <code>kapt</code> method wasn't working, so I changed it to <code>implementation</code> just so it would compile.</p>\n<p>The reason <code>kapt</code> was showing an error was because I was missing this plugin at the top of the file:</p>\n<pre><code>id(&quot;org.jetbrains.kotlin.android&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12105180,"reputation":31,"user_id":8844224,"display_name":"Sumedha Kulkarni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688556240,"creation_date":1688554914,"answer_id":76619688,"question_id":22399572,"body_markdown":" 1. Please make sure that activity path is correct in AndroidManifest.xml, if that doesn&#39;t work, simply invalidate caches and restart. \r\n 2. If you are trying to convert existing java android project in kotlin, and kotlin is not configured, then you might face same issue:\r\nTo resolve above: create an new blank Fragment inside your app module, and android studio will automatically configure kotlin for you.\r\n\r\nHope it helps..\r\n\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<ol>\n<li>Please make sure that activity path is correct in AndroidManifest.xml, if that doesn't work, simply invalidate caches and restart.</li>\n<li>If you are trying to convert existing java android project in kotlin, and kotlin is not configured, then you might face same issue:\nTo resolve above: create an new blank Fragment inside your app module, and android studio will automatically configure kotlin for you.</li>\n</ol>\n<p>Hope it helps..</p>\n"},{"tags":[],"owner":{"account_id":17441093,"reputation":632,"user_id":12643106,"display_name":"Muzammil Hussain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695385500,"creation_date":1695385500,"answer_id":77157583,"question_id":22399572,"body_markdown":"In my case, I converted my project from java to kotlin and was facing this error.\r\nTo resolve this issue I have done these steps\r\n\r\n1. Goto build.gradle (:project)\r\n\r\n       classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.8.20&quot;\r\n\r\n2. Goto build.gradle(:app)\r\n   \r\n\r\n       apply plugin: &#39;kotlin-android&#39;\r\n        \r\n        android {\r\n          .......\r\n             compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_17\r\n            targetCompatibility JavaVersion.VERSION_17\r\n        }\r\n        kotlinOptions {\r\n            jvmTarget = &#39;17&#39;\r\n        }\r\n        .....\r\n        }\r\n\r\n\r\n","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>In my case, I converted my project from java to kotlin and was facing this error.\nTo resolve this issue I have done these steps</p>\n<ol>\n<li><p>Goto build.gradle (:project)</p>\n<pre><code>classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.8.20&quot;\n</code></pre>\n</li>\n<li><p>Goto build.gradle(:app)</p>\n<pre><code>apply plugin: 'kotlin-android'\n\n android {\n   .......\n      compileOptions {\n     sourceCompatibility JavaVersion.VERSION_17\n     targetCompatibility JavaVersion.VERSION_17\n }\n kotlinOptions {\n     jvmTarget = '17'\n }\n .....\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":3472587,"reputation":2515,"user_id":2906564,"accept_rate":41,"display_name":"Karthik Sivam"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":286343,"favorite_count":0,"down_vote_count":0,"up_vote_count":194,"answer_count":45,"score":194,"last_activity_date":1695385500,"creation_date":1394785212,"question_id":22399572,"body_markdown":"I&#39;m currently working on a project in which I have to use purely native ndk. It worked when I try running an helloworld example from Irrlicht engine source. Then I try using it in my project following the same format of that example. But I got:\r\n\r\n    03-14 01:40:05.308: E/AndroidRuntime(799): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.irrlicht.example1/android.app.POMActivity}: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;android.app.POMActivity&quot; on path: DexPathList[[zip file &quot;/data/app/com.irrlicht.example1-2.apk&quot;],nativeLibraryDirectories=[/data/app-lib/com.irrlicht.example1-2, /system/lib]]\r\n\r\n\r\nwhile running my project.\r\n\r\n\r\nHere is my main.cpp file:\r\n\r\n    #include &lt;android/log.h&gt;\r\n    #include &lt;jni.h&gt;\r\n    #include &lt;android_native_app_glue.h&gt;\r\n    #include &quot;android_tools.h&quot;\r\n    #ifdef _IRR_ANDROID_PLATFORM_\r\n    void android_main(android_app* app)\r\n    {\r\n    __android_log_print(4 , &quot;pom&quot; , &quot;nothing&quot;);\r\n    }\r\n   #endif\r\n\r\nin Android.mk: \r\n\r\n    LOCAL_PATH := $(call my-dir)/..\r\n    IRRLICHT_PROJECT_PATH := $(LOCAL_PATH)\r\n    include $(CLEAR_VARS)\r\n    LOCAL_MODULE := Irrlicht\r\n    LOCAL_SRC_FILES := /home/karthik/Android/Essentials/ogl-es/lib/Android/libIrrlicht.a\r\n    include $(PREBUILT_STATIC_LIBRARY)\r\n    include $(CLEAR_VARS)\r\n    LOCAL_MODULE := HelloWorldMobile1\r\n    LOCAL_CFLAGS := -D_IRR_ANDROID_PLATFORM_ -pipe -fno-exceptions -fno-rtti -fstrict-aliasing\r\n    LOCAL_C_INCLUDES := -I ../../include -I /home/karthik/Android/Essentials/ogl-es/include -I /home/karthik/Android/json/jsoncpp-src-0.5.0/libs/linux-gcc-4.8 -I /home/karthik/Android/json/jsoncpp-src-0.5.0/include/json \r\n    LOCAL_SRC_FILES :=  android_tools.cpp main.cpp\r\n    LOCAL_LDLIBS := -lEGL -llog -lGLESv1_CM -lGLESv2 -lz -landroid -ldl \r\n    LOCAL_STATIC_LIBRARIES := Irrlicht android_native_app_glue\r\n    include $(BUILD_SHARED_LIBRARY)\r\n    $(call import-module,android/native_app_glue)\r\n\r\nAnd I have given Activity name in AndroidManifest.xml:\r\n\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    \tpackage=&quot;com.irrlicht.example1&quot;\r\n    \tandroid:versionCode=&quot;1&quot;\r\n    \tandroid:versionName=&quot;1.0&quot;&gt;\r\n    ...\r\n    &lt;application android:icon=&quot;@drawable/irr_icon&quot; android:label=&quot;HelloWorldMobile1&quot; android:theme=&quot;@android:style/Theme.NoTitleBar.Fullscreen&quot; android:debuggable=&quot;true&quot;&gt;\r\n            &lt;activity android:name=&quot;android.app.POMActivity&quot;\r\n    \t\tandroid:label=&quot;HelloWorldMobile1&quot;\r\n    \t\tandroid:launchMode=&quot;singleTask&quot;\r\n    \t\tandroid:configChanges=&quot;orientation|keyboardHidden&quot;\r\n    \t\tandroid:screenOrientation=&quot;portrait&quot;\r\n    \t\tandroid:clearTaskOnLaunch=&quot;true&quot;&gt;\r\n    \t\t&lt;meta-data android:name=&quot;android.app.lib_name&quot; android:value=&quot;HelloWorldMobile1&quot; /&gt;\t\t\t\t\t\t\r\n\r\nWhat is the mistake I am doing here? I&#39;ll post full code if necassary.","title":"java.lang.ClassNotFoundException: Didn&#39;t find class on path: dexpathlist","body":"<p>I'm currently working on a project in which I have to use purely native ndk. It worked when I try running an helloworld example from Irrlicht engine source. Then I try using it in my project following the same format of that example. But I got:</p>\n\n<pre><code>03-14 01:40:05.308: E/AndroidRuntime(799): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.irrlicht.example1/android.app.POMActivity}: java.lang.ClassNotFoundException: Didn't find class \"android.app.POMActivity\" on path: DexPathList[[zip file \"/data/app/com.irrlicht.example1-2.apk\"],nativeLibraryDirectories=[/data/app-lib/com.irrlicht.example1-2, /system/lib]]\n</code></pre>\n\n<p>while running my project.</p>\n\n<p>Here is my main.cpp file:</p>\n\n<pre><code>#include &lt;android/log.h&gt;\n#include &lt;jni.h&gt;\n#include &lt;android_native_app_glue.h&gt;\n#include \"android_tools.h\"\n#ifdef _IRR_ANDROID_PLATFORM_\nvoid android_main(android_app* app)\n{\n__android_log_print(4 , \"pom\" , \"nothing\");\n}\n</code></pre>\n\n<p>#endif</p>\n\n<p>in Android.mk: </p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)/..\nIRRLICHT_PROJECT_PATH := $(LOCAL_PATH)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := Irrlicht\nLOCAL_SRC_FILES := /home/karthik/Android/Essentials/ogl-es/lib/Android/libIrrlicht.a\ninclude $(PREBUILT_STATIC_LIBRARY)\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := HelloWorldMobile1\nLOCAL_CFLAGS := -D_IRR_ANDROID_PLATFORM_ -pipe -fno-exceptions -fno-rtti -fstrict-aliasing\nLOCAL_C_INCLUDES := -I ../../include -I /home/karthik/Android/Essentials/ogl-es/include -I /home/karthik/Android/json/jsoncpp-src-0.5.0/libs/linux-gcc-4.8 -I /home/karthik/Android/json/jsoncpp-src-0.5.0/include/json \nLOCAL_SRC_FILES :=  android_tools.cpp main.cpp\nLOCAL_LDLIBS := -lEGL -llog -lGLESv1_CM -lGLESv2 -lz -landroid -ldl \nLOCAL_STATIC_LIBRARIES := Irrlicht android_native_app_glue\ninclude $(BUILD_SHARED_LIBRARY)\n$(call import-module,android/native_app_glue)\n</code></pre>\n\n<p>And I have given Activity name in AndroidManifest.xml:</p>\n\n<pre><code>&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.irrlicht.example1\"\n    android:versionCode=\"1\"\n    android:versionName=\"1.0\"&gt;\n...\n&lt;application android:icon=\"@drawable/irr_icon\" android:label=\"HelloWorldMobile1\" android:theme=\"@android:style/Theme.NoTitleBar.Fullscreen\" android:debuggable=\"true\"&gt;\n        &lt;activity android:name=\"android.app.POMActivity\"\n        android:label=\"HelloWorldMobile1\"\n        android:launchMode=\"singleTask\"\n        android:configChanges=\"orientation|keyboardHidden\"\n        android:screenOrientation=\"portrait\"\n        android:clearTaskOnLaunch=\"true\"&gt;\n        &lt;meta-data android:name=\"android.app.lib_name\" android:value=\"HelloWorldMobile1\" /&gt;                     \n</code></pre>\n\n<p>What is the mistake I am doing here? I'll post full code if necassary.</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1695384873,"post_id":77157261,"comment_id":136020935,"body_markdown":"Sounds like Jackson changed the implementation to be a bit more information-dense. A welcome change, if you ask me.","body":"Sounds like Jackson changed the implementation to be a bit more information-dense. A welcome change, if you ask me."}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695384908,"creation_date":1695384908,"answer_id":77157520,"question_id":77157261,"body_markdown":"You can achieve this by setting the padding of the arrays as follows:\r\n\r\n```java\r\ntry (OutputStream ous = Files.newOutputStream(file)) {\r\n    DefaultPrettyPrinter prettyPrinter = new DefaultPrettyPrinter();        \r\n    prettyPrinter.indentArraysWith(DefaultIndenter.SYSTEM_LINEFEED_INSTANCE);\r\n\r\n    mapper.writer()\r\n          .with(prettyPrinter)\r\n          .writeValue(ous, list);\r\n}\r\n```","title":"Save pretty JSON file using Jackson","body":"<p>You can achieve this by setting the padding of the arrays as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (OutputStream ous = Files.newOutputStream(file)) {\n    DefaultPrettyPrinter prettyPrinter = new DefaultPrettyPrinter();        \n    prettyPrinter.indentArraysWith(DefaultIndenter.SYSTEM_LINEFEED_INSTANCE);\n\n    mapper.writer()\n          .with(prettyPrinter)\n          .writeValue(ous, list);\n}\n</code></pre>\n"}],"owner":{"account_id":18044315,"reputation":1227,"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77157520,"answer_count":1,"score":1,"last_activity_date":1695384908,"creation_date":1695382498,"question_id":77157261,"body_markdown":"Jackson version 2.15.2\r\n\r\nTo save a json file I use the following code:\r\n\r\n    mapper.writerWithDefaultPrettyPrinter().writeValue(file, object);\r\n\r\nthat I use quite often and it was working as expected, until now when I try for the first time to save a List of objects.\r\n\r\n\r\nExpected result:\r\n\r\n    [\r\n       {\r\n          &quot;firstName&quot;:&quot;a&quot;,\r\n          &quot;lastName&quot;:&quot;a&quot;\r\n       },\r\n       {\r\n          &quot;firstName&quot;:&quot;b&quot;,\r\n          &quot;lastName&quot;:&quot;b&quot;\r\n       },\r\n       {\r\n          &quot;firstName&quot;:&quot;c&quot;,\r\n          &quot;lastName&quot;:&quot;c&quot;\r\n       }\r\n    ]\r\n\r\nbut the written file looks like that:\r\n\r\n    [ {\r\n      &quot;firstName&quot; : &quot;a&quot;,\r\n      &quot;lastName&quot; : &quot;a&quot;\r\n    }, {\r\n      &quot;firstName&quot; : &quot;b&quot;,\r\n      &quot;lastName&quot; : &quot;b&quot;\r\n    }, {\r\n      &quot;firstName&quot; : &quot;c&quot;,\r\n      &quot;lastName&quot; : &quot;c&quot;\r\n    } ]\r\n\r\nIs there any other configuration that I can use to obtain the expected result?\r\n","title":"Save pretty JSON file using Jackson","body":"<p>Jackson version 2.15.2</p>\n<p>To save a json file I use the following code:</p>\n<pre><code>mapper.writerWithDefaultPrettyPrinter().writeValue(file, object);\n</code></pre>\n<p>that I use quite often and it was working as expected, until now when I try for the first time to save a List of objects.</p>\n<p>Expected result:</p>\n<pre><code>[\n   {\n      &quot;firstName&quot;:&quot;a&quot;,\n      &quot;lastName&quot;:&quot;a&quot;\n   },\n   {\n      &quot;firstName&quot;:&quot;b&quot;,\n      &quot;lastName&quot;:&quot;b&quot;\n   },\n   {\n      &quot;firstName&quot;:&quot;c&quot;,\n      &quot;lastName&quot;:&quot;c&quot;\n   }\n]\n</code></pre>\n<p>but the written file looks like that:</p>\n<pre><code>[ {\n  &quot;firstName&quot; : &quot;a&quot;,\n  &quot;lastName&quot; : &quot;a&quot;\n}, {\n  &quot;firstName&quot; : &quot;b&quot;,\n  &quot;lastName&quot; : &quot;b&quot;\n}, {\n  &quot;firstName&quot; : &quot;c&quot;,\n  &quot;lastName&quot; : &quot;c&quot;\n} ]\n</code></pre>\n<p>Is there any other configuration that I can use to obtain the expected result?</p>\n"},{"tags":["java","apache-kafka"],"comments":[{"owner":{"account_id":9452345,"reputation":6871,"user_id":7028697,"display_name":"amethystic"},"score":5,"creation_date":1502186471,"post_id":45560255,"comment_id":78089288,"body_markdown":"Although the user thread hangs for more than 10 seconds, heartbeat thread could still be able to send out heartbeats normally, that&#39;s why no exceptions were thrown and that&#39;s also the reason why `max.poll.intervals.ms` was introduced. What I am interested in is why you still got CommitFailException when `max.poll.intervals.ms` is set to Integer.MAX_VALUE.","body":"Although the user thread hangs for more than 10 seconds, heartbeat thread could still be able to send out heartbeats normally, that&#39;s why no exceptions were thrown and that&#39;s also the reason why <code>max.poll.intervals.ms</code> was introduced. What I am interested in is why you still got CommitFailException when <code>max.poll.intervals.ms</code> is set to Integer.MAX_VALUE."},{"owner":{"account_id":4882220,"reputation":2203,"user_id":3935642,"accept_rate":67,"display_name":"Simon Su"},"score":0,"creation_date":1502244301,"post_id":45560255,"comment_id":78120462,"body_markdown":"That&#39;s my question, I&#39;m also very confused about this. ..","body":"That&#39;s my question, I&#39;m also very confused about this. .."},{"owner":{"account_id":9452345,"reputation":6871,"user_id":7028697,"display_name":"amethystic"},"score":0,"creation_date":1502249947,"post_id":45560255,"comment_id":78121820,"body_markdown":"Could it be reproduced easily or it  just happened only once?","body":"Could it be reproduced easily or it  just happened only once?"},{"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"score":0,"creation_date":1695867799,"post_id":45560255,"comment_id":136082318,"body_markdown":"It is nicely explained here https://medium.com/@Irori/dangerous-default-kafka-settings-part-1-2ee99ee7dfe5","body":"It is nicely explained here <a href=\"https://medium.com/@Irori/dangerous-default-kafka-settings-part-1-2ee99ee7dfe5\" rel=\"nofollow noreferrer\">medium.com/@Irori/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":12303305,"reputation":241,"user_id":8977113,"display_name":"Rahul Teke"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1544656450,"creation_date":1511240011,"answer_id":47405465,"question_id":45560255,"body_markdown":"`session.timeout.ms` set on the consumer should be less than the `group.max.session.timeout.ms` set on Kafka broker. \r\n\r\nThis resolved the issue for me. \r\n\r\nCredit to github link [Commit Failures][1]\r\n\r\n\r\n  [1]: https://github.com/dpkp/kafka-python/issues/746","title":"CommitFailedException Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member","body":"<p><code>session.timeout.ms</code> set on the consumer should be less than the <code>group.max.session.timeout.ms</code> set on Kafka broker. </p>\n\n<p>This resolved the issue for me. </p>\n\n<p>Credit to github link <a href=\"https://github.com/dpkp/kafka-python/issues/746\" rel=\"noreferrer\">Commit Failures</a></p>\n"},{"tags":[],"owner":{"account_id":4856711,"reputation":2710,"user_id":3917452,"accept_rate":87,"display_name":"Abhimanyu"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1695383967,"creation_date":1511245028,"answer_id":47406407,"question_id":45560255,"body_markdown":"For this you need to handle the rebalancing condition in your code and should process the ongoing message and commit it before rebalancing \r\n\r\nLike : \r\n\r\n    private class HandleRebalance implements ConsumerRebalanceListener {\r\n        public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) {\r\n            // Implement what you want to do once rebalancing is done.\r\n        }\r\n    \r\n        public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) {\r\n            // commit current method\r\n        }\r\n    }\r\n\r\nand Use this syntax for subscribing the topic :\r\n\r\n&gt; kafkaConsumer.subscribe(topicNameList , new HandleRebalance())\r\n\r\nThe advantage of doing this : \r\n\r\n 1. Messages will not repeat when the rebalancing is taking place.\r\n \r\n 2. No commit fail exception","title":"CommitFailedException Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member","body":"<p>For this you need to handle the rebalancing condition in your code and should process the ongoing message and commit it before rebalancing</p>\n<p>Like :</p>\n<pre><code>private class HandleRebalance implements ConsumerRebalanceListener {\n    public void onPartitionsAssigned(Collection&lt;TopicPartition&gt; partitions) {\n        // Implement what you want to do once rebalancing is done.\n    }\n\n    public void onPartitionsRevoked(Collection&lt;TopicPartition&gt; partitions) {\n        // commit current method\n    }\n}\n</code></pre>\n<p>and Use this syntax for subscribing the topic :</p>\n<blockquote>\n<p>kafkaConsumer.subscribe(topicNameList , new HandleRebalance())</p>\n</blockquote>\n<p>The advantage of doing this :</p>\n<ol>\n<li><p>Messages will not repeat when the rebalancing is taking place.</p>\n</li>\n<li><p>No commit fail exception</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":28434218,"reputation":1,"user_id":21754524,"display_name":"Xia Gong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682773347,"creation_date":1682597930,"answer_id":76120318,"question_id":45560255,"body_markdown":"If you are also writing tests like me, you can use that ```group id``` to consume one message with a shell command. It can eliminate this error temporarily. For long-term solutions, you can refer to the above answers, e.g.:\r\n\r\n    ./kafka-console-consumer.sh --bootstrap-server xxx:9092 --topic yyy --group zzz --max-messages 1 \r\n\r\n\r\n","title":"CommitFailedException Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member","body":"<p>If you are also writing tests like me, you can use that <code>group id</code> to consume one message with a shell command. It can eliminate this error temporarily. For long-term solutions, you can refer to the above answers, e.g.:</p>\n<pre><code>./kafka-console-consumer.sh --bootstrap-server xxx:9092 --topic yyy --group zzz --max-messages 1 \n</code></pre>\n"}],"owner":{"account_id":4882220,"reputation":2203,"user_id":3935642,"accept_rate":67,"display_name":"Simon Su"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83391,"favorite_count":0,"down_vote_count":0,"up_vote_count":49,"answer_count":3,"score":49,"last_activity_date":1695383967,"creation_date":1502171555,"question_id":45560255,"body_markdown":"I was using kafka 0.10.2 and now faced a CommitFailedException. like:\r\n\r\n&gt; Commit cannot be completed since the group has already rebalanced and\r\n&gt; assigned the partitions to another member. This means that the time\r\n&gt; between subsequent calls to poll() was longer than the configured\r\n&gt; max.poll.interval.ms, which typically implies that the poll loop is\r\n&gt; spending too much time message processing. You can address this either\r\n&gt; by increasing the session timeout or by reducing the maximum size of\r\n&gt; batches returned in poll() with max.poll.records.\r\n\r\nI have set max.poll.interval.ms to Integer.MAX_VALUE. so can anyone tell me why this still happens even I have set the value ? \r\n\r\nAnother question is:\r\nI do as description to set session.timeout.ms to 60000 and it still happens. I try to reproduce by a simple code\r\n \r\n\r\n     public static void main(String[] args) throws InterruptedException {     \r\n            Logger logger = Logger.getLogger(KafkaConsumer10.class);\r\n            logger.info(&quot;XX&quot;);\r\n            Properties props = new Properties();\r\n            props.put(&quot;bootstrap.servers&quot;, &quot;kafka-broker:9098&quot;);\r\n            props.put(&quot;group.id&quot;, &quot;test&quot;);\r\n            props.put(&quot;enable.auto.commit&quot;, &quot;true&quot;);\r\n            props.put(&quot;auto.commit.interval.ms&quot;, &quot;1000&quot;);\r\n            props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n            props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);\r\n            props.put(&quot;max.poll.interval.ms&quot;, &quot;300000&quot;);\r\n            props.put(&quot;session.timeout.ms&quot;, &quot;10000&quot;);\r\n            props.put(&quot;max.poll.records&quot;, &quot;2&quot;);\r\n            KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);\r\n            consumer.subscribe(Arrays.asList(&quot;t1&quot;));\r\n            while (true) {\r\n                Thread.sleep(11000);\r\n                ConsumerRecords&lt;String, String&gt; records = consumer.poll(100);\r\n                //Thread.sleep(11000);\r\n                Thread.sleep(11000);\r\n                for (ConsumerRecord&lt;String, String&gt; record : records)\r\n                    System.out.printf(&quot;offset = %d, key = %s, value = %s%n&quot;, record.offset(), record.key(), record.value());\r\n            }\r\n\r\nwhen I set session.timeout.ms to 10000, I try to sleep more than 10000 ms in my poll loop, but it seems work and no Exception out. so I&#39;m confused about this. if heartbeat is triggered by consumer.poll and consumer.commit, seems heartbeat is out of session timeout in my code. why not throw CommitFailedException ? \r\n\r\n","title":"CommitFailedException Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member","body":"<p>I was using kafka 0.10.2 and now faced a CommitFailedException. like:</p>\n\n<blockquote>\n  <p>Commit cannot be completed since the group has already rebalanced and\n  assigned the partitions to another member. This means that the time\n  between subsequent calls to poll() was longer than the configured\n  max.poll.interval.ms, which typically implies that the poll loop is\n  spending too much time message processing. You can address this either\n  by increasing the session timeout or by reducing the maximum size of\n  batches returned in poll() with max.poll.records.</p>\n</blockquote>\n\n<p>I have set max.poll.interval.ms to Integer.MAX_VALUE. so can anyone tell me why this still happens even I have set the value ? </p>\n\n<p>Another question is:\nI do as description to set session.timeout.ms to 60000 and it still happens. I try to reproduce by a simple code</p>\n\n<pre><code> public static void main(String[] args) throws InterruptedException {     \n        Logger logger = Logger.getLogger(KafkaConsumer10.class);\n        logger.info(\"XX\");\n        Properties props = new Properties();\n        props.put(\"bootstrap.servers\", \"kafka-broker:9098\");\n        props.put(\"group.id\", \"test\");\n        props.put(\"enable.auto.commit\", \"true\");\n        props.put(\"auto.commit.interval.ms\", \"1000\");\n        props.put(\"key.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\");\n        props.put(\"value.deserializer\", \"org.apache.kafka.common.serialization.StringDeserializer\");\n        props.put(\"max.poll.interval.ms\", \"300000\");\n        props.put(\"session.timeout.ms\", \"10000\");\n        props.put(\"max.poll.records\", \"2\");\n        KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);\n        consumer.subscribe(Arrays.asList(\"t1\"));\n        while (true) {\n            Thread.sleep(11000);\n            ConsumerRecords&lt;String, String&gt; records = consumer.poll(100);\n            //Thread.sleep(11000);\n            Thread.sleep(11000);\n            for (ConsumerRecord&lt;String, String&gt; record : records)\n                System.out.printf(\"offset = %d, key = %s, value = %s%n\", record.offset(), record.key(), record.value());\n        }\n</code></pre>\n\n<p>when I set session.timeout.ms to 10000, I try to sleep more than 10000 ms in my poll loop, but it seems work and no Exception out. so I'm confused about this. if heartbeat is triggered by consumer.poll and consumer.commit, seems heartbeat is out of session timeout in my code. why not throw CommitFailedException ? </p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1695377754,"post_id":77156731,"comment_id":136019533,"body_markdown":"What does this means? *print for all the threads*?","body":"What does this means? <i>print for all the threads</i>?"},{"owner":{"account_id":7905406,"reputation":683,"user_id":5971094,"accept_rate":94,"display_name":"Jordan Jordanovski"},"score":0,"creation_date":1695377874,"post_id":77156731,"comment_id":136019562,"body_markdown":"I want to print out the values for all the running threads at once.","body":"I want to print out the values for all the running threads at once."},{"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"score":0,"creation_date":1695378046,"post_id":77156731,"comment_id":136019606,"body_markdown":"Sorry, but this does not help us to understand what you want to achieve. *printing* is *outputting something outside the process*. So what does it means *printing for all the threads*. Give us some code, explain much clearer what you want to achieve.","body":"Sorry, but this does not help us to understand what you want to achieve. <i>printing</i> is <i>outputting something outside the process</i>. So what does it means <i>printing for all the threads</i>. Give us some code, explain much clearer what you want to achieve."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1695378148,"post_id":77156731,"comment_id":136019626,"body_markdown":"@Jean-BaptisteYun&#232;s Just because you don&#39;t understand the question doesn&#39;t mean it&#39;s necessarily the fault of the asker. I understood the question perfectly fine.","body":"@Jean-BaptisteYun&#232;s Just because you don&#39;t understand the question doesn&#39;t mean it&#39;s necessarily the fault of the asker. I understood the question perfectly fine."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1695378406,"post_id":77156731,"comment_id":136019674,"body_markdown":"Think about it: your print operation has to happen on some thread. That printer thread only has access to the thread-local that exists on itself, but not on any other threads. So no, in a general way, it&#39;s not possible. In a much more limited scenario, e.g. you have a subset of threads which all process requests off of some queues or something, you could put requests onto every thread&#39;s queue which say &quot;print your thread-local&quot;.","body":"Think about it: your print operation has to happen on some thread. That printer thread only has access to the thread-local that exists on itself, but not on any other threads. So no, in a general way, it&#39;s not possible. In a much more limited scenario, e.g. you have a subset of threads which all process requests off of some queues or something, you could put requests onto every thread&#39;s queue which say &quot;print your thread-local&quot;."},{"owner":{"account_id":7905406,"reputation":683,"user_id":5971094,"accept_rate":94,"display_name":"Jordan Jordanovski"},"score":0,"creation_date":1695380773,"post_id":77156731,"comment_id":136020094,"body_markdown":"Aha okay, I understand. I posted further explanation in an edit, maybe you can give me an idea how I can test it out?","body":"Aha okay, I understand. I posted further explanation in an edit, maybe you can give me an idea how I can test it out?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695381533,"post_id":77156731,"comment_id":136020259,"body_markdown":"1) Iterate over all threads; 2) access each thread&#39;s package-private variable `threadLocals` (probably via reflection); 3) get your value using private method `threadLocals.getEntry(yourThreadLocal)`, again via reflection.","body":"1) Iterate over all threads; 2) access each thread&#39;s package-private variable <code>threadLocals</code> (probably via reflection); 3) get your value using private method <code>threadLocals.getEntry(yourThreadLocal)</code>, again via reflection."},{"owner":{"account_id":7905406,"reputation":683,"user_id":5971094,"accept_rate":94,"display_name":"Jordan Jordanovski"},"score":0,"creation_date":1695382157,"post_id":77156731,"comment_id":136020392,"body_markdown":"I tried but I&#39;m getting an error &quot;Unable to make field java.lang.ThreadLocal$ThreadLocalMap java.lang.Thread.threadLocals accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @7690781&quot;.","body":"I tried but I&#39;m getting an error &quot;Unable to make field java.lang.ThreadLocal$ThreadLocalMap java.lang.Thread.threadLocals accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @7690781&quot;."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1695382302,"post_id":77156731,"comment_id":136020422,"body_markdown":"If you are having trouble using reflection with the Java module system, please ask a different question about that. And please search first, because that question gets asked *a lot*.","body":"If you are having trouble using reflection with the Java module system, please ask a different question about that. And please search first, because that question gets asked <i>a lot</i>."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695383870,"creation_date":1695383870,"answer_id":77157421,"question_id":77156731,"body_markdown":"I had some time to spare, so I made a proof of concept. It&#39;s in Kotlin because that&#39;s what I had available, but it should be easy to convert to Java:\r\n\r\n```kotlin\r\nfun &lt;V&gt; getAllThreadLocalValues(threadLocal: ThreadLocal&lt;V&gt;): Map&lt;Thread, V&gt; {\r\n    val threadLocalsField = Thread::class.java.getDeclaredField(&quot;threadLocals&quot;)\r\n        .apply { trySetAccessible() }\r\n    val getEntryMethod = Class.forName(&quot;java.lang.ThreadLocal\\$ThreadLocalMap&quot;)\r\n        .getDeclaredMethod(&quot;getEntry&quot;, ThreadLocal::class.java)\r\n        .apply { trySetAccessible() }\r\n    val entryValueField = Class.forName(&quot;java.lang.ThreadLocal\\$ThreadLocalMap\\$Entry&quot;)\r\n        .getDeclaredField(&quot;value&quot;)\r\n        .apply { trySetAccessible() }\r\n\r\n    return Thread.getAllStackTraces().mapValues { (thread, _) -&gt;\r\n        val map = threadLocalsField.get(thread) ?: return@mapValues null\r\n        val entry = getEntryMethod.invoke(map, threadLocal) ?: return@mapValues null\r\n        val value = entryValueField.get(entry) ?: return@mapValues null\r\n        value as V\r\n    }.filterValues { it != null } as Map&lt;Thread, V&gt;\r\n}\r\n```\r\n\r\nThis code returns a map of `Thread` to the value of the passed `ThreadLocal`, if any. Threads without a value aren&#39;t included in the map.\r\n\r\nNote that you&#39;ll need to pass `--add-opens=java.base/java.lang=ALL-UNNAMED` to allow the reflection.","title":"How to print all the values in a ThreadLocal HashMap for all the threads?","body":"<p>I had some time to spare, so I made a proof of concept. It's in Kotlin because that's what I had available, but it should be easy to convert to Java:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;V&gt; getAllThreadLocalValues(threadLocal: ThreadLocal&lt;V&gt;): Map&lt;Thread, V&gt; {\n    val threadLocalsField = Thread::class.java.getDeclaredField(&quot;threadLocals&quot;)\n        .apply { trySetAccessible() }\n    val getEntryMethod = Class.forName(&quot;java.lang.ThreadLocal\\$ThreadLocalMap&quot;)\n        .getDeclaredMethod(&quot;getEntry&quot;, ThreadLocal::class.java)\n        .apply { trySetAccessible() }\n    val entryValueField = Class.forName(&quot;java.lang.ThreadLocal\\$ThreadLocalMap\\$Entry&quot;)\n        .getDeclaredField(&quot;value&quot;)\n        .apply { trySetAccessible() }\n\n    return Thread.getAllStackTraces().mapValues { (thread, _) -&gt;\n        val map = threadLocalsField.get(thread) ?: return@mapValues null\n        val entry = getEntryMethod.invoke(map, threadLocal) ?: return@mapValues null\n        val value = entryValueField.get(entry) ?: return@mapValues null\n        value as V\n    }.filterValues { it != null } as Map&lt;Thread, V&gt;\n}\n</code></pre>\n<p>This code returns a map of <code>Thread</code> to the value of the passed <code>ThreadLocal</code>, if any. Threads without a value aren't included in the map.</p>\n<p>Note that you'll need to pass <code>--add-opens=java.base/java.lang=ALL-UNNAMED</code> to allow the reflection.</p>\n"}],"owner":{"account_id":7905406,"reputation":683,"user_id":5971094,"accept_rate":94,"display_name":"Jordan Jordanovski"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695383870,"creation_date":1695377620,"question_id":77156731,"body_markdown":"Is it possible to print out all the values in a ThreadLocal HashMap for all the threads?\r\n\r\nEdit: To elaborate further why I want to do this, I have a Spring boot app where the incoming requests are processed on a &quot;http-nio-8080-exec&quot; thread which request uses JobRunr to execute some Jobs (which happens on a &quot;background-worker&quot; thread). \r\n\r\nI have logs before creating the Job and inside the job as well, in the log before creating the Job (executed on the &quot;http-nio-8080-exec&quot; processing thread) I put some stuff in the MDC map (which is ThreadLocal) and what I can see is that the information is passed along to the &quot;background-worker&quot; once doing the log inside the Job. I don&#39;t know how they are being passed to it (probably some process of JobRunr), what I want to make sure that it is only passed to the right &quot;background-worker&quot; thread and afterwards cleared properly. \r\n\r\nBtw I use SLF4J for logging.","title":"How to print all the values in a ThreadLocal HashMap for all the threads?","body":"<p>Is it possible to print out all the values in a ThreadLocal HashMap for all the threads?</p>\n<p>Edit: To elaborate further why I want to do this, I have a Spring boot app where the incoming requests are processed on a &quot;http-nio-8080-exec&quot; thread which request uses JobRunr to execute some Jobs (which happens on a &quot;background-worker&quot; thread).</p>\n<p>I have logs before creating the Job and inside the job as well, in the log before creating the Job (executed on the &quot;http-nio-8080-exec&quot; processing thread) I put some stuff in the MDC map (which is ThreadLocal) and what I can see is that the information is passed along to the &quot;background-worker&quot; once doing the log inside the Job. I don't know how they are being passed to it (probably some process of JobRunr), what I want to make sure that it is only passed to the right &quot;background-worker&quot; thread and afterwards cleared properly.</p>\n<p>Btw I use SLF4J for logging.</p>\n"},{"tags":["java","spring","spring-boot","validation","spring-mvc"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1695331274,"post_id":77153609,"comment_id":136013997,"body_markdown":"You can avoid the duplication by abstracting away the data that needs validation using interfaces and writing `ConstraintValidator` for the interface. My answer [here](https://stackoverflow.com/questions/76921231/custom-springboot-bean-validation/76921640#76921640) shows how to do it.","body":"You can avoid the duplication by abstracting away the data that needs validation using interfaces and writing <code>ConstraintValidator</code> for the interface. My answer <a href=\"https://stackoverflow.com/questions/76921231/custom-springboot-bean-validation/76921640#76921640\">here</a> shows how to do it."}],"answers":[{"tags":[],"owner":{"account_id":28525225,"reputation":81,"user_id":21833389,"display_name":"Ruslan K."},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695380341,"creation_date":1695380341,"answer_id":77157022,"question_id":77153609,"body_markdown":"What I really needed was annotating getters of an interface.\r\n\r\nAs Chaosfire [pointed out][1], one can get rid of the duplication by abstracting away the data that needs validation using interfaces and writing `ConstraintValidator` for the interface.\r\n\r\nMerits of annotating getters of base classes are [listed here][2].\r\n\r\nA solution for me will be annotating getters of interface (let&#39;s name it ValidProduct):\r\n```\r\npublic interface ValidProduct {\r\n    @NotEmpty\r\n    String getName();\r\n}\r\n```\r\nDTO and entity classes then implement this interface.\r\nProduct entity class:\r\n```\r\n@Entity\r\n@Table\r\npublic class Product implements ValidProduct {\r\n    private String name;\r\n    \r\n    @Override\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n```\r\nNewProductRequest DTO class then looks like:\r\n```\r\npublic class NewProductRequest implements ValidProduct {\r\n    private String name;\r\n\r\n    @Override\r\n    public String getName() {\r\n        return name;\r\n    }\r\n}\r\n```\r\nThis can then be combined with JSR `ConstraintValidator` or Spring `Validator` implementations.\r\n\r\n  [1]: https://stackoverflow.com/a/76921640/21833389\r\n  [2]: https://stackoverflow.com/a/6285499/21833389 ","title":"How to avoid Jakarta validation annotations duplication when validating DTOs and Entities?","body":"<p>What I really needed was annotating getters of an interface.</p>\n<p>As Chaosfire <a href=\"https://stackoverflow.com/a/76921640/21833389\">pointed out</a>, one can get rid of the duplication by abstracting away the data that needs validation using interfaces and writing <code>ConstraintValidator</code> for the interface.</p>\n<p>Merits of annotating getters of base classes are <a href=\"https://stackoverflow.com/a/6285499/21833389\">listed here</a>.</p>\n<p>A solution for me will be annotating getters of interface (let's name it ValidProduct):</p>\n<pre><code>public interface ValidProduct {\n    @NotEmpty\n    String getName();\n}\n</code></pre>\n<p>DTO and entity classes then implement this interface.\nProduct entity class:</p>\n<pre><code>@Entity\n@Table\npublic class Product implements ValidProduct {\n    private String name;\n    \n    @Override\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n<p>NewProductRequest DTO class then looks like:</p>\n<pre><code>public class NewProductRequest implements ValidProduct {\n    private String name;\n\n    @Override\n    public String getName() {\n        return name;\n    }\n}\n</code></pre>\n<p>This can then be combined with JSR <code>ConstraintValidator</code> or Spring <code>Validator</code> implementations.</p>\n"}],"owner":{"account_id":28525225,"reputation":81,"user_id":21833389,"display_name":"Ruslan K."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77157022,"answer_count":1,"score":1,"last_activity_date":1695383680,"creation_date":1695329771,"question_id":77153609,"body_markdown":"I&#39;m trying to validate both DTOs (passed into controller methods) and JPA entities. But this often leads to validation rules duplication.\r\n\r\nValidation rules applied are often similar both for entity and DTO classes, for example (classes simplified):\r\n\r\nProduct entity class has a name annotated with @NotEmpty:\r\n```\r\n@Entity\r\n@Table\r\nclass Product {\r\n    @NotEmpty\r\n    private String name;\r\n\r\n    // id, getters, setters and so on\r\n}\r\n```\r\nNewProductRequest DTO class has @NotEmpty name too:\r\n\r\n```\r\nclass NewProductRequest {\r\n    @NotEmpty\r\n    public String name;\r\n}\r\n```\r\nIn more complex scenarios, this leads to massive validation duplication.\r\nUsing this approach any validation changes applied to Product have to be applied to NewProductRequest as well. \r\n\r\nIs there a way to avoid validation annotations duplication so one can follow the [DRY principle](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)? Can it be achieved with Spring MVC custom validators?","title":"How to avoid Jakarta validation annotations duplication when validating DTOs and Entities?","body":"<p>I'm trying to validate both DTOs (passed into controller methods) and JPA entities. But this often leads to validation rules duplication.</p>\n<p>Validation rules applied are often similar both for entity and DTO classes, for example (classes simplified):</p>\n<p>Product entity class has a name annotated with @NotEmpty:</p>\n<pre><code>@Entity\n@Table\nclass Product {\n    @NotEmpty\n    private String name;\n\n    // id, getters, setters and so on\n}\n</code></pre>\n<p>NewProductRequest DTO class has @NotEmpty name too:</p>\n<pre><code>class NewProductRequest {\n    @NotEmpty\n    public String name;\n}\n</code></pre>\n<p>In more complex scenarios, this leads to massive validation duplication.\nUsing this approach any validation changes applied to Product have to be applied to NewProductRequest as well.</p>\n<p>Is there a way to avoid validation annotations duplication so one can follow the <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\" rel=\"nofollow noreferrer\">DRY principle</a>? Can it be achieved with Spring MVC custom validators?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9825,"page":167,"page_size":100}
