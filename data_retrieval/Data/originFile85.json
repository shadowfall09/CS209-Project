{"items":[{"tags":["java","amazon-web-services","amazon-sqs"],"comments":[{"owner":{"account_id":5802424,"reputation":3075,"user_id":5976614,"display_name":"Pacifist"},"score":0,"creation_date":1565204105,"post_id":57399916,"comment_id":101282985,"body_markdown":"Do you think it&#39;s something related to throttling? A wild guess though.","body":"Do you think it&#39;s something related to throttling? A wild guess though."},{"owner":{"account_id":7784691,"reputation":279,"user_id":5890004,"accept_rate":67,"display_name":"user123"},"score":0,"creation_date":1565216930,"post_id":57399916,"comment_id":101287514,"body_markdown":"@Pacifist_AWS I checked my reports and dashboards but nothing seems though","body":"@Pacifist_AWS I checked my reports and dashboards but nothing seems though"},{"owner":{"account_id":444416,"reputation":15934,"user_id":836214,"accept_rate":86,"display_name":"Krease"},"score":0,"creation_date":1565319944,"post_id":57399916,"comment_id":101324993,"body_markdown":"It sounds like the messages being written directly to the DLQ instead of the main queue - otherwise what you&#39;re describing is impossible","body":"It sounds like the messages being written directly to the DLQ instead of the main queue - otherwise what you&#39;re describing is impossible"},{"owner":{"account_id":27992,"reputation":3290,"user_id":74337,"accept_rate":62,"display_name":"Jack Cox"},"score":0,"creation_date":1650471499,"post_id":57399916,"comment_id":127126322,"body_markdown":"Did you ever find the cause for this? I&#39;m experiencing the same thing.","body":"Did you ever find the cause for this? I&#39;m experiencing the same thing."},{"owner":{"account_id":4845455,"reputation":3888,"user_id":3909198,"accept_rate":86,"display_name":"inquisitive"},"score":0,"creation_date":1680758382,"post_id":57399916,"comment_id":133953112,"body_markdown":"facing same issue","body":"facing same issue"}],"answers":[{"tags":[],"owner":{"account_id":16330664,"reputation":314,"user_id":11794091,"display_name":"Yair Abad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699025148,"creation_date":1693853635,"answer_id":77040041,"question_id":57399916,"body_markdown":"Too late but I faced same problem. In my case I found few messages in my DLQ where those `messageId` were not even pulled/processed by my lambda function (why?!?). Aclaration: it was minor percentage (20 over +10k messages) but sometimes it happened.\r\n\r\nSearching why ocurred this, I found this [paragrahp][1] on AWS documentation:  \r\n\r\n&gt; Because Amazon SQS is a distributed system, it is possible for a consumer to not receive a message even when Amazon SQS marks the message as delivered while returning successfully from a ReceiveMessage API method call.\r\n\r\nThere is a possibility that few message couldn&#39;t been processed by SQS service and then those message are sent to DLQ because are consider as &quot;failed&quot;. Thats why AWS suggest us setting the number of maximum receives at least to 5, default value is 10, for a DLQ (in my case was setted to 1).\r\n\r\nUpgrating my `maxReceiveCount` to 5 solved my issue. \r\n\r\nHope this answer helps someone :)\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/working-with-messages.html#avoiding-inconsistent-message-processing","title":"SQS Messages are moving to DLQ without processing even once","body":"<p>Too late but I faced same problem. In my case I found few messages in my DLQ where those <code>messageId</code> were not even pulled/processed by my lambda function (why?!?). Aclaration: it was minor percentage (20 over +10k messages) but sometimes it happened.</p>\n<p>Searching why ocurred this, I found this <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/working-with-messages.html#avoiding-inconsistent-message-processing\" rel=\"nofollow noreferrer\">paragrahp</a> on AWS documentation:</p>\n<blockquote>\n<p>Because Amazon SQS is a distributed system, it is possible for a consumer to not receive a message even when Amazon SQS marks the message as delivered while returning successfully from a ReceiveMessage API method call.</p>\n</blockquote>\n<p>There is a possibility that few message couldn't been processed by SQS service and then those message are sent to DLQ because are consider as &quot;failed&quot;. Thats why AWS suggest us setting the number of maximum receives at least to 5, default value is 10, for a DLQ (in my case was setted to 1).</p>\n<p>Upgrating my <code>maxReceiveCount</code> to 5 solved my issue.</p>\n<p>Hope this answer helps someone :)</p>\n"}],"owner":{"account_id":7784691,"reputation":279,"user_id":5890004,"accept_rate":67,"display_name":"user123"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":650,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1699025148,"creation_date":1565200633,"question_id":57399916,"body_markdown":"**Messages are moving to DLQ without processing even once.**\r\n\r\n 1. Messages available : 1500\r\n 2. Messages processed : 1430\r\n 3. Moved to DLQ without processing even once : 70\r\n\r\nI want to know the reasons why these 70 messages are moved to DLQ even atleast once processing\r\n\r\n\r\nChecked online/stackoverflow but didn&#39;t find anything related to this.\r\n\r\nI checked logs for these messages but didn’t find like I found for others.\r\nI didn’t open AWS console and saw the messages which will increase max_receives which I didn’t do.\r\n\r\n**I am using @sqsListener to process 20 messages at a time irrespective of how many messages we get.**\r\n\r\nSo, there no possibility of system hangout/something.\r\n\r\nAny help is appreciated.","title":"SQS Messages are moving to DLQ without processing even once","body":"<p><strong>Messages are moving to DLQ without processing even once.</strong></p>\n\n<ol>\n<li>Messages available : 1500</li>\n<li>Messages processed : 1430</li>\n<li>Moved to DLQ without processing even once : 70</li>\n</ol>\n\n<p>I want to know the reasons why these 70 messages are moved to DLQ even atleast once processing</p>\n\n<p>Checked online/stackoverflow but didn't find anything related to this.</p>\n\n<p>I checked logs for these messages but didn’t find like I found for others.\nI didn’t open AWS console and saw the messages which will increase max_receives which I didn’t do.</p>\n\n<p><strong>I am using @sqsListener to process 20 messages at a time irrespective of how many messages we get.</strong></p>\n\n<p>So, there no possibility of system hangout/something.</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch"],"answers":[{"comments":[{"owner":{"account_id":3344727,"reputation":2470,"user_id":2810099,"accept_rate":81,"display_name":"Marius Manastireanu"},"score":0,"creation_date":1693811451,"post_id":77025617,"comment_id":135804573,"body_markdown":"Thank you for the answer. Unfortunately I was debugging and inspecting the source code and came to the same conclusion. Will work on a different solution then.\nThank you again for the time spent to explain this! Cheers","body":"Thank you for the answer. Unfortunately I was debugging and inspecting the source code and came to the same conclusion. Will work on a different solution then. Thank you again for the time spent to explain this! Cheers"}],"tags":[],"owner":{"account_id":5534873,"reputation":18496,"user_id":4393565,"accept_rate":67,"display_name":"P.J.Meisch"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693596859,"creation_date":1693596859,"answer_id":77025617,"question_id":77015176,"body_markdown":"The behaviour of Spring Data Elasticsearch is that the value of the id property is written to the document source by default, since version 5.1 this can be explicitly **disabled** by adding `storeIdInSource = false` to the `@Document` annotation.\r\n\r\nBut this value will only be written into the source of the Elasticsearch if it is set on the entity. In your case, you have a `null` id property, so there is nothing that Spring Data Elasticsearch can write into document that i sent to Elasticsearch. The id is created by Elasticsearch when the save without an explicit id comes in, and only on returning the stored value or when later searching the entity&#39;s property will be filled with the id returned from Elasticsearch. Elasticsearch cannot on saving create a new id and store that somewhere in the document&#39;s source.\r\n\r\nSo if you need the id field in the source as well, you need to create some id by yourself and set it on the entity before saving it.\r\n\r\nBy the way, Spring Data Elasticsearch 4.4.5 is an old version that is out of maintenance. \r\n\r\n","title":"Springdata Elasticsearch - How to populate id field in _source when indexing?","body":"<p>The behaviour of Spring Data Elasticsearch is that the value of the id property is written to the document source by default, since version 5.1 this can be explicitly <strong>disabled</strong> by adding <code>storeIdInSource = false</code> to the <code>@Document</code> annotation.</p>\n<p>But this value will only be written into the source of the Elasticsearch if it is set on the entity. In your case, you have a <code>null</code> id property, so there is nothing that Spring Data Elasticsearch can write into document that i sent to Elasticsearch. The id is created by Elasticsearch when the save without an explicit id comes in, and only on returning the stored value or when later searching the entity's property will be filled with the id returned from Elasticsearch. Elasticsearch cannot on saving create a new id and store that somewhere in the document's source.</p>\n<p>So if you need the id field in the source as well, you need to create some id by yourself and set it on the entity before saving it.</p>\n<p>By the way, Spring Data Elasticsearch 4.4.5 is an old version that is out of maintenance.</p>\n"},{"tags":[],"owner":{"account_id":3344727,"reputation":2470,"user_id":2810099,"accept_rate":81,"display_name":"Marius Manastireanu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699025073,"creation_date":1699025073,"answer_id":77417871,"question_id":77015176,"body_markdown":"I ended up overriding the default constructor of `MyDocument` with something like:\r\n```java\r\npublic MyDocument {\r\n    this.id = org.elasticsearch.common.UUIDs.base64UUID();\r\n}\r\n```\r\nwhich basically uses the ID generator used by Elasticsearch,\r\nand since the field is populated on the document, the value will be indexed in the `_source`.\r\n","title":"Springdata Elasticsearch - How to populate id field in _source when indexing?","body":"<p>I ended up overriding the default constructor of <code>MyDocument</code> with something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public MyDocument {\n    this.id = org.elasticsearch.common.UUIDs.base64UUID();\n}\n</code></pre>\n<p>which basically uses the ID generator used by Elasticsearch,\nand since the field is populated on the document, the value will be indexed in the <code>_source</code>.</p>\n"}],"owner":{"account_id":3344727,"reputation":2470,"user_id":2810099,"accept_rate":81,"display_name":"Marius Manastireanu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699025073,"creation_date":1693479382,"question_id":77015176,"body_markdown":"I have a document\r\n\r\n```java\r\n@Document(indexName = &quot;my_index&quot;)\r\npublic class MyDocument {\r\n  @Id\r\n  @Field(type = FieldType.Keyword)\r\n  private String id;\r\n\r\n  @Field(type = FieldType.Keyword)\r\n  private String otherField;\r\n\r\n  ...\r\n}\r\n```\r\n\r\nAnd a repository \r\n```java\r\n@Repository\r\npublic interface MyRepository extends ElasticsearchRepository&lt;MyDocument, String&gt; {\r\n}\r\n```\r\n\r\nwhen I do `repository.save(document);` (where document id is empty, so that a new one is generated, and &#39;otherValue&#39; is set to &#39;someValue&#39;), I see the following response to `es/my_index/_search?pretty`:\r\n```json\r\n...\r\n&quot;hits&quot; : [\r\n{\r\n &quot;_index&quot; : &quot;my_index&quot;,\r\n &quot;_type&quot; : &quot;_doc&quot;,\r\n &quot;_id&quot; : &quot;AUTO_GENERATED_ID&quot;,\r\n &quot;_score&quot; : 1.0,\r\n &quot;_source&quot; : {\r\n    &quot;_class&quot; : &quot;a.b.c.MyDocument&quot;,\r\n    &quot;otherField&quot;: &quot;someValue&quot;\r\n }\r\n}\r\n]\r\n```\r\n\r\nThe result of the `save` method is returning a java object with id field set and of course if I retrieve the document through the repository, the id is being populated in the java object and I can access it.\r\n\r\nHowever, the document itself does not contain the field &quot;id&quot; inside source.\r\n**How can i achieve this** while I let the ES/Springdata handle the auto-generation of Ids?\r\n\r\nI need this because I want to apply some sorting based on other fields and the id. As a workaround I wanted to do it on &quot;_id&quot;, but I get the following warning in the console: `299 loading the fielddata on the _id field is deprecated and will be removed in future versions. If you require sorting or aggregating on this field you should also include the id in the body of the documents, and map this field as a keyword field that has [doc_values] enabled`\r\n\r\nPS: If I do some modifications on the document retrieved from the repository and `save` it again, the document will now have the &quot;id&quot; field populated, but this means that I would have to double the operations on ES while trying to index a document.\r\n\r\n---\r\n\r\n- springdata-elasticsearch version: 4.4.5\r\n- es version: 7.17.7","title":"Springdata Elasticsearch - How to populate id field in _source when indexing?","body":"<p>I have a document</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Document(indexName = &quot;my_index&quot;)\npublic class MyDocument {\n  @Id\n  @Field(type = FieldType.Keyword)\n  private String id;\n\n  @Field(type = FieldType.Keyword)\n  private String otherField;\n\n  ...\n}\n</code></pre>\n<p>And a repository</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface MyRepository extends ElasticsearchRepository&lt;MyDocument, String&gt; {\n}\n</code></pre>\n<p>when I do <code>repository.save(document);</code> (where document id is empty, so that a new one is generated, and 'otherValue' is set to 'someValue'), I see the following response to <code>es/my_index/_search?pretty</code>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>...\n&quot;hits&quot; : [\n{\n &quot;_index&quot; : &quot;my_index&quot;,\n &quot;_type&quot; : &quot;_doc&quot;,\n &quot;_id&quot; : &quot;AUTO_GENERATED_ID&quot;,\n &quot;_score&quot; : 1.0,\n &quot;_source&quot; : {\n    &quot;_class&quot; : &quot;a.b.c.MyDocument&quot;,\n    &quot;otherField&quot;: &quot;someValue&quot;\n }\n}\n]\n</code></pre>\n<p>The result of the <code>save</code> method is returning a java object with id field set and of course if I retrieve the document through the repository, the id is being populated in the java object and I can access it.</p>\n<p>However, the document itself does not contain the field &quot;id&quot; inside source.\n<strong>How can i achieve this</strong> while I let the ES/Springdata handle the auto-generation of Ids?</p>\n<p>I need this because I want to apply some sorting based on other fields and the id. As a workaround I wanted to do it on &quot;_id&quot;, but I get the following warning in the console: <code>299 loading the fielddata on the _id field is deprecated and will be removed in future versions. If you require sorting or aggregating on this field you should also include the id in the body of the documents, and map this field as a keyword field that has [doc_values] enabled</code></p>\n<p>PS: If I do some modifications on the document retrieved from the repository and <code>save</code> it again, the document will now have the &quot;id&quot; field populated, but this means that I would have to double the operations on ES while trying to index a document.</p>\n<hr />\n<ul>\n<li>springdata-elasticsearch version: 4.4.5</li>\n<li>es version: 7.17.7</li>\n</ul>\n"},{"tags":["java","spring-boot","spring-integration","stomp"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699024807,"creation_date":1699024807,"answer_id":77417847,"question_id":77417526,"body_markdown":"That&#39;s correct. You can share `StompSessionManager` between different endpoints. Its goal is to manage a single client session connected to STOMP broker.\r\n\r\nWe even have an integration test in the project where we share `StompSessionManager`:\r\n\r\n\t\t@Bean\r\n\t\tpublic StompSessionManager stompSessionManager() {\r\n\t\t\tAbstractStompSessionManager stompSessionManager = new ReactorNettyTcpStompSessionManager(stompClient);\r\n\t\t\tstompSessionManager.setAutoReceipt(true);\r\n\t\t\tstompSessionManager.setRecoveryInterval(500);\r\n\t\t\treturn stompSessionManager;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic PollableChannel stompInputChannel() {\r\n\t\t\treturn new QueueChannel();\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\tpublic StompInboundChannelAdapter stompInboundChannelAdapter() {\r\n\t\t\tStompInboundChannelAdapter adapter =\r\n\t\t\t\t\tnew StompInboundChannelAdapter(stompSessionManager(), &quot;/topic/myTopic&quot;);\r\n\t\t\tadapter.setOutputChannel(stompInputChannel());\r\n\t\t\treturn adapter;\r\n\t\t}\r\n\r\n\t\t@Bean\r\n\t\t@ServiceActivator(inputChannel = &quot;stompOutputChannel&quot;)\r\n\t\tpublic MessageHandler stompMessageHandler() {\r\n\t\t\tStompMessageHandler handler = new StompMessageHandler(stompSessionManager());\r\n\t\t\thandler.setDestination(&quot;/topic/myTopic&quot;);\r\n\t\t\thandler.setConnectTimeout(1000);\r\n\t\t\treturn handler;\r\n\t\t}\r\n\r\nSee more info in the source code: https://github.com/spring-projects/spring-integration/blob/main/spring-integration-stomp/src/test/java/org/springframework/integration/stomp/client/StompServerIntegrationTests.java","title":"Can same StompSessionManager instance be used for different destinations?","body":"<p>That's correct. You can share <code>StompSessionManager</code> between different endpoints. Its goal is to manage a single client session connected to STOMP broker.</p>\n<p>We even have an integration test in the project where we share <code>StompSessionManager</code>:</p>\n<pre><code>    @Bean\n    public StompSessionManager stompSessionManager() {\n        AbstractStompSessionManager stompSessionManager = new ReactorNettyTcpStompSessionManager(stompClient);\n        stompSessionManager.setAutoReceipt(true);\n        stompSessionManager.setRecoveryInterval(500);\n        return stompSessionManager;\n    }\n\n    @Bean\n    public PollableChannel stompInputChannel() {\n        return new QueueChannel();\n    }\n\n    @Bean\n    public StompInboundChannelAdapter stompInboundChannelAdapter() {\n        StompInboundChannelAdapter adapter =\n                new StompInboundChannelAdapter(stompSessionManager(), &quot;/topic/myTopic&quot;);\n        adapter.setOutputChannel(stompInputChannel());\n        return adapter;\n    }\n\n    @Bean\n    @ServiceActivator(inputChannel = &quot;stompOutputChannel&quot;)\n    public MessageHandler stompMessageHandler() {\n        StompMessageHandler handler = new StompMessageHandler(stompSessionManager());\n        handler.setDestination(&quot;/topic/myTopic&quot;);\n        handler.setConnectTimeout(1000);\n        return handler;\n    }\n</code></pre>\n<p>See more info in the source code: <a href=\"https://github.com/spring-projects/spring-integration/blob/main/spring-integration-stomp/src/test/java/org/springframework/integration/stomp/client/StompServerIntegrationTests.java\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-integration/blob/main/spring-integration-stomp/src/test/java/org/springframework/integration/stomp/client/StompServerIntegrationTests.java</a></p>\n"}],"owner":{"account_id":15738373,"reputation":3,"user_id":11356615,"display_name":"Hernando Scheidl"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77417847,"answer_count":1,"score":0,"last_activity_date":1699024807,"creation_date":1699022230,"question_id":77417526,"body_markdown":"I have one spring integration flow with `StompInboundChannelAdapter` listening for incoming messages from one destination and another integration flow with `StompMessageHandler` for sending messages to a different destination. Can I use the same instance of `StompSessionManager` for both? Or each flow should have its own instance? The STOMP Server is the same.\r\n\r\nI tried with a singleton instance with the following configuration and it seems to work, but I don&#39;t know if this is the correct way or I&#39;m missing something:\r\n\r\n```\r\n@Configuration\r\npublic class StompSessionManagerConfiguration {\r\n\r\n  @Value(&quot;${host}&quot;)\r\n  private String host;\r\n\r\n  @Value(&quot;${port}&quot;)\r\n  private Integer port;\r\n\r\n  @Value(&quot;${login}&quot;)\r\n  private String login;\r\n\r\n  @Value(&quot;${passcode}&quot;)\r\n  private String passcode;\r\n\r\n  @Bean\r\n  public StompSessionManager stompSessionManager() {\r\n    ReactorNettyTcpStompClient stompClient = new ReactorNettyTcpStompClient(host, port);\r\n    ReactorNettyTcpStompSessionManager stompSessionManager = \r\n        new ReactorNettyTcpStompSessionManager(stompClient);\r\n    stompSessionManager.setConnectHeaders(connectHeaders());\r\n    return stompSessionManager;\r\n  }\r\n\r\n  public StompHeaders connectHeaders() {\r\n    StompHeaders connectHeaders = new StompHeaders();\r\n    connectHeaders.setLogin(login);\r\n    connectHeaders.setPasscode(passcode);\r\n    return connectHeaders;\r\n  }\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\npublic class IncomingMessageFlowConfiguration {\r\n\r\n  @Autowired\r\n  private StompSessionManager stompSessionManager;\r\n\r\n  @Bean\r\n  public IntegrationFlow incomingMessageFlow() {\r\n    return IntegrationFlow.from(stompInboundChannelAdapter())\r\n        .channel(&quot;incomingMessageChannel&quot;).get();\r\n  }\r\n\r\n  public StompInboundChannelAdapter stompInboundChannelAdapter() {\r\n    StompInboundChannelAdapter adapter = \r\n        new StompInboundChannelAdapter(stompSessionManager, &quot;incomingDestination&quot;);\r\n    adapter.setPayloadType(byte[].class);\r\n    return adapter;\r\n  }\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\npublic class OutgoingMessageFlowConfiguration {\r\n\r\n  @Autowired\r\n  private StompSessionManager stompSessionManager;\r\n\r\n  @Bean\r\n  public IntegrationFlow outgoingMessageFlow() {\r\n    return IntegrationFlow.from(&quot;outgoingMessageChannel&quot;)\r\n        .handle(stompMessageHandler()).get();\r\n  }\r\n\r\n  public StompMessageHandler stompMessageHandler() {\r\n    StompMessageHandler stompMessageHandler = new StompMessageHandler(stompSessionManager);\r\n    stompMessageHandler.setDestination(&quot;outgoingDestination&quot;);\r\n    return stompMessageHandler;\r\n  }\r\n}\r\n```","title":"Can same StompSessionManager instance be used for different destinations?","body":"<p>I have one spring integration flow with <code>StompInboundChannelAdapter</code> listening for incoming messages from one destination and another integration flow with <code>StompMessageHandler</code> for sending messages to a different destination. Can I use the same instance of <code>StompSessionManager</code> for both? Or each flow should have its own instance? The STOMP Server is the same.</p>\n<p>I tried with a singleton instance with the following configuration and it seems to work, but I don't know if this is the correct way or I'm missing something:</p>\n<pre><code>@Configuration\npublic class StompSessionManagerConfiguration {\n\n  @Value(&quot;${host}&quot;)\n  private String host;\n\n  @Value(&quot;${port}&quot;)\n  private Integer port;\n\n  @Value(&quot;${login}&quot;)\n  private String login;\n\n  @Value(&quot;${passcode}&quot;)\n  private String passcode;\n\n  @Bean\n  public StompSessionManager stompSessionManager() {\n    ReactorNettyTcpStompClient stompClient = new ReactorNettyTcpStompClient(host, port);\n    ReactorNettyTcpStompSessionManager stompSessionManager = \n        new ReactorNettyTcpStompSessionManager(stompClient);\n    stompSessionManager.setConnectHeaders(connectHeaders());\n    return stompSessionManager;\n  }\n\n  public StompHeaders connectHeaders() {\n    StompHeaders connectHeaders = new StompHeaders();\n    connectHeaders.setLogin(login);\n    connectHeaders.setPasscode(passcode);\n    return connectHeaders;\n  }\n}\n</code></pre>\n<pre><code>@Configuration\npublic class IncomingMessageFlowConfiguration {\n\n  @Autowired\n  private StompSessionManager stompSessionManager;\n\n  @Bean\n  public IntegrationFlow incomingMessageFlow() {\n    return IntegrationFlow.from(stompInboundChannelAdapter())\n        .channel(&quot;incomingMessageChannel&quot;).get();\n  }\n\n  public StompInboundChannelAdapter stompInboundChannelAdapter() {\n    StompInboundChannelAdapter adapter = \n        new StompInboundChannelAdapter(stompSessionManager, &quot;incomingDestination&quot;);\n    adapter.setPayloadType(byte[].class);\n    return adapter;\n  }\n}\n</code></pre>\n<pre><code>@Configuration\npublic class OutgoingMessageFlowConfiguration {\n\n  @Autowired\n  private StompSessionManager stompSessionManager;\n\n  @Bean\n  public IntegrationFlow outgoingMessageFlow() {\n    return IntegrationFlow.from(&quot;outgoingMessageChannel&quot;)\n        .handle(stompMessageHandler()).get();\n  }\n\n  public StompMessageHandler stompMessageHandler() {\n    StompMessageHandler stompMessageHandler = new StompMessageHandler(stompSessionManager);\n    stompMessageHandler.setDestination(&quot;outgoingDestination&quot;);\n    return stompMessageHandler;\n  }\n}\n</code></pre>\n"},{"tags":["java","pdf","docx","docx4j"],"comments":[{"owner":{"account_id":30580,"reputation":15487,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1699139323,"post_id":77417826,"comment_id":136494311,"body_markdown":"Could you post a docx somewhere which exhibits the issue?  Docx4J.FLAG_EXPORT_PREFER_NONXSL is faster than FLAG_EXPORT_PREFER_XSL but no feature parity.  For other PDF conversion methods, please see https://www.docx4java.org/blog/2020/09/office-pptxxlsxdocx-to-pdf-to-in-docx4j-8-2-3/","body":"Could you post a docx somewhere which exhibits the issue?  Docx4J.FLAG_EXPORT_PREFER_NONXSL is faster than FLAG_EXPORT_PREFER_XSL but no feature parity.  For other PDF conversion methods, please see <a href=\"https://www.docx4java.org/blog/2020/09/office-pptxxlsxdocx-to-pdf-to-in-docx4j-8-2-3/\" rel=\"nofollow noreferrer\">docx4java.org/blog/2020/09/&hellip;</a>"},{"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"score":0,"creation_date":1699256626,"post_id":77417826,"comment_id":136503846,"body_markdown":"Hi Jason, due to sensitivity and confidentiality its possible for me to share the Docx file. But its a PNG image within a Single Cell Hidden Table. FLAG_EXPORT_PREFER_XSL is able to convert that. I guess PNG file is supported, right? When you say Docx4J.FLAG_EXPORT_PREFER_NONXSL is not feature parity, does that mean it does support that PNG conversion?","body":"Hi Jason, due to sensitivity and confidentiality its possible for me to share the Docx file. But its a PNG image within a Single Cell Hidden Table. FLAG_EXPORT_PREFER_XSL is able to convert that. I guess PNG file is supported, right? When you say Docx4J.FLAG_EXPORT_PREFER_NONXSL is not feature parity, does that mean it does support that PNG conversion?"},{"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"score":0,"creation_date":1699256737,"post_id":77417826,"comment_id":136503871,"body_markdown":"And secondly, is there any aspect of the conversion code (using FLAG_EXPORT_PREFER_XSL) that can be initialized statically or any potential improvements via configuration, so that overall conversion time can be reduced? The entire process takes about 2 mins for me, which is unacceptable for users.","body":"And secondly, is there any aspect of the conversion code (using FLAG_EXPORT_PREFER_XSL) that can be initialized statically or any potential improvements via configuration, so that overall conversion time can be reduced? The entire process takes about 2 mins for me, which is unacceptable for users."},{"owner":{"account_id":30580,"reputation":15487,"user_id":1031689,"accept_rate":67,"display_name":"JasonPlutext"},"score":0,"creation_date":1699299572,"post_id":77417826,"comment_id":136511801,"body_markdown":"png? Yes.   Conversion time:  how many pages is your docx?","body":"png? Yes.   Conversion time:  how many pages is your docx?"},{"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"score":0,"creation_date":1699353482,"post_id":77417826,"comment_id":136518135,"body_markdown":"Yes, it is .PNG file. And my document has somewhere around 80-90 pages on average","body":"Yes, it is .PNG file. And my document has somewhere around 80-90 pages on average"}],"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699024705,"creation_date":1699024705,"question_id":77417826,"body_markdown":"I am fairly new to Docx4j library. I&#39;m trying to convert a DOCX file to PDF using the Docx4j library and I want to use the non-XSL transformation method (Docx4J.FLAG_EXPORT_PREFER_NONXSL) to reduce the overall processing/conversion time (the whole conversion process is taking approximately 2mins). But I&#39;m encountering an exception related to image handling.\r\n\r\nHere&#39;s the exception I&#39;m facing:\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;org.docx4j.model.images.WordXmlPictureE20.createXslFoImageElement()&quot; because &quot;converter&quot; is null\r\n    at org.docx4j.model.images.WordXmlPictureE20.createXslFoImgE20 (WordXmlPictureE20.java)\r\n\r\nThe above exception suggests that there&#39;s an issue with image conversion during the DOCX to PDF transformation. However, I&#39;m not sure why this is occurring as I expect Docx4j to handle images with its default settings.\r\n\r\nHere is the code snippet that leads to the exception:\r\n\r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.OutputStream;\r\n    import org.docx4j.Docx4J;\r\n    import org.docx4j.convert.out.FOSettings;\r\n    import org.docx4j.openpackaging.packages.WordprocessingMLPackage;\r\n    \r\n    public class DocxToPDFConverter {\r\n    \r\n        public static void convertToPDF(File docxFile, File pdfFile) throws Exception {\r\n            // Load the DOCX into a WordprocessingMLPackage\r\n            WordprocessingMLPackage wordMLPackage = Docx4J.load(docxFile);\r\n            wordMLPackage.setFontMapper(new BestMatchingMapper());\r\n    \r\n            // Configure FO settings\r\n            FOSettings foSettings = Docx4J.createFOSettings();\r\n            foSettings.setWmlPackage(wordMLPackage);\r\n            foSettings.setApacheFopMime(FOSettings.MIME_PDF);\r\n    \r\n            // Prepare the output stream\r\n            try (OutputStream out = new FileOutputStream(pdfFile)) {\r\n                // Convert to PDF with non-XSL transformation\r\n                Docx4J.toFO(foSettings, out, Docx4J.FLAG_EXPORT_PREFER_NONXSL);\r\n            }\r\n        }\r\n\r\nAttempts to Resolve:\r\n\r\nEnsured all required jars are on the classpath. I have    docx4j-JAXB-ReferenceImpl, docx4j-export-fo of version 11.4.9 in my pom.xml\r\n\r\nExperimented with FLAG_EXPORT_PREFER_NONXSL for a faster    conversion, but no significant improvement in response time was noted    because of exception.\r\n\r\nChecked the image handler setup as per default Docx4J configuration.\r\n\r\nQuestions:\r\n\r\n1. How can I fix the &quot;converter is null&quot; issue to successfully complete the DOCX to PDF conversion?\r\n\r\n2. Are there any optimizations I can apply to reduce the response time when converting documents using Docx4J.toPDF()? I have already tried using the non-XSLT based conversion (FLAG_EXPORT_PREFER_NONXSL), but the performance improvement isn&#39;t sufficient.\r\n\r\nEnvironment:\r\n\r\nJava version: 17, and \r\nDocx4J version: 11.4.9 (docx4j-export-fo in classpath)\r\n\r\nreference: https://github.com/plutext/docx4j/blob/VERSION_11_4_8/docx4j-samples-docx-export-fo/src/main/java/org/docx4j/samples/ConvertOutPDFviaXSLFO.java\r\n\r\nAny insights, suggestions, or optimizations that could address these issues would be highly appreciated. Thank you for your time and help!","title":"Nullpointer Exception when converting DOCX to PDF using Docx4j with non-XSL transformation","body":"<p>I am fairly new to Docx4j library. I'm trying to convert a DOCX file to PDF using the Docx4j library and I want to use the non-XSL transformation method (Docx4J.FLAG_EXPORT_PREFER_NONXSL) to reduce the overall processing/conversion time (the whole conversion process is taking approximately 2mins). But I'm encountering an exception related to image handling.</p>\n<p>Here's the exception I'm facing:</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.docx4j.model.images.WordXmlPictureE20.createXslFoImageElement()&quot; because &quot;converter&quot; is null\nat org.docx4j.model.images.WordXmlPictureE20.createXslFoImgE20 (WordXmlPictureE20.java)\n</code></pre>\n<p>The above exception suggests that there's an issue with image conversion during the DOCX to PDF transformation. However, I'm not sure why this is occurring as I expect Docx4j to handle images with its default settings.</p>\n<p>Here is the code snippet that leads to the exception:</p>\n<pre><code>import java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.OutputStream;\nimport org.docx4j.Docx4J;\nimport org.docx4j.convert.out.FOSettings;\nimport org.docx4j.openpackaging.packages.WordprocessingMLPackage;\n\npublic class DocxToPDFConverter {\n\n    public static void convertToPDF(File docxFile, File pdfFile) throws Exception {\n        // Load the DOCX into a WordprocessingMLPackage\n        WordprocessingMLPackage wordMLPackage = Docx4J.load(docxFile);\n        wordMLPackage.setFontMapper(new BestMatchingMapper());\n\n        // Configure FO settings\n        FOSettings foSettings = Docx4J.createFOSettings();\n        foSettings.setWmlPackage(wordMLPackage);\n        foSettings.setApacheFopMime(FOSettings.MIME_PDF);\n\n        // Prepare the output stream\n        try (OutputStream out = new FileOutputStream(pdfFile)) {\n            // Convert to PDF with non-XSL transformation\n            Docx4J.toFO(foSettings, out, Docx4J.FLAG_EXPORT_PREFER_NONXSL);\n        }\n    }\n</code></pre>\n<p>Attempts to Resolve:</p>\n<p>Ensured all required jars are on the classpath. I have    docx4j-JAXB-ReferenceImpl, docx4j-export-fo of version 11.4.9 in my pom.xml</p>\n<p>Experimented with FLAG_EXPORT_PREFER_NONXSL for a faster    conversion, but no significant improvement in response time was noted    because of exception.</p>\n<p>Checked the image handler setup as per default Docx4J configuration.</p>\n<p>Questions:</p>\n<ol>\n<li><p>How can I fix the &quot;converter is null&quot; issue to successfully complete the DOCX to PDF conversion?</p>\n</li>\n<li><p>Are there any optimizations I can apply to reduce the response time when converting documents using Docx4J.toPDF()? I have already tried using the non-XSLT based conversion (FLAG_EXPORT_PREFER_NONXSL), but the performance improvement isn't sufficient.</p>\n</li>\n</ol>\n<p>Environment:</p>\n<p>Java version: 17, and\nDocx4J version: 11.4.9 (docx4j-export-fo in classpath)</p>\n<p>reference: <a href=\"https://github.com/plutext/docx4j/blob/VERSION_11_4_8/docx4j-samples-docx-export-fo/src/main/java/org/docx4j/samples/ConvertOutPDFviaXSLFO.java\" rel=\"nofollow noreferrer\">https://github.com/plutext/docx4j/blob/VERSION_11_4_8/docx4j-samples-docx-export-fo/src/main/java/org/docx4j/samples/ConvertOutPDFviaXSLFO.java</a></p>\n<p>Any insights, suggestions, or optimizations that could address these issues would be highly appreciated. Thank you for your time and help!</p>\n"},{"tags":["java","version"],"answers":[{"comments":[{"owner":{"account_id":1115893,"reputation":6132,"user_id":1105214,"accept_rate":69,"display_name":"samus"},"score":0,"creation_date":1529338573,"post_id":9170852,"comment_id":88827389,"body_markdown":"Is there a way to echo the major version number (class version) directly from **javac**, without using an existing class like, `javap -verbose MyClass`?","body":"Is there a way to echo the major version number (class version) directly from <b>javac</b>, without using an existing class like, <code>javap -verbose MyClass</code>?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1565882119,"post_id":9170852,"comment_id":101491981,"body_markdown":"No there isn&#39;t.","body":"No there isn&#39;t."},{"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"score":1,"creation_date":1674741578,"post_id":9170852,"comment_id":132781389,"body_markdown":"@samus It&#39;s possible from `java`command as shown in [this answer](https://stackoverflow.com/a/75247102/2834978).","body":"@samus It&#39;s possible from <code>java</code>command as shown in <a href=\"https://stackoverflow.com/a/75247102/2834978\">this answer</a>."}],"tags":[],"owner":{"account_id":1117243,"reputation":6211,"user_id":1106317,"display_name":"Michael"},"comment_count":3,"down_vote_count":2,"up_vote_count":138,"is_accepted":true,"score":136,"last_activity_date":1328587559,"creation_date":1328587559,"answer_id":9170852,"question_id":9170832,"body_markdown":"These come from the class version.  If you try to load something compiled for java 6 in a java 5 runtime you&#39;ll get the error, incompatible class version, got 50, expected 49.  Or something like that.\r\n\r\nSee [here][1] in byte offset 7 for more info.\r\n\r\nAdditional info can also be found [here][2].\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_class_file#General_layout\r\n  [2]: http://javarevisited.blogspot.com/2011/07/javalangunsupportedclassversionerror.html","title":"List of Java class file format major version numbers?","body":"<p>These come from the class version.  If you try to load something compiled for java 6 in a java 5 runtime you'll get the error, incompatible class version, got 50, expected 49.  Or something like that.</p>\n\n<p>See <a href=\"http://en.wikipedia.org/wiki/Java_class_file#General_layout\">here</a> in byte offset 7 for more info.</p>\n\n<p>Additional info can also be found <a href=\"http://javarevisited.blogspot.com/2011/07/javalangunsupportedclassversionerror.html\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":2051916,"reputation":291,"user_id":1830729,"display_name":"Peter"},"comment_count":0,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1353097016,"creation_date":1353097016,"answer_id":13423798,"question_id":9170832,"body_markdown":"I found a list of Java class file versions on the Wikipedia page that describes the class file format:\r\n\r\nhttp://en.wikipedia.org/wiki/Java_class_file#General_layout\r\n\r\nUnder byte offset 6 &amp; 7, the versions are listed with which Java VM they correspond to.","title":"List of Java class file format major version numbers?","body":"<p>I found a list of Java class file versions on the Wikipedia page that describes the class file format:</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Java_class_file#General_layout\">http://en.wikipedia.org/wiki/Java_class_file#General_layout</a></p>\n\n<p>Under byte offset 6 &amp; 7, the versions are listed with which Java VM they correspond to.</p>\n"},{"tags":[],"owner":{"account_id":15696344,"reputation":501,"user_id":11325779,"display_name":"JeffersonSousa"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1569852429,"creation_date":1569850533,"answer_id":58169053,"question_id":9170832,"body_markdown":"If you&#39;re having some problem about &quot;error compiler of class file&quot;, it&#39;s possible to resolve this by changing the project&#39;s JRE to its correspondent through Eclipse.\r\n\r\n1. Build path\r\n2. Configure build path\r\n3. Change library to correspondent of table that friend shows last.\r\n4. Create &quot;jar file&quot; and compile and execute. \r\n\r\nI did that and it worked. \r\n","title":"List of Java class file format major version numbers?","body":"<p>If you're having some problem about \"error compiler of class file\", it's possible to resolve this by changing the project's JRE to its correspondent through Eclipse.</p>\n\n<ol>\n<li>Build path</li>\n<li>Configure build path</li>\n<li>Change library to correspondent of table that friend shows last.</li>\n<li>Create \"jar file\" and compile and execute. </li>\n</ol>\n\n<p>I did that and it worked. </p>\n"},{"comments":[{"owner":{"account_id":1620219,"reputation":2227,"user_id":1496974,"display_name":"frmbelz"},"score":0,"creation_date":1693327435,"post_id":58404586,"comment_id":135744947,"body_markdown":"`file /path/to/a.class` also returns a major version of a class while `java -XshowSettings:properties -version` returns local `java.class.version`","body":"<code>file &#47;path&#47;to&#47;a.class</code> also returns a major version of a class while <code>java -XshowSettings:properties -version</code> returns local <code>java.class.version</code>"}],"tags":[],"owner":{"account_id":4714434,"reputation":41866,"user_id":3814029,"accept_rate":67,"display_name":"Andy Guibert"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1652274924,"creation_date":1571189764,"answer_id":58404586,"question_id":9170832,"body_markdown":"If you have a class file at `build/com/foo/Hello.class`, you can check what java version it is compiled at using the command:\r\n\r\n    javap -v &lt;path to class file&gt; | grep &quot;major&quot;\r\n\r\nExample usage:\r\n\r\n```\r\n$ javap -v build/classes/com/example/Book.class | grep major\r\n  \r\nmajor version: 57\r\n```\r\n\r\nAccording to the table in the OP, major version 57 means the class file was compiled to JDK 13 bytecode level","title":"List of Java class file format major version numbers?","body":"<p>If you have a class file at <code>build/com/foo/Hello.class</code>, you can check what java version it is compiled at using the command:</p>\n<pre><code>javap -v &lt;path to class file&gt; | grep &quot;major&quot;\n</code></pre>\n<p>Example usage:</p>\n<pre><code>$ javap -v build/classes/com/example/Book.class | grep major\n  \nmajor version: 57\n</code></pre>\n<p>According to the table in the OP, major version 57 means the class file was compiled to JDK 13 bytecode level</p>\n"},{"tags":[],"owner":{"display_name":"user15793316"},"comment_count":0,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1699023930,"creation_date":1620829088,"answer_id":67505467,"question_id":9170832,"body_markdown":"Official source for major version number:\r\n\r\n[Java SE 21 Virtual Machine Specification, Chapter 4. The class File Format](https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.1-200-B.2)\r\n\r\nThe latest *published* version of the JVM spec can be found [here][1].\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/","title":"List of Java class file format major version numbers?","body":"<p>Official source for major version number:</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.1-200-B.2\" rel=\"nofollow noreferrer\">Java SE 21 Virtual Machine Specification, Chapter 4. The class File Format</a></p>\n<p>The latest <em>published</em> version of the JVM spec can be found <a href=\"https://docs.oracle.com/javase/specs/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":1531824,"reputation":3794,"user_id":1428862,"display_name":"Scott Carlson"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1622640055,"creation_date":1622640055,"answer_id":67805986,"question_id":9170832,"body_markdown":"I use javap in my .lessfilter for classes, so I can decompile and know what version they were compiled with directly\r\n\r\n    *.class)\r\n\techo &quot;/** &quot;\r\n\tjavap -verbose &quot;$1&quot; | grep version | sed -e &#39;s/50/Java6/&#39; -e &#39;s/51/Java7/&#39; -e &#39;s/52/Java8/&#39; -e &#39;s/53/Java9/&#39; -e &#39;s/54/Java10/&#39; -e &#39;s/55/Java11/&#39; -e &#39;s/56/Java12/&#39; -e &#39;s/57/Java13/&#39;\r\n\techo &quot; **/&quot;\r\n\tjava -jar ~/bin/cfr-0.150.jar &quot;$1&quot; | enscript --color --language=ansi --highlight=java -o - -q\r\n\t;;\r\n\r\n(tried to add as a comment to previous answer, but couldn&#39;t get the code to be formatted, and thought this might be useful for others)","title":"List of Java class file format major version numbers?","body":"<p>I use javap in my .lessfilter for classes, so I can decompile and know what version they were compiled with directly</p>\n<pre><code>*.class)\necho &quot;/** &quot;\njavap -verbose &quot;$1&quot; | grep version | sed -e 's/50/Java6/' -e 's/51/Java7/' -e 's/52/Java8/' -e 's/53/Java9/' -e 's/54/Java10/' -e 's/55/Java11/' -e 's/56/Java12/' -e 's/57/Java13/'\necho &quot; **/&quot;\njava -jar ~/bin/cfr-0.150.jar &quot;$1&quot; | enscript --color --language=ansi --highlight=java -o - -q\n;;\n</code></pre>\n<p>(tried to add as a comment to previous answer, but couldn't get the code to be formatted, and thought this might be useful for others)</p>\n"},{"tags":[],"owner":{"account_id":294314,"reputation":4599,"user_id":598141,"accept_rate":44,"display_name":"Ian W"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1651278051,"creation_date":1644271291,"answer_id":71025980,"question_id":9170832,"body_markdown":"*(Really an extended comment than an answer ..)*\r\n\r\nThe question was regarding &quot;where does the list of versions come from&quot;.\r\n\r\nThat was answered in [this response](https://stackoverflow.com/a/67505467/598141), which references the JAVA SE Specification on: [&quot;The `class` File Format&quot;][1]. Seems that&#39;s pretty authoritative (it&#39;s also referenced in the [Wiki][2] for the byte 6 (major version) values) and should be the accepted answer. \r\n\r\n---\r\nSeveral answers seem to focus on how to determine the value using `javap` or not using it. Those should be separate questions. Nevertheless, a non- `javap` means of finding the version is unix command [`file`][3]. `file` reads the [`magic`][4], which is specified in the [ClassFile structure][5].\r\n\r\nie: `file myClass.class`, or more elegantly, `file -b myClass.class | awk -F&#39;,&#39; &#39;{print $NF}&#39;`\r\n\r\neg: \r\n\r\n    $ find * -name &quot;*.class&quot; -exec file -b {} \\; | awk -F&#39;,&#39; &#39;{print $NF}&#39; | sort -u\r\n     version 45.3\r\n     version 50.0 (Java 1.6)\r\n     version 52.0 (Java 1.8)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.1-200-B.2\r\n  [2]: https://en.wikipedia.org/wiki/Java_class_file#General_layout\r\n  [3]: https://linux.die.net/man/1/file\r\n  [4]: https://linux.die.net/man/5/magic\r\n  [5]: https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.1","title":"List of Java class file format major version numbers?","body":"<p><em>(Really an extended comment than an answer ..)</em></p>\n<p>The question was regarding &quot;where does the list of versions come from&quot;.</p>\n<p>That was answered in <a href=\"https://stackoverflow.com/a/67505467/598141\">this response</a>, which references the JAVA SE Specification on: <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.1-200-B.2\" rel=\"nofollow noreferrer\">&quot;The <code>class</code> File Format&quot;</a>. Seems that's pretty authoritative (it's also referenced in the <a href=\"https://en.wikipedia.org/wiki/Java_class_file#General_layout\" rel=\"nofollow noreferrer\">Wiki</a> for the byte 6 (major version) values) and should be the accepted answer.</p>\n<hr />\n<p>Several answers seem to focus on how to determine the value using <code>javap</code> or not using it. Those should be separate questions. Nevertheless, a non- <code>javap</code> means of finding the version is unix command <a href=\"https://linux.die.net/man/1/file\" rel=\"nofollow noreferrer\"><code>file</code></a>. <code>file</code> reads the <a href=\"https://linux.die.net/man/5/magic\" rel=\"nofollow noreferrer\"><code>magic</code></a>, which is specified in the <a href=\"https://docs.oracle.com/javase/specs/jvms/se17/html/jvms-4.html#jvms-4.1\" rel=\"nofollow noreferrer\">ClassFile structure</a>.</p>\n<p>ie: <code>file myClass.class</code>, or more elegantly, <code>file -b myClass.class | awk -F',' '{print $NF}'</code></p>\n<p>eg:</p>\n<pre><code>$ find * -name &quot;*.class&quot; -exec file -b {} \\; | awk -F',' '{print $NF}' | sort -u\n version 45.3\n version 50.0 (Java 1.6)\n version 52.0 (Java 1.8)\n</code></pre>\n"}],"owner":{"account_id":94158,"reputation":8434,"user_id":257233,"accept_rate":88,"display_name":"Robert Mark Bram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":476780,"favorite_count":0,"down_vote_count":1,"up_vote_count":563,"accepted_answer_id":9170852,"answer_count":7,"score":562,"last_activity_date":1699024124,"creation_date":1328587267,"question_id":9170832,"body_markdown":"I saw this list of major version numbers for Java in another post:\r\n\r\n\r\n|Java| Major version |\r\n|--:|:---|\r\n| 22 | 66 |\r\n| 21 | 65 |\r\n| 20 | 64 |\r\n| 19 | 63 |\r\n| 18 | 62 |\r\n| 17 | 61 |\r\n| 16 | 60 |\r\n| 15 | 59 |\r\n| 14 | 58 |\r\n| 13 | 57 |\r\n| 12 | 56 |\r\n| 11 | 55 |\r\n| 10 | 54 |\r\n| 9 | 53 |\r\n| 8 | 52 |\r\n| 7 | 51 |\r\n| 6 | 50 |\r\n| 5 | 49 |\r\n| 1.4 | 48 |\r\n| 1.3 | 47 |\r\n| 1.2 | 46 |\r\n| 1.1 | 45 |\r\n| 1.0.2 | 45 |\r\n\r\n\r\nWhere does this list come from? Is there a specific reference for this? Preferably something that shows minor versions too?","title":"List of Java class file format major version numbers?","body":"<p>I saw this list of major version numbers for Java in another post:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: right;\">Java</th>\n<th style=\"text-align: left;\">Major version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: right;\">22</td>\n<td style=\"text-align: left;\">66</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">21</td>\n<td style=\"text-align: left;\">65</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">20</td>\n<td style=\"text-align: left;\">64</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">19</td>\n<td style=\"text-align: left;\">63</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">18</td>\n<td style=\"text-align: left;\">62</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">17</td>\n<td style=\"text-align: left;\">61</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">16</td>\n<td style=\"text-align: left;\">60</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">15</td>\n<td style=\"text-align: left;\">59</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">14</td>\n<td style=\"text-align: left;\">58</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">13</td>\n<td style=\"text-align: left;\">57</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">12</td>\n<td style=\"text-align: left;\">56</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">11</td>\n<td style=\"text-align: left;\">55</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">10</td>\n<td style=\"text-align: left;\">54</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">9</td>\n<td style=\"text-align: left;\">53</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">8</td>\n<td style=\"text-align: left;\">52</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">7</td>\n<td style=\"text-align: left;\">51</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">6</td>\n<td style=\"text-align: left;\">50</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">5</td>\n<td style=\"text-align: left;\">49</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">1.4</td>\n<td style=\"text-align: left;\">48</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">1.3</td>\n<td style=\"text-align: left;\">47</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">1.2</td>\n<td style=\"text-align: left;\">46</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">1.1</td>\n<td style=\"text-align: left;\">45</td>\n</tr>\n<tr>\n<td style=\"text-align: right;\">1.0.2</td>\n<td style=\"text-align: left;\">45</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Where does this list come from? Is there a specific reference for this? Preferably something that shows minor versions too?</p>\n"},{"tags":["java","spring-boot","maven","openapi","openapi-generator"],"answers":[{"tags":[],"owner":{"account_id":29313159,"reputation":193,"user_id":22458461,"display_name":"fforfabio"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699023942,"creation_date":1695290129,"answer_id":77149137,"question_id":77141755,"body_markdown":"I tried on my own and I find this solution to your problem.  \r\n**First of all** I defined the enum under the **component/schemas** section like:\r\n\r\n    component:\r\n      schemas:\r\n        status:\r\n          type: string\r\n          enum: [scheduled, active]\r\n          default: active\r\nJust insert the default attribute to set that value as the default one for your request.  \r\n\r\n**Then** just add the reference in the path (do not insert the enum inside the {}) and complete the definition with all the responses you need:\r\n\r\n    paths:\r\n      /insertYourPathHere:\r\n        get:\r\n          parameters:\r\n            - name: productCode\r\n              in: query\r\n              required: false\r\n              schema:\r\n                $ref: &#39;#/components/schemas/status&#39;\r\n          responses: # add your api responses here\r\n\r\nFinally, insert your yaml inside the _src/main/resources_ folder and run the application with goal: _clean install_  \r\nAll your classes will be created and you will have this:\r\n\r\n    @Parameter(name = &quot;status&quot;, description = &quot;&quot;, schema = @Schema(description = &quot;&quot;, allowableValues = { &quot;scheduled&quot;, &quot;active&quot; }, defaultValue = &quot;active&quot;)) @Valid @RequestParam(value = &quot;status&quot;, required = false, defaultValue = &quot;active&quot;) Status status\r\n\r\nOne **final consideration**. If the parameter sent in the request will not match one of the value of your enum, an _IllegalArgumentException_ exception will be raised. So only the defined value of your enum will be accepted.\r\n    \r\n","title":"Enum query param does not work - openapi-generator","body":"<p>I tried on my own and I find this solution to your problem.<br />\n<strong>First of all</strong> I defined the enum under the <strong>component/schemas</strong> section like:</p>\n<pre><code>component:\n  schemas:\n    status:\n      type: string\n      enum: [scheduled, active]\n      default: active\n</code></pre>\n<p>Just insert the default attribute to set that value as the default one for your request.</p>\n<p><strong>Then</strong> just add the reference in the path (do not insert the enum inside the {}) and complete the definition with all the responses you need:</p>\n<pre><code>paths:\n  /insertYourPathHere:\n    get:\n      parameters:\n        - name: productCode\n          in: query\n          required: false\n          schema:\n            $ref: '#/components/schemas/status'\n      responses: # add your api responses here\n</code></pre>\n<p>Finally, insert your yaml inside the <em>src/main/resources</em> folder and run the application with goal: <em>clean install</em><br />\nAll your classes will be created and you will have this:</p>\n<pre><code>@Parameter(name = &quot;status&quot;, description = &quot;&quot;, schema = @Schema(description = &quot;&quot;, allowableValues = { &quot;scheduled&quot;, &quot;active&quot; }, defaultValue = &quot;active&quot;)) @Valid @RequestParam(value = &quot;status&quot;, required = false, defaultValue = &quot;active&quot;) Status status\n</code></pre>\n<p>One <strong>final consideration</strong>. If the parameter sent in the request will not match one of the value of your enum, an <em>IllegalArgumentException</em> exception will be raised. So only the defined value of your enum will be accepted.</p>\n"}],"owner":{"account_id":9941523,"reputation":1018,"user_id":7357959,"display_name":"Tsvetoslav Tsvetkov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77149137,"answer_count":1,"score":1,"last_activity_date":1699023942,"creation_date":1695207771,"question_id":77141755,"body_markdown":"I use `openapi-generator-maven-plugin` version `7.0.0` for OpenAPI swagger spec to Java code generation.\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\r\n    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;${openapi.generator.version}&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;generate&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\nI defined a query param as an Enum value\r\n```\r\n  parameters:\r\n    - in: query\r\n      name: status\r\n      required: false\r\n      example: scheduled, active\r\n      schema:\r\n        type: string\r\n        enum: [scheduled, active]\r\n```\r\nbut in the plugin-generated class, the property is not defined as an Enum\r\n\r\n    @Parameter(name = &quot;status&quot;, in = ParameterIn.QUERY) @Valid @RequestParam(value = &quot;status&quot;, required = false) String status\r\n\r\nSo, the schema doesn&#39;t stop sending any values for this parameter. \r\n\r\nI followed the rules in the [Swagger doc][1] for Enum but suppose that&#39;s something plugin generation-specific\r\n \r\nIs there any way to define a param as Enum type and allow the query param to accept only predefined values?\r\n\r\n  [1]: https://swagger.io/docs/specification/data-models/enums/","title":"Enum query param does not work - openapi-generator","body":"<p>I use <code>openapi-generator-maven-plugin</code> version <code>7.0.0</code> for OpenAPI swagger spec to Java code generation.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;${openapi.generator.version}&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;generate&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I defined a query param as an Enum value</p>\n<pre><code>  parameters:\n    - in: query\n      name: status\n      required: false\n      example: scheduled, active\n      schema:\n        type: string\n        enum: [scheduled, active]\n</code></pre>\n<p>but in the plugin-generated class, the property is not defined as an Enum</p>\n<pre><code>@Parameter(name = &quot;status&quot;, in = ParameterIn.QUERY) @Valid @RequestParam(value = &quot;status&quot;, required = false) String status\n</code></pre>\n<p>So, the schema doesn't stop sending any values for this parameter.</p>\n<p>I followed the rules in the <a href=\"https://swagger.io/docs/specification/data-models/enums/\" rel=\"nofollow noreferrer\">Swagger doc</a> for Enum but suppose that's something plugin generation-specific</p>\n<p>Is there any way to define a param as Enum type and allow the query param to accept only predefined values?</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":16000784,"reputation":301,"user_id":11547512,"display_name":"Anthony Cathers"},"score":0,"creation_date":1643105129,"post_id":70845663,"comment_id":125245573,"body_markdown":"There are a lot of ways to achieve this. If you&#39;re using Spring Data JPA it makes life simple with projections. You can define DTOs/interfaces that are exactly what you want to return and return that from your repository.","body":"There are a lot of ways to achieve this. If you&#39;re using Spring Data JPA it makes life simple with projections. You can define DTOs/interfaces that are exactly what you want to return and return that from your repository."}],"answers":[{"tags":[],"owner":{"account_id":8170109,"reputation":484,"user_id":6150881,"display_name":"Rabhi salim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699023929,"creation_date":1643101279,"answer_id":70845909,"question_id":70845663,"body_markdown":"I think that the best case for you is using rest APIs, when you handle the logic in back-end part (DB side) and return list of your result having a boolean value per example : isOccupied; that indicates the status of the reservation.\r\n\r\n\r\n\r\n&quot; I have rooms, inside rooms I have desks and every desk can have one reservation&quot;: I think the challenge here is to do the right relationships (one to many and one to one) and mapping to your entities.\r\n\r\nTransient means ignore field in serialization, it can be applied to serialVersionUID for example.","title":"Spring Boot JPA sending information to the front","body":"<p>I think that the best case for you is using rest APIs, when you handle the logic in back-end part (DB side) and return list of your result having a boolean value per example : isOccupied; that indicates the status of the reservation.</p>\n<p>&quot; I have rooms, inside rooms I have desks and every desk can have one reservation&quot;: I think the challenge here is to do the right relationships (one to many and one to one) and mapping to your entities.</p>\n<p>Transient means ignore field in serialization, it can be applied to serialVersionUID for example.</p>\n"},{"tags":[],"owner":{"account_id":9360497,"reputation":191,"user_id":6946960,"display_name":"Oliver"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1643101660,"creation_date":1643101660,"answer_id":70845967,"question_id":70845663,"body_markdown":"OK, now you want to send the desk status(occupied or not) to the frontend. All you have to do is just simply send the status field and desk id in your database to the frontend.\r\n\r\nAnd you can consider using `@JsonIgnoreProperties(value={&#39;fields&#39;})` on your modal class to filter the fields you don&#39;t want to send back to frontend.\r\n\r\nFor example,\r\n```\r\n@JsonIgnoreProperties({ &quot;id&quot;, &quot;systemId&quot; })\r\nclass Student {\r\n   public int id;\r\n   public String systemId;\r\n   public int rollNo;\r\n   public String name;\r\n\r\n   Student(int id, int rollNo, String systemId, String name){\r\n      this.id = id;\r\n      this.systemId = systemId;\r\n      this.rollNo = rollNo;\r\n      this.name = name;\r\n   }\r\n}\r\n```\r\n\r\nThe result will be\r\n\r\n```\r\n{\r\n   &quot;rollNo&quot; : 11,\r\n   &quot;name&quot; : &quot;Mark&quot;\r\n}\r\n```","title":"Spring Boot JPA sending information to the front","body":"<p>OK, now you want to send the desk status(occupied or not) to the frontend. All you have to do is just simply send the status field and desk id in your database to the frontend.</p>\n<p>And you can consider using <code>@JsonIgnoreProperties(value={'fields'})</code> on your modal class to filter the fields you don't want to send back to frontend.</p>\n<p>For example,</p>\n<pre><code>@JsonIgnoreProperties({ &quot;id&quot;, &quot;systemId&quot; })\nclass Student {\n   public int id;\n   public String systemId;\n   public int rollNo;\n   public String name;\n\n   Student(int id, int rollNo, String systemId, String name){\n      this.id = id;\n      this.systemId = systemId;\n      this.rollNo = rollNo;\n      this.name = name;\n   }\n}\n</code></pre>\n<p>The result will be</p>\n<pre><code>{\n   &quot;rollNo&quot; : 11,\n   &quot;name&quot; : &quot;Mark&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":23306776,"reputation":67,"user_id":17386645,"display_name":"Mike1988B"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699023929,"creation_date":1643100151,"question_id":70845663,"body_markdown":"I am working on Spring Boot project that includes reservations. \r\nSo far, I have made everything to works fine, but I need to send the information to front side about reservations in database. \r\nI have rooms, inside rooms I have desks and every desk can have one reservation. \r\nNow, my problem is how to list all the reservations, send them to the front side with the info are they occupied or not. \r\nWhen front side see the result of my api to know exactly which desk have reservation, and which not. It is crucial for him to make front part of my application. \r\nI read something about @Transient annotation, so can I use something like that? ","title":"Spring Boot JPA sending information to the front","body":"<p>I am working on Spring Boot project that includes reservations.\nSo far, I have made everything to works fine, but I need to send the information to front side about reservations in database.\nI have rooms, inside rooms I have desks and every desk can have one reservation.\nNow, my problem is how to list all the reservations, send them to the front side with the info are they occupied or not.\nWhen front side see the result of my api to know exactly which desk have reservation, and which not. It is crucial for him to make front part of my application.\nI read something about @Transient annotation, so can I use something like that?</p>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1699015161,"post_id":77416307,"comment_id":136480728,"body_markdown":"Is this Java? Please tag the question with the programming language you are using, and also edit your question to include the specific version of the AWS SDK you are using.","body":"Is this Java? Please tag the question with the programming language you are using, and also edit your question to include the specific version of the AWS SDK you are using."},{"owner":{"account_id":1693221,"reputation":2947,"user_id":1555190,"accept_rate":72,"display_name":"user1555190"},"score":0,"creation_date":1699016667,"post_id":77416307,"comment_id":136481050,"body_markdown":"yes java, @MarkB","body":"yes java, @MarkB"},{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1699017200,"post_id":77416307,"comment_id":136481147,"body_markdown":"Possible duplicate of this question: https://stackoverflow.com/questions/34307552/how-to-get-aws-account-details-using-java-api-not-for-iam-user Try looking at all the answers there to see if any will work for you.","body":"Possible duplicate of this question: <a href=\"https://stackoverflow.com/questions/34307552/how-to-get-aws-account-details-using-java-api-not-for-iam-user\" title=\"how to get aws account details using java api not for iam user\">stackoverflow.com/questions/34307552/&hellip;</a> Try looking at all the answers there to see if any will work for you."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1699017700,"post_id":77416307,"comment_id":136481255,"body_markdown":"In this specific case, where you&#39;re using the default client, you could also create an instance of the default `StsClient` as described in the post that MarkB linked. In the general case, where you might configure clients independently, that won&#39;t work, and there&#39;s no way to do it (short of finding the credential provider, which is an internal implementation detail and likely to change).","body":"In this specific case, where you&#39;re using the default client, you could also create an instance of the default <code>StsClient</code> as described in the post that MarkB linked. In the general case, where you might configure clients independently, that won&#39;t work, and there&#39;s no way to do it (short of finding the credential provider, which is an internal implementation detail and likely to change)."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1699017724,"post_id":77416307,"comment_id":136481259,"body_markdown":"But this seems like an X-Y request. What is the _actual_ problem that you&#39;re trying to solve?","body":"But this seems like an X-Y request. What is the <i>actual</i> problem that you&#39;re trying to solve?"},{"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"score":0,"creation_date":1699024259,"post_id":77416307,"comment_id":136482765,"body_markdown":"@kdgregory it seems like the question is specifically about logging what role the AWS SDK is picking up *automatically*. That isn&#39;t an X-Y problem.","body":"@kdgregory it seems like the question is specifically about logging what role the AWS SDK is picking up <i>automatically</i>. That isn&#39;t an X-Y problem."},{"owner":{"account_id":18399,"reputation":38994,"user_id":42126,"accept_rate":100,"display_name":"kdgregory"},"score":0,"creation_date":1699027148,"post_id":77416307,"comment_id":136483520,"body_markdown":"@MarkB - perhaps it&#39;s a lack of imagination on my part, but I can&#39;t conceive of a reason to care about the role of a client _unless I&#39;m trying to diagnose some other problem_. :shrug:","body":"@MarkB - perhaps it&#39;s a lack of imagination on my part, but I can&#39;t conceive of a reason to care about the role of a client <i>unless I&#39;m trying to diagnose some other problem</i>. :shrug:"}],"answers":[{"tags":[],"owner":{"account_id":1693221,"reputation":2947,"user_id":1555190,"accept_rate":72,"display_name":"user1555190"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699023644,"creation_date":1699023644,"answer_id":77417692,"question_id":77416307,"body_markdown":"Answer taken from another post:\r\n\r\nUsing the AWS v2.0 Java SDK, you can use `software.amazon.awssdk.services.sts.StsClient#getCallerIdentity.`\r\n\r\nFirst add a dependency to the sts module, eg in gradle:\r\n\r\n    implementation platform(&quot;software.amazon.awssdk:bom:2.14.2&quot;)\r\n    implementation &quot;software.amazon.awssdk:sts&quot;\r\n\r\nThen:\r\n\r\n    log.info(&quot;{}&quot;, StsClient.create().getCallerIdentity());\r\n\r\nwill return:\r\n\r\n    GetCallerIdentityResponse(UserId=AJAIVBQXMUAJAIVBQXMU, Account=298232720644, Arn=arn:aws:iam::298232720644:user/adrian)","title":"How can i log the roles being used in my s3client","body":"<p>Answer taken from another post:</p>\n<p>Using the AWS v2.0 Java SDK, you can use <code>software.amazon.awssdk.services.sts.StsClient#getCallerIdentity.</code></p>\n<p>First add a dependency to the sts module, eg in gradle:</p>\n<pre><code>implementation platform(&quot;software.amazon.awssdk:bom:2.14.2&quot;)\nimplementation &quot;software.amazon.awssdk:sts&quot;\n</code></pre>\n<p>Then:</p>\n<pre><code>log.info(&quot;{}&quot;, StsClient.create().getCallerIdentity());\n</code></pre>\n<p>will return:</p>\n<pre><code>GetCallerIdentityResponse(UserId=AJAIVBQXMUAJAIVBQXMU, Account=298232720644, Arn=arn:aws:iam::298232720644:user/adrian)\n</code></pre>\n"}],"owner":{"account_id":1693221,"reputation":2947,"user_id":1555190,"accept_rate":72,"display_name":"user1555190"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699023644,"creation_date":1699010816,"question_id":77416307,"body_markdown":"WE normally inject our roles via system environment variables, currently we are having issues to detmerine which role is being assigned to the s3client\r\n\r\n    S3Client s3Client = S3Client.builder()\r\n                    .region(Region.of(region))\r\n                    .build();\r\n\r\nIs there anywhere i can log the roles that being used by the client?\r\n\r\n    implementation(&quot;software.amazon.awssdk:s3&quot;)\r\n    version &quot;2.18.21&quot;","title":"How can i log the roles being used in my s3client","body":"<p>WE normally inject our roles via system environment variables, currently we are having issues to detmerine which role is being assigned to the s3client</p>\n<pre><code>S3Client s3Client = S3Client.builder()\n                .region(Region.of(region))\n                .build();\n</code></pre>\n<p>Is there anywhere i can log the roles that being used by the client?</p>\n<pre><code>implementation(&quot;software.amazon.awssdk:s3&quot;)\nversion &quot;2.18.21&quot;\n</code></pre>\n"},{"tags":["java","eclipse","sql-server-2022"],"owner":{"account_id":29819580,"reputation":1,"user_id":22853158,"display_name":"Manh Vu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699023121,"creation_date":1699023121,"question_id":77417625,"body_markdown":"I have a website project in Eclipse and connect to database in SQL Server 2022. When I console my project, Eclipse has warned me: WARN: HHH000342: Could not obtain connection to query metadata : &quot;encrypt&quot; property is set to &quot;true&quot; and &quot;trustServerCertificate&quot; property is set to &quot;false&quot; but the driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption: Error: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target. ClientConnectionId:5247f69c-9b19-4fdd-82c7-52026f92374d.\r\n\r\nI have searched the fault on Google, Youtube and Stackoverflow too but it seems like no one has met this error before. I have using jdk-20 and I use JDBC for connecting to SQL Server. Please help me. Thank you so much.","title":"Problem with Eclipse connection to SQL Server 2022 by SSL","body":"<p>I have a website project in Eclipse and connect to database in SQL Server 2022. When I console my project, Eclipse has warned me: WARN: HHH000342: Could not obtain connection to query metadata : &quot;encrypt&quot; property is set to &quot;true&quot; and &quot;trustServerCertificate&quot; property is set to &quot;false&quot; but the driver could not establish a secure connection to SQL Server by using Secure Sockets Layer (SSL) encryption: Error: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target. ClientConnectionId:5247f69c-9b19-4fdd-82c7-52026f92374d.</p>\n<p>I have searched the fault on Google, Youtube and Stackoverflow too but it seems like no one has met this error before. I have using jdk-20 and I use JDBC for connecting to SQL Server. Please help me. Thank you so much.</p>\n"},{"tags":["java","android","haptic-feedback"],"owner":{"account_id":14116658,"reputation":137,"user_id":10198259,"display_name":"Sean McManus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699023064,"creation_date":1699023064,"question_id":77417622,"body_markdown":"I want to use haptic feedback when the player takes damage or crashes their car in a game and want to ignore the system global haptic feedback setting, which is generally disabled because the user just doesn&#39;t want haptics on navigational buttons.. and instead want to have an ingame option to disable damage haptics.\r\n\r\nHowever as of API 33 `FLAG_IGNORE_GLOBAL_SETTING` for `View.performHapticFeedback(int, int)` has been made deprecated. The documentation states that **only privileged apps can ignore user settings for touch feedback**, but what does this mean? Can I request a permission to allow haptics which ignore the global setting or can only system apps ignore the global setting?\r\n\r\nAlso the reason I want to use haptics rather than vibration if possible is because as stated on the haptic feedback developer page I want the short weak haptic vibration which performHapticFeedback gives *(and it&#39;s nice to not need the full vibration permission atleast below API 33)*\r\n&gt; Caution: We strongly discourage using older Vibrator methods employing createOneshot or createWaveform, even if they appear to be supported on the device. These modes are often too loud for regular haptic feedback; use them only as a fallback if you need to highlight an extremely important action.\r\n\r\n- https://developer.android.com/develop/ui/views/haptics/haptic-feedback\r\n- https://developer.android.com/reference/android/view/HapticFeedbackConstants\r\n\r\nIf it&#39;s just no longer possible for me to force haptics on API 33+ is there at-least some way I can check if the device global haptic setting is disabled to fallback to using vibration instead?","title":"Android ignore global haptic feedback settings in API 33+","body":"<p>I want to use haptic feedback when the player takes damage or crashes their car in a game and want to ignore the system global haptic feedback setting, which is generally disabled because the user just doesn't want haptics on navigational buttons.. and instead want to have an ingame option to disable damage haptics.</p>\n<p>However as of API 33 <code>FLAG_IGNORE_GLOBAL_SETTING</code> for <code>View.performHapticFeedback(int, int)</code> has been made deprecated. The documentation states that <strong>only privileged apps can ignore user settings for touch feedback</strong>, but what does this mean? Can I request a permission to allow haptics which ignore the global setting or can only system apps ignore the global setting?</p>\n<p>Also the reason I want to use haptics rather than vibration if possible is because as stated on the haptic feedback developer page I want the short weak haptic vibration which performHapticFeedback gives <em>(and it's nice to not need the full vibration permission atleast below API 33)</em></p>\n<blockquote>\n<p>Caution: We strongly discourage using older Vibrator methods employing createOneshot or createWaveform, even if they appear to be supported on the device. These modes are often too loud for regular haptic feedback; use them only as a fallback if you need to highlight an extremely important action.</p>\n</blockquote>\n<ul>\n<li><a href=\"https://developer.android.com/develop/ui/views/haptics/haptic-feedback\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/haptics/haptic-feedback</a></li>\n<li><a href=\"https://developer.android.com/reference/android/view/HapticFeedbackConstants\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/view/HapticFeedbackConstants</a></li>\n</ul>\n<p>If it's just no longer possible for me to force haptics on API 33+ is there at-least some way I can check if the device global haptic setting is disabled to fallback to using vibration instead?</p>\n"},{"tags":["java","eclipse","maven","java-platform-module-system"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1698998973,"post_id":77414973,"comment_id":136478003,"body_markdown":"Eclipse uses its own compiler with different arguments.","body":"Eclipse uses its own compiler with different arguments."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1699004036,"post_id":77414973,"comment_id":136478827,"body_markdown":"`--patch-module` does not make sense here. Learn what the error message `The package ... is accessible from more than one module: ...` means and then fix it even though `javac` does not show it.","body":"<code>--patch-module</code> does not make sense here. Learn what the error message <code>The package ... is accessible from more than one module: ...</code> means and then fix it even though <code>javac</code> does not show it."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699021155,"post_id":77414973,"comment_id":136482059,"body_markdown":"Is the list of modules literally “, org.slf4j”? Assuming that the empty string refers to the unnamed module, you just have to remove slf4j from the class path.","body":"Is the list of modules literally “, org.slf4j”? Assuming that the empty string refers to the unnamed module, you just have to remove slf4j from the class path."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1699023597,"post_id":77414973,"comment_id":136482588,"body_markdown":"@Holger It&#39;s not an empty string. It&#39;s `&lt;unnamed&gt;` not formatted as _Code Sample_. `--patch-module` is misused here to &quot;patch&quot; a Maven dependency. Maybe trial and error resulted in this &quot;creative&quot; solution.","body":"@Holger It&#39;s not an empty string. It&#39;s <code>&lt;unnamed&gt;</code> not formatted as <i>Code Sample</i>. <code>--patch-module</code> is misused here to &quot;patch&quot; a Maven dependency. Maybe trial and error resulted in this &quot;creative&quot; solution."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699023948,"post_id":77414973,"comment_id":136482685,"body_markdown":"@howlger so my assumption was correct, slf4j has been placed on the class path and the module path.","body":"@howlger so my assumption was correct, slf4j has been placed on the class path and the module path."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1699093101,"post_id":77414973,"comment_id":136489805,"body_markdown":"@Holger Right, and as you say, removing the JAR from the classpath should solve what has been asked. But the main problem here seems to be the `--patch-module` hack, which leads to a number of other problems that the OP is probably not yet aware of (running it from inside an IDE, updating dependencies, issues in projects that depend on this project, etc.). The question is an [XY problem](https://en.wikipedia.org/wiki/XY_problem), asking for X instead of a correct solution for Y unknown to us (Y was the reason why the `--patch-module` hack was made).","body":"@Holger Right, and as you say, removing the JAR from the classpath should solve what has been asked. But the main problem here seems to be the <code>--patch-module</code> hack, which leads to a number of other problems that the OP is probably not yet aware of (running it from inside an IDE, updating dependencies, issues in projects that depend on this project, etc.). The question is an <a href=\"https://en.wikipedia.org/wiki/XY_problem\" rel=\"nofollow noreferrer\">XY problem</a>, asking for X instead of a correct solution for Y unknown to us (Y was the reason why the <code>--patch-module</code> hack was made)."},{"owner":{"account_id":29190511,"reputation":1,"user_id":22362730,"display_name":"Heiko"},"score":0,"creation_date":1699255189,"post_id":77414973,"comment_id":136503655,"body_markdown":"Hello,\nthanks for your answers.\nNormally i would say you are right, but maven-embedder uses org.slf4j package to access slf4j classes. \nI cannot exclude it from the build.","body":"Hello, thanks for your answers. Normally i would say you are right, but maven-embedder uses org.slf4j package to access slf4j classes.  I cannot exclude it from the build."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1699257491,"post_id":77414973,"comment_id":136504010,"body_markdown":"How is the Maven Embedder related to this? A web search for `maven embedder &quot;--patch-module&quot;` gives me no hits. Please explain with a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) what made you misuse `--patch-module`?","body":"How is the Maven Embedder related to this? A web search for <code>maven embedder &quot;--patch-module&quot;</code> gives me no hits. Please explain with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> what made you misuse <code>--patch-module</code>?"},{"owner":{"account_id":29190511,"reputation":1,"user_id":22362730,"display_name":"Heiko"},"score":0,"creation_date":1699364724,"post_id":77414973,"comment_id":136520299,"body_markdown":"Hello,\nmaven-embedder comes trough the quarkus archetype.\nI cannot exclude the artifact.\nUnfortunately the pom is too large to post it.","body":"Hello, maven-embedder comes trough the quarkus archetype. I cannot exclude the artifact. Unfortunately the pom is too large to post it."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1699365573,"post_id":77414973,"comment_id":136520480,"body_markdown":"That still doesn&#39;t explain why you are misusing `--patch-module` here. You were not asked for the full `pom.xml` or parts of it, but to provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) which is a complete `pom.xml` as minimal as possible to reproduce the issue.","body":"That still doesn&#39;t explain why you are misusing <code>--patch-module</code> here. You were not asked for the full <code>pom.xml</code> or parts of it, but to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which is a complete <code>pom.xml</code> as minimal as possible to reproduce the issue."},{"owner":{"account_id":29190511,"reputation":1,"user_id":22362730,"display_name":"Heiko"},"score":0,"creation_date":1699516505,"post_id":77414973,"comment_id":136542370,"body_markdown":"Hello,\ni published a project to reproduce the problem at\nhttps://github.com/hw-4/testproject\n\nbtw - patch-module is just a workaround. The base problem is \nThe package org.slf4j is accessible from more than one module.","body":"Hello, i published a project to reproduce the problem at <a href=\"https://github.com/hw-4/testproject\" rel=\"nofollow noreferrer\">github.com/hw-4/testproject</a>  btw - patch-module is just a workaround. The base problem is  The package org.slf4j is accessible from more than one module."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1699522856,"post_id":77414973,"comment_id":136543602,"body_markdown":"If the error is shown only with `--patch-module`, then `--patch-module` is your base problem. Otherwise you should track the issue down to the two dependencies that causing it, e.g. in the Maven POM editor, tab _Dependency Hierarchy_. For details about the error, see https://stackoverflow.com/a/53824670/6505250","body":"If the error is shown only with <code>--patch-module</code>, then <code>--patch-module</code> is your base problem. Otherwise you should track the issue down to the two dependencies that causing it, e.g. in the Maven POM editor, tab <i>Dependency Hierarchy</i>. For details about the error, see <a href=\"https://stackoverflow.com/a/53824670/6505250\">stackoverflow.com/a/53824670/6505250</a>"},{"owner":{"account_id":29190511,"reputation":1,"user_id":22362730,"display_name":"Heiko"},"score":0,"creation_date":1699555240,"post_id":77414973,"comment_id":136550188,"body_markdown":"Please forget the patch-module thing.\nLet&#39;s come back to the original Question - How to set a compiler option in eclipse.","body":"Please forget the patch-module thing. Let&#39;s come back to the original Question - How to set a compiler option in eclipse."}],"owner":{"account_id":29190511,"reputation":1,"user_id":22362730,"display_name":"Heiko"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699023057,"creation_date":1698997934,"question_id":77414973,"body_markdown":"I am using JDK 19 in a modular maven project.\r\nMy project compiles in the shell, but I get errors in Eclipse.\r\n\r\n    The package org.slf4j is accessible from more than one module: &lt;unnamed&gt;, org.slf4j\r\n\r\n\r\n\r\nThe following compiler args work with maven in the shell.\r\n\r\n```xml\r\n&lt;compilerArgs&gt;\r\n\t&lt;arg&gt;--patch-module&lt;/arg&gt;\r\n\t&lt;arg&gt;org.slf4j=${settings.localRepository}/org/slf4j/slf4j-api/2.0.6/slf4j-api-2.0.6.jar&lt;/arg&gt;\r\n&lt;/compilerArgs&gt;\r\n```\r\n\r\nHow can I teach Eclipse also to use these args?","title":"how to set the compiler option --patch-modules in eclipse","body":"<p>I am using JDK 19 in a modular maven project.\nMy project compiles in the shell, but I get errors in Eclipse.</p>\n<pre><code>The package org.slf4j is accessible from more than one module: &lt;unnamed&gt;, org.slf4j\n</code></pre>\n<p>The following compiler args work with maven in the shell.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;compilerArgs&gt;\n    &lt;arg&gt;--patch-module&lt;/arg&gt;\n    &lt;arg&gt;org.slf4j=${settings.localRepository}/org/slf4j/slf4j-api/2.0.6/slf4j-api-2.0.6.jar&lt;/arg&gt;\n&lt;/compilerArgs&gt;\n</code></pre>\n<p>How can I teach Eclipse also to use these args?</p>\n"},{"tags":["java","jgrapht"],"answers":[{"tags":[],"owner":{"account_id":9097884,"reputation":69,"user_id":10568754,"display_name":"joyfantastic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699022949,"creation_date":1699022515,"answer_id":77417559,"question_id":77417227,"body_markdown":"I managed to successfully parse my dotfile by following [this][1]. It is very ugly and cumbersome.\r\n\r\n```\r\nGraph&lt;String, DefaultEdge&gt; DAG = new SimpleDirectedGraph&lt;&gt;(DefaultEdge.class);\r\n\r\nDOTImporter&lt;String, DefaultEdge&gt; dotImporter = new DOTImporter&lt;&gt;();\r\ndotImporter.setVertexFactory(label -&gt; label);\r\n\r\nMap&lt;String, Map&lt;String, Attribute&gt;&gt; attrs = new HashMap&lt;&gt;();\r\ndotImporter.addVertexAttributeConsumer((p, a) -&gt; {\r\nMap&lt;String, Attribute&gt; map = attrs.computeIfAbsent(p.getFirst(), k -&gt; new HashMap&lt;&gt;());\r\n    map.put(p.getSecond(), a);\r\n});\r\n\r\ndotImporter.importGraph(DAG, /* InputStream here */);\r\n\r\nfor (String v : DAG.vertexSet()) {\r\n    System.out.println(v+&quot; &quot;+attrs.get(v));\r\n}\r\n```\r\n\r\n  [1]: https://github.com/jgrapht/jgrapht/blob/master/jgrapht-io/src/test/java/org/jgrapht/nio/dot/DOTImporter1Test.java#L141","title":"Importing DOT file with vertex attributes using JGrapht 1.5.2","body":"<p>I managed to successfully parse my dotfile by following <a href=\"https://github.com/jgrapht/jgrapht/blob/master/jgrapht-io/src/test/java/org/jgrapht/nio/dot/DOTImporter1Test.java#L141\" rel=\"nofollow noreferrer\">this</a>. It is very ugly and cumbersome.</p>\n<pre><code>Graph&lt;String, DefaultEdge&gt; DAG = new SimpleDirectedGraph&lt;&gt;(DefaultEdge.class);\n\nDOTImporter&lt;String, DefaultEdge&gt; dotImporter = new DOTImporter&lt;&gt;();\ndotImporter.setVertexFactory(label -&gt; label);\n\nMap&lt;String, Map&lt;String, Attribute&gt;&gt; attrs = new HashMap&lt;&gt;();\ndotImporter.addVertexAttributeConsumer((p, a) -&gt; {\nMap&lt;String, Attribute&gt; map = attrs.computeIfAbsent(p.getFirst(), k -&gt; new HashMap&lt;&gt;());\n    map.put(p.getSecond(), a);\n});\n\ndotImporter.importGraph(DAG, /* InputStream here */);\n\nfor (String v : DAG.vertexSet()) {\n    System.out.println(v+&quot; &quot;+attrs.get(v));\n}\n</code></pre>\n"}],"owner":{"account_id":9097884,"reputation":69,"user_id":10568754,"display_name":"joyfantastic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699022949,"creation_date":1699019956,"question_id":77417227,"body_markdown":"I would like to import a dotfile such as this one:\r\n\r\n```\r\ndigraph test {\r\n  &quot;T0&quot; [X=1, Y=Hello];\r\n  &quot;T1&quot; [X=2, Y=Bye];\r\n  &quot;T0&quot; -&gt; &quot;T1&quot;;\r\n}\r\n```\r\n\r\nIn a Java program using JGrapht (or any other graph library, really...)\r\nThat&#39;s what I&#39;ve got so far from [here][1]:\r\n\r\n```\r\nGraph&lt;String, DefaultEdge&gt; DAG = new SimpleDirectedGraph&lt;&gt;(DefaultEdge.class);\r\n\r\nDOTImporter&lt;String, DefaultEdge&gt; dotImporter = new DOTImporter&lt;&gt;();\r\ndotImporter.setVertexFactory(label -&gt; label);\r\ndotImporter.importGraph(DAG, /* InputStream here */);\r\n```\r\n\r\nClearly I need to replace String type and the vertex factory with something else, but how to I tell JGrapht to retain the X and Y attributes?\r\nThanks for your help\r\n\r\n  [1]: https://stackoverflow.com/questions/44641596/using-the-jgrapht-librarys-edgeprovider-class","title":"Importing DOT file with vertex attributes using JGrapht 1.5.2","body":"<p>I would like to import a dotfile such as this one:</p>\n<pre><code>digraph test {\n  &quot;T0&quot; [X=1, Y=Hello];\n  &quot;T1&quot; [X=2, Y=Bye];\n  &quot;T0&quot; -&gt; &quot;T1&quot;;\n}\n</code></pre>\n<p>In a Java program using JGrapht (or any other graph library, really...)\nThat's what I've got so far from <a href=\"https://stackoverflow.com/questions/44641596/using-the-jgrapht-librarys-edgeprovider-class\">here</a>:</p>\n<pre><code>Graph&lt;String, DefaultEdge&gt; DAG = new SimpleDirectedGraph&lt;&gt;(DefaultEdge.class);\n\nDOTImporter&lt;String, DefaultEdge&gt; dotImporter = new DOTImporter&lt;&gt;();\ndotImporter.setVertexFactory(label -&gt; label);\ndotImporter.importGraph(DAG, /* InputStream here */);\n</code></pre>\n<p>Clearly I need to replace String type and the vertex factory with something else, but how to I tell JGrapht to retain the X and Y attributes?\nThanks for your help</p>\n"},{"tags":["java","debugging","input","interface"],"answers":[{"comments":[{"owner":{"account_id":18000697,"reputation":19,"user_id":13082707,"display_name":"mangos coconuts"},"score":0,"creation_date":1585070893,"post_id":60835929,"comment_id":107635080,"body_markdown":"Thank you! this helped me very much, but do u know how to grab that specific input? would I need to call it in threw an array? also uptop would i need to create  a new arary for answers? because downbelow in the array of answers, its using the questions string up top.(idk if that made any sense but i hope u get the point. also thanks for the help its greatly apreciated)","body":"Thank you! this helped me very much, but do u know how to grab that specific input? would I need to call it in threw an array? also uptop would i need to create  a new arary for answers? because downbelow in the array of answers, its using the questions string up top.(idk if that made any sense but i hope u get the point. also thanks for the help its greatly apreciated)"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1585071121,"post_id":60835929,"comment_id":107635184,"body_markdown":"Yes.  Remember that arrays are 0 based.  So if you want the first item use `questions[0]`, the second would be `questions[1]` and so on.  That is why I subtracted 1 from  your loop variable to index the array.  If you use questions[noq] that will throw an exception because noq = 10, the length of the array. But the last element is questions[9].","body":"Yes.  Remember that arrays are 0 based.  So if you want the first item use <code>questions[0]</code>, the second would be <code>questions[1]</code> and so on.  That is why I subtracted 1 from  your loop variable to index the array.  If you use questions[noq] that will throw an exception because noq = 10, the length of the array. But the last element is questions[9]."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1585095051,"post_id":60835929,"comment_id":107643810,"body_markdown":"@mangoscoconuts  Did my previous comment address your question?","body":"@mangoscoconuts  Did my previous comment address your question?"},{"owner":{"account_id":18000697,"reputation":19,"user_id":13082707,"display_name":"mangos coconuts"},"score":0,"creation_date":1585159309,"post_id":60835929,"comment_id":107668030,"body_markdown":"Yea, thanks! This helped me learn more, I can get your point, thanks!","body":"Yea, thanks! This helped me learn more, I can get your point, thanks!"}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1585070197,"creation_date":1585069803,"answer_id":60835929,"question_id":60835561,"body_markdown":"You need to allocate an array to hold the questions.  Then when you prompt for the answers you can repeat the questions.  To be consistent with  your loops, you should have single variable called `noq` or something for number of questions, and use that everywhere when you are using for loops.\r\n \r\n\r\n    static int noq = 10;\r\n    static String[] questions = new String[noq];\r\n    static Scanner scanner = new Scanner(System.in);\r\n    \r\n    public static void main(String[] args) {\r\n    \tQuestions();\r\n    \tAnswer();\r\n    \t\r\n    }\r\n    \r\n    public static void Questions() {\r\n    \tfor (int i = 1; i &lt;= noq; i++) {\r\n    \t\tSystem.out.println(&quot;Enter a question &quot; + i + &quot;/&quot; + noq);\r\n    \t\tString firstQuestion = scanner.nextLine();\r\n    \t\tquestions[i - 1] = firstQuestion;\r\n    \t}\r\n    }\r\n    \r\n    public static void Answer() {\r\n    \tfor (int i = 1; i &lt;= noq; i++) {\r\n    \t\tSystem.out.println(questions[i - 1]);\r\n    \t\tScanner scanner = new Scanner(System.in);\r\n    \t\tSystem.out.println(&quot;Enter a answer &quot; + i + &quot;/&quot; + noq);\r\n    \t\tString answerAnswer = scanner.nextLine();\r\n    \t}\r\n    }\r\n\r\nYou should also get away from using static everywhere.  I had to do it to simplify the example. Check out the [Java Tutorials](http://docs.oracle.com/javase/tutorial/index.html) for more information on programming in Java focusing on arrays and the uses of the `static` keyword.","title":"Is it possible to use the Scanner outside the main method and still call it in?","body":"<p>You need to allocate an array to hold the questions.  Then when you prompt for the answers you can repeat the questions.  To be consistent with  your loops, you should have single variable called <code>noq</code> or something for number of questions, and use that everywhere when you are using for loops.</p>\n\n<pre><code>static int noq = 10;\nstatic String[] questions = new String[noq];\nstatic Scanner scanner = new Scanner(System.in);\n\npublic static void main(String[] args) {\n    Questions();\n    Answer();\n\n}\n\npublic static void Questions() {\n    for (int i = 1; i &lt;= noq; i++) {\n        System.out.println(\"Enter a question \" + i + \"/\" + noq);\n        String firstQuestion = scanner.nextLine();\n        questions[i - 1] = firstQuestion;\n    }\n}\n\npublic static void Answer() {\n    for (int i = 1; i &lt;= noq; i++) {\n        System.out.println(questions[i - 1]);\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"Enter a answer \" + i + \"/\" + noq);\n        String answerAnswer = scanner.nextLine();\n    }\n}\n</code></pre>\n\n<p>You should also get away from using static everywhere.  I had to do it to simplify the example. Check out the <a href=\"http://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\">Java Tutorials</a> for more information on programming in Java focusing on arrays and the uses of the <code>static</code> keyword.</p>\n"}],"owner":{"account_id":18000697,"reputation":19,"user_id":13082707,"display_name":"mangos coconuts"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7051,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699022851,"creation_date":1585068443,"question_id":60835561,"body_markdown":"So what im trying to do is to use my scanner method to go save the inputs that the users put in thats inside the for loop, but how do i call the certain type of input they place in? What i mean by this is, lets say the user places is in an input of 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 as the input for the question method and answer method. In the main method, or any method, how can i call in the input of 10, or 12. \r\n\r\n    package com.ez.ez;\r\n    import java.util.Scanner;\r\n    public class ReWrittingBetterCode{\r\n            public static void Questions(){\r\n    \t    for (int i = 1; i &lt;= 10; i++) {\r\n    \t    Scanner scanner = new Scanner(System.in);\r\n            System.out.println(&quot;Enter a question &quot;+i+&quot;/10&quot;);\r\n            String firstQuestion = scanner.nextLine();\r\n    \t    }\r\n        }\r\n        public static void Answer() {\r\n    \t    for (int i = 1; i &lt;= 10; i++) {\r\n    \t    Scanner scanner = new Scanner(System.in); \r\n            System.out.println(&quot;Enter a answer &quot;+i+&quot;/10&quot;);\r\n            String answerAnswer = scanner.nextLine();\r\n    \t    }\r\n    \t\r\n        }\r\n    \r\n        public static void main (String[] args) {\r\n            Questions();\r\n            Answer();\r\n        \r\n        } \r\n    }","title":"Is it possible to use the Scanner outside the main method and still call it in?","body":"<p>So what im trying to do is to use my scanner method to go save the inputs that the users put in thats inside the for loop, but how do i call the certain type of input they place in? What i mean by this is, lets say the user places is in an input of 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 as the input for the question method and answer method. In the main method, or any method, how can i call in the input of 10, or 12. </p>\n\n<pre><code>package com.ez.ez;\nimport java.util.Scanner;\npublic class ReWrittingBetterCode{\n        public static void Questions(){\n        for (int i = 1; i &lt;= 10; i++) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"Enter a question \"+i+\"/10\");\n        String firstQuestion = scanner.nextLine();\n        }\n    }\n    public static void Answer() {\n        for (int i = 1; i &lt;= 10; i++) {\n        Scanner scanner = new Scanner(System.in); \n        System.out.println(\"Enter a answer \"+i+\"/10\");\n        String answerAnswer = scanner.nextLine();\n        }\n\n    }\n\n    public static void main (String[] args) {\n        Questions();\n        Answer();\n\n    } \n}\n</code></pre>\n"},{"tags":["java","android","android-fragments","android-animation","shared-element-transition"],"comments":[{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1673020489,"post_id":75033089,"comment_id":132410346,"body_markdown":"Did you read the [documentation specifically about return shared element transitions when using RecyclerView](https://developer.android.com/guide/fragments/animate#recyclerview)?","body":"Did you read the <a href=\"https://developer.android.com/guide/fragments/animate#recyclerview\" rel=\"nofollow noreferrer\">documentation specifically about return shared element transitions when using RecyclerView</a>?"},{"owner":{"account_id":21178348,"reputation":172,"user_id":15573213,"display_name":"shybaka"},"score":0,"creation_date":1673021110,"post_id":75033089,"comment_id":132410567,"body_markdown":"@ianhanniballake yes, but if I got it in the right way, that case is from a fragment to a recycler view, and it&#39;s not my case","body":"@ianhanniballake yes, but if I got it in the right way, that case is from a fragment to a recycler view, and it&#39;s not my case"},{"owner":{"account_id":1849514,"reputation":193878,"user_id":1676363,"accept_rate":100,"display_name":"ianhanniballake"},"score":0,"creation_date":1673026910,"post_id":75033089,"comment_id":132412474,"body_markdown":"That&#39;s exactly what your return transition is.","body":"That&#39;s exactly what your return transition is."}],"answers":[{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1699022130,"post_id":75133056,"comment_id":136482247,"body_markdown":"What is *&quot;FX&quot;*? *[Fragment transition](https://www.androiddesignpatterns.com/2014/12/activity-fragment-transitions-in-android-lollipop-part1.html)*)? Or something else?","body":"What is <i>&quot;FX&quot;</i>? <i><a href=\"https://www.androiddesignpatterns.com/2014/12/activity-fragment-transitions-in-android-lollipop-part1.html\" rel=\"nofollow noreferrer\">Fragment transition</a></i>)? Or something else?"}],"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699021912,"creation_date":1673865596,"answer_id":75133056,"question_id":75033089,"body_markdown":"Your so-called `sharedElementName` is actually a `transitionName`.\r\n\r\na) The reference example doesn&#39;t directly manipulate the backstack:&lt;br/&gt;\r\n[Android Fragment Transitions: RecyclerView to ViewPager][1] and [Blog][2].\r\n\r\nb) Manual transactions might require another order of method calls:\r\n\r\n    getSupportFragmentManager().beginTransaction()\r\n        .addSharedElement(sharedElement, transitionName)\r\n        .replace(R.id.container, newFragment)\r\n        .addToBackStack(null)\r\n        .commit();\r\n\r\nAlso see [this example][3], how alternate transitions could be be set, compared to:\r\n\r\n    TransitionInflater.from(this).inflateTransition(R.transition.default_transition)\r\n\r\nWhatever `R.transition.default_transition` may be.\r\n\r\nIt may look strange when using the same transition for both ways, instead of enter/exit transitions, alike `NavAction` would feature. [`FragmentNavigator.Extras`][4] could be used to apply enter/exit transitions, when using navigation component; this also can be combined with `ActionBar`. Option a) is probably less complicated. b) something alike [this][5] Kotlin example might make more sense.\r\n\r\nIt&#39;s pointless to build clunky navigation FX when enter/exit transitions would be [supported out-of-the-box][6]. Maybe consider loading with [Glide][7], when loading images.\r\n\r\n ---\r\n\r\nAssume the following `build.gradle`; there isn&#39;t any need to reinvent the wheel.\r\n\r\n    dependencies {\r\n        androidTestImplementation &quot;androidx.navigation:navigation-testing:2.5.3&quot;\r\n        implementation &#39;androidx.navigation:navigation-runtime:2.5.3&#39;\r\n        implementation &#39;androidx.navigation:navigation-fragment:2.5.3&#39;\r\n        implementation &#39;androidx.navigation:navigation-ui:2.5.3&#39;\r\n        annotationProcessor &#39;com.github.bumptech.glide:compiler:4.14.2&#39;\r\n        implementation &#39;com.github.bumptech.glide:glide:4.14.2&#39;\r\n    }\r\n\r\nThen `Navigation` with `FragmentNavigator.Extras` might rather be the current method:\r\n\r\n    Bundle navArgs = new Bundle();\r\n    navArgs.putInt(&quot;position&quot;, position);\r\n\r\n    FragmentNavigator.Extras extras = new FragmentNavigator.Extras.Builder()\r\n        .addSharedElement(sharedElement, transitionName)\r\n        .build();\r\n\r\n    Navigation.findNavController(view).navigate(\r\n        R.id.details, // ID of Nav destination\r\n        navArgs,      // Bundle of args\r\n        null,         // NavOptions\r\n        extras);\r\n\r\nOne can also define transitionName in XML `&lt;action/&gt;` nodes.\r\n\r\n  [1]: https://github.com/android/animation-samples/tree/master/GridToPager\r\n  [2]: https://android-developers.googleblog.com/2018/02/continuous-shared-element-transitions.html\r\n  [3]: https://medium.com/@bherbst/fragment-transitions-with-shared-elements-7c7d71d31cbb\r\n  [4]: https://developer.android.com/guide/navigation/navigation-animate-transitions#set-fragment\r\n  [5]: https://www.kodeco.com/8279305-navigation-component-for-android-part-3-transition-and-navigation\r\n  [6]: https://developer.android.com/guide/navigation/navigation-animate-transitions\r\n  [7]: https://github.com/bumptech/glide\r\n","title":"How to use fragments backstack with shared element transition","body":"<p>Your so-called <code>sharedElementName</code> is actually a <code>transitionName</code>.</p>\n<p>a) The reference example doesn't directly manipulate the backstack:<br/>\n<a href=\"https://github.com/android/animation-samples/tree/master/GridToPager\" rel=\"nofollow noreferrer\">Android Fragment Transitions: RecyclerView to ViewPager</a> and <a href=\"https://android-developers.googleblog.com/2018/02/continuous-shared-element-transitions.html\" rel=\"nofollow noreferrer\">Blog</a>.</p>\n<p>b) Manual transactions might require another order of method calls:</p>\n<pre><code>getSupportFragmentManager().beginTransaction()\n    .addSharedElement(sharedElement, transitionName)\n    .replace(R.id.container, newFragment)\n    .addToBackStack(null)\n    .commit();\n</code></pre>\n<p>Also see <a href=\"https://medium.com/@bherbst/fragment-transitions-with-shared-elements-7c7d71d31cbb\" rel=\"nofollow noreferrer\">this example</a>, how alternate transitions could be be set, compared to:</p>\n<pre><code>TransitionInflater.from(this).inflateTransition(R.transition.default_transition)\n</code></pre>\n<p>Whatever <code>R.transition.default_transition</code> may be.</p>\n<p>It may look strange when using the same transition for both ways, instead of enter/exit transitions, alike <code>NavAction</code> would feature. <a href=\"https://developer.android.com/guide/navigation/navigation-animate-transitions#set-fragment\" rel=\"nofollow noreferrer\"><code>FragmentNavigator.Extras</code></a> could be used to apply enter/exit transitions, when using navigation component; this also can be combined with <code>ActionBar</code>. Option a) is probably less complicated. b) something alike <a href=\"https://www.kodeco.com/8279305-navigation-component-for-android-part-3-transition-and-navigation\" rel=\"nofollow noreferrer\">this</a> Kotlin example might make more sense.</p>\n<p>It's pointless to build clunky navigation FX when enter/exit transitions would be <a href=\"https://developer.android.com/guide/navigation/navigation-animate-transitions\" rel=\"nofollow noreferrer\">supported out-of-the-box</a>. Maybe consider loading with <a href=\"https://github.com/bumptech/glide\" rel=\"nofollow noreferrer\">Glide</a>, when loading images.</p>\n<hr />\n<p>Assume the following <code>build.gradle</code>; there isn't any need to reinvent the wheel.</p>\n<pre><code>dependencies {\n    androidTestImplementation &quot;androidx.navigation:navigation-testing:2.5.3&quot;\n    implementation 'androidx.navigation:navigation-runtime:2.5.3'\n    implementation 'androidx.navigation:navigation-fragment:2.5.3'\n    implementation 'androidx.navigation:navigation-ui:2.5.3'\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.14.2'\n    implementation 'com.github.bumptech.glide:glide:4.14.2'\n}\n</code></pre>\n<p>Then <code>Navigation</code> with <code>FragmentNavigator.Extras</code> might rather be the current method:</p>\n<pre><code>Bundle navArgs = new Bundle();\nnavArgs.putInt(&quot;position&quot;, position);\n\nFragmentNavigator.Extras extras = new FragmentNavigator.Extras.Builder()\n    .addSharedElement(sharedElement, transitionName)\n    .build();\n\nNavigation.findNavController(view).navigate(\n    R.id.details, // ID of Nav destination\n    navArgs,      // Bundle of args\n    null,         // NavOptions\n    extras);\n</code></pre>\n<p>One can also define transitionName in XML <code>&lt;action/&gt;</code> nodes.</p>\n"},{"comments":[{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":1,"creation_date":1673872448,"post_id":75134258,"comment_id":132587178,"body_markdown":"Using the same transition twice doesn&#39;t make sense... it&#39;s usually two transitions, while one can assign four different ones.","body":"Using the same transition twice doesn&#39;t make sense... it&#39;s usually two transitions, while one can assign four different ones."}],"tags":[],"owner":{"account_id":23653818,"reputation":565,"user_id":17682395,"display_name":"Heet Changela"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699022501,"creation_date":1673872205,"answer_id":75134258,"question_id":75033089,"body_markdown":"I think your problem is related to the exit transition as you get a solution of an empty list. Now for an exit transition effect, check the below code.\r\n\r\n     public void showFragmentWithTransition(Fragment current, Fragment newFragment, String tag, View sharedView, String sharedElementName) {\r\n        FragmentManager fragmentManager = getSupportFragmentManager();\r\n\r\n        // Check if the fragment is in back stack\r\n        boolean fragmentPopped = fragmentManager.popBackStackImmediate(tag, 0);\r\n        if (fragmentPopped) {\r\n\r\n        } else {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                current.setSharedElementReturnTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n                current.setExitTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n\r\n                newFragment.setSharedElementEnterTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n                newFragment.setEnterTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n                newFragment.setExitTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n                newFragment.setSharedElementReturnTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n            }\r\n             getSupportFragmentManager().beginTransaction()\r\n                 .addSharedElement(sharedElement, transitionName)\r\n                 .replace(R.id.container, newFragment)\r\n                 .addToBackStack(null)\r\n                 .commit();\r\n        }\r\n    }\r\n\r\nHere I add two new lines for exit transitions.\r\n\r\n&gt;     newFragment.setExitTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n&gt;     newFragment.setSharedElementReturnTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n\r\nIf it does not work then follow *[Fragment transitions with shared elements][1]*. I think it will help you.\r\n\r\n  [1]: https://medium.com/@bherbst/fragment-transitions-with-shared-elements-7c7d71d31cbb\r\n","title":"How to use fragments backstack with shared element transition","body":"<p>I think your problem is related to the exit transition as you get a solution of an empty list. Now for an exit transition effect, check the below code.</p>\n<pre><code> public void showFragmentWithTransition(Fragment current, Fragment newFragment, String tag, View sharedView, String sharedElementName) {\n    FragmentManager fragmentManager = getSupportFragmentManager();\n\n    // Check if the fragment is in back stack\n    boolean fragmentPopped = fragmentManager.popBackStackImmediate(tag, 0);\n    if (fragmentPopped) {\n\n    } else {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            current.setSharedElementReturnTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n            current.setExitTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n\n            newFragment.setSharedElementEnterTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n            newFragment.setEnterTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n            newFragment.setExitTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n            newFragment.setSharedElementReturnTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n        }\n         getSupportFragmentManager().beginTransaction()\n             .addSharedElement(sharedElement, transitionName)\n             .replace(R.id.container, newFragment)\n             .addToBackStack(null)\n             .commit();\n    }\n}\n</code></pre>\n<p>Here I add two new lines for exit transitions.</p>\n<blockquote>\n<pre><code>newFragment.setExitTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\nnewFragment.setSharedElementReturnTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n</code></pre>\n</blockquote>\n<p>If it does not work then follow <em><a href=\"https://medium.com/@bherbst/fragment-transitions-with-shared-elements-7c7d71d31cbb\" rel=\"nofollow noreferrer\">Fragment transitions with shared elements</a></em>. I think it will help you.</p>\n"}],"owner":{"account_id":21178348,"reputation":172,"user_id":15573213,"display_name":"shybaka"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1699022501,"creation_date":1673019979,"question_id":75033089,"body_markdown":"Shared element transition replace the fragment, so I can&#39;t add it to the backstack and call popbackstack when the back arrow button is pressed.\r\n\r\nI have a main activity with inside a mainfragment. The main fragment handles a table layout, so each tab is a fragment with inside a recycler view. When a recycler view element is clicked, the shared element transition starts to a new fragment that shows element details.\r\n\r\nThis is the adapter, where the element is clicked:\r\n\r\n```\r\nholder.image.setTransitionName(&quot;transition&quot; + holder.getAdapterPosition());\r\nif (fragment instanceof tab1_anime) {\r\n     ((tab1_anime) fragment).openShowElementFragment(holder.getAdapterPosition(), v.findViewById(R.id.main_image));\r\n}\r\n```\r\n\r\nThis is the openShowElementFragment inside my tab fragment:\r\n\r\n```\r\npublic void openShowElementFragment(int position, View view) {\r\n    AddElement element = anime_list.get(position);\r\n    ShowElementFragment showElementFragment = new ShowElementFragment();\r\n    Bundle bundle = new Bundle();\r\n    bundle.putString(&quot;transitionName&quot;, &quot;transition&quot; + position);\r\n    bundle.putSerializable(&quot;element&quot;, element);\r\n    bundle.putInt(&quot;position&quot;, position);\r\n    bundle.putInt(&quot;from&quot;, 0);\r\n    showElementFragment.setArguments(bundle);\r\n    ((MainActivity) context).showFragmentWithTransition(this, showElementFragment, &quot;showElementFragment&quot;, view, &quot;transition&quot; + position);\r\n}\r\n```\r\n\r\nThis is the openshowelementfragment function called in the previous code block:\r\n\r\n```\r\npublic void showFragmentWithTransition(Fragment current, Fragment newFragment, String tag, View sharedView, String sharedElementName) {\r\n    FragmentManager fragmentManager = getSupportFragmentManager();\r\n    // Check if the fragment is in back stack\r\n    boolean fragmentPopped = fragmentManager.popBackStackImmediate(tag, 0);\r\n    if (fragmentPopped) {\r\n\r\n    } else {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n            current.setSharedElementReturnTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n            current.setExitTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n\r\n            newFragment.setSharedElementEnterTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n            newFragment.setEnterTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\r\n        }\r\n        fragmentManager.beginTransaction()\r\n            .replace(R.id.fragmentHolder, newFragment)\r\n            .addToBackStack(null)\r\n            .addSharedElement(sharedView, sharedElementName)\r\n            .commit();\r\n    }\r\n}\r\n```\r\n\r\nAnd this is the backarrow button:\r\n\r\n```\r\nback_arrow.setOnClickListener(new View.OnClickListener() {\r\n    @Override\r\n    public void onClick(View view) {\r\n        getSupportFragmentManager().popBackStack();\r\n    }\r\n});\r\n```\r\n\r\nIf I try to add the new fragment instead of replacing the old one, then there aren&#39;t any animations at all.\r\n\r\nIf I try to replace the old fragment with the new one and using the addtobackstack(null) anyway, then the shared element transition works from start to end *but* the fragment at the end is without data, empty:\r\n\r\n[![Enter image description here](https://i.stack.imgur.com/5fptg.gif)](https://i.stack.imgur.com/5fptg.gif)\r\n\r\nI also tried:\r\n\r\n```\r\ngetSupportFragmentManager()\r\n    .beginTransaction()\r\n    .replace(R.id.fragmentHolder, new MainFragment())\r\n    .addToBackStack(null)\r\n    .commit();\r\n```\r\n\r\nBut in this way, the shared element transition doesn&#39;t work on exit:\r\n\r\n[![Enter image description here](https://i.stack.imgur.com/x8yt5.gif)](https://i.stack.imgur.com/x8yt5.gif)\r\n\r\n\r\n","title":"How to use fragments backstack with shared element transition","body":"<p>Shared element transition replace the fragment, so I can't add it to the backstack and call popbackstack when the back arrow button is pressed.</p>\n<p>I have a main activity with inside a mainfragment. The main fragment handles a table layout, so each tab is a fragment with inside a recycler view. When a recycler view element is clicked, the shared element transition starts to a new fragment that shows element details.</p>\n<p>This is the adapter, where the element is clicked:</p>\n<pre><code>holder.image.setTransitionName(&quot;transition&quot; + holder.getAdapterPosition());\nif (fragment instanceof tab1_anime) {\n     ((tab1_anime) fragment).openShowElementFragment(holder.getAdapterPosition(), v.findViewById(R.id.main_image));\n}\n</code></pre>\n<p>This is the openShowElementFragment inside my tab fragment:</p>\n<pre><code>public void openShowElementFragment(int position, View view) {\n    AddElement element = anime_list.get(position);\n    ShowElementFragment showElementFragment = new ShowElementFragment();\n    Bundle bundle = new Bundle();\n    bundle.putString(&quot;transitionName&quot;, &quot;transition&quot; + position);\n    bundle.putSerializable(&quot;element&quot;, element);\n    bundle.putInt(&quot;position&quot;, position);\n    bundle.putInt(&quot;from&quot;, 0);\n    showElementFragment.setArguments(bundle);\n    ((MainActivity) context).showFragmentWithTransition(this, showElementFragment, &quot;showElementFragment&quot;, view, &quot;transition&quot; + position);\n}\n</code></pre>\n<p>This is the openshowelementfragment function called in the previous code block:</p>\n<pre><code>public void showFragmentWithTransition(Fragment current, Fragment newFragment, String tag, View sharedView, String sharedElementName) {\n    FragmentManager fragmentManager = getSupportFragmentManager();\n    // Check if the fragment is in back stack\n    boolean fragmentPopped = fragmentManager.popBackStackImmediate(tag, 0);\n    if (fragmentPopped) {\n\n    } else {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            current.setSharedElementReturnTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n            current.setExitTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n\n            newFragment.setSharedElementEnterTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n            newFragment.setEnterTransition(TransitionInflater.from(this).inflateTransition(R.transition.default_transition));\n        }\n        fragmentManager.beginTransaction()\n            .replace(R.id.fragmentHolder, newFragment)\n            .addToBackStack(null)\n            .addSharedElement(sharedView, sharedElementName)\n            .commit();\n    }\n}\n</code></pre>\n<p>And this is the backarrow button:</p>\n<pre><code>back_arrow.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View view) {\n        getSupportFragmentManager().popBackStack();\n    }\n});\n</code></pre>\n<p>If I try to add the new fragment instead of replacing the old one, then there aren't any animations at all.</p>\n<p>If I try to replace the old fragment with the new one and using the addtobackstack(null) anyway, then the shared element transition works from start to end <em>but</em> the fragment at the end is without data, empty:</p>\n<p><a href=\"https://i.stack.imgur.com/5fptg.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5fptg.gif\" alt=\"Enter image description here\" /></a></p>\n<p>I also tried:</p>\n<pre><code>getSupportFragmentManager()\n    .beginTransaction()\n    .replace(R.id.fragmentHolder, new MainFragment())\n    .addToBackStack(null)\n    .commit();\n</code></pre>\n<p>But in this way, the shared element transition doesn't work on exit:</p>\n<p><a href=\"https://i.stack.imgur.com/x8yt5.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x8yt5.gif\" alt=\"Enter image description here\" /></a></p>\n"},{"tags":["java","docker","maven","javafx"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":4,"creation_date":1699028881,"post_id":77417549,"comment_id":136483919,"body_markdown":"[*Running JavaFx app with Docker containers!*](https://aboullaite.me/javafx-docker/)","body":"<a href=\"https://aboullaite.me/javafx-docker/\" rel=\"nofollow noreferrer\"><i>Running JavaFx app with Docker containers!</i></a>"},{"owner":{"account_id":12877052,"reputation":43,"user_id":9313399,"display_name":"L. Angelino"},"score":0,"creation_date":1699030162,"post_id":77417549,"comment_id":136484196,"body_markdown":"I&#39;ve already saw this article but it doesn&#39;t start a jar file. The article is more about instructing you on how to view the GUI in a Docker container, not how to launch the application","body":"I&#39;ve already saw this article but it doesn&#39;t start a jar file. The article is more about instructing you on how to view the GUI in a Docker container, not how to launch the application"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1699038554,"post_id":77417549,"comment_id":136485695,"body_markdown":"You need the same command line arguments as you need to run the JavaFX application locally, i.e. you need to specify the location of the JavaFX modules you require and add them. See e.g. &quot;Run HelloWorld using JavaFX&quot; under the [Getting Started JavaFX Docs](https://openjfx.io/openjfx-docs/#install-javafx)","body":"You need the same command line arguments as you need to run the JavaFX application locally, i.e. you need to specify the location of the JavaFX modules you require and add them. See e.g. &quot;Run HelloWorld using JavaFX&quot; under the <a href=\"https://openjfx.io/openjfx-docs/#install-javafx\" rel=\"nofollow noreferrer\">Getting Started JavaFX Docs</a>"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1699039865,"post_id":77417549,"comment_id":136485896,"body_markdown":"Or, do as in the link in the comment from @BasilBorque and build a distribution of the JavaFX application with the Java runtime bundled (instead of using a jar file).","body":"Or, do as in the link in the comment from @BasilBorque and build a distribution of the JavaFX application with the Java runtime bundled (instead of using a jar file)."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1699047960,"post_id":77417549,"comment_id":136487049,"body_markdown":"Use of `ea` versioned software is not recommended - those are potentially unstable early access versions.  You should choose a JavaFX version that doesn&#39;t include the `ea` in the version.","body":"Use of <code>ea</code> versioned software is not recommended - those are potentially unstable early access versions.  You should choose a JavaFX version that doesn&#39;t include the <code>ea</code> in the version."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1699048176,"post_id":77417549,"comment_id":136487070,"body_markdown":"Your OS version installed by docker appears to be missing dependencies required by JavaFX (e.g. the [X Windows system](https://en.wikipedia.org/wiki/X_Window_System), and maybe some others).   See the error message in your log: `Error loading shared library libX11.so.6: No such file or directory`.  Note that the guide Basil provided installs some of these missing dependencies with the command `RUN apt-get update &amp;&amp; apt-get install --no-install-recommends -y xorg libgl1-mesa-glx &amp;&amp; rm -rf /var/lib/apt/lists/*`, albeit doing it for a debian based OS rather than an alpine based OS.","body":"Your OS version installed by docker appears to be missing dependencies required by JavaFX (e.g. the <a href=\"https://en.wikipedia.org/wiki/X_Window_System\" rel=\"nofollow noreferrer\">X Windows system</a>, and maybe some others).   See the error message in your log: <code>Error loading shared library libX11.so.6: No such file or directory</code>.  Note that the guide Basil provided installs some of these missing dependencies with the command <code>RUN apt-get update &amp;&amp; apt-get install --no-install-recommends -y xorg libgl1-mesa-glx &amp;&amp; rm -rf &#47;var&#47;lib&#47;apt&#47;lists&#47;*</code>, albeit doing it for a debian based OS rather than an alpine based OS."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1699048319,"post_id":77417549,"comment_id":136487083,"body_markdown":"You seem to be using Alpine Linux. It may be difficult to get JavaFX to work with Alpine Linux (I don&#39;t know, I haven&#39;t tried). Azul Zulu and Bellsoft Liberica both provide JDKs and JREs that include JavaFX, for Windows Mac, and some Linux distributions. But neither produces versions including JavaFX for Alpine Linux. Perhaps this is because it might be difficult to get JavaFX to work on Alpine Linux or support that. Alpine Linux by default uses [musl not glibc](https://wiki.musl-libc.org/functional-differences-from-glibc.html), but JavaFX requires glibc as far as I know.","body":"You seem to be using Alpine Linux. It may be difficult to get JavaFX to work with Alpine Linux (I don&#39;t know, I haven&#39;t tried). Azul Zulu and Bellsoft Liberica both provide JDKs and JREs that include JavaFX, for Windows Mac, and some Linux distributions. But neither produces versions including JavaFX for Alpine Linux. Perhaps this is because it might be difficult to get JavaFX to work on Alpine Linux or support that. Alpine Linux by default uses <a href=\"https://wiki.musl-libc.org/functional-differences-from-glibc.html\" rel=\"nofollow noreferrer\">musl not glibc</a>, but JavaFX requires glibc as far as I know."}],"owner":{"account_id":12877052,"reputation":43,"user_id":9313399,"display_name":"L. Angelino"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699022431,"creation_date":1699022431,"question_id":77417549,"body_markdown":"I don&#39;t know how to launch an application that uses JavaFX on a Docker container.\r\nI&#39;m simply trying to create the jar file with Maven and start it with the Java command but I get this error even though the application starts locally and the JavaFX libraries (javafx-controls and javafx-fxml) are embedded in the jar via dependencies Maven:\r\n\r\n```\r\nNov 03, 2023 2:32:14 PM com.sun.javafx.application.PlatformImpl startup\r\n2023-11-03T14:32:14.602923007Z WARNING: Unsupported JavaFX configuration: classes were loaded from &#39;unnamed module @4b55eca5&#39;\r\n2023-11-03T14:32:14.648250579Z Loading library prism_es2 from resource failed: java.lang.UnsatisfiedLinkError: /root/.openjfx/cache/22-ea+11/amd64/libprism_es2.so: Error loading shared library libX11.so.6: No such file or directory (needed by /root/.openjfx/cache/22-ea+11/amd64/libprism_es2.so)\r\n2023-11-03T14:32:14.648375491Z java.lang.UnsatisfiedLinkError: /root/.openjfx/cache/22-ea+11/amd64/libprism_es2.so: Error loading shared library libX11.so.6: No such file or directory (needed by /root/.openjfx/cache/22-ea+11/amd64/libprism_es2.so)\r\n2023-11-03T14:32:14.648493221Z \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n2023-11-03T14:32:14.648503060Z \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:331)\r\n2023-11-03T14:32:14.648594208Z \tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:197)\r\n2023-11-03T14:32:14.648603706Z \tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:139)\r\n2023-11-03T14:32:14.648669381Z \tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2418)\r\n2023-11-03T14:32:14.648680613Z \tat java.base/java.lang.Runtime.load0(Runtime.java:852)\r\n2023-11-03T14:32:14.648735195Z \tat java.base/java.lang.System.load(System.java:2021)\r\n2023-11-03T14:32:14.648873719Z \tat com.sun.glass.utils.NativeLibLoader.installLibraryFromResource(NativeLibLoader.java:220)\r\n2023-11-03T14:32:14.648883428Z \tat com.sun.glass.utils.NativeLibLoader.loadLibraryFromResource(NativeLibLoader.java:200)\r\n2023-11-03T14:32:14.648997836Z \tat com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:142)\r\n2023-11-03T14:32:14.649078980Z \tat com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:58)\r\n2023-11-03T14:32:14.649156217Z \tat com.sun.prism.es2.ES2Pipeline.lambda$static$0(ES2Pipeline.java:63)\r\n2023-11-03T14:32:14.649165103Z \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:319)\r\n2023-11-03T14:32:14.649172387Z \tat com.sun.prism.es2.ES2Pipeline.&lt;clinit&gt;(ES2Pipeline.java:52)\r\n2023-11-03T14:32:14.649176455Z \tat java.base/java.lang.Class.forName0(Native Method)\r\n2023-11-03T14:32:14.649179681Z \tat java.base/java.lang.Class.forName(Class.java:421)\r\n2023-11-03T14:32:14.649181605Z \tat java.base/java.lang.Class.forName(Class.java:412)\r\n2023-11-03T14:32:14.649303115Z \tat com.sun.prism.GraphicsPipeline.createPipeline(GraphicsPipeline.java:218)\r\n2023-11-03T14:32:14.649331429Z \tat com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:92)\r\n2023-11-03T14:32:14.649338042Z \tat com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\r\n2023-11-03T14:32:14.649395333Z \tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-11-03T14:32:14.660176242Z Loading library glass from resource failed: java.lang.UnsatisfiedLinkError: /root/.openjfx/cache/22-ea+11/amd64/libglass.so: Error loading shared library libX11.so.6: No such file or directory (needed by /root/.openjfx/cache/22-ea+11/amd64/libglass.so)\r\n2023-11-03T14:32:14.660200067Z java.lang.UnsatisfiedLinkError: /root/.openjfx/cache/22-ea+11/amd64/libglass.so: Error loading shared library libX11.so.6: No such file or directory (needed by /root/.openjfx/cache/22-ea+11/amd64/libglass.so)\r\n2023-11-03T14:32:14.660241290Z \tat java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\r\n2023-11-03T14:32:14.660250467Z \tat java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:331)\r\n2023-11-03T14:32:14.660253934Z \tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:197)\r\n2023-11-03T14:32:14.660330566Z \tat java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:139)\r\n2023-11-03T14:32:14.660342178Z \tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2418)\r\n2023-11-03T14:32:14.660345634Z \tat java.base/java.lang.Runtime.load0(Runtime.java:852)\r\n2023-11-03T14:32:14.660486417Z \tat java.base/java.lang.System.load(System.java:2021)\r\n2023-11-03T14:32:14.660510433Z \tat com.sun.glass.utils.NativeLibLoader.installLibraryFromResource(NativeLibLoader.java:220)\r\n2023-11-03T14:32:14.660534674Z \tat com.sun.glass.utils.NativeLibLoader.loadLibraryFromResource(NativeLibLoader.java:200)\r\n2023-11-03T14:32:14.660611334Z \tat com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:142)\r\n2023-11-03T14:32:14.660621764Z \tat com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:58)\r\n2023-11-03T14:32:14.660750028Z \tat com.sun.glass.ui.Application.loadNativeLibrary(Application.java:112)\r\n2023-11-03T14:32:14.660759265Z \tat com.sun.glass.ui.Application.loadNativeLibrary(Application.java:120)\r\n2023-11-03T14:32:14.660775697Z \tat com.sun.glass.ui.gtk.GtkApplication.lambda$static$1(GtkApplication.java:86)\r\n2023-11-03T14:32:14.660928126Z \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:319)\r\n2023-11-03T14:32:14.660950959Z \tat com.sun.glass.ui.gtk.GtkApplication.&lt;clinit&gt;(GtkApplication.java:85)\r\n2023-11-03T14:32:14.660955819Z \tat com.sun.glass.ui.gtk.GtkPlatformFactory.createApplication(GtkPlatformFactory.java:40)\r\n2023-11-03T14:32:14.661027716Z \tat com.sun.glass.ui.Application.run(Application.java:146)\r\n2023-11-03T14:32:14.661037054Z \tat com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:290)\r\n2023-11-03T14:32:14.661168074Z \tat com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:292)\r\n2023-11-03T14:32:14.661190787Z \tat com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:162)\r\n2023-11-03T14:32:14.661257750Z \tat com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:651)\r\n2023-11-03T14:32:14.661278339Z \tat com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:671)\r\n2023-11-03T14:32:14.661304583Z \tat com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\r\n2023-11-03T14:32:14.661522828Z \tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-11-03T14:32:14.662193470Z Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.UnsatisfiedLinkError: no glass in java.library.path: /usr/lib/jvm/java-21-amazon-corretto/lib/server:/usr/lib/jvm/java-21-amazon-corretto/lib:/usr/lib/jvm/java-21-amazon-corretto/../lib:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\r\n2023-11-03T14:32:14.662230405Z \tat com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:300)\r\n2023-11-03T14:32:14.662291592Z \tat com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:292)\r\n2023-11-03T14:32:14.662415748Z \tat com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:162)\r\n2023-11-03T14:32:14.662438131Z \tat com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:651)\r\n2023-11-03T14:32:14.662504446Z \tat com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:671)\r\n2023-11-03T14:32:14.662623713Z \tat com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\r\n2023-11-03T14:32:14.662647919Z \tat java.base/java.lang.Thread.run(Thread.java:1583)\r\n2023-11-03T14:32:14.662830747Z Caused by: java.lang.UnsatisfiedLinkError: no glass in java.library.path: /usr/lib/jvm/java-21-amazon-corretto/lib/server:/usr/lib/jvm/java-21-amazon-corretto/lib:/usr/lib/jvm/java-21-amazon-corretto/../lib:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\r\n2023-11-03T14:32:14.662855594Z \tat java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2458)\r\n2023-11-03T14:32:14.662861225Z \tat java.base/java.lang.Runtime.loadLibrary0(Runtime.java:916)\r\n2023-11-03T14:32:14.662864682Z \tat java.base/java.lang.System.loadLibrary(System.java:2059)\r\n2023-11-03T14:32:14.663023354Z \tat com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:170)\r\n2023-11-03T14:32:14.663046057Z \tat com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:58)\r\n2023-11-03T14:32:14.663053080Z \tat com.sun.glass.ui.Application.loadNativeLibrary(Application.java:112)\r\n2023-11-03T14:32:14.663080699Z \tat com.sun.glass.ui.Application.loadNativeLibrary(Application.java:120)\r\n2023-11-03T14:32:14.663089746Z \tat com.sun.glass.ui.gtk.GtkApplication.lambda$static$1(GtkApplication.java:86)\r\n2023-11-03T14:32:14.663220248Z \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:319)\r\n2023-11-03T14:32:14.663243743Z \tat com.sun.glass.ui.gtk.GtkApplication.&lt;clinit&gt;(GtkApplication.java:85)\r\n2023-11-03T14:32:14.663335068Z \tat com.sun.glass.ui.gtk.GtkPlatformFactory.createApplication(GtkPlatformFactory.java:40)\r\n2023-11-03T14:32:14.663343614Z \tat com.sun.glass.ui.Application.run(Application.java:146)\r\n2023-11-03T14:32:14.663347762Z \tat com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:290)\r\n2023-11-03T14:32:14.663475263Z \t... 6 more\r\n```\r\n\r\n**DOCKERFILE**\r\n```\r\n# Build stage\r\nFROM maven:3.9.5-amazoncorretto-21 AS build\r\nCOPY src /home/app/src\r\nCOPY pom.xml /home/app\r\nRUN mvn -f /home/app/pom.xml clean package\r\n\r\n# Start stage\r\nFROM amazoncorretto:21-alpine-jdk AS start\r\nCOPY --from=build /home/app/target/JavaFXApp-1.0.0-SNAPSHOT.jar /tmp/app.jar\r\nWORKDIR /tmp\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\r\n```\r\n","title":"Running JavaFX application on Docker","body":"<p>I don't know how to launch an application that uses JavaFX on a Docker container.\nI'm simply trying to create the jar file with Maven and start it with the Java command but I get this error even though the application starts locally and the JavaFX libraries (javafx-controls and javafx-fxml) are embedded in the jar via dependencies Maven:</p>\n<pre><code>Nov 03, 2023 2:32:14 PM com.sun.javafx.application.PlatformImpl startup\n2023-11-03T14:32:14.602923007Z WARNING: Unsupported JavaFX configuration: classes were loaded from 'unnamed module @4b55eca5'\n2023-11-03T14:32:14.648250579Z Loading library prism_es2 from resource failed: java.lang.UnsatisfiedLinkError: /root/.openjfx/cache/22-ea+11/amd64/libprism_es2.so: Error loading shared library libX11.so.6: No such file or directory (needed by /root/.openjfx/cache/22-ea+11/amd64/libprism_es2.so)\n2023-11-03T14:32:14.648375491Z java.lang.UnsatisfiedLinkError: /root/.openjfx/cache/22-ea+11/amd64/libprism_es2.so: Error loading shared library libX11.so.6: No such file or directory (needed by /root/.openjfx/cache/22-ea+11/amd64/libprism_es2.so)\n2023-11-03T14:32:14.648493221Z  at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n2023-11-03T14:32:14.648503060Z  at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:331)\n2023-11-03T14:32:14.648594208Z  at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:197)\n2023-11-03T14:32:14.648603706Z  at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:139)\n2023-11-03T14:32:14.648669381Z  at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2418)\n2023-11-03T14:32:14.648680613Z  at java.base/java.lang.Runtime.load0(Runtime.java:852)\n2023-11-03T14:32:14.648735195Z  at java.base/java.lang.System.load(System.java:2021)\n2023-11-03T14:32:14.648873719Z  at com.sun.glass.utils.NativeLibLoader.installLibraryFromResource(NativeLibLoader.java:220)\n2023-11-03T14:32:14.648883428Z  at com.sun.glass.utils.NativeLibLoader.loadLibraryFromResource(NativeLibLoader.java:200)\n2023-11-03T14:32:14.648997836Z  at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:142)\n2023-11-03T14:32:14.649078980Z  at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:58)\n2023-11-03T14:32:14.649156217Z  at com.sun.prism.es2.ES2Pipeline.lambda$static$0(ES2Pipeline.java:63)\n2023-11-03T14:32:14.649165103Z  at java.base/java.security.AccessController.doPrivileged(AccessController.java:319)\n2023-11-03T14:32:14.649172387Z  at com.sun.prism.es2.ES2Pipeline.&lt;clinit&gt;(ES2Pipeline.java:52)\n2023-11-03T14:32:14.649176455Z  at java.base/java.lang.Class.forName0(Native Method)\n2023-11-03T14:32:14.649179681Z  at java.base/java.lang.Class.forName(Class.java:421)\n2023-11-03T14:32:14.649181605Z  at java.base/java.lang.Class.forName(Class.java:412)\n2023-11-03T14:32:14.649303115Z  at com.sun.prism.GraphicsPipeline.createPipeline(GraphicsPipeline.java:218)\n2023-11-03T14:32:14.649331429Z  at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:92)\n2023-11-03T14:32:14.649338042Z  at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\n2023-11-03T14:32:14.649395333Z  at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-11-03T14:32:14.660176242Z Loading library glass from resource failed: java.lang.UnsatisfiedLinkError: /root/.openjfx/cache/22-ea+11/amd64/libglass.so: Error loading shared library libX11.so.6: No such file or directory (needed by /root/.openjfx/cache/22-ea+11/amd64/libglass.so)\n2023-11-03T14:32:14.660200067Z java.lang.UnsatisfiedLinkError: /root/.openjfx/cache/22-ea+11/amd64/libglass.so: Error loading shared library libX11.so.6: No such file or directory (needed by /root/.openjfx/cache/22-ea+11/amd64/libglass.so)\n2023-11-03T14:32:14.660241290Z  at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n2023-11-03T14:32:14.660250467Z  at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:331)\n2023-11-03T14:32:14.660253934Z  at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:197)\n2023-11-03T14:32:14.660330566Z  at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:139)\n2023-11-03T14:32:14.660342178Z  at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2418)\n2023-11-03T14:32:14.660345634Z  at java.base/java.lang.Runtime.load0(Runtime.java:852)\n2023-11-03T14:32:14.660486417Z  at java.base/java.lang.System.load(System.java:2021)\n2023-11-03T14:32:14.660510433Z  at com.sun.glass.utils.NativeLibLoader.installLibraryFromResource(NativeLibLoader.java:220)\n2023-11-03T14:32:14.660534674Z  at com.sun.glass.utils.NativeLibLoader.loadLibraryFromResource(NativeLibLoader.java:200)\n2023-11-03T14:32:14.660611334Z  at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:142)\n2023-11-03T14:32:14.660621764Z  at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:58)\n2023-11-03T14:32:14.660750028Z  at com.sun.glass.ui.Application.loadNativeLibrary(Application.java:112)\n2023-11-03T14:32:14.660759265Z  at com.sun.glass.ui.Application.loadNativeLibrary(Application.java:120)\n2023-11-03T14:32:14.660775697Z  at com.sun.glass.ui.gtk.GtkApplication.lambda$static$1(GtkApplication.java:86)\n2023-11-03T14:32:14.660928126Z  at java.base/java.security.AccessController.doPrivileged(AccessController.java:319)\n2023-11-03T14:32:14.660950959Z  at com.sun.glass.ui.gtk.GtkApplication.&lt;clinit&gt;(GtkApplication.java:85)\n2023-11-03T14:32:14.660955819Z  at com.sun.glass.ui.gtk.GtkPlatformFactory.createApplication(GtkPlatformFactory.java:40)\n2023-11-03T14:32:14.661027716Z  at com.sun.glass.ui.Application.run(Application.java:146)\n2023-11-03T14:32:14.661037054Z  at com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:290)\n2023-11-03T14:32:14.661168074Z  at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:292)\n2023-11-03T14:32:14.661190787Z  at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:162)\n2023-11-03T14:32:14.661257750Z  at com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:651)\n2023-11-03T14:32:14.661278339Z  at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:671)\n2023-11-03T14:32:14.661304583Z  at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\n2023-11-03T14:32:14.661522828Z  at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-11-03T14:32:14.662193470Z Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.UnsatisfiedLinkError: no glass in java.library.path: /usr/lib/jvm/java-21-amazon-corretto/lib/server:/usr/lib/jvm/java-21-amazon-corretto/lib:/usr/lib/jvm/java-21-amazon-corretto/../lib:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\n2023-11-03T14:32:14.662230405Z  at com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:300)\n2023-11-03T14:32:14.662291592Z  at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:292)\n2023-11-03T14:32:14.662415748Z  at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:162)\n2023-11-03T14:32:14.662438131Z  at com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:651)\n2023-11-03T14:32:14.662504446Z  at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:671)\n2023-11-03T14:32:14.662623713Z  at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\n2023-11-03T14:32:14.662647919Z  at java.base/java.lang.Thread.run(Thread.java:1583)\n2023-11-03T14:32:14.662830747Z Caused by: java.lang.UnsatisfiedLinkError: no glass in java.library.path: /usr/lib/jvm/java-21-amazon-corretto/lib/server:/usr/lib/jvm/java-21-amazon-corretto/lib:/usr/lib/jvm/java-21-amazon-corretto/../lib:/usr/java/packages/lib:/usr/lib64:/lib64:/lib:/usr/lib\n2023-11-03T14:32:14.662855594Z  at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2458)\n2023-11-03T14:32:14.662861225Z  at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:916)\n2023-11-03T14:32:14.662864682Z  at java.base/java.lang.System.loadLibrary(System.java:2059)\n2023-11-03T14:32:14.663023354Z  at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:170)\n2023-11-03T14:32:14.663046057Z  at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:58)\n2023-11-03T14:32:14.663053080Z  at com.sun.glass.ui.Application.loadNativeLibrary(Application.java:112)\n2023-11-03T14:32:14.663080699Z  at com.sun.glass.ui.Application.loadNativeLibrary(Application.java:120)\n2023-11-03T14:32:14.663089746Z  at com.sun.glass.ui.gtk.GtkApplication.lambda$static$1(GtkApplication.java:86)\n2023-11-03T14:32:14.663220248Z  at java.base/java.security.AccessController.doPrivileged(AccessController.java:319)\n2023-11-03T14:32:14.663243743Z  at com.sun.glass.ui.gtk.GtkApplication.&lt;clinit&gt;(GtkApplication.java:85)\n2023-11-03T14:32:14.663335068Z  at com.sun.glass.ui.gtk.GtkPlatformFactory.createApplication(GtkPlatformFactory.java:40)\n2023-11-03T14:32:14.663343614Z  at com.sun.glass.ui.Application.run(Application.java:146)\n2023-11-03T14:32:14.663347762Z  at com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:290)\n2023-11-03T14:32:14.663475263Z  ... 6 more\n</code></pre>\n<p><strong>DOCKERFILE</strong></p>\n<pre><code># Build stage\nFROM maven:3.9.5-amazoncorretto-21 AS build\nCOPY src /home/app/src\nCOPY pom.xml /home/app\nRUN mvn -f /home/app/pom.xml clean package\n\n# Start stage\nFROM amazoncorretto:21-alpine-jdk AS start\nCOPY --from=build /home/app/target/JavaFXApp-1.0.0-SNAPSHOT.jar /tmp/app.jar\nWORKDIR /tmp\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]\n</code></pre>\n"},{"tags":["java","box2d","collision-detection","libgdx"],"answers":[{"comments":[{"owner":{"account_id":1628096,"reputation":765,"user_id":1503157,"accept_rate":88,"display_name":"thenewbie"},"score":0,"creation_date":1364798955,"post_id":15738849,"comment_id":22363121,"body_markdown":"So the use of kinematic is wrong in using for example a moving object on any direction? Because there is no collision on kinematic?","body":"So the use of kinematic is wrong in using for example a moving object on any direction? Because there is no collision on kinematic?"},{"owner":{"account_id":2011944,"reputation":1225,"user_id":1800173,"display_name":"Pranav008"},"score":0,"creation_date":1364799693,"post_id":15738849,"comment_id":22363352,"body_markdown":"Well  i didnt said that there is no collision on kinematic body. Kinematic body collide with dynamic bodies. Use of dynamic or kinematic or static body depends on the requirement of game. Generally if a body is moving then i prefer to keep it dynamic.","body":"Well  i didnt said that there is no collision on kinematic body. Kinematic body collide with dynamic bodies. Use of dynamic or kinematic or static body depends on the requirement of game. Generally if a body is moving then i prefer to keep it dynamic."},{"owner":{"account_id":3314914,"reputation":3432,"user_id":2787507,"accept_rate":23,"display_name":"nutella_eater"},"score":0,"creation_date":1699022317,"post_id":15738849,"comment_id":136482287,"body_markdown":"@Pranav008 please add reference or more explanation, elaborate. Thanks a lot!","body":"@Pranav008 please add reference or more explanation, elaborate. Thanks a lot!"}],"tags":[],"owner":{"account_id":2011944,"reputation":1225,"user_id":1800173,"display_name":"Pranav008"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1699022289,"creation_date":1364798493,"answer_id":15738849,"question_id":15736808,"body_markdown":"Kinematic body don&#39;t collide with static body.\r\nMaybe this will help you.\r\n[][1]\r\n\r\n\r\n  \r\n\r\n\r\n  [1]: http://box2d.org/forum/viewtopic.php?f=3&amp;t=5360","title":"Collision detection in kinematic bodies LIBGDX","body":"<p>Kinematic body don't collide with static body.\nMaybe this will help you.\n<a href=\"http://box2d.org/forum/viewtopic.php?f=3&amp;t=5360\" rel=\"nofollow noreferrer\"></a></p>\n"},{"tags":[],"owner":{"account_id":4289822,"reputation":607,"user_id":3506498,"accept_rate":83,"display_name":"Sri Krishna Paritala"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1397463209,"creation_date":1397463209,"answer_id":23055127,"question_id":15736808,"body_markdown":"Kinematic Bodies are only influenced by velocities and not by forces\r\nStatic bodies have O displacement but are effected by forces i.e. they generate impulse upon collision whereas Dynamic Bodies have both\r\n","title":"Collision detection in kinematic bodies LIBGDX","body":"<p>Kinematic Bodies are only influenced by velocities and not by forces\nStatic bodies have O displacement but are effected by forces i.e. they generate impulse upon collision whereas Dynamic Bodies have both</p>\n"}],"owner":{"account_id":1628096,"reputation":765,"user_id":1503157,"accept_rate":88,"display_name":"thenewbie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4960,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":15738849,"answer_count":2,"score":2,"last_activity_date":1699022289,"creation_date":1364782619,"question_id":15736808,"body_markdown":"I managed to use box2d in libgdx. However the example code given [here][1] is for dynamic body only. I tried to use it and it works great but when i change the Dynamic to KinematicBody the code does not work. here is my code\r\n\r\n \r\n\r\n        @Override\r\n            public void create() {\r\n          // Create our body definition\r\n                BodyDef groundBodyDef =new BodyDef();\r\n                groundBodyDef.type = BodyDef.BodyType.StaticBody;\r\n        // Set its world position\r\n                groundBodyDef.position.set(new Vector2(0, 10));\r\n        \r\n        // Create a body from the defintion and add it to the world\r\n                 groundBody = world.createBody(groundBodyDef);\r\n        \r\n        // Create a polygon shape\r\n                PolygonShape groundBox = new PolygonShape();\r\n        // Set the polygon shape as a box which is twice the size of our view port and 20 high\r\n        // (setAsBox takes half-width and half-height as arguments)\r\n                groundBox.setAsBox(camera.viewportWidth, 10.0f);\r\n        // Create a fixture from our polygon shape and add it to our ground body\r\n                groundBody.createFixture(groundBox, 0.0f);\r\n        // Clean up after ourselves\r\n                groundBox.dispose();\r\n        \r\n                //endregion\r\n        \r\n        \r\n                BodyDef bodyDef = new BodyDef();\r\n        // We set our body to dynamic, for something like ground which doesnt move we would set it to StaticBody\r\n                bodyDef.type = BodyDef.BodyType.KinematicBody;\r\n        // Set our body&#39;s starting position in the world\r\n                bodyDef.position.set(bolaX, bolaY);\r\n        \r\n        // Create our body in the world using our body definition\r\n                 body = world.createBody(bodyDef);\r\n        \r\n        // Create a circle shape and set its radius to 6\r\n                CircleShape circle = new CircleShape();\r\n                circle.setRadius(20f);\r\n        \r\n        \r\n        // Create a fixture definition to apply our shape to\r\n                FixtureDef fixtureDef = new FixtureDef();\r\n                fixtureDef.shape = circle;\r\n                fixtureDef.density = 20;\r\n        \r\n                fixtureDef.friction = 0;\r\n                fixtureDef.restitution = 0.6f; // Make it bounce a little bit\r\n        \r\n        // Create our fixture and attach it to the body\r\n                Fixture fixture = body.createFixture(fixtureDef);\r\n        \r\n        // Remember to dispose of any shapes after you&#39;re done with them!\r\n        // BodyDef and FixtureDef don&#39;t need disposing, but shapes do.\r\n                circle.dispose();\r\n        \r\n                Gdx.input.setInputProcessor(this);\r\n        }\r\n    \r\n     \r\n    \r\n         @Override\r\n            public void render() {\r\n        \r\n        \r\n                world.step(1/60f, 6, 2);\r\n        \r\n        \r\n        \r\n                Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);\r\n                camera.update();\r\n        \r\n        \r\n        \r\n                //batch.getProjectionMatrix().set(camera.combined);\r\n                batch.begin();\r\n                textureBodies = body.getPosition();\r\n                float angle = MathUtils.radiansToDegrees * body.getAngle();\r\n                //batch.draw(ball,textureBodies.x ,textureBodies.y  );\r\n                batch.draw(ball, textureBodies.x - (bola.getWidth() / 2) , textureBodies.y - (bola.getHeight()/2) , // the bottom left corner of the box, unrotated\r\n                        1f, 1f, // the rotation center relative to the bottom left corner of the box\r\n                        bola.getWidth(), bola.getHeight(), // the width and height of the box\r\n                        1, 1, // the scale on the x- and y-axis\r\n                        angle);\r\n                batch.end();\r\n        \r\n                debugRenderer.render(world, camera.combined);\r\n                    if(Gdx.input.isKeyPressed(Input.Keys.DPAD_UP)){\r\n                        Gdx.app.log(&quot;Input Test&quot;, &quot;key down: &quot; + &quot;aw ---- x&quot; +  body.getPosition().x + &quot;  y   &quot; + body.getPosition().y);\r\n                        vel += 1;\r\n                        //Gdx.app.log(&quot;vel&quot;,&quot;&quot; + vel);\r\n                        body.setLinearVelocity(0f,vel);\r\n                    } else{\r\n                        vel -= 1;\r\n                       // Gdx.app.log(&quot;vel&quot;,&quot;&quot; + body.getPosition().y);\r\n                        body.setLinearVelocity(0f,vel);\r\n                    }\r\n    \r\n      int numContacts = world.getContactCount();\r\n            if (numContacts &gt; 0) {\r\n                Gdx.app.log(&quot;contact&quot;, &quot;start of contact list&quot;);\r\n                for (Contact contact : world.getContactList()) {\r\n                    Fixture fixtureA = contact.getFixtureA();\r\n                    Fixture fixtureB = contact.getFixtureB();\r\n                    Gdx.app.log(&quot;contact&quot;, &quot;between &quot; + fixtureA.toString() + &quot; and &quot; + fixtureB.toString());\r\n                }\r\n                Gdx.app.log(&quot;contact&quot;, &quot;end of contact list&quot;);\r\n            }\r\n    \r\n        \r\n            }\r\n\r\nAnd here is the image.. You can see in the left side is the DynamicBody and the right side is the KinematicBody.\r\n\r\n![enter image description here][2]\r\n\r\nGetting the contacts works on Dynamic Body but not on Kinematic Body. Can you tell how to detect the collision in kinematic body? \r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/15453176/how-to-use-the-libgdx-contactlistener\r\n  [2]: http://i.stack.imgur.com/FZPEJ.png","title":"Collision detection in kinematic bodies LIBGDX","body":"<p>I managed to use box2d in libgdx. However the example code given <a href=\"https://stackoverflow.com/questions/15453176/how-to-use-the-libgdx-contactlistener\">here</a> is for dynamic body only. I tried to use it and it works great but when i change the Dynamic to KinematicBody the code does not work. here is my code</p>\n\n<pre><code>    @Override\n        public void create() {\n      // Create our body definition\n            BodyDef groundBodyDef =new BodyDef();\n            groundBodyDef.type = BodyDef.BodyType.StaticBody;\n    // Set its world position\n            groundBodyDef.position.set(new Vector2(0, 10));\n\n    // Create a body from the defintion and add it to the world\n             groundBody = world.createBody(groundBodyDef);\n\n    // Create a polygon shape\n            PolygonShape groundBox = new PolygonShape();\n    // Set the polygon shape as a box which is twice the size of our view port and 20 high\n    // (setAsBox takes half-width and half-height as arguments)\n            groundBox.setAsBox(camera.viewportWidth, 10.0f);\n    // Create a fixture from our polygon shape and add it to our ground body\n            groundBody.createFixture(groundBox, 0.0f);\n    // Clean up after ourselves\n            groundBox.dispose();\n\n            //endregion\n\n\n            BodyDef bodyDef = new BodyDef();\n    // We set our body to dynamic, for something like ground which doesnt move we would set it to StaticBody\n            bodyDef.type = BodyDef.BodyType.KinematicBody;\n    // Set our body's starting position in the world\n            bodyDef.position.set(bolaX, bolaY);\n\n    // Create our body in the world using our body definition\n             body = world.createBody(bodyDef);\n\n    // Create a circle shape and set its radius to 6\n            CircleShape circle = new CircleShape();\n            circle.setRadius(20f);\n\n\n    // Create a fixture definition to apply our shape to\n            FixtureDef fixtureDef = new FixtureDef();\n            fixtureDef.shape = circle;\n            fixtureDef.density = 20;\n\n            fixtureDef.friction = 0;\n            fixtureDef.restitution = 0.6f; // Make it bounce a little bit\n\n    // Create our fixture and attach it to the body\n            Fixture fixture = body.createFixture(fixtureDef);\n\n    // Remember to dispose of any shapes after you're done with them!\n    // BodyDef and FixtureDef don't need disposing, but shapes do.\n            circle.dispose();\n\n            Gdx.input.setInputProcessor(this);\n    }\n\n\n\n     @Override\n        public void render() {\n\n\n            world.step(1/60f, 6, 2);\n\n\n\n            Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);\n            camera.update();\n\n\n\n            //batch.getProjectionMatrix().set(camera.combined);\n            batch.begin();\n            textureBodies = body.getPosition();\n            float angle = MathUtils.radiansToDegrees * body.getAngle();\n            //batch.draw(ball,textureBodies.x ,textureBodies.y  );\n            batch.draw(ball, textureBodies.x - (bola.getWidth() / 2) , textureBodies.y - (bola.getHeight()/2) , // the bottom left corner of the box, unrotated\n                    1f, 1f, // the rotation center relative to the bottom left corner of the box\n                    bola.getWidth(), bola.getHeight(), // the width and height of the box\n                    1, 1, // the scale on the x- and y-axis\n                    angle);\n            batch.end();\n\n            debugRenderer.render(world, camera.combined);\n                if(Gdx.input.isKeyPressed(Input.Keys.DPAD_UP)){\n                    Gdx.app.log(\"Input Test\", \"key down: \" + \"aw ---- x\" +  body.getPosition().x + \"  y   \" + body.getPosition().y);\n                    vel += 1;\n                    //Gdx.app.log(\"vel\",\"\" + vel);\n                    body.setLinearVelocity(0f,vel);\n                } else{\n                    vel -= 1;\n                   // Gdx.app.log(\"vel\",\"\" + body.getPosition().y);\n                    body.setLinearVelocity(0f,vel);\n                }\n\n  int numContacts = world.getContactCount();\n        if (numContacts &gt; 0) {\n            Gdx.app.log(\"contact\", \"start of contact list\");\n            for (Contact contact : world.getContactList()) {\n                Fixture fixtureA = contact.getFixtureA();\n                Fixture fixtureB = contact.getFixtureB();\n                Gdx.app.log(\"contact\", \"between \" + fixtureA.toString() + \" and \" + fixtureB.toString());\n            }\n            Gdx.app.log(\"contact\", \"end of contact list\");\n        }\n\n\n        }\n</code></pre>\n\n<p>And here is the image.. You can see in the left side is the DynamicBody and the right side is the KinematicBody.</p>\n\n<p><img src=\"https://i.stack.imgur.com/FZPEJ.png\" alt=\"enter image description here\"></p>\n\n<p>Getting the contacts works on Dynamic Body but not on Kinematic Body. Can you tell how to detect the collision in kinematic body? </p>\n"},{"tags":["java","spring","hibernate","jpql"],"comments":[{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1699359470,"post_id":77417516,"comment_id":136519247,"body_markdown":"What JDK-Version are you using?","body":"What JDK-Version are you using?"}],"owner":{"account_id":20792361,"reputation":3,"user_id":19436937,"display_name":"Fetix"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699022182,"creation_date":1699022138,"question_id":77417516,"body_markdown":"Spring 3.0.12\r\nDatabase: H2\r\nClass, i use generics:\r\n```\r\npublic interface AbstractTempDataRepository&lt;TEMP_DATA extends AbstractTempData&lt;?, ?&gt;&gt; extends AbstractCoreRepository&lt;TEMP_DATA, Long, SearchTempDataDTO&gt;\r\n```\r\n\r\nI have this part, and in this place &quot; td.owner.id &quot; i have excp.\r\n\r\n\r\n```\r\n@Query(&quot;SELECT td FROM TempData td WHERE td.owner.id = ?1&quot;) \r\nList&lt;TEMP_DATA&gt; findAllByOwnerId(String ownerId, Pageable pageable);\r\n```\r\n\r\n\r\nAnd like result this part of message: \r\n\r\n\r\n```\r\nCaused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [SELECT td FROM TempData td WHERE td.owner.id = ?1]; this may indicate a semantic (user query) problem or a bug in the parser [SELECT td FROM TempData td WHERE td.owner.id = ?1]\r\n\r\nCaused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: Could not resolve attribute &#39;id&#39; of &#39;project.module.file_storage.configuration.abstraction.data.domain.FileStorageModuleAccount\r\n\r\nCaused by: org.hibernate.query.SemanticException: Could not resolve attribute &#39;id&#39; of &#39;project.module.file_storage.configuration.abstraction.data.domain.FileStorageModuleAccount\r\n```\r\n\r\nHint, how is it possible to ignore or some other options, without native query, thanks\r\n","title":"Not correct query JPQL in Spring 3","body":"<p>Spring 3.0.12\nDatabase: H2\nClass, i use generics:</p>\n<pre><code>public interface AbstractTempDataRepository&lt;TEMP_DATA extends AbstractTempData&lt;?, ?&gt;&gt; extends AbstractCoreRepository&lt;TEMP_DATA, Long, SearchTempDataDTO&gt;\n</code></pre>\n<p>I have this part, and in this place &quot; td.owner.id &quot; i have excp.</p>\n<pre><code>@Query(&quot;SELECT td FROM TempData td WHERE td.owner.id = ?1&quot;) \nList&lt;TEMP_DATA&gt; findAllByOwnerId(String ownerId, Pageable pageable);\n</code></pre>\n<p>And like result this part of message:</p>\n<pre><code>Caused by: org.hibernate.query.sqm.InterpretationException: Error interpreting query [SELECT td FROM TempData td WHERE td.owner.id = ?1]; this may indicate a semantic (user query) problem or a bug in the parser [SELECT td FROM TempData td WHERE td.owner.id = ?1]\n\nCaused by: java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: Could not resolve attribute 'id' of 'project.module.file_storage.configuration.abstraction.data.domain.FileStorageModuleAccount\n\nCaused by: org.hibernate.query.SemanticException: Could not resolve attribute 'id' of 'project.module.file_storage.configuration.abstraction.data.domain.FileStorageModuleAccount\n</code></pre>\n<p>Hint, how is it possible to ignore or some other options, without native query, thanks</p>\n"},{"tags":["java","string","char"],"comments":[{"owner":{"account_id":145555,"reputation":21469,"user_id":355438,"display_name":"Ilya Serbis"},"score":0,"creation_date":1634859562,"post_id":537174,"comment_id":123146982,"body_markdown":"also, see https://stackoverflow.com/questions/4169699/string-manipulation-insert-a-character-every-4th-character","body":"also, see <a href=\"https://stackoverflow.com/questions/4169699/string-manipulation-insert-a-character-every-4th-character\" title=\"string manipulation insert a character every 4th character\">stackoverflow.com/questions/4169699/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":15271,"reputation":63428,"user_id":32090,"accept_rate":91,"display_name":"Boris Pavlović"},"score":0,"creation_date":1234364640,"post_id":537185,"comment_id":349555,"body_markdown":"I&#39;m getting:\nInvalid escape sequence (valid ones are \\b \\t \\n \\f \\r \\&quot; \\&#39; \\\\ )\nfor &quot;(.{1,10}\\s+&quot;","body":"I&#39;m getting: Invalid escape sequence (valid ones are \\b \\t \\n \\f \\r \\&quot; \\&#39; \\\\ ) for &quot;(.{1,10}\\s+&quot;"},{"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"score":0,"creation_date":1234364756,"post_id":537185,"comment_id":349561,"body_markdown":"Fixed it.  It should&#39;ve been \\\\s but I&#39;d mistakenly assumed you wanted to break on word boundaries.  You don&#39;t so the above should work and is much easier.","body":"Fixed it.  It should&#39;ve been \\\\s but I&#39;d mistakenly assumed you wanted to break on word boundaries.  You don&#39;t so the above should work and is much easier."}],"tags":[],"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"comment_count":2,"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1234440440,"creation_date":1234364463,"answer_id":537185,"question_id":537174,"body_markdown":"Try:\r\n\r\n    String s = // long string\r\n    s.replaceAll(&quot;(.{10})&quot;, &quot;$1&lt;br&gt;&quot;);\r\n\r\n**EDIT:** The above works... most of the time.  I&#39;ve been playing around with it and came across a problem: since it constructs a default Pattern internally it halts on newlines.  to get around this you have to write it differently.\r\n\r\n    public static String insert(String text, String insert, int period) {\r\n        Pattern p = Pattern.compile(&quot;(.{&quot; + period + &quot;})&quot;, Pattern.DOTALL);\r\n        Matcher m = p.matcher(text);\r\n        return m.replaceAll(&quot;$1&quot; + insert);\r\n    }\r\n\r\nand the astute reader will pick up on another problem: you have to escape regex special characters (like &quot;$1&quot;) in the replacement text or you&#39;ll get unpredictable results.\r\n\r\nI also got curious and benchmarked this version against Jon&#39;s above.  This one is slower by an order of magnitude (1000 replacements on a 60k file took 4.5 seconds with this, 400ms with his).  Of the 4.5 seconds, only about 0.7 seconds was actually constructing the Pattern.  Most of it was on the matching/replacement so it doesn&#39;t even ledn itself to that kind of optimization.\r\n\r\nI normally prefer the less wordy solutions to things.  After all, more code = more potential bugs.  But in this case I must concede that Jon&#39;s version--which is really the naive implementation (I mean that in a **good way**)--is significantly better.\r\n","title":"Putting char into a java string for each N characters","body":"<p>Try:</p>\n\n<pre><code>String s = // long string\ns.replaceAll(\"(.{10})\", \"$1&lt;br&gt;\");\n</code></pre>\n\n<p><strong>EDIT:</strong> The above works... most of the time.  I've been playing around with it and came across a problem: since it constructs a default Pattern internally it halts on newlines.  to get around this you have to write it differently.</p>\n\n<pre><code>public static String insert(String text, String insert, int period) {\n    Pattern p = Pattern.compile(\"(.{\" + period + \"})\", Pattern.DOTALL);\n    Matcher m = p.matcher(text);\n    return m.replaceAll(\"$1\" + insert);\n}\n</code></pre>\n\n<p>and the astute reader will pick up on another problem: you have to escape regex special characters (like \"$1\") in the replacement text or you'll get unpredictable results.</p>\n\n<p>I also got curious and benchmarked this version against Jon's above.  This one is slower by an order of magnitude (1000 replacements on a 60k file took 4.5 seconds with this, 400ms with his).  Of the 4.5 seconds, only about 0.7 seconds was actually constructing the Pattern.  Most of it was on the matching/replacement so it doesn't even ledn itself to that kind of optimization.</p>\n\n<p>I normally prefer the less wordy solutions to things.  After all, more code = more potential bugs.  But in this case I must concede that Jon's version--which is really the naive implementation (I mean that in a <strong>good way</strong>)--is significantly better.</p>\n"},{"comments":[{"owner":{"account_id":17535,"reputation":4551,"user_id":39339,"accept_rate":88,"display_name":"JuanDeLosMuertos"},"score":1,"creation_date":1234364970,"post_id":537190,"comment_id":349579,"body_markdown":"fantastic! and what about if I do not want to put &lt;br&gt; within words? for example avoiding things like: stackover&lt;br&gt;flow and putting directly &lt;br&gt; at the end of the word?","body":"fantastic! and what about if I do not want to put &lt;br&gt; within words? for example avoiding things like: stackover&lt;br&gt;flow and putting directly &lt;br&gt; at the end of the word?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1234365274,"post_id":537190,"comment_id":349604,"body_markdown":"Then that&#39;s a significantly harder problem. A regular expression *may* be the best way there, but you&#39;d need to state the requirements *very* precisely first.","body":"Then that&#39;s a significantly harder problem. A regular expression <i>may</i> be the best way there, but you&#39;d need to state the requirements <i>very</i> precisely first."},{"owner":{"account_id":1155134,"reputation":13311,"user_id":1135954,"accept_rate":68,"display_name":"mtk"},"score":1,"creation_date":1424951973,"post_id":537190,"comment_id":45766838,"body_markdown":"a short version of your code with regex in this post.. http://stackoverflow.com/questions/10530102/java-parse-string-and-add-line-break-every-100-characters","body":"a short version of your code with regex in this post.. <a href=\"http://stackoverflow.com/questions/10530102/java-parse-string-and-add-line-break-every-100-characters\" title=\"java parse string and add line break every 100 characters\">stackoverflow.com/questions/10530102/&hellip;</a>"},{"owner":{"account_id":1155134,"reputation":13311,"user_id":1135954,"accept_rate":68,"display_name":"mtk"},"score":0,"creation_date":1424952094,"post_id":537190,"comment_id":45766909,"body_markdown":"@Giancarlo if you do not want to break within the word, then you can probably just run a simple for loop and keep track of number of character after which you need to insert a `&lt;br&gt;` and insert it if only the current character is a `space`, or else move till the first space character and insert the `&lt;br&gt;`","body":"@Giancarlo if you do not want to break within the word, then you can probably just run a simple for loop and keep track of number of character after which you need to insert a <code>&lt;br&gt;</code> and insert it if only the current character is a <code>space</code>, or else move till the first space character and insert the <code>&lt;br&gt;</code>"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1424955329,"post_id":537190,"comment_id":45768856,"body_markdown":"@mtk: This question was asked over 6 years ago. I *suspect* the OP has moved on from this issue now :)","body":"@mtk: This question was asked over 6 years ago. I <i>suspect</i> the OP has moved on from this issue now :)"},{"owner":{"account_id":1155134,"reputation":13311,"user_id":1135954,"accept_rate":68,"display_name":"mtk"},"score":0,"creation_date":1424956929,"post_id":537190,"comment_id":45769821,"body_markdown":"@JonSkeet Oh yes, i didn&#39;t realize.. :)","body":"@JonSkeet Oh yes, i didn&#39;t realize.. :)"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":6,"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1234364497,"creation_date":1234364497,"answer_id":537190,"question_id":537174,"body_markdown":"Something like:\r\n\r\n    public static String insertPeriodically(\r\n        String text, String insert, int period)\r\n    {\r\n        StringBuilder builder = new StringBuilder(\r\n             text.length() + insert.length() * (text.length()/period)+1);\r\n\r\n        int index = 0;\r\n        String prefix = &quot;&quot;;\r\n        while (index &lt; text.length())\r\n        {\r\n            // Don&#39;t put the insert in the very first iteration.\r\n            // This is easier than appending it *after* each substring\r\n            builder.append(prefix);\r\n            prefix = insert;\r\n            builder.append(text.substring(index, \r\n                Math.min(index + period, text.length())));\r\n            index += period;\r\n        }\r\n        return builder.toString();\r\n    }","title":"Putting char into a java string for each N characters","body":"<p>Something like:</p>\n\n<pre><code>public static String insertPeriodically(\n    String text, String insert, int period)\n{\n    StringBuilder builder = new StringBuilder(\n         text.length() + insert.length() * (text.length()/period)+1);\n\n    int index = 0;\n    String prefix = \"\";\n    while (index &lt; text.length())\n    {\n        // Don't put the insert in the very first iteration.\n        // This is easier than appending it *after* each substring\n        builder.append(prefix);\n        prefix = insert;\n        builder.append(text.substring(index, \n            Math.min(index + period, text.length())));\n        index += period;\n    }\n    return builder.toString();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17336,"reputation":4176,"user_id":38714,"accept_rate":100,"display_name":"Stephen"},"score":0,"creation_date":1234364848,"post_id":537210,"comment_id":349572,"body_markdown":"Missing a trailing paren on the first append, also goes out of the string bounds","body":"Missing a trailing paren on the first append, also goes out of the string bounds"},{"owner":{"account_id":9867,"reputation":618201,"user_id":18393,"accept_rate":82,"display_name":"cletus"},"score":0,"creation_date":1234364904,"post_id":537210,"comment_id":349577,"body_markdown":"You should probably use StringBuilder not StringBuffer.","body":"You should probably use StringBuilder not StringBuffer."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1234440948,"post_id":537210,"comment_id":353121,"body_markdown":"For big Strings it might be a good idea to set the initial size of the StringBuffer/StringBuilder to (myString.length()*1.1) this way resizing the internal buffer will be avoided.","body":"For big Strings it might be a good idea to set the initial size of the StringBuffer/StringBuilder to (myString.length()*1.1) this way resizing the internal buffer will be avoided."},{"owner":{"account_id":11149602,"reputation":763,"user_id":8183283,"display_name":"Mira_Cole"},"score":0,"creation_date":1519400508,"post_id":537210,"comment_id":84909433,"body_markdown":"This solution is missing an end parenthesis and throws an OutOfBoundException if myString.length() is not perfectly divisible by 10. I see someone else already mentioned this.\nHowever, no one mentioned that this can be more efficient by evaluating myString.length() before the loop, not every single loop.","body":"This solution is missing an end parenthesis and throws an OutOfBoundException if myString.length() is not perfectly divisible by 10. I see someone else already mentioned this. However, no one mentioned that this can be more efficient by evaluating myString.length() before the loop, not every single loop."}],"tags":[],"owner":{"account_id":10258,"reputation":26470,"user_id":19276,"accept_rate":81,"display_name":"DJClayworth"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495093415,"creation_date":1234364643,"answer_id":537210,"question_id":537174,"body_markdown":"    StringBuilder buf = new StringBuilder();\r\n    \r\n    for (int i = 0; i &lt; myString.length(); i += 10) {\r\n        buf.append(myString.substring(i, i + 10);\r\n        buf.append(&quot;\\n&quot;);\r\n    }\r\n\r\n\r\nYou can get more efficient than that, but I&#39;ll leave that as an exercise for the reader.","title":"Putting char into a java string for each N characters","body":"<pre><code>StringBuilder buf = new StringBuilder();\n\nfor (int i = 0; i &lt; myString.length(); i += 10) {\n    buf.append(myString.substring(i, i + 10);\n    buf.append(\"\\n\");\n}\n</code></pre>\n\n<p>You can get more efficient than that, but I'll leave that as an exercise for the reader.</p>\n"},{"tags":[],"owner":{"account_id":1108,"reputation":9901,"user_id":1471,"accept_rate":64,"display_name":"Tim Frey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1234364646,"creation_date":1234364646,"answer_id":537212,"question_id":537174,"body_markdown":"How about 1 method to split the string every N characters:\r\n\r\n    public static String[] split(String source, int n)\r\n    {\r\n        List&lt;String&gt; results = new ArrayList&lt;String&gt;();\r\n\r\n        int start = 0;\r\n        int end = 10;\r\n\r\n        while(end &lt; source.length)\r\n        {\r\n            results.add(source.substring(start, end);\r\n            start = end;\r\n            end += 10;\r\n        }\r\n \r\n        return results.toArray(new String[results.size()]);\r\n    }\r\n\r\nThen another method to insert something after each piece:\r\n\r\n    public static String insertAfterN(String source, int n, String toInsert)\r\n    {\r\n        StringBuilder result = new StringBuilder();\r\n\r\n        for(String piece : split(source, n))\r\n        {\r\n            result.append(piece);\r\n            if(piece.length == n)\r\n                result.append(toInsert);\r\n        }\r\n\r\n        return result.toString();\r\n    }","title":"Putting char into a java string for each N characters","body":"<p>How about 1 method to split the string every N characters:</p>\n\n<pre><code>public static String[] split(String source, int n)\n{\n    List&lt;String&gt; results = new ArrayList&lt;String&gt;();\n\n    int start = 0;\n    int end = 10;\n\n    while(end &lt; source.length)\n    {\n        results.add(source.substring(start, end);\n        start = end;\n        end += 10;\n    }\n\n    return results.toArray(new String[results.size()]);\n}\n</code></pre>\n\n<p>Then another method to insert something after each piece:</p>\n\n<pre><code>public static String insertAfterN(String source, int n, String toInsert)\n{\n    StringBuilder result = new StringBuilder();\n\n    for(String piece : split(source, n))\n    {\n        result.append(piece);\n        if(piece.length == n)\n            result.append(toInsert);\n    }\n\n    return result.toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"Royston Bok"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1242012487,"creation_date":1242012487,"answer_id":846636,"question_id":537174,"body_markdown":"To avoid chopping off the words...\r\n\r\nTry:\r\n\r\n        int wrapLength = 10;\r\n\t\tString wrapString = new String();\r\n   \t    \r\n\t    String remainString = &quot;The quick brown fox jumps over the lazy dog The quick brown fox jumps over the lazy dog&quot;;\r\n\t    \r\n\t\twhile(remainString.length()&gt;wrapLength){\r\n\t\t\tint lastIndex = remainString.lastIndexOf(&quot; &quot;, wrapLength);\r\n\t\t\twrapString = wrapString.concat(remainString.substring(0, lastIndex));\r\n\t\t\twrapString = wrapString.concat(&quot;\\n&quot;);\r\n\r\n\t\t\tremainString = remainString.substring(lastIndex+1, remainString.length());\r\n\t\t}\r\n\t\t\t\r\n\t\tSystem.out.println(wrapString);\t\r\n","title":"Putting char into a java string for each N characters","body":"<p>To avoid chopping off the words...</p>\n\n<p>Try:</p>\n\n<pre><code>    int wrapLength = 10;\n    String wrapString = new String();\n\n    String remainString = \"The quick brown fox jumps over the lazy dog The quick brown fox jumps over the lazy dog\";\n\n    while(remainString.length()&gt;wrapLength){\n        int lastIndex = remainString.lastIndexOf(\" \", wrapLength);\n        wrapString = wrapString.concat(remainString.substring(0, lastIndex));\n        wrapString = wrapString.concat(\"\\n\");\n\n        remainString = remainString.substring(lastIndex+1, remainString.length());\n    }\n\n    System.out.println(wrapString); \n</code></pre>\n"},{"comments":[{"owner":{"account_id":482558,"reputation":29193,"user_id":897024,"accept_rate":100,"display_name":"kapex"},"score":2,"creation_date":1478880376,"post_id":37977587,"comment_id":68341961,"body_markdown":"In Java 8 you can use `return String.join(delim, split);` instead of guava.","body":"In Java 8 you can use <code>return String.join(delim, split);</code> instead of guava."}],"tags":[],"owner":{"account_id":23551,"reputation":30672,"user_id":59087,"accept_rate":99,"display_name":"Dave Jarvis"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466626955,"creation_date":1466626955,"answer_id":37977587,"question_id":537174,"body_markdown":"If you don&#39;t mind a dependency on a [third-party library][1] and don&#39;t mind [regexes][2]:\r\n\r\n    import com.google.common.base.Joiner;\r\n\r\n    /**\r\n     * Splits a string into N pieces separated by a delimiter.\r\n     *\r\n     * @param text The text to split.\r\n     * @param delim The string to inject every N pieces.\r\n     * @param period The number of pieces (N) to split the text.\r\n     * @return The string split into pieces delimited by delim.\r\n     */\r\n    public static String split( final String text, final String delim, final int period ) {\r\n        final String[] split = text.split(&quot;(?&lt;=\\\\G.{&quot;+period+&quot;})&quot;);\r\n        return Joiner.on(delim).join(split);\r\n    }\r\n\r\nThen:\r\n\r\n    split( &quot;This is my string&quot;, &quot;&lt;br/&gt;&quot;, 5 );  \r\n\r\nThis doesn&#39;t split words at spaces but the question, as stated, doesn&#39;t ask for word-wrap.\r\n\r\n  [1]: http://google.github.io/guava/releases/16.0/api/docs/com/google/common/base/Joiner.html\r\n  [2]: https://stackoverflow.com/a/12295805/59087","title":"Putting char into a java string for each N characters","body":"<p>If you don't mind a dependency on a <a href=\"http://google.github.io/guava/releases/16.0/api/docs/com/google/common/base/Joiner.html\" rel=\"nofollow noreferrer\">third-party library</a> and don't mind <a href=\"https://stackoverflow.com/a/12295805/59087\">regexes</a>:</p>\n\n<pre><code>import com.google.common.base.Joiner;\n\n/**\n * Splits a string into N pieces separated by a delimiter.\n *\n * @param text The text to split.\n * @param delim The string to inject every N pieces.\n * @param period The number of pieces (N) to split the text.\n * @return The string split into pieces delimited by delim.\n */\npublic static String split( final String text, final String delim, final int period ) {\n    final String[] split = text.split(\"(?&lt;=\\\\G.{\"+period+\"})\");\n    return Joiner.on(delim).join(split);\n}\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>split( \"This is my string\", \"&lt;br/&gt;\", 5 );  \n</code></pre>\n\n<p>This doesn't split words at spaces but the question, as stated, doesn't ask for word-wrap.</p>\n"},{"tags":[],"owner":{"account_id":3294162,"reputation":21,"user_id":2771781,"display_name":"Qarj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1512688964,"creation_date":1512688964,"answer_id":47705472,"question_id":537174,"body_markdown":"I&#39;ve unit tested this solution for boundary conditions:\r\n\r\n    public String padded(String original, int interval, String separator) {\r\n        String formatted = &quot;&quot;;\r\n\r\n        for(int i = 0; i &lt; original.length(); i++) {\r\n            if (i % interval == 0 &amp;&amp; i &gt; 0) {\r\n                formatted += separator;\r\n            }\r\n            formatted += original.substring(i, i+1);\r\n        }\r\n\r\n        return formatted;\r\n    }\r\n\r\nCall with:\r\n\r\n    padded(&quot;this is my string which I need to modify...I love stackoverflow:)&quot;, 10, &quot;&lt;br&gt;&quot;);\r\n","title":"Putting char into a java string for each N characters","body":"<p>I've unit tested this solution for boundary conditions:</p>\n\n<pre><code>public String padded(String original, int interval, String separator) {\n    String formatted = \"\";\n\n    for(int i = 0; i &lt; original.length(); i++) {\n        if (i % interval == 0 &amp;&amp; i &gt; 0) {\n            formatted += separator;\n        }\n        formatted += original.substring(i, i+1);\n    }\n\n    return formatted;\n}\n</code></pre>\n\n<p>Call with:</p>\n\n<pre><code>padded(\"this is my string which I need to modify...I love stackoverflow:)\", 10, \"&lt;br&gt;\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11149602,"reputation":763,"user_id":8183283,"display_name":"Mira_Cole"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519399863,"creation_date":1519399863,"answer_id":48951256,"question_id":537174,"body_markdown":"The following method takes three parameters. The first is the text that you want to modify. The second parameter is the text you want to insert every n characters. The third is the interval in which you want to insert the text at.\r\n\r\n    private String insertEveryNCharacters(String originalText, String textToInsert, int breakInterval) {\r\n        String withBreaks = &quot;&quot;;\r\n        int textLength = originalText.length(); //initialize this here or in the start of the for in order to evaluate this once, not every loop\r\n        for (int i = breakInterval , current = 0; i &lt;= textLength || current &lt; textLength; current = i, i += breakInterval ) {\r\n            if(current != 0) {  //do not insert the text on the first loop\r\n                withBreaks += textToInsert;\r\n            }\r\n            if(i &lt;= textLength) { //double check that text is at least long enough to go to index i without out of bounds exception\r\n                withBreaks += originalText.substring(current, i);\r\n            } else { //text left is not longer than the break interval, so go simply from current to end.\r\n                withBreaks += originalText.substring(current); //current to end (if text is not perfectly divisible by interval, it will still get included)\r\n            }\r\n        }\r\n        return withBreaks;\r\n    }\r\n\r\nYou would call to this method like this:\r\n\r\n    String splitText = insertEveryNCharacters(&quot;this is my string which I need to modify...I love stackoverlow:)&quot;, &quot;&lt;br&gt;&quot;, 10);\r\n\r\nThe result is:\r\n\r\n    this is my&lt;br&gt; string wh&lt;br&gt;ich I need&lt;br&gt; to modify&lt;br&gt;...I love &lt;br&gt;stackoverl&lt;br&gt;ow:)\r\n\r\n^This is different than your example result because you had a set with 9 characters instead of 10 due to human error ;)\r\n","title":"Putting char into a java string for each N characters","body":"<p>The following method takes three parameters. The first is the text that you want to modify. The second parameter is the text you want to insert every n characters. The third is the interval in which you want to insert the text at.</p>\n\n<pre><code>private String insertEveryNCharacters(String originalText, String textToInsert, int breakInterval) {\n    String withBreaks = \"\";\n    int textLength = originalText.length(); //initialize this here or in the start of the for in order to evaluate this once, not every loop\n    for (int i = breakInterval , current = 0; i &lt;= textLength || current &lt; textLength; current = i, i += breakInterval ) {\n        if(current != 0) {  //do not insert the text on the first loop\n            withBreaks += textToInsert;\n        }\n        if(i &lt;= textLength) { //double check that text is at least long enough to go to index i without out of bounds exception\n            withBreaks += originalText.substring(current, i);\n        } else { //text left is not longer than the break interval, so go simply from current to end.\n            withBreaks += originalText.substring(current); //current to end (if text is not perfectly divisible by interval, it will still get included)\n        }\n    }\n    return withBreaks;\n}\n</code></pre>\n\n<p>You would call to this method like this:</p>\n\n<pre><code>String splitText = insertEveryNCharacters(\"this is my string which I need to modify...I love stackoverlow:)\", \"&lt;br&gt;\", 10);\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>this is my&lt;br&gt; string wh&lt;br&gt;ich I need&lt;br&gt; to modify&lt;br&gt;...I love &lt;br&gt;stackoverl&lt;br&gt;ow:)\n</code></pre>\n\n<p>^This is different than your example result because you had a set with 9 characters instead of 10 due to human error ;)</p>\n"},{"comments":[{"owner":{"account_id":237170,"reputation":18509,"user_id":505152,"accept_rate":72,"display_name":"htafoya"},"score":0,"creation_date":1591400582,"post_id":49058835,"comment_id":110051915,"body_markdown":"Excelent answer","body":"Excelent answer"},{"owner":{"display_name":"user9604262"},"score":0,"creation_date":1677748254,"post_id":49058835,"comment_id":133400088,"body_markdown":"Learn to give recognition. This is taken from @Mark Byers at https://stackoverflow.com/questions/11149342/adding-space-between-characters","body":"Learn to give recognition. This is taken from @Mark Byers at <a href=\"https://stackoverflow.com/questions/11149342/adding-space-between-characters\" title=\"adding space between characters\">stackoverflow.com/questions/11149342/&hellip;</a>"}],"tags":[],"owner":{"account_id":4284001,"reputation":183,"user_id":3502456,"display_name":"Kashif Ibrahim"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1519939100,"creation_date":1519939100,"answer_id":49058835,"question_id":537174,"body_markdown":"You can use the regular expression &#39;..&#39; to match each two characters and replace it with &quot;$0 &quot; to add the space:\r\n\r\ns = s.replaceAll(&quot;..&quot;, &quot;$0 &quot;);\r\nYou may also want to trim the result to remove the extra space at the end.\r\n\r\nAlternatively you can add a negative lookahead assertion to avoid adding the space at the end of the string:\r\n\r\ns = s.replaceAll(&quot;..(?!$)&quot;, &quot;$0 &quot;);\r\n\r\nFor example: \r\n\r\n`String s = &quot;23423412342134&quot;;\r\ns = s.replaceAll(&quot;....&quot;, &quot;$0&lt;br&gt;&quot;);\r\nSystem.out.println(s);`\r\n\r\nOutput: `2342&lt;br&gt;3412&lt;br&gt;3421&lt;br&gt;34`","title":"Putting char into a java string for each N characters","body":"<p>You can use the regular expression '..' to match each two characters and replace it with \"$0 \" to add the space:</p>\n\n<p>s = s.replaceAll(\"..\", \"$0 \");\nYou may also want to trim the result to remove the extra space at the end.</p>\n\n<p>Alternatively you can add a negative lookahead assertion to avoid adding the space at the end of the string:</p>\n\n<p>s = s.replaceAll(\"..(?!$)\", \"$0 \");</p>\n\n<p>For example: </p>\n\n<p><code>String s = \"23423412342134\";\ns = s.replaceAll(\"....\", \"$0&lt;br&gt;\");\nSystem.out.println(s);</code></p>\n\n<p>Output: <code>2342&lt;br&gt;3412&lt;br&gt;3421&lt;br&gt;34</code></p>\n"},{"tags":[],"owner":{"account_id":228574,"reputation":28266,"user_id":490961,"accept_rate":85,"display_name":"Vincent Mimoun-Prat"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1587631741,"creation_date":1587631741,"answer_id":61383032,"question_id":537174,"body_markdown":"I got here from https://stackoverflow.com/questions/4169699/string-manipulation-insert-a-character-every-4th-character and was looking for a solution on Android with Kotlin.\r\n\r\nJust adding a way to do that with Kotlin (you got to love the simplicity of it)\r\n\r\n    val original = &quot;123498761234&quot;\r\n    val dashed = original.chunked(4).joinToString(&quot;-&quot;) // 1234-9876-1234\r\n\r\n","title":"Putting char into a java string for each N characters","body":"<p>I got here from <a href=\"https://stackoverflow.com/questions/4169699/string-manipulation-insert-a-character-every-4th-character\">String Manipulation insert a character every 4th character</a> and was looking for a solution on Android with Kotlin.</p>\n\n<p>Just adding a way to do that with Kotlin (you got to love the simplicity of it)</p>\n\n<pre><code>val original = \"123498761234\"\nval dashed = original.chunked(4).joinToString(\"-\") // 1234-9876-1234\n</code></pre>\n"},{"tags":[],"owner":{"account_id":278330,"reputation":1911,"user_id":572854,"accept_rate":70,"display_name":"Innova"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589992640,"creation_date":1589992640,"answer_id":61918295,"question_id":537174,"body_markdown":"Kotlin Regex version:\r\n\r\n    fun main(args: Array&lt;String&gt;) {    \r\n        var original = &quot;this is my string which I need to modify...I love stackoverlow:)&quot;\r\n        println(original)\r\n        val regex = Regex(&quot;(.{10})&quot;)\r\n        original = regex.replace(original, &quot;$1&lt;br&gt;&quot;)\r\n        println(original)\r\n    }\r\n\r\n\r\n[Kotlin Playground][1]\r\n\r\n\r\n  [1]: https://pl.kotl.in/GFTm5kNWk","title":"Putting char into a java string for each N characters","body":"<p>Kotlin Regex version:</p>\n\n<pre><code>fun main(args: Array&lt;String&gt;) {    \n    var original = \"this is my string which I need to modify...I love stackoverlow:)\"\n    println(original)\n    val regex = Regex(\"(.{10})\")\n    original = regex.replace(original, \"$1&lt;br&gt;\")\n    println(original)\n}\n</code></pre>\n\n<p><a href=\"https://pl.kotl.in/GFTm5kNWk\" rel=\"nofollow noreferrer\">Kotlin Playground</a></p>\n"},{"tags":[],"owner":{"account_id":3075221,"reputation":300,"user_id":2604778,"display_name":"Rorrim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618398831,"creation_date":1618398248,"answer_id":67090494,"question_id":537174,"body_markdown":"```java\r\nString s = // long string\r\nString newString = String.join(&quot;&lt;br&gt;&quot;, s.split(&quot;(?&lt;=\\\\G.{10})&quot;));\r\n```\r\n\r\nNo final `&lt;br&gt;` is added if `s` length is multiple of `10`.\r\n\r\nThanks to [@cletus][1] and [this answer][2] for the inspiration\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/18393/cletus\r\n  [2]: https://stackoverflow.com/a/54346446/12711179","title":"Putting char into a java string for each N characters","body":"<pre class=\"lang-java prettyprint-override\"><code>String s = // long string\nString newString = String.join(&quot;&lt;br&gt;&quot;, s.split(&quot;(?&lt;=\\\\G.{10})&quot;));\n</code></pre>\n<p>No final <code>&lt;br&gt;</code> is added if <code>s</code> length is multiple of <code>10</code>.</p>\n<p>Thanks to <a href=\"https://stackoverflow.com/users/18393/cletus\">@cletus</a> and <a href=\"https://stackoverflow.com/a/54346446/12711179\">this answer</a> for the inspiration</p>\n"},{"tags":[],"owner":{"account_id":716914,"reputation":1413,"user_id":633149,"accept_rate":0,"display_name":"Kevin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699022140,"creation_date":1699022140,"answer_id":77417517,"question_id":537174,"body_markdown":"In Kotlin you can used the chunked method to do most of the work and join with a separator at the end. Here I am adding a dash after every 4th character.\r\n\r\n    longString.chunked(4).joinToString(&quot;-&quot;)","title":"Putting char into a java string for each N characters","body":"<p>In Kotlin you can used the chunked method to do most of the work and join with a separator at the end. Here I am adding a dash after every 4th character.</p>\n<pre><code>longString.chunked(4).joinToString(&quot;-&quot;)\n</code></pre>\n"}],"owner":{"account_id":17535,"reputation":4551,"user_id":39339,"accept_rate":88,"display_name":"JuanDeLosMuertos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64577,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":537190,"answer_count":13,"score":33,"last_activity_date":1699022140,"creation_date":1234364261,"question_id":537174,"body_markdown":"I have a java string, which has a variable length. \r\n\r\nI need to put the piece `&quot;&lt;br&gt;&quot;` into the string, say each 10 characters. \r\n\r\nFor example this is my string:\r\n\r\n    `this is my string which I need to modify...I love stackoverlow:)`\r\n\r\n\r\nHow can I obtain this string?:\r\n\r\n    `this is my&lt;br&gt; string wh&lt;br&gt;ich I nee&lt;br&gt;d to modif&lt;br&gt;y...I love&lt;br&gt; stackover&lt;br&gt;flow:)`\r\n\r\nThanks","title":"Putting char into a java string for each N characters","body":"<p>I have a java string, which has a variable length. </p>\n\n<p>I need to put the piece <code>\"&lt;br&gt;\"</code> into the string, say each 10 characters. </p>\n\n<p>For example this is my string:</p>\n\n<pre><code>`this is my string which I need to modify...I love stackoverlow:)`\n</code></pre>\n\n<p>How can I obtain this string?:</p>\n\n<pre><code>`this is my&lt;br&gt; string wh&lt;br&gt;ich I nee&lt;br&gt;d to modif&lt;br&gt;y...I love&lt;br&gt; stackover&lt;br&gt;flow:)`\n</code></pre>\n\n<p>Thanks</p>\n"},{"tags":["java","sockets","netty","protocol-buffers","broken-pipe"],"comments":[{"owner":{"account_id":4042004,"reputation":13550,"user_id":3324556,"accept_rate":97,"display_name":"Kevin Kopf"},"score":0,"creation_date":1477519358,"post_id":40272719,"comment_id":67805552,"body_markdown":"providing an error log would be nice","body":"providing an error log would be nice"},{"owner":{"account_id":6486246,"reputation":11,"user_id":5021750,"display_name":"KartoshkaMan"},"score":0,"creation_date":1477519981,"post_id":40272719,"comment_id":67805744,"body_markdown":"@Nordenheim, sorry, fixed","body":"@Nordenheim, sorry, fixed"},{"owner":{"account_id":4199067,"reputation":4323,"user_id":3439686,"accept_rate":75,"display_name":"johanvs"},"score":0,"creation_date":1525070376,"post_id":40272719,"comment_id":87206390,"body_markdown":"@KartoshkaMan Did you fix your issue ?","body":"@KartoshkaMan Did you fix your issue ?"}],"answers":[{"comments":[{"owner":{"account_id":6486246,"reputation":11,"user_id":5021750,"display_name":"KartoshkaMan"},"score":0,"creation_date":1477520863,"post_id":40273068,"comment_id":67806026,"body_markdown":"hm...so...\nI don&#39;t know where to find information about defining sockets in right way.\nI think, something goes wrong because of I don&#39;t know how to translate this part of code into vanilla sockets setup: `new LengthFieldBasedFrameDecoder(134217728, 0, 4, 0, 4)`","body":"hm...so... I don&#39;t know where to find information about defining sockets in right way. I think, something goes wrong because of I don&#39;t know how to translate this part of code into vanilla sockets setup: <code>new LengthFieldBasedFrameDecoder(134217728, 0, 4, 0, 4)</code>"},{"owner":{"account_id":4042004,"reputation":13550,"user_id":3324556,"accept_rate":97,"display_name":"Kevin Kopf"},"score":0,"creation_date":1477523087,"post_id":40273068,"comment_id":67806718,"body_markdown":"The constructor itself is described [here](https://netty.io/4.0/api/io/netty/handler/codec/LengthFieldBasedFrameDecoder.html#LengthFieldBasedFrameDecoder(int,%20int,%20int,%20int,%20int)). I can&#39;t really help you with Netty beyond that, because I&#39;ve never worked with Netty.","body":"The constructor itself is described <a href=\"https://netty.io/4.0/api/io/netty/handler/codec/LengthFieldBasedFrameDecoder.html#LengthFieldBasedFrameDecoder(int,%20int,%20int,%20int,%20int)\" rel=\"nofollow noreferrer\">here</a>. I can&#39;t really help you with Netty beyond that, because I&#39;ve never worked with Netty."}],"tags":[],"owner":{"account_id":4042004,"reputation":13550,"user_id":3324556,"accept_rate":97,"display_name":"Kevin Kopf"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477520573,"creation_date":1477520573,"answer_id":40273068,"question_id":40272719,"body_markdown":"`java.net.SocketException: Broken pipe` is caused by trying to write to a connection, while the other side has already closed that same connection. It is not you, who closed the connection, else another exception would have been thrown. You can not recover the connection, you have to open a new one.\r\n\r\nOr in case you keep getting the exception, it just simply means the application protocol is poorly defined or poorly implemented.","title":"I have &quot;broken pipe&quot; exception using Sockets and Netty. What&#39;s wrong?","body":"<p><code>java.net.SocketException: Broken pipe</code> is caused by trying to write to a connection, while the other side has already closed that same connection. It is not you, who closed the connection, else another exception would have been thrown. You can not recover the connection, you have to open a new one.</p>\n\n<p>Or in case you keep getting the exception, it just simply means the application protocol is poorly defined or poorly implemented.</p>\n"},{"comments":[{"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1699367249,"post_id":77417499,"comment_id":136520866,"body_markdown":"This does not provide an answer to the question. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment); instead, [provide answers that don&#39;t require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead). - [From Review](/review/late-answers/35220551)","body":"This does not provide an answer to the question. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>; instead, <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\">provide answers that don&#39;t require clarification from the asker</a>. - <a href=\"/review/late-answers/35220551\">From Review</a>"}],"tags":[],"owner":{"account_id":29819479,"reputation":1,"user_id":22853081,"display_name":"Mark Xiao"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699021989,"creation_date":1699021989,"answer_id":77417499,"question_id":40272719,"body_markdown":"I think to add the  setting: spring.codec.max-in-memory-size={larger size}MB into system property before startup.\r\nit may solve the broken pipe exception.","title":"I have &quot;broken pipe&quot; exception using Sockets and Netty. What&#39;s wrong?","body":"<p>I think to add the  setting: spring.codec.max-in-memory-size={larger size}MB into system property before startup.\nit may solve the broken pipe exception.</p>\n"}],"owner":{"account_id":6486246,"reputation":11,"user_id":5021750,"display_name":"KartoshkaMan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2797,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699021989,"creation_date":1477518790,"question_id":40272719,"body_markdown":"guyz!\r\n\r\nI have some protobuf objects to send to server.\r\nServer uses Netty.\r\n\r\nWhen I use Netty for client with Netty&#39;s `ProtobufDecoder`, all goes nice.\r\n\r\nBut when I try to send protobuf object through vanilla Java `Socket`, I have &quot;broken pipe&quot; exception. But Socket object stay connected and I can send another object and get exception again. =(\r\n\r\nHere is netty-based client&#39;s pipeline setup:\r\n\r\n    ChannelPipeline pipeline = channel.pipeline();\r\n    pipeline.addLast(&quot;frameDecoder&quot;, new LengthFieldBasedFrameDecoder(134217728, 0, 4, 0, 4));\r\n    pipeline.addLast(&quot;protobufDecoder&quot;, new ProtobufDecoder(mSocketListener.getInMessage()));\r\n\r\nI don&#39;t know, where to specify `maxFrameLength` and other params.\r\n\r\nHere is error log:\r\n\r\n    Exception in thread &quot;main&quot; java.net.SocketException: Broken pipe\r\n\tat java.net.SocketOutputStream.socketWrite0(Native Method)\r\n\tat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)\r\n\tat java.net.SocketOutputStream.write(SocketOutputStream.java:141)\r\n\tat SocketClientMain.main(SocketClientMain.java:28)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:497)\r\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\r\n\r\n\r\nWhat&#39;s going wrong?\r\nMay be I have broken hands?\r\nOr I need to ask server-owner for some info?","title":"I have &quot;broken pipe&quot; exception using Sockets and Netty. What&#39;s wrong?","body":"<p>guyz!</p>\n\n<p>I have some protobuf objects to send to server.\nServer uses Netty.</p>\n\n<p>When I use Netty for client with Netty's <code>ProtobufDecoder</code>, all goes nice.</p>\n\n<p>But when I try to send protobuf object through vanilla Java <code>Socket</code>, I have \"broken pipe\" exception. But Socket object stay connected and I can send another object and get exception again. =(</p>\n\n<p>Here is netty-based client's pipeline setup:</p>\n\n<pre><code>ChannelPipeline pipeline = channel.pipeline();\npipeline.addLast(\"frameDecoder\", new LengthFieldBasedFrameDecoder(134217728, 0, 4, 0, 4));\npipeline.addLast(\"protobufDecoder\", new ProtobufDecoder(mSocketListener.getInMessage()));\n</code></pre>\n\n<p>I don't know, where to specify <code>maxFrameLength</code> and other params.</p>\n\n<p>Here is error log:</p>\n\n<pre><code>Exception in thread \"main\" java.net.SocketException: Broken pipe\nat java.net.SocketOutputStream.socketWrite0(Native Method)\nat java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:109)\nat java.net.SocketOutputStream.write(SocketOutputStream.java:141)\nat SocketClientMain.main(SocketClientMain.java:28)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:497)\nat com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)\n</code></pre>\n\n<p>What's going wrong?\nMay be I have broken hands?\nOr I need to ask server-owner for some info?</p>\n"},{"tags":["java","maven","testing","junit","remote-debugging"],"comments":[{"owner":{"account_id":14376658,"reputation":383,"user_id":10384954,"display_name":"Wladimir Diskowski"},"score":0,"creation_date":1699025664,"post_id":77417486,"comment_id":136483139,"body_markdown":"If Java on Windows process Unix path like &quot;/tmp/file1.txt&quot; it will find file if location is &quot;C:\\tmp\\file1.txt&quot;. So you can place required file in convinient Windows location","body":"If Java on Windows process Unix path like &quot;/tmp/file1.txt&quot; it will find file if location is &quot;C:\\tmp\\file1.txt&quot;. So you can place required file in convinient Windows location"},{"owner":{"account_id":152128,"reputation":9392,"user_id":366447,"accept_rate":80,"display_name":"AHungerArtist"},"score":0,"creation_date":1699027665,"post_id":77417486,"comment_id":136483649,"body_markdown":"It&#39;s more than just files, though, it&#39;s a running application on Linux that I can&#39;t run on Windows.","body":"It&#39;s more than just files, though, it&#39;s a running application on Linux that I can&#39;t run on Windows."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1699101774,"post_id":77417486,"comment_id":136490540,"body_markdown":"Visual studio code and IntelliJ can work on remote machines","body":"Visual studio code and IntelliJ can work on remote machines"}],"owner":{"account_id":152128,"reputation":9392,"user_id":366447,"accept_rate":80,"display_name":"AHungerArtist"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699021898,"creation_date":1699021898,"question_id":77417486,"body_markdown":"I&#39;m a Java developer used to using Maven to do unit/integration tests for web services. Right now, I have a client library that I need to test that does everything using local references. So, for example, it looks for needed files and applications on whatever box it is running on. However, those are Linux boxes and I have a Windows development ecosystem. \r\n\r\nCurrently, the hacky way I&#39;ve been doing testing of the code is create a main class with various methods that test different things. Obviously, this doesn&#39;t use any of the JUnit framework or anything like that. As part of my maven build, I can deploy the jar out to the Linux box and then run the jar&#39;s main class and remote debug. This allows me to actually use my Windows OS and IDE and still development.\r\n\r\nHowever, when it comes to testing, I don&#39;t see an easy way to development in Windows when I want to run the code in Linux. I know I could put Maven on the Linux box and use some text editor to actually develop but given my complete lack of expertise in Linux, I think it would go extremely slowly, especially when I would need to debug anything. I also don&#39;t believe there&#39;s other areas of my work where such knowledge would be that useful, so it would be a lot of investment for small return.\r\n\r\nDoes anyone have ideas on a better to approach this issue? Ideally I&#39;d like to be able to remote debug into tests that can run on the Linux box. Or at least a better solution than what I&#39;m doing now.","title":"How to develop/test for a system that must run locally but cannot be run on the development OS","body":"<p>I'm a Java developer used to using Maven to do unit/integration tests for web services. Right now, I have a client library that I need to test that does everything using local references. So, for example, it looks for needed files and applications on whatever box it is running on. However, those are Linux boxes and I have a Windows development ecosystem.</p>\n<p>Currently, the hacky way I've been doing testing of the code is create a main class with various methods that test different things. Obviously, this doesn't use any of the JUnit framework or anything like that. As part of my maven build, I can deploy the jar out to the Linux box and then run the jar's main class and remote debug. This allows me to actually use my Windows OS and IDE and still development.</p>\n<p>However, when it comes to testing, I don't see an easy way to development in Windows when I want to run the code in Linux. I know I could put Maven on the Linux box and use some text editor to actually develop but given my complete lack of expertise in Linux, I think it would go extremely slowly, especially when I would need to debug anything. I also don't believe there's other areas of my work where such knowledge would be that useful, so it would be a lot of investment for small return.</p>\n<p>Does anyone have ideas on a better to approach this issue? Ideally I'd like to be able to remote debug into tests that can run on the Linux box. Or at least a better solution than what I'm doing now.</p>\n"},{"tags":["java","optimization","levenberg-marquardt"],"owner":{"account_id":3843841,"reputation":21,"user_id":3186070,"display_name":"HoldBreath"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699021768,"creation_date":1699021587,"question_id":77417447,"body_markdown":"I am trying to use Apache Lib in Java. Specifically, I am using LevenbergMarquardtOptimizer. It looks like I cannot pass the boundary condition through. Is there a way to overcome this? I guess I can return a large value if boundary is reached. But what about the Jacobian matrix?\r\n\r\nHaven&#39;t tried anything yet as I don&#39;t know how I can pass it through","title":"How to create boundary for optimization if 3rd party library not allow it to pass through?","body":"<p>I am trying to use Apache Lib in Java. Specifically, I am using LevenbergMarquardtOptimizer. It looks like I cannot pass the boundary condition through. Is there a way to overcome this? I guess I can return a large value if boundary is reached. But what about the Jacobian matrix?</p>\n<p>Haven't tried anything yet as I don't know how I can pass it through</p>\n"},{"tags":["java","android","geckoview"],"owner":{"account_id":29819408,"reputation":1,"user_id":22853030,"display_name":"VitProds"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699021649,"creation_date":1699021649,"question_id":77417454,"body_markdown":"I need a sample code to download files inside geckoview java language, I&#39;ve been struggling for 4 days and can&#39;t do it.\r\n\r\n    private class MyContentDelegate implements PromptDelegate {\r\n\r\n        @Nullable\r\n        @Override\r\n        public GeckoResult&lt;PromptResponse&gt; onFilePrompt(@NonNull GeckoSession geckoSession, @NonNull FilePrompt filePrompt) {\r\n            Intent i = new Intent(Intent.ACTION_GET_CONTENT);\r\n            i.addCategory(Intent.CATEGORY_OPENABLE);\r\n            i.setType(&quot;image/*&quot;);\r\n\r\n            GeckoResult&lt;PromptResponse&gt; res = new GeckoResult&lt;&gt;();\r\n            mFileResponse = res;\r\n\r\n            mFilePrompt = filePrompt;\r\n\r\n            startActivityForResult(i, FILECHOOSER_RESULTCODE);\r\n\r\n            return res;\r\n        }\r\n    }","title":"Upload files to geckoview","body":"<p>I need a sample code to download files inside geckoview java language, I've been struggling for 4 days and can't do it.</p>\n<pre><code>private class MyContentDelegate implements PromptDelegate {\n\n    @Nullable\n    @Override\n    public GeckoResult&lt;PromptResponse&gt; onFilePrompt(@NonNull GeckoSession geckoSession, @NonNull FilePrompt filePrompt) {\n        Intent i = new Intent(Intent.ACTION_GET_CONTENT);\n        i.addCategory(Intent.CATEGORY_OPENABLE);\n        i.setType(&quot;image/*&quot;);\n\n        GeckoResult&lt;PromptResponse&gt; res = new GeckoResult&lt;&gt;();\n        mFileResponse = res;\n\n        mFilePrompt = filePrompt;\n\n        startActivityForResult(i, FILECHOOSER_RESULTCODE);\n\n        return res;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":5106261,"reputation":12717,"user_id":4094260,"accept_rate":77,"display_name":"Nongthonbam Tonthoi"},"score":0,"creation_date":1572367399,"post_id":58611875,"comment_id":103534077,"body_markdown":"Have you tried `R.id.listView` ?","body":"Have you tried <code>R.id.listView</code> ?"},{"owner":{"account_id":7325775,"reputation":474,"user_id":5580210,"display_name":"Aytek S&#246;kmen"},"score":1,"creation_date":1572367479,"post_id":58611875,"comment_id":103534111,"body_markdown":"You are using androidX library inside Java code, but  in Xml you are using support library. Can you try changing `android.support.constraint.ConstraintLayout` with `androidx.constraintlayout.widget.ConstraintLayout`","body":"You are using androidX library inside Java code, but  in Xml you are using support library. Can you try changing <code>android.support.constraint.ConstraintLayout</code> with <code>androidx.constraintlayout.widget.ConstraintLayout</code>"},{"owner":{"account_id":9274171,"reputation":77,"user_id":6887285,"display_name":"Ravi Raggu"},"score":0,"creation_date":1658214754,"post_id":58611875,"comment_id":128989199,"body_markdown":"Tried all the given solution that are given here, But didn&#39;t work. Then I tried to comment the latest code that I have added. Then this error gone like charm :)","body":"Tried all the given solution that are given here, But didn&#39;t work. Then I tried to comment the latest code that I have added. Then this error gone like charm :)"}],"answers":[{"comments":[{"owner":{"account_id":429232,"reputation":1740,"user_id":812013,"accept_rate":62,"display_name":"Chucky"},"score":0,"creation_date":1633867067,"post_id":58611986,"comment_id":122869878,"body_markdown":"For me, in 2021, this was the right answer. You don&#39;t need `findByViewID` anymore, amazing! Just add that import at the top.","body":"For me, in 2021, this was the right answer. You don&#39;t need <code>findByViewID</code> anymore, amazing! Just add that import at the top."}],"tags":[],"owner":{"account_id":14064733,"reputation":3952,"user_id":10159898,"display_name":"Bruno"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1572367744,"creation_date":1572367744,"answer_id":58611986,"question_id":58611875,"body_markdown":"Using Kotlin Android Extensions, you don&#39;t need to call `findViewById()` anymore.\r\nJust like that :\r\n\r\n\r\n    import kotlinx.android.synthetic.main.activity_main.*\r\n\r\n    class MainActivity : AppCompatActivity() {\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n            var employees: List&lt;Employee&gt;? = null\r\n            try {\r\n                val parser = XmlPullParserHandler()\r\n                val istream = assets.open(&quot;employees.xml&quot;)\r\n                employees = parser.parse(istream)\r\n    \r\n                val adapter = ArrayAdapter(this, R.layout.simple_list_item_1, employees)\r\n                listView.adapter = adapter  // here, the listView variable name refers to the id given in the xml file\r\n    \r\n            } catch (e: IOException) {\r\n                e.printStackTrace()\r\n            }\r\n        }\r\n    }","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>Using Kotlin Android Extensions, you don't need to call <code>findViewById()</code> anymore.\nJust like that :</p>\n\n<pre><code>import kotlinx.android.synthetic.main.activity_main.*\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        var employees: List&lt;Employee&gt;? = null\n        try {\n            val parser = XmlPullParserHandler()\n            val istream = assets.open(\"employees.xml\")\n            employees = parser.parse(istream)\n\n            val adapter = ArrayAdapter(this, R.layout.simple_list_item_1, employees)\n            listView.adapter = adapter  // here, the listView variable name refers to the id given in the xml file\n\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5297812,"reputation":574,"user_id":4228488,"accept_rate":100,"display_name":"Nacho Ramos S&#225;nchez"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572376825,"creation_date":1572376825,"answer_id":58614076,"question_id":58611875,"body_markdown":"Change this line\r\n\r\n    val listView = findViewById&lt;ListView&gt;(id.listView)\r\n\r\nto this\r\n\r\n    val listView = findViewById&lt;ListView&gt;(R.id.listView)\r\n\r\nyou are missing R reference.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>Change this line</p>\n\n<pre><code>val listView = findViewById&lt;ListView&gt;(id.listView)\n</code></pre>\n\n<p>to this</p>\n\n<pre><code>val listView = findViewById&lt;ListView&gt;(R.id.listView)\n</code></pre>\n\n<p>you are missing R reference.</p>\n"},{"comments":[{"owner":{"account_id":8513174,"reputation":356,"user_id":6382586,"display_name":"Arpan Srivastava"},"score":6,"creation_date":1588675412,"post_id":60205538,"comment_id":108983065,"body_markdown":"Worked like a charm. Any reason for this?","body":"Worked like a charm. Any reason for this?"},{"owner":{"account_id":14940437,"reputation":475,"user_id":10787285,"display_name":"Pooja"},"score":5,"creation_date":1601972385,"post_id":60205538,"comment_id":113564823,"body_markdown":"Same here. Removing `import android.R` solved this problem.","body":"Same here. Removing <code>import android.R</code> solved this problem."},{"owner":{"account_id":3394748,"reputation":11749,"user_id":2848676,"accept_rate":75,"display_name":"Michael Osofsky"},"score":0,"creation_date":1621633705,"post_id":60205538,"comment_id":119564436,"body_markdown":"In my case this worked because I have a multi-module project.  I had copied some code from one module to another.  I copied the imports too.  But the imports referred to `R` that was specific to the source module.  So Android Studio went looking in the wrong module for the layout.  When I removed the import, Android Studio was able to find the layout.","body":"In my case this worked because I have a multi-module project.  I had copied some code from one module to another.  I copied the imports too.  But the imports referred to <code>R</code> that was specific to the source module.  So Android Studio went looking in the wrong module for the layout.  When I removed the import, Android Studio was able to find the layout."},{"owner":{"account_id":15011082,"reputation":151,"user_id":10835543,"display_name":"Akki Jangir"},"score":1,"creation_date":1624976356,"post_id":60205538,"comment_id":120500876,"body_markdown":"Removing &#39;import android.R&#39; also worked for me","body":"Removing &#39;import android.R&#39; also worked for me"},{"owner":{"account_id":2278011,"reputation":1541,"user_id":2003821,"accept_rate":56,"display_name":"Aadam"},"score":2,"creation_date":1637664084,"post_id":60205538,"comment_id":123881095,"body_markdown":"Damn solid 2 hours wasted","body":"Damn solid 2 hours wasted"},{"owner":{"account_id":7402524,"reputation":119,"user_id":5632485,"display_name":"Josafoot"},"score":0,"creation_date":1654224235,"post_id":60205538,"comment_id":128045345,"body_markdown":"Where is the `import android.R`?","body":"Where is the <code>import android.R</code>?"},{"owner":{"account_id":1403180,"reputation":2551,"user_id":1331578,"accept_rate":33,"display_name":"SkorpEN"},"score":0,"creation_date":1654501781,"post_id":60205538,"comment_id":128097343,"body_markdown":"usually first entry in file added automaticly during conversion.","body":"usually first entry in file added automaticly during conversion."},{"owner":{"account_id":14433236,"reputation":96,"user_id":10425988,"display_name":"Arturr300"},"score":0,"creation_date":1674292269,"post_id":60205538,"comment_id":132686858,"body_markdown":"Thanks, works. In my case, there was both &quot;import android.os.Build.VERSION_CODES.R&quot; and &quot;import com.[rest of my domain].R&quot;. Deleting first one helped.","body":"Thanks, works. In my case, there was both &quot;import android.os.Build.VERSION_CODES.R&quot; and &quot;import com.[rest of my domain].R&quot;. Deleting first one helped."},{"owner":{"account_id":4707226,"reputation":986,"user_id":3869170,"accept_rate":54,"display_name":"Kamil"},"score":0,"creation_date":1674655939,"post_id":60205538,"comment_id":132760914,"body_markdown":"Thanks. After I pasted Java code which got converted to Kotlin in Android Studio, `import android.R` was automatically added. So I removed it and it works fine.","body":"Thanks. After I pasted Java code which got converted to Kotlin in Android Studio, <code>import android.R</code> was automatically added. So I removed it and it works fine."},{"owner":{"account_id":17341722,"reputation":321,"user_id":12895799,"display_name":"Alan"},"score":0,"creation_date":1702363708,"post_id":60205538,"comment_id":136883722,"body_markdown":"Ditto. Pasted some code, was offered to convert to Kotlin... bang!! An hour wasted trying to figure it out. Back in business thanks to SkorpEn","body":"Ditto. Pasted some code, was offered to convert to Kotlin... bang!! An hour wasted trying to figure it out. Back in business thanks to SkorpEn"}],"tags":[],"owner":{"account_id":1403180,"reputation":2551,"user_id":1331578,"accept_rate":33,"display_name":"SkorpEN"},"comment_count":10,"down_vote_count":0,"up_vote_count":160,"is_accepted":true,"score":160,"last_activity_date":1581589386,"creation_date":1581589386,"answer_id":60205538,"question_id":58611875,"body_markdown":"In my case removing `import android.R` solved the issue.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>In my case removing <code>import android.R</code> solved the issue.</p>\n"},{"tags":[],"owner":{"account_id":11626501,"reputation":371,"user_id":8516131,"display_name":"nuwancy"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1636459028,"creation_date":1592286433,"answer_id":62401716,"question_id":58611875,"body_markdown":"Same as [@SkorpEN has mentioned][1],\r\nFor me also removing **import android.R** solved the issue.\r\n\r\nThe reason why **import android.R** added from nowhere is, if you paste a java code into Kotlin it will convert to Kotlin automatically and some times this **import android.R** will also be added automatically.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/58611875/unresolved-reference-in-kotlin-with-id-and-activity-main/60205538#60205538","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>Same as <a href=\"https://stackoverflow.com/questions/58611875/unresolved-reference-in-kotlin-with-id-and-activity-main/60205538#60205538\">@SkorpEN has mentioned</a>,\nFor me also removing <strong>import android.R</strong> solved the issue.</p>\n<p>The reason why <strong>import android.R</strong> added from nowhere is, if you paste a java code into Kotlin it will convert to Kotlin automatically and some times this <strong>import android.R</strong> will also be added automatically.</p>\n"},{"comments":[{"owner":{"account_id":2002693,"reputation":708,"user_id":1793327,"accept_rate":100,"display_name":"Abdul91"},"score":0,"creation_date":1671466818,"post_id":63483945,"comment_id":132100006,"body_markdown":"Just adding the comment for a very new android resource like myself for clarification: need to add this statement &quot;package your.package.name&quot; in the file (at the top) in the file that is causing the issue, where &quot;your.package.name&quot; can be found in AndroidManifest.xml file found in app &gt; manifests.","body":"Just adding the comment for a very new android resource like myself for clarification: need to add this statement &quot;package your.package.name&quot; in the file (at the top) in the file that is causing the issue, where &quot;your.package.name&quot; can be found in AndroidManifest.xml file found in app &gt; manifests."}],"tags":[],"owner":{"account_id":13419398,"reputation":715,"user_id":9682735,"display_name":"Daniel Castro Fern&#225;ndez"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1597829252,"creation_date":1597829252,"answer_id":63483945,"question_id":58611875,"body_markdown":"In my case, I accidentally deleted the package declaration, so adding `package your.package.name` fixed it for me.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>In my case, I accidentally deleted the package declaration, so adding <code>package your.package.name</code> fixed it for me.</p>\n"},{"tags":[],"owner":{"account_id":11764395,"reputation":537,"user_id":8609473,"display_name":"Pravin Desai"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1607961360,"creation_date":1607961360,"answer_id":65292122,"question_id":58611875,"body_markdown":"remove `import android.R` from imports which might be imported automatically.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>remove <code>import android.R</code> from imports which might be imported automatically.</p>\n"},{"tags":[],"owner":{"account_id":6845381,"reputation":6435,"user_id":5264367,"accept_rate":12,"display_name":"Samir"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1609584231,"creation_date":1609584231,"answer_id":65538227,"question_id":58611875,"body_markdown":"On newest verison `kotlin-android-extensions` needed to apply inside `build.gradle` (Module..)\r\n\r\n    plugins {\r\n        id &#39;com.android.application&#39;\r\n        id &#39;kotlin-android&#39;\r\n        id &#39;kotlin-android-extensions&#39;\r\n    }","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>On newest verison <code>kotlin-android-extensions</code> needed to apply inside <code>build.gradle</code> (Module..)</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'kotlin-android'\n    id 'kotlin-android-extensions'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1768684,"reputation":2213,"user_id":1613961,"accept_rate":86,"display_name":"Jeff T."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1619018778,"creation_date":1619018778,"answer_id":67198818,"question_id":58611875,"body_markdown":"After failing on Rebuild Project and Make Project, finally Clean Project works for me. (Remember to add the plugin, `kotlin-android-extensions` beforehand.)","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>After failing on Rebuild Project and Make Project, finally Clean Project works for me. (Remember to add the plugin, <code>kotlin-android-extensions</code> beforehand.)</p>\n"},{"tags":[],"owner":{"account_id":21159740,"reputation":83,"user_id":15558237,"display_name":"rama-void"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1636458697,"creation_date":1627621633,"answer_id":68585681,"question_id":58611875,"body_markdown":"Deleting import Android.R will work most of the times as [mentioned by SkorpEN][1].\r\n\r\nIf you could not find that import, try checking the package name on top of the Activity. If there is no package name add the package name or if the name is already there try deleting the line and rewriting the name.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/58611875/unresolved-reference-in-kotlin-with-id-and-activity-main/60205538#60205538","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>Deleting import Android.R will work most of the times as <a href=\"https://stackoverflow.com/questions/58611875/unresolved-reference-in-kotlin-with-id-and-activity-main/60205538#60205538\">mentioned by SkorpEN</a>.</p>\n<p>If you could not find that import, try checking the package name on top of the Activity. If there is no package name add the package name or if the name is already there try deleting the line and rewriting the name.</p>\n"},{"tags":[],"owner":{"account_id":1072835,"reputation":2270,"user_id":1071698,"accept_rate":74,"display_name":"Ronen Festinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1651609561,"creation_date":1651609561,"answer_id":72105097,"question_id":58611875,"body_markdown":"It happened to me after trying to rename my application name and packages and folders. \r\nMake sure you search the code for all old names and replace them with the new one.\r\n","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>It happened to me after trying to rename my application name and packages and folders.\nMake sure you search the code for all old names and replace them with the new one.</p>\n"},{"tags":[],"owner":{"account_id":24682625,"reputation":71,"user_id":18576166,"display_name":"KWAME EMMANUEL SABLAH"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1652065628,"creation_date":1651918834,"answer_id":72151578,"question_id":58611875,"body_markdown":"In my case; i edited the `MainActivity.kt` codes within automatic imports so I had to add: \r\n\r\n    import com.package.name.R ","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>In my case; i edited the <code>MainActivity.kt</code> codes within automatic imports so I had to add:</p>\n<pre><code>import com.package.name.R \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2286897,"reputation":182,"user_id":2010692,"display_name":"K0ICHI"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654832503,"creation_date":1654832503,"answer_id":72568887,"question_id":58611875,"body_markdown":"This will happen if the AndroidManifest.xml has the wrong package name.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>This will happen if the AndroidManifest.xml has the wrong package name.</p>\n"},{"tags":[],"owner":{"account_id":3394748,"reputation":11749,"user_id":2848676,"accept_rate":75,"display_name":"Michael Osofsky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655929288,"creation_date":1655929288,"answer_id":72721555,"question_id":58611875,"body_markdown":"Since none of the answers above worked for me, I found another solution that did work: prepend the package name to `R`.\r\n\r\nFor example, change from this:\r\n\r\n```\r\nonView(withId(R.id.llDirectionsButtonImageView)).perform(click())\r\n```\r\n\r\nTo this:\r\n\r\n```\r\nonView(withId(com.myco.appsdk.R.id.llDirectionsButtonImageView)).perform(click())\r\n```\r\n\r\nIn my case, the problem was happening in Espresso test code in a multi-module project.  One module, appsdk, contains all of the UI code and resource files.  Another module, app, creates an `Application` based on the appsdk and runs Espresso tests on that application.  For this reason, I think the Espresso test code in the app module needs to refer to the resource ids in the appsdk with a fully-qualified name.  For years, I didn&#39;t need to add the prefix.  I think a recent dependency upgrade may have made it a requirement to add the prefix.\r\n\r\nHere are some relevant version numbers of dependencies/environment I&#39;m using:\r\n\r\n * Android Studio Chipmunk | 2021.2.1\r\n * macOS 12.4\r\n * classpath &#39;com.android.tools.build:gradle:7.2.0&#39;\r\n * classpath\r\n   &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10&quot;\r\n * androidTestImplementation\r\n   &quot;androidx.test.espresso:espresso-contrib:3.3.0&quot;\r\n * androidTestImplementation\r\n   &quot;androidx.test.espresso:espresso-core:3.3.0&quot; \r\n * implementation\r\n   &quot;androidx.test.espresso:espresso-core:3.3.0&quot; \r\n * androidTestImplementation &quot;androidx.appcompat:appcompat:1.4.1&quot;\r\n","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>Since none of the answers above worked for me, I found another solution that did work: prepend the package name to <code>R</code>.</p>\n<p>For example, change from this:</p>\n<pre><code>onView(withId(R.id.llDirectionsButtonImageView)).perform(click())\n</code></pre>\n<p>To this:</p>\n<pre><code>onView(withId(com.myco.appsdk.R.id.llDirectionsButtonImageView)).perform(click())\n</code></pre>\n<p>In my case, the problem was happening in Espresso test code in a multi-module project.  One module, appsdk, contains all of the UI code and resource files.  Another module, app, creates an <code>Application</code> based on the appsdk and runs Espresso tests on that application.  For this reason, I think the Espresso test code in the app module needs to refer to the resource ids in the appsdk with a fully-qualified name.  For years, I didn't need to add the prefix.  I think a recent dependency upgrade may have made it a requirement to add the prefix.</p>\n<p>Here are some relevant version numbers of dependencies/environment I'm using:</p>\n<ul>\n<li>Android Studio Chipmunk | 2021.2.1</li>\n<li>macOS 12.4</li>\n<li>classpath 'com.android.tools.build:gradle:7.2.0'</li>\n<li>classpath\n&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:1.6.10&quot;</li>\n<li>androidTestImplementation\n&quot;androidx.test.espresso:espresso-contrib:3.3.0&quot;</li>\n<li>androidTestImplementation\n&quot;androidx.test.espresso:espresso-core:3.3.0&quot;</li>\n<li>implementation\n&quot;androidx.test.espresso:espresso-core:3.3.0&quot;</li>\n<li>androidTestImplementation &quot;androidx.appcompat:appcompat:1.4.1&quot;</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":25672149,"reputation":1,"user_id":19436213,"display_name":"Marius Varzaru"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659574596,"creation_date":1659367752,"answer_id":73196126,"question_id":58611875,"body_markdown":"I know it is older post, but in my case the solution was to import:\r\n```\r\n**import kotlinx.android.synthetic.main.your_activity.* **\r\n```\r\n\r\nIt is imported automatically if you write a part of your id of `TextView` and select it from the list which is shown in Android Studio \r\n\r\nBe sure you have this plugin mentioned above:\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;kotlin-android&#39;\r\n    id &#39;kotlin-android-extensions&#39;\r\n}\r\n```\r\nAfter inserting it, execute the Sync action.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>I know it is older post, but in my case the solution was to import:</p>\n<pre><code>**import kotlinx.android.synthetic.main.your_activity.* **\n</code></pre>\n<p>It is imported automatically if you write a part of your id of <code>TextView</code> and select it from the list which is shown in Android Studio</p>\n<p>Be sure you have this plugin mentioned above:</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'kotlin-android'\n    id 'kotlin-android-extensions'\n}\n</code></pre>\n<p>After inserting it, execute the Sync action.</p>\n"},{"tags":[],"owner":{"account_id":20379459,"reputation":41,"user_id":14949883,"display_name":"Abdul-Mateen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666024033,"creation_date":1666024033,"answer_id":74100343,"question_id":58611875,"body_markdown":"there was no `import android.R` in my code to remove and\r\nI had already declared my package in MainActivity.kt\r\n\r\nUpdating Android Gradle Plugin worked for me","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>there was no <code>import android.R</code> in my code to remove and\nI had already declared my package in MainActivity.kt</p>\n<p>Updating Android Gradle Plugin worked for me</p>\n"},{"tags":[],"owner":{"account_id":20143588,"reputation":71,"user_id":14772673,"display_name":"Osv Dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674585705,"creation_date":1674585705,"answer_id":75225885,"question_id":58611875,"body_markdown":"After trying all the answers in this post, none of them worked for me, but I was able to fix it and it was very easy.\r\n\r\nFirst I invalidated the cache, then I added this line\r\n\r\n**import com.your.package.R;**\r\n\r\nIn my case I did not have any import with R, so I had to add it, for a moment I thought it was not a good solution but after reviewing and testing there was no problem, I hope you can solve your problem.\r\n\r\nThe version of Android Studio Electric Eel \r\n\r\nmacOS Ventura 13.2\r\n\r\nGradle 7.2.2","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>After trying all the answers in this post, none of them worked for me, but I was able to fix it and it was very easy.</p>\n<p>First I invalidated the cache, then I added this line</p>\n<p><strong>import com.your.package.R;</strong></p>\n<p>In my case I did not have any import with R, so I had to add it, for a moment I thought it was not a good solution but after reviewing and testing there was no problem, I hope you can solve your problem.</p>\n<p>The version of Android Studio Electric Eel</p>\n<p>macOS Ventura 13.2</p>\n<p>Gradle 7.2.2</p>\n"},{"tags":[],"owner":{"account_id":3095194,"reputation":712,"user_id":2620553,"accept_rate":71,"display_name":"Rahul Bali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679845895,"creation_date":1679845895,"answer_id":75848846,"question_id":58611875,"body_markdown":"I love such classic Android Studio Issues. Hahaha!\r\n\r\nI removed `android.R` import, it fixed itself. And interestingly, my `menu_main.xml` got changed reference in the `MainActivity` as `main_menu`. \r\n\r\nI simply asked the IDE, it created a new file `main_menu.xml`, I don&#39;t know what is going on Android Studio.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>I love such classic Android Studio Issues. Hahaha!</p>\n<p>I removed <code>android.R</code> import, it fixed itself. And interestingly, my <code>menu_main.xml</code> got changed reference in the <code>MainActivity</code> as <code>main_menu</code>.</p>\n<p>I simply asked the IDE, it created a new file <code>main_menu.xml</code>, I don't know what is going on Android Studio.</p>\n"},{"tags":[],"owner":{"account_id":18702916,"reputation":389,"user_id":13634739,"display_name":"StackOverflower"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1685251346,"creation_date":1685251346,"answer_id":76350063,"question_id":58611875,"body_markdown":"This caused because of `Resource` or known as `R` wrong path. Find `**.**.R` in your imports class. delete it then import your project resources. For Example, in my case, i removed: \r\n\r\n    import android.os.Build.VERSION_CODES.R\r\n\r\nchanged it with \r\n\r\n    import my.package.name.R","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>This caused because of <code>Resource</code> or known as <code>R</code> wrong path. Find <code>**.**.R</code> in your imports class. delete it then import your project resources. For Example, in my case, i removed:</p>\n<pre><code>import android.os.Build.VERSION_CODES.R\n</code></pre>\n<p>changed it with</p>\n<pre><code>import my.package.name.R\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3911566,"reputation":1283,"user_id":3236725,"display_name":"Babao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690227461,"creation_date":1690227461,"answer_id":76757571,"question_id":58611875,"body_markdown":"For my, Android Studio added out of nowhere the import:\r\nimport android.os.Build.VERSION_CODES.R\r\nI had to manually remove it.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>For my, Android Studio added out of nowhere the import:\nimport android.os.Build.VERSION_CODES.R\nI had to manually remove it.</p>\n"},{"tags":[],"owner":{"account_id":6632742,"reputation":11,"user_id":5120909,"display_name":"Ronald Ragnvald Nina C."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699021512,"creation_date":1699021512,"answer_id":77417436,"question_id":58611875,"body_markdown":"Reading the different cases of the developers you see the average of the problem, and if you properly review the documentation in the community you find the solution that focuses on meeting the programming standards\r\ncheck:\r\n\r\n - https://commonsware.com/Jetpack/pages/chap-widgets-005.html\r\n - https://developer.android.com/build/configure-app-module?hl=es-419#groovy\r\n\r\nRest assured that by applying this you will better solve your problem and understand why something happens, happy code.","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>Reading the different cases of the developers you see the average of the problem, and if you properly review the documentation in the community you find the solution that focuses on meeting the programming standards\ncheck:</p>\n<ul>\n<li><a href=\"https://commonsware.com/Jetpack/pages/chap-widgets-005.html\" rel=\"nofollow noreferrer\">https://commonsware.com/Jetpack/pages/chap-widgets-005.html</a></li>\n<li><a href=\"https://developer.android.com/build/configure-app-module?hl=es-419#groovy\" rel=\"nofollow noreferrer\">https://developer.android.com/build/configure-app-module?hl=es-419#groovy</a></li>\n</ul>\n<p>Rest assured that by applying this you will better solve your problem and understand why something happens, happy code.</p>\n"}],"owner":{"account_id":13699919,"reputation":2980,"user_id":9885430,"display_name":"Hugo Sohm"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59054,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":60205538,"answer_count":20,"score":38,"last_activity_date":1699021512,"creation_date":1572367300,"question_id":58611875,"body_markdown":"I&#39;m actually creating a new app in kotlin to display an xml file in boxes with the informations formatted\r\n\r\nTo problem is that when I&#39;m building the app, there is the activity_main, the id that return &quot;Unresolved reference&quot;\r\n\r\n    Unresolved reference: id\r\n    Unresolved reference: id\r\n\r\nHere the MainActivity.kt\r\n\r\n    package com.example.instantsystem\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity\r\n    import android.os.Bundle\r\n    import android.widget.ArrayAdapter\r\n    import android.widget.ListView\r\n    import java.io.IOException\r\n    \r\n    class MainActivity : AppCompatActivity() {\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n            val listView = findViewById&lt;ListView&gt;(id.listView)\r\n            var employees: List&lt;Employee&gt;? = null\r\n            try {\r\n                val parser = XmlPullParserHandler()\r\n                val istream = assets.open(&quot;employees.xml&quot;)\r\n                employees = parser.parse(istream)\r\n    \r\n                val adapter = ArrayAdapter(this, R.layout.simple_list_item_1, employees)\r\n                listView.adapter = adapter\r\n    \r\n            } catch (e: IOException) {\r\n                e.printStackTrace()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nHere the activity_main.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.constraint.ConstraintLayout \r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.example.instantsystem.MainActivity&quot;&gt;\r\n\r\n        &lt;ListView\r\n            android:id=&quot;@+id/listView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot; &gt;\r\n\r\n        &lt;/ListView&gt;\r\n\r\n    &lt;/android.support.constraint.ConstraintLayout&gt;\r\n\r\nI don&#39;t understand the error, I imported the package and defined it in xml. What is wrong in my code ?","title":"Unresolved reference in kotlin with id and activity_main","body":"<p>I'm actually creating a new app in kotlin to display an xml file in boxes with the informations formatted</p>\n\n<p>To problem is that when I'm building the app, there is the activity_main, the id that return \"Unresolved reference\"</p>\n\n<pre><code>Unresolved reference: id\nUnresolved reference: id\n</code></pre>\n\n<p>Here the MainActivity.kt</p>\n\n<pre><code>package com.example.instantsystem\n\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.widget.ArrayAdapter\nimport android.widget.ListView\nimport java.io.IOException\n\nclass MainActivity : AppCompatActivity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val listView = findViewById&lt;ListView&gt;(id.listView)\n        var employees: List&lt;Employee&gt;? = null\n        try {\n            val parser = XmlPullParserHandler()\n            val istream = assets.open(\"employees.xml\")\n            employees = parser.parse(istream)\n\n            val adapter = ArrayAdapter(this, R.layout.simple_list_item_1, employees)\n            listView.adapter = adapter\n\n        } catch (e: IOException) {\n            e.printStackTrace()\n        }\n    }\n}\n</code></pre>\n\n<p>Here the activity_main.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;android.support.constraint.ConstraintLayout \n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.example.instantsystem.MainActivity\"&gt;\n\n    &lt;ListView\n        android:id=\"@+id/listView\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\" &gt;\n\n    &lt;/ListView&gt;\n\n&lt;/android.support.constraint.ConstraintLayout&gt;\n</code></pre>\n\n<p>I don't understand the error, I imported the package and defined it in xml. What is wrong in my code ?</p>\n"},{"tags":["java","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1699023561,"post_id":77417419,"comment_id":136482577,"body_markdown":"Map the foreign key in your entity as a basic Long mapping as well as with the OneToOne.","body":"Map the foreign key in your entity as a basic Long mapping as well as with the OneToOne."},{"owner":{"account_id":25251803,"reputation":88,"user_id":19084192,"display_name":"Kaiak"},"score":0,"creation_date":1699444365,"post_id":77417419,"comment_id":136531441,"body_markdown":"Thank you @Chris, It&#39;s not the most elegant solution but thats exactly what I did and it worked.","body":"Thank you @Chris, It&#39;s not the most elegant solution but thats exactly what I did and it worked."}],"owner":{"account_id":25251803,"reputation":88,"user_id":19084192,"display_name":"Kaiak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699021363,"creation_date":1699021363,"question_id":77417419,"body_markdown":"I have an Hibernate Entity that has a relationship with another entity.\r\n\r\n    @Entity\r\n    @Table(name = &quot;main_entity&quot;)\r\n    public class MainEntity {\r\n        @Id\r\n        Long id;\r\n\r\n        @OneToOne\r\n        SecondaryEntity secondaryEntity;\r\n    }\r\n\r\n    @Entity\r\n    @Table(name = &quot;secondary_entity&quot;)\r\n    public class SecondaryEntity {\r\n        @Id\r\n        Long id;\r\n    }\r\n\r\n\r\nIn the table `main_entity` I have a column `secondary_entity_id` that contains the ID of the corresponding enity used in the relationship.\r\n\r\nSometime a `MainEntity` can have an ID in the `secondary_entity_id` column, but no entity assocaited in the `secondary_entity` table. \r\n\r\nIn this case, I&#39;d like to retrieve the actual value in the column (the ID) and not the entity that doesn&#39;t exists with the same ID.\r\n\r\nThe main problem is that I&#39;d like to keep using HQL for the queries, and not having to rewrite a new query for this specific purpouse.\r\n\r\nWhat can I do to achieve this result?","title":"Get Hibernate Entity column value instead of associated object","body":"<p>I have an Hibernate Entity that has a relationship with another entity.</p>\n<pre><code>@Entity\n@Table(name = &quot;main_entity&quot;)\npublic class MainEntity {\n    @Id\n    Long id;\n\n    @OneToOne\n    SecondaryEntity secondaryEntity;\n}\n\n@Entity\n@Table(name = &quot;secondary_entity&quot;)\npublic class SecondaryEntity {\n    @Id\n    Long id;\n}\n</code></pre>\n<p>In the table <code>main_entity</code> I have a column <code>secondary_entity_id</code> that contains the ID of the corresponding enity used in the relationship.</p>\n<p>Sometime a <code>MainEntity</code> can have an ID in the <code>secondary_entity_id</code> column, but no entity assocaited in the <code>secondary_entity</code> table.</p>\n<p>In this case, I'd like to retrieve the actual value in the column (the ID) and not the entity that doesn't exists with the same ID.</p>\n<p>The main problem is that I'd like to keep using HQL for the queries, and not having to rewrite a new query for this specific purpouse.</p>\n<p>What can I do to achieve this result?</p>\n"},{"tags":["java","android","android-recyclerview"],"comments":[{"owner":{"account_id":19211594,"reputation":1477,"user_id":14037302,"display_name":"sweak"},"score":0,"creation_date":1699017441,"post_id":77416835,"comment_id":136481195,"body_markdown":"The constructor of `hospitalListAdapter` expects one more argument `items` - you&#39;re simply not passing it. There is no problem with `getApplicationContext`.","body":"The constructor of <code>hospitalListAdapter</code> expects one more argument <code>items</code> - you&#39;re simply not passing it. There is no problem with <code>getApplicationContext</code>."},{"owner":{"account_id":29760610,"reputation":29,"user_id":22808304,"display_name":"kimzero"},"score":0,"creation_date":1699020376,"post_id":77416835,"comment_id":136481840,"body_markdown":"public hospitalListAdapter(Context mContext) {\n    this.mContext = mContext;\n} Should I write it like this?","body":"public hospitalListAdapter(Context mContext) {     this.mContext = mContext; } Should I write it like this?"},{"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"score":0,"creation_date":1699021269,"post_id":77416835,"comment_id":136482086,"body_markdown":"@kimzero Yes you can remove this list from constructor as well, but then you will have to pass each item one by one to the adapter and adapter will have to update each time you pass the new item. Instead pass all items at once, as answered below.","body":"@kimzero Yes you can remove this list from constructor as well, but then you will have to pass each item one by one to the adapter and adapter will have to update each time you pass the new item. Instead pass all items at once, as answered below."}],"answers":[{"comments":[{"owner":{"account_id":29760610,"reputation":29,"user_id":22808304,"display_name":"kimzero"},"score":1,"creation_date":1699070420,"post_id":77417394,"comment_id":136488507,"body_markdown":"Thank you always. Thanks to you, I solved it well. Have a happy day!","body":"Thank you always. Thanks to you, I solved it well. Have a happy day!"}],"tags":[],"owner":{"account_id":22432165,"reputation":1234,"user_id":16637863,"display_name":"Pawan Harariya"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1699021169,"creation_date":1699021169,"answer_id":77417394,"question_id":77416835,"body_markdown":"```\r\npublic hospitalListAdapter(Context mContext, ArrayList&lt;hospitalListItem&gt; items)\r\n```\r\n\r\nThis is the constructor of your hospitalListAdapter Class. Whenever, you want to create objects of a class you need to call its constructor and pass the parameters. Here the constructor requires a Context and a ArrayList&lt;&gt;, so you need to pass both but you are only passing the context.\r\n\r\n```\r\n// also pass the list to the constructor here\r\nadapter = new hospitalListAdapter(getApplicationContext()); \r\n```\r\n\r\nCorrect way:\r\n```\r\n// here I am creating an empty list and passing it to adapter as required.\r\nArrayList&lt;hospitalListItem&gt; list = new ArrayList&lt;hospitalListItem&gt;();\r\nadapter = new hospitalListAdapter(getApplicationContext(), list);\r\n\r\n```\r\n\r\nAlso, Instead of passing items one by one to your adapter you can first add them to your list and then pass the whole list itself, as shown above.\r\n```\r\n// passing items one by one to the list\r\nadapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n```\r\nDo this instead.\r\n```\r\n// create a list\r\nArrayList&lt;hospitalListItem&gt; list = new ArrayList&lt;hospitalListItem&gt;();\r\n\r\n// add items to the list\r\nlist.add(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\nlist.add(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n\r\n// add remaining items here\r\n\r\n// Finally, pass the whole list to adapter at once.\r\nadapter = new hospitalListAdapter(getApplicationContext(), list);\r\n```","title":"Android Studio - getApplicationContext logcat error","body":"<pre><code>public hospitalListAdapter(Context mContext, ArrayList&lt;hospitalListItem&gt; items)\n</code></pre>\n<p>This is the constructor of your hospitalListAdapter Class. Whenever, you want to create objects of a class you need to call its constructor and pass the parameters. Here the constructor requires a Context and a ArrayList&lt;&gt;, so you need to pass both but you are only passing the context.</p>\n<pre><code>// also pass the list to the constructor here\nadapter = new hospitalListAdapter(getApplicationContext()); \n</code></pre>\n<p>Correct way:</p>\n<pre><code>// here I am creating an empty list and passing it to adapter as required.\nArrayList&lt;hospitalListItem&gt; list = new ArrayList&lt;hospitalListItem&gt;();\nadapter = new hospitalListAdapter(getApplicationContext(), list);\n\n</code></pre>\n<p>Also, Instead of passing items one by one to your adapter you can first add them to your list and then pass the whole list itself, as shown above.</p>\n<pre><code>// passing items one by one to the list\nadapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n</code></pre>\n<p>Do this instead.</p>\n<pre><code>// create a list\nArrayList&lt;hospitalListItem&gt; list = new ArrayList&lt;hospitalListItem&gt;();\n\n// add items to the list\nlist.add(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\nlist.add(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n\n// add remaining items here\n\n// Finally, pass the whole list to adapter at once.\nadapter = new hospitalListAdapter(getApplicationContext(), list);\n</code></pre>\n"}],"owner":{"account_id":29760610,"reputation":29,"user_id":22808304,"display_name":"kimzero"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77417394,"answer_count":1,"score":1,"last_activity_date":1699021169,"creation_date":1699016230,"question_id":77416835,"body_markdown":"When you press the button on the main screen, it goes to the animal hospital list screen\r\nI was compiling a list of veterinary hospitals with Recyclerview.\r\n(I have created intents on the main screen, but I have not yet created intents on the animal hospital list screen.)\r\n\r\nAll other codes have not failed, but the getApplicationContext() part will fail.\r\n\r\nlogcat: &#39;hospitalListAdapter(android.content.Context, java.util.ArrayList&lt;com.example.project.hospitalListItem&gt;)&#39; in &#39;com.example.project.hospitalListAdapter&#39; cannot be applied to &#39;(android.content.Context)&#39;\r\n\r\n    hospitalActivity.java (List of Animal Hospitals)\r\n    \r\n    import android.os.Bundle;\r\n    import android.view.View;\r\n    import android.widget.Button;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.recyclerview.widget.LinearLayoutManager;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n    \r\n    public class hospitalActivity extends AppCompatActivity {\r\n    \r\n    \r\n        RecyclerView hospital_list;\r\n        hospitalListAdapter adapter;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_hospital);\r\n    \r\n            hospital_list = findViewById(R.id.hospital_list);\r\n            LinearLayoutManager layoutManager = new LinearLayoutManager(getApplicationContext(), LinearLayoutManager.VERTICAL, false);\r\n            hospital_list.setLayoutManager(layoutManager);\r\n    \r\n            adapter = new hospitalListAdapter(getApplicationContext());\r\n            hospital_list.setAdapter(adapter);\r\n    \r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n            adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\r\n    \r\n        }\r\n    }\r\n    \r\n    hospitalListItem.java (ListItem)\r\n    \r\n    public class hospitalListItem {\r\n        int resId;\r\n        String title;\r\n        String address;\r\n        String phone;\r\n        String guri;\r\n    \r\n        public hospitalListItem(int resId, String title, String address, String phone, String guri) {\r\n            this.resId = resId;\r\n            this.title = title;\r\n            this.address = address;\r\n            this.phone = phone;\r\n            this.guri = guri;\r\n        }\r\n    }\r\n    \r\n    \r\n    hospitalListAdapter.java (ListAdapter)\r\n    \r\n    import android.content.Context;\r\n    import android.view.LayoutInflater;\r\n    import android.view.View;\r\n    import android.view.ViewGroup;\r\n    import android.widget.ImageView;\r\n    import android.widget.TextView;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.recyclerview.widget.RecyclerView;\r\n    \r\n    import java.util.ArrayList;\r\n    \r\n    public class hospitalListAdapter extends RecyclerView.Adapter&lt;hospitalListAdapter.ViewHolder&gt; {\r\n        Context mContext;\r\n        ArrayList&lt;hospitalListItem&gt; items = new ArrayList&lt;&gt;();\r\n    \r\n        public hospitalListAdapter(Context mContext, ArrayList&lt;hospitalListItem&gt; items) {\r\n            this.mContext = mContext;\r\n            this.items = items;\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        public hospitalListAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n            LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n            View itemView = inflater.inflate(R.layout.hospital_design, parent, false);\r\n    \r\n            return new ViewHolder(itemView);\r\n        }\r\n    \r\n        @Override\r\n        public void onBindViewHolder(@NonNull hospitalListAdapter.ViewHolder holder, int position) {\r\n            hospitalListItem item = items.get(position);\r\n            holder.setItem(item);\r\n        }\r\n    \r\n        @Override\r\n        public int getItemCount() {\r\n            return items.size();\r\n        }\r\n    \r\n        public void addItem(hospitalListItem item){\r\n            items.add(item);\r\n        }\r\n    \r\n        static class ViewHolder extends RecyclerView.ViewHolder{\r\n            ImageView listEdit_tv;\r\n            TextView title_tv;\r\n            TextView addr_tv;\r\n            TextView phone_tv;\r\n            TextView guri_tv;\r\n    \r\n            public ViewHolder(View itemView) {\r\n                super(itemView);\r\n    \r\n                listEdit_tv = itemView.findViewById(R.id.listEdit_tv);\r\n                title_tv = itemView.findViewById(R.id.title_tv);\r\n                addr_tv = itemView.findViewById(R.id.addr_tv);\r\n                phone_tv = itemView.findViewById(R.id.phone_tv);\r\n                guri_tv = itemView.findViewById(R.id.guri_tv);\r\n            }\r\n            public void setItem(hospitalListItem item){\r\n                listEdit_tv.setImageResource(item.resId);\r\n                title_tv.setText(item.title);\r\n                addr_tv.setText(item.address);\r\n                phone_tv.setText(item.phone);\r\n                guri_tv.setText(item.guri);\r\n            }\r\n        }\r\n    }\r\n\r\nI need your help. I&#39;d appreciate your help.\r\n\r\n\r\n[enter image description here][1]\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mzd2b.png\r\n  [2]: https://i.stack.imgur.com/oIluh.png","title":"Android Studio - getApplicationContext logcat error","body":"<p>When you press the button on the main screen, it goes to the animal hospital list screen\nI was compiling a list of veterinary hospitals with Recyclerview.\n(I have created intents on the main screen, but I have not yet created intents on the animal hospital list screen.)</p>\n<p>All other codes have not failed, but the getApplicationContext() part will fail.</p>\n<p>logcat: 'hospitalListAdapter(android.content.Context, java.util.ArrayList&lt;com.example.project.hospitalListItem&gt;)' in 'com.example.project.hospitalListAdapter' cannot be applied to '(android.content.Context)'</p>\n<pre><code>hospitalActivity.java (List of Animal Hospitals)\n\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\npublic class hospitalActivity extends AppCompatActivity {\n\n\n    RecyclerView hospital_list;\n    hospitalListAdapter adapter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_hospital);\n\n        hospital_list = findViewById(R.id.hospital_list);\n        LinearLayoutManager layoutManager = new LinearLayoutManager(getApplicationContext(), LinearLayoutManager.VERTICAL, false);\n        hospital_list.setLayoutManager(layoutManager);\n\n        adapter = new hospitalListAdapter(getApplicationContext());\n        hospital_list.setAdapter(adapter);\n\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n        adapter.addItem(new hospitalListItem(R.drawable.nuribom, &quot;동물병원&quot;, &quot;종로구&quot;,&quot;02-33&quot;, &quot;어쩌구저쩌구&quot;));\n\n    }\n}\n\nhospitalListItem.java (ListItem)\n\npublic class hospitalListItem {\n    int resId;\n    String title;\n    String address;\n    String phone;\n    String guri;\n\n    public hospitalListItem(int resId, String title, String address, String phone, String guri) {\n        this.resId = resId;\n        this.title = title;\n        this.address = address;\n        this.phone = phone;\n        this.guri = guri;\n    }\n}\n\n\nhospitalListAdapter.java (ListAdapter)\n\nimport android.content.Context;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.ImageView;\nimport android.widget.TextView;\n\nimport androidx.annotation.NonNull;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport java.util.ArrayList;\n\npublic class hospitalListAdapter extends RecyclerView.Adapter&lt;hospitalListAdapter.ViewHolder&gt; {\n    Context mContext;\n    ArrayList&lt;hospitalListItem&gt; items = new ArrayList&lt;&gt;();\n\n    public hospitalListAdapter(Context mContext, ArrayList&lt;hospitalListItem&gt; items) {\n        this.mContext = mContext;\n        this.items = items;\n    }\n\n    @NonNull\n    @Override\n    public hospitalListAdapter.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n        View itemView = inflater.inflate(R.layout.hospital_design, parent, false);\n\n        return new ViewHolder(itemView);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull hospitalListAdapter.ViewHolder holder, int position) {\n        hospitalListItem item = items.get(position);\n        holder.setItem(item);\n    }\n\n    @Override\n    public int getItemCount() {\n        return items.size();\n    }\n\n    public void addItem(hospitalListItem item){\n        items.add(item);\n    }\n\n    static class ViewHolder extends RecyclerView.ViewHolder{\n        ImageView listEdit_tv;\n        TextView title_tv;\n        TextView addr_tv;\n        TextView phone_tv;\n        TextView guri_tv;\n\n        public ViewHolder(View itemView) {\n            super(itemView);\n\n            listEdit_tv = itemView.findViewById(R.id.listEdit_tv);\n            title_tv = itemView.findViewById(R.id.title_tv);\n            addr_tv = itemView.findViewById(R.id.addr_tv);\n            phone_tv = itemView.findViewById(R.id.phone_tv);\n            guri_tv = itemView.findViewById(R.id.guri_tv);\n        }\n        public void setItem(hospitalListItem item){\n            listEdit_tv.setImageResource(item.resId);\n            title_tv.setText(item.title);\n            addr_tv.setText(item.address);\n            phone_tv.setText(item.phone);\n            guri_tv.setText(item.guri);\n        }\n    }\n}\n</code></pre>\n<p>I need your help. I'd appreciate your help.</p>\n<p><a href=\"https://i.stack.imgur.com/mzd2b.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/oIluh.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","amazon-s3","aws-lambda","localstack"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697468764,"post_id":77302425,"comment_id":136280553,"body_markdown":"The _&quot;Connection refused (Connection refused)&quot;_ clearly shows that either nothing is listening on host `bucketName.localhost.localstack.cloud:4566`, or something like a firewall is actively refusing the connection. What URL are you using in your browser?","body":"The <i>&quot;Connection refused (Connection refused)&quot;</i> clearly shows that either nothing is listening on host <code>bucketName.localhost.localstack.cloud:4566</code>, or something like a firewall is actively refusing the connection. What URL are you using in your browser?"},{"owner":{"account_id":289004,"reputation":457,"user_id":589724,"accept_rate":80,"display_name":"dionysus"},"score":0,"creation_date":1697477161,"post_id":77302425,"comment_id":136282017,"body_markdown":"@MarkRotteveel I am using http://bucketName.s3.localhost.localstack.cloud:4566/. Which work as I would expect. I also see this error when executing the Lambda function from within my IntelliJ IDE. I know IntelliJ starts a new docker container when i execute Lambda function within debug mode.","body":"@MarkRotteveel I am using <a href=\"http://bucketName.s3.localhost.localstack.cloud:4566/\" rel=\"nofollow noreferrer\">bucketName.s3.localhost.localstack.cloud:4566</a>. Which work as I would expect. I also see this error when executing the Lambda function from within my IntelliJ IDE. I know IntelliJ starts a new docker container when i execute Lambda function within debug mode."}],"answers":[{"tags":[],"owner":{"account_id":28825229,"reputation":1,"user_id":22076767,"display_name":"SemperFenix"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699021115,"creation_date":1699021115,"answer_id":77417381,"question_id":77302425,"body_markdown":"I had a similar issue and resolved it by creating the S3Client this way :\r\n\r\n    `AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n            .withCredentials(new AWSStaticCredentialsProvider(credentials())).endpointOverride(URI.create(&quot;https://localhost.localstack.cloud:4566&quot;))\r\n                .forcePathStyle(true)\r\n                .region(Region.US_EAST_1).build();`\r\n\r\nThe forcePathStyle was the key.","title":"AWS Lambda with LocalStack S3 with Java SDK","body":"<p>I had a similar issue and resolved it by creating the S3Client this way :</p>\n<pre><code>`AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\n        .withCredentials(new AWSStaticCredentialsProvider(credentials())).endpointOverride(URI.create(&quot;https://localhost.localstack.cloud:4566&quot;))\n            .forcePathStyle(true)\n            .region(Region.US_EAST_1).build();`\n</code></pre>\n<p>The forcePathStyle was the key.</p>\n"}],"owner":{"account_id":289004,"reputation":457,"user_id":589724,"accept_rate":80,"display_name":"dionysus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699021115,"creation_date":1697463215,"question_id":77302425,"body_markdown":"I have installed S3 on my LocalStack instance. I am attempting to access data I have inserted into some buckets on my S3 instance using a Lambda Function. The code that I use to do this is the following:\r\n\r\n```java\r\nAmazonS3 s3Client = AmazonS3ClientBuilder.standard()\r\n        .withCredentials(new AWSStaticCredentialsProvider(credentials()))\r\n        .withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration(&quot;s3.localhost.localstack.cloud:4566&quot;,\r\n                Regions.US_EAST_1.getName()))\r\n        .build();\r\n\r\nS3Object s3Object = s3Client.getObject(&quot;bucketName&quot;, &quot;Key.sql&quot;);\r\n```\r\n\r\n\r\nThe code I use to set the credentials is the following:\r\n\r\n```java\r\npublic AWSCredentials credentials() {\r\n    AWSCredentials credentials = new BasicAWSCredentials(\r\n            &quot;test&quot;,\r\n            &quot;test&quot;\r\n    );\r\n    return credentials;\r\n}\r\n```\r\n\r\nFrom my Docker instance in the Docker LocalStack container, I go to the command line for the terminal and I run the following command:\r\n\r\n```bash\r\nawslocal lambda invoke --function-name optimization-data-loader /dev/stdout\r\n```\r\n\r\nWhen the execution runs, I receive the following result:\r\n\r\n&gt; Unable to execute HTTP request: Connect to\r\n&gt; bucketName.localhost.localstack.cloud:4566\r\n&gt; [bucketName.s3.localhost.localstack.cloud/127.0.0.1] failed:\r\n&gt; Connection refused (Connection refused)\r\n\r\nI know for a fact that the S3 bucket is active and has data within it because I can access it directly via my browser.\r\n","title":"AWS Lambda with LocalStack S3 with Java SDK","body":"<p>I have installed S3 on my LocalStack instance. I am attempting to access data I have inserted into some buckets on my S3 instance using a Lambda Function. The code that I use to do this is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>AmazonS3 s3Client = AmazonS3ClientBuilder.standard()\n        .withCredentials(new AWSStaticCredentialsProvider(credentials()))\n        .withEndpointConfiguration(new AwsClientBuilder.EndpointConfiguration(&quot;s3.localhost.localstack.cloud:4566&quot;,\n                Regions.US_EAST_1.getName()))\n        .build();\n\nS3Object s3Object = s3Client.getObject(&quot;bucketName&quot;, &quot;Key.sql&quot;);\n</code></pre>\n<p>The code I use to set the credentials is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public AWSCredentials credentials() {\n    AWSCredentials credentials = new BasicAWSCredentials(\n            &quot;test&quot;,\n            &quot;test&quot;\n    );\n    return credentials;\n}\n</code></pre>\n<p>From my Docker instance in the Docker LocalStack container, I go to the command line for the terminal and I run the following command:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>awslocal lambda invoke --function-name optimization-data-loader /dev/stdout\n</code></pre>\n<p>When the execution runs, I receive the following result:</p>\n<blockquote>\n<p>Unable to execute HTTP request: Connect to\nbucketName.localhost.localstack.cloud:4566\n[bucketName.s3.localhost.localstack.cloud/127.0.0.1] failed:\nConnection refused (Connection refused)</p>\n</blockquote>\n<p>I know for a fact that the S3 bucket is active and has data within it because I can access it directly via my browser.</p>\n"},{"tags":["java","string","swing","jtextarea"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1698994813,"post_id":77414680,"comment_id":136477459,"body_markdown":"It hardly matters. This is not going to be a rate-determining step, unless you have riduculous amounts of text, which is, err, ridiculous. Many years ago the OSF/Motif guys spent months optimising exactly this at a time when they had lots of outstanding bugs, and you should have seen the complaints. Do not copy.","body":"It hardly matters. This is not going to be a rate-determining step, unless you have riduculous amounts of text, which is, err, ridiculous. Many years ago the OSF/Motif guys spent months optimising exactly this at a time when they had lots of outstanding bugs, and you should have seen the complaints. Do not copy."},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1699001475,"post_id":77414680,"comment_id":136478382,"body_markdown":"Do you mean like a &#39;Search and Replace&#39;?","body":"Do you mean like a &#39;Search and Replace&#39;?"},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1699017886,"post_id":77414680,"comment_id":136481292,"body_markdown":"A [javax.swing.text.Document](https://docs.oracle.com/javase/8/docs/api/javax/swing/text/Document.html) interface is the data structure underlying a `JTextArea`,  If one of the implementations isn&#39;t what you want, you can extend `AbstractDocument` or `PlainDocument`.","body":"A <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/text/Document.html\" rel=\"nofollow noreferrer\">javax.swing.text.Document</a> interface is the data structure underlying a <code>JTextArea</code>,  If one of the implementations isn&#39;t what you want, you can extend <code>AbstractDocument</code> or <code>PlainDocument</code>."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699020547,"creation_date":1699019335,"answer_id":77417151,"question_id":77414680,"body_markdown":"Is a JTextArea the correct component? Why do you need to replace the text? Maybe a JList or JTable would be better to display rows of data?\r\n\r\nIf you really need a `JTextArea` then changes to the data are done via the model, which is the `Document` of the text area.\r\n\r\nThere are method:\r\n\r\n1. remove(...) - to remove text\r\n2. insertString(...) - to insert text\r\n3. getText(...) - to get text\r\n\r\nThen you can use methods of the text area to track the start/end offset of the given line in the Document:\r\n\r\n1. getLineStartOffset(...)\r\n2. getLineEndOffset(...)\r\n\r\nCreate a method that uses the above methods to accomplish your task.\r\n\r\nOr instead of updating the Document directly, maybe a simpler solution would be to just use the `replaceRange(...)` method of the JTextArea. Again you would use the above methods to get the start/end offset of the text for the given line.","title":"What is an efficient way to get, modify and replace a row/line of content in a JTextArea in Java swing?","body":"<p>Is a JTextArea the correct component? Why do you need to replace the text? Maybe a JList or JTable would be better to display rows of data?</p>\n<p>If you really need a <code>JTextArea</code> then changes to the data are done via the model, which is the <code>Document</code> of the text area.</p>\n<p>There are method:</p>\n<ol>\n<li>remove(...) - to remove text</li>\n<li>insertString(...) - to insert text</li>\n<li>getText(...) - to get text</li>\n</ol>\n<p>Then you can use methods of the text area to track the start/end offset of the given line in the Document:</p>\n<ol>\n<li>getLineStartOffset(...)</li>\n<li>getLineEndOffset(...)</li>\n</ol>\n<p>Create a method that uses the above methods to accomplish your task.</p>\n<p>Or instead of updating the Document directly, maybe a simpler solution would be to just use the <code>replaceRange(...)</code> method of the JTextArea. Again you would use the above methods to get the start/end offset of the text for the given line.</p>\n"}],"owner":{"account_id":29816384,"reputation":1,"user_id":22850573,"display_name":"mike dee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699020547,"creation_date":1698994393,"question_id":77414680,"body_markdown":"If you have a Java swing JTextArea with many rows/lines of content, what is a good and relatively efficient way to get the content of a row as a string using the row number, modify the string and then replace the original row with the modified one without affecting the other rows of the text area? \r\n\r\n\r\nI was thinking about getting the text area content as a string, then splitting the string by &quot;\\n&quot; to get a string array, modifying stringArray[row] and turning the string array back into a string and finally setting the text area&#39;s content to be the modified string. But this way seems maybe not very efficient, I think O(n) time complexity probably. Is there a more efficient way than this to modify a row in a text area?\r\nThank you.","title":"What is an efficient way to get, modify and replace a row/line of content in a JTextArea in Java swing?","body":"<p>If you have a Java swing JTextArea with many rows/lines of content, what is a good and relatively efficient way to get the content of a row as a string using the row number, modify the string and then replace the original row with the modified one without affecting the other rows of the text area?</p>\n<p>I was thinking about getting the text area content as a string, then splitting the string by &quot;\\n&quot; to get a string array, modifying stringArray[row] and turning the string array back into a string and finally setting the text area's content to be the modified string. But this way seems maybe not very efficient, I think O(n) time complexity probably. Is there a more efficient way than this to modify a row in a text area?\nThank you.</p>\n"},{"tags":["java","spring","neo4j","spring-data-neo4j","memgraphdb"],"comments":[{"owner":{"account_id":947871,"reputation":64287,"user_id":974731,"display_name":"cybersam"},"score":0,"creation_date":1699037530,"post_id":77417303,"comment_id":136485504,"body_markdown":"I think Memgraph is playing a bit fast and loose with the claim of being a &quot;drop-in replacement for Neo4j&quot;. You cannot use everything in the Neo4j ecosystem with Memgraph. And they do not even support the full Cypher language.","body":"I think Memgraph is playing a bit fast and loose with the claim of being a &quot;drop-in replacement for Neo4j&quot;. You cannot use everything in the Neo4j ecosystem with Memgraph. And they do not even support the full Cypher language."}],"owner":{"account_id":29819302,"reputation":21,"user_id":22852956,"display_name":"user22852956"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1699020531,"creation_date":1699020531,"question_id":77417303,"body_markdown":"Does anybody use Memgraph as a graph database with the Spring Data Neo4j API through the Neo4j java driver?\r\nWould be interested in hearing your experiences. Thanks!\r\n\r\nMemgraph advertises as a drop-in replacement for Neo4j. Quickly spinning up memgraph/memgraph-platform in Docker and trying to connect from Spring Data Neo4j fails with lots of Exceptions though.","title":"Memgraph with Spring Data Neo4j","body":"<p>Does anybody use Memgraph as a graph database with the Spring Data Neo4j API through the Neo4j java driver?\nWould be interested in hearing your experiences. Thanks!</p>\n<p>Memgraph advertises as a drop-in replacement for Neo4j. Quickly spinning up memgraph/memgraph-platform in Docker and trying to connect from Spring Data Neo4j fails with lots of Exceptions though.</p>\n"},{"tags":["java","java-http-client"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1699015435,"post_id":77416168,"comment_id":136480788,"body_markdown":"Can you show the declaration of `checksum`? Maybe its value is a `String` but it&#39;s declared as something else.","body":"Can you show the declaration of <code>checksum</code>? Maybe its value is a <code>String</code> but it&#39;s declared as something else."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1699015700,"post_id":77416168,"comment_id":136480847,"body_markdown":"Please provide a [minimal reproducible example](http://stackoverflow.com/help/minimal-reproducible-example). Data types and values are missing.","body":"Please provide a <a href=\"http://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Data types and values are missing."}],"answers":[{"comments":[{"owner":{"account_id":29818110,"reputation":11,"user_id":22851995,"display_name":"Naved Ahmed"},"score":1,"creation_date":1699014595,"post_id":77416381,"comment_id":136480620,"body_markdown":"Checksum is not a class it just a variable which contain string value.","body":"Checksum is not a class it just a variable which contain string value."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699020711,"post_id":77416381,"comment_id":136481929,"body_markdown":"@NavedAhmed if that’s true, how does this answer solve your problem?","body":"@NavedAhmed if that’s true, how does this answer solve your problem?"}],"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699011543,"creation_date":1699011543,"answer_id":77416381,"question_id":77416168,"body_markdown":"The most probable explanation is that you haven&#39;t overridden `toString()` method in the class of your `checksum`. Try to override the method returning `String` value of checksum:\r\n```java\r\nclass Checksum {\r\n @Override\r\n public String toString() {\r\n   return value;\r\n }\r\n}\r\n```\r\n`HttpRequestBuilder` converts an object passed into `header()` method according to certain rules and for object of custom class it just calls `toString()` method.","title":"How to pass variable in HTTPRequest Header?","body":"<p>The most probable explanation is that you haven't overridden <code>toString()</code> method in the class of your <code>checksum</code>. Try to override the method returning <code>String</code> value of checksum:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Checksum {\n @Override\n public String toString() {\n   return value;\n }\n}\n</code></pre>\n<p><code>HttpRequestBuilder</code> converts an object passed into <code>header()</code> method according to certain rules and for object of custom class it just calls <code>toString()</code> method.</p>\n"}],"owner":{"account_id":29818110,"reputation":11,"user_id":22851995,"display_name":"Naved Ahmed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77416381,"answer_count":1,"score":0,"last_activity_date":1699020499,"creation_date":1699009528,"question_id":77416168,"body_markdown":"I want to add header in my `HTTPRequest` with variable but it will give error not taking it but when i pass direct string value in inverted commas it work well.\r\n\r\nHers is the code in 3rd header i am passing variable `checksum` which contains `String` value but it is not working and if i pass direct `String` value it&#39;s work without problem.                   \r\n```java\r\nHttpRequest request1 = (HttpRequest) HttpRequest.newBuilder()\r\n                    .uri(URI.create(&quot;https://api-preprod.phonepe.com/apis/pg-sandbox/pg/v1/pay&quot;))\r\n                    .header(&quot;accept&quot;, &quot;application/json&quot;)\r\n                    .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                    .header(&quot;X-VERIFY&quot;,checksum)\r\n                    .method(&quot;POST&quot;, HttpRequest.BodyPublishers.ofString(&quot;{\\&quot;request\\&quot;:\\&quot;\\&quot;}&quot;))\r\n                    .build();\r\n```","title":"How to pass variable in HTTPRequest Header?","body":"<p>I want to add header in my <code>HTTPRequest</code> with variable but it will give error not taking it but when i pass direct string value in inverted commas it work well.</p>\n<p>Hers is the code in 3rd header i am passing variable <code>checksum</code> which contains <code>String</code> value but it is not working and if i pass direct <code>String</code> value it's work without problem.</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpRequest request1 = (HttpRequest) HttpRequest.newBuilder()\n                    .uri(URI.create(&quot;https://api-preprod.phonepe.com/apis/pg-sandbox/pg/v1/pay&quot;))\n                    .header(&quot;accept&quot;, &quot;application/json&quot;)\n                    .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                    .header(&quot;X-VERIFY&quot;,checksum)\n                    .method(&quot;POST&quot;, HttpRequest.BodyPublishers.ofString(&quot;{\\&quot;request\\&quot;:\\&quot;\\&quot;}&quot;))\n                    .build();\n</code></pre>\n"},{"tags":["java","amazon-ec2","ftp","apache-mina","mina"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1468857403,"creation_date":1468853949,"answer_id":38439983,"question_id":38436090,"body_markdown":"You have to open the FTP server passive mode data connection port range in the server firewall.\r\n\r\nBy default the Apache MINA FTP server uses any free unprivileged port for the data connection. To avoid opening all ports for the FTP server, restrict range of ports the server can use. See:  \r\nhttps://mina.apache.org/ftpserver-project/configuration_passive_ports.html\r\n\r\nTo set the range in code, use the [`ListenerFactory.setDataConnectionConfiguration`](http://javadox.com/org.apache.ftpserver/ftpserver-core/1.0.5/org/apache/ftpserver/listener/ListenerFactory.html#setDataConnectionConfiguration(org.apache.ftpserver.DataConnectionConfiguration)). You can use the `DefaultDataConnectionConfiguration` as a implementation of the [`DataConnectionConfiguration` interface](http://javadox.com/org.apache.ftpserver/ftpserver-core/1.0.5/org/apache/ftpserver/DataConnectionConfiguration.html).\r\n\r\n\r\n---\r\n\r\nSee my article on [Network configuration for passive mode](https://winscp.net/eng/docs/ftp_modes) to understand a background.\r\n","title":"Apache FTP Server - Connection timeout after 20 seconds of inactivity - Failed to retrieve directory listing","body":"<p>You have to open the FTP server passive mode data connection port range in the server firewall.</p>\n\n<p>By default the Apache MINA FTP server uses any free unprivileged port for the data connection. To avoid opening all ports for the FTP server, restrict range of ports the server can use. See:<br>\n<a href=\"https://mina.apache.org/ftpserver-project/configuration_passive_ports.html\" rel=\"nofollow\">https://mina.apache.org/ftpserver-project/configuration_passive_ports.html</a></p>\n\n<p>To set the range in code, use the <a href=\"http://javadox.com/org.apache.ftpserver/ftpserver-core/1.0.5/org/apache/ftpserver/listener/ListenerFactory.html#setDataConnectionConfiguration(org.apache.ftpserver.DataConnectionConfiguration)\" rel=\"nofollow\"><code>ListenerFactory.setDataConnectionConfiguration</code></a>. You can use the <code>DefaultDataConnectionConfiguration</code> as a implementation of the <a href=\"http://javadox.com/org.apache.ftpserver/ftpserver-core/1.0.5/org/apache/ftpserver/DataConnectionConfiguration.html\" rel=\"nofollow\"><code>DataConnectionConfiguration</code> interface</a>.</p>\n\n<hr>\n\n<p>See my article on <a href=\"https://winscp.net/eng/docs/ftp_modes\" rel=\"nofollow\">Network configuration for passive mode</a> to understand a background.</p>\n"},{"tags":[],"owner":{"account_id":15286962,"reputation":61,"user_id":11033642,"display_name":"Alexey Uvarov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628164922,"creation_date":1626783252,"answer_id":68454721,"question_id":38436090,"body_markdown":"First, you should try &quot;Passive mode&quot; and &quot;Only use plain FTP (insecure)&quot;.\r\n\r\nThen, if you are using Windows - try to set &quot;Run the program as an administrator&quot; for the program shortcut or .exe file.\r\nIt can be done with right click on program shortcut or .exe file. Then &quot;Properties&quot; - &quot;Compatibility&quot; tab.","title":"Apache FTP Server - Connection timeout after 20 seconds of inactivity - Failed to retrieve directory listing","body":"<p>First, you should try &quot;Passive mode&quot; and &quot;Only use plain FTP (insecure)&quot;.</p>\n<p>Then, if you are using Windows - try to set &quot;Run the program as an administrator&quot; for the program shortcut or .exe file.\nIt can be done with right click on program shortcut or .exe file. Then &quot;Properties&quot; - &quot;Compatibility&quot; tab.</p>\n"},{"tags":[],"owner":{"account_id":10123132,"reputation":639,"user_id":7479415,"display_name":"Paul Rambags"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699020083,"creation_date":1699020083,"answer_id":77417247,"question_id":38436090,"body_markdown":"The answer of Martin Prikryl is correct, however the current version of Apache MINA discourages the construction of a `DefaultDataConnectionConfiguration`.\r\nFor those of you who are looking for Java code, please have a look at https://stackoverflow.com/questions/8969097/writing-a-java-startFtpServer-server.\r\nThen the following code fragment can be used to define a range for the passive ports:\r\n\r\n```\r\nfinal var serverFactory = new FtpServerFactory();\r\nfinal var factory = new ListenerFactory();\r\nfactory.setPort(21); // set the port of the listener (choose your desired port, not 1234)\r\nfinal var dataConnectionFactory = new DataConnectionConfigurationFactory();\r\ndataConnectionFactory.setPassivePorts(&quot;45000-45030&quot;); // or some other range that should be configured in the firewall as well\r\ndataConnectionFactory.createDataConnectionConfiguration();\r\nfinal var dataConnectionConfig = dataConnectionFactory.createDataConnectionConfiguration();\r\nfactory.setDataConnectionConfiguration(dataConnectionConfig);\r\nserverFactory.addListener(&quot;default&quot;, factory.createListener());\r\n```","title":"Apache FTP Server - Connection timeout after 20 seconds of inactivity - Failed to retrieve directory listing","body":"<p>The answer of Martin Prikryl is correct, however the current version of Apache MINA discourages the construction of a <code>DefaultDataConnectionConfiguration</code>.\nFor those of you who are looking for Java code, please have a look at <a href=\"https://stackoverflow.com/questions/8969097/writing-a-java-startFtpServer-server\">Writing a Java FTP server</a>.\nThen the following code fragment can be used to define a range for the passive ports:</p>\n<pre><code>final var serverFactory = new FtpServerFactory();\nfinal var factory = new ListenerFactory();\nfactory.setPort(21); // set the port of the listener (choose your desired port, not 1234)\nfinal var dataConnectionFactory = new DataConnectionConfigurationFactory();\ndataConnectionFactory.setPassivePorts(&quot;45000-45030&quot;); // or some other range that should be configured in the firewall as well\ndataConnectionFactory.createDataConnectionConfiguration();\nfinal var dataConnectionConfig = dataConnectionFactory.createDataConnectionConfiguration();\nfactory.setDataConnectionConfiguration(dataConnectionConfig);\nserverFactory.addListener(&quot;default&quot;, factory.createListener());\n</code></pre>\n"}],"owner":{"account_id":6289696,"reputation":1155,"user_id":4887806,"accept_rate":73,"display_name":"Hooli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2001,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":38439983,"answer_count":3,"score":3,"last_activity_date":1699020083,"creation_date":1468842931,"question_id":38436090,"body_markdown":"I was looking for a way to create an embedded ftp server. I came across an example [&quot;writing a java ftp server&quot;](https://stackoverflow.com/a/8970126), which I copied and tested locally and everything seemed fine.\r\n\r\nSo I went on and deployed the example to an AWS EC2 instance and then tried to access it using Ubuntu and FileZilla as clients but I keep getting the same issue where directories do not get listed. I&#39;ve even tried opening all ports for the instance and I still get the same thing:\r\n\r\n[![FileZilla Output][1]][1]\r\n\r\nI thought it may have something to do with Active/Passive mode settings so I tried with both on FileZilla but I still get the same issue so I&#39;m all out of ideas. Does anyone know how to resolve this?\r\n\r\n  [1]: http://i.stack.imgur.com/hEfOW.png","title":"Apache FTP Server - Connection timeout after 20 seconds of inactivity - Failed to retrieve directory listing","body":"<p>I was looking for a way to create an embedded ftp server. I came across an example <a href=\"https://stackoverflow.com/a/8970126\">\"writing a java ftp server\"</a>, which I copied and tested locally and everything seemed fine.</p>\n\n<p>So I went on and deployed the example to an AWS EC2 instance and then tried to access it using Ubuntu and FileZilla as clients but I keep getting the same issue where directories do not get listed. I've even tried opening all ports for the instance and I still get the same thing:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hEfOW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hEfOW.png\" alt=\"FileZilla Output\"></a></p>\n\n<p>I thought it may have something to do with Active/Passive mode settings so I tried with both on FileZilla but I still get the same issue so I'm all out of ideas. Does anyone know how to resolve this?</p>\n"},{"tags":["java","dom"],"owner":{"account_id":2562742,"reputation":5917,"user_id":2851311,"display_name":"hfontanez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699019918,"creation_date":1699019918,"question_id":77417219,"body_markdown":"I have an XML file similar to this\r\n```\r\n&lt;root&gt;\r\n  &lt;child name=foo&gt;\r\n    &lt;grandchild/&gt;\r\n  &lt;/child&gt;\r\n    &lt;grandchild/&gt;\r\n  &lt;child name=bar&gt;\r\n  &lt;/child&gt;\r\n&lt;/root&gt;\r\n```\r\n\r\nI have a Java function that looks up a node in this XML and appends it to a new XML file\r\n```\r\npublic void lookup(String attribValue) {\r\n  NodeList nl = null;\r\n  DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n  Document sourceDoc = null;\r\n  try {\r\n    sourceDoc = factory.newDocumentBuilder().parse(new File(&quot;MyXML.xml&quot;));\r\n    XPathFactory xPathFactory = XPathFactory.newInstance();\r\n    XPath xpath = xPathFactory.newXPath();\r\n\r\n    XPathExpression expr = xpath.compile(&quot;//child[@name=&#39;&quot; + attribValue + &quot;&#39;]&quot;);\r\n    nl = (NodeList) expr.evaluate(sourceDoc, XPathConstants.NODESET); \r\n  } catch (Exception e) {\r\n    throw new RuntimeException(e);\r\n  }\r\n\r\n  Node node = nl.items(0);\r\n  if (node.getNodeType() == Node.ELEMENT_NODE) {\r\n    doc.getDocumentElement().appendChild(doc.importNode(node, true));\r\n  } else {\r\n    throw new RuntimeException(&quot;Node is not an element&quot;);\r\n  }\r\n}\r\n```\r\nIn the code above, `doc` is global variable that represents the target XML. The issue, albeit minor, is that when the target XML is saved, there are added extra blank lines similar to the example below:\r\n```\r\n&lt;target&gt;\r\n  &lt;child=&#39;foo&#39;&gt;\r\n\r\n    &lt;grandchild/&gt;\r\n\r\n  &lt;/child&gt;\r\n&lt;/target&gt;\r\n```\r\nIf there are more grandchild nodes, each one will be separated by an extra blank line. Obviously, when I create target XML, I call a function that &quot;pretty prints&quot; the document. The code is shown below:\r\n```\r\nprivate void writeXML(OutputStream output) {\r\n  TransformerFactory transformerFactory = TransformerFactory.newInstance();\r\n  Transformer transformer = transformerFactory.newTransformer();\r\n  tranformer.setOutputProperty(OutputKeys.METHOD , &quot;xml&quot;);\r\n  tranformer.setOutputProperty(OutputKeys.INDENT , &quot;yes&quot;);\r\n  tranformer.setOutputProperty(OutputKeys.ENCODING , &quot;UTF-8&quot;);\r\n  tranformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION , &quot;no&quot;);\r\n  DOMSource source = new DOMSource(doc); // same global variable\r\n\r\n  StreamResult result = new StreamResult(output);\r\n  transformer.transform(source, result);\r\n}\r\n```\r\n\r\nI tried calling `normalize()` and `normalizeDocument()` on the Document, and `normalize()` on the root node and the node being imported to no avail. Based on the method documentation, I expected as much, but I tried it anyway. This is not a huge deal, but it bothered me enough to post this question. I would like for the extra blank lines to be removed.","title":"Importing a node from an existing XML file add extra blank lines","body":"<p>I have an XML file similar to this</p>\n<pre><code>&lt;root&gt;\n  &lt;child name=foo&gt;\n    &lt;grandchild/&gt;\n  &lt;/child&gt;\n    &lt;grandchild/&gt;\n  &lt;child name=bar&gt;\n  &lt;/child&gt;\n&lt;/root&gt;\n</code></pre>\n<p>I have a Java function that looks up a node in this XML and appends it to a new XML file</p>\n<pre><code>public void lookup(String attribValue) {\n  NodeList nl = null;\n  DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n  Document sourceDoc = null;\n  try {\n    sourceDoc = factory.newDocumentBuilder().parse(new File(&quot;MyXML.xml&quot;));\n    XPathFactory xPathFactory = XPathFactory.newInstance();\n    XPath xpath = xPathFactory.newXPath();\n\n    XPathExpression expr = xpath.compile(&quot;//child[@name='&quot; + attribValue + &quot;']&quot;);\n    nl = (NodeList) expr.evaluate(sourceDoc, XPathConstants.NODESET); \n  } catch (Exception e) {\n    throw new RuntimeException(e);\n  }\n\n  Node node = nl.items(0);\n  if (node.getNodeType() == Node.ELEMENT_NODE) {\n    doc.getDocumentElement().appendChild(doc.importNode(node, true));\n  } else {\n    throw new RuntimeException(&quot;Node is not an element&quot;);\n  }\n}\n</code></pre>\n<p>In the code above, <code>doc</code> is global variable that represents the target XML. The issue, albeit minor, is that when the target XML is saved, there are added extra blank lines similar to the example below:</p>\n<pre><code>&lt;target&gt;\n  &lt;child='foo'&gt;\n\n    &lt;grandchild/&gt;\n\n  &lt;/child&gt;\n&lt;/target&gt;\n</code></pre>\n<p>If there are more grandchild nodes, each one will be separated by an extra blank line. Obviously, when I create target XML, I call a function that &quot;pretty prints&quot; the document. The code is shown below:</p>\n<pre><code>private void writeXML(OutputStream output) {\n  TransformerFactory transformerFactory = TransformerFactory.newInstance();\n  Transformer transformer = transformerFactory.newTransformer();\n  tranformer.setOutputProperty(OutputKeys.METHOD , &quot;xml&quot;);\n  tranformer.setOutputProperty(OutputKeys.INDENT , &quot;yes&quot;);\n  tranformer.setOutputProperty(OutputKeys.ENCODING , &quot;UTF-8&quot;);\n  tranformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION , &quot;no&quot;);\n  DOMSource source = new DOMSource(doc); // same global variable\n\n  StreamResult result = new StreamResult(output);\n  transformer.transform(source, result);\n}\n</code></pre>\n<p>I tried calling <code>normalize()</code> and <code>normalizeDocument()</code> on the Document, and <code>normalize()</code> on the root node and the node being imported to no avail. Based on the method documentation, I expected as much, but I tried it anyway. This is not a huge deal, but it bothered me enough to post this question. I would like for the extra blank lines to be removed.</p>\n"},{"tags":["java","drools","java-17"],"answers":[{"tags":[],"owner":{"account_id":1197384,"reputation":6314,"user_id":1168802,"display_name":"Esteban Aliverti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699019622,"creation_date":1699019622,"answer_id":77417186,"question_id":77414407,"body_markdown":"This is probably a duplicate of: https://stackoverflow.com/questions/74884571/drools-mvel-is-not-present-after-the-upgrade-of-the-drools-decisiontables-librar\r\n\r\nThe MVEL integration with Drools was moved to a `drools-mvel` artifact. Try adding the following dependency to your project:\r\n\r\n```\r\n&lt;dependency&gt;\r\n      &lt;groupId&gt;org.drools&lt;/groupId&gt;\r\n      &lt;artifactId&gt;drools-mvel&lt;/artifactId&gt;\r\n      &lt;version&gt;7.74.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"org.drools.core.util.MVELSafeHelper is not available in 7.74.1.Final drools version","body":"<p>This is probably a duplicate of: <a href=\"https://stackoverflow.com/questions/74884571/drools-mvel-is-not-present-after-the-upgrade-of-the-drools-decisiontables-librar\">drools-mvel is not present after the upgrade of the drools-decisiontables library from 7.67 to 8.31 due to that MissingDependencyException occurring</a></p>\n<p>The MVEL integration with Drools was moved to a <code>drools-mvel</code> artifact. Try adding the following dependency to your project:</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;org.drools&lt;/groupId&gt;\n      &lt;artifactId&gt;drools-mvel&lt;/artifactId&gt;\n      &lt;version&gt;7.74.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":6853454,"reputation":23,"user_id":5269875,"display_name":"Dilan Madurapperuma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699397100,"accepted_answer_id":77417186,"answer_count":1,"score":0,"last_activity_date":1699019622,"creation_date":1698990267,"question_id":77414407,"body_markdown":"I&#39;m updating drools version from 7.20.0.Final to 7.74.1.Final. After update the dependency to 7.74.1.Final, I got an error saying couldn&#39;t find org.drools.core.util.MVELSafeHelper.\r\n\r\nI have following code and need to do this without MVELSafeHelper.\r\n\r\n        class Checker {\r\n    \r\n            private Object processTypeDataValue(String key, Object value) {\r\n                if (!(value instanceof String)) {\r\n                    return value;\r\n                }\r\n    \r\n                try {\r\n                    return MVELSafeHelper.getEvaluator().eval((String) value);\r\n                } catch (Exception e) {\r\n                    log.warn(&quot;Problem evaluating metadata through MVEL&quot;, e);\r\n                    return value;\r\n                }\r\n            }\r\n    \r\n        }\r\n\r\nAny alternative way to do this without MVELSafeHelper?","title":"org.drools.core.util.MVELSafeHelper is not available in 7.74.1.Final drools version","body":"<p>I'm updating drools version from 7.20.0.Final to 7.74.1.Final. After update the dependency to 7.74.1.Final, I got an error saying couldn't find org.drools.core.util.MVELSafeHelper.</p>\n<p>I have following code and need to do this without MVELSafeHelper.</p>\n<pre><code>    class Checker {\n\n        private Object processTypeDataValue(String key, Object value) {\n            if (!(value instanceof String)) {\n                return value;\n            }\n\n            try {\n                return MVELSafeHelper.getEvaluator().eval((String) value);\n            } catch (Exception e) {\n                log.warn(&quot;Problem evaluating metadata through MVEL&quot;, e);\n                return value;\n            }\n        }\n\n    }\n</code></pre>\n<p>Any alternative way to do this without MVELSafeHelper?</p>\n"},{"tags":["java","maven","jaxb","java-17"],"owner":{"account_id":219754,"reputation":12930,"user_id":476828,"accept_rate":51,"display_name":"Subodh Joshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699019583,"creation_date":1699019583,"question_id":77417181,"body_markdown":"I am in the process of migrating my project from Java 1.8 to Java 17. However, when I attempt to execute &#39;mvn clean install,&#39; it fails with the following error:\r\n\r\n&gt;  Failed to execute goal org.codehaus.mojo:jaxb2-maven-plugin:1.6:xjc\r\n&gt; (InternalAPI) on project ProjectName: Execution InternalAPI of goal\r\n&gt; org.codehaus.mojo:jaxb2-maven-plugin:1.6:xjc failed: A required class\r\n&gt; was missing while executing\r\n&gt; org.codehaus.mojo:jaxb2-maven-plugin:1.6:xjc:\r\n&gt; javax/activation/DataSource\r\n\r\nbelow is the plugin used to generate \r\n\r\n     &lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;1.6&lt;/version&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;InternalAPI&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;xjc&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;schemaDirectory&gt;../project/src/main/resources/xsd/int&lt;/schemaDirectory&gt;\r\n    \t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.basedir}/target/generated-sources&lt;/outputDirectory&gt;\r\n                                &lt;bindingFiles&gt;binding.xml&lt;/bindingFiles&gt;\r\n    \t\t\t\t\t\t\t&lt;packageName&gt;com.xyz.schema&lt;/packageName&gt;\r\n    \t\t\t\t\t\t\t&lt;clearOutputDir&gt;true&lt;/clearOutputDir&gt;\r\n    \t\t\t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;PublicAPI&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;xjc&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t\t\t&lt;schemaDirectoryrectory&gt;../project/src/main/resources/xsd/pub&lt;/schemaDirectoryrectory&gt;\r\n    \t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.basedir}/target/generated-sources&lt;/outputDirectory&gt;\r\n                                &lt;bindingFiles&gt;binding.xml&lt;/bindingFiles&gt;\r\n    \t\t\t\t\t\t\t&lt;packageName&gt;com.xyz.schema.api&lt;/packageName&gt;\r\n    \t\t\t\t\t\t\t&lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n                            &lt;/configuration&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt; \r\n\r\nWith Java17 is something change with the version? With latest version of Jaxb2 also its not working.","title":"Failed to execute goal org.codehaus.mojo:jaxb2-maven-plugin:1.6:xjc","body":"<p>I am in the process of migrating my project from Java 1.8 to Java 17. However, when I attempt to execute 'mvn clean install,' it fails with the following error:</p>\n<blockquote>\n<p>Failed to execute goal org.codehaus.mojo:jaxb2-maven-plugin:1.6:xjc\n(InternalAPI) on project ProjectName: Execution InternalAPI of goal\norg.codehaus.mojo:jaxb2-maven-plugin:1.6:xjc failed: A required class\nwas missing while executing\norg.codehaus.mojo:jaxb2-maven-plugin:1.6:xjc:\njavax/activation/DataSource</p>\n</blockquote>\n<p>below is the plugin used to generate</p>\n<pre><code> &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;InternalAPI&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;xjc&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;schemaDirectory&gt;../project/src/main/resources/xsd/int&lt;/schemaDirectory&gt;\n                            &lt;outputDirectory&gt;${project.basedir}/target/generated-sources&lt;/outputDirectory&gt;\n                            &lt;bindingFiles&gt;binding.xml&lt;/bindingFiles&gt;\n                            &lt;packageName&gt;com.xyz.schema&lt;/packageName&gt;\n                            &lt;clearOutputDir&gt;true&lt;/clearOutputDir&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;PublicAPI&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;xjc&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;schemaDirectoryrectory&gt;../project/src/main/resources/xsd/pub&lt;/schemaDirectoryrectory&gt;\n                            &lt;outputDirectory&gt;${project.basedir}/target/generated-sources&lt;/outputDirectory&gt;\n                            &lt;bindingFiles&gt;binding.xml&lt;/bindingFiles&gt;\n                            &lt;packageName&gt;com.xyz.schema.api&lt;/packageName&gt;\n                            &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt; \n</code></pre>\n<p>With Java17 is something change with the version? With latest version of Jaxb2 also its not working.</p>\n"},{"tags":["java","redis","redis-streams"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1699019163,"post_id":77417112,"comment_id":136481567,"body_markdown":"&quot;*what should I do to fixed this issue?*&quot; - What is here to fix? Why not keep the base64 encoded value? What do you want instead?","body":"&quot;<i>what should I do to fixed this issue?</i>&quot; - What is here to fix? Why not keep the base64 encoded value? What do you want instead?"},{"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"score":0,"creation_date":1699019228,"post_id":77417112,"comment_id":136481578,"body_markdown":"I want the json with plain text without any extra encoding. because the send process using java, the consumer process using rust. if enoded, it is a bit complex to parse in rust client.","body":"I want the json with plain text without any extra encoding. because the send process using java, the consumer process using rust. if enoded, it is a bit complex to parse in rust client."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1699019786,"post_id":77417112,"comment_id":136481701,"body_markdown":"Have you verified that the data is correct? I have converted the fileds, and they convert to `{&quot;_class&quot;: &quot;com.dolphin.soa.post.model.custom.SysEvent&quot;, &quot;data._class&quot;: &quot;com.dolphin.soa.post.model.custom.NicknameEdit&quot;}`.","body":"Have you verified that the data is correct? I have converted the fileds, and they convert to <code>{&quot;_class&quot;: &quot;com.dolphin.soa.post.model.custom.SysEvent&quot;, &quot;data._class&quot;: &quot;com.dolphin.soa.post.model.custom.NicknameEdit&quot;}</code>."},{"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"score":0,"creation_date":1699024285,"post_id":77417112,"comment_id":136482776,"body_markdown":"I tried to send the plain text without object entiry, and the message is plain text now. it look like this `{\n    &quot;payload&quot;: &quot;{\\&quot;data\\&quot;:{\\&quot;nickname\\&quot;:\\&quot;jxq\\&quot;,\\&quot;userId\\&quot;:103},\\&quot;id\\&quot;:706376887005974528,\\&quot;msgType\\&quot;:\\&quot;NICKNAME_UPDATE\\&quot;}&quot;\n}`","body":"I tried to send the plain text without object entiry, and the message is plain text now. it look like this <code>{     &quot;payload&quot;: &quot;{\\&quot;data\\&quot;:{\\&quot;nickname\\&quot;:\\&quot;jxq\\&quot;,\\&quot;userId\\&quot;:103},\\&quot;id\\&quot;:7063&zwnj;&#8203;76887005974528,\\&quot;msg&zwnj;&#8203;Type\\&quot;:\\&quot;NICKNAME_UP&zwnj;&#8203;DATE\\&quot;}&quot; }</code>"}],"owner":{"account_id":3106126,"reputation":31281,"user_id":2628868,"accept_rate":84,"display_name":"Dolphin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699019278,"creation_date":1699018988,"question_id":77417112,"body_markdown":"When I tried to send object data to redis stream(`Redis Version: 7.0.8`) using java(java 11) like this:\r\n\r\n\r\n\r\n    package com.dolphin.soa.post.common.mq;\r\n    \r\n    import com.dolphin.soa.post.model.custom.NicknameEdit;\r\n    import lombok.RequiredArgsConstructor;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.data.redis.connection.stream.ObjectRecord;\r\n    import org.springframework.data.redis.connection.stream.RecordId;\r\n    import org.springframework.data.redis.connection.stream.StreamRecords;\r\n    import org.springframework.data.redis.core.RedisTemplate;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    @Slf4j\r\n    @RequiredArgsConstructor\r\n    public class StreamMessageProducer {\r\n    \r\n        private final RedisTemplate&lt;String, NicknameEdit&gt; redisTemplate;\r\n    \r\n        public void sendRecord(String streamKey, String nickname) {\r\n            NicknameEdit nicknameEdit = new NicknameEdit();\r\n            nicknameEdit.setNickname(nickname);\r\n            ObjectRecord&lt;String, NicknameEdit&gt; record = StreamRecords.newRecord()\r\n                    .in(streamKey)\r\n                    .ofObject(nicknameEdit)\r\n                    .withId(RecordId.autoGenerate());\r\n            RecordId recordId = redisTemplate.opsForStream()\r\n                    .add(record);\r\n        }\r\n    }\r\n\r\n\r\nthe data in redis shows like this:\r\n\r\n\r\n\r\n\r\n    {\r\n        &quot;\\&quot;X2NsYXNz\\&quot;&quot;: &quot;\\&quot;Y29tLmRvbHBoaW4uc29hLnBvc3QubW9kZWwuY3VzdG9tLlN5c0V2ZW50\\&quot;&quot;,\r\n        &quot;\\&quot;ZGF0YS5fY2xhc3M=\\&quot;&quot;: &quot;\\&quot;Y29tLmRvbHBoaW4uc29hLnBvc3QubW9kZWwuY3VzdG9tLk5pY2tuYW1lRWRpdA==\\&quot;&quot;,\r\n    }\r\n\r\n\r\n\r\n\r\nit looks like the send process automatically convert the object fields to base64. why did this happen? what should I do to fixed this issue? this is the `NicknameEdit` define:\r\n\r\n\r\n\r\n    package com.dolphin.soa.post.model.custom;\r\n    \r\n    import lombok.Data;\r\n    \r\n    import java.io.Serializable;\r\n    \r\n    @Data\r\n    public class NicknameEdit implements Serializable {\r\n        /**\r\n         * admin_users.id\r\n         *\r\n         * @mbggenerated\r\n         */\r\n        private Long userId;\r\n    \r\n        /**\r\n         * admin_users.nickname\r\n         *\r\n         * @mbggenerated\r\n         */\r\n        private String nickname;\r\n    }\r\n\r\n\r\nIs it possible to close the base64 encoding and just send the plain text json string?\r\n\r\n","title":"the java send entity to redis stream convert to base64","body":"<p>When I tried to send object data to redis stream(<code>Redis Version: 7.0.8</code>) using java(java 11) like this:</p>\n<pre><code>package com.dolphin.soa.post.common.mq;\n\nimport com.dolphin.soa.post.model.custom.NicknameEdit;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.data.redis.connection.stream.ObjectRecord;\nimport org.springframework.data.redis.connection.stream.RecordId;\nimport org.springframework.data.redis.connection.stream.StreamRecords;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.stereotype.Component;\n\n@Component\n@Slf4j\n@RequiredArgsConstructor\npublic class StreamMessageProducer {\n\n    private final RedisTemplate&lt;String, NicknameEdit&gt; redisTemplate;\n\n    public void sendRecord(String streamKey, String nickname) {\n        NicknameEdit nicknameEdit = new NicknameEdit();\n        nicknameEdit.setNickname(nickname);\n        ObjectRecord&lt;String, NicknameEdit&gt; record = StreamRecords.newRecord()\n                .in(streamKey)\n                .ofObject(nicknameEdit)\n                .withId(RecordId.autoGenerate());\n        RecordId recordId = redisTemplate.opsForStream()\n                .add(record);\n    }\n}\n</code></pre>\n<p>the data in redis shows like this:</p>\n<pre><code>{\n    &quot;\\&quot;X2NsYXNz\\&quot;&quot;: &quot;\\&quot;Y29tLmRvbHBoaW4uc29hLnBvc3QubW9kZWwuY3VzdG9tLlN5c0V2ZW50\\&quot;&quot;,\n    &quot;\\&quot;ZGF0YS5fY2xhc3M=\\&quot;&quot;: &quot;\\&quot;Y29tLmRvbHBoaW4uc29hLnBvc3QubW9kZWwuY3VzdG9tLk5pY2tuYW1lRWRpdA==\\&quot;&quot;,\n}\n</code></pre>\n<p>it looks like the send process automatically convert the object fields to base64. why did this happen? what should I do to fixed this issue? this is the <code>NicknameEdit</code> define:</p>\n<pre><code>package com.dolphin.soa.post.model.custom;\n\nimport lombok.Data;\n\nimport java.io.Serializable;\n\n@Data\npublic class NicknameEdit implements Serializable {\n    /**\n     * admin_users.id\n     *\n     * @mbggenerated\n     */\n    private Long userId;\n\n    /**\n     * admin_users.nickname\n     *\n     * @mbggenerated\n     */\n    private String nickname;\n}\n</code></pre>\n<p>Is it possible to close the base64 encoding and just send the plain text json string?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1699018934,"post_id":77417092,"comment_id":136481508,"body_markdown":"You&#39;re missing the import for `Transactional` (`org.springframework.transaction.annotation.Transactional`). And if you can&#39;t find that, then you don&#39;t have the `spring-tx` dependency on your classpath, which means you don&#39;t have the relevant dependency or Spring Boot starter specified in your Maven pom.xml.","body":"You&#39;re missing the import for <code>Transactional</code> (<code>org.springframework.transaction.annotation.Transactional</code>). And if you can&#39;t find that, then you don&#39;t have the <code>spring-tx</code> dependency on your classpath, which means you don&#39;t have the relevant dependency or Spring Boot starter specified in your Maven pom.xml."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1699019043,"post_id":77417092,"comment_id":136481538,"body_markdown":"Are you using gradle or maven? If so: please [edit] the post and add your `build.gradel` / `pom.xml`.","body":"Are you using gradle or maven? If so: please <a href=\"https://stackoverflow.com/posts/77417092/edit\">edit</a> the post and add your <code>build.gradel</code> / <code>pom.xml</code>."}],"owner":{"account_id":26968426,"reputation":1,"user_id":20534841,"display_name":"Julian Zapata"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699019212,"answer_count":0,"score":0,"last_activity_date":1699018947,"creation_date":1699018796,"question_id":77417092,"body_markdown":"have this code. I&#39;m studying the springboot framework\r\n\r\n    package com.cursojava.curso.dao;\r\n\r\n    import com.cursojava.curso.models.Usuario;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    import java.util.List;\r\n\r\n    @Repository\r\n    @Transactional\r\n    public class DaoUsuarioImplementacion implements UsuarioDao{\r\n\r\n         @Override\r\n         public List&lt;Usuario&gt; getUsuarios() {\r\n           return null;\r\n        }\r\n    }\r\n\r\nAnd the IDE send me an error in Transactional. When I hover on it, it says &quot;Create anotation&quot;. No problem I said, I go more options&gt;add Maven dependency, but no matter how I search it only appears &quot;TransactionalTestExecutionListener&quot;.\r\nI tried invalidating caches, deleting the .idea directory and still appears this problem.\r\nI&#39;m using the community edition of IntelliJ\r\n\r\n\r\nI tried invalidating caches, searching in the dependencies, deleting the .idea directory, restarting the IDE, restarting the PC.","title":"Can not resolve the symbol &#39;Transactional&#39;","body":"<p>have this code. I'm studying the springboot framework</p>\n<pre><code>package com.cursojava.curso.dao;\n\nimport com.cursojava.curso.models.Usuario;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n@Repository\n@Transactional\npublic class DaoUsuarioImplementacion implements UsuarioDao{\n\n     @Override\n     public List&lt;Usuario&gt; getUsuarios() {\n       return null;\n    }\n}\n</code></pre>\n<p>And the IDE send me an error in Transactional. When I hover on it, it says &quot;Create anotation&quot;. No problem I said, I go more options&gt;add Maven dependency, but no matter how I search it only appears &quot;TransactionalTestExecutionListener&quot;.\nI tried invalidating caches, deleting the .idea directory and still appears this problem.\nI'm using the community edition of IntelliJ</p>\n<p>I tried invalidating caches, searching in the dependencies, deleting the .idea directory, restarting the IDE, restarting the PC.</p>\n"},{"tags":["java","android","ory"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1684965823,"post_id":76327454,"comment_id":134596497,"body_markdown":"&quot;How can I fix that?&quot; -- probably not easily. That library is designed to be used with the JDK, for desktop or server Java. Is there an Android library that you could use instead?","body":"&quot;How can I fix that?&quot; -- probably not easily. That library is designed to be used with the JDK, for desktop or server Java. Is there an Android library that you could use instead?"},{"owner":{"account_id":113220,"reputation":15923,"user_id":298288,"accept_rate":55,"display_name":"stefan.at.kotlin"},"score":0,"creation_date":1684966218,"post_id":76327454,"comment_id":134596560,"body_markdown":"thanks, that&#39;s what I already expected ): There is no Android library version, but the YAML from which the client was generated using openapi generator is available. That&#39;s the way I want to try, I have a question posted for that at https://stackoverflow.com/questions/76327679/generate-api-client-from-yaml-for-android","body":"thanks, that&#39;s what I already expected ): There is no Android library version, but the YAML from which the client was generated using openapi generator is available. That&#39;s the way I want to try, I have a question posted for that at <a href=\"https://stackoverflow.com/questions/76327679/generate-api-client-from-yaml-for-android\" title=\"generate api client from yaml for android\">stackoverflow.com/questions/76327679/&hellip;</a>"},{"owner":{"account_id":113220,"reputation":15923,"user_id":298288,"accept_rate":55,"display_name":"stefan.at.kotlin"},"score":0,"creation_date":1685028189,"post_id":76327454,"comment_id":134606966,"body_markdown":"Robert, wer did you see, that it&#39;s set to compile scope only? Thanks.","body":"Robert, wer did you see, that it&#39;s set to compile scope only? Thanks."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1685040617,"post_id":76327454,"comment_id":134609541,"body_markdown":"Sorry stefan please forget what I had wrote, this was nonsense. The only part that was true is that the mentioned missing class is present in that library and as it is a dependency it should be included into the app. Not sure why it is missing. Just for curiosity have you checked the APK file e.g. using Jadx if the class `javax.ws.rs.core.GenericType` is really missing?","body":"Sorry stefan please forget what I had wrote, this was nonsense. The only part that was true is that the mentioned missing class is present in that library and as it is a dependency it should be included into the app. Not sure why it is missing. Just for curiosity have you checked the APK file e.g. using Jadx if the class <code>javax.ws.rs.core.GenericType</code> is really missing?"}],"answers":[{"comments":[{"owner":{"account_id":113220,"reputation":15923,"user_id":298288,"accept_rate":55,"display_name":"stefan.at.kotlin"},"score":0,"creation_date":1699122510,"post_id":77417072,"comment_id":136492717,"body_markdown":"did you also try to use it? Building it was not the issue, but using it (on Android)","body":"did you also try to use it? Building it was not the issue, but using it (on Android)"},{"owner":{"account_id":2175469,"reputation":31,"user_id":1926237,"display_name":"Fernando Gonz&#225;lez"},"score":0,"creation_date":1699265786,"post_id":77417072,"comment_id":136505338,"body_markdown":"Yes I&#39;m also able to use it. I copied the generated sources to my project and added the gradle dependencies. You can take a look to my github repository [Ory Auth capacitor plugin], (https://github.com/frnd/capacitor-ory-auth/tree/main/android) were I&#39;m currently testing it.","body":"Yes I&#39;m also able to use it. I copied the generated sources to my project and added the gradle dependencies. You can take a look to my github repository [Ory Auth capacitor plugin], (<a href=\"https://github.com/frnd/capacitor-ory-auth/tree/main/android\" rel=\"nofollow noreferrer\">github.com/frnd/capacitor-ory-auth/tree/main/android</a>) were I&#39;m currently testing it."}],"tags":[],"owner":{"account_id":2175469,"reputation":31,"user_id":1926237,"display_name":"Fernando Gonz&#225;lez"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699018532,"creation_date":1699018532,"answer_id":77417072,"question_id":76327454,"body_markdown":"I was able to use the SDK ([Ory Java Client][1]) by generating it myself using openapi-generator version **7.0.1**. \r\n\r\nSteps:\r\n\r\n- Clone the [SDK GitHub repo][2] \r\n- Change generator in file [generate.sh][3] to version **7.0.1**\r\n\r\n```\r\n    -  openapi-generator-cli version-manager set 6.2.1\r\n    +  openapi-generator-cli version-manager set 7.0.1\r\n```\r\n- Build client following the steps in [README.md][4]\r\n\r\n\r\n  [1]: https://central.sonatype.com/artifact/sh.ory/ory-client/\r\n  [2]: https://github.com/ory/sdk/tree/master\r\n  [3]: https://github.com/ory/sdk/blob/master/scripts/generate.sh#L70\r\n  [4]: https://github.com/ory/sdk/blob/master/README.md#debugging-failing-tests-on-ci","title":"java.lang.ClassNotFoundException: Didn&#39;t find class &quot;javax.ws.rs.core.GenericType&quot; on path: DexPathList","body":"<p>I was able to use the SDK (<a href=\"https://central.sonatype.com/artifact/sh.ory/ory-client/\" rel=\"nofollow noreferrer\">Ory Java Client</a>) by generating it myself using openapi-generator version <strong>7.0.1</strong>.</p>\n<p>Steps:</p>\n<ul>\n<li>Clone the <a href=\"https://github.com/ory/sdk/tree/master\" rel=\"nofollow noreferrer\">SDK GitHub repo</a></li>\n<li>Change generator in file <a href=\"https://github.com/ory/sdk/blob/master/scripts/generate.sh#L70\" rel=\"nofollow noreferrer\">generate.sh</a> to version <strong>7.0.1</strong></li>\n</ul>\n<pre><code>    -  openapi-generator-cli version-manager set 6.2.1\n    +  openapi-generator-cli version-manager set 7.0.1\n</code></pre>\n<ul>\n<li>Build client following the steps in <a href=\"https://github.com/ory/sdk/blob/master/README.md#debugging-failing-tests-on-ci\" rel=\"nofollow noreferrer\">README.md</a></li>\n</ul>\n"}],"owner":{"account_id":113220,"reputation":15923,"user_id":298288,"accept_rate":55,"display_name":"stefan.at.kotlin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699018532,"creation_date":1684963016,"question_id":76327454,"body_markdown":"I just integrated an SDK ([Ory Java client][1]) into my Android app, but when actually making a request using that SDK, I get this runtime error:\r\n\r\n    java.lang.NoClassDefFoundError: Failed resolution of: Ljavax/ws/rs/core/GenericType;\r\n    \tat sh.ory.model.UiNodeAttributes.validateJsonObject(UiNodeAttributes.java:380)\r\n    [..]   \r\n    Caused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;javax.ws.rs.core.GenericType&quot; on path: DexPathList[[&lt;paths removed for better readability&gt;]]\r\n    \tat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:259)\r\n    [..]\r\n\r\nHow can I fix that? Could I somehow add the library containing `javax.ws.rs.core.GenericType`? Is that possible at all as it seems to be part of the Oracle JDK?\r\n\r\n\r\n  [1]: https://central.sonatype.com/artifact/sh.ory/ory-client/1.1.33","title":"java.lang.ClassNotFoundException: Didn&#39;t find class &quot;javax.ws.rs.core.GenericType&quot; on path: DexPathList","body":"<p>I just integrated an SDK (<a href=\"https://central.sonatype.com/artifact/sh.ory/ory-client/1.1.33\" rel=\"nofollow noreferrer\">Ory Java client</a>) into my Android app, but when actually making a request using that SDK, I get this runtime error:</p>\n<pre><code>java.lang.NoClassDefFoundError: Failed resolution of: Ljavax/ws/rs/core/GenericType;\n    at sh.ory.model.UiNodeAttributes.validateJsonObject(UiNodeAttributes.java:380)\n[..]   \nCaused by: java.lang.ClassNotFoundException: Didn't find class &quot;javax.ws.rs.core.GenericType&quot; on path: DexPathList[[&lt;paths removed for better readability&gt;]]\n    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:259)\n[..]\n</code></pre>\n<p>How can I fix that? Could I somehow add the library containing <code>javax.ws.rs.core.GenericType</code>? Is that possible at all as it seems to be part of the Oracle JDK?</p>\n"},{"tags":["java","activemq"],"comments":[{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1654866027,"post_id":72574570,"comment_id":128200787,"body_markdown":"I doubt, that the file `C:Programsapache-activemq-5.17.1bin..conf\\jolokia-access.xml` actually exists. Something stripped the path separators aways, it seems.","body":"I doubt, that the file <code>C:Programsapache-activemq-5.17.1bin..conf\\jolokia-access.xml</code> actually exists. Something stripped the path separators aways, it seems."},{"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1654866256,"post_id":72574570,"comment_id":128200878,"body_markdown":"@Seelenvirtuose Yes, I think it&#39;s some problem in the start up batch file on Windows. Something related to this line: `set DEFAULT_ACTIVEMQ_HOME=%~dp0..`","body":"@Seelenvirtuose Yes, I think it&#39;s some problem in the start up batch file on Windows. Something related to this line: <code>set DEFAULT_ACTIVEMQ_HOME=%~dp0..</code>"},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1654869182,"post_id":72574570,"comment_id":128202067,"body_markdown":"This definitely looks like a bug. I think you should [report it to ActiveMQ](https://activemq.apache.org/issues).","body":"This definitely looks like a bug. I think you should <a href=\"https://activemq.apache.org/issues\" rel=\"nofollow noreferrer\">report it to ActiveMQ</a>."},{"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"score":0,"creation_date":1654869685,"post_id":72574570,"comment_id":128202273,"body_markdown":"@JustinBertram I see you work on ActiveMQ, could you report it for me? I need to create JIRA account etc. etc. Too complicated for filing a single bug.","body":"@JustinBertram I see you work on ActiveMQ, could you report it for me? I need to create JIRA account etc. etc. Too complicated for filing a single bug."},{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":2,"creation_date":1654871008,"post_id":72574570,"comment_id":128202784,"body_markdown":"https://issues.apache.org/jira/browse/AMQ-8628","body":"<a href=\"https://issues.apache.org/jira/browse/AMQ-8628\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/AMQ-8628</a>"}],"answers":[{"tags":[],"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1654869027,"creation_date":1654868424,"answer_id":72575295,"question_id":72574570,"body_markdown":"When I set a Windows environment variable \r\n\r\n`ACTIVEMQ_HOME=C:/Programs/apache-activemq-5.17.1/`\r\n\r\nI am able to solve the problem (note the trailing slash). \r\nThe error disappears then.    \r\n\r\nBut I noticed a few more things:   \r\n\r\n1) If I set the variable to `ACTIVEMQ_HOME=C:/Programs/apache-activemq-5.17.1` I still have that problem.  \r\n\r\n2) If I set `ACTIVEMQ_HOME=C:\\Programs\\apache-activemq-5.17.1\\` I still have the problem (i.e. if I use backslashes).   \r\n\r\n3) If I don&#39;t have a Windows environment variable `ACTIVEMQ_HOME` defined at all, I also have the problem.\r\n\r\nSo this seems like a bug in the ActiveMQ Windows startup script `activemq.bat`. It should not be so sensitive to this value. Also it should work without `ACTIVEMQ_HOME` being set at all (but it doesn&#39;t work).  \r\n\r\n","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>When I set a Windows environment variable</p>\n<p><code>ACTIVEMQ_HOME=C:/Programs/apache-activemq-5.17.1/</code></p>\n<p>I am able to solve the problem (note the trailing slash).\nThe error disappears then.</p>\n<p>But I noticed a few more things:</p>\n<ol>\n<li><p>If I set the variable to <code>ACTIVEMQ_HOME=C:/Programs/apache-activemq-5.17.1</code> I still have that problem.</p>\n</li>\n<li><p>If I set <code>ACTIVEMQ_HOME=C:\\Programs\\apache-activemq-5.17.1\\</code> I still have the problem (i.e. if I use backslashes).</p>\n</li>\n<li><p>If I don't have a Windows environment variable <code>ACTIVEMQ_HOME</code> defined at all, I also have the problem.</p>\n</li>\n</ol>\n<p>So this seems like a bug in the ActiveMQ Windows startup script <code>activemq.bat</code>. It should not be so sensitive to this value. Also it should work without <code>ACTIVEMQ_HOME</code> being set at all (but it doesn't work).</p>\n"},{"tags":[],"owner":{"account_id":1816046,"reputation":1389,"user_id":1651107,"accept_rate":100,"display_name":"Piro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658316291,"creation_date":1658316291,"answer_id":73050791,"question_id":72574570,"body_markdown":"Setting environment variable ([from OP&#39;s answer][1]) did not work for me for version 5.17.1. \r\n\r\nOne easy solution is to use different activeMQ version. For example apache-activemq-5.16.3 works correctly. Here is archive of versions available: https://activemq.apache.org/download-archives\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72575295/1651107","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>Setting environment variable (<a href=\"https://stackoverflow.com/a/72575295/1651107\">from OP's answer</a>) did not work for me for version 5.17.1.</p>\n<p>One easy solution is to use different activeMQ version. For example apache-activemq-5.16.3 works correctly. Here is archive of versions available: <a href=\"https://activemq.apache.org/download-archives\" rel=\"nofollow noreferrer\">https://activemq.apache.org/download-archives</a></p>\n"},{"tags":[],"owner":{"account_id":11702596,"reputation":81,"user_id":8567129,"display_name":"NITISH DASTANE"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659002155,"creation_date":1659002155,"answer_id":73150819,"question_id":72574570,"body_markdown":"I kind of agree this needs to be fixed from ActiveMq side. \r\nBut to resolve this issue you can set Environment Variable as -\r\n\r\n```\r\nACTIVEMQ_HOME=C:\\\\Programs\\\\apache-activemq-5.17.1\\\\\r\n```\r\n\r\nIt worked for me","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>I kind of agree this needs to be fixed from ActiveMq side.\nBut to resolve this issue you can set Environment Variable as -</p>\n<pre><code>ACTIVEMQ_HOME=C:\\\\Programs\\\\apache-activemq-5.17.1\\\\\n</code></pre>\n<p>It worked for me</p>\n"},{"tags":[],"owner":{"account_id":5338444,"reputation":908,"user_id":5315151,"accept_rate":79,"display_name":"Michelle Ashwini"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1663833342,"creation_date":1663817126,"answer_id":73809018,"question_id":72574570,"body_markdown":"Based on input in the [Active MQ Jira issue][1], I replaced ${prop:activemq.conf} with the following in the D:\\Program Files\\activemq\\webapps\\api\\WEB-INF\\web.xml\r\n\r\n        &lt;init-param&gt;\r\n        &lt;param-name&gt;policyLocation&lt;/param-name&gt;\r\n        &lt;param-value&gt;file:D:/Program Files/activemq/conf/jolokia-access.xml&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n\r\nAfterwhich, the error is not thrown.\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/AMQ-8596","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>Based on input in the <a href=\"https://issues.apache.org/jira/browse/AMQ-8596\" rel=\"nofollow noreferrer\">Active MQ Jira issue</a>, I replaced ${prop:activemq.conf} with the following in the D:\\Program Files\\activemq\\webapps\\api\\WEB-INF\\web.xml</p>\n<pre><code>    &lt;init-param&gt;\n    &lt;param-name&gt;policyLocation&lt;/param-name&gt;\n    &lt;param-value&gt;file:D:/Program Files/activemq/conf/jolokia-access.xml&lt;/param-value&gt;\n&lt;/init-param&gt;\n</code></pre>\n<p>Afterwhich, the error is not thrown.</p>\n"},{"tags":[],"owner":{"account_id":1724838,"reputation":567,"user_id":1579778,"display_name":"TomTichy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664458130,"creation_date":1664458130,"answer_id":73896388,"question_id":72574570,"body_markdown":"As others reported, this happens because the ACTIVEMQ_HOME is not set.\r\nHowever, if you create a new broker using the `activeq-admin` script like this \r\n```\r\n.\\activemq-admin.bat create ..\\standalone\\mybroker\r\n```\r\n\r\nyou can run it with `standalone\\mybroker.bat start` and it runs just fine.  \r\nIf you examine the batch file, you&#39;ll see that the environment variable ACTIVEMQ_HOME is set.","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>As others reported, this happens because the ACTIVEMQ_HOME is not set.\nHowever, if you create a new broker using the <code>activeq-admin</code> script like this</p>\n<pre><code>.\\activemq-admin.bat create ..\\standalone\\mybroker\n</code></pre>\n<p>you can run it with <code>standalone\\mybroker.bat start</code> and it runs just fine.<br />\nIf you examine the batch file, you'll see that the environment variable ACTIVEMQ_HOME is set.</p>\n"},{"tags":[],"owner":{"account_id":9243072,"reputation":11,"user_id":6865815,"display_name":"A.Gesite"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678015098,"creation_date":1677703310,"answer_id":75608784,"question_id":72574570,"body_markdown":"Modify the apache-activemq-5.17.4\\bin\\win64\\wrapper.conf\r\nApproximately line 64\r\n\r\nUnder The Java Additional Parameters section, enclose the directory variable and filename in quotes:\r\n\r\nFROM:\r\n\r\n`wrapper.java.additional.13=-Djolokia.conf=file:%ACTIVEMQ_CONF%/jolokia-access.xml`\r\n\r\nTO:\r\n\r\n`wrapper.java.additional.13=-Djolokia.conf=file:&quot;%ACTIVEMQ_CONF%/jolokia-access.xml&quot;`","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>Modify the apache-activemq-5.17.4\\bin\\win64\\wrapper.conf\nApproximately line 64</p>\n<p>Under The Java Additional Parameters section, enclose the directory variable and filename in quotes:</p>\n<p>FROM:</p>\n<p><code>wrapper.java.additional.13=-Djolokia.conf=file:%ACTIVEMQ_CONF%/jolokia-access.xml</code></p>\n<p>TO:</p>\n<p><code>wrapper.java.additional.13=-Djolokia.conf=file:&quot;%ACTIVEMQ_CONF%/jolokia-access.xml&quot;</code></p>\n"},{"tags":[],"owner":{"account_id":28366201,"reputation":1,"user_id":21695465,"display_name":"Sundaram Harikumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682414572,"creation_date":1682047419,"answer_id":76069663,"question_id":72574570,"body_markdown":"I solved the issue by changing the wrapper configuration as shown below:\r\n\r\n```\r\nwrapper.java.library.path.1=%ACTIVEMQ_HOME%/conf\r\n\r\nwrapper.java.additional.13=-Djolokia.conf=classpath:jolokia-access.xml\r\n```","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>I solved the issue by changing the wrapper configuration as shown below:</p>\n<pre><code>wrapper.java.library.path.1=%ACTIVEMQ_HOME%/conf\n\nwrapper.java.additional.13=-Djolokia.conf=classpath:jolokia-access.xml\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7488070,"reputation":657,"user_id":5690668,"display_name":"datenstation"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699018438,"creation_date":1699018438,"answer_id":77417064,"question_id":72574570,"body_markdown":"I installed ActiveMQ 5.18.3 as Windows service using the installer script `bin/win64/InstallService.bat`.\r\n\r\nGot the error in `activemq.log` when the service starts:\r\n\r\n    java.io.FileNotFoundException: C:apache-activemq-5.18.3binwin64....\\conf\\jolokia-access.xml (The system cannot find the path specified)\r\n\r\nMy solution was to change `bin/win64/wrapper.conf` and set an absolute path like:\r\n\r\n    wrapper.java.additional.13=-Djolokia.conf=file:&quot;C:/apache-activemq-5.18.3/conf/jolokia-access.xml&quot;\r\n\r\nThe whole problem for Windows service installation results from the above mentioned installer script. `ACTIVEMQ_BASE` is defined at service installation time and I think this is the root cause why you can&#39;t change it later easily.\r\n\r\n","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>I installed ActiveMQ 5.18.3 as Windows service using the installer script <code>bin/win64/InstallService.bat</code>.</p>\n<p>Got the error in <code>activemq.log</code> when the service starts:</p>\n<pre><code>java.io.FileNotFoundException: C:apache-activemq-5.18.3binwin64....\\conf\\jolokia-access.xml (The system cannot find the path specified)\n</code></pre>\n<p>My solution was to change <code>bin/win64/wrapper.conf</code> and set an absolute path like:</p>\n<pre><code>wrapper.java.additional.13=-Djolokia.conf=file:&quot;C:/apache-activemq-5.18.3/conf/jolokia-access.xml&quot;\n</code></pre>\n<p>The whole problem for Windows service installation results from the above mentioned installer script. <code>ACTIVEMQ_BASE</code> is defined at service installation time and I think this is the root cause why you can't change it later easily.</p>\n"}],"owner":{"account_id":2660877,"reputation":38543,"user_id":2300597,"accept_rate":55,"display_name":"peter.petrov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3184,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":8,"score":6,"last_activity_date":1699018438,"creation_date":1654865370,"question_id":72574570,"body_markdown":"I downloaded and unzipped the latest ActiveMQ version 5.17.1. I&#39;m using Java 11.0.11 and Windows 10 Enterprise Build: 19044.1706.\r\n\r\nWhen I started ActiveMQ via `.\\bin\\activemq.bat start` I got this `FileNotFoundException`:\r\n\r\n```\r\nWARN | Store limit is 102400 mb (current store usage is 0 mb). The data directory: C:\\Programs\\apache-activemq-5.17.1\\bin\\..\\data\\kahadb only has 21729 mb of usable space. - resetting to maximum available disk space: 21729 mb\r\nWARN | Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: C:\\Programs\\apache-activemq-5.17.1\\bin\\..\\data only has 21728 mb of usable space. - resetting to maximum available disk space: 21728 mb\r\nINFO | ActiveMQ WebConsole available at http://127.0.0.1:8161/\r\nINFO | ActiveMQ Jolokia REST API available at http://127.0.0.1:8161/api/jolokia/\r\nWARN | jolokia-agent: Error while accessing access restrictor at file:C:Programsapache-activemq-5.17.1bin..conf/jolokia-access.xml. Denying all access to MBeans for security reasons. Exception: java.io.FileNotFoundException: C:Programsapache-activemq-5.17.1bin..conf\\jolokia-access.xml (The system cannot find the path specified)\r\n\tjava.io.FileNotFoundException: C:Programsapache-activemq-5.17.1bin..conf\\jolokia-access.xml (The system cannot find the path specified)\r\n       at java.io.FileInputStream.open0(Native Method) ~[?:?]\r\n       at java.io.FileInputStream.open(FileInputStream.java:219) ~[?:?]\r\n       at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157) ~[?:?]\r\n       at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:112) ~[?:?]\r\n```\r\n\r\nHow do I fix this `FileNotFoundException`?\r\n\r\nIt seems to be some problem with the file names (i.e. `C:Programsapache-activemq-5.17.1bin..conf\\jolokia-access.xml`).\r\n\r\nI am not even sure if I should trust the `FileNotFoundException` error message. ","title":"ActiveMQ startup problem on Windows - FileNotFoundException for jolokia-access.xml","body":"<p>I downloaded and unzipped the latest ActiveMQ version 5.17.1. I'm using Java 11.0.11 and Windows 10 Enterprise Build: 19044.1706.</p>\n<p>When I started ActiveMQ via <code>.\\bin\\activemq.bat start</code> I got this <code>FileNotFoundException</code>:</p>\n<pre><code>WARN | Store limit is 102400 mb (current store usage is 0 mb). The data directory: C:\\Programs\\apache-activemq-5.17.1\\bin\\..\\data\\kahadb only has 21729 mb of usable space. - resetting to maximum available disk space: 21729 mb\nWARN | Temporary Store limit is 51200 mb (current store usage is 0 mb). The data directory: C:\\Programs\\apache-activemq-5.17.1\\bin\\..\\data only has 21728 mb of usable space. - resetting to maximum available disk space: 21728 mb\nINFO | ActiveMQ WebConsole available at http://127.0.0.1:8161/\nINFO | ActiveMQ Jolokia REST API available at http://127.0.0.1:8161/api/jolokia/\nWARN | jolokia-agent: Error while accessing access restrictor at file:C:Programsapache-activemq-5.17.1bin..conf/jolokia-access.xml. Denying all access to MBeans for security reasons. Exception: java.io.FileNotFoundException: C:Programsapache-activemq-5.17.1bin..conf\\jolokia-access.xml (The system cannot find the path specified)\n    java.io.FileNotFoundException: C:Programsapache-activemq-5.17.1bin..conf\\jolokia-access.xml (The system cannot find the path specified)\n       at java.io.FileInputStream.open0(Native Method) ~[?:?]\n       at java.io.FileInputStream.open(FileInputStream.java:219) ~[?:?]\n       at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157) ~[?:?]\n       at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:112) ~[?:?]\n</code></pre>\n<p>How do I fix this <code>FileNotFoundException</code>?</p>\n<p>It seems to be some problem with the file names (i.e. <code>C:Programsapache-activemq-5.17.1bin..conf\\jolokia-access.xml</code>).</p>\n<p>I am not even sure if I should trust the <code>FileNotFoundException</code> error message.</p>\n"},{"tags":["java","spring-boot","amazon-elastic-beanstalk","amazon-route53"],"owner":{"account_id":4641398,"reputation":1,"user_id":3761142,"display_name":"OGomez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699018433,"creation_date":1699018433,"question_id":77417063,"body_markdown":"my site is in aws (route53, certificate manager, load balance and the backend in spring with thymeleaf in Beanstalk)\r\nneed get the request url from springboot app, this&#39;s my code:\r\n\r\n```\r\n@RequestMapping(&quot;/categoria/{permalink}&quot;)\r\n    public ModelAndView articlesByCategory(HttpServletRequest httpServletRequest) {\r\n        ModelAndView model = new ModelAndView(&quot;articles-by-category&quot;);\r\n        model.addObject(&quot;siteName&quot;, getSiteName(httpServletRequest));\r\n        return model;\r\n}\r\n```\r\n\r\n\r\n```\r\n private String getSiteName(HttpServletRequest httpServletRequest) {\r\n        String url = httpServletRequest.getRequestURL().toString();\r\n        if (url.contains(&quot;www.mysite.com&quot;))\r\n            return &quot;Sitename 1&quot;;\r\n        if (url.contains(&quot;www.mysite3.com&quot;))\r\n            return &quot;Sitename 3&quot;;\r\n        return &quot;Site name group&quot;;\r\n\r\n    }\r\n```\r\n\r\n\r\nbut in instance aws the returned value is 127.0.0.1 or the private IP... cannot get www.mysite.com.\r\n\r\nAny ideas how to get the request url?\r\n","title":"Get request url from instance aws beanstalk with route53","body":"<p>my site is in aws (route53, certificate manager, load balance and the backend in spring with thymeleaf in Beanstalk)\nneed get the request url from springboot app, this's my code:</p>\n<pre><code>@RequestMapping(&quot;/categoria/{permalink}&quot;)\n    public ModelAndView articlesByCategory(HttpServletRequest httpServletRequest) {\n        ModelAndView model = new ModelAndView(&quot;articles-by-category&quot;);\n        model.addObject(&quot;siteName&quot;, getSiteName(httpServletRequest));\n        return model;\n}\n</code></pre>\n<pre><code> private String getSiteName(HttpServletRequest httpServletRequest) {\n        String url = httpServletRequest.getRequestURL().toString();\n        if (url.contains(&quot;www.mysite.com&quot;))\n            return &quot;Sitename 1&quot;;\n        if (url.contains(&quot;www.mysite3.com&quot;))\n            return &quot;Sitename 3&quot;;\n        return &quot;Site name group&quot;;\n\n    }\n</code></pre>\n<p>but in instance aws the returned value is 127.0.0.1 or the private IP... cannot get <a href=\"http://www.mysite.com\" rel=\"nofollow noreferrer\">www.mysite.com</a>.</p>\n<p>Any ideas how to get the request url?</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1699017994,"post_id":77416957,"comment_id":136481323,"body_markdown":"Your Eclipse version is too old, obviously. You can still combine an older execution environment with a newer Java installation. Then, you can’t use newer features but it should run your code with errors.","body":"Your Eclipse version is too old, obviously. You can still combine an older execution environment with a newer Java installation. Then, you can’t use newer features but it should run your code with errors."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1699020609,"post_id":77416957,"comment_id":136481908,"body_markdown":"To clarify &quot;too old&quot;, Java versions 18 and 21 *didn&#39;t exist* when the version of Eclipse you are using was released.","body":"To clarify &quot;too old&quot;, Java versions 18 and 21 <i>didn&#39;t exist</i> when the version of Eclipse you are using was released."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1699022144,"post_id":77416957,"comment_id":136482251,"body_markdown":"Only Eclipse 2023-09 plus a patch actually has support for Java 21. Eclipse 2023-12 released in December will have support.","body":"Only Eclipse 2023-09 plus a patch actually has support for Java 21. Eclipse 2023-12 released in December will have support."},{"owner":{"account_id":4475689,"reputation":1215,"user_id":3640867,"accept_rate":60,"display_name":"EngineerWithJava54321"},"score":0,"creation_date":1699025016,"post_id":77416957,"comment_id":136482962,"body_markdown":"Updating Eclipse AND applying the patch has fixed the issue.  Setting up Apache POI has been a real pain...","body":"Updating Eclipse AND applying the patch has fixed the issue.  Setting up Apache POI has been a real pain..."}],"owner":{"account_id":4475689,"reputation":1215,"user_id":3640867,"accept_rate":60,"display_name":"EngineerWithJava54321"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699018095,"creation_date":1699017408,"question_id":77416957,"body_markdown":"I recently updated to JDK-21 from 18.0.1.  I compiled some libraries using 21 and started writing some code in eclipse.  I am getting an error that my compiled class is compiled by a later runtime environment.  The problem is that when I go to select my execution environment, there are none that correspond to JDK-21.  Did I miss something here? \r\n\r\n    java.lang.UnsupportedClassVersionError: org/apache/poi/xssf/usermodel/XSSFWorkbook has been compiled by a more recent version of the Java Runtime (class file version 65.0), this version of the Java Runtime only recognizes class file versions up to 62.0\r\n\r\n\r\n\r\n[![Installed JREs][1]][1]\r\n\r\n\r\n[![Execution Environments][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/j9dlK.png\r\n  [2]: https://i.stack.imgur.com/wswic.png","title":"Eclipse doesn&#39;t have java execution environment for my JDK","body":"<p>I recently updated to JDK-21 from 18.0.1.  I compiled some libraries using 21 and started writing some code in eclipse.  I am getting an error that my compiled class is compiled by a later runtime environment.  The problem is that when I go to select my execution environment, there are none that correspond to JDK-21.  Did I miss something here?</p>\n<pre><code>java.lang.UnsupportedClassVersionError: org/apache/poi/xssf/usermodel/XSSFWorkbook has been compiled by a more recent version of the Java Runtime (class file version 65.0), this version of the Java Runtime only recognizes class file versions up to 62.0\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/j9dlK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j9dlK.png\" alt=\"Installed JREs\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/wswic.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wswic.png\" alt=\"Execution Environments\" /></a></p>\n"},{"tags":["java","apache-spark","java-17"],"comments":[{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1661495742,"post_id":73465937,"comment_id":129790256,"body_markdown":"Not much of a choice : you need to add the `--add-opens` options cited in the linked post to your program launch command. I find it strange that Spark has not already addressed such problem though.","body":"Not much of a choice : you need to add the <code>--add-opens</code> options cited in the linked post to your program launch command. I find it strange that Spark has not already addressed such problem though."},{"owner":{"account_id":21783603,"reputation":159,"user_id":16084985,"display_name":"Guy Melul"},"score":1,"creation_date":1661771635,"post_id":73465937,"comment_id":129843050,"body_markdown":"IMO it would be better for you to downgrade to JDK 8 or JDK 11 if you can. JDK 17 support was just recently added so this might not be your last issue with that...","body":"IMO it would be better for you to downgrade to JDK 8 or JDK 11 if you can. JDK 17 support was just recently added so this might not be your last issue with that..."},{"owner":{"account_id":7288242,"reputation":557,"user_id":5555637,"display_name":"combinatorist"},"score":0,"creation_date":1673292030,"post_id":73465937,"comment_id":132461849,"body_markdown":"FWIW, it actually broke for me in 3.2.3 and appeared fixed in 3.3.1.","body":"FWIW, it actually broke for me in 3.2.3 and appeared fixed in 3.3.1."},{"owner":{"account_id":5811267,"reputation":998,"user_id":4582240,"display_name":"soMuchToLearnAndShare"},"score":0,"creation_date":1677767407,"post_id":73465937,"comment_id":133405773,"body_markdown":"it happens on 3.2.2 too; i have to use 3.2.2 due to spark-excel dependency","body":"it happens on 3.2.2 too; i have to use 3.2.2 due to spark-excel dependency"}],"answers":[{"comments":[{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":2,"creation_date":1661878071,"post_id":73504175,"comment_id":129874569,"body_markdown":"Thanks for the response, but it&#39;s a pity no one investigates this further Surely those options (copied from an email thread) are overkill. I imagine most of options would work with `--add-exports` instead of `--add-opens` (see [docs](https://docs.oracle.com/en/java/javase/17/migrate/migrating-jdk-8-later-jdk-releases.html)), because surely Spark isn&#39;t using reflection on all those packages. For a simple use case of reading CSV files and saving to JSON locally, just --add-exports java.base/sun.nio.ch=ALL-UNNAMED is working for me.","body":"Thanks for the response, but it&#39;s a pity no one investigates this further Surely those options (copied from an email thread) are overkill. I imagine most of options would work with <code>--add-exports</code> instead of <code>--add-opens</code> (see <a href=\"https://docs.oracle.com/en/java/javase/17/migrate/migrating-jdk-8-later-jdk-releases.html\" rel=\"nofollow noreferrer\">docs</a>), because surely Spark isn&#39;t using reflection on all those packages. For a simple use case of reading CSV files and saving to JSON locally, just --add-exports java.base/sun.nio.ch=ALL-UNNAMED is working for me."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":0,"creation_date":1661878091,"post_id":73504175,"comment_id":129874581,"body_markdown":"Does anyone intend to fix this? Is there a Spark ticket filed?","body":"Does anyone intend to fix this? Is there a Spark ticket filed?"},{"owner":{"account_id":227992,"reputation":17441,"user_id":490018,"accept_rate":67,"display_name":"Sergey Vyacheslavovich Brunov"},"score":0,"creation_date":1661902741,"post_id":73504175,"comment_id":129881184,"body_markdown":"Dear @GarretWilson, I have updated the answer to specify that the command-line options have been taken from the `JavaModuleOptions` class: [spark/JavaModuleOptions.java at v3.3.0 &#183; apache/spark](https://github.com/apache/spark/blob/v3.3.0/launcher/src/main/java/org/apache/spark/launcher/JavaModuleOptions.java).","body":"Dear @GarretWilson, I have updated the answer to specify that the command-line options have been taken from the <code>JavaModuleOptions</code> class: <a href=\"https://github.com/apache/spark/blob/v3.3.0/launcher/src/main/java/org/apache/spark/launcher/JavaModuleOptions.java\" rel=\"nofollow noreferrer\">spark/JavaModuleOptions.java at v3.3.0 &#183; apache/spark</a>."},{"owner":{"account_id":227992,"reputation":17441,"user_id":490018,"accept_rate":67,"display_name":"Sergey Vyacheslavovich Brunov"},"score":0,"creation_date":1661906548,"post_id":73504175,"comment_id":129881697,"body_markdown":"@GarretWilson, I don&#39;t have such information. I did a quick search and found a related ticket: [\\[SPARK-35557\\] Adapt uses of JDK 17 Internal APIs - ASF JIRA](https://issues.apache.org/jira/browse/SPARK-35557). Please, note the [solution comment](https://issues.apache.org/jira/browse/SPARK-35557?focusedCommentId=17441883&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17441883): `--add-opens` is mentioned as the solution. Maybe, it is worth reopening the ticket or opening a new one.","body":"@GarretWilson, I don&#39;t have such information. I did a quick search and found a related ticket: <a href=\"https://issues.apache.org/jira/browse/SPARK-35557\" rel=\"nofollow noreferrer\">&#91;SPARK-35557&#93; Adapt uses of JDK 17 Internal APIs - ASF JIRA</a>. Please, note the <a href=\"https://issues.apache.org/jira/browse/SPARK-35557?focusedCommentId=17441883&amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-17441883\" rel=\"nofollow noreferrer\">solution comment</a>: <code>--add-opens</code> is mentioned as the solution. Maybe, it is worth reopening the ticket or opening a new one."},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":1,"creation_date":1662124140,"post_id":73504175,"comment_id":129939669,"body_markdown":"I&#39;m going to assign the bounty to this answer as you put a lot of work into it and it gives some good references. Still it doesn&#39;t provide a sufficient solution or more in-depth tests for me consider it the accepted answer. Sure, I know I can cram a lot of coarse, brute-force exceptions and figure one of them will cover the Spark limitations. I&#39;m looking for something more finely tuned, and a path forward for getting this fixed in Spark.","body":"I&#39;m going to assign the bounty to this answer as you put a lot of work into it and it gives some good references. Still it doesn&#39;t provide a sufficient solution or more in-depth tests for me consider it the accepted answer. Sure, I know I can cram a lot of coarse, brute-force exceptions and figure one of them will cover the Spark limitations. I&#39;m looking for something more finely tuned, and a path forward for getting this fixed in Spark."},{"owner":{"account_id":2560593,"reputation":1454,"user_id":2221647,"accept_rate":67,"display_name":"dhalfageme"},"score":1,"creation_date":1662968086,"post_id":73504175,"comment_id":130119810,"body_markdown":"Thanks for the response, it worked from intelliJ, who launches the app using `java -jar`. If I am working in a cluster, do you know if I should set this options as driver and executor extra java options? I tried it on the code (on the Spark Application builder) but here it does not seem to be working","body":"Thanks for the response, it worked from intelliJ, who launches the app using <code>java -jar</code>. If I am working in a cluster, do you know if I should set this options as driver and executor extra java options? I tried it on the code (on the Spark Application builder) but here it does not seem to be working"},{"owner":{"account_id":1430181,"reputation":774,"user_id":1352752,"accept_rate":82,"display_name":"thekevshow"},"score":0,"creation_date":1675232551,"post_id":73504175,"comment_id":132881746,"body_markdown":"You are a life saver this is necessary for sparkNLP if you are trying to use it with java and I had to add it to vm arguments with run for eclipse.","body":"You are a life saver this is necessary for sparkNLP if you are trying to use it with java and I had to add it to vm arguments with run for eclipse."}],"tags":[],"owner":{"account_id":227992,"reputation":17441,"user_id":490018,"accept_rate":67,"display_name":"Sergey Vyacheslavovich Brunov"},"comment_count":7,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1661902645,"creation_date":1661532137,"answer_id":73504175,"question_id":73465937,"body_markdown":"# Solution\r\n&gt; A similar question was asked at [Running unit tests with Spark 3.3.0 on Java 17 fails with IllegalAccessError: class StorageUtils cannot access class sun.nio.ch.DirectBuffer](https://stackoverflow.com/q/72724816), but that question (and solution) was only about unit tests. For me Spark is breaking actually running the program.\r\n\r\nPlease, consider adding the appropriate Java Virtual Machine command-line options.  \r\nThe exact way to add them depends on how you run the program: by using a command line, an IDE, etc.\r\n\r\n## Examples\r\nThe command-line options have been taken from the `JavaModuleOptions` class: [spark/JavaModuleOptions.java at v3.3.0 &#183; apache/spark](https://github.com/apache/spark/blob/v3.3.0/launcher/src/main/java/org/apache/spark/launcher/JavaModuleOptions.java).\r\n\r\n### Command line\r\nFor example, to run the program (the `.jar` file) by using the command line:\r\n\r\n```shell\r\njava \\\r\n    --add-opens=java.base/java.lang=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.lang.invoke=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.lang.reflect=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.io=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.net=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.nio=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.util=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.util.concurrent=ALL-UNNAMED \\\r\n    --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED \\\r\n    --add-opens=java.base/sun.nio.ch=ALL-UNNAMED \\\r\n    --add-opens=java.base/sun.nio.cs=ALL-UNNAMED \\\r\n    --add-opens=java.base/sun.security.action=ALL-UNNAMED \\\r\n    --add-opens=java.base/sun.util.calendar=ALL-UNNAMED \\\r\n    --add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED \\\r\n    -jar &lt;JAR_FILE_PATH&gt;\r\n```\r\n\r\n### IDE: IntelliJ IDEA\r\nReferences:\r\n\r\n* [Run/debug configurations | IntelliJ&#160;IDEA](https://www.jetbrains.com/help/idea/2022.2/run-debug-configuration.html): Search for the &#171;Add VM options&#187; string.\r\n* [java - How to set JVM arguments in IntelliJ IDEA? - Stack Overflow](https://stackoverflow.com/questions/50938383/how-to-set-jvm-arguments-in-intellij-idea).\r\n\r\n# References\r\n* [Running unit tests with Spark 3.3.0 on Java 17 fails with IllegalAccessError: class StorageUtils cannot access class sun.nio.ch.DirectBuffer - Stack Overflow](https://stackoverflow.com/questions/72724816/running-unit-tests-with-spark-3-3-0-on-java-17-fails-with-illegalaccesserror-cl).\r\n\r\n    * [The answer](https://stackoverflow.com/a/72724817).\r\n\r\n        * [Re: [Java 17] --add-exports required?-Apache Mail Archives](https://lists.apache.org/thread/814cpb1rpp73zkhtv9t4mkzzrznl82yn).\r\n\r\n* [[SPARK-33772] Build and Run Spark on Java 17 - ASF JIRA](https://issues.apache.org/jira/browse/SPARK-33772).\r\n* [spark/JavaModuleOptions.java at v3.3.0 &#183; apache/spark](https://github.com/apache/spark/blob/v3.3.0/launcher/src/main/java/org/apache/spark/launcher/JavaModuleOptions.java).\r\n","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<h1>Solution</h1>\n<blockquote>\n<p>A similar question was asked at <a href=\"https://stackoverflow.com/q/72724816\">Running unit tests with Spark 3.3.0 on Java 17 fails with IllegalAccessError: class StorageUtils cannot access class sun.nio.ch.DirectBuffer</a>, but that question (and solution) was only about unit tests. For me Spark is breaking actually running the program.</p>\n</blockquote>\n<p>Please, consider adding the appropriate Java Virtual Machine command-line options.<br />\nThe exact way to add them depends on how you run the program: by using a command line, an IDE, etc.</p>\n<h2>Examples</h2>\n<p>The command-line options have been taken from the <code>JavaModuleOptions</code> class: <a href=\"https://github.com/apache/spark/blob/v3.3.0/launcher/src/main/java/org/apache/spark/launcher/JavaModuleOptions.java\" rel=\"noreferrer\">spark/JavaModuleOptions.java at v3.3.0 · apache/spark</a>.</p>\n<h3>Command line</h3>\n<p>For example, to run the program (the <code>.jar</code> file) by using the command line:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java \\\n    --add-opens=java.base/java.lang=ALL-UNNAMED \\\n    --add-opens=java.base/java.lang.invoke=ALL-UNNAMED \\\n    --add-opens=java.base/java.lang.reflect=ALL-UNNAMED \\\n    --add-opens=java.base/java.io=ALL-UNNAMED \\\n    --add-opens=java.base/java.net=ALL-UNNAMED \\\n    --add-opens=java.base/java.nio=ALL-UNNAMED \\\n    --add-opens=java.base/java.util=ALL-UNNAMED \\\n    --add-opens=java.base/java.util.concurrent=ALL-UNNAMED \\\n    --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED \\\n    --add-opens=java.base/sun.nio.ch=ALL-UNNAMED \\\n    --add-opens=java.base/sun.nio.cs=ALL-UNNAMED \\\n    --add-opens=java.base/sun.security.action=ALL-UNNAMED \\\n    --add-opens=java.base/sun.util.calendar=ALL-UNNAMED \\\n    --add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED \\\n    -jar &lt;JAR_FILE_PATH&gt;\n</code></pre>\n<h3>IDE: IntelliJ IDEA</h3>\n<p>References:</p>\n<ul>\n<li><a href=\"https://www.jetbrains.com/help/idea/2022.2/run-debug-configuration.html\" rel=\"noreferrer\">Run/debug configurations | IntelliJ IDEA</a>: Search for the «Add VM options» string.</li>\n<li><a href=\"https://stackoverflow.com/questions/50938383/how-to-set-jvm-arguments-in-intellij-idea\">java - How to set JVM arguments in IntelliJ IDEA? - Stack Overflow</a>.</li>\n</ul>\n<h1>References</h1>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/72724816/running-unit-tests-with-spark-3-3-0-on-java-17-fails-with-illegalaccesserror-cl\">Running unit tests with Spark 3.3.0 on Java 17 fails with IllegalAccessError: class StorageUtils cannot access class sun.nio.ch.DirectBuffer - Stack Overflow</a>.</p>\n<ul>\n<li><p><a href=\"https://stackoverflow.com/a/72724817\">The answer</a>.</p>\n<ul>\n<li><a href=\"https://lists.apache.org/thread/814cpb1rpp73zkhtv9t4mkzzrznl82yn\" rel=\"noreferrer\">Re: [Java 17] --add-exports required?-Apache Mail Archives</a>.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p><a href=\"https://issues.apache.org/jira/browse/SPARK-33772\" rel=\"noreferrer\">[SPARK-33772] Build and Run Spark on Java 17 - ASF JIRA</a>.</p>\n</li>\n<li><p><a href=\"https://github.com/apache/spark/blob/v3.3.0/launcher/src/main/java/org/apache/spark/launcher/JavaModuleOptions.java\" rel=\"noreferrer\">spark/JavaModuleOptions.java at v3.3.0 · apache/spark</a>.</p>\n</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":7288242,"reputation":557,"user_id":5555637,"display_name":"combinatorist"},"score":0,"creation_date":1675375456,"post_id":73875228,"comment_id":132921633,"body_markdown":"I&#39;m really curious about this, because it&#39;s the only answer targeted toward tests, but it didn&#39;t work for me. Would you be willing to link a minimum working example or the rest of your sparkConf/sparkSession.builder command or something?","body":"I&#39;m really curious about this, because it&#39;s the only answer targeted toward tests, but it didn&#39;t work for me. Would you be willing to link a minimum working example or the rest of your sparkConf/sparkSession.builder command or something?"},{"owner":{"account_id":7288242,"reputation":557,"user_id":5555637,"display_name":"combinatorist"},"score":0,"creation_date":1676317617,"post_id":73875228,"comment_id":133109573,"body_markdown":"Wow - after a ton of work, I figured out how to fix this by following your first suggestion to just use java 8. I&#39;ll try to post more tips for other soon. Thanks for that tip!","body":"Wow - after a ton of work, I figured out how to fix this by following your first suggestion to just use java 8. I&#39;ll try to post more tips for other soon. Thanks for that tip!"},{"owner":{"account_id":368,"reputation":44335,"user_id":459,"accept_rate":81,"display_name":"dlamblin"},"score":1,"creation_date":1678150181,"post_id":73875228,"comment_id":133474289,"body_markdown":"@combinatorist yes I think the java options for the tests was specific to our setup at the time. Generally sticking to jdk8 is more of a broad stroke workaround. I&#39;m sorry the specific options didn&#39;t work for your case.","body":"@combinatorist yes I think the java options for the tests was specific to our setup at the time. Generally sticking to jdk8 is more of a broad stroke workaround. I&#39;m sorry the specific options didn&#39;t work for your case."},{"owner":{"account_id":20006759,"reputation":115,"user_id":14664617,"display_name":"David Regan"},"score":1,"creation_date":1698851951,"post_id":73875228,"comment_id":136457787,"body_markdown":"The above suggestion of adding Test / javaOptions ++ ... worked for me in vscode when all other suggestions didn&#39;t. Thank you.","body":"The above suggestion of adding Test / javaOptions ++ ... worked for me in vscode when all other suggestions didn&#39;t. Thank you."},{"owner":{"account_id":27730,"reputation":7166,"user_id":73482,"accept_rate":75,"display_name":"Kevin Won"},"score":1,"creation_date":1700533830,"post_id":73875228,"comment_id":136663762,"body_markdown":"JDK 17, Spark 3.3.2. Out of all the different solutions posited, this is the one that worked for me.","body":"JDK 17, Spark 3.3.2. Out of all the different solutions posited, this is the one that worked for me."}],"tags":[],"owner":{"account_id":368,"reputation":44335,"user_id":459,"accept_rate":81,"display_name":"dlamblin"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1664327687,"creation_date":1664327687,"answer_id":73875228,"question_id":73465937,"body_markdown":"You could use JDK 8. You maybe should really.\r\n\r\nBut if you can&#39;t you might try adding to your `build.sbt` file these java options. For me they were needed for tests so I put them into:\r\n```scala\r\nval projectSettings = Seq(\r\n...\r\n  Test / javaOptions ++= Seq(\r\n    &quot;base/java.lang&quot;, &quot;base/java.lang.invoke&quot;, &quot;base/java.lang.reflect&quot;, &quot;base/java.io&quot;, &quot;base/java.net&quot;, &quot;base/java.nio&quot;,\r\n    &quot;base/java.util&quot;, &quot;base/java.util.concurrent&quot;, &quot;base/java.util.concurrent.atomic&quot;,\r\n    &quot;base/sun.nio.ch&quot;, &quot;base/sun.nio.cs&quot;, &quot;base/sun.security.action&quot;,\r\n    &quot;base/sun.util.calendar&quot;, &quot;security.jgss/sun.security.krb5&quot;,\r\n  ).map(&quot;--add-opens=java.&quot; + _ + &quot;=ALL-UNNAMED&quot;),\r\n...\r\n```","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<p>You could use JDK 8. You maybe should really.</p>\n<p>But if you can't you might try adding to your <code>build.sbt</code> file these java options. For me they were needed for tests so I put them into:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>val projectSettings = Seq(\n...\n  Test / javaOptions ++= Seq(\n    &quot;base/java.lang&quot;, &quot;base/java.lang.invoke&quot;, &quot;base/java.lang.reflect&quot;, &quot;base/java.io&quot;, &quot;base/java.net&quot;, &quot;base/java.nio&quot;,\n    &quot;base/java.util&quot;, &quot;base/java.util.concurrent&quot;, &quot;base/java.util.concurrent.atomic&quot;,\n    &quot;base/sun.nio.ch&quot;, &quot;base/sun.nio.cs&quot;, &quot;base/sun.security.action&quot;,\n    &quot;base/sun.util.calendar&quot;, &quot;security.jgss/sun.security.krb5&quot;,\n  ).map(&quot;--add-opens=java.&quot; + _ + &quot;=ALL-UNNAMED&quot;),\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":254340,"reputation":301,"user_id":533674,"display_name":"Anil Reddaboina"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1674653517,"creation_date":1664346052,"answer_id":73876992,"question_id":73465937,"body_markdown":"\r\nFollowing step helped me to unblock the issue. \r\n\r\nIf you are running the application from **IDE (intelliJ IDEA)** follow the below instructions.\r\n\r\nAdd the JVM option  &quot;--add-exports java.base/sun.nio.ch=ALL-UNNAMED&quot; \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JYD4C.png\r\n\r\nsource: https://arrow.apache.org/docs/java/install.html#java-compatibility","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<p>Following step helped me to unblock the issue.</p>\n<p>If you are running the application from <strong>IDE (intelliJ IDEA)</strong> follow the below instructions.</p>\n<p>Add the JVM option  &quot;--add-exports java.base/sun.nio.ch=ALL-UNNAMED&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/JYD4C.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/JYD4C.png\" alt=\"enter image description here\" /></a></p>\n<p>source: <a href=\"https://arrow.apache.org/docs/java/install.html#java-compatibility\" rel=\"noreferrer\">https://arrow.apache.org/docs/java/install.html#java-compatibility</a></p>\n"},{"comments":[{"owner":{"account_id":2471685,"reputation":521,"user_id":2153380,"accept_rate":67,"display_name":"CᴴᴀZ"},"score":1,"creation_date":1669194288,"post_id":74196528,"comment_id":131586742,"body_markdown":"`vmArgs` param should go in `launch.json` as per the [docs](https://code.visualstudio.com/docs/java/java-debugging#_launch)","body":"<code>vmArgs</code> param should go in <code>launch.json</code> as per the <a href=\"https://code.visualstudio.com/docs/java/java-debugging#_launch\" rel=\"nofollow noreferrer\">docs</a>"}],"tags":[],"owner":{"account_id":2498586,"reputation":119,"user_id":7025673,"display_name":"balu mahendran"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1669567389,"creation_date":1666711652,"answer_id":74196528,"question_id":73465937,"body_markdown":"Add this as explicit dependency in Pom.xml file. Don&#39;t change version other than 3.0.16\r\n\t\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;janino&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.0.16&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand then add the command line arguments. If you use VS code, add\r\n\r\n    &quot;vmArgs&quot;: &quot;--add-exports java.base/sun.nio.ch=ALL-UNNAMED&quot;\r\n\r\nin configurations section in `launch.json` file under `.vscode` folder in  your project.","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<p>Add this as explicit dependency in Pom.xml file. Don't change version other than 3.0.16</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.codehaus.janino&lt;/groupId&gt;\n    &lt;artifactId&gt;janino&lt;/artifactId&gt;\n    &lt;version&gt;3.0.16&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and then add the command line arguments. If you use VS code, add</p>\n<pre><code>&quot;vmArgs&quot;: &quot;--add-exports java.base/sun.nio.ch=ALL-UNNAMED&quot;\n</code></pre>\n<p>in configurations section in <code>launch.json</code> file under <code>.vscode</code> folder in  your project.</p>\n"},{"comments":[{"owner":{"account_id":2273748,"reputation":46611,"user_id":2000548,"accept_rate":92,"display_name":"Hongbo Miao"},"score":1,"creation_date":1679349917,"post_id":75568669,"comment_id":133703254,"body_markdown":"Just add more info. In my case, for PySpark, I never had this issue no matter which Spark version. For Scala projects, I am on Spark 3.3.2, unfortunately, this does not help, and I still need `--add-exports java.base/sun.nio.ch=ALL-UNNAMED`.","body":"Just add more info. In my case, for PySpark, I never had this issue no matter which Spark version. For Scala projects, I am on Spark 3.3.2, unfortunately, this does not help, and I still need <code>--add-exports java.base&#47;sun.nio.ch=ALL-UNNAMED</code>."}],"tags":[],"owner":{"account_id":7112834,"reputation":481,"user_id":5440132,"display_name":"Lynne"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677361738,"creation_date":1677361738,"answer_id":75568669,"question_id":73465937,"body_markdown":"simply upgrade to spark 3.3.2 solved my problem\r\n\r\nI use Java 17 and pyspark in the command line.","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<p>simply upgrade to spark 3.3.2 solved my problem</p>\n<p>I use Java 17 and pyspark in the command line.</p>\n"},{"tags":[],"owner":{"account_id":2273748,"reputation":46611,"user_id":2000548,"accept_rate":92,"display_name":"Hongbo Miao"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1691695335,"creation_date":1679348878,"answer_id":75795628,"question_id":73465937,"body_markdown":"These three methods work for me on a project using\r\n\r\n- Spark 3.3.2\r\n- Scala 2.13.10\r\n- Java 17.0.6 (my project is small, it even works on Java 19.0.1. However, if your project is big, it is better to wait Spark officially supports it)\r\n\r\n## Method 1\r\n\r\n```shell\r\nexport JAVA_OPTS=&#39;--add-exports java.base/sun.nio.ch=ALL-UNNAMED&#39;\r\nsbt run\r\n```\r\n\r\n## Method 2\r\n\r\nCreate a **.jvmopts** file in your project folder, with content:\r\n\r\n```\r\n--add-exports java.base/sun.nio.ch=ALL-UNNAMED\r\n```\r\n\r\nThen you can run\r\n\r\n```shell\r\nsbt run\r\n```\r\n\r\n## Method 3\r\n\r\nIf you are using IntelliJ IDEA, this is based on @Anil Reddaboina&#39;s answer, and thanks!\r\n\r\nThis adds more info as I don&#39;t have that &quot;VM Options&quot; field by default.\r\n\r\nFollow this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThen you should be able to add `--add-exports java.base/sun.nio.ch=ALL-UNNAMED` to &quot;VM Options&quot; field.\r\n\r\nor add fully necessary VM Options arguments:\r\n\r\n    --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/sun.security.action=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1DYAA.png\r\n  [2]: https://i.stack.imgur.com/WIQ5W.png","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<p>These three methods work for me on a project using</p>\n<ul>\n<li>Spark 3.3.2</li>\n<li>Scala 2.13.10</li>\n<li>Java 17.0.6 (my project is small, it even works on Java 19.0.1. However, if your project is big, it is better to wait Spark officially supports it)</li>\n</ul>\n<h2>Method 1</h2>\n<pre class=\"lang-bash prettyprint-override\"><code>export JAVA_OPTS='--add-exports java.base/sun.nio.ch=ALL-UNNAMED'\nsbt run\n</code></pre>\n<h2>Method 2</h2>\n<p>Create a <strong>.jvmopts</strong> file in your project folder, with content:</p>\n<pre><code>--add-exports java.base/sun.nio.ch=ALL-UNNAMED\n</code></pre>\n<p>Then you can run</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sbt run\n</code></pre>\n<h2>Method 3</h2>\n<p>If you are using IntelliJ IDEA, this is based on @Anil Reddaboina's answer, and thanks!</p>\n<p>This adds more info as I don't have that &quot;VM Options&quot; field by default.</p>\n<p>Follow this:</p>\n<p><a href=\"https://i.stack.imgur.com/1DYAA.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1DYAA.png\" alt=\"enter image description here\" /></a></p>\n<p>Then you should be able to add <code>--add-exports java.base/sun.nio.ch=ALL-UNNAMED</code> to &quot;VM Options&quot; field.</p>\n<p>or add fully necessary VM Options arguments:</p>\n<pre><code>--add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.lang.invoke=ALL-UNNAMED --add-opens=java.base/java.lang.reflect=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.nio=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED --add-opens=java.base/sun.nio.ch=ALL-UNNAMED --add-opens=java.base/sun.nio.cs=ALL-UNNAMED --add-opens=java.base/sun.security.action=ALL-UNNAMED --add-opens=java.base/sun.util.calendar=ALL-UNNAMED --add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/WIQ5W.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/WIQ5W.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":469790,"reputation":1689,"user_id":876595,"display_name":"chehsunliu"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690823122,"creation_date":1690823122,"answer_id":76805763,"question_id":73465937,"body_markdown":"For those using Gradle to run unit tests for Spark, apply this in `build.gradle.kts`:\r\n\r\n```lang-kotlin\r\ntasks.test {\r\n    useJUnitPlatform()\r\n \r\n    val sparkJava17CompatibleJvmArgs = listOf(\r\n        &quot;--add-opens=java.base/java.lang=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/java.lang.invoke=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/java.lang.reflect=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/java.io=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/java.net=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/java.nio=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/java.util=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/java.util.concurrent=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/sun.nio.ch=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/sun.nio.cs=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/sun.security.action=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.base/sun.util.calendar=ALL-UNNAMED&quot;,\r\n        &quot;--add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED&quot;,\r\n    )\r\n    jvmArgs = sparkJava17CompatibleJvmArgs\r\n}\r\n```","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<p>For those using Gradle to run unit tests for Spark, apply this in <code>build.gradle.kts</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>tasks.test {\n    useJUnitPlatform()\n \n    val sparkJava17CompatibleJvmArgs = listOf(\n        &quot;--add-opens=java.base/java.lang=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/java.lang.invoke=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/java.lang.reflect=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/java.io=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/java.net=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/java.nio=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/java.util=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/java.util.concurrent=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/sun.nio.ch=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/sun.nio.cs=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/sun.security.action=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.base/sun.util.calendar=ALL-UNNAMED&quot;,\n        &quot;--add-opens=java.security.jgss/sun.security.krb5=ALL-UNNAMED&quot;,\n    )\n    jvmArgs = sparkJava17CompatibleJvmArgs\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29818848,"reputation":21,"user_id":22852615,"display_name":"Kaustubha M"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699017901,"creation_date":1699017857,"answer_id":77416995,"question_id":73465937,"body_markdown":"I have tried this using JDK 21 and Spark 3.5.0\r\n\r\n      &lt;properties&gt;\r\n            &lt;spark.version&gt;3.5.0&lt;/spark.version&gt;\r\n            &lt;scala.binary.version&gt;2.12&lt;/scala.binary.version&gt;\r\n            &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\r\n      &lt;/properties&gt;\r\n\r\nAdd below line as VM Option in IntelliJ Idea\r\n\r\n**--add-opens=java.base/sun.nio.ch=ALL-UNNAMED**\r\n\r\nAnd It Works!","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<p>I have tried this using JDK 21 and Spark 3.5.0</p>\n<pre><code>  &lt;properties&gt;\n        &lt;spark.version&gt;3.5.0&lt;/spark.version&gt;\n        &lt;scala.binary.version&gt;2.12&lt;/scala.binary.version&gt;\n        &lt;maven.compiler.source&gt;21&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;21&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n</code></pre>\n<p>Add below line as VM Option in IntelliJ Idea</p>\n<p><strong>--add-opens=java.base/sun.nio.ch=ALL-UNNAMED</strong></p>\n<p>And It Works!</p>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31746,"favorite_count":0,"down_vote_count":0,"up_vote_count":45,"answer_count":8,"score":45,"last_activity_date":1699017901,"creation_date":1661297423,"question_id":73465937,"body_markdown":"A similar question was asked at https://stackoverflow.com/q/72724816, but that question (and solution) was only about unit tests. For me Spark is breaking actually running the program.\r\n\r\nAccording to the [Spark overview][1], Spark works with Java 17. I&#39;m using Temurin-17.0.4+8 (build 17.0.4+8) on Windows 10, including Spark 3.3.0 in Maven like this:\r\n\r\n```xml\r\n&lt;scala.version&gt;2.13&lt;/scala.version&gt;\r\n&lt;spark.version&gt;3.3.0&lt;/spark.version&gt;\r\n...\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spark-core_${scala.version}&lt;/artifactId&gt;\r\n  &lt;version&gt;${spark.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spark-sql_${scala.version}&lt;/artifactId&gt;\r\n  &lt;version&gt;${spark.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nI try to run a simple program:\r\n\r\n```java\r\nfinal SparkSession spark = SparkSession.builder().appName(&quot;Foo Bar&quot;).master(&quot;local&quot;).getOrCreate();\r\nfinal Dataset&lt;Row&gt; df = spark.read().format(&quot;csv&quot;).option(&quot;header&quot;, &quot;false&quot;).load(&quot;/path/to/file.csv&quot;);\r\ndf.show(5);\r\n```\r\n\r\nThat breaks all over the place:\r\n\r\n```\r\nCaused by: java.lang.IllegalAccessError: class org.apache.spark.storage.StorageUtils$ (in unnamed module @0x59d016c9) cannot access class sun.nio.ch.DirectBuffer (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x59d016c9\r\n\tat org.apache.spark.storage.StorageUtils$.&lt;clinit&gt;(StorageUtils.scala:213)\r\n\tat org.apache.spark.storage.BlockManagerMasterEndpoint.&lt;init&gt;(BlockManagerMasterEndpoint.scala:114)\r\n\tat org.apache.spark.SparkEnv$.$anonfun$create$9(SparkEnv.scala:353)\r\n\tat org.apache.spark.SparkEnv$.registerOrLookupEndpoint$1(SparkEnv.scala:290)\r\n\tat org.apache.spark.SparkEnv$.create(SparkEnv.scala:339)\r\n\tat org.apache.spark.SparkEnv$.createDriverEnv(SparkEnv.scala:194)\r\n\tat org.apache.spark.SparkContext.createSparkEnv(SparkContext.scala:279)\r\n\tat org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:464)\r\n\tat org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2704)\r\n\tat org.apache.spark.sql.SparkSession$Builder.$anonfun$getOrCreate$2(SparkSession.scala:953)\r\n\tat scala.Option.getOrElse(Option.scala:201)\r\n\tat org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:947)\r\n```\r\n\r\nSpark is obviously doing things one is not supposed to do in Java 17.\r\n\r\nDisappointing. How do I get around this?\r\n\r\n  [1]: https://spark.apache.org/docs/latest/","title":"Apache Spark 3.3.0 breaks on Java 17 with &quot;cannot access class sun.nio.ch.DirectBuffer&quot;","body":"<p>A similar question was asked at <a href=\"https://stackoverflow.com/q/72724816\">Running unit tests with Spark 3.3.0 on Java 17 fails with IllegalAccessError: class StorageUtils cannot access class sun.nio.ch.DirectBuffer</a>, but that question (and solution) was only about unit tests. For me Spark is breaking actually running the program.</p>\n<p>According to the <a href=\"https://spark.apache.org/docs/latest/\" rel=\"noreferrer\">Spark overview</a>, Spark works with Java 17. I'm using Temurin-17.0.4+8 (build 17.0.4+8) on Windows 10, including Spark 3.3.0 in Maven like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;scala.version&gt;2.13&lt;/scala.version&gt;\n&lt;spark.version&gt;3.3.0&lt;/spark.version&gt;\n...\n&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n  &lt;artifactId&gt;spark-core_${scala.version}&lt;/artifactId&gt;\n  &lt;version&gt;${spark.version}&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n  &lt;artifactId&gt;spark-sql_${scala.version}&lt;/artifactId&gt;\n  &lt;version&gt;${spark.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I try to run a simple program:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final SparkSession spark = SparkSession.builder().appName(&quot;Foo Bar&quot;).master(&quot;local&quot;).getOrCreate();\nfinal Dataset&lt;Row&gt; df = spark.read().format(&quot;csv&quot;).option(&quot;header&quot;, &quot;false&quot;).load(&quot;/path/to/file.csv&quot;);\ndf.show(5);\n</code></pre>\n<p>That breaks all over the place:</p>\n<pre><code>Caused by: java.lang.IllegalAccessError: class org.apache.spark.storage.StorageUtils$ (in unnamed module @0x59d016c9) cannot access class sun.nio.ch.DirectBuffer (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x59d016c9\n    at org.apache.spark.storage.StorageUtils$.&lt;clinit&gt;(StorageUtils.scala:213)\n    at org.apache.spark.storage.BlockManagerMasterEndpoint.&lt;init&gt;(BlockManagerMasterEndpoint.scala:114)\n    at org.apache.spark.SparkEnv$.$anonfun$create$9(SparkEnv.scala:353)\n    at org.apache.spark.SparkEnv$.registerOrLookupEndpoint$1(SparkEnv.scala:290)\n    at org.apache.spark.SparkEnv$.create(SparkEnv.scala:339)\n    at org.apache.spark.SparkEnv$.createDriverEnv(SparkEnv.scala:194)\n    at org.apache.spark.SparkContext.createSparkEnv(SparkContext.scala:279)\n    at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:464)\n    at org.apache.spark.SparkContext$.getOrCreate(SparkContext.scala:2704)\n    at org.apache.spark.sql.SparkSession$Builder.$anonfun$getOrCreate$2(SparkSession.scala:953)\n    at scala.Option.getOrElse(Option.scala:201)\n    at org.apache.spark.sql.SparkSession$Builder.getOrCreate(SparkSession.scala:947)\n</code></pre>\n<p>Spark is obviously doing things one is not supposed to do in Java 17.</p>\n<p>Disappointing. How do I get around this?</p>\n"},{"tags":["java","deployment","optaplanner","timefold"],"answers":[{"comments":[{"owner":{"account_id":11139285,"reputation":301,"user_id":8176509,"display_name":"Jonas Erbe"},"score":0,"creation_date":1699116535,"post_id":77416825,"comment_id":136492092,"body_markdown":"For severless e.G. Azure Functions the idea is to trigger solving via http and getting the Answers via MessageQueue(MessageBus) to be processed by a different statefull service, that handles the results and updates the frontend. The idea is to just lift the CPU heavy solving into a function to be scalable. The major downside I see for that approach is to handle user actions like aborting the planning or doing things like pinning because serverless functions are not designed to get input after the initial trigger. However in case of Azure Functions it would be possible but not ideal.","body":"For severless e.G. Azure Functions the idea is to trigger solving via http and getting the Answers via MessageQueue(MessageBus) to be processed by a different statefull service, that handles the results and updates the frontend. The idea is to just lift the CPU heavy solving into a function to be scalable. The major downside I see for that approach is to handle user actions like aborting the planning or doing things like pinning because serverless functions are not designed to get input after the initial trigger. However in case of Azure Functions it would be possible but not ideal."},{"owner":{"account_id":11139285,"reputation":301,"user_id":8176509,"display_name":"Jonas Erbe"},"score":0,"creation_date":1699116772,"post_id":77416825,"comment_id":136492111,"body_markdown":"What advantages does using quarkus have over plain java in case of timefold? Are there some performance gains using quarkus? Because I think timefold is recommending using quarkus. So I guess there are some advantages in by using it.","body":"What advantages does using quarkus have over plain java in case of timefold? Are there some performance gains using quarkus? Because I think timefold is recommending using quarkus. So I guess there are some advantages in by using it."},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1699443242,"post_id":77416825,"comment_id":136531282,"body_markdown":"Quarkus is slightly faster, because it replaces reflection at build time with domain specific code. Timefold works great with plain java, with Quarkus and with Spring. Pick what fits your style best.","body":"Quarkus is slightly faster, because it replaces reflection at build time with domain specific code. Timefold works great with plain java, with Quarkus and with Spring. Pick what fits your style best."},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1699443350,"post_id":77416825,"comment_id":136531302,"body_markdown":"For serverless use cases, Quarkus with `-Pnative` (native compilation) has a huge advantage, because of the much lower startup time. The school timetabling quickstart README has info on how to compile natively.","body":"For serverless use cases, Quarkus with <code>-Pnative</code> (native compilation) has a huge advantage, because of the much lower startup time. The school timetabling quickstart README has info on how to compile natively."},{"owner":{"account_id":11139285,"reputation":301,"user_id":8176509,"display_name":"Jonas Erbe"},"score":0,"creation_date":1699460914,"post_id":77416825,"comment_id":136535227,"body_markdown":"I tried all 4 approaches today on my local machine with our planning model. Quarkus JVM, Quarkus native, plain Java JVM and plain Java native. My outcome is that plain java has lower startup times than using Quarkus. The whole timefold model init process is much faster in Quarkus, but starting the application (unitl the main method is entered) is much slower and outweights the performace gain in model parsing. Maybe its because i can&#39;t use Mandrel on my Mac or I have overlooked some other things in my local setup.","body":"I tried all 4 approaches today on my local machine with our planning model. Quarkus JVM, Quarkus native, plain Java JVM and plain Java native. My outcome is that plain java has lower startup times than using Quarkus. The whole timefold model init process is much faster in Quarkus, but starting the application (unitl the main method is entered) is much slower and outweights the performace gain in model parsing. Maybe its because i can&#39;t use Mandrel on my Mac or I have overlooked some other things in my local setup."},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":1,"creation_date":1699524233,"post_id":77416825,"comment_id":136543895,"body_markdown":"That doesn&#39;t align with my experience. Interesting. Thank you for sharing. In my experience, Quarkus starts up in like 20 milliseconds and plain Java in 1000 milliseconds. Which run commands did you use and which java version? How long was each run until the main method exactly? Mandrel and Graal Community I wouldn&#39;t expect to make a big difference.","body":"That doesn&#39;t align with my experience. Interesting. Thank you for sharing. In my experience, Quarkus starts up in like 20 milliseconds and plain Java in 1000 milliseconds. Which run commands did you use and which java version? How long was each run until the main method exactly? Mandrel and Graal Community I wouldn&#39;t expect to make a big difference."},{"owner":{"account_id":11139285,"reputation":301,"user_id":8176509,"display_name":"Jonas Erbe"},"score":1,"creation_date":1699542054,"post_id":77416825,"comment_id":136547490,"body_markdown":"I think I did a mistake for testing the jvm versions, because I had some other java processes running, so I think the application starts were not real coldstarts. My new results are as follows: \nTime Until Main Method: Quarkus JVM: 129ms, Quarkus Native: 650ms, Plain JVM 222ms, Plain Native: 64 ms\nTime until all init stuff is done and solving starts: Quarkus JVM: 3690ms, Quarkus Native: 693ms, Plain JVM: 602ms, Plain Native: 406ms\n- java version 17.0.9\n- compiled by `mvn package -Dnative` pom from timefold quickstarts\n- Executed with `./target/timefold-quarkus-1.0-SNAPSHOT-runner`","body":"I think I did a mistake for testing the jvm versions, because I had some other java processes running, so I think the application starts were not real coldstarts. My new results are as follows:  Time Until Main Method: Quarkus JVM: 129ms, Quarkus Native: 650ms, Plain JVM 222ms, Plain Native: 64 ms Time until all init stuff is done and solving starts: Quarkus JVM: 3690ms, Quarkus Native: 693ms, Plain JVM: 602ms, Plain Native: 406ms - java version 17.0.9 - compiled by <code>mvn package -Dnative</code> pom from timefold quickstarts - Executed with <code>.&#47;target&#47;timefold-quarkus-1.0-SNAPSHOT-runner</code>"},{"owner":{"account_id":11139285,"reputation":301,"user_id":8176509,"display_name":"Jonas Erbe"},"score":0,"creation_date":1699542124,"post_id":77416825,"comment_id":136547520,"body_markdown":"Maybe it has something to do with the hardware platform? I am using ARM Apple Silicon M2","body":"Maybe it has something to do with the hardware platform? I am using ARM Apple Silicon M2"},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1699545612,"post_id":77416825,"comment_id":136548277,"body_markdown":"It could be. But I hadn&#39;t heard that before (nor have I have seen this trend in numbers). I would try to run them on a production-like environment (= your cloud) before making conclusions.","body":"It could be. But I hadn&#39;t heard that before (nor have I have seen this trend in numbers). I would try to run them on a production-like environment (= your cloud) before making conclusions."},{"owner":{"account_id":11139285,"reputation":301,"user_id":8176509,"display_name":"Jonas Erbe"},"score":1,"creation_date":1699872621,"post_id":77416825,"comment_id":136581135,"body_markdown":"I can confirm your values. I have created a linux vm in the cloud an compiled and executed the applications there. Now I get 24 ms for whole application startup and timefold init with Quarkus native.","body":"I can confirm your values. I have created a linux vm in the cloud an compiled and executed the applications there. Now I get 24 ms for whole application startup and timefold init with Quarkus native."},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1700038548,"post_id":77416825,"comment_id":136604630,"body_markdown":"Thank yo for confirming, Jonas :)","body":"Thank yo for confirming, Jonas :)"}],"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"comment_count":11,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699017845,"creation_date":1699016145,"answer_id":77416825,"question_id":77415364,"body_markdown":"Serverless functions typically don&#39;t work well because running a solver takes minutes. Think HTTP session timeout: the problem submission REST request needs to be separate from the solution retrieval REST request. Or you need to use a webhook.\r\n\r\nOne pod per dataset works well, but involves a lot of orchestration to setup correctly in a scalable way.\r\n\r\nWe&#39;re working on Timefold Platform that handles all the requirements you would need or desire to run on Kubernetes.","title":"What is the recommended deployment for scaling timefold?","body":"<p>Serverless functions typically don't work well because running a solver takes minutes. Think HTTP session timeout: the problem submission REST request needs to be separate from the solution retrieval REST request. Or you need to use a webhook.</p>\n<p>One pod per dataset works well, but involves a lot of orchestration to setup correctly in a scalable way.</p>\n<p>We're working on Timefold Platform that handles all the requirements you would need or desire to run on Kubernetes.</p>\n"}],"owner":{"account_id":11139285,"reputation":301,"user_id":8176509,"display_name":"Jonas Erbe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1699017845,"creation_date":1699002158,"question_id":77415364,"body_markdown":"I am currently working on a timefold deployment and I wonder what is the recommended deployment strategy for scaling a timefold application. I can&#39;t find anything in the docs about it. The docs only mention some integrations https://timefold.ai/docs/timefold-solver/latest/integration/integration.\r\n\r\nI also found some hints on azure functions https://stackoverflow.com/questions/72651788/advice-on-scaling-optaplanner-using-azure-functions/72660411#72660411\r\n\r\nWhich technology do you recommended Spring Boot 3.0 or Quarkus? \r\nDo you recommended running timefold serverless as aws lambda or azure function? What are the advantages of using Quarkus over plain Java then using serverless technology?\r\nFor OptaPlanner I found some experiments with Kubernetes https://github.com/kiegroup/optaplanner-quickstarts/tree/development/technology/kubernetes. What about deploying timefold in kubernetes? \r\n\r\nDo you recommend jvm oder native deployment?\r\n\r\nMaybe the developers could do some recommendations to this questions.\r\n","title":"What is the recommended deployment for scaling timefold?","body":"<p>I am currently working on a timefold deployment and I wonder what is the recommended deployment strategy for scaling a timefold application. I can't find anything in the docs about it. The docs only mention some integrations <a href=\"https://timefold.ai/docs/timefold-solver/latest/integration/integration\" rel=\"nofollow noreferrer\">https://timefold.ai/docs/timefold-solver/latest/integration/integration</a>.</p>\n<p>I also found some hints on azure functions <a href=\"https://stackoverflow.com/questions/72651788/advice-on-scaling-optaplanner-using-azure-functions/72660411#72660411\">Advice on Scaling OptaPlanner using Azure Functions</a></p>\n<p>Which technology do you recommended Spring Boot 3.0 or Quarkus?\nDo you recommended running timefold serverless as aws lambda or azure function? What are the advantages of using Quarkus over plain Java then using serverless technology?\nFor OptaPlanner I found some experiments with Kubernetes <a href=\"https://github.com/kiegroup/optaplanner-quickstarts/tree/development/technology/kubernetes\" rel=\"nofollow noreferrer\">https://github.com/kiegroup/optaplanner-quickstarts/tree/development/technology/kubernetes</a>. What about deploying timefold in kubernetes?</p>\n<p>Do you recommend jvm oder native deployment?</p>\n<p>Maybe the developers could do some recommendations to this questions.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":1348049,"reputation":5104,"user_id":1288408,"display_name":"Modus Tollens"},"score":0,"creation_date":1588363348,"post_id":61549874,"comment_id":108876110,"body_markdown":"The image is missing. Can you describe what you tried in order to create the package?","body":"The image is missing. Can you describe what you tried in order to create the package?"},{"owner":{"account_id":16443745,"reputation":11,"user_id":13450408,"display_name":"TotallyNotThomas"},"score":0,"creation_date":1588363422,"post_id":61549874,"comment_id":108876136,"body_markdown":"Im editing the post sorry","body":"Im editing the post sorry"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1588363998,"post_id":61549874,"comment_id":108876349,"body_markdown":"This seems a bit unusual for a Gradle project; it usually follows the Maven convention and places your source code into a src/ location which can be then picked up by IntelliJ.  Can you paste your build.gradle?","body":"This seems a bit unusual for a Gradle project; it usually follows the Maven convention and places your source code into a src/ location which can be then picked up by IntelliJ.  Can you paste your build.gradle?"},{"owner":{"account_id":16443745,"reputation":11,"user_id":13450408,"display_name":"TotallyNotThomas"},"score":0,"creation_date":1588364084,"post_id":61549874,"comment_id":108876385,"body_markdown":"Sure! I&#39;ll make sure to","body":"Sure! I&#39;ll make sure to"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1588364276,"post_id":61549874,"comment_id":108876462,"body_markdown":"To be clear: **paste the entire Gradle file into the question**.  The image is fine since it&#39;s highlighting an issue with the IDE which has to be visual, but the Gradle file actually has to be pasted here in the question.  Your Google account could disappear earlier than Stack Overflow (or whomever uses this question later on).","body":"To be clear: <b>paste the entire Gradle file into the question</b>.  The image is fine since it&#39;s highlighting an issue with the IDE which has to be visual, but the Gradle file actually has to be pasted here in the question.  Your Google account could disappear earlier than Stack Overflow (or whomever uses this question later on)."},{"owner":{"account_id":16443745,"reputation":11,"user_id":13450408,"display_name":"TotallyNotThomas"},"score":0,"creation_date":1588364385,"post_id":61549874,"comment_id":108876506,"body_markdown":"Ok, I understand. Im just not very used to this website","body":"Ok, I understand. Im just not very used to this website"},{"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1588364533,"post_id":61549874,"comment_id":108876566,"body_markdown":"Please share `build.gradle` file not `gradlew` file. What happens when you click Import Changes? Does the import complete without errors? Does the project build from the command line `gradlew build` command?","body":"Please share <code>build.gradle</code> file not <code>gradlew</code> file. What happens when you click Import Changes? Does the import complete without errors? Does the project build from the command line <code>gradlew build</code> command?"},{"owner":{"account_id":16443745,"reputation":11,"user_id":13450408,"display_name":"TotallyNotThomas"},"score":0,"creation_date":1588365377,"post_id":61549874,"comment_id":108876913,"body_markdown":"Ive just added the FULL gradel project as a ZIP file","body":"Ive just added the FULL gradel project as a ZIP file"},{"owner":{"account_id":1348049,"reputation":5104,"user_id":1288408,"display_name":"Modus Tollens"},"score":0,"creation_date":1588365438,"post_id":61549874,"comment_id":108876935,"body_markdown":"Why did you post SOLVED in the title? That shouldn&#39;t be done. If the problem is solved, please post an answer in the answer area below.","body":"Why did you post SOLVED in the title? That shouldn&#39;t be done. If the problem is solved, please post an answer in the answer area below."},{"owner":{"account_id":1348049,"reputation":5104,"user_id":1288408,"display_name":"Modus Tollens"},"score":0,"creation_date":1588365549,"post_id":61549874,"comment_id":108876987,"body_markdown":"Then post an answer or delete this question, please.","body":"Then post an answer or delete this question, please."},{"owner":{"account_id":16443745,"reputation":11,"user_id":13450408,"display_name":"TotallyNotThomas"},"score":0,"creation_date":1588365912,"post_id":61549874,"comment_id":108877122,"body_markdown":"Its all fixed, it was just a visual bug in IntelliJ. I reinstalled then I was able to make a package, even when I reimported my settings.","body":"Its all fixed, it was just a visual bug in IntelliJ. I reinstalled then I was able to make a package, even when I reimported my settings."}],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588366317,"creation_date":1588366317,"answer_id":61550631,"question_id":61549874,"body_markdown":"You need to wait until Gradle project import is finished in the Build tool window | Sync tab and all the dependencies are downloaded, then IntelliJ IDEA will configure the source roots automatically and they will be marked in blue in the project view:\r\n\r\n[![build sync][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vdCAy.png","title":"Can&#39;t create package in IntelliJ IDEA 2019","body":"<p>You need to wait until Gradle project import is finished in the Build tool window | Sync tab and all the dependencies are downloaded, then IntelliJ IDEA will configure the source roots automatically and they will be marked in blue in the project view:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vdCAy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vdCAy.png\" alt=\"build sync\"></a></p>\n"},{"tags":[],"owner":{"account_id":7576919,"reputation":351,"user_id":5748982,"display_name":"Fritz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699017822,"creation_date":1698766896,"answer_id":77397305,"question_id":61549874,"body_markdown":"If you select the new -&gt; package, once you type in your name for the new package, you have to press the ENTER key.  Not sure why IntelliJ doesn&#39;t have a save button there instead, or at least have a text that says: &quot;Enter to save.&quot;","title":"Can&#39;t create package in IntelliJ IDEA 2019","body":"<p>If you select the new -&gt; package, once you type in your name for the new package, you have to press the ENTER key.  Not sure why IntelliJ doesn't have a save button there instead, or at least have a text that says: &quot;Enter to save.&quot;</p>\n"}],"owner":{"account_id":16443745,"reputation":11,"user_id":13450408,"display_name":"TotallyNotThomas"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":392,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699017822,"creation_date":1588363226,"question_id":61549874,"body_markdown":"I was having an issue, I needed to make a package called &quot;util&quot;.\r\nNo big deal, but for some reason I can&#39;t create a package, it&#39;s Gradle just in case that means anything.\r\n\r\nIt&#39;s a fresh install too so that&#39;s weird, the package would be called ```com.TotallyNotThomas.thomas_astetic_mod.util```\r\n\r\nGradle file: https://drive.google.com/open?id=1SDUC18ZS-WSjpH7pj6tQFUbR-\r\nJ8uwIAU\r\n\r\nFull Gradle Project ZIP: https://drive.google.com/open?id=1KENRqJzBag5vuLsRMCBqMnaqPz_Yn9Cz\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vwklr.png","title":"Can&#39;t create package in IntelliJ IDEA 2019","body":"<p>I was having an issue, I needed to make a package called \"util\".\nNo big deal, but for some reason I can't create a package, it's Gradle just in case that means anything.</p>\n\n<p>It's a fresh install too so that's weird, the package would be called <code>com.TotallyNotThomas.thomas_astetic_mod.util</code></p>\n\n<p>Gradle file: <a href=\"https://drive.google.com/open?id=1SDUC18ZS-WSjpH7pj6tQFUbR-\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1SDUC18ZS-WSjpH7pj6tQFUbR-</a>\nJ8uwIAU</p>\n\n<p>Full Gradle Project ZIP: <a href=\"https://drive.google.com/open?id=1KENRqJzBag5vuLsRMCBqMnaqPz_Yn9Cz\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=1KENRqJzBag5vuLsRMCBqMnaqPz_Yn9Cz</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/vwklr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vwklr.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","spring","kotlin","spring-cloud-feign","feign"],"answers":[{"tags":[],"owner":{"account_id":11116924,"reputation":76,"user_id":8160988,"display_name":"Fossan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699017111,"creation_date":1699017111,"answer_id":77416928,"question_id":77241125,"body_markdown":"Looking at `FeignAutoConfiguration`, it can make use of `ApacheHttp5Client` if it&#39;s detected on the classpath. The issue is that `feign-httpclient` provides a class named `ApacheHttpClient`, so auto configuration cannot really detect it.\r\n\r\nTo resolve the issue, you can provide a `feign-hc5` dependency that introduces `ApacheHttp5Client` which will be automatically picked up by Feign auto configuration:\r\n```maven\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\r\n    &lt;artifactId&gt;feign-hc5&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Cannot change Feign Default client. PATCH mapping does not work","body":"<p>Looking at <code>FeignAutoConfiguration</code>, it can make use of <code>ApacheHttp5Client</code> if it's detected on the classpath. The issue is that <code>feign-httpclient</code> provides a class named <code>ApacheHttpClient</code>, so auto configuration cannot really detect it.</p>\n<p>To resolve the issue, you can provide a <code>feign-hc5</code> dependency that introduces <code>ApacheHttp5Client</code> which will be automatically picked up by Feign auto configuration:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\n    &lt;artifactId&gt;feign-hc5&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":14402680,"reputation":312,"user_id":10403784,"display_name":"Vadim Yemelyanov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699017111,"creation_date":1696548903,"question_id":77241125,"body_markdown":"Config file\r\n\r\n```\r\n@Configuration\r\npublic class MyApiConfig {\r\n    @Bean\r\n    Logger.Level feignLoggerLevel() {\r\n        return Logger.Level.FULL;\r\n    }\r\n\r\n    @Bean\r\n    public OkHttpClient client() {\r\n        return new OkHttpClient();\r\n    }\r\n}\r\n```\r\n\r\nClient class\r\n\r\n```\r\n@FeignClient(\r\n    name = &quot;wallesterApi&quot;,\r\n    url = &quot;https://api-frontend.wallester.com/v1&quot;,\r\n    primary = false,\r\n    configuration = [MyApiConfig::class]\r\n)\r\ninterface WallesterApi {\r\n\r\n    @RequestMapping(value = [&quot;/cards/{card_id}/replace&quot;], method = [RequestMethod.PATCH])\r\n    fun replaceCard(\r\n        @RequestHeader(value = &quot;Authorization&quot;) authorization: String,\r\n        @PathVariable(name = &quot;card_id&quot;) cardId: String\r\n    ): WallesterCardResponse\r\n}\r\n```\r\n\r\napplication config with feign\r\n\r\n```\r\nfeign:\r\n  client:\r\n    config:\r\n      default:\r\n        logger-level: full\r\n  okhttp:\r\n    enabled: true\r\n```\r\n\r\nI have also dependencies\r\n\r\n```\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\r\n            &lt;artifactId&gt;feign-okhttp&lt;/artifactId&gt; &lt;!-- Required to use PATCH --&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nSpring boot 2.7.3,\r\nSpring Cloud 2021.0.8\r\n\r\nMy HTTP PATCH requests fail with `&lt;--- ERROR ProtocolException: Invalid HTTP method: PATCH (4ms)`\r\n\r\n----------\r\n\r\nI tried guides that exist here, also tried `http-client` instead of `okhttp`\r\n\r\nWhat I can see is that noting actually influences `FeignAutoConfiguration` class. I can&#39;t event get there with debug breakpoints. I still get default http client without PATCH support.","title":"Cannot change Feign Default client. PATCH mapping does not work","body":"<p>Config file</p>\n<pre><code>@Configuration\npublic class MyApiConfig {\n    @Bean\n    Logger.Level feignLoggerLevel() {\n        return Logger.Level.FULL;\n    }\n\n    @Bean\n    public OkHttpClient client() {\n        return new OkHttpClient();\n    }\n}\n</code></pre>\n<p>Client class</p>\n<pre><code>@FeignClient(\n    name = &quot;wallesterApi&quot;,\n    url = &quot;https://api-frontend.wallester.com/v1&quot;,\n    primary = false,\n    configuration = [MyApiConfig::class]\n)\ninterface WallesterApi {\n\n    @RequestMapping(value = [&quot;/cards/{card_id}/replace&quot;], method = [RequestMethod.PATCH])\n    fun replaceCard(\n        @RequestHeader(value = &quot;Authorization&quot;) authorization: String,\n        @PathVariable(name = &quot;card_id&quot;) cardId: String\n    ): WallesterCardResponse\n}\n</code></pre>\n<p>application config with feign</p>\n<pre><code>feign:\n  client:\n    config:\n      default:\n        logger-level: full\n  okhttp:\n    enabled: true\n</code></pre>\n<p>I have also dependencies</p>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\n            &lt;artifactId&gt;feign-okhttp&lt;/artifactId&gt; &lt;!-- Required to use PATCH --&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Spring boot 2.7.3,\nSpring Cloud 2021.0.8</p>\n<p>My HTTP PATCH requests fail with <code>&lt;--- ERROR ProtocolException: Invalid HTTP method: PATCH (4ms)</code></p>\n<hr />\n<p>I tried guides that exist here, also tried <code>http-client</code> instead of <code>okhttp</code></p>\n<p>What I can see is that noting actually influences <code>FeignAutoConfiguration</code> class. I can't event get there with debug breakpoints. I still get default http client without PATCH support.</p>\n"},{"tags":["java","spring-boot","flyway"],"answers":[{"comments":[{"owner":{"account_id":29397805,"reputation":63,"user_id":22524769,"display_name":"Shubham Shekhar"},"score":1,"creation_date":1698995210,"post_id":77414710,"comment_id":136477512,"body_markdown":"Yes But flyway 10 has a feature which allows to use all version of mysql including 5.7, so I need to use 10 version somehow for my project requirement","body":"Yes But flyway 10 has a feature which allows to use all version of mysql including 5.7, so I need to use 10 version somehow for my project requirement"}],"tags":[],"owner":{"account_id":7776764,"reputation":21,"user_id":5884627,"display_name":"roamerxv"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698994728,"creation_date":1698994728,"answer_id":77414710,"question_id":77414600,"body_markdown":"Encountering the same issue！\r\n\r\nflywaydb 10.0.0 \r\nspring boot  3.1.5.\r\nmysql 8.1\r\n\r\nps：  flywaydb 9.22.3 is ok。\r\n","title":"Getting Flywayautoconfiguration error when upgrading to flyway 10 and spring boot 3.1.5","body":"<p>Encountering the same issue！</p>\n<p>flywaydb 10.0.0\nspring boot  3.1.5.\nmysql 8.1</p>\n<p>ps：  flywaydb 9.22.3 is ok。</p>\n"},{"comments":[{"owner":{"account_id":29397805,"reputation":63,"user_id":22524769,"display_name":"Shubham Shekhar"},"score":0,"creation_date":1699508930,"post_id":77416908,"comment_id":136541486,"body_markdown":"@ AlistairW The above GitHub issue shows as closed but I don&#39;t see any change in spring boot maven repo. Does it takes time to sink here? Or they will release it in a different version maybe? mvnrepository.com/artifact/org.springframework.boot/spring-boot","body":"@ AlistairW The above GitHub issue shows as closed but I don&#39;t see any change in spring boot maven repo. Does it takes time to sink here? Or they will release it in a different version maybe? mvnrepository.com/artifact/org.springframework.boot/spring-b&zwnj;&#8203;oot"},{"owner":{"account_id":314604,"reputation":4123,"user_id":629868,"accept_rate":58,"display_name":"Neets"},"score":0,"creation_date":1699617679,"post_id":77416908,"comment_id":136557683,"body_markdown":"@ShubhamShekhar it&#39;s marked as completed because they&#39;ve done &amp; merged the change but it hasn&#39;t made it into a release yet. It will most likely be included in the next one","body":"@ShubhamShekhar it&#39;s marked as completed because they&#39;ve done &amp; merged the change but it hasn&#39;t made it into a release yet. It will most likely be included in the next one"}],"tags":[],"owner":{"account_id":29065643,"reputation":31,"user_id":22265319,"display_name":"AlistairW"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1699016963,"creation_date":1699016963,"answer_id":77416908,"question_id":77414600,"body_markdown":"Spring boot has to be updated to work with Flyway v10, it is on their radar: https://github.com/spring-projects/spring-boot/issues/38164","title":"Getting Flywayautoconfiguration error when upgrading to flyway 10 and spring boot 3.1.5","body":"<p>Spring boot has to be updated to work with Flyway v10, it is on their radar: <a href=\"https://github.com/spring-projects/spring-boot/issues/38164\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/38164</a></p>\n"}],"owner":{"account_id":29397805,"reputation":63,"user_id":22524769,"display_name":"Shubham Shekhar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1699016963,"creation_date":1698993022,"question_id":77414600,"body_markdown":"I am trying to use latest version of flyway-core 10.0.0 in my pom.xml, with latest spring boot version 3.1.5 but when I run my test using flyway I get below error:-\r\n\r\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\r\n\r\n    org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.configureProperties(FlywayAutoConfiguration.java:254)\r\n\r\nThe following method did not exist:\r\n\r\n    &#39;org.flywaydb.core.api.configuration.FluentConfiguration org.flywaydb.core.api.configuration.FluentConfiguration.licenseKey(java.lang.String)&#39;\r\n\r\nThe calling method&#39;s class, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration, was loaded from the following location:\r\n\r\n    jar:file:/C:/Users/sx8428/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/3.1.5/spring-boot-autoconfigure-3.1.5.jar!/org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class\r\n\r\nThe called method&#39;s class, org.flywaydb.core.api.configuration.FluentConfiguration, is available from the following locations:\r\n\r\n    jar:file:/C:/Users/sx8428/.m2/repository/org/flywaydb/flyway-core/10.0.0/flyway-core-10.0.0.jar!/org/flywaydb/core/api/configuration/FluentConfiguration.class\r\n\r\nThe called method&#39;s class hierarchy was loaded from the following locations:\r\n\r\n    org.flywaydb.core.api.configuration.FluentConfiguration: file:/C:/Users/sx8428/.m2/repository/org/flywaydb/flyway-core/10.0.0/flyway-core-10.0.0.jar\r\n\r\n\r\nAction:\r\n\r\nCorrect the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration and org.flywaydb.core.api.configuration.FluentConfiguration","title":"Getting Flywayautoconfiguration error when upgrading to flyway 10 and spring boot 3.1.5","body":"<p>I am trying to use latest version of flyway-core 10.0.0 in my pom.xml, with latest spring boot version 3.1.5 but when I run my test using flyway I get below error:-</p>\n<p>An attempt was made to call a method that does not exist. The attempt was made from the following location:</p>\n<pre><code>org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration.configureProperties(FlywayAutoConfiguration.java:254)\n</code></pre>\n<p>The following method did not exist:</p>\n<pre><code>'org.flywaydb.core.api.configuration.FluentConfiguration org.flywaydb.core.api.configuration.FluentConfiguration.licenseKey(java.lang.String)'\n</code></pre>\n<p>The calling method's class, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration, was loaded from the following location:</p>\n<pre><code>jar:file:/C:/Users/sx8428/.m2/repository/org/springframework/boot/spring-boot-autoconfigure/3.1.5/spring-boot-autoconfigure-3.1.5.jar!/org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class\n</code></pre>\n<p>The called method's class, org.flywaydb.core.api.configuration.FluentConfiguration, is available from the following locations:</p>\n<pre><code>jar:file:/C:/Users/sx8428/.m2/repository/org/flywaydb/flyway-core/10.0.0/flyway-core-10.0.0.jar!/org/flywaydb/core/api/configuration/FluentConfiguration.class\n</code></pre>\n<p>The called method's class hierarchy was loaded from the following locations:</p>\n<pre><code>org.flywaydb.core.api.configuration.FluentConfiguration: file:/C:/Users/sx8428/.m2/repository/org/flywaydb/flyway-core/10.0.0/flyway-core-10.0.0.jar\n</code></pre>\n<p>Action:</p>\n<p>Correct the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration$FlywayConfiguration and org.flywaydb.core.api.configuration.FluentConfiguration</p>\n"},{"tags":["java","spring","cloud","feign"],"comments":[{"owner":{"account_id":5797887,"reputation":366,"user_id":4573103,"display_name":"Dhruv Patel"},"score":0,"creation_date":1569383106,"post_id":58090776,"comment_id":102574497,"body_markdown":"it looks like you&#39;ll need to configure the url on feign client","body":"it looks like you&#39;ll need to configure the url on feign client"},{"owner":{"account_id":14692591,"reputation":2143,"user_id":10610826,"display_name":"Mykhailo Moskura"},"score":0,"creation_date":1586663851,"post_id":58090776,"comment_id":108207937,"body_markdown":"Please attach your configuration yml and controller with /rooms endpoints","body":"Please attach your configuration yml and controller with /rooms endpoints"}],"answers":[{"comments":[{"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"score":0,"creation_date":1620109980,"post_id":58090938,"comment_id":119096418,"body_markdown":"Why we should use port information here? Cant we make it configurable?","body":"Why we should use port information here? Cant we make it configurable?"}],"tags":[],"owner":{"account_id":5797887,"reputation":366,"user_id":4573103,"display_name":"Dhruv Patel"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569383718,"creation_date":1569383718,"answer_id":58090938,"question_id":58090776,"body_markdown":"Since it&#39;s 404 it&#39;s not finding the url to configure the client. Looks like you need to configure the url for feign client. The configuration can be done through application yaml&#39;s \r\n\r\nE.g. \r\napplication.yaml \r\n\r\n    RESERVATIONBUSINESSSERVICES: \r\n                             url: http:localhost:8080/reservationbusinessservice/\r\n\r\nRoomReservationService\r\n  \r\n\r\n      @FeignClient(name = &quot;RESERVATIONBUSINESSSERVICES&quot;, url = &quot;${RESERVATIONBUSINESSSERVICES.url}&quot;, \r\n","title":"Spring Cloud : FeignClient feign.FeignException$NotFound: status 404 reading RoomReservationService#getRoomReservationsForDate(String)","body":"<p>Since it's 404 it's not finding the url to configure the client. Looks like you need to configure the url for feign client. The configuration can be done through application yaml's </p>\n\n<p>E.g. \napplication.yaml </p>\n\n<pre><code>RESERVATIONBUSINESSSERVICES: \n                         url: http:localhost:8080/reservationbusinessservice/\n</code></pre>\n\n<p>RoomReservationService</p>\n\n<pre><code>  @FeignClient(name = \"RESERVATIONBUSINESSSERVICES\", url = \"${RESERVATIONBUSINESSSERVICES.url}\", \n</code></pre>\n"},{"tags":[],"owner":{"account_id":2293620,"reputation":67,"user_id":2015688,"display_name":"Tinh Cao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586663195,"creation_date":1586663195,"answer_id":61166605,"question_id":58090776,"body_markdown":"Do you use servlet context path, if you use it, you need to include context path in Feign Client method","title":"Spring Cloud : FeignClient feign.FeignException$NotFound: status 404 reading RoomReservationService#getRoomReservationsForDate(String)","body":"<p>Do you use servlet context path, if you use it, you need to include context path in Feign Client method</p>\n"}],"owner":{"account_id":15527237,"reputation":11,"user_id":11201699,"display_name":"Tedi Tri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8759,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1699016750,"creation_date":1569382215,"question_id":58090776,"body_markdown":"Hi i recently learn spring cloud with feign client and eureka but having trouble opening my web app what i got is the \r\n\r\n&gt; feign.FeignException$NotFound: status 404 reading \r\n&gt; RoomReservationService#getRoomReservationsForDate(String)\r\n&gt; \r\n&gt; `and The error at`\r\n&gt; com.frankmoley.webapp.reservation.ReservationController.getReservations(ReservationController.java:42)\r\n\r\nHere is My code for RoomReservationService\r\n\r\n    package com.frankmoley.webapp.reservation.client;\r\n    \r\n    import com.frankmoley.webapp.reservation.domain.Room;\r\n    import com.frankmoley.webapp.reservation.domain.RoomReservation;\r\n    import org.springframework.cloud.openfeign.FeignClient;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.stereotype.Repository;\r\n    import org.springframework.stereotype.Service;\r\n    import org.springframework.web.bind.annotation.PathVariable;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    \r\n    import java.util.List;\r\n    \r\n    /**\r\n     * Created by frankmoley on 5/23/17.\r\n     */\r\n    \r\n    @FeignClient(&quot;RESERVATIONBUSINESSSERVICES&quot;)\r\n    public interface RoomReservationService {\r\n    \r\n        @RequestMapping(value = &quot;/rooms&quot;, method = RequestMethod.GET)\r\n        public List&lt;Room&gt; getAllRooms(@RequestParam(name=&quot;roomNumber&quot;, required=false)String roomNumber);\r\n    \r\n        @RequestMapping(value=&quot;/roomReservations/{date}&quot;, method=RequestMethod.GET)\r\n        public List&lt;RoomReservation&gt; getRoomReservationsForDate(@PathVariable(&quot;date&quot;) String date);\r\n    }\r\n\r\n\r\nAnd My ReservationController\r\n\r\n    package com.frankmoley.webapp.reservation;\r\n    \r\n    import com.frankmoley.webapp.reservation.client.RoomReservationService;\r\n    import com.frankmoley.webapp.reservation.domain.Room;\r\n    import com.frankmoley.webapp.reservation.domain.RoomReservation;\r\n    \r\n    import io.micrometer.core.instrument.util.StringUtils;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.ui.Model;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    \r\n    import java.util.Date;\r\n    import java.text.DateFormat;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.List;\r\n    \r\n    @Controller\r\n    @RequestMapping(value=&quot;/reservations&quot;)\r\n    public class ReservationController {\r\n    \r\n        private static final DateFormat DATE_FORMAT = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n    \r\n        private final RoomReservationService roomReservationService;\r\n    \r\n    \r\n        @Autowired\r\n        public ReservationController(RoomReservationService roomReservationService){\r\n            super();\r\n            this.roomReservationService = roomReservationService;\r\n        }\r\n    \r\n        @RequestMapping(method= RequestMethod.GET)\r\n        public String getReservations(@RequestParam(value=&quot;date&quot;, required=false)String dateString, Model model){\r\n            String date = dateString;\r\n            if(StringUtils.isBlank(dateString)){\r\n                date = this.createTodayDateString();\r\n            }\r\n            List&lt;Room&gt; rooms = this.roomReservationService.getAllRooms(&quot;P1&quot;);\r\n            List&lt;RoomReservation&gt; roomReservations = this.roomReservationService.getRoomReservationsForDate(date);\r\n            model.addAttribute(&quot;roomReservations&quot;, roomReservations);\r\n            return &quot;reservations&quot;;\r\n        }\r\n    \r\n        public String createTodayDateString(){\r\n            return DATE_FORMAT.format(new Date());\r\n        }\r\n    }\r\n\r\nI&#39;ve been searching anywhere but couldn&#39;t find the answer\r\nPlease Help Me","title":"Spring Cloud : FeignClient feign.FeignException$NotFound: status 404 reading RoomReservationService#getRoomReservationsForDate(String)","body":"<p>Hi i recently learn spring cloud with feign client and eureka but having trouble opening my web app what i got is the </p>\n\n<blockquote>\n  <p>feign.FeignException$NotFound: status 404 reading \n  RoomReservationService#getRoomReservationsForDate(String)</p>\n  \n  <p><code>and The error at</code>\n  com.frankmoley.webapp.reservation.ReservationController.getReservations(ReservationController.java:42)</p>\n</blockquote>\n\n<p>Here is My code for RoomReservationService</p>\n\n<pre><code>package com.frankmoley.webapp.reservation.client;\n\nimport com.frankmoley.webapp.reservation.domain.Room;\nimport com.frankmoley.webapp.reservation.domain.RoomReservation;\nimport org.springframework.cloud.openfeign.FeignClient;\nimport org.springframework.stereotype.Component;\nimport org.springframework.stereotype.Repository;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\n\nimport java.util.List;\n\n/**\n * Created by frankmoley on 5/23/17.\n */\n\n@FeignClient(\"RESERVATIONBUSINESSSERVICES\")\npublic interface RoomReservationService {\n\n    @RequestMapping(value = \"/rooms\", method = RequestMethod.GET)\n    public List&lt;Room&gt; getAllRooms(@RequestParam(name=\"roomNumber\", required=false)String roomNumber);\n\n    @RequestMapping(value=\"/roomReservations/{date}\", method=RequestMethod.GET)\n    public List&lt;RoomReservation&gt; getRoomReservationsForDate(@PathVariable(\"date\") String date);\n}\n</code></pre>\n\n<p>And My ReservationController</p>\n\n<pre><code>package com.frankmoley.webapp.reservation;\n\nimport com.frankmoley.webapp.reservation.client.RoomReservationService;\nimport com.frankmoley.webapp.reservation.domain.Room;\nimport com.frankmoley.webapp.reservation.domain.RoomReservation;\n\nimport io.micrometer.core.instrument.util.StringUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\n\nimport java.util.Date;\nimport java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.List;\n\n@Controller\n@RequestMapping(value=\"/reservations\")\npublic class ReservationController {\n\n    private static final DateFormat DATE_FORMAT = new SimpleDateFormat(\"yyyy-MM-dd\");\n\n    private final RoomReservationService roomReservationService;\n\n\n    @Autowired\n    public ReservationController(RoomReservationService roomReservationService){\n        super();\n        this.roomReservationService = roomReservationService;\n    }\n\n    @RequestMapping(method= RequestMethod.GET)\n    public String getReservations(@RequestParam(value=\"date\", required=false)String dateString, Model model){\n        String date = dateString;\n        if(StringUtils.isBlank(dateString)){\n            date = this.createTodayDateString();\n        }\n        List&lt;Room&gt; rooms = this.roomReservationService.getAllRooms(\"P1\");\n        List&lt;RoomReservation&gt; roomReservations = this.roomReservationService.getRoomReservationsForDate(date);\n        model.addAttribute(\"roomReservations\", roomReservations);\n        return \"reservations\";\n    }\n\n    public String createTodayDateString(){\n        return DATE_FORMAT.format(new Date());\n    }\n}\n</code></pre>\n\n<p>I've been searching anywhere but couldn't find the answer\nPlease Help Me</p>\n"},{"tags":["java","if-statement","passwords","joptionpane"],"comments":[{"owner":{"account_id":2667845,"reputation":10491,"user_id":2305826,"accept_rate":89,"display_name":"MarsAtomic"},"score":1,"creation_date":1459727909,"post_id":36392749,"comment_id":60402194,"body_markdown":"So what&#39;s your question? What does your supplied code do that you think it ought not do?","body":"So what&#39;s your question? What does your supplied code do that you think it ought not do?"}],"answers":[{"comments":[{"owner":{"account_id":1334069,"reputation":4343,"user_id":1277259,"accept_rate":75,"display_name":"KevinO"},"score":0,"creation_date":1459728961,"post_id":36392851,"comment_id":60402442,"body_markdown":"I seriously doubt that passwords should be case insensitive unless you are Microsoft using [LM Password Hashes](http://www.windowsecurity.com/articles-tutorials/authentication_and_encryption/How-Cracked-Windows-Password-Part1.html)","body":"I seriously doubt that passwords should be case insensitive unless you are Microsoft using <a href=\"http://www.windowsecurity.com/articles-tutorials/authentication_and_encryption/How-Cracked-Windows-Password-Part1.html\" rel=\"nofollow noreferrer\">LM Password Hashes</a>"},{"owner":{"account_id":8138702,"reputation":72,"user_id":6129600,"accept_rate":33,"display_name":"Bautista"},"score":0,"creation_date":1459729097,"post_id":36392851,"comment_id":60402466,"body_markdown":"fixed. Thank you. @KevinO","body":"fixed. Thank you. @KevinO"}],"tags":[],"owner":{"account_id":8138702,"reputation":72,"user_id":6129600,"accept_rate":33,"display_name":"Bautista"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1459729081,"creation_date":1459728768,"answer_id":36392851,"question_id":36392749,"body_markdown":"The following snippet will request for a username and password as long as the given username and password don&#39;t match the real one and the user has only attempted less than 5 times. \r\n\r\n    import javax.swing.JOptionPane;\r\n    \r\n    public class Password_DiljotJ_R1 {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \r\n    \t\tint attempt = 0;\r\n    \t\tString username = &quot;john&quot;;\r\n    \t\tString password = &quot;123&quot;;\r\n    \t\tString usernameEntered;\r\n    \t\tString passwordEntered;\r\n    \r\n    \t\tdo {\r\n    \t\t\tusernameEntered = (JOptionPane.showInputDialog(&quot;Please enter the username&quot;));\r\n    \t\t\tpasswordEntered = (JOptionPane.showInputDialog(&quot;Please enter the password&quot;));\r\n    \t\t\tattempt++;\r\n    \t\t} while (usernameEntered != username &amp;&amp; passwordEntered != password &amp;&amp; attempt &lt; 5);\r\n    \t}\r\n    \r\n    }","title":"If Statements and Usernames/Password","body":"<p>The following snippet will request for a username and password as long as the given username and password don't match the real one and the user has only attempted less than 5 times. </p>\n\n<pre><code>import javax.swing.JOptionPane;\n\npublic class Password_DiljotJ_R1 {\n\n    public static void main(String[] args) {\n\n        int attempt = 0;\n        String username = \"john\";\n        String password = \"123\";\n        String usernameEntered;\n        String passwordEntered;\n\n        do {\n            usernameEntered = (JOptionPane.showInputDialog(\"Please enter the username\"));\n            passwordEntered = (JOptionPane.showInputDialog(\"Please enter the password\"));\n            attempt++;\n        } while (usernameEntered != username &amp;&amp; passwordEntered != password &amp;&amp; attempt &lt; 5);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":8167859,"reputation":69,"user_id":6149483,"accept_rate":60,"display_name":"Diljot Jawanda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699016750,"creation_date":1459727785,"question_id":36392749,"body_markdown":"I want my program to prompt user to enter the set user name and password. If the credentials don&#39;t match, I want it to loop until either they get it right or they exceed number of attempts.\r\n\r\nFor example, if they get &quot;username&quot; wrong, program should keep on asking user of &quot;username&quot; until they get the username right or they reach 5 attempts\r\n\r\n       import javax.swing.JOptionPane;\r\n\r\n       public class Password_DiljotJ_R1 {\r\n\r\n      public static void main(String[] args) {\r\n\r\n      int attempt = 0;\r\n\r\n    String username = &quot;john&quot;;\r\n    String password = &quot;123&quot;; \r\n    String usernameEntered;\r\n    String passwordEntered;\r\n\r\n    usernameEntered = (JOptionPane.showInputDialog(&quot;Please enter the username&quot;));\r\n    passwordEntered = (JOptionPane.showInputDialog(&quot;Please enter the password&quot;));\r\n\r\n     if (usernameEntered.equals(username) &amp;&amp; passwordEntered.equals(password) ){\r\n\r\n         JOptionPane.showMessageDialog(null,&quot;Credentials Match. Welcome John!&quot;);    \r\n    }\r\n\r\n\r\n\r\n     else if (usernameEntered.equals(username)) {\r\n\r\n        JOptionPane.showMessageDialog(null,&quot;Password Invalid.&quot;);\r\n        attempt++;\r\n        passwordEntered = (JOptionPane.showInputDialog(&quot;Please enter the password AGAIN&quot;));\r\n\r\n        }\r\n\r\n    else if (passwordEntered.equals(password)) {\r\n\r\n        JOptionPane.showMessageDialog(null, &quot;Username Invalid.&quot;);\r\n        attempt++;\r\n        usernameEntered = (JOptionPane.showInputDialog(&quot;Please enter username AGAIN&quot;));\r\n    }\r\n\r\n    else {\r\n\r\n        JOptionPane.showMessageDialog(null,&quot;Both username and password are inncorrect. Who are you&quot;);\r\n        attempt++;\r\n        usernameEntered = (JOptionPane.showInputDialog(&quot;Please enter username AGAIN&quot;));\r\n        passwordEntered = (JOptionPane.showInputDialog(&quot;Please enter password AGAIN&quot;));\r\n    }\r\n        if (attempt == 5){\r\n\r\n       JOptionPane.showMessageDialog(null,&quot;You&#39;ve reached maximum attempts. Program will now close&quot;);\r\n       }\r\n\r\n\r\n      }\r\n\r\n\r\n     }","title":"If Statements and Usernames/Password","body":"<p>I want my program to prompt user to enter the set user name and password. If the credentials don't match, I want it to loop until either they get it right or they exceed number of attempts.</p>\n\n<p>For example, if they get \"username\" wrong, program should keep on asking user of \"username\" until they get the username right or they reach 5 attempts</p>\n\n<pre><code>   import javax.swing.JOptionPane;\n\n   public class Password_DiljotJ_R1 {\n\n  public static void main(String[] args) {\n\n  int attempt = 0;\n\nString username = \"john\";\nString password = \"123\"; \nString usernameEntered;\nString passwordEntered;\n\nusernameEntered = (JOptionPane.showInputDialog(\"Please enter the username\"));\npasswordEntered = (JOptionPane.showInputDialog(\"Please enter the password\"));\n\n if (usernameEntered.equals(username) &amp;&amp; passwordEntered.equals(password) ){\n\n     JOptionPane.showMessageDialog(null,\"Credentials Match. Welcome John!\");    \n}\n\n\n\n else if (usernameEntered.equals(username)) {\n\n    JOptionPane.showMessageDialog(null,\"Password Invalid.\");\n    attempt++;\n    passwordEntered = (JOptionPane.showInputDialog(\"Please enter the password AGAIN\"));\n\n    }\n\nelse if (passwordEntered.equals(password)) {\n\n    JOptionPane.showMessageDialog(null, \"Username Invalid.\");\n    attempt++;\n    usernameEntered = (JOptionPane.showInputDialog(\"Please enter username AGAIN\"));\n}\n\nelse {\n\n    JOptionPane.showMessageDialog(null,\"Both username and password are inncorrect. Who are you\");\n    attempt++;\n    usernameEntered = (JOptionPane.showInputDialog(\"Please enter username AGAIN\"));\n    passwordEntered = (JOptionPane.showInputDialog(\"Please enter password AGAIN\"));\n}\n    if (attempt == 5){\n\n   JOptionPane.showMessageDialog(null,\"You've reached maximum attempts. Program will now close\");\n   }\n\n\n  }\n\n\n }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":1,"creation_date":1699007086,"post_id":77415745,"comment_id":136479319,"body_markdown":"But how is Service2 invoked?","body":"But how is Service2 invoked?"},{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":0,"creation_date":1699007130,"post_id":77415745,"comment_id":136479325,"body_markdown":"I would add a second method without security constraints and call this method in the secured one. No duplicate code, but two different methods. You could also propagate an authentication. If you use Google with keywords &quot;schedule&quot; and &quot;Spring Security&quot; you will find some solutions.","body":"I would add a second method without security constraints and call this method in the secured one. No duplicate code, but two different methods. You could also propagate an authentication. If you use Google with keywords &quot;schedule&quot; and &quot;Spring Security&quot; you will find some solutions."},{"owner":{"account_id":9053155,"reputation":625,"user_id":6742409,"display_name":"Yurii Kozachok"},"score":0,"creation_date":1699010534,"post_id":77415745,"comment_id":136479883,"body_markdown":"Added update that service2 is invoked by controller","body":"Added update that service2 is invoked by controller"}],"owner":{"account_id":9053155,"reputation":625,"user_id":6742409,"display_name":"Yurii Kozachok"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699016518,"creation_date":1699005674,"question_id":77415745,"body_markdown":"Spring tell in FAQ&#39;s that best practice is to secure methods on service layer. But for me, it is have disadvantage because if call secured method not from Controller but from different service we will get &#39;An Authentication object was not found in the SecurityContext&#39;. And Spring has comment regarding this on docs: \r\n\r\n&gt; If the method is not being called in the context of an HTTP request,\r\n&gt; you will likely need to handle the AccessDeniedException yourself\r\n\r\nBut I didn&#39;t found the right way how to do it. So, we need manually set security context. I have not found any best practices how to deal with it properly. So, asking how do you deal with it?\r\n\r\n    @Service\r\n    public class Service1 {\r\n       \r\n       @PreAuthorize(&quot;hasAuthority(&quot;ADMIN&quot;)\r\n       public String method1 {\r\n          //some logic\r\n       }\r\n    }\r\n\r\n    @Service\r\n    public class Service2 {\r\n       \r\n       @Autowired\r\n       private Service1 service1;\r\n\r\n       @PreAuthorize(&quot;hasAuthority(&quot;ADMIN&quot;)\r\n       public String method2 {\r\n          //call service1 from reactive code(project reactor)\r\n          Mono.just(id)\r\n                .map(service1::method1)\r\n          .....\r\n          //An Authentication object was not found in the SecurityContext\r\n       }\r\n    }\r\n\r\nUPD: The Service2 invoked by controller. Inside service2, serivce1 invoked from reactive code.\r\n","title":"How can I call @PreAuthorized method from service layer from reactive code with security context","body":"<p>Spring tell in FAQ's that best practice is to secure methods on service layer. But for me, it is have disadvantage because if call secured method not from Controller but from different service we will get 'An Authentication object was not found in the SecurityContext'. And Spring has comment regarding this on docs:</p>\n<blockquote>\n<p>If the method is not being called in the context of an HTTP request,\nyou will likely need to handle the AccessDeniedException yourself</p>\n</blockquote>\n<p>But I didn't found the right way how to do it. So, we need manually set security context. I have not found any best practices how to deal with it properly. So, asking how do you deal with it?</p>\n<pre><code>@Service\npublic class Service1 {\n   \n   @PreAuthorize(&quot;hasAuthority(&quot;ADMIN&quot;)\n   public String method1 {\n      //some logic\n   }\n}\n\n@Service\npublic class Service2 {\n   \n   @Autowired\n   private Service1 service1;\n\n   @PreAuthorize(&quot;hasAuthority(&quot;ADMIN&quot;)\n   public String method2 {\n      //call service1 from reactive code(project reactor)\n      Mono.just(id)\n            .map(service1::method1)\n      .....\n      //An Authentication object was not found in the SecurityContext\n   }\n}\n</code></pre>\n<p>UPD: The Service2 invoked by controller. Inside service2, serivce1 invoked from reactive code.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","ubuntu"],"comments":[{"owner":{"account_id":2387373,"reputation":4304,"user_id":2088053,"accept_rate":50,"display_name":"Yuri"},"score":0,"creation_date":1691572245,"post_id":73641691,"comment_id":135508454,"body_markdown":"It seems your JAR file can&#39;t be executed straight away. Try executing it via a shell by changing the start unit line to: `ExecStart=/bin/sh /opt/deploy-demo/deploy-demo.jar`","body":"It seems your JAR file can&#39;t be executed straight away. Try executing it via a shell by changing the start unit line to: <code>ExecStart=&#47;bin&#47;sh &#47;opt&#47;deploy-demo&#47;deploy-demo.jar</code>"}],"answers":[{"tags":[],"owner":{"account_id":19021694,"reputation":15,"user_id":15389075,"display_name":"Staaankey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699016262,"creation_date":1699016262,"answer_id":77416841,"question_id":73641691,"body_markdown":"Changed two rows in **deploy-demo.service** and the problem has gone.\r\n\r\n```\r\n[Service]\r\n\r\nWorkingDirectory=/opt/deploy-demo/\r\n\r\nExecStart=/usr/bin/java -jar deploy-demo.jar\r\n\r\nSuccessExitStatus=143\r\n```\r\n\r\n","title":"Failed at step EXEC spawning","body":"<p>Changed two rows in <strong>deploy-demo.service</strong> and the problem has gone.</p>\n<pre><code>[Service]\n\nWorkingDirectory=/opt/deploy-demo/\n\nExecStart=/usr/bin/java -jar deploy-demo.jar\n\nSuccessExitStatus=143\n</code></pre>\n"}],"owner":{"account_id":19021694,"reputation":15,"user_id":15389075,"display_name":"Staaankey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":817,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77416841,"answer_count":1,"score":0,"last_activity_date":1699016262,"creation_date":1662586719,"question_id":73641691,"body_markdown":"\r\nI did everythin&#39; like in Spring [documentation][1] to deploy my app on AWS. But got an error: \r\n```\r\n deploy-demo.service: Failed at step EXEC spawning /opt/deploy-demo/deploy-demo.jar: Exec format error\r\nSep 07 21:22:10 ip-172-31-45-166 systemd[1]: deploy-demo.service: Main process exited, code=exited, status=203/EXEC\r\n```\r\nMy deploy-demo.service file located in /etc/systemd/system/deploy-demo.service with settings:\r\n```\r\n[Unit]\r\nDescription=deploy-demo\r\nAfter=syslog.target\r\n\r\n[Service]\r\nUser=gitlab-runner\r\nExecStart=/opt/deploy-demo/deploy-demo.jar\r\nSuccessExitStatus=143\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\n\r\n```deploy-demo.jar``` and ```deploy-demo.conf``` located in ```/opt/deploy-demo/```\r\n\r\ndeploy-demo.conf file contains \r\n```\r\nRUN_ARGS=&quot;--spring.datasource.url=jdbc:postgresql://here_is_should_be_my_host:5432/helpfast --spring.datasource.username=postgres --spring.datasource.password=adminadmin&quot;\r\n```\r\nAll permissions seems to me correct:\r\n\r\n```\r\ndrwxr-xr-x 2 gitlab-runner gitlab-runner     4096 Sep  7 21:21 ./\r\ndrwxr-xr-x 3 root          root              4096 Sep  7 20:31 ../\r\n-r-------- 1 gitlab-runner gitlab-runner      200 Sep  7 21:21 deploy-demo.conf\r\n-r-x------ 1 gitlab-runner gitlab-runner 42645024 Sep  7 20:31 deploy-demo.jar*\r\n```\r\n\r\nAny ideas are highly appreciated!\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.installing.nix-services.system-d","title":"Failed at step EXEC spawning","body":"<p>I did everythin' like in Spring <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/deployment.html#deployment.installing.nix-services.system-d\" rel=\"nofollow noreferrer\">documentation</a> to deploy my app on AWS. But got an error:</p>\n<pre><code> deploy-demo.service: Failed at step EXEC spawning /opt/deploy-demo/deploy-demo.jar: Exec format error\nSep 07 21:22:10 ip-172-31-45-166 systemd[1]: deploy-demo.service: Main process exited, code=exited, status=203/EXEC\n</code></pre>\n<p>My deploy-demo.service file located in /etc/systemd/system/deploy-demo.service with settings:</p>\n<pre><code>[Unit]\nDescription=deploy-demo\nAfter=syslog.target\n\n[Service]\nUser=gitlab-runner\nExecStart=/opt/deploy-demo/deploy-demo.jar\nSuccessExitStatus=143\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n<p><code>deploy-demo.jar</code> and <code>deploy-demo.conf</code> located in <code>/opt/deploy-demo/</code></p>\n<p>deploy-demo.conf file contains</p>\n<pre><code>RUN_ARGS=&quot;--spring.datasource.url=jdbc:postgresql://here_is_should_be_my_host:5432/helpfast --spring.datasource.username=postgres --spring.datasource.password=adminadmin&quot;\n</code></pre>\n<p>All permissions seems to me correct:</p>\n<pre><code>drwxr-xr-x 2 gitlab-runner gitlab-runner     4096 Sep  7 21:21 ./\ndrwxr-xr-x 3 root          root              4096 Sep  7 20:31 ../\n-r-------- 1 gitlab-runner gitlab-runner      200 Sep  7 21:21 deploy-demo.conf\n-r-x------ 1 gitlab-runner gitlab-runner 42645024 Sep  7 20:31 deploy-demo.jar*\n</code></pre>\n<p>Any ideas are highly appreciated!</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1698347849,"post_id":77369768,"comment_id":136397513,"body_markdown":"Can&#39;t reproduce. What Java/JavaFX versions are you using?","body":"Can&#39;t reproduce. What Java/JavaFX versions are you using?"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698347995,"post_id":77369768,"comment_id":136397532,"body_markdown":"OpenJDK 21. JavaFX 21. Question updated with that info.","body":"OpenJDK 21. JavaFX 21. Question updated with that info."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1698348147,"post_id":77369768,"comment_id":136397553,"body_markdown":"I have the same. I am not seeing any movement. Try `centerPane2.applyCSS(); centerPane2.layout();` after adding the table to the pane?","body":"I have the same. I am not seeing any movement. Try <code>centerPane2.applyCSS(); centerPane2.layout();</code> after adding the table to the pane?"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698348425,"post_id":77369768,"comment_id":136397608,"body_markdown":"Its the same with centerPane2.applyCss(); centerPane2.layout(); The content is moving really fast, maybe it is most noticeable in the headline. The issue is not preset when setColumnResizePolicy is not being used, but then I cant get the even alignment (and no extra column) I want.","body":"Its the same with centerPane2.applyCss(); centerPane2.layout(); The content is moving really fast, maybe it is most noticeable in the headline. The issue is not preset when setColumnResizePolicy is not being used, but then I cant get the even alignment (and no extra column) I want."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698349261,"post_id":77369768,"comment_id":136397765,"body_markdown":"Question updated with screenshots.","body":"Question updated with screenshots."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1698352701,"post_id":77369768,"comment_id":136398326,"body_markdown":"(a) Describe &quot;table is moving&quot;. (b) I see no difference between your screenshots. (c) I do not notice any &quot;moving&quot; when running your app on a MacBook Pro (Apple Silicon, M1 Pro), Ventura 13.6, Java 21 &amp; JavaFX 21.","body":"(a) Describe &quot;table is moving&quot;. (b) I see no difference between your screenshots. (c) I do not notice any &quot;moving&quot; when running your app on a MacBook Pro (Apple Silicon, M1 Pro), Ventura 13.6, Java 21 &amp; JavaFX 21."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698352871,"post_id":77369768,"comment_id":136398351,"body_markdown":"The columns in the header are moving. Look at the screenshots. Is it related to this: https://bugs.openjdk.org/browse/JDK-8090112 ?","body":"The columns in the header are moving. Look at the screenshots. Is it related to this: <a href=\"https://bugs.openjdk.org/browse/JDK-8090112\" rel=\"nofollow noreferrer\">bugs.openjdk.org/browse/JDK-8090112</a> ?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1698353147,"post_id":77369768,"comment_id":136398390,"body_markdown":"@droid You mean the text in the cells of the columns seems to jump to the right several pixels? I am seeing some kind of an animated movement, however brief, at least one out of three runs.","body":"@droid You mean the text in the cells of the columns seems to jump to the right several pixels? I am seeing some kind of an animated movement, however brief, at least one out of three runs."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698353186,"post_id":77369768,"comment_id":136398393,"body_markdown":"Yes, or maybe, I&#39;m not sure that &quot;animations&quot; is meant to be there? Updated question with more screenshots and more precise text.","body":"Yes, or maybe, I&#39;m not sure that &quot;animations&quot; is meant to be there? Updated question with more screenshots and more precise text."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1698358853,"post_id":77369768,"comment_id":136399106,"body_markdown":"@droid No, I don&#39;t think the text-movement is an intended feature. By &quot;animation&quot; I only meant that there is some quick not-quite-decipherable motion — I am not sure if the column contents are moving, or if the column titles are moving, or both. It seems the TableView is recalculating the layout details, and performing a redraw with different placement.","body":"@droid No, I don&#39;t think the text-movement is an intended feature. By &quot;animation&quot; I only meant that there is some quick not-quite-decipherable motion — I am not sure if the column contents are moving, or if the column titles are moving, or both. It seems the TableView is recalculating the layout details, and performing a redraw with different placement."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698368926,"post_id":77369768,"comment_id":136399930,"body_markdown":"I ran this a few times JavaFX 21 and JDK 21.0.1 on OS X (x64).  I couldn&#39;t replicate it, but may have less patience than Basil.  So I don&#39;t really know.  Perhaps, try it without any custom styling and with a different resize policy.  The resize policy you use was only added to JavaFX recently.  So it may be possible there could be some intermittent bugs in it under certain conditions (which I don&#39;t know) or it may have introduced regressions into the entire table layout (less likely).  So also try JavaFX 17, which does not have the resize policy updates.","body":"I ran this a few times JavaFX 21 and JDK 21.0.1 on OS X (x64).  I couldn&#39;t replicate it, but may have less patience than Basil.  So I don&#39;t really know.  Perhaps, try it without any custom styling and with a different resize policy.  The resize policy you use was only added to JavaFX recently.  So it may be possible there could be some intermittent bugs in it under certain conditions (which I don&#39;t know) or it may have introduced regressions into the entire table layout (less likely).  So also try JavaFX 17, which does not have the resize policy updates."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698387843,"post_id":77369768,"comment_id":136401340,"body_markdown":"No changes when moving css. The issue is not there when no resize policy is being used but then I cant achieve the wanted layout. I think this is a bug when using the resize policy in combination with the vertical scrollbar.","body":"No changes when moving css. The issue is not there when no resize policy is being used but then I cant achieve the wanted layout. I think this is a bug when using the resize policy in combination with the vertical scrollbar."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698389605,"post_id":77369768,"comment_id":136401593,"body_markdown":"And same issue with JavaFX 17.","body":"And same issue with JavaFX 17."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1698392109,"post_id":77369768,"comment_id":136402041,"body_markdown":"If it is a bug in the system, then it must be a strange one, which it may be because Basil could replicate something similar.  I tried again a few times and I can&#39;t replicate your issue with your code.  JavaFX 17, doesn&#39;t have `TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS`, it can&#39;t be the same, it wouldn&#39;t compile or execute on 17.  Maybe you, mean you get the same behavior with 17 and [`CONSTRAINED_RESIZE_POLICY`](https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/TableView.html#CONSTRAINED_RESIZE_POLICY)?","body":"If it is a bug in the system, then it must be a strange one, which it may be because Basil could replicate something similar.  I tried again a few times and I can&#39;t replicate your issue with your code.  JavaFX 17, doesn&#39;t have <code>TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS</code>, it can&#39;t be the same, it wouldn&#39;t compile or execute on 17.  Maybe you, mean you get the same behavior with 17 and <a href=\"https://openjfx.io/javadoc/17/javafx.controls/javafx/scene/control/TableView.html#CONSTRAINED_RESIZE_POLICY\" rel=\"nofollow noreferrer\"><code>CONSTRAINED_RESIZE_POLICY</code></a>?"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698392247,"post_id":77369768,"comment_id":136402069,"body_markdown":"Yes, I know there was a change in the resize policy. Can you see the difference in the screenshots?","body":"Yes, I know there was a change in the resize policy. Can you see the difference in the screenshots?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698427288,"post_id":77369768,"comment_id":136409024,"body_markdown":"Yes, but I can&#39;t replicate it.","body":"Yes, but I can&#39;t replicate it."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698430737,"post_id":77369768,"comment_id":136409485,"body_markdown":"Strange. Running Windows 11 Pro and can also replicate the issue on Windows 10.","body":"Strange. Running Windows 11 Pro and can also replicate the issue on Windows 10."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":1,"creation_date":1698545578,"post_id":77369768,"comment_id":136418891,"body_markdown":"I was able to reproduce this on my local mac. It moves for a while when you click on the button Pane2. It&#39;s happening due to column resize. If I comment out that line then it doesn&#39;t move.","body":"I was able to reproduce this on my local mac. It moves for a while when you click on the button Pane2. It&#39;s happening due to column resize. If I comment out that line then it doesn&#39;t move."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1698563370,"post_id":77369768,"comment_id":136419722,"body_markdown":"If you want  an answer from a reputable source”, ask the [openjfx-dev mailing list](https://mail.openjdk.org/mailman/listinfo/openjfx-dev).","body":"If you want  an answer from a reputable source”, ask the <a href=\"https://mail.openjdk.org/mailman/listinfo/openjfx-dev\" rel=\"nofollow noreferrer\">openjfx-dev mailing list</a>."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698569337,"post_id":77369768,"comment_id":136420183,"body_markdown":"Thanks jewelsea. I was unsure what to chose as reason. There are many reputable sources here at stack overflow, in this situation the issue is that they are not able to reproduce the issue.","body":"Thanks jewelsea. I was unsure what to chose as reason. There are many reputable sources here at stack overflow, in this situation the issue is that they are not able to reproduce the issue."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1698576502,"post_id":77369768,"comment_id":136420786,"body_markdown":"@droid I&#39;m in my way to solve this, just one question -&gt; do you want this to be solved without using column resize policy?","body":"@droid I&#39;m in my way to solve this, just one question -&gt; do you want this to be solved without using column resize policy?"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698577127,"post_id":77369768,"comment_id":136420855,"body_markdown":"It doesn&#39;t matter. I just want the columns to be same size, like what CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS gives after the &quot;jumping&quot;.","body":"It doesn&#39;t matter. I just want the columns to be same size, like what CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS gives after the &quot;jumping&quot;."},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1698580598,"post_id":77369768,"comment_id":136421172,"body_markdown":"@droid Can you try setting maxwidth to 50% -&gt; for example: `test1.setMaxWidth( 1f * Integer.MAX_VALUE * 50 );`","body":"@droid Can you try setting maxwidth to 50% -&gt; for example: <code>test1.setMaxWidth( 1f * Integer.MAX_VALUE * 50 );</code>"},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698582660,"post_id":77369768,"comment_id":136421362,"body_markdown":"Not working. Text still jumps.","body":"Not working. Text still jumps."},{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1698672788,"post_id":77369768,"comment_id":136431165,"body_markdown":"Question updated with possible fix to avoid using setColumnResizePolicy.","body":"Question updated with possible fix to avoid using setColumnResizePolicy."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698702535,"post_id":77369768,"comment_id":136436558,"body_markdown":"@droid, please put fixes in an answer rather than a question edit.","body":"@droid, please put fixes in an answer rather than a question edit."}],"answers":[{"tags":[],"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698703184,"creation_date":1698703184,"answer_id":77392092,"question_id":77369768,"body_markdown":"What I want to achieve is just columns with the same size. That is easy using the setColumnResizePolicy, except for the issue with the text jumping.\r\n\r\nWhat I have tried instead, is disabling the setColumnResizePolicy, and using binding for setting the size of the columns, like this:   \r\n\r\n    test1.prefWidthProperty().bind(tableView.widthProperty().divide(4));\r\n\r\n(For all 4 colums).\r\n\r\nAbove is working fine, except that the horizontal scollbar is being added when there is no use for it:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nSo using binding could work for me, if I can disable the horizontal scrollbar, it will not be needed at any time.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7v8qH.png","title":"JavaFX TableView text in the cells of the columns seems to jump","body":"<p>What I want to achieve is just columns with the same size. That is easy using the setColumnResizePolicy, except for the issue with the text jumping.</p>\n<p>What I have tried instead, is disabling the setColumnResizePolicy, and using binding for setting the size of the columns, like this:</p>\n<pre><code>test1.prefWidthProperty().bind(tableView.widthProperty().divide(4));\n</code></pre>\n<p>(For all 4 colums).</p>\n<p>Above is working fine, except that the horizontal scollbar is being added when there is no use for it:</p>\n<p><a href=\"https://i.stack.imgur.com/7v8qH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7v8qH.png\" alt=\"enter image description here\" /></a></p>\n<p>So using binding could work for me, if I can disable the horizontal scrollbar, it will not be needed at any time.</p>\n"},{"comments":[{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1699096522,"post_id":77399604,"comment_id":136490094,"body_markdown":"Thanks for your answer, it works overall. One issue is just that when the user is re-sizing the header (the far right), a empty header/column appears on the right.","body":"Thanks for your answer, it works overall. One issue is just that when the user is re-sizing the header (the far right), a empty header/column appears on the right."},{"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"score":0,"creation_date":1699142850,"post_id":77399604,"comment_id":136494533,"body_markdown":"Not sure what your exact requirement is. When you resize a column you want the other columns to resize as well or you want to completely turn off manual resizing. This is just a work around. But if you exactly want how it works with resize policies, then you need to look for the exact bug and fix it.","body":"Not sure what your exact requirement is. When you resize a column you want the other columns to resize as well or you want to completely turn off manual resizing. This is just a work around. But if you exactly want how it works with resize policies, then you need to look for the exact bug and fix it."}],"tags":[],"owner":{"account_id":7717111,"reputation":8774,"user_id":5844477,"display_name":"Sai Dandem"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698796138,"creation_date":1698795712,"answer_id":77399604,"question_id":77369768,"body_markdown":"If you are ok to go with width binding approach, then you can try the below approach to hide the horizontal scroll bar. And yes, this will need some extra class/code,. but will help you to have a better control on other things (if required).\r\n\r\nThe hBar visibility and the other row positioning logic is in the `layoutChildren` method of `VirtualFlow`. So the idea is to tweak some changes for this part of logic in the `layoutChildren` method of `VirtualFlow`. And for this, you need to create a customized VirtualFlow, which eventually leads to creating custom skin and tableView.\r\n\r\nSo the code will be as simple as :\r\n\r\n    class CustomTableView&lt;K&gt; extends TableView&lt;K&gt; {\r\n        @Override\r\n        protected Skin&lt;?&gt; createDefaultSkin() {\r\n            return new CustomTableViewSkin&lt;&gt;(this);\r\n        }\r\n    }\r\n    \r\n    class CustomTableViewSkin&lt;T&gt; extends TableViewSkin&lt;T&gt; {\r\n        public CustomTableViewSkin(CustomTableView&lt;T&gt; control) {\r\n            super(control);\r\n        }\r\n    \r\n        @Override\r\n        protected VirtualFlow&lt;TableRow&lt;T&gt;&gt; createVirtualFlow() {\r\n            return new CustomVirtualFlow&lt;&gt;();\r\n        }\r\n    }\r\n    \r\n    class CustomVirtualFlow&lt;T&gt; extends VirtualFlow&lt;TableRow&lt;T&gt;&gt; {\r\n        @Override\r\n        protected void layoutChildren() {\r\n            // Set prefHeight to 0 before layoutChildren call, to ignore the scroll bar height in the calculations.\r\n            getHbar().setPrefHeight(0);\r\n            super.layoutChildren();\r\n            // Set visible to false after layoutChildren call, to hide the remaining bits of scroll bar that are still visible.\r\n            getHbar().setVisible(false);\r\n        }\r\n    }\r\n\r\nPlease check the below updated demo when combining all changes:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.property.StringProperty;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.*;\r\n    import javafx.scene.control.skin.TableViewSkin;\r\n    import javafx.scene.control.skin.VirtualFlow;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.scene.text.Text;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class TableView_NewConstraints_Demo extends Application {\r\n    \r\n        CustomTableView&lt;TestTable&gt; tableView;\r\n        ObservableList&lt;TestTable&gt; observableListWithTests;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n    \r\n            this.tableView = new CustomTableView&lt;&gt;();\r\n            this.observableListWithTests = FXCollections.observableArrayList();\r\n    \r\n            // this.tableViev.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS);\r\n    \r\n            TableColumn&lt;TestTable, String&gt; test1 = new TableColumn&lt;&gt;(&quot;Test 1&quot;);\r\n            TableColumn&lt;TestTable, String&gt; test2 = new TableColumn&lt;&gt;(&quot;Test 2&quot;);\r\n            TableColumn&lt;TestTable, String&gt; test3 = new TableColumn&lt;&gt;(&quot;Test 3&quot;);\r\n            TableColumn&lt;TestTable, String&gt; test4 = new TableColumn&lt;&gt;(&quot;Test 4&quot;);\r\n    \r\n            test1.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\r\n            test2.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\r\n            test3.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\r\n            test4.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\r\n    \r\n            test1.setCellValueFactory(p -&gt; p.getValue().test1);\r\n            test2.setCellValueFactory(p -&gt; p.getValue().test2);\r\n            test3.setCellValueFactory(p -&gt; p.getValue().test3);\r\n            test4.setCellValueFactory(p -&gt; p.getValue().test4);\r\n    \r\n            test1.prefWidthProperty().bind(tableView.widthProperty().divide(4));\r\n            test2.prefWidthProperty().bind(tableView.widthProperty().divide(4));\r\n            test3.prefWidthProperty().bind(tableView.widthProperty().divide(4));\r\n            test4.prefWidthProperty().bind(tableView.widthProperty().divide(4));\r\n    \r\n            for (int x = 0; x &lt; 50; x++) {\r\n                observableListWithTests.add(new TestTable(&quot;Test &quot; + x, &quot;Test &quot; + x, &quot;Test &quot; + x, &quot;Test &quot; + x));\r\n            }\r\n    \r\n            tableView.getColumns().addAll(test1, test2, test3, test4);\r\n            tableView.setItems(observableListWithTests);\r\n    \r\n            VBox centerPane1 = new VBox();\r\n            centerPane1.setPadding(new Insets(20, 20, 20, 10));\r\n            Text text1 = new Text(&quot;CenterPane 1&quot;);\r\n            centerPane1.getChildren().add(text1);\r\n    \r\n            VBox centerPane2 = new VBox();\r\n            centerPane2.setPadding(new Insets(20, 20, 20, 10));\r\n            centerPane2.getChildren().add(tableView);\r\n    \r\n            Button buttonPane1 = new Button(&quot;Pane 1&quot;);\r\n            Button buttonPane2 = new Button(&quot;Pane 2&quot;);\r\n    \r\n            BorderPane borderPane = new BorderPane();\r\n    \r\n            borderPane.setCenter(centerPane1);\r\n    \r\n            buttonPane1.setOnAction(event -&gt; borderPane.setCenter(centerPane1));\r\n            buttonPane2.setOnAction(event -&gt; borderPane.setCenter(centerPane2));\r\n    \r\n            VBox vBoxWithButtons = new VBox();\r\n            vBoxWithButtons.setPadding(new Insets(20));\r\n            vBoxWithButtons.setSpacing(10);\r\n            vBoxWithButtons.getChildren().addAll(buttonPane1, buttonPane2);\r\n    \r\n            borderPane.setLeft(vBoxWithButtons);\r\n            var scene = new Scene(borderPane, 640, 480);\r\n    \r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    \r\n        class CustomTableView&lt;K&gt; extends TableView&lt;K&gt; {\r\n            @Override\r\n            protected Skin&lt;?&gt; createDefaultSkin() {\r\n                return new CustomTableViewSkin&lt;&gt;(this);\r\n            }\r\n        }\r\n    \r\n        class CustomTableViewSkin&lt;T&gt; extends TableViewSkin&lt;T&gt; {\r\n            public CustomTableViewSkin(CustomTableView&lt;T&gt; control) {\r\n                super(control);\r\n            }\r\n    \r\n            @Override\r\n            protected VirtualFlow&lt;TableRow&lt;T&gt;&gt; createVirtualFlow() {\r\n                return new CustomVirtualFlow&lt;&gt;();\r\n            }\r\n        }\r\n    \r\n        class CustomVirtualFlow&lt;T&gt; extends VirtualFlow&lt;TableRow&lt;T&gt;&gt; {\r\n            @Override\r\n            protected void layoutChildren() {\r\n                // Set prefHeight to 0 before layoutChildren call, to ignore the scroll bar height in the calculations.\r\n                getHbar().setPrefHeight(0);\r\n                super.layoutChildren();\r\n                // Set visible to false after layoutChildren call, to hide the remaining bits of scroll bar that are still visible.\r\n                getHbar().setVisible(false);\r\n            }\r\n        }\r\n    \r\n        class TestTable {\r\n            private StringProperty test1;\r\n            private StringProperty test2;\r\n            private StringProperty test3;\r\n            private StringProperty test4;\r\n    \r\n            public TestTable(String test1, String test2, String test3, String test4) {\r\n                this.test1 = new SimpleStringProperty(test1);\r\n                this.test2 = new SimpleStringProperty(test2);\r\n                this.test4 = new SimpleStringProperty(test3);\r\n                this.test3 = new SimpleStringProperty(test4);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MJ10I.gif","title":"JavaFX TableView text in the cells of the columns seems to jump","body":"<p>If you are ok to go with width binding approach, then you can try the below approach to hide the horizontal scroll bar. And yes, this will need some extra class/code,. but will help you to have a better control on other things (if required).</p>\n<p>The hBar visibility and the other row positioning logic is in the <code>layoutChildren</code> method of <code>VirtualFlow</code>. So the idea is to tweak some changes for this part of logic in the <code>layoutChildren</code> method of <code>VirtualFlow</code>. And for this, you need to create a customized VirtualFlow, which eventually leads to creating custom skin and tableView.</p>\n<p>So the code will be as simple as :</p>\n<pre><code>class CustomTableView&lt;K&gt; extends TableView&lt;K&gt; {\n    @Override\n    protected Skin&lt;?&gt; createDefaultSkin() {\n        return new CustomTableViewSkin&lt;&gt;(this);\n    }\n}\n\nclass CustomTableViewSkin&lt;T&gt; extends TableViewSkin&lt;T&gt; {\n    public CustomTableViewSkin(CustomTableView&lt;T&gt; control) {\n        super(control);\n    }\n\n    @Override\n    protected VirtualFlow&lt;TableRow&lt;T&gt;&gt; createVirtualFlow() {\n        return new CustomVirtualFlow&lt;&gt;();\n    }\n}\n\nclass CustomVirtualFlow&lt;T&gt; extends VirtualFlow&lt;TableRow&lt;T&gt;&gt; {\n    @Override\n    protected void layoutChildren() {\n        // Set prefHeight to 0 before layoutChildren call, to ignore the scroll bar height in the calculations.\n        getHbar().setPrefHeight(0);\n        super.layoutChildren();\n        // Set visible to false after layoutChildren call, to hide the remaining bits of scroll bar that are still visible.\n        getHbar().setVisible(false);\n    }\n}\n</code></pre>\n<p>Please check the below updated demo when combining all changes:</p>\n<p><a href=\"https://i.stack.imgur.com/MJ10I.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MJ10I.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.property.StringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.control.skin.TableViewSkin;\nimport javafx.scene.control.skin.VirtualFlow;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.text.Text;\nimport javafx.stage.Stage;\n\npublic class TableView_NewConstraints_Demo extends Application {\n\n    CustomTableView&lt;TestTable&gt; tableView;\n    ObservableList&lt;TestTable&gt; observableListWithTests;\n\n    @Override\n    public void start(Stage stage) {\n\n        this.tableView = new CustomTableView&lt;&gt;();\n        this.observableListWithTests = FXCollections.observableArrayList();\n\n        // this.tableViev.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS);\n\n        TableColumn&lt;TestTable, String&gt; test1 = new TableColumn&lt;&gt;(&quot;Test 1&quot;);\n        TableColumn&lt;TestTable, String&gt; test2 = new TableColumn&lt;&gt;(&quot;Test 2&quot;);\n        TableColumn&lt;TestTable, String&gt; test3 = new TableColumn&lt;&gt;(&quot;Test 3&quot;);\n        TableColumn&lt;TestTable, String&gt; test4 = new TableColumn&lt;&gt;(&quot;Test 4&quot;);\n\n        test1.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\n        test2.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\n        test3.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\n        test4.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\n\n        test1.setCellValueFactory(p -&gt; p.getValue().test1);\n        test2.setCellValueFactory(p -&gt; p.getValue().test2);\n        test3.setCellValueFactory(p -&gt; p.getValue().test3);\n        test4.setCellValueFactory(p -&gt; p.getValue().test4);\n\n        test1.prefWidthProperty().bind(tableView.widthProperty().divide(4));\n        test2.prefWidthProperty().bind(tableView.widthProperty().divide(4));\n        test3.prefWidthProperty().bind(tableView.widthProperty().divide(4));\n        test4.prefWidthProperty().bind(tableView.widthProperty().divide(4));\n\n        for (int x = 0; x &lt; 50; x++) {\n            observableListWithTests.add(new TestTable(&quot;Test &quot; + x, &quot;Test &quot; + x, &quot;Test &quot; + x, &quot;Test &quot; + x));\n        }\n\n        tableView.getColumns().addAll(test1, test2, test3, test4);\n        tableView.setItems(observableListWithTests);\n\n        VBox centerPane1 = new VBox();\n        centerPane1.setPadding(new Insets(20, 20, 20, 10));\n        Text text1 = new Text(&quot;CenterPane 1&quot;);\n        centerPane1.getChildren().add(text1);\n\n        VBox centerPane2 = new VBox();\n        centerPane2.setPadding(new Insets(20, 20, 20, 10));\n        centerPane2.getChildren().add(tableView);\n\n        Button buttonPane1 = new Button(&quot;Pane 1&quot;);\n        Button buttonPane2 = new Button(&quot;Pane 2&quot;);\n\n        BorderPane borderPane = new BorderPane();\n\n        borderPane.setCenter(centerPane1);\n\n        buttonPane1.setOnAction(event -&gt; borderPane.setCenter(centerPane1));\n        buttonPane2.setOnAction(event -&gt; borderPane.setCenter(centerPane2));\n\n        VBox vBoxWithButtons = new VBox();\n        vBoxWithButtons.setPadding(new Insets(20));\n        vBoxWithButtons.setSpacing(10);\n        vBoxWithButtons.getChildren().addAll(buttonPane1, buttonPane2);\n\n        borderPane.setLeft(vBoxWithButtons);\n        var scene = new Scene(borderPane, 640, 480);\n\n        stage.setScene(scene);\n        stage.show();\n    }\n\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n    class CustomTableView&lt;K&gt; extends TableView&lt;K&gt; {\n        @Override\n        protected Skin&lt;?&gt; createDefaultSkin() {\n            return new CustomTableViewSkin&lt;&gt;(this);\n        }\n    }\n\n    class CustomTableViewSkin&lt;T&gt; extends TableViewSkin&lt;T&gt; {\n        public CustomTableViewSkin(CustomTableView&lt;T&gt; control) {\n            super(control);\n        }\n\n        @Override\n        protected VirtualFlow&lt;TableRow&lt;T&gt;&gt; createVirtualFlow() {\n            return new CustomVirtualFlow&lt;&gt;();\n        }\n    }\n\n    class CustomVirtualFlow&lt;T&gt; extends VirtualFlow&lt;TableRow&lt;T&gt;&gt; {\n        @Override\n        protected void layoutChildren() {\n            // Set prefHeight to 0 before layoutChildren call, to ignore the scroll bar height in the calculations.\n            getHbar().setPrefHeight(0);\n            super.layoutChildren();\n            // Set visible to false after layoutChildren call, to hide the remaining bits of scroll bar that are still visible.\n            getHbar().setVisible(false);\n        }\n    }\n\n    class TestTable {\n        private StringProperty test1;\n        private StringProperty test2;\n        private StringProperty test3;\n        private StringProperty test4;\n\n        public TestTable(String test1, String test2, String test3, String test4) {\n            this.test1 = new SimpleStringProperty(test1);\n            this.test2 = new SimpleStringProperty(test2);\n            this.test4 = new SimpleStringProperty(test3);\n            this.test3 = new SimpleStringProperty(test4);\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"score":0,"creation_date":1699095896,"post_id":77416821,"comment_id":136490035,"body_markdown":"Thanks for your reply. It solves the text jumping in 9 out of 10 cases but I still see jumping once in a while, also when using different delays.","body":"Thanks for your reply. It solves the text jumping in 9 out of 10 cases but I still see jumping once in a while, also when using different delays."}],"tags":[],"owner":{"account_id":950197,"reputation":1687,"user_id":976509,"display_name":"vl4d1m1r4"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699016101,"creation_date":1699016101,"answer_id":77416821,"question_id":77369768,"body_markdown":"I tried this on several machines and it could not be reproducible on most of them. However I was able to reproduce it on an older desktop running windows 11. My guess is that this is a timing issue when rendering the data and calculating the constraints. I don&#39;t think it is a big issue since it fixes itself whenever you scroll the table or change the view back and forth, but sometimes you got to do what you got to do and therefore I propose the following solution: \r\n\r\nRemove the constraint from the table:\r\n\r\n    // this.tableViev.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS)\r\n\r\nWhen setting the the table on the second button action:\r\n\r\n    buttonPane2.setOnAction(event -&gt; borderPane.setCenter(centerPane2));\r\n\r\nReplace it with the following:\r\n\r\n    buttonPane2.setOnAction(event -&gt; {\r\n        borderPane.setCenter(centerPane2);\r\n        hackyWayToFixTextJumping();\r\n    });\r\n\r\nWhere the new function is:\r\n\r\n    private void hackyWayToFixTextJumping() {\r\n        tableViev.setVisible(false);\r\n        TimerTask timerTask = new TimerTask() {\r\n            @Override\r\n            public void run() {\r\n                Platform.runLater(() -&gt; {\r\n                    tableViev.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);\r\n                    tableViev.setVisible(true);\r\n                });\r\n            }\r\n        };\r\n        long delay = 10L;\r\n        Timer timer = new Timer();\r\n        timer.schedule(timerTask, delay);\r\n    }\r\n\r\nYou can play around with the delay, but if you go 5 or below you can see the problem reproducing randomly again, at least on my machine. The reason why we are hiding the table first is to not show the jumping when resizing happens and the separate thread is needed so that it runs independently of the JavaFX thread while waiting for the delay to pass.","title":"JavaFX TableView text in the cells of the columns seems to jump","body":"<p>I tried this on several machines and it could not be reproducible on most of them. However I was able to reproduce it on an older desktop running windows 11. My guess is that this is a timing issue when rendering the data and calculating the constraints. I don't think it is a big issue since it fixes itself whenever you scroll the table or change the view back and forth, but sometimes you got to do what you got to do and therefore I propose the following solution:</p>\n<p>Remove the constraint from the table:</p>\n<pre><code>// this.tableViev.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS)\n</code></pre>\n<p>When setting the the table on the second button action:</p>\n<pre><code>buttonPane2.setOnAction(event -&gt; borderPane.setCenter(centerPane2));\n</code></pre>\n<p>Replace it with the following:</p>\n<pre><code>buttonPane2.setOnAction(event -&gt; {\n    borderPane.setCenter(centerPane2);\n    hackyWayToFixTextJumping();\n});\n</code></pre>\n<p>Where the new function is:</p>\n<pre><code>private void hackyWayToFixTextJumping() {\n    tableViev.setVisible(false);\n    TimerTask timerTask = new TimerTask() {\n        @Override\n        public void run() {\n            Platform.runLater(() -&gt; {\n                tableViev.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY);\n                tableViev.setVisible(true);\n            });\n        }\n    };\n    long delay = 10L;\n    Timer timer = new Timer();\n    timer.schedule(timerTask, delay);\n}\n</code></pre>\n<p>You can play around with the delay, but if you go 5 or below you can see the problem reproducing randomly again, at least on my machine. The reason why we are hiding the table first is to not show the jumping when resizing happens and the separate thread is needed so that it runs independently of the JavaFX thread while waiting for the delay to pass.</p>\n"}],"owner":{"account_id":8022892,"reputation":165,"user_id":6050980,"accept_rate":67,"display_name":"droid"},"comment_count":26,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":77399604,"answer_count":3,"score":4,"last_activity_date":1699016101,"creation_date":1698347464,"question_id":77369768,"body_markdown":"When I click the button for showing the pane with the table for the first time (after load) the text in the cells of the columns seems to jump\r\n\r\nMaybe it has to do something with the scrollbar that is being added to the table. If I limit the amounts of rows to what can be in the table without the scrollbar the text is not moving when it is being show for the first time. When the table has been show for the first time it is not moving. \r\n\r\nBelow is example and description on how to reproduce the issue. This is the App.java:\r\n\r\n    package org.example;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.geometry.Insets;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Button;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.control.cell.PropertyValueFactory;\r\n    import javafx.scene.layout.BorderPane;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.scene.text.Text;\r\n    import javafx.stage.Stage;\r\n    \r\n    public class App extends Application {\r\n    \r\n        TableView&lt;TestTable&gt; tableViev;\r\n        ObservableList&lt;TestTable&gt; observableListWithTests;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n    \r\n            this.tableViev = new TableView&lt;&gt;();\r\n            this.observableListWithTests = FXCollections.observableArrayList();\r\n    \r\n            this.tableViev = new TableView&lt;&gt;();\r\n            this.tableViev.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS);\r\n    \r\n            TableColumn&lt;TestTable, Integer&gt; test1 = new TableColumn&lt;&gt;(&quot;Test 1&quot;);\r\n            TableColumn&lt;TestTable, String&gt; test2 = new TableColumn&lt;&gt;(&quot;Test 2&quot;);\r\n            TableColumn&lt;TestTable, String&gt; test3 = new TableColumn&lt;&gt;(&quot;Test 3&quot;);\r\n            TableColumn&lt;TestTable, String&gt; test4 = new TableColumn&lt;&gt;(&quot;Test 4&quot;);\r\n    \r\n            test1.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\r\n            test2.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\r\n            test3.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\r\n            test4.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\r\n    \r\n            test1.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;test1&quot;));\r\n            test2.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;test2&quot;));\r\n            test3.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;test3&quot;));\r\n            test4.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;test3&quot;));\r\n    \r\n            for (int x = 0; x &lt; 50; x++) {\r\n    \r\n                observableListWithTests.add(new TestTable(&quot;Test &quot; + x, &quot;Test &quot; + x , &quot;Test &quot; + x, &quot;Test &quot; + x));\r\n    \r\n            }\r\n    \r\n            tableViev.getColumns().addAll(test1, test2, test3, test4);\r\n            tableViev.setItems(observableListWithTests);\r\n    \r\n            VBox centerPane1 = new VBox();\r\n            centerPane1.setPadding(new Insets(20, 20, 20, 10));\r\n            Text text1 = new Text(&quot;CenterPane 1&quot;);\r\n            centerPane1.getChildren().add(text1);\r\n    \r\n            VBox centerPane2 = new VBox();\r\n            centerPane2.setPadding(new Insets(20, 20, 20, 10));\r\n            centerPane2.getChildren().add(tableViev);\r\n    \r\n            Button buttonPane1 = new Button(&quot;Pane 1&quot;);\r\n            Button buttonPane2 = new Button(&quot;Pane 2&quot;);\r\n    \r\n            BorderPane borderPane = new BorderPane();\r\n    \r\n            borderPane.setCenter(centerPane1);\r\n    \r\n            buttonPane1.setOnAction(event -&gt; borderPane.setCenter(centerPane1));\r\n            buttonPane2.setOnAction(event -&gt; borderPane.setCenter(centerPane2));\r\n    \r\n            VBox vBoxWithButtons = new VBox();\r\n            vBoxWithButtons.setPadding(new Insets(20));\r\n            vBoxWithButtons.setSpacing(10);\r\n            vBoxWithButtons.getChildren().addAll(buttonPane1, buttonPane2);\r\n    \r\n            borderPane.setLeft(vBoxWithButtons);\r\n            var scene = new Scene(borderPane, 640, 480);\r\n    \r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    \r\n    }\r\n\r\nAnd this is the TestTable.java:\r\n\r\n    package org.example;\r\n    \r\n    public class TestTable {\r\n    \r\n        private String test1;\r\n        private String test2;\r\n        private String test3;\r\n        private String test4;\r\n    \r\n        public TestTable(String test1, String test2, String test3, String test4) {\r\n    \r\n            this.test1 = test1;\r\n            this.test2 = test2;\r\n            this.test4 = test3;\r\n            this.test3 = test4;\r\n    \r\n        }\r\n    \r\n        public String getTest1() {\r\n    \r\n            return this.test1;\r\n        }\r\n    \r\n        public void setTest1(String test) {\r\n    \r\n            this.test1 = test;\r\n    \r\n        }\r\n    \r\n        public String getTest2() {\r\n    \r\n            return this.test2;\r\n        }\r\n    \r\n        public void setTest2(String test) {\r\n    \r\n            this.test2 = test;\r\n    \r\n        }\r\n    \r\n        public String getTest4() {\r\n    \r\n            return this.test4;\r\n        }\r\n    \r\n        public void setTest4(String test) {\r\n    \r\n            this.test4 = test;\r\n    \r\n        }\r\n    \r\n        public void setTest3(String test) {\r\n    \r\n            this.test3 = test;\r\n    \r\n        }\r\n    \r\n        public String getTest3() {\r\n    \r\n            return this.test3;\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nOpen the App, &quot;Pane 1&quot; is showing. Click &quot;Pane 2&quot;, pane 2 with the table is showing but the text is moving, its moving fast but enough to notice. Now in the code limit the rows to 10 and redo above -&gt; text is not moving.\r\n\r\nI have searched for options on how to always show the scrollbar but I don&#39;t think that is possible.\r\nMaybe there is a solution for loading the pane without showing it?\r\n\r\nUsing OpenJDK 21. JavaFX 21.\r\n\r\n**Update**: Below screenshots shows the table before and after the moving:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**Update 2**: More screenshots:\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\n  [1]: https://i.stack.imgur.com/2KoSw.png\r\n  [2]: https://i.stack.imgur.com/v7pJd.png\r\n  [3]: https://i.stack.imgur.com/uojEz.png\r\n  [4]: https://i.stack.imgur.com/GGyM7.png\r\n","title":"JavaFX TableView text in the cells of the columns seems to jump","body":"<p>When I click the button for showing the pane with the table for the first time (after load) the text in the cells of the columns seems to jump</p>\n<p>Maybe it has to do something with the scrollbar that is being added to the table. If I limit the amounts of rows to what can be in the table without the scrollbar the text is not moving when it is being show for the first time. When the table has been show for the first time it is not moving.</p>\n<p>Below is example and description on how to reproduce the issue. This is the App.java:</p>\n<pre><code>package org.example;\n\nimport javafx.application.Application;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.BorderPane;\nimport javafx.scene.layout.VBox;\nimport javafx.scene.text.Text;\nimport javafx.stage.Stage;\n\npublic class App extends Application {\n\n    TableView&lt;TestTable&gt; tableViev;\n    ObservableList&lt;TestTable&gt; observableListWithTests;\n\n    @Override\n    public void start(Stage stage) {\n\n        this.tableViev = new TableView&lt;&gt;();\n        this.observableListWithTests = FXCollections.observableArrayList();\n\n        this.tableViev = new TableView&lt;&gt;();\n        this.tableViev.setColumnResizePolicy(TableView.CONSTRAINED_RESIZE_POLICY_ALL_COLUMNS);\n\n        TableColumn&lt;TestTable, Integer&gt; test1 = new TableColumn&lt;&gt;(&quot;Test 1&quot;);\n        TableColumn&lt;TestTable, String&gt; test2 = new TableColumn&lt;&gt;(&quot;Test 2&quot;);\n        TableColumn&lt;TestTable, String&gt; test3 = new TableColumn&lt;&gt;(&quot;Test 3&quot;);\n        TableColumn&lt;TestTable, String&gt; test4 = new TableColumn&lt;&gt;(&quot;Test 4&quot;);\n\n        test1.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\n        test2.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\n        test3.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\n        test4.setStyle(&quot;-fx-text-alignment: center; -fx-alignment: center;&quot;);\n\n        test1.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;test1&quot;));\n        test2.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;test2&quot;));\n        test3.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;test3&quot;));\n        test4.setCellValueFactory(new PropertyValueFactory&lt;&gt;(&quot;test3&quot;));\n\n        for (int x = 0; x &lt; 50; x++) {\n\n            observableListWithTests.add(new TestTable(&quot;Test &quot; + x, &quot;Test &quot; + x , &quot;Test &quot; + x, &quot;Test &quot; + x));\n\n        }\n\n        tableViev.getColumns().addAll(test1, test2, test3, test4);\n        tableViev.setItems(observableListWithTests);\n\n        VBox centerPane1 = new VBox();\n        centerPane1.setPadding(new Insets(20, 20, 20, 10));\n        Text text1 = new Text(&quot;CenterPane 1&quot;);\n        centerPane1.getChildren().add(text1);\n\n        VBox centerPane2 = new VBox();\n        centerPane2.setPadding(new Insets(20, 20, 20, 10));\n        centerPane2.getChildren().add(tableViev);\n\n        Button buttonPane1 = new Button(&quot;Pane 1&quot;);\n        Button buttonPane2 = new Button(&quot;Pane 2&quot;);\n\n        BorderPane borderPane = new BorderPane();\n\n        borderPane.setCenter(centerPane1);\n\n        buttonPane1.setOnAction(event -&gt; borderPane.setCenter(centerPane1));\n        buttonPane2.setOnAction(event -&gt; borderPane.setCenter(centerPane2));\n\n        VBox vBoxWithButtons = new VBox();\n        vBoxWithButtons.setPadding(new Insets(20));\n        vBoxWithButtons.setSpacing(10);\n        vBoxWithButtons.getChildren().addAll(buttonPane1, buttonPane2);\n\n        borderPane.setLeft(vBoxWithButtons);\n        var scene = new Scene(borderPane, 640, 480);\n\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n<p>And this is the TestTable.java:</p>\n<pre><code>package org.example;\n\npublic class TestTable {\n\n    private String test1;\n    private String test2;\n    private String test3;\n    private String test4;\n\n    public TestTable(String test1, String test2, String test3, String test4) {\n\n        this.test1 = test1;\n        this.test2 = test2;\n        this.test4 = test3;\n        this.test3 = test4;\n\n    }\n\n    public String getTest1() {\n\n        return this.test1;\n    }\n\n    public void setTest1(String test) {\n\n        this.test1 = test;\n\n    }\n\n    public String getTest2() {\n\n        return this.test2;\n    }\n\n    public void setTest2(String test) {\n\n        this.test2 = test;\n\n    }\n\n    public String getTest4() {\n\n        return this.test4;\n    }\n\n    public void setTest4(String test) {\n\n        this.test4 = test;\n\n    }\n\n    public void setTest3(String test) {\n\n        this.test3 = test;\n\n    }\n\n    public String getTest3() {\n\n        return this.test3;\n\n    }\n\n}\n</code></pre>\n<p>Open the App, &quot;Pane 1&quot; is showing. Click &quot;Pane 2&quot;, pane 2 with the table is showing but the text is moving, its moving fast but enough to notice. Now in the code limit the rows to 10 and redo above -&gt; text is not moving.</p>\n<p>I have searched for options on how to always show the scrollbar but I don't think that is possible.\nMaybe there is a solution for loading the pane without showing it?</p>\n<p>Using OpenJDK 21. JavaFX 21.</p>\n<p><strong>Update</strong>: Below screenshots shows the table before and after the moving:</p>\n<p><a href=\"https://i.stack.imgur.com/2KoSw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2KoSw.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/v7pJd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v7pJd.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Update 2</strong>: More screenshots:</p>\n<p><a href=\"https://i.stack.imgur.com/uojEz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uojEz.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/GGyM7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GGyM7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","spring-mvc","swagger","openapi"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1699015526,"post_id":77416748,"comment_id":136480808,"body_markdown":"Does it work if you call the endpoint directly from a browser? The content disposition header looks good, that should be enough for most modern browsers.","body":"Does it work if you call the endpoint directly from a browser? The content disposition header looks good, that should be enough for most modern browsers."},{"owner":{"account_id":39252,"reputation":89842,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1699016272,"post_id":77416748,"comment_id":136480974,"body_markdown":"Tip: You can click the &quot;Download&quot; button (in the bottom-right corner of the response text) and save the response to a file. Then you can check if this file opens correctly. https://i.stack.imgur.com/ss5i7.png","body":"Tip: You can click the &quot;Download&quot; button (in the bottom-right corner of the response text) and save the response to a file. Then you can check if this file opens correctly. <a href=\"https://i.stack.imgur.com/ss5i7.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/ss5i7.png</a>"}],"answers":[{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699015883,"creation_date":1699015883,"answer_id":77416804,"question_id":77416748,"body_markdown":"This is just an issue of bad rendering. The OpenAPI response already indicates that it doesn&#39;t recognize the response type. That doesn&#39;t mean it&#39;s a bad one, just that OpenAPI doesn&#39;t support it for rendering. It tries to render it as text but fails there as well. All those question marks in diamonds are bytes that cannot be properly converted to chars - because they aren&#39;t chars.\r\n\r\nWhen you copy this badly rendered response to a file and name it to `.xlsx`, your file does not contain the actual response from the server. All those bytes that could not be formatted have been altered.\r\n\r\nTo properly test this, use a better tool:\r\n* Your browser\r\n* Postman\r\n* curl\r\n* ...","title":"How to generate Excel and download with OpenAPI?","body":"<p>This is just an issue of bad rendering. The OpenAPI response already indicates that it doesn't recognize the response type. That doesn't mean it's a bad one, just that OpenAPI doesn't support it for rendering. It tries to render it as text but fails there as well. All those question marks in diamonds are bytes that cannot be properly converted to chars - because they aren't chars.</p>\n<p>When you copy this badly rendered response to a file and name it to <code>.xlsx</code>, your file does not contain the actual response from the server. All those bytes that could not be formatted have been altered.</p>\n<p>To properly test this, use a better tool:</p>\n<ul>\n<li>Your browser</li>\n<li>Postman</li>\n<li>curl</li>\n<li>...</li>\n</ul>\n"}],"owner":{"account_id":2852205,"reputation":891,"user_id":2449161,"accept_rate":80,"display_name":"2dor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699015883,"creation_date":1699015240,"question_id":77416748,"body_markdown":"I have the following endpoint that creates an excel file and adds it to the outputstream. I would like to view the excel and check that it is constructed correctly but I am unable to download it via OpenAPI. OpenAPI downloads a txt file instead of excel and when changing the extension and opening as an excel, i get error about the format of the file. \r\n\r\nJava endpoint snippet\r\n````\r\n\r\n  @ApiResponses(value = {\r\n          @ApiResponse(responseCode = &quot;200&quot;, content = @Content(mediaType = &quot;application/vnd.ms-excel&quot;))\r\n  @PostMapping(value = &quot;/download-excel&quot;)\r\n  @ResponseStatus(HttpStatus.OK)\r\n  public void getExcelForIds(\r\n          @RequestBody List&lt;Long&gt; ids,\r\n          HttpServletResponse response\r\n  ) throws IOException {\r\n    response.setContentType(&quot;application/vnd.ms-excel&quot;);\r\n    response.setHeader(HttpHeaders.CONTENT_DISPOSITION, &quot;inline;filename=\\&quot;myfilename.xlsx\\&quot;&quot;);\r\n    excelWriter.writeIdsToExcel(ids, response.getOutputStream());\r\n  }\r\n````\r\n\r\nResponse from OpenAPI\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xNtQI.png","title":"How to generate Excel and download with OpenAPI?","body":"<p>I have the following endpoint that creates an excel file and adds it to the outputstream. I would like to view the excel and check that it is constructed correctly but I am unable to download it via OpenAPI. OpenAPI downloads a txt file instead of excel and when changing the extension and opening as an excel, i get error about the format of the file.</p>\n<p>Java endpoint snippet</p>\n<pre><code>\n  @ApiResponses(value = {\n          @ApiResponse(responseCode = &quot;200&quot;, content = @Content(mediaType = &quot;application/vnd.ms-excel&quot;))\n  @PostMapping(value = &quot;/download-excel&quot;)\n  @ResponseStatus(HttpStatus.OK)\n  public void getExcelForIds(\n          @RequestBody List&lt;Long&gt; ids,\n          HttpServletResponse response\n  ) throws IOException {\n    response.setContentType(&quot;application/vnd.ms-excel&quot;);\n    response.setHeader(HttpHeaders.CONTENT_DISPOSITION, &quot;inline;filename=\\&quot;myfilename.xlsx\\&quot;&quot;);\n    excelWriter.writeIdsToExcel(ids, response.getOutputStream());\n  }\n</code></pre>\n<p>Response from OpenAPI\n<a href=\"https://i.stack.imgur.com/xNtQI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xNtQI.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-mvc","annotations","inversion-of-control"],"comments":[{"owner":{"account_id":418541,"reputation":8859,"user_id":795158,"accept_rate":95,"display_name":"Ivaylo Slavov"},"score":18,"creation_date":1447171012,"post_id":6827752,"comment_id":55041873,"body_markdown":"Being a developer with Microsoft background, I recall the semantic definition of services in the old MS SmartClientSoftwareFactory framework (now a long deprecated complex framework for distributed desktop apps). That definition ([nicely documented](https://richnewman.wordpress.com/2007/09/08/introduction-to-services-in-the-cab-introduction-to-the-cabscsf-part-7/) by Rich Newman) defined the services as stateless reusable objects, preferably with singleton scope, that are used to perform business logic operations on other objects passed as arguments. I tend to view Spring services the same way","body":"Being a developer with Microsoft background, I recall the semantic definition of services in the old MS SmartClientSoftwareFactory framework (now a long deprecated complex framework for distributed desktop apps). That definition (<a href=\"https://richnewman.wordpress.com/2007/09/08/introduction-to-services-in-the-cab-introduction-to-the-cabscsf-part-7/\" rel=\"nofollow noreferrer\">nicely documented</a> by Rich Newman) defined the services as stateless reusable objects, preferably with singleton scope, that are used to perform business logic operations on other objects passed as arguments. I tend to view Spring services the same way"},{"owner":{"account_id":348277,"reputation":1874,"user_id":1052099,"accept_rate":60,"display_name":"TriCore"},"score":8,"creation_date":1499229944,"post_id":6827752,"comment_id":76810326,"body_markdown":"Doesn&#39;t matter!! Whatever works for you :) I&#39;ve always hated this about Spring that they always tend to define &quot;rules&quot; for you, which only add trivial value to your application. Not to mention Spring comes with huge stack of its own.","body":"Doesn&#39;t matter!! Whatever works for you :) I&#39;ve always hated this about Spring that they always tend to define &quot;rules&quot; for you, which only add trivial value to your application. Not to mention Spring comes with huge stack of its own."},{"owner":{"account_id":6558676,"reputation":5363,"user_id":5070577,"accept_rate":100,"display_name":"Walfrat"},"score":68,"creation_date":1506610859,"post_id":6827752,"comment_id":79899746,"body_markdown":"@TriCore Sprting is a framework, define &quot;rules&quot; for you is its job :)","body":"@TriCore Sprting is a framework, define &quot;rules&quot; for you is its job :)"},{"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"score":1,"creation_date":1670915259,"post_id":6827752,"comment_id":131977326,"body_markdown":"For an analogy, we can compare them to HTML semantic elements (`main`, `article`, `aside` etc.)","body":"For an analogy, we can compare them to HTML semantic elements (<code>main</code>, <code>article</code>, <code>aside</code> etc.)"},{"owner":{"account_id":241158,"reputation":9333,"user_id":511804,"accept_rate":56,"display_name":"Alexandr"},"score":2,"creation_date":1688883268,"post_id":6827752,"comment_id":135132112,"body_markdown":"@TriCore, I agree mostly with you. Spring originally was a huge improvement, compared to J2EE, and nowdays Spring turned into a monster with such extra complexity. I used for ages CDI, it is way more clear with its DI rules and requirements. An injected POJO, becomes a CDI bean, just cause it is injected. What can be easier? And now compare it with Spring-way.","body":"@TriCore, I agree mostly with you. Spring originally was a huge improvement, compared to J2EE, and nowdays Spring turned into a monster with such extra complexity. I used for ages CDI, it is way more clear with its DI rules and requirements. An injected POJO, becomes a CDI bean, just cause it is injected. What can be easier? And now compare it with Spring-way."}],"answers":[{"comments":[{"owner":{"account_id":1861044,"reputation":1917,"user_id":1901896,"display_name":"Akash5288"},"score":28,"creation_date":1418753250,"post_id":6827820,"comment_id":43452316,"body_markdown":"@Component beans are auto detectable by spring container. You don&#39;t need to define bean in configuration file, it will be automatically detected at runtime by Spring.","body":"@Component beans are auto detectable by spring container. You don&#39;t need to define bean in configuration file, it will be automatically detected at runtime by Spring."}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":1,"down_vote_count":4,"up_vote_count":468,"is_accepted":false,"score":464,"last_activity_date":1312201215,"creation_date":1311671761,"answer_id":6827820,"question_id":6827752,"body_markdown":"They are almost the same - all of them mean that the class is a Spring bean. `@Service`, `@Repository` and `@Controller` are specialized `@Component`s. You can choose to perform specific actions with them. For example:\r\n\r\n- `@Controller` beans are used by spring-mvc\r\n- `@Repository` beans are eligible for persistence exception translation\r\n\r\nAnother thing is that you designate the components semantically to different layers.\r\n\r\nOne thing that `@Component` offers is that you can annotate other annotations with it, and then use them the same way as `@Service`.\r\n\r\nFor example recently I made:\r\n\r\n    @Component\r\n    @Scope(&quot;prototype&quot;)\r\n    public @interface ScheduledJob {..}\r\n\r\nSo all classes annotated with `@ScheduledJob` are spring beans and in addition to that are registered as quartz jobs. You just have to provide code that handles the specific annotation.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>They are almost the same - all of them mean that the class is a Spring bean. <code>@Service</code>, <code>@Repository</code> and <code>@Controller</code> are specialized <code>@Component</code>s. You can choose to perform specific actions with them. For example:</p>\n\n<ul>\n<li><code>@Controller</code> beans are used by spring-mvc</li>\n<li><code>@Repository</code> beans are eligible for persistence exception translation</li>\n</ul>\n\n<p>Another thing is that you designate the components semantically to different layers.</p>\n\n<p>One thing that <code>@Component</code> offers is that you can annotate other annotations with it, and then use them the same way as <code>@Service</code>.</p>\n\n<p>For example recently I made:</p>\n\n<pre><code>@Component\n@Scope(\"prototype\")\npublic @interface ScheduledJob {..}\n</code></pre>\n\n<p>So all classes annotated with <code>@ScheduledJob</code> are spring beans and in addition to that are registered as quartz jobs. You just have to provide code that handles the specific annotation.</p>\n"},{"comments":[{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":4,"creation_date":1695881238,"post_id":6897038,"comment_id":136083448,"body_markdown":"Do I understand correctly that as of today, there&#39;s no functional difference between `@Component`, `@Service`, and `@Repository` save for exception translation in the latter case?","body":"Do I understand correctly that as of today, there&#39;s no functional difference between <code>@Component</code>, <code>@Service</code>, and <code>@Repository</code> save for exception translation in the latter case?"}],"tags":[],"owner":{"account_id":199943,"reputation":84060,"user_id":445543,"accept_rate":85,"display_name":"stivlo"},"comment_count":1,"down_vote_count":7,"up_vote_count":1805,"is_accepted":false,"score":1798,"last_activity_date":1612416936,"creation_date":1312194012,"answer_id":6897038,"question_id":6827752,"body_markdown":"From [Spring Documentation](https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans-stereotype-annotations):\r\n\r\n&gt; The `@Repository` annotation is a marker for any class that fulfils the\r\n&gt; role or stereotype of a repository (also known as Data Access Object\r\n&gt; or DAO). Among the uses of this marker is the automatic translation of\r\n&gt; exceptions, as described in [Exception Translation][1].\r\n&gt; \r\n&gt; Spring provides further stereotype annotations: `@Component`, `@Service`,\r\n&gt; and `@Controller`. `@Component` is a generic stereotype for any\r\n&gt; Spring-managed component. `@Repository`, `@Service`, and `@Controller` are\r\n&gt; specializations of `@Component` for more specific use cases (in the\r\n&gt; persistence, service, and presentation layers, respectively).\r\n&gt; Therefore, you can annotate your component classes with `@Component`,\r\n&gt; but, by annotating them with `@Repository`, `@Service`, or `@Controller`\r\n&gt; instead, your classes are more properly suited for processing by tools\r\n&gt; or associating with aspects. \r\n&gt;\r\n&gt; For example, these stereotype annotations\r\n&gt; make ideal targets for pointcuts. `@Repository`, `@Service`, and\r\n&gt; `@Controller` can also carry additional semantics in future releases of\r\n&gt; the Spring Framework. Thus, if you are choosing between using\r\n&gt; `@Component` or `@Service` for your service layer, `@Service` is clearly the\r\n&gt; better choice. Similarly, as stated earlier, `@Repository` is already\r\n&gt; supported as a marker for automatic exception translation in your\r\n&gt; persistence layer.\r\n\r\n| Annotation     | Meaning                                             |\r\n| -------------- | --------------------------------------------------- |\r\n|  `@Component`  | generic stereotype for any Spring-managed component |\r\n|  `@Repository` | stereotype for persistence layer                    |\r\n|  `@Service`    | stereotype for service layer                        |\r\n|  `@Controller` | stereotype for presentation layer (spring-mvc)      |\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/data-access.html#orm-exception-translation","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>From <a href=\"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#beans-stereotype-annotations\" rel=\"noreferrer\">Spring Documentation</a>:</p>\n<blockquote>\n<p>The <code>@Repository</code> annotation is a marker for any class that fulfils the\nrole or stereotype of a repository (also known as Data Access Object\nor DAO). Among the uses of this marker is the automatic translation of\nexceptions, as described in <a href=\"https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/data-access.html#orm-exception-translation\" rel=\"noreferrer\">Exception Translation</a>.</p>\n<p>Spring provides further stereotype annotations: <code>@Component</code>, <code>@Service</code>,\nand <code>@Controller</code>. <code>@Component</code> is a generic stereotype for any\nSpring-managed component. <code>@Repository</code>, <code>@Service</code>, and <code>@Controller</code> are\nspecializations of <code>@Component</code> for more specific use cases (in the\npersistence, service, and presentation layers, respectively).\nTherefore, you can annotate your component classes with <code>@Component</code>,\nbut, by annotating them with <code>@Repository</code>, <code>@Service</code>, or <code>@Controller</code>\ninstead, your classes are more properly suited for processing by tools\nor associating with aspects.</p>\n<p>For example, these stereotype annotations\nmake ideal targets for pointcuts. <code>@Repository</code>, <code>@Service</code>, and\n<code>@Controller</code> can also carry additional semantics in future releases of\nthe Spring Framework. Thus, if you are choosing between using\n<code>@Component</code> or <code>@Service</code> for your service layer, <code>@Service</code> is clearly the\nbetter choice. Similarly, as stated earlier, <code>@Repository</code> is already\nsupported as a marker for automatic exception translation in your\npersistence layer.</p>\n</blockquote>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Annotation</th>\n<th>Meaning</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>@Component</code></td>\n<td>generic stereotype for any Spring-managed component</td>\n</tr>\n<tr>\n<td><code>@Repository</code></td>\n<td>stereotype for persistence layer</td>\n</tr>\n<tr>\n<td><code>@Service</code></td>\n<td>stereotype for service layer</td>\n</tr>\n<tr>\n<td><code>@Controller</code></td>\n<td>stereotype for presentation layer (spring-mvc)</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":[],"owner":{"account_id":2004515,"reputation":537,"user_id":1794781,"display_name":"Das"},"comment_count":0,"down_vote_count":2,"up_vote_count":54,"is_accepted":false,"score":52,"last_activity_date":1351873636,"creation_date":1351872345,"answer_id":13198943,"question_id":6827752,"body_markdown":"Use of `@Service` and `@Repository` annotations are important from database connection perspective.\r\n\r\n1. Use `@Service` for all your web service type of DB connections\r\n2. Use `@Repository` for all your stored proc DB connections\r\n\r\nIf you do not use the proper annotations, you may face commit exceptions overridden by rollback transactions. You will see exceptions during stress load test that is related to roll back JDBC transactions.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>Use of <code>@Service</code> and <code>@Repository</code> annotations are important from database connection perspective.</p>\n\n<ol>\n<li>Use <code>@Service</code> for all your web service type of DB connections</li>\n<li>Use <code>@Repository</code> for all your stored proc DB connections</li>\n</ol>\n\n<p>If you do not use the proper annotations, you may face commit exceptions overridden by rollback transactions. You will see exceptions during stress load test that is related to roll back JDBC transactions.</p>\n"},{"tags":[],"owner":{"account_id":2675746,"reputation":2464,"user_id":2334534,"accept_rate":50,"display_name":"Ajit Singh"},"comment_count":0,"down_vote_count":5,"up_vote_count":89,"is_accepted":false,"score":84,"last_activity_date":1522031166,"creation_date":1368622125,"answer_id":16565447,"question_id":6827752,"body_markdown":"&gt; Spring 2.5 introduces further stereotype annotations: @Component, @Service and @Controller. @Component serves as a generic stereotype for any Spring-managed component; whereas, @Repository, @Service, and @Controller serve as specializations of @Component for more specific use cases (e.g., in the persistence, service, and presentation layers, respectively). What this means is that you can annotate your component classes with @Component, but by annotating them with @Repository, @Service, or @Controller instead, your classes are more properly suited for processing by tools or associating with aspects. For example, these stereotype annotations make ideal targets for pointcuts. Of course, it is also possible that @Repository, @Service, and @Controller may carry additional semantics in future releases of the Spring Framework. Thus, if you are making a decision between using @Component or @Service for your service layer, @Service is clearly the better choice. Similarly, as stated above, @Repository is already supported as a marker for automatic exception translation in your persistence layer.\r\n\r\n&gt;     @Component – Indicates a auto scan component.\r\n    @Repository – Indicates DAO component in the persistence layer.\r\n    @Service – Indicates a Service component in the business layer.\r\n    @Controller – Indicates a controller component in the presentation layer.\r\n\r\n\r\nreference :- [Spring Documentation - Classpath scanning, managed components and writing configurations using Java ][1]  \r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s12.html","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<blockquote>\n  <p>Spring 2.5 introduces further stereotype annotations: @Component, @Service and @Controller. @Component serves as a generic stereotype for any Spring-managed component; whereas, @Repository, @Service, and @Controller serve as specializations of @Component for more specific use cases (e.g., in the persistence, service, and presentation layers, respectively). What this means is that you can annotate your component classes with @Component, but by annotating them with @Repository, @Service, or @Controller instead, your classes are more properly suited for processing by tools or associating with aspects. For example, these stereotype annotations make ideal targets for pointcuts. Of course, it is also possible that @Repository, @Service, and @Controller may carry additional semantics in future releases of the Spring Framework. Thus, if you are making a decision between using @Component or @Service for your service layer, @Service is clearly the better choice. Similarly, as stated above, @Repository is already supported as a marker for automatic exception translation in your persistence layer.</p>\n\n<pre><code>@Component – Indicates a auto scan component.\n@Repository – Indicates DAO component in the persistence layer.\n@Service – Indicates a Service component in the business layer.\n@Controller – Indicates a controller component in the presentation layer.\n</code></pre>\n</blockquote>\n\n<p>reference :- <a href=\"https://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s12.html\" rel=\"noreferrer\">Spring Documentation - Classpath scanning, managed components and writing configurations using Java </a>  </p>\n"},{"tags":[],"owner":{"account_id":992965,"reputation":524,"user_id":1009686,"accept_rate":0,"display_name":"Manjush"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1689081580,"creation_date":1392056497,"answer_id":21684996,"question_id":6827752,"body_markdown":"Even if we interchange `@Component` or `@Repository` or `@Service`,\r\nit will behave the same, but one aspect is that they won&#39;t be able to catch some specific exception related to DAO instead of Repository if we use `@Component` or `@Service`.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>Even if we interchange <code>@Component</code> or <code>@Repository</code> or <code>@Service</code>,\nit will behave the same, but one aspect is that they won't be able to catch some specific exception related to DAO instead of Repository if we use <code>@Component</code> or <code>@Service</code>.</p>\n"},{"comments":[{"owner":{"account_id":558626,"reputation":1783,"user_id":921075,"accept_rate":87,"display_name":"dtc"},"score":31,"creation_date":1461704712,"post_id":22628498,"comment_id":61318197,"body_markdown":"these answers are all nice and all but im pretty sure what most of us want is some code examples of the features that components like service offers that we can more concretely put in our head rather than just a general description like &quot;business logic&quot; belongs in this object. otherwise, we still assume &quot;oh that&#39;s great and everything but i can still apply the same code to component&quot;","body":"these answers are all nice and all but im pretty sure what most of us want is some code examples of the features that components like service offers that we can more concretely put in our head rather than just a general description like &quot;business logic&quot; belongs in this object. otherwise, we still assume &quot;oh that&#39;s great and everything but i can still apply the same code to component&quot;"}],"tags":[],"owner":{"account_id":3922468,"reputation":6689,"user_id":3244185,"display_name":"Harshal Patil"},"comment_count":1,"down_vote_count":0,"up_vote_count":251,"is_accepted":false,"score":251,"last_activity_date":1523395723,"creation_date":1395734401,"answer_id":22628498,"question_id":6827752,"body_markdown":"In Spring `@Component`, `@Service`, `@Controller`, and `@Repository` are Stereotype annotations which are used for:\r\n\r\n`@Controller:` where your **request** **mapping from presentation page** done i.e. Presentation layer won&#39;t go to any other file it goes directly to `@Controller` class and checks for requested path in `@RequestMapping` annotation which written before method calls if necessary.\r\n\r\n`@Service`: All business logic is here i.e. Data related calculations and all.This annotation of business layer in which our user not directly call persistence method so it will call this method using this annotation. **It will request @Repository as per user request**\r\n\r\n`@Repository`: This is Persistence layer(Data Access Layer) of application which used to get data from the database. i.e. **all the Database related operations are done by the repository.**\r\n\r\n`@Component` - Annotate your other components (for example REST resource classes) with a component stereotype.\r\n\r\n&gt; Indicates that an annotated class is a &quot;[component][1]&quot;. Such classes are\r\n&gt; considered as candidates for auto-detection when using\r\n&gt; annotation-based configuration and classpath scanning.\r\n&gt; \r\n&gt; Other class-level annotations may be considered as identifying a\r\n&gt; component as well, typically a special kind of component: e.g. the\r\n&gt; @Repository annotation or AspectJ&#39;s @Aspect annotation.\r\n\r\n\r\n\r\n[![enter image description here][2]][1]\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/stereotype/Component.html\r\n  [2]: http://i.stack.imgur.com/nXfyV.jpg","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>In Spring <code>@Component</code>, <code>@Service</code>, <code>@Controller</code>, and <code>@Repository</code> are Stereotype annotations which are used for:</p>\n\n<p><code>@Controller:</code> where your <strong>request</strong> <strong>mapping from presentation page</strong> done i.e. Presentation layer won't go to any other file it goes directly to <code>@Controller</code> class and checks for requested path in <code>@RequestMapping</code> annotation which written before method calls if necessary.</p>\n\n<p><code>@Service</code>: All business logic is here i.e. Data related calculations and all.This annotation of business layer in which our user not directly call persistence method so it will call this method using this annotation. <strong>It will request @Repository as per user request</strong></p>\n\n<p><code>@Repository</code>: This is Persistence layer(Data Access Layer) of application which used to get data from the database. i.e. <strong>all the Database related operations are done by the repository.</strong></p>\n\n<p><code>@Component</code> - Annotate your other components (for example REST resource classes) with a component stereotype.</p>\n\n<blockquote>\n  <p>Indicates that an annotated class is a \"<a href=\"http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/stereotype/Component.html\" rel=\"noreferrer\">component</a>\". Such classes are\n  considered as candidates for auto-detection when using\n  annotation-based configuration and classpath scanning.</p>\n  \n  <p>Other class-level annotations may be considered as identifying a\n  component as well, typically a special kind of component: e.g. the\n  @Repository annotation or AspectJ's @Aspect annotation.</p>\n</blockquote>\n\n<p><a href=\"http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/stereotype/Component.html\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nXfyV.jpg\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":3567406,"reputation":1501,"user_id":3170609,"accept_rate":32,"display_name":"user107986"},"score":10,"creation_date":1441538962,"post_id":23821409,"comment_id":52711429,"body_markdown":"I got a fundamental question - are annotations used by spring mechanism or they are just for the programmer to remember what those pieces of code do?","body":"I got a fundamental question - are annotations used by spring mechanism or they are just for the programmer to remember what those pieces of code do?"},{"owner":{"account_id":2252016,"reputation":6192,"user_id":1984049,"accept_rate":74,"display_name":"Oliver"},"score":33,"creation_date":1441975079,"post_id":23821409,"comment_id":52904986,"body_markdown":"@user107986 They are mainly for the Programmer to remember layers in the application. However `@Respository` also has automatic exception translation feature. Like when an exception occurs in a `@Repository` there is usually a handler for that exception and there is no need to add try catch blocks in the DAO class. It is used along with PersistenceExceptionTranslationPostProcessor","body":"@user107986 They are mainly for the Programmer to remember layers in the application. However <code>@Respository</code> also has automatic exception translation feature. Like when an exception occurs in a <code>@Repository</code> there is usually a handler for that exception and there is no need to add try catch blocks in the DAO class. It is used along with PersistenceExceptionTranslationPostProcessor"},{"owner":{"account_id":5203808,"reputation":632,"user_id":4179032,"display_name":"Leponzo"},"score":0,"creation_date":1671572403,"post_id":23821409,"comment_id":132127353,"body_markdown":"See https://stackoverflow.com/a/61298214/4179032 for more details on the &quot;+ some more specific functionality&quot;.","body":"See <a href=\"https://stackoverflow.com/a/61298214/4179032\">stackoverflow.com/a/61298214/4179032</a> for more details on the &quot;+ some more specific functionality&quot;."}],"tags":[],"owner":{"account_id":2252016,"reputation":6192,"user_id":1984049,"accept_rate":74,"display_name":"Oliver"},"comment_count":3,"down_vote_count":2,"up_vote_count":419,"is_accepted":false,"score":417,"last_activity_date":1589309333,"creation_date":1400822142,"answer_id":23821409,"question_id":6827752,"body_markdown":"@Component is equivalent to \r\n\r\n    &lt;bean&gt;\r\n\r\n**@Service, @Controller, @Repository = {@Component + some more special functionality}**\r\n\r\nThat mean Service, The Controller and Repository are functionally the same. \r\n\r\n The three annotations are used to separate **&quot;Layers&quot;** in your application, \r\n\r\n - Controllers just do stuff like dispatching, forwarding, calling service methods etc.\r\n - Service Hold business Logic, Calculations etc.\r\n - Repository are the DAOs (Data Access Objects), they access the database directly.\r\n\r\nNow you may ask why separate them: (I assume you know AOP-Aspect Oriented Programming) \r\n\r\nLet&#39;s say you want to Monitors the Activity of the DAO Layer only. You will write an Aspect (A class) class that does some logging before and after every method of your DAO is invoked, you are able to do that using AOP as you have three distinct Layers and are not mixed.\r\n\r\nSo you can do logging of DAO  &quot;around&quot;, &quot;before&quot; or &quot;after&quot; the DAO methods. You could do that because you had a DAO in the first place. What you just achieved is **Separation of concerns or tasks.**\r\n\r\nImagine if there were only one annotation @Controller, then this component will have dispatching, business logic and accessing database all mixed, so dirty code!\r\n\r\n*Above mentioned is one very common scenario, there are many more use cases of why to use three annotations.*\r\n\r\n\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>@Component is equivalent to </p>\n\n<pre><code>&lt;bean&gt;\n</code></pre>\n\n<p><strong>@Service, @Controller, @Repository = {@Component + some more special functionality}</strong></p>\n\n<p>That mean Service, The Controller and Repository are functionally the same. </p>\n\n<p>The three annotations are used to separate <strong>\"Layers\"</strong> in your application, </p>\n\n<ul>\n<li>Controllers just do stuff like dispatching, forwarding, calling service methods etc.</li>\n<li>Service Hold business Logic, Calculations etc.</li>\n<li>Repository are the DAOs (Data Access Objects), they access the database directly.</li>\n</ul>\n\n<p>Now you may ask why separate them: (I assume you know AOP-Aspect Oriented Programming) </p>\n\n<p>Let's say you want to Monitors the Activity of the DAO Layer only. You will write an Aspect (A class) class that does some logging before and after every method of your DAO is invoked, you are able to do that using AOP as you have three distinct Layers and are not mixed.</p>\n\n<p>So you can do logging of DAO  \"around\", \"before\" or \"after\" the DAO methods. You could do that because you had a DAO in the first place. What you just achieved is <strong>Separation of concerns or tasks.</strong></p>\n\n<p>Imagine if there were only one annotation @Controller, then this component will have dispatching, business logic and accessing database all mixed, so dirty code!</p>\n\n<p><em>Above mentioned is one very common scenario, there are many more use cases of why to use three annotations.</em></p>\n"},{"tags":[],"owner":{"account_id":1293741,"reputation":4913,"user_id":1245337,"accept_rate":100,"display_name":"atish shimpi"},"comment_count":0,"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1405682581,"creation_date":1405682581,"answer_id":24823877,"question_id":6827752,"body_markdown":"**@Repository** **@Service** and **@Controller** are serves as specialization of @Component for more specific use on that basis you can replace @Service to @Component but in this case you loose the specialization.\r\n\r\n    1. **@Repository**   - Automatic exception translation in your persistence layer.\r\n    2. **@Service**      - It indicates that the annotated class is providing a business service to other layers within the application.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p><strong>@Repository</strong> <strong>@Service</strong> and <strong>@Controller</strong> are serves as specialization of @Component for more specific use on that basis you can replace @Service to @Component but in this case you loose the specialization.</p>\n\n<pre><code>1. **@Repository**   - Automatic exception translation in your persistence layer.\n2. **@Service**      - It indicates that the annotated class is providing a business service to other layers within the application.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3704449,"reputation":575,"user_id":3083363,"accept_rate":0,"display_name":"Anil Amane"},"comment_count":0,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1491192386,"creation_date":1429978768,"answer_id":29867697,"question_id":6827752,"body_markdown":"all these annotations are type of stereo type type of annotation,the difference between these three annotations are \r\n\r\n&gt;  - If we add the @Component then it tells the role of class is a component class it means it is a class consisting some logic,but it\r\n&gt; does not tell whether a class containing a specifically business or\r\n&gt; persistence or controller logic so we don&#39;t use directly this\r\n&gt; @Component annotation\r\n&gt;  - If we add @Service annotation then it tells that a role of class consisting business logic\r\n&gt;  - If we add @Repository on top of class then it tells that a class consisting persistence logic\r\n&gt;  - Here @Component is a base annotation for @Service,@Repository and @Controller annotations\r\n\r\nfor example \r\n\r\n    package com.spring.anno;\r\n    @Service\r\n    public class TestBean\r\n    {\r\n        public void m1()\r\n        {\r\n           //business code\r\n        }\r\n    }\r\n    \r\n    package com.spring.anno;\r\n    @Repository\r\n    public class TestBean\r\n    {\r\n        public void update()\r\n        {\r\n           //persistence code\r\n        }\r\n    }\r\n\r\n - whenever we adds the `@Service` or `@Repositroy` or `@Controller` annotation by default `@Component` annotation is going to existence on top of the class\r\n\r\n  \r\n\r\n \r\n\r\n ","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>all these annotations are type of stereo type type of annotation,the difference between these three annotations are </p>\n\n<blockquote>\n  <ul>\n  <li>If we add the @Component then it tells the role of class is a component class it means it is a class consisting some logic,but it\n  does not tell whether a class containing a specifically business or\n  persistence or controller logic so we don't use directly this\n  @Component annotation</li>\n  <li>If we add @Service annotation then it tells that a role of class consisting business logic</li>\n  <li>If we add @Repository on top of class then it tells that a class consisting persistence logic</li>\n  <li>Here @Component is a base annotation for @Service,@Repository and @Controller annotations</li>\n  </ul>\n</blockquote>\n\n<p>for example </p>\n\n<pre><code>package com.spring.anno;\n@Service\npublic class TestBean\n{\n    public void m1()\n    {\n       //business code\n    }\n}\n\npackage com.spring.anno;\n@Repository\npublic class TestBean\n{\n    public void update()\n    {\n       //persistence code\n    }\n}\n</code></pre>\n\n<ul>\n<li>whenever we adds the <code>@Service</code> or <code>@Repositroy</code> or <code>@Controller</code> annotation by default <code>@Component</code> annotation is going to existence on top of the class</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7090908,"reputation":596,"user_id":5426099,"display_name":"tech.yenduri"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1576454956,"creation_date":1448514633,"answer_id":33931001,"question_id":6827752,"body_markdown":"There is no difference between `@Component`, `@Service`, `@Controller`, `@Repository`.\r\n`@Component` is the Generic annotation to represent the component of our MVC. But there will be several components as part of our MVC application like service layer components, persistence layer components and presentation layer components. So to differentiate them Spring people have given the other three annotations also.\r\n\r\n - To represent persistence layer components: `@Repository`\r\n - To represent service layer components: `@Service`\r\n - To represent presentation layer components: `@Controller`\r\n - or else you can use `@Component` for all of them.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>There is no difference between <code>@Component</code>, <code>@Service</code>, <code>@Controller</code>, <code>@Repository</code>.\n<code>@Component</code> is the Generic annotation to represent the component of our MVC. But there will be several components as part of our MVC application like service layer components, persistence layer components and presentation layer components. So to differentiate them Spring people have given the other three annotations also.</p>\n\n<ul>\n<li>To represent persistence layer components: <code>@Repository</code></li>\n<li>To represent service layer components: <code>@Service</code></li>\n<li>To represent presentation layer components: <code>@Controller</code></li>\n<li>or else you can use <code>@Component</code> for all of them.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1483618,"reputation":331,"user_id":1392352,"display_name":"hardeep thakur"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1529180636,"creation_date":1451797848,"answer_id":34573538,"question_id":6827752,"body_markdown":"Spring provides four different types of auto component scan annotations, they are `@Component`, `@Service`, `@Repository` and `@Controller`. Technically, there is no difference between them, but every auto component scan annotation should be used for a special purpose and within the defined layer. \r\n\r\n`@Component`: It is a basic auto component scan annotation, it indicates annotated class is an auto scan component.\r\n\r\n`@Controller`: Annotated class indicates that it is a controller component, and mainly used at the presentation layer.\r\n\r\n`@Service`: It indicates annotated class is a Service component in the business layer.\r\n\r\n`@Repository`: You need to use this annotation within the persistence layer, this acts like database repository.\r\n\r\nOne should choose a more specialised form of `@Component` while annotating their class as this annotation may contain specific behavior going forward.\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>Spring provides four different types of auto component scan annotations, they are <code>@Component</code>, <code>@Service</code>, <code>@Repository</code> and <code>@Controller</code>. Technically, there is no difference between them, but every auto component scan annotation should be used for a special purpose and within the defined layer. </p>\n\n<p><code>@Component</code>: It is a basic auto component scan annotation, it indicates annotated class is an auto scan component.</p>\n\n<p><code>@Controller</code>: Annotated class indicates that it is a controller component, and mainly used at the presentation layer.</p>\n\n<p><code>@Service</code>: It indicates annotated class is a Service component in the business layer.</p>\n\n<p><code>@Repository</code>: You need to use this annotation within the persistence layer, this acts like database repository.</p>\n\n<p>One should choose a more specialised form of <code>@Component</code> while annotating their class as this annotation may contain specific behavior going forward.</p>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"comment_count":0,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1529179708,"creation_date":1462335824,"answer_id":37018430,"question_id":6827752,"body_markdown":"We can answer this according to java standard\r\n\r\nReferring to `JSR-330`, which is now supported by spring, you can only use `@Named` to define a bean (Somehow `@Named=@Component`). So according to this standard, there seems that there is no use to define stereotypes (like `@Repository`, `@Service`, `@Controller`) to categories beans. \r\n\r\nBut spring user these different annotations in different for the specific use, for example: \r\n\r\n 1. Help developers define a better category for the competent. This categorizing may become helpful in some cases. (For example when you are using `aspect-oriented`, these can be a good candidate for `pointcuts`)\r\n 2. `@Repository` annotation will add some functionality to your bean (some automatic exception translation to your bean persistence layer).\r\n 3. If you are using spring MVC, the `@RequestMapping` can only be added to classes which are annotated by `@Controller`.\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>We can answer this according to java standard</p>\n\n<p>Referring to <code>JSR-330</code>, which is now supported by spring, you can only use <code>@Named</code> to define a bean (Somehow <code>@Named=@Component</code>). So according to this standard, there seems that there is no use to define stereotypes (like <code>@Repository</code>, <code>@Service</code>, <code>@Controller</code>) to categories beans. </p>\n\n<p>But spring user these different annotations in different for the specific use, for example: </p>\n\n<ol>\n<li>Help developers define a better category for the competent. This categorizing may become helpful in some cases. (For example when you are using <code>aspect-oriented</code>, these can be a good candidate for <code>pointcuts</code>)</li>\n<li><code>@Repository</code> annotation will add some functionality to your bean (some automatic exception translation to your bean persistence layer).</li>\n<li>If you are using spring MVC, the <code>@RequestMapping</code> can only be added to classes which are annotated by <code>@Controller</code>.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6701025,"reputation":698,"user_id":5167492,"accept_rate":81,"display_name":"Quan Nguyen"},"comment_count":0,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1466426342,"creation_date":1466415023,"answer_id":37918997,"question_id":6827752,"body_markdown":"In Spring 4, latest version:\r\n\r\n&gt; The @Repository annotation is a marker for any class that fulfills the\r\n&gt; role or stereotype of a repository (also known as Data Access Object\r\n&gt; or DAO). Among the uses of this marker is the automatic translation of\r\n&gt; exceptions as described in Section 20.2.2, “Exception translation”.\r\n&gt; \r\n&gt; Spring provides further stereotype annotations: @Component, @Service,\r\n&gt; and @Controller. @Component is a generic stereotype for any\r\n&gt; Spring-managed component. @Repository, @Service, and @Controller are\r\n&gt; specializations of @Component for more specific use cases, for\r\n&gt; example, in the persistence, service, and presentation layers,\r\n&gt; respectively. Therefore, you can annotate your component classes with\r\n&gt; @Component, but by annotating them with @Repository, @Service, or\r\n&gt; @Controller instead, your classes are more properly suited for\r\n&gt; processing by tools or associating with aspects. For example, these\r\n&gt; stereotype annotations make ideal targets for pointcuts. It is also\r\n&gt; possible that @Repository, @Service, and @Controller may carry\r\n&gt; additional semantics in future releases of the Spring Framework. Thus,\r\n&gt; if you are choosing between using @Component or @Service for your\r\n&gt; service layer, @Service is clearly the better choice. Similarly, as\r\n&gt; stated above, @Repository is already supported as a marker for\r\n&gt; automatic exception translation in your persistence layer.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>In Spring 4, latest version:</p>\n\n<blockquote>\n  <p>The @Repository annotation is a marker for any class that fulfills the\n  role or stereotype of a repository (also known as Data Access Object\n  or DAO). Among the uses of this marker is the automatic translation of\n  exceptions as described in Section 20.2.2, “Exception translation”.</p>\n  \n  <p>Spring provides further stereotype annotations: @Component, @Service,\n  and @Controller. @Component is a generic stereotype for any\n  Spring-managed component. @Repository, @Service, and @Controller are\n  specializations of @Component for more specific use cases, for\n  example, in the persistence, service, and presentation layers,\n  respectively. Therefore, you can annotate your component classes with\n  @Component, but by annotating them with @Repository, @Service, or\n  @Controller instead, your classes are more properly suited for\n  processing by tools or associating with aspects. For example, these\n  stereotype annotations make ideal targets for pointcuts. It is also\n  possible that @Repository, @Service, and @Controller may carry\n  additional semantics in future releases of the Spring Framework. Thus,\n  if you are choosing between using @Component or @Service for your\n  service layer, @Service is clearly the better choice. Similarly, as\n  stated above, @Repository is already supported as a marker for\n  automatic exception translation in your persistence layer.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":9280571,"reputation":415,"user_id":6891873,"accept_rate":62,"display_name":"NodziGames"},"score":60,"creation_date":1530086741,"post_id":38549461,"comment_id":89105490,"body_markdown":"Fantastic Explanation. You&#39;ve cleared up a lot of my misunderstandings. Coming from a university where we built all our projects from the bottom up, I had difficulty understanding why Spring Applications just worked even though you&#39;re not explicitly linking the program together yourself. The annotations make a lot of sense now, thank you!","body":"Fantastic Explanation. You&#39;ve cleared up a lot of my misunderstandings. Coming from a university where we built all our projects from the bottom up, I had difficulty understanding why Spring Applications just worked even though you&#39;re not explicitly linking the program together yourself. The annotations make a lot of sense now, thank you!"}],"tags":[],"owner":{"account_id":2375630,"reputation":30614,"user_id":2815219,"display_name":"Raman Sahasi"},"comment_count":1,"down_vote_count":0,"up_vote_count":1052,"is_accepted":false,"score":1052,"last_activity_date":1558599219,"creation_date":1469342603,"answer_id":38549461,"question_id":6827752,"body_markdown":"As many of the answers already state what these annotations are used for, we&#39;ll here focus on some minor differences among them.  \r\n\r\n&gt; First the **Similarity**   \r\n&gt;\r\n&gt; First point worth highlighting again is that **with respect to scan-auto-detection and dependency injection for BeanDefinition** all these annotations (viz., @Component, @Service,\r\n&gt; @Repository, @Controller) are the same. **We can use one in place\r\n&gt; of another and can still get our way around.**\r\n\r\n\r\n----------\r\n\r\n## Differences between @Component, @Repository, @Controller and @Service ##\r\n\r\n&gt; **@Component**\r\n\r\nThis is a general-purpose stereotype annotation indicating that the class is a spring component.\r\n \r\n***What’s special about @Component***  \r\n`&lt;context:component-scan&gt;` only scans `@Component` and does not look for `@Controller`, `@Service` and `@Repository` in general. They are scanned because they themselves are annotated with `@Component`.\r\n\r\nJust take a look at `@Controller`, `@Service` and `@Repository` annotation definitions:\r\n\r\n    @Component\r\n    public @interface Service {\r\n    \t….\r\n    }\r\n\r\n&#160;\r\n\r\n    @Component\r\n    public @interface Repository {\r\n    \t….\r\n    }\r\n\r\n&#160;\r\n\r\n    @Component\r\n    public @interface Controller {\r\n    \t…\r\n    }\r\n\r\n\r\nThus, it’s not wrong to say that `@Controller`, `@Service` and `@Repository` are special types of `@Component` annotation. `&lt;context:component-scan&gt;` picks them up and registers their following classes as beans, just as if they were annotated with `@Component`.\r\n\r\nSpecial type annotations are also scanned, because they themselves are annotated with `@Component` annotation, which means they are also `@Component`s. If we define our own custom annotation and annotate it with `@Component`, it will also get scanned with `&lt;context:component-scan&gt;`\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; **@Repository**\r\n\r\nThis is to indicate that the class defines a data repository.\r\n\r\n***What’s special about @Repository?***  \r\n\r\nIn addition to pointing out, that this is an *Annotation based Configuration*, `@Repository`’s job is to catch platform specific exceptions and re-throw them as one of Spring’s unified unchecked exception. For this, we’re provided with `PersistenceExceptionTranslationPostProcessor`, that we are required to add in our Spring’s application context like this:\r\n\r\n    &lt;bean class=&quot;org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor&quot;/&gt;\r\n\r\nThis bean post processor adds an advisor to any bean that’s annotated with `@Repository` so that any platform-specific exceptions are caught and then re-thrown as one of Spring’s unchecked data access exceptions.\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; **@Controller**\r\n\r\nThe `@Controller` annotation indicates that a particular class serves the role of a controller. The `@Controller` annotation acts as a stereotype for the annotated class, indicating its role.\r\n\r\n***What’s special about @Controller?***  \r\n\r\nWe cannot switch this annotation with any other like `@Service` or `@Repository`, even though they look same. \r\nThe dispatcher scans the classes annotated with `@Controller` and detects methods annotated with `@RequestMapping` annotations within them. We can use `@RequestMapping` on/in only those methods whose classes are annotated with `@Controller` and it will **NOT** work with `@Component`, `@Service`, `@Repository` etc...\r\n\r\n&lt;sub&gt;_Note: If a class is already registered as a bean through any alternate method, like through `@Bean` or through `@Component`, `@Service` etc... annotations, then `@RequestMapping` can be picked if the class is also annotated with `@RequestMapping` annotation. But that&#39;s a different scenario._&lt;/sub&gt;\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; **@Service**\r\n\r\n`@Service` beans hold the business logic and call methods in the repository layer. \r\n\r\n***What’s special about @Service?***  \r\n\r\nApart from the fact that it&#39;s used to indicate, that it&#39;s holding the business logic, there’s nothing else noticeable in this annotation; but who knows, Spring may add some additional exceptional in future.\r\n\r\n\r\n----------\r\n\r\n\r\n&gt; ***What else?***\r\n\r\nSimilar to above, in the future Spring may add special functionalities for `@Service`, `@Controller` and `@Repository` based on their layering conventions. Hence, it&#39;s always a good idea to respect the convention and use it in line with layers.\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>As many of the answers already state what these annotations are used for, we'll here focus on some minor differences among them.  </p>\n\n<blockquote>\n  <p>First the <strong>Similarity</strong>   </p>\n  \n  <p>First point worth highlighting again is that <strong>with respect to scan-auto-detection and dependency injection for BeanDefinition</strong> all these annotations (viz., @Component, @Service,\n  @Repository, @Controller) are the same. <strong>We can use one in place\n  of another and can still get our way around.</strong></p>\n</blockquote>\n\n<hr>\n\n<h2>Differences between @Component, @Repository, @Controller and @Service</h2>\n\n<blockquote>\n  <p><strong>@Component</strong></p>\n</blockquote>\n\n<p>This is a general-purpose stereotype annotation indicating that the class is a spring component.</p>\n\n<p><strong><em>What’s special about @Component</em></strong><br>\n<code>&lt;context:component-scan&gt;</code> only scans <code>@Component</code> and does not look for <code>@Controller</code>, <code>@Service</code> and <code>@Repository</code> in general. They are scanned because they themselves are annotated with <code>@Component</code>.</p>\n\n<p>Just take a look at <code>@Controller</code>, <code>@Service</code> and <code>@Repository</code> annotation definitions:</p>\n\n<pre><code>@Component\npublic @interface Service {\n    ….\n}\n</code></pre>\n\n<p> </p>\n\n<pre><code>@Component\npublic @interface Repository {\n    ….\n}\n</code></pre>\n\n<p> </p>\n\n<pre><code>@Component\npublic @interface Controller {\n    …\n}\n</code></pre>\n\n<p>Thus, it’s not wrong to say that <code>@Controller</code>, <code>@Service</code> and <code>@Repository</code> are special types of <code>@Component</code> annotation. <code>&lt;context:component-scan&gt;</code> picks them up and registers their following classes as beans, just as if they were annotated with <code>@Component</code>.</p>\n\n<p>Special type annotations are also scanned, because they themselves are annotated with <code>@Component</code> annotation, which means they are also <code>@Component</code>s. If we define our own custom annotation and annotate it with <code>@Component</code>, it will also get scanned with <code>&lt;context:component-scan&gt;</code></p>\n\n<hr>\n\n<blockquote>\n  <p><strong>@Repository</strong></p>\n</blockquote>\n\n<p>This is to indicate that the class defines a data repository.</p>\n\n<p><strong><em>What’s special about @Repository?</em></strong>  </p>\n\n<p>In addition to pointing out, that this is an <em>Annotation based Configuration</em>, <code>@Repository</code>’s job is to catch platform specific exceptions and re-throw them as one of Spring’s unified unchecked exception. For this, we’re provided with <code>PersistenceExceptionTranslationPostProcessor</code>, that we are required to add in our Spring’s application context like this:</p>\n\n<pre><code>&lt;bean class=\"org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor\"/&gt;\n</code></pre>\n\n<p>This bean post processor adds an advisor to any bean that’s annotated with <code>@Repository</code> so that any platform-specific exceptions are caught and then re-thrown as one of Spring’s unchecked data access exceptions.</p>\n\n<hr>\n\n<blockquote>\n  <p><strong>@Controller</strong></p>\n</blockquote>\n\n<p>The <code>@Controller</code> annotation indicates that a particular class serves the role of a controller. The <code>@Controller</code> annotation acts as a stereotype for the annotated class, indicating its role.</p>\n\n<p><strong><em>What’s special about @Controller?</em></strong>  </p>\n\n<p>We cannot switch this annotation with any other like <code>@Service</code> or <code>@Repository</code>, even though they look same. \nThe dispatcher scans the classes annotated with <code>@Controller</code> and detects methods annotated with <code>@RequestMapping</code> annotations within them. We can use <code>@RequestMapping</code> on/in only those methods whose classes are annotated with <code>@Controller</code> and it will <strong>NOT</strong> work with <code>@Component</code>, <code>@Service</code>, <code>@Repository</code> etc...</p>\n\n<p><sub><em>Note: If a class is already registered as a bean through any alternate method, like through <code>@Bean</code> or through <code>@Component</code>, <code>@Service</code> etc... annotations, then <code>@RequestMapping</code> can be picked if the class is also annotated with <code>@RequestMapping</code> annotation. But that's a different scenario.</em></sub></p>\n\n<hr>\n\n<blockquote>\n  <p><strong>@Service</strong></p>\n</blockquote>\n\n<p><code>@Service</code> beans hold the business logic and call methods in the repository layer. </p>\n\n<p><strong><em>What’s special about @Service?</em></strong>  </p>\n\n<p>Apart from the fact that it's used to indicate, that it's holding the business logic, there’s nothing else noticeable in this annotation; but who knows, Spring may add some additional exceptional in future.</p>\n\n<hr>\n\n<blockquote>\n  <p><strong><em>What else?</em></strong></p>\n</blockquote>\n\n<p>Similar to above, in the future Spring may add special functionalities for <code>@Service</code>, <code>@Controller</code> and <code>@Repository</code> based on their layering conventions. Hence, it's always a good idea to respect the convention and use it in line with layers.</p>\n"},{"comments":[{"owner":{"account_id":19821320,"reputation":336,"user_id":14517835,"display_name":"Kwaku Biney"},"score":0,"creation_date":1697883108,"post_id":41258961,"comment_id":136337315,"body_markdown":"Quick question. What do you mean by `converting all the unchecked exceptions from the DAO classes`? Converting to what exactly?","body":"Quick question. What do you mean by <code>converting all the unchecked exceptions from the DAO classes</code>? Converting to what exactly?"}],"tags":[],"owner":{"account_id":4849940,"reputation":641,"user_id":3912516,"accept_rate":60,"display_name":"Amol Dixit"},"comment_count":1,"down_vote_count":2,"up_vote_count":19,"is_accepted":false,"score":17,"last_activity_date":1689081724,"creation_date":1482311530,"answer_id":41258961,"question_id":6827752,"body_markdown":"`@Component` is the top-level generic annotation that makes the annotated bean be scanned and available in the DI container.\r\n\r\n`@Repository` is a specialized annotation and it brings the feature of converting all the unchecked exceptions from the DAO classes.\r\n\r\n`@Service` is a specialized annotation. it does not bring any new features as of now but it clarifies the intent of the bean.\r\n\r\n`@Controller` is a specialized annotation that makes the bean MVC aware and allows the use of further annotations like `@RequestMapping` and all such.\r\n\r\nHere are more [details][1].\r\n\r\n\r\n  [1]: http://howtodoinjava.com/spring/spring-core/how-to-use-spring-component-repository-service-and-controller-annotations/","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p><code>@Component</code> is the top-level generic annotation that makes the annotated bean be scanned and available in the DI container.</p>\n<p><code>@Repository</code> is a specialized annotation and it brings the feature of converting all the unchecked exceptions from the DAO classes.</p>\n<p><code>@Service</code> is a specialized annotation. it does not bring any new features as of now but it clarifies the intent of the bean.</p>\n<p><code>@Controller</code> is a specialized annotation that makes the bean MVC aware and allows the use of further annotations like <code>@RequestMapping</code> and all such.</p>\n<p>Here are more <a href=\"http://howtodoinjava.com/spring/spring-core/how-to-use-spring-component-repository-service-and-controller-annotations/\" rel=\"nofollow noreferrer\">details</a>.</p>\n"},{"tags":[],"owner":{"account_id":970000,"reputation":1787,"user_id":992706,"accept_rate":63,"display_name":"Bharath"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1482913139,"creation_date":1482913139,"answer_id":41358034,"question_id":6827752,"body_markdown":"A `@Service` to quote spring documentation,\r\n\r\n&gt; Indicates that an annotated class is a &quot;Service&quot;, **originally defined\r\n&gt; by Domain-Driven Design (Evans, 2003) as &quot;an operation offered as an\r\n&gt; interface that stands alone in the model, with no encapsulated state.&quot;**\r\n&gt; May also indicate that a class is a &quot;Business Service Facade&quot; (in the\r\n&gt; Core J2EE patterns sense), or something similar. This annotation is a\r\n&gt; general-purpose stereotype and individual teams may narrow their\r\n&gt; semantics and use as appropriate.\r\n\r\nIf you look at domain driven design by eric evans, \r\n\r\n&gt; A SERVICE is an operation offered as an interface that stands alone in\r\n&gt; the model, without encapsulating state, as ENTITIES and VALUE OBJECTS\r\n&gt; do. SERVICES are a common pattern in technical frameworks, but they\r\n&gt; can also apply in the domain layer. The name service emphasizes the\r\n&gt; relationship with other objects. Unlike ENTITIES and VALUE OBJECTS, it\r\n&gt; is defined purely in terms of what it can do for a client. A SERVICE\r\n&gt; tends to be named for an activity, rather than an entity—a verb rather\r\n&gt; than a noun. A SERVICE can still have an abstract, intentional\r\n&gt; definition; it just has a different flavor than the definition of an\r\n&gt; object. A SERVICE should still have a defined responsibility, and that\r\n&gt; responsibility and the interface fulfilling it should be defined as\r\n&gt; part of the domain model. Operation names should come from the\r\n&gt; UBIQUITOUS LANGUAGE or be introduced into it. Parameters and results\r\n&gt; should be domain objects. SERVICES should be used judiciously and not\r\n&gt; allowed to strip the ENTITIES and VALUE OBJECTS of all their behavior.\r\n&gt; But when an operation is actually an important domain concept, a\r\n&gt; SERVICE forms a natural part of a MODEL-DRIVEN DESIGN. Declared in the\r\n&gt; model as a SERVICE, rather than as a phony object that doesn&#39;t\r\n&gt; actually represent anything, the standalone operation will not mislead\r\n&gt; anyone. \r\n\r\nand a `Repository` as per Eric Evans,\r\n\r\n&gt; A REPOSITORY represents all objects of a certain type as a conceptual\r\n&gt; set (usually emulated). It acts like a collection, except with more\r\n&gt; elaborate querying capability. Objects of the appropriate type are\r\n&gt; added and removed, and the machinery behind the REPOSITORY inserts\r\n&gt; them or deletes them from the database. This definition gathers a\r\n&gt; cohesive set of responsibilities for providing access to the roots of\r\n&gt; AGGREGATES from early life cycle through the end.\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>A <code>@Service</code> to quote spring documentation,</p>\n\n<blockquote>\n  <p>Indicates that an annotated class is a \"Service\", <strong>originally defined\n  by Domain-Driven Design (Evans, 2003) as \"an operation offered as an\n  interface that stands alone in the model, with no encapsulated state.\"</strong>\n  May also indicate that a class is a \"Business Service Facade\" (in the\n  Core J2EE patterns sense), or something similar. This annotation is a\n  general-purpose stereotype and individual teams may narrow their\n  semantics and use as appropriate.</p>\n</blockquote>\n\n<p>If you look at domain driven design by eric evans, </p>\n\n<blockquote>\n  <p>A SERVICE is an operation offered as an interface that stands alone in\n  the model, without encapsulating state, as ENTITIES and VALUE OBJECTS\n  do. SERVICES are a common pattern in technical frameworks, but they\n  can also apply in the domain layer. The name service emphasizes the\n  relationship with other objects. Unlike ENTITIES and VALUE OBJECTS, it\n  is defined purely in terms of what it can do for a client. A SERVICE\n  tends to be named for an activity, rather than an entity—a verb rather\n  than a noun. A SERVICE can still have an abstract, intentional\n  definition; it just has a different flavor than the definition of an\n  object. A SERVICE should still have a defined responsibility, and that\n  responsibility and the interface fulfilling it should be defined as\n  part of the domain model. Operation names should come from the\n  UBIQUITOUS LANGUAGE or be introduced into it. Parameters and results\n  should be domain objects. SERVICES should be used judiciously and not\n  allowed to strip the ENTITIES and VALUE OBJECTS of all their behavior.\n  But when an operation is actually an important domain concept, a\n  SERVICE forms a natural part of a MODEL-DRIVEN DESIGN. Declared in the\n  model as a SERVICE, rather than as a phony object that doesn't\n  actually represent anything, the standalone operation will not mislead\n  anyone. </p>\n</blockquote>\n\n<p>and a <code>Repository</code> as per Eric Evans,</p>\n\n<blockquote>\n  <p>A REPOSITORY represents all objects of a certain type as a conceptual\n  set (usually emulated). It acts like a collection, except with more\n  elaborate querying capability. Objects of the appropriate type are\n  added and removed, and the machinery behind the REPOSITORY inserts\n  them or deletes them from the database. This definition gathers a\n  cohesive set of responsibilities for providing access to the roots of\n  AGGREGATES from early life cycle through the end.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7259287,"reputation":2214,"user_id":5536695,"accept_rate":40,"display_name":"YogendraR"},"comment_count":0,"down_vote_count":0,"up_vote_count":72,"is_accepted":false,"score":72,"last_activity_date":1653204078,"creation_date":1501150832,"answer_id":45347943,"question_id":6827752,"body_markdown":"These are Stereotype annotations, candidate for autoscanning\r\n\r\nTechnically `@Controller`, `@Service`, `@Repository` are all same. All of them extends `@Component`.\r\n\r\nFrom the Spring source code:\r\n\r\nIndicates that an annotated class is a &quot;component&quot;. Such classes are considered as candidates for auto-detection when using annotation-based configuration and classpath scanning.\r\n\r\n\r\nWe can directly use `@Component` for each and every bean, but for better understanding and maintainability of a large application, we use `@Controller`, `@Service`, `@Repository`.\r\n\r\nPurpose of each annotation:\r\n\r\n 1. `@Controller` -&gt; Classes annotated with this, are intended to receive a request from the client side. The first request comes to the Dispatcher Servlet, from where it passes the request to the particular controller using the value of `@RequestMapping` annotation.\r\n 2. `@Service` -&gt; Classes annotated with this, are intended to manipulate data, that we receive from the client or fetch from the database. All the manipulation with data should be done in this layer.\r\n 3. `@Repository` -&gt; Classes annotated with this, are intended to connect with database. It can also be considered as DAO(Data Access Object) layer. This layer should be restricted to CRUD (create, retrieve, update, delete) operations only.\r\nIf any manipulation is required, data should be sent be send back to @Service layer.\r\n\r\n \r\nIf we interchange their place(use `@Repository` in place of `@Controller`), our application will work fine.\r\n\r\nThe main purpose of using three different `@annotations` is to provide better Modularity to the Enterprise application.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>These are Stereotype annotations, candidate for autoscanning</p>\n<p>Technically <code>@Controller</code>, <code>@Service</code>, <code>@Repository</code> are all same. All of them extends <code>@Component</code>.</p>\n<p>From the Spring source code:</p>\n<p>Indicates that an annotated class is a &quot;component&quot;. Such classes are considered as candidates for auto-detection when using annotation-based configuration and classpath scanning.</p>\n<p>We can directly use <code>@Component</code> for each and every bean, but for better understanding and maintainability of a large application, we use <code>@Controller</code>, <code>@Service</code>, <code>@Repository</code>.</p>\n<p>Purpose of each annotation:</p>\n<ol>\n<li><code>@Controller</code> -&gt; Classes annotated with this, are intended to receive a request from the client side. The first request comes to the Dispatcher Servlet, from where it passes the request to the particular controller using the value of <code>@RequestMapping</code> annotation.</li>\n<li><code>@Service</code> -&gt; Classes annotated with this, are intended to manipulate data, that we receive from the client or fetch from the database. All the manipulation with data should be done in this layer.</li>\n<li><code>@Repository</code> -&gt; Classes annotated with this, are intended to connect with database. It can also be considered as DAO(Data Access Object) layer. This layer should be restricted to CRUD (create, retrieve, update, delete) operations only.\nIf any manipulation is required, data should be sent be send back to @Service layer.</li>\n</ol>\n<p>If we interchange their place(use <code>@Repository</code> in place of <code>@Controller</code>), our application will work fine.</p>\n<p>The main purpose of using three different <code>@annotations</code> is to provide better Modularity to the Enterprise application.</p>\n"},{"tags":[],"owner":{"account_id":5448501,"reputation":1780,"user_id":4334162,"display_name":"Arun Raaj"},"comment_count":0,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1576472757,"creation_date":1510234330,"answer_id":47203202,"question_id":6827752,"body_markdown":"**@Component**: you annotate a class `@Component`, it tells hibernate that it is a Bean.\r\n\r\n**@Repository**: you annotate a class `@Repository`, it tells hibernate it is a DAO class and treat it as DAO class. Means it makes the unchecked exceptions (thrown from DAO methods) eligible for translation into Spring `DataAccessException`.\r\n\r\n**@Service**: This tells hibernate it is a Service class where you will have `@Transactional` etc Service layer annotations so hibernate treats it as a Service component.\r\n\r\nPlus `@Service` is advance of `@Component`. Assume the bean class name is `CustomerService`, since you did not choose XML bean configuration way so you annotated the bean with `@Component` to indicate it as a Bean. So while getting the bean object `CustomerService cust = (CustomerService)context.getBean(&quot;customerService&quot;);` By default, Spring will lower case the first character of the component – from ‘CustomerService’ to ‘customerService’. And you can retrieve this component with name ‘customerService’.\r\nBut if you use `@Service` annotation for the bean class you can provide a specific bean name by \r\n\r\n    @Service(&quot;AAA&quot;)\r\n    public class CustomerService{\r\nand you can get the bean object by \r\n\r\n    CustomerService cust = (CustomerService)context.getBean(&quot;AAA&quot;);\r\n\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p><strong>@Component</strong>: you annotate a class <code>@Component</code>, it tells hibernate that it is a Bean.</p>\n\n<p><strong>@Repository</strong>: you annotate a class <code>@Repository</code>, it tells hibernate it is a DAO class and treat it as DAO class. Means it makes the unchecked exceptions (thrown from DAO methods) eligible for translation into Spring <code>DataAccessException</code>.</p>\n\n<p><strong>@Service</strong>: This tells hibernate it is a Service class where you will have <code>@Transactional</code> etc Service layer annotations so hibernate treats it as a Service component.</p>\n\n<p>Plus <code>@Service</code> is advance of <code>@Component</code>. Assume the bean class name is <code>CustomerService</code>, since you did not choose XML bean configuration way so you annotated the bean with <code>@Component</code> to indicate it as a Bean. So while getting the bean object <code>CustomerService cust = (CustomerService)context.getBean(\"customerService\");</code> By default, Spring will lower case the first character of the component – from ‘CustomerService’ to ‘customerService’. And you can retrieve this component with name ‘customerService’.\nBut if you use <code>@Service</code> annotation for the bean class you can provide a specific bean name by </p>\n\n<pre><code>@Service(\"AAA\")\npublic class CustomerService{\n</code></pre>\n\n<p>and you can get the bean object by </p>\n\n<pre><code>CustomerService cust = (CustomerService)context.getBean(\"AAA\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4554063,"reputation":1525,"user_id":8450064,"display_name":"Anil Nivargi"},"comment_count":0,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1689081520,"creation_date":1511376123,"answer_id":47441820,"question_id":6827752,"body_markdown":"Annotate other components with `@Component`, for example, REST Resource classes.\r\n\r\n```java\r\n    @Component\r\n    public class AdressComp {\r\n        .......\r\n        ...// some code here    \r\n    }\r\n```\r\n\r\n`@Component` is a generic stereotype for any Spring-managed component. \r\n\r\n`@Controller`, `@Service` and `@Repository` are Specializations of `@Component` for specific use cases.\r\n\r\n### @Component in Spring\r\n\r\n[![&quot;Component Specialization&quot;][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FFIdh.png\r\n\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>Annotate other components with <code>@Component</code>, for example, REST Resource classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Component\n    public class AdressComp {\n        .......\n        ...// some code here    \n    }\n</code></pre>\n<p><code>@Component</code> is a generic stereotype for any Spring-managed component.</p>\n<p><code>@Controller</code>, <code>@Service</code> and <code>@Repository</code> are Specializations of <code>@Component</code> for specific use cases.</p>\n<h3>@Component in Spring</h3>\n<p><a href=\"https://i.stack.imgur.com/FFIdh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FFIdh.png\" alt=\"&quot;Component Specialization&quot;\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1229114,"reputation":6049,"user_id":1194067,"accept_rate":73,"display_name":"Jeevan Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1521615785,"creation_date":1521615785,"answer_id":49400133,"question_id":6827752,"body_markdown":"**Explanation of stereotypes :** \r\n\r\n - `@Service` - Annotate all your service classes with @Service. This layer knows the unit of work. All your business logic will be in Service classes. Generally methods of service layer are covered under transaction. You can make multiple DAO calls from service method, if one transaction fails all transactions should rollback.\r\n - `@Repository` - Annotate all your DAO classes with @Repository. All your database access logic should be in DAO classes.\r\n - `@Component` - Annotate your other components (for example REST resource classes) with component stereotype.\r\n - `@Autowired` - Let Spring auto-wire other beans into your classes using @Autowired annotation. \r\n\r\n`@Component` is a generic stereotype for any Spring-managed component. `@Repository`, `@Service`, and `@Controller` are specializations of `@Component` for more specific use cases, for example, in the persistence, service, and presentation layers, respectively. \r\n\r\nOriginally answered [here][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/16051656/advantages-of-using-spring-stereotypes/16105106#16105106","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p><strong>Explanation of stereotypes :</strong> </p>\n\n<ul>\n<li><code>@Service</code> - Annotate all your service classes with @Service. This layer knows the unit of work. All your business logic will be in Service classes. Generally methods of service layer are covered under transaction. You can make multiple DAO calls from service method, if one transaction fails all transactions should rollback.</li>\n<li><code>@Repository</code> - Annotate all your DAO classes with @Repository. All your database access logic should be in DAO classes.</li>\n<li><code>@Component</code> - Annotate your other components (for example REST resource classes) with component stereotype.</li>\n<li><code>@Autowired</code> - Let Spring auto-wire other beans into your classes using @Autowired annotation. </li>\n</ul>\n\n<p><code>@Component</code> is a generic stereotype for any Spring-managed component. <code>@Repository</code>, <code>@Service</code>, and <code>@Controller</code> are specializations of <code>@Component</code> for more specific use cases, for example, in the persistence, service, and presentation layers, respectively. </p>\n\n<p>Originally answered <a href=\"https://stackoverflow.com/questions/16051656/advantages-of-using-spring-stereotypes/16105106#16105106\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":12520696,"reputation":587,"user_id":9112160,"display_name":"UHDante"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1588880493,"creation_date":1529539817,"answer_id":50958679,"question_id":6827752,"body_markdown":"`@Component`, `@ Repository`, `@ Service`, `@Controller`:\r\n\r\n`@Component` is a generic stereotype for the components managed by Spring `@Repository`, `@Service`, and `@Controller` are `@Component` specializations for more specific uses:\r\n\r\n- `@Repository` for persistence\r\n- `@Service` for services and transactions\r\n- `@Controller` for MVC controllers\r\n\r\nWhy use `@Repository`, `@Service`, `@Controller` over `@Component`?\r\nWe can mark our component classes with @Component, but if instead we use the alternative that adapts to the expected functionality. Our classes are better suited to the functionality expected in each particular case.\r\n\r\nA class annotated with `@Repository` has a better translation and readable error handling with org.springframework.dao.DataAccessException. Ideal for implementing components that access data (DataAccessObject or DAO).\r\n\r\nAn annotated class with `@Controller` plays a controller role in a Spring Web MVC application\r\n\r\nAn annotated class with `@Service` plays a role in business logic services, example Facade pattern for DAO Manager (Facade) and transaction handling","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p><code>@Component</code>, <code>@ Repository</code>, <code>@ Service</code>, <code>@Controller</code>:</p>\n\n<p><code>@Component</code> is a generic stereotype for the components managed by Spring <code>@Repository</code>, <code>@Service</code>, and <code>@Controller</code> are <code>@Component</code> specializations for more specific uses:</p>\n\n<ul>\n<li><code>@Repository</code> for persistence</li>\n<li><code>@Service</code> for services and transactions</li>\n<li><code>@Controller</code> for MVC controllers</li>\n</ul>\n\n<p>Why use <code>@Repository</code>, <code>@Service</code>, <code>@Controller</code> over <code>@Component</code>?\nWe can mark our component classes with @Component, but if instead we use the alternative that adapts to the expected functionality. Our classes are better suited to the functionality expected in each particular case.</p>\n\n<p>A class annotated with <code>@Repository</code> has a better translation and readable error handling with org.springframework.dao.DataAccessException. Ideal for implementing components that access data (DataAccessObject or DAO).</p>\n\n<p>An annotated class with <code>@Controller</code> plays a controller role in a Spring Web MVC application</p>\n\n<p>An annotated class with <code>@Service</code> plays a role in business logic services, example Facade pattern for DAO Manager (Facade) and transaction handling</p>\n"},{"tags":[],"owner":{"account_id":4903139,"reputation":1535,"user_id":3950690,"display_name":"Brajesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1530817917,"creation_date":1530817917,"answer_id":51198370,"question_id":6827752,"body_markdown":"In spring framework provides some special type of annotations,called stereotype annotations.\r\nThese are following:-\r\n\r\n    @RestController- Declare at controller level.\r\n    @Controller – Declare at controller level.\r\n    @Component – Declare at Bean/entity level.\r\n    @Repository – Declare at DAO level.\r\n    @Service – Declare at BO level.\r\n\r\nabove declared annotations are special because when we add `&lt;context:component-scan&gt;` into xxx-servlet.xml file ,spring will automatically create the object of those classes which are annotated with above annotation during context creation/loading phase.\r\n\r\n\r\n\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>In spring framework provides some special type of annotations,called stereotype annotations.\nThese are following:-</p>\n\n<pre><code>@RestController- Declare at controller level.\n@Controller – Declare at controller level.\n@Component – Declare at Bean/entity level.\n@Repository – Declare at DAO level.\n@Service – Declare at BO level.\n</code></pre>\n\n<p>above declared annotations are special because when we add <code>&lt;context:component-scan&gt;</code> into xxx-servlet.xml file ,spring will automatically create the object of those classes which are annotated with above annotation during context creation/loading phase.</p>\n"},{"tags":[],"owner":{"account_id":11475553,"reputation":301,"user_id":8411174,"display_name":"Maria Pomazkina-Karpikova"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1538533964,"creation_date":1538533964,"answer_id":52618927,"question_id":6827752,"body_markdown":"*Repository* and *Service* are children of *Component* annotation. So, all of them are *Component*. *Repository* and *Service* just expand it. \r\nHow exactly?\r\n*Service* has only ideological difference: we use it for services. *Repository* has particular exception handler.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p><em>Repository</em> and <em>Service</em> are children of <em>Component</em> annotation. So, all of them are <em>Component</em>. <em>Repository</em> and <em>Service</em> just expand it. \nHow exactly?\n<em>Service</em> has only ideological difference: we use it for services. <em>Repository</em> has particular exception handler.</p>\n"},{"tags":[],"owner":{"account_id":5225768,"reputation":1139,"user_id":4177869,"accept_rate":50,"display_name":"Mohamed Sweelam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635928099,"creation_date":1556655712,"answer_id":55928163,"question_id":6827752,"body_markdown":"In order to simplify this illustration, let us consider technicality by use case, These annotations are used to be injected and as I said literally &quot;_Used to be injected_&quot; , that mean, if you know how to use **Dependency Injection &quot;DI&quot;**  and you should, then you will always look for these annotations, and by annotating the classes with these **Stereo Types**, you are informing the _DI_ container to scan them to be ready for Injection on other places, this is the practical target.\r\n\r\nNow lets move to each one; first `@Service`, If you are building some logic for specific business case you need to separate that in a place which will contain your business logic, this service is normal Class or you can use it as interface if you want , and it is written like this \r\n\r\n```java\r\n@Service\r\npublic class Doer {\r\n   // Your logic \r\n}\r\n```\r\n\r\nTo use it in another class, suppose in Controller \r\n\r\n```java\r\n@Controller\r\npublic class XController {\r\n    // You have to inject it like this \r\n    @Autowired \r\n    private Doer doer;\r\n\r\n    // Your logic\r\n}\r\n```\r\n\r\nAll are the same way when you inject them, `@Repository` it&#39;s an interface which apply the implementation for the **Repository Pattern** https://stackoverflow.com/questions/5166888/repository-design-pattern, generally it&#39;s used when you are dealing with some data store or database, and you will find that, it contains multiple ready implementation for you to handle database operations; it can be  `CrudRepository`, `JpaRepository` etc.\r\n\r\nFor example:\r\n\r\n```java\r\npublic interface DoerRepository implements JpaRepository&lt;Long, XEntity&gt; {\r\n}\r\n```\r\n\r\nFinally the `@Component`, this is the generic form for registered beans in Spring, that&#39;s spring is always looking for bean marked with `@Component` to be registered, then both `@Service` and `@Repository` are special cases of `@Component`, however the common use case for component is when you&#39;re making something purely technical not for covering direct business case! like formatting dates or handing special request serialization mechanism and so on.","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>In order to simplify this illustration, let us consider technicality by use case, These annotations are used to be injected and as I said literally &quot;<em>Used to be injected</em>&quot; , that mean, if you know how to use <strong>Dependency Injection &quot;DI&quot;</strong>  and you should, then you will always look for these annotations, and by annotating the classes with these <strong>Stereo Types</strong>, you are informing the <em>DI</em> container to scan them to be ready for Injection on other places, this is the practical target.</p>\n<p>Now lets move to each one; first <code>@Service</code>, If you are building some logic for specific business case you need to separate that in a place which will contain your business logic, this service is normal Class or you can use it as interface if you want , and it is written like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class Doer {\n   // Your logic \n}\n</code></pre>\n<p>To use it in another class, suppose in Controller</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\npublic class XController {\n    // You have to inject it like this \n    @Autowired \n    private Doer doer;\n\n    // Your logic\n}\n</code></pre>\n<p>All are the same way when you inject them, <code>@Repository</code> it's an interface which apply the implementation for the <strong>Repository Pattern</strong> <a href=\"https://stackoverflow.com/questions/5166888/repository-design-pattern\">Repository design pattern</a>, generally it's used when you are dealing with some data store or database, and you will find that, it contains multiple ready implementation for you to handle database operations; it can be  <code>CrudRepository</code>, <code>JpaRepository</code> etc.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface DoerRepository implements JpaRepository&lt;Long, XEntity&gt; {\n}\n</code></pre>\n<p>Finally the <code>@Component</code>, this is the generic form for registered beans in Spring, that's spring is always looking for bean marked with <code>@Component</code> to be registered, then both <code>@Service</code> and <code>@Repository</code> are special cases of <code>@Component</code>, however the common use case for component is when you're making something purely technical not for covering direct business case! like formatting dates or handing special request serialization mechanism and so on.</p>\n"},{"tags":[],"owner":{"account_id":15190407,"reputation":13087,"user_id":10961238,"display_name":"Romil Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1689081846,"creation_date":1562224923,"answer_id":56882597,"question_id":6827752,"body_markdown":"Good enough answers are here to explain the whats-the-difference-between-component-repository-service-annotations. I would like to share the difference between `@Controller &amp; @RestController`\r\n\r\n**`@Controller`** vs **`RestController`**\r\n=========================================\r\n\r\n**`@RestController`**:\r\n----------------------\r\n\r\n[![enter image description here][1]][1]\r\n\r\n - This annotation is a specialized version of `@Controller` which adds\r\n   `@Controller` and `@ResponseBody` annotation automatically. so we do not have to add `@ResponseBody` to our mapping methods. That means\r\n   `@ResponseBody` is default active.\r\n - If you use `@RestController`, you cannot return a view (By using\r\n   `ViewResolver` in Spring/Spring-Boot)\r\n - `@RestController` also converts the response to `JSON/XML automatically` as `@ResponseBody` makes the returned objects to something that could be in the body, `e.g. JSON or XML` \r\n\r\n\r\n----------\r\n\r\n\r\n**`@Controller`**\r\n-----------------\r\n\r\n[![enter image description here][2]][2]\r\n\r\n - `@Controller` is used to mark classes as Spring MVC Controller. This\r\n   annotation is just a specialized version of `@Component` and it\r\n   allows the controller classes to be auto-detected based on classpath\r\n   scanning.\r\n - `@Controller` you can return a view in Spring web MVC.\r\n\r\n[More Detailed View][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U9mP2.png\r\n  [2]: https://i.stack.imgur.com/BKR7s.png\r\n  [3]: https://www.genuitec.com/spring-frameworkrestcontroller-vs-controller/","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>Good enough answers are here to explain the whats-the-difference-between-component-repository-service-annotations. I would like to share the difference between <code>@Controller &amp; @RestController</code></p>\n<h1><strong><code>@Controller</code></strong> vs <strong><code>RestController</code></strong></h1>\n<h2><strong><code>@RestController</code></strong>:</h2>\n<p><a href=\"https://i.stack.imgur.com/U9mP2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U9mP2.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>This annotation is a specialized version of <code>@Controller</code> which adds\n<code>@Controller</code> and <code>@ResponseBody</code> annotation automatically. so we do not have to add <code>@ResponseBody</code> to our mapping methods. That means\n<code>@ResponseBody</code> is default active.</li>\n<li>If you use <code>@RestController</code>, you cannot return a view (By using\n<code>ViewResolver</code> in Spring/Spring-Boot)</li>\n<li><code>@RestController</code> also converts the response to <code>JSON/XML automatically</code> as <code>@ResponseBody</code> makes the returned objects to something that could be in the body, <code>e.g. JSON or XML</code></li>\n</ul>\n<hr />\n<h2><strong><code>@Controller</code></strong></h2>\n<p><a href=\"https://i.stack.imgur.com/BKR7s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BKR7s.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li><code>@Controller</code> is used to mark classes as Spring MVC Controller. This\nannotation is just a specialized version of <code>@Component</code> and it\nallows the controller classes to be auto-detected based on classpath\nscanning.</li>\n<li><code>@Controller</code> you can return a view in Spring web MVC.</li>\n</ul>\n<p><a href=\"https://www.genuitec.com/spring-frameworkrestcontroller-vs-controller/\" rel=\"nofollow noreferrer\">More Detailed View</a></p>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1572475880,"creation_date":1565076350,"answer_id":57370920,"question_id":6827752,"body_markdown":"**Difference between @Component, @Repository, @Controller &amp; @Service annotations**\r\n\r\n&gt; @Component – generic and can be used across application.&lt;br&gt; @Service\r\n&gt; – annotate classes at service layer level.&lt;br&gt; @Controller – annotate\r\n&gt; classes at presentation layers level, mainly used in Spring MVC.&lt;br&gt;\r\n&gt; @Repository – annotate classes at persistence layer, which will act as\r\n&gt; database repository.\r\n\r\n`@Controller` = @Component ( Internal Annotation ) + Presentation layer Features &lt;br&gt;\r\n`@Service` = @Component ( Internal Annotation ) + Service layer Features&lt;br&gt;\r\n`@Component` = Actual Components ( Beans )&lt;br&gt;\r\n`@Repository` = @Component ( Internal Annotation ) + Data Layer Features ( use for handling the Domain Beans )&lt;br&gt;","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p><strong>Difference between @Component, @Repository, @Controller &amp; @Service annotations</strong></p>\n\n<blockquote>\n  <p>@Component – generic and can be used across application.<br> @Service\n  – annotate classes at service layer level.<br> @Controller – annotate\n  classes at presentation layers level, mainly used in Spring MVC.<br>\n  @Repository – annotate classes at persistence layer, which will act as\n  database repository.</p>\n</blockquote>\n\n<p><code>@Controller</code> = @Component ( Internal Annotation ) + Presentation layer Features <br>\n<code>@Service</code> = @Component ( Internal Annotation ) + Service layer Features<br>\n<code>@Component</code> = Actual Components ( Beans )<br>\n<code>@Repository</code> = @Component ( Internal Annotation ) + Data Layer Features ( use for handling the Domain Beans )<br></p>\n"},{"tags":[],"owner":{"account_id":14692591,"reputation":2143,"user_id":10610826,"display_name":"Mykhailo Moskura"},"comment_count":0,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1587257408,"creation_date":1587257408,"answer_id":61298214,"question_id":6827752,"body_markdown":"**@Component** acts as @Bean annotation in configuration class , register bean in spring context. Also it is parent for @Service, @Repository and @Controller annotation.\r\n\r\n**@Service**, extends @Component annotation and has only naming difference.\r\n\r\n**@Repository** - extends @Component annotation and translate all database exceptions into \r\n[DataAccessException][1].\r\n\r\n**@Controller** - acts as controller in MVC pattern. The dispatcher will scan such annotated classes for mapped methods, detecting @RequestMapping annotations.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/DataAccessException.html","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p><strong>@Component</strong> acts as @Bean annotation in configuration class , register bean in spring context. Also it is parent for @Service, @Repository and @Controller annotation.</p>\n\n<p><strong>@Service</strong>, extends @Component annotation and has only naming difference.</p>\n\n<p><strong>@Repository</strong> - extends @Component annotation and translate all database exceptions into \n<a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/dao/DataAccessException.html\" rel=\"noreferrer\">DataAccessException</a>.</p>\n\n<p><strong>@Controller</strong> - acts as controller in MVC pattern. The dispatcher will scan such annotated classes for mapped methods, detecting @RequestMapping annotations.</p>\n"},{"tags":[],"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"comment_count":0,"down_vote_count":6,"up_vote_count":30,"is_accepted":false,"score":24,"last_activity_date":1667836314,"creation_date":1588944349,"answer_id":61680242,"question_id":6827752,"body_markdown":"The answers presented here are partially technically correct, but even though the response list is long and this will be at the bottom I thought it was worth putting an actually correct response in here too, just in case somebody stumbles upon it and learns something valuable from it. It&#39;s not that the rest of the answers are completely wrong, it&#39;s just that they aren&#39;t right. And, to stop the hordes of trolls, yes, I know that technically these annotations are effectively the same thing right now and mostly interchangeable even unto spring 5. Now, for the right answer:\r\n\r\nThese three annotations are completely different things and are not interchangeable. You can tell that because there are three of them rather than just one. They are not intended to be interchangeable, they&#39;re just implemented that way out of elegance and convenience. \r\n\r\nModern programming is invention, art, technique, and communication, in varying proportions. The communication bit is usually very important because code is usually read much more often than its written. As a programmer you&#39;re not only trying to solve the technical problem, you&#39;re also trying to communicate your intent to future programmers who read your code. These programmers may share neither your native language nor your social environment, and it is possible that they may be reading your code 50-years in the future (it&#39;s not as unlikely as you may think). It&#39;s difficult to communicate effectively that far into the future. Therefore, it is vital that we use the clearest, most efficient, correct, and communicative language available to us. We chose our words carefully to have maximum impact and be as clear as possible as to our intent.\r\n\r\nFor example, it is vital that `@Repository` is used when we&#39;re writing a repository, rather than `@Component`. The latter is a very poor choice of annotation for a repository because it does not indicate that we&#39;re looking at a repository. We can assume that a repository is also a spring-bean, but not that a component is a repository. With `@Repository` we are being clear and specific in our language. We are stating clearly that this is a repository. With `@Component` we are leaving it to the reader to decide what type of component they are reading, and they will have to read the whole class (and possibly a tree of subclasses and interfaces) to infer meaning. The class could then possibly be misinterpreted by a reader in the distant future as not being a repository, and we would have been partially responsible for this mistake because we, who knew full well that this is a repository, failed to be specific in our language and communicate our intent effectively.\r\n\r\nI won&#39;t go into the other examples, but will state as clearly as I can: these annotations are completely different things and should be used appropriately, as per their intent. `@Repository` is for storage repositories and no other annotation is correct. `@Service` is for services and no other annotation is correct. `@Controller` is for components that are neither repositories nor services, and to use either of these in its place would also be incorrect. It might compile, it might even run and pass your tests, but it would be wrong and I would think less of you (professionally) if you were to do this.\r\n\r\nThere are examples of this throughout spring (and programming in general). You must not use `@Controller` when writing a REST API, because `@RestController` is available. You must not use `@RequestMapping` when `@GetMapping` is a valid alternative. Etc. Etc. Etc. You *must* choose the most specific exact and correct language you can to communicate your intent to your readers, otherwise, you are introducing risks into your system, and risk has a cost.\r\n\r\nFinally, I&#39;d like to bring up a point of order concerning Object-Oriented systems. One of the fundamental rules is that implementations can vary but interfaces shouldn&#39;t. Assuming that these annotations are the same thing is a very slippery slope and completely against OO. Although they may be implemented in an interchangeable way now, there is no guarantee that they will be in the future. Further, even within the same team, an engineer may decide to hang some behaviour off one or more of these annotations using aspects, or a platform engineer may choose to replace the implementation of one of these for operational reasons. You just don&#39;t know, nor should you -- in OO you rely on the interface, not the implementation.\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>The answers presented here are partially technically correct, but even though the response list is long and this will be at the bottom I thought it was worth putting an actually correct response in here too, just in case somebody stumbles upon it and learns something valuable from it. It's not that the rest of the answers are completely wrong, it's just that they aren't right. And, to stop the hordes of trolls, yes, I know that technically these annotations are effectively the same thing right now and mostly interchangeable even unto spring 5. Now, for the right answer:</p>\n<p>These three annotations are completely different things and are not interchangeable. You can tell that because there are three of them rather than just one. They are not intended to be interchangeable, they're just implemented that way out of elegance and convenience.</p>\n<p>Modern programming is invention, art, technique, and communication, in varying proportions. The communication bit is usually very important because code is usually read much more often than its written. As a programmer you're not only trying to solve the technical problem, you're also trying to communicate your intent to future programmers who read your code. These programmers may share neither your native language nor your social environment, and it is possible that they may be reading your code 50-years in the future (it's not as unlikely as you may think). It's difficult to communicate effectively that far into the future. Therefore, it is vital that we use the clearest, most efficient, correct, and communicative language available to us. We chose our words carefully to have maximum impact and be as clear as possible as to our intent.</p>\n<p>For example, it is vital that <code>@Repository</code> is used when we're writing a repository, rather than <code>@Component</code>. The latter is a very poor choice of annotation for a repository because it does not indicate that we're looking at a repository. We can assume that a repository is also a spring-bean, but not that a component is a repository. With <code>@Repository</code> we are being clear and specific in our language. We are stating clearly that this is a repository. With <code>@Component</code> we are leaving it to the reader to decide what type of component they are reading, and they will have to read the whole class (and possibly a tree of subclasses and interfaces) to infer meaning. The class could then possibly be misinterpreted by a reader in the distant future as not being a repository, and we would have been partially responsible for this mistake because we, who knew full well that this is a repository, failed to be specific in our language and communicate our intent effectively.</p>\n<p>I won't go into the other examples, but will state as clearly as I can: these annotations are completely different things and should be used appropriately, as per their intent. <code>@Repository</code> is for storage repositories and no other annotation is correct. <code>@Service</code> is for services and no other annotation is correct. <code>@Controller</code> is for components that are neither repositories nor services, and to use either of these in its place would also be incorrect. It might compile, it might even run and pass your tests, but it would be wrong and I would think less of you (professionally) if you were to do this.</p>\n<p>There are examples of this throughout spring (and programming in general). You must not use <code>@Controller</code> when writing a REST API, because <code>@RestController</code> is available. You must not use <code>@RequestMapping</code> when <code>@GetMapping</code> is a valid alternative. Etc. Etc. Etc. You <em>must</em> choose the most specific exact and correct language you can to communicate your intent to your readers, otherwise, you are introducing risks into your system, and risk has a cost.</p>\n<p>Finally, I'd like to bring up a point of order concerning Object-Oriented systems. One of the fundamental rules is that implementations can vary but interfaces shouldn't. Assuming that these annotations are the same thing is a very slippery slope and completely against OO. Although they may be implemented in an interchangeable way now, there is no guarantee that they will be in the future. Further, even within the same team, an engineer may decide to hang some behaviour off one or more of these annotations using aspects, or a platform engineer may choose to replace the implementation of one of these for operational reasons. You just don't know, nor should you -- in OO you rely on the interface, not the implementation.</p>\n"},{"tags":[],"owner":{"account_id":9221177,"reputation":2312,"user_id":6850561,"display_name":"Partho"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1636269630,"creation_date":1636094026,"answer_id":69849396,"question_id":6827752,"body_markdown":"Spring supports multiple types annotations such as @Component, @service, @Repository. All theses can be found under the org.springframework.stereotype package and @Bean can be found under org.springframework.context.annotation package.\r\n\r\nWhen classes in our application are annotated with any of the above mentioned annotation then during project startup spring scan(using @ComponentScan) each class and inject the instance of the classes to the IOC container. Another thing the @ComponentScan would do is running the methods with @Bean on it and restore the return object to the Ioc Container as a bean.\r\n\r\n**Before we deep dive into ( @Component vs @service vs @Repository ) first it&#39;s better to understand the differences between @Bean and @Component**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IkRcg.png\r\n\r\n\r\n----------\r\n\r\n\r\n## @Component vs @Repository vs @Service ##\r\n\r\n\r\n----------\r\nIn most typical applications, we have distinct layers like data access, presentation, service, business, etc. Additionally, in each layer we have various beans. To detect these beans automatically, Spring uses classpath scanning annotations.Then it registers each bean in the ApplicationContext.\r\n\r\n**Here&#39;s a short overview of a few of these annotations:**\r\n\r\n - @Component is a generic stereotype for any Spring-managed component.\r\n - @Service annotates classes at the service layer.\r\n - @Repository annotates classes at the persistence layer, which will act as a database repository.\r\n\r\n\r\n## @Component Annotation ##\r\n@Component is a class level annotation.We can use @Component across the application to mark the beans as Spring&#39;s managed components. Spring will only pick up and register beans with @Component, and doesn&#39;t look for @Service and @Repository in general.\r\n\r\nThey are registered in ApplicationContext because they are annotated with @Component\r\n\r\nAs stated, @Component is the parent of all stereotype annotations. When Spring performs a component scan, it only looks for classes marked with @Component annotations.\r\n\r\n    @Target({ElementType.TYPE})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    @Indexed\r\n    public @interface Component {\r\n        String value() default &quot;&quot;;\r\n    }\r\nWe can use this annotation on all the classes and it won’t cause any difference.\r\n\r\n## @Service Annotation ##\r\nWe mark beans with @Service to indicate that they&#39;re holding the business logic. Besides being used in the service layer, there isn&#39;t any other special use for this annotation.\r\n\r\nThe @Service is child of component and used to denote classes from the service layer of the application.\r\n\r\n    @Target({ElementType.TYPE})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    @Component\r\n    public @interface Service {\r\n       @AliasFor(\r\n           annotation = Component.class\r\n       )\r\n       String value() default &quot;&quot;;\r\n    }\r\n\r\n## @Repository Annotation ##\r\n@Repository’s job is to catch persistence-specific exceptions and re-throw them as one of Spring’s unified unchecked exceptions.\r\n\r\nFor this, Spring provides PersistenceExceptionTranslationPostProcessor, which we are required to add in our application context (already included if we&#39;re using Spring Boot):\r\n\r\n    &lt;bean class=&quot;org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor&quot;/&gt;\r\n\r\nThis bean post processor adds an advisor to any bean that’s annotated with @Repository.\r\n\r\nSimilarly, @Repository is also a child of component annotation and used on the classes that belong to persistence data access layer and serves as a data repository.\r\n\r\n    @Target({ElementType.TYPE})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    @Component\r\n    public @interface Repository {\r\n        @AliasFor(\r\n            annotation = Component.class\r\n        )\r\n        String value() default &quot;&quot;;\r\n    }\r\n\r\n## Summary ##\r\n@Service and @Repository are special cases of @Component. They are technically the same, but we use them for the different purposes.It&#39;s always a good idea to choose the annotation based on their layer conventions.\r\n\r\n","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>Spring supports multiple types annotations such as @Component, @service, @Repository. All theses can be found under the org.springframework.stereotype package and @Bean can be found under org.springframework.context.annotation package.</p>\n<p>When classes in our application are annotated with any of the above mentioned annotation then during project startup spring scan(using @ComponentScan) each class and inject the instance of the classes to the IOC container. Another thing the @ComponentScan would do is running the methods with @Bean on it and restore the return object to the Ioc Container as a bean.</p>\n<p><strong>Before we deep dive into ( @Component vs @service vs @Repository ) first it's better to understand the differences between @Bean and @Component</strong></p>\n<p><a href=\"https://i.stack.imgur.com/IkRcg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/IkRcg.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<h2>@Component vs @Repository vs @Service</h2>\n<hr />\n<p>In most typical applications, we have distinct layers like data access, presentation, service, business, etc. Additionally, in each layer we have various beans. To detect these beans automatically, Spring uses classpath scanning annotations.Then it registers each bean in the ApplicationContext.</p>\n<p><strong>Here's a short overview of a few of these annotations:</strong></p>\n<ul>\n<li>@Component is a generic stereotype for any Spring-managed component.</li>\n<li>@Service annotates classes at the service layer.</li>\n<li>@Repository annotates classes at the persistence layer, which will act as a database repository.</li>\n</ul>\n<h2>@Component Annotation</h2>\n<p>@Component is a class level annotation.We can use @Component across the application to mark the beans as Spring's managed components. Spring will only pick up and register beans with @Component, and doesn't look for @Service and @Repository in general.</p>\n<p>They are registered in ApplicationContext because they are annotated with @Component</p>\n<p>As stated, @Component is the parent of all stereotype annotations. When Spring performs a component scan, it only looks for classes marked with @Component annotations.</p>\n<pre><code>@Target({ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Indexed\npublic @interface Component {\n    String value() default &quot;&quot;;\n}\n</code></pre>\n<p>We can use this annotation on all the classes and it won’t cause any difference.</p>\n<h2>@Service Annotation</h2>\n<p>We mark beans with @Service to indicate that they're holding the business logic. Besides being used in the service layer, there isn't any other special use for this annotation.</p>\n<p>The @Service is child of component and used to denote classes from the service layer of the application.</p>\n<pre><code>@Target({ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Component\npublic @interface Service {\n   @AliasFor(\n       annotation = Component.class\n   )\n   String value() default &quot;&quot;;\n}\n</code></pre>\n<h2>@Repository Annotation</h2>\n<p>@Repository’s job is to catch persistence-specific exceptions and re-throw them as one of Spring’s unified unchecked exceptions.</p>\n<p>For this, Spring provides PersistenceExceptionTranslationPostProcessor, which we are required to add in our application context (already included if we're using Spring Boot):</p>\n<pre><code>&lt;bean class=&quot;org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor&quot;/&gt;\n</code></pre>\n<p>This bean post processor adds an advisor to any bean that’s annotated with @Repository.</p>\n<p>Similarly, @Repository is also a child of component annotation and used on the classes that belong to persistence data access layer and serves as a data repository.</p>\n<pre><code>@Target({ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Component\npublic @interface Repository {\n    @AliasFor(\n        annotation = Component.class\n    )\n    String value() default &quot;&quot;;\n}\n</code></pre>\n<h2>Summary</h2>\n<p>@Service and @Repository are special cases of @Component. They are technically the same, but we use them for the different purposes.It's always a good idea to choose the annotation based on their layer conventions.</p>\n"}],"owner":{"account_id":787859,"reputation":25665,"user_id":863084,"display_name":"Colin McCree"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1144047,"favorite_count":0,"down_vote_count":8,"up_vote_count":2568,"answer_count":29,"score":2560,"last_activity_date":1699015824,"creation_date":1311671446,"question_id":6827752,"body_markdown":"Can [`@Component`][1], [`@Repository`][2], and [`@Service`][3] annotations be used interchangeably in Spring or do they provide any particular functionality besides acting as a notation device?\r\n\r\nIn other words, if I have a Service class and I change its annotation from `@Service` to `@Component`, will it still behave the same way? \r\n\r\nOr does the annotation also influence the behavior and functionality of the class?\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Component.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Repository.html\r\n  [3]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Service.html","title":"What&#39;s the difference between @Component, @Repository &amp; @Service annotations in Spring?","body":"<p>Can <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Component.html\" rel=\"noreferrer\"><code>@Component</code></a>, <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Repository.html\" rel=\"noreferrer\"><code>@Repository</code></a>, and <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Service.html\" rel=\"noreferrer\"><code>@Service</code></a> annotations be used interchangeably in Spring or do they provide any particular functionality besides acting as a notation device?</p>\n<p>In other words, if I have a Service class and I change its annotation from <code>@Service</code> to <code>@Component</code>, will it still behave the same way?</p>\n<p>Or does the annotation also influence the behavior and functionality of the class?</p>\n"},{"tags":["java","sql","jdbc","prepared-statement"],"comments":[{"owner":{"account_id":475973,"reputation":2009,"user_id":886619,"accept_rate":75,"display_name":"Mohammad Najar"},"score":0,"creation_date":1414008827,"post_id":26516204,"comment_id":41662327,"body_markdown":"possible duplicate of [Does the JDBC spec prevent &#39;?&#39; from being used as an operator (outside of quotes)?](http://stackoverflow.com/questions/14779896/does-the-jdbc-spec-prevent-from-being-used-as-an-operator-outside-of-quotes)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/14779896/does-the-jdbc-spec-prevent-from-being-used-as-an-operator-outside-of-quotes\">Does the JDBC spec prevent &#39;?&#39; from being used as an operator (outside of quotes)?</a>"},{"owner":{"account_id":93731,"reputation":3767,"user_id":256305,"accept_rate":77,"display_name":"Mike Godin"},"score":1,"creation_date":1414028972,"post_id":26516204,"comment_id":41669327,"body_markdown":"The suggested duplicate, http://stackoverflow.com/questions/14779896/does-the-jdbc-spec-prevent-from-being-used-as-an-operator-outside-of-quotes specifically does not address the question of the `?` parameter marker within quotes (asked here).","body":"The suggested duplicate, <a href=\"http://stackoverflow.com/questions/14779896/does-the-jdbc-spec-prevent-from-being-used-as-an-operator-outside-of-quotes\" title=\"does the jdbc spec prevent from being used as an operator outside of quotes\">stackoverflow.com/questions/14779896/&hellip;</a> specifically does not address the question of the <code>?</code> parameter marker within quotes (asked here)."}],"answers":[{"comments":[{"owner":{"account_id":93731,"reputation":3767,"user_id":256305,"accept_rate":77,"display_name":"Mike Godin"},"score":0,"creation_date":1414028846,"post_id":26516266,"comment_id":41669289,"body_markdown":"I edited the op to include a test... Which confirms that your suggestion is correct.","body":"I edited the op to include a test... Which confirms that your suggestion is correct."}],"tags":[],"owner":{"account_id":3089665,"reputation":31308,"user_id":2616073,"display_name":"dkatzel"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1414008732,"creation_date":1414008732,"answer_id":26516266,"question_id":26516204,"body_markdown":"Did you try it?  I think quoted question marks are OK. only &quot;bare&quot; question marks should get replaced in the prepared statement","title":"How do I escape a literal question mark (&#39;?&#39;) in a JDBC prepared statement","body":"<p>Did you try it?  I think quoted question marks are OK. only \"bare\" question marks should get replaced in the prepared statement</p>\n"},{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1414030548,"creation_date":1414008778,"answer_id":26516281,"question_id":26516204,"body_markdown":"If it doesn&#39;t work with your JDBC driver you could bind it as a `String` `?`,\r\n\r\n    ps.setString(1, &quot;?&quot;);","title":"How do I escape a literal question mark (&#39;?&#39;) in a JDBC prepared statement","body":"<p>If it doesn't work with your JDBC driver you could bind it as a <code>String</code> <code>?</code>,</p>\n\n<pre><code>ps.setString(1, \"?\");\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16316,"reputation":162745,"user_id":35364,"accept_rate":72,"display_name":"hasen"},"score":12,"creation_date":1444278375,"post_id":26555612,"comment_id":53837610,"body_markdown":"Postgres uses the question mark as an operator on jsonb types. See: http://www.postgresql.org/docs/9.4/static/functions-json.html","body":"Postgres uses the question mark as an operator on jsonb types. See: <a href=\"http://www.postgresql.org/docs/9.4/static/functions-json.html\" rel=\"nofollow noreferrer\">postgresql.org/docs/9.4/static/functions-json.html</a>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1444294304,"post_id":26555612,"comment_id":53845553,"body_markdown":"@hasen Although that is true, this would need to be remapped by the driver (which I believe recent PostgreSQL JDBC drivers do), as in JDBC the question mark is supposed to only be a parameter placeholder. See http://stackoverflow.com/questions/14779896/does-the-jdbc-spec-prevent-from-being-used-as-an-operator-outside-of-quotes and http://stackoverflow.com/questions/27573778/postgresql-jsonb-and-jdbc","body":"@hasen Although that is true, this would need to be remapped by the driver (which I believe recent PostgreSQL JDBC drivers do), as in JDBC the question mark is supposed to only be a parameter placeholder. See <a href=\"http://stackoverflow.com/questions/14779896/does-the-jdbc-spec-prevent-from-being-used-as-an-operator-outside-of-quotes\" title=\"does the jdbc spec prevent from being used as an operator outside of quotes\">stackoverflow.com/questions/14779896/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/27573778/postgresql-jsonb-and-jdbc\" title=\"postgresql jsonb and jdbc\">stackoverflow.com/questions/27573778/postgresql-jsonb-and-jd&zwnj;&#8203;bc</a>"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":5,"creation_date":1444294436,"post_id":26555612,"comment_id":53845649,"body_markdown":"@hasen specifically in the latest PostgreSQL driver you need to use `??` for the hstore ? operator.","body":"@hasen specifically in the latest PostgreSQL driver you need to use <code>??</code> for the hstore ? operator."}],"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":3,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1699015295,"creation_date":1414181820,"answer_id":26555612,"question_id":26516204,"body_markdown":"The meaning of the `?` is specified in the SQL specification, and the JDBC specification defers to the SQL specification for this.\r\n\r\nA driver doesn&#39;t (and shouldn&#39;t) interpret a question mark in a literal as a parameter placeholder, as a question mark within a string literal is simply a character within the string literal. For more information look at chapter 5 of SQL:2011 Foundation (ISO-9075-2:2011).\r\n\r\nSo escaping is not necessary (nor possible).\r\n\r\nHowever, that is the theory, and, unfortunately, in practice it doesn&#39;t work like that in the PostgreSQL JDBC driver. To address this, recent versions of the PostgreSQL driver provide an option to escape a question mark which is not a parameter placeholder by using `??` instead.","title":"How do I escape a literal question mark (&#39;?&#39;) in a JDBC prepared statement","body":"<p>The meaning of the <code>?</code> is specified in the SQL specification, and the JDBC specification defers to the SQL specification for this.</p>\n<p>A driver doesn't (and shouldn't) interpret a question mark in a literal as a parameter placeholder, as a question mark within a string literal is simply a character within the string literal. For more information look at chapter 5 of SQL:2011 Foundation (ISO-9075-2:2011).</p>\n<p>So escaping is not necessary (nor possible).</p>\n<p>However, that is the theory, and, unfortunately, in practice it doesn't work like that in the PostgreSQL JDBC driver. To address this, recent versions of the PostgreSQL driver provide an option to escape a question mark which is not a parameter placeholder by using <code>??</code> instead.</p>\n"},{"tags":[],"owner":{"account_id":1452853,"reputation":1731,"user_id":1369246,"display_name":"Yogesh A Sakurikar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1678380978,"creation_date":1430254084,"answer_id":29929619,"question_id":26516204,"body_markdown":"I have used [`CHR(63)`](https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/CHR.html) in my query and that helped resolving my issue. ([Decimal 63 is the question mark in ASCII.](https://www.fileformat.info/info/unicode/char/003f/index.htm))\r\n\r\nHere is what I did for example:\r\n`select q&#39;[&lt;div id=[&#39;|&quot;]TRD_%%GEN%%[&#39;|&quot;].*]&#39; || chr(63) || q&#39;[&lt;/div&gt;]&#39; from dual;`\r\n\r\nThis helped getting the string as :\r\n`&lt;div id=[&#39;|&quot;]TRD_%%GEN%%[&#39;|&quot;].*?&lt;/div&gt;`\r\n\r\nI have then used this query inside the insert statement, and ran through PreparedStatement. Worked perfectly fine.\r\n\r\nThe CHR function is an in built function and can be used similar to other oracle functions. You can use this if you know the query will not going to be repeated lots of times.","title":"How do I escape a literal question mark (&#39;?&#39;) in a JDBC prepared statement","body":"<p>I have used <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/CHR.html\" rel=\"nofollow noreferrer\"><code>CHR(63)</code></a> in my query and that helped resolving my issue. (<a href=\"https://www.fileformat.info/info/unicode/char/003f/index.htm\" rel=\"nofollow noreferrer\">Decimal 63 is the question mark in ASCII.</a>)</p>\n<p>Here is what I did for example:\n<code>select q'[&lt;div id=['|&quot;]TRD_%%GEN%%['|&quot;].*]' || chr(63) || q'[&lt;/div&gt;]' from dual;</code></p>\n<p>This helped getting the string as :\n<code>&lt;div id=['|&quot;]TRD_%%GEN%%['|&quot;].*?&lt;/div&gt;</code></p>\n<p>I have then used this query inside the insert statement, and ran through PreparedStatement. Worked perfectly fine.</p>\n<p>The CHR function is an in built function and can be used similar to other oracle functions. You can use this if you know the query will not going to be repeated lots of times.</p>\n"},{"tags":[],"owner":{"account_id":1869609,"reputation":3387,"user_id":1692179,"accept_rate":76,"display_name":"bobmarksie"},"comment_count":0,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1699015170,"creation_date":1455270593,"answer_id":35359397,"question_id":26516204,"body_markdown":"Depending on the JDBC driver you are using you may be able to escape by adding another question mark e.g. if you&#39;re using PostgreSQL\r\n\r\nFrom [Using the Statement or PreparedStatement Interface][1]:\r\n\r\n&gt; In JDBC, the question mark (`?`) is the placeholder for the positional\r\n&gt; parameters of a `PreparedStatement`. There are, however, a number of\r\n&gt; PostgreSQL&#174; operators that contain a question mark. To keep such\r\n&gt; question marks in an SQL statement from being interpreted as\r\n&gt; positional parameters, use two question marks (`??`) as escape\r\n&gt; sequence. You can also use this escape sequence in a `Statement`, but\r\n&gt; that is not required. Specifically only in a `Statement` a single\r\n&gt; (`?`) can be used as an operator.\r\n\r\n\r\n  [1]: https://jdbc.postgresql.org/documentation/query/#using-the-statement-or-preparedstatement-interface","title":"How do I escape a literal question mark (&#39;?&#39;) in a JDBC prepared statement","body":"<p>Depending on the JDBC driver you are using you may be able to escape by adding another question mark e.g. if you're using PostgreSQL</p>\n<p>From <a href=\"https://jdbc.postgresql.org/documentation/query/#using-the-statement-or-preparedstatement-interface\" rel=\"nofollow noreferrer\">Using the Statement or PreparedStatement Interface</a>:</p>\n<blockquote>\n<p>In JDBC, the question mark (<code>?</code>) is the placeholder for the positional\nparameters of a <code>PreparedStatement</code>. There are, however, a number of\nPostgreSQL® operators that contain a question mark. To keep such\nquestion marks in an SQL statement from being interpreted as\npositional parameters, use two question marks (<code>??</code>) as escape\nsequence. You can also use this escape sequence in a <code>Statement</code>, but\nthat is not required. Specifically only in a <code>Statement</code> a single\n(<code>?</code>) can be used as an operator.</p>\n</blockquote>\n"}],"owner":{"account_id":93731,"reputation":3767,"user_id":256305,"accept_rate":77,"display_name":"Mike Godin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20479,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":26555612,"answer_count":5,"score":15,"last_activity_date":1699015295,"creation_date":1414008529,"question_id":26516204,"body_markdown":"I&#39;d like to create a JDBC PreparedStatement like:\r\n\r\n    SELECT URL,LOCATE ( &#39;?&#39;, URL ) pos FROM Links WHERE pageId=? ORDER BY pos ASC\r\n\r\nWhere the 1st `?` is a literal and the 2nd `?` is a parameter.  I could use `CHAR(63)` in place of the `&#39;?&#39;` but I think the extra function call would slow down the SQL execution. Is there some way to escape that 1st `?`?\r\n\r\nEdit:\r\n\r\nThe following code tests dkatzel&#39;s assertion that the `?` character in a string is not considered a marker:\r\n\r\n    public class Test {\r\n        public static void main(String[] args) throws SQLException {\r\n            Connection conn = DriverManager.getConnection(&quot;jdbc:h2:mem:test&quot;);\r\n            Statement stmt = conn.createStatement();\r\n            stmt.executeUpdate(&quot;CREATE TABLE Links(URL VARCHAR(255) PRIMARY KEY,pageId BIGINT)&quot;);\r\n            stmt.executeUpdate(&quot;INSERT INTO Links(URL,pageId) VALUES(&#39;http://foo.bar?baz&#39;,1)&quot;);\r\n            stmt.executeUpdate(&quot;INSERT INTO Links(URL,pageId) VALUES(&#39;http://foo.bar/baz&#39;,1)&quot;);\r\n            stmt.close();\r\n            PreparedStatement ps = conn\r\n                .prepareStatement(&quot;SELECT URL,LOCATE ( &#39;?&#39;, URL ) pos FROM Links WHERE pageId=? ORDER BY pos ASC&quot;);\r\n             ps.setLong(1, 1);\r\n            ResultSet rs = ps.executeQuery();\r\n            while (rs.next()) {\r\n                System.out.println(rs.getString(1) + &quot;:&quot; + rs.getInt(2));\r\n            }\r\n            rs.close();\r\n            ps.close();\r\n            conn.close();\r\n        }\r\n    }\r\n\r\nThe output:\r\n\r\n    http://foo.bar/baz:0\r\n    http://foo.bar?baz:15\r\n\r\nIt appears that dkatzel is correct.  I searched the the [JDBC Spec][jdbcspec] and could not find any mention that the `?`  parameter marker would be ignored if it&#39;s within quotes, but the few implementations of PreparedStatement parsers that I found ([MySql][mysql],[c-JDBC][cjdbc],[H2][h2]) all appear to exclude text within single quotes from consideration as parameter markers.\r\n\r\n[jdbcspec]:http://download.oracle.com/otndocs/jcp/jdbc-4_1-mrel-spec/index.html\r\n[mysql]:http://www.docjar.com/html/api/com/mysql/jdbc/PreparedStatement.java.html\r\n[cjdbc]:http://c-jdbc.ow2.org/current/doc/doxygen/english/html/PreparedStatement_8java-source.html\r\n[h2]:http://h2database.googlecode.com/svn/trunk/h2/src/main/org/h2/command/Parser.java","title":"How do I escape a literal question mark (&#39;?&#39;) in a JDBC prepared statement","body":"<p>I'd like to create a JDBC PreparedStatement like:</p>\n\n<pre><code>SELECT URL,LOCATE ( '?', URL ) pos FROM Links WHERE pageId=? ORDER BY pos ASC\n</code></pre>\n\n<p>Where the 1st <code>?</code> is a literal and the 2nd <code>?</code> is a parameter.  I could use <code>CHAR(63)</code> in place of the <code>'?'</code> but I think the extra function call would slow down the SQL execution. Is there some way to escape that 1st <code>?</code>?</p>\n\n<p>Edit:</p>\n\n<p>The following code tests dkatzel's assertion that the <code>?</code> character in a string is not considered a marker:</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) throws SQLException {\n        Connection conn = DriverManager.getConnection(\"jdbc:h2:mem:test\");\n        Statement stmt = conn.createStatement();\n        stmt.executeUpdate(\"CREATE TABLE Links(URL VARCHAR(255) PRIMARY KEY,pageId BIGINT)\");\n        stmt.executeUpdate(\"INSERT INTO Links(URL,pageId) VALUES('http://foo.bar?baz',1)\");\n        stmt.executeUpdate(\"INSERT INTO Links(URL,pageId) VALUES('http://foo.bar/baz',1)\");\n        stmt.close();\n        PreparedStatement ps = conn\n            .prepareStatement(\"SELECT URL,LOCATE ( '?', URL ) pos FROM Links WHERE pageId=? ORDER BY pos ASC\");\n         ps.setLong(1, 1);\n        ResultSet rs = ps.executeQuery();\n        while (rs.next()) {\n            System.out.println(rs.getString(1) + \":\" + rs.getInt(2));\n        }\n        rs.close();\n        ps.close();\n        conn.close();\n    }\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>http://foo.bar/baz:0\nhttp://foo.bar?baz:15\n</code></pre>\n\n<p>It appears that dkatzel is correct.  I searched the the <a href=\"http://download.oracle.com/otndocs/jcp/jdbc-4_1-mrel-spec/index.html\" rel=\"noreferrer\">JDBC Spec</a> and could not find any mention that the <code>?</code>  parameter marker would be ignored if it's within quotes, but the few implementations of PreparedStatement parsers that I found (<a href=\"http://www.docjar.com/html/api/com/mysql/jdbc/PreparedStatement.java.html\" rel=\"noreferrer\">MySql</a>,<a href=\"http://c-jdbc.ow2.org/current/doc/doxygen/english/html/PreparedStatement_8java-source.html\" rel=\"noreferrer\">c-JDBC</a>,<a href=\"http://h2database.googlecode.com/svn/trunk/h2/src/main/org/h2/command/Parser.java\" rel=\"noreferrer\">H2</a>) all appear to exclude text within single quotes from consideration as parameter markers.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":1,"creation_date":1392560621,"post_id":21812396,"comment_id":33009238,"body_markdown":"Any &quot;synchronized&quot; method or block is &quot;locked&quot; on entry such that only one thread at a time can execute that method/block (relative to the lock object).  Additionally, only one thread at a time can execute *any* method/block locked on the same object.  A static synchronized method is locked on the Class object.","body":"Any &quot;synchronized&quot; method or block is &quot;locked&quot; on entry such that only one thread at a time can execute that method/block (relative to the lock object).  Additionally, only one thread at a time can execute <i>any</i> method/block locked on the same object.  A static synchronized method is locked on the Class object."},{"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"score":2,"creation_date":1392561115,"post_id":21812396,"comment_id":33009379,"body_markdown":"@Zavior I don&#39;t think it&#39;s a duplicate - the question you linked is about &quot;how it is done&quot;, while this question is about &quot;why it is done&quot;.","body":"@Zavior I don&#39;t think it&#39;s a duplicate - the question you linked is about &quot;how it is done&quot;, while this question is about &quot;why it is done&quot;."},{"owner":{"account_id":471365,"reputation":6432,"user_id":879114,"accept_rate":89,"display_name":"Zavior"},"score":1,"creation_date":1392561210,"post_id":21812396,"comment_id":33009406,"body_markdown":"@dasblinkenlight I think you are right","body":"@dasblinkenlight I think you are right"}],"answers":[{"comments":[{"owner":{"account_id":79163,"reputation":12047,"user_id":224700,"display_name":"amar"},"score":3,"creation_date":1438940015,"post_id":21812453,"comment_id":51666650,"body_markdown":"Also see for more details - http://www.javatpoint.com/static-synchronization-example","body":"Also see for more details - <a href=\"http://www.javatpoint.com/static-synchronization-example\" rel=\"nofollow noreferrer\">javatpoint.com/static-synchronization-example</a>"},{"owner":{"account_id":6701313,"reputation":7980,"user_id":5167682,"accept_rate":29,"display_name":"roottraveller"},"score":5,"creation_date":1499060164,"post_id":21812453,"comment_id":76734840,"body_markdown":"best one in just 4 lines :)","body":"best one in just 4 lines :)"}],"tags":[],"owner":{"account_id":1617869,"reputation":4204,"user_id":1495049,"display_name":"Luis Pena"},"comment_count":2,"down_vote_count":1,"up_vote_count":74,"is_accepted":false,"score":73,"last_activity_date":1531837087,"creation_date":1392560767,"answer_id":21812453,"question_id":21812396,"body_markdown":"In simple words a `static synchronized` method will lock the class instead of the object, and it will lock the class because the keyword `static` means: &quot;class instead of instance&quot;.\r\n\r\nThe keyword `synchronized` means that only one thread can access the method at a time.  \r\nAnd `static synchronized` mean: \r\n\r\n&gt; Only one thread can access the class at one time.","title":"What is the use of static synchronized method in java?","body":"<p>In simple words a <code>static synchronized</code> method will lock the class instead of the object, and it will lock the class because the keyword <code>static</code> means: \"class instead of instance\".</p>\n\n<p>The keyword <code>synchronized</code> means that only one thread can access the method at a time.<br>\nAnd <code>static synchronized</code> mean: </p>\n\n<blockquote>\n  <p>Only one thread can access the class at one time.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":110,"is_accepted":true,"score":110,"last_activity_date":1392560780,"creation_date":1392560780,"answer_id":21812457,"question_id":21812396,"body_markdown":"In general, `synchronized` methods are used to protect access to resources that are accessed concurrently. When a resource that is being accessed concurrently belongs to each instance of your class, you use a `synchronized` instance method; when the resource belongs to all instances (i.e. when it is in a `static` variable) then you use a `synchronized static` method to access it.\r\n\r\nFor example, you could make a `static` factory method that keeps a &quot;registry&quot; of all objects that it has produced. A natural place for such registry would be a `static` collection. If your factory is used from multiple threads, you need to make the factory method `synchronized` (or have a `synchronized` block inside the method) to protect access to the shared `static` collection.\r\n\r\nNote that using `synchronized` without a specific lock object is generally not the safest choice when you are building a library to be used in code written by others. This is because malicious code could synchronize on your object or a class to block your own methods from executing. To protect your code against this, create a private &quot;lock&quot; object, instance or static, and synchronize on that object instead.","title":"What is the use of static synchronized method in java?","body":"<p>In general, <code>synchronized</code> methods are used to protect access to resources that are accessed concurrently. When a resource that is being accessed concurrently belongs to each instance of your class, you use a <code>synchronized</code> instance method; when the resource belongs to all instances (i.e. when it is in a <code>static</code> variable) then you use a <code>synchronized static</code> method to access it.</p>\n\n<p>For example, you could make a <code>static</code> factory method that keeps a \"registry\" of all objects that it has produced. A natural place for such registry would be a <code>static</code> collection. If your factory is used from multiple threads, you need to make the factory method <code>synchronized</code> (or have a <code>synchronized</code> block inside the method) to protect access to the shared <code>static</code> collection.</p>\n\n<p>Note that using <code>synchronized</code> without a specific lock object is generally not the safest choice when you are building a library to be used in code written by others. This is because malicious code could synchronize on your object or a class to block your own methods from executing. To protect your code against this, create a private \"lock\" object, instance or static, and synchronize on that object instead.</p>\n"},{"comments":[{"owner":{"account_id":2765664,"reputation":3857,"user_id":2381453,"accept_rate":33,"display_name":"Vicky Thakor"},"score":9,"creation_date":1455175605,"post_id":21812514,"comment_id":58373952,"body_markdown":"Hats off... This topic was not clear util I read your answer. Even java doc didn&#39;t give sight like you did.....","body":"Hats off... This topic was not clear util I read your answer. Even java doc didn&#39;t give sight like you did....."},{"owner":{"account_id":65080,"reputation":5716,"user_id":191761,"accept_rate":71,"display_name":"Adam Burley"},"score":0,"creation_date":1637397539,"post_id":21812514,"comment_id":123819702,"body_markdown":"what about just `synchronized { ... }` block inside a `static` method (i.e. without explicitly specifying the lock object for the synchronized block)? is it also equivalent, and assumes that the lock object to use is the class itself?","body":"what about just <code>synchronized { ... }</code> block inside a <code>static</code> method (i.e. without explicitly specifying the lock object for the synchronized block)? is it also equivalent, and assumes that the lock object to use is the class itself?"},{"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"score":2,"creation_date":1637426885,"post_id":21812514,"comment_id":123825539,"body_markdown":"@AdamBurley There is no such syntax. It will not compile.","body":"@AdamBurley There is no such syntax. It will not compile."}],"tags":[],"owner":{"account_id":935202,"reputation":49046,"user_id":964243,"accept_rate":66,"display_name":"Boann"},"comment_count":3,"down_vote_count":0,"up_vote_count":95,"is_accepted":false,"score":95,"last_activity_date":1539361235,"creation_date":1392561193,"answer_id":21812514,"question_id":21812396,"body_markdown":"At run time every loaded class has an instance of a [`Class`](https://docs.oracle.com/javase/9/docs/api/java/lang/Class.html) object. That is the object that is used as the shared lock object by `static synchronized` methods. (Any synchronized method or block has to lock on *some* shared object.)\r\n\r\nYou can also synchronize on this object manually if wanted (whether in a static method or not). These three methods behave the same, allowing only one thread at a time into the inner block:\r\n\r\n\tclass Foo {\r\n\t\tstatic synchronized void methodA() {\r\n\t\t\t// ...\r\n\t\t}\r\n\t\t\r\n\t\tstatic void methodB() {\r\n\t\t\tsynchronized (Foo.class) {\r\n\t\t\t\t// ...\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tstatic void methodC() {\r\n\t\t\tObject lock = Foo.class;\r\n\t\t\tsynchronized (lock) {\r\n\t\t\t\t// ...\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nThe intended purpose of `static synchronized` methods is when you want to allow only one thread at a time to use some mutable state stored in `static` variables of a class.\r\n\r\nNowadays, Java has more powerful concurrency features, in [`java.util.concurrent`](https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/package-summary.html) and its subpackages, but the core Java 1.0 constructs such as `synchronized` methods are still valid and usable.","title":"What is the use of static synchronized method in java?","body":"<p>At run time every loaded class has an instance of a <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/Class.html\" rel=\"noreferrer\"><code>Class</code></a> object. That is the object that is used as the shared lock object by <code>static synchronized</code> methods. (Any synchronized method or block has to lock on <em>some</em> shared object.)</p>\n\n<p>You can also synchronize on this object manually if wanted (whether in a static method or not). These three methods behave the same, allowing only one thread at a time into the inner block:</p>\n\n<pre><code>class Foo {\n    static synchronized void methodA() {\n        // ...\n    }\n\n    static void methodB() {\n        synchronized (Foo.class) {\n            // ...\n        }\n    }\n\n    static void methodC() {\n        Object lock = Foo.class;\n        synchronized (lock) {\n            // ...\n        }\n    }\n}\n</code></pre>\n\n<p>The intended purpose of <code>static synchronized</code> methods is when you want to allow only one thread at a time to use some mutable state stored in <code>static</code> variables of a class.</p>\n\n<p>Nowadays, Java has more powerful concurrency features, in <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/concurrent/package-summary.html\" rel=\"noreferrer\"><code>java.util.concurrent</code></a> and its subpackages, but the core Java 1.0 constructs such as <code>synchronized</code> methods are still valid and usable.</p>\n"},{"tags":[],"owner":{"account_id":13022686,"reputation":11,"user_id":9411547,"display_name":"Sarala Kumarage"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1540277775,"creation_date":1540277775,"answer_id":52942907,"question_id":21812396,"body_markdown":"static methods can be synchronized. But you have one lock per class. when the java class is loaded coresponding java.lang.class class object is there. That object&#39;s lock is needed for.static synchronized methods.\r\n So when you have a static field which should be restricted to be accessed by multiple threads at once you can set those fields private and create public static synchronized setters or getters to access those fields.","title":"What is the use of static synchronized method in java?","body":"<p>static methods can be synchronized. But you have one lock per class. when the java class is loaded coresponding java.lang.class class object is there. That object's lock is needed for.static synchronized methods.\n So when you have a static field which should be restricted to be accessed by multiple threads at once you can set those fields private and create public static synchronized setters or getters to access those fields.</p>\n"},{"comments":[{"owner":{"account_id":44321,"reputation":9248,"user_id":130028,"accept_rate":79,"display_name":"marcolopes"},"score":0,"creation_date":1688927670,"post_id":55916390,"comment_id":135136970,"body_markdown":"How about static variables?","body":"How about static variables?"}],"tags":[],"owner":{"account_id":15210307,"reputation":163,"user_id":10975356,"display_name":"Aman Gupta"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1556611393,"creation_date":1556611393,"answer_id":55916390,"question_id":21812396,"body_markdown":"Suppose there are multiple static synchronized methods (m1, m2, m3, m4) in a class, and suppose one thread is accessing m1, then no other thread at the same time can access any other static synchronized methods.","title":"What is the use of static synchronized method in java?","body":"<p>Suppose there are multiple static synchronized methods (m1, m2, m3, m4) in a class, and suppose one thread is accessing m1, then no other thread at the same time can access any other static synchronized methods.</p>\n"},{"tags":[],"owner":{"account_id":13455221,"reputation":51,"user_id":9708948,"display_name":"Ashutosh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582908553,"creation_date":1582908553,"answer_id":60456074,"question_id":21812396,"body_markdown":"Java VM contains a single class object per class. Each class may have some shared variables called static variables. If the critical section of the code plays with these variables in a concurrent environment, then we need to make that particular section as synchronized. When there is more than one static synchronized method only one of them will be executed at a time without preemption. That&#39;s what lock on class object does.","title":"What is the use of static synchronized method in java?","body":"<p>Java VM contains a single class object per class. Each class may have some shared variables called static variables. If the critical section of the code plays with these variables in a concurrent environment, then we need to make that particular section as synchronized. When there is more than one static synchronized method only one of them will be executed at a time without preemption. That's what lock on class object does.</p>\n"},{"comments":[{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1692156455,"post_id":76753386,"comment_id":135584316,"body_markdown":"This post has been placed in the answer section, but it sounds like it might be a question. Could you confirm whether this is an answer?","body":"This post has been placed in the answer section, but it sounds like it might be a question. Could you confirm whether this is an answer?"}],"tags":[],"owner":{"account_id":19155635,"reputation":1,"user_id":13992511,"display_name":"テックディーケ"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694944962,"creation_date":1690193055,"answer_id":76753386,"question_id":21812396,"body_markdown":"I think you&#39;ve already got your answer from above but I&#39;ll explain the question to ensure my knowledge.\r\n\r\nI believe here is an instance of *synchronized method locks currents instance of an object.*\r\n\r\n    //Your object\r\n\r\n    class Y {\r\n\r\n    //Method\r\n\r\n     void method(){\r\n\r\n    //No need synchronized lines of code\r\n   \r\n      synchronized (this) {\r\n\r\n    /* The lines of code *instance of an object* runing concurrently \r\n    without the outer block of code */\r\n\r\n    /* Synchronized method will execute only one current at a time if\r\n    it (the instance of the object) is concurrent and lock every other current */\r\n\r\n      }\r\n\r\n    //No need synchronized lines of code\r\n\r\n     }\r\n    }\r\n\r\nSo, in my opinion, the meaning of locking in class object in *Static Synchronized Method* is exactly the same as *Synchronized Method*\r\nbut in larger scale (Class Object)!\r\n","title":"What is the use of static synchronized method in java?","body":"<p>I think you've already got your answer from above but I'll explain the question to ensure my knowledge.</p>\n<p>I believe here is an instance of <em>synchronized method locks currents instance of an object.</em></p>\n<pre><code>//Your object\n\nclass Y {\n\n//Method\n\n void method(){\n\n//No need synchronized lines of code\n\n  synchronized (this) {\n\n/* The lines of code *instance of an object* runing concurrently \nwithout the outer block of code */\n\n/* Synchronized method will execute only one current at a time if\nit (the instance of the object) is concurrent and lock every other current */\n\n  }\n\n//No need synchronized lines of code\n\n }\n}\n</code></pre>\n<p>So, in my opinion, the meaning of locking in class object in <em>Static Synchronized Method</em> is exactly the same as <em>Synchronized Method</em>\nbut in larger scale (Class Object)!</p>\n"}],"owner":{"account_id":2081342,"reputation":1808,"user_id":1853261,"accept_rate":45,"display_name":"snehal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140248,"favorite_count":0,"down_vote_count":0,"up_vote_count":90,"accepted_answer_id":21812457,"answer_count":7,"score":90,"last_activity_date":1699014991,"creation_date":1392560499,"question_id":21812396,"body_markdown":"I have one question in my mind. I have read that static synchronized method locks in the class object \r\nand synchronized method locks the current instance of an object. So what&#39;s the meaning of *locked* \r\non class object?\r\n\r\nCan anyone please help me on this topic?","title":"What is the use of static synchronized method in java?","body":"<p>I have one question in my mind. I have read that static synchronized method locks in the class object\nand synchronized method locks the current instance of an object. So what's the meaning of <em>locked</em>\non class object?</p>\n<p>Can anyone please help me on this topic?</p>\n"},{"tags":["java","spring","jboss","axis"],"comments":[{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":0,"creation_date":1699017022,"post_id":77416711,"comment_id":136481112,"body_markdown":"did you tru: &lt;rewrite pattern=&quot;^ws(.*)$&quot; substitution=&quot;webproject/services/$1&quot; flags=&quot;L&quot;/&gt;","body":"did you tru: &lt;rewrite pattern=&quot;^ws(.*)$&quot; substitution=&quot;webproject/services/$1&quot; flags=&quot;L&quot;/&gt;"},{"owner":{"account_id":15722086,"reputation":33,"user_id":11344714,"display_name":"Homselan"},"score":0,"creation_date":1699259966,"post_id":77416711,"comment_id":136504349,"body_markdown":"Yes, not working","body":"Yes, not working"}],"owner":{"account_id":15722086,"reputation":33,"user_id":11344714,"display_name":"Homselan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699014893,"creation_date":1699014893,"question_id":77416711,"body_markdown":"I have a Eclipse project with a webproject and a SOAP service created with Axis. It generates only one war. My server is Jboss 7.1\r\n\r\nMy url for webroject and webservice are working fine:\r\n\r\n*http://server/webproject/index.jsp*\r\n\r\n*http://server/webproject/services/services?wsdl*\r\n\r\nI want to modify only webservice url context to be diferent like this:\r\n*http://server/ws/services?wsdl*\r\n\r\nThe url web must continue working on *http://server/webproject/index.jsp*\r\n\r\nI have tried to modify standalone.xml to redirect it so if I use\r\n*http://server/ws/services?wsdl* it will be redirected to:\r\n*http://server/webproject/services/services?wsdl*\r\n  \r\nThis is the code I have tried but it doesnt work fine, I cant replace &quot;*ws*&quot; for &quot;*webproject/services*&quot;. It only replace *&quot;webproject&quot;*\r\n\r\n    &lt;virtual-server name=&quot;default-host&quot; enable-welcome-root=&quot;true&quot;&gt;\r\n                    &lt;alias name=&quot;localhost&quot;/&gt;\r\n                    &lt;rewrite pattern=&quot;^/ws(.*)$&quot; substitution=&quot;/webproject/services/$1&quot; flags=&quot;L&quot;/&gt;\r\n                &lt;/virtual-server&gt;","title":"Rewrite pattern in Jboss","body":"<p>I have a Eclipse project with a webproject and a SOAP service created with Axis. It generates only one war. My server is Jboss 7.1</p>\n<p>My url for webroject and webservice are working fine:</p>\n<p><em>http://server/webproject/index.jsp</em></p>\n<p><em>http://server/webproject/services/services?wsdl</em></p>\n<p>I want to modify only webservice url context to be diferent like this:\n<em>http://server/ws/services?wsdl</em></p>\n<p>The url web must continue working on <em>http://server/webproject/index.jsp</em></p>\n<p>I have tried to modify standalone.xml to redirect it so if I use\n<em>http://server/ws/services?wsdl</em> it will be redirected to:\n<em>http://server/webproject/services/services?wsdl</em></p>\n<p>This is the code I have tried but it doesnt work fine, I cant replace &quot;<em>ws</em>&quot; for &quot;<em>webproject/services</em>&quot;. It only replace <em>&quot;webproject&quot;</em></p>\n<pre><code>&lt;virtual-server name=&quot;default-host&quot; enable-welcome-root=&quot;true&quot;&gt;\n                &lt;alias name=&quot;localhost&quot;/&gt;\n                &lt;rewrite pattern=&quot;^/ws(.*)$&quot; substitution=&quot;/webproject/services/$1&quot; flags=&quot;L&quot;/&gt;\n            &lt;/virtual-server&gt;\n</code></pre>\n"},{"tags":["java","android","asynchronous","nullpointerexception"],"comments":[{"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"score":0,"creation_date":1698987384,"post_id":77414095,"comment_id":136476802,"body_markdown":"It complies, but it doesn&#39;t display anything. and I&#39;m pretty sure its because context in  recyclerAdapter recyclerAdapter = new recyclerAdapter(context, itemText) is null","body":"It complies, but it doesn&#39;t display anything. and I&#39;m pretty sure its because context in  recyclerAdapter recyclerAdapter = new recyclerAdapter(context, itemText) is null"},{"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"score":0,"creation_date":1698987852,"post_id":77414095,"comment_id":136476852,"body_markdown":"No its a separate class. Would it make any difference if I put it in MainActivity?","body":"No its a separate class. Would it make any difference if I put it in MainActivity?"},{"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"score":0,"creation_date":1698989695,"post_id":77414095,"comment_id":136477000,"body_markdown":"&quot;Yes its null as you did not assign a value to the variable. Add a constructor for the task with a context as parameter. From where do you call the task?&quot; I&#39;m not totally sure what you mean here?","body":"&quot;Yes its null as you did not assign a value to the variable. Add a constructor for the task with a context as parameter. From where do you call the task?&quot; I&#39;m not totally sure what you mean here?"},{"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"score":0,"creation_date":1698990861,"post_id":77414095,"comment_id":136477081,"body_markdown":"Alright I put async into mainactivity and tried to make the code a little more readable and I call execute from onClick","body":"Alright I put async into mainactivity and tried to make the code a little more readable and I call execute from onClick"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1699000379,"post_id":77414095,"comment_id":136478219,"body_markdown":"Its time you tell us if all works as expected.","body":"Its time you tell us if all works as expected."},{"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"score":0,"creation_date":1699000565,"post_id":77414095,"comment_id":136478248,"body_markdown":"I changed all that stuff, but it still doesn&#39;t work. Context is still null","body":"I changed all that stuff, but it still doesn&#39;t work. Context is still null"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1699002853,"post_id":77414095,"comment_id":136478624,"body_markdown":"Of course as you did not add a constructor to the task that takes a Context as parameter. Then you would change the call to: DeserializeItem di = new DeserializeItem(MainActivity.this);","body":"Of course as you did not add a constructor to the task that takes a Context as parameter. Then you would change the call to: DeserializeItem di = new DeserializeItem(MainActivity.this);"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1699003024,"post_id":77414095,"comment_id":136478653,"body_markdown":"But.... You do not need that context variable and constructor at all as at creating the adapter you could change `(MainActivity) context` to MainActivity.this.","body":"But.... You do not need that context variable and constructor at all as at creating the adapter you could change <code>(MainActivity) context</code> to MainActivity.this."},{"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"score":0,"creation_date":1699003603,"post_id":77414095,"comment_id":136478764,"body_markdown":"Oh thank you very much, changing it to MainActivity.this managed to get it to work!","body":"Oh thank you very much, changing it to MainActivity.this managed to get it to work!"}],"answers":[{"tags":[],"owner":{"account_id":12896741,"reputation":23,"user_id":9326867,"display_name":"AndroidNoob"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1699013709,"creation_date":1699013709,"answer_id":77416603,"question_id":77414095,"body_markdown":"Changing `(MainActivity) context` to `MainActivity.this` should resolve this issue. \r\n\r\nI reckon that even if this resolves the issue, this is not the best approach to use context. This can result into context leaking. \r\n\r\nYou should rather create a listener to get callback of the items from Async task to the activity. By doing this, all your context and recycler view related stuff will reside in Activity as it should be. \r\n\r\nFor Ex. \r\n\r\n    interface DataCallback{\r\n        public void getData(List&lt;Data&gt; data);\r\n    }\r\n\r\nAnd from Async task:\r\n\r\n    listener.getData(data);\r\n\r\n","title":"Context is null in onPostExecute in android stuido uisng Java?","body":"<p>Changing <code>(MainActivity) context</code> to <code>MainActivity.this</code> should resolve this issue.</p>\n<p>I reckon that even if this resolves the issue, this is not the best approach to use context. This can result into context leaking.</p>\n<p>You should rather create a listener to get callback of the items from Async task to the activity. By doing this, all your context and recycler view related stuff will reside in Activity as it should be.</p>\n<p>For Ex.</p>\n<pre><code>interface DataCallback{\n    public void getData(List&lt;Data&gt; data);\n}\n</code></pre>\n<p>And from Async task:</p>\n<pre><code>listener.getData(data);\n</code></pre>\n"}],"owner":{"account_id":12279151,"reputation":15,"user_id":8961360,"display_name":"Tiana"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699013709,"creation_date":1698983502,"question_id":77414095,"body_markdown":"I&#39;m having issues getting a recycler view to display text. I&#39;m pretty sure its because context is null\r\n\r\nMain Activity\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n\r\n    private RecyclerView recyclerView;\r\n    private TextView textView;\r\n    private Button button;\r\n    //private RecyclerView output2;\r\n\r\n    @SuppressLint(&quot;MissingInflatedId&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        textView = (TextView) findViewById(R.id.outputTextView);\r\n        recyclerView = (RecyclerView) findViewById(R.id.recyclerView);\r\n        button = (Button) findViewById(R.id.getItemsButton);\r\n        //make textview scrollable\r\n        textView.setMovementMethod(new ScrollingMovementMethod());\r\n\r\n        String s1[] = new String[0];\r\n        /*try {\r\n            s1 = new String[]{new deserializeItem().toString()};\r\n        } catch (IOException | JSONException e) {\r\n            throw new RuntimeException(e);\r\n        }*/\r\n\r\n        //recyclerAdapter recyclerAdapter = new recyclerAdapter(this, s1);\r\n\r\n        recyclerView.setLayoutManager(new LinearLayoutManager(this));\r\n\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                try {\r\n                    String itemText = new DeserializeItem().toString();\r\n                    DeserializeItem di = new DeserializeItem();\r\n                    di.execute(&quot;temp&quot;);\r\n                    //output.setText(itemText);\r\n                    //output2.setAdapter(recyclerAdapter);\r\n\r\n                } catch (Exception e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public class DeserializeItem extends AsyncTask&lt;String, String, List&lt;Item&gt;&gt; {\r\n        private Context context;\r\n\r\n\r\n        @Override\r\n        protected List&lt;Item&gt; doInBackground(String... urls) {\r\n            try {\r\n                String itemText = &quot;&quot;;\r\n                String jsonUrl = &quot;json url here&quot;;\r\n                Gson gson = new Gson();\r\n\r\n                //Reads data from JSON File and converts it to a string\r\n                InputStream is = new URL(jsonUrl).openStream();\r\n                String jsonTxt = IOUtils.toString(is, &quot;UTF-8&quot;);\r\n                is.close();\r\n\r\n                //Convert json string to array of Item objects\r\n                Item[] items = gson.fromJson(jsonTxt, Item[].class);\r\n                List&lt;Item&gt; itemList = new ArrayList&lt;Item&gt;();\r\n\r\n                //Eliminates objects with null and empty item names\r\n                for (int i=0; i&lt;items.length; i++)\r\n                {\r\n                    if (items[i].getItemName() == null) {continue;}\r\n                    else if (items[i].getItemName().equals(&quot;&quot;)) {continue;}\r\n                    else {itemList.add(items[i]);}\r\n                }\r\n\r\n                //Sorts by list ID, then sorts naturally by name\r\n                Comparator&lt;Item&gt; comparator\r\n                        = Comparator.comparing(Item::getListId)\r\n                        .thenComparing(value -&gt; {\r\n                            int indexOf = value.name.indexOf(&#39; &#39;);\r\n                            return Integer.parseInt(value.name.substring(indexOf + 1));\r\n                        });\r\n                Collections.sort(itemList, comparator);\r\n                return itemList;\r\n\r\n                //converts items to a string to be returned and displayed.\r\n            /*for (int i=0; i&lt;itemList.size(); i++)\r\n            {\r\n                itemText += itemList.get(i).toString();\r\n            }\r\n            return itemText;*/\r\n            }\r\n            catch(IOException e){\r\n                throw new RuntimeException(e);\r\n                //return &quot;Unable to retrieve web page. URL may be invalid&quot;;\r\n            }\r\n        }\r\n\r\n        @Override\r\n        protected void onPostExecute(List&lt;Item&gt; itemList)\r\n        {\r\n            //super.onPostExecute(itemList);\r\n            int duration = Toast.LENGTH_SHORT;\r\n            //Toast.makeText((MainActivity)context, &quot;Your Message&quot;, Toast.LENGTH_LONG).show();\r\n            String[] itemText = new String[itemList.size()];\r\n            for (int i=0; i&lt;itemList.size(); i++)\r\n            {\r\n                itemText[i] = itemList.get(i).toString();\r\n            }\r\n            if (context != null)\r\n            {\r\n                putDataIntoRecyclerView(itemText);\r\n            }\r\n\r\n        /*try\r\n        {\r\n            Gson gson = new Gson();\r\n            JSONObject jsonObject = new JSONObject(jsonText);\r\n            Item[] items = gson.fromJson(jsonText, Item[].class);\r\n        } catch (JSONException e) {\r\n            throw new RuntimeException(e);\r\n        }*/\r\n        }\r\n\r\n        void putDataIntoRecyclerView(String[] itemList)\r\n        {\r\n            RecyclerAdapter recyclerAdapter = new RecyclerAdapter((MainActivity) context, itemList);\r\n            recyclerView.setAdapter(recyclerAdapter);\r\n        }\r\n    }\r\n\r\nrecylcerAdapater\r\n\r\n    public class RecyclerAdapter extends RecyclerView.Adapter&lt;RecyclerAdapter.MyViewHolder&gt; {\r\n\r\n    //String id[], listID[], name[];\r\n    String info[];\r\n    MainActivity context;\r\n    //public recyclerAdapter(Context ct, String s1[], String s2[], String s3[]){\r\n    public RecyclerAdapter(MainActivity ct, String[] s1){\r\n        context = ct;\r\n        info = s1;\r\n    }\r\n\r\n    public &lt;deserializeItem&gt; RecyclerAdapter(deserializeItem deserializeItem, String itemText) {\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        LayoutInflater inflater = LayoutInflater.from(context);\r\n        View view = inflater.inflate(R.layout.recycler_view_item, parent, false);\r\n        return new MyViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull RecyclerAdapter.MyViewHolder holder, int position) {\r\n        holder.textView1.setText(info[position]);\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return info.length;\r\n    }\r\n\r\n    public class MyViewHolder extends RecyclerView.ViewHolder{\r\n        TextView textView1;\r\n        public MyViewHolder(@NonNull View itemView){\r\n            super(itemView);\r\n            textView1 = itemView.findViewById(R.id.textView1);\r\n        }\r\n    }\r\n}\r\n\r\nI&#39;m not sure if I&#39;m not going about things the correct way or not, but I can&#39;t get anything to display in the program. I do know that if I remove \r\n\r\n&gt; if (context != null)\r\n        {\r\n            recyclerAdapter recyclerAdapter = new recyclerAdapter((MainActivity) context, itemText);\r\n            putDataIntoRecyclerView(itemText);\r\n        }\r\n\r\nit&#39;ll give me a Null Pointer Exception.\r\n\r\nPlease forgive me if my question isn&#39;t well articulated or formatted, I&#39;m pretty new to asking stuff on StackOverflow.","title":"Context is null in onPostExecute in android stuido uisng Java?","body":"<p>I'm having issues getting a recycler view to display text. I'm pretty sure its because context is null</p>\n<p>Main Activity</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nprivate RecyclerView recyclerView;\nprivate TextView textView;\nprivate Button button;\n//private RecyclerView output2;\n\n@SuppressLint(&quot;MissingInflatedId&quot;)\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    textView = (TextView) findViewById(R.id.outputTextView);\n    recyclerView = (RecyclerView) findViewById(R.id.recyclerView);\n    button = (Button) findViewById(R.id.getItemsButton);\n    //make textview scrollable\n    textView.setMovementMethod(new ScrollingMovementMethod());\n\n    String s1[] = new String[0];\n    /*try {\n        s1 = new String[]{new deserializeItem().toString()};\n    } catch (IOException | JSONException e) {\n        throw new RuntimeException(e);\n    }*/\n\n    //recyclerAdapter recyclerAdapter = new recyclerAdapter(this, s1);\n\n    recyclerView.setLayoutManager(new LinearLayoutManager(this));\n\n    button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            try {\n                String itemText = new DeserializeItem().toString();\n                DeserializeItem di = new DeserializeItem();\n                di.execute(&quot;temp&quot;);\n                //output.setText(itemText);\n                //output2.setAdapter(recyclerAdapter);\n\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            }\n        }\n    });\n}\n\npublic class DeserializeItem extends AsyncTask&lt;String, String, List&lt;Item&gt;&gt; {\n    private Context context;\n\n\n    @Override\n    protected List&lt;Item&gt; doInBackground(String... urls) {\n        try {\n            String itemText = &quot;&quot;;\n            String jsonUrl = &quot;json url here&quot;;\n            Gson gson = new Gson();\n\n            //Reads data from JSON File and converts it to a string\n            InputStream is = new URL(jsonUrl).openStream();\n            String jsonTxt = IOUtils.toString(is, &quot;UTF-8&quot;);\n            is.close();\n\n            //Convert json string to array of Item objects\n            Item[] items = gson.fromJson(jsonTxt, Item[].class);\n            List&lt;Item&gt; itemList = new ArrayList&lt;Item&gt;();\n\n            //Eliminates objects with null and empty item names\n            for (int i=0; i&lt;items.length; i++)\n            {\n                if (items[i].getItemName() == null) {continue;}\n                else if (items[i].getItemName().equals(&quot;&quot;)) {continue;}\n                else {itemList.add(items[i]);}\n            }\n\n            //Sorts by list ID, then sorts naturally by name\n            Comparator&lt;Item&gt; comparator\n                    = Comparator.comparing(Item::getListId)\n                    .thenComparing(value -&gt; {\n                        int indexOf = value.name.indexOf(' ');\n                        return Integer.parseInt(value.name.substring(indexOf + 1));\n                    });\n            Collections.sort(itemList, comparator);\n            return itemList;\n\n            //converts items to a string to be returned and displayed.\n        /*for (int i=0; i&lt;itemList.size(); i++)\n        {\n            itemText += itemList.get(i).toString();\n        }\n        return itemText;*/\n        }\n        catch(IOException e){\n            throw new RuntimeException(e);\n            //return &quot;Unable to retrieve web page. URL may be invalid&quot;;\n        }\n    }\n\n    @Override\n    protected void onPostExecute(List&lt;Item&gt; itemList)\n    {\n        //super.onPostExecute(itemList);\n        int duration = Toast.LENGTH_SHORT;\n        //Toast.makeText((MainActivity)context, &quot;Your Message&quot;, Toast.LENGTH_LONG).show();\n        String[] itemText = new String[itemList.size()];\n        for (int i=0; i&lt;itemList.size(); i++)\n        {\n            itemText[i] = itemList.get(i).toString();\n        }\n        if (context != null)\n        {\n            putDataIntoRecyclerView(itemText);\n        }\n\n    /*try\n    {\n        Gson gson = new Gson();\n        JSONObject jsonObject = new JSONObject(jsonText);\n        Item[] items = gson.fromJson(jsonText, Item[].class);\n    } catch (JSONException e) {\n        throw new RuntimeException(e);\n    }*/\n    }\n\n    void putDataIntoRecyclerView(String[] itemList)\n    {\n        RecyclerAdapter recyclerAdapter = new RecyclerAdapter((MainActivity) context, itemList);\n        recyclerView.setAdapter(recyclerAdapter);\n    }\n}\n</code></pre>\n<p>recylcerAdapater</p>\n<pre><code>public class RecyclerAdapter extends RecyclerView.Adapter&lt;RecyclerAdapter.MyViewHolder&gt; {\n\n//String id[], listID[], name[];\nString info[];\nMainActivity context;\n//public recyclerAdapter(Context ct, String s1[], String s2[], String s3[]){\npublic RecyclerAdapter(MainActivity ct, String[] s1){\n    context = ct;\n    info = s1;\n}\n\npublic &lt;deserializeItem&gt; RecyclerAdapter(deserializeItem deserializeItem, String itemText) {\n}\n\n@NonNull\n@Override\npublic MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n    LayoutInflater inflater = LayoutInflater.from(context);\n    View view = inflater.inflate(R.layout.recycler_view_item, parent, false);\n    return new MyViewHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(@NonNull RecyclerAdapter.MyViewHolder holder, int position) {\n    holder.textView1.setText(info[position]);\n}\n\n@Override\npublic int getItemCount() {\n    return info.length;\n}\n\npublic class MyViewHolder extends RecyclerView.ViewHolder{\n    TextView textView1;\n    public MyViewHolder(@NonNull View itemView){\n        super(itemView);\n        textView1 = itemView.findViewById(R.id.textView1);\n    }\n}\n</code></pre>\n<p>}</p>\n<p>I'm not sure if I'm not going about things the correct way or not, but I can't get anything to display in the program. I do know that if I remove</p>\n<blockquote>\n<p>if (context != null)\n{\nrecyclerAdapter recyclerAdapter = new recyclerAdapter((MainActivity) context, itemText);\nputDataIntoRecyclerView(itemText);\n}</p>\n</blockquote>\n<p>it'll give me a Null Pointer Exception.</p>\n<p>Please forgive me if my question isn't well articulated or formatted, I'm pretty new to asking stuff on StackOverflow.</p>\n"},{"tags":["java","swing"],"owner":{"account_id":12545845,"reputation":1,"user_id":9129196,"display_name":"wachtelbird"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699013456,"answer_count":0,"score":0,"last_activity_date":1699013527,"creation_date":1699013358,"question_id":77416568,"body_markdown":"I just started learning Java, and I&#39;m wondering if I chose the correct way of checking if the user clicked Cancel or X on JOptionPane.showInputDialog? Please see the code:\r\n\r\n```\r\nimport javax.swing.*;\r\n\r\npublic class Main {\r\n    private static double a;\r\n    private static double b;\r\n\r\n    public static void main(String[] args) {\r\n        requestA();\r\n    }\r\n    private static void requestA() {\r\n        String aString = JOptionPane.showInputDialog(&quot;Input a&quot;);\r\n        try {\r\n            a = Double.parseDouble(aString);\r\n            requestB();\r\n        } catch (NumberFormatException e) {\r\n            JOptionPane.showMessageDialog(null, &quot;Input a number!&quot;);\r\n            requestA();\r\n        } catch (NullPointerException e) {\r\n            System.exit(1);\r\n        }\r\n    }\r\n    private static void requestB() {\r\n        String bString = JOptionPane.showInputDialog(&quot;Input b&quot;);\r\n        try {\r\n            b = Double.parseDouble(bString);\r\n            showResult();\r\n        } catch (NumberFormatException e) {\r\n            JOptionPane.showMessageDialog(null, &quot;Input a number!&quot;);\r\n            requestB();\r\n        } catch (NullPointerException e) {\r\n            System.exit(1);\r\n        }\r\n    }\r\n    private static void showResult() {\r\n        double x = Math.sqrt(a * a + b * b);\r\n        JOptionPane.showMessageDialog(null, x);\r\n        requestA();\r\n    }\r\n}\r\n```\r\nAnd generally speaking, if you have any recommendations on how to organize the above code better, please share.\r\n\r\nThank you in advance!\r\n\r\nThe above code is working, I&#39;m asking if there is a better way to achieve the same.","title":"JOptionPane.showInputDialog: what is the best way to check that the Cancel or X was clicked?","body":"<p>I just started learning Java, and I'm wondering if I chose the correct way of checking if the user clicked Cancel or X on JOptionPane.showInputDialog? Please see the code:</p>\n<pre><code>import javax.swing.*;\n\npublic class Main {\n    private static double a;\n    private static double b;\n\n    public static void main(String[] args) {\n        requestA();\n    }\n    private static void requestA() {\n        String aString = JOptionPane.showInputDialog(&quot;Input a&quot;);\n        try {\n            a = Double.parseDouble(aString);\n            requestB();\n        } catch (NumberFormatException e) {\n            JOptionPane.showMessageDialog(null, &quot;Input a number!&quot;);\n            requestA();\n        } catch (NullPointerException e) {\n            System.exit(1);\n        }\n    }\n    private static void requestB() {\n        String bString = JOptionPane.showInputDialog(&quot;Input b&quot;);\n        try {\n            b = Double.parseDouble(bString);\n            showResult();\n        } catch (NumberFormatException e) {\n            JOptionPane.showMessageDialog(null, &quot;Input a number!&quot;);\n            requestB();\n        } catch (NullPointerException e) {\n            System.exit(1);\n        }\n    }\n    private static void showResult() {\n        double x = Math.sqrt(a * a + b * b);\n        JOptionPane.showMessageDialog(null, x);\n        requestA();\n    }\n}\n</code></pre>\n<p>And generally speaking, if you have any recommendations on how to organize the above code better, please share.</p>\n<p>Thank you in advance!</p>\n<p>The above code is working, I'm asking if there is a better way to achieve the same.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":13446567,"reputation":834,"user_id":9702353,"display_name":"Aritra Paul"},"score":0,"creation_date":1551067815,"post_id":54859201,"comment_id":96489706,"body_markdown":"I am not seeing any `userId` in your &#39;User&#39; class","body":"I am not seeing any <code>userId</code> in your &#39;User&#39; class"},{"owner":{"account_id":11458077,"reputation":55,"user_id":8398493,"display_name":"QYC"},"score":0,"creation_date":1551068320,"post_id":54859201,"comment_id":96489781,"body_markdown":"@AritraPaul I use `@Query` annotation and I specify the condition to User&#39;s email, so it doesn&#39;t matter whether userId exists or not","body":"@AritraPaul I use <code>@Query</code> annotation and I specify the condition to User&#39;s email, so it doesn&#39;t matter whether userId exists or not"},{"owner":{"account_id":13446567,"reputation":834,"user_id":9702353,"display_name":"Aritra Paul"},"score":0,"creation_date":1551070689,"post_id":54859201,"comment_id":96490266,"body_markdown":"That&#39;s not the convention. try to follow convention and stick to it","body":"That&#39;s not the convention. try to follow convention and stick to it"},{"owner":{"account_id":4463542,"reputation":2889,"user_id":3631743,"accept_rate":81,"display_name":"BSeitkazin"},"score":0,"creation_date":1551078382,"post_id":54859201,"comment_id":96492677,"body_markdown":"@QYC, also I suggest you, to make standart repository queries, like `findAll()`, if it shows some result - good, if not - there are some problem in your codebase or configuration. so you need debugging.","body":"@QYC, also I suggest you, to make standart repository queries, like <code>findAll()</code>, if it shows some result - good, if not - there are some problem in your codebase or configuration. so you need debugging."},{"owner":{"account_id":11458077,"reputation":55,"user_id":8398493,"display_name":"QYC"},"score":0,"creation_date":1551079030,"post_id":54859201,"comment_id":96492948,"body_markdown":"@BSeitkazin wow, the findAll() also returns null...","body":"@BSeitkazin wow, the findAll() also returns null..."},{"owner":{"account_id":4463542,"reputation":2889,"user_id":3631743,"accept_rate":81,"display_name":"BSeitkazin"},"score":0,"creation_date":1551079760,"post_id":54859201,"comment_id":96493262,"body_markdown":"@QYC, so I think I found a clue. I update my answer)","body":"@QYC, so I think I found a clue. I update my answer)"},{"owner":{"account_id":4463542,"reputation":2889,"user_id":3631743,"accept_rate":81,"display_name":"BSeitkazin"},"score":0,"creation_date":1551082618,"post_id":54859201,"comment_id":96494523,"body_markdown":"@QYC, updated answer.","body":"@QYC, updated answer."}],"answers":[{"comments":[{"owner":{"account_id":11458077,"reputation":55,"user_id":8398493,"display_name":"QYC"},"score":0,"creation_date":1551073507,"post_id":54859818,"comment_id":96491023,"body_markdown":"It still returns null...I&#39;ve changed the interface as you suggested: `List&lt;Order&gt; findAllByUserEmail(String email);`","body":"It still returns null...I&#39;ve changed the interface as you suggested: <code>List&lt;Order&gt; findAllByUserEmail(String email);</code>"},{"owner":{"account_id":13446567,"reputation":834,"user_id":9702353,"display_name":"Aritra Paul"},"score":1,"creation_date":1551074522,"post_id":54859818,"comment_id":96491330,"body_markdown":"You make `email` as `@Id` which makes it unique. That means there is no chance of getting a list I have updated my answer. Have a try","body":"You make <code>email</code> as <code>@Id</code> which makes it unique. That means there is no chance of getting a list I have updated my answer. Have a try"},{"owner":{"account_id":11458077,"reputation":55,"user_id":8398493,"display_name":"QYC"},"score":0,"creation_date":1551075509,"post_id":54859818,"comment_id":96491630,"body_markdown":"there is a **uni-directional** `many-to-one` relation between Order and User, what I want to do is to fetch Order which is owned by a specific User, and an user can map to many orders, therefore it should return a list instead of a single result.","body":"there is a <b>uni-directional</b> <code>many-to-one</code> relation between Order and User, what I want to do is to fetch Order which is owned by a specific User, and an user can map to many orders, therefore it should return a list instead of a single result."}],"tags":[],"owner":{"account_id":13446567,"reputation":834,"user_id":9702353,"display_name":"Aritra Paul"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551074192,"creation_date":1551071387,"answer_id":54859818,"question_id":54859201,"body_markdown":"Your code is ambiguous. if you want to get order list by email then just write like below. There is no need of `@Query`\r\n\r\n    \r\n    public interface OrderRepository extends JpaRepository&lt;Order, Long&gt; {\r\n    \r\n        List&lt;Order&gt; findAllByUserEmail(String email);\r\n    \r\n    }\r\nand entity class like below\r\n\r\n\r\nI&#39;m using springboot 2.1.2 and I encounter some problems with repository. Here are my entity classes:\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;orders&quot;)\r\n    public class Order {\r\n        @Id\r\n        @GeneratedValue\r\n        private Long id;\r\n    \r\n        @ManyToOne(targetEntity = User.class)\r\n        private User user;\r\n    \r\n        //other fields and getters and setters are ignored\r\n    }\r\n    \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class User {\r\n    \r\n        @Id\r\n        private Long userId;\r\n        private String email;\r\n    \r\n        //other fields and getters and setters are ignored\r\n    }\r\n\r\n","title":"Springdata JPA repository findAllByXXX() return null instead of an empty list","body":"<p>Your code is ambiguous. if you want to get order list by email then just write like below. There is no need of <code>@Query</code></p>\n\n<pre><code>public interface OrderRepository extends JpaRepository&lt;Order, Long&gt; {\n\n    List&lt;Order&gt; findAllByUserEmail(String email);\n\n}\n</code></pre>\n\n<p>and entity class like below</p>\n\n<p>I'm using springboot 2.1.2 and I encounter some problems with repository. Here are my entity classes:</p>\n\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@Table(name = \"orders\")\npublic class Order {\n    @Id\n    @GeneratedValue\n    private Long id;\n\n    @ManyToOne(targetEntity = User.class)\n    private User user;\n\n    //other fields and getters and setters are ignored\n}\n\n@Entity\n@Getter\n@Setter\n@NoArgsConstructor\npublic class User {\n\n    @Id\n    private Long userId;\n    private String email;\n\n    //other fields and getters and setters are ignored\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4463542,"reputation":2889,"user_id":3631743,"accept_rate":81,"display_name":"BSeitkazin"},"score":0,"creation_date":1551080562,"post_id":54860752,"comment_id":96493581,"body_markdown":"@QYC, Are you sure, your table&#39;s name is `orders`? Which query generates Spring Data? What if you execute query in your DB engine? What is table structure in your DB? I really think that, you make some typo mistake.","body":"@QYC, Are you sure, your table&#39;s name is <code>orders</code>? Which query generates Spring Data? What if you execute query in your DB engine? What is table structure in your DB? I really think that, you make some typo mistake."},{"owner":{"account_id":11458077,"reputation":55,"user_id":8398493,"display_name":"QYC"},"score":0,"creation_date":1551081199,"post_id":54860752,"comment_id":96493879,"body_markdown":"I&#39;ve updated my question, hope the additional information may help","body":"I&#39;ve updated my question, hope the additional information may help"}],"tags":[],"owner":{"account_id":4463542,"reputation":2889,"user_id":3631743,"accept_rate":81,"display_name":"BSeitkazin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551082600,"creation_date":1551076855,"answer_id":54860752,"question_id":54859201,"body_markdown":"The following method signature in your `OrderRepository` interface should work:\r\n\r\n    List&lt;Order&gt; findByUser_UserEmail(String email);\r\n\r\nAlso, you can add the next one:\r\n\r\n    @Query(&quot;select o from Order o join User u where u.email = :email&quot;) List&lt;Order&gt; findAllByUserEmail(String email);\r\n\r\n**UPDATE**\r\n\r\nTry to query all entities, trying executing `findAll` from repository, if it is also `null`, you have some problem in codebase or configuration. \r\n\r\n\r\n----------\r\nTry to update your class map definition: \r\n\r\n    public class Order {\r\n\t    @ManyToOne\r\n    \t@JoinColumn(name=&quot;user_email&quot;)\r\n\t    private User user;\r\n\r\n    }\r\n\r\n    public class User {\r\n\t    @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\r\n    \tprivate Set&lt;Order&gt; orders;\r\n    }","title":"Springdata JPA repository findAllByXXX() return null instead of an empty list","body":"<p>The following method signature in your <code>OrderRepository</code> interface should work:</p>\n\n<pre><code>List&lt;Order&gt; findByUser_UserEmail(String email);\n</code></pre>\n\n<p>Also, you can add the next one:</p>\n\n<pre><code>@Query(\"select o from Order o join User u where u.email = :email\") List&lt;Order&gt; findAllByUserEmail(String email);\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Try to query all entities, trying executing <code>findAll</code> from repository, if it is also <code>null</code>, you have some problem in codebase or configuration. </p>\n\n<hr>\n\n<p>Try to update your class map definition: </p>\n\n<pre><code>public class Order {\n    @ManyToOne\n    @JoinColumn(name=\"user_email\")\n    private User user;\n\n}\n\npublic class User {\n    @OneToMany(mappedBy = \"user\", cascade = CascadeType.ALL)\n    private Set&lt;Order&gt; orders;\n}\n</code></pre>\n"}],"owner":{"account_id":11458077,"reputation":55,"user_id":8398493,"display_name":"QYC"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9808,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1699012980,"creation_date":1551066123,"question_id":54859201,"body_markdown":"I&#39;m using springboot 2.1.2 and I encounter some problems with repository.\r\nHere are my entity classes:\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @Table(name = &quot;orders&quot;)\r\n    public class Order {\r\n        @Id\r\n        @GeneratedValue\r\n        private long id;\r\n\r\n        @ManyToOne(targetEntity = User.class)\r\n        private User user;\r\n\r\n        //other fields and getters and setters are ignored\r\n    }\r\n\r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class User {\r\n\r\n        @Id\r\n        private String email;\r\n        \r\n        //other fields and getters and setters are ignored\r\n    }\r\n\r\nAnd my OrderRepository:\r\n\r\n    @Repository\r\n    public interface OrderRepository extends JpaRepository&lt;Order, Long&gt; {\r\n\r\n        @Query(&quot;select o from Order o where o.user.email = ?1&quot;)\r\n        List&lt;Order&gt; findAllByUserId(String userId);\r\n\r\n        List&lt;Order&gt; findAllByUser(User user);\r\n    }\r\n\r\nWhen I invoke findAllByUserId or findAllByUser, the repository returns a **null value** instead of an **empty list**, this is so strange since I&#39;m sure that my database has data.\r\n\r\nI&#39;ve read other similar questions, and they don&#39;t seem to help.\r\n\r\nI try to fix the problem with debugger, and I track into the **AsyncExecutionInterceptor class**:\r\n\r\n    @Nullable\r\n    public Object invoke(MethodInvocation invocation) throws Throwable {\r\n        Class&lt;?&gt; targetClass = invocation.getThis() != null ? AopUtils.getTargetClass(invocation.getThis()) : null;\r\n        Method specificMethod = ClassUtils.getMostSpecificMethod(invocation.getMethod(), targetClass);\r\n        Method userDeclaredMethod = BridgeMethodResolver.findBridgedMethod(specificMethod);\r\n        AsyncTaskExecutor executor = this.determineAsyncExecutor(userDeclaredMethod);\r\n        if (executor == null) {\r\n            throw new IllegalStateException(&quot;No executor specified and no default executor set on AsyncExecutionInterceptor either&quot;);\r\n        } else {\r\n            Callable&lt;Object&gt; task = () -&gt; {\r\n                try {\r\n                    Object result = invocation.proceed();\r\n                    if (result instanceof Future) {\r\n                        return ((Future)result).get();\r\n                    }\r\n                } catch (ExecutionException var4) {\r\n                    this.handleError(var4.getCause(), userDeclaredMethod, invocation.getArguments());\r\n                } catch (Throwable var5) {\r\n                    this.handleError(var5, userDeclaredMethod, invocation.getArguments());\r\n                }\r\n\r\n                return null;\r\n            };\r\n            return this.doSubmit(task, executor, invocation.getMethod().getReturnType());\r\n        }\r\n    }\r\n\r\nAnd I notice that in the 13rd line of this method, the variable result is the List&lt;Order&gt; with proper Order objects, but the if clause fails and thus return a null value.\r\n\r\nSo does anyone know how to solve the problem? \r\n\r\n===========================================================\r\n\r\nTo make it more clear, I&#39;ll show my db schema:\r\n\r\n[![all tables names][1]][1]\r\n[![orders table structure][2]][2]\r\n[![user table structure][3]][3]\r\n\r\nand here are the sql generated by the Hibernate:\r\n\r\n    Hibernate: select order0_.id as id1_8_, order0_.address_id as address_6_8_, order0_.date as date2_8_, order0_.deliver_time as deliver_3_8_, order0_.restaurant_id as restaura7_8_, order0_.status as status4_8_, order0_.total as total5_8_, order0_.user_email as user_ema8_8_ from orders order0_ where order0_.user_email=?\r\n    Hibernate: select address0_.id as id1_1_0_, address0_.location as location2_1_0_, address0_.name as name3_1_0_, address0_.phone as phone4_1_0_, address0_.user_email as user_ema5_1_0_, user1_.email as email1_14_1_, user1_.password as password2_14_1_, user1_.pts as pts3_14_1_, user1_.status as status4_14_1_, user1_.user_name as user_nam5_14_1_ from address address0_ left outer join user user1_ on address0_.user_email=user1_.email where address0_.id=?\r\n    Hibernate: select restaurant0_.id as id1_9_0_, restaurant0_.email as email2_9_0_, restaurant0_.location as location3_9_0_, restaurant0_.name as name4_9_0_, restaurant0_.password as password5_9_0_, restaurant0_.phone as phone6_9_0_, restaurant0_.status as status7_9_0_, restaurant0_.type as type8_9_0_, restaurant0_.vcode as vcode9_9_0_ from restaurant restaurant0_ where restaurant0_.id=?\r\n    Hibernate: select address0_.id as id1_1_0_, address0_.location as location2_1_0_, address0_.name as name3_1_0_, address0_.phone as phone4_1_0_, address0_.user_email as user_ema5_1_0_, user1_.email as email1_14_1_, user1_.password as password2_14_1_, user1_.pts as pts3_14_1_, user1_.status as status4_14_1_, user1_.user_name as user_nam5_14_1_ from address address0_ left outer join user user1_ on address0_.user_email=user1_.email where address0_.id=?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RL2Xq.png\r\n  [2]: https://i.stack.imgur.com/MT1gG.png\r\n  [3]: https://i.stack.imgur.com/N1g70.png","title":"Springdata JPA repository findAllByXXX() return null instead of an empty list","body":"<p>I'm using springboot 2.1.2 and I encounter some problems with repository.\nHere are my entity classes:</p>\n\n<pre><code>@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@Table(name = \"orders\")\npublic class Order {\n    @Id\n    @GeneratedValue\n    private long id;\n\n    @ManyToOne(targetEntity = User.class)\n    private User user;\n\n    //other fields and getters and setters are ignored\n}\n\n@Entity\n@Getter\n@Setter\n@NoArgsConstructor\npublic class User {\n\n    @Id\n    private String email;\n\n    //other fields and getters and setters are ignored\n}\n</code></pre>\n\n<p>And my OrderRepository:</p>\n\n<pre><code>@Repository\npublic interface OrderRepository extends JpaRepository&lt;Order, Long&gt; {\n\n    @Query(\"select o from Order o where o.user.email = ?1\")\n    List&lt;Order&gt; findAllByUserId(String userId);\n\n    List&lt;Order&gt; findAllByUser(User user);\n}\n</code></pre>\n\n<p>When I invoke findAllByUserId or findAllByUser, the repository returns a <strong>null value</strong> instead of an <strong>empty list</strong>, this is so strange since I'm sure that my database has data.</p>\n\n<p>I've read other similar questions, and they don't seem to help.</p>\n\n<p>I try to fix the problem with debugger, and I track into the <strong>AsyncExecutionInterceptor class</strong>:</p>\n\n<pre><code>@Nullable\npublic Object invoke(MethodInvocation invocation) throws Throwable {\n    Class&lt;?&gt; targetClass = invocation.getThis() != null ? AopUtils.getTargetClass(invocation.getThis()) : null;\n    Method specificMethod = ClassUtils.getMostSpecificMethod(invocation.getMethod(), targetClass);\n    Method userDeclaredMethod = BridgeMethodResolver.findBridgedMethod(specificMethod);\n    AsyncTaskExecutor executor = this.determineAsyncExecutor(userDeclaredMethod);\n    if (executor == null) {\n        throw new IllegalStateException(\"No executor specified and no default executor set on AsyncExecutionInterceptor either\");\n    } else {\n        Callable&lt;Object&gt; task = () -&gt; {\n            try {\n                Object result = invocation.proceed();\n                if (result instanceof Future) {\n                    return ((Future)result).get();\n                }\n            } catch (ExecutionException var4) {\n                this.handleError(var4.getCause(), userDeclaredMethod, invocation.getArguments());\n            } catch (Throwable var5) {\n                this.handleError(var5, userDeclaredMethod, invocation.getArguments());\n            }\n\n            return null;\n        };\n        return this.doSubmit(task, executor, invocation.getMethod().getReturnType());\n    }\n}\n</code></pre>\n\n<p>And I notice that in the 13rd line of this method, the variable result is the List with proper Order objects, but the if clause fails and thus return a null value.</p>\n\n<p>So does anyone know how to solve the problem? </p>\n\n<p>===========================================================</p>\n\n<p>To make it more clear, I'll show my db schema:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RL2Xq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RL2Xq.png\" alt=\"all tables names\"></a>\n<a href=\"https://i.stack.imgur.com/MT1gG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MT1gG.png\" alt=\"orders table structure\"></a>\n<a href=\"https://i.stack.imgur.com/N1g70.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N1g70.png\" alt=\"user table structure\"></a></p>\n\n<p>and here are the sql generated by the Hibernate:</p>\n\n<pre><code>Hibernate: select order0_.id as id1_8_, order0_.address_id as address_6_8_, order0_.date as date2_8_, order0_.deliver_time as deliver_3_8_, order0_.restaurant_id as restaura7_8_, order0_.status as status4_8_, order0_.total as total5_8_, order0_.user_email as user_ema8_8_ from orders order0_ where order0_.user_email=?\nHibernate: select address0_.id as id1_1_0_, address0_.location as location2_1_0_, address0_.name as name3_1_0_, address0_.phone as phone4_1_0_, address0_.user_email as user_ema5_1_0_, user1_.email as email1_14_1_, user1_.password as password2_14_1_, user1_.pts as pts3_14_1_, user1_.status as status4_14_1_, user1_.user_name as user_nam5_14_1_ from address address0_ left outer join user user1_ on address0_.user_email=user1_.email where address0_.id=?\nHibernate: select restaurant0_.id as id1_9_0_, restaurant0_.email as email2_9_0_, restaurant0_.location as location3_9_0_, restaurant0_.name as name4_9_0_, restaurant0_.password as password5_9_0_, restaurant0_.phone as phone6_9_0_, restaurant0_.status as status7_9_0_, restaurant0_.type as type8_9_0_, restaurant0_.vcode as vcode9_9_0_ from restaurant restaurant0_ where restaurant0_.id=?\nHibernate: select address0_.id as id1_1_0_, address0_.location as location2_1_0_, address0_.name as name3_1_0_, address0_.phone as phone4_1_0_, address0_.user_email as user_ema5_1_0_, user1_.email as email1_14_1_, user1_.password as password2_14_1_, user1_.pts as pts3_14_1_, user1_.status as status4_14_1_, user1_.user_name as user_nam5_14_1_ from address address0_ left outer join user user1_ on address0_.user_email=user1_.email where address0_.id=?\n</code></pre>\n"},{"tags":["java","concurrency","java.util.concurrent"],"answers":[{"comments":[{"owner":{"account_id":1252167,"reputation":5353,"user_id":1212363,"accept_rate":82,"display_name":"ulmangt"},"score":0,"creation_date":1332472351,"post_id":9833675,"comment_id":12530487,"body_markdown":"I added some randomness to the sleep call:\n\n`Thread.sleep(1000 + (int) ( Math.random() * 3000 ));`\n\nand a print statement after `latch.await()` and things worked as expected","body":"I added some randomness to the sleep call:  <code>Thread.sleep(1000 + (int) ( Math.random() * 3000 ));</code>  and a print statement after <code>latch.await()</code> and things worked as expected"},{"owner":{"display_name":"user982733"},"score":0,"creation_date":1332474780,"post_id":9833675,"comment_id":12530855,"body_markdown":"I have changed implementation, can you please respond why is it behaving like this? Why is the main Thread waiting for all threads to complete? I didn&#39;t put any join asking the main thread to wait until all the threads complete.","body":"I have changed implementation, can you please respond why is it behaving like this? Why is the main Thread waiting for all threads to complete? I didn&#39;t put any join asking the main thread to wait until all the threads complete."},{"owner":{"account_id":3836319,"reputation":2792,"user_id":5620851,"display_name":"hi.nitish"},"score":0,"creation_date":1526987254,"post_id":9833675,"comment_id":87945376,"body_markdown":"While using Countdown latch, we need to consider two things -\n1.you are blocking N threads/tasks at one line of code, thread.await\n2.you must have a criteria of waking each thread which awaits and remember the waking up can be done by some another thread since rest of them are awaiting!","body":"While using Countdown latch, we need to consider two things - 1.you are blocking N threads/tasks at one line of code, thread.await 2.you must have a criteria of waking each thread which awaits and remember the waking up can be done by some another thread since rest of them are awaiting!"}],"tags":[],"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1332472026,"creation_date":1332472026,"answer_id":9833675,"question_id":9833636,"body_markdown":"you are starting 4000 threads and they are only waiting 100 milliseconds.  you are most likely overwhelming the box (and all threads will be ending at roughly the same time).  add a sleep in your thread start look and try increasing the timeout to see it work as your expect.","title":"CountDownLatch - understanding await and countDown","body":"<p>you are starting 4000 threads and they are only waiting 100 milliseconds.  you are most likely overwhelming the box (and all threads will be ending at roughly the same time).  add a sleep in your thread start look and try increasing the timeout to see it work as your expect.</p>\n"},{"tags":[],"owner":{"account_id":1252167,"reputation":5353,"user_id":1212363,"accept_rate":82,"display_name":"ulmangt"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1332477734,"creation_date":1332477734,"answer_id":9834256,"question_id":9833636,"body_markdown":"    \r\nTry running the following modified version of your code:\r\n\r\n    import java.util.concurrent.CountDownLatch;\r\n    import java.util.concurrent.atomic.AtomicLong;\r\n    \r\n    public class Test implements Runnable {\r\n    \r\n        private CountDownLatch latch;\r\n    \r\n        public Test(CountDownLatch latch)\r\n        {\r\n            this.latch = latch;\r\n        }\r\n        private static AtomicLong number = new AtomicLong(0);\r\n    \r\n        public long next() {\r\n             return number.getAndIncrement();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            CountDownLatch latch = new CountDownLatch(1);\r\n            for (int threadNo = 0; threadNo &lt; 1000; threadNo++) {\r\n              Runnable t = new Test(latch);\r\n              new Thread(t).start();\r\n            }\r\n            try {\r\n                latch.await();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n            \r\n            System.out.println( &quot;done&quot; );\r\n        }\r\n    \r\n        @Override\r\n        public void run() {\r\n            try {\r\n                Thread.sleep(1000 + (int) ( Math.random() * 3000 ));\r\n                System.out.println(next());\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                latch.countDown();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nYou should see something like:\r\n\r\n\r\n&gt; 0&lt;br&gt; done&lt;br&gt; 1&lt;br&gt; 2&lt;br&gt; 3&lt;br&gt; 4&lt;br&gt; 5&lt;br&gt; 6&lt;br&gt; 7&lt;br&gt; 8&lt;br&gt; 9&lt;br&gt;\r\n&gt; 10&lt;br&gt; 11&lt;br&gt; 12&lt;br&gt; 13&lt;br&gt; 14&lt;br&gt; 15&lt;br&gt; 16&lt;br&gt; 17&lt;br&gt; 18&lt;br&gt; 19&lt;br&gt;\r\n\r\nThis indicates that the main thread did, in fact, unblock from the `latch.await()` call after the first thread called `latch.countDown()`","title":"CountDownLatch - understanding await and countDown","body":"<p>Try running the following modified version of your code:</p>\n\n<pre><code>import java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.atomic.AtomicLong;\n\npublic class Test implements Runnable {\n\n    private CountDownLatch latch;\n\n    public Test(CountDownLatch latch)\n    {\n        this.latch = latch;\n    }\n    private static AtomicLong number = new AtomicLong(0);\n\n    public long next() {\n         return number.getAndIncrement();\n    }\n\n    public static void main(String[] args) {\n\n        CountDownLatch latch = new CountDownLatch(1);\n        for (int threadNo = 0; threadNo &lt; 1000; threadNo++) {\n          Runnable t = new Test(latch);\n          new Thread(t).start();\n        }\n        try {\n            latch.await();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n\n        System.out.println( \"done\" );\n    }\n\n    @Override\n    public void run() {\n        try {\n            Thread.sleep(1000 + (int) ( Math.random() * 3000 ));\n            System.out.println(next());\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            latch.countDown();\n        }\n    }\n\n}\n</code></pre>\n\n<p>You should see something like:</p>\n\n<blockquote>\n  <p>0<br> done<br> 1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br>\n  10<br> 11<br> 12<br> 13<br> 14<br> 15<br> 16<br> 17<br> 18<br> 19<br></p>\n</blockquote>\n\n<p>This indicates that the main thread did, in fact, unblock from the <code>latch.await()</code> call after the first thread called <code>latch.countDown()</code></p>\n"},{"tags":[],"owner":{"account_id":2100770,"reputation":596,"user_id":1868455,"display_name":"Mak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699011948,"creation_date":1699011948,"answer_id":77416411,"question_id":9833636,"body_markdown":"Here is good example for reference. No matter how long dependent threads takes to get ready ( by calling await()), main thread will pause and wait for them to be ready.\r\n\r\n    import lombok.SneakyThrows;\r\n    \r\n    import java.util.concurrent.CountDownLatch;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class CountDownLatchDemo {\r\n        @SneakyThrows\r\n        public static void main(String[] args) {\r\n            CountDownLatch cl = new CountDownLatch(4);\r\n            ExecutorService es = Executors.newFixedThreadPool(4);\r\n            DependentService ds1 = new DependentService(cl, &quot;DependenService 1&quot;);\r\n            DependentService ds2 = new DependentService(cl, &quot;DependenService 2&quot;);\r\n            DependentService ds3 = new DependentService(cl, &quot;DependenService 3&quot;);\r\n            DependentService ds4 = new DependentService(cl, &quot;DependenService 4&quot;);\r\n            es.submit(ds1);\r\n            es.submit(ds2);\r\n            es.submit(ds3);\r\n            es.submit(ds4);\r\n            Thread.sleep((long) (Math.random() * 100));\r\n            System.out.println(&quot;Main Thread ready&quot;);\r\n            es.shutdownNow();\r\n        }\r\n    \r\n    \r\n        private static class DependentService implements Runnable {\r\n            private final String name;\r\n            private final CountDownLatch cl;\r\n    \r\n            public DependentService(CountDownLatch cl, String name) {\r\n                this.cl = cl;\r\n                this.name = name;\r\n            }\r\n    \r\n            @SneakyThrows\r\n            @Override\r\n            public void run() {\r\n                System.out.println(name + &quot;working&quot;);\r\n                cl.await();\r\n                System.out.println(name + &quot; Initialised!&quot;);\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\nIn output &quot;Main Thread is ready&quot; will always be last line.\r\n\r\n    DependenService 2working\r\n    DependenService 4working\r\n    DependenService 1working\r\n    DependenService 3working\r\n    Main Thread ready\r\n\r\n----------\r\n","title":"CountDownLatch - understanding await and countDown","body":"<p>Here is good example for reference. No matter how long dependent threads takes to get ready ( by calling await()), main thread will pause and wait for them to be ready.</p>\n<pre><code>import lombok.SneakyThrows;\n\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class CountDownLatchDemo {\n    @SneakyThrows\n    public static void main(String[] args) {\n        CountDownLatch cl = new CountDownLatch(4);\n        ExecutorService es = Executors.newFixedThreadPool(4);\n        DependentService ds1 = new DependentService(cl, &quot;DependenService 1&quot;);\n        DependentService ds2 = new DependentService(cl, &quot;DependenService 2&quot;);\n        DependentService ds3 = new DependentService(cl, &quot;DependenService 3&quot;);\n        DependentService ds4 = new DependentService(cl, &quot;DependenService 4&quot;);\n        es.submit(ds1);\n        es.submit(ds2);\n        es.submit(ds3);\n        es.submit(ds4);\n        Thread.sleep((long) (Math.random() * 100));\n        System.out.println(&quot;Main Thread ready&quot;);\n        es.shutdownNow();\n    }\n\n\n    private static class DependentService implements Runnable {\n        private final String name;\n        private final CountDownLatch cl;\n\n        public DependentService(CountDownLatch cl, String name) {\n            this.cl = cl;\n            this.name = name;\n        }\n\n        @SneakyThrows\n        @Override\n        public void run() {\n            System.out.println(name + &quot;working&quot;);\n            cl.await();\n            System.out.println(name + &quot; Initialised!&quot;);\n        }\n    }\n}\n</code></pre>\n<p>In output &quot;Main Thread is ready&quot; will always be last line.</p>\n<pre><code>DependenService 2working\nDependenService 4working\nDependenService 1working\nDependenService 3working\nMain Thread ready\n</code></pre>\n<hr />\n"}],"owner":{"display_name":"user982733"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10040,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":9834256,"answer_count":3,"score":5,"last_activity_date":1699011948,"creation_date":1332471742,"question_id":9833636,"body_markdown":"According to Javadoc:\r\nA CountDownLatch is initialized with a given count. The await methods block until the current count reaches zero.\r\n\r\nThat means in the below code, since I initialized the CountDownLatch to 1. All threads should get unblocked from its await method as soon as the latch calls countdown. \r\n\r\nBut, the main thread is waiting for all the threads to complete. And also, I didn&#39;t join the main thread to end of the other threads. Why is the main thread waiting?\r\n\r\n    \r\n        import java.util.concurrent.CountDownLatch;\r\n        import java.util.concurrent.atomic.AtomicLong;\r\n        \r\n    public class Sample implements Runnable {\r\n    \r\n    \tprivate CountDownLatch latch;\r\n    \r\n    \tpublic Sample(CountDownLatch latch)\r\n    \t{\r\n    \t\tthis.latch = latch;\r\n    \t}\r\n    \tprivate static AtomicLong number = new AtomicLong(0);\r\n    \t\r\n    \tpublic long next() {\r\n    \t     return number.getAndIncrement();\r\n    \t}\r\n    \t   \r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\tCountDownLatch latch = new CountDownLatch(1);\r\n    \t\tfor (int threadNo = 0; threadNo &lt; 4000; threadNo++) {\r\n    \t\t  Runnable t = new Sample(latch);\r\n    \t\t  new Thread(t).start();\r\n    \t\t}\r\n    \t\ttry {\r\n    \t\t\tlatch.countDown();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\tlatch.await();\r\n    \t\t\tThread.sleep(100);\r\n    \t\t\tSystem.out.println(&quot;Count:&quot;+next());\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"CountDownLatch - understanding await and countDown","body":"<p>According to Javadoc:\nA CountDownLatch is initialized with a given count. The await methods block until the current count reaches zero.</p>\n\n<p>That means in the below code, since I initialized the CountDownLatch to 1. All threads should get unblocked from its await method as soon as the latch calls countdown. </p>\n\n<p>But, the main thread is waiting for all the threads to complete. And also, I didn't join the main thread to end of the other threads. Why is the main thread waiting?</p>\n\n<pre><code>    import java.util.concurrent.CountDownLatch;\n    import java.util.concurrent.atomic.AtomicLong;\n\npublic class Sample implements Runnable {\n\n    private CountDownLatch latch;\n\n    public Sample(CountDownLatch latch)\n    {\n        this.latch = latch;\n    }\n    private static AtomicLong number = new AtomicLong(0);\n\n    public long next() {\n         return number.getAndIncrement();\n    }\n\n    public static void main(String[] args) {\n\n        CountDownLatch latch = new CountDownLatch(1);\n        for (int threadNo = 0; threadNo &lt; 4000; threadNo++) {\n          Runnable t = new Sample(latch);\n          new Thread(t).start();\n        }\n        try {\n            latch.countDown();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void run() {\n        try {\n            latch.await();\n            Thread.sleep(100);\n            System.out.println(\"Count:\"+next());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-jdbc","clickhouse"],"answers":[{"tags":[],"owner":{"account_id":5726356,"reputation":870,"user_id":4523221,"accept_rate":62,"display_name":"Kin Cheung"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":true,"score":4,"last_activity_date":1503538391,"creation_date":1499137551,"answer_id":44896352,"question_id":44896281,"body_markdown":"I guess it could be it, even though it doesn&#39;t look like any other driver class names that I have seen.\r\n\r\n    spring.datasource.driver-class-name=ru.yandex.clickhouse.ClickHouseDriver","title":"Clickhouse JDBC driver class name","body":"<p>I guess it could be it, even though it doesn't look like any other driver class names that I have seen.</p>\n\n<pre><code>spring.datasource.driver-class-name=ru.yandex.clickhouse.ClickHouseDriver\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9573991,"reputation":11935,"user_id":7110799,"accept_rate":87,"display_name":"Dmitriy Dumanskiy"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1567494568,"creation_date":1567494568,"answer_id":57766633,"question_id":44896281,"body_markdown":"There is also lighter and faster alternative to the official driver version - [clickhouse4j][1]. (fork of the official driver with some improvements)\r\n\r\nYou can use it like this:\r\n\r\n    spring.datasource.driver-class-name=cc.blynk.clickhouse.ClickHouseDriver\r\n\r\n\r\n  [1]: https://github.com/blynkkk/clickhouse4j","title":"Clickhouse JDBC driver class name","body":"<p>There is also lighter and faster alternative to the official driver version - <a href=\"https://github.com/blynkkk/clickhouse4j\" rel=\"nofollow noreferrer\">clickhouse4j</a>. (fork of the official driver with some improvements)</p>\n\n<p>You can use it like this:</p>\n\n<pre><code>spring.datasource.driver-class-name=cc.blynk.clickhouse.ClickHouseDriver\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17637797,"reputation":1850,"user_id":12800717,"display_name":"supernova"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664880851,"creation_date":1664880851,"answer_id":73946814,"question_id":44896281,"body_markdown":"Driver was renamed due to moving vom yandex to clickhouse.com.\r\n\r\n**Clickhouse Driver**\r\n```\r\nspring.datasource.driver-class-name=com.clickhouse.jdbc.ClickHouseDriver\r\n```\r\nSee [https://github.com/ClickHouse/clickhouse-jdbc][1]\r\n\r\n\r\n  [1]: https://github.com/ClickHouse/clickhouse-jdbc\r\n\r\nAlso note Java Client and JDBC Driver MVN dependencies changed as well:\r\n\r\n**Maven Clickhouse Java Client**\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.clickhouse&lt;/groupId&gt;\r\n    &lt;!-- or clickhouse-grpc-client if you prefer gRPC --&gt;\r\n    &lt;artifactId&gt;clickhouse-http-client&lt;/artifactId&gt;\r\n    &lt;version&gt;0.3.2-patch11&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n````\r\n**Maven Clickhouse JDBC Driver**\r\n```\r\n&lt;dependency&gt;\r\n    &lt;!-- please stop using ru.yandex.clickhouse as it&#39;s been deprecated --&gt;\r\n    &lt;groupId&gt;com.clickhouse&lt;/groupId&gt;\r\n    &lt;artifactId&gt;clickhouse-jdbc&lt;/artifactId&gt;\r\n    &lt;version&gt;0.3.2-patch11&lt;/version&gt;\r\n    &lt;!-- use uber jar with all dependencies included, change classifier to http for smaller jar --&gt;\r\n    &lt;classifier&gt;all&lt;/classifier&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;*&lt;/groupId&gt;\r\n            &lt;artifactId&gt;*&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nStarting 4.0.0 yandex packages will be removed and be non functional!","title":"Clickhouse JDBC driver class name","body":"<p>Driver was renamed due to moving vom yandex to clickhouse.com.</p>\n<p><strong>Clickhouse Driver</strong></p>\n<pre><code>spring.datasource.driver-class-name=com.clickhouse.jdbc.ClickHouseDriver\n</code></pre>\n<p>See <a href=\"https://github.com/ClickHouse/clickhouse-jdbc\" rel=\"nofollow noreferrer\">https://github.com/ClickHouse/clickhouse-jdbc</a></p>\n<p>Also note Java Client and JDBC Driver MVN dependencies changed as well:</p>\n<p><strong>Maven Clickhouse Java Client</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.clickhouse&lt;/groupId&gt;\n    &lt;!-- or clickhouse-grpc-client if you prefer gRPC --&gt;\n    &lt;artifactId&gt;clickhouse-http-client&lt;/artifactId&gt;\n    &lt;version&gt;0.3.2-patch11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>Maven Clickhouse JDBC Driver</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;!-- please stop using ru.yandex.clickhouse as it's been deprecated --&gt;\n    &lt;groupId&gt;com.clickhouse&lt;/groupId&gt;\n    &lt;artifactId&gt;clickhouse-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;0.3.2-patch11&lt;/version&gt;\n    &lt;!-- use uber jar with all dependencies included, change classifier to http for smaller jar --&gt;\n    &lt;classifier&gt;all&lt;/classifier&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;*&lt;/groupId&gt;\n            &lt;artifactId&gt;*&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Starting 4.0.0 yandex packages will be removed and be non functional!</p>\n"}],"owner":{"account_id":5726356,"reputation":870,"user_id":4523221,"accept_rate":62,"display_name":"Kin Cheung"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3733,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":44896352,"answer_count":3,"score":7,"last_activity_date":1699011758,"creation_date":1499136844,"question_id":44896281,"body_markdown":"Has anyone used Spring JDBC with Clickhouse? What is the driver class name?\r\n\r\n    spring.datasource.driver-class-name=&lt;what is it?&gt;","title":"Clickhouse JDBC driver class name","body":"<p>Has anyone used Spring JDBC with Clickhouse? What is the driver class name?</p>\n\n<pre><code>spring.datasource.driver-class-name=&lt;what is it?&gt;\n</code></pre>\n"},{"tags":["java","c#","cmd","java-8","jvm"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1698956162,"post_id":77412621,"comment_id":136473736,"body_markdown":"Try using an [argument file](https://docs.oracle.com/en/java/javase/21/docs/specs/man/java.html#java-command-line-argument-files).","body":"Try using an <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/man/java.html#java-command-line-argument-files\" rel=\"nofollow noreferrer\">argument file</a>."},{"owner":{"account_id":230362,"reputation":28330,"user_id":493928,"accept_rate":62,"display_name":"khachik"},"score":0,"creation_date":1698956486,"post_id":77412621,"comment_id":136473793,"body_markdown":"If it is a limitation in `cmd`, can you run the java process directly?","body":"If it is a limitation in <code>cmd</code>, can you run the java process directly?"},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1699015760,"post_id":77412621,"comment_id":136480864,"body_markdown":"@Slaw an argument file would be ideal, but it does not appear to work in JDK 8.","body":"@Slaw an argument file would be ideal, but it does not appear to work in JDK 8."}],"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699011562,"creation_date":1698956043,"question_id":77412621,"body_markdown":"I have a Java application which is being started from a C# utility. The C# program uses the [`Process.Start`][1] function with the following command to launch the app:\r\n\r\n    cmd /C &lt;java-path&gt; -cp &lt;classpath&gt; com.example.MainClass &lt;other-args&gt;\r\n\r\nSometimes the classpath argument can be such a large string that the overall command exceeds the 8191 character limit imposed by `cmd.exe`. This is breaking the launch command because it gets truncated to 8191 characters.\r\n\r\nDoes the JVM provide another way of supplying the classpath entries? Can I potentially provide a `.classpath` file instead of a classpath string?\r\n\r\n  [1]: https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.process.start?view=net-7.0","title":"How can I use a very large classpath JVM argument?","body":"<p>I have a Java application which is being started from a C# utility. The C# program uses the <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.process.start?view=net-7.0\" rel=\"nofollow noreferrer\"><code>Process.Start</code></a> function with the following command to launch the app:</p>\n<pre><code>cmd /C &lt;java-path&gt; -cp &lt;classpath&gt; com.example.MainClass &lt;other-args&gt;\n</code></pre>\n<p>Sometimes the classpath argument can be such a large string that the overall command exceeds the 8191 character limit imposed by <code>cmd.exe</code>. This is breaking the launch command because it gets truncated to 8191 characters.</p>\n<p>Does the JVM provide another way of supplying the classpath entries? Can I potentially provide a <code>.classpath</code> file instead of a classpath string?</p>\n"},{"tags":["java","android","audio","apk"],"owner":{"account_id":29543856,"reputation":11,"user_id":22641916,"display_name":"Matt "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699011550,"creation_date":1695788428,"question_id":77184660,"body_markdown":"Device;\r\nGoogle Pixel 6a/7a\r\nAndroid 12/13\r\nRooted with Magisk &amp; using LSPosed.\r\n\r\nCurrently using LSPosed module VCam, which is a virtual camera, allowing me to select a video, which then plays as the camera output.\r\nFor example, if I was to call someone on Skype, they will see the recorded video instead of what&#39;s actually on the camera.\r\n\r\nThe video/camera aspect works fine, however the audio feature does not.\r\n\r\nThe audio plays externally, which the device microphone then picks up, along with any other external volume. Pretty much, to use this at the moment, have to keep the phone in a locked box so the sound is isolated, the phones then seem to overheat.\r\n\r\nI am trying to figure out a way to loop the audio internally.\r\n\r\nThis is easy to do on PC, but i&#39;m having more of a struggle on android, especially doing it virtually.\r\nIt&#39;s pretty essential to do it virtually, not with any cables, as the phones need to stay on charge to avoid extra manual labour and allowing remote control of them.\r\n\r\n\r\nEssentially i&#39;m trying to have.\r\n\r\nDevice Internal Audio (Output) = Microphone Input\r\nWhat may be a more realistic approach\r\nDevice Output = Virtual Audio X = Microphone Input\r\n\r\nThis would also then ideally mean real speaker output would be muted, as well as real microphone input.\r\n\r\n\r\n\r\nI&#39;ve tried researching this for months and keep coming up short. Am I missing a trick? Is this even possible?\r\n\r\nAre there any other potential solutions to this issue that I am missing?\r\n\r\nTried different loopback apps without success. Tried turning off microphone, but of course this didn&#39;t work as then there was just no audio at all, since it&#39;s reliant on the external speaker volume to pick up the videos audio.","title":"Android Virtual Audio Loopback","body":"<p>Device;\nGoogle Pixel 6a/7a\nAndroid 12/13\nRooted with Magisk &amp; using LSPosed.</p>\n<p>Currently using LSPosed module VCam, which is a virtual camera, allowing me to select a video, which then plays as the camera output.\nFor example, if I was to call someone on Skype, they will see the recorded video instead of what's actually on the camera.</p>\n<p>The video/camera aspect works fine, however the audio feature does not.</p>\n<p>The audio plays externally, which the device microphone then picks up, along with any other external volume. Pretty much, to use this at the moment, have to keep the phone in a locked box so the sound is isolated, the phones then seem to overheat.</p>\n<p>I am trying to figure out a way to loop the audio internally.</p>\n<p>This is easy to do on PC, but i'm having more of a struggle on android, especially doing it virtually.\nIt's pretty essential to do it virtually, not with any cables, as the phones need to stay on charge to avoid extra manual labour and allowing remote control of them.</p>\n<p>Essentially i'm trying to have.</p>\n<p>Device Internal Audio (Output) = Microphone Input\nWhat may be a more realistic approach\nDevice Output = Virtual Audio X = Microphone Input</p>\n<p>This would also then ideally mean real speaker output would be muted, as well as real microphone input.</p>\n<p>I've tried researching this for months and keep coming up short. Am I missing a trick? Is this even possible?</p>\n<p>Are there any other potential solutions to this issue that I am missing?</p>\n<p>Tried different loopback apps without success. Tried turning off microphone, but of course this didn't work as then there was just no audio at all, since it's reliant on the external speaker volume to pick up the videos audio.</p>\n"},{"tags":["java","intellij-idea","cucumber"],"comments":[{"owner":{"account_id":5700778,"reputation":8968,"user_id":4512398,"display_name":"Grasshopper"},"score":2,"creation_date":1495426270,"post_id":44102161,"comment_id":75228914,"body_markdown":"You need to mention the glue path using Java packages. Seems like the MyStepDefs class is without any package definition. Try moving it into the &#39;resteasy&#39; package a and provide the complete package to the glue option","body":"You need to mention the glue path using Java packages. Seems like the MyStepDefs class is without any package definition. Try moving it into the &#39;resteasy&#39; package a and provide the complete package to the glue option"}],"answers":[{"comments":[{"owner":{"account_id":2383418,"reputation":545,"user_id":2084919,"accept_rate":71,"display_name":"Shwheelz"},"score":0,"creation_date":1556118398,"post_id":44155997,"comment_id":98331041,"body_markdown":"Thanks, this worked for me.  Seems like refactoring the stepdefs to a new folder and adding that package to the glue code solved whatever problem IntelliJ was having recognizing how the files were related.","body":"Thanks, this worked for me.  Seems like refactoring the stepdefs to a new folder and adding that package to the glue code solved whatever problem IntelliJ was having recognizing how the files were related."}],"tags":[],"owner":{"account_id":1796955,"reputation":2964,"user_id":1636173,"accept_rate":100,"display_name":"Giulio Caccin"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1495622451,"creation_date":1495622451,"answer_id":44155997,"question_id":44102161,"body_markdown":"Try this:\r\n\r\n 1. Cucumber for java plugin is installed and compatible with your intellij idea version\r\n 2. Create and mark *test\\resources* as `Test Resources Root`\r\n 3. Put the *.feature* in *test\\resources*\r\n 4. Create the folder *step_definitions* in *test\\java* and put your test code there\r\n 5. Check that the `Feature` configuration contain `step_definitions` as `Glue`\r\n 6. Check if the step_definitions code is building properly\r\n\r\nAfter those checks the steps should be recognized.","title":"Cucumber Undefined Step, Though Defined Using IntelliJ","body":"<p>Try this:</p>\n\n<ol>\n<li>Cucumber for java plugin is installed and compatible with your intellij idea version</li>\n<li>Create and mark <em>test\\resources</em> as <code>Test Resources Root</code></li>\n<li>Put the <em>.feature</em> in <em>test\\resources</em></li>\n<li>Create the folder <em>step_definitions</em> in <em>test\\java</em> and put your test code there</li>\n<li>Check that the <code>Feature</code> configuration contain <code>step_definitions</code> as <code>Glue</code></li>\n<li>Check if the step_definitions code is building properly</li>\n</ol>\n\n<p>After those checks the steps should be recognized.</p>\n"},{"comments":[{"owner":{"account_id":1993324,"reputation":105,"user_id":1786828,"display_name":"abhinavgoyal02"},"score":0,"creation_date":1567739799,"post_id":47263694,"comment_id":102061565,"body_markdown":"Good thinking. I deleted the Run/Debug Configurations and re-ran. It worked! \nIn my case, I had copied some of the cucumber steps from another scenario and used in another feature file.\nYour solution worked :-)","body":"Good thinking. I deleted the Run/Debug Configurations and re-ran. It worked!  In my case, I had copied some of the cucumber steps from another scenario and used in another feature file. Your solution worked :-)"}],"tags":[],"owner":{"account_id":9534545,"reputation":638,"user_id":7085109,"display_name":"Mr Cas"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1699011379,"creation_date":1510573889,"answer_id":47263694,"question_id":44102161,"body_markdown":"Sometimes it happens when there are saved references to the old names of the packages. If the packages have been renamed you should check if there are references to the old names (Cucumber Run/Debug Configurations) and delete them.","title":"Cucumber Undefined Step, Though Defined Using IntelliJ","body":"<p>Sometimes it happens when there are saved references to the old names of the packages. If the packages have been renamed you should check if there are references to the old names (Cucumber Run/Debug Configurations) and delete them.</p>\n"},{"tags":[],"owner":{"account_id":14486934,"reputation":515,"user_id":10464527,"display_name":"Furkan"},"comment_count":0,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1548743210,"creation_date":1548743210,"answer_id":54415038,"question_id":44102161,"body_markdown":"I&#39;ll recommend a solution step by step while there is correct solutions above.\r\n\r\n 1. Go through &quot;Run &gt; Edit Configurations...&quot; within your IntelliJ\r\n 2. Select your cucumber java class from &quot;Cucumber java&quot; list\r\n 3. Fill the &quot;[Glue][1]&quot; with the path where your cucumber implementation is in. For example, &quot;com.blabla.test.steps&quot; \r\n 4. Click &quot;Apply&quot; button\r\n 5. Try to run/debug your cucumber feature file\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/run-debug-configuration-cucumber-java.html","title":"Cucumber Undefined Step, Though Defined Using IntelliJ","body":"<p>I'll recommend a solution step by step while there is correct solutions above.</p>\n\n<ol>\n<li>Go through \"Run > Edit Configurations...\" within your IntelliJ</li>\n<li>Select your cucumber java class from \"Cucumber java\" list</li>\n<li>Fill the \"<a href=\"https://www.jetbrains.com/help/idea/run-debug-configuration-cucumber-java.html\" rel=\"noreferrer\">Glue</a>\" with the path where your cucumber implementation is in. For example, \"com.blabla.test.steps\" </li>\n<li>Click \"Apply\" button</li>\n<li>Try to run/debug your cucumber feature file</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":3994644,"reputation":1293,"user_id":3292527,"accept_rate":100,"display_name":"27P"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1559122119,"creation_date":1559122119,"answer_id":56357312,"question_id":44102161,"body_markdown":"Double check you &#39;glue&#39; in the Idea (Configuration), in my case I caught such issue while entering incorrect (glue from dependent project not current) glue.","title":"Cucumber Undefined Step, Though Defined Using IntelliJ","body":"<p>Double check you 'glue' in the Idea (Configuration), in my case I caught such issue while entering incorrect (glue from dependent project not current) glue.</p>\n"},{"tags":[],"owner":{"account_id":16735319,"reputation":11,"user_id":12096618,"display_name":"user12096618"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1568997209,"creation_date":1568997209,"answer_id":58032189,"question_id":44102161,"body_markdown":"I made the same mistake and found several different answers. But the same mistake always remained.\r\nSo I ended up finding the solution.\r\nI was using a cucumbe.api dependency, but in my Steps class I was importing io.cucumber, so my steps could not be found.\r\nThen delete the import and select the correct import.\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dQzO6.png","title":"Cucumber Undefined Step, Though Defined Using IntelliJ","body":"<p>I made the same mistake and found several different answers. But the same mistake always remained.\nSo I ended up finding the solution.\nI was using a cucumbe.api dependency, but in my Steps class I was importing io.cucumber, so my steps could not be found.\nThen delete the import and select the correct import.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dQzO6.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":19019725,"reputation":951,"user_id":13884034,"display_name":"Sonali Das"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649645632,"creation_date":1649108991,"answer_id":71744124,"question_id":44102161,"body_markdown":"Please check glue is defined properly. If everything is alright still it throws error of undefined step then Please check the Cucumber for java plugin is compatible with current IntelliJ version. For me upgrading intelliJ version 2021  from 2018 resolved the issue.","title":"Cucumber Undefined Step, Though Defined Using IntelliJ","body":"<p>Please check glue is defined properly. If everything is alright still it throws error of undefined step then Please check the Cucumber for java plugin is compatible with current IntelliJ version. For me upgrading intelliJ version 2021  from 2018 resolved the issue.</p>\n"},{"tags":[],"owner":{"account_id":12801896,"reputation":85,"user_id":9262936,"display_name":"See.."},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1653578503,"creation_date":1653578453,"answer_id":72394178,"question_id":44102161,"body_markdown":"Go to IntelliJ -&gt; Preference -&gt; Plugins -&gt; Add &quot;Cucumber for Java&quot;","title":"Cucumber Undefined Step, Though Defined Using IntelliJ","body":"<p>Go to IntelliJ -&gt; Preference -&gt; Plugins -&gt; Add &quot;Cucumber for Java&quot;</p>\n"}],"owner":{"account_id":401219,"reputation":1890,"user_id":767653,"accept_rate":82,"display_name":"OMGPOP"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50964,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":7,"score":12,"last_activity_date":1699011379,"creation_date":1495403577,"question_id":44102161,"body_markdown":"I&#39;m trying to run a .feature file to test a simple RESTEasy web application: https://github.com/dashorst/jaxrs-quickstart-resteasy. \r\n\r\nHowever, the IntelliJ keeps saying that:\r\n\r\n    Undefined step: Given  I am an invalid username\r\n\r\n    Undefined step: When  I perform a hello request with null username\r\n\r\n    Undefined step: Then  I receive a http response code of 400\r\n\r\n    Undefined step: When  I perform a hello request with empty username\r\n\r\n    Undefined step: Then  I receive a http response code of 400\r\n\r\n    You can implement missing steps with the snippets below:\r\n\r\n    @Given(&quot;^I am an invalid username$&quot;)\r\n    public void I_am_an_invalid_username() throws Throwable {\r\n        // Express the Regexp above with the code you wish you had\r\n        throw new PendingException();\r\n    }\r\n    // similar results...\r\n\r\n\r\nBelow is my `hello.feature` file:\r\n\r\n    Feature: hello\r\n\r\n    #-------------------------------------\r\n    #next block is got the GET entry point\r\n    #-------------------------------------\r\n\r\n    #verify that with malformed input hello fails \r\n    Scenario: invalid username should fail\r\n    Given I am an invalid username\r\n    When I perform a hello request with null username\r\n    Then I receive a http response code of 400\r\n    When I perform a hello request with empty username\r\n    Then I receive a http response code of 400\r\n\r\n    #verify that you can get correct hello response with valid username. This is the &#39;everything works fine&#39; path.\r\n    Scenario: User can get correct hello response with valid username\r\n    Given I am a valid username\r\n    When I perform a hello request with valid username\r\n    Then I receive a http response code of 200\r\n\r\n    import cucumber.annotation.en.Given;\r\n    import cucumber.annotation.en.Then;\r\n    import cucumber.annotation.en.When;\r\n    import cucumber.runtime.PendingException;\r\n\r\n\r\nI used IntelliJ option &quot;generate steps&quot; and got the `MyStepdefs` file.\r\n\r\n    /**\r\n     * Created by z on 5/21/17.\r\n     */\r\n    public class MyStepdefs {\r\n        @Given(&quot;^I am a valid username$&quot;)\r\n        public void iAmAValidUsername() throws Throwable {\r\n            // Write code here that turns the phrase above into concrete actions\r\n            throw new PendingException();\r\n        }\r\n\r\n        @Given(&quot;^I am an invalid username$&quot;)\r\n        public void iAmAnInvalidUsername() throws Throwable {\r\n            // Write code here that turns the phrase above into concrete actions\r\n            throw new PendingException();\r\n        }\r\n\r\n        @When(&quot;^I perform a hello request with null username$&quot;)\r\n        public void iPerformAHelloRequestWithNullUsername() throws Throwable {\r\n            // Write code here that turns the phrase above into concrete actions\r\n            throw new PendingException();\r\n        }\r\n\r\n        @Then(&quot;^I receive a http response code of (\\\\d+)$&quot;)\r\n        public void iReceiveAHttpResponseCodeOf(int arg0) throws Throwable {\r\n            // Write code here that turns the phrase above into concrete actions\r\n            throw new PendingException();\r\n        }\r\n\r\n        @When(&quot;^I perform a hello request with empty username$&quot;)\r\n        public void iPerformAHelloRequestWithEmptyUsername() throws Throwable {\r\n            // Write code here that turns the phrase above into concrete actions\r\n            throw new PendingException();\r\n        }\r\n\r\n        @When(&quot;^I perform a hello request with valid username$&quot;)\r\n        public void iPerformAHelloRequestWithValidUsername() throws Throwable {\r\n            // Write code here that turns the phrase above into concrete actions\r\n            throw new PendingException();\r\n        }\r\n    }\r\n\r\n\r\nI had tried to specify glue path for each scenario, but it doesn&#39;t work. I&#39;m not sure what went run. Thanks for any advice!\r\n\r\nI have looked into several existing questions but none of them helps: \r\n\r\nhttps://stackoverflow.com/questions/4022990/cucumber-undefined-step-although-step-should-be-defined\r\n\r\nhttps://stackoverflow.com/questions/21753267/cucumber-jvm-undefined-step\r\n\r\n\r\nThis is my project structure: \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dPDnU.png","title":"Cucumber Undefined Step, Though Defined Using IntelliJ","body":"<p>I'm trying to run a .feature file to test a simple RESTEasy web application: <a href=\"https://github.com/dashorst/jaxrs-quickstart-resteasy\" rel=\"noreferrer\">https://github.com/dashorst/jaxrs-quickstart-resteasy</a>. </p>\n\n<p>However, the IntelliJ keeps saying that:</p>\n\n<pre><code>Undefined step: Given  I am an invalid username\n\nUndefined step: When  I perform a hello request with null username\n\nUndefined step: Then  I receive a http response code of 400\n\nUndefined step: When  I perform a hello request with empty username\n\nUndefined step: Then  I receive a http response code of 400\n\nYou can implement missing steps with the snippets below:\n\n@Given(\"^I am an invalid username$\")\npublic void I_am_an_invalid_username() throws Throwable {\n    // Express the Regexp above with the code you wish you had\n    throw new PendingException();\n}\n// similar results...\n</code></pre>\n\n<p>Below is my <code>hello.feature</code> file:</p>\n\n<pre><code>Feature: hello\n\n#-------------------------------------\n#next block is got the GET entry point\n#-------------------------------------\n\n#verify that with malformed input hello fails \nScenario: invalid username should fail\nGiven I am an invalid username\nWhen I perform a hello request with null username\nThen I receive a http response code of 400\nWhen I perform a hello request with empty username\nThen I receive a http response code of 400\n\n#verify that you can get correct hello response with valid username. This is the 'everything works fine' path.\nScenario: User can get correct hello response with valid username\nGiven I am a valid username\nWhen I perform a hello request with valid username\nThen I receive a http response code of 200\n\nimport cucumber.annotation.en.Given;\nimport cucumber.annotation.en.Then;\nimport cucumber.annotation.en.When;\nimport cucumber.runtime.PendingException;\n</code></pre>\n\n<p>I used IntelliJ option \"generate steps\" and got the <code>MyStepdefs</code> file.</p>\n\n<pre><code>/**\n * Created by z on 5/21/17.\n */\npublic class MyStepdefs {\n    @Given(\"^I am a valid username$\")\n    public void iAmAValidUsername() throws Throwable {\n        // Write code here that turns the phrase above into concrete actions\n        throw new PendingException();\n    }\n\n    @Given(\"^I am an invalid username$\")\n    public void iAmAnInvalidUsername() throws Throwable {\n        // Write code here that turns the phrase above into concrete actions\n        throw new PendingException();\n    }\n\n    @When(\"^I perform a hello request with null username$\")\n    public void iPerformAHelloRequestWithNullUsername() throws Throwable {\n        // Write code here that turns the phrase above into concrete actions\n        throw new PendingException();\n    }\n\n    @Then(\"^I receive a http response code of (\\\\d+)$\")\n    public void iReceiveAHttpResponseCodeOf(int arg0) throws Throwable {\n        // Write code here that turns the phrase above into concrete actions\n        throw new PendingException();\n    }\n\n    @When(\"^I perform a hello request with empty username$\")\n    public void iPerformAHelloRequestWithEmptyUsername() throws Throwable {\n        // Write code here that turns the phrase above into concrete actions\n        throw new PendingException();\n    }\n\n    @When(\"^I perform a hello request with valid username$\")\n    public void iPerformAHelloRequestWithValidUsername() throws Throwable {\n        // Write code here that turns the phrase above into concrete actions\n        throw new PendingException();\n    }\n}\n</code></pre>\n\n<p>I had tried to specify glue path for each scenario, but it doesn't work. I'm not sure what went run. Thanks for any advice!</p>\n\n<p>I have looked into several existing questions but none of them helps: </p>\n\n<p><a href=\"https://stackoverflow.com/questions/4022990/cucumber-undefined-step-although-step-should-be-defined\">Cucumber: undefined step, although step should be defined</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/21753267/cucumber-jvm-undefined-step\">Cucumber JVM undefined step</a></p>\n\n<p>This is my project structure: \n<a href=\"https://i.stack.imgur.com/dPDnU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dPDnU.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","gradle","plugins","duplicates","module-info"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699019702,"post_id":77416361,"comment_id":136481681,"body_markdown":"The exception says that your jar file is corrupt, as it has two zip entries with the same name. How do you get to the conclusion that this has anything to do with dependencies?","body":"The exception says that your jar file is corrupt, as it has two zip entries with the same name. How do you get to the conclusion that this has anything to do with dependencies?"},{"owner":{"account_id":3484456,"reputation":2621,"user_id":2915738,"display_name":"Asif Kamran Malick"},"score":0,"creation_date":1699042353,"post_id":77416361,"comment_id":136486308,"body_markdown":"Looks like you have an [interim workaround](https://github.com/elastic/apm-agent-android/issues/228#issuecomment-1792200129)","body":"Looks like you have an <a href=\"https://github.com/elastic/apm-agent-android/issues/228#issuecomment-1792200129\" rel=\"nofollow noreferrer\">interim workaround</a>"}],"owner":{"account_id":11947990,"reputation":499,"user_id":8742533,"display_name":"Jakub Mosakowski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699011294,"creation_date":1699011294,"question_id":77416361,"body_markdown":"I was trying to add Elastic APM Agent (https://github.com/elastic/apm-agent-android) to my Android application. It results in the error below (`Failed to transform classes module-info.class`). I created a sample (empty) app and the error does not appear, so I assume that it is not an issue with the library itself, but both my project and the library use the same dependency with the same classes (or different dependencies with the same classes).\r\n\r\nAre there any mechanisms or tools that help with finding which dependency is problematic? I know of `gradle dependencies` task, however, I end up with a report that is 20k lines long that I don&#39;t know what to do with.\r\n\r\n```\r\norg.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:XXX:debugBytebuddyTransform&#39;.\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:142)\r\n\tat org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:140)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\r\n\tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n\tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:327)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:314)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:307)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:293)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:417)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:339)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\nCaused by: org.gradle.api.GradleException: Failed to transform classes\r\n\tat net.bytebuddy.build.gradle.android.ByteBuddyLocalClassesEnhancerTask.execute(ByteBuddyLocalClassesEnhancerTask.java:213)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:125)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:58)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\r\n\tat org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:236)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:221)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:204)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:187)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:165)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)\r\n\tat org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)\r\n\tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\r\n\tat org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\r\n\tat org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\r\n\tat org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\r\n\tat org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\r\n\tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\r\n\tat org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\r\n\tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.executeDelegateBroadcastingChanges(CaptureStateAfterExecutionStep.java:124)\r\n\tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:80)\r\n\tat org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:58)\r\n\tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\r\n\tat org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:181)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:71)\r\n\tat org.gradle.internal.Either$Right.fold(Either.java:175)\r\n\tat org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:69)\r\n\tat org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:47)\r\n\tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:36)\r\n\tat org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:25)\r\n\tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\r\n\tat org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:110)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)\r\n\tat org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\r\n\tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)\r\n\tat org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\r\n\tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)\r\n\tat org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)\r\n\tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:114)\r\n\tat org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)\r\n\tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)\r\n\tat org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:254)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:91)\r\n\tat org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:56)\r\n\tat org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:32)\r\n\tat org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:21)\r\n\tat org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\r\n\tat org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)\r\n\tat org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\r\n\tat org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:281)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\r\n\tat org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\r\n\tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\r\n\tat org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\r\n\tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\r\n\tat org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\r\n\tat org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:139)\r\n\tat org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\r\n\tat org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\r\n\tat org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\r\n\tat org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\r\n\tat org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\r\n\tat org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\r\n\tat org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\r\n\tat org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\r\n\tat org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:327)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:314)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:307)\r\n\tat org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:293)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:417)\r\n\tat org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:339)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\nCaused by: java.util.zip.ZipException: duplicate entry: module-info.class\r\n\tat net.bytebuddy.build.gradle.android.ByteBuddyLocalClassesEnhancerTask$TargetForAndroidAppJarFile$ForAndroidAppOutputStream.retain(ByteBuddyLocalClassesEnhancerTask.java:367)\r\n\tat net.bytebuddy.build.Plugin$Engine$Default.apply(Plugin.java:4706)\r\n\tat net.bytebuddy.build.gradle.android.ByteBuddyLocalClassesEnhancerTask.execute(ByteBuddyLocalClassesEnhancerTask.java:193)\r\n\t... 116 more\r\n```","title":"How to track source dependency of duplicated java classes","body":"<p>I was trying to add Elastic APM Agent (<a href=\"https://github.com/elastic/apm-agent-android\" rel=\"nofollow noreferrer\">https://github.com/elastic/apm-agent-android</a>) to my Android application. It results in the error below (<code>Failed to transform classes module-info.class</code>). I created a sample (empty) app and the error does not appear, so I assume that it is not an issue with the library itself, but both my project and the library use the same dependency with the same classes (or different dependencies with the same classes).</p>\n<p>Are there any mechanisms or tools that help with finding which dependency is problematic? I know of <code>gradle dependencies</code> task, however, I end up with a report that is 20k lines long that I don't know what to do with.</p>\n<pre><code>org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':XXX:debugBytebuddyTransform'.\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:142)\n    at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:140)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:327)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:314)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:307)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:293)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:417)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:339)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\nCaused by: org.gradle.api.GradleException: Failed to transform classes\n    at net.bytebuddy.build.gradle.android.ByteBuddyLocalClassesEnhancerTask.execute(ByteBuddyLocalClassesEnhancerTask.java:213)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at org.gradle.internal.reflect.JavaMethod.invoke(JavaMethod.java:125)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.doExecute(StandardTaskAction.java:58)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:51)\n    at org.gradle.api.internal.project.taskfactory.StandardTaskAction.execute(StandardTaskAction.java:29)\n    at org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:236)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n    at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:221)\n    at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:204)\n    at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:187)\n    at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:165)\n    at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:89)\n    at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:40)\n    at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:53)\n    at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:50)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:50)\n    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:40)\n    at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:68)\n    at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:38)\n    at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)\n    at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)\n    at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)\n    at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:51)\n    at org.gradle.internal.execution.steps.CreateOutputsStep.execute(CreateOutputsStep.java:29)\n    at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.executeDelegateBroadcastingChanges(CaptureStateAfterExecutionStep.java:124)\n    at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:80)\n    at org.gradle.internal.execution.steps.CaptureStateAfterExecutionStep.execute(CaptureStateAfterExecutionStep.java:58)\n    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:48)\n    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:36)\n    at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:181)\n    at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:71)\n    at org.gradle.internal.Either$Right.fold(Either.java:175)\n    at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:59)\n    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:69)\n    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:47)\n    at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:36)\n    at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:25)\n    at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:36)\n    at org.gradle.internal.execution.steps.RecordOutputsStep.execute(RecordOutputsStep.java:22)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:110)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:56)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:56)\n    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:38)\n    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:73)\n    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:44)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)\n    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:89)\n    at org.gradle.internal.execution.steps.ResolveCachingStateStep.execute(ResolveCachingStateStep.java:50)\n    at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:114)\n    at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:57)\n    at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:76)\n    at org.gradle.internal.execution.steps.CaptureStateBeforeExecutionStep.execute(CaptureStateBeforeExecutionStep.java:50)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.executeWithNoEmptySources(SkipEmptyWorkStep.java:254)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:91)\n    at org.gradle.internal.execution.steps.SkipEmptyWorkStep.execute(SkipEmptyWorkStep.java:56)\n    at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:32)\n    at org.gradle.internal.execution.steps.RemoveUntrackedExecutionStateStep.execute(RemoveUntrackedExecutionStateStep.java:21)\n    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)\n    at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:43)\n    at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:31)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.lambda$execute$0(AssignWorkspaceStep.java:40)\n    at org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:281)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:40)\n    at org.gradle.internal.execution.steps.AssignWorkspaceStep.execute(AssignWorkspaceStep.java:30)\n    at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:37)\n    at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:27)\n    at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:44)\n    at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:33)\n    at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:76)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:139)\n    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:128)\n    at org.gradle.api.internal.tasks.execution.CleanupStaleOutputsExecuter.execute(CleanupStaleOutputsExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)\n    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)\n    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)\n    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:56)\n    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)\n    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:69)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:327)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:314)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:307)\n    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:293)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:417)\n    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:339)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\nCaused by: java.util.zip.ZipException: duplicate entry: module-info.class\n    at net.bytebuddy.build.gradle.android.ByteBuddyLocalClassesEnhancerTask$TargetForAndroidAppJarFile$ForAndroidAppOutputStream.retain(ByteBuddyLocalClassesEnhancerTask.java:367)\n    at net.bytebuddy.build.Plugin$Engine$Default.apply(Plugin.java:4706)\n    at net.bytebuddy.build.gradle.android.ByteBuddyLocalClassesEnhancerTask.execute(ByteBuddyLocalClassesEnhancerTask.java:193)\n    ... 116 more\n</code></pre>\n"},{"tags":["java","unit-testing","java-8","java-time"],"comments":[{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1485696689,"post_id":27067049,"comment_id":71023575,"body_markdown":"*Now, I want to unit test this code.* You should indicate what kind of behaviour you expect from `MyClass`. That would inform the approach to follow here.","body":"<i>Now, I want to unit test this code.</i> You should indicate what kind of behaviour you expect from <code>MyClass</code>. That would inform the approach to follow here."},{"owner":{"account_id":1766283,"reputation":1821,"user_id":1612093,"accept_rate":89,"display_name":"Mike"},"score":2,"creation_date":1508520724,"post_id":27067049,"comment_id":80656122,"body_markdown":"Following up on this: I think what it basically comes down to is that you cannot really use the `Clock.fixed` for unit testing in the way I hoped. Normal mocking approaches will be required.","body":"Following up on this: I think what it basically comes down to is that you cannot really use the <code>Clock.fixed</code> for unit testing in the way I hoped. Normal mocking approaches will be required."}],"answers":[{"comments":[{"owner":{"account_id":1766283,"reputation":1821,"user_id":1612093,"accept_rate":89,"display_name":"Mike"},"score":2,"creation_date":1416591448,"post_id":27067090,"comment_id":42647642,"body_markdown":"Yes, I considered this. However, the problem is that passing a clock through the constructor lets me set it to a single fixed clock. I guess I didn&#39;t make it clear, but I need to be able to set the clock to multiple values within a single test without constructing a new object.","body":"Yes, I considered this. However, the problem is that passing a clock through the constructor lets me set it to a single fixed clock. I guess I didn&#39;t make it clear, but I need to be able to set the clock to multiple values within a single test without constructing a new object."},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":1,"creation_date":1416591598,"post_id":27067090,"comment_id":42647714,"body_markdown":"@Mike Please update your sample to make clear what your use case is.","body":"@Mike Please update your sample to make clear what your use case is."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1416591717,"post_id":27067090,"comment_id":42647772,"body_markdown":"@Mike Then either have a clock setter, mock `Clock`, or use reflection. What other options do you see based on your requirements?","body":"@Mike Then either have a clock setter, mock <code>Clock</code>, or use reflection. What other options do you see based on your requirements?"},{"owner":{"account_id":1766283,"reputation":1821,"user_id":1612093,"accept_rate":89,"display_name":"Mike"},"score":0,"creation_date":1416592079,"post_id":27067090,"comment_id":42647949,"body_markdown":"No, those seem to be the options. I suppose I was wondering if I was missing another option that maybe was particular to Clock.","body":"No, those seem to be the options. I suppose I was wondering if I was missing another option that maybe was particular to Clock."},{"owner":{"account_id":1766283,"reputation":1821,"user_id":1612093,"accept_rate":89,"display_name":"Mike"},"score":0,"creation_date":1416592453,"post_id":27067090,"comment_id":42648096,"body_markdown":"In particular, it would have been nice if I could pass a Clock to the constructor and then set that clock to different values. Unfortunately (at least in this case), Clock is immutable.","body":"In particular, it would have been nice if I could pass a Clock to the constructor and then set that clock to different values. Unfortunately (at least in this case), Clock is immutable."},{"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"score":3,"creation_date":1416592473,"post_id":27067090,"comment_id":42648103,"body_markdown":"@Mike You should be able to mock the Clock your passing as an argument (e.g. using Mockito) instead of providing a fixed Clock. Like this you can return different values at different calls.","body":"@Mike You should be able to mock the Clock your passing as an argument (e.g. using Mockito) instead of providing a fixed Clock. Like this you can return different values at different calls."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":3,"creation_date":1416592673,"post_id":27067090,"comment_id":42648215,"body_markdown":"@Mike: Or instead of a mock, you could write your own reusable fake clock, with whatever behaviour you want - such as incrementing by 1 second per call. At that point, however, you&#39;ll be dependent on the number of calls you make to the clock within your production code, which isn&#39;t ideal.","body":"@Mike: Or instead of a mock, you could write your own reusable fake clock, with whatever behaviour you want - such as incrementing by 1 second per call. At that point, however, you&#39;ll be dependent on the number of calls you make to the clock within your production code, which isn&#39;t ideal."},{"owner":{"account_id":4120421,"reputation":1580,"user_id":3380951,"accept_rate":77,"display_name":"XoXo"},"score":2,"creation_date":1416592828,"post_id":27067090,"comment_id":42648284,"body_markdown":"On top of Puce&#39;s answer, you should be able to make the mock return different values per http://mockito.googlecode.com/svn/tags/1.8.5/javadoc/org/mockito/Mockito.html#10","body":"On top of Puce&#39;s answer, you should be able to make the mock return different values per <a href=\"http://mockito.googlecode.com/svn/tags/1.8.5/javadoc/org/mockito/Mockito.html#10\" rel=\"nofollow noreferrer\">mockito.googlecode.com/svn/tags/1.8.5/javadoc/org/mockito/&hellip;</a>"},{"owner":{"account_id":199833,"reputation":1718,"user_id":445367,"display_name":"Eelco"},"score":0,"creation_date":1449756042,"post_id":27067090,"comment_id":56152008,"body_markdown":"Actually, why shouldn&#39;t it be an argument? If it is important for the computation, you might as well be explicit about it. No reliance on assumed state. Not saying it is always the right solution, but I wouldn&#39;t assume it&#39;s &#39;wrong&#39; from the get-go either.","body":"Actually, why shouldn&#39;t it be an argument? If it is important for the computation, you might as well be explicit about it. No reliance on assumed state. Not saying it is always the right solution, but I wouldn&#39;t assume it&#39;s &#39;wrong&#39; from the get-go either."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1449756100,"post_id":27067090,"comment_id":56152065,"body_markdown":"@Eelco: Not sure what you mean by &quot;assumed&quot; state here, but if the class is responsible for timing things, it makes sense for that to know *how* it&#39;s going to time things, rather than the caller saying how to do it.","body":"@Eelco: Not sure what you mean by &quot;assumed&quot; state here, but if the class is responsible for timing things, it makes sense for that to know <i>how</i> it&#39;s going to time things, rather than the caller saying how to do it."},{"owner":{"account_id":199833,"reputation":1718,"user_id":445367,"display_name":"Eelco"},"score":0,"creation_date":1449760325,"post_id":27067090,"comment_id":56155108,"body_markdown":"If that&#39;s a core responsibility of the class, sure. If it isn&#39;t, or you want to approach things a bit more functional, you could pull it outside. Just saying that imho having this as an argument isn&#39;t wrong per se unless you are going for ultimate OO purity :-)\n\nFWIW, I agree that DI is in many cases the most elegant solution.","body":"If that&#39;s a core responsibility of the class, sure. If it isn&#39;t, or you want to approach things a bit more functional, you could pull it outside. Just saying that imho having this as an argument isn&#39;t wrong per se unless you are going for ultimate OO purity :-)  FWIW, I agree that DI is in many cases the most elegant solution."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":11,"down_vote_count":2,"up_vote_count":70,"is_accepted":true,"score":68,"last_activity_date":1416591248,"creation_date":1416591248,"answer_id":27067090,"question_id":27067049,"body_markdown":"&gt; I don&#39;t want to add a Clock argument to the method because the real code shouldn&#39;t be concerned with passing in a clock.\r\n\r\nNo... but you might want to consider it as a *constructor* parameter. Basically you&#39;re saying that your class needs a clock with which to work... so that&#39;s a dependency. Treat it as you would any other dependency, and inject it either in a constructor or via a method. (I personally favour constructor injection, but YMMV.)\r\n\r\nAs soon as you stop thinking of it as something you can easily construct yourself, and start thinking of it as &quot;just another dependency&quot; then you can use familiar techniques. (I&#39;m assuming you&#39;re comfortable with dependency injection in general, admittedly.)","title":"Unit testing a class with a Java 8 Clock","body":"<blockquote>\n  <p>I don't want to add a Clock argument to the method because the real code shouldn't be concerned with passing in a clock.</p>\n</blockquote>\n\n<p>No... but you might want to consider it as a <em>constructor</em> parameter. Basically you're saying that your class needs a clock with which to work... so that's a dependency. Treat it as you would any other dependency, and inject it either in a constructor or via a method. (I personally favour constructor injection, but YMMV.)</p>\n\n<p>As soon as you stop thinking of it as something you can easily construct yourself, and start thinking of it as \"just another dependency\" then you can use familiar techniques. (I'm assuming you're comfortable with dependency injection in general, admittedly.)</p>\n"},{"comments":[{"owner":{"account_id":4120421,"reputation":1580,"user_id":3380951,"accept_rate":77,"display_name":"XoXo"},"score":2,"creation_date":1416595479,"post_id":27068139,"comment_id":42649511,"body_markdown":"you might want to change `first`, `second` etc to suit your needs (e.g. the time needs to be in the past), but you get the idea.","body":"you might want to change <code>first</code>, <code>second</code> etc to suit your needs (e.g. the time needs to be in the past), but you get the idea."},{"owner":{"account_id":42147,"reputation":16251,"user_id":2326914,"accept_rate":33,"display_name":"Rog&#233;rio"},"score":42,"creation_date":1417531439,"post_id":27068139,"comment_id":42978220,"body_markdown":"In practice, the example test above will run into NPEs, because user code will most likely call `LocalDateTime.now(clock)` rather than `clock.instant()`; a `NullPointerException` will get thrown the moment `LocalDateTime` calls `clock.getZone().getRules()`. Instead, a *real* `Clock` object should be created with a call to `Clock.fixed(Instant,ZoneId)`.","body":"In practice, the example test above will run into NPEs, because user code will most likely call <code>LocalDateTime.now(clock)</code> rather than <code>clock.instant()</code>; a <code>NullPointerException</code> will get thrown the moment <code>LocalDateTime</code> calls <code>clock.getZone().getRules()</code>. Instead, a <i>real</i> <code>Clock</code> object should be created with a call to <code>Clock.fixed(Instant,ZoneId)</code>."},{"owner":{"account_id":4120421,"reputation":1580,"user_id":3380951,"accept_rate":77,"display_name":"XoXo"},"score":3,"creation_date":1417575136,"post_id":27068139,"comment_id":42998144,"body_markdown":"@Rog&#233;rio my interpretation of the question is &quot;how do i mock to return different values on consecutive calls&quot;, thus the answer. I don&#39;t know enough about java 8 time for the `LocalDateTime.now()` or `Instant.now()` part, but if static method is needed here, it may need to be wrapped into a class, because PowerMock/EasyMock [does not support](http://easymock.org/api/org/easymock/IExpectationSetters.html#andReturn-T-) `Stubbing consecutive calls` in [Mockito](http://mockito.googlecode.com/svn/tags/1.8.5/javadoc/org/mockito/Mockito.html#10)","body":"@Rog&#233;rio my interpretation of the question is &quot;how do i mock to return different values on consecutive calls&quot;, thus the answer. I don&#39;t know enough about java 8 time for the <code>LocalDateTime.now()</code> or <code>Instant.now()</code> part, but if static method is needed here, it may need to be wrapped into a class, because PowerMock/EasyMock <a href=\"http://easymock.org/api/org/easymock/IExpectationSetters.html#andReturn-T-\" rel=\"nofollow noreferrer\">does not support</a> <code>Stubbing consecutive calls</code> in <a href=\"http://mockito.googlecode.com/svn/tags/1.8.5/javadoc/org/mockito/Mockito.html#10\" rel=\"nofollow noreferrer\">Mockito</a>"},{"owner":{"account_id":5305507,"reputation":4037,"user_id":4233586,"accept_rate":64,"display_name":"yurgis"},"score":1,"creation_date":1447290954,"post_id":27068139,"comment_id":55099098,"body_markdown":"The problem with this approach is that it makes an assumption on how many times clock.millis() or clock.instant() have been called exactly during execution of foo.someMethod() which is not always possible or convenient. This makes me feel that java.time.Clock is not really suitable for time-based unit testing.","body":"The problem with this approach is that it makes an assumption on how many times clock.millis() or clock.instant() have been called exactly during execution of foo.someMethod() which is not always possible or convenient. This makes me feel that java.time.Clock is not really suitable for time-based unit testing."},{"owner":{"account_id":25463,"reputation":19710,"user_id":65458,"accept_rate":88,"display_name":"Piotr Findeisen"},"score":2,"creation_date":1447667062,"post_id":27068139,"comment_id":55233339,"body_markdown":"As @Rog&#233;rio pointed out, this works by the assumption that class under tests queries `Clock.instant()`. If it&#39;s changed to query `Clock.millis()`, that will return always `0`. This is no good. There is a need mocked `clock` object that returns mocked time regardless of method actually called.","body":"As @Rog&#233;rio pointed out, this works by the assumption that class under tests queries <code>Clock.instant()</code>. If it&#39;s changed to query <code>Clock.millis()</code>, that will return always <code>0</code>. This is no good. There is a need mocked <code>clock</code> object that returns mocked time regardless of method actually called."},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1485696929,"post_id":27068139,"comment_id":71023642,"body_markdown":"@Rog&#233;rio Instead of a `Clock` object, I would only constructor-inject a `Supplier&lt;Instant&gt;`...","body":"@Rog&#233;rio Instead of a <code>Clock</code> object, I would only constructor-inject a <code>Supplier&lt;Instant&gt;</code>..."},{"owner":{"account_id":243786,"reputation":30863,"user_id":516167,"accept_rate":94,"display_name":"MariuszS"},"score":17,"creation_date":1505824741,"post_id":27068139,"comment_id":79563609,"body_markdown":"Use real clock with `Clock.fixed` instead of mocking!","body":"Use real clock with <code>Clock.fixed</code> instead of mocking!"}],"tags":[],"owner":{"account_id":4120421,"reputation":1580,"user_id":3380951,"accept_rate":77,"display_name":"XoXo"},"comment_count":7,"down_vote_count":8,"up_vote_count":74,"is_accepted":false,"score":66,"last_activity_date":1416595344,"creation_date":1416595344,"answer_id":27068139,"question_id":27067049,"body_markdown":"Let me put Jon Skeet&#39;s answer and the comments into code:\r\n\r\n\r\n**class under test:**\r\n\r\n    public class Foo {\r\n        private final Clock clock;\r\n        public Foo(Clock clock) {\r\n            this.clock = clock;\r\n        }\r\n\r\n        public void someMethod() {\r\n            Instant now = clock.instant();   // this is changed to make test easier\r\n            System.out.println(now);   // Do something with &#39;now&#39;\r\n        }\r\n    }\r\n\r\n\r\n**unit test:**\r\n\r\n    public class FooTest() {\r\n        \r\n        private Foo foo;\r\n        private Clock mock;\r\n    \r\n        @Before\r\n        public void setUp() {\r\n            mock = mock(Clock.class);\r\n            foo = new Foo(mock);\r\n        }\r\n    \r\n        @Test\r\n        public void ensureDifferentValuesWhenMockIsCalled() {\r\n            Instant first = Instant.now();                  // e.g. 12:00:00\r\n            Instant second = first.plusSeconds(1);          // 12:00:01\r\n            Instant thirdAndAfter = second.plusSeconds(1);  // 12:00:02\r\n    \r\n            when(mock.instant()).thenReturn(first, second, thirdAndAfter);\r\n    \r\n            foo.someMethod();   // string of first\r\n            foo.someMethod();   // string of second\r\n            foo.someMethod();   // string of thirdAndAfter \r\n            foo.someMethod();   // string of thirdAndAfter \r\n        }\r\n    }","title":"Unit testing a class with a Java 8 Clock","body":"<p>Let me put Jon Skeet's answer and the comments into code:</p>\n\n<p><strong>class under test:</strong></p>\n\n<pre><code>public class Foo {\n    private final Clock clock;\n    public Foo(Clock clock) {\n        this.clock = clock;\n    }\n\n    public void someMethod() {\n        Instant now = clock.instant();   // this is changed to make test easier\n        System.out.println(now);   // Do something with 'now'\n    }\n}\n</code></pre>\n\n<p><strong>unit test:</strong></p>\n\n<pre><code>public class FooTest() {\n\n    private Foo foo;\n    private Clock mock;\n\n    @Before\n    public void setUp() {\n        mock = mock(Clock.class);\n        foo = new Foo(mock);\n    }\n\n    @Test\n    public void ensureDifferentValuesWhenMockIsCalled() {\n        Instant first = Instant.now();                  // e.g. 12:00:00\n        Instant second = first.plusSeconds(1);          // 12:00:01\n        Instant thirdAndAfter = second.plusSeconds(1);  // 12:00:02\n\n        when(mock.instant()).thenReturn(first, second, thirdAndAfter);\n\n        foo.someMethod();   // string of first\n        foo.someMethod();   // string of second\n        foo.someMethod();   // string of thirdAndAfter \n        foo.someMethod();   // string of thirdAndAfter \n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":269806,"reputation":16842,"user_id":559378,"accept_rate":94,"display_name":"Eric Hartford"},"score":0,"creation_date":1473327002,"post_id":38385316,"comment_id":66101125,"body_markdown":"This answer is perfect.","body":"This answer is perfect."},{"owner":{"account_id":1164476,"reputation":1000,"user_id":1143392,"display_name":"Max"},"score":0,"creation_date":1493959909,"post_id":38385316,"comment_id":74633794,"body_markdown":"My use case is to fast-forward some seconds in some tests to verify some time-based validation rules. This seems to be the easiest and most elegant solution to me. Perfect, thanks a lot. Another +1 for the DeLorean.","body":"My use case is to fast-forward some seconds in some tests to verify some time-based validation rules. This seems to be the easiest and most elegant solution to me. Perfect, thanks a lot. Another +1 for the DeLorean."},{"owner":{"account_id":1618652,"reputation":4272,"user_id":1495686,"accept_rate":100,"display_name":"Bohsen"},"score":0,"creation_date":1504940873,"post_id":38385316,"comment_id":79218611,"body_markdown":"Really elegant solution :) +1 for the DeLorean reference.","body":"Really elegant solution :) +1 for the DeLorean reference."},{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":6,"creation_date":1512413282,"post_id":38385316,"comment_id":82238247,"body_markdown":"I&#39;m using Mockito 1.10.19 and `doAnswer` does not exist. I replaced it with `thenAnswer`","body":"I&#39;m using Mockito 1.10.19 and <code>doAnswer</code> does not exist. I replaced it with <code>thenAnswer</code>"}],"tags":[],"owner":{"account_id":238745,"reputation":790,"user_id":2219288,"display_name":"Rik"},"comment_count":4,"down_vote_count":3,"up_vote_count":34,"is_accepted":false,"score":31,"last_activity_date":1493451641,"creation_date":1468535818,"answer_id":38385316,"question_id":27067049,"body_markdown":"I&#39;m a bit late to the game here, but to add to the other answers suggesting using a Clock - this definitely works, and by using Mockito&#39;s doAnswer you can create a Clock which you can dynamically adjust as your tests progress.\r\n\r\nAssume this class, which has been modified to take a Clock in the constructor, and reference the clock on `Instant.now(clock)` calls.\r\n\r\n    public class TimePrinter() {\r\n        private final Clock clock; // init in constructor\r\n\r\n        // ...\r\n\r\n        public void printTheTime() {\r\n            System.out.println(Instant.now(clock));\r\n        }\r\n    }\r\n\r\nThen, in your test setup:\r\n\r\n    private Instant currentTime;\r\n    private TimePrinter timePrinter;\r\n\r\n    public void setup() {\r\n       currentTime = Instant.EPOCH; // or Instant.now() or whatever\r\n\r\n       // create a mock clock which returns currentTime\r\n       final Clock clock = mock(Clock.class);\r\n       when(clock.instant()).doAnswer((invocation) -&gt; currentTime);\r\n\r\n       timePrinter = new TimePrinter(clock);\r\n    }\r\n\r\nLater in your test:\r\n\r\n    @Test\r\n    public void myTest() {\r\n        myObjectUnderTest.printTheTime(); // 1970-01-01T00:00:00Z\r\n\r\n        // go forward in time a year\r\n        currentTime = currentTime.plus(1, ChronoUnit.YEARS);\r\n\r\n        myObjectUnderTest.printTheTime(); // 1971-01-01T00:00:00Z\r\n    }\r\n\r\nYou&#39;re telling Mockito to always run a function which returns the current value of currentTime whenever instant() is called.  `Instant.now(clock)` will call `clock.instant()`.  Now you can fast-forward, rewind, and generally time travel better than a DeLorean.","title":"Unit testing a class with a Java 8 Clock","body":"<p>I'm a bit late to the game here, but to add to the other answers suggesting using a Clock - this definitely works, and by using Mockito's doAnswer you can create a Clock which you can dynamically adjust as your tests progress.</p>\n\n<p>Assume this class, which has been modified to take a Clock in the constructor, and reference the clock on <code>Instant.now(clock)</code> calls.</p>\n\n<pre><code>public class TimePrinter() {\n    private final Clock clock; // init in constructor\n\n    // ...\n\n    public void printTheTime() {\n        System.out.println(Instant.now(clock));\n    }\n}\n</code></pre>\n\n<p>Then, in your test setup:</p>\n\n<pre><code>private Instant currentTime;\nprivate TimePrinter timePrinter;\n\npublic void setup() {\n   currentTime = Instant.EPOCH; // or Instant.now() or whatever\n\n   // create a mock clock which returns currentTime\n   final Clock clock = mock(Clock.class);\n   when(clock.instant()).doAnswer((invocation) -&gt; currentTime);\n\n   timePrinter = new TimePrinter(clock);\n}\n</code></pre>\n\n<p>Later in your test:</p>\n\n<pre><code>@Test\npublic void myTest() {\n    myObjectUnderTest.printTheTime(); // 1970-01-01T00:00:00Z\n\n    // go forward in time a year\n    currentTime = currentTime.plus(1, ChronoUnit.YEARS);\n\n    myObjectUnderTest.printTheTime(); // 1971-01-01T00:00:00Z\n}\n</code></pre>\n\n<p>You're telling Mockito to always run a function which returns the current value of currentTime whenever instant() is called.  <code>Instant.now(clock)</code> will call <code>clock.instant()</code>.  Now you can fast-forward, rewind, and generally time travel better than a DeLorean.</p>\n"},{"comments":[{"owner":{"account_id":723954,"reputation":1847,"user_id":666583,"display_name":"AndrewF"},"score":1,"creation_date":1611268230,"post_id":56026271,"comment_id":116404067,"body_markdown":"From the [documented implementation requirements of the `Clock` abstract class](https://docs.oracle.com/javase/8/docs/api/java/time/Clock.html): &quot;This abstract class must be implemented with care to ensure other classes operate correctly. All implementations that can be instantiated must be *final, immutable and thread-safe*.&quot;","body":"From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Clock.html\" rel=\"nofollow noreferrer\">documented implementation requirements of the <code>Clock</code> abstract class</a>: &quot;This abstract class must be implemented with care to ensure other classes operate correctly. All implementations that can be instantiated must be <i>final, immutable and thread-safe</i>.&quot;"},{"owner":{"account_id":190269,"reputation":18134,"user_id":430128,"accept_rate":78,"display_name":"Raman"},"score":5,"creation_date":1611269255,"post_id":56026271,"comment_id":116404418,"body_markdown":"@AndrewF Given that the purpose of the implementation is not a general purpose Clock but as a limited-purpose time source for a unit test, I would feel no guilt in violating that requirement.","body":"@AndrewF Given that the purpose of the implementation is not a general purpose Clock but as a limited-purpose time source for a unit test, I would feel no guilt in violating that requirement."},{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1617888998,"post_id":56026271,"comment_id":118439370,"body_markdown":"[ThreeTen-extra](https://github.com/ThreeTen/threeten-extra) is also available [at Maven Central](https://search.maven.org/search?q=g:org.threeten%20AND%20a:threeten-extra&amp;core=gav)","body":"<a href=\"https://github.com/ThreeTen/threeten-extra\" rel=\"nofollow noreferrer\">ThreeTen-extra</a> is also available <a href=\"https://search.maven.org/search?q=g:org.threeten%20AND%20a:threeten-extra&amp;core=gav\" rel=\"nofollow noreferrer\">at Maven Central</a>"},{"owner":{"account_id":313594,"reputation":2936,"user_id":628318,"display_name":"drekbour"},"score":1,"creation_date":1638537201,"post_id":56026271,"comment_id":124121415,"body_markdown":"Mocking is fine but limited; The test has special knowledge how the `Clock` is used (see many comments to this effect). A windable/mutable `Clock` is a general purpose test tool and the ThreeTen version is written _by the author of java.time.Clock_ !","body":"Mocking is fine but limited; The test has special knowledge how the <code>Clock</code> is used (see many comments to this effect). A windable/mutable <code>Clock</code> is a general purpose test tool and the ThreeTen version is written <i>by the author of java.time.Clock</i> !"}],"tags":[],"owner":{"account_id":190269,"reputation":18134,"user_id":430128,"accept_rate":78,"display_name":"Raman"},"comment_count":4,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1617890156,"creation_date":1557244067,"answer_id":56026271,"question_id":27067049,"body_markdown":"Create a Mutable Clock Instead of Mocking\r\n---\r\n\r\nTo start, definitely inject a `Clock` into your class under test, as recommended by @Jon Skeet. If your class only requires one time, then simply pass in a `Clock.fixed(...)` value. However, if your class behaves differently across time e.g. it does something at time A, and then does something else at time B, then note that the clocks created by Java are **immutable**, and thus cannot be changed by the test to return time A at one time, and then time B at another.\r\n\r\nMocking, as per the accepted answer, is one option, but does tightly couple the test to the implementation. For example, as one commenter points out, what if the class under test calls `LocalDateTime.now(clock)` or `clock.millis()` instead of `clock.instant()`?\r\n\r\nAn alternate approach that is a bit more explicit, easier to understand, and may be more robust than a mock, is to create a real implementation of `Clock` that is **mutable**, so that the test can inject it and modify it as necessary. This is not difficult to implement, or here are several ready-made implementations:\r\n\r\n* https://github.com/Mercateo/test-clock (this one is [published on Maven Central][1] HT: @Bartek Jablonski)\r\n* https://github.com/ThreeTen/threeten-extra/blob/master/src/main/java/org/threeten/extra/MutableClock.java (also [on Maven Central][2] HT: @Wim Deblauwe)\r\n* https://github.com/robfletcher/test-clock\r\n\r\nAnd here is how one might use something like this in a test:\r\n\r\n```\r\nMutableClock c = new MutableClock(Instant.EPOCH, ZoneId.systemDefault());\r\nClassUnderTest classUnderTest = new ClassUnderTest(c);\r\n\r\nclassUnderTest.doSomething()\r\nassertTrue(...)\r\n\r\nc.instant(Instant.EPOCH.plusSeconds(60))\r\n\r\nclassUnderTest.doSomething()\r\nassertTrue(...)\r\n```\r\n\r\n\r\n  [1]: https://search.maven.org/artifact/com.mercateo/test-clock\r\n  [2]: https://search.maven.org/artifact/org.threeten/threeten-extra","title":"Unit testing a class with a Java 8 Clock","body":"<h2>Create a Mutable Clock Instead of Mocking</h2>\n<p>To start, definitely inject a <code>Clock</code> into your class under test, as recommended by @Jon Skeet. If your class only requires one time, then simply pass in a <code>Clock.fixed(...)</code> value. However, if your class behaves differently across time e.g. it does something at time A, and then does something else at time B, then note that the clocks created by Java are <strong>immutable</strong>, and thus cannot be changed by the test to return time A at one time, and then time B at another.</p>\n<p>Mocking, as per the accepted answer, is one option, but does tightly couple the test to the implementation. For example, as one commenter points out, what if the class under test calls <code>LocalDateTime.now(clock)</code> or <code>clock.millis()</code> instead of <code>clock.instant()</code>?</p>\n<p>An alternate approach that is a bit more explicit, easier to understand, and may be more robust than a mock, is to create a real implementation of <code>Clock</code> that is <strong>mutable</strong>, so that the test can inject it and modify it as necessary. This is not difficult to implement, or here are several ready-made implementations:</p>\n<ul>\n<li><a href=\"https://github.com/Mercateo/test-clock\" rel=\"noreferrer\">https://github.com/Mercateo/test-clock</a> (this one is <a href=\"https://search.maven.org/artifact/com.mercateo/test-clock\" rel=\"noreferrer\">published on Maven Central</a> HT: @Bartek Jablonski)</li>\n<li><a href=\"https://github.com/ThreeTen/threeten-extra/blob/master/src/main/java/org/threeten/extra/MutableClock.java\" rel=\"noreferrer\">https://github.com/ThreeTen/threeten-extra/blob/master/src/main/java/org/threeten/extra/MutableClock.java</a> (also <a href=\"https://search.maven.org/artifact/org.threeten/threeten-extra\" rel=\"noreferrer\">on Maven Central</a> HT: @Wim Deblauwe)</li>\n<li><a href=\"https://github.com/robfletcher/test-clock\" rel=\"noreferrer\">https://github.com/robfletcher/test-clock</a></li>\n</ul>\n<p>And here is how one might use something like this in a test:</p>\n<pre><code>MutableClock c = new MutableClock(Instant.EPOCH, ZoneId.systemDefault());\nClassUnderTest classUnderTest = new ClassUnderTest(c);\n\nclassUnderTest.doSomething()\nassertTrue(...)\n\nc.instant(Instant.EPOCH.plusSeconds(60))\n\nclassUnderTest.doSomething()\nassertTrue(...)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":72569,"reputation":10656,"user_id":209502,"accept_rate":67,"display_name":"Krzysztof Wolny"},"score":2,"creation_date":1601915447,"post_id":59248593,"comment_id":113548074,"body_markdown":"There is already a class for that, provided in JDK, see `Clock.fixed()`","body":"There is already a class for that, provided in JDK, see <code>Clock.fixed()</code>"},{"owner":{"account_id":128226,"reputation":10041,"user_id":325900,"accept_rate":78,"display_name":"DaveyDaveDave"},"score":5,"creation_date":1607468966,"post_id":59248593,"comment_id":115281672,"body_markdown":"@KrzysztofWolny, I think you&#39;ve missed the point - this is effectively creating a mutable clock as in Raman&#39;s answer.","body":"@KrzysztofWolny, I think you&#39;ve missed the point - this is effectively creating a mutable clock as in Raman&#39;s answer."}],"tags":[],"owner":{"account_id":220392,"reputation":10621,"user_id":5209935,"accept_rate":14,"display_name":"Matthew"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1590671969,"creation_date":1575893149,"answer_id":59248593,"question_id":27067049,"body_markdown":"As others have noted, you need to mock it somehow - however it&#39;s pretty easy to roll your own:\r\n\r\n```\r\n    class UnitTestClock extends Clock {\r\n        Instant instant;\r\n        public void setInstant(Instant instant) {\r\n            this.instant = instant;\r\n        }\r\n\r\n        @Override\r\n        public Instant instant() {\r\n            return instant;\r\n        }\r\n\r\n        @Override\r\n        public ZoneId getZone() {\r\n            return ZoneOffset.UTC;\r\n        }\r\n\r\n        @Override\r\n        public Clock withZone(ZoneId zoneId) {\r\n            throw new UnsupportedOperationException();\r\n        }\r\n    }\r\n```\r\n","title":"Unit testing a class with a Java 8 Clock","body":"<p>As others have noted, you need to mock it somehow - however it's pretty easy to roll your own:</p>\n\n<pre><code>    class UnitTestClock extends Clock {\n        Instant instant;\n        public void setInstant(Instant instant) {\n            this.instant = instant;\n        }\n\n        @Override\n        public Instant instant() {\n            return instant;\n        }\n\n        @Override\n        public ZoneId getZone() {\n            return ZoneOffset.UTC;\n        }\n\n        @Override\n        public Clock withZone(ZoneId zoneId) {\n            throw new UnsupportedOperationException();\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":72569,"reputation":10656,"user_id":209502,"accept_rate":67,"display_name":"Krzysztof Wolny"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1601912150,"creation_date":1601912150,"answer_id":64211788,"question_id":27067049,"body_markdown":"I faced the same issue and could not the existing solution that is simple and working so I ended up following code. Of course, it can be better, has configurable TZ, etc, but I needed something easy to use in tests, where I want to check how my under-test class is dealing with clock:\r\n1. I don&#39;t want to care what particular method of the `Clock` is being called so mocking is not a way to go.\r\n2. I wanted to have millies defined upfront\r\n\r\nNote: this class is `Groovy` class, to be used in Spock tests, but it&#39;s easily translatable into Java.\r\n\r\n\r\n```\r\nclass FixedTicksClock extends Clock {\r\n    private ZoneId systemDefault = ZoneId.systemDefault()\r\n    private long[] ticks\r\n    private int current = 0\r\n\r\n    FixedTicksClock(long ... ticks) {\r\n        this.ticks = ticks\r\n    }\r\n\r\n    @Override\r\n    ZoneId getZone() {\r\n        systemDefault\r\n    }\r\n\r\n    @Override\r\n    Clock withZone(final ZoneId zone) {\r\n        systemDefault = zone\r\n        this\r\n    }\r\n\r\n    @Override\r\n    Instant instant() {\r\n        ofEpochMilli(getNextTick())\r\n    }\r\n\r\n    @Override\r\n    long millis() {\r\n        getNextTick()\r\n    }\r\n\r\n    private long getNextTick() {\r\n        if (current &gt;= ticks.length) {\r\n            throw new IllegalStateException(&#39;No more ticks provided&#39;)\r\n        } else {\r\n            ticks[current++]\r\n        }\r\n    }\r\n}\r\n```","title":"Unit testing a class with a Java 8 Clock","body":"<p>I faced the same issue and could not the existing solution that is simple and working so I ended up following code. Of course, it can be better, has configurable TZ, etc, but I needed something easy to use in tests, where I want to check how my under-test class is dealing with clock:</p>\n<ol>\n<li>I don't want to care what particular method of the <code>Clock</code> is being called so mocking is not a way to go.</li>\n<li>I wanted to have millies defined upfront</li>\n</ol>\n<p>Note: this class is <code>Groovy</code> class, to be used in Spock tests, but it's easily translatable into Java.</p>\n<pre><code>class FixedTicksClock extends Clock {\n    private ZoneId systemDefault = ZoneId.systemDefault()\n    private long[] ticks\n    private int current = 0\n\n    FixedTicksClock(long ... ticks) {\n        this.ticks = ticks\n    }\n\n    @Override\n    ZoneId getZone() {\n        systemDefault\n    }\n\n    @Override\n    Clock withZone(final ZoneId zone) {\n        systemDefault = zone\n        this\n    }\n\n    @Override\n    Instant instant() {\n        ofEpochMilli(getNextTick())\n    }\n\n    @Override\n    long millis() {\n        getNextTick()\n    }\n\n    private long getNextTick() {\n        if (current &gt;= ticks.length) {\n            throw new IllegalStateException('No more ticks provided')\n        } else {\n            ticks[current++]\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27673193,"reputation":1,"user_id":21123566,"display_name":"Piotr Stawirej"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1697484995,"creation_date":1675798009,"answer_id":75378087,"question_id":27067049,"body_markdown":"I&#39;ve created [TimeFlow](https://github.com/stawirej/timeflow) library which simplifies dealing with time in production code and tests. It provides Java `Clock` which can be used in production code and easily adjusted/changed in tests. No need for passing `Clock` as a dependency anymore.\r\n\r\nProduction code:\r\n```java\r\nclass SomeService {\r\n\r\n    void doSomething() {\r\n        var now = Time.instance().now(); // or var now = Instant.now(Time.instance().clock());\r\n        // do something\r\n    }\r\n\r\n}\r\n```\r\n\r\nTests:\r\n```java\r\nfinal class Time_Scenarios {\r\n\r\n    private static final ZoneId ZONE_ID = TimeZone.getTimeZone(&quot;Europe/Warsaw&quot;).toZoneId();\r\n    private static final Clock\r\n        FIXED_CLOCK = Clock.fixed(LocalDateTime.of(1983, 10, 23, 9, 15).atZone(ZONE_ID).toInstant(), ZONE_ID);\r\n\r\n    @AfterEach\r\n    void afterEach() {\r\n        TestTime.testInstance().resetClock();\r\n    }\r\n\r\n    @Test\r\n    void Test_time_jump_for_something() {\r\n        // Given\r\n        TestTime.testInstance().setClock(FIXED_CLOCK);\r\n        var duration = Duration.of(10, ChronoUnit.MINUTES);\r\n\r\n        // setup time dependent code under test\r\n\r\n        // When\r\n        TestTime.testInstance().fastForward(duration);  // jump forward 10 minutes\r\n\r\n        // Then\r\n        // do assertions\r\n    }\r\n}\r\n```\r\n","title":"Unit testing a class with a Java 8 Clock","body":"<p>I've created <a href=\"https://github.com/stawirej/timeflow\" rel=\"nofollow noreferrer\">TimeFlow</a> library which simplifies dealing with time in production code and tests. It provides Java <code>Clock</code> which can be used in production code and easily adjusted/changed in tests. No need for passing <code>Clock</code> as a dependency anymore.</p>\n<p>Production code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SomeService {\n\n    void doSomething() {\n        var now = Time.instance().now(); // or var now = Instant.now(Time.instance().clock());\n        // do something\n    }\n\n}\n</code></pre>\n<p>Tests:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final class Time_Scenarios {\n\n    private static final ZoneId ZONE_ID = TimeZone.getTimeZone(&quot;Europe/Warsaw&quot;).toZoneId();\n    private static final Clock\n        FIXED_CLOCK = Clock.fixed(LocalDateTime.of(1983, 10, 23, 9, 15).atZone(ZONE_ID).toInstant(), ZONE_ID);\n\n    @AfterEach\n    void afterEach() {\n        TestTime.testInstance().resetClock();\n    }\n\n    @Test\n    void Test_time_jump_for_something() {\n        // Given\n        TestTime.testInstance().setClock(FIXED_CLOCK);\n        var duration = Duration.of(10, ChronoUnit.MINUTES);\n\n        // setup time dependent code under test\n\n        // When\n        TestTime.testInstance().fastForward(duration);  // jump forward 10 minutes\n\n        // Then\n        // do assertions\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9444879,"reputation":1502,"user_id":7024019,"display_name":"Crusha K. Rool"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699011093,"creation_date":1699011093,"answer_id":77416340,"question_id":27067049,"body_markdown":"Starting with Java 17, the JDK provides a somewhat built-in feature for this.\r\n\r\nYou can implement `InstantSource` and then use its default method `withZone(ZoneId)` to obtain a `Clock` instance that always returns the time that is provided via `InstantSource.instant()` and that point in time.\r\n\r\nExample:\r\n\r\n    // This is injected as singleton. If that&#39;s not an option, you can also make its state static.\r\n    public class TestClockFactory\r\n    {\r\n      private Instant testClockInstant = Instant.ofEpochMilli( 1000000000L );\r\n\r\n      public void setClock( long epochMilli )\r\n      {\r\n        testClockInstant = Instant.ofEpochMilli( epochMilli );\r\n      }\r\n    \r\n      public Instant getClockInstant()\r\n      {\r\n        return testClockInstant;\r\n      }\r\n    \r\n      public InstantSource newInstantSource()\r\n      {\r\n        return new TestInstantSource();\r\n      }\r\n    \r\n      public class TestInstantSource\r\n          implements InstantSource\r\n      {\r\n        @Override\r\n        public Instant instant()\r\n        {\r\n          return getClockInstant();\r\n        }\r\n      }\r\n    }\r\n\r\nand then\r\n\r\n    Clock testClock = testClockFactory.newInstantSource().withZone(ZoneId.of(&quot;UTC&quot;));\r\n\r\nThis way you can still update the current Instant for the testClock afterwards via `TestClockFactory.setClock()`.","title":"Unit testing a class with a Java 8 Clock","body":"<p>Starting with Java 17, the JDK provides a somewhat built-in feature for this.</p>\n<p>You can implement <code>InstantSource</code> and then use its default method <code>withZone(ZoneId)</code> to obtain a <code>Clock</code> instance that always returns the time that is provided via <code>InstantSource.instant()</code> and that point in time.</p>\n<p>Example:</p>\n<pre><code>// This is injected as singleton. If that's not an option, you can also make its state static.\npublic class TestClockFactory\n{\n  private Instant testClockInstant = Instant.ofEpochMilli( 1000000000L );\n\n  public void setClock( long epochMilli )\n  {\n    testClockInstant = Instant.ofEpochMilli( epochMilli );\n  }\n\n  public Instant getClockInstant()\n  {\n    return testClockInstant;\n  }\n\n  public InstantSource newInstantSource()\n  {\n    return new TestInstantSource();\n  }\n\n  public class TestInstantSource\n      implements InstantSource\n  {\n    @Override\n    public Instant instant()\n    {\n      return getClockInstant();\n    }\n  }\n}\n</code></pre>\n<p>and then</p>\n<pre><code>Clock testClock = testClockFactory.newInstantSource().withZone(ZoneId.of(&quot;UTC&quot;));\n</code></pre>\n<p>This way you can still update the current Instant for the testClock afterwards via <code>TestClockFactory.setClock()</code>.</p>\n"}],"owner":{"account_id":1766283,"reputation":1821,"user_id":1612093,"accept_rate":89,"display_name":"Mike"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":82569,"favorite_count":0,"down_vote_count":0,"up_vote_count":86,"accepted_answer_id":27067090,"answer_count":8,"score":86,"last_activity_date":1699011093,"creation_date":1416591058,"question_id":27067049,"body_markdown":"Java 8 introduced `java.time.Clock` which can be used as an argument to many other `java.time` objects, allowing you to inject a real or fake clock into them. For example, I know you can create a `Clock.fixed()` and then call `Instant.now(clock)` and it will return the fixed `Instant` you provided. This sounds perfect for unit testing!\r\n\r\nHowever, I&#39;m having trouble figuring out how best to use this. I have a class, similar to the following:\r\n\r\n    public class MyClass {\r\n        private Clock clock = Clock.systemUTC();\r\n    \r\n        public void method1() {\r\n            Instant now = Instant.now(clock);\r\n            // Do something with &#39;now&#39;\r\n        }\r\n    }\r\n\r\nNow, I want to unit test this code. I need to be able to set `clock` to produce fixed times so that I can test `method()` at different times. Clearly, I could use reflection to set the `clock` member to specific values, but it would be nice if I didn&#39;t have to resort to reflection. I could create a public `setClock()` method, but that feels wrong. I don&#39;t want to add a `Clock` argument to the method because the real code shouldn&#39;t be concerned with passing in a clock.\r\n\r\nWhat is the best approach for handling this? This is new code so I could reorganize the class.\r\n\r\nEdit: To clarify, I need to be able to construct a single `MyClass` object but be able to have that one object see two different clock values (as if it were a regular system clock ticking along). As such, I cannot pass a fixed clock into the constructor.","title":"Unit testing a class with a Java 8 Clock","body":"<p>Java 8 introduced <code>java.time.Clock</code> which can be used as an argument to many other <code>java.time</code> objects, allowing you to inject a real or fake clock into them. For example, I know you can create a <code>Clock.fixed()</code> and then call <code>Instant.now(clock)</code> and it will return the fixed <code>Instant</code> you provided. This sounds perfect for unit testing!</p>\n\n<p>However, I'm having trouble figuring out how best to use this. I have a class, similar to the following:</p>\n\n<pre><code>public class MyClass {\n    private Clock clock = Clock.systemUTC();\n\n    public void method1() {\n        Instant now = Instant.now(clock);\n        // Do something with 'now'\n    }\n}\n</code></pre>\n\n<p>Now, I want to unit test this code. I need to be able to set <code>clock</code> to produce fixed times so that I can test <code>method()</code> at different times. Clearly, I could use reflection to set the <code>clock</code> member to specific values, but it would be nice if I didn't have to resort to reflection. I could create a public <code>setClock()</code> method, but that feels wrong. I don't want to add a <code>Clock</code> argument to the method because the real code shouldn't be concerned with passing in a clock.</p>\n\n<p>What is the best approach for handling this? This is new code so I could reorganize the class.</p>\n\n<p>Edit: To clarify, I need to be able to construct a single <code>MyClass</code> object but be able to have that one object see two different clock values (as if it were a regular system clock ticking along). As such, I cannot pass a fixed clock into the constructor.</p>\n"},{"tags":["java","android","kotlin","android-orientation"],"comments":[{"owner":{"account_id":17973935,"reputation":185,"user_id":13062000,"display_name":"404NotFound"},"score":0,"creation_date":1699010039,"post_id":77395090,"comment_id":136479808,"body_markdown":"what is your API level?","body":"what is your API level?"},{"owner":{"account_id":17973935,"reputation":185,"user_id":13062000,"display_name":"404NotFound"},"score":0,"creation_date":1699010707,"post_id":77395090,"comment_id":136479906,"body_markdown":"Can you share your `OrientationEventListener` whole class code?","body":"Can you share your <code>OrientationEventListener</code> whole class code?"}],"answers":[{"comments":[{"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"score":0,"creation_date":1698905597,"post_id":77395511,"comment_id":136464218,"body_markdown":"Oh Actually, I flipped the height and width later to get it working, but forgot to switch it back before posting my bad. The problem is still there, have edited my mistake in the question.","body":"Oh Actually, I flipped the height and width later to get it working, but forgot to switch it back before posting my bad. The problem is still there, have edited my mistake in the question."}],"tags":[],"owner":{"account_id":17973935,"reputation":185,"user_id":13062000,"display_name":"404NotFound"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698751881,"creation_date":1698751881,"answer_id":77395511,"question_id":77395090,"body_markdown":"You have mistakenly assigned width to Height function. You have written this:\r\n\r\n```\r\nwidth = TWOSScreenAspectsAndroid.GetScreenHeight ()\r\n```\r\n\r\nIt should be:\r\n\r\n```\r\nheight = TWOSScreenAspectsAndroid.GetScreenHeight ()\r\n```\r\nand vice versa","title":"Getting Portrait mode&#39;s height and width when the orientation is Landscape in OrientationEventListener in Android","body":"<p>You have mistakenly assigned width to Height function. You have written this:</p>\n<pre><code>width = TWOSScreenAspectsAndroid.GetScreenHeight ()\n</code></pre>\n<p>It should be:</p>\n<pre><code>height = TWOSScreenAspectsAndroid.GetScreenHeight ()\n</code></pre>\n<p>and vice versa</p>\n"},{"tags":[],"owner":{"account_id":17973935,"reputation":185,"user_id":13062000,"display_name":"404NotFound"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699011065,"creation_date":1699011065,"answer_id":77416337,"question_id":77395090,"body_markdown":"I tried this inside MainActivity:\r\n```\r\n    private var orientationListener: OrientationEventListener? = null\r\n    lateinit private var context: Context\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n        context = this\r\n        orientationListener = object : OrientationEventListener(this, SensorManager.SENSOR_DELAY_UI) {\r\n            override fun onOrientationChanged(orientation: Int) {\r\n                Log.d(&quot;orientation&quot;, &quot;$orientation&quot;)\r\n                if (orientation == 0 || orientation == 180) {\r\n                    Log.d(&quot;orientation&quot;, &quot;Orientation: Portrait&quot;)\r\n                    getScreenHeight(context)\r\n                    orientationListener?.disable()\r\n                } else if (orientation == 90 || orientation == 270) {\r\n                    Log.d(&quot;orientation&quot;, &quot;Orientation: LandScape&quot;)\r\n                    getScreenHeight(context)\r\n                    orientationListener?.disable()\r\n                }\r\n            }\r\n        }\r\n        if (orientationListener?.canDetectOrientation() == true) {\r\n            orientationListener?.enable()\r\n        }\r\n    }\r\n\r\n    private fun getScreenHeight(context: Context){\r\n        val metric: WindowMetrics\r\n        val insets: Insets                         // An Insets instance holds four integer offsets which describe changes to the four edges of a Rectangle.\r\n        val displayMetrics: DisplayMetrics\r\n        val height: Int\r\n        val width: Int\r\n        val insetsHeight: Int\r\n        val insetsWidth: Int\r\n        val activity: Activity\r\n        activity = context as Activity\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n\r\n            // Code for API level 30 and higher\r\n\r\n            metric = activity.windowManager.currentWindowMetrics\r\n            insets = activity.windowManager.currentWindowMetrics.windowInsets.getInsetsIgnoringVisibility (\r\n                WindowInsets.Type.navigationBars() or WindowInsets.Type.displayCutout ())\r\n\r\n            insetsHeight = insets.top + insets.bottom\r\n            insetsWidth = insets.left + insets.right\r\n            Log.d (&quot;orientation&quot;, &quot;${insets.right}, ${insets.left}, ${insets.top}, ${insets.bottom}&quot;)\r\n\r\n            height = metric.bounds.height () - insetsHeight\r\n            width = metric.bounds.width() - insetsWidth\r\n\r\n        } else {\r\n\r\n            // Code for API level 29 and lower\r\n\r\n            displayMetrics = DisplayMetrics ()\r\n            activity.windowManager.defaultDisplay.getMetrics (displayMetrics)\r\n\r\n            height = displayMetrics.heightPixels\r\n            width = displayMetrics.widthPixels\r\n        }\r\n\r\n        Log.d (&quot;orientation&quot;, &quot;Inside TWOSScreenAspectsAndroid::GetScreenHeight Height: $height $width&quot;)\r\n    }\r\n\r\n```\r\nThis is working fine for me, what I found was that whenever we rotate device application will recreate the MainActivity and it will register the `orientationListener` again. So i was getting multiple times `onOrientationChanged` and each time it was giving me wrong value except the last time. Hence i added this to get fresh value everytime.\r\n\r\n    orientationListener?.disable()\r\n\r\nHope this helps!!\r\n    ","title":"Getting Portrait mode&#39;s height and width when the orientation is Landscape in OrientationEventListener in Android","body":"<p>I tried this inside MainActivity:</p>\n<pre><code>    private var orientationListener: OrientationEventListener? = null\n    lateinit private var context: Context\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        context = this\n        orientationListener = object : OrientationEventListener(this, SensorManager.SENSOR_DELAY_UI) {\n            override fun onOrientationChanged(orientation: Int) {\n                Log.d(&quot;orientation&quot;, &quot;$orientation&quot;)\n                if (orientation == 0 || orientation == 180) {\n                    Log.d(&quot;orientation&quot;, &quot;Orientation: Portrait&quot;)\n                    getScreenHeight(context)\n                    orientationListener?.disable()\n                } else if (orientation == 90 || orientation == 270) {\n                    Log.d(&quot;orientation&quot;, &quot;Orientation: LandScape&quot;)\n                    getScreenHeight(context)\n                    orientationListener?.disable()\n                }\n            }\n        }\n        if (orientationListener?.canDetectOrientation() == true) {\n            orientationListener?.enable()\n        }\n    }\n\n    private fun getScreenHeight(context: Context){\n        val metric: WindowMetrics\n        val insets: Insets                         // An Insets instance holds four integer offsets which describe changes to the four edges of a Rectangle.\n        val displayMetrics: DisplayMetrics\n        val height: Int\n        val width: Int\n        val insetsHeight: Int\n        val insetsWidth: Int\n        val activity: Activity\n        activity = context as Activity\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n\n            // Code for API level 30 and higher\n\n            metric = activity.windowManager.currentWindowMetrics\n            insets = activity.windowManager.currentWindowMetrics.windowInsets.getInsetsIgnoringVisibility (\n                WindowInsets.Type.navigationBars() or WindowInsets.Type.displayCutout ())\n\n            insetsHeight = insets.top + insets.bottom\n            insetsWidth = insets.left + insets.right\n            Log.d (&quot;orientation&quot;, &quot;${insets.right}, ${insets.left}, ${insets.top}, ${insets.bottom}&quot;)\n\n            height = metric.bounds.height () - insetsHeight\n            width = metric.bounds.width() - insetsWidth\n\n        } else {\n\n            // Code for API level 29 and lower\n\n            displayMetrics = DisplayMetrics ()\n            activity.windowManager.defaultDisplay.getMetrics (displayMetrics)\n\n            height = displayMetrics.heightPixels\n            width = displayMetrics.widthPixels\n        }\n\n        Log.d (&quot;orientation&quot;, &quot;Inside TWOSScreenAspectsAndroid::GetScreenHeight Height: $height $width&quot;)\n    }\n\n</code></pre>\n<p>This is working fine for me, what I found was that whenever we rotate device application will recreate the MainActivity and it will register the <code>orientationListener</code> again. So i was getting multiple times <code>onOrientationChanged</code> and each time it was giving me wrong value except the last time. Hence i added this to get fresh value everytime.</p>\n<pre><code>orientationListener?.disable()\n</code></pre>\n<p>Hope this helps!!</p>\n"}],"owner":{"account_id":27817647,"reputation":591,"user_id":21238708,"display_name":"Jatin guglani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699011065,"creation_date":1698748023,"question_id":77395090,"body_markdown":"I want to get the screen height and width when the device&#39;s orientation changes and I&#39;m using [OrientationEventListener][1] instead of the onConfigurationChanged() method.\r\n\r\nFor the below Code:\r\n\r\n1)OrientationEventListener \r\n\r\n    mOrientationListener = object : OrientationEventListener (context, SensorManager.SENSOR_DELAY_UI)\r\n    {\r\n    override fun onOrientationChanged (orientation: Int)\r\n    {\r\n        if (gTemp == false) {\r\n            \r\n            gTemp = true\r\n        \r\n        } else if (orientation == 0 || orientation == 180) {\r\n    \r\n            Log.d (&quot;orientation&quot;, &quot;Orientation: Portrait&quot;)\r\n            \r\n            height = TWOSScreenAspectsAndroid.GetScreenHeight ()\r\n            width = TWOSScreenAspectsAndroid.GetScreenWidth ()\r\n             \r\n            // call cpp function \r\n            OrientationChanged (pInstructionSetIndex, width, height)\r\n\r\n    \r\n        } else if (orientation == 90 || orientation == 270) {\r\n    \r\n            Log.d (&quot;orientation&quot;, &quot;Orientation: LandScape&quot;)\r\n        \r\n            width = TWOSScreenAspectsAndroid.GetScreenHeight ()\r\n            height = TWOSScreenAspectsAndroid.GetScreenWidth ()\r\n            \r\n            // call cpp function\r\n            OrientationChanged (pInstructionSetIndex, width, height)\r\n        }\r\n    }\r\n    }\r\n\r\n    if (mOrientationListener.canDetectOrientation ()) {\r\n\r\n    mOrientationListener.enable ()\r\n    }\r\n\r\n2)TWOSScreenAspectsAndroid.GetScreenHeight ()\r\n\r\n    @JvmStatic\r\n    public fun GetScreenHeight (): Int\r\n    {\r\n        val metric: WindowMetrics\r\n        val insets: Insets                         // An Insets instance holds four integer offsets which describe changes to the four edges of a Rectangle.\r\n        val displayMetrics: DisplayMetrics\r\n        val height: Int\r\n        val insetsHeight: Int\r\n        val context: Context?\r\n         val activity: Activity\r\n\r\n    context = TWProcessStates.GetMainActivityContext ()\r\n    \r\n    activity = context as Activity\r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n\r\n        // Code for API level 30 and higher\r\n\r\n        metric = activity.windowManager.currentWindowMetrics\r\n        insets = activity.windowManager.currentWindowMetrics.windowInsets.getInsetsIgnoringVisibility (WindowInsets.Type.navigationBars() or WindowInsets.Type.displayCutout ())\r\n\r\n        insetsHeight = insets.top + insets.bottom\r\n\r\n        Log.d (&quot;orientation_height&quot;, &quot;${insets.right}, ${insets.left}, ${insets.top}, ${insets.bottom}&quot;)\r\n\r\n        height = metric.bounds.height () - insetsHeight\r\n\r\n    } else {\r\n\r\n        // Code for API level 29 and lower\r\n\r\n        displayMetrics = DisplayMetrics ()\r\n        activity.windowManager.defaultDisplay.getMetrics (displayMetrics)\r\n\r\n        height = displayMetrics.heightPixels\r\n    }\r\n\r\n    Log.d (&quot;orientation_height&quot;, &quot;Inside TWOSScreenAspectsAndroid::GetScreenHeight Height: $height&quot;)\r\n    return height\r\n    }\r\n\r\nI&#39;m getting Portrait mode&#39;s height and width when the orientation is Landscape and vice versa, as shown in the below logs:\r\n[![enter image description here][2]][2]\r\n\r\nHow to fix this?\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/view/OrientationEventListener\r\n  [2]: https://i.stack.imgur.com/bMWOol.png","title":"Getting Portrait mode&#39;s height and width when the orientation is Landscape in OrientationEventListener in Android","body":"<p>I want to get the screen height and width when the device's orientation changes and I'm using <a href=\"https://developer.android.com/reference/android/view/OrientationEventListener\" rel=\"nofollow noreferrer\">OrientationEventListener</a> instead of the onConfigurationChanged() method.</p>\n<p>For the below Code:</p>\n<p>1)OrientationEventListener</p>\n<pre><code>mOrientationListener = object : OrientationEventListener (context, SensorManager.SENSOR_DELAY_UI)\n{\noverride fun onOrientationChanged (orientation: Int)\n{\n    if (gTemp == false) {\n        \n        gTemp = true\n    \n    } else if (orientation == 0 || orientation == 180) {\n\n        Log.d (&quot;orientation&quot;, &quot;Orientation: Portrait&quot;)\n        \n        height = TWOSScreenAspectsAndroid.GetScreenHeight ()\n        width = TWOSScreenAspectsAndroid.GetScreenWidth ()\n         \n        // call cpp function \n        OrientationChanged (pInstructionSetIndex, width, height)\n\n\n    } else if (orientation == 90 || orientation == 270) {\n\n        Log.d (&quot;orientation&quot;, &quot;Orientation: LandScape&quot;)\n    \n        width = TWOSScreenAspectsAndroid.GetScreenHeight ()\n        height = TWOSScreenAspectsAndroid.GetScreenWidth ()\n        \n        // call cpp function\n        OrientationChanged (pInstructionSetIndex, width, height)\n    }\n}\n}\n\nif (mOrientationListener.canDetectOrientation ()) {\n\nmOrientationListener.enable ()\n}\n</code></pre>\n<p>2)TWOSScreenAspectsAndroid.GetScreenHeight ()</p>\n<pre><code>@JvmStatic\npublic fun GetScreenHeight (): Int\n{\n    val metric: WindowMetrics\n    val insets: Insets                         // An Insets instance holds four integer offsets which describe changes to the four edges of a Rectangle.\n    val displayMetrics: DisplayMetrics\n    val height: Int\n    val insetsHeight: Int\n    val context: Context?\n     val activity: Activity\n\ncontext = TWProcessStates.GetMainActivityContext ()\n\nactivity = context as Activity\n\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n\n    // Code for API level 30 and higher\n\n    metric = activity.windowManager.currentWindowMetrics\n    insets = activity.windowManager.currentWindowMetrics.windowInsets.getInsetsIgnoringVisibility (WindowInsets.Type.navigationBars() or WindowInsets.Type.displayCutout ())\n\n    insetsHeight = insets.top + insets.bottom\n\n    Log.d (&quot;orientation_height&quot;, &quot;${insets.right}, ${insets.left}, ${insets.top}, ${insets.bottom}&quot;)\n\n    height = metric.bounds.height () - insetsHeight\n\n} else {\n\n    // Code for API level 29 and lower\n\n    displayMetrics = DisplayMetrics ()\n    activity.windowManager.defaultDisplay.getMetrics (displayMetrics)\n\n    height = displayMetrics.heightPixels\n}\n\nLog.d (&quot;orientation_height&quot;, &quot;Inside TWOSScreenAspectsAndroid::GetScreenHeight Height: $height&quot;)\nreturn height\n}\n</code></pre>\n<p>I'm getting Portrait mode's height and width when the orientation is Landscape and vice versa, as shown in the below logs:\n<a href=\"https://i.stack.imgur.com/bMWOol.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bMWOol.png\" alt=\"enter image description here\" /></a></p>\n<p>How to fix this?</p>\n"},{"tags":["java","ajax","json","jackson","spring-4"],"comments":[{"owner":{"account_id":5611870,"reputation":1367,"user_id":4516236,"display_name":"faljbour"},"score":0,"creation_date":1427173289,"post_id":29223683,"comment_id":46658563,"body_markdown":"Would you post your code for the AjaxResponse class also your url is &quot;/BusinessReimbursment/addDepartment&quot; but you request mapping is only &quot;addDepartment&quot;, should it be &quot;/addDepartment&quot; or &quot;/BusinessReimbursment/addDepartment&quot;.","body":"Would you post your code for the AjaxResponse class also your url is &quot;/BusinessReimbursment/addDepartment&quot; but you request mapping is only &quot;addDepartment&quot;, should it be &quot;/addDepartment&quot; or &quot;/BusinessReimbursment/addDepartment&quot;."},{"owner":{"account_id":5865579,"reputation":1569,"user_id":4619671,"accept_rate":33,"display_name":"chaitanya dalvi"},"score":0,"creation_date":1427194178,"post_id":29223683,"comment_id":46667628,"body_markdown":"There is no issue in url. Because it work without requestBody.","body":"There is no issue in url. Because it work without requestBody."},{"owner":{"account_id":5865579,"reputation":1569,"user_id":4619671,"accept_rate":33,"display_name":"chaitanya dalvi"},"score":0,"creation_date":1427247783,"post_id":29223683,"comment_id":46697595,"body_markdown":"`public class AjaxResponse {\n\n\tprivate boolean success;\n    private String message;\n\tpublic boolean isSuccess() {\n\t\treturn success;\n\t}\n\tpublic void setSuccess(boolean success) {\n\t\tthis.success = success;\n\t}\n\tpublic String getMessage() {\n\t\treturn message;\n\t}\n\tpublic void setMessage(String message) {\n\t\tthis.message = message;\n\t}\n\t\n}`","body":"<code>public class AjaxResponse {  \tprivate boolean success;     private String message; \tpublic boolean isSuccess() { \t\treturn success; \t} \tpublic void setSuccess(boolean success) { \t\tthis.success = success; \t} \tpublic String getMessage() { \t\treturn message; \t} \tpublic void setMessage(String message) { \t\tthis.message = message; \t} \t }</code>"}],"answers":[{"comments":[{"owner":{"account_id":5865579,"reputation":1569,"user_id":4619671,"accept_rate":33,"display_name":"chaitanya dalvi"},"score":0,"creation_date":1427194939,"post_id":29224497,"comment_id":46668113,"body_markdown":"I hv mention GET n POST in request mapping annotation. If I pass post response then it gives error which I hv mention in post..","body":"I hv mention GET n POST in request mapping annotation. If I pass post response then it gives error which I hv mention in post.."},{"owner":{"account_id":140637,"reputation":6194,"user_id":1311394,"display_name":"ach"},"score":1,"creation_date":1427201393,"post_id":29224497,"comment_id":46672174,"body_markdown":"Please read my answer again.  You can&#39;t use `GET` in your `@RequestMapping` annotation along with `@RequestBody` since a GET request cannot have a body. In general GET should only be used for read-only operations like getting a record or searching. Remove GET completely and try again.","body":"Please read my answer again.  You can&#39;t use <code>GET</code> in your <code>@RequestMapping</code> annotation along with <code>@RequestBody</code> since a GET request cannot have a body. In general GET should only be used for read-only operations like getting a record or searching. Remove GET completely and try again."},{"owner":{"account_id":5865579,"reputation":1569,"user_id":4619671,"accept_rate":33,"display_name":"chaitanya dalvi"},"score":0,"creation_date":1427247982,"post_id":29224497,"comment_id":46697639,"body_markdown":"I changed Method: POST, and Removed RequestMethod:GET From @requestMapping annotion i get following error which i hv mention in post.","body":"I changed Method: POST, and Removed RequestMethod:GET From @requestMapping annotion i get following error which i hv mention in post."},{"owner":{"account_id":5865579,"reputation":1569,"user_id":4619671,"accept_rate":33,"display_name":"chaitanya dalvi"},"score":0,"creation_date":1427248341,"post_id":29224497,"comment_id":46697706,"body_markdown":"`Request method &#39;POST&#39; not supported\nInvalid CSRF token found for http://localhost:8080/BusinessReimbursment/addDepartment\n DispatcherServlet with name &#39;dispatcher&#39; processing POST request for [/BusinessReimbursment/403]\n Looking up handler method for path /403\nHttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported\nHttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported\nHttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported\n WARN  o.s.web.servlet.PageNotFound - Request method &#39;POST&#39; not supported`","body":"<code>Request method &#39;POST&#39; not supported Invalid CSRF token found for http:&#47;&#47;localhost:8080&#47;BusinessReimbursment&#47;addDepartment  DispatcherServlet with name &#39;dispatcher&#39; processing POST request for [&#47;BusinessReimbursment&#47;403]  Looking up handler method for path &#47;403 HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported  WARN  o.s.web.servlet.PageNotFound - Request method &#39;POST&#39; not supported</code>"},{"owner":{"account_id":1180749,"reputation":8956,"user_id":1155721,"accept_rate":77,"display_name":"csvan"},"score":0,"creation_date":1481899829,"post_id":29224497,"comment_id":69573582,"body_markdown":"`Invalid CSRF token` is a completely different problem.","body":"<code>Invalid CSRF token</code> is a completely different problem."},{"owner":{"account_id":1096964,"reputation":3884,"user_id":1090360,"accept_rate":84,"display_name":"JackTheKnife"},"score":0,"creation_date":1551286781,"post_id":29224497,"comment_id":96588327,"body_markdown":"Since when you can&#39;t send a request body with an HTTP GET request? More here: http://stackoverflow.com/questions/978061/http-get-with-request-body","body":"Since when you can&#39;t send a request body with an HTTP GET request? More here: <a href=\"http://stackoverflow.com/questions/978061/http-get-with-request-body\" title=\"http get with request body\">stackoverflow.com/questions/978061/http-get-with-request-bod&zwnj;&#8203;y</a>"},{"owner":{"account_id":140637,"reputation":6194,"user_id":1311394,"display_name":"ach"},"score":0,"creation_date":1551375393,"post_id":29224497,"comment_id":96626917,"body_markdown":"I was incorrect about that in my answer from 4 years ago. If you&#39;d like to submit an edit to change the word &quot;can&#39;t&quot; to &quot;shouldn&#39;t&quot;, feel free.","body":"I was incorrect about that in my answer from 4 years ago. If you&#39;d like to submit an edit to change the word &quot;can&#39;t&quot; to &quot;shouldn&#39;t&quot;, feel free."},{"owner":{"account_id":3571848,"reputation":643,"user_id":2981971,"display_name":"Zhou"},"score":0,"creation_date":1574025129,"post_id":29224497,"comment_id":104073212,"body_markdown":"@ach Actually you&#39;re right to some extent. The RestTemplate of the Spring framework does throw the message body away if the request is GET even if the HTTP spec no longer disallows this. I clearly saw it in its source code.","body":"@ach Actually you&#39;re right to some extent. The RestTemplate of the Spring framework does throw the message body away if the request is GET even if the HTTP spec no longer disallows this. I clearly saw it in its source code."}],"tags":[],"owner":{"account_id":140637,"reputation":6194,"user_id":1311394,"display_name":"ach"},"comment_count":8,"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1556283891,"creation_date":1427167373,"answer_id":29224497,"question_id":29223683,"body_markdown":"You shouldn&#39;t send a request body with an HTTP GET request. You should modify `addDepartment()` so that it only supports POST, and POST your JSON to that endpoint. If you want to GET information about a department, you should create a separate controller method that does that (and does not require a request body).\r\n\r\nAlso, double-check your endpoint definitions since you have misspelled &quot;reimbursement&quot; in the `$.ajax` call.","title":"Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter","body":"<p>You shouldn't send a request body with an HTTP GET request. You should modify <code>addDepartment()</code> so that it only supports POST, and POST your JSON to that endpoint. If you want to GET information about a department, you should create a separate controller method that does that (and does not require a request body).</p>\n\n<p>Also, double-check your endpoint definitions since you have misspelled \"reimbursement\" in the <code>$.ajax</code> call.</p>\n"},{"tags":[],"owner":{"account_id":5611870,"reputation":1367,"user_id":4516236,"display_name":"faljbour"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1427256151,"creation_date":1427256151,"answer_id":29247219,"question_id":29223683,"body_markdown":"I made some minor modification to you code and tested it with a spring project that I have and it works,  The logic will only work with POST if I use GET it throws an error with invalid request. Also in your ajax call I commented out commit(true), the browser debugger flagged and error that it is not defined.  Just modify the url to fit your Spring project architecture.  \r\n\r\n     $.ajax({ \r\n                        url: &quot;/addDepartment&quot;, \r\n                        method: &#39;POST&#39;, \r\n                        dataType: &#39;json&#39;, \r\n                        data: &quot;{\\&quot;message\\&quot;:\\&quot;abc\\&quot;,\\&quot;success\\&quot;:true}&quot;,\r\n                        contentType: &#39;application/json&#39;,\r\n                        mimeType: &#39;application/json&#39;,\r\n                        success: function(data) { \r\n                            alert(data.success + &quot; &quot; + data.message);\r\n                            //commit(true);\r\n                        },\r\n                        error:function(data,status,er) { \r\n                            alert(&quot;error: &quot;+data+&quot; status: &quot;+status+&quot; er:&quot;+er);\r\n                        }\r\n                    });\r\n\r\n  \r\n\r\n    @RequestMapping(value=&quot;/addDepartment&quot;, method=RequestMethod.POST)\r\n      public AjaxResponse addDepartment(@RequestBody final AjaxResponse  departmentDTO)\r\n      {\r\n        System.out.println(&quot;addDepartment: &gt;&gt;&gt;&gt;&gt;&gt;&gt; &quot;+departmentDTO);\r\n        AjaxResponse response=new AjaxResponse();\r\n        response.setSuccess(departmentDTO.isSuccess());\r\n        response.setMessage(departmentDTO.getMessage());\r\n        return response;\r\n      }\r\n\r\n","title":"Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter","body":"<p>I made some minor modification to you code and tested it with a spring project that I have and it works,  The logic will only work with POST if I use GET it throws an error with invalid request. Also in your ajax call I commented out commit(true), the browser debugger flagged and error that it is not defined.  Just modify the url to fit your Spring project architecture.  </p>\n\n<pre><code> $.ajax({ \n                    url: \"/addDepartment\", \n                    method: 'POST', \n                    dataType: 'json', \n                    data: \"{\\\"message\\\":\\\"abc\\\",\\\"success\\\":true}\",\n                    contentType: 'application/json',\n                    mimeType: 'application/json',\n                    success: function(data) { \n                        alert(data.success + \" \" + data.message);\n                        //commit(true);\n                    },\n                    error:function(data,status,er) { \n                        alert(\"error: \"+data+\" status: \"+status+\" er:\"+er);\n                    }\n                });\n\n\n\n@RequestMapping(value=\"/addDepartment\", method=RequestMethod.POST)\n  public AjaxResponse addDepartment(@RequestBody final AjaxResponse  departmentDTO)\n  {\n    System.out.println(\"addDepartment: &gt;&gt;&gt;&gt;&gt;&gt;&gt; \"+departmentDTO);\n    AjaxResponse response=new AjaxResponse();\n    response.setSuccess(departmentDTO.isSuccess());\n    response.setMessage(departmentDTO.getMessage());\n    return response;\n  }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5865579,"reputation":1569,"user_id":4619671,"accept_rate":33,"display_name":"chaitanya dalvi"},"score":0,"creation_date":1427636499,"post_id":29316299,"comment_id":46849099,"body_markdown":"`Request method &#39;POST&#39; not supported Invalid CSRF token found for http://localhost:8080/BusinessReimbursment/addDepartment DispatcherServlet with name &#39;dispatcher&#39; processing POST request for [/BusinessReimbursment/403] Looking up handler method for path /403 HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported WARN o.s.web.servlet.PageNotFound - Request method &#39;POST&#39; not supported – `","body":"<code>Request method &#39;POST&#39; not supported Invalid CSRF token found for http:&#47;&#47;localhost:8080&#47;BusinessReimbursment&#47;addDepartment DispatcherServlet with name &#39;dispatcher&#39; processing POST request for [&#47;BusinessReimbursment&#47;403] Looking up handler method for path &#47;403 HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported WARN o.s.web.servlet.PageNotFound - Request method &#39;POST&#39; not supported – </code>"}],"tags":[],"owner":{"account_id":5865579,"reputation":1569,"user_id":4619671,"accept_rate":33,"display_name":"chaitanya dalvi"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1444747793,"creation_date":1427540129,"answer_id":29316299,"question_id":29223683,"body_markdown":" Sorry guys.. actually because of a csrf token was needed I was getting that issue.\r\nI have implemented spring security and csrf is enable. And through ajax call I need to pass the csrf token.","title":"Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter","body":"<p>Sorry guys.. actually because of a csrf token was needed I was getting that issue.\nI have implemented spring security and csrf is enable. And through ajax call I need to pass the csrf token.</p>\n"},{"comments":[{"owner":{"account_id":203704,"reputation":13105,"user_id":451518,"display_name":"default locale"},"score":0,"creation_date":1503027888,"post_id":45748010,"comment_id":78453565,"body_markdown":"Is this a question? If so, [post it as a separate question](https://stackoverflow.com/questions/ask). You can add a link to this question, if necessary.","body":"Is this a question? If so, <a href=\"https://stackoverflow.com/questions/ask\">post it as a separate question</a>. You can add a link to this question, if necessary."},{"owner":{"account_id":203704,"reputation":13105,"user_id":451518,"display_name":"default locale"},"score":0,"creation_date":1503132442,"post_id":45748010,"comment_id":78497291,"body_markdown":"Next time, don&#39;t turn your whole post into a link, better add a link at the end. Also, OP didn&#39;t say anything about Postman. If you want to address this issue it seems like a good idea to show what was the particular mistake and how to reproduce the error.","body":"Next time, don&#39;t turn your whole post into a link, better add a link at the end. Also, OP didn&#39;t say anything about Postman. If you want to address this issue it seems like a good idea to show what was the particular mistake and how to reproduce the error."}],"tags":[],"owner":{"account_id":11162733,"reputation":362,"user_id":8192280,"display_name":"Rujal Shrestha"},"comment_count":2,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1503131883,"creation_date":1503026534,"answer_id":45748010,"question_id":29223683,"body_markdown":"I also had the same problem. I use &quot;Postman&quot; for JSON request. The code itself is not wrong. I simply set the content type to JSON (`application/json`) and it worked, as you can see on the image below\r\n\r\n[![My Code][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gzakr.png","title":"Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter","body":"<p>I also had the same problem. I use \"Postman\" for JSON request. The code itself is not wrong. I simply set the content type to JSON (<code>application/json</code>) and it worked, as you can see on the image below</p>\n\n<p><a href=\"https://i.stack.imgur.com/gzakr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/gzakr.png\" alt=\"My Code\"></a></p>\n"},{"comments":[{"owner":{"account_id":3578561,"reputation":2945,"user_id":2987273,"display_name":"Alexander"},"score":3,"creation_date":1528317300,"post_id":50729058,"comment_id":88466123,"body_markdown":"No, this will probably not help","body":"No, this will probably not help"},{"owner":{"account_id":17108660,"reputation":1251,"user_id":12380096,"display_name":"AylaWinters"},"score":0,"creation_date":1619626499,"post_id":50729058,"comment_id":118963992,"body_markdown":"I don&#39;t understand why this worked, but it did and my requestbody went through were before it did not...","body":"I don&#39;t understand why this worked, but it did and my requestbody went through were before it did not..."},{"owner":{"account_id":10958415,"reputation":1159,"user_id":8057127,"display_name":"Harsh Gundecha"},"score":0,"creation_date":1626696748,"post_id":50729058,"comment_id":120954466,"body_markdown":"@Juan this is same as not using annotation at all and it would still work, not a solution","body":"@Juan this is same as not using annotation at all and it would still work, not a solution"}],"tags":[],"owner":{"account_id":11189858,"reputation":79,"user_id":9313703,"display_name":"Juan"},"comment_count":3,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1528316914,"creation_date":1528316914,"answer_id":50729058,"question_id":29223683,"body_markdown":"Try this:\r\n\r\n@RequestBody(required = false) String str","title":"Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter","body":"<p>Try this:</p>\n\n<p>@RequestBody(required = false) String str</p>\n"},{"tags":[],"owner":{"account_id":12091379,"reputation":1,"user_id":8837386,"display_name":"Szab&#243; G&#225;bor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587708169,"creation_date":1587708169,"answer_id":61402135,"question_id":29223683,"body_markdown":"If it&#39;s working from Postman, try new Spring version, becouse the &#39;org.springframework.boot&#39; 2.2.2.RELEASE version can throw &quot;Required request body content is missing&quot; exception.    \r\nTry **2.2.6.RELEASE** version.","title":"Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter","body":"<p>If it's working from Postman, try new Spring version, becouse the 'org.springframework.boot' 2.2.2.RELEASE version can throw \"Required request body content is missing\" exception.<br>\nTry <strong>2.2.6.RELEASE</strong> version.</p>\n"},{"tags":[],"owner":{"account_id":12651994,"reputation":1503,"user_id":9195780,"display_name":"Ping Woo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605498571,"creation_date":1605498571,"answer_id":64852470,"question_id":29223683,"body_markdown":"In my side, it is because POSTMAN setting issue, but I don&#39;t know why, maybe I copy a query from other. I simply create a new request in POSTMAN and run it, it works.","title":"Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter","body":"<p>In my side, it is because POSTMAN setting issue, but I don't know why, maybe I copy a query from other. I simply create a new request in POSTMAN and run it, it works.</p>\n"}],"owner":{"account_id":5865579,"reputation":1569,"user_id":4619671,"accept_rate":33,"display_name":"chaitanya dalvi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":167719,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":29316299,"answer_count":7,"score":30,"last_activity_date":1699010964,"creation_date":1427161976,"question_id":29223683,"body_markdown":"Error to Pass JSON data from JSP to controller in ResponseBody.\r\n\r\n    07:13:53.919 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolving exception from handler [public com.chaitanya.ajax.AjaxResponse com.chaitanya.web.controller.DepartmentController.addDepartment(com.chaitanya.ajax.AjaxResponse)]: \r\n\r\n    org.springframework.http.converter.HttpMessageNotReadableException: Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter@98d8d36c\r\n    07:13:54.106 DEBUG o.s.w.s.m.a.ResponseStatusExceptionResolver - Resolving exception from handler [public com.chaitanya.ajax.AjaxResponse com.chaitanya.web.controller.DepartmentController.addDepartment(com.chaitanya.ajax.AjaxResponse)]: org.springframework.http.converter.HttpMessageNotReadableException: Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter@98d8d36c\r\n    07:13:54.125 DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolving exception from handler [public com.chaitanya.ajax.AjaxResponse com.chaitanya.web.controller.DepartmentController.addDepartment(com.chaitanya.ajax.AjaxResponse)]: org.springframework.http.converter.HttpMessageNotReadableException: Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter@98d8d36c\r\n    07:1\r\n\r\nAjax Call:\r\n\r\n    $.ajax({ \r\n                    \t    url: &quot;/BusinessReimbursment/addDepartment&quot;, \r\n                    \t    method: &#39;POST&#39;, \r\n                    \t    dataType: &#39;json&#39;, \r\n                    \t    data: &quot;{\\&quot;message\\&quot;:\\&quot;abc\\&quot;,\\&quot;success\\&quot;:true}&quot;,\r\n                    \t    contentType: &#39;application/json&#39;,\r\n                    \t    mimeType: &#39;application/json&#39;,\r\n                    \t    success: function(data) { \r\n                    \t        alert(data.id + &quot; &quot; + data.name);\r\n                    \t        commit(true);\r\n                    \t    },\r\n                    \t    error:function(data,status,er) { \r\n                    \t        alert(&quot;error: &quot;+data+&quot; status: &quot;+status+&quot; er:&quot;+er);\r\n                    \t    }\r\n                    \t});\r\n                    \t\r\n\r\nController:\r\n\r\n    @RestController\r\n    public class DepartmentController {\r\n    \r\n    \t@Autowired \r\n    \t@Qualifier(&quot;departmentService&quot;)\r\n    \tprivate DepartmentService departmentService;\r\n    \t\r\n    \t@RequestMapping(value=&quot;/addDepartment&quot;, method={RequestMethod.POST})\r\n    \tpublic @ResponseBody AjaxResponse addDepartment(@RequestBody AjaxResponse  departmentDTO){\r\n    \t\tAjaxResponse response=new AjaxResponse();\r\n    \t\treturn response;\r\n    \t}\r\n    \t\r\nAppConfig.java\r\n\r\n@Bean\r\n\r\n    public RequestMappingHandlerAdapter  annotationMethodHandlerAdapter()\r\n    {\r\n        final RequestMappingHandlerAdapter annotationMethodHandlerAdapter = new RequestMappingHandlerAdapter();\r\n        final MappingJackson2HttpMessageConverter mappingJacksonHttpMessageConverter = new MappingJackson2HttpMessageConverter();\r\n    \r\n        List&lt;HttpMessageConverter&lt;?&gt;&gt; httpMessageConverter = new ArrayList&lt;HttpMessageConverter&lt;?&gt;&gt;();\r\n        httpMessageConverter.add(mappingJacksonHttpMessageConverter);\r\n    \r\n        String[] supportedHttpMethods = { &quot;POST&quot;, &quot;GET&quot;, &quot;HEAD&quot; };\r\n    \r\n        annotationMethodHandlerAdapter.setMessageConverters(httpMessageConverter);\r\n        annotationMethodHandlerAdapter.setSupportedMethods(supportedHttpMethods);\r\n    \r\n        return annotationMethodHandlerAdapter;\r\n    }\r\n\t\r\nplease help me to get out out of that.\r\nI m using Spring 4, jakson 2.3.0\r\n\r\nIf i try to POST request it gives:org.springframework.web.HttpRequestMethodNotSupportedException: Request method &#39;POST&#39; not supported\r\n","title":"Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter","body":"<p>Error to Pass JSON data from JSP to controller in ResponseBody.</p>\n\n<pre><code>07:13:53.919 DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolving exception from handler [public com.chaitanya.ajax.AjaxResponse com.chaitanya.web.controller.DepartmentController.addDepartment(com.chaitanya.ajax.AjaxResponse)]: \n\norg.springframework.http.converter.HttpMessageNotReadableException: Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter@98d8d36c\n07:13:54.106 DEBUG o.s.w.s.m.a.ResponseStatusExceptionResolver - Resolving exception from handler [public com.chaitanya.ajax.AjaxResponse com.chaitanya.web.controller.DepartmentController.addDepartment(com.chaitanya.ajax.AjaxResponse)]: org.springframework.http.converter.HttpMessageNotReadableException: Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter@98d8d36c\n07:13:54.125 DEBUG o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolving exception from handler [public com.chaitanya.ajax.AjaxResponse com.chaitanya.web.controller.DepartmentController.addDepartment(com.chaitanya.ajax.AjaxResponse)]: org.springframework.http.converter.HttpMessageNotReadableException: Required request body content is missing: org.springframework.web.method.HandlerMethod$HandlerMethodParameter@98d8d36c\n07:1\n</code></pre>\n\n<p>Ajax Call:</p>\n\n<pre><code>$.ajax({ \n                        url: \"/BusinessReimbursment/addDepartment\", \n                        method: 'POST', \n                        dataType: 'json', \n                        data: \"{\\\"message\\\":\\\"abc\\\",\\\"success\\\":true}\",\n                        contentType: 'application/json',\n                        mimeType: 'application/json',\n                        success: function(data) { \n                            alert(data.id + \" \" + data.name);\n                            commit(true);\n                        },\n                        error:function(data,status,er) { \n                            alert(\"error: \"+data+\" status: \"+status+\" er:\"+er);\n                        }\n                    });\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>@RestController\npublic class DepartmentController {\n\n    @Autowired \n    @Qualifier(\"departmentService\")\n    private DepartmentService departmentService;\n\n    @RequestMapping(value=\"/addDepartment\", method={RequestMethod.POST})\n    public @ResponseBody AjaxResponse addDepartment(@RequestBody AjaxResponse  departmentDTO){\n        AjaxResponse response=new AjaxResponse();\n        return response;\n    }\n</code></pre>\n\n<p>AppConfig.java</p>\n\n<p>@Bean</p>\n\n<pre><code>public RequestMappingHandlerAdapter  annotationMethodHandlerAdapter()\n{\n    final RequestMappingHandlerAdapter annotationMethodHandlerAdapter = new RequestMappingHandlerAdapter();\n    final MappingJackson2HttpMessageConverter mappingJacksonHttpMessageConverter = new MappingJackson2HttpMessageConverter();\n\n    List&lt;HttpMessageConverter&lt;?&gt;&gt; httpMessageConverter = new ArrayList&lt;HttpMessageConverter&lt;?&gt;&gt;();\n    httpMessageConverter.add(mappingJacksonHttpMessageConverter);\n\n    String[] supportedHttpMethods = { \"POST\", \"GET\", \"HEAD\" };\n\n    annotationMethodHandlerAdapter.setMessageConverters(httpMessageConverter);\n    annotationMethodHandlerAdapter.setSupportedMethods(supportedHttpMethods);\n\n    return annotationMethodHandlerAdapter;\n}\n</code></pre>\n\n<p>please help me to get out out of that.\nI m using Spring 4, jakson 2.3.0</p>\n\n<p>If i try to POST request it gives:org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported</p>\n"},{"tags":["java","maven","validation"],"answers":[{"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1699011876,"post_id":77416286,"comment_id":136480118,"body_markdown":"That wasn&#39;t the question. The question is how to *validate* that it&#39;s using the version variable.","body":"That wasn&#39;t the question. The question is how to <i>validate</i> that it&#39;s using the version variable."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1699014113,"post_id":77416286,"comment_id":136480528,"body_markdown":"If you do as I suggested, there is not need for validation because the version is drawn automtically.","body":"If you do as I suggested, there is not need for validation because the version is drawn automtically."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1699014363,"post_id":77416286,"comment_id":136480570,"body_markdown":"And if you never write any bugs, there is no need for validating/testing your code either ;-)","body":"And if you never write any bugs, there is no need for validating/testing your code either ;-)"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1699014627,"post_id":77416286,"comment_id":136480632,"body_markdown":"@Jorn What exactly do you want to validate? That the version of the dependencyManagement is not overridden in the child POM?","body":"@Jorn What exactly do you want to validate? That the version of the dependencyManagement is not overridden in the child POM?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1699014812,"post_id":77416286,"comment_id":136480660,"body_markdown":"That&#39;s a fair question, and one only the OP can answer. It might even be that the answer is &quot;Maven doesn&#39;t allow you to validate that&quot;.","body":"That&#39;s a fair question, and one only the OP can answer. It might even be that the answer is &quot;Maven doesn&#39;t allow you to validate that&quot;."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1699015380,"post_id":77416286,"comment_id":136480771,"body_markdown":"Out of the box, Maven doesn&#39;t. But you can surely write a Maven plugin that does the job.","body":"Out of the box, Maven doesn&#39;t. But you can surely write a Maven plugin that does the job."}],"tags":[],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":6,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1699010659,"creation_date":1699010659,"answer_id":77416286,"question_id":77416195,"body_markdown":"Use dependencyManagement in the parent POM instead and then leave out the version numbers in the child POMs.","title":"Validate pom.xml","body":"<p>Use dependencyManagement in the parent POM instead and then leave out the version numbers in the child POMs.</p>\n"}],"owner":{"account_id":28803772,"reputation":1,"user_id":22060089,"display_name":"bunnie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699010659,"creation_date":1699009739,"question_id":77416195,"body_markdown":"I want to validate the child pom.xml.\r\nEvery child pom.xml should have dependency version from parent pom.xml property.\r\n\r\nHow can I validate child pom.xml file?\r\n\r\n```\r\n&lt;kbd&gt;&lt;project&gt;\r\n  &lt;groupId&gt;demo&lt;/groupId&gt;\r\n  &lt;artifactId&gt;example&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;packaging&gt;pom&lt;/packaging&gt;\r\n \r\n  &lt;name&gt;Parent&lt;/name&gt;\r\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n \r\n  &lt;properties&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;junit.version&gt;3.8.1&lt;/junit.version&gt;\r\n  &lt;/properties&gt;\r\n&lt;/project&gt;&lt;/kbd&gt;\r\n```\r\n\r\nchild pom.xml :\r\n\r\n```\r\n&lt;project&gt;\r\n &lt;parent&gt;\r\n    &lt;groupId&gt;demo&lt;/groupId&gt;\r\n    &lt;artifactId&gt;example&lt;artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;/parent&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;artifactId&gt;example&lt;/artifactId&gt;\r\n  &lt;name&gt;Child POM&lt;/name&gt;\r\n  &lt;packaging&gt;jar&lt;/packaging&gt;\r\n \r\n  &lt;dependencies&gt;    \r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;version&gt;${junit.version}&lt;/version&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nIn child pom.xml , dependency version  should not contain 3.8.1 but it should have property mentioned in parent pom.xml like ${junit.version}.\r\nHow to validate the child pom?\r\n","title":"Validate pom.xml","body":"<p>I want to validate the child pom.xml.\nEvery child pom.xml should have dependency version from parent pom.xml property.</p>\n<p>How can I validate child pom.xml file?</p>\n<pre><code>&lt;kbd&gt;&lt;project&gt;\n  &lt;groupId&gt;demo&lt;/groupId&gt;\n  &lt;artifactId&gt;example&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n \n  &lt;name&gt;Parent&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n \n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;junit.version&gt;3.8.1&lt;/junit.version&gt;\n  &lt;/properties&gt;\n&lt;/project&gt;&lt;/kbd&gt;\n</code></pre>\n<p>child pom.xml :</p>\n<pre><code>&lt;project&gt;\n &lt;parent&gt;\n    &lt;groupId&gt;demo&lt;/groupId&gt;\n    &lt;artifactId&gt;example&lt;artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;/parent&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;artifactId&gt;example&lt;/artifactId&gt;\n  &lt;name&gt;Child POM&lt;/name&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n \n  &lt;dependencies&gt;    \n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;${junit.version}&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>In child pom.xml , dependency version  should not contain 3.8.1 but it should have property mentioned in parent pom.xml like ${junit.version}.\nHow to validate the child pom?</p>\n"},{"tags":["java","maven","build"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1500891622,"post_id":45276031,"comment_id":77518274,"body_markdown":"Why would you like to skip the installation of a module?","body":"Why would you like to skip the installation of a module?"}],"answers":[{"comments":[{"owner":{"account_id":9473489,"reputation":323,"user_id":7043615,"display_name":"HalfLegend"},"score":0,"creation_date":1500886604,"post_id":45276112,"comment_id":77514739,"body_markdown":"Sorry, what I mean is a sub module not a sub folder. I want to exclude all the files in the sub project, and don&#39;t want to generate the jar file at all.","body":"Sorry, what I mean is a sub module not a sub folder. I want to exclude all the files in the sub project, and don&#39;t want to generate the jar file at all."}],"tags":[],"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1500891859,"creation_date":1500886257,"answer_id":45276112,"question_id":45276031,"body_markdown":"If your subModule is under different directory as subdirName,\r\n\r\nAdd exclude of &#39;subdirName&#39; to maven-jar-plugin in your pom.xml:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.1&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;default-jar&lt;/id&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;jar&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;excludes&gt;\r\n                &lt;exclude&gt;**/subdirName/*&lt;/exclude&gt;\r\n              &lt;/excludes&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;","title":"How to skip the install of one submodule in Maven?","body":"<p>If your subModule is under different directory as subdirName,</p>\n\n<p>Add exclude of 'subdirName' to maven-jar-plugin in your pom.xml:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1&lt;/version&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;default-jar&lt;/id&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;jar&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;excludes&gt;\n            &lt;exclude&gt;**/subdirName/*&lt;/exclude&gt;\n          &lt;/excludes&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9473489,"reputation":323,"user_id":7043615,"display_name":"HalfLegend"},"score":0,"creation_date":1500886733,"post_id":45276146,"comment_id":77514822,"body_markdown":"Thank you very much, I will try","body":"Thank you very much, I will try"},{"owner":{"account_id":3502208,"reputation":1768,"user_id":2928710,"accept_rate":100,"display_name":"Yuri"},"score":0,"creation_date":1500886797,"post_id":45276146,"comment_id":77514877,"body_markdown":"This is the most suitable solution when you need only several modules. Profiles are designed for such type of tasks too. Happy coding ;)","body":"This is the most suitable solution when you need only several modules. Profiles are designed for such type of tasks too. Happy coding ;)"},{"owner":{"account_id":9473489,"reputation":323,"user_id":7043615,"display_name":"HalfLegend"},"score":2,"creation_date":1501559451,"post_id":45276146,"comment_id":77818285,"body_markdown":"This one partly solved my problem. I want to package them all, while install only those I needed. This solution will not only affect install but packaging as well.","body":"This one partly solved my problem. I want to package them all, while install only those I needed. This solution will not only affect install but packaging as well."}],"tags":[],"owner":{"account_id":3502208,"reputation":1768,"user_id":2928710,"accept_rate":100,"display_name":"Yuri"},"comment_count":3,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1500886339,"creation_date":1500886339,"answer_id":45276146,"question_id":45276031,"body_markdown":"You could create a separate `profile` to build only particular modules. Others will be excluded. Please, see the example below:\r\n\r\n\r\n        &lt;modules&gt;\r\n            &lt;module&gt;module-1&lt;/module&gt;\r\n            &lt;module&gt;module-2&lt;/module&gt;  \r\n        ...\r\n        &lt;/modules&gt;\r\n\r\n\r\n    &lt;profiles&gt;\r\n         &lt;profile&gt;\r\n             &lt;id&gt;specific-build-name&lt;/id&gt;\r\n             &lt;modules&gt;\r\n                 &lt;module&gt;module-1&lt;/module&gt;\r\n                 &lt;module&gt;module-2&lt;/module&gt;\r\n                 ...\r\n                 &lt;module&gt;module-with-tests&lt;/module&gt;\r\n             &lt;/modules&gt; \r\n         &lt;/profile&gt;\r\n    &lt;/profiles&gt;\r\n    \r\n    ...","title":"How to skip the install of one submodule in Maven?","body":"<p>You could create a separate <code>profile</code> to build only particular modules. Others will be excluded. Please, see the example below:</p>\n\n<pre><code>    &lt;modules&gt;\n        &lt;module&gt;module-1&lt;/module&gt;\n        &lt;module&gt;module-2&lt;/module&gt;  \n    ...\n    &lt;/modules&gt;\n\n\n&lt;profiles&gt;\n     &lt;profile&gt;\n         &lt;id&gt;specific-build-name&lt;/id&gt;\n         &lt;modules&gt;\n             &lt;module&gt;module-1&lt;/module&gt;\n             &lt;module&gt;module-2&lt;/module&gt;\n             ...\n             &lt;module&gt;module-with-tests&lt;/module&gt;\n         &lt;/modules&gt; \n     &lt;/profile&gt;\n&lt;/profiles&gt;\n\n...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5100302,"reputation":1750,"user_id":4090111,"accept_rate":80,"display_name":"Ulrich Schuster"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699009375,"creation_date":1699009375,"answer_id":77416155,"question_id":45276031,"body_markdown":"Starting with Maven 2.4, you can add the following plugin configuration to the submodule whose installation you want to skip:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\r\n    &lt;configuration&gt;\r\n        &lt;skip&gt;true&lt;/skip&gt;\r\n    &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```","title":"How to skip the install of one submodule in Maven?","body":"<p>Starting with Maven 2.4, you can add the following plugin configuration to the submodule whose installation you want to skip:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;skip&gt;true&lt;/skip&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":9473489,"reputation":323,"user_id":7043615,"display_name":"HalfLegend"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1463,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1699009375,"creation_date":1500886035,"question_id":45276031,"body_markdown":"I have a maven project in which there are many sub modules.\r\nI need to use &quot;mvn clean install&quot; to install it to my local repository, but some of the sub modules I don&#39;t want to install them at all. If I run &quot;mvn clean install&quot; on the parent project, all the submodules will be installed as well.\r\n\r\nHow to skip the install of one sub module？","title":"How to skip the install of one submodule in Maven?","body":"<p>I have a maven project in which there are many sub modules.\nI need to use \"mvn clean install\" to install it to my local repository, but some of the sub modules I don't want to install them at all. If I run \"mvn clean install\" on the parent project, all the submodules will be installed as well.</p>\n\n<p>How to skip the install of one sub module？</p>\n"},{"tags":["java","selenium-webdriver","firefox","geckodriver"],"comments":[{"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1699009783,"post_id":77416076,"comment_id":136479768,"body_markdown":"Check this question/answers if it helps - https://stackoverflow.com/questions/49734915/failed-to-decode-response-from-marionette-message-in-python-firefox-headless-s","body":"Check this question/answers if it helps - <a href=\"https://stackoverflow.com/questions/49734915/failed-to-decode-response-from-marionette-message-in-python-firefox-headless-s\" title=\"failed to decode response from marionette message in python firefox headless s\">stackoverflow.com/questions/49734915/&hellip;</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1699038540,"post_id":77416076,"comment_id":136485691,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29818033,"reputation":1,"user_id":22851929,"display_name":"Akash Chaturvedi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699009212,"creation_date":1699008684,"question_id":77416076,"body_markdown":"I am executing my test cases in selenium (3.141.59) in Intellj with Firefox 119 and geckodriver-v0.33.0-win64. Test cases keep failing. Firefox browser just starts and terminates with doing anything with below error. Can anyone suggest any solution?\r\n````\r\norg.openqa.selenium.WebDriverException: Failed to decode response from marionette\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n````\r\nTried with changing multiple combination of selenium versions and Firefox with gecko driver.","title":"org.openqa.selenium.WebDriverException: Failed to decode response from marionette","body":"<p>I am executing my test cases in selenium (3.141.59) in Intellj with Firefox 119 and geckodriver-v0.33.0-win64. Test cases keep failing. Firefox browser just starts and terminates with doing anything with below error. Can anyone suggest any solution?</p>\n<pre><code>org.openqa.selenium.WebDriverException: Failed to decode response from marionette\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\n</code></pre>\n<p>Tried with changing multiple combination of selenium versions and Firefox with gecko driver.</p>\n"},{"tags":["java","libgdx","box2d","kinematics"],"answers":[{"comments":[{"owner":{"account_id":4629418,"reputation":113,"user_id":3752349,"accept_rate":75,"display_name":"RooneyMUFC"},"score":1,"creation_date":1403781570,"post_id":24419505,"comment_id":37795962,"body_markdown":"thanks @cavpollo, that worked, how do i get the kinematic body to move from point x to y?        &quot;kinematicBody.setLinearVelocity(-200.0f, 200.0f);&quot; still doesnt work i still get the error saying &quot;The method setLinearVelocity(float, float) is undefined for the type BodyDef&quot;","body":"thanks @cavpollo, that worked, how do i get the kinematic body to move from point x to y?        &quot;kinematicBody.setLinearVelocity(-200.0f, 200.0f);&quot; still doesnt work i still get the error saying &quot;The method setLinearVelocity(float, float) is undefined for the type BodyDef&quot;"},{"owner":{"account_id":264338,"reputation":5174,"user_id":550548,"accept_rate":95,"display_name":"Will Kru"},"score":1,"creation_date":1403792203,"post_id":24419505,"comment_id":37803257,"body_markdown":"@RooneyMUFC, the setLinearVelocity method should be called on the Body (which is the testBody variable in the above example), not on the BodyDef, which is just a temporary convenience class to describe the body properties.","body":"@RooneyMUFC, the setLinearVelocity method should be called on the Body (which is the testBody variable in the above example), not on the BodyDef, which is just a temporary convenience class to describe the body properties."},{"owner":{"account_id":4629418,"reputation":113,"user_id":3752349,"accept_rate":75,"display_name":"RooneyMUFC"},"score":0,"creation_date":1403792508,"post_id":24419505,"comment_id":37803479,"body_markdown":"@WillKru i tried doing Body testBody = world.createBody(tempBodyDef);\ntestBody.createFixture(tempFD); but that doesnt seem to work for my program so i modified it to world.createBody(testBody).createFixture(tempshape, 50.0f); which compiled","body":"@WillKru i tried doing Body testBody = world.createBody(tempBodyDef); testBody.createFixture(tempFD); but that doesnt seem to work for my program so i modified it to world.createBody(testBody).createFixture(tempshape, 50.0f); which compiled"},{"owner":{"account_id":4629418,"reputation":113,"user_id":3752349,"accept_rate":75,"display_name":"RooneyMUFC"},"score":0,"creation_date":1403792717,"post_id":24419505,"comment_id":37803623,"body_markdown":"when i try &quot;Body testBody = world.createBody(kinematicBody);&quot; i get this error &quot;Type mismatch: cannot convert from com.badlogic.gdx.physics.box2d.Body to com.sun.xml.internal.ws.wsdl.writer.document.soap.Body&quot;","body":"when i try &quot;Body testBody = world.createBody(kinematicBody);&quot; i get this error &quot;Type mismatch: cannot convert from com.badlogic.gdx.physics.box2d.Body to com.sun.xml.internal.ws.wsdl.writer.document.soap.Body&quot;"},{"owner":{"account_id":264338,"reputation":5174,"user_id":550548,"accept_rate":95,"display_name":"Will Kru"},"score":0,"creation_date":1403793212,"post_id":24419505,"comment_id":37803948,"body_markdown":"Make sure your imports are right. At the top of your document replace com.sun.xml.internal.ws.wsdl.writer.document.soap.Body with com.badlogic.gdx.physics.box2d.Body. LibGDX does support the createFixture(FixtureDef) method, so probably there&#39;s something wrong at your end. I would recommend visiting the libGDX IRC channel if you are in need of immediate assistance, the folks there are really helpful.","body":"Make sure your imports are right. At the top of your document replace com.sun.xml.internal.ws.wsdl.writer.document.soap.Body with com.badlogic.gdx.physics.box2d.Body. LibGDX does support the createFixture(FixtureDef) method, so probably there&#39;s something wrong at your end. I would recommend visiting the libGDX IRC channel if you are in need of immediate assistance, the folks there are really helpful."}],"tags":[],"owner":{"account_id":1370361,"reputation":4141,"user_id":1305745,"accept_rate":89,"display_name":"cavpollo"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1410766934,"creation_date":1403734534,"answer_id":24419505,"question_id":24417977,"body_markdown":"It appears as if you aren&#39;t using the fixtureDef object anywhere. You are supposed to set it to the body once it is created.\r\n\r\nThe way you create a Kinematic Body isn&#39;t much different from a Static Body. The only difference would be how you define the type of the BodyDef.\r\n\r\n---\r\n\r\nCreate a Kinematic Body\r\nIt could be a StaticBody or DynamicBody too. Depends on what you want to accomplish.\r\n\r\n    BodyDef tempBodyDef = new BodyDef();\r\n    tempBodyDef.type = BodyType.KinematicBody;\r\n\r\nCreate the FixtureDefinition (The one that describes the properties of the fixture)\r\nAlso create a shape and assign it to the fixture.\r\nYou can modify the firction, isSensor, etc, properties of the tempFD to get the results you want.\r\n\r\n    FixtureDef tempFD = new FixtureDef();\r\n    PolygonShape tempShape = new PolygonShape();\r\n    tempFD.shape = tempShape;\r\n\r\nThe center of the shape for the body will be at 0,0\t\r\n\t\t\r\n    Vector2 tempVector = new Vector2();\r\n    tempVector.x = 0;\r\n    tempVector.y = 0;\r\n\r\nSetting the size and position of the body&#39;s shape.\r\nNotice I&#39;m using half the width and height, as that is what the setAsBox function requires.\r\n\r\n    tempShape.setAsBox(myWidth/2f, myHeight/2f, tempVector, myAngle);\r\n    tempBodyDef.position.set(myXPosition, myYPosition);\r\n\r\nCreate the body and assign the fixture to it\r\n\r\n    Body testBody = world.createBody(tempBodyDef);\r\n    testBody.createFixture(tempFD);\r\n\r\nDon&#39;t forget to dispose of the Shape once you are done with it.\r\n\r\n    tempShape.dispose();\r\n\r\nAnd you are done.","title":"Implementing moving Kinematic body","body":"<p>It appears as if you aren't using the fixtureDef object anywhere. You are supposed to set it to the body once it is created.</p>\n\n<p>The way you create a Kinematic Body isn't much different from a Static Body. The only difference would be how you define the type of the BodyDef.</p>\n\n<hr>\n\n<p>Create a Kinematic Body\nIt could be a StaticBody or DynamicBody too. Depends on what you want to accomplish.</p>\n\n<pre><code>BodyDef tempBodyDef = new BodyDef();\ntempBodyDef.type = BodyType.KinematicBody;\n</code></pre>\n\n<p>Create the FixtureDefinition (The one that describes the properties of the fixture)\nAlso create a shape and assign it to the fixture.\nYou can modify the firction, isSensor, etc, properties of the tempFD to get the results you want.</p>\n\n<pre><code>FixtureDef tempFD = new FixtureDef();\nPolygonShape tempShape = new PolygonShape();\ntempFD.shape = tempShape;\n</code></pre>\n\n<p>The center of the shape for the body will be at 0,0 </p>\n\n<pre><code>Vector2 tempVector = new Vector2();\ntempVector.x = 0;\ntempVector.y = 0;\n</code></pre>\n\n<p>Setting the size and position of the body's shape.\nNotice I'm using half the width and height, as that is what the setAsBox function requires.</p>\n\n<pre><code>tempShape.setAsBox(myWidth/2f, myHeight/2f, tempVector, myAngle);\ntempBodyDef.position.set(myXPosition, myYPosition);\n</code></pre>\n\n<p>Create the body and assign the fixture to it</p>\n\n<pre><code>Body testBody = world.createBody(tempBodyDef);\ntestBody.createFixture(tempFD);\n</code></pre>\n\n<p>Don't forget to dispose of the Shape once you are done with it.</p>\n\n<pre><code>tempShape.dispose();\n</code></pre>\n\n<p>And you are done.</p>\n"}],"owner":{"account_id":4629418,"reputation":113,"user_id":3752349,"accept_rate":75,"display_name":"RooneyMUFC"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4108,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1699009113,"creation_date":1403728185,"question_id":24417977,"body_markdown":"\r\n**Project:** I am making a simple project in which I want to be able to make a kinematic body and move it from point x to y. There doesn&#39;t seem to be much directly on &quot;Creating kinematic bodies&quot;. I&#39;ve been following a few different tutorials on implementing kinematic bodies because I couldn&#39;t find one that specified how to do it correctly.\r\n\r\n\r\n**Problem:** It seems to be a simple fix but I just can&#39;t figure out what the problem is because I don&#39;t fully understand how to implement a kinematic body. I believe the problem lies in this code `kinematicBody.setLinearVelocity(0.0f, 1.0f);` because I get an error in `&quot;setLinearVelocity&quot;` stating *&quot;The method setLinearVelocity(float, float) is undefined for the type BodyDef&quot;*. I feel that I am doing something wrong here.\r\n\r\n**Outcome I want:** I want to be able to create a kinematic body that moves from point x to point y.\r\n\r\n**Here is my relevant code:**\r\n\r\n        package com.mohamed.JungleFighter;\r\n    \r\n    import com.badlogic.gdx.ApplicationAdapter;\r\n    import com.badlogic.gdx.Game;\r\n    import com.badlogic.gdx.Gdx;\r\n    import com.badlogic.gdx.graphics.GL20;\r\n    import com.badlogic.gdx.graphics.OrthographicCamera;\r\n    import com.badlogic.gdx.graphics.Texture;\r\n    import com.badlogic.gdx.graphics.g2d.SpriteBatch;\r\n    import com.badlogic.gdx.math.Vector2;\r\n    import com.badlogic.gdx.physics.box2d.BodyDef;\r\n    import com.badlogic.gdx.physics.box2d.BodyDef.BodyType;\r\n    import com.badlogic.gdx.physics.box2d.Box2DDebugRenderer;\r\n    import com.badlogic.gdx.physics.box2d.CircleShape;\r\n    import com.badlogic.gdx.physics.box2d.FixtureDef;\r\n    import com.badlogic.gdx.physics.box2d.PolygonShape;\r\n    import com.badlogic.gdx.physics.box2d.World;\r\n    import com.sun.xml.internal.ws.wsdl.writer.document.soap.Body;\r\n\r\n    public class JungleFighter extends Game {\r\n\r\n\t\r\n\t  World world = new World(new Vector2(0, -100), true);  \r\n      Box2DDebugRenderer debugRenderer;  \r\n      OrthographicCamera camera;  \r\n      static final float STEP=1/60f;  \r\n      static final int VELOCITYITERATIONS=6;  \r\n      static final int POSITIONITERATIONS=2;  \r\n      static final float WORLD_TO_BOX=0.01f;  \r\n      static final float BOX_WORLD_TO=100f;  \r\n      @Override  \r\n      public void create() {            \r\n           camera = new OrthographicCamera();  \r\n           camera.viewportHeight = 320;  \r\n           camera.viewportWidth = 480;  \r\n           camera.position.set(camera.viewportWidth * .5f, camera.viewportHeight * .5f, 0f);  \r\n           camera.update(); \r\n\r\n     //test platform 3\r\n               BodyDef kinematicBody =new BodyDef();  \r\n\r\n           kinematicBody.type = BodyType.KinematicBody;\r\n           kinematicBody.position.set(100, 250);\r\n\r\n           PolygonShape shape = new PolygonShape();\r\n           shape.setAsBox(50f, 25f);\r\n\r\n           fixtureDef.shape = shape;\r\n           fixtureDef.density = 0;\r\n           fixtureDef.friction = 0;\r\n           fixtureDef.restitution = 0;\r\n\r\n           kinematicBody.setLinearVelocity(0.0f, 1.0f);\r\n\r\n\r\n           // Create our body in the world using our body definition\r\n           world.createBody(kinematicBody).createFixture(shape, 50.0f);\r\n           shape.dispose();\r\n           \r\n\r\n           debugRenderer = new Box2DDebugRenderer();  \r\n      }  \r\n      @Override  \r\n      public void dispose() {  \r\n      }  \r\n      @Override  \r\n      public void render() {            \r\n           Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);  \r\n           debugRenderer.render(world, camera.combined);  \r\n           world.step(STEP, VELOCITYITERATIONS, POSITIONITERATIONS);  \r\n      }  \r\n      @Override  \r\n      public void resize(int width, int height) {  \r\n      }  \r\n      @Override  \r\n      public void pause() {  \r\n      }  \r\n      @Override  \r\n      public void resume() {  \r\n  \r\n\r\n        }  \r\n     }  \r\n","title":"Implementing moving Kinematic body","body":"<p><strong>Project:</strong> I am making a simple project in which I want to be able to make a kinematic body and move it from point x to y. There doesn't seem to be much directly on &quot;Creating kinematic bodies&quot;. I've been following a few different tutorials on implementing kinematic bodies because I couldn't find one that specified how to do it correctly.</p>\n<p><strong>Problem:</strong> It seems to be a simple fix but I just can't figure out what the problem is because I don't fully understand how to implement a kinematic body. I believe the problem lies in this code <code>kinematicBody.setLinearVelocity(0.0f, 1.0f);</code> because I get an error in <code>&quot;setLinearVelocity&quot;</code> stating <em>&quot;The method setLinearVelocity(float, float) is undefined for the type BodyDef&quot;</em>. I feel that I am doing something wrong here.</p>\n<p><strong>Outcome I want:</strong> I want to be able to create a kinematic body that moves from point x to point y.</p>\n<p><strong>Here is my relevant code:</strong></p>\n<pre><code>    package com.mohamed.JungleFighter;\n\nimport com.badlogic.gdx.ApplicationAdapter;\nimport com.badlogic.gdx.Game;\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.graphics.GL20;\nimport com.badlogic.gdx.graphics.OrthographicCamera;\nimport com.badlogic.gdx.graphics.Texture;\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\nimport com.badlogic.gdx.math.Vector2;\nimport com.badlogic.gdx.physics.box2d.BodyDef;\nimport com.badlogic.gdx.physics.box2d.BodyDef.BodyType;\nimport com.badlogic.gdx.physics.box2d.Box2DDebugRenderer;\nimport com.badlogic.gdx.physics.box2d.CircleShape;\nimport com.badlogic.gdx.physics.box2d.FixtureDef;\nimport com.badlogic.gdx.physics.box2d.PolygonShape;\nimport com.badlogic.gdx.physics.box2d.World;\nimport com.sun.xml.internal.ws.wsdl.writer.document.soap.Body;\n\npublic class JungleFighter extends Game {\n\n\n  World world = new World(new Vector2(0, -100), true);  \n  Box2DDebugRenderer debugRenderer;  \n  OrthographicCamera camera;  \n  static final float STEP=1/60f;  \n  static final int VELOCITYITERATIONS=6;  \n  static final int POSITIONITERATIONS=2;  \n  static final float WORLD_TO_BOX=0.01f;  \n  static final float BOX_WORLD_TO=100f;  \n  @Override  \n  public void create() {            \n       camera = new OrthographicCamera();  \n       camera.viewportHeight = 320;  \n       camera.viewportWidth = 480;  \n       camera.position.set(camera.viewportWidth * .5f, camera.viewportHeight * .5f, 0f);  \n       camera.update(); \n\n //test platform 3\n           BodyDef kinematicBody =new BodyDef();  \n\n       kinematicBody.type = BodyType.KinematicBody;\n       kinematicBody.position.set(100, 250);\n\n       PolygonShape shape = new PolygonShape();\n       shape.setAsBox(50f, 25f);\n\n       fixtureDef.shape = shape;\n       fixtureDef.density = 0;\n       fixtureDef.friction = 0;\n       fixtureDef.restitution = 0;\n\n       kinematicBody.setLinearVelocity(0.0f, 1.0f);\n\n\n       // Create our body in the world using our body definition\n       world.createBody(kinematicBody).createFixture(shape, 50.0f);\n       shape.dispose();\n       \n\n       debugRenderer = new Box2DDebugRenderer();  \n  }  \n  @Override  \n  public void dispose() {  \n  }  \n  @Override  \n  public void render() {            \n       Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);  \n       debugRenderer.render(world, camera.combined);  \n       world.step(STEP, VELOCITYITERATIONS, POSITIONITERATIONS);  \n  }  \n  @Override  \n  public void resize(int width, int height) {  \n  }  \n  @Override  \n  public void pause() {  \n  }  \n  @Override  \n  public void resume() {  \n\n\n    }  \n }  \n</code></pre>\n"},{"tags":["java","spring-boot","spring-jdbc","java-21"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1698745897,"post_id":77394790,"comment_id":136441348,"body_markdown":"Such tricks which try to modify Java classes like `java.lang.reflect.Field` directly using reflection are no longer allowed since Java 9.","body":"Such tricks which try to modify Java classes like <code>java.lang.reflect.Field</code> directly using reflection are no longer allowed since Java 9."},{"owner":{"account_id":29536098,"reputation":13,"user_id":22635680,"display_name":"Sreejesh"},"score":0,"creation_date":1698746128,"post_id":77394790,"comment_id":136441409,"body_markdown":"This is am existing code written back in 2017. My task is to migrate this old jdk 8 code to latest jdk21. Is there any work around ?","body":"This is am existing code written back in 2017. My task is to migrate this old jdk 8 code to latest jdk21. Is there any work around ?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":3,"creation_date":1698746359,"post_id":77394790,"comment_id":136441450,"body_markdown":"Probably not. You&#39;ll probably need to rewrite this to use normal inheritance.","body":"Probably not. You&#39;ll probably need to rewrite this to use normal inheritance."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":6,"creation_date":1698746361,"post_id":77394790,"comment_id":136441453,"body_markdown":"that is the risk of using reflection instead of the public API - internals can and will be changed","body":"that is the risk of using reflection instead of the public API - internals can and will be changed"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1698747085,"post_id":77394790,"comment_id":136441599,"body_markdown":"The question is what is `CustomCallMetaDataContext` used for? Just to make the implementation of `public List&lt;SqlParameter&gt; getParamerters()` possible?","body":"The question is what is <code>CustomCallMetaDataContext</code> used for? Just to make the implementation of <code>public List&lt;SqlParameter&gt; getParamerters()</code> possible?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1698747209,"post_id":77394790,"comment_id":136441616,"body_markdown":"This hack is not even necessary. Since the field is not `static`, it is already accessible after your `callMetaDataContextField.setAccessible(true);`. In other words, just `Field callMetaDataContextField = AbstractJdbcCall.class.getDeclaredField(CALL_META_DATA_CONTEXT); callMetaDataContextField.setAccessible(true); callMetaDataContextField.set(this, this.callMetaDataContext);` would do though I agree with the others saying that you should rethink this approach.","body":"This hack is not even necessary. Since the field is not <code>static</code>, it is already accessible after your <code>callMetaDataContextField.setAccessible(true);</code>. In other words, just <code>Field callMetaDataContextField = AbstractJdbcCall.class.getDeclaredField(CALL_META_DATA_CONTE&zwnj;&#8203;XT); callMetaDataContextField.setAccessible(true); callMetaDataContextField.set(this, this.callMetaDataContext);</code> would do though I agree with the others saying that you should rethink this approach."},{"owner":{"account_id":29536098,"reputation":13,"user_id":22635680,"display_name":"Sreejesh"},"score":0,"creation_date":1698747441,"post_id":77394790,"comment_id":136441662,"body_markdown":"first it is accessing private field and then making in non final","body":"first it is accessing private field and then making in non final"},{"owner":{"account_id":29536098,"reputation":13,"user_id":22635680,"display_name":"Sreejesh"},"score":0,"creation_date":1698747605,"post_id":77394790,"comment_id":136441709,"body_markdown":"Holger, let me use your logic and run my spring-boot and test. thanks","body":"Holger, let me use your logic and run my spring-boot and test. thanks"},{"owner":{"account_id":29536098,"reputation":13,"user_id":22635680,"display_name":"Sreejesh"},"score":0,"creation_date":1698747927,"post_id":77394790,"comment_id":136441763,"body_markdown":"now I am getting a strange exception. The code was working without any issues in jdk8..     org.springframework.dao.DataAccessResourceFailureException: Error retrieving database meta-data; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: Cannot create PoolableConnectionFactory","body":"now I am getting a strange exception. The code was working without any issues in jdk8..     org.springframework.dao.DataAccessResourceFailureException: Error retrieving database meta-data; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Could not get Connection for extracting meta-data; nested exception is org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection; nested exception is java.sql.SQLException: Cannot create PoolableConnectionFactory"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1698749736,"post_id":77394790,"comment_id":136442118,"body_markdown":"`setAccessible(true)` serves both, ignoring `private` modifier, as well as `final` modifiers for non-static fields. Your follow-up error is an entirely different problem. Maybe your `CustomCallMetaDataContext` is incompatible to the way the framework works (now), in general.","body":"<code>setAccessible(true)</code> serves both, ignoring <code>private</code> modifier, as well as <code>final</code> modifiers for non-static fields. Your follow-up error is an entirely different problem. Maybe your <code>CustomCallMetaDataContext</code> is incompatible to the way the framework works (now), in general."},{"owner":{"account_id":29536098,"reputation":13,"user_id":22635680,"display_name":"Sreejesh"},"score":0,"creation_date":1698752152,"post_id":77394790,"comment_id":136442513,"body_markdown":"To make it non final this code is required, Field modifiersField = Field.class.getDeclaredField(MODIFIERS);\n            modifiersField.setAccessible(true);\n            modifiersField.setInt(callMetaDataContextField, callMetaDataContextField.getModifiers() &amp; ~Modifier.FINAL);","body":"To make it non final this code is required, Field modifiersField = Field.class.getDeclaredField(MODIFIERS);             modifiersField.setAccessible(true);             modifiersField.setInt(callMetaDataContextField, callMetaDataContextField.getModifiers() &amp; ~Modifier.FINAL);"}],"answers":[{"tags":[],"owner":{"account_id":29536098,"reputation":13,"user_id":22635680,"display_name":"Sreejesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699008835,"creation_date":1699005905,"answer_id":77415767,"question_id":77394790,"body_markdown":"Added spring class AbstractJdbcCall.java in the project folder with exact package name.\r\nThen added the below method to return the callMetaDataContext\r\n\r\n    public CallMetaDataContext getCallMetaDataContext() {\r\n\t    return this.callMetaDataContext;\r\n    }\r\n\r\nNow CustomJDBCCall look like this\r\n\r\n    \r\n\r\n     \r\n\r\n     public class CustomJDBCCall extends SimpleJdbcCall {\r\n    \t\t\r\n     public CustomJDBCCall(JdbcTemplate jdbcTemplate) throws Exception \r\n      {\r\n    \t  super(jdbcTemplate);  \r\n       \r\n      }\r\n\r\n      public List&lt;SqlParameter&gt; getParamerters() throws Exception {\r\n        return this.getCallMetaDataContext().getCallParameters();\r\n      }\r\n     }\r\n\r\n\r\nThis solved my issue\r\n\r\n","title":"Caused by: java.lang.NoSuchFieldException: modifiers","body":"<p>Added spring class AbstractJdbcCall.java in the project folder with exact package name.\nThen added the below method to return the callMetaDataContext</p>\n<pre><code>public CallMetaDataContext getCallMetaDataContext() {\n    return this.callMetaDataContext;\n}\n</code></pre>\n<p>Now CustomJDBCCall look like this</p>\n<pre><code> public class CustomJDBCCall extends SimpleJdbcCall {\n        \n public CustomJDBCCall(JdbcTemplate jdbcTemplate) throws Exception \n  {\n      super(jdbcTemplate);  \n   \n  }\n\n  public List&lt;SqlParameter&gt; getParamerters() throws Exception {\n    return this.getCallMetaDataContext().getCallParameters();\n  }\n }\n</code></pre>\n<p>This solved my issue</p>\n"}],"owner":{"account_id":29536098,"reputation":13,"user_id":22635680,"display_name":"Sreejesh"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":277,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77415767,"answer_count":1,"score":-1,"last_activity_date":1699008835,"creation_date":1698745330,"question_id":77394790,"body_markdown":"I am working on an existing old spring-boot code while migrating/upgrading to spring-boot 2.7.16 and jdk version upgraded from 8 to 21 I am getting this error\r\n\r\n    import java.lang.reflect.Field;\r\n    import java.lang.reflect.Modifier;\r\n    import java.util.List;\r\n    import org.apache.log4j.Logger;\r\n    import org.springframework.jdbc.core.JdbcTemplate;\r\n    import org.springframework.jdbc.core.SqlParameter;\r\n    import org.springframework.jdbc.core.simple.AbstractJdbcCall;\r\n    import org.springframework.jdbc.core.simple.SimpleJdbcCall;\r\n    public class CustomJDBCCall extends SimpleJdbcCall {\r\n\tprivate final CustomCallMetaDataContext callMetaDataContext;\r\n\tprivate static final String CALL_META_DATA_CONTEXT = &quot;callMetaDataContext&quot;;\r\n\tprivate static final String MODIFIERS = &quot;modifiers&quot;;\r\n\tprivate static final Logger LOGGER =Logger.getLogger(CustomJDBCCall.class);\r\n\t\r\n    public CustomJDBCCall(JdbcTemplate jdbcTemplate) throws Exception {\r\n    \tsuper(jdbcTemplate);\r\n        try {\r\n        \tcallMetaDataContext = new CustomCallMetaDataContext();\r\n        \t\r\n            // Access private field\r\n            Field callMetaDataContextField = \r\n            AbstractJdbcCall.class.getDeclaredField(CALL_META_DATA_CONTEXT);\r\n            callMetaDataContextField.setAccessible(true);\r\n\r\n       \r\n            Field modifiersField = Field.class.getDeclaredField(MODIFIERS);\r\n            modifiersField.setAccessible(true);\r\n            modifiersField.setInt(callMetaDataContextField, \r\n         callMetaDataContextField.getModifiers() &amp; ~Modifier.FINAL);\r\n\r\n   \r\n            callMetaDataContextField.set(this, this.callMetaDataContext);\r\n          } catch (NoSuchFieldException | IllegalAccessException ex) {\r\n        \tLOGGER.error(&quot;Error while using custom JDBC&quot;, ex);\r\n            throw new RuntimeException(&quot;Exception thrown overriding \r\n         AbstractJdbcCall.callMetaDataContext field&quot;, ex);\r\n         } catch (Exception ex) {\r\n        \tLOGGER.error(&quot;Error while using custom JDBC&quot;, ex);\r\n        \tthrow ex;\r\n\t\t }\r\n       }\r\n\r\n        public List&lt;SqlParameter&gt; getParamerters() throws Exception {\r\n        return this.callMetaDataContext.getCallParameters();\r\n        }\r\n     }\r\n\r\n\r\nIn this code the exception is thrown in the line \r\n\r\n     Field modifiersField = Field.class.getDeclaredField(MODIFIERS);\r\n\r\nCaused by: java.lang.NoSuchFieldException: modifiers\r\n        at java.base/java.lang.Class.getDeclaredField(Class.java:2782)\r\n\r\nBefore it was working fine in jdk 8.\r\nThis is existing code not written by me and I think here accessing the private final field and setting the value. Am I correct ? \r\nI think in the Jdk version 12 and above modifying the final and private variable is not possible or disabled is there any work around ?\r\n\r\n\r\n\r\n\r\n","title":"Caused by: java.lang.NoSuchFieldException: modifiers","body":"<p>I am working on an existing old spring-boot code while migrating/upgrading to spring-boot 2.7.16 and jdk version upgraded from 8 to 21 I am getting this error</p>\n<pre><code>import java.lang.reflect.Field;\nimport java.lang.reflect.Modifier;\nimport java.util.List;\nimport org.apache.log4j.Logger;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.core.SqlParameter;\nimport org.springframework.jdbc.core.simple.AbstractJdbcCall;\nimport org.springframework.jdbc.core.simple.SimpleJdbcCall;\npublic class CustomJDBCCall extends SimpleJdbcCall {\nprivate final CustomCallMetaDataContext callMetaDataContext;\nprivate static final String CALL_META_DATA_CONTEXT = &quot;callMetaDataContext&quot;;\nprivate static final String MODIFIERS = &quot;modifiers&quot;;\nprivate static final Logger LOGGER =Logger.getLogger(CustomJDBCCall.class);\n\npublic CustomJDBCCall(JdbcTemplate jdbcTemplate) throws Exception {\n    super(jdbcTemplate);\n    try {\n        callMetaDataContext = new CustomCallMetaDataContext();\n        \n        // Access private field\n        Field callMetaDataContextField = \n        AbstractJdbcCall.class.getDeclaredField(CALL_META_DATA_CONTEXT);\n        callMetaDataContextField.setAccessible(true);\n\n   \n        Field modifiersField = Field.class.getDeclaredField(MODIFIERS);\n        modifiersField.setAccessible(true);\n        modifiersField.setInt(callMetaDataContextField, \n     callMetaDataContextField.getModifiers() &amp; ~Modifier.FINAL);\n\n\n        callMetaDataContextField.set(this, this.callMetaDataContext);\n      } catch (NoSuchFieldException | IllegalAccessException ex) {\n        LOGGER.error(&quot;Error while using custom JDBC&quot;, ex);\n        throw new RuntimeException(&quot;Exception thrown overriding \n     AbstractJdbcCall.callMetaDataContext field&quot;, ex);\n     } catch (Exception ex) {\n        LOGGER.error(&quot;Error while using custom JDBC&quot;, ex);\n        throw ex;\n     }\n   }\n\n    public List&lt;SqlParameter&gt; getParamerters() throws Exception {\n    return this.callMetaDataContext.getCallParameters();\n    }\n }\n</code></pre>\n<p>In this code the exception is thrown in the line</p>\n<pre><code> Field modifiersField = Field.class.getDeclaredField(MODIFIERS);\n</code></pre>\n<p>Caused by: java.lang.NoSuchFieldException: modifiers\nat java.base/java.lang.Class.getDeclaredField(Class.java:2782)</p>\n<p>Before it was working fine in jdk 8.\nThis is existing code not written by me and I think here accessing the private final field and setting the value. Am I correct ?\nI think in the Jdk version 12 and above modifying the final and private variable is not possible or disabled is there any work around ?</p>\n"},{"tags":["python","java","bluetooth","raspberry-pi-pico","pyjnius"],"comments":[{"owner":{"account_id":1093238,"reputation":92,"user_id":1087388,"display_name":"Sujay"},"score":0,"creation_date":1699010012,"post_id":77416069,"comment_id":136479803,"body_markdown":"It seems like you can compile the code but are not able to run it because you are not running the project with dependency where the class BluetoothAdapter is present. \nHope it helps. The library reference while running the code is necessary.","body":"It seems like you can compile the code but are not able to run it because you are not running the project with dependency where the class BluetoothAdapter is present.  Hope it helps. The library reference while running the code is necessary."}],"owner":{"account_id":9547226,"reputation":1,"user_id":7092761,"display_name":"Ryan Whitaker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699008636,"creation_date":1699008636,"question_id":77416069,"body_markdown":"I am trying to send data to my RaspberryPi pico using the bluetooth from my laptop through python and the code that i&#39;m using is as follows:\r\n\r\n    from jnius import autoclass\r\n    class bluecustom:\r\n        def __init__(self, name):\r\n            self.name = name\r\n            self.BluetoothAdapter = autoclass(&#39;android.bluetooth.BluetoothAdapter&#39;)\r\n            self.BluetoothDevice = autoclass(&#39;android.bluetooth.BluetoothDevice&#39;)\r\n            self.BluetoothSocket = autoclass(&#39;android.bluetooth.BluetoothSocket&#39;)\r\n            self.UUID = autoclass(&#39;java.util.UUID&#39;)\r\n    \r\n        def get_socket_stream(self):\r\n            paired_devices = self.BluetoothAdapter.getDefaultAdapter().getBondedDevices().toArray()\r\n            socket = None\r\n            for device in paired_devices:\r\n                if device.getName() == self.name:\r\n                    socket = device.createRfcommSocketToServiceRecord(\r\n                        self.UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;))\r\n                    recv_stream = socket.getInputStream()\r\n                    send_stream = socket.getOutputStream()\r\n                    break\r\n            socket.connect()\r\n            return recv_stream, send_stream\r\n\r\n    if __name__ == &#39;__main__&#39;:\r\n        b = bluecustom(&#39;mpy-uart&#39;)\r\n        recv_stream, send_stream = b.get_socket_stream()\r\n        send_stream.write(&#39;hello\\n&#39;)\r\n        send_stream.flush()\r\n\r\n\r\nI connected the device &#39;mpy-uart&#39; to my laptop and tried to execute the code and the following exception was generated:\r\n\r\n    JavaException: JVM exception occurred: android/bluetooth/BluetoothAdapter\r\n    java.lang.NoClassDefFoundError\r\n\r\nI have little to no experience with Java so any help would be appreciated.","title":"JavaException: JVM exception occurred: android/bluetooth/BluetoothAdapter java.lang.NoClassDefFoundError (trying to send data to a raspberry pi-pico)","body":"<p>I am trying to send data to my RaspberryPi pico using the bluetooth from my laptop through python and the code that i'm using is as follows:</p>\n<pre><code>from jnius import autoclass\nclass bluecustom:\n    def __init__(self, name):\n        self.name = name\n        self.BluetoothAdapter = autoclass('android.bluetooth.BluetoothAdapter')\n        self.BluetoothDevice = autoclass('android.bluetooth.BluetoothDevice')\n        self.BluetoothSocket = autoclass('android.bluetooth.BluetoothSocket')\n        self.UUID = autoclass('java.util.UUID')\n\n    def get_socket_stream(self):\n        paired_devices = self.BluetoothAdapter.getDefaultAdapter().getBondedDevices().toArray()\n        socket = None\n        for device in paired_devices:\n            if device.getName() == self.name:\n                socket = device.createRfcommSocketToServiceRecord(\n                    self.UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;))\n                recv_stream = socket.getInputStream()\n                send_stream = socket.getOutputStream()\n                break\n        socket.connect()\n        return recv_stream, send_stream\n\nif __name__ == '__main__':\n    b = bluecustom('mpy-uart')\n    recv_stream, send_stream = b.get_socket_stream()\n    send_stream.write('hello\\n')\n    send_stream.flush()\n</code></pre>\n<p>I connected the device 'mpy-uart' to my laptop and tried to execute the code and the following exception was generated:</p>\n<pre><code>JavaException: JVM exception occurred: android/bluetooth/BluetoothAdapter\njava.lang.NoClassDefFoundError\n</code></pre>\n<p>I have little to no experience with Java so any help would be appreciated.</p>\n"},{"tags":["java","jna"],"comments":[{"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"score":0,"creation_date":1698968945,"post_id":77413471,"comment_id":136475370,"body_markdown":"Check out JNativeHook, they did this for most OSs: https://github.com/kwhat/jnativehook","body":"Check out JNativeHook, they did this for most OSs: <a href=\"https://github.com/kwhat/jnativehook\" rel=\"nofollow noreferrer\">github.com/kwhat/jnativehook</a>"},{"owner":{"account_id":29814516,"reputation":3,"user_id":22849111,"display_name":"halu86x"},"score":0,"creation_date":1698969833,"post_id":77413471,"comment_id":136475453,"body_markdown":"thx. ill try it","body":"thx. ill try it"},{"owner":{"account_id":29814516,"reputation":3,"user_id":22849111,"display_name":"halu86x"},"score":0,"creation_date":1698972406,"post_id":77413471,"comment_id":136475693,"body_markdown":"How do I detect right clicks with javanativehooks?","body":"How do I detect right clicks with javanativehooks?"}],"answers":[{"comments":[{"owner":{"account_id":29814516,"reputation":3,"user_id":22849111,"display_name":"halu86x"},"score":0,"creation_date":1698974368,"post_id":77413682,"comment_id":136475857,"body_markdown":"Thank you all. Resolved.\nI don&#39;t know if it was my mouse driver, but NativeMouseEvent.BUTTON2 was right click on my mouse.","body":"Thank you all. Resolved. I don&#39;t know if it was my mouse driver, but NativeMouseEvent.BUTTON2 was right click on my mouse."},{"owner":{"account_id":8818198,"reputation":1021,"user_id":6588943,"display_name":"Melvin"},"score":0,"creation_date":1699008294,"post_id":77413682,"comment_id":136479510,"body_markdown":"Your welcome. Yeah it was late yesterday - I mixed Button2 and Button3 up :-)\nPlease consider accepting the answer as it helped you. Thx.","body":"Your welcome. Yeah it was late yesterday - I mixed Button2 and Button3 up :-) Please consider accepting the answer as it helped you. Thx."}],"tags":[],"owner":{"account_id":8818198,"reputation":1021,"user_id":6588943,"display_name":"Melvin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699008237,"creation_date":1698973937,"answer_id":77413682,"question_id":77413471,"body_markdown":"It is not much different from registering and creating any other handler.\r\n\r\nFirst you need to create the handler in an appropriate class implementing a NativeMouseListener (the libraries are in org.jnativehook.*):\r\n\r\n    public void nativeMouseClicked(NativeMouseEvent e) {\r\n        if (e.getButton() == NativeMouseEvent.BUTTON2) {\r\n            // do something\r\n        }\r\n    }\r\n\r\n(you can add nativeMousePressed and nativeMouseReleased as well like this at this point)\r\n\r\nSecondly you need to register the handler:\r\n\r\n        try {\r\n            GlobalScreen.registerNativeHook();\r\n            GlobalScreen.addNativeMouseListener(new YourClass());\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\nI have only showed the part of the code which helps you going forward from this point. If you have questions - just ask please.","title":"How to use JNA with java to detect clicks","body":"<p>It is not much different from registering and creating any other handler.</p>\n<p>First you need to create the handler in an appropriate class implementing a NativeMouseListener (the libraries are in org.jnativehook.*):</p>\n<pre><code>public void nativeMouseClicked(NativeMouseEvent e) {\n    if (e.getButton() == NativeMouseEvent.BUTTON2) {\n        // do something\n    }\n}\n</code></pre>\n<p>(you can add nativeMousePressed and nativeMouseReleased as well like this at this point)</p>\n<p>Secondly you need to register the handler:</p>\n<pre><code>    try {\n        GlobalScreen.registerNativeHook();\n        GlobalScreen.addNativeMouseListener(new YourClass());\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n</code></pre>\n<p>I have only showed the part of the code which helps you going forward from this point. If you have questions - just ask please.</p>\n"}],"owner":{"account_id":29814516,"reputation":3,"user_id":22849111,"display_name":"halu86x"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77413682,"answer_count":1,"score":0,"last_activity_date":1699008237,"creation_date":1698968805,"question_id":77413471,"body_markdown":"If I try to write the code below, I get the following error\r\n\r\nException in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Error looking up function &#39;SetWindowsHookEx&#39;: the specified procedure is not found.\r\n\r\n\tat com.sun.jna.Function.&lt;init&gt;(Function.java:252)\r\n\tat com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:620)\r\n\tat com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:596)\r\n\tat com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:582)\r\n\tat com.sun.jna.Library$Handler.invoke(Library.java:248)\r\n\tat jdk.proxy1/jdk.proxy1.$Proxy0.SetWindowsHookEx(Unknown Source)\r\n\tat tester.test.main(test.java:38)\r\n\r\nI&#39;m using machine translation, so this English text could be wrong.\r\nAlso, since this is my first time asking this question, it would be great if you could tell me where I could improve.\r\n\r\n\r\n\r\n\r\n\r\nI wrote this code thinking that the message would appear in the console when clicked.\r\nBut I got an error that I don&#39;t understand.\r\n\r\n\r\n\r\n```\r\npackage tester;\r\n\r\nimport com.sun.jna.Native;\r\nimport com.sun.jna.platform.win32.User32;\r\nimport com.sun.jna.platform.win32.WinDef;\r\nimport com.sun.jna.platform.win32.WinUser;\r\n\r\npublic class test {\r\n\tpublic interface User32Ext extends User32 {\r\n\t\tUser32Ext INSTANCE = Native.load(&quot;user32&quot;, User32Ext.class);\r\n\r\n\t\tint WM_LBUTTONDOWN = 0x0201;\r\n\t\tint WM_RBUTTONDOWN = 0x0204;\r\n\r\n\t\tWinUser.HHOOK SetWindowsHookEx(int idHook, HOOKPROC lpfn, WinDef.HINSTANCE hMod, WinDef.DWORD dwThreadId);\r\n\r\n\t\tWinDef.LRESULT CallNextHookEx(WinUser.HHOOK hhk, int nCode, WinDef.WPARAM wParam, WinUser.MSLLHOOKSTRUCT lParam);\r\n\r\n\t\tboolean UnhookWindowsHookEx(WinUser.HHOOK hhk);\r\n\t}\r\n\r\n\tpublic static interface HOOKPROC extends WinUser.LowLevelMouseProc {\r\n\t}\r\n\r\n\tpublic static void main(String args[]) {\r\n\t\tUser32Ext user32 = User32Ext.INSTANCE;\r\n\t\tHOOKPROC hookProc = (int nCode, WinDef.WPARAM wParam, WinUser.MSLLHOOKSTRUCT lParam) -&gt; {\r\n\t\t\tif (nCode &gt;= 0) {\r\n\t\t\t\tif (wParam.intValue() == User32Ext.WM_LBUTTONDOWN) {\r\n\t\t\t\t\tSystem.out.println(&quot;L&quot;);\r\n\t\t\t\t} else if (wParam.intValue() == User32Ext.WM_RBUTTONDOWN) {\r\n\t\t\t\t\tSystem.out.println(&quot;R&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn user32.CallNextHookEx(null, nCode, wParam, lParam);\r\n\t\t};\r\n\r\n\t\tWinUser.HHOOK hhk = user32.SetWindowsHookEx(WinUser.WH_MOUSE_LL, hookProc, null, 0);\r\n\r\n\t\tif (hhk == null) {\r\n\t\t\tSystem.err.println(&quot;Failed to set up a hook.&quot;);\r\n\t\t\tSystem.exit(1);\r\n\t\t}\r\n\t\tWinUser.MSG msg = new WinUser.MSG();\r\n\t\twhile (User32.INSTANCE.GetMessage(msg, null, 0, 0) != 0) {\r\n\t\t\tUser32.INSTANCE.TranslateMessage(msg);\r\n\t\t\tUser32.INSTANCE.DispatchMessage(msg);\r\n\t\t}\r\n\r\n\t\tuser32.UnhookWindowsHookEx(hhk);\r\n\t}\r\n}\r\n\r\n```\r\n","title":"How to use JNA with java to detect clicks","body":"<p>If I try to write the code below, I get the following error</p>\n<p>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Error looking up function 'SetWindowsHookEx': the specified procedure is not found.</p>\n<pre><code>at com.sun.jna.Function.&lt;init&gt;(Function.java:252)\nat com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:620)\nat com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:596)\nat com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:582)\nat com.sun.jna.Library$Handler.invoke(Library.java:248)\nat jdk.proxy1/jdk.proxy1.$Proxy0.SetWindowsHookEx(Unknown Source)\nat tester.test.main(test.java:38)\n</code></pre>\n<p>I'm using machine translation, so this English text could be wrong.\nAlso, since this is my first time asking this question, it would be great if you could tell me where I could improve.</p>\n<p>I wrote this code thinking that the message would appear in the console when clicked.\nBut I got an error that I don't understand.</p>\n<pre><code>package tester;\n\nimport com.sun.jna.Native;\nimport com.sun.jna.platform.win32.User32;\nimport com.sun.jna.platform.win32.WinDef;\nimport com.sun.jna.platform.win32.WinUser;\n\npublic class test {\n    public interface User32Ext extends User32 {\n        User32Ext INSTANCE = Native.load(&quot;user32&quot;, User32Ext.class);\n\n        int WM_LBUTTONDOWN = 0x0201;\n        int WM_RBUTTONDOWN = 0x0204;\n\n        WinUser.HHOOK SetWindowsHookEx(int idHook, HOOKPROC lpfn, WinDef.HINSTANCE hMod, WinDef.DWORD dwThreadId);\n\n        WinDef.LRESULT CallNextHookEx(WinUser.HHOOK hhk, int nCode, WinDef.WPARAM wParam, WinUser.MSLLHOOKSTRUCT lParam);\n\n        boolean UnhookWindowsHookEx(WinUser.HHOOK hhk);\n    }\n\n    public static interface HOOKPROC extends WinUser.LowLevelMouseProc {\n    }\n\n    public static void main(String args[]) {\n        User32Ext user32 = User32Ext.INSTANCE;\n        HOOKPROC hookProc = (int nCode, WinDef.WPARAM wParam, WinUser.MSLLHOOKSTRUCT lParam) -&gt; {\n            if (nCode &gt;= 0) {\n                if (wParam.intValue() == User32Ext.WM_LBUTTONDOWN) {\n                    System.out.println(&quot;L&quot;);\n                } else if (wParam.intValue() == User32Ext.WM_RBUTTONDOWN) {\n                    System.out.println(&quot;R&quot;);\n                }\n            }\n            return user32.CallNextHookEx(null, nCode, wParam, lParam);\n        };\n\n        WinUser.HHOOK hhk = user32.SetWindowsHookEx(WinUser.WH_MOUSE_LL, hookProc, null, 0);\n\n        if (hhk == null) {\n            System.err.println(&quot;Failed to set up a hook.&quot;);\n            System.exit(1);\n        }\n        WinUser.MSG msg = new WinUser.MSG();\n        while (User32.INSTANCE.GetMessage(msg, null, 0, 0) != 0) {\n            User32.INSTANCE.TranslateMessage(msg);\n            User32.INSTANCE.DispatchMessage(msg);\n        }\n\n        user32.UnhookWindowsHookEx(hhk);\n    }\n}\n\n</code></pre>\n"},{"tags":["java","graalvm"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1699213729,"post_id":77415986,"comment_id":136500332,"body_markdown":"I ran some sample project in my local in linux tests are working, can you share a reproducer ?","body":"I ran some sample project in my local in linux tests are working, can you share a reproducer ?"},{"owner":{"account_id":18815492,"reputation":21,"user_id":13722731,"display_name":"kiransbaliga"},"score":0,"creation_date":1699245746,"post_id":77415986,"comment_id":136502753,"body_markdown":"@ozkanpakdil I couldn&#39;t isolate exactly which package caused the error it may be Lombok or spring might be using the CGLIB package as its dependency.\nI guess if you include such libraries and use springboot Starter test for testing, you could reproduce the error","body":"@ozkanpakdil I couldn&#39;t isolate exactly which package caused the error it may be Lombok or spring might be using the CGLIB package as its dependency. I guess if you include such libraries and use springboot Starter test for testing, you could reproduce the error"}],"owner":{"account_id":18815492,"reputation":21,"user_id":13722731,"display_name":"kiransbaliga"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699007932,"creation_date":1699007932,"question_id":77415986,"body_markdown":"I was trying to run tests on spring java project using GraalVM. Upon which stumbled to this error.\r\naccording to the documentation the test first runs using the JVM and then compiles the test and then runs with GraalVM.\r\n\r\n\r\nevery time i try to run `gradle nativeTest` the follwing error occurs.\r\neach class will have these set of errors\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;groupController&#39;: Unexpected AOP exception\r\n\r\norg.springframework.aop.framework.AopConfigException: Unexpected AOP exception\r\n\r\nCaused by: java.lang.UnsupportedOperationException: CGLIB runtime enhancement not supported on native image. Make sure to include a pre-generated class on the classpath instead: com.kv.authservice.group.GroupController$$SpringCGLIB$$87\r\n```\r\n\r\nI tried different configurations and cannot find a solution. \r\n\r\nupon which i added to Runtimehints.\r\n```\r\nhints.proxies().registerJdkProxy(TransactionAutoConfiguration.EnableTransactionManagementConfiguration.CglibAutoProxyConfiguration.class);\r\n```\r\n\r\ndoing this will move the `gradle nativeTest` further more and also produce this error\r\n```\r\njava.lang.IllegalStateException: Failed to load AOT ApplicationContextInitializer class for test class [com.kv.authservice.group.CreateGroupTest]. This can occur if AOT processing has not taken place for the test suite. It can also occur if AOT processing failed for the test class, in which case you can consult the logs generated during AOT processing.\r\n```\r\n\r\nthis also bring another issue as once this hints is added then we cannot build native image also.\r\n","title":"Task nativeTest Failed","body":"<p>I was trying to run tests on spring java project using GraalVM. Upon which stumbled to this error.\naccording to the documentation the test first runs using the JVM and then compiles the test and then runs with GraalVM.</p>\n<p>every time i try to run <code>gradle nativeTest</code> the follwing error occurs.\neach class will have these set of errors</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'groupController': Unexpected AOP exception\n\norg.springframework.aop.framework.AopConfigException: Unexpected AOP exception\n\nCaused by: java.lang.UnsupportedOperationException: CGLIB runtime enhancement not supported on native image. Make sure to include a pre-generated class on the classpath instead: com.kv.authservice.group.GroupController$$SpringCGLIB$$87\n</code></pre>\n<p>I tried different configurations and cannot find a solution.</p>\n<p>upon which i added to Runtimehints.</p>\n<pre><code>hints.proxies().registerJdkProxy(TransactionAutoConfiguration.EnableTransactionManagementConfiguration.CglibAutoProxyConfiguration.class);\n</code></pre>\n<p>doing this will move the <code>gradle nativeTest</code> further more and also produce this error</p>\n<pre><code>java.lang.IllegalStateException: Failed to load AOT ApplicationContextInitializer class for test class [com.kv.authservice.group.CreateGroupTest]. This can occur if AOT processing has not taken place for the test suite. It can also occur if AOT processing failed for the test class, in which case you can consult the logs generated during AOT processing.\n</code></pre>\n<p>this also bring another issue as once this hints is added then we cannot build native image also.</p>\n"},{"tags":["java","spring","mongodb","inheritance","spring-data-mongodb"],"owner":{"account_id":12870589,"reputation":13,"user_id":9309189,"display_name":"Timer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699007608,"creation_date":1699007208,"question_id":77415905,"body_markdown":"I&#39;m developing an application with Spring Data MongoDB. I use a base entity that serves as a superclass of all entities. Each entity therefore inherits from the base entity and has a @Document annotation with the desired collection name. Unfortunately, the class name of the base entity is always used as the collection name. When I run the following test, a collection &quot;baseEntity&quot; is created and the PersonEntity is saved there:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@EqualsAndHashCode\r\n@SuperBuilder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic abstract class BaseEntity {\r\n\r\n\t@Id\r\n\t@Indexed(unique = true)\r\n\t@Field(&quot;_id&quot;)\r\n\tprotected ObjectId id;\r\n\r\n\t@LastModifiedDate\r\n\tprotected Date lastModified;\r\n\r\n\t@Version\r\n\tprotected int version;\r\n}\r\n\r\n@Document(collection = &quot;person&quot;)\r\n@Getter\r\n@Setter\r\n@EqualsAndHashCode(callSuper = true)\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@SuperBuilder\r\npublic class PersonEntity extends BaseEntity {\r\n\r\n\tprivate String salutation;\r\n\tprivate String firstName;\r\n\tprivate String lastName;\r\n}\r\n\r\npublic interface SaveDAO&lt;T extends BaseEntity&gt; extends MongoRepository&lt;T, ObjectId&gt; {\r\n\r\n\t@Override\r\n\tpublic &lt;S extends T&gt; S save(S entity);\r\n}\r\n\r\n@SpringBootTest\r\nclass SaveDAOTest {\r\n\r\n\t@Autowired\r\n\tprivate SaveDAO&lt;PersonEntity&gt; saveDao;\r\n\r\n\t@Test\r\n\tvoid testCreateEntity() {\r\n\t\tPersonEntity entity = new PersonEntity();\r\n\t\tsaveDao.save(entity);\r\n\t\t// TODO assert\r\n\t}\r\n}\r\n```\r\n\r\n\r\nI have already looked at various examples on the Internet and copied some code to try out (e.g. @Document also in the BaseEntity).\r\nAlso, I have already tried to debug the Spring Data code. I noticed the following: in SimpleMongoRepository.save(...) &quot;baseEntity&quot; is returned when entityInformation.getCollectionName() is called. However, I didn&#39;t get much further or found any more useful information.\r\n\r\nEdit:\r\nI just replaced the **SaveDAO&lt;T extends BaseEntity&gt; extends MongoRepository&lt;T, ObjectId&gt;** with **SaveDAO extends MongoRepository&lt;PersonEntity, ObjectId&gt;**. Then the correct collection is created and used. So apparently it&#39;s because of my generic repository. Is there any solution to this (other than creating a separate repository for each entity)?","title":"Spring Data MongoDB - wrong collection name with inheritance","body":"<p>I'm developing an application with Spring Data MongoDB. I use a base entity that serves as a superclass of all entities. Each entity therefore inherits from the base entity and has a @Document annotation with the desired collection name. Unfortunately, the class name of the base entity is always used as the collection name. When I run the following test, a collection &quot;baseEntity&quot; is created and the PersonEntity is saved there:</p>\n<pre><code>@Getter\n@Setter\n@EqualsAndHashCode\n@SuperBuilder\n@AllArgsConstructor\n@NoArgsConstructor\npublic abstract class BaseEntity {\n\n    @Id\n    @Indexed(unique = true)\n    @Field(&quot;_id&quot;)\n    protected ObjectId id;\n\n    @LastModifiedDate\n    protected Date lastModified;\n\n    @Version\n    protected int version;\n}\n\n@Document(collection = &quot;person&quot;)\n@Getter\n@Setter\n@EqualsAndHashCode(callSuper = true)\n@NoArgsConstructor\n@AllArgsConstructor\n@SuperBuilder\npublic class PersonEntity extends BaseEntity {\n\n    private String salutation;\n    private String firstName;\n    private String lastName;\n}\n\npublic interface SaveDAO&lt;T extends BaseEntity&gt; extends MongoRepository&lt;T, ObjectId&gt; {\n\n    @Override\n    public &lt;S extends T&gt; S save(S entity);\n}\n\n@SpringBootTest\nclass SaveDAOTest {\n\n    @Autowired\n    private SaveDAO&lt;PersonEntity&gt; saveDao;\n\n    @Test\n    void testCreateEntity() {\n        PersonEntity entity = new PersonEntity();\n        saveDao.save(entity);\n        // TODO assert\n    }\n}\n</code></pre>\n<p>I have already looked at various examples on the Internet and copied some code to try out (e.g. @Document also in the BaseEntity).\nAlso, I have already tried to debug the Spring Data code. I noticed the following: in SimpleMongoRepository.save(...) &quot;baseEntity&quot; is returned when entityInformation.getCollectionName() is called. However, I didn't get much further or found any more useful information.</p>\n<p>Edit:\nI just replaced the <strong>SaveDAO extends MongoRepository&lt;T, ObjectId&gt;</strong> with <strong>SaveDAO extends MongoRepository&lt;PersonEntity, ObjectId&gt;</strong>. Then the correct collection is created and used. So apparently it's because of my generic repository. Is there any solution to this (other than creating a separate repository for each entity)?</p>\n"},{"tags":["java","protocol-buffers","parquet"],"owner":{"account_id":19995177,"reputation":15,"user_id":14655417,"display_name":"ANIMO"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699007607,"creation_date":1699007607,"question_id":77415945,"body_markdown":"I wrote a parquet file from a protobuf message as such\r\n\r\n    ProtobufData model = ProtobufData.get();\r\n\r\n    Schema schema = model.getSchema(ExampleMessage.class);\r\n\r\n    Configuration conf = new Configuration();\r\n\r\n    ParquetWriter&lt;ExampleMessage&gt; writer = AvroParquetWriter\r\n        .&lt;ExampleMessage&gt;builder(new Path(parquetFile))\r\n        .withConf(conf)\r\n        .withDataModel(model)\r\n        .withSchema(schema)\r\n        .build();\r\n\r\n    for (T object : objects) {\r\n        writer.write(object);\r\n    }\r\n\r\n    writer.close();\r\n\r\nI got the above code from here: https://github.com/rdblue/parquet-avro-protobuf/blob/master/src/main/java/com/example/ProtobufToParquet.java\r\n\r\nI have verified that the parquet files are being created as expected using a third party parquet file viewer. \r\nNow, I would also like to create a unit test that verifies the creation of parquet files with the correct dummy data. For this, I am trying to read the newly created parquet file within Java and asserting that the data exists as expected. For this, I have written the following piece of code.\r\n\r\n    ParquetReader&lt;ExampleMessage&gt; reader = AvroParquetReader\r\n            .&lt;ExampleMessage&gt;builder(dataFile)\r\n            .withDataModel(new ReflectData(ExampleMessage.class.getClassLoader()))\r\n            .disableCompatibility()\r\n            .withConf(conf)\r\n            .build();\r\n    \r\n    List&lt;ExampleMessage&gt; recordsList = new ArrayList&lt;&gt;();\r\n    \r\n    ExampleMessage record;\r\n    while ((record = reader.read()) != null) {\r\n        recordsList.add(record);\r\n    }\r\n\r\nThis keeps throwing the error that GenericRecord cannot be converted to ExampleMessage on the following line, no matter what I try.\r\n\r\n    while((record = reader.read()) != null) {\r\n\r\nI have tried using ProtoParquetReader, GenericDatumReader, DecoderFactory and a tonne of different things I found online and chatGPT recommended but nothing seemed to work. \r\n\r\nAll I want is to read the parquet file and get data as variables of the original type, i.e. ExampleMessage here.","title":"Can&#39;t make unit tests for reading parquet files created from protobuf messages","body":"<p>I wrote a parquet file from a protobuf message as such</p>\n<pre><code>ProtobufData model = ProtobufData.get();\n\nSchema schema = model.getSchema(ExampleMessage.class);\n\nConfiguration conf = new Configuration();\n\nParquetWriter&lt;ExampleMessage&gt; writer = AvroParquetWriter\n    .&lt;ExampleMessage&gt;builder(new Path(parquetFile))\n    .withConf(conf)\n    .withDataModel(model)\n    .withSchema(schema)\n    .build();\n\nfor (T object : objects) {\n    writer.write(object);\n}\n\nwriter.close();\n</code></pre>\n<p>I got the above code from here: <a href=\"https://github.com/rdblue/parquet-avro-protobuf/blob/master/src/main/java/com/example/ProtobufToParquet.java\" rel=\"nofollow noreferrer\">https://github.com/rdblue/parquet-avro-protobuf/blob/master/src/main/java/com/example/ProtobufToParquet.java</a></p>\n<p>I have verified that the parquet files are being created as expected using a third party parquet file viewer.\nNow, I would also like to create a unit test that verifies the creation of parquet files with the correct dummy data. For this, I am trying to read the newly created parquet file within Java and asserting that the data exists as expected. For this, I have written the following piece of code.</p>\n<pre><code>ParquetReader&lt;ExampleMessage&gt; reader = AvroParquetReader\n        .&lt;ExampleMessage&gt;builder(dataFile)\n        .withDataModel(new ReflectData(ExampleMessage.class.getClassLoader()))\n        .disableCompatibility()\n        .withConf(conf)\n        .build();\n\nList&lt;ExampleMessage&gt; recordsList = new ArrayList&lt;&gt;();\n\nExampleMessage record;\nwhile ((record = reader.read()) != null) {\n    recordsList.add(record);\n}\n</code></pre>\n<p>This keeps throwing the error that GenericRecord cannot be converted to ExampleMessage on the following line, no matter what I try.</p>\n<pre><code>while((record = reader.read()) != null) {\n</code></pre>\n<p>I have tried using ProtoParquetReader, GenericDatumReader, DecoderFactory and a tonne of different things I found online and chatGPT recommended but nothing seemed to work.</p>\n<p>All I want is to read the parquet file and get data as variables of the original type, i.e. ExampleMessage here.</p>\n"},{"tags":["java","quarkus","interceptor","requesthandler","requestscope"],"answers":[{"comments":[{"owner":{"account_id":17069157,"reputation":210,"user_id":12350428,"display_name":"bob"},"score":0,"creation_date":1699018290,"post_id":77415932,"comment_id":136481390,"body_markdown":"Thank you! So basically because interceptors have a priority value which is lower then the `@AcitivateRequestContext` it runs before the request scoped bean can be activated. So to make sure the request scoped bean is activated first we want our Interceptor&#39;s priority value to be higher so that it gets invoked later.\n\nCorrect me if I&#39;m wrong please :)","body":"Thank you! So basically because interceptors have a priority value which is lower then the <code>@AcitivateRequestContext</code> it runs before the request scoped bean can be activated. So to make sure the request scoped bean is activated first we want our Interceptor&#39;s priority value to be higher so that it gets invoked later.  Correct me if I&#39;m wrong please :)"},{"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"score":1,"creation_date":1699028728,"post_id":77415932,"comment_id":136483884,"body_markdown":"Beans are not activated, but contexts are. Request scoped beans exist in a request context, so the request context must be active before you attempt to call any method on a request scoped bean. `@ActivateRequestContext` is an interceptor binding for a built in interceptor that activates the request context for the duration of `context.proceed()`. You just need to order the interceptors properly, which is what `@Priority` does.","body":"Beans are not activated, but contexts are. Request scoped beans exist in a request context, so the request context must be active before you attempt to call any method on a request scoped bean. <code>@ActivateRequestContext</code> is an interceptor binding for a built in interceptor that activates the request context for the duration of <code>context.proceed()</code>. You just need to order the interceptors properly, which is what <code>@Priority</code> does."}],"tags":[],"owner":{"account_id":385127,"reputation":6294,"user_id":742081,"display_name":"Ladicek"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1699007505,"creation_date":1699007505,"answer_id":77415932,"question_id":77415763,"body_markdown":"Your interceptor does not declare a `@Priority`. By specification, such interceptor should not be enabled, but Quarkus deviates from that and assigns a default priority of `0`. You should even see this warning:\r\n\r\n```\r\nThe interceptor x.y.z.ContextInterceptor does not declare any @Priority.\r\nIt will be assigned a default priority value of 0.\r\n```\r\n\r\nThe `@ActivateRequestContext` interceptor has, by specification, the priority of `PLATFORM_BEFORE + 100`.\r\n\r\nCombined, this means that your interceptor runs *before* the request context is activated. You should assign your interceptor a correct priority explicitly:\r\n\r\n```java\r\n@Interceptor\r\n@Priority(Interceptor.Priority.LIBRARY_BEFORE + 100)\r\n@ContextBinding\r\npublic class ContextInterceptor {\r\n    ...\r\n}\r\n```\r\n\r\nI chose `LIBRARY_BEFORE + 100` with little deliberation, but it seems likely to me that your interceptor priority should be in the &quot;early interceptors defined by extension libraries&quot; category, so `LIBRARY_BEFORE + 100` should be a good start.","title":"Quarkus - ContextNotActiveException when injecting a request scoped bean in Interceptor","body":"<p>Your interceptor does not declare a <code>@Priority</code>. By specification, such interceptor should not be enabled, but Quarkus deviates from that and assigns a default priority of <code>0</code>. You should even see this warning:</p>\n<pre><code>The interceptor x.y.z.ContextInterceptor does not declare any @Priority.\nIt will be assigned a default priority value of 0.\n</code></pre>\n<p>The <code>@ActivateRequestContext</code> interceptor has, by specification, the priority of <code>PLATFORM_BEFORE + 100</code>.</p>\n<p>Combined, this means that your interceptor runs <em>before</em> the request context is activated. You should assign your interceptor a correct priority explicitly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Interceptor\n@Priority(Interceptor.Priority.LIBRARY_BEFORE + 100)\n@ContextBinding\npublic class ContextInterceptor {\n    ...\n}\n</code></pre>\n<p>I chose <code>LIBRARY_BEFORE + 100</code> with little deliberation, but it seems likely to me that your interceptor priority should be in the &quot;early interceptors defined by extension libraries&quot; category, so <code>LIBRARY_BEFORE + 100</code> should be a good start.</p>\n"}],"owner":{"account_id":17069157,"reputation":210,"user_id":12350428,"display_name":"bob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77415932,"answer_count":1,"score":0,"last_activity_date":1699007505,"creation_date":1699005863,"question_id":77415763,"body_markdown":"I&#39;ve got a Quarkus application. The entry point to trigger this application is a class which implements AWS RequestHandler. \r\nBefore it runs I would like to set the context depending on the given parameter fields. To store the context somewhere I created a requestScoped bean with a field that we set with a simple setter method. \r\n\r\nTo do this I thought of using Interceptors. In my interceptor class, I inject this request scoped bean.\r\n\r\nWhen running the application it triggers the interceptor but I noticed I get an error while debugging. \r\n\r\n**Method threw &#39;javax.enterprise.context.ContextNotActiveException&#39;. Cannot evaluate common.service.MyRequestScopedBean_ClientProxy.toString()**\r\n\r\nI&#39;ve run this in another application where I trigger a rest endpoint instead. And don&#39;t have the same issue. \r\n\r\nQuarkus platform version: 2.7.5.Final.\r\n\r\nWhy is **ContextNotActiveException** being thrown here, is there a way to fix this?\r\n\r\n\r\n    @Setter\r\n    @Getter\r\n    @RequestScoped\r\n    public class MyRequestScopedBean {\r\n    \r\n    \tprivate String context;\r\n    }\r\n\r\n\r\nMy InterceptorBinding annotation:\r\n\r\n    @InterceptorBinding\r\n    @Target({ElementType.TYPE, ElementType.METHOD})\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    public @interface ContextBinding {\r\n    }\r\n\r\nThe ContextInterceptor class:\r\n\r\n    @Slf4j\r\n    @Interceptor\r\n    @ContextBinding\r\n    public class ContextInterceptor {\r\n    \r\n    \t@Inject\r\n    \tMyRequestScopedBean myRequestScopedBean;\r\n    \r\n    \t@AroundInvoke\r\n    \tpublic Object setContext(InvocationContext context) throws Exception {\r\n    \r\n    \t\tlog.info(&quot;{}&quot;, context);\r\n\r\n            myRequestScopedBean.setContext(&quot;Some context&quot;);\r\n\r\n            return context.proceed();\r\n    \t}\r\n    }\r\n\r\nMy handler class, with @AcitivateRequestContext: \r\n\r\n    @Slf4j\r\n    @ActivateRequestContext\r\n    @ContextBinding\r\n    @Named(&quot;Handler&quot;)\r\n    public class Handler implements RequestHandler&lt;Event, Void&gt; {\r\n    \r\n    \t@Override\r\n    \tpublic Void handleRequest(Event event, Context context) {\r\n            // some logic\r\n    \t}\r\n    }","title":"Quarkus - ContextNotActiveException when injecting a request scoped bean in Interceptor","body":"<p>I've got a Quarkus application. The entry point to trigger this application is a class which implements AWS RequestHandler.\nBefore it runs I would like to set the context depending on the given parameter fields. To store the context somewhere I created a requestScoped bean with a field that we set with a simple setter method.</p>\n<p>To do this I thought of using Interceptors. In my interceptor class, I inject this request scoped bean.</p>\n<p>When running the application it triggers the interceptor but I noticed I get an error while debugging.</p>\n<p><strong>Method threw 'javax.enterprise.context.ContextNotActiveException'. Cannot evaluate common.service.MyRequestScopedBean_ClientProxy.toString()</strong></p>\n<p>I've run this in another application where I trigger a rest endpoint instead. And don't have the same issue.</p>\n<p>Quarkus platform version: 2.7.5.Final.</p>\n<p>Why is <strong>ContextNotActiveException</strong> being thrown here, is there a way to fix this?</p>\n<pre><code>@Setter\n@Getter\n@RequestScoped\npublic class MyRequestScopedBean {\n\n    private String context;\n}\n</code></pre>\n<p>My InterceptorBinding annotation:</p>\n<pre><code>@InterceptorBinding\n@Target({ElementType.TYPE, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface ContextBinding {\n}\n</code></pre>\n<p>The ContextInterceptor class:</p>\n<pre><code>@Slf4j\n@Interceptor\n@ContextBinding\npublic class ContextInterceptor {\n\n    @Inject\n    MyRequestScopedBean myRequestScopedBean;\n\n    @AroundInvoke\n    public Object setContext(InvocationContext context) throws Exception {\n\n        log.info(&quot;{}&quot;, context);\n\n        myRequestScopedBean.setContext(&quot;Some context&quot;);\n\n        return context.proceed();\n    }\n}\n</code></pre>\n<p>My handler class, with @AcitivateRequestContext:</p>\n<pre><code>@Slf4j\n@ActivateRequestContext\n@ContextBinding\n@Named(&quot;Handler&quot;)\npublic class Handler implements RequestHandler&lt;Event, Void&gt; {\n\n    @Override\n    public Void handleRequest(Event event, Context context) {\n        // some logic\n    }\n}\n</code></pre>\n"},{"tags":["java","soap","wsdl","soap-client","spring-ws"],"comments":[{"owner":{"account_id":9009497,"reputation":21,"user_id":22851473,"display_name":"Prototype"},"score":1,"creation_date":1700048243,"post_id":77415923,"comment_id":136606314,"body_markdown":"can someone help?","body":"can someone help?"}],"owner":{"account_id":9009497,"reputation":21,"user_id":22851473,"display_name":"Prototype"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699007470,"creation_date":1699007398,"question_id":77415923,"body_markdown":"I am developing a SOAP service based on `Spring WebServices`, which, according to a business task, must proxy a `SOAP` request through itself.\r\n\r\nMy problem is that I can&#39;t get a correctly generated WSDL at the output, which I could give to the customer, since in fact there is almost no description of elements in my main xsd due to the fact that I use a generated SOAP service, objects from which participate in @RequestPayload and @ResponsePayload. The only elements added by my service are `setDataInQueue` and `message` (currently not used, but will be needed later).\r\n\r\nDue to the large number of links in the xsd file, I could not publish my question, as it was marked as spam, so I had to omit them.\r\n\r\nGenerated WSDL on `localhost:8080/ws/proxy.wsdl`:\r\n\r\n```wsdl\r\n&lt;wsdl:definitions ...&gt;\r\n    &lt;wsdl:types&gt;\r\n        &lt;xs:schema ...&gt;\r\n            &lt;xs:import schemaLocation=&quot;message.xsd&quot;/&gt;\r\n            &lt;xs:import namespace=&quot;http://service.example.com/&quot; schemaLocation=&quot;setDataInQueue.xsd&quot;/&gt;\r\n        &lt;/xs:schema&gt;\r\n    &lt;/wsdl:types&gt;\r\n    &lt;wsdl:portType name=&quot;ProxyPort&quot;&gt;&lt;/wsdl:portType&gt;\r\n    &lt;wsdl:binding name=&quot;ProxyPortSoap11&quot; type=&quot;tns:ProxyPort&quot;&gt;\r\n        &lt;soap:binding style=&quot;document&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot;/&gt;\r\n    &lt;/wsdl:binding&gt;\r\n    &lt;wsdl:service name=&quot;ProxyService&quot;&gt;\r\n        &lt;wsdl:port binding=&quot;tns:ProxyPortSoap11&quot; name=&quot;ProxyPortSoap11&quot;&gt;\r\n            &lt;soap:address location=&quot;http://localhost:8080/ws&quot;/&gt;\r\n        &lt;/wsdl:port&gt;\r\n    &lt;/wsdl:service&gt;\r\n&lt;/wsdl:definitions&gt;\r\n```\r\n\r\nGenerated WSDL on `localhost:8080/ws/ehdproxy.wsdl`:\r\n```wsdl\r\n&lt;wsdl:definitions ... &gt;\r\n    &lt;wsdl:types&gt;\r\n        &lt;xs:schema ...&gt;\r\n            &lt;xs:import schemaLocation=&quot;message.xsd&quot;/&gt;\r\n            &lt;xs:import namespace=&quot;service.exampe.com/&quot; schemaLocation=&quot;setDataInQueue.xsd&quot;/&gt;\r\n        &lt;/xs:schema&gt;\r\n    &lt;/wsdl:types&gt;\r\n    &lt;wsdl:portType name=&quot;EhdProxyPort&quot;&gt;&lt;/wsdl:portType&gt;\r\n    &lt;wsdl:binding name=&quot;EhdProxyPortSoap11&quot; type=&quot;tns:EhdProxyPort&quot;&gt;\r\n        &lt;soap:binding style=&quot;document&quot; transport=&quot;schemas.xmlsoap.org/soap/http&quot;/&gt;\r\n    &lt;/wsdl:binding&gt;\r\n    &lt;wsdl:service name=&quot;EhdProxyService&quot;&gt;\r\n        &lt;wsdl:port binding=&quot;tns:EhdProxyPortSoap11&quot; name=&quot;EhdProxyPortSoap11&quot;&gt;\r\n            &lt;soap:address location=&quot;localhost:8080/ws&quot;/&gt;\r\n        &lt;/wsdl:port&gt;\r\n    &lt;/wsdl:service&gt;\r\n&lt;/wsdl:definitions&gt;\r\n```\r\n\r\nAs you can see, the final wsdls do not have any sections with operations and descriptions of requests/responses, according to which the customer could eventually generate a client to work with my proxy service.\r\n\r\nI have two endpoints:\r\nI had to split the endpoint into separate classes and declarations since they have a different namespace.\r\n\r\n`ProxyEndPoint`:\r\n```java\r\n@Endpoint\r\n@RequiredArgsConstructor\r\npublic class ProxyEndPoint {\r\n\r\n    public static final String BUS_NAMESPACE_URI = &quot;http...service.example.com/&quot;;\r\n\r\n    private final ConverterService converterService;\r\n    private final EhdService ehdService;\r\n\r\n    @ResponsePayload\r\n    @PayloadRoot(namespace = BUS_NAMESPACE_URI, localPart = &quot;setDataInQueue&quot;)\r\n    public SetDataInQueueResponse handleSetDataInQueue(@RequestPayload SetDataInQueue request) {\r\n        final var converted = this.converterService.convert(request);\r\n        return this.ehdService.callSetDataInQueue(converted);\r\n    }\r\n```\r\n\r\n`EhdProxyEndPoint`:\r\n```java\r\n@Endpoint\r\n@RequiredArgsConstructor\r\npublic class EhdProxyEndPoint {\r\n\r\n    public static final String EHD_NAMESPACE_URI = &quot;http...contractor.com/&quot;;\r\n\r\n    private final EhdService ehdService;\r\n\r\n    @ResponsePayload\r\n    @PayloadRoot(namespace = EHD_NAMESPACE_URI, localPart = &quot;setDataInResult&quot;)\r\n    public SetDataInResultResponse handleSetDataInResult(@RequestPayload SetDataInResult request) {\r\n        return this.ehdService.callSetDataInResult(request);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThese endpoints are configured according to [one of the examples](https://spring.io/guides/gs/producing-web-service/) of the main guides from Spring WebServices:\r\n\r\n`WebServiceConfig`:\r\n```java\r\n@EnableWs\r\n@Configuration\r\npublic class WebServiceConfig extends WsConfigurerAdapter {\r\n\r\n    @Bean\r\n    public ServletRegistrationBean&lt;MessageDispatcherServlet&gt; messageDispatcherServlet(ApplicationContext context) {\r\n        MessageDispatcherServlet servlet = new MessageDispatcherServlet();\r\n        servlet.setApplicationContext(context);\r\n        servlet.setTransformWsdlLocations(true);\r\n        return new ServletRegistrationBean&lt;&gt;(servlet, &quot;/ws/*&quot;);\r\n    }\r\n\r\n    @Bean(name = &quot;proxy&quot;)\r\n    public DefaultWsdl11Definition proxySchemaDefinition(XsdSchema proxySchema) {\r\n        DefaultWsdl11Definition definition = new DefaultWsdl11Definition();\r\n        definition.setServiceName(&quot;ProxyService&quot;);\r\n        definition.setPortTypeName(&quot;ProxyPort&quot;);\r\n        definition.setLocationUri(&quot;/ws&quot;);\r\n        definition.setTargetNamespace(ProxyEndPoint.BUS_NAMESPACE_URI);\r\n        definition.setSchema(proxySchema);\r\n        return definition;\r\n    }\r\n\r\n    @Bean(name = &quot;ehdproxy&quot;)\r\n    public DefaultWsdl11Definition ehdProxySchemaDefinition(XsdSchema proxySchema) {\r\n        DefaultWsdl11Definition definition = new DefaultWsdl11Definition();\r\n        definition.setServiceName(&quot;EhdProxyService&quot;);\r\n        definition.setPortTypeName(&quot;EhdProxyPort&quot;);\r\n        definition.setLocationUri(&quot;/ws&quot;);\r\n        definition.setTargetNamespace(EhdProxyEndPoint.EHD_NAMESPACE_URI);\r\n        definition.setSchema(proxySchema);\r\n        return definition;\r\n    }\r\n\r\n    @Bean\r\n    public XsdSchema proxySchema() {\r\n        return new SimpleXsdSchema(new ClassPathResource(&quot;/xsd/proxy.xsd&quot;));\r\n    }\r\n\r\n}\r\n```\r\n\r\n`resources/xsd/proxy.xsd`:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;xs:schema\r\n        ...\r\n        jaxb:version=&quot;3.0&quot;\r\n        elementFormDefault=&quot;qualified&quot;\r\n        attributeFormDefault=&quot;unqualified&quot;\r\n&gt;\r\n\r\n    &lt;xs:import schemaLocation=&quot;message.xsd&quot;/&gt;\r\n    &lt;xs:import namespace=&quot;service.example.com&quot; schemaLocation=&quot;setDataInQueue.xsd&quot;/&gt;\r\n\r\n&lt;/xs:schema&gt;\r\n```\r\n\r\n`resources/xsd/setDataInQueue.xsd`:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;xs:schema version=&quot;1.0&quot;\r\n           ...\r\n&gt;\r\n\r\n    &lt;xs:element name=&quot;setDataInQueue&quot; type=&quot;tns:setDataInQueue&quot;/&gt;\r\n\r\n    &lt;xs:complexType name=&quot;setDataInQueue&quot;&gt;\r\n        &lt;xs:sequence&gt;\r\n            &lt;xs:element name=&quot;FileName&quot; type=&quot;xs:string&quot;/&gt;\r\n            &lt;xs:element name=&quot;File&quot; type=&quot;xs:base64Binary&quot;/&gt;\r\n            &lt;xs:element name=&quot;Signature&quot; type=&quot;xs:base64Binary&quot;/&gt;\r\n        &lt;/xs:sequence&gt;\r\n    &lt;/xs:complexType&gt;\r\n\r\n&lt;/xs:schema&gt;\r\n```\r\n\r\n`/resources/xsd/message.xsd`\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n&lt;xs:schema version=&quot;1.0&quot;&gt;\r\n&lt;xs:element name=&quot;category&quot; type=&quot;categoryEntity&quot; /&gt;\r\n&lt;xs:element name=&quot;message&quot; type=&quot;messageEntity&quot; /&gt;\r\n&lt;xs:complexType name=&quot;messageEntity&quot;&gt;\r\n    &lt;xs:sequence&gt;\r\n        &lt;xs:element name=&quot;id&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot; /&gt;\r\n        &lt;xs:element name=&quot;catalog&quot; type=&quot;catalogEntity&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\r\n    &lt;/xs:sequence&gt;\r\n&lt;/xs:complexType&gt;\r\n&lt;xs:complexType name=&quot;catalogEntity&quot;&gt;\r\n    &lt;xs:sequence&gt;\r\n        &lt;xs:element name=&quot;item&quot; type=&quot;itemEntity&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\r\n    &lt;/xs:sequence&gt;\r\n    &lt;xs:attribute name=&quot;name&quot; type=&quot;xs:string&quot; /&gt;\r\n    &lt;xs:attribute name=&quot;parent_catalog_id&quot; type=&quot;xs:int&quot; /&gt;\r\n&lt;/xs:complexType&gt;\r\n&lt;xs:complexType name=&quot;itemEntity&quot;&gt;\r\n    &lt;xs:sequence&gt;\r\n        &lt;xs:element name=&quot;geodata&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot; /&gt;\r\n        &lt;xs:element name=&quot;categories&quot; minOccurs=&quot;0&quot;&gt;\r\n            &lt;xs:complexType&gt;\r\n                &lt;xs:sequence&gt;\r\n                    &lt;xs:element ref=&quot;category&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\r\n                &lt;/xs:sequence&gt;\r\n            &lt;/xs:complexType&gt;\r\n        &lt;/xs:element&gt;\r\n        &lt;xs:element name=&quot;data&quot; minOccurs=&quot;0&quot;&gt;\r\n            &lt;xs:complexType&gt;\r\n                &lt;xs:sequence&gt;\r\n                    &lt;xs:element name=&quot;attribute&quot; type=&quot;attributeEntity&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\r\n                &lt;/xs:sequence&gt;\r\n            &lt;/xs:complexType&gt;\r\n        &lt;/xs:element&gt;\r\n    &lt;/xs:sequence&gt;\r\n    &lt;xs:attribute name=&quot;action&quot; type=&quot;xs:string&quot; /&gt;\r\n    &lt;xs:attribute name=&quot;isManualGeo&quot; type=&quot;xs:boolean&quot; /&gt;\r\n&lt;/xs:complexType&gt;\r\n&lt;xs:complexType name=&quot;categoryEntity&quot;&gt;\r\n    &lt;xs:simpleContent&gt;\r\n        &lt;xs:extension base=&quot;xs:int&quot;&gt;\r\n            &lt;xs:attribute name=&quot;nameHier&quot; type=&quot;xs:string&quot; /&gt;\r\n        &lt;/xs:extension&gt;\r\n    &lt;/xs:simpleContent&gt;\r\n&lt;/xs:complexType&gt;\r\n&lt;xs:complexType name=&quot;attributeEntity&quot;&gt;\r\n    &lt;xs:sequence&gt;\r\n        &lt;xs:element name=&quot;values&quot; minOccurs=&quot;0&quot;&gt;\r\n            &lt;xs:complexType&gt;\r\n                &lt;xs:sequence&gt;\r\n                    &lt;xs:element name=&quot;value&quot; type=&quot;valueEntity&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\r\n                &lt;/xs:sequence&gt;\r\n            &lt;/xs:complexType&gt;\r\n        &lt;/xs:element&gt;\r\n    &lt;/xs:sequence&gt;\r\n    &lt;xs:attribute name=&quot;field_id&quot; type=&quot;xs:int&quot; /&gt;\r\n    &lt;xs:attribute name=&quot;type&quot; type=&quot;xs:string&quot; /&gt;\r\n    &lt;xs:attribute name=&quot;pk&quot; type=&quot;xs:string&quot; /&gt;\r\n    &lt;xs:attribute name=&quot;isManual&quot; type=&quot;xs:boolean&quot; /&gt;\r\n&lt;/xs:complexType&gt;\r\n&lt;xs:complexType name=&quot;valueEntity&quot;&gt;\r\n    &lt;xs:simpleContent&gt;\r\n        &lt;xs:extension base=&quot;xs:string&quot;&gt;\r\n            &lt;xs:attribute name=&quot;occurrence&quot; type=&quot;xs:int&quot; /&gt;\r\n        &lt;/xs:extension&gt;\r\n    &lt;/xs:simpleContent&gt;\r\n&lt;/xs:complexType&gt;\r\n&lt;/xs:schema&gt;\r\n```\r\n\r\n`resources/jxb/bindings.xjb` (for generate `@XMlRootElement` annotation):\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;jaxb:bindings version=&quot;3.0&quot;\r\n               ...\r\n               jaxb:extensionBindingPrefixes=&quot;xjc&quot;&gt;\r\n\r\n    &lt;jaxb:globalBindings generateElementProperty=&quot;false&quot; &gt;\r\n        &lt;xjc:simple/&gt;\r\n        &lt;xjc:serializable uid=&quot;-1&quot;/&gt;\r\n    &lt;/jaxb:globalBindings&gt;\r\n\r\n&lt;/jaxb:bindings&gt;\r\n```\r\n\r\nSince I need to proxy requests from another SOAP service, I use WSDL-based code generation using wsimport:\r\n\r\n```gradle\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.1.5&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n}\r\n\r\ngroup = &#39;com.group&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\n\r\njava {\r\n    sourceCompatibility = &#39;21&#39;\r\n}\r\n\r\next.jaxwsSourceDir = &quot;${buildDir}/generated/sources/jaxws&quot;\r\n\r\nconfigurations {\r\n    jaxb\r\n    jaxws\r\n    compileOnly {\r\n        extendsFrom annotationProcessor\r\n    }\r\n}\r\n\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDir &#39;src/main/java&#39;\r\n            srcDir &#39;build/generated/sources/jaxb&#39;\r\n            srcDir jaxwsSourceDir\r\n        }\r\n    }\r\n}\r\n\r\ntask genJaxb {\r\n    ext.sourcesDir = &quot;${buildDir}/generated/sources/jaxb&quot;\r\n    ext.schema = &quot;src/main/resources/xsd/proxy.xsd&quot;\r\n    ext.binding = &quot;src/main/resources/jxb/bindings.xjb&quot;\r\n\r\n    outputs.dir sourcesDir\r\n\r\n    doLast() {\r\n        project.ant {\r\n            taskdef name: &quot;xjc&quot;, classname: &quot;com.sun.tools.xjc.XJCTask&quot;,\r\n                    classpath: configurations.jaxb.asPath\r\n            mkdir(dir: sourcesDir)\r\n\r\n            xjc(destdir: sourcesDir, schema: schema, binding: ext.binding) {\r\n                arg(value: &quot;-wsdl&quot;)\r\n                produces(dir: sourcesDir, includes: &quot;**/*.java&quot;)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ntask wsimport {\r\n    System.setProperty(&#39;javax.xml.accessExternalSchema&#39;, &#39;all&#39;)\r\n    description = &#39;Generate classes from wsdl using wsimport&#39;\r\n\r\n    doLast {\r\n        project.mkdir(jaxwsSourceDir)\r\n        ant {\r\n            taskdef(name: &#39;wsimport&#39;,\r\n                    classname: &#39;com.sun.tools.ws.ant.WsImport&#39;,\r\n                    classpath: configurations.jaxws.asPath\r\n            )\r\n            wsimport(\r\n                    keep: true,\r\n                    destdir: jaxwsSourceDir,\r\n                    extension: &quot;true&quot;,\r\n                    verbose: true,\r\n                    wsdl: &quot;%WSDL LINK PLACEHOLDER%&quot;, // &lt;- WSDL contractor inserted here\r\n                    binding: &quot;${projectDir}/src/main/resources/jxb/bindings.xjb&quot;,\r\n                    xnocompile: true,\r\n                    package: &quot;contractor&quot;) {\r\n                xjcarg(value: &quot;-XautoNameResolution&quot;)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ncompileJava.dependsOn genJaxb, wsimport\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web-services&#39;\r\n\r\n    // support xml/xsd/wsdl\r\n    implementation &#39;wsdl4j:wsdl4j&#39;\r\n    implementation &#39;com.sun.xml.ws:rt:4.0.2&#39;\r\n\r\n    jaxb(&#39;org.glassfish.jaxb:jaxb-xjc:4.0.4&#39;)\r\n    jaxb(&#39;org.glassfish.jaxb:jaxb-core:4.0.4&#39;)\r\n    jaxb(&#39;org.glassfish.jaxb:jaxb-runtime:4.0.4&#39;)\r\n\r\n    jaxws &#39;com.sun.xml.ws:jaxws-tools:4.0.2&#39;,\r\n            &#39;jakarta.xml.ws:jakarta.xml.ws-api:3.0.0&#39;,\r\n            &#39;jakarta.xml.bind:jakarta.xml.bind-api:4.0.1&#39;,\r\n            &#39;jakarta.activation:jakarta.activation-api:2.1.2&#39;,\r\n            &#39;com.sun.xml.ws:jaxws-rt:4.0.2&#39;\r\n   \r\n    // dev / test utils ...\r\n}\r\n```\r\n\r\n\r\nI have been developing a SOAP service quite recently and have studied a lot of guides when trying to solve the problem, but I have not been able to achieve results.\r\nI would also like to note that I get an error when trying to import my SOAP service into SoapUI:\r\n\r\nError loading [http://localhost:8080/ws/message.xsd]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: Premature end of file","title":"How to generate WSDL based on another SOAP service?","body":"<p>I am developing a SOAP service based on <code>Spring WebServices</code>, which, according to a business task, must proxy a <code>SOAP</code> request through itself.</p>\n<p>My problem is that I can't get a correctly generated WSDL at the output, which I could give to the customer, since in fact there is almost no description of elements in my main xsd due to the fact that I use a generated SOAP service, objects from which participate in @RequestPayload and @ResponsePayload. The only elements added by my service are <code>setDataInQueue</code> and <code>message</code> (currently not used, but will be needed later).</p>\n<p>Due to the large number of links in the xsd file, I could not publish my question, as it was marked as spam, so I had to omit them.</p>\n<p>Generated WSDL on <code>localhost:8080/ws/proxy.wsdl</code>:</p>\n<pre><code>&lt;wsdl:definitions ...&gt;\n    &lt;wsdl:types&gt;\n        &lt;xs:schema ...&gt;\n            &lt;xs:import schemaLocation=&quot;message.xsd&quot;/&gt;\n            &lt;xs:import namespace=&quot;http://service.example.com/&quot; schemaLocation=&quot;setDataInQueue.xsd&quot;/&gt;\n        &lt;/xs:schema&gt;\n    &lt;/wsdl:types&gt;\n    &lt;wsdl:portType name=&quot;ProxyPort&quot;&gt;&lt;/wsdl:portType&gt;\n    &lt;wsdl:binding name=&quot;ProxyPortSoap11&quot; type=&quot;tns:ProxyPort&quot;&gt;\n        &lt;soap:binding style=&quot;document&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot;/&gt;\n    &lt;/wsdl:binding&gt;\n    &lt;wsdl:service name=&quot;ProxyService&quot;&gt;\n        &lt;wsdl:port binding=&quot;tns:ProxyPortSoap11&quot; name=&quot;ProxyPortSoap11&quot;&gt;\n            &lt;soap:address location=&quot;http://localhost:8080/ws&quot;/&gt;\n        &lt;/wsdl:port&gt;\n    &lt;/wsdl:service&gt;\n&lt;/wsdl:definitions&gt;\n</code></pre>\n<p>Generated WSDL on <code>localhost:8080/ws/ehdproxy.wsdl</code>:</p>\n<pre><code>&lt;wsdl:definitions ... &gt;\n    &lt;wsdl:types&gt;\n        &lt;xs:schema ...&gt;\n            &lt;xs:import schemaLocation=&quot;message.xsd&quot;/&gt;\n            &lt;xs:import namespace=&quot;service.exampe.com/&quot; schemaLocation=&quot;setDataInQueue.xsd&quot;/&gt;\n        &lt;/xs:schema&gt;\n    &lt;/wsdl:types&gt;\n    &lt;wsdl:portType name=&quot;EhdProxyPort&quot;&gt;&lt;/wsdl:portType&gt;\n    &lt;wsdl:binding name=&quot;EhdProxyPortSoap11&quot; type=&quot;tns:EhdProxyPort&quot;&gt;\n        &lt;soap:binding style=&quot;document&quot; transport=&quot;schemas.xmlsoap.org/soap/http&quot;/&gt;\n    &lt;/wsdl:binding&gt;\n    &lt;wsdl:service name=&quot;EhdProxyService&quot;&gt;\n        &lt;wsdl:port binding=&quot;tns:EhdProxyPortSoap11&quot; name=&quot;EhdProxyPortSoap11&quot;&gt;\n            &lt;soap:address location=&quot;localhost:8080/ws&quot;/&gt;\n        &lt;/wsdl:port&gt;\n    &lt;/wsdl:service&gt;\n&lt;/wsdl:definitions&gt;\n</code></pre>\n<p>As you can see, the final wsdls do not have any sections with operations and descriptions of requests/responses, according to which the customer could eventually generate a client to work with my proxy service.</p>\n<p>I have two endpoints:\nI had to split the endpoint into separate classes and declarations since they have a different namespace.</p>\n<p><code>ProxyEndPoint</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Endpoint\n@RequiredArgsConstructor\npublic class ProxyEndPoint {\n\n    public static final String BUS_NAMESPACE_URI = &quot;http...service.example.com/&quot;;\n\n    private final ConverterService converterService;\n    private final EhdService ehdService;\n\n    @ResponsePayload\n    @PayloadRoot(namespace = BUS_NAMESPACE_URI, localPart = &quot;setDataInQueue&quot;)\n    public SetDataInQueueResponse handleSetDataInQueue(@RequestPayload SetDataInQueue request) {\n        final var converted = this.converterService.convert(request);\n        return this.ehdService.callSetDataInQueue(converted);\n    }\n</code></pre>\n<p><code>EhdProxyEndPoint</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Endpoint\n@RequiredArgsConstructor\npublic class EhdProxyEndPoint {\n\n    public static final String EHD_NAMESPACE_URI = &quot;http...contractor.com/&quot;;\n\n    private final EhdService ehdService;\n\n    @ResponsePayload\n    @PayloadRoot(namespace = EHD_NAMESPACE_URI, localPart = &quot;setDataInResult&quot;)\n    public SetDataInResultResponse handleSetDataInResult(@RequestPayload SetDataInResult request) {\n        return this.ehdService.callSetDataInResult(request);\n    }\n\n}\n</code></pre>\n<p>These endpoints are configured according to <a href=\"https://spring.io/guides/gs/producing-web-service/\" rel=\"nofollow noreferrer\">one of the examples</a> of the main guides from Spring WebServices:</p>\n<p><code>WebServiceConfig</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWs\n@Configuration\npublic class WebServiceConfig extends WsConfigurerAdapter {\n\n    @Bean\n    public ServletRegistrationBean&lt;MessageDispatcherServlet&gt; messageDispatcherServlet(ApplicationContext context) {\n        MessageDispatcherServlet servlet = new MessageDispatcherServlet();\n        servlet.setApplicationContext(context);\n        servlet.setTransformWsdlLocations(true);\n        return new ServletRegistrationBean&lt;&gt;(servlet, &quot;/ws/*&quot;);\n    }\n\n    @Bean(name = &quot;proxy&quot;)\n    public DefaultWsdl11Definition proxySchemaDefinition(XsdSchema proxySchema) {\n        DefaultWsdl11Definition definition = new DefaultWsdl11Definition();\n        definition.setServiceName(&quot;ProxyService&quot;);\n        definition.setPortTypeName(&quot;ProxyPort&quot;);\n        definition.setLocationUri(&quot;/ws&quot;);\n        definition.setTargetNamespace(ProxyEndPoint.BUS_NAMESPACE_URI);\n        definition.setSchema(proxySchema);\n        return definition;\n    }\n\n    @Bean(name = &quot;ehdproxy&quot;)\n    public DefaultWsdl11Definition ehdProxySchemaDefinition(XsdSchema proxySchema) {\n        DefaultWsdl11Definition definition = new DefaultWsdl11Definition();\n        definition.setServiceName(&quot;EhdProxyService&quot;);\n        definition.setPortTypeName(&quot;EhdProxyPort&quot;);\n        definition.setLocationUri(&quot;/ws&quot;);\n        definition.setTargetNamespace(EhdProxyEndPoint.EHD_NAMESPACE_URI);\n        definition.setSchema(proxySchema);\n        return definition;\n    }\n\n    @Bean\n    public XsdSchema proxySchema() {\n        return new SimpleXsdSchema(new ClassPathResource(&quot;/xsd/proxy.xsd&quot;));\n    }\n\n}\n</code></pre>\n<p><code>resources/xsd/proxy.xsd</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xs:schema\n        ...\n        jaxb:version=&quot;3.0&quot;\n        elementFormDefault=&quot;qualified&quot;\n        attributeFormDefault=&quot;unqualified&quot;\n&gt;\n\n    &lt;xs:import schemaLocation=&quot;message.xsd&quot;/&gt;\n    &lt;xs:import namespace=&quot;service.example.com&quot; schemaLocation=&quot;setDataInQueue.xsd&quot;/&gt;\n\n&lt;/xs:schema&gt;\n</code></pre>\n<p><code>resources/xsd/setDataInQueue.xsd</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;xs:schema version=&quot;1.0&quot;\n           ...\n&gt;\n\n    &lt;xs:element name=&quot;setDataInQueue&quot; type=&quot;tns:setDataInQueue&quot;/&gt;\n\n    &lt;xs:complexType name=&quot;setDataInQueue&quot;&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=&quot;FileName&quot; type=&quot;xs:string&quot;/&gt;\n            &lt;xs:element name=&quot;File&quot; type=&quot;xs:base64Binary&quot;/&gt;\n            &lt;xs:element name=&quot;Signature&quot; type=&quot;xs:base64Binary&quot;/&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n\n&lt;/xs:schema&gt;\n</code></pre>\n<p><code>/resources/xsd/message.xsd</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;xs:schema version=&quot;1.0&quot;&gt;\n&lt;xs:element name=&quot;category&quot; type=&quot;categoryEntity&quot; /&gt;\n&lt;xs:element name=&quot;message&quot; type=&quot;messageEntity&quot; /&gt;\n&lt;xs:complexType name=&quot;messageEntity&quot;&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=&quot;id&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot; /&gt;\n        &lt;xs:element name=&quot;catalog&quot; type=&quot;catalogEntity&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:complexType name=&quot;catalogEntity&quot;&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=&quot;item&quot; type=&quot;itemEntity&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\n    &lt;/xs:sequence&gt;\n    &lt;xs:attribute name=&quot;name&quot; type=&quot;xs:string&quot; /&gt;\n    &lt;xs:attribute name=&quot;parent_catalog_id&quot; type=&quot;xs:int&quot; /&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:complexType name=&quot;itemEntity&quot;&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=&quot;geodata&quot; type=&quot;xs:string&quot; minOccurs=&quot;0&quot; /&gt;\n        &lt;xs:element name=&quot;categories&quot; minOccurs=&quot;0&quot;&gt;\n            &lt;xs:complexType&gt;\n                &lt;xs:sequence&gt;\n                    &lt;xs:element ref=&quot;category&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\n                &lt;/xs:sequence&gt;\n            &lt;/xs:complexType&gt;\n        &lt;/xs:element&gt;\n        &lt;xs:element name=&quot;data&quot; minOccurs=&quot;0&quot;&gt;\n            &lt;xs:complexType&gt;\n                &lt;xs:sequence&gt;\n                    &lt;xs:element name=&quot;attribute&quot; type=&quot;attributeEntity&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\n                &lt;/xs:sequence&gt;\n            &lt;/xs:complexType&gt;\n        &lt;/xs:element&gt;\n    &lt;/xs:sequence&gt;\n    &lt;xs:attribute name=&quot;action&quot; type=&quot;xs:string&quot; /&gt;\n    &lt;xs:attribute name=&quot;isManualGeo&quot; type=&quot;xs:boolean&quot; /&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:complexType name=&quot;categoryEntity&quot;&gt;\n    &lt;xs:simpleContent&gt;\n        &lt;xs:extension base=&quot;xs:int&quot;&gt;\n            &lt;xs:attribute name=&quot;nameHier&quot; type=&quot;xs:string&quot; /&gt;\n        &lt;/xs:extension&gt;\n    &lt;/xs:simpleContent&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:complexType name=&quot;attributeEntity&quot;&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:element name=&quot;values&quot; minOccurs=&quot;0&quot;&gt;\n            &lt;xs:complexType&gt;\n                &lt;xs:sequence&gt;\n                    &lt;xs:element name=&quot;value&quot; type=&quot;valueEntity&quot; minOccurs=&quot;0&quot; maxOccurs=&quot;unbounded&quot; /&gt;\n                &lt;/xs:sequence&gt;\n            &lt;/xs:complexType&gt;\n        &lt;/xs:element&gt;\n    &lt;/xs:sequence&gt;\n    &lt;xs:attribute name=&quot;field_id&quot; type=&quot;xs:int&quot; /&gt;\n    &lt;xs:attribute name=&quot;type&quot; type=&quot;xs:string&quot; /&gt;\n    &lt;xs:attribute name=&quot;pk&quot; type=&quot;xs:string&quot; /&gt;\n    &lt;xs:attribute name=&quot;isManual&quot; type=&quot;xs:boolean&quot; /&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:complexType name=&quot;valueEntity&quot;&gt;\n    &lt;xs:simpleContent&gt;\n        &lt;xs:extension base=&quot;xs:string&quot;&gt;\n            &lt;xs:attribute name=&quot;occurrence&quot; type=&quot;xs:int&quot; /&gt;\n        &lt;/xs:extension&gt;\n    &lt;/xs:simpleContent&gt;\n&lt;/xs:complexType&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p><code>resources/jxb/bindings.xjb</code> (for generate <code>@XMlRootElement</code> annotation):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;jaxb:bindings version=&quot;3.0&quot;\n               ...\n               jaxb:extensionBindingPrefixes=&quot;xjc&quot;&gt;\n\n    &lt;jaxb:globalBindings generateElementProperty=&quot;false&quot; &gt;\n        &lt;xjc:simple/&gt;\n        &lt;xjc:serializable uid=&quot;-1&quot;/&gt;\n    &lt;/jaxb:globalBindings&gt;\n\n&lt;/jaxb:bindings&gt;\n</code></pre>\n<p>Since I need to proxy requests from another SOAP service, I use WSDL-based code generation using wsimport:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.5'\n    id 'io.spring.dependency-management' version '1.1.3'\n}\n\ngroup = 'com.group'\nversion = '0.0.1-SNAPSHOT'\n\njava {\n    sourceCompatibility = '21'\n}\n\next.jaxwsSourceDir = &quot;${buildDir}/generated/sources/jaxws&quot;\n\nconfigurations {\n    jaxb\n    jaxws\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nsourceSets {\n    main {\n        java {\n            srcDir 'src/main/java'\n            srcDir 'build/generated/sources/jaxb'\n            srcDir jaxwsSourceDir\n        }\n    }\n}\n\ntask genJaxb {\n    ext.sourcesDir = &quot;${buildDir}/generated/sources/jaxb&quot;\n    ext.schema = &quot;src/main/resources/xsd/proxy.xsd&quot;\n    ext.binding = &quot;src/main/resources/jxb/bindings.xjb&quot;\n\n    outputs.dir sourcesDir\n\n    doLast() {\n        project.ant {\n            taskdef name: &quot;xjc&quot;, classname: &quot;com.sun.tools.xjc.XJCTask&quot;,\n                    classpath: configurations.jaxb.asPath\n            mkdir(dir: sourcesDir)\n\n            xjc(destdir: sourcesDir, schema: schema, binding: ext.binding) {\n                arg(value: &quot;-wsdl&quot;)\n                produces(dir: sourcesDir, includes: &quot;**/*.java&quot;)\n            }\n        }\n    }\n}\n\ntask wsimport {\n    System.setProperty('javax.xml.accessExternalSchema', 'all')\n    description = 'Generate classes from wsdl using wsimport'\n\n    doLast {\n        project.mkdir(jaxwsSourceDir)\n        ant {\n            taskdef(name: 'wsimport',\n                    classname: 'com.sun.tools.ws.ant.WsImport',\n                    classpath: configurations.jaxws.asPath\n            )\n            wsimport(\n                    keep: true,\n                    destdir: jaxwsSourceDir,\n                    extension: &quot;true&quot;,\n                    verbose: true,\n                    wsdl: &quot;%WSDL LINK PLACEHOLDER%&quot;, // &lt;- WSDL contractor inserted here\n                    binding: &quot;${projectDir}/src/main/resources/jxb/bindings.xjb&quot;,\n                    xnocompile: true,\n                    package: &quot;contractor&quot;) {\n                xjcarg(value: &quot;-XautoNameResolution&quot;)\n            }\n        }\n    }\n}\n\ncompileJava.dependsOn genJaxb, wsimport\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web-services'\n\n    // support xml/xsd/wsdl\n    implementation 'wsdl4j:wsdl4j'\n    implementation 'com.sun.xml.ws:rt:4.0.2'\n\n    jaxb('org.glassfish.jaxb:jaxb-xjc:4.0.4')\n    jaxb('org.glassfish.jaxb:jaxb-core:4.0.4')\n    jaxb('org.glassfish.jaxb:jaxb-runtime:4.0.4')\n\n    jaxws 'com.sun.xml.ws:jaxws-tools:4.0.2',\n            'jakarta.xml.ws:jakarta.xml.ws-api:3.0.0',\n            'jakarta.xml.bind:jakarta.xml.bind-api:4.0.1',\n            'jakarta.activation:jakarta.activation-api:2.1.2',\n            'com.sun.xml.ws:jaxws-rt:4.0.2'\n   \n    // dev / test utils ...\n}\n</code></pre>\n<p>I have been developing a SOAP service quite recently and have studied a lot of guides when trying to solve the problem, but I have not been able to achieve results.\nI would also like to note that I get an error when trying to import my SOAP service into SoapUI:</p>\n<p>Error loading [http://localhost:8080/ws/message.xsd]: org.apache.xmlbeans.XmlException: org.apache.xmlbeans.XmlException: error: Premature end of file</p>\n"},{"tags":["java","ios","xpath","appium","selenide"],"owner":{"account_id":7495666,"reputation":300,"user_id":6468436,"display_name":"User1751"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1699007470,"creation_date":1699006840,"question_id":77415870,"body_markdown":"I am encountering a perplexing issue with XPath evaluation in the context of SelenideAppium for an iOS application. A direct XPath query executes and retrieves the value as expected, but when I attempt to replicate the query by chaining calls on a SelenideAppiumElement, the result isn&#39;t the same.\r\n\r\nThe following direct XPath call retrieves the value successfully:\r\n\r\n    $x(&quot;//XCUIElementTypeStaticText[@name=&#39;&quot;+accountName+&quot;&#39;]/following-sibling::XCUIElementTypeStaticText[1]&quot;).getValue()\r\n\r\nHowever, the same logic, when applied using a SelenideAppiumElement obtained from a utility method in our framework, does not return the expected value:\r\n\r\nVariant 1:\r\n\r\n    SelenideAppiumElement accountNameElement = BaseUtils.findElementByTagName(accountName);\r\n    accountNameElement.$x(&quot;./following-sibling::XCUIElementTypeStaticText[1]&quot;).getValue()\r\n\r\nVariant 2:\r\n\r\n    SelenideAppiumElement accountNameElement = BaseUtils.findElementByTagName(accountName);\r\n    accountNameElement.sibling(0).getValue()\r\n\r\n\r\nFor some reason, neither Variant 1 nor Variant 2 returns the value I obtain with the direct XPath call. The findElementByTagName method is supposed to return a SelenideAppiumElement corresponding to the specified tag name, which in turn should allow for further traversal using XPath.\r\nI only get Method threw &#39;com.codeborne.selenide.ex.ElementNotFound&#39; exception.\r\n\r\nI&#39;m looking for insights into why chaining calls on the SelenideAppiumElement does not yield the same result as the direct XPath query. Has anyone else faced this issue or can offer some advice on what might be going wrong?\r\n\r\nThis is the method findELementByTagName\r\n\r\n     public static SelenideAppiumElement findElementByTagName(String tagName) {\r\n        return $(AppiumBy.name(tagName));\r\n    }","title":"Direct XPath works but not when chaining XPath on a SelenideElement in Appium","body":"<p>I am encountering a perplexing issue with XPath evaluation in the context of SelenideAppium for an iOS application. A direct XPath query executes and retrieves the value as expected, but when I attempt to replicate the query by chaining calls on a SelenideAppiumElement, the result isn't the same.</p>\n<p>The following direct XPath call retrieves the value successfully:</p>\n<pre><code>$x(&quot;//XCUIElementTypeStaticText[@name='&quot;+accountName+&quot;']/following-sibling::XCUIElementTypeStaticText[1]&quot;).getValue()\n</code></pre>\n<p>However, the same logic, when applied using a SelenideAppiumElement obtained from a utility method in our framework, does not return the expected value:</p>\n<p>Variant 1:</p>\n<pre><code>SelenideAppiumElement accountNameElement = BaseUtils.findElementByTagName(accountName);\naccountNameElement.$x(&quot;./following-sibling::XCUIElementTypeStaticText[1]&quot;).getValue()\n</code></pre>\n<p>Variant 2:</p>\n<pre><code>SelenideAppiumElement accountNameElement = BaseUtils.findElementByTagName(accountName);\naccountNameElement.sibling(0).getValue()\n</code></pre>\n<p>For some reason, neither Variant 1 nor Variant 2 returns the value I obtain with the direct XPath call. The findElementByTagName method is supposed to return a SelenideAppiumElement corresponding to the specified tag name, which in turn should allow for further traversal using XPath.\nI only get Method threw 'com.codeborne.selenide.ex.ElementNotFound' exception.</p>\n<p>I'm looking for insights into why chaining calls on the SelenideAppiumElement does not yield the same result as the direct XPath query. Has anyone else faced this issue or can offer some advice on what might be going wrong?</p>\n<p>This is the method findELementByTagName</p>\n<pre><code> public static SelenideAppiumElement findElementByTagName(String tagName) {\n    return $(AppiumBy.name(tagName));\n}\n</code></pre>\n"},{"tags":["java","stripe-payments"],"comments":[{"owner":{"account_id":21427599,"reputation":1585,"user_id":15784650,"display_name":"Jonathan Steele"},"score":0,"creation_date":1699008065,"post_id":77415912,"comment_id":136479477,"body_markdown":"Where is your Android code that calls your `/payment-sheet` endpoint? Have you adding any logging to understand why your creation request is failing? Equally, check the logs on your [Dashboard](https://dashboard.stripe.com/logs) as there may be signs of failing API requests there.","body":"Where is your Android code that calls your <code>&#47;payment-sheet</code> endpoint? Have you adding any logging to understand why your creation request is failing? Equally, check the logs on your <a href=\"https://dashboard.stripe.com/logs\" rel=\"nofollow noreferrer\">Dashboard</a> as there may be signs of failing API requests there."},{"owner":{"account_id":26092932,"reputation":25,"user_id":19789491,"display_name":"H&#229;kan Troberg"},"score":0,"creation_date":1699008496,"post_id":77415912,"comment_id":136479549,"body_markdown":"@JonathanSteele The android code is only a post request to the server and then reads the clientsecret as result. Thanks for letting me know about the dashboard logs, I checked and it&#39;s completely empty. It&#39;s hard to add any logging because the program gets stuck at paymentIntent.create()","body":"@JonathanSteele The android code is only a post request to the server and then reads the clientsecret as result. Thanks for letting me know about the dashboard logs, I checked and it&#39;s completely empty. It&#39;s hard to add any logging because the program gets stuck at paymentIntent.create()"},{"owner":{"account_id":13542367,"reputation":5838,"user_id":9769731,"display_name":"karllekko"},"score":0,"creation_date":1699031628,"post_id":77415912,"comment_id":136484485,"body_markdown":"Add a try/catch and see what error/exception is happening when that line is reached. https://www.javatpoint.com/try-catch-block // https://stripe.com/docs/api/errors/handling?lang=java","body":"Add a try/catch and see what error/exception is happening when that line is reached. <a href=\"https://www.javatpoint.com/try-catch-block\" rel=\"nofollow noreferrer\">javatpoint.com/try-catch-block</a> // <a href=\"https://stripe.com/docs/api/errors/handling?lang=java\" rel=\"nofollow noreferrer\">stripe.com/docs/api/errors/handling?lang=java</a>"}],"owner":{"account_id":26092932,"reputation":25,"user_id":19789491,"display_name":"H&#229;kan Troberg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699007304,"creation_date":1699007304,"question_id":77415912,"body_markdown":"I&#39;m trying to get a basic setup of a server which accepts payments using Stripe. I&#39;m following this tutorial: https://stripe.com/docs/payments/accept-a-payment?platform=android&amp;ui=custom#android-google-pay   My server is written in Java and the client is in Android.\r\n\r\nI understand that the server has to create a paymentintent and send a client secret associated with the paymentintent to the client. The problem I&#39;m facing is that `PaymentIntent.create()` gets stuck, and I don&#39;t know why. Here&#39;s the entire server program.\r\n\r\n    public static void main( String[] args )\r\n    {\r\n        post(&quot;/payment-sheet&quot;, (request, response) -&gt; {\r\n            Stripe.apiKey = &quot;TESTSECRETKEY&quot;;\r\n            System.out.println(&quot;1&quot;);\r\n            PaymentIntentCreateParams params =\r\n            PaymentIntentCreateParams.builder()\r\n                .setAmount(1099L)\r\n                .setCurrency(&quot;sek&quot;)\r\n                .addPaymentMethodType(&quot;card&quot;)\r\n                .build();\r\n            System.out.println(&quot;2&quot;);\r\n    \r\n            PaymentIntent intent = PaymentIntent.create(params); /*The program doesn&#39;t get past this line */\r\n            System.out.println(&quot;3&quot;);\r\n    \r\n            String clientSecret = intent.getClientSecret();\r\n            System.out.println(&quot;4&quot;);\r\n            System.out.println(clientSecret);\r\n    \r\n            Map&lt;String, String&gt; responseData = new HashMap();\r\n            responseData.put(&quot;paymentIntent&quot;, clientSecret);\r\n            Gson gson = new Gson();\r\n            return gson.toJson(responseData);\r\n        });\r\n    }\r\n\r\n","title":"Stripe - Can&#39;t create payment intent","body":"<p>I'm trying to get a basic setup of a server which accepts payments using Stripe. I'm following this tutorial: <a href=\"https://stripe.com/docs/payments/accept-a-payment?platform=android&amp;ui=custom#android-google-pay\" rel=\"nofollow noreferrer\">https://stripe.com/docs/payments/accept-a-payment?platform=android&amp;ui=custom#android-google-pay</a>   My server is written in Java and the client is in Android.</p>\n<p>I understand that the server has to create a paymentintent and send a client secret associated with the paymentintent to the client. The problem I'm facing is that <code>PaymentIntent.create()</code> gets stuck, and I don't know why. Here's the entire server program.</p>\n<pre><code>public static void main( String[] args )\n{\n    post(&quot;/payment-sheet&quot;, (request, response) -&gt; {\n        Stripe.apiKey = &quot;TESTSECRETKEY&quot;;\n        System.out.println(&quot;1&quot;);\n        PaymentIntentCreateParams params =\n        PaymentIntentCreateParams.builder()\n            .setAmount(1099L)\n            .setCurrency(&quot;sek&quot;)\n            .addPaymentMethodType(&quot;card&quot;)\n            .build();\n        System.out.println(&quot;2&quot;);\n\n        PaymentIntent intent = PaymentIntent.create(params); /*The program doesn't get past this line */\n        System.out.println(&quot;3&quot;);\n\n        String clientSecret = intent.getClientSecret();\n        System.out.println(&quot;4&quot;);\n        System.out.println(clientSecret);\n\n        Map&lt;String, String&gt; responseData = new HashMap();\n        responseData.put(&quot;paymentIntent&quot;, clientSecret);\n        Gson gson = new Gson();\n        return gson.toJson(responseData);\n    });\n}\n</code></pre>\n"},{"tags":["java","string","csv","carriage-return","replaceall"],"comments":[{"owner":{"account_id":1413789,"reputation":61252,"user_id":1553090,"accept_rate":89,"display_name":"paddy"},"score":0,"creation_date":1698978817,"post_id":77413864,"comment_id":136476209,"body_markdown":"_&quot;is the fieldSet.readString is the issue?&quot;_ -- you can test that by removing the `replaceAll` call and examining the contents of the returned string.","body":"<i>&quot;is the fieldSet.readString is the issue?&quot;</i> -- you can test that by removing the <code>replaceAll</code> call and examining the contents of the returned string."},{"owner":{"account_id":9502650,"reputation":1,"user_id":7063172,"display_name":"raksha n"},"score":0,"creation_date":1698979222,"post_id":77413864,"comment_id":136476232,"body_markdown":"i did this and contents is exactly same , the one i give dummy and the one i read from readString.","body":"i did this and contents is exactly same , the one i give dummy and the one i read from readString."},{"owner":{"account_id":1413789,"reputation":61252,"user_id":1553090,"accept_rate":89,"display_name":"paddy"},"score":1,"creation_date":1698979349,"post_id":77413864,"comment_id":136476243,"body_markdown":"How are you testing the contents? Did you set a breakpoint in your debugger and look at the memory? Does your file literally contain the text `\\r\\n`, or are you simply using that notation to describe the non-printable characters?","body":"How are you testing the contents? Did you set a breakpoint in your debugger and look at the memory? Does your file literally contain the text <code>\\r\\n</code>, or are you simply using that notation to describe the non-printable characters?"},{"owner":{"account_id":9502650,"reputation":1,"user_id":7063172,"display_name":"raksha n"},"score":0,"creation_date":1698979589,"post_id":77413864,"comment_id":136476261,"body_markdown":"my file contains \\r\\n, tested by printing the SOP/logs","body":"my file contains \\r\\n, tested by printing the SOP/logs"},{"owner":{"account_id":1413789,"reputation":61252,"user_id":1553090,"accept_rate":89,"display_name":"paddy"},"score":1,"creation_date":1698979726,"post_id":77413864,"comment_id":136476270,"body_markdown":"Try `.replaceAll(&quot;\\\\r\\\\n&quot;,&quot;\\n&quot;);` -- I think you&#39;re confusing your file&#39;s contents with Java&#39;s string literal parsing, which turns `\\r\\n` into the CR and LF control codes. The string you read from file undergoes no such parsing, so you should escape the backslash character because you are trying to match a literal backslash character.","body":"Try <code>.replaceAll(&quot;\\\\r\\\\n&quot;,&quot;\\n&quot;);</code> -- I think you&#39;re confusing your file&#39;s contents with Java&#39;s string literal parsing, which turns <code>\\r\\n</code> into the CR and LF control codes. The string you read from file undergoes no such parsing, so you should escape the backslash character because you are trying to match a literal backslash character."},{"owner":{"account_id":9502650,"reputation":1,"user_id":7063172,"display_name":"raksha n"},"score":0,"creation_date":1698980921,"post_id":77413864,"comment_id":136476363,"body_markdown":"Finally worked...Thank you so much...\ni tried &#39;.replaceAll(&quot;\\\\r\\\\n&quot;,&quot;\\n&quot;); &#39; did not replace the \\r\\n but as a combination to try different i tried this &#39;.replace(&quot;\\\\r\\\\n&quot;,&quot;\\n&quot;);&#39; it worked. Not really sure about why...","body":"Finally worked...Thank you so much... i tried &#39;.replaceAll(&quot;\\\\r\\\\n&quot;,&quot;\\n&quot;); &#39; did not replace the \\r\\n but as a combination to try different i tried this &#39;.replace(&quot;\\\\r\\\\n&quot;,&quot;\\n&quot;);&#39; it worked. Not really sure about why..."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1698981114,"post_id":77413864,"comment_id":136476380,"body_markdown":"@rakshan `replaceAll(&quot;\\\\r\\\\n&quot;, &quot;\\n&quot;)` interprets the search term as regex, and in regex `\\\\r` is  interpreted as `\\r`, but  `replace()` uses plain text. You will probably find that `replaceAll(&quot;\\\\\\\\r\\\\\\\\n&quot;, &quot;\\n&quot;)` works.","body":"@rakshan <code>replaceAll(&quot;\\\\r\\\\n&quot;, &quot;\\n&quot;)</code> interprets the search term as regex, and in regex <code>\\\\r</code> is  interpreted as <code>\\r</code>, but  <code>replace()</code> uses plain text. You will probably find that <code>replaceAll(&quot;\\\\\\\\r\\\\\\\\n&quot;, &quot;\\n&quot;)</code> works."},{"owner":{"account_id":9502650,"reputation":1,"user_id":7063172,"display_name":"raksha n"},"score":0,"creation_date":1698981296,"post_id":77413864,"comment_id":136476394,"body_markdown":"but somehow its not...any idea? works only for replace\nmay be due to multiple spaces or multple \\n","body":"but somehow its not...any idea? works only for replace may be due to multiple spaces or multple \\n"},{"owner":{"account_id":9502650,"reputation":1,"user_id":7063172,"display_name":"raksha n"},"score":0,"creation_date":1698981478,"post_id":77413864,"comment_id":136476415,"body_markdown":"@Bohemian understood , i tried the replaceAll you mentioned, it worked also.\nThanks for the explaination","body":"@Bohemian understood , i tried the replaceAll you mentioned, it worked also. Thanks for the explaination"},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1699008909,"post_id":77413864,"comment_id":136479623,"body_markdown":"since `replaceAll()`&#39;s input is a regular expression, check [Backslashes, escapes, and quoting](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html#bs)  - but using a regular expression is kind of an *overkill* here, `replace()`, which does not use regular expression, would be sufficient","body":"since <code>replaceAll()</code>&#39;s input is a regular expression, check <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/regex/Pattern.html#bs\" rel=\"nofollow noreferrer\">Backslashes, escapes, and quoting</a>  - but using a regular expression is kind of an <i>overkill</i> here, <code>replace()</code>, which does not use regular expression, would be sufficient"}],"answers":[{"comments":[{"owner":{"account_id":187094,"reputation":5113,"user_id":424903,"display_name":"Gimby"},"score":1,"creation_date":1699006829,"post_id":77415817,"comment_id":136479280,"body_markdown":"Of course regex is completely unnecessary here, just use replace().","body":"Of course regex is completely unnecessary here, just use replace()."}],"tags":[],"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699006387,"creation_date":1699006387,"answer_id":77415817,"question_id":77413864,"body_markdown":"You&#39;re saying that ```the text from my file ben_feature = &quot;Testing \\r\\n working \\r\\n&quot;``` which makes me assume that your text actually contains the ```\\r\\n``` as text. So instead of the control symbols for carriage return and line feed there is a character ```\\``` followed by a character ```r``` and so on. That will not be picked up by your replace.\r\n\r\nIf you want to convert these occurences into actual ```\\n``` you would have to escape the ```\\``` like this: ```\\\\```.\r\n\r\nSo your code should then read\r\n\r\n    BenFeature = fieldSet.readString(&quot;ben_feature&quot;).replaceAll(&quot;\\\\r\\\\n&quot;,&quot;\\n&quot;);","title":"replace \\r\\n with \\n so can have next line","body":"<p>You're saying that <code>the text from my file ben_feature = &quot;Testing \\r\\n working \\r\\n&quot;</code> which makes me assume that your text actually contains the <code>\\r\\n</code> as text. So instead of the control symbols for carriage return and line feed there is a character <code>\\</code> followed by a character <code>r</code> and so on. That will not be picked up by your replace.</p>\n<p>If you want to convert these occurences into actual <code>\\n</code> you would have to escape the <code>\\</code> like this: <code>\\\\</code>.</p>\n<p>So your code should then read</p>\n<pre><code>BenFeature = fieldSet.readString(&quot;ben_feature&quot;).replaceAll(&quot;\\\\r\\\\n&quot;,&quot;\\n&quot;);\n</code></pre>\n"}],"owner":{"account_id":9502650,"reputation":1,"user_id":7063172,"display_name":"raksha n"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699006387,"creation_date":1698978378,"question_id":77413864,"body_markdown":"i read a string from my csv file like below\r\n\r\n```\r\n\r\nBenFeature = fieldSet.readString(&quot;ben_feature&quot;).replaceAll(&quot;\\r\\n&quot;,&quot;\\n&quot;);\r\n```\r\n\r\nthe text from my file ben_feature  = &quot;Testing \\\\r\\\\n working \\\\r\\\\n&quot;  \r\nexpecting to be in next like like below  \r\nTesting\r\n\r\nworking  \r\n  \r\nbut the out put still have \\\\r\\\\n.  \r\n  \r\nbut when i use dummy string \r\n\r\n```\r\nString testing = &quot;Testing \\r\\n Working \\r\\n&quot;;\r\ntesting = testing.replaceAll(&quot;\\r\\n&quot;,&quot;\\n&quot;)\r\n```\r\n\r\nthis works perfectly.  \r\n  \r\nis the fieldSet.readString is the issue?","title":"replace \\r\\n with \\n so can have next line","body":"<p>i read a string from my csv file like below</p>\n<pre><code>\nBenFeature = fieldSet.readString(&quot;ben_feature&quot;).replaceAll(&quot;\\r\\n&quot;,&quot;\\n&quot;);\n</code></pre>\n<p>the text from my file ben_feature  = &quot;Testing \\r\\n working \\r\\n&quot;<br />\nexpecting to be in next like like below<br />\nTesting</p>\n<p>working</p>\n<p>but the out put still have \\r\\n.</p>\n<p>but when i use dummy string</p>\n<pre><code>String testing = &quot;Testing \\r\\n Working \\r\\n&quot;;\ntesting = testing.replaceAll(&quot;\\r\\n&quot;,&quot;\\n&quot;)\n</code></pre>\n<p>this works perfectly.</p>\n<p>is the fieldSet.readString is the issue?</p>\n"},{"tags":["java","database","hibernate","jpa","hql"],"comments":[{"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"score":1,"creation_date":1532606777,"post_id":51538424,"comment_id":90044315,"body_markdown":"Probably not the way to go: but we made that blob not part of the entity, and then used a separate repository with which we manually connected to the database from which we then read that blob as an `Inputstream`","body":"Probably not the way to go: but we made that blob not part of the entity, and then used a separate repository with which we manually connected to the database from which we then read that blob as an <code>Inputstream</code>"}],"answers":[{"comments":[{"owner":{"account_id":10184034,"reputation":317,"user_id":7519742,"display_name":"ivan"},"score":0,"creation_date":1532610056,"post_id":51539318,"comment_id":90046469,"body_markdown":"I tried using the plugin and added the optinal = false property as well. Still didn&#39;t work. I guess it probably can be made to work but  using some bytecode enhancement plugin seems like the worst solution to me.","body":"I tried using the plugin and added the optinal = false property as well. Still didn&#39;t work. I guess it probably can be made to work but  using some bytecode enhancement plugin seems like the worst solution to me."},{"owner":{"account_id":13732484,"reputation":158,"user_id":9909690,"display_name":"David Wolff"},"score":0,"creation_date":1532610563,"post_id":51539318,"comment_id":90046847,"body_markdown":"Using the bytecode enhancement seems like the cleanest solution to me.  Otherwise I think you will be stuck with implementing a similar proxy mechanism that the bytecode enhancer creates for you, or jumping through hoops like @Lino suggested.  Any reasons why you have an aversion to it?","body":"Using the bytecode enhancement seems like the cleanest solution to me.  Otherwise I think you will be stuck with implementing a similar proxy mechanism that the bytecode enhancer creates for you, or jumping through hoops like @Lino suggested.  Any reasons why you have an aversion to it?"}],"tags":[],"owner":{"account_id":13732484,"reputation":158,"user_id":9909690,"display_name":"David Wolff"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532609574,"creation_date":1532609574,"answer_id":51539318,"question_id":51538424,"body_markdown":"It sounds like you have tried annotating the byte[] array with \r\n`@Basic(fetch = FetchType.LAZY)`.  When using the `@Basic` annotation and lazy fetching additional hibernate options must be set.  See the Hibernate Documentation - [Performing Enhancement Section][1]\r\n\r\nSpecifically, the `hibernate.enhancer.enableLazyInitialization` property must be set to true.  By default it is not enabled.\r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement-enhancement","title":"What is the best way to NOT fetch a byte[] column when getting a persistent entity?","body":"<p>It sounds like you have tried annotating the byte[] array with \n<code>@Basic(fetch = FetchType.LAZY)</code>.  When using the <code>@Basic</code> annotation and lazy fetching additional hibernate options must be set.  See the Hibernate Documentation - <a href=\"http://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#BytecodeEnhancement-enhancement\" rel=\"nofollow noreferrer\">Performing Enhancement Section</a></p>\n\n<p>Specifically, the <code>hibernate.enhancer.enableLazyInitialization</code> property must be set to true.  By default it is not enabled.</p>\n"}],"owner":{"account_id":10184034,"reputation":317,"user_id":7519742,"display_name":"ivan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":265,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699006030,"creation_date":1532606636,"question_id":51538424,"body_markdown":"The table has multiple properties which we want to always be fetched. But it also has one property which is very large. When getting the information to display a list of items to the user the request will be significantly slower if the large property is fetched and it&#39;s not even used.\r\n\r\nSo far I&#39;ve only managed to make it work by wrapping that byte[] in a separate Object and referencing it with a `@ManyToOne(fetch = FetchType.LAZY)` which seems like poor design. `@Lob` `@Basic` and `@OneToOne` don&#39;t seem to work and I would rather not have that property in a separate Object anyway.\r\n","title":"What is the best way to NOT fetch a byte[] column when getting a persistent entity?","body":"<p>The table has multiple properties which we want to always be fetched. But it also has one property which is very large. When getting the information to display a list of items to the user the request will be significantly slower if the large property is fetched and it's not even used.</p>\n<p>So far I've only managed to make it work by wrapping that byte[] in a separate Object and referencing it with a <code>@ManyToOne(fetch = FetchType.LAZY)</code> which seems like poor design. <code>@Lob</code> <code>@Basic</code> and <code>@OneToOne</code> don't seem to work and I would rather not have that property in a separate Object anyway.</p>\n"},{"tags":["java","spring-boot","gradle"],"answers":[{"tags":[],"owner":{"account_id":29817789,"reputation":1,"user_id":22851751,"display_name":"markus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699006026,"creation_date":1699006026,"answer_id":77415773,"question_id":77258167,"body_markdown":"I actually had the same problem.\r\n\r\nUsing &quot;gradlew assemble&quot; instead of &quot;gradlew shadowJar&quot; created the correct MANIFEST inside of the shadowJar.","title":"shadow jar incomplete: org.springframework.boot.loader.wrapper.ThinJarWrapper not included","body":"<p>I actually had the same problem.</p>\n<p>Using &quot;gradlew assemble&quot; instead of &quot;gradlew shadowJar&quot; created the correct MANIFEST inside of the shadowJar.</p>\n"}],"owner":{"account_id":15278830,"reputation":1642,"user_id":11023821,"display_name":"Ralf Ulrich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699006026,"creation_date":1696848274,"question_id":77258167,"body_markdown":"I am working on a very minimal RestController spring-boot project. I am producing two jar files: 1/ using the Thin-Launcher of spring, and 2/ a shadow jar for AWS Lambda. \r\n\r\nThe thin jar is tiny with 16k, while the shadow jar is large with 22M. Both is expected. \r\n\r\nWhen I run the tiny jar &quot;java -jar tiny.jar&quot; the server starts up and works. When I start the shadow jar, I get \r\n\r\n```\r\nError: Could not find or load main class org.springframework.boot.loader.wrapper.ThinJarWrapper\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.loader.wrapper.ThinJarWrapper\r\n```\r\n\r\nand indeed, the boot loader ThinJarWrapper was not packed into the shadow jar. \r\n\r\nI can&#39;t figure out how to get it running. Here is my build.gradle\r\n\r\n```\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;3.1.4&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.1.3&#39;\r\n\tid &#39;com.github.johnrengelman.shadow&#39; version &#39;8.1.1&#39;\r\n\tid &#39;maven-publish&#39;\r\n\tid &#39;org.springframework.boot.experimental.thin-launcher&#39; version &quot;1.0.31.RELEASE&quot;\r\n}\r\n\r\ngroup = &#39;wirklich.xyz&#39;\r\nversion = &#39;1.0.0&#39;\r\n\r\njava {\r\n\tsourceCompatibility = &#39;17&#39;\r\n}\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n\tmavenLocal()\r\n\tmaven { url &#39;https://repo.spring.io/milestone&#39; }\r\n}\r\n\r\next {\r\n\tset(&#39;springCloudVersion&#39;, &quot;2023.0.0-M1&quot;)\r\n}\r\n\r\nassemble.dependsOn = [thinJar, shadowJar]\r\n\r\npublishing {\r\n\tpublications {\r\n\t\tmaven(MavenPublication) {\r\n\t\t\tfrom components.java\r\n\t\t\tversionMapping {\r\n\t\t\t\tusage(&#39;java-api&#39;) {\r\n\t\t\t\t\tfromResolutionOf(&#39;runtimeClasspath&#39;)\r\n\t\t\t\t}\r\n\t\t\t\tusage(&#39;java-runtime&#39;) {\r\n\t\t\t\t\tfromResolutionResult()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nshadowJar.mustRunAfter thinJar\r\n\r\nimport com.github.jengelman.gradle.plugins.shadow.transformers.*\r\n\r\nshadowJar {\r\n\tarchiveClassifier = &#39;aws&#39;\r\n\tmanifest {\r\n\t\tinheritFrom(project.tasks.thinJar.manifest)\r\n\t}\r\n\t// Required for Spring\r\n\tmergeServiceFiles()\r\n\tappend &#39;META-INF/spring.handlers&#39;\r\n\tappend &#39;META-INF/spring.schemas&#39;\r\n\tappend &#39;META-INF/spring.tooling&#39;\r\n\tappend &#39;META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports&#39;\r\n\tappend &#39;META-INF/spring/org.springframework.boot.actuate.autoconfigure.web.ManagementContextConfiguration.imports&#39;\r\n\ttransform(PropertiesFileTransformer) {\r\n\t\tpaths = [&#39;META-INF/spring.factories&#39;]\r\n\t\tmergeStrategy = &quot;append&quot;\r\n\t}\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter&#39;\r\n\timplementation &#39;org.springframework.cloud:spring-cloud-function-adapter-aws&#39;\r\n\timplementation &#39;org.springframework.cloud:spring-cloud-function-context&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\timplementation &#39;com.amazonaws.serverless:aws-serverless-java-container-springboot3:2.0.0-M2&#39;\r\n}\r\n\r\ndependencyManagement {\r\n\timports {\r\n\t\tmavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}&quot;\r\n\t}\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n}\r\n```\r\n\r\n\r\n","title":"shadow jar incomplete: org.springframework.boot.loader.wrapper.ThinJarWrapper not included","body":"<p>I am working on a very minimal RestController spring-boot project. I am producing two jar files: 1/ using the Thin-Launcher of spring, and 2/ a shadow jar for AWS Lambda.</p>\n<p>The thin jar is tiny with 16k, while the shadow jar is large with 22M. Both is expected.</p>\n<p>When I run the tiny jar &quot;java -jar tiny.jar&quot; the server starts up and works. When I start the shadow jar, I get</p>\n<pre><code>Error: Could not find or load main class org.springframework.boot.loader.wrapper.ThinJarWrapper\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.loader.wrapper.ThinJarWrapper\n</code></pre>\n<p>and indeed, the boot loader ThinJarWrapper was not packed into the shadow jar.</p>\n<p>I can't figure out how to get it running. Here is my build.gradle</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '3.1.4'\n    id 'io.spring.dependency-management' version '1.1.3'\n    id 'com.github.johnrengelman.shadow' version '8.1.1'\n    id 'maven-publish'\n    id 'org.springframework.boot.experimental.thin-launcher' version &quot;1.0.31.RELEASE&quot;\n}\n\ngroup = 'wirklich.xyz'\nversion = '1.0.0'\n\njava {\n    sourceCompatibility = '17'\n}\n\nrepositories {\n    mavenCentral()\n    mavenLocal()\n    maven { url 'https://repo.spring.io/milestone' }\n}\n\next {\n    set('springCloudVersion', &quot;2023.0.0-M1&quot;)\n}\n\nassemble.dependsOn = [thinJar, shadowJar]\n\npublishing {\n    publications {\n        maven(MavenPublication) {\n            from components.java\n            versionMapping {\n                usage('java-api') {\n                    fromResolutionOf('runtimeClasspath')\n                }\n                usage('java-runtime') {\n                    fromResolutionResult()\n                }\n            }\n        }\n    }\n}\n\nshadowJar.mustRunAfter thinJar\n\nimport com.github.jengelman.gradle.plugins.shadow.transformers.*\n\nshadowJar {\n    archiveClassifier = 'aws'\n    manifest {\n        inheritFrom(project.tasks.thinJar.manifest)\n    }\n    // Required for Spring\n    mergeServiceFiles()\n    append 'META-INF/spring.handlers'\n    append 'META-INF/spring.schemas'\n    append 'META-INF/spring.tooling'\n    append 'META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports'\n    append 'META-INF/spring/org.springframework.boot.actuate.autoconfigure.web.ManagementContextConfiguration.imports'\n    transform(PropertiesFileTransformer) {\n        paths = ['META-INF/spring.factories']\n        mergeStrategy = &quot;append&quot;\n    }\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter'\n    implementation 'org.springframework.cloud:spring-cloud-function-adapter-aws'\n    implementation 'org.springframework.cloud:spring-cloud-function-context'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'com.amazonaws.serverless:aws-serverless-java-container-springboot3:2.0.0-M2'\n}\n\ndependencyManagement {\n    imports {\n        mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}&quot;\n    }\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":["java","swing","user-interface","awt"],"answers":[{"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1699004996,"creation_date":1699004996,"answer_id":77415660,"question_id":77415388,"body_markdown":"Prefer adding `drawingPad` at the center.\r\nAs you need both a label and a toolbar at north add both in a dedicated panel.\r\n\r\n    public static void sketchPad(JFrame frame){\r\n        JPanel toolBar = new JPanel();\r\n        toolBar.setLayout(new FlowLayout());\r\n        toolBar.add(new JButton(&quot;Rectangle&quot;));\r\n        toolBar.add(new JButton(&quot;Circle&quot;));\r\n        toolBar.add(new JButton(&quot;Line&quot;));\r\n        toolBar.add(new JButton(&quot;Triangle&quot;));\r\n        toolBar.add(new JButton(&quot;Pentagon&quot;));\r\n        toolBar.add(new JButton(&quot;Clear&quot;));\r\n\r\n        JPanel control = new JPanel();\r\n        control.setLayout(new BorderLayout());\r\n        control.add(new JLabel(&quot;Sketch Pad&quot;),BorderLayout.NORTH);\r\n        control.add(toolBar,BorderLayout.SOUTH);\r\n      \r\n        JPanel drawingPad = new JPanel();\r\n        drawingPad.setBackground(Color.GRAY);\r\n    \r\n        JPanel sketchPad = new JPanel();\r\n        sketchPad.setLayout(new BorderLayout());\r\n        sketchPad.add(control,BorderLayout.NORTH);\r\n        sketchPad.add(drawingPad,BorderLayout.CENTER);\r\n        sketchPad.setBorder(BorderFactory.createLineBorder(Color.black));\r\n        frame.add(sketchPad,BorderLayout.EAST);\r\n    }\r\n\r\n[![New layout][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G3x1z.jpg","title":"How can I make the Jpanel to fill the remaining space remaining inside another panel?","body":"<p>Prefer adding <code>drawingPad</code> at the center.\nAs you need both a label and a toolbar at north add both in a dedicated panel.</p>\n<pre><code>public static void sketchPad(JFrame frame){\n    JPanel toolBar = new JPanel();\n    toolBar.setLayout(new FlowLayout());\n    toolBar.add(new JButton(&quot;Rectangle&quot;));\n    toolBar.add(new JButton(&quot;Circle&quot;));\n    toolBar.add(new JButton(&quot;Line&quot;));\n    toolBar.add(new JButton(&quot;Triangle&quot;));\n    toolBar.add(new JButton(&quot;Pentagon&quot;));\n    toolBar.add(new JButton(&quot;Clear&quot;));\n\n    JPanel control = new JPanel();\n    control.setLayout(new BorderLayout());\n    control.add(new JLabel(&quot;Sketch Pad&quot;),BorderLayout.NORTH);\n    control.add(toolBar,BorderLayout.SOUTH);\n  \n    JPanel drawingPad = new JPanel();\n    drawingPad.setBackground(Color.GRAY);\n\n    JPanel sketchPad = new JPanel();\n    sketchPad.setLayout(new BorderLayout());\n    sketchPad.add(control,BorderLayout.NORTH);\n    sketchPad.add(drawingPad,BorderLayout.CENTER);\n    sketchPad.setBorder(BorderFactory.createLineBorder(Color.black));\n    frame.add(sketchPad,BorderLayout.EAST);\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/G3x1z.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G3x1z.jpg\" alt=\"New layout\" /></a></p>\n"},{"tags":[],"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699005952,"creation_date":1699005952,"answer_id":77415771,"question_id":77415388,"body_markdown":"Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  \r\n\r\nI rearranged your code to get the following GUI.\r\n\r\n[![Example][1]][1]\r\n\r\nWhen creating a Swing GUI, you work from the inside out.  You set the size of the various Swing components, and let the `JFrame` size itself by packing the components.\r\n\r\nIf the user wants to maximize the GUI, there&#39;s a rectangle in the upper right for that purpose.  Make your GUI as small as possible.\r\n\r\nGet out of `static` methods.  Method names should be a verb-noun combination.\r\n\r\nGroup like code together.  You had `JFrame` method calls all over your code, making them hard to find.\r\n\r\nCreate a separate method or class for each `JPanel`.  That way, you can easily experiment with different Swing layouts.\r\n\r\nAll Swing applications must start with a call to the `SwingUtilities` `invokeLater` method.  This method ensures that the Swing components are created and executed on the [Event Dispatch Thread](https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html).\r\n\r\nHere&#39;s the complete runnable code.\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.FlowLayout;\r\n    \r\n    import javax.swing.BorderFactory;\r\n    import javax.swing.BoxLayout;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JLabel;\r\n    import javax.swing.JMenu;\r\n    import javax.swing.JMenuBar;\r\n    import javax.swing.JMenuItem;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class TextEditor implements Runnable {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSwingUtilities.invokeLater(new TextEditor());\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run() {\r\n    \t\tJFrame frame = new JFrame(&quot;Text Editor&quot;);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.setJMenuBar(createMenuBar());\r\n    \r\n    \t\tframe.add(createDrawingPad(), BorderLayout.CENTER);\r\n    \t\tframe.add(createSketchPad(), BorderLayout.EAST);\r\n    \t\t\r\n    \t\tframe.pack();\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tpublic JMenuBar createMenuBar() {\r\n    \t\tJMenuBar menuBar = new JMenuBar();\r\n    \t\tJMenu file = new JMenu(&quot;File&quot;);\r\n    \t\tString[] fileItems = { &quot;New Tab&quot;, &quot;New Window&quot;, &quot;Open&quot;, &quot;Save&quot;,\r\n    \t\t\t\t&quot;Save As&quot;, &quot;Save All&quot;, &quot;Page Setup&quot;, &quot;Print&quot;, &quot;Close Tab&quot;,\r\n    \t\t\t\t&quot;Close Window&quot;, &quot;Exit&quot; };\r\n    \t\tfor (String item : fileItems) {\r\n    \t\t\tJMenuItem menuItem = new JMenuItem(item);\r\n    \t\t\tfile.add(menuItem);\r\n    \t\t}\r\n    \t\tmenuBar.add(file);\r\n    \r\n    \t\tJMenu edit = new JMenu(&quot;Edit&quot;);\r\n    \t\tString[] editItems = { &quot;Undo&quot;, &quot;Cut&quot;, &quot;Copy&quot;, &quot;Paste&quot;, &quot;Delete&quot;,\r\n    \t\t\t\t&quot;Go To&quot;, &quot;Select All&quot;, &quot;Time/Date&quot; };\r\n    \t\tfor (String item : editItems) {\r\n    \t\t\tJMenuItem menuItem = new JMenuItem(item);\r\n    \t\t\tedit.add(menuItem);\r\n    \t\t}\r\n    \t\tmenuBar.add(edit);\r\n    \r\n    \t\tJMenu review = new JMenu(&quot;Review&quot;);\r\n    \t\tString[] reviewItems = { &quot;Zoom&quot;, &quot;Status Bar&quot;, &quot;Word Wrap&quot; };\r\n    \t\tfor (String item : reviewItems) {\r\n    \t\t\tif (item.equals(&quot;Zoom&quot;)) {\r\n    \t\t\t\tJMenu subMenu = new JMenu(&quot;Zoom&quot;);\r\n    \t\t\t\tJMenuItem in, out, setDefault;\r\n    \t\t\t\tin = new JMenuItem(&quot;Zoom In&quot;);\r\n    \t\t\t\tsubMenu.add(in);\r\n    \t\t\t\tout = new JMenuItem(&quot;Zoom Out&quot;);\r\n    \t\t\t\tsubMenu.add(out);\r\n    \t\t\t\tsetDefault = new JMenuItem(&quot;Default&quot;);\r\n    \t\t\t\tsubMenu.add(setDefault);\r\n    \t\t\t\treview.add(subMenu);\r\n    \t\t\t} else {\r\n    \t\t\t\tJMenuItem menuItem = new JMenuItem(item);\r\n    \t\t\t\treview.add(menuItem);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tmenuBar.add(review);\r\n    \r\n    \t\tJMenu help = new JMenu(&quot;Help&quot;);\r\n    \t\tString[] helpItems = { &quot;Help&quot;, &quot;About&quot; };\r\n    \t\tfor (String item : helpItems) {\r\n    \t\t\tJMenuItem menuItem = new JMenuItem(item);\r\n    \t\t\thelp.add(menuItem);\r\n    \t\t}\r\n    \t\tmenuBar.add(help);\r\n    \r\n    \t\treturn menuBar;\r\n    \t}\r\n    \t\r\n    \tpublic JPanel createDrawingPad() {\r\n    \t\tJPanel drawingPad = new JPanel();\r\n    \t\tdrawingPad.setBackground(Color.GRAY);\r\n    \t\tdrawingPad.setPreferredSize(new Dimension(640, 480));\r\n    \t\t\r\n    \t\treturn drawingPad;\r\n    \t}\r\n    \t\r\n    \tpublic JPanel createSketchPad() {\r\n    \t\tJPanel sketchPad = new JPanel();\r\n    \t\tsketchPad.setLayout(new BorderLayout());\r\n    \t\tsketchPad.setBorder(BorderFactory.createLineBorder(Color.black));\r\n    \t\t\r\n    \t\tsketchPad.add(new JLabel(&quot;Sketch Pad&quot;), BorderLayout.NORTH);\r\n    \t\tsketchPad.add(createToolBar(), BorderLayout.CENTER);\r\n    \t\t\r\n    \t\treturn sketchPad;\r\n    \t}\r\n    \t\r\n    \tpublic JPanel createToolBar() {\r\n    \t\tJPanel toolBar = new JPanel();\r\n    \t\ttoolBar.setLayout(new FlowLayout());\r\n    \t\ttoolBar.add(new JButton(&quot;Rectangle&quot;));\r\n    \t\ttoolBar.add(new JButton(&quot;Circle&quot;));\r\n    \t\ttoolBar.add(new JButton(&quot;Line&quot;));\r\n    \t\ttoolBar.add(new JButton(&quot;Triangle&quot;));\r\n    \t\ttoolBar.add(new JButton(&quot;Pentagon&quot;));\r\n    \t\ttoolBar.add(new JButton(&quot;Clear&quot;));\r\n    \t\t\r\n    \t\treturn toolBar;\r\n    \t}\r\n    \t\r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1xlCw.png","title":"How can I make the Jpanel to fill the remaining space remaining inside another panel?","body":"<p>Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.</p>\n<p>I rearranged your code to get the following GUI.</p>\n<p><a href=\"https://i.stack.imgur.com/1xlCw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1xlCw.png\" alt=\"Example\" /></a></p>\n<p>When creating a Swing GUI, you work from the inside out.  You set the size of the various Swing components, and let the <code>JFrame</code> size itself by packing the components.</p>\n<p>If the user wants to maximize the GUI, there's a rectangle in the upper right for that purpose.  Make your GUI as small as possible.</p>\n<p>Get out of <code>static</code> methods.  Method names should be a verb-noun combination.</p>\n<p>Group like code together.  You had <code>JFrame</code> method calls all over your code, making them hard to find.</p>\n<p>Create a separate method or class for each <code>JPanel</code>.  That way, you can easily experiment with different Swing layouts.</p>\n<p>All Swing applications must start with a call to the <code>SwingUtilities</code> <code>invokeLater</code> method.  This method ensures that the Swing components are created and executed on the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html\" rel=\"nofollow noreferrer\">Event Dispatch Thread</a>.</p>\n<p>Here's the complete runnable code.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.BoxLayout;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JMenu;\nimport javax.swing.JMenuBar;\nimport javax.swing.JMenuItem;\nimport javax.swing.JPanel;\nimport javax.swing.SwingUtilities;\n\npublic class TextEditor implements Runnable {\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new TextEditor());\n    }\n\n    @Override\n    public void run() {\n        JFrame frame = new JFrame(&quot;Text Editor&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setJMenuBar(createMenuBar());\n\n        frame.add(createDrawingPad(), BorderLayout.CENTER);\n        frame.add(createSketchPad(), BorderLayout.EAST);\n        \n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    public JMenuBar createMenuBar() {\n        JMenuBar menuBar = new JMenuBar();\n        JMenu file = new JMenu(&quot;File&quot;);\n        String[] fileItems = { &quot;New Tab&quot;, &quot;New Window&quot;, &quot;Open&quot;, &quot;Save&quot;,\n                &quot;Save As&quot;, &quot;Save All&quot;, &quot;Page Setup&quot;, &quot;Print&quot;, &quot;Close Tab&quot;,\n                &quot;Close Window&quot;, &quot;Exit&quot; };\n        for (String item : fileItems) {\n            JMenuItem menuItem = new JMenuItem(item);\n            file.add(menuItem);\n        }\n        menuBar.add(file);\n\n        JMenu edit = new JMenu(&quot;Edit&quot;);\n        String[] editItems = { &quot;Undo&quot;, &quot;Cut&quot;, &quot;Copy&quot;, &quot;Paste&quot;, &quot;Delete&quot;,\n                &quot;Go To&quot;, &quot;Select All&quot;, &quot;Time/Date&quot; };\n        for (String item : editItems) {\n            JMenuItem menuItem = new JMenuItem(item);\n            edit.add(menuItem);\n        }\n        menuBar.add(edit);\n\n        JMenu review = new JMenu(&quot;Review&quot;);\n        String[] reviewItems = { &quot;Zoom&quot;, &quot;Status Bar&quot;, &quot;Word Wrap&quot; };\n        for (String item : reviewItems) {\n            if (item.equals(&quot;Zoom&quot;)) {\n                JMenu subMenu = new JMenu(&quot;Zoom&quot;);\n                JMenuItem in, out, setDefault;\n                in = new JMenuItem(&quot;Zoom In&quot;);\n                subMenu.add(in);\n                out = new JMenuItem(&quot;Zoom Out&quot;);\n                subMenu.add(out);\n                setDefault = new JMenuItem(&quot;Default&quot;);\n                subMenu.add(setDefault);\n                review.add(subMenu);\n            } else {\n                JMenuItem menuItem = new JMenuItem(item);\n                review.add(menuItem);\n            }\n        }\n        menuBar.add(review);\n\n        JMenu help = new JMenu(&quot;Help&quot;);\n        String[] helpItems = { &quot;Help&quot;, &quot;About&quot; };\n        for (String item : helpItems) {\n            JMenuItem menuItem = new JMenuItem(item);\n            help.add(menuItem);\n        }\n        menuBar.add(help);\n\n        return menuBar;\n    }\n    \n    public JPanel createDrawingPad() {\n        JPanel drawingPad = new JPanel();\n        drawingPad.setBackground(Color.GRAY);\n        drawingPad.setPreferredSize(new Dimension(640, 480));\n        \n        return drawingPad;\n    }\n    \n    public JPanel createSketchPad() {\n        JPanel sketchPad = new JPanel();\n        sketchPad.setLayout(new BorderLayout());\n        sketchPad.setBorder(BorderFactory.createLineBorder(Color.black));\n        \n        sketchPad.add(new JLabel(&quot;Sketch Pad&quot;), BorderLayout.NORTH);\n        sketchPad.add(createToolBar(), BorderLayout.CENTER);\n        \n        return sketchPad;\n    }\n    \n    public JPanel createToolBar() {\n        JPanel toolBar = new JPanel();\n        toolBar.setLayout(new FlowLayout());\n        toolBar.add(new JButton(&quot;Rectangle&quot;));\n        toolBar.add(new JButton(&quot;Circle&quot;));\n        toolBar.add(new JButton(&quot;Line&quot;));\n        toolBar.add(new JButton(&quot;Triangle&quot;));\n        toolBar.add(new JButton(&quot;Pentagon&quot;));\n        toolBar.add(new JButton(&quot;Clear&quot;));\n        \n        return toolBar;\n    }\n    \n}\n</code></pre>\n"}],"owner":{"account_id":29817309,"reputation":25,"user_id":22851350,"display_name":"Rachit Anand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77415660,"answer_count":2,"score":0,"last_activity_date":1699005952,"creation_date":1699002419,"question_id":77415388,"body_markdown":"I started out with Swing a few days ago and I was trying to make a UI for a text editor like the one I&#39;ve attached below\r\n[Sample UI](https://i.stack.imgur.com/Csuxu.png)\r\n\r\nThis might be a stupid question but I&#39;ve made the toolbar and added a border but when I am trying to add the drawing pad it&#39;s not filing up the rest of the space?\r\n[My UI](https://i.stack.imgur.com/va4Z7.png)\r\n\r\nHere is the code, can someone tell me what I am doing wrong?\r\n\r\n```Java\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        JFrame frame = new JFrame(&quot;Text Editor&quot;);\r\n        GraphicsDevice graphicsDevice = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();\r\n        GraphicsConfiguration config = graphicsDevice.getDefaultConfiguration();\r\n        frame.setSize(config.getBounds().getSize());\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        frame.setLayout(new BorderLayout());\r\n\r\n        menuBar(frame);\r\n        sketchPad(frame);\r\n\r\n        frame.setVisible(true);\r\n\r\n    }\r\n\r\n    public static void menuBar(JFrame frame){\r\n        JMenuBar menuBar = new JMenuBar();\r\n        JMenu file= new JMenu(&quot;File&quot;);\r\n        String[] fileItems = {&quot;New Tab&quot;,&quot;New Window&quot;,&quot;Open&quot;,&quot;Save&quot;,&quot;Save As&quot;,&quot;Save All&quot;, &quot;Page Setup&quot;,&quot;Print&quot;,&quot;Close Tab&quot;,&quot;Close Window&quot;,&quot;Exit&quot;};\r\n        for(String item:fileItems){\r\n            JMenuItem menuItem = new JMenuItem(item);\r\n            file.add(menuItem);\r\n        }\r\n        menuBar.add(file);\r\n\r\n        JMenu edit = new JMenu(&quot;Edit&quot;);\r\n        String[] editItems = {&quot;Undo&quot;,&quot;Cut&quot;,&quot;Copy&quot;,&quot;Paste&quot;,&quot;Delete&quot;,&quot;Go To&quot;,&quot;Select All&quot;,&quot;Time/Date&quot;};\r\n        for(String item:editItems){\r\n            JMenuItem menuItem = new JMenuItem(item);\r\n            edit.add(menuItem);\r\n        }\r\n        menuBar.add(edit);\r\n\r\n        JMenu review = new JMenu(&quot;Review&quot;);\r\n        String[] reviewItems = {&quot;Zoom&quot;,&quot;Status Bar&quot;,&quot;Word Wrap&quot;};\r\n        for(String item:reviewItems){\r\n            if(item.equals(&quot;Zoom&quot;)){\r\n                JMenu subMenu = new JMenu(&quot;Zoom&quot;);\r\n                JMenuItem in,out,setDefault;\r\n                in = new JMenuItem(&quot;Zoom In&quot;);\r\n                subMenu.add(in);\r\n                out = new JMenuItem(&quot;Zoom Out&quot;);\r\n                subMenu.add(out);\r\n                setDefault = new JMenuItem(&quot;Default&quot;);\r\n                subMenu.add(setDefault);\r\n                review.add(subMenu);\r\n            }else {\r\n                JMenuItem menuItem = new JMenuItem(item);\r\n                review.add(menuItem);\r\n            }\r\n        }\r\n        menuBar.add(review);\r\n        \r\n        JMenu help = new JMenu(&quot;Help&quot;);\r\n        String[] helpItems = {&quot;Help&quot;,&quot;About&quot;};\r\n        for(String item:helpItems){\r\n            JMenuItem menuItem = new JMenuItem(item);\r\n            help.add(menuItem);\r\n        }\r\n        menuBar.add(help);\r\n        \r\n        frame.setJMenuBar(menuBar);\r\n    }\r\n\r\n    public static void sketchPad(JFrame frame){\r\n        JPanel sketchPad = new JPanel();\r\n        sketchPad.setLayout(new BorderLayout());\r\n        sketchPad.add(new JLabel(&quot;Sketch Pad&quot;),BorderLayout.NORTH);\r\n        JPanel toolBar = new JPanel();\r\n        toolBar.setLayout(new FlowLayout());\r\n        toolBar.add(new JButton(&quot;Rectangle&quot;));\r\n        toolBar.add(new JButton(&quot;Circle&quot;));\r\n        toolBar.add(new JButton(&quot;Line&quot;));\r\n        toolBar.add(new JButton(&quot;Triangle&quot;));\r\n        toolBar.add(new JButton(&quot;Pentagon&quot;));\r\n        toolBar.add(new JButton(&quot;Clear&quot;));\r\n        sketchPad.add(toolBar,BorderLayout.CENTER);\r\n        JPanel drawingPad = new JPanel();\r\n        drawingPad.setBackground(Color.GRAY);\r\n        sketchPad.add(drawingPad,BorderLayout.SOUTH);\r\n        sketchPad.setBorder(BorderFactory.createLineBorder(Color.black));\r\n        frame.add(sketchPad,BorderLayout.EAST);\r\n    }\r\n}\r\n```\r\n\r\nI have tried using the setMinimumSize, setSize, getPreferedSize methods, but nothing seems to work. If I change the layout, it messes up everything","title":"How can I make the Jpanel to fill the remaining space remaining inside another panel?","body":"<p>I started out with Swing a few days ago and I was trying to make a UI for a text editor like the one I've attached below\n<a href=\"https://i.stack.imgur.com/Csuxu.png\" rel=\"nofollow noreferrer\">Sample UI</a></p>\n<p>This might be a stupid question but I've made the toolbar and added a border but when I am trying to add the drawing pad it's not filing up the rest of the space?\n<a href=\"https://i.stack.imgur.com/va4Z7.png\" rel=\"nofollow noreferrer\">My UI</a></p>\n<p>Here is the code, can someone tell me what I am doing wrong?</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        JFrame frame = new JFrame(&quot;Text Editor&quot;);\n        GraphicsDevice graphicsDevice = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();\n        GraphicsConfiguration config = graphicsDevice.getDefaultConfiguration();\n        frame.setSize(config.getBounds().getSize());\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setLayout(new BorderLayout());\n\n        menuBar(frame);\n        sketchPad(frame);\n\n        frame.setVisible(true);\n\n    }\n\n    public static void menuBar(JFrame frame){\n        JMenuBar menuBar = new JMenuBar();\n        JMenu file= new JMenu(&quot;File&quot;);\n        String[] fileItems = {&quot;New Tab&quot;,&quot;New Window&quot;,&quot;Open&quot;,&quot;Save&quot;,&quot;Save As&quot;,&quot;Save All&quot;, &quot;Page Setup&quot;,&quot;Print&quot;,&quot;Close Tab&quot;,&quot;Close Window&quot;,&quot;Exit&quot;};\n        for(String item:fileItems){\n            JMenuItem menuItem = new JMenuItem(item);\n            file.add(menuItem);\n        }\n        menuBar.add(file);\n\n        JMenu edit = new JMenu(&quot;Edit&quot;);\n        String[] editItems = {&quot;Undo&quot;,&quot;Cut&quot;,&quot;Copy&quot;,&quot;Paste&quot;,&quot;Delete&quot;,&quot;Go To&quot;,&quot;Select All&quot;,&quot;Time/Date&quot;};\n        for(String item:editItems){\n            JMenuItem menuItem = new JMenuItem(item);\n            edit.add(menuItem);\n        }\n        menuBar.add(edit);\n\n        JMenu review = new JMenu(&quot;Review&quot;);\n        String[] reviewItems = {&quot;Zoom&quot;,&quot;Status Bar&quot;,&quot;Word Wrap&quot;};\n        for(String item:reviewItems){\n            if(item.equals(&quot;Zoom&quot;)){\n                JMenu subMenu = new JMenu(&quot;Zoom&quot;);\n                JMenuItem in,out,setDefault;\n                in = new JMenuItem(&quot;Zoom In&quot;);\n                subMenu.add(in);\n                out = new JMenuItem(&quot;Zoom Out&quot;);\n                subMenu.add(out);\n                setDefault = new JMenuItem(&quot;Default&quot;);\n                subMenu.add(setDefault);\n                review.add(subMenu);\n            }else {\n                JMenuItem menuItem = new JMenuItem(item);\n                review.add(menuItem);\n            }\n        }\n        menuBar.add(review);\n        \n        JMenu help = new JMenu(&quot;Help&quot;);\n        String[] helpItems = {&quot;Help&quot;,&quot;About&quot;};\n        for(String item:helpItems){\n            JMenuItem menuItem = new JMenuItem(item);\n            help.add(menuItem);\n        }\n        menuBar.add(help);\n        \n        frame.setJMenuBar(menuBar);\n    }\n\n    public static void sketchPad(JFrame frame){\n        JPanel sketchPad = new JPanel();\n        sketchPad.setLayout(new BorderLayout());\n        sketchPad.add(new JLabel(&quot;Sketch Pad&quot;),BorderLayout.NORTH);\n        JPanel toolBar = new JPanel();\n        toolBar.setLayout(new FlowLayout());\n        toolBar.add(new JButton(&quot;Rectangle&quot;));\n        toolBar.add(new JButton(&quot;Circle&quot;));\n        toolBar.add(new JButton(&quot;Line&quot;));\n        toolBar.add(new JButton(&quot;Triangle&quot;));\n        toolBar.add(new JButton(&quot;Pentagon&quot;));\n        toolBar.add(new JButton(&quot;Clear&quot;));\n        sketchPad.add(toolBar,BorderLayout.CENTER);\n        JPanel drawingPad = new JPanel();\n        drawingPad.setBackground(Color.GRAY);\n        sketchPad.add(drawingPad,BorderLayout.SOUTH);\n        sketchPad.setBorder(BorderFactory.createLineBorder(Color.black));\n        frame.add(sketchPad,BorderLayout.EAST);\n    }\n}\n</code></pre>\n<p>I have tried using the setMinimumSize, setSize, getPreferedSize methods, but nothing seems to work. If I change the layout, it messes up everything</p>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"account_id":2203996,"reputation":1543,"user_id":1947652,"accept_rate":33,"display_name":"Bk Santiago"},"score":0,"creation_date":1498189695,"post_id":44712737,"comment_id":76407918,"body_markdown":"You need `PowerMockito` instead, please have a quick google search.","body":"You need <code>PowerMockito</code> instead, please have a quick google search."},{"owner":{"account_id":2774190,"reputation":13369,"user_id":3195526,"accept_rate":71,"display_name":"Paul Hicks"},"score":1,"creation_date":1498190081,"post_id":44712737,"comment_id":76407997,"body_markdown":"How do you initialize it in app code? Don&#39;t you need a builder / factory method? Something like `CloudFormationManager.create(AmazonCloudFormation acf)`","body":"How do you initialize it in app code? Don&#39;t you need a builder / factory method? Something like <code>CloudFormationManager.create(AmazonCloudFormation acf)</code>"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1498190276,"post_id":44712737,"comment_id":76408038,"body_markdown":"You probably _don&#39;t_ need PowerMockito.  However your actual application creates a `CloudFormationManager` would be something you need to replicate in your test.","body":"You probably <i>don&#39;t</i> need PowerMockito.  However your actual application creates a <code>CloudFormationManager</code> would be something you need to replicate in your test."},{"owner":{"account_id":5073666,"reputation":247,"user_id":4071741,"accept_rate":33,"display_name":"sarah"},"score":0,"creation_date":1498190413,"post_id":44712737,"comment_id":76408064,"body_markdown":"@DawoodibnKareem, but I am writing the UT for that class itself. Will I have to inject CloudFormationManager in the class itself?","body":"@DawoodibnKareem, but I am writing the UT for that class itself. Will I have to inject CloudFormationManager in the class itself?"},{"owner":{"account_id":2774190,"reputation":13369,"user_id":3195526,"accept_rate":71,"display_name":"Paul Hicks"},"score":0,"creation_date":1498190446,"post_id":44712737,"comment_id":76408067,"body_markdown":"Also, with just a little bit of extra design work you could increase testablity and eliminate the need for mocking. Mocking is usually expensive (in development time), brittle, and not particularly valuable.","body":"Also, with just a little bit of extra design work you could increase testablity and eliminate the need for mocking. Mocking is usually expensive (in development time), brittle, and not particularly valuable."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1498190505,"post_id":44712737,"comment_id":76408075,"body_markdown":"What I&#39;m saying is - it must be possible to create a `CloudFormationManager`, because your application presumably does it.  So however you&#39;ve created it, do the same thing in the test.","body":"What I&#39;m saying is - it must be possible to create a <code>CloudFormationManager</code>, because your application presumably does it.  So however you&#39;ve created it, do the same thing in the test."},{"owner":{"account_id":5073666,"reputation":247,"user_id":4071741,"accept_rate":33,"display_name":"sarah"},"score":0,"creation_date":1498190751,"post_id":44712737,"comment_id":76408127,"body_markdown":"Yep, sorry got it. It has been done like this, `CloudFormationManager.getInstance(amazonCloudFormation);`. Are you suggesting I should do a similar thing inside the setUp() method then?","body":"Yep, sorry got it. It has been done like this, <code>CloudFormationManager.getInstance(amazonCloudFormation);</code>. Are you suggesting I should do a similar thing inside the setUp() method then?"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":1,"creation_date":1498190969,"post_id":44712737,"comment_id":76408187,"body_markdown":"Yes.  And pass in your mock AmazonCloudFormation.","body":"Yes.  And pass in your mock AmazonCloudFormation."}],"answers":[{"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568230950,"creation_date":1498199175,"answer_id":44714449,"question_id":44712737,"body_markdown":"It seems that you are not clear on what `@Mock` and `@InjectMocks` does.\r\n\r\nUsing `@Mock`, you create a *mocked* object. Using `@InjectMocks`, you have Mockito *insert* all `@Mock` objects into some object under test.\r\n\r\nYour class `CloudFormationManager` has **two** fields. Thus you would *probably* need:\r\n\r\n    @Mock\r\n    private AmazonCloudFormation mockedAmazonCloud;\r\n\r\n    @Mock\r\n    CloudFormationManager mockedFormationManager;\r\n\r\n    @InjectMocks\r\n    CloudFormationManager cloudFormationManager;\r\n\r\nand now Mockito should setup both fields upon calling `initAnnotiations()`.\r\n\r\nSee [here][1] for further reading.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks","title":"How do I mock static member variables of a class using Mockito?","body":"<p>It seems that you are not clear on what <code>@Mock</code> and <code>@InjectMocks</code> does.</p>\n\n<p>Using <code>@Mock</code>, you create a <em>mocked</em> object. Using <code>@InjectMocks</code>, you have Mockito <em>insert</em> all <code>@Mock</code> objects into some object under test.</p>\n\n<p>Your class <code>CloudFormationManager</code> has <strong>two</strong> fields. Thus you would <em>probably</em> need:</p>\n\n<pre><code>@Mock\nprivate AmazonCloudFormation mockedAmazonCloud;\n\n@Mock\nCloudFormationManager mockedFormationManager;\n\n@InjectMocks\nCloudFormationManager cloudFormationManager;\n</code></pre>\n\n<p>and now Mockito should setup both fields upon calling <code>initAnnotiations()</code>.</p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/16467685/difference-between-mock-and-injectmocks\">here</a> for further reading.</p>\n"}],"owner":{"account_id":5073666,"reputation":247,"user_id":4071741,"accept_rate":33,"display_name":"sarah"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9584,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699005735,"creation_date":1498189437,"question_id":44712737,"body_markdown":"I have a class like this: \r\n\r\n    public class CloudFormationManager\r\n    {\r\n    \tprivate static CloudFormationManager cloudFormationManager;\r\n    \tprivate final AmazonCloudFormation amazonCloudFormation;\r\n    \r\n    \tprivate CloudFormationManager(final AmazonCloudFormation amazonCloudFormation)\r\n    \t{\r\n    \t\tthis.amazonCloudFormation = amazonCloudFormation;\r\n    \t}\r\n    \r\n    \tpublic List&lt;StackResource&gt; getStackResources(final String stackName)\r\n    \t{\r\n    \t\tListStackResourcesRequest listStackResourcesRequest = new ListStackResourcesRequest();\r\n    \t\tlistStackResourcesRequest.setStackName(stackName);\r\n    \t\tListStackResourcesResult listStackResourcesResult =\r\n    \t\t\t\tamazonCloudFormation.listStackResources(listStackResourcesRequest);\r\n    \r\n    \t\tif (nonNull(listStackResourcesResult))\r\n    \t\t\treturn getStackResources(listStackResourcesResult);\r\n    \t\telse\r\n    \t\t\treturn Collections.emptyList();\r\n    \t}\r\n    }\r\n\r\nI am beginning to write UT&#39;s for this using Mockito which is as follows: \r\n\r\n    @Test\r\n    public class CloudFormationManagerTest\r\n    {\r\n    \t@Mock\r\n    \tprivate AmazonCloudFormation amazonCloudFormation;\r\n    \r\n    \t@InjectMocks\r\n    \tCloudFormationManager cloudFormationManager;\r\n    \r\n    \t@BeforeMethod\r\n    \tpublic void setUp() throws IOException\r\n    \t{\r\n    \t\tCloudFormationManager cloudFormationManager = new CloudFormationManager(amazonCloudFormation); // this statement gives an error.\r\n    \t\tMockitoAnnotations.initMocks(this);\r\n    \t}\r\n        \r\n        @Test\r\n        void testGetStackResources()\r\n        {\r\n    \r\n        }\r\n\r\n    }\r\n\r\n\r\nNow, in the `setUp()` method, I see an error saying that this class cannot be initialised and I understand this since it&#39;s a private constructor? How do I initialise it then using Mockito? \r\n","title":"How do I mock static member variables of a class using Mockito?","body":"<p>I have a class like this: </p>\n\n<pre><code>public class CloudFormationManager\n{\n    private static CloudFormationManager cloudFormationManager;\n    private final AmazonCloudFormation amazonCloudFormation;\n\n    private CloudFormationManager(final AmazonCloudFormation amazonCloudFormation)\n    {\n        this.amazonCloudFormation = amazonCloudFormation;\n    }\n\n    public List&lt;StackResource&gt; getStackResources(final String stackName)\n    {\n        ListStackResourcesRequest listStackResourcesRequest = new ListStackResourcesRequest();\n        listStackResourcesRequest.setStackName(stackName);\n        ListStackResourcesResult listStackResourcesResult =\n                amazonCloudFormation.listStackResources(listStackResourcesRequest);\n\n        if (nonNull(listStackResourcesResult))\n            return getStackResources(listStackResourcesResult);\n        else\n            return Collections.emptyList();\n    }\n}\n</code></pre>\n\n<p>I am beginning to write UT's for this using Mockito which is as follows: </p>\n\n<pre><code>@Test\npublic class CloudFormationManagerTest\n{\n    @Mock\n    private AmazonCloudFormation amazonCloudFormation;\n\n    @InjectMocks\n    CloudFormationManager cloudFormationManager;\n\n    @BeforeMethod\n    public void setUp() throws IOException\n    {\n        CloudFormationManager cloudFormationManager = new CloudFormationManager(amazonCloudFormation); // this statement gives an error.\n        MockitoAnnotations.initMocks(this);\n    }\n\n    @Test\n    void testGetStackResources()\n    {\n\n    }\n\n}\n</code></pre>\n\n<p>Now, in the <code>setUp()</code> method, I see an error saying that this class cannot be initialised and I understand this since it's a private constructor? How do I initialise it then using Mockito? </p>\n"},{"tags":["java","maven","javafx","module","jar"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1698879803,"post_id":77406062,"comment_id":136462247,"body_markdown":"Do you have a module named `FigureTest`?  You can use the [`jar` command](https://docs.oracle.com/en/java/javase/21/docs/specs/man/jar.html) with the `--describe-module` to find the name of the module for a jar file.","body":"Do you have a module named <code>FigureTest</code>?  You can use the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/man/jar.html\" rel=\"nofollow noreferrer\"><code>jar</code> command</a> with the <code>--describe-module</code> to find the name of the module for a jar file."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1698879856,"post_id":77406062,"comment_id":136462251,"body_markdown":"Please include the module info as text in your question.  You can also include an IDE screenshot as you have, but any relevant textual information (code, module descriptors, error messages, etc) in the screenshot must also be in the question as text, formatted as code.","body":"Please include the module info as text in your question.  You can also include an IDE screenshot as you have, but any relevant textual information (code, module descriptors, error messages, etc) in the screenshot must also be in the question as text, formatted as code."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1698880026,"post_id":77406062,"comment_id":136462269,"body_markdown":"If you are using Maven to source your dependencies (including ones you created), then they should be listed in the IDE under `External Libraries` as `Maven: ...` dependencies, however this is not the case with your `FigureTest-1.0.0.jar` dependency.","body":"If you are using Maven to source your dependencies (including ones you created), then they should be listed in the IDE under <code>External Libraries</code> as <code>Maven: ...</code> dependencies, however this is not the case with your <code>FigureTest-1.0.0.jar</code> dependency."},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":0,"creation_date":1698915708,"post_id":77406062,"comment_id":136465716,"body_markdown":"Yes, i have Maven: org.testing:FigureTest:1.0.0 in External Libraries. dependencies of Maven also see that. When i clicked on requires FigureTest(ctrl + LMB) it refers to the .jar file in the External Libraries. But if i clicked &quot;Run&quot; happens this: \njava: module not found: FigureTest. I really don`t understand what i need to do, because i tried all methods i know as i describe above.","body":"Yes, i have Maven: org.testing:FigureTest:1.0.0 in External Libraries. dependencies of Maven also see that. When i clicked on requires FigureTest(ctrl + LMB) it refers to the .jar file in the External Libraries. But if i clicked &quot;Run&quot; happens this:  java: module not found: FigureTest. I really don`t understand what i need to do, because i tried all methods i know as i describe above."},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":0,"creation_date":1698915815,"post_id":77406062,"comment_id":136465733,"body_markdown":"I have a screenshot of the IDE above","body":"I have a screenshot of the IDE above"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1698922792,"post_id":77406062,"comment_id":136467038,"body_markdown":"Screenshots of text are not good enough [for so many reasons](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557).","body":"Screenshots of text are not good enough <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">for so many reasons</a>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698923118,"post_id":77406062,"comment_id":136467085,"body_markdown":"&quot;Maven: org.testing:FigureTest:1.0.0 in External Libraries. dependencies of Maven also see that.&quot; -&gt; I don&#39;t see that, it isn&#39;t in your screenshot.  If added by Maven automatically the library *should not also be added manually to the IDE libraries*.","body":"&quot;Maven: org.testing:FigureTest:1.0.0 in External Libraries. dependencies of Maven also see that.&quot; -&gt; I don&#39;t see that, it isn&#39;t in your screenshot.  If added by Maven automatically the library <i>should not also be added manually to the IDE libraries</i>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1698923199,"post_id":77406062,"comment_id":136467094,"body_markdown":"Provide your `pom.xml` as text formatted as code.  Provide the `module-info.java` as text formatted as code.  Provide the output of the jar `--describe-module` command on the dependent jar file.  Where did the jar come from? Do you have source code for it?  Is the source code a Maven or Gradle project? &quot;load the .jar file into .m2(local maven repos)&quot; -&gt; Provide the exact command you executed for that.  Edit the question to add *all* these things.","body":"Provide your <code>pom.xml</code> as text formatted as code.  Provide the <code>module-info.java</code> as text formatted as code.  Provide the output of the jar <code>--describe-module</code> command on the dependent jar file.  Where did the jar come from? Do you have source code for it?  Is the source code a Maven or Gradle project? &quot;load the .jar file into .m2(local maven repos)&quot; -&gt; Provide the exact command you executed for that.  Edit the question to add <i>all</i> these things."},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":0,"creation_date":1698937296,"post_id":77406062,"comment_id":136470093,"body_markdown":"Do it. Sorry, but i dk where do i need to use this: --describe-module?","body":"Do it. Sorry, but i dk where do i need to use this: --describe-module?"},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":0,"creation_date":1698937469,"post_id":77406062,"comment_id":136470130,"body_markdown":"The MAIN TASK is HOW TO CONNECT THE .jar FILE TO MY FiguresFX PROJECT. Maby i dont`t know some ways ho to do it in a diffetent.","body":"The MAIN TASK is HOW TO CONNECT THE .jar FILE TO MY FiguresFX PROJECT. Maby i dont`t know some ways ho to do it in a diffetent."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1698945167,"post_id":77406062,"comment_id":136471766,"body_markdown":"Can you post *both* `module-info.java` files? The one for the required module and the one for the module that requires it? I am guessing the one you posted is for the latter.","body":"Can you post <i>both</i> <code>module-info.java</code> files? The one for the required module and the one for the module that requires it? I am guessing the one you posted is for the latter."},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":0,"creation_date":1698945889,"post_id":77406062,"comment_id":136471912,"body_markdown":"Sorry, but i dont have file module-info.java for FigureTest. Yeah, i think about that can be a problem, so i need to create this file or what? Just when i try to do that, it show me that .jar is Readonly and i cant create any files. \nMaybe then I can somehow do it at the initial stage of creating the .jar file? But what if I created it automatically via Maven -&gt; Install. :/","body":"Sorry, but i dont have file module-info.java for FigureTest. Yeah, i think about that can be a problem, so i need to create this file or what? Just when i try to do that, it show me that .jar is Readonly and i cant create any files.  Maybe then I can somehow do it at the initial stage of creating the .jar file? But what if I created it automatically via Maven -&gt; Install. :/"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698950288,"post_id":77406062,"comment_id":136472751,"body_markdown":"What is the purpose of the FigureTest jar?  Is it *only* for unit testing, or is it used at runtime.  If it is for unit testing, then change the dependency scope from `compile` to `test` and reimport the project into the IDE and it should work for testing as modern Maven and IDE versions are smart enough not to treat test code as modules.","body":"What is the purpose of the FigureTest jar?  Is it <i>only</i> for unit testing, or is it used at runtime.  If it is for unit testing, then change the dependency scope from <code>compile</code> to <code>test</code> and reimport the project into the IDE and it should work for testing as modern Maven and IDE versions are smart enough not to treat test code as modules."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698950295,"post_id":77406062,"comment_id":136472753,"body_markdown":"But if you use it at runtime don’t do that, instead you need to determine the name of the module and ensure it is on the module path and added as a required module. `jar —describe-module &lt;jar file name&gt;` will tell you the module name to put in your module info.  The jar file can be found in your `.m2` repository.","body":"But if you use it at runtime don’t do that, instead you need to determine the name of the module and ensure it is on the module path and added as a required module. <code>jar —describe-module &lt;jar file name&gt;</code> will tell you the module name to put in your module info.  The jar file can be found in your <code>.m2</code> repository."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698950535,"post_id":77406062,"comment_id":136472805,"body_markdown":"Provide the pom.xml of the project used to create the FigureTest jar.  Does the jar file have a META-INF file that sets an [automatic module name](https://stackoverflow.com/questions/46741907/what-is-an-automatic-module#:~:text=The%20module%20descriptor%20for%20an,other%20modules%20in%20the%20configuration.)?","body":"Provide the pom.xml of the project used to create the FigureTest jar.  Does the jar file have a META-INF file that sets an <a href=\"https://stackoverflow.com/questions/46741907/what-is-an-automatic-module#:~:text=The%20module%20descriptor%20for%20an,other%20modules%20in%20the%20configuration.\">automatic module name</a>?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698950905,"post_id":77406062,"comment_id":136472863,"body_markdown":"Is the groupId for FigureTest really org.testing rather than com.figures like your FiguresFX project?  (It could be, I am just checking because the group name is unusual).","body":"Is the groupId for FigureTest really org.testing rather than com.figures like your FiguresFX project?  (It could be, I am just checking because the group name is unusual)."},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":1,"creation_date":1698959101,"post_id":77406062,"comment_id":136474172,"body_markdown":"Sorry for that, but now i dont need to connect FigureTest.jar to my project. Instead of this i need to connect Figures.jar. This is the same project to FigureTest, but without testing things and it dont using Maven. So, i created .jar in Project Structure -&gt; Artifacts, then Build -&gt; Artifacts and i have a .jar file. But there is nothing like groupId or artifactId. So, how can i connect this .jar to my JavaFX project. I apologize as much as possible, but i cant cope without help :(","body":"Sorry for that, but now i dont need to connect FigureTest.jar to my project. Instead of this i need to connect Figures.jar. This is the same project to FigureTest, but without testing things and it dont using Maven. So, i created .jar in Project Structure -&gt; Artifacts, then Build -&gt; Artifacts and i have a .jar file. But there is nothing like groupId or artifactId. So, how can i connect this .jar to my JavaFX project. I apologize as much as possible, but i cant cope without help :("},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698971611,"post_id":77406062,"comment_id":136475619,"body_markdown":"If you don&#39;t need FigureTest.jar, then don&#39;t `requires FigureTest;` as a module.  If you instead have `Figures.jar` and it is on the *module path* NOT the *classpath* and it is *not* a modular jar (has no `module-info.java`) and it does *not* have an automatic module name defined in the META-INF (see the prior comment), then the automatic module name will be derived from the jar file name and you can write `requires Figures;` in your module-info.  Or if it is just on the classpath, don&#39;t refer to it in module-info at all and it will be picked up from the classpath.","body":"If you don&#39;t need FigureTest.jar, then don&#39;t <code>requires FigureTest;</code> as a module.  If you instead have <code>Figures.jar</code> and it is on the <i>module path</i> NOT the <i>classpath</i> and it is <i>not</i> a modular jar (has no <code>module-info.java</code>) and it does <i>not</i> have an automatic module name defined in the META-INF (see the prior comment), then the automatic module name will be derived from the jar file name and you can write <code>requires Figures;</code> in your module-info.  Or if it is just on the classpath, don&#39;t refer to it in module-info at all and it will be picked up from the classpath."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698971946,"post_id":77406062,"comment_id":136475655,"body_markdown":"If you want to have a maven dependency on Figures.jar in your Maven project, then you need to install the Figures jar in your maven repository.  If you have source code that produced Figures.jar as a maven project you can run maven install on that project and it will put the Figures jar in your repository.  If you don&#39;t have source code that produces the Figures.jar but just a jar binary, [manually install the jar in your repository](https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html) and refer to it in your maven project using the coordinates you provided on install.","body":"If you want to have a maven dependency on Figures.jar in your Maven project, then you need to install the Figures jar in your maven repository.  If you have source code that produced Figures.jar as a maven project you can run maven install on that project and it will put the Figures jar in your repository.  If you don&#39;t have source code that produces the Figures.jar but just a jar binary, <a href=\"https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html\" rel=\"nofollow noreferrer\">manually install the jar in your repository</a> and refer to it in your maven project using the coordinates you provided on install."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1698972041,"post_id":77406062,"comment_id":136475664,"body_markdown":"If you don&#39;t want the Figures.jar as a Maven dependency you can add it as an IDE library, but, given your project is already a Maven project, I *do not recommend that approach* and won&#39;t outline it here as I don&#39;t use it or recommend it and I am not familiar with it.","body":"If you don&#39;t want the Figures.jar as a Maven dependency you can add it as an IDE library, but, given your project is already a Maven project, I <i>do not recommend that approach</i> and won&#39;t outline it here as I don&#39;t use it or recommend it and I am not familiar with it."},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":0,"creation_date":1698999758,"post_id":77406062,"comment_id":136478116,"body_markdown":"So. If i add a Figures.jar as a module in Project Structure -&gt; Modules and the add a `requires Figures` in the module-info.java i have the same exception: `module not found`.\nBut if i add it like a library in Project Structure -&gt; Libraries and dont add `requires Figures`, i dont know how to import classes. Im writing `import..` and it doesnt suggest anything automatically. \nThe structure of the jar im attaching on the screenshot","body":"So. If i add a Figures.jar as a module in Project Structure -&gt; Modules and the add a <code>requires Figures</code> in the module-info.java i have the same exception: <code>module not found</code>. But if i add it like a library in Project Structure -&gt; Libraries and dont add <code>requires Figures</code>, i dont know how to import classes. Im writing <code>import..</code> and it doesnt suggest anything automatically.  The structure of the jar im attaching on the screenshot"},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":1,"creation_date":1699042147,"post_id":77406062,"comment_id":136486283,"body_markdown":"Well, I solved the problem by completely rebuilding the javaFX project and adding some dependencies. The question is closed, thank you all","body":"Well, I solved the problem by completely rebuilding the javaFX project and adding some dependencies. The question is closed, thank you all"}],"answers":[{"comments":[{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":0,"creation_date":1698916074,"post_id":77406124,"comment_id":136465782,"body_markdown":"Thanks, but it is really not what i need. There is mostly a problem of connecting .jar file to JavaFX. I simply need to connect the .jar as library/module or Maven dependency or something else, i don`t know how is right and use the Classes from this .jar.","body":"Thanks, but it is really not what i need. There is mostly a problem of connecting .jar file to JavaFX. I simply need to connect the .jar as library/module or Maven dependency or something else, i don`t know how is right and use the Classes from this .jar."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1698927188,"post_id":77406124,"comment_id":136467797,"body_markdown":"@Lion: A related example is examined [here](https://stackoverflow.com/a/76276885/230513).","body":"@Lion: A related example is examined <a href=\"https://stackoverflow.com/a/76276885/230513\">here</a>."},{"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"score":0,"creation_date":1698938658,"post_id":77406124,"comment_id":136470395,"body_markdown":"I`ve done all of the steps described in but i have the same exception anyway","body":"I`ve done all of the steps described in but i have the same exception anyway"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1699054981,"post_id":77406124,"comment_id":136487661,"body_markdown":"The asker (Lion) provided a comment: &quot;I solved the problem by completely rebuilding the javaFX project and adding some dependencies.&quot;.","body":"The asker (Lion) provided a comment: &quot;I solved the problem by completely rebuilding the javaFX project and adding some dependencies.&quot;."}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698880582,"creation_date":1698880582,"answer_id":77406124,"question_id":77406062,"body_markdown":"You can see this guide for creating your own maven and java modules that you reuse in other projects: \r\n\r\n * https://stackoverflow.com/questions/76311539/javafx-custom-component-usage-in-scenebuilder/76317530#76317530\r\n\r\nThat guide also goes into how you create custom components and import them into SceneBuilder, so it covers more info than what you need, but the rest of the stuff around how to do this with Java and Maven, without SceneBuilder is still applicable to your case.","title":"Problem with connecting a .jar file to a JavaFX project","body":"<p>You can see this guide for creating your own maven and java modules that you reuse in other projects:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/76311539/javafx-custom-component-usage-in-scenebuilder/76317530#76317530\">JavaFX custom component usage in SceneBuilder</a></li>\n</ul>\n<p>That guide also goes into how you create custom components and import them into SceneBuilder, so it covers more info than what you need, but the rest of the stuff around how to do this with Java and Maven, without SceneBuilder is still applicable to your case.</p>\n"}],"owner":{"account_id":26711411,"reputation":3,"user_id":20316710,"display_name":"Lion"},"comment_count":22,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699005187,"creation_date":1698879251,"question_id":77406062,"body_markdown":"The following problem has arisen.\r\nI made a `.jar` file from one of my projects, which needs to be connected to another project. In another project, I connected it via &lt;kbd&gt;Project Structure&lt;/kbd&gt; -&gt; &lt;kbd&gt;Libraries&lt;/kbd&gt; and &lt;kbd&gt;Project Structure&lt;/kbd&gt; -&gt; &lt;kbd&gt;Modules&lt;/kbd&gt;.\r\nIntelliJ then suggested adding requires Figures to the module-info.java file.\r\nWhen compiling, the following error appears:\r\n&gt;java: module not found: Figures.\r\n\r\nWhy does this happen and how to fix it?\r\n\r\n\r\nI tried to connect as a module in &lt;kbd&gt;Project Structure&lt;/kbd&gt; -&gt; &lt;kbd&gt;Modules&lt;/kbd&gt; and as like library in &lt;kbd&gt;Project Structure&lt;/kbd&gt; -&gt; &lt;kbd&gt;Libraries&lt;/kbd&gt;. Tried to delete the module-info.java, but it doesn`t work without it.\r\n\r\nThe structure of the Figures.jar\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/M5VVH.png\r\n\r\nThe directory `META-INF` has only one file `MANIFEST.MF` with:\r\n```\r\nManifest-Version: 1.0\r\nMain-Class: App\r\n```","title":"Problem with connecting a .jar file to a JavaFX project","body":"<p>The following problem has arisen.\nI made a <code>.jar</code> file from one of my projects, which needs to be connected to another project. In another project, I connected it via <kbd>Project Structure</kbd> -&gt; <kbd>Libraries</kbd> and <kbd>Project Structure</kbd> -&gt; <kbd>Modules</kbd>.\nIntelliJ then suggested adding requires Figures to the module-info.java file.\nWhen compiling, the following error appears:</p>\n<blockquote>\n<p>java: module not found: Figures.</p>\n</blockquote>\n<p>Why does this happen and how to fix it?</p>\n<p>I tried to connect as a module in <kbd>Project Structure</kbd> -&gt; <kbd>Modules</kbd> and as like library in <kbd>Project Structure</kbd> -&gt; <kbd>Libraries</kbd>. Tried to delete the module-info.java, but it doesn`t work without it.</p>\n<p>The structure of the Figures.jar\n<a href=\"https://i.stack.imgur.com/M5VVH.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>The directory <code>META-INF</code> has only one file <code>MANIFEST.MF</code> with:</p>\n<pre><code>Manifest-Version: 1.0\nMain-Class: App\n</code></pre>\n"},{"tags":["java","jvm","garbage-collection","quarkus","direct-buffer"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1699005342,"post_id":77415347,"comment_id":136479037,"body_markdown":"Do you know how the buffers are created? Is it using `ByteBuffer`, the foreign function and memory API, `Unsafe` or something else? Maybe the application is needing the buffers for initialization? Can you try reducing it to a [mcve]?","body":"Do you know how the buffers are created? Is it using <code>ByteBuffer</code>, the foreign function and memory API, <code>Unsafe</code> or something else? Maybe the application is needing the buffers for initialization? Can you try reducing it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1699005831,"post_id":77415347,"comment_id":136479118,"body_markdown":"@dan1st  jcmd VM.native_memory indicates it is Unsafe, but idk.","body":"@dan1st  jcmd VM.native_memory indicates it is Unsafe, but idk."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1699008538,"post_id":77415347,"comment_id":136479560,"body_markdown":"Garbage collection is driven by memory demands, not by memory occupation. It’s not unusual that low activity, which has low memory demands, does not trigger garbage collection, regardless of how much memory has been occupied. To add fuel to the flames, the garbage collector only uses the occupied heap memory to determine whether to run. In the heap memory, a direct buffer is a tiny object.","body":"Garbage collection is driven by memory demands, not by memory occupation. It’s not unusual that low activity, which has low memory demands, does not trigger garbage collection, regardless of how much memory has been occupied. To add fuel to the flames, the garbage collector only uses the occupied heap memory to determine whether to run. In the heap memory, a direct buffer is a tiny object."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1699009452,"post_id":77415347,"comment_id":136479697,"body_markdown":"@Holger that is what I thought too. However, often the pod is terminated, even though the heap memory hasn&#39;t exceeded the Xmx limit. In such cases, it seems that the sole reason for termination is the high usage of direct memory. This observation prompted our investigation and the associated question. By the way, in the screenshot provided earlier, the pod was terminated at 23:09 due to reaching its memory limit of 12 gigabytes.","body":"@Holger that is what I thought too. However, often the pod is terminated, even though the heap memory hasn&#39;t exceeded the Xmx limit. In such cases, it seems that the sole reason for termination is the high usage of direct memory. This observation prompted our investigation and the associated question. By the way, in the screenshot provided earlier, the pod was terminated at 23:09 due to reaching its memory limit of 12 gigabytes."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1699009572,"post_id":77415347,"comment_id":136479725,"body_markdown":"What is terminating the JVM? If the limitation is enforced by the os or container, the JVM won’t care about a limit it doesn’t know of. You should set, e.g. `-XX:MaxDirectMemorySize=…` then.","body":"What is terminating the JVM? If the limitation is enforced by the os or container, the JVM won’t care about a limit it doesn’t know of. You should set, e.g. <code>-XX:MaxDirectMemorySize=…</code> then."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1699010318,"post_id":77415347,"comment_id":136479851,"body_markdown":"Yes, now I&#39;m using MaxDirectMemorySize. lets see if it helps","body":"Yes, now I&#39;m using MaxDirectMemorySize. lets see if it helps"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1699012369,"post_id":77415347,"comment_id":136480207,"body_markdown":"It should be mentioned that the newer concurrent GCs might run aside the application even if there are no memory demands.","body":"It should be mentioned that the newer concurrent GCs might run aside the application even if there are no memory demands."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1699013420,"post_id":77415347,"comment_id":136480394,"body_markdown":"@dan1st well apparently it is not the case here with java 21 and G1","body":"@dan1st well apparently it is not the case here with java 21 and G1"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1699015710,"post_id":77415347,"comment_id":136480853,"body_markdown":"@Urb With new concurrent GCs, I meant ZGC and Shenandoah.","body":"@Urb With new concurrent GCs, I meant ZGC and Shenandoah."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1699103694,"post_id":77415347,"comment_id":136490707,"body_markdown":"@Holger setting -XX:MaxDirectMemorySize=1G didn&#39;t resolve the issue. The JVM exceeded the 12G limit even though Xmx was set to 8G, which theoretically should have limited memory usage to no more than 10G. However, the usage spiked to 12G in an idle state after running for 16h, leading to termination by Kubernetes. It appears that there&#39;s another factor causing off-heap memory consumption that cannot be controlled and is not visible in any metrics","body":"@Holger setting -XX:MaxDirectMemorySize=1G didn&#39;t resolve the issue. The JVM exceeded the 12G limit even though Xmx was set to 8G, which theoretically should have limited memory usage to no more than 10G. However, the usage spiked to 12G in an idle state after running for 16h, leading to termination by Kubernetes. It appears that there&#39;s another factor causing off-heap memory consumption that cannot be controlled and is not visible in any metrics"},{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":0,"creation_date":1699256121,"post_id":77415347,"comment_id":136503784,"body_markdown":"you should try using visualvm with buffer-monitor plugin installed on it and try to run your code in local , you might be able to catch where exactly memory is getting allocated off-heap","body":"you should try using visualvm with buffer-monitor plugin installed on it and try to run your code in local , you might be able to catch where exactly memory is getting allocated off-heap"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699276771,"post_id":77415347,"comment_id":136507285,"body_markdown":"So the spikes do not appear in the “JVM Buffer capacity” graph anymore? Did you set a limit on Metaspace?","body":"So the spikes do not appear in the “JVM Buffer capacity” graph anymore? Did you set a limit on Metaspace?"},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1699287038,"post_id":77415347,"comment_id":136509600,"body_markdown":"@Holger there are spikes but they are as big as defined limit, which I have reduced even further and for now its stable. The next option would be Metaspace, although  VM.native_memory indicates that the Unsafe_AllocateMemory0 is the problem. I think, it is not really possible to limit allocations of unsafe and the app just need a higher limit set to not to crash","body":"@Holger there are spikes but they are as big as defined limit, which I have reduced even further and for now its stable. The next option would be Metaspace, although  VM.native_memory indicates that the Unsafe_AllocateMemory0 is the problem. I think, it is not really possible to limit allocations of unsafe and the app just need a higher limit set to not to crash"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1699288465,"post_id":77415347,"comment_id":136509922,"body_markdown":"Unsafe_AllocateMemory0  is the symptom, the problem is the caller. The callers should be the manageable components (like the direct buffers). There shouldn’t be any unlimited callers.","body":"Unsafe_AllocateMemory0  is the symptom, the problem is the caller. The callers should be the manageable components (like the direct buffers). There shouldn’t be any unlimited callers."}],"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699005087,"creation_date":1699002035,"question_id":77415347,"body_markdown":"I have a Java application built on the Quarkus framework. Immediately after deploying the application, it consumes a significant amount of direct buffer memory. As illustrated in the screenshot, the *jvm_buffer_total_capacity_bytes* metric indicates that approximately up to 2.5 gigabytes of memory are in use, even when the CPU is idle, and there are hardly any incoming requests.\r\n\r\nHowever, when the application becomes more active, here after 23:00, and the garbage collector begins its hard work, the *jvm_buffer_total_capacity_bytes* metric drops to just a few megabytes.\r\n\r\nOn another run, I&#39;ve used jcmd  VM.native_memory to check the native memory diff. Compared to base line taken after a few minutes after start and the highest usage the output is\r\n\r\n    [0x00007fd60cd53d71] Unsafe_AllocateMemory0+0x81\r\n    [0x00007fd5f47d9861]\r\n                                 (malloc=859648KB type=Other +777122KB #2750 +2443)\r\n\r\nMy question is, why is there a high usage of direct buffer memory when the application is not experiencing a heavy load?\r\n\r\nSettings:\r\n\r\nOpenJDK 64-Bit Server VM Corretto-21.0.0.35.1 (build 21+35-LTS, mixed mode, sharing) \r\n\r\n-Xms8000M -Xmx8000M -XX:+UseG1GC\r\n\r\nwith java flight recorder enabled\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tCp1W.png","title":"How JVM handles direct buffers","body":"<p>I have a Java application built on the Quarkus framework. Immediately after deploying the application, it consumes a significant amount of direct buffer memory. As illustrated in the screenshot, the <em>jvm_buffer_total_capacity_bytes</em> metric indicates that approximately up to 2.5 gigabytes of memory are in use, even when the CPU is idle, and there are hardly any incoming requests.</p>\n<p>However, when the application becomes more active, here after 23:00, and the garbage collector begins its hard work, the <em>jvm_buffer_total_capacity_bytes</em> metric drops to just a few megabytes.</p>\n<p>On another run, I've used jcmd  VM.native_memory to check the native memory diff. Compared to base line taken after a few minutes after start and the highest usage the output is</p>\n<pre><code>[0x00007fd60cd53d71] Unsafe_AllocateMemory0+0x81\n[0x00007fd5f47d9861]\n                             (malloc=859648KB type=Other +777122KB #2750 +2443)\n</code></pre>\n<p>My question is, why is there a high usage of direct buffer memory when the application is not experiencing a heavy load?</p>\n<p>Settings:</p>\n<p>OpenJDK 64-Bit Server VM Corretto-21.0.0.35.1 (build 21+35-LTS, mixed mode, sharing)</p>\n<p>-Xms8000M -Xmx8000M -XX:+UseG1GC</p>\n<p>with java flight recorder enabled</p>\n<p><a href=\"https://i.stack.imgur.com/tCp1W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tCp1W.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","postgresql","jdbc","pgbouncer"],"comments":[{"owner":{"display_name":"user330315"},"score":0,"creation_date":1317394615,"post_id":7611926,"comment_id":9238192,"body_markdown":"Maybe a pgbouncer problem? Or an outdated JDBC driver?","body":"Maybe a pgbouncer problem? Or an outdated JDBC driver?"},{"owner":{"account_id":230255,"reputation":22438,"user_id":493749,"accept_rate":95,"display_name":"Chris Cashwell"},"score":0,"creation_date":1317395170,"post_id":7611926,"comment_id":9238394,"body_markdown":"It&#39;s definitely a pgbouncer problem. We bypassed pgbouncer and hit Postgres directly, and the prepared statement works. The JDBC driver is the latest available.","body":"It&#39;s definitely a pgbouncer problem. We bypassed pgbouncer and hit Postgres directly, and the prepared statement works. The JDBC driver is the latest available."},{"owner":{"account_id":239368,"reputation":8596,"user_id":508908,"display_name":"Scott Marlowe"},"score":0,"creation_date":1317397110,"post_id":7611926,"comment_id":9239109,"body_markdown":"Is there some setting that tells pgbouncer to reset connections on release back to the pool?  Sounds like you&#39;re reusing connetions that already have run the prepare before.","body":"Is there some setting that tells pgbouncer to reset connections on release back to the pool?  Sounds like you&#39;re reusing connetions that already have run the prepare before."},{"owner":{"account_id":230255,"reputation":22438,"user_id":493749,"accept_rate":95,"display_name":"Chris Cashwell"},"score":0,"creation_date":1317402610,"post_id":7611926,"comment_id":9240659,"body_markdown":"@ScottMarlowe there is. It&#39;s the connection pooling option. We use `transaction pooling`, which is supposed to release connections back to the pool immediately after a transaction ends.","body":"@ScottMarlowe there is. It&#39;s the connection pooling option. We use <code>transaction pooling</code>, which is supposed to release connections back to the pool immediately after a transaction ends."},{"owner":{"account_id":239368,"reputation":8596,"user_id":508908,"display_name":"Scott Marlowe"},"score":0,"creation_date":1317407101,"post_id":7611926,"comment_id":9241774,"body_markdown":"It&#39;s not about releasing the connection, it&#39;s about resetting it.  If it doesn&#39;t do a reset on the connection then old things like prepared queries can still be there.","body":"It&#39;s not about releasing the connection, it&#39;s about resetting it.  If it doesn&#39;t do a reset on the connection then old things like prepared queries can still be there."},{"owner":{"account_id":230255,"reputation":22438,"user_id":493749,"accept_rate":95,"display_name":"Chris Cashwell"},"score":0,"creation_date":1317408278,"post_id":7611926,"comment_id":9242073,"body_markdown":"@ScottMarlowe how might that be achieved?","body":"@ScottMarlowe how might that be achieved?"},{"owner":{"account_id":239368,"reputation":8596,"user_id":508908,"display_name":"Scott Marlowe"},"score":0,"creation_date":1317424197,"post_id":7611926,"comment_id":9245635,"body_markdown":"Take a look here: http://pgpool.projects.postgresql.org/pgpool-II/doc/pgpool-en.html#connection_pool_mode  Basically it depends on pg version, but \tABORT; DISCARD ALL; will work for all versions from 8.3 onward","body":"Take a look here: <a href=\"http://pgpool.projects.postgresql.org/pgpool-II/doc/pgpool-en.html#connection_pool_mode\" rel=\"nofollow noreferrer\">pgpool.projects.postgresql.org/pgpool-II/doc/&hellip;</a>  Basically it depends on pg version, but \tABORT; DISCARD ALL; will work for all versions from 8.3 onward"},{"owner":{"account_id":53471,"reputation":5683,"user_id":159837,"accept_rate":75,"display_name":"Fırat K&#252;&#231;&#252;k"},"score":0,"creation_date":1563186830,"post_id":7611926,"comment_id":100603736,"body_markdown":"`prepareThreshold=0` solved my issue.","body":"<code>prepareThreshold=0</code> solved my issue."}],"answers":[{"comments":[{"owner":{"account_id":259365,"reputation":31075,"user_id":542190,"display_name":"filmor"},"score":0,"creation_date":1610967202,"post_id":7612639,"comment_id":116290707,"body_markdown":"The link is dead, unfortunately. This is an archive snapshot: http://web.archive.org/web/20120222062130/http://pgfoundry.org/pipermail/pgbouncer-general/2010-February/000507.html","body":"The link is dead, unfortunately. This is an archive snapshot: <a href=\"http://web.archive.org/web/20120222062130/http://pgfoundry.org/pipermail/pgbouncer-general/2010-February/000507.html\" rel=\"nofollow noreferrer\">web.archive.org/web/20120222062130/http://pgfoundry.org/&hellip;</a>"},{"owner":{"account_id":55870,"reputation":2321,"user_id":167408,"accept_rate":90,"display_name":"Highstead"},"score":0,"creation_date":1693238478,"post_id":7612639,"comment_id":135731004,"body_markdown":"Could you create a separate pool for your bulk inserts in this case that uses session pooling and use the transaction pooling in another location or does this have some other negative consequence?","body":"Could you create a separate pool for your bulk inserts in this case that uses session pooling and use the transaction pooling in another location or does this have some other negative consequence?"}],"tags":[],"owner":{"account_id":230255,"reputation":22438,"user_id":493749,"accept_rate":95,"display_name":"Chris Cashwell"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1319034752,"creation_date":1317396352,"answer_id":7612639,"question_id":7611926,"body_markdown":"This turned out to be a pgBouncer issue that occurs when using anything other than **session pooling**. We were using **transaction pooling**, which apparently can&#39;t support prepared statements. By switching to **session pooling**, we got around the issue.\r\n\r\nUnfortunately, this isn&#39;t a good fix for our use case. We have two separate uses for pgBouncer: one part of our system does bulk updates which are most efficient as prepared statements, and another part needs many connections in very rapid succession. Since pgBouncer doesn&#39;t allow switching back and forth between **session pooling** and **transaction pooling**, we&#39;re forced to either run two separate instances on different ports just to support our needs, or to implement [this patch][1]. Preliminary testing shows it to work well, but time will tell if it proves to be safe and effective.\r\n\r\n\r\n  [1]: http://pgfoundry.org/pipermail/pgbouncer-general/2010-February/000507.html","title":"Postgres - ERROR: prepared statement &quot;S_1&quot; already exists","body":"<p>This turned out to be a pgBouncer issue that occurs when using anything other than <strong>session pooling</strong>. We were using <strong>transaction pooling</strong>, which apparently can't support prepared statements. By switching to <strong>session pooling</strong>, we got around the issue.</p>\n\n<p>Unfortunately, this isn't a good fix for our use case. We have two separate uses for pgBouncer: one part of our system does bulk updates which are most efficient as prepared statements, and another part needs many connections in very rapid succession. Since pgBouncer doesn't allow switching back and forth between <strong>session pooling</strong> and <strong>transaction pooling</strong>, we're forced to either run two separate instances on different ports just to support our needs, or to implement <a href=\"http://pgfoundry.org/pipermail/pgbouncer-general/2010-February/000507.html\" rel=\"noreferrer\">this patch</a>. Preliminary testing shows it to work well, but time will tell if it proves to be safe and effective.</p>\n"},{"comments":[{"owner":{"account_id":230255,"reputation":22438,"user_id":493749,"accept_rate":95,"display_name":"Chris Cashwell"},"score":1,"creation_date":1317744439,"post_id":7641499,"comment_id":9294522,"body_markdown":"&quot;When transaction pooling is used, the server_reset_query should be empty, as clients should not use any session features.&quot; Doesn&#39;t look like option 3 is possible. Option 1 isn&#39;t feasible for our use. Option 2 could possibly work, but how might that be accomplished?","body":"&quot;When transaction pooling is used, the server_reset_query should be empty, as clients should not use any session features.&quot; Doesn&#39;t look like option 3 is possible. Option 1 isn&#39;t feasible for our use. Option 2 could possibly work, but how might that be accomplished?"},{"owner":{"account_id":230255,"reputation":22438,"user_id":493749,"accept_rate":95,"display_name":"Chris Cashwell"},"score":0,"creation_date":1317745282,"post_id":7641499,"comment_id":9294815,"body_markdown":"It appears that `session_lifetime` may be the setting that causes the problem. We&#39;re experimenting with it now. I&#39;ll report back shortly.","body":"It appears that <code>session_lifetime</code> may be the setting that causes the problem. We&#39;re experimenting with it now. I&#39;ll report back shortly."},{"owner":{"account_id":258278,"reputation":6841,"user_id":540341,"display_name":"filiprem"},"score":1,"creation_date":1317819474,"post_id":7641499,"comment_id":9309736,"body_markdown":"@Chris: option 3 is possible - pgbouncer doc says what SHOULD be done in general, but in your case I would try it. \nRegarding option 2, see http://www.commandprompt.com/ppbook/x20921, and regarding option 1 - why not?","body":"@Chris: option 3 is possible - pgbouncer doc says what SHOULD be done in general, but in your case I would try it.  Regarding option 2, see <a href=\"http://www.commandprompt.com/ppbook/x20921\" rel=\"nofollow noreferrer\">commandprompt.com/ppbook/x20921</a>, and regarding option 1 - why not?"},{"owner":{"account_id":1531824,"reputation":3794,"user_id":1428862,"display_name":"Scott Carlson"},"score":2,"creation_date":1440441485,"post_id":7641499,"comment_id":52263865,"body_markdown":"new link for server_reset_query docs : \nhttps://pgbouncer.github.io/faq.html#what-should-my-serverresetquery-be","body":"new link for server_reset_query docs :  <a href=\"https://pgbouncer.github.io/faq.html#what-should-my-serverresetquery-be\" rel=\"nofollow noreferrer\">pgbouncer.github.io/faq.html#what-should-my-serverresetquery&zwnj;&#8203;-be</a>"}],"tags":[],"owner":{"account_id":258278,"reputation":6841,"user_id":540341,"display_name":"filiprem"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1393737255,"creation_date":1317681705,"answer_id":7641499,"question_id":7611926,"body_markdown":"New, Better Answer\r\n==================\r\n\r\nTo discard session state and effectively forget the **&quot;S_1&quot;** prepared statement, use server_reset_query option in PgBouncer config.\r\n\r\n\r\n\r\nOld Answer\r\n==========\r\n\r\nSee http://pgbouncer.projects.postgresql.org/doc/faq.html#_how_to_use_prepared_statements_with_transaction_pooling\r\n\r\nSwitching into session mode is not an ideal solution. Transacion pooling is much more efficient. But for transaction pooling you need stateless DB calls.\r\n\r\nI think you have three options:\r\n\r\n 1. Disable PS in jdbc driver,\r\n 2. manually deallocate them in your Java code,\r\n 3. configure pgbouncer to discard them on transaction end.\r\n\r\nI would try option 1 or option 3 - depending on actual way in which your app uses them.\r\n\r\nFor more info, read the docs:\r\n\r\nhttp://pgbouncer.projects.postgresql.org/doc/config.html (search for server_reset_query), \r\n\r\nor google for this: \r\n\r\n    postgresql jdbc +preparethreshold\r\n","title":"Postgres - ERROR: prepared statement &quot;S_1&quot; already exists","body":"<h1>New, Better Answer</h1>\n\n<p>To discard session state and effectively forget the <strong>\"S_1\"</strong> prepared statement, use server_reset_query option in PgBouncer config.</p>\n\n<h1>Old Answer</h1>\n\n<p>See <a href=\"http://pgbouncer.projects.postgresql.org/doc/faq.html#_how_to_use_prepared_statements_with_transaction_pooling\" rel=\"nofollow\">http://pgbouncer.projects.postgresql.org/doc/faq.html#_how_to_use_prepared_statements_with_transaction_pooling</a></p>\n\n<p>Switching into session mode is not an ideal solution. Transacion pooling is much more efficient. But for transaction pooling you need stateless DB calls.</p>\n\n<p>I think you have three options:</p>\n\n<ol>\n<li>Disable PS in jdbc driver,</li>\n<li>manually deallocate them in your Java code,</li>\n<li>configure pgbouncer to discard them on transaction end.</li>\n</ol>\n\n<p>I would try option 1 or option 3 - depending on actual way in which your app uses them.</p>\n\n<p>For more info, read the docs:</p>\n\n<p><a href=\"http://pgbouncer.projects.postgresql.org/doc/config.html\" rel=\"nofollow\">http://pgbouncer.projects.postgresql.org/doc/config.html</a> (search for server_reset_query), </p>\n\n<p>or google for this: </p>\n\n<pre><code>postgresql jdbc +preparethreshold\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5940200,"reputation":721,"user_id":4671737,"accept_rate":50,"display_name":"Tony Murphy"},"score":0,"creation_date":1602840327,"post_id":57070517,"comment_id":113853162,"body_markdown":"worked for me - but perhaps it would be better to remove useAffectedRows=true from your answer? not necessary?","body":"worked for me - but perhaps it would be better to remove useAffectedRows=true from your answer? not necessary?"},{"owner":{"account_id":5592943,"reputation":835,"user_id":4431490,"display_name":"xuehui"},"score":0,"creation_date":1603360512,"post_id":57070517,"comment_id":114015240,"body_markdown":"OK，just removed it","body":"OK，just removed it"}],"tags":[],"owner":{"account_id":5592943,"reputation":835,"user_id":4431490,"display_name":"xuehui"},"comment_count":2,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1603360532,"creation_date":1563347953,"answer_id":57070517,"question_id":7611926,"body_markdown":"Disabling prepared statements in JDBC.\r\nThe proper way to do it for JDBC is adding &quot;prepareThreshold=0&quot; parameter to connect string.\r\n\r\n    jdbc:postgresql://ip:port/db_name?prepareThreshold=0\r\n\r\n","title":"Postgres - ERROR: prepared statement &quot;S_1&quot; already exists","body":"<p>Disabling prepared statements in JDBC.\nThe proper way to do it for JDBC is adding &quot;prepareThreshold=0&quot; parameter to connect string.</p>\n<pre><code>jdbc:postgresql://ip:port/db_name?prepareThreshold=0\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5758552,"reputation":567,"user_id":8307074,"display_name":"Dilip D"},"score":1,"creation_date":1593584996,"post_id":62670637,"comment_id":110828669,"body_markdown":"Please post the answers to particular version of psql which ever user is asking because upgrading the psql may cause other issues and it would be difficult for user to understand. and try to correct/improvise the code which ever is posted in question","body":"Please post the answers to particular version of psql which ever user is asking because upgrading the psql may cause other issues and it would be difficult for user to understand. and try to correct/improvise the code which ever is posted in question"},{"owner":{"account_id":18971910,"reputation":1,"user_id":13845181,"display_name":"Anonymous"},"score":0,"creation_date":1594825420,"post_id":62670637,"comment_id":111263729,"body_markdown":"Thanks for the feedback! - Dilip D\nI have upgraded to postgres.jdbc.4.2-42..2.14 from postgres 8.4","body":"Thanks for the feedback! - Dilip D I have upgraded to postgres.jdbc.4.2-42..2.14 from postgres 8.4"}],"tags":[],"owner":{"account_id":18971910,"reputation":1,"user_id":13845181,"display_name":"Anonymous"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593583604,"creation_date":1593583604,"answer_id":62670637,"question_id":7611926,"body_markdown":"I had this problem, we have pgbouncer configurated in transaction level, we were using psql 11.8, we just upgraded the psql jar to the latest version, it got fixed.","title":"Postgres - ERROR: prepared statement &quot;S_1&quot; already exists","body":"<p>I had this problem, we have pgbouncer configurated in transaction level, we were using psql 11.8, we just upgraded the psql jar to the latest version, it got fixed.</p>\n"},{"tags":[],"owner":{"account_id":19585867,"reputation":158,"user_id":14333993,"display_name":"Michele"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636480949,"creation_date":1636480949,"answer_id":69902957,"question_id":7611926,"body_markdown":"In our case the issue was not related to pgbouncer. Since we did were not able to append ```prepareThreshold=0``` to the URL what we did to fix was the following \r\n\r\nView the prepared statements\r\n```\r\nselect * from pg_prepared_statements;\r\n````\r\n\r\nDeallocate the faulty table\r\n```\r\nselect * from pg_prepared_statements;\r\ndeallocate &quot;S_1&quot;;\r\n","title":"Postgres - ERROR: prepared statement &quot;S_1&quot; already exists","body":"<p>In our case the issue was not related to pgbouncer. Since we did were not able to append <code>prepareThreshold=0</code> to the URL what we did to fix was the following</p>\n<p>View the prepared statements</p>\n<pre><code>select * from pg_prepared_statements;\n</code></pre>\n<p>Deallocate the faulty table</p>\n<pre><code>select * from pg_prepared_statements;\ndeallocate &quot;S_1&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3032072,"reputation":3081,"user_id":2570866,"accept_rate":62,"display_name":"JelteF"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699004840,"creation_date":1699004840,"answer_id":77415647,"question_id":7611926,"body_markdown":"Since PgBouncer 1.21.0 it now supports protocol level named prepared statements, which is what JDBC uses. You can turn this support on by setting `max_prepared_statements` to a non-zero value. For details check the docs: https://www.pgbouncer.org/config.html#max_prepared_statements","title":"Postgres - ERROR: prepared statement &quot;S_1&quot; already exists","body":"<p>Since PgBouncer 1.21.0 it now supports protocol level named prepared statements, which is what JDBC uses. You can turn this support on by setting <code>max_prepared_statements</code> to a non-zero value. For details check the docs: <a href=\"https://www.pgbouncer.org/config.html#max_prepared_statements\" rel=\"nofollow noreferrer\">https://www.pgbouncer.org/config.html#max_prepared_statements</a></p>\n"}],"owner":{"account_id":230255,"reputation":22438,"user_id":493749,"accept_rate":95,"display_name":"Chris Cashwell"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36123,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"accepted_answer_id":7612639,"answer_count":6,"score":40,"last_activity_date":1699004840,"creation_date":1317393291,"question_id":7611926,"body_markdown":"When executing batch queries via JDBC to pgbouncer, I get the following error:\r\n\r\n    org.postgresql.util.PSQLException: ERROR: prepared statement &quot;S_1&quot; already exists\r\n\r\nI&#39;ve found bug reports around the web, but they all seem to deal with Postgres 8.3 or below, whereas we&#39;re working with Postgres 9.\r\n\r\nHere&#39;s the code that triggers the error:\r\n\r\n    this.getJdbcTemplate().update(&quot;delete from xx where username = ?&quot;, username);\r\n    \r\n    this.getJdbcTemplate().batchUpdate(\t&quot;INSERT INTO xx(a, b, c, d, e) &quot; + \r\n    \t\t\t\t&quot;VALUES (?, ?, ?, ?, ?)&quot;, new BatchPreparedStatementSetter() {\r\n    \t@Override\r\n    \tpublic void setValues(PreparedStatement ps, int i) throws SQLException {\r\n    \t\tps.setString(1, value1);\r\n    \t\tps.setString(2, value2);\r\n    \t\tps.setString(3, value3);\r\n    \t\tps.setString(4, value4);\r\n    \t\tps.setBoolean(5, value5);\r\n    \t}\r\n    \t@Override\r\n    \tpublic int getBatchSize() {\r\n    \t\treturn something();\r\n    \t}\r\n    });\r\n\r\nAnyone seen this before?\r\n\r\n***Edit 1:***\r\n\r\nThis turned out to be a pgBouncer issue that occurs when using anything other than **session pooling**. We were using **transaction pooling**, which apparently can&#39;t support prepared statements. By switching to **session pooling**, we got around the issue.\r\n\r\nUnfortunately, this isn&#39;t a good fix for our use case. We have two separate uses for pgBouncer: one part of our system does bulk updates which are most efficient as prepared statements, and another part needs many connections in very rapid succession. Since pgBouncer doesn&#39;t allow switching back and forth between **session pooling** and **transaction pooling**, we&#39;re forced to run two separate instances on different ports just to support our needs.\r\n\r\n***Edit 2:***\r\n\r\nI ran across [this link][1], where the poster has rolled a patch of his own. We&#39;re currently looking at implementing it for our own uses if it proves to be safe and effective.\r\n\r\n\r\n  [1]: http://pgfoundry.org/pipermail/pgbouncer-general/2010-February/000507.html","title":"Postgres - ERROR: prepared statement &quot;S_1&quot; already exists","body":"<p>When executing batch queries via JDBC to pgbouncer, I get the following error:</p>\n\n<pre><code>org.postgresql.util.PSQLException: ERROR: prepared statement \"S_1\" already exists\n</code></pre>\n\n<p>I've found bug reports around the web, but they all seem to deal with Postgres 8.3 or below, whereas we're working with Postgres 9.</p>\n\n<p>Here's the code that triggers the error:</p>\n\n<pre><code>this.getJdbcTemplate().update(\"delete from xx where username = ?\", username);\n\nthis.getJdbcTemplate().batchUpdate( \"INSERT INTO xx(a, b, c, d, e) \" + \n                \"VALUES (?, ?, ?, ?, ?)\", new BatchPreparedStatementSetter() {\n    @Override\n    public void setValues(PreparedStatement ps, int i) throws SQLException {\n        ps.setString(1, value1);\n        ps.setString(2, value2);\n        ps.setString(3, value3);\n        ps.setString(4, value4);\n        ps.setBoolean(5, value5);\n    }\n    @Override\n    public int getBatchSize() {\n        return something();\n    }\n});\n</code></pre>\n\n<p>Anyone seen this before?</p>\n\n<p><strong><em>Edit 1:</em></strong></p>\n\n<p>This turned out to be a pgBouncer issue that occurs when using anything other than <strong>session pooling</strong>. We were using <strong>transaction pooling</strong>, which apparently can't support prepared statements. By switching to <strong>session pooling</strong>, we got around the issue.</p>\n\n<p>Unfortunately, this isn't a good fix for our use case. We have two separate uses for pgBouncer: one part of our system does bulk updates which are most efficient as prepared statements, and another part needs many connections in very rapid succession. Since pgBouncer doesn't allow switching back and forth between <strong>session pooling</strong> and <strong>transaction pooling</strong>, we're forced to run two separate instances on different ports just to support our needs.</p>\n\n<p><strong><em>Edit 2:</em></strong></p>\n\n<p>I ran across <a href=\"http://pgfoundry.org/pipermail/pgbouncer-general/2010-February/000507.html\" rel=\"noreferrer\">this link</a>, where the poster has rolled a patch of his own. We're currently looking at implementing it for our own uses if it proves to be safe and effective.</p>\n"},{"tags":["java","email","spring-boot","mime-message"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1452348918,"post_id":34694468,"comment_id":57134973,"body_markdown":"Did you specify the email address of the sender?","body":"Did you specify the email address of the sender?"},{"owner":{"account_id":5287916,"reputation":105,"user_id":4221269,"accept_rate":27,"display_name":"KENDRA SMITH"},"score":0,"creation_date":1452351870,"post_id":34694468,"comment_id":57136051,"body_markdown":"@RomanC yes from the controller i retrieved the email reservation1.getGuest().getEmail() and also specified the sender in application.properties","body":"@RomanC yes from the controller i retrieved the email reservation1.getGuest().getEmail() and also specified the sender in application.properties"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1452352157,"post_id":34694468,"comment_id":57136154,"body_markdown":"Why and where do you use such properties?","body":"Why and where do you use such properties?"},{"owner":{"account_id":5287916,"reputation":105,"user_id":4221269,"accept_rate":27,"display_name":"KENDRA SMITH"},"score":0,"creation_date":1452352353,"post_id":34694468,"comment_id":57136229,"body_markdown":"@RomanC i followed this tutorial link https://www.youtube.com/watch?v=9DLX8PMXaw0 that provided the assistance in using spring boot and smtp mail","body":"@RomanC i followed this tutorial link <a href=\"https://www.youtube.com/watch?v=9DLX8PMXaw0\" rel=\"nofollow noreferrer\">youtube.com/watch?v=9DLX8PMXaw0</a> that provided the assistance in using spring boot and smtp mail"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1452353429,"post_id":34694468,"comment_id":57136632,"body_markdown":"What didn&#39;t you get from it?","body":"What didn&#39;t you get from it?"},{"owner":{"account_id":5287916,"reputation":105,"user_id":4221269,"accept_rate":27,"display_name":"KENDRA SMITH"},"score":0,"creation_date":1452353485,"post_id":34694468,"comment_id":57136657,"body_markdown":"@RomanC i followed the tutorial but getting the error above","body":"@RomanC i followed the tutorial but getting the error above"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1452353654,"post_id":34694468,"comment_id":57136723,"body_markdown":"What is printed in the console?","body":"What is printed in the console?"},{"owner":{"account_id":5287916,"reputation":105,"user_id":4221269,"accept_rate":27,"display_name":"KENDRA SMITH"},"score":0,"creation_date":1452353912,"post_id":34694468,"comment_id":57136826,"body_markdown":"@RomanC updated the post with error log from console","body":"@RomanC updated the post with error log from console"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1452354051,"post_id":34694468,"comment_id":57136888,"body_markdown":"In the code you are using `System.out.println(reservation1.getGuest().getEmail());` I don&#39;t see the output in the log.","body":"In the code you are using <code>System.out.println(reservation1.getGuest().getEmail());</code> I don&#39;t see the output in the log."},{"owner":{"account_id":5287916,"reputation":105,"user_id":4221269,"accept_rate":27,"display_name":"KENDRA SMITH"},"score":0,"creation_date":1452356890,"post_id":34694468,"comment_id":57137914,"body_markdown":"@RomanC it prints out my email address i didnt add it in the log","body":"@RomanC it prints out my email address i didnt add it in the log"}],"answers":[{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1452364952,"creation_date":1452364952,"answer_id":34697457,"question_id":34694468,"body_markdown":"The message says that a local email address is missing. It means that sender&#39;s email address or in other words an address that consumer can use to reply on your message. This address is a property of `MimeMessage` that you use with `MimeMessageHelper`, and you can use it to set the address\r\n\r\n[32.3 Using the JavaMail MimeMessageHelper][1]\r\n\r\n&gt; A class that comes in pretty handy when dealing with JavaMail messages is the `org.springframework.mail.javamail.MimeMessageHelper` class, which shields you from having to use the verbose JavaMail API. Using the `MimeMessageHelper` it is pretty easy to create a `MimeMessage`:\r\n\r\n    // of course you would use DI in any real-world cases\r\n    JavaMailSenderImpl sender = new JavaMailSenderImpl();\r\n    sender.setHost(&quot;mail.host.com&quot;);\r\n    \r\n    MimeMessage message = sender.createMimeMessage();\r\n    MimeMessageHelper helper = new MimeMessageHelper(message);\r\n    helper.setFrom(&quot;your@email.address&quot;);\r\n    helper.setTo(&quot;test@host.com&quot;);\r\n    helper.setText(&quot;Thank you!&quot;);\r\n    sender.send(message);\r\n\r\nThis is the same code like on the doc page, but with addition of `setFrom()` which was missing only in this example. \r\n\r\n\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mail.html#mail-javamail-mime","title":"Failed messages: javax.mail.MessagingException: can&#39;t determine local email address","body":"<p>The message says that a local email address is missing. It means that sender's email address or in other words an address that consumer can use to reply on your message. This address is a property of <code>MimeMessage</code> that you use with <code>MimeMessageHelper</code>, and you can use it to set the address</p>\n\n<p><a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mail.html#mail-javamail-mime\" rel=\"noreferrer\">32.3 Using the JavaMail MimeMessageHelper</a></p>\n\n<blockquote>\n  <p>A class that comes in pretty handy when dealing with JavaMail messages is the <code>org.springframework.mail.javamail.MimeMessageHelper</code> class, which shields you from having to use the verbose JavaMail API. Using the <code>MimeMessageHelper</code> it is pretty easy to create a <code>MimeMessage</code>:</p>\n</blockquote>\n\n<pre><code>// of course you would use DI in any real-world cases\nJavaMailSenderImpl sender = new JavaMailSenderImpl();\nsender.setHost(\"mail.host.com\");\n\nMimeMessage message = sender.createMimeMessage();\nMimeMessageHelper helper = new MimeMessageHelper(message);\nhelper.setFrom(\"your@email.address\");\nhelper.setTo(\"test@host.com\");\nhelper.setText(\"Thank you!\");\nsender.send(message);\n</code></pre>\n\n<p>This is the same code like on the doc page, but with addition of <code>setFrom()</code> which was missing only in this example. </p>\n"},{"tags":[],"owner":{"account_id":9708109,"reputation":539,"user_id":7200943,"display_name":"Greko2015 GuFn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699004684,"creation_date":1699004684,"answer_id":77415626,"question_id":34694468,"body_markdown":"I added `helper.setFrom(&quot;local@email.com&quot;)` and it now work, \r\n\r\nThanks.","title":"Failed messages: javax.mail.MessagingException: can&#39;t determine local email address","body":"<p>I added <code>helper.setFrom(&quot;local@email.com&quot;)</code> and it now work,</p>\n<p>Thanks.</p>\n"}],"owner":{"account_id":5287916,"reputation":105,"user_id":4221269,"accept_rate":27,"display_name":"KENDRA SMITH"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10541,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":34697457,"answer_count":2,"score":5,"last_activity_date":1699004684,"creation_date":1452348546,"question_id":34694468,"body_markdown":"Hello i keep getting this error after following a tutorial when trying to send SMTP emails using spring boot. `Failed messages: javax.mail.MessagingException: can&#39;t determine local email address`\r\n\r\n###`application.properties`:\r\n\r\n    #email configuration\r\n    spring.mail.host = smtp.gmail.com\r\n    spring.mail.password = ************\r\n    spring.mail.username = ******@gmail.com\r\n    spring.mail.properties.mail.smtp.auth = true\r\n    spring.mail.properties.mail.smtp.ssl.enable = true\r\n    spring.mail.properties.mail.smtp.socketFactory.port = 465\r\n    spring.mail.properties.mail.smtp.socketFactory.class = javax.net.ssl.SSLSocketFactory\r\n    spring.mail.properties.mail.smtp.socketFactory.fallback = false\r\n\r\n###implementation file:\r\n\r\n    @Service(&quot;mailServiceImpl&quot;)\r\n    public class MailServiceImpl {\r\n    \r\n        @Autowired\r\n        private JavaMailSender javaMailSender;\r\n    \r\n        public void send(String to, String subject, String body) throws MessagingException {\r\n    \r\n            MimeMessage mimeMessage = javaMailSender.createMimeMessage();\r\n    \r\n            MimeMessageHelper mimeMessageHelper = new MimeMessageHelper(mimeMessage, true);\r\n            mimeMessageHelper.setSubject(subject);\r\n            mimeMessageHelper.setTo(to);\r\n            mimeMessageHelper.setText(body, true);\r\n    \r\n            javaMailSender.send(mimeMessage);\r\n        }\r\n    }\r\n\r\n\r\nAnd finally in the controller class called `HomeController.java`:\r\n\r\n    @RequestMapping (value=&quot;guest/reservation&quot;, method = RequestMethod.POST)\r\n        @ResponseBody\r\n        public Reservation createReservation(@RequestBody Reservation reservation) throws MessagingException {\r\n            Reservation reservation1 =reservationservice.create(reservation);\r\n            billingservice.create(reservation1);\r\n            String body = &quot;Welcome&quot;;\r\n            //mailServiceImpl.send(reservation1.getGuest().getEmail(), &quot;&quot;, body);\r\n            System.out.println(reservation1.getGuest().getEmail());\r\n            sendMail(reservation1.getGuest().getEmail(), &quot;Reservation&quot;, body);\r\n            return reservation1;\r\n        }\r\n    \r\n        private void sendMail(String to, String subject, String body) throws MessagingException {\r\n            mailServiceImpl.send(to, subject,  body);\r\n        }\r\n\r\n###Error from console:\r\n\r\n    2016-01-09 16:22:28.989 ERROR 17396 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.mail.MailSendException: Failed messages: javax.mail.MessagingException: can&#39;t determine local email address; message exceptions (1) are:\r\n    Failed message 1: javax.mail.MessagingException: can&#39;t determine local email address] with root cause\r\n    \r\n    org.springframework.mail.MailSendException: Failed messages: javax.mail.MessagingException: can&#39;t determine local email address\r\n    \tat org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:459)\r\n    \tat org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:345)\r\n    \tat org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:340)\r\n    \tat edu.sjsu.cmpe275Project.service.impl.MailServiceImpl.send(MailServiceImpl.java:29)\r\n    \tat edu.sjsu.cmpe275Project.controller.HomeController.sendMail(HomeController.java:69)\r\n    \tat edu.sjsu.cmpe275Project.controller.HomeController.createReservation(HomeController.java:64)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:483)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:775)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:648)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.springframework.boot.actuate.autoconfigure.EndpointWebMvcAutoConfiguration$ApplicationContextHeaderFilter.doFilterInternal(EndpointWebMvcAutoConfiguration.java:299)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:102)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:76)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:217)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\n\r\nPlease what did i do wrong?\r\n\r\n\r\n","title":"Failed messages: javax.mail.MessagingException: can&#39;t determine local email address","body":"<p>Hello i keep getting this error after following a tutorial when trying to send SMTP emails using spring boot. <code>Failed messages: javax.mail.MessagingException: can't determine local email address</code></p>\n\n<h3><code>application.properties</code>:</h3>\n\n<pre><code>#email configuration\nspring.mail.host = smtp.gmail.com\nspring.mail.password = ************\nspring.mail.username = ******@gmail.com\nspring.mail.properties.mail.smtp.auth = true\nspring.mail.properties.mail.smtp.ssl.enable = true\nspring.mail.properties.mail.smtp.socketFactory.port = 465\nspring.mail.properties.mail.smtp.socketFactory.class = javax.net.ssl.SSLSocketFactory\nspring.mail.properties.mail.smtp.socketFactory.fallback = false\n</code></pre>\n\n<h3>implementation file:</h3>\n\n<pre><code>@Service(\"mailServiceImpl\")\npublic class MailServiceImpl {\n\n    @Autowired\n    private JavaMailSender javaMailSender;\n\n    public void send(String to, String subject, String body) throws MessagingException {\n\n        MimeMessage mimeMessage = javaMailSender.createMimeMessage();\n\n        MimeMessageHelper mimeMessageHelper = new MimeMessageHelper(mimeMessage, true);\n        mimeMessageHelper.setSubject(subject);\n        mimeMessageHelper.setTo(to);\n        mimeMessageHelper.setText(body, true);\n\n        javaMailSender.send(mimeMessage);\n    }\n}\n</code></pre>\n\n<p>And finally in the controller class called <code>HomeController.java</code>:</p>\n\n<pre><code>@RequestMapping (value=\"guest/reservation\", method = RequestMethod.POST)\n    @ResponseBody\n    public Reservation createReservation(@RequestBody Reservation reservation) throws MessagingException {\n        Reservation reservation1 =reservationservice.create(reservation);\n        billingservice.create(reservation1);\n        String body = \"Welcome\";\n        //mailServiceImpl.send(reservation1.getGuest().getEmail(), \"\", body);\n        System.out.println(reservation1.getGuest().getEmail());\n        sendMail(reservation1.getGuest().getEmail(), \"Reservation\", body);\n        return reservation1;\n    }\n\n    private void sendMail(String to, String subject, String body) throws MessagingException {\n        mailServiceImpl.send(to, subject,  body);\n    }\n</code></pre>\n\n<h3>Error from console:</h3>\n\n<pre><code>2016-01-09 16:22:28.989 ERROR 17396 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.mail.MailSendException: Failed messages: javax.mail.MessagingException: can't determine local email address; message exceptions (1) are:\nFailed message 1: javax.mail.MessagingException: can't determine local email address] with root cause\n\norg.springframework.mail.MailSendException: Failed messages: javax.mail.MessagingException: can't determine local email address\n    at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:459)\n    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:345)\n    at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:340)\n    at edu.sjsu.cmpe275Project.service.impl.MailServiceImpl.send(MailServiceImpl.java:29)\n    at edu.sjsu.cmpe275Project.controller.HomeController.sendMail(HomeController.java:69)\n    at edu.sjsu.cmpe275Project.controller.HomeController.createReservation(HomeController.java:64)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:483)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:137)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:110)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:775)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:705)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:959)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:967)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:869)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:648)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:843)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.boot.actuate.autoconfigure.EndpointWebMvcAutoConfiguration$ApplicationContextHeaderFilter.doFilterInternal(EndpointWebMvcAutoConfiguration.java:299)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.boot.actuate.trace.WebRequestTraceFilter.doFilterInternal(WebRequestTraceFilter.java:102)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:85)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.springframework.boot.actuate.autoconfigure.MetricsFilter.doFilterInternal(MetricsFilter.java:76)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:239)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:217)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:142)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:518)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1091)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:673)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>Please what did i do wrong?</p>\n"},{"tags":["java","docker","graalvm"],"comments":[{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":0,"creation_date":1698909159,"post_id":77407413,"comment_id":136464636,"body_markdown":"what exact error you are getting ? is it any framework application like spring boot, play,vertx or standalone java app ? also did you check when exactly its getting killed , during startup or during processing ?","body":"what exact error you are getting ? is it any framework application like spring boot, play,vertx or standalone java app ? also did you check when exactly its getting killed , during startup or during processing ?"},{"owner":{"account_id":190564,"reputation":9340,"user_id":430615,"accept_rate":56,"display_name":"Marc Polizzi"},"score":0,"creation_date":1698909582,"post_id":77407413,"comment_id":136464688,"body_markdown":"Plain Java. Killed after a while. docker stats is showing the process is using more and more RAM (way more than the 256m of the heap).","body":"Plain Java. Killed after a while. docker stats is showing the process is using more and more RAM (way more than the 256m of the heap)."},{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":0,"creation_date":1698910139,"post_id":77407413,"comment_id":136464779,"body_markdown":"you must be having native memory leak there. Refer this and add those param mentioned in this blog which will help you tracking exactly where native memory is getting consumed. https://www.baeldung.com/native-memory-tracking-in-jvm","body":"you must be having native memory leak there. Refer this and add those param mentioned in this blog which will help you tracking exactly where native memory is getting consumed. <a href=\"https://www.baeldung.com/native-memory-tracking-in-jvm\" rel=\"nofollow noreferrer\">baeldung.com/native-memory-tracking-in-jvm</a>"}],"answers":[{"comments":[{"owner":{"account_id":190564,"reputation":9340,"user_id":430615,"accept_rate":56,"display_name":"Marc Polizzi"},"score":0,"creation_date":1699086079,"post_id":77415423,"comment_id":136489278,"body_markdown":"Can you elaborate a bit or do you have any pointer showing how much less native memory is being used with GraalVM ? The size of the Java heap is not an issue for me.","body":"Can you elaborate a bit or do you have any pointer showing how much less native memory is being used with GraalVM ? The size of the Java heap is not an issue for me."},{"owner":{"account_id":13620499,"reputation":111,"user_id":10628628,"display_name":"Alina Yurenko"},"score":0,"creation_date":1699261954,"post_id":77415423,"comment_id":136504699,"body_markdown":"I don&#39;t have such measurements at hand, but Native Image will use less memory because unlike running on the JVM you don&#39;t need memory for the following:\n\n- JVM itself\n- Application data\n- Loaded bytecodes\n- Reflection metadata\n- Code cache\n- Profiling data\n- JIT compiler data structures.\n\nYou only need memory for the application and its data. the application contains a slim VM inside, but it&#39;s much smaller than the JVM.","body":"I don&#39;t have such measurements at hand, but Native Image will use less memory because unlike running on the JVM you don&#39;t need memory for the following:  - JVM itself - Application data - Loaded bytecodes - Reflection metadata - Code cache - Profiling data - JIT compiler data structures.  You only need memory for the application and its data. the application contains a slim VM inside, but it&#39;s much smaller than the JVM."}],"tags":[],"owner":{"account_id":13620499,"reputation":111,"user_id":10628628,"display_name":"Alina Yurenko"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699002795,"creation_date":1699002795,"answer_id":77415423,"question_id":77407413,"body_markdown":"regarding using less RAM at runtime, GraalVM Native Image would definitely give you that. Depends on what your app is doing, you can even go much lower than 256M. But yes you would need to compile for each platform separately. Something like GitHub actions can help there.","title":"Native memory with low RAM constraint (1g)","body":"<p>regarding using less RAM at runtime, GraalVM Native Image would definitely give you that. Depends on what your app is doing, you can even go much lower than 256M. But yes you would need to compile for each platform separately. Something like GitHub actions can help there.</p>\n"},{"tags":[],"owner":{"account_id":22383561,"reputation":411,"user_id":16596710,"display_name":"Seonghun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699003734,"creation_date":1699003734,"answer_id":77415533,"question_id":77407413,"body_markdown":"JIT (Just-In-Time) and AOT (Ahead-of-Time) compilation are two different approaches to compiling and executing code in a programming language. \r\n\r\nHere are the differences between them\r\n\r\n**Compilation Timing**\r\n\r\n**JIT**: In JIT compilation, code is compiled and executed on-the-fly, at runtime. When a program is run, the source code or intermediate code is translated into machine code just before it is executed.\r\n\r\n**AOT**: AOT compilation occurs ahead of time, typically before the program is run. The entire code is compiled into machine code or a lower-level representation before execution.\r\n\r\n\r\n**Execution Speed**\r\n\r\n**JIT**: JIT-compiled code can have a slightly slower startup time because of the compilation step, but it may optimize code for the specific runtime environment, potentially improving execution speed during the application&#39;s lifecycle.\r\n**AOT**: AOT-compiled code generally has faster startup times because there is no need for on-the-fly compilation. However, it may not adapt to the runtime environment as effectively as JIT-compiled code.\r\n\r\n\r\n**Resource Utilization**\r\n\r\n**JIT**: JIT compilation can consume additional memory and CPU resources during the compilation process. Once the code is compiled, it can be more memory-efficient because it optimizes for the specific execution paths.\r\n**AOT**: AOT-compiled code tends to consume less memory and CPU resources during execution since there is no in-memory compilation process. However, it may not be as resource-efficient as JIT-compiled code in terms of execution speed.\r\n\r\n**Portability**\r\n\r\n**JIT**: JIT-compiled code can be more portable since it can adapt to different runtime environments. It is often used in cross-platform applications.\r\n\r\n\r\n**AOT**: AOT-compiled code may be less portable because it is optimized for a specific platform or architecture, and recompilation may be required for different environments.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nIn Java, only JIT Compilation  running on jvm was previously available. GraalVM enables AOT Compilation (native compilation)\r\n\r\nIt would be better to choose a more appropriate strategy based on the characteristics required by the system. In this situation, saving memory is important, so I think the AOT compilation will be very helpful\r\n\r\n\r\nU can Check this Blog. In this blog, when compiled using gralvm, it saves about 40% of memory.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nhttps://medium.com/graalvm/graalvm-for-jdk-21-is-here-ee01177dd12d\r\n\r\n\r\nI think u r using Spring Boot, Checking this document will be helpful.\r\n\r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WrVKD.png\r\n  [2]: https://i.stack.imgur.com/J0eyz.png","title":"Native memory with low RAM constraint (1g)","body":"<p>JIT (Just-In-Time) and AOT (Ahead-of-Time) compilation are two different approaches to compiling and executing code in a programming language.</p>\n<p>Here are the differences between them</p>\n<p><strong>Compilation Timing</strong></p>\n<p><strong>JIT</strong>: In JIT compilation, code is compiled and executed on-the-fly, at runtime. When a program is run, the source code or intermediate code is translated into machine code just before it is executed.</p>\n<p><strong>AOT</strong>: AOT compilation occurs ahead of time, typically before the program is run. The entire code is compiled into machine code or a lower-level representation before execution.</p>\n<p><strong>Execution Speed</strong></p>\n<p><strong>JIT</strong>: JIT-compiled code can have a slightly slower startup time because of the compilation step, but it may optimize code for the specific runtime environment, potentially improving execution speed during the application's lifecycle.\n<strong>AOT</strong>: AOT-compiled code generally has faster startup times because there is no need for on-the-fly compilation. However, it may not adapt to the runtime environment as effectively as JIT-compiled code.</p>\n<p><strong>Resource Utilization</strong></p>\n<p><strong>JIT</strong>: JIT compilation can consume additional memory and CPU resources during the compilation process. Once the code is compiled, it can be more memory-efficient because it optimizes for the specific execution paths.\n<strong>AOT</strong>: AOT-compiled code tends to consume less memory and CPU resources during execution since there is no in-memory compilation process. However, it may not be as resource-efficient as JIT-compiled code in terms of execution speed.</p>\n<p><strong>Portability</strong></p>\n<p><strong>JIT</strong>: JIT-compiled code can be more portable since it can adapt to different runtime environments. It is often used in cross-platform applications.</p>\n<p><strong>AOT</strong>: AOT-compiled code may be less portable because it is optimized for a specific platform or architecture, and recompilation may be required for different environments.</p>\n<p><a href=\"https://i.stack.imgur.com/WrVKD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WrVKD.png\" alt=\"enter image description here\" /></a></p>\n<p>In Java, only JIT Compilation  running on jvm was previously available. GraalVM enables AOT Compilation (native compilation)</p>\n<p>It would be better to choose a more appropriate strategy based on the characteristics required by the system. In this situation, saving memory is important, so I think the AOT compilation will be very helpful</p>\n<p>U can Check this Blog. In this blog, when compiled using gralvm, it saves about 40% of memory.</p>\n<p><a href=\"https://i.stack.imgur.com/J0eyz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J0eyz.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://medium.com/graalvm/graalvm-for-jdk-21-is-here-ee01177dd12d\" rel=\"nofollow noreferrer\">https://medium.com/graalvm/graalvm-for-jdk-21-is-here-ee01177dd12d</a></p>\n<p>I think u r using Spring Boot, Checking this document will be helpful.</p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html</a></p>\n"}],"owner":{"account_id":190564,"reputation":9340,"user_id":430615,"accept_rate":56,"display_name":"Marc Polizzi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1699003734,"creation_date":1698907342,"question_id":77407413,"body_markdown":"I&#39;m running a Java application within a Docker with `1g` of maximum RAM. I&#39;ve reduced the Java heap to `-Xmx256m`. Despite that, the Java process is using much more and very often goes beyond `1g` making it being killed by the OS. I&#39;ve read about Java [native memory][1] and basically understand what is happening.\r\n\r\nBut except adding enough swap and accepting the potential performance penalty, is there a way to minimize the required memory (including the native memory) ? I&#39;ve been mentioned to look at [GraalVM][2] : any feedback ? Does it mean, for example, I would need to compile my application for the different architectures (Intel, ARM, ...) ? \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr007.html\r\n  [2]: https://www.graalvm.org/","title":"Native memory with low RAM constraint (1g)","body":"<p>I'm running a Java application within a Docker with <code>1g</code> of maximum RAM. I've reduced the Java heap to <code>-Xmx256m</code>. Despite that, the Java process is using much more and very often goes beyond <code>1g</code> making it being killed by the OS. I've read about Java <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/tooldescr007.html\" rel=\"nofollow noreferrer\">native memory</a> and basically understand what is happening.</p>\n<p>But except adding enough swap and accepting the potential performance penalty, is there a way to minimize the required memory (including the native memory) ? I've been mentioned to look at <a href=\"https://www.graalvm.org/\" rel=\"nofollow noreferrer\">GraalVM</a> : any feedback ? Does it mean, for example, I would need to compile my application for the different architectures (Intel, ARM, ...) ?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1696599529,"post_id":77244896,"comment_id":136177773,"body_markdown":"@Pino: I think the solutions in the linked-to question only work when a definite limit can be calculated (i.e. if each element adds at most some constant value). Since this considers the number of books by each author, the same approach isn&#39;t feasible.","body":"@Pino: I think the solutions in the linked-to question only work when a definite limit can be calculated (i.e. if each element adds at most some constant value). Since this considers the number of books by each author, the same approach isn&#39;t feasible."},{"owner":{"account_id":14804437,"reputation":35,"user_id":10691860,"display_name":"Manak Bisht"},"score":0,"creation_date":1696599586,"post_id":77244896,"comment_id":136177789,"body_markdown":"@Pino No, it doesn&#39;t answer my question. The accepted answer first calculates a threshold value to short circuit the stream. However, in this case, I will have to iterate over the entire collection to get the count for the threshold.","body":"@Pino No, it doesn&#39;t answer my question. The accepted answer first calculates a threshold value to short circuit the stream. However, in this case, I will have to iterate over the entire collection to get the count for the threshold."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1696599598,"post_id":77244896,"comment_id":136177790,"body_markdown":"I don&#39;t think this can be done while &quot;playing fair&quot; with streams, because all of the functional interface implementations are supposed to be stateless, which kind of defeats the purpose. Also parallelizing of the execution could mean that you don&#39;t abort the stream &quot;quickly enough&quot; to make a difference.","body":"I don&#39;t think this can be done while &quot;playing fair&quot; with streams, because all of the functional interface implementations are supposed to be stateless, which kind of defeats the purpose. Also parallelizing of the execution could mean that you don&#39;t abort the stream &quot;quickly enough&quot; to make a difference."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":4,"creation_date":1696600075,"post_id":77244896,"comment_id":136177874,"body_markdown":"So the solution is just use a loop, and return early if needed?","body":"So the solution is just use a loop, and return early if needed?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1696600476,"post_id":77244896,"comment_id":136177975,"body_markdown":"`authors.forEach` and break that loop if &gt; n. As has been said, streams are stateless so not good to force to stream","body":"<code>authors.forEach</code> and break that loop if &gt; n. As has been said, streams are stateless so not good to force to stream"},{"owner":{"account_id":9842376,"reputation":537,"user_id":7465516,"display_name":"julaine"},"score":1,"creation_date":1696600542,"post_id":77244896,"comment_id":136177993,"body_markdown":"You could do it with `Stream::takeWhile` if you are willing to put an impure function in there. But I would consider this a hack - streams are supposed to work with pure functions that operate on the data in the stream alone. A for-loop would be more readable code.","body":"You could do it with <code>Stream::takeWhile</code> if you are willing to put an impure function in there. But I would consider this a hack - streams are supposed to work with pure functions that operate on the data in the stream alone. A for-loop would be more readable code."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":3,"creation_date":1696602887,"post_id":77244896,"comment_id":136178510,"body_markdown":"You might try `authors.stream().flatMap(auth -&gt; auth.getBoks().stream()).limit(n + 1).count() &gt; n`. But I’m pretty certain that it will be more expensive than summing all the sizes as you do in the question. And in any case it’s more cryptic.","body":"You might try <code>authors.stream().flatMap(auth -&gt; auth.getBoks().stream()).limit(n + 1).count() &gt; n</code>. But I’m pretty certain that it will be more expensive than summing all the sizes as you do in the question. And in any case it’s more cryptic."}],"answers":[{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1696623404,"post_id":77245854,"comment_id":136182004,"body_markdown":"As far as I can see, `count` will always be `1`, so if `n` is at least 2, you will get `true` no matter how many books there are?","body":"As far as I can see, <code>count</code> will always be <code>1</code>, so if <code>n</code> is at least 2, you will get <code>true</code> no matter how many books there are?"}],"tags":[],"owner":{"account_id":17598658,"reputation":573,"user_id":12769096,"display_name":"NoobCoder"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696607614,"creation_date":1696607614,"answer_id":77245854,"question_id":77244896,"body_markdown":"`allMatch()` is a short-circuiting function, so you can use it to stop processing. \r\n\r\nThe main disadvantage is that you have to do your test twice: once to see if you should process it, and again to see whether to keep going.\r\n\r\nAnd also, this solution returns a Boolean so you cannot collect the results of the stream as you normally would, but maybe it will work for you in this case.\r\n\r\n     boolean result = authors.stream()\r\n                .flatMap(author -&gt; author.getBooks().stream())\r\n                .mapToInt(book -&gt; 1)\r\n                .peek(count -&gt; {\r\n                    if (count &lt; n) {\r\n                        System.out.println(count);\r\n                    }\r\n                })\r\n                .allMatch(count -&gt; count &lt; n);\r\n\r\nBecause you mentioned it&#39;s for java 8, I didn&#39;t suggest on using `takeWhile`, which was added to jdk9. But if you&#39;re interested, read about it as well:\r\nhttps://stackoverflow.com/a/46850795/12769096","title":"How to terminate a stream early if count is greater than certain value in Java 8?","body":"<p><code>allMatch()</code> is a short-circuiting function, so you can use it to stop processing.</p>\n<p>The main disadvantage is that you have to do your test twice: once to see if you should process it, and again to see whether to keep going.</p>\n<p>And also, this solution returns a Boolean so you cannot collect the results of the stream as you normally would, but maybe it will work for you in this case.</p>\n<pre><code> boolean result = authors.stream()\n            .flatMap(author -&gt; author.getBooks().stream())\n            .mapToInt(book -&gt; 1)\n            .peek(count -&gt; {\n                if (count &lt; n) {\n                    System.out.println(count);\n                }\n            })\n            .allMatch(count -&gt; count &lt; n);\n</code></pre>\n<p>Because you mentioned it's for java 8, I didn't suggest on using <code>takeWhile</code>, which was added to jdk9. But if you're interested, read about it as well:\n<a href=\"https://stackoverflow.com/a/46850795/12769096\">https://stackoverflow.com/a/46850795/12769096</a></p>\n"},{"comments":[{"owner":{"account_id":2179728,"reputation":73067,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1700909539,"post_id":77270306,"comment_id":136711620,"body_markdown":"Wow! What an honest disclaimer!","body":"Wow! What an honest disclaimer!"}],"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697000457,"creation_date":1697000457,"answer_id":77270306,"question_id":77244896,"body_markdown":"While there is a method `takeWhile` that stops the iteration when a condition is met for the *particular* element iterated, there is, unfortunately, nothing implemented stopping the iteration when a criterion is met for the aggregated result such as `reduceWhile` or `collectWhile`.\r\n\r\nThere is a similar [question][1] that you can adapt to your use-case:\r\n\r\n1. Implement a custom `Spliterator` that stops yielding elements while a condition is met:\r\n\r\n      ```java\r\n      public class StoppingSpliterator&lt;T&gt; extends Spliterators.AbstractSpliterator&lt;T&gt; {\r\n\r\n          private final Spliterator&lt;T&gt; spliterator;\r\n          private final Supplier&lt;Boolean&gt; stopCondition;\r\n\r\n          public StoppingSpliterator(Spliterator&lt;T&gt; spliterator, Supplier&lt;Boolean&gt; stopCondition) {\r\n              super(spliterator.estimateSize(), 0);\r\n              this.spliterator = spliterator;\r\n              this.stopCondition = stopCondition;\r\n          }\r\n\r\n          @Override\r\n          public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\r\n              if (stopCondition.get()) {\r\n                  return false;\r\n              }\r\n              return spliterator.tryAdvance(action);\r\n          }\r\n      }\r\n      ```\r\n\r\n2. Define the limit and the accumulator:\r\n\r\n      ```java\r\n      final int n = 4;\r\n      final AtomicInteger accumulator = new AtomicInteger();\r\n      ```\r\n3. Perform the reduction on the `Stream` wrapped in the `StoppingSpliterator`\r\n\r\n      ```java\r\n      final var result = StreamSupport\r\n              .stream(new StoppingSpliterator&lt;&gt;(\r\n                      authors.spliterator(), \r\n                      () -&gt; accumulator.get() &gt; n), false)\r\n              .reduce(accumulator,\r\n                      (i, author) -&gt; {\r\n                          System.out.println(&quot;Iterating: &quot; + author.getName());\r\n                          i.addAndGet(author.getBooks().size());\r\n                          return i;\r\n                      },\r\n                      (x, y) -&gt; null);\r\n\r\n      // get the result\r\n      System.out.println(result.get() &gt; n);\r\n      ```\r\n\r\nHere are some test data assuming the full-args constructor `(String name, List&lt;String&gt; books)` and getters of the class `Author`.\r\n\r\n```java\r\nList&lt;Author&gt; authors = List.of(\r\n    new Author(&quot;Tom&quot;, List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)),\r\n    new Author(&quot;Bob&quot;, List.of()),\r\n    new Author(&quot;Sam&quot;, List.of(&quot;a&quot;)),\r\n    new Author(&quot;Kim&quot;, List.of()),\r\n    new Author(&quot;Tim&quot;, List.of(&quot;a&quot;, &quot;b&quot;)),\r\n    new Author(&quot;Pim&quot;, List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;)));\r\n```\r\n\r\nThe iteration stops when the sum of books is larger than `n`: `4` in our case, so the last iterated author is `Tim` who is an author of a further book so the sum would be 5. If you remove the last 2-3 authors or empty their books, the whole list is iterated as the stopping condition is not met to the very end.\r\n\r\n_____\r\n\r\n**Disclaimer**: I particularly dislike this solution for multiple reasons:\r\n\r\n1. It is hard to implement, read, and debug.\r\n2. It mutates `AtomicInteger` accumulator defined outside the `Stream`.\r\n3. I doubt the whole thing can work in parallel.\r\n4. You can use a for-loop with `break` or a `while` loop:\r\n\r\n   ```java\r\n   final Iterator&lt;Author&gt; iterator = authors.iterator();\r\n   int count = 0;\r\n   while (count &lt;= 4 &amp;&amp; iterator.hasNext()) {\r\n        final Author author = iterator.next();\r\n        System.out.println(&quot;Iterating: &quot; + author.getName());\r\n        count += author.getBooks().size();\r\n   }\r\n   ```\r\n\r\n  [1]: https://stackoverflow.com/q/30740709/3764965","title":"How to terminate a stream early if count is greater than certain value in Java 8?","body":"<p>While there is a method <code>takeWhile</code> that stops the iteration when a condition is met for the <em>particular</em> element iterated, there is, unfortunately, nothing implemented stopping the iteration when a criterion is met for the aggregated result such as <code>reduceWhile</code> or <code>collectWhile</code>.</p>\n<p>There is a similar <a href=\"https://stackoverflow.com/q/30740709/3764965\">question</a> that you can adapt to your use-case:</p>\n<ol>\n<li><p>Implement a custom <code>Spliterator</code> that stops yielding elements while a condition is met:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StoppingSpliterator&lt;T&gt; extends Spliterators.AbstractSpliterator&lt;T&gt; {\n\n    private final Spliterator&lt;T&gt; spliterator;\n    private final Supplier&lt;Boolean&gt; stopCondition;\n\n    public StoppingSpliterator(Spliterator&lt;T&gt; spliterator, Supplier&lt;Boolean&gt; stopCondition) {\n        super(spliterator.estimateSize(), 0);\n        this.spliterator = spliterator;\n        this.stopCondition = stopCondition;\n    }\n\n    @Override\n    public boolean tryAdvance(Consumer&lt;? super T&gt; action) {\n        if (stopCondition.get()) {\n            return false;\n        }\n        return spliterator.tryAdvance(action);\n    }\n}\n</code></pre>\n</li>\n<li><p>Define the limit and the accumulator:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final int n = 4;\nfinal AtomicInteger accumulator = new AtomicInteger();\n</code></pre>\n</li>\n<li><p>Perform the reduction on the <code>Stream</code> wrapped in the <code>StoppingSpliterator</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>final var result = StreamSupport\n        .stream(new StoppingSpliterator&lt;&gt;(\n                authors.spliterator(), \n                () -&gt; accumulator.get() &gt; n), false)\n        .reduce(accumulator,\n                (i, author) -&gt; {\n                    System.out.println(&quot;Iterating: &quot; + author.getName());\n                    i.addAndGet(author.getBooks().size());\n                    return i;\n                },\n                (x, y) -&gt; null);\n\n// get the result\nSystem.out.println(result.get() &gt; n);\n</code></pre>\n</li>\n</ol>\n<p>Here are some test data assuming the full-args constructor <code>(String name, List&lt;String&gt; books)</code> and getters of the class <code>Author</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Author&gt; authors = List.of(\n    new Author(&quot;Tom&quot;, List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)),\n    new Author(&quot;Bob&quot;, List.of()),\n    new Author(&quot;Sam&quot;, List.of(&quot;a&quot;)),\n    new Author(&quot;Kim&quot;, List.of()),\n    new Author(&quot;Tim&quot;, List.of(&quot;a&quot;, &quot;b&quot;)),\n    new Author(&quot;Pim&quot;, List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;)));\n</code></pre>\n<p>The iteration stops when the sum of books is larger than <code>n</code>: <code>4</code> in our case, so the last iterated author is <code>Tim</code> who is an author of a further book so the sum would be 5. If you remove the last 2-3 authors or empty their books, the whole list is iterated as the stopping condition is not met to the very end.</p>\n<hr />\n<p><strong>Disclaimer</strong>: I particularly dislike this solution for multiple reasons:</p>\n<ol>\n<li><p>It is hard to implement, read, and debug.</p>\n</li>\n<li><p>It mutates <code>AtomicInteger</code> accumulator defined outside the <code>Stream</code>.</p>\n</li>\n<li><p>I doubt the whole thing can work in parallel.</p>\n</li>\n<li><p>You can use a for-loop with <code>break</code> or a <code>while</code> loop:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final Iterator&lt;Author&gt; iterator = authors.iterator();\nint count = 0;\nwhile (count &lt;= 4 &amp;&amp; iterator.hasNext()) {\n     final Author author = iterator.next();\n     System.out.println(&quot;Iterating: &quot; + author.getName());\n     count += author.getBooks().size();\n}\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699002977,"creation_date":1699002977,"answer_id":77415443,"question_id":77244896,"body_markdown":"Generally it is not suggested to use impure functions with lambda but this specific scenario could be handled via use of threadsafe mutable objects since short circuiting the stream with accumulated result is stateful.\r\n\r\n```\r\npublic static void main(String[] args) {\r\n        Supplier&lt;Author&gt; authorSupplier = () -&gt; new Author(Arrays.asList(new Book(), new Book()));\r\n        List&lt;Author&gt; authorList = Arrays.asList(authorSupplier.get(),authorSupplier.get(),authorSupplier.get(),authorSupplier.get());\r\n        AtomicInteger bookCounttillNow = new AtomicInteger(0);\r\n        int n = 2;\r\n        authorList.stream()\r\n                .map(author -&gt; bookCounttillNow.addAndGet(author.getBooks().size()))\r\n                .filter(b-&gt;bookCounttillNow.get()&gt;n)\r\n                .findFirst();\r\n    }\r\n```","title":"How to terminate a stream early if count is greater than certain value in Java 8?","body":"<p>Generally it is not suggested to use impure functions with lambda but this specific scenario could be handled via use of threadsafe mutable objects since short circuiting the stream with accumulated result is stateful.</p>\n<pre><code>public static void main(String[] args) {\n        Supplier&lt;Author&gt; authorSupplier = () -&gt; new Author(Arrays.asList(new Book(), new Book()));\n        List&lt;Author&gt; authorList = Arrays.asList(authorSupplier.get(),authorSupplier.get(),authorSupplier.get(),authorSupplier.get());\n        AtomicInteger bookCounttillNow = new AtomicInteger(0);\n        int n = 2;\n        authorList.stream()\n                .map(author -&gt; bookCounttillNow.addAndGet(author.getBooks().size()))\n                .filter(b-&gt;bookCounttillNow.get()&gt;n)\n                .findFirst();\n    }\n</code></pre>\n"}],"owner":{"account_id":14804437,"reputation":35,"user_id":10691860,"display_name":"Manak Bisht"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1699002977,"creation_date":1696599156,"question_id":77244896,"body_markdown":"I have an `Author` class. The author class contains a method called `getBooks` that returns a list of books written by the author `List&lt;Book&gt;`.\r\n\r\nNow, I have a collection of authors. How do I check if the total count of books is greater than a certain int value `n`, without iterating over the whole collection?\r\n\r\nThis is what I have currently -\r\n\r\n```return authors.stream().mapToInt(a -&gt; a.getBooks().size()).sum() &gt; n```\r\n\r\nThis question differs from https://stackoverflow.com/questions/46173577/stop-java-stream-computations-based-on-previous-computation-results because in this case, a threshold value cannot be calculated without iterating over the whole collection.","title":"How to terminate a stream early if count is greater than certain value in Java 8?","body":"<p>I have an <code>Author</code> class. The author class contains a method called <code>getBooks</code> that returns a list of books written by the author <code>List&lt;Book&gt;</code>.</p>\n<p>Now, I have a collection of authors. How do I check if the total count of books is greater than a certain int value <code>n</code>, without iterating over the whole collection?</p>\n<p>This is what I have currently -</p>\n<p><code>return authors.stream().mapToInt(a -&gt; a.getBooks().size()).sum() &gt; n</code></p>\n<p>This question differs from <a href=\"https://stackoverflow.com/questions/46173577/stop-java-stream-computations-based-on-previous-computation-results\">Stop java stream computations based on previous computation results</a> because in this case, a threshold value cannot be calculated without iterating over the whole collection.</p>\n"},{"tags":["java","android","kotlin"],"owner":{"account_id":269240,"reputation":5686,"user_id":558457,"accept_rate":62,"display_name":"Viacheslav Smityukh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699002225,"creation_date":1698945041,"question_id":77411600,"body_markdown":"I have to save the default color of status bar and navigation bar. I don&#39;t need it to be transparent.\r\n\r\nAnd I need to receive insets by onApplyWindowInset in my custom view.\r\n\r\nBut to receive it I have to set windowTranslucentStatus or windowTranslucentNavigation and as result I got transparent status bar or navigation bar.\r\n\r\nHow can I process insets without windowTranslucentStatus/Navigation?","title":"How to receive insets without set windowTranslucentStatus nor windowTranslucentNavigation","body":"<p>I have to save the default color of status bar and navigation bar. I don't need it to be transparent.</p>\n<p>And I need to receive insets by onApplyWindowInset in my custom view.</p>\n<p>But to receive it I have to set windowTranslucentStatus or windowTranslucentNavigation and as result I got transparent status bar or navigation bar.</p>\n<p>How can I process insets without windowTranslucentStatus/Navigation?</p>\n"},{"tags":["java","bluetooth","android-mediaplayer"],"owner":{"account_id":151403,"reputation":47660,"user_id":365251,"accept_rate":86,"display_name":"markzzz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699001794,"creation_date":1699001794,"question_id":77415319,"body_markdown":"I&#39;m building a Mobile App which has a MediaPlayer.\r\n\r\nIt interacts nice with Bluetooth triggers (play, stop, next, prev, long next, long prev), but I&#39;d like to intercept an action as &quot;double click&quot; on next button.\r\n\r\nWhat&#39;s the correct way to do this, if possible?","title":"How to intercept &quot;double click&quot; via Bluetooth on MediaPlayer","body":"<p>I'm building a Mobile App which has a MediaPlayer.</p>\n<p>It interacts nice with Bluetooth triggers (play, stop, next, prev, long next, long prev), but I'd like to intercept an action as &quot;double click&quot; on next button.</p>\n<p>What's the correct way to do this, if possible?</p>\n"},{"tags":["java","servlet-filters","keycloak"],"answers":[{"comments":[{"owner":{"account_id":4660684,"reputation":312,"user_id":3775041,"display_name":"user3775041"},"score":0,"creation_date":1547214944,"post_id":54147715,"comment_id":95126837,"body_markdown":"Yes, I know. The login mask is working fine but the code-to-token request not.\nThe Problem is that I&#39;m not able to look into the keycloak configuration. This is provided as a service from a different department.","body":"Yes, I know. The login mask is working fine but the code-to-token request not. The Problem is that I&#39;m not able to look into the keycloak configuration. This is provided as a service from a different department."},{"owner":{"account_id":8970940,"reputation":382,"user_id":6689440,"display_name":"D. Cook"},"score":0,"creation_date":1579588975,"post_id":54147715,"comment_id":105806056,"body_markdown":"I was having the same error message, but it was because I was accidentally double-encoding the redirect_uri value in the POST to the token endpoint. Other OpenID Connect IdPs haven&#39;t complained about this, but Keycloak does. \n\nHowever, looking at your logs above, that doesn&#39;t seem to be an issue for you.","body":"I was having the same error message, but it was because I was accidentally double-encoding the redirect_uri value in the POST to the token endpoint. Other OpenID Connect IdPs haven&#39;t complained about this, but Keycloak does.   However, looking at your logs above, that doesn&#39;t seem to be an issue for you."}],"tags":[],"owner":{"account_id":14407351,"reputation":81,"user_id":10407075,"display_name":"Rolf"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1547214091,"creation_date":1547214091,"answer_id":54147715,"question_id":54146436,"body_markdown":"You need to configure your client properly. \r\nGo to Keycloak to your client configuration\r\nSet the allowed redirect url\r\n\r\nSee this post here\r\nhttps://stackoverflow.com/questions/45352880/keycloak-invalid-parameter-redirect-uri?rq=1\r\n","title":"Keycloak complains about invalid redirect_uri on token endpoint","body":"<p>You need to configure your client properly. \nGo to Keycloak to your client configuration\nSet the allowed redirect url</p>\n\n<p>See this post here\n<a href=\"https://stackoverflow.com/questions/45352880/keycloak-invalid-parameter-redirect-uri?rq=1\">keycloak Invalid parameter: redirect_uri</a></p>\n"}],"owner":{"account_id":4660684,"reputation":312,"user_id":3775041,"display_name":"user3775041"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13379,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1699001659,"creation_date":1547209126,"question_id":54146436,"body_markdown":"I try to migrate a existing Java application running on CloudFoundry to Keycloak and therefore use the Keycloak Servlet Filter. This is working in the first step to request the code. But the second step to turn the code into a token fails with &quot;Incorrect redirect_uri&quot;. This is weird because I can see in both requests to the Keycloak server then same URL as redirect_url.\r\n\r\nDoes anybody know the reason and a solution for this?\r\n\r\n    2019-01-11T12:03:20.01+0100 [RTR/1] OUT APP_HOST - [2019-01-11T11:03:19.993+0000] &quot;GET /keycloak/ HTTP/1.1&quot; 302 0 0 &quot;https://APP_HOST/keycloak/?state=f98ebe4e-1499-4513-8da3-1a95bd0ce894&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f&amp;code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..zEDr2g5BhXmaNr6vflO7eg.Lm6SpGasJYE-CJqkwiAmWz4sRHGUMgYHFjNr-ScWamsSL6vRSj_r-Gbsf75-FNxt4NMC6XTshNXoeqTA0SJOrQSnPMV1qLuJyAHWY-ajAiDkPvtsWT5nxHYbEUaJtDOAMbxhtfl3yQo_Uyl2gYegcJTgC7FchC8FSl5ovS7q3EZb8aXET0OP_-IApQo0xN4XB2BDuiuC_DY1ySlYkUYdKSrK4HsgSlkSHELBwyL0iw8CNs0nlnWHgJZBWtYDVoRk.QuT_ov_ZBlFhexBrZAYl_w&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101 Firefox/60.0&quot; &quot;192.168.6.12:50100&quot; &quot;192.168.2.30:61006&quot; x_forwarded_for:&quot;10.209.173.45, 192.168.6.12&quot; x_forwarded_proto:&quot;https&quot; vcap_request_id:&quot;b18a1abd-233b-4140-5e8a-8ae1a16ca251&quot; response_time:0.017485509 app_id:&quot;27846aa1-34c0-46e0-9dce-c7a893d06dd6&quot; app_index:&quot;0&quot; x_b3_traceid:&quot;9399df2a769b38c6&quot; x_b3_spanid:&quot;9399df2a769b38c6&quot; x_b3_parentspanid:&quot;-&quot;\r\n    2019-01-11T12:03:20.01+0100 [RTR/1] OUT \r\n    2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,004 [DEBUG] PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75) [http-nio-8080-exec-1] adminRequest https://APP_HOST/keycloak/?\r\n    2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,006 [DEBUG] PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:106) [http-nio-8080-exec-1] checkCorsPreflight https://APP_HOST/keycloak/?\r\n    2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,006 [DEBUG] OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:266) [http-nio-8080-exec-1] there was no code\r\n    2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,007 [DEBUG] OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:274) [http-nio-8080-exec-1] redirecting to auth server\r\n    2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,007 [DEBUG] OAuthRequestAuthenticator.getRedirectUri(OAuthRequestAuthenticator.java:144) [http-nio-8080-exec-1] callback uri: https://APP_HOST/keycloak/?\r\n    2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,008 [DEBUG] OAuthRequestAuthenticator.challenge(OAuthRequestAuthenticator.java:227) [http-nio-8080-exec-1] Sending redirect to login page: https://KEYCLOAK_HOST/auth/realms/kums/protocol/openid-connect/auth?response_type=code&amp;client_id=CLIENT_ID&amp;redirect_uri=https%3A%2F%2FAPP_HOST%2Fkeycloak%2F?&amp;state=5dc5b208-6093-4d1b-b9ed-c9d2091a306f&amp;login=true&amp;scope=openid\r\n    2019-01-11T12:03:21.79+0100 [RTR/0] OUT APP_HOST - [2019-01-11T11:03:21.692+0000] &quot;GET /keycloak/?state=5dc5b208-6093-4d1b-b9ed-c9d2091a306f&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f&amp;code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..0-5C1AJAZrNXJwmZbt4I0Q.LET3bu8MVK6Uq58-j-yPC0WP_F01jskmm6WvyXqRRURlMiVIH9VV0fx6Cc3O4X0JFyTUiuESHUcfk2dyHOoL_z-IVVAAxTE-Eg2rphKjVT7OfWsoxuHZKFY9RkyEnr9Grwgd9WakmrGZBAin8yVX6YmfLC6O1KkrVwiJDrB3lP6VrlWRCMrlmBnjMlqwzFD_Bx3vqSmoKlWo9I9b5bvPgcFZY58EO2zARsBmLAjqtSZTdDB9dasohuPjXpDa9lOR.sO5oOhIQKC6NcHC3CIIuzA HTTP/1.1&quot; 403 0 5878 &quot;https://APP_HOST/keycloak/?state=f98ebe4e-1499-4513-8da3-1a95bd0ce894&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f&amp;code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..zEDr2g5BhXmaNr6vflO7eg.Lm6SpGasJYE-CJqkwiAmWz4sRHGUMgYHFjNr-ScWamsSL6vRSj_r-Gbsf75-FNxt4NMC6XTshNXoeqTA0SJOrQSnPMV1qLuJyAHWY-ajAiDkPvtsWT5nxHYbEUaJtDOAMbxhtfl3yQo_Uyl2gYegcJTgC7FchC8FSl5ovS7q3EZb8aXET0OP_-IApQo0xN4XB2BDuiuC_DY1ySlYkUYdKSrK4HsgSlkSHELBwyL0iw8CNs0nlnWHgJZBWtYDVoRk.QuT_ov_ZBlFhexBrZAYl_w&quot; &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101 Firefox/60.0&quot; &quot;192.168.6.12:47988&quot; &quot;192.168.2.30:61006&quot; x_forwarded_for:&quot;10.209.173.45, 192.168.6.12&quot; x_forwarded_proto:&quot;https&quot; vcap_request_id:&quot;25f4b5df-a11e-4120-7ec8-2910671b4819&quot; response_time:0.101218652 app_id:&quot;27846aa1-34c0-46e0-9dce-c7a893d06dd6&quot; app_index:&quot;0&quot; x_b3_traceid:&quot;b743963318cc0d09&quot; x_b3_spanid:&quot;b743963318cc0d09&quot; x_b3_parentspanid:&quot;-&quot;\r\n    2019-01-11T12:03:21.79+0100 [RTR/0] OUT \r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,702 [DEBUG] PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75) [http-nio-8080-exec-2] adminRequest https://APP_HOST/keycloak/?code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..0-5C1AJAZrNXJwmZbt4I0Q.LET3bu8MVK6Uq58-j-yPC0WP_F01jskmm6WvyXqRRURlMiVIH9VV0fx6Cc3O4X0JFyTUiuESHUcfk2dyHOoL_z-IVVAAxTE-Eg2rphKjVT7OfWsoxuHZKFY9RkyEnr9Grwgd9WakmrGZBAin8yVX6YmfLC6O1KkrVwiJDrB3lP6VrlWRCMrlmBnjMlqwzFD_Bx3vqSmoKlWo9I9b5bvPgcFZY58EO2zARsBmLAjqtSZTdDB9dasohuPjXpDa9lOR.sO5oOhIQKC6NcHC3CIIuzA&amp;state=5dc5b208-6093-4d1b-b9ed-c9d2091a306f&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,703 [DEBUG] PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:106) [http-nio-8080-exec-2] checkCorsPreflight https://APP_HOST/keycloak/?code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..0-5C1AJAZrNXJwmZbt4I0Q.LET3bu8MVK6Uq58-j-yPC0WP_F01jskmm6WvyXqRRURlMiVIH9VV0fx6Cc3O4X0JFyTUiuESHUcfk2dyHOoL_z-IVVAAxTE-Eg2rphKjVT7OfWsoxuHZKFY9RkyEnr9Grwgd9WakmrGZBAin8yVX6YmfLC6O1KkrVwiJDrB3lP6VrlWRCMrlmBnjMlqwzFD_Bx3vqSmoKlWo9I9b5bvPgcFZY58EO2zARsBmLAjqtSZTdDB9dasohuPjXpDa9lOR.sO5oOhIQKC6NcHC3CIIuzA&amp;state=5dc5b208-6093-4d1b-b9ed-c9d2091a306f&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f\r\n    2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,767 [DEBUG] RequestAuthCache.process(RequestAuthCache.java:76) [http-nio-8080-exec-2] Auth cache not set in the context\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,703 [DEBUG] OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:279) [http-nio-8080-exec-2] there was a code, resolving\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,704 [DEBUG] OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:325) [http-nio-8080-exec-2] checking state cookie for after code\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,704 [DEBUG] OAuthRequestAuthenticator.checkStateCookie(OAuthRequestAuthenticator.java:244) [http-nio-8080-exec-2] ** reseting application state cookie\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,705 [DEBUG] ThreadSafeClientConnManager.getConnection(ThreadSafeClientConnManager.java:239) [http-nio-8080-exec-2] Get connection: {s}-&gt;https://KEYCLOAK_HOST:443, timeout = 0\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,706 [DEBUG] ConnPoolByRoute.getEntryBlocking(ConnPoolByRoute.java:347) [http-nio-8080-exec-2] [{s}-&gt;https://KEYCLOAK_HOST:443] total kept alive: 1, total issued: 0, total allocated: 1 out of 20\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,706 [DEBUG] ConnPoolByRoute.getFreeEntry(ConnPoolByRoute.java:496) [http-nio-8080-exec-2] Getting free connection [{s}-&gt;https://KEYCLOAK_HOST:443][null]\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,707 [DEBUG] DefaultHttpClient.execute(DefaultRequestDirector.java:433) [http-nio-8080-exec-2] Stale connection check\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,708 [DEBUG] DefaultHttpClient.execute(DefaultRequestDirector.java:435) [http-nio-8080-exec-2] Stale connection detected\r\n    2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,708 [DEBUG] DefaultClientConnection.close(DefaultClientConnection.java:182) [http-nio-8080-exec-2] Connection 0.0.0.0:47716&lt;-&gt;11.217.32.122:443 closed\r\n    2019-01-11T12:03:21.71+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,709 [DEBUG] DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:176) [http-nio-8080-exec-2] Connecting to KEYCLOAK_HOST:443\r\n    2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,767 [DEBUG] RequestAddCookies.process(RequestAddCookies.java:122) [http-nio-8080-exec-2] CookieSpec selected: compatibility\r\n    2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,768 [DEBUG] RequestProxyAuthentication.process(RequestProxyAuthentication.java:88) [http-nio-8080-exec-2] Proxy auth state: UNCHALLENGED\r\n    2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,768 [DEBUG] DefaultHttpClient.tryExecute(DefaultRequestDirector.java:684) [http-nio-8080-exec-2] Attempt 1 to execute request\r\n    2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,768 [DEBUG] DefaultClientConnection.sendRequestHeader(DefaultClientConnection.java:276) [http-nio-8080-exec-2] Sending request: POST /auth/realms/kums/protocol/openid-connect/token HTTP/1.1\r\n    2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,769 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; &quot;POST /auth/realms/kums/protocol/openid-connect/token HTTP/1.1[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,769 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; &quot;Authorization: Basic ...[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,770 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; &quot;Content-Length: 577[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,770 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; &quot;Content-Type: application/x-www-form-urlencoded; charset=UTF-8[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,770 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; &quot;Host: KEYCLOAK_HOST[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,771 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,771 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,771 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:280) [http-nio-8080-exec-2] &gt;&gt; POST /auth/realms/kums/protocol/openid-connect/token HTTP/1.1\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,772 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Authorization: Basic ...\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,772 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Content-Length: 577\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,772 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Content-Type: application/x-www-form-urlencoded; charset=UTF-8\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,773 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Host: KEYCLOAK_HOST\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,773 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Connection: Keep-Alive\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,774 [DEBUG] wire.wire(Wire.java:86) [http-nio-8080-exec-2]  &gt;&gt; &quot;grant_type=authorization_code&amp;code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..0-5C1AJAZrNXJwmZbt4I0Q.LET3bu8MVK6Uq58-j-yPC0WP_F01jskmm6WvyXqRRURlMiVIH9VV0fx6Cc3O4X0JFyTUiuESHUcfk2dyHOoL_z-IVVAAxTE-Eg2rphKjVT7OfWsoxuHZKFY9RkyEnr9Grwgd9WakmrGZBAin8yVX6YmfLC6O1KkrVwiJDrB3lP6VrlWRCMrlmBnjMlqwzFD_Bx3vqSmoKlWo9I9b5bvPgcFZY58EO2zARsBmLAjqtSZTdDB9dasohuPjXpDa9lOR.sO5oOhIQKC6NcHC3CIIuzA&amp;redirect_uri=https%3A%2F%2FAPP_HOST%2Fkeycloak%2F&amp;client_session_state=FE94EAFFC87674ED70E0C1EC543CFBAE&amp;client_session_host=dc36d0f9-10cf-4807-74e3-b2da&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,776 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; &quot;HTTP/1.1 400 Bad Request[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,776 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; &quot;Connection: keep-alive[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,776 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; &quot;Cache-Control: no-store[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,777 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; &quot;Pragma: no-cache[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,777 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; &quot;Content-Type: application/json[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,777 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; &quot;Content-Length: 70[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,778 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; &quot;Date: Fri, 11 Jan 2019 11:03:21 GMT[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,778 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; &quot;[\\r][\\n]&quot;\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,778 [DEBUG] DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:261) [http-nio-8080-exec-2] Receiving response: HTTP/1.1 400 Bad Request\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,779 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:264) [http-nio-8080-exec-2] &lt;&lt; HTTP/1.1 400 Bad Request\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,779 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Connection: keep-alive\r\n    2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,779 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Cache-Control: no-store\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,780 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Pragma: no-cache\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,780 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Content-Type: application/json\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,780 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Content-Length: 70\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,780 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Date: Fri, 11 Jan 2019 11:03:21 GMT\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,781 [DEBUG] DefaultHttpClient.execute(DefaultRequestDirector.java:511) [http-nio-8080-exec-2] Connection can be kept alive indefinitely\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,781 [DEBUG] wire.wire(Wire.java:86) [http-nio-8080-exec-2]  &lt;&lt; &quot;{&quot;error&quot;:&quot;invalid_grant&quot;,&quot;error_description&quot;:&quot;Incorrect redirect_uri&quot;}&quot;\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,782 [DEBUG] ThreadSafeClientConnManager.releaseConnection(ThreadSafeClientConnManager.java:285) [http-nio-8080-exec-2] Released connection is reusable.\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,782 [DEBUG] ConnPoolByRoute.freeEntry(ConnPoolByRoute.java:431) [http-nio-8080-exec-2] Releasing connection [{s}-&gt;https://KEYCLOAK_HOST:443][null]\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,782 [DEBUG] ConnPoolByRoute.freeEntry(ConnPoolByRoute.java:457) [http-nio-8080-exec-2] Pooling connection [{s}-&gt;https://KEYCLOAK_HOST:443][null]; keep alive indefinitely\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,782 [DEBUG] ConnPoolByRoute.notifyWaitingThread(ConnPoolByRoute.java:678) [http-nio-8080-exec-2] Notifying no-one, there are no waiting threads\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,783 [ERROR] OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:337) [http-nio-8080-exec-2] failed to turn code into token\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,783 [ERROR] OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:338) [http-nio-8080-exec-2] status from server: 400\r\n    2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,783 [ERROR] OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:340) [http-nio-8080-exec-2]    {&quot;error&quot;:&quot;invalid_grant&quot;,&quot;error_description&quot;:&quot;Incorrect redirect_uri&quot;} ","title":"Keycloak complains about invalid redirect_uri on token endpoint","body":"<p>I try to migrate a existing Java application running on CloudFoundry to Keycloak and therefore use the Keycloak Servlet Filter. This is working in the first step to request the code. But the second step to turn the code into a token fails with \"Incorrect redirect_uri\". This is weird because I can see in both requests to the Keycloak server then same URL as redirect_url.</p>\n\n<p>Does anybody know the reason and a solution for this?</p>\n\n<pre><code>2019-01-11T12:03:20.01+0100 [RTR/1] OUT APP_HOST - [2019-01-11T11:03:19.993+0000] \"GET /keycloak/ HTTP/1.1\" 302 0 0 \"https://APP_HOST/keycloak/?state=f98ebe4e-1499-4513-8da3-1a95bd0ce894&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f&amp;code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..zEDr2g5BhXmaNr6vflO7eg.Lm6SpGasJYE-CJqkwiAmWz4sRHGUMgYHFjNr-ScWamsSL6vRSj_r-Gbsf75-FNxt4NMC6XTshNXoeqTA0SJOrQSnPMV1qLuJyAHWY-ajAiDkPvtsWT5nxHYbEUaJtDOAMbxhtfl3yQo_Uyl2gYegcJTgC7FchC8FSl5ovS7q3EZb8aXET0OP_-IApQo0xN4XB2BDuiuC_DY1ySlYkUYdKSrK4HsgSlkSHELBwyL0iw8CNs0nlnWHgJZBWtYDVoRk.QuT_ov_ZBlFhexBrZAYl_w\" \"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101 Firefox/60.0\" \"192.168.6.12:50100\" \"192.168.2.30:61006\" x_forwarded_for:\"10.209.173.45, 192.168.6.12\" x_forwarded_proto:\"https\" vcap_request_id:\"b18a1abd-233b-4140-5e8a-8ae1a16ca251\" response_time:0.017485509 app_id:\"27846aa1-34c0-46e0-9dce-c7a893d06dd6\" app_index:\"0\" x_b3_traceid:\"9399df2a769b38c6\" x_b3_spanid:\"9399df2a769b38c6\" x_b3_parentspanid:\"-\"\n2019-01-11T12:03:20.01+0100 [RTR/1] OUT \n2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,004 [DEBUG] PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75) [http-nio-8080-exec-1] adminRequest https://APP_HOST/keycloak/?\n2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,006 [DEBUG] PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:106) [http-nio-8080-exec-1] checkCorsPreflight https://APP_HOST/keycloak/?\n2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,006 [DEBUG] OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:266) [http-nio-8080-exec-1] there was no code\n2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,007 [DEBUG] OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:274) [http-nio-8080-exec-1] redirecting to auth server\n2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,007 [DEBUG] OAuthRequestAuthenticator.getRedirectUri(OAuthRequestAuthenticator.java:144) [http-nio-8080-exec-1] callback uri: https://APP_HOST/keycloak/?\n2019-01-11T12:03:20.00+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:20,008 [DEBUG] OAuthRequestAuthenticator.challenge(OAuthRequestAuthenticator.java:227) [http-nio-8080-exec-1] Sending redirect to login page: https://KEYCLOAK_HOST/auth/realms/kums/protocol/openid-connect/auth?response_type=code&amp;client_id=CLIENT_ID&amp;redirect_uri=https%3A%2F%2FAPP_HOST%2Fkeycloak%2F?&amp;state=5dc5b208-6093-4d1b-b9ed-c9d2091a306f&amp;login=true&amp;scope=openid\n2019-01-11T12:03:21.79+0100 [RTR/0] OUT APP_HOST - [2019-01-11T11:03:21.692+0000] \"GET /keycloak/?state=5dc5b208-6093-4d1b-b9ed-c9d2091a306f&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f&amp;code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..0-5C1AJAZrNXJwmZbt4I0Q.LET3bu8MVK6Uq58-j-yPC0WP_F01jskmm6WvyXqRRURlMiVIH9VV0fx6Cc3O4X0JFyTUiuESHUcfk2dyHOoL_z-IVVAAxTE-Eg2rphKjVT7OfWsoxuHZKFY9RkyEnr9Grwgd9WakmrGZBAin8yVX6YmfLC6O1KkrVwiJDrB3lP6VrlWRCMrlmBnjMlqwzFD_Bx3vqSmoKlWo9I9b5bvPgcFZY58EO2zARsBmLAjqtSZTdDB9dasohuPjXpDa9lOR.sO5oOhIQKC6NcHC3CIIuzA HTTP/1.1\" 403 0 5878 \"https://APP_HOST/keycloak/?state=f98ebe4e-1499-4513-8da3-1a95bd0ce894&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f&amp;code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..zEDr2g5BhXmaNr6vflO7eg.Lm6SpGasJYE-CJqkwiAmWz4sRHGUMgYHFjNr-ScWamsSL6vRSj_r-Gbsf75-FNxt4NMC6XTshNXoeqTA0SJOrQSnPMV1qLuJyAHWY-ajAiDkPvtsWT5nxHYbEUaJtDOAMbxhtfl3yQo_Uyl2gYegcJTgC7FchC8FSl5ovS7q3EZb8aXET0OP_-IApQo0xN4XB2BDuiuC_DY1ySlYkUYdKSrK4HsgSlkSHELBwyL0iw8CNs0nlnWHgJZBWtYDVoRk.QuT_ov_ZBlFhexBrZAYl_w\" \"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101 Firefox/60.0\" \"192.168.6.12:47988\" \"192.168.2.30:61006\" x_forwarded_for:\"10.209.173.45, 192.168.6.12\" x_forwarded_proto:\"https\" vcap_request_id:\"25f4b5df-a11e-4120-7ec8-2910671b4819\" response_time:0.101218652 app_id:\"27846aa1-34c0-46e0-9dce-c7a893d06dd6\" app_index:\"0\" x_b3_traceid:\"b743963318cc0d09\" x_b3_spanid:\"b743963318cc0d09\" x_b3_parentspanid:\"-\"\n2019-01-11T12:03:21.79+0100 [RTR/0] OUT \n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,702 [DEBUG] PreAuthActionsHandler.handleRequest(PreAuthActionsHandler.java:75) [http-nio-8080-exec-2] adminRequest https://APP_HOST/keycloak/?code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..0-5C1AJAZrNXJwmZbt4I0Q.LET3bu8MVK6Uq58-j-yPC0WP_F01jskmm6WvyXqRRURlMiVIH9VV0fx6Cc3O4X0JFyTUiuESHUcfk2dyHOoL_z-IVVAAxTE-Eg2rphKjVT7OfWsoxuHZKFY9RkyEnr9Grwgd9WakmrGZBAin8yVX6YmfLC6O1KkrVwiJDrB3lP6VrlWRCMrlmBnjMlqwzFD_Bx3vqSmoKlWo9I9b5bvPgcFZY58EO2zARsBmLAjqtSZTdDB9dasohuPjXpDa9lOR.sO5oOhIQKC6NcHC3CIIuzA&amp;state=5dc5b208-6093-4d1b-b9ed-c9d2091a306f&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,703 [DEBUG] PreAuthActionsHandler.preflightCors(PreAuthActionsHandler.java:106) [http-nio-8080-exec-2] checkCorsPreflight https://APP_HOST/keycloak/?code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..0-5C1AJAZrNXJwmZbt4I0Q.LET3bu8MVK6Uq58-j-yPC0WP_F01jskmm6WvyXqRRURlMiVIH9VV0fx6Cc3O4X0JFyTUiuESHUcfk2dyHOoL_z-IVVAAxTE-Eg2rphKjVT7OfWsoxuHZKFY9RkyEnr9Grwgd9WakmrGZBAin8yVX6YmfLC6O1KkrVwiJDrB3lP6VrlWRCMrlmBnjMlqwzFD_Bx3vqSmoKlWo9I9b5bvPgcFZY58EO2zARsBmLAjqtSZTdDB9dasohuPjXpDa9lOR.sO5oOhIQKC6NcHC3CIIuzA&amp;state=5dc5b208-6093-4d1b-b9ed-c9d2091a306f&amp;session_state=9984091c-6eb7-4395-a335-27aff1334a5f\n2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,767 [DEBUG] RequestAuthCache.process(RequestAuthCache.java:76) [http-nio-8080-exec-2] Auth cache not set in the context\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,703 [DEBUG] OAuthRequestAuthenticator.authenticate(OAuthRequestAuthenticator.java:279) [http-nio-8080-exec-2] there was a code, resolving\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,704 [DEBUG] OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:325) [http-nio-8080-exec-2] checking state cookie for after code\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,704 [DEBUG] OAuthRequestAuthenticator.checkStateCookie(OAuthRequestAuthenticator.java:244) [http-nio-8080-exec-2] ** reseting application state cookie\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,705 [DEBUG] ThreadSafeClientConnManager.getConnection(ThreadSafeClientConnManager.java:239) [http-nio-8080-exec-2] Get connection: {s}-&gt;https://KEYCLOAK_HOST:443, timeout = 0\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,706 [DEBUG] ConnPoolByRoute.getEntryBlocking(ConnPoolByRoute.java:347) [http-nio-8080-exec-2] [{s}-&gt;https://KEYCLOAK_HOST:443] total kept alive: 1, total issued: 0, total allocated: 1 out of 20\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,706 [DEBUG] ConnPoolByRoute.getFreeEntry(ConnPoolByRoute.java:496) [http-nio-8080-exec-2] Getting free connection [{s}-&gt;https://KEYCLOAK_HOST:443][null]\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,707 [DEBUG] DefaultHttpClient.execute(DefaultRequestDirector.java:433) [http-nio-8080-exec-2] Stale connection check\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,708 [DEBUG] DefaultHttpClient.execute(DefaultRequestDirector.java:435) [http-nio-8080-exec-2] Stale connection detected\n2019-01-11T12:03:21.70+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,708 [DEBUG] DefaultClientConnection.close(DefaultClientConnection.java:182) [http-nio-8080-exec-2] Connection 0.0.0.0:47716&lt;-&gt;11.217.32.122:443 closed\n2019-01-11T12:03:21.71+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,709 [DEBUG] DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:176) [http-nio-8080-exec-2] Connecting to KEYCLOAK_HOST:443\n2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,767 [DEBUG] RequestAddCookies.process(RequestAddCookies.java:122) [http-nio-8080-exec-2] CookieSpec selected: compatibility\n2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,768 [DEBUG] RequestProxyAuthentication.process(RequestProxyAuthentication.java:88) [http-nio-8080-exec-2] Proxy auth state: UNCHALLENGED\n2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,768 [DEBUG] DefaultHttpClient.tryExecute(DefaultRequestDirector.java:684) [http-nio-8080-exec-2] Attempt 1 to execute request\n2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,768 [DEBUG] DefaultClientConnection.sendRequestHeader(DefaultClientConnection.java:276) [http-nio-8080-exec-2] Sending request: POST /auth/realms/kums/protocol/openid-connect/token HTTP/1.1\n2019-01-11T12:03:21.76+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,769 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; \"POST /auth/realms/kums/protocol/openid-connect/token HTTP/1.1[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,769 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; \"Authorization: Basic ...[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,770 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; \"Content-Length: 577[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,770 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; \"Content-Type: application/x-www-form-urlencoded; charset=UTF-8[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,770 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; \"Host: KEYCLOAK_HOST[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,771 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; \"Connection: Keep-Alive[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,771 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &gt;&gt; \"[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,771 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:280) [http-nio-8080-exec-2] &gt;&gt; POST /auth/realms/kums/protocol/openid-connect/token HTTP/1.1\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,772 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Authorization: Basic ...\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,772 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Content-Length: 577\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,772 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Content-Type: application/x-www-form-urlencoded; charset=UTF-8\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,773 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Host: KEYCLOAK_HOST\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,773 [DEBUG] headers.sendRequestHeader(DefaultClientConnection.java:283) [http-nio-8080-exec-2] &gt;&gt; Connection: Keep-Alive\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,774 [DEBUG] wire.wire(Wire.java:86) [http-nio-8080-exec-2]  &gt;&gt; \"grant_type=authorization_code&amp;code=eyJhbGciOiJkaXIiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0..0-5C1AJAZrNXJwmZbt4I0Q.LET3bu8MVK6Uq58-j-yPC0WP_F01jskmm6WvyXqRRURlMiVIH9VV0fx6Cc3O4X0JFyTUiuESHUcfk2dyHOoL_z-IVVAAxTE-Eg2rphKjVT7OfWsoxuHZKFY9RkyEnr9Grwgd9WakmrGZBAin8yVX6YmfLC6O1KkrVwiJDrB3lP6VrlWRCMrlmBnjMlqwzFD_Bx3vqSmoKlWo9I9b5bvPgcFZY58EO2zARsBmLAjqtSZTdDB9dasohuPjXpDa9lOR.sO5oOhIQKC6NcHC3CIIuzA&amp;redirect_uri=https%3A%2F%2FAPP_HOST%2Fkeycloak%2F&amp;client_session_state=FE94EAFFC87674ED70E0C1EC543CFBAE&amp;client_session_host=dc36d0f9-10cf-4807-74e3-b2da\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,776 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; \"HTTP/1.1 400 Bad Request[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,776 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; \"Connection: keep-alive[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,776 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; \"Cache-Control: no-store[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,777 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; \"Pragma: no-cache[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,777 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; \"Content-Type: application/json[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,777 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; \"Content-Length: 70[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,778 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; \"Date: Fri, 11 Jan 2019 11:03:21 GMT[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,778 [DEBUG] wire.wire(Wire.java:72) [http-nio-8080-exec-2]  &lt;&lt; \"[\\r][\\n]\"\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,778 [DEBUG] DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:261) [http-nio-8080-exec-2] Receiving response: HTTP/1.1 400 Bad Request\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,779 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:264) [http-nio-8080-exec-2] &lt;&lt; HTTP/1.1 400 Bad Request\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,779 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Connection: keep-alive\n2019-01-11T12:03:21.77+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,779 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Cache-Control: no-store\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,780 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Pragma: no-cache\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,780 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Content-Type: application/json\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,780 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Content-Length: 70\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,780 [DEBUG] headers.receiveResponseHeader(DefaultClientConnection.java:267) [http-nio-8080-exec-2] &lt;&lt; Date: Fri, 11 Jan 2019 11:03:21 GMT\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,781 [DEBUG] DefaultHttpClient.execute(DefaultRequestDirector.java:511) [http-nio-8080-exec-2] Connection can be kept alive indefinitely\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,781 [DEBUG] wire.wire(Wire.java:86) [http-nio-8080-exec-2]  &lt;&lt; \"{\"error\":\"invalid_grant\",\"error_description\":\"Incorrect redirect_uri\"}\"\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,782 [DEBUG] ThreadSafeClientConnManager.releaseConnection(ThreadSafeClientConnManager.java:285) [http-nio-8080-exec-2] Released connection is reusable.\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,782 [DEBUG] ConnPoolByRoute.freeEntry(ConnPoolByRoute.java:431) [http-nio-8080-exec-2] Releasing connection [{s}-&gt;https://KEYCLOAK_HOST:443][null]\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,782 [DEBUG] ConnPoolByRoute.freeEntry(ConnPoolByRoute.java:457) [http-nio-8080-exec-2] Pooling connection [{s}-&gt;https://KEYCLOAK_HOST:443][null]; keep alive indefinitely\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,782 [DEBUG] ConnPoolByRoute.notifyWaitingThread(ConnPoolByRoute.java:678) [http-nio-8080-exec-2] Notifying no-one, there are no waiting threads\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,783 [ERROR] OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:337) [http-nio-8080-exec-2] failed to turn code into token\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,783 [ERROR] OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:338) [http-nio-8080-exec-2] status from server: 400\n2019-01-11T12:03:21.78+0100 [APP/PROC/WEB/0] OUT 2019-01-11 12:03:21,783 [ERROR] OAuthRequestAuthenticator.resolveCode(OAuthRequestAuthenticator.java:340) [http-nio-8080-exec-2]    {\"error\":\"invalid_grant\",\"error_description\":\"Incorrect redirect_uri\"} \n</code></pre>\n"},{"tags":["java","mockito","webdrivermanager-java"],"owner":{"account_id":29817105,"reputation":1,"user_id":22851170,"display_name":"Pratiksha Junonkar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699001595,"creation_date":1699001118,"question_id":77415239,"body_markdown":"While initializing chrome browser using webdrivermanager using mockito framework, java 17 and chromebrowser version 118 but getting error as\r\n\r\n    &quot;java.lang.NoSuchMethodError: &#39;void org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.setDefaultConnectionConfig(org.apache.hc.client5.http.config.ConnectionConfig)&#39;\r\n    \r\n        at io.github.bonigarcia.wdm.online.HttpClient.&lt;init&gt;(HttpClient.java:121)\r\n        at io.github.bonigarcia.wdm.WebDriverManager.setup(WebDriverManager.java:413)\r\n        at com.ec.demo.iud.BrowserTest.setupClass(BrowserTest.java:34)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n        at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\r\nMy code:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class BrowserTest {\r\n    \r\n        //@Mock\r\n        static\r\n        WebDriver driver;\r\n        \r\n        @BeforeAll\r\n        static void setupClass() {\r\n            System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Seleniumdriver\\\\chromedriver.exe&quot;);\r\n            ChromeOptions options = new ChromeOptions();\r\n            options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n            //driver = new ChromeDriver(options);\r\n            driver= WebDriverManager.chromedriver().getWebDriver();\r\n            WebDriverManager.getInstance(&quot;chrome&quot;).setup();\r\n        }\r\n        \r\n        @AfterEach\r\n        void teardown() {\r\n            driver.quit();\r\n        }\r\n        \r\n        @Test\r\n        public void test() {\r\n    \r\n         driver.get(&quot;https://bonigarcia.dev/selenium-webdriver-java/&quot;);\r\n         String title = driver.getTitle();\r\n    \r\n           \r\n        }\r\n    }\r\n\r\nI tried and execute above code to initialize driver getting error.","title":"webdrivermanager :java.lang.NoSuchMethodError:&#39;void org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.setDefaultConnectionConfig","body":"<p>While initializing chrome browser using webdrivermanager using mockito framework, java 17 and chromebrowser version 118 but getting error as</p>\n<pre><code>&quot;java.lang.NoSuchMethodError: 'void org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager.setDefaultConnectionConfig(org.apache.hc.client5.http.config.ConnectionConfig)'\n\n    at io.github.bonigarcia.wdm.online.HttpClient.&lt;init&gt;(HttpClient.java:121)\n    at io.github.bonigarcia.wdm.WebDriverManager.setup(WebDriverManager.java:413)\n    at com.ec.demo.iud.BrowserTest.setupClass(BrowserTest.java:34)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n</code></pre>\n<p>My code:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class BrowserTest {\n\n    //@Mock\n    static\n    WebDriver driver;\n    \n    @BeforeAll\n    static void setupClass() {\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Seleniumdriver\\\\chromedriver.exe&quot;);\n        ChromeOptions options = new ChromeOptions();\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\n        //driver = new ChromeDriver(options);\n        driver= WebDriverManager.chromedriver().getWebDriver();\n        WebDriverManager.getInstance(&quot;chrome&quot;).setup();\n    }\n    \n    @AfterEach\n    void teardown() {\n        driver.quit();\n    }\n    \n    @Test\n    public void test() {\n\n     driver.get(&quot;https://bonigarcia.dev/selenium-webdriver-java/&quot;);\n     String title = driver.getTitle();\n\n       \n    }\n}\n</code></pre>\n<p>I tried and execute above code to initialize driver getting error.</p>\n"},{"tags":["java","azure-functions","postman","azure-blob-storage","form-data"],"answers":[{"comments":[{"owner":{"account_id":26619036,"reputation":1003,"user_id":20238030,"display_name":"Suresh Chikkam"},"score":0,"creation_date":1699001467,"post_id":77402905,"comment_id":136478380,"body_markdown":"@Pradeep S, This above dependency provides the `@FunctionName`, `@HttpTrigger`, and `@FromData` annotations, which you can use to define your Azure Functions.","body":"@Pradeep S, This above dependency provides the <code>@FunctionName</code>, <code>@HttpTrigger</code>, and <code>@FromData</code> annotations, which you can use to define your Azure Functions."}],"tags":[],"owner":{"account_id":26619036,"reputation":1003,"user_id":20238030,"display_name":"Suresh Chikkam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1699001359,"creation_date":1698844343,"answer_id":77402905,"question_id":77394694,"body_markdown":"I have made some little changes to the above code Azure Function is configured to accept `multipart/form-data` content. You can do this by specifying the correct `consumes` value in your `@HttpTrigger` annotation.\r\n\r\n**BlobTriggerJava:**\r\n\r\n```java\r\npublic HttpResponseMessage createItemImage(\r\n    @HttpTrigger(\r\n        name = &quot;request&quot;,\r\n        methods = { HttpMethod.POST },\r\n        route = &quot;menuimage&quot;,\r\n        authLevel = AuthorizationLevel.ANONYMOUS,\r\n        consumes = &quot;multipart/form-data&quot;\r\n    ) HttpRequestMessage&lt;FormData&gt; request, ExecutionContext context) {\r\n\r\n    String connectionString = &quot;your_connection_string&quot;;\r\n    String containerName = &quot;menuitemimage&quot;;\r\n    String blobName = UUID.randomUUID().toString();\r\n    String contentType = &quot;image/jpeg&quot;;\r\n\r\n    try {\r\n        FormData formData = request.getBody();\r\n        \r\n        if (!formData.containsKey(&quot;image&quot;)) {\r\n            return request.createResponseBuilder(HttpStatus.BAD_REQUEST)\r\n                .body(&quot;Image is missing in the form-data request.&quot;).build();\r\n        }\r\n\r\n        // Get the image data from the form-data\r\n        byte[] imageBytes = formData.get(&quot;image&quot;).get();\r\n\r\n        // Your code to store the image in localPath, blob storage, or any other processing\r\n\r\n        return request.createResponseBuilder(HttpStatus.OK)\r\n            .body(&quot;Image uploaded successfully &quot; + blobClient.getBlobUrl())\r\n            .build();\r\n    } catch (Exception e) {\r\n        context.getLogger().severe(&quot;Error: &quot; + e.getMessage());\r\n        return request.createResponseBuilder(HttpStatus.INTERNAL_SERVER_ERROR)\r\n            .body(&quot;Error: &quot; + e.getMessage())\r\n            .build();\r\n    }\r\n}\r\n```\r\n\r\n**Dependency:**\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.microsoft.azure.functions&lt;/groupId&gt;\r\n    &lt;artifactId&gt;azure-functions-java-library&lt;/artifactId&gt;\r\n    &lt;version&gt;1.3.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n- The `get(&quot;image&quot;).get()` method retrieves the image data from the form-data with the key &quot;image.&quot;\r\n\r\n![enter image description here](https://i.imgur.com/aveMpUz.png)\r\n\r\nIn Postman, when you make a POST request with the &quot;multipart/form-data&quot; content type, include a key named &quot;test&quot; and attach your image file to it the test image will be correctly processed by your Azure Function.\r\n\r\n![enter image description here](https://i.imgur.com/wmWtxvj.png)\r\n\r\nIn container:\r\n![enter image description here](https://i.imgur.com/0ipHVyt.png)\r\n\r\n","title":"Unable to get image from postman Form-data using java azure functions to store Blob-Storage","body":"<p>I have made some little changes to the above code Azure Function is configured to accept <code>multipart/form-data</code> content. You can do this by specifying the correct <code>consumes</code> value in your <code>@HttpTrigger</code> annotation.</p>\n<p><strong>BlobTriggerJava:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public HttpResponseMessage createItemImage(\n    @HttpTrigger(\n        name = &quot;request&quot;,\n        methods = { HttpMethod.POST },\n        route = &quot;menuimage&quot;,\n        authLevel = AuthorizationLevel.ANONYMOUS,\n        consumes = &quot;multipart/form-data&quot;\n    ) HttpRequestMessage&lt;FormData&gt; request, ExecutionContext context) {\n\n    String connectionString = &quot;your_connection_string&quot;;\n    String containerName = &quot;menuitemimage&quot;;\n    String blobName = UUID.randomUUID().toString();\n    String contentType = &quot;image/jpeg&quot;;\n\n    try {\n        FormData formData = request.getBody();\n        \n        if (!formData.containsKey(&quot;image&quot;)) {\n            return request.createResponseBuilder(HttpStatus.BAD_REQUEST)\n                .body(&quot;Image is missing in the form-data request.&quot;).build();\n        }\n\n        // Get the image data from the form-data\n        byte[] imageBytes = formData.get(&quot;image&quot;).get();\n\n        // Your code to store the image in localPath, blob storage, or any other processing\n\n        return request.createResponseBuilder(HttpStatus.OK)\n            .body(&quot;Image uploaded successfully &quot; + blobClient.getBlobUrl())\n            .build();\n    } catch (Exception e) {\n        context.getLogger().severe(&quot;Error: &quot; + e.getMessage());\n        return request.createResponseBuilder(HttpStatus.INTERNAL_SERVER_ERROR)\n            .body(&quot;Error: &quot; + e.getMessage())\n            .build();\n    }\n}\n</code></pre>\n<p><strong>Dependency:</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.azure.functions&lt;/groupId&gt;\n    &lt;artifactId&gt;azure-functions-java-library&lt;/artifactId&gt;\n    &lt;version&gt;1.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ul>\n<li>The <code>get(&quot;image&quot;).get()</code> method retrieves the image data from the form-data with the key &quot;image.&quot;</li>\n</ul>\n<p><img src=\"https://i.imgur.com/aveMpUz.png\" alt=\"enter image description here\" /></p>\n<p>In Postman, when you make a POST request with the &quot;multipart/form-data&quot; content type, include a key named &quot;test&quot; and attach your image file to it the test image will be correctly processed by your Azure Function.</p>\n<p><img src=\"https://i.imgur.com/wmWtxvj.png\" alt=\"enter image description here\" /></p>\n<p>In container:\n<img src=\"https://i.imgur.com/0ipHVyt.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"account_id":27094838,"reputation":1,"user_id":20642172,"display_name":"Pradeep S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699001359,"creation_date":1698744319,"question_id":77394694,"body_markdown":"[enter image description here][1]i am using java azure functions in that i want get image from postman Form-data but unable to get image in correct format and the image size were increased  but it can done in postman binary with correct format and in actual sizebut in my work i want to get image through postman form-data \r\n```\r\n@FunctionName(&quot;CreateItemImage&quot;)\r\n\tpublic HttpResponseMessage createItemImage(@HttpTrigger(name = &quot;request&quot;, methods = {\r\n\t\t\tHttpMethod.POST }, route = &quot;menuimage&quot;, authLevel = AuthorizationLevel.ANONYMOUS) HttpRequestMessage&lt;byte[]&gt; request,\r\n\t\t\tExecutionContext context) {\r\n\r\n\t\tString connectionString = &quot;keys&quot;;\r\n\t\tString containerName = &quot;menuitemimage&quot;;\r\n\t\tString blobName = UUID.randomUUID().toString();\r\n\t\tString contentType = &quot;image/jpeg&quot;;\r\n        String localPath = &quot;D:/Photo/three/&quot;+blobName+&quot;.jpeg&quot;; \r\n        \r\n           \r\n\t\ttry {\r\n\t\t\tbyte[] imageBytes= request.getBody();\r\n\r\n\t\t\tif (imageBytes == null|| imageBytes.length == 0) {\r\n\t\t\t\treturn request.createResponseBuilder(HttpStatus.BAD_REQUEST)\r\n\t\t\t\t\t\t.body(&quot;Image content is missing in the request.&quot;).build();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t Path localFilePath = Paths.get(localPath);\r\n\t            Files.write(localFilePath, imageBytes);\r\n\r\n\t\t\tBlobServiceClient blobServiceClient = new BlobServiceClientBuilder().connectionString(connectionString)\r\n\t\t\t\t\t.buildClient();\r\n\t\t\tBlobContainerClient containerClient = blobServiceClient.getBlobContainerClient(containerName);\r\n\t\t\tBlobClient blobClient = containerClient.getBlobClient(blobName);\r\n\r\n\t\t\tByteArrayInputStream inputStream = new ByteArrayInputStream(imageBytes);\r\n\r\n\t\t\tbyte[] md5Hash = calculateMD5Hash(imageBytes);\r\n\r\n\t\t\tBlobHttpHeaders headers = new BlobHttpHeaders().setContentType(contentType).setContentMd5(md5Hash);\r\n\r\n\t\t\tblobClient.upload(inputStream, imageBytes.length);\r\n\t\t\tblobClient.setHttpHeaders(headers);\r\n\r\n\t\t\tcontext.getLogger().info(&quot;Image uploaded successfully with Content-Type: &quot; + contentType);\r\n\r\n\t\t\treturn request.createResponseBuilder(HttpStatus.OK)\r\n\t\t\t\t\t.body(&quot;Image uploaded successfully &quot; +blobClient.getBlobUrl())\r\n\t\t\t\t\t[](https://i.stack.imgur.com/ZcCZL.png)\r\n\t\t\t\t\t.build();\r\n\t\t} catch (Exception e) {\r\n\t\t\tcontext.getLogger().severe(&quot;Error: &quot; + e.getMessage());\r\n\t\t\treturn request.createResponseBuilder(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;Error: &quot; + e.getMessage())\r\n\t\t\t\t\t.build();\r\n\t\t}\r\n        \r\n        \r\n\t}\r\n\tprivate byte[] calculateMD5Hash(byte[] data) throws NoSuchAlgorithmException {\r\n\t\tMessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\r\n\t\tmd.update(data);\r\n\t\treturn md.digest();\r\n\r\n\t}\r\n```\r\n\r\n\r\ni want to upload image in postman form-data with correct size and format and not only store image in blob storage i store the upcoming image from postman in local it also not correct format but working with binary \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/syq7L.png","title":"Unable to get image from postman Form-data using java azure functions to store Blob-Storage","body":"<p><a href=\"https://i.stack.imgur.com/syq7L.png\" rel=\"nofollow noreferrer\">enter image description here</a>i am using java azure functions in that i want get image from postman Form-data but unable to get image in correct format and the image size were increased  but it can done in postman binary with correct format and in actual sizebut in my work i want to get image through postman form-data</p>\n<pre><code>@FunctionName(&quot;CreateItemImage&quot;)\n    public HttpResponseMessage createItemImage(@HttpTrigger(name = &quot;request&quot;, methods = {\n            HttpMethod.POST }, route = &quot;menuimage&quot;, authLevel = AuthorizationLevel.ANONYMOUS) HttpRequestMessage&lt;byte[]&gt; request,\n            ExecutionContext context) {\n\n        String connectionString = &quot;keys&quot;;\n        String containerName = &quot;menuitemimage&quot;;\n        String blobName = UUID.randomUUID().toString();\n        String contentType = &quot;image/jpeg&quot;;\n        String localPath = &quot;D:/Photo/three/&quot;+blobName+&quot;.jpeg&quot;; \n        \n           \n        try {\n            byte[] imageBytes= request.getBody();\n\n            if (imageBytes == null|| imageBytes.length == 0) {\n                return request.createResponseBuilder(HttpStatus.BAD_REQUEST)\n                        .body(&quot;Image content is missing in the request.&quot;).build();\n            }\n            \n             Path localFilePath = Paths.get(localPath);\n                Files.write(localFilePath, imageBytes);\n\n            BlobServiceClient blobServiceClient = new BlobServiceClientBuilder().connectionString(connectionString)\n                    .buildClient();\n            BlobContainerClient containerClient = blobServiceClient.getBlobContainerClient(containerName);\n            BlobClient blobClient = containerClient.getBlobClient(blobName);\n\n            ByteArrayInputStream inputStream = new ByteArrayInputStream(imageBytes);\n\n            byte[] md5Hash = calculateMD5Hash(imageBytes);\n\n            BlobHttpHeaders headers = new BlobHttpHeaders().setContentType(contentType).setContentMd5(md5Hash);\n\n            blobClient.upload(inputStream, imageBytes.length);\n            blobClient.setHttpHeaders(headers);\n\n            context.getLogger().info(&quot;Image uploaded successfully with Content-Type: &quot; + contentType);\n\n            return request.createResponseBuilder(HttpStatus.OK)\n                    .body(&quot;Image uploaded successfully &quot; +blobClient.getBlobUrl())\n                    [](https://i.stack.imgur.com/ZcCZL.png)\n                    .build();\n        } catch (Exception e) {\n            context.getLogger().severe(&quot;Error: &quot; + e.getMessage());\n            return request.createResponseBuilder(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;Error: &quot; + e.getMessage())\n                    .build();\n        }\n        \n        \n    }\n    private byte[] calculateMD5Hash(byte[] data) throws NoSuchAlgorithmException {\n        MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\n        md.update(data);\n        return md.digest();\n\n    }\n</code></pre>\n<p>i want to upload image in postman form-data with correct size and format and not only store image in blob storage i store the upcoming image from postman in local it also not correct format but working with binary</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":22436273,"reputation":88,"user_id":16641483,"display_name":"Lofri97"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1699001069,"creation_date":1698998559,"answer_id":77415014,"question_id":77412008,"body_markdown":"The RequestBodyAdvice allows you to perform the functions you want.\r\n\r\nRequestBodyAdvice.afterBodyRead works after ArgumentResolver so when you use RequestBodyAdvice, client&#39;s request already binded into DTO and you can modify it.\r\n\r\n#### SampleController.java\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;/test&quot;)\r\npublic class SampleController {\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;?&gt; testMethod(@RequestBody TestDTO testDTO) {\r\n        System.out.println(testDTO);\r\n        return ResponseEntity.ok(testDTO);\r\n    }\r\n\r\n    @PostMapping(path = &quot;/{var}&quot;)\r\n    public ResponseEntity&lt;?&gt; testMethod(@RequestBody TestDTO testDTO, @PathVariable String var) {\r\n        System.out.println(testDTO);\r\n        System.out.println(var);\r\n        return ResponseEntity.ok(testDTO);\r\n    }\r\n\r\n    @Data\r\n    public static class TestDTO {\r\n        @TrimWhitespace\r\n        private String trimName;\r\n        private String nonTrimName;\r\n        @TrimWhitespace\r\n        private long longVal;\r\n    }\r\n}\r\n\r\n```\r\n\r\n#### SampleRequestBodyAdvice.java\r\n``` java\r\n@RestControllerAdvice\r\npublic class SampleRequestBodyAdvice implements RequestBodyAdvice {\r\n    @Override\r\n    public boolean supports(MethodParameter methodParameter, Type targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) {\r\n        return methodParameter.getContainingClass() == SampleController.class &amp;&amp; methodParameter.hasParameterAnnotation(RequestBody.class);\r\n    }\r\n\r\n    @Override\r\n    public HttpInputMessage beforeBodyRead(HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) throws IOException {\r\n        return inputMessage;\r\n    }\r\n\r\n    @Override\r\n    public Object afterBodyRead(Object body, HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) {\r\n        Field[] declaredFields = body.getClass().getDeclaredFields();\r\n\r\n        for (Field field : declaredFields) {\r\n            TrimWhitespace declaredAnnotation = field.getDeclaredAnnotation(TrimWhitespace.class);\r\n\r\n            if (Objects.nonNull(declaredAnnotation)) {\r\n                if (field.getType().equals(String.class)) {\r\n                    try {\r\n                        field.setAccessible(true);\r\n                        field.set(body, ((String) field.get(body)).trim());\r\n                    } catch (IllegalAccessException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return body;\r\n    }\r\n\r\n    @Override\r\n    public Object handleEmptyBody(Object body, HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) {\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n#### Request\r\n``` curl\r\ncurl --location &#39;localhost:8080/test/123&#39; \\\r\n--header &#39;Content-Type: application/json&#39; \\\r\n--header &#39;Cookie: JSESSIONID=B8DF3B174C95BE13FE5FC1FFAC40756E; WMONID=sQ3DIBp2iau&#39; \\\r\n--data &#39;{\r\n    &quot;trimName&quot; : &quot;   trimName   &quot;,\r\n    &quot;nonTrimName&quot; : &quot;   nonTrimName   &quot;,\r\n    &quot;longVal&quot; : 123\r\n}&#39;\r\n```\r\n\r\n#### Response\r\n```\r\n{&quot;trimName&quot;:&quot;trimName&quot;,&quot;nonTrimName&quot;:&quot;   nonTrimName   &quot;,&quot;longVal&quot;:123}\r\n```\r\n** HandlerMethodArgumentResolver can do same function but you have to bind client&#39;s request into DTO.","title":"Annotation to trim whitespaces on a variable in a DTO in Spring","body":"<p>The RequestBodyAdvice allows you to perform the functions you want.</p>\n<p>RequestBodyAdvice.afterBodyRead works after ArgumentResolver so when you use RequestBodyAdvice, client's request already binded into DTO and you can modify it.</p>\n<h4>SampleController.java</h4>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/test&quot;)\npublic class SampleController {\n\n    @PostMapping\n    public ResponseEntity&lt;?&gt; testMethod(@RequestBody TestDTO testDTO) {\n        System.out.println(testDTO);\n        return ResponseEntity.ok(testDTO);\n    }\n\n    @PostMapping(path = &quot;/{var}&quot;)\n    public ResponseEntity&lt;?&gt; testMethod(@RequestBody TestDTO testDTO, @PathVariable String var) {\n        System.out.println(testDTO);\n        System.out.println(var);\n        return ResponseEntity.ok(testDTO);\n    }\n\n    @Data\n    public static class TestDTO {\n        @TrimWhitespace\n        private String trimName;\n        private String nonTrimName;\n        @TrimWhitespace\n        private long longVal;\n    }\n}\n\n</code></pre>\n<h4>SampleRequestBodyAdvice.java</h4>\n<pre class=\"lang-java prettyprint-override\"><code>@RestControllerAdvice\npublic class SampleRequestBodyAdvice implements RequestBodyAdvice {\n    @Override\n    public boolean supports(MethodParameter methodParameter, Type targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) {\n        return methodParameter.getContainingClass() == SampleController.class &amp;&amp; methodParameter.hasParameterAnnotation(RequestBody.class);\n    }\n\n    @Override\n    public HttpInputMessage beforeBodyRead(HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) throws IOException {\n        return inputMessage;\n    }\n\n    @Override\n    public Object afterBodyRead(Object body, HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) {\n        Field[] declaredFields = body.getClass().getDeclaredFields();\n\n        for (Field field : declaredFields) {\n            TrimWhitespace declaredAnnotation = field.getDeclaredAnnotation(TrimWhitespace.class);\n\n            if (Objects.nonNull(declaredAnnotation)) {\n                if (field.getType().equals(String.class)) {\n                    try {\n                        field.setAccessible(true);\n                        field.set(body, ((String) field.get(body)).trim());\n                    } catch (IllegalAccessException e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n            }\n        }\n        return body;\n    }\n\n    @Override\n    public Object handleEmptyBody(Object body, HttpInputMessage inputMessage, MethodParameter parameter, Type targetType, Class&lt;? extends HttpMessageConverter&lt;?&gt;&gt; converterType) {\n        return null;\n    }\n}\n</code></pre>\n<h4>Request</h4>\n<pre><code>curl --location 'localhost:8080/test/123' \\\n--header 'Content-Type: application/json' \\\n--header 'Cookie: JSESSIONID=B8DF3B174C95BE13FE5FC1FFAC40756E; WMONID=sQ3DIBp2iau' \\\n--data '{\n    &quot;trimName&quot; : &quot;   trimName   &quot;,\n    &quot;nonTrimName&quot; : &quot;   nonTrimName   &quot;,\n    &quot;longVal&quot; : 123\n}'\n</code></pre>\n<h4>Response</h4>\n<pre><code>{&quot;trimName&quot;:&quot;trimName&quot;,&quot;nonTrimName&quot;:&quot;   nonTrimName   &quot;,&quot;longVal&quot;:123}\n</code></pre>\n<p>** HandlerMethodArgumentResolver can do same function but you have to bind client's request into DTO.</p>\n"}],"owner":{"account_id":18170299,"reputation":21,"user_id":13220082,"display_name":"javadeveloper2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1699001069,"creation_date":1698949373,"question_id":77412008,"body_markdown":"Is it possible to create an annotation that will trim whitespace from an incoming JSON request when it&#39;s mapped to a DTO?\r\n\r\nI would like to have it something like this:\r\n\r\n    public class TestDTO {\r\n    @TrimWhitespace\r\n    private String name;\r\n    ...rest of the class\r\n    }\r\n\r\nOr is there another good approach to easily trim whitespace from incoming data?","title":"Annotation to trim whitespaces on a variable in a DTO in Spring","body":"<p>Is it possible to create an annotation that will trim whitespace from an incoming JSON request when it's mapped to a DTO?</p>\n<p>I would like to have it something like this:</p>\n<pre><code>public class TestDTO {\n@TrimWhitespace\nprivate String name;\n...rest of the class\n}\n</code></pre>\n<p>Or is there another good approach to easily trim whitespace from incoming data?</p>\n"},{"tags":["java","spring","spring-boot","flyway"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1698998721,"post_id":77415002,"comment_id":136477971,"body_markdown":"What output does Flyway give when you run it?","body":"What output does Flyway give when you run it?"},{"owner":{"account_id":8582865,"reputation":4145,"user_id":6474292,"accept_rate":56,"display_name":"David"},"score":0,"creation_date":1698999128,"post_id":77415002,"comment_id":136478023,"body_markdown":"@Jorn I am not getting any error.. even when I am trying to keep only `V1__Create_Hello.sql` no error. table is not getting created","body":"@Jorn I am not getting any error.. even when I am trying to keep only <code>V1__Create_Hello.sql</code> no error. table is not getting created"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1698999237,"post_id":77415002,"comment_id":136478038,"body_markdown":"If configured correctly, Flyway will tell you what the current schema version is and that it didn&#39;t need to do anything. If you&#39;re not getting any output at all, that suggests Flyway didn&#39;t run. Check the code that calls it.","body":"If configured correctly, Flyway will tell you what the current schema version is and that it didn&#39;t need to do anything. If you&#39;re not getting any output at all, that suggests Flyway didn&#39;t run. Check the code that calls it."},{"owner":{"account_id":8582865,"reputation":4145,"user_id":6474292,"accept_rate":56,"display_name":"David"},"score":0,"creation_date":1698999387,"post_id":77415002,"comment_id":136478064,"body_markdown":"@Jorn only `flyway_schema_history` table is getting created. which code I need to see. I am just doing configuration in `pom.xml` and `application.yml`. any code need to be done form my side to run flyway ?","body":"@Jorn only <code>flyway_schema_history</code> table is getting created. which code I need to see. I am just doing configuration in <code>pom.xml</code> and <code>application.yml</code>. any code need to be done form my side to run flyway ?"}],"answers":[{"comments":[{"owner":{"account_id":8582865,"reputation":4145,"user_id":6474292,"accept_rate":56,"display_name":"David"},"score":0,"creation_date":1699000911,"post_id":77415188,"comment_id":136478298,"body_markdown":"Awesome. Thanks this is what I was missing. working fine now for me.","body":"Awesome. Thanks this is what I was missing. working fine now for me."}],"tags":[],"owner":{"account_id":22383561,"reputation":411,"user_id":16596710,"display_name":"Seonghun"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1699000977,"creation_date":1699000501,"answer_id":77415188,"question_id":77415002,"body_markdown":"Flyway V1 is meaning init, so V1__Create_Hello.sql is create as init. so it shows as baseline. Change file name to V2 or others.\r\n\r\nAnd it should be noted that 3.2 of 3.10 or 3.2 runs first because the version is recognized as an integer.\r\n\r\nhttps://documentation.red-gate.com/fd/quickstart-how-flyway-works-184127223.html\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/iXPKR.png","title":"Flyway is not creating the table but inserting the data","body":"<p>Flyway V1 is meaning init, so V1__Create_Hello.sql is create as init. so it shows as baseline. Change file name to V2 or others.</p>\n<p>And it should be noted that 3.2 of 3.10 or 3.2 runs first because the version is recognized as an integer.</p>\n<p><a href=\"https://documentation.red-gate.com/fd/quickstart-how-flyway-works-184127223.html\" rel=\"nofollow noreferrer\">https://documentation.red-gate.com/fd/quickstart-how-flyway-works-184127223.html</a></p>\n<p><a href=\"https://i.stack.imgur.com/iXPKR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iXPKR.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":8582865,"reputation":4145,"user_id":6474292,"accept_rate":56,"display_name":"David"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77415188,"answer_count":1,"score":0,"last_activity_date":1699000977,"creation_date":1698998427,"question_id":77415002,"body_markdown":"\r\n\r\nFlyway is not creating the table but inserting the data. \r\n\r\nI am trying to create a table and insert data through flyway in spring boot application.\r\n\r\nThese are in my resource/db/migration folder. \r\n\r\n\r\nV1__Create_Hello.sql \r\n\r\n    CREATE TABLE hello (\r\n            id INT AUTO_INCREMENT PRIMARY KEY,\r\n            app VARCHAR(255) NOT NULL,\r\n            key VARCHAR(255) NOT NULL,\r\n            value TEXT,\r\n            UNIQUE KEY unique_property (app, key)\r\n    );\r\n\r\nI have another table called property where data insertion is happening perfectly. This table I have created manually \r\n\r\nV2_Insert_properties.sql\r\n\r\n`INSERT INTO property (app,key, value) VALUES (&#39;app&#39;, ‘key1’, ‘va’l1);`\r\n\r\nthis is my `flyway_schema_history`\r\n\r\n[![enter image description here][1]][1]\r\n\r\nWhat can be the issue ? \r\n\r\nHere is my application yml. \r\n\r\n    spring:\r\n      application:\r\n        name: config-server\r\n      profiles:\r\n        active: jdbc\r\n      datasource:\r\n        driverClassName: com.mysql.cj.jdbc.Driver\r\n        url: &quot;${MYSQL_URL:jdbc:mysql://localhost:3306/myDB}”\r\n        username: &quot;${MYSQL_USERNAME:root}&quot;\r\n        password: &quot;${MYSQL_PASSWORD:root}&quot;\r\n      flyway:\r\n          enabled: true\r\n          baseline-on-migrate: true\r\n          locations: &quot;classpath:db/migration&quot;\r\n      cloud:\r\n        config:\r\n          server:\r\n            jdbc:\r\n              sql: SELECT property_key, property_value FROM property WHERE application = ? and profile = ? and label = ?\r\n              order : 1\r\n            encrypt:\r\n              enabled: true\r\n      jpa:\r\n        show-sql: true\r\n    server:\r\n      port: 8088\r\n    \r\n    management:\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: &quot;*&quot;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LsOM5.png","title":"Flyway is not creating the table but inserting the data","body":"<p>Flyway is not creating the table but inserting the data.</p>\n<p>I am trying to create a table and insert data through flyway in spring boot application.</p>\n<p>These are in my resource/db/migration folder.</p>\n<p>V1__Create_Hello.sql</p>\n<pre><code>CREATE TABLE hello (\n        id INT AUTO_INCREMENT PRIMARY KEY,\n        app VARCHAR(255) NOT NULL,\n        key VARCHAR(255) NOT NULL,\n        value TEXT,\n        UNIQUE KEY unique_property (app, key)\n);\n</code></pre>\n<p>I have another table called property where data insertion is happening perfectly. This table I have created manually</p>\n<p>V2_Insert_properties.sql</p>\n<p><code>INSERT INTO property (app,key, value) VALUES ('app', ‘key1’, ‘va’l1);</code></p>\n<p>this is my <code>flyway_schema_history</code></p>\n<p><a href=\"https://i.stack.imgur.com/LsOM5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LsOM5.png\" alt=\"enter image description here\" /></a></p>\n<p>What can be the issue ?</p>\n<p>Here is my application yml.</p>\n<pre><code>spring:\n  application:\n    name: config-server\n  profiles:\n    active: jdbc\n  datasource:\n    driverClassName: com.mysql.cj.jdbc.Driver\n    url: &quot;${MYSQL_URL:jdbc:mysql://localhost:3306/myDB}”\n    username: &quot;${MYSQL_USERNAME:root}&quot;\n    password: &quot;${MYSQL_PASSWORD:root}&quot;\n  flyway:\n      enabled: true\n      baseline-on-migrate: true\n      locations: &quot;classpath:db/migration&quot;\n  cloud:\n    config:\n      server:\n        jdbc:\n          sql: SELECT property_key, property_value FROM property WHERE application = ? and profile = ? and label = ?\n          order : 1\n        encrypt:\n          enabled: true\n  jpa:\n    show-sql: true\nserver:\n  port: 8088\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: &quot;*&quot;\n</code></pre>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":11410767,"reputation":502,"user_id":10875738,"display_name":"Torge Rosendahl"},"score":0,"creation_date":1699096932,"post_id":77415161,"comment_id":136490130,"body_markdown":"For compatibility and readability, please put the actual question in the question body. For the title, just use a short summary.","body":"For compatibility and readability, please put the actual question in the question body. For the title, just use a short summary."}],"owner":{"account_id":29816561,"reputation":1,"user_id":22850722,"display_name":"mobile-team-i"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1699000343,"creation_date":1699000150,"question_id":77415161,"body_markdown":"I have successfully placed a 3D model, and it&#39;s working fine. However, I am facing issues when trying to add a 2D model using the front-facing camera [Facing Issue](https://i.stack.imgur.com/wahme.jpg)\r\n\r\nI have added iOS image below for the reference. [Expected Output](https://i.stack.imgur.com/HgyWV.png)","title":"How can I effectively place and anchor a 2D image in an augmented reality(AR)environment using the front-facing camera with ARCore for native Android?","body":"<p>I have successfully placed a 3D model, and it's working fine. However, I am facing issues when trying to add a 2D model using the front-facing camera <a href=\"https://i.stack.imgur.com/wahme.jpg\" rel=\"nofollow noreferrer\">Facing Issue</a></p>\n<p>I have added iOS image below for the reference. <a href=\"https://i.stack.imgur.com/HgyWV.png\" rel=\"nofollow noreferrer\">Expected Output</a></p>\n"},{"tags":["java","sockets","socket.io","aop","netty-socketio"],"owner":{"account_id":29809336,"reputation":1,"user_id":22845152,"display_name":"Chau Du"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1699009138,"answer_count":0,"score":0,"last_activity_date":1698999952,"creation_date":1698999952,"question_id":77415147,"body_markdown":"`I use AOP for API controllers, services, or any classes, and it works for all of them. However, with socket.io, it doesn&#39;t work\r\n\r\n```\r\n@Aspect\r\n@Component\r\n@Slf4j\r\npublic class ExecutionTimeLoggerAspect {\r\n    @Around(&quot;execution(* com.socket.handler.*.*(..))&quot;)\r\n    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {\r\n        long startTime = System.currentTimeMillis();\r\n        Object result = joinPoint.proceed();\r\n        long endTime = System.currentTimeMillis();\r\n        long executionTime = endTime - startTime;\r\n        log.info(&quot;Method &quot; + joinPoint.getSignature() + &quot; executed in &quot; + executionTime + &quot; ms&quot;);\r\n        return result;\r\n    }\r\n}\r\n```\r\n```\r\n\r\npackage com.socket.handler; \r\n...\r\n @OnEvent(SocketEventEnums.TypeActionEvent.TURN_ON_PRESENTATION)\r\n    public void turnOnPresentation(SocketIOClient client, BoothDto data) throws Exception {\r\n        log.info(&quot;Client[{} - {}] - Listen event {} - Data: {}&quot;, client.getSessionId(), client.get(&quot;userId&quot;),\r\n                SocketEventEnums.TypeActionEvent.TURN_ON_PRESENTATION, data);\r\n        boothService.onBoothEvent(client, data, SocketEventEnums.TypeMessageSend.PRESENTATION_ON);\r\n    }\r\n```\r\nExplain or provide a solution for me, please.`","title":"AOP Socket.io Java","body":"<p>`I use AOP for API controllers, services, or any classes, and it works for all of them. However, with socket.io, it doesn't work</p>\n<pre><code>@Aspect\n@Component\n@Slf4j\npublic class ExecutionTimeLoggerAspect {\n    @Around(&quot;execution(* com.socket.handler.*.*(..))&quot;)\n    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {\n        long startTime = System.currentTimeMillis();\n        Object result = joinPoint.proceed();\n        long endTime = System.currentTimeMillis();\n        long executionTime = endTime - startTime;\n        log.info(&quot;Method &quot; + joinPoint.getSignature() + &quot; executed in &quot; + executionTime + &quot; ms&quot;);\n        return result;\n    }\n}\n</code></pre>\n<pre><code>\npackage com.socket.handler; \n...\n @OnEvent(SocketEventEnums.TypeActionEvent.TURN_ON_PRESENTATION)\n    public void turnOnPresentation(SocketIOClient client, BoothDto data) throws Exception {\n        log.info(&quot;Client[{} - {}] - Listen event {} - Data: {}&quot;, client.getSessionId(), client.get(&quot;userId&quot;),\n                SocketEventEnums.TypeActionEvent.TURN_ON_PRESENTATION, data);\n        boothService.onBoothEvent(client, data, SocketEventEnums.TypeMessageSend.PRESENTATION_ON);\n    }\n</code></pre>\n<p>Explain or provide a solution for me, please.`</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9832,"page":85,"page_size":100}
