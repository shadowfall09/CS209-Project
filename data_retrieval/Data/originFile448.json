{"items":[{"tags":["java","spring-boot","junit","spring-test","spring-retry"],"answers":[{"comments":[{"owner":{"account_id":22908132,"reputation":31,"user_id":17045864,"display_name":"Adarsh Gupta"},"score":0,"creation_date":1683869016,"post_id":76210809,"comment_id":134435376,"body_markdown":"Hi Gary,\nThank you for your answer. though what you are saying is correct, but this was not the real issue. I have used @Retryable in my code without any additional Retry config / Retry template ,retry policy. and hence while testing thouse configuration are not getting picked up.","body":"Hi Gary, Thank you for your answer. though what you are saying is correct, but this was not the real issue. I have used @Retryable in my code without any additional Retry config / Retry template ,retry policy. and hence while testing thouse configuration are not getting picked up."},{"owner":{"account_id":22908132,"reputation":31,"user_id":17045864,"display_name":"Adarsh Gupta"},"score":0,"creation_date":1683869140,"post_id":76210809,"comment_id":134435391,"body_markdown":"Just for the sake of testing retry functionality, we can use a retyr template and execute our tests with it . It will work fine. But the ideal solution is to properly define Retry Template and policy in our project.","body":"Just for the sake of testing retry functionality, we can use a retyr template and execute our tests with it . It will work fine. But the ideal solution is to properly define Retry Template and policy in our project."},{"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1683900378,"post_id":76210809,"comment_id":134441888,"body_markdown":"It **is** the real issue. The service **must** be a Spring bean. The framework creates the template and adds it to an AOP interceptor when it detects the annotation.","body":"It <b>is</b> the real issue. The service <b>must</b> be a Spring bean. The framework creates the template and adds it to an AOP interceptor when it detects the annotation."}],"tags":[],"owner":{"account_id":1288095,"reputation":169336,"user_id":1240763,"display_name":"Gary Russell"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683644938,"creation_date":1683644938,"answer_id":76210809,"question_id":76210385,"body_markdown":"&gt;`this.authenticationService = new SomeService(...`\r\n\r\nYou are creating the service in the test; for retry to work, the service must be created and managed by Spring.\r\n\r\nSpring wraps the service in a proxy and adds an interceptor.\r\n","title":"JUnit testing for Spring @Retryable maxAttempts not working","body":"<blockquote>\n<p><code>this.authenticationService = new SomeService(...</code></p>\n</blockquote>\n<p>You are creating the service in the test; for retry to work, the service must be created and managed by Spring.</p>\n<p>Spring wraps the service in a proxy and adds an interceptor.</p>\n"}],"owner":{"account_id":22908132,"reputation":31,"user_id":17045864,"display_name":"Adarsh Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":408,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683644938,"creation_date":1683642246,"question_id":76210385,"body_markdown":"I have used Spring&#39;s retry in my project to achieve retry functionality for specific exceptions.\r\n\r\nSomeService.java \r\n\r\n```\r\n@Service\r\n@Slf4j\r\npublic class SomeService implements AuthenticationService {\r\n    private static final String LOGIN_END_POINT = &quot;/api/auth/v1/login&quot;;\r\n    private static final String VALIDATE_TOKEN_END_POINT = &quot;/api/auth/v1/validate&quot;;\r\n\r\n    private RestTemplate restTemplate;\r\n    private CdsConfig cdsConfig;\r\n\r\n    @Autowired\r\n    public SomeService(CdsConfig cdsConfig, RestTemplate restTemplate) {\r\n        this.cdsConfig = cdsConfig;\r\n        this.restTemplate = restTemplate;\r\n    }\r\n\r\n    @Retryable(\r\n            value = {IOException.class, ResourceAccessException.class},\r\n            maxAttemptsExpression = &quot;${cds.retryMaxAttempts}&quot;,\r\n            backoff = @Backoff(delayExpression = &quot;${cds.retryMaxDelay}&quot;))\r\n    public boolean isValidToken(String jwtToken) {\r\n        log.info(&quot;TRYING.......isValidToken&quot;);\r\n        HttpHeaders httpHeaders = new HttpHeaders();\r\n        httpHeaders.setBearerAuth(jwtToken);\r\n        HttpEntity&lt;Void&gt; httpEntity = new HttpEntity&lt;&gt;(httpHeaders);\r\n        ResponseEntity&lt;Void&gt; responseEntity =\r\n                this.restTemplate.exchange(\r\n                        cdsConfig.getHostUrl() + VALIDATE_TOKEN_END_POINT,\r\n                        HttpMethod.GET,\r\n                        httpEntity,\r\n                        Void.class);\r\n        return responseEntity.getStatusCode().equals(HttpStatus.OK);\r\n    }\r\n```\r\nThis code is working fine ie when another service is down then it is retrying for 3 times as expected.\r\nBut while testing this method for retry counts, it is getting invoked only for 1 time.(expecting it to be 3 times.)\r\n\r\n\r\nI wrote Junit for above method as following.\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\n@SpringBootTest\r\n@EnableRetry\r\nclass AuthenticationServiceTest {\r\n\r\n    AuthenticationService authenticationService;\r\n\r\n    @Mock\r\n    RestTemplateConfig restTemplateConfig;\r\n    @Mock\r\n    RestTemplateBuilder restTemplateBuilder;\r\n    @Value(&quot;${cds.retryMaxAttempts}&quot;)\r\n    int retryCount;\r\n    ////////////////////////// various mocks for application context///////\r\n\r\n    @Mock \r\n    private RestTemplate restTemplate;\r\n    @Mock\r\n    private CdsConfig cdsConfig;\r\n\r\n    @BeforeEach\r\n    void setUp() {\r\n        this.authenticationService = new SomeService(cdsConfig, restTemplate, callerService);\r\n        when(this.cdsConfig.getHostUrl()).thenReturn(URI.create(&quot;https://someUrl.com&quot;));\r\n        System.out.println(&quot;Retry count=&quot; + retryCount);\r\n    }\r\n    @Test\r\n    void test_isValidToken_whenAuthServiceDown_thenRetry() {\r\n        HttpHeaders httpHeaders = new HttpHeaders();\r\n        httpHeaders.setBearerAuth(&quot;ValidJwtToken&quot;);\r\n        HttpEntity&lt;Void&gt; httpEntity = new HttpEntity&lt;&gt;(httpHeaders);\r\n\r\n        when(this.restTemplate.exchange(\r\n                &quot;--CorrectUrl--/api/auth/v1/validate&quot;,\r\n                HttpMethod.GET,\r\n                httpEntity,\r\n                Void.class\r\n        )).thenThrow(new ResourceAccessException(&quot;authentication service is down&quot;));\r\n\r\n        assertThrows(ResourceAccessException.class, () -&gt; this.authenticationService.isValidToken(&quot;ValidJwtToken&quot;));\r\n        //verify(authenticationService, times(3)).isValidToken(anyString());\r\n        verify(this.restTemplate, times(3))\r\n                .exchange(&quot;https://dev.csm.osttra.com/api/auth/v1/validate&quot;, HttpMethod.GET, httpEntity, Void.class);\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis test is failing with below error.\r\n\r\nRetry count=3\r\n2023-05-09 19:30:38.968  INFO [abc-svc,,] 22624 --- [           main] c.o.cds.client.impl.PlatformAuthService  : TRYING.......isValidToken\r\n\r\norg.mockito.exceptions.verification.TooFewActualInvocations: \r\nrestTemplate.exchange(\r\n    &quot;--correctBaseUrl--/api/auth/v1/validate&quot;,\r\n    GET,\r\n    &lt;[Authorization:&quot;Bearer ValidJwtToken&quot;]&gt;,\r\n    class java.lang.Void\r\n);\r\n**Wanted 3 times:**\r\n-&gt; at com.osttra.cds.client.AuthenticationServiceTest.test_isValidToken_whenAuthServiceDown_thenRetry(AuthenticationServiceTest.java:213)\r\nBut was 1 time:\r\n-&gt; at com.osttra.cds.client.impl.SomeService.isValidToken(SomeService.java:74)\r\n","title":"JUnit testing for Spring @Retryable maxAttempts not working","body":"<p>I have used Spring's retry in my project to achieve retry functionality for specific exceptions.</p>\n<p>SomeService.java</p>\n<pre><code>@Service\n@Slf4j\npublic class SomeService implements AuthenticationService {\n    private static final String LOGIN_END_POINT = &quot;/api/auth/v1/login&quot;;\n    private static final String VALIDATE_TOKEN_END_POINT = &quot;/api/auth/v1/validate&quot;;\n\n    private RestTemplate restTemplate;\n    private CdsConfig cdsConfig;\n\n    @Autowired\n    public SomeService(CdsConfig cdsConfig, RestTemplate restTemplate) {\n        this.cdsConfig = cdsConfig;\n        this.restTemplate = restTemplate;\n    }\n\n    @Retryable(\n            value = {IOException.class, ResourceAccessException.class},\n            maxAttemptsExpression = &quot;${cds.retryMaxAttempts}&quot;,\n            backoff = @Backoff(delayExpression = &quot;${cds.retryMaxDelay}&quot;))\n    public boolean isValidToken(String jwtToken) {\n        log.info(&quot;TRYING.......isValidToken&quot;);\n        HttpHeaders httpHeaders = new HttpHeaders();\n        httpHeaders.setBearerAuth(jwtToken);\n        HttpEntity&lt;Void&gt; httpEntity = new HttpEntity&lt;&gt;(httpHeaders);\n        ResponseEntity&lt;Void&gt; responseEntity =\n                this.restTemplate.exchange(\n                        cdsConfig.getHostUrl() + VALIDATE_TOKEN_END_POINT,\n                        HttpMethod.GET,\n                        httpEntity,\n                        Void.class);\n        return responseEntity.getStatusCode().equals(HttpStatus.OK);\n    }\n</code></pre>\n<p>This code is working fine ie when another service is down then it is retrying for 3 times as expected.\nBut while testing this method for retry counts, it is getting invoked only for 1 time.(expecting it to be 3 times.)</p>\n<p>I wrote Junit for above method as following.</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@SpringBootTest\n@EnableRetry\nclass AuthenticationServiceTest {\n\n    AuthenticationService authenticationService;\n\n    @Mock\n    RestTemplateConfig restTemplateConfig;\n    @Mock\n    RestTemplateBuilder restTemplateBuilder;\n    @Value(&quot;${cds.retryMaxAttempts}&quot;)\n    int retryCount;\n    ////////////////////////// various mocks for application context///////\n\n    @Mock \n    private RestTemplate restTemplate;\n    @Mock\n    private CdsConfig cdsConfig;\n\n    @BeforeEach\n    void setUp() {\n        this.authenticationService = new SomeService(cdsConfig, restTemplate, callerService);\n        when(this.cdsConfig.getHostUrl()).thenReturn(URI.create(&quot;https://someUrl.com&quot;));\n        System.out.println(&quot;Retry count=&quot; + retryCount);\n    }\n    @Test\n    void test_isValidToken_whenAuthServiceDown_thenRetry() {\n        HttpHeaders httpHeaders = new HttpHeaders();\n        httpHeaders.setBearerAuth(&quot;ValidJwtToken&quot;);\n        HttpEntity&lt;Void&gt; httpEntity = new HttpEntity&lt;&gt;(httpHeaders);\n\n        when(this.restTemplate.exchange(\n                &quot;--CorrectUrl--/api/auth/v1/validate&quot;,\n                HttpMethod.GET,\n                httpEntity,\n                Void.class\n        )).thenThrow(new ResourceAccessException(&quot;authentication service is down&quot;));\n\n        assertThrows(ResourceAccessException.class, () -&gt; this.authenticationService.isValidToken(&quot;ValidJwtToken&quot;));\n        //verify(authenticationService, times(3)).isValidToken(anyString());\n        verify(this.restTemplate, times(3))\n                .exchange(&quot;https://dev.csm.osttra.com/api/auth/v1/validate&quot;, HttpMethod.GET, httpEntity, Void.class);\n\n    }\n}\n\n</code></pre>\n<p>This test is failing with below error.</p>\n<p>Retry count=3\n2023-05-09 19:30:38.968  INFO [abc-svc,,] 22624 --- [           main] c.o.cds.client.impl.PlatformAuthService  : TRYING.......isValidToken</p>\n<p>org.mockito.exceptions.verification.TooFewActualInvocations:\nrestTemplate.exchange(\n&quot;--correctBaseUrl--/api/auth/v1/validate&quot;,\nGET,\n&lt;[Authorization:&quot;Bearer ValidJwtToken&quot;]&gt;,\nclass java.lang.Void\n);\n<strong>Wanted 3 times:</strong>\n-&gt; at com.osttra.cds.client.AuthenticationServiceTest.test_isValidToken_whenAuthServiceDown_thenRetry(AuthenticationServiceTest.java:213)\nBut was 1 time:\n-&gt; at com.osttra.cds.client.impl.SomeService.isValidToken(SomeService.java:74)</p>\n"},{"tags":["java","digital-persona-sdk"],"comments":[{"owner":{"account_id":15906777,"reputation":107,"user_id":11477760,"display_name":"Justin"},"score":1,"creation_date":1664123274,"post_id":67905341,"comment_id":130394359,"body_markdown":"Hey @Budelon. Can you tell me how/where you obtained the U are U Java SDK?","body":"Hey @Budelon. Can you tell me how/where you obtained the U are U Java SDK?"}],"answers":[{"comments":[{"owner":{"account_id":2710872,"reputation":171,"user_id":2339358,"display_name":"Rendy Saputra"},"score":0,"creation_date":1670257376,"post_id":70896511,"comment_id":131829016,"body_markdown":"Thank you I will try it, and let you know once it succeed","body":"Thank you I will try it, and let you know once it succeed"}],"tags":[],"owner":{"account_id":4225222,"reputation":1,"user_id":3458895,"display_name":"ratnesh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643385261,"creation_date":1643385261,"answer_id":70896511,"question_id":67905341,"body_markdown":"I have just added solution in below question, \r\n\r\nhttps://stackoverflow.com/questions/67808136/call-to-reader-capture-in-digitalpersona-u-are-u-sdk-does-not-return/70896458#70896458\r\n\r\nCopying same answer here, \r\n\r\nI faced the similar issue and it can be fixed by opening a reader in exclusive mode as below,\r\n\r\n    m_reader.Open(Reader.Priority.EXCLUSIVE);\r\nRefer to below lines from documents,\r\n\r\npublic static final Reader.Priority COOPERATIVE\r\n\r\nClient uses this priority to open reader in cooperative mode. Multiple clients with this priority are allowed. Client receives captured images if it has window with focus.\r\n\r\npublic static final Reader.Priority EXCLUSIVE\r\n\r\nClient uses this priority to open reader exclusively. Only one client with this priority is allowed.","title":"DigitalPersona U.are.U java SDK doesnt answer without GUI","body":"<p>I have just added solution in below question,</p>\n<p><a href=\"https://stackoverflow.com/questions/67808136/call-to-reader-capture-in-digitalpersona-u-are-u-sdk-does-not-return/70896458#70896458\">Call to Reader.Capture() in DigitalPersona U.are.U SDK does not return</a></p>\n<p>Copying same answer here,</p>\n<p>I faced the similar issue and it can be fixed by opening a reader in exclusive mode as below,</p>\n<pre><code>m_reader.Open(Reader.Priority.EXCLUSIVE);\n</code></pre>\n<p>Refer to below lines from documents,</p>\n<p>public static final Reader.Priority COOPERATIVE</p>\n<p>Client uses this priority to open reader in cooperative mode. Multiple clients with this priority are allowed. Client receives captured images if it has window with focus.</p>\n<p>public static final Reader.Priority EXCLUSIVE</p>\n<p>Client uses this priority to open reader exclusively. Only one client with this priority is allowed.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1683476442,"post_id":76192257,"comment_id":134369333,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76192257/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27197905,"reputation":3,"user_id":20730531,"display_name":"Adal Ponal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683644882,"creation_date":1683435515,"answer_id":76192257,"question_id":67905341,"body_markdown":"You can try this one.\r\nSDK for digital persona finger print scanner for java (Android).\r\nIts provide you bitmap. you can implement as a your requirment.\r\nCheck this android app download it, available on google  play store.\r\nApp Link: https://play.google.com/store/apps/details?id=com.digitalpersona.digitalpersona\r\n\r\nFor More Infomation Visite Offical Website of (Brain Wave App Studio)\r\nhttp://digital.persona.sdk.android.brainwaveappstudio.com","title":"DigitalPersona U.are.U java SDK doesnt answer without GUI","body":"<p>You can try this one.\nSDK for digital persona finger print scanner for java (Android).\nIts provide you bitmap. you can implement as a your requirment.\nCheck this android app download it, available on google  play store.\nApp Link: <a href=\"https://play.google.com/store/apps/details?id=com.digitalpersona.digitalpersona\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=com.digitalpersona.digitalpersona</a></p>\n<p>For More Infomation Visite Offical Website of (Brain Wave App Studio)\n<a href=\"http://digital.persona.sdk.android.brainwaveappstudio.com\" rel=\"nofollow noreferrer\">http://digital.persona.sdk.android.brainwaveappstudio.com</a></p>\n"}],"owner":{"account_id":17213815,"reputation":53,"user_id":12462405,"display_name":"Budelon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683644882,"creation_date":1623246059,"question_id":67905341,"body_markdown":"I&#39;m currently developping a JAVA program which uses Digital Persona 4500.[DigitalPersonaBiometricSDKforWindows_3.4.0]\r\n\r\nWe&#39;re facing problems with it, the sample code uses a GUI that you can sample digital, it works fine with the GUI. \r\n\r\nBut if we dont use the GUI, the code stops on `Reader.Capture()`... I&#39;ve tried many things like another Thread only for sampling and etc. \r\n```\r\nReaderCollection m_coll = UareUGlobal.GetReaderCollection();\r\nm_coll.GetReaders();\r\nReader m_reader = m_coll.get(0);\r\nm_reader.Open(Reader.Priority.COOPERATIVE);\r\nReader.CaptureResult cr = m_reader.Capture(Fid.Format.ANSI_381_2004, Reader.ImageProcessing.IMG_PROC_DEFAULT, m_reader.GetCapabilities().resolutions[0], -1);\r\nSystem.out.println(cr.quality);\r\n```\r\n\r\nSimilar Question: https://stackoverflow.com/questions/67808136/call-to-reader-capture-in-digitalpersona-u-are-u-sdk-does-not-return\r\n","title":"DigitalPersona U.are.U java SDK doesnt answer without GUI","body":"<p>I'm currently developping a JAVA program which uses Digital Persona 4500.[DigitalPersonaBiometricSDKforWindows_3.4.0]</p>\n<p>We're facing problems with it, the sample code uses a GUI that you can sample digital, it works fine with the GUI.</p>\n<p>But if we dont use the GUI, the code stops on <code>Reader.Capture()</code>... I've tried many things like another Thread only for sampling and etc.</p>\n<pre><code>ReaderCollection m_coll = UareUGlobal.GetReaderCollection();\nm_coll.GetReaders();\nReader m_reader = m_coll.get(0);\nm_reader.Open(Reader.Priority.COOPERATIVE);\nReader.CaptureResult cr = m_reader.Capture(Fid.Format.ANSI_381_2004, Reader.ImageProcessing.IMG_PROC_DEFAULT, m_reader.GetCapabilities().resolutions[0], -1);\nSystem.out.println(cr.quality);\n</code></pre>\n<p>Similar Question: <a href=\"https://stackoverflow.com/questions/67808136/call-to-reader-capture-in-digitalpersona-u-are-u-sdk-does-not-return\">Call to Reader.Capture() in DigitalPersona U.are.U SDK does not return</a></p>\n"},{"tags":["java","spring-boot","kotlin","jpa","enums"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1683644439,"post_id":76210395,"comment_id":134396400,"body_markdown":"You have &#39;the&#39; approach but are choosing not to use it. Enums are not safe for changes, as changing the order is just as much a risk as someone coming in and putting Blue right after Red and Making Green a 2. Only you can protect your app from such mistakes - generally with unit tests that ensure values of 0,1 etc map to the proper/expected Enum type when read back. As for generic solutions - make all your Enums extend some enum superclass or interface a generic converter can use to get your alternate ordinal value from.","body":"You have &#39;the&#39; approach but are choosing not to use it. Enums are not safe for changes, as changing the order is just as much a risk as someone coming in and putting Blue right after Red and Making Green a 2. Only you can protect your app from such mistakes - generally with unit tests that ensure values of 0,1 etc map to the proper/expected Enum type when read back. As for generic solutions - make all your Enums extend some enum superclass or interface a generic converter can use to get your alternate ordinal value from."}],"answers":[{"comments":[{"owner":{"account_id":19435785,"reputation":29,"user_id":14215272,"display_name":"KotlinOverflow"},"score":0,"creation_date":1683654517,"post_id":76210787,"comment_id":134398887,"body_markdown":"thanks for the solution. Can you please provide a sample snippet for the 3rd point you mentioned?","body":"thanks for the solution. Can you please provide a sample snippet for the 3rd point you mentioned?"},{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":0,"creation_date":1683719364,"post_id":76210787,"comment_id":134409034,"body_markdown":"Someone has closed this Question as a Duplicate giving a link to a very similar question.  Can you see if this is enough to get you going?","body":"Someone has closed this Question as a Duplicate giving a link to a very similar question.  Can you see if this is enough to get you going?"}],"tags":[],"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683644819,"creation_date":1683644819,"answer_id":76210787,"question_id":76210395,"body_markdown":"I think you should be able to do this broadly in the following way:\r\n\r\n1. Define an interface something like this: `interface WithValue { val value: Short }`\r\n2. Require each of `value` enums to implement this interface\r\n3. Create a convertor that consumes `Enum` \r\n    - during the serialization look to see if the Enum implements `WithValue` and it if does do your special serialization, otherwise invoke the standard processing of Enums\r\n    - during deserialization look to see if the incoming node has a value which is `Short` compliant (probably `Number`) and if it is do you special version, otherwise call the standard processing of Enums\r\n4. Register the convertor in a **Module** once and declare your ObjectMapper as a Spring bean so Spring uses it everywhere:\r\n\r\n```\r\n    @Bean\r\n    fun makeObjectMapper(): ObjectMapper {\r\n        return JsonMapper.builder()\r\n            .addModule(KotlinModule.Builder().configure(KotlinFeature.StrictNullChecks, true).build())\r\n            .addModule(MySpecialValueBasedEnumModule())\r\n            .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)\r\n            .build()\r\n    }\r\n```\r\n\r\n(I have to ask why bother? isn&#39;t the enum name good enough - clear for humans and efficient enough for machines to index?) ","title":"How to avoid AttributeConvertor for converting Enums to short/Int?","body":"<p>I think you should be able to do this broadly in the following way:</p>\n<ol>\n<li>Define an interface something like this: <code>interface WithValue { val value: Short }</code></li>\n<li>Require each of <code>value</code> enums to implement this interface</li>\n<li>Create a convertor that consumes <code>Enum</code>\n<ul>\n<li>during the serialization look to see if the Enum implements <code>WithValue</code> and it if does do your special serialization, otherwise invoke the standard processing of Enums</li>\n<li>during deserialization look to see if the incoming node has a value which is <code>Short</code> compliant (probably <code>Number</code>) and if it is do you special version, otherwise call the standard processing of Enums</li>\n</ul>\n</li>\n<li>Register the convertor in a <strong>Module</strong> once and declare your ObjectMapper as a Spring bean so Spring uses it everywhere:</li>\n</ol>\n<pre><code>    @Bean\n    fun makeObjectMapper(): ObjectMapper {\n        return JsonMapper.builder()\n            .addModule(KotlinModule.Builder().configure(KotlinFeature.StrictNullChecks, true).build())\n            .addModule(MySpecialValueBasedEnumModule())\n            .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)\n            .build()\n    }\n</code></pre>\n<p>(I have to ask why bother? isn't the enum name good enough - clear for humans and efficient enough for machines to index?)</p>\n"}],"owner":{"account_id":19435785,"reputation":29,"user_id":14215272,"display_name":"KotlinOverflow"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1683656274,"answer_count":1,"score":1,"last_activity_date":1683644819,"creation_date":1683642346,"question_id":76210395,"body_markdown":"I am using AttributeConvertor to convert an Enum to Short while persisting the value in database and vice-versa while reading the value from database as follows:\r\n\r\n```\r\n@Converter\r\nclass MyEnumConvertor : AttributeConverter&lt;MyEnum, Short&gt; {\r\n\r\n    override fun convertToDatabaseColumn(attribute: MyEnum): Short = MyEnum.toValue(attribute)\r\n\r\n    override fun convertToEntityAttribute(dbData: Short): MyEnum = MyEnum.fromValue(dbData)\r\n}\r\n\r\nenum class MyEnum(val value: Short) {\r\n    RED(0),\r\n    GREEN(1);\r\n\r\n    companion object {\r\n        private val valueToEnumMap = MyEnum.values().associateBy(MyEnum::value)\r\n        fun fromValue(value: Short): MyEnum = valueToEnumMap[value]\r\n            ?: throw Exception(&quot;Invalid value: $value&quot;)\r\n\r\n        fun toValue(status: MyEnum): Short = status.value\r\n    }\r\n}\r\n```\r\n\r\nUsage:\r\n```\r\n@Entity\r\n@Table(name = &quot;my_table&quot;)\r\nclass MyEntity(\r\n\r\n    @Id\r\n    val id: Long,\r\n\r\n    @Convert(converter = MyEnum::class)\r\n    @Column(name = &quot;status&quot;, nullable = false)\r\n    val color: MyEnum\r\n```\r\n\r\n**Now in other tables too I have many conversions like this, and it&#39;s around 10 convertors written now. I think it&#39;s not a good practice of having these many Convertors.** \r\n\r\n**Any Solution on how to avoid these? Or, any genric solution where I can create only one convertor and reuse them?**\r\n\r\nPS: I know @Enumerated(Enumtype.ORDINAL) works, but if the order of enums is changed (say, RED and GREEN order) then it will break the code. So, not using this approach.\r\n","title":"How to avoid AttributeConvertor for converting Enums to short/Int?","body":"<p>I am using AttributeConvertor to convert an Enum to Short while persisting the value in database and vice-versa while reading the value from database as follows:</p>\n<pre><code>@Converter\nclass MyEnumConvertor : AttributeConverter&lt;MyEnum, Short&gt; {\n\n    override fun convertToDatabaseColumn(attribute: MyEnum): Short = MyEnum.toValue(attribute)\n\n    override fun convertToEntityAttribute(dbData: Short): MyEnum = MyEnum.fromValue(dbData)\n}\n\nenum class MyEnum(val value: Short) {\n    RED(0),\n    GREEN(1);\n\n    companion object {\n        private val valueToEnumMap = MyEnum.values().associateBy(MyEnum::value)\n        fun fromValue(value: Short): MyEnum = valueToEnumMap[value]\n            ?: throw Exception(&quot;Invalid value: $value&quot;)\n\n        fun toValue(status: MyEnum): Short = status.value\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>@Entity\n@Table(name = &quot;my_table&quot;)\nclass MyEntity(\n\n    @Id\n    val id: Long,\n\n    @Convert(converter = MyEnum::class)\n    @Column(name = &quot;status&quot;, nullable = false)\n    val color: MyEnum\n</code></pre>\n<p><strong>Now in other tables too I have many conversions like this, and it's around 10 convertors written now. I think it's not a good practice of having these many Convertors.</strong></p>\n<p><strong>Any Solution on how to avoid these? Or, any genric solution where I can create only one convertor and reuse them?</strong></p>\n<p>PS: I know @Enumerated(Enumtype.ORDINAL) works, but if the order of enums is changed (say, RED and GREEN order) then it will break the code. So, not using this approach.</p>\n"},{"tags":["java","android","webview","camera"],"comments":[{"owner":{"account_id":6696437,"reputation":2557,"user_id":5164318,"display_name":"emandt"},"score":0,"creation_date":1683553476,"post_id":76192181,"comment_id":134380035,"body_markdown":"There isn&#39;t any piece of code where you create/init/start the Camera....so how can we help you? As you start it, you need to clear/free it. If it is opened in Javascript from your Webview, you need to intercept &quot;page leave&quot; event and destroy it from javascript. If it is intercepted by Java, you need to do it by detecting VebView change page.","body":"There isn&#39;t any piece of code where you create/init/start the Camera....so how can we help you? As you start it, you need to clear/free it. If it is opened in Javascript from your Webview, you need to intercept &quot;page leave&quot; event and destroy it from javascript. If it is intercepted by Java, you need to do it by detecting VebView change page."},{"owner":{"account_id":28533108,"reputation":21,"user_id":21840168,"display_name":"kenshinn"},"score":0,"creation_date":1683644282,"post_id":76192181,"comment_id":134396356,"body_markdown":"I just test with web ar page, camera is controlled by web page.","body":"I just test with web ar page, camera is controlled by web page."}],"owner":{"account_id":28533108,"reputation":21,"user_id":21840168,"display_name":"kenshinn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683644532,"creation_date":1683433287,"question_id":76192181,"body_markdown":"I use android webview to load a web ar site.\r\nIt will open camera success.\r\nBut when I go to android home, the android privacy indicator still is green, it means background app still use camera.\r\nHow do I release the camera usage when webview app enter background?\r\n\r\nBelow is my code:\r\n```\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    WebView webView = null;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        ActivityCompat.requestPermissions(this, new String[] { Manifest.permission.CAMERA}, 101);\r\n        setContentView(R.layout.activity_main);\r\n        WebView.setWebContentsDebuggingEnabled(true);\r\n        webView = findViewById(R.id.webview);\r\n        WebSettings settings = webView.getSettings();\r\n        settings.setSupportMultipleWindows(true);\r\n        settings.setJavaScriptCanOpenWindowsAutomatically(true);\r\n        settings.setUserAgentString(WebSettings.getDefaultUserAgent(this) + &quot; ViverseApp/1.0 HTCVRSDET&quot;);\r\n        settings.setJavaScriptEnabled(true);\r\n        settings.setAllowContentAccess(true);\r\n        settings.setAllowFileAccess(true);\r\n        settings.setJavaScriptCanOpenWindowsAutomatically(true);\r\n        settings.setAllowFileAccessFromFileURLs(true);\r\n        settings.setAllowUniversalAccessFromFileURLs(true);\r\n        settings.setMediaPlaybackRequiresUserGesture(false);\r\n\r\n\r\n        settings.setMixedContentMode(WebSettings.MIXED_CONTENT_ALWAYS_ALLOW);\r\n\r\n        settings.setDomStorageEnabled(true);\r\n\r\n        webView.setWebViewClient(new WebViewClient() {\r\n            @Override\r\n            public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) {\r\n                return false;\r\n            }\r\n\r\n        });\r\n        webView.setWebChromeClient(new WebChromeClient(){\r\n\r\n            @Override\r\n            public void onPermissionRequest(PermissionRequest request) {\r\n                MainActivity.this.runOnUiThread(new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        request.grant(request.getResources());\r\n                    }\r\n                });\r\n\r\n            }\r\n        });\r\n        CookieManager m = CookieManager.getInstance();\r\n        m.setAcceptCookie(true);\r\n        \r\n        webView.loadUrl(&quot;https://hiukim.github.io/mind-ar-js-doc/face-tracking-samples/minimal.html&quot;);\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        if(webView != null) {\r\n            webView.pauseTimers();\r\n            webView.onPause();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        if(webView != null) {\r\n            webView.resumeTimers();\r\n            webView.onResume();\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\nUpdated: \r\n\r\nWe can try this url in chrome/edge/firefox:\r\nhttps://hiukim.github.io/mind-ar-js-doc/face-tracking-samples/minimal.html\r\n\r\nIn chrome/edge, camera will be release  when back to home. But in firefox, it also has the problem.","title":"android webview camera not released when app in background","body":"<p>I use android webview to load a web ar site.\nIt will open camera success.\nBut when I go to android home, the android privacy indicator still is green, it means background app still use camera.\nHow do I release the camera usage when webview app enter background?</p>\n<p>Below is my code:</p>\n<pre><code>\npublic class MainActivity extends AppCompatActivity {\n\n    WebView webView = null;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        ActivityCompat.requestPermissions(this, new String[] { Manifest.permission.CAMERA}, 101);\n        setContentView(R.layout.activity_main);\n        WebView.setWebContentsDebuggingEnabled(true);\n        webView = findViewById(R.id.webview);\n        WebSettings settings = webView.getSettings();\n        settings.setSupportMultipleWindows(true);\n        settings.setJavaScriptCanOpenWindowsAutomatically(true);\n        settings.setUserAgentString(WebSettings.getDefaultUserAgent(this) + &quot; ViverseApp/1.0 HTCVRSDET&quot;);\n        settings.setJavaScriptEnabled(true);\n        settings.setAllowContentAccess(true);\n        settings.setAllowFileAccess(true);\n        settings.setJavaScriptCanOpenWindowsAutomatically(true);\n        settings.setAllowFileAccessFromFileURLs(true);\n        settings.setAllowUniversalAccessFromFileURLs(true);\n        settings.setMediaPlaybackRequiresUserGesture(false);\n\n\n        settings.setMixedContentMode(WebSettings.MIXED_CONTENT_ALWAYS_ALLOW);\n\n        settings.setDomStorageEnabled(true);\n\n        webView.setWebViewClient(new WebViewClient() {\n            @Override\n            public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) {\n                return false;\n            }\n\n        });\n        webView.setWebChromeClient(new WebChromeClient(){\n\n            @Override\n            public void onPermissionRequest(PermissionRequest request) {\n                MainActivity.this.runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        request.grant(request.getResources());\n                    }\n                });\n\n            }\n        });\n        CookieManager m = CookieManager.getInstance();\n        m.setAcceptCookie(true);\n        \n        webView.loadUrl(&quot;https://hiukim.github.io/mind-ar-js-doc/face-tracking-samples/minimal.html&quot;);\n\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        if(webView != null) {\n            webView.pauseTimers();\n            webView.onPause();\n        }\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        if(webView != null) {\n            webView.resumeTimers();\n            webView.onResume();\n        }\n    }\n}\n\n</code></pre>\n<p>Updated:</p>\n<p>We can try this url in chrome/edge/firefox:\n<a href=\"https://hiukim.github.io/mind-ar-js-doc/face-tracking-samples/minimal.html\" rel=\"nofollow noreferrer\">https://hiukim.github.io/mind-ar-js-doc/face-tracking-samples/minimal.html</a></p>\n<p>In chrome/edge, camera will be release  when back to home. But in firefox, it also has the problem.</p>\n"},{"tags":["java","validation","jwt","access-token","signature"],"answers":[{"tags":[],"owner":{"account_id":468226,"reputation":137,"user_id":874086,"accept_rate":71,"display_name":"Telegard"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683644460,"creation_date":1683644460,"answer_id":76210740,"question_id":74343613,"body_markdown":"Check that your dependency does not have the runtime property\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.11.5&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt; &lt;--- REMOVE THIS\r\n\t\t&lt;/dependency&gt;\r\n","title":"getting error like DefaultJwtSignatureValidator cannot be resolved to a type","body":"<p>Check that your dependency does not have the runtime property</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;\n        &lt;version&gt;0.11.5&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt; &lt;--- REMOVE THIS\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"display_name":"user20438087"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683644460,"creation_date":1667808678,"question_id":74343613,"body_markdown":"While valodating the signature of jwt token Im getting the above error for this line \r\n```\r\nDefaultJwtSignatureValidator validator = new DefaultSignatureValidatore(SignatureAlgorithm.HS256, secretkeyspec)\r\n```\r\nIs `Defaultjwtsignaturevalidator` a java file that we need to create separately or do we need to import the jar?  If we need to write can someone provide the `Defaultjwtsignaturevalidator` Java file\r\n\r\nI need to validate the JWT token which is signed with the HS256 algorithm.","title":"getting error like DefaultJwtSignatureValidator cannot be resolved to a type","body":"<p>While valodating the signature of jwt token Im getting the above error for this line</p>\n<pre><code>DefaultJwtSignatureValidator validator = new DefaultSignatureValidatore(SignatureAlgorithm.HS256, secretkeyspec)\n</code></pre>\n<p>Is <code>Defaultjwtsignaturevalidator</code> a java file that we need to create separately or do we need to import the jar?  If we need to write can someone provide the <code>Defaultjwtsignaturevalidator</code> Java file</p>\n<p>I need to validate the JWT token which is signed with the HS256 algorithm.</p>\n"},{"tags":["java","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"score":0,"creation_date":1683646828,"post_id":76210573,"comment_id":134397028,"body_markdown":"how I can put this code with my code? in the methode \n\nlog.info(&quot;Date : &quot; + LocalDate.now());\n    LocalDate str = LocalDate.of(2020, 8, 15);\n    log.info(&quot;the date is &quot; + str);\n    \n    reservationDto.setDateReservation(str);\n    reservationDto.setDateReservation(LocalDate.of(2020, 8, 15));\n    reservationDto.setDateReservation(LocalDate.now());","body":"how I can put this code with my code? in the methode   log.info(&quot;Date : &quot; + LocalDate.now());     LocalDate str = LocalDate.of(2020, 8, 15);     log.info(&quot;the date is &quot; + str);          reservationDto.setDateReservation(str);     reservationDto.setDateReservation(LocalDate.of(2020, 8, 15));     reservationDto.setDateReservation(LocalDate.now());"},{"owner":{"account_id":10767226,"reputation":1,"user_id":7921789,"display_name":"amr soliman"},"score":0,"creation_date":1683706382,"post_id":76210573,"comment_id":134406038,"body_markdown":"these code lines should run before you use LocalDate class. you can try adding them to the start of your main function","body":"these code lines should run before you use LocalDate class. you can try adding them to the start of your main function"}],"tags":[],"owner":{"account_id":10767226,"reputation":1,"user_id":7921789,"display_name":"amr soliman"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683643478,"creation_date":1683643478,"answer_id":76210573,"question_id":76210459,"body_markdown":"You need to register the time module by adding the following code \r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n    mapper.registerModule(new JavaTimeModule());\r\n\r\n","title":"I can&#39;t put today&#39;s date in a LocalDate variable","body":"<p>You need to register the time module by adding the following code</p>\n<pre><code>    ObjectMapper mapper = new ObjectMapper();\nmapper.registerModule(new JavaTimeModule());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"score":0,"creation_date":1683646769,"post_id":76210590,"comment_id":134397008,"body_markdown":"But i use JDK 11not 8. how I can put this code with my code?","body":"But i use JDK 11not 8. how I can put this code with my code?"},{"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"score":0,"creation_date":1683651671,"post_id":76210590,"comment_id":134398202,"body_markdown":"Should be the same. The date/time classes were first introduced in Java 8.","body":"Should be the same. The date/time classes were first introduced in Java 8."}],"tags":[],"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683643538,"creation_date":1683643538,"answer_id":76210590,"question_id":76210459,"body_markdown":"You need to configure your Jackson ObjectMapper to add support for JDK 8 Date/time classes. The easiest way is like this:\r\n\r\n    ObjectMapper mapper = new ObjectMapper()\r\n            .registerModule(new JavaTimeModule());\r\n\r\nDepending on the version of Jackson you&#39;re using, there are various other ways to do this, more info is on the [Jackson Java 8 modules][1] page.\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-modules-java8/tree/2.16/datetime","title":"I can&#39;t put today&#39;s date in a LocalDate variable","body":"<p>You need to configure your Jackson ObjectMapper to add support for JDK 8 Date/time classes. The easiest way is like this:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper()\n        .registerModule(new JavaTimeModule());\n</code></pre>\n<p>Depending on the version of Jackson you're using, there are various other ways to do this, more info is on the <a href=\"https://github.com/FasterXML/jackson-modules-java8/tree/2.16/datetime\" rel=\"nofollow noreferrer\">Jackson Java 8 modules</a> page.</p>\n"}],"owner":{"account_id":12809345,"reputation":193,"user_id":9268070,"display_name":"BMW83"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1683643785,"answer_count":2,"score":0,"last_activity_date":1683643538,"creation_date":1683642805,"question_id":76210459,"body_markdown":"I try to fill an object with the name Reservation with an attribute of type LocalDate \r\n\r\n    private LocalDate dateReservation;\r\n\r\nAnd I want to fill the Reservation class like this \r\n\r\n    ReservationDto reservationDto = new ReservationDto();\r\n\r\nThe class Reservation and ReservationDto have the same library for LocalDate \r\n\r\n    import java.time.LocalDate;\r\n\r\nTo load the reservation date I tried several ways as follows:\r\n\r\n        log.info(&quot;Date : &quot; + LocalDate.now());\r\n        LocalDate str = LocalDate.of(2020, 8, 15);\r\n        log.info(&quot;the date is &quot; + str);\r\n        \r\n        reservationDto.setDateReservation(str);\r\n        reservationDto.setDateReservation(LocalDate.of(2020, 8, 15));\r\n        reservationDto.setDateReservation(LocalDate.now());\r\n\r\nWith the log the date is displayed but with setReservationDate the following message is displayed:\r\n\r\n    com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.LocalDate` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: fr.gopartner.locationvoiture.dto.ReservationDto[&quot;dateReservation&quot;])\r\n\r\nI use JDK 11. And i tried to add the dependences:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\nI tried to change the dependencies, load the mapper object to serialize/unserialize my ReservationDto object and still shows me the same error above InvalidDefinitionException.\r\nPlease help me I&#39;m stuck\r\n \r\n\r\n","title":"I can&#39;t put today&#39;s date in a LocalDate variable","body":"<p>I try to fill an object with the name Reservation with an attribute of type LocalDate</p>\n<pre><code>private LocalDate dateReservation;\n</code></pre>\n<p>And I want to fill the Reservation class like this</p>\n<pre><code>ReservationDto reservationDto = new ReservationDto();\n</code></pre>\n<p>The class Reservation and ReservationDto have the same library for LocalDate</p>\n<pre><code>import java.time.LocalDate;\n</code></pre>\n<p>To load the reservation date I tried several ways as follows:</p>\n<pre><code>    log.info(&quot;Date : &quot; + LocalDate.now());\n    LocalDate str = LocalDate.of(2020, 8, 15);\n    log.info(&quot;the date is &quot; + str);\n    \n    reservationDto.setDateReservation(str);\n    reservationDto.setDateReservation(LocalDate.of(2020, 8, 15));\n    reservationDto.setDateReservation(LocalDate.now());\n</code></pre>\n<p>With the log the date is displayed but with setReservationDate the following message is displayed:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.LocalDate` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: fr.gopartner.locationvoiture.dto.ReservationDto[&quot;dateReservation&quot;])\n</code></pre>\n<p>I use JDK 11. And i tried to add the dependences:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-module-parameter-names&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jdk8&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I tried to change the dependencies, load the mapper object to serialize/unserialize my ReservationDto object and still shows me the same error above InvalidDefinitionException.\nPlease help me I'm stuck</p>\n"},{"tags":["java","maven","gradle","dependency-management"],"answers":[{"tags":[],"owner":{"account_id":1920070,"reputation":2269,"user_id":1731801,"display_name":"lanwen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683643280,"creation_date":1683643280,"answer_id":76210536,"question_id":54488701,"body_markdown":"You may want to define a task and download as a dependency to the `compileJava`\r\n\r\n    task downloadBinaries(type: Download) {\r\n    \tsrc &#39;https://github.com/.../tagged_release/xxx.exe&#39;\r\n        onlyIfModified true\r\n    \tdest &quot;${sourceSets.main.output.resourcesDir}/bin&quot;\r\n    }\r\n    \r\n    tasks.compileJava.dependsOn(tasks.downloadBinaries)\r\n\r\nAn optional destination could be the `resources` directory, then binaries will be immediately available in the classpath.\r\n","title":"What is the proper way to incorporate a downloadable binary as a Gradle dependency?","body":"<p>You may want to define a task and download as a dependency to the <code>compileJava</code></p>\n<pre><code>task downloadBinaries(type: Download) {\n    src 'https://github.com/.../tagged_release/xxx.exe'\n    onlyIfModified true\n    dest &quot;${sourceSets.main.output.resourcesDir}/bin&quot;\n}\n\ntasks.compileJava.dependsOn(tasks.downloadBinaries)\n</code></pre>\n<p>An optional destination could be the <code>resources</code> directory, then binaries will be immediately available in the classpath.</p>\n"}],"owner":{"account_id":6880256,"reputation":2112,"user_id":5287190,"accept_rate":74,"display_name":"Brian H."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":830,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1683643280,"creation_date":1549066107,"question_id":54488701,"body_markdown":"(note: I&#39;m aware of [JitPack](https://jitpack.io/docs) but it seems to only support `.jar` and `.aar` files, not direct binaries or executables)\r\n\r\nI&#39;m creating a project template that depends on a number of third-party libraries, most of which are available on Maven Central. But there are also a couple of command-line binaries that exist either in a public Git release other stable URL.\r\n\r\nAs these binaries will be directly used by the Java module I&#39;m authoring, they are a project dependency, but I&#39;m not sure how to best incorporate them into my Gradle build.\r\n\r\nI do not plan on making the project template available via Maven, and I do not want to upload the third-party binaries to a Maven repository. Instead, I want consumers of my template to download the binaries when building or running.\r\n\r\nI discovered the [gradle-download-task](https://github.com/michel-kraemer/gradle-download-task) plugin and have managed to cobble it into a dependency via the following.\r\n\r\n```\r\n// build.gradle\r\n\r\nplugins {...}\r\n\r\ndef downloadXXX() {\r\n   mkdir &#39;bin&#39;\r\n   download {\r\n      src &#39;https://github.com/.../tagged_release/xxx.exe&#39;\r\n      dest &#39;bin&#39;\r\n      onlyIfModified true      \r\n   }\r\n   return files(&quot;bin/xxx.exe&quot;)\r\n}\r\n\r\n...\r\ndependencies {\r\n    testImplementation ...\r\n    implementation ...\r\n\r\n    implementation downloadXXX()\r\n\r\n}\r\n```\r\n\r\nThis seems to work. The presence of the binary is checked on compile/build tasks and downloaded if missing or stale, but it *smells wrong*. Although I&#39;m new to Gradle, it seems like I should be creating a download *task* instead of just a function, or doing something else entirely.\r\n\r\nI know that by not using Maven I&#39;ll be sacrificing a lot of built-in versioning support, but I&#39;m more interested in a) having the project dependencies declared/shown in one place and b) allowing consumers of my template to do as much of a one-click setup as possible.\r\n\r\nIs there a better way?","title":"What is the proper way to incorporate a downloadable binary as a Gradle dependency?","body":"<p>(note: I'm aware of <a href=\"https://jitpack.io/docs\" rel=\"noreferrer\">JitPack</a> but it seems to only support <code>.jar</code> and <code>.aar</code> files, not direct binaries or executables)</p>\n\n<p>I'm creating a project template that depends on a number of third-party libraries, most of which are available on Maven Central. But there are also a couple of command-line binaries that exist either in a public Git release other stable URL.</p>\n\n<p>As these binaries will be directly used by the Java module I'm authoring, they are a project dependency, but I'm not sure how to best incorporate them into my Gradle build.</p>\n\n<p>I do not plan on making the project template available via Maven, and I do not want to upload the third-party binaries to a Maven repository. Instead, I want consumers of my template to download the binaries when building or running.</p>\n\n<p>I discovered the <a href=\"https://github.com/michel-kraemer/gradle-download-task\" rel=\"noreferrer\">gradle-download-task</a> plugin and have managed to cobble it into a dependency via the following.</p>\n\n<pre><code>// build.gradle\n\nplugins {...}\n\ndef downloadXXX() {\n   mkdir 'bin'\n   download {\n      src 'https://github.com/.../tagged_release/xxx.exe'\n      dest 'bin'\n      onlyIfModified true      \n   }\n   return files(\"bin/xxx.exe\")\n}\n\n...\ndependencies {\n    testImplementation ...\n    implementation ...\n\n    implementation downloadXXX()\n\n}\n</code></pre>\n\n<p>This seems to work. The presence of the binary is checked on compile/build tasks and downloaded if missing or stale, but it <em>smells wrong</em>. Although I'm new to Gradle, it seems like I should be creating a download <em>task</em> instead of just a function, or doing something else entirely.</p>\n\n<p>I know that by not using Maven I'll be sacrificing a lot of built-in versioning support, but I'm more interested in a) having the project dependencies declared/shown in one place and b) allowing consumers of my template to do as much of a one-click setup as possible.</p>\n\n<p>Is there a better way?</p>\n"},{"tags":["java","jax-ws"],"comments":[{"owner":{"account_id":3391440,"reputation":541,"user_id":2846183,"accept_rate":60,"display_name":"PacDroid"},"score":0,"creation_date":1474620046,"post_id":39596886,"comment_id":66614951,"body_markdown":"I tried through annotation @XmlSchemaType(name=&quot;hexBinary&quot;) but I does not affect the generated xml type used in WSDL","body":"I tried through annotation @XmlSchemaType(name=&quot;hexBinary&quot;) but I does not affect the generated xml type used in WSDL"},{"owner":{"account_id":3391440,"reputation":541,"user_id":2846183,"accept_rate":60,"display_name":"PacDroid"},"score":0,"creation_date":1474629673,"post_id":39596886,"comment_id":66620761,"body_markdown":"Another test with @XmlJavaTypeAdapter(HexBinaryAdapter.class) : leaded to &quot;IllegalAnnotationsException HexBinaryAdapter is not applicable to the field type javax.activation.DataHandler&quot;\nWhich seams to mean that DataHandler can only be parsed to base64Binary ? No clue on that in documentation..","body":"Another test with @XmlJavaTypeAdapter(HexBinaryAdapter.class) : leaded to &quot;IllegalAnnotationsException HexBinaryAdapter is not applicable to the field type javax.activation.DataHandler&quot; Which seams to mean that DataHandler can only be parsed to base64Binary ? No clue on that in documentation.."},{"owner":{"account_id":3391440,"reputation":541,"user_id":2846183,"accept_rate":60,"display_name":"PacDroid"},"score":0,"creation_date":1474630816,"post_id":39596886,"comment_id":66621422,"body_markdown":"I also tested with a package-info.java containing @javax.xml.bind.annotation.XmlSchemaType(name = &quot;hexBinary&quot;, type = javax.activation.DataHandler.class)\nBut it remains of type base64Binary in generated wsdl. I&#39;m running out of potential solutions..","body":"I also tested with a package-info.java containing @javax.xml.bind.annotation.XmlSchemaType(name = &quot;hexBinary&quot;, type = javax.activation.DataHandler.class) But it remains of type base64Binary in generated wsdl. I&#39;m running out of potential solutions.."}],"answers":[{"tags":[],"owner":{"account_id":11496690,"reputation":73,"user_id":8425783,"display_name":"Grzegorz Jasiski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683643150,"creation_date":1683643150,"answer_id":76210513,"question_id":39596886,"body_markdown":"I had found solution to this problem, you have to create wrapped transport object.\r\n\r\n    import javax.xml.bind.annotation.XmlAccessType;\r\n    import javax.xml.bind.annotation.XmlAccessorType;\r\n    import javax.xml.bind.annotation.XmlElement;\r\n    import javax.xml.bind.annotation.XmlSchemaType;\r\n    import javax.xml.bind.annotation.XmlType;\r\n    import javax.xml.bind.annotation.adapters.HexBinaryAdapter;\r\n    import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\r\n    \r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;fileWrapper&quot;, propOrder = {\r\n            &quot;binaryFile&quot;,\r\n            &quot;base64File&quot;\r\n    })\r\n    public class FileWrapper {\r\n        @XmlElement(type = String.class, required = false)\r\n        @XmlJavaTypeAdapter(HexBinaryAdapter.class)\r\n        @XmlSchemaType(name = &quot;hexBinary&quot;)\r\n        private byte[] binaryFile;\r\n        @XmlElement(required = false)\r\n        private byte[] base64File;\r\n    \r\n        public byte[] getBinaryFile() {\r\n            return binaryFile;\r\n        }\r\n    \r\n        public void setBinaryFile(byte[] binaryFile) {\r\n            this.binaryFile = binaryFile;\r\n        }\r\n    \r\n        public byte[] getBase64File() {\r\n            return base64File;\r\n        }\r\n    \r\n        public void setBase64File(byte[] base64File) {\r\n            this.base64File = base64File;\r\n        }\r\n    }\r\n\r\nAnd your web service API:\r\n\r\n    import org.springframework.ws.server.endpoint.annotation.Endpoint;\r\n    \r\n    import javax.jws.WebMethod;\r\n    import javax.jws.WebParam;\r\n    import javax.jws.WebService;\r\n    import javax.xml.bind.annotation.XmlElement;\r\n    import javax.xml.ws.BindingType;\r\n    \r\n    @Endpoint\r\n    @WebService(name = &quot;ExampleApi&quot;, targetNamespace = &quot;http://example-api.com/&quot;)\r\n    @BindingType(javax.xml.ws.soap.SOAPBinding.SOAP12HTTP_BINDING)\r\n    public class ExampleApi {\r\n        @WebMethod\r\n        public Boolean uploadFile(@WebParam(name = &quot;fileWrapper&quot;)\r\n                                  @XmlElement(required = true)\r\n                                          FileWrapper fileWrapper) {\r\n            return true;\r\n        }\r\n    }\r\n\r\nIt will generate WSDL with content (snippet, not whole WSDL)\r\n\r\n      &lt;xs:complexType name=&quot;uploadFile&quot;&gt;\r\n        &lt;xs:sequence&gt;\r\n          &lt;xs:element name=&quot;fileWrapper&quot; type=&quot;tns:fileWrapper&quot;/&gt;\r\n        &lt;/xs:sequence&gt;\r\n      &lt;/xs:complexType&gt;\r\n    \r\n      &lt;xs:complexType name=&quot;fileWrapper&quot;&gt;\r\n        &lt;xs:sequence&gt;\r\n          &lt;xs:element minOccurs=&quot;0&quot; name=&quot;binaryFile&quot; type=&quot;xs:hexBinary&quot;/&gt;\r\n          &lt;xs:element minOccurs=&quot;0&quot; name=&quot;base64File&quot; type=&quot;xs:base64Binary&quot;/&gt;\r\n        &lt;/xs:sequence&gt;\r\n      &lt;/xs:complexType&gt;\r\n\r\n\r\n","title":"JAX-WS Generate parameter type for xs:hexBinary","body":"<p>I had found solution to this problem, you have to create wrapped transport object.</p>\n<pre><code>import javax.xml.bind.annotation.XmlAccessType;\nimport javax.xml.bind.annotation.XmlAccessorType;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.bind.annotation.XmlSchemaType;\nimport javax.xml.bind.annotation.XmlType;\nimport javax.xml.bind.annotation.adapters.HexBinaryAdapter;\nimport javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;fileWrapper&quot;, propOrder = {\n        &quot;binaryFile&quot;,\n        &quot;base64File&quot;\n})\npublic class FileWrapper {\n    @XmlElement(type = String.class, required = false)\n    @XmlJavaTypeAdapter(HexBinaryAdapter.class)\n    @XmlSchemaType(name = &quot;hexBinary&quot;)\n    private byte[] binaryFile;\n    @XmlElement(required = false)\n    private byte[] base64File;\n\n    public byte[] getBinaryFile() {\n        return binaryFile;\n    }\n\n    public void setBinaryFile(byte[] binaryFile) {\n        this.binaryFile = binaryFile;\n    }\n\n    public byte[] getBase64File() {\n        return base64File;\n    }\n\n    public void setBase64File(byte[] base64File) {\n        this.base64File = base64File;\n    }\n}\n</code></pre>\n<p>And your web service API:</p>\n<pre><code>import org.springframework.ws.server.endpoint.annotation.Endpoint;\n\nimport javax.jws.WebMethod;\nimport javax.jws.WebParam;\nimport javax.jws.WebService;\nimport javax.xml.bind.annotation.XmlElement;\nimport javax.xml.ws.BindingType;\n\n@Endpoint\n@WebService(name = &quot;ExampleApi&quot;, targetNamespace = &quot;http://example-api.com/&quot;)\n@BindingType(javax.xml.ws.soap.SOAPBinding.SOAP12HTTP_BINDING)\npublic class ExampleApi {\n    @WebMethod\n    public Boolean uploadFile(@WebParam(name = &quot;fileWrapper&quot;)\n                              @XmlElement(required = true)\n                                      FileWrapper fileWrapper) {\n        return true;\n    }\n}\n</code></pre>\n<p>It will generate WSDL with content (snippet, not whole WSDL)</p>\n<pre><code>  &lt;xs:complexType name=&quot;uploadFile&quot;&gt;\n    &lt;xs:sequence&gt;\n      &lt;xs:element name=&quot;fileWrapper&quot; type=&quot;tns:fileWrapper&quot;/&gt;\n    &lt;/xs:sequence&gt;\n  &lt;/xs:complexType&gt;\n\n  &lt;xs:complexType name=&quot;fileWrapper&quot;&gt;\n    &lt;xs:sequence&gt;\n      &lt;xs:element minOccurs=&quot;0&quot; name=&quot;binaryFile&quot; type=&quot;xs:hexBinary&quot;/&gt;\n      &lt;xs:element minOccurs=&quot;0&quot; name=&quot;base64File&quot; type=&quot;xs:base64Binary&quot;/&gt;\n    &lt;/xs:sequence&gt;\n  &lt;/xs:complexType&gt;\n</code></pre>\n"}],"owner":{"account_id":3391440,"reputation":541,"user_id":2846183,"accept_rate":60,"display_name":"PacDroid"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683643150,"creation_date":1474381980,"question_id":39596886,"body_markdown":"I made a webservice endpoint, Java first, providing a method returning javax.activation.DataHandler for binary data of content, which mime type is  &quot;application/octet-stream&quot;. I enabled MTOM support, which isn&#39;t enabled by default.\r\n\r\nAccording to this table [JAX-WS supported types][1] , DataHandler is associated to xs:base64Binary XML type, and generated WSDL shows it. I would like to make JAX-WS generate a xs:hexBinary type instead. Does someone know how to? I couldn&#39;t find it in manual ( [IBM docs on enabling MTOM][2] ), nor any annotation used to achieve this goal..\r\n\r\nI use JDK8, deploying on JBOSS EAP6.\r\n\r\nThanks a lot!\r\n\r\n\r\n  [1]: http://docs.oracle.com/javaee/6/tutorial/doc/bnazc.html\r\n  [2]: https://www.ibm.com/support/knowledgecenter/SSEQTP_7.0.0/com.ibm.websphere.nd.doc/info/ae/ae/twbs_enablemtom.html","title":"JAX-WS Generate parameter type for xs:hexBinary","body":"<p>I made a webservice endpoint, Java first, providing a method returning javax.activation.DataHandler for binary data of content, which mime type is  \"application/octet-stream\". I enabled MTOM support, which isn't enabled by default.</p>\n\n<p>According to this table <a href=\"http://docs.oracle.com/javaee/6/tutorial/doc/bnazc.html\" rel=\"nofollow\">JAX-WS supported types</a> , DataHandler is associated to xs:base64Binary XML type, and generated WSDL shows it. I would like to make JAX-WS generate a xs:hexBinary type instead. Does someone know how to? I couldn't find it in manual ( <a href=\"https://www.ibm.com/support/knowledgecenter/SSEQTP_7.0.0/com.ibm.websphere.nd.doc/info/ae/ae/twbs_enablemtom.html\" rel=\"nofollow\">IBM docs on enabling MTOM</a> ), nor any annotation used to achieve this goal..</p>\n\n<p>I use JDK8, deploying on JBOSS EAP6.</p>\n\n<p>Thanks a lot!</p>\n"},{"tags":["java","hibernate","spring-boot","spring-data","spring-data-jpa"],"comments":[{"owner":{"account_id":1756397,"reputation":363,"user_id":1604339,"display_name":"Daniel Gomes"},"score":0,"creation_date":1431117714,"post_id":30132489,"comment_id":48375013,"body_markdown":"I&#39;m also open to suggestions if anyone have a better idea of how to do multi-tenancy by column with spring-data. Even if not using hibernate filters.","body":"I&#39;m also open to suggestions if anyone have a better idea of how to do multi-tenancy by column with spring-data. Even if not using hibernate filters."},{"owner":{"account_id":8495,"reputation":12718,"user_id":15355,"accept_rate":60,"display_name":"pvgoddijn"},"score":0,"creation_date":1478091882,"post_id":30132489,"comment_id":68013055,"body_markdown":"did you ever find a good solution that is hopefully still up to date?","body":"did you ever find a good solution that is hopefully still up to date?"},{"owner":{"account_id":1756397,"reputation":363,"user_id":1604339,"display_name":"Daniel Gomes"},"score":0,"creation_date":1479271452,"post_id":30132489,"comment_id":68482172,"body_markdown":"unfortunately, no.","body":"unfortunately, no."},{"owner":{"account_id":385604,"reputation":157,"user_id":742835,"accept_rate":80,"display_name":"Moltes"},"score":0,"creation_date":1512875154,"post_id":30132489,"comment_id":82431439,"body_markdown":"And now, one year later, did you finally find a solution ? I&#39;m in the same situation and could not make it work...","body":"And now, one year later, did you finally find a solution ? I&#39;m in the same situation and could not make it work..."},{"owner":{"account_id":125163,"reputation":2985,"user_id":320761,"display_name":"Lukasz Frankowski"},"score":1,"creation_date":1529158879,"post_id":30132489,"comment_id":88778683,"body_markdown":"Use AOP https://stackoverflow.com/a/32230857/320761","body":"Use AOP <a href=\"https://stackoverflow.com/a/32230857/320761\">stackoverflow.com/a/32230857/320761</a>"}],"answers":[{"comments":[{"owner":{"account_id":5739360,"reputation":755,"user_id":4532512,"accept_rate":86,"display_name":"Hakuna Matata"},"score":0,"creation_date":1530255680,"post_id":51060722,"comment_id":89179701,"body_markdown":"https://stackoverflow.com/questions/22199971/discriminator-based-multi-tenancy-with-spring-data-jpahibernate/45935879#45935879","body":"<a href=\"https://stackoverflow.com/questions/22199971/discriminator-based-multi-tenancy-with-spring-data-jpahibernate/45935879#45935879\" title=\"discriminator based multi tenancy with spring data jpahibernate\">stackoverflow.com/questions/22199971/&hellip;</a>"}],"tags":[],"owner":{"account_id":5739360,"reputation":755,"user_id":4532512,"accept_rate":86,"display_name":"Hakuna Matata"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530255552,"creation_date":1530096005,"answer_id":51060722,"question_id":30132489,"body_markdown":"Using hibernate filters its easy to implement multitenantcies even for Row level ACL as well possible in our application.\r\nInstead of discrimators you could use AOP and different filters configurable in your db. Before calling your request method based on the accessing user apply the filter that is enable the hibernate session filter and exeute the request and after successfully request processing disable the filters. thats it. Using this way you could add any number of filters to any number entities that are going to be operated by the current user and you could do the perfect resource (Entity and CRUD) management with this.\r\n\r\n","title":"Enable hibernate filter globally with spring-boot &amp; spring-data","body":"<p>Using hibernate filters its easy to implement multitenantcies even for Row level ACL as well possible in our application.\nInstead of discrimators you could use AOP and different filters configurable in your db. Before calling your request method based on the accessing user apply the filter that is enable the hibernate session filter and exeute the request and after successfully request processing disable the filters. thats it. Using this way you could add any number of filters to any number entities that are going to be operated by the current user and you could do the perfect resource (Entity and CRUD) management with this.</p>\n"},{"tags":[],"owner":{"account_id":34878,"reputation":5531,"user_id":98632,"display_name":"mtpettyp"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683643087,"creation_date":1683643087,"answer_id":76210504,"question_id":30132489,"body_markdown":"You can use a Spring `HandlerInterceptor` along with Spring&#39;s [Open Session in View][1] in order to accomplish this:\r\n\r\nEnsure Open Session in View is enabled\r\n--------------------------------------\r\napplication.yml\r\n\r\n    spring:\r\n      jpa:\r\n        open-in-view: true\r\n\r\nAdd a HandlerInterceptor\r\n------------------------\r\n\r\n    @Component\r\n    public class HibernateInterceptor implements HandlerInterceptor {\r\n    \r\n        @Autowired\r\n        private EntityManager entityManager;\r\n    \r\n        @Override\r\n        @Transactional\r\n        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\r\n            Session session = entityManager.unwrap(Session.class);\r\n            session.enableFilter(&quot;multi-tenant&quot;)\r\n                   .setParameter(&quot;tenant&quot;, &quot;my-tenant-value&quot;);\r\n    \r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {\r\n            Session session = entityManager.unwrap(Session.class);\r\n            session.disableFilter(&quot;multi-tenant&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {\r\n            // This method is called after the response has been sent to the client\r\n        }\r\n    }\r\n\r\nConfigure the HandlerInterceptor\r\n--------------------------------\r\n\r\n    @Configuration\r\n    public class WebConfig implements WebMvcConfigurer {\r\n    \r\n        @Autowired\r\n        private HibernateInterceptor hibernateInterceptor;\r\n    \r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            registry.addInterceptor(hibernateInterceptor).order(Ordered.LOWEST_PRECEDENCE);\r\n        }\r\n    }\r\n\r\nThe key is ensuring the `HandlerInterceptor` is run after Spring&#39;s `OpenEntityManagerInViewInterceptor` - this is accomplished by setting the order to `Ordered.LOWEST_PRECEDENCE`\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-open-session-in-view","title":"Enable hibernate filter globally with spring-boot &amp; spring-data","body":"<p>You can use a Spring <code>HandlerInterceptor</code> along with Spring's <a href=\"https://www.baeldung.com/spring-open-session-in-view\" rel=\"nofollow noreferrer\">Open Session in View</a> in order to accomplish this:</p>\n<h2>Ensure Open Session in View is enabled</h2>\n<p>application.yml</p>\n<pre><code>spring:\n  jpa:\n    open-in-view: true\n</code></pre>\n<h2>Add a HandlerInterceptor</h2>\n<pre><code>@Component\npublic class HibernateInterceptor implements HandlerInterceptor {\n\n    @Autowired\n    private EntityManager entityManager;\n\n    @Override\n    @Transactional\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        Session session = entityManager.unwrap(Session.class);\n        session.enableFilter(&quot;multi-tenant&quot;)\n               .setParameter(&quot;tenant&quot;, &quot;my-tenant-value&quot;);\n\n        return true;\n    }\n\n    @Override\n    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {\n        Session session = entityManager.unwrap(Session.class);\n        session.disableFilter(&quot;multi-tenant&quot;);\n    }\n\n    @Override\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {\n        // This method is called after the response has been sent to the client\n    }\n}\n</code></pre>\n<h2>Configure the HandlerInterceptor</h2>\n<pre><code>@Configuration\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Autowired\n    private HibernateInterceptor hibernateInterceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(hibernateInterceptor).order(Ordered.LOWEST_PRECEDENCE);\n    }\n}\n</code></pre>\n<p>The key is ensuring the <code>HandlerInterceptor</code> is run after Spring's <code>OpenEntityManagerInViewInterceptor</code> - this is accomplished by setting the order to <code>Ordered.LOWEST_PRECEDENCE</code></p>\n"}],"owner":{"account_id":1756397,"reputation":363,"user_id":1604339,"display_name":"Daniel Gomes"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6158,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":2,"score":13,"last_activity_date":1683643087,"creation_date":1431117490,"question_id":30132489,"body_markdown":"I am trying to implement a multi-tenancy by discriminator implementation with Spring Boot and Spring Data.\r\n\r\nI have made an abstract class to represent a multi-tenant entity. Something similar to this:\r\n\r\n    @MappedSuperclass\r\n    @FilterDefs({@FilterDef(name = &quot;multi-tenant&quot;, parameters = {@ParamDef(name = &quot;tenant&quot;, type = &quot;string&quot;)})})\r\n    @Filter(name = &quot;multi-tenant&quot;, condition = &quot;tenant = :tenant&quot;)\r\n    public abstract class MultiTenantEntity extends GenericEntity {\r\n        @Transient\r\n        private transient String savedTenant;\r\n    \r\n        @PostLoad\r\n        private void onLoad() throws Exception {\r\n            this.savedTenant = this.tenant;\r\n            onEntityModification();\r\n        }\r\n    \r\n        @PrePersist\r\n        private void onPersist() {\r\n            if (getId() == null || getId().equals(0l)) {\r\n                tenant = SecurityUtil.getCurrentTenant();\r\n            }\r\n        }\r\n    \r\n        @PreUpdate\r\n        @PreRemove\r\n        private void onEntityModification() throws Exception {\r\n            String currentTenant = SecurityUtil.getCurrentTenant();\r\n    \r\n            if (!currentTenant.equals(tenant) || !savedTenant.equals(tenant)) {\r\n                throw new Exception();\r\n            }\r\n        }\r\n    \r\n        @NotNull\r\n        private String tenant;\r\n    \r\n        public String getTenant() {\r\n            return tenant;\r\n        }\r\n    }\r\n\r\n\r\n&gt; How do I enable the ***multi-tenant*** hibernate filter globally?\r\n\r\n","title":"Enable hibernate filter globally with spring-boot &amp; spring-data","body":"<p>I am trying to implement a multi-tenancy by discriminator implementation with Spring Boot and Spring Data.</p>\n\n<p>I have made an abstract class to represent a multi-tenant entity. Something similar to this:</p>\n\n<pre><code>@MappedSuperclass\n@FilterDefs({@FilterDef(name = \"multi-tenant\", parameters = {@ParamDef(name = \"tenant\", type = \"string\")})})\n@Filter(name = \"multi-tenant\", condition = \"tenant = :tenant\")\npublic abstract class MultiTenantEntity extends GenericEntity {\n    @Transient\n    private transient String savedTenant;\n\n    @PostLoad\n    private void onLoad() throws Exception {\n        this.savedTenant = this.tenant;\n        onEntityModification();\n    }\n\n    @PrePersist\n    private void onPersist() {\n        if (getId() == null || getId().equals(0l)) {\n            tenant = SecurityUtil.getCurrentTenant();\n        }\n    }\n\n    @PreUpdate\n    @PreRemove\n    private void onEntityModification() throws Exception {\n        String currentTenant = SecurityUtil.getCurrentTenant();\n\n        if (!currentTenant.equals(tenant) || !savedTenant.equals(tenant)) {\n            throw new Exception();\n        }\n    }\n\n    @NotNull\n    private String tenant;\n\n    public String getTenant() {\n        return tenant;\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>How do I enable the <strong><em>multi-tenant</em></strong> hibernate filter globally?</p>\n</blockquote>\n"},{"tags":["java","maven","h2","liquibase"],"owner":{"account_id":1674243,"reputation":10078,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":275,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683642925,"creation_date":1683637772,"question_id":76209730,"body_markdown":"I have a Liquibase and an H2 in my Spring Boot project.\r\n\r\nI use persistent file (h2:file) for H2 instead of in-memory (h2:mem) approach.\r\n\r\nWhen I run project with just play button (IntelliJ IDEA, Run Project) app runs fine; however, when I build it with `mvn clean package` it outputs:\r\n\r\n```java\r\n Caused by: org.h2.mvstore.MVStoreException: The file is locked: C:/path/to/database/data.mv.db [2.1.214/7]\r\n        at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:1004)\r\n        at org.h2.mvstore.FileStore.open(FileStore.java:178)\r\n        at org.h2.mvstore.FileStore.open(FileStore.java:128)\r\n        at org.h2.mvstore.MVStore.&lt;init&gt;(MVStore.java:452)\r\n        at org.h2.mvstore.MVStore$Builder.open(MVStore.java:4082)\r\n        at org.h2.mvstore.db.Store.&lt;init&gt;(Store.java:136)\r\n        ... 115 more\r\n```\r\nand it does so even if I empty `C:/path/to/database` folder and run app again (so, at the first startup).\r\n\r\nI speculated a bit and tried to run it without test phase, like:\r\n\r\n```java\r\nmvn clean package -DskipTests\r\n```\r\nand it then worked.\r\n\r\nThis is my `application.properties` if it matters:\r\n```\r\nspring.datasource.url=jdbc:h2:file:./database/data\r\n\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\n\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.open-in-view=false\r\n\r\nspring.h2.console.enabled=true\r\n\r\nspring.liquibase.change-log=db/changelog/db.changelog-master.xml\r\n```\r\n\r\nWhat&#39;s the point? any tips?\r\n\r\nUpdate\r\n-\r\nIf I just remove Liquibase dependency\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n    &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\r\n    &lt;version&gt;4.21.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nthen H2 works fine and persists data in file.","title":"org.h2.mvstore.MVStoreException: The file is locked: when running &quot;mvn clean package&quot; but works fine when running &quot;mvn clean package -DskipTests&quot;","body":"<p>I have a Liquibase and an H2 in my Spring Boot project.</p>\n<p>I use persistent file (h2:file) for H2 instead of in-memory (h2:mem) approach.</p>\n<p>When I run project with just play button (IntelliJ IDEA, Run Project) app runs fine; however, when I build it with <code>mvn clean package</code> it outputs:</p>\n<pre class=\"lang-java prettyprint-override\"><code> Caused by: org.h2.mvstore.MVStoreException: The file is locked: C:/path/to/database/data.mv.db [2.1.214/7]\n        at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:1004)\n        at org.h2.mvstore.FileStore.open(FileStore.java:178)\n        at org.h2.mvstore.FileStore.open(FileStore.java:128)\n        at org.h2.mvstore.MVStore.&lt;init&gt;(MVStore.java:452)\n        at org.h2.mvstore.MVStore$Builder.open(MVStore.java:4082)\n        at org.h2.mvstore.db.Store.&lt;init&gt;(Store.java:136)\n        ... 115 more\n</code></pre>\n<p>and it does so even if I empty <code>C:/path/to/database</code> folder and run app again (so, at the first startup).</p>\n<p>I speculated a bit and tried to run it without test phase, like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>mvn clean package -DskipTests\n</code></pre>\n<p>and it then worked.</p>\n<p>This is my <code>application.properties</code> if it matters:</p>\n<pre><code>spring.datasource.url=jdbc:h2:file:./database/data\n\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\n\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.open-in-view=false\n\nspring.h2.console.enabled=true\n\nspring.liquibase.change-log=db/changelog/db.changelog-master.xml\n</code></pre>\n<p>What's the point? any tips?</p>\n<h2>Update</h2>\n<p>If I just remove Liquibase dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n    &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n    &lt;version&gt;4.21.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>then H2 works fine and persists data in file.</p>\n"},{"tags":["java","html","wicket"],"answers":[{"comments":[{"owner":{"account_id":28486769,"reputation":21,"user_id":21799955,"display_name":"farmerbenny"},"score":0,"creation_date":1683642751,"post_id":76173353,"comment_id":134395916,"body_markdown":"My apologies, I wanted new tabs instead of new windows. I have edited to post to reflect that.","body":"My apologies, I wanted new tabs instead of new windows. I have edited to post to reflect that."}],"tags":[],"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683204323,"creation_date":1683204323,"answer_id":76173353,"question_id":76158700,"body_markdown":"As you figured out you need to use JavaScript to open multiple new browser tabs.\r\n\r\nIf you needed to open just one tab then you could have used ` org.apache.wicket.markup.html.link.PopupSettings` to your Button:\r\n\r\n    PopupSettings popupSettings = new PopupSettings(&quot;popuppagemap&quot;)\r\n      .setHeight(500)\r\n      .setWidth(500);\r\n    myButton.setPopupSettings(popupSettings));\r\n\r\n\r\nSee the examples at https://examples9x.wicket.apache.org/linkomatic/home","title":"Can I open multiple tabs with a single button in Wicket 9.6?","body":"<p>As you figured out you need to use JavaScript to open multiple new browser tabs.</p>\n<p>If you needed to open just one tab then you could have used <code> org.apache.wicket.markup.html.link.PopupSettings</code> to your Button:</p>\n<pre><code>PopupSettings popupSettings = new PopupSettings(&quot;popuppagemap&quot;)\n  .setHeight(500)\n  .setWidth(500);\nmyButton.setPopupSettings(popupSettings));\n</code></pre>\n<p>See the examples at <a href=\"https://examples9x.wicket.apache.org/linkomatic/home\" rel=\"nofollow noreferrer\">https://examples9x.wicket.apache.org/linkomatic/home</a></p>\n"}],"owner":{"account_id":28486769,"reputation":21,"user_id":21799955,"display_name":"farmerbenny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683642712,"creation_date":1683060000,"question_id":76158700,"body_markdown":"I have a ListMultipleChoice object that I&#39;m using on my homePage. I want to click the &quot;Search&quot; button and open a tab for each element in the LMC. \r\n[What I have](https://i.stack.imgur.com/O8qgv.png)\r\n\r\nI&#39;m able to Log each element when I click &quot;search&quot;, so getting the data is not the issue, the issue is being able to open each one in a new tab. \r\n\r\nHere is the relevant code I have currently. \r\n\r\nHomePage.html:\r\n\r\n```\r\n&lt;select wicket:id=&quot;dataElement&quot;\r\n class=&quot;form-control chosen-select&quot; multiple\r\n data-placeholder=&quot;Select Data Elements&quot; required&gt;\r\n &lt;option value=&quot;&quot;&gt;&lt;/option&gt;\r\n&lt;/select&gt;\r\n```\r\n\r\nHomePage.java\r\n```\r\nChoiceRenderer&lt;DataElement&gt; dataElementChoiceRenderer = new ChoiceRenderer&lt;&gt;(\r\n                &quot;displayValue&quot;);\r\nListMultipleChoice&lt;DataElement&gt; regSelect = new ListMultipleChoice&lt;&gt;(&quot;dataElement&quot;, this.dataElementModel,\r\n                dataElementChoiceRenderer);\r\n\r\nAjaxButton searchButton = new AjaxButton(&quot;search&quot;, f) {\r\n\r\n    @Override\r\n    protected void onSubmit(AjaxRequestTarget target) {\r\n        Collection&lt;DataElement&gt; convertedInput = regSelect.getConvertedInput();\r\n        if (!convertedInput.isEmpty()) {\r\n            setResponsePage(ResultsPage.class, params);\r\n      }\r\n    }\r\n};\r\n```\r\n\r\n\r\nI&#39;ve tried adding target=&quot;_blank&quot; in several location and calling setResponsePage in a for loop with no success. Only the first element in the LMC is opened in a new tab.\r\n\r\n\r\nEDIT: I figured it out\r\nI had to use JS inside my AjaxButton\r\n```\r\nUrl url = getRequestCycle().mapUrlFor(ResultsPage.class, params);\r\nString js = &quot;var w = window.open(\\&quot;&quot; + mapUrlFor + &quot;&quot;\\&quot;, \\&quot;_blank\\&quot;);&quot;\r\ntarget.appendJavaScript(js);\r\n```","title":"Can I open multiple tabs with a single button in Wicket 9.6?","body":"<p>I have a ListMultipleChoice object that I'm using on my homePage. I want to click the &quot;Search&quot; button and open a tab for each element in the LMC.\n<a href=\"https://i.stack.imgur.com/O8qgv.png\" rel=\"nofollow noreferrer\">What I have</a></p>\n<p>I'm able to Log each element when I click &quot;search&quot;, so getting the data is not the issue, the issue is being able to open each one in a new tab.</p>\n<p>Here is the relevant code I have currently.</p>\n<p>HomePage.html:</p>\n<pre><code>&lt;select wicket:id=&quot;dataElement&quot;\n class=&quot;form-control chosen-select&quot; multiple\n data-placeholder=&quot;Select Data Elements&quot; required&gt;\n &lt;option value=&quot;&quot;&gt;&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n<p>HomePage.java</p>\n<pre><code>ChoiceRenderer&lt;DataElement&gt; dataElementChoiceRenderer = new ChoiceRenderer&lt;&gt;(\n                &quot;displayValue&quot;);\nListMultipleChoice&lt;DataElement&gt; regSelect = new ListMultipleChoice&lt;&gt;(&quot;dataElement&quot;, this.dataElementModel,\n                dataElementChoiceRenderer);\n\nAjaxButton searchButton = new AjaxButton(&quot;search&quot;, f) {\n\n    @Override\n    protected void onSubmit(AjaxRequestTarget target) {\n        Collection&lt;DataElement&gt; convertedInput = regSelect.getConvertedInput();\n        if (!convertedInput.isEmpty()) {\n            setResponsePage(ResultsPage.class, params);\n      }\n    }\n};\n</code></pre>\n<p>I've tried adding target=&quot;_blank&quot; in several location and calling setResponsePage in a for loop with no success. Only the first element in the LMC is opened in a new tab.</p>\n<p>EDIT: I figured it out\nI had to use JS inside my AjaxButton</p>\n<pre><code>Url url = getRequestCycle().mapUrlFor(ResultsPage.class, params);\nString js = &quot;var w = window.open(\\&quot;&quot; + mapUrlFor + &quot;&quot;\\&quot;, \\&quot;_blank\\&quot;);&quot;\ntarget.appendJavaScript(js);\n</code></pre>\n"},{"tags":["java","arrays","json","string","freemarker"],"owner":{"account_id":14628298,"reputation":15,"user_id":10564972,"display_name":"raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683642674,"creation_date":1683642611,"question_id":76210437,"body_markdown":"I&#39;m new to ftl, and I have a below json which is read by ftlh file. I&#39;m trying to create a table where I need to combine columns of same month together. For this I will need to have count of same month from my json data. Here i need count of Nov month\r\n\r\n\r\nBelow is my json data:\r\n\r\n```\r\n{\r\n\t&quot;data&quot;: [\r\n\t\t{\r\n\t\t\t&quot;startDate&quot;: {\r\n\t\t\t\t&quot;displayName&quot;: &quot;Start date&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;06-Nov-2023&quot;\r\n\t\t\t},\r\n\t\t\t&quot;hours&quot;: {\r\n\t\t\t\t&quot;displayName&quot;: &quot;Work hours&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;4&quot;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;startDate&quot;: {\r\n\t\t\t\t&quot;displayName&quot;: &quot;Start date&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;13-Nov-2023&quot;\r\n\t\t\t},\r\n\t\t\t&quot;hours&quot;: {\r\n\t\t\t\t&quot;displayName&quot;: &quot;Work hours&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;0&quot;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;startDate&quot;: {\r\n\t\t\t\t&quot;displayName&quot;: &quot;Start date&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;20-Nov-2023&quot;\r\n\t\t\t},\r\n\t\t\t&quot;hours&quot;: {\r\n\t\t\t\t&quot;displayName&quot;: &quot;Work hours&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;0&quot;\r\n\t\t\t}\r\n\t\t},\r\n\t\t{\r\n\t\t\t&quot;startDate&quot;: {\r\n\t\t\t\t&quot;displayName&quot;: &quot;Start date&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;27-Nov-2023&quot;\r\n\t\t\t},\r\n\t\t\t&quot;hours&quot;: {\r\n\t\t\t\t&quot;displayName&quot;: &quot;Work hours&quot;,\r\n\t\t\t\t&quot;value&quot;: &quot;0&quot;\r\n\t\t\t}\r\n\t\t}\r\n\t]\r\n}\r\n```\r\nHere&#39;s what I&#39;m trying to do, but not sure how to proceed.\r\n\r\n```\r\n&lt;#assign monthCounter = 0 &gt;\r\n        &lt;#list detail.get(&quot;data&quot;).get(&quot;value&quot;).elements() as work&gt;\r\n            &lt;#if (work.get(&quot;startDate&quot;).get(&quot;value&quot;).asText(&quot;&quot;))?has_content&gt;\r\n                &lt;#assign monthCounter = monthCounter + 1 /&gt;\r\n                &lt;#assign startDate = work.get(&quot;startDate&quot;).get(&quot;value&quot;).asText(&quot;&quot;)[3..5] /&gt;\r\n            &lt;/#if&gt;\r\n        &lt;/#list&gt;\r\n```","title":"Calculating count of months from Json data in FTL","body":"<p>I'm new to ftl, and I have a below json which is read by ftlh file. I'm trying to create a table where I need to combine columns of same month together. For this I will need to have count of same month from my json data. Here i need count of Nov month</p>\n<p>Below is my json data:</p>\n<pre><code>{\n    &quot;data&quot;: [\n        {\n            &quot;startDate&quot;: {\n                &quot;displayName&quot;: &quot;Start date&quot;,\n                &quot;value&quot;: &quot;06-Nov-2023&quot;\n            },\n            &quot;hours&quot;: {\n                &quot;displayName&quot;: &quot;Work hours&quot;,\n                &quot;value&quot;: &quot;4&quot;\n            }\n        },\n        {\n            &quot;startDate&quot;: {\n                &quot;displayName&quot;: &quot;Start date&quot;,\n                &quot;value&quot;: &quot;13-Nov-2023&quot;\n            },\n            &quot;hours&quot;: {\n                &quot;displayName&quot;: &quot;Work hours&quot;,\n                &quot;value&quot;: &quot;0&quot;\n            }\n        },\n        {\n            &quot;startDate&quot;: {\n                &quot;displayName&quot;: &quot;Start date&quot;,\n                &quot;value&quot;: &quot;20-Nov-2023&quot;\n            },\n            &quot;hours&quot;: {\n                &quot;displayName&quot;: &quot;Work hours&quot;,\n                &quot;value&quot;: &quot;0&quot;\n            }\n        },\n        {\n            &quot;startDate&quot;: {\n                &quot;displayName&quot;: &quot;Start date&quot;,\n                &quot;value&quot;: &quot;27-Nov-2023&quot;\n            },\n            &quot;hours&quot;: {\n                &quot;displayName&quot;: &quot;Work hours&quot;,\n                &quot;value&quot;: &quot;0&quot;\n            }\n        }\n    ]\n}\n</code></pre>\n<p>Here's what I'm trying to do, but not sure how to proceed.</p>\n<pre><code>&lt;#assign monthCounter = 0 &gt;\n        &lt;#list detail.get(&quot;data&quot;).get(&quot;value&quot;).elements() as work&gt;\n            &lt;#if (work.get(&quot;startDate&quot;).get(&quot;value&quot;).asText(&quot;&quot;))?has_content&gt;\n                &lt;#assign monthCounter = monthCounter + 1 /&gt;\n                &lt;#assign startDate = work.get(&quot;startDate&quot;).get(&quot;value&quot;).asText(&quot;&quot;)[3..5] /&gt;\n            &lt;/#if&gt;\n        &lt;/#list&gt;\n</code></pre>\n"},{"tags":["java","android","firebase-realtime-database"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1683607738,"post_id":76204446,"comment_id":134388464,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"comments":[{"owner":{"account_id":27958469,"reputation":1,"user_id":21350818,"display_name":"servidor ocaloka"},"score":0,"creation_date":1683638139,"post_id":76204695,"comment_id":134394733,"body_markdown":"But if I execute the method withs a addListenerForSingleValueEvent still being and infinite loop and and I also need him to listen all the time to update the position of all the players.","body":"But if I execute the method withs a addListenerForSingleValueEvent still being and infinite loop and and I also need him to listen all the time to update the position of all the players."},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1683645385,"post_id":76204695,"comment_id":134396631,"body_markdown":"First off: does the explanation in my answer on why you&#39;re getting an infinite listen-&gt;write-&gt;listen-&gt;write loop make sense? And does it explain why you&#39;re getting into this situation? --- If so, and you can&#39;t use the solution I describe, you will need to find another way to break the infinite loop yourself.  The API can&#39;t help you here as this is part of your application logic. Common approach are to listen to less data, so that you don&#39;t listen to the data that you&#39;re updating, or to have a condition in your code that breaks the loop. But as said, that&#39;s application logic.","body":"First off: does the explanation in my answer on why you&#39;re getting an infinite listen-&gt;write-&gt;listen-&gt;write loop make sense? And does it explain why you&#39;re getting into this situation? --- If so, and you can&#39;t use the solution I describe, you will need to find another way to break the infinite loop yourself.  The API can&#39;t help you here as this is part of your application logic. Common approach are to listen to less data, so that you don&#39;t listen to the data that you&#39;re updating, or to have a condition in your code that breaks the loop. But as said, that&#39;s application logic."},{"owner":{"account_id":27958469,"reputation":1,"user_id":21350818,"display_name":"servidor ocaloka"},"score":0,"creation_date":1683650523,"post_id":76204695,"comment_id":134397941,"body_markdown":"Yea the listen-&gt;write -&gt; listen-&gt;write logic make sense but i&#39;m not able to see why. I mean i&#39;m executing the method throw like `FirebaseAuth.getInstance().getCurrentUser();\n` so I&#39;m updating the current user values so dont alter betwen the players right?\nBecause if i use a `addListenerForSingleValueEvent` instead of `addListenerValueEvent` the same persist","body":"Yea the listen-&gt;write -&gt; listen-&gt;write logic make sense but i&#39;m not able to see why. I mean i&#39;m executing the method throw like <code>FirebaseAuth.getInstance().getCurrentUser(); </code> so I&#39;m updating the current user values so dont alter betwen the players right? Because if i use a <code>addListenerForSingleValueEvent</code> instead of <code>addListenerValueEvent</code> the same persist"},{"owner":{"account_id":27958469,"reputation":1,"user_id":21350818,"display_name":"servidor ocaloka"},"score":0,"creation_date":1683652734,"post_id":76204695,"comment_id":134398498,"body_markdown":"So you mean the problem could be the `DatabaseReference posicioActualRef = playerRef.child(&quot;actualPosition&quot;); ` in the `onDataChange`?","body":"So you mean the problem could be the <code>DatabaseReference posicioActualRef = playerRef.child(&quot;actualPosition&quot;); </code> in the <code>onDataChange</code>?"}],"tags":[],"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683583959,"creation_date":1683583959,"answer_id":76204695,"question_id":76204446,"body_markdown":"When you call `addValueEventListener` you are adding a **permanent** listener, which immediately gets the current value at the path - and then gets called whenever there are updates under that path.\r\n\r\nWhen your code later writes to `posicioActualRef` that seems to update data under the path that you added the listener to. So that triggers another call to your `onDataChange`, which then updates `posicioActualRef` again, which triggers an other call to `onDataChange`, etc.\r\n\r\n---\r\n\r\nIf you only want to read the value once and then update a value under it, use `addListenerForSingleValueEvent` instead of `addValueEventListener`.","title":"Infinite Loop - Firebase real time database - Android Studio","body":"<p>When you call <code>addValueEventListener</code> you are adding a <strong>permanent</strong> listener, which immediately gets the current value at the path - and then gets called whenever there are updates under that path.</p>\n<p>When your code later writes to <code>posicioActualRef</code> that seems to update data under the path that you added the listener to. So that triggers another call to your <code>onDataChange</code>, which then updates <code>posicioActualRef</code> again, which triggers an other call to <code>onDataChange</code>, etc.</p>\n<hr />\n<p>If you only want to read the value once and then update a value under it, use <code>addListenerForSingleValueEvent</code> instead of <code>addValueEventListener</code>.</p>\n"}],"owner":{"account_id":27958469,"reputation":1,"user_id":21350818,"display_name":"servidor ocaloka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683642623,"creation_date":1683580955,"question_id":76204446,"body_markdown":"So I&#39;m developing an a Android Studio board game and I&#39;m having an loop that iterates till the piece gets out of the game (the board have 25 boxes so when I get over 25 crash) and I don&#39;t know exactly why.\r\n\r\n\r\nSo in the onCreate I have this code:\r\n```\r\n        String gameName = getIntent().getStringExtra(&quot;nom_partida&quot;);\r\n\r\n        DatabaseReference gamesRef = FirebaseDatabase.getInstance().getReference(&quot;games&quot;);\r\n        Query gameQuery = gamesRef.orderByChild(&quot;name&quot;).equalTo(gameName);\r\n\r\n        //carregar taulell\r\n        loadBoard(gameQuery, gamesRef);\r\n        //carregar peces jugadors atotes les caselles invisibles\r\n        loadPieces();\r\n        //carregar peces de la casella inicia&#241;\r\n        loadPiecesFirstBox();\r\n        //assignar colors designats als jugadors\r\n        loadPlayers(gameName);\r\n\r\n        // Wait for the players to finish loading before continuing with onCreate\r\n        final Handler handler = new Handler();\r\n        handler.postDelayed(new Runnable() {\r\n            @Override\r\n           public void run() { \r\n\r\n                //for (Player player : players) { //recorre els jugadors\r\n                throw(gameName);\r\n\r\n                //}\r\n\r\n\r\n            }\r\n        }, 2000); // Wait for 2 seconds (adjust this time as needed)\r\n\r\n        DatabaseReference gameRef = FirebaseDatabase.getInstance()\r\n                .getReference(&quot;games/&quot; + gameName);\r\n\r\n        gameRef.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n                //TODO: Per tots els usuaris actualitzar la posici&#243;, quan canvii alguna cosa del joc.\r\n                //Prohibit actualitzar la BD en aquest punt.\r\n                Game game = new Game();\r\n                game.setName(gameName);\r\n                game.setCurrentPlayerIndex(0);\r\n\r\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n                String playerId = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n                Log.e(&quot;DEBUG2&quot;, &quot;Han canviat les dades del joc &quot; + playerId);\r\n\r\n                DatabaseReference playerRef = database.getReference(&quot;games/&quot; + gameName + &quot;/players/&quot; + playerId);\r\n                DatabaseReference posicioActualRef = playerRef.child(&quot;actualPosition&quot;);\r\n                Log.e(&quot;posicioActualRef&quot;,posicioActualRef.toString());\r\n                Player jugadorActual = playersMap.get(playerId);\r\n                Integer actualPosition = dataSnapshot.child(&quot;players/&quot;+playerId+&quot;/actualPosition&quot;).getValue(Integer.class);\r\n                Log.e(&quot;actualPosition: &quot;,actualPosition.toString());\r\n\r\n                jugadorActual.setActualPosition(actualPosition);\r\n\r\n                posicioActualCasella = actualPosition;\r\n\r\n                //mostrarCasella(gameName, actualPosition + 1); //mostrar casella actual\r\n                movePiece(jugadorActual);                             //moure pe&#231;a\r\n\r\n            }\r\n```\r\nMethods:\r\n\r\nmovePiece just hide and show the pieces in the board\r\n\r\n\r\n```\r\n    private void movePiece(Player player){\r\n\r\n        //logica del joc aqui\r\n        switch (player.getColor()) {\r\n            case &quot;Blau&quot;:\r\n                blauPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\r\n                blauPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\r\n                break;\r\n            case &quot;Verd&quot;:\r\n                verdPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\r\n                verdPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\r\n                break;\r\n            case &quot;Varmell&quot;:\r\n                varmellPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\r\n                varmellPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\r\n                break;\r\n            case &quot;Groc&quot;:\r\n                grocPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\r\n                grocPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\r\n                break;\r\n            case &quot;Lila&quot;:\r\n                lilaPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\r\n                lilaPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n```\r\n\r\nthrow is executed in the onCreate ( in the run() ) and is who updates the data in the firebase\r\n\r\n```\r\n    private void tirada(String gameName) {\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        String playerId = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n\r\n        DatabaseReference playerRef = database.getReference(&quot;games/&quot;+gameName+&quot;/players/&quot; + playerId);\r\n        DatabaseReference posicioAnteriorRef = playerRef.child(&quot;posicioAnterior&quot;);\r\n        DatabaseReference posicioActualRef = playerRef.child(&quot;actualPosition&quot;);\r\n\r\n        Player player = playersMap.get(playerId);\r\n        int posAnterior = player.getActualPosition();\r\n        player.setActualPosition(player.getActualPosition()+rollDice());\r\n        player.setPosicioAnterior(posAnterior);\r\n        posicioAnteriorRef.setValue(player.getPosicioAnterior());//to firebase\r\n        posicioActualRef.setValue(player.getActualPosition());//to firebase\r\n\r\n\r\n    }\r\n```\r\nAnd this is my firebase structure:\r\n\r\n```&quot;games&quot;: {\r\n    &quot;a&quot;: {\r\n      &quot;board&quot;: {\r\n        &quot;boxes&quot;: [\r\n          {\r\n            &quot;description&quot;: &quot;gggg&quot;,\r\n            &quot;filled&quot;: true,\r\n            &quot;imageUrl&quot;: &quot;https://firebasestorage.googleapis.com/v0/b/ocaloka-3e3f1.appspot.com/o/images%2F1563024d-fd97-4fbb-8ed6-df9bbe5e49f4.jpg?alt=media&amp;token=5a40f91c-c5c4-4211-ad6e-38cad7ba47d5&quot;,\r\n            &quot;title&quot;: &quot;I ggg&quot;\r\n          },\r\n          {\r\n            &quot;description&quot;: &quot;descripciocasellanumero1 casella&quot;,\r\n            &quot;filled&quot;: true,\r\n            &quot;imageUrl&quot;: &quot;https://firebasestorage.googleapis.com/v0/b/ocaloka-3e3f1.appspot.com/o/images%2Feb526feb-6b09-42a1-b112-a9104b707776.jpg?alt=media&amp;token=9c651dfc-ddbb-439f-ba18-e99bd79339cf&quot;,\r\n            &quot;title&quot;: &quot;chippi&quot;\r\n          }\r\n        ],\r\n        &quot;name&quot;: &quot;TaulellPle&quot;,\r\n        &quot;numFilledBoxes&quot;: 25\r\n      },\r\n      &quot;currentPlayerIndex&quot;: 0,\r\n      &quot;name&quot;: &quot;a&quot;,\r\n      &quot;players&quot;: {\r\n        &quot;iSQNMwneHLTeD52y7mb0hu0nYjH2&quot;: {\r\n          &quot;actualPosition&quot;: 0,\r\n          &quot;posicioAnterior&quot;: 0,\r\n          &quot;email&quot;: &quot;homesexe23@gmail.com&quot;,\r\n          &quot;isOwner&quot;: true,\r\n          &quot;name&quot;: &quot;home sexe23&quot;\r\n        }\r\n      },\r\n      &quot;started&quot;: false\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nCould be that maybe im using .getCurrentUser() and this generate a loop somewhere? \r\n```\r\n    private void throw(String gameName) {\r\n\r\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\r\n        String playerId = FirebaseAuth.getInstance().getCurrentUser().getUid();\r\n\r\n        DatabaseReference playerRef = database.getReference(&quot;games/&quot;+gameName+&quot;/players/&quot; + playerId);\r\n        DatabaseReference posicioAnteriorRef = playerRef.child(&quot;posicioAnterior&quot;);\r\n        DatabaseReference posicioActualRef = playerRef.child(&quot;actualPosition&quot;);\r\n\r\n        Player player = playersMap.get(playerId);\r\n        int posAnterior = player.getActualPosition();\r\n        player.setActualPosition(player.getActualPosition()+rollDice());\r\n        player.setPosicioAnterior(posAnterior);\r\n        posicioAnteriorRef.setValue(player.getPosicioAnterior());//pujar firebase\r\n        posicioActualRef.setValue(player.getActualPosition());//pujar firebase\r\n\r\n\r\n    }\r\n```\r\n\r\nThanks!\r\n\r\n\r\n\r\nThe other methods like loadBoard and loadBoxes just paint the load the board and paint the boxes into the board using a addListenerForSingleValueEvent so i dont think is the reason of the infinite loop. If you need to see more information about the project just ask.","title":"Infinite Loop - Firebase real time database - Android Studio","body":"<p>So I'm developing an a Android Studio board game and I'm having an loop that iterates till the piece gets out of the game (the board have 25 boxes so when I get over 25 crash) and I don't know exactly why.</p>\n<p>So in the onCreate I have this code:</p>\n<pre><code>        String gameName = getIntent().getStringExtra(&quot;nom_partida&quot;);\n\n        DatabaseReference gamesRef = FirebaseDatabase.getInstance().getReference(&quot;games&quot;);\n        Query gameQuery = gamesRef.orderByChild(&quot;name&quot;).equalTo(gameName);\n\n        //carregar taulell\n        loadBoard(gameQuery, gamesRef);\n        //carregar peces jugadors atotes les caselles invisibles\n        loadPieces();\n        //carregar peces de la casella inicia\n        loadPiecesFirstBox();\n        //assignar colors designats als jugadors\n        loadPlayers(gameName);\n\n        // Wait for the players to finish loading before continuing with onCreate\n        final Handler handler = new Handler();\n        handler.postDelayed(new Runnable() {\n            @Override\n           public void run() { \n\n                //for (Player player : players) { //recorre els jugadors\n                throw(gameName);\n\n                //}\n\n\n            }\n        }, 2000); // Wait for 2 seconds (adjust this time as needed)\n\n        DatabaseReference gameRef = FirebaseDatabase.getInstance()\n                .getReference(&quot;games/&quot; + gameName);\n\n        gameRef.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n                //TODO: Per tots els usuaris actualitzar la posici, quan canvii alguna cosa del joc.\n                //Prohibit actualitzar la BD en aquest punt.\n                Game game = new Game();\n                game.setName(gameName);\n                game.setCurrentPlayerIndex(0);\n\n                FirebaseDatabase database = FirebaseDatabase.getInstance();\n                String playerId = FirebaseAuth.getInstance().getCurrentUser().getUid();\n                Log.e(&quot;DEBUG2&quot;, &quot;Han canviat les dades del joc &quot; + playerId);\n\n                DatabaseReference playerRef = database.getReference(&quot;games/&quot; + gameName + &quot;/players/&quot; + playerId);\n                DatabaseReference posicioActualRef = playerRef.child(&quot;actualPosition&quot;);\n                Log.e(&quot;posicioActualRef&quot;,posicioActualRef.toString());\n                Player jugadorActual = playersMap.get(playerId);\n                Integer actualPosition = dataSnapshot.child(&quot;players/&quot;+playerId+&quot;/actualPosition&quot;).getValue(Integer.class);\n                Log.e(&quot;actualPosition: &quot;,actualPosition.toString());\n\n                jugadorActual.setActualPosition(actualPosition);\n\n                posicioActualCasella = actualPosition;\n\n                //mostrarCasella(gameName, actualPosition + 1); //mostrar casella actual\n                movePiece(jugadorActual);                             //moure pea\n\n            }\n</code></pre>\n<p>Methods:</p>\n<p>movePiece just hide and show the pieces in the board</p>\n<pre><code>    private void movePiece(Player player){\n\n        //logica del joc aqui\n        switch (player.getColor()) {\n            case &quot;Blau&quot;:\n                blauPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\n                blauPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\n                break;\n            case &quot;Verd&quot;:\n                verdPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\n                verdPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\n                break;\n            case &quot;Varmell&quot;:\n                varmellPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\n                varmellPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\n                break;\n            case &quot;Groc&quot;:\n                grocPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\n                grocPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\n                break;\n            case &quot;Lila&quot;:\n                lilaPieceList.get(player.getPosicioAnterior()).setVisibility(View.INVISIBLE);\n                lilaPieceList.get(player.getActualPosition()).setVisibility(View.VISIBLE);\n                break;\n            default:\n                break;\n        }\n    }\n</code></pre>\n<p>throw is executed in the onCreate ( in the run() ) and is who updates the data in the firebase</p>\n<pre><code>    private void tirada(String gameName) {\n\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\n        String playerId = FirebaseAuth.getInstance().getCurrentUser().getUid();\n\n        DatabaseReference playerRef = database.getReference(&quot;games/&quot;+gameName+&quot;/players/&quot; + playerId);\n        DatabaseReference posicioAnteriorRef = playerRef.child(&quot;posicioAnterior&quot;);\n        DatabaseReference posicioActualRef = playerRef.child(&quot;actualPosition&quot;);\n\n        Player player = playersMap.get(playerId);\n        int posAnterior = player.getActualPosition();\n        player.setActualPosition(player.getActualPosition()+rollDice());\n        player.setPosicioAnterior(posAnterior);\n        posicioAnteriorRef.setValue(player.getPosicioAnterior());//to firebase\n        posicioActualRef.setValue(player.getActualPosition());//to firebase\n\n\n    }\n</code></pre>\n<p>And this is my firebase structure:</p>\n<pre><code>    &quot;a&quot;: {\n      &quot;board&quot;: {\n        &quot;boxes&quot;: [\n          {\n            &quot;description&quot;: &quot;gggg&quot;,\n            &quot;filled&quot;: true,\n            &quot;imageUrl&quot;: &quot;https://firebasestorage.googleapis.com/v0/b/ocaloka-3e3f1.appspot.com/o/images%2F1563024d-fd97-4fbb-8ed6-df9bbe5e49f4.jpg?alt=media&amp;token=5a40f91c-c5c4-4211-ad6e-38cad7ba47d5&quot;,\n            &quot;title&quot;: &quot;I ggg&quot;\n          },\n          {\n            &quot;description&quot;: &quot;descripciocasellanumero1 casella&quot;,\n            &quot;filled&quot;: true,\n            &quot;imageUrl&quot;: &quot;https://firebasestorage.googleapis.com/v0/b/ocaloka-3e3f1.appspot.com/o/images%2Feb526feb-6b09-42a1-b112-a9104b707776.jpg?alt=media&amp;token=9c651dfc-ddbb-439f-ba18-e99bd79339cf&quot;,\n            &quot;title&quot;: &quot;chippi&quot;\n          }\n        ],\n        &quot;name&quot;: &quot;TaulellPle&quot;,\n        &quot;numFilledBoxes&quot;: 25\n      },\n      &quot;currentPlayerIndex&quot;: 0,\n      &quot;name&quot;: &quot;a&quot;,\n      &quot;players&quot;: {\n        &quot;iSQNMwneHLTeD52y7mb0hu0nYjH2&quot;: {\n          &quot;actualPosition&quot;: 0,\n          &quot;posicioAnterior&quot;: 0,\n          &quot;email&quot;: &quot;homesexe23@gmail.com&quot;,\n          &quot;isOwner&quot;: true,\n          &quot;name&quot;: &quot;home sexe23&quot;\n        }\n      },\n      &quot;started&quot;: false\n    }\n  }\n}\n</code></pre>\n<p>Could be that maybe im using .getCurrentUser() and this generate a loop somewhere?</p>\n<pre><code>    private void throw(String gameName) {\n\n        FirebaseDatabase database = FirebaseDatabase.getInstance();\n        String playerId = FirebaseAuth.getInstance().getCurrentUser().getUid();\n\n        DatabaseReference playerRef = database.getReference(&quot;games/&quot;+gameName+&quot;/players/&quot; + playerId);\n        DatabaseReference posicioAnteriorRef = playerRef.child(&quot;posicioAnterior&quot;);\n        DatabaseReference posicioActualRef = playerRef.child(&quot;actualPosition&quot;);\n\n        Player player = playersMap.get(playerId);\n        int posAnterior = player.getActualPosition();\n        player.setActualPosition(player.getActualPosition()+rollDice());\n        player.setPosicioAnterior(posAnterior);\n        posicioAnteriorRef.setValue(player.getPosicioAnterior());//pujar firebase\n        posicioActualRef.setValue(player.getActualPosition());//pujar firebase\n\n\n    }\n</code></pre>\n<p>Thanks!</p>\n<p>The other methods like loadBoard and loadBoxes just paint the load the board and paint the boxes into the board using a addListenerForSingleValueEvent so i dont think is the reason of the infinite loop. If you need to see more information about the project just ask.</p>\n"},{"tags":["java","amazon-web-services","aws-lambda"],"comments":[{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1674863107,"post_id":75263586,"comment_id":132811470,"body_markdown":"Some language-agnostic guidance on [Choosing the right solution for AWS Lambda external parameters](https://aws.amazon.com/blogs/compute/choosing-the-right-solution-for-aws-lambda-external-parameters/).","body":"Some language-agnostic guidance on <a href=\"https://aws.amazon.com/blogs/compute/choosing-the-right-solution-for-aws-lambda-external-parameters/\" rel=\"nofollow noreferrer\">Choosing the right solution for AWS Lambda external parameters</a>."}],"answers":[{"tags":[],"owner":{"account_id":289798,"reputation":567,"user_id":590984,"accept_rate":29,"display_name":"Nick G."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683642314,"creation_date":1683582288,"answer_id":76204562,"question_id":75263586,"body_markdown":"So I guess one really inefficient way to handle that is to actually scatter the environment references in the code:\r\n\r\n```\r\nif (&quot;true&quot;.equalsIgnoreCase(System.getenv(&quot;ENABLE_FEATURE_X&quot;))) {\r\n  // enable the feature\r\n}\r\n```\r\n\r\nIt gets the job done but there are two big side-effects:\r\n* Mocking `System.getenv` is not ideal\r\n* DRY principle is violated\r\n\r\nI wonder if introducing `Env` or `Context` class might be an easy enough workaround?\r\n \r\n```\r\nEnv env = Env.getInstance()\r\nif (env.isFeatureEnabled()) {\r\n  // enable the feature\r\n}\r\n```","title":"Encapsulating AWS Lambda environment variable access in Java code","body":"<p>So I guess one really inefficient way to handle that is to actually scatter the environment references in the code:</p>\n<pre><code>if (&quot;true&quot;.equalsIgnoreCase(System.getenv(&quot;ENABLE_FEATURE_X&quot;))) {\n  // enable the feature\n}\n</code></pre>\n<p>It gets the job done but there are two big side-effects:</p>\n<ul>\n<li>Mocking <code>System.getenv</code> is not ideal</li>\n<li>DRY principle is violated</li>\n</ul>\n<p>I wonder if introducing <code>Env</code> or <code>Context</code> class might be an easy enough workaround?</p>\n<pre><code>Env env = Env.getInstance()\nif (env.isFeatureEnabled()) {\n  // enable the feature\n}\n</code></pre>\n"}],"owner":{"account_id":289798,"reputation":567,"user_id":590984,"accept_rate":29,"display_name":"Nick G."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683642314,"creation_date":1674855361,"question_id":75263586,"body_markdown":"As our AWS Lambda deployment grows, there are more and more scattered environment variables being read via `System.getenv()`. I didn&#39;t find what can be considered the best practice managing all those vars.\r\n\r\nAn obvious solution would be to refactor it to Spring/Guice and use configurers, but considering we keep it as close to plain old java as possible to reduce the JAR size, what can be considered a good strategy encapsulating the configuration? Apache Commons Configuration? Building a custom Configuration/Env class?\r\n\r\nAny suggestions are greatly appreciated!\r\n\r\n","title":"Encapsulating AWS Lambda environment variable access in Java code","body":"<p>As our AWS Lambda deployment grows, there are more and more scattered environment variables being read via <code>System.getenv()</code>. I didn't find what can be considered the best practice managing all those vars.</p>\n<p>An obvious solution would be to refactor it to Spring/Guice and use configurers, but considering we keep it as close to plain old java as possible to reduce the JAR size, what can be considered a good strategy encapsulating the configuration? Apache Commons Configuration? Building a custom Configuration/Env class?</p>\n<p>Any suggestions are greatly appreciated!</p>\n"},{"tags":["java","spring","postgresql","spring-boot"],"comments":[{"owner":{"account_id":101001,"reputation":119808,"user_id":271959,"display_name":"Frank Heikens"},"score":0,"creation_date":1683468907,"post_id":76194392,"comment_id":134368381,"body_markdown":"Offtopic: &quot;timestamp&quot; varchar(20), what is wrong with datatype timestamp? VARCHAR is most likely the worst type you could use for this. And why using epoch? That&#39;s another thing that is going to create issues in the (near) future.","body":"Offtopic: &quot;timestamp&quot; varchar(20), what is wrong with datatype timestamp? VARCHAR is most likely the worst type you could use for this. And why using epoch? That&#39;s another thing that is going to create issues in the (near) future."},{"owner":{"account_id":28512191,"reputation":21,"user_id":21822041,"display_name":"Deepak Mathur"},"score":0,"creation_date":1683470154,"post_id":76194392,"comment_id":134368556,"body_markdown":"Thank you for the suggestion, but my main concern is saving the data into the database based on the number column. Can you please provide any insights on how to achieve this in a Spring Boot application?","body":"Thank you for the suggestion, but my main concern is saving the data into the database based on the number column. Can you please provide any insights on how to achieve this in a Spring Boot application?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1683482950,"post_id":76194392,"comment_id":134370299,"body_markdown":"What is your concern? You marked it as an `@Id` so I don&#39;t see the problem you have here. Onet hing I do so is that there is no transaction and probably nothing will be persisted, no tx, no persistence.","body":"What is your concern? You marked it as an <code>@Id</code> so I don&#39;t see the problem you have here. Onet hing I do so is that there is no transaction and probably nothing will be persisted, no tx, no persistence."}],"answers":[{"comments":[{"owner":{"account_id":28512191,"reputation":21,"user_id":21822041,"display_name":"Deepak Mathur"},"score":0,"creation_date":1683530040,"post_id":76198215,"comment_id":134375065,"body_markdown":"if you have some link of the async project of springboot because i&#39;m working in springboot,please share with me if possible ?","body":"if you have some link of the async project of springboot because i&#39;m working in springboot,please share with me if possible ?"},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1684310641,"post_id":76198215,"comment_id":134498016,"body_markdown":"@DeepakMathur I do not understand the question. Do you mean &quot;link of the async project&quot; or do you mean &quot;link of a async project&quot;?","body":"@DeepakMathur I do not understand the question. Do you mean &quot;link of the async project&quot; or do you mean &quot;link of a async project&quot;?"}],"tags":[],"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683529714,"creation_date":1683529714,"answer_id":76198215,"question_id":76194392,"body_markdown":"The database&#39;s table must have a primary key.","title":"Spring Boot data not persisting in PostgreSQL database","body":"<p>The database's table must have a primary key.</p>\n"}],"owner":{"account_id":28512191,"reputation":21,"user_id":21822041,"display_name":"Deepak Mathur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":265,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76198215,"answer_count":1,"score":0,"last_activity_date":1683642133,"creation_date":1683468141,"question_id":76194392,"body_markdown":"I have a PostgreSQL table created with a query that automatically inserts a timestamp when a new entry is added to the database. I am trying to store data in the table using a Spring Boot application, but the data is not being stored based on the numb column, instead it seems to be using the ID column by default. How can I ensure that the data is stored in the table based on the numb column rather than the ID column?\r\n\r\nThis is my code:\r\n\r\n// database query to create table\r\n\r\n```\r\nCREATE TABLE public.mydb \r\n(\r\n\tnumb varchar(15) NOT NULL,\r\n\t&quot;on_off&quot; varchar(6) NOT NULL,\r\n\t&quot;timestamp&quot; varchar(20) NOT NULL DEFAULT EXTRACT(epoch FROM (now() AT TIME ZONE &#39;utc&#39;::text))\r\n);\r\n```\r\n// controller\r\n\r\n```\r\n   @PostMapping\r\n    public ResponseEntity&lt;String&gt; createUser(@RequestBody User user) {\r\n        System.out.println(Thread.currentThread().getId()+&quot;-----------------------------------&quot;+System.currentTimeMillis()+&quot;----------&quot;+&quot;inside controller&quot;);\r\n        CompletableFuture&lt;User&gt; future = userService.createUser(user);\r\n        String locationUrl = &quot;/status/&quot; + UUID.randomUUID().toString(); // generate a unique URL for the status check\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setLocation(URI.create(locationUrl));\r\n        return new ResponseEntity&lt;&gt;(&quot;&quot;, headers, HttpStatus.OK);\r\n    }\r\n```\r\n// service\r\n\r\n```\r\n  @Override\r\n    @Async(&quot;asyncExecutor&quot;)\r\n    public CompletableFuture&lt;User&gt; createUser(User user) {\r\n        System.out.println(Thread.currentThread().getId()+&quot;-----------------------------------&quot;+System.currentTimeMillis()+&quot;-------------inside services&quot;);\r\n        return CompletableFuture.completedFuture(userRepository.save(user));\r\n    }\r\n```\r\n\r\n// model\r\n\r\n```\r\nimport javax.persistence.*;\r\n\r\n@Entity\r\n@Table(name=&quot;mydb&quot;)\r\npublic class User {\r\n\r\n    @Id\r\n    @Column\r\n    private String numb;\r\n    @Column\r\n    private String on_off;\r\n\r\n    @Column(name = &quot;timestamp&quot;)\r\n    @GeneratedValue\r\n    private String timestamp;\r\n\r\n\r\n    public User(String numb, String on_off) {\r\n        this.numb = numb;\r\n        this.on_off = on_off;\r\n    }\r\n\r\n\r\n    public String getNumb() {\r\n        return numb;\r\n    }\r\n\r\n    public void setNumb(String numb) {\r\n        this.numb = numb;\r\n    }\r\n\r\n    public String getOn_Off() {\r\n        return on_off;\r\n    }\r\n\r\n    public void setOn_Off(String on_off) {\r\n        this.on_off = on_off;\r\n    }\r\n\r\n    public String getTimestamp() {\r\n        return timestamp;\r\n    }\r\n```\r\nThe expectation is to get a solution for storing data in a PostgreSQL table based on a specific column(.i.e. numb) instead of the ID column in a Spring Boot application, which is not happening currently.\r\n\r\n//output\r\n```\r\n21-----------------------------------1683463770492----------inside controller\r\n34-----------------------------------1683463770495-------------inside services\r\nHibernate: select user0_.numb as numb1_0_0_, user0_.on_off as on_off2_0_0_, user0_.timestamp as timestamp3_0_0_ from mydb user0_ where user0_.numb=?\r\n```","title":"Spring Boot data not persisting in PostgreSQL database","body":"<p>I have a PostgreSQL table created with a query that automatically inserts a timestamp when a new entry is added to the database. I am trying to store data in the table using a Spring Boot application, but the data is not being stored based on the numb column, instead it seems to be using the ID column by default. How can I ensure that the data is stored in the table based on the numb column rather than the ID column?</p>\n<p>This is my code:</p>\n<p>// database query to create table</p>\n<pre><code>CREATE TABLE public.mydb \n(\n    numb varchar(15) NOT NULL,\n    &quot;on_off&quot; varchar(6) NOT NULL,\n    &quot;timestamp&quot; varchar(20) NOT NULL DEFAULT EXTRACT(epoch FROM (now() AT TIME ZONE 'utc'::text))\n);\n</code></pre>\n<p>// controller</p>\n<pre><code>   @PostMapping\n    public ResponseEntity&lt;String&gt; createUser(@RequestBody User user) {\n        System.out.println(Thread.currentThread().getId()+&quot;-----------------------------------&quot;+System.currentTimeMillis()+&quot;----------&quot;+&quot;inside controller&quot;);\n        CompletableFuture&lt;User&gt; future = userService.createUser(user);\n        String locationUrl = &quot;/status/&quot; + UUID.randomUUID().toString(); // generate a unique URL for the status check\n        HttpHeaders headers = new HttpHeaders();\n        headers.setLocation(URI.create(locationUrl));\n        return new ResponseEntity&lt;&gt;(&quot;&quot;, headers, HttpStatus.OK);\n    }\n</code></pre>\n<p>// service</p>\n<pre><code>  @Override\n    @Async(&quot;asyncExecutor&quot;)\n    public CompletableFuture&lt;User&gt; createUser(User user) {\n        System.out.println(Thread.currentThread().getId()+&quot;-----------------------------------&quot;+System.currentTimeMillis()+&quot;-------------inside services&quot;);\n        return CompletableFuture.completedFuture(userRepository.save(user));\n    }\n</code></pre>\n<p>// model</p>\n<pre><code>import javax.persistence.*;\n\n@Entity\n@Table(name=&quot;mydb&quot;)\npublic class User {\n\n    @Id\n    @Column\n    private String numb;\n    @Column\n    private String on_off;\n\n    @Column(name = &quot;timestamp&quot;)\n    @GeneratedValue\n    private String timestamp;\n\n\n    public User(String numb, String on_off) {\n        this.numb = numb;\n        this.on_off = on_off;\n    }\n\n\n    public String getNumb() {\n        return numb;\n    }\n\n    public void setNumb(String numb) {\n        this.numb = numb;\n    }\n\n    public String getOn_Off() {\n        return on_off;\n    }\n\n    public void setOn_Off(String on_off) {\n        this.on_off = on_off;\n    }\n\n    public String getTimestamp() {\n        return timestamp;\n    }\n</code></pre>\n<p>The expectation is to get a solution for storing data in a PostgreSQL table based on a specific column(.i.e. numb) instead of the ID column in a Spring Boot application, which is not happening currently.</p>\n<p>//output</p>\n<pre><code>21-----------------------------------1683463770492----------inside controller\n34-----------------------------------1683463770495-------------inside services\nHibernate: select user0_.numb as numb1_0_0_, user0_.on_off as on_off2_0_0_, user0_.timestamp as timestamp3_0_0_ from mydb user0_ where user0_.numb=?\n</code></pre>\n"},{"tags":["java","compilation","iot","thingsboard"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1631467842,"post_id":69153777,"comment_id":122224209,"body_markdown":"This should be posted as question on the [thingsboard github issue page](https://github.com/thingsboard/thingsboard/issues). --- From what I see, i would assume that those are integration tests and java reports that the port (`7070`) is already in use. Either disable the tests (`mvn -DskipTests clean install`) or stop whatever is running on port `7070`.","body":"This should be posted as question on the <a href=\"https://github.com/thingsboard/thingsboard/issues\" rel=\"nofollow noreferrer\">thingsboard github issue page</a>. --- From what I see, i would assume that those are integration tests and java reports that the port (<code>7070</code>) is already in use. Either disable the tests (<code>mvn -DskipTests clean install</code>) or stop whatever is running on port <code>7070</code>."},{"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"score":0,"creation_date":1631468014,"post_id":69153777,"comment_id":122224246,"body_markdown":"#1 Also you can create the issue as @Turing85 said referencing to this question. #2 What is your o.s ?","body":"#1 Also you can create the issue as @Turing85 said referencing to this question. #2 What is your o.s ?"},{"owner":{"account_id":22730562,"reputation":11,"user_id":16893540,"display_name":"tft"},"score":0,"creation_date":1631513638,"post_id":69153777,"comment_id":122232159,"body_markdown":"I added a [bug report](https://github.com/thingsboard/thingsboard/issues/5234) - looks like port 7070 is being used by another application (anydesk).  Would be nice, per the bug report, if all those -D options are documented/listed somewhere.","body":"I added a <a href=\"https://github.com/thingsboard/thingsboard/issues/5234\" rel=\"nofollow noreferrer\">bug report</a> - looks like port 7070 is being used by another application (anydesk).  Would be nice, per the bug report, if all those -D options are documented/listed somewhere."}],"answers":[{"tags":[],"owner":{"account_id":4912982,"reputation":14853,"user_id":3957754,"accept_rate":50,"display_name":"JRichardsz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683642032,"creation_date":1631470177,"answer_id":69154059,"question_id":69153777,"body_markdown":"Your main issue is: **Address already in use**\r\n\r\nReviewing your log, you can see **0.0.0.0/0.0.0.0:7070**\r\n\r\nTo void the same error, try to identify what other application are running at 7070 and kill them. Sometimes is due to previous failed attempts. You only need to list the process and its ports. After that, identify its pid and kill. \r\n\r\n## Linux sample:\r\n\r\n```\r\nnetstat -tulpn\r\n```\r\n[![enter image description here][1]][1]\r\n\r\nSearch the 7070 port and locate its PID to kill it\r\n\r\n```\r\nkill -9 6185\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/StYPB.png","title":"Thingsboard - release-3.3 compile problem","body":"<p>Your main issue is: <strong>Address already in use</strong></p>\n<p>Reviewing your log, you can see <strong>0.0.0.0/0.0.0.0:7070</strong></p>\n<p>To void the same error, try to identify what other application are running at 7070 and kill them. Sometimes is due to previous failed attempts. You only need to list the process and its ports. After that, identify its pid and kill.</p>\n<h2>Linux sample:</h2>\n<pre><code>netstat -tulpn\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/StYPB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/StYPB.png\" alt=\"enter image description here\" /></a></p>\n<p>Search the 7070 port and locate its PID to kill it</p>\n<pre><code>kill -9 6185\n</code></pre>\n"}],"owner":{"account_id":22730562,"reputation":11,"user_id":16893540,"display_name":"tft"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":907,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683642032,"creation_date":1631467727,"question_id":69153777,"body_markdown":"I&#39;m unable to compile release-3.3 on Ubuntu-20.04 -- I get the error noted below.  I followed  the instructions noted on the Thingsboard website; downloaded &#39;release-3.3&#39; source from git and then ran &#39;mvn clean install&#39;.  Am I doing something wrong ??  Can I skip over this step (not interested in Edge anyway).\r\n\r\n        Warning: Nashorn engine is planned to be removed from a future JDK release\r\n    2021-09-12 20:54:53,796 [main] ERROR o.t.s.s.edge.rpc.EdgeGrpcService - Failed to start Edge RPC server!\r\n    java.io.IOException: Failed to bind to address 0.0.0.0/0.0.0.0:7070\r\n            at io.grpc.netty.shaded.io.grpc.netty.NettyServer.start(NettyServer.java:328)\r\n            at io.grpc.internal.ServerImpl.start(ServerImpl.java:179)\r\n            at io.grpc.internal.ServerImpl.start(ServerImpl.java:90)\r\n    ..[skip over many statements similar to above]..\r\n    Caused by: io.grpc.netty.shaded.io.netty.channel.unix.Errors$NativeIoException: bind(..) failed: Address already in use\r\n    2021-09-12 20:54:53,796 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;adminController&#39;: Unsatisfied dependency expressed through field &#39;edgeGrpcService&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;edgeGrpcService&#39;: Invocation of init method failed; nested exception is java.lang.RuntimeException: Failed to start Edge RPC server!\r\n    2021-09-12 20:54:53,813 [main] ERROR o.s.boot.SpringApplication - Application run failed\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;adminController&#39;: Unsatisfied dependency expressed through field &#39;edgeGrpcService&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;edgeGrpcService&#39;: Invocation of init method failed; nested exception is java.lang.RuntimeException: Failed to start Edge RPC server!\r\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\r\n\r\n","title":"Thingsboard - release-3.3 compile problem","body":"<p>I'm unable to compile release-3.3 on Ubuntu-20.04 -- I get the error noted below.  I followed  the instructions noted on the Thingsboard website; downloaded 'release-3.3' source from git and then ran 'mvn clean install'.  Am I doing something wrong ??  Can I skip over this step (not interested in Edge anyway).</p>\n<pre><code>    Warning: Nashorn engine is planned to be removed from a future JDK release\n2021-09-12 20:54:53,796 [main] ERROR o.t.s.s.edge.rpc.EdgeGrpcService - Failed to start Edge RPC server!\njava.io.IOException: Failed to bind to address 0.0.0.0/0.0.0.0:7070\n        at io.grpc.netty.shaded.io.grpc.netty.NettyServer.start(NettyServer.java:328)\n        at io.grpc.internal.ServerImpl.start(ServerImpl.java:179)\n        at io.grpc.internal.ServerImpl.start(ServerImpl.java:90)\n..[skip over many statements similar to above]..\nCaused by: io.grpc.netty.shaded.io.netty.channel.unix.Errors$NativeIoException: bind(..) failed: Address already in use\n2021-09-12 20:54:53,796 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adminController': Unsatisfied dependency expressed through field 'edgeGrpcService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'edgeGrpcService': Invocation of init method failed; nested exception is java.lang.RuntimeException: Failed to start Edge RPC server!\n2021-09-12 20:54:53,813 [main] ERROR o.s.boot.SpringApplication - Application run failed\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'adminController': Unsatisfied dependency expressed through field 'edgeGrpcService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'edgeGrpcService': Invocation of init method failed; nested exception is java.lang.RuntimeException: Failed to start Edge RPC server!\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:660)\n</code></pre>\n"},{"tags":["java","spring","asynchronous","shedlock"],"comments":[{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1683642082,"post_id":76210325,"comment_id":134395730,"body_markdown":"Have you looked into quartz? https://www.baeldung.com/spring-quartz-schedule. It has clustered configuration to ensure only a single node runs a given job","body":"Have you looked into quartz? <a href=\"https://www.baeldung.com/spring-quartz-schedule\" rel=\"nofollow noreferrer\">baeldung.com/spring-quartz-schedule</a>. It has clustered configuration to ensure only a single node runs a given job"},{"owner":{"account_id":2756955,"reputation":371,"user_id":2374752,"accept_rate":70,"display_name":"Robert"},"score":0,"creation_date":1683643429,"post_id":76210325,"comment_id":134396104,"body_markdown":"No. But question is same. Do you think both quartz and shedlock can be suitable for such low period - 1600 ms? Or may be on of them more appropriate. Because as can see for example shedlock&#39;s resolution is seconds","body":"No. But question is same. Do you think both quartz and shedlock can be suitable for such low period - 1600 ms? Or may be on of them more appropriate. Because as can see for example shedlock&#39;s resolution is seconds"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683644656,"post_id":76210325,"comment_id":134396445,"body_markdown":"Have you read Shedlock documentation to see if it appropriate for your needs?","body":"Have you read Shedlock documentation to see if it appropriate for your needs?"},{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":0,"creation_date":1683645769,"post_id":76210325,"comment_id":134396742,"body_markdown":"I&#39;m not familiar with Shedlock, I think Quartz could handle that frequency","body":"I&#39;m not familiar with Shedlock, I think Quartz could handle that frequency"}],"owner":{"account_id":2756955,"reputation":371,"user_id":2374752,"accept_rate":70,"display_name":"Robert"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683641911,"creation_date":1683641911,"question_id":76210325,"body_markdown":"I need to code scheduler which will be run every 1.6s and have access to database across two instances of microservices written on java 11 with use of Spring Boot Framework.\r\n\r\n I have two possible realiazation in my mind:\r\n1. Use shedlock for job which will run every 1.6s\r\n2. Run job every 16s with shedlock and inside such job small async taks.\r\n\r\nCan you help with choice of implementation? Maybe you can offer better variant","title":"Frequent scheduler across multiple instances","body":"<p>I need to code scheduler which will be run every 1.6s and have access to database across two instances of microservices written on java 11 with use of Spring Boot Framework.</p>\n<p>I have two possible realiazation in my mind:</p>\n<ol>\n<li>Use shedlock for job which will run every 1.6s</li>\n<li>Run job every 16s with shedlock and inside such job small async taks.</li>\n</ol>\n<p>Can you help with choice of implementation? Maybe you can offer better variant</p>\n"},{"tags":["java","c#","protocol-buffers","grpc","grpc-java"],"answers":[{"comments":[{"owner":{"account_id":9599886,"reputation":3726,"user_id":7127824,"accept_rate":100,"display_name":"techkuz"},"score":0,"creation_date":1576841190,"post_id":44114782,"comment_id":105035039,"body_markdown":"for those, requiring more info on Java https://grpc.io/docs/reference/java/generated-code/","body":"for those, requiring more info on Java <a href=\"https://grpc.io/docs/reference/java/generated-code/\" rel=\"nofollow noreferrer\">grpc.io/docs/reference/java/generated-code</a>"},{"owner":{"account_id":1779858,"reputation":1828,"user_id":1622880,"accept_rate":43,"display_name":"Francis"},"score":1,"creation_date":1578381912,"post_id":44114782,"comment_id":105410318,"body_markdown":"I had the same problem with C# Server/Client. Initially didn&#39;t click that super class in Java is equivalent to a base class in C#. On 2nd viewing a few hours later, it all made sense. Thanks!","body":"I had the same problem with C# Server/Client. Initially didn&#39;t click that super class in Java is equivalent to a base class in C#. On 2nd viewing a few hours later, it all made sense. Thanks!"}],"tags":[],"owner":{"account_id":8047329,"reputation":879,"user_id":6067153,"display_name":"Alexandru Cancescu"},"comment_count":2,"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1495461446,"creation_date":1495461446,"answer_id":44114782,"question_id":44102096,"body_markdown":"I managed to find the source of the problem. For anyone else having this problem:\r\n\r\n&gt;Make sure your .proto file is identical for both client and server and it has the same package. When the client calls a method on the remote server, it uses the full name of the remote class and the package.\r\n\r\nHowever this was not the reason why the method appeared as unimplemented to the client. It was this:\r\n\r\n    super.login(request,responseStreamObserver);\r\n\r\nCalling the super method login sends an async UNIMPLEMENTED error code back to the client. This is the login() method in the generated class:\r\n\r\n    public void login(LoginUserDTO request,StreamObserver&lt;Response&gt; responseObserver) {\r\n              asyncUnimplementedUnaryCall(METHOD_LOGIN, responseObserver);\r\n    }\r\n\r\n&gt;So make sure in the implementation of your service methods you don&#39;t call the super method as it will appear to the client as UNIMPLEMENTED. If you generate @Override methods using IntelliJ IDEA it will add the super method call. Make sure to delete it.\r\n\r\n","title":"Grpc.Core.RpcException method is unimplemented with C# client and Java Server","body":"<p>I managed to find the source of the problem. For anyone else having this problem:</p>\n\n<blockquote>\n  <p>Make sure your .proto file is identical for both client and server and it has the same package. When the client calls a method on the remote server, it uses the full name of the remote class and the package.</p>\n</blockquote>\n\n<p>However this was not the reason why the method appeared as unimplemented to the client. It was this:</p>\n\n<pre><code>super.login(request,responseStreamObserver);\n</code></pre>\n\n<p>Calling the super method login sends an async UNIMPLEMENTED error code back to the client. This is the login() method in the generated class:</p>\n\n<pre><code>public void login(LoginUserDTO request,StreamObserver&lt;Response&gt; responseObserver) {\n          asyncUnimplementedUnaryCall(METHOD_LOGIN, responseObserver);\n}\n</code></pre>\n\n<blockquote>\n  <p>So make sure in the implementation of your service methods you don't call the super method as it will appear to the client as UNIMPLEMENTED. If you generate @Override methods using IntelliJ IDEA it will add the super method call. Make sure to delete it.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2433275,"reputation":414,"user_id":2123747,"display_name":"barnwaldo"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609100962,"creation_date":1609100962,"answer_id":65470155,"question_id":44102096,"body_markdown":"Thanks to Alexandru - this helped solve my problem with Akka gRPC client and Python grPC server. In my case, I had same packages and preamble in .proto file but had eliminated message classes and gRPC functions not needed for this specific use case in the Python gRPC server. When I made the .proto files identical, everything worked and I no longer received UNIMPLEMENTED errors. This is needed for languages beyond the C#/Java example cited. Thanks again.","title":"Grpc.Core.RpcException method is unimplemented with C# client and Java Server","body":"<p>Thanks to Alexandru - this helped solve my problem with Akka gRPC client and Python grPC server. In my case, I had same packages and preamble in .proto file but had eliminated message classes and gRPC functions not needed for this specific use case in the Python gRPC server. When I made the .proto files identical, everything worked and I no longer received UNIMPLEMENTED errors. This is needed for languages beyond the C#/Java example cited. Thanks again.</p>\n"},{"comments":[{"owner":{"account_id":138808,"reputation":371,"user_id":343987,"display_name":"Heitor Corr&#234;a"},"score":0,"creation_date":1626449108,"post_id":66757184,"comment_id":120904227,"body_markdown":"This was exactly my problem, I had splitted in 2 different protos and forgot to register the new one.","body":"This was exactly my problem, I had splitted in 2 different protos and forgot to register the new one."},{"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"score":0,"creation_date":1666613772,"post_id":66757184,"comment_id":130971424,"body_markdown":"Gaaaa.  I&#39;m a newbie!  And this was my newbie snapfu. Thanks.","body":"Gaaaa.  I&#39;m a newbie!  And this was my newbie snapfu. Thanks."},{"owner":{"account_id":18593556,"reputation":107,"user_id":13550201,"display_name":"iarunpaul"},"score":0,"creation_date":1679235795,"post_id":66757184,"comment_id":133681118,"body_markdown":"app.MapGrpcService&lt;GreeterService&gt;();\n\napp.MapGrpcService&lt;ProductsAppService&gt;();","body":"app.MapGrpcService&lt;GreeterService&gt;();  app.MapGrpcService&lt;ProductsAppService&gt;();"}],"tags":[],"owner":{"account_id":6315619,"reputation":721,"user_id":4905704,"display_name":"Leonid Pavlov"},"comment_count":3,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1616472735,"creation_date":1616472735,"answer_id":66757184,"question_id":44102096,"body_markdown":"For me it was that I forget adding endpoint of gRpc service in startup class.\r\n\r\n        public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\r\n        {\r\n            if (env.IsDevelopment())\r\n            {\r\n                app.UseDeveloperExceptionPage();\r\n            }\r\n\r\n            app.UseRouting();\r\n\r\n            app.UseEndpoints(endpoints =&gt;\r\n            {\r\n                endpoints.MapGrpcService&lt;GreeterService&gt;();\r\n\r\n                //Add your endpoint here like this\r\n                endpoints.MapGrpcService&lt;YourProtoService&gt;();\r\n            });\r\n        \r\n\r\n","title":"Grpc.Core.RpcException method is unimplemented with C# client and Java Server","body":"<p>For me it was that I forget adding endpoint of gRpc service in startup class.</p>\n<pre><code>    public void Configure(IApplicationBuilder app, IWebHostEnvironment env)\n    {\n        if (env.IsDevelopment())\n        {\n            app.UseDeveloperExceptionPage();\n        }\n\n        app.UseRouting();\n\n        app.UseEndpoints(endpoints =&gt;\n        {\n            endpoints.MapGrpcService&lt;GreeterService&gt;();\n\n            //Add your endpoint here like this\n            endpoints.MapGrpcService&lt;YourProtoService&gt;();\n        });\n    \n</code></pre>\n"},{"comments":[{"owner":{"account_id":7322934,"reputation":877,"user_id":5578333,"display_name":"Rodolfo Luna"},"score":1,"creation_date":1691074380,"post_id":68031153,"comment_id":135445119,"body_markdown":"God, Thank you.","body":"God, Thank you."}],"tags":[],"owner":{"account_id":4385387,"reputation":482,"user_id":5303819,"display_name":"Pavel M."},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1624001728,"creation_date":1624001728,"answer_id":68031153,"question_id":44102096,"body_markdown":"For me, using the C# client, the problem was that **I wasn&#39;t overriding** the generated service method.","title":"Grpc.Core.RpcException method is unimplemented with C# client and Java Server","body":"<p>For me, using the C# client, the problem was that <strong>I wasn't overriding</strong> the generated service method.</p>\n"},{"tags":[],"owner":{"account_id":2451099,"reputation":911,"user_id":2137378,"display_name":"Amin Heydari Alashti"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1636745713,"creation_date":1636745713,"answer_id":69948226,"question_id":44102096,"body_markdown":"My server and client were both java, and the problem was removed after closing and opening the project in IntelliJ!!","title":"Grpc.Core.RpcException method is unimplemented with C# client and Java Server","body":"<p>My server and client were both java, and the problem was removed after closing and opening the project in IntelliJ!!</p>\n"},{"tags":[],"owner":{"account_id":4841325,"reputation":304,"user_id":3906281,"display_name":"Shneor"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683641679,"creation_date":1677398443,"answer_id":75570678,"question_id":44102096,"body_markdown":"In my case, the problem was on the Server Side\r\n```\r\nvar builder = WebApplication.CreateBuilder(args);\r\n\r\nbuilder.Services.AddGrpc();\r\n\r\nbuilder.Services.AddMemoryCache();\r\n\r\nbuilder.Logging.AddConsole();\r\n\r\n//this 3 lines was missed (before builder.Build()):\r\n\r\n    builder.Services.AddCodeFirstGrpc(config =&gt;\r\n    {\r\n     config.ResponseCompressionLevel = System.IO.Compression.CompressionLevel.Optimal;\r\n    });\r\n\r\nvar app = builder.Build();\r\n```","title":"Grpc.Core.RpcException method is unimplemented with C# client and Java Server","body":"<p>In my case, the problem was on the Server Side</p>\n<pre><code>var builder = WebApplication.CreateBuilder(args);\n\nbuilder.Services.AddGrpc();\n\nbuilder.Services.AddMemoryCache();\n\nbuilder.Logging.AddConsole();\n\n//this 3 lines was missed (before builder.Build()):\n\n    builder.Services.AddCodeFirstGrpc(config =&gt;\n    {\n     config.ResponseCompressionLevel = System.IO.Compression.CompressionLevel.Optimal;\n    });\n\nvar app = builder.Build();\n</code></pre>\n"}],"owner":{"account_id":8047329,"reputation":879,"user_id":6067153,"display_name":"Alexandru Cancescu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27230,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":44114782,"answer_count":6,"score":19,"last_activity_date":1683641679,"creation_date":1495403049,"question_id":44102096,"body_markdown":"I am having trouble finding the source of this error. I implemented a simple service using protobuf:\r\n\r\n    syntax = &quot;proto3&quot;;\r\n    \r\n    package tourism;\r\n    \r\n    service RemoteService {\r\n      rpc Login(LoginUserDTO) returns (Response) {}\r\n    }\r\n    \r\n    message AgencyDTO{\r\n      int32 id=1;\r\n      string name=2;\r\n      string email=3;\r\n      string password=4;\r\n    }\r\n    \r\n    message LoginUserDTO{\r\n      string password=1;\r\n      string email=2;\r\n    }\r\n    \r\n    message SearchAttractionsDTO{\r\n      string name=1;\r\n      int32 start_hour=2;\r\n      int32 start_minute=3;\r\n      int32 stop_hour=4;\r\n      int32 stop_minute=5;\r\n      AgencyDTO loggedUser=6;\r\n    }\r\n    \r\n    message AttractionDTO{\r\n      int32 id=1;\r\n      string name=2;\r\n      string agency=3;\r\n      int32 hour=4;\r\n      int32 minute=5;\r\n      int32 seats=6;\r\n      int32 price=7;\r\n    }\r\n    \r\n    message ReservationDTO{\r\n      int32 id=1;\r\n      string first_name=2;\r\n      string last_name=3;\r\n      string phone=4;\r\n      int32 seats=5;\r\n      AttractionDTO attraction=6;\r\n      AgencyDTO agency=7;\r\n    }\r\n    \r\n    message Response{\r\n      enum ResponseType{\r\n        OK=0;\r\n        NOT_LOGGED_ID=1;\r\n        SERVER_ERROR=2;\r\n        VALIDATOR_ERROR=3;\r\n      }\r\n      ResponseType type=1;\r\n      AgencyDTO user=2;\r\n      string message=3;\r\n    }\r\n\r\nWhen using a java client everything works fine, the server receives the request and responds appropriately. When using C# with the same .proto file for generating sources at the client.Login() I get the following errror: Grpc.Core.RpcException Status(StatusCode=Unimplemented, Detail=&quot;Method tourism.RemoteService/Login is unimplemented&quot;). The server receives the request but does not have time to respond and throws:\r\n\r\n    INFO: Request from ex@ex.com\r\n    May 22, 2017 12:28:58 AM io.grpc.internal.SerializingExecutor run\r\n    SEVERE: Exception while executing runnable io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$2@4be43082\r\n    java.lang.IllegalStateException: call is closed\r\n    \tat com.google.common.base.Preconditions.checkState(Preconditions.java:174)\r\n    \tat io.grpc.internal.ServerCallImpl.sendHeaders(ServerCallImpl.java:103)\r\n    \tat io.grpc.stub.ServerCalls$ServerCallStreamObserverImpl.onNext(ServerCalls.java:282)\r\n    \tat ServiceImp.login(ServiceImp.java:20)\r\n    \tat tourism.RemoteServiceGrpc$MethodHandlers.invoke(RemoteServiceGrpc.java:187)\r\n    \tat io.grpc.stub.ServerCalls$1$1.onHalfClose(ServerCalls.java:148)\r\n    \tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:262)\r\n    \tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$2.runInContext(ServerImpl.java:572)\r\n    \tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:52)\r\n    \tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:117)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nJava server:\r\n\r\n    import io.grpc.Server;\r\n    import io.grpc.ServerBuilder;\r\n    import io.grpc.stub.StreamObserver;\r\n    import tourism.RemoteServiceGrpc;\r\n    import tourism.Service;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.logging.Level;\r\n    import java.util.logging.Logger;\r\n    \r\n    /**\r\n     * Created by Andu on 21/05/2017.\r\n     */\r\n    public class ServerGrpc {\r\n        Logger logger= Logger.getLogger(ServerGrpc.class.getName());\r\n        private final Server server;\r\n        private final int port;\r\n    \r\n        public ServerGrpc(int p){\r\n            port=p;\r\n            server= ServerBuilder.forPort(port).addService(new ServiceImp()).build();\r\n        }\r\n    \r\n        public void start() throws IOException {\r\n            server.start();\r\n            logger.info(&quot;Server started, listening on &quot; + port);\r\n            Runtime.getRuntime().addShutdownHook(new Thread() {\r\n                @Override\r\n                public void run() {\r\n                    // Use stderr here since the logger may has been reset by its JVM shutdown hook.\r\n                    System.err.println(&quot;*** shutting down gRPC server since JVM is shutting down&quot;);\r\n                    ServerGrpc.this.stop();\r\n                    System.err.println(&quot;*** server shut down&quot;);\r\n                }\r\n            });\r\n        }\r\n    \r\n        public void stop() {\r\n            if (server != null) {\r\n                server.shutdown();\r\n            }\r\n        }\r\n    \r\n        void blockUntilShutdown() throws InterruptedException {\r\n            if (server != null) {\r\n                server.awaitTermination();\r\n            }\r\n        }\r\n    \r\n        private class ServiceImp extends RemoteServiceGrpc.RemoteServiceImplBase {\r\n            Logger log=Logger.getLogger(ServiceImp.class.getName());\r\n    \r\n            @Override\r\n            public void login(Service.LoginUserDTO request, StreamObserver&lt;Service.Response&gt; responseStreamObserver){\r\n                super.login(request,responseStreamObserver);\r\n                log.log(Level.INFO,&quot;Request from &quot;+request.getEmail());\r\n                Service.Response response= Service.Response.newBuilder().setMessage(&quot;Hello &quot;+request.getEmail()+&quot;, I know your password: &quot;+request.getPassword()).build();\r\n                responseStreamObserver.onNext(response);\r\n                responseStreamObserver.onCompleted();\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nC# Client:\r\n\r\n    namespace testGrpc2\r\n    {\r\n        class MainClass\r\n        {\r\n            public static void Main(string[] args)\r\n            {\r\n                var channel = new Channel(&quot;127.0.0.1:61666&quot;,ChannelCredentials.Insecure);\r\n                var client = new RemoteService.RemoteServiceClient(channel);\r\n                Response response=client.Login(new LoginUserDTO{Email=&quot;ex@ex.com&quot;,Password=&quot;notmypassword&quot;});\r\n                Console.WriteLine(response);\r\n                Console.ReadKey();\r\n            }\r\n        }\r\n    } ","title":"Grpc.Core.RpcException method is unimplemented with C# client and Java Server","body":"<p>I am having trouble finding the source of this error. I implemented a simple service using protobuf:</p>\n\n<pre><code>syntax = \"proto3\";\n\npackage tourism;\n\nservice RemoteService {\n  rpc Login(LoginUserDTO) returns (Response) {}\n}\n\nmessage AgencyDTO{\n  int32 id=1;\n  string name=2;\n  string email=3;\n  string password=4;\n}\n\nmessage LoginUserDTO{\n  string password=1;\n  string email=2;\n}\n\nmessage SearchAttractionsDTO{\n  string name=1;\n  int32 start_hour=2;\n  int32 start_minute=3;\n  int32 stop_hour=4;\n  int32 stop_minute=5;\n  AgencyDTO loggedUser=6;\n}\n\nmessage AttractionDTO{\n  int32 id=1;\n  string name=2;\n  string agency=3;\n  int32 hour=4;\n  int32 minute=5;\n  int32 seats=6;\n  int32 price=7;\n}\n\nmessage ReservationDTO{\n  int32 id=1;\n  string first_name=2;\n  string last_name=3;\n  string phone=4;\n  int32 seats=5;\n  AttractionDTO attraction=6;\n  AgencyDTO agency=7;\n}\n\nmessage Response{\n  enum ResponseType{\n    OK=0;\n    NOT_LOGGED_ID=1;\n    SERVER_ERROR=2;\n    VALIDATOR_ERROR=3;\n  }\n  ResponseType type=1;\n  AgencyDTO user=2;\n  string message=3;\n}\n</code></pre>\n\n<p>When using a java client everything works fine, the server receives the request and responds appropriately. When using C# with the same .proto file for generating sources at the client.Login() I get the following errror: Grpc.Core.RpcException Status(StatusCode=Unimplemented, Detail=\"Method tourism.RemoteService/Login is unimplemented\"). The server receives the request but does not have time to respond and throws:</p>\n\n<pre><code>INFO: Request from ex@ex.com\nMay 22, 2017 12:28:58 AM io.grpc.internal.SerializingExecutor run\nSEVERE: Exception while executing runnable io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$2@4be43082\njava.lang.IllegalStateException: call is closed\n    at com.google.common.base.Preconditions.checkState(Preconditions.java:174)\n    at io.grpc.internal.ServerCallImpl.sendHeaders(ServerCallImpl.java:103)\n    at io.grpc.stub.ServerCalls$ServerCallStreamObserverImpl.onNext(ServerCalls.java:282)\n    at ServiceImp.login(ServiceImp.java:20)\n    at tourism.RemoteServiceGrpc$MethodHandlers.invoke(RemoteServiceGrpc.java:187)\n    at io.grpc.stub.ServerCalls$1$1.onHalfClose(ServerCalls.java:148)\n    at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:262)\n    at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$2.runInContext(ServerImpl.java:572)\n    at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:52)\n    at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:117)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>Java server:</p>\n\n<pre><code>import io.grpc.Server;\nimport io.grpc.ServerBuilder;\nimport io.grpc.stub.StreamObserver;\nimport tourism.RemoteServiceGrpc;\nimport tourism.Service;\n\nimport java.io.IOException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\n/**\n * Created by Andu on 21/05/2017.\n */\npublic class ServerGrpc {\n    Logger logger= Logger.getLogger(ServerGrpc.class.getName());\n    private final Server server;\n    private final int port;\n\n    public ServerGrpc(int p){\n        port=p;\n        server= ServerBuilder.forPort(port).addService(new ServiceImp()).build();\n    }\n\n    public void start() throws IOException {\n        server.start();\n        logger.info(\"Server started, listening on \" + port);\n        Runtime.getRuntime().addShutdownHook(new Thread() {\n            @Override\n            public void run() {\n                // Use stderr here since the logger may has been reset by its JVM shutdown hook.\n                System.err.println(\"*** shutting down gRPC server since JVM is shutting down\");\n                ServerGrpc.this.stop();\n                System.err.println(\"*** server shut down\");\n            }\n        });\n    }\n\n    public void stop() {\n        if (server != null) {\n            server.shutdown();\n        }\n    }\n\n    void blockUntilShutdown() throws InterruptedException {\n        if (server != null) {\n            server.awaitTermination();\n        }\n    }\n\n    private class ServiceImp extends RemoteServiceGrpc.RemoteServiceImplBase {\n        Logger log=Logger.getLogger(ServiceImp.class.getName());\n\n        @Override\n        public void login(Service.LoginUserDTO request, StreamObserver&lt;Service.Response&gt; responseStreamObserver){\n            super.login(request,responseStreamObserver);\n            log.log(Level.INFO,\"Request from \"+request.getEmail());\n            Service.Response response= Service.Response.newBuilder().setMessage(\"Hello \"+request.getEmail()+\", I know your password: \"+request.getPassword()).build();\n            responseStreamObserver.onNext(response);\n            responseStreamObserver.onCompleted();\n        }\n    }\n\n}\n</code></pre>\n\n<p>C# Client:</p>\n\n<pre><code>namespace testGrpc2\n{\n    class MainClass\n    {\n        public static void Main(string[] args)\n        {\n            var channel = new Channel(\"127.0.0.1:61666\",ChannelCredentials.Insecure);\n            var client = new RemoteService.RemoteServiceClient(channel);\n            Response response=client.Login(new LoginUserDTO{Email=\"ex@ex.com\",Password=\"notmypassword\"});\n            Console.WriteLine(response);\n            Console.ReadKey();\n        }\n    }\n} \n</code></pre>\n"},{"tags":["java","intellij-idea","junit"],"answers":[{"tags":[],"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683641431,"creation_date":1683639963,"answer_id":76210051,"question_id":76209648,"body_markdown":"Please open &quot;Settings/Preferences | Build, Execution, Deployment | Coverage&quot; and select the needed option.\r\n\r\nHere is Jetbrains documentation https://www.jetbrains.com/help/idea/configuring-code-coverage-measurement.html\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OHfy8.png","title":"How do I reset code coverage in IntelliJ, not hide it?","body":"<p>Please open &quot;Settings/Preferences | Build, Execution, Deployment | Coverage&quot; and select the needed option.</p>\n<p>Here is Jetbrains documentation <a href=\"https://www.jetbrains.com/help/idea/configuring-code-coverage-measurement.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/configuring-code-coverage-measurement.html</a></p>\n<p><a href=\"https://i.stack.imgur.com/OHfy8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OHfy8.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":1611562,"reputation":11552,"user_id":1490322,"accept_rate":71,"display_name":"Jose Martinez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76210051,"answer_count":1,"score":1,"last_activity_date":1683641431,"creation_date":1683637226,"question_id":76209648,"body_markdown":"After running unit tests with code coverage, I used to get a pop up that asked if I would like to add to existing code coverage or reset it then add the new coverage.  I accidentally clicked on &quot;do not ask again&quot; and now it always just adds to existing code coverage.  \r\n\r\nBut now I would like to clear my code coverage numbers, reset it to 0 lines covered.  When I search online and in SO all I find is answers to hide the code coverage, not reset it to 0 lines covered.  How exactly do I get the IDE to either ask me like it used to, if I would like to reset the code coverage after running a test, or how can I manually just reset the code coverage.  This is not about hiding it, this is about resetting it to 0 lines covered.","title":"How do I reset code coverage in IntelliJ, not hide it?","body":"<p>After running unit tests with code coverage, I used to get a pop up that asked if I would like to add to existing code coverage or reset it then add the new coverage.  I accidentally clicked on &quot;do not ask again&quot; and now it always just adds to existing code coverage.</p>\n<p>But now I would like to clear my code coverage numbers, reset it to 0 lines covered.  When I search online and in SO all I find is answers to hide the code coverage, not reset it to 0 lines covered.  How exactly do I get the IDE to either ask me like it used to, if I would like to reset the code coverage after running a test, or how can I manually just reset the code coverage.  This is not about hiding it, this is about resetting it to 0 lines covered.</p>\n"},{"tags":["java","android","macos","file","jsoup"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1683650291,"post_id":76210242,"comment_id":134397889,"body_markdown":"No. That is not possible in that way. Make a Windows share of the directory on Mac.","body":"No. That is not possible in that way. Make a Windows share of the directory on Mac."}],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683641361,"creation_date":1683641361,"question_id":76210242,"body_markdown":"I&#39;m developing an android application.\r\n\r\nI need to make my external android device connected to my mac(they are also on the same wifi network), can read a local file which is on the mac.\r\n\r\nDo I have to open any doors?\r\n\r\nMove the file to a specific dir so it can be seen by the smartphone.\r\n\r\nCan you give me a hand?\r\n\r\n```java\r\ntry {\r\n            values = new getPack(&quot;&quot;).getInfo();\r\n        } catch (ExecutionException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n```\r\n\r\n```java\r\nclass getPack {\r\n    private String baseURL = &quot;file:///Users/nameUser/Desktop/nameDir/file.html&quot;;\r\n    private String finalURL = &quot;&quot;;\r\n    String thePack;\r\n\r\n    public getPack(String idP) throws ExecutionException, InterruptedException {\r\n        id = &quot;&quot;;\r\n        finalURL = baseURL + id;\r\n        thePack = new GetDirectorInfo().execute().get();\r\n    }\r\n\r\n    public String getInfo() {\r\n        return thePack;\r\n    }\r\n\r\n    private class GetDirectorInfo extends AsyncTask&lt;Void, Void, String&gt; {\r\n        @Override\r\n        protected String doInBackground(Void... params) {\r\n            String text = &quot;&quot;;\r\n            try {\r\n                //Document document = Jsoup.connect(finalURL).get();\r\n                File input = new File(finalURL);\r\n                Document document = Jsoup.parse(input, &quot;UTF-8&quot;);\r\n                Element primaryStatus = document.getElementById(&quot;primaryStatus&quot;);\r\n                text = primaryStatus.text();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n            return text;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nerror:\r\n\r\n`java.io.FileNotFoundException: Users/nameUser/Desktop/nameDir/file.html: open failed: ENOENT (No such file or directory)\r\n`","title":"Android java read files with Jsoup.parse located on the mac locally on a connected external device","body":"<p>I'm developing an android application.</p>\n<p>I need to make my external android device connected to my mac(they are also on the same wifi network), can read a local file which is on the mac.</p>\n<p>Do I have to open any doors?</p>\n<p>Move the file to a specific dir so it can be seen by the smartphone.</p>\n<p>Can you give me a hand?</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n            values = new getPack(&quot;&quot;).getInfo();\n        } catch (ExecutionException e) {\n            throw new RuntimeException(e);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class getPack {\n    private String baseURL = &quot;file:///Users/nameUser/Desktop/nameDir/file.html&quot;;\n    private String finalURL = &quot;&quot;;\n    String thePack;\n\n    public getPack(String idP) throws ExecutionException, InterruptedException {\n        id = &quot;&quot;;\n        finalURL = baseURL + id;\n        thePack = new GetDirectorInfo().execute().get();\n    }\n\n    public String getInfo() {\n        return thePack;\n    }\n\n    private class GetDirectorInfo extends AsyncTask&lt;Void, Void, String&gt; {\n        @Override\n        protected String doInBackground(Void... params) {\n            String text = &quot;&quot;;\n            try {\n                //Document document = Jsoup.connect(finalURL).get();\n                File input = new File(finalURL);\n                Document document = Jsoup.parse(input, &quot;UTF-8&quot;);\n                Element primaryStatus = document.getElementById(&quot;primaryStatus&quot;);\n                text = primaryStatus.text();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n            return text;\n        }\n    }\n}\n</code></pre>\n<p>error:</p>\n<p><code>java.io.FileNotFoundException: Users/nameUser/Desktop/nameDir/file.html: open failed: ENOENT (No such file or directory) </code></p>\n"},{"tags":["java","docker","tomcat"],"comments":[{"owner":{"account_id":7856890,"reputation":421,"user_id":5938409,"display_name":"bipin"},"score":0,"creation_date":1683110923,"post_id":76162935,"comment_id":134315311,"body_markdown":"share your DockerFile code","body":"share your DockerFile code"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1683110929,"post_id":76162935,"comment_id":134315314,"body_markdown":"Your war file was deployed correctly, but the url (the path, specifically) that you use to access it is not correct. Unfortunately I have no idea what the correct path would be based on the information in this question.","body":"Your war file was deployed correctly, but the url (the path, specifically) that you use to access it is not correct. Unfortunately I have no idea what the correct path would be based on the information in this question."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1683111035,"post_id":76162935,"comment_id":134315326,"body_markdown":"@bipin it&#39;s at the top of the question","body":"@bipin it&#39;s at the top of the question"},{"owner":{"account_id":7856890,"reputation":421,"user_id":5938409,"display_name":"bipin"},"score":0,"creation_date":1683111147,"post_id":76162935,"comment_id":134315345,"body_markdown":"@f1sh sorry missed that","body":"@f1sh sorry missed that"},{"owner":{"account_id":27722677,"reputation":11,"user_id":21162882,"display_name":"Natasha"},"score":0,"creation_date":1683111221,"post_id":76162935,"comment_id":134315362,"body_markdown":"@bipin FROM tomcat:9\n            COPY ATI-0.0.1-SNAPSHOT.war /usr/local/tomcat/webapps/ATI-0.0.1- \nSNAPSHOT.war\n            CMD [&quot;catalina.sh&quot;, &quot;run&quot;]","body":"@bipin FROM tomcat:9             COPY ATI-0.0.1-SNAPSHOT.war /usr/local/tomcat/webapps/ATI-0.0.1-  SNAPSHOT.war             CMD [&quot;catalina.sh&quot;, &quot;run&quot;]"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1683113327,"post_id":76162935,"comment_id":134315781,"body_markdown":"Have you considered generating an executable Spring Boot JAR and running that instead (in a Java image)","body":"Have you considered generating an executable Spring Boot JAR and running that instead (in a Java image)"},{"owner":{"account_id":27722677,"reputation":11,"user_id":21162882,"display_name":"Natasha"},"score":1,"creation_date":1683115023,"post_id":76162935,"comment_id":134316222,"body_markdown":"@Mark Rotteveel\nYes, I tried, but I ran into an error : Unrecognized option: - jar\n\nError: Could not create the Java Virtual Machine. But maybe I should have studied this question better","body":"@Mark Rotteveel Yes, I tried, but I ran into an error : Unrecognized option: - jar  Error: Could not create the Java Virtual Machine. But maybe I should have studied this question better"},{"owner":{"account_id":27940466,"reputation":70,"user_id":21336593,"display_name":"David"},"score":0,"creation_date":1683120270,"post_id":76162935,"comment_id":134317627,"body_markdown":"package it as jar using spring boots own tomcat. no point messing with war and another tomcat, unless you need to. build it on for example amazoncorretto image, so your jar will execute properly.","body":"package it as jar using spring boots own tomcat. no point messing with war and another tomcat, unless you need to. build it on for example amazoncorretto image, so your jar will execute properly."}],"answers":[{"comments":[{"owner":{"account_id":27722677,"reputation":11,"user_id":21162882,"display_name":"Natasha"},"score":0,"creation_date":1683284804,"post_id":76164238,"comment_id":134346811,"body_markdown":"thanks, I looked and I have version 11","body":"thanks, I looked and I have version 11"},{"owner":{"account_id":7301886,"reputation":1,"user_id":5674080,"display_name":"Ajay Singh"},"score":0,"creation_date":1683786143,"post_id":76164238,"comment_id":134420430,"body_markdown":"Then you should use Tomcat 10.X","body":"Then you should use Tomcat 10.X"}],"tags":[],"owner":{"account_id":7301886,"reputation":1,"user_id":5674080,"display_name":"Ajay Singh"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683119940,"creation_date":1683119413,"answer_id":76164238,"question_id":76162935,"body_markdown":"Your Dockerfile is correct.\r\n\r\nYou need to check which version of JDK was used to build your WAR file.\r\n\r\nIf the JDK version isn&#39;t supported by Tomcat 9, your application wont run. Tomcat 9 would support JDK 8\r\n\r\nRefer the below link and update your JDK or Tomcat version accordingly\r\nhttps://tomcat.apache.org/whichversion.html","title":"How to deploy spring boot war in Tomcat in Docker container?","body":"<p>Your Dockerfile is correct.</p>\n<p>You need to check which version of JDK was used to build your WAR file.</p>\n<p>If the JDK version isn't supported by Tomcat 9, your application wont run. Tomcat 9 would support JDK 8</p>\n<p>Refer the below link and update your JDK or Tomcat version accordingly\n<a href=\"https://tomcat.apache.org/whichversion.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/whichversion.html</a></p>\n"},{"tags":[],"owner":{"account_id":27722677,"reputation":11,"user_id":21162882,"display_name":"Natasha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683641324,"creation_date":1683641324,"answer_id":76210235,"question_id":76162935,"body_markdown":"as a result, I just deployed the jar in a docker container using dockerfile FROM eclipse-temurin:17-jdk-alpine\r\nVOLUME /tmp\r\nCOPY ATI.jar  ATI.jar\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/ATI.jar&quot;]   the main thing in application.properties in spring.datasource.url is to specify the correct url, I specified the IP of my computer  which I learned with the help of the team ip a in linux","title":"How to deploy spring boot war in Tomcat in Docker container?","body":"<p>as a result, I just deployed the jar in a docker container using dockerfile FROM eclipse-temurin:17-jdk-alpine\nVOLUME /tmp\nCOPY ATI.jar  ATI.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/ATI.jar&quot;]   the main thing in application.properties in spring.datasource.url is to specify the correct url, I specified the IP of my computer  which I learned with the help of the team ip a in linux</p>\n"}],"owner":{"account_id":27722677,"reputation":11,"user_id":21162882,"display_name":"Natasha"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":278,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76210235,"answer_count":2,"score":0,"last_activity_date":1683641324,"creation_date":1683110718,"question_id":76162935,"body_markdown":"here is my dockerfile\r\n```\r\nFROM tomcat:9\r\nCOPY ATI-0.0.1-SNAPSHOT.war /usr/local/tomcat/webapps/ATI-0.0.1-SNAPSHOT.war\r\nCMD [&quot;catalina.sh&quot;, &quot;run&quot;]\r\n```\r\n\r\nhere is my docker logs \r\n[![enter image description here][1]][1]\r\n\r\n\r\nbut no matter which path I type, an error appears\r\n[![enter image description here][2]][2]\r\nTell me, is there something wrong with my dockerfile, or is my program not deployed in docker?\r\n\r\n  [1]: https://i.stack.imgur.com/qiRwl.png\r\n  [2]: https://i.stack.imgur.com/ZpLCH.png","title":"How to deploy spring boot war in Tomcat in Docker container?","body":"<p>here is my dockerfile</p>\n<pre><code>FROM tomcat:9\nCOPY ATI-0.0.1-SNAPSHOT.war /usr/local/tomcat/webapps/ATI-0.0.1-SNAPSHOT.war\nCMD [&quot;catalina.sh&quot;, &quot;run&quot;]\n</code></pre>\n<p>here is my docker logs\n<a href=\"https://i.stack.imgur.com/qiRwl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qiRwl.png\" alt=\"enter image description here\" /></a></p>\n<p>but no matter which path I type, an error appears\n<a href=\"https://i.stack.imgur.com/ZpLCH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZpLCH.png\" alt=\"enter image description here\" /></a>\nTell me, is there something wrong with my dockerfile, or is my program not deployed in docker?</p>\n"},{"tags":["java","xml","android-custom-view","android-custom-attributes"],"owner":{"account_id":14035647,"reputation":851,"user_id":10138416,"display_name":"linker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683641323,"creation_date":1683641323,"question_id":76210234,"body_markdown":"I asked chatGPT to show me how to have an attribute that can take in a collection of drawable references for my `CustomView` via xml \r\n\r\nhere&#39;s what it spat out:\r\n\r\nfor `attrs.xml`:\r\n\r\n    &lt;declare-styleable name=&quot;CustomView&quot;&gt;\r\n        &lt;attr name=&quot;images&quot; format=&quot;reference|reference[]&quot;/&gt;\r\n    &lt;/declare-styleable&gt;\r\n\r\nusage in some `xml` layout:\r\n\r\n    &lt;com.example.CustomView\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:images=&quot;@drawable/icon1,@drawable/icon2,@drawable/icon3&quot; /&gt;\r\n\r\nretrieval via `constructor`:\r\n\r\n    TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CustomView);\r\n    int[] imageIds = a.getResourceIdArray(R.styleable.CustomView_images);\r\n    a.recycle();\r\n\r\nHowever I am getting the error `Can not extract resource from com.android.aaptcompiler.ParsedResource@458c701d`, so I am here to ask **humbly** about how to really get this done (if it&#39;s possible)\r\n","title":"How to define a custom attribute that can take in multiple references or format-types?","body":"<p>I asked chatGPT to show me how to have an attribute that can take in a collection of drawable references for my <code>CustomView</code> via xml</p>\n<p>here's what it spat out:</p>\n<p>for <code>attrs.xml</code>:</p>\n<pre><code>&lt;declare-styleable name=&quot;CustomView&quot;&gt;\n    &lt;attr name=&quot;images&quot; format=&quot;reference|reference[]&quot;/&gt;\n&lt;/declare-styleable&gt;\n</code></pre>\n<p>usage in some <code>xml</code> layout:</p>\n<pre><code>&lt;com.example.CustomView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    app:images=&quot;@drawable/icon1,@drawable/icon2,@drawable/icon3&quot; /&gt;\n</code></pre>\n<p>retrieval via <code>constructor</code>:</p>\n<pre><code>TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CustomView);\nint[] imageIds = a.getResourceIdArray(R.styleable.CustomView_images);\na.recycle();\n</code></pre>\n<p>However I am getting the error <code>Can not extract resource from com.android.aaptcompiler.ParsedResource@458c701d</code>, so I am here to ask <strong>humbly</strong> about how to really get this done (if it's possible)</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1546519726,"post_id":54022578,"comment_id":94881227,"body_markdown":"AFAIR the Android SDK requires Java 7 or 8.","body":"AFAIR the Android SDK requires Java 7 or 8."},{"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"score":0,"creation_date":1546519775,"post_id":54022578,"comment_id":94881254,"body_markdown":"Possible duplicate of [Failed to run sdkmanager --list (Android SDK) with Java 9](https://stackoverflow.com/questions/47150410/failed-to-run-sdkmanager-list-android-sdk-with-java-9)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/47150410/failed-to-run-sdkmanager-list-android-sdk-with-java-9\">Failed to run sdkmanager --list (Android SDK) with Java 9</a>"}],"answers":[{"tags":[],"owner":{"account_id":1188599,"reputation":96,"user_id":1161997,"display_name":"Saravinfotech"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1556741760,"creation_date":1556741413,"answer_id":55942115,"question_id":54022578,"body_markdown":"If java downgrade didn&#39;t work for you try this\r\n\r\nAfter long struggle I was able to figure out the issue, Not sure if this is a valid fix but that did fix it.\r\n\r\n\r\nIn the latest Android studio version 3.4 in  \r\n **C:\\Users\\username\\AppData\\Local\\Android\\Sdk\\tools\\lib\\find_java.bat** on **line 44**\r\nit looks like this \r\n\r\n     for /f &quot;delims=&quot; %%a in (&#39;&quot;%~dps0\\find_java%arch_ext%.exe&quot; -s&#39;) do set java_exe=%a% \r\n\r\nif you give \r\n\r\necho of %~dps0\\find_java%arch_ext%.exe\r\n\r\n this line it is supposed to print the path of  the find_java32.exe or find_java64.exe based on your machine architecture but it adds // slashes in the path just before final finde_javax.exe which was causing an issue. \r\n\r\nso I just modified it to look like below and it worked. \r\n\r\n**&quot;  for /f &quot;delims=&quot; %%a in (&#39;&quot;%~dps0%find_java%arch_ext%.exe&quot; -s&#39;) do set java_exe=%a%  &quot;**\r\n\r\nDo let me know if there is a better solution or if this works for you\r\n","title":"How to fix &#39;No suitable Java found&#39; error in android.bat (android sdk/tools)","body":"<p>If java downgrade didn't work for you try this</p>\n\n<p>After long struggle I was able to figure out the issue, Not sure if this is a valid fix but that did fix it.</p>\n\n<p>In the latest Android studio version 3.4 in<br>\n <strong>C:\\Users\\username\\AppData\\Local\\Android\\Sdk\\tools\\lib\\find_java.bat</strong> on <strong>line 44</strong>\nit looks like this </p>\n\n<pre><code> for /f \"delims=\" %%a in ('\"%~dps0\\find_java%arch_ext%.exe\" -s') do set java_exe=%a% \n</code></pre>\n\n<p>if you give </p>\n\n<p>echo of %~dps0\\find_java%arch_ext%.exe</p>\n\n<p>this line it is supposed to print the path of  the find_java32.exe or find_java64.exe based on your machine architecture but it adds // slashes in the path just before final finde_javax.exe which was causing an issue. </p>\n\n<p>so I just modified it to look like below and it worked. </p>\n\n<p><strong>\"  for /f \"delims=\" %%a in ('\"%~dps0%find_java%arch_ext%.exe\" -s') do set java_exe=%a%  \"</strong></p>\n\n<p>Do let me know if there is a better solution or if this works for you</p>\n"},{"tags":[],"owner":{"account_id":403801,"reputation":6258,"user_id":771768,"display_name":"Carl Walsh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1604130296,"creation_date":1604034263,"answer_id":64602991,"question_id":54022578,"body_markdown":"@Saravinfotech&#39;s answer didn&#39;t work for me but it pointed me at the right place. The double `\\` still called `find_java64.exe` for me, but running that:\r\n\r\n```\r\n$ .\\find_java64.exe -e\r\nFailed to find Java 1.6 (or newer) on your system. [2] The system cannot find the file specified.\r\n```\r\n\r\nEven though `java.exe` was on my path and `JAVA_HOME` was set to my oraclejdk\\current folder. Not worth debugging though.\r\n\r\nI just patched the script with these additions:\r\n```batch\r\nset java_exe=%JAVA_HOME%\\bin\\java.exe\r\n\r\nset javaw_exe=%JAVA_HOME%\\bin\\javaw.exe\r\n```\r\n\r\nand the script stopped complaining.\r\n\r\n---\r\n\r\nLooking back, there might be bigger problems going on. `monkeyrunner.bat` is calling java.exe with arg`-Djava.ext.dirs` instead of `-classpath` which isn&#39;t supported as of JDK9 (?), and even working around that, I&#39;m getting `NoClassDefFoundError`. A recent release of Java 14 seems very incompatible. \r\n\r\n**Installing JDK8 was the fix.**","title":"How to fix &#39;No suitable Java found&#39; error in android.bat (android sdk/tools)","body":"<p>@Saravinfotech's answer didn't work for me but it pointed me at the right place. The double <code>\\</code> still called <code>find_java64.exe</code> for me, but running that:</p>\n<pre><code>$ .\\find_java64.exe -e\nFailed to find Java 1.6 (or newer) on your system. [2] The system cannot find the file specified.\n</code></pre>\n<p>Even though <code>java.exe</code> was on my path and <code>JAVA_HOME</code> was set to my oraclejdk\\current folder. Not worth debugging though.</p>\n<p>I just patched the script with these additions:</p>\n<pre><code>set java_exe=%JAVA_HOME%\\bin\\java.exe\n\nset javaw_exe=%JAVA_HOME%\\bin\\javaw.exe\n</code></pre>\n<p>and the script stopped complaining.</p>\n<hr />\n<p>Looking back, there might be bigger problems going on. <code>monkeyrunner.bat</code> is calling java.exe with arg<code>-Djava.ext.dirs</code> instead of <code>-classpath</code> which isn't supported as of JDK9 (?), and even working around that, I'm getting <code>NoClassDefFoundError</code>. A recent release of Java 14 seems very incompatible.</p>\n<p><strong>Installing JDK8 was the fix.</strong></p>\n"},{"comments":[{"owner":{"account_id":6961530,"reputation":61,"user_id":5340777,"display_name":"Dodda Venkata"},"score":0,"creation_date":1619762665,"post_id":66085078,"comment_id":119007542,"body_markdown":"I installed jdk16 and even i was getting the same error. but adding the jre path and moving this path to top helped me fix the issue","body":"I installed jdk16 and even i was getting the same error. but adding the jre path and moving this path to top helped me fix the issue"}],"tags":[],"owner":{"account_id":15012948,"reputation":926,"user_id":10837620,"display_name":"Atul KS"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1612678519,"creation_date":1612678519,"answer_id":66085078,"question_id":54022578,"body_markdown":"Found a solution which **DON&#39;T NEED ONE TO DOWNGRADE TO JAVA 8** so, there is option for JRE to run VM for &quot;uiautomatorviewer&quot;.\r\n\r\nOne needs to install Android Studio and add the below location to &quot;path&quot; System Variable\r\n\r\n    C:\\Program Files\\Android\\Android Studio\\jre\\bin\r\n\r\nI have jdk-11.0.6 and &quot;uiautomatorviewer&quot; is working fine.","title":"How to fix &#39;No suitable Java found&#39; error in android.bat (android sdk/tools)","body":"<p>Found a solution which <strong>DON'T NEED ONE TO DOWNGRADE TO JAVA 8</strong> so, there is option for JRE to run VM for &quot;uiautomatorviewer&quot;.</p>\n<p>One needs to install Android Studio and add the below location to &quot;path&quot; System Variable</p>\n<pre><code>C:\\Program Files\\Android\\Android Studio\\jre\\bin\n</code></pre>\n<p>I have jdk-11.0.6 and &quot;uiautomatorviewer&quot; is working fine.</p>\n"},{"tags":[],"owner":{"account_id":15332609,"reputation":407,"user_id":11061906,"display_name":"Sarsa Murmu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683641229,"creation_date":1683641229,"answer_id":76210218,"question_id":54022578,"body_markdown":"What worked for me is installing Java 8 and changing all java paths to the Java directory (`C:\\Program Files\\Java\\jre-1.8`) and Setting `JAVA_HOME` environment variable. Other answers did not work for me.","title":"How to fix &#39;No suitable Java found&#39; error in android.bat (android sdk/tools)","body":"<p>What worked for me is installing Java 8 and changing all java paths to the Java directory (<code>C:\\Program Files\\Java\\jre-1.8</code>) and Setting <code>JAVA_HOME</code> environment variable. Other answers did not work for me.</p>\n"}],"owner":{"account_id":15050839,"reputation":56,"user_id":10862597,"display_name":"KeanuQ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2640,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1683641229,"creation_date":1546519558,"question_id":54022578,"body_markdown":"I&#39;m trying to set up the android-sdk but the sdkmanager won&#39;t show up.\r\n\r\nbecause of this Error massage i cheked my *JAVA_HOME* variable, witch is pointing correctly to the jdk instalation:\r\n\r\nif i run\r\n\r\n    echo %JAVA_HOME%\r\n\r\nin cmd i get\r\n\r\n    C:\\Program Files\\Java\\jdk-10.0.1\r\n\r\n\r\nthis is the output of android.bat\r\n\r\n    C:\\Android\\sdk\\tools&gt;android.bat\r\n    \r\n    ERROR: No suitable Java found. In order to properly use the Android Developer\r\n    Tools, you need a suitable version of Java JDK installed on your system.\r\n    We recommend that you install the JDK version of JavaSE, available here:\r\n      http://www.oracle.com/technetwork/java/javase/downloads\r\n    \r\n    If you already have Java installed, you can define the JAVA_HOME environment\r\n    variable in Control Panel / System / Avanced System Settings to point to the\r\n    JDK folder.\r\n    \r\n    You can find the complete Android SDK requirements here:\r\n      http://developer.android.com/sdk/requirements.html\r\n    \r\n    \r\n    C:\\Android\\sdk\\tools&gt;\r\n\r\n","title":"How to fix &#39;No suitable Java found&#39; error in android.bat (android sdk/tools)","body":"<p>I'm trying to set up the android-sdk but the sdkmanager won't show up.</p>\n\n<p>because of this Error massage i cheked my <em>JAVA_HOME</em> variable, witch is pointing correctly to the jdk instalation:</p>\n\n<p>if i run</p>\n\n<pre><code>echo %JAVA_HOME%\n</code></pre>\n\n<p>in cmd i get</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk-10.0.1\n</code></pre>\n\n<p>this is the output of android.bat</p>\n\n<pre><code>C:\\Android\\sdk\\tools&gt;android.bat\n\nERROR: No suitable Java found. In order to properly use the Android Developer\nTools, you need a suitable version of Java JDK installed on your system.\nWe recommend that you install the JDK version of JavaSE, available here:\n  http://www.oracle.com/technetwork/java/javase/downloads\n\nIf you already have Java installed, you can define the JAVA_HOME environment\nvariable in Control Panel / System / Avanced System Settings to point to the\nJDK folder.\n\nYou can find the complete Android SDK requirements here:\n  http://developer.android.com/sdk/requirements.html\n\n\nC:\\Android\\sdk\\tools&gt;\n</code></pre>\n"},{"tags":["java","ubuntu","homebrew"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1683639652,"post_id":76209828,"comment_id":134395113,"body_markdown":"I thought homebrew was a Mac thing?","body":"I thought homebrew was a Mac thing?"}],"answers":[{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683638912,"creation_date":1683638912,"answer_id":76209896,"question_id":76209828,"body_markdown":"You can install the java using below-mentioned command:\r\n\r\n    brew uninstall --ignore-dependencies java\r\n\r\nTo ensure that you are using java 8, you need to add path into bash file(~/.bashrc or ~/.zshrc)\r\n\r\nCommand to set path:\r\n\r\n    export PATH=/usr/lib/jvm/java-1.8.0-amazon-corretto/bin:$PATH\r\n\r\n\r\nAfter that do:\r\n\r\n    source (~/.bashrc or ~/.zshrc)\r\n\r\ncheck the java version again. Hope, it helps you.","title":"Remove java installed by homebrew on Ubuntu","body":"<p>You can install the java using below-mentioned command:</p>\n<pre><code>brew uninstall --ignore-dependencies java\n</code></pre>\n<p>To ensure that you are using java 8, you need to add path into bash file(~/.bashrc or ~/.zshrc)</p>\n<p>Command to set path:</p>\n<pre><code>export PATH=/usr/lib/jvm/java-1.8.0-amazon-corretto/bin:$PATH\n</code></pre>\n<p>After that do:</p>\n<pre><code>source (~/.bashrc or ~/.zshrc)\n</code></pre>\n<p>check the java version again. Hope, it helps you.</p>\n"},{"comments":[{"owner":{"account_id":9158711,"reputation":49,"user_id":12075299,"display_name":"Sachin Sheelavant"},"score":0,"creation_date":1683697640,"post_id":76210214,"comment_id":134404309,"body_markdown":"thanks for the suggestion! I dont need multiple Java versions but will keep that in mind!","body":"thanks for the suggestion! I dont need multiple Java versions but will keep that in mind!"}],"tags":[],"owner":{"account_id":9113596,"reputation":46,"user_id":6781364,"display_name":"syoh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683641215,"creation_date":1683641215,"answer_id":76210214,"question_id":76209828,"body_markdown":"I think @Maninder gave you the answer you were looking for.\r\n\r\nLater, If you want to use multiple versions of Java, How about using &#39;jEenv&#39;? (You may have already tried this method.)\r\n  \r\n&quot;jEnv is a command line tool to help you forget how to set the JAVA_HOME environment variable&quot;.   \r\nThis is a greate answer to installing/using jEnv.\r\n\r\nhttps://stackoverflow.com/questions/26252591/mac-os-x-and-multiple-java-versions","title":"Remove java installed by homebrew on Ubuntu","body":"<p>I think @Maninder gave you the answer you were looking for.</p>\n<p>Later, If you want to use multiple versions of Java, How about using 'jEenv'? (You may have already tried this method.)</p>\n<p>&quot;jEnv is a command line tool to help you forget how to set the JAVA_HOME environment variable&quot;.<br />\nThis is a greate answer to installing/using jEnv.</p>\n<p><a href=\"https://stackoverflow.com/questions/26252591/mac-os-x-and-multiple-java-versions\">Mac OS X and multiple Java versions</a></p>\n"}],"owner":{"account_id":9158711,"reputation":49,"user_id":12075299,"display_name":"Sachin Sheelavant"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76209896,"answer_count":2,"score":0,"last_activity_date":1683641215,"creation_date":1683638376,"question_id":76209828,"body_markdown":"I had installed homebrew for some tool which was working best when installed with homebrew, so I think from one of the dependencies it installed Java 20 as well so whenever I run `java --version` or `javac --version` it gives\r\n\r\n```\r\nopenjdk 20 2023-03-21\r\nOpenJDK Runtime Environment Homebrew (build 20)\r\nOpenJDK 64-Bit Server VM Homebrew (build 20, mixed mode, sharing)\r\n```\r\n\r\nWhen running `which java` gives following:\r\n```\r\n/home/linuxbrew/.linuxbrew/bin/java\r\n```\r\n\r\nBut when I run `sudo update-alternatives --config java` I get:\r\n```\r\nThere is only one alternative in link group java (providing /usr/bin/java): /usr/lib/jvm/java-1.8.0-amazon-corretto/jre/bin/java\r\nNothing to configure.\r\n```\r\n\r\nSo my question is, how can I disable or remove java from homebrew so that I can use the java8 which is required for my project?","title":"Remove java installed by homebrew on Ubuntu","body":"<p>I had installed homebrew for some tool which was working best when installed with homebrew, so I think from one of the dependencies it installed Java 20 as well so whenever I run <code>java --version</code> or <code>javac --version</code> it gives</p>\n<pre><code>openjdk 20 2023-03-21\nOpenJDK Runtime Environment Homebrew (build 20)\nOpenJDK 64-Bit Server VM Homebrew (build 20, mixed mode, sharing)\n</code></pre>\n<p>When running <code>which java</code> gives following:</p>\n<pre><code>/home/linuxbrew/.linuxbrew/bin/java\n</code></pre>\n<p>But when I run <code>sudo update-alternatives --config java</code> I get:</p>\n<pre><code>There is only one alternative in link group java (providing /usr/bin/java): /usr/lib/jvm/java-1.8.0-amazon-corretto/jre/bin/java\nNothing to configure.\n</code></pre>\n<p>So my question is, how can I disable or remove java from homebrew so that I can use the java8 which is required for my project?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":3524496,"reputation":168,"user_id":2945996,"display_name":"rimesc"},"score":0,"creation_date":1683658582,"post_id":76208891,"comment_id":134399752,"body_markdown":"Have you considered the [ConditionalOnMissingClass](https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/condition/ConditionalOnMissingClass.html) annotation? Presumably there are classes that wont be present on the class path if the `reporting-core` module is not in the dependencies.","body":"Have you considered the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/condition/ConditionalOnMissingClass.html\" rel=\"nofollow noreferrer\">ConditionalOnMissingClass</a> annotation? Presumably there are classes that wont be present on the class path if the <code>reporting-core</code> module is not in the dependencies."},{"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"score":0,"creation_date":1683704498,"post_id":76208891,"comment_id":134405619,"body_markdown":"@rimesc i did but the configuration from api module is scanned first and thus the bean is always created since condiitonal in the annotation is true at that time","body":"@rimesc i did but the configuration from api module is scanned first and thus the bean is always created since condiitonal in the annotation is true at that time"}],"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1683640964,"creation_date":1683632199,"question_id":76208891,"body_markdown":"I have `reporting-api` module that provides utility classes and so on for reporting, besides that also provides `NoOpReportService` that should be created if no other reporting service bean has been created:\r\n\r\n    @Configuration\r\n    @PropertySource(...)\r\n    public class ReportServiceConfiguration {\r\n    \r\n        @Bean\r\n        public ReportService noOpReportService() {\r\n            return new NoOpReportService ();\r\n        }\r\n    }\r\n\r\nNow i have CORE module that is optional and provides implementation for reporting service:\r\n\r\n    @Configuration\r\n    @PropertySource(...)\r\n    public class DefaultReportServiceConfig {\r\n    \r\n        @Bean\r\n        public ReportService defaultReportService(...) {\r\n            return new DefaultReportServiceImpl(...);\r\n        }\r\n    \r\n    }\r\n\r\nWhat i want to achieve: if `reporting-core` module is present in POM `DefaultReportServiceImpl` should be created - that is not problem and default behavior since its `@Configuration`file.\r\n\r\nHowever, if and only if  the `reporting-core` module is not present i want the `NoOpReportService` to be created. I tried to use \r\n\r\n        @Bean\r\n        @ConditionalOnMissingBean\r\n        public ReportService noOpReportService(...) {\r\n            return new NoOpReportService (...);\r\n        }\r\n\r\nBut this config file is always scanned before `reporting-core` module&#39;s config and thus the `NoOpReportService ` is always created. \r\n\r\nThe `reporting-api` does not have dependency on `reporting-core` module. I dont want to hardcode some condition on specific `ReportService` impementation since user can implement his own `reporting-service` and not use `reporting-core` module but his own.\r\n\r\nThanks for help! ","title":"Creating bean if module is not present","body":"<p>I have <code>reporting-api</code> module that provides utility classes and so on for reporting, besides that also provides <code>NoOpReportService</code> that should be created if no other reporting service bean has been created:</p>\n<pre><code>@Configuration\n@PropertySource(...)\npublic class ReportServiceConfiguration {\n\n    @Bean\n    public ReportService noOpReportService() {\n        return new NoOpReportService ();\n    }\n}\n</code></pre>\n<p>Now i have CORE module that is optional and provides implementation for reporting service:</p>\n<pre><code>@Configuration\n@PropertySource(...)\npublic class DefaultReportServiceConfig {\n\n    @Bean\n    public ReportService defaultReportService(...) {\n        return new DefaultReportServiceImpl(...);\n    }\n\n}\n</code></pre>\n<p>What i want to achieve: if <code>reporting-core</code> module is present in POM <code>DefaultReportServiceImpl</code> should be created - that is not problem and default behavior since its <code>@Configuration</code>file.</p>\n<p>However, if and only if  the <code>reporting-core</code> module is not present i want the <code>NoOpReportService</code> to be created. I tried to use</p>\n<pre><code>    @Bean\n    @ConditionalOnMissingBean\n    public ReportService noOpReportService(...) {\n        return new NoOpReportService (...);\n    }\n</code></pre>\n<p>But this config file is always scanned before <code>reporting-core</code> module's config and thus the <code>NoOpReportService </code> is always created.</p>\n<p>The <code>reporting-api</code> does not have dependency on <code>reporting-core</code> module. I dont want to hardcode some condition on specific <code>ReportService</code> impementation since user can implement his own <code>reporting-service</code> and not use <code>reporting-core</code> module but his own.</p>\n<p>Thanks for help!</p>\n"},{"tags":["java","synchronized"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1678852135,"post_id":75740321,"comment_id":133612100,"body_markdown":"What results did you expect, and what happened?","body":"What results did you expect, and what happened?"},{"owner":{"account_id":17832421,"reputation":4234,"user_id":12952113,"display_name":"Alex Sveshnikov"},"score":1,"creation_date":1678853564,"post_id":75740321,"comment_id":133612266,"body_markdown":"Your atomicInteger is not volatile, the changes made to it in one thread are not visible in another.","body":"Your atomicInteger is not volatile, the changes made to it in one thread are not visible in another."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1678854884,"post_id":75740321,"comment_id":133612373,"body_markdown":"As an alternative to making `atominInteger` `volatile` you could check it in a `synchronized` block in `test`.","body":"As an alternative to making <code>atominInteger</code> <code>volatile</code> you could check it in a <code>synchronized</code> block in <code>test</code>."},{"owner":{"account_id":26083662,"reputation":1,"user_id":19781417,"display_name":"i"},"score":0,"creation_date":1678857732,"post_id":75740321,"comment_id":133612708,"body_markdown":"I used synchronized to make sure the atominIntger will  be updated to main memory when it has been amended! But it doesn&#39;t seem to work","body":"I used synchronized to make sure the atominIntger will  be updated to main memory when it has been amended! But it doesn&#39;t seem to work"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678858891,"post_id":75740321,"comment_id":133612841,"body_markdown":"Also .. if you make any methods that are called in a synchronized method or block, then those must be a synchronized method (use synchronized keyword).","body":"Also .. if you make any methods that are called in a synchronized method or block, then those must be a synchronized method (use synchronized keyword)."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678859083,"post_id":75740321,"comment_id":133612874,"body_markdown":"As more than a general rule always &quot;return&quot; a value from a method ! That includes objects from methods that must be in place in that part of the sequence. A void method only completes(returns) &quot;sometime&quot; . Liken void to Thread.yeld() being a notation to &quot;being ready&quot; compared to athread.stop() being complicit and actual. synchronize keyword is itself an exclusive lock on the process thread to prevent other sequence parts being able to reach and change variables in the executing code block during the sequence.","body":"As more than a general rule always &quot;return&quot; a value from a method ! That includes objects from methods that must be in place in that part of the sequence. A void method only completes(returns) &quot;sometime&quot; . Liken void to Thread.yeld() being a notation to &quot;being ready&quot; compared to athread.stop() being complicit and actual. synchronize keyword is itself an exclusive lock on the process thread to prevent other sequence parts being able to reach and change variables in the executing code block during the sequence."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678859654,"post_id":75740321,"comment_id":133612966,"body_markdown":"..as for endless for(;;) loop, is that a &quot;keep alive&quot;.  ?   Why the giant recursive mess from a stem cell?  For the methods that call dd() it may be better they return type java.lang.Void with a return statement, but that is only a guess, it&#39;s because the atomicinteger  is &quot;global&quot; so cannot be directly assigned in a sequence with a left and right value assignment on one line.","body":"..as for endless for(;;) loop, is that a &quot;keep alive&quot;.  ?   Why the giant recursive mess from a stem cell?  For the methods that call dd() it may be better they return type java.lang.Void with a return statement, but that is only a guess, it&#39;s because the atomicinteger  is &quot;global&quot; so cannot be directly assigned in a sequence with a left and right value assignment on one line."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678860780,"post_id":75740321,"comment_id":133613111,"body_markdown":"If you assign &quot;volatile&quot; keyword, the variable&quot;s&quot; must be both global and declared ---in sequence---.  ### they### are to be updated!  Using volatile disallows the update of a later declared variable until the update of any variable before it. Consequently to run a piece of code with volatile keyword variables, it minimal process lines and variables are better committed in their own capsule of a class.(probably preferably a nested subclass).","body":"If you assign &quot;volatile&quot; keyword, the variable&quot;s&quot; must be both global and declared ---in sequence---.  ### they### are to be updated!  Using volatile disallows the update of a later declared variable until the update of any variable before it. Consequently to run a piece of code with volatile keyword variables, it minimal process lines and variables are better committed in their own capsule of a class.(probably preferably a nested subclass)."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678861434,"post_id":75740321,"comment_id":133613222,"body_markdown":"You could change reader writer to return the \ncounter variable, but the calling methods are void, but if you used the dd() callers on the counter to return, then they will need to be synchronized also (not because of the counter method, because they must both match immediate and locked updating sequence) ,  probably the better solution than using type Void.","body":"You could change reader writer to return the  counter variable, but the calling methods are void, but if you used the dd() callers on the counter to return, then they will need to be synchronized also (not because of the counter method, because they must both match immediate and locked updating sequence) ,  probably the better solution than using type Void."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678861909,"post_id":75740321,"comment_id":133613301,"body_markdown":"All things being what they are, most of the code is not controlled.inside synchronized blocks or with any process stage completion checking against ordered structured achieved sequence, gives the JVM when and which object it gives priority to, apart from the settings of the Thread objects(runnables, callables) of their priority. Note the reason for thread class is to give runtime process more automated control for cohesive operation of all the parts together, &quot;flexibility&quot; between job achievement and JVM control and it&#39;s runtime operation.","body":"All things being what they are, most of the code is not controlled.inside synchronized blocks or with any process stage completion checking against ordered structured achieved sequence, gives the JVM when and which object it gives priority to, apart from the settings of the Thread objects(runnables, callables) of their priority. Note the reason for thread class is to give runtime process more automated control for cohesive operation of all the parts together, &quot;flexibility&quot; between job achievement and JVM control and it&#39;s runtime operation."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678862078,"post_id":75740321,"comment_id":133613325,"body_markdown":"Sooooo,. .....  what&#39;s wrong?","body":"Sooooo,. .....  what&#39;s wrong?"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678863033,"post_id":75740321,"comment_id":133613491,"body_markdown":"Starting from the origin, that code appears to spawn new Threads in a &quot;tree hierarchy&quot; , if a thread is told to &quot;wait&quot; all the threads spawned by that thread will also be made to wait, if that  or any thread should completed before other threads stages are reached then they may not necessarily be able to complete to be able to call or be called to continue, this deadlocking because they ate all waiting!","body":"Starting from the origin, that code appears to spawn new Threads in a &quot;tree hierarchy&quot; , if a thread is told to &quot;wait&quot; all the threads spawned by that thread will also be made to wait, if that  or any thread should completed before other threads stages are reached then they may not necessarily be able to complete to be able to call or be called to continue, this deadlocking because they ate all waiting!"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1678865706,"post_id":75740321,"comment_id":133613991,"body_markdown":"Of main memory, and local memory (note in one tutorial static on java, and the word coherence, particularly with relevence to parallelism)....    1.  https://www.baeldung.com/java-volatile     2.   https://www.google.com/amp/s/www.edureka.co/blog/volatile-keyword-in-java/amp/","body":"Of main memory, and local memory (note in one tutorial static on java, and the word coherence, particularly with relevence to parallelism)....    1.  <a href=\"https://www.baeldung.com/java-volatile\" rel=\"nofollow noreferrer\">baeldung.com/java-volatile</a>     2.   <a href=\"https://www.google.com/amp/s/www.edureka.co/blog/volatile-keyword-in-java/amp/\" rel=\"nofollow noreferrer\">google.com/amp/s/www.edureka.co/blog/volatile-keyword-in-jav&zwnj;&#8203;a/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683640785,"creation_date":1683640785,"answer_id":76210155,"question_id":75740321,"body_markdown":"For a correct multi-threaded program, it is not enough to add `synchronized` to some accesses to a shared mutable variable. You have to guard *all* accesses to the variable.\r\n\r\nYour `dd()` uses `synchronized` for the `atomicInteger++` statement but your `atomicInteger == 2` test does not, so there is no guaranty that this test will ever perceive the updates made by the other threads.\r\n\r\nPhrases like updated to main memory exhibit a wrong mindset. This is not, how it works. To ensure that a thread perceives an update made by another thread, you must ensure that there is a [*happens-before* order] between these two actions. This relation is transitive, so you can use a chain of *happens-before* relations to prove that an action *happens-before* the other.\r\n\r\nIn your program, the `atomicInteger = 0;` write is guaranteed to be seen by the threads misleadingly named reader and writer, as you start them afterwards.\r\n\r\n&gt; - If *x* and *y* are actions of the same thread and *x* comes before *y* in program order, then *hb(x, y)*.\r\n&gt;\r\n&gt; \r\n&gt; - A call to `start()` on a thread *happens-before* any actions in the started thread.\r\n\r\nThe new threads invoke the `synchronized` method, which ensures that one thread executes the method after the other, so one thread will see the initial zero value and the other is guaranteed to see the result of the first update.\r\n\r\n&gt; - An unlock on a monitor *happens-before* every subsequent lock on that monitor.\r\n\r\nTo ensure that the thread executing the `test` method will see the `2` or in other words, that the update made by the second thread *happens-before* the `atomicInteger == 2` test, you could encapsulate the test in a `synchronized(this) {  }` block, using the relation cited above. Or you wait for the completion of the threads, e.g. calling `reader.join(); writer.join();` before the test.\r\n\r\n&gt; All actions in a thread *happen-before* any other thread successfully returns from a `join()` on that thread.\r\n\r\nAs said by others, declaring the `atomicInteger` variable as `volatile` would also solve the issue as\r\n\r\n&gt; - A write to a `volatile` field ([&#167;8.3.1.4]) *happens-before* every subsequent read of that field.\r\n\r\nbut you would still have to declare the `dd()` method `synchronized` as the `++` operator is not atomic.\r\n\r\n[*happens-before* order]: https://docs.oracle.com/javase/specs/jls/se20/html/jls-17.html#jls-17.4.5\r\n[&#167;8.3.1.4]: https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.3.1.4","title":"Why does the following code cause unstable deadlock?","body":"<p>For a correct multi-threaded program, it is not enough to add <code>synchronized</code> to some accesses to a shared mutable variable. You have to guard <em>all</em> accesses to the variable.</p>\n<p>Your <code>dd()</code> uses <code>synchronized</code> for the <code>atomicInteger++</code> statement but your <code>atomicInteger == 2</code> test does not, so there is no guaranty that this test will ever perceive the updates made by the other threads.</p>\n<p>Phrases like updated to main memory exhibit a wrong mindset. This is not, how it works. To ensure that a thread perceives an update made by another thread, you must ensure that there is a <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-17.html#jls-17.4.5\" rel=\"nofollow noreferrer\"><em>happens-before</em> order</a> between these two actions. This relation is transitive, so you can use a chain of <em>happens-before</em> relations to prove that an action <em>happens-before</em> the other.</p>\n<p>In your program, the <code>atomicInteger = 0;</code> write is guaranteed to be seen by the threads misleadingly named reader and writer, as you start them afterwards.</p>\n<blockquote>\n<ul>\n<li>If <em>x</em> and <em>y</em> are actions of the same thread and <em>x</em> comes before <em>y</em> in program order, then <em>hb(x, y)</em>.</li>\n</ul>\n<p></p>\n<ul>\n<li>A call to <code>start()</code> on a thread <em>happens-before</em> any actions in the started thread.</li>\n</ul>\n</blockquote>\n<p>The new threads invoke the <code>synchronized</code> method, which ensures that one thread executes the method after the other, so one thread will see the initial zero value and the other is guaranteed to see the result of the first update.</p>\n<blockquote>\n<ul>\n<li>An unlock on a monitor <em>happens-before</em> every subsequent lock on that monitor.</li>\n</ul>\n</blockquote>\n<p>To ensure that the thread executing the <code>test</code> method will see the <code>2</code> or in other words, that the update made by the second thread <em>happens-before</em> the <code>atomicInteger == 2</code> test, you could encapsulate the test in a <code>synchronized(this) {  }</code> block, using the relation cited above. Or you wait for the completion of the threads, e.g. calling <code>reader.join(); writer.join();</code> before the test.</p>\n<blockquote>\n<p>All actions in a thread <em>happen-before</em> any other thread successfully returns from a <code>join()</code> on that thread.</p>\n</blockquote>\n<p>As said by others, declaring the <code>atomicInteger</code> variable as <code>volatile</code> would also solve the issue as</p>\n<blockquote>\n<ul>\n<li>A write to a <code>volatile</code> field (<a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.3.1.4\" rel=\"nofollow noreferrer\">8.3.1.4</a>) <em>happens-before</em> every subsequent read of that field.</li>\n</ul>\n</blockquote>\n<p>but you would still have to declare the <code>dd()</code> method <code>synchronized</code> as the <code>++</code> operator is not atomic.</p>\n"}],"owner":{"account_id":26083662,"reputation":1,"user_id":19781417,"display_name":"i"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683640785,"creation_date":1678851595,"question_id":75740321,"body_markdown":"[enter image description here](https://i.stack.imgur.com/rsAKe.png)\r\n\r\nI want to verify the synchronized keyword!!But the results didn&#39;t agree with what I predicted!!I don&#39;t understand why deadlocks happen\r\n\r\n```java\r\nprivate final ReentrantLock lock = new ReentrantLock(true);\r\n    private int atomicInteger = 0;\r\n\r\n    public void writer() {\r\n        dd();\r\n    }\r\n\r\n    public void reader() {\r\n        dd();\r\n    }\r\n\r\n    public synchronized void dd() {\r\n        atomicInteger++;\r\n    }\r\n\r\n    public void test() {\r\n        lock.lock();\r\n        atomicInteger = 0;\r\n        Thread writer = new Thread(this::writer);\r\n        Thread reader = new Thread(this::reader);\r\n        writer.start();\r\n        reader.start();\r\n        for (; ; ) {\r\n            if (atomicInteger == 2) {\r\n                lock.unlock();\r\n                System.out.println(Thread.currentThread().getName()+&quot;Lock released&quot;);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void volatileTest() {\r\n        for (int i = 0; i &lt; 100; i++) {\r\n            Thread thread = new Thread(this::test);\r\n            thread.setName(&quot;thread&quot; + i + &quot;&quot;);\r\n            thread.start();\r\n        }\r\n        for (; ; ) {\r\n\r\n        }\r\n    }\r\n```\r\n","title":"Why does the following code cause unstable deadlock?","body":"<p><a href=\"https://i.stack.imgur.com/rsAKe.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I want to verify the synchronized keyword!!But the results didn't agree with what I predicted!!I don't understand why deadlocks happen</p>\n<pre class=\"lang-java prettyprint-override\"><code>private final ReentrantLock lock = new ReentrantLock(true);\n    private int atomicInteger = 0;\n\n    public void writer() {\n        dd();\n    }\n\n    public void reader() {\n        dd();\n    }\n\n    public synchronized void dd() {\n        atomicInteger++;\n    }\n\n    public void test() {\n        lock.lock();\n        atomicInteger = 0;\n        Thread writer = new Thread(this::writer);\n        Thread reader = new Thread(this::reader);\n        writer.start();\n        reader.start();\n        for (; ; ) {\n            if (atomicInteger == 2) {\n                lock.unlock();\n                System.out.println(Thread.currentThread().getName()+&quot;Lock released&quot;);\n                break;\n            }\n        }\n    }\n\n    @Test\n    public void volatileTest() {\n        for (int i = 0; i &lt; 100; i++) {\n            Thread thread = new Thread(this::test);\n            thread.setName(&quot;thread&quot; + i + &quot;&quot;);\n            thread.start();\n        }\n        for (; ; ) {\n\n        }\n    }\n</code></pre>\n"},{"tags":["java","performance","security","random","entropy"],"comments":[{"owner":{"account_id":193707,"reputation":34691,"user_id":435605,"accept_rate":45,"display_name":"AlikElzin-kilaka"},"score":0,"creation_date":1480402212,"post_id":137212,"comment_id":68934647,"body_markdown":"It seems this is related to [SecureRandom.generateSeed()](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html#generateSeed(int)) slowness. There&#39;s a rejected defect explaining the slowness and a workaround: [JDK-6521844 : SecureRandom hangs on Linux Systems](http://bugs.java.com/view_bug.do?bug_id=6521844)","body":"It seems this is related to <a href=\"http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html#generateSeed(int)\" rel=\"nofollow noreferrer\">SecureRandom.generateSeed()</a> slowness. There&#39;s a rejected defect explaining the slowness and a workaround: <a href=\"http://bugs.java.com/view_bug.do?bug_id=6521844\" rel=\"nofollow noreferrer\">JDK-6521844 : SecureRandom hangs on Linux Systems</a>"},{"owner":{"account_id":400321,"reputation":4722,"user_id":766233,"accept_rate":83,"display_name":"jcalfee314"},"score":0,"creation_date":1500472305,"post_id":137212,"comment_id":77352548,"body_markdown":"Check out /dev/urandom (not /dev/random) .. Consider just getting a random number generator seed from urandom if there is a blocking problem.","body":"Check out /dev/urandom (not /dev/random) .. Consider just getting a random number generator seed from urandom if there is a blocking problem."},{"owner":{"account_id":3230016,"reputation":1114,"user_id":2725497,"display_name":"patrikbeno"},"score":1,"creation_date":1521210051,"post_id":137212,"comment_id":85647164,"body_markdown":"Windows related:\nhttps://stackoverflow.com/questions/49322948/slow-securerandom-initialization/49322949#49322949","body":"Windows related: <a href=\"https://stackoverflow.com/questions/49322948/slow-securerandom-initialization/49322949#49322949\" title=\"slow securerandom initialization\">stackoverflow.com/questions/49322948/&hellip;</a>"},{"owner":{"account_id":3253860,"reputation":1277,"user_id":2743486,"accept_rate":55,"display_name":"DavidDunham"},"score":0,"creation_date":1695116020,"post_id":137212,"comment_id":135977892,"body_markdown":"@AlikElzin-kilaka - The JDK-6521844 Link does not exist anymore...","body":"@AlikElzin-kilaka - The JDK-6521844 Link does not exist anymore..."}],"answers":[{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1545322539,"post_id":137223,"comment_id":94591877,"body_markdown":"It&#39;s a rather extreme hack, but it might work; it is not said that the used PRNG may not use additional seed material which could still lead to blocking. Using a different random number providing or fixing the entropy in the system should be strongly preferred. As it may at least provide a temporary solution, I&#39;ve none-the-less voted up the answer.","body":"It&#39;s a rather extreme hack, but it might work; it is not said that the used PRNG may not use additional seed material which could still lead to blocking. Using a different random number providing or fixing the entropy in the system should be strongly preferred. As it may at least provide a temporary solution, I&#39;ve none-the-less voted up the answer."}],"tags":[],"owner":{"account_id":1120,"reputation":13278,"user_id":1490,"accept_rate":78,"display_name":"Nick"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1222391479,"creation_date":1222391479,"answer_id":137223,"question_id":137212,"body_markdown":"I haven&#39;t hit against this problem myself, but I&#39;d spawn a thread at program start which immediately tries to generate a seed, then dies.  The method which you call for randoms will join to that thread if it is alive so the first call only blocks if it occurs very early in program execution.","title":"How to deal with a slow SecureRandom generator?","body":"<p>I haven't hit against this problem myself, but I'd spawn a thread at program start which immediately tries to generate a seed, then dies.  The method which you call for randoms will join to that thread if it is alive so the first call only blocks if it occurs very early in program execution.</p>\n"},{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1545320854,"post_id":137252,"comment_id":94590964,"body_markdown":"Those different JCE providers are only of use if they use another source of entropy which basically means they have to use a specific piece of hardware, such as an HSM. Otherwise they are just as likely to experience slowdowns, depending on how much entropy they extract from the system.","body":"Those different JCE providers are only of use if they use another source of entropy which basically means they have to use a specific piece of hardware, such as an HSM. Otherwise they are just as likely to experience slowdowns, depending on how much entropy they extract from the system."}],"tags":[],"owner":{"account_id":6055,"reputation":14786,"user_id":10026,"accept_rate":68,"display_name":"ykaganovich"},"comment_count":1,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1500913046,"creation_date":1222392411,"answer_id":137252,"question_id":137212,"body_markdown":"The problem you referenced about `/dev/random` is not with the `SecureRandom` algorithm, but with the source of randomness that it uses. The two are orthogonal. You should figure out which one of the two is slowing you down.\r\n\r\nUncommon Maths page that you linked explicitly mentions that they are not addressing the source of randomness.\r\n\r\nYou can try different JCE providers, such as BouncyCastle, to see if their implementation of `SecureRandom` is faster.\r\n\r\nA brief [search][1] also reveals Linux patches that replace the default implementation with Fortuna. I don&#39;t know much more about this, but you&#39;re welcome to investigate.\r\n\r\nI should also mention that while it&#39;s very dangerous to use a badly implemented `SecureRandom` algorithm and/or randomness source, you can roll your own JCE Provider with a custom implementation of `SecureRandomSpi`. You will need to go through a process with Sun to get your provider signed, but it&#39;s actually pretty straightforward; they just need you to fax them a form stating that you&#39;re aware of the US export restrictions on crypto libraries.\r\n\r\n  [1]: http://www.google.com/search?q=fortuna+/dev/random","title":"How to deal with a slow SecureRandom generator?","body":"<p>The problem you referenced about <code>/dev/random</code> is not with the <code>SecureRandom</code> algorithm, but with the source of randomness that it uses. The two are orthogonal. You should figure out which one of the two is slowing you down.</p>\n\n<p>Uncommon Maths page that you linked explicitly mentions that they are not addressing the source of randomness.</p>\n\n<p>You can try different JCE providers, such as BouncyCastle, to see if their implementation of <code>SecureRandom</code> is faster.</p>\n\n<p>A brief <a href=\"http://www.google.com/search?q=fortuna+/dev/random\" rel=\"nofollow noreferrer\">search</a> also reveals Linux patches that replace the default implementation with Fortuna. I don't know much more about this, but you're welcome to investigate.</p>\n\n<p>I should also mention that while it's very dangerous to use a badly implemented <code>SecureRandom</code> algorithm and/or randomness source, you can roll your own JCE Provider with a custom implementation of <code>SecureRandomSpi</code>. You will need to go through a process with Sun to get your provider signed, but it's actually pretty straightforward; they just need you to fax them a form stating that you're aware of the US export restrictions on crypto libraries.</p>\n"},{"comments":[{"owner":{"account_id":3579,"reputation":53945,"user_id":5171,"accept_rate":100,"display_name":"Dan Dyer"},"score":0,"creation_date":1222425665,"post_id":137288,"comment_id":36525,"body_markdown":"Uncommons Maths only downloads data from the Internet for seeding, it doesn&#39;t return that random data when generating random numbers.","body":"Uncommons Maths only downloads data from the Internet for seeding, it doesn&#39;t return that random data when generating random numbers."},{"owner":{"account_id":6080,"reputation":12964,"user_id":10080,"accept_rate":88,"display_name":"AviD"},"score":0,"creation_date":1222432424,"post_id":137288,"comment_id":36797,"body_markdown":"Same with SecureRandom - the /dev/urandom is only for seeding.","body":"Same with SecureRandom - the /dev/urandom is only for seeding."},{"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"score":0,"creation_date":1222450697,"post_id":137288,"comment_id":37807,"body_markdown":"Yep. When the questioner says &quot;if you want a random number you use SecureRandom - this can be slow&quot;, I thought maybe he&#39;s using getSeed for everything and draining his entropy pool. The fix isn&#39;t to get JDK 6, it&#39;s to use SecureRandom the way it&#39;s intended ;-)","body":"Yep. When the questioner says &quot;if you want a random number you use SecureRandom - this can be slow&quot;, I thought maybe he&#39;s using getSeed for everything and draining his entropy pool. The fix isn&#39;t to get JDK 6, it&#39;s to use SecureRandom the way it&#39;s intended ;-)"},{"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"score":0,"creation_date":1222450798,"post_id":137288,"comment_id":37816,"body_markdown":"@Dan Dyer - I&#39;ve corrected my comment about Uncommon Maths. I did take a look at your page, so I knew that by &quot;random numbers&quot; I meant &quot;for its seed&quot; rather that &quot;to return to the user&quot;. But you&#39;re quite right that isn&#39;t what I said...","body":"@Dan Dyer - I&#39;ve corrected my comment about Uncommon Maths. I did take a look at your page, so I knew that by &quot;random numbers&quot; I meant &quot;for its seed&quot; rather that &quot;to return to the user&quot;. But you&#39;re quite right that isn&#39;t what I said..."},{"owner":{"account_id":5226,"reputation":21596,"user_id":8313,"display_name":"Sean Reilly"},"score":0,"creation_date":1471428536,"post_id":137288,"comment_id":65339093,"body_markdown":"&quot;it&#39;s widely available&quot;. Isn&#39;t it included with *every* compliant JDK? It&#39;s on the list of java security standard names... (https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#SecureRandom)","body":"&quot;it&#39;s widely available&quot;. Isn&#39;t it included with <i>every</i> compliant JDK? It&#39;s on the list of java security standard names... (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#SecureRandom\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/security/&hellip;</a>)"},{"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"score":0,"creation_date":1471429032,"post_id":137288,"comment_id":65339456,"body_markdown":"@Sean: I don&#39;t remember how all this works now (question was a long time ago and I don&#39;t really do Java any more). But the documentation says &quot;supplied by the SUN provider&quot;. So presumably it&#39;s always in the JDK, but needn&#39;t necessarily be included in Java implementations other than Oracle&#39;s.","body":"@Sean: I don&#39;t remember how all this works now (question was a long time ago and I don&#39;t really do Java any more). But the documentation says &quot;supplied by the SUN provider&quot;. So presumably it&#39;s always in the JDK, but needn&#39;t necessarily be included in Java implementations other than Oracle&#39;s."},{"owner":{"account_id":5226,"reputation":21596,"user_id":8313,"display_name":"Sean Reilly"},"score":0,"creation_date":1471532063,"post_id":137288,"comment_id":65393258,"body_markdown":"@SteveJessop from the standard names document: &quot;The JDK Security API requires and uses a set of standard names for algorithms, certificate and keystore types.&quot; The provider name can certainly be different with a non-Oracle JDK, but I read this as requiring that the algorithm names are standard and don&#39;t change, i.e. there will always be some implementation of SHA1PRNG on every Java platform.","body":"@SteveJessop from the standard names document: &quot;The JDK Security API requires and uses a set of standard names for algorithms, certificate and keystore types.&quot; The provider name can certainly be different with a non-Oracle JDK, but I read this as requiring that the algorithm names are standard and don&#39;t change, i.e. there will always be some implementation of SHA1PRNG on every Java platform."},{"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"score":0,"creation_date":1471537767,"post_id":137288,"comment_id":65396986,"body_markdown":"@SeanReilly: fortunately it&#39;s a *lot* of years since I last had to run a TCK and argue with Sun whether failures actually mean that the implementation doesn&#39;t conform or just that the tests don&#39;t match the spec :-)","body":"@SeanReilly: fortunately it&#39;s a <i>lot</i> of years since I last had to run a TCK and argue with Sun whether failures actually mean that the implementation doesn&#39;t conform or just that the tests don&#39;t match the spec :-)"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1526040322,"post_id":137288,"comment_id":87600067,"body_markdown":"@SeanReilly: Something appearing in the list of Standard Names doesn&#39;t imply it is actually implemented. For example, Sun/Oracle included various elliptic curve names in that list well before they actually had an implementation of them. SHA1PRNG in particular is not a standard -- it&#39;s proprietary to Sun/Oracle, so needn&#39;t be supported at all. Every Java environment I&#39;ve seen does support it however.","body":"@SeanReilly: Something appearing in the list of Standard Names doesn&#39;t imply it is actually implemented. For example, Sun/Oracle included various elliptic curve names in that list well before they actually had an implementation of them. SHA1PRNG in particular is not a standard -- it&#39;s proprietary to Sun/Oracle, so needn&#39;t be supported at all. Every Java environment I&#39;ve seen does support it however."},{"owner":{"account_id":5226,"reputation":21596,"user_id":8313,"display_name":"Sean Reilly"},"score":0,"creation_date":1526083101,"post_id":137288,"comment_id":87619839,"body_markdown":"@JamesKPolk: That is not what the spec says. The normative portion of the spec specifically says &quot;requires&quot;, and therefore any implementation that didn&#39;t support a standard algorithm would not be an conforming implementation of this standard  and therefore not a conforming implementation of Java, Standard Edition. The _providers_ vary a lot and should not be relied on by portable code, and of course every provider is not required to have an impl of every algorithm, but at least one implementation of every algorithm on the standard list has to be there.","body":"@JamesKPolk: That is not what the spec says. The normative portion of the spec specifically says &quot;requires&quot;, and therefore any implementation that didn&#39;t support a standard algorithm would not be an conforming implementation of this standard  and therefore not a conforming implementation of Java, Standard Edition. The <i>providers</i> vary a lot and should not be relied on by portable code, and of course every provider is not required to have an impl of every algorithm, but at least one implementation of every algorithm on the standard list has to be there."},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1526086764,"post_id":137288,"comment_id":87620377,"body_markdown":"@SeanReilly: where does the spec say that? I read it and I don&#39;t see anywhere it says that.","body":"@SeanReilly: where does the spec say that? I read it and I don&#39;t see anywhere it says that."},{"owner":{"account_id":5226,"reputation":21596,"user_id":8313,"display_name":"Sean Reilly"},"score":0,"creation_date":1526107714,"post_id":137288,"comment_id":87623618,"body_markdown":"@JamesKPolk I had already quoted the line above. It&#39;s included here: https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html\n\n&quot;The JDK Security API **requires** and uses a set of standard names for algorithms, certificate and keystore types. This specification establishes the following names as standard names.&quot;\n\nThe emphasis is mine, but the spec specifically says &quot;requires&quot;.","body":"@JamesKPolk I had already quoted the line above. It&#39;s included here: <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/security/&hellip;</a>  &quot;The JDK Security API <b>requires</b> and uses a set of standard names for algorithms, certificate and keystore types. This specification establishes the following names as standard names.&quot;  The emphasis is mine, but the spec specifically says &quot;requires&quot;."},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1526146999,"post_id":137288,"comment_id":87634021,"body_markdown":"You&#39;re clearly deciding what that &quot;requires&quot; means by yourself, nowhere does it say it has to be implemented. It doesn&#39;t make sense to &quot;require&quot; SHA1PRNG to be implemented since it is proprietary and not documented. For example, the &quot;ECIES&quot; standard name has been a &quot;required&quot; name since Java 6 but has not been implemented by **any** Oracle/Sun provider in up to and including Java 8. So clearly you&#39;re interpretation doesn&#39;t align with Oracle/Sun&#39;s.","body":"You&#39;re clearly deciding what that &quot;requires&quot; means by yourself, nowhere does it say it has to be implemented. It doesn&#39;t make sense to &quot;require&quot; SHA1PRNG to be implemented since it is proprietary and not documented. For example, the &quot;ECIES&quot; standard name has been a &quot;required&quot; name since Java 6 but has not been implemented by <b>any</b> Oracle/Sun provider in up to and including Java 8. So clearly you&#39;re interpretation doesn&#39;t align with Oracle/Sun&#39;s."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1545319714,"post_id":137288,"comment_id":94590291,"body_markdown":"**This answer is entirely wrong, you should not rely on `&quot;SHA1PRNG&quot;`**. At best you will create code that is non-portable. At worse you will get a relatively badly perforing RNG or even an insecure implementation on e.g. old versions of Android. See below why (comment too long):","body":"<b>This answer is entirely wrong, you should not rely on <code>&quot;SHA1PRNG&quot;</code></b>. At best you will create code that is non-portable. At worse you will get a relatively badly perforing RNG or even an insecure implementation on e.g. old versions of Android. See below why (comment too long):"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1545319728,"post_id":137288,"comment_id":94590299,"body_markdown":"@SeanReilly The names are required, but the implementation of them *is not*. Please check the [footnote on the implementation requirements](https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#impl): &quot;No specific Configuration type, Policy type or SecureRandom algorithm is required; however, an implementation-specific default must be provided.&quot;","body":"@SeanReilly The names are required, but the implementation of them <i>is not</i>. Please check the <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#impl\" rel=\"nofollow noreferrer\">footnote on the implementation requirements</a>: &quot;No specific Configuration type, Policy type or SecureRandom algorithm is required; however, an implementation-specific default must be provided.&quot;"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1545320236,"post_id":137288,"comment_id":94590605,"body_markdown":"OK, I will relent a bit. Using an application specific pseudo random number genarator (PRNG) such as SHA1PRNG may relieve the systems RNG somewhat. However, as it is by definition non-portable, you should at least make the algorithm name *configurable* and test on each system. Later Java versions may also have better NIST compatible PRNG&#39;s. Just using `new SecureRandom()` and configure the provider order should still be preferred to this approach. Also see the [answer of Dan](https://stackoverflow.com/a/138745/589259) for alternative PRNG&#39;s.","body":"OK, I will relent a bit. Using an application specific pseudo random number genarator (PRNG) such as SHA1PRNG may relieve the systems RNG somewhat. However, as it is by definition non-portable, you should at least make the algorithm name <i>configurable</i> and test on each system. Later Java versions may also have better NIST compatible PRNG&#39;s. Just using <code>new SecureRandom()</code> and configure the provider order should still be preferred to this approach. Also see the <a href=\"https://stackoverflow.com/a/138745/589259\">answer of Dan</a> for alternative PRNG&#39;s."}],"tags":[],"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"comment_count":16,"down_vote_count":1,"up_vote_count":96,"is_accepted":true,"score":95,"last_activity_date":1500912807,"creation_date":1222393153,"answer_id":137288,"question_id":137212,"body_markdown":"If you want true random data, then unfortunately you have to wait for it. This includes the seed for a `SecureRandom` PRNG. Uncommon Maths can&#39;t gather true random data any faster than `SecureRandom`, although it can connect to the internet to download seed data from a particular website. My guess is that this is unlikely to be faster than `/dev/random` where that&#39;s available.\r\n\r\nIf you want a PRNG, do something like this:\r\n\r\n    SecureRandom.getInstance(&quot;SHA1PRNG&quot;);\r\n\r\nWhat strings are supported depends on the `SecureRandom` SPI provider, but you can enumerate them using `Security.getProviders()` and `Provider.getService()`.\r\n\r\nSun is fond of SHA1PRNG, so it&#39;s widely available. It isn&#39;t especially fast as PRNGs go, but PRNGs will just be crunching numbers, not blocking for physical measurement of entropy.\r\n\r\nThe exception is that if you don&#39;t call `setSeed()` before getting data, then the PRNG will seed itself once the first time you call `next()` or `nextBytes()`. It will usually do this using a fairly small amount of true random data from the system. This call may block, but will make your source of random numbers far more secure than any variant of &quot;hash the current time together with the PID, add 27, and hope for the best&quot;. If all you need is random numbers for a game, though, or if you want the stream to be repeatable in future using the same seed for testing purposes, an insecure seed is still useful.","title":"How to deal with a slow SecureRandom generator?","body":"<p>If you want true random data, then unfortunately you have to wait for it. This includes the seed for a <code>SecureRandom</code> PRNG. Uncommon Maths can't gather true random data any faster than <code>SecureRandom</code>, although it can connect to the internet to download seed data from a particular website. My guess is that this is unlikely to be faster than <code>/dev/random</code> where that's available.</p>\n\n<p>If you want a PRNG, do something like this:</p>\n\n<pre><code>SecureRandom.getInstance(\"SHA1PRNG\");\n</code></pre>\n\n<p>What strings are supported depends on the <code>SecureRandom</code> SPI provider, but you can enumerate them using <code>Security.getProviders()</code> and <code>Provider.getService()</code>.</p>\n\n<p>Sun is fond of SHA1PRNG, so it's widely available. It isn't especially fast as PRNGs go, but PRNGs will just be crunching numbers, not blocking for physical measurement of entropy.</p>\n\n<p>The exception is that if you don't call <code>setSeed()</code> before getting data, then the PRNG will seed itself once the first time you call <code>next()</code> or <code>nextBytes()</code>. It will usually do this using a fairly small amount of true random data from the system. This call may block, but will make your source of random numbers far more secure than any variant of \"hash the current time together with the PID, add 27, and hope for the best\". If all you need is random numbers for a game, though, or if you want the stream to be repeatable in future using the same seed for testing purposes, an insecure seed is still useful.</p>\n"},{"comments":[{"owner":{"account_id":561600,"reputation":638,"user_id":177505,"display_name":"Nicholas Jordan"},"score":1,"creation_date":1255573761,"post_id":137626,"comment_id":1430232,"body_markdown":"I&#39;ve always wondered about this, since hadronic tau decay products nearly attain the ideal of a randomized source I just cannot get rid of my wish to use that rather than algorithmic tools. For op&#39;s purpose, I decided long ago that some front-end time is endemic to all secure tools. If one is going to need a randomizer, that can be called in the constructor and just remember to construct one at page load time, it&#39;s buried under the avl swap-in and even as picky as I am it goes un-noticed.","body":"I&#39;ve always wondered about this, since hadronic tau decay products nearly attain the ideal of a randomized source I just cannot get rid of my wish to use that rather than algorithmic tools. For op&#39;s purpose, I decided long ago that some front-end time is endemic to all secure tools. If one is going to need a randomizer, that can be called in the constructor and just remember to construct one at page load time, it&#39;s buried under the avl swap-in and even as picky as I am it goes un-noticed."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1255619619,"post_id":137626,"comment_id":1433574,"body_markdown":"Intel 8xx chipsets (and probably many others) have a hardware RNG that uses thermal noise, a truly unpredictable quantum effect. Trusted Platform Modules can contain hardware RNGs too, but unfortunately, the one in my laptop does not.","body":"Intel 8xx chipsets (and probably many others) have a hardware RNG that uses thermal noise, a truly unpredictable quantum effect. Trusted Platform Modules can contain hardware RNGs too, but unfortunately, the one in my laptop does not."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1545321058,"post_id":137626,"comment_id":94591076,"body_markdown":"It depends on the specific RNG if it seeds once or if it reseeds after a while. NIST specifies PRNG&#39;s that reseed, but many software implementations do not. Restructuring the code around a singleton is a horrible idea, especially on multithreaded implementations; it is better to fix the source of the problem: the slow seeding due to lack of entropy. If you use a singleton, use it to provide seeds for other SecureRandom implementations that are entirely deterministic. This kind of design probably requires quite some knowledge though.","body":"It depends on the specific RNG if it seeds once or if it reseeds after a while. NIST specifies PRNG&#39;s that reseed, but many software implementations do not. Restructuring the code around a singleton is a horrible idea, especially on multithreaded implementations; it is better to fix the source of the problem: the slow seeding due to lack of entropy. If you use a singleton, use it to provide seeds for other SecureRandom implementations that are entirely deterministic. This kind of design probably requires quite some knowledge though."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1545323598,"post_id":137626,"comment_id":94592403,"body_markdown":"@MaartenBodewes Those are good points. If the implementation is one that blocks, waiting for system entropy, I think that treating it as a singleton in your application is not a horrible idea since the underlying source is effectively a singleton. But using that one instance to seed others is a good suggestion, even if complex. I am not sure, but I think that the Sun (and then Oracle) provider for `SecureRandom` has changed a couple of times in the last 10 years in its entropy gathering.","body":"@MaartenBodewes Those are good points. If the implementation is one that blocks, waiting for system entropy, I think that treating it as a singleton in your application is not a horrible idea since the underlying source is effectively a singleton. But using that one instance to seed others is a good suggestion, even if complex. I am not sure, but I think that the Sun (and then Oracle) provider for <code>SecureRandom</code> has changed a couple of times in the last 10 years in its entropy gathering."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1545323948,"post_id":137626,"comment_id":94592581,"body_markdown":"I&#39;m very sure that it has changed quite a few times, so much so that I will not try and put all the changes in this comment :). It is less likely that a slow `SecureRandom` is still an issue, but low entropy in a system will always be issue. Using a singleton will create strongly coupled code, which is a design anti-pattern. It should therefore be used with extreme care; you&#39;d preferably have to reverse all the references in the code if you would fix the issue.","body":"I&#39;m very sure that it has changed quite a few times, so much so that I will not try and put all the changes in this comment :). It is less likely that a slow <code>SecureRandom</code> is still an issue, but low entropy in a system will always be issue. Using a singleton will create strongly coupled code, which is a design anti-pattern. It should therefore be used with extreme care; you&#39;d preferably have to reverse all the references in the code if you would fix the issue."}],"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":5,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1222400283,"creation_date":1222400283,"answer_id":137626,"question_id":137212,"body_markdown":"My experience has been only with slow initialization of the PRNG, not with generation of random data after that. Try a more eager initialization strategy. Since they&#39;re expensive to create, treat it like a singleton and reuse the same instance. If there&#39;s too much thread contention for one instance, pool them or make them thread-local.\r\n\r\nDon&#39;t compromise on random number generation. A weakness there compromises all of your security.\r\n\r\nI don&#39;t see a lot of COTS atomic-decay&amp;ndash;based generators, but there are several plans out there for them, if you really need a lot of random data. One site that always has interesting things to look at, including HotBits, is [John Walker&#39;s Fourmilab.](http://www.fourmilab.ch/)","title":"How to deal with a slow SecureRandom generator?","body":"<p>My experience has been only with slow initialization of the PRNG, not with generation of random data after that. Try a more eager initialization strategy. Since they're expensive to create, treat it like a singleton and reuse the same instance. If there's too much thread contention for one instance, pool them or make them thread-local.</p>\n\n<p>Don't compromise on random number generation. A weakness there compromises all of your security.</p>\n\n<p>I don't see a lot of COTS atomic-decay&ndash;based generators, but there are several plans out there for them, if you really need a lot of random data. One site that always has interesting things to look at, including HotBits, is <a href=\"http://www.fourmilab.ch/\" rel=\"nofollow noreferrer\">John Walker's Fourmilab.</a></p>\n"},{"comments":[{"owner":{"account_id":250725,"reputation":9776,"user_id":527617,"accept_rate":69,"display_name":"UVM"},"score":0,"creation_date":1338201220,"post_id":138745,"comment_id":14023801,"body_markdown":"This link is not working.https://uncommons-maths.dev.java.net/nonav/api/org/uncommons/maths/random/AESCounterRNG.html. Is there anywhere I can see this?","body":"This link is not working.<a href=\"https://uncommons-maths.dev.java.net/nonav/api/org/uncommons/maths/random/AESCounterRNG.html\" rel=\"nofollow noreferrer\">uncommons-maths.dev.java.net/nonav/api/org/uncommons&zwnj;&#8203;/maths/&hellip;</a>. Is there anywhere I can see this?"},{"owner":{"account_id":3579,"reputation":53945,"user_id":5171,"accept_rate":100,"display_name":"Dan Dyer"},"score":0,"creation_date":1338203490,"post_id":138745,"comment_id":14024535,"body_markdown":"@Unni Just updated the link.  Please note that the performance claims I made in this answer might not be valid any more.  I think things may have got better in recent versions of Java and there can be differences in performance between platforms (i.e. Windows vs. Liux).","body":"@Unni Just updated the link.  Please note that the performance claims I made in this answer might not be valid any more.  I think things may have got better in recent versions of Java and there can be differences in performance between platforms (i.e. Windows vs. Liux)."},{"owner":{"account_id":250725,"reputation":9776,"user_id":527617,"accept_rate":69,"display_name":"UVM"},"score":0,"creation_date":1338203748,"post_id":138745,"comment_id":14024634,"body_markdown":"I was just running one example of SecureRandom with a MessageDigest and made a hexencoded it.The entire operation in my windows 7 PC took 33 milliseconds.Is it an issue.I used SHA1PRNG.SecureRandom prng = SecureRandom.getInstance(&quot;SHA1PRNG&quot;); String randomNum  = new Integer( prng.nextInt() ).toString();MessageDigest sha = MessageDigest.getInstance(&quot;SHA-1&quot;);result            = sha.digest( randomNum.getBytes() ); str = hexEncode(result);","body":"I was just running one example of SecureRandom with a MessageDigest and made a hexencoded it.The entire operation in my windows 7 PC took 33 milliseconds.Is it an issue.I used SHA1PRNG.SecureRandom prng = SecureRandom.getInstance(&quot;SHA1PRNG&quot;); String randomNum  = new Integer( prng.nextInt() ).toString();MessageDigest sha = MessageDigest.getInstance(&quot;SHA-1&quot;);result            = sha.digest( randomNum.getBytes() ); str = hexEncode(result);"}],"tags":[],"owner":{"account_id":3579,"reputation":53945,"user_id":5171,"accept_rate":100,"display_name":"Dan Dyer"},"comment_count":3,"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1500912935,"creation_date":1222426882,"answer_id":138745,"question_id":137212,"body_markdown":"On Linux, the default implementation for `SecureRandom` is `NativePRNG` (source code [here][1]), which tends to be very slow.  On Windows, the default is `SHA1PRNG`, which as others pointed out you can also use on Linux if you specify it explicitly.\r\n\r\n`NativePRNG` differs from `SHA1PRNG` and Uncommons Maths&#39; [AESCounterRNG][2] in that it continuously receives entropy from the operating system (by reading from `/dev/urandom`).  The other PRNGs do not acquire any additional entropy after seeding.\r\n\r\nAESCounterRNG is about 10x faster than `SHA1PRNG`, which IIRC is itself two or three times faster than `NativePRNG`.\r\n\r\nIf you need a faster PRNG that acquires entropy after initialization, see if you can find a Java implementation of [Fortuna][3].  The core PRNG of a Fortuna implementation is identical to that used by AESCounterRNG, but there is also a sophisticated system of entropy pooling and automatic reseeding.\r\n\r\n\r\n  [1]: http://www.java2s.com/Open-Source/Java/6.0-JDK-Platform/solaris/sun/security/provider/NativePRNG.java.htm\r\n  [2]: http://maths.uncommons.org/api/org/uncommons/maths/random/AESCounterRNG.html\r\n  [3]: http://en.wikipedia.org/wiki/Fortuna_(PRNG)","title":"How to deal with a slow SecureRandom generator?","body":"<p>On Linux, the default implementation for <code>SecureRandom</code> is <code>NativePRNG</code> (source code <a href=\"http://www.java2s.com/Open-Source/Java/6.0-JDK-Platform/solaris/sun/security/provider/NativePRNG.java.htm\" rel=\"noreferrer\">here</a>), which tends to be very slow.  On Windows, the default is <code>SHA1PRNG</code>, which as others pointed out you can also use on Linux if you specify it explicitly.</p>\n\n<p><code>NativePRNG</code> differs from <code>SHA1PRNG</code> and Uncommons Maths' <a href=\"http://maths.uncommons.org/api/org/uncommons/maths/random/AESCounterRNG.html\" rel=\"noreferrer\">AESCounterRNG</a> in that it continuously receives entropy from the operating system (by reading from <code>/dev/urandom</code>).  The other PRNGs do not acquire any additional entropy after seeding.</p>\n\n<p>AESCounterRNG is about 10x faster than <code>SHA1PRNG</code>, which IIRC is itself two or three times faster than <code>NativePRNG</code>.</p>\n\n<p>If you need a faster PRNG that acquires entropy after initialization, see if you can find a Java implementation of <a href=\"http://en.wikipedia.org/wiki/Fortuna_(PRNG)\" rel=\"noreferrer\">Fortuna</a>.  The core PRNG of a Fortuna implementation is identical to that used by AESCounterRNG, but there is also a sophisticated system of entropy pooling and automatic reseeding.</p>\n"},{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":3,"creation_date":1545320697,"post_id":139165,"comment_id":94590863,"body_markdown":"This answer is wrong: the Mersenne twister is **not** a secure random number generator. It would be a good algorithm for `Random`, but not for `SecureRandom`.","body":"This answer is wrong: the Mersenne twister is <b>not</b> a secure random number generator. It would be a good algorithm for <code>Random</code>, but not for <code>SecureRandom</code>."}],"tags":[],"owner":{"account_id":4384,"reputation":6071,"user_id":2273540,"display_name":"Lorenzo Boccaccia"},"comment_count":1,"down_vote_count":3,"up_vote_count":5,"is_accepted":false,"score":2,"last_activity_date":1222432579,"creation_date":1222432579,"answer_id":139165,"question_id":137212,"body_markdown":"Use the secure random as initialization source for a recurrent algorithm; you could use then a Mersenne twister for the bulk work instead of the one in UncommonMath, which has been around for a while and proven better than other prng\r\n\r\n[http://en.wikipedia.org/wiki/Mersenne_twister][1]\r\n\r\nMake sure to refresh now and then the secure random used for the initialization, for example you could have one secure random generated per client, using one mersenne twister pseudo random generator per client, obtaining a high enough degree of randomization\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Mersenne_twister","title":"How to deal with a slow SecureRandom generator?","body":"<p>Use the secure random as initialization source for a recurrent algorithm; you could use then a Mersenne twister for the bulk work instead of the one in UncommonMath, which has been around for a while and proven better than other prng</p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/Mersenne_twister\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Mersenne_twister</a></p>\n\n<p>Make sure to refresh now and then the secure random used for the initialization, for example you could have one secure random generated per client, using one mersenne twister pseudo random generator per client, obtaining a high enough degree of randomization</p>\n"},{"comments":[{"owner":{"account_id":2277,"reputation":6269,"user_id":3150,"accept_rate":80,"display_name":"David G"},"score":0,"creation_date":1222452834,"post_id":140921,"comment_id":37961,"body_markdown":"Good point, but my code is part of a commercial application. I don&#39;t have any control over the server environment. I think the target servers are always without mouse and keyboard and rely entirely on disk and network I/O for entropy, which is probably the root problem.","body":"Good point, but my code is part of a commercial application. I don&#39;t have any control over the server environment. I think the target servers are always without mouse and keyboard and rely entirely on disk and network I/O for entropy, which is probably the root problem."},{"owner":{"account_id":1394549,"reputation":1296,"user_id":1324595,"accept_rate":65,"display_name":"David K"},"score":3,"creation_date":1346075270,"post_id":140921,"comment_id":16245009,"body_markdown":"I discovered that /dev/random was dependent on system events, so as a temporary workaround, I just moved my mouse back and forth while my test ran....","body":"I discovered that /dev/random was dependent on system events, so as a temporary workaround, I just moved my mouse back and forth while my test ran...."},{"owner":{"account_id":301110,"reputation":98854,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":0,"creation_date":1392401407,"post_id":140921,"comment_id":32962598,"body_markdown":"That 82802 hub for the i820 chipset was painfully slow (RIP). I&#39;m amazed you could gather anything useful from it. I think I spent more time blocking on it rather than collecting octets.","body":"That 82802 hub for the i820 chipset was painfully slow (RIP). I&#39;m amazed you could gather anything useful from it. I think I spent more time blocking on it rather than collecting octets."}],"tags":[],"owner":{"account_id":5827,"reputation":385,"user_id":9573,"display_name":"Chris Kite"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1500912976,"creation_date":1222451294,"answer_id":140921,"question_id":137212,"body_markdown":"If you want truly &quot;cryptographically strong&quot; randomness, then you need a strong entropy source. `/dev/random` is slow because it has to wait for system events to gather entropy (disk reads, network packets, mouse movement, key presses, etc.).\r\n\r\nA faster solution is a hardware random number generator. You may already have one built-in to your motherboard; check out the [hw_random documentation][1] for instructions on figuring out if you have it, and how to use it. The rng-tools package includes a daemon which will feed hardware generated entropy into `/dev/random`.\r\n\r\nIf a HRNG is not available on your system, and you are willing to sacrifice entropy strength for performance, you will want to seed a good PRNG with data from `/dev/random`, and let the PRNG do the bulk of the work. There are several NIST-approved PRNG&#39;s listed in  [SP800-90][2] which are straightforward to implement.\r\n\r\n\r\n  [1]: http://www.mjmwired.net/kernel/Documentation/hw_random.txt\r\n  [2]: http://csrc.nist.gov/publications/nistpubs/800-90/SP800-90revised_March2007.pdf","title":"How to deal with a slow SecureRandom generator?","body":"<p>If you want truly \"cryptographically strong\" randomness, then you need a strong entropy source. <code>/dev/random</code> is slow because it has to wait for system events to gather entropy (disk reads, network packets, mouse movement, key presses, etc.).</p>\n\n<p>A faster solution is a hardware random number generator. You may already have one built-in to your motherboard; check out the <a href=\"http://www.mjmwired.net/kernel/Documentation/hw_random.txt\" rel=\"noreferrer\">hw_random documentation</a> for instructions on figuring out if you have it, and how to use it. The rng-tools package includes a daemon which will feed hardware generated entropy into <code>/dev/random</code>.</p>\n\n<p>If a HRNG is not available on your system, and you are willing to sacrifice entropy strength for performance, you will want to seed a good PRNG with data from <code>/dev/random</code>, and let the PRNG do the bulk of the work. There are several NIST-approved PRNG's listed in  <a href=\"http://csrc.nist.gov/publications/nistpubs/800-90/SP800-90revised_March2007.pdf\" rel=\"noreferrer\">SP800-90</a> which are straightforward to implement.</p>\n"},{"tags":[],"owner":{"account_id":9728,"reputation":15219,"user_id":18093,"display_name":"Diastrophism"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1223077341,"creation_date":1223077341,"answer_id":169338,"question_id":137212,"body_markdown":"Something else to look at is the property securerandom.source in file lib/security/java.security\r\n&lt;P&gt;There may be a performance benefit to using /dev/urandom rather than /dev/random. Remember that if the quality of the random numbers is important, don&#39;t make a compromise which breaks security.","title":"How to deal with a slow SecureRandom generator?","body":"<p>Something else to look at is the property securerandom.source in file lib/security/java.security\n<P>There may be a performance benefit to using /dev/urandom rather than /dev/random. Remember that if the quality of the random numbers is important, don't make a compromise which breaks security.</p>\n"},{"comments":[{"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"score":2,"creation_date":1395167048,"post_id":388984,"comment_id":34210909,"body_markdown":"&quot;Fortuna (one of its authors is Bruce Schneier, an expert in cryptography)&quot; -- and the other one is Niels Ferguson, an expert in cryptography :-)","body":"&quot;Fortuna (one of its authors is Bruce Schneier, an expert in cryptography)&quot; -- and the other one is Niels Ferguson, an expert in cryptography :-)"}],"tags":[],"owner":{"account_id":19061,"reputation":185746,"user_id":44330,"accept_rate":70,"display_name":"Jason S"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1230042799,"creation_date":1230042470,"answer_id":388984,"question_id":137212,"body_markdown":"It sounds like you should be clearer about your RNG requirements. The strongest cryptographic RNG requirement (as I understand it) would be that even if you know the algorithm used to generate them, and you know all previously generated random numbers, you could not get any useful information about any of the random numbers generated in the future, without spending an impractical amount of computing power.\r\n\r\nIf you don&#39;t need this full guarantee of randomness then there are probably appropriate performance tradeoffs. I would tend to agree with [Dan Dyer&#39;s response][1] about AESCounterRNG from Uncommons-Maths, or Fortuna (one of its authors is Bruce Schneier, an expert in cryptography). I&#39;ve never used either but the ideas appear reputable at first glance.\r\n\r\nI would *think* that if you could generate an initial random seed periodically (e.g. once per day or hour or whatever), you could use a fast stream cipher to generate random numbers from successive chunks of the stream (if the stream cipher uses XOR then just pass in a stream of nulls or grab the XOR bits directly). ECRYPT&#39;s [eStream][2] project has lots of good information including performance benchmarks. This wouldn&#39;t maintain entropy between the points in time that you replenish it, so if someone knew one of the random numbers and the algorithm you used, technically it might be possible, with a lot of computing power, to break the stream cipher and guess its internal state to be able to predict future random numbers. But you&#39;d have to decide whether that risk and its consequences are sufficient to justify the cost of maintaining entropy.\r\n\r\nEdit: here&#39;s some [cryptographic course notes on RNG][3] I found on the &#39;net that look very relevant to this topic.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/137212/how-to-solve-performance-problem-with-java-securerandom#138745\r\n  [2]: http://www.ecrypt.eu.org/stream/\r\n  [3]: http://www.tml.tkk.fi/Opinnot/T-110.470/2004/20041101.pdf","title":"How to deal with a slow SecureRandom generator?","body":"<p>It sounds like you should be clearer about your RNG requirements. The strongest cryptographic RNG requirement (as I understand it) would be that even if you know the algorithm used to generate them, and you know all previously generated random numbers, you could not get any useful information about any of the random numbers generated in the future, without spending an impractical amount of computing power.</p>\n\n<p>If you don't need this full guarantee of randomness then there are probably appropriate performance tradeoffs. I would tend to agree with <a href=\"https://stackoverflow.com/questions/137212/how-to-solve-performance-problem-with-java-securerandom#138745\">Dan Dyer's response</a> about AESCounterRNG from Uncommons-Maths, or Fortuna (one of its authors is Bruce Schneier, an expert in cryptography). I've never used either but the ideas appear reputable at first glance.</p>\n\n<p>I would <em>think</em> that if you could generate an initial random seed periodically (e.g. once per day or hour or whatever), you could use a fast stream cipher to generate random numbers from successive chunks of the stream (if the stream cipher uses XOR then just pass in a stream of nulls or grab the XOR bits directly). ECRYPT's <a href=\"http://www.ecrypt.eu.org/stream/\" rel=\"nofollow noreferrer\">eStream</a> project has lots of good information including performance benchmarks. This wouldn't maintain entropy between the points in time that you replenish it, so if someone knew one of the random numbers and the algorithm you used, technically it might be possible, with a lot of computing power, to break the stream cipher and guess its internal state to be able to predict future random numbers. But you'd have to decide whether that risk and its consequences are sufficient to justify the cost of maintaining entropy.</p>\n\n<p>Edit: here's some <a href=\"http://www.tml.tkk.fi/Opinnot/T-110.470/2004/20041101.pdf\" rel=\"nofollow noreferrer\">cryptographic course notes on RNG</a> I found on the 'net that look very relevant to this topic.</p>\n"},{"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":25,"creation_date":1318348911,"post_id":2325109,"comment_id":9403678,"body_markdown":"Note that the Java Bug report says &quot;Not a defect&quot;.  In other words even though the default is `/dev/urandom`, Sun treats this as a magic string and uses `/dev/random` anyway, so you have to fake it out.  When is a `file:` URL not a `file:` URL?  Whenever Sun decides it&#39;s not :-(","body":"Note that the Java Bug report says &quot;Not a defect&quot;.  In other words even though the default is <code>&#47;dev&#47;urandom</code>, Sun treats this as a magic string and uses <code>&#47;dev&#47;random</code> anyway, so you have to fake it out.  When is a <code>file:</code> URL not a <code>file:</code> URL?  Whenever Sun decides it&#39;s not :-("},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":6,"creation_date":1324073217,"post_id":2325109,"comment_id":10579988,"body_markdown":"Having just spent a bunch of time investigating this, it seems that the normal setting, even with `file:/dev/urandom` set in `-Djava.security.egd` or in `securerandom.source` in the java.security file, `/dev/random/` is still read whenever `SecureRandom.getSeed()` (or `setSeed()` is called). The workaround with `file:/dev/./urandom` results in not reading `/dev/random` at all (confirmed with strace)","body":"Having just spent a bunch of time investigating this, it seems that the normal setting, even with <code>file:&#47;dev&#47;urandom</code> set in <code>-Djava.security.egd</code> or in <code>securerandom.source</code> in the java.security file, <code>&#47;dev&#47;random&#47;</code> is still read whenever <code>SecureRandom.getSeed()</code> (or <code>setSeed()</code> is called). The workaround with <code>file:&#47;dev&#47;.&#47;urandom</code> results in not reading <code>&#47;dev&#47;random</code> at all (confirmed with strace)"},{"owner":{"account_id":55592,"reputation":3166,"user_id":166524,"display_name":"lapo"},"score":7,"creation_date":1335453868,"post_id":2325109,"comment_id":13311607,"body_markdown":"`/dev/urandom` isn&#39;t less secure than `/dev/random` when implemented with a modern CSPRNG: http://en.wikipedia.org/wiki//dev/random#FreeBSD","body":"<code>&#47;dev&#47;urandom</code> isn&#39;t less secure than <code>&#47;dev&#47;random</code> when implemented with a modern CSPRNG: <a href=\"http://en.wikipedia.org/wiki//dev/random#FreeBSD\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki//dev/random#FreeBSD</a>"},{"owner":{"account_id":7470,"reputation":274976,"user_id":13005,"accept_rate":75,"display_name":"Steve Jessop"},"score":0,"creation_date":1395166790,"post_id":2325109,"comment_id":34210741,"body_markdown":"I think the main fear of `/dev/urandom/` is what happens if you use it to generate secrets on new hardware out of the box, which might be in a quite predictable state. `/dev/urandom/` won&#39;t block for entropy even though that&#39;s one case where you should. The situation is even worse if the secret is persistent, like if the first thing your device does on first boot is generate a public-private key pair. Outside of those scary situations, a good `/dev/urandom` is better than using the common `SecureRandom` algorithms anyway.","body":"I think the main fear of <code>&#47;dev&#47;urandom&#47;</code> is what happens if you use it to generate secrets on new hardware out of the box, which might be in a quite predictable state. <code>&#47;dev&#47;urandom&#47;</code> won&#39;t block for entropy even though that&#39;s one case where you should. The situation is even worse if the secret is persistent, like if the first thing your device does on first boot is generate a public-private key pair. Outside of those scary situations, a good <code>&#47;dev&#47;urandom</code> is better than using the common <code>SecureRandom</code> algorithms anyway."},{"owner":{"account_id":465939,"reputation":3614,"user_id":870382,"accept_rate":56,"display_name":"Novice User"},"score":0,"creation_date":1396856995,"post_id":2325109,"comment_id":34959622,"body_markdown":"Isn&#39;t it automatic /dev/unrandom on linux also ?","body":"Isn&#39;t it automatic /dev/unrandom on linux also ?"},{"owner":{"account_id":2966542,"reputation":6803,"user_id":2519577,"accept_rate":66,"display_name":"Aarish Ramesh"},"score":1,"creation_date":1469627696,"post_id":2325109,"comment_id":64616180,"body_markdown":"Which one is correct ? -Djava.security.egd=file:/dev/./urandom or file:///dev/urandom @mattb","body":"Which one is correct ? -Djava.security.egd=file:/dev/./urandom or file:///dev/urandom @mattb"},{"owner":{"account_id":9120249,"reputation":15521,"user_id":6785908,"accept_rate":70,"display_name":"so-random-dude"},"score":0,"creation_date":1478099762,"post_id":2325109,"comment_id":68018818,"body_markdown":"I have a follow up question. http://stackoverflow.com/questions/40383430/tomcat-takes-too-much-time-to-start-java-securerandom. Is it ok to do so in production? Will this have any impact on security (like Session ID becoming predictable)?","body":"I have a follow up question. <a href=\"http://stackoverflow.com/questions/40383430/tomcat-takes-too-much-time-to-start-java-securerandom\" title=\"tomcat takes too much time to start java securerandom\">stackoverflow.com/questions/40383430/&hellip;</a>. Is it ok to do so in production? Will this have any impact on security (like Session ID becoming predictable)?"},{"owner":{"account_id":98194,"reputation":4266,"user_id":265954,"display_name":"t0r0X"},"score":0,"creation_date":1578671795,"post_id":2325109,"comment_id":105526846,"body_markdown":"@AarishRamesh `file:///dev/urandom` and `file:/dev/./urandom` have the same purpose, which is the path *string* to not be `file:/dev/urandom`. Therefore the bug is avoided, but the accessed device is in both cases `/dev/urandom`. As a quick do-it-yourself test you could try these: `head -c 10 ///dev/urandom` and `head -c 10 /dev/./urandom`. The latter is imho easier to read and less error prone.","body":"@AarishRamesh <code>file:&#47;&#47;&#47;dev&#47;urandom</code> and <code>file:&#47;dev&#47;.&#47;urandom</code> have the same purpose, which is the path <i>string</i> to not be <code>file:&#47;dev&#47;urandom</code>. Therefore the bug is avoided, but the accessed device is in both cases <code>&#47;dev&#47;urandom</code>. As a quick do-it-yourself test you could try these: <code>head -c 10 &#47;&#47;&#47;dev&#47;urandom</code> and <code>head -c 10 &#47;dev&#47;.&#47;urandom</code>. The latter is imho easier to read and less error prone."}],"tags":[],"owner":{"account_id":21068,"reputation":7108,"user_id":50926,"accept_rate":75,"display_name":"Thomas Leonard"},"comment_count":8,"down_vote_count":1,"up_vote_count":185,"is_accepted":false,"score":184,"last_activity_date":1500912836,"creation_date":1267006267,"answer_id":2325109,"question_id":137212,"body_markdown":"You should be able to select the faster-but-slightly-less-secure /dev/urandom on Linux using:\r\n\r\n    -Djava.security.egd=file:/dev/urandom\r\n\r\nHowever, this doesn&#39;t work with Java 5 and later ([Java Bug 6202721](https://bugs.openjdk.java.net/browse/JDK-6202721)). The suggested work-around is to use:\r\n\r\n    -Djava.security.egd=file:/dev/./urandom\r\n\r\n(note the extra `/./`)\r\n","title":"How to deal with a slow SecureRandom generator?","body":"<p>You should be able to select the faster-but-slightly-less-secure /dev/urandom on Linux using:</p>\n\n<pre><code>-Djava.security.egd=file:/dev/urandom\n</code></pre>\n\n<p>However, this doesn't work with Java 5 and later (<a href=\"https://bugs.openjdk.java.net/browse/JDK-6202721\" rel=\"noreferrer\">Java Bug 6202721</a>). The suggested work-around is to use:</p>\n\n<pre><code>-Djava.security.egd=file:/dev/./urandom\n</code></pre>\n\n<p>(note the extra <code>/./</code>)</p>\n"},{"comments":[{"owner":{"account_id":2494278,"reputation":5150,"user_id":2171120,"display_name":"mirabilos"},"score":2,"creation_date":1379428084,"post_id":12159344,"comment_id":27816155,"body_markdown":"This is somewhat dangerous because it fully disables the Linux kernels entropy level estimation, system-wide. I think for testing purposes (reads: Jenkins running an apps testsuite) using /dev/./urandom is fine, but in production, its not.","body":"This is somewhat dangerous because it fully disables the Linux kernels entropy level estimation, system-wide. I think for testing purposes (reads: Jenkins running an apps testsuite) using /dev/./urandom is fine, but in production, its not."},{"owner":{"account_id":5791307,"reputation":841,"user_id":4568679,"display_name":"Slav"},"score":0,"creation_date":1449821434,"post_id":12159344,"comment_id":56181736,"body_markdown":"This is actually the only solution that worked for me. I had a not enough entropy problem when building an Android project with Gradle on Jenkins CI, and passing a parameter to the build did not help.","body":"This is actually the only solution that worked for me. I had a not enough entropy problem when building an Android project with Gradle on Jenkins CI, and passing a parameter to the build did not help."},{"owner":{"account_id":1685084,"reputation":1536,"user_id":1548557,"display_name":"MrMesees"},"score":0,"creation_date":1476990345,"post_id":12159344,"comment_id":67593997,"body_markdown":"I had to combine `sudo rngd -r /dev/urandom` with `sudo apt install rng-tools` in xenial","body":"I had to combine <code>sudo rngd -r &#47;dev&#47;urandom</code> with <code>sudo apt install rng-tools</code> in xenial"}],"tags":[],"owner":{"account_id":1394549,"reputation":1296,"user_id":1324595,"accept_rate":65,"display_name":"David K"},"comment_count":3,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1346157310,"creation_date":1346157310,"answer_id":12159344,"question_id":137212,"body_markdown":"There is a tool (on Ubuntu at least) that will feed artificial randomness into your system.  The command is simply:\r\n\r\n    rngd -r /dev/urandom\r\n\r\nand you may need a sudo at the front.  If you don&#39;t have rng-tools package, you will need to install it.  I tried this, and it definitely helped me!\r\n\r\nSource: [matt vs world][1]\r\n\r\n\r\n  [1]: http://www.mattvsworld.com/blog/2010/02/speed-up-key-generation-with-artificial-entropy/","title":"How to deal with a slow SecureRandom generator?","body":"<p>There is a tool (on Ubuntu at least) that will feed artificial randomness into your system.  The command is simply:</p>\n\n<pre><code>rngd -r /dev/urandom\n</code></pre>\n\n<p>and you may need a sudo at the front.  If you don't have rng-tools package, you will need to install it.  I tried this, and it definitely helped me!</p>\n\n<p>Source: <a href=\"http://www.mattvsworld.com/blog/2010/02/speed-up-key-generation-with-artificial-entropy/\" rel=\"noreferrer\">matt vs world</a></p>\n"},{"comments":[{"owner":{"account_id":2494278,"reputation":5150,"user_id":2171120,"display_name":"mirabilos"},"score":3,"creation_date":1379428030,"post_id":18816044,"comment_id":27816111,"body_markdown":"You might want to read http://people.umass.edu/gbecker/BeckerChes13.pdf and be sure to *never* use *only* Intel RDRAND data. Always mix it with some other unpredictable data, such as the output of an aRC4 stream cipher (seeded from /dev/urandom and with the first few KiB of output thrown away for their known bias).","body":"You might want to read <a href=\"http://people.umass.edu/gbecker/BeckerChes13.pdf\" rel=\"nofollow noreferrer\">people.umass.edu/gbecker/BeckerChes13.pdf</a> and be sure to <i>never</i> use <i>only</i> Intel RDRAND data. Always mix it with some other unpredictable data, such as the output of an aRC4 stream cipher (seeded from /dev/urandom and with the first few KiB of output thrown away for their known bias)."},{"owner":{"account_id":301110,"reputation":98854,"user_id":608639,"accept_rate":64,"display_name":"jww"},"score":0,"creation_date":1392401700,"post_id":18816044,"comment_id":32962764,"body_markdown":"+1 mirabilos. I think `RDRAND` is a good source, but its a bit untrustworthy. It definitely needs to be one input of many into a collector (no offense to David Johnston).","body":"+1 mirabilos. I think <code>RDRAND</code> is a good source, but its a bit untrustworthy. It definitely needs to be one input of many into a collector (no offense to David Johnston)."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1545321965,"post_id":18816044,"comment_id":94591571,"body_markdown":"I&#39;ve voted up, fixed the link and provided some background info. If you don&#39;t agree please roll back the edit.","body":"I&#39;ve voted up, fixed the link and provided some background info. If you don&#39;t agree please roll back the edit."}],"tags":[],"owner":{"account_id":3307455,"reputation":21,"user_id":2781824,"display_name":"user2781824"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1545321927,"creation_date":1379270312,"answer_id":18816044,"question_id":137212,"body_markdown":"If your hardware supports it try [using Java RdRand Utility](https://github.com/hpadmanabhan/rdrand-util) of which I&#39;m the author.\r\n\r\nIts based on Intel&#39;s `RDRAND` instruction and is about 10 times faster than `SecureRandom` and no bandwidth issues for large volume implementation.\r\n\r\n---\r\n\r\nNote that this implementation only works on those CPU&#39;s that provide the instruction (i.e. when the `rdrand` processor flag is set). You need to explicitly instantiate it through the `RdRandRandom()` constructor; no specific `Provider` has been implemented.","title":"How to deal with a slow SecureRandom generator?","body":"<p>If your hardware supports it try <a href=\"https://github.com/hpadmanabhan/rdrand-util\" rel=\"nofollow noreferrer\">using Java RdRand Utility</a> of which I'm the author.</p>\n\n<p>Its based on Intel's <code>RDRAND</code> instruction and is about 10 times faster than <code>SecureRandom</code> and no bandwidth issues for large volume implementation.</p>\n\n<hr>\n\n<p>Note that this implementation only works on those CPU's that provide the instruction (i.e. when the <code>rdrand</code> processor flag is set). You need to explicitly instantiate it through the <code>RdRandRandom()</code> constructor; no specific <code>Provider</code> has been implemented.</p>\n"},{"comments":[{"owner":{"account_id":427243,"reputation":1519,"user_id":808901,"display_name":"Rod Lima"},"score":4,"creation_date":1445784993,"post_id":30358935,"comment_id":54458877,"body_markdown":"apt-get install haveged then update-rc.d haveged defaults","body":"apt-get install haveged then update-rc.d haveged defaults"}],"tags":[],"owner":{"account_id":4197695,"reputation":501,"user_id":3438692,"display_name":"thunder"},"comment_count":1,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1500912997,"creation_date":1432150810,"answer_id":30358935,"question_id":137212,"body_markdown":"I had a similar problem with calls to `SecureRandom` blocking for about 25 seconds at a time on a headless Debian server. I installed the `haveged` daemon to ensure `/dev/random` is kept topped up, on headless servers you need something like this to generate the required entropy. \r\nMy calls to `SecureRandom` now perhaps take milliseconds.  ","title":"How to deal with a slow SecureRandom generator?","body":"<p>I had a similar problem with calls to <code>SecureRandom</code> blocking for about 25 seconds at a time on a headless Debian server. I installed the <code>haveged</code> daemon to ensure <code>/dev/random</code> is kept topped up, on headless servers you need something like this to generate the required entropy. \nMy calls to <code>SecureRandom</code> now perhaps take milliseconds.  </p>\n"},{"tags":[],"owner":{"account_id":9120249,"reputation":15521,"user_id":6785908,"accept_rate":70,"display_name":"so-random-dude"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1479361825,"creation_date":1479361825,"answer_id":40647569,"question_id":137212,"body_markdown":"I faced same [issue][1]. After some Googling with the right search terms, I came across this nice article on [DigitalOcean][2]. \r\n\r\nhaveged is a potential solution without compromising on security.\r\n----\r\nI am merely quoting the relevant part from the article here.\r\n\r\n&gt; Based on the HAVEGE principle, and previously based on its associated\r\n&gt; library, haveged allows generating randomness based on variations in\r\n&gt; code execution time on a processor. Since it&#39;s nearly impossible for\r\n&gt; one piece of code to take the same exact time to execute, even in the\r\n&gt; same environment on the same hardware, the timing of running a single\r\n&gt; or multiple programs should be suitable to seed a random source. The\r\n&gt; haveged implementation seeds your system&#39;s random source (usually\r\n&gt; /dev/random) using differences in your processor&#39;s time stamp counter\r\n&gt; (TSC) after executing a loop repeatedly\r\n\r\nHow to install haveged\r\n---\r\nFollow the steps in this article. https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged\r\n\r\nI have posted it [here][3]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/40383430/tomcat-takes-too-much-time-to-start-java-securerandom\r\n  [2]: https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged\r\n  [3]: https://stackoverflow.com/a/40603084/6785908","title":"How to deal with a slow SecureRandom generator?","body":"<p>I faced same <a href=\"https://stackoverflow.com/questions/40383430/tomcat-takes-too-much-time-to-start-java-securerandom\">issue</a>. After some Googling with the right search terms, I came across this nice article on <a href=\"https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged\" rel=\"nofollow noreferrer\">DigitalOcean</a>. </p>\n\n<h2>haveged is a potential solution without compromising on security.</h2>\n\n<p>I am merely quoting the relevant part from the article here.</p>\n\n<blockquote>\n  <p>Based on the HAVEGE principle, and previously based on its associated\n  library, haveged allows generating randomness based on variations in\n  code execution time on a processor. Since it's nearly impossible for\n  one piece of code to take the same exact time to execute, even in the\n  same environment on the same hardware, the timing of running a single\n  or multiple programs should be suitable to seed a random source. The\n  haveged implementation seeds your system's random source (usually\n  /dev/random) using differences in your processor's time stamp counter\n  (TSC) after executing a loop repeatedly</p>\n</blockquote>\n\n<h2>How to install haveged</h2>\n\n<p>Follow the steps in this article. <a href=\"https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged</a></p>\n\n<p>I have posted it <a href=\"https://stackoverflow.com/a/40603084/6785908\">here</a></p>\n"},{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1545321313,"post_id":40885767,"comment_id":94591222,"body_markdown":"I&#39;d only *allow* `getInstanceStrong()` for long term keys, such as those for TLS certificates. And even then I would rather use `new SecureRandom()` or a FIPS compliant key pair generator or random number generator. So yes, this provides an answer, *if* `/dev/urandom` doesn&#39;t block : in the end it still relies on system entropy after all; but it is very good advice *in general*. If `/dev/urandom` blocks you may have to fix the source of the issue rather than your Java application.","body":"I&#39;d only <i>allow</i> <code>getInstanceStrong()</code> for long term keys, such as those for TLS certificates. And even then I would rather use <code>new SecureRandom()</code> or a FIPS compliant key pair generator or random number generator. So yes, this provides an answer, <i>if</i> <code>&#47;dev&#47;urandom</code> doesn&#39;t block : in the end it still relies on system entropy after all; but it is very good advice <i>in general</i>. If <code>&#47;dev&#47;urandom</code> blocks you may have to fix the source of the issue rather than your Java application."}],"tags":[],"owner":{"account_id":33592,"reputation":3744,"user_id":94152,"accept_rate":100,"display_name":"Lachlan"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1480502325,"creation_date":1480501202,"answer_id":40885767,"question_id":137212,"body_markdown":"Using Java 8, I found that on Linux calling `SecureRandom.getInstanceStrong()` would give me the `NativePRNGBlocking` algorithm. This would often block for many seconds to generate a few bytes of salt.\r\n\r\nI switched to explicitly asking for `NativePRNGNonBlocking` instead, and as expected from the name, it no longer blocked. I have no idea what the security implications of this are. Presumably the non-blocking version can&#39;t guarantee the amount of entropy being used.\r\n\r\n**Update**: Ok, I found [this excellent explanation](https://tersesystems.com/2015/12/17/the-right-way-to-use-securerandom/).\r\n\r\nIn a nutshell, to avoid blocking, use `new SecureRandom()`. This uses `/dev/urandom`, which doesn&#39;t block and is basically as secure as `/dev/random`. From the post: &quot;The only time you would want to call /dev/random is when the machine is first booting, and entropy has not yet accumulated&quot;.\r\n\r\n`SecureRandom.getInstanceStrong()` gives you the absolute strongest RNG, but it&#39;s only safe to use in situations where a bunch of blocking won&#39;t effect you.\r\n","title":"How to deal with a slow SecureRandom generator?","body":"<p>Using Java 8, I found that on Linux calling <code>SecureRandom.getInstanceStrong()</code> would give me the <code>NativePRNGBlocking</code> algorithm. This would often block for many seconds to generate a few bytes of salt.</p>\n\n<p>I switched to explicitly asking for <code>NativePRNGNonBlocking</code> instead, and as expected from the name, it no longer blocked. I have no idea what the security implications of this are. Presumably the non-blocking version can't guarantee the amount of entropy being used.</p>\n\n<p><strong>Update</strong>: Ok, I found <a href=\"https://tersesystems.com/2015/12/17/the-right-way-to-use-securerandom/\" rel=\"noreferrer\">this excellent explanation</a>.</p>\n\n<p>In a nutshell, to avoid blocking, use <code>new SecureRandom()</code>. This uses <code>/dev/urandom</code>, which doesn't block and is basically as secure as <code>/dev/random</code>. From the post: \"The only time you would want to call /dev/random is when the machine is first booting, and entropy has not yet accumulated\".</p>\n\n<p><code>SecureRandom.getInstanceStrong()</code> gives you the absolute strongest RNG, but it's only safe to use in situations where a bunch of blocking won't effect you.</p>\n"},{"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1545319966,"post_id":47097219,"comment_id":94590457,"body_markdown":"Upvoted your answer, but &quot;`/dev/random` is by definition slow (and can even block)&quot; is wrong; it entirely depends on system configuration. Newer machines may have e.g. a fast RNG in the CPU that may be used, and BSD machines generally have the same implementation for `/dev/random` and `/devl/urandom`. Still, you should probably not *rely on* `/dev/random` being fast, necessarily. On VM&#39;s you may want to install the client toolset on the client VM so that is can use the RNG of the host OS.","body":"Upvoted your answer, but &quot;<code>&#47;dev&#47;random</code> is by definition slow (and can even block)&quot; is wrong; it entirely depends on system configuration. Newer machines may have e.g. a fast RNG in the CPU that may be used, and BSD machines generally have the same implementation for <code>&#47;dev&#47;random</code> and <code>&#47;devl&#47;urandom</code>. Still, you should probably not <i>rely on</i> <code>&#47;dev&#47;random</code> being fast, necessarily. On VM&#39;s you may want to install the client toolset on the client VM so that is can use the RNG of the host OS."}],"tags":[],"owner":{"account_id":225072,"reputation":81659,"user_id":485343,"accept_rate":75,"display_name":"rustyx"},"comment_count":1,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1562609406,"creation_date":1509716583,"answer_id":47097219,"question_id":137212,"body_markdown":"Many Linux distros (mostly Debian-based) configure OpenJDK to use `/dev/random` for entropy.\r\n\r\n`/dev/random` is by definition slow (and can even block).\r\n\r\nFrom here you have two options on how to unblock it:\r\n\r\n1. Improve entropy, or\r\n2. Reduce randomness requirements.\r\n\r\n**Option 1, Improve entropy**\r\n\r\nTo get more entropy into `/dev/random`, try the [**haveged**](https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged) daemon. It&#39;s a daemon that continuously collects HAVEGE entropy, and works also in a virtualized environment because it doesn&#39;t require any special hardware, only the CPU itself and a clock.\r\n\r\nOn Ubuntu/Debian:\r\n\r\n    apt-get install haveged\r\n    update-rc.d haveged defaults\r\n    service haveged start\r\n\r\nOn RHEL/CentOS:\r\n\r\n    yum install haveged\r\n    systemctl enable haveged\r\n    systemctl start haveged\r\n\r\n\r\n**Option 2. Reduce randomness requirements**\r\n\r\nIf for some reason the solution above doesn&#39;t help or you don&#39;t care about cryptographically strong randomness, you can switch to `/dev/urandom` instead, which is guaranteed not to block.\r\n\r\nTo do it globally, edit the file `jre/lib/security/java.security` in your default Java installation to use `/dev/urandom` (due to another [bug](https://bugs.openjdk.java.net/browse/JDK-6202721) it needs to be specified as `/dev/./urandom`).\r\n\r\nLike this:\r\n\r\n    #securerandom.source=file:/dev/random\r\n    securerandom.source=file:/dev/./urandom\r\n\r\nThen you won&#39;t ever have to specify it on the command line.\r\n\r\n---\r\nNote: If you do cryptography, you *need* good entropy. Case in point - [android PRNG issue](https://bitcoin.org/en/alert/2013-08-11-android) reduced the security of Bitcoin wallets.","title":"How to deal with a slow SecureRandom generator?","body":"<p>Many Linux distros (mostly Debian-based) configure OpenJDK to use <code>/dev/random</code> for entropy.</p>\n\n<p><code>/dev/random</code> is by definition slow (and can even block).</p>\n\n<p>From here you have two options on how to unblock it:</p>\n\n<ol>\n<li>Improve entropy, or</li>\n<li>Reduce randomness requirements.</li>\n</ol>\n\n<p><strong>Option 1, Improve entropy</strong></p>\n\n<p>To get more entropy into <code>/dev/random</code>, try the <a href=\"https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged\" rel=\"noreferrer\"><strong>haveged</strong></a> daemon. It's a daemon that continuously collects HAVEGE entropy, and works also in a virtualized environment because it doesn't require any special hardware, only the CPU itself and a clock.</p>\n\n<p>On Ubuntu/Debian:</p>\n\n<pre><code>apt-get install haveged\nupdate-rc.d haveged defaults\nservice haveged start\n</code></pre>\n\n<p>On RHEL/CentOS:</p>\n\n<pre><code>yum install haveged\nsystemctl enable haveged\nsystemctl start haveged\n</code></pre>\n\n<p><strong>Option 2. Reduce randomness requirements</strong></p>\n\n<p>If for some reason the solution above doesn't help or you don't care about cryptographically strong randomness, you can switch to <code>/dev/urandom</code> instead, which is guaranteed not to block.</p>\n\n<p>To do it globally, edit the file <code>jre/lib/security/java.security</code> in your default Java installation to use <code>/dev/urandom</code> (due to another <a href=\"https://bugs.openjdk.java.net/browse/JDK-6202721\" rel=\"noreferrer\">bug</a> it needs to be specified as <code>/dev/./urandom</code>).</p>\n\n<p>Like this:</p>\n\n<pre><code>#securerandom.source=file:/dev/random\nsecurerandom.source=file:/dev/./urandom\n</code></pre>\n\n<p>Then you won't ever have to specify it on the command line.</p>\n\n<hr>\n\n<p>Note: If you do cryptography, you <em>need</em> good entropy. Case in point - <a href=\"https://bitcoin.org/en/alert/2013-08-11-android\" rel=\"noreferrer\">android PRNG issue</a> reduced the security of Bitcoin wallets.</p>\n"},{"comments":[{"owner":{"account_id":102214,"reputation":17804,"user_id":274502,"accept_rate":85,"display_name":"cregox"},"score":1,"creation_date":1609846752,"post_id":58182522,"comment_id":115943689,"body_markdown":"thanks for the awesome update! the main difference &quot;u&quot; offers is just not blocking due to entropy. some funny aspects around the english words we collectivity chose for the ideas here: they&#39;re both equally &quot;secure&quot; for all practical purposes because of our own ignorance around what random even means; blocking to gather entropy makes it more random, not more secure at all; if you want to throw a dice with better entropy than throwing an actual dice, use the blocking one, if you want to deal with bank transactions, better not block it; the only thing &quot;pseudo&quot; about either is legacy wording.","body":"thanks for the awesome update! the main difference &quot;u&quot; offers is just not blocking due to entropy. some funny aspects around the english words we collectivity chose for the ideas here: they&#39;re both equally &quot;secure&quot; for all practical purposes because of our own ignorance around what random even means; blocking to gather entropy makes it more random, not more secure at all; if you want to throw a dice with better entropy than throwing an actual dice, use the blocking one, if you want to deal with bank transactions, better not block it; the only thing &quot;pseudo&quot; about either is legacy wording."}],"tags":[],"owner":{"account_id":3512449,"reputation":3956,"user_id":2936460,"accept_rate":83,"display_name":"SQB"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1683640608,"creation_date":1569924364,"answer_id":58182522,"question_id":137212,"body_markdown":"According to [the documentation][docs_preference], the different algorithms used by SecureRandom are, in order of preference:\r\n\r\n* On most *NIX systems (including macOS)\r\n  1. PKCS11 (only on Solaris)\r\n  2. NativePRNG\r\n  3. DRBG\r\n  4. SHA1PRNG\r\n  5. NativePRNGBlocking\r\n  6. NativePRNGNonBlocking\r\n* On Windows systems\r\n  1. DRBG\r\n  2. SHA1PRNG\r\n  3. Windows-PRNG\r\n\r\nSince you asked about Linux, I will ignore the Windows implementation, as well as PKCS11 which is only really available on Solaris, unless you installed it yourself  and if you did, you probably wouldn&#39;t be asking this question.\r\n\r\nAccording to that same documentation, [what these algorithms use][docs_algorithms] are\r\n\r\n##### NativePRNG\r\n`generateSeed()` uses `/dev/random`  \r\n`nextBytes()` uses `/dev/urandom`\r\n\r\n##### NativePRNGBlocking\r\n`generateSeed()` and `nextBytes()` use `/dev/random`\r\n\r\n##### NativePRNGNonBlocking\r\n`generateSeed()` and `nextBytes()` use `/dev/urandom`\r\n\r\n##### DRBG\r\nSupported mechanisms and algorithms:\r\n* Hash_DRBG and HMAC_DRBG with SHA-224, SHA-512/224, SHA-256, SHA-512/256, SHA-384, and SHA-512.\r\n* CTR_DRBG with AES-128, AES-192, and AES-256.\r\n\r\n##### SHA1PRNG\r\nInitial seeding is currently done via a combination of system attributes and the java.security entropy gathering device.\r\n\r\n-----\r\n\r\nThat means if you use `SecureRandom random = new SecureRandom()`, it goes down that list until it finds one that works, which will typically be NativePRNG. And that means that it seeds itself from `/dev/random` (or uses that if you explicitly generate a seed), then uses `/dev/urandom` for getting the next bytes, ints, double, booleans, what-have-yous.  \r\n\r\nSince `/dev/random` is blocking (it blocks until it has enough entropy in the entropy pool), that may impede performance.\r\n\r\nOne solution to that is using something like haveged to generate enough entropy, another solution is using `/dev/urandom` instead. While you could set that for the entire jvm, a better solution is doing it for this specific instance of `SecureRandom`, by using `SecureRandom random = SecureRandom.getInstance(&quot;NativePRNGNonBlocking&quot;)`. Note that that method can throw a NoSuchAlgorithmException if NativePRNGNonBlocking is unavailable, so be prepared to fall back to the default.\r\n\r\n~~~Java11\r\nSecureRandom random;\r\ntry {\r\n    random = SecureRandom.getInstance(&quot;NativePRNGNonBlocking&quot;);\r\n} catch (NoSuchAlgorithmException nsae) {\r\n    random = new SecureRandom();\r\n}\r\n~~~\r\n\r\nAlso note that on other *nix systems, [`/dev/urandom` may behave differently][wiki/dev/random].\r\n\r\n----\r\n\r\n### Is `/dev/urandom` random enough?\r\nConventional wisdom has it that only `/dev/random` is random enough. However, some voices differ. In [&quot;The Right Way to Use SecureRandom&quot;][terse] and [&quot;Myths about /dev/urandom&quot;][myths], it is argued that `/dev/urandom/` is just as good.\r\n\r\nThe users over on the Information Security stack [agree with that][urandom]. Basically, if you have to ask, `/dev/urandom` is fine for your purpose.\r\n\r\n\r\n[terse]: https://tersesystems.com/blog/2015/12/17/the-right-way-to-use-securerandom/ &quot;Terse System: &#39;The Right Way to Use SecureRandom&#39;&quot;\r\n[myths]: https://www.2uo.de/myths-about-urandom/ &quot;Myths about /dev/urandom by Thomas H&#252;hn&quot;\r\n[wiki/dev/random]: https://en.wikipedia.org/wiki//dev/random#FreeBSD &quot;/dev/random on Wikipedia, section FreeBSD&quot;\r\n[urandom]: https://security.stackexchange.com/a/3939/34215 &quot;Is a rand from /dev/urandom secure for a login key?&quot;\r\n[docs_preference]: https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-9DC4ADD5-6D01-4B2E-9E85-B88E3BEE7453 &quot;JDK Providers Documentation  Table 4-3 Default SecureRandom Implementations&quot;\r\n[docs_algorithms]: https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#d53600e823 &quot;JDK Providers Documentation  Table 4-4 Algorithms in SUN provider&quot;","title":"How to deal with a slow SecureRandom generator?","body":"<p>According to <a href=\"https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-9DC4ADD5-6D01-4B2E-9E85-B88E3BEE7453\" rel=\"nofollow noreferrer\" title=\"JDK Providers Documentation  Table 4-3 Default SecureRandom Implementations\">the documentation</a>, the different algorithms used by SecureRandom are, in order of preference:</p>\n<ul>\n<li>On most *NIX systems (including macOS)\n<ol>\n<li>PKCS11 (only on Solaris)</li>\n<li>NativePRNG</li>\n<li>DRBG</li>\n<li>SHA1PRNG</li>\n<li>NativePRNGBlocking</li>\n<li>NativePRNGNonBlocking</li>\n</ol>\n</li>\n<li>On Windows systems\n<ol>\n<li>DRBG</li>\n<li>SHA1PRNG</li>\n<li>Windows-PRNG</li>\n</ol>\n</li>\n</ul>\n<p>Since you asked about Linux, I will ignore the Windows implementation, as well as PKCS11 which is only really available on Solaris, unless you installed it yourself  and if you did, you probably wouldn't be asking this question.</p>\n<p>According to that same documentation, <a href=\"https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#d53600e823\" rel=\"nofollow noreferrer\" title=\"JDK Providers Documentation  Table 4-4 Algorithms in SUN provider\">what these algorithms use</a> are</p>\n<h5>NativePRNG</h5>\n<p><code>generateSeed()</code> uses <code>/dev/random</code><br />\n<code>nextBytes()</code> uses <code>/dev/urandom</code></p>\n<h5>NativePRNGBlocking</h5>\n<p><code>generateSeed()</code> and <code>nextBytes()</code> use <code>/dev/random</code></p>\n<h5>NativePRNGNonBlocking</h5>\n<p><code>generateSeed()</code> and <code>nextBytes()</code> use <code>/dev/urandom</code></p>\n<h5>DRBG</h5>\n<p>Supported mechanisms and algorithms:</p>\n<ul>\n<li>Hash_DRBG and HMAC_DRBG with SHA-224, SHA-512/224, SHA-256, SHA-512/256, SHA-384, and SHA-512.</li>\n<li>CTR_DRBG with AES-128, AES-192, and AES-256.</li>\n</ul>\n<h5>SHA1PRNG</h5>\n<p>Initial seeding is currently done via a combination of system attributes and the java.security entropy gathering device.</p>\n<hr />\n<p>That means if you use <code>SecureRandom random = new SecureRandom()</code>, it goes down that list until it finds one that works, which will typically be NativePRNG. And that means that it seeds itself from <code>/dev/random</code> (or uses that if you explicitly generate a seed), then uses <code>/dev/urandom</code> for getting the next bytes, ints, double, booleans, what-have-yous.</p>\n<p>Since <code>/dev/random</code> is blocking (it blocks until it has enough entropy in the entropy pool), that may impede performance.</p>\n<p>One solution to that is using something like haveged to generate enough entropy, another solution is using <code>/dev/urandom</code> instead. While you could set that for the entire jvm, a better solution is doing it for this specific instance of <code>SecureRandom</code>, by using <code>SecureRandom random = SecureRandom.getInstance(&quot;NativePRNGNonBlocking&quot;)</code>. Note that that method can throw a NoSuchAlgorithmException if NativePRNGNonBlocking is unavailable, so be prepared to fall back to the default.</p>\n<pre><code>SecureRandom random;\ntry {\n    random = SecureRandom.getInstance(&quot;NativePRNGNonBlocking&quot;);\n} catch (NoSuchAlgorithmException nsae) {\n    random = new SecureRandom();\n}\n</code></pre>\n<p>Also note that on other *nix systems, <a href=\"https://en.wikipedia.org/wiki//dev/random#FreeBSD\" rel=\"nofollow noreferrer\" title=\"/dev/random on Wikipedia, section FreeBSD\"><code>/dev/urandom</code> may behave differently</a>.</p>\n<hr />\n<h3>Is <code>/dev/urandom</code> random enough?</h3>\n<p>Conventional wisdom has it that only <code>/dev/random</code> is random enough. However, some voices differ. In <a href=\"https://tersesystems.com/blog/2015/12/17/the-right-way-to-use-securerandom/\" rel=\"nofollow noreferrer\" title=\"Terse System: 'The Right Way to Use SecureRandom'\">&quot;The Right Way to Use SecureRandom&quot;</a> and <a href=\"https://www.2uo.de/myths-about-urandom/\" rel=\"nofollow noreferrer\" title=\"Myths about /dev/urandom by Thomas Hhn\">&quot;Myths about /dev/urandom&quot;</a>, it is argued that <code>/dev/urandom/</code> is just as good.</p>\n<p>The users over on the Information Security stack <a href=\"https://security.stackexchange.com/a/3939/34215\" title=\"Is a rand from /dev/urandom secure for a login key?\">agree with that</a>. Basically, if you have to ask, <code>/dev/urandom</code> is fine for your purpose.</p>\n"}],"owner":{"account_id":2277,"reputation":6269,"user_id":3150,"accept_rate":80,"display_name":"David G"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165551,"favorite_count":0,"down_vote_count":0,"up_vote_count":188,"accepted_answer_id":137288,"answer_count":17,"score":188,"last_activity_date":1683640608,"creation_date":1222391224,"question_id":137212,"body_markdown":"If you want a cryptographically strong random numbers in Java, you use `SecureRandom`. Unfortunately, `SecureRandom` can be very slow. If it uses `/dev/random` on Linux, it can block waiting for sufficient entropy to build up. How do you avoid the performance penalty?\r\n\r\nHas anyone used [Uncommon Maths][1] as a solution to this problem?\r\n\r\nCan anybody confirm that this performance problem has been solved in JDK 6?\r\n\r\n\r\n  [1]: https://uncommons-maths.dev.java.net/","title":"How to deal with a slow SecureRandom generator?","body":"<p>If you want a cryptographically strong random numbers in Java, you use <code>SecureRandom</code>. Unfortunately, <code>SecureRandom</code> can be very slow. If it uses <code>/dev/random</code> on Linux, it can block waiting for sufficient entropy to build up. How do you avoid the performance penalty?</p>\n\n<p>Has anyone used <a href=\"https://uncommons-maths.dev.java.net/\" rel=\"noreferrer\">Uncommon Maths</a> as a solution to this problem?</p>\n\n<p>Can anybody confirm that this performance problem has been solved in JDK 6?</p>\n"},{"tags":["java","lombok"],"answers":[{"comments":[{"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"score":0,"creation_date":1643669202,"post_id":70871396,"comment_id":125397822,"body_markdown":"The problem with this approach is that you cannot use the builder to set another value any more. So the `type()` method basically becomes useless.","body":"The problem with this approach is that you cannot use the builder to set another value any more. So the <code>type()</code> method basically becomes useless."},{"owner":{"account_id":3433779,"reputation":1113,"user_id":2877358,"accept_rate":82,"display_name":"Rik Schaaf"},"score":0,"creation_date":1680002085,"post_id":70871396,"comment_id":133818569,"body_markdown":"This also only works when the field in the super type is protected or public. If it is private, then @JanRieke&#39;s solution does work.","body":"This also only works when the field in the super type is protected or public. If it is private, then @JanRieke&#39;s solution does work."}],"tags":[],"owner":{"account_id":8500862,"reputation":2930,"user_id":8737144,"display_name":"1Z10"},"comment_count":2,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1643238605,"creation_date":1643238605,"answer_id":70871396,"question_id":70868565,"body_markdown":"A solution to fix this problem (not specific to Lombok) is to use an initializer block (https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html) in the subclasses.\r\n\r\n    @Data\r\n    @SuperBuilder\r\n    public class QualitativeEvaluationModel extends EvaluationModel {\r\n        {\r\n            super.type = EvaluationType.QUALITATIVE;\r\n        }\r\n    }\r\n\r\n","title":"Lombok Inherithance: how to set default value for field in superclass without redeclaring it?","body":"<p>A solution to fix this problem (not specific to Lombok) is to use an initializer block (<a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/javaOO/initial.html</a>) in the subclasses.</p>\n<pre><code>@Data\n@SuperBuilder\npublic class QualitativeEvaluationModel extends EvaluationModel {\n    {\n        super.type = EvaluationType.QUALITATIVE;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13887193,"reputation":7307,"user_id":10026074,"display_name":"Jan Rieke"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643732548,"creation_date":1643669734,"answer_id":70933810,"question_id":70868565,"body_markdown":"From your description, it sounds a bit like that you don&#39;t want a settable field, but just a fixed value depending on the subclass instance. In that case, a manually implemented getter method without any field is the better choice.\r\n\r\nHowever, if you really want the user to be able to set a value different from the default, this is your way:\r\n\r\n\t@SuperBuilder\r\n\tpublic class QualitativeEvaluationModel extends EvaluationModel {\r\n\t\t\r\n\t\tpublic static abstract class QualitativeEvaluationModelBuilder&lt;C extends QualitativeEvaluationModel, B extends QualitativeEvaluationModelBuilder&lt;C, B&gt;&gt; extends EvaluationModel.EvaluationModelBuilder&lt;C, B&gt;\r\n\t\t{\r\n\t\t\tpublic QualitativeEvaluationModelBuilder() {\r\n\t\t\t\ttype(EvaluationType.QUALITATIVE);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nIt defines the builder class exactly like Lombok would create it (Lombok will add anything that you didn&#39;t write manually). As it&#39;s really filled with generics, I used `delombok` to get it right.\r\nNext, you have to define a default value for your builder instance simply by calling the builder&#39;s setter method for `type` in the builder&#39;s constructor.\r\n\r\nIn this way, users that don&#39;t call the `type()` method on the builder instance will get the default value. If you want something else as `type`, just call the `type()` method on the builder instance.\r\n\r\nNote that this only affects the builder. If you also want to instantiate via (no-args) constructor, you have to manually implement the constructor and set the default there.","title":"Lombok Inherithance: how to set default value for field in superclass without redeclaring it?","body":"<p>From your description, it sounds a bit like that you don't want a settable field, but just a fixed value depending on the subclass instance. In that case, a manually implemented getter method without any field is the better choice.</p>\n<p>However, if you really want the user to be able to set a value different from the default, this is your way:</p>\n<pre><code>@SuperBuilder\npublic class QualitativeEvaluationModel extends EvaluationModel {\n    \n    public static abstract class QualitativeEvaluationModelBuilder&lt;C extends QualitativeEvaluationModel, B extends QualitativeEvaluationModelBuilder&lt;C, B&gt;&gt; extends EvaluationModel.EvaluationModelBuilder&lt;C, B&gt;\n    {\n        public QualitativeEvaluationModelBuilder() {\n            type(EvaluationType.QUALITATIVE);\n        }\n    }\n}\n</code></pre>\n<p>It defines the builder class exactly like Lombok would create it (Lombok will add anything that you didn't write manually). As it's really filled with generics, I used <code>delombok</code> to get it right.\nNext, you have to define a default value for your builder instance simply by calling the builder's setter method for <code>type</code> in the builder's constructor.</p>\n<p>In this way, users that don't call the <code>type()</code> method on the builder instance will get the default value. If you want something else as <code>type</code>, just call the <code>type()</code> method on the builder instance.</p>\n<p>Note that this only affects the builder. If you also want to instantiate via (no-args) constructor, you have to manually implement the constructor and set the default there.</p>\n"},{"tags":[],"owner":{"account_id":11445067,"reputation":512,"user_id":8389244,"display_name":"Max M"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683640189,"creation_date":1683640189,"answer_id":76210076,"question_id":70868565,"body_markdown":"You can define the builder method on your own and do initialization there. The default builder method name is `builder()` and even that can be customized with `@SuperBuilder(builderMethodName = &quot;myBuilderMethodName&quot;)`\r\n\r\n    @Getter\r\n    @SuperBuilder\r\n    @EqualsAndHashCode\r\n    public class HttpError {\r\n    \r\n      private final int status;\r\n      private String type;\r\n      private String title;\r\n      private String detail;\r\n      private String instance;\r\n    \r\n    }\r\n\r\n    @SuperBuilder\r\n    @EqualsAndHashCode(callSuper = true)\r\n    public class BadRequestError extends HttpError {\r\n    \r\n      public static BadRequestError.BadRequestErrorBuilder&lt;?, ?&gt; builder(){\r\n        return new BadRequestError.BadRequestErrorBuilderImpl()\r\n            .title(&quot;Bad Request&quot;)\r\n            .status(400);\r\n      }","title":"Lombok Inherithance: how to set default value for field in superclass without redeclaring it?","body":"<p>You can define the builder method on your own and do initialization there. The default builder method name is <code>builder()</code> and even that can be customized with <code>@SuperBuilder(builderMethodName = &quot;myBuilderMethodName&quot;)</code></p>\n<pre><code>@Getter\n@SuperBuilder\n@EqualsAndHashCode\npublic class HttpError {\n\n  private final int status;\n  private String type;\n  private String title;\n  private String detail;\n  private String instance;\n\n}\n\n@SuperBuilder\n@EqualsAndHashCode(callSuper = true)\npublic class BadRequestError extends HttpError {\n\n  public static BadRequestError.BadRequestErrorBuilder&lt;?, ?&gt; builder(){\n    return new BadRequestError.BadRequestErrorBuilderImpl()\n        .title(&quot;Bad Request&quot;)\n        .status(400);\n  }\n</code></pre>\n"}],"owner":{"account_id":8500862,"reputation":2930,"user_id":8737144,"display_name":"1Z10"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3002,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1683640189,"creation_date":1643221937,"question_id":70868565,"body_markdown":"I am using Lombok and I need a way to **automatically set the value for a superclass field** in the subclass, **without redeclaring it**.\r\n\r\n&gt; It is working fine on its own (`@SuperBuiler` and `@Builder.Default`) when using the builder, but it is giving troubles with Spring-Data MongoDB.\r\n&gt; \r\n\r\n    org.springframework.data.mapping.MappingException: Ambiguous field mapping detected! Both protected test.jackson.polymorphism.domain.enumeration.EvaluationType test.jackson.polymorphism.domain.models.EvaluationModel.type and private test.jackson.polymorphism.domain.enumeration.EvaluationType test.jackson.polymorphism.domain.models.QuantitativeEvaluationModel.type map to the same field name type! Disambiguate using @Field annotation!\r\n    \r\n    \tat org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity$AssertFieldNameUniquenessHandler.assertUniqueness(BasicMongoPersistentEntity.java:368)\r\n    \tat org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity$AssertFieldNameUniquenessHandler.doWithPersistentProperty(BasicMongoPersistentEntity.java:354)\r\n    \tat org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity$AssertFieldNameUniquenessHandler.doWithPersistentProperty(BasicMongoPersistentEntity.java:348)\r\n\r\n\r\n\r\n\r\n\r\n\r\nThese are my classes:\r\n\r\n    public enum EvaluationType{\r\n        QUALITATIVE, QUANTITATIVE;\r\n    }\r\n\r\n***\r\n\r\n    @Data\r\n    @SuperBuilder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public abstract class EvaluationModel {\r\n        protected EvaluationType type;\r\n        protected Integer evaluation;\r\n    }\r\n***\r\n\r\n    @Data\r\n    @SuperBuilder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class QualitativeEvaluationModel extends EvaluationModel {\r\n        /**\r\n         * How to set the default value for this field\r\n         * without redeclaring it?\r\n         */\r\n        @Builder.Default\r\n        private EvaluationType type = EvaluationType.QUALITATIVE;\r\n    }\r\n\r\n***\r\n\r\n    @Data\r\n    @SuperBuilder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class QuantitativeEvaluationModel extends EvaluationModel {\r\n        /**\r\n         * How to set the default value for this field\r\n         * without redeclaring it?\r\n         */\r\n        @Builder.Default\r\n        private EvaluationType type = EvaluationType.QUANTITATIVE;\r\n    \r\n        @Builder.Default\r\n        private String currencyCode = Currency.getInstance(&quot;EUR&quot;).getCurrencyCode();\r\n    \r\n        private BigDecimal economicValue;\r\n    }\r\n\r\nHow do I make these subclass to have a default value (mayb final) for the `type` field, but without redeclaring the field?\r\nThis should work both with the contructor and with the builder.","title":"Lombok Inherithance: how to set default value for field in superclass without redeclaring it?","body":"<p>I am using Lombok and I need a way to <strong>automatically set the value for a superclass field</strong> in the subclass, <strong>without redeclaring it</strong>.</p>\n<blockquote>\n<p>It is working fine on its own (<code>@SuperBuiler</code> and <code>@Builder.Default</code>) when using the builder, but it is giving troubles with Spring-Data MongoDB.</p>\n</blockquote>\n<pre><code>org.springframework.data.mapping.MappingException: Ambiguous field mapping detected! Both protected test.jackson.polymorphism.domain.enumeration.EvaluationType test.jackson.polymorphism.domain.models.EvaluationModel.type and private test.jackson.polymorphism.domain.enumeration.EvaluationType test.jackson.polymorphism.domain.models.QuantitativeEvaluationModel.type map to the same field name type! Disambiguate using @Field annotation!\n\n    at org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity$AssertFieldNameUniquenessHandler.assertUniqueness(BasicMongoPersistentEntity.java:368)\n    at org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity$AssertFieldNameUniquenessHandler.doWithPersistentProperty(BasicMongoPersistentEntity.java:354)\n    at org.springframework.data.mongodb.core.mapping.BasicMongoPersistentEntity$AssertFieldNameUniquenessHandler.doWithPersistentProperty(BasicMongoPersistentEntity.java:348)\n</code></pre>\n<p>These are my classes:</p>\n<pre><code>public enum EvaluationType{\n    QUALITATIVE, QUANTITATIVE;\n}\n</code></pre>\n<hr />\n<pre><code>@Data\n@SuperBuilder\n@NoArgsConstructor\n@AllArgsConstructor\npublic abstract class EvaluationModel {\n    protected EvaluationType type;\n    protected Integer evaluation;\n}\n</code></pre>\n<hr />\n<pre><code>@Data\n@SuperBuilder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class QualitativeEvaluationModel extends EvaluationModel {\n    /**\n     * How to set the default value for this field\n     * without redeclaring it?\n     */\n    @Builder.Default\n    private EvaluationType type = EvaluationType.QUALITATIVE;\n}\n</code></pre>\n<hr />\n<pre><code>@Data\n@SuperBuilder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class QuantitativeEvaluationModel extends EvaluationModel {\n    /**\n     * How to set the default value for this field\n     * without redeclaring it?\n     */\n    @Builder.Default\n    private EvaluationType type = EvaluationType.QUANTITATIVE;\n\n    @Builder.Default\n    private String currencyCode = Currency.getInstance(&quot;EUR&quot;).getCurrencyCode();\n\n    private BigDecimal economicValue;\n}\n</code></pre>\n<p>How do I make these subclass to have a default value (mayb final) for the <code>type</code> field, but without redeclaring the field?\nThis should work both with the contructor and with the builder.</p>\n"},{"tags":["java","sql-server","jdbc"],"comments":[{"owner":{"account_id":2312068,"reputation":90351,"user_id":2029983,"display_name":"Thom A"},"score":2,"creation_date":1683639729,"post_id":76209987,"comment_id":134395132,"body_markdown":"I *hope* by &quot;Image column&quot; you mean a column called `image` and not a column where it&#39;s data type is `image`; the `image` data type was deprecated in *2005* (**18 years ago**) and should not be used anymore.","body":"I <i>hope</i> by &quot;Image column&quot; you mean a column called <code>image</code> and not a column where it&#39;s data type is <code>image</code>; the <code>image</code> data type was deprecated in <i>2005</i> (<b>18 years ago</b>) and should not be used anymore."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1683640139,"post_id":76209987,"comment_id":134395233,"body_markdown":"Not posting as an answer because I&#39;m not sure enough, but this sounds like: You fetched the data once and this is a -you get to call `.getValue` only once- probably because the column&#39;s type is BLOB or CLOB (or, gasp, `image` - see @ThomA&#39;s excellent comment about how that would be bad), and that means it&#39;s streamed once-only and can&#39;t be streamed again. If true, the solution is to only call `.getValue()` once per row.","body":"Not posting as an answer because I&#39;m not sure enough, but this sounds like: You fetched the data once and this is a -you get to call <code>.getValue</code> only once- probably because the column&#39;s type is BLOB or CLOB (or, gasp, <code>image</code> - see @ThomA&#39;s excellent comment about how that would be bad), and that means it&#39;s streamed once-only and can&#39;t be streamed again. If true, the solution is to only call <code>.getValue()</code> once per row."},{"owner":{"account_id":25788667,"reputation":67,"user_id":19533061,"display_name":"sathish kumar"},"score":0,"creation_date":1683641318,"post_id":76209987,"comment_id":134395526,"body_markdown":"My image column is a datatype of image only @ThomA","body":"My image column is a datatype of image only @ThomA"},{"owner":{"account_id":25788667,"reputation":67,"user_id":19533061,"display_name":"sathish kumar"},"score":0,"creation_date":1683641367,"post_id":76209987,"comment_id":134395539,"body_markdown":"what datatype should i be used in order to solve this error?","body":"what datatype should i be used in order to solve this error?"},{"owner":{"account_id":2312068,"reputation":90351,"user_id":2029983,"display_name":"Thom A"},"score":1,"creation_date":1683641600,"post_id":76209987,"comment_id":134395610,"body_markdown":"You should be using `varbinary(MAX)`, @sathishkumar . As I mentioned, `image` was deprecated in *2005*.","body":"You should be using <code>varbinary(MAX)</code>, @sathishkumar . As I mentioned, <code>image</code> was deprecated in <i>2005</i>."},{"owner":{"account_id":25788667,"reputation":67,"user_id":19533061,"display_name":"sathish kumar"},"score":0,"creation_date":1683641653,"post_id":76209987,"comment_id":134395620,"body_markdown":"Ok @ThomA I will use this datatype and let u know","body":"Ok @ThomA I will use this datatype and let u know"}],"owner":{"account_id":25788667,"reputation":67,"user_id":19533061,"display_name":"sathish kumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683639777,"creation_date":1683639541,"question_id":76209987,"body_markdown":"I am trying to access the image file in my SQL Server. I am running an Stored procedure and able to get the results in the resultset, but while accessing to the particular image column, it is throwing.\r\n\r\n```\r\ncom.microsoft.sqlserver.jdbc.SQLServerException: The data has been accessed and is not available for this column or parameter.\r\n&#160;&#160;&#160; at com.microsoft.sqlserver.jdbc.ServerDTVImpl.getValue(dtv.java:3712) ~[sqljdbc_1.2.jar:?]\r\n&#160;&#160;&#160; at com.microsoft.sqlserver.jdbc.DTV.getValue(dtv.java:247) ~[sqljdbc_1.2.jar:?]\r\n&#160;&#160;&#160; at com.microsoft.sqlserver.jdbc.Column.getValue(Column.java:190) ~[sqljdbc_1.2.jar:?]\r\n&#160;&#160;&#160; at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getValue(SQLServerResultSet.java:2053) ~[sqljdbc_1.2.jar:?]\r\n&#160;&#160;&#160; at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getValue(SQLServerResultSet.java:2048) ~[sqljdbc_1.2.jar:?]\r\n&#160;&#160;&#160; at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getStream(SQLServerResultSet.java:2067) ~[sqljdbc_1.2.jar:?]\r\n&#160;&#160;&#160; at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getBinaryStream(SQLServerResultSet.java:2140) ~[sqljdbc_1.2.jar:?]```","title":"The data has been accessed and is not available for this column or parameter","body":"<p>I am trying to access the image file in my SQL Server. I am running an Stored procedure and able to get the results in the resultset, but while accessing to the particular image column, it is throwing.</p>\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException: The data has been accessed and is not available for this column or parameter.\n at com.microsoft.sqlserver.jdbc.ServerDTVImpl.getValue(dtv.java:3712) ~[sqljdbc_1.2.jar:?]\n at com.microsoft.sqlserver.jdbc.DTV.getValue(dtv.java:247) ~[sqljdbc_1.2.jar:?]\n at com.microsoft.sqlserver.jdbc.Column.getValue(Column.java:190) ~[sqljdbc_1.2.jar:?]\n at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getValue(SQLServerResultSet.java:2053) ~[sqljdbc_1.2.jar:?]\n at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getValue(SQLServerResultSet.java:2048) ~[sqljdbc_1.2.jar:?]\n at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getStream(SQLServerResultSet.java:2067) ~[sqljdbc_1.2.jar:?]\n at com.microsoft.sqlserver.jdbc.SQLServerResultSet.getBinaryStream(SQLServerResultSet.java:2140) ~[sqljdbc_1.2.jar:?]```\n</code></pre>\n"},{"tags":["java","casting"],"owner":{"account_id":11321679,"reputation":11,"user_id":8301871,"display_name":"Dr. March"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1499947502,"answer_count":0,"score":1,"last_activity_date":1683639530,"creation_date":1499947367,"question_id":45080063,"body_markdown":"```\r\nint i;\r\nbyte b;\r\n\r\ni = 1782;\r\n\r\nb = (byte) i;\r\n\r\nSystem.out.print(b);\r\n```\r\nHere I get `-10` but cannot understand why. Please explain my how casts in Java work.","title":"Why does casting 1782 to byte yield -10 in Java?","body":"<pre><code>int i;\nbyte b;\n\ni = 1782;\n\nb = (byte) i;\n\nSystem.out.print(b);\n</code></pre>\n<p>Here I get <code>-10</code> but cannot understand why. Please explain my how casts in Java work.</p>\n"},{"tags":["java","android","android-intent","android-widget","android-pendingintent"],"owner":{"account_id":10916684,"reputation":3936,"user_id":8024296,"display_name":"Paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683639336,"creation_date":1683639336,"question_id":76209955,"body_markdown":"When the widget is inserted via `requestPinAppWidget` and the user accepts I have to make the widget retrieve the information that is inside the intent Bundle, and then save this information for the single widget instance.\r\n\r\nI&#39;ve tried various ways to also use `onReceive` but I can&#39;t get the data.\r\n\r\nCan you give me a hand?\r\n\r\nMainActivity.java\r\n```java\r\npublic class MainActivity extends AppCompatActivity {\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Intent intent = getIntent();\r\n        String action = intent.getAction();\r\n        String type = intent.getType();\r\n\r\n        if (Intent.ACTION_SEND.equals(action) &amp;&amp; type != null) {\r\n            if (&quot;text/plain&quot;.equals(type)) {\r\n                String url = intent.getStringExtra(Intent.EXTRA_TEXT);\r\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n                    AppWidgetManager mAppWidgetManager = getSystemService(AppWidgetManager.class);\r\n                    if (mAppWidgetManager.isRequestPinAppWidgetSupported()) {\r\n                        ComponentName myProvider = new ComponentName(MainActivity.this, MyWidget.class);\r\n\r\n                        Bundle b = new Bundle();\r\n                        b.putString(&quot;url&quot;, url);\r\n\r\n                        Log.d(&quot;MainActivity&quot;, url);\r\n                        Log.d(&quot;MainActivity&quot;, b.toString());\r\n\r\n                        Intent pinnedWidgetCallbackIntent = new Intent(MainActivity.this, MyWidget.class);\r\n                        PendingIntent successCallback = PendingIntent.getBroadcast(MainActivity.this, 0,\r\n                                pinnedWidgetCallbackIntent, PendingIntent.FLAG_IMMUTABLE);\r\n\r\n                        mAppWidgetManager.requestPinAppWidget(myProvider, b, successCallback);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npackage com.myapp.test;\r\n\r\nimport android.appwidget.AppWidgetManager;\r\nimport android.appwidget.AppWidgetProvider;\r\nimport android.content.Context;\r\nimport android.util.Log;\r\nimport android.widget.RemoteViews;\r\n\r\n\r\npublic class MyWidget extends AppWidgetProvider {\r\n    String values = &quot;MyWidget&quot;;\r\n\r\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\r\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\r\n\r\n        Log.d(&quot;MyWidget3&quot;, values);\r\n\r\n        //set the value in the textview\r\n        views.setTextViewText(R.id.text, values);\r\n\r\n        //update the widget\r\n        appWidgetManager.updateAppWidget(appWidgetId, views);\r\n\r\n        //reschedule the widget refresh\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n        alarmHandler.setAlarmManager();\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\r\n    }\r\n\r\n/*@Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        super.onReceive(context, intent);\r\n        Bundle bundle = intent.getExtras();\r\n        if(bundle != null) {\r\n            String url = bundle.getString(&quot;url&quot;, &quot;No value&quot;);\r\n            Log.i(&quot;TAG&quot;, url);\r\n            Log.d(&quot;TAG2&quot;, bundle.toString());\r\n        }\r\n    }*/\r\n\r\n    @Override\r\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\r\n        for (int appWidgetId: appWidgetIds) {\r\n            updateAppWidget(context, appWidgetManager, appWidgetId);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDisabled(Context context) {\r\n        //stop updating the widget\r\n        AlarmHandler alarmHandler = new AlarmHandler(context);\r\n        alarmHandler.cancelAlarmManager();\r\n\r\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\r\n    }\r\n}\r\n```","title":"Android java take value of Bundle of requestPinAppWidget","body":"<p>When the widget is inserted via <code>requestPinAppWidget</code> and the user accepts I have to make the widget retrieve the information that is inside the intent Bundle, and then save this information for the single widget instance.</p>\n<p>I've tried various ways to also use <code>onReceive</code> but I can't get the data.</p>\n<p>Can you give me a hand?</p>\n<p>MainActivity.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends AppCompatActivity {\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Intent intent = getIntent();\n        String action = intent.getAction();\n        String type = intent.getType();\n\n        if (Intent.ACTION_SEND.equals(action) &amp;&amp; type != null) {\n            if (&quot;text/plain&quot;.equals(type)) {\n                String url = intent.getStringExtra(Intent.EXTRA_TEXT);\n                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                    AppWidgetManager mAppWidgetManager = getSystemService(AppWidgetManager.class);\n                    if (mAppWidgetManager.isRequestPinAppWidgetSupported()) {\n                        ComponentName myProvider = new ComponentName(MainActivity.this, MyWidget.class);\n\n                        Bundle b = new Bundle();\n                        b.putString(&quot;url&quot;, url);\n\n                        Log.d(&quot;MainActivity&quot;, url);\n                        Log.d(&quot;MainActivity&quot;, b.toString());\n\n                        Intent pinnedWidgetCallbackIntent = new Intent(MainActivity.this, MyWidget.class);\n                        PendingIntent successCallback = PendingIntent.getBroadcast(MainActivity.this, 0,\n                                pinnedWidgetCallbackIntent, PendingIntent.FLAG_IMMUTABLE);\n\n                        mAppWidgetManager.requestPinAppWidget(myProvider, b, successCallback);\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myapp.test;\n\nimport android.appwidget.AppWidgetManager;\nimport android.appwidget.AppWidgetProvider;\nimport android.content.Context;\nimport android.util.Log;\nimport android.widget.RemoteViews;\n\n\npublic class MyWidget extends AppWidgetProvider {\n    String values = &quot;MyWidget&quot;;\n\n    void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId) {\n        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_design);\n\n        Log.d(&quot;MyWidget3&quot;, values);\n\n        //set the value in the textview\n        views.setTextViewText(R.id.text, values);\n\n        //update the widget\n        appWidgetManager.updateAppWidget(appWidgetId, views);\n\n        //reschedule the widget refresh\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n        alarmHandler.setAlarmManager();\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget updated!&quot;);\n    }\n\n/*@Override\n    public void onReceive(Context context, Intent intent) {\n        super.onReceive(context, intent);\n        Bundle bundle = intent.getExtras();\n        if(bundle != null) {\n            String url = bundle.getString(&quot;url&quot;, &quot;No value&quot;);\n            Log.i(&quot;TAG&quot;, url);\n            Log.d(&quot;TAG2&quot;, bundle.toString());\n        }\n    }*/\n\n    @Override\n    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {\n        for (int appWidgetId: appWidgetIds) {\n            updateAppWidget(context, appWidgetManager, appWidgetId);\n        }\n    }\n\n    @Override\n    public void onDisabled(Context context) {\n        //stop updating the widget\n        AlarmHandler alarmHandler = new AlarmHandler(context);\n        alarmHandler.cancelAlarmManager();\n\n        Log.d(&quot;WIDGET&quot;, &quot;Widget removed!&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","functional-programming","immutability"],"comments":[{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1673128033,"post_id":203475,"comment_id":132429779,"body_markdown":"There are ways to reliably detect immutability in Java. It&#39;s a huge subject, though, on how to go about figuring that out. I have provided an Answer to another very similar question addressing how you might go about thoroughly approaching this problem space. https://stackoverflow.com/a/75043881/501113","body":"There are ways to reliably detect immutability in Java. It&#39;s a huge subject, though, on how to go about figuring that out. I have provided an Answer to another very similar question addressing how you might go about thoroughly approaching this problem space. <a href=\"https://stackoverflow.com/a/75043881/501113\">stackoverflow.com/a/75043881/501113</a>"}],"answers":[{"comments":[{"owner":{"account_id":9774,"reputation":3303,"user_id":18187,"accept_rate":83,"display_name":"ddimitrov"},"score":1,"creation_date":1224076452,"post_id":203500,"comment_id":78624,"body_markdown":"Also, in the JCIP book there is discussion about effectively immutable classes like java.util.Date, which in practice are used as immutable even if they aren&#39;t","body":"Also, in the JCIP book there is discussion about effectively immutable classes like java.util.Date, which in practice are used as immutable even if they aren&#39;t"}],"tags":[],"owner":{"account_id":1254,"reputation":57918,"user_id":1666,"accept_rate":84,"display_name":"SCdF"},"comment_count":1,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1224037353,"creation_date":1224036723,"answer_id":203500,"question_id":203475,"body_markdown":"Basically no. \r\n\r\nYou could build a giant white-list of accepted classes but I think the less crazy way would be to just write in the documentation for the collection that everything that goes is this collection *must* be immutable.\r\n\r\n**Edit:** Other people have suggested having an immutable annotation. This is fine, but you need the documentation as well. Otherwise people will just think &quot;if I put this annotation on my class I can store it in the collection&quot; and will just chuck it on anything, immutable and mutable classes alike. In fact, I would be wary of having an immutable annotation just in case people think that annotation *makes* their class immutable.","title":"How do I identify immutable objects in Java","body":"<p>Basically no. </p>\n\n<p>You could build a giant white-list of accepted classes but I think the less crazy way would be to just write in the documentation for the collection that everything that goes is this collection <em>must</em> be immutable.</p>\n\n<p><strong>Edit:</strong> Other people have suggested having an immutable annotation. This is fine, but you need the documentation as well. Otherwise people will just think \"if I put this annotation on my class I can store it in the collection\" and will just chuck it on anything, immutable and mutable classes alike. In fact, I would be wary of having an immutable annotation just in case people think that annotation <em>makes</em> their class immutable.</p>\n"},{"comments":[{"owner":{"account_id":1254,"reputation":57918,"user_id":1666,"accept_rate":84,"display_name":"SCdF"},"score":0,"creation_date":1224037565,"post_id":203504,"comment_id":77881,"body_markdown":"If you&#39;re depending on the author keeping his word that it&#39;s immutable what&#39;s the point? It&#39;s not adding anything, and it could potentially cause harm if people think the annotation *makes* their class immutable..","body":"If you&#39;re depending on the author keeping his word that it&#39;s immutable what&#39;s the point? It&#39;s not adding anything, and it could potentially cause harm if people think the annotation <i>makes</i> their class immutable.."},{"owner":{"account_id":2239,"reputation":7171,"user_id":3087,"display_name":"Cem Catikkas"},"score":0,"creation_date":1224039362,"post_id":203504,"comment_id":77915,"body_markdown":"The idea is hopefully in the near future you&#39;ll have some static code analysis - maybe integrated into your IDE - to go through your code and check that your @Immutable annotated classes *are* actually immutable.","body":"The idea is hopefully in the near future you&#39;ll have some static code analysis - maybe integrated into your IDE - to go through your code and check that your @Immutable annotated classes <i>are</i> actually immutable."},{"owner":{"account_id":9610,"reputation":4810,"user_id":17834,"accept_rate":83,"display_name":"Brandon DuRette"},"score":0,"creation_date":1224045856,"post_id":203504,"comment_id":78041,"body_markdown":"At Jason&#39;s company (which I also work at), we also code review every line of code that&#39;s written. So, if you put the @Immutable attribute on a class that&#39;s not immutable, you&#39;re gonna get called on it. Ask Jason, I&#39;ve done it several times.","body":"At Jason&#39;s company (which I also work at), we also code review every line of code that&#39;s written. So, if you put the @Immutable attribute on a class that&#39;s not immutable, you&#39;re gonna get called on it. Ask Jason, I&#39;ve done it several times."},{"owner":{"account_id":9610,"reputation":4810,"user_id":17834,"accept_rate":83,"display_name":"Brandon DuRette"},"score":2,"creation_date":1224045942,"post_id":203504,"comment_id":78042,"body_markdown":"By the way, the idea for the @Immutable attribute is not original, it comes from Java Concurrency In Practice by Brian Goetz.","body":"By the way, the idea for the @Immutable attribute is not original, it comes from Java Concurrency In Practice by Brian Goetz."},{"owner":{"account_id":4309,"reputation":7967,"user_id":6414,"accept_rate":57,"display_name":"Henry B"},"score":1,"creation_date":1224059585,"post_id":203504,"comment_id":78254,"body_markdown":"Also, @SCdF, you&#39;re always relying on the author to if a class is immutable or not in Java, and even then there are ways of changing any member variables. The Annotation is probably the best of what YOU might call the worst.","body":"Also, @SCdF, you&#39;re always relying on the author to if a class is immutable or not in Java, and even then there are ways of changing any member variables. The Annotation is probably the best of what YOU might call the worst."},{"owner":{"account_id":8175,"reputation":24189,"user_id":14570,"accept_rate":81,"display_name":"mcherm"},"score":0,"creation_date":1224076285,"post_id":203504,"comment_id":78611,"body_markdown":"The annotation is a great idea. I&#39;m not sure it meets all my needs, because of the danger people would apply it indiscriminately.","body":"The annotation is a great idea. I&#39;m not sure it meets all my needs, because of the danger people would apply it indiscriminately."},{"owner":{"account_id":1254,"reputation":57918,"user_id":1666,"accept_rate":84,"display_name":"SCdF"},"score":0,"creation_date":1224098174,"post_id":203504,"comment_id":79480,"body_markdown":"I&#39;m not saying the annotation is wrong, I&#39;m saying that it&#39;s like security by obscurity-- it gives a false sense of security. In this case a false comfort that your code is immutable.","body":"I&#39;m not saying the annotation is wrong, I&#39;m saying that it&#39;s like security by obscurity-- it gives a false sense of security. In this case a false comfort that your code is immutable."},{"owner":{"account_id":1254,"reputation":57918,"user_id":1666,"accept_rate":84,"display_name":"SCdF"},"score":0,"creation_date":1224098275,"post_id":203504,"comment_id":79485,"body_markdown":"Also, all you&#39;ve done is made sure that the original author (assuming he typed the @immutable himself) has *possibly* thought about what that means. You have no such guarantee on people who extend or alter the class in a year and never even *notice* the @immutable at the top.","body":"Also, all you&#39;ve done is made sure that the original author (assuming he typed the @immutable himself) has <i>possibly</i> thought about what that means. You have no such guarantee on people who extend or alter the class in a year and never even <i>notice</i> the @immutable at the top."},{"owner":{"account_id":3416,"reputation":81767,"user_id":4926,"accept_rate":85,"display_name":"Jason Cohen"},"score":0,"creation_date":1236184206,"post_id":203504,"comment_id":423746,"body_markdown":"@SCdF: Yes, but welcome to software development.  It&#39;s true of *everything* that someone might come along later and abuse it.  They might not read the JavaDoc.  They might not grok the spirit of the methods.  They might not understand how the class is *now* used, as opposed to the design.","body":"@SCdF: Yes, but welcome to software development.  It&#39;s true of <i>everything</i> that someone might come along later and abuse it.  They might not read the JavaDoc.  They might not grok the spirit of the methods.  They might not understand how the class is <i>now</i> used, as opposed to the design."}],"tags":[],"owner":{"account_id":3416,"reputation":81767,"user_id":4926,"accept_rate":85,"display_name":"Jason Cohen"},"comment_count":9,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1224036858,"creation_date":1224036858,"answer_id":203504,"question_id":203475,"body_markdown":"At my company we&#39;ve defined an Attribute called `@Immutable`.  If you choose to attach that to a class, it means you promise you&#39;re immutable.\r\n\r\nIt works for documentation, and in your case it would work as a filter.\r\n\r\nOf course you&#39;re still depending on the author keeping his word about being immutable, but since the author explicitly added the annotation it&#39;s a reasonable assumption.","title":"How do I identify immutable objects in Java","body":"<p>At my company we've defined an Attribute called <code>@Immutable</code>.  If you choose to attach that to a class, it means you promise you're immutable.</p>\n\n<p>It works for documentation, and in your case it would work as a filter.</p>\n\n<p>Of course you're still depending on the author keeping his word about being immutable, but since the author explicitly added the annotation it's a reasonable assumption.</p>\n"},{"comments":[{"owner":{"account_id":1254,"reputation":57918,"user_id":1666,"accept_rate":84,"display_name":"SCdF"},"score":0,"creation_date":1224037291,"post_id":203506,"comment_id":77876,"body_markdown":"How would you stop people from just putting that annotation on non-immutable classes?","body":"How would you stop people from just putting that annotation on non-immutable classes?"},{"owner":{"account_id":13443,"reputation":10807,"user_id":27011,"accept_rate":67,"display_name":"Simon Lehmann"},"score":0,"creation_date":1224037538,"post_id":203506,"comment_id":77880,"body_markdown":"You don&#39;t stop them. If you can&#39;t follow instructions how to use something, you shouldn&#39;t try to program it.","body":"You don&#39;t stop them. If you can&#39;t follow instructions how to use something, you shouldn&#39;t try to program it."},{"owner":{"account_id":1254,"reputation":57918,"user_id":1666,"accept_rate":84,"display_name":"SCdF"},"score":0,"creation_date":1224037871,"post_id":203506,"comment_id":77886,"body_markdown":"@Simon, OK, so then what&#39;s the point of the annotation at all? Can&#39;t you just assume that they are smart enough to read the documentation about the collection and thus know that it&#39;s only for immutable things?","body":"@Simon, OK, so then what&#39;s the point of the annotation at all? Can&#39;t you just assume that they are smart enough to read the documentation about the collection and thus know that it&#39;s only for immutable things?"},{"owner":{"account_id":4899,"reputation":103686,"user_id":7595,"accept_rate":70,"display_name":"Pablo Fernandez"},"score":0,"creation_date":1224038091,"post_id":203506,"comment_id":77891,"body_markdown":"@SCdF, I tried to give a cost-effective approach, maybe he can make it work. Saying &quot;NO, YOU CANT&quot; is the same as not saying anything at all (or worst)","body":"@SCdF, I tried to give a cost-effective approach, maybe he can make it work. Saying &quot;NO, YOU CANT&quot; is the same as not saying anything at all (or worst)"},{"owner":{"account_id":13443,"reputation":10807,"user_id":27011,"accept_rate":67,"display_name":"Simon Lehmann"},"score":0,"creation_date":1224039439,"post_id":203506,"comment_id":77916,"body_markdown":"Now that I have thought about it a bit more, I have to partially agree, that having an annotation might lead to confusion and misunderstandings.","body":"Now that I have thought about it a bit more, I have to partially agree, that having an annotation might lead to confusion and misunderstandings."},{"owner":{"account_id":8175,"reputation":24189,"user_id":14570,"accept_rate":81,"display_name":"mcherm"},"score":0,"creation_date":1224076357,"post_id":203506,"comment_id":78618,"body_markdown":"I fear that some of our developers would incompletely understand the concept and misuse the annotation. Otherwise, it would be an excellent solution. Combined with validation it might work perfectly.","body":"I fear that some of our developers would incompletely understand the concept and misuse the annotation. Otherwise, it would be an excellent solution. Combined with validation it might work perfectly."}],"tags":[],"owner":{"account_id":4899,"reputation":103686,"user_id":7595,"accept_rate":70,"display_name":"Pablo Fernandez"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1224036922,"creation_date":1224036922,"answer_id":203506,"question_id":203475,"body_markdown":"You Can Ask your clients to add metadata (annotations) and check them at runtime with reflection, like this:\r\n\r\nMetadata:\r\n\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.CLASS)\r\n    public @interface Immutable{ }\r\n\r\nClient Code:\r\n\r\n    @Immutable\r\n    public class ImmutableRectangle {\r\n        private final int width;\r\n        private final int height;\r\n        public ImmutableRectangle(int width, int height) {\r\n            this.width = width;\r\n            this.height = height;\r\n        }\r\n        public int getWidth() { return width; }\r\n        public int getHeight() { return height; }\r\n    }\r\n\r\n\r\nThen by using reflection on the class, check if it has the annotation (I would paste the code but its boilerplate and can be found easily online)","title":"How do I identify immutable objects in Java","body":"<p>You Can Ask your clients to add metadata (annotations) and check them at runtime with reflection, like this:</p>\n\n<p>Metadata:</p>\n\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.CLASS)\npublic @interface Immutable{ }\n</code></pre>\n\n<p>Client Code:</p>\n\n<pre><code>@Immutable\npublic class ImmutableRectangle {\n    private final int width;\n    private final int height;\n    public ImmutableRectangle(int width, int height) {\n        this.width = width;\n        this.height = height;\n    }\n    public int getWidth() { return width; }\n    public int getHeight() { return height; }\n}\n</code></pre>\n\n<p>Then by using reflection on the class, check if it has the annotation (I would paste the code but its boilerplate and can be found easily online)</p>\n"},{"comments":[{"owner":{"account_id":3216,"reputation":12095,"user_id":4600,"display_name":"marcospereira"},"score":0,"creation_date":1224041857,"post_id":203571,"comment_id":77963,"body_markdown":"Maybe &quot;isValidFieldType&quot; could do a recursion to isImmutable. :-)","body":"Maybe &quot;isValidFieldType&quot; could do a recursion to isImmutable. :-)"},{"owner":{"account_id":8175,"reputation":24189,"user_id":14570,"accept_rate":81,"display_name":"mcherm"},"score":0,"creation_date":1224076446,"post_id":203571,"comment_id":78623,"body_markdown":"With marcospereira&#39;s modification, this could be quite useful! We could also recurse on the superclass (allowing Object as a special case) which would eliminate the need to inherit from a common ancestor. This is good!","body":"With marcospereira&#39;s modification, this could be quite useful! We could also recurse on the superclass (allowing Object as a special case) which would eliminate the need to inherit from a common ancestor. This is good!"},{"owner":{"account_id":13443,"reputation":10807,"user_id":27011,"accept_rate":67,"display_name":"Simon Lehmann"},"score":0,"creation_date":1224086509,"post_id":203571,"comment_id":79006,"body_markdown":"These are good suggestions. I tried to avoid recursing on the superclasses and members for the sake of simplicity and performance (the recursion could get quite extensive). But I&#39;ll add these suggestions to the anweser.","body":"These are good suggestions. I tried to avoid recursing on the superclasses and members for the sake of simplicity and performance (the recursion could get quite extensive). But I&#39;ll add these suggestions to the anweser."},{"owner":{"account_id":11511,"reputation":9525,"user_id":22227,"accept_rate":62,"display_name":"Martin Probst"},"score":0,"creation_date":1224505124,"post_id":203571,"comment_id":87663,"body_markdown":"If you&#39;re checking the class of a specific instance, there is IMHO no need for it to be final - if another instance comes by that is a subclass, it will be checked anyways.","body":"If you&#39;re checking the class of a specific instance, there is IMHO no need for it to be final - if another instance comes by that is a subclass, it will be checked anyways."},{"owner":{"account_id":2908,"reputation":125963,"user_id":4120,"accept_rate":80,"display_name":"Grundlefleck"},"score":0,"creation_date":1260465071,"post_id":203571,"comment_id":1782431,"body_markdown":"&quot;There is no reliable way to detect if a class is immutable.&quot; - this is not the case. Perhaps you mean using just reflection? But bytecode analysis using a library such as BCEL or ASM would allow discovering if a class is mutable. In fact, I&#39;ve just done 95% of that as part of a university assignment.","body":"&quot;There is no reliable way to detect if a class is immutable.&quot; - this is not the case. Perhaps you mean using just reflection? But bytecode analysis using a library such as BCEL or ASM would allow discovering if a class is mutable. In fact, I&#39;ve just done 95% of that as part of a university assignment."},{"owner":{"account_id":13443,"reputation":10807,"user_id":27011,"accept_rate":67,"display_name":"Simon Lehmann"},"score":0,"creation_date":1260527017,"post_id":203571,"comment_id":1787639,"body_markdown":"@Grundlefleck: Could you explain how to do this using bytecode analysis? Can this be done easily during runtime? I find this really interesting and it would probably help others who want to do this in the future.","body":"@Grundlefleck: Could you explain how to do this using bytecode analysis? Can this be done easily during runtime? I find this really interesting and it would probably help others who want to do this in the future."},{"owner":{"account_id":2908,"reputation":125963,"user_id":4120,"accept_rate":80,"display_name":"Grundlefleck"},"score":0,"creation_date":1260992996,"post_id":203571,"comment_id":1822891,"body_markdown":"@Simon, there are several checks which could ensure a class is immutable - if the fields are immutable and and can&#39;t be reassigned, etc. The tool I created checked these things with ASM. It was static, but I don&#39;t know of any reason why it wouldn&#39;t work at run time. If you&#39;re interested in hearing more, you can contact me at grundlefleck at gmail dot com. The tool is basic, written in two weeks, but if you&#39;re interested, I can see if I can get it thrown up on googlecode or something.","body":"@Simon, there are several checks which could ensure a class is immutable - if the fields are immutable and and can&#39;t be reassigned, etc. The tool I created checked these things with ASM. It was static, but I don&#39;t know of any reason why it wouldn&#39;t work at run time. If you&#39;re interested in hearing more, you can contact me at grundlefleck at gmail dot com. The tool is basic, written in two weeks, but if you&#39;re interested, I can see if I can get it thrown up on googlecode or something."},{"owner":{"account_id":1746735,"reputation":1497,"user_id":1596751,"accept_rate":46,"display_name":"plzdontkillme"},"score":0,"creation_date":1404407289,"post_id":203571,"comment_id":38038652,"body_markdown":"why do think making attribute primitive helps immutability. I can modify it using reflection.","body":"why do think making attribute primitive helps immutability. I can modify it using reflection."},{"owner":{"account_id":8732367,"reputation":156,"user_id":6531984,"display_name":"Sgene9"},"score":0,"creation_date":1507641066,"post_id":203571,"comment_id":80283669,"body_markdown":"Anything can be modified with reflection. I immutability assumes regular program that obeys the java access modifiers","body":"Anything can be modified with reflection. I immutability assumes regular program that obeys the java access modifiers"}],"tags":[],"owner":{"account_id":13443,"reputation":10807,"user_id":27011,"accept_rate":67,"display_name":"Simon Lehmann"},"comment_count":9,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1224089362,"creation_date":1224039141,"answer_id":203571,"question_id":203475,"body_markdown":"There is no reliable way to detect if a class is immutable. This is because there are so many ways a property of a class might be altered and you can&#39;t detect all of them via reflection.\r\n\r\nThe only way to get close to this is:\r\n\r\n  - Only allow final properties of types that are immutable (primitive types and classes you know are immutable),\r\n  - Require the class to be final itself\r\n  - Require that they inherit from a base class you provide (which is guaranteed to be immutable)\r\n\r\nThen you can check with the following code if the object you have is immutable:\r\n\r\n\tstatic boolean isImmutable(Object obj) {\r\n\t\tClass&lt;?&gt; objClass = obj.getClass();\r\n\t\t\r\n\t\t// Class of the object must be a direct child class of the required class\r\n\t\tClass&lt;?&gt; superClass = objClass.getSuperclass();\r\n\t\tif (!Immutable.class.equals(superClass)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// Class must be final\r\n\t\tif (!Modifier.isFinal(objClass.getModifiers())) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// Check all fields defined in the class for type and if they are final\r\n\t\tField[] objFields = objClass.getDeclaredFields();\r\n\t\tfor (int i = 0; i &lt; objFields.length; i++) {\r\n\t\t\tif (!Modifier.isFinal(objFields[i].getModifiers())\r\n\t\t\t\t\t|| !isValidFieldType(objFields[i].getType())) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// Lets hope we didn&#39;t forget something\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tstatic boolean isValidFieldType(Class&lt;?&gt; type) {\r\n\t\t// Check for all allowed property types...\r\n\t\treturn type.isPrimitive() || String.class.equals(type);\r\n\t}\r\n\r\n**Update:** As suggested in the comments, it could be extended to recurse on the superclass instead of checking for a certain class. It was also suggested to recursively use isImmutable in the isValidFieldType Method. This could probably work and I have also done some testing. But this is not trivial. You can&#39;t just check all field types with a call to isImmutable, because String already fails this test (its field `hash` is not final!). Also you are easily running into endless recursions, causing *StackOverflowErrors* ;) Other problems might be caused by generics, where you also have to check their types for immutablity.\r\n\r\nI think with some work, these potential problems might be solved somehow. But then, you have to ask yourself first if it really is worth it (also performance wise).\r\n\r\n","title":"How do I identify immutable objects in Java","body":"<p>There is no reliable way to detect if a class is immutable. This is because there are so many ways a property of a class might be altered and you can't detect all of them via reflection.</p>\n\n<p>The only way to get close to this is:</p>\n\n<ul>\n<li>Only allow final properties of types that are immutable (primitive types and classes you know are immutable),</li>\n<li>Require the class to be final itself</li>\n<li>Require that they inherit from a base class you provide (which is guaranteed to be immutable)</li>\n</ul>\n\n<p>Then you can check with the following code if the object you have is immutable:</p>\n\n<pre><code>static boolean isImmutable(Object obj) {\n    Class&lt;?&gt; objClass = obj.getClass();\n\n    // Class of the object must be a direct child class of the required class\n    Class&lt;?&gt; superClass = objClass.getSuperclass();\n    if (!Immutable.class.equals(superClass)) {\n        return false;\n    }\n\n    // Class must be final\n    if (!Modifier.isFinal(objClass.getModifiers())) {\n        return false;\n    }\n\n    // Check all fields defined in the class for type and if they are final\n    Field[] objFields = objClass.getDeclaredFields();\n    for (int i = 0; i &lt; objFields.length; i++) {\n        if (!Modifier.isFinal(objFields[i].getModifiers())\n                || !isValidFieldType(objFields[i].getType())) {\n            return false;\n        }\n    }\n\n    // Lets hope we didn't forget something\n    return true;\n}\n\nstatic boolean isValidFieldType(Class&lt;?&gt; type) {\n    // Check for all allowed property types...\n    return type.isPrimitive() || String.class.equals(type);\n}\n</code></pre>\n\n<p><strong>Update:</strong> As suggested in the comments, it could be extended to recurse on the superclass instead of checking for a certain class. It was also suggested to recursively use isImmutable in the isValidFieldType Method. This could probably work and I have also done some testing. But this is not trivial. You can't just check all field types with a call to isImmutable, because String already fails this test (its field <code>hash</code> is not final!). Also you are easily running into endless recursions, causing <em>StackOverflowErrors</em> ;) Other problems might be caused by generics, where you also have to check their types for immutablity.</p>\n\n<p>I think with some work, these potential problems might be solved somehow. But then, you have to ask yourself first if it really is worth it (also performance wise).</p>\n"},{"comments":[{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":1,"creation_date":1673363966,"post_id":203639,"comment_id":132479005,"body_markdown":"The book link has gone stale. Here&#39;s the latest version of the book (which I highly recommend, and have read through many times): https://smile.amazon.com/Effective-Java-Joshua-Bloch/dp/0134685997","body":"The book link has gone stale. Here&#39;s the latest version of the book (which I highly recommend, and have read through many times): <a href=\"https://smile.amazon.com/Effective-Java-Joshua-Bloch/dp/0134685997\" rel=\"nofollow noreferrer\">smile.amazon.com/Effective-Java-Joshua-Bloch/dp/0134685997</a>"}],"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1673378596,"creation_date":1224041690,"answer_id":203639,"question_id":203475,"body_markdown":"This could be another hint:\r\n\r\nIf the class has no setters then it cannot be mutated, granted the parameters it was created with are either &quot;primitive&quot; types or not mutable themselves.  \r\n\r\nAlso no methods could be overridden, all fields are final and private, \r\n\r\nI&#39;ll try to code something tomorrow for you, but  Simon&#39;s code using reflection looks pretty good. \r\n\r\nIn the mean time try to grab a copy of the &quot;Effective Java&quot; book by Josh Block, it has an Item related to this topic. While is does not for sure say how to detect an immutable class, it shows how to create a good one.\r\n\r\nThe item is called: &quot;Favor immutability&quot;\r\n\r\n \r\n\r\nUpdated link: https://www.amazon.com/Effective-Java-Joshua-Bloch/dp/0134685997\r\n\r\n\r\n\r\n","title":"How do I identify immutable objects in Java","body":"<p>This could be another hint:</p>\n<p>If the class has no setters then it cannot be mutated, granted the parameters it was created with are either &quot;primitive&quot; types or not mutable themselves.</p>\n<p>Also no methods could be overridden, all fields are final and private,</p>\n<p>I'll try to code something tomorrow for you, but  Simon's code using reflection looks pretty good.</p>\n<p>In the mean time try to grab a copy of the &quot;Effective Java&quot; book by Josh Block, it has an Item related to this topic. While is does not for sure say how to detect an immutable class, it shows how to create a good one.</p>\n<p>The item is called: &quot;Favor immutability&quot;</p>\n<p>Updated link: <a href=\"https://rads.stackoverflow.com/amzn/click/com/0134685997\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">https://www.amazon.com/Effective-Java-Joshua-Bloch/dp/0134685997</a></p>\n"},{"tags":[],"owner":{"account_id":8891,"reputation":3425,"user_id":16193,"accept_rate":88,"display_name":"Daniel Hiller"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1224048343,"creation_date":1224048343,"answer_id":203797,"question_id":203475,"body_markdown":"Like the other answerers already said, IMHO there is no reliable way to find out if an object is really immutable.\r\n\r\nI would just introduce an interface &quot;Immutable&quot; to check against when appending. This works as a hint that only immutable objects should be inserted for whatever reason you&#39;re doing it.\r\n\r\n    interface Immutable {}\r\n    \r\n    class MyImmutable implements Immutable{...}\r\n    \r\n    public void add(Object o) {\r\n      if (!(o instanceof Immutable) &amp;&amp; !checkIsImmutableBasePrimitive(o))\r\n        throw new IllegalArgumentException(&quot;o is not immutable!&quot;);\r\n      ...\r\n    }","title":"How do I identify immutable objects in Java","body":"<p>Like the other answerers already said, IMHO there is no reliable way to find out if an object is really immutable.</p>\n\n<p>I would just introduce an interface \"Immutable\" to check against when appending. This works as a hint that only immutable objects should be inserted for whatever reason you're doing it.</p>\n\n<pre><code>interface Immutable {}\n\nclass MyImmutable implements Immutable{...}\n\npublic void add(Object o) {\n  if (!(o instanceof Immutable) &amp;&amp; !checkIsImmutableBasePrimitive(o))\n    throw new IllegalArgumentException(\"o is not immutable!\");\n  ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8175,"reputation":24189,"user_id":14570,"accept_rate":81,"display_name":"mcherm"},"score":0,"creation_date":1224077778,"post_id":203961,"comment_id":78667,"body_markdown":"These are both really good warnings, neither of which I had really considered. I doubt that I need to defend against the recursively contained immutable object (simplest case would be an immutable object containing itself in a field!), but the other is a bit of a danger.","body":"These are both really good warnings, neither of which I had really considered. I doubt that I need to defend against the recursively contained immutable object (simplest case would be an immutable object containing itself in a field!), but the other is a bit of a danger."}],"tags":[],"owner":{"account_id":11511,"reputation":9525,"user_id":22227,"accept_rate":62,"display_name":"Martin Probst"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1224056598,"creation_date":1224056598,"answer_id":203961,"question_id":203475,"body_markdown":"&gt; In my code, I am creating a collection of objects which will be accessed by various threads in a fashion that is only safe if the objects are immutable.\r\n\r\nNot a direct answer to your question, but keep in mind that objects that are immutable are not automatically guaranteed to be thread safe (sadly). Code needs to be side-effect free to be thread safe, and that&#39;s quite a bit more difficult.\r\n\r\nSuppose you have this class:\r\n\r\n    class Foo {\r\n      final String x;\r\n      final Integer y;\r\n      ...\r\n    \r\n      public bar() {\r\n        Singleton.getInstance().foolAround();\r\n      }\r\n    }\r\n\r\nThen the `foolAround()` method might include some non-thread safe operations, which will blow up your app. And it&#39;s not possible to test for this using reflection, as the actual reference can only be found in the method body, not in the fields or exposed interface.\r\n\r\nOther than that, the others are correct: you can scan for all declared fields of the class, check if every one of them is final and also an immutable class, and you&#39;re done. I  don&#39;t think methods being final is a requirement.\r\n\r\nAlso, be careful about recursively checking dependent fields for immutability, you might end up with circles:\r\n\r\n    class A {\r\n      final B b; // might be immutable...\r\n    }\r\n    \r\n    class B {\r\n      final A a; // same so here.\r\n    }\r\n\r\nClasses A and B are perfectly immutable (and possibly even usable through some reflection hacks), but naive recursive code will go into an endless loop checking A, then B, then A again, onwards to B, ...\r\n\r\nYou can fix that with a &#39;seen&#39; map that disallows cycles, or with some really clever code that decides classes are immutable if all their dependees are immutable only depending on themselves, but that&#39;s going to be really complicated...","title":"How do I identify immutable objects in Java","body":"<blockquote>\n  <p>In my code, I am creating a collection of objects which will be accessed by various threads in a fashion that is only safe if the objects are immutable.</p>\n</blockquote>\n\n<p>Not a direct answer to your question, but keep in mind that objects that are immutable are not automatically guaranteed to be thread safe (sadly). Code needs to be side-effect free to be thread safe, and that's quite a bit more difficult.</p>\n\n<p>Suppose you have this class:</p>\n\n<pre><code>class Foo {\n  final String x;\n  final Integer y;\n  ...\n\n  public bar() {\n    Singleton.getInstance().foolAround();\n  }\n}\n</code></pre>\n\n<p>Then the <code>foolAround()</code> method might include some non-thread safe operations, which will blow up your app. And it's not possible to test for this using reflection, as the actual reference can only be found in the method body, not in the fields or exposed interface.</p>\n\n<p>Other than that, the others are correct: you can scan for all declared fields of the class, check if every one of them is final and also an immutable class, and you're done. I  don't think methods being final is a requirement.</p>\n\n<p>Also, be careful about recursively checking dependent fields for immutability, you might end up with circles:</p>\n\n<pre><code>class A {\n  final B b; // might be immutable...\n}\n\nclass B {\n  final A a; // same so here.\n}\n</code></pre>\n\n<p>Classes A and B are perfectly immutable (and possibly even usable through some reflection hacks), but naive recursive code will go into an endless loop checking A, then B, then A again, onwards to B, ...</p>\n\n<p>You can fix that with a 'seen' map that disallows cycles, or with some really clever code that decides classes are immutable if all their dependees are immutable only depending on themselves, but that's going to be really complicated...</p>\n"},{"comments":[{"owner":{"account_id":8891,"reputation":3425,"user_id":16193,"accept_rate":88,"display_name":"Daniel Hiller"},"score":0,"creation_date":1224067511,"post_id":204015,"comment_id":78374,"body_markdown":"How should he apply FindBugs while running his code? From what I understand he wants to check at runtime if a mutable object is added?","body":"How should he apply FindBugs while running his code? From what I understand he wants to check at runtime if a mutable object is added?"},{"owner":{"account_id":9774,"reputation":3303,"user_id":18187,"accept_rate":83,"display_name":"ddimitrov"},"score":0,"creation_date":1224076692,"post_id":204015,"comment_id":78632,"body_markdown":"He can use Findbugs at build time to reduce the number of missanotated classes and use the annotation at runtime.","body":"He can use Findbugs at build time to reduce the number of missanotated classes and use the annotation at runtime."},{"owner":{"account_id":8175,"reputation":24189,"user_id":14570,"accept_rate":81,"display_name":"mcherm"},"score":6,"creation_date":1224078229,"post_id":204015,"comment_id":78683,"body_markdown":"I hadn&#39;t realized that Findbugs did this analysis -- that&#39;s great! I took a look at the docs and it seems that it simply verifies that all fields of an annotated class are final (but does not verify that they all contain immutable objects).","body":"I hadn&#39;t realized that Findbugs did this analysis -- that&#39;s great! I took a look at the docs and it seems that it simply verifies that all fields of an annotated class are final (but does not verify that they all contain immutable objects)."},{"owner":{"account_id":406441,"reputation":32619,"user_id":775954,"accept_rate":85,"display_name":"Matthias Braun"},"score":0,"creation_date":1449505591,"post_id":204015,"comment_id":56024514,"body_markdown":"You can also enable IntelliJ to check your code against these annotations: [Tweet from Brian Goetz](https://twitter.com/briangoetz/status/8577345828). Here are the annotations as a Maven dependency: [link](http://mvnrepository.com/artifact/net.jcip/jcip-annotations/1.0)","body":"You can also enable IntelliJ to check your code against these annotations: <a href=\"https://twitter.com/briangoetz/status/8577345828\" rel=\"nofollow noreferrer\">Tweet from Brian Goetz</a>. Here are the annotations as a Maven dependency: <a href=\"http://mvnrepository.com/artifact/net.jcip/jcip-annotations/1.0\" rel=\"nofollow noreferrer\">link</a>"}],"tags":[],"owner":{"account_id":2553,"reputation":15453,"user_id":3565,"accept_rate":70,"display_name":"Benno Richters"},"comment_count":4,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1441036588,"creation_date":1224059054,"answer_id":204015,"question_id":203475,"body_markdown":"Use the [Immutable][1] annotation from [Java Concurrency in Practice][2]. The tool [FindBugs][3] can then help in detecting classes which are mutable but shouldn&#39;t be.\r\n\r\n\r\n  [1]: http://jcip.net.s3-website-us-east-1.amazonaws.com/annotations/doc/net/jcip/annotations/Immutable.html\r\n  [2]: http://jcip.net/\r\n  [3]: http://findbugs.sourceforge.net/","title":"How do I identify immutable objects in Java","body":"<p>Use the <a href=\"http://jcip.net.s3-website-us-east-1.amazonaws.com/annotations/doc/net/jcip/annotations/Immutable.html\" rel=\"noreferrer\">Immutable</a> annotation from <a href=\"http://jcip.net/\" rel=\"noreferrer\">Java Concurrency in Practice</a>. The tool <a href=\"http://findbugs.sourceforge.net/\" rel=\"noreferrer\">FindBugs</a> can then help in detecting classes which are mutable but shouldn't be.</p>\n"},{"comments":[{"owner":{"account_id":15696,"reputation":9454,"user_id":33412,"accept_rate":60,"display_name":"bendin"},"score":2,"creation_date":1236185184,"post_id":205428,"comment_id":423865,"body_markdown":"Besides, having the *class* be final has *absolutely* no bearing on its immutability. It just means it can&#39;t be extended.","body":"Besides, having the <i>class</i> be final has <i>absolutely</i> no bearing on its immutability. It just means it can&#39;t be extended."},{"owner":{"account_id":31518,"reputation":36053,"user_id":86604,"accept_rate":80,"display_name":"Ingo"},"score":0,"creation_date":1300791284,"post_id":205428,"comment_id":6094636,"body_markdown":"Because a class derived from a non-final immutable one could add mutable attributes.","body":"Because a class derived from a non-final immutable one could add mutable attributes."},{"owner":{"account_id":272843,"reputation":4000,"user_id":564145,"display_name":"Nicolas Bousquet"},"score":2,"creation_date":1311064705,"post_id":205428,"comment_id":7992931,"body_markdown":"But you do know the real type at execution time.","body":"But you do know the real type at execution time."}],"tags":[],"owner":{"account_id":561866,"reputation":191,"user_id":24634,"display_name":"james"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1224088298,"creation_date":1224088298,"answer_id":205428,"question_id":203475,"body_markdown":"why do all the recommendations require the class to be final?  if you are using reflection to check the class of each object, and you can determine programmatically that that class is immutable (immutable, final fields), then you don&#39;t need to require that the class itself is final.","title":"How do I identify immutable objects in Java","body":"<p>why do all the recommendations require the class to be final?  if you are using reflection to check the class of each object, and you can determine programmatically that that class is immutable (immutable, final fields), then you don't need to require that the class itself is final.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1236194519,"creation_date":1236194519,"answer_id":612042,"question_id":203475,"body_markdown":"Something which works for a high percentage of builtin classes is test for instanceof Comparable. For the classes which are not immutable like Date, they are often treated as immutable in most cases.","title":"How do I identify immutable objects in Java","body":"<p>Something which works for a high percentage of builtin classes is test for instanceof Comparable. For the classes which are not immutable like Date, they are often treated as immutable in most cases.</p>\n"},{"comments":[{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":0,"creation_date":1529101013,"post_id":6843336,"comment_id":88768686,"body_markdown":"Does not work when the object class has cycles (e.g. `class MyNode { MyNode parent; public MyNode() {} public MyNode(MyNode parent) { this.parent = parent; } }`) : you will get a `StackOverflowError`.","body":"Does not work when the object class has cycles (e.g. <code>class MyNode { MyNode parent; public MyNode() {} public MyNode(MyNode parent) { this.parent = parent; } }</code>) : you will get a <code>StackOverflowError</code>."},{"owner":{"account_id":357783,"reputation":5020,"user_id":698168,"display_name":"Julien Kronegg"},"score":0,"creation_date":1529101370,"post_id":6843336,"comment_id":88768767,"body_markdown":"This does not work for all classes. For example, `BigInteger` extends `Number` and the javadoc states that it is an immutable class, but nor the `BigInteger` class nor its methods are `final`, so the class can be overriden and the child class may change the `BigInteger` class behavior.","body":"This does not work for all classes. For example, <code>BigInteger</code> extends <code>Number</code> and the javadoc states that it is an immutable class, but nor the <code>BigInteger</code> class nor its methods are <code>final</code>, so the class can be overriden and the child class may change the <code>BigInteger</code> class behavior."}],"tags":[],"owner":{"account_id":793626,"reputation":19,"user_id":865227,"display_name":"M. Tempesta"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1311764937,"creation_date":1311764937,"answer_id":6843336,"question_id":203475,"body_markdown":"Try this:\r\n\r\n\r\n    public static boolean isImmutable(Object object){\r\n\t\tif (object instanceof Number) {\t// Numbers are immutable\r\n\t\t\tif (object instanceof AtomicInteger) {\r\n\t\t\t\t// AtomicIntegers are mutable\r\n\t\t\t} else if (object instanceof AtomicLong) {\r\n\t\t\t\t// AtomLongs are mutable\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t} else if (object instanceof String) {\t// Strings are immutable\r\n\t\t\treturn true;\r\n\t\t} else if (object instanceof Character) {\t// Characters are immutable\r\n\t\t\treturn true;\r\n\t\t} else if (object instanceof Class) { // Classes are immutable\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n        Class&lt;?&gt; objClass = object.getClass();\r\n\r\n        // Class must be final\r\n        if (!Modifier.isFinal(objClass.getModifiers())) {\r\n                return false;\r\n        }\r\n\r\n        // Check all fields defined in the class for type and if they are final\r\n        Field[] objFields = objClass.getDeclaredFields();\r\n        for (int i = 0; i &lt; objFields.length; i++) {\r\n                if (!Modifier.isFinal(objFields[i].getModifiers())\r\n                                || !isImmutable(objFields[i].getType())) {\r\n                        return false;\r\n                }\r\n        }\r\n\r\n        // Lets hope we didn&#39;t forget something\r\n        return true;\r\n\t}","title":"How do I identify immutable objects in Java","body":"<p>Try this:</p>\n\n<pre><code>public static boolean isImmutable(Object object){\n    if (object instanceof Number) { // Numbers are immutable\n        if (object instanceof AtomicInteger) {\n            // AtomicIntegers are mutable\n        } else if (object instanceof AtomicLong) {\n            // AtomLongs are mutable\n        } else {\n            return true;\n        }\n    } else if (object instanceof String) {  // Strings are immutable\n        return true;\n    } else if (object instanceof Character) {   // Characters are immutable\n        return true;\n    } else if (object instanceof Class) { // Classes are immutable\n        return true;\n    }\n\n    Class&lt;?&gt; objClass = object.getClass();\n\n    // Class must be final\n    if (!Modifier.isFinal(objClass.getModifiers())) {\n            return false;\n    }\n\n    // Check all fields defined in the class for type and if they are final\n    Field[] objFields = objClass.getDeclaredFields();\n    for (int i = 0; i &lt; objFields.length; i++) {\n            if (!Modifier.isFinal(objFields[i].getModifiers())\n                            || !isImmutable(objFields[i].getType())) {\n                    return false;\n            }\n    }\n\n    // Lets hope we didn't forget something\n    return true;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":63162,"reputation":102381,"user_id":187141,"accept_rate":82,"display_name":"yegor256"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1422095665,"creation_date":1361170948,"answer_id":14931051,"question_id":203475,"body_markdown":"You can use AOP and [`@Immutable`](http://aspects.jcabi.com/annotation-immutable.html) annotation from [jcabi-aspects](http://aspects.jcabi.com/):\r\n\r\n    @Immutable\r\n    public class Foo {\r\n      private String data;\r\n    }\r\n    // this line will throw a runtime exception since class Foo\r\n    // is actually mutable, despite the annotation\r\n    Object object = new Foo();\r\n\r\n","title":"How do I identify immutable objects in Java","body":"<p>You can use AOP and <a href=\"http://aspects.jcabi.com/annotation-immutable.html\" rel=\"nofollow\"><code>@Immutable</code></a> annotation from <a href=\"http://aspects.jcabi.com/\" rel=\"nofollow\">jcabi-aspects</a>:</p>\n\n<pre><code>@Immutable\npublic class Foo {\n  private String data;\n}\n// this line will throw a runtime exception since class Foo\n// is actually mutable, despite the annotation\nObject object = new Foo();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":981123,"reputation":4179,"user_id":1123743,"accept_rate":57,"display_name":"Sebastian Barth"},"score":0,"creation_date":1585777570,"post_id":23955278,"comment_id":107886672,"body_markdown":"Doesn&#39;t work fine with Java 11 and List&lt;&gt; fields wrapped with List.copyOf() which makes it immutable. Mutabilitydetector does fail on that point if not wrapped in Collections.unmodifiableList()","body":"Doesn&#39;t work fine with Java 11 and List&lt;&gt; fields wrapped with List.copyOf() which makes it immutable. Mutabilitydetector does fail on that point if not wrapped in Collections.unmodifiableList()"},{"owner":{"account_id":2908,"reputation":125963,"user_id":4120,"accept_rate":80,"display_name":"Grundlefleck"},"score":0,"creation_date":1585921462,"post_id":23955278,"comment_id":107942006,"body_markdown":"I&#39;ll need to raise an issue for that. Should not be difficult to recognise new Java 11 immutable collection constructors.","body":"I&#39;ll need to raise an issue for that. Should not be difficult to recognise new Java 11 immutable collection constructors."}],"tags":[],"owner":{"account_id":2908,"reputation":125963,"user_id":4120,"accept_rate":80,"display_name":"Grundlefleck"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1401454874,"creation_date":1401454874,"answer_id":23955278,"question_id":203475,"body_markdown":"To my knowledge, there is no way to identify immutable objects that is 100% correct. However, I have written a library to get you closer. It performs analysis of bytecode of a class to determine if it is immutable or not, and can execute at runtime. It is on the strict side, so it also allows whitelisting known immutable classes.\r\n\r\nYou can check it out at: [www.mutabilitydetector.org][1]\r\n\r\nIt allows you to write code like this in your application:\r\n\r\n    /*\r\n    * Request an analysis of the runtime class, to discover if this\r\n    * instance will be immutable or not.\r\n    */\r\n    AnalysisResult result = analysisSession.resultFor(dottedClassName);\r\n\r\n    if (result.isImmutable.equals(IMMUTABLE)) {\r\n        /*\r\n        * rest safe in the knowledge the class is\r\n        * immutable, share across threads with joyful abandon\r\n        */\r\n    } else if (result.isImmutable.equals(NOT_IMMUTABLE)) {\r\n        /*\r\n        * be careful here: make defensive copies,\r\n        * don&#39;t publish the reference,\r\n        * read Java Concurrency In Practice right away!\r\n        */\r\n    }\r\n\r\nIt is free and open source under the Apache 2.0 license.\r\n\r\n\r\n  [1]: http://www.mutabilitydetector.org","title":"How do I identify immutable objects in Java","body":"<p>To my knowledge, there is no way to identify immutable objects that is 100% correct. However, I have written a library to get you closer. It performs analysis of bytecode of a class to determine if it is immutable or not, and can execute at runtime. It is on the strict side, so it also allows whitelisting known immutable classes.</p>\n\n<p>You can check it out at: <a href=\"http://www.mutabilitydetector.org\" rel=\"nofollow\">www.mutabilitydetector.org</a></p>\n\n<p>It allows you to write code like this in your application:</p>\n\n<pre><code>/*\n* Request an analysis of the runtime class, to discover if this\n* instance will be immutable or not.\n*/\nAnalysisResult result = analysisSession.resultFor(dottedClassName);\n\nif (result.isImmutable.equals(IMMUTABLE)) {\n    /*\n    * rest safe in the knowledge the class is\n    * immutable, share across threads with joyful abandon\n    */\n} else if (result.isImmutable.equals(NOT_IMMUTABLE)) {\n    /*\n    * be careful here: make defensive copies,\n    * don't publish the reference,\n    * read Java Concurrency In Practice right away!\n    */\n}\n</code></pre>\n\n<p>It is free and open source under the Apache 2.0 license.</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683639265,"creation_date":1422023723,"answer_id":28112166,"question_id":203475,"body_markdown":"I appreciate and admire the amount of work Grundlefleck has put into his mutability detector, but I think it is a bit of an overkill.  You can write a simple but practically very adequate (that is, *pragmatic*) detector as follows:\r\n\r\n(note: this is a copy of my comment here: https://stackoverflow.com/a/28111150/773113)\r\n\r\nFirst of all, you are not going to be just writing a method which determines whether a class is immutable; instead, you will need to write an immutability detector class, because it is going to have to maintain some state.  The state of the detector will be the detected immutability of all classes which it has examined so far. This is not only useful for performance, but it is actually necessary because a class may contain a circular reference, which would cause a simplistic immutability detector to fall into infinite recursion.\r\n\r\nThe immutability of a class has four possible values: `Unknown`, `Mutable`, `Immutable`, and `Calculating`. You will probably want to have a map which associates each class that you have encountered so far to an immutability value.  Of course, `Unknown` does not actually need to be implemented, since it will be the implied state of any class which is not yet in the map.\r\n\r\nSo, when you begin examining a class, you associate it with a `Calculating` value in the map, and when you are done, you replace `Calculating` with either `Immutable` or `Mutable`.\r\n\r\nFor each class, you only need to check the field members, not the code.  The idea of checking bytecode is rather misguided.\r\n\r\nFirst of all, you should **not** check whether a class is final; The finality of a class does not affect its immutability.  Instead, a method which expects an immutable parameter should first of all invoke the immutability detector to assert the immutability of the class of the actual object that was passed. This test can be omitted if the type of the parameter is a final class, so finality is good for performance, but strictly speaking not necessary.  Also, as you will see further down, a field whose type is of a non-final class will cause the declaring class to be considered as mutable, but still, that&#39;s a problem of the declaring class, not the problem of the non-final immutable member class. It is perfectly fine to have a tall hierarchy of immutable classes, in which all the non-leaf nodes must of course be non-final.\r\n\r\nYou should **not** check whether a field is private;  it is perfectly fine for a class to have a public field, and the visibility of the field does not affect the immutability of the declaring class in any way, shape, or form.  You only need to check whether the field is final and its type is immutable.\r\n\r\nWhen examining a class, what you want to do first of all is to recurse to determine the immutability of its `super` class.  If the super is mutable, then the descendant is by definition mutable too.\r\n\r\nThen, you only need to check the *declared* fields of the class, not *all* fields.\r\n\r\nIf a field is non-final, then your class is mutable.\r\n\r\nIf a field is final, but the type of the field is mutable, then your class is mutable. (Arrays are by definition mutable.)\r\n\r\nIf a field is final, and the type of the field is `Calculating`, then ignore it and proceed to the next field.  If all fields are either immutable or `Calculating`, then your class is immutable.\r\n\r\nIf the type of the field is an interface, or an abstract class, or a non-final class, then it is to be considered as mutable, since you have absolutely no control over what the actual implementation may do. This might seem like an insurmountable problem, because it means that wrapping a modifiable collection inside an `UnmodifiableCollection` will still fail the immutability test, but it is actually fine, and it can be handled with the following workaround.\r\n\r\nSome classes may contain non-final fields and still be *effectively immutable*.  An example of this is the `String` class.  Other classes which fall into this category are classes which contain non-final members purely for performance monitoring purposes (invocation counters, etc.), classes which implement *popsicle immutability* (look it up), and classes which contain members that are interfaces which are known to not cause any side effects. Also, if a class contains bona fide mutable fields but promises not to take them into account when computing hashCode() and equals(), then the class is of course unsafe when it comes to multi-threading, but it can still be considered as immutable for the purpose of using it as a key in a map. So, all these cases can be handled in one of two ways:\r\n\r\n1. Manually adding classes (and interfaces) to your immutability detector.  If you know that a certain class is effectively immutable despite the fact that the immutability test for it fails, you can manually add an entry to your detector which associates it with `Immutable`.  This way, the detector will never attempt to check whether it is immutable, it will always just say &#39;yes, it is.&#39;\r\n\r\n2. Introducing an `@ImmutabilityOverride` annotation.  Your immutability detector can check for the presence of this annotation on a field, and if present, it may treat the field as immutable despite the fact that the field may be non-final or its type may be mutable. The detector may also check for the presence of this annotation on the class, thus treating the class as immutable without even bothering to check its fields.\r\n\r\nI hope this helps future generations.\r\n\r\n&lt;hr/&gt;\r\n\r\n***EDIT in 2023***\r\n\r\nI ended up writing a library called ***Bathyscaphe*** that implements all of the above. Although indeed a lot more simple than MutabilityDetector, it ended up being far more complicated than I imagined, so I would strongly recommend that you use this library instead of attempting to implement the above by yourself.\r\n\r\nBathyscaphe can be found here: https://github.com/mikenakis/Bathyscaphe \r\n\r\nIn my opinion, static analysis tools such as MutabilityDetector (see Grundlefleck&#39;s answer) can be useful at certain times and under certain scenarios, but they do not (and cannot) provide a complete solution to the problem at all times. A complete solution requires runtime checking as I explain on my blog here: https://blog.michael.gr/2022/05/bathyscaphe.html, and that&#39;s why I have written Bathyscaphe.\r\n\r\nTo address the concern expressed by Martin Probst in his answer to this question, Bathyscaphe will also help you check for thread-safety, although this branch of checks relies heavily on annotations that you add to your code, so naturally, Bathyscaphe will only give correct answers if the annotations are correct. But it is still better than coding in the dark.","title":"How do I identify immutable objects in Java","body":"<p>I appreciate and admire the amount of work Grundlefleck has put into his mutability detector, but I think it is a bit of an overkill.  You can write a simple but practically very adequate (that is, <em>pragmatic</em>) detector as follows:</p>\n<p>(note: this is a copy of my comment here: <a href=\"https://stackoverflow.com/a/28111150/773113\">https://stackoverflow.com/a/28111150/773113</a>)</p>\n<p>First of all, you are not going to be just writing a method which determines whether a class is immutable; instead, you will need to write an immutability detector class, because it is going to have to maintain some state.  The state of the detector will be the detected immutability of all classes which it has examined so far. This is not only useful for performance, but it is actually necessary because a class may contain a circular reference, which would cause a simplistic immutability detector to fall into infinite recursion.</p>\n<p>The immutability of a class has four possible values: <code>Unknown</code>, <code>Mutable</code>, <code>Immutable</code>, and <code>Calculating</code>. You will probably want to have a map which associates each class that you have encountered so far to an immutability value.  Of course, <code>Unknown</code> does not actually need to be implemented, since it will be the implied state of any class which is not yet in the map.</p>\n<p>So, when you begin examining a class, you associate it with a <code>Calculating</code> value in the map, and when you are done, you replace <code>Calculating</code> with either <code>Immutable</code> or <code>Mutable</code>.</p>\n<p>For each class, you only need to check the field members, not the code.  The idea of checking bytecode is rather misguided.</p>\n<p>First of all, you should <strong>not</strong> check whether a class is final; The finality of a class does not affect its immutability.  Instead, a method which expects an immutable parameter should first of all invoke the immutability detector to assert the immutability of the class of the actual object that was passed. This test can be omitted if the type of the parameter is a final class, so finality is good for performance, but strictly speaking not necessary.  Also, as you will see further down, a field whose type is of a non-final class will cause the declaring class to be considered as mutable, but still, that's a problem of the declaring class, not the problem of the non-final immutable member class. It is perfectly fine to have a tall hierarchy of immutable classes, in which all the non-leaf nodes must of course be non-final.</p>\n<p>You should <strong>not</strong> check whether a field is private;  it is perfectly fine for a class to have a public field, and the visibility of the field does not affect the immutability of the declaring class in any way, shape, or form.  You only need to check whether the field is final and its type is immutable.</p>\n<p>When examining a class, what you want to do first of all is to recurse to determine the immutability of its <code>super</code> class.  If the super is mutable, then the descendant is by definition mutable too.</p>\n<p>Then, you only need to check the <em>declared</em> fields of the class, not <em>all</em> fields.</p>\n<p>If a field is non-final, then your class is mutable.</p>\n<p>If a field is final, but the type of the field is mutable, then your class is mutable. (Arrays are by definition mutable.)</p>\n<p>If a field is final, and the type of the field is <code>Calculating</code>, then ignore it and proceed to the next field.  If all fields are either immutable or <code>Calculating</code>, then your class is immutable.</p>\n<p>If the type of the field is an interface, or an abstract class, or a non-final class, then it is to be considered as mutable, since you have absolutely no control over what the actual implementation may do. This might seem like an insurmountable problem, because it means that wrapping a modifiable collection inside an <code>UnmodifiableCollection</code> will still fail the immutability test, but it is actually fine, and it can be handled with the following workaround.</p>\n<p>Some classes may contain non-final fields and still be <em>effectively immutable</em>.  An example of this is the <code>String</code> class.  Other classes which fall into this category are classes which contain non-final members purely for performance monitoring purposes (invocation counters, etc.), classes which implement <em>popsicle immutability</em> (look it up), and classes which contain members that are interfaces which are known to not cause any side effects. Also, if a class contains bona fide mutable fields but promises not to take them into account when computing hashCode() and equals(), then the class is of course unsafe when it comes to multi-threading, but it can still be considered as immutable for the purpose of using it as a key in a map. So, all these cases can be handled in one of two ways:</p>\n<ol>\n<li><p>Manually adding classes (and interfaces) to your immutability detector.  If you know that a certain class is effectively immutable despite the fact that the immutability test for it fails, you can manually add an entry to your detector which associates it with <code>Immutable</code>.  This way, the detector will never attempt to check whether it is immutable, it will always just say 'yes, it is.'</p>\n</li>\n<li><p>Introducing an <code>@ImmutabilityOverride</code> annotation.  Your immutability detector can check for the presence of this annotation on a field, and if present, it may treat the field as immutable despite the fact that the field may be non-final or its type may be mutable. The detector may also check for the presence of this annotation on the class, thus treating the class as immutable without even bothering to check its fields.</p>\n</li>\n</ol>\n<p>I hope this helps future generations.</p>\n<hr/>\n<p><em><strong>EDIT in 2023</strong></em></p>\n<p>I ended up writing a library called <em><strong>Bathyscaphe</strong></em> that implements all of the above. Although indeed a lot more simple than MutabilityDetector, it ended up being far more complicated than I imagined, so I would strongly recommend that you use this library instead of attempting to implement the above by yourself.</p>\n<p>Bathyscaphe can be found here: <a href=\"https://github.com/mikenakis/Bathyscaphe\" rel=\"nofollow noreferrer\">https://github.com/mikenakis/Bathyscaphe</a></p>\n<p>In my opinion, static analysis tools such as MutabilityDetector (see Grundlefleck's answer) can be useful at certain times and under certain scenarios, but they do not (and cannot) provide a complete solution to the problem at all times. A complete solution requires runtime checking as I explain on my blog here: <a href=\"https://blog.michael.gr/2022/05/bathyscaphe.html\" rel=\"nofollow noreferrer\">https://blog.michael.gr/2022/05/bathyscaphe.html</a>, and that's why I have written Bathyscaphe.</p>\n<p>To address the concern expressed by Martin Probst in his answer to this question, Bathyscaphe will also help you check for thread-safety, although this branch of checks relies heavily on annotations that you add to your code, so naturally, Bathyscaphe will only give correct answers if the annotations are correct. But it is still better than coding in the dark.</p>\n"}],"owner":{"account_id":8175,"reputation":24189,"user_id":14570,"accept_rate":81,"display_name":"mcherm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28129,"favorite_count":0,"down_vote_count":1,"up_vote_count":48,"accepted_answer_id":203571,"answer_count":14,"score":47,"last_activity_date":1683639265,"creation_date":1224035700,"question_id":203475,"body_markdown":"In my code, I am creating a collection of objects which will be accessed by various threads in a fashion that is only safe if the objects are immutable. When an attempt is made to insert a new object into my collection, I want to test to see if it is immutable (if not, I&#39;ll throw an exception).\r\n\r\nOne thing I can do is to check a few well-known immutable types:\r\n\r\n    private static final Set&lt;Class&gt; knownImmutables = new HashSet&lt;Class&gt;(Arrays.asList(\r\n            String.class, Byte.class, Short.class, Integer.class, Long.class,\r\n            Float.class, Double.class, Boolean.class, BigInteger.class, BigDecimal.class\r\n    ));\r\n\r\n    ...\r\n\r\n    public static boolean isImmutable(Object o) {\r\n        return knownImmutables.contains(o.getClass());\r\n    }\r\n\r\nThis actually gets me 90% of the way, but sometimes my users will want to create simple immutable types of their own:\r\n\r\n    public class ImmutableRectangle {\r\n        private final int width;\r\n        private final int height;\r\n        public ImmutableRectangle(int width, int height) {\r\n            this.width = width;\r\n            this.height = height;\r\n        }\r\n        public int getWidth() { return width; }\r\n        public int getHeight() { return height; }\r\n    }\r\n\r\nIs there some way (perhaps using reflection) that I could reliably detect whether a class is immutable? False positives (thinking it&#39;s immutable when it isn&#39;t) are not acceptable but false negatives (thinking it&#39;s mutable when it isn&#39;t) are.\r\n\r\n**Edited to add:** Thanks for the insightful and helpful answers. As some of the answers pointed out, I neglected to define my security objectives. The threat here is clueless developers -- this is a piece of framework code that will be used by large numbers of people who know next-to-nothing about threading and won&#39;t be reading the documentation. I do NOT need to defend against malicious developers -- anyone clever enough to [mutate a String][1] or perform other shenanigans will also be smart enough to know it&#39;s not safe in this case. Static analysis of the codebase IS an option, so long as it is automated, but code reviews cannot be counted on because there is no guarantee every review will have threading-savvy reviewers.\r\n\r\n\r\n  [1]: http://directwebremoting.org/blog/joe/2005/05/26/1117108773674.html","title":"How do I identify immutable objects in Java","body":"<p>In my code, I am creating a collection of objects which will be accessed by various threads in a fashion that is only safe if the objects are immutable. When an attempt is made to insert a new object into my collection, I want to test to see if it is immutable (if not, I'll throw an exception).</p>\n\n<p>One thing I can do is to check a few well-known immutable types:</p>\n\n<pre><code>private static final Set&lt;Class&gt; knownImmutables = new HashSet&lt;Class&gt;(Arrays.asList(\n        String.class, Byte.class, Short.class, Integer.class, Long.class,\n        Float.class, Double.class, Boolean.class, BigInteger.class, BigDecimal.class\n));\n\n...\n\npublic static boolean isImmutable(Object o) {\n    return knownImmutables.contains(o.getClass());\n}\n</code></pre>\n\n<p>This actually gets me 90% of the way, but sometimes my users will want to create simple immutable types of their own:</p>\n\n<pre><code>public class ImmutableRectangle {\n    private final int width;\n    private final int height;\n    public ImmutableRectangle(int width, int height) {\n        this.width = width;\n        this.height = height;\n    }\n    public int getWidth() { return width; }\n    public int getHeight() { return height; }\n}\n</code></pre>\n\n<p>Is there some way (perhaps using reflection) that I could reliably detect whether a class is immutable? False positives (thinking it's immutable when it isn't) are not acceptable but false negatives (thinking it's mutable when it isn't) are.</p>\n\n<p><strong>Edited to add:</strong> Thanks for the insightful and helpful answers. As some of the answers pointed out, I neglected to define my security objectives. The threat here is clueless developers -- this is a piece of framework code that will be used by large numbers of people who know next-to-nothing about threading and won't be reading the documentation. I do NOT need to defend against malicious developers -- anyone clever enough to <a href=\"http://directwebremoting.org/blog/joe/2005/05/26/1117108773674.html\" rel=\"noreferrer\">mutate a String</a> or perform other shenanigans will also be smart enough to know it's not safe in this case. Static analysis of the codebase IS an option, so long as it is automated, but code reviews cannot be counted on because there is no guarantee every review will have threading-savvy reviewers.</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","firebase-cloud-messaging"],"owner":{"account_id":20490612,"reputation":11,"user_id":15036771,"display_name":"vanila loid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683639053,"creation_date":1683615186,"question_id":76206583,"body_markdown":"i have this android apps which are using FCM key and maps api api key (GCP).\r\n\r\nthis apps contain code which make the FCM and GCP key exposed when i tried to upload it on play console.\r\n\r\nin other word, this app hardcoded the app key in the client-side app.\r\n\r\ni know the secure way to store those key are on the server, but i am struggling as to find how to apply that and call the api key in my client app because if the api key didnt include in the android app, this app wont function normally.\r\n\r\nhere are some code to provide.\r\n\r\n\r\n```\r\n\r\n    public String getUrl(LatLng start, LatLng end, String mode, boolean isAlternative, Context context) {\r\n\r\n        String url = &quot;https://maps.googleapis.com/maps/api/directions/json?&quot;\r\n                + &quot;origin=&quot; + start.latitude + &quot;,&quot; + start.longitude\r\n                + &quot;&amp;destination=&quot; + end.latitude + &quot;,&quot; + end.longitude\r\n                + &quot;&amp;sensor=false&amp;units=metric&amp;mode=&quot;+mode\r\n                + &quot;&amp;key=&quot;+ BuildConfig.Gkey;\r\n\r\n        if (isAlternative)\r\n            url += &quot;&amp;alternatives=true&quot;;\r\n\r\n        Log.e(&quot;getUrl&quot;, url);\r\n        return url;\r\n    }\r\n```\r\n\r\n\r\ni tried to store it in the gradle.properties and also local properties, but play console can also detect my api key.\r\n\r\nis there any tutorial to store those key and how to call it from server in my android app.","title":"How to store FCM and GCP in server and call it on Android apps?","body":"<p>i have this android apps which are using FCM key and maps api api key (GCP).</p>\n<p>this apps contain code which make the FCM and GCP key exposed when i tried to upload it on play console.</p>\n<p>in other word, this app hardcoded the app key in the client-side app.</p>\n<p>i know the secure way to store those key are on the server, but i am struggling as to find how to apply that and call the api key in my client app because if the api key didnt include in the android app, this app wont function normally.</p>\n<p>here are some code to provide.</p>\n<pre><code>\n    public String getUrl(LatLng start, LatLng end, String mode, boolean isAlternative, Context context) {\n\n        String url = &quot;https://maps.googleapis.com/maps/api/directions/json?&quot;\n                + &quot;origin=&quot; + start.latitude + &quot;,&quot; + start.longitude\n                + &quot;&amp;destination=&quot; + end.latitude + &quot;,&quot; + end.longitude\n                + &quot;&amp;sensor=false&amp;units=metric&amp;mode=&quot;+mode\n                + &quot;&amp;key=&quot;+ BuildConfig.Gkey;\n\n        if (isAlternative)\n            url += &quot;&amp;alternatives=true&quot;;\n\n        Log.e(&quot;getUrl&quot;, url);\n        return url;\n    }\n</code></pre>\n<p>i tried to store it in the gradle.properties and also local properties, but play console can also detect my api key.</p>\n<p>is there any tutorial to store those key and how to call it from server in my android app.</p>\n"},{"tags":["java","jmx","activemq-artemis"],"comments":[{"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1685455078,"post_id":76208314,"comment_id":134660130,"body_markdown":"Any feedback here? Were you able to create a user?","body":"Any feedback here? Were you able to create a user?"},{"owner":{"account_id":28555640,"reputation":55,"user_id":21859885,"display_name":"DarkSoul"},"score":0,"creation_date":1685975825,"post_id":76208314,"comment_id":134732270,"body_markdown":"User successfully created, thank you very much","body":"User successfully created, thank you very much"}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30715,"user_id":8381946,"display_name":"Justin Bertram"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683639051,"creation_date":1683639051,"answer_id":76209915,"question_id":76208314,"body_markdown":"One way to create a user with the default properties files is to the use the suite of &quot;user&quot; commands offered by the Artemis CLI, e.g.:\r\n```\r\n./artemis user add --user-command-user admin --user-command-password adminPassword --role test\r\n```\r\nThis is discussed further in [the documentation][1]. You can also run the `./artemis help user` command to get details on all the different &quot;user&quot; commands and their options.\r\n\r\nOf course, you can also edit the files manually as well. The syntax of the `artemis-roles.properties` file is:\r\n```\r\n&lt;role&gt; = &lt;listOfUsers&gt;\r\n```\r\nThe `listOfUsers` could be a single user or a comma-separated list of users in that role.\r\n\r\nThe syntax of the `artemis-users.properties` file is:\r\n```\r\n&lt;user&gt; = &lt;password&gt;\r\n```\r\n\r\n\r\n  [1]: https://activemq.apache.org/components/artemis/documentation/latest/security.html#propertiesloginmodule","title":"How to create a user in ActiveMQ Artemis?","body":"<p>One way to create a user with the default properties files is to the use the suite of &quot;user&quot; commands offered by the Artemis CLI, e.g.:</p>\n<pre><code>./artemis user add --user-command-user admin --user-command-password adminPassword --role test\n</code></pre>\n<p>This is discussed further in <a href=\"https://activemq.apache.org/components/artemis/documentation/latest/security.html#propertiesloginmodule\" rel=\"nofollow noreferrer\">the documentation</a>. You can also run the <code>./artemis help user</code> command to get details on all the different &quot;user&quot; commands and their options.</p>\n<p>Of course, you can also edit the files manually as well. The syntax of the <code>artemis-roles.properties</code> file is:</p>\n<pre><code>&lt;role&gt; = &lt;listOfUsers&gt;\n</code></pre>\n<p>The <code>listOfUsers</code> could be a single user or a comma-separated list of users in that role.</p>\n<p>The syntax of the <code>artemis-users.properties</code> file is:</p>\n<pre><code>&lt;user&gt; = &lt;password&gt;\n</code></pre>\n"}],"owner":{"account_id":28555640,"reputation":55,"user_id":21859885,"display_name":"DarkSoul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76209915,"answer_count":1,"score":0,"last_activity_date":1683639051,"creation_date":1683627914,"question_id":76208314,"body_markdown":"I don&#39;t understand how to create user with password in ActiveMQ Artemis\r\n\r\n\r\nHere is my artemis-roles.properties:\r\n```\r\namq = admin\r\ntest = admin\r\n```\r\n\r\nHere is my artemis-users.properties:\r\n\r\n```\r\nadmin = ENC(1024:28CE6B0C9D3FA57ECD8956D429030E5414B730FEEA285A7C8DFEBA434296674C:7946CE5918E1AA81D7D40345F1D348E2293DECBD39F15C45A8E7A308F3C54B128B20B499F6A9A0876BFA834C9E28FBA3076ECB69976031CFC9BDE71B5D0F8B13)\r\n```\r\n\r\n\r\nI don&#39;t understand how to create a user with login - test and password too - test. This user with the role will be used to connect via JMX","title":"How to create a user in ActiveMQ Artemis?","body":"<p>I don't understand how to create user with password in ActiveMQ Artemis</p>\n<p>Here is my artemis-roles.properties:</p>\n<pre><code>amq = admin\ntest = admin\n</code></pre>\n<p>Here is my artemis-users.properties:</p>\n<pre><code>admin = ENC(1024:28CE6B0C9D3FA57ECD8956D429030E5414B730FEEA285A7C8DFEBA434296674C:7946CE5918E1AA81D7D40345F1D348E2293DECBD39F15C45A8E7A308F3C54B128B20B499F6A9A0876BFA834C9E28FBA3076ECB69976031CFC9BDE71B5D0F8B13)\n</code></pre>\n<p>I don't understand how to create a user with login - test and password too - test. This user with the role will be used to connect via JMX</p>\n"},{"tags":["java","business-objects","webi"],"comments":[{"owner":{"account_id":316385,"reputation":3253,"user_id":632537,"accept_rate":83,"display_name":"Isaac"},"score":0,"creation_date":1591882170,"post_id":62299244,"comment_id":110228554,"body_markdown":"There is a free utility from Biclever called [CMS Query Builder](http://biclever.com/software/cms-query-builder/) that will do this for you.","body":"There is a free utility from Biclever called <a href=\"http://biclever.com/software/cms-query-builder/\" rel=\"nofollow noreferrer\">CMS Query Builder</a> that will do this for you."}],"answers":[{"tags":[],"owner":{"account_id":7707418,"reputation":1011,"user_id":5837967,"display_name":"Jonathan Delean"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1591791128,"creation_date":1591791128,"answer_id":62303285,"question_id":62299244,"body_markdown":"Not mine, but hope it can help you :\r\n\r\nHere is the sample Java code to export a Web Intelligence document to CSV format.\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.BufferedWriter;\r\n    import java.io.File;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.io.OutputStreamWriter;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.MalformedURLException;\r\n    import java.net.ProtocolException;\r\n    import java.net.URL;\r\n    \r\n    import org.json.simple.JSONObject;\r\n    import org.json.simple.parser.JSONParser;\r\n    import org.json.simple.parser.ParseException;\r\n    \r\n    public class Document {\r\n    \r\n    public static void main(String[] args) {\r\n      try {\r\n    \r\n                URL url = new URL(\r\n    \r\n                        http://localhost:6405/biprws/raylight/v1/documents/7485/dataproviders/DP0/flows/0);\r\n    \r\n                HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n    \r\n                conn.setRequestMethod(GET);\r\n    \r\n                conn.setRequestProperty(Accept, text/plain);//change to text/plain if you want in CSV format\r\n    \r\n                String logonToken = \\ + getLogonToken() + \\;\r\n    \r\n                conn.setRequestProperty(X-SAP-LogonToken, logonToken);\r\n    \r\n                conn.setDoOutput(true);\r\n    \r\n                conn.setDoInput(true);\r\n    \r\n                conn.connect();\r\n    \r\n                if (conn.getResponseCode() != 200) {\r\n    \r\n                    throw new RuntimeException(Failed : HTTP error code : \r\n    \r\n                            + conn.getResponseCode());\r\n    \r\n                }\r\n    \r\n                BufferedReader br = new BufferedReader(new InputStreamReader(\r\n    \r\n                        (conn.getInputStream())));\r\n    \r\n                String output;\r\n                // Exported CSV file will be generated at C://rest.csv, location could be changed as required.\r\n                File f1 = new File(C://rest.csv);\r\n                f1.createNewFile();\r\n    \r\n                FileWriter fw = new FileWriter(f1);//change extension to .csv for csv format\r\n    \r\n                BufferedWriter bw = new BufferedWriter(fw);\r\n    \r\n                while ((output = br.readLine()) != null) {\r\n    \r\n                    bw.write(output);\r\n    \r\n                    bw.write(\\n);\r\n    \r\n                }\r\n    \r\n                bw.close();\r\n    \r\n                conn.disconnect();\r\n    \r\n            } catch (MalformedURLException e) {\r\n    \r\n                e.printStackTrace();\r\n    \r\n            } catch (ProtocolException e) {\r\n    \r\n                e.printStackTrace();\r\n    \r\n            } catch (IOException e) {\r\n    \r\n                e.printStackTrace();\r\n    \r\n            } catch (ParseException e) {\r\n    \r\n             \r\n    \r\n                e.printStackTrace();\r\n    \r\n            }\r\n    \r\n    }\r\n    \r\n    public static String getLogonToken() throws ParseException, IOException {\r\n    \r\n        String logontoken = null;\r\n    \r\n        URL url = new URL(http://localhost:6405/biprws/logon/long/);\r\n    \r\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n    \r\n        conn.setRequestMethod(POST);\r\n    \r\n        conn.setRequestProperty(Accept, application/json);\r\n    \r\n        conn.setRequestProperty(Content-Type,\r\n    \r\n                application/xml; charset=utf-8);\r\n    \r\n        conn.setDoInput(true);\r\n    \r\n        conn.setDoOutput(true);\r\n    \r\n        String body = &lt;attrs xmlns=\\http://www.sap.com/rws/bip\\&gt;\r\n    \r\n                + &lt;attr name=\\userName\\ type=\\string\\&gt;Administrator&lt;/attr&gt;\r\n    \r\n                + &lt;attr name=\\password\\ type=\\string\\&gt;Password&lt;/attr&gt;\r\n    \r\n                + &lt;attr name=\\auth\\ type=\\string\\ possibilities=\\secEnterprise,secLDAP,secWinAD\\&gt;secEnterprise&lt;/attr&gt;\r\n    \r\n                + &lt;/attrs&gt;;\r\n    \r\n        int len = body.length();\r\n    \r\n        conn.setRequestProperty(Content-Length, Integer.toString(len));\r\n    \r\n        conn.connect();\r\n    \r\n        OutputStreamWriter out = new OutputStreamWriter(conn.getOutputStream());\r\n    \r\n        out.write(body, 0, len);\r\n    \r\n        out.flush();\r\n    \r\n        if (conn.getResponseCode() != 200) {\r\n    \r\n            throw new RuntimeException(Failed : HTTP error code : \r\n    \r\n                    + conn.getResponseCode());\r\n    \r\n        }\r\n    \r\n        BufferedReader br = new BufferedReader(new InputStreamReader(\r\n    \r\n                (conn.getInputStream())));\r\n    \r\n        String jsontxt = br.readLine();\r\n    \r\n        JSONParser parser = new JSONParser();\r\n    \r\n        JSONObject json = (JSONObject) parser.parse(jsontxt);\r\n    \r\n        logontoken = (String) json.get(logonToken);\r\n    \r\n        conn.disconnect();\r\n    \r\n        return logontoken;\r\n    \r\n    }\r\n    \r\n    }\r\n\r\nYou can check that too :\r\n\r\nhttps://blogs.sap.com/2013/09/13/export-webi-report-using-the-restful-sdk/","title":"Get CUIDs of all the reports","body":"<p>Not mine, but hope it can help you :</p>\n\n<p>Here is the sample Java code to export a Web Intelligence document to CSV format.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStreamWriter;\nimport java.net.HttpURLConnection;\nimport java.net.MalformedURLException;\nimport java.net.ProtocolException;\nimport java.net.URL;\n\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\nimport org.json.simple.parser.ParseException;\n\npublic class Document {\n\npublic static void main(String[] args) {\n  try {\n\n            URL url = new URL(\n\n                    http://localhost:6405/biprws/raylight/v1/documents/7485/dataproviders/DP0/flows/0);\n\n            HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n\n            conn.setRequestMethod(GET);\n\n            conn.setRequestProperty(Accept, text/plain);//change to text/plain if you want in CSV format\n\n            String logonToken = \\ + getLogonToken() + \\;\n\n            conn.setRequestProperty(X-SAP-LogonToken, logonToken);\n\n            conn.setDoOutput(true);\n\n            conn.setDoInput(true);\n\n            conn.connect();\n\n            if (conn.getResponseCode() != 200) {\n\n                throw new RuntimeException(Failed : HTTP error code : \n\n                        + conn.getResponseCode());\n\n            }\n\n            BufferedReader br = new BufferedReader(new InputStreamReader(\n\n                    (conn.getInputStream())));\n\n            String output;\n            // Exported CSV file will be generated at C://rest.csv, location could be changed as required.\n            File f1 = new File(C://rest.csv);\n            f1.createNewFile();\n\n            FileWriter fw = new FileWriter(f1);//change extension to .csv for csv format\n\n            BufferedWriter bw = new BufferedWriter(fw);\n\n            while ((output = br.readLine()) != null) {\n\n                bw.write(output);\n\n                bw.write(\\n);\n\n            }\n\n            bw.close();\n\n            conn.disconnect();\n\n        } catch (MalformedURLException e) {\n\n            e.printStackTrace();\n\n        } catch (ProtocolException e) {\n\n            e.printStackTrace();\n\n        } catch (IOException e) {\n\n            e.printStackTrace();\n\n        } catch (ParseException e) {\n\n\n\n            e.printStackTrace();\n\n        }\n\n}\n\npublic static String getLogonToken() throws ParseException, IOException {\n\n    String logontoken = null;\n\n    URL url = new URL(http://localhost:6405/biprws/logon/long/);\n\n    HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n\n    conn.setRequestMethod(POST);\n\n    conn.setRequestProperty(Accept, application/json);\n\n    conn.setRequestProperty(Content-Type,\n\n            application/xml; charset=utf-8);\n\n    conn.setDoInput(true);\n\n    conn.setDoOutput(true);\n\n    String body = &lt;attrs xmlns=\\http://www.sap.com/rws/bip\\&gt;\n\n            + &lt;attr name=\\userName\\ type=\\string\\&gt;Administrator&lt;/attr&gt;\n\n            + &lt;attr name=\\password\\ type=\\string\\&gt;Password&lt;/attr&gt;\n\n            + &lt;attr name=\\auth\\ type=\\string\\ possibilities=\\secEnterprise,secLDAP,secWinAD\\&gt;secEnterprise&lt;/attr&gt;\n\n            + &lt;/attrs&gt;;\n\n    int len = body.length();\n\n    conn.setRequestProperty(Content-Length, Integer.toString(len));\n\n    conn.connect();\n\n    OutputStreamWriter out = new OutputStreamWriter(conn.getOutputStream());\n\n    out.write(body, 0, len);\n\n    out.flush();\n\n    if (conn.getResponseCode() != 200) {\n\n        throw new RuntimeException(Failed : HTTP error code : \n\n                + conn.getResponseCode());\n\n    }\n\n    BufferedReader br = new BufferedReader(new InputStreamReader(\n\n            (conn.getInputStream())));\n\n    String jsontxt = br.readLine();\n\n    JSONParser parser = new JSONParser();\n\n    JSONObject json = (JSONObject) parser.parse(jsontxt);\n\n    logontoken = (String) json.get(logonToken);\n\n    conn.disconnect();\n\n    return logontoken;\n\n}\n\n}\n</code></pre>\n\n<p>You can check that too :</p>\n\n<p><a href=\"https://blogs.sap.com/2013/09/13/export-webi-report-using-the-restful-sdk/\" rel=\"nofollow noreferrer\">https://blogs.sap.com/2013/09/13/export-webi-report-using-the-restful-sdk/</a></p>\n"},{"tags":[],"owner":{"account_id":1777799,"reputation":6787,"user_id":1621233,"accept_rate":25,"display_name":"Joe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591877269,"creation_date":1591877269,"answer_id":62324052,"question_id":62299244,"body_markdown":"BO includes a querying tool called the Query Builder that can be used to extract metadata, such as CUIDs, names, and a lot more.\r\n\r\nThere is some info [here][1].  To get CUIDs and names, you could use the following simple query:\r\n\r\n    select si_cuid,si_name from ci_infoobjects where si_kind = &#39;webi&#39;\r\n\r\n\r\n\r\n\r\n  [1]: https://blogs.sap.com/2013/06/17/businessobjects-query-builder-basics/","title":"Get CUIDs of all the reports","body":"<p>BO includes a querying tool called the Query Builder that can be used to extract metadata, such as CUIDs, names, and a lot more.</p>\n\n<p>There is some info <a href=\"https://blogs.sap.com/2013/06/17/businessobjects-query-builder-basics/\" rel=\"nofollow noreferrer\">here</a>.  To get CUIDs and names, you could use the following simple query:</p>\n\n<pre><code>select si_cuid,si_name from ci_infoobjects where si_kind = 'webi'\n</code></pre>\n"}],"owner":{"account_id":18720461,"reputation":13,"user_id":13648450,"display_name":"anjune"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":573,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":62303285,"answer_count":2,"score":0,"last_activity_date":1683638936,"creation_date":1591778197,"question_id":62299244,"body_markdown":"How can I capture CUIDs of all reports available in CMC (Central management Console) or WEBI tool and paste it in Excel?\r\n\r\nManually I can check by viewing each report properties but if I want all the CUID to be captured through coding, is that possible?\r\n\r\nCan this be done in Java language?\r\n","title":"Get CUIDs of all the reports","body":"<p>How can I capture CUIDs of all reports available in CMC (Central management Console) or WEBI tool and paste it in Excel?</p>\n<p>Manually I can check by viewing each report properties but if I want all the CUID to be captured through coding, is that possible?</p>\n<p>Can this be done in Java language?</p>\n"},{"tags":["java","unit-testing","immutability"],"comments":[{"owner":{"account_id":4804,"reputation":268589,"user_id":7412,"accept_rate":96,"display_name":"dogbane"},"score":1,"creation_date":1311062306,"post_id":6743872,"comment_id":7992351,"body_markdown":"possible duplicate of [How do I identify immutable objects in Java](http://stackoverflow.com/questions/203475/how-do-i-identify-immutable-objects-in-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/203475/how-do-i-identify-immutable-objects-in-java\">How do I identify immutable objects in Java</a>"},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1673128106,"post_id":6743872,"comment_id":132429791,"body_markdown":"There are ways to reliably detect immutability in Java. It&#39;s a huge subject, though, on how to go about figuring that out. I have provided an Answer to another very similar question addressing how you might go about thoroughly approaching this problem space. stackoverflow.com/a/75043881/501113","body":"There are ways to reliably detect immutability in Java. It&#39;s a huge subject, though, on how to go about figuring that out. I have provided an Answer to another very similar question addressing how you might go about thoroughly approaching this problem space. stackoverflow.com/a/75043881/501113"}],"answers":[{"tags":[],"owner":{"account_id":27626,"reputation":346928,"user_id":73070,"accept_rate":81,"display_name":"Joey"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1311061999,"creation_date":1311061999,"answer_id":6743907,"question_id":6743872,"body_markdown":"I doubt you can do this with unit tests. The best way would be to be careful during writing the class or looking into the code. Precisely because of the problem that methods on the object can mutate its state which you might not see from the outside. Just because it&#39;s discouraged doesn&#39;t mean it doesn&#39;t happen :-)","title":"Unit testing for object immutability","body":"<p>I doubt you can do this with unit tests. The best way would be to be careful during writing the class or looking into the code. Precisely because of the problem that methods on the object can mutate its state which you might not see from the outside. Just because it's discouraged doesn't mean it doesn't happen :-)</p>\n"},{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1311062378,"post_id":6743943,"comment_id":7992372,"body_markdown":"You can look at the byte code for this class and the classes it uses.  However this is a lot of effort for not much gain IMHO.","body":"You can look at the byte code for this class and the classes it uses.  However this is a lot of effort for not much gain IMHO."},{"owner":{"account_id":18865,"reputation":25722,"user_id":43677,"accept_rate":100,"display_name":"bezmax"},"score":1,"creation_date":1311062506,"post_id":6743943,"comment_id":7992395,"body_markdown":"@Peter Lawrey: Not really, what if `changeState()` uses reflection to change it&#39;s state? Didn&#39;t include this case to not overcomplicate things, but in theory it is possible, and your bytecode scan method won&#39;t find it.","body":"@Peter Lawrey: Not really, what if <code>changeState()</code> uses reflection to change it&#39;s state? Didn&#39;t include this case to not overcomplicate things, but in theory it is possible, and your bytecode scan method won&#39;t find it."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1311062716,"post_id":6743943,"comment_id":7992439,"body_markdown":"You would reject any class which uses reflections as unsafe. There is no reason a Data Value object should be using reflection.","body":"You would reject any class which uses reflections as unsafe. There is no reason a Data Value object should be using reflection."}],"tags":[],"owner":{"account_id":18865,"reputation":25722,"user_id":43677,"accept_rate":100,"display_name":"bezmax"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1311062217,"creation_date":1311062217,"answer_id":6743943,"question_id":6743872,"body_markdown":"Pretty sure it is impossible. Consider this function:\r\n\r\n    public void doSomething() {\r\n        if (System.currentTimeMillis() % 100000 == 0) {\r\n            this.innerMember.changeState();\r\n        }\r\n    }\r\n\r\nFirst, you won&#39;t be able to detect it by running every class function, as this function changes the state of object precisely only once in 100 seconds.\r\n\r\nSecond, you won&#39;t be able to detect it by parsing code, as you do not know if `changeState()` function changes the state of innerMember or not.","title":"Unit testing for object immutability","body":"<p>Pretty sure it is impossible. Consider this function:</p>\n\n<pre><code>public void doSomething() {\n    if (System.currentTimeMillis() % 100000 == 0) {\n        this.innerMember.changeState();\n    }\n}\n</code></pre>\n\n<p>First, you won't be able to detect it by running every class function, as this function changes the state of object precisely only once in 100 seconds.</p>\n\n<p>Second, you won't be able to detect it by parsing code, as you do not know if <code>changeState()</code> function changes the state of innerMember or not.</p>\n"},{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1311062818,"post_id":6743950,"comment_id":7992458,"body_markdown":"To generate a data model, I start with a class with just the fields I want.  After compiling this, I generate code which fills in the methods, constructors and builders. (In the template class the fields are non-final, in the generated class they are final)","body":"To generate a data model, I start with a class with just the fields I want.  After compiling this, I generate code which fills in the methods, constructors and builders. (In the template class the fields are non-final, in the generated class they are final)"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1311062244,"creation_date":1311062244,"answer_id":6743950,"question_id":6743872,"body_markdown":"If you generate your data model and all its code, you can ensure the possible Data Value objects you create will be immutable to meet your needs.\r\n\r\nThe problem you have is that there is different forms of immutability.  Even `String` would fail your test [Are String, Date, Method immutable?][1]   You can prove that a class is strictly immutable this way, but you are likely to be better off generating your data model.\r\n\r\n\r\n  [1]: http://vanillajava.blogspot.com/2011/06/are-string-method-date-immutable.html","title":"Unit testing for object immutability","body":"<p>If you generate your data model and all its code, you can ensure the possible Data Value objects you create will be immutable to meet your needs.</p>\n\n<p>The problem you have is that there is different forms of immutability.  Even <code>String</code> would fail your test <a href=\"http://vanillajava.blogspot.com/2011/06/are-string-method-date-immutable.html\" rel=\"nofollow\">Are String, Date, Method immutable?</a>   You can prove that a class is strictly immutable this way, but you are likely to be better off generating your data model.</p>\n"},{"tags":[],"owner":{"account_id":81456,"reputation":11655,"user_id":229672,"display_name":"denis.solonenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1311062426,"creation_date":1311062426,"answer_id":6743997,"question_id":6743872,"body_markdown":"This thread can help https://stackoverflow.com/questions/203475/how-do-i-identify-immutable-objects-in-java. Take a look at the second popular answer, it might be possible to check for any immutability problems with FindBugs. If you run it on every commit then you can call it a unit test :)\r\n\r\n*EDIT*\r\n\r\nIt seems that FindBugs only check for `final`, that&#39;s not much. You could implement your own rule according to you patterns and classes which you use in the code. ","title":"Unit testing for object immutability","body":"<p>This thread can help <a href=\"https://stackoverflow.com/questions/203475/how-do-i-identify-immutable-objects-in-java\">How do I identify immutable objects in Java</a>. Take a look at the second popular answer, it might be possible to check for any immutability problems with FindBugs. If you run it on every commit then you can call it a unit test :)</p>\n\n<p><em>EDIT</em></p>\n\n<p>It seems that FindBugs only check for <code>final</code>, that's not much. You could implement your own rule according to you patterns and classes which you use in the code. </p>\n"},{"tags":[],"owner":{"account_id":2908,"reputation":125963,"user_id":4120,"accept_rate":80,"display_name":"Grundlefleck"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1491576830,"creation_date":1318851957,"answer_id":7793273,"question_id":6743872,"body_markdown":"You may want to check out this project:\r\n\r\n[Mutability Detector][1]\r\n\r\nThis library attempts to analyse the bytecode of a particular class, to discover if it is immutable or not. It allows testing for this condition in a unit test, as demonstrated in a video available [here][2]. It is certainly not perfect (a String field will be considered mutable, and your array example is not handled well) but it&#39;s more sophisticated than what FindBugs offers (i.e. only checking that every field is final).\r\n\r\nDisclaimer: I wrote it ;-)\r\n\r\n\r\n  [1]: https://github.com/MutabilityDetector/MutabilityDetector\r\n  [2]: http://mutability-detector.blogspot.com/2011_03_01_archive.html","title":"Unit testing for object immutability","body":"<p>You may want to check out this project:</p>\n\n<p><a href=\"https://github.com/MutabilityDetector/MutabilityDetector\" rel=\"nofollow noreferrer\">Mutability Detector</a></p>\n\n<p>This library attempts to analyse the bytecode of a particular class, to discover if it is immutable or not. It allows testing for this condition in a unit test, as demonstrated in a video available <a href=\"http://mutability-detector.blogspot.com/2011_03_01_archive.html\" rel=\"nofollow noreferrer\">here</a>. It is certainly not perfect (a String field will be considered mutable, and your array example is not handled well) but it's more sophisticated than what FindBugs offers (i.e. only checking that every field is final).</p>\n\n<p>Disclaimer: I wrote it ;-)</p>\n"},{"comments":[{"owner":{"account_id":2908,"reputation":125963,"user_id":4120,"accept_rate":80,"display_name":"Grundlefleck"},"score":1,"creation_date":1491577243,"post_id":28111150,"comment_id":73630764,"body_markdown":"Pretty much all of what you said is spot on, and is complexity that is arrived at fairly quickly. I hope future generations will not implement this themselves, but will instead use and potentially contribute to https://github.com/MutabilityDetector/MutabilityDetector which has already encountered many and more of the problems you described :)","body":"Pretty much all of what you said is spot on, and is complexity that is arrived at fairly quickly. I hope future generations will not implement this themselves, but will instead use and potentially contribute to <a href=\"https://github.com/MutabilityDetector/MutabilityDetector\" rel=\"nofollow noreferrer\">github.com/MutabilityDetector/MutabilityDetector</a> which has already encountered many and more of the problems you described :)"},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1673128178,"post_id":28111150,"comment_id":132429803,"body_markdown":"There are ways to reliably detect immutability in Java. It&#39;s a huge subject, though, on how to go about figuring that out. I have provided an Answer to another very similar question addressing how you might go about thoroughly approaching this problem space. stackoverflow.com/a/75043881/501113","body":"There are ways to reliably detect immutability in Java. It&#39;s a huge subject, though, on how to go about figuring that out. I have provided an Answer to another very similar question addressing how you might go about thoroughly approaching this problem space. stackoverflow.com/a/75043881/501113"}],"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683638864,"creation_date":1422020212,"answer_id":28111150,"question_id":6743872,"body_markdown":"Yes, you can write an immutability detector.\r\n\r\nFirst of all, you are not going to be just writing a method which determines whether a class is immutable; instead, you will need to write an immutability detector class, because it is going to have to maintain some state.  The state of the detector will be the detected immutability of all classes which it has examined so far. This is not only useful for performance, but it is actually necessary because a class may contain a circular reference, which would cause a simplistic immutability detector to fall into infinite recursion.\r\n\r\nThe immutability of a class has four possible values: `Unknown`, `Mutable`, `Immutable`, and `Calculating`. You will probably want to have a map which associates each class that you have encountered so far to an immutability value.  Of course, `Unknown` does not actually need to be implemented, since it will be the implied state of any class which is not yet in the map.\r\n\r\nSo, when you begin examining a class, you associate it with a `Calculating` value in the map, and when you are done, you replace `Calculating` with either `Immutable` or `Mutable`.\r\n\r\nFor each class, you only need to check the field members, not the code.  The idea of checking bytecode is rather misguided.\r\n\r\nFirst of all, you should **not** check whether a class is final; The finality of a class does not affect its immutability.  Instead, a method which expects an immutable parameter should first of all invoke the immutability detector to assert the immutability of the class of the actual object that was passed. This test can be omitted if the type of the parameter is a final class, so finality is good for performance, but strictly speaking not necessary.  Also, as you will see further down, a field whose type is of a non-final class will cause the declaring class to be considered as mutable, but still, that&#39;s a problem of the declaring class, not the problem of the non-final immutable member class. It is perfectly fine to have a tall hierarchy of immutable classes, in which all the non-leaf nodes must of course be non-final.\r\n\r\nYou should **not** check whether a field is private;  it is perfectly fine for a class to have a public field, and the visibility of the field does not affect the immutability of the declaring class in any way, shape, or form.  You only need to check whether the field is final and its type is immutable.\r\n\r\nWhen examining a class, what you want to do first of all is to recurse to determine the immutability of its `super` class.  If the super is mutable, then the descendant is by definition mutable too.\r\n\r\nThen, you only need to check the *declared* fields of the class, not *all* fields.\r\n\r\nIf a field is non-final, then your class is mutable.\r\n\r\nIf a field is final, but the type of the field is mutable, then your class is mutable. (Arrays are by definition mutable.)\r\n\r\nIf a field is final, and the type of the field is `Calculating`, then ignore it and proceed to the next field.  If all fields are either immutable or `Calculating`, then your class is immutable.\r\n\r\nIf the type of the field is an interface, or an abstract class, or a non-final class, then it is to be considered as mutable, since you have absolutely no control over what the actual implementation may do. This might seem like an insurmountable problem, because it means that wrapping a modifiable collection inside an `UnmodifiableCollection` will still fail the immutability test, but it is actually fine, and it can be handled with the following workaround.\r\n\r\nSome classes may contain non-final fields and still be *effectively immutable*.  An example of this is the `String` class.  Other classes which fall into this category are classes which contain non-final members purely for performance monitoring purposes (invocation counters, etc.), classes which implement *popsicle immutability* (look it up), and classes which contain members that are interfaces which are known to not cause any side effects. Also, if a class contains bona fide mutable fields but promises not to take them into account when computing hashCode() and equals(), then the class is of course unsafe when it comes to multi-threading, but it can still be considered as immutable for the purpose of using it as a key in a map. So, all these cases can be handled in one of two ways:\r\n\r\n1. Manually adding classes (and interfaces) to your immutability detector.  If you know that a certain class is effectively immutable despite the fact that the immutability test for it fails, you can manually add an entry to your detector which associates it with `Immutable`.  This way, the detector will never attempt to check whether it is immutable, it will always just say &#39;yes, it is.&#39;\r\n\r\n2. Introducing an `@ImmutabilityOverride` annotation.  Your immutability detector can check for the presence of this annotation on a field, and if present, it may treat the field as immutable despite the fact that the field may be non-final or its type may be mutable. The detector may also check for the presence of this annotation on the class, thus treating the class as immutable without even bothering to check its fields.\r\n\r\nI hope this helps future generations.\r\n\r\n&lt;hr/&gt;\r\n\r\n***EDIT in 2023***\r\n\r\nI ended up writing a library that implements all of the above.\r\n\r\nYou can find it here: https://github.com/mikenakis/Bathyscaphe \r\n\r\nIn my opinion, static analysis tools such as MutabilityDetector (see Grundlefleck&#39;s answer) can be useful at certain times and under certain scenarios, but they do not (and cannot) provide a complete solution to the problem at all times. A complete solution requires runtime checking as I explain on my blog here: https://blog.michael.gr/2022/05/bathyscaphe.html, and that&#39;s why I have written Bathyscaphe.\r\n","title":"Unit testing for object immutability","body":"<p>Yes, you can write an immutability detector.</p>\n<p>First of all, you are not going to be just writing a method which determines whether a class is immutable; instead, you will need to write an immutability detector class, because it is going to have to maintain some state.  The state of the detector will be the detected immutability of all classes which it has examined so far. This is not only useful for performance, but it is actually necessary because a class may contain a circular reference, which would cause a simplistic immutability detector to fall into infinite recursion.</p>\n<p>The immutability of a class has four possible values: <code>Unknown</code>, <code>Mutable</code>, <code>Immutable</code>, and <code>Calculating</code>. You will probably want to have a map which associates each class that you have encountered so far to an immutability value.  Of course, <code>Unknown</code> does not actually need to be implemented, since it will be the implied state of any class which is not yet in the map.</p>\n<p>So, when you begin examining a class, you associate it with a <code>Calculating</code> value in the map, and when you are done, you replace <code>Calculating</code> with either <code>Immutable</code> or <code>Mutable</code>.</p>\n<p>For each class, you only need to check the field members, not the code.  The idea of checking bytecode is rather misguided.</p>\n<p>First of all, you should <strong>not</strong> check whether a class is final; The finality of a class does not affect its immutability.  Instead, a method which expects an immutable parameter should first of all invoke the immutability detector to assert the immutability of the class of the actual object that was passed. This test can be omitted if the type of the parameter is a final class, so finality is good for performance, but strictly speaking not necessary.  Also, as you will see further down, a field whose type is of a non-final class will cause the declaring class to be considered as mutable, but still, that's a problem of the declaring class, not the problem of the non-final immutable member class. It is perfectly fine to have a tall hierarchy of immutable classes, in which all the non-leaf nodes must of course be non-final.</p>\n<p>You should <strong>not</strong> check whether a field is private;  it is perfectly fine for a class to have a public field, and the visibility of the field does not affect the immutability of the declaring class in any way, shape, or form.  You only need to check whether the field is final and its type is immutable.</p>\n<p>When examining a class, what you want to do first of all is to recurse to determine the immutability of its <code>super</code> class.  If the super is mutable, then the descendant is by definition mutable too.</p>\n<p>Then, you only need to check the <em>declared</em> fields of the class, not <em>all</em> fields.</p>\n<p>If a field is non-final, then your class is mutable.</p>\n<p>If a field is final, but the type of the field is mutable, then your class is mutable. (Arrays are by definition mutable.)</p>\n<p>If a field is final, and the type of the field is <code>Calculating</code>, then ignore it and proceed to the next field.  If all fields are either immutable or <code>Calculating</code>, then your class is immutable.</p>\n<p>If the type of the field is an interface, or an abstract class, or a non-final class, then it is to be considered as mutable, since you have absolutely no control over what the actual implementation may do. This might seem like an insurmountable problem, because it means that wrapping a modifiable collection inside an <code>UnmodifiableCollection</code> will still fail the immutability test, but it is actually fine, and it can be handled with the following workaround.</p>\n<p>Some classes may contain non-final fields and still be <em>effectively immutable</em>.  An example of this is the <code>String</code> class.  Other classes which fall into this category are classes which contain non-final members purely for performance monitoring purposes (invocation counters, etc.), classes which implement <em>popsicle immutability</em> (look it up), and classes which contain members that are interfaces which are known to not cause any side effects. Also, if a class contains bona fide mutable fields but promises not to take them into account when computing hashCode() and equals(), then the class is of course unsafe when it comes to multi-threading, but it can still be considered as immutable for the purpose of using it as a key in a map. So, all these cases can be handled in one of two ways:</p>\n<ol>\n<li><p>Manually adding classes (and interfaces) to your immutability detector.  If you know that a certain class is effectively immutable despite the fact that the immutability test for it fails, you can manually add an entry to your detector which associates it with <code>Immutable</code>.  This way, the detector will never attempt to check whether it is immutable, it will always just say 'yes, it is.'</p>\n</li>\n<li><p>Introducing an <code>@ImmutabilityOverride</code> annotation.  Your immutability detector can check for the presence of this annotation on a field, and if present, it may treat the field as immutable despite the fact that the field may be non-final or its type may be mutable. The detector may also check for the presence of this annotation on the class, thus treating the class as immutable without even bothering to check its fields.</p>\n</li>\n</ol>\n<p>I hope this helps future generations.</p>\n<hr/>\n<p><em><strong>EDIT in 2023</strong></em></p>\n<p>I ended up writing a library that implements all of the above.</p>\n<p>You can find it here: <a href=\"https://github.com/mikenakis/Bathyscaphe\" rel=\"nofollow noreferrer\">https://github.com/mikenakis/Bathyscaphe</a></p>\n<p>In my opinion, static analysis tools such as MutabilityDetector (see Grundlefleck's answer) can be useful at certain times and under certain scenarios, but they do not (and cannot) provide a complete solution to the problem at all times. A complete solution requires runtime checking as I explain on my blog here: <a href=\"https://blog.michael.gr/2022/05/bathyscaphe.html\" rel=\"nofollow noreferrer\">https://blog.michael.gr/2022/05/bathyscaphe.html</a>, and that's why I have written Bathyscaphe.</p>\n"}],"owner":{"account_id":102129,"reputation":7632,"user_id":274344,"accept_rate":82,"display_name":"Simeon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7977,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":6743950,"answer_count":6,"score":12,"last_activity_date":1683638864,"creation_date":1311061802,"question_id":6743872,"body_markdown":"I want to make sure that a given group of objects is immutable.\r\n\r\nI was thinking about something along the lines of:\r\n\r\n 2. check if every field is private final\r\n 3. check if class is final\r\n 4. check for mutable members\r\n\r\nSo I guess my question is: is 3. possible ?\r\n\r\nI can check recursively whether every member of a class has its fields `private final`, but this is not enough since a class can have e method named `getHaha(param)` which adds the given param to an array for instance.\r\n\r\nSo is there a good way to check if an object is immutable or is it even possible ?\r\n\r\n\r\nThanks,","title":"Unit testing for object immutability","body":"<p>I want to make sure that a given group of objects is immutable.</p>\n\n<p>I was thinking about something along the lines of:</p>\n\n<ol>\n<li>check if every field is private final</li>\n<li>check if class is final</li>\n<li>check for mutable members</li>\n</ol>\n\n<p>So I guess my question is: is 3. possible ?</p>\n\n<p>I can check recursively whether every member of a class has its fields <code>private final</code>, but this is not enough since a class can have e method named <code>getHaha(param)</code> which adds the given param to an array for instance.</p>\n\n<p>So is there a good way to check if an object is immutable or is it even possible ?</p>\n\n<p>Thanks,</p>\n"},{"tags":["java","spring","spring-data","spring-data-jdbc"],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1601476029,"creation_date":1601475651,"answer_id":64139597,"question_id":64076453,"body_markdown":"`@Embedded` means that while the referenced object is a separate entity in the java side of things it is part of the table mapped to the parent entity. \r\n\r\nYou therefore need to include the columns of the `ContractStatuses` entity in the `suppliers_contracts` table.\r\n\r\nThis of course would result in a name clash, so you need to specify a prefix in the `@Embedded` annotation and use that prefix with the column names coming from `ContractStatuses`.\r\n\r\n_Note: Since this is a follow up question from https://stackoverflow.com/a/64025347/66686 The advice there was to use a database view, so instead of the `suppliers_contracts` table you would map `SupplierContractReadOnly` to a database view which then contains all the columns discussed above._\r\n\r\n_Another note: `@MappedCollection` only applies to collection like fields (`List`, `Set` and `Map`). So it serves no purpose in this case and should be removed._","title":"@Embedded Entity for read only Spring Data Jdbc","body":"<p><code>@Embedded</code> means that while the referenced object is a separate entity in the java side of things it is part of the table mapped to the parent entity.</p>\n<p>You therefore need to include the columns of the <code>ContractStatuses</code> entity in the <code>suppliers_contracts</code> table.</p>\n<p>This of course would result in a name clash, so you need to specify a prefix in the <code>@Embedded</code> annotation and use that prefix with the column names coming from <code>ContractStatuses</code>.</p>\n<p><em>Note: Since this is a follow up question from <a href=\"https://stackoverflow.com/a/64025347/66686\">https://stackoverflow.com/a/64025347/66686</a> The advice there was to use a database view, so instead of the <code>suppliers_contracts</code> table you would map <code>SupplierContractReadOnly</code> to a database view which then contains all the columns discussed above.</em></p>\n<p><em>Another note: <code>@MappedCollection</code> only applies to collection like fields (<code>List</code>, <code>Set</code> and <code>Map</code>). So it serves no purpose in this case and should be removed.</em></p>\n"}],"owner":{"account_id":11197515,"reputation":73,"user_id":8215708,"display_name":"Haim Klainman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1657,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64139597,"answer_count":1,"score":1,"last_activity_date":1683638667,"creation_date":1601115648,"question_id":64076453,"body_markdown":"I&#39;m Trying to `repo.findAll()` with `@Embedded` annotation to fetch object&#39;s status `name` by its `status` id as foreign key but getting Exception. \r\n\r\ntables:\r\n\r\n```sql\r\nCREATE TABLE `contract_statuses` (\r\n    `id` int(11) NOT NULL AUTO_INCREMENT,\r\n    `name` varchar(45) NOT NULL,\r\n    PRIMARY KEY (`id`)\r\n);\r\n\r\nCREATE TABLE `suppliers_contracts` (\r\n    `id` bigint(20) NOT NULL AUTO_INCREMENT,\r\n    `supplier` bigint(20) NOT NULL,\r\n    `cabs_id` int(11) DEFAULT NULL,\r\n    `start_date` date DEFAULT NULL,\r\n    `end_date` date DEFAULT NULL,\r\n    `attorny_end_date` date DEFAULT NULL,\r\n    `number_of_payments` int(11) DEFAULT NULL,\r\n    `payment_amount` int(11) DEFAULT NULL,\r\n    `comments` varchar(2000) DEFAULT NULL,\r\n    `close_date` timestamp NULL DEFAULT NULL,\r\n    `status` int(11) NOT NULL,\r\n    `created_on` timestamp NOT NULL DEFAULT current_timestamp(),\r\n     PRIMARY KEY (`id`)\r\n);\r\n```\r\n   Statuses Object\r\n\r\n```\r\n@Table(&quot;contract_statuses&quot;)\r\npublic class ContractStatuses {\r\n      //@Id\r\n      Integer id;\r\n      String name;\r\n     public ContractStatuses() {}       \r\n}\r\n```\r\n    Contract Object:  \r\n```\r\n@Table(&quot;suppliers_contracts&quot;)\r\npublic class SupplierContractReadOnly {\r\n      @Id\r\n      Long id;\r\n      Long supplier;\r\n      Long cabsId;\r\n      Date startDate;\r\n      Date endDate;\r\n      int paymentAmount;\r\n      Integer status;\r\n      Date attornyEndDate;\r\n      int numberOfPayments;\r\n      String comments;\r\n      Date closeDate;\r\n  \r\n      @MappedCollection(idColumn = &quot;id&quot;)\r\n      @Embedded(onEmpty = USE_NULL)\r\n      ContractStatuses statuses;\r\n    \r\n      public SupplierContractReadOnly() { }\r\n        //Getters and setters\r\n}\r\n```\r\nRepo\r\n```\r\npublic interface SupplierContractRepoReadOnly extends Repository&lt;SupplierContractReadOnly,Long&gt; {\r\n    List&lt;SupplierContractReadOnly&gt; findAll();\r\n}\r\n```\r\nView\r\n\r\n    @GetMapping(&quot;/getContracts&quot;)\r\n    public List&lt;SupplierContractReadOnly&gt; getContracts(){\r\n        //List&lt;SupplierContractReadOnly&gt;  newContract = supplierContractRepoReadOnly.findAll();\r\n        return supplierContractRepoReadOnly.findAll();\r\n    }\r\n\r\nStacktrace\r\n\r\n\r\n    2020-09-26 12:41:49.833 DEBUG 9948 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT `suppliers_contracts`.`id` AS `id`, `suppliers_contracts`.`cabs_id` AS `cabs_id`, `suppliers_contracts`.`status` AS `status`, `suppliers_contracts`.`end_date` AS `end_date`, `suppliers_contracts`.`comments` AS `comments`, `suppliers_contracts`.`supplier` AS `supplier`, `suppliers_contracts`.`start_date` AS `start_date`, `suppliers_contracts`.`close_date` AS `close_date`, `suppliers_contracts`.`payment_amount` AS `payment_amount`, `suppliers_contracts`.`attorny_end_date` AS `attorny_end_date`, `suppliers_contracts`.`number_of_payments` AS `number_of_payments`, `suppliers_contracts`.`id` AS `id`, `suppliers_contracts`.`name` AS `name` FROM `suppliers_contracts`]\r\n    2020-09-26 12:41:49.983 ERROR 9948 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [SELECT `suppliers_contracts`.`id` AS `id`, `suppliers_contracts`.`cabs_id` AS `cabs_id`, `suppliers_contracts`.`status` AS `status`, `suppliers_contracts`.`end_date` AS `end_date`, `suppliers_contracts`.`comments` AS `comments`, `suppliers_contracts`.`supplier` AS `supplier`, `suppliers_contracts`.`start_date` AS `start_date`, `suppliers_contracts`.`close_date` AS `close_date`, `suppliers_contracts`.`payment_amount` AS `payment_amount`, `suppliers_contracts`.`attorny_end_date` AS `attorny_end_date`, `suppliers_contracts`.`number_of_payments` AS `number_of_payments`, `suppliers_contracts`.`id` AS `id`, `suppliers_contracts`.`name` AS `name` FROM `suppliers_contracts`]; nested exception is java.sql.SQLSyntaxErrorException: Unknown column &#39;suppliers_contracts.name&#39; in &#39;field list&#39;] with root cause\r\n    \r\n    java.sql.SQLSyntaxErrorException: Unknown column &#39;suppliers_contracts.name&#39; in &#39;field list&#39;\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n    \tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n    \tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n    \tat com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1003) ~[mysql-connector-java-8.0.20.jar:8.0.20]\r\n    \tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-3.4.5.jar:na]\r\n    \tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-3.4.5.jar:na]\r\n    \tat org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:678) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:617) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:669) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:694) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:748) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:216) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:228) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.convert.DefaultDataAccessStrategy.findAll(DefaultDataAccessStrategy.java:307) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.JdbcAggregateTemplate.findAll(JdbcAggregateTemplate.java:266) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.repository.support.SimpleJdbcRepository.findAll(SimpleJdbcRepository.java:95) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.data.repository.core.support.ImplementationInvocationMetadata.invoke(ImplementationInvocationMetadata.java:72) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:382) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:205) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:549) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:155) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:130) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:366) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat com.sun.proxy.$Proxy69.findAll(Unknown Source) ~[na:na]\r\n    \tat com.cartwheel.payments.management.payments.resources.MainResources.getSupp(MainResources.java:153) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\r\n    \tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\r\n\r\n\r\nWhen i&#39;m changing the refrence (in SupplierContractReadOnly) of the embedded entity to mediator object like so:\r\n\r\n    public class ContractStatusesRef {\r\n        Integer status;\r\n        @MappedCollection(idColumn = &quot;id&quot;)\r\n        ContractStatuses contractStatuses;\r\n        public ContractStatusesRef() {\r\n        }\r\n    }\r\nthe exception is different:\r\n\r\n\r\n    2020-09-26 13:10:13.117 ERROR 6048 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: A database object name must not be null or empty] with root cause\r\n    \r\n    java.lang.IllegalArgumentException: A database object name must not be null or empty\r\n    \tat org.springframework.util.Assert.hasText(Assert.java:284) ~[spring-core-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.data.relational.core.sql.DefaultSqlIdentifier.&lt;init&gt;(DefaultSqlIdentifier.java:36) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.relational.core.sql.SqlIdentifier.quoted(SqlIdentifier.java:109) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.relational.core.mapping.PersistentPropertyPathExtension.assembleTableAlias(PersistentPropertyPathExtension.java:397) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.relational.core.mapping.PersistentPropertyPathExtension.assembleTableAlias(PersistentPropertyPathExtension.java:401) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.relational.core.mapping.PersistentPropertyPathExtension.getTableAlias(PersistentPropertyPathExtension.java:246) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.convert.SqlContext.getTable(SqlContext.java:57) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.convert.SqlGenerator.getJoin(SqlGenerator.java:525) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.convert.SqlGenerator.selectBuilder(SqlGenerator.java:430) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.convert.SqlGenerator.selectBuilder(SqlGenerator.java:414) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.convert.SqlGenerator.createFindAllSql(SqlGenerator.java:410) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.util.Lazy.getNullable(Lazy.java:212) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.util.Lazy.get(Lazy.java:94) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.convert.SqlGenerator.getFindAll(SqlGenerator.java:171) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.convert.DefaultDataAccessStrategy.findAll(DefaultDataAccessStrategy.java:307) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.core.JdbcAggregateTemplate.findAll(JdbcAggregateTemplate.java:266) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat org.springframework.data.jdbc.repository.support.SimpleJdbcRepository.findAll(SimpleJdbcRepository.java:95) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.data.repository.core.support.ImplementationInvocationMetadata.invoke(ImplementationInvocationMetadata.java:72) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:382) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:205) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:549) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:155) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:130) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:366) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat com.sun.proxy.$Proxy69.findAll(Unknown Source) ~[na:na]\r\n    \tat com.cartwheel.payments.management.payments.resources.MainResources.getContracts(MainResources.java:154) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~\r\n\r\n\r\n\r\n\r\n\r\n","title":"@Embedded Entity for read only Spring Data Jdbc","body":"<p>I'm Trying to <code>repo.findAll()</code> with <code>@Embedded</code> annotation to fetch object's status <code>name</code> by its <code>status</code> id as foreign key but getting Exception.</p>\n<p>tables:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE `contract_statuses` (\n    `id` int(11) NOT NULL AUTO_INCREMENT,\n    `name` varchar(45) NOT NULL,\n    PRIMARY KEY (`id`)\n);\n\nCREATE TABLE `suppliers_contracts` (\n    `id` bigint(20) NOT NULL AUTO_INCREMENT,\n    `supplier` bigint(20) NOT NULL,\n    `cabs_id` int(11) DEFAULT NULL,\n    `start_date` date DEFAULT NULL,\n    `end_date` date DEFAULT NULL,\n    `attorny_end_date` date DEFAULT NULL,\n    `number_of_payments` int(11) DEFAULT NULL,\n    `payment_amount` int(11) DEFAULT NULL,\n    `comments` varchar(2000) DEFAULT NULL,\n    `close_date` timestamp NULL DEFAULT NULL,\n    `status` int(11) NOT NULL,\n    `created_on` timestamp NOT NULL DEFAULT current_timestamp(),\n     PRIMARY KEY (`id`)\n);\n</code></pre>\n<p>Statuses Object</p>\n<pre><code>@Table(&quot;contract_statuses&quot;)\npublic class ContractStatuses {\n      //@Id\n      Integer id;\n      String name;\n     public ContractStatuses() {}       \n}\n</code></pre>\n<pre><code>Contract Object:  \n</code></pre>\n<pre><code>@Table(&quot;suppliers_contracts&quot;)\npublic class SupplierContractReadOnly {\n      @Id\n      Long id;\n      Long supplier;\n      Long cabsId;\n      Date startDate;\n      Date endDate;\n      int paymentAmount;\n      Integer status;\n      Date attornyEndDate;\n      int numberOfPayments;\n      String comments;\n      Date closeDate;\n  \n      @MappedCollection(idColumn = &quot;id&quot;)\n      @Embedded(onEmpty = USE_NULL)\n      ContractStatuses statuses;\n    \n      public SupplierContractReadOnly() { }\n        //Getters and setters\n}\n</code></pre>\n<p>Repo</p>\n<pre><code>public interface SupplierContractRepoReadOnly extends Repository&lt;SupplierContractReadOnly,Long&gt; {\n    List&lt;SupplierContractReadOnly&gt; findAll();\n}\n</code></pre>\n<p>View</p>\n<pre><code>@GetMapping(&quot;/getContracts&quot;)\npublic List&lt;SupplierContractReadOnly&gt; getContracts(){\n    //List&lt;SupplierContractReadOnly&gt;  newContract = supplierContractRepoReadOnly.findAll();\n    return supplierContractRepoReadOnly.findAll();\n}\n</code></pre>\n<p>Stacktrace</p>\n<pre><code>2020-09-26 12:41:49.833 DEBUG 9948 --- [nio-8080-exec-2] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT `suppliers_contracts`.`id` AS `id`, `suppliers_contracts`.`cabs_id` AS `cabs_id`, `suppliers_contracts`.`status` AS `status`, `suppliers_contracts`.`end_date` AS `end_date`, `suppliers_contracts`.`comments` AS `comments`, `suppliers_contracts`.`supplier` AS `supplier`, `suppliers_contracts`.`start_date` AS `start_date`, `suppliers_contracts`.`close_date` AS `close_date`, `suppliers_contracts`.`payment_amount` AS `payment_amount`, `suppliers_contracts`.`attorny_end_date` AS `attorny_end_date`, `suppliers_contracts`.`number_of_payments` AS `number_of_payments`, `suppliers_contracts`.`id` AS `id`, `suppliers_contracts`.`name` AS `name` FROM `suppliers_contracts`]\n2020-09-26 12:41:49.983 ERROR 9948 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [SELECT `suppliers_contracts`.`id` AS `id`, `suppliers_contracts`.`cabs_id` AS `cabs_id`, `suppliers_contracts`.`status` AS `status`, `suppliers_contracts`.`end_date` AS `end_date`, `suppliers_contracts`.`comments` AS `comments`, `suppliers_contracts`.`supplier` AS `supplier`, `suppliers_contracts`.`start_date` AS `start_date`, `suppliers_contracts`.`close_date` AS `close_date`, `suppliers_contracts`.`payment_amount` AS `payment_amount`, `suppliers_contracts`.`attorny_end_date` AS `attorny_end_date`, `suppliers_contracts`.`number_of_payments` AS `number_of_payments`, `suppliers_contracts`.`id` AS `id`, `suppliers_contracts`.`name` AS `name` FROM `suppliers_contracts`]; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'suppliers_contracts.name' in 'field list'] with root cause\n\njava.sql.SQLSyntaxErrorException: Unknown column 'suppliers_contracts.name' in 'field list'\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n    at com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:1003) ~[mysql-connector-java-8.0.20.jar:8.0.20]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-3.4.5.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-3.4.5.jar:na]\n    at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:678) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:617) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:669) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:694) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:748) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:216) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate.query(NamedParameterJdbcTemplate.java:228) ~[spring-jdbc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.data.jdbc.core.convert.DefaultDataAccessStrategy.findAll(DefaultDataAccessStrategy.java:307) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.core.JdbcAggregateTemplate.findAll(JdbcAggregateTemplate.java:266) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.repository.support.SimpleJdbcRepository.findAll(SimpleJdbcRepository.java:95) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\n    at org.springframework.data.repository.core.support.ImplementationInvocationMetadata.invoke(ImplementationInvocationMetadata.java:72) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:382) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:205) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:549) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:155) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:130) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:366) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at com.sun.proxy.$Proxy69.findAll(Unknown Source) ~[na:na]\n    at com.cartwheel.payments.management.payments.resources.MainResources.getSupp(MainResources.java:153) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:373) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:868) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1590) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n</code></pre>\n<p>When i'm changing the refrence (in SupplierContractReadOnly) of the embedded entity to mediator object like so:</p>\n<pre><code>public class ContractStatusesRef {\n    Integer status;\n    @MappedCollection(idColumn = &quot;id&quot;)\n    ContractStatuses contractStatuses;\n    public ContractStatusesRef() {\n    }\n}\n</code></pre>\n<p>the exception is different:</p>\n<pre><code>2020-09-26 13:10:13.117 ERROR 6048 --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: A database object name must not be null or empty] with root cause\n\njava.lang.IllegalArgumentException: A database object name must not be null or empty\n    at org.springframework.util.Assert.hasText(Assert.java:284) ~[spring-core-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.data.relational.core.sql.DefaultSqlIdentifier.&lt;init&gt;(DefaultSqlIdentifier.java:36) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.relational.core.sql.SqlIdentifier.quoted(SqlIdentifier.java:109) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.relational.core.mapping.PersistentPropertyPathExtension.assembleTableAlias(PersistentPropertyPathExtension.java:397) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.relational.core.mapping.PersistentPropertyPathExtension.assembleTableAlias(PersistentPropertyPathExtension.java:401) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.relational.core.mapping.PersistentPropertyPathExtension.getTableAlias(PersistentPropertyPathExtension.java:246) ~[spring-data-relational-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.core.convert.SqlContext.getTable(SqlContext.java:57) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.core.convert.SqlGenerator.getJoin(SqlGenerator.java:525) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.core.convert.SqlGenerator.selectBuilder(SqlGenerator.java:430) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.core.convert.SqlGenerator.selectBuilder(SqlGenerator.java:414) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.core.convert.SqlGenerator.createFindAllSql(SqlGenerator.java:410) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.util.Lazy.getNullable(Lazy.java:212) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.util.Lazy.get(Lazy.java:94) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.jdbc.core.convert.SqlGenerator.getFindAll(SqlGenerator.java:171) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.core.convert.DefaultDataAccessStrategy.findAll(DefaultDataAccessStrategy.java:307) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.core.JdbcAggregateTemplate.findAll(JdbcAggregateTemplate.java:266) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at org.springframework.data.jdbc.repository.support.SimpleJdbcRepository.findAll(SimpleJdbcRepository.java:95) ~[spring-data-jdbc-2.0.0.RELEASE.jar:2.0.0.RELEASE]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\n    at org.springframework.data.repository.core.support.ImplementationInvocationMetadata.invoke(ImplementationInvocationMetadata.java:72) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:382) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:205) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:549) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:155) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:130) ~[spring-data-commons-2.3.0.RELEASE.jar:2.3.0.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:366) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:139) ~[spring-tx-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) ~[spring-aop-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at com.sun.proxy.$Proxy69.findAll(Unknown Source) ~[na:na]\n    at com.cartwheel.payments.management.payments.resources.MainResources.getContracts(MainResources.java:154) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:564) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:105) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:634) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.6.RELEASE.jar:5.2.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.35.jar:9.0.35]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~\n</code></pre>\n"},{"tags":["java","spring-data-jdbc"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1683579585,"post_id":76204280,"comment_id":134385608,"body_markdown":"Take a look at https://stackoverflow.com/questions/16772370/when-to-use-discriminatorvalue-annotation-in-hibernate","body":"Take a look at <a href=\"https://stackoverflow.com/questions/16772370/when-to-use-discriminatorvalue-annotation-in-hibernate\" title=\"when to use discriminatorvalue annotation in hibernate\">stackoverflow.com/questions/16772370/&hellip;</a>"},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683579810,"post_id":76204280,"comment_id":134385645,"body_markdown":"Look up JPA and  `@DiscriminatorColumn`","body":"Look up JPA and  <code>@DiscriminatorColumn</code>"},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1683616253,"post_id":76204280,"comment_id":134389629,"body_markdown":"@JimGarrison The question is about Spring Data JDBC not JPA or Hibernate.","body":"@JimGarrison The question is about Spring Data JDBC not JPA or Hibernate."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1683616267,"post_id":76204280,"comment_id":134389634,"body_markdown":"@BillMair The question is about Spring Data JDBC not JPA or Hibernate.","body":"@BillMair The question is about Spring Data JDBC not JPA or Hibernate."},{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683630329,"post_id":76204280,"comment_id":134392811,"body_markdown":"What does Sping Data &quot;JDBC&quot; use? The Spring team didn&#39;t invent their own stack for SQL. That is why there is a JpaRepository in Spring Data. The OP asked about SQL tables, and unless he want to start down the path of implementing his own CrudRepository or even staring from scratch with nothing, then your comment and solution is overly complex. See: https://docs.spring.io/spring-data/jdbc/docs/current/reference/html/#repositories.core-concepts","body":"What does Sping Data &quot;JDBC&quot; use? The Spring team didn&#39;t invent their own stack for SQL. That is why there is a JpaRepository in Spring Data. The OP asked about SQL tables, and unless he want to start down the path of implementing his own CrudRepository or even staring from scratch with nothing, then your comment and solution is overly complex. See: <a href=\"https://docs.spring.io/spring-data/jdbc/docs/current/reference/html/#repositories.core-concepts\" rel=\"nofollow noreferrer\">docs.spring.io/spring-data/jdbc/docs/current/reference/html/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1683630036,"post_id":76206687,"comment_id":134392734,"body_markdown":"This is no solution for a JDBC based problem. &quot;Spring Data modules accept either third-party annotations (such as JPAs @Entity) or provide their own annotations (such as @Document for Spring Data MongoDB and Spring Data Elasticsearch).&quot; Spring utilizes JPA to interact with SQL databases.","body":"This is no solution for a JDBC based problem. &quot;Spring Data modules accept either third-party annotations (such as JPAs @Entity) or provide their own annotations (such as @Document for Spring Data MongoDB and Spring Data Elasticsearch).&quot; Spring utilizes JPA to interact with SQL databases."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1683637904,"post_id":76206687,"comment_id":134394666,"body_markdown":"@BillMair You still seem to confuse Spring Data JPA and Spring Data JDBC https://spring.io/projects/spring-data-jdbc/","body":"@BillMair You still seem to confuse Spring Data JPA and Spring Data JDBC <a href=\"https://spring.io/projects/spring-data-jdbc/\" rel=\"nofollow noreferrer\">spring.io/projects/spring-data-jdbc</a>"},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1683637942,"post_id":76206687,"comment_id":134394678,"body_markdown":"Spring Data JDBC does not utilise JPA annotations or any other part of JPA.","body":"Spring Data JDBC does not utilise JPA annotations or any other part of JPA."},{"owner":{"account_id":133310,"reputation":6104,"user_id":334569,"accept_rate":73,"display_name":"Marco Lackovic"},"score":0,"creation_date":1683660421,"post_id":76206687,"comment_id":134400098,"body_markdown":"@JensSchauder I agree `type` is redundant and should be removed. I can check whether `toyProperties` and `foodProperties` are `null` to infer the type. I don&#39;t like the idea of having a single table with all the columns: (1) to keep data consistent I would need to add complex non-scalable constraints - e.g. when I need to add a new type or a new field to an existing type, (2) could lead to having a table with a lot of columns, (3) it&#39;s difficult to get a grasp of the domain sections by looking at the table, (4) many columns would contain `NULL` values.","body":"@JensSchauder I agree <code>type</code> is redundant and should be removed. I can check whether <code>toyProperties</code> and <code>foodProperties</code> are <code>null</code> to infer the type. I don&#39;t like the idea of having a single table with all the columns: (1) to keep data consistent I would need to add complex non-scalable constraints - e.g. when I need to add a new type or a new field to an existing type, (2) could lead to having a table with a lot of columns, (3) it&#39;s difficult to get a grasp of the domain sections by looking at the table, (4) many columns would contain <code>NULL</code> values."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1683716040,"post_id":76206687,"comment_id":134408275,"body_markdown":"1 if you don&#39;t have duplicate information you can&#39;t really have inconsistent data. So you don&#39;t need constraints, as far as the discussed requirement is concerned.","body":"1 if you don&#39;t have duplicate information you can&#39;t really have inconsistent data. So you don&#39;t need constraints, as far as the discussed requirement is concerned."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1683716068,"post_id":76206687,"comment_id":134408280,"body_markdown":"2 lots of columns shouldn&#39;t be a problem until you get really lots.","body":"2 lots of columns shouldn&#39;t be a problem until you get really lots."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1683716100,"post_id":76206687,"comment_id":134408287,"body_markdown":"3 true, although with different prefixes for the different groups that shouldn&#39;t be to bad.","body":"3 true, although with different prefixes for the different groups that shouldn&#39;t be to bad."},{"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"score":0,"creation_date":1683716162,"post_id":76206687,"comment_id":134408294,"body_markdown":"4 true, but shouldn&#39;t be a problem. DBs can handle that quite well. Certainly more efficient then writing/loading to/from all the different tables.","body":"4 true, but shouldn&#39;t be a problem. DBs can handle that quite well. Certainly more efficient then writing/loading to/from all the different tables."}],"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"comment_count":8,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1683638532,"creation_date":1683616067,"answer_id":76206687,"question_id":76204280,"body_markdown":"The underlying problem here is that you have redundant information in your model and therefore run the risk that the different representations contradict each other.\r\nThe `type` is really determined by the presence or absence of the different properties.\r\nI therefore recommend to remove it completely from both the database and the Java model.\r\nThen change the one-to-one relationships to [`@Embedded`][1] ones so you only have a single table with all the columns.\r\n\r\nIf you need the type in the database you might add it as a [function based virtual column][2] if your database supports such a thing.\r\nOr have it as a normal column and fill it using a trigger.\r\n\r\nIf you need the type in Java you can create a getter that calculates it or keep it in a [`@Transient`][3] field.\r\n\r\nIf this doesn&#39;t work for you for what ever reason you are left with two issues here. \r\nConsistency on the database level and consistency on the application/Java side.\r\n\r\n## Database\r\n\r\nLet&#39;s start with the database side. \r\nI see three options:\r\n\r\n1. You could change the model to have all properties in a single table and instead of one-to-one relationships mark the references as `@Embedded` you could then create a check constraint in the database that ensures only valid combinations are created.\r\n\r\n2. If you don&#39;t want to merge the tables into one you could create a materialized view based on the tables and put constraints on that.\r\nFor this to work as intended you need materialized views that automatically update. \r\nI do know that Oracle supports those and also know that at least some databases don&#39;t.\r\n\r\n3. The last alternative is to use triggers to verify the constraint. \r\n\r\nSince it is the easiest to implement, works on all databases, and also leads to simpler/faster reading and writing I recommend the first approach.\r\n\r\n## Java\r\nFor the Java side you can simply rely on standard Java code to check the constraints. \r\nIn order to make this fails save and simple I recommend making your model immutable. \r\nIt allows you to check the constraints in the constructor and be done with it.\r\n\r\nIf that leads to an API that is hard to use in your application, you could create a builder that gathers all the data for an instance before building it.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jdbc/docs/current/api/org/springframework/data/relational/core/mapping/Embedded.html\r\n  [2]: https://oracle-base.com/articles/11g/virtual-columns-11gr1\r\n  [3]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/annotation/Transient.html","title":"How to implement a &quot;one to one&quot; relationship with mutually exclusive alternatives in Spring Data JDBC","body":"<p>The underlying problem here is that you have redundant information in your model and therefore run the risk that the different representations contradict each other.\nThe <code>type</code> is really determined by the presence or absence of the different properties.\nI therefore recommend to remove it completely from both the database and the Java model.\nThen change the one-to-one relationships to <a href=\"https://docs.spring.io/spring-data/jdbc/docs/current/api/org/springframework/data/relational/core/mapping/Embedded.html\" rel=\"nofollow noreferrer\"><code>@Embedded</code></a> ones so you only have a single table with all the columns.</p>\n<p>If you need the type in the database you might add it as a <a href=\"https://oracle-base.com/articles/11g/virtual-columns-11gr1\" rel=\"nofollow noreferrer\">function based virtual column</a> if your database supports such a thing.\nOr have it as a normal column and fill it using a trigger.</p>\n<p>If you need the type in Java you can create a getter that calculates it or keep it in a <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/annotation/Transient.html\" rel=\"nofollow noreferrer\"><code>@Transient</code></a> field.</p>\n<p>If this doesn't work for you for what ever reason you are left with two issues here.\nConsistency on the database level and consistency on the application/Java side.</p>\n<h2>Database</h2>\n<p>Let's start with the database side.\nI see three options:</p>\n<ol>\n<li><p>You could change the model to have all properties in a single table and instead of one-to-one relationships mark the references as <code>@Embedded</code> you could then create a check constraint in the database that ensures only valid combinations are created.</p>\n</li>\n<li><p>If you don't want to merge the tables into one you could create a materialized view based on the tables and put constraints on that.\nFor this to work as intended you need materialized views that automatically update.\nI do know that Oracle supports those and also know that at least some databases don't.</p>\n</li>\n<li><p>The last alternative is to use triggers to verify the constraint.</p>\n</li>\n</ol>\n<p>Since it is the easiest to implement, works on all databases, and also leads to simpler/faster reading and writing I recommend the first approach.</p>\n<h2>Java</h2>\n<p>For the Java side you can simply rely on standard Java code to check the constraints.\nIn order to make this fails save and simple I recommend making your model immutable.\nIt allows you to check the constraints in the constructor and be done with it.</p>\n<p>If that leads to an API that is hard to use in your application, you could create a builder that gathers all the data for an instance before building it.</p>\n"}],"owner":{"account_id":133310,"reputation":6104,"user_id":334569,"accept_rate":73,"display_name":"Marco Lackovic"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683638532,"creation_date":1683579070,"question_id":76204280,"body_markdown":"Given the following three tables describing an item that can be either a toy, a food or unknown:\r\n\r\n```sql\r\nCREATE TABLE item (\r\n    id SERIAL PRIMARY KEY,\r\n    name VARCHAR(255) NOT NULL,\r\n    type VARCHAR(255) NOT NULL CHECK (type IN (&#39;TOY&#39;, &#39;FOOD&#39;, &#39;UNKNOWN&#39;))\r\n);\r\n\r\nCREATE TABLE item_toy (\r\n    item INTEGER NOT NULL REFERENCES item(id),\r\n    color VARCHAR(255) NOT NULL,\r\n    material VARCHAR(255) NOT NULL\r\n);\r\n\r\nCREATE TABLE item_food (\r\n    item INTEGER NOT NULL REFERENCES item(id),\r\n    smell VARCHAR(255) NOT NULL,\r\n    taste VARCHAR(255) NOT NULL\r\n);\r\n```\r\n\r\nToy items would have only toy properties, food items only food properties and uknown items neither of them.\r\n\r\nWe can model these tables in Java, using Spring Data JDBC, in the following way:\r\n\r\n```java\r\npublic class Item {\r\n    private int id;\r\n    private String name;\r\n    private ItemType type;\r\n    private ItemToy toyProperties;\r\n    private ItemFood foodProperties;\r\n}\r\n\r\npublic enum ItemType {\r\n    TOY,\r\n    FOOD,\r\n    UNKNOWN\r\n}\r\n\r\npublic class ItemToy {\r\n    private String color;\r\n    private String material;\r\n}\r\n\r\npublic class ItemFood {\r\n    private String smell;\r\n    private String taste;\r\n}\r\n\r\npublic class ItemRepository extends CrudRepository&lt;Item, Integer&gt; {\r\n    // ...\r\n}\r\n```\r\n\r\nThe problem I have with this implementation is that the fields `toy` and `food` may be `null` or not regardless of the value of `type`: ideally I would like unknown items to not have any property, toy items to only have `toyProperties` and food items to only have `foodProperties`.\r\n\r\n\r\nIs there a more elegant way to model this relationship, either by changing the database structure and/or Java classes, using inheritance or composition? How would the repository class/es look like in that case?","title":"How to implement a &quot;one to one&quot; relationship with mutually exclusive alternatives in Spring Data JDBC","body":"<p>Given the following three tables describing an item that can be either a toy, a food or unknown:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE TABLE item (\n    id SERIAL PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    type VARCHAR(255) NOT NULL CHECK (type IN ('TOY', 'FOOD', 'UNKNOWN'))\n);\n\nCREATE TABLE item_toy (\n    item INTEGER NOT NULL REFERENCES item(id),\n    color VARCHAR(255) NOT NULL,\n    material VARCHAR(255) NOT NULL\n);\n\nCREATE TABLE item_food (\n    item INTEGER NOT NULL REFERENCES item(id),\n    smell VARCHAR(255) NOT NULL,\n    taste VARCHAR(255) NOT NULL\n);\n</code></pre>\n<p>Toy items would have only toy properties, food items only food properties and uknown items neither of them.</p>\n<p>We can model these tables in Java, using Spring Data JDBC, in the following way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Item {\n    private int id;\n    private String name;\n    private ItemType type;\n    private ItemToy toyProperties;\n    private ItemFood foodProperties;\n}\n\npublic enum ItemType {\n    TOY,\n    FOOD,\n    UNKNOWN\n}\n\npublic class ItemToy {\n    private String color;\n    private String material;\n}\n\npublic class ItemFood {\n    private String smell;\n    private String taste;\n}\n\npublic class ItemRepository extends CrudRepository&lt;Item, Integer&gt; {\n    // ...\n}\n</code></pre>\n<p>The problem I have with this implementation is that the fields <code>toy</code> and <code>food</code> may be <code>null</code> or not regardless of the value of <code>type</code>: ideally I would like unknown items to not have any property, toy items to only have <code>toyProperties</code> and food items to only have <code>foodProperties</code>.</p>\n<p>Is there a more elegant way to model this relationship, either by changing the database structure and/or Java classes, using inheritance or composition? How would the repository class/es look like in that case?</p>\n"},{"tags":["java","immutability"],"comments":[{"owner":{"account_id":10214190,"reputation":2729,"user_id":7540393,"accept_rate":73,"display_name":"Arthur Attout"},"score":0,"creation_date":1568554124,"post_id":57944528,"comment_id":102302868,"body_markdown":"_Does it mean it must be immutable ?_ : Yes. _How to check immutability or not of an object ?_ : Do you mean programmatically or by design ?","body":"<i>Does it mean it must be immutable ?</i> : Yes. <i>How to check immutability or not of an object ?</i> : Do you mean programmatically or by design ?"},{"owner":{"account_id":1136458,"reputation":10832,"user_id":1652954,"accept_rate":58,"display_name":"Amrmsmb"},"score":0,"creation_date":1568554179,"post_id":57944528,"comment_id":102302881,"body_markdown":"@ArthurAttout programmtically..i modified the question#","body":"@ArthurAttout programmtically..i modified the question#"},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1683736250,"post_id":57944528,"comment_id":134413618,"body_markdown":"In general, there are two different pathways of detecting if an instance of an object is immutable; at compile time or at run time. At present, Java&#39;s design and platform doesn&#39;t really enable detection at compile time. I have created a very small Open Source library that will detect it at runtime. I describe the general solution as a StackOverflow Answer (which contains the link to Github where the code is published) located here: https://stackoverflow.com/a/75043881/501113","body":"In general, there are two different pathways of detecting if an instance of an object is immutable; at compile time or at run time. At present, Java&#39;s design and platform doesn&#39;t really enable detection at compile time. I have created a very small Open Source library that will detect it at runtime. I describe the general solution as a StackOverflow Answer (which contains the link to Github where the code is published) located here: <a href=\"https://stackoverflow.com/a/75043881/501113\">stackoverflow.com/a/75043881/501113</a>"}],"answers":[{"comments":[{"owner":{"account_id":1136458,"reputation":10832,"user_id":1652954,"accept_rate":58,"display_name":"Amrmsmb"},"score":0,"creation_date":1568554242,"post_id":57944576,"comment_id":102302893,"body_markdown":"can we check that programmatically..is there any where to do so","body":"can we check that programmatically..is there any where to do so"},{"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"score":1,"creation_date":1568554358,"post_id":57944576,"comment_id":102302919,"body_markdown":"@user2121 - I don&#39;t think so. I can&#39;t see why you would need to.","body":"@user2121 - I don&#39;t think so. I can&#39;t see why you would need to."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1568554381,"post_id":57944576,"comment_id":102302926,"body_markdown":"@user2121: there&#39;s no simple flag or anything like that, if that&#39;s what you&#39;re looking for. But one can check most of the things one would check manually programmatically, but it&#39;s not usually worth it (because most of the time you want to verify that a whole *type* is immutable and not just a specific instance which sometimes can&#39;t be done programmatically (for example a `List` field may or may not be immutable, depending on what it references).","body":"@user2121: there&#39;s no simple flag or anything like that, if that&#39;s what you&#39;re looking for. But one can check most of the things one would check manually programmatically, but it&#39;s not usually worth it (because most of the time you want to verify that a whole <i>type</i> is immutable and not just a specific instance which sometimes can&#39;t be done programmatically (for example a <code>List</code> field may or may not be immutable, depending on what it references)."}],"tags":[],"owner":{"account_id":52616,"reputation":1043001,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1568554554,"creation_date":1568554174,"answer_id":57944576,"question_id":57944528,"body_markdown":"&gt; does it mean, it must be immutable?\r\n\r\nYes, &quot;not changeable&quot; and &quot;immutable&quot; are synonyms.\r\n\r\n&gt; how to check immutability or not of an object\r\n\r\n*(see below for updated answer for updated question)*\r\n\r\nBy looking at its documentation and API of the object&#39;s class. If it doesn&#39;t provide any mutation operations (setters, etc.), then the object is immutable. The class would also need to be `final` or have no `protected` fields, since otherwise you could subclass it and modify the protected fields.\r\n\r\n[`Long`][1] is immutable, for instance (unless you use reflection to break into a specific implementation). If you look through its method list, it doesn&#39;t provide any mutator operations, and it&#39;s a `final` class.\r\n\r\n----\r\n\r\nAfter this answer was posted, you modified the question to:\r\n\r\n&gt; how to check immutability or not of an object programmatically\r\n\r\nI don&#39;t think you can. There&#39;s nothing in reflection that tells you whether a method is a mutator or not, and it would be extremely unreliable to make assumptions based on method names. Of course, if the object&#39;s class is `final` and offers **no** instance methods at all, that probably means it&#39;s immutable. But lots of immutable classes have instance methods (including `Long`).\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Long.html","title":"how to check immutability and mutability of an object","body":"<blockquote>\n  <p>does it mean, it must be immutable?</p>\n</blockquote>\n\n<p>Yes, \"not changeable\" and \"immutable\" are synonyms.</p>\n\n<blockquote>\n  <p>how to check immutability or not of an object</p>\n</blockquote>\n\n<p><em>(see below for updated answer for updated question)</em></p>\n\n<p>By looking at its documentation and API of the object's class. If it doesn't provide any mutation operations (setters, etc.), then the object is immutable. The class would also need to be <code>final</code> or have no <code>protected</code> fields, since otherwise you could subclass it and modify the protected fields.</p>\n\n<p><a href=\"https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/lang/Long.html\" rel=\"nofollow noreferrer\"><code>Long</code></a> is immutable, for instance (unless you use reflection to break into a specific implementation). If you look through its method list, it doesn't provide any mutator operations, and it's a <code>final</code> class.</p>\n\n<hr>\n\n<p>After this answer was posted, you modified the question to:</p>\n\n<blockquote>\n  <p>how to check immutability or not of an object programmatically</p>\n</blockquote>\n\n<p>I don't think you can. There's nothing in reflection that tells you whether a method is a mutator or not, and it would be extremely unreliable to make assumptions based on method names. Of course, if the object's class is <code>final</code> and offers <strong>no</strong> instance methods at all, that probably means it's immutable. But lots of immutable classes have instance methods (including <code>Long</code>).</p>\n"},{"tags":[],"owner":{"display_name":"user10762593"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568562135,"creation_date":1568554817,"answer_id":57944655,"question_id":57944528,"body_markdown":"The issue is not whether &#39;Long&#39; is immutable; the issue is whether the the id of a &#39;Product&#39; is immutable.\r\n\r\nYou provide immutability of the id by making the id field private, by not implementing any method that will change the id, and by not writing any code in the Product class that changes the id.\r\n\r\nWhy isn&#39;t the immutability of Long relevant?  Consider this example that fails to meet your requirement that the id should not be changeable:\r\n\r\n    class Product {\r\n        private Long id;\r\n        Product() { id = 42; }\r\n        Long getId() { return id; }\r\n        void setId(Long newId) { id = newId; }\r\n           :\r\n    }\r\n\r\n\r\nAll of those Longs are themselves immutable, but the product id changes nevertheless: because ```setId``` assigns a *different* immutable Long value to the id member.\r\n\r\nHowever, if you just delete that ```setId``` method (and don&#39;t write anything similar in the Product class) then the product id is now not changeable.","title":"how to check immutability and mutability of an object","body":"<p>The issue is not whether 'Long' is immutable; the issue is whether the the id of a 'Product' is immutable.</p>\n\n<p>You provide immutability of the id by making the id field private, by not implementing any method that will change the id, and by not writing any code in the Product class that changes the id.</p>\n\n<p>Why isn't the immutability of Long relevant?  Consider this example that fails to meet your requirement that the id should not be changeable:</p>\n\n<pre><code>class Product {\n    private Long id;\n    Product() { id = 42; }\n    Long getId() { return id; }\n    void setId(Long newId) { id = newId; }\n       :\n}\n</code></pre>\n\n<p>All of those Longs are themselves immutable, but the product id changes nevertheless: because <code>setId</code> assigns a <em>different</em> immutable Long value to the id member.</p>\n\n<p>However, if you just delete that <code>setId</code> method (and don't write anything similar in the Product class) then the product id is now not changeable.</p>\n"},{"comments":[{"owner":{"display_name":"user10762593"},"score":3,"creation_date":1568562358,"post_id":57944849,"comment_id":102304814,"body_markdown":"Why even have a setter if it can&#39;t be used?","body":"Why even have a setter if it can&#39;t be used?"}],"tags":[],"owner":{"account_id":8154208,"reputation":4189,"user_id":6140314,"display_name":"Mohamed Anees A"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568556285,"creation_date":1568556285,"answer_id":57944849,"question_id":57944528,"body_markdown":"&gt; how to check immutability or not of an object programmatically?\r\n\r\nWe can&#39;t. Moreover I don&#39;t feel this *must* be done programmatically. Read further,\r\n\r\nLet&#39;s have an imaginary `Exception` class as below,\r\n\r\n    public class MutationOfImmutableException extends Exception {\r\n    \r\n      /**\r\n       * \r\n       */\r\n      private static final long serialVersionUID = 1L;\r\n\r\n      public MutationOfImmutableException(String string) {\r\n        super(string);\r\n      } \r\n    \r\n    }\r\n\r\nAnd our class (I can&#39;t think of a great name, but I guess this conveys the idea) have\r\n\r\n    public void setName(String name) throws MutationOfImmutableException {\r\n        throw new MutationOfImmutableException(&quot;Cannot mutate this immutable instance&quot;);\r\n    }\r\n\r\nAnd, in our main class, whenever someone calls `setName()` by mistake, the compiler warns us to handle the Exception properly.\r\n\r\n    p.setName(&quot;Anees&quot;); // Cannot do this until handled!\r\n\r\nIn short, if you have access to the class `Product` which is immutable, you can throw a **Checked Exception** from `setId()`, to avoid everything going haywire!\r\n\r\nBetter still, make your `setters` private so that you cannot even encounter this scenario.\r\n\r\n\r\n\r\n\r\n","title":"how to check immutability and mutability of an object","body":"<blockquote>\n  <p>how to check immutability or not of an object programmatically?</p>\n</blockquote>\n\n<p>We can't. Moreover I don't feel this <em>must</em> be done programmatically. Read further,</p>\n\n<p>Let's have an imaginary <code>Exception</code> class as below,</p>\n\n<pre><code>public class MutationOfImmutableException extends Exception {\n\n  /**\n   * \n   */\n  private static final long serialVersionUID = 1L;\n\n  public MutationOfImmutableException(String string) {\n    super(string);\n  } \n\n}\n</code></pre>\n\n<p>And our class (I can't think of a great name, but I guess this conveys the idea) have</p>\n\n<pre><code>public void setName(String name) throws MutationOfImmutableException {\n    throw new MutationOfImmutableException(\"Cannot mutate this immutable instance\");\n}\n</code></pre>\n\n<p>And, in our main class, whenever someone calls <code>setName()</code> by mistake, the compiler warns us to handle the Exception properly.</p>\n\n<pre><code>p.setName(\"Anees\"); // Cannot do this until handled!\n</code></pre>\n\n<p>In short, if you have access to the class <code>Product</code> which is immutable, you can throw a <strong>Checked Exception</strong> from <code>setId()</code>, to avoid everything going haywire!</p>\n\n<p>Better still, make your <code>setters</code> private so that you cannot even encounter this scenario.</p>\n"},{"comments":[{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1683736300,"post_id":76209829,"comment_id":134413630,"body_markdown":"That&#39;s a very nice solution. It is very close to the one I describe in my StackOverflow answer here: https://stackoverflow.com/a/75043881/501113","body":"That&#39;s a very nice solution. It is very close to the one I describe in my StackOverflow answer here: <a href=\"https://stackoverflow.com/a/75043881/501113\">stackoverflow.com/a/75043881/501113</a>"},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":0,"creation_date":1683736829,"post_id":76209829,"comment_id":134413762,"body_markdown":"I&#39;ve just added your answer into my answer. I did so as the needs in this area can be quite varied. And it is very likely your solution is superior to mine for at least some subset of this whole domain. Perhaps even all. If we provide enough Open Source options, it can only help the overall Java community. Tysvm, again for creating your solution.","body":"I&#39;ve just added your answer into my answer. I did so as the needs in this area can be quite varied. And it is very likely your solution is superior to mine for at least some subset of this whole domain. Perhaps even all. If we provide enough Open Source options, it can only help the overall Java community. Tysvm, again for creating your solution."},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":1,"creation_date":1683745046,"post_id":76209829,"comment_id":134415494,"body_markdown":"@chaotic3quilibrium I looked at your code and I must admit I do not understand how it works. Would you like to exchange e-mails and talk about it? (Either via e-mail or perhaps even over video.) On my stack overflow profile there are instructions for finding my e-mail address .","body":"@chaotic3quilibrium I looked at your code and I must admit I do not understand how it works. Would you like to exchange e-mails and talk about it? (Either via e-mail or perhaps even over video.) On my stack overflow profile there are instructions for finding my e-mail address ."},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":1,"creation_date":1683798001,"post_id":76209829,"comment_id":134422880,"body_markdown":"@chaotic3quilibrium actually I will read this https://stackoverflow.com/a/75043881/773113 and hopefully I will understand. But my invitation still stands to talk about it at some point in the future, since we both have this common interest.","body":"@chaotic3quilibrium actually I will read this <a href=\"https://stackoverflow.com/a/75043881/773113\">stackoverflow.com/a/75043881/773113</a> and hopefully I will understand. But my invitation still stands to talk about it at some point in the future, since we both have this common interest."},{"owner":{"account_id":234754,"reputation":5730,"user_id":501113,"accept_rate":90,"display_name":"chaotic3quilibrium"},"score":1,"creation_date":1683820773,"post_id":76209829,"comment_id":134428537,"body_markdown":"I&#39;d love to video chat. I will hit you up on your email.","body":"I&#39;d love to video chat. I will hit you up on your email."}],"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683638391,"creation_date":1683638391,"answer_id":76209829,"question_id":57944528,"body_markdown":"Yes you can determine whether an object is immutable. However, it is very complicated business, so a solution would not fit within an answer here on Stack Overflow.\r\n\r\nThere are two approaches to determine whether a class is immutable:\r\n\r\n- Via static analysis\r\n- Via runtime checking\r\n\r\nAn existing static analysis tool is ***MutabilityDetector*** at https://github.com/MutabilityDetector. \r\n\r\nAn existing runtime checking tool is ***Bathyscaphe*** at https://github.com/mikenakis/Bathyscaphe (I am the author.)\r\n\r\nIn my opinion, static analysis can be useful at certain times and under certain scenarios, but it does not provide a complete solution to the problem at all times. A complete solution requires runtime checking as I explain on my blog here: https://blog.michael.gr/2022/05/bathyscaphe.html, and that&#39;s why I have written Bathyscaphe.\r\n","title":"how to check immutability and mutability of an object","body":"<p>Yes you can determine whether an object is immutable. However, it is very complicated business, so a solution would not fit within an answer here on Stack Overflow.</p>\n<p>There are two approaches to determine whether a class is immutable:</p>\n<ul>\n<li>Via static analysis</li>\n<li>Via runtime checking</li>\n</ul>\n<p>An existing static analysis tool is <em><strong>MutabilityDetector</strong></em> at <a href=\"https://github.com/MutabilityDetector\" rel=\"nofollow noreferrer\">https://github.com/MutabilityDetector</a>.</p>\n<p>An existing runtime checking tool is <em><strong>Bathyscaphe</strong></em> at <a href=\"https://github.com/mikenakis/Bathyscaphe\" rel=\"nofollow noreferrer\">https://github.com/mikenakis/Bathyscaphe</a> (I am the author.)</p>\n<p>In my opinion, static analysis can be useful at certain times and under certain scenarios, but it does not provide a complete solution to the problem at all times. A complete solution requires runtime checking as I explain on my blog here: <a href=\"https://blog.michael.gr/2022/05/bathyscaphe.html\" rel=\"nofollow noreferrer\">https://blog.michael.gr/2022/05/bathyscaphe.html</a>, and that's why I have written Bathyscaphe.</p>\n"}],"owner":{"account_id":1136458,"reputation":10832,"user_id":1652954,"accept_rate":58,"display_name":"Amrmsmb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":57944576,"answer_count":4,"score":3,"last_activity_date":1683638391,"creation_date":1568553853,"question_id":57944528,"body_markdown":"It is stated in the specifications and the requiremnets of the project, that \r\n\r\n&gt; Id of Product should not be changeable..it is of type `Long`\r\n\t\t \r\nDoes it mean, it must be immutable? If yes, how to check for immutability of an object programmatically?\r\n","title":"how to check immutability and mutability of an object","body":"<p>It is stated in the specifications and the requiremnets of the project, that </p>\n\n<blockquote>\n  <p>Id of Product should not be changeable..it is of type <code>Long</code></p>\n</blockquote>\n\n<p>Does it mean, it must be immutable? If yes, how to check for immutability of an object programmatically?</p>\n"},{"tags":["eclipse","java"],"answers":[{"comments":[{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":2,"creation_date":1364315980,"post_id":15641944,"comment_id":22194839,"body_markdown":"I doubt this is a good solution, especially when he mixes JARs from different Java versions.","body":"I doubt this is a good solution, especially when he mixes JARs from different Java versions."},{"owner":{"account_id":5573460,"reputation":2100,"user_id":4417818,"accept_rate":64,"display_name":"Nilesh"},"score":0,"creation_date":1486734588,"post_id":15641944,"comment_id":71486924,"body_markdown":"I think you should empasize the word ``JDK``, I had JRE already there so confused a little.","body":"I think you should empasize the word <code>JDK</code>, I had JRE already there so confused a little."},{"owner":{"account_id":108205,"reputation":27809,"user_id":287316,"accept_rate":87,"display_name":"The Student"},"score":2,"creation_date":1501858495,"post_id":15641944,"comment_id":77980907,"body_markdown":"It only worked for me after selecting &quot;run as&quot;-&gt;&quot;Ant Build...&quot;-&gt;&quot;JRE&quot;-&gt;&quot;Run in the same JRE as the workspace&quot;. I also added the tools.jar, as in the answers, but I had to do this one more step.","body":"It only worked for me after selecting &quot;run as&quot;-&gt;&quot;Ant Build...&quot;-&gt;&quot;JRE&quot;-&gt;&quot;Run in the same JRE as the workspace&quot;. I also added the tools.jar, as in the answers, but I had to do this one more step."},{"owner":{"account_id":13207957,"reputation":384,"user_id":9539089,"display_name":"ajay tomar"},"score":1,"creation_date":1529908013,"post_id":15641944,"comment_id":89027287,"body_markdown":"I&#39;m using maven for projects, I don&#39;t think so we need to add the external jar, although that will work but not the good idea, only issue is eclipse is not pointing to JDK currently, it is pointing to JRE, just change JRE to JDK, and that&#39;s it, that will start working.","body":"I&#39;m using maven for projects, I don&#39;t think so we need to add the external jar, although that will work but not the good idea, only issue is eclipse is not pointing to JDK currently, it is pointing to JRE, just change JRE to JDK, and that&#39;s it, that will start working."}],"tags":[],"owner":{"account_id":1196026,"reputation":11248,"user_id":1167744,"accept_rate":79,"display_name":"Parth Soni"},"comment_count":4,"down_vote_count":2,"up_vote_count":19,"is_accepted":true,"score":17,"last_activity_date":1474610581,"creation_date":1364314259,"answer_id":15641944,"question_id":15641849,"body_markdown":"Right click on your eclipse project, In `Preferences` go to `Java &gt; Installed JREs, select your JDK` and click on `Edit`. In the new Dialog you can **add external jars** like `tools.jar` to your execution environment.","title":"Tools jar does not exist Eclipse JAVA","body":"<p>Right click on your eclipse project, In <code>Preferences</code> go to <code>Java &gt; Installed JREs, select your JDK</code> and click on <code>Edit</code>. In the new Dialog you can <strong>add external jars</strong> like <code>tools.jar</code> to your execution environment.</p>\n"},{"comments":[{"owner":{"account_id":1514789,"reputation":5960,"user_id":1416058,"accept_rate":91,"display_name":"bouncingHippo"},"score":0,"creation_date":1364314641,"post_id":15641953,"comment_id":22193915,"body_markdown":"does it matter that i am using `jre6`? also when i call `echo %JAVA_HOME$` i get `C:\\Java\\jdk1.6.0_34`","body":"does it matter that i am using <code>jre6</code>? also when i call <code>echo %JAVA_HOME$</code> i get <code>C:\\Java\\jdk1.6.0_34</code>"},{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1364315917,"post_id":15641953,"comment_id":22194798,"body_markdown":"Who says &quot;The archive: C:/Java/jdk1.6.0_26-32/lib/tools.jar which is referenced by the classpath, does not exist.&quot;? Eclipse? Tomcat? Do you see it in a log file or the command line?","body":"Who says &quot;The archive: C:/Java/jdk1.6.0_26-32/lib/tools.jar which is referenced by the classpath, does not exist.&quot;? Eclipse? Tomcat? Do you see it in a log file or the command line?"},{"owner":{"account_id":3928630,"reputation":421,"user_id":3248078,"display_name":"deepika"},"score":0,"creation_date":1435038416,"post_id":15641953,"comment_id":50018585,"body_markdown":"Changing the jre path to jdk fixed this issue. Even referencing as external jar doesn&#39;t solve the problem. Thanks!","body":"Changing the jre path to jdk fixed this issue. Even referencing as external jar doesn&#39;t solve the problem. Thanks!"}],"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364314280,"creation_date":1364314280,"answer_id":15641953,"question_id":15641849,"body_markdown":"Tomcat needs a full JDK/SDK to run but under `C:/Java/jdk1.6.0_26-32/`, you only have a JRE installed.\r\n\r\nCleaning and deploying is done by Eclipse, no Tomcat code is involved so this works.\r\n\r\nYou need to configure your environment so that Tomcat uses `C:\\Java\\jdk1.6.0_34` as Java VM. Check the values of `JAVA_HOME` and the content of `setenv.bat`","title":"Tools jar does not exist Eclipse JAVA","body":"<p>Tomcat needs a full JDK/SDK to run but under <code>C:/Java/jdk1.6.0_26-32/</code>, you only have a JRE installed.</p>\n\n<p>Cleaning and deploying is done by Eclipse, no Tomcat code is involved so this works.</p>\n\n<p>You need to configure your environment so that Tomcat uses <code>C:\\Java\\jdk1.6.0_34</code> as Java VM. Check the values of <code>JAVA_HOME</code> and the content of <code>setenv.bat</code></p>\n"},{"tags":[],"owner":{"account_id":3126091,"reputation":11,"user_id":2644916,"display_name":"Jai"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1400145049,"creation_date":1400145049,"answer_id":23673868,"question_id":15641849,"body_markdown":"Right click on project-&gt;Properties-&gt;Compiler-&gt;Configure workspace settings-&gt;go to configure-&gt;installed jre-&gt;give jdk path","title":"Tools jar does not exist Eclipse JAVA","body":"<p>Right click on project->Properties->Compiler->Configure workspace settings->go to configure->installed jre->give jdk path</p>\n"},{"tags":[],"owner":{"account_id":4632724,"reputation":570,"user_id":3754754,"accept_rate":43,"display_name":"Manpreet"},"comment_count":0,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1416292822,"creation_date":1416292822,"answer_id":26988147,"question_id":15641849,"body_markdown":"I found the solution to resolve this.\r\n\r\n Go to Run Configurations &gt; classpath and under User Enteries you will have tools.jar and its path would be pointing to the old folder. Remove that and click on &quot;Add External Jars&quot; to add the tools.jar from the new path. And that is it.","title":"Tools jar does not exist Eclipse JAVA","body":"<p>I found the solution to resolve this.</p>\n\n<p>Go to Run Configurations > classpath and under User Enteries you will have tools.jar and its path would be pointing to the old folder. Remove that and click on \"Add External Jars\" to add the tools.jar from the new path. And that is it.</p>\n"},{"tags":[],"owner":{"account_id":75221,"reputation":5709,"user_id":215838,"accept_rate":67,"display_name":"Hartmut Pfarr"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1455718159,"creation_date":1420424385,"answer_id":27772608,"question_id":15641849,"body_markdown":"Check your &quot;run configurations&quot; (Eclipse Menu Run -&gt; Run Configurations ....) also, since therein the classpath may be wrong or has gotten obsolete.","title":"Tools jar does not exist Eclipse JAVA","body":"<p>Check your \"run configurations\" (Eclipse Menu Run -> Run Configurations ....) also, since therein the classpath may be wrong or has gotten obsolete.</p>\n"},{"tags":[],"owner":{"account_id":5009268,"reputation":353,"user_id":4025989,"display_name":"Gloria Rampur"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1462875210,"creation_date":1455292295,"answer_id":35366777,"question_id":15641849,"body_markdown":"This worked for me on Eclipse:\r\n\r\n    Windows -&gt; Preferences -&gt; Select Java -&gt; Select Installed JREs -&gt; Add \r\n    -&gt; Add your JDK -&gt; Establish it as default -&gt; Apply -&gt; OK.\r\n\r\nAfter this, I&#39;ve to establish project related settings too:\r\n\r\n    Right click on your Project Name (in Project explorer ) -&gt; Properties -&gt;\r\n    Java Build Path -&gt; Click on JRE System Libraries -&gt; Edit -&gt; \r\n    Select Workspace Default JRE (jdk included above)","title":"Tools jar does not exist Eclipse JAVA","body":"<p>This worked for me on Eclipse:</p>\n\n<pre><code>Windows -&gt; Preferences -&gt; Select Java -&gt; Select Installed JREs -&gt; Add \n-&gt; Add your JDK -&gt; Establish it as default -&gt; Apply -&gt; OK.\n</code></pre>\n\n<p>After this, I've to establish project related settings too:</p>\n\n<pre><code>Right click on your Project Name (in Project explorer ) -&gt; Properties -&gt;\nJava Build Path -&gt; Click on JRE System Libraries -&gt; Edit -&gt; \nSelect Workspace Default JRE (jdk included above)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4436640,"reputation":1160,"user_id":3612321,"accept_rate":75,"display_name":"rrhrg"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468415432,"creation_date":1468415432,"answer_id":38352720,"question_id":15641849,"body_markdown":"I had the same problem (I can reproduce it) and my solution sounds like the integration in Eclipse is really screwed up but I actually fixed it by starting Eclipse with the same JDK version.\r\n\r\nAdd/edit the following in your *eclipse.ini* (which is in the Eclipse directory):\r\n\r\n    -vm\r\n    path/to/jdk/bin\r\n\r\nWhere *path/to/jdk/bin* is the path to the JDK bin directory of the version you are using for ant/tomcat.\r\n\r\nNote that tools.jar is NOT included in a JRE distribution.","title":"Tools jar does not exist Eclipse JAVA","body":"<p>I had the same problem (I can reproduce it) and my solution sounds like the integration in Eclipse is really screwed up but I actually fixed it by starting Eclipse with the same JDK version.</p>\n\n<p>Add/edit the following in your <em>eclipse.ini</em> (which is in the Eclipse directory):</p>\n\n<pre><code>-vm\npath/to/jdk/bin\n</code></pre>\n\n<p>Where <em>path/to/jdk/bin</em> is the path to the JDK bin directory of the version you are using for ant/tomcat.</p>\n\n<p>Note that tools.jar is NOT included in a JRE distribution.</p>\n"},{"comments":[{"owner":{"account_id":5346898,"reputation":848,"user_id":4262207,"accept_rate":100,"display_name":"lolololol ol"},"score":0,"creation_date":1530333072,"post_id":39810871,"comment_id":89210361,"body_markdown":"What do you mean `to the same thing that you updated in the first stage`?","body":"What do you mean <code>to the same thing that you updated in the first stage</code>?"},{"owner":{"account_id":2935084,"reputation":4223,"user_id":2514228,"accept_rate":67,"display_name":"Micah Smith"},"score":0,"creation_date":1530568446,"post_id":39810871,"comment_id":89272576,"body_markdown":"the installed JRE as specified in Parth&#39;s answer. I have updated my own answer to be more clear on this.","body":"the installed JRE as specified in Parth&#39;s answer. I have updated my own answer to be more clear on this."}],"tags":[],"owner":{"account_id":2935084,"reputation":4223,"user_id":2514228,"accept_rate":67,"display_name":"Micah Smith"},"comment_count":2,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1530568368,"creation_date":1475351631,"answer_id":39810871,"question_id":15641849,"body_markdown":"I found this question trying to build my project using Ant in Eclipse, and I would get the same error message as above. The suggestions in @Parth&#39;s and other answers to edit the Installed JREs is the first step. What I also needed to run Ant successfully was\r\n\r\n 1. Right click on build.xml, select &quot;Run As&quot;, select &quot;Ant Build...&quot; (note the ...)\r\n 2. Click on the JRE tab\r\n 3. Change the Runtime JRE to the same thing that you updated in the first stage, and press Apply. (That is, the runtime JRE as you specified by &quot;Preferences&quot; -&gt; &quot;Java&quot; -&gt; &quot;Installed JREs&quot;, as in @Parth&#39;s answer.)\r\n\r\nOtherwise it seems that Ant will still try to build with the old JRE that doesn&#39;t have `tools.jar`. Hope this helps someone.","title":"Tools jar does not exist Eclipse JAVA","body":"<p>I found this question trying to build my project using Ant in Eclipse, and I would get the same error message as above. The suggestions in @Parth's and other answers to edit the Installed JREs is the first step. What I also needed to run Ant successfully was</p>\n\n<ol>\n<li>Right click on build.xml, select \"Run As\", select \"Ant Build...\" (note the ...)</li>\n<li>Click on the JRE tab</li>\n<li>Change the Runtime JRE to the same thing that you updated in the first stage, and press Apply. (That is, the runtime JRE as you specified by \"Preferences\" -> \"Java\" -> \"Installed JREs\", as in @Parth's answer.)</li>\n</ol>\n\n<p>Otherwise it seems that Ant will still try to build with the old JRE that doesn't have <code>tools.jar</code>. Hope this helps someone.</p>\n"},{"tags":[],"owner":{"account_id":8733464,"reputation":43,"user_id":6532790,"display_name":"Maalini"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477646057,"creation_date":1477646057,"answer_id":40301826,"question_id":15641849,"body_markdown":"In my case with using ANT build I had to change the setting\r\nAdd tools.jar in the below location.\r\n Windows --&gt; Preferences --&gt; Ant --&gt; Runtime --&gt; Global Entries. ","title":"Tools jar does not exist Eclipse JAVA","body":"<p>In my case with using ANT build I had to change the setting\nAdd tools.jar in the below location.\n Windows --> Preferences --> Ant --> Runtime --> Global Entries. </p>\n"},{"tags":[],"owner":{"account_id":2003177,"reputation":16895,"user_id":1793718,"accept_rate":69,"display_name":"Lucky"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488191900,"creation_date":1488191548,"answer_id":42483436,"question_id":15641849,"body_markdown":"If you are running Ant build file and getting this error in eclipse, then your eclipse is configured to use two differently named JRE&#39;s. i.e. One from the jre folder and another jre from inside the jdk&#39;s folder. Adding `tools.jar` may be a workaround but I used the JRE inside the JDK&#39;s folder(`C:\\Program Files\\Java\\jdk1.8.0_121`). Inorder to change this, \r\n\r\n 1. Check in Installed JRE section which JRE is cheked(I had `jdk1.8.0_121` checked and `jre1.8.0_121` left unchecked).\r\n\r\n 2. Update your eclipse classpath by navigating to `Window &gt; Preferences &gt; Java &gt; Installed JRE &gt; Execution Environments`. \r\n\r\n 2. Now select the `JavaSE-1.x` on the left side and select the compatible JRE[perfect match]. Select the same JRE(`jdk1.8.0_121`) you had it checked above and click Ok. Optionally you can delete the JRE(jre1.8.0_121) which is unused to avoid confusion if it is not used in any other projects.\r\n\r\nNow your project will build and you can run the Ant build files. Check the image below.\r\n\r\n[![Eclipse Installed JRE configuration][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aIfPp.png","title":"Tools jar does not exist Eclipse JAVA","body":"<p>If you are running Ant build file and getting this error in eclipse, then your eclipse is configured to use two differently named JRE's. i.e. One from the jre folder and another jre from inside the jdk's folder. Adding <code>tools.jar</code> may be a workaround but I used the JRE inside the JDK's folder(<code>C:\\Program Files\\Java\\jdk1.8.0_121</code>). Inorder to change this, </p>\n\n<ol>\n<li><p>Check in Installed JRE section which JRE is cheked(I had <code>jdk1.8.0_121</code> checked and <code>jre1.8.0_121</code> left unchecked).</p></li>\n<li><p>Update your eclipse classpath by navigating to <code>Window &gt; Preferences &gt; Java &gt; Installed JRE &gt; Execution Environments</code>. </p></li>\n<li><p>Now select the <code>JavaSE-1.x</code> on the left side and select the compatible JRE[perfect match]. Select the same JRE(<code>jdk1.8.0_121</code>) you had it checked above and click Ok. Optionally you can delete the JRE(jre1.8.0_121) which is unused to avoid confusion if it is not used in any other projects.</p></li>\n</ol>\n\n<p>Now your project will build and you can run the Ant build files. Check the image below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aIfPp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aIfPp.png\" alt=\"Eclipse Installed JRE configuration\"></a></p>\n"},{"tags":[],"owner":{"account_id":2971110,"reputation":14744,"user_id":2523147,"accept_rate":38,"display_name":"prime"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1502448367,"creation_date":1502448367,"answer_id":45633337,"question_id":15641849,"body_markdown":"Try to add the tools.jar as an external JAR. \r\n\r\nFor eclipse,\r\n\r\n 1. Right click the project name and select Properties\r\n 2. Go to Java &quot;Build Path&quot;\r\n 3. Select tab &quot;Libraries&quot;\r\n 4. Click &quot;Add External JARs&quot;\r\n 5. Select the relevant .jar file from the file selection\r\n","title":"Tools jar does not exist Eclipse JAVA","body":"<p>Try to add the tools.jar as an external JAR. </p>\n\n<p>For eclipse,</p>\n\n<ol>\n<li>Right click the project name and select Properties</li>\n<li>Go to Java \"Build Path\"</li>\n<li>Select tab \"Libraries\"</li>\n<li>Click \"Add External JARs\"</li>\n<li>Select the relevant .jar file from the file selection</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1049262,"reputation":5113,"user_id":1053562,"display_name":"mikiqex"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1504335001,"creation_date":1504335001,"answer_id":46011266,"question_id":15641849,"body_markdown":"In my case the Tomcat server in Eclipse has been created under older JDK (just a few builds). My solution was to remove the sever and add it again (now using current JDK).","title":"Tools jar does not exist Eclipse JAVA","body":"<p>In my case the Tomcat server in Eclipse has been created under older JDK (just a few builds). My solution was to remove the sever and add it again (now using current JDK).</p>\n"},{"tags":[],"owner":{"account_id":1254376,"reputation":31,"user_id":1214171,"display_name":"Sasha Raskind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608591341,"creation_date":1608591341,"answer_id":65401074,"question_id":15641849,"body_markdown":"I am not sure it applies to all situations, but if you right click Ant script and there is an item &quot;External tools configuration&quot; under &quot;Run as&quot; menu, select it, and go to JRE tab. As far as I can say, it may be configured independently from your project and point to the JRE, not JDK, in which case there would be missing tools.jar","title":"Tools jar does not exist Eclipse JAVA","body":"<p>I am not sure it applies to all situations, but if you right click Ant script and there is an item &quot;External tools configuration&quot; under &quot;Run as&quot; menu, select it, and go to JRE tab. As far as I can say, it may be configured independently from your project and point to the JRE, not JDK, in which case there would be missing tools.jar</p>\n"},{"tags":[],"owner":{"account_id":21236034,"reputation":1,"user_id":15620209,"display_name":"Sel&#231;uk YAPICI"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618301223,"creation_date":1618301223,"answer_id":67070977,"question_id":15641849,"body_markdown":"I remove server (Tomcat 6.0) from window -&gt; preferences -&gt; server -&gt; Runtime environment. \r\nAnd add again. Then, I add my project to server again. The problem is destroyed. ","title":"Tools jar does not exist Eclipse JAVA","body":"<p>I remove server (Tomcat 6.0) from window -&gt; preferences -&gt; server -&gt; Runtime environment.\nAnd add again. Then, I add my project to server again. The problem is destroyed.</p>\n"},{"tags":[],"owner":{"account_id":11361306,"reputation":1,"user_id":8329353,"display_name":"Nelson Oliver mathias"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628174910,"creation_date":1628151087,"answer_id":68662860,"question_id":15641849,"body_markdown":"If You are getting this error while running the ANT build then follow the below steps.\r\nIn the Eclipse go-to window-&gt; preferences-&gt; ANT-&gt; RUNTIME\r\nthen select classpath tab then select Global Entries and add `tools.jar` as an `external jar`.\r\n\r\nRun the ANT build.","title":"Tools jar does not exist Eclipse JAVA","body":"<p>If You are getting this error while running the ANT build then follow the below steps.\nIn the Eclipse go-to window-&gt; preferences-&gt; ANT-&gt; RUNTIME\nthen select classpath tab then select Global Entries and add <code>tools.jar</code> as an <code>external jar</code>.</p>\n<p>Run the ANT build.</p>\n"},{"tags":[],"owner":{"account_id":463980,"reputation":6172,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683638255,"creation_date":1683638255,"answer_id":76209804,"question_id":15641849,"body_markdown":"Right Click on Project-&gt;\r\nProperties-&gt;\r\nJava Build Path-&gt;\r\nLibraries-&gt;\r\nAdd Library-&gt;\r\nJRE System Library-&gt;\r\nChoose Alternate JRE-&gt;\r\nClick Installed JREs-&gt;\r\nClick Add-&gt;\r\nselect Jdk path from program files\r\nclick on jdk checkbox then Apply and close","title":"Tools jar does not exist Eclipse JAVA","body":"<p>Right Click on Project-&gt;\nProperties-&gt;\nJava Build Path-&gt;\nLibraries-&gt;\nAdd Library-&gt;\nJRE System Library-&gt;\nChoose Alternate JRE-&gt;\nClick Installed JREs-&gt;\nClick Add-&gt;\nselect Jdk path from program files\nclick on jdk checkbox then Apply and close</p>\n"}],"owner":{"account_id":1514789,"reputation":5960,"user_id":1416058,"accept_rate":91,"display_name":"bouncingHippo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73775,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":15641944,"answer_count":16,"score":33,"last_activity_date":1683638255,"creation_date":1364314068,"question_id":15641849,"body_markdown":"`The archive: C:/Java/jdk1.6.0_26-32/lib/tools.jar which is referenced by the classpath, does not exist.`\r\n\r\nThis is the error I have when run Tomcat. There was no problem cleaning or publishing - only when i start the Tomcat server.\r\n\r\nNow, I checked my folders and there is a `tools.jar` in file path `C:\\Java\\jdk1.6.0_34\\lib`\r\n\r\nWhat am i missing?\r\n\r\nusing jre6 and have jdk1.6.0_34 installed\r\n\r\n\r\n","title":"Tools jar does not exist Eclipse JAVA","body":"<p><code>The archive: C:/Java/jdk1.6.0_26-32/lib/tools.jar which is referenced by the classpath, does not exist.</code></p>\n\n<p>This is the error I have when run Tomcat. There was no problem cleaning or publishing - only when i start the Tomcat server.</p>\n\n<p>Now, I checked my folders and there is a <code>tools.jar</code> in file path <code>C:\\Java\\jdk1.6.0_34\\lib</code></p>\n\n<p>What am i missing?</p>\n\n<p>using jre6 and have jdk1.6.0_34 installed</p>\n"},{"tags":["java","logging","slf4j","lombok"],"answers":[{"comments":[{"owner":{"account_id":9735515,"reputation":1045,"user_id":7218881,"display_name":"Sankalpa Wijewickrama"},"score":0,"creation_date":1630156164,"post_id":68964629,"comment_id":121881908,"body_markdown":"Thanks @Turing85! is there any drawbacks of using Slf4j annotation ?","body":"Thanks @Turing85! is there any drawbacks of using Slf4j annotation ?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":3,"creation_date":1630156294,"post_id":68964629,"comment_id":121881944,"body_markdown":"Only the normal drawbacks that you get when using lombok: relying on an undocumented compiler-api that could change without prior notice and break lombok.","body":"Only the normal drawbacks that you get when using lombok: relying on an undocumented compiler-api that could change without prior notice and break lombok."},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":0,"creation_date":1669940387,"post_id":68964629,"comment_id":131763325,"body_markdown":"Great. So where do I put that annotation?","body":"Great. So where do I put that annotation?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1670032907,"post_id":68964629,"comment_id":131785331,"body_markdown":"@MiguelMunoz you haven&#39;t read the documentation I&#39;ve linked in my answer, have you?","body":"@MiguelMunoz you haven&#39;t read the documentation I&#39;ve linked in my answer, have you?"},{"owner":{"account_id":2309641,"reputation":4648,"user_id":2028066,"accept_rate":52,"display_name":"MiguelMunoz"},"score":1,"creation_date":1670071308,"post_id":68964629,"comment_id":131790264,"body_markdown":"I didn&#39;t read it carefully enough. Now I see it goes on the class.","body":"I didn&#39;t read it carefully enough. Now I see it goes on the class."}],"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"comment_count":5,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1630155921,"creation_date":1630155921,"answer_id":68964629,"question_id":68964611,"body_markdown":"From the [documentation of `@Log` and friends][LombobkSlf4jDoc]:\r\n&gt; ...\r\n&gt;\r\n&gt; `@Slf4j`\r\n&gt;\r\n&gt; Creates `private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(LogExample.class);`\r\n&gt;\r\n&gt; ...\r\n\r\nWe see that this is equivalent to \r\n\r\n    private static final Logger LOG = LogManager.getLogger(TestController.class);\r\n\r\naside from the name of the field.\r\n\r\n\r\n[LombobkSlf4jDoc]: https://projectlombok.org/features/log","title":"Using @Slf4j annotation for logging","body":"<p>From the <a href=\"https://projectlombok.org/features/log\" rel=\"noreferrer\">documentation of <code>@Log</code> and friends</a>:</p>\n<blockquote>\n<p>...</p>\n<p><code>@Slf4j</code></p>\n<p>Creates <code>private static final org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(LogExample.class);</code></p>\n<p>...</p>\n</blockquote>\n<p>We see that this is equivalent to</p>\n<pre><code>private static final Logger LOG = LogManager.getLogger(TestController.class);\n</code></pre>\n<p>aside from the name of the field.</p>\n"},{"tags":[],"owner":{"account_id":10382255,"reputation":94,"user_id":7656591,"display_name":"Ganeson Ravichandran"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1683638239,"creation_date":1630157528,"answer_id":68964851,"question_id":68964611,"body_markdown":"```\r\n@Slf4j\r\n```\r\n\r\n\r\nThe above annotation from lombok creates a slf4j based Logger, but you would be requiring a log4j based logger. So don&#39;t feel you could use slf4j based logger.\r\n\r\nIf you plan to user slf4j based logger, lombok modifies the code and creates code during the **compile** phase not during runtime like cglib or using reflections. This would mean there won&#39;t be any dip in the performance.","title":"Using @Slf4j annotation for logging","body":"<pre><code>@Slf4j\n</code></pre>\n<p>The above annotation from lombok creates a slf4j based Logger, but you would be requiring a log4j based logger. So don't feel you could use slf4j based logger.</p>\n<p>If you plan to user slf4j based logger, lombok modifies the code and creates code during the <strong>compile</strong> phase not during runtime like cglib or using reflections. This would mean there won't be any dip in the performance.</p>\n"}],"owner":{"account_id":9735515,"reputation":1045,"user_id":7218881,"display_name":"Sankalpa Wijewickrama"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30472,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":68964629,"answer_count":2,"score":14,"last_activity_date":1683638239,"creation_date":1630155719,"question_id":68964611,"body_markdown":"First of all I will give a brief explanation about the scenario. In my application I am using SLF4J as the logging facade. For logging, I am using Log4j2 and I have my customized `log4j2.xml` as well. \r\nWhen I log in my classes, I create a logger as mentioned below:\r\n\r\n    private static final Logger LOG = LogManager.getLogger(TestController.class);\r\n\r\nLater, I found out that there is a `@Slf4j` annotation and then I can log without creating a logger instance manually. \r\n\r\n    log.info(&quot;Info log in getHello() in TestController&quot;);\r\n\r\nI did a minor research about the topic where is there any drawbacks of using `@Slf4j` annotation, instead of creating a logger instance within the class. I did not come across any reason why shouldn&#39;t use `@Slf4j` annotation. \r\n\r\nHowever, before proceeding I wanted to ask from this community to confirm is there any drawback of using `@Slf4j`? \r\n","title":"Using @Slf4j annotation for logging","body":"<p>First of all I will give a brief explanation about the scenario. In my application I am using SLF4J as the logging facade. For logging, I am using Log4j2 and I have my customized <code>log4j2.xml</code> as well.\nWhen I log in my classes, I create a logger as mentioned below:</p>\n<pre><code>private static final Logger LOG = LogManager.getLogger(TestController.class);\n</code></pre>\n<p>Later, I found out that there is a <code>@Slf4j</code> annotation and then I can log without creating a logger instance manually.</p>\n<pre><code>log.info(&quot;Info log in getHello() in TestController&quot;);\n</code></pre>\n<p>I did a minor research about the topic where is there any drawbacks of using <code>@Slf4j</code> annotation, instead of creating a logger instance within the class. I did not come across any reason why shouldn't use <code>@Slf4j</code> annotation.</p>\n<p>However, before proceeding I wanted to ask from this community to confirm is there any drawback of using <code>@Slf4j</code>?</p>\n"},{"tags":["java","javafx","combobox"],"answers":[{"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1683637981,"creation_date":1683636786,"answer_id":76209564,"question_id":76209322,"body_markdown":"Your code looks like this, structurally:\r\n\r\n    public class GUIProjectEWIW7 extends Application {\r\n    \r\n    // ...\r\n    \r\n    @Override\r\n       \r\n    public void start(Stage primaryStage){\r\n    \r\n    // ...\r\n    \r\n    imageApplyBtn.setOnAction(event -&gt;{\r\n    String selectedImage = imageComboBox.getSelectionModel().getSelectedItem();\r\n       \r\n                \r\n    VBox vBox2 = new VBox(20);\r\n    vBox2.setAlignment(Pos.CENTER); //alignment\r\n    vBox2.getChildren().addAll(imageComboBox, imageApplyBtn, borderColor, applybutton);\r\n    vBox2.getChildren().add(hBox); //add the play button\r\n          \r\n    //combine the graphics (sPane2) with GUI(vBox2) into a FlowPane\r\n    FlowPane fPane = new FlowPane(20,20);\r\n    fPane.getChildren().addAll(sPane2, vBox2);\r\n          \r\n    Scene scene = new Scene (fPane, 300, 400);\r\n    primaryStage.setTitle(&quot;RWU Athletics&quot;);\r\n    primaryStage.setScene( scene ); //set the scene on top of the stage\r\n    primaryStage.show(); //visible\r\n       \r\n    }); \r\n    }//end of start()\r\n\r\n    }\r\n\r\nIt is strongly recommended that you format your code in a way that makes the scope of the statements clear. If you apply standard indentation, the problem becomes immediately obvious:\r\n\r\n    public class GUIProjectEWIW7 extends Application {\r\n    \r\n        // ...\r\n    \r\n        @Override\r\n           \r\n        public void start(Stage primaryStage){\r\n        \r\n            // ...\r\n            \r\n            imageApplyBtn.setOnAction(event -&gt;{\r\n            \r\n                String selectedImage = imageComboBox.getSelectionModel().getSelectedItem();\r\n                   \r\n                            \r\n                VBox vBox2 = new VBox(20);\r\n                vBox2.setAlignment(Pos.CENTER); //alignment\r\n                vBox2.getChildren().addAll(imageComboBox, imageApplyBtn, borderColor, applybutton);\r\n                vBox2.getChildren().add(hBox); //add the play button\r\n                      \r\n                //combine the graphics (sPane2) with GUI(vBox2) into a FlowPane\r\n                FlowPane fPane = new FlowPane(20,20);\r\n                fPane.getChildren().addAll(sPane2, vBox2);\r\n                      \r\n                Scene scene = new Scene (fPane, 300, 400);\r\n                primaryStage.setTitle(&quot;RWU Athletics&quot;);\r\n                primaryStage.setScene( scene ); //set the scene on top of the stage\r\n                primaryStage.show(); //visible\r\n            \r\n               \r\n            }); \r\n        \r\n        }//end of start()\r\n    \r\n    }\r\n\r\nThe call to `primaryStage.show()` is inside the event handler for `imageApplyBtn`. So the window will only be shown when the button is pressed (which is of course impossible, since the user can&#39;t press the button before the window is shown).\r\n\r\nIt&#39;s not entirely clear what code you want to execute in the event handler, but you need to move most of that code outside of the handler:\r\n\r\n\r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n\r\n            // ...\r\n\r\n            imageApplyBtn.setOnAction(event -&gt;{\r\n            \r\n                String selectedImage = imageComboBox.getSelectionModel().getSelectedItem();\r\n                   \r\n            }); \r\n                            \r\n            VBox vBox2 = new VBox(20);\r\n            vBox2.setAlignment(Pos.CENTER); //alignment\r\n            vBox2.getChildren().addAll(imageComboBox, imageApplyBtn, borderColor, applybutton);\r\n            vBox2.getChildren().add(hBox); //add the play button\r\n                  \r\n            //combine the graphics (sPane2) with GUI(vBox2) into a FlowPane\r\n            FlowPane fPane = new FlowPane(20,20);\r\n            fPane.getChildren().addAll(sPane2, vBox2);\r\n                  \r\n            Scene scene = new Scene (fPane, 300, 400);\r\n            primaryStage.setTitle(&quot;RWU Athletics&quot;);\r\n            primaryStage.setScene( scene ); //set the scene on top of the stage\r\n            primaryStage.show(); //visible\r\n        \r\n           \r\n        \r\n        }//end of start()","title":"JavaFX code will compile but nothing happens when it runs","body":"<p>Your code looks like this, structurally:</p>\n<pre><code>public class GUIProjectEWIW7 extends Application {\n\n// ...\n\n@Override\n   \npublic void start(Stage primaryStage){\n\n// ...\n\nimageApplyBtn.setOnAction(event -&gt;{\nString selectedImage = imageComboBox.getSelectionModel().getSelectedItem();\n   \n            \nVBox vBox2 = new VBox(20);\nvBox2.setAlignment(Pos.CENTER); //alignment\nvBox2.getChildren().addAll(imageComboBox, imageApplyBtn, borderColor, applybutton);\nvBox2.getChildren().add(hBox); //add the play button\n      \n//combine the graphics (sPane2) with GUI(vBox2) into a FlowPane\nFlowPane fPane = new FlowPane(20,20);\nfPane.getChildren().addAll(sPane2, vBox2);\n      \nScene scene = new Scene (fPane, 300, 400);\nprimaryStage.setTitle(&quot;RWU Athletics&quot;);\nprimaryStage.setScene( scene ); //set the scene on top of the stage\nprimaryStage.show(); //visible\n   \n}); \n}//end of start()\n\n}\n</code></pre>\n<p>It is strongly recommended that you format your code in a way that makes the scope of the statements clear. If you apply standard indentation, the problem becomes immediately obvious:</p>\n<pre><code>public class GUIProjectEWIW7 extends Application {\n\n    // ...\n\n    @Override\n       \n    public void start(Stage primaryStage){\n    \n        // ...\n        \n        imageApplyBtn.setOnAction(event -&gt;{\n        \n            String selectedImage = imageComboBox.getSelectionModel().getSelectedItem();\n               \n                        \n            VBox vBox2 = new VBox(20);\n            vBox2.setAlignment(Pos.CENTER); //alignment\n            vBox2.getChildren().addAll(imageComboBox, imageApplyBtn, borderColor, applybutton);\n            vBox2.getChildren().add(hBox); //add the play button\n                  \n            //combine the graphics (sPane2) with GUI(vBox2) into a FlowPane\n            FlowPane fPane = new FlowPane(20,20);\n            fPane.getChildren().addAll(sPane2, vBox2);\n                  \n            Scene scene = new Scene (fPane, 300, 400);\n            primaryStage.setTitle(&quot;RWU Athletics&quot;);\n            primaryStage.setScene( scene ); //set the scene on top of the stage\n            primaryStage.show(); //visible\n        \n           \n        }); \n    \n    }//end of start()\n\n}\n</code></pre>\n<p>The call to <code>primaryStage.show()</code> is inside the event handler for <code>imageApplyBtn</code>. So the window will only be shown when the button is pressed (which is of course impossible, since the user can't press the button before the window is shown).</p>\n<p>It's not entirely clear what code you want to execute in the event handler, but you need to move most of that code outside of the handler:</p>\n<pre><code>    @Override\n    public void start(Stage primaryStage) {\n\n        // ...\n\n        imageApplyBtn.setOnAction(event -&gt;{\n        \n            String selectedImage = imageComboBox.getSelectionModel().getSelectedItem();\n               \n        }); \n                        \n        VBox vBox2 = new VBox(20);\n        vBox2.setAlignment(Pos.CENTER); //alignment\n        vBox2.getChildren().addAll(imageComboBox, imageApplyBtn, borderColor, applybutton);\n        vBox2.getChildren().add(hBox); //add the play button\n              \n        //combine the graphics (sPane2) with GUI(vBox2) into a FlowPane\n        FlowPane fPane = new FlowPane(20,20);\n        fPane.getChildren().addAll(sPane2, vBox2);\n              \n        Scene scene = new Scene (fPane, 300, 400);\n        primaryStage.setTitle(&quot;RWU Athletics&quot;);\n        primaryStage.setScene( scene ); //set the scene on top of the stage\n        primaryStage.show(); //visible\n    \n       \n    \n    }//end of start()\n</code></pre>\n"}],"owner":{"account_id":28557564,"reputation":1,"user_id":21861571,"display_name":"Emily Williams"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683637981,"creation_date":1683635005,"question_id":76209322,"body_markdown":"I am working on a relatively simple JavaFX project, where the goal is to display a college logo, and text, and the background color and logo can be changed using combo boxes to select a specific sports team and color. The program was working before, but after adding the last &quot;apply&quot; button, the code will compile but nothing happens when it runs. There are no errors shown, and I can&#39;t seem to find anything within the code that would be causing this... maybe someone else might catch something?\r\n\r\nHere is the code:\r\n\r\n```\r\n  import javafx.application.Application;\r\n  import javafx.scene.Scene;\r\n  import javafx.scene.layout.StackPane;\r\n  import javafx.stage.Stage;\r\n  import javafx.scene.shape.Rectangle;\r\n  import javafx.scene.paint.Color;\r\n \r\n  import javafx.scene.layout.VBox;\r\n  import javafx.scene.shape.Circle;\r\n  import javafx.scene.text.Text;\r\n  import javafx.scene.text.Font;\r\n  import javafx.scene.text.FontWeight;\r\n  import javafx.geometry.Pos;\r\n  import javafx.scene.image.Image;\r\n  import javafx.scene.image.ImageView;\r\n \r\n  import javafx.scene.control.Button;\r\n  import javafx.scene.control.TextField;\r\n  import javafx.scene.control.ComboBox;\r\n  import javafx.scene.layout.FlowPane;\r\n \r\n  //for the media\r\n  import java.io.File;\r\n  import javafx.scene.layout.HBox;\r\n  import javafx.scene.media.Media;\r\n  import javafx.scene.media.MediaPlayer;\r\n  import javafx.event.ActionEvent;\r\n  import javafx.event.EventHandler; \r\n  import javafx.collections.FXCollections;\r\n  import javafx.geometry.Insets;\r\n  import java.io.File;\r\n\r\n  \r\n  public class GUIProjectEWIW7 extends Application {\r\n  public ImageView imageView;\r\n  private ComboBox&lt;String&gt; imageComboBox;\r\n  private Text displayText;\r\n   \r\n  @Override\r\n   \r\n  public void start(Stage primaryStage){\r\n   \r\n  //add media\r\n  File mediaFile = new File(&quot;cheer.mp3&quot;);\r\n  Media media = new Media(mediaFile.toURI().toString() );\r\n  MediaPlayer cheer = new MediaPlayer(media);\r\n   \r\n  //create play button\r\n  Button playButton = new Button(&quot;CHEER&quot;); \r\n   \r\n  //add listener of the playButton to play the music\r\n  playButton.setOnAction(e -&gt; {\r\n  //add the actual actions when the button is pressed\r\n  if(playButton.getText().equals(&quot;CHEER&quot;)){\r\n  cheer.play();\r\n  playButton.setText(&quot;STOP&quot;);\r\n  } \r\n  else{\r\n  cheer.pause();\r\n  playButton.setText(&quot;CHEER&quot;);\r\n  }\r\n  });\r\n   \r\n  HBox hBox = new HBox(10);\r\n  hBox.setAlignment(Pos.CENTER);\r\n  hBox.getChildren().add(playButton);\r\n   \r\n   \r\n  //DEFINE SHAPES &amp; COLORS\r\n  Rectangle r1 = new Rectangle(200, 300);\r\n  r1.setFill(Color.DARKBLUE);\r\n      \r\n      \r\n  // Create an image view\r\n  imageView = new ImageView(&quot;rwuhawks.png&quot;);\r\n  imageView.setFitHeight(200);\r\n  imageView.setFitWidth(200);\r\n\r\n   \r\n   Text text1 = new Text(&quot;Here we go Hawks!&quot;);\r\n   text1.setFill(Color.GOLD);\r\n   text1.setFont(Font.font(&quot;Impact&quot;, FontWeight.BOLD, 18) );\r\n   \r\n   //structure of your design\r\n   StackPane sPane = new StackPane();\r\n   \r\n   VBox vBox = new VBox(50); //padding\r\n   vBox.setAlignment(Pos.CENTER);\r\n   vBox.getChildren().addAll(sPane, text1);\r\n   \r\n   \r\n   //sPane2 needs to be defined before using\r\n   StackPane sPane2 = new StackPane();\r\n   sPane2.getChildren().add(r1); //add a node called r1 to be the first component\r\n   sPane2.getChildren().addAll(vBox);\r\n      \r\n   //add GUI components (graphical user interface)\r\n   \r\n\r\n       //new combo box to be copied in under old box \r\n   ComboBox&lt;String&gt; borderColor = new ComboBox&lt;&gt;(); \r\n   borderColor.getItems().addAll(&quot;Select Color...&quot;,&quot;Dark Blue&quot;, &quot;Light Blue&quot;,&quot;White&quot;);\r\n   borderColor.setValue(&quot;Select Color...&quot;);\r\n      \r\n   Button applybutton = new Button (&quot;Apply&quot;);\r\n   applybutton.setOnAction(event -&gt; {\r\n   String selectedItem = borderColor.getSelectionModel().getSelectedItem();\r\n    \r\n   switch(selectedItem){\r\n     \r\n   case &quot;Dark Blue&quot;:\r\n   r1.setFill(Color.BLUE);\r\n   break;\r\n           \r\n     \r\n   case &quot;Light Blue&quot;:\r\n   r1.setFill(Color.LIGHTBLUE);\r\n   break;\r\n     \r\n     \r\n   case &quot;White&quot;:\r\n   r1.setFill(Color.WHITE);\r\n   break;\r\n   }\r\n   });\r\n  \r\n  \r\n   //3 - ComboBox\r\n   imageComboBox = new ComboBox&lt;&gt;();\r\n   imageComboBox.getItems().addAll(&quot;Select Team...&quot;, &quot;Volleyball&quot;, &quot;Basketball&quot;, &quot;Rugby&quot;,   &quot;Gymnastics&quot;, &quot;Hockey&quot;);\r\n   imageComboBox.setValue(&quot;Select Team...&quot;);\r\n      \r\n   imageView = new ImageView();\r\n   imageView.setFitWidth(100);\r\n   imageView.setFitHeight(100);\r\n  \r\n   Button imageApplyBtn = new Button (&quot;Apply&quot;);\r\n   imageApplyBtn.setOnAction(event -&gt;{\r\n   String selectedImage = imageComboBox.getSelectionModel().getSelectedItem();\r\n   \r\n            \r\n   VBox vBox2 = new VBox(20);\r\n   vBox2.setAlignment(Pos.CENTER); //alignment\r\n   vBox2.getChildren().addAll(imageComboBox, imageApplyBtn, borderColor, applybutton);\r\n   vBox2.getChildren().add(hBox); //add the play button\r\n      \r\n   //combine the graphics (sPane2) with GUI(vBox2) into a FlowPane\r\n   FlowPane fPane = new FlowPane(20,20);\r\n   fPane.getChildren().addAll(sPane2, vBox2);\r\n      \r\n   Scene scene = new Scene (fPane, 300, 400);\r\n   primaryStage.setTitle(&quot;RWU Athletics&quot;);\r\n   primaryStage.setScene( scene ); //set the scene on top of the stage\r\n   primaryStage.show(); //visible\r\n   \r\n   }); \r\n   }//end of start()\r\n   \r\n   private void setImage() {\r\n   String selectedImage = imageComboBox.getValue();\r\n\r\n   // Load and set the corresponding image\r\n   Image image = null;\r\n   switch (selectedImage) {\r\n   case &quot;Volleyball&quot;:\r\n   image = new Image(&quot;rwuvolleyball.png&quot;);\r\n   break;\r\n                \r\n   case &quot;Rugby&quot;:\r\n   image = new Image(&quot;rwurugby.png&quot;);\r\n   break;\r\n                \r\n   case &quot;Hockey&quot;:\r\n   image = new Image(&quot;rwuhockey.png&quot;);\r\n   break;\r\n                \r\n   case &quot;Basketball&quot;:\r\n   image = new Image(&quot;rwubasketball.jpeg&quot;);\r\n   break;\r\n                \r\n   case &quot;Gymnastics&quot;:\r\n   image = new Image(&quot;rwugymnastics.png&quot;);\r\n   break;\r\n                \r\n   default:\r\n   image = new Image(&quot;rwuhawks.png&quot;);\r\n   break;\r\n   }\r\n\r\n   imageView.setImage(image);\r\n   }\r\n   \r\n   }\r\n```","title":"JavaFX code will compile but nothing happens when it runs","body":"<p>I am working on a relatively simple JavaFX project, where the goal is to display a college logo, and text, and the background color and logo can be changed using combo boxes to select a specific sports team and color. The program was working before, but after adding the last &quot;apply&quot; button, the code will compile but nothing happens when it runs. There are no errors shown, and I can't seem to find anything within the code that would be causing this... maybe someone else might catch something?</p>\n<p>Here is the code:</p>\n<pre><code>  import javafx.application.Application;\n  import javafx.scene.Scene;\n  import javafx.scene.layout.StackPane;\n  import javafx.stage.Stage;\n  import javafx.scene.shape.Rectangle;\n  import javafx.scene.paint.Color;\n \n  import javafx.scene.layout.VBox;\n  import javafx.scene.shape.Circle;\n  import javafx.scene.text.Text;\n  import javafx.scene.text.Font;\n  import javafx.scene.text.FontWeight;\n  import javafx.geometry.Pos;\n  import javafx.scene.image.Image;\n  import javafx.scene.image.ImageView;\n \n  import javafx.scene.control.Button;\n  import javafx.scene.control.TextField;\n  import javafx.scene.control.ComboBox;\n  import javafx.scene.layout.FlowPane;\n \n  //for the media\n  import java.io.File;\n  import javafx.scene.layout.HBox;\n  import javafx.scene.media.Media;\n  import javafx.scene.media.MediaPlayer;\n  import javafx.event.ActionEvent;\n  import javafx.event.EventHandler; \n  import javafx.collections.FXCollections;\n  import javafx.geometry.Insets;\n  import java.io.File;\n\n  \n  public class GUIProjectEWIW7 extends Application {\n  public ImageView imageView;\n  private ComboBox&lt;String&gt; imageComboBox;\n  private Text displayText;\n   \n  @Override\n   \n  public void start(Stage primaryStage){\n   \n  //add media\n  File mediaFile = new File(&quot;cheer.mp3&quot;);\n  Media media = new Media(mediaFile.toURI().toString() );\n  MediaPlayer cheer = new MediaPlayer(media);\n   \n  //create play button\n  Button playButton = new Button(&quot;CHEER&quot;); \n   \n  //add listener of the playButton to play the music\n  playButton.setOnAction(e -&gt; {\n  //add the actual actions when the button is pressed\n  if(playButton.getText().equals(&quot;CHEER&quot;)){\n  cheer.play();\n  playButton.setText(&quot;STOP&quot;);\n  } \n  else{\n  cheer.pause();\n  playButton.setText(&quot;CHEER&quot;);\n  }\n  });\n   \n  HBox hBox = new HBox(10);\n  hBox.setAlignment(Pos.CENTER);\n  hBox.getChildren().add(playButton);\n   \n   \n  //DEFINE SHAPES &amp; COLORS\n  Rectangle r1 = new Rectangle(200, 300);\n  r1.setFill(Color.DARKBLUE);\n      \n      \n  // Create an image view\n  imageView = new ImageView(&quot;rwuhawks.png&quot;);\n  imageView.setFitHeight(200);\n  imageView.setFitWidth(200);\n\n   \n   Text text1 = new Text(&quot;Here we go Hawks!&quot;);\n   text1.setFill(Color.GOLD);\n   text1.setFont(Font.font(&quot;Impact&quot;, FontWeight.BOLD, 18) );\n   \n   //structure of your design\n   StackPane sPane = new StackPane();\n   \n   VBox vBox = new VBox(50); //padding\n   vBox.setAlignment(Pos.CENTER);\n   vBox.getChildren().addAll(sPane, text1);\n   \n   \n   //sPane2 needs to be defined before using\n   StackPane sPane2 = new StackPane();\n   sPane2.getChildren().add(r1); //add a node called r1 to be the first component\n   sPane2.getChildren().addAll(vBox);\n      \n   //add GUI components (graphical user interface)\n   \n\n       //new combo box to be copied in under old box \n   ComboBox&lt;String&gt; borderColor = new ComboBox&lt;&gt;(); \n   borderColor.getItems().addAll(&quot;Select Color...&quot;,&quot;Dark Blue&quot;, &quot;Light Blue&quot;,&quot;White&quot;);\n   borderColor.setValue(&quot;Select Color...&quot;);\n      \n   Button applybutton = new Button (&quot;Apply&quot;);\n   applybutton.setOnAction(event -&gt; {\n   String selectedItem = borderColor.getSelectionModel().getSelectedItem();\n    \n   switch(selectedItem){\n     \n   case &quot;Dark Blue&quot;:\n   r1.setFill(Color.BLUE);\n   break;\n           \n     \n   case &quot;Light Blue&quot;:\n   r1.setFill(Color.LIGHTBLUE);\n   break;\n     \n     \n   case &quot;White&quot;:\n   r1.setFill(Color.WHITE);\n   break;\n   }\n   });\n  \n  \n   //3 - ComboBox\n   imageComboBox = new ComboBox&lt;&gt;();\n   imageComboBox.getItems().addAll(&quot;Select Team...&quot;, &quot;Volleyball&quot;, &quot;Basketball&quot;, &quot;Rugby&quot;,   &quot;Gymnastics&quot;, &quot;Hockey&quot;);\n   imageComboBox.setValue(&quot;Select Team...&quot;);\n      \n   imageView = new ImageView();\n   imageView.setFitWidth(100);\n   imageView.setFitHeight(100);\n  \n   Button imageApplyBtn = new Button (&quot;Apply&quot;);\n   imageApplyBtn.setOnAction(event -&gt;{\n   String selectedImage = imageComboBox.getSelectionModel().getSelectedItem();\n   \n            \n   VBox vBox2 = new VBox(20);\n   vBox2.setAlignment(Pos.CENTER); //alignment\n   vBox2.getChildren().addAll(imageComboBox, imageApplyBtn, borderColor, applybutton);\n   vBox2.getChildren().add(hBox); //add the play button\n      \n   //combine the graphics (sPane2) with GUI(vBox2) into a FlowPane\n   FlowPane fPane = new FlowPane(20,20);\n   fPane.getChildren().addAll(sPane2, vBox2);\n      \n   Scene scene = new Scene (fPane, 300, 400);\n   primaryStage.setTitle(&quot;RWU Athletics&quot;);\n   primaryStage.setScene( scene ); //set the scene on top of the stage\n   primaryStage.show(); //visible\n   \n   }); \n   }//end of start()\n   \n   private void setImage() {\n   String selectedImage = imageComboBox.getValue();\n\n   // Load and set the corresponding image\n   Image image = null;\n   switch (selectedImage) {\n   case &quot;Volleyball&quot;:\n   image = new Image(&quot;rwuvolleyball.png&quot;);\n   break;\n                \n   case &quot;Rugby&quot;:\n   image = new Image(&quot;rwurugby.png&quot;);\n   break;\n                \n   case &quot;Hockey&quot;:\n   image = new Image(&quot;rwuhockey.png&quot;);\n   break;\n                \n   case &quot;Basketball&quot;:\n   image = new Image(&quot;rwubasketball.jpeg&quot;);\n   break;\n                \n   case &quot;Gymnastics&quot;:\n   image = new Image(&quot;rwugymnastics.png&quot;);\n   break;\n                \n   default:\n   image = new Image(&quot;rwuhawks.png&quot;);\n   break;\n   }\n\n   imageView.setImage(image);\n   }\n   \n   }\n</code></pre>\n"},{"tags":["java","mysql","utf-8"],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1339826394,"creation_date":1339826394,"answer_id":11061234,"question_id":11057463,"body_markdown":"These appear to be [unicode surrogate characters][1]. Since they are not actual characters, and it seems MySQL doesn&#39;t support them, it is safe to trim them:\r\n\r\n    StringBuilder sb = new StringBuilder();\r\n    for (int i = 0; i &lt; text.length(); i++) {\r\n        char ch = text.charAt(i);\r\n        if (!Character.isHighSurrogate(ch) &amp;&amp; !Character.isLowSurrogate(ch)) {\r\n            sb.append(ch);\r\n        }\r\n    }\r\n    return sb.toString();\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates","title":"How to handle SQL state [HY000]; error code [1366]; Incorrect string value?","body":"<p>These appear to be <a href=\"http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates\" rel=\"noreferrer\">unicode surrogate characters</a>. Since they are not actual characters, and it seems MySQL doesn't support them, it is safe to trim them:</p>\n\n<pre><code>StringBuilder sb = new StringBuilder();\nfor (int i = 0; i &lt; text.length(); i++) {\n    char ch = text.charAt(i);\n    if (!Character.isHighSurrogate(ch) &amp;&amp; !Character.isLowSurrogate(ch)) {\n        sb.append(ch);\n    }\n}\nreturn sb.toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15883687,"reputation":33,"user_id":11460743,"display_name":"Ioan Simiciuc"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683637011,"creation_date":1683637011,"answer_id":76209618,"question_id":11057463,"body_markdown":"I fixed the error by changing the collation of the DB from utf_8 to utf_16.","title":"How to handle SQL state [HY000]; error code [1366]; Incorrect string value?","body":"<p>I fixed the error by changing the collation of the DB from utf_8 to utf_16.</p>\n"}],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18546,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":11061234,"answer_count":2,"score":10,"last_activity_date":1683637011,"creation_date":1339790569,"question_id":11057463,"body_markdown":"I&#39;m aware this error means a mysql column doesn&#39;t accept the value, but this is strange, since the value fits in a Java UTF-8 encoded string, and the mysql column is utf8_general_ci. Also, all utf8 characters have worked properly so far, apart from these. \r\n\r\nThe use-case is: I am importing tweets. The tweet in question is: https://twitter.com/bakervin/status/210054214951518212 - you can see the two &quot;strange&quot; characters (and two strange whitespaces between them). The question is - how to handle this:\r\n\r\n- trim these characters (how - which are they, how does the Java UTF-8 differ from MySQL one)\r\n- make the column capable of accepting this value (how - is there anything more utf-y than utf8_general_ci)","title":"How to handle SQL state [HY000]; error code [1366]; Incorrect string value?","body":"<p>I'm aware this error means a mysql column doesn't accept the value, but this is strange, since the value fits in a Java UTF-8 encoded string, and the mysql column is utf8_general_ci. Also, all utf8 characters have worked properly so far, apart from these. </p>\n\n<p>The use-case is: I am importing tweets. The tweet in question is: <a href=\"https://twitter.com/bakervin/status/210054214951518212\" rel=\"noreferrer\">https://twitter.com/bakervin/status/210054214951518212</a> - you can see the two \"strange\" characters (and two strange whitespaces between them). The question is - how to handle this:</p>\n\n<ul>\n<li>trim these characters (how - which are they, how does the Java UTF-8 differ from MySQL one)</li>\n<li>make the column capable of accepting this value (how - is there anything more utf-y than utf8_general_ci)</li>\n</ul>\n"},{"tags":["java","frameworks","annotations","code-structure"],"comments":[{"owner":{"account_id":191656,"reputation":7199,"user_id":432354,"accept_rate":95,"display_name":"pvorb"},"score":0,"creation_date":1657134973,"post_id":43679586,"comment_id":128740871,"body_markdown":"I&#39;m late to the party and this is not directly an answer to your question, but I would suggest to declare a constant `static final String ENTITY_NAME = &quot;bank_account_holder_name&quot;;` that you can use in all the annotation declarations.","body":"I&#39;m late to the party and this is not directly an answer to your question, but I would suggest to declare a constant <code>static final String ENTITY_NAME = &quot;bank_account_holder_name&quot;;</code> that you can use in all the annotation declarations."}],"answers":[{"comments":[{"owner":{"account_id":4372509,"reputation":2646,"user_id":3566441,"accept_rate":69,"display_name":"munHunger"},"score":0,"creation_date":1493380957,"post_id":43679695,"comment_id":74405437,"body_markdown":"And I assume it won&#39;t work magically with something along the ways of: @Culumn(name = magic) public @interface CustomInterface ?","body":"And I assume it won&#39;t work magically with something along the ways of: @Culumn(name = magic) public @interface CustomInterface ?"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1493381064,"post_id":43679695,"comment_id":74405514,"body_markdown":"That would **annotate** the annotation. That doesnt mean that something annotated with CustomInterface would see the Column annotation.","body":"That would <b>annotate</b> the annotation. That doesnt mean that something annotated with CustomInterface would see the Column annotation."}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1668785282,"creation_date":1493380709,"answer_id":43679695,"question_id":43679586,"body_markdown":"The answer is: *probably* no, this is not possible (using &quot;standard&quot; java).\r\n\r\nYou see, there is no *[inheritance][1]* for annotations, let alone &quot;multiple&quot; inheritance which would allow you to express:\r\n\r\n    public @interface MultiAnnotiation extends Column, XmlElement, ...\r\n\r\nAnd most likely, those annotations work like this: at **runtime** the corresponding frameworks uses reflection to check if a certain object *has* that annotation. And if it doesn&#39;t find &quot;its&quot; annotation, nothing happens. \r\n\r\nSo you would need a way to &quot;magically&quot; insert those annotations into your class file. \r\n\r\nBoiling down to: when you would write your own compiler, and invent something on top of java, then you could do something like that. \r\n\r\nThings might be different when dealing with annotations that come with compiler-plugins (meaning: an annotation that is processed at compile time). Maybe you could write your own custom annotation then that triggers the **same** compile-time operations. \r\n\r\nLong story short: all of this sounds *interesting*, but rather *advanced*, and most likely: not resulting in robust, production-worthy code!\r\n\r\n  [1]: https://stackoverflow.com/questions/7761513/is-there-something-like-annotation-inheritance-in-java","title":"merge multiple annotations with parameters","body":"<p>The answer is: <em>probably</em> no, this is not possible (using &quot;standard&quot; java).</p>\n<p>You see, there is no <em><a href=\"https://stackoverflow.com/questions/7761513/is-there-something-like-annotation-inheritance-in-java\">inheritance</a></em> for annotations, let alone &quot;multiple&quot; inheritance which would allow you to express:</p>\n<pre><code>public @interface MultiAnnotiation extends Column, XmlElement, ...\n</code></pre>\n<p>And most likely, those annotations work like this: at <strong>runtime</strong> the corresponding frameworks uses reflection to check if a certain object <em>has</em> that annotation. And if it doesn't find &quot;its&quot; annotation, nothing happens.</p>\n<p>So you would need a way to &quot;magically&quot; insert those annotations into your class file.</p>\n<p>Boiling down to: when you would write your own compiler, and invent something on top of java, then you could do something like that.</p>\n<p>Things might be different when dealing with annotations that come with compiler-plugins (meaning: an annotation that is processed at compile time). Maybe you could write your own custom annotation then that triggers the <strong>same</strong> compile-time operations.</p>\n<p>Long story short: all of this sounds <em>interesting</em>, but rather <em>advanced</em>, and most likely: not resulting in robust, production-worthy code!</p>\n"},{"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1493381519,"post_id":43679815,"comment_id":74405844,"body_markdown":"The question is in the end: how does the spring framework do that ... probably by **knowing** what this annotation means; and by specifically doing something about it.","body":"The question is in the end: how does the spring framework do that ... probably by <b>knowing</b> what this annotation means; and by specifically doing something about it."},{"owner":{"account_id":71353,"reputation":16394,"user_id":206466,"accept_rate":70,"display_name":"xenoterracide"},"score":0,"creation_date":1539283174,"post_id":43679815,"comment_id":92456522,"body_markdown":"`@Target({ElementType.CONSTRUCTOR, ElementType.METHOD, ElementType.PARAMETER, ElementType.FIELD, ElementType.ANNOTATION_TYPE})` see the last thing...","body":"<code>@Target({ElementType.CONSTRUCTOR, ElementType.METHOD, ElementType.PARAMETER, ElementType.FIELD, ElementType.ANNOTATION_TYPE})</code> see the last thing..."},{"owner":{"account_id":4838304,"reputation":1514,"user_id":3904168,"accept_rate":43,"display_name":"Erfan Ahmed"},"score":0,"creation_date":1700458304,"post_id":43679815,"comment_id":136652594,"body_markdown":"it&#39;s possible if you are using Spring framework &gt;= 4.2. There is an specific annotatino - @AliasFor. [link for details](https://www.baeldung.com/spring-aliasfor-annotation)","body":"it&#39;s possible if you are using Spring framework &gt;= 4.2. There is an specific annotatino - @AliasFor. <a href=\"https://www.baeldung.com/spring-aliasfor-annotation\" rel=\"nofollow noreferrer\">link for details</a>"}],"tags":[],"owner":{"account_id":6745176,"reputation":2134,"user_id":5197004,"accept_rate":86,"display_name":"Benjamin Sch&#252;ller"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1493381064,"creation_date":1493381064,"answer_id":43679815,"question_id":43679586,"body_markdown":"It is possible to merge some annotations to only one annotation. Spring for example do it in the SpringBootApplication-Annotation:\r\n\r\n    /**\r\n     * Indicates a {@link Configuration configuration} class that declares one or more\r\n     * {@link Bean @Bean} methods and also triggers {@link EnableAutoConfiguration\r\n     * auto-configuration} and {@link ComponentScan component scanning}. This is a convenience\r\n     * annotation that is equivalent to declaring {@code @Configuration},\r\n     * {@code @EnableAutoConfiguration} and {@code @ComponentScan}.\r\n     *\r\n     * @author Phillip Webb\r\n     * @since 1.2.0\r\n     */\r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Documented\r\n    @Inherited\r\n    @Configuration\r\n    @EnableAutoConfiguration\r\n    @ComponentScan\r\n    public @interface SpringBootApplication {\r\n    \r\n    \t/**\r\n    \t * Exclude specific auto-configuration classes such that they will never be applied.\r\n    \t * @return the classes to exclude\r\n    \t */\r\n    \tClass&lt;?&gt;[] exclude() default {};\r\n    \r\n    }\r\n\r\nBut i don&#39;t know if it is possible to set a value to the inner annotations from the merged annotation.","title":"merge multiple annotations with parameters","body":"<p>It is possible to merge some annotations to only one annotation. Spring for example do it in the SpringBootApplication-Annotation:</p>\n\n<pre><code>/**\n * Indicates a {@link Configuration configuration} class that declares one or more\n * {@link Bean @Bean} methods and also triggers {@link EnableAutoConfiguration\n * auto-configuration} and {@link ComponentScan component scanning}. This is a convenience\n * annotation that is equivalent to declaring {@code @Configuration},\n * {@code @EnableAutoConfiguration} and {@code @ComponentScan}.\n *\n * @author Phillip Webb\n * @since 1.2.0\n */\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@Configuration\n@EnableAutoConfiguration\n@ComponentScan\npublic @interface SpringBootApplication {\n\n    /**\n     * Exclude specific auto-configuration classes such that they will never be applied.\n     * @return the classes to exclude\n     */\n    Class&lt;?&gt;[] exclude() default {};\n\n}\n</code></pre>\n\n<p>But i don't know if it is possible to set a value to the inner annotations from the merged annotation.</p>\n"},{"tags":[],"owner":{"account_id":3618042,"reputation":33,"user_id":3017457,"display_name":"Solksjaer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683636852,"creation_date":1683636852,"answer_id":76209582,"question_id":43679586,"body_markdown":"You can actually do that (at least I&#180;ve used for TestCases annotations).\r\n\r\nCheck the article from here:\r\nhttps://www.swtestacademy.com/how-to-merge-multiple-annotations-in-java/\r\n\r\nJust create a new `@interface` including the annotations you need.\r\n\r\n```\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Column(name = &quot;bank_account_holder_name&quot;)\r\n@XmlElement(name = &quot;bank_account_holder_name&quot;)\r\n@SerializedName(&quot;bank_account_holder_name&quot;)\r\n@ApiModelProperty(name = &quot;bank_account_holder_name&quot;, value = &quot;The name of the recipient bank account holder&quot;)\r\n@Target({ElementType.TYPE, ElementType.METHOD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface MyCoolAnnotation {\r\n}\r\n```","title":"merge multiple annotations with parameters","body":"<p>You can actually do that (at least Ive used for TestCases annotations).</p>\n<p>Check the article from here:\n<a href=\"https://www.swtestacademy.com/how-to-merge-multiple-annotations-in-java/\" rel=\"nofollow noreferrer\">https://www.swtestacademy.com/how-to-merge-multiple-annotations-in-java/</a></p>\n<p>Just create a new <code>@interface</code> including the annotations you need.</p>\n<pre><code>import java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Column(name = &quot;bank_account_holder_name&quot;)\n@XmlElement(name = &quot;bank_account_holder_name&quot;)\n@SerializedName(&quot;bank_account_holder_name&quot;)\n@ApiModelProperty(name = &quot;bank_account_holder_name&quot;, value = &quot;The name of the recipient bank account holder&quot;)\n@Target({ElementType.TYPE, ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyCoolAnnotation {\n}\n</code></pre>\n"}],"owner":{"account_id":4372509,"reputation":2646,"user_id":3566441,"accept_rate":69,"display_name":"munHunger"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16993,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":43679695,"answer_count":3,"score":13,"last_activity_date":1683636852,"creation_date":1493380418,"question_id":43679586,"body_markdown":"I have a problem with using multiple annotations that all say more or less the same thing but to different frameworks and I would like to group them all into one custom annotation. Currently it looks like this:\r\n\r\n    @Column(name = &quot;bank_account_holder_name&quot;)\r\n    @XmlElement(name = &quot;bank_account_holder_name&quot;)\r\n    @SerializedName(&quot;bank_account_holder_name&quot;)\r\n    @ApiModelProperty(name = &quot;bank_account_holder_name&quot;, value = &quot;The name of the recipient bank account holder&quot;)\r\n    public String bankAccountHolderName;\r\n\r\nAs you can see they all repeat the same String and I would like to combine them, but I have yet to find a way of doing so.\r\n\r\nIs it at all possible to do this, or do I have to either continue doing this or change/create a new framework?","title":"merge multiple annotations with parameters","body":"<p>I have a problem with using multiple annotations that all say more or less the same thing but to different frameworks and I would like to group them all into one custom annotation. Currently it looks like this:</p>\n\n<pre><code>@Column(name = \"bank_account_holder_name\")\n@XmlElement(name = \"bank_account_holder_name\")\n@SerializedName(\"bank_account_holder_name\")\n@ApiModelProperty(name = \"bank_account_holder_name\", value = \"The name of the recipient bank account holder\")\npublic String bankAccountHolderName;\n</code></pre>\n\n<p>As you can see they all repeat the same String and I would like to combine them, but I have yet to find a way of doing so.</p>\n\n<p>Is it at all possible to do this, or do I have to either continue doing this or change/create a new framework?</p>\n"},{"tags":["javascript","java","maven","jakarta-mail"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683632972,"post_id":76208772,"comment_id":134393450,"body_markdown":"The subject is incorrect. You are not having a problem reading the body of the email. If the application is not able to authenticate it will never read the body. You have an authentication issue instead.","body":"The subject is incorrect. You are not having a problem reading the body of the email. If the application is not able to authenticate it will never read the body. You have an authentication issue instead."},{"owner":{"account_id":28073051,"reputation":1,"user_id":21445342,"display_name":"Shubham Agrawal"},"score":0,"creation_date":1683635232,"post_id":76208772,"comment_id":134394022,"body_markdown":"@aled ohh yes, can you please help me with this authentication issue?\nor Do you know how to can read the body of the email? because I want to verify my email using automation script","body":"@aled ohh yes, can you please help me with this authentication issue? or Do you know how to can read the body of the email? because I want to verify my email using automation script"}],"owner":{"account_id":28073051,"reputation":1,"user_id":21445342,"display_name":"Shubham Agrawal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683636761,"creation_date":1683631339,"question_id":76208772,"body_markdown":"I am using the below code to read text inside the body of the mail, but getting an error on while connecting to the server:\r\n\r\n```\r\nimport java.util.Map;\r\nimport java.util.Properties;\r\nimport javax.mail.*;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport com.sun.mail.iap.ProtocolException;\r\nimport com.sun.mail.imap.IMAPFolder;\r\nimport com.sun.mail.imap.protocol.IMAPProtocol;\r\n\r\nimport javax.mail.Message;\r\n\r\npublic class test1 {\r\n\r\n    public static void readInboundEmails() {\r\n//create session object\r\n        Session session = getImapSession();\r\n        try {\r\n//connect to message store\r\n            Store store = session.getStore(&quot;imap&quot;);\r\n            store.connect( &quot;imap.mail.yahoo.com&quot;, &quot;username&quot;, &quot;password&quot;);\r\n//open the inbox folder\r\n            IMAPFolder inbox = (IMAPFolder) store.getFolder(&quot;INBOX&quot;);\r\n            inbox.open(Folder.READ_WRITE);\r\n//fetch messages\r\n            Message[] messages = inbox.getMessages();\r\n//read messages\r\n            for (int i = 0; i &lt; messages.length; i++) {\r\n                Message msg = messages[i];\r\n                Address[] fromAddress = msg.getFrom();\r\n                String from = fromAddress[0].toString();\r\n                String subject = msg.getSubject();\r\n                Address[] toList = msg.getRecipients(Message.RecipientType.TO);\r\n                Address[] ccList = msg.getRecipients(Message.RecipientType.CC);\r\n                String contentType = msg.getContentType();\r\n            }\r\n        } catch (AuthenticationFailedException e) {\r\n            System.out.println(&quot;Exception in reading EMails : &quot; + e.getMessage());\r\n        } catch (MessagingException e) {\r\n            System.out.println(&quot;Exception in reading EMails : &quot; + e.getMessage());\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Exception in reading EMails : &quot; + e.getMessage());\r\n        }\r\n    }\r\n\r\n    private static Session getImapSession() {\r\n        Properties props = new Properties();\r\n        props.setProperty(&quot;mail.store.protocol&quot;, &quot;imap&quot;);\r\n        props.setProperty(&quot;mail.debug&quot;, &quot;true&quot;);\r\n        props.setProperty(&quot;mail.imap.host&quot;, &quot;imap.mail.yahoo.com&quot;);\r\n        props.setProperty(&quot;mail.imap.port&quot;, &quot;993&quot;);\r\n        props.setProperty(&quot;mail.imap.ssl.enable&quot;, &quot;true&quot;);\r\n        Session session = Session.getDefaultInstance(props, null);\r\n        session.setDebug(true);\r\n        return session;\r\n    }\r\n    public static void main(String[] args) {\r\n        readInboundEmails();\r\n    }\r\n}\r\n```\r\n\r\nwhen I run this java class by adding username and password then getting below error\r\n```\r\nDEBUG IMAP: trying to connect to host &quot;imap.mail.yahoo.com&quot;, port 993, isSSL true\r\n\r\n\\* OK Welcome! IMAP Server up and ready to accept your request\r\n\r\nA0 CAPABILITY\r\n\r\n\\* CAPABILITY IMAP4rev1 SASL-IR AUTH=PLAIN AUTH=XOAUTH2 AUTH=OAUTHBEARER ID MOVE NAMESPACE XYMHIGHESTMODSEQ UIDPLUS LITERAL+ CHILDREN UNSELECT X-MSG-EXT OBJECTID IDLE ENABLE UIDONLY X-ALL-MAIL X-UIDONLY LIST-EXTENDED LIST-STATUS SPECIAL-USE PARTIAL APPENDLIMIT=41697280\r\n\r\nA0 OK CAPABILITY completed\r\n\r\nDEBUG IMAP: AUTH: PLAIN\r\n\r\nDEBUG IMAP: AUTH: XOAUTH2\r\n\r\nDEBUG IMAP: AUTH: OAUTHBEARER\r\n\r\nDEBUG IMAP: protocolConnect login, host=imap.mail.yahoo.com, user=username, password=\\&lt;non-null\\&gt;\r\n\r\nDEBUG IMAP: AUTHENTICATE PLAIN command trace suppressed\r\n\r\nDEBUG IMAP: AUTHENTICATE PLAIN command result: A1 NO \\[AUTHENTICATIONFAILED\\] AUTHENTICATE Invalid credentials\r\n\r\nException in reading EMails : \\[AUTHENTICATIONFAILED\\] AUTHENTICATE Invalid credentials\r\n```\r\nPlease help me out on this.","title":"Authentication error when trying to connect to yahoo using imap","body":"<p>I am using the below code to read text inside the body of the mail, but getting an error on while connecting to the server:</p>\n<pre><code>import java.util.Map;\nimport java.util.Properties;\nimport javax.mail.*;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport com.sun.mail.iap.ProtocolException;\nimport com.sun.mail.imap.IMAPFolder;\nimport com.sun.mail.imap.protocol.IMAPProtocol;\n\nimport javax.mail.Message;\n\npublic class test1 {\n\n    public static void readInboundEmails() {\n//create session object\n        Session session = getImapSession();\n        try {\n//connect to message store\n            Store store = session.getStore(&quot;imap&quot;);\n            store.connect( &quot;imap.mail.yahoo.com&quot;, &quot;username&quot;, &quot;password&quot;);\n//open the inbox folder\n            IMAPFolder inbox = (IMAPFolder) store.getFolder(&quot;INBOX&quot;);\n            inbox.open(Folder.READ_WRITE);\n//fetch messages\n            Message[] messages = inbox.getMessages();\n//read messages\n            for (int i = 0; i &lt; messages.length; i++) {\n                Message msg = messages[i];\n                Address[] fromAddress = msg.getFrom();\n                String from = fromAddress[0].toString();\n                String subject = msg.getSubject();\n                Address[] toList = msg.getRecipients(Message.RecipientType.TO);\n                Address[] ccList = msg.getRecipients(Message.RecipientType.CC);\n                String contentType = msg.getContentType();\n            }\n        } catch (AuthenticationFailedException e) {\n            System.out.println(&quot;Exception in reading EMails : &quot; + e.getMessage());\n        } catch (MessagingException e) {\n            System.out.println(&quot;Exception in reading EMails : &quot; + e.getMessage());\n        } catch (Exception e) {\n            System.out.println(&quot;Exception in reading EMails : &quot; + e.getMessage());\n        }\n    }\n\n    private static Session getImapSession() {\n        Properties props = new Properties();\n        props.setProperty(&quot;mail.store.protocol&quot;, &quot;imap&quot;);\n        props.setProperty(&quot;mail.debug&quot;, &quot;true&quot;);\n        props.setProperty(&quot;mail.imap.host&quot;, &quot;imap.mail.yahoo.com&quot;);\n        props.setProperty(&quot;mail.imap.port&quot;, &quot;993&quot;);\n        props.setProperty(&quot;mail.imap.ssl.enable&quot;, &quot;true&quot;);\n        Session session = Session.getDefaultInstance(props, null);\n        session.setDebug(true);\n        return session;\n    }\n    public static void main(String[] args) {\n        readInboundEmails();\n    }\n}\n</code></pre>\n<p>when I run this java class by adding username and password then getting below error</p>\n<pre><code>DEBUG IMAP: trying to connect to host &quot;imap.mail.yahoo.com&quot;, port 993, isSSL true\n\n\\* OK Welcome! IMAP Server up and ready to accept your request\n\nA0 CAPABILITY\n\n\\* CAPABILITY IMAP4rev1 SASL-IR AUTH=PLAIN AUTH=XOAUTH2 AUTH=OAUTHBEARER ID MOVE NAMESPACE XYMHIGHESTMODSEQ UIDPLUS LITERAL+ CHILDREN UNSELECT X-MSG-EXT OBJECTID IDLE ENABLE UIDONLY X-ALL-MAIL X-UIDONLY LIST-EXTENDED LIST-STATUS SPECIAL-USE PARTIAL APPENDLIMIT=41697280\n\nA0 OK CAPABILITY completed\n\nDEBUG IMAP: AUTH: PLAIN\n\nDEBUG IMAP: AUTH: XOAUTH2\n\nDEBUG IMAP: AUTH: OAUTHBEARER\n\nDEBUG IMAP: protocolConnect login, host=imap.mail.yahoo.com, user=username, password=\\&lt;non-null\\&gt;\n\nDEBUG IMAP: AUTHENTICATE PLAIN command trace suppressed\n\nDEBUG IMAP: AUTHENTICATE PLAIN command result: A1 NO \\[AUTHENTICATIONFAILED\\] AUTHENTICATE Invalid credentials\n\nException in reading EMails : \\[AUTHENTICATIONFAILED\\] AUTHENTICATE Invalid credentials\n</code></pre>\n<p>Please help me out on this.</p>\n"},{"tags":["java","mongodb","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":18623444,"reputation":76,"user_id":13573083,"display_name":"Supriya Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1589880435,"creation_date":1589877906,"answer_id":61886871,"question_id":61886714,"body_markdown":"I was facing the same issue and didn&#39;t find any relevant answers. I resolved it myself. This is the issue with your port 27017 blocked by your firewall. You need to open the outbound and inbound for this port in your firewall.\r\n\r\nSteps for Windows:\r\n\r\n- Go to Firewall\r\n- Advanced Settings\r\n- Inbound Rules\r\n- Create a new rule with New Rule under Actions tab\r\n- Select Port\r\n- Select TCP and specify port no (27015,27016,27017)\r\n- Allow the connection\r\n- Click Next\r\n- Add name for new Rule Finish\r\n\r\nFollow the same steps for Outbound Rule.\r\nOnce done, restart your system.","title":"Unable to look up TXT record for host Cluster0-XXXXX.mongodb.net","body":"<p>I was facing the same issue and didn't find any relevant answers. I resolved it myself. This is the issue with your port 27017 blocked by your firewall. You need to open the outbound and inbound for this port in your firewall.</p>\n\n<p>Steps for Windows:</p>\n\n<ul>\n<li>Go to Firewall</li>\n<li>Advanced Settings</li>\n<li>Inbound Rules</li>\n<li>Create a new rule with New Rule under Actions tab</li>\n<li>Select Port</li>\n<li>Select TCP and specify port no (27015,27016,27017)</li>\n<li>Allow the connection</li>\n<li>Click Next</li>\n<li>Add name for new Rule Finish</li>\n</ul>\n\n<p>Follow the same steps for Outbound Rule.\nOnce done, restart your system.</p>\n"},{"tags":[],"owner":{"account_id":12538154,"reputation":31,"user_id":9124122,"display_name":"Excelsior"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1626539979,"creation_date":1626539624,"answer_id":68422392,"question_id":61886714,"body_markdown":"If you&#39;re still looking for an answer:\r\n\r\nThe issue is because some ISPs block connection string. The error will occur when using default DNS server with such ISPs.\r\n\r\nA simple test to find out if ISP&#39;s the issue, try switching over to other network and see if it still persists. \r\n\r\nIf you&#39;re lucky and switched to an ISP which doesn&#39;t block connection string then you&#39;ll connected to your cluster. If not, you can try changing the DNS configuration to use public DNS server. \r\n\r\nfor reference: https://developers.google.com//speed/public-dns/docs/using","title":"Unable to look up TXT record for host Cluster0-XXXXX.mongodb.net","body":"<p>If you're still looking for an answer:</p>\n<p>The issue is because some ISPs block connection string. The error will occur when using default DNS server with such ISPs.</p>\n<p>A simple test to find out if ISP's the issue, try switching over to other network and see if it still persists.</p>\n<p>If you're lucky and switched to an ISP which doesn't block connection string then you'll connected to your cluster. If not, you can try changing the DNS configuration to use public DNS server.</p>\n<p>for reference: <a href=\"https://developers.google.com//speed/public-dns/docs/using\" rel=\"nofollow noreferrer\">https://developers.google.com//speed/public-dns/docs/using</a></p>\n"},{"tags":[],"owner":{"account_id":981686,"reputation":887,"user_id":1001242,"accept_rate":62,"display_name":"itsraghz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672490872,"creation_date":1672490872,"answer_id":74969637,"question_id":61886714,"body_markdown":"For me, the cluster was paused by MongoDB Team due to the prolonged inactivity. Upon resuming it, it worked. For resuming, you go to MongoDB Atlas Cluster Dashboard, see the status and click on the Resume Cluster button.","title":"Unable to look up TXT record for host Cluster0-XXXXX.mongodb.net","body":"<p>For me, the cluster was paused by MongoDB Team due to the prolonged inactivity. Upon resuming it, it worked. For resuming, you go to MongoDB Atlas Cluster Dashboard, see the status and click on the Resume Cluster button.</p>\n"},{"tags":[],"owner":{"account_id":1016338,"reputation":3267,"user_id":1027842,"accept_rate":75,"display_name":"Benjamin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683635664,"creation_date":1683635664,"answer_id":76209425,"question_id":61886714,"body_markdown":"Your uri is: `mongodb+srv://XXXXXX:XXXXXXXXXXX@luster0-XXXXX.mongodb.net/test?retryWrites=true&amp;w=majority`.\r\n\r\nDuring the creation of the `Connection` there are some parts of the URI parsed. Try removing the `?retryWrites=true&amp;w=majority` part and check whether the TXT parsing is fixed. Maybe your TXT parser doesn&#39;t recognize those options.\r\n","title":"Unable to look up TXT record for host Cluster0-XXXXX.mongodb.net","body":"<p>Your uri is: <code>mongodb+srv://XXXXXX:XXXXXXXXXXX@luster0-XXXXX.mongodb.net/test?retryWrites=true&amp;w=majority</code>.</p>\n<p>During the creation of the <code>Connection</code> there are some parts of the URI parsed. Try removing the <code>?retryWrites=true&amp;w=majority</code> part and check whether the TXT parsing is fixed. Maybe your TXT parser doesn't recognize those options.</p>\n"}],"owner":{"account_id":4841261,"reputation":63,"user_id":3906232,"display_name":"user3906232"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11372,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":61886871,"answer_count":4,"score":6,"last_activity_date":1683635664,"creation_date":1589877364,"question_id":61886714,"body_markdown":"    spring.data.mongodb.uri=mongodb+srv://XXXXXX:XXXXXXXXXXX@luster0-XXXXX.mongodb.net/test?retryWrites=true&amp;w=majority\r\n    spring.data.mongodb.database=test\r\n\r\nException encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;mongoBootApplication&#39;: Unsatisfied dependency expressed through field &#39;repository&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;userRepository&#39;: Cannot resolve reference to bean &#39;mongoTemplate&#39; while setting bean property &#39;mongoOperations&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;mongoTemplate&#39; defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDbFactoryDependentConfiguration.class]: Unsatisfied dependency expressed through method &#39;mongoTemplate&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;mongoDbFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDbFactoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.mongodb.core.MongoDbFactorySupport]: Factory method &#39;mongoDbFactory&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;mongo&#39; defined in class path resource [org/springframework/boot/autoconfigure/mongo/MongoAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.mongodb.MongoClient]: Factory method &#39;mongo&#39; threw exception; nested exception is com.mongodb.MongoConfigurationException: Unable to look up TXT record for host Cluster0-XXXXX.mongodb.net","title":"Unable to look up TXT record for host Cluster0-XXXXX.mongodb.net","body":"<pre><code>spring.data.mongodb.uri=mongodb+srv://XXXXXX:XXXXXXXXXXX@luster0-XXXXX.mongodb.net/test?retryWrites=true&amp;w=majority\nspring.data.mongodb.database=test\n</code></pre>\n\n<p>Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mongoBootApplication': Unsatisfied dependency expressed through field 'repository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userRepository': Cannot resolve reference to bean 'mongoTemplate' while setting bean property 'mongoOperations'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mongoTemplate' defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDbFactoryDependentConfiguration.class]: Unsatisfied dependency expressed through method 'mongoTemplate' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoDbFactory' defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDbFactoryConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.mongodb.core.MongoDbFactorySupport]: Factory method 'mongoDbFactory' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongo' defined in class path resource [org/springframework/boot/autoconfigure/mongo/MongoAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.mongodb.MongoClient]: Factory method 'mongo' threw exception; nested exception is com.mongodb.MongoConfigurationException: Unable to look up TXT record for host Cluster0-XXXXX.mongodb.net</p>\n"},{"tags":["java","spring","hibernate","grails","hql"],"answers":[{"comments":[{"owner":{"account_id":1051966,"reputation":32747,"user_id":1055664,"accept_rate":57,"display_name":"Michael"},"score":0,"creation_date":1379092630,"post_id":18791682,"comment_id":27709807,"body_markdown":"How can I do that with HQL?","body":"How can I do that with HQL?"},{"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"score":1,"creation_date":1379093099,"post_id":18791682,"comment_id":27709997,"body_markdown":"select distinct r.user from Rating r where r.item=:item group by r.user;\nThen do a size()?","body":"select distinct r.user from Rating r where r.item=:item group by r.user; Then do a size()?"},{"owner":{"account_id":1051966,"reputation":32747,"user_id":1055664,"accept_rate":57,"display_name":"Michael"},"score":0,"creation_date":1379094722,"post_id":18791682,"comment_id":27710792,"body_markdown":"is there a way to do it in one query?","body":"is there a way to do it in one query?"},{"owner":{"account_id":345995,"reputation":6762,"user_id":679240,"accept_rate":61,"display_name":"Haroldo_OK"},"score":0,"creation_date":1427216533,"post_id":18791682,"comment_id":46683401,"body_markdown":"It&#39;s inneficient doing it that way, since you will be listing *every* record just to see how many of them are present. For a better example using criteria, please see http://stackoverflow.com/questions/22164717/hibernate-criteria-for-finding-count-for-distinct-value","body":"It&#39;s inneficient doing it that way, since you will be listing <i>every</i> record just to see how many of them are present. For a better example using criteria, please see <a href=\"http://stackoverflow.com/questions/22164717/hibernate-criteria-for-finding-count-for-distinct-value\" title=\"hibernate criteria for finding count for distinct value\">stackoverflow.com/questions/22164717/&hellip;</a>"},{"owner":{"account_id":170359,"reputation":3272,"user_id":397010,"accept_rate":74,"display_name":"Jon"},"score":0,"creation_date":1523899082,"post_id":18791682,"comment_id":86740896,"body_markdown":"Note that the criteria API has a Projections.countDistinct(). If you use that it will give the correct behavior with a lot less code. I think you can use crit.setProjection(Projections.countDistinct(&quot;user&quot;));","body":"Note that the criteria API has a Projections.countDistinct(). If you use that it will give the correct behavior with a lot less code. I think you can use crit.setProjection(Projections.countDistinct(&quot;user&quot;));"}],"tags":[],"owner":{"account_id":974448,"reputation":3435,"user_id":2042457,"accept_rate":56,"display_name":"aksappy"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379092114,"creation_date":1379092114,"answer_id":18791682,"question_id":18791580,"body_markdown":"This is how to do in Hibernate Criteria \r\n\r\n    Criteria crit = session.createCriteria(Rating.class)\r\n    .add(Restrictions.like(&quot;item&quot;, item)\r\n    .addOrder(Order.asc(&quot;user&quot;))\r\n    .setProjection(\r\n           Projections.distinct(Projections.projectionList()\r\n                            .add(Projections.property(&quot;user&quot;), &quot;user&quot;)))\r\n    .setResultTransformer(Transformers.aliasToBean(Rating.class));","title":"Hibernate HQL Count Distinct not working?","body":"<p>This is how to do in Hibernate Criteria </p>\n\n<pre><code>Criteria crit = session.createCriteria(Rating.class)\n.add(Restrictions.like(\"item\", item)\n.addOrder(Order.asc(\"user\"))\n.setProjection(\n       Projections.distinct(Projections.projectionList()\n                        .add(Projections.property(\"user\"), \"user\")))\n.setResultTransformer(Transformers.aliasToBean(Rating.class));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3576183,"reputation":8143,"user_id":2985377,"accept_rate":75,"display_name":"Jason D"},"score":1,"creation_date":1418661769,"post_id":18792677,"comment_id":43409224,"body_markdown":"It&#39;s really strange that the extra parens inside of the count on the distinct cause it to fail with a syntax error. This is the correct fix. Certainly saved me tons of time.","body":"It&#39;s really strange that the extra parens inside of the count on the distinct cause it to fail with a syntax error. This is the correct fix. Certainly saved me tons of time."}],"tags":[],"owner":{"account_id":2340572,"reputation":49545,"user_id":2051952,"display_name":"dmahapatro"},"comment_count":1,"down_vote_count":0,"up_vote_count":46,"is_accepted":true,"score":46,"last_activity_date":1432070813,"creation_date":1379096051,"answer_id":18792677,"question_id":18791580,"body_markdown":"Your query should work as expected with a minor modification to the way you use `distinct`:\r\n\r\n    select count(distinct r.user) from Rating as r \r\n    where r.item = :item group by r.user\r\nAn other, but more lengthy way, of doing this query is by using `User` and `join`: \r\n\r\n    select count(distinct u) from User as u \r\n    inner join u.ratings as r where r.item = :item\r\n    group by r.user\r\n\r\n","title":"Hibernate HQL Count Distinct not working?","body":"<p>Your query should work as expected with a minor modification to the way you use <code>distinct</code>:</p>\n\n<pre><code>select count(distinct r.user) from Rating as r \nwhere r.item = :item group by r.user\n</code></pre>\n\n<p>An other, but more lengthy way, of doing this query is by using <code>User</code> and <code>join</code>: </p>\n\n<pre><code>select count(distinct u) from User as u \ninner join u.ratings as r where r.item = :item\ngroup by r.user\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8212780,"reputation":173,"user_id":6180243,"display_name":"iamfnizami"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683635627,"creation_date":1683635627,"answer_id":76209417,"question_id":18791580,"body_markdown":"Use distinct as keyword not function, inside count function like-\r\n\r\n    count(distinct column) : Works\r\n\r\n    count(distinct(column)): Doesn&#39;t work","title":"Hibernate HQL Count Distinct not working?","body":"<p>Use distinct as keyword not function, inside count function like-</p>\n<pre><code>count(distinct column) : Works\n\ncount(distinct(column)): Doesn't work\n</code></pre>\n"}],"owner":{"account_id":1051966,"reputation":32747,"user_id":1055664,"accept_rate":57,"display_name":"Michael"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24632,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":18792677,"answer_count":3,"score":19,"last_activity_date":1683635627,"creation_date":1379091717,"question_id":18791580,"body_markdown":"I have the following classes: \r\n\r\n    class User {\r\n      hasMany = [ratings: Rating] \r\n    } \r\n    \r\n    class Item {\r\n     hasMany = [ratings: Rating]\r\n    }\r\n    \r\n    class Rating {\r\n     belongsTo = [user: User, item: Item]\r\n    }\r\n\r\nI want to count the distinct users that rated on an item.\r\n\r\nThe following does not work: \r\n\r\n    select count(distinct(r.user)) from Rating as r\r\n    \t\twhere r.item=:item\r\n    \t\tgroup by r.user\r\n\r\n**How do I have to modify the HQL query to make it work?**","title":"Hibernate HQL Count Distinct not working?","body":"<p>I have the following classes: </p>\n\n<pre><code>class User {\n  hasMany = [ratings: Rating] \n} \n\nclass Item {\n hasMany = [ratings: Rating]\n}\n\nclass Rating {\n belongsTo = [user: User, item: Item]\n}\n</code></pre>\n\n<p>I want to count the distinct users that rated on an item.</p>\n\n<p>The following does not work: </p>\n\n<pre><code>select count(distinct(r.user)) from Rating as r\n        where r.item=:item\n        group by r.user\n</code></pre>\n\n<p><strong>How do I have to modify the HQL query to make it work?</strong></p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1683631570,"post_id":76208796,"comment_id":134393088,"body_markdown":"Backslash is the escape character for json as well, so `\\&quot;` will result in escaped double quotes. You&#39;d need to escape the backslash though so use `&quot;C:\\\\&quot;`.","body":"Backslash is the escape character for json as well, so <code>\\&quot;</code> will result in escaped double quotes. You&#39;d need to escape the backslash though so use <code>&quot;C:\\\\&quot;</code>."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1683631645,"post_id":76208796,"comment_id":134393105,"body_markdown":"Btw, &quot;I think the problem is ...&quot; isn&#39;t going to help. You might be correct but if you&#39;re asking here you should include more details on the error, e.g. messages, stack traces etc. so we can check for ourselves.","body":"Btw, &quot;I think the problem is ...&quot; isn&#39;t going to help. You might be correct but if you&#39;re asking here you should include more details on the error, e.g. messages, stack traces etc. so we can check for ourselves."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":4,"creation_date":1683632256,"post_id":76208796,"comment_id":134393252,"body_markdown":"Ideally the data going to the database would be legal JSON in the first place.","body":"Ideally the data going to the database would be legal JSON in the first place."},{"owner":{"account_id":221272,"reputation":6281,"user_id":479156,"accept_rate":92,"display_name":"Ivar"},"score":3,"creation_date":1683632341,"post_id":76208796,"comment_id":134393274,"body_markdown":"I&#39;d advice you to use a proper JSON serializer to generate the JSON that you store in the database. A proper serializer shouldn&#39;t generate invalid JSON.","body":"I&#39;d advice you to use a proper JSON serializer to generate the JSON that you store in the database. A proper serializer shouldn&#39;t generate invalid JSON."},{"owner":{"account_id":10502604,"reputation":2690,"user_id":7740888,"accept_rate":100,"display_name":"Code4R7"},"score":0,"creation_date":1683644094,"post_id":76208796,"comment_id":134396303,"body_markdown":"I&#39;ve found this validator service helpful in the past: https://jsonformatter.curiousconcept.com","body":"I&#39;ve found this validator service helpful in the past: <a href=\"https://jsonformatter.curiousconcept.com\" rel=\"nofollow noreferrer\">jsonformatter.curiousconcept.com</a>"}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683632067,"creation_date":1683632067,"answer_id":76208877,"question_id":76208796,"body_markdown":"Because of incorrectly using the escape character the input JSON is invalid. The correct way to represent the backlash character in a JSON string is escaping it: `&quot;C:\\\\&quot;`","title":"Error trying to parse json string with backslash","body":"<p>Because of incorrectly using the escape character the input JSON is invalid. The correct way to represent the backlash character in a JSON string is escaping it: <code>&quot;C:\\\\&quot;</code></p>\n"},{"comments":[{"owner":{"account_id":19638455,"reputation":71,"user_id":14375184,"display_name":"Liran_T"},"score":0,"creation_date":1683641572,"post_id":76209403,"comment_id":134395601,"body_markdown":"that&#39;s sucks to hear, but I really do appreciate detailed answer. Thanks.","body":"that&#39;s sucks to hear, but I really do appreciate detailed answer. Thanks."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1683635515,"creation_date":1683635515,"answer_id":76209403,"question_id":76208796,"body_markdown":"The string in the database means you already &#39;lost&#39;. Because that looks like JSON but it is not. Had it been correct JSON, It&#39;d have read `C:\\\\`. Given that you&#39;ve now arrived at a broken location, __you can no longer fix it from here__ - you need to go to whatever made that string appear in the database and fix it _there_. If you&#39;ve already got millions of such strings in your db and you can&#39;t go back, then you&#39;re in some trouble and need to start thinking about an AI-like rules-based system that tries to figure out what those strings were intended to represent, which is extremely complicated.\r\n\r\nIf you know for certain that every backslash in these strings is necessarily a real backslash (and not an escape character), _which therefore implies no strings in your entire DB could possibly contain an actual quote - because if they do, how are those escaped then?_ - you could simply execute `UPDATE thatTable SET thatColumn = REPLACE(thatColumn, &#39;\\&#39;, &#39;\\\\&#39;);` and that&#39;ll fix it. Which still means you need to fully address the problematic situation that caused you your current predicament - so read on either way.\r\n\r\nYou&#39;d have to paste the code of whatever `INSERT`ed this data if you need help _there_. A few notes on that:\r\n\r\n* Don&#39;t make JSON by just appending characters to a stringbuilder or similar. Use an actual JSON library. Why, you might ask - JSON is so simple, why bother? Well, __this__ - this very question is exhibit A in why it&#39;s a really really bad idea to handroll even seemingly very simple formats. Formats almost invariably have hidden tricky aspects to it, and a library explicitly designed to produce the format in question tends to do it right, where handroll code does not. For java, there&#39;s [a ton of libraries you can use](https://javarevisited.blogspot.com/2016/09/top-5-json-library-in-java-JEE.html) - any of those 5 can do the job.\r\n\r\n* Some databases, including notably postgres, have native support for JSON columns. They have operators and functions baked in so you can e.g. select all rows with a totalbytes less than 4 billion, or whatever. Storing raw binary data in databases when it is feasible to directly store the underlying data is virtually always a mistake, because one day somebody somewhere designs a feature that requires that you query on the content within that JSON string, and if you then start writing, in DB queries, some sort of SUBSTR/LEFT/RIGHT/~ (regexp) string manipulation you just get stuck further and further, as JSON is far too complex to try to parse in such a fashion. I would very very very strongly reconsider how you are storing this stuff - you should either be storing this in a JSON column instead of a VARCHAR one, or, have a column named &#39;MountPoint&#39;, a column named &#39;FreeSpace&#39;, and so on (that would be even better). Or, you should be using mangodb or some sort document DB (vs. this, which is a relational DB). Usually that adds up to more trouble than its worth, but it&#39;s __definitely__ vastly superior to storing JSON in VARCHARs in a relational DB - that is the worst of both worlds!\r\n","title":"Error trying to parse json string with backslash","body":"<p>The string in the database means you already 'lost'. Because that looks like JSON but it is not. Had it been correct JSON, It'd have read <code>C:\\\\</code>. Given that you've now arrived at a broken location, <strong>you can no longer fix it from here</strong> - you need to go to whatever made that string appear in the database and fix it <em>there</em>. If you've already got millions of such strings in your db and you can't go back, then you're in some trouble and need to start thinking about an AI-like rules-based system that tries to figure out what those strings were intended to represent, which is extremely complicated.</p>\n<p>If you know for certain that every backslash in these strings is necessarily a real backslash (and not an escape character), <em>which therefore implies no strings in your entire DB could possibly contain an actual quote - because if they do, how are those escaped then?</em> - you could simply execute <code>UPDATE thatTable SET thatColumn = REPLACE(thatColumn, '\\', '\\\\');</code> and that'll fix it. Which still means you need to fully address the problematic situation that caused you your current predicament - so read on either way.</p>\n<p>You'd have to paste the code of whatever <code>INSERT</code>ed this data if you need help <em>there</em>. A few notes on that:</p>\n<ul>\n<li><p>Don't make JSON by just appending characters to a stringbuilder or similar. Use an actual JSON library. Why, you might ask - JSON is so simple, why bother? Well, <strong>this</strong> - this very question is exhibit A in why it's a really really bad idea to handroll even seemingly very simple formats. Formats almost invariably have hidden tricky aspects to it, and a library explicitly designed to produce the format in question tends to do it right, where handroll code does not. For java, there's <a href=\"https://javarevisited.blogspot.com/2016/09/top-5-json-library-in-java-JEE.html\" rel=\"nofollow noreferrer\">a ton of libraries you can use</a> - any of those 5 can do the job.</p>\n</li>\n<li><p>Some databases, including notably postgres, have native support for JSON columns. They have operators and functions baked in so you can e.g. select all rows with a totalbytes less than 4 billion, or whatever. Storing raw binary data in databases when it is feasible to directly store the underlying data is virtually always a mistake, because one day somebody somewhere designs a feature that requires that you query on the content within that JSON string, and if you then start writing, in DB queries, some sort of SUBSTR/LEFT/RIGHT/~ (regexp) string manipulation you just get stuck further and further, as JSON is far too complex to try to parse in such a fashion. I would very very very strongly reconsider how you are storing this stuff - you should either be storing this in a JSON column instead of a VARCHAR one, or, have a column named 'MountPoint', a column named 'FreeSpace', and so on (that would be even better). Or, you should be using mangodb or some sort document DB (vs. this, which is a relational DB). Usually that adds up to more trouble than its worth, but it's <strong>definitely</strong> vastly superior to storing JSON in VARCHARs in a relational DB - that is the worst of both worlds!</p>\n</li>\n</ul>\n"}],"owner":{"account_id":19638455,"reputation":71,"user_id":14375184,"display_name":"Liran_T"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1683635515,"creation_date":1683631483,"question_id":76208796,"body_markdown":"I have the following string (character varying) in my database: \r\n```\r\n[{&quot;MountPoint&quot;:&quot;C:\\&quot;,&quot;FreeSpace&quot;:&quot;18 GB&quot;,&quot;TotalCapacity&quot;:&quot;39 GB&quot;,&quot;TotalBytes&quot;:42580570112,&quot;FreeBytes&quot;:19708321792}]\r\n```\r\nIt is added as is to a java JSONObject than sent to the client where it failed to parse to a javascript array of objects. \r\nWhat I get in the browser network is: \r\n```\r\n&quot;[{\\&quot;MountPoint\\&quot;:\\&quot;C:\\\\\\&quot;,\\&quot;FreeSpace\\&quot;:\\&quot;18 GB\\&quot;,\\&quot;TotalCapacity\\&quot;:\\&quot;39 GB\\&quot;,\\&quot;TotalBytes\\&quot;:42580570112,\\&quot;FreeBytes\\&quot;:19708321792}]&quot;\r\n```\r\nand trying to parse it in console using JSON.parse raises error:\r\n\r\ncaught SyntaxError: Expected &#39;,&#39; or &#39;}&#39; after property value in JSON at position 23\r\n    at JSON.parse (&lt;anonymous&gt;)\r\n    at &lt;anonymous&gt;:1:6\r\n\r\nTrying to add backslash or parse and stringify again didn&#39;t worked. Any idea how can it be fixed?","title":"Error trying to parse json string with backslash","body":"<p>I have the following string (character varying) in my database:</p>\n<pre><code>[{&quot;MountPoint&quot;:&quot;C:\\&quot;,&quot;FreeSpace&quot;:&quot;18 GB&quot;,&quot;TotalCapacity&quot;:&quot;39 GB&quot;,&quot;TotalBytes&quot;:42580570112,&quot;FreeBytes&quot;:19708321792}]\n</code></pre>\n<p>It is added as is to a java JSONObject than sent to the client where it failed to parse to a javascript array of objects.\nWhat I get in the browser network is:</p>\n<pre><code>&quot;[{\\&quot;MountPoint\\&quot;:\\&quot;C:\\\\\\&quot;,\\&quot;FreeSpace\\&quot;:\\&quot;18 GB\\&quot;,\\&quot;TotalCapacity\\&quot;:\\&quot;39 GB\\&quot;,\\&quot;TotalBytes\\&quot;:42580570112,\\&quot;FreeBytes\\&quot;:19708321792}]&quot;\n</code></pre>\n<p>and trying to parse it in console using JSON.parse raises error:</p>\n<p>caught SyntaxError: Expected ',' or '}' after property value in JSON at position 23\nat JSON.parse ()\nat :1:6</p>\n<p>Trying to add backslash or parse and stringify again didn't worked. Any idea how can it be fixed?</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux"],"comments":[{"owner":{"account_id":3656032,"reputation":2735,"user_id":3047038,"display_name":"Michael McFadyen"},"score":0,"creation_date":1644413638,"post_id":71040168,"comment_id":125599845,"body_markdown":"you should just need to move the `defaultIfEmpty` to be after `flatMap` to get the desired behaviour. In the case of `findById` returning an empty mono, you are returning a 404 `ResponseEntity` and then `flatMapping` it to a 204 `ResponseEntity`","body":"you should just need to move the <code>defaultIfEmpty</code> to be after <code>flatMap</code> to get the desired behaviour. In the case of <code>findById</code> returning an empty mono, you are returning a 404 <code>ResponseEntity</code> and then <code>flatMapping</code> it to a 204 <code>ResponseEntity</code>"}],"answers":[{"tags":[],"owner":{"account_id":20958742,"reputation":19,"user_id":15398639,"display_name":"J&#246;rn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644665777,"creation_date":1644353173,"answer_id":71040670,"question_id":71040168,"body_markdown":"After some more research I found a solution:\r\n\r\n```java\r\n  @DeleteMapping(&quot;/{id}&quot;)\r\n  @ResponseStatus(HttpStatus.NO_CONTENT)\r\n  public Mono&lt;ResponseEntity&lt;Void&gt;&gt; deletePet(@PathVariable String id) {\r\n    return petRepository.findById(id)\r\n      .defaultIfEmpty(new Pet())\r\n      .flatMap(pet -&gt; {\r\n        if (null == pet.id) {\r\n          return Mono.just(new ResponseEntity&lt;Void&gt;(HttpStatus.NOT_FOUND));\r\n        }\r\n        else {\r\n          return petRepository.deleteById(id)\r\n            .map(v -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT));\r\n        }\r\n      });\r\n  }\r\n```\r\n\r\nNow an empty Pet object is created when `findById()` gives an empty\r\nresult using `defaultIfEmpty()`.\r\n\r\nSo the `flatMap()` gets either the Pet for the given ID or an empty\r\nPet. The latter is recognized by the fact that the id property is null\r\nwhich is turned into a 404 response. In the other case the Pet is\r\ndeleted and 204 is returned. But note, that the `.map()` there isn&#39;t executed because of the empty `deleteById()` result. It&#39;s just necessary to satisfy the generic interface here. The 204 comes from the `@ResponseStatus` annotation.\r\n\r\nSo this is a possible solution - but it looks not very elegant to me (creating an empty Pet and having this no-op `deleteById().map()`).\r\n\r\nIf there is a better way to do this, please give your answer here.\r\n","title":"Give 404 response on DELETE in restful Spring Boot Reactive Controller","body":"<p>After some more research I found a solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @DeleteMapping(&quot;/{id}&quot;)\n  @ResponseStatus(HttpStatus.NO_CONTENT)\n  public Mono&lt;ResponseEntity&lt;Void&gt;&gt; deletePet(@PathVariable String id) {\n    return petRepository.findById(id)\n      .defaultIfEmpty(new Pet())\n      .flatMap(pet -&gt; {\n        if (null == pet.id) {\n          return Mono.just(new ResponseEntity&lt;Void&gt;(HttpStatus.NOT_FOUND));\n        }\n        else {\n          return petRepository.deleteById(id)\n            .map(v -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT));\n        }\n      });\n  }\n</code></pre>\n<p>Now an empty Pet object is created when <code>findById()</code> gives an empty\nresult using <code>defaultIfEmpty()</code>.</p>\n<p>So the <code>flatMap()</code> gets either the Pet for the given ID or an empty\nPet. The latter is recognized by the fact that the id property is null\nwhich is turned into a 404 response. In the other case the Pet is\ndeleted and 204 is returned. But note, that the <code>.map()</code> there isn't executed because of the empty <code>deleteById()</code> result. It's just necessary to satisfy the generic interface here. The 204 comes from the <code>@ResponseStatus</code> annotation.</p>\n<p>So this is a possible solution - but it looks not very elegant to me (creating an empty Pet and having this no-op <code>deleteById().map()</code>).</p>\n<p>If there is a better way to do this, please give your answer here.</p>\n"},{"comments":[{"owner":{"account_id":20958742,"reputation":19,"user_id":15398639,"display_name":"J&#246;rn"},"score":0,"creation_date":1644503920,"post_id":71050579,"comment_id":125628580,"body_markdown":"Thanks for your answer, Michael. Unfortunately this does not work for me :(. I get 404 in both cases even when it deletes an existent Pet. Obviously the `defaultIsEmpty()` is triggered because `petRepository.deleteById()` (and in turn `flatMap()` too) returns an empty Mono.","body":"Thanks for your answer, Michael. Unfortunately this does not work for me :(. I get 404 in both cases even when it deletes an existent Pet. Obviously the <code>defaultIsEmpty()</code> is triggered because <code>petRepository.deleteById()</code> (and in turn <code>flatMap()</code> too) returns an empty Mono."},{"owner":{"account_id":3656032,"reputation":2735,"user_id":3047038,"display_name":"Michael McFadyen"},"score":0,"creation_date":1644670488,"post_id":71050579,"comment_id":125671169,"body_markdown":"Ah sorry, was not aware that `petRepository.deleteById()` was returning an empty Mono on success cases","body":"Ah sorry, was not aware that <code>petRepository.deleteById()</code> was returning an empty Mono on success cases"}],"tags":[],"owner":{"account_id":3656032,"reputation":2735,"user_id":3047038,"display_name":"Michael McFadyen"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644413893,"creation_date":1644413893,"answer_id":71050579,"question_id":71040168,"body_markdown":"When `findById` returns an empty `Mono`, the code below will **not** executed either `map` or `flatMap` and will only return the value from `defaultIfEmpty`\r\n```java\r\n @DeleteMapping(&quot;/{id}&quot;)\r\n  public Mono&lt;ResponseEntity&lt;Void&gt;&gt; deletePet(@PathVariable String id) {\r\n    return petRepository.findById(id)\r\n      .map(pet1 -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT))\r\n      .flatMap(res -&gt; {\r\n        return petRepository.deleteById(id)\r\n          .map(v -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT));\r\n      })\r\n      .defaultIfEmpty(new ResponseEntity&lt;Void&gt;(HttpStatus.NOT_FOUND));\r\n  }\r\n```\r\n\r\nAlso, your understanding as to why this happens in your code snippet is correct.","title":"Give 404 response on DELETE in restful Spring Boot Reactive Controller","body":"<p>When <code>findById</code> returns an empty <code>Mono</code>, the code below will <strong>not</strong> executed either <code>map</code> or <code>flatMap</code> and will only return the value from <code>defaultIfEmpty</code></p>\n<pre class=\"lang-java prettyprint-override\"><code> @DeleteMapping(&quot;/{id}&quot;)\n  public Mono&lt;ResponseEntity&lt;Void&gt;&gt; deletePet(@PathVariable String id) {\n    return petRepository.findById(id)\n      .map(pet1 -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT))\n      .flatMap(res -&gt; {\n        return petRepository.deleteById(id)\n          .map(v -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT));\n      })\n      .defaultIfEmpty(new ResponseEntity&lt;Void&gt;(HttpStatus.NOT_FOUND));\n  }\n</code></pre>\n<p>Also, your understanding as to why this happens in your code snippet is correct.</p>\n"},{"tags":[],"owner":{"account_id":14598037,"reputation":1253,"user_id":10543130,"display_name":"usersina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683635454,"creation_date":1683635454,"answer_id":76209397,"question_id":71040168,"body_markdown":"Not as good as the above answers but I kept getting type errors trying them out so here&#39;s a more verbose approach:\r\n\r\n```java\r\n@DeleteMapping(&quot;/{id}&quot;)\r\npublic ResponseEntity&lt;?&gt; deletePet(@PathVariable(value = &quot;id&quot;) String id) {\r\n    log.info(&quot;Deleting pet with id: {}&quot;, id);\r\n    Pet pet = petRepository.findById(id)\r\n                .orElseThrow(() -&gt; new ResponseStatusException(HttpStatus.NOT_FOUND,\r\n                    &quot;Pet with the specified id is not found&quot;));\r\n    petRepository.delete(pet);\r\n    return ResponseEntity.status(HttpStatus.OK).build();\r\n}\r\n```","title":"Give 404 response on DELETE in restful Spring Boot Reactive Controller","body":"<p>Not as good as the above answers but I kept getting type errors trying them out so here's a more verbose approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@DeleteMapping(&quot;/{id}&quot;)\npublic ResponseEntity&lt;?&gt; deletePet(@PathVariable(value = &quot;id&quot;) String id) {\n    log.info(&quot;Deleting pet with id: {}&quot;, id);\n    Pet pet = petRepository.findById(id)\n                .orElseThrow(() -&gt; new ResponseStatusException(HttpStatus.NOT_FOUND,\n                    &quot;Pet with the specified id is not found&quot;));\n    petRepository.delete(pet);\n    return ResponseEntity.status(HttpStatus.OK).build();\n}\n</code></pre>\n"}],"owner":{"account_id":20958742,"reputation":19,"user_id":15398639,"display_name":"J&#246;rn"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1383,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1683635454,"creation_date":1644350407,"question_id":71040168,"body_markdown":"I am fairly new to Java and Spring Boot (coming from TypeScript) and\r\nexperimenting with a small restful CRUD Controller using the\r\nreactive Spring Boot API.\r\n\r\nThere are many tutorials and examples out there but they all lack\r\nproper response statuses, e.g. giving a 404 on DELETE when the\r\nresource doesn&#39;t exist.\r\n\r\nWhat I like to achieve is a DELETE handler which\r\n\r\n* returns &quot;204 No Content&quot; if the resource existed and was deleted successfully\r\n* returns &quot;404 Not found&quot; if the resource doesn&#39;t exist\r\n\r\nA simple &quot;I don&#39;t care about HTTP status&quot; DELETE handler\r\nlooks like this:\r\n\r\n```java\r\n  @DeleteMapping(&quot;/{id}&quot;)\r\n  public Mono&lt;Void&gt; deletePet(@PathVariable String id) {\r\n    return petRepository.deleteById(id);\r\n  }\r\n```\r\n\r\nThis always gives status 200, even when there is no Pet for this ID.\r\n\r\nI tried to use `petRepository.findById(id)` and `.defaultIfEmpty()`\r\nin several ways to catch the 404 case, but without luck. E.g. with\r\nthis implementation I am getting always 204:\r\n\r\n```java\r\n  @DeleteMapping(&quot;/{id}&quot;)\r\n  public Mono&lt;ResponseEntity&lt;Void&gt;&gt; deletePet(@PathVariable String id) {\r\n    return petRepository.findById(id)\r\n      .map(pet1 -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT))\r\n      .defaultIfEmpty(new ResponseEntity&lt;Void&gt;(HttpStatus.NOT_FOUND))\r\n      .flatMap(res -&gt; {\r\n        return petRepository.deleteById(id)\r\n          .map(v -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT));\r\n      });\r\n  }\r\n```\r\n\r\nI think I understand why this isn&#39;t working, because after the .defaultIfEmpty()\r\nthe Mono isn&#39;t empty anymore and the .flatMap will have something to work\r\non (the 404 response) so the deleteById() is executed. This returns an (obviously)\r\nnon empty Mono&lt;Void&gt; as well, so the status turns into NO_CONTENT again.\r\n\r\nBut all my (many) attempts to change this failed so I hope anyone has the right\r\nsolution for this problem.\r\n\r\nThanks! :)\r\n","title":"Give 404 response on DELETE in restful Spring Boot Reactive Controller","body":"<p>I am fairly new to Java and Spring Boot (coming from TypeScript) and\nexperimenting with a small restful CRUD Controller using the\nreactive Spring Boot API.</p>\n<p>There are many tutorials and examples out there but they all lack\nproper response statuses, e.g. giving a 404 on DELETE when the\nresource doesn't exist.</p>\n<p>What I like to achieve is a DELETE handler which</p>\n<ul>\n<li>returns &quot;204 No Content&quot; if the resource existed and was deleted successfully</li>\n<li>returns &quot;404 Not found&quot; if the resource doesn't exist</li>\n</ul>\n<p>A simple &quot;I don't care about HTTP status&quot; DELETE handler\nlooks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @DeleteMapping(&quot;/{id}&quot;)\n  public Mono&lt;Void&gt; deletePet(@PathVariable String id) {\n    return petRepository.deleteById(id);\n  }\n</code></pre>\n<p>This always gives status 200, even when there is no Pet for this ID.</p>\n<p>I tried to use <code>petRepository.findById(id)</code> and <code>.defaultIfEmpty()</code>\nin several ways to catch the 404 case, but without luck. E.g. with\nthis implementation I am getting always 204:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @DeleteMapping(&quot;/{id}&quot;)\n  public Mono&lt;ResponseEntity&lt;Void&gt;&gt; deletePet(@PathVariable String id) {\n    return petRepository.findById(id)\n      .map(pet1 -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT))\n      .defaultIfEmpty(new ResponseEntity&lt;Void&gt;(HttpStatus.NOT_FOUND))\n      .flatMap(res -&gt; {\n        return petRepository.deleteById(id)\n          .map(v -&gt; new ResponseEntity&lt;Void&gt;(HttpStatus.NO_CONTENT));\n      });\n  }\n</code></pre>\n<p>I think I understand why this isn't working, because after the .defaultIfEmpty()\nthe Mono isn't empty anymore and the .flatMap will have something to work\non (the 404 response) so the deleteById() is executed. This returns an (obviously)\nnon empty Mono as well, so the status turns into NO_CONTENT again.</p>\n<p>But all my (many) attempts to change this failed so I hope anyone has the right\nsolution for this problem.</p>\n<p>Thanks! :)</p>\n"},{"tags":["java","http","spring-mvc","character-encoding","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":28536405,"reputation":11,"user_id":21843067,"display_name":"Blc Dragon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683635209,"creation_date":1683635209,"answer_id":76209356,"question_id":76194258,"body_markdown":"Solved it  \r\nSolution is set thymeleaf&#39;s content type\r\n```\r\n@Override\r\n    public void configureViewResolvers(ViewResolverRegistry registry) {\r\n        ThymeleafViewResolver resolver = new ThymeleafViewResolver();\r\n        resolver.setTemplateEngine(templateEngine());\r\n        resolver.setContentType(&quot;text/html; charset=UTF-8&quot;);\r\n        resolver.setCharacterEncoding(&quot;UTF-8&quot;);\r\n        registry.viewResolver(resolver);\r\n    }\r\n```","title":"Spring MVC with Tomcat UTF-8 encoding","body":"<p>Solved it<br />\nSolution is set thymeleaf's content type</p>\n<pre><code>@Override\n    public void configureViewResolvers(ViewResolverRegistry registry) {\n        ThymeleafViewResolver resolver = new ThymeleafViewResolver();\n        resolver.setTemplateEngine(templateEngine());\n        resolver.setContentType(&quot;text/html; charset=UTF-8&quot;);\n        resolver.setCharacterEncoding(&quot;UTF-8&quot;);\n        registry.viewResolver(resolver);\n    }\n</code></pre>\n"}],"owner":{"account_id":28536405,"reputation":11,"user_id":21843067,"display_name":"Blc Dragon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683635209,"creation_date":1683466586,"question_id":76194258,"body_markdown":"At the moment I&#39;m trying to get started with Spring MVC.\r\nSomething wrong with my encoding.\r\n\r\n\r\nEvery time response header is:\r\n`Content-Type: text/html;charset=ISO-8859-1`, so all non-ASCII characters appear as `?`.\r\n\r\nAlso I try not to use any config files, all config is programmly\r\n\r\nI tried:  \r\n1. Add `CharacterEncodingFilter` in my `ConfigDispatcherServletInitializer`\r\n\r\n```\r\n@Override\r\nprotected Filter[] getServletFilters() {\r\n   //if encoding has issues we need to add UTF-8 encoding filter\r\n   CharacterEncodingFilter encodingFilter = new CharacterEncodingFilter();\r\n   encodingFilter.setForceEncoding(true);\r\n   encodingFilter.setEncoding(&quot;UTF-8&quot;);\r\n   //encoding filter must be the first one\r\n   return new Filter[]{encodingFilter,\r\n       new DelegatingFilterProxy(&quot;springSecurityFilterChain&quot;),\r\n    };\r\n}\r\n```\r\nIn my `WebMvcConfigurer`:  \r\n2. configure message converter\r\n\r\n```\r\n@Override\r\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n        converters.add(0, new StringHttpMessageConverter(StandardCharsets.UTF_8));\r\n    }\r\n```\r\n3. add message converter bean\r\n\r\n```\r\n @Bean\r\n    public StringHttpMessageConverter stringHttpMessageConverter() {\r\n        return new StringHttpMessageConverter(StandardCharsets.UTF_8);\r\n    }\r\n```\r\n4. setup thymeleaf ViewResolver&#39;s encoding\r\n\r\n```\r\nresolver.setCharacterEncoding(&quot;UTF-8&quot;);\r\n```\r\n\r\nIn my `WebSecurityConfigurerAdapter`  \r\n5. add encoding filter\r\n\r\n```\r\nhttp.addFilterBefore(new CharacterEncodingFilter(&quot;UTF-8&quot;, true, true), ChannelProcessingFilter.class);\r\n```\r\n\r\nI also tried add VM option `-Dfile.encoding=UTF-8` in my tomcat run configuration\r\n\r\nNothing works for me, responce header charset is `ISO-8859-1`\r\n\r\nAll files encoding is `UTF-8`, Intellij Idea option &quot;Default encoding for options file&quot; also is `UTF-8`  \r\nmaven compiler encoding property:  \r\n`&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;`  \r\nAll my html files has this meta tag line for encoding.  \r\n`&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;`\r\n\r\ntomcat version is 9.0.74, JDK is v11, spring version 5.3.27\r\n","title":"Spring MVC with Tomcat UTF-8 encoding","body":"<p>At the moment I'm trying to get started with Spring MVC.\nSomething wrong with my encoding.</p>\n<p>Every time response header is:\n<code>Content-Type: text/html;charset=ISO-8859-1</code>, so all non-ASCII characters appear as <code>?</code>.</p>\n<p>Also I try not to use any config files, all config is programmly</p>\n<p>I tried:</p>\n<ol>\n<li>Add <code>CharacterEncodingFilter</code> in my <code>ConfigDispatcherServletInitializer</code></li>\n</ol>\n<pre><code>@Override\nprotected Filter[] getServletFilters() {\n   //if encoding has issues we need to add UTF-8 encoding filter\n   CharacterEncodingFilter encodingFilter = new CharacterEncodingFilter();\n   encodingFilter.setForceEncoding(true);\n   encodingFilter.setEncoding(&quot;UTF-8&quot;);\n   //encoding filter must be the first one\n   return new Filter[]{encodingFilter,\n       new DelegatingFilterProxy(&quot;springSecurityFilterChain&quot;),\n    };\n}\n</code></pre>\n<p>In my <code>WebMvcConfigurer</code>:<br />\n2. configure message converter</p>\n<pre><code>@Override\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        converters.add(0, new StringHttpMessageConverter(StandardCharsets.UTF_8));\n    }\n</code></pre>\n<ol start=\"3\">\n<li>add message converter bean</li>\n</ol>\n<pre><code> @Bean\n    public StringHttpMessageConverter stringHttpMessageConverter() {\n        return new StringHttpMessageConverter(StandardCharsets.UTF_8);\n    }\n</code></pre>\n<ol start=\"4\">\n<li>setup thymeleaf ViewResolver's encoding</li>\n</ol>\n<pre><code>resolver.setCharacterEncoding(&quot;UTF-8&quot;);\n</code></pre>\n<p>In my <code>WebSecurityConfigurerAdapter</code><br />\n5. add encoding filter</p>\n<pre><code>http.addFilterBefore(new CharacterEncodingFilter(&quot;UTF-8&quot;, true, true), ChannelProcessingFilter.class);\n</code></pre>\n<p>I also tried add VM option <code>-Dfile.encoding=UTF-8</code> in my tomcat run configuration</p>\n<p>Nothing works for me, responce header charset is <code>ISO-8859-1</code></p>\n<p>All files encoding is <code>UTF-8</code>, Intellij Idea option &quot;Default encoding for options file&quot; also is <code>UTF-8</code><br />\nmaven compiler encoding property:<br />\n<code>&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</code><br />\nAll my html files has this meta tag line for encoding.<br />\n<code>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;</code></p>\n<p>tomcat version is 9.0.74, JDK is v11, spring version 5.3.27</p>\n"},{"tags":["java","hash","signature","der","keccak"],"comments":[{"owner":{"account_id":27096767,"reputation":1,"user_id":20643904,"display_name":"Chico Rico"},"score":0,"creation_date":1683635022,"post_id":74626748,"comment_id":134393967,"body_markdown":"In Fact, each provider decide the header for Keccak 384 has it&#39;i not a RFC.","body":"In Fact, each provider decide the header for Keccak 384 has it&#39;i not a RFC."}],"answers":[{"tags":[],"owner":{"account_id":27096767,"reputation":1,"user_id":20643904,"display_name":"Chico Rico"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683635132,"creation_date":1683635106,"answer_id":76209340,"question_id":74626748,"body_markdown":"In Fact, each provider decide the header for Keccak 384 as it&#39;s not in a RFC.","title":"How to make &quot;MessageDigest KECCAK-384 and Signature NONEwithRSA&quot;","body":"<p>In Fact, each provider decide the header for Keccak 384 as it's not in a RFC.</p>\n"}],"owner":{"account_id":27096767,"reputation":1,"user_id":20643904,"display_name":"Chico Rico"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76209340,"answer_count":1,"score":0,"last_activity_date":1683635132,"creation_date":1669806358,"question_id":74626748,"body_markdown":"I would like to apply a KECCAK-384 hash with an RSA signature to some data, but I need to do it in two steps - apply the hash first and then sign the data. \r\n\r\nThe `Signature.sign()` function appears to need the right digest DER data structure to sign correctly.\r\n\r\nHow can I make the two equivalents without using any external libraries like BouncyCastle?\r\n\r\nWith `SHA3-384` it&#39;s ok (as there is an OID) but for `KECCAK-384`, I didn&#39;t find the right way as there is no OID.\r\n\r\nRegards,\r\n\r\nFor SHA3-384 it&#39;s ok :\r\n\r\n```\r\nSignature signEng1= Signature.getInstance(&quot;NoneWithRSA&quot;);\r\nsignEng1.initSign(rsaKeyPair.getPrivate());\r\nsignEng1.update(digestinfo);\r\nsignEng1.update(hashToSign);\r\nbyte[] sig1= signEng1.sign();\r\n```","title":"How to make &quot;MessageDigest KECCAK-384 and Signature NONEwithRSA&quot;","body":"<p>I would like to apply a KECCAK-384 hash with an RSA signature to some data, but I need to do it in two steps - apply the hash first and then sign the data.</p>\n<p>The <code>Signature.sign()</code> function appears to need the right digest DER data structure to sign correctly.</p>\n<p>How can I make the two equivalents without using any external libraries like BouncyCastle?</p>\n<p>With <code>SHA3-384</code> it's ok (as there is an OID) but for <code>KECCAK-384</code>, I didn't find the right way as there is no OID.</p>\n<p>Regards,</p>\n<p>For SHA3-384 it's ok :</p>\n<pre><code>Signature signEng1= Signature.getInstance(&quot;NoneWithRSA&quot;);\nsignEng1.initSign(rsaKeyPair.getPrivate());\nsignEng1.update(digestinfo);\nsignEng1.update(hashToSign);\nbyte[] sig1= signEng1.sign();\n</code></pre>\n"},{"tags":["java","spring-boot","rest","controller"],"answers":[{"comments":[{"owner":{"account_id":18128069,"reputation":332,"user_id":13183434,"display_name":"Bjop"},"score":0,"creation_date":1683626620,"post_id":76207959,"comment_id":134391914,"body_markdown":"Thx for responding, but as stated in my question i dont want to return a `ResponseEntity` in my method. Is it plausible?","body":"Thx for responding, but as stated in my question i dont want to return a <code>ResponseEntity</code> in my method. Is it plausible?"},{"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"score":1,"creation_date":1683628323,"post_id":76207959,"comment_id":134392379,"body_markdown":"You either have `ResponseEntity` or any native type such as String, Integer, Boolean , List&lt;String&gt; List&lt;Object&gt; etc, however, ResponseEntity can wrap your native type or objects with additional information such as status code and response headers , so it is advised to use that","body":"You either have <code>ResponseEntity</code> or any native type such as String, Integer, Boolean , List&lt;String&gt; List&lt;Object&gt; etc, however, ResponseEntity can wrap your native type or objects with additional information such as status code and response headers , so it is advised to use that"}],"tags":[],"owner":{"account_id":7788702,"reputation":836,"user_id":5892518,"display_name":"Harsh"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683625593,"creation_date":1683625593,"answer_id":76207959,"question_id":76207842,"body_markdown":"Check if this helps! \r\n\r\nResponse entity is overloaded with several arguments, for better readability, you can create a modular method which creates and returns this `Map` so it can be re-used.\r\n\r\n    MultivaluedMap&lt;String,String&gt; responseHeaders =new MultivaluedHashMap&lt;&gt;();\r\n    responseHeaders.add(&quot;content-type&quot;,&quot;application/json&quot;);\r\n    responseHeaders.add(&quot;somethingElse&quot;,&quot;value&quot;);\r\n    return new ResponseEntity&lt;&gt;(users, responseHeaders, HttpStatus.OK);","title":"Spring Boot set response headers on single endopint","body":"<p>Check if this helps!</p>\n<p>Response entity is overloaded with several arguments, for better readability, you can create a modular method which creates and returns this <code>Map</code> so it can be re-used.</p>\n<pre><code>MultivaluedMap&lt;String,String&gt; responseHeaders =new MultivaluedHashMap&lt;&gt;();\nresponseHeaders.add(&quot;content-type&quot;,&quot;application/json&quot;);\nresponseHeaders.add(&quot;somethingElse&quot;,&quot;value&quot;);\nreturn new ResponseEntity&lt;&gt;(users, responseHeaders, HttpStatus.OK);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683629044,"creation_date":1683629044,"answer_id":76208477,"question_id":76207842,"body_markdown":"You can do it without ResponseEntity. Change the signature of your class to\r\n\r\n    @GetMapping()\r\n    public public List&lt;UserFullDto&gt;getAll(HttpServletRequest request, HttpServletResponse response) {\r\n\r\nAnd than you can use `response.addHeader(name, value)` ","title":"Spring Boot set response headers on single endopint","body":"<p>You can do it without ResponseEntity. Change the signature of your class to</p>\n<pre><code>@GetMapping()\npublic public List&lt;UserFullDto&gt;getAll(HttpServletRequest request, HttpServletResponse response) {\n</code></pre>\n<p>And than you can use <code>response.addHeader(name, value)</code></p>\n"}],"owner":{"account_id":18128069,"reputation":332,"user_id":13183434,"display_name":"Bjop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683634982,"creation_date":1683624823,"question_id":76207842,"body_markdown":"I try to add a response header to a singel endopoint.\r\n\r\nThis is my controller class.\r\n\r\n```java\r\n@RequiredArgsConstructor\r\n@RestController\r\n@RequestMapping(&quot;/dds/users&quot;)\r\npublic class TypeController {\r\n    private final UserService userService;\r\n    private final UserMapper userMapper;\r\n\r\n    @GetMapping()\r\n    public List&lt;UserFullDto&gt; getAll() {\r\n        return userService.getAll().stream().map(userMapper::mapToFullDto).toList();\r\n    }\r\n}\r\n```\r\n\r\nIs there a solution to add a response header without making the methode return a `ResponseEntity&lt;&gt;`\r\n\r\nI dont want to use this this:\r\n```java\r\n@GetMapping()\r\npublic ResponseEntity&lt;List&lt;UserFullDto&gt;&gt; getAll() {\r\n    var users = userService.getAll().stream().map(userMapper::mapToFullDto).toList();\r\n    return new ResponseEnity.ok().header().body(users);\r\n}\r\n```\r\n\r\nI have tried this without succes (gives me a 404)\r\n```java\r\n@GetMapping(headers = &quot;Cache-Control=max-age=3600&quot;)\r\npublic ResponseEntity&lt;List&lt;UserFullDto&gt;&gt; getAll() {\r\n    ...\r\n}\r\n```\r\n\r\n","title":"Spring Boot set response headers on single endopint","body":"<p>I try to add a response header to a singel endopoint.</p>\n<p>This is my controller class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\n@RestController\n@RequestMapping(&quot;/dds/users&quot;)\npublic class TypeController {\n    private final UserService userService;\n    private final UserMapper userMapper;\n\n    @GetMapping()\n    public List&lt;UserFullDto&gt; getAll() {\n        return userService.getAll().stream().map(userMapper::mapToFullDto).toList();\n    }\n}\n</code></pre>\n<p>Is there a solution to add a response header without making the methode return a <code>ResponseEntity&lt;&gt;</code></p>\n<p>I dont want to use this this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping()\npublic ResponseEntity&lt;List&lt;UserFullDto&gt;&gt; getAll() {\n    var users = userService.getAll().stream().map(userMapper::mapToFullDto).toList();\n    return new ResponseEnity.ok().header().body(users);\n}\n</code></pre>\n<p>I have tried this without succes (gives me a 404)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(headers = &quot;Cache-Control=max-age=3600&quot;)\npublic ResponseEntity&lt;List&lt;UserFullDto&gt;&gt; getAll() {\n    ...\n}\n</code></pre>\n"},{"tags":["java","multithreading","interface","try-with-resources"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1483088840,"post_id":41393417,"comment_id":69988838,"body_markdown":"Nice question though ... that thought never occurred to me ;-)","body":"Nice question though ... that thought never occurred to me ;-)"},{"owner":{"account_id":2211999,"reputation":9954,"user_id":1953590,"accept_rate":74,"display_name":"Kevin Krumwiede"},"score":0,"creation_date":1483088892,"post_id":41393417,"comment_id":69988858,"body_markdown":"Related: http://stackoverflow.com/questions/13883293/turning-an-executorservice-to-daemon-in-java","body":"Related: <a href=\"http://stackoverflow.com/questions/13883293/turning-an-executorservice-to-daemon-in-java\" title=\"turning an executorservice to daemon in java\">stackoverflow.com/questions/13883293/&hellip;</a>"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":1,"creation_date":1483096170,"post_id":41393417,"comment_id":69992200,"body_markdown":"There are tons of &quot;resourceful&quot; non-`Closeable` APIs in the JDK","body":"There are tons of &quot;resourceful&quot; non-<code>Closeable</code> APIs in the JDK"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1680500433,"post_id":41393417,"comment_id":133902873,"body_markdown":"See [this Answer](https://stackoverflow.com/a/72267126/642706) with an important update for Java 19+.","body":"See <a href=\"https://stackoverflow.com/a/72267126/642706\">this Answer</a> with an important update for Java 19+."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1692731422,"post_id":41393417,"comment_id":135663888,"body_markdown":"I had this question just now &amp; searched in SO &amp; got this!","body":"I had this question just now &amp; searched in SO &amp; got this!"}],"answers":[{"comments":[{"owner":{"account_id":7226350,"reputation":4371,"user_id":5514765,"accept_rate":100,"display_name":"ParkerHalo"},"score":0,"creation_date":1483089474,"post_id":41393450,"comment_id":69989086,"body_markdown":"You&#39;re probably right ;) What i really wanted to say is, that it is completely possible to wrap the functionality of `ExecutorService` into a class that supports `AutoCloseable`","body":"You&#39;re probably right ;) What i really wanted to say is, that it is completely possible to wrap the functionality of <code>ExecutorService</code> into a class that supports <code>AutoCloseable</code>"},{"owner":{"account_id":6403168,"reputation":1090,"user_id":4965203,"display_name":"Pavel Uvarov"},"score":0,"creation_date":1483098840,"post_id":41393450,"comment_id":69993320,"body_markdown":"Additional reasoning to not make ExecutorService AutoClosable in JDK - this is a service, not an a resourse... Exactly same reason for ExceturService to not extend Closeable interface.","body":"Additional reasoning to not make ExecutorService AutoClosable in JDK - this is a service, not an a resourse... Exactly same reason for ExceturService to not extend Closeable interface."},{"owner":{"account_id":1147588,"reputation":148,"user_id":1130009,"display_name":"Mikhail Yevchenko"},"score":1,"creation_date":1678440650,"post_id":41393450,"comment_id":133536635,"body_markdown":"Thread pool is a valid resource. And choice between cleanup methods is hardly an excuse for not having a default cleanup method","body":"Thread pool is a valid resource. And choice between cleanup methods is hardly an excuse for not having a default cleanup method"},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1692731897,"post_id":41393450,"comment_id":135663979,"body_markdown":"I don&#39;t think having 2 methods justifies not ensuring the resource as auto-cleanable. Its important when designing to do as much as we can to help the client code do the right thing.","body":"I don&#39;t think having 2 methods justifies not ensuring the resource as auto-cleanable. Its important when designing to do as much as we can to help the client code do the right thing."}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":4,"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1483089218,"creation_date":1483088603,"answer_id":41393450,"question_id":41393417,"body_markdown":"That [ExecutorService][1] has actually **two** shutdown-related methods; based on the simple fact that **both** ways of shutting down a service make sense.\r\n\r\nThus: how would you auto-close a service then? In a consistent manner that works for everybody?!\r\n\r\nSo, the reasonable explanation in my eyes: you can&#39;t make an ExecutorService a AutoClosable because that service does not have a single &quot;close&quot; like operation; but two!\r\n\r\nAnd if you think you could make good use of such an auto-closing service, writing up your own implementation using &quot;delegation&quot; would be a 5 minute thing! Or probably 10 minutes, because you would create one version calling `shutdown()` as close operation; and one that does `shutdownNow()` instead.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html","title":"Why does the ExecutorService interface not implement AutoCloseable?","body":"<p>That <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html\">ExecutorService</a> has actually <strong>two</strong> shutdown-related methods; based on the simple fact that <strong>both</strong> ways of shutting down a service make sense.</p>\n\n<p>Thus: how would you auto-close a service then? In a consistent manner that works for everybody?!</p>\n\n<p>So, the reasonable explanation in my eyes: you can't make an ExecutorService a AutoClosable because that service does not have a single \"close\" like operation; but two!</p>\n\n<p>And if you think you could make good use of such an auto-closing service, writing up your own implementation using \"delegation\" would be a 5 minute thing! Or probably 10 minutes, because you would create one version calling <code>shutdown()</code> as close operation; and one that does <code>shutdownNow()</code> instead.</p>\n"},{"comments":[{"owner":{"account_id":5954045,"reputation":3379,"user_id":4681265,"display_name":"Adrian"},"score":0,"creation_date":1562791859,"post_id":41395429,"comment_id":100492923,"body_markdown":"Hi, this force me to declare also a `} catch (IOException e) {\n\t\t\t\te.printStackTrace();\n\t\t\t}` - how could I avoid that?","body":"Hi, this force me to declare also a <code>} catch (IOException e) { \t\t\t\te.printStackTrace(); \t\t\t}</code> - how could I avoid that?"},{"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":1,"creation_date":1562833038,"post_id":41395429,"comment_id":100504218,"body_markdown":"@adrhc: Updated my answer with a possible workaround","body":"@adrhc: Updated my answer with a possible workaround"}],"tags":[],"owner":{"account_id":247217,"reputation":213465,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"comment_count":2,"down_vote_count":1,"up_vote_count":30,"is_accepted":false,"score":29,"last_activity_date":1578662105,"creation_date":1483096807,"answer_id":41395429,"question_id":41393417,"body_markdown":"This is a mediocre workaround\r\n\r\n    ExecutorService service = Executors.newSingleThreadExecutor();\r\n    try (Closeable close = service::shutdown) {\r\n\r\n    }\r\n\r\nOr, if the checked exception bothers you, you could write:\r\n\r\n    interface MyCloseable extends AutoCloseable {\r\n        void close();\r\n    }\r\n\r\nAnd then\r\n\r\n    ExecutorService service = Executors.newSingleThreadExecutor();\r\n    try (MyCloseable close = service::shutdown) {\r\n\r\n    }\r\n\r\n\r\nOf course, you must never ever put anything between the assignment and the `try` statement, nor use the `service` local variable after the `try` statement.\r\n\r\nGiven the caveats, just use `finally` instead.","title":"Why does the ExecutorService interface not implement AutoCloseable?","body":"<p>This is a mediocre workaround</p>\n\n<pre><code>ExecutorService service = Executors.newSingleThreadExecutor();\ntry (Closeable close = service::shutdown) {\n\n}\n</code></pre>\n\n<p>Or, if the checked exception bothers you, you could write:</p>\n\n<pre><code>interface MyCloseable extends AutoCloseable {\n    void close();\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>ExecutorService service = Executors.newSingleThreadExecutor();\ntry (MyCloseable close = service::shutdown) {\n\n}\n</code></pre>\n\n<p>Of course, you must never ever put anything between the assignment and the <code>try</code> statement, nor use the <code>service</code> local variable after the <code>try</code> statement.</p>\n\n<p>Given the caveats, just use <code>finally</code> instead.</p>\n"},{"comments":[{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1609830579,"post_id":41400591,"comment_id":115937331,"body_markdown":"Everything is in the context of a single method: the `main` method of the program.","body":"Everything is in the context of a single method: the <code>main</code> method of the program."}],"tags":[],"owner":{"account_id":75804,"reputation":94840,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1483120880,"creation_date":1483120880,"answer_id":41400591,"question_id":41393417,"body_markdown":"I don&#39;t see where AutoCloseable is that useful for an Executor.  try-with-resources is for things that can be initialized, used, and released within the scope of a method. This works great for things like files, network connections, jdbc resources, etc., where they get opened, used, and cleaned up quickly. But an executor, especially a threadpool, is something you want available for a long time period, probably over the lifetime of the application, and will tend to get injected into things like singleton services, which can have a method that the DI framework knows to call on application shutdown to clean up the executor. This usage pattern works fine without try-with-resources.\r\n\r\nAlso, a big motivator behind try-with-resources is making sure exceptions don&#39;t get masked. That&#39;s not a consideration so much with executors, all the exception-throwing will be happening in the tasks submitted to the executor, \r\nexception-masking is not an issue.\r\n\r\n","title":"Why does the ExecutorService interface not implement AutoCloseable?","body":"<p>I don't see where AutoCloseable is that useful for an Executor.  try-with-resources is for things that can be initialized, used, and released within the scope of a method. This works great for things like files, network connections, jdbc resources, etc., where they get opened, used, and cleaned up quickly. But an executor, especially a threadpool, is something you want available for a long time period, probably over the lifetime of the application, and will tend to get injected into things like singleton services, which can have a method that the DI framework knows to call on application shutdown to clean up the executor. This usage pattern works fine without try-with-resources.</p>\n\n<p>Also, a big motivator behind try-with-resources is making sure exceptions don't get masked. That's not a consideration so much with executors, all the exception-throwing will be happening in the tasks submitted to the executor, \nexception-masking is not an issue.</p>\n"},{"comments":[{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1692732048,"post_id":72267126,"comment_id":135664017,"body_markdown":"Thank you! I missed this one! I am gad they did it! Should have been done much sooner!","body":"Thank you! I missed this one! I am gad they did it! Should have been done much sooner!"}],"tags":[],"owner":{"account_id":8129122,"reputation":1496,"user_id":6122976,"display_name":"wilmol"},"comment_count":1,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1683634897,"creation_date":1652749259,"answer_id":72267126,"question_id":41393417,"body_markdown":"# `ExeuctorService` is `AutoCloseable` in Java 19+\r\n\r\nIn [Java 19][1], [`ExeuctorService` now implements `AutoCloseable`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/ExecutorService.html#close()).\r\n\r\n\r\nThe default implementation invokes `shutdown()` and waits for tasks to complete with `awaitTermination` in a loop. It calls `shutdownNow()` if interrupted.\r\n\r\n# Google Guava \r\n\r\nFor earlier Java, you can use [Guava&#39;s `ForwardingExecutorService`](https://guava.dev/releases/19.0/api/docs/com/google/common/util/concurrent/ForwardingExecutorService.html) to decorate `ExeuctorService` as `AutoCloseable` yourself:\r\n\r\n```java\r\nclass CloseableExecutorService extends ForwardingExecutorService implements AutoCloseable {\r\n\r\n  private final ExecutorService delegate;\r\n\r\n  CloseableExecutorService(ExecutorService delegate) {\r\n    this.delegate = checkNotNull(delegate);\r\n  }\r\n\r\n  @Override\r\n  protected ExecutorService delegate() {\r\n    return delegate;\r\n  }\r\n\r\n  @Override\r\n  public void close() {\r\n    // copy paste from JDK 19 EA\r\n    boolean terminated = isTerminated();\r\n    if (!terminated) {\r\n      shutdown();\r\n      boolean interrupted = false;\r\n      while (!terminated) {\r\n        try {\r\n          terminated = awaitTermination(1L, TimeUnit.DAYS);\r\n        } catch (InterruptedException e) {\r\n          if (!interrupted) {\r\n            shutdownNow();\r\n            interrupted = true;\r\n          }\r\n        }\r\n      }\r\n      if (interrupted) {\r\n        Thread.currentThread().interrupt();\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Java_version_history#Java_19","title":"Why does the ExecutorService interface not implement AutoCloseable?","body":"<h1><code>ExeuctorService</code> is <code>AutoCloseable</code> in Java 19+</h1>\n<p>In <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_19\" rel=\"noreferrer\">Java 19</a>, <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/ExecutorService.html#close()\" rel=\"noreferrer\"><code>ExeuctorService</code> now implements <code>AutoCloseable</code></a>.</p>\n<p>The default implementation invokes <code>shutdown()</code> and waits for tasks to complete with <code>awaitTermination</code> in a loop. It calls <code>shutdownNow()</code> if interrupted.</p>\n<h1>Google Guava</h1>\n<p>For earlier Java, you can use <a href=\"https://guava.dev/releases/19.0/api/docs/com/google/common/util/concurrent/ForwardingExecutorService.html\" rel=\"noreferrer\">Guava's <code>ForwardingExecutorService</code></a> to decorate <code>ExeuctorService</code> as <code>AutoCloseable</code> yourself:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class CloseableExecutorService extends ForwardingExecutorService implements AutoCloseable {\n\n  private final ExecutorService delegate;\n\n  CloseableExecutorService(ExecutorService delegate) {\n    this.delegate = checkNotNull(delegate);\n  }\n\n  @Override\n  protected ExecutorService delegate() {\n    return delegate;\n  }\n\n  @Override\n  public void close() {\n    // copy paste from JDK 19 EA\n    boolean terminated = isTerminated();\n    if (!terminated) {\n      shutdown();\n      boolean interrupted = false;\n      while (!terminated) {\n        try {\n          terminated = awaitTermination(1L, TimeUnit.DAYS);\n        } catch (InterruptedException e) {\n          if (!interrupted) {\n            shutdownNow();\n            interrupted = true;\n          }\n        }\n      }\n      if (interrupted) {\n        Thread.currentThread().interrupt();\n      }\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":5405333,"reputation":4229,"user_id":4304038,"accept_rate":92,"display_name":"Adrian Krebs"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8906,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":41393450,"answer_count":4,"score":43,"last_activity_date":1683634897,"creation_date":1483088427,"question_id":41393417,"body_markdown":"Failing to call `shutdown()` on a thread executor will result in a never terminating application. \r\n\r\nBest practice to shut down the ExecutorService is this:\r\n\r\n    ExecutorService service = null;\r\n    try {\r\n      service = Executors.newSingleThreadExecutor();\r\n      // add tasks to thread executor\r\n      \r\n    } finally {\r\n      if (service != null) service.shutdown();\r\n    }\r\n\r\nSince Java knows the try-with-resources concept, wouldn&#39;t it be nice if we could do this?\r\n\r\n    try (service = Executors.newSingleThreadExecutor())\r\n    {\r\n      // add tasks to thread executor\r\n      \r\n    } ","title":"Why does the ExecutorService interface not implement AutoCloseable?","body":"<p>Failing to call <code>shutdown()</code> on a thread executor will result in a never terminating application. </p>\n\n<p>Best practice to shut down the ExecutorService is this:</p>\n\n<pre><code>ExecutorService service = null;\ntry {\n  service = Executors.newSingleThreadExecutor();\n  // add tasks to thread executor\n  \n} finally {\n  if (service != null) service.shutdown();\n}\n</code></pre>\n\n<p>Since Java knows the try-with-resources concept, wouldn't it be nice if we could do this?</p>\n\n<pre><code>try (service = Executors.newSingleThreadExecutor())\n{\n  // add tasks to thread executor\n  \n} \n</code></pre>\n"},{"tags":["java","android","string","arduino","bluetooth"],"comments":[{"owner":{"account_id":19211594,"reputation":1477,"user_id":14037302,"display_name":"sweak"},"score":1,"creation_date":1683635539,"post_id":76209307,"comment_id":134394108,"body_markdown":"It&#39;s great you&#39;ve provided so much code, but in your case (application crash) the most useful information would be the Logcat output - the error stacktrace. Please, update the question with that information.","body":"It&#39;s great you&#39;ve provided so much code, but in your case (application crash) the most useful information would be the Logcat output - the error stacktrace. Please, update the question with that information."}],"owner":{"account_id":27846204,"reputation":1,"user_id":21261595,"display_name":"garbel antoan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683634896,"creation_date":1683634896,"question_id":76209307,"body_markdown":"i&#39;m trying to make a smart home application via bluetooth and arduino module So i made a 1st activity for bluetooth device list to be selected which is called &quot; SelectBluetoothDeviceActivity &quot;, and it works fine and i can easily find the required module on it and when i press on the selected device it goes to the second Activity which is called &quot; MainActivity &quot; with the module&#39;s mac address using intent.putExtra() method.\r\nAnd it works all good by far and i can easily turn off and turn on the LED using my phone But when i want to go to the 3rd Activity which is called &quot; TestActivity &quot;, the app keeps crashing, \r\nI copy/pasted the exact same code from the 2nd activity into the 3rd activity but it keeps giving me error.\r\n\r\nFor example in 1st activity The intent code is sth like this :\r\n\r\n`   \r\n```\r\n private AdapterView.OnItemClickListener myListClickListener = new AdapterView.OnItemClickListener()\r\n    {\r\n        public void onItemClick (AdapterView&lt;?&gt; av, View v, int arg2, long arg3)\r\n        {\r\n            // Get the device MAC address, the last 17 chars in the View\r\n            String info = ((TextView) v).getText().toString();\r\n            String address = info.substring(info.length() - 17);\r\n\r\n            // Make an intent to start next activity.\r\n            Intent i = new Intent(SelectBluetoothDeviceActivity.this, MainActivity.class);\r\n\r\n            //Change the activity.\r\n            i.putExtra(EXTRA_ADDRESS, address); //this will be received at ledControl (class) Activity\r\n            startActivity(i);\r\n        }\r\n    };  \r\n```\r\n  `\r\n\r\nin the 2nd activity it receives the extra like this :\r\n\r\n`   \r\n```\r\n Intent newint = getIntent();\r\n        address = newint.getStringExtra(SelectBluetoothDeviceActivity.EXTRA_ADDRESS); //receive the address of the bluetooth device   \r\n```\r\n  `\r\n\r\n\r\nEverything works fine by far, But when i pass this mac address from 2nd activity to 3rd like this :\r\n\r\n`    \r\n```\r\nIntent returnToFreK = new Intent(MainActivity.this, test.class);\r\n                returnToFreK.putExtra(&quot;dawn&quot;,address);\r\n                startActivity(returnToFreK);   \r\n```\r\n `\r\n\r\nAnd recieve it like this on 3rd :\r\n\r\n`  \r\n```\r\n   Intent newint = getIntent();\r\n        address = newint.getStringExtra(&quot;dawn&quot;); //receive the address of the bluetooth device \r\n```\r\n   `\r\n\r\n\r\nThe app crashes.\r\n\r\n\r\n\r\n\r\nThe 1st activity :\r\n\r\n`   \r\n```\r\n public class SelectBluetoothDeviceActivity extends AppCompatActivity {\r\n    //widgets\r\n    Button btnPaired;\r\n    ListView devicelist;\r\n    //Bluetooth\r\n    private BluetoothAdapter myBluetooth = null;\r\n    private Set&lt;BluetoothDevice&gt; pairedDevices;\r\n    public static String EXTRA_ADDRESS = &quot;device_address&quot;;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_select_bluetooth_device);\r\n\r\n        //Calling widgets\r\n        btnPaired = (Button)findViewById(R.id.button);\r\n        devicelist = (ListView)findViewById(R.id.listView);\r\n\r\n        //if the device has bluetooth\r\n        myBluetooth = BluetoothAdapter.getDefaultAdapter();\r\n\r\n        if(myBluetooth == null)\r\n        {\r\n            //Show a mensag. that the device has no bluetooth adapter\r\n            Toast.makeText(getApplicationContext(), &quot;Bluetooth Device Not Available&quot;, Toast.LENGTH_LONG).show();\r\n\r\n            //finish apk\r\n            finish();\r\n        }\r\n        else if(!myBluetooth.isEnabled())\r\n        {\r\n            //Ask to the user turn the bluetooth on\r\n            Intent turnBTon = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\r\n            startActivityForResult(turnBTon,1);\r\n        }\r\n\r\n        btnPaired.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                pairedDevicesList();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void pairedDevicesList()\r\n    {\r\n        pairedDevices = myBluetooth.getBondedDevices();\r\n        ArrayList list = new ArrayList();\r\n\r\n        if (pairedDevices.size()&gt;0)\r\n        {\r\n            for(BluetoothDevice bt : pairedDevices)\r\n            {\r\n                list.add(bt.getName() + &quot;\\n&quot; + bt.getAddress()); //Get the device&#39;s name and the address\r\n            }\r\n        }\r\n        else\r\n        {\r\n            Toast.makeText(getApplicationContext(), &quot;No Paired Bluetooth Devices Found.&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n\r\n        final ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, list);\r\n        devicelist.setAdapter(adapter);\r\n        devicelist.setOnItemClickListener(myListClickListener); //Method called when the device from the list is clicked\r\n\r\n    }\r\n\r\n    private AdapterView.OnItemClickListener myListClickListener = new AdapterView.OnItemClickListener()\r\n    {\r\n        public void onItemClick (AdapterView&lt;?&gt; av, View v, int arg2, long arg3)\r\n        {\r\n            // Get the device MAC address, the last 17 chars in the View\r\n            String info = ((TextView) v).getText().toString();\r\n            String address = info.substring(info.length() - 17);\r\n\r\n            // Make an intent to start next activity.\r\n            Intent i = new Intent(SelectBluetoothDeviceActivity.this, MainActivity.class);\r\n\r\n            //Change the activity.\r\n            i.putExtra(EXTRA_ADDRESS, address); //this will be received at ledControl (class) Activity\r\n            startActivity(i);\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n}    \r\n```\r\n `\r\n\r\nThe 2nd activity :\r\n\r\n`   \r\n```\r\n public class MainActivity extends AppCompatActivity {\r\n    // Button btnOn, btnOff, btnDis;\r\n    Button On, Off, Discnt, Abt;\r\n    String address = null;\r\n    private ProgressDialog progress;\r\n    BluetoothAdapter myBluetooth = null;\r\n    BluetoothSocket btSocket = null;\r\n    private boolean isBtConnected = false;\r\n    //SPP UUID. Look for it\r\n    static final UUID myUUID = UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;);\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        Intent newint = getIntent();\r\n        address = newint.getStringExtra(SelectBluetoothDeviceActivity.EXTRA_ADDRESS); //receive the address of the bluetooth device\r\n\r\n        setContentView(R.layout.activity_main);\r\n\r\n        Handler gtx = new Handler();\r\n        gtx.postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n\r\n\r\n                Intent returnToFreK = new Intent(MainActivity.this, test.class);\r\n                returnToFreK.putExtra(&quot;dawn&quot;,address);\r\n                startActivity(returnToFreK);\r\n\r\n            }\r\n        }, 10000);\r\n\r\n\r\n        On = (Button)findViewById(R.id.on_btn);\r\n        Off = (Button)findViewById(R.id.off_btn);\r\n        Discnt = (Button)findViewById(R.id.dis_btn);\r\n        Abt = (Button)findViewById(R.id.abt_btn);\r\n\r\n        new ConnectBT().execute(); //Call the class to connect\r\n\r\n        //commands to be sent to bluetooth\r\n        On.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                turnOnLed();      //method to turn on\r\n            }\r\n        });\r\n\r\n        Off.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                turnOffLed();   //method to turn off\r\n            }\r\n        });\r\n\r\n        Discnt.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Disconnect(); //close connection\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void Disconnect()\r\n    {\r\n        if (btSocket!=null) //If the btSocket is busy\r\n        {\r\n            try\r\n            {\r\n                btSocket.close(); //close connection\r\n            }\r\n            catch (IOException e)\r\n            { msg(&quot;Error&quot;);}\r\n        }\r\n        finish(); //return to the first layout\r\n\r\n    }\r\n\r\n    private void turnOffLed()\r\n    {\r\n        if (btSocket!=null)\r\n        {\r\n            try\r\n            {\r\n                btSocket.getOutputStream().write(&quot;0&quot;.toString().getBytes());\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                msg(&quot;Error&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void turnOnLed()\r\n    {\r\n        if (btSocket!=null)\r\n        {\r\n            try\r\n            {\r\n                btSocket.getOutputStream().write(&quot;1&quot;.toString().getBytes());\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                msg(&quot;Error&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    // fast way to call Toast\r\n    private void msg(String s)\r\n    {\r\n        Toast.makeText(getApplicationContext(),s,Toast.LENGTH_LONG).show();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private class ConnectBT extends AsyncTask&lt;Void, Void, Void&gt;  // UI thread\r\n    {\r\n        private boolean ConnectSuccess = true; //if it&#39;s here, it&#39;s almost connected\r\n\r\n        @Override\r\n        protected void onPreExecute()\r\n        {\r\n            progress = ProgressDialog.show(MainActivity.this, &quot;Connecting...&quot;, &quot;Please wait!!!&quot;);  //show a progress dialog\r\n        }\r\n\r\n        @Override\r\n        protected Void doInBackground(Void... devices) //while the progress dialog is shown, the connection is done in background\r\n        {\r\n            try\r\n            {\r\n                if (btSocket == null || !isBtConnected)\r\n                {\r\n                    myBluetooth = BluetoothAdapter.getDefaultAdapter();//get the mobile bluetooth device\r\n                    BluetoothDevice dispositivo = myBluetooth.getRemoteDevice(address);//connects to the device&#39;s address and checks if it&#39;s available\r\n                    btSocket = dispositivo.createInsecureRfcommSocketToServiceRecord(myUUID);//create a RFCOMM (SPP) connection\r\n                    BluetoothAdapter.getDefaultAdapter().cancelDiscovery();\r\n                    btSocket.connect();//start connection\r\n                }\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                ConnectSuccess = false;//if the try failed, you can check the exception here\r\n            }\r\n            return null;\r\n        }\r\n        @Override\r\n        protected void onPostExecute(Void result) //after the doInBackground, it checks if everything went fine\r\n        {\r\n            super.onPostExecute(result);\r\n\r\n            if (!ConnectSuccess)\r\n            {\r\n                msg(&quot;Connection Failed. Is it a SPP Bluetooth? Try again.&quot;);\r\n                finish();\r\n            }\r\n            else\r\n            {\r\n                msg(&quot;Connected.&quot;);\r\n                isBtConnected = true;\r\n            }\r\n            progress.dismiss();\r\n        }\r\n    }\r\n}    \r\n```\r\n`\r\n\r\n\r\nthe 3rd activity :\r\n\r\n`  \r\n```\r\n  public class test extends AppCompatActivity {\r\n\r\n    Button On, Off, Discnt, Abt;\r\n    String address = null;\r\n    private ProgressDialog progress;\r\n    BluetoothAdapter myBluetooth = null;\r\n    BluetoothSocket btSocket = null;\r\n    private boolean isBtConnected = false;\r\n    //SPP UUID. Look for it\r\n    static final UUID myUUID = UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;);\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        Intent newint = getIntent();\r\n        address = newint.getStringExtra(&quot;dawn&quot;); //receive the address of the bluetooth device\r\n\r\n        setContentView(R.layout.activity_test);\r\n\r\n\r\n        On = (Button)findViewById(R.id.on_btn);\r\n        Off = (Button)findViewById(R.id.off_btn);\r\n        Discnt = (Button)findViewById(R.id.dis_btn);\r\n        Abt = (Button)findViewById(R.id.abt_btn);\r\n\r\n        new test.ConnectBT().execute(); //Call the class to connect\r\n\r\n        //commands to be sent to bluetooth\r\n        On.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                turnOnLed();      //method to turn on\r\n            }\r\n        });\r\n\r\n        Off.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                turnOffLed();   //method to turn off\r\n            }\r\n        });\r\n\r\n        Discnt.setOnClickListener(new View.OnClickListener()\r\n        {\r\n            @Override\r\n            public void onClick(View v)\r\n            {\r\n                Disconnect(); //close connection\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    private void Disconnect()\r\n    {\r\n        if (btSocket!=null) //If the btSocket is busy\r\n        {\r\n            try\r\n            {\r\n                btSocket.close(); //close connection\r\n            }\r\n            catch (IOException e)\r\n            { msg(&quot;Error&quot;);}\r\n        }\r\n        finish(); //return to the first layout\r\n\r\n    }\r\n\r\n    private void turnOffLed()\r\n    {\r\n        if (btSocket!=null)\r\n        {\r\n            try\r\n            {\r\n                btSocket.getOutputStream().write(&quot;0&quot;.toString().getBytes());\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                msg(&quot;Error&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void turnOnLed()\r\n    {\r\n        if (btSocket!=null)\r\n        {\r\n            try\r\n            {\r\n                btSocket.getOutputStream().write(&quot;1&quot;.toString().getBytes());\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                msg(&quot;Error&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    // fast way to call Toast\r\n    private void msg(String s)\r\n    {\r\n        Toast.makeText(getApplicationContext(),s,Toast.LENGTH_LONG).show();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private class ConnectBT extends AsyncTask&lt;Void, Void, Void&gt;  // UI thread\r\n    {\r\n        private boolean ConnectSuccess = true; //if it&#39;s here, it&#39;s almost connected\r\n\r\n        @Override\r\n        protected void onPreExecute()\r\n        {\r\n            progress = ProgressDialog.show(test.this, &quot;Connecting...&quot;, &quot;Please wait!!!&quot;);  //show a progress dialog\r\n        }\r\n\r\n        @Override\r\n        protected Void doInBackground(Void... devices) //while the progress dialog is shown, the connection is done in background\r\n        {\r\n            try\r\n            {\r\n                if (btSocket == null || !isBtConnected)\r\n                {\r\n                    myBluetooth = BluetoothAdapter.getDefaultAdapter();//get the mobile bluetooth device\r\n                    BluetoothDevice dispositivo = myBluetooth.getRemoteDevice(address);//connects to the device&#39;s address and checks if it&#39;s available\r\n                    btSocket = dispositivo.createInsecureRfcommSocketToServiceRecord(myUUID);//create a RFCOMM (SPP) connection\r\n                    BluetoothAdapter.getDefaultAdapter().cancelDiscovery();\r\n                    btSocket.connect();//start connection\r\n                }\r\n            }\r\n            catch (IOException e)\r\n            {\r\n                ConnectSuccess = false;//if the try failed, you can check the exception here\r\n            }\r\n            return null;\r\n        }\r\n        @Override\r\n        protected void onPostExecute(Void result) //after the doInBackground, it checks if everything went fine\r\n        {\r\n            super.onPostExecute(result);\r\n\r\n            if (!ConnectSuccess)\r\n            {\r\n                msg(&quot;Connection Failed. Is it a SPP Bluetooth? Try again.&quot;);\r\n                finish();\r\n            }\r\n            else\r\n            {\r\n                msg(&quot;Connected.&quot;);\r\n                isBtConnected = true;\r\n            }\r\n            progress.dismiss();\r\n        }\r\n    }\r\n}    \r\n```\r\n `\r\n\r\n\r\nI tried to change the &quot;     String address = null; &quot; in the 3rd application to the manual Mac address i got from device list, but the error remains.","title":"App crashes when passing Bluetooth mac address to 3rd activity in android","body":"<p>i'm trying to make a smart home application via bluetooth and arduino module So i made a 1st activity for bluetooth device list to be selected which is called &quot; SelectBluetoothDeviceActivity &quot;, and it works fine and i can easily find the required module on it and when i press on the selected device it goes to the second Activity which is called &quot; MainActivity &quot; with the module's mac address using intent.putExtra() method.\nAnd it works all good by far and i can easily turn off and turn on the LED using my phone But when i want to go to the 3rd Activity which is called &quot; TestActivity &quot;, the app keeps crashing,\nI copy/pasted the exact same code from the 2nd activity into the 3rd activity but it keeps giving me error.</p>\n<p>For example in 1st activity The intent code is sth like this :</p>\n<p>`</p>\n<pre><code> private AdapterView.OnItemClickListener myListClickListener = new AdapterView.OnItemClickListener()\n    {\n        public void onItemClick (AdapterView&lt;?&gt; av, View v, int arg2, long arg3)\n        {\n            // Get the device MAC address, the last 17 chars in the View\n            String info = ((TextView) v).getText().toString();\n            String address = info.substring(info.length() - 17);\n\n            // Make an intent to start next activity.\n            Intent i = new Intent(SelectBluetoothDeviceActivity.this, MainActivity.class);\n\n            //Change the activity.\n            i.putExtra(EXTRA_ADDRESS, address); //this will be received at ledControl (class) Activity\n            startActivity(i);\n        }\n    };  \n</code></pre>\n<p>`</p>\n<p>in the 2nd activity it receives the extra like this :</p>\n<p>`</p>\n<pre><code> Intent newint = getIntent();\n        address = newint.getStringExtra(SelectBluetoothDeviceActivity.EXTRA_ADDRESS); //receive the address of the bluetooth device   \n</code></pre>\n<p>`</p>\n<p>Everything works fine by far, But when i pass this mac address from 2nd activity to 3rd like this :</p>\n<p>`</p>\n<pre><code>Intent returnToFreK = new Intent(MainActivity.this, test.class);\n                returnToFreK.putExtra(&quot;dawn&quot;,address);\n                startActivity(returnToFreK);   \n</code></pre>\n<p>`</p>\n<p>And recieve it like this on 3rd :</p>\n<p>`</p>\n<pre><code>   Intent newint = getIntent();\n        address = newint.getStringExtra(&quot;dawn&quot;); //receive the address of the bluetooth device \n</code></pre>\n<p>`</p>\n<p>The app crashes.</p>\n<p>The 1st activity :</p>\n<p>`</p>\n<pre><code> public class SelectBluetoothDeviceActivity extends AppCompatActivity {\n    //widgets\n    Button btnPaired;\n    ListView devicelist;\n    //Bluetooth\n    private BluetoothAdapter myBluetooth = null;\n    private Set&lt;BluetoothDevice&gt; pairedDevices;\n    public static String EXTRA_ADDRESS = &quot;device_address&quot;;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_select_bluetooth_device);\n\n        //Calling widgets\n        btnPaired = (Button)findViewById(R.id.button);\n        devicelist = (ListView)findViewById(R.id.listView);\n\n        //if the device has bluetooth\n        myBluetooth = BluetoothAdapter.getDefaultAdapter();\n\n        if(myBluetooth == null)\n        {\n            //Show a mensag. that the device has no bluetooth adapter\n            Toast.makeText(getApplicationContext(), &quot;Bluetooth Device Not Available&quot;, Toast.LENGTH_LONG).show();\n\n            //finish apk\n            finish();\n        }\n        else if(!myBluetooth.isEnabled())\n        {\n            //Ask to the user turn the bluetooth on\n            Intent turnBTon = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);\n            startActivityForResult(turnBTon,1);\n        }\n\n        btnPaired.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v)\n            {\n                pairedDevicesList();\n            }\n        });\n\n    }\n\n    private void pairedDevicesList()\n    {\n        pairedDevices = myBluetooth.getBondedDevices();\n        ArrayList list = new ArrayList();\n\n        if (pairedDevices.size()&gt;0)\n        {\n            for(BluetoothDevice bt : pairedDevices)\n            {\n                list.add(bt.getName() + &quot;\\n&quot; + bt.getAddress()); //Get the device's name and the address\n            }\n        }\n        else\n        {\n            Toast.makeText(getApplicationContext(), &quot;No Paired Bluetooth Devices Found.&quot;, Toast.LENGTH_LONG).show();\n        }\n\n        final ArrayAdapter adapter = new ArrayAdapter(this,android.R.layout.simple_list_item_1, list);\n        devicelist.setAdapter(adapter);\n        devicelist.setOnItemClickListener(myListClickListener); //Method called when the device from the list is clicked\n\n    }\n\n    private AdapterView.OnItemClickListener myListClickListener = new AdapterView.OnItemClickListener()\n    {\n        public void onItemClick (AdapterView&lt;?&gt; av, View v, int arg2, long arg3)\n        {\n            // Get the device MAC address, the last 17 chars in the View\n            String info = ((TextView) v).getText().toString();\n            String address = info.substring(info.length() - 17);\n\n            // Make an intent to start next activity.\n            Intent i = new Intent(SelectBluetoothDeviceActivity.this, MainActivity.class);\n\n            //Change the activity.\n            i.putExtra(EXTRA_ADDRESS, address); //this will be received at ledControl (class) Activity\n            startActivity(i);\n        }\n    };\n\n\n\n\n}    \n</code></pre>\n<p>`</p>\n<p>The 2nd activity :</p>\n<p>`</p>\n<pre><code> public class MainActivity extends AppCompatActivity {\n    // Button btnOn, btnOff, btnDis;\n    Button On, Off, Discnt, Abt;\n    String address = null;\n    private ProgressDialog progress;\n    BluetoothAdapter myBluetooth = null;\n    BluetoothSocket btSocket = null;\n    private boolean isBtConnected = false;\n    //SPP UUID. Look for it\n    static final UUID myUUID = UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;);\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        Intent newint = getIntent();\n        address = newint.getStringExtra(SelectBluetoothDeviceActivity.EXTRA_ADDRESS); //receive the address of the bluetooth device\n\n        setContentView(R.layout.activity_main);\n\n        Handler gtx = new Handler();\n        gtx.postDelayed(new Runnable() {\n            @Override\n            public void run() {\n\n\n                Intent returnToFreK = new Intent(MainActivity.this, test.class);\n                returnToFreK.putExtra(&quot;dawn&quot;,address);\n                startActivity(returnToFreK);\n\n            }\n        }, 10000);\n\n\n        On = (Button)findViewById(R.id.on_btn);\n        Off = (Button)findViewById(R.id.off_btn);\n        Discnt = (Button)findViewById(R.id.dis_btn);\n        Abt = (Button)findViewById(R.id.abt_btn);\n\n        new ConnectBT().execute(); //Call the class to connect\n\n        //commands to be sent to bluetooth\n        On.setOnClickListener(new View.OnClickListener()\n        {\n            @Override\n            public void onClick(View v)\n            {\n                turnOnLed();      //method to turn on\n            }\n        });\n\n        Off.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v)\n            {\n                turnOffLed();   //method to turn off\n            }\n        });\n\n        Discnt.setOnClickListener(new View.OnClickListener()\n        {\n            @Override\n            public void onClick(View v)\n            {\n                Disconnect(); //close connection\n            }\n        });\n\n\n    }\n\n    private void Disconnect()\n    {\n        if (btSocket!=null) //If the btSocket is busy\n        {\n            try\n            {\n                btSocket.close(); //close connection\n            }\n            catch (IOException e)\n            { msg(&quot;Error&quot;);}\n        }\n        finish(); //return to the first layout\n\n    }\n\n    private void turnOffLed()\n    {\n        if (btSocket!=null)\n        {\n            try\n            {\n                btSocket.getOutputStream().write(&quot;0&quot;.toString().getBytes());\n            }\n            catch (IOException e)\n            {\n                msg(&quot;Error&quot;);\n            }\n        }\n    }\n\n    private void turnOnLed()\n    {\n        if (btSocket!=null)\n        {\n            try\n            {\n                btSocket.getOutputStream().write(&quot;1&quot;.toString().getBytes());\n            }\n            catch (IOException e)\n            {\n                msg(&quot;Error&quot;);\n            }\n        }\n    }\n\n    // fast way to call Toast\n    private void msg(String s)\n    {\n        Toast.makeText(getApplicationContext(),s,Toast.LENGTH_LONG).show();\n    }\n\n\n\n\n\n\n    private class ConnectBT extends AsyncTask&lt;Void, Void, Void&gt;  // UI thread\n    {\n        private boolean ConnectSuccess = true; //if it's here, it's almost connected\n\n        @Override\n        protected void onPreExecute()\n        {\n            progress = ProgressDialog.show(MainActivity.this, &quot;Connecting...&quot;, &quot;Please wait!!!&quot;);  //show a progress dialog\n        }\n\n        @Override\n        protected Void doInBackground(Void... devices) //while the progress dialog is shown, the connection is done in background\n        {\n            try\n            {\n                if (btSocket == null || !isBtConnected)\n                {\n                    myBluetooth = BluetoothAdapter.getDefaultAdapter();//get the mobile bluetooth device\n                    BluetoothDevice dispositivo = myBluetooth.getRemoteDevice(address);//connects to the device's address and checks if it's available\n                    btSocket = dispositivo.createInsecureRfcommSocketToServiceRecord(myUUID);//create a RFCOMM (SPP) connection\n                    BluetoothAdapter.getDefaultAdapter().cancelDiscovery();\n                    btSocket.connect();//start connection\n                }\n            }\n            catch (IOException e)\n            {\n                ConnectSuccess = false;//if the try failed, you can check the exception here\n            }\n            return null;\n        }\n        @Override\n        protected void onPostExecute(Void result) //after the doInBackground, it checks if everything went fine\n        {\n            super.onPostExecute(result);\n\n            if (!ConnectSuccess)\n            {\n                msg(&quot;Connection Failed. Is it a SPP Bluetooth? Try again.&quot;);\n                finish();\n            }\n            else\n            {\n                msg(&quot;Connected.&quot;);\n                isBtConnected = true;\n            }\n            progress.dismiss();\n        }\n    }\n}    \n</code></pre>\n<p>`</p>\n<p>the 3rd activity :</p>\n<p>`</p>\n<pre><code>  public class test extends AppCompatActivity {\n\n    Button On, Off, Discnt, Abt;\n    String address = null;\n    private ProgressDialog progress;\n    BluetoothAdapter myBluetooth = null;\n    BluetoothSocket btSocket = null;\n    private boolean isBtConnected = false;\n    //SPP UUID. Look for it\n    static final UUID myUUID = UUID.fromString(&quot;00001101-0000-1000-8000-00805F9B34FB&quot;);\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\n        Intent newint = getIntent();\n        address = newint.getStringExtra(&quot;dawn&quot;); //receive the address of the bluetooth device\n\n        setContentView(R.layout.activity_test);\n\n\n        On = (Button)findViewById(R.id.on_btn);\n        Off = (Button)findViewById(R.id.off_btn);\n        Discnt = (Button)findViewById(R.id.dis_btn);\n        Abt = (Button)findViewById(R.id.abt_btn);\n\n        new test.ConnectBT().execute(); //Call the class to connect\n\n        //commands to be sent to bluetooth\n        On.setOnClickListener(new View.OnClickListener()\n        {\n            @Override\n            public void onClick(View v)\n            {\n                turnOnLed();      //method to turn on\n            }\n        });\n\n        Off.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v)\n            {\n                turnOffLed();   //method to turn off\n            }\n        });\n\n        Discnt.setOnClickListener(new View.OnClickListener()\n        {\n            @Override\n            public void onClick(View v)\n            {\n                Disconnect(); //close connection\n            }\n        });\n\n\n    }\n\n    private void Disconnect()\n    {\n        if (btSocket!=null) //If the btSocket is busy\n        {\n            try\n            {\n                btSocket.close(); //close connection\n            }\n            catch (IOException e)\n            { msg(&quot;Error&quot;);}\n        }\n        finish(); //return to the first layout\n\n    }\n\n    private void turnOffLed()\n    {\n        if (btSocket!=null)\n        {\n            try\n            {\n                btSocket.getOutputStream().write(&quot;0&quot;.toString().getBytes());\n            }\n            catch (IOException e)\n            {\n                msg(&quot;Error&quot;);\n            }\n        }\n    }\n\n    private void turnOnLed()\n    {\n        if (btSocket!=null)\n        {\n            try\n            {\n                btSocket.getOutputStream().write(&quot;1&quot;.toString().getBytes());\n            }\n            catch (IOException e)\n            {\n                msg(&quot;Error&quot;);\n            }\n        }\n    }\n\n    // fast way to call Toast\n    private void msg(String s)\n    {\n        Toast.makeText(getApplicationContext(),s,Toast.LENGTH_LONG).show();\n    }\n\n\n\n\n\n\n    private class ConnectBT extends AsyncTask&lt;Void, Void, Void&gt;  // UI thread\n    {\n        private boolean ConnectSuccess = true; //if it's here, it's almost connected\n\n        @Override\n        protected void onPreExecute()\n        {\n            progress = ProgressDialog.show(test.this, &quot;Connecting...&quot;, &quot;Please wait!!!&quot;);  //show a progress dialog\n        }\n\n        @Override\n        protected Void doInBackground(Void... devices) //while the progress dialog is shown, the connection is done in background\n        {\n            try\n            {\n                if (btSocket == null || !isBtConnected)\n                {\n                    myBluetooth = BluetoothAdapter.getDefaultAdapter();//get the mobile bluetooth device\n                    BluetoothDevice dispositivo = myBluetooth.getRemoteDevice(address);//connects to the device's address and checks if it's available\n                    btSocket = dispositivo.createInsecureRfcommSocketToServiceRecord(myUUID);//create a RFCOMM (SPP) connection\n                    BluetoothAdapter.getDefaultAdapter().cancelDiscovery();\n                    btSocket.connect();//start connection\n                }\n            }\n            catch (IOException e)\n            {\n                ConnectSuccess = false;//if the try failed, you can check the exception here\n            }\n            return null;\n        }\n        @Override\n        protected void onPostExecute(Void result) //after the doInBackground, it checks if everything went fine\n        {\n            super.onPostExecute(result);\n\n            if (!ConnectSuccess)\n            {\n                msg(&quot;Connection Failed. Is it a SPP Bluetooth? Try again.&quot;);\n                finish();\n            }\n            else\n            {\n                msg(&quot;Connected.&quot;);\n                isBtConnected = true;\n            }\n            progress.dismiss();\n        }\n    }\n}    \n</code></pre>\n<p>`</p>\n<p>I tried to change the &quot;     String address = null; &quot; in the 3rd application to the manual Mac address i got from device list, but the error remains.</p>\n"},{"tags":["java","byte","converters"],"comments":[{"owner":{"display_name":"user1849298"},"score":0,"creation_date":1414246398,"post_id":26563272,"comment_id":41746406,"body_markdown":"You should&#39;ve edited the post, not put the example in the comments","body":"You should&#39;ve edited the post, not put the example in the comments"}],"answers":[{"comments":[{"owner":{"account_id":3049953,"reputation":1893,"user_id":2584754,"accept_rate":50,"display_name":"Jazzwave06"},"score":0,"creation_date":1414246187,"post_id":26563288,"comment_id":41746344,"body_markdown":"should be double or floats. You&#39;re losing precision at each step because you put the result in a int.","body":"should be double or floats. You&#39;re losing precision at each step because you put the result in a int."},{"owner":{"account_id":5165468,"reputation":13,"user_id":4135625,"display_name":"fabio lapa"},"score":0,"creation_date":1414246270,"post_id":26563288,"comment_id":41746369,"body_markdown":"i know that part but how do i get for example 3434901120028 and get the gb + mb + kb + bytes in this case it would be smthing like \n3199 GB + 1001 KB + 28 bytes","body":"i know that part but how do i get for example 3434901120028 and get the gb + mb + kb + bytes in this case it would be smthing like  3199 GB + 1001 KB + 28 bytes"},{"owner":{"account_id":5165468,"reputation":13,"user_id":4135625,"display_name":"fabio lapa"},"score":0,"creation_date":1414247191,"post_id":26563288,"comment_id":41746623,"body_markdown":"one final question can u explain this line i get everything expect for that step bytes -= gb * 1024 * 1024 * 1024;","body":"one final question can u explain this line i get everything expect for that step bytes -= gb * 1024 * 1024 * 1024;"},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1414247407,"post_id":26563288,"comment_id":41746678,"body_markdown":"Subtract the number of gigabytes from the number of bytes. Each gigabyte is 1024 meg; each meg is 1024 kb; each kb is 1024 bytes. That&#39;s `1024 * 1024 * 1024`.","body":"Subtract the number of gigabytes from the number of bytes. Each gigabyte is 1024 meg; each meg is 1024 kb; each kb is 1024 bytes. That&#39;s <code>1024 * 1024 * 1024</code>."}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1414246524,"creation_date":1414246094,"answer_id":26563288,"question_id":26563272,"body_markdown":"The number of bytes divided by 1024 is the number of kilobytes. The number of kilobytes divided by 1024 is the number of megabytes. That divided by 1024 is the number of gigabytes. Something like,\r\n\r\n    long bytes = 3434901120028l;\r\n\tlong gb = bytes / (1024 * 1024 * 1024);\r\n\tbytes -= gb * 1024 * 1024 * 1024;\r\n\tlong mb = bytes / (1024 * 1024);\r\n\tbytes -= mb * 1024 * 1024;\r\n\r\n\tlong kb = bytes / 1024;\r\n\tbytes -= kb * 1024;\r\n\r\n\tif (gb &gt; 0) {\r\n\t\tSystem.out.printf(&quot;%d gigabytes &quot;, gb);\r\n\t}\r\n\tif (mb &gt; 0) {\r\n\t\tSystem.out.printf(&quot;%d megabytes &quot;, mb);\r\n\t}\r\n\tif (kb &gt; 0) {\r\n\t\tSystem.out.printf(&quot;%d kilobytes &quot;, kb);\r\n\t}\r\n\tif (bytes &gt; 0) {\r\n\t\tSystem.out.printf(&quot;%d bytes &quot;, bytes);\r\n\t}\r\n\r\nOutput is\r\n\r\n    3199 gigabytes 1001 kilobytes 28 bytes \r\n","title":"The amount of gb mb kb and bytes in X bytes, java","body":"<p>The number of bytes divided by 1024 is the number of kilobytes. The number of kilobytes divided by 1024 is the number of megabytes. That divided by 1024 is the number of gigabytes. Something like,</p>\n\n<pre><code>long bytes = 3434901120028l;\nlong gb = bytes / (1024 * 1024 * 1024);\nbytes -= gb * 1024 * 1024 * 1024;\nlong mb = bytes / (1024 * 1024);\nbytes -= mb * 1024 * 1024;\n\nlong kb = bytes / 1024;\nbytes -= kb * 1024;\n\nif (gb &gt; 0) {\n    System.out.printf(\"%d gigabytes \", gb);\n}\nif (mb &gt; 0) {\n    System.out.printf(\"%d megabytes \", mb);\n}\nif (kb &gt; 0) {\n    System.out.printf(\"%d kilobytes \", kb);\n}\nif (bytes &gt; 0) {\n    System.out.printf(\"%d bytes \", bytes);\n}\n</code></pre>\n\n<p>Output is</p>\n\n<pre><code>3199 gigabytes 1001 kilobytes 28 bytes \n</code></pre>\n"}],"owner":{"account_id":5165468,"reputation":13,"user_id":4135625,"display_name":"fabio lapa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1771,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":26563288,"answer_count":1,"score":0,"last_activity_date":1683634867,"creation_date":1414246010,"question_id":26563272,"body_markdown":"Ok so I have this problem for my pg class, where I&#39;m supposed to take a number(which represents a number of bytes) as input and convert it to gigabytes, megabytes, kilobytes and bytes. Did a little research and couldn&#39;t find a way to solve this. I&#39;m using Java by the way. Thanks in advice!\r\n\r\n    Here is an example:\r\n     Input  : 3434901120028\r\n     Output : 3199 GB + 1001 KB + 28 bytes\r\n\r\n","title":"The amount of gb mb kb and bytes in X bytes, java","body":"<p>Ok so I have this problem for my pg class, where I'm supposed to take a number(which represents a number of bytes) as input and convert it to gigabytes, megabytes, kilobytes and bytes. Did a little research and couldn't find a way to solve this. I'm using Java by the way. Thanks in advice!</p>\n<pre><code>Here is an example:\n Input  : 3434901120028\n Output : 3199 GB + 1001 KB + 28 bytes\n</code></pre>\n"},{"tags":["java","arrays","string","printing"],"comments":[{"owner":{"account_id":957044,"reputation":47672,"user_id":982161,"accept_rate":63,"display_name":"Xoc  epe&#250;pa "},"score":5,"creation_date":1487879157,"post_id":42424751,"comment_id":71994986,"body_markdown":"working fine by me http://ideone.com/xhNVpc","body":"working fine by me <a href=\"http://ideone.com/xhNVpc\" rel=\"nofollow noreferrer\">ideone.com/xhNVpc</a>"},{"owner":{"account_id":6411938,"reputation":4104,"user_id":4971422,"display_name":"FredK"},"score":2,"creation_date":1487879700,"post_id":42424751,"comment_id":71995311,"body_markdown":"Are you sure it is not writing all of them? Can your screen display all of the lnies at once? Perhaps the first items are rolled off the top of your screen and you only see the bottom ones","body":"Are you sure it is not writing all of them? Can your screen display all of the lnies at once? Perhaps the first items are rolled off the top of your screen and you only see the bottom ones"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1487881390,"post_id":42424751,"comment_id":71996252,"body_markdown":"Are you running your program in an IDE? Which one (Eclipse, IntelliJ IDEA or some other)? Or from a command prompt (DOS prompt or shell)?","body":"Are you running your program in an IDE? Which one (Eclipse, IntelliJ IDEA or some other)? Or from a command prompt (DOS prompt or shell)?"},{"owner":{"account_id":26023,"reputation":1592,"user_id":67417,"accept_rate":88,"display_name":"Dave C"},"score":1,"creation_date":1487882756,"post_id":42424751,"comment_id":71997036,"body_markdown":"Perhaps set a breakpoint in your IDE in the loop and watch it. It certainly looks ok. As others have said, perhaps it&#39;s writing everything, but you&#39;re not able to see it all.","body":"Perhaps set a breakpoint in your IDE in the loop and watch it. It certainly looks ok. As others have said, perhaps it&#39;s writing everything, but you&#39;re not able to see it all."}],"answers":[{"tags":[],"owner":{"account_id":13964622,"reputation":69,"user_id":10084790,"display_name":"Shmuel Greenberger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683634611,"creation_date":1683634611,"answer_id":76209271,"question_id":42424751,"body_markdown":"Perhaps you should try to print the results to a file and not to the console.\r\nThis way you can ascertain whether the problem is in the algorithm or just your console (as mentioned in the comments).","title":"Java Only half of the elements in my String Array are printed","body":"<p>Perhaps you should try to print the results to a file and not to the console.\nThis way you can ascertain whether the problem is in the algorithm or just your console (as mentioned in the comments).</p>\n"}],"owner":{"account_id":10319962,"reputation":11,"user_id":7613175,"display_name":"Power Michael"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":263,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683634611,"creation_date":1487878940,"question_id":42424751,"body_markdown":"I am trying to print out every element of my Array of Strings called `Resources` along with a statement before it, and an integer after it.\r\n\r\nIt should be printed out like this:\r\n\r\n&gt; gather.rate dispenser Wood 10\r\n\r\nFirst off, here is my code: \r\n\r\n    private String[] Resources =  { &quot;Explosives&quot;, &quot;Animal Fat&quot;, &quot;Cooked Fish&quot;,\r\n            &quot;Raw Fish&quot;, &quot;Low Grade Fuel&quot;, &quot;Granola Bar&quot;, &quot;Gun Powder&quot;, &quot;Hemp Clone&quot;, &quot;Hemp Seed&quot;,\r\n            &quot;High Quality Metal Ore&quot;, &quot;Burned Human Meat&quot;, &quot;Cooked Human Meat&quot;, &quot;Raw Human Meat&quot;,\r\n            &quot;Spoiled Human Meat&quot;, &quot;Leather&quot;, &quot;Burnt Bear Meat&quot;, &quot;Bear Meat Cooked&quot;, &quot;Bear Meat&quot;,\r\n            &quot;Burned Pork&quot;, &quot;Cooked Pork&quot;, &quot;Pork&quot;, &quot;Burned Wolf Meat&quot;, &quot;Cooked Wolf Meat&quot;, \r\n            &quot;Raw Wolf Meat&quot;, &quot;Spoiled Wolf Meat&quot;, &quot;Metal Fragments&quot;, &quot;Metal Ore&quot;,&quot;High Quality Metal&quot;,\r\n            &quot;Minnows&quot;, &quot;Mushroom&quot;, &quot;Paper&quot;, &quot;Pumpkin&quot;, &quot;Pumpkin Plant Clone&quot;, &quot;Pumpkin Seed&quot;,\r\n            &quot;Research Paper&quot;, &quot;Salt Water&quot;, &quot;Human Skull&quot;, &quot;Wolf Skull&quot;, &quot;Small Trout&quot;, &quot;Small Water Bottle&quot;,\r\n            &quot;Stones&quot;, &quot;Sulfur&quot;, &quot;Sulfur Ore&quot;, &quot;Targeting Computer&quot;, &quot;Water&quot;, &quot;Water Jug&quot;, &quot;Wood&quot;, &quot;Apple&quot;, \r\n            &quot;Rotten Apple&quot;, &quot;Battery - Small&quot;, &quot;Black Raspberries&quot;, &quot;Blueberries&quot;,&quot;Bone Fragments&quot;, \r\n            &quot;Cactus Flesh&quot;, &quot;Can of Beans&quot;, &quot;Empty Can Of Beans&quot;, &quot;Can of Tuna&quot;, &quot;Candy Cane&quot;, &quot;CCTV Camera&quot;, \r\n            &quot;Charcoal&quot;, &quot;Burned Chicken&quot;, &quot;Cooked Chicken&quot;, &quot;Raw Chicken Breast&quot;, &quot;Spoiled Chicken&quot;, &quot;Chocolate Bar&quot;,\r\n            &quot;Cloth&quot;, &quot;Coal :(&quot;, &quot;Corn&quot;, &quot;Corn Clone&quot;, &quot;Corn Seed&quot;, &quot;Crude Oil&quot; };\r\n\r\n    private int multiplier;\r\n\r\n    public Miserum(int value)\r\n    {\r\n        // initialise instance variables\r\n        multiplier = value;\r\n    }\r\n\r\n    public void DoThis(){\r\n        String result = &quot; &quot;;\r\n        for(int x = 0; x &lt; Resources.length; x++){\r\n            result = &quot;gather.rate dispenser &quot; + Resources[x] + &quot; &quot; + multiplier;\r\n            System.out.println(result);\r\n        }\r\n    }\r\n\r\nSo there are about 71 elements in my `String[] Resources`. \r\n\r\nWhen I run the `DoThis()` method, it prints about 46 elements and it doesn&#39;t even start at the beginning, it starts at\r\n\r\n&gt; Spoiled Wolf Meat.\r\n\r\nWhy might this be? It completely spaces over the first elements and starts printing from the middle.\r\n\r\nI don&#39;t think that is what my code is saying to do, but clearly there&#39;s something wrong.\r\n\r\nIF you have a better way to do this/fix to my solution, please spill the beans.\r\n\r\n*And I am using the BlueJ IDE","title":"Java Only half of the elements in my String Array are printed","body":"<p>I am trying to print out every element of my Array of Strings called <code>Resources</code> along with a statement before it, and an integer after it.</p>\n\n<p>It should be printed out like this:</p>\n\n<blockquote>\n  <p>gather.rate dispenser Wood 10</p>\n</blockquote>\n\n<p>First off, here is my code: </p>\n\n<pre><code>private String[] Resources =  { \"Explosives\", \"Animal Fat\", \"Cooked Fish\",\n        \"Raw Fish\", \"Low Grade Fuel\", \"Granola Bar\", \"Gun Powder\", \"Hemp Clone\", \"Hemp Seed\",\n        \"High Quality Metal Ore\", \"Burned Human Meat\", \"Cooked Human Meat\", \"Raw Human Meat\",\n        \"Spoiled Human Meat\", \"Leather\", \"Burnt Bear Meat\", \"Bear Meat Cooked\", \"Bear Meat\",\n        \"Burned Pork\", \"Cooked Pork\", \"Pork\", \"Burned Wolf Meat\", \"Cooked Wolf Meat\", \n        \"Raw Wolf Meat\", \"Spoiled Wolf Meat\", \"Metal Fragments\", \"Metal Ore\",\"High Quality Metal\",\n        \"Minnows\", \"Mushroom\", \"Paper\", \"Pumpkin\", \"Pumpkin Plant Clone\", \"Pumpkin Seed\",\n        \"Research Paper\", \"Salt Water\", \"Human Skull\", \"Wolf Skull\", \"Small Trout\", \"Small Water Bottle\",\n        \"Stones\", \"Sulfur\", \"Sulfur Ore\", \"Targeting Computer\", \"Water\", \"Water Jug\", \"Wood\", \"Apple\", \n        \"Rotten Apple\", \"Battery - Small\", \"Black Raspberries\", \"Blueberries\",\"Bone Fragments\", \n        \"Cactus Flesh\", \"Can of Beans\", \"Empty Can Of Beans\", \"Can of Tuna\", \"Candy Cane\", \"CCTV Camera\", \n        \"Charcoal\", \"Burned Chicken\", \"Cooked Chicken\", \"Raw Chicken Breast\", \"Spoiled Chicken\", \"Chocolate Bar\",\n        \"Cloth\", \"Coal :(\", \"Corn\", \"Corn Clone\", \"Corn Seed\", \"Crude Oil\" };\n\nprivate int multiplier;\n\npublic Miserum(int value)\n{\n    // initialise instance variables\n    multiplier = value;\n}\n\npublic void DoThis(){\n    String result = \" \";\n    for(int x = 0; x &lt; Resources.length; x++){\n        result = \"gather.rate dispenser \" + Resources[x] + \" \" + multiplier;\n        System.out.println(result);\n    }\n}\n</code></pre>\n\n<p>So there are about 71 elements in my <code>String[] Resources</code>. </p>\n\n<p>When I run the <code>DoThis()</code> method, it prints about 46 elements and it doesn't even start at the beginning, it starts at</p>\n\n<blockquote>\n  <p>Spoiled Wolf Meat.</p>\n</blockquote>\n\n<p>Why might this be? It completely spaces over the first elements and starts printing from the middle.</p>\n\n<p>I don't think that is what my code is saying to do, but clearly there's something wrong.</p>\n\n<p>IF you have a better way to do this/fix to my solution, please spill the beans.</p>\n\n<p>*And I am using the BlueJ IDE</p>\n"},{"tags":["java","android","layout","android-linearlayout"],"comments":[{"owner":{"account_id":5204362,"reputation":1292,"user_id":4162800,"accept_rate":65,"display_name":"DJphy"},"score":0,"creation_date":1458045661,"post_id":36009731,"comment_id":59674526,"body_markdown":"stack trace please","body":"stack trace please"}],"answers":[{"comments":[{"owner":{"account_id":8045682,"reputation":11,"user_id":6065979,"display_name":"Bruno"},"score":0,"creation_date":1458041979,"post_id":36009820,"comment_id":59671898,"body_markdown":"did what you said for both text views and for the linear layout and the issue is still there","body":"did what you said for both text views and for the linear layout and the issue is still there"},{"owner":{"account_id":236188,"reputation":15922,"user_id":503508,"accept_rate":81,"display_name":"Knossos"},"score":0,"creation_date":1458042387,"post_id":36009820,"comment_id":59672215,"body_markdown":"I completely misread the question. You wrote that your app **crashes**. What is the stacktrace? (edit your question with it)","body":"I completely misread the question. You wrote that your app <b>crashes</b>. What is the stacktrace? (edit your question with it)"},{"owner":{"account_id":8045682,"reputation":11,"user_id":6065979,"display_name":"Bruno"},"score":0,"creation_date":1458044020,"post_id":36009820,"comment_id":59673382,"body_markdown":"omg thanks. I had never thought of even looking for the stacktrace since I never used it (I&#39;m new to android). I initialized the LinearLayout (a global variable) locally so when i tried to use it on a seperate method it resulted on a NullPointerException. nothing to do with the parameters aparently.","body":"omg thanks. I had never thought of even looking for the stacktrace since I never used it (I&#39;m new to android). I initialized the LinearLayout (a global variable) locally so when i tried to use it on a seperate method it resulted on a NullPointerException. nothing to do with the parameters aparently."},{"owner":{"account_id":236188,"reputation":15922,"user_id":503508,"accept_rate":81,"display_name":"Knossos"},"score":0,"creation_date":1458047223,"post_id":36009820,"comment_id":59675672,"body_markdown":"Looks like you solved your error. You should write it as an answer and accept it when you are able to.","body":"Looks like you solved your error. You should write it as an answer and accept it when you are able to."}],"tags":[],"owner":{"account_id":236188,"reputation":15922,"user_id":503508,"accept_rate":81,"display_name":"Knossos"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683633569,"creation_date":1458040856,"answer_id":36009820,"question_id":36009731,"body_markdown":"Instead of using `setLayoutParams`, use the `LayoutParams` in the `addView(View v, LayoutParams params)` method of your `LinearLayout`:\r\n\r\n    TextView nameView = new TextView(this);\r\n    nameView.setText(contact.getName());\r\n    contactInfoWrapper.addView(nameView, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));\r\n\r\n","title":"Unable to correctly use .setLayoutParams(...) - Android","body":"<p>Instead of using <code>setLayoutParams</code>, use the <code>LayoutParams</code> in the <code>addView(View v, LayoutParams params)</code> method of your <code>LinearLayout</code>:</p>\n<pre><code>TextView nameView = new TextView(this);\nnameView.setText(contact.getName());\ncontactInfoWrapper.addView(nameView, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8045682,"reputation":11,"user_id":6065979,"display_name":"Bruno"},"score":0,"creation_date":1458043267,"post_id":36010463,"comment_id":59672817,"body_markdown":"The phoneNumber is a String","body":"The phoneNumber is a String"}],"tags":[],"owner":{"account_id":8043749,"reputation":25,"user_id":6064555,"display_name":"Yadu CR"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683633539,"creation_date":1458042450,"answer_id":36010463,"question_id":36009731,"body_markdown":"Change the line  \r\n\r\n    numberView.setText(contact.getPhoneNumber());\r\n\r\nto this: \r\n\r\n    numberView.setText(String.valueOf(contact.getPhoneNumber()));\r\n","title":"Unable to correctly use .setLayoutParams(...) - Android","body":"<p>Change the line</p>\n<pre><code>numberView.setText(contact.getPhoneNumber());\n</code></pre>\n<p>to this:</p>\n<pre><code>numberView.setText(String.valueOf(contact.getPhoneNumber()));\n</code></pre>\n"}],"owner":{"account_id":8045682,"reputation":11,"user_id":6065979,"display_name":"Bruno"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683634601,"creation_date":1458040605,"question_id":36009731,"body_markdown":"I wanted to try using a database on Android, so I made a small app that allows you to add contacts to the database and then it displays them.\r\n\r\nI have been able to display contacts (from the database) if I create the layout in XML and then edit the text field in code. But I wanted to build the layouts in code so I can add as many contacts as I want.\r\n\r\nThe following code is the method I use to create the layout and the app crashes whenever I make it run this code. My guess is that there is a problem with the parameters. If only type LayoutParams.MatchContent, it asks me to import and it gives me many options, and thats why it says LinearLayout.LayoutParams...;\r\n\r\nI add the resulting layout to a LinearLayout.\r\n\r\n```lang-java\r\nprivate LinearLayout createContactView (Contact contact) {\r\n    LinearLayout contactInfoWrapper = new LinearLayout(this);\r\n    contactInfoWrapper.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));\r\n    contactInfoWrapper.setOrientation(LinearLayout.VERTICAL);\r\n\r\n    TextView nameView = new TextView(this);\r\n    nameView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));\r\n    nameView.setText(contact.getName());\r\n    contactInfoWrapper.addView(nameView);\r\n\r\n    TextView numberView = new TextView(this);\r\n    numberView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));\r\n    numberView.setText(contact.getPhoneNumber());\r\n    contactInfoWrapper.addView(numberView);\r\n\r\n    return contactInfoWrapper;\r\n}\r\n```\r\n\r\n","title":"Unable to correctly use .setLayoutParams(...) - Android","body":"<p>I wanted to try using a database on Android, so I made a small app that allows you to add contacts to the database and then it displays them.</p>\n<p>I have been able to display contacts (from the database) if I create the layout in XML and then edit the text field in code. But I wanted to build the layouts in code so I can add as many contacts as I want.</p>\n<p>The following code is the method I use to create the layout and the app crashes whenever I make it run this code. My guess is that there is a problem with the parameters. If only type LayoutParams.MatchContent, it asks me to import and it gives me many options, and thats why it says LinearLayout.LayoutParams...;</p>\n<p>I add the resulting layout to a LinearLayout.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private LinearLayout createContactView (Contact contact) {\n    LinearLayout contactInfoWrapper = new LinearLayout(this);\n    contactInfoWrapper.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));\n    contactInfoWrapper.setOrientation(LinearLayout.VERTICAL);\n\n    TextView nameView = new TextView(this);\n    nameView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));\n    nameView.setText(contact.getName());\n    contactInfoWrapper.addView(nameView);\n\n    TextView numberView = new TextView(this);\n    numberView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT));\n    numberView.setText(contact.getPhoneNumber());\n    contactInfoWrapper.addView(numberView);\n\n    return contactInfoWrapper;\n}\n</code></pre>\n"},{"tags":["java","soap","jaxb","unmarshalling"],"answers":[{"tags":[],"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1642777339,"creation_date":1642777339,"answer_id":70803358,"question_id":70802106,"body_markdown":"I had to use an XMLStreamReader as answered [here][1] but instead of file I also used an ```InputStream```:\r\n\r\n         SOAPBody soapBody = soapResponse.getSOAPBody();\r\n         XMLInputFactory xmlInputFactory = XMLInputFactory.newFactory();\r\n         Node soapBodyChild = soapBody.getFirstChild();\r\n         String bspQuittungAsXmlString = soapBodyChild.getFirstChild().getFirstChild().getNodeValue();\r\n         byte[] bspQuittungAsByteArray = bspQuittungAsXmlString.getBytes(StandardCharsets.UTF_8);\r\n         ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(bspQuittungAsByteArray);\r\n         InputStreamReader inputStreamReader = new InputStreamReader(byteArrayInputStream);\r\n         XMLStreamReader xmlStreamReader = xmlInputFactory.createXMLStreamReader(inputStreamReader);\r\n         JAXBContext jaxbContext = JAXBContext.newInstance(BspQuittung.class);\r\n         Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\n         BspQuittung bspQuittung = jaxbUnmarshaller.unmarshal(xmlStreamReader, BspQuittung.class).getValue();\r\n         xmlStreamReader.close();\r\n         inputStreamReader.close();\r\n         byteArrayInputStream.close();\r\n\r\nAfter this the variable ```bspQuittung``` had the right values.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11465653/how-to-unmarshall-soap-response-using-jaxb-if-namespace-declaration-is-on-soap-e","title":"Unmarshal SOAP response with CDATA in its body using JAXB","body":"<p>I had to use an XMLStreamReader as answered <a href=\"https://stackoverflow.com/questions/11465653/how-to-unmarshall-soap-response-using-jaxb-if-namespace-declaration-is-on-soap-e\">here</a> but instead of file I also used an <code>InputStream</code>:</p>\n<pre><code>     SOAPBody soapBody = soapResponse.getSOAPBody();\n     XMLInputFactory xmlInputFactory = XMLInputFactory.newFactory();\n     Node soapBodyChild = soapBody.getFirstChild();\n     String bspQuittungAsXmlString = soapBodyChild.getFirstChild().getFirstChild().getNodeValue();\n     byte[] bspQuittungAsByteArray = bspQuittungAsXmlString.getBytes(StandardCharsets.UTF_8);\n     ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(bspQuittungAsByteArray);\n     InputStreamReader inputStreamReader = new InputStreamReader(byteArrayInputStream);\n     XMLStreamReader xmlStreamReader = xmlInputFactory.createXMLStreamReader(inputStreamReader);\n     JAXBContext jaxbContext = JAXBContext.newInstance(BspQuittung.class);\n     Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\n     BspQuittung bspQuittung = jaxbUnmarshaller.unmarshal(xmlStreamReader, BspQuittung.class).getValue();\n     xmlStreamReader.close();\n     inputStreamReader.close();\n     byteArrayInputStream.close();\n</code></pre>\n<p>After this the variable <code>bspQuittung</code> had the right values.</p>\n"}],"owner":{"account_id":1876051,"reputation":3428,"user_id":1697245,"accept_rate":69,"display_name":"Arthur Eirich"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":432,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70803358,"answer_count":1,"score":0,"last_activity_date":1683634334,"creation_date":1642771946,"question_id":70802106,"body_markdown":"I am trying to unmarshal a SOAP response using JAXB but without success. What I have so far are the model classes generated using an xsd and the following code which should unmarshal the response:\r\n\r\n    SOAPBody soapBody = soapResponse.getSOAPBody();\r\n    // Next line should get me to bspQuittung element from response\r\n    DOMSource domSource = new DOMSource(soapBody.getFirstChild().getFirstChild());\r\n    JAXBContext jaxbContext = JAXBContext.newInstance(BspQuittung.class);\r\n    Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\r\n    BspQuittung bspQuittung = jaxbUnmarshaller.unmarshal(domSource, BspQuittung.class).getValue();\r\nThen I try to access the value of the ```&lt;AnnahmeErfolgreich&gt;``` element but instead of being ```true``` like in the response the object which unmarshaller gives me has the value for it being ```false```.\r\n\r\nWhat am I missing? Trying to get deeper by calling getFirstChild() again results in an ```Unexpected node type: com.sun.xml.messaging.saaj.soap.impl.SOAPTextImpl``` exception.\r\n\r\nBelow is the response itself:\r\n\r\n    &lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n       &lt;SOAP-ENV:Header/&gt;\r\n       &lt;SOAP-ENV:Body&gt;\r\n          &lt;ns2:sendBspNachrichtNativeOutput xmlns:ns2=&quot;somevalue&quot;&gt;\r\n             &lt;bspQuittung&gt;&lt;![CDATA[&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;BspQuittung version=&quot;1.5&quot; fassung=&quot;2020-03-15&quot; xmlns=&quot;somevalue&quot;&gt;\r\n        &lt;AnnahmeErfolgreich&gt;true&lt;/AnnahmeErfolgreich&gt;\r\n        &lt;ErgebnisStatus&gt;\r\n            &lt;Tabelle&gt;someInt&lt;/Tabelle&gt;\r\n            &lt;Schluessel&gt;someInt&lt;/Schluessel&gt;\r\n        &lt;/ErgebnisStatus&gt;\r\n    &lt;/BspQuittung&gt;]]&gt;&lt;/bspQuittung&gt;\r\n          &lt;/ns2:sendBspNachrichtNativeOutput&gt;\r\n       &lt;/SOAP-ENV:Body&gt;\r\n    &lt;/SOAP-ENV:Envelope&gt;\r\nHow can I change the code to get the unmarshaller work as expected? \r\n","title":"Unmarshal SOAP response with CDATA in its body using JAXB","body":"<p>I am trying to unmarshal a SOAP response using JAXB but without success. What I have so far are the model classes generated using an xsd and the following code which should unmarshal the response:</p>\n<pre><code>SOAPBody soapBody = soapResponse.getSOAPBody();\n// Next line should get me to bspQuittung element from response\nDOMSource domSource = new DOMSource(soapBody.getFirstChild().getFirstChild());\nJAXBContext jaxbContext = JAXBContext.newInstance(BspQuittung.class);\nUnmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();\nBspQuittung bspQuittung = jaxbUnmarshaller.unmarshal(domSource, BspQuittung.class).getValue();\n</code></pre>\n<p>Then I try to access the value of the <code>&lt;AnnahmeErfolgreich&gt;</code> element but instead of being <code>true</code> like in the response the object which unmarshaller gives me has the value for it being <code>false</code>.</p>\n<p>What am I missing? Trying to get deeper by calling getFirstChild() again results in an <code>Unexpected node type: com.sun.xml.messaging.saaj.soap.impl.SOAPTextImpl</code> exception.</p>\n<p>Below is the response itself:</p>\n<pre><code>&lt;SOAP-ENV:Envelope xmlns:SOAP-ENV=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n   &lt;SOAP-ENV:Header/&gt;\n   &lt;SOAP-ENV:Body&gt;\n      &lt;ns2:sendBspNachrichtNativeOutput xmlns:ns2=&quot;somevalue&quot;&gt;\n         &lt;bspQuittung&gt;&lt;![CDATA[&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;BspQuittung version=&quot;1.5&quot; fassung=&quot;2020-03-15&quot; xmlns=&quot;somevalue&quot;&gt;\n    &lt;AnnahmeErfolgreich&gt;true&lt;/AnnahmeErfolgreich&gt;\n    &lt;ErgebnisStatus&gt;\n        &lt;Tabelle&gt;someInt&lt;/Tabelle&gt;\n        &lt;Schluessel&gt;someInt&lt;/Schluessel&gt;\n    &lt;/ErgebnisStatus&gt;\n&lt;/BspQuittung&gt;]]&gt;&lt;/bspQuittung&gt;\n      &lt;/ns2:sendBspNachrichtNativeOutput&gt;\n   &lt;/SOAP-ENV:Body&gt;\n&lt;/SOAP-ENV:Envelope&gt;\n</code></pre>\n<p>How can I change the code to get the unmarshaller work as expected?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":4898014,"reputation":7936,"user_id":3946958,"accept_rate":72,"display_name":"Ravindra Kushwaha"},"score":0,"creation_date":1458018457,"post_id":36003060,"comment_id":59658426,"body_markdown":"Why are u not using the LinearLayout in it , use the property of weightSum of linearlayot than it will work","body":"Why are u not using the LinearLayout in it , use the property of weightSum of linearlayot than it will work"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1458018562,"post_id":36003060,"comment_id":59658462,"body_markdown":"Because obviously for such things RelativeLayout is better ... you can&#39;t do this(image on the right, and 3 lines of text) with a single LinearLayout","body":"Because obviously for such things RelativeLayout is better ... you can&#39;t do this(image on the right, and 3 lines of text) with a single LinearLayout"},{"owner":{"account_id":4898014,"reputation":7936,"user_id":3946958,"accept_rate":72,"display_name":"Ravindra Kushwaha"},"score":0,"creation_date":1458018754,"post_id":36003060,"comment_id":59658529,"body_markdown":"@Selvin ...But the LinearLayout approach is better (As i think) ..Use the LinearLayout divide in into two part using weight sum and than in first part it should divide it into 3 parts ..What do you think sir ??","body":"@Selvin ...But the LinearLayout approach is better (As i think) ..Use the LinearLayout divide in into two part using weight sum and than in first part it should divide it into 3 parts ..What do you think sir ??"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":1,"creation_date":1458018856,"post_id":36003060,"comment_id":59658574,"body_markdown":"obviously you are wrong .. multiple LinearLayouts instead single RelativeLayout as ListView items will cause performance problems please read official guides/trainings before writing &quot;what you think&quot; http://developer.android.com/training/improving-layouts/optimizing-layout.html","body":"obviously you are wrong .. multiple LinearLayouts instead single RelativeLayout as ListView items will cause performance problems please read official guides/trainings before writing &quot;what you think&quot; <a href=\"http://developer.android.com/training/improving-layouts/optimizing-layout.html\" rel=\"nofollow noreferrer\">developer.android.com/training/improving-layouts/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4421735,"reputation":585,"user_id":3601456,"accept_rate":50,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683632428,"creation_date":1458018829,"answer_id":36003130,"question_id":36003060,"body_markdown":"You can use an `android:weight=&quot;&quot;` to a child of a relative layout.\r\n\r\n","title":"How to align title, description and URL in an equal space","body":"<p>You can use an <code>android:weight=&quot;&quot;</code> to a child of a relative layout.</p>\n"},{"tags":[],"owner":{"account_id":7972743,"reputation":126,"user_id":6016831,"accept_rate":14,"display_name":"Gvs13"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683632478,"creation_date":1458018919,"answer_id":36003144,"question_id":36003060,"body_markdown":"Create a *LinearLayout* for title, description and URL with a vertical orientation and weightsum=3 in Layout and for each of them use width=wrap_content, height=0dp, weight=1.\r\n\r\n\r\n","title":"How to align title, description and URL in an equal space","body":"<p>Create a <em>LinearLayout</em> for title, description and URL with a vertical orientation and weightsum=3 in Layout and for each of them use width=wrap_content, height=0dp, weight=1.</p>\n"},{"tags":[],"owner":{"account_id":6672594,"reputation":5516,"user_id":5148289,"accept_rate":58,"display_name":"V-rund Puro-hit"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683632672,"creation_date":1458019133,"answer_id":36003190,"question_id":36003060,"body_markdown":"First remove `android:height` from each `TextView`. In the last `TextView`, you have set `android:layout_marginTop=&quot;50`. Remove it.\r\n\r\n**Tip**: Use `LinearLayout` if you want to show all your views vertically or horizontally. If you want to use `RelativeLayout`, make sure you give margin and padding properly so they look good.\r\n","title":"How to align title, description and URL in an equal space","body":"<p>First remove <code>android:height</code> from each <code>TextView</code>. In the last <code>TextView</code>, you have set <code>android:layout_marginTop=&quot;50</code>. Remove it.</p>\n<p><strong>Tip</strong>: Use <code>LinearLayout</code> if you want to show all your views vertically or horizontally. If you want to use <code>RelativeLayout</code>, make sure you give margin and padding properly so they look good.</p>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1683632860,"post_id":36003207,"comment_id":134393417,"body_markdown":"An explanation would be in order. E.g., what did you change? What is the idea/gist? From [the Help Center](https://stackoverflow.com/help/promotion): *&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;*. Please respond by [editing (changing) your answer](https://stackoverflow.com/posts/36003207/edit), not here in comments (*** *** ***without*** *** ***  &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today).","body":"An explanation would be in order. E.g., what did you change? What is the idea/gist? From <a href=\"https://stackoverflow.com/help/promotion\">the Help Center</a>: <i>&quot;...always explain why the solution you&#39;re presenting is appropriate and how it works&quot;</i>. Please respond by <a href=\"https://stackoverflow.com/posts/36003207/edit\">editing (changing) your answer</a>, not here in comments (*** *** <b><i>without</i></b> *** ***  &quot;Edit:&quot;, &quot;Update:&quot;, or similar - the answer should appear as if it was written today)."}],"tags":[],"owner":{"account_id":5811740,"reputation":1909,"user_id":4582558,"accept_rate":50,"display_name":"Divyang Panchal"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1683633368,"creation_date":1458019201,"answer_id":36003207,"question_id":36003060,"body_markdown":"Here is your layout,\r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/icon&quot;\r\n        android:layout_width=&quot;110dp&quot;\r\n        android:layout_height=&quot;110dp&quot;\r\n        android:layout_alignParentRight=&quot;true&quot;\r\n        android:layout_marginRight=&quot;-10dp&quot; /&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;110dp&quot;\r\n        android:layout_toLeftOf=&quot;@+id/icon&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        android:weightSum=&quot;3&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/title&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:fontFamily=&quot;Cabin-Regular&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            android:paddingLeft=&quot;10dp&quot;\r\n            android:text=&quot;Title&quot;\r\n            android:textColor=&quot;#E35B5B&quot;\r\n            android:textSize=&quot;14dp&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/desc&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:layout_below=&quot;@+id/title&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:fontFamily=&quot;Cabin-Regular&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            android:paddingLeft=&quot;10dp&quot;\r\n            android:text=&quot;Description&quot;\r\n            android:textColor=&quot;#2D2D2D&quot;\r\n            android:textSize=&quot;16dp&quot; /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/url_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;0dp&quot;\r\n            android:layout_below=&quot;@+id/title&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:gravity=&quot;center_vertical&quot;\r\n            android:paddingLeft=&quot;10dp&quot;\r\n            android:text=&quot;URL&quot;\r\n            android:textColor=&quot;#BDBDBD&quot;\r\n            android:textSize=&quot;10dp&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n","title":"How to align title, description and URL in an equal space","body":"<p>Here is your layout,</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/icon&quot;\n        android:layout_width=&quot;110dp&quot;\n        android:layout_height=&quot;110dp&quot;\n        android:layout_alignParentRight=&quot;true&quot;\n        android:layout_marginRight=&quot;-10dp&quot; /&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;110dp&quot;\n        android:layout_toLeftOf=&quot;@+id/icon&quot;\n        android:orientation=&quot;vertical&quot;\n        android:weightSum=&quot;3&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/title&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_weight=&quot;1&quot;\n            android:fontFamily=&quot;Cabin-Regular&quot;\n            android:gravity=&quot;center_vertical&quot;\n            android:paddingLeft=&quot;10dp&quot;\n            android:text=&quot;Title&quot;\n            android:textColor=&quot;#E35B5B&quot;\n            android:textSize=&quot;14dp&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/desc&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_below=&quot;@+id/title&quot;\n            android:layout_weight=&quot;1&quot;\n            android:fontFamily=&quot;Cabin-Regular&quot;\n            android:gravity=&quot;center_vertical&quot;\n            android:paddingLeft=&quot;10dp&quot;\n            android:text=&quot;Description&quot;\n            android:textColor=&quot;#2D2D2D&quot;\n            android:textSize=&quot;16dp&quot; /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/url_view&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;0dp&quot;\n            android:layout_below=&quot;@+id/title&quot;\n            android:layout_weight=&quot;1&quot;\n            android:gravity=&quot;center_vertical&quot;\n            android:paddingLeft=&quot;10dp&quot;\n            android:text=&quot;URL&quot;\n            android:textColor=&quot;#BDBDBD&quot;\n            android:textSize=&quot;10dp&quot; /&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4729530,"reputation":993,"user_id":3825545,"accept_rate":8,"display_name":"chetan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683633430,"creation_date":1458019976,"answer_id":36003353,"question_id":36003060,"body_markdown":"Use Linear layout as the parent with weightsum and equally distribute weight among the child layouts. Example: If `android:weightsum = &quot;3&quot;` for the parent and then `android:layout_weight = &quot;1&quot;` for each child layout (if you want equal space for each one of the three children).\r\n\r\nPS: dont forget to mention orientation for `LinearLayout`.\r\n\r\n","title":"How to align title, description and URL in an equal space","body":"<p>Use Linear layout as the parent with weightsum and equally distribute weight among the child layouts. Example: If <code>android:weightsum = &quot;3&quot;</code> for the parent and then <code>android:layout_weight = &quot;1&quot;</code> for each child layout (if you want equal space for each one of the three children).</p>\n<p>PS: dont forget to mention orientation for <code>LinearLayout</code>.</p>\n"},{"tags":[],"owner":{"account_id":4028665,"reputation":75,"user_id":3315750,"accept_rate":33,"display_name":"Arvind"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683634037,"creation_date":1458020199,"answer_id":36003403,"question_id":36003060,"body_markdown":"Use the same `paddingLeft` for all tests and `layout_below` like below:\r\n\r\n```lang-xml\r\n&lt;TextView\r\n    android:id=&quot;@+id/url_view&quot;\r\n    android:layout_width=&quot;wrap_content&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_below=&quot;@+id/desc&quot;\r\n    android:height=&quot;15dp&quot;\r\n    android:paddingRight=&quot;80dp&quot;\r\n    android:paddingLeft=&quot;10dp&quot;\r\n    android:text=&quot;url&quot;\r\n    android:textColor=&quot;#BDBDBD&quot;\r\n    android:textSize=&quot;10dp&quot; /&gt;\r\n```\r\n\r\n","title":"How to align title, description and URL in an equal space","body":"<p>Use the same <code>paddingLeft</code> for all tests and <code>layout_below</code> like below:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;TextView\n    android:id=&quot;@+id/url_view&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_below=&quot;@+id/desc&quot;\n    android:height=&quot;15dp&quot;\n    android:paddingRight=&quot;80dp&quot;\n    android:paddingLeft=&quot;10dp&quot;\n    android:text=&quot;url&quot;\n    android:textColor=&quot;#BDBDBD&quot;\n    android:textSize=&quot;10dp&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8043749,"reputation":25,"user_id":6064555,"display_name":"Yadu CR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683633183,"creation_date":1458021246,"answer_id":36003622,"question_id":36003060,"body_markdown":"Here is the code. Try maximum to use `LinearLayout` instead of `RelativeLayout`. `RelativeLayout` is used in cases where two or more elements have to be overlapped each other. Don&#39;t include every elements in a single layout. Divide your design into different sections, and use LinearLayout for each section and within each section, and include elements belonging to that section.\r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:orientation=&quot;horizontal&quot;\r\n    &gt;\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_weight=&quot;.25&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        &gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/title&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:textColor=&quot;#E35B5B&quot;\r\n            android:fontFamily=&quot;Cabin-Regular&quot;\r\n            android:textSize=&quot;14dp&quot;\r\n            android:layout_weight=&quot;0.33&quot;\r\n            android:singleLine=&quot;true&quot;\r\n            android:ellipsize=&quot;end&quot;\r\n            android:gravity=&quot;center|left&quot;\r\n            android:paddingLeft=&quot;10dp&quot;\r\n            android:text=&quot;Google&quot;\r\n            /&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/desc&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:textColor=&quot;#2D2D2D&quot;\r\n            android:fontFamily=&quot;Cabin-Regular&quot;\r\n            android:textSize=&quot;16dp&quot;\r\n            android:layout_weight=&quot;0.33&quot;\r\n            android:singleLine=&quot;true&quot;\r\n            android:ellipsize=&quot;end&quot;\r\n            android:gravity=&quot;center|left&quot;\r\n            android:paddingLeft=&quot;10dp&quot;\r\n            android:text=&quot;Google is a Search engine&quot;\r\n            /&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/url_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:layout_below=&quot;@+id/title&quot;\r\n            android:textColor=&quot;#BDBDBD&quot;\r\n            android:textSize=&quot;10dp&quot;\r\n            android:layout_weight=&quot;0.33&quot;\r\n            android:singleLine=&quot;true&quot;\r\n            android:ellipsize=&quot;end&quot;\r\n            android:gravity=&quot;center|left&quot;\r\n            android:paddingLeft=&quot;10dp&quot;\r\n            android:text=&quot;http://www.google.com&quot;\r\n            /&gt;\r\n    &lt;/LinearLayout&gt;\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;110dp&quot;\r\n        android:layout_height=&quot;110dp&quot;\r\n\r\n        &gt;\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/icon&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n\r\n            /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\n","title":"How to align title, description and URL in an equal space","body":"<p>Here is the code. Try maximum to use <code>LinearLayout</code> instead of <code>RelativeLayout</code>. <code>RelativeLayout</code> is used in cases where two or more elements have to be overlapped each other. Don't include every elements in a single layout. Divide your design into different sections, and use LinearLayout for each section and within each section, and include elements belonging to that section.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_width=&quot;match_parent&quot;\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:orientation=&quot;horizontal&quot;\n    &gt;\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_weight=&quot;.25&quot;\n        android:orientation=&quot;vertical&quot;\n        &gt;\n        &lt;TextView\n            android:id=&quot;@+id/title&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:textColor=&quot;#E35B5B&quot;\n            android:fontFamily=&quot;Cabin-Regular&quot;\n            android:textSize=&quot;14dp&quot;\n            android:layout_weight=&quot;0.33&quot;\n            android:singleLine=&quot;true&quot;\n            android:ellipsize=&quot;end&quot;\n            android:gravity=&quot;center|left&quot;\n            android:paddingLeft=&quot;10dp&quot;\n            android:text=&quot;Google&quot;\n            /&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/desc&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:textColor=&quot;#2D2D2D&quot;\n            android:fontFamily=&quot;Cabin-Regular&quot;\n            android:textSize=&quot;16dp&quot;\n            android:layout_weight=&quot;0.33&quot;\n            android:singleLine=&quot;true&quot;\n            android:ellipsize=&quot;end&quot;\n            android:gravity=&quot;center|left&quot;\n            android:paddingLeft=&quot;10dp&quot;\n            android:text=&quot;Google is a Search engine&quot;\n            /&gt;\n        &lt;TextView\n            android:id=&quot;@+id/url_view&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:layout_below=&quot;@+id/title&quot;\n            android:textColor=&quot;#BDBDBD&quot;\n            android:textSize=&quot;10dp&quot;\n            android:layout_weight=&quot;0.33&quot;\n            android:singleLine=&quot;true&quot;\n            android:ellipsize=&quot;end&quot;\n            android:gravity=&quot;center|left&quot;\n            android:paddingLeft=&quot;10dp&quot;\n            android:text=&quot;http://www.google.com&quot;\n            /&gt;\n    &lt;/LinearLayout&gt;\n    &lt;LinearLayout\n        android:layout_width=&quot;110dp&quot;\n        android:layout_height=&quot;110dp&quot;\n\n        &gt;\n        &lt;ImageView\n            android:id=&quot;@+id/icon&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n\n            /&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1683633264,"post_id":36003744,"comment_id":134393525,"body_markdown":"What is it supposed to do or accomplish? What did you change and why?","body":"What is it supposed to do or accomplish? What did you change and why?"}],"tags":[],"owner":{"account_id":4873576,"reputation":951,"user_id":3929340,"accept_rate":20,"display_name":"Chandan kushwaha"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683633244,"creation_date":1458021763,"answer_id":36003744,"question_id":36003060,"body_markdown":"Just check this:\r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:orientation=&quot;horizontal&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:layout_weight=&quot;1\r\n        android:padding=&quot;10dp&quot;\r\n        android:orientation=&quot;vertical&quot;&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/title&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:textColor=&quot;#E35B5B&quot;\r\n            android:fontFamily=&quot;Cabin-Regular&quot;\r\n            android:textSize=&quot;14dp&quot;\r\n            android:text=&quot;Google&quot;/&gt;\r\n\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/desc&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:textColor=&quot;#2D2D2D&quot;\r\n            android:fontFamily=&quot;Cabin-Regular&quot;\r\n            android:textSize=&quot;16dp&quot;\r\n            android:margin_top=&quot;5dp&quot;\r\n            android:text=&quot;Google is a Search engine&quot;/&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/url_view&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:textColor=&quot;#BDBDBD&quot;\r\n            android:textSize=&quot;10dp&quot;\r\n            android:margin_top=&quot;5dp&quot;\r\n            android:text=&quot;http://www.google.com&quot;/&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/icon&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:padding=&quot;10dp&quot;/&gt;\r\n\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n","title":"How to align title, description and URL in an equal space","body":"<p>Just check this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:orientation=&quot;horizontal&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_weight=&quot;1\n        android:padding=&quot;10dp&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/title&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:textColor=&quot;#E35B5B&quot;\n            android:fontFamily=&quot;Cabin-Regular&quot;\n            android:textSize=&quot;14dp&quot;\n            android:text=&quot;Google&quot;/&gt;\n\n\n        &lt;TextView\n            android:id=&quot;@+id/desc&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:textColor=&quot;#2D2D2D&quot;\n            android:fontFamily=&quot;Cabin-Regular&quot;\n            android:textSize=&quot;16dp&quot;\n            android:margin_top=&quot;5dp&quot;\n            android:text=&quot;Google is a Search engine&quot;/&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/url_view&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:textColor=&quot;#BDBDBD&quot;\n            android:textSize=&quot;10dp&quot;\n            android:margin_top=&quot;5dp&quot;\n            android:text=&quot;http://www.google.com&quot;/&gt;\n\n    &lt;/LinearLayout&gt;\n    &lt;LinearLayout\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;&gt;\n        &lt;ImageView\n            android:id=&quot;@+id/icon&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:padding=&quot;10dp&quot;/&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"}],"owner":{"account_id":7949945,"reputation":27,"user_id":6001050,"accept_rate":100,"display_name":"Pawan Thakur"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":36003207,"answer_count":8,"score":0,"last_activity_date":1683634199,"creation_date":1458018328,"question_id":36003060,"body_markdown":"Here is a screenshot of the layout as it currently appears on my screen:\r\n\r\n[![Enter image description here][1]][1]\r\n\r\nHere is the XML code snippet for the layout:\r\n\r\n```lang-xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;ImageView\r\n        android:id=&quot;@+id/icon&quot;\r\n        android:layout_width=&quot;110dp&quot;\r\n        android:layout_height=&quot;110dp&quot;\r\n        android:layout_alignParentRight=&quot;true&quot;\r\n        android:layout_marginRight=&quot;-10dp&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/title&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:height=&quot;20dp&quot;\r\n        android:fontFamily=&quot;Cabin-Regular&quot;\r\n        android:paddingLeft=&quot;10dp&quot;\r\n        android:textColor=&quot;#E35B5B&quot;\r\n        android:textSize=&quot;14dp&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/desc&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_below=&quot;@+id/title&quot;\r\n        android:height=&quot;44dp&quot;\r\n        android:fontFamily=&quot;Cabin-Regular&quot;\r\n        android:paddingLeft=&quot;10dp&quot;\r\n        android:paddingRight=&quot;100dp&quot;\r\n        android:textColor=&quot;#2D2D2D&quot;\r\n        android:textSize=&quot;16dp&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/url_view&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_below=&quot;@+id/title&quot;\r\n        android:layout_marginTop=&quot;50dp&quot;\r\n        android:height=&quot;15dp&quot;\r\n        android:paddingLeft=&quot;10dp&quot;\r\n        android:paddingRight=&quot;80dp&quot;\r\n        android:textColor=&quot;#BDBDBD&quot;\r\n        android:textSize=&quot;10dp&quot; /&gt;\r\n\r\n&lt;/RelativeLayout&gt;\r\n```\r\n\r\nI just want to have the three textviews properly aligned and have equal space among each other.\r\n\r\n  [1]: http://i.stack.imgur.com/3AOJg.png\r\n","title":"How to align title, description and URL in an equal space","body":"<p>Here is a screenshot of the layout as it currently appears on my screen:</p>\n<p><a href=\"https://i.stack.imgur.com/3AOJg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3AOJg.png\" alt=\"Enter image description here\" /></a></p>\n<p>Here is the XML code snippet for the layout:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;ImageView\n        android:id=&quot;@+id/icon&quot;\n        android:layout_width=&quot;110dp&quot;\n        android:layout_height=&quot;110dp&quot;\n        android:layout_alignParentRight=&quot;true&quot;\n        android:layout_marginRight=&quot;-10dp&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/title&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:height=&quot;20dp&quot;\n        android:fontFamily=&quot;Cabin-Regular&quot;\n        android:paddingLeft=&quot;10dp&quot;\n        android:textColor=&quot;#E35B5B&quot;\n        android:textSize=&quot;14dp&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/desc&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@+id/title&quot;\n        android:height=&quot;44dp&quot;\n        android:fontFamily=&quot;Cabin-Regular&quot;\n        android:paddingLeft=&quot;10dp&quot;\n        android:paddingRight=&quot;100dp&quot;\n        android:textColor=&quot;#2D2D2D&quot;\n        android:textSize=&quot;16dp&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/url_view&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@+id/title&quot;\n        android:layout_marginTop=&quot;50dp&quot;\n        android:height=&quot;15dp&quot;\n        android:paddingLeft=&quot;10dp&quot;\n        android:paddingRight=&quot;80dp&quot;\n        android:textColor=&quot;#BDBDBD&quot;\n        android:textSize=&quot;10dp&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>I just want to have the three textviews properly aligned and have equal space among each other.</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":17321094,"reputation":21,"user_id":12546560,"display_name":"Niko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683634081,"creation_date":1683634081,"answer_id":76209193,"question_id":76209070,"body_markdown":"You should use explicit types for collections if possible. Your problem is, that you implicitly cast your custom class to objects of the object class, which don&#39;t have your method. \r\nEither cast the objects in the loop to your class \r\n\r\n    YourClass element = (YourClass) o;\r\n    element.setError\r\n\r\nOr use an explicit type for your collection.\r\n\r\n    ArrayList&lt;YourClass&gt;","title":"How do I set error to dynamically created elements?","body":"<p>You should use explicit types for collections if possible. Your problem is, that you implicitly cast your custom class to objects of the object class, which don't have your method.\nEither cast the objects in the loop to your class</p>\n<pre><code>YourClass element = (YourClass) o;\nelement.setError\n</code></pre>\n<p>Or use an explicit type for your collection.</p>\n<pre><code>ArrayList&lt;YourClass&gt;\n</code></pre>\n"}],"owner":{"display_name":"user21742102"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683634081,"creation_date":1683633400,"question_id":76209070,"body_markdown":"I have an arraylist:\r\n```\r\nArrayList&lt;Object&gt; dynamic_arr = new ArrayList&lt;&gt;();\r\n```\r\nI am storing all the programatically created elements into this `arraylist`:\r\n```\r\nEditText myEditText = new EditText(candidate_registration.this);\r\nmyEditText.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));\r\nmyEditText.setTypeface(Typeface.create(&quot;sans-serif-smallcaps&quot;, Typeface.NORMAL));\r\nmyEditText.setHint(&quot;name&quot;);\r\ndynamic_arr.add(myEditText);\r\nparent.addView(myEditText);\r\n\r\nAppCompatSpinner spin = new AppCompatSpinner(candidate_registration.this, Spinner.MODE_DIALOG);\r\nspin.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));\r\nArrayList&lt;String&gt; spinnerArray = new ArrayList&lt;&gt;();\r\nspinnerArray.add(&quot;A&quot;);\r\nspinnerArray.add(&quot;B&quot;);\r\nspinnerArray.add(&quot;C&quot;);\r\nspin.setAdapter(arrayadapter);\r\ndynamic_arr.add(spin);\r\nparent.addView(spin);\r\n\r\n//In this way I am creating multiple elements and storing them into the arraylist\r\n```\r\nNow I want to `setError()` in each of the elements if their respective values are empty and remove the error otherwise.\r\n```\r\nfor(Object o: dynamic_arr){\r\n    //How do I proceed?\r\n}\r\n```\r\nHow do I proceed? Please help me.","title":"How do I set error to dynamically created elements?","body":"<p>I have an arraylist:</p>\n<pre><code>ArrayList&lt;Object&gt; dynamic_arr = new ArrayList&lt;&gt;();\n</code></pre>\n<p>I am storing all the programatically created elements into this <code>arraylist</code>:</p>\n<pre><code>EditText myEditText = new EditText(candidate_registration.this);\nmyEditText.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));\nmyEditText.setTypeface(Typeface.create(&quot;sans-serif-smallcaps&quot;, Typeface.NORMAL));\nmyEditText.setHint(&quot;name&quot;);\ndynamic_arr.add(myEditText);\nparent.addView(myEditText);\n\nAppCompatSpinner spin = new AppCompatSpinner(candidate_registration.this, Spinner.MODE_DIALOG);\nspin.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT));\nArrayList&lt;String&gt; spinnerArray = new ArrayList&lt;&gt;();\nspinnerArray.add(&quot;A&quot;);\nspinnerArray.add(&quot;B&quot;);\nspinnerArray.add(&quot;C&quot;);\nspin.setAdapter(arrayadapter);\ndynamic_arr.add(spin);\nparent.addView(spin);\n\n//In this way I am creating multiple elements and storing them into the arraylist\n</code></pre>\n<p>Now I want to <code>setError()</code> in each of the elements if their respective values are empty and remove the error otherwise.</p>\n<pre><code>for(Object o: dynamic_arr){\n    //How do I proceed?\n}\n</code></pre>\n<p>How do I proceed? Please help me.</p>\n"},{"tags":["java","android","checkbox"],"comments":[{"owner":{"account_id":20633,"reputation":17376,"user_id":49489,"accept_rate":100,"display_name":"Barend"},"score":0,"creation_date":1368392570,"post_id":16511535,"comment_id":23705796,"body_markdown":"For implementing the visual aspect, use the [`level-list` drawable](http://developer.android.com/guide/topics/resources/drawable-resource.html#LevelList).","body":"For implementing the visual aspect, use the <a href=\"http://developer.android.com/guide/topics/resources/drawable-resource.html#LevelList\" rel=\"nofollow noreferrer\"><code>level-list</code> drawable</a>."},{"owner":{"account_id":382093,"reputation":375,"user_id":737121,"accept_rate":60,"display_name":"Thomas"},"score":0,"creation_date":1368433125,"post_id":16511535,"comment_id":23715093,"body_markdown":"i already made a custom drawable as a state-liste and it works well with the stock checkbox code. But why the level-list drawable when the original checkbox uses state-liste ?","body":"i already made a custom drawable as a state-liste and it works well with the stock checkbox code. But why the level-list drawable when the original checkbox uses state-liste ?"},{"owner":{"account_id":2662349,"reputation":807,"user_id":2301721,"accept_rate":0,"display_name":"ashishdhiman2007"},"score":0,"creation_date":1478853072,"post_id":16511535,"comment_id":68326537,"body_markdown":"@Thomas  Did you found any suitable methodology ?","body":"@Thomas  Did you found any suitable methodology ?"},{"owner":{"account_id":382093,"reputation":375,"user_id":737121,"accept_rate":60,"display_name":"Thomas"},"score":0,"creation_date":1487325268,"post_id":16511535,"comment_id":71744540,"body_markdown":"@ashishdhiman2007 This is a very old topic, I&#39;m not sure anymore...\nHave a look by yourself: https://github.com/feeeermendoza/dev.android.HFUNotenalarm","body":"@ashishdhiman2007 This is a very old topic, I&#39;m not sure anymore... Have a look by yourself: <a href=\"https://github.com/feeeermendoza/dev.android.HFUNotenalarm\" rel=\"nofollow noreferrer\">github.com/feeeermendoza/dev.android.HFUNotenalarm</a>"}],"answers":[{"tags":[],"owner":{"account_id":7052362,"reputation":62,"user_id":5400975,"accept_rate":60,"display_name":"Mr. M"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1444735794,"creation_date":1444735794,"answer_id":33101540,"question_id":16511535,"body_markdown":"If you really insist on using a CheckBox where each element have 3 states then the following might work but I haven&#39;t tried it:\r\n- Make a class that extends the CheckBox class.\r\n- Add a variable : &quot;checkstate&quot; of type int or byte. The class should have a Boolean &quot;isChecked&quot; variable. \r\n- Override the onClick or onCheck method so that it change the checkstate variable between the 3 states instead of toggling the isChecked variable. \r\n- Upon display, check the &quot;checkstate&quot; and do some visual effect to show the 3rd state.\r\n- Finally, tell me if it works.","title":"Creating a three states checkbox on android","body":"<p>If you really insist on using a CheckBox where each element have 3 states then the following might work but I haven't tried it:\n- Make a class that extends the CheckBox class.\n- Add a variable : \"checkstate\" of type int or byte. The class should have a Boolean \"isChecked\" variable. \n- Override the onClick or onCheck method so that it change the checkstate variable between the 3 states instead of toggling the isChecked variable. \n- Upon display, check the \"checkstate\" and do some visual effect to show the 3rd state.\n- Finally, tell me if it works.</p>\n"},{"comments":[{"owner":{"account_id":2532341,"reputation":447,"user_id":3950497,"accept_rate":60,"display_name":"ingkevin"},"score":0,"creation_date":1530813333,"post_id":40939367,"comment_id":89376408,"body_markdown":"please review my [updated version](https://gist.github.com/kevin-barrientos/d75a5baa13a686367d45d17aaec7f030) of your implementation that adds support for a client to set up his own OnCheckedChangeListener and to restore the correct state when needed.","body":"please review my <a href=\"https://gist.github.com/kevin-barrientos/d75a5baa13a686367d45d17aaec7f030\" rel=\"nofollow noreferrer\">updated version</a> of your implementation that adds support for a client to set up his own OnCheckedChangeListener and to restore the correct state when needed."},{"owner":{"account_id":2460069,"reputation":291,"user_id":2144423,"display_name":"Sergey Stasishin"},"score":0,"creation_date":1680203297,"post_id":40939367,"comment_id":133862814,"body_markdown":"@ingkevin You have an error in your updated version: if you use in.readInt() then you must write this value using out.writeInt() and not out.writeValue(). Or you&#39;ll break the unmarshalling process.","body":"@ingkevin You have an error in your updated version: if you use in.readInt() then you must write this value using out.writeInt() and not out.writeValue(). Or you&#39;ll break the unmarshalling process."}],"tags":[],"owner":{"account_id":6472347,"reputation":241,"user_id":5012083,"display_name":"tazer"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1571289264,"creation_date":1480705846,"answer_id":40939367,"question_id":16511535,"body_markdown":"Old topic, but I give my solution for who  are interessed:\r\n\r\n\r\n    public class CheckBoxTriStates extends CheckBox {\r\n        static private final int UNKNOW = -1;\r\n        static private final int UNCHECKED = 0;\r\n        static private final int CHECKED = 1;\r\n        private int state;\r\n    \r\n        public CheckBoxTriStates(Context context) {\r\n            super(context);\r\n            init();\r\n        }\r\n    \r\n        public CheckBoxTriStates(Context context, AttributeSet attrs) {\r\n            super(context, attrs);\r\n            init();\r\n        }\r\n    \r\n        public CheckBoxTriStates(Context context, AttributeSet attrs, int defStyleAttr) {\r\n            super(context, attrs, defStyleAttr);\r\n            init();\r\n        }\r\n    \r\n        private void init() {\r\n            state = UNKNOW;\r\n            updateBtn();\r\n    \r\n            setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n    \r\n                // checkbox status is changed from uncheck to checked.\r\n                public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                    switch (state) {\r\n                        default:\r\n                        case UNKNOW:\r\n                            state = UNCHECKED;\r\n                            break;\r\n                        case UNCHECKED:\r\n                            state = CHECKED;\r\n                            break;\r\n                        case CHECKED:\r\n                            state = UNKNOW;\r\n                            break;\r\n                    }\r\n                    updateBtn();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void updateBtn() {\r\n            int btnDrawable = R.drawable.ic_checkbox_indeterminate_black;\r\n            switch (state) {\r\n                default:\r\n                case UNKNOW:\r\n                    btnDrawable = R.drawable.ic_checkbox_indeterminate_black;\r\n                    break;\r\n                case UNCHECKED:\r\n                    btnDrawable = R.drawable.ic_checkbox_unchecked_black;\r\n                    break;\r\n                case CHECKED:\r\n                    btnDrawable = R.drawable.ic_checkbox_checked_black;\r\n                    break;\r\n            }\r\n            \r\n            setButtonDrawable(btnDrawable);\r\n        }\r\n    \r\n        public int getState() {\r\n            return state;\r\n        }\r\n    \r\n        public void setState(int state) {\r\n            this.state = state;\r\n            updateBtn();\r\n        }\r\n    }\r\n\r\n\r\nYou can find the button resources [Here][1]. It work perfect.\r\n\r\n\r\n  [1]: https://material.io/icons/","title":"Creating a three states checkbox on android","body":"<p>Old topic, but I give my solution for who  are interessed:</p>\n\n<pre><code>public class CheckBoxTriStates extends CheckBox {\n    static private final int UNKNOW = -1;\n    static private final int UNCHECKED = 0;\n    static private final int CHECKED = 1;\n    private int state;\n\n    public CheckBoxTriStates(Context context) {\n        super(context);\n        init();\n    }\n\n    public CheckBoxTriStates(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        init();\n    }\n\n    public CheckBoxTriStates(Context context, AttributeSet attrs, int defStyleAttr) {\n        super(context, attrs, defStyleAttr);\n        init();\n    }\n\n    private void init() {\n        state = UNKNOW;\n        updateBtn();\n\n        setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n\n            // checkbox status is changed from uncheck to checked.\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n                switch (state) {\n                    default:\n                    case UNKNOW:\n                        state = UNCHECKED;\n                        break;\n                    case UNCHECKED:\n                        state = CHECKED;\n                        break;\n                    case CHECKED:\n                        state = UNKNOW;\n                        break;\n                }\n                updateBtn();\n            }\n        });\n    }\n\n    private void updateBtn() {\n        int btnDrawable = R.drawable.ic_checkbox_indeterminate_black;\n        switch (state) {\n            default:\n            case UNKNOW:\n                btnDrawable = R.drawable.ic_checkbox_indeterminate_black;\n                break;\n            case UNCHECKED:\n                btnDrawable = R.drawable.ic_checkbox_unchecked_black;\n                break;\n            case CHECKED:\n                btnDrawable = R.drawable.ic_checkbox_checked_black;\n                break;\n        }\n\n        setButtonDrawable(btnDrawable);\n    }\n\n    public int getState() {\n        return state;\n    }\n\n    public void setState(int state) {\n        this.state = state;\n        updateBtn();\n    }\n}\n</code></pre>\n\n<p>You can find the button resources <a href=\"https://material.io/icons/\" rel=\"noreferrer\">Here</a>. It work perfect.</p>\n"},{"tags":[],"owner":{"account_id":5116959,"reputation":1506,"user_id":4101786,"accept_rate":14,"display_name":"Android Dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580355937,"creation_date":1580355937,"answer_id":59978795,"question_id":16511535,"body_markdown":"If you want checkbox without Vector Animation while changing state then try this simple custom class for checkbox with indeterminate state\n\ncheck [github][1] example here\n\n  [1]: https://github.com/imhardiklakhani/IndeterminateCheckbox","title":"Creating a three states checkbox on android","body":"<p>If you want checkbox without Vector Animation while changing state then try this simple custom class for checkbox with indeterminate state</p>\n<p>check <a href=\"https://github.com/imhardiklakhani/IndeterminateCheckbox\" rel=\"nofollow noreferrer\">github</a> example here</p>\n"},{"tags":[],"owner":{"account_id":18444829,"reputation":694,"user_id":13436464,"display_name":"Mohammad Mostafa Dastjerdi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619935285,"creation_date":1619853570,"answer_id":67343830,"question_id":16511535,"body_markdown":"previously I wanted to do the same thing. after doing some hard research I approached this.\r\n\r\n**pros:**\r\n- animated button\r\n- material design\r\n\r\n-------\r\n\r\nTriStateMaterialCheckBox.kt:\r\n```kotlin\r\nimport android.content.Context\r\nimport android.util.AttributeSet\r\nimport androidx.annotation.StyleableRes\r\nimport com.google.android.material.checkbox.MaterialCheckBox\r\n\r\nclass TriStateMaterialCheckBox : MaterialCheckBox {\r\n\tconstructor(context: Context) : this(context, null)\r\n\tconstructor(context: Context, attrs: AttributeSet?) : this(context, attrs, com.google.android.material.R.attr.checkboxStyle)\r\n\tconstructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\r\n\t\tval sets = intArrayOf(R.attr.state)\r\n\t\t\r\n\t\tval typedArray = context.obtainStyledAttributes(attrs, sets)\r\n\t\t\r\n\t\ttry {\r\n\t\t\tstate = typedArray.getInt(ATTR_STATE, STATE_UNCHECKED)\r\n\t\t} finally {\r\n\t\t\ttypedArray.recycle()\r\n\t\t}\r\n\t\t\r\n\t\tinitComponent()\r\n\t}\r\n\t\r\n\tcompanion object {\r\n\t\t// @formatter:off\r\n\t\t@StyleableRes private const val ATTR_STATE = 0\r\n\t\t// @formatter:on\r\n\t\t\r\n\t\tconst val STATE_UNCHECKED: Int = 0\r\n\t\tconst val STATE_INDETERMINATE: Int = 1\r\n\t\tconst val STATE_CHECKED: Int = 2\r\n\t\t\r\n\t\tprivate val UNCHECKED = intArrayOf(R.attr.state_unchecked)\r\n\t\tprivate val INDETERMINATE = intArrayOf(R.attr.state_indeterminate)\r\n\t\tprivate val CHECKED = intArrayOf(R.attr.state_checked)\r\n\t}\r\n\t\r\n\tprivate var isChangingState = false\r\n\t\r\n\tvar state: Int\r\n\t\t@Throws(IllegalStateException::class)\r\n\t\tset(value) {\r\n\t\t\tif (isChangingState) return\r\n\t\t\tif (field == value) return\r\n\t\t\tisChangingState = true\r\n\t\t\t\r\n\t\t\tfield = value\r\n\t\t\tisChecked = when (value) {\r\n\t\t\t\tSTATE_UNCHECKED -&gt; false\r\n\t\t\t\tSTATE_INDETERMINATE -&gt; true\r\n\t\t\t\tSTATE_CHECKED -&gt; true\r\n\t\t\t\telse -&gt; throw IllegalStateException(&quot;$value is not a valid state for ${this.javaClass.name}&quot;)\r\n\t\t\t}\r\n\t\t\trefreshDrawableState()\r\n\t\t\t\r\n\t\t\tisChangingState = false\r\n\t\t\t\r\n\t\t\tonStateChanged?.let { it(this@TriStateMaterialCheckBox, value) }\r\n\t\t}\r\n\t\r\n\tvar onStateChanged: ((TriStateMaterialCheckBox, Int) -&gt; Unit)? = null\r\n\t\r\n\tprivate fun initComponent() {\r\n\t\tsetButtonDrawable(R.drawable.tri_state_button)\r\n\t\tsetOnCheckedChangeListener { _, _ -&gt;\r\n\t\t\tstate = when (state) {\r\n\t\t\t\tSTATE_UNCHECKED -&gt; STATE_CHECKED\r\n\t\t\t\tSTATE_INDETERMINATE -&gt; STATE_CHECKED\r\n\t\t\t\tSTATE_CHECKED -&gt; STATE_UNCHECKED\r\n\t\t\t\telse -&gt; -1\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\toverride fun onCreateDrawableState(extraSpace: Int): IntArray {\r\n\t\tval drawableState = super.onCreateDrawableState(extraSpace + 1)\r\n\t\t\r\n\t\tmergeDrawableStates(\r\n\t\t\tdrawableState, when (state) {\r\n\t\t\t\tSTATE_UNCHECKED -&gt; UNCHECKED\r\n\t\t\t\tSTATE_INDETERMINATE -&gt; INDETERMINATE\r\n\t\t\t\tSTATE_CHECKED -&gt; CHECKED\r\n\t\t\t\telse -&gt; throw IllegalStateException(&quot;$state is not a valid state for ${this.javaClass.name}&quot;)\r\n\t\t\t}\r\n\t\t)\r\n\t\t\r\n\t\treturn drawableState\r\n\t}\r\n}\r\n```\r\n\r\nattrs.xml:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;resources&gt;\r\n\t&lt;attr name=&quot;state&quot; format=&quot;enum&quot;&gt;\r\n\t\t&lt;enum name=&quot;unchecked&quot; value=&quot;0&quot; /&gt;\r\n\t\t&lt;enum name=&quot;indeterminate&quot; value=&quot;1&quot; /&gt;\r\n\t\t&lt;enum name=&quot;checked&quot; value=&quot;2&quot; /&gt;\r\n\t&lt;/attr&gt;\r\n\t\r\n\t&lt;declare-styleable name=&quot;TriStateMaterialCheckBox&quot;&gt;\r\n\t\t&lt;attr name=&quot;state&quot; /&gt;\r\n\t\t&lt;attr name=&quot;state_unchecked&quot; format=&quot;boolean&quot; /&gt;\r\n\t\t&lt;attr name=&quot;state_indeterminate&quot; format=&quot;boolean&quot; /&gt;\r\n\t\t&lt;attr name=&quot;state_checked&quot; format=&quot;boolean&quot; /&gt;\r\n\t&lt;/declare-styleable&gt;\r\n&lt;/resources&gt;\r\n```\r\n\r\ntri_state_button.xml:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; android:enterFadeDuration=&quot;@android:integer/config_shortAnimTime&quot; android:exitFadeDuration=&quot;@android:integer/config_shortAnimTime&quot;&gt;\r\n\t&lt;item android:drawable=&quot;@drawable/ic_unchecked&quot; app:state_unchecked=&quot;true&quot; /&gt;\r\n\t&lt;item android:drawable=&quot;@drawable/ic_indeterminate&quot; app:state_indeterminate=&quot;true&quot; /&gt;\r\n\t&lt;item android:drawable=&quot;@drawable/ic_checked&quot; app:state_checked=&quot;true&quot; /&gt;\r\n\t&lt;item android:drawable=&quot;@drawable/ic_unchecked&quot; /&gt;\r\n&lt;/selector&gt;\r\n```","title":"Creating a three states checkbox on android","body":"<p>previously I wanted to do the same thing. after doing some hard research I approached this.</p>\n<p><strong>pros:</strong></p>\n<ul>\n<li>animated button</li>\n<li>material design</li>\n</ul>\n<hr />\n<p>TriStateMaterialCheckBox.kt:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import android.content.Context\nimport android.util.AttributeSet\nimport androidx.annotation.StyleableRes\nimport com.google.android.material.checkbox.MaterialCheckBox\n\nclass TriStateMaterialCheckBox : MaterialCheckBox {\n    constructor(context: Context) : this(context, null)\n    constructor(context: Context, attrs: AttributeSet?) : this(context, attrs, com.google.android.material.R.attr.checkboxStyle)\n    constructor(context: Context, attrs: AttributeSet?, defStyleAttr: Int) : super(context, attrs, defStyleAttr) {\n        val sets = intArrayOf(R.attr.state)\n        \n        val typedArray = context.obtainStyledAttributes(attrs, sets)\n        \n        try {\n            state = typedArray.getInt(ATTR_STATE, STATE_UNCHECKED)\n        } finally {\n            typedArray.recycle()\n        }\n        \n        initComponent()\n    }\n    \n    companion object {\n        // @formatter:off\n        @StyleableRes private const val ATTR_STATE = 0\n        // @formatter:on\n        \n        const val STATE_UNCHECKED: Int = 0\n        const val STATE_INDETERMINATE: Int = 1\n        const val STATE_CHECKED: Int = 2\n        \n        private val UNCHECKED = intArrayOf(R.attr.state_unchecked)\n        private val INDETERMINATE = intArrayOf(R.attr.state_indeterminate)\n        private val CHECKED = intArrayOf(R.attr.state_checked)\n    }\n    \n    private var isChangingState = false\n    \n    var state: Int\n        @Throws(IllegalStateException::class)\n        set(value) {\n            if (isChangingState) return\n            if (field == value) return\n            isChangingState = true\n            \n            field = value\n            isChecked = when (value) {\n                STATE_UNCHECKED -&gt; false\n                STATE_INDETERMINATE -&gt; true\n                STATE_CHECKED -&gt; true\n                else -&gt; throw IllegalStateException(&quot;$value is not a valid state for ${this.javaClass.name}&quot;)\n            }\n            refreshDrawableState()\n            \n            isChangingState = false\n            \n            onStateChanged?.let { it(this@TriStateMaterialCheckBox, value) }\n        }\n    \n    var onStateChanged: ((TriStateMaterialCheckBox, Int) -&gt; Unit)? = null\n    \n    private fun initComponent() {\n        setButtonDrawable(R.drawable.tri_state_button)\n        setOnCheckedChangeListener { _, _ -&gt;\n            state = when (state) {\n                STATE_UNCHECKED -&gt; STATE_CHECKED\n                STATE_INDETERMINATE -&gt; STATE_CHECKED\n                STATE_CHECKED -&gt; STATE_UNCHECKED\n                else -&gt; -1\n            }\n        }\n    }\n    \n    override fun onCreateDrawableState(extraSpace: Int): IntArray {\n        val drawableState = super.onCreateDrawableState(extraSpace + 1)\n        \n        mergeDrawableStates(\n            drawableState, when (state) {\n                STATE_UNCHECKED -&gt; UNCHECKED\n                STATE_INDETERMINATE -&gt; INDETERMINATE\n                STATE_CHECKED -&gt; CHECKED\n                else -&gt; throw IllegalStateException(&quot;$state is not a valid state for ${this.javaClass.name}&quot;)\n            }\n        )\n        \n        return drawableState\n    }\n}\n</code></pre>\n<p>attrs.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;resources&gt;\n    &lt;attr name=&quot;state&quot; format=&quot;enum&quot;&gt;\n        &lt;enum name=&quot;unchecked&quot; value=&quot;0&quot; /&gt;\n        &lt;enum name=&quot;indeterminate&quot; value=&quot;1&quot; /&gt;\n        &lt;enum name=&quot;checked&quot; value=&quot;2&quot; /&gt;\n    &lt;/attr&gt;\n    \n    &lt;declare-styleable name=&quot;TriStateMaterialCheckBox&quot;&gt;\n        &lt;attr name=&quot;state&quot; /&gt;\n        &lt;attr name=&quot;state_unchecked&quot; format=&quot;boolean&quot; /&gt;\n        &lt;attr name=&quot;state_indeterminate&quot; format=&quot;boolean&quot; /&gt;\n        &lt;attr name=&quot;state_checked&quot; format=&quot;boolean&quot; /&gt;\n    &lt;/declare-styleable&gt;\n&lt;/resources&gt;\n</code></pre>\n<p>tri_state_button.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; android:enterFadeDuration=&quot;@android:integer/config_shortAnimTime&quot; android:exitFadeDuration=&quot;@android:integer/config_shortAnimTime&quot;&gt;\n    &lt;item android:drawable=&quot;@drawable/ic_unchecked&quot; app:state_unchecked=&quot;true&quot; /&gt;\n    &lt;item android:drawable=&quot;@drawable/ic_indeterminate&quot; app:state_indeterminate=&quot;true&quot; /&gt;\n    &lt;item android:drawable=&quot;@drawable/ic_checked&quot; app:state_checked=&quot;true&quot; /&gt;\n    &lt;item android:drawable=&quot;@drawable/ic_unchecked&quot; /&gt;\n&lt;/selector&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12310557,"reputation":4622,"user_id":8982117,"display_name":"YCuicui"},"score":1,"creation_date":1683630165,"post_id":75142985,"comment_id":134392765,"body_markdown":"In xml layout use com.google.android.material.checkbox.MaterialCheckBox.","body":"In xml layout use com.google.android.material.checkbox.MaterialCheckBox."}],"tags":[],"owner":{"account_id":9462283,"reputation":1332,"user_id":7035703,"display_name":"anro"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1683633482,"creation_date":1673939603,"answer_id":75142985,"question_id":16511535,"body_markdown":"Last version of material library supports three-states checkboxes.\r\nAdd this to build.gradle:\r\n\r\n    implementation &#39;com.google.android.material:material:1.8.0-rc01&#39;\r\n\r\nAfter that, you can set indeterminate state both in xml:\r\n\r\n      &lt;com.google.android.material.checkbox.MaterialCheckBox\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:checkedState=&quot;indeterminate&quot; /&gt;\r\n\r\nOr through code:\r\n\r\n        checkbox.checkedState = when (childrenSelected) {\r\n            0 -&gt; MaterialCheckBox.STATE_UNCHECKED\r\n            childrenTotal -&gt; MaterialCheckBox.STATE_CHECKED\r\n            else -&gt; MaterialCheckBox.STATE_INDETERMINATE\r\n        }\r\n\r\nWhere childrenSelected is the number of selected checkboxes. You can also customize checkbox appearance as you like, see full documentation here:\r\nhttps://developer.android.com/reference/com/google/android/material/checkbox/MaterialCheckBox","title":"Creating a three states checkbox on android","body":"<p>Last version of material library supports three-states checkboxes.\nAdd this to build.gradle:</p>\n<pre><code>implementation 'com.google.android.material:material:1.8.0-rc01'\n</code></pre>\n<p>After that, you can set indeterminate state both in xml:</p>\n<pre><code>  &lt;com.google.android.material.checkbox.MaterialCheckBox\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    app:checkedState=&quot;indeterminate&quot; /&gt;\n</code></pre>\n<p>Or through code:</p>\n<pre><code>    checkbox.checkedState = when (childrenSelected) {\n        0 -&gt; MaterialCheckBox.STATE_UNCHECKED\n        childrenTotal -&gt; MaterialCheckBox.STATE_CHECKED\n        else -&gt; MaterialCheckBox.STATE_INDETERMINATE\n    }\n</code></pre>\n<p>Where childrenSelected is the number of selected checkboxes. You can also customize checkbox appearance as you like, see full documentation here:\n<a href=\"https://developer.android.com/reference/com/google/android/material/checkbox/MaterialCheckBox\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/com/google/android/material/checkbox/MaterialCheckBox</a></p>\n"}],"owner":{"account_id":382093,"reputation":375,"user_id":737121,"accept_rate":60,"display_name":"Thomas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15783,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"answer_count":5,"score":29,"last_activity_date":1683633482,"creation_date":1368389129,"question_id":16511535,"body_markdown":"I&#39;m stuck in front of a big problem:\r\nI&#39;d like to make three state checkbox on android.\r\nIt&#39;s a checkbox upon a ListView with checkboxes. It should allows user to switch between three states:\r\n\r\n - all checked\r\n - none checked\r\n - misc checked\r\n\r\nAnd optionally retain the misc state on change.\r\n\r\nIf I&#39;m right I should make a subclass of the CompoundButton class and implement a int mstate intead of the boolean mchecked.\r\nThen I should override the event listener, the functions to save the state, and the state getter and setter.\r\n\r\nMy question is basically how can I implement that ?\r\nHow to switch between the drawable states ? (I have implemented the middle_state in the xml) and how to correctly implement the event handler?\r\n\r\nHere is the implementation I started:\r\n\r\n\r\n    public class TriStateCheckBox extends CompoundButton{\r\n    \tprivate int state;\r\n    \t\r\n    \tpublic TriStateCheckBox(Context context) {\r\n    \t\tsuper(context);\r\n    \t}\r\n    \tpublic static interface onCheckChangedListener{\r\n    \t\tvoid onCheckChanged(TriStateCheckBox view, int state);\r\n    \t}\r\n    \t\r\n    \tpublic void onCheckChanged(TriStateCheckBox view, int state){\r\n    \t\tthis.state = state;\r\n    \t}\r\n    }\r\n\r\nHere is the code of the stock CompoundButton:\r\n\r\n    /*\r\n     * Copyright (C) 2007 The Android Open Source Project\r\n     *\r\n     * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n     * you may not use this file except in compliance with the License.\r\n     * You may obtain a copy of the License at\r\n     *\r\n     *      http://www.apache.org/licenses/LICENSE-2.0\r\n     *\r\n     * Unless required by applicable law or agreed to in writing, software\r\n     * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n     * See the License for the specific language governing permissions and\r\n     * limitations under the License.\r\n     */\r\n    \r\n    package android.widget;\r\n    \r\n    import com.android.internal.R;\r\n    \r\n    import android.content.Context;\r\n    import android.content.res.TypedArray;\r\n    import android.graphics.Canvas;\r\n    import android.graphics.drawable.Drawable;\r\n    import android.os.Parcel;\r\n    import android.os.Parcelable;\r\n    import android.util.AttributeSet;\r\n    import android.view.Gravity;\r\n    import android.view.ViewDebug;\r\n    import android.view.accessibility.AccessibilityEvent;\r\n    import android.view.accessibility.AccessibilityNodeInfo;\r\n    \r\n    /**\r\n     * &lt;p&gt;\r\n     * A button with two states, checked and unchecked. When the button is pressed\r\n     * or clicked, the state changes automatically.\r\n     * &lt;/p&gt;\r\n     *\r\n     * &lt;p&gt;&lt;strong&gt;XML attributes&lt;/strong&gt;&lt;/p&gt;\r\n     * &lt;p&gt;\r\n     * See {@link android.R.styleable#CompoundButton\r\n     * CompoundButton Attributes}, {@link android.R.styleable#Button Button\r\n     * Attributes}, {@link android.R.styleable#TextView TextView Attributes}, {@link\r\n     * android.R.styleable#View View Attributes}\r\n     * &lt;/p&gt;\r\n     */\r\n    public abstract class CompoundButton extends Button implements Checkable {\r\n        private boolean mChecked;\r\n        private int mButtonResource;\r\n        private boolean mBroadcasting;\r\n        private Drawable mButtonDrawable;\r\n        private OnCheckedChangeListener mOnCheckedChangeListener;\r\n        private OnCheckedChangeListener mOnCheckedChangeWidgetListener;\r\n    \r\n        private static final int[] CHECKED_STATE_SET = {\r\n            R.attr.state_checked\r\n        };\r\n    \r\n        public CompoundButton(Context context) {\r\n            this(context, null);\r\n        }\r\n    \r\n        public CompoundButton(Context context, AttributeSet attrs) {\r\n            this(context, attrs, 0);\r\n        }\r\n    \r\n        public CompoundButton(Context context, AttributeSet attrs, int defStyle) {\r\n            super(context, attrs, defStyle);\r\n    \r\n            TypedArray a =\r\n                    context.obtainStyledAttributes(\r\n                            attrs, com.android.internal.R.styleable.CompoundButton, defStyle, 0);\r\n    \r\n            Drawable d = a.getDrawable(com.android.internal.R.styleable.CompoundButton_button);\r\n            if (d != null) {\r\n                setButtonDrawable(d);\r\n            }\r\n    \r\n            boolean checked = a\r\n                    .getBoolean(com.android.internal.R.styleable.CompoundButton_checked, false);\r\n            setChecked(checked);\r\n    \r\n            a.recycle();\r\n        }\r\n    \r\n        public void toggle() {\r\n            setChecked(!mChecked);\r\n        }\r\n    \r\n        @Override\r\n        public boolean performClick() {\r\n            /*\r\n             * XXX: These are tiny, need some surrounding &#39;expanded touch area&#39;,\r\n             * which will need to be implemented in Button if we only override\r\n             * performClick()\r\n             */\r\n    \r\n            /* When clicked, toggle the state */\r\n            toggle();\r\n            return super.performClick();\r\n        }\r\n    \r\n        @ViewDebug.ExportedProperty\r\n        public boolean isChecked() {\r\n            return mChecked;\r\n        }\r\n    \r\n        /**\r\n         * &lt;p&gt;Changes the checked state of this button.&lt;/p&gt;\r\n         *\r\n         * @param checked true to check the button, false to uncheck it\r\n         */\r\n        public void setChecked(boolean checked) {\r\n            if (mChecked != checked) {\r\n                mChecked = checked;\r\n                refreshDrawableState();\r\n    \r\n                // Avoid infinite recursions if setChecked() is called from a listener\r\n                if (mBroadcasting) {\r\n                    return;\r\n                }\r\n    \r\n                mBroadcasting = true;\r\n                if (mOnCheckedChangeListener != null) {\r\n                    mOnCheckedChangeListener.onCheckedChanged(this, mChecked);\r\n                }\r\n                if (mOnCheckedChangeWidgetListener != null) {\r\n                    mOnCheckedChangeWidgetListener.onCheckedChanged(this, mChecked);\r\n                }\r\n    \r\n                mBroadcasting = false;            \r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Register a callback to be invoked when the checked state of this button\r\n         * changes.\r\n         *\r\n         * @param listener the callback to call on checked state change\r\n         */\r\n        public void setOnCheckedChangeListener(OnCheckedChangeListener listener) {\r\n            mOnCheckedChangeListener = listener;\r\n        }\r\n    \r\n        /**\r\n         * Register a callback to be invoked when the checked state of this button\r\n         * changes. This callback is used for internal purpose only.\r\n         *\r\n         * @param listener the callback to call on checked state change\r\n         * @hide\r\n         */\r\n        void setOnCheckedChangeWidgetListener(OnCheckedChangeListener listener) {\r\n            mOnCheckedChangeWidgetListener = listener;\r\n        }\r\n    \r\n        /**\r\n         * Interface definition for a callback to be invoked when the checked state\r\n         * of a compound button changed.\r\n         */\r\n        public static interface OnCheckedChangeListener {\r\n            /**\r\n             * Called when the checked state of a compound button has changed.\r\n             *\r\n             * @param buttonView The compound button view whose state has changed.\r\n             * @param isChecked  The new checked state of buttonView.\r\n             */\r\n            void onCheckedChanged(CompoundButton buttonView, boolean isChecked);\r\n        }\r\n    \r\n        /**\r\n         * Set the background to a given Drawable, identified by its resource id.\r\n         *\r\n         * @param resid the resource id of the drawable to use as the background \r\n         */\r\n        public void setButtonDrawable(int resid) {\r\n            if (resid != 0 &amp;&amp; resid == mButtonResource) {\r\n                return;\r\n            }\r\n    \r\n            mButtonResource = resid;\r\n    \r\n            Drawable d = null;\r\n            if (mButtonResource != 0) {\r\n                d = getResources().getDrawable(mButtonResource);\r\n            }\r\n            setButtonDrawable(d);\r\n        }\r\n    \r\n        /**\r\n         * Set the background to a given Drawable\r\n         *\r\n         * @param d The Drawable to use as the background\r\n         */\r\n        public void setButtonDrawable(Drawable d) {\r\n            if (d != null) {\r\n                if (mButtonDrawable != null) {\r\n                    mButtonDrawable.setCallback(null);\r\n                    unscheduleDrawable(mButtonDrawable);\r\n                }\r\n                d.setCallback(this);\r\n                d.setState(getDrawableState());\r\n                d.setVisible(getVisibility() == VISIBLE, false);\r\n                mButtonDrawable = d;\r\n                mButtonDrawable.setState(null);\r\n                setMinHeight(mButtonDrawable.getIntrinsicHeight());\r\n            }\r\n    \r\n            refreshDrawableState();\r\n        }\r\n    \r\n        @Override\r\n        public void onInitializeAccessibilityEvent(AccessibilityEvent event) {\r\n            super.onInitializeAccessibilityEvent(event);\r\n            event.setChecked(mChecked);\r\n        }\r\n    \r\n        @Override\r\n        public void onInitializeAccessibilityNodeInfo(AccessibilityNodeInfo info) {\r\n            super.onInitializeAccessibilityNodeInfo(info);\r\n            info.setCheckable(true);\r\n            info.setChecked(mChecked);\r\n        }\r\n    \r\n        @Override\r\n        protected void onDraw(Canvas canvas) {\r\n            super.onDraw(canvas);\r\n    \r\n            final Drawable buttonDrawable = mButtonDrawable;\r\n            if (buttonDrawable != null) {\r\n                final int verticalGravity = getGravity() &amp; Gravity.VERTICAL_GRAVITY_MASK;\r\n                final int height = buttonDrawable.getIntrinsicHeight();\r\n    \r\n                int y = 0;\r\n    \r\n                switch (verticalGravity) {\r\n                    case Gravity.BOTTOM:\r\n                        y = getHeight() - height;\r\n                        break;\r\n                    case Gravity.CENTER_VERTICAL:\r\n                        y = (getHeight() - height) / 2;\r\n                        break;\r\n                }\r\n    \r\n                buttonDrawable.setBounds(0, y, buttonDrawable.getIntrinsicWidth(), y + height);\r\n                buttonDrawable.draw(canvas);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected int[] onCreateDrawableState(int extraSpace) {\r\n            final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);\r\n            if (isChecked()) {\r\n                mergeDrawableStates(drawableState, CHECKED_STATE_SET);\r\n            }\r\n            return drawableState;\r\n        }\r\n    \r\n        @Override\r\n        protected void drawableStateChanged() {\r\n            super.drawableStateChanged();\r\n            \r\n            if (mButtonDrawable != null) {\r\n                int[] myDrawableState = getDrawableState();\r\n                \r\n                // Set the state of the Drawable\r\n                mButtonDrawable.setState(myDrawableState);\r\n                \r\n                invalidate();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected boolean verifyDrawable(Drawable who) {\r\n            return super.verifyDrawable(who) || who == mButtonDrawable;\r\n        }\r\n    \r\n        @Override\r\n        public void jumpDrawablesToCurrentState() {\r\n            super.jumpDrawablesToCurrentState();\r\n            if (mButtonDrawable != null) mButtonDrawable.jumpToCurrentState();\r\n        }\r\n    \r\n        static class SavedState extends BaseSavedState {\r\n            boolean checked;\r\n    \r\n            /**\r\n             * Constructor called from {@link CompoundButton#onSaveInstanceState()}\r\n             */\r\n            SavedState(Parcelable superState) {\r\n                super(superState);\r\n            }\r\n            \r\n            /**\r\n             * Constructor called from {@link #CREATOR}\r\n             */\r\n            private SavedState(Parcel in) {\r\n                super(in);\r\n                checked = (Boolean)in.readValue(null);\r\n            }\r\n    \r\n            @Override\r\n            public void writeToParcel(Parcel out, int flags) {\r\n                super.writeToParcel(out, flags);\r\n                out.writeValue(checked);\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return &quot;CompoundButton.SavedState{&quot;\r\n                        + Integer.toHexString(System.identityHashCode(this))\r\n                        + &quot; checked=&quot; + checked + &quot;}&quot;;\r\n            }\r\n    \r\n            public static final Parcelable.Creator&lt;SavedState&gt; CREATOR\r\n                    = new Parcelable.Creator&lt;SavedState&gt;() {\r\n                public SavedState createFromParcel(Parcel in) {\r\n                    return new SavedState(in);\r\n                }\r\n    \r\n                public SavedState[] newArray(int size) {\r\n                    return new SavedState[size];\r\n                }\r\n            };\r\n        }\r\n    \r\n        @Override\r\n        public Parcelable onSaveInstanceState() {\r\n            // Force our ancestor class to save its state\r\n            setFreezesText(true);\r\n            Parcelable superState = super.onSaveInstanceState();\r\n    \r\n            SavedState ss = new SavedState(superState);\r\n    \r\n            ss.checked = isChecked();\r\n            return ss;\r\n        }\r\n    \r\n        @Override\r\n        public void onRestoreInstanceState(Parcelable state) {\r\n            SavedState ss = (SavedState) state;\r\n      \r\n            super.onRestoreInstanceState(ss.getSuperState());\r\n            setChecked(ss.checked);\r\n            requestLayout();\r\n        }\r\n    }\r\n\r\nHere is my xml state-liste implementation (working):\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;&gt;\r\n        \r\n        &lt;item android:state_checked=&quot;false&quot;\r\n              android:state_pressed=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_off_pressed&quot; /&gt; &lt;!-- unchecked pressed --&gt;\r\n              \r\n        &lt;item android:state_checked=&quot;false&quot;\r\n              android:state_selected=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_off_selected&quot; /&gt; &lt;!-- unchecked selected --&gt;\r\n              \r\n        &lt;item android:state_checked=&quot;true&quot;\r\n              android:state_pressed=&quot;false&quot;\r\n              android:state_focused=&quot;false&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on&quot; /&gt; &lt;!-- checked --&gt;\r\n              \r\n        &lt;item android:state_checked=&quot;true&quot;\r\n              android:state_pressed=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on_pressed&quot; /&gt; &lt;!-- checked pressed--&gt;\r\n              \r\n        &lt;item android:state_checked=&quot;true&quot;\r\n              android:state_selected=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on_selected&quot; /&gt; &lt;!-- checked selected--&gt;\r\n                   \r\n        &lt;item android:state_middle=&quot;true&quot;\r\n              android:state_pressed=&quot;false&quot;\r\n              android:state_focused=&quot;false&quot;\r\n              android:drawable=&quot;@drawable/btn_check_middle&quot; /&gt; &lt;!-- middle --&gt;        \r\n               \r\n        &lt;item android:state_middle=&quot;true&quot;\r\n              android:state_pressed=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_middle_pressed&quot; /&gt; &lt;!-- middle pressed--&gt;\r\n              \r\n        &lt;item android:state_middle=&quot;true&quot;\r\n              android:state_selected=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_middle_selected&quot;  /&gt; &lt;!-- middle selected--&gt; \r\n          \r\n        &lt;item android:drawable=&quot;@drawable/btn_check_off&quot; /&gt; &lt;!-- unchecked --&gt;\r\n    &lt;/selector&gt;\r\n\r\nAnd here is the stock xml implementation for the checkbox:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;!-- Copyright (C) 2008 The Android Open Source Project\r\n    \r\n         Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);\r\n         you may not use this file except in compliance with the License.\r\n         You may obtain a copy of the License at\r\n    \r\n              http://www.apache.org/licenses/LICENSE-2.0\r\n    \r\n         Unless required by applicable law or agreed to in writing, software\r\n         distributed under the License is distributed on an &quot;AS IS&quot; BASIS,\r\n         WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n         See the License for the specific language governing permissions and\r\n         limitations under the License.\r\n    --&gt;\r\n    \r\n    &lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\r\n    \r\n        &lt;!-- Enabled states --&gt;\r\n            \r\n        &lt;item android:state_checked=&quot;true&quot; android:state_window_focused=&quot;false&quot;\r\n              android:state_enabled=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on&quot; /&gt;\r\n        &lt;item android:state_checked=&quot;false&quot; android:state_window_focused=&quot;false&quot;\r\n              android:state_enabled=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_off&quot; /&gt;\r\n    \r\n        &lt;item android:state_checked=&quot;true&quot; android:state_pressed=&quot;true&quot;\r\n              android:state_enabled=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on_pressed&quot; /&gt;\r\n        &lt;item android:state_checked=&quot;false&quot; android:state_pressed=&quot;true&quot;\r\n              android:state_enabled=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_off_pressed&quot; /&gt;\r\n    \r\n        &lt;item android:state_checked=&quot;true&quot; android:state_focused=&quot;true&quot;\r\n              android:state_enabled=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on_selected&quot; /&gt;\r\n        &lt;item android:state_checked=&quot;false&quot; android:state_focused=&quot;true&quot;\r\n              android:state_enabled=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_off_selected&quot; /&gt;\r\n    \r\n        &lt;item android:state_checked=&quot;false&quot;\r\n              android:state_enabled=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_off&quot; /&gt;\r\n        &lt;item android:state_checked=&quot;true&quot;\r\n              android:state_enabled=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on&quot; /&gt;\r\n    \r\n    \r\n        &lt;!-- Disabled states --&gt;\r\n    \r\n        &lt;item android:state_checked=&quot;true&quot; android:state_window_focused=&quot;false&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on_disable&quot; /&gt;\r\n        &lt;item android:state_checked=&quot;false&quot; android:state_window_focused=&quot;false&quot;\r\n              android:drawable=&quot;@drawable/btn_check_off_disable&quot; /&gt;\r\n    \r\n        &lt;item android:state_checked=&quot;true&quot; android:state_focused=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_on_disable_focused&quot; /&gt;\r\n        &lt;item android:state_checked=&quot;false&quot; android:state_focused=&quot;true&quot;\r\n              android:drawable=&quot;@drawable/btn_check_off_disable_focused&quot; /&gt;\r\n    \r\n        &lt;item android:state_checked=&quot;false&quot; android:drawable=&quot;@drawable/btn_check_off_disable&quot; /&gt;\r\n        &lt;item android:state_checked=&quot;true&quot; android:drawable=&quot;@drawable/btn_check_on_disable&quot; /&gt;\r\n    \r\n    &lt;/selector&gt;","title":"Creating a three states checkbox on android","body":"<p>I'm stuck in front of a big problem:\nI'd like to make three state checkbox on android.\nIt's a checkbox upon a ListView with checkboxes. It should allows user to switch between three states:</p>\n\n<ul>\n<li>all checked</li>\n<li>none checked</li>\n<li>misc checked</li>\n</ul>\n\n<p>And optionally retain the misc state on change.</p>\n\n<p>If I'm right I should make a subclass of the CompoundButton class and implement a int mstate intead of the boolean mchecked.\nThen I should override the event listener, the functions to save the state, and the state getter and setter.</p>\n\n<p>My question is basically how can I implement that ?\nHow to switch between the drawable states ? (I have implemented the middle_state in the xml) and how to correctly implement the event handler?</p>\n\n<p>Here is the implementation I started:</p>\n\n<pre><code>public class TriStateCheckBox extends CompoundButton{\n    private int state;\n\n    public TriStateCheckBox(Context context) {\n        super(context);\n    }\n    public static interface onCheckChangedListener{\n        void onCheckChanged(TriStateCheckBox view, int state);\n    }\n\n    public void onCheckChanged(TriStateCheckBox view, int state){\n        this.state = state;\n    }\n}\n</code></pre>\n\n<p>Here is the code of the stock CompoundButton:</p>\n\n<pre><code>/*\n * Copyright (C) 2007 The Android Open Source Project\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\npackage android.widget;\n\nimport com.android.internal.R;\n\nimport android.content.Context;\nimport android.content.res.TypedArray;\nimport android.graphics.Canvas;\nimport android.graphics.drawable.Drawable;\nimport android.os.Parcel;\nimport android.os.Parcelable;\nimport android.util.AttributeSet;\nimport android.view.Gravity;\nimport android.view.ViewDebug;\nimport android.view.accessibility.AccessibilityEvent;\nimport android.view.accessibility.AccessibilityNodeInfo;\n\n/**\n * &lt;p&gt;\n * A button with two states, checked and unchecked. When the button is pressed\n * or clicked, the state changes automatically.\n * &lt;/p&gt;\n *\n * &lt;p&gt;&lt;strong&gt;XML attributes&lt;/strong&gt;&lt;/p&gt;\n * &lt;p&gt;\n * See {@link android.R.styleable#CompoundButton\n * CompoundButton Attributes}, {@link android.R.styleable#Button Button\n * Attributes}, {@link android.R.styleable#TextView TextView Attributes}, {@link\n * android.R.styleable#View View Attributes}\n * &lt;/p&gt;\n */\npublic abstract class CompoundButton extends Button implements Checkable {\n    private boolean mChecked;\n    private int mButtonResource;\n    private boolean mBroadcasting;\n    private Drawable mButtonDrawable;\n    private OnCheckedChangeListener mOnCheckedChangeListener;\n    private OnCheckedChangeListener mOnCheckedChangeWidgetListener;\n\n    private static final int[] CHECKED_STATE_SET = {\n        R.attr.state_checked\n    };\n\n    public CompoundButton(Context context) {\n        this(context, null);\n    }\n\n    public CompoundButton(Context context, AttributeSet attrs) {\n        this(context, attrs, 0);\n    }\n\n    public CompoundButton(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n\n        TypedArray a =\n                context.obtainStyledAttributes(\n                        attrs, com.android.internal.R.styleable.CompoundButton, defStyle, 0);\n\n        Drawable d = a.getDrawable(com.android.internal.R.styleable.CompoundButton_button);\n        if (d != null) {\n            setButtonDrawable(d);\n        }\n\n        boolean checked = a\n                .getBoolean(com.android.internal.R.styleable.CompoundButton_checked, false);\n        setChecked(checked);\n\n        a.recycle();\n    }\n\n    public void toggle() {\n        setChecked(!mChecked);\n    }\n\n    @Override\n    public boolean performClick() {\n        /*\n         * XXX: These are tiny, need some surrounding 'expanded touch area',\n         * which will need to be implemented in Button if we only override\n         * performClick()\n         */\n\n        /* When clicked, toggle the state */\n        toggle();\n        return super.performClick();\n    }\n\n    @ViewDebug.ExportedProperty\n    public boolean isChecked() {\n        return mChecked;\n    }\n\n    /**\n     * &lt;p&gt;Changes the checked state of this button.&lt;/p&gt;\n     *\n     * @param checked true to check the button, false to uncheck it\n     */\n    public void setChecked(boolean checked) {\n        if (mChecked != checked) {\n            mChecked = checked;\n            refreshDrawableState();\n\n            // Avoid infinite recursions if setChecked() is called from a listener\n            if (mBroadcasting) {\n                return;\n            }\n\n            mBroadcasting = true;\n            if (mOnCheckedChangeListener != null) {\n                mOnCheckedChangeListener.onCheckedChanged(this, mChecked);\n            }\n            if (mOnCheckedChangeWidgetListener != null) {\n                mOnCheckedChangeWidgetListener.onCheckedChanged(this, mChecked);\n            }\n\n            mBroadcasting = false;            \n        }\n    }\n\n    /**\n     * Register a callback to be invoked when the checked state of this button\n     * changes.\n     *\n     * @param listener the callback to call on checked state change\n     */\n    public void setOnCheckedChangeListener(OnCheckedChangeListener listener) {\n        mOnCheckedChangeListener = listener;\n    }\n\n    /**\n     * Register a callback to be invoked when the checked state of this button\n     * changes. This callback is used for internal purpose only.\n     *\n     * @param listener the callback to call on checked state change\n     * @hide\n     */\n    void setOnCheckedChangeWidgetListener(OnCheckedChangeListener listener) {\n        mOnCheckedChangeWidgetListener = listener;\n    }\n\n    /**\n     * Interface definition for a callback to be invoked when the checked state\n     * of a compound button changed.\n     */\n    public static interface OnCheckedChangeListener {\n        /**\n         * Called when the checked state of a compound button has changed.\n         *\n         * @param buttonView The compound button view whose state has changed.\n         * @param isChecked  The new checked state of buttonView.\n         */\n        void onCheckedChanged(CompoundButton buttonView, boolean isChecked);\n    }\n\n    /**\n     * Set the background to a given Drawable, identified by its resource id.\n     *\n     * @param resid the resource id of the drawable to use as the background \n     */\n    public void setButtonDrawable(int resid) {\n        if (resid != 0 &amp;&amp; resid == mButtonResource) {\n            return;\n        }\n\n        mButtonResource = resid;\n\n        Drawable d = null;\n        if (mButtonResource != 0) {\n            d = getResources().getDrawable(mButtonResource);\n        }\n        setButtonDrawable(d);\n    }\n\n    /**\n     * Set the background to a given Drawable\n     *\n     * @param d The Drawable to use as the background\n     */\n    public void setButtonDrawable(Drawable d) {\n        if (d != null) {\n            if (mButtonDrawable != null) {\n                mButtonDrawable.setCallback(null);\n                unscheduleDrawable(mButtonDrawable);\n            }\n            d.setCallback(this);\n            d.setState(getDrawableState());\n            d.setVisible(getVisibility() == VISIBLE, false);\n            mButtonDrawable = d;\n            mButtonDrawable.setState(null);\n            setMinHeight(mButtonDrawable.getIntrinsicHeight());\n        }\n\n        refreshDrawableState();\n    }\n\n    @Override\n    public void onInitializeAccessibilityEvent(AccessibilityEvent event) {\n        super.onInitializeAccessibilityEvent(event);\n        event.setChecked(mChecked);\n    }\n\n    @Override\n    public void onInitializeAccessibilityNodeInfo(AccessibilityNodeInfo info) {\n        super.onInitializeAccessibilityNodeInfo(info);\n        info.setCheckable(true);\n        info.setChecked(mChecked);\n    }\n\n    @Override\n    protected void onDraw(Canvas canvas) {\n        super.onDraw(canvas);\n\n        final Drawable buttonDrawable = mButtonDrawable;\n        if (buttonDrawable != null) {\n            final int verticalGravity = getGravity() &amp; Gravity.VERTICAL_GRAVITY_MASK;\n            final int height = buttonDrawable.getIntrinsicHeight();\n\n            int y = 0;\n\n            switch (verticalGravity) {\n                case Gravity.BOTTOM:\n                    y = getHeight() - height;\n                    break;\n                case Gravity.CENTER_VERTICAL:\n                    y = (getHeight() - height) / 2;\n                    break;\n            }\n\n            buttonDrawable.setBounds(0, y, buttonDrawable.getIntrinsicWidth(), y + height);\n            buttonDrawable.draw(canvas);\n        }\n    }\n\n    @Override\n    protected int[] onCreateDrawableState(int extraSpace) {\n        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);\n        if (isChecked()) {\n            mergeDrawableStates(drawableState, CHECKED_STATE_SET);\n        }\n        return drawableState;\n    }\n\n    @Override\n    protected void drawableStateChanged() {\n        super.drawableStateChanged();\n\n        if (mButtonDrawable != null) {\n            int[] myDrawableState = getDrawableState();\n\n            // Set the state of the Drawable\n            mButtonDrawable.setState(myDrawableState);\n\n            invalidate();\n        }\n    }\n\n    @Override\n    protected boolean verifyDrawable(Drawable who) {\n        return super.verifyDrawable(who) || who == mButtonDrawable;\n    }\n\n    @Override\n    public void jumpDrawablesToCurrentState() {\n        super.jumpDrawablesToCurrentState();\n        if (mButtonDrawable != null) mButtonDrawable.jumpToCurrentState();\n    }\n\n    static class SavedState extends BaseSavedState {\n        boolean checked;\n\n        /**\n         * Constructor called from {@link CompoundButton#onSaveInstanceState()}\n         */\n        SavedState(Parcelable superState) {\n            super(superState);\n        }\n\n        /**\n         * Constructor called from {@link #CREATOR}\n         */\n        private SavedState(Parcel in) {\n            super(in);\n            checked = (Boolean)in.readValue(null);\n        }\n\n        @Override\n        public void writeToParcel(Parcel out, int flags) {\n            super.writeToParcel(out, flags);\n            out.writeValue(checked);\n        }\n\n        @Override\n        public String toString() {\n            return \"CompoundButton.SavedState{\"\n                    + Integer.toHexString(System.identityHashCode(this))\n                    + \" checked=\" + checked + \"}\";\n        }\n\n        public static final Parcelable.Creator&lt;SavedState&gt; CREATOR\n                = new Parcelable.Creator&lt;SavedState&gt;() {\n            public SavedState createFromParcel(Parcel in) {\n                return new SavedState(in);\n            }\n\n            public SavedState[] newArray(int size) {\n                return new SavedState[size];\n            }\n        };\n    }\n\n    @Override\n    public Parcelable onSaveInstanceState() {\n        // Force our ancestor class to save its state\n        setFreezesText(true);\n        Parcelable superState = super.onSaveInstanceState();\n\n        SavedState ss = new SavedState(superState);\n\n        ss.checked = isChecked();\n        return ss;\n    }\n\n    @Override\n    public void onRestoreInstanceState(Parcelable state) {\n        SavedState ss = (SavedState) state;\n\n        super.onRestoreInstanceState(ss.getSuperState());\n        setChecked(ss.checked);\n        requestLayout();\n    }\n}\n</code></pre>\n\n<p>Here is my xml state-liste implementation (working):</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"&gt;\n\n    &lt;item android:state_checked=\"false\"\n          android:state_pressed=\"true\"\n          android:drawable=\"@drawable/btn_check_off_pressed\" /&gt; &lt;!-- unchecked pressed --&gt;\n\n    &lt;item android:state_checked=\"false\"\n          android:state_selected=\"true\"\n          android:drawable=\"@drawable/btn_check_off_selected\" /&gt; &lt;!-- unchecked selected --&gt;\n\n    &lt;item android:state_checked=\"true\"\n          android:state_pressed=\"false\"\n          android:state_focused=\"false\"\n          android:drawable=\"@drawable/btn_check_on\" /&gt; &lt;!-- checked --&gt;\n\n    &lt;item android:state_checked=\"true\"\n          android:state_pressed=\"true\"\n          android:drawable=\"@drawable/btn_check_on_pressed\" /&gt; &lt;!-- checked pressed--&gt;\n\n    &lt;item android:state_checked=\"true\"\n          android:state_selected=\"true\"\n          android:drawable=\"@drawable/btn_check_on_selected\" /&gt; &lt;!-- checked selected--&gt;\n\n    &lt;item android:state_middle=\"true\"\n          android:state_pressed=\"false\"\n          android:state_focused=\"false\"\n          android:drawable=\"@drawable/btn_check_middle\" /&gt; &lt;!-- middle --&gt;        \n\n    &lt;item android:state_middle=\"true\"\n          android:state_pressed=\"true\"\n          android:drawable=\"@drawable/btn_check_middle_pressed\" /&gt; &lt;!-- middle pressed--&gt;\n\n    &lt;item android:state_middle=\"true\"\n          android:state_selected=\"true\"\n          android:drawable=\"@drawable/btn_check_middle_selected\"  /&gt; &lt;!-- middle selected--&gt; \n\n    &lt;item android:drawable=\"@drawable/btn_check_off\" /&gt; &lt;!-- unchecked --&gt;\n&lt;/selector&gt;\n</code></pre>\n\n<p>And here is the stock xml implementation for the checkbox:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;!-- Copyright (C) 2008 The Android Open Source Project\n\n     Licensed under the Apache License, Version 2.0 (the \"License\");\n     you may not use this file except in compliance with the License.\n     You may obtain a copy of the License at\n\n          http://www.apache.org/licenses/LICENSE-2.0\n\n     Unless required by applicable law or agreed to in writing, software\n     distributed under the License is distributed on an \"AS IS\" BASIS,\n     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n     See the License for the specific language governing permissions and\n     limitations under the License.\n--&gt;\n\n&lt;selector xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt;\n\n    &lt;!-- Enabled states --&gt;\n\n    &lt;item android:state_checked=\"true\" android:state_window_focused=\"false\"\n          android:state_enabled=\"true\"\n          android:drawable=\"@drawable/btn_check_on\" /&gt;\n    &lt;item android:state_checked=\"false\" android:state_window_focused=\"false\"\n          android:state_enabled=\"true\"\n          android:drawable=\"@drawable/btn_check_off\" /&gt;\n\n    &lt;item android:state_checked=\"true\" android:state_pressed=\"true\"\n          android:state_enabled=\"true\"\n          android:drawable=\"@drawable/btn_check_on_pressed\" /&gt;\n    &lt;item android:state_checked=\"false\" android:state_pressed=\"true\"\n          android:state_enabled=\"true\"\n          android:drawable=\"@drawable/btn_check_off_pressed\" /&gt;\n\n    &lt;item android:state_checked=\"true\" android:state_focused=\"true\"\n          android:state_enabled=\"true\"\n          android:drawable=\"@drawable/btn_check_on_selected\" /&gt;\n    &lt;item android:state_checked=\"false\" android:state_focused=\"true\"\n          android:state_enabled=\"true\"\n          android:drawable=\"@drawable/btn_check_off_selected\" /&gt;\n\n    &lt;item android:state_checked=\"false\"\n          android:state_enabled=\"true\"\n          android:drawable=\"@drawable/btn_check_off\" /&gt;\n    &lt;item android:state_checked=\"true\"\n          android:state_enabled=\"true\"\n          android:drawable=\"@drawable/btn_check_on\" /&gt;\n\n\n    &lt;!-- Disabled states --&gt;\n\n    &lt;item android:state_checked=\"true\" android:state_window_focused=\"false\"\n          android:drawable=\"@drawable/btn_check_on_disable\" /&gt;\n    &lt;item android:state_checked=\"false\" android:state_window_focused=\"false\"\n          android:drawable=\"@drawable/btn_check_off_disable\" /&gt;\n\n    &lt;item android:state_checked=\"true\" android:state_focused=\"true\"\n          android:drawable=\"@drawable/btn_check_on_disable_focused\" /&gt;\n    &lt;item android:state_checked=\"false\" android:state_focused=\"true\"\n          android:drawable=\"@drawable/btn_check_off_disable_focused\" /&gt;\n\n    &lt;item android:state_checked=\"false\" android:drawable=\"@drawable/btn_check_off_disable\" /&gt;\n    &lt;item android:state_checked=\"true\" android:drawable=\"@drawable/btn_check_on_disable\" /&gt;\n\n&lt;/selector&gt;\n</code></pre>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"score":2,"creation_date":1304759916,"post_id":5920135,"comment_id":6817970,"body_markdown":"I recommend you become familiar with Java&#39;s documentation (it will answer many of your questions). For example, this is the documentation for `Map`&#39;s [`size()` method](http://download.oracle.com/javase/6/docs/api/java/util/Map.html#size()): &quot;Returns the number of key-value mappings in this map. If the map contains more than `Integer.MAX_VALUE` elements, returns `Integer.MAX_VALUE`.&quot;","body":"I recommend you become familiar with Java&#39;s documentation (it will answer many of your questions). For example, this is the documentation for <code>Map</code>&#39;s <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Map.html#size()\" rel=\"nofollow noreferrer\"><code>size()</code> method</a>: &quot;Returns the number of key-value mappings in this map. If the map contains more than <code>Integer.MAX_VALUE</code> elements, returns <code>Integer.MAX_VALUE</code>.&quot;"},{"owner":{"account_id":171452,"reputation":7936,"user_id":398885,"display_name":"d-live"},"score":0,"creation_date":1304761952,"post_id":5920135,"comment_id":6818192,"body_markdown":"Your code is looking for Values in Keys - which is not correct. Either look for key in Keys or value in Values","body":"Your code is looking for Values in Keys - which is not correct. Either look for key in Keys or value in Values"},{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":2,"creation_date":1304769594,"post_id":5920135,"comment_id":6818975,"body_markdown":"If it has 1 key / value it will ofcourse have size 1. But this does not have anything to do with zero-based indexing.","body":"If it has 1 key / value it will ofcourse have size 1. But this does not have anything to do with zero-based indexing."},{"owner":{"account_id":2828461,"reputation":19324,"user_id":2430549,"display_name":"HoldOffHunger"},"score":0,"creation_date":1496616473,"post_id":5920135,"comment_id":75720916,"body_markdown":"This is a good question.  But there is an answer here provided here that can do this in one line, if you see Mingfei&#39;s solution.","body":"This is a good question.  But there is an answer here provided here that can do this in one line, if you see Mingfei&#39;s solution."}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1304762147,"creation_date":1304759479,"answer_id":5920145,"question_id":5920135,"body_markdown":"You have several options\r\n\r\n- Get [`map.values()`](http://download.oracle.com/javase/6/docs/api/java/util/Map.html#values()) , which gets the values, not the keys\r\n- Get the [`map.entrySet()`](http://download.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet()) which has both\r\n- Get the [`keySet()`](http://download.oracle.com/javase/6/docs/api/java/util/Map.html#keySet()) and for each key call [`map.get(key)`](http://download.oracle.com/javase/6/docs/api/java/util/Map.html#get(java.lang.Object))","title":"Printing HashMap In Java","body":"<p>You have several options</p>\n\n<ul>\n<li>Get <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Map.html#values()\" rel=\"noreferrer\"><code>map.values()</code></a> , which gets the values, not the keys</li>\n<li>Get the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Map.html#entrySet()\" rel=\"noreferrer\"><code>map.entrySet()</code></a> which has both</li>\n<li>Get the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Map.html#keySet()\" rel=\"noreferrer\"><code>keySet()</code></a> and for each key call <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Map.html#get(java.lang.Object)\" rel=\"noreferrer\"><code>map.get(key)</code></a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":165320,"reputation":20240,"user_id":388661,"accept_rate":75,"display_name":"davmac"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1304759577,"creation_date":1304759577,"answer_id":5920155,"question_id":5920135,"body_markdown":"You want the value set, not the key set:\r\n\r\n    for (TypeValue name: this.example.values()) {\r\n            System.out.println(name);\r\n    }\r\n\r\nThe code you give wouldn&#39;t even compile, which may be worth mentioning in future questions - &quot;doesn&#39;t seem to work&quot; is a bit vague!\r\n","title":"Printing HashMap In Java","body":"<p>You want the value set, not the key set:</p>\n\n<pre><code>for (TypeValue name: this.example.values()) {\n        System.out.println(name);\n}\n</code></pre>\n\n<p>The code you give wouldn't even compile, which may be worth mentioning in future questions - \"doesn't seem to work\" is a bit vague!</p>\n"},{"comments":[{"owner":{"account_id":18236,"reputation":46374,"user_id":41619,"accept_rate":91,"display_name":"Adam Paynter"},"score":22,"creation_date":1304759747,"post_id":5920157,"comment_id":6817955,"body_markdown":"Or better yet: `for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) { ... }`","body":"Or better yet: <code>for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) { ... }</code>"},{"owner":{"account_id":4564492,"reputation":2199,"user_id":3705861,"display_name":"Younes El Ouarti"},"score":4,"creation_date":1587451643,"post_id":5920157,"comment_id":108508776,"body_markdown":"Or even more compact: \n`example.forEach((key, value) -&gt; System.out.println(&quot;key + &quot; | &quot; + value));`","body":"Or even more compact:  <code>example.forEach((key, value) -&gt; System.out.println(&quot;key + &quot; | &quot; + value));</code>"},{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1624304682,"post_id":5920157,"comment_id":120317583,"body_markdown":"What is &quot;entry&quot; is that a reference to something or a command word?","body":"What is &quot;entry&quot; is that a reference to something or a command word?"}],"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":3,"down_vote_count":5,"up_vote_count":223,"is_accepted":true,"score":218,"last_activity_date":1683633331,"creation_date":1304759611,"answer_id":5920157,"question_id":5920135,"body_markdown":"[`keySet()`][1] only returns a set of keys from your hash map, you should iterate this key set and the get the value from the hash map using these keys.\r\n\r\nIn your example, the type of the hash map&#39;s key is `TypeKey`, but you specified `TypeValue` in your generic `for-loop`, so it cannot be compiled. You should change it to:\r\n\r\n```java\r\nfor (TypeKey name: example.keySet()) {\r\n\tString key = name.toString();\r\n\tString value = example.get(name).toString();\r\n\tSystem.out.println(key + &quot; &quot; + value);\r\n}\r\n```\r\n\r\n*Update for Java8:*\r\n\r\n```java\r\nexample.forEach((key, value) -&gt; System.out.println(key + &quot; &quot; + value));\r\n```\r\n----------\r\n\r\nIf you don&#39;t require to print key value and just need the hash map value, you can use others&#39; suggestions.\r\n\r\n&gt; Another question: Is this collection is zero base? I mean if it has 1 key and value will it size be 0 or 1?\r\n\r\nThe collection returned from `keySet()` is a [`Set`][2]. You cannot get the value from a set using an index, so it is not a question of whether it is zero-based or one-based. If your hash map has one key, the `keySet()` returned will have one entry inside, and its size will be 1.\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/HashMap.html#keySet%28%29\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/Set.html","title":"Printing HashMap In Java","body":"<p><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/HashMap.html#keySet%28%29\" rel=\"noreferrer\"><code>keySet()</code></a> only returns a set of keys from your hash map, you should iterate this key set and the get the value from the hash map using these keys.</p>\n<p>In your example, the type of the hash map's key is <code>TypeKey</code>, but you specified <code>TypeValue</code> in your generic <code>for-loop</code>, so it cannot be compiled. You should change it to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (TypeKey name: example.keySet()) {\n    String key = name.toString();\n    String value = example.get(name).toString();\n    System.out.println(key + &quot; &quot; + value);\n}\n</code></pre>\n<p><em>Update for Java8:</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>example.forEach((key, value) -&gt; System.out.println(key + &quot; &quot; + value));\n</code></pre>\n<hr />\n<p>If you don't require to print key value and just need the hash map value, you can use others' suggestions.</p>\n<blockquote>\n<p>Another question: Is this collection is zero base? I mean if it has 1 key and value will it size be 0 or 1?</p>\n</blockquote>\n<p>The collection returned from <code>keySet()</code> is a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Set.html\" rel=\"noreferrer\"><code>Set</code></a>. You cannot get the value from a set using an index, so it is not a question of whether it is zero-based or one-based. If your hash map has one key, the <code>keySet()</code> returned will have one entry inside, and its size will be 1.</p>\n"},{"tags":[],"owner":{"account_id":439324,"reputation":32505,"user_id":828193,"accept_rate":85,"display_name":"user000001"},"comment_count":0,"down_vote_count":0,"up_vote_count":46,"is_accepted":false,"score":46,"last_activity_date":1371047685,"creation_date":1371047685,"answer_id":17068246,"question_id":5920135,"body_markdown":"Assuming you have a `Map&lt;KeyType, ValueType&gt;`, you can print it like this:\r\n\r\n    for (Map.Entry&lt;KeyType, ValueType&gt; entry : map.entrySet()) {\r\n        System.out.println(entry.getKey()+&quot; : &quot;+entry.getValue());\r\n    }","title":"Printing HashMap In Java","body":"<p>Assuming you have a <code>Map&lt;KeyType, ValueType&gt;</code>, you can print it like this:</p>\n\n<pre><code>for (Map.Entry&lt;KeyType, ValueType&gt; entry : map.entrySet()) {\n    System.out.println(entry.getKey()+\" : \"+entry.getValue());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5800367,"reputation":644,"user_id":4574724,"display_name":"nktsamba"},"score":1,"creation_date":1519714587,"post_id":26458403,"comment_id":85010118,"body_markdown":"You are missing another bracket before the semi colon on the 3rd line.","body":"You are missing another bracket before the semi colon on the 3rd line."}],"tags":[],"owner":{"account_id":1991861,"reputation":577,"user_id":1785712,"display_name":"Venkatesh"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1539979831,"creation_date":1413777632,"answer_id":26458403,"question_id":5920135,"body_markdown":"To print both key and value, use the following:\r\n\r\n    for (Object objectName : example.keySet()) {\r\n       System.out.println(objectName);\r\n       System.out.println(example.get(objectName));\r\n     }\r\n\r\n\r\n\r\n\r\n\r\n","title":"Printing HashMap In Java","body":"<p>To print both key and value, use the following:</p>\n\n<pre><code>for (Object objectName : example.keySet()) {\n   System.out.println(objectName);\n   System.out.println(example.get(objectName));\n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5660787,"reputation":41,"user_id":4478518,"display_name":"Edson J&#250;nior"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1510851358,"creation_date":1421847752,"answer_id":28068729,"question_id":5920135,"body_markdown":"I did it using String map (if you&#39;re working with String Map).\r\n\r\n    for (Object obj : dados.entrySet()) {\r\n        Map.Entry&lt;String, String&gt; entry = (Map.Entry) obj;\r\n        System.out.print(&quot;Key: &quot; + entry.getKey());\r\n        System.out.println(&quot;, Value: &quot; + entry.getValue());\r\n    }","title":"Printing HashMap In Java","body":"<p>I did it using String map (if you're working with String Map).</p>\n\n<pre><code>for (Object obj : dados.entrySet()) {\n    Map.Entry&lt;String, String&gt; entry = (Map.Entry) obj;\n    System.out.print(\"Key: \" + entry.getKey());\n    System.out.println(\", Value: \" + entry.getValue());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1424435616,"creation_date":1424435616,"answer_id":28629144,"question_id":5920135,"body_markdown":"Worth mentioning Java 8 approach, using [`BiConsumer`](http://docs.oracle.com/javase/8/docs/api/java/util/function/BiConsumer.html) and lambda functions:\r\n\r\n    BiConsumer&lt;TypeKey, TypeValue&gt; consumer = (o1, o2) -&gt; \r\n               System.out.println(o1 + &quot;, &quot; + o2);\r\n    \r\n    example.forEach(consumer);\r\n\r\nAssuming that you&#39;ve overridden `toString` method of the two types if needed.","title":"Printing HashMap In Java","body":"<p>Worth mentioning Java 8 approach, using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/function/BiConsumer.html\" rel=\"noreferrer\"><code>BiConsumer</code></a> and lambda functions:</p>\n\n<pre><code>BiConsumer&lt;TypeKey, TypeValue&gt; consumer = (o1, o2) -&gt; \n           System.out.println(o1 + \", \" + o2);\n\nexample.forEach(consumer);\n</code></pre>\n\n<p>Assuming that you've overridden <code>toString</code> method of the two types if needed.</p>\n"},{"comments":[{"owner":{"account_id":4165053,"reputation":1499,"user_id":3414180,"display_name":"Mingfei"},"score":32,"creation_date":1508462751,"post_id":33491115,"comment_id":80630106,"body_markdown":"Just do as: ```System.out.println(map);```, output: ```{b=2, a=1}```","body":"Just do as: <code>System.out.println(map);</code>, output: <code>{b=2, a=1}</code>"},{"owner":{"account_id":10648383,"reputation":526,"user_id":7845354,"display_name":"Yo Apps"},"score":0,"creation_date":1548251778,"post_id":33491115,"comment_id":95475668,"body_markdown":"Yeah... one more similar output: `System.out.println(map.toString());`","body":"Yeah... one more similar output: <code>System.out.println(map.toString());</code>"},{"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"score":1,"creation_date":1564821481,"post_id":33491115,"comment_id":101162630,"body_markdown":"@yoapps beware of NPE in this case. That&#39;s why I avoid the `.toString` when possible.","body":"@yoapps beware of NPE in this case. That&#39;s why I avoid the <code>.toString</code> when possible."},{"owner":{"account_id":10648383,"reputation":526,"user_id":7845354,"display_name":"Yo Apps"},"score":0,"creation_date":1565079237,"post_id":33491115,"comment_id":101228344,"body_markdown":"Thats true. the NPE always lurks in such short cuts. I only wanted to show a similar out put.. I think especially when you&#39;re debugging to a log/console and you just wana peek into a map whose data you know isnt null. this is a quick fire! But if its code checking from scratch... then you&#39;re right, its tricky and in good programming context, it should be avoided!","body":"Thats true. the NPE always lurks in such short cuts. I only wanted to show a similar out put.. I think especially when you&#39;re debugging to a log/console and you just wana peek into a map whose data you know isnt null. this is a quick fire! But if its code checking from scratch... then you&#39;re right, its tricky and in good programming context, it should be avoided!"}],"tags":[],"owner":{"account_id":4165053,"reputation":1499,"user_id":3414180,"display_name":"Mingfei"},"comment_count":4,"down_vote_count":1,"up_vote_count":122,"is_accepted":false,"score":121,"last_activity_date":1510849194,"creation_date":1446522908,"answer_id":33491115,"question_id":5920135,"body_markdown":"A simple way to see the key value pairs:\r\n\r\n    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\n    map.put(&quot;a&quot;, 1);\r\n    map.put(&quot;b&quot;, 2);\r\n    System.out.println(Arrays.asList(map)); // method 1\r\n    System.out.println(Collections.singletonList(map)); // method 2\r\n\r\nBoth method 1 and method 2 output this:\r\n\r\n    [{b=2, a=1}]","title":"Printing HashMap In Java","body":"<p>A simple way to see the key value pairs:</p>\n\n<pre><code>Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\nmap.put(\"a\", 1);\nmap.put(\"b\", 2);\nSystem.out.println(Arrays.asList(map)); // method 1\nSystem.out.println(Collections.singletonList(map)); // method 2\n</code></pre>\n\n<p>Both method 1 and method 2 output this:</p>\n\n<pre><code>[{b=2, a=1}]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329088,"reputation":1085,"user_id":652414,"accept_rate":70,"display_name":"ahmet"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1472459161,"creation_date":1472459161,"answer_id":39201684,"question_id":5920135,"body_markdown":"Java 8 new feature `forEach` style \r\n\r\n    import java.util.HashMap;\r\n    \r\n    public class PrintMap {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tHashMap&lt;String, Integer&gt; example = new HashMap&lt;&gt;();\r\n    \t\texample.put(&quot;a&quot;, 1);\r\n    \t\texample.put(&quot;b&quot;, 2);\r\n    \t\texample.put(&quot;c&quot;, 3);\r\n    \t\texample.put(&quot;d&quot;, 5);\r\n    \t\t\r\n    \t\texample.forEach((key, value) -&gt; System.out.println(key + &quot; : &quot; + value));\r\n    \t\t\r\n    //\t\tOutput:\r\n    //\t\ta : 1\r\n    //\t\tb : 2\r\n    //\t\tc : 3\r\n    //\t\td : 5\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n","title":"Printing HashMap In Java","body":"<p>Java 8 new feature <code>forEach</code> style </p>\n\n<pre><code>import java.util.HashMap;\n\npublic class PrintMap {\n    public static void main(String[] args) {\n        HashMap&lt;String, Integer&gt; example = new HashMap&lt;&gt;();\n        example.put(\"a\", 1);\n        example.put(\"b\", 2);\n        example.put(\"c\", 3);\n        example.put(\"d\", 5);\n\n        example.forEach((key, value) -&gt; System.out.println(key + \" : \" + value));\n\n//      Output:\n//      a : 1\n//      b : 2\n//      c : 3\n//      d : 5\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5162774,"reputation":1440,"user_id":4133874,"accept_rate":100,"display_name":"Sagar Chilukuri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1483095734,"creation_date":1483095734,"answer_id":41395174,"question_id":5920135,"body_markdown":"You can use `Entry` class to read `HashMap` easily.\r\n\r\n    for(Map.Entry&lt;TypeKey, TypeKey&gt; temp : example.entrySet()){\r\n\t\tSystem.out.println(temp.getValue()); // Or something as per temp defination. can be used\r\n\t}\r\n","title":"Printing HashMap In Java","body":"<p>You can use <code>Entry</code> class to read <code>HashMap</code> easily.</p>\n\n<pre><code>for(Map.Entry&lt;TypeKey, TypeKey&gt; temp : example.entrySet()){\n    System.out.println(temp.getValue()); // Or something as per temp defination. can be used\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2991424,"reputation":41,"user_id":2538943,"display_name":"Thirukka Karnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510851342,"creation_date":1483661679,"answer_id":41496959,"question_id":5920135,"body_markdown":"If the map holds a collection as value, the other answers require additional effort to convert them as strings, such as `Arrays.deepToString(value.toArray())` (if its a map of list values), etc.\r\n\r\nI faced these issues quite often and came across the generic function to print all objects using `ObjectMappers`. This is quite handy at all the places, especially during experimenting things, and I would recommend you to choose this way.\r\n\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import com.fasterxml.jackson.databind.SerializationFeature;\r\n\r\n    public static String convertObjectAsString(Object object) {\r\n        String s = &quot;&quot;;\r\n        ObjectMapper om = new ObjectMapper();\r\n        try {\r\n            om.enable(SerializationFeature.INDENT_OUTPUT);\r\n            s = om.writeValueAsString(object);\r\n        } catch (Exception e) {\r\n            log.error(&quot;error converting object to string - &quot; + e);\r\n        }\r\n        return s;\r\n    }\r\n","title":"Printing HashMap In Java","body":"<p>If the map holds a collection as value, the other answers require additional effort to convert them as strings, such as <code>Arrays.deepToString(value.toArray())</code> (if its a map of list values), etc.</p>\n\n<p>I faced these issues quite often and came across the generic function to print all objects using <code>ObjectMappers</code>. This is quite handy at all the places, especially during experimenting things, and I would recommend you to choose this way.</p>\n\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\n\npublic static String convertObjectAsString(Object object) {\n    String s = \"\";\n    ObjectMapper om = new ObjectMapper();\n    try {\n        om.enable(SerializationFeature.INDENT_OUTPUT);\n        s = om.writeValueAsString(object);\n    } catch (Exception e) {\n        log.error(\"error converting object to string - \" + e);\n    }\n    return s;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1677258,"reputation":1869,"user_id":1542490,"display_name":"mrtechmaker"},"score":2,"creation_date":1525022836,"post_id":47334327,"comment_id":87194676,"body_markdown":"this looks to be the best answer from the ones above.","body":"this looks to be the best answer from the ones above."}],"tags":[],"owner":{"account_id":6857032,"reputation":685,"user_id":5272283,"accept_rate":36,"display_name":"arjun gulyani"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1510848746,"creation_date":1510848746,"answer_id":47334327,"question_id":5920135,"body_markdown":"A simple print statement with the variable name which contains the reference of the Hash Map would do :\r\n\r\n    HashMap&lt;K,V&gt; HM = new HashMap&lt;&gt;(); //empty\r\n    System.out.println(HM); //prints key value pairs enclosed in {}\r\n\r\n\r\nThis works because the `toString()`method is already over-ridden in the `AbstractMap class` which is extended by the `HashMap Class`\r\nMore information from the documentation \r\n&gt;Returns a string representation of this map. The string representation consists of a list of key-value mappings in the order returned by the map&#39;s entrySet view&#39;s iterator, enclosed in braces (&quot;{}&quot;). Adjacent mappings are separated by the characters &quot;, &quot; (comma and space). Each key-value mapping is rendered as the key followed by an equals sign (&quot;=&quot;) followed by the associated value. Keys and values are converted to strings as by String.valueOf(Object).","title":"Printing HashMap In Java","body":"<p>A simple print statement with the variable name which contains the reference of the Hash Map would do :</p>\n\n<pre><code>HashMap&lt;K,V&gt; HM = new HashMap&lt;&gt;(); //empty\nSystem.out.println(HM); //prints key value pairs enclosed in {}\n</code></pre>\n\n<p>This works because the <code>toString()</code>method is already over-ridden in the <code>AbstractMap class</code> which is extended by the <code>HashMap Class</code>\nMore information from the documentation </p>\n\n<blockquote>\n  <p>Returns a string representation of this map. The string representation consists of a list of key-value mappings in the order returned by the map's entrySet view's iterator, enclosed in braces (\"{}\"). Adjacent mappings are separated by the characters \", \" (comma and space). Each key-value mapping is rendered as the key followed by an equals sign (\"=\") followed by the associated value. Keys and values are converted to strings as by String.valueOf(Object).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4911554,"reputation":13237,"user_id":3956731,"accept_rate":95,"display_name":"KayV"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1537187542,"creation_date":1537187542,"answer_id":52367834,"question_id":5920135,"body_markdown":"For me this simple one line worked well:\r\n\r\n    Arrays.toString(map.entrySet().toArray())","title":"Printing HashMap In Java","body":"<p>For me this simple one line worked well:</p>\n\n<pre><code>Arrays.toString(map.entrySet().toArray())\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9469769,"reputation":678,"user_id":7040932,"display_name":"ThReSholD"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1551672368,"creation_date":1551672368,"answer_id":54976470,"question_id":5920135,"body_markdown":"Useful to quickly print entries in a HashMap\r\n\r\n    System.out.println(Arrays.toString(map.entrySet().toArray()));\r\n\r\n","title":"Printing HashMap In Java","body":"<p>Useful to quickly print entries in a HashMap</p>\n\n<pre><code>System.out.println(Arrays.toString(map.entrySet().toArray()));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5040002,"reputation":5138,"user_id":5260982,"display_name":"Dave"},"score":4,"creation_date":1560188308,"post_id":56530038,"comment_id":99645412,"body_markdown":"While this code may solve the question, [including an explanation](https://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers) of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please [edit] your answer to add explanation, and give an indication of what limitations and assumptions apply.","body":"While this code may solve the question, <a href=\"https://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/56530038/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}],"tags":[],"owner":{"account_id":14044283,"reputation":733,"user_id":10144963,"display_name":"Th0rgal"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1560235489,"creation_date":1560183616,"answer_id":56530038,"question_id":5920135,"body_markdown":"    map.forEach((key, value) -&gt; System.out.println(key + &quot; &quot; + value));\r\nUsing java 8 features","title":"Printing HashMap In Java","body":"<pre><code>map.forEach((key, value) -&gt; System.out.println(key + \" \" + value));\n</code></pre>\n\n<p>Using java 8 features</p>\n"},{"tags":[],"owner":{"account_id":2464379,"reputation":4305,"user_id":2147814,"accept_rate":62,"display_name":"anand krish"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1629213431,"creation_date":1629212416,"answer_id":68819676,"question_id":5920135,"body_markdown":"Using java 8 feature:\r\n\r\n        map.forEach((key, value) -&gt; System.out.println(key + &quot; : &quot; + value));\r\n\r\nUsing Map.Entry you can print like this:\r\n\r\n     for(Map.Entry entry:map.entrySet())\r\n    {\r\n        System.out.print(entry.getKey() + &quot; : &quot; + entry.getValue());\r\n    }\r\nTraditional way to get all keys and values from the map, you have to follow this sequence:\r\n\r\n - Convert `HashMap` to `MapSet` to get set of entries in `Map` with `entryset()` method.:&lt;br&gt; `Set dataset = map.entrySet();`\r\n - Get the iterator of this set: &lt;br&gt;`Iterator it = dataset.iterator();`\r\n - Get `Map.Entry` from the iterator: &lt;br&gt;`Map.Entry entry = it.next();`\r\n - use `getKey()` and `getValue()` methods of the `Map.Entry` to retrive keys and values.\r\n\r\n&lt;!-- language: java --&gt;\r\n    \r\n    Set dataset = (Set) map.entrySet();\r\n    Iterator it = dataset.iterator();\r\n    while(it.hasNext()){\r\n        Map.Entry entry = mapIterator.next();\r\n        System.out.print(entry.getKey() + &quot; : &quot; + entry.getValue());\r\n    }\r\n","title":"Printing HashMap In Java","body":"<p>Using java 8 feature:</p>\n<pre><code>    map.forEach((key, value) -&gt; System.out.println(key + &quot; : &quot; + value));\n</code></pre>\n<p>Using Map.Entry you can print like this:</p>\n<pre><code> for(Map.Entry entry:map.entrySet())\n{\n    System.out.print(entry.getKey() + &quot; : &quot; + entry.getValue());\n}\n</code></pre>\n<p>Traditional way to get all keys and values from the map, you have to follow this sequence:</p>\n<ul>\n<li>Convert <code>HashMap</code> to <code>MapSet</code> to get set of entries in <code>Map</code> with <code>entryset()</code> method.:<br> <code>Set dataset = map.entrySet();</code></li>\n<li>Get the iterator of this set: <br><code>Iterator it = dataset.iterator();</code></li>\n<li>Get <code>Map.Entry</code> from the iterator: <br><code>Map.Entry entry = it.next();</code></li>\n<li>use <code>getKey()</code> and <code>getValue()</code> methods of the <code>Map.Entry</code> to retrive keys and values.</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>Set dataset = (Set) map.entrySet();\nIterator it = dataset.iterator();\nwhile(it.hasNext()){\n    Map.Entry entry = mapIterator.next();\n    System.out.print(entry.getKey() + &quot; : &quot; + entry.getValue());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17737955,"reputation":1051,"user_id":12878982,"display_name":"CodingBee"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1631022395,"creation_date":1631022395,"answer_id":69089400,"question_id":5920135,"body_markdown":"Print a Map using java 8\r\n\r\n    Map&lt;Long, String&gt; productIdAndTypeMapping = new LinkedHashMap&lt;&gt;();\r\n    productIdAndTypeMapping.forEach((k, v) -&gt; log.info(&quot;Product Type Key: &quot; + k + &quot;: Value: &quot; + v));","title":"Printing HashMap In Java","body":"<p>Print a Map using java 8</p>\n<pre><code>Map&lt;Long, String&gt; productIdAndTypeMapping = new LinkedHashMap&lt;&gt;();\nproductIdAndTypeMapping.forEach((k, v) -&gt; log.info(&quot;Product Type Key: &quot; + k + &quot;: Value: &quot; + v));\n</code></pre>\n"}],"owner":{"account_id":256928,"reputation":44771,"user_id":537967,"accept_rate":75,"display_name":"Unknown user"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":749826,"favorite_count":0,"down_vote_count":1,"up_vote_count":184,"accepted_answer_id":5920157,"answer_count":17,"score":183,"last_activity_date":1683633331,"creation_date":1304759356,"question_id":5920135,"body_markdown":"I have a `HashMap`:\r\n```java\r\nprivate HashMap&lt;TypeKey, TypeValue&gt; example = new HashMap&lt;TypeKey, TypeValue&gt;();\r\n```\r\nNow I would like to run through all the values and print them.\r\n\r\nI wrote this:\r\n```java\r\nfor (TypeValue name : this.example.keySet()) {\r\n    System.out.println(name);\r\n}\r\n```\r\nIt doesn&#39;t seem to work.\r\n\r\nWhat is the problem?\r\n\r\nEDIT:\r\nAnother question: Is this collection zero based? I mean if it has 1 key and value will the size be 0 or 1?","title":"Printing HashMap In Java","body":"<p>I have a <code>HashMap</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private HashMap&lt;TypeKey, TypeValue&gt; example = new HashMap&lt;TypeKey, TypeValue&gt;();\n</code></pre>\n<p>Now I would like to run through all the values and print them.</p>\n<p>I wrote this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (TypeValue name : this.example.keySet()) {\n    System.out.println(name);\n}\n</code></pre>\n<p>It doesn't seem to work.</p>\n<p>What is the problem?</p>\n<p>EDIT:\nAnother question: Is this collection zero based? I mean if it has 1 key and value will the size be 0 or 1?</p>\n"},{"tags":["java","logging","glassfish","dst"],"answers":[{"comments":[{"owner":{"account_id":32433,"reputation":5697,"user_id":90042,"accept_rate":98,"display_name":"Joseph Weissman"},"score":0,"creation_date":1300387318,"post_id":5342524,"comment_id":6033867,"body_markdown":"+1, though `tzupdate` didn&#39;t seem to do the trick... thanks anyway!","body":"+1, though <code>tzupdate</code> didn&#39;t seem to do the trick... thanks anyway!"}],"tags":[],"owner":{"account_id":329612,"reputation":71055,"user_id":653230,"display_name":"WhiteFang34"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1300381311,"creation_date":1300381311,"answer_id":5342524,"question_id":5315512,"body_markdown":"You might need to update the JVM to get the latest time zone information. Or use the [Timezone Updater Tool][1].\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/javase/tzupdater-readme-136440.html","title":"Glassfish Logs Date and DST?","body":"<p>You might need to update the JVM to get the latest time zone information. Or use the <a href=\"http://www.oracle.com/technetwork/java/javase/tzupdater-readme-136440.html\" rel=\"nofollow\">Timezone Updater Tool</a>.</p>\n"}],"owner":{"account_id":32433,"reputation":5697,"user_id":90042,"accept_rate":98,"display_name":"Joseph Weissman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":922,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":5342524,"answer_count":1,"score":1,"last_activity_date":1683632556,"creation_date":1300209849,"question_id":5315512,"body_markdown":"So, the system time on my Ubuntu server updated appropriately with DST on Sunday. \r\n\r\nHowever, the timestamp on my glassfish logs are still an hour off. I&#39;ve restarted the application server, but this doesn&#39;t seem to have changed anything. \r\n\r\nA quick hello-world indicates that the JVM grabs the (correct) system time. Any ideas on why \r\nthe time in the glassfish logs do not match the system or JVM date and time?\r\n\r\nAs suggested, I&#39;ve also run the `tzupdate` tool. This does not seem to have done much.\r\n\r\nAny ideas what&#39;s going on? How can I repair this?","title":"Glassfish Logs Date and DST?","body":"<p>So, the system time on my Ubuntu server updated appropriately with DST on Sunday. </p>\n\n<p>However, the timestamp on my glassfish logs are still an hour off. I've restarted the application server, but this doesn't seem to have changed anything. </p>\n\n<p>A quick hello-world indicates that the JVM grabs the (correct) system time. Any ideas on why \nthe time in the glassfish logs do not match the system or JVM date and time?</p>\n\n<p>As suggested, I've also run the <code>tzupdate</code> tool. This does not seem to have done much.</p>\n\n<p>Any ideas what's going on? How can I repair this?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jooq"],"comments":[{"owner":{"account_id":4890986,"reputation":1123,"user_id":3942132,"display_name":"Roie Beck"},"score":1,"creation_date":1683621261,"post_id":76204110,"comment_id":134390667,"body_markdown":"Don&#39;t know who downvoted that looks like a legitimate question, \napart from you link see:\n\nhttps://www.jooq.org/doc/3.18/manual/sql-execution/alternative-execution-models/using-jooq-with-jpa/\n\nit should be ok as long as you use the same connection pool(HikariCP for example)","body":"Don&#39;t know who downvoted that looks like a legitimate question,  apart from you link see:  <a href=\"https://www.jooq.org/doc/3.18/manual/sql-execution/alternative-execution-models/using-jooq-with-jpa/\" rel=\"nofollow noreferrer\">jooq.org/doc/3.18/manual/sql-execution/&hellip;</a>  it should be ok as long as you use the same connection pool(HikariCP for example)"}],"answers":[{"tags":[],"owner":{"account_id":3449881,"reputation":3520,"user_id":2889760,"display_name":"Gavin King"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683632552,"creation_date":1683632552,"answer_id":76208949,"question_id":76204110,"body_markdown":"&gt; The problem is I am not 100% sure that it&#39;s ok to use jooq for this specific endpoint and continue using jpa for the rest of my app. \r\n\r\nIt&#39;s totally OK.\r\n\r\n&gt; the solution is to make the jooq queries by calling `em.createNativeQuery()`\r\n\r\nIt&#39;s not necessary to use `em.createNativeQuery()`.\r\n\r\nIf you really want to reuse the `Connection`/`Transaction` that Hibernate is using, you could use `Session.doWork()` or `Session.doReturningWork()`. (You would need to cast the `EntityManager` to `Session`.)\r\n\r\nBut even this is not necessary. Relational databases are meant to serve many different clients in a distributed system at the same time. You are not supposed to have to force your access to the database through one particular technology.\r\n\r\n&gt; Is it really necessary to use the entity manager for all requests to keep data coherent?\r\n\r\nNo. Absolutely not. That would go against *everything* that relational databases are about. _Of course_ Hibernate would never force you to do that.\r\n\r\n&gt; For example is there a problem using jdbc template and jpa in the same app without any preparation?\r\n\r\nDefinitely not. That&#39;s completely fine.\r\n\r\nThere&#39;s just one thing you need to be careful about: if you use JPA and direct JDBC together in *a single unit of work*, you need to make sure that the work is happening inside a single transaction.\r\n\r\nI&#39;m not a Spring user but I&#39;m sure Spring will take care of this detail for you.","title":"use jooq in a project that already uses jpa","body":"<blockquote>\n<p>The problem is I am not 100% sure that it's ok to use jooq for this specific endpoint and continue using jpa for the rest of my app.</p>\n</blockquote>\n<p>It's totally OK.</p>\n<blockquote>\n<p>the solution is to make the jooq queries by calling <code>em.createNativeQuery()</code></p>\n</blockquote>\n<p>It's not necessary to use <code>em.createNativeQuery()</code>.</p>\n<p>If you really want to reuse the <code>Connection</code>/<code>Transaction</code> that Hibernate is using, you could use <code>Session.doWork()</code> or <code>Session.doReturningWork()</code>. (You would need to cast the <code>EntityManager</code> to <code>Session</code>.)</p>\n<p>But even this is not necessary. Relational databases are meant to serve many different clients in a distributed system at the same time. You are not supposed to have to force your access to the database through one particular technology.</p>\n<blockquote>\n<p>Is it really necessary to use the entity manager for all requests to keep data coherent?</p>\n</blockquote>\n<p>No. Absolutely not. That would go against <em>everything</em> that relational databases are about. <em>Of course</em> Hibernate would never force you to do that.</p>\n<blockquote>\n<p>For example is there a problem using jdbc template and jpa in the same app without any preparation?</p>\n</blockquote>\n<p>Definitely not. That's completely fine.</p>\n<p>There's just one thing you need to be careful about: if you use JPA and direct JDBC together in <em>a single unit of work</em>, you need to make sure that the work is happening inside a single transaction.</p>\n<p>I'm not a Spring user but I'm sure Spring will take care of this detail for you.</p>\n"}],"owner":{"account_id":14183682,"reputation":345,"user_id":10246394,"display_name":"Imu Sama"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76208949,"answer_count":1,"score":1,"last_activity_date":1683632552,"creation_date":1683577332,"question_id":76204110,"body_markdown":"I have a spring boot project that uses jpa with hibernate and spring data to access database.\r\nI have a many to many mapping between products and their locations (on shelves).\r\nThe product entity has a collection of shelves and vice versa.\r\nI initially didn&#39;t need to return the locations to the client so i added @JsonProperty(access = JsonProperty.Access.WRITE_ONLY) to the locations field in the product entity.\r\nNow I need to send it so i removed the write_only and noticed my endpoint slowed down (from 75 ms to 450 ms loading time).\r\nThinking about solutions to optimize I decided to try making a similar request with jooq and it&#39;s much faster ( ~ 90 ms). \r\nI used the multiset functionnality of jooq and converters to fetch into a new product dto that has a collection of locations.\r\nI find this way of doing it perfect and I don&#39;t get the problem I had with jpa that product has locations, each locations has products and products has locations infinitely.\r\n\r\nHere is the example I used : [jooq multiset and converters][1]\r\n\r\n\r\nThe problem is I am not 100% sure that it&#39;s ok to use jooq for this specific endpoint and continue using jpa for the rest of my app.\r\nI am afraid the data fetched with jooq will not always be coherent with data handled by jpa because for some reasons I don&#39;t fully understand but i think it&#39;s related to flush modes, the changes made from hibernate are not automatically sent to the database.\r\n\r\nHere is an article I found on how to use jooq and jpa in the same app [jooq with hibernate][2] : the solution is to make the jooq queries by calling em.createNativeQuery\r\n\r\nBut this prevents me from using the powerfull jooq converters to map the query result directly to dto even with multisets nested collections.\r\n\r\nIs it really necessary to use the entity manager for all requests to keep data coherent ? I would like to understand enough jpa so that the answer to these kind of questions will become clear. For example is there a problem using jdbc template and jpa in the same app without any preparation ? \r\n\r\n\r\n  [1]: https://github.com/PacktPublishing/jOOQ-Masterclass/blob/410b7c63c5b018a6f6ae40285de12d2c591d4a9f/Chapter08/PostgreSQL/Maven/Multiset/NestedMultiset/src/main/java/com/classicmodels/repository/ClassicModelsRepository.java#L79\r\n  [2]: https://thorben-janssen.com/hibernate-jooq-a-match-made-in-heaven/","title":"use jooq in a project that already uses jpa","body":"<p>I have a spring boot project that uses jpa with hibernate and spring data to access database.\nI have a many to many mapping between products and their locations (on shelves).\nThe product entity has a collection of shelves and vice versa.\nI initially didn't need to return the locations to the client so i added @JsonProperty(access = JsonProperty.Access.WRITE_ONLY) to the locations field in the product entity.\nNow I need to send it so i removed the write_only and noticed my endpoint slowed down (from 75 ms to 450 ms loading time).\nThinking about solutions to optimize I decided to try making a similar request with jooq and it's much faster ( ~ 90 ms).\nI used the multiset functionnality of jooq and converters to fetch into a new product dto that has a collection of locations.\nI find this way of doing it perfect and I don't get the problem I had with jpa that product has locations, each locations has products and products has locations infinitely.</p>\n<p>Here is the example I used : <a href=\"https://github.com/PacktPublishing/jOOQ-Masterclass/blob/410b7c63c5b018a6f6ae40285de12d2c591d4a9f/Chapter08/PostgreSQL/Maven/Multiset/NestedMultiset/src/main/java/com/classicmodels/repository/ClassicModelsRepository.java#L79\" rel=\"nofollow noreferrer\">jooq multiset and converters</a></p>\n<p>The problem is I am not 100% sure that it's ok to use jooq for this specific endpoint and continue using jpa for the rest of my app.\nI am afraid the data fetched with jooq will not always be coherent with data handled by jpa because for some reasons I don't fully understand but i think it's related to flush modes, the changes made from hibernate are not automatically sent to the database.</p>\n<p>Here is an article I found on how to use jooq and jpa in the same app <a href=\"https://thorben-janssen.com/hibernate-jooq-a-match-made-in-heaven/\" rel=\"nofollow noreferrer\">jooq with hibernate</a> : the solution is to make the jooq queries by calling em.createNativeQuery</p>\n<p>But this prevents me from using the powerfull jooq converters to map the query result directly to dto even with multisets nested collections.</p>\n<p>Is it really necessary to use the entity manager for all requests to keep data coherent ? I would like to understand enough jpa so that the answer to these kind of questions will become clear. For example is there a problem using jdbc template and jpa in the same app without any preparation ?</p>\n"},{"tags":["java","unit-testing","junit"],"answers":[{"comments":[{"owner":{"account_id":7815977,"reputation":265,"user_id":5910671,"accept_rate":41,"display_name":"PCR"},"score":0,"creation_date":1505839398,"post_id":46290687,"comment_id":79573590,"body_markdown":"Hey I don&#39;t need the environment variable in the test itself, I just need it so that when the test itself runs the piece of code with the environment variable, it will be defined to whatever I set it. B/c right now yes, it is defined in the test, but when the test executes the actual code it is testing, it is undefined.","body":"Hey I don&#39;t need the environment variable in the test itself, I just need it so that when the test itself runs the piece of code with the environment variable, it will be defined to whatever I set it. B/c right now yes, it is defined in the test, but when the test executes the actual code it is testing, it is undefined."},{"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"score":0,"creation_date":1505839507,"post_id":46290687,"comment_id":79573645,"body_markdown":"Understood, the code I added just demos the fact that System.getenv(&quot;name&quot;) returns the expected value. When your non-unit-test code calls System.getenv(), you will see similar results (i.e. mocking System will continue to work in your non-unit-test code). So, in your unit test, have line(s) like:\n`PowerMockito.when(System.getenv(Mockito.eq(&quot;name&quot;))).thenReturn(&quot;bart&quot;);` to setup your environment. Your non-unit-test code should then see those values","body":"Understood, the code I added just demos the fact that System.getenv(&quot;name&quot;) returns the expected value. When your non-unit-test code calls System.getenv(), you will see similar results (i.e. mocking System will continue to work in your non-unit-test code). So, in your unit test, have line(s) like: <code>PowerMockito.when(System.getenv(Mockito.eq(&quot;name&quot;))).thenRet&zwnj;&#8203;urn(&quot;bart&quot;);</code> to setup your environment. Your non-unit-test code should then see those values"},{"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"score":0,"creation_date":1505841352,"post_id":46290687,"comment_id":79574487,"body_markdown":"If this doesn&#39;t work, post back the problem and I can probably help you with it.","body":"If this doesn&#39;t work, post back the problem and I can probably help you with it."},{"owner":{"account_id":7815977,"reputation":265,"user_id":5910671,"accept_rate":41,"display_name":"PCR"},"score":0,"creation_date":1505842294,"post_id":46290687,"comment_id":79574965,"body_markdown":"Hey it&#39;s working, but it&#39;s causing another error in my unit test. I&#39;m getting the following error\n`java.lang.ExceptionInInitializerError: null at java.lang.Integer.parseInt(Integer.java:454)`  \n\nWill this interfere with other System calls?","body":"Hey it&#39;s working, but it&#39;s causing another error in my unit test. I&#39;m getting the following error <code>java.lang.ExceptionInInitializerError: null at java.lang.Integer.parseInt(Integer.java:454)</code>    Will this interfere with other System calls?"},{"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"score":0,"creation_date":1505842738,"post_id":46290687,"comment_id":79575201,"body_markdown":"Yes, we have mocked System, and what we need to do is &quot;spy&quot; System (also known as a partial mock). Give me a minute and I&#39;ll help you with the code.","body":"Yes, we have mocked System, and what we need to do is &quot;spy&quot; System (also known as a partial mock). Give me a minute and I&#39;ll help you with the code."}],"tags":[],"owner":{"account_id":1233122,"reputation":3934,"user_id":1197297,"accept_rate":67,"display_name":"StvnBrkdll"},"comment_count":5,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1629828041,"creation_date":1505786542,"answer_id":46290687,"question_id":46290503,"body_markdown":"You can use `PowerMockito` to mock static methods. This code demonstrates mocking the `System` class and stubbing `getenv()`\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({System.class})\r\n    public class Xxx {\r\n    \r\n        @Test\r\n        public void testThis() throws Exception {\r\n            System.setProperty(&quot;test-prop&quot;, &quot;test-value&quot;);\r\n            PowerMockito.mockStatic(System.class);\r\n    \r\n            PowerMockito.when(System.getenv(Mockito.eq(&quot;name&quot;))).thenReturn(&quot;bart&quot;);\r\n            // you will need to do this (thenCallRealMethod()) for all the other methods\r\n            PowerMockito.when(System.getProperty(Mockito.any())).thenCallRealMethod();\r\n    \r\n            Assert.assertEquals(&quot;bart&quot;, System.getenv(&quot;name&quot;));\r\n            Assert.assertEquals(&quot;test-value&quot;, System.getProperty(&quot;test-prop&quot;));\r\n        }\r\n    }\r\n\r\nI believe this illustrates what you are trying to accomplish.\r\nThere _may_ be a more elegant way to do this using PowerMockito.spy(), I just can&#39;t remember it.\r\n\r\nYou will need to do `thenCallRealMethod()` for all the other methods in System.class that get called directly or indirectly by your code.","title":"Having trouble mocking System.getenv calls in junit","body":"<p>You can use <code>PowerMockito</code> to mock static methods. This code demonstrates mocking the <code>System</code> class and stubbing <code>getenv()</code></p>\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({System.class})\npublic class Xxx {\n\n    @Test\n    public void testThis() throws Exception {\n        System.setProperty(&quot;test-prop&quot;, &quot;test-value&quot;);\n        PowerMockito.mockStatic(System.class);\n\n        PowerMockito.when(System.getenv(Mockito.eq(&quot;name&quot;))).thenReturn(&quot;bart&quot;);\n        // you will need to do this (thenCallRealMethod()) for all the other methods\n        PowerMockito.when(System.getProperty(Mockito.any())).thenCallRealMethod();\n\n        Assert.assertEquals(&quot;bart&quot;, System.getenv(&quot;name&quot;));\n        Assert.assertEquals(&quot;test-value&quot;, System.getProperty(&quot;test-prop&quot;));\n    }\n}\n</code></pre>\n<p>I believe this illustrates what you are trying to accomplish.\nThere <em>may</em> be a more elegant way to do this using PowerMockito.spy(), I just can't remember it.</p>\n<p>You will need to do <code>thenCallRealMethod()</code> for all the other methods in System.class that get called directly or indirectly by your code.</p>\n"},{"tags":[],"owner":{"account_id":1434179,"reputation":5113,"user_id":1355930,"display_name":"Ashley Frieze"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1605883047,"creation_date":1605864225,"answer_id":64926862,"question_id":46290503,"body_markdown":"This can be achieved with https://github.com/webcompere/system-stubs \r\n\r\nYou have a couple of options:\r\n\r\n```java\r\nEnvironmentVariables environmentVariables = new EnvironmentVariables(&quot;VARIABLE&quot;, &quot;http://testurl&quot;);\r\n\r\n// then put the test code inside an execute method\r\nenvironmentVariables.execute(() -&gt; {\r\n   // inside here, the VARIABLE will contain the test value\r\n});\r\n\r\n// out here, the system variables are back to normal\r\n```\r\n\r\nOr it can be done with a JUnit4 or 5 plugin:\r\n\r\n```java\r\n@ExtendWith(SystemStubsExtension.class)\r\nclass SomeTest {\r\n\r\n    @SystemStub\r\n    private EnvironmentVariables environment = new EnvironmentVariables(&quot;VARIABLE&quot;, &quot;http://testurl&quot;);\r\n\r\n    @Test\r\n    void someTest() {\r\n        // inside the test the variable is set\r\n        // we can also change environment variables:\r\n\r\n        environment.set(&quot;OTHER&quot;, &quot;value&quot;);\r\n    }\r\n\r\n}\r\n```","title":"Having trouble mocking System.getenv calls in junit","body":"<p>This can be achieved with <a href=\"https://github.com/webcompere/system-stubs\" rel=\"nofollow noreferrer\">https://github.com/webcompere/system-stubs</a></p>\n<p>You have a couple of options:</p>\n<pre class=\"lang-java prettyprint-override\"><code>EnvironmentVariables environmentVariables = new EnvironmentVariables(&quot;VARIABLE&quot;, &quot;http://testurl&quot;);\n\n// then put the test code inside an execute method\nenvironmentVariables.execute(() -&gt; {\n   // inside here, the VARIABLE will contain the test value\n});\n\n// out here, the system variables are back to normal\n</code></pre>\n<p>Or it can be done with a JUnit4 or 5 plugin:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SystemStubsExtension.class)\nclass SomeTest {\n\n    @SystemStub\n    private EnvironmentVariables environment = new EnvironmentVariables(&quot;VARIABLE&quot;, &quot;http://testurl&quot;);\n\n    @Test\n    void someTest() {\n        // inside the test the variable is set\n        // we can also change environment variables:\n\n        environment.set(&quot;OTHER&quot;, &quot;value&quot;);\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16910112,"reputation":1,"user_id":12229377,"display_name":"hiteshree neve"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683632370,"creation_date":1683621416,"answer_id":76207344,"question_id":46290503,"body_markdown":"Make the below changes to your `pom.xml`:\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;2.22.2&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n   &lt;environmentVariables&gt;\r\n      &lt;PROPERTY_NAME&gt;PROPERTY_VALUE&lt;/PROPERTY_NAME&gt;\r\n   &lt;/environmentVariables&gt;\r\n  &lt;/configuration&gt;\r\n&lt;/dependency&gt;\r\n```\r\nDetailed answer can be found [here][1].\r\n\r\n  [1]: https://stackoverflow.com/a/76070256/12229377","title":"Having trouble mocking System.getenv calls in junit","body":"<p>Make the below changes to your <code>pom.xml</code>:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n  &lt;version&gt;2.22.2&lt;/version&gt;\n  &lt;configuration&gt;\n   &lt;environmentVariables&gt;\n      &lt;PROPERTY_NAME&gt;PROPERTY_VALUE&lt;/PROPERTY_NAME&gt;\n   &lt;/environmentVariables&gt;\n  &lt;/configuration&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Detailed answer can be found <a href=\"https://stackoverflow.com/a/76070256/12229377\">here</a>.</p>\n"}],"owner":{"account_id":7815977,"reputation":265,"user_id":5910671,"accept_rate":41,"display_name":"PCR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28659,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":46290687,"answer_count":3,"score":7,"last_activity_date":1683632370,"creation_date":1505785191,"question_id":46290503,"body_markdown":"I&#39;m trying to write a unit test with junit and mockito (very new to this) for a Spring Boot application. Basically in my code, I have specified an environment variable for a specific URL in a manifest.yml file (for deployment) that I can access through `String URL = System.getenv(&quot;VARIABLE&quot;)` in my code. I&#39;m having a lot of trouble with my unit testing however, since the `URL` variable is obviously undefined. I tried the solution [here][1], but realized this is only for mocking an environment variable if you&#39;re calling it from the actual test itself, not if you&#39;re relying on the environment variable being accessible from the code.\r\n\r\nIs there any way to set it up so that when the test is run, I can set environment variables that can be accessed within the code?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8168884/how-to-test-code-dependent-on-environment-variables-using-junit/8169008","title":"Having trouble mocking System.getenv calls in junit","body":"<p>I'm trying to write a unit test with junit and mockito (very new to this) for a Spring Boot application. Basically in my code, I have specified an environment variable for a specific URL in a manifest.yml file (for deployment) that I can access through <code>String URL = System.getenv(\"VARIABLE\")</code> in my code. I'm having a lot of trouble with my unit testing however, since the <code>URL</code> variable is obviously undefined. I tried the solution <a href=\"https://stackoverflow.com/questions/8168884/how-to-test-code-dependent-on-environment-variables-using-junit/8169008\">here</a>, but realized this is only for mocking an environment variable if you're calling it from the actual test itself, not if you're relying on the environment variable being accessible from the code.</p>\n\n<p>Is there any way to set it up so that when the test is run, I can set environment variables that can be accessed within the code?</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":3538058,"reputation":5428,"user_id":2960034,"display_name":"y.bedrov"},"score":0,"creation_date":1583745691,"post_id":60576554,"comment_id":107206561,"body_markdown":"Do you use any custom plugins?","body":"Do you use any custom plugins?"}],"answers":[{"tags":[],"owner":{"account_id":1228519,"reputation":31,"user_id":11876059,"display_name":"Marcos Jr"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666345203,"creation_date":1666345203,"answer_id":74151727,"question_id":60576554,"body_markdown":"In my *specific* case it was happening because I had disabled InteliJ IDEA&#39;s formatter:\r\n\r\n[![Settings | Editor | Code Style | Formatter tab][1]][1]\r\n\r\n(I added the * in the &quot;Do not format&quot; text box).\r\n\r\nSettings | Editor | Code Style | Formatter tab\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LCIVf.png","title":"Intellij new import goes to same line as the previous imported class","body":"<p>In my <em>specific</em> case it was happening because I had disabled InteliJ IDEA's formatter:</p>\n<p><a href=\"https://i.stack.imgur.com/LCIVf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LCIVf.png\" alt=\"Settings | Editor | Code Style | Formatter tab\" /></a></p>\n<p>(I added the * in the &quot;Do not format&quot; text box).</p>\n<p>Settings | Editor | Code Style | Formatter tab</p>\n"},{"tags":[],"owner":{"account_id":21864839,"reputation":1,"user_id":16155176,"display_name":"user16155176"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683632206,"creation_date":1683632206,"answer_id":76208893,"question_id":60576554,"body_markdown":"In my specific case is happened because I had old an codestyle plugin. Updating and restarting IntelliJ fixed it.","title":"Intellij new import goes to same line as the previous imported class","body":"<p>In my specific case is happened because I had old an codestyle plugin. Updating and restarting IntelliJ fixed it.</p>\n"}],"owner":{"account_id":4888372,"reputation":129,"user_id":3940148,"display_name":"Secondo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":480,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683632206,"creation_date":1583576589,"question_id":60576554,"body_markdown":"[![import goes to same line as the previous import][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eOwuw.png\r\n\r\n\r\nhi guys \r\n\r\n  im using IntelliJ 2019.3.2 , i&#39;ve been searching on how i can change the way new import added in my code (no luck) already checked the Code Style area , as you guys can see my new imported class goes to same line as the previous imported class..\r\n\r\n","title":"Intellij new import goes to same line as the previous imported class","body":"<p><a href=\"https://i.stack.imgur.com/eOwuw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eOwuw.png\" alt=\"import goes to same line as the previous import\"></a></p>\n\n<p>hi guys </p>\n\n<p>im using IntelliJ 2019.3.2 , i've been searching on how i can change the way new import added in my code (no luck) already checked the Code Style area , as you guys can see my new imported class goes to same line as the previous imported class..</p>\n"},{"tags":["java","security","ocsp","jca","pkix"],"comments":[{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1683877790,"post_id":76192992,"comment_id":134436775,"body_markdown":"Another way would be to implement a custom PKIXRevocationChecker class...","body":"Another way would be to implement a custom PKIXRevocationChecker class..."}],"answers":[{"comments":[{"owner":{"account_id":6974,"reputation":6156,"user_id":11906,"accept_rate":87,"display_name":"Paralife"},"score":1,"creation_date":1683662898,"post_id":76208865,"comment_id":134400522,"body_markdown":"This will not provide the ValidatorException that has internally been thrown because it is thrown by a path validator that is called by a path builder. the path builder does not throw while building, because it does a DFS to find a cert path and validates at the same time, so if something is wrong while searching, it is stored in the Vertexes, but never exposed, only shown in debug, because it may backtrack and find another path. If it threw all the way, the DFS would stop and would not be complete. At least this is my take from looking at the implementation","body":"This will not provide the ValidatorException that has internally been thrown because it is thrown by a path validator that is called by a path builder. the path builder does not throw while building, because it does a DFS to find a cert path and validates at the same time, so if something is wrong while searching, it is stored in the Vertexes, but never exposed, only shown in debug, because it may backtrack and find another path. If it threw all the way, the DFS would stop and would not be complete. At least this is my take from looking at the implementation"},{"owner":{"account_id":6974,"reputation":6156,"user_id":11906,"accept_rate":87,"display_name":"Paralife"},"score":0,"creation_date":1683663605,"post_id":76208865,"comment_id":134400672,"body_markdown":"I think the best way would be for the builder, if it didnt find a path, to expose the last path tried somehow. Also when the validation problem is on the root of the path,[that is the end entity cert, since if does forward building], it should also expose the validation exceptions, since the end entity cert is contained in every possible path. But all the above need custom implementation, and I am not up to it. I am starting to think, there is no clean solution...","body":"I think the best way would be for the builder, if it didnt find a path, to expose the last path tried somehow. Also when the validation problem is on the root of the path,[that is the end entity cert, since if does forward building], it should also expose the validation exceptions, since the end entity cert is contained in every possible path. But all the above need custom implementation, and I am not up to it. I am starting to think, there is no clean solution..."}],"tags":[],"owner":{"account_id":3640818,"reputation":1743,"user_id":3034938,"accept_rate":100,"display_name":"Pushpendra Kumar"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683631987,"creation_date":1683631987,"answer_id":76208865,"question_id":76192992,"body_markdown":"`sun.security.validator.ValidatorException` exception does not provide direct access to the `CertPathValidatorException` or its message.\r\n\r\nHowever, you can catch the `ValidatorException` and inspect its cause to see if it is a `CertPathBuilderException`. If it is, you can then catch its cause and check if it is a `CertPathValidatorException`. If it is, you can then access its message using the `getMessage()` method.\r\n\r\n```java\r\ntry {\r\n    // your code that throws the ValidatorException\r\n} catch (ValidatorException e) {\r\n    Throwable cause = e.getCause();\r\n    if (cause instanceof CertPathBuilderException) {\r\n        CertPathBuilderException cpbe = (CertPathBuilderException) cause;\r\n        Throwable cpbeCause = cpbe.getCause();\r\n        if (cpbeCause instanceof CertPathValidatorException) {\r\n            CertPathValidatorException cpve = (CertPathValidatorException) cpbeCause;\r\n            String message = cpve.getMessage();\r\n            // handle or display the message here\r\n        }\r\n    }\r\n}\r\n```\r\ncatching the exception and inspecting its cause may not be the most elegant solution, but it should allow you to access the underlying `CertPathValidatorException` message that you are interested ","title":"How to get hold of the cause of the PKIX path building failed Exception","body":"<p><code>sun.security.validator.ValidatorException</code> exception does not provide direct access to the <code>CertPathValidatorException</code> or its message.</p>\n<p>However, you can catch the <code>ValidatorException</code> and inspect its cause to see if it is a <code>CertPathBuilderException</code>. If it is, you can then catch its cause and check if it is a <code>CertPathValidatorException</code>. If it is, you can then access its message using the <code>getMessage()</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    // your code that throws the ValidatorException\n} catch (ValidatorException e) {\n    Throwable cause = e.getCause();\n    if (cause instanceof CertPathBuilderException) {\n        CertPathBuilderException cpbe = (CertPathBuilderException) cause;\n        Throwable cpbeCause = cpbe.getCause();\n        if (cpbeCause instanceof CertPathValidatorException) {\n            CertPathValidatorException cpve = (CertPathValidatorException) cpbeCause;\n            String message = cpve.getMessage();\n            // handle or display the message here\n        }\n    }\n}\n</code></pre>\n<p>catching the exception and inspecting its cause may not be the most elegant solution, but it should allow you to access the underlying <code>CertPathValidatorException</code> message that you are interested</p>\n"}],"owner":{"account_id":6974,"reputation":6156,"user_id":11906,"accept_rate":87,"display_name":"Paralife"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":377,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1683631987,"creation_date":1683450067,"question_id":76192992,"body_markdown":"I am getting the well known `PKIX path building failed` exception, and to find the underlying cause i have to enable java.security.debug=certpath and look at the logs. In my case the cause is \r\n\r\n&gt; certpath: SunCertPathBuilder.depthFirstSearchForward(): final verification failed: java.security.cert.CertPathValidatorException: Certificate does not specify OCSP responder\r\n\r\nbut my problem is that I cannot get to the above underlying cause programmatically because the exception thrown(see below) is in the sun.security.validator package which I cannot import and even if I could I am not sure it contains any references to the underlying cause (please correct me if I am wrong)\r\n\r\nI am using Java 17\r\n\r\nThe relevant code is: \r\n\r\n    PKIXBuilderParameters params = new PKIXBuilderParameters(trustAnchors, null);\r\n    params.addCertStore(intermediateCAcertStore);\r\n    params.addCertPathChecker((PKIXCertPathChecker) CertPathValidator.getInstance(&quot;PKIX&quot;).getRevocationChecker());\r\n    \r\n    TrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;PKIX&quot;);\r\n    tmf.init(new CertPathTrustManagerParameters(params));\r\n    X509TrustManager tm = (X509TrustManager) tmf.getTrustManagers()[0];\r\n    tm.checkClientTrusted(new X509Certificate[]{ targetCert }), &quot;RSA&quot;);\r\n\r\nwhich throws:\r\n\r\n    Exception in thread &quot;main&quot; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\t  at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\r\n\t  at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\r\n\t  at java.base/sun.security.validator.Validator.validate(Validator.java:264)\r\n\t  at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:242)\r\n\t  at java.base/sun.security.ssl.X509TrustManagerImpl.checkClientTrusted(X509TrustManagerImpl.java:107)\r\n\t  at com.example.TrustManagerTest.test1(TrustManagerTest.java:98)\r\n\t  at com.example.TrustManagerTest.main(TrustManagerTest.java:54)\r\n    Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\t  at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\r\n\t  at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\r\n\t  at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\r\n\t  at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\r\n\t... 6 more\r\n\r\nso no way for me to see that the real cause is the OCSP check, unless i enable security debugging and search in the logs. But I want to programmatically discover it and maybe handle it, or at least somehow get hold of the \r\n\r\n&gt; java.security.cert.CertPathValidatorException: Certificate does not\r\n&gt; specify OCSP responder\r\n\r\nmessage and display it.\r\n \r\n\r\nAny suggestions?","title":"How to get hold of the cause of the PKIX path building failed Exception","body":"<p>I am getting the well known <code>PKIX path building failed</code> exception, and to find the underlying cause i have to enable java.security.debug=certpath and look at the logs. In my case the cause is</p>\n<blockquote>\n<p>certpath: SunCertPathBuilder.depthFirstSearchForward(): final verification failed: java.security.cert.CertPathValidatorException: Certificate does not specify OCSP responder</p>\n</blockquote>\n<p>but my problem is that I cannot get to the above underlying cause programmatically because the exception thrown(see below) is in the sun.security.validator package which I cannot import and even if I could I am not sure it contains any references to the underlying cause (please correct me if I am wrong)</p>\n<p>I am using Java 17</p>\n<p>The relevant code is:</p>\n<pre><code>PKIXBuilderParameters params = new PKIXBuilderParameters(trustAnchors, null);\nparams.addCertStore(intermediateCAcertStore);\nparams.addCertPathChecker((PKIXCertPathChecker) CertPathValidator.getInstance(&quot;PKIX&quot;).getRevocationChecker());\n\nTrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;PKIX&quot;);\ntmf.init(new CertPathTrustManagerParameters(params));\nX509TrustManager tm = (X509TrustManager) tmf.getTrustManagers()[0];\ntm.checkClientTrusted(new X509Certificate[]{ targetCert }), &quot;RSA&quot;);\n</code></pre>\n<p>which throws:</p>\n<pre><code>Exception in thread &quot;main&quot; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n  at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\n  at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\n  at java.base/sun.security.validator.Validator.validate(Validator.java:264)\n  at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:242)\n  at java.base/sun.security.ssl.X509TrustManagerImpl.checkClientTrusted(X509TrustManagerImpl.java:107)\n  at com.example.TrustManagerTest.test1(TrustManagerTest.java:98)\n  at com.example.TrustManagerTest.main(TrustManagerTest.java:54)\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n  at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\n  at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\n  at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\n  at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\n... 6 more\n</code></pre>\n<p>so no way for me to see that the real cause is the OCSP check, unless i enable security debugging and search in the logs. But I want to programmatically discover it and maybe handle it, or at least somehow get hold of the</p>\n<blockquote>\n<p>java.security.cert.CertPathValidatorException: Certificate does not\nspecify OCSP responder</p>\n</blockquote>\n<p>message and display it.</p>\n<p>Any suggestions?</p>\n"},{"tags":["java","angular","selenium-webdriver","cucumber","tekton"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1683636981,"post_id":76208850,"comment_id":134394442,"body_markdown":"Do you use some implicit wait?","body":"Do you use some implicit wait?"},{"owner":{"account_id":1416016,"reputation":158,"user_id":7101236,"display_name":"kakemonsteret"},"score":0,"creation_date":1683642024,"post_id":76208850,"comment_id":134395717,"body_markdown":"Nope. Most of the time there aren&#39;t any other sorts of Waits either.","body":"Nope. Most of the time there aren&#39;t any other sorts of Waits either."},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1683694961,"post_id":76208850,"comment_id":134403970,"body_markdown":"Then use implicit wait. Selenium has to simulate real user and real user has to wait to embeded resources as well. Using implicit wait is pretty much standard / best practice. I usually set it to 10 seconds but some webs (better say environments) can require more depending on it&#39;s availability and latency. Run a simple test in JMeter with enabled option &#39;download embeded resources&#39; to see potential bottlenecks.","body":"Then use implicit wait. Selenium has to simulate real user and real user has to wait to embeded resources as well. Using implicit wait is pretty much standard / best practice. I usually set it to 10 seconds but some webs (better say environments) can require more depending on it&#39;s availability and latency. Run a simple test in JMeter with enabled option &#39;download embeded resources&#39; to see potential bottlenecks."}],"owner":{"account_id":1416016,"reputation":158,"user_id":7101236,"display_name":"kakemonsteret"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683631899,"creation_date":1683631899,"question_id":76208850,"body_markdown":"After upgrading a complex site to Angular 14 (from previous version), an error that I&#39;ve never seen before has started popping up seemingligly at random when the Selenium/Cucumber/Java test suite is run in Tekton. The error is not reproducible locally.\r\n\r\n    org.openqa.selenium.JavascriptException: javascript error: document unloaded while waiting for  result\r\n\r\nI&#39;ve not found anything about this error in Selenium, only a few cases with general page functionality and JavaScript.\r\n\r\nHas anyone seen this before? I can&#39;t see that it has to do with Wait()-problems, since Selenium doesn&#39;t report anything about not finding elements. It doesn&#39;t report anything about page elements at all, just &quot;document unloaded&quot;. \r\n\r\nThere are no screenshots produced by Cucumber either, and it doesn&#39;t mark the last step as failed. There&#39;s just the error after the step.\r\n\r\nThe complete error:\r\n\r\n    org.openqa.selenium.JavascriptException: javascript error: document unloaded while waiting for result\r\n    (Session info: chrome=105.0.5195.52)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;sak-tjt-4927-oppgrader-star-20230509-105719-e2e-run-pod&#39;, ip: &#39;10.128.9.195&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;4.18.0-372.52.1.el8_6.x86_64&#39;, java.version: &#39;11.0.13&#39;\r\n    Driver info: org.openqa.selenium.remote.RemoteWebDriver\r\n    Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 105.0.5195.52, chrome: {chromedriverVersion: 105.0.5195.19 (b9c217c128c1..., userDataDir: /tmp/.com.google.Chrome.sx4Zaj}, goog:chromeOptions: {debuggerAddress: localhost:33141}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: ws://10.129.12.14:4444/sess..., se:cdpVersion: 105.0.5195.52, se:vnc: ws://10.129.12.14:4444/sess..., se:vncEnabled: true, se:vncLocalAddress: ws://10.129.12.14:7900, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\r\n    Session ID: 6ac5e2775265c90d61ef4963f6e30631 \r\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\r\n\tat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\r\n\tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\r\n\tat org.openqa.selenium.remote.RemoteWebDriver.executeAsyncScript(RemoteWebDriver.java:506)\r\n\tat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.isPageReady(ExtendedWebDriver.java:38)\r\n\tat e2e.support.Hooks.afterEachScenario(Hooks.java:145)\r\n\tat e2e.support.Hooks.tearDown(Hooks.java:120)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor73.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat cucumber.runtime.Utils$1.call(Utils.java:26)\r\n\tat cucumber.runtime.Timeout.timeout(Timeout.java:16)\r\n\tat cucumber.runtime.Utils.invoke(Utils.java:20)\r\n\tat cucumber.runtime.java.JavaHookDefinition.execute(JavaHookDefinition.java:65)\r\n\tat cucumber.runner.HookDefinitionMatch.runStep(HookDefinitionMatch.java:16)\r\n\tat cucumber.runner.TestStep.executeStep(TestStep.java:65)\r\n\tat cucumber.runner.TestStep.run(TestStep.java:50)\r\n\tat cucumber.runner.TestCase.run(TestCase.java:50)\r\n\tat cucumber.runner.Runner.runPickle(Runner.java:50)\r\n\tat io.cucumber.junit.PickleRunners$NoStepDescriptions.run(PickleRunners.java:146)\r\n\tat io.cucumber.junit.FeatureRunner.runChild(FeatureRunner.java:68)\r\n\tat io.cucumber.junit.FeatureRunner.runChild(FeatureRunner.java:23)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat io.cucumber.junit.Cucumber.runChild(Cucumber.java:142)\r\n\tat io.cucumber.junit.Cucumber.runChild(Cucumber.java:65)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat io.cucumber.junit.Cucumber$RunCucumber.evaluate(Cucumber.java:172)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)","title":"Selenium (Java) and Angular 14 - document unloaded error","body":"<p>After upgrading a complex site to Angular 14 (from previous version), an error that I've never seen before has started popping up seemingligly at random when the Selenium/Cucumber/Java test suite is run in Tekton. The error is not reproducible locally.</p>\n<pre><code>org.openqa.selenium.JavascriptException: javascript error: document unloaded while waiting for  result\n</code></pre>\n<p>I've not found anything about this error in Selenium, only a few cases with general page functionality and JavaScript.</p>\n<p>Has anyone seen this before? I can't see that it has to do with Wait()-problems, since Selenium doesn't report anything about not finding elements. It doesn't report anything about page elements at all, just &quot;document unloaded&quot;.</p>\n<p>There are no screenshots produced by Cucumber either, and it doesn't mark the last step as failed. There's just the error after the step.</p>\n<p>The complete error:</p>\n<pre><code>org.openqa.selenium.JavascriptException: javascript error: document unloaded while waiting for result\n(Session info: chrome=105.0.5195.52)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'sak-tjt-4927-oppgrader-star-20230509-105719-e2e-run-pod', ip: '10.128.9.195', os.name: 'Linux', os.arch: 'amd64', os.version: '4.18.0-372.52.1.el8_6.x86_64', java.version: '11.0.13'\nDriver info: org.openqa.selenium.remote.RemoteWebDriver\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 105.0.5195.52, chrome: {chromedriverVersion: 105.0.5195.19 (b9c217c128c1..., userDataDir: /tmp/.com.google.Chrome.sx4Zaj}, goog:chromeOptions: {debuggerAddress: localhost:33141}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: LINUX, platformName: LINUX, proxy: Proxy(), se:cdp: ws://10.129.12.14:4444/sess..., se:cdpVersion: 105.0.5195.52, se:vnc: ws://10.129.12.14:4444/sess..., se:vncEnabled: true, se:vncLocalAddress: ws://10.129.12.14:7900, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:virtualAuthenticators: true}\nSession ID: 6ac5e2775265c90d61ef4963f6e30631 \nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:490)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.createException(W3CHttpResponseCodec.java:187)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:122)\nat org.openqa.selenium.remote.http.W3CHttpResponseCodec.decode(W3CHttpResponseCodec.java:49)\nat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:158)\nat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:552)\nat org.openqa.selenium.remote.RemoteWebDriver.executeAsyncScript(RemoteWebDriver.java:506)\nat no.husbanken.e2e.rammeverk.selenium.driver.ExtendedWebDriver.isPageReady(ExtendedWebDriver.java:38)\nat e2e.support.Hooks.afterEachScenario(Hooks.java:145)\nat e2e.support.Hooks.tearDown(Hooks.java:120)\nat jdk.internal.reflect.GeneratedMethodAccessor73.invoke(Unknown Source)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat cucumber.runtime.Utils$1.call(Utils.java:26)\nat cucumber.runtime.Timeout.timeout(Timeout.java:16)\nat cucumber.runtime.Utils.invoke(Utils.java:20)\nat cucumber.runtime.java.JavaHookDefinition.execute(JavaHookDefinition.java:65)\nat cucumber.runner.HookDefinitionMatch.runStep(HookDefinitionMatch.java:16)\nat cucumber.runner.TestStep.executeStep(TestStep.java:65)\nat cucumber.runner.TestStep.run(TestStep.java:50)\nat cucumber.runner.TestCase.run(TestCase.java:50)\nat cucumber.runner.Runner.runPickle(Runner.java:50)\nat io.cucumber.junit.PickleRunners$NoStepDescriptions.run(PickleRunners.java:146)\nat io.cucumber.junit.FeatureRunner.runChild(FeatureRunner.java:68)\nat io.cucumber.junit.FeatureRunner.runChild(FeatureRunner.java:23)\nat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\nat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\nat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\nat io.cucumber.junit.Cucumber.runChild(Cucumber.java:142)\nat io.cucumber.junit.Cucumber.runChild(Cucumber.java:65)\nat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\nat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\nat io.cucumber.junit.Cucumber$RunCucumber.evaluate(Cucumber.java:172)\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\nat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\nat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\nat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\nat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)\nat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)\nat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)\nat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)\nat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)\nat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)\nat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)\nat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)\n</code></pre>\n"},{"tags":["java","unit-testing","testing","automated-tests","testng"],"comments":[{"owner":{"account_id":50535,"reputation":35297,"user_id":150771,"accept_rate":83,"display_name":"Chris Thompson"},"score":0,"creation_date":1401115319,"post_id":23872603,"comment_id":36746252,"body_markdown":"Can you show us the code that calls this?  Are you sure it&#39;s not somehow wrapped in a `try/catch`?","body":"Can you show us the code that calls this?  Are you sure it&#39;s not somehow wrapped in a <code>try&#47;catch</code>?"},{"owner":{"account_id":3319350,"reputation":1394,"user_id":2790903,"accept_rate":57,"display_name":"Doe Johnson"},"score":0,"creation_date":1401115503,"post_id":23872603,"comment_id":36746356,"body_markdown":"The method referring to the dataProvider is not aware of any exception in any way.","body":"The method referring to the dataProvider is not aware of any exception in any way."},{"owner":{"account_id":3319350,"reputation":1394,"user_id":2790903,"accept_rate":57,"display_name":"Doe Johnson"},"score":0,"creation_date":1401116121,"post_id":23872603,"comment_id":36746664,"body_markdown":"As far as I understand it the test method itself doesen*t call the dataprovider. A test method gets called with params provided by the Dataprovider.","body":"As far as I understand it the test method itself doesen*t call the dataprovider. A test method gets called with params provided by the Dataprovider."},{"owner":{"account_id":1288640,"reputation":8167,"user_id":1241193,"display_name":"Bob Dalgleish"},"score":0,"creation_date":1401118660,"post_id":23872603,"comment_id":36747894,"body_markdown":"The DataProvider is part of the preamble for tests, and, as such, does not get reported as an error. It is your responsibility to catch and log any errors in the DataProvider method.","body":"The DataProvider is part of the preamble for tests, and, as such, does not get reported as an error. It is your responsibility to catch and log any errors in the DataProvider method."},{"owner":{"account_id":3319350,"reputation":1394,"user_id":2790903,"accept_rate":57,"display_name":"Doe Johnson"},"score":0,"creation_date":1401133311,"post_id":23872603,"comment_id":36754096,"body_markdown":"Too bad. I wonder if there is any possibility to trigger an error directly. It does not need to be done in a DataProvider. I mean generally, is there a way?","body":"Too bad. I wonder if there is any possibility to trigger an error directly. It does not need to be done in a DataProvider. I mean generally, is there a way?"},{"owner":{"account_id":2021661,"reputation":62048,"user_id":2541573,"accept_rate":100,"display_name":"jub0bs"},"score":0,"creation_date":1527893843,"post_id":23872603,"comment_id":88314650,"body_markdown":"The behaviour of TestNG&#39;s `DataProvider` is really counterintuitive. I&#39;ve just wasted a couple of hours on this issue: I couldn&#39;t understand why my tests weren&#39;t running. However, your question and Roman&#39;s answer put me on the right track: it turns out an exception was being thrown from within my `DataProvider`. Thanks to you both!","body":"The behaviour of TestNG&#39;s <code>DataProvider</code> is really counterintuitive. I&#39;ve just wasted a couple of hours on this issue: I couldn&#39;t understand why my tests weren&#39;t running. However, your question and Roman&#39;s answer put me on the right track: it turns out an exception was being thrown from within my <code>DataProvider</code>. Thanks to you both!"}],"answers":[{"comments":[{"owner":{"account_id":3319350,"reputation":1394,"user_id":2790903,"accept_rate":57,"display_name":"Doe Johnson"},"score":3,"creation_date":1422697503,"post_id":27875783,"comment_id":44860087,"body_markdown":"The question is pretty old but the problem still is highly topical in my eyes. Thank you very much! The article is really helpful.","body":"The question is pretty old but the problem still is highly topical in my eyes. Thank you very much! The article is really helpful."}],"tags":[],"owner":{"account_id":70642,"reputation":12820,"user_id":204665,"accept_rate":92,"display_name":"Roman Nikitchenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1420889751,"creation_date":1420889751,"answer_id":27875783,"question_id":23872603,"body_markdown":"Here is the article which proposes fair set of alternatives with detailed enough explanations:\r\n\r\n[Fail instead of Skip a Test when TestNGs DataProvider throws an Exception][1]\r\n\r\nFor me best way happened to add test for data providers and here is brief illustration of idea:\r\n\r\n    public class MyClass {\r\n\r\n        @DataProvider(name = &quot;my-data-provider&quot;)\r\n        private Object [][] myProvider() {\r\n            // ...\r\n        }\r\n\r\n        @Test\r\n        public void testDataProviders() {\r\n            Assert.assertTrue(myProvider().length &gt; 0);\r\n        }\r\n\r\n        @Test\r\n        // ... Real tests.\r\n\r\n    }\r\n\r\n\r\n  [1]: http://rolf-engelhard.de/2011/10/fail-instead-of-skip-a-test-when-testngs-dataprovider-throws-an-exception/","title":"TestNG skips test after raising Exception in @DataProvider method","body":"<p>Here is the article which proposes fair set of alternatives with detailed enough explanations:</p>\n\n<p><a href=\"http://rolf-engelhard.de/2011/10/fail-instead-of-skip-a-test-when-testngs-dataprovider-throws-an-exception/\">Fail instead of Skip a Test when TestNGs DataProvider throws an Exception</a></p>\n\n<p>For me best way happened to add test for data providers and here is brief illustration of idea:</p>\n\n<pre><code>public class MyClass {\n\n    @DataProvider(name = \"my-data-provider\")\n    private Object [][] myProvider() {\n        // ...\n    }\n\n    @Test\n    public void testDataProviders() {\n        Assert.assertTrue(myProvider().length &gt; 0);\n    }\n\n    @Test\n    // ... Real tests.\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4680084,"reputation":547,"user_id":4947488,"display_name":"Savvy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683631858,"creation_date":1683631246,"answer_id":76208757,"question_id":23872603,"body_markdown":"Today, the most recent version of TestNG allows the user to explicitly tell the TestNG runner to treat DataProvider exceptions as Failures.\r\n\r\nIf you&#39;re running TestNG programmatically, this can be done like so - \r\n\r\n    TestNG tng = new TestNG();\r\n    tng.propagateDataProviderFailureAsTestFailure();\r\n\r\nIf you&#39;re running TestNG conventionally, you can also set the attribute on the DataProvider annotation like so - \r\n\r\n    @DataProvider(name = &quot;DataProviderName&quot;, propagateFailureAsTestFailure = true)\r\n    \tpublic Object[][] dataProviderMethod(){\r\n    \t\treturn new Object[][]{{&quot;row1-column1&quot;, &quot;row1-column2&quot;},\r\n    \t\t\t\t{&quot;row2-column1&quot;, &quot;row2-column2&quot;}};\r\n    \t}\r\n\r\n**Reference:**\r\n\r\nhttps://github.com/testng-team/testng/issues/217","title":"TestNG skips test after raising Exception in @DataProvider method","body":"<p>Today, the most recent version of TestNG allows the user to explicitly tell the TestNG runner to treat DataProvider exceptions as Failures.</p>\n<p>If you're running TestNG programmatically, this can be done like so -</p>\n<pre><code>TestNG tng = new TestNG();\ntng.propagateDataProviderFailureAsTestFailure();\n</code></pre>\n<p>If you're running TestNG conventionally, you can also set the attribute on the DataProvider annotation like so -</p>\n<pre><code>@DataProvider(name = &quot;DataProviderName&quot;, propagateFailureAsTestFailure = true)\n    public Object[][] dataProviderMethod(){\n        return new Object[][]{{&quot;row1-column1&quot;, &quot;row1-column2&quot;},\n                {&quot;row2-column1&quot;, &quot;row2-column2&quot;}};\n    }\n</code></pre>\n<p><strong>Reference:</strong></p>\n<p><a href=\"https://github.com/testng-team/testng/issues/217\" rel=\"nofollow noreferrer\">https://github.com/testng-team/testng/issues/217</a></p>\n"}],"owner":{"account_id":3319350,"reputation":1394,"user_id":2790903,"accept_rate":57,"display_name":"Doe Johnson"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6179,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":27875783,"answer_count":2,"score":14,"last_activity_date":1683631858,"creation_date":1401115240,"question_id":23872603,"body_markdown":"I&#39;m a bit confused.\r\n\r\nHow can I get TestNG to report an error for a test?\r\n\r\n    // ...\r\n    @DataProvider(name = &quot;foo&quot;)\r\n    public Object[][] provideData () {\r\n        throw new SomeRuntimeException(&quot;Some error occurred. The test configuration &quot;\r\n                + &quot;is somehow incorrect.&quot;);\r\n    }\r\n\r\nThis will just lead to test skipping. The exception doesn&#39;t even get logged. \r\nMoving this to a constructor will just get the exception logged but that&#39;s not enough...\r\n\r\nI want a big fat error message.\r\n\r\nAt the moment, using a dedicated (self) test method does the job which at leasts shows some test failure...\r\n\r\nAnyway, it would be nice to know how testNG&#39;s definition of an error looks like.\r\n\r\nThank you for any hints!","title":"TestNG skips test after raising Exception in @DataProvider method","body":"<p>I'm a bit confused.</p>\n\n<p>How can I get TestNG to report an error for a test?</p>\n\n<pre><code>// ...\n@DataProvider(name = \"foo\")\npublic Object[][] provideData () {\n    throw new SomeRuntimeException(\"Some error occurred. The test configuration \"\n            + \"is somehow incorrect.\");\n}\n</code></pre>\n\n<p>This will just lead to test skipping. The exception doesn't even get logged. \nMoving this to a constructor will just get the exception logged but that's not enough...</p>\n\n<p>I want a big fat error message.</p>\n\n<p>At the moment, using a dedicated (self) test method does the job which at leasts shows some test failure...</p>\n\n<p>Anyway, it would be nice to know how testNG's definition of an error looks like.</p>\n\n<p>Thank you for any hints!</p>\n"},{"tags":["java","volatile","concurrenthashmap"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683564602,"post_id":76096854,"comment_id":134382537,"body_markdown":"Why do you think that an acquirerelease relationship doesnt guaranty memory visibility?","body":"Why do you think that an acquirerelease relationship doesnt guaranty memory visibility?"},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1683567971,"post_id":76096854,"comment_id":134383269,"body_markdown":"&quot;Using only acquire and release semantics can&#39;t guarantee visibility&quot; - it does, but it&#39;s weaker then volatile. very good read [over here](https://stackoverflow.com/questions/46889610/sequential-consistency-volatile-explanation)","body":"&quot;Using only acquire and release semantics can&#39;t guarantee visibility&quot; - it does, but it&#39;s weaker then volatile. very good read <a href=\"https://stackoverflow.com/questions/46889610/sequential-consistency-volatile-explanation\">over here</a>"},{"owner":{"account_id":9352621,"reputation":41,"user_id":6941784,"display_name":"Oliver"},"score":0,"creation_date":1683596086,"post_id":76096854,"comment_id":134387471,"body_markdown":"Maybe I didnt describe it accurately. When I say using only acquire and release semantics can&#39;t guarantee visibility, I mean that the thread that calls `getObjectVolatile` can&#39;t immediately see the update made by the thread that calls `putObjectRelease`.@Holger @Eugene","body":"Maybe I didnt describe it accurately. When I say using only acquire and release semantics can&#39;t guarantee visibility, I mean that the thread that calls <code>getObjectVolatile</code> can&#39;t immediately see the update made by the thread that calls <code>putObjectRelease</code>.@Holger @Eugene"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683620416,"post_id":76096854,"comment_id":134390478,"body_markdown":"Depends on what you mean with immediately. There are no timing guarantees at all. But opaque and stronger memory accesses all have the same visibility regarding the writes and reads of the same variable. When it comes to transitivity relations, acquire/release is as good as volatile; the discussion about locking is about the ordering of concurrent `compute` operations, not about `get` calls.","body":"Depends on what you mean with immediately. There are no timing guarantees at all. But opaque and stronger memory accesses all have the same visibility regarding the writes and reads of the same variable. When it comes to transitivity relations, acquire/release is as good as volatile; the discussion about locking is about the ordering of concurrent <code>compute</code> operations, not about <code>get</code> calls."},{"owner":{"account_id":9352621,"reputation":41,"user_id":6941784,"display_name":"Oliver"},"score":0,"creation_date":1683623964,"post_id":76096854,"comment_id":134391287,"body_markdown":"In `jdk.internal.misc.Unsafe` of JDK11, the author mentioned something about immediate visibility in the comment of the method `putObjectRelease`.    ```Versions of {@link #putObjectVolatile(Object, long, Object)} that do not guarantee immediate visibility of the store to other threads. This method is generally only useful if the underlying field is a Java volatile (or if an array cell, one that is otherwise only accessed using volatile accesses). Corresponds to C11 atomic_store_explicit(..., memory_order_release).```","body":"In <code>jdk.internal.misc.Unsafe</code> of JDK11, the author mentioned something about immediate visibility in the comment of the method <code>putObjectRelease</code>.    <code>Versions of {@link #putObjectVolatile(Object, long, Object)} that do not guarantee immediate visibility of the store to other threads. This method is generally only useful if the underlying field is a Java volatile (or if an array cell, one that is otherwise only accessed using volatile accesses). Corresponds to C11 atomic_store_explicit(..., memory_order_release).</code>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683628501,"post_id":76096854,"comment_id":134392415,"body_markdown":"This comment originally belonged to `putOrderedObject` back then, when there were no acquire/release/opaque and not even a getOrderedObject, so the counterpart had to be a volatile read when the comment was written. I dont know why they decided to keep the comment dangling somewhere above the put methods (its *not* a documentation comment for `putReferenceRelease`) and change the first sentence to plural while not changing the second. otherwise only accessed using volatile accesses should have been updated to otherwise only accessed using opaque or stronger accesses.","body":"This comment originally belonged to <code>putOrderedObject</code> back then, when there were no acquire/release/opaque and not even a getOrderedObject, so the counterpart had to be a volatile read when the comment was written. I dont know why they decided to keep the comment dangling somewhere above the put methods (its <i>not</i> a documentation comment for <code>putReferenceRelease</code>) and change the first sentence to plural while not changing the second. otherwise only accessed using volatile accesses should have been updated to otherwise only accessed using opaque or stronger accesses."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683629219,"post_id":76096854,"comment_id":134392577,"body_markdown":"On the other hand, its neither an official API nor a javadoc comment that would appear anywhere. Since the official API (`VarHandle`) doesnt provide a documentation of these access mode either (and even the JMM doesnt cover them), the best you can get is [this document](https://gee.cs.oswego.edu/dl/html/j9mm.html).","body":"On the other hand, its neither an official API nor a javadoc comment that would appear anywhere. Since the official API (<code>VarHandle</code>) doesnt provide a documentation of these access mode either (and even the JMM doesnt cover them), the best you can get is <a href=\"https://gee.cs.oswego.edu/dl/html/j9mm.html\" rel=\"nofollow noreferrer\">this document</a>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683629496,"post_id":76096854,"comment_id":134392626,"body_markdown":"When you look at [the summary at the end](https://gee.cs.oswego.edu/dl/html/j9mm.html#summarysec) you find  Opaque mode ensures awareness of variables across threads  Release/Acquire mode additionally supports  Volatile mode additionally supports In short, opaque is enough for visibility (of a single variable) while the other modes provide additional guarantees regarding ordering, which is necessary to see compound objects in a consistent state or establish a *happens-before* relationship. It would be strange, if a release was not combinable with an acquire but required a volatile read","body":"When you look at <a href=\"https://gee.cs.oswego.edu/dl/html/j9mm.html#summarysec\" rel=\"nofollow noreferrer\">the summary at the end</a> you find  Opaque mode ensures awareness of variables across threads  Release/Acquire mode additionally supports  Volatile mode additionally supports In short, opaque is enough for visibility (of a single variable) while the other modes provide additional guarantees regarding ordering, which is necessary to see compound objects in a consistent state or establish a <i>happens-before</i> relationship. It would be strange, if a release was not combinable with an acquire but required a volatile read"}],"owner":{"account_id":9352621,"reputation":41,"user_id":6941784,"display_name":"Oliver"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":0,"score":4,"last_activity_date":1683631826,"creation_date":1682381034,"question_id":76096854,"body_markdown":"In `ConcurrentHashMap` of JDK8, both of the methods `tabAt`and `setTabAt` need volatile semantics.\r\n\r\n```java\r\nstatic final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) {\r\n    return (Node&lt;K,V&gt;)U.getObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);\r\n}\r\n\r\nstatic final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) {\r\n    U.putObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);\r\n}\r\n```\r\n\r\nThe author commented that:\r\n\r\n&gt; Note that calls to setTabAt always occur within locked regions,  and\r\n&gt; so in principle require only release ordering, not full volatile\r\n&gt; semantics, but are currently coded as volatile writes to be\r\n&gt; conservative.\r\n\r\nThen in `ConcurrentHashMap` of JDK11, both of the methods `tabAt` and `setTabAt` don&#39;t need volatile semantics and use acquire and release semantics instead.\r\n\r\n```java\r\nstatic final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) {\r\n    return (Node&lt;K,V&gt;)U.getObjectAcquire(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);\r\n}\r\n\r\nstatic final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) {\r\n    U.putObjectRelease(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);\r\n}\r\n```\r\n\r\nThe author commented that:\r\n\r\n&gt; Note that calls to setTabAt always occur within locked regions,  and\r\n&gt; so require only release ordering.\r\n\r\nAs far as I know, the elements of the array `Node&lt;K,V&gt;[] tab` aren&#39;t `volatile`. Using only acquire and release semantics can&#39;t guarantee immediate visibility. The thread that gets elements can&#39;t  immediately see the update made by the thread that sets elements.\r\n\r\nEven if the calls to `setTabAt` always occur within locked regions, it seems that it doesn&#39;t make any difference. Because the calls to `tabAt` don&#39;t always occur within locked regions, there is no guarantee of happens-before relationship.\r\n\r\nThe call to `tabAt` doesn&#39;t occur within a locked region in the method `get`\r\n\r\n```java\r\npublic V get(Object key) {\r\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek;\r\n    int h = spread(key.hashCode());\r\n    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\r\n        (e = tabAt(tab, (n - 1) &amp; h)) != null) {\r\n        if ((eh = e.hash) == h) {\r\n            if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))\r\n                return e.val;\r\n        }\r\n        else if (eh &lt; 0)\r\n            return (p = e.find(h, key)) != null ? p.val : null;\r\n        while ((e = e.next) != null) {\r\n            if (e.hash == h &amp;&amp;\r\n                ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))))\r\n                return e.val;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n```\r\n\r\nI wonder if there is something wrong with my understanding. Could anyone provide more information about this?\r\n\r\n","title":"Why doesn&#39;t ConcurrentHashMap of JDK11 need volatile semantics in the methods tabAt and setTabAt?","body":"<p>In <code>ConcurrentHashMap</code> of JDK8, both of the methods <code>tabAt</code>and <code>setTabAt</code> need volatile semantics.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) {\n    return (Node&lt;K,V&gt;)U.getObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);\n}\n\nstatic final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) {\n    U.putObjectVolatile(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);\n}\n</code></pre>\n<p>The author commented that:</p>\n<blockquote>\n<p>Note that calls to setTabAt always occur within locked regions,  and\nso in principle require only release ordering, not full volatile\nsemantics, but are currently coded as volatile writes to be\nconservative.</p>\n</blockquote>\n<p>Then in <code>ConcurrentHashMap</code> of JDK11, both of the methods <code>tabAt</code> and <code>setTabAt</code> don't need volatile semantics and use acquire and release semantics instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static final &lt;K,V&gt; Node&lt;K,V&gt; tabAt(Node&lt;K,V&gt;[] tab, int i) {\n    return (Node&lt;K,V&gt;)U.getObjectAcquire(tab, ((long)i &lt;&lt; ASHIFT) + ABASE);\n}\n\nstatic final &lt;K,V&gt; void setTabAt(Node&lt;K,V&gt;[] tab, int i, Node&lt;K,V&gt; v) {\n    U.putObjectRelease(tab, ((long)i &lt;&lt; ASHIFT) + ABASE, v);\n}\n</code></pre>\n<p>The author commented that:</p>\n<blockquote>\n<p>Note that calls to setTabAt always occur within locked regions,  and\nso require only release ordering.</p>\n</blockquote>\n<p>As far as I know, the elements of the array <code>Node&lt;K,V&gt;[] tab</code> aren't <code>volatile</code>. Using only acquire and release semantics can't guarantee immediate visibility. The thread that gets elements can't  immediately see the update made by the thread that sets elements.</p>\n<p>Even if the calls to <code>setTabAt</code> always occur within locked regions, it seems that it doesn't make any difference. Because the calls to <code>tabAt</code> don't always occur within locked regions, there is no guarantee of happens-before relationship.</p>\n<p>The call to <code>tabAt</code> doesn't occur within a locked region in the method <code>get</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public V get(Object key) {\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; e, p; int n, eh; K ek;\n    int h = spread(key.hashCode());\n    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\n        (e = tabAt(tab, (n - 1) &amp; h)) != null) {\n        if ((eh = e.hash) == h) {\n            if ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek)))\n                return e.val;\n        }\n        else if (eh &lt; 0)\n            return (p = e.find(h, key)) != null ? p.val : null;\n        while ((e = e.next) != null) {\n            if (e.hash == h &amp;&amp;\n                ((ek = e.key) == key || (ek != null &amp;&amp; key.equals(ek))))\n                return e.val;\n        }\n    }\n    return null;\n}\n</code></pre>\n<p>I wonder if there is something wrong with my understanding. Could anyone provide more information about this?</p>\n"},{"tags":["java","string","encoding","character-encoding","windows-1251"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1683565927,"post_id":76202691,"comment_id":134382809,"body_markdown":"Very strange: on my machine this works without problem and yields the expected output. Also running it in an online IDE like https://www.jdoodle.com/online-java-compiler/ also gives the expected output.","body":"Very strange: on my machine this works without problem and yields the expected output. Also running it in an online IDE like <a href=\"https://www.jdoodle.com/online-java-compiler/\" rel=\"nofollow noreferrer\">jdoodle.com/online-java-compiler</a> also gives the expected output."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1683566241,"post_id":76202691,"comment_id":134382886,"body_markdown":"Note that `HexFormat.of().withDelimiter(&quot;, &quot;).formatHex(&quot;&quot;.getBytes(&quot;UTF-8&quot;))` is `d0, 9f, d1, 80, d0, b8, d0, b2, d0, b5, d1, 82`, perhaps you have compiled with source file of different encoding to windows-1251","body":"Note that <code>HexFormat.of().withDelimiter(&quot;, &quot;).formatHex(&quot;&quot;.getBytes(&quot;UTF-8&quot;))</code> is <code>d0, 9f, d1, 80, d0, b8, d0, b2, d0, b5, d1, 82</code>, perhaps you have compiled with source file of different encoding to windows-1251"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1683566313,"post_id":76202691,"comment_id":134382896,"body_markdown":"For some reason it looks like your vm cannot decode Windows-1251. It&#39;s essentially ignored and you get UTF-8. btw if you import `HexFormat` why do you do so much work? ;)","body":"For some reason it looks like your vm cannot decode Windows-1251. It&#39;s essentially ignored and you get UTF-8. btw if you import <code>HexFormat</code> why do you do so much work? ;)"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683566529,"post_id":76202691,"comment_id":134382958,"body_markdown":"[Can not reproduce](https://tio.run/##fVDLasMwELznKxaBQSaOSAK9NO2lpcf2kmPIQbFlR7EjGWudxJRA6Y/0HwqFfobzRa78CDGlqS6LdndmZ2bDd3y0CeKq8hNuDDxzqeB1APal@SqRPhjkaMtOywC2dkrnmEkVLZbAs8i4gOtM7w08HXyRotRndP3mhUGxZTpHlloMJopu7D2mpGb@mmdGIHvsaiBCnifYfanLAmnShBcvfCuo684upM15MHAPpPw4vZXf5Wf5dXons//uklWBwoCvc4VgLe6lCqzs0WR6M7kFAkMwLBL4UG9R0p8SlyVCRbjuaWhY293rMA9@NVr8cXAt3R5rrbZJOOOFd7asbBRuL95QZ0AtBGKbxXhmy12L6ATbznDYB/yVTUiJYxZOsKw5Ds54enAU8ZpbHsReS7iIlz33x87Hsap@AA). You should ensure that you source file has the right encoding (and the compiler options matched). Try to verify with `System.out.println(s);`","body":"<a href=\"https://tio.run/##fVDLasMwELznKxaBQSaOSAK9NO2lpcf2kmPIQbFlR7EjGWudxJRA6Y/0HwqFfobzRa78CDGlqS6LdndmZ2bDd3y0CeKq8hNuDDxzqeB1APal@SqRPhjkaMtOywC2dkrnmEkVLZbAs8i4gOtM7w08HXyRotRndP3mhUGxZTpHlloMJopu7D2mpGb@mmdGIHvsaiBCnifYfanLAmnShBcvfCuo684upM15MHAPpPw4vZXf5Wf5dXons//uklWBwoCvc4VgLe6lCqzs0WR6M7kFAkMwLBL4UG9R0p8SlyVCRbjuaWhY293rMA9@NVr8cXAt3R5rrbZJOOOFd7asbBRuL95QZ0AtBGKbxXhmy12L6ATbznDYB/yVTUiJYxZOsKw5Ds54enAU8ZpbHsReS7iIlz33x87Hsap@AA\" rel=\"nofollow noreferrer\">Can not reproduce</a>. You should ensure that you source file has the right encoding (and the compiler options matched). Try to verify with <code>System.out.println(s);</code>"}],"answers":[{"comments":[{"owner":{"account_id":6306550,"reputation":33,"user_id":4899476,"display_name":"Ilyas"},"score":2,"creation_date":1683567964,"post_id":76202887,"comment_id":134383268,"body_markdown":"Yes, you&#39;re absolutely right. I also changed my java file encoding and it worked as expected. Thank you a lot. This shows me how encoding is complicated. When we initialize a variable in code, the value depends on encoding of source(compiled) file as well. I thought, since the variable is initialized and handled by jvm it will take care of everything. Of course, having hardcoded non latin value in code is a bad practice","body":"Yes, you&#39;re absolutely right. I also changed my java file encoding and it worked as expected. Thank you a lot. This shows me how encoding is complicated. When we initialize a variable in code, the value depends on encoding of source(compiled) file as well. I thought, since the variable is initialized and handled by jvm it will take care of everything. Of course, having hardcoded non latin value in code is a bad practice"}],"tags":[],"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1683631651,"creation_date":1683566608,"answer_id":76202887,"question_id":76202691,"body_markdown":"It looks like perhaps you have UTF-8 encoded source file when you compiled?\r\n\r\n    HexFormat.of().withPrefix(&quot;, &quot;).formatHex(&quot;&quot;.getBytes(&quot;UTF-8&quot;))\r\n    ==&gt; &quot;d09fd180d0b8d0b2d0b5d182&quot;\r\n\r\nIf I save your code in my UTF-8 editor and compile+run:\r\n\r\n    java -Dfile.encoding=UTF-8 Foo.java\r\n    UTF-8\r\n    bytes count in windows-1251: 6\r\n    windows-1251[0] = 0xcf\r\n    windows-1251[1] = 0xf0\r\n    windows-1251[2] = 0xe8\r\n    windows-1251[3] = 0xe2\r\n    windows-1251[4] = 0xe5\r\n    windows-1251[5] = 0xf2\r\n\r\nWhereas this matches your output if compile+run that UTF8 file with your default encoding:\r\n\r\n    java -Dfile.encoding=windows-1251 Foo.java\r\n    windows-1251\r\n    bytes count in windows-1251: 12\r\n    windows-1251[0] = 0xd0\r\n    windows-1251[1] = 0x9f\r\n    windows-1251[2] = 0xd1\r\n    windows-1251[3] = 0x80\r\n    windows-1251[4] = 0xd0\r\n    windows-1251[5] = 0xb8\r\n    windows-1251[6] = 0xd0\r\n    windows-1251[7] = 0xb2\r\n    windows-1251[8] = 0xd0\r\n    windows-1251[9] = 0xb5\r\n    windows-1251[10] = 0xd1\r\n    windows-1251[11] = 0x82\r\n\r\nIf I change my editor charset to windows-1251 then the output is as expected:\r\n\r\n    java -Dfile.encoding=windows-1251 Foo.java\r\n    windows-1251\r\n    bytes count in windows-1251: 6\r\n    windows-1251[0] = 0xcf\r\n    windows-1251[1] = 0xf0\r\n    windows-1251[2] = 0xe8\r\n    windows-1251[3] = 0xe2\r\n    windows-1251[4] = 0xe5\r\n    windows-1251[5] = 0xf2\r\n\r\n**EDIT**\r\n\r\nFor simplicity above I&#39;ve used `java Foo.java` &quot;compile and launch&quot; mode but for normal separate use the important steps are to match up `javac` with character encoding of the source code, and `java` with any encoding you want the app to use:\r\n\r\n    javac -Dfile.encoding=TheJavaFilesCharSet {JavaFiles}\r\n    java  -Dfile.encoding=AnyOrDefaultCharSet {ClassWithMain}\r\n\r\nAs mentioned in the comments its worth using `HexFormat`, it is immutable and therefore safe to assign to a static field directly or via a user-friendly debugging output method:\r\n\r\n    private static final HexFormat HEX = HexFormat.ofDelimiter(&quot;, &quot;).withPrefix(&quot;0x&quot;).withUpperCase();\r\n    public static String formatHex(byte[] arr) {\r\n        return &quot;new byte[/*&quot;+arr.length+&quot;*/] {&quot;+HEX.formatHex(arr)+&quot;}&quot;;\r\n    }\r\n\r\n    HEX.formatHex(new byte[]{1,2,3});\r\n    ==&gt; &quot;0x01, 0x02, 0x03&quot;\r\n\r\n    formatHex(new byte[]{1,2,3});\r\n    ==&gt; &quot;new byte[/*3*/] {0x01, 0x02, 0x03}&quot;\r\n\r\nThe latter is helpful if you want to cut/paste definitions back into testcases. ","title":"String.getBytes(&quot;8bit encoding&quot;) returns 2 bytes per symbol","body":"<p>It looks like perhaps you have UTF-8 encoded source file when you compiled?</p>\n<pre><code>HexFormat.of().withPrefix(&quot;, &quot;).formatHex(&quot;&quot;.getBytes(&quot;UTF-8&quot;))\n==&gt; &quot;d09fd180d0b8d0b2d0b5d182&quot;\n</code></pre>\n<p>If I save your code in my UTF-8 editor and compile+run:</p>\n<pre><code>java -Dfile.encoding=UTF-8 Foo.java\nUTF-8\nbytes count in windows-1251: 6\nwindows-1251[0] = 0xcf\nwindows-1251[1] = 0xf0\nwindows-1251[2] = 0xe8\nwindows-1251[3] = 0xe2\nwindows-1251[4] = 0xe5\nwindows-1251[5] = 0xf2\n</code></pre>\n<p>Whereas this matches your output if compile+run that UTF8 file with your default encoding:</p>\n<pre><code>java -Dfile.encoding=windows-1251 Foo.java\nwindows-1251\nbytes count in windows-1251: 12\nwindows-1251[0] = 0xd0\nwindows-1251[1] = 0x9f\nwindows-1251[2] = 0xd1\nwindows-1251[3] = 0x80\nwindows-1251[4] = 0xd0\nwindows-1251[5] = 0xb8\nwindows-1251[6] = 0xd0\nwindows-1251[7] = 0xb2\nwindows-1251[8] = 0xd0\nwindows-1251[9] = 0xb5\nwindows-1251[10] = 0xd1\nwindows-1251[11] = 0x82\n</code></pre>\n<p>If I change my editor charset to windows-1251 then the output is as expected:</p>\n<pre><code>java -Dfile.encoding=windows-1251 Foo.java\nwindows-1251\nbytes count in windows-1251: 6\nwindows-1251[0] = 0xcf\nwindows-1251[1] = 0xf0\nwindows-1251[2] = 0xe8\nwindows-1251[3] = 0xe2\nwindows-1251[4] = 0xe5\nwindows-1251[5] = 0xf2\n</code></pre>\n<p><strong>EDIT</strong></p>\n<p>For simplicity above I've used <code>java Foo.java</code> &quot;compile and launch&quot; mode but for normal separate use the important steps are to match up <code>javac</code> with character encoding of the source code, and <code>java</code> with any encoding you want the app to use:</p>\n<pre><code>javac -Dfile.encoding=TheJavaFilesCharSet {JavaFiles}\njava  -Dfile.encoding=AnyOrDefaultCharSet {ClassWithMain}\n</code></pre>\n<p>As mentioned in the comments its worth using <code>HexFormat</code>, it is immutable and therefore safe to assign to a static field directly or via a user-friendly debugging output method:</p>\n<pre><code>private static final HexFormat HEX = HexFormat.ofDelimiter(&quot;, &quot;).withPrefix(&quot;0x&quot;).withUpperCase();\npublic static String formatHex(byte[] arr) {\n    return &quot;new byte[/*&quot;+arr.length+&quot;*/] {&quot;+HEX.formatHex(arr)+&quot;}&quot;;\n}\n\nHEX.formatHex(new byte[]{1,2,3});\n==&gt; &quot;0x01, 0x02, 0x03&quot;\n\nformatHex(new byte[]{1,2,3});\n==&gt; &quot;new byte[/*3*/] {0x01, 0x02, 0x03}&quot;\n</code></pre>\n<p>The latter is helpful if you want to cut/paste definitions back into testcases.</p>\n"}],"owner":{"account_id":6306550,"reputation":33,"user_id":4899476,"display_name":"Ilyas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76202887,"answer_count":1,"score":2,"last_activity_date":1683631651,"creation_date":1683564940,"question_id":76202691,"body_markdown":"I&#39;m trying to understand character encoding for Strings in Java. I&#39;m working on Windows 10 and the default character encoding is `windows-1251`. it is 8-bit encoding character. So it must be 1 byte for 1 symbol. So when I call `getBytes()` for a String with 6 symbols, I expect an array of 6 bytes. But the following code snippet returns 12, instead of 6.\r\n```\r\n&quot;&quot;.getBytes(&quot;windows-1251&quot;).length // returns 12\r\n```\r\nAt first, I thought that the first byte of the character must be zero. But both bytes related to the character have non-zero values. Could anyone explain, what I&#39;m missing here, please?\r\n\r\nHere is an example of how I tested it\r\n\r\n```\r\nimport java.nio.charset.Charset;\r\nimport java.io.*;\r\nimport java.util.HexFormat;\r\n\r\npublic class Foo\r\n{\r\n    public static void main(String[] args) throws Exception\r\n    {\r\n\t\tSystem.out.println(Charset.defaultCharset().displayName());\r\n\t\tString s = &quot;&quot;;\r\n\t\tSystem.out.println(&quot;bytes count in windows-1251: &quot; + s.getBytes(&quot;windows-1251&quot;).length);\r\n\t\tprintBytes(s.getBytes(&quot;windows-1251&quot;), &quot;windows-1251&quot;);\r\n    }\r\n\t\r\n\tpublic static void printBytes(byte[] array, String name) {\r\n\t\tfor (int k = 0; k &lt; array.length; k++) {\r\n\t\t\tSystem.out.println(name + &quot;[&quot; + k + &quot;] = &quot; + &quot;0x&quot; +\r\n\t\t\t\tbyteToHex(array[k]));\r\n\t\t}\r\n\t}\r\n\r\nstatic public String byteToHex(byte b) {\r\n      // Returns hex String representation of byte b\r\n      char hexDigit[] = {\r\n         &#39;0&#39;, &#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;, &#39;5&#39;, &#39;6&#39;, &#39;7&#39;,\r\n         &#39;8&#39;, &#39;9&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39;, &#39;f&#39;\r\n      };\r\n      char[] array = { hexDigit[(b &gt;&gt; 4) &amp; 0x0f], hexDigit[b &amp; 0x0f] };\r\n      return new String(array);\r\n   }\r\n}\r\n```\r\nthe result is:\r\n\r\n```\r\nwindows-1251\r\nbytes count in windows-1251: 12\r\nwindows-1251[0] = 0xd0\r\nwindows-1251[1] = 0x9f\r\nwindows-1251[2] = 0xd1\r\nwindows-1251[3] = 0x80\r\nwindows-1251[4] = 0xd0\r\nwindows-1251[5] = 0xb8\r\nwindows-1251[6] = 0xd0\r\nwindows-1251[7] = 0xb2\r\nwindows-1251[8] = 0xd0\r\nwindows-1251[9] = 0xb5\r\nwindows-1251[10] = 0xd1\r\nwindows-1251[11] = 0x82\r\n```\r\n\r\nbut what I expect is:\r\n\r\n```\r\nwindows-1251\r\nbytes count in windows-1251: 6\r\nwindows-1251[0] = 0xcf\r\nwindows-1251[1] = 0xf0\r\nwindows-1251[2] = 0xe8\r\nwindows-1251[3] = 0xe2\r\nwindows-1251[4] = 0xe5\r\nwindows-1251[5] = 0xf2\r\n```\r\n\r\n","title":"String.getBytes(&quot;8bit encoding&quot;) returns 2 bytes per symbol","body":"<p>I'm trying to understand character encoding for Strings in Java. I'm working on Windows 10 and the default character encoding is <code>windows-1251</code>. it is 8-bit encoding character. So it must be 1 byte for 1 symbol. So when I call <code>getBytes()</code> for a String with 6 symbols, I expect an array of 6 bytes. But the following code snippet returns 12, instead of 6.</p>\n<pre><code>&quot;&quot;.getBytes(&quot;windows-1251&quot;).length // returns 12\n</code></pre>\n<p>At first, I thought that the first byte of the character must be zero. But both bytes related to the character have non-zero values. Could anyone explain, what I'm missing here, please?</p>\n<p>Here is an example of how I tested it</p>\n<pre><code>import java.nio.charset.Charset;\nimport java.io.*;\nimport java.util.HexFormat;\n\npublic class Foo\n{\n    public static void main(String[] args) throws Exception\n    {\n        System.out.println(Charset.defaultCharset().displayName());\n        String s = &quot;&quot;;\n        System.out.println(&quot;bytes count in windows-1251: &quot; + s.getBytes(&quot;windows-1251&quot;).length);\n        printBytes(s.getBytes(&quot;windows-1251&quot;), &quot;windows-1251&quot;);\n    }\n    \n    public static void printBytes(byte[] array, String name) {\n        for (int k = 0; k &lt; array.length; k++) {\n            System.out.println(name + &quot;[&quot; + k + &quot;] = &quot; + &quot;0x&quot; +\n                byteToHex(array[k]));\n        }\n    }\n\nstatic public String byteToHex(byte b) {\n      // Returns hex String representation of byte b\n      char hexDigit[] = {\n         '0', '1', '2', '3', '4', '5', '6', '7',\n         '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'\n      };\n      char[] array = { hexDigit[(b &gt;&gt; 4) &amp; 0x0f], hexDigit[b &amp; 0x0f] };\n      return new String(array);\n   }\n}\n</code></pre>\n<p>the result is:</p>\n<pre><code>windows-1251\nbytes count in windows-1251: 12\nwindows-1251[0] = 0xd0\nwindows-1251[1] = 0x9f\nwindows-1251[2] = 0xd1\nwindows-1251[3] = 0x80\nwindows-1251[4] = 0xd0\nwindows-1251[5] = 0xb8\nwindows-1251[6] = 0xd0\nwindows-1251[7] = 0xb2\nwindows-1251[8] = 0xd0\nwindows-1251[9] = 0xb5\nwindows-1251[10] = 0xd1\nwindows-1251[11] = 0x82\n</code></pre>\n<p>but what I expect is:</p>\n<pre><code>windows-1251\nbytes count in windows-1251: 6\nwindows-1251[0] = 0xcf\nwindows-1251[1] = 0xf0\nwindows-1251[2] = 0xe8\nwindows-1251[3] = 0xe2\nwindows-1251[4] = 0xe5\nwindows-1251[5] = 0xf2\n</code></pre>\n"},{"tags":["java","postgresql","hibernate","hibernate-tools","hbm2java"],"comments":[{"owner":{"account_id":10350691,"reputation":907,"user_id":7634201,"display_name":"C. Weber"},"score":0,"creation_date":1683215357,"post_id":76174987,"comment_id":134335884,"body_markdown":"Does this answer your question? [Getting error when mapping PostgreSQL LTREE column in hibernate](https://stackoverflow.com/questions/41287897/getting-error-when-mapping-postgresql-ltree-column-in-hibernate)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41287897/getting-error-when-mapping-postgresql-ltree-column-in-hibernate\">Getting error when mapping PostgreSQL LTREE column in hibernate</a>"},{"owner":{"account_id":2569018,"reputation":647,"user_id":2228257,"accept_rate":55,"display_name":"Daniel Ziltener"},"score":0,"creation_date":1683216344,"post_id":76174987,"comment_id":134336115,"body_markdown":"No, because it does not tell me how I can configure hbm2java to use it.","body":"No, because it does not tell me how I can configure hbm2java to use it."}],"answers":[{"tags":[],"owner":{"account_id":2569018,"reputation":647,"user_id":2228257,"accept_rate":55,"display_name":"Daniel Ziltener"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1683631471,"creation_date":1683631471,"answer_id":76208795,"question_id":76174987,"body_markdown":"So, I finally managed to do it. It&#39;s complicated, to say the least. \r\n\r\nFirst, you have to create your user type - make sure to implement both `UserType&lt;&gt;` and `JdbcType` - in this case, I used `UserType&lt;LTree&gt;` and created an `LTree` class to hold the value, but you could also just use `String`.\r\n\r\nThen you need to subclass `DelegatingStrategy` as well as whatever SQLDialect you are using - in my example, it&#39;s `PostgreSQLDialect`.\r\n\r\nExampleReverseEngineeringStrategy:\r\n```java\r\npublic class ExampleReverseEngineeringStrategy extends DelegatingStrategy {\r\n  public ExampleReverseEngineeringStrategy(RevengStrategy delegate) {\r\n    super(delegate);\r\n  }\r\n\r\n  @Override\r\n  public String columnToHibernateTypeName(TableIdentifier table, String columnName, int sqlType, int length, int precision, int scale, boolean nullable, boolean generatedIdentifier) {\r\n    if(columnName.equals(&quot;path&quot;)) {\r\n      return &quot;ltree&quot;;\r\n    } else {\r\n      return super.columnToHibernateTypeName(table, columnName, sqlType, length, precision, scale, nullable, generatedIdentifier);\r\n  }\r\n}\r\n```\r\n\r\nExamplePostgreSQLDialect:\r\n```java\r\npublic class ExamplePostgreSQLDialect extends PostgreSQLDialect {\r\n  @Override\r\n  public void contributeTypes(TypeContributions typeContributions, ServiceRegistry serviceRegistry) {\r\n    super.contributeTypes(typeContributions, serviceRegistry);\r\n    typeContributions.getTypeConfiguration().getBasicTypeRegistry().register(LTreeType.INSTANCE, &quot;ltree&quot;);\r\n  }\r\n}\r\n```\r\n\r\nFinally, I used the Maven antrun plugin. This is by far the longest code block, so beware:\r\n\r\n```xml\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-tools-ant&lt;/artifactId&gt;\r\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-tools-orm&lt;/artifactId&gt;\r\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.6.0&lt;/version&gt;\r\n          &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;entity-generation-ant&lt;/id&gt;\r\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n            &lt;configuration&gt;\r\n              &lt;target&gt;\r\n                &lt;echo message=&quot;Ant: Running Hibernatetool with ${project.build.sourceDirectory}&quot; /&gt;\r\n                &lt;property name=&quot;maven_compile_classpath&quot;\r\n                refid=&quot;maven.compile.classpath&quot; /&gt;\r\n                &lt;property name=&quot;maven_test_classpath&quot;\r\n                refid=&quot;maven.test.classpath&quot; /&gt;\r\n                &lt;path id=&quot;hibernatetool.path&quot;&gt;\r\n                  &lt;pathelement path=&quot;${maven_compile_classpath}&quot; /&gt;\r\n                  &lt;pathelement path=&quot;${maven_test_classpath}&quot; /&gt;\r\n                  &lt;pathelement path=&quot;${project.build.sourceDirectory}&quot; /&gt;\r\n                  &lt;pathelement path=&quot;${project.build.outputDirectory}&quot; /&gt;\r\n                &lt;/path&gt;\r\n                &lt;taskdef name=&quot;hibernatetool&quot;\r\n                classname=&quot;org.hibernate.tool.ant.HibernateToolTask&quot;\r\n                classpathref=&quot;hibernatetool.path&quot; /&gt;\r\n                &lt;hibernatetool destdir=&quot;${project.build.directory}/generated-sources&quot;&gt;\r\n\r\n                  &lt;classpath&gt;\r\n                    &lt;path refid=&quot;hibernatetool.path&quot; /&gt;\r\n                    &lt;path location=&quot;${project.build.outputDirectory}&quot; /&gt;\r\n                  &lt;/classpath&gt;\r\n                  &lt;jdbcconfiguration propertyfile=&quot;src/main/resources/application.properties&quot;\r\n                  packagename=&quot;com.example.db&quot;\r\n                  reversestrategy=&quot;com.example.SparsanaReverseEngineeringStrategy&quot;&gt;\r\n\r\n                    &lt;!-- revengfile=&quot;src/main/resources/hibernate.reveng.xml&quot; &gt; --&gt;\r\n                    &lt;fileset dir=&quot;${project.build.sourceDirectory}&quot; /&gt;\r\n                  &lt;/jdbcconfiguration&gt;\r\n                  &lt;hbm2java jdk5=&quot;true&quot; ejb3=&quot;true&quot; /&gt;\r\n                &lt;/hibernatetool&gt;\r\n              &lt;/target&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;run&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n```\r\n\r\nIt might also work with the &quot;normal&quot; hbm2java Maven plugin, I didn&#39;t test that yet, I didn&#39;t have the nerve yet. Hopefully this will help someone in as dire a situation as I was.","title":"How can one get Hibernate to use UserType for hbm2java code generation?","body":"<p>So, I finally managed to do it. It's complicated, to say the least.</p>\n<p>First, you have to create your user type - make sure to implement both <code>UserType&lt;&gt;</code> and <code>JdbcType</code> - in this case, I used <code>UserType&lt;LTree&gt;</code> and created an <code>LTree</code> class to hold the value, but you could also just use <code>String</code>.</p>\n<p>Then you need to subclass <code>DelegatingStrategy</code> as well as whatever SQLDialect you are using - in my example, it's <code>PostgreSQLDialect</code>.</p>\n<p>ExampleReverseEngineeringStrategy:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ExampleReverseEngineeringStrategy extends DelegatingStrategy {\n  public ExampleReverseEngineeringStrategy(RevengStrategy delegate) {\n    super(delegate);\n  }\n\n  @Override\n  public String columnToHibernateTypeName(TableIdentifier table, String columnName, int sqlType, int length, int precision, int scale, boolean nullable, boolean generatedIdentifier) {\n    if(columnName.equals(&quot;path&quot;)) {\n      return &quot;ltree&quot;;\n    } else {\n      return super.columnToHibernateTypeName(table, columnName, sqlType, length, precision, scale, nullable, generatedIdentifier);\n  }\n}\n</code></pre>\n<p>ExamplePostgreSQLDialect:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ExamplePostgreSQLDialect extends PostgreSQLDialect {\n  @Override\n  public void contributeTypes(TypeContributions typeContributions, ServiceRegistry serviceRegistry) {\n    super.contributeTypes(typeContributions, serviceRegistry);\n    typeContributions.getTypeConfiguration().getBasicTypeRegistry().register(LTreeType.INSTANCE, &quot;ltree&quot;);\n  }\n}\n</code></pre>\n<p>Finally, I used the Maven antrun plugin. This is by far the longest code block, so beware:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;dependencies&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-tools-ant&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.tool&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-tools-orm&lt;/artifactId&gt;\n            &lt;version&gt;${hibernate.version}&lt;/version&gt;\n          &lt;/dependency&gt;\n          &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;42.6.0&lt;/version&gt;\n          &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;entity-generation-ant&lt;/id&gt;\n            &lt;phase&gt;generate-sources&lt;/phase&gt;\n            &lt;configuration&gt;\n              &lt;target&gt;\n                &lt;echo message=&quot;Ant: Running Hibernatetool with ${project.build.sourceDirectory}&quot; /&gt;\n                &lt;property name=&quot;maven_compile_classpath&quot;\n                refid=&quot;maven.compile.classpath&quot; /&gt;\n                &lt;property name=&quot;maven_test_classpath&quot;\n                refid=&quot;maven.test.classpath&quot; /&gt;\n                &lt;path id=&quot;hibernatetool.path&quot;&gt;\n                  &lt;pathelement path=&quot;${maven_compile_classpath}&quot; /&gt;\n                  &lt;pathelement path=&quot;${maven_test_classpath}&quot; /&gt;\n                  &lt;pathelement path=&quot;${project.build.sourceDirectory}&quot; /&gt;\n                  &lt;pathelement path=&quot;${project.build.outputDirectory}&quot; /&gt;\n                &lt;/path&gt;\n                &lt;taskdef name=&quot;hibernatetool&quot;\n                classname=&quot;org.hibernate.tool.ant.HibernateToolTask&quot;\n                classpathref=&quot;hibernatetool.path&quot; /&gt;\n                &lt;hibernatetool destdir=&quot;${project.build.directory}/generated-sources&quot;&gt;\n\n                  &lt;classpath&gt;\n                    &lt;path refid=&quot;hibernatetool.path&quot; /&gt;\n                    &lt;path location=&quot;${project.build.outputDirectory}&quot; /&gt;\n                  &lt;/classpath&gt;\n                  &lt;jdbcconfiguration propertyfile=&quot;src/main/resources/application.properties&quot;\n                  packagename=&quot;com.example.db&quot;\n                  reversestrategy=&quot;com.example.SparsanaReverseEngineeringStrategy&quot;&gt;\n\n                    &lt;!-- revengfile=&quot;src/main/resources/hibernate.reveng.xml&quot; &gt; --&gt;\n                    &lt;fileset dir=&quot;${project.build.sourceDirectory}&quot; /&gt;\n                  &lt;/jdbcconfiguration&gt;\n                  &lt;hbm2java jdk5=&quot;true&quot; ejb3=&quot;true&quot; /&gt;\n                &lt;/hibernatetool&gt;\n              &lt;/target&gt;\n            &lt;/configuration&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;run&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>It might also work with the &quot;normal&quot; hbm2java Maven plugin, I didn't test that yet, I didn't have the nerve yet. Hopefully this will help someone in as dire a situation as I was.</p>\n"}],"owner":{"account_id":2569018,"reputation":647,"user_id":2228257,"accept_rate":55,"display_name":"Daniel Ziltener"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76208795,"answer_count":1,"score":0,"last_activity_date":1683631471,"creation_date":1683214942,"question_id":76174987,"body_markdown":"My situation is that I have a Spring Boot application, a PostgreSQL database, and use the hbm2java hibernate Maven plugin to generate the entity classes. The database uses types for which JPA/Hibernate do not have a matching builtin type (example: ltree), so my idea is to use a UserType.\r\n\r\nI have created an LTreeType.java class implementing the UserType interface. How can I get hbm2java to use it for every database column of type ltree?\r\n\r\nEDIT:\r\n\r\nI found out so far that I have to either create a reveng.xml file or subclass `DefaultReverseEngineeringStrategy`. I have no idea how to tell the plugin to use the former (if it even still exists - this whole mess is completely undocumented), or how to actually get my subclass to work with the Maven plugin.\r\n\r\nFor the former, `&lt;revengFile&gt;` does seem to work, although I do end up with the error `Execution entity-generation of goal org.hibernate.tool:hibernate-tools-maven:6.2.1.Final:hbm2java failed: Could not resolve named type`.\r\n\r\nSo if anyone knows how to tell either Maven or this darned plugin to add my normal source folder to the classpath, this might potentially solve the problem.\r\n\r\nAs a final word of advice: stay away as far as possible from hibernate-tools if you have the choice. It&#39;s an undocumented mess.","title":"How can one get Hibernate to use UserType for hbm2java code generation?","body":"<p>My situation is that I have a Spring Boot application, a PostgreSQL database, and use the hbm2java hibernate Maven plugin to generate the entity classes. The database uses types for which JPA/Hibernate do not have a matching builtin type (example: ltree), so my idea is to use a UserType.</p>\n<p>I have created an LTreeType.java class implementing the UserType interface. How can I get hbm2java to use it for every database column of type ltree?</p>\n<p>EDIT:</p>\n<p>I found out so far that I have to either create a reveng.xml file or subclass <code>DefaultReverseEngineeringStrategy</code>. I have no idea how to tell the plugin to use the former (if it even still exists - this whole mess is completely undocumented), or how to actually get my subclass to work with the Maven plugin.</p>\n<p>For the former, <code>&lt;revengFile&gt;</code> does seem to work, although I do end up with the error <code>Execution entity-generation of goal org.hibernate.tool:hibernate-tools-maven:6.2.1.Final:hbm2java failed: Could not resolve named type</code>.</p>\n<p>So if anyone knows how to tell either Maven or this darned plugin to add my normal source folder to the classpath, this might potentially solve the problem.</p>\n<p>As a final word of advice: stay away as far as possible from hibernate-tools if you have the choice. It's an undocumented mess.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":10570114,"reputation":663,"user_id":7787197,"display_name":"theNishant"},"score":0,"creation_date":1683607114,"post_id":76205869,"comment_id":134388401,"body_markdown":"Can you show what you tried?","body":"Can you show what you tried?"}],"owner":{"account_id":28553730,"reputation":1,"user_id":21858232,"display_name":"Priyanka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683631412,"creation_date":1683606890,"question_id":76205869,"body_markdown":"\r\nThe aim was to execute all test cases at the same time but its not working. When executing them separately they are running successfully.\r\n\r\n    errororg.openqa.selenium.NoSuchSessionException: invalid session id\r\n    Build info: version: &#39;4.9.0&#39;, revision: &#39;d7057100a6&#39;\r\n    System info: os.name: &#39;Windows 11&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.3&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Command: [40f27c9d62b0d992228d008cc9e59bc2, switchToFrame {id=null}]\r\n    Capabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 112.0.5615.140, chrome: {chromedriverVersion: 112.0.5615.49 (bd2a7bcb881c..., userDataDir: C:\\Users\\Priyanka\\AppData\\L...}, goog:chromeOptions: {debuggerAddress: localhost:58299}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:58299/devtoo..., se:cdpVersion: 112.0.5615.140, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\r\n    Session ID: 40f27c9d62b0d992228d008cc9e59bc2\r\n    \tat java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) \r\n    \tat org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\r\n    \tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n    \tat org.testng.TestRunner.privateRun(TestRunner.java:794)\r\n    \tat org.testng.TestRunner.run(TestRunner.java:596)\r\n    \tat org.testng.SuiteRunner.runTest(SuiteRunner.java:377)\r\n    \tat org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)\r\n    \tat org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)\r\n    \tat org.testng.SuiteRunner.run(SuiteRunner.java:276)\r\n    \tat org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\r\n    \tat org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\r\n    \tat org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\r\n    \tat org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\r\n    \tat org.testng.TestNG.runSuites(TestNG.java:1063)\r\n    \tat org.testng.TestNG.run(TestNG.java:1031)\r\n    \tat org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\r\n    \tat org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\r\n    \tat org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\r\n\r\n\r\n","title":"Getting &quot;org.openqa.selenium.NoSuchSessionException: invalid session id&quot; error while running multiple test cases","body":"<p>The aim was to execute all test cases at the same time but its not working. When executing them separately they are running successfully.</p>\n<pre><code>errororg.openqa.selenium.NoSuchSessionException: invalid session id\nBuild info: version: '4.9.0', revision: 'd7057100a6'\nSystem info: os.name: 'Windows 11', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.3'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCommand: [40f27c9d62b0d992228d008cc9e59bc2, switchToFrame {id=null}]\nCapabilities {acceptInsecureCerts: false, browserName: chrome, browserVersion: 112.0.5615.140, chrome: {chromedriverVersion: 112.0.5615.49 (bd2a7bcb881c..., userDataDir: C:\\Users\\Priyanka\\AppData\\L...}, goog:chromeOptions: {debuggerAddress: localhost:58299}, networkConnectionEnabled: false, pageLoadStrategy: normal, platformName: WINDOWS, proxy: Proxy(), se:cdp: ws://localhost:58299/devtoo..., se:cdpVersion: 112.0.5615.140, setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify, webauthn:extension:credBlob: true, webauthn:extension:largeBlob: true, webauthn:extension:minPinLength: true, webauthn:extension:prf: true, webauthn:virtualAuthenticators: true}\nSession ID: 40f27c9d62b0d992228d008cc9e59bc2\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) \n    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.testng.TestRunner.privateRun(TestRunner.java:794)\n    at org.testng.TestRunner.run(TestRunner.java:596)\n    at org.testng.SuiteRunner.runTest(SuiteRunner.java:377)\n    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)\n    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)\n    at org.testng.SuiteRunner.run(SuiteRunner.java:276)\n    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)\n    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)\n    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1134)\n    at org.testng.TestNG.runSuites(TestNG.java:1063)\n    at org.testng.TestNG.run(TestNG.java:1031)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1572558858,"post_id":58651588,"comment_id":103607947,"body_markdown":"Does https://intellij-support.jetbrains.com/hc/en-us/community/posts/206171329-How-to-hide-iml-name-in-bold-and-in-square-brackets-next-to-module-folder- gives you information ? is there any kind of module for you ?","body":"Does <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206171329-How-to-hide-iml-name-in-bold-and-in-square-brackets-next-to-module-folder-\" rel=\"nofollow noreferrer\">intellij-support.jetbrains.com/hc/en-us/community/posts/&hellip;</a> gives you information ? is there any kind of module for you ?"},{"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"score":0,"creation_date":1572559011,"post_id":58651588,"comment_id":103607998,"body_markdown":"Does it happen when you cleanly reimport the project or is it a result of manual module rename? Does it affect the root module?","body":"Does it happen when you cleanly reimport the project or is it a result of manual module rename? Does it affect the root module?"}],"answers":[{"comments":[{"owner":{"account_id":5311013,"reputation":1462,"user_id":4237346,"display_name":"itwasntme"},"score":1,"creation_date":1572564369,"post_id":58651654,"comment_id":103609387,"body_markdown":"I understand your case, but if you would take the project from 3rd party, then probably the project name would be the one in `settings.gradle`, not the one used as project root folder, just saying.","body":"I understand your case, but if you would take the project from 3rd party, then probably the project name would be the one in <code>settings.gradle</code>, not the one used as project root folder, just saying."}],"tags":[],"owner":{"account_id":3268065,"reputation":2586,"user_id":2752129,"accept_rate":47,"display_name":"Matt Takao"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1572559068,"creation_date":1572559068,"answer_id":58651654,"question_id":58651588,"body_markdown":"I fixed this by ensuring my `settings.gradle` had the correct name in it. ","title":"Intellij: Project has two names?","body":"<p>I fixed this by ensuring my <code>settings.gradle</code> had the correct name in it. </p>\n"},{"tags":[],"owner":{"account_id":28557160,"reputation":1,"user_id":21861207,"display_name":"Artus 8"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683631344,"creation_date":1683631344,"answer_id":76208773,"question_id":58651588,"body_markdown":"This happens when the local folder, where your project is saved, has a different name than your project in your gradle/maven configurations. Also make sure you check your name in your Project Sturcture. That means the name from your modules and your project","title":"Intellij: Project has two names?","body":"<p>This happens when the local folder, where your project is saved, has a different name than your project in your gradle/maven configurations. Also make sure you check your name in your Project Sturcture. That means the name from your modules and your project</p>\n"}],"owner":{"account_id":3268065,"reputation":2586,"user_id":2752129,"accept_rate":47,"display_name":"Matt Takao"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683631344,"creation_date":1572558650,"question_id":58651588,"body_markdown":"I&#39;ve been moving things around between multiple repositories and refactoring things, now one of my projects seems to have two names? Not sure what this means or how to fix it. \r\n\r\nThe unbolded one is the correct project name, the bolded one in brackets is another repository that I don&#39;t think should be there. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/e2AtT.png","title":"Intellij: Project has two names?","body":"<p>I've been moving things around between multiple repositories and refactoring things, now one of my projects seems to have two names? Not sure what this means or how to fix it. </p>\n\n<p>The unbolded one is the correct project name, the bolded one in brackets is another repository that I don't think should be there. </p>\n\n<p><a href=\"https://i.stack.imgur.com/e2AtT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e2AtT.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","generics"],"owner":{"account_id":10918971,"reputation":2016,"user_id":8025936,"accept_rate":71,"display_name":"schuelermine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683631789,"answer_count":0,"score":0,"last_activity_date":1683630850,"creation_date":1683630850,"question_id":76208711,"body_markdown":"Suppose I have the following class:\r\n```java\r\nclass Box&lt;T&gt; {\r\n    public Box(T value) {\r\n        this.value = value;\r\n    }\r\n    public T value;\r\n}\r\n```\r\n\r\nWhy cant I do this:\r\n```java\r\nObject obj = new Object();\r\nboolean isBox = obj instanceof Box&lt;Object&gt;;\r\n```\r\n```\r\n|  Error:\r\n|  java.lang.Object cannot be safely cast to Box&lt;java.lang.Object&gt;\r\n|  boolean isBox = obj instanceof Box&lt;Object&gt;;\r\n|                  ^-^\r\n```\r\n\r\nBut I _can_ do this:\r\n```java\r\nObject obj = new Object();\r\nboolean isBox = obj instanceof Box&lt;?&gt;;\r\n```","title":"Why can Object not be cast to generic of Object but can be cast to generic with wildcard?","body":"<p>Suppose I have the following class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Box&lt;T&gt; {\n    public Box(T value) {\n        this.value = value;\n    }\n    public T value;\n}\n</code></pre>\n<p>Why cant I do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object obj = new Object();\nboolean isBox = obj instanceof Box&lt;Object&gt;;\n</code></pre>\n<pre><code>|  Error:\n|  java.lang.Object cannot be safely cast to Box&lt;java.lang.Object&gt;\n|  boolean isBox = obj instanceof Box&lt;Object&gt;;\n|                  ^-^\n</code></pre>\n<p>But I <em>can</em> do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object obj = new Object();\nboolean isBox = obj instanceof Box&lt;?&gt;;\n</code></pre>\n"},{"tags":["java","minecraft"],"comments":[{"owner":{"account_id":3040588,"reputation":15226,"user_id":2577734,"accept_rate":91,"display_name":"Joe Taras"},"score":0,"creation_date":1588170871,"post_id":61504208,"comment_id":108797923,"body_markdown":"Please add your data set (values in iStore) and your wished result set","body":"Please add your data set (values in iStore) and your wished result set"},{"owner":{"account_id":8358723,"reputation":11,"user_id":6277954,"display_name":"MrPoofyWaffle"},"score":0,"creation_date":1588170963,"post_id":61504208,"comment_id":108797978,"body_markdown":"rlegstat:\n  - Cured\n  - Fracture\n\nResult if injury is equal to broken:\nrlegstat:\n  - Cured\n  - Broken\nActual results \nrlegstat:\n  - Cured\n  - Fracture\n  - Broken","body":"rlegstat:   - Cured   - Fracture  Result if injury is equal to broken: rlegstat:   - Cured   - Broken Actual results  rlegstat:   - Cured   - Fracture   - Broken"},{"owner":{"account_id":8860436,"reputation":45945,"user_id":7509065,"display_name":"Joseph Sible-Reinstate Monica"},"score":0,"creation_date":1588198139,"post_id":61504208,"comment_id":108811938,"body_markdown":"Does `iStore.getStringList` return a reference to the same list every time, or does it return a new copy of the list each time it&#39;s called?","body":"Does <code>iStore.getStringList</code> return a reference to the same list every time, or does it return a new copy of the list each time it&#39;s called?"}],"answers":[{"tags":[],"owner":{"account_id":25879451,"reputation":9,"user_id":19608810,"display_name":"justADeni"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683629516,"creation_date":1683629516,"answer_id":76208542,"question_id":61504208,"body_markdown":"To avoid unpredictable behaviour and even a potential ConcurrentModificationException, instead of using enhanced for loop, use [Iterator][1], which supports removing element while iterating over them.\r\n\r\nAlternatively, you could use simple for loop and iterate backwards:\r\n\r\n    List&lt;String&gt; list;\r\n    \r\n    for(int i = list.size() - 1; i &gt;= 0; --i) {\r\n            if(list.get(i).contains(&quot;bad&quot;)){\r\n                    list.remove(i);\r\n            }\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html","title":"Java not removing specific item from list","body":"<p>To avoid unpredictable behaviour and even a potential ConcurrentModificationException, instead of using enhanced for loop, use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Iterator.html\" rel=\"nofollow noreferrer\">Iterator</a>, which supports removing element while iterating over them.</p>\n<p>Alternatively, you could use simple for loop and iterate backwards:</p>\n<pre><code>List&lt;String&gt; list;\n\nfor(int i = list.size() - 1; i &gt;= 0; --i) {\n        if(list.get(i).contains(&quot;bad&quot;)){\n                list.remove(i);\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683630303,"creation_date":1683630303,"answer_id":76208643,"question_id":61504208,"body_markdown":"It&#39;s hard to follow your exact logic (since you didn&#39;t give us a full method, for example it&#39;s unclear where `injury` is coming from), but it seems you don&#39;t need to loop at all. Simply using `.contains()`, `.add()` and `.remove()` should suffice:\r\n\r\n```\r\nprivate addInjury(String section, String injury) {\r\n  String storeKey = uuid + &quot;.&quot; + section;\r\n  List&lt;String&gt; sevs = iStore.getStringList(storeKey);\r\n  if (injury.equals(&quot;Broken&quot;)) {\r\n    sevs.remove(&quot;Fracture&quot;); // no need to check if it&#39;s in sev, if it isn&#39;t this will do nothing.\r\n  } else {\r\n    sevs.remove(&quot;Intact&quot;); // depending on the desired logic, this could just go after the if outside of the else block.\r\n  }\r\n  if (!sevs.contains(injury)) {\r\n    sevs.add(injury);\r\n  }\r\n  iStore.set(storeKey, sevs);\r\n  store.saveStore();\r\n}\r\n```","title":"Java not removing specific item from list","body":"<p>It's hard to follow your exact logic (since you didn't give us a full method, for example it's unclear where <code>injury</code> is coming from), but it seems you don't need to loop at all. Simply using <code>.contains()</code>, <code>.add()</code> and <code>.remove()</code> should suffice:</p>\n<pre><code>private addInjury(String section, String injury) {\n  String storeKey = uuid + &quot;.&quot; + section;\n  List&lt;String&gt; sevs = iStore.getStringList(storeKey);\n  if (injury.equals(&quot;Broken&quot;)) {\n    sevs.remove(&quot;Fracture&quot;); // no need to check if it's in sev, if it isn't this will do nothing.\n  } else {\n    sevs.remove(&quot;Intact&quot;); // depending on the desired logic, this could just go after the if outside of the else block.\n  }\n  if (!sevs.contains(injury)) {\n    sevs.add(injury);\n  }\n  iStore.set(storeKey, sevs);\n  store.saveStore();\n}\n</code></pre>\n"}],"owner":{"account_id":8358723,"reputation":11,"user_id":6277954,"display_name":"MrPoofyWaffle"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1683630303,"creation_date":1588170367,"question_id":61504208,"body_markdown":"I am currently developing a plugin in minecraft spigot. I don&#39;t believe this is a spigot problem though, I believe this is a java problem. I have a method called setInjury() in my class that is supposed to make a copy of a list, remove an item from the copy and replace the list with the new one. The weird thing is, this works. For one item in particular though, it just refuses to remove it. It will remove other ones, but not this one. I checked casing and everything. Even the boolean from .remove says it has been removed, yet it just doesn&#39;t.\r\n\r\n(iStore is a file configuration file while store is my class it&#39;s in)\r\n\r\nIt used to be in an if else statement, but the boolean inside the remove works just the same. The weirdest thing about all of this is it was literally working yesterday.\r\n\r\n    List&lt;String&gt; sevs = iStore.getStringList(uuid + &quot;.&quot; + section);\r\n\t\t\r\n    for(String s : iStore.getStringList(uuid + &quot;.&quot; + section)) {\r\n\t\tboolean isFracture = s.equals(&quot;Fracture&quot;) &amp;&amp; injury.equals(&quot;Broken&quot;) ;\r\n\t\t\t\r\n\t\tif(s.equals(injury)) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t\t\r\n\t\tsevs.add(&quot;Broken&quot;);\r\n\t\tsevs.remove(isFracture ? &quot;Fracture&quot; : &quot;Intact&quot;);\r\n\r\n\t\tiStore.set(uuid + &quot;.&quot; + section, sevs);\r\n\t\tstore.saveStore();\r\n\t\t\t\r\n\t}\r\n\r\n\r\nMy other more messy code that does the same thing, to prove that it should remove it:\r\n\r\n        List&lt;String&gt; sevs = iStore.getStringList(uuid + &quot;.&quot; + section);\r\n        for(String s : iStore.getStringList(uuid + &quot;.&quot; + section)) {\r\n            if(sevs.contains(injury)) {\r\n                return;\r\n            }else if(injury.equals(&quot;Broken&quot;) &amp;&amp; s.equals(&quot;Fracture&quot;)){\r\n                sevs.add(&quot;Broken&quot;);\r\n                sevs.remove(&quot;Fracture&quot;);\r\n                \r\n              Bukkit.getLogger().info(Boolean.toString(sevs.remove(&quot;Fracture&quot;))); //returns true??\r\n                iStore.set(uuid + &quot;.&quot; + section, sevs);\r\n                store.saveStore();\r\n            }else{\r\n                sevs.add(injury);\r\n                sevs.remove(&quot;Intact&quot;);\r\n                iStore.set(uuid + &quot;.&quot; + section, sevs);\r\n                store.saveStore();\r\n            }\r\n\r\nList before running code:\r\n\r\n \r\n    rlegstat: \r\n     - Cured \r\n     - Fracture \r\n    //Desired result if injury is equal to broken: \r\n    rlegstat: \r\n     - Cured \r\n     - Broken \r\n    //Actual results \r\n    rlegstat: \r\n     - Cured \r\n     - Fracture \r\n     - Broken","title":"Java not removing specific item from list","body":"<p>I am currently developing a plugin in minecraft spigot. I don't believe this is a spigot problem though, I believe this is a java problem. I have a method called setInjury() in my class that is supposed to make a copy of a list, remove an item from the copy and replace the list with the new one. The weird thing is, this works. For one item in particular though, it just refuses to remove it. It will remove other ones, but not this one. I checked casing and everything. Even the boolean from .remove says it has been removed, yet it just doesn't.</p>\n\n<p>(iStore is a file configuration file while store is my class it's in)</p>\n\n<p>It used to be in an if else statement, but the boolean inside the remove works just the same. The weirdest thing about all of this is it was literally working yesterday.</p>\n\n<pre><code>List&lt;String&gt; sevs = iStore.getStringList(uuid + \".\" + section);\n\nfor(String s : iStore.getStringList(uuid + \".\" + section)) {\n    boolean isFracture = s.equals(\"Fracture\") &amp;&amp; injury.equals(\"Broken\") ;\n\n    if(s.equals(injury)) {\n        continue;\n    }\n\n    sevs.add(\"Broken\");\n    sevs.remove(isFracture ? \"Fracture\" : \"Intact\");\n\n    iStore.set(uuid + \".\" + section, sevs);\n    store.saveStore();\n\n}\n</code></pre>\n\n<p>My other more messy code that does the same thing, to prove that it should remove it:</p>\n\n<pre><code>    List&lt;String&gt; sevs = iStore.getStringList(uuid + \".\" + section);\n    for(String s : iStore.getStringList(uuid + \".\" + section)) {\n        if(sevs.contains(injury)) {\n            return;\n        }else if(injury.equals(\"Broken\") &amp;&amp; s.equals(\"Fracture\")){\n            sevs.add(\"Broken\");\n            sevs.remove(\"Fracture\");\n\n          Bukkit.getLogger().info(Boolean.toString(sevs.remove(\"Fracture\"))); //returns true??\n            iStore.set(uuid + \".\" + section, sevs);\n            store.saveStore();\n        }else{\n            sevs.add(injury);\n            sevs.remove(\"Intact\");\n            iStore.set(uuid + \".\" + section, sevs);\n            store.saveStore();\n        }\n</code></pre>\n\n<p>List before running code:</p>\n\n<pre><code>rlegstat: \n - Cured \n - Fracture \n//Desired result if injury is equal to broken: \nrlegstat: \n - Cured \n - Broken \n//Actual results \nrlegstat: \n - Cured \n - Fracture \n - Broken\n</code></pre>\n"},{"tags":["java","android","kotlin","android-jetpack-datastore"],"answers":[{"tags":[],"owner":{"account_id":19966209,"reputation":21,"user_id":14632745,"display_name":"Khaoula MECHERGUI"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1650908556,"creation_date":1650894421,"answer_id":72000615,"question_id":71634780,"body_markdown":"I had the same problem and, I think that `context.createDatastore` isn&#39;t yet in this version\r\nI tried with this dependency version\r\n\r\n    &quot;androidx.datastore:datastore-preferences:1.0.0-alpha01&quot;\r\n\r\n and it worked for me but be careful this version is not yet stable.","title":"context.createDatabase is not finding in preferences DataStore Android","body":"<p>I had the same problem and, I think that <code>context.createDatastore</code> isn't yet in this version\nI tried with this dependency version</p>\n<pre><code>&quot;androidx.datastore:datastore-preferences:1.0.0-alpha01&quot;\n</code></pre>\n<p>and it worked for me but be careful this version is not yet stable.</p>\n"},{"tags":[],"owner":{"account_id":7017583,"reputation":51,"user_id":5378327,"display_name":"Mike"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683630177,"creation_date":1683629860,"answer_id":76208591,"question_id":71634780,"body_markdown":"I used this version and solved the problem:\r\n\r\n    androidx.datastore:datastore-preferences:1.0.0\r\n\r\nI was using this version before:\r\n\r\n    androidx.datastore:datastore-preferences-core:1.0.0\r\n\r\n    ","title":"context.createDatabase is not finding in preferences DataStore Android","body":"<p>I used this version and solved the problem:</p>\n<pre><code>androidx.datastore:datastore-preferences:1.0.0\n</code></pre>\n<p>I was using this version before:</p>\n<pre><code>androidx.datastore:datastore-preferences-core:1.0.0\n</code></pre>\n"}],"owner":{"account_id":16147660,"reputation":424,"user_id":11656856,"display_name":"Mostafa Imani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":813,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683630177,"creation_date":1648369736,"question_id":71634780,"body_markdown":"I&#39;ve just implemented Preferences by Android DataStore \r\nbut I can&#39;t find  &quot;context.createDataStore&quot;\r\n I added this dependency below\r\n \r\n\r\n&gt;  implementation &quot;androidx.datastore:datastore-preferences:1.0.0&quot;\r\n\r\nand also I did clean and Rebuild Project\r\nbut I can&#39;t find createDataStore function","title":"context.createDatabase is not finding in preferences DataStore Android","body":"<p>I've just implemented Preferences by Android DataStore\nbut I can't find  &quot;context.createDataStore&quot;\nI added this dependency below</p>\n<blockquote>\n<p>implementation &quot;androidx.datastore:datastore-preferences:1.0.0&quot;</p>\n</blockquote>\n<p>and also I did clean and Rebuild Project\nbut I can't find createDataStore function</p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1683628226,"post_id":76208296,"comment_id":134392350,"body_markdown":"The Spring Cloud version in use is not compatible with Spring Boot 3.","body":"The Spring Cloud version in use is not compatible with Spring Boot 3."}],"owner":{"account_id":9210277,"reputation":201,"user_id":6843798,"display_name":"S.R.D"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":897,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683630090,"creation_date":1683627827,"question_id":76208296,"body_markdown":"I am not able to run my project. While running I am getting below error (see the error log). Could anyone please help what will be the issue here? It seems like a version mismatch issue.\r\n\r\nError log\r\n```none\r\n10:09:40.437 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\r\n    java.lang.NoClassDefFoundError: org/springframework/boot/Bootstrapper\r\n    \tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n    \tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012)\r\n    \tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862)\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \tat org.springframework.cloud.bootstrap.encrypt.DecryptEnvironmentPostProcessor.getTextEncryptor(DecryptEnvironmentPostProcessor.java:82)\r\n    \tat org.springframework.cloud.bootstrap.encrypt.DecryptEnvironmentPostProcessor.postProcessEnvironment(DecryptEnvironmentPostProcessor.java:68)\r\n    \tat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)\r\n    \tat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n    \tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n    \tat org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\r\n    \tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\r\n    \tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\r\n    \tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n    \tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\r\n    \tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\r\n    \tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\r\n    \tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:352)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)\r\n    \tat com.hp.it.os.warrantyorch.Application.main(Application.java:19)\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.Bootstrapper\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \t... 29 common frames omitted\r\n```\r\n\r\nI have added log file here and as well as my pom.xml file.\r\n\r\npom.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.hp.it.psoit&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;warrantyorch&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\t&lt;name&gt;warrantyorch&lt;/name&gt;\r\n\t&lt;version&gt;v1&lt;/version&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\r\n\t\t&lt;jaxb2.version&gt;1.11.1&lt;/jaxb2.version&gt;\r\n\t\t&lt;threetenbp.version&gt;2.10.0&lt;/threetenbp.version&gt;\r\n\t\t&lt;openfeign.version&gt;3.0.1&lt;/openfeign.version&gt;\r\n\t\t&lt;soap.version&gt;11.8&lt;/soap.version&gt;\r\n\t\t&lt;hc5.version&gt;10.12&lt;/hc5.version&gt;\r\n\t\t&lt;feign.okhttp.version&gt;12.3&lt;/feign.okhttp.version&gt;\r\n\t\t&lt;resilience4j.version&gt;2.0.2&lt;/resilience4j.version&gt;\r\n\t\t&lt;spi.version&gt;2.17.224&lt;/spi.version&gt;\r\n\t\t&lt;aws.crt.version&gt;0.21.14&lt;/aws.crt.version&gt;\r\n\t\t&lt;crt.client.version&gt;2.20.25&lt;/crt.client.version&gt;\r\n\t\t&lt;sdk-core.version&gt;2.20.25&lt;/sdk-core.version&gt;\r\n\t\t&lt;jwt.version&gt;4.2.1&lt;/jwt.version&gt;\r\n\t\t&lt;rsa.version&gt;0.21.2&lt;/rsa.version&gt;\r\n\t\t&lt;commonlib.version&gt;0.4.85&lt;/commonlib.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.hp.os&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commonlib&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${commonlib.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.netty&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;netty-buffer&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.0.Alpha2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb2-basics&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${jaxb2.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.joschi.jackson&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-datatype-threetenbp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${threetenbp.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.github.openfeign/feign-soap --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${openfeign.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;feign-soap&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${soap.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.github.openfeign/feign-hc5 --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;feign-hc5&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${hc5.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-dependencies --&gt;\r\n\r\n\t\t&lt;!-- https://mvnrepository.com/artifact/io.github.openfeign/feign-okhttp --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;feign-okhttp&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${feign.okhttp.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;!-- AOP LOG --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;resilience4j-spring-boot2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${resilience4j.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;http-client-spi&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${spi.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;software.amazon.awssdk.crt&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aws-crt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${aws.crt.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;aws-crt-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${crt.client.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;sdk-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${sdk-core.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${jwt.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.auth0&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jwks-rsa&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${rsa.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;caffeine&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n","title":"java.lang.NoClassDefFoundError: org/springframework/boot/Bootstrapper","body":"<p>I am not able to run my project. While running I am getting below error (see the error log). Could anyone please help what will be the issue here? It seems like a version mismatch issue.</p>\n<p>Error log</p>\n<pre class=\"lang-none prettyprint-override\"><code>10:09:40.437 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\n    java.lang.NoClassDefFoundError: org/springframework/boot/Bootstrapper\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1012)\n        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        at org.springframework.cloud.bootstrap.encrypt.DecryptEnvironmentPostProcessor.getTextEncryptor(DecryptEnvironmentPostProcessor.java:82)\n        at org.springframework.cloud.bootstrap.encrypt.DecryptEnvironmentPostProcessor.postProcessEnvironment(DecryptEnvironmentPostProcessor.java:68)\n        at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)\n        at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\n        at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\n        at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\n        at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)\n        at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)\n        at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n        at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\n        at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)\n        at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)\n        at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:352)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)\n        at com.hp.it.os.warrantyorch.Application.main(Application.java:19)\n    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.Bootstrapper\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        ... 29 common frames omitted\n</code></pre>\n<p>I have added log file here and as well as my pom.xml file.</p>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.hp.it.psoit&lt;/groupId&gt;\n    &lt;artifactId&gt;warrantyorch&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;name&gt;warrantyorch&lt;/name&gt;\n    &lt;version&gt;v1&lt;/version&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;\n        &lt;jaxb2.version&gt;1.11.1&lt;/jaxb2.version&gt;\n        &lt;threetenbp.version&gt;2.10.0&lt;/threetenbp.version&gt;\n        &lt;openfeign.version&gt;3.0.1&lt;/openfeign.version&gt;\n        &lt;soap.version&gt;11.8&lt;/soap.version&gt;\n        &lt;hc5.version&gt;10.12&lt;/hc5.version&gt;\n        &lt;feign.okhttp.version&gt;12.3&lt;/feign.okhttp.version&gt;\n        &lt;resilience4j.version&gt;2.0.2&lt;/resilience4j.version&gt;\n        &lt;spi.version&gt;2.17.224&lt;/spi.version&gt;\n        &lt;aws.crt.version&gt;0.21.14&lt;/aws.crt.version&gt;\n        &lt;crt.client.version&gt;2.20.25&lt;/crt.client.version&gt;\n        &lt;sdk-core.version&gt;2.20.25&lt;/sdk-core.version&gt;\n        &lt;jwt.version&gt;4.2.1&lt;/jwt.version&gt;\n        &lt;rsa.version&gt;0.21.2&lt;/rsa.version&gt;\n        &lt;commonlib.version&gt;0.4.85&lt;/commonlib.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.hp.os&lt;/groupId&gt;\n            &lt;artifactId&gt;commonlib&lt;/artifactId&gt;\n            &lt;version&gt;${commonlib.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.netty&lt;/groupId&gt;\n            &lt;artifactId&gt;netty-buffer&lt;/artifactId&gt;\n            &lt;version&gt;5.0.0.Alpha2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web-services&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jvnet.jaxb2_commons&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb2-basics&lt;/artifactId&gt;\n            &lt;version&gt;${jaxb2.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.joschi.jackson&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-threetenbp&lt;/artifactId&gt;\n            &lt;version&gt;${threetenbp.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/io.github.openfeign/feign-soap --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n            &lt;version&gt;${openfeign.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\n            &lt;artifactId&gt;feign-soap&lt;/artifactId&gt;\n            &lt;version&gt;${soap.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.github.openfeign/feign-hc5 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\n            &lt;artifactId&gt;feign-hc5&lt;/artifactId&gt;\n            &lt;version&gt;${hc5.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-dependencies --&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/io.github.openfeign/feign-okhttp --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;\n            &lt;artifactId&gt;feign-okhttp&lt;/artifactId&gt;\n            &lt;version&gt;${feign.okhttp.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;!-- AOP LOG --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\n            &lt;artifactId&gt;resilience4j-spring-boot2&lt;/artifactId&gt;\n            &lt;version&gt;${resilience4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;http-client-spi&lt;/artifactId&gt;\n            &lt;version&gt;${spi.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk.crt&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-crt&lt;/artifactId&gt;\n            &lt;version&gt;${aws.crt.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-crt-client&lt;/artifactId&gt;\n            &lt;version&gt;${crt.client.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;sdk-core&lt;/artifactId&gt;\n            &lt;version&gt;${sdk-core.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n            &lt;version&gt;${jwt.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n            &lt;artifactId&gt;jwks-rsa&lt;/artifactId&gt;\n            &lt;version&gt;${rsa.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\n            &lt;artifactId&gt;caffeine&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android","android-spinner"],"answers":[{"tags":[],"owner":{"display_name":"user21742102"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683629875,"creation_date":1683629875,"answer_id":76208596,"question_id":76207133,"body_markdown":"You have to `setError(null)`, when an item is selected:\r\n```\r\ncaste.setOnItemClickListener((adapterView, view, i, l) -&gt; caste.setError(null));\r\n```","title":"Material Autocompletetextview shows error even when an item is selected","body":"<p>You have to <code>setError(null)</code>, when an item is selected:</p>\n<pre><code>caste.setOnItemClickListener((adapterView, view, i, l) -&gt; caste.setError(null));\n</code></pre>\n"}],"owner":{"display_name":"user21742102"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683629875,"creation_date":1683619617,"question_id":76207133,"body_markdown":"My code:\r\n\r\n*xml:*\r\n```\r\n&lt;com.google.android.material.textfield.TextInputLayout                         \r\n    style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu&quot;\r\n    android:layout_marginTop=&quot;5dp&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:id=&quot;@+id/caste_textinputlayout&quot;\r\n    android:hint=&quot;caste&quot;\r\n    app:errorTextAppearance=&quot;@style/error_appearance&quot;\r\n    app:hintTextAppearance=&quot;@style/error_appearance&quot;&gt;\r\n                                \r\n    &lt;com.google.android.material.textfield.MaterialAutoCompleteTextView\r\n        android:id=&quot;@+id/caste_dropdown&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:fontFamily=&quot;sans-serif-smallcaps&quot;\r\n        android:focusable=&quot;false&quot;/&gt;\r\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n&lt;/com.google.android.material.textfield.TextInputLayout&gt;\r\n```\r\n\r\n*java:*\r\n```\r\nMaterialAutoCompleteTextView caste = findViewById(R.id.caste_dropdown);\r\nArrayList&lt;String&gt; arr = new ArrayList&lt;&gt;();\r\narr.add(&quot;general&quot;);\r\narr.add(&quot;sc&quot;);\r\narr.add(&quot;st&quot;);\r\narr.add(&quot;obc&quot;);\r\narrayadapter = new ArrayAdapter&lt;&gt;(this,R.layout.spinner_layout,arr);\r\ncaste.setAdapter(arrayadapter);\r\nsubmit.setOnClickListener(view -&gt; {\r\n    if (caste.getText().toString().isEmpty()) {\r\n        caste.requestFocus();\r\n        caste.setError(&quot;Please don&#39;t leave the field empty&quot;);\r\n    }\r\n});\r\n```\r\n\r\n\r\n----------\r\nWhen no item is selected in the dropdown, then the error shows, which it should. Now if I select an item, it still shows the error. Why?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Z1M7k.jpg","title":"Material Autocompletetextview shows error even when an item is selected","body":"<p>My code:</p>\n<p><em>xml:</em></p>\n<pre><code>&lt;com.google.android.material.textfield.TextInputLayout                         \n    style=&quot;@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox.ExposedDropdownMenu&quot;\n    android:layout_marginTop=&quot;5dp&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/caste_textinputlayout&quot;\n    android:hint=&quot;caste&quot;\n    app:errorTextAppearance=&quot;@style/error_appearance&quot;\n    app:hintTextAppearance=&quot;@style/error_appearance&quot;&gt;\n                                \n    &lt;com.google.android.material.textfield.MaterialAutoCompleteTextView\n        android:id=&quot;@+id/caste_dropdown&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:fontFamily=&quot;sans-serif-smallcaps&quot;\n        android:focusable=&quot;false&quot;/&gt;\n    &lt;/com.google.android.material.textfield.TextInputLayout&gt;\n&lt;/com.google.android.material.textfield.TextInputLayout&gt;\n</code></pre>\n<p><em>java:</em></p>\n<pre><code>MaterialAutoCompleteTextView caste = findViewById(R.id.caste_dropdown);\nArrayList&lt;String&gt; arr = new ArrayList&lt;&gt;();\narr.add(&quot;general&quot;);\narr.add(&quot;sc&quot;);\narr.add(&quot;st&quot;);\narr.add(&quot;obc&quot;);\narrayadapter = new ArrayAdapter&lt;&gt;(this,R.layout.spinner_layout,arr);\ncaste.setAdapter(arrayadapter);\nsubmit.setOnClickListener(view -&gt; {\n    if (caste.getText().toString().isEmpty()) {\n        caste.requestFocus();\n        caste.setError(&quot;Please don't leave the field empty&quot;);\n    }\n});\n</code></pre>\n<hr />\n<p>When no item is selected in the dropdown, then the error shows, which it should. Now if I select an item, it still shows the error. Why?</p>\n<p><a href=\"https://i.stack.imgur.com/Z1M7k.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z1M7k.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","mysql","kubernetes","ssl","amazon-rds"],"owner":{"account_id":978323,"reputation":5182,"user_id":998692,"accept_rate":97,"display_name":"user998692"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683629296,"creation_date":1683629296,"question_id":76208517,"body_markdown":"I have an environment where SSL is enabled for the db connection with Amazon RDS MySQL, and I&#39;m seeing the following exception when the application starts:\r\n```Caused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors\\n\\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)```\r\n\r\nI have downloaded the pem file from the Amazon website, and used the following scripts to first create the truststore, then to upload the secret to the environments.\r\n\r\n```#!/bin/bash\r\n\r\nmydir= &quot;/myproject/scripts/python/secrets/resources&quot;\r\ntruststore=truststore.jks\r\nstorepassword=password\r\n\r\nsplit -p &quot;-----BEGIN CERTIFICATE-----&quot; /myproject/scripts/python/secrets/resources/dev-certs/eucentral/eu-central-1-bundle.pem rds-ca-\r\n\r\nfor CERT in rds-ca-*; do\r\n  alias=$(openssl x509 -noout -text -in $CERT | perl -ne &#39;next unless /Subject:/; s/.*(CN=|CN = )//; print&#39;)\r\n  echo &quot;Importing $alias&quot;\r\n  keytool -import -file ${CERT} -alias &quot;${alias}&quot; -storepass ${storepassword} -keystore ${truststore} -noprompt\r\n  rm $CERT\r\ndone\r\n\r\necho &quot;Trust store content is: &quot;\r\n\r\nkeytool -list -v -keystore &quot;$truststore&quot; -storepass ${storepassword} | grep Alias | cut -d &quot; &quot; -f3- | while read alias \r\ndo\r\n   expiry=`keytool -list -v -keystore &quot;$truststore&quot; -storepass ${storepassword} -alias &quot;${alias}&quot; | grep Valid | perl -ne &#39;if(/until: (.*?)\\n/) { print &quot;$1\\n&quot;; }&#39;`\r\n   echo &quot; Certificate ${alias} expires in &#39;$expiry&#39;&quot; \r\ndone\r\n```\r\n\r\n```\r\ndef create_certificate_secret(context, namespace, secret_name):\r\n    certs = []\r\n    path = &#39;resources/&#39;\r\n\r\n    if &#39;dev&#39; in context:\r\n        path = path + &#39;dev-certs/&#39;\r\n\r\n    eu_central_certs = [&#39;truststore.jks&#39;, &#39;eu-central-1-bundle.pem&#39;]\r\n\r\n    if &#39;eucentral&#39; in context:\r\n        path = path + &#39;eucentral/&#39;\r\n        certs = eu_central_certs\r\n\r\n    statement = &quot;kubectl --context &quot; + context + &quot; -n &quot; + namespace + &quot; create secret generic &quot; + secret_name\r\n\r\n    for cert in certs:\r\n        statement = statement + &quot; --from-file=&quot; + cert + &#39;=&#39; + path + cert\r\n\r\n    os.system(statement)\r\n```\r\n\r\nWhen I run the script, I can see that the secret gets created, and it has inside the pem file and the truststore, and that all the certificates from the pem were included in the truststore. The mountPath looks correct too, so I am wondering why the above configuration doesn&#39;t work.\r\n","title":"SSL issue for database connection on Kubernetes","body":"<p>I have an environment where SSL is enabled for the db connection with Amazon RDS MySQL, and I'm seeing the following exception when the application starts:\n<code>Caused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors\\n\\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)</code></p>\n<p>I have downloaded the pem file from the Amazon website, and used the following scripts to first create the truststore, then to upload the secret to the environments.</p>\n<pre><code>\nmydir= &quot;/myproject/scripts/python/secrets/resources&quot;\ntruststore=truststore.jks\nstorepassword=password\n\nsplit -p &quot;-----BEGIN CERTIFICATE-----&quot; /myproject/scripts/python/secrets/resources/dev-certs/eucentral/eu-central-1-bundle.pem rds-ca-\n\nfor CERT in rds-ca-*; do\n  alias=$(openssl x509 -noout -text -in $CERT | perl -ne 'next unless /Subject:/; s/.*(CN=|CN = )//; print')\n  echo &quot;Importing $alias&quot;\n  keytool -import -file ${CERT} -alias &quot;${alias}&quot; -storepass ${storepassword} -keystore ${truststore} -noprompt\n  rm $CERT\ndone\n\necho &quot;Trust store content is: &quot;\n\nkeytool -list -v -keystore &quot;$truststore&quot; -storepass ${storepassword} | grep Alias | cut -d &quot; &quot; -f3- | while read alias \ndo\n   expiry=`keytool -list -v -keystore &quot;$truststore&quot; -storepass ${storepassword} -alias &quot;${alias}&quot; | grep Valid | perl -ne 'if(/until: (.*?)\\n/) { print &quot;$1\\n&quot;; }'`\n   echo &quot; Certificate ${alias} expires in '$expiry'&quot; \ndone\n</code></pre>\n<pre><code>def create_certificate_secret(context, namespace, secret_name):\n    certs = []\n    path = 'resources/'\n\n    if 'dev' in context:\n        path = path + 'dev-certs/'\n\n    eu_central_certs = ['truststore.jks', 'eu-central-1-bundle.pem']\n\n    if 'eucentral' in context:\n        path = path + 'eucentral/'\n        certs = eu_central_certs\n\n    statement = &quot;kubectl --context &quot; + context + &quot; -n &quot; + namespace + &quot; create secret generic &quot; + secret_name\n\n    for cert in certs:\n        statement = statement + &quot; --from-file=&quot; + cert + '=' + path + cert\n\n    os.system(statement)\n</code></pre>\n<p>When I run the script, I can see that the secret gets created, and it has inside the pem file and the truststore, and that all the certificates from the pem were included in the truststore. The mountPath looks correct too, so I am wondering why the above configuration doesn't work.</p>\n"},{"tags":["java","junit","junit5"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":2,"creation_date":1683626912,"post_id":76208064,"comment_id":134391998,"body_markdown":"Place the test in the same package as the enum.","body":"Place the test in the same package as the enum."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":3,"creation_date":1683626964,"post_id":76208064,"comment_id":134392010,"body_markdown":"Put your unit test in the package com","body":"Put your unit test in the package com"},{"owner":{"account_id":15168430,"reputation":173,"user_id":10945276,"display_name":"roediGERhard"},"score":0,"creation_date":1683627313,"post_id":76208064,"comment_id":134392122,"body_markdown":"enums are package-private per default. Therefore the suggestion from @JustanotherJavaprogrammer should work.","body":"enums are package-private per default. Therefore the suggestion from @JustanotherJavaprogrammer should work."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1683627593,"post_id":76208064,"comment_id":134392197,"body_markdown":"What is &#39; public intron&#39;? And if you want access from outside, why is it private?","body":"What is &#39; public intron&#39;? And if you want access from outside, why is it private?"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1683628369,"post_id":76208064,"comment_id":134392388,"body_markdown":"how is `IssueMap.getIssueTypes(....)` used by your code? The enum not public, in other words, it&#39;s an implementation detail encapsulated in a bigger usecase. For example, if `ServiceX` uses these issues types when implementing `methodY`, maybe it&#39;s enough to only test `ServiceX.methodY()`.","body":"how is <code>IssueMap.getIssueTypes(....)</code> used by your code? The enum not public, in other words, it&#39;s an implementation detail encapsulated in a bigger usecase. For example, if <code>ServiceX</code> uses these issues types when implementing <code>methodY</code>, maybe it&#39;s enough to only test <code>ServiceX.methodY()</code>."},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1683628784,"post_id":76208064,"comment_id":134392473,"body_markdown":"@EmanuelTrandafir it&#39;s called into the same package","body":"@EmanuelTrandafir it&#39;s called into the same package"},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":0,"creation_date":1683632195,"post_id":76208064,"comment_id":134393236,"body_markdown":"@PeterPenzov but it has to be called by some public method eventually, even if this method is part of a different class","body":"@PeterPenzov but it has to be called by some public method eventually, even if this method is part of a different class"}],"answers":[{"tags":[],"owner":{"account_id":1038724,"reputation":196,"user_id":1045253,"display_name":"Lance Reid"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683627807,"creation_date":1683627468,"answer_id":76208253,"question_id":76208064,"body_markdown":"Your IssueMap enum is not private, but rather [package-private][1]. If your test class is in the same package name as your IssueMap enum then your test class should be able to access the IssueMap enum without changing the IssueMap enum\r\n\r\n```\r\npackage com.myenum;\r\n\r\nenum IssueMap {\r\n\r\n  ISSUE_TYPE,\r\n\r\n  public static .... getIssueTypes(String IssueName) {\r\n    \r\n    return ...;\r\n  }\r\n\r\n} \r\n```\r\n\r\n```\r\npackage com.myenum;\r\n\r\nclass IssueMapTest {\r\n  @Test\r\n  public void genericTest() {\r\n    ....... = IssueMap.getIssueTypes(....);\r\n    assertNotNull(...);\r\n  }\r\n}\r\n```\r\n\r\nNotice the package name in IssueMap and IssueMapTest are the same. Even though my IssueMap path is *src/main/java/com/myenum/IssueMap.java* and IssueMapTest path is *src/test/java/com/myenum/IssueMapTest.java*\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html","title":"access private enum in Java","body":"<p>Your IssueMap enum is not private, but rather <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow noreferrer\">package-private</a>. If your test class is in the same package name as your IssueMap enum then your test class should be able to access the IssueMap enum without changing the IssueMap enum</p>\n<pre><code>package com.myenum;\n\nenum IssueMap {\n\n  ISSUE_TYPE,\n\n  public static .... getIssueTypes(String IssueName) {\n    \n    return ...;\n  }\n\n} \n</code></pre>\n<pre><code>package com.myenum;\n\nclass IssueMapTest {\n  @Test\n  public void genericTest() {\n    ....... = IssueMap.getIssueTypes(....);\n    assertNotNull(...);\n  }\n}\n</code></pre>\n<p>Notice the package name in IssueMap and IssueMapTest are the same. Even though my IssueMap path is <em>src/main/java/com/myenum/IssueMap.java</em> and IssueMapTest path is <em>src/test/java/com/myenum/IssueMapTest.java</em></p>\n"}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76208253,"answer_count":1,"score":-1,"last_activity_date":1683628233,"creation_date":1683626248,"question_id":76208064,"body_markdown":"I have the following Java Enum:\r\n\r\n    enum IssueMap {\r\n    \r\n      ISSUE_TYPE,\r\n    \r\n      public static .... getIssueTypes(String IssueName) {\r\n        \r\n        return ...;\r\n      }\r\n    \r\n    } \r\n\r\n*Notice that I don&#39;t have public keyword in front of a enum!*\r\n\r\n\r\nI want to call this code into JUnit test like this:\r\n\r\n      @Test\r\n      public void genericTest() {\r\n        ....... = IssueMap.getIssueTypes(....);\r\n        assertNotNull(...);\r\n      }\r\n\r\nI get error `&#39;com.IssueMap&#39; is not public in &#39;com....&#39;. Cannot be accessed from outside package`\r\n\r\nI can&#39;t change the original enum code. Is there some solution with reflection for example to access the enum code?\r\n\r\n","title":"access private enum in Java","body":"<p>I have the following Java Enum:</p>\n<pre><code>enum IssueMap {\n\n  ISSUE_TYPE,\n\n  public static .... getIssueTypes(String IssueName) {\n    \n    return ...;\n  }\n\n} \n</code></pre>\n<p><em>Notice that I don't have public keyword in front of a enum!</em></p>\n<p>I want to call this code into JUnit test like this:</p>\n<pre><code>  @Test\n  public void genericTest() {\n    ....... = IssueMap.getIssueTypes(....);\n    assertNotNull(...);\n  }\n</code></pre>\n<p>I get error <code>'com.IssueMap' is not public in 'com....'. Cannot be accessed from outside package</code></p>\n<p>I can't change the original enum code. Is there some solution with reflection for example to access the enum code?</p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1683627019,"post_id":76208176,"comment_id":134392025,"body_markdown":"Does TestBaseClass compile?","body":"Does TestBaseClass compile?"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1683627103,"post_id":76208176,"comment_id":134392049,"body_markdown":"`TestBaseClass` is, presumably, in the default package. You can&#39;t import things from the default package. Move it into an explicit package, and import it.","body":"<code>TestBaseClass</code> is, presumably, in the default package. You can&#39;t import things from the default package. Move it into an explicit package, and import it."},{"owner":{"account_id":12706527,"reputation":999,"user_id":9231614,"display_name":"kris82pl"},"score":0,"creation_date":1683628056,"post_id":76208176,"comment_id":134392299,"body_markdown":"@AndyTurner that was the problem. Thanks for solution.","body":"@AndyTurner that was the problem. Thanks for solution."}],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683628129,"creation_date":1683628129,"answer_id":76208348,"question_id":76208176,"body_markdown":"1. Move TestBaseClass to some package\r\n2. If CucumberTestBaseClass and TestBaseClass are in different packages make sure to import TestBaseClass in your CucumberTestBaseClass ","title":"Can&#39;t resolve symbol while trying to extend class from different package","body":"<ol>\n<li>Move TestBaseClass to some package</li>\n<li>If CucumberTestBaseClass and TestBaseClass are in different packages make sure to import TestBaseClass in your CucumberTestBaseClass</li>\n</ol>\n"}],"owner":{"account_id":12706527,"reputation":999,"user_id":9231614,"display_name":"kris82pl"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1683628129,"creation_date":1683626912,"question_id":76208176,"body_markdown":"I have following structure:\r\n\r\nsrc\\test\\java\\TestBaseClass.java\r\n\r\nsrc\\test\\java\\cucumber\\CucumberTestBaseClass.java\r\n\r\nWhen I want to extend TestBaseClass\r\n\r\n    public class CucumberTestBaseClass extends TestBaseClass {\r\n    }\r\n\r\nI receive an error &quot;Can&#39;t resolve symbol: TestBaseClass&quot;\r\nI use IntelliJ Ultimate 2022.2.3 but I have past projects when such extension is compiling so I don&#39;t have idea what is wrong here.\r\nI have no idea what is going on becuase I have","title":"Can&#39;t resolve symbol while trying to extend class from different package","body":"<p>I have following structure:</p>\n<p>src\\test\\java\\TestBaseClass.java</p>\n<p>src\\test\\java\\cucumber\\CucumberTestBaseClass.java</p>\n<p>When I want to extend TestBaseClass</p>\n<pre><code>public class CucumberTestBaseClass extends TestBaseClass {\n}\n</code></pre>\n<p>I receive an error &quot;Can't resolve symbol: TestBaseClass&quot;\nI use IntelliJ Ultimate 2022.2.3 but I have past projects when such extension is compiling so I don't have idea what is wrong here.\nI have no idea what is going on becuase I have</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":769702,"reputation":5530,"user_id":1061193,"accept_rate":83,"display_name":"drum"},"score":2,"creation_date":1683307120,"post_id":76184575,"comment_id":134352171,"body_markdown":"what are your inputs and outputs","body":"what are your inputs and outputs"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1683307420,"post_id":76184575,"comment_id":134352228,"body_markdown":"Does this answer your question? [java timestamps calculate overlap duration with interval](https://stackoverflow.com/questions/51465913/java-timestamps-calculate-overlap-duration-with-interval)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/51465913/java-timestamps-calculate-overlap-duration-with-interval\">java timestamps calculate overlap duration with interval</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1683308204,"post_id":76184575,"comment_id":134352362,"body_markdown":"`if (lt1.isAfter(lt2)) { System.out.printf(&quot;Time %s is after time %s%n&quot;, lt1, lt2);System.out.printf(&quot;Time %s is before time %s%n&quot;, lt1.atDate(LocalDate.now()), lt2.atDate(LocalDate.now()).plusDays(1));}` perhaps?","body":"<code>if (lt1.isAfter(lt2)) { System.out.printf(&quot;Time %s is after time %s%n&quot;, lt1, lt2);System.out.printf(&quot;Time %s is before time %s%n&quot;, lt1.atDate(LocalDate.now()), lt2.atDate(LocalDate.now()).plusDays(1));}</code> perhaps?"},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1683308602,"post_id":76184575,"comment_id":134352418,"body_markdown":"If you want any of this to work your timestamps must be _complete_ timestamps (i.e. `Instant`), with both date and time.  Then calculating the interval is just a subtraction.","body":"If you want any of this to work your timestamps must be <i>complete</i> timestamps (i.e. <code>Instant</code>), with both date and time.  Then calculating the interval is just a subtraction."},{"owner":{"account_id":25158292,"reputation":7,"user_id":19002824,"display_name":"DinoKing"},"score":0,"creation_date":1683311503,"post_id":76184575,"comment_id":134353053,"body_markdown":"@drum - current output with my example of 23:00-05:00 is 28:00","body":"@drum - current output with my example of 23:00-05:00 is 28:00"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1683314252,"post_id":76184575,"comment_id":134353585,"body_markdown":"Your numbers do not make sense. What does &quot;01:00-06:00&quot; have to do with &quot;workday starts at 23:00 and ends at 05:00&quot;? You say &quot;The result is 4 hours&quot; but none of your examples are four hours long. Please take more care when drafting your Question.","body":"Your numbers do not make sense. What does &quot;01:00-06:00&quot; have to do with &quot;workday starts at 23:00 and ends at 05:00&quot;? You say &quot;The result is 4 hours&quot; but none of your examples are four hours long. Please take more care when drafting your Question."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":1,"creation_date":1683318653,"post_id":76184575,"comment_id":134354402,"body_markdown":"@BasilBourque if you start at 23:00 and end at 05:00, exactly four of the hours worked are between 01:00 and 06:00 (from 01:00 to 05:00).","body":"@BasilBourque if you start at 23:00 and end at 05:00, exactly four of the hours worked are between 01:00 and 06:00 (from 01:00 to 05:00)."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1683318724,"post_id":76184575,"comment_id":134354413,"body_markdown":"What types are `start` and `end`? If starting after 06:00, simply use midnight as start.","body":"What types are <code>start</code> and <code>end</code>? If starting after 06:00, simply use midnight as start."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1683625409,"post_id":76184575,"comment_id":134391647,"body_markdown":"[mcve] please (mind the __M__!) - if you have problems using Date/Time api, there is no need to mix-in the ui (or the other way round :) And __do not__ use the old Date api.","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please (mind the <b>M</b>!) - if you have problems using Date/Time api, there is no need to mix-in the ui (or the other way round :) And <b>do not</b> use the old Date api."},{"owner":{"account_id":25158292,"reputation":7,"user_id":19002824,"display_name":"DinoKing"},"score":0,"creation_date":1683702144,"post_id":76184575,"comment_id":134405093,"body_markdown":"@kleopatra - TY for your comment, unfortunately I can&#39;t make everyone happy and some want more, some want less of my code. My code does not that big, so I hope (and think) it is okay for now. What should I use instead of the &quot;old date api&quot; in your opinion then?","body":"@kleopatra - TY for your comment, unfortunately I can&#39;t make everyone happy and some want more, some want less of my code. My code does not that big, so I hope (and think) it is okay for now. What should I use instead of the &quot;old date api&quot; in your opinion then?"}],"answers":[{"comments":[{"owner":{"account_id":25158292,"reputation":7,"user_id":19002824,"display_name":"DinoKing"},"score":0,"creation_date":1683605939,"post_id":76185275,"comment_id":134388274,"body_markdown":"TY for your comment, but this does not work for me.\n- I also think you are making it more complex, than needed, with adding timezones etc.\n\nI&#39;m trying to make it a simple project of mine, so I understand every step and not put too many things in to complex it, at this point. I also need to have the output in xx:xx format","body":"TY for your comment, but this does not work for me. - I also think you are making it more complex, than needed, with adding timezones etc.  I&#39;m trying to make it a simple project of mine, so I understand every step and not put too many things in to complex it, at this point. I also need to have the output in xx:xx format"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1683614138,"post_id":76185275,"comment_id":134389220,"body_markdown":"@DinoKing Good luck with that. Be sure your app is *not* running on [Oct 29, 2023 in Denmark](https://www.timeanddate.com/time/change/denmark).","body":"@DinoKing Good luck with that. Be sure your app is <i>not</i> running on <a href=\"https://www.timeanddate.com/time/change/denmark\" rel=\"nofollow noreferrer\">Oct 29, 2023 in Denmark</a>."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683332261,"creation_date":1683313951,"answer_id":76185275,"question_id":76184575,"body_markdown":"# `LocalDateTime` is ambiguous\r\n\r\nThe `LocalDateTime` class is the wrong class for your purpose. The `LocalDateTime` class purposely lacks any concept of time zone or offset from UTC, so it is inherently indefinite, ambiguous.\r\n\r\nWhen recording a moment, a specific point on the timeline, use `Instant`, `OffsetDateTime`, or `ZonedDateTime`. \r\n\r\n# Use `ZonedDateTime`\r\n\r\nFor your purpose, use [`ZonedDateTime`][1]. This class accounts for temporal anomalies such as [Daylight Saving Time (DST)][2] that occur in time zones with rules changed by politicians.\r\n\r\n```java\r\nZoneId z = ZoneId.of( &quot;Asia/Tokyo&quot; );\r\nZonedDateTime start = ZonedDateTime.of( 2023 , 5 , 13 , 23 , 0 , 0 , 0 , z );\r\nZonedDateTime end = ZonedDateTime.of( 2023 , 5 , 14 , 5 , 0 , 0 , 0 , z );\r\nDuration duration = Duration.between( start , end );\r\n```\r\n\r\nWhen run we get a result of 6 hours between those two moments.\r\n\r\n```none\r\nstart.toString() = 2023-05-13T23:00+09:00[Asia/Tokyo]\r\nend.toString() = 2023-05-14T05:00+09:00[Asia/Tokyo]\r\nduration.toString() = PT6H\r\n```\r\n\r\n# Intersection of time spans\r\n\r\n[Thanks to David Conrad][3], I see now that you want to know how much of one span of time coincides with another. \r\n\r\nThis calculation is actually quite easy, if you add the [*ThreeTen-Extra*][4] library to your project. From that library, make use of the `org.threeten.extra.Interval` class. That class represents a span of time attached to the timeline. The beginning &amp; ending of the span are moments as seen with an [offset from UTC][5] of zero hours-minutes-seconds. These moments are represented with the `java.time.Instant` class.\r\n\r\nGet the interval of our worked time.\r\n\r\n```java\r\nInterval worked = Interval.of( start.toInstant() , end.toInstant() );\r\n```\r\n\r\nNow get the target interval. We want 1 AM to 6 AM of the second day of work.\r\n\r\n```java\r\nZonedDateTime targetStart = ZonedDateTime.of( 2023 , 5 , 14 , 1 , 0 , 0 , 0 , z );\r\nZonedDateTime targetEnd = ZonedDateTime.of( 2023 , 5 , 14 , 6 , 0 , 0 , 0 , z );\r\nInterval target = Interval.of( targetStart.toInstant() , targetEnd.toInstant() );\r\n```\r\n\r\nNotice that we used `ZonedDateTime` again, to represent the start and end of our target. We do this to account for politicians temporal anomalies. The span from 1 AM to 6 AM may or may not be five hours long. It might be four hours, or six hours, or four and a half hours, or any other length the politicians dream up. \r\n\r\nGet the intersection of those two spans of time.\r\n\r\n```java\r\nInterval intersection = worked.intersection( target );\r\n```\r\n\r\nDetermine how long is that span of time.\r\n\r\n```java\r\nDuration durationOfIntersection = intersection.toDuration();\r\n```\r\n\r\nWhen run, we see a result of four hours.\r\n\r\n```none\r\nworked.toString() = 2023-05-13T14:00:00Z/2023-05-13T20:00:00Z\r\ntarget.toString() = 2023-05-13T16:00:00Z/2023-05-13T21:00:00Z\r\nintersection.toString() = 2023-05-13T16:00:00Z/2023-05-13T20:00:00Z\r\ndurationOfIntersection.toString() = PT4H\r\n```\r\n    \r\nThe output of the various `toString` methods is shown above. The formats of those are part of the [ISO 8601][6] standard. The `Z` at the end is an abbreviation of `+00:00`, an offset of zero. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html\r\n  [2]: https://en.wikipedia.org/wiki/Daylight_saving_time\r\n  [3]: https://stackoverflow.com/questions/76184575/how-to-calculate-work-schedule-between-0100-0600?noredirect=1#comment134354402_76184575\r\n  [4]: https://www.threeten.org/threeten-extra/\r\n  [5]: https://en.wikipedia.org/wiki/UTC_offset\r\n  [6]: https://en.wikipedia.org/wiki/ISO_8601","title":"How to calculate work schedule between 01:00-06:00","body":"<h1><code>LocalDateTime</code> is ambiguous</h1>\n<p>The <code>LocalDateTime</code> class is the wrong class for your purpose. The <code>LocalDateTime</code> class purposely lacks any concept of time zone or offset from UTC, so it is inherently indefinite, ambiguous.</p>\n<p>When recording a moment, a specific point on the timeline, use <code>Instant</code>, <code>OffsetDateTime</code>, or <code>ZonedDateTime</code>.</p>\n<h1>Use <code>ZonedDateTime</code></h1>\n<p>For your purpose, use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a>. This class accounts for temporal anomalies such as <a href=\"https://en.wikipedia.org/wiki/Daylight_saving_time\" rel=\"nofollow noreferrer\">Daylight Saving Time (DST)</a> that occur in time zones with rules changed by politicians.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ZoneId z = ZoneId.of( &quot;Asia/Tokyo&quot; );\nZonedDateTime start = ZonedDateTime.of( 2023 , 5 , 13 , 23 , 0 , 0 , 0 , z );\nZonedDateTime end = ZonedDateTime.of( 2023 , 5 , 14 , 5 , 0 , 0 , 0 , z );\nDuration duration = Duration.between( start , end );\n</code></pre>\n<p>When run we get a result of 6 hours between those two moments.</p>\n<pre class=\"lang-none prettyprint-override\"><code>start.toString() = 2023-05-13T23:00+09:00[Asia/Tokyo]\nend.toString() = 2023-05-14T05:00+09:00[Asia/Tokyo]\nduration.toString() = PT6H\n</code></pre>\n<h1>Intersection of time spans</h1>\n<p><a href=\"https://stackoverflow.com/questions/76184575/how-to-calculate-work-schedule-between-0100-0600?noredirect=1#comment134354402_76184575\">Thanks to David Conrad</a>, I see now that you want to know how much of one span of time coincides with another.</p>\n<p>This calculation is actually quite easy, if you add the <a href=\"https://www.threeten.org/threeten-extra/\" rel=\"nofollow noreferrer\"><em>ThreeTen-Extra</em></a> library to your project. From that library, make use of the <code>org.threeten.extra.Interval</code> class. That class represents a span of time attached to the timeline. The beginning &amp; ending of the span are moments as seen with an <a href=\"https://en.wikipedia.org/wiki/UTC_offset\" rel=\"nofollow noreferrer\">offset from UTC</a> of zero hours-minutes-seconds. These moments are represented with the <code>java.time.Instant</code> class.</p>\n<p>Get the interval of our worked time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Interval worked = Interval.of( start.toInstant() , end.toInstant() );\n</code></pre>\n<p>Now get the target interval. We want 1 AM to 6 AM of the second day of work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ZonedDateTime targetStart = ZonedDateTime.of( 2023 , 5 , 14 , 1 , 0 , 0 , 0 , z );\nZonedDateTime targetEnd = ZonedDateTime.of( 2023 , 5 , 14 , 6 , 0 , 0 , 0 , z );\nInterval target = Interval.of( targetStart.toInstant() , targetEnd.toInstant() );\n</code></pre>\n<p>Notice that we used <code>ZonedDateTime</code> again, to represent the start and end of our target. We do this to account for politicians temporal anomalies. The span from 1 AM to 6 AM may or may not be five hours long. It might be four hours, or six hours, or four and a half hours, or any other length the politicians dream up.</p>\n<p>Get the intersection of those two spans of time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Interval intersection = worked.intersection( target );\n</code></pre>\n<p>Determine how long is that span of time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Duration durationOfIntersection = intersection.toDuration();\n</code></pre>\n<p>When run, we see a result of four hours.</p>\n<pre class=\"lang-none prettyprint-override\"><code>worked.toString() = 2023-05-13T14:00:00Z/2023-05-13T20:00:00Z\ntarget.toString() = 2023-05-13T16:00:00Z/2023-05-13T21:00:00Z\nintersection.toString() = 2023-05-13T16:00:00Z/2023-05-13T20:00:00Z\ndurationOfIntersection.toString() = PT4H\n</code></pre>\n<p>The output of the various <code>toString</code> methods is shown above. The formats of those are part of the <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> standard. The <code>Z</code> at the end is an abbreviation of <code>+00:00</code>, an offset of zero.</p>\n"}],"owner":{"account_id":25158292,"reputation":7,"user_id":19002824,"display_name":"DinoKing"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1683627971,"creation_date":1683306932,"question_id":76184575,"body_markdown":"After keeping getting &quot;warnings&quot; of my question is not good enough I will try again and get every single thing added to this question.\r\n\r\nI&#39;m trying to make an application where I can calculate my salary (hourly paid). For this there is certain requirements since different time slots/days have different appendices.\r\n\r\nMy most important requirement, and the one I&#39;m strugling with is to check if my workday has been between the timeslot of 01:00-06:00, if so how many hours.\r\nE.g. start Monday 23:00 end Tuesday 05:00\r\nI have worked 06:00 hours and 04:00 hours has been between 01:00-06:00\r\n\r\nThis is my current code where I have tried with different types of if-statements to get the interval, but I can&#39;t get it to work in all situations (no matter what I type), this is because of the difficulty with it possibly is going from one day to another.\r\n\r\n(My notes etc. are in danish, but this question is only regarding table 2,3 and 8 and is all in my tableChanged method)\r\n\r\n```\r\nimport java.awt.*;\r\nimport java.awt.event.*;\r\nimport java.time.*;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.format.DateTimeParseException;\r\nimport java.util.Calendar;\r\nimport javax.swing.*;\r\nimport javax.swing.event.TableModelEvent;\r\nimport javax.swing.event.TableModelListener;\r\nimport javax.swing.table.*;\r\n\r\npublic class TimeDifferenceCalculator222 extends JFrame {\r\n    private JTextField dateField;\r\n    private JTextField dateField1;\r\n    private JTable table;\r\n    private DefaultTableModel model;\r\n\r\n    public TimeDifferenceCalculator222() {\r\n        super(&quot;Time Difference Calculator&quot;);\r\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n        // Opret tekstfelt for dato\r\n        dateField = new JTextField(10);\r\n        dateField.setToolTipText(&quot;Indtast dato i formatet dd/MM/yyyy&quot;);\r\n\r\n        // Opret tabel for datoer og start/slut-tidspunkter\r\n        model = new DefaultTableModel() {\r\n            @Override\r\n            public boolean isCellEditable(int row, int column) {\r\n                return column != 0;\r\n            }\r\n        };\r\n        table = new JTable(model);\r\n        model.addColumn(&quot;Dato&quot;);\r\n        model.addColumn(&quot;Ugedag&quot;);\r\n        model.addColumn(&quot;Starttidspunkt&quot;);\r\n        model.addColumn(&quot;Sluttidspunkt&quot;);\r\n        model.addColumn(&quot;Differencetid&quot;);\r\n        model.addColumn(&quot;Branchetill&#230;g&quot;);\r\n        model.addColumn(&quot;VC1 till&#230;g&quot;);\r\n        model.addColumn(&quot;Nattetill&#230;g&quot;);\r\n        model.addColumn(&quot;Nattetimer (01:00-06:00)&quot;);\r\n        model.addColumn(&quot;Weekendtill&#230;g (l&#248;rdag)&quot;);\r\n        model.addColumn(&quot;Weekend / Helligdage&quot;);\r\n\r\n        // Tilf&#248;j 31 r&#230;kker til tabellen\r\n        LocalDate startDate = LocalDate.now();\r\n        for (int i = 0; i &lt; 31; i++) {\r\n            model.addRow(new Object[] { startDate.format(DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), &quot;&quot;, &quot;&quot;, &quot;&quot; });\r\n            startDate = startDate.plusDays(1);\r\n        }\r\n\r\n        // Tilf&#248;j lytter til dato-feltet\r\n        dateField.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                try {\r\n                    LocalDate date = LocalDate.parse(dateField.getText(), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;));\r\n                    LocalDate endDate = date.plusDays(30);\r\n                    int row = 0;\r\n                    for (LocalDate d = date; !d.isAfter(endDate); d = d.plusDays(1)) {\r\n                        model.setValueAt(d.format(DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), row, 0);\r\n                        Calendar calendar = Calendar.getInstance();\r\n                        calendar.set(d.getYear(), d.getMonthValue() - 1, d.getDayOfMonth());\r\n                        int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);\r\n                        String dayOfWeekString;\r\n                        switch (dayOfWeek) {\r\n                            case Calendar.SUNDAY:\r\n                                dayOfWeekString = &quot;S&#248;ndag&quot;;\r\n                                break;\r\n                            case Calendar.MONDAY:\r\n                                dayOfWeekString = &quot;Mandag&quot;;\r\n                                break;\r\n                            case Calendar.TUESDAY:\r\n                                dayOfWeekString = &quot;Tirsdag&quot;;\r\n                                break;\r\n                            case Calendar.WEDNESDAY:\r\n                                dayOfWeekString = &quot;Onsdag&quot;;\r\n                                break;\r\n                            case Calendar.THURSDAY:\r\n                                dayOfWeekString = &quot;Torsdag&quot;;\r\n                                break;\r\n                            case Calendar.FRIDAY:\r\n                                dayOfWeekString = &quot;Fredag&quot;;\r\n                                break;\r\n                            case Calendar.SATURDAY:\r\n                                dayOfWeekString = &quot;L&#248;rdag&quot;;\r\n                                break;\r\n                            default:\r\n                                dayOfWeekString = &quot;&quot;;\r\n                                break;\r\n                        }\r\n                        model.setValueAt(dayOfWeekString, row, 1);\r\n                        row++;\r\n                    }\r\n                } catch (DateTimeParseException ex) {\r\n                    JOptionPane.showMessageDialog(TimeDifferenceCalculator222.this, &quot;Ugyldig datoformat&quot;, &quot;Fejl&quot;, JOptionPane.ERROR_MESSAGE);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Tilf&#248;j lytter til tabelen\r\n        table.getModel().addTableModelListener(new TableModelListener() {\r\n            @Override\r\n            public void tableChanged(TableModelEvent e) {\r\n                if (e.getType() == TableModelEvent.UPDATE &amp;&amp; e.getColumn() &gt;= 2 &amp;&amp; e.getColumn() &lt;= 3) {\r\n                    int row = e.getFirstRow();\r\n                    String startStr = (String) model.getValueAt(row, 2);\r\n                    String endStr = (String) model.getValueAt(row, 3);\r\n                    if (!startStr.isEmpty() &amp;&amp; !endStr.isEmpty()) {\r\n                        LocalTime start = LocalTime.parse(startStr, DateTimeFormatter.ofPattern(&quot;HH:mm&quot;));\r\n                        LocalTime end = LocalTime.parse(endStr, DateTimeFormatter.ofPattern(&quot;HH:mm&quot;));\r\n                        LocalDateTime startDateTime = LocalDateTime.of(LocalDate.parse((String) model.getValueAt(row, 0), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), start);\r\n                        LocalDateTime endDateTime = LocalDateTime.of(LocalDate.parse((String) model.getValueAt(row, 0), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), end);\r\n                        if (end.isBefore(start)) {\r\n                            endDateTime = endDateTime.plusDays(1);\r\n                        }\r\n                        Duration duration = Duration.between(startDateTime, endDateTime);\r\n                        long minutes = duration.toMinutes();\r\n                        long hours = minutes / 60;\r\n                        long remainingMinutes = minutes % 60;\r\n                        String differenceTime = String.format(&quot;%02d:%02d&quot;, hours, remainingMinutes);\r\n                        model.setValueAt(differenceTime, row, 4);\r\n\r\n                        // Beregn antal timer mellem 01:00 og 06:00 og s&#230;t i kolonne 8\r\n                        LocalTime oneAM = LocalTime.of(1, 0);\r\n                        LocalTime sixAM = LocalTime.of(6, 0);\r\n\r\n\r\n                        if (start.isBefore(oneAM) &amp;&amp; end.isAfter(oneAM) || start.isAfter(oneAM) &amp;&amp; end.isBefore(sixAM) || start.isAfter(oneAM) &amp;&amp; end.isAfter(sixAM)) {\r\n\r\n                            LocalDateTime start1am = LocalDateTime.of(LocalDate.parse((String) model.getValueAt(row, 0), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), oneAM);\r\n                            LocalDateTime end6am = LocalDateTime.of(LocalDate.parse((String) model.getValueAt(row, 0), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), sixAM);\r\n                            if (start.isBefore(oneAM) &amp;&amp; end.isBefore(sixAM)) {\r\n                                start1am = LocalDateTime.from(oneAM);\r\n                            }\r\n                            if (start.isAfter(oneAM) &amp;&amp; end.isBefore(sixAM)) {\r\n                                start1am = LocalDateTime.from(startDateTime);\r\n                                end6am = LocalDateTime.from(endDateTime);\r\n                            }\r\n                            if (end.isBefore(sixAM)) {\r\n                                end6am = endDateTime;\r\n                            }\r\n                            Duration durationBetween1and6 = Duration.between(start1am, end6am);\r\n                            long minutesBetween1and6 = durationBetween1and6.toMinutes();\r\n                            long hoursBetween1and6 = minutesBetween1and6 / 60;\r\n                            long remainingMinutesBetween1and6 = minutesBetween1and6 % 60;\r\n                            String hoursMinutesBetween1and6 = String.format(&quot;%02d:%02d&quot;, hoursBetween1and6, remainingMinutesBetween1and6);\r\n                            model.setValueAt(hoursMinutesBetween1and6, row, 8);\r\n\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        // Opret scroll-pane og tilf&#248;j tabelen til den\r\n        JScrollPane scrollPane = new JScrollPane(table);\r\n\r\n        // Tilf&#248;j komponenter til frame\r\n        Container c = getContentPane();\r\n        c.setLayout(new BorderLayout());\r\n        c.add(dateField, BorderLayout.NORTH);\r\n        c.add(scrollPane, BorderLayout.CENTER);\r\n\r\n        // Vis frame\r\n        pack();\r\n        setLocationRelativeTo(null);\r\n        setVisible(true);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new TimeDifferenceCalculator222();\r\n    }\r\n}\r\n\r\n\r\n```","title":"How to calculate work schedule between 01:00-06:00","body":"<p>After keeping getting &quot;warnings&quot; of my question is not good enough I will try again and get every single thing added to this question.</p>\n<p>I'm trying to make an application where I can calculate my salary (hourly paid). For this there is certain requirements since different time slots/days have different appendices.</p>\n<p>My most important requirement, and the one I'm strugling with is to check if my workday has been between the timeslot of 01:00-06:00, if so how many hours.\nE.g. start Monday 23:00 end Tuesday 05:00\nI have worked 06:00 hours and 04:00 hours has been between 01:00-06:00</p>\n<p>This is my current code where I have tried with different types of if-statements to get the interval, but I can't get it to work in all situations (no matter what I type), this is because of the difficulty with it possibly is going from one day to another.</p>\n<p>(My notes etc. are in danish, but this question is only regarding table 2,3 and 8 and is all in my tableChanged method)</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.time.*;\nimport java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeParseException;\nimport java.util.Calendar;\nimport javax.swing.*;\nimport javax.swing.event.TableModelEvent;\nimport javax.swing.event.TableModelListener;\nimport javax.swing.table.*;\n\npublic class TimeDifferenceCalculator222 extends JFrame {\n    private JTextField dateField;\n    private JTextField dateField1;\n    private JTable table;\n    private DefaultTableModel model;\n\n    public TimeDifferenceCalculator222() {\n        super(&quot;Time Difference Calculator&quot;);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        // Opret tekstfelt for dato\n        dateField = new JTextField(10);\n        dateField.setToolTipText(&quot;Indtast dato i formatet dd/MM/yyyy&quot;);\n\n        // Opret tabel for datoer og start/slut-tidspunkter\n        model = new DefaultTableModel() {\n            @Override\n            public boolean isCellEditable(int row, int column) {\n                return column != 0;\n            }\n        };\n        table = new JTable(model);\n        model.addColumn(&quot;Dato&quot;);\n        model.addColumn(&quot;Ugedag&quot;);\n        model.addColumn(&quot;Starttidspunkt&quot;);\n        model.addColumn(&quot;Sluttidspunkt&quot;);\n        model.addColumn(&quot;Differencetid&quot;);\n        model.addColumn(&quot;Branchetillg&quot;);\n        model.addColumn(&quot;VC1 tillg&quot;);\n        model.addColumn(&quot;Nattetillg&quot;);\n        model.addColumn(&quot;Nattetimer (01:00-06:00)&quot;);\n        model.addColumn(&quot;Weekendtillg (lrdag)&quot;);\n        model.addColumn(&quot;Weekend / Helligdage&quot;);\n\n        // Tilfj 31 rkker til tabellen\n        LocalDate startDate = LocalDate.now();\n        for (int i = 0; i &lt; 31; i++) {\n            model.addRow(new Object[] { startDate.format(DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), &quot;&quot;, &quot;&quot;, &quot;&quot; });\n            startDate = startDate.plusDays(1);\n        }\n\n        // Tilfj lytter til dato-feltet\n        dateField.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                try {\n                    LocalDate date = LocalDate.parse(dateField.getText(), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;));\n                    LocalDate endDate = date.plusDays(30);\n                    int row = 0;\n                    for (LocalDate d = date; !d.isAfter(endDate); d = d.plusDays(1)) {\n                        model.setValueAt(d.format(DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), row, 0);\n                        Calendar calendar = Calendar.getInstance();\n                        calendar.set(d.getYear(), d.getMonthValue() - 1, d.getDayOfMonth());\n                        int dayOfWeek = calendar.get(Calendar.DAY_OF_WEEK);\n                        String dayOfWeekString;\n                        switch (dayOfWeek) {\n                            case Calendar.SUNDAY:\n                                dayOfWeekString = &quot;Sndag&quot;;\n                                break;\n                            case Calendar.MONDAY:\n                                dayOfWeekString = &quot;Mandag&quot;;\n                                break;\n                            case Calendar.TUESDAY:\n                                dayOfWeekString = &quot;Tirsdag&quot;;\n                                break;\n                            case Calendar.WEDNESDAY:\n                                dayOfWeekString = &quot;Onsdag&quot;;\n                                break;\n                            case Calendar.THURSDAY:\n                                dayOfWeekString = &quot;Torsdag&quot;;\n                                break;\n                            case Calendar.FRIDAY:\n                                dayOfWeekString = &quot;Fredag&quot;;\n                                break;\n                            case Calendar.SATURDAY:\n                                dayOfWeekString = &quot;Lrdag&quot;;\n                                break;\n                            default:\n                                dayOfWeekString = &quot;&quot;;\n                                break;\n                        }\n                        model.setValueAt(dayOfWeekString, row, 1);\n                        row++;\n                    }\n                } catch (DateTimeParseException ex) {\n                    JOptionPane.showMessageDialog(TimeDifferenceCalculator222.this, &quot;Ugyldig datoformat&quot;, &quot;Fejl&quot;, JOptionPane.ERROR_MESSAGE);\n                }\n            }\n        });\n\n        // Tilfj lytter til tabelen\n        table.getModel().addTableModelListener(new TableModelListener() {\n            @Override\n            public void tableChanged(TableModelEvent e) {\n                if (e.getType() == TableModelEvent.UPDATE &amp;&amp; e.getColumn() &gt;= 2 &amp;&amp; e.getColumn() &lt;= 3) {\n                    int row = e.getFirstRow();\n                    String startStr = (String) model.getValueAt(row, 2);\n                    String endStr = (String) model.getValueAt(row, 3);\n                    if (!startStr.isEmpty() &amp;&amp; !endStr.isEmpty()) {\n                        LocalTime start = LocalTime.parse(startStr, DateTimeFormatter.ofPattern(&quot;HH:mm&quot;));\n                        LocalTime end = LocalTime.parse(endStr, DateTimeFormatter.ofPattern(&quot;HH:mm&quot;));\n                        LocalDateTime startDateTime = LocalDateTime.of(LocalDate.parse((String) model.getValueAt(row, 0), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), start);\n                        LocalDateTime endDateTime = LocalDateTime.of(LocalDate.parse((String) model.getValueAt(row, 0), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), end);\n                        if (end.isBefore(start)) {\n                            endDateTime = endDateTime.plusDays(1);\n                        }\n                        Duration duration = Duration.between(startDateTime, endDateTime);\n                        long minutes = duration.toMinutes();\n                        long hours = minutes / 60;\n                        long remainingMinutes = minutes % 60;\n                        String differenceTime = String.format(&quot;%02d:%02d&quot;, hours, remainingMinutes);\n                        model.setValueAt(differenceTime, row, 4);\n\n                        // Beregn antal timer mellem 01:00 og 06:00 og st i kolonne 8\n                        LocalTime oneAM = LocalTime.of(1, 0);\n                        LocalTime sixAM = LocalTime.of(6, 0);\n\n\n                        if (start.isBefore(oneAM) &amp;&amp; end.isAfter(oneAM) || start.isAfter(oneAM) &amp;&amp; end.isBefore(sixAM) || start.isAfter(oneAM) &amp;&amp; end.isAfter(sixAM)) {\n\n                            LocalDateTime start1am = LocalDateTime.of(LocalDate.parse((String) model.getValueAt(row, 0), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), oneAM);\n                            LocalDateTime end6am = LocalDateTime.of(LocalDate.parse((String) model.getValueAt(row, 0), DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;)), sixAM);\n                            if (start.isBefore(oneAM) &amp;&amp; end.isBefore(sixAM)) {\n                                start1am = LocalDateTime.from(oneAM);\n                            }\n                            if (start.isAfter(oneAM) &amp;&amp; end.isBefore(sixAM)) {\n                                start1am = LocalDateTime.from(startDateTime);\n                                end6am = LocalDateTime.from(endDateTime);\n                            }\n                            if (end.isBefore(sixAM)) {\n                                end6am = endDateTime;\n                            }\n                            Duration durationBetween1and6 = Duration.between(start1am, end6am);\n                            long minutesBetween1and6 = durationBetween1and6.toMinutes();\n                            long hoursBetween1and6 = minutesBetween1and6 / 60;\n                            long remainingMinutesBetween1and6 = minutesBetween1and6 % 60;\n                            String hoursMinutesBetween1and6 = String.format(&quot;%02d:%02d&quot;, hoursBetween1and6, remainingMinutesBetween1and6);\n                            model.setValueAt(hoursMinutesBetween1and6, row, 8);\n\n                        }\n\n                    }\n                }\n            }\n        });\n\n        // Opret scroll-pane og tilfj tabelen til den\n        JScrollPane scrollPane = new JScrollPane(table);\n\n        // Tilfj komponenter til frame\n        Container c = getContentPane();\n        c.setLayout(new BorderLayout());\n        c.add(dateField, BorderLayout.NORTH);\n        c.add(scrollPane, BorderLayout.CENTER);\n\n        // Vis frame\n        pack();\n        setLocationRelativeTo(null);\n        setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        new TimeDifferenceCalculator222();\n    }\n}\n\n\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":16871523,"reputation":706,"user_id":12199915,"display_name":"Alex"},"score":1,"creation_date":1683624406,"post_id":76207657,"comment_id":134391401,"body_markdown":"You shouldn&#39;t check `string` for equality in `==` manner","body":"You shouldn&#39;t check <code>string</code> for equality in <code>==</code> manner"},{"owner":{"account_id":15497178,"reputation":65,"user_id":11847670,"display_name":"Theow Meng Ang"},"score":0,"creation_date":1683624661,"post_id":76207657,"comment_id":134391478,"body_markdown":"I used the equals() function and I still get the same error","body":"I used the equals() function and I still get the same error"},{"owner":{"account_id":15497178,"reputation":65,"user_id":11847670,"display_name":"Theow Meng Ang"},"score":0,"creation_date":1683626119,"post_id":76207657,"comment_id":134391794,"body_markdown":"I also find this error UnexpectedTypeException: HV000030","body":"I also find this error UnexpectedTypeException: HV000030"}],"answers":[{"comments":[{"owner":{"account_id":15497178,"reputation":65,"user_id":11847670,"display_name":"Theow Meng Ang"},"score":0,"creation_date":1683787933,"post_id":76208151,"comment_id":134420744,"body_markdown":"Thanks...I know how to tackle the problems","body":"Thanks...I know how to tackle the problems"}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683627785,"creation_date":1683626777,"answer_id":76208151,"question_id":76207657,"body_markdown":"### Short Answer\r\nYour validator should, as your model and your error message imply:\r\n```lang-java\r\n... implements ConstraintValidator&lt;LastName, String&gt;\r\n```\r\nAnd not `&lt;LastName, User&gt;`.\r\n\r\nAccordingly, you should re-implement the `isValid(...)` method: accepting the last name `String` (and not the containing `User`).\r\n\r\nIf you want to use this annotation on `User` and `String` &quot;fields&quot;, you *must* implement an additional `ConstraintValidator&lt;LastName, ...&gt;`, with according &quot;API facade&quot;.\r\n\r\nThis *can* be wired/refered like:\r\n```lang-java\r\n@Constraint(\r\n  validatedBy = {\r\n    StringLastNameValidator.class, \r\n    UserLastNameValidator.class /*,...*/ \r\n  }\r\n) // accepts array!;)\r\n```\r\n### Extended answer\r\nYour (current) validator seems wrong (&quot;Mr. Jack Jack&quot; is invalid, while &quot;Mr `&lt;null&gt;` X&quot; valid!?), but should (if reasoned) be used **on `User`** &quot;fields&quot;, e.g (&quot;method parameter&quot; in this case) :\r\n```lang-java\r\n@PostMapping(&quot;/submitForm&quot;)\r\n    public String handleSubmit(\r\n  @Valid @LastName User user // ! ...\r\n```\r\n...to use it **inside `User`** (on `String` fields), stick to &quot;short answer&quot;.","title":"I don&#39;t know whether my valid type is wrong or what","body":"<h3>Short Answer</h3>\n<p>Your validator should, as your model and your error message imply:</p>\n<pre class=\"lang-java prettyprint-override\"><code>... implements ConstraintValidator&lt;LastName, String&gt;\n</code></pre>\n<p>And not <code>&lt;LastName, User&gt;</code>.</p>\n<p>Accordingly, you should re-implement the <code>isValid(...)</code> method: accepting the last name <code>String</code> (and not the containing <code>User</code>).</p>\n<p>If you want to use this annotation on <code>User</code> and <code>String</code> &quot;fields&quot;, you <em>must</em> implement an additional <code>ConstraintValidator&lt;LastName, ...&gt;</code>, with according &quot;API facade&quot;.</p>\n<p>This <em>can</em> be wired/refered like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Constraint(\n  validatedBy = {\n    StringLastNameValidator.class, \n    UserLastNameValidator.class /*,...*/ \n  }\n) // accepts array!;)\n</code></pre>\n<h3>Extended answer</h3>\n<p>Your (current) validator seems wrong (&quot;Mr. Jack Jack&quot; is invalid, while &quot;Mr <code>&lt;null&gt;</code> X&quot; valid!?), but should (if reasoned) be used <strong>on <code>User</code></strong> &quot;fields&quot;, e.g (&quot;method parameter&quot; in this case) :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping(&quot;/submitForm&quot;)\n    public String handleSubmit(\n  @Valid @LastName User user // ! ...\n</code></pre>\n<p>...to use it <strong>inside <code>User</code></strong> (on <code>String</code> fields), stick to &quot;short answer&quot;.</p>\n"}],"owner":{"account_id":15497178,"reputation":65,"user_id":11847670,"display_name":"Theow Meng Ang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1683627785,"creation_date":1683623704,"question_id":76207657,"body_markdown":"I am new to spring boot. I want to validator check so that the first name and last name cannot be equal. I don&#39;t know my code is correct or wrong for the LastNameValidator.java. I use the user object instead of just the last name to check and I get the error. No validator could be found for constraint &#39;com.example.workbook31.LastName&#39; validating type &#39;java.lang.String&#39;. Check configuration for &#39;lastName&#39;.\r\n\r\nMy LastNameValidator.java code\r\n```java\r\npackage com.example.workbook31;\r\n\r\nimport jakarta.validation.ConstraintValidator;\r\nimport jakarta.validation.ConstraintValidatorContext;\r\n\r\npublic class LastNameValidator implements ConstraintValidator&lt;LastName, User&gt; {\r\n    @Override\r\n    public boolean isValid(User user, ConstraintValidatorContext context){\r\n        if(user.getFirstName() != user.getLastName() ){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    \r\n}\r\n```\r\nMy LastName.java code\r\n```java\r\npackage com.example.workbook31;\r\n\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\nimport jakarta.validation.Constraint;\r\nimport jakarta.validation.Payload;\r\n\r\n@Target(ElementType.FIELD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Constraint(validatedBy = LastNameValidator.class)\r\npublic @interface LastName {\r\n    String message() default &quot;First Name cannot equal to Last Name&quot;;\r\n    Class&lt;?&gt;[] groups() default {};\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n    \r\n}\r\n```\r\nMy ApplicationController.java\r\n```java\r\npackage com.example.workbook31;\r\n\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.validation.BindingResult;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\n\r\nimport jakarta.validation.Valid;\r\n\r\n@Controller\r\npublic class ApplicationController {\r\n    \r\n    List&lt;User&gt; users = new ArrayList&lt;&gt;();\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public String getForm(Model model,@RequestParam(required=false)String id){ \r\n        int index = getIndexFromId(id);\r\n        model.addAttribute(&quot;user&quot;, index == -1000 ? new User(): users.get(index));\r\n        return &quot;sign-up&quot;;\r\n    }\r\n    \r\n    @PostMapping(&quot;/submitForm&quot;)\r\n    public String handleSubmit(@Valid User user, BindingResult result){\r\n        int index = getIndexFromId(user.getId());\r\n        if(result.hasErrors()){\r\n            return &quot;sign-up&quot;;\r\n        }\r\n        \r\n        if(index == -1000){\r\n            users.add(user);\r\n        }else {\r\n            users.set(index,user);\r\n        }\r\n       \r\n        return &quot;redirect:/result&quot;;\r\n    }\r\n    \r\n    @GetMapping(&quot;/result&quot;)\r\n    public String getResult(Model model){\r\n        model.addAttribute(&quot;users&quot;, users);\r\n        return &quot;result&quot;;\r\n    }\r\n\r\n    public Integer getIndexFromId(String id){\r\n        for(int i=0;i&lt;users.size();i++){\r\n            if(users.get(i).getId().equals(id)){\r\n                return i;\r\n            }\r\n        }\r\n        return -1000;\r\n}\r\n\r\n}\r\n```\r\nMy User.java\r\n```java\r\npackage com.example.workbook31;\r\n\r\nimport org.springframework.format.annotation.DateTimeFormat;\r\n\r\nimport jakarta.validation.constraints.Email;\r\nimport jakarta.validation.constraints.NotBlank;\r\nimport jakarta.validation.constraints.Past;\r\nimport jakarta.validation.constraints.Size;\r\n\r\nimport java.util.Date;\r\nimport java.util.UUID;\r\n\r\n\r\npublic class User {\r\n    @NotBlank(message = &quot;First name cannot be blank&quot;)\r\n    @Size(min=2, message=&quot;First name is too short&quot;)\r\n    private String firstName;\r\n    \r\n    @NotBlank(message = &quot;First name cannot be blank&quot;)\r\n    @Size(min=2, message=&quot;First name is too short&quot;)\r\n    @LastName\r\n    private String lastName;\r\n    \r\n    @NotBlank(message = &quot;Username cannot be blank&quot;)\r\n    @Size(min=7, message= &quot;Username must at least be 7 characters&quot;)\r\n    private String userName;\r\n    \r\n    @Email(message = &quot;Invalid Email&quot;)\r\n    private String email;\r\n    \r\n    @Past(message = &quot;date of birth must be in the past&quot;)\r\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\r\n    private Date dateOfBirth;\r\n    private String id;\r\n    \r\n    public User() {\r\n        this.id = UUID.randomUUID().toString();\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n\r\n    public void setLastName(String lastName) {\r\n        this.lastName = lastName;\r\n    }\r\n\r\n    public String getUserName() {\r\n        return userName;\r\n    }\r\n\r\n    public void setUserName(String userName) {\r\n        this.userName = userName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public Date getDateOfBirth() {\r\n        return dateOfBirth;\r\n    }\r\n\r\n    public void setDateOfBirth(Date dateOfBirth) {\r\n        this.dateOfBirth = dateOfBirth;\r\n    }\r\n\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n      \r\n    \r\n    \r\n}\r\n```\r\nMy Application.java\r\n```java\r\npackage com.example.workbook31;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(Application.class, args);\r\n\t}\r\n\r\n}\r\n```\r\nMy sign-up.html\r\n```html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n    &lt;title&gt;Sign Up&lt;/title&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/form-stylesheet.css}&quot;&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;div class=&quot;container&quot;&gt;\r\n        &lt;h2&gt;Javagram&lt;/h2&gt;\r\n        &lt;form method=&quot;post&quot; th:object=&quot;${user}&quot; th:action=&quot;@{/submitForm}&quot;&gt;\r\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{firstName}&quot;&gt;&lt;/p&gt;\r\n            &lt;input type=&quot;text&quot; placeholder=&quot;First Name&quot; th:field=&quot;*{firstName}&quot;&gt;\r\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{lastName}&quot;&gt;&lt;/p&gt;\r\n            &lt;input type=&quot;text&quot; placeholder=&quot;Last Name&quot; th:field=&quot;*{lastName}&quot;&gt;\r\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{userName}&quot;&gt;&lt;/p&gt;\r\n            &lt;input type=&quot;text&quot; placeholder=&quot;Username&quot; th:field=&quot;*{userName}&quot; &gt;\r\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{email}&quot;&gt;&lt;/p&gt;\r\n            &lt;input type=&quot;text&quot; placeholder=&quot;Email&quot; th:field=&quot;*{email}&quot;&gt;\r\n            &lt;p style=&quot;font-weight: bold;&quot;&gt;Date of Birth&lt;/p&gt;\r\n            &lt;input type=&quot;date&quot; th:field=&quot;*{dateOfBirth}&quot; &gt;\r\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{dateOfBirth}&quot;&gt;&lt;/p&gt;\r\n            &lt;input type=&quot;hidden&quot; th:field=&quot;*{id}&quot; &gt;\r\n            &lt;br&gt;&lt;br&gt;\r\n            &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\r\n        &lt;/form&gt;\r\n    &lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nMy pom\r\n```\r\n&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n```","title":"I don&#39;t know whether my valid type is wrong or what","body":"<p>I am new to spring boot. I want to validator check so that the first name and last name cannot be equal. I don't know my code is correct or wrong for the LastNameValidator.java. I use the user object instead of just the last name to check and I get the error. No validator could be found for constraint 'com.example.workbook31.LastName' validating type 'java.lang.String'. Check configuration for 'lastName'.</p>\n<p>My LastNameValidator.java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.workbook31;\n\nimport jakarta.validation.ConstraintValidator;\nimport jakarta.validation.ConstraintValidatorContext;\n\npublic class LastNameValidator implements ConstraintValidator&lt;LastName, User&gt; {\n    @Override\n    public boolean isValid(User user, ConstraintValidatorContext context){\n        if(user.getFirstName() != user.getLastName() ){\n            return true;\n        }\n        return false;\n    }\n    \n}\n</code></pre>\n<p>My LastName.java code</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.workbook31;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport jakarta.validation.Constraint;\nimport jakarta.validation.Payload;\n\n@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.RUNTIME)\n@Constraint(validatedBy = LastNameValidator.class)\npublic @interface LastName {\n    String message() default &quot;First Name cannot equal to Last Name&quot;;\n    Class&lt;?&gt;[] groups() default {};\n    Class&lt;? extends Payload&gt;[] payload() default {};\n    \n}\n</code></pre>\n<p>My ApplicationController.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.workbook31;\n\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\n\nimport jakarta.validation.Valid;\n\n@Controller\npublic class ApplicationController {\n    \n    List&lt;User&gt; users = new ArrayList&lt;&gt;();\n\n    @GetMapping(&quot;/&quot;)\n    public String getForm(Model model,@RequestParam(required=false)String id){ \n        int index = getIndexFromId(id);\n        model.addAttribute(&quot;user&quot;, index == -1000 ? new User(): users.get(index));\n        return &quot;sign-up&quot;;\n    }\n    \n    @PostMapping(&quot;/submitForm&quot;)\n    public String handleSubmit(@Valid User user, BindingResult result){\n        int index = getIndexFromId(user.getId());\n        if(result.hasErrors()){\n            return &quot;sign-up&quot;;\n        }\n        \n        if(index == -1000){\n            users.add(user);\n        }else {\n            users.set(index,user);\n        }\n       \n        return &quot;redirect:/result&quot;;\n    }\n    \n    @GetMapping(&quot;/result&quot;)\n    public String getResult(Model model){\n        model.addAttribute(&quot;users&quot;, users);\n        return &quot;result&quot;;\n    }\n\n    public Integer getIndexFromId(String id){\n        for(int i=0;i&lt;users.size();i++){\n            if(users.get(i).getId().equals(id)){\n                return i;\n            }\n        }\n        return -1000;\n}\n\n}\n</code></pre>\n<p>My User.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.workbook31;\n\nimport org.springframework.format.annotation.DateTimeFormat;\n\nimport jakarta.validation.constraints.Email;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.Past;\nimport jakarta.validation.constraints.Size;\n\nimport java.util.Date;\nimport java.util.UUID;\n\n\npublic class User {\n    @NotBlank(message = &quot;First name cannot be blank&quot;)\n    @Size(min=2, message=&quot;First name is too short&quot;)\n    private String firstName;\n    \n    @NotBlank(message = &quot;First name cannot be blank&quot;)\n    @Size(min=2, message=&quot;First name is too short&quot;)\n    @LastName\n    private String lastName;\n    \n    @NotBlank(message = &quot;Username cannot be blank&quot;)\n    @Size(min=7, message= &quot;Username must at least be 7 characters&quot;)\n    private String userName;\n    \n    @Email(message = &quot;Invalid Email&quot;)\n    private String email;\n    \n    @Past(message = &quot;date of birth must be in the past&quot;)\n    @DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)\n    private Date dateOfBirth;\n    private String id;\n    \n    public User() {\n        this.id = UUID.randomUUID().toString();\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getUserName() {\n        return userName;\n    }\n\n    public void setUserName(String userName) {\n        this.userName = userName;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public Date getDateOfBirth() {\n        return dateOfBirth;\n    }\n\n    public void setDateOfBirth(Date dateOfBirth) {\n        this.dateOfBirth = dateOfBirth;\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n      \n    \n    \n}\n</code></pre>\n<p>My Application.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.workbook31;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>My sign-up.html</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;title&gt;Sign Up&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; th:href=&quot;@{/form-stylesheet.css}&quot;&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=&quot;container&quot;&gt;\n        &lt;h2&gt;Javagram&lt;/h2&gt;\n        &lt;form method=&quot;post&quot; th:object=&quot;${user}&quot; th:action=&quot;@{/submitForm}&quot;&gt;\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{firstName}&quot;&gt;&lt;/p&gt;\n            &lt;input type=&quot;text&quot; placeholder=&quot;First Name&quot; th:field=&quot;*{firstName}&quot;&gt;\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{lastName}&quot;&gt;&lt;/p&gt;\n            &lt;input type=&quot;text&quot; placeholder=&quot;Last Name&quot; th:field=&quot;*{lastName}&quot;&gt;\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{userName}&quot;&gt;&lt;/p&gt;\n            &lt;input type=&quot;text&quot; placeholder=&quot;Username&quot; th:field=&quot;*{userName}&quot; &gt;\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{email}&quot;&gt;&lt;/p&gt;\n            &lt;input type=&quot;text&quot; placeholder=&quot;Email&quot; th:field=&quot;*{email}&quot;&gt;\n            &lt;p style=&quot;font-weight: bold;&quot;&gt;Date of Birth&lt;/p&gt;\n            &lt;input type=&quot;date&quot; th:field=&quot;*{dateOfBirth}&quot; &gt;\n            &lt;p style=&quot;color:red&quot; th:errors =&quot;*{dateOfBirth}&quot;&gt;&lt;/p&gt;\n            &lt;input type=&quot;hidden&quot; th:field=&quot;*{id}&quot; &gt;\n            &lt;br&gt;&lt;br&gt;\n            &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>My pom</p>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","ssl","tls1.3"],"comments":[{"owner":{"account_id":22112469,"reputation":74,"user_id":16367144,"display_name":"SquidXTV"},"score":2,"creation_date":1683630245,"post_id":76208273,"comment_id":134392785,"body_markdown":"based on this specification: https://docs.oracle.com/en/java/javase/19/docs/specs/security/standard-names.html#sslcontext-algorithms there is no string for latest version","body":"based on this specification: <a href=\"https://docs.oracle.com/en/java/javase/19/docs/specs/security/standard-names.html#sslcontext-algorithms\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/19/docs/specs/security/&hellip;</a> there is no string for latest version"},{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":0,"creation_date":1683646013,"post_id":76208273,"comment_id":134396821,"body_markdown":"@SquidXTV Yes, this I why I wrote *simulate*.","body":"@SquidXTV Yes, this I why I wrote <i>simulate</i>."},{"owner":{"account_id":8493198,"reputation":11341,"user_id":6368697,"display_name":"Patrick Mevzek"},"score":0,"creation_date":1683651395,"post_id":76208273,"comment_id":134398140,"body_markdown":"And what if next version, if that happens, is TLS2? Or TLS42? Or TLS 1.11? Your code will seem to work but won&#39;t really use the &quot;latest&quot; or best version. Today, there is really no reason to use anything else than 1.3, and I believe it is best to just hardcode that (if you can be 100% sure to connect only to hosts not requiring anything else). Separate: there is no introspection possible in that library to just know what is defined?","body":"And what if next version, if that happens, is TLS2? Or TLS42? Or TLS 1.11? Your code will seem to work but won&#39;t really use the &quot;latest&quot; or best version. Today, there is really no reason to use anything else than 1.3, and I believe it is best to just hardcode that (if you can be 100% sure to connect only to hosts not requiring anything else). Separate: there is no introspection possible in that library to just know what is defined?"}],"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683627617,"creation_date":1683627617,"question_id":76208273,"body_markdown":"Today, I write: `SSLContext.getInstance(&quot;TLSv1.3&quot;)`, but I would prefer something like: `SSLContext.getInstance(&quot;TLSvLatest&quot;)`.\r\n\r\nI cannot find a direct way using the existing API/ctor.  Is this possible to simulate?\r\n\r\nOne hacky idea:\r\n\r\n    private static SSLContext\r\n    _getSSLContextTLSLatest()\r\n    throws NoSuchAlgorithmException\r\n    {\r\n        for (int i = 9; i &gt;= 3; --i)\r\n        {\r\n            final String protocol = &quot;TLSv1.&quot; + i;\r\n            try {\r\n                final SSLContext x = SSLContext.getInstance(protocol);\r\n                return x;\r\n            }\r\n            catch (NoSuchAlgorithmException e)\r\n            {\r\n                // do nothing\r\n            }\r\n        }\r\n        throw new NoSuchAlgorithmException(&quot;SSLContext: Failed to final TLS latest&quot;);\r\n    }\r\n\r\nNote: Please re-tag this question if better tags can be used.","title":"SSLContext.getInstance(String): Is there a way to always get the latest TLS?","body":"<p>Today, I write: <code>SSLContext.getInstance(&quot;TLSv1.3&quot;)</code>, but I would prefer something like: <code>SSLContext.getInstance(&quot;TLSvLatest&quot;)</code>.</p>\n<p>I cannot find a direct way using the existing API/ctor.  Is this possible to simulate?</p>\n<p>One hacky idea:</p>\n<pre><code>private static SSLContext\n_getSSLContextTLSLatest()\nthrows NoSuchAlgorithmException\n{\n    for (int i = 9; i &gt;= 3; --i)\n    {\n        final String protocol = &quot;TLSv1.&quot; + i;\n        try {\n            final SSLContext x = SSLContext.getInstance(protocol);\n            return x;\n        }\n        catch (NoSuchAlgorithmException e)\n        {\n            // do nothing\n        }\n    }\n    throw new NoSuchAlgorithmException(&quot;SSLContext: Failed to final TLS latest&quot;);\n}\n</code></pre>\n<p>Note: Please re-tag this question if better tags can be used.</p>\n"},{"tags":["java","sql","mysql","glassfish","mysql-connector"],"answers":[{"comments":[{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682241919,"post_id":76084009,"comment_id":134181583,"body_markdown":"Few questions:\n1) What&#39;s the alternative of sqljdbc for mysql?\n2) Do I need to place all jars into /lib?","body":"Few questions: 1) What&#39;s the alternative of sqljdbc for mysql? 2) Do I need to place all jars into /lib?"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1682242199,"post_id":76084009,"comment_id":134181609,"body_markdown":"1) as per my answer: mysql-connector-j.jar - you can pull the v8.0.33 from the link. You may need an older version 2) yes","body":"1) as per my answer: mysql-connector-j.jar - you can pull the v8.0.33 from the link. You may need an older version 2) yes"},{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682242426,"post_id":76084009,"comment_id":134181636,"body_markdown":"Still not fixed. Same error: Ping Connection Pool failed for banksmart. Class name is wrong or classpath is not set for : com.mysql.cj.jdbc.MysqlXADataSource Please check the server.log for more details.","body":"Still not fixed. Same error: Ping Connection Pool failed for banksmart. Class name is wrong or classpath is not set for : com.mysql.cj.jdbc.MysqlXADataSource Please check the server.log for more details."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1682242883,"post_id":76084009,"comment_id":134181690,"body_markdown":"FInd out which lib folder in your application server jars should go. It&#39;s not lib/ext. It may be higher than /home/banksmart/glassfish4/glassfish/domains/domain1/lib. Application server may need a restart, or at least the domain.","body":"FInd out which lib folder in your application server jars should go. It&#39;s not lib/ext. It may be higher than /home/banksmart/glassfish4/glassfish/domains/domain1/lib. Application server may need a restart, or at least the domain."},{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682243247,"post_id":76084009,"comment_id":134181722,"body_markdown":"When I try to restart the domain, I get this error: [banksmart@localhost bin]$ ./asadmin restart-domain domain1\nNCLS-ADMIN-00010\nServer is not running, will attempt to start it...\nThere is a process already using the admin port 4848 -- it probably is another instance of a GlassFish server.\nCommand restart-domain failed.","body":"When I try to restart the domain, I get this error: [banksmart@localhost bin]$ ./asadmin restart-domain domain1 NCLS-ADMIN-00010 Server is not running, will attempt to start it... There is a process already using the admin port 4848 -- it probably is another instance of a GlassFish server. Command restart-domain failed."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1682243591,"post_id":76084009,"comment_id":134181758,"body_markdown":"Before you restart, stop it first","body":"Before you restart, stop it first"},{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682243812,"post_id":76084009,"comment_id":134181797,"body_markdown":"I get server not running when I try to stop it: `NCLS-ADMIN-00010\nCLI306: Warning - The server located at /home/banksmart/glassfish4/glassfish/domains/domain1 is not running.\nCommand stop-domain executed successfully.`","body":"I get server not running when I try to stop it: <code>NCLS-ADMIN-00010 CLI306: Warning - The server located at &#47;home&#47;banksmart&#47;glassfish4&#47;glassfish&#47;domains&#47;domain1 is not running. Command stop-domain executed successfully.</code>"},{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682243870,"post_id":76084009,"comment_id":134181799,"body_markdown":"http://192.168.169.128:8080/ but glassfish server is running at this port.","body":"<a href=\"http://192.168.169.128:8080/\" rel=\"nofollow noreferrer\">192.168.169.128:8080</a> but glassfish server is running at this port."},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1682244066,"post_id":76084009,"comment_id":134181829,"body_markdown":"Maybe a new question - how do i restart a glassfish domain server?","body":"Maybe a new question - how do i restart a glassfish domain server?"},{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682244595,"post_id":76084009,"comment_id":134181880,"body_markdown":"I restarted the glassfish domain server. Still the same error applies.`Ping Connection Pool failed for banksmart. Class name is wrong or classpath is not set for : com.mysql.cj.jdbc.MysqlXADataSource Please check the server.log for more details.\n`","body":"I restarted the glassfish domain server. Still the same error applies.<code>Ping Connection Pool failed for banksmart. Class name is wrong or classpath is not set for : com.mysql.cj.jdbc.MysqlXADataSource Please check the server.log for more details. </code>"},{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":0,"creation_date":1682245289,"post_id":76084009,"comment_id":134181942,"body_markdown":"It&#39;s the right jar - see https://jar-download.com/artifacts/mysql/mysql-connector-java/8.0.11/source-code/com/mysql/cj/jdbc/MysqlXADataSource.java. I have no idea why you classpath won&#39;t pick it up. That&#39;s where you need to be googling.","body":"It&#39;s the right jar - see <a href=\"https://jar-download.com/artifacts/mysql/mysql-connector-java/8.0.11/source-code/com/mysql/cj/jdbc/MysqlXADataSource.java\" rel=\"nofollow noreferrer\">jar-download.com/artifacts/mysql/mysql-connector-java/8.0.11&zwnj;&#8203;/&hellip;</a>. I have no idea why you classpath won&#39;t pick it up. That&#39;s where you need to be googling."},{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682250889,"post_id":76084009,"comment_id":134182532,"body_markdown":"There&#39;s no answer on google, looks like I&#39;m the only one with this issue.","body":"There&#39;s no answer on google, looks like I&#39;m the only one with this issue."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682255397,"post_id":76084009,"comment_id":134183087,"body_markdown":"Check the ping checkbox in the console and save the changes.","body":"Check the ping checkbox in the console and save the changes."},{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682258739,"post_id":76084009,"comment_id":134183529,"body_markdown":"@SamuelMarchant that step isn&#39;t working","body":"@SamuelMarchant that step isn&#39;t working"},{"owner":{"display_name":"user5456746"},"score":0,"creation_date":1682264195,"post_id":76084009,"comment_id":134184289,"body_markdown":"The issue is fixed! Finally! Ping succeeded.","body":"The issue is fixed! Finally! Ping succeeded."}],"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":15,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1682241127,"creation_date":1682241127,"answer_id":76084009,"question_id":76083846,"body_markdown":"Two problems.\r\n\r\nThe jarfile is in the wrong place. Should be in the /lib not lib/ext.\r\n\r\nYou have the wrong jar. You need [mysql-connector-j-8.0.33.jar][1] or possibly an older version. sqljdbc is for ms sqlserver.\r\n\r\nSomething else that looks off is that your Resource Type is `XADataSource` but you have selected a non XA driver class. They need to match. I suspect you want `com.mysql.cj.jdbc.MysqlXADataSource`\r\n\r\n\r\n  [1]: https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.0.33/mysql-connector-j-8.0.33.jar","title":"How to set classpath for com.mysql.cj.jdbc.MysqlXADataSource","body":"<p>Two problems.</p>\n<p>The jarfile is in the wrong place. Should be in the /lib not lib/ext.</p>\n<p>You have the wrong jar. You need <a href=\"https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.0.33/mysql-connector-j-8.0.33.jar\" rel=\"nofollow noreferrer\">mysql-connector-j-8.0.33.jar</a> or possibly an older version. sqljdbc is for ms sqlserver.</p>\n<p>Something else that looks off is that your Resource Type is <code>XADataSource</code> but you have selected a non XA driver class. They need to match. I suspect you want <code>com.mysql.cj.jdbc.MysqlXADataSource</code></p>\n"},{"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1682333164,"post_id":76085761,"comment_id":134193122,"body_markdown":"No criticism intended , that&#39;s an old grubby fix aka quick fix method. I know those well, older servers usually use &quot;shared libraries&quot; e.g. &quot;commons/lib&quot; for all the domains in the one server and JVM.","body":"No criticism intended , that&#39;s an old grubby fix aka quick fix method. I know those well, older servers usually use &quot;shared libraries&quot; e.g. &quot;commons/lib&quot; for all the domains in the one server and JVM."}],"tags":[],"owner":{"display_name":"user5456746"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682569577,"creation_date":1682264164,"answer_id":76085761,"question_id":76083846,"body_markdown":"I put everything mentioned in another answer so I recommend you follow that answer. \r\n\r\nThe most important things to do are:\r\n\r\n1) Include all those `.jar` files in both `lib` directories that exist.\r\n2) Add a new property in JDBC connection pool settings: `&quot;useSSL&quot;` and set its value to `false`.\r\n\r\nAfter you do this, you&#39;ll get some obvious error messages, but those shouldn&#39;t be that hard to fix.","title":"How to set classpath for com.mysql.cj.jdbc.MysqlXADataSource","body":"<p>I put everything mentioned in another answer so I recommend you follow that answer.</p>\n<p>The most important things to do are:</p>\n<ol>\n<li>Include all those <code>.jar</code> files in both <code>lib</code> directories that exist.</li>\n<li>Add a new property in JDBC connection pool settings: <code>&quot;useSSL&quot;</code> and set its value to <code>false</code>.</li>\n</ol>\n<p>After you do this, you'll get some obvious error messages, but those shouldn't be that hard to fix.</p>\n"}],"owner":{"display_name":"user5456746"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76084009,"answer_count":2,"score":1,"last_activity_date":1683627580,"creation_date":1682238776,"question_id":76083846,"body_markdown":"I want to deploy application called &quot;banksmart&quot; in glassfish application server.\r\n\r\nThis step is done for database connection for banksmart deployment.\r\n\r\nI am getting the following error when I ping in glassfish from here:\r\n\r\n![](https://i.imgur.com/p3bYuDf.png)\r\n\r\n\r\n    Ping Connection Pool failed for banksmart. Class name is wrong or classpath is not set for : com.mysql.cj.jdbc.MysqlXADataSource Please check the server.log for more details.\r\n\r\nHere&#39;s the JDBC Resources settings:\r\n\r\n![](https://i.imgur.com/bVV9aFt.png)\r\n\r\nHere&#39;s the JDBC connection pools settings:\r\n\r\n![](https://i.imgur.com/REafiPE.png)\r\n![](https://i.imgur.com/7QHpvmx.png)\r\n\r\nHere&#39;s the server.log logfile.\r\n\r\n    [2023-04-23T17:53:59.428+0545] [glassfish 4.1] [SEVERE] [jdbc.exc_cnfe_ds] [javax.enterprise.resource.resourceadapter.com.sun.gjc.util] [tid: _ThreadID=312 _ThreadName=admin-listener(45)] [timeMillis: 1682251739428] [levelValue: 1000] [[\r\n      RAR5099 : Wrong class name or classpath for Datasource Object\r\n    java.lang.ClassNotFoundException: com.mysql.cj.jdbc.MysqlXADataSource\r\n            at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n            at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n            at java.lang.Class.forName0(Native Method)\r\n            at java.lang.Class.forName(Class.java:348)\r\n            at com.sun.gjc.common.DataSourceObjectBuilder.getDataSourceObject(DataSourceObjectBuilder.java:285)\r\n            at com.sun.gjc.common.DataSourceObjectBuilder.constructDataSourceObject(DataSourceObjectBuilder.java:114)\r\n            at com.sun.gjc.spi.ManagedConnectionFactoryImpl.getDataSource(ManagedConnectionFactoryImpl.java:1300)\r\n            at com.sun.gjc.spi.DSManagedConnectionFactory.getDataSource(DSManagedConnectionFactory.java:163)\r\n            at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:102)\r\n            at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.getUnpooledConnection(ConnectorConnectionPoolAdminServiceImpl.java:702)\r\n            at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.testConnectionPool(ConnectorConnectionPoolAdminServiceImpl.java:431)\r\n            at com.sun.enterprise.connectors.ConnectorRuntime.pingConnectionPool(ConnectorRuntime.java:1162)\r\n            at org.glassfish.connectors.admin.cli.PingConnectionPool.execute(PingConnectionPool.java:143)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:539)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:535)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at javax.security.auth.Subject.doAs(Subject.java:360)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl$2.execute(CommandRunnerImpl.java:534)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:565)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:557)\r\n            at java.security.AccessController.doPrivileged(Native Method)\r\n            at javax.security.auth.Subject.doAs(Subject.java:360)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:556)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1464)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1300(CommandRunnerImpl.java:109)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1846)\r\n            at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1722)\r\n            at org.glassfish.admin.rest.utils.ResourceUtil.runCommand(ResourceUtil.java:253)\r\n            at org.glassfish.admin.rest.utils.ResourceUtil.runCommand(ResourceUtil.java:231)\r\n            at org.glassfish.admin.rest.resources.TemplateExecCommand.executeCommandLegacyFormat(TemplateExecCommand.java:157)\r\n            at org.glassfish.admin.rest.resources.TemplateCommandGetResource.processGetLegacyFormat(TemplateCommandGetResource.java:75)\r\n            at sun.reflect.GeneratedMethodAccessor152.invoke(Unknown Source)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)\r\n            at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:151)\r\n            at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:171)\r\n            at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:152)\r\n            at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:104)\r\n            at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:387)\r\n            at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:331)\r\n            at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:103)\r\n            at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:271)\r\n            at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\r\n            at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\r\n            at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n            at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n            at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\r\n            at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:297)\r\n            at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:254)\r\n            at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1028)\r\n            at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpContainer.service(GrizzlyHttpContainer.java:365)\r\n            at org.glassfish.admin.rest.adapter.RestAdapter$2.service(RestAdapter.java:316)\r\n            at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:179)\r\n            at com.sun.enterprise.v3.services.impl.ContainerMapper$HttpHandlerCallable.call(ContainerMapper.java:459)\r\n            at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:167)\r\n            at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:201)\r\n            at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:175)\r\n            at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:235)\r\n            at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)\r\n            at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)\r\n            at org.glassfish.grizzly.portunif.PUFilter.handleRead(PUFilter.java:231)\r\n            at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)\r\n            at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)\r\n            at org.glassfish.grizzly.portunif.PUFilter.handleRead(PUFilter.java:231)\r\n            at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)\r\n            at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)\r\n            at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)\r\n            at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:561)\r\n            at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)\r\n            at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:117)\r\n            at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:56)\r\n            at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:137)\r\n            at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:565)\r\n            at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:545)\r\n            at java.lang.Thread.run(Thread.java:750)\r\n    ]]\r\n    \r\n    [2023-04-23T17:53:59.449+0545] [glassfish 4.1] [WARNING] [test.connection.pool.failed] [javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service] [tid: _ThreadID=312 _ThreadName=admin-listener(45)] [timeMillis: 1682251739449] [levelValue: 900] [[\r\n      RAR8054: Exception while creating an unpooled [test] connection for pool [ banksmart ], Class name is wrong or classpath is not set for : com.mysql.cj.jdbc.MysqlXADataSource]]\r\n    \r\n    [2023-04-23T17:53:59.459+0545] [glassfish 4.1] [SEVERE] [] [org.glassfish.admingui] [tid: _ThreadID=311 _ThreadName=admin-listener(44)] [timeMillis: 1682251739459] [levelValue: 1000] [[\r\n      RestResponse.getResponse() gives FAILURE.  endpoint = &#39;https://localhost:4848/management/domain/resources/ping-connection-pool.json&#39;; attrs = &#39;{id=banksmart}&#39;]]\r\n\r\n\r\n\r\nHow do I fix this error?\r\n\r\n","title":"How to set classpath for com.mysql.cj.jdbc.MysqlXADataSource","body":"<p>I want to deploy application called &quot;banksmart&quot; in glassfish application server.</p>\n<p>This step is done for database connection for banksmart deployment.</p>\n<p>I am getting the following error when I ping in glassfish from here:</p>\n<p><img src=\"https://i.imgur.com/p3bYuDf.png\" alt=\"\" /></p>\n<pre><code>Ping Connection Pool failed for banksmart. Class name is wrong or classpath is not set for : com.mysql.cj.jdbc.MysqlXADataSource Please check the server.log for more details.\n</code></pre>\n<p>Here's the JDBC Resources settings:</p>\n<p><img src=\"https://i.imgur.com/bVV9aFt.png\" alt=\"\" /></p>\n<p>Here's the JDBC connection pools settings:</p>\n<p><img src=\"https://i.imgur.com/REafiPE.png\" alt=\"\" />\n<img src=\"https://i.imgur.com/7QHpvmx.png\" alt=\"\" /></p>\n<p>Here's the server.log logfile.</p>\n<pre><code>[2023-04-23T17:53:59.428+0545] [glassfish 4.1] [SEVERE] [jdbc.exc_cnfe_ds] [javax.enterprise.resource.resourceadapter.com.sun.gjc.util] [tid: _ThreadID=312 _ThreadName=admin-listener(45)] [timeMillis: 1682251739428] [levelValue: 1000] [[\n  RAR5099 : Wrong class name or classpath for Datasource Object\njava.lang.ClassNotFoundException: com.mysql.cj.jdbc.MysqlXADataSource\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:348)\n        at com.sun.gjc.common.DataSourceObjectBuilder.getDataSourceObject(DataSourceObjectBuilder.java:285)\n        at com.sun.gjc.common.DataSourceObjectBuilder.constructDataSourceObject(DataSourceObjectBuilder.java:114)\n        at com.sun.gjc.spi.ManagedConnectionFactoryImpl.getDataSource(ManagedConnectionFactoryImpl.java:1300)\n        at com.sun.gjc.spi.DSManagedConnectionFactory.getDataSource(DSManagedConnectionFactory.java:163)\n        at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:102)\n        at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.getUnpooledConnection(ConnectorConnectionPoolAdminServiceImpl.java:702)\n        at com.sun.enterprise.connectors.service.ConnectorConnectionPoolAdminServiceImpl.testConnectionPool(ConnectorConnectionPoolAdminServiceImpl.java:431)\n        at com.sun.enterprise.connectors.ConnectorRuntime.pingConnectionPool(ConnectorRuntime.java:1162)\n        at org.glassfish.connectors.admin.cli.PingConnectionPool.execute(PingConnectionPool.java:143)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:539)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:535)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:360)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl$2.execute(CommandRunnerImpl.java:534)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:565)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:557)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at javax.security.auth.Subject.doAs(Subject.java:360)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:556)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1464)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1300(CommandRunnerImpl.java:109)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1846)\n        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1722)\n        at org.glassfish.admin.rest.utils.ResourceUtil.runCommand(ResourceUtil.java:253)\n        at org.glassfish.admin.rest.utils.ResourceUtil.runCommand(ResourceUtil.java:231)\n        at org.glassfish.admin.rest.resources.TemplateExecCommand.executeCommandLegacyFormat(TemplateExecCommand.java:157)\n        at org.glassfish.admin.rest.resources.TemplateCommandGetResource.processGetLegacyFormat(TemplateCommandGetResource.java:75)\n        at sun.reflect.GeneratedMethodAccessor152.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory$1.invoke(ResourceMethodInvocationHandlerFactory.java:81)\n        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:151)\n        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:171)\n        at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$ResponseOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:152)\n        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:104)\n        at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:387)\n        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:331)\n        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:103)\n        at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:271)\n        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:271)\n        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:267)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:267)\n        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:297)\n        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:254)\n        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:1028)\n        at org.glassfish.jersey.grizzly2.httpserver.GrizzlyHttpContainer.service(GrizzlyHttpContainer.java:365)\n        at org.glassfish.admin.rest.adapter.RestAdapter$2.service(RestAdapter.java:316)\n        at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:179)\n        at com.sun.enterprise.v3.services.impl.ContainerMapper$HttpHandlerCallable.call(ContainerMapper.java:459)\n        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:167)\n        at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:201)\n        at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:175)\n        at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:235)\n        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)\n        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)\n        at org.glassfish.grizzly.portunif.PUFilter.handleRead(PUFilter.java:231)\n        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)\n        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)\n        at org.glassfish.grizzly.portunif.PUFilter.handleRead(PUFilter.java:231)\n        at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:119)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:284)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:201)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:133)\n        at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:112)\n        at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:77)\n        at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:561)\n        at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:112)\n        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:117)\n        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.access$100(WorkerThreadIOStrategy.java:56)\n        at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:137)\n        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:565)\n        at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:545)\n        at java.lang.Thread.run(Thread.java:750)\n]]\n\n[2023-04-23T17:53:59.449+0545] [glassfish 4.1] [WARNING] [test.connection.pool.failed] [javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service] [tid: _ThreadID=312 _ThreadName=admin-listener(45)] [timeMillis: 1682251739449] [levelValue: 900] [[\n  RAR8054: Exception while creating an unpooled [test] connection for pool [ banksmart ], Class name is wrong or classpath is not set for : com.mysql.cj.jdbc.MysqlXADataSource]]\n\n[2023-04-23T17:53:59.459+0545] [glassfish 4.1] [SEVERE] [] [org.glassfish.admingui] [tid: _ThreadID=311 _ThreadName=admin-listener(44)] [timeMillis: 1682251739459] [levelValue: 1000] [[\n  RestResponse.getResponse() gives FAILURE.  endpoint = 'https://localhost:4848/management/domain/resources/ping-connection-pool.json'; attrs = '{id=banksmart}']]\n</code></pre>\n<p>How do I fix this error?</p>\n"},{"tags":["java","file-io"],"answers":[{"comments":[{"owner":{"account_id":35617,"reputation":1555,"user_id":100939,"accept_rate":75,"display_name":"mikek"},"score":0,"creation_date":1245667439,"post_id":1026490,"comment_id":836358,"body_markdown":"Was about to write the same thing. As a rule, deleteOnExit() is rather unreliable. I would do the above, but also check the return value from temp.delete() to make sure that all locks are removed.","body":"Was about to write the same thing. As a rule, deleteOnExit() is rather unreliable. I would do the above, but also check the return value from temp.delete() to make sure that all locks are removed."},{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":1,"creation_date":1245667810,"post_id":1026490,"comment_id":836377,"body_markdown":"As Mike said, I would not rely on deleteOnExit(). Additionally the temporary file is kept until the end of the program-execution, even if no longer needed. On a server-application that can be a long time. So explicitly deleting the file is preferable.","body":"As Mike said, I would not rely on deleteOnExit(). Additionally the temporary file is kept until the end of the program-execution, even if no longer needed. On a server-application that can be a long time. So explicitly deleting the file is preferable."},{"owner":{"account_id":9178,"reputation":133593,"user_id":16853,"accept_rate":90,"display_name":"oxbow_lakes"},"score":0,"creation_date":1245670145,"post_id":1026490,"comment_id":836510,"body_markdown":"Can you delete the file from Windows Explorer (assuming you&#39;re using Windows)?","body":"Can you delete the file from Windows Explorer (assuming you&#39;re using Windows)?"},{"owner":{"account_id":43453,"reputation":16185,"user_id":127035,"accept_rate":71,"display_name":"ewan.chalmers"},"score":0,"creation_date":1441114117,"post_id":1026490,"comment_id":52540016,"body_markdown":"By attempting and failing to explicitly delete the tmp files I created, I identified a resource leak in my code (a PrintStream I didn&#39;t close).","body":"By attempting and failing to explicitly delete the tmp files I created, I identified a resource leak in my code (a PrintStream I didn&#39;t close)."}],"tags":[],"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"comment_count":4,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1245669076,"creation_date":1245667207,"answer_id":1026490,"question_id":1026479,"body_markdown":"Add the following code (after you have done your operations with the file):\r\n\r\n    buffout.close();\r\n    fileoutput.close();\r\n    temp.delete();\r\n\r\nAs long as some stream on the file is open, it is locked (at least on the windows-implementation of the JVM). So it cannot be deleted.\r\n\r\nIt is good practice always to check if all opened streams get closed again after usage, because this is a bad memory-leak-situation. Your application can even eat up all available file-handles, that can lead to an unusable system.","title":"delete temporary file in java","body":"<p>Add the following code (after you have done your operations with the file):</p>\n\n<pre><code>buffout.close();\nfileoutput.close();\ntemp.delete();\n</code></pre>\n\n<p>As long as some stream on the file is open, it is locked (at least on the windows-implementation of the JVM). So it cannot be deleted.</p>\n\n<p>It is good practice always to check if all opened streams get closed again after usage, because this is a bad memory-leak-situation. Your application can even eat up all available file-handles, that can lead to an unusable system.</p>\n"},{"comments":[{"owner":{"account_id":9178,"reputation":133593,"user_id":16853,"accept_rate":90,"display_name":"oxbow_lakes"},"score":0,"creation_date":1245667735,"post_id":1026493,"comment_id":836373,"body_markdown":"deleteOnExit adds a shutdown hook","body":"deleteOnExit adds a shutdown hook"}],"tags":[],"owner":{"account_id":15923,"reputation":28380,"user_id":34161,"accept_rate":83,"display_name":"Yoni Roit"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1245667288,"creation_date":1245667288,"answer_id":1026493,"question_id":1026479,"body_markdown":"There&#39;s a [bug][1] saying that if the file is open by filewriter or anything, it won&#39;t be deleted. On windows. Check if you close your file writers.\r\n\r\nAnother workaround would be installing a [ShutdownHook][2] which would manually delete the file.\r\n\r\n\r\n  [1]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4171239\r\n  [2]: https://bugs.java.com/bugdatabase/view_bug?bug_id=4171239","title":"delete temporary file in java","body":"<p>There's a <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4171239\" rel=\"nofollow noreferrer\">bug</a> saying that if the file is open by filewriter or anything, it won't be deleted. On windows. Check if you close your file writers.</p>\n<p>Another workaround would be installing a <a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=4171239\" rel=\"nofollow noreferrer\">ShutdownHook</a> which would manually delete the file.</p>\n"},{"comments":[{"owner":{"account_id":10987,"reputation":50685,"user_id":21005,"accept_rate":78,"display_name":"Mnementh"},"score":3,"creation_date":1245667963,"post_id":1026514,"comment_id":836387,"body_markdown":"deleteOnExit keeps the file until the program ends. If the program only executes one action and stops afterwards that may be OK, but on a server-application the tempfiles are kept this way for a long time, accumulate and possibly eating up your inodes and your disk-space.","body":"deleteOnExit keeps the file until the program ends. If the program only executes one action and stops afterwards that may be OK, but on a server-application the tempfiles are kept this way for a long time, accumulate and possibly eating up your inodes and your disk-space."},{"owner":{"account_id":9178,"reputation":133593,"user_id":16853,"accept_rate":90,"display_name":"oxbow_lakes"},"score":0,"creation_date":1245670098,"post_id":1026514,"comment_id":836507,"body_markdown":"In the question, the use of deleteOnExit is not inappropriate - we&#39;ve no idea what the specific usage pattern is. I would say that deleteOnExit is generally undesirable for a number of reasons (one being that it isn&#39;t reversible)","body":"In the question, the use of deleteOnExit is not inappropriate - we&#39;ve no idea what the specific usage pattern is. I would say that deleteOnExit is generally undesirable for a number of reasons (one being that it isn&#39;t reversible)"}],"tags":[],"owner":{"account_id":9178,"reputation":133593,"user_id":16853,"accept_rate":90,"display_name":"oxbow_lakes"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1245667630,"creation_date":1245667630,"answer_id":1026514,"question_id":1026479,"body_markdown":"You have to shut down a VM *cleanly* in order for the `deleteOnExit` to work properly (I suspect). On `UNIX` a `kill` would be a clean shutdown (i.e. the `ShutdownHooks` would be processed) whereas a `kill -9` would be more like a *force quit*.\r\n\r\n`deleteOnExit` definitely works for me!","title":"delete temporary file in java","body":"<p>You have to shut down a VM <em>cleanly</em> in order for the <code>deleteOnExit</code> to work properly (I suspect). On <code>UNIX</code> a <code>kill</code> would be a clean shutdown (i.e. the <code>ShutdownHooks</code> would be processed) whereas a <code>kill -9</code> would be more like a <em>force quit</em>.</p>\n\n<p><code>deleteOnExit</code> definitely works for me!</p>\n"},{"tags":[],"owner":{"account_id":14911716,"reputation":1,"user_id":10766998,"display_name":"vineetawaw kkklll"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544365074,"creation_date":1544364264,"answer_id":53693131,"question_id":1026479,"body_markdown":"Code to close the inpustream and outputstream:\r\n\r\n \r\n        FileInputStream in = new FileInputStream();\r\n        \r\n         ArrayList list_in = new ArrayList&lt;FileInputStream&gt;();\r\n    \r\n         list_in.add(in);\r\n    \r\n         FileOutputStream out = new FileOutputStream();\r\n    \r\n         ArrayList list_out = new ArrayList&lt;OutputputStream&gt;();\r\n           \r\n         list_in.add(out);\r\n    \r\n         public do_before_exit()\r\n         {\r\n          \r\n          for(int i=0;i&lt;list_in.size();i++)\r\n          {\r\n          FileInputStream in=(FileInputStream)list_in.get(i)\r\n           FileInputStream out=(FileInputStream)list_out.get(i)\r\n    \r\n          in.close()\r\n        out.close();\r\n       }\r\n    \r\n    }\r\n\r\n","title":"delete temporary file in java","body":"<p>Code to close the inpustream and outputstream:</p>\n\n<pre><code>    FileInputStream in = new FileInputStream();\n\n     ArrayList list_in = new ArrayList&lt;FileInputStream&gt;();\n\n     list_in.add(in);\n\n     FileOutputStream out = new FileOutputStream();\n\n     ArrayList list_out = new ArrayList&lt;OutputputStream&gt;();\n\n     list_in.add(out);\n\n     public do_before_exit()\n     {\n\n      for(int i=0;i&lt;list_in.size();i++)\n      {\n      FileInputStream in=(FileInputStream)list_in.get(i)\n       FileInputStream out=(FileInputStream)list_out.get(i)\n\n      in.close()\n    out.close();\n   }\n\n}\n</code></pre>\n"}],"owner":{"display_name":"sunil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39066,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":4,"score":25,"last_activity_date":1683626242,"creation_date":1245666979,"question_id":1026479,"body_markdown":"I&#39;m creating a temporary file in Java but I&#39;m unable to delete it. This is the code I have written:\r\n\r\n    temp = File.createTempFile(&quot;temp&quot;, &quot;.txt&quot;);\r\n    temp.deleteOnExit();\r\n    fileoutput = new FileWriter(temp);\r\n    buffout = new BufferedWriter(fileoutput);\r\n\r\n\r\n\r\n\r\n\r\n","title":"delete temporary file in java","body":"<p>I'm creating a temporary file in Java but I'm unable to delete it. This is the code I have written:</p>\n<pre><code>temp = File.createTempFile(&quot;temp&quot;, &quot;.txt&quot;);\ntemp.deleteOnExit();\nfileoutput = new FileWriter(temp);\nbuffout = new BufferedWriter(fileoutput);\n</code></pre>\n"},{"tags":["java","spring","http","spring-security","authorization"],"comments":[{"owner":{"account_id":12131022,"reputation":3,"user_id":14376766,"display_name":"tgoel-dev"},"score":0,"creation_date":1683595213,"post_id":76205217,"comment_id":134387369,"body_markdown":"I have added the JwtAuthenticationFilter to the post as well. Please let me know if there is any other class that will be helpful. Thanks","body":"I have added the JwtAuthenticationFilter to the post as well. Please let me know if there is any other class that will be helpful. Thanks"},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":0,"creation_date":1683599501,"post_id":76205217,"comment_id":134387753,"body_markdown":"What is your JDK version, Java language version, Spring Boot version?","body":"What is your JDK version, Java language version, Spring Boot version?"}],"answers":[{"tags":[],"owner":{"account_id":6067804,"reputation":38,"user_id":4737551,"display_name":"Aitor Gil"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683626185,"creation_date":1683626185,"answer_id":76208053,"question_id":76205217,"body_markdown":"In the **SecurityConfig** class, inside the **securityFilterChain** method, you are using the **&quot;denyAll()&quot;** method. With it, you are saying that all the aforementioned requests should be denied. Change the &quot;denyAll()&quot; to **&quot;authenticated()&quot;**.\r\n\r\nThe method would be as follows:\r\n\r\n```\r\n @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(publicEndpoints()).permitAll()\r\n                .requestMatchers(userEndpoints()).permitAll()\r\n                .requestMatchers(adminEndpoints()).hasRole(&quot;ADMIN&quot;)\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authenticationProvider(authProvider)\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .exceptionHandling()\r\n                .accessDeniedHandler((request, response, ex) -&gt; {\r\n                    System.out.println(&quot;Access Denied: &quot; + ex.getMessage());\r\n                    response.sendError(HttpServletResponse.SC_FORBIDDEN);\r\n                });\r\n\r\n        return http.build();\r\n    }\r\n```","title":"Spring Security: returning 403 Forbidden for all requests after successful authentication","body":"<p>In the <strong>SecurityConfig</strong> class, inside the <strong>securityFilterChain</strong> method, you are using the <strong>&quot;denyAll()&quot;</strong> method. With it, you are saying that all the aforementioned requests should be denied. Change the &quot;denyAll()&quot; to <strong>&quot;authenticated()&quot;</strong>.</p>\n<p>The method would be as follows:</p>\n<pre><code> @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(publicEndpoints()).permitAll()\n                .requestMatchers(userEndpoints()).permitAll()\n                .requestMatchers(adminEndpoints()).hasRole(&quot;ADMIN&quot;)\n                .anyRequest().authenticated()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authenticationProvider(authProvider)\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n                .exceptionHandling()\n                .accessDeniedHandler((request, response, ex) -&gt; {\n                    System.out.println(&quot;Access Denied: &quot; + ex.getMessage());\n                    response.sendError(HttpServletResponse.SC_FORBIDDEN);\n                });\n\n        return http.build();\n    }\n</code></pre>\n"}],"owner":{"account_id":12131022,"reputation":3,"user_id":14376766,"display_name":"tgoel-dev"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76208053,"answer_count":1,"score":0,"last_activity_date":1683626185,"creation_date":1683593686,"question_id":76205217,"body_markdown":"I wish to allow all users to login via JWT. Only logged in users are allowed to access the private endpoints. Nothing is being logged, not even as &quot;Access Denied&quot;. Here is my `SecurityConfig` configuration class. \r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\n@EnableMethodSecurity\r\npublic class SecurityConfig {\r\n\r\n    private final JwtAuthenticationFilter jwtAuthFilter;\r\n    private final AuthenticationProvider authProvider;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers(publicEndpoints()).permitAll()\r\n                .requestMatchers(userEndpoints()).permitAll()\r\n                .requestMatchers(adminEndpoints()).hasRole(&quot;ADMIN&quot;)\r\n                .anyRequest().denyAll()\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authenticationProvider(authProvider)\r\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\r\n                .exceptionHandling()\r\n                .accessDeniedHandler((request, response, ex) -&gt; {\r\n                    System.out.println(&quot;Access Denied: &quot; + ex.getMessage());\r\n                    response.sendError(HttpServletResponse.SC_FORBIDDEN);\r\n                });\r\n\r\n        return http.build();\r\n    }\r\n\r\n    private RequestMatcher userEndpoints() {\r\n        return new OrRequestMatcher(\r\n                new AntPathRequestMatcher(&quot;/u/**&quot;)\r\n        );\r\n    }\r\n\r\n    private RequestMatcher adminEndpoints() {\r\n        return new OrRequestMatcher(\r\n                new AntPathRequestMatcher(&quot;/admin/**&quot;)\r\n        );\r\n    }\r\n\r\n    private RequestMatcher publicEndpoints() {\r\n        return new OrRequestMatcher(\r\n                new AntPathRequestMatcher(&quot;/user/register&quot;),\r\n                new AntPathRequestMatcher(&quot;/user/signin&quot;)\r\n        );\r\n    }\r\n}  \r\n```\r\n\r\nHere is the JwtAuthenticationFilter:\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtService jwtService;\r\n    private final UserDetailsService userDetailsService;\r\n\r\n    @Override\r\n    protected void doFilterInternal(@NonNull HttpServletRequest request,\r\n                                    @NonNull HttpServletResponse response,\r\n                                    @NonNull FilterChain filterChain) throws ServletException, IOException {\r\n\r\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n\r\n        if(authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\r\n            filterChain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        final String jwtToken = authHeader.substring(7); // removes &quot;Bearer &quot; string.\r\n        final String username = jwtService.extractUsername(jwtToken);\r\n\r\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\r\n\r\n            if (jwtService.isTokenValid(jwtToken, userDetails)) {\r\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\r\n                        userDetails, null, userDetails.getAuthorities());\r\n\r\n                authToken.setDetails(new WebAuthenticationDetailsSource()\r\n                        .buildDetails(request));\r\n                SecurityContextHolder.getContext().setAuthentication(authToken);\r\n            }\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```\r\n\r\n\r\nCurrently, with the above configuration, I am getting no logs whatsoever. I tried changing the security configuration to `.requestMatchers(userEndpoints()).hasRole(&quot;USER&quot;)` which still returned 403 Forbidden. But this time, there was a log saying &quot;Access Denied: Access Denied&quot;.\r\n\r\nI have also tried using `@PreAuthorize(&quot;hasRole(&#39;USER&#39;)&quot;)` for the controller method being called, but that also did nothing. ","title":"Spring Security: returning 403 Forbidden for all requests after successful authentication","body":"<p>I wish to allow all users to login via JWT. Only logged in users are allowed to access the private endpoints. Nothing is being logged, not even as &quot;Access Denied&quot;. Here is my <code>SecurityConfig</code> configuration class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\n@EnableMethodSecurity\npublic class SecurityConfig {\n\n    private final JwtAuthenticationFilter jwtAuthFilter;\n    private final AuthenticationProvider authProvider;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.csrf().disable()\n                .authorizeHttpRequests()\n                .requestMatchers(publicEndpoints()).permitAll()\n                .requestMatchers(userEndpoints()).permitAll()\n                .requestMatchers(adminEndpoints()).hasRole(&quot;ADMIN&quot;)\n                .anyRequest().denyAll()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authenticationProvider(authProvider)\n                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n                .exceptionHandling()\n                .accessDeniedHandler((request, response, ex) -&gt; {\n                    System.out.println(&quot;Access Denied: &quot; + ex.getMessage());\n                    response.sendError(HttpServletResponse.SC_FORBIDDEN);\n                });\n\n        return http.build();\n    }\n\n    private RequestMatcher userEndpoints() {\n        return new OrRequestMatcher(\n                new AntPathRequestMatcher(&quot;/u/**&quot;)\n        );\n    }\n\n    private RequestMatcher adminEndpoints() {\n        return new OrRequestMatcher(\n                new AntPathRequestMatcher(&quot;/admin/**&quot;)\n        );\n    }\n\n    private RequestMatcher publicEndpoints() {\n        return new OrRequestMatcher(\n                new AntPathRequestMatcher(&quot;/user/register&quot;),\n                new AntPathRequestMatcher(&quot;/user/signin&quot;)\n        );\n    }\n}  \n</code></pre>\n<p>Here is the JwtAuthenticationFilter:</p>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private final JwtService jwtService;\n    private final UserDetailsService userDetailsService;\n\n    @Override\n    protected void doFilterInternal(@NonNull HttpServletRequest request,\n                                    @NonNull HttpServletResponse response,\n                                    @NonNull FilterChain filterChain) throws ServletException, IOException {\n\n        final String authHeader = request.getHeader(&quot;Authorization&quot;);\n\n        if(authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\n            filterChain.doFilter(request, response);\n            return;\n        }\n\n        final String jwtToken = authHeader.substring(7); // removes &quot;Bearer &quot; string.\n        final String username = jwtService.extractUsername(jwtToken);\n\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n\n            if (jwtService.isTokenValid(jwtToken, userDetails)) {\n                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n\n                authToken.setDetails(new WebAuthenticationDetailsSource()\n                        .buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(authToken);\n            }\n        }\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n<p>Currently, with the above configuration, I am getting no logs whatsoever. I tried changing the security configuration to <code>.requestMatchers(userEndpoints()).hasRole(&quot;USER&quot;)</code> which still returned 403 Forbidden. But this time, there was a log saying &quot;Access Denied: Access Denied&quot;.</p>\n<p>I have also tried using <code>@PreAuthorize(&quot;hasRole('USER')&quot;)</code> for the controller method being called, but that also did nothing.</p>\n"},{"tags":["java","java-8","executable-jar","graalvm","graalvm-native-image"],"comments":[{"owner":{"account_id":1133977,"reputation":1901,"user_id":1119431,"accept_rate":80,"display_name":"zakkak"},"score":0,"creation_date":1683118453,"post_id":76163668,"comment_id":134317100,"body_markdown":"It looks like native-image is failing to generate a binary and is falling back to JVM-mode. Try compiling with `--no-fallback` and the build will probably fail.","body":"It looks like native-image is failing to generate a binary and is falling back to JVM-mode. Try compiling with <code>--no-fallback</code> and the build will probably fail."},{"owner":{"account_id":302301,"reputation":3398,"user_id":610607,"accept_rate":61,"display_name":"Mian Ahmad"},"score":0,"creation_date":1683118619,"post_id":76163668,"comment_id":134317141,"body_markdown":"@zakkak yes it failed with some type error `Error: type is not available in this platform: org.graalvm.nativeimage.impl.ImageSingletonsSupport`","body":"@zakkak yes it failed with some type error <code>Error: type is not available in this platform: org.graalvm.nativeimage.impl.ImageSingletonsSupport</code>"},{"owner":{"account_id":302301,"reputation":3398,"user_id":610607,"accept_rate":61,"display_name":"Mian Ahmad"},"score":0,"creation_date":1683118643,"post_id":76163668,"comment_id":134317150,"body_markdown":"Is it because of the mac m1 max or some other issue?","body":"Is it because of the mac m1 max or some other issue?"},{"owner":{"account_id":1133977,"reputation":1901,"user_id":1119431,"accept_rate":80,"display_name":"zakkak"},"score":2,"creation_date":1683208911,"post_id":76163668,"comment_id":134334131,"body_markdown":"I am not sure to be honest. Better update the github issue and provide more info there (like the full stack trace).","body":"I am not sure to be honest. Better update the github issue and provide more info there (like the full stack trace)."}],"answers":[{"tags":[],"owner":{"account_id":302301,"reputation":3398,"user_id":610607,"accept_rate":61,"display_name":"Mian Ahmad"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1683626155,"creation_date":1683282449,"answer_id":76181228,"question_id":76163668,"body_markdown":"Okay, finally, what worked for me is to create the configuration file. It becomes a two-step process\r\n\r\nStep 1:\r\n\r\n\r\nFirst I create a jar file of the project using intellij then I run the jar file to create a configuration file of the project in META_INF/native-image directory using `-agentlib:native-image-agent` i.e.\r\n```\r\njava -agentlib:native-image-agent=config-output-dir=/Users/mianahmad/goldeneye/json-processor/src/main/resources/META-INF/native-image -jar metadata-processor.jar -i /Users/mianahmad/goldeneye/json-processor/input/Claimant.json -o /Users/mianahmad/goldeneye/json-processor/output/Claimant_output.json\r\n```\r\n\r\nStep 2: \r\n\r\nAfter that I created a jar again and then created the native image.\r\n\r\n```\r\nnative-image -jar app-1.0-SNAPSHOT-jar-with-dependencies.jar\r\n```\r\nAfter that, I moved the project to another location using \r\n```\r\nmv app-1.0-SNAPSHOT-jar-with-dependencies /Users/mianahmad/Desktop\r\n```\r\nRun the binary and viola it is still working\r\n```\r\n./app-1.0-SNAPSHOT-jar-with-dependencies\r\n```\r\n\r\n","title":"Graalvm generated binary is working inside the project directory but not outside that directory","body":"<p>Okay, finally, what worked for me is to create the configuration file. It becomes a two-step process</p>\n<p>Step 1:</p>\n<p>First I create a jar file of the project using intellij then I run the jar file to create a configuration file of the project in META_INF/native-image directory using <code>-agentlib:native-image-agent</code> i.e.</p>\n<pre><code>java -agentlib:native-image-agent=config-output-dir=/Users/mianahmad/goldeneye/json-processor/src/main/resources/META-INF/native-image -jar metadata-processor.jar -i /Users/mianahmad/goldeneye/json-processor/input/Claimant.json -o /Users/mianahmad/goldeneye/json-processor/output/Claimant_output.json\n</code></pre>\n<p>Step 2:</p>\n<p>After that I created a jar again and then created the native image.</p>\n<pre><code>native-image -jar app-1.0-SNAPSHOT-jar-with-dependencies.jar\n</code></pre>\n<p>After that, I moved the project to another location using</p>\n<pre><code>mv app-1.0-SNAPSHOT-jar-with-dependencies /Users/mianahmad/Desktop\n</code></pre>\n<p>Run the binary and viola it is still working</p>\n<pre><code>./app-1.0-SNAPSHOT-jar-with-dependencies\n</code></pre>\n"}],"owner":{"account_id":302301,"reputation":3398,"user_id":610607,"accept_rate":61,"display_name":"Mian Ahmad"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76181228,"answer_count":1,"score":0,"last_activity_date":1683626155,"creation_date":1683115807,"question_id":76163668,"body_markdown":"I am using a rather simple Java application that receives an input file, process it and generate an output file. I am using `Picocli` for arguments to the application and `Graalvm` to create a native binary. \r\nI first created the `artifact` in intellij including the libraries and specifying the class containing the main method, I then used `build artifact` option to build the jar file. After that, I used the following command to create the binary \r\n```\r\nnative-image -jar metadata-processor.jar\r\n```\r\nThe jar and binary are created inside the project as `projectName/out/artifacts/app_jar` I can run the binary using\r\n```\r\n./binary -i abc -o xyz\r\n```\r\nI can run the jar file using\r\n```\r\njava -jar binary.jar -i abc -o xyz\r\n```\r\nHowever when I move the `binary` to `~Download` directory and run the same above command I get the error \r\n```\r\n./binary -i abc -o xyz\r\nError: Could not find or load main class Main\r\n```\r\nThe jar is still working though i.e.\r\n```\r\njava -jar binary.jar -i abc -o xyz\r\n```\r\n\r\nIf I create a simple hello world program and create a binary then it works fine even if I move it to another folder so it seems to be a library issue or project structure.\r\n\r\nPlease let me know if some special step is required in the case of libraries.","title":"Graalvm generated binary is working inside the project directory but not outside that directory","body":"<p>I am using a rather simple Java application that receives an input file, process it and generate an output file. I am using <code>Picocli</code> for arguments to the application and <code>Graalvm</code> to create a native binary.\nI first created the <code>artifact</code> in intellij including the libraries and specifying the class containing the main method, I then used <code>build artifact</code> option to build the jar file. After that, I used the following command to create the binary</p>\n<pre><code>native-image -jar metadata-processor.jar\n</code></pre>\n<p>The jar and binary are created inside the project as <code>projectName/out/artifacts/app_jar</code> I can run the binary using</p>\n<pre><code>./binary -i abc -o xyz\n</code></pre>\n<p>I can run the jar file using</p>\n<pre><code>java -jar binary.jar -i abc -o xyz\n</code></pre>\n<p>However when I move the <code>binary</code> to <code>~Download</code> directory and run the same above command I get the error</p>\n<pre><code>./binary -i abc -o xyz\nError: Could not find or load main class Main\n</code></pre>\n<p>The jar is still working though i.e.</p>\n<pre><code>java -jar binary.jar -i abc -o xyz\n</code></pre>\n<p>If I create a simple hello world program and create a binary then it works fine even if I move it to another folder so it seems to be a library issue or project structure.</p>\n<p>Please let me know if some special step is required in the case of libraries.</p>\n"},{"tags":["java","jar","launch"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1683622566,"post_id":76205893,"comment_id":134390971,"body_markdown":"This link should also be helpful https://stackoverflow.com/questions/22381202/error-a-jni-error-has-occurred-please-check-your-installation-and-try-again-in","body":"This link should also be helpful <a href=\"https://stackoverflow.com/questions/22381202/error-a-jni-error-has-occurred-please-check-your-installation-and-try-again-in\" title=\"error a jni error has occurred please check your installation and try again in\">stackoverflow.com/questions/22381202/&hellip;</a>"},{"owner":{"account_id":23361584,"reputation":23,"user_id":17433720,"display_name":"Bread Bouquet"},"score":0,"creation_date":1683652068,"post_id":76205893,"comment_id":134398302,"body_markdown":"This did not help","body":"This did not help"}],"owner":{"account_id":23361584,"reputation":23,"user_id":17433720,"display_name":"Bread Bouquet"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683626025,"answer_count":0,"score":0,"last_activity_date":1683626041,"creation_date":1683607118,"question_id":76205893,"body_markdown":"so I&#39;ve just created a jar file for the first time. When I double click on it to run the program I get an error. &quot;JNI error has occurred please check your installation&quot;. My program is terminal based. How do I get my program to open the terminal when launched. Thanks!","title":"How to get my java program to launch from a jar file?","body":"<p>so I've just created a jar file for the first time. When I double click on it to run the program I get an error. &quot;JNI error has occurred please check your installation&quot;. My program is terminal based. How do I get my program to open the terminal when launched. Thanks!</p>\n"},{"tags":["java","spring-boot","spring-validator"],"comments":[{"owner":{"account_id":14500349,"reputation":118,"user_id":10473718,"display_name":"I_AM__PAUL"},"score":0,"creation_date":1685103373,"post_id":76203513,"comment_id":134618399,"body_markdown":"Did you find a solution for this? I have same issue and cant find solution for that","body":"Did you find a solution for this? I have same issue and cant find solution for that"},{"owner":{"account_id":12695732,"reputation":3378,"user_id":9224219,"display_name":"Datz"},"score":0,"creation_date":1685104877,"post_id":76203513,"comment_id":134618740,"body_markdown":"@I_AM__PAUL not yet :(","body":"@I_AM__PAUL not yet :("}],"owner":{"account_id":12695732,"reputation":3378,"user_id":9224219,"display_name":"Datz"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683625979,"creation_date":1683571764,"question_id":76203513,"body_markdown":"I want to validate the JSON content of a POST request in my controller.\r\nI use @NullValue annotations and a custom Validator for a conditional validation. The input is invalid if the attribute `type` is `A` and the attribute `name` is empty.\r\nBut I can&#39;t get the validator to work.\r\n\r\nI have this controller:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/orders&quot;)\r\n@Validated\r\npublic class OrderController {\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public void createOrder(@Valid @RequestBody Order order) {\r\n      // do something\r\n    }\r\n}\r\n```\r\n\r\nand this `Validator` for the `Order` class:\r\n\r\n```\r\n@Component\r\npublic class OrderValidator implements Validator {\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; clazz) {\r\n        return Order.class.isAssignableFrom(clazz);\r\n    }\r\n\r\n    @Override\r\n    public void validate(Object target, Errors errors) {\r\n        final var order = (Order) target;\r\n\r\n        if (order.getType() == Type.A &amp;&amp; Strings.isEmpty(order.getName())) {\r\n            errors.rejectValue(&quot;name&quot;, &quot;name.required&quot;, &quot;Name required for type A&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nand `Order` class\r\n```\r\n@Getter\r\n@Setter\r\npublic class OrderDto {\r\n    private String name;\r\n    @NotNull\r\n    private Type type;\r\n}\r\n```\r\n\r\nIf I send a POST request where `type` is null, I get HTTP status 400 (Bad request) as expected.\r\n\r\n**But when I send a POST request with `type`=`A` and `name`=`null` the method returns HTTP 201 (Created). The `OrderValidator` is not executed.**\r\nBreakpoints prove, that the `supports` and `validate` methods are not called. But I can inject a `OrderValidator` bean, which means the component was found by Spring Boot.\r\n\r\n*The only work-around I found was to use this as controller, but this does not look feel right to me:*\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/orders&quot;)\r\n@Validated\r\npublic class OrderController {\r\n    @Autowired\r\n    private final OrderValidator orderValidator;\r\n\r\n    @InitBinder\r\n    public void initBinder(WebDataBinder binder) {\r\n        binder.addValidators(orderValidator);\r\n    }\r\n\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    public void createOrder(@Valid @RequestBody Order order, BindingResult result) {\r\n      // evaluate bindingResult manually\r\n      // do something\r\n    }\r\n\r\n}\r\n```\r\n\r\nWhat am I doing wrong?","title":"How can I make a Spring Validator to be detected and used automatically?","body":"<p>I want to validate the JSON content of a POST request in my controller.\nI use @NullValue annotations and a custom Validator for a conditional validation. The input is invalid if the attribute <code>type</code> is <code>A</code> and the attribute <code>name</code> is empty.\nBut I can't get the validator to work.</p>\n<p>I have this controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/orders&quot;)\n@Validated\npublic class OrderController {\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public void createOrder(@Valid @RequestBody Order order) {\n      // do something\n    }\n}\n</code></pre>\n<p>and this <code>Validator</code> for the <code>Order</code> class:</p>\n<pre><code>@Component\npublic class OrderValidator implements Validator {\n    @Override\n    public boolean supports(Class&lt;?&gt; clazz) {\n        return Order.class.isAssignableFrom(clazz);\n    }\n\n    @Override\n    public void validate(Object target, Errors errors) {\n        final var order = (Order) target;\n\n        if (order.getType() == Type.A &amp;&amp; Strings.isEmpty(order.getName())) {\n            errors.rejectValue(&quot;name&quot;, &quot;name.required&quot;, &quot;Name required for type A&quot;);\n        }\n    }\n}\n</code></pre>\n<p>and <code>Order</code> class</p>\n<pre><code>@Getter\n@Setter\npublic class OrderDto {\n    private String name;\n    @NotNull\n    private Type type;\n}\n</code></pre>\n<p>If I send a POST request where <code>type</code> is null, I get HTTP status 400 (Bad request) as expected.</p>\n<p><strong>But when I send a POST request with <code>type</code>=<code>A</code> and <code>name</code>=<code>null</code> the method returns HTTP 201 (Created). The <code>OrderValidator</code> is not executed.</strong>\nBreakpoints prove, that the <code>supports</code> and <code>validate</code> methods are not called. But I can inject a <code>OrderValidator</code> bean, which means the component was found by Spring Boot.</p>\n<p><em>The only work-around I found was to use this as controller, but this does not look feel right to me:</em></p>\n<pre><code>@RestController\n@RequestMapping(&quot;/orders&quot;)\n@Validated\npublic class OrderController {\n    @Autowired\n    private final OrderValidator orderValidator;\n\n    @InitBinder\n    public void initBinder(WebDataBinder binder) {\n        binder.addValidators(orderValidator);\n    }\n\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    public void createOrder(@Valid @RequestBody Order order, BindingResult result) {\n      // evaluate bindingResult manually\n      // do something\n    }\n\n}\n</code></pre>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","windows","maven"],"comments":[{"owner":{"account_id":462861,"reputation":17872,"user_id":865403,"accept_rate":60,"display_name":"Pavel Horal"},"score":4,"creation_date":1436174332,"post_id":11118237,"comment_id":50481708,"body_markdown":"Just downloaded **binary** `zip` and it was broken. Replaced with `.tar.gz` and it works. So when `M2_HOME` is set correctly really try to check that what you downloaded is correct.","body":"Just downloaded <b>binary</b> <code>zip</code> and it was broken. Replaced with <code>.tar.gz</code> and it works. So when <code>M2_HOME</code> is set correctly really try to check that what you downloaded is correct."},{"owner":{"account_id":7384842,"reputation":977,"user_id":5620182,"accept_rate":83,"display_name":"hoaphumanoid"},"score":0,"creation_date":1469442926,"post_id":11118237,"comment_id":64520857,"body_markdown":"@PavelHoral same happened to me","body":"@PavelHoral same happened to me"},{"owner":{"account_id":1314832,"reputation":1915,"user_id":1261959,"accept_rate":0,"display_name":"Nullpointer"},"score":0,"creation_date":1589886491,"post_id":11118237,"comment_id":109464595,"body_markdown":"I get this error on this jenkins only, via command like mvn compile working fine !","body":"I get this error on this jenkins only, via command like mvn compile working fine !"}],"answers":[{"comments":[{"owner":{"account_id":426618,"reputation":1583,"user_id":807916,"accept_rate":17,"display_name":"manofsins"},"score":0,"creation_date":1340256448,"post_id":11118287,"comment_id":14589566,"body_markdown":"Thanks but I am having both jdk and jre. You can see that I have given the JAVA_HOME as C:\\Program Files\\Java\\jdk1.7.0_04. And if I give the path for M2_HOME that you have told, the cmd will not even recognize the &#39;mvn&#39; command.","body":"Thanks but I am having both jdk and jre. You can see that I have given the JAVA_HOME as C:\\Program Files\\Java\\jdk1.7.0_04. And if I give the path for M2_HOME that you have told, the cmd will not even recognize the &#39;mvn&#39; command."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1340259683,"post_id":11118287,"comment_id":14590356,"body_markdown":"You change the M2_HOME as i described it will add the %M2_HOME%\\bin to your path which is needed to call the mvn command.","body":"You change the M2_HOME as i described it will add the %M2_HOME%\\bin to your path which is needed to call the mvn command."}],"tags":[],"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1340190777,"creation_date":1340190777,"answer_id":11118287,"question_id":11118237,"body_markdown":"You should change the location of the M2_HOME into the following:\r\n\r\n    set M2_HOME=C:\\apache-maven-3.0.4\\apache-maven\r\n\r\nFurthermore the installation of the JDK looks more a JRE instead of JDK. For Maven you need JDK and NOT JRE.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>You should change the location of the M2_HOME into the following:</p>\n\n<pre><code>set M2_HOME=C:\\apache-maven-3.0.4\\apache-maven\n</code></pre>\n\n<p>Furthermore the installation of the JDK looks more a JRE instead of JDK. For Maven you need JDK and NOT JRE.</p>\n"},{"comments":[{"owner":{"account_id":426618,"reputation":1583,"user_id":807916,"accept_rate":17,"display_name":"manofsins"},"score":0,"creation_date":1340254779,"post_id":11119819,"comment_id":14589217,"body_markdown":"Thanks but Unfortunately I mistyped it here only and it was same as you have told, &#39;without a hyphen&#39;.","body":"Thanks but Unfortunately I mistyped it here only and it was same as you have told, &#39;without a hyphen&#39;."}],"tags":[],"owner":{"account_id":93007,"reputation":51990,"user_id":254643,"display_name":"Raghuram"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1340196189,"creation_date":1340196189,"answer_id":11119819,"question_id":11118237,"body_markdown":"Besides what @khmarbaise has pointed out, I think you have mistyped your JAVA_HOME.  If you have installed in the default location, then there should be no &quot;-&quot; (hyphen) between jdk and 1.7.0_04.  So it would be\r\n\r\n    JAVA_HOME C:\\Program Files\\Java\\jdk1.7.0_04 ","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Besides what @khmarbaise has pointed out, I think you have mistyped your JAVA_HOME.  If you have installed in the default location, then there should be no \"-\" (hyphen) between jdk and 1.7.0_04.  So it would be</p>\n\n<pre><code>JAVA_HOME C:\\Program Files\\Java\\jdk1.7.0_04 \n</code></pre>\n"},{"comments":[{"owner":{"account_id":1772982,"reputation":400,"user_id":1617395,"accept_rate":75,"display_name":"Joe Leo"},"score":0,"creation_date":1385412044,"post_id":13366230,"comment_id":30122605,"body_markdown":"M2_HOME is the first thing to check if you are upgrading. JAVA_HOME should remain unchanged.","body":"M2_HOME is the first thing to check if you are upgrading. JAVA_HOME should remain unchanged."},{"owner":{"account_id":178183,"reputation":41234,"user_id":409976,"accept_rate":68,"display_name":"Kevin Meredith"},"score":3,"creation_date":1397577649,"post_id":13366230,"comment_id":35289172,"body_markdown":"How is the `M2` environment variable used? I only have `JAVA_HOME` and `M2_HOME`.","body":"How is the <code>M2</code> environment variable used? I only have <code>JAVA_HOME</code> and <code>M2_HOME</code>."},{"owner":{"account_id":308224,"reputation":578,"user_id":619961,"display_name":"ikaerom"},"score":1,"creation_date":1428229386,"post_id":13366230,"comment_id":47077108,"body_markdown":"@KevinMeredith: The `M2` environment variable is sometimes used to indicate the `%M2_HOME\\bin%` path, which in turn is then added to the `%Path%` environment variable. This is needed when the Maven batch file `mvn.bat` cannot be found in the standard `%Path%` entries defined. A typical use case would be a non-standard installation directory for Maven.","body":"@KevinMeredith: The <code>M2</code> environment variable is sometimes used to indicate the <code>%M2_HOME\\bin%</code> path, which in turn is then added to the <code>%Path%</code> environment variable. This is needed when the Maven batch file <code>mvn.bat</code> cannot be found in the standard <code>%Path%</code> entries defined. A typical use case would be a non-standard installation directory for Maven."},{"owner":{"account_id":1314832,"reputation":1915,"user_id":1261959,"accept_rate":0,"display_name":"Nullpointer"},"score":0,"creation_date":1589886506,"post_id":13366230,"comment_id":109464603,"body_markdown":"@Alex I get this error on this jenkins only, via command like mvn compile working fine !","body":"@Alex I get this error on this jenkins only, via command like mvn compile working fine !"}],"tags":[],"owner":{"account_id":304241,"reputation":1035,"user_id":613635,"display_name":"Alex Fairchild"},"comment_count":4,"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1440448182,"creation_date":1352830120,"answer_id":13366230,"question_id":11118237,"body_markdown":"I was having this same problem and was able to resolve it by carefully redoing the Environment Variables: \r\n\r\n - M2_HOME  \r\n - M2 \r\n - JAVA_HOME\r\n\r\n  \r\nAlso, I made them all **System** Variables, not User Variables like the Maven instructions say. When you \r\n\r\n    echo %Path%\r\n\r\nMake sure you can see the %M2% and %JAVA_HOME% variables completely expanded, i.e. :\r\n\r\n    C:\\Users\\afairchild&gt;echo %Path%\r\n    C:\\Program Files\\Apache Software Foundation\\apache-maven-3.0.4\\bin;C:\\Program Files\\Java\\jdk1.7.0_09\\bin; [etc]","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I was having this same problem and was able to resolve it by carefully redoing the Environment Variables: </p>\n\n<ul>\n<li>M2_HOME  </li>\n<li>M2 </li>\n<li>JAVA_HOME</li>\n</ul>\n\n<p>Also, I made them all <strong>System</strong> Variables, not User Variables like the Maven instructions say. When you </p>\n\n<pre><code>echo %Path%\n</code></pre>\n\n<p>Make sure you can see the %M2% and %JAVA_HOME% variables completely expanded, i.e. :</p>\n\n<pre><code>C:\\Users\\afairchild&gt;echo %Path%\nC:\\Program Files\\Apache Software Foundation\\apache-maven-3.0.4\\bin;C:\\Program Files\\Java\\jdk1.7.0_09\\bin; [etc]\n</code></pre>\n"},{"comments":[{"owner":{"account_id":123644,"reputation":913,"user_id":318221,"display_name":"jimkont"},"score":2,"creation_date":1376579950,"post_id":15236910,"comment_id":26771551,"body_markdown":"It worked for me but with M2_HOME=/usr/share/maven2 (in case anyone else tries it). Thanks!","body":"It worked for me but with M2_HOME=/usr/share/maven2 (in case anyone else tries it). Thanks!"},{"owner":{"account_id":1756361,"reputation":3345,"user_id":1604312,"display_name":"Rael Gugelmin Cunha"},"score":1,"creation_date":1385133170,"post_id":15236910,"comment_id":30029722,"body_markdown":"On Ubuntu, better create /etc/profile.d/maven.sh with the command you pointed: `export M2_HOME=/usr/share/maven`. As @jimkont pointed, sometimes is maven2, or maven3 (if you installed maven3, of course).","body":"On Ubuntu, better create /etc/profile.d/maven.sh with the command you pointed: <code>export M2_HOME=&#47;usr&#47;share&#47;maven</code>. As @jimkont pointed, sometimes is maven2, or maven3 (if you installed maven3, of course)."},{"owner":{"account_id":4041030,"reputation":7079,"user_id":3323883,"display_name":"karthik"},"score":0,"creation_date":1474523338,"post_id":15236910,"comment_id":66567102,"body_markdown":"It works. Thanks. But can we just add it to the /etc/environtment file?","body":"It works. Thanks. But can we just add it to the /etc/environtment file?"}],"tags":[],"owner":{"account_id":272852,"reputation":19440,"user_id":564157,"accept_rate":88,"display_name":"Joseph Lust"},"comment_count":3,"down_vote_count":1,"up_vote_count":53,"is_accepted":false,"score":52,"last_activity_date":1362530415,"creation_date":1362530415,"answer_id":15236910,"question_id":11118237,"body_markdown":"Had this issue on two different Ubuntu 12.04 installs, despite the installs being done by apt-get. Issue was M2_HOME.\r\n\r\nFixed with:\r\n\r\n    export M2_HOME=/usr/share/maven","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Had this issue on two different Ubuntu 12.04 installs, despite the installs being done by apt-get. Issue was M2_HOME.</p>\n\n<p>Fixed with:</p>\n\n<pre><code>export M2_HOME=/usr/share/maven\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2458354,"reputation":21,"user_id":2142986,"display_name":"Lou"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1362638641,"creation_date":1362637241,"answer_id":15264467,"question_id":11118237,"body_markdown":"I had the same issue. I have Windows xp box and when I would type `mvn -version` at the command line prompt I got the dreaded error message \r\n\r\n    &quot;Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/codehaus/plexus/classworlds/launcher/Launcher&quot;\r\n\r\nI confirmed that my `M2_HOME` variable was set to the path where Maven was installed on pc and that the `echo %path%` confirmed that Maven was in my path. \r\n\r\nI have been searching for a solution for hours when I stumbled on to my solution (I say my solution because I know this probably won&#39;t be the solution for everyone that is getting the same error). \r\n\r\nI copied the path that was assigned to my `M2_HOME` variable. I opened a cmd window and typed cd and pasted the path I got from my `M2_HOME` variable. At that point I knew that the path was correct because the path was displayed in the window. At this point I entered the dir command and to my surprise, I got the error File Not Found. \r\n\r\nI went to that path via Explorer and sure enough there were files present. I noticed that the folders were faded out, but I could access them and see the files within each folder (I have admin rights on my pc). I looked at the properties of the parent folder for Maven and saw that the Hidden box was checked. I removed the check and applied and tried my dir command again with success.\r\n\r\nNext I tried the `mvn version` command again, but this time I got back the expected results.\r\n\r\n    C:\\&gt;mvn -version\r\n    Apache Maven 3.0.3 (r1075438; 2011-02-28 11:31:09-0600)\r\n    Maven home: C:\\Program Files\\apache-maven-3.0.3\r\n    Java version: 1.5.0_16, vendor: Sun Microsystems Inc.\r\n    Java home: C:\\Java\\jdk1.5.0_16\\jre\r\n    Default locale: en_US, platform encoding: Cp1252\r\n    OS name: &quot;windows xp&quot;, version: &quot;5.1&quot;, arch: &quot;x86&quot;, family: &quot;windows&quot;\r\n\r\nFinally I created a jar and war file and my web app ran successfully on my local Tomcat.\r\n\r\nI hope this helps some of you out there.\r\n\r\n\r\n","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I had the same issue. I have Windows xp box and when I would type <code>mvn -version</code> at the command line prompt I got the dreaded error message </p>\n\n<pre><code>\"Exception in thread \"main\" java.lang.NoClassDefFoundError: org/codehaus/plexus/classworlds/launcher/Launcher\"\n</code></pre>\n\n<p>I confirmed that my <code>M2_HOME</code> variable was set to the path where Maven was installed on pc and that the <code>echo %path%</code> confirmed that Maven was in my path. </p>\n\n<p>I have been searching for a solution for hours when I stumbled on to my solution (I say my solution because I know this probably won't be the solution for everyone that is getting the same error). </p>\n\n<p>I copied the path that was assigned to my <code>M2_HOME</code> variable. I opened a cmd window and typed cd and pasted the path I got from my <code>M2_HOME</code> variable. At that point I knew that the path was correct because the path was displayed in the window. At this point I entered the dir command and to my surprise, I got the error File Not Found. </p>\n\n<p>I went to that path via Explorer and sure enough there were files present. I noticed that the folders were faded out, but I could access them and see the files within each folder (I have admin rights on my pc). I looked at the properties of the parent folder for Maven and saw that the Hidden box was checked. I removed the check and applied and tried my dir command again with success.</p>\n\n<p>Next I tried the <code>mvn version</code> command again, but this time I got back the expected results.</p>\n\n<pre><code>C:\\&gt;mvn -version\nApache Maven 3.0.3 (r1075438; 2011-02-28 11:31:09-0600)\nMaven home: C:\\Program Files\\apache-maven-3.0.3\nJava version: 1.5.0_16, vendor: Sun Microsystems Inc.\nJava home: C:\\Java\\jdk1.5.0_16\\jre\nDefault locale: en_US, platform encoding: Cp1252\nOS name: \"windows xp\", version: \"5.1\", arch: \"x86\", family: \"windows\"\n</code></pre>\n\n<p>Finally I created a jar and war file and my web app ran successfully on my local Tomcat.</p>\n\n<p>I hope this helps some of you out there.</p>\n"},{"comments":[{"owner":{"account_id":7247220,"reputation":7104,"user_id":5528751,"accept_rate":96,"display_name":"java123999"},"score":0,"creation_date":1452863005,"post_id":15663889,"comment_id":57365214,"body_markdown":"Thanks fixed mine also. However, why can you not use the src download also, as long as it contains the correct execuatable in the bin dir?","body":"Thanks fixed mine also. However, why can you not use the src download also, as long as it contains the correct execuatable in the bin dir?"}],"tags":[],"owner":{"account_id":2554102,"reputation":219,"user_id":2216499,"display_name":"jdmidtun"},"comment_count":1,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1364401152,"creation_date":1364401152,"answer_id":15663889,"question_id":11118237,"body_markdown":"It sounds like you installed (extracted) the source files instead of the binaries based on your path information.  Try installing the binaries instead and following the other posters answer.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>It sounds like you installed (extracted) the source files instead of the binaries based on your path information.  Try installing the binaries instead and following the other posters answer.</p>\n"},{"comments":[{"owner":{"account_id":1314832,"reputation":1915,"user_id":1261959,"accept_rate":0,"display_name":"Nullpointer"},"score":0,"creation_date":1589886526,"post_id":18155226,"comment_id":109464619,"body_markdown":"I get this error on this jenkins only, via command like mvn compile working fine !","body":"I get this error on this jenkins only, via command like mvn compile working fine !"}],"tags":[],"owner":{"account_id":1199784,"reputation":18304,"user_id":1170677,"accept_rate":54,"display_name":"Adelin"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1376080594,"creation_date":1376080594,"answer_id":18155226,"question_id":11118237,"body_markdown":"Well, I had this problem and after seeing this post and particularly khmarbaise answer I noticed that `M2_HOME` was \r\n\r\n    D:\\workspace\\apache-maven-3.1.0-bin\\apache-maven-3.1.0\\bin\r\n\r\nand then I chaged it to \r\n\r\n    D:\\workspace\\apache-maven-3.1.0-bin\\apache-maven-3.1.0\r\n\r\n\r\nI would like to mention that I use windows 7 (x64)    ","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Well, I had this problem and after seeing this post and particularly khmarbaise answer I noticed that <code>M2_HOME</code> was </p>\n\n<pre><code>D:\\workspace\\apache-maven-3.1.0-bin\\apache-maven-3.1.0\\bin\n</code></pre>\n\n<p>and then I chaged it to </p>\n\n<pre><code>D:\\workspace\\apache-maven-3.1.0-bin\\apache-maven-3.1.0\n</code></pre>\n\n<p>I would like to mention that I use windows 7 (x64)    </p>\n"},{"tags":[],"owner":{"account_id":3306933,"reputation":41,"user_id":2781456,"accept_rate":25,"display_name":"HMB"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1379847038,"creation_date":1379846602,"answer_id":18942952,"question_id":11118237,"body_markdown":"This is a common issue while setting up Maven.\r\nAll you need to do is the below :-\r\n\r\n1. M2_HOME :- D:\\apache-maven-2.0.11      \r\n2. M2      :- D:\\apache-maven-2.0.11\\bin\r\n3. Path    :- Append it with ;%M2%\r\n\r\n\r\nM2_HOME &amp; M2 :- need to be declared as System variables and not as USER / ADMIN Variables.\r\n\r\nPath :- This can be the System Variable OR the USER / ADMIN variable [PATH]. Preferably System Variable.\r\n\r\nOnce you carefully do the setting of these 3 variable, you can verify Maven&#39;s installation as below.\r\n\r\n\r\nOn CMD Prompt :-\r\n************************\r\n\r\nC:\\Documents and Settings\\ADMIN&gt;mvn --version\r\n\r\n************************\r\nOutput :-\r\n************************\r\nApache Maven 2.0.11 (r909250; 2010-02-12 11:25:50+0530)\r\nJava version: 1.6.0_22\r\nJava home: C:\\Program Files\\Java\\jdk1.6.0_22\\jre\r\nDefault locale: en_US, platform encoding: Cp1252\r\nOS name: &quot;windows xp&quot; version: &quot;5.1&quot; arch: &quot;x86&quot; Family: &quot;windows&quot;\r\n\r\n\r\nThanks.\r\n\r\n","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>This is a common issue while setting up Maven.\nAll you need to do is the below :-</p>\n\n<ol>\n<li>M2_HOME :- D:\\apache-maven-2.0.11      </li>\n<li>M2      :- D:\\apache-maven-2.0.11\\bin</li>\n<li>Path    :- Append it with ;%M2%</li>\n</ol>\n\n<p>M2_HOME &amp; M2 :- need to be declared as System variables and not as USER / ADMIN Variables.</p>\n\n<p>Path :- This can be the System Variable OR the USER / ADMIN variable [PATH]. Preferably System Variable.</p>\n\n<p>Once you carefully do the setting of these 3 variable, you can verify Maven's installation as below.</p>\n\n<p>On CMD Prompt :-</p>\n\n<hr>\n\n<p>C:\\Documents and Settings\\ADMIN>mvn --version</p>\n\n<hr>\n\n<p>Output :-</p>\n\n<hr>\n\n<p>Apache Maven 2.0.11 (r909250; 2010-02-12 11:25:50+0530)\nJava version: 1.6.0_22\nJava home: C:\\Program Files\\Java\\jdk1.6.0_22\\jre\nDefault locale: en_US, platform encoding: Cp1252\nOS name: \"windows xp\" version: \"5.1\" arch: \"x86\" Family: \"windows\"</p>\n\n<p>Thanks.</p>\n"},{"comments":[{"owner":{"account_id":496266,"reputation":3243,"user_id":1298503,"accept_rate":80,"display_name":"MDMoore313"},"score":1,"creation_date":1390777230,"post_id":19024073,"comment_id":32226379,"body_markdown":"I actually downloaded the source **on purpose**, as that&#39;s the traditional way to do things, but I accidentally followed instructions for the binary installation. Just copying down the binary tar was actually easier in the long run.","body":"I actually downloaded the source <b>on purpose</b>, as that&#39;s the traditional way to do things, but I accidentally followed instructions for the binary installation. Just copying down the binary tar was actually easier in the long run."},{"owner":{"account_id":2404766,"reputation":711,"user_id":2101559,"accept_rate":75,"display_name":"Laura Ritchey"},"score":0,"creation_date":1395941062,"post_id":19024073,"comment_id":34577978,"body_markdown":"+1: Same thing happened here - accidentally clicked on the wrong download link.  Works not that I got the right zip file!","body":"+1: Same thing happened here - accidentally clicked on the wrong download link.  Works not that I got the right zip file!"},{"owner":{"account_id":3442754,"reputation":9473,"user_id":2884291,"accept_rate":89,"display_name":"Liran H"},"score":0,"creation_date":1456089380,"post_id":19024073,"comment_id":58772906,"body_markdown":"This single-handedly fixed the issue for me - thank you!","body":"This single-handedly fixed the issue for me - thank you!"},{"owner":{"account_id":143397,"reputation":6425,"user_id":351708,"accept_rate":75,"display_name":"Rohit"},"score":0,"creation_date":1457040927,"post_id":19024073,"comment_id":59238396,"body_markdown":"True. Downloaded source files and tried updating M3_HOME but didn&#39;t work. Binaries work good.","body":"True. Downloaded source files and tried updating M3_HOME but didn&#39;t work. Binaries work good."},{"owner":{"account_id":2397410,"reputation":10658,"user_id":2095953,"accept_rate":56,"display_name":"frodo2975"},"score":1,"creation_date":1467992204,"post_id":19024073,"comment_id":63960463,"body_markdown":"Just had this happen to me. The website is unclear on which to use.","body":"Just had this happen to me. The website is unclear on which to use."},{"owner":{"account_id":21325,"reputation":6415,"user_id":51734,"accept_rate":71,"display_name":"Barbaros Alp"},"score":0,"creation_date":1510147231,"post_id":19024073,"comment_id":81310394,"body_markdown":"Worked for me! http://ftp.itu.edu.tr/Mirror/Apache/maven/maven-3/3.5.2/binaries/apache-maven-3.5.2-bin.zip","body":"Worked for me! <a href=\"http://ftp.itu.edu.tr/Mirror/Apache/maven/maven-3/3.5.2/binaries/apache-maven-3.5.2-bin.zip\" rel=\"nofollow noreferrer\">ftp.itu.edu.tr/Mirror/Apache/maven/maven-3/3.5.2/binaries/&hellip;</a>"}],"tags":[],"owner":{"account_id":193421,"reputation":2941,"user_id":435140,"accept_rate":100,"display_name":"dirbacke"},"comment_count":6,"down_vote_count":1,"up_vote_count":83,"is_accepted":false,"score":82,"last_activity_date":1381435476,"creation_date":1380186956,"answer_id":19024073,"question_id":11118237,"body_markdown":"Even though the question is answered I would like to add that, if you are getting the above mentioned error, be sure that you have downloaded the **Binary file**. \r\n\r\nThe source file should only be downloaded if you are an advanced user and that you know how to deal with it. \r\n\r\nI have had quite a share of people downloading the wrong file, seniors and juniors","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Even though the question is answered I would like to add that, if you are getting the above mentioned error, be sure that you have downloaded the <strong>Binary file</strong>. </p>\n\n<p>The source file should only be downloaded if you are an advanced user and that you know how to deal with it. </p>\n\n<p>I have had quite a share of people downloading the wrong file, seniors and juniors</p>\n"},{"tags":[],"owner":{"account_id":495819,"reputation":13159,"user_id":1017787,"accept_rate":64,"display_name":"JBCP"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1387307887,"creation_date":1387307887,"answer_id":20642762,"question_id":11118237,"body_markdown":"For other people who might run into this, don&#39;t forget to check ~/.mavenrc for M2_HOME or JAVA_HOME settings.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>For other people who might run into this, don't forget to check ~/.mavenrc for M2_HOME or JAVA_HOME settings.</p>\n"},{"comments":[{"owner":{"account_id":355584,"reputation":167,"user_id":694609,"display_name":"Luke"},"score":26,"creation_date":1428928302,"post_id":22310438,"comment_id":47356294,"body_markdown":"Same for me on a mac. **Make sure you delete M2_HOME**","body":"Same for me on a mac. <b>Make sure you delete M2_HOME</b>"},{"owner":{"account_id":2855051,"reputation":1371,"user_id":2451480,"accept_rate":90,"display_name":"TFuto"},"score":0,"creation_date":1433254061,"post_id":22310438,"comment_id":49265337,"body_markdown":"Worked with Maven 3.3.3 binary, on Ubuntu. JAVA_HOME is not set.","body":"Worked with Maven 3.3.3 binary, on Ubuntu. JAVA_HOME is not set."},{"owner":{"account_id":1865631,"reputation":813,"user_id":1689286,"accept_rate":50,"display_name":"Jeremiah"},"score":2,"creation_date":1444339289,"post_id":22310438,"comment_id":53874627,"body_markdown":"This works as of Mac OS 10.10.5 with brew installed maven (3.3.3).","body":"This works as of Mac OS 10.10.5 with brew installed maven (3.3.3)."},{"owner":{"account_id":918082,"reputation":54574,"user_id":950427,"accept_rate":91,"display_name":"Jared Burrows"},"score":0,"creation_date":1444497160,"post_id":22310438,"comment_id":53933382,"body_markdown":"@Luke Thank you! `unset M2_HOME`.","body":"@Luke Thank you! <code>unset M2_HOME</code>."},{"owner":{"account_id":396011,"reputation":706,"user_id":759300,"accept_rate":100,"display_name":"j2gl"},"score":0,"creation_date":1468948491,"post_id":22310438,"comment_id":64333278,"body_markdown":"Also working for me on Ubuntu 14.04, openJdk1.7 and Maven 3.3.9","body":"Also working for me on Ubuntu 14.04, openJdk1.7 and Maven 3.3.9"},{"owner":{"account_id":388668,"reputation":2288,"user_id":747739,"accept_rate":67,"display_name":"Phil"},"score":0,"creation_date":1469495828,"post_id":22310438,"comment_id":64548412,"body_markdown":"You may find M2_HOME is being set in ~/.mavenrc","body":"You may find M2_HOME is being set in ~/.mavenrc"},{"owner":{"account_id":1550537,"reputation":1008,"user_id":1443040,"display_name":"Matt"},"score":6,"creation_date":1484146275,"post_id":22310438,"comment_id":70390798,"body_markdown":"This solution works, but not for the reasons you might think. The problem, as indicated in [some](http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main#comment-1845046165) of the [comments](http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main#comment-1239195761) of the referenced article, is not that M3_HOME is needed instead, but rather that M2_HOME is incorrectly defined. It seems that M3_HOME isn&#39;t used at all, so basically what&#39;s happening is the default is used when you delete M2_HOME.","body":"This solution works, but not for the reasons you might think. The problem, as indicated in <a href=\"http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main#comment-1845046165\" rel=\"nofollow noreferrer\">some</a> of the <a href=\"http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main#comment-1239195761\" rel=\"nofollow noreferrer\">comments</a> of the referenced article, is not that M3_HOME is needed instead, but rather that M2_HOME is incorrectly defined. It seems that M3_HOME isn&#39;t used at all, so basically what&#39;s happening is the default is used when you delete M2_HOME."},{"owner":{"account_id":231391,"reputation":6221,"user_id":495598,"display_name":"Manu Manjunath"},"score":0,"creation_date":1501832322,"post_id":22310438,"comment_id":77962508,"body_markdown":"I&#39;m on Mac El Capitan. I have installed mvn (3.3.9) through HomeBrew. I `unset M2_HOME`. I did *not* set `M3_HOME`. It&#39;s still working.","body":"I&#39;m on Mac El Capitan. I have installed mvn (3.3.9) through HomeBrew. I <code>unset M2_HOME</code>. I did <i>not</i> set <code>M3_HOME</code>. It&#39;s still working."},{"owner":{"account_id":2918600,"reputation":227,"user_id":2501323,"display_name":"user2501323"},"score":0,"creation_date":1531993220,"post_id":22310438,"comment_id":89809380,"body_markdown":"Don&#39;t forget to restart your console if on Windows - for environment variable change to get in.","body":"Don&#39;t forget to restart your console if on Windows - for environment variable change to get in."}],"tags":[],"owner":{"account_id":408096,"reputation":3816,"user_id":778554,"accept_rate":67,"display_name":"Ian"},"comment_count":9,"down_vote_count":2,"up_vote_count":147,"is_accepted":false,"score":145,"last_activity_date":1671841004,"creation_date":1394482766,"answer_id":22310438,"question_id":11118237,"body_markdown":"I hit this problem too, and found [**this**][1] article.  For Maven3, changing my environment variable name from M2_HOME to M3_HOME did the trick.  I am on a Mac running OSX 10.9 with JDK 1.7.\r\n\r\n\r\n  [1]: http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main-class\r\n\r\nNote: Please delete M2_HOME, if already set. Eg: `unset M2_HOME`.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I hit this problem too, and found <a href=\"http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main-class\" rel=\"nofollow noreferrer\"><strong>this</strong></a> article.  For Maven3, changing my environment variable name from M2_HOME to M3_HOME did the trick.  I am on a Mac running OSX 10.9 with JDK 1.7.</p>\n<p>Note: Please delete M2_HOME, if already set. Eg: <code>unset M2_HOME</code>.</p>\n"},{"tags":[],"owner":{"account_id":2436173,"reputation":5566,"user_id":2126023,"accept_rate":85,"display_name":"Saif Asif"},"comment_count":0,"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1400179787,"creation_date":1400179787,"answer_id":23686393,"question_id":11118237,"body_markdown":"I came across a similar problem on my mac OSX. After a series of trial and error attempts I finally resolved it.\r\n\r\nMy `~/.bash_profile` looked like this\r\n\r\n    export M2_HOME=/Users/xyz/maven-3.x/bin\r\n    export PATH=$PATH:$M2_HOME\r\n\r\nand when I tried to `echo M2_HOME` from the terminal, it showed me the correct path but when I tried to fire any maven command like `mvn clean` or `mvn install`, it always gave the same problem\r\n\r\n&gt;Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher\r\n\r\nI solved this issue by changing my `M2_HOME` to this\r\n\r\n\r\n    export M2_HOME=/Users/xyz/maven-3.x\r\n    export PATH=$PATH:$M2_HOME/bin\r\n\r\nAnd voila ! It started working ! Just by moving the position of `/bin` from M2_HOME to in front of the `PATH`\r\n","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I came across a similar problem on my mac OSX. After a series of trial and error attempts I finally resolved it.</p>\n\n<p>My <code>~/.bash_profile</code> looked like this</p>\n\n<pre><code>export M2_HOME=/Users/xyz/maven-3.x/bin\nexport PATH=$PATH:$M2_HOME\n</code></pre>\n\n<p>and when I tried to <code>echo M2_HOME</code> from the terminal, it showed me the correct path but when I tried to fire any maven command like <code>mvn clean</code> or <code>mvn install</code>, it always gave the same problem</p>\n\n<blockquote>\n  <p>Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher</p>\n</blockquote>\n\n<p>I solved this issue by changing my <code>M2_HOME</code> to this</p>\n\n<pre><code>export M2_HOME=/Users/xyz/maven-3.x\nexport PATH=$PATH:$M2_HOME/bin\n</code></pre>\n\n<p>And voila ! It started working ! Just by moving the position of <code>/bin</code> from M2_HOME to in front of the <code>PATH</code></p>\n"},{"tags":[],"owner":{"account_id":1799758,"reputation":487,"user_id":1638386,"accept_rate":86,"display_name":"dytori"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1404637108,"creation_date":1404637108,"answer_id":24594223,"question_id":11118237,"body_markdown":"Exactly the same error may appear even with correct environment variable settings, if you copy ONLY &lt;code&gt;bin&lt;/code&gt; directory to the installation directory.\r\nIt make &lt;code&gt;which&lt;/code&gt; work finely, and novices get stuck.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Exactly the same error may appear even with correct environment variable settings, if you copy ONLY <code>bin</code> directory to the installation directory.\nIt make <code>which</code> work finely, and novices get stuck.</p>\n"},{"tags":[],"owner":{"account_id":466656,"reputation":769,"user_id":871542,"accept_rate":46,"display_name":"Shendor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1417523262,"creation_date":1417523262,"answer_id":27249503,"question_id":11118237,"body_markdown":"Try to download binary zip (for ex. Maven 3.0.5 (Binary zip)) instead of complete source in official maven site.\r\nAlso make sure that command line recognizes java and javac commands.\r\nI noticed that Maven Source zip didn&#39;t include any libraries at lib folder however Binary zip had them + in boot folder it had plexus-classworlds-2.4.jar. Perhaps the problem was with the absence of these libraries. Anyway it helped me so my M2_HOME is: C:\\Program Files\\Java\\apache-maven-3.0.5 and at PATH I put: C:\\Program Files\\Java\\apache-maven-3.0.5\\bin.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Try to download binary zip (for ex. Maven 3.0.5 (Binary zip)) instead of complete source in official maven site.\nAlso make sure that command line recognizes java and javac commands.\nI noticed that Maven Source zip didn't include any libraries at lib folder however Binary zip had them + in boot folder it had plexus-classworlds-2.4.jar. Perhaps the problem was with the absence of these libraries. Anyway it helped me so my M2_HOME is: C:\\Program Files\\Java\\apache-maven-3.0.5 and at PATH I put: C:\\Program Files\\Java\\apache-maven-3.0.5\\bin.</p>\n"},{"tags":[],"owner":{"account_id":484929,"reputation":1993,"user_id":900924,"display_name":"wu liang"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1425373663,"creation_date":1425373663,"answer_id":28827809,"question_id":11118237,"body_markdown":"I find this issue in my centOS is caused by &quot;Oracle Java is replace by gcj&quot;, after change default java to &quot;Oracle Java&quot;, the issue is resolved.\r\n\r\n\r\n    alternatives --config java\r\n    \r\n    There are 2 programs which provide &#39;java&#39;.\r\n    \r\n      Selection    Command\r\n    -----------------------------------------------\r\n    *  1           /usr/lib/jvm/jre-1.5.0-gcj/bin/java\r\n     + 2           /usr/java/jdk1.7.0_67/bin/java","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I find this issue in my centOS is caused by \"Oracle Java is replace by gcj\", after change default java to \"Oracle Java\", the issue is resolved.</p>\n\n<pre><code>alternatives --config java\n\nThere are 2 programs which provide 'java'.\n\n  Selection    Command\n-----------------------------------------------\n*  1           /usr/lib/jvm/jre-1.5.0-gcj/bin/java\n + 2           /usr/java/jdk1.7.0_67/bin/java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3805046,"reputation":1192,"user_id":3157709,"accept_rate":28,"display_name":"Hammad Hassan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1440052443,"creation_date":1440052443,"answer_id":32111076,"question_id":11118237,"body_markdown":"It look like that you have installed Source files(Because `src` only comes in Source Files and we don&#39;t need it). Try to install **Binary Files** from\r\n[there](https://maven.apache.org/download.cgi).\r\nAnd then set environment variables as described\r\n[there](http://www.mkyong.com/maven/how-to-install-maven-in-windows/).\r\nThis worked for me. And I am sure it will also work for you.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>It look like that you have installed Source files(Because <code>src</code> only comes in Source Files and we don't need it). Try to install <strong>Binary Files</strong> from\n<a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow\">there</a>.\nAnd then set environment variables as described\n<a href=\"http://www.mkyong.com/maven/how-to-install-maven-in-windows/\" rel=\"nofollow\">there</a>.\nThis worked for me. And I am sure it will also work for you.</p>\n"},{"comments":[{"owner":{"account_id":1832410,"reputation":2433,"user_id":1663522,"display_name":"Bartho Bernsmann"},"score":0,"creation_date":1491589981,"post_id":33559093,"comment_id":73637996,"body_markdown":"I was just about to post this. This is exactly the problem I faced. If only I had read your answer before it would have saved me 30 minutes.","body":"I was just about to post this. This is exactly the problem I faced. If only I had read your answer before it would have saved me 30 minutes."}],"tags":[],"owner":{"account_id":1798893,"reputation":13116,"user_id":1637673,"accept_rate":63,"display_name":"Mithril"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1446781321,"creation_date":1446781321,"answer_id":33559093,"question_id":11118237,"body_markdown":"I think you download the wrong version.\r\nI meet this problem just now, no method work after searching and searching.\r\nFinally, I found that maven I downloaded is [Source zip archive][2].\r\nAfter I change to [Binary zip archive][1], everything go to be fine.\r\n\r\n\r\n  [1]: http://mirrors.cnnic.cn/apache/maven/maven-3/3.3.3/binaries/apache-maven-3.3.3-bin.zip\r\n  [2]: http://mirrors.cnnic.cn/apache/maven/maven-3/3.3.3/source/apache-maven-3.3.3-src.zip","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I think you download the wrong version.\nI meet this problem just now, no method work after searching and searching.\nFinally, I found that maven I downloaded is <a href=\"http://mirrors.cnnic.cn/apache/maven/maven-3/3.3.3/source/apache-maven-3.3.3-src.zip\" rel=\"nofollow\">Source zip archive</a>.\nAfter I change to <a href=\"http://mirrors.cnnic.cn/apache/maven/maven-3/3.3.3/binaries/apache-maven-3.3.3-bin.zip\" rel=\"nofollow\">Binary zip archive</a>, everything go to be fine.</p>\n"},{"comments":[{"owner":{"account_id":1623729,"reputation":5200,"user_id":1499766,"accept_rate":86,"display_name":"Scott Kurz"},"score":0,"creation_date":1615498588,"post_id":34906223,"comment_id":117717001,"body_markdown":"I appreciate this answer..  For me it was reusing some &quot;dot files&quot; across systems without customizing, which was messing up the &quot;CLASSWORLDS_JAR=`build-classpath plexus-classworlds`&quot;  call.   The point is there&#39;s any number of things you mess up and yeah, you just have to bite the bullet and run `set -x` and debug.","body":"I appreciate this answer..  For me it was reusing some &quot;dot files&quot; across systems without customizing, which was messing up the &quot;CLASSWORLDS_JAR=<code>build-classpath plexus-classworlds</code>&quot;  call.   The point is there&#39;s any number of things you mess up and yeah, you just have to bite the bullet and run <code>set -x</code> and debug."}],"tags":[],"owner":{"account_id":1988549,"reputation":12047,"user_id":1783163,"accept_rate":97,"display_name":"peterh"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1453309739,"creation_date":1453309739,"answer_id":34906223,"question_id":11118237,"body_markdown":"Next to the maybe useful, but maybe too symptomatic answers, here is one which tries to help to find the cause of the problem.\r\n\r\nMaven is a command-line java tool. That means, it is not a standalone binary, it is a collection of java `.jar`s, interpreted by a jvm (`java.exe` on windows, `java` on linux).\r\n\r\nThe `mvn` command, is a script. On windows, it is a script called `mvn.cmd` and on linux, it is a shell script. Thus, if you write: `mvn install`, what will happen:\r\n\r\n1. a command interpreter (`/bin/sh` or `cmd.exe`) is called for the actual invoking script\r\n2. this script sets the needed environment variables\r\n3. and finally, it calls a java interpreter with the the required classpath which contain the maven functionality.\r\n\r\nThe problem is with (2). Fortunately, this script is simply, very simple. For a java programmer it shouldn&#39;t be a big trouble to debug a script around 20 lines, even if it is a little bit alien language.\r\n\r\nOn linux, you can debug shellscripts giving the `-x` flag to your shell interpreter (which is most probably `bash`). On windows, you have to find some other way to debug a `cmd.exe` script. So, instead of `mvn install`, give the command `bash -x mvn install`.\r\n\r\nThe result be like:\r\n\r\n    + &#39;[&#39; -z &#39;&#39; &#39;]&#39;\r\n    + &#39;[&#39; -f /etc/mavenrc &#39;]&#39;\r\n    + &#39;[&#39; -f /home/picsa/.mavenrc &#39;]&#39;\r\n    + cygwin=true\r\n    + darwin=false\r\n\r\n...not so many things...\r\n\r\n    + MAVEN_PROJECTBASEDIR=&#39;C:\\peter\\bin&#39;\r\n    + export MAVEN_PROJECTBASEDIR\r\n    + MAVEN_CMD_LINE_ARGS=&#39; &#39;\r\n    + export MAVEN_CMD_LINE_ARGS\r\n    + exec &#39;/cygdrive/c/Program Files/Java/jdk1.8.0_66/bin/java&#39; -classpath &#39;C:\\peter/boot/plexus-classworlds-*.jar&#39; &#39;-Dclassworlds.conf=C:\\peter/bin/m2.conf&#39; &#39;-Dmaven.home=C:\\peter&#39; &#39;-Dmaven.multiModuleProjectDirectory=C:\\peter\\bin&#39; org.codehaus.plexus.classworlds.launcher.Launcher\r\n    Fehler: Hauptklasse org.codehaus.plexus.classworlds.launcher.Launcher konnte nicht gefunden oder geladen werden\r\n\r\nAt the end, you can easily test, which environment variable gone bad, and you can very easily fix your script (or set it what is needed).","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Next to the maybe useful, but maybe too symptomatic answers, here is one which tries to help to find the cause of the problem.</p>\n\n<p>Maven is a command-line java tool. That means, it is not a standalone binary, it is a collection of java <code>.jar</code>s, interpreted by a jvm (<code>java.exe</code> on windows, <code>java</code> on linux).</p>\n\n<p>The <code>mvn</code> command, is a script. On windows, it is a script called <code>mvn.cmd</code> and on linux, it is a shell script. Thus, if you write: <code>mvn install</code>, what will happen:</p>\n\n<ol>\n<li>a command interpreter (<code>/bin/sh</code> or <code>cmd.exe</code>) is called for the actual invoking script</li>\n<li>this script sets the needed environment variables</li>\n<li>and finally, it calls a java interpreter with the the required classpath which contain the maven functionality.</li>\n</ol>\n\n<p>The problem is with (2). Fortunately, this script is simply, very simple. For a java programmer it shouldn't be a big trouble to debug a script around 20 lines, even if it is a little bit alien language.</p>\n\n<p>On linux, you can debug shellscripts giving the <code>-x</code> flag to your shell interpreter (which is most probably <code>bash</code>). On windows, you have to find some other way to debug a <code>cmd.exe</code> script. So, instead of <code>mvn install</code>, give the command <code>bash -x mvn install</code>.</p>\n\n<p>The result be like:</p>\n\n<pre><code>+ '[' -z '' ']'\n+ '[' -f /etc/mavenrc ']'\n+ '[' -f /home/picsa/.mavenrc ']'\n+ cygwin=true\n+ darwin=false\n</code></pre>\n\n<p>...not so many things...</p>\n\n<pre><code>+ MAVEN_PROJECTBASEDIR='C:\\peter\\bin'\n+ export MAVEN_PROJECTBASEDIR\n+ MAVEN_CMD_LINE_ARGS=' '\n+ export MAVEN_CMD_LINE_ARGS\n+ exec '/cygdrive/c/Program Files/Java/jdk1.8.0_66/bin/java' -classpath 'C:\\peter/boot/plexus-classworlds-*.jar' '-Dclassworlds.conf=C:\\peter/bin/m2.conf' '-Dmaven.home=C:\\peter' '-Dmaven.multiModuleProjectDirectory=C:\\peter\\bin' org.codehaus.plexus.classworlds.launcher.Launcher\nFehler: Hauptklasse org.codehaus.plexus.classworlds.launcher.Launcher konnte nicht gefunden oder geladen werden\n</code></pre>\n\n<p>At the end, you can easily test, which environment variable gone bad, and you can very easily fix your script (or set it what is needed).</p>\n"},{"tags":[],"owner":{"account_id":9978701,"reputation":21,"user_id":7382339,"display_name":"vinoth kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1484646258,"creation_date":1484646258,"answer_id":41693734,"question_id":11118237,"body_markdown":"Me too faced the similar issue. But in my case I used apache-maven-3.3.3-src folder in path variables. Later I corrected those with correct path of folder apache-maven-3.3.3-bin. This resolved the issue. Am not telling that is the same error reported here but this way also you can get this error and rectify it. That is what I am trying to say here.\r\n","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Me too faced the similar issue. But in my case I used apache-maven-3.3.3-src folder in path variables. Later I corrected those with correct path of folder apache-maven-3.3.3-bin. This resolved the issue. Am not telling that is the same error reported here but this way also you can get this error and rectify it. That is what I am trying to say here.</p>\n"},{"tags":[],"owner":{"account_id":200555,"reputation":4778,"user_id":446464,"accept_rate":77,"display_name":"JESii"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1487218313,"creation_date":1487218313,"answer_id":42264796,"question_id":11118237,"body_markdown":"The solution for later versions of Maven is straight-forward. I am on OS X ElCap, 10.11.6 and upgraded to Maven 3.3.9. I had the same problem with error &quot;`Could not find ...org.codehaus.plexus...`&quot;. The link provided [here][1] offered the solution in a comment by McKamey - simply delete M2_HOME (`unset M2_HOME`). Once I tried that, it all worked as expected. \r\n\r\nThis can be confirmed by visiting the `Maven install page`: &quot;Add the bin directory of the created directory apache-maven-3.3.9 to the PATH environment variable&quot; -- no mention of M2_HOME or M3_HOME at all.\r\n\r\n\r\n  [1]: http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>The solution for later versions of Maven is straight-forward. I am on OS X ElCap, 10.11.6 and upgraded to Maven 3.3.9. I had the same problem with error \"<code>Could not find ...org.codehaus.plexus...</code>\". The link provided <a href=\"http://www.johnlabarge.com/post/33156663109/dreaded-maven-error-could-not-find-or-load-main\" rel=\"noreferrer\">here</a> offered the solution in a comment by McKamey - simply delete M2_HOME (<code>unset M2_HOME</code>). Once I tried that, it all worked as expected. </p>\n\n<p>This can be confirmed by visiting the <code>Maven install page</code>: \"Add the bin directory of the created directory apache-maven-3.3.9 to the PATH environment variable\" -- no mention of M2_HOME or M3_HOME at all.</p>\n"},{"tags":[],"owner":{"account_id":7781494,"reputation":537,"user_id":5887766,"display_name":"Shaini Sinha"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1501752012,"creation_date":1501752012,"answer_id":45479974,"question_id":11118237,"body_markdown":"Just make sure you&#39;ve downloaded Binary zip archive(apache-maven-3.5.0-bin.zip) instead of Source zip archive. Then add the bin directory of the created directory apache-maven-3.5.0 to the PATH environment variable.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Just make sure you've downloaded Binary zip archive(apache-maven-3.5.0-bin.zip) instead of Source zip archive. Then add the bin directory of the created directory apache-maven-3.5.0 to the PATH environment variable.</p>\n"},{"comments":[{"owner":{"account_id":5056790,"reputation":406,"user_id":4059810,"display_name":"ChrisE"},"score":0,"creation_date":1593861881,"post_id":47969545,"comment_id":110928273,"body_markdown":"This worked for me. Follow the guide here: https://maven.apache.org/install.html and set your system PATH variable with C:\\apache-maven-3.6.3\\bin","body":"This worked for me. Follow the guide here: <a href=\"https://maven.apache.org/install.html\" rel=\"nofollow noreferrer\">maven.apache.org/install.html</a> and set your system PATH variable with C:\\apache-maven-3.6.3\\bin"},{"owner":{"account_id":6753581,"reputation":914,"user_id":5202845,"accept_rate":0,"display_name":"khodayar J"},"score":0,"creation_date":1648220230,"post_id":47969545,"comment_id":126576636,"body_markdown":"very good hint , since there is also a bin folder inside a nested apache-maven folder of the SRC zip files!","body":"very good hint , since there is also a bin folder inside a nested apache-maven folder of the SRC zip files!"}],"tags":[],"owner":{"account_id":4438311,"reputation":571,"user_id":3613535,"display_name":"saravp"},"comment_count":2,"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1514212403,"creation_date":1514212403,"answer_id":47969545,"question_id":11118237,"body_markdown":"I believe this error caused because of downloading SRC instead of BINARY from Maven site. Please make sure to download Binary zip.\r\n\r\nBecause the below path, you will get only when you download SRC:\r\n\r\n&gt; M2_HOME C:\\apache-maven-3.0.4\\apache-maven\\src\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AJaKj.jpg","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I believe this error caused because of downloading SRC instead of BINARY from Maven site. Please make sure to download Binary zip.</p>\n\n<p>Because the below path, you will get only when you download SRC:</p>\n\n<blockquote>\n  <p>M2_HOME C:\\apache-maven-3.0.4\\apache-maven\\src</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/AJaKj.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AJaKj.jpg\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":3392135,"reputation":101,"user_id":2846748,"display_name":"Sreekanth"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1531765371,"creation_date":1531765371,"answer_id":51367951,"question_id":11118237,"body_markdown":"For most of the Maven setup issues something like &quot;Could not find or load main class...&quot;, start-with below steps to see if that fixes:\r\n\r\n - Make sure you unzipped the right archive (BINARY archive and not SOURCE archive)\r\n - Remove all user and system variables related to Maven (ex. M2_HOME,M2_OPTS etc.)\r\n - Make sure JAVA_HOME system variable is setup  (ex. &quot;C:\\Program Files\\Java\\jdk1.8.0_172&quot;)\r\n - Make sure java bin location is added in &quot;path&quot; system variable (ex. &quot;%JAVA_HOME%\\bin&quot;)\r\n - Make sure maven bin location is added in &quot;path&quot; system variable (ex. &quot;C:\\MyInstalls\\apache-maven-3.5.4\\bin&quot;)\r\n\r\nthen...\r\n\r\n - Verify java is setup (at commandprompt : java -version)\r\n - Verify maven is setup (at commandprompt : mvn --version)\r\n\r\n\r\n","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>For most of the Maven setup issues something like \"Could not find or load main class...\", start-with below steps to see if that fixes:</p>\n\n<ul>\n<li>Make sure you unzipped the right archive (BINARY archive and not SOURCE archive)</li>\n<li>Remove all user and system variables related to Maven (ex. M2_HOME,M2_OPTS etc.)</li>\n<li>Make sure JAVA_HOME system variable is setup  (ex. \"C:\\Program Files\\Java\\jdk1.8.0_172\")</li>\n<li>Make sure java bin location is added in \"path\" system variable (ex. \"%JAVA_HOME%\\bin\")</li>\n<li>Make sure maven bin location is added in \"path\" system variable (ex. \"C:\\MyInstalls\\apache-maven-3.5.4\\bin\")</li>\n</ul>\n\n<p>then...</p>\n\n<ul>\n<li>Verify java is setup (at commandprompt : java -version)</li>\n<li>Verify maven is setup (at commandprompt : mvn --version)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":4355473,"reputation":17255,"user_id":3554264,"accept_rate":62,"display_name":"Christian Hujer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542642920,"creation_date":1542642920,"answer_id":53378345,"question_id":11118237,"body_markdown":"I had this problem when I used Maven 3.5.4 on OpenJDK 11 on Ubuntu. The OpenJDK 11 on Ubuntu is actually still a JDK10:\r\n\r\n    $ ls -al /etc/alternatives/java\r\n    lrwxrwxrwx 1 root root 43 Aug 24 04:54 /etc/alternatives/java -&gt; /usr/lib/jvm/java-11-openjdk-amd64/bin/java\r\n    $ java --version\r\n    openjdk 10.0.2 2018-07-17\r\n    OpenJDK Runtime Environment (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.3)\r\n    OpenJDK 64-Bit Server VM (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.3, mixed mode)\r\n\r\nI installed OpenJDK from Oracle into /opt/jdk-11.0.1 and run Maven like this:\r\n\r\n    JAVA_HOME=/opt/jdk-11.0.1 mvn\r\n\r\nIt now works like a charm.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I had this problem when I used Maven 3.5.4 on OpenJDK 11 on Ubuntu. The OpenJDK 11 on Ubuntu is actually still a JDK10:</p>\n\n<pre><code>$ ls -al /etc/alternatives/java\nlrwxrwxrwx 1 root root 43 Aug 24 04:54 /etc/alternatives/java -&gt; /usr/lib/jvm/java-11-openjdk-amd64/bin/java\n$ java --version\nopenjdk 10.0.2 2018-07-17\nOpenJDK Runtime Environment (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.3)\nOpenJDK 64-Bit Server VM (build 10.0.2+13-Ubuntu-1ubuntu0.18.04.3, mixed mode)\n</code></pre>\n\n<p>I installed OpenJDK from Oracle into /opt/jdk-11.0.1 and run Maven like this:</p>\n\n<pre><code>JAVA_HOME=/opt/jdk-11.0.1 mvn\n</code></pre>\n\n<p>It now works like a charm.</p>\n"},{"tags":[],"owner":{"account_id":2328194,"reputation":53,"user_id":2042177,"display_name":"Coolius"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543225329,"creation_date":1543225329,"answer_id":53478323,"question_id":11118237,"body_markdown":"I had a problem with surefire plugin itself. Going back to version 2.6 worked for me. Version 2.18/20/22.1 gave me the error.\r\nNow I tried version 3.0.0-M1 of surefire plugin and it works.\r\n\r\nSo something is wrong in surefire plgin between version 2.6 and 3.0.0. I assume there is something hardcoded as default which should not.","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I had a problem with surefire plugin itself. Going back to version 2.6 worked for me. Version 2.18/20/22.1 gave me the error.\nNow I tried version 3.0.0-M1 of surefire plugin and it works.</p>\n\n<p>So something is wrong in surefire plgin between version 2.6 and 3.0.0. I assume there is something hardcoded as default which should not.</p>\n"},{"tags":[],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1543865480,"creation_date":1543865480,"answer_id":53600612,"question_id":11118237,"body_markdown":"For me, funny as it sounds, it helped just restarting `eclipse`...","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>For me, funny as it sounds, it helped just restarting <code>eclipse</code>...</p>\n"},{"tags":[],"owner":{"account_id":6850508,"reputation":26,"user_id":5267823,"display_name":"Aberaitius"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552290474,"creation_date":1552290474,"answer_id":55097280,"question_id":11118237,"body_markdown":"This worked for me:\r\n\r\n 1. Remove all Mavin references in Environment Variables\r\n 2. Download the **Binary** from mavin\r\n 3. Unzip it to where you&#39;d like ex: C:\\apache-maven-3.6.0\r\n 4. Go to Environment variables and add to **System** variable path &quot;C:\\apache-maven-3.6.0\\bin&quot;\r\n 5. start command prompt as Administrator \r\n 6. check version with: mvn -v\r\n\r\nCMD Result:\r\n\r\nApache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-24T20:41:47+02:00)\r\nMaven home: C:\\apache-maven-3.6.0\\bin\\..\r\n\r\n\r\n\r\n\r\n\r\n","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>This worked for me:</p>\n\n<ol>\n<li>Remove all Mavin references in Environment Variables</li>\n<li>Download the <strong>Binary</strong> from mavin</li>\n<li>Unzip it to where you'd like ex: C:\\apache-maven-3.6.0</li>\n<li>Go to Environment variables and add to <strong>System</strong> variable path \"C:\\apache-maven-3.6.0\\bin\"</li>\n<li>start command prompt as Administrator </li>\n<li>check version with: mvn -v</li>\n</ol>\n\n<p>CMD Result:</p>\n\n<p>Apache Maven 3.6.0 (97c98ec64a1fdfee7767ce5ffb20918da4f719f3; 2018-10-24T20:41:47+02:00)\nMaven home: C:\\apache-maven-3.6.0\\bin..</p>\n"},{"tags":[],"owner":{"account_id":6374226,"reputation":351,"user_id":4945738,"display_name":"Bharath Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1564656157,"creation_date":1564656157,"answer_id":57307223,"question_id":11118237,"body_markdown":"install binary version of maven fixes the issues\r\n\r\napache-maven-3.6.1-bin.zip\r\n","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>install binary version of maven fixes the issues</p>\n\n<p>apache-maven-3.6.1-bin.zip</p>\n"},{"tags":[],"owner":{"account_id":12601597,"reputation":12580,"user_id":9164141,"accept_rate":93,"display_name":"Gast&#243;n Saill&#233;n"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1565824355,"creation_date":1565824355,"answer_id":57503126,"question_id":11118237,"body_markdown":"Open a new terminal and do the followin\r\n\r\n    M2_HOME=/Users/macbook/apache-maven-3.6.1 //Set where maven is\r\n    M2=$M2_HOME/bin                          //Set home as bin\r\n    export PATH=$M2:$PATH                   //Place the new path\r\n\r\nThen type\r\n\r\n    mvn -version\r\n\r\nYou can set this in `./bash_profile` to do it automatically each time you run the terminal","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Open a new terminal and do the followin</p>\n\n<pre><code>M2_HOME=/Users/macbook/apache-maven-3.6.1 //Set where maven is\nM2=$M2_HOME/bin                          //Set home as bin\nexport PATH=$M2:$PATH                   //Place the new path\n</code></pre>\n\n<p>Then type</p>\n\n<pre><code>mvn -version\n</code></pre>\n\n<p>You can set this in <code>./bash_profile</code> to do it automatically each time you run the terminal</p>\n"},{"tags":[],"owner":{"account_id":7608155,"reputation":31,"user_id":5770075,"display_name":"Venkata Rajeev Mandava"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585805985,"creation_date":1585805985,"answer_id":60984867,"question_id":11118237,"body_markdown":"I also faced the following Error in my system (Mac)\r\n\r\n**Error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher**\r\n\r\nAfter doing some random browsing, I came across the link &quot;http://maven.apache.org/install.html&quot; that says &quot;JAVA_HOME&quot; should be set to &quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre&quot;.\r\n\r\nWhen I changed &quot;JAVA_HOME&quot; as stated above in &quot;.bash_profile&quot;, &quot;mvn&quot; command started working but &quot;javac -version&quot; command stopped working.\r\n\r\nWhen I typed &quot;javac -version&quot; command, I got the following error\r\n\r\n**Unable to locate an executable at &quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre/bin/javac&quot; (-1)**\r\n\r\nHence I rolled back my &quot;JAVA_HOME&quot; to &quot;/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home&quot; in &quot;.bash_profile&quot; and added the following line at the top in &quot;mvn&quot; script\r\n\r\n**export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre**\r\n\r\nNow both &quot;mvn&quot; and &quot;javac&quot; commands worked properly, but after careful observation of the mvn script, I could not make the difference between the following commands\r\n\r\n/Library/Java/JavaVirtualMachines/**jdk1.8.0_45.jdk/Contents/Home/bin/java** -classpath /Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/boot/plexus-classworlds-2.6.0.jar -Dclassworlds.conf=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin/m2.conf -Dmaven.home=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1 -Dlibrary.jansi.path=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/lib/jansi-native -Dmaven.multiModuleProjectDirectory=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin org.codehaus.plexus.classworlds.launcher.Launcher\r\n\r\n/Library/Java/JavaVirtualMachines/**jdk1.8.0_45.jdk/Contents/Home/jre/bin/java** -classpath /Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/boot/plexus-classworlds-2.6.0.jar -Dclassworlds.conf=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin/m2.conf -Dmaven.home=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1 -Dlibrary.jansi.path=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/lib/jansi-native -Dmaven.multiModuleProjectDirectory=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin org.codehaus.plexus.classworlds.launcher.Launcher\r\n\r\nIn the above the first command caused the following error \r\n\r\n**Error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher**\r\n\r\nwhile the second command worked fine.\r\nPlease Note that both the above paths have &quot;java&quot; command while one is from &quot;jre&quot; the other is from &quot;jdk&quot;\r\n\r\nOther global variables are as following in &quot;.bash_profile&quot;\r\n\r\nexport M2_HOME=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1\r\n\r\nexport PATH=$PATH:$M2_HOME/bin","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I also faced the following Error in my system (Mac)</p>\n\n<p><strong>Error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher</strong></p>\n\n<p>After doing some random browsing, I came across the link \"<a href=\"http://maven.apache.org/install.html\" rel=\"nofollow noreferrer\">http://maven.apache.org/install.html</a>\" that says \"JAVA_HOME\" should be set to \"/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre\".</p>\n\n<p>When I changed \"JAVA_HOME\" as stated above in \".bash_profile\", \"mvn\" command started working but \"javac -version\" command stopped working.</p>\n\n<p>When I typed \"javac -version\" command, I got the following error</p>\n\n<p><strong>Unable to locate an executable at \"/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre/bin/javac\" (-1)</strong></p>\n\n<p>Hence I rolled back my \"JAVA_HOME\" to \"/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home\" in \".bash_profile\" and added the following line at the top in \"mvn\" script</p>\n\n<p><strong>export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_45.jdk/Contents/Home/jre</strong></p>\n\n<p>Now both \"mvn\" and \"javac\" commands worked properly, but after careful observation of the mvn script, I could not make the difference between the following commands</p>\n\n<p>/Library/Java/JavaVirtualMachines/<strong>jdk1.8.0_45.jdk/Contents/Home/bin/java</strong> -classpath /Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/boot/plexus-classworlds-2.6.0.jar -Dclassworlds.conf=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin/m2.conf -Dmaven.home=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1 -Dlibrary.jansi.path=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/lib/jansi-native -Dmaven.multiModuleProjectDirectory=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin org.codehaus.plexus.classworlds.launcher.Launcher</p>\n\n<p>/Library/Java/JavaVirtualMachines/<strong>jdk1.8.0_45.jdk/Contents/Home/jre/bin/java</strong> -classpath /Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/boot/plexus-classworlds-2.6.0.jar -Dclassworlds.conf=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin/m2.conf -Dmaven.home=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1 -Dlibrary.jansi.path=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/lib/jansi-native -Dmaven.multiModuleProjectDirectory=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1/bin org.codehaus.plexus.classworlds.launcher.Launcher</p>\n\n<p>In the above the first command caused the following error </p>\n\n<p><strong>Error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher</strong></p>\n\n<p>while the second command worked fine.\nPlease Note that both the above paths have \"java\" command while one is from \"jre\" the other is from \"jdk\"</p>\n\n<p>Other global variables are as following in \".bash_profile\"</p>\n\n<p>export M2_HOME=/Users/venkatarajeevmandava/Documents/Maven/apache-maven-3.6.1</p>\n\n<p>export PATH=$PATH:$M2_HOME/bin</p>\n"},{"tags":[],"owner":{"account_id":6557464,"reputation":4145,"user_id":5069746,"accept_rate":50,"display_name":"Kshitij Kohli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648810197,"creation_date":1648810197,"answer_id":71705719,"question_id":11118237,"body_markdown":"Was able to solve this issue by deleting the downloaded maven in my machine (  /Users/kkohli/Desktop/Personal/Code/Java/apache-maven-3.6.3 ) and re-downloading the binary version from the apache site. Did not modify any other bashprofile file etc ( My M2_HOME, JAVA_HOME etc are set inside my bashprofile)","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>Was able to solve this issue by deleting the downloaded maven in my machine (  /Users/kkohli/Desktop/Personal/Code/Java/apache-maven-3.6.3 ) and re-downloading the binary version from the apache site. Did not modify any other bashprofile file etc ( My M2_HOME, JAVA_HOME etc are set inside my bashprofile)</p>\n"},{"tags":[],"owner":{"account_id":6234233,"reputation":119,"user_id":4850014,"display_name":"samson ojo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661630691,"creation_date":1661630141,"answer_id":73514012,"question_id":11118237,"body_markdown":"I ran into the same error. Below is what happen. \r\n\r\nI introduced an error by mistake. So, instead of separating each PATH with semicolon\r\n\r\n&gt; (;)\r\n\r\n I separated it with column\r\n\r\n&gt; (:)\r\n\r\n hence the reason for the error below:\r\n\r\nError: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher\r\n\r\nAfter realising my mistake I changed the path from this:\r\n\r\n    export PATH=&quot;/Users/samo/Downloads/apache-maven-3.8.6/bin:$PATH:/Users/samo/Documents/flutter/bin&quot;\r\n\r\nto this:\r\n\r\n    export PATH=&quot;/Users/samo/Downloads/apache-maven-3.8.6/bin;$PATH:/Users/samo/Documents/flutter/bin&quot;\r\n\r\n\r\nAfter which everything started working.\r\n\r\nSo, please check that you are not making the same/similar mistake","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I ran into the same error. Below is what happen.</p>\n<p>I introduced an error by mistake. So, instead of separating each PATH with semicolon</p>\n<blockquote>\n<p>(;)</p>\n</blockquote>\n<p>I separated it with column</p>\n<blockquote>\n<p>(:)</p>\n</blockquote>\n<p>hence the reason for the error below:</p>\n<p>Error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher</p>\n<p>After realising my mistake I changed the path from this:</p>\n<pre><code>export PATH=&quot;/Users/samo/Downloads/apache-maven-3.8.6/bin:$PATH:/Users/samo/Documents/flutter/bin&quot;\n</code></pre>\n<p>to this:</p>\n<pre><code>export PATH=&quot;/Users/samo/Downloads/apache-maven-3.8.6/bin;$PATH:/Users/samo/Documents/flutter/bin&quot;\n</code></pre>\n<p>After which everything started working.</p>\n<p>So, please check that you are not making the same/similar mistake</p>\n"},{"tags":[],"owner":{"account_id":13782778,"reputation":935,"user_id":9947525,"display_name":"Fazal Haroon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666870709,"creation_date":1666870709,"answer_id":74221450,"question_id":11118237,"body_markdown":"step1: Install JDK and Set up JAVA_HOME\r\n\r\nStep2: then download the maven from [https://maven.apache.org/download.cgi][1]\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://maven.apache.org/download.cgi\r\n  [2]: https://i.stack.imgur.com/qHRiF.png\r\n\r\nStep3: Follow these steps to add the MAVEN_HOME environment variable\r\n\r\nClick on the New button and put MAVEN_HOME as variable name and C:\\Users\\fazal\\soft\\apache-maven-3.8.6 as variable value\r\n\r\nthen Add %MAVEN_HOME%\\bin to the PATH\r\n\r\nStep4: check again \r\n\r\n&gt; mvn -version","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>step1: Install JDK and Set up JAVA_HOME</p>\n<p>Step2: then download the maven from <a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">https://maven.apache.org/download.cgi</a>\n<a href=\"https://i.stack.imgur.com/qHRiF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qHRiF.png\" alt=\"enter image description here\" /></a></p>\n<p>Step3: Follow these steps to add the MAVEN_HOME environment variable</p>\n<p>Click on the New button and put MAVEN_HOME as variable name and C:\\Users\\fazal\\soft\\apache-maven-3.8.6 as variable value</p>\n<p>then Add %MAVEN_HOME%\\bin to the PATH</p>\n<p>Step4: check again</p>\n<blockquote>\n<p>mvn -version</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":20658998,"reputation":567,"user_id":15167371,"display_name":"shamnad sherief"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683625756,"creation_date":1683625756,"answer_id":76207987,"question_id":11118237,"body_markdown":"For a windows machine I cleared the error by downloading the tar.gz file and added the path after extracting the content to Programming files folder","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>For a windows machine I cleared the error by downloading the tar.gz file and added the path after extracting the content to Programming files folder</p>\n"}],"owner":{"account_id":426618,"reputation":1583,"user_id":807916,"accept_rate":17,"display_name":"manofsins"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":339937,"favorite_count":0,"down_vote_count":0,"up_vote_count":145,"answer_count":34,"score":145,"last_activity_date":1683625756,"creation_date":1340190506,"question_id":11118237,"body_markdown":"I have installed a latest `maven-3.0.4` on *Windows 7*:  \r\nThe installation details are as follows:  \r\nInstallation Path :  \r\n\r\n    C:\\apache-maven-3.0.4  \r\n\r\nEnvironment Variables are:  \r\n\r\n    M2_HOME C:\\apache-maven-3.0.4\\apache-maven\\src  \r\n    JAVA_HOME C:\\Program Files\\Java\\jdk-1.7.0_04  \r\n\r\nPath variables added are:  \r\n\r\n    %M2_HOME%\\bin;%JAVA_HOME%\\bin;\r\n\r\n  \r\nIn the command window it shows it like this:  \r\n\r\n    C:\\&gt;java -version  \r\n    java version &quot;1.7.0_04&quot;  \r\n    Java(TM) SE Runtime Environment (build 1.7.0_04-b22)  \r\n    Java HotSpot(TM) Client VM (build 23.0-b21, mixed mode, sharing)  \r\n    C:\\&gt;mvn -version  \r\n    Error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher  \r\n\r\nThis is the only version on maven installed on my PC and the solution given on many blogs referring to the deletion of the previous `M2_HOME` environment variable is not valid. \r\n\r\nI have read and tried all the solutions given at blogs such as : \r\n \r\n- [oracle blog](https://blogs.oracle.com/sreekanth/entry/java_lang_noclassdeffounderror_org_codehaus),  \r\n- [stackoverflow question](https://stackoverflow.com/questions/8139115/new-maven-install-mvn-version-java-lang-classnotfoundexception),  \r\n- [another stack question](https://stackoverflow.com/questions/6305795/problems-setting-up-maven),  \r\n- [some blog](http://www.permeance.com.au/web/terry.mueller/home/-/blogs/maven2-reports-java-lang-noclassdeffounderror:-org-codehaus-classworlds-launcher),  \r\n\r\nBut I&#39;m still not able to get to it. What I might be missing in this whole thing?","title":"Maven error: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher","body":"<p>I have installed a latest <code>maven-3.0.4</code> on <em>Windows 7</em>:<br />\nThe installation details are as follows:<br />\nInstallation Path :</p>\n<pre><code>C:\\apache-maven-3.0.4  \n</code></pre>\n<p>Environment Variables are:</p>\n<pre><code>M2_HOME C:\\apache-maven-3.0.4\\apache-maven\\src  \nJAVA_HOME C:\\Program Files\\Java\\jdk-1.7.0_04  \n</code></pre>\n<p>Path variables added are:</p>\n<pre><code>%M2_HOME%\\bin;%JAVA_HOME%\\bin;\n</code></pre>\n<p>In the command window it shows it like this:</p>\n<pre><code>C:\\&gt;java -version  \njava version &quot;1.7.0_04&quot;  \nJava(TM) SE Runtime Environment (build 1.7.0_04-b22)  \nJava HotSpot(TM) Client VM (build 23.0-b21, mixed mode, sharing)  \nC:\\&gt;mvn -version  \nError: Could not find or load main class org.codehaus.plexus.classworlds.launcher.Launcher  \n</code></pre>\n<p>This is the only version on maven installed on my PC and the solution given on many blogs referring to the deletion of the previous <code>M2_HOME</code> environment variable is not valid.</p>\n<p>I have read and tried all the solutions given at blogs such as :</p>\n<ul>\n<li><a href=\"https://blogs.oracle.com/sreekanth/entry/java_lang_noclassdeffounderror_org_codehaus\" rel=\"nofollow noreferrer\">oracle blog</a>,</li>\n<li><a href=\"https://stackoverflow.com/questions/8139115/new-maven-install-mvn-version-java-lang-classnotfoundexception\">stackoverflow question</a>,</li>\n<li><a href=\"https://stackoverflow.com/questions/6305795/problems-setting-up-maven\">another stack question</a>,</li>\n<li><a href=\"http://www.permeance.com.au/web/terry.mueller/home/-/blogs/maven2-reports-java-lang-noclassdeffounderror:-org-codehaus-classworlds-launcher\" rel=\"nofollow noreferrer\">some blog</a>,</li>\n</ul>\n<p>But I'm still not able to get to it. What I might be missing in this whole thing?</p>\n"},{"tags":["java","appium","android-uiautomator"],"comments":[{"owner":{"account_id":7865489,"reputation":380,"user_id":5944412,"display_name":"Bipin Kumar Chaurasia"},"score":0,"creation_date":1680786614,"post_id":75947817,"comment_id":133959113,"body_markdown":"Can you please try to increase the `uiautomator2ServerLaunchTimeout` time to `15000` or more as per observed from the logs you shared?","body":"Can you please try to increase the <code>uiautomator2ServerLaunchTimeout</code> time to <code>15000</code> or more as per observed from the logs you shared?"},{"owner":{"account_id":28230281,"reputation":11,"user_id":21579606,"display_name":"Grzeche"},"score":0,"creation_date":1680847925,"post_id":75947817,"comment_id":133969108,"body_markdown":"@BipinKumarChaurasia Hi, I did that and it didn&#39;t help. I increased it to as much as `240000`. It still fails, just takes more time before app timeouts","body":"@BipinKumarChaurasia Hi, I did that and it didn&#39;t help. I increased it to as much as <code>240000</code>. It still fails, just takes more time before app timeouts"},{"owner":{"account_id":7865489,"reputation":380,"user_id":5944412,"display_name":"Bipin Kumar Chaurasia"},"score":0,"creation_date":1680867055,"post_id":75947817,"comment_id":133972309,"body_markdown":"Which real mobile device are you using? Can you please share the model information along with android OS version?","body":"Which real mobile device are you using? Can you please share the model information along with android OS version?"}],"answers":[{"tags":[],"owner":{"account_id":28230281,"reputation":11,"user_id":21579606,"display_name":"Grzeche"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683625513,"creation_date":1683625513,"answer_id":76207948,"question_id":75947817,"body_markdown":"So I found a resolution to my problem. I used \r\n```\r\nUiAutomator2Options.setRemoteAdbHost(&quot;localhost&quot;) \r\n```\r\nand that&#39;s where the issue was. I don&#39;t really know why, as &quot;localhost&quot; is the default value. But changing it to \r\n```\r\nUiAutomator2Options.setRemoteAdbHost(&quot;127.0.0.1&quot;) \r\n``` \r\nfixed the issue for me. The session is correctly started.","title":"Cannot set AndroidDriver. AndroidUIAutomator2 cannot start a new session, with response code 500","body":"<p>So I found a resolution to my problem. I used</p>\n<pre><code>UiAutomator2Options.setRemoteAdbHost(&quot;localhost&quot;) \n</code></pre>\n<p>and that's where the issue was. I don't really know why, as &quot;localhost&quot; is the default value. But changing it to</p>\n<pre><code>UiAutomator2Options.setRemoteAdbHost(&quot;127.0.0.1&quot;) \n</code></pre>\n<p>fixed the issue for me. The session is correctly started.</p>\n"}],"owner":{"account_id":28230281,"reputation":11,"user_id":21579606,"display_name":"Grzeche"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":520,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683625513,"creation_date":1680772649,"question_id":75947817,"body_markdown":"I&#39;m using Appium 2.0.0-beta.61 and AndroidUiAutomator2, and when I try to start the Android driver, it fails, returning Response Code 500. I tried removing the Appium server app from the device and using a different device like other threads suggested but it doesn&#39;t help.  \r\n\r\nIncreasing the *uiautomator2ServerLaunchTimeout* also didn&#39;t help.\r\n\r\n```\r\n[AndroidUiautomator2Driver@9c56 (e03bdf49)] The instrumentation process cannot be initialized within 120000ms timeout. Make sure the application under test does not crash and investigate the logcat output. You could also try to increase the value of &#39;uiautomator2ServerLaunchTimeout&#39; capability\r\n10:31:32 SamsungS8Plus [ERROR] Failed to set driver. Closing Appium to prevent it from staying open after test fail. Please check exception below:\r\n10:31:32 SamsungS8Plus [ERROR] Could not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: The instrumentation process cannot be initialized within 120000ms timeout. Make sure the application under test does not crash and investigate the logcat output. You could also try to increase the value of &#39;uiautomator2ServerLaunchTimeout&#39; capability \r\nHost info: host: &#39;INV-15330&#39;, ip: &#39;192.168.67.232&#39;\r\nBuild info: version: &#39;4.8.1&#39;, revision: &#39;8ebccac989&#39;\r\nSystem info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;11.0.15&#39;\r\nDriver info: io.appium.java_client.android.AndroidDriver\r\nCommand: [null, newSession {capabilities=[{appium:adbPort=5037, appium:systemPort=8301, appium:newCommandTimeout=180, appium:androidInstallTimeout=120000, appium:automationName=UIAutomator2, appium:udid=712KPRW1234990, appium:uiautomator2ServerLaunchTimeout=120000, appium:autoGrantPermissions=true, appium:remoteAdbHost=localhost, appium:appActivity=com.unity3d.player.UnityPlayerActivity, platformName=ANDROID, appium:app=C:\\Users\\Gre\\Documents\\htautomation\\games\\Puzzle\\Android\\Puzzle.apk, appium:uiautomator2ServerInstallTimeout=120000}], desiredCapabilities=Capabilities {appium:adbPort: 5037, appium:androidInstallTimeout: 120000, appium:app: C:\\Users\\Gre\\Doc..., appium:appActivity: com.unity3d.player.UnityPla..., appium:autoGrantPermissions: true, appium:automationName: UIAutomator2, appium:newCommandTimeout: 180, appium:remoteAdbHost: localhost, appium:systemPort: 8301, appium:udid: 712KPRW1234990, appium:uiautomator2ServerInstallTimeout: 120000, appium:uiautomator2ServerLaunchTimeout: 120000, platformName: ANDROID}}]\r\nCapabilities {appium:adbPort: 5037, appium:androidInstallTimeout: 120000, appium:app: C:\\Users\\Gre\\Doc..., appium:appActivity: com.unity3d.player.UnityPla..., appium:autoGrantPermissions: true, appium:automationName: UIAutomator2, appium:newCommandTimeout: 180, appium:remoteAdbHost: localhost, appium:systemPort: 8301, appium:udid: 712KPRW1234990, appium:uiautomator2ServerInstallTimeout: 120000, appium:uiautomator2ServerLaunchTimeout: 120000, platformName: ANDROID}\r\n```\r\n\r\n```\r\nAppiumServiceBuilder builder;\r\n        builder = new AppiumServiceBuilder()\r\n                .withArgument(GeneralServerFlag.LOG_LEVEL, &quot;error&quot;)\r\n                .withArgument(GeneralServerFlag.ALLOW_INSECURE, &quot;adb_screen_streaming, chromedriver_autodownload&quot;)\r\n                .withIPAddress(&quot;127.0.0.1&quot;)\r\n                .usingPort(getAppiumServerFromSystemEnv());\r\n\r\n        server = AppiumDriverLocalService.buildService(builder);\r\n        server.start();\r\n```\r\n\r\n```\r\ntry {\r\n            driver = new AndroidDriver(server.getUrl(), options);\r\n        } catch (org.openqa.selenium.SessionNotCreatedException e) {\r\n            loggerUtils.log(LoggerLevel.ERROR,&quot;[HTA] Failed to set driver. Closing Appium to prevent it from staying open after test fail. Please check exception below:&quot;);\r\n            loggerUtils.log(LoggerLevel.ERROR, e.getMessage());\r\n            closeAppiumServer();\r\n        }\r\n```\r\n\r\nI wanted to launch an android application on a real device. Using Appium2 and AndroidUiAutomator2. The AndroidDriver cannot be initialized, timeout happens and returns Response code 500.","title":"Cannot set AndroidDriver. AndroidUIAutomator2 cannot start a new session, with response code 500","body":"<p>I'm using Appium 2.0.0-beta.61 and AndroidUiAutomator2, and when I try to start the Android driver, it fails, returning Response Code 500. I tried removing the Appium server app from the device and using a different device like other threads suggested but it doesn't help.</p>\n<p>Increasing the <em>uiautomator2ServerLaunchTimeout</em> also didn't help.</p>\n<pre><code>[AndroidUiautomator2Driver@9c56 (e03bdf49)] The instrumentation process cannot be initialized within 120000ms timeout. Make sure the application under test does not crash and investigate the logcat output. You could also try to increase the value of 'uiautomator2ServerLaunchTimeout' capability\n10:31:32 SamsungS8Plus [ERROR] Failed to set driver. Closing Appium to prevent it from staying open after test fail. Please check exception below:\n10:31:32 SamsungS8Plus [ERROR] Could not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: The instrumentation process cannot be initialized within 120000ms timeout. Make sure the application under test does not crash and investigate the logcat output. You could also try to increase the value of 'uiautomator2ServerLaunchTimeout' capability \nHost info: host: 'INV-15330', ip: '192.168.67.232'\nBuild info: version: '4.8.1', revision: '8ebccac989'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '11.0.15'\nDriver info: io.appium.java_client.android.AndroidDriver\nCommand: [null, newSession {capabilities=[{appium:adbPort=5037, appium:systemPort=8301, appium:newCommandTimeout=180, appium:androidInstallTimeout=120000, appium:automationName=UIAutomator2, appium:udid=712KPRW1234990, appium:uiautomator2ServerLaunchTimeout=120000, appium:autoGrantPermissions=true, appium:remoteAdbHost=localhost, appium:appActivity=com.unity3d.player.UnityPlayerActivity, platformName=ANDROID, appium:app=C:\\Users\\Gre\\Documents\\htautomation\\games\\Puzzle\\Android\\Puzzle.apk, appium:uiautomator2ServerInstallTimeout=120000}], desiredCapabilities=Capabilities {appium:adbPort: 5037, appium:androidInstallTimeout: 120000, appium:app: C:\\Users\\Gre\\Doc..., appium:appActivity: com.unity3d.player.UnityPla..., appium:autoGrantPermissions: true, appium:automationName: UIAutomator2, appium:newCommandTimeout: 180, appium:remoteAdbHost: localhost, appium:systemPort: 8301, appium:udid: 712KPRW1234990, appium:uiautomator2ServerInstallTimeout: 120000, appium:uiautomator2ServerLaunchTimeout: 120000, platformName: ANDROID}}]\nCapabilities {appium:adbPort: 5037, appium:androidInstallTimeout: 120000, appium:app: C:\\Users\\Gre\\Doc..., appium:appActivity: com.unity3d.player.UnityPla..., appium:autoGrantPermissions: true, appium:automationName: UIAutomator2, appium:newCommandTimeout: 180, appium:remoteAdbHost: localhost, appium:systemPort: 8301, appium:udid: 712KPRW1234990, appium:uiautomator2ServerInstallTimeout: 120000, appium:uiautomator2ServerLaunchTimeout: 120000, platformName: ANDROID}\n</code></pre>\n<pre><code>AppiumServiceBuilder builder;\n        builder = new AppiumServiceBuilder()\n                .withArgument(GeneralServerFlag.LOG_LEVEL, &quot;error&quot;)\n                .withArgument(GeneralServerFlag.ALLOW_INSECURE, &quot;adb_screen_streaming, chromedriver_autodownload&quot;)\n                .withIPAddress(&quot;127.0.0.1&quot;)\n                .usingPort(getAppiumServerFromSystemEnv());\n\n        server = AppiumDriverLocalService.buildService(builder);\n        server.start();\n</code></pre>\n<pre><code>try {\n            driver = new AndroidDriver(server.getUrl(), options);\n        } catch (org.openqa.selenium.SessionNotCreatedException e) {\n            loggerUtils.log(LoggerLevel.ERROR,&quot;[HTA] Failed to set driver. Closing Appium to prevent it from staying open after test fail. Please check exception below:&quot;);\n            loggerUtils.log(LoggerLevel.ERROR, e.getMessage());\n            closeAppiumServer();\n        }\n</code></pre>\n<p>I wanted to launch an android application on a real device. Using Appium2 and AndroidUiAutomator2. The AndroidDriver cannot be initialized, timeout happens and returns Response code 500.</p>\n"},{"tags":["java","properties","fileoutputstream"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1316354425,"post_id":7461901,"comment_id":9027480,"body_markdown":"If you read in the properties, add/change a property to that, and write out those properties, all of the properties should be there--can you show the code you tried for that?","body":"If you read in the properties, add/change a property to that, and write out those properties, all of the properties should be there--can you show the code you tried for that?"},{"owner":{"account_id":443256,"reputation":12498,"user_id":834362,"display_name":"home"},"score":0,"creation_date":1316354469,"post_id":7461901,"comment_id":9027484,"body_markdown":"@Dave Newton: Yeah, but they are not in the same order. This is a known problem... I guess this is what OP really wants.","body":"@Dave Newton: Yeah, but they are not in the same order. This is a known problem... I guess this is what OP really wants."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1316354664,"post_id":7461901,"comment_id":9027506,"body_markdown":"@home: Oh, I get it. Yeah, the curse of unordered collections, I guess. If that&#39;s the problem, might as well just treat it as a string, do a replace, and write it back out.","body":"@home: Oh, I get it. Yeah, the curse of unordered collections, I guess. If that&#39;s the problem, might as well just treat it as a string, do a replace, and write it back out."},{"owner":{"display_name":"user890704"},"score":0,"creation_date":1316355547,"post_id":7461901,"comment_id":9027635,"body_markdown":"There, just updated.  Still same result, whole file is overwritten.","body":"There, just updated.  Still same result, whole file is overwritten."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1316985715,"post_id":7461901,"comment_id":114292910,"body_markdown":"Another answer reminded me of the [Apache Commons Configuration](http://commons.apache.org/configuration/howto_properties.html) library, specifically the capabilities [PropertiesConfigurationLayout](http://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/PropertiesConfigurationLayout.html). This allows (more or less) the original layout, comments, ordering, etc. to be preserved.","body":"Another answer reminded me of the <a href=\"http://commons.apache.org/configuration/howto_properties.html\" rel=\"nofollow noreferrer\">Apache Commons Configuration</a> library, specifically the capabilities <a href=\"http://commons.apache.org/configuration/apidocs/org/apache/commons/configuration/PropertiesConfigurationLayout.html\" rel=\"nofollow noreferrer\">PropertiesConfigurationLayout</a>. This allows (more or less) the original layout, comments, ordering, etc. to be preserved."},{"owner":{"account_id":297814,"reputation":25324,"user_id":603516,"accept_rate":100,"display_name":"Vadzim"},"score":0,"creation_date":1498815808,"post_id":7461901,"comment_id":76666978,"body_markdown":"Possible duplicate of [Updating property value in properties file without deleting other values](https://stackoverflow.com/questions/15337409/updating-property-value-in-properties-file-without-deleting-other-values)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/15337409/updating-property-value-in-properties-file-without-deleting-other-values\">Updating property value in properties file without deleting other values</a>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1643297518,"creation_date":1316356614,"answer_id":7462171,"question_id":7461901,"body_markdown":"The `Properties` API doesn&#39;t provide any methods for adding/replacing/removing a property in the properties file.  The model that the API supports is to load all of the properties from a file, make changes to the in-memory `Properties` object, and then store all of the properties to a file (the same one or a different one).\r\n\r\nBut the `Properties` API is not unusual in the respect.  In reality, in-place updating of a text file is difficult to implement without rewriting the entire file.  This difficulty is a direct consequence of the way that files / file systems are implemented by a modern operating system.\r\n\r\nIf you really need to do incremental updates, then you need to use some kind of database to hold the properties, not a &quot;.properties&quot; file.\r\n\r\n--------------\r\n\r\nOther Answers have suggested the following approach in various guises:\r\n\r\n  1.  Load properties from file into `Properties` object.\r\n  2.  Update `Properties` object.\r\n  3.  Save `Properties` object on top of existing file.\r\n\r\nThis works for some use-cases.  However the load / save is liable to reorder the properties, remove embedded comments and white space.   These things *may* matter&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\nThe other point is that this involves rewriting the entire properties file, which the OP is explicitly trying&lt;sup&gt;2&lt;/sup&gt; to avoid.\r\n\r\n----------------\r\n\r\n&lt;sup&gt;1 - If the API is used as the designers intended, property order, embedded comments, and so on *wouldn&#39;t* matter.  But lets assume that the OP is doing this for &quot;pragmatic reasons&quot;.&lt;br&gt;\r\n2 - Not that it is *practical* to avoid this; see earlier.&lt;/sup&gt;  \r\n","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<p>The <code>Properties</code> API doesn't provide any methods for adding/replacing/removing a property in the properties file.  The model that the API supports is to load all of the properties from a file, make changes to the in-memory <code>Properties</code> object, and then store all of the properties to a file (the same one or a different one).</p>\n<p>But the <code>Properties</code> API is not unusual in the respect.  In reality, in-place updating of a text file is difficult to implement without rewriting the entire file.  This difficulty is a direct consequence of the way that files / file systems are implemented by a modern operating system.</p>\n<p>If you really need to do incremental updates, then you need to use some kind of database to hold the properties, not a &quot;.properties&quot; file.</p>\n<hr />\n<p>Other Answers have suggested the following approach in various guises:</p>\n<ol>\n<li>Load properties from file into <code>Properties</code> object.</li>\n<li>Update <code>Properties</code> object.</li>\n<li>Save <code>Properties</code> object on top of existing file.</li>\n</ol>\n<p>This works for some use-cases.  However the load / save is liable to reorder the properties, remove embedded comments and white space.   These things <em>may</em> matter<sup>1</sup>.</p>\n<p>The other point is that this involves rewriting the entire properties file, which the OP is explicitly trying<sup>2</sup> to avoid.</p>\n<hr />\n<p><sup>1 - If the API is used as the designers intended, property order, embedded comments, and so on <em>wouldn't</em> matter.  But lets assume that the OP is doing this for &quot;pragmatic reasons&quot;.<br>\n2 - Not that it is <em>practical</em> to avoid this; see earlier.</sup></p>\n"},{"tags":[],"owner":{"account_id":781143,"reputation":1507,"user_id":839428,"display_name":"parsifal"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1316357025,"creation_date":1316357025,"answer_id":7462208,"question_id":7461901,"body_markdown":"Properties files are an easy way to provide configuration for an application, but not necessarily a good way to do programmatic, user-specific customization, for just the reason that you&#39;ve found.\r\n\r\nFor that, I&#39;d use the [Preferences][1] API.\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/index.html?overview-summary.html","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<p>Properties files are an easy way to provide configuration for an application, but not necessarily a good way to do programmatic, user-specific customization, for just the reason that you've found.</p>\n\n<p>For that, I'd use the <a href=\"http://download.oracle.com/javase/6/docs/api/index.html?overview-summary.html\" rel=\"nofollow\">Preferences</a> API.</p>\n"},{"tags":[],"owner":{"account_id":2495067,"reputation":1,"user_id":2171744,"display_name":"Laks"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683625462,"creation_date":1363297127,"answer_id":15420706,"question_id":7461901,"body_markdown":"```\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\nclass WritePropertiesFile\r\n{\r\n\r\n             public static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\tProperties p = new Properties();\r\n\t\t\tp.setProperty(&quot;1&quot;, &quot;one&quot;);\r\n\t\t\tp.setProperty(&quot;2&quot;, &quot;two&quot;);\r\n\t\t\tp.setProperty(&quot;3&quot;, &quot;three&quot;);\r\n\r\n\t\t\tFile file = new File(&quot;task.properties&quot;);\r\n\t\t\tFileOutputStream fOut = new FileOutputStream(file);\r\n\t\t\tp.store(fOut, &quot;Favorite Things&quot;);\r\n\t\t\tfOut.close();\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n```","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<pre><code>import java.io.*;\nimport java.util.*;\n\nclass WritePropertiesFile\n{\n\n             public static void main(String[] args) {\n        try {\n            Properties p = new Properties();\n            p.setProperty(&quot;1&quot;, &quot;one&quot;);\n            p.setProperty(&quot;2&quot;, &quot;two&quot;);\n            p.setProperty(&quot;3&quot;, &quot;three&quot;);\n\n            File file = new File(&quot;task.properties&quot;);\n            FileOutputStream fOut = new FileOutputStream(file);\n            p.store(fOut, &quot;Favorite Things&quot;);\n            fOut.close();\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5143608,"reputation":1009,"user_id":4120181,"accept_rate":33,"display_name":"AnirbanDebnath"},"score":3,"creation_date":1473021616,"post_id":15522238,"comment_id":65974468,"body_markdown":"This is the best solution. It keeps the properties file intact; doesn&#39;t mess it up.","body":"This is the best solution. It keeps the properties file intact; doesn&#39;t mess it up."},{"owner":{"account_id":1965862,"reputation":3669,"user_id":1766166,"accept_rate":71,"display_name":"zygimantus"},"score":1,"creation_date":1489860990,"post_id":15522238,"comment_id":72859817,"body_markdown":"You need to change: `props.setProperty` --&gt; `config.setProperty`","body":"You need to change: <code>props.setProperty</code> --&gt; <code>config.setProperty</code>"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1490610102,"post_id":15522238,"comment_id":73171873,"body_markdown":"While this is a pragmatic solution, it is not what the OP asked for.  Specifically, the entire file is being rewritten / overwritten.","body":"While this is a pragmatic solution, it is not what the OP asked for.  Specifically, the entire file is being rewritten / overwritten."},{"owner":{"account_id":6410016,"reputation":7025,"user_id":4970079,"accept_rate":76,"display_name":"GOXR3PLUS"},"score":0,"creation_date":1494577818,"post_id":15522238,"comment_id":74898302,"body_markdown":"As of version 2.1.1 `save()` method and the constructor you are using is not supported . Have you any alternatives :) ?","body":"As of version 2.1.1 <code>save()</code> method and the constructor you are using is not supported . Have you any alternatives :) ?"}],"tags":[],"owner":{"account_id":1956719,"reputation":321,"user_id":1759581,"display_name":"davidpolo"},"comment_count":4,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1494588834,"creation_date":1363778832,"answer_id":15522238,"question_id":7461901,"body_markdown":"You can use PropertiesConfiguration from [Apache Commons Configuration][1].\r\n\r\nIn version 1.X:\r\n\r\n    PropertiesConfiguration config = new PropertiesConfiguration(&quot;file.properties&quot;);\r\n    config.setProperty(&quot;somekey&quot;, &quot;somevalue&quot;);\r\n    config.save();\r\n\r\nFrom version 2.0:\r\n\r\n    Parameters params = new Parameters();\r\n    FileBasedConfigurationBuilder&lt;FileBasedConfiguration&gt; builder =\r\n        new FileBasedConfigurationBuilder&lt;FileBasedConfiguration&gt;(PropertiesConfiguration.class)\r\n        .configure(params.properties()\r\n            .setFileName(&quot;file.properties&quot;));\r\n    Configuration config = builder.getConfiguration();\r\n    config.setProperty(&quot;somekey&quot;, &quot;somevalue&quot;);\r\n    builder.save();\r\n\r\n  [1]: http://commons.apache.org/proper/commons-configuration//userguide/howto_properties.html#Properties_files","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<p>You can use PropertiesConfiguration from <a href=\"http://commons.apache.org/proper/commons-configuration//userguide/howto_properties.html#Properties_files\" rel=\"noreferrer\">Apache Commons Configuration</a>.</p>\n\n<p>In version 1.X:</p>\n\n<pre><code>PropertiesConfiguration config = new PropertiesConfiguration(\"file.properties\");\nconfig.setProperty(\"somekey\", \"somevalue\");\nconfig.save();\n</code></pre>\n\n<p>From version 2.0:</p>\n\n<pre><code>Parameters params = new Parameters();\nFileBasedConfigurationBuilder&lt;FileBasedConfiguration&gt; builder =\n    new FileBasedConfigurationBuilder&lt;FileBasedConfiguration&gt;(PropertiesConfiguration.class)\n    .configure(params.properties()\n        .setFileName(\"file.properties\"));\nConfiguration config = builder.getConfiguration();\nconfig.setProperty(\"somekey\", \"somevalue\");\nbuilder.save();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1210400,"reputation":125,"user_id":1179056,"accept_rate":56,"display_name":"rIshab1988"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1372128597,"creation_date":1372128597,"answer_id":17288381,"question_id":7461901,"body_markdown":"    public class PropertiesXMLExample {\r\n        public static void main(String[] args) throws IOException {\r\n        \r\n        // get properties object\r\n\t\tProperties props = new Properties();\r\n\r\n        // get path of the file that you want\r\n        String filepath = System.getProperty(&quot;user.home&quot;)\r\n\t\t\t\t+ System.getProperty(&quot;file.separator&quot;) +&quot;email-configuration.xml&quot;;\r\n\t\t\r\n        // get file object\r\n\t\tFile file = new File(filepath);\r\n                \r\n        // check whether the file exists\r\n\t\tif (file.exists()) {\r\n            // get inpustream of the file\r\n\t\t\tInputStream is = new FileInputStream(filepath);\r\n\r\n\t\t\t// load the xml file into properties format\r\n\t\t\tprops.loadFromXML(is);\r\n                        \r\n            // store all the property keys in a set \r\n\t\t\tSet&lt;String&gt; names = props.stringPropertyNames();\r\n            \r\n            // iterate over all the property names\r\n\t\t\tfor (Iterator&lt;String&gt; i = names.iterator(); i.hasNext();) {\r\n                // store each propertyname that you get\r\n\t\t\t\tString propname = i.next();\r\n                                \r\n                // set all the properties (since these properties are not automatically stored when you update the file). All these properties will be rewritten. You also set some new value for the property names that you read\r\n\t\t\t\tprops.setProperty(propname, props.getProperty(propname));\r\n\t\t\t}\r\n\r\n            // add some new properties to the props object\r\n\t\t\tprops.setProperty(&quot;email.support&quot;, &quot;donot-spam-me@nospam.com&quot;);\r\n\t\t\tprops.setProperty(&quot;email.support_2&quot;, &quot;donot-spam-me@nospam.com&quot;);\r\n\r\n           // get outputstream object to for storing the properties into the same xml file that you read\r\n\t\t\tOutputStream os = new FileOutputStream(\r\n\t\t\t\t\tSystem.getProperty(&quot;user.home&quot;)\r\n\t\t\t\t\t\t\t+ &quot;/email-configuration.xml&quot;);\r\n\r\n\t\t\t// store the properties detail into a pre-defined XML file\r\n\t\t\tprops.storeToXML(os, &quot;Support Email&quot;, &quot;UTF-8&quot;);\r\n                        \r\n            // an earlier stored property\r\n\t\t\tString email = props.getProperty(&quot;email.support_1&quot;);\r\n\r\n\t\t\tSystem.out.println(email);\r\n\t\t  }\r\n\t   }\r\n    }\r\n\r\n\r\nThe output of the program would be:\r\n    \r\n    support@stackoverflow.com","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<pre><code>public class PropertiesXMLExample {\n    public static void main(String[] args) throws IOException {\n\n    // get properties object\n    Properties props = new Properties();\n\n    // get path of the file that you want\n    String filepath = System.getProperty(\"user.home\")\n            + System.getProperty(\"file.separator\") +\"email-configuration.xml\";\n\n    // get file object\n    File file = new File(filepath);\n\n    // check whether the file exists\n    if (file.exists()) {\n        // get inpustream of the file\n        InputStream is = new FileInputStream(filepath);\n\n        // load the xml file into properties format\n        props.loadFromXML(is);\n\n        // store all the property keys in a set \n        Set&lt;String&gt; names = props.stringPropertyNames();\n\n        // iterate over all the property names\n        for (Iterator&lt;String&gt; i = names.iterator(); i.hasNext();) {\n            // store each propertyname that you get\n            String propname = i.next();\n\n            // set all the properties (since these properties are not automatically stored when you update the file). All these properties will be rewritten. You also set some new value for the property names that you read\n            props.setProperty(propname, props.getProperty(propname));\n        }\n\n        // add some new properties to the props object\n        props.setProperty(\"email.support\", \"donot-spam-me@nospam.com\");\n        props.setProperty(\"email.support_2\", \"donot-spam-me@nospam.com\");\n\n       // get outputstream object to for storing the properties into the same xml file that you read\n        OutputStream os = new FileOutputStream(\n                System.getProperty(\"user.home\")\n                        + \"/email-configuration.xml\");\n\n        // store the properties detail into a pre-defined XML file\n        props.storeToXML(os, \"Support Email\", \"UTF-8\");\n\n        // an earlier stored property\n        String email = props.getProperty(\"email.support_1\");\n\n        System.out.println(email);\n      }\n   }\n}\n</code></pre>\n\n<p>The output of the program would be:</p>\n\n<pre><code>support@stackoverflow.com\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6657673,"reputation":11,"user_id":5137655,"display_name":"Prateek Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1475562823,"creation_date":1475562823,"answer_id":39845589,"question_id":7461901,"body_markdown":"I do the following method:-\r\n\r\n 1. Read the file and load the properties object\r\n 2. Update or add new properties by using &quot;.setProperty&quot; method. (setProperty method is better than .put method as it can be used for inserting as well as updating the property object)\r\n 3. Write the property object back to file to keep the file in sync with the change.","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<p>I do the following method:-</p>\n\n<ol>\n<li>Read the file and load the properties object</li>\n<li>Update or add new properties by using \".setProperty\" method. (setProperty method is better than .put method as it can be used for inserting as well as updating the property object)</li>\n<li>Write the property object back to file to keep the file in sync with the change.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5739121,"reputation":514,"user_id":4532319,"display_name":"oguz"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1594894530,"creation_date":1594894530,"answer_id":62932445,"question_id":7461901,"body_markdown":"If you just want to override 1 prop why not just add parameter to your java command. Whatever you provide in your properties file they will be overrided with properties args.\r\n\r\n```\r\njava -Dyour.prop.to.be.overrided=&quot;value&quot; -jar  your.jar\r\n```","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<p>If you just want to override 1 prop why not just add parameter to your java command. Whatever you provide in your properties file they will be overrided with properties args.</p>\n<pre><code>java -Dyour.prop.to.be.overrided=&quot;value&quot; -jar  your.jar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7446926,"reputation":21,"user_id":5662782,"display_name":"Sawek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644338040,"creation_date":1644338040,"answer_id":71037430,"question_id":7461901,"body_markdown":"Please use just update file line instead using Properies e.g. \r\n\r\n    public static void updateProperty(String key, String oldValue, String newValue)\r\n    {\r\n        File f = new File(CONFIG_FILE);\r\n        try {\r\n            List&lt;String&gt; fileContent = new ArrayList&lt;&gt;(Files.readAllLines(f.toPath(), StandardCharsets.UTF_8));\r\n\r\n            for (int i = 0; i &lt; fileContent.size(); i++) {\r\n                if (fileContent.get(i).replaceAll(&quot;\\\\s+&quot;,&quot;&quot;).equals(key + &quot;=&quot; + oldValue)) {\r\n                    fileContent.set(i, key + &quot; = &quot; + newValue);\r\n                    break;\r\n                }\r\n            }\r\n            Files.write(f.toPath(), fileContent, StandardCharsets.UTF_8);\r\n        } catch (Exception e) {\r\n            \r\n        }\r\n    }\r\n\r\n","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<p>Please use just update file line instead using Properies e.g.</p>\n<pre><code>public static void updateProperty(String key, String oldValue, String newValue)\n{\n    File f = new File(CONFIG_FILE);\n    try {\n        List&lt;String&gt; fileContent = new ArrayList&lt;&gt;(Files.readAllLines(f.toPath(), StandardCharsets.UTF_8));\n\n        for (int i = 0; i &lt; fileContent.size(); i++) {\n            if (fileContent.get(i).replaceAll(&quot;\\\\s+&quot;,&quot;&quot;).equals(key + &quot;=&quot; + oldValue)) {\n                fileContent.set(i, key + &quot; = &quot; + newValue);\n                break;\n            }\n        }\n        Files.write(f.toPath(), fileContent, StandardCharsets.UTF_8);\n    } catch (Exception e) {\n        \n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4504932,"reputation":1401,"user_id":3662539,"accept_rate":86,"display_name":"Brandon"},"score":1,"creation_date":1698004232,"post_id":76207423,"comment_id":136347260,"body_markdown":"This is indeed the correct answer.  You must open up the FileOutputStream after you close the FileInputStream, otherwise the instance of the file opened will be overwritten.","body":"This is indeed the correct answer.  You must open up the FileOutputStream after you close the FileInputStream, otherwise the instance of the file opened will be overwritten."}],"tags":[],"owner":{"account_id":7365909,"reputation":442,"user_id":5607657,"accept_rate":100,"display_name":"Davey D"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683622043,"creation_date":1683622043,"answer_id":76207423,"question_id":7461901,"body_markdown":"I know this is an old question, but this is working code (slightly modified from the code in the question, to prevent the deletion of the values before we load them):\r\n\r\n    FileInputStream in = new FileInputStream(&quot;file.properties&quot;);\r\n    Properties props = new Properties();\r\n    \r\n    props.load(in);\r\n    in.close();\r\n    \r\n    props.setProperty(&quot;somekey&quot;, &quot;somevalue&quot;);\r\n    \r\n    FileOutputStream out = new FileOutputStream(&quot;file.properties&quot;);\r\n    props.store(out, null);\r\n    out.close();","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<p>I know this is an old question, but this is working code (slightly modified from the code in the question, to prevent the deletion of the values before we load them):</p>\n<pre><code>FileInputStream in = new FileInputStream(&quot;file.properties&quot;);\nProperties props = new Properties();\n\nprops.load(in);\nin.close();\n\nprops.setProperty(&quot;somekey&quot;, &quot;somevalue&quot;);\n\nFileOutputStream out = new FileOutputStream(&quot;file.properties&quot;);\nprops.store(out, null);\nout.close();\n</code></pre>\n"}],"owner":{"display_name":"user890704"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69459,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":7462171,"answer_count":9,"score":32,"last_activity_date":1683625462,"creation_date":1316354129,"question_id":7461901,"body_markdown":"Basically, I have to overwrite a certain property in a .properties file through a Java app, but when I use Properties.setProperty() and Properties.Store() it overwrites the whole file rather than just that one property.\r\n\r\nI&#39;ve tried constructing the FileOutputStream with append = true, but with that it adds another property and doesn&#39;t delete/overwrite the existing property.\r\n\r\nHow can I code it so that setting one property overwrites that specific property, without overwriting the whole file?\r\n\r\nEdit:  I tried reading the file and adding to it.  Here&#39;s my updated code:\r\n\r\n    FileOutputStream out = new FileOutputStream(&quot;file.properties&quot;);\r\n    FileInputStream in = new FileInputStream(&quot;file.properties&quot;);\r\n    Properties props = new Properties();\r\n            \r\n    props.load(in);\r\n    in.close();\r\n         \r\n    props.setProperty(&quot;somekey&quot;, &quot;somevalue&quot;);\r\n    props.store(out, null);\r\n    out.close();","title":"How to overwrite one property in .properties without overwriting the whole file?","body":"<p>Basically, I have to overwrite a certain property in a .properties file through a Java app, but when I use Properties.setProperty() and Properties.Store() it overwrites the whole file rather than just that one property.</p>\n\n<p>I've tried constructing the FileOutputStream with append = true, but with that it adds another property and doesn't delete/overwrite the existing property.</p>\n\n<p>How can I code it so that setting one property overwrites that specific property, without overwriting the whole file?</p>\n\n<p>Edit:  I tried reading the file and adding to it.  Here's my updated code:</p>\n\n<pre><code>FileOutputStream out = new FileOutputStream(\"file.properties\");\nFileInputStream in = new FileInputStream(\"file.properties\");\nProperties props = new Properties();\n\nprops.load(in);\nin.close();\n\nprops.setProperty(\"somekey\", \"somevalue\");\nprops.store(out, null);\nout.close();\n</code></pre>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"account_id":9223153,"reputation":1182,"user_id":6851769,"accept_rate":80,"display_name":"Samuel"},"score":1,"creation_date":1670370844,"post_id":74709805,"comment_id":131860465,"body_markdown":"@xerx593 : Thank you for your comment. I tried the suggested approach but now I am getting `The filename, directory name, or volume label syntax is incorrect` . I have added `UPDATE 3` in my question for more insight","body":"@xerx593 : Thank you for your comment. I tried the suggested approach but now I am getting <code>The filename, directory name, or volume label syntax is incorrect</code> . I have added <code>UPDATE 3</code> in my question for more insight"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1670377154,"post_id":74709805,"comment_id":131861460,"body_markdown":"so with (springboot-web) `server.ssl.key-store` i got it working like so: `C:/Users/xerx/Desktop/TEST FOLDER/springboot.jks` (double backslash also works), no chance with `file:` neither with wrong file name/typos :)) (tested also with spring-boot:2.6.4 (and java 19!:))) ..now the question is only about kafka...","body":"so with (springboot-web) <code>server.ssl.key-store</code> i got it working like so: <code>C:&#47;Users&#47;xerx&#47;Desktop&#47;TEST FOLDER&#47;springboot.jks</code> (double backslash also works), no chance with <code>file:</code> neither with wrong file name/typos :)) (tested also with spring-boot:2.6.4 (and java 19!:))) ..now the question is only about kafka..."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1670377719,"post_id":74709805,"comment_id":131861541,"body_markdown":"at least i found the line (hope correct version) to blame/debug: https://github.com/confluentinc/schema-registry/blob/2e7500bb2daea563be009574f8a786fc65cc833c/client/src/main/java/io/confluent/kafka/schemaregistry/client/security/SslFactory.java#L161  ..so provide the same string as you would to `new FileInputStream(...);`","body":"at least i found the line (hope correct version) to blame/debug: <a href=\"https://github.com/confluentinc/schema-registry/blob/2e7500bb2daea563be009574f8a786fc65cc833c/client/src/main/java/io/confluent/kafka/schemaregistry/client/security/SslFactory.java#L161\" rel=\"nofollow noreferrer\">github.com/confluentinc/schema-registry/blob/&hellip;</a>  ..so provide the same string as you would to <code>new FileInputStream(...);</code>"},{"owner":{"account_id":7644621,"reputation":488,"user_id":5795699,"display_name":"Kristian Ferki"},"score":0,"creation_date":1670416948,"post_id":74709805,"comment_id":131871045,"body_markdown":"Have you tried `file://C:/Users/xx/Downloads/stores/testclient.jks`?","body":"Have you tried <code>file:&#47;&#47;C:&#47;Users&#47;xx&#47;Downloads&#47;stores&#47;testclient.jks</code>?"}],"answers":[{"tags":[],"owner":{"account_id":21104016,"reputation":21,"user_id":18371085,"display_name":"aerialace"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683625399,"creation_date":1683625399,"answer_id":76207930,"question_id":74709805,"body_markdown":"maybe you could try the below sol. it can work in my case\r\n\r\n    config-path: &quot;file:E:\\\\config&quot;\r\n","title":"Setting correct absolute path in application yaml spring boot for file","body":"<p>maybe you could try the below sol. it can work in my case</p>\n<pre><code>config-path: &quot;file:E:\\\\config&quot;\n</code></pre>\n"}],"owner":{"account_id":9223153,"reputation":1182,"user_id":6851769,"accept_rate":80,"display_name":"Samuel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1008,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1683625399,"creation_date":1670366219,"question_id":74709805,"body_markdown":"I am trying to run a kafka code, and to do that I have setup some config in application.yaml file. The config also include pointing to the certificates. \r\n\r\nWhen I have put values like:\r\n\r\n```yaml\r\n    ssl:\r\n      key-password: xxxx\r\n      keystore-location: &#39;file:\\\\C:\\Users\\xx\\Downloads\\stores\\testclient.jks&#39;\r\n      keystore-password: dmlnvba\r\n      truststore-location: &#39;file:\\\\C:\\Users\\xx\\Downloads\\stores\\truststore.jks&#39;\r\n      truststore-password: xxxxx\r\n```\r\n\r\nI get errors like:\r\n\r\n```\r\nCaused by: java.io.FileNotFoundException: file:\\C:\\Users\\xx\\Downloads\\stores\\testclient.jks (The filename, directory name, or volume label syntax is incorrect)\r\n\tat java.io.FileInputStream.open0(Native Method) ~[?:?]\r\n\tat java.io.FileInputStream.open(FileInputStream.java:216) ~[?:?]\r\n\tat java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157) ~[?:?]\r\n\tat java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111) ~[?:?]\r\n\tat io.confluent.kafka.schemaregistry.client.security.SslFactory$SecurityStore.load(SslFactory.java:161) ~[kafka-schema-registry-client-6.0.0.jar:?]\r\n```\r\n\r\nI looked over into answers like [this][1] but I am not sure why is it not working for me. \r\n\r\n### Update 2\r\n\r\nWhen I do it like\r\n\r\n```yaml\r\n    ssl:\r\n      key-password: xxxx\r\n      keystore-location: &#39;C:/Users/xx/Downloads/stores/testclient.jks&#39;\r\n      keystore-password: dmlnvba\r\n      truststore-location: &#39;C:/Users/xx/Downloads/stores/truststore.jks&#39;\r\n      truststore-password: xxxxx\r\n\r\n```\r\n\r\n```\r\nCaused by: java.io.FileNotFoundException: ServletContext resource [/C:/Users/xx/Downloads/stores/testclient.jks] cannot be resolved to absolute file path - web application archive not expanded?\r\n\tat org.springframework.web.util.WebUtils.getRealPath(WebUtils.java:344) ~[spring-web-5.3.16.jar:5.3.16]\tat org.springframework.web.context.support.ServletContextResource.getFile(ServletContextResource.java:194) ~[spring-web-5.3.16.jar:5.3.16]\r\n\tat org.springframework.boot.autoconfigure.kafka.KafkaProperties$Ssl.resourceToPath(KafkaProperties.java:1222) ~[spring-boot-autoconfigure-2.6.4.jar:2.6.4]\r\n\tat org.springframework.boot.context.properties.PropertyMapper$Source.lambda$as$2(PropertyMapper.java:195) ~[spring-boot-2.6.4.jar:2.6.4]\r\n```\r\n\r\n&gt; I notice that the path in the update 2 has `/C:` a slash appended to it.\r\n\r\nHow to fix this path issue ?\r\n\r\n### OS: Windows 10\r\n\r\n### Update 3\r\n\r\nWhen I do it like what @xerx593 suggested :\r\n \r\n\r\n```yaml\r\n    ssl:\r\n      key-password: xxxx\r\n      keystore-location: &#39;file:C:/Users/xx/Downloads/stores/testclient.jks&#39;\r\n      keystore-password: dmlnvba\r\n      truststore-location: &#39;file:C:/Users/xx/Downloads/stores/truststore.jks&#39;\r\n      truststore-password: xxxxx\r\n\r\n```\r\nI get \r\n\r\n&gt; Caused by: java.io.FileNotFoundException: file:C:\\Users\\xx\\Downloads\\stores\\testclient.jks (The filename, directory name, or volume label syntax is incorrect)\r\n\r\n  [1]: https://stackoverflow.com/questions/39049075/absolute-path-in-application-yml","title":"Setting correct absolute path in application yaml spring boot for file","body":"<p>I am trying to run a kafka code, and to do that I have setup some config in application.yaml file. The config also include pointing to the certificates.</p>\n<p>When I have put values like:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    ssl:\n      key-password: xxxx\n      keystore-location: 'file:\\\\C:\\Users\\xx\\Downloads\\stores\\testclient.jks'\n      keystore-password: dmlnvba\n      truststore-location: 'file:\\\\C:\\Users\\xx\\Downloads\\stores\\truststore.jks'\n      truststore-password: xxxxx\n</code></pre>\n<p>I get errors like:</p>\n<pre><code>Caused by: java.io.FileNotFoundException: file:\\C:\\Users\\xx\\Downloads\\stores\\testclient.jks (The filename, directory name, or volume label syntax is incorrect)\n    at java.io.FileInputStream.open0(Native Method) ~[?:?]\n    at java.io.FileInputStream.open(FileInputStream.java:216) ~[?:?]\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157) ~[?:?]\n    at java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111) ~[?:?]\n    at io.confluent.kafka.schemaregistry.client.security.SslFactory$SecurityStore.load(SslFactory.java:161) ~[kafka-schema-registry-client-6.0.0.jar:?]\n</code></pre>\n<p>I looked over into answers like <a href=\"https://stackoverflow.com/questions/39049075/absolute-path-in-application-yml\">this</a> but I am not sure why is it not working for me.</p>\n<h3>Update 2</h3>\n<p>When I do it like</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    ssl:\n      key-password: xxxx\n      keystore-location: 'C:/Users/xx/Downloads/stores/testclient.jks'\n      keystore-password: dmlnvba\n      truststore-location: 'C:/Users/xx/Downloads/stores/truststore.jks'\n      truststore-password: xxxxx\n\n</code></pre>\n<pre><code>Caused by: java.io.FileNotFoundException: ServletContext resource [/C:/Users/xx/Downloads/stores/testclient.jks] cannot be resolved to absolute file path - web application archive not expanded?\n    at org.springframework.web.util.WebUtils.getRealPath(WebUtils.java:344) ~[spring-web-5.3.16.jar:5.3.16] at org.springframework.web.context.support.ServletContextResource.getFile(ServletContextResource.java:194) ~[spring-web-5.3.16.jar:5.3.16]\n    at org.springframework.boot.autoconfigure.kafka.KafkaProperties$Ssl.resourceToPath(KafkaProperties.java:1222) ~[spring-boot-autoconfigure-2.6.4.jar:2.6.4]\n    at org.springframework.boot.context.properties.PropertyMapper$Source.lambda$as$2(PropertyMapper.java:195) ~[spring-boot-2.6.4.jar:2.6.4]\n</code></pre>\n<blockquote>\n<p>I notice that the path in the update 2 has <code>/C:</code> a slash appended to it.</p>\n</blockquote>\n<p>How to fix this path issue ?</p>\n<h3>OS: Windows 10</h3>\n<h3>Update 3</h3>\n<p>When I do it like what @xerx593 suggested :</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>    ssl:\n      key-password: xxxx\n      keystore-location: 'file:C:/Users/xx/Downloads/stores/testclient.jks'\n      keystore-password: dmlnvba\n      truststore-location: 'file:C:/Users/xx/Downloads/stores/truststore.jks'\n      truststore-password: xxxxx\n\n</code></pre>\n<p>I get</p>\n<blockquote>\n<p>Caused by: java.io.FileNotFoundException: file:C:\\Users\\xx\\Downloads\\stores\\testclient.jks (The filename, directory name, or volume label syntax is incorrect)</p>\n</blockquote>\n"},{"tags":["java","git","docker","maven","jenkins"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683631215,"post_id":76207776,"comment_id":134393006,"body_markdown":"Error messages and logs have to use the same format as code, for readability.","body":"Error messages and logs have to use the same format as code, for readability."},{"owner":{"account_id":10833759,"reputation":51,"user_id":7967302,"display_name":"Neo"},"score":0,"creation_date":1683681505,"post_id":76207776,"comment_id":134402854,"body_markdown":"@aled, I know, but it&#39;s one line and very long error, I tried using code format and it seems even worse so I didn&#39;t use it. Please understand.","body":"@aled, I know, but it&#39;s one line and very long error, I tried using code format and it seems even worse so I didn&#39;t use it. Please understand."},{"owner":{"account_id":8512855,"reputation":81,"user_id":6382363,"display_name":"jcmendez"},"score":0,"creation_date":1683888576,"post_id":76207776,"comment_id":134439001,"body_markdown":"On regards of the first failure, in custom Dockerfiles we use to create the Jenkins user for avoid such issue. Have you try it?","body":"On regards of the first failure, in custom Dockerfiles we use to create the Jenkins user for avoid such issue. Have you try it?"},{"owner":{"account_id":10833759,"reputation":51,"user_id":7967302,"display_name":"Neo"},"score":0,"creation_date":1684314185,"post_id":76207776,"comment_id":134498841,"body_markdown":"Yes, it should work with custom Docker images, but how to fix this using public images like &#39;maven:3.6.3-openjdk-8&#39;","body":"Yes, it should work with custom Docker images, but how to fix this using public images like &#39;maven:3.6.3-openjdk-8&#39;"}],"owner":{"account_id":10833759,"reputation":51,"user_id":7967302,"display_name":"Neo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1683624825,"creation_date":1683624388,"question_id":76207776,"body_markdown":"I&#39;m using Jenkins and Maven Release plugin to make the release to tag to a private owned GitLab using a SSH private key, in an isolated docker image:\r\n\r\n    withDockerContainer(image: &#39;maven:3.6.3-openjdk-8&#39;) {\r\n        sshagent (credentials: [&quot;${GITLAB_CREDS}&quot;]) {\r\n            sh &#39;ssh -o StrictHostKeyChecking=no git@gitlab.***.com&#39;\r\n            sh &#39;git config --global user.email &quot;no-one@noemail.com&quot;&#39;\r\n            sh &#39;git config --global user.name &quot;Jenkins Job&quot;&#39;\r\n            sh &quot;mvn -B clean release:prepare release:perform -q&quot;\r\n        }\r\n    }\r\n\r\nThis works fine until SysAdmin team decided to run Jenkins using user jenkins:jenkins which maven docker doesn&#39;t have but, ssh requires a valid user. And it throws error:\r\n\r\n    No user exists for uid 332\r\n\r\nSo I don&#39;t want it to rely on system&#39;s native git client but a maven impl. After some investigation, seems maven-scm-provider-jgit is what I need. So I configured it in pom followed by the instruction in its website:\r\n\r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t&lt;configuration&gt;\r\n    \t\t&lt;providerImplementations&gt;\r\n    \t\t\t&lt;git&gt;jgit&lt;/git&gt;\r\n    \t\t&lt;/providerImplementations&gt;\r\n    \t&lt;/configuration&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-scm-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-scm-provider-jgit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    &lt;/plugin&gt;\r\n    \r\n    &lt;plugin&gt;\r\n    \t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;maven-scm-plugin&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    \t&lt;configuration&gt;\r\n    \t\t&lt;providerImplementations&gt;\r\n    \t\t\t&lt;git&gt;jgit&lt;/git&gt;\r\n    \t\t&lt;/providerImplementations&gt;\r\n    \t&lt;/configuration&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-scm-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;maven-scm-provider-jgit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    &lt;/plugin&gt;\r\n\r\nAnd in settings.xml:\r\n\r\n    &lt;server&gt;\r\n    \t&lt;id&gt;git@gitlab.***.com&lt;/id&gt;\r\n    \t&lt;privateKey&gt;${ssh.privateKey}&lt;/privateKey&gt;\r\n    \t&lt;passphrase&gt;&lt;/passphrase&gt;\r\n    &lt;/server&gt;\r\n\r\nAnd then in script: \r\n\r\n    withDockerContainer(image: &#39;maven:3.6.3-openjdk-8-slim&#39;) {\r\n    \twithCredentials([sshUserPrivateKey(credentialsId: &quot;${GITLAB_CREDS}&quot;, keyFileVariable: &#39;keyFile&#39;)]) {\r\n    \t\tconfigFileProvider([configFile(fileId: &#39;maven-nexus-settings&#39;, variable: &#39;MAVEN_SETTINGS&#39;)]) {\r\n    \t\t\t sh &quot;mvn -B -s ${MAVEN_SETTINGS} clean release:prepare release:perform -Dssh.privateKey=${keyFile} -q&quot;\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nAnd it returns error:\r\n\r\n+ mvn -B -s /var/lib/jenkins/workspace/jenkins-test@tmp/config6359189442870799267tmp clean release:prepare release:perform -Dssh.privateKey=**** -q\r\nThe authenticity of host &#39;gitlab.host.com&#39; cannot be established.: The EC key&#39;s fingerprints are:: MD5:7b:b2:aa:81:25:b9:88:6f:62:4c:13:d4:87:f9:c5:b5: SHA256:PYlJZompVha0FYBp5bTVR56HdGw3ZtfFkVhWol1OLgw: Accept and store this key, and continue connecting? (yes/no): [ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:3.0.0:prepare (default-cli) on project jenkins-test: An error is occurred in the checkin process: Exception while executing SCM command. JGit checkin failure! git@gitlab.host.com:dev-team/jenkins-test.git: DefaultAuthFuture[ssh-connection]: Failed (IllegalStateException) to execute: Cannot prompt user: Failed to read user response: EOF -&gt; [Help 1]\r\n\r\n\r\nAny suggestion on how to fix this error?","title":"Jenkins use maven release without ssh and git installed","body":"<p>I'm using Jenkins and Maven Release plugin to make the release to tag to a private owned GitLab using a SSH private key, in an isolated docker image:</p>\n<pre><code>withDockerContainer(image: 'maven:3.6.3-openjdk-8') {\n    sshagent (credentials: [&quot;${GITLAB_CREDS}&quot;]) {\n        sh 'ssh -o StrictHostKeyChecking=no git@gitlab.***.com'\n        sh 'git config --global user.email &quot;no-one@noemail.com&quot;'\n        sh 'git config --global user.name &quot;Jenkins Job&quot;'\n        sh &quot;mvn -B clean release:prepare release:perform -q&quot;\n    }\n}\n</code></pre>\n<p>This works fine until SysAdmin team decided to run Jenkins using user jenkins:jenkins which maven docker doesn't have but, ssh requires a valid user. And it throws error:</p>\n<pre><code>No user exists for uid 332\n</code></pre>\n<p>So I don't want it to rely on system's native git client but a maven impl. After some investigation, seems maven-scm-provider-jgit is what I need. So I configured it in pom followed by the instruction in its website:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-release-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;providerImplementations&gt;\n            &lt;git&gt;jgit&lt;/git&gt;\n        &lt;/providerImplementations&gt;\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-scm-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-scm-provider-jgit&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/plugin&gt;\n\n&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-scm-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;providerImplementations&gt;\n            &lt;git&gt;jgit&lt;/git&gt;\n        &lt;/providerImplementations&gt;\n    &lt;/configuration&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-scm-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.scm&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-scm-provider-jgit&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>And in settings.xml:</p>\n<pre><code>&lt;server&gt;\n    &lt;id&gt;git@gitlab.***.com&lt;/id&gt;\n    &lt;privateKey&gt;${ssh.privateKey}&lt;/privateKey&gt;\n    &lt;passphrase&gt;&lt;/passphrase&gt;\n&lt;/server&gt;\n</code></pre>\n<p>And then in script:</p>\n<pre><code>withDockerContainer(image: 'maven:3.6.3-openjdk-8-slim') {\n    withCredentials([sshUserPrivateKey(credentialsId: &quot;${GITLAB_CREDS}&quot;, keyFileVariable: 'keyFile')]) {\n        configFileProvider([configFile(fileId: 'maven-nexus-settings', variable: 'MAVEN_SETTINGS')]) {\n             sh &quot;mvn -B -s ${MAVEN_SETTINGS} clean release:prepare release:perform -Dssh.privateKey=${keyFile} -q&quot;\n        }\n    }\n}\n</code></pre>\n<p>And it returns error:</p>\n<ul>\n<li>mvn -B -s /var/lib/jenkins/workspace/jenkins-test@tmp/config6359189442870799267tmp clean release:prepare release:perform -Dssh.privateKey=**** -q\nThe authenticity of host 'gitlab.host.com' cannot be established.: The EC key's fingerprints are:: MD5:7b:b2:aa:81:25:b9:88:6f:62:4c:13:d4:87:f9:c5:b5: SHA256:PYlJZompVha0FYBp5bTVR56HdGw3ZtfFkVhWol1OLgw: Accept and store this key, and continue connecting? (yes/no): [ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:3.0.0:prepare (default-cli) on project jenkins-test: An error is occurred in the checkin process: Exception while executing SCM command. JGit checkin failure! git@gitlab.host.com:dev-team/jenkins-test.git: DefaultAuthFuture[ssh-connection]: Failed (IllegalStateException) to execute: Cannot prompt user: Failed to read user response: EOF -&gt; [Help 1]</li>\n</ul>\n<p>Any suggestion on how to fix this error?</p>\n"},{"tags":["java","spring-boot","tomcat","unix-socket"],"owner":{"account_id":2966038,"reputation":315,"user_id":2519165,"accept_rate":40,"display_name":"Devour"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1683624691,"creation_date":1683624691,"question_id":76207826,"body_markdown":"I&#39;m trying to configure Springboot(Tomcat) to start using unix-socket in Windows, but I get an error &quot;Address already in use: bind&quot;. I have my own connector with port 0, but in debug mode it appears to be -1 (I don&#39;t think it&#39;s causes this exception though). \r\nI&#39;m totaly new to this topic so will appreciate any pieces of advice where to start from. \r\nOr any examples. Thanks in advance. \r\nHere&#39;s my configuration:    \r\n \r\n    @Configuration\r\n    public class TomcatConfiguration {\r\n            @Bean\r\n            public TomcatServletWebServerFactory tomcatServletWebServerFactory() {\r\n                TomcatServletWebServerFactory factory = new TomcatServletWebServerFactory();\r\n        \r\n                factory.addConnectorCustomizers(\r\n                        connector -&gt; {\r\n                            connector.setPort(0);\r\n                            connector.setScheme(&quot;http&quot;);\r\n                            connector.setProperty(&quot;socketFactoryClassName&quot;, &quot;org.apache.tomcat.jni.SocketFactory&quot;);\r\n                            connector.setProperty(&quot;socketFactoryEncoding&quot;, &quot;UTF-8&quot;);\r\n        \r\n                            try {\r\n                                UnixDomainSocketAddress address =  UnixDomainSocketAddress.of(SOCKET_FILE);\r\n                                StandardProtocolFamily family = StandardProtocolFamily.UNIX;\r\n                                ServerSocketChannel server = ServerSocketChannel.open(family);\r\n                                server.bind(address);\r\n                                server.accept();\r\n                            } catch (Exception e) {\r\n                                e.printStackTrace();\r\n                            }\r\n                        }\r\n                );\r\n                return factory;\r\n          }\r\n    }","title":"SpringBoot configuration to enable unix sockets in Windows","body":"<p>I'm trying to configure Springboot(Tomcat) to start using unix-socket in Windows, but I get an error &quot;Address already in use: bind&quot;. I have my own connector with port 0, but in debug mode it appears to be -1 (I don't think it's causes this exception though).\nI'm totaly new to this topic so will appreciate any pieces of advice where to start from.\nOr any examples. Thanks in advance.\nHere's my configuration:</p>\n<pre><code>@Configuration\npublic class TomcatConfiguration {\n        @Bean\n        public TomcatServletWebServerFactory tomcatServletWebServerFactory() {\n            TomcatServletWebServerFactory factory = new TomcatServletWebServerFactory();\n    \n            factory.addConnectorCustomizers(\n                    connector -&gt; {\n                        connector.setPort(0);\n                        connector.setScheme(&quot;http&quot;);\n                        connector.setProperty(&quot;socketFactoryClassName&quot;, &quot;org.apache.tomcat.jni.SocketFactory&quot;);\n                        connector.setProperty(&quot;socketFactoryEncoding&quot;, &quot;UTF-8&quot;);\n    \n                        try {\n                            UnixDomainSocketAddress address =  UnixDomainSocketAddress.of(SOCKET_FILE);\n                            StandardProtocolFamily family = StandardProtocolFamily.UNIX;\n                            ServerSocketChannel server = ServerSocketChannel.open(family);\n                            server.bind(address);\n                            server.accept();\n                        } catch (Exception e) {\n                            e.printStackTrace();\n                        }\n                    }\n            );\n            return factory;\n      }\n}\n</code></pre>\n"},{"tags":["java","if-statement","while-loop","socket.io"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1683625069,"post_id":76207796,"comment_id":134391561,"body_markdown":"take a look at [this](https://stackoverflow.com/a/4300803/16034206), it seems likely that you closed the socket while there are still remainingBytes to be read. It might be better to have the condition while remainingBytes &gt; 0","body":"take a look at <a href=\"https://stackoverflow.com/a/4300803/16034206\">this</a>, it seems likely that you closed the socket while there are still remainingBytes to be read. It might be better to have the condition while remainingBytes &gt; 0"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1683625116,"post_id":76207796,"comment_id":134391573,"body_markdown":"have you debugged your code? Also, you may want to refactor it: this -&gt; &quot;close&quot;.trim().toLowerCase()) makes no sense at all.","body":"have you debugged your code? Also, you may want to refactor it: this -&gt; &quot;close&quot;.trim().toLowerCase()) makes no sense at all."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":1,"creation_date":1683627639,"post_id":76207796,"comment_id":134392208,"body_markdown":"No point in trimming and lowercasing a word that is already trimmed and in lowercase.","body":"No point in trimming and lowercasing a word that is already trimmed and in lowercase."},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1683631737,"post_id":76207796,"comment_id":134393121,"body_markdown":"The loop `while ((receivedBytes = dis.read(buffer)) &gt; 0)` will only be terminated when the client closes the connection. It will not terminate after the client is done sending a file.","body":"The loop <code>while ((receivedBytes = dis.read(buffer)) &gt; 0)</code> will only be terminated when the client closes the connection. It will not terminate after the client is done sending a file."}],"owner":{"account_id":28545767,"reputation":11,"user_id":21851209,"display_name":"raygaymon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1683624529,"creation_date":1683624529,"question_id":76207796,"body_markdown":"As part of my Java course, I&#39;m writing a server-client socket program that facilitates a file transfer. While the file transfer works fine, it always throws an exception whenever I try to close it from the client side.\r\n\r\nThe code for the server is as follows:\r\n\r\n```\r\n        String client = &quot;&quot;;\r\n        long size;\r\n        //set the connection checker and disconnector\r\n        boolean exit = false;\r\n\r\n        try  {\r\n\r\n            System.out.println(&quot;Client passed to thread&quot;);\r\n            InputStream is = sock.getInputStream();\r\n            BufferedInputStream bis = new BufferedInputStream(is);\r\n            DataInputStream dis = new DataInputStream(bis);\r\n\r\n\r\n            while (!exit) {\r\n\r\n                System.out.println(&quot;Client passed into while loop&quot;);\r\n                //put the stuff in a while loop\r\n                client = dis.readUTF();// can separate the types of input\r\n                size = dis.readLong();\r\n\r\n                if (client.equals(&quot;close&quot;.trim().toLowerCase())) {\r\n                    System.out.println(&quot;Client disconnected&quot;);\r\n                    dis.close();\r\n                    bis.close();\r\n                    is.close();\r\n                    exit = true;\r\n                    continue;\r\n                } \r\n                \r\n                else {\r\n\r\n                    System.out.println(&quot;File received: &quot; + client + &quot;\\nFile size: &quot; + size);\r\n                    // fileoutput is tacked onto output stream directly\r\n                    OutputStream os = new FileOutputStream(client);\r\n                    // create output stream to write to the file\r\n                    BufferedOutputStream bos = new BufferedOutputStream(os);\r\n\r\n                    byte[] buffer = new byte[4 * 1024];\r\n                    int receivedBytes = 0;\r\n                    long remainingBytes = 0;\r\n                    System.out.println(receivedBytes + &quot; received...&quot;);\r\n\r\n                    while ((receivedBytes = dis.read(buffer)) &gt; 0) {\r\n\r\n                        bos.write(buffer, 0, receivedBytes);\r\n                        remainingBytes = size - receivedBytes;\r\n                        System.out.println(receivedBytes + &quot; received...\\n&quot; + remainingBytes + &quot;left&quot;);\r\n                        bos.flush();\r\n                        exit = true;\r\n\r\n                    }\r\n\r\n                    bos.close();\r\n                    os.close();\r\n                }\r\n                \r\n            }\r\n\r\n            dis.close();\r\n            bis.close();\r\n            is.close();\r\n           \r\n            // if (size &lt; 20.0) {\r\n                \r\n            //     System.out.println(&quot;File size insufficient, please include more stuff&quot;);\r\n            // }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            \r\n        } finally {\r\n            try {\r\n                sock.close();\r\n            } catch (IOException e) {\r\n                \r\n            }\r\n\r\n        }\r\n```\r\n\r\nAnd the client code is here:\r\n\r\n```\r\nString input = &quot;&quot;;\r\n        long l = 1024;\r\n        int fileData;\r\n\r\n        Console cons = System.console();\r\n        Socket socket = new Socket(host, Integer.parseInt(port));\r\n\r\n        while (!(&quot;close&quot;).equals(input.trim().toLowerCase())) {\r\n\r\n            input = cons.readLine(&quot;Please indicate the file to be sent: \\n&quot;);\r\n\r\n\r\n            OutputStream os = socket.getOutputStream();\r\n            BufferedOutputStream bos = new BufferedOutputStream(os);\r\n            DataOutputStream dos = new DataOutputStream(bos);\r\n\r\n            if (input.equals(&quot;close&quot;.trim().toLowerCase())) {\r\n\r\n                dos.writeUTF(input);\r\n                dos.writeLong(l);\r\n                dos.flush();\r\n                System.out.println(&quot;Gotcha. Disconnecting&quot;);\r\n                break;\r\n            }\r\n\r\n            File toBeSent = new File(input);\r\n\r\n            if (!toBeSent.exists()) {\r\n\r\n                input = cons.readLine(&quot;That file does not exist. Would you like to create it: \\n&quot;);\r\n\r\n                if (input.equals(&quot;yes&quot;)) {\r\n\r\n                    toBeSent.createNewFile();\r\n                    System.out.println(&quot;File created, add something inside before sending&quot;);\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            else {\r\n\r\n                try {\r\n                    dos.writeUTF(input);\r\n                    dos.writeLong(toBeSent.length());\r\n                    dos.flush();\r\n\r\n                    InputStream is = new FileInputStream(toBeSent);\r\n\r\n                    BufferedInputStream bis = new BufferedInputStream(is);\r\n\r\n                    byte[] buffer = new byte[4 * 1024];\r\n                    int size = 0;\r\n\r\n                    while ((size = bis.read(buffer)) &gt; 0) {\r\n\r\n                        dos.write(buffer, 0, size);\r\n                        dos.flush();\r\n                    }\r\n\r\n                    bis.close();\r\n                    is.close();\r\n\r\n                    continue;\r\n\r\n                } catch (EOFException e) {\r\n\r\n                }\r\n                dos.close();\r\n                bos.close();\r\n                os.close();\r\n\r\n            }\r\n        }\r\n```\r\n\r\nThis thing is, the server-side code\r\n\r\n```\r\nif (client.equals(&quot;close&quot;.trim().toLowerCase())) {\r\n    System.out.println(&quot;Client disconnected&quot;);\r\n    dis.close();\r\n    bis.close();\r\n    is.close();\r\n    exit = true;\r\n    continue;\r\n} \r\n```\r\n\r\nworks just fine, but only as the first input. As soon as the rest of the server code runs, it throws an exception whenever I try to input &quot;close&quot; from the client:\r\n\r\n```\r\njava.net.SocketException: Connection reset\r\n        at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:313)\r\n        at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:340)\r\n        at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:789)\r\n        at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1025)\r\n        at java.base/java.io.BufferedInputStream.fill(BufferedInputStream.java:258)\r\n        at java.base/java.io.BufferedInputStream.read1(BufferedInputStream.java:313)\r\n        at java.base/java.io.BufferedInputStream.implRead(BufferedInputStream.java:386)       \r\n        at java.base/java.io.BufferedInputStream.read(BufferedInputStream.java:365)\r\n        at java.base/java.io.DataInputStream.read(DataInputStream.java:102)\r\n        at sg.edu.nus.iss.ClientHandler.run(ClientHandler.java:70)\r\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)  \r\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n        at java.base/java.lang.Thread.run(Thread.java:1623)\r\n```\r\n\r\nThe aforementioned Line 70 is the start of the while loop below:\r\n\r\n```\r\nwhile ((receivedBytes = dis.read(buffer)) &gt; 0) {\r\n\r\n                        bos.write(buffer, 0, receivedBytes);\r\n                        remainingBytes = size - receivedBytes;\r\n                        System.out.println(receivedBytes + &quot; received...\\n&quot; + remainingBytes + &quot;left&quot;);\r\n                        bos.flush();\r\n                        exit = true;\r\n\r\n                    }\r\n```\r\n\r\nAny insight would be greatly appreciated. Thank you!","title":"Why does my while loop continue to run despite the if condition","body":"<p>As part of my Java course, I'm writing a server-client socket program that facilitates a file transfer. While the file transfer works fine, it always throws an exception whenever I try to close it from the client side.</p>\n<p>The code for the server is as follows:</p>\n<pre><code>        String client = &quot;&quot;;\n        long size;\n        //set the connection checker and disconnector\n        boolean exit = false;\n\n        try  {\n\n            System.out.println(&quot;Client passed to thread&quot;);\n            InputStream is = sock.getInputStream();\n            BufferedInputStream bis = new BufferedInputStream(is);\n            DataInputStream dis = new DataInputStream(bis);\n\n\n            while (!exit) {\n\n                System.out.println(&quot;Client passed into while loop&quot;);\n                //put the stuff in a while loop\n                client = dis.readUTF();// can separate the types of input\n                size = dis.readLong();\n\n                if (client.equals(&quot;close&quot;.trim().toLowerCase())) {\n                    System.out.println(&quot;Client disconnected&quot;);\n                    dis.close();\n                    bis.close();\n                    is.close();\n                    exit = true;\n                    continue;\n                } \n                \n                else {\n\n                    System.out.println(&quot;File received: &quot; + client + &quot;\\nFile size: &quot; + size);\n                    // fileoutput is tacked onto output stream directly\n                    OutputStream os = new FileOutputStream(client);\n                    // create output stream to write to the file\n                    BufferedOutputStream bos = new BufferedOutputStream(os);\n\n                    byte[] buffer = new byte[4 * 1024];\n                    int receivedBytes = 0;\n                    long remainingBytes = 0;\n                    System.out.println(receivedBytes + &quot; received...&quot;);\n\n                    while ((receivedBytes = dis.read(buffer)) &gt; 0) {\n\n                        bos.write(buffer, 0, receivedBytes);\n                        remainingBytes = size - receivedBytes;\n                        System.out.println(receivedBytes + &quot; received...\\n&quot; + remainingBytes + &quot;left&quot;);\n                        bos.flush();\n                        exit = true;\n\n                    }\n\n                    bos.close();\n                    os.close();\n                }\n                \n            }\n\n            dis.close();\n            bis.close();\n            is.close();\n           \n            // if (size &lt; 20.0) {\n                \n            //     System.out.println(&quot;File size insufficient, please include more stuff&quot;);\n            // }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n            \n        } finally {\n            try {\n                sock.close();\n            } catch (IOException e) {\n                \n            }\n\n        }\n</code></pre>\n<p>And the client code is here:</p>\n<pre><code>String input = &quot;&quot;;\n        long l = 1024;\n        int fileData;\n\n        Console cons = System.console();\n        Socket socket = new Socket(host, Integer.parseInt(port));\n\n        while (!(&quot;close&quot;).equals(input.trim().toLowerCase())) {\n\n            input = cons.readLine(&quot;Please indicate the file to be sent: \\n&quot;);\n\n\n            OutputStream os = socket.getOutputStream();\n            BufferedOutputStream bos = new BufferedOutputStream(os);\n            DataOutputStream dos = new DataOutputStream(bos);\n\n            if (input.equals(&quot;close&quot;.trim().toLowerCase())) {\n\n                dos.writeUTF(input);\n                dos.writeLong(l);\n                dos.flush();\n                System.out.println(&quot;Gotcha. Disconnecting&quot;);\n                break;\n            }\n\n            File toBeSent = new File(input);\n\n            if (!toBeSent.exists()) {\n\n                input = cons.readLine(&quot;That file does not exist. Would you like to create it: \\n&quot;);\n\n                if (input.equals(&quot;yes&quot;)) {\n\n                    toBeSent.createNewFile();\n                    System.out.println(&quot;File created, add something inside before sending&quot;);\n                    continue;\n                }\n            }\n\n            else {\n\n                try {\n                    dos.writeUTF(input);\n                    dos.writeLong(toBeSent.length());\n                    dos.flush();\n\n                    InputStream is = new FileInputStream(toBeSent);\n\n                    BufferedInputStream bis = new BufferedInputStream(is);\n\n                    byte[] buffer = new byte[4 * 1024];\n                    int size = 0;\n\n                    while ((size = bis.read(buffer)) &gt; 0) {\n\n                        dos.write(buffer, 0, size);\n                        dos.flush();\n                    }\n\n                    bis.close();\n                    is.close();\n\n                    continue;\n\n                } catch (EOFException e) {\n\n                }\n                dos.close();\n                bos.close();\n                os.close();\n\n            }\n        }\n</code></pre>\n<p>This thing is, the server-side code</p>\n<pre><code>if (client.equals(&quot;close&quot;.trim().toLowerCase())) {\n    System.out.println(&quot;Client disconnected&quot;);\n    dis.close();\n    bis.close();\n    is.close();\n    exit = true;\n    continue;\n} \n</code></pre>\n<p>works just fine, but only as the first input. As soon as the rest of the server code runs, it throws an exception whenever I try to input &quot;close&quot; from the client:</p>\n<pre><code>java.net.SocketException: Connection reset\n        at java.base/sun.nio.ch.NioSocketImpl.implRead(NioSocketImpl.java:313)\n        at java.base/sun.nio.ch.NioSocketImpl.read(NioSocketImpl.java:340)\n        at java.base/sun.nio.ch.NioSocketImpl$1.read(NioSocketImpl.java:789)\n        at java.base/java.net.Socket$SocketInputStream.read(Socket.java:1025)\n        at java.base/java.io.BufferedInputStream.fill(BufferedInputStream.java:258)\n        at java.base/java.io.BufferedInputStream.read1(BufferedInputStream.java:313)\n        at java.base/java.io.BufferedInputStream.implRead(BufferedInputStream.java:386)       \n        at java.base/java.io.BufferedInputStream.read(BufferedInputStream.java:365)\n        at java.base/java.io.DataInputStream.read(DataInputStream.java:102)\n        at sg.edu.nus.iss.ClientHandler.run(ClientHandler.java:70)\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:577)  \n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n        at java.base/java.lang.Thread.run(Thread.java:1623)\n</code></pre>\n<p>The aforementioned Line 70 is the start of the while loop below:</p>\n<pre><code>while ((receivedBytes = dis.read(buffer)) &gt; 0) {\n\n                        bos.write(buffer, 0, receivedBytes);\n                        remainingBytes = size - receivedBytes;\n                        System.out.println(receivedBytes + &quot; received...\\n&quot; + remainingBytes + &quot;left&quot;);\n                        bos.flush();\n                        exit = true;\n\n                    }\n</code></pre>\n<p>Any insight would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","concurrency","concurrenthashmap"],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679486292,"creation_date":1679485921,"answer_id":75811909,"question_id":75811756,"body_markdown":"A simple way to do that is to collect all the Threads into a list, then `join` each of them (in a separate `Thread`, so you don&#39;t block the main thread)\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Random;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class X {\r\n    public static void main(String[] args) throws InterruptedException {\r\n\r\n        System.out.println(&quot;Hello World&quot;);\r\n\r\n        var mainMap = new ConcurrentHashMap&lt;Integer, String&gt;();\r\n\r\n        Random rnd = new Random();\r\n\r\n        //I don&#39;t know from the beginning how many objects\r\n        for (int i = 0; i &lt; rnd.nextInt(100); i++) {\r\n            mainMap.put(i, &quot;elem &quot; + i);\r\n        }\r\n\r\n        List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\r\n\r\n        mainMap.forEach(1, (k, v) -&gt; {\r\n\r\n            //this modelize a sub-task my application executes asynchronously\r\n            Thread t = new Thread(() -&gt; {\r\n                System.out.println(&quot;Object &quot; + k + &quot; started working &lt;&quot; + v + &quot;&gt;&quot;);\r\n\r\n                try {\r\n                    Thread.sleep(k * 500);\r\n                } catch (InterruptedException e1) {\r\n                    // TODO Auto-generated catch block\r\n                    e1.printStackTrace();\r\n                }\r\n\r\n\r\n                System.out.println(&quot;Object &quot; + k + &quot; done after &quot; + (k * 500) + &quot; ms&quot;);\r\n            });\r\n            threads.add(t);\r\n            t.start();\r\n        });\r\n        Executors.newSingleThreadExecutor().submit(() -&gt; {\r\n            for (Thread t : threads) {\r\n                try {\r\n                    t.join();\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n            System.out.println(&quot;All job done !&quot;);\r\n        });\r\n        System.out.println(&quot;Main thread not blocked&quot;);\r\n    }\r\n}\r\n```\r\n\r\nBut I don&#39;t think your strategy of an unlimited number of threads is good -- usually there is an optimal degree of parallelism, depending on the number of processors and the amount of IO each thread performs.\r\n\r\nI think it&#39;s better to use a thread pool:\r\n```\r\nimport java.util.Random;\r\nimport java.util.concurrent.ConcurrentHashMap;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\npublic class X {\r\n    public static void main(String[] args) throws InterruptedException {\r\n\r\n        System.out.println(&quot;Hello World&quot;);\r\n\r\n        var mainMap = new ConcurrentHashMap&lt;Integer, String&gt;();\r\n\r\n        Random rnd = new Random();\r\n\r\n        //I don&#39;t know from the beginning how many objects\r\n        for (int i = 0; i &lt; rnd.nextInt(100); i++) {\r\n            mainMap.put(i, &quot;elem &quot; + i);\r\n        }\r\n\r\n        ExecutorService executor = Executors.newFixedThreadPool(10);\r\n        mainMap.forEach(1, (k, v) -&gt; {\r\n            executor.execute(() -&gt; {\r\n                System.out.println(&quot;Object &quot; + k + &quot; started working &lt;&quot; + v + &quot;&gt;&quot;);\r\n                try {\r\n                    Thread.sleep(k * 500);\r\n                } catch (InterruptedException e1) {\r\n                    e1.printStackTrace();\r\n                }\r\n                System.out.println(&quot;Object &quot; + k + &quot; done after &quot; + (k * 500) + &quot; ms&quot;);\r\n            });\r\n        });\r\n        Executors.newSingleThreadExecutor().submit(() -&gt; {\r\n            try {\r\n                executor.shutdown();\r\n                executor.awaitTermination(1, TimeUnit.MINUTES);\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n            System.out.println(&quot;All job done !&quot;);\r\n        });\r\n        System.out.println(&quot;Main thread not blocked&quot;);\r\n    }\r\n}\r\n```","title":"Check if ConcurrentHashMap.forEach(PARALLELISM_THR, (k, v)-&gt;) has completed","body":"<p>A simple way to do that is to collect all the Threads into a list, then <code>join</code> each of them (in a separate <code>Thread</code>, so you don't block the main thread)</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.Executors;\n\npublic class X {\n    public static void main(String[] args) throws InterruptedException {\n\n        System.out.println(&quot;Hello World&quot;);\n\n        var mainMap = new ConcurrentHashMap&lt;Integer, String&gt;();\n\n        Random rnd = new Random();\n\n        //I don't know from the beginning how many objects\n        for (int i = 0; i &lt; rnd.nextInt(100); i++) {\n            mainMap.put(i, &quot;elem &quot; + i);\n        }\n\n        List&lt;Thread&gt; threads = new ArrayList&lt;&gt;();\n\n        mainMap.forEach(1, (k, v) -&gt; {\n\n            //this modelize a sub-task my application executes asynchronously\n            Thread t = new Thread(() -&gt; {\n                System.out.println(&quot;Object &quot; + k + &quot; started working &lt;&quot; + v + &quot;&gt;&quot;);\n\n                try {\n                    Thread.sleep(k * 500);\n                } catch (InterruptedException e1) {\n                    // TODO Auto-generated catch block\n                    e1.printStackTrace();\n                }\n\n\n                System.out.println(&quot;Object &quot; + k + &quot; done after &quot; + (k * 500) + &quot; ms&quot;);\n            });\n            threads.add(t);\n            t.start();\n        });\n        Executors.newSingleThreadExecutor().submit(() -&gt; {\n            for (Thread t : threads) {\n                try {\n                    t.join();\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n            System.out.println(&quot;All job done !&quot;);\n        });\n        System.out.println(&quot;Main thread not blocked&quot;);\n    }\n}\n</code></pre>\n<p>But I don't think your strategy of an unlimited number of threads is good -- usually there is an optimal degree of parallelism, depending on the number of processors and the amount of IO each thread performs.</p>\n<p>I think it's better to use a thread pool:</p>\n<pre><code>import java.util.Random;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.TimeUnit;\n\npublic class X {\n    public static void main(String[] args) throws InterruptedException {\n\n        System.out.println(&quot;Hello World&quot;);\n\n        var mainMap = new ConcurrentHashMap&lt;Integer, String&gt;();\n\n        Random rnd = new Random();\n\n        //I don't know from the beginning how many objects\n        for (int i = 0; i &lt; rnd.nextInt(100); i++) {\n            mainMap.put(i, &quot;elem &quot; + i);\n        }\n\n        ExecutorService executor = Executors.newFixedThreadPool(10);\n        mainMap.forEach(1, (k, v) -&gt; {\n            executor.execute(() -&gt; {\n                System.out.println(&quot;Object &quot; + k + &quot; started working &lt;&quot; + v + &quot;&gt;&quot;);\n                try {\n                    Thread.sleep(k * 500);\n                } catch (InterruptedException e1) {\n                    e1.printStackTrace();\n                }\n                System.out.println(&quot;Object &quot; + k + &quot; done after &quot; + (k * 500) + &quot; ms&quot;);\n            });\n        });\n        Executors.newSingleThreadExecutor().submit(() -&gt; {\n            try {\n                executor.shutdown();\n                executor.awaitTermination(1, TimeUnit.MINUTES);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n            System.out.println(&quot;All job done !&quot;);\n        });\n        System.out.println(&quot;Main thread not blocked&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683624496,"creation_date":1683624496,"answer_id":76207791,"question_id":75811756,"body_markdown":"It seems, you are completely missing the point of the API. When you call `mainMap.forEach(1, )`, the action is already executed in parallel and theres no sense in creating new threads, especially not one for each element. You are subverting the entire work that has been done in the `forEach` implementation (the use of thread pools) and create the very problem you are now trying to solve.\r\n\r\nThe `forEach` method does run the actions in parallel and when it returns, the operation has completed.\r\n\r\n```java\r\nimport java.util.concurrent.ConcurrentHashMap;\r\nimport java.util.concurrent.ThreadLocalRandom;\r\n\r\npublic class Main {\r\n  public static void main(String[] args) {\r\n    System.out.println(&quot;Hello World&quot;);\r\n    var mainMap = new ConcurrentHashMap&lt;Integer, String&gt;();\r\n    var rnd = ThreadLocalRandom.current();\r\n\r\n    // I don&#39;t know from the beginning how many objects\r\n    for(int i = 0; i &lt; rnd.nextInt(100); i++) {\r\n      mainMap.put(i, &quot;elem &quot; + i);\r\n    }\r\n\r\n    mainMap.forEach(1, (k, v) -&gt; {\r\n      System.out.println(&quot;Object &quot; + k\r\n          + &quot; started working &lt;&quot; + v + &quot;&gt; &quot; + Thread.currentThread());\r\n      try {\r\n        Thread.sleep(k * 500);\r\n      }\r\n      catch(InterruptedException e1) {\r\n        e1.printStackTrace();\r\n      }\r\n      System.out.println(&quot;Object &quot; + k + &quot; done after &quot; + (k * 500) + &quot; ms&quot;);\r\n    });\r\n\r\n    System.out.println(&quot;All job done !&quot;);\r\n  }\r\n}\r\n```\r\n\r\n```none\r\nHello World\r\nObject 0 started working &lt;elem 0&gt; Thread[#1,main,5,main]\r\nObject 0 done after 0 ms\r\nObject 1 started working &lt;elem 1&gt; Thread[#1,main,5,main]\r\nObject 2 started working &lt;elem 2&gt; Thread[#22,ForkJoinPool.commonPool-worker-1,5,main]\r\nObject 4 started working &lt;elem 4&gt; Thread[#23,ForkJoinPool.commonPool-worker-2,5,main]\r\nObject 1 done after 500 ms\r\nObject 2 done after 1000 ms\r\nObject 3 started working &lt;elem 3&gt; Thread[#22,ForkJoinPool.commonPool-worker-1,5,main]\r\nObject 4 done after 2000 ms\r\nObject 5 started working &lt;elem 5&gt; Thread[#23,ForkJoinPool.commonPool-worker-2,5,main]\r\nObject 3 done after 1500 ms\r\nObject 5 done after 2500 ms\r\nAll job done !\r\n```\r\n\r\nThe result differs from your expectation slightly, as the waiting times for the first keys are too small.\r\n\r\n---\r\n\r\nIf you want to avoid blocking the initiator thread, e.g. because its the event dispatch thread, submit the entire operation to a background thread:\r\n\r\n```java\r\nCompletableFuture&lt;Void&gt; operation = CompletableFuture.runAsync(() -&gt; {\r\n  mainMap.forEach(1, (k, v) -&gt; {\r\n    System.out.println(&quot;Object &quot; + k\r\n        + &quot; started working &lt;&quot; + v + &quot;&gt; &quot; + Thread.currentThread());\r\n    try {\r\n      Thread.sleep(k * 500);\r\n    }\r\n    catch(InterruptedException e1) {\r\n      e1.printStackTrace();\r\n    }\r\n    System.out.println(&quot;Object &quot; + k + &quot; done after &quot; + (k * 500) + &quot; ms&quot;);\r\n  });\r\n});\r\n```\r\n\r\nThen, you can poll the operation status, e.g.\r\n\r\n```java\r\nSystem.out.println(operation.isDone()? &quot;done.&quot;: &quot;still running&quot;);\r\n```\r\n\r\nbut also chain dependent operations like\r\n\r\n```java\r\noperation.thenAccept(_void -&gt; System.out.println(&quot;All job done !&quot;));\r\n```\r\n\r\nor, more interesting for your actual use case,\r\n\r\n```java\r\noperation.thenAcceptAsync(_void -&gt; {\r\n    /* update UI components */\r\n  }, EventQueue::invokeLater);\r\n```\r\n\r\nto update the UI components in the event dispatch thread after completion while not blocking the event dispatch thread while running.\r\n","title":"Check if ConcurrentHashMap.forEach(PARALLELISM_THR, (k, v)-&gt;) has completed","body":"<p>It seems, you are completely missing the point of the API. When you call <code>mainMap.forEach(1, )</code>, the action is already executed in parallel and theres no sense in creating new threads, especially not one for each element. You are subverting the entire work that has been done in the <code>forEach</code> implementation (the use of thread pools) and create the very problem you are now trying to solve.</p>\n<p>The <code>forEach</code> method does run the actions in parallel and when it returns, the operation has completed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic class Main {\n  public static void main(String[] args) {\n    System.out.println(&quot;Hello World&quot;);\n    var mainMap = new ConcurrentHashMap&lt;Integer, String&gt;();\n    var rnd = ThreadLocalRandom.current();\n\n    // I don't know from the beginning how many objects\n    for(int i = 0; i &lt; rnd.nextInt(100); i++) {\n      mainMap.put(i, &quot;elem &quot; + i);\n    }\n\n    mainMap.forEach(1, (k, v) -&gt; {\n      System.out.println(&quot;Object &quot; + k\n          + &quot; started working &lt;&quot; + v + &quot;&gt; &quot; + Thread.currentThread());\n      try {\n        Thread.sleep(k * 500);\n      }\n      catch(InterruptedException e1) {\n        e1.printStackTrace();\n      }\n      System.out.println(&quot;Object &quot; + k + &quot; done after &quot; + (k * 500) + &quot; ms&quot;);\n    });\n\n    System.out.println(&quot;All job done !&quot;);\n  }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>Hello World\nObject 0 started working &lt;elem 0&gt; Thread[#1,main,5,main]\nObject 0 done after 0 ms\nObject 1 started working &lt;elem 1&gt; Thread[#1,main,5,main]\nObject 2 started working &lt;elem 2&gt; Thread[#22,ForkJoinPool.commonPool-worker-1,5,main]\nObject 4 started working &lt;elem 4&gt; Thread[#23,ForkJoinPool.commonPool-worker-2,5,main]\nObject 1 done after 500 ms\nObject 2 done after 1000 ms\nObject 3 started working &lt;elem 3&gt; Thread[#22,ForkJoinPool.commonPool-worker-1,5,main]\nObject 4 done after 2000 ms\nObject 5 started working &lt;elem 5&gt; Thread[#23,ForkJoinPool.commonPool-worker-2,5,main]\nObject 3 done after 1500 ms\nObject 5 done after 2500 ms\nAll job done !\n</code></pre>\n<p>The result differs from your expectation slightly, as the waiting times for the first keys are too small.</p>\n<hr />\n<p>If you want to avoid blocking the initiator thread, e.g. because its the event dispatch thread, submit the entire operation to a background thread:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CompletableFuture&lt;Void&gt; operation = CompletableFuture.runAsync(() -&gt; {\n  mainMap.forEach(1, (k, v) -&gt; {\n    System.out.println(&quot;Object &quot; + k\n        + &quot; started working &lt;&quot; + v + &quot;&gt; &quot; + Thread.currentThread());\n    try {\n      Thread.sleep(k * 500);\n    }\n    catch(InterruptedException e1) {\n      e1.printStackTrace();\n    }\n    System.out.println(&quot;Object &quot; + k + &quot; done after &quot; + (k * 500) + &quot; ms&quot;);\n  });\n});\n</code></pre>\n<p>Then, you can poll the operation status, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(operation.isDone()? &quot;done.&quot;: &quot;still running&quot;);\n</code></pre>\n<p>but also chain dependent operations like</p>\n<pre class=\"lang-java prettyprint-override\"><code>operation.thenAccept(_void -&gt; System.out.println(&quot;All job done !&quot;));\n</code></pre>\n<p>or, more interesting for your actual use case,</p>\n<pre class=\"lang-java prettyprint-override\"><code>operation.thenAcceptAsync(_void -&gt; {\n    /* update UI components */\n  }, EventQueue::invokeLater);\n</code></pre>\n<p>to update the UI components in the event dispatch thread after completion while not blocking the event dispatch thread while running.</p>\n"}],"owner":{"account_id":4168155,"reputation":2397,"user_id":3416648,"accept_rate":83,"display_name":"DDS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1683624496,"creation_date":1679484938,"question_id":75811756,"body_markdown":"is there a way to know if a parallel foreach on a concurrent hashmap has ended\r\n\r\n\r\nhere is an example of what I want to do:\r\n\r\n```java\r\nimport java.util.concurrent.ConcurrentHashMap;\r\nimport java.util.Random;\r\npublic class Main\r\n{\r\n\tpublic static void main(String[] args) {\r\n\t \r\n\t\tSystem.out.println(&quot;Hello World&quot;);\r\n\t\t\r\n\t\tvar mainMap = new ConcurrentHashMap&lt;Integer, String&gt;();\r\n\t\t\r\n\t\t Random rnd = new Random();\r\n\t\t\r\n        //I don&#39;t know from the beginning how many objects\r\n\t\tfor(int i=0; i&lt;rnd.nextInt(100); i++){\r\n\t\t    mainMap.put(i,&quot;elem &quot;+i);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\tmainMap.forEach(1, (k, v) -&gt; {\r\n                \r\n                //this modelize a sub-task my application executes asynchronously\r\n                Thread t = new Thread(()-&gt;{\r\n                System.out.println(&quot;Object &quot;+k+&quot; started working &lt;&quot; + v+&quot;&gt;&quot;);\r\n                \r\n                try {\r\n\t\t            Thread.sleep(k*500);\t\r\n\t\t            } catch (InterruptedException e1) {\r\n\t\t\t        // TODO Auto-generated catch block\r\n\t\t\t        e1.printStackTrace();\r\n\t\t    }\r\n\t\t\r\n        \r\n                System.out.println(&quot;Object &quot;+k+&quot; done after &quot;+(k*500)+&quot; ms&quot;);\r\n                });\r\n                \r\n                t.start();\r\n            });\r\n            \r\n            //I want to print this only after all jobs are finished\r\n            //but still I don&#39;t want to block the main (GUI) thread\r\n            System.out.println(&quot;All job done !&quot;);\r\n            \r\n       return;\r\n\t}\r\n}\r\n```\r\n\r\nright now an output is like this:\r\n\r\n```\r\nHello World\r\nAll job done !\r\nObject 0 started working &lt;elem 0&gt;\r\nObject 2 started working &lt;elem 2&gt;\r\nObject 4 started working &lt;elem 4&gt;\r\nObject 3 started working &lt;elem 3&gt;\r\nObject 1 started working &lt;elem 1&gt;\r\nObject 0 done after 0 ms\r\nObject 1 done after 500 ms\r\nObject 2 done after 1000 ms\r\nObject 3 done after 1500 ms\r\n```\r\nBut I expect something like this:\r\n\r\n```\r\nHello World\r\nObject 0 started working &lt;elem 0&gt;\r\nObject 2 started working &lt;elem 2&gt;\r\nObject 4 started working &lt;elem 4&gt;\r\nObject 3 started working &lt;elem 3&gt;\r\nObject 1 started working &lt;elem 1&gt;\r\nObject 0 done after 0 ms\r\nObject 4 done after 2000 ms\r\nObject 1 done after 500 ms\r\nObject 2 done after 1000 ms\r\nObject 3 done after 1500 ms\r\nAll job done !\r\n```\r\n","title":"Check if ConcurrentHashMap.forEach(PARALLELISM_THR, (k, v)-&gt;) has completed","body":"<p>is there a way to know if a parallel foreach on a concurrent hashmap has ended</p>\n<p>here is an example of what I want to do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.ConcurrentHashMap;\nimport java.util.Random;\npublic class Main\n{\n    public static void main(String[] args) {\n     \n        System.out.println(&quot;Hello World&quot;);\n        \n        var mainMap = new ConcurrentHashMap&lt;Integer, String&gt;();\n        \n         Random rnd = new Random();\n        \n        //I don't know from the beginning how many objects\n        for(int i=0; i&lt;rnd.nextInt(100); i++){\n            mainMap.put(i,&quot;elem &quot;+i);\n        }\n        \n        \n        \n            mainMap.forEach(1, (k, v) -&gt; {\n                \n                //this modelize a sub-task my application executes asynchronously\n                Thread t = new Thread(()-&gt;{\n                System.out.println(&quot;Object &quot;+k+&quot; started working &lt;&quot; + v+&quot;&gt;&quot;);\n                \n                try {\n                    Thread.sleep(k*500);    \n                    } catch (InterruptedException e1) {\n                    // TODO Auto-generated catch block\n                    e1.printStackTrace();\n            }\n        \n        \n                System.out.println(&quot;Object &quot;+k+&quot; done after &quot;+(k*500)+&quot; ms&quot;);\n                });\n                \n                t.start();\n            });\n            \n            //I want to print this only after all jobs are finished\n            //but still I don't want to block the main (GUI) thread\n            System.out.println(&quot;All job done !&quot;);\n            \n       return;\n    }\n}\n</code></pre>\n<p>right now an output is like this:</p>\n<pre><code>Hello World\nAll job done !\nObject 0 started working &lt;elem 0&gt;\nObject 2 started working &lt;elem 2&gt;\nObject 4 started working &lt;elem 4&gt;\nObject 3 started working &lt;elem 3&gt;\nObject 1 started working &lt;elem 1&gt;\nObject 0 done after 0 ms\nObject 1 done after 500 ms\nObject 2 done after 1000 ms\nObject 3 done after 1500 ms\n</code></pre>\n<p>But I expect something like this:</p>\n<pre><code>Hello World\nObject 0 started working &lt;elem 0&gt;\nObject 2 started working &lt;elem 2&gt;\nObject 4 started working &lt;elem 4&gt;\nObject 3 started working &lt;elem 3&gt;\nObject 1 started working &lt;elem 1&gt;\nObject 0 done after 0 ms\nObject 4 done after 2000 ms\nObject 1 done after 500 ms\nObject 2 done after 1000 ms\nObject 3 done after 1500 ms\nAll job done !\n</code></pre>\n"},{"tags":["java","file-io","delete-directory"],"comments":[{"owner":{"account_id":243084,"reputation":31440,"user_id":515034,"accept_rate":59,"display_name":"Abimaran Kugathasan"},"score":7,"creation_date":1385715932,"post_id":20281835,"comment_id":30257710,"body_markdown":"What happened when you tried?","body":"What happened when you tried?"},{"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":1,"creation_date":1385716033,"post_id":20281835,"comment_id":30257779,"body_markdown":"What is the question?","body":"What is the question?"},{"owner":{"account_id":3657940,"reputation":3431,"user_id":3048442,"accept_rate":17,"display_name":"Mr.G"},"score":1,"creation_date":1385716050,"post_id":20281835,"comment_id":30257790,"body_markdown":"index file not remove.","body":"index file not remove."},{"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"score":0,"creation_date":1385716101,"post_id":20281835,"comment_id":30257810,"body_markdown":"you are callinf index.mkdir() again,so if the file is removed then also it will create another","body":"you are callinf index.mkdir() again,so if the file is removed then also it will create another"},{"owner":{"account_id":2569717,"reputation":22819,"user_id":2228771,"accept_rate":77,"display_name":"Domi"},"score":0,"creation_date":1385716106,"post_id":20281835,"comment_id":30257814,"body_markdown":"@user3048442 That is probably because you are re-creating it after deleting it.","body":"@user3048442 That is probably because you are re-creating it after deleting it."},{"owner":{"account_id":3657940,"reputation":3431,"user_id":3048442,"accept_rate":17,"display_name":"Mr.G"},"score":0,"creation_date":1385716155,"post_id":20281835,"comment_id":30257834,"body_markdown":"I want a create and delete a file as dynamically.but here file was created not deleted.","body":"I want a create and delete a file as dynamically.but here file was created not deleted."},{"owner":{"account_id":3657940,"reputation":3431,"user_id":3048442,"accept_rate":17,"display_name":"Mr.G"},"score":0,"creation_date":1385716258,"post_id":20281835,"comment_id":30257890,"body_markdown":"mr.JqueryLearner that folder cotains file but that files are not deleted i want delete that file also.","body":"mr.JqueryLearner that folder cotains file but that files are not deleted i want delete that file also."},{"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"score":1,"creation_date":1417289030,"post_id":20281835,"comment_id":42894551,"body_markdown":"Refer [How to delete a directory in Java](http://opensourceforgeeks.blogspot.in/2014/11/how-to-delete-directory-in-java.html)","body":"Refer <a href=\"http://opensourceforgeeks.blogspot.in/2014/11/how-to-delete-directory-in-java.html\" rel=\"nofollow noreferrer\">How to delete a directory in Java</a>"},{"owner":{"account_id":2112055,"reputation":553,"user_id":1877143,"display_name":"Hank Schultz"},"score":1,"creation_date":1447258057,"post_id":20281835,"comment_id":55082648,"body_markdown":"Unfortunately, @AniketThakur, that approach will follow symbolic links and delete files and directories that may not have been intended.","body":"Unfortunately, @AniketThakur, that approach will follow symbolic links and delete files and directories that may not have been intended."},{"owner":{"account_id":95417,"reputation":4933,"user_id":259889,"accept_rate":76,"display_name":"Sid"},"score":0,"creation_date":1548755222,"post_id":20281835,"comment_id":95645856,"body_markdown":"The Apache IO library has the capability to delete directories with files.  Check https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html","body":"The Apache IO library has the capability to delete directories with files.  Check <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-io/javadocs/api-2.5/org/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1385716099,"creation_date":1385716099,"answer_id":20281899,"question_id":20281835,"body_markdown":"Remove it from else part\r\n\r\n    File index = new File(&quot;/home/Work/Indexer1&quot;);\r\n    if (!index.exists())\r\n    {\r\n         index.mkdir();\r\n         System.out.println(&quot;Dir Not present. Creating new one!&quot;);\r\n    }\r\n    index.delete();\r\n    System.out.println(&quot;File deleted successfully&quot;);\r\n","title":"How to delete a folder with files using Java","body":"<p>Remove it from else part</p>\n\n<pre><code>File index = new File(\"/home/Work/Indexer1\");\nif (!index.exists())\n{\n     index.mkdir();\n     System.out.println(\"Dir Not present. Creating new one!\");\n}\nindex.delete();\nSystem.out.println(\"File deleted successfully\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3150686,"reputation":13778,"user_id":2664200,"accept_rate":71,"display_name":"SpringLearner"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1385717793,"creation_date":1385716177,"answer_id":20281925,"question_id":20281835,"body_markdown":"In this  \r\n\r\n    index.delete();\r\n    \r\n                if (!index.exists())\r\n                   {\r\n                       index.mkdir();\r\n                   }\r\n\r\nyou are calling\r\n\r\n     if (!index.exists())\r\n                       {\r\n                           index.mkdir();\r\n                       }\r\n\r\nafter\r\n\r\n    index.delete();\r\n\r\nThis means that you are creating the file again after deleting\r\n[File.delete()][1] returns a boolean value.So if you want to check then do `System.out.println(index.delete());` if you get `true` then this means that file is deleted\r\n\r\n    File index = new File(&quot;/home/Work/Indexer1&quot;);\r\n    &#160; &#160; if (!index.exists())\r\n    &#160; &#160; &#160; &#160;{\r\n    &#160; &#160; &#160; &#160; &#160; &#160; &#160;index.mkdir();\r\n    &#160; &#160; &#160; &#160;}\r\n    &#160; &#160; else{\r\n    &#160; &#160; &#160; &#160; &#160; &#160; System.out.println(index.delete());//If you get true then file is deleted\r\n    \r\n    \r\n    \r\n    \r\n    &#160; &#160; &#160; &#160; &#160; &#160; if (!index.exists())\r\n    &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;{\r\n    &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;index.mkdir();// here you are creating again after deleting the file\r\n    &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;}\r\n    \r\n    \r\n    \r\n    \r\n    &#160; &#160; &#160; &#160; }\r\n\r\nfrom the [comments][2] given below,the updated answer is like this\r\n\r\n\r\n    File f=new File(&quot;full_path&quot;);//full path like c:/home/ri\r\n    \tif(f.exists())\r\n    \t{\r\n    \t\tf.delete();\r\n    \t}\r\n    \telse\r\n    \t{\r\n    \t\ttry {\r\n    \t\t\t//f.createNewFile();//this will create a file\r\n    \t\t\tf.mkdir();//this create a folder\r\n    \t\t} catch (Exception e) {\r\n    \t\t\t// TODO Auto-generated catch block\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/io/File.html#delete%28%29\r\n  [2]: https://stackoverflow.com/questions/20281835/how-to-delete-a-folder-with-files-using-java/20281925?noredirect=1#comment30258407_20281925","title":"How to delete a folder with files using Java","body":"<p>In this  </p>\n\n<pre><code>index.delete();\n\n            if (!index.exists())\n               {\n                   index.mkdir();\n               }\n</code></pre>\n\n<p>you are calling</p>\n\n<pre><code> if (!index.exists())\n                   {\n                       index.mkdir();\n                   }\n</code></pre>\n\n<p>after</p>\n\n<pre><code>index.delete();\n</code></pre>\n\n<p>This means that you are creating the file again after deleting\n<a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/File.html#delete%28%29\" rel=\"nofollow noreferrer\">File.delete()</a> returns a boolean value.So if you want to check then do <code>System.out.println(index.delete());</code> if you get <code>true</code> then this means that file is deleted</p>\n\n<pre><code>File index = new File(\"/home/Work/Indexer1\");\n  if (!index.exists())\n   {\n      index.mkdir();\n   }\n  else{\n      System.out.println(index.delete());//If you get true then file is deleted\n\n\n\n\n      if (!index.exists())\n       {\n         index.mkdir();// here you are creating again after deleting the file\n       }\n\n\n\n\n    }\n</code></pre>\n\n<p>from the <a href=\"https://stackoverflow.com/questions/20281835/how-to-delete-a-folder-with-files-using-java/20281925?noredirect=1#comment30258407_20281925\">comments</a> given below,the updated answer is like this</p>\n\n<pre><code>File f=new File(\"full_path\");//full path like c:/home/ri\n    if(f.exists())\n    {\n        f.delete();\n    }\n    else\n    {\n        try {\n            //f.createNewFile();//this will create a file\n            f.mkdir();//this create a folder\n        } catch (Exception e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4217515,"reputation":8460,"user_id":3453226,"accept_rate":77,"display_name":"spongebob"},"score":47,"creation_date":1424020838,"post_id":20281958,"comment_id":45372806,"body_markdown":"This won&#39;t delete non-empty subdirectories.","body":"This won&#39;t delete non-empty subdirectories."},{"owner":{"account_id":2112055,"reputation":553,"user_id":1877143,"display_name":"Hank Schultz"},"score":5,"creation_date":1447257843,"post_id":20281958,"comment_id":55082513,"body_markdown":"Be VERY careful.  If index is a symbolic link to another directory, you&#39;ll wind up deleting the contents of the other directory.  Unfortunately, I&#39;ve not yet found a good way to detect symbolic links on Windows in Java 6, though Java 7 provides Files.isSymbolicLink().","body":"Be VERY careful.  If index is a symbolic link to another directory, you&#39;ll wind up deleting the contents of the other directory.  Unfortunately, I&#39;ve not yet found a good way to detect symbolic links on Windows in Java 6, though Java 7 provides Files.isSymbolicLink()."},{"owner":{"account_id":2112055,"reputation":553,"user_id":1877143,"display_name":"Hank Schultz"},"score":1,"creation_date":1447258615,"post_id":20281958,"comment_id":55083036,"body_markdown":"Solution:  wrap this chunk of code in `if (!index.delete()) {...}`.  Then, if index is a symbolic link, it&#39;s deleted regardless of whether it appears it has contents.","body":"Solution:  wrap this chunk of code in <code>if (!index.delete()) {...}</code>.  Then, if index is a symbolic link, it&#39;s deleted regardless of whether it appears it has contents."},{"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"score":0,"creation_date":1509494126,"post_id":20281958,"comment_id":81039702,"body_markdown":"This will throw a NullPointerException if there is an I/O exception while reading the directory.  The code should check whether `entries` is null.","body":"This will throw a NullPointerException if there is an I/O exception while reading the directory.  The code should check whether <code>entries</code> is null."},{"owner":{"account_id":8141379,"reputation":133,"user_id":6131433,"display_name":"ferpaxecosanxez"},"score":0,"creation_date":1651834005,"post_id":20281958,"comment_id":127463454,"body_markdown":"The method delete files only if `index` is a path of directory, example `my/path/`, otherwise throw  NullPointerException. i.e. if `index` is `my/path/file.txt` has an error","body":"The method delete files only if <code>index</code> is a path of directory, example <code>my&#47;path&#47;</code>, otherwise throw  NullPointerException. i.e. if <code>index</code> is <code>my&#47;path&#47;file.txt</code> has an error"}],"tags":[],"owner":{"account_id":3622491,"reputation":1453,"user_id":3020884,"display_name":"Cemron"},"comment_count":5,"down_vote_count":8,"up_vote_count":136,"is_accepted":true,"score":128,"last_activity_date":1385716277,"creation_date":1385716277,"answer_id":20281958,"question_id":20281835,"body_markdown":"Java isn&#39;t able to delete folders with data in it. You have to delete all files before deleting the folder.\r\n\r\nUse something like:\r\n\r\n    String[]entries = index.list();\r\n    for(String s: entries){\r\n        File currentFile = new File(index.getPath(),s);\r\n        currentFile.delete();\r\n    }\r\n\r\nThen you should be able to delete the folder by using `index.delete()`\r\nUntested!","title":"How to delete a folder with files using Java","body":"<p>Java isn't able to delete folders with data in it. You have to delete all files before deleting the folder.</p>\n\n<p>Use something like:</p>\n\n<pre><code>String[]entries = index.list();\nfor(String s: entries){\n    File currentFile = new File(index.getPath(),s);\n    currentFile.delete();\n}\n</code></pre>\n\n<p>Then you should be able to delete the folder by using <code>index.delete()</code>\nUntested!</p>\n"},{"comments":[{"owner":{"account_id":2078312,"reputation":16240,"user_id":1851024,"accept_rate":82,"display_name":"Andrey Chaschev"},"score":6,"creation_date":1392963893,"post_id":20281994,"comment_id":33212534,"body_markdown":"Here is a sample: http://fahdshariff.blogspot.ru/2011/08/java-7-deleting-directory-by-walking.html","body":"Here is a sample: <a href=\"http://fahdshariff.blogspot.ru/2011/08/java-7-deleting-directory-by-walking.html\" rel=\"nofollow noreferrer\">fahdshariff.blogspot.ru/2011/08/&hellip;</a>"},{"owner":{"account_id":11729259,"reputation":392,"user_id":8618438,"display_name":"chill appreciator"},"score":0,"creation_date":1686815712,"post_id":20281994,"comment_id":134851975,"body_markdown":"`Files.deleteIfExists()` requires directory to be empty. The question was: &quot;How to delete directory with files&quot;","body":"<code>Files.deleteIfExists()</code> requires directory to be empty. The question was: &quot;How to delete directory with files&quot;"}],"tags":[],"owner":{"account_id":2078312,"reputation":16240,"user_id":1851024,"accept_rate":82,"display_name":"Andrey Chaschev"},"comment_count":2,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1590866957,"creation_date":1385716383,"answer_id":20281994,"question_id":20281835,"body_markdown":"In JDK 7 you could use `Files.walkFileTree()` and `Files.deleteIfExists()` to delete a tree of files. (Sample: http://fahdshariff.blogspot.ru/2011/08/java-7-deleting-directory-by-walking.html)\r\n\r\nIn JDK 6 one possible way is to use [FileUtils.deleteQuietly](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#deleteQuietly(java.io.File)) from Apache Commons which will remove a file, a directory, or a directory with files and sub-directories.","title":"How to delete a folder with files using Java","body":"<p>In JDK 7 you could use <code>Files.walkFileTree()</code> and <code>Files.deleteIfExists()</code> to delete a tree of files. (Sample: <a href=\"http://fahdshariff.blogspot.ru/2011/08/java-7-deleting-directory-by-walking.html\" rel=\"nofollow noreferrer\">http://fahdshariff.blogspot.ru/2011/08/java-7-deleting-directory-by-walking.html</a>)</p>\n\n<p>In JDK 6 one possible way is to use <a href=\"http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html#deleteQuietly(java.io.File)\" rel=\"nofollow noreferrer\">FileUtils.deleteQuietly</a> from Apache Commons which will remove a file, a directory, or a directory with files and sub-directories.</p>\n"},{"tags":[],"owner":{"account_id":3617928,"reputation":1472,"user_id":3017357,"accept_rate":78,"display_name":"Indranil.Bharambe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1385716418,"creation_date":1385716418,"answer_id":20282002,"question_id":20281835,"body_markdown":" directry cannot simply delete if it has the files so you may need to delete the files inside first and then directory\r\n\r\n    public class DeleteFileFolder {\r\n \r\n    public DeleteFileFolder(String path) {\r\n \r\n        File file = new File(path);\r\n        if(file.exists())\r\n        {\r\n            do{\r\n                delete(file);\r\n            }while(file.exists());\r\n        }else\r\n        {\r\n            System.out.println(&quot;File or Folder not found : &quot;+path);\r\n        }\r\n \r\n    }\r\n    private void delete(File file)\r\n    {\r\n        if(file.isDirectory())\r\n        {\r\n            String fileList[] = file.list();\r\n            if(fileList.length == 0)\r\n            {\r\n                System.out.println(&quot;Deleting Directory : &quot;+file.getPath());\r\n                file.delete();\r\n            }else\r\n            {\r\n                int size = fileList.length;\r\n                for(int i = 0 ; i &lt; size ; i++)\r\n                {\r\n                    String fileName = fileList[i];\r\n                    System.out.println(&quot;File path : &quot;+file.getPath()+&quot; and name :&quot;+fileName);\r\n                    String fullPath = file.getPath()+&quot;/&quot;+fileName;\r\n                    File fileOrFolder = new File(fullPath);\r\n                    System.out.println(&quot;Full Path :&quot;+fileOrFolder.getPath());\r\n                    delete(fileOrFolder);\r\n                }\r\n            }\r\n        }else\r\n        {\r\n            System.out.println(&quot;Deleting file : &quot;+file.getPath());\r\n            file.delete();\r\n        }\r\n    }","title":"How to delete a folder with files using Java","body":"<p>directry cannot simply delete if it has the files so you may need to delete the files inside first and then directory</p>\n\n<pre><code>public class DeleteFileFolder {\n\npublic DeleteFileFolder(String path) {\n\n    File file = new File(path);\n    if(file.exists())\n    {\n        do{\n            delete(file);\n        }while(file.exists());\n    }else\n    {\n        System.out.println(\"File or Folder not found : \"+path);\n    }\n\n}\nprivate void delete(File file)\n{\n    if(file.isDirectory())\n    {\n        String fileList[] = file.list();\n        if(fileList.length == 0)\n        {\n            System.out.println(\"Deleting Directory : \"+file.getPath());\n            file.delete();\n        }else\n        {\n            int size = fileList.length;\n            for(int i = 0 ; i &lt; size ; i++)\n            {\n                String fileName = fileList[i];\n                System.out.println(\"File path : \"+file.getPath()+\" and name :\"+fileName);\n                String fullPath = file.getPath()+\"/\"+fileName;\n                File fileOrFolder = new File(fullPath);\n                System.out.println(\"Full Path :\"+fileOrFolder.getPath());\n                delete(fileOrFolder);\n            }\n        }\n    }else\n    {\n        System.out.println(\"Deleting file : \"+file.getPath());\n        file.delete();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":331432,"reputation":3297,"user_id":656094,"accept_rate":40,"display_name":"Panthro"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1395415077,"creation_date":1395415077,"answer_id":22562676,"question_id":20281835,"body_markdown":"If you have subfolders, you will find troubles with the Cemron answers. so you should create a method that works like this:\r\n\r\n\r\n    private void deleteTempFile(File tempFile) {\r\n    \t\ttry\r\n    \t\t{\r\n    \t\t    if(tempFile.isDirectory()){\r\n    \t\t\t   File[] entries = tempFile.listFiles();\r\n    \t\t\t   for(File currentFile: entries){\r\n    \t\t\t       deleteTempFile(currentFile);\r\n    \t\t\t   }\r\n    \t\t\t   tempFile.delete();\r\n    \t\t    }else{\r\n                   tempFile.delete();\r\n\t\t        }\r\n\t\t    getLogger().info(&quot;DELETED Temporal File: &quot; + tempFile.getPath());\r\n    \t\t}\r\n    \t\tcatch(Throwable t)\r\n    \t\t{\r\n    \t\t\tgetLogger().error(&quot;Could not DELETE file: &quot; + tempFile.getPath(), t);\r\n    \t\t}\r\n    \t}","title":"How to delete a folder with files using Java","body":"<p>If you have subfolders, you will find troubles with the Cemron answers. so you should create a method that works like this:</p>\n\n<pre><code>private void deleteTempFile(File tempFile) {\n        try\n        {\n            if(tempFile.isDirectory()){\n               File[] entries = tempFile.listFiles();\n               for(File currentFile: entries){\n                   deleteTempFile(currentFile);\n               }\n               tempFile.delete();\n            }else{\n               tempFile.delete();\n            }\n        getLogger().info(\"DELETED Temporal File: \" + tempFile.getPath());\n        }\n        catch(Throwable t)\n        {\n            getLogger().error(\"Could not DELETE file: \" + tempFile.getPath(), t);\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":185123,"reputation":8396,"user_id":421642,"accept_rate":77,"display_name":"OhadR"},"score":0,"creation_date":1486480894,"post_id":23678498,"comment_id":71357350,"body_markdown":"updated link: https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html","body":"updated link: <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-io/javadocs/api-2.5/org/&hellip;</a>"},{"owner":{"account_id":4364735,"reputation":1449,"user_id":3560873,"display_name":"searchengine27"},"score":36,"creation_date":1491428083,"post_id":23678498,"comment_id":73554219,"body_markdown":"um...no. This is a one-liner with an external dependency, which is an important thing to keep in mind. The only time using an external dependency like this is this simple is when you&#39;re doing a personal home project, or your company really doesn&#39;t care about the possibility of getting sued.","body":"um...no. This is a one-liner with an external dependency, which is an important thing to keep in mind. The only time using an external dependency like this is this simple is when you&#39;re doing a personal home project, or your company really doesn&#39;t care about the possibility of getting sued."},{"owner":{"account_id":4926549,"reputation":231,"user_id":3967651,"accept_rate":50,"display_name":"simtim"},"score":25,"creation_date":1500812959,"post_id":23678498,"comment_id":77493095,"body_markdown":"@searchengine27 but it seems the library is under Apache Commons so the risk of getting sued is negligible https://www.whitesourcesoftware.com/whitesource-blog/top-10-apache-license-questions-answered/.","body":"@searchengine27 but it seems the library is under Apache Commons so the risk of getting sued is negligible <a href=\"https://www.whitesourcesoftware.com/whitesource-blog/top-10-apache-license-questions-answered/\" rel=\"nofollow noreferrer\">whitesourcesoftware.com/whitesource-blog/&hellip;</a>."},{"owner":{"account_id":4364735,"reputation":1449,"user_id":3560873,"display_name":"searchengine27"},"score":3,"creation_date":1500933772,"post_id":23678498,"comment_id":77544010,"body_markdown":"@simtim you&#39;re missing the point entirely. A company will never approve a library to use without a team of lawyers pouring over the terms of use and end user agreements, and any other legal documents associated with the library first. Somebody has to pay those lawyers...sometimes nobody wants to, which means the developer doesn&#39;t get to use it. The bigger the company you work for, the more red tape you have to go through.","body":"@simtim you&#39;re missing the point entirely. A company will never approve a library to use without a team of lawyers pouring over the terms of use and end user agreements, and any other legal documents associated with the library first. Somebody has to pay those lawyers...sometimes nobody wants to, which means the developer doesn&#39;t get to use it. The bigger the company you work for, the more red tape you have to go through."},{"owner":{"account_id":7172249,"reputation":8197,"user_id":5479362,"accept_rate":48,"display_name":"9ilsdx 9rvj 0lo"},"score":60,"creation_date":1521562841,"post_id":23678498,"comment_id":85780100,"body_markdown":"@searchengine27 no, you&#39;re missing the point entirely. A company that needs an army of lawyers to allow to use apache commons is the absolute pathology, and nothing near the norm in IT world. I&#39;ve never heard of anyone having such problems and if you have such problems you have most likely access to SO blocked so the answer would not be accessible to you anyway.","body":"@searchengine27 no, you&#39;re missing the point entirely. A company that needs an army of lawyers to allow to use apache commons is the absolute pathology, and nothing near the norm in IT world. I&#39;ve never heard of anyone having such problems and if you have such problems you have most likely access to SO blocked so the answer would not be accessible to you anyway."},{"owner":{"account_id":4364735,"reputation":1449,"user_id":3560873,"display_name":"searchengine27"},"score":0,"creation_date":1521567155,"post_id":23678498,"comment_id":85782773,"body_markdown":"@9ilsdx9rvj0lo This isn&#39;t the &quot;IT&quot; world, this is corporate software development. Have you worked in the corporate world yet? You clearly have not because you&#39;re making wild connections between different things that have no correlation. If you had any experience in the corporate world, you would know what corporate espionage was, and how terms of service or rights of use violations can cost a company millions of dollars. And then you would know why a team of lawyers needs to evaluate a tool before a developer goes anywhere near it.","body":"@9ilsdx9rvj0lo This isn&#39;t the &quot;IT&quot; world, this is corporate software development. Have you worked in the corporate world yet? You clearly have not because you&#39;re making wild connections between different things that have no correlation. If you had any experience in the corporate world, you would know what corporate espionage was, and how terms of service or rights of use violations can cost a company millions of dollars. And then you would know why a team of lawyers needs to evaluate a tool before a developer goes anywhere near it."},{"owner":{"account_id":1664814,"reputation":2953,"user_id":1532454,"accept_rate":80,"display_name":"Jeff Learman"},"score":0,"creation_date":1522712228,"post_id":23678498,"comment_id":86247326,"body_markdown":"@9ilsdx9rvj0lo There&#39;s a big difference between writing software to use in-house and writing software for a product that is being distributed (sold, leased, licensed, etc.)  In the latter case, there are significantly more legal hoops to jump through, though they shouldn&#39;t be prohibitive.  But they can make the difference between using a simple solution for a small task and pulling in a new 3rd-party package.","body":"@9ilsdx9rvj0lo There&#39;s a big difference between writing software to use in-house and writing software for a product that is being distributed (sold, leased, licensed, etc.)  In the latter case, there are significantly more legal hoops to jump through, though they shouldn&#39;t be prohibitive.  But they can make the difference between using a simple solution for a small task and pulling in a new 3rd-party package."},{"owner":{"account_id":3838953,"reputation":2411,"user_id":3182598,"display_name":"nomadSK25"},"score":1,"creation_date":1587828953,"post_id":23678498,"comment_id":108665411,"body_markdown":"Java API lacks such a basic feature and because of this, we have to use an external library","body":"Java API lacks such a basic feature and because of this, we have to use an external library"},{"owner":{"account_id":2650729,"reputation":640,"user_id":2292492,"accept_rate":50,"display_name":"deltamind106"},"score":1,"creation_date":1666635423,"post_id":23678498,"comment_id":130979300,"body_markdown":"@searchengine27 I wonder how these gigantic legally-paranoid companies get anything done in a world where just using some simple Java package (e.g. Google PubSub) requires 60 dependencies.  Sure the legal team may find that Google&#39;s PubSub license is okay, but then there are 60 open-source dependencies, each with their own license.  And each of those 60 dependencies has transitive dependencies on 5-10 other packages.  It&#39;s even worse in the Node NPM JavaScript world, where the simplest project using React has probably over 1000 dependent packages, each with their own license.","body":"@searchengine27 I wonder how these gigantic legally-paranoid companies get anything done in a world where just using some simple Java package (e.g. Google PubSub) requires 60 dependencies.  Sure the legal team may find that Google&#39;s PubSub license is okay, but then there are 60 open-source dependencies, each with their own license.  And each of those 60 dependencies has transitive dependencies on 5-10 other packages.  It&#39;s even worse in the Node NPM JavaScript world, where the simplest project using React has probably over 1000 dependent packages, each with their own license."},{"owner":{"account_id":65080,"reputation":5716,"user_id":191761,"accept_rate":71,"display_name":"Adam Burley"},"score":3,"creation_date":1670524949,"post_id":23678498,"comment_id":131900533,"body_markdown":"@searchengine27 I have worked for large enterprise companies and can confirm that they do allow you to use open source libraries, it&#39;s just a fact of modern software development. However at my former employer they did keep long lists of all the dependencies including transitive dependencies and their licenses. if the license was not on a standard list (e.g. EPL, MPL, Apache etc) then we had to get specific approval for it. but it certainly didn&#39;t require an army of lawyers","body":"@searchengine27 I have worked for large enterprise companies and can confirm that they do allow you to use open source libraries, it&#39;s just a fact of modern software development. However at my former employer they did keep long lists of all the dependencies including transitive dependencies and their licenses. if the license was not on a standard list (e.g. EPL, MPL, Apache etc) then we had to get specific approval for it. but it certainly didn&#39;t require an army of lawyers"}],"tags":[],"owner":{"account_id":1087257,"reputation":2781,"user_id":1082668,"display_name":"Barry Knapp"},"comment_count":10,"down_vote_count":1,"up_vote_count":256,"is_accepted":false,"score":255,"last_activity_date":1653058692,"creation_date":1400157564,"answer_id":23678498,"question_id":20281835,"body_markdown":"Just a one-liner.\r\n\r\n    import org.apache.commons.io.FileUtils;\r\n    \r\n    FileUtils.deleteDirectory(new File(destination));\r\n\r\nDocumentation [here][1]\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#deleteDirectory(java.io.File)","title":"How to delete a folder with files using Java","body":"<p>Just a one-liner.</p>\n<pre><code>import org.apache.commons.io.FileUtils;\n\nFileUtils.deleteDirectory(new File(destination));\n</code></pre>\n<p>Documentation <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#deleteDirectory(java.io.File)\" rel=\"noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":2762988,"reputation":49,"user_id":2379481,"display_name":"Marcelo Lopes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1420149896,"creation_date":1420149896,"answer_id":27735114,"question_id":20281835,"body_markdown":"    private void deleteFileOrFolder(File file){\r\n        try {\r\n            for (File f : file.listFiles()) {\r\n                f.delete();\r\n                deleteFileOrFolder(f);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace(System.err);\r\n        }\r\n    }","title":"How to delete a folder with files using Java","body":"<pre><code>private void deleteFileOrFolder(File file){\n    try {\n        for (File f : file.listFiles()) {\n            f.delete();\n            deleteFileOrFolder(f);\n        }\n    } catch (Exception e) {\n        e.printStackTrace(System.err);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1476985791,"post_id":27923134,"comment_id":67591221,"body_markdown":"group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.+&#39; - useful","body":"group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.+&#39; - useful"},{"owner":{"account_id":9772337,"reputation":2264,"user_id":7243748,"accept_rate":45,"display_name":"stavros.3p"},"score":0,"creation_date":1655570576,"post_id":27923134,"comment_id":128365394,"body_markdown":"Sweet answer, thanks","body":"Sweet answer, thanks"},{"owner":{"account_id":11729259,"reputation":392,"user_id":8618438,"display_name":"chill appreciator"},"score":0,"creation_date":1686815767,"post_id":27923134,"comment_id":134851984,"body_markdown":"Can you explain the &quot;slightliness&quot;?","body":"Can you explain the &quot;slightliness&quot;?"}],"tags":[],"owner":{"account_id":4458992,"reputation":1216,"user_id":3628421,"accept_rate":67,"display_name":"JRA_TLL"},"comment_count":3,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1527084783,"creation_date":1421155145,"answer_id":27923134,"question_id":20281835,"body_markdown":"Using Apache Commons-IO, it is following one-liner:\r\n\r\n    import org.apache.commons.io.FileUtils;\r\n    \r\n    FileUtils.forceDelete(new File(destination));\r\n\r\nThis is (slightly) more performant than `FileUtils.deleteDirectory`.","title":"How to delete a folder with files using Java","body":"<p>Using Apache Commons-IO, it is following one-liner:</p>\n\n<pre><code>import org.apache.commons.io.FileUtils;\n\nFileUtils.forceDelete(new File(destination));\n</code></pre>\n\n<p>This is (slightly) more performant than <code>FileUtils.deleteDirectory</code>.</p>\n"},{"comments":[{"owner":{"account_id":1664814,"reputation":2953,"user_id":1532454,"accept_rate":80,"display_name":"Jeff Learman"},"score":2,"creation_date":1504907602,"post_id":29175213,"comment_id":79212701,"body_markdown":"As it turns out, there is a bug in this.  If another process deletes the files during the loop, it can cause an exception that should be caught and ignored.","body":"As it turns out, there is a bug in this.  If another process deletes the files during the loop, it can cause an exception that should be caught and ignored."},{"owner":{"account_id":151110,"reputation":2632,"user_id":364754,"display_name":"Perry Tew"},"score":4,"creation_date":1521653474,"post_id":29175213,"comment_id":85827693,"body_markdown":"@9ilsdx9rvj0lo  Rather than being snarky, perhaps you could provide an edit to handle symlinks.  The OP said *nothing* about symbolic links in his post.  Just creating and deleting a directory.  Please also list out the &quot;many things missing&quot;.  Help us out.","body":"@9ilsdx9rvj0lo  Rather than being snarky, perhaps you could provide an edit to handle symlinks.  The OP said <i>nothing</i> about symbolic links in his post.  Just creating and deleting a directory.  Please also list out the &quot;many things missing&quot;.  Help us out."},{"owner":{"account_id":7172249,"reputation":8197,"user_id":5479362,"accept_rate":48,"display_name":"9ilsdx 9rvj 0lo"},"score":0,"creation_date":1521703908,"post_id":29175213,"comment_id":85846425,"body_markdown":"@PerryTew I&#39;m not being snarky. I&#39;m just pointing out, that I do fully disagree with your comment about the answer being better because no external libraries are being used. It is not. There is a good reason people are using apache commons : you don&#39;t have to program any single thing yourself. Symlinks are just an example of things you&#39;ll miss writing everything from scratch.","body":"@PerryTew I&#39;m not being snarky. I&#39;m just pointing out, that I do fully disagree with your comment about the answer being better because no external libraries are being used. It is not. There is a good reason people are using apache commons : you don&#39;t have to program any single thing yourself. Symlinks are just an example of things you&#39;ll miss writing everything from scratch."},{"owner":{"account_id":1664814,"reputation":2953,"user_id":1532454,"accept_rate":80,"display_name":"Jeff Learman"},"score":3,"creation_date":1522712427,"post_id":29175213,"comment_id":86247363,"body_markdown":"It&#39;s not a matter of better/worse, but pros and cons.  Not relying on external libraries is sometimes a significant benefit.  Of course, there&#39;s a significant benefit to using tried-and-true software.  It&#39;s up to the developer to balance the issues.  If there are bugs other than the two already mentioned, we&#39;d certainly like to know about them.","body":"It&#39;s not a matter of better/worse, but pros and cons.  Not relying on external libraries is sometimes a significant benefit.  Of course, there&#39;s a significant benefit to using tried-and-true software.  It&#39;s up to the developer to balance the issues.  If there are bugs other than the two already mentioned, we&#39;d certainly like to know about them."}],"tags":[],"owner":{"account_id":1664814,"reputation":2953,"user_id":1532454,"accept_rate":80,"display_name":"Jeff Learman"},"comment_count":4,"down_vote_count":1,"up_vote_count":112,"is_accepted":false,"score":111,"last_activity_date":1525819651,"creation_date":1426882951,"answer_id":29175213,"question_id":20281835,"body_markdown":"This works, and while it looks inefficient to skip the directory test, it&#39;s not: the test happens right away in `listFiles()`.\r\n\r\n    void deleteDir(File file) {\r\n    \tFile[] contents = file.listFiles();\r\n    \tif (contents != null) {\r\n            for (File f : contents) {\r\n                deleteDir(f);\r\n            }\r\n    \t}\r\n        file.delete();\r\n    }\r\n\r\nUpdate, to avoid following symbolic links:\r\n\r\n    void deleteDir(File file) {\r\n        File[] contents = file.listFiles();\r\n        if (contents != null) {\r\n            for (File f : contents) {\r\n            \tif (! Files.isSymbolicLink(f.toPath())) {\r\n            \t\tdeleteDir(f);\r\n            \t}\r\n            }\r\n        }\r\n        file.delete();\r\n    }\r\n","title":"How to delete a folder with files using Java","body":"<p>This works, and while it looks inefficient to skip the directory test, it's not: the test happens right away in <code>listFiles()</code>.</p>\n\n<pre><code>void deleteDir(File file) {\n    File[] contents = file.listFiles();\n    if (contents != null) {\n        for (File f : contents) {\n            deleteDir(f);\n        }\n    }\n    file.delete();\n}\n</code></pre>\n\n<p>Update, to avoid following symbolic links:</p>\n\n<pre><code>void deleteDir(File file) {\n    File[] contents = file.listFiles();\n    if (contents != null) {\n        for (File f : contents) {\n            if (! Files.isSymbolicLink(f.toPath())) {\n                deleteDir(f);\n            }\n        }\n    }\n    file.delete();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"score":2,"creation_date":1509494259,"post_id":29230012,"comment_id":81039735,"body_markdown":"This will throw a NullPointerException if there is an I/O exception while reading the directory. The code should check whether `listFiles()` returns null, rather than calling `isDirectory()`.","body":"This will throw a NullPointerException if there is an I/O exception while reading the directory. The code should check whether <code>listFiles()</code> returns null, rather than calling <code>isDirectory()</code>."}],"tags":[],"owner":{"account_id":5776831,"reputation":342,"user_id":4558679,"display_name":"Pierre Lem&#233;e"},"comment_count":1,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1442233462,"creation_date":1427192493,"answer_id":29230012,"question_id":20281835,"body_markdown":"My basic recursive version, working with older versions of JDK:\r\n\r\n    public static void deleteFile(File element) {\r\n        if (element.isDirectory()) {\r\n            for (File sub : element.listFiles()) {\r\n                deleteFile(sub);\r\n            }\r\n        }\r\n        element.delete();\r\n    }","title":"How to delete a folder with files using Java","body":"<p>My basic recursive version, working with older versions of JDK:</p>\n\n<pre><code>public static void deleteFile(File element) {\n    if (element.isDirectory()) {\n        for (File sub : element.listFiles()) {\n            deleteFile(sub);\n        }\n    }\n    element.delete();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":271954,"reputation":303,"user_id":562765,"display_name":"Mushtaque Ahmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1453805145,"creation_date":1453805145,"answer_id":35012024,"question_id":20281835,"body_markdown":"            import org.apache.commons.io.FileUtils;\r\n\r\n            List&lt;String&gt; directory =  new ArrayList(); \r\n\t\t\tdirectory.add(&quot;test-output&quot;); \r\n\t\t\tdirectory.add(&quot;Reports/executions&quot;); \r\n\t\t\tdirectory.add(&quot;Reports/index.html&quot;); \r\n\t\t\tdirectory.add(&quot;Reports/report.properties&quot;); \r\n\t\t\tfor(int count = 0 ; count &lt; directory.size() ; count ++)\r\n\t\t\t{\r\n\t\t\tString destination = directory.get(count);\r\n\t\t\tdeleteDirectory(destination);\r\n\t\t\t}\r\n\r\n\r\n\r\n\r\n\r\n          public void deleteDirectory(String path) {\r\n\r\n\t        File file  = new File(path);\r\n\t        if(file.isDirectory()){\r\n\t        \t System.out.println(&quot;Deleting Directory :&quot; + path);\r\n\t        \ttry {\r\n\t\t\t\t\tFileUtils.deleteDirectory(new File(path)); //deletes the whole folder\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t        }\r\n\t        else {\r\n \t\t\tSystem.out.println(&quot;Deleting File :&quot; + path);\r\n\t            //it is a simple file. Proceed for deletion\r\n\t            file.delete();\r\n\t        }\r\n\t         \r\n\t    }\r\n\r\n\r\nWorks like a Charm . For both folder and files . Salam :) ","title":"How to delete a folder with files using Java","body":"<pre><code>        import org.apache.commons.io.FileUtils;\n\n        List&lt;String&gt; directory =  new ArrayList(); \n        directory.add(\"test-output\"); \n        directory.add(\"Reports/executions\"); \n        directory.add(\"Reports/index.html\"); \n        directory.add(\"Reports/report.properties\"); \n        for(int count = 0 ; count &lt; directory.size() ; count ++)\n        {\n        String destination = directory.get(count);\n        deleteDirectory(destination);\n        }\n\n\n\n\n\n      public void deleteDirectory(String path) {\n\n        File file  = new File(path);\n        if(file.isDirectory()){\n             System.out.println(\"Deleting Directory :\" + path);\n            try {\n                FileUtils.deleteDirectory(new File(path)); //deletes the whole folder\n            } catch (IOException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n        else {\n        System.out.println(\"Deleting File :\" + path);\n            //it is a simple file. Proceed for deletion\n            file.delete();\n        }\n\n    }\n</code></pre>\n\n<p>Works like a Charm . For both folder and files . Salam :) </p>\n"},{"comments":[{"owner":{"account_id":7779706,"reputation":363,"user_id":5886518,"display_name":"Piyush Rumao"},"score":0,"creation_date":1458624608,"post_id":36138762,"comment_id":59931119,"body_markdown":"It works fine with a directory with all closed files. But when tried on directory with open files it doesnt work. Can you help me find a way to delete folder inspite of open files","body":"It works fine with a directory with all closed files. But when tried on directory with open files it doesnt work. Can you help me find a way to delete folder inspite of open files"},{"owner":{"account_id":1497191,"reputation":9670,"user_id":1402846,"accept_rate":90,"display_name":"Pang"},"score":2,"creation_date":1463200764,"post_id":36138762,"comment_id":61975538,"body_markdown":"This won&#39;t delete non-empty subdirectories.","body":"This won&#39;t delete non-empty subdirectories."}],"tags":[],"owner":{"account_id":7779706,"reputation":363,"user_id":5886518,"display_name":"Piyush Rumao"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1463202386,"creation_date":1458584412,"answer_id":36138762,"question_id":20281835,"body_markdown":"You can use this function\r\n\r\n    public void delete()    \r\n    {   \r\n        File f = new File(&quot;E://implementation1/&quot;);\r\n        File[] files = f.listFiles();\r\n        for (File file : files) {\r\n            file.delete();\r\n        }\r\n    }\r\n     ","title":"How to delete a folder with files using Java","body":"<p>You can use this function</p>\n\n<pre><code>public void delete()    \n{   \n    File f = new File(\"E://implementation1/\");\n    File[] files = f.listFiles();\n    for (File file : files) {\n        file.delete();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3849703,"reputation":435,"user_id":3190174,"accept_rate":75,"display_name":"Javo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1459420205,"creation_date":1459420205,"answer_id":36330841,"question_id":20281835,"body_markdown":"I like this solution the most. It does not use 3rd party library, instead it uses [NIO2][1] of Java 7.\r\n\r\n    /**\r\n     * Deletes Folder with all of its content\r\n     *\r\n     * @param folder path to folder which should be deleted\r\n     */\r\n    public static void deleteFolderAndItsContent(final Path folder) throws IOException {\r\n        Files.walkFileTree(folder, new SimpleFileVisitor&lt;Path&gt;() {\r\n            @Override\r\n            public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {\r\n                Files.delete(file);\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n\r\n            @Override\r\n            public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {\r\n                if (exc != null) {\r\n                    throw exc;\r\n                }\r\n                Files.delete(dir);\r\n                return FileVisitResult.CONTINUE;\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/essential/io/fileio.html &quot;NIO2&quot;","title":"How to delete a folder with files using Java","body":"<p>I like this solution the most. It does not use 3rd party library, instead it uses <a href=\"https://docs.oracle.com/javase/tutorial/essential/io/fileio.html\" rel=\"nofollow\" title=\"NIO2\">NIO2</a> of Java 7.</p>\n\n<pre><code>/**\n * Deletes Folder with all of its content\n *\n * @param folder path to folder which should be deleted\n */\npublic static void deleteFolderAndItsContent(final Path folder) throws IOException {\n    Files.walkFileTree(folder, new SimpleFileVisitor&lt;Path&gt;() {\n        @Override\n        public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {\n            Files.delete(file);\n            return FileVisitResult.CONTINUE;\n        }\n\n        @Override\n        public FileVisitResult postVisitDirectory(Path dir, IOException exc) throws IOException {\n            if (exc != null) {\n                throw exc;\n            }\n            Files.delete(dir);\n            return FileVisitResult.CONTINUE;\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1487694617,"creation_date":1487694617,"answer_id":42372854,"question_id":20281835,"body_markdown":"This is the best solution for `Java 7+`:\r\n\r\n    public static void deleteDirectory(String directoryFilePath) throws IOException\r\n    {\r\n    \tPath directory = Paths.get(directoryFilePath);\r\n    \r\n    \tif (Files.exists(directory))\r\n    \t{\r\n    \t\tFiles.walkFileTree(directory, new SimpleFileVisitor&lt;Path&gt;()\r\n    \t\t{\r\n    \t\t\t@Override\r\n    \t\t\tpublic FileVisitResult visitFile(Path path, BasicFileAttributes basicFileAttributes) throws IOException\r\n    \t\t\t{\r\n    \t\t\t\tFiles.delete(path);\r\n    \t\t\t\treturn FileVisitResult.CONTINUE;\r\n    \t\t\t}\r\n    \r\n    \t\t\t@Override\r\n    \t\t\tpublic FileVisitResult postVisitDirectory(Path directory, IOException ioException) throws IOException\r\n    \t\t\t{\r\n    \t\t\t\tFiles.delete(directory);\r\n    \t\t\t\treturn FileVisitResult.CONTINUE;\r\n    \t\t\t}\r\n    \t\t});\r\n    \t}\r\n    }","title":"How to delete a folder with files using Java","body":"<p>This is the best solution for <code>Java 7+</code>:</p>\n\n<pre><code>public static void deleteDirectory(String directoryFilePath) throws IOException\n{\n    Path directory = Paths.get(directoryFilePath);\n\n    if (Files.exists(directory))\n    {\n        Files.walkFileTree(directory, new SimpleFileVisitor&lt;Path&gt;()\n        {\n            @Override\n            public FileVisitResult visitFile(Path path, BasicFileAttributes basicFileAttributes) throws IOException\n            {\n                Files.delete(path);\n                return FileVisitResult.CONTINUE;\n            }\n\n            @Override\n            public FileVisitResult postVisitDirectory(Path directory, IOException ioException) throws IOException\n            {\n                Files.delete(directory);\n                return FileVisitResult.CONTINUE;\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1571583,"reputation":2828,"user_id":1459174,"accept_rate":88,"display_name":"prem30488"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488866878,"creation_date":1488866878,"answer_id":42641329,"question_id":20281835,"body_markdown":"You can make recursive call if sub directories exists\r\n\r\n    import java.io.File;\r\n\r\n    class DeleteDir {\r\n    public static void main(String args[]) {\r\n    deleteDirectory(new File(args[0]));\r\n    }\r\n\r\n    static public boolean deleteDirectory(File path) {\r\n    if( path.exists() ) {\r\n      File[] files = path.listFiles();\r\n      for(int i=0; i&lt;files.length; i++) {\r\n         if(files[i].isDirectory()) {\r\n           deleteDirectory(files[i]);\r\n         }\r\n         else {\r\n           files[i].delete();\r\n         }\r\n      }\r\n    }\r\n    return( path.delete() );\r\n    }\r\n    }","title":"How to delete a folder with files using Java","body":"<p>You can make recursive call if sub directories exists</p>\n\n<pre><code>import java.io.File;\n\nclass DeleteDir {\npublic static void main(String args[]) {\ndeleteDirectory(new File(args[0]));\n}\n\nstatic public boolean deleteDirectory(File path) {\nif( path.exists() ) {\n  File[] files = path.listFiles();\n  for(int i=0; i&lt;files.length; i++) {\n     if(files[i].isDirectory()) {\n       deleteDirectory(files[i]);\n     }\n     else {\n       files[i].delete();\n     }\n  }\n}\nreturn( path.delete() );\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2171446,"reputation":1301,"user_id":1923328,"display_name":"Laurent Caillette"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1501834081,"creation_date":1501834081,"answer_id":45501457,"question_id":20281835,"body_markdown":"Guava 21+ to the rescue. Use only if there are no symlinks pointing out of the directory to delete. \r\n\r\n    com.google.common.io.MoreFiles.deleteRecursively(\r\n          file.toPath(),\r\n          RecursiveDeleteOption.ALLOW_INSECURE\r\n    ) ;\r\n\r\n(This question is well-indexed by Google, so other people usig Guava might be happy to find this answer, even if it is redundant with other answers elsewhere.)","title":"How to delete a folder with files using Java","body":"<p>Guava 21+ to the rescue. Use only if there are no symlinks pointing out of the directory to delete. </p>\n\n<pre><code>com.google.common.io.MoreFiles.deleteRecursively(\n      file.toPath(),\n      RecursiveDeleteOption.ALLOW_INSECURE\n) ;\n</code></pre>\n\n<p>(This question is well-indexed by Google, so other people usig Guava might be happy to find this answer, even if it is redundant with other answers elsewhere.)</p>\n"},{"tags":[],"owner":{"account_id":2090481,"reputation":498,"user_id":1860436,"accept_rate":70,"display_name":"Adam Short"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1505728133,"creation_date":1505728133,"answer_id":46276320,"question_id":20281835,"body_markdown":"Some of these answers seem unnecessarily long:\r\n\r\n    if (directory.exists()) {\r\n    \tfor (File file : directory.listFiles()) {\r\n   \t\t\tfile.delete();\r\n   \t\t}\r\n   \t\tdirectory.delete();\r\n   \t}\r\n\r\nWorks for sub directories too.","title":"How to delete a folder with files using Java","body":"<p>Some of these answers seem unnecessarily long:</p>\n\n<pre><code>if (directory.exists()) {\n    for (File file : directory.listFiles()) {\n        file.delete();\n    }\n    directory.delete();\n}\n</code></pre>\n\n<p>Works for sub directories too.</p>\n"},{"comments":[{"owner":{"account_id":1664814,"reputation":2953,"user_id":1532454,"accept_rate":80,"display_name":"Jeff Learman"},"score":9,"creation_date":1522709942,"post_id":46983076,"comment_id":86246820,"body_markdown":"Note that this may have scalability issues since it builds the full list, creates a sorted copy, and then iterates over the sorted copy.  Back in the bad old days when memory wasn&#39;t inexhaustible, this would be a very bad idea.  It&#39;s concise but at a cost in space (O(N) vs O(1)) and efficiency (O(N log N) vs O(N)).  This wouldn&#39;t matter in most use cases.","body":"Note that this may have scalability issues since it builds the full list, creates a sorted copy, and then iterates over the sorted copy.  Back in the bad old days when memory wasn&#39;t inexhaustible, this would be a very bad idea.  It&#39;s concise but at a cost in space (O(N) vs O(1)) and efficiency (O(N log N) vs O(N)).  This wouldn&#39;t matter in most use cases."},{"owner":{"account_id":1664814,"reputation":2953,"user_id":1532454,"accept_rate":80,"display_name":"Jeff Learman"},"score":0,"creation_date":1522711702,"post_id":46983076,"comment_id":86247211,"body_markdown":"I should have said &quot;space O(N) vs O(depth)&quot; above, where depth is the depth of the directory tree (comparing this solution to recursive ones.)","body":"I should have said &quot;space O(N) vs O(depth)&quot; above, where depth is the depth of the directory tree (comparing this solution to recursive ones.)"},{"owner":{"account_id":1075183,"reputation":751,"user_id":5319114,"accept_rate":64,"display_name":"Leo"},"score":2,"creation_date":1549997310,"post_id":46983076,"comment_id":96104876,"body_markdown":"this is elegant, works and does not rely on external libraries. loved it","body":"this is elegant, works and does not rely on external libraries. loved it"},{"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"score":5,"creation_date":1555623501,"post_id":46983076,"comment_id":98184391,"body_markdown":"Doesn&#39;t this have the problem of file handle leaks? This example does _not_ close the stream returned by `Files.walk()`, which is explicitly indicated in the API docs. I know that if you don&#39;t close the stream returned by `Files.list()` for example, you can run out of handles and the program will crash. See e.g. https://stackoverflow.com/q/36990053/421049 and https://stackoverflow.com/q/26997240/421049 .","body":"Doesn&#39;t this have the problem of file handle leaks? This example does <i>not</i> close the stream returned by <code>Files.walk()</code>, which is explicitly indicated in the API docs. I know that if you don&#39;t close the stream returned by <code>Files.list()</code> for example, you can run out of handles and the program will crash. See e.g. <a href=\"https://stackoverflow.com/q/36990053/421049\">stackoverflow.com/q/36990053/421049</a> and <a href=\"https://stackoverflow.com/q/26997240/421049\">stackoverflow.com/q/26997240/421049</a> ."},{"owner":{"account_id":952426,"reputation":1868,"user_id":978302,"accept_rate":60,"display_name":"RenatoIvancic"},"score":0,"creation_date":1620451933,"post_id":46983076,"comment_id":119209985,"body_markdown":"You don&#39;t call any terminal function in that stream, for this reason no files will actually be deleted. If you want that the stream will actually iterate files and delete them you will have to call terminal function like .count() on it. .close() is not a terminal function.","body":"You don&#39;t call any terminal function in that stream, for this reason no files will actually be deleted. If you want that the stream will actually iterate files and delete them you will have to call terminal function like .count() on it. .close() is not a terminal function."},{"owner":{"account_id":1061472,"reputation":11336,"user_id":1062992,"accept_rate":94,"display_name":"egerardus"},"score":0,"creation_date":1620791468,"post_id":46983076,"comment_id":119302671,"body_markdown":"@GarretWilson + posterity, I tested this using the methods described in your link (by querying for open handles after running this on a loop) it shows that this does not leave any open handles at all, the terminal operation `forEach` must be closing the stream.","body":"@GarretWilson + posterity, I tested this using the methods described in your link (by querying for open handles after running this on a loop) it shows that this does not leave any open handles at all, the terminal operation <code>forEach</code> must be closing the stream."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1624472969,"post_id":46983076,"comment_id":120371781,"body_markdown":"Why do you need to sort if `walk()` is depth-first?","body":"Why do you need to sort if <code>walk()</code> is depth-first?"},{"owner":{"account_id":7291906,"reputation":503,"user_id":7789681,"display_name":"Alexey Bril"},"score":2,"creation_date":1628800841,"post_id":46983076,"comment_id":121525300,"body_markdown":"@shmosel Because forEach will start deleting from the beginning and will not be able to delete the directory with the contents. Therefore, the tree must be turned in the opposite direction and deleted from the end.","body":"@shmosel Because forEach will start deleting from the beginning and will not be able to delete the directory with the contents. Therefore, the tree must be turned in the opposite direction and deleted from the end."},{"owner":{"account_id":2924378,"reputation":935,"user_id":2506021,"accept_rate":80,"display_name":"Rangi Keen"},"score":0,"creation_date":1663687050,"post_id":46983076,"comment_id":130295946,"body_markdown":"There&#39;s no need to map from `Path` to `File`. Just use `Files::delete` do delete the `Path` directly.","body":"There&#39;s no need to map from <code>Path</code> to <code>File</code>. Just use <code>Files::delete</code> do delete the <code>Path</code> directly."},{"owner":{"account_id":11729259,"reputation":392,"user_id":8618438,"display_name":"chill appreciator"},"score":0,"creation_date":1686815593,"post_id":46983076,"comment_id":134851948,"body_markdown":"Explanation why do we need to sort: &quot;Here, Files.walk() returns a Stream of Path that we sort in reverse order. This places the paths denoting the contents of directories before directories itself. Thereafter it maps Path to File and deletes each File.&quot;","body":"Explanation why do we need to sort: &quot;Here, Files.walk() returns a Stream of Path that we sort in reverse order. This places the paths denoting the contents of directories before directories itself. Thereafter it maps Path to File and deletes each File.&quot;"}],"tags":[],"owner":{"account_id":116977,"reputation":1852,"user_id":306538,"display_name":"nirmal"},"comment_count":10,"down_vote_count":1,"up_vote_count":66,"is_accepted":false,"score":65,"last_activity_date":1679248019,"creation_date":1509136758,"answer_id":46983076,"question_id":20281835,"body_markdown":"I prefer this solution on java 8:\r\n\r\n      Files.walk(pathToBeDeleted)\r\n        .sorted(Comparator.reverseOrder())\r\n        .map(Path::toFile)\r\n        .forEach(File::delete);\r\n\r\nFrom this site: http://www.baeldung.com/java-delete-directory\r\n\r\nUpdate, to close the stream:\r\n\r\n      try (Stream&lt;Path&gt; pathStream = Files.walk(repoDirFile.toPath())) {\r\n        pathStream.sorted(Comparator.reverseOrder())\r\n          .map(Path::toFile)\r\n          .forEach(File::delete);\r\n      }\r\n","title":"How to delete a folder with files using Java","body":"<p>I prefer this solution on java 8:</p>\n<pre><code>  Files.walk(pathToBeDeleted)\n    .sorted(Comparator.reverseOrder())\n    .map(Path::toFile)\n    .forEach(File::delete);\n</code></pre>\n<p>From this site: <a href=\"http://www.baeldung.com/java-delete-directory\" rel=\"nofollow noreferrer\">http://www.baeldung.com/java-delete-directory</a></p>\n<p>Update, to close the stream:</p>\n<pre><code>  try (Stream&lt;Path&gt; pathStream = Files.walk(repoDirFile.toPath())) {\n    pathStream.sorted(Comparator.reverseOrder())\n      .map(Path::toFile)\n      .forEach(File::delete);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1530441668,"creation_date":1530441668,"answer_id":51122542,"question_id":20281835,"body_markdown":"we can use the `spring-core` dependency;\r\n\r\n    boolean result = FileSystemUtils.deleteRecursively(file);","title":"How to delete a folder with files using Java","body":"<p>we can use the <code>spring-core</code> dependency;</p>\n\n<pre><code>boolean result = FileSystemUtils.deleteRecursively(file);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531493943,"creation_date":1531493943,"answer_id":51327957,"question_id":20281835,"body_markdown":"Most of answers (even recent) referencing JDK classes rely on [`File.delete()`][1] but that is a flawed API as the operation may fail silently.  \r\nThe `java.io.File.delete()` method documentation states :\r\n\r\n&gt; Note that the `java.nio.file.Files` class defines the `delete` method to\r\n&gt; throw an `IOException` when a file cannot be deleted. This is useful for\r\n&gt; error reporting and to diagnose why a file cannot be deleted.\r\n\r\n\r\nAs replacement, you should favor [`Files.delete(Path p)`][2]  that throws an `IOException` with a error message.   \r\n\r\nThe actual code could be written such as :\r\n\r\n\tPath index = Paths.get(&quot;/home/Work/Indexer1&quot;);\r\n\r\n\tif (!Files.exists(index)) {\r\n\t\tindex = Files.createDirectories(index);\r\n\t} else {\r\n\r\n\t\tFiles.walk(index)\r\n\t\t\t .sorted(Comparator.reverseOrder())  // as the file tree is traversed depth-first and that deleted dirs have to be empty  \r\n\t\t     .forEach(t -&gt; {\r\n\t\t\t     try {\r\n\t\t\t\t     Files.delete(t);\r\n\t\t\t     } catch (IOException e) {\r\n\t\t\t\t     // LOG the exception and potentially stop the processing\r\n\t\t\t\t    \r\n\t\t\t     }\r\n\t\t     });\r\n\t\tif (!Files.exists(index)) {\r\n\t\t\tindex = Files.createDirectories(index);\r\n\t\t}\r\n\t}\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/io/File.html#delete--\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#delete-java.nio.file.Path-","title":"How to delete a folder with files using Java","body":"<p>Most of answers (even recent) referencing JDK classes rely on <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/File.html#delete--\" rel=\"nofollow noreferrer\"><code>File.delete()</code></a> but that is a flawed API as the operation may fail silently.<br>\nThe <code>java.io.File.delete()</code> method documentation states :</p>\n\n<blockquote>\n  <p>Note that the <code>java.nio.file.Files</code> class defines the <code>delete</code> method to\n  throw an <code>IOException</code> when a file cannot be deleted. This is useful for\n  error reporting and to diagnose why a file cannot be deleted.</p>\n</blockquote>\n\n<p>As replacement, you should favor <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#delete-java.nio.file.Path-\" rel=\"nofollow noreferrer\"><code>Files.delete(Path p)</code></a>  that throws an <code>IOException</code> with a error message.   </p>\n\n<p>The actual code could be written such as :</p>\n\n<pre><code>Path index = Paths.get(\"/home/Work/Indexer1\");\n\nif (!Files.exists(index)) {\n    index = Files.createDirectories(index);\n} else {\n\n    Files.walk(index)\n         .sorted(Comparator.reverseOrder())  // as the file tree is traversed depth-first and that deleted dirs have to be empty  \n         .forEach(t -&gt; {\n             try {\n                 Files.delete(t);\n             } catch (IOException e) {\n                 // LOG the exception and potentially stop the processing\n\n             }\n         });\n    if (!Files.exists(index)) {\n        index = Files.createDirectories(index);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4565617,"reputation":213,"user_id":3706697,"display_name":"Issam Ressani"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1546534700,"creation_date":1546534700,"answer_id":54026613,"question_id":20281835,"body_markdown":"You can use **FileUtils.deleteDirectory**. JAVA can&#39;t delete the non-empty foldres with **File.delete()**.","title":"How to delete a folder with files using Java","body":"<p>You can use <strong>FileUtils.deleteDirectory</strong>. JAVA can't delete the non-empty foldres with <strong>File.delete()</strong>.</p>\n"},{"tags":[],"owner":{"account_id":7608029,"reputation":4455,"user_id":5770004,"display_name":"Gavriel Cohen"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1619423844,"creation_date":1557914545,"answer_id":56146647,"question_id":20281835,"body_markdown":"As mentioned, **Java** is unable to delete a folder containing files, so first delete the files and then the folder.\r\n\r\nHere&#39;s a simple example to do this:\r\n\r\n    import org.apache.commons.io.FileUtils;\r\n    \r\n    \r\n\r\n    // First, remove files from into the folder \r\n    FileUtils.cleanDirectory(folder/path);\r\n \r\n    // Then, remove the folder\r\n    FileUtils.deleteDirectory(folder/path);\r\n\r\nOr:\r\n\r\n    FileUtils.forceDelete(new File(destination));","title":"How to delete a folder with files using Java","body":"<p>As mentioned, <strong>Java</strong> is unable to delete a folder containing files, so first delete the files and then the folder.</p>\n<p>Here's a simple example to do this:</p>\n<pre><code>import org.apache.commons.io.FileUtils;\n\n\n\n// First, remove files from into the folder \nFileUtils.cleanDirectory(folder/path);\n\n// Then, remove the folder\nFileUtils.deleteDirectory(folder/path);\n</code></pre>\n<p>Or:</p>\n<pre><code>FileUtils.forceDelete(new File(destination));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3593742,"reputation":207,"user_id":2999097,"accept_rate":45,"display_name":"Noshaf"},"score":1,"creation_date":1663943089,"post_id":58428947,"comment_id":130365183,"body_markdown":"it works, short and smart way!!","body":"it works, short and smart way!!"}],"tags":[],"owner":{"account_id":15469492,"reputation":404,"user_id":11159966,"display_name":"dZ."},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1571303466,"creation_date":1571303466,"answer_id":58428947,"question_id":20281835,"body_markdown":"One more choice is to use Spring&#39;s `org.springframework.util.FileSystemUtils` relevant method which will recursively delete all content of the directory.\r\n\r\n    File directoryToDelete = new File(&lt;your_directory_path_to_delete&gt;);\r\n    FileSystemUtils.deleteRecursively(directoryToDelete);\r\n\r\nThat will do the job!","title":"How to delete a folder with files using Java","body":"<p>One more choice is to use Spring's <code>org.springframework.util.FileSystemUtils</code> relevant method which will recursively delete all content of the directory.</p>\n\n<pre><code>File directoryToDelete = new File(&lt;your_directory_path_to_delete&gt;);\nFileSystemUtils.deleteRecursively(directoryToDelete);\n</code></pre>\n\n<p>That will do the job!</p>\n"},{"tags":[],"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1625141711,"creation_date":1602240081,"answer_id":64278418,"question_id":20281835,"body_markdown":"2020 here :)\r\n\r\nWith Apache commons io FileUtils, contrary to the &quot;pure&quot; Java variants a folder **does not need to be empty** to be deleted. To give you a better overview I list the variants here, the following 3 **may throw** exceptions for various reasons:\r\n\r\n - [cleanDirectory][1]: Cleans a directory without deleting it\r\n - [forceDelete][2]: Deletes a file. If file is a directory, delete it and all sub-directories\r\n - [forceDeleteOnExit][3]: Schedules a file to be deleted when JVM exits. If file is directory delete it and all sub-directories. Not recommended for running servers as JVM may not exit any time soon ...\r\n\r\nThe following variant **never throws** exceptions (even if the file is null !)\r\n - [deleteQuietly][4]: Deletes a file, **never throwing an exception**. If it is a directory, delete it and all sub-directories.\r\n\r\nOne more thing to know is dealing with [symbolic links][5], it will delete the symbolic link and not the target folder... be careful.\r\n\r\nAlso keep in mind that deleting a large file or folder can be a **blocking operation** for a good while ... so if you do not mind having it run async do it (in a background thread via executor for example).\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#cleanDirectory-java.io.File-\r\n  [2]: https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#forceDelete-java.io.File-\r\n  [3]: https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#forceDeleteOnExit-java.io.File-\r\n  [4]: https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#deleteQuietly-java.io.File-\r\n  [5]: https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#isSymlink-java.io.File-","title":"How to delete a folder with files using Java","body":"<p>2020 here :)</p>\n<p>With Apache commons io FileUtils, contrary to the &quot;pure&quot; Java variants a folder <strong>does not need to be empty</strong> to be deleted. To give you a better overview I list the variants here, the following 3 <strong>may throw</strong> exceptions for various reasons:</p>\n<ul>\n<li><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#cleanDirectory-java.io.File-\" rel=\"nofollow noreferrer\">cleanDirectory</a>: Cleans a directory without deleting it</li>\n<li><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#forceDelete-java.io.File-\" rel=\"nofollow noreferrer\">forceDelete</a>: Deletes a file. If file is a directory, delete it and all sub-directories</li>\n<li><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#forceDeleteOnExit-java.io.File-\" rel=\"nofollow noreferrer\">forceDeleteOnExit</a>: Schedules a file to be deleted when JVM exits. If file is directory delete it and all sub-directories. Not recommended for running servers as JVM may not exit any time soon ...</li>\n</ul>\n<p>The following variant <strong>never throws</strong> exceptions (even if the file is null !)</p>\n<ul>\n<li><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#deleteQuietly-java.io.File-\" rel=\"nofollow noreferrer\">deleteQuietly</a>: Deletes a file, <strong>never throwing an exception</strong>. If it is a directory, delete it and all sub-directories.</li>\n</ul>\n<p>One more thing to know is dealing with <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.7/org/apache/commons/io/FileUtils.html#isSymlink-java.io.File-\" rel=\"nofollow noreferrer\">symbolic links</a>, it will delete the symbolic link and not the target folder... be careful.</p>\n<p>Also keep in mind that deleting a large file or folder can be a <strong>blocking operation</strong> for a good while ... so if you do not mind having it run async do it (in a background thread via executor for example).</p>\n"},{"tags":[],"owner":{"account_id":19884019,"reputation":1,"user_id":14567359,"display_name":"A. Aphise Traore"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604365992,"creation_date":1604365682,"answer_id":64655408,"question_id":20281835,"body_markdown":"You may also use this to delete a folder that contains subfolders and files. \r\n\r\n1. Fist, create a recursive function. \r\n    \r\n        private void recursiveDelete(File file){\r\n                \r\n                if(file.list().length &gt; 0){\r\n                    String[] list = file.list();\r\n                    for(String is: list){\r\n                        File currentFile = new File(file.getPath(),is);\r\n                        if(currentFile.isDirectory()){\r\n                                recursiveDelete(currentFile);\r\n                        }else{\r\n                            currentFile.delete();\r\n                        }\r\n                    }\r\n                }else {\r\n                    file.delete();\r\n                }\r\n            }\r\n\r\n2. then, from your initial function use a while loop to call the recursive.\r\n \r\n\r\n        private boolean deleteFolderContainingSubFoldersAndFiles(){\r\n        \r\n                boolean deleted = false;\r\n                File folderToDelete = new File(&quot;C:/mainFolderDirectoryHere&quot;);\r\n        \r\n                while(folderToDelete != null &amp;&amp; folderToDelete.isDirectory()){\r\n                    recursiveDelete(folderToDelete);\r\n                }\r\n        \r\n                return deleted;\r\n            }\r\n\r\n\r\n","title":"How to delete a folder with files using Java","body":"<p>You may also use this to delete a folder that contains subfolders and files.</p>\n<ol>\n<li><p>Fist, create a recursive function.</p>\n<pre><code> private void recursiveDelete(File file){\n\n         if(file.list().length &gt; 0){\n             String[] list = file.list();\n             for(String is: list){\n                 File currentFile = new File(file.getPath(),is);\n                 if(currentFile.isDirectory()){\n                         recursiveDelete(currentFile);\n                 }else{\n                     currentFile.delete();\n                 }\n             }\n         }else {\n             file.delete();\n         }\n     }\n</code></pre>\n</li>\n<li><p>then, from your initial function use a while loop to call the recursive.</p>\n<pre><code> private boolean deleteFolderContainingSubFoldersAndFiles(){\n\n         boolean deleted = false;\n         File folderToDelete = new File(&quot;C:/mainFolderDirectoryHere&quot;);\n\n         while(folderToDelete != null &amp;&amp; folderToDelete.isDirectory()){\n             recursiveDelete(folderToDelete);\n         }\n\n         return deleted;\n     }\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":19750276,"reputation":35,"user_id":14461795,"display_name":"Xoma Devs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1605855090,"creation_date":1605855090,"answer_id":64925021,"question_id":20281835,"body_markdown":"Here is a simple way to do it :\r\n\r\n```\r\npublic void deleteDirectory(String directoryPath)  {\r\n      new Thread(new Runnable() {\r\n          public void run() {\r\n             for(String e: new File(directoryPath).list()) {\r\n                 if(new File(e).isDirectory()) \r\n                     deleteDirectory(e);\r\n                 else \r\n                     new File(e).delete();\r\n             }\r\n          }\r\n      }).start();\r\n  }\r\n```","title":"How to delete a folder with files using Java","body":"<p>Here is a simple way to do it :</p>\n<pre><code>public void deleteDirectory(String directoryPath)  {\n      new Thread(new Runnable() {\n          public void run() {\n             for(String e: new File(directoryPath).list()) {\n                 if(new File(e).isDirectory()) \n                     deleteDirectory(e);\n                 else \n                     new File(e).delete();\n             }\n          }\n      }).start();\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6466542,"reputation":231,"user_id":5008255,"display_name":"IMXQD"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1608626733,"creation_date":1608626733,"answer_id":65405605,"question_id":20281835,"body_markdown":"You can try this\r\n\r\n    public static void deleteDir(File dirFile) {\r\n        if (dirFile.isDirectory()) {\r\n            File[] dirs = dirFile.listFiles();\r\n            for (File dir: dirs) {\r\n                deleteDir(dir);\r\n            }\r\n        }\r\n        dirFile.delete();\r\n    }","title":"How to delete a folder with files using Java","body":"<p>You can try this</p>\n<pre><code>public static void deleteDir(File dirFile) {\n    if (dirFile.isDirectory()) {\n        File[] dirs = dirFile.listFiles();\n        for (File dir: dirs) {\n            deleteDir(dir);\n        }\n    }\n    dirFile.delete();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23763533,"reputation":2291,"user_id":17778576,"display_name":"Santh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648716236,"creation_date":1648716236,"answer_id":71689477,"question_id":20281835,"body_markdown":"    You can simply remove the directory which contains a single file or multiple files using the apache commons library.\r\n \r\ngradle import :\r\n\r\nimplementation group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.5&#39;\r\n\r\n   \r\n\r\n     \r\n\r\n    \r\n\r\n   \r\n\r\n    \r\n\r\n \r\n\r\n    File file=new File(&quot;/Users/devil/Documents/DummyProject/hello.txt&quot;);\r\n        \r\n     File parentDirLocation=new File(file.getParent);\r\n        \r\n    //Confirming the file parent is a directory or not.\r\n                 \r\n    if(parentDirLocation.isDirectory){\r\n        \r\n        \r\n     //after this line the mentioned directory will deleted.\r\n     FileUtils.deleteDirectory(parentDirLocation);\r\n       \r\n     }\r\n\r\n","title":"How to delete a folder with files using Java","body":"<pre><code>You can simply remove the directory which contains a single file or multiple files using the apache commons library.\n</code></pre>\n<p>gradle import :</p>\n<p>implementation group: 'commons-io', name: 'commons-io', version: '2.5'</p>\n<pre><code>File file=new File(&quot;/Users/devil/Documents/DummyProject/hello.txt&quot;);\n    \n File parentDirLocation=new File(file.getParent);\n    \n//Confirming the file parent is a directory or not.\n             \nif(parentDirLocation.isDirectory){\n    \n    \n //after this line the mentioned directory will deleted.\n FileUtils.deleteDirectory(parentDirLocation);\n   \n }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5966995,"reputation":189,"user_id":4690527,"display_name":"Izzy Kiefer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653879539,"creation_date":1653879539,"answer_id":72428721,"question_id":20281835,"body_markdown":"    List&lt;File&gt; temp = Arrays.asList(new File(&quot;./DIRECTORY&quot;).listFiles());\r\n    for (int i = 0; i &lt; temp.size(); i++)\r\n    {\r\n        temp.get(i).delete();\r\n    }","title":"How to delete a folder with files using Java","body":"<pre><code>List&lt;File&gt; temp = Arrays.asList(new File(&quot;./DIRECTORY&quot;).listFiles());\nfor (int i = 0; i &lt; temp.size(); i++)\n{\n    temp.get(i).delete();\n}\n</code></pre>\n"}],"owner":{"account_id":3657940,"reputation":3431,"user_id":3048442,"accept_rate":17,"display_name":"Mr.G"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":400694,"favorite_count":0,"down_vote_count":5,"up_vote_count":164,"accepted_answer_id":20281958,"answer_count":30,"score":159,"last_activity_date":1683624363,"creation_date":1385715881,"question_id":20281835,"body_markdown":"I want to create and delete a directory using Java, but it isn&#39;t working.\r\n\r\n    File index = new File(&quot;/home/Work/Indexer1&quot;);\r\n    if (!index.exists()) {\r\n        index.mkdir();\r\n    } else {\r\n        index.delete();\r\n        if (!index.exists()) {\r\n            index.mkdir();\r\n        }\r\n    }","title":"How to delete a folder with files using Java","body":"<p>I want to create and delete a directory using Java, but it isn't working.</p>\n\n<pre><code>File index = new File(\"/home/Work/Indexer1\");\nif (!index.exists()) {\n    index.mkdir();\n} else {\n    index.delete();\n    if (!index.exists()) {\n        index.mkdir();\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9777,"page":448,"page_size":100}
