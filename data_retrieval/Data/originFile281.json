{"items":[{"tags":["java","regex"],"comments":[{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1348501690,"post_id":12568451,"comment_id":16931524,"body_markdown":"&quot;\\s+&quot; means &quot;one or more whitespaces of any kind&quot;.","body":"&quot;\\s+&quot; means &quot;one or more whitespaces of any kind&quot;."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1348501882,"post_id":12568451,"comment_id":16931616,"body_markdown":"Case is so important.  Corrected.","body":"Case is so important.  Corrected."},{"owner":{"display_name":"user1679671"},"score":0,"creation_date":1348562028,"post_id":12568451,"comment_id":16948726,"body_markdown":"nobody understand my question..","body":"nobody understand my question.."}],"answers":[{"tags":[],"owner":{"account_id":170117,"reputation":17037,"user_id":396618,"accept_rate":100,"display_name":"Joeri Hendrickx"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1348501644,"creation_date":1348501644,"answer_id":12568478,"question_id":12568451,"body_markdown":"assuming you mean any whitespace, not just spaces, `\\S` will work.\r\n\r\nCfr every dev&#39;s must-have friend, [The regex cheat sheet][1]\r\n\r\n\r\n  [1]: http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/","title":"Regex pattern for &quot;contains not only spaces&quot;","body":"<p>assuming you mean any whitespace, not just spaces, <code>\\S</code> will work.</p>\n\n<p>Cfr every dev's must-have friend, <a href=\"http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/\" rel=\"nofollow\">The regex cheat sheet</a></p>\n"},{"tags":[],"owner":{"account_id":397763,"reputation":159288,"user_id":762073,"accept_rate":83,"display_name":"xdazz"},"down_vote_count":2,"up_vote_count":17,"is_accepted":true,"score":15,"last_activity_date":1348501677,"creation_date":1348501677,"answer_id":12568489,"question_id":12568451,"body_markdown":"Why need to use regex?\r\n\r\n    str.trim().isEmpty()","title":"Regex pattern for &quot;contains not only spaces&quot;","body":"<p>Why need to use regex?</p>\n\n<pre><code>str.trim().isEmpty()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1610299,"reputation":407,"user_id":1489468,"display_name":"Caner Korkmaz"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1348501755,"creation_date":1348501755,"answer_id":12568510,"question_id":12568451,"body_markdown":"You must use this pattern.\r\n \r\n    .*[^ ].*\r\nIt can be anything but not only spaces.","title":"Regex pattern for &quot;contains not only spaces&quot;","body":"<p>You must use this pattern.</p>\n\n<pre><code>.*[^ ].*\n</code></pre>\n\n<p>It can be anything but not only spaces.</p>\n"},{"tags":[],"owner":{"account_id":11245065,"reputation":716,"user_id":8248070,"display_name":"Susampath"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507886822,"creation_date":1507872795,"answer_id":46723121,"question_id":12568451,"body_markdown":"This is much simple .If you are using java just code this.\r\nAs example:-\r\n\r\n         \r\nclassVariable.getname().trim().equal(&quot;&quot;) \r\n\r\nby this you can check whether that variable contains only spaces.","title":"Regex pattern for &quot;contains not only spaces&quot;","body":"<p>This is much simple .If you are using java just code this.\nAs example:-</p>\n\n<p>classVariable.getname().trim().equal(\"\") </p>\n\n<p>by this you can check whether that variable contains only spaces.</p>\n"},{"tags":[],"owner":{"account_id":14649837,"reputation":29,"user_id":10580158,"display_name":"UnDev"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1690545172,"creation_date":1540899687,"answer_id":53063533,"question_id":12568451,"body_markdown":"I&#39;ve got one, it seems heavy, but it&#39;s not that hard to implement.\r\n\r\nPattern with no blank:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    ^[pattern]\\*[pattern without space][pattern]*$\r\n\r\nExample:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    -pattern: a-zA-Z&#192;-&#255; &#39;\\-\r\n\r\n(note that it allows spaces)\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    [a-zA-Z&#192;-&#255; &#39;\\-]\r\n\r\nWith no blank = \r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    ^[a-zA-Z&#192;-&#255; &#39;\\-]\\*[a-zA-Z&#192;-&#255;&#39;\\-][a-zA-Z&#192;-&#255; &#39;\\-]*\r\n\r\nOf course, if you don&#39;t allow spaces at all, you don&#39;t need to do that.\r\n\r\nYou can test yours on https://regexr.com/.","title":"Regex pattern for &quot;contains not only spaces&quot;","body":"<p>I've got one, it seems heavy, but it's not that hard to implement.</p>\n<p>Pattern with no blank:</p>\n<pre class=\"lang-none prettyprint-override\"><code>^[pattern]\\*[pattern without space][pattern]*$\n</code></pre>\n<p>Example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-pattern: a-zA-ZÀ-ÿ '\\-\n</code></pre>\n<p>(note that it allows spaces)</p>\n<pre class=\"lang-none prettyprint-override\"><code>[a-zA-ZÀ-ÿ '\\-]\n</code></pre>\n<p>With no blank =</p>\n<pre class=\"lang-none prettyprint-override\"><code>^[a-zA-ZÀ-ÿ '\\-]\\*[a-zA-ZÀ-ÿ'\\-][a-zA-ZÀ-ÿ '\\-]*\n</code></pre>\n<p>Of course, if you don't allow spaces at all, you don't need to do that.</p>\n<p>You can test yours on <a href=\"https://regexr.com/\" rel=\"nofollow noreferrer\">https://regexr.com/</a>.</p>\n"}],"owner":{"display_name":"user1679671"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19321,"favorite_count":0,"down_vote_count":8,"up_vote_count":11,"closed_date":1674844688,"accepted_answer_id":12568489,"answer_count":5,"score":3,"last_activity_date":1690545172,"creation_date":1348501563,"question_id":12568451,"body_markdown":"Please tell me which pattern I need to use if field must not contain only spaces.","title":"Regex pattern for &quot;contains not only spaces&quot;","body":"<p>Please tell me which pattern I need to use if field must not contain only spaces.</p>\n"},{"tags":["java","jobrunr"],"answers":[{"tags":[],"owner":{"account_id":8898820,"reputation":33,"user_id":6642870,"display_name":"phucvm8x"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690545085,"creation_date":1690545085,"answer_id":76787554,"question_id":76480032,"body_markdown":"I think only Jobrunr Pro can run over 100 jobs.","title":"can I create more than 100 recurring jobs when using Jobrunr OSS, if our Database has enough resource like memory, processing capability","body":"<p>I think only Jobrunr Pro can run over 100 jobs.</p>\n"}],"owner":{"account_id":20624354,"reputation":11,"user_id":15140601,"display_name":"Sharafat Ali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690545085,"creation_date":1686813624,"question_id":76480032,"body_markdown":"can Jobrunr OSS support distributed job processing, more than 100 recurring job?. as per official document can create upto 100 recurring job (Depend on DB). suppose DB have capability to store and process more than 100 jobs then can I create more than 100 recurring job.\r\n\r\n","title":"can I create more than 100 recurring jobs when using Jobrunr OSS, if our Database has enough resource like memory, processing capability","body":"<p>can Jobrunr OSS support distributed job processing, more than 100 recurring job?. as per official document can create upto 100 recurring job (Depend on DB). suppose DB have capability to store and process more than 100 jobs then can I create more than 100 recurring job.</p>\n"},{"tags":["java","spring-boot","docker","netflix-eureka"],"answers":[{"tags":[],"owner":{"account_id":28877964,"reputation":581,"user_id":22118035,"display_name":"Dhruman Desai"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690524060,"creation_date":1690524060,"answer_id":76785186,"question_id":76781303,"body_markdown":"-&gt; The issue you are facing is likely related to how you are constructing the URI for \r\n   the HTTP request in your `webClientBuilder`. By default, when using the `uri()` \r\n   method with a string argument, the `WebClient` will not take into account the port \r\n   specified in the service URL obtained from Eureka, and it will use the default \r\n   port, which is **80** for HTTP.\r\n\r\n-&gt; Use the `resolve()` method of the URI object to add the **specific path**.","title":"HTTP request with Eureka does not fill port","body":"<p>-&gt; The issue you are facing is likely related to how you are constructing the URI for\nthe HTTP request in your <code>webClientBuilder</code>. By default, when using the <code>uri()</code>\nmethod with a string argument, the <code>WebClient</code> will not take into account the port\nspecified in the service URL obtained from Eureka, and it will use the default\nport, which is <strong>80</strong> for HTTP.</p>\n<p>-&gt; Use the <code>resolve()</code> method of the URI object to add the <strong>specific path</strong>.</p>\n"},{"tags":[],"owner":{"account_id":15131874,"reputation":1867,"user_id":10919491,"display_name":"Benedikt J Schlegel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690545037,"creation_date":1690545037,"answer_id":76787546,"question_id":76781303,"body_markdown":"After a lot of testing I finally found the solution.\r\n\r\nI had not configured the WebClientBuilder correctly. After adding the `LoadBalanced` annotation to the Bean the service name gets correctly resolved.\r\n\r\n    @Configuration\r\n    public class WebClientConfiguration {\r\n    \r\n        @Bean\r\n        @LoadBalanced\r\n        public WebClient.Builder webClientBuilder(){\r\n            return WebClient.builder();\r\n        }\r\n    \r\n    }","title":"HTTP request with Eureka does not fill port","body":"<p>After a lot of testing I finally found the solution.</p>\n<p>I had not configured the WebClientBuilder correctly. After adding the <code>LoadBalanced</code> annotation to the Bean the service name gets correctly resolved.</p>\n<pre><code>@Configuration\npublic class WebClientConfiguration {\n\n    @Bean\n    @LoadBalanced\n    public WebClient.Builder webClientBuilder(){\n        return WebClient.builder();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":15131874,"reputation":1867,"user_id":10919491,"display_name":"Benedikt J Schlegel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76787546,"answer_count":2,"score":0,"last_activity_date":1690545037,"creation_date":1690471697,"question_id":76781303,"body_markdown":"I have multiple services running in docker containers through docker-compose.\r\n\r\nI am trying to make a http request from one service to another but it fails since the port always gets filled as &#39;80&#39; instead of using the port registered with Eureka.\r\n\r\nWhen I iterate through the discovered applications like so:\r\n\r\n    List&lt;Application&gt; applications = discoveryClient.getApplications().getRegisteredApplications();\r\n\r\n       for (Application application : applications) {\r\n           List&lt;InstanceInfo&gt; applicationsInstances = application.getInstances();\r\n                for (InstanceInfo applicationsInstance : applicationsInstances) {\r\n\r\n                    String name = applicationsInstance.getAppName();\r\n                    String url = applicationsInstance.getHomePageUrl();\r\n                    System.out.println(name + &quot;: &quot; + url);\r\n                }\r\n            }\r\n\r\nI get this (correct) output:\r\n\r\n    IDENTITY-SERVICE: http://172.20.0.3:10103/ \r\n\r\nBut when the call gets made like this:\r\n\r\n    return webClientBuilder\r\n                        .build()\r\n                        .post()\r\n                        .uri(&quot;http://identity-service/api/auth/validate&quot;, uriBuilder -&gt; uriBuilder.queryParam(&quot;token&quot;, &quot;xyz&quot;).build())\r\n                        .retrieve()\r\n                        .bodyToMono(ValidationResponseDTO.class);\r\n\r\nthis exception, indicating that it is calling port 80, is thrown:\r\n\r\n    org.springframework.web.reactive.function.client.WebClientRequestException: finishConnect(..) failed: Connection refused: identity-service/172.20.0.3:80\r\n\r\nWhen I specify the port (&quot;`http://identity-service:10103/api/auth/validate`&quot;) it works perfectly fine.\r\n\r\nAnyone have an idea why it is not using the port from Eureka?","title":"HTTP request with Eureka does not fill port","body":"<p>I have multiple services running in docker containers through docker-compose.</p>\n<p>I am trying to make a http request from one service to another but it fails since the port always gets filled as '80' instead of using the port registered with Eureka.</p>\n<p>When I iterate through the discovered applications like so:</p>\n<pre><code>List&lt;Application&gt; applications = discoveryClient.getApplications().getRegisteredApplications();\n\n   for (Application application : applications) {\n       List&lt;InstanceInfo&gt; applicationsInstances = application.getInstances();\n            for (InstanceInfo applicationsInstance : applicationsInstances) {\n\n                String name = applicationsInstance.getAppName();\n                String url = applicationsInstance.getHomePageUrl();\n                System.out.println(name + &quot;: &quot; + url);\n            }\n        }\n</code></pre>\n<p>I get this (correct) output:</p>\n<pre><code>IDENTITY-SERVICE: http://172.20.0.3:10103/ \n</code></pre>\n<p>But when the call gets made like this:</p>\n<pre><code>return webClientBuilder\n                    .build()\n                    .post()\n                    .uri(&quot;http://identity-service/api/auth/validate&quot;, uriBuilder -&gt; uriBuilder.queryParam(&quot;token&quot;, &quot;xyz&quot;).build())\n                    .retrieve()\n                    .bodyToMono(ValidationResponseDTO.class);\n</code></pre>\n<p>this exception, indicating that it is calling port 80, is thrown:</p>\n<pre><code>org.springframework.web.reactive.function.client.WebClientRequestException: finishConnect(..) failed: Connection refused: identity-service/172.20.0.3:80\n</code></pre>\n<p>When I specify the port (&quot;<code>http://identity-service:10103/api/auth/validate</code>&quot;) it works perfectly fine.</p>\n<p>Anyone have an idea why it is not using the port from Eureka?</p>\n"},{"tags":["java","spring","gateway","saga"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690545089,"post_id":76787423,"comment_id":135372387,"body_markdown":"How did you determine it &quot;has run out of threads&quot;? AFAIK that&#39;s not a thing that can happen.","body":"How did you determine it &quot;has run out of threads&quot;? AFAIK that&#39;s not a thing that can happen."},{"owner":{"account_id":3740269,"reputation":187,"user_id":3110178,"accept_rate":0,"display_name":"Praful Jha"},"score":0,"creation_date":1690545985,"post_id":76787423,"comment_id":135372546,"body_markdown":"found that it in dynatrace per pod(kubernetes) current thread usage dashboard, also user complained for 3-5 minutes that they could not login to the application. Rolling restarting of application helped resolving the problem.","body":"found that it in dynatrace per pod(kubernetes) current thread usage dashboard, also user complained for 3-5 minutes that they could not login to the application. Rolling restarting of application helped resolving the problem."}],"owner":{"account_id":3740269,"reputation":187,"user_id":3110178,"accept_rate":0,"display_name":"Praful Jha"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690544546,"creation_date":1690543972,"question_id":76787423,"body_markdown":"I have a java spring based application which is written in saga design pattern to work as GATEWAY layer (backend for front end, BFF). It often happens that this layer service runs out of threads even when dashboards shows normal CPU and memory usage. Our http client configuration for requesting to core services has socket timeout set to 10 seconds which is working fine (tested). Anything I might be missing?","title":"Low Memory Usage, low CPU usage but threads are exhausted, application not taking requests","body":"<p>I have a java spring based application which is written in saga design pattern to work as GATEWAY layer (backend for front end, BFF). It often happens that this layer service runs out of threads even when dashboards shows normal CPU and memory usage. Our http client configuration for requesting to core services has socket timeout set to 10 seconds which is working fine (tested). Anything I might be missing?</p>\n"},{"tags":["java","rest","inputstream","outputstream"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690544985,"post_id":76787385,"comment_id":135372369,"body_markdown":"Yes, that is absolutely possible. How to implement it depends on the framework you are using for your HTTP endpoints.","body":"Yes, that is absolutely possible. How to implement it depends on the framework you are using for your HTTP endpoints."},{"owner":{"account_id":11436669,"reputation":1,"user_id":8383864,"display_name":"Vectorspace"},"score":0,"creation_date":1690545962,"post_id":76787385,"comment_id":135372544,"body_markdown":"@Jorn - thanks for replying. It&#39;s not our own endpoint we&#39;re calling. We&#39;re going to be calling the external endpoint using RestTemplate. Our application uses Spring Boot. Is that what you needed to know?","body":"@Jorn - thanks for replying. It&#39;s not our own endpoint we&#39;re calling. We&#39;re going to be calling the external endpoint using RestTemplate. Our application uses Spring Boot. Is that what you needed to know?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690546147,"post_id":76787385,"comment_id":135372571,"body_markdown":"Same difference, but now it depends on the HTTP client you are using. For Spring&#39;s `RestTemplate`, I&#39;m not sure but you should google for &quot;spring resttemplate post write to stream&quot; or something.","body":"Same difference, but now it depends on the HTTP client you are using. For Spring&#39;s <code>RestTemplate</code>, I&#39;m not sure but you should google for &quot;spring resttemplate post write to stream&quot; or something."},{"owner":{"account_id":11436669,"reputation":1,"user_id":8383864,"display_name":"Vectorspace"},"score":0,"creation_date":1690546928,"post_id":76787385,"comment_id":135372719,"body_markdown":"I did that search, it&#39;s how I found the linked posts. But the bit I can&#39;t find is how to have Rest send each chunk from the stream as its written to it, as opposed to loading all the bytes into the stream before REST sends it.","body":"I did that search, it&#39;s how I found the linked posts. But the bit I can&#39;t find is how to have Rest send each chunk from the stream as its written to it, as opposed to loading all the bytes into the stream before REST sends it."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690547229,"post_id":76787385,"comment_id":135372789,"body_markdown":"You don&#39;t need to do anything special. There might be some in-between bufffers, but writing to the stream will already send chunks when possible.","body":"You don&#39;t need to do anything special. There might be some in-between bufffers, but writing to the stream will already send chunks when possible."},{"owner":{"account_id":11436669,"reputation":1,"user_id":8383864,"display_name":"Vectorspace"},"score":0,"creation_date":1690549305,"post_id":76787385,"comment_id":135373215,"body_markdown":"I still can&#39;t see how to set it up except by having RestTemplate send a byte stream that is already completely filled, which means I have the entire file in memory which defeats the object.\n\nWhat also occurs to me is that I don&#39;t know the final size of the zip file until it is built, but surely RestTemplate would need to know that up front? The Resource class that I&#39;ve seen examples use to encapsulate what is being sent has a getter method for the total length fo the data.","body":"I still can&#39;t see how to set it up except by having RestTemplate send a byte stream that is already completely filled, which means I have the entire file in memory which defeats the object.  What also occurs to me is that I don&#39;t know the final size of the zip file until it is built, but surely RestTemplate would need to know that up front? The Resource class that I&#39;ve seen examples use to encapsulate what is being sent has a getter method for the total length fo the data."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690550244,"post_id":76787385,"comment_id":135373422,"body_markdown":"Out of interest, do you mean a zip *archive* containing n entries or is it one file that&#39;s been zipped?","body":"Out of interest, do you mean a zip <i>archive</i> containing n entries or is it one file that&#39;s been zipped?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690550546,"post_id":76787385,"comment_id":135373487,"body_markdown":"HTTP requests have data that isn&#39;t fully known up front all the time. That size parameter isn&#39;t mandatory. As for sending the data, you don&#39;t &quot;send a filled byte stream&quot;, you *write* to the *existing* byte stream. So don&#39;t make your own stream, write to the one provided by `RestTemplate`.","body":"HTTP requests have data that isn&#39;t fully known up front all the time. That size parameter isn&#39;t mandatory. As for sending the data, you don&#39;t &quot;send a filled byte stream&quot;, you <i>write</i> to the <i>existing</i> byte stream. So don&#39;t make your own stream, write to the one provided by <code>RestTemplate</code>."},{"owner":{"account_id":11436669,"reputation":1,"user_id":8383864,"display_name":"Vectorspace"},"score":0,"creation_date":1690553443,"post_id":76787385,"comment_id":135374165,"body_markdown":"Thanks for your patience, I&#39;m sorry that I&#39;m not understanding. All the examples I find look like this: `response=restTemplate.doSomething(url,content)`\nA call in which you pass in an object containing all the data (or an input stream e.g. a FileInputStream), and get back the response from processing the http request. I assume I would need to do something where I &quot;start&quot; the restTemplate, then write to some stream from somewhere, and then tell restTemplate that I&#39;m done and it can complete the http request and return the response. I can find nothing that looks like that","body":"Thanks for your patience, I&#39;m sorry that I&#39;m not understanding. All the examples I find look like this: <code>response=restTemplate.doSomething(url,content)</code> A call in which you pass in an object containing all the data (or an input stream e.g. a FileInputStream), and get back the response from processing the http request. I assume I would need to do something where I &quot;start&quot; the restTemplate, then write to some stream from somewhere, and then tell restTemplate that I&#39;m done and it can complete the http request and return the response. I can find nothing that looks like that"},{"owner":{"account_id":11436669,"reputation":1,"user_id":8383864,"display_name":"Vectorspace"},"score":0,"creation_date":1690553561,"post_id":76787385,"comment_id":135374199,"body_markdown":"@goose I have a list of file paths referring to one or more files on disk. I need to create a zip file containing all those files, and then send them as multipart file data to a REST endpoint. I&#39;m looking for a way fo doing that without having to A. write the entire zip file to disk and then read it back, or B. having the entire zip file in memory","body":"@goose I have a list of file paths referring to one or more files on disk. I need to create a zip file containing all those files, and then send them as multipart file data to a REST endpoint. I&#39;m looking for a way fo doing that without having to A. write the entire zip file to disk and then read it back, or B. having the entire zip file in memory"}],"owner":{"account_id":11436669,"reputation":1,"user_id":8383864,"display_name":"Vectorspace"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690543709,"creation_date":1690543709,"question_id":76787385,"body_markdown":"I&#39;m new to Java, and very new to Spring, Rest, and IO Streams, so apologies.\r\n\r\nWhat I need to do is construct a zip file using ZipOutputStream, and then send that file to a REST endpoint as multipart file data.\r\n\r\nI&#39;ve been told that it should be possible to do this without holding the entire zip file in memory (it could be very large), by doing some clever streaming.\r\n\r\nSomething like creating a stream, then passing it to the rest template, and then writing the zip to the stream x bytes at a time, and the rest template will automatically stream each new block of bytes over the HTTP request as they get written without having to assemble the entire file on disk or in memory first (or maybe the stream has some kind of callback lambda that is invoked by the rest template trying to read the stream, so I can append more data to it)\r\n\r\nIs that possible?\r\n\r\nI&#39;ve found similar posts, but none that help me understand how to do this, if it&#39;s at all possible.\r\nhttps://stackoverflow.com/questions/63794946/post-inputstream-resttemplate\r\nhttps://stackoverflow.com/questions/15781885/how-to-forward-large-files-with-resttemplate\r\n","title":"Java construct a byte array and send via REST a bit at a time?","body":"<p>I'm new to Java, and very new to Spring, Rest, and IO Streams, so apologies.</p>\n<p>What I need to do is construct a zip file using ZipOutputStream, and then send that file to a REST endpoint as multipart file data.</p>\n<p>I've been told that it should be possible to do this without holding the entire zip file in memory (it could be very large), by doing some clever streaming.</p>\n<p>Something like creating a stream, then passing it to the rest template, and then writing the zip to the stream x bytes at a time, and the rest template will automatically stream each new block of bytes over the HTTP request as they get written without having to assemble the entire file on disk or in memory first (or maybe the stream has some kind of callback lambda that is invoked by the rest template trying to read the stream, so I can append more data to it)</p>\n<p>Is that possible?</p>\n<p>I've found similar posts, but none that help me understand how to do this, if it's at all possible.\n<a href=\"https://stackoverflow.com/questions/63794946/post-inputstream-resttemplate\">POST InputStream RestTemplate</a>\n<a href=\"https://stackoverflow.com/questions/15781885/how-to-forward-large-files-with-resttemplate\">How to forward large files with RestTemplate?</a></p>\n"},{"tags":["java","mysql","spring-boot","ssh","remote-access"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1690458328,"post_id":76779122,"comment_id":135358314,"body_markdown":"If you have control of the mysql server, the simplest way to solve this is to do as root: `grant all on MyDatabase.* to &#39;myuser&#39;@&#39;x.x.x.x&#39; identified by &#39;mypass&#39;;`","body":"If you have control of the mysql server, the simplest way to solve this is to do as root: <code>grant all on MyDatabase.* to &#39;myuser&#39;@&#39;x.x.x.x&#39; identified by &#39;mypass&#39;;</code>"},{"owner":{"account_id":27229121,"reputation":451,"user_id":20757134,"display_name":"ayada"},"score":0,"creation_date":1690458623,"post_id":76779122,"comment_id":135358379,"body_markdown":"I do this in the remote mysql server or in localhost? because this ip adresse x.x.x.x  it is not the Remote ip adress, I don&#39;t know where it comes.","body":"I do this in the remote mysql server or in localhost? because this ip adresse x.x.x.x  it is not the Remote ip adress, I don&#39;t know where it comes."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1690458775,"post_id":76779122,"comment_id":135358408,"body_markdown":"In the remote server. x.x.x.x is the address you&#39;re connecting *from*","body":"In the remote server. x.x.x.x is the address you&#39;re connecting <i>from</i>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1690459117,"post_id":76779122,"comment_id":135358486,"body_markdown":"Security-wise, it would tons better to ban all external connection to mysql and do it via ssh tunneling using public key auth","body":"Security-wise, it would tons better to ban all external connection to mysql and do it via ssh tunneling using public key auth"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1690459515,"post_id":76779122,"comment_id":135358580,"body_markdown":"So much so, that I withdraw my advice as unsound (I might delete the comment) and instead recommend trying the first answer [here](https://stackoverflow.com/questions/48296313/connect-to-mysql-through-ssh-and-by-using-spring-boot)","body":"So much so, that I withdraw my advice as unsound (I might delete the comment) and instead recommend trying the first answer <a href=\"https://stackoverflow.com/questions/48296313/connect-to-mysql-through-ssh-and-by-using-spring-boot\">here</a>"},{"owner":{"account_id":27229121,"reputation":451,"user_id":20757134,"display_name":"ayada"},"score":0,"creation_date":1690468994,"post_id":76779122,"comment_id":135361018,"body_markdown":"This worked for me : CREATE USER &#39;myuser&#39;@&#39;%&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL PRIVILEGES ON myDatabase.* TO &#39;myuser&#39;@&#39;%&#39; WITH GRANT OPTION;  Instead of x.x.x.x I used % to accept any ip adress.","body":"This worked for me : CREATE USER &#39;myuser&#39;@&#39;%&#39; IDENTIFIED BY &#39;password&#39;; GRANT ALL PRIVILEGES ON myDatabase.* TO &#39;myuser&#39;@&#39;%&#39; WITH GRANT OPTION;  Instead of x.x.x.x I used % to accept any ip adress."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690470270,"post_id":76779122,"comment_id":135361345,"body_markdown":"If you look at the auth logs on that sql server box, you will begin to see why it would be much better to have that app running on the same machine and have the server bound to locahost. And that&#39;s before a break in occurs","body":"If you look at the auth logs on that sql server box, you will begin to see why it would be much better to have that app running on the same machine and have the server bound to locahost. And that&#39;s before a break in occurs"}],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690458445,"creation_date":1690458445,"answer_id":76779422,"question_id":76779122,"body_markdown":"you don`t have grant access from this host, just add a new user for this one. Try it on your MYSQL Workbench \r\n\r\n    CREATE USER &#39;username&#39;@&#39;x.x.x.x&#39; IDENTIFIED BY &#39;password&#39;;\r\n    \r\n    GRANT ALL PRIVILEGES ON *.* TO &#39;username&#39;@&#39;x.x.x.x&#39; WITH GRANT OPTION;\r\n    \r\n    CREATE USER &#39;username&#39;@&#39;%&#39; IDENTIFIED BY &#39;password&#39;;\r\n    \r\n    GRANT ALL PRIVILEGES ON *.* TO &#39;username&#39;@&#39;%&#39; WITH GRANT OPTION;\r\n    \r\n    FLUSH PRIVILEGES;","title":"java.sql.SQLException: null, Host &#39;X.X.X.X&#39; is not allowed to connect to this MySQL server","body":"<p>you don`t have grant access from this host, just add a new user for this one. Try it on your MYSQL Workbench</p>\n<pre><code>CREATE USER 'username'@'x.x.x.x' IDENTIFIED BY 'password';\n\nGRANT ALL PRIVILEGES ON *.* TO 'username'@'x.x.x.x' WITH GRANT OPTION;\n\nCREATE USER 'username'@'%' IDENTIFIED BY 'password';\n\nGRANT ALL PRIVILEGES ON *.* TO 'username'@'%' WITH GRANT OPTION;\n\nFLUSH PRIVILEGES;\n</code></pre>\n"}],"owner":{"account_id":27229121,"reputation":451,"user_id":20757134,"display_name":"ayada"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76779422,"answer_count":1,"score":1,"last_activity_date":1690543653,"creation_date":1690455991,"question_id":76779122,"body_markdown":"I have a database on remote Ubuntu Server. I can access to this database throw SSH. I have been successfully connected to this database from MYSQL Workbench using **Standard TCP/IP over SSH**. \r\n\r\nI try to connect to this database from my local Spring Boot application, my application.xml :\r\n\r\n```  \r\nspring.datasource.url=jdbc:mysql://RemoteIpAdress:3306/MyDatabase\r\nspring.datasource.username=myuser\r\nspring.datasource.password=mypass\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n\r\njpa.hibernate.ddl-auto=update\r\njpa.database-platform=org.hibernate.dialect.MySQL5Dialect\r\njpa.show-sql=true\r\n```\r\nBut I get this : \r\n```  \r\njava.sql.SQLException: null,  message from server: &quot;Host &#39;x.x.x.x&#39; is not allowed to connect to this MySQL server&quot;\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160) ~[spring-jdbc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118) ~[spring-jdbc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81) ~[spring-jdbc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:332) ~[spring-jdbc-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.jdbc.EmbeddedDatabaseConnection.isEmbedded(EmbeddedDatabaseConnection.java:168) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateDefaultDdlAutoProvider.getDefaultDdlAuto(HibernateDefaultDdlAutoProvider.java:42) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.lambda$getVendorProperties$1(HibernateJpaConfiguration.java:142) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateSettings.getDdlAuto(HibernateSettings.java:41) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineDdlAuto(HibernateProperties.java:118) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.getAdditionalProperties(HibernateProperties.java:87) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineHibernateProperties(HibernateProperties.java:80) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getVendorProperties(HibernateJpaConfiguration.java:143) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:131) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat com.example.demo.Demo1Application.main(Demo1Application.java:10) ~[classes/:na]\r\n\r\n2023-07-27T11:24:06.398+01:00  INFO 9396 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-07-27T11:24:06.457+01:00  INFO 9396 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\r\n2023-07-27T11:24:06.459+01:00  INFO 9396 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n2023-07-27T11:24:06.591+01:00  INFO 9396 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-07-27T11:24:06.690+01:00  INFO 9396 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n2023-07-27T11:24:06.703+01:00  INFO 9396 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-07-27T11:24:07.721+01:00 ERROR 9396 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\r\n\r\njava.sql.SQLException: null,  message from server: &quot;Host &#39;x.x.x.x&#39; is not allowed to connect to this MySQL server&quot;\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:152) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:34) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:166) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat com.example.demo.Demo1Application.main(Demo1Application.java:10) ~[classes/:na]\r\n\r\n2023-07-27T11:24:07.724+01:00  WARN 9396 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata\r\n\r\njava.sql.SQLException: null,  message from server: &quot;Host &#39;x.x.x.x&#39; is not allowed to connect to this MySQL server&quot;\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:152) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:34) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:166) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat com.example.demo.Demo1Application.main(Demo1Application.java:10) ~[classes/:na]\r\n\r\n2023-07-27T11:24:07.726+01:00 ERROR 9396 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set &#39;javax.persistence.jdbc.url&#39;, &#39;hibernate.connection.url&#39;, or &#39;hibernate.dialect&#39;)\r\n2023-07-27T11:24:07.728+01:00  WARN 9396 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set &#39;javax.persistence.jdbc.url&#39;, &#39;hibernate.connection.url&#39;, or &#39;hibernate.dialect&#39;)\r\n2023-07-27T11:24:07.736+01:00  INFO 9396 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-07-27T11:24:07.750+01:00  INFO 9396 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-07-27T11:24:07.786+01:00 ERROR 9396 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set &#39;javax.persistence.jdbc.url&#39;, &#39;hibernate.connection.url&#39;, or &#39;hibernate.dialect&#39;)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat com.example.demo.Demo1Application.main(Demo1Application.java:10) ~[classes/:na]\r\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set &#39;javax.persistence.jdbc.url&#39;, &#39;hibernate.connection.url&#39;, or &#39;hibernate.dialect&#39;)\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:277) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat\r\n ........\r\n```\r\n\r\nWhere x.x.x.x is an Ip adress.\r\n\r\n**Is there any thing that I miss?** I have read about doing the SSH connection from Spring Boot Application, but I didn&#39;t really understand.\r\n","title":"java.sql.SQLException: null, Host &#39;X.X.X.X&#39; is not allowed to connect to this MySQL server","body":"<p>I have a database on remote Ubuntu Server. I can access to this database throw SSH. I have been successfully connected to this database from MYSQL Workbench using <strong>Standard TCP/IP over SSH</strong>.</p>\n<p>I try to connect to this database from my local Spring Boot application, my application.xml :</p>\n<pre><code>spring.datasource.url=jdbc:mysql://RemoteIpAdress:3306/MyDatabase\nspring.datasource.username=myuser\nspring.datasource.password=mypass\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\njpa.hibernate.ddl-auto=update\njpa.database-platform=org.hibernate.dialect.MySQL5Dialect\njpa.show-sql=true\n</code></pre>\n<p>But I get this :</p>\n<pre><code>java.sql.SQLException: null,  message from server: &quot;Host 'x.x.x.x' is not allowed to connect to this MySQL server&quot;\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\n    at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160) ~[spring-jdbc-6.0.11.jar:6.0.11]\n    at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118) ~[spring-jdbc-6.0.11.jar:6.0.11]\n    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81) ~[spring-jdbc-6.0.11.jar:6.0.11]\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:332) ~[spring-jdbc-6.0.11.jar:6.0.11]\n    at org.springframework.boot.jdbc.EmbeddedDatabaseConnection.isEmbedded(EmbeddedDatabaseConnection.java:168) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateDefaultDdlAutoProvider.getDefaultDdlAuto(HibernateDefaultDdlAutoProvider.java:42) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.lambda$getVendorProperties$1(HibernateJpaConfiguration.java:142) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateSettings.getDdlAuto(HibernateSettings.java:41) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineDdlAuto(HibernateProperties.java:118) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.getAdditionalProperties(HibernateProperties.java:87) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties.determineHibernateProperties(HibernateProperties.java:80) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getVendorProperties(HibernateJpaConfiguration.java:143) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:131) ~[spring-boot-autoconfigure-3.1.2.jar:3.1.2]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:655) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:647) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\n    at com.example.demo.Demo1Application.main(Demo1Application.java:10) ~[classes/:na]\n\n2023-07-27T11:24:06.398+01:00  INFO 9396 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-07-27T11:24:06.457+01:00  INFO 9396 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\n2023-07-27T11:24:06.459+01:00  INFO 9396 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-07-27T11:24:06.591+01:00  INFO 9396 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-07-27T11:24:06.690+01:00  INFO 9396 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-07-27T11:24:06.703+01:00  INFO 9396 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-07-27T11:24:07.721+01:00 ERROR 9396 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\n\njava.sql.SQLException: null,  message from server: &quot;Host 'x.x.x.x' is not allowed to connect to this MySQL server&quot;\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:152) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:34) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:166) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\n    at com.example.demo.Demo1Application.main(Demo1Application.java:10) ~[classes/:na]\n\n2023-07-27T11:24:07.724+01:00  WARN 9396 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata\n\njava.sql.SQLException: null,  message from server: &quot;Host 'x.x.x.x' is not allowed to connect to this MySQL server&quot;\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:138) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:152) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:34) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:166) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\n    at com.example.demo.Demo1Application.main(Demo1Application.java:10) ~[classes/:na]\n\n2023-07-27T11:24:07.726+01:00 ERROR 9396 --- [           main] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'javax.persistence.jdbc.url', 'hibernate.connection.url', or 'hibernate.dialect')\n2023-07-27T11:24:07.728+01:00  WARN 9396 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'javax.persistence.jdbc.url', 'hibernate.connection.url', or 'hibernate.dialect')\n2023-07-27T11:24:07.736+01:00  INFO 9396 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-07-27T11:24:07.750+01:00  INFO 9396 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-07-27T11:24:07.786+01:00 ERROR 9396 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'javax.persistence.jdbc.url', 'hibernate.connection.url', or 'hibernate.dialect')\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1770) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\n    at com.example.demo.Demo1Application.main(Demo1Application.java:10) ~[classes/:na]\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.engine.jdbc.env.spi.JdbcEnvironment] due to: Unable to determine Dialect without JDBC metadata (please set 'javax.persistence.jdbc.url', 'hibernate.connection.url', or 'hibernate.dialect')\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:277) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at\n ........\n</code></pre>\n<p>Where x.x.x.x is an Ip adress.</p>\n<p><strong>Is there any thing that I miss?</strong> I have read about doing the SSH connection from Spring Boot Application, but I didn't really understand.</p>\n"},{"tags":["java","logging","log4j","log4j2","smtpappender"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1690551523,"post_id":76787338,"comment_id":135373706,"body_markdown":"You need jakarta.activation.xxxx.jar in your classpath","body":"You need jakarta.activation.xxxx.jar in your classpath"}],"owner":{"account_id":16584480,"reputation":121,"user_id":11984272,"display_name":"Rahul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690543308,"creation_date":1690543308,"question_id":76787338,"body_markdown":"I am trying to use SmtpAppender in my java application but its giving below error when I start my application.\r\n\r\n**&#39;ERROR could not create plugin of type class org.apache.logging.log4j.core.appender.SmtpAppender for element SMTP: java.lang.NoClassDefFoundError: javax/activation/DataSource java.lang.NoClassDefFoundError: javax/activation/DataSource&#39;**\r\n\r\n**I am using log4j-api-2.17.0.jar, log4j-core-2.17.0.jar, javax.mail-1.5.6.jar.**\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration status=&quot;warn&quot; strict=&quot;true&quot; name=&quot;MyApp&quot;&gt;\r\n      &lt;Appenders&gt;\r\n        &lt;SMTP name=&quot;Mail&quot; subject=&quot;Error Log&quot; to=&quot;test@test.com&quot; from=&quot;test1@test.com&quot;\r\n              smtpHost=&quot;test.email.com&quot; bufferSize=&quot;50&quot;&gt;\r\n    \r\n    &lt;PatternLayout&gt;\r\n      &lt;pattern&gt;%d {yyyy-MM-dd HH:mm:ss.SSS } [%t] %c{1} %msg%n&lt;/pattern&gt;\r\n    &lt;/PatternLayout&gt;\r\n    \r\n        &lt;/SMTP&gt;\r\n      &lt;/Appenders&gt;\r\n      &lt;Loggers&gt;\r\n        &lt;Root level=&quot;debug&quot;&gt;\r\n          &lt;AppenderRef ref=&quot;Mail&quot;/&gt;\r\n        &lt;/Root&gt;\r\n      &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;","title":"How to configure SmtpAppender in log4j2.xml in java?","body":"<p>I am trying to use SmtpAppender in my java application but its giving below error when I start my application.</p>\n<p><strong>'ERROR could not create plugin of type class org.apache.logging.log4j.core.appender.SmtpAppender for element SMTP: java.lang.NoClassDefFoundError: javax/activation/DataSource java.lang.NoClassDefFoundError: javax/activation/DataSource'</strong></p>\n<p><strong>I am using log4j-api-2.17.0.jar, log4j-core-2.17.0.jar, javax.mail-1.5.6.jar.</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;warn&quot; strict=&quot;true&quot; name=&quot;MyApp&quot;&gt;\n  &lt;Appenders&gt;\n    &lt;SMTP name=&quot;Mail&quot; subject=&quot;Error Log&quot; to=&quot;test@test.com&quot; from=&quot;test1@test.com&quot;\n          smtpHost=&quot;test.email.com&quot; bufferSize=&quot;50&quot;&gt;\n\n&lt;PatternLayout&gt;\n  &lt;pattern&gt;%d {yyyy-MM-dd HH:mm:ss.SSS } [%t] %c{1} %msg%n&lt;/pattern&gt;\n&lt;/PatternLayout&gt;\n\n    &lt;/SMTP&gt;\n  &lt;/Appenders&gt;\n  &lt;Loggers&gt;\n    &lt;Root level=&quot;debug&quot;&gt;\n      &lt;AppenderRef ref=&quot;Mail&quot;/&gt;\n    &lt;/Root&gt;\n  &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n"},{"tags":["java","unit-testing","mockito","junit5","powermockito"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1690542082,"post_id":76787126,"comment_id":135371856,"body_markdown":"You already have a mocked `DataSource`. Just mock the `getUser` implementation from there.","body":"You already have a mocked <code>DataSource</code>. Just mock the <code>getUser</code> implementation from there."},{"owner":{"account_id":16152922,"reputation":365,"user_id":11660873,"display_name":"Jeet"},"score":0,"creation_date":1690542468,"post_id":76787126,"comment_id":135371918,"body_markdown":"getUser implementation is in an abstract class that this class inherits. The abstract class is again inheriting another Abstract class. So like this do I need to mock all the abstract classes what is associated with the method?","body":"getUser implementation is in an abstract class that this class inherits. The abstract class is again inheriting another Abstract class. So like this do I need to mock all the abstract classes what is associated with the method?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690542520,"post_id":76787126,"comment_id":135371924,"body_markdown":"What? Your `DataSource` *is* an instance of those classes. You don&#39;t mock classes, you mock instances.","body":"What? Your <code>DataSource</code> <i>is</i> an instance of those classes. You don&#39;t mock classes, you mock instances."},{"owner":{"account_id":16152922,"reputation":365,"user_id":11660873,"display_name":"Jeet"},"score":0,"creation_date":1690550427,"post_id":76787126,"comment_id":135373455,"body_markdown":"@Jon - what do you mean by moccking the getUser() implementation? In the AbstractSource it only returns &quot;return this.user;&quot;. I did the following--\n\nMock\nString User;\n \nAbstractSource abs=Mockito.mock(AbstractSource.class);\nwhen(abs.getUser).thenReturn(user);","body":"@Jon - what do you mean by moccking the getUser() implementation? In the AbstractSource it only returns &quot;return this.user;&quot;. I did the following--  Mock String User;   AbstractSource abs=Mockito.mock(AbstractSource.class); when(abs.getUser).thenReturn(user);"}],"answers":[{"tags":[],"owner":{"account_id":18192720,"reputation":849,"user_id":13238310,"display_name":"idanz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690543262,"creation_date":1690542719,"answer_id":76787269,"question_id":76787126,"body_markdown":"If you&#39;re testing the `DataSource` class, you&#39;re not supposed to mock it. Usually you mock the dependencies of the class. The purpose is bringing the class you want to test to some ***state*** by injecting mocks of its dependencies, and then asserting the return values of its methods given the provided ***state***. For example, if the constructor of `DataSource` looks like this:\r\n\r\n    public DataSource(Object o) {\r\n\r\n        this.o = o;\r\n    }\r\n\r\nThen you&#39;re supposed to mock `o` and then create an instance of `DataSource` with this mocked `o`. The ***test*** now is calling `dataSource.setup(...)`, given the state that you mocked:\r\n\r\n    Object mock = Mockito.mock(Object.class);\r\n    DataSource dataSource = new DataSource(mock);\r\n    Assert.assertNotNull(dataSource.setup(...));\r\n\r\n**Now to go to your case** - the issue that you&#39;re describing is exactly why when possible, I prefer composition over inheritance. My suggestion is that `DataSource` will get `ExtendedDataSource` (consider renaming it) in its constructor instead of extending it:\r\n\r\n    public DataSource(ExtendedDataSource extendedDataSource) {\r\n\r\n        this.extendedDataSource = extendedDataSource;\r\n    }\r\n\r\nNow you can mock `ExtendedDataSource` and setup some return value to `ExtendedDataSource.getConnection`, then create an instance of `DataSource` and pass the mock in the constructor, and assert the behavior of `DataSource` as you wanted:\r\n\r\n    ExtendedDataSource extendedDataSource = Mockito.mock(ExtendedDataSource.class);\r\n    Mockito.when(extendedDataSource.getConnection(...)).thenReturn(...);\r\n    DataSource dataSource = new DataSource(extendedDataSource);\r\n    Assert.assertNotNull(dataSource.setup(...));","title":"How to test a public method that calls a private method with a mocked object?","body":"<p>If you're testing the <code>DataSource</code> class, you're not supposed to mock it. Usually you mock the dependencies of the class. The purpose is bringing the class you want to test to some <em><strong>state</strong></em> by injecting mocks of its dependencies, and then asserting the return values of its methods given the provided <em><strong>state</strong></em>. For example, if the constructor of <code>DataSource</code> looks like this:</p>\n<pre><code>public DataSource(Object o) {\n\n    this.o = o;\n}\n</code></pre>\n<p>Then you're supposed to mock <code>o</code> and then create an instance of <code>DataSource</code> with this mocked <code>o</code>. The <em><strong>test</strong></em> now is calling <code>dataSource.setup(...)</code>, given the state that you mocked:</p>\n<pre><code>Object mock = Mockito.mock(Object.class);\nDataSource dataSource = new DataSource(mock);\nAssert.assertNotNull(dataSource.setup(...));\n</code></pre>\n<p><strong>Now to go to your case</strong> - the issue that you're describing is exactly why when possible, I prefer composition over inheritance. My suggestion is that <code>DataSource</code> will get <code>ExtendedDataSource</code> (consider renaming it) in its constructor instead of extending it:</p>\n<pre><code>public DataSource(ExtendedDataSource extendedDataSource) {\n\n    this.extendedDataSource = extendedDataSource;\n}\n</code></pre>\n<p>Now you can mock <code>ExtendedDataSource</code> and setup some return value to <code>ExtendedDataSource.getConnection</code>, then create an instance of <code>DataSource</code> and pass the mock in the constructor, and assert the behavior of <code>DataSource</code> as you wanted:</p>\n<pre><code>ExtendedDataSource extendedDataSource = Mockito.mock(ExtendedDataSource.class);\nMockito.when(extendedDataSource.getConnection(...)).thenReturn(...);\nDataSource dataSource = new DataSource(extendedDataSource);\nAssert.assertNotNull(dataSource.setup(...));\n</code></pre>\n"}],"owner":{"account_id":16152922,"reputation":365,"user_id":11660873,"display_name":"Jeet"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690543262,"creation_date":1690541540,"question_id":76787126,"body_markdown":"I am testing a class &quot;DataSource&quot; that extends another class &quot;ExtendedDataSource&quot;. The method that I am testing in the &quot;DataSource&quot; class is calling another protected method in the &quot;ExtendedDataSource&quot; class. \r\n\r\n```java\r\nclass DataSource extends ExtendedDataSource {\r\n\r\n\t@Override\r\n\tprotected Connection setup(Properties props) {\r\n\t\tConnection connection = super.getConnection(props);\r\n\t\treturn connection;\r\n\t}\r\n}\r\n\r\nclass ExtendedDataSource extends AbstractSource {\r\n\r\n\t@Override\r\n\tprotected Connection getConnection(Properties props) {\r\n\t\t// here an user is retrieved from an abstract class that this class inherits\r\n\t\t// In this line I am getting an exception IllegalStateException--&quot;user not set&quot;\r\n\t\tString user = getUser();\r\n\r\n\t\t// Does something with props\r\n\t\t\r\n        // Calls another protected method with the props as argument\r\n        anothermethod(props); \r\n\t}\r\n\r\n\tprotected anothermethod(Properties props){\r\n\t\t//call another method that will do something with props \r\n    }\r\n}\r\n\r\n    public abstract class AbstractSource extends AnotherAbstractClass{\r\n    \r\n    public String getUser() {\r\n        //the user as string\r\n        return user;\r\n    }\r\n}\r\n```\r\n    \r\n   \r\n\r\n&gt;  The test for the DataSource class is as follows :-\r\n\r\n```java\r\npublic class DataSourceTest {\r\n\r\n\t@InjectMocks\r\n\tDataSource dataSource;\r\n\r\n\t@Mock\r\n\tproperties props;\r\n\r\n\t@Test\r\n\tpublic void datatest() {\r\n\r\n\t\tDataSource dataSource = new DataSource();\r\n\r\n\t\tdataSource.getConnection(props);\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nHow should I get over this situation? Should I also mock the Abstract class? But in this way do I have to mok all the classes?","title":"How to test a public method that calls a private method with a mocked object?","body":"<p>I am testing a class &quot;DataSource&quot; that extends another class &quot;ExtendedDataSource&quot;. The method that I am testing in the &quot;DataSource&quot; class is calling another protected method in the &quot;ExtendedDataSource&quot; class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DataSource extends ExtendedDataSource {\n\n    @Override\n    protected Connection setup(Properties props) {\n        Connection connection = super.getConnection(props);\n        return connection;\n    }\n}\n\nclass ExtendedDataSource extends AbstractSource {\n\n    @Override\n    protected Connection getConnection(Properties props) {\n        // here an user is retrieved from an abstract class that this class inherits\n        // In this line I am getting an exception IllegalStateException--&quot;user not set&quot;\n        String user = getUser();\n\n        // Does something with props\n        \n        // Calls another protected method with the props as argument\n        anothermethod(props); \n    }\n\n    protected anothermethod(Properties props){\n        //call another method that will do something with props \n    }\n}\n\n    public abstract class AbstractSource extends AnotherAbstractClass{\n    \n    public String getUser() {\n        //the user as string\n        return user;\n    }\n}\n</code></pre>\n<blockquote>\n<p>The test for the DataSource class is as follows :-</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>public class DataSourceTest {\n\n    @InjectMocks\n    DataSource dataSource;\n\n    @Mock\n    properties props;\n\n    @Test\n    public void datatest() {\n\n        DataSource dataSource = new DataSource();\n\n        dataSource.getConnection(props);\n\n    }\n\n}\n</code></pre>\n<p>How should I get over this situation? Should I also mock the Abstract class? But in this way do I have to mok all the classes?</p>\n"},{"tags":["java","mysql","database","jdbc","database-connection"],"answers":[{"tags":[],"owner":{"account_id":55539,"reputation":160129,"user_id":166339,"display_name":"Asaph"},"down_vote_count":2,"up_vote_count":266,"is_accepted":true,"score":264,"last_activity_date":1288841049,"creation_date":1288841049,"answer_id":4093647,"question_id":4093603,"body_markdown":"If you&#39;re already logged into the command line client try this:\r\n\r\n    mysql&gt; select user();\r\n\r\nIt will output something similar to this:\r\n\r\n\r\n    +----------------+\r\n    | user()         |\r\n    +----------------+\r\n    | root@localhost |\r\n    +----------------+\r\n    1 row in set (0.41 sec)\r\n\r\nIn my example above, I was logged in as `root` from `localhost`.\r\n\r\nTo find port number and other interesting settings use this command:\r\n\r\n    mysql&gt; show variables;\r\n\r\n","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>If you're already logged into the command line client try this:</p>\n\n<pre><code>mysql&gt; select user();\n</code></pre>\n\n<p>It will output something similar to this:</p>\n\n<pre><code>+----------------+\n| user()         |\n+----------------+\n| root@localhost |\n+----------------+\n1 row in set (0.41 sec)\n</code></pre>\n\n<p>In my example above, I was logged in as <code>root</code> from <code>localhost</code>.</p>\n\n<p>To find port number and other interesting settings use this command:</p>\n\n<pre><code>mysql&gt; show variables;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18600,"reputation":39591,"user_id":42769,"accept_rate":95,"display_name":"Adeel Ansari"},"down_vote_count":2,"up_vote_count":13,"is_accepted":false,"score":11,"last_activity_date":1417393409,"creation_date":1288841200,"answer_id":4093660,"question_id":4093603,"body_markdown":"    default-username = root\r\n    password = you-know-it-better\r\n    url for localhost =  jdbc:mysql://localhost\r\n    default-port = 3306","title":"How do I find out my MySQL URL, host, port and username?","body":"<pre><code>default-username = root\npassword = you-know-it-better\nurl for localhost =  jdbc:mysql://localhost\ndefault-port = 3306\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1299099,"reputation":26248,"user_id":2218452,"accept_rate":36,"display_name":"Nikhil Agrawal"},"down_vote_count":0,"up_vote_count":173,"is_accepted":false,"score":173,"last_activity_date":1377076624,"creation_date":1377071402,"answer_id":18351735,"question_id":4093603,"body_markdown":"If you want to know the **port number of your local host on which Mysql** is running you can use this query on MySQL Command line client --\r\n\r\n    SHOW VARIABLES WHERE Variable_name = &#39;port&#39;;\r\n    \r\n    \r\n    mysql&gt; SHOW VARIABLES WHERE Variable_name = &#39;port&#39;;\r\n    +---------------+-------+\r\n    | Variable_name | Value |\r\n    +---------------+-------+\r\n    | port          | 3306  |\r\n    +---------------+-------+\r\n    1 row in set (0.00 sec)\r\n\r\n\r\nIt will give you the port number on which MySQL is running.\r\n\r\n\r\n----------\r\n\r\n\r\nIf you want to know the **hostname of your Mysql** you can use this query on MySQL Command line client --\r\n\r\n    SHOW VARIABLES WHERE Variable_name = &#39;hostname&#39;;\r\n    \r\n    \r\n    mysql&gt; SHOW VARIABLES WHERE Variable_name = &#39;hostname&#39;;\r\n    +-------------------+-------+\r\n    | Variable_name     | Value |\r\n    +-------------------+-------+\r\n    | hostname          | Dell  |\r\n    +-------------------+-------+\r\n    1 row in set (0.00 sec)\r\n\r\n\r\nIt will give you the hostname for mysql.\r\n\r\n\r\n----------\r\n\r\n\r\nIf you want to know the **username of your Mysql** you can use this query on MySQL Command line client --\r\n\r\n    select user();   \r\n        \r\n      \r\n    mysql&gt; select user();\r\n    +----------------+\r\n    | user()         |\r\n    +----------------+\r\n    | root@localhost |\r\n    +----------------+\r\n    1 row in set (0.00 sec)\r\n\r\nIt will give you the username for mysql.","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>If you want to know the <strong>port number of your local host on which Mysql</strong> is running you can use this query on MySQL Command line client --</p>\n\n<pre><code>SHOW VARIABLES WHERE Variable_name = 'port';\n\n\nmysql&gt; SHOW VARIABLES WHERE Variable_name = 'port';\n+---------------+-------+\n| Variable_name | Value |\n+---------------+-------+\n| port          | 3306  |\n+---------------+-------+\n1 row in set (0.00 sec)\n</code></pre>\n\n<p>It will give you the port number on which MySQL is running.</p>\n\n<hr>\n\n<p>If you want to know the <strong>hostname of your Mysql</strong> you can use this query on MySQL Command line client --</p>\n\n<pre><code>SHOW VARIABLES WHERE Variable_name = 'hostname';\n\n\nmysql&gt; SHOW VARIABLES WHERE Variable_name = 'hostname';\n+-------------------+-------+\n| Variable_name     | Value |\n+-------------------+-------+\n| hostname          | Dell  |\n+-------------------+-------+\n1 row in set (0.00 sec)\n</code></pre>\n\n<p>It will give you the hostname for mysql.</p>\n\n<hr>\n\n<p>If you want to know the <strong>username of your Mysql</strong> you can use this query on MySQL Command line client --</p>\n\n<pre><code>select user();   \n\n\nmysql&gt; select user();\n+----------------+\n| user()         |\n+----------------+\n| root@localhost |\n+----------------+\n1 row in set (0.00 sec)\n</code></pre>\n\n<p>It will give you the username for mysql.</p>\n"},{"tags":[],"owner":{"account_id":1870289,"reputation":782,"user_id":1692693,"accept_rate":50,"display_name":"TheKarateKid"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1441835665,"creation_date":1441835665,"answer_id":32489763,"question_id":4093603,"body_markdown":"If you use phpMyAdmin, click on `Home`, then `Variables` on the top menu. Look for the `port` setting on the page. The value it is set to is the port your MySQL server is running on.","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>If you use phpMyAdmin, click on <code>Home</code>, then <code>Variables</code> on the top menu. Look for the <code>port</code> setting on the page. The value it is set to is the port your MySQL server is running on.</p>\n"},{"tags":[],"owner":{"account_id":284362,"reputation":3807,"user_id":582421,"accept_rate":21,"display_name":"Gautam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1453803242,"creation_date":1453803242,"answer_id":35011423,"question_id":4093603,"body_markdown":"    mysql&gt; SHOW VARIABLES WHERE Variable_name = &#39;hostname&#39;;\r\n    +---------------+-----------+\r\n    | Variable_name | Value     |\r\n    +---------------+-----------+\r\n    | hostname      | karola-pc |\r\n    +---------------+-----------+\r\n    1 row in set (0.00 sec)\r\n\r\nFor Example in my case : `karola-pc` is the host name of the box where my mysql is running. And it my local PC host name.  \r\n\r\nIf it is romote box than you can ping that host directly if, If you are in network with that box you should be able to ping that host.\r\n \r\nIf it `UNIX or Linux you can run &quot;hostname&quot; command` in terminal to check the host name.\r\nif it is windows you can see same value in `MyComputer-&gt; right click -&gt; properties -&gt;Computer Name`  you can see ( i.e System Properties) \r\n\r\nHope it will answer your Q. \r\n\r\n","title":"How do I find out my MySQL URL, host, port and username?","body":"<pre><code>mysql&gt; SHOW VARIABLES WHERE Variable_name = 'hostname';\n+---------------+-----------+\n| Variable_name | Value     |\n+---------------+-----------+\n| hostname      | karola-pc |\n+---------------+-----------+\n1 row in set (0.00 sec)\n</code></pre>\n\n<p>For Example in my case : <code>karola-pc</code> is the host name of the box where my mysql is running. And it my local PC host name.  </p>\n\n<p>If it is romote box than you can ping that host directly if, If you are in network with that box you should be able to ping that host.</p>\n\n<p>If it <code>UNIX or Linux you can run \"hostname\" command</code> in terminal to check the host name.\nif it is windows you can see same value in <code>MyComputer-&gt; right click -&gt; properties -&gt;Computer Name</code>  you can see ( i.e System Properties) </p>\n\n<p>Hope it will answer your Q. </p>\n"},{"tags":[],"owner":{"account_id":1964951,"reputation":412,"user_id":1765469,"display_name":"Dmitry Matrosov"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1458239256,"creation_date":1458232024,"answer_id":36066371,"question_id":4093603,"body_markdown":"For example, you can try:\r\n\r\n    //If you want to get user, you need start query in your mysql:\r\n    SELECT user(); // output your user: root@localhost\r\n    SELECT system_user(); // --\r\n \r\n    //If you want to get port your &quot;mysql://user:pass@hostname:port/db&quot;\r\n    SELECT @@port; //3306 is default\r\n\r\n    //If you want hostname your db, you can execute query\r\n    SELECT @@hostname;","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>For example, you can try:</p>\n\n<pre><code>//If you want to get user, you need start query in your mysql:\nSELECT user(); // output your user: root@localhost\nSELECT system_user(); // --\n\n//If you want to get port your \"mysql://user:pass@hostname:port/db\"\nSELECT @@port; //3306 is default\n\n//If you want hostname your db, you can execute query\nSELECT @@hostname;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6535921,"reputation":6578,"user_id":5055401,"accept_rate":75,"display_name":"Inzimam Tariq IT"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1612235400,"creation_date":1467356102,"answer_id":38138902,"question_id":4093603,"body_markdown":"Here are the default settings\r\n\r\n**default-username** is **root**  \r\n**default-password** is null/empty //mean nothing  \r\n**default-url** is **localhost** or **127.0.0.1** for apache and  \r\n**localhost/phpmyadmin** for **mysql**       // if you are using xampp/wamp/mamp  \r\n**default-port** = 3306","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>Here are the default settings</p>\n<p><strong>default-username</strong> is <strong>root</strong><br />\n<strong>default-password</strong> is null/empty //mean nothing<br />\n<strong>default-url</strong> is <strong>localhost</strong> or <strong>127.0.0.1</strong> for apache and<br />\n<strong>localhost/phpmyadmin</strong> for <strong>mysql</strong>       // if you are using xampp/wamp/mamp<br />\n<strong>default-port</strong> = 3306</p>\n"},{"tags":[],"owner":{"account_id":9227064,"reputation":261,"user_id":6854527,"display_name":"Mallikarjun Pasunkili"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1475053917,"creation_date":1475049368,"answer_id":39741339,"question_id":4093603,"body_markdown":"If you don&#39;t know the exact variable name use `like`, as the result may contain more than 500 rows:\r\n\r\n    mysql&gt; show variables like &quot;%port%&quot;;\r\n\r\n","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>If you don't know the exact variable name use <code>like</code>, as the result may contain more than 500 rows:</p>\n\n<pre><code>mysql&gt; show variables like \"%port%\";\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5012424,"reputation":1710,"user_id":4028303,"accept_rate":65,"display_name":"Jacob Stamm"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1560887614,"creation_date":1560887614,"answer_id":56656162,"question_id":4093603,"body_markdown":"If using MySQL Workbench, simply look in the Session tab in the Information pane located in the sidebar.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ihaIr.png","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>If using MySQL Workbench, simply look in the Session tab in the Information pane located in the sidebar.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ihaIr.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ihaIr.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":16913860,"reputation":121,"user_id":12232347,"display_name":"Igor Lopatka"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1581682029,"creation_date":1581682029,"answer_id":60226061,"question_id":4093603,"body_markdown":"Easiest way is probably using command *status;* In the output you&#39;ll find database, user, host and port:\r\n\r\n    mysql&gt; status;\r\n    --------------\r\n    mysql  Ver 8.0.13 for Win64 on x86_64 (MySQL Community Server - GPL)\r\n    \r\n    Connection id:          43\r\n    Current database:       mysql\r\n    Current user:           user@localhost\r\n    SSL:                    Cipher in use is DHE-RSA-AES128-GCM-SHA256\r\n    Using delimiter:        ;\r\n    Server version:         8.0.13 MySQL Community Server - GPL\r\n    Protocol version:       10\r\n    Connection:             localhost via TCP/IP\r\n    Server characterset:    utf8mb4\r\n    Db     characterset:    utf8mb4\r\n    Client characterset:    cp852\r\n    Conn.  characterset:    cp852\r\n    TCP port:               3306\r\n    Uptime:                 3 hours 32 min 40 sec\r\n    \r\n    Threads: 3  Questions: 197  Slow queries: 0  Opens: 214  Flush tables: 2  Open tables: 190  Queries per second avg: 0.015\r\n    --------------","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>Easiest way is probably using command <em>status;</em> In the output you'll find database, user, host and port:</p>\n\n<pre><code>mysql&gt; status;\n--------------\nmysql  Ver 8.0.13 for Win64 on x86_64 (MySQL Community Server - GPL)\n\nConnection id:          43\nCurrent database:       mysql\nCurrent user:           user@localhost\nSSL:                    Cipher in use is DHE-RSA-AES128-GCM-SHA256\nUsing delimiter:        ;\nServer version:         8.0.13 MySQL Community Server - GPL\nProtocol version:       10\nConnection:             localhost via TCP/IP\nServer characterset:    utf8mb4\nDb     characterset:    utf8mb4\nClient characterset:    cp852\nConn.  characterset:    cp852\nTCP port:               3306\nUptime:                 3 hours 32 min 40 sec\n\nThreads: 3  Questions: 197  Slow queries: 0  Opens: 214  Flush tables: 2  Open tables: 190  Queries per second avg: 0.015\n--------------\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18642036,"reputation":39,"user_id":13587569,"display_name":"Dishant Tanwar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624988527,"creation_date":1624988527,"answer_id":68183383,"question_id":4093603,"body_markdown":"**use this:**\r\n\r\n    show variables where Variable_name = &#39;port&#39;;\r\n\r\nyou can check more variables by using the command (must try)\r\n\r\n    show variables;\r\n\r\n","title":"How do I find out my MySQL URL, host, port and username?","body":"<p><strong>use this:</strong></p>\n<pre><code>show variables where Variable_name = 'port';\n</code></pre>\n<p>you can check more variables by using the command (must try)</p>\n<pre><code>show variables;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2978091,"reputation":11,"user_id":2528712,"display_name":"Chrispus Peter"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629032737,"creation_date":1629032737,"answer_id":68791802,"question_id":4093603,"body_markdown":"on local host or dedicated server, go to config.inc file inside phpMyAdmin","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>on local host or dedicated server, go to config.inc file inside phpMyAdmin</p>\n"}],"owner":{"display_name":"shilps"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":609763,"favorite_count":0,"down_vote_count":1,"up_vote_count":173,"accepted_answer_id":4093647,"answer_count":12,"score":172,"last_activity_date":1690543197,"creation_date":1288840569,"question_id":4093603,"body_markdown":"I need to find my MySQL username. When I open the MySQL command line client, it only asks me for my password. I don&#39;t remember my username. And for connectivity with JDBC, I need the URL, host and port number. Where do I find all of these?","title":"How do I find out my MySQL URL, host, port and username?","body":"<p>I need to find my MySQL username. When I open the MySQL command line client, it only asks me for my password. I don't remember my username. And for connectivity with JDBC, I need the URL, host and port number. Where do I find all of these?</p>\n"},{"tags":["java","spring-boot","liquibase"],"answers":[{"tags":[],"owner":{"account_id":5161362,"reputation":409,"user_id":4132944,"accept_rate":67,"display_name":"Lukas Karmanovas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690530021,"creation_date":1690530021,"answer_id":76785738,"question_id":76785598,"body_markdown":"Liqudbase creates two tables in your database one is `databasechangelog` and the other one is `databasechangeloglock`. The first one is the one that holds every single scrip entry and it checks if this script has been executed before or not. Now if you have already executed a script and would change its content without changing file name you would get a check sum error. My guess would be that you did precisely that.","title":"Liquibase reading from phantom changelogs","body":"<p>Liqudbase creates two tables in your database one is <code>databasechangelog</code> and the other one is <code>databasechangeloglock</code>. The first one is the one that holds every single scrip entry and it checks if this script has been executed before or not. Now if you have already executed a script and would change its content without changing file name you would get a check sum error. My guess would be that you did precisely that.</p>\n"},{"tags":[],"owner":{"account_id":881640,"reputation":4624,"user_id":266254,"accept_rate":47,"display_name":"bilak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690542787,"creation_date":1690542787,"answer_id":76787281,"question_id":76785598,"body_markdown":"The problem is that the classpath context of liquibase executed from **maven** is different to one executed from **spring-boot** application. For example in maven, classpath to changeLog file could look like `/Users/you/app/src/main/resources/liquibase/changelog.xml` while in spring it could look like `resources/liquibase/changelog.xml`. I guess that this path is also included in the hash computation, therefore two identical changeSets are not identical anymore because of that path. Liquibase fixed that with [logicalfilepath](https://docs.liquibase.com/concepts/changelogs/attributes/logicalfilepath.html). So if you plan to execute LB from multiple tools, use that. \r\n\r\nPS: use that property always and you have no problem ;)","title":"Liquibase reading from phantom changelogs","body":"<p>The problem is that the classpath context of liquibase executed from <strong>maven</strong> is different to one executed from <strong>spring-boot</strong> application. For example in maven, classpath to changeLog file could look like <code>/Users/you/app/src/main/resources/liquibase/changelog.xml</code> while in spring it could look like <code>resources/liquibase/changelog.xml</code>. I guess that this path is also included in the hash computation, therefore two identical changeSets are not identical anymore because of that path. Liquibase fixed that with <a href=\"https://docs.liquibase.com/concepts/changelogs/attributes/logicalfilepath.html\" rel=\"nofollow noreferrer\">logicalfilepath</a>. So if you plan to execute LB from multiple tools, use that.</p>\n<p>PS: use that property always and you have no problem ;)</p>\n"}],"owner":{"account_id":29058110,"reputation":94,"user_id":22259459,"display_name":"Kerllicky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690542787,"creation_date":1690528833,"question_id":76785598,"body_markdown":"I&#39;m creating a spring boot application and began messing around with liquibase to guarantee that all my tables where initialized on startup and got it working fine. Then made some changes to the changelog, erased the database and built my project through maven, still everything splendid. Aaand then my application exploded on startup with an error about checksums.\r\n\r\nI tried, erasing the database again, clearing checksums through the maven plugin, syncing, nothing.\r\nWhat I found strange, was that, when I deleted my changelog&#39;s content, it still built my database with the latest changes. So to test it out I changed the name of my changelog and the name of the changeset and boom:\r\n\r\n&gt; liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:db_changelog.sqlite.sql::1::Example:\r\n&gt; Reason: liquibase.exception.DatabaseException: [SQLITE_ERROR] SQL error or missing database (table example_table already exists) [Failed SQL: (1)\r\n\r\nWhere is liquibase getting these tables from!?\r\n\r\nLiquibase bean config (I have even tried to exclude AutoConfiguration to force this config):\r\n```\r\n  @Bean\r\n  public SpringLiquibase liquibase() {\r\n    SpringLiquibase liquibase = new SpringLiquibase();\r\n    liquibase.setChangeLog(&quot;classpath:db_changelog.sqlite.sql&quot;);\r\n    liquibase.setDataSource(dataSource());\r\n    return liquibase;\r\n  }\r\n```\r\n\r\nMaven plugin config:\r\n```\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\r\n        &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${liquibase.version}&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;driver&gt;org.sqlite.JDBC&lt;/driver&gt;\r\n          &lt;changeLogFile&gt;./src/main/resources/db_changelog.sqlite.sql&lt;/changeLogFile&gt;\r\n          &lt;url&gt;jdbc:sqlite:../database.db&lt;/url&gt;\r\n          &lt;outputChangeLogFile&gt;generatedChangelog.sqlite.sql&lt;/outputChangeLogFile&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n```","title":"Liquibase reading from phantom changelogs","body":"<p>I'm creating a spring boot application and began messing around with liquibase to guarantee that all my tables where initialized on startup and got it working fine. Then made some changes to the changelog, erased the database and built my project through maven, still everything splendid. Aaand then my application exploded on startup with an error about checksums.</p>\n<p>I tried, erasing the database again, clearing checksums through the maven plugin, syncing, nothing.\nWhat I found strange, was that, when I deleted my changelog's content, it still built my database with the latest changes. So to test it out I changed the name of my changelog and the name of the changeset and boom:</p>\n<blockquote>\n<p>liquibase.exception.MigrationFailedException: Migration failed for changeset classpath:db_changelog.sqlite.sql::1::Example:\nReason: liquibase.exception.DatabaseException: [SQLITE_ERROR] SQL error or missing database (table example_table already exists) [Failed SQL: (1)</p>\n</blockquote>\n<p>Where is liquibase getting these tables from!?</p>\n<p>Liquibase bean config (I have even tried to exclude AutoConfiguration to force this config):</p>\n<pre><code>  @Bean\n  public SpringLiquibase liquibase() {\n    SpringLiquibase liquibase = new SpringLiquibase();\n    liquibase.setChangeLog(&quot;classpath:db_changelog.sqlite.sql&quot;);\n    liquibase.setDataSource(dataSource());\n    return liquibase;\n  }\n</code></pre>\n<p>Maven plugin config:</p>\n<pre><code>      &lt;plugin&gt;\n        &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n        &lt;artifactId&gt;liquibase-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${liquibase.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;driver&gt;org.sqlite.JDBC&lt;/driver&gt;\n          &lt;changeLogFile&gt;./src/main/resources/db_changelog.sqlite.sql&lt;/changeLogFile&gt;\n          &lt;url&gt;jdbc:sqlite:../database.db&lt;/url&gt;\n          &lt;outputChangeLogFile&gt;generatedChangelog.sqlite.sql&lt;/outputChangeLogFile&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":2,"creation_date":1690542271,"post_id":76787197,"comment_id":135371892,"body_markdown":"Yes, async and completable futures probably provide absolutely no benefit here.","body":"Yes, async and completable futures probably provide absolutely no benefit here."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690542342,"post_id":76787197,"comment_id":135371904,"body_markdown":"Assuming you only run one of these tasks at the same time, that&#39;s true. If you run many in parallel on the same executor, there could be benefits.","body":"Assuming you only run one of these tasks at the same time, that&#39;s true. If you run many in parallel on the same executor, there could be benefits."}],"owner":{"account_id":329812,"reputation":70,"user_id":653537,"accept_rate":75,"display_name":"Raja S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690542130,"creation_date":1690542130,"question_id":76787197,"body_markdown":"Assuming I&#39;ve 4 core processor and declared the pool size is 5. My question is more of method chaining in `CompletableFuture` especially in asynchronous mode. \r\n\r\nSince each step is operating on the result of previous step, what is the benefit of using async in this case? After all its a sequential execution in different thread possibly. Please clarify.\r\n\r\n        Executor executor = Executors.newFixedThreadPool(5);\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        List&lt;EmployeeDTO&gt; employees = mapper.readValue(Test1.class.getClassLoader().getResourceAsStream(&quot;employees.json&quot;), new TypeReference&lt;List&lt;EmployeeDTO&gt;&gt;() {\r\n        });\r\n\r\n        CompletableFuture&lt;Void&gt; voidCompletableFuture = CompletableFuture.supplyAsync(() -&gt; {\r\n\r\n            System.out.println(&quot;Iteration 1: &quot; + Thread.currentThread().getName());\r\n            return employees.stream().filter(employee -&gt; employee.getAge() &gt; 25).collect(Collectors.toList());\r\n        }, executor).thenApplyAsync((ageGreaterThan25) -&gt; {\r\n\r\n            System.out.println(&quot;Iteration 2: &quot; + Thread.currentThread().getName());\r\n            return ageGreaterThan25.stream().filter(employee -&gt; employee.getGender().equals(&quot;female&quot;)).collect(Collectors.toList());\r\n        }, executor).thenApplyAsync((femalesAgeGreaterThan25) -&gt; {\r\n\r\n            System.out.println(&quot;Iteration 3: &quot; + Thread.currentThread().getName());\r\n            return femalesAgeGreaterThan25.stream().filter(employee -&gt; employee.getSalary() &lt; 2000).collect(Collectors.toList());\r\n        }, executor).thenApplyAsync((femalesAgeGreaterThan25EarningLess) -&gt; {\r\n\r\n            System.out.println(&quot;Iteration 4: &quot; + Thread.currentThread().getName());\r\n            return femalesAgeGreaterThan25EarningLess.stream().filter(employee -&gt; employee.getJob_title().equals(&quot;Machine Learning Engineer&quot;)).collect(Collectors.toList());\r\n        }, executor).thenAcceptAsync((femalesAgeGreaterThan25EarningLessML) -&gt; {\r\n\r\n            System.out.println(&quot;Iteration 5: &quot; + Thread.currentThread().getName());\r\n            femalesAgeGreaterThan25EarningLessML.forEach(employee -&gt; {\r\n                System.out.println(&quot;Increment salary by 5%&quot;);\r\n                employee.setSalary(employee.getSalary() * 0.05);\r\n            });\r\n        }, executor);\r\n\r\n        voidCompletableFuture.get();","title":"Understanding how CompletableFuture executing tasks parallelly?","body":"<p>Assuming I've 4 core processor and declared the pool size is 5. My question is more of method chaining in <code>CompletableFuture</code> especially in asynchronous mode.</p>\n<p>Since each step is operating on the result of previous step, what is the benefit of using async in this case? After all its a sequential execution in different thread possibly. Please clarify.</p>\n<pre><code>    Executor executor = Executors.newFixedThreadPool(5);\n\n    ObjectMapper mapper = new ObjectMapper();\n    List&lt;EmployeeDTO&gt; employees = mapper.readValue(Test1.class.getClassLoader().getResourceAsStream(&quot;employees.json&quot;), new TypeReference&lt;List&lt;EmployeeDTO&gt;&gt;() {\n    });\n\n    CompletableFuture&lt;Void&gt; voidCompletableFuture = CompletableFuture.supplyAsync(() -&gt; {\n\n        System.out.println(&quot;Iteration 1: &quot; + Thread.currentThread().getName());\n        return employees.stream().filter(employee -&gt; employee.getAge() &gt; 25).collect(Collectors.toList());\n    }, executor).thenApplyAsync((ageGreaterThan25) -&gt; {\n\n        System.out.println(&quot;Iteration 2: &quot; + Thread.currentThread().getName());\n        return ageGreaterThan25.stream().filter(employee -&gt; employee.getGender().equals(&quot;female&quot;)).collect(Collectors.toList());\n    }, executor).thenApplyAsync((femalesAgeGreaterThan25) -&gt; {\n\n        System.out.println(&quot;Iteration 3: &quot; + Thread.currentThread().getName());\n        return femalesAgeGreaterThan25.stream().filter(employee -&gt; employee.getSalary() &lt; 2000).collect(Collectors.toList());\n    }, executor).thenApplyAsync((femalesAgeGreaterThan25EarningLess) -&gt; {\n\n        System.out.println(&quot;Iteration 4: &quot; + Thread.currentThread().getName());\n        return femalesAgeGreaterThan25EarningLess.stream().filter(employee -&gt; employee.getJob_title().equals(&quot;Machine Learning Engineer&quot;)).collect(Collectors.toList());\n    }, executor).thenAcceptAsync((femalesAgeGreaterThan25EarningLessML) -&gt; {\n\n        System.out.println(&quot;Iteration 5: &quot; + Thread.currentThread().getName());\n        femalesAgeGreaterThan25EarningLessML.forEach(employee -&gt; {\n            System.out.println(&quot;Increment salary by 5%&quot;);\n            employee.setSalary(employee.getSalary() * 0.05);\n        });\n    }, executor);\n\n    voidCompletableFuture.get();\n</code></pre>\n"},{"tags":["java","file"],"comments":[{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":2,"creation_date":1514977505,"post_id":48076063,"comment_id":83125796,"body_markdown":"Are you working with a Maven project?  The problem is that the file is not on your classpath, hence when you run your program, Java can&#39;t find the file.","body":"Are you working with a Maven project?  The problem is that the file is not on your classpath, hence when you run your program, Java can&#39;t find the file."},{"owner":{"account_id":2094057,"reputation":506074,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":3,"creation_date":1514977618,"post_id":48076063,"comment_id":83125856,"body_markdown":"One workaround would be to just use the fully qualified path to the file, e.g. `C:\\your_folder\\project\\result.csv`.  The alternative is to load it from the classpath.","body":"One workaround would be to just use the fully qualified path to the file, e.g. <code>C:\\your_folder\\project\\result.csv</code>.  The alternative is to load it from the classpath."}],"answers":[{"tags":[],"owner":{"account_id":11564221,"reputation":5963,"user_id":8473028,"accept_rate":94,"display_name":"DodgyCodeException"},"down_vote_count":3,"up_vote_count":40,"is_accepted":true,"score":37,"last_activity_date":1577443840,"creation_date":1514978722,"answer_id":48076423,"question_id":48076063,"body_markdown":"The problem is that your default directory at application startup is not what you think it is. Try adding the following line to your code, just after you create the path:\r\n\r\n    public static void main(String [] args) {\r\n        int i=0;\r\n        String filename=&quot;result.csv&quot;;\r\n        Path pathToFile = Paths.get(filename);\r\n        System.out.println(pathToFile.toAbsolutePath());\r\n\r\nThat way, you&#39;ll see exactly where it is looking for the file.\r\n\r\nHow to fix it is your decision. You can use a full path spec instead of just a filename, or put the filename in a special &quot;Resources&quot; directory and reference it using a relative path, or move the file to wherever your default directory is.\r\n","title":"How to solve the java.nio.file.NoSuchFileException?","body":"<p>The problem is that your default directory at application startup is not what you think it is. Try adding the following line to your code, just after you create the path:</p>\n\n<pre><code>public static void main(String [] args) {\n    int i=0;\n    String filename=\"result.csv\";\n    Path pathToFile = Paths.get(filename);\n    System.out.println(pathToFile.toAbsolutePath());\n</code></pre>\n\n<p>That way, you'll see exactly where it is looking for the file.</p>\n\n<p>How to fix it is your decision. You can use a full path spec instead of just a filename, or put the filename in a special \"Resources\" directory and reference it using a relative path, or move the file to wherever your default directory is.</p>\n"},{"tags":[],"owner":{"account_id":12471572,"reputation":638,"user_id":9134510,"display_name":"Alex Cuadr&#243;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1514978801,"creation_date":1514978801,"answer_id":48076444,"question_id":48076063,"body_markdown":"The problem there is that java isn&#39;t able to find the &quot;result.csv&quot; file in the project folder. Thus, try to use the fully qualified path to the file, e.g. `C:\\your_folder\\project\\result.csv` in the Path variable. Also I think It would be better to use bufferedreader like this: `BufferedReader br = new BufferedReader(new FileReader(insert here the String in which is defined the path to the file));` Check the uses of BufferedReader [here][1]\n\n\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html","title":"How to solve the java.nio.file.NoSuchFileException?","body":"<p>The problem there is that java isn't able to find the \"result.csv\" file in the project folder. Thus, try to use the fully qualified path to the file, e.g. <code>C:\\your_folder\\project\\result.csv</code> in the Path variable. Also I think It would be better to use bufferedreader like this: <code>BufferedReader br = new BufferedReader(new FileReader(insert here the String in which is defined the path to the file));</code> Check the uses of BufferedReader <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":12586157,"reputation":83,"user_id":9154970,"display_name":"myhe"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1548859918,"creation_date":1537596161,"answer_id":52453960,"question_id":48076063,"body_markdown":"If your `file(&quot;result.csv&quot;)` in the src directory, you should use the **&quot;src/result.csv&quot;** instead of **&quot;result.csv&quot;**.","title":"How to solve the java.nio.file.NoSuchFileException?","body":"<p>If your <code>file(\"result.csv\")</code> in the src directory, you should use the <strong>\"src/result.csv\"</strong> instead of <strong>\"result.csv\"</strong>.</p>\n"},{"tags":[],"owner":{"account_id":14760868,"reputation":1,"user_id":10660232,"display_name":"Nimesh Bumb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1542324002,"creation_date":1542324002,"answer_id":53329236,"question_id":48076063,"body_markdown":"If you&#39;re a MacOSX user please type the file path manually instead of copying it from &quot;Get Info&quot;.\r\nYou&#39;ll get something like this if you copied it from &quot;Get Info&quot;:\r\n**/Users/username&lt;200e&gt;&lt;2068&gt;&lt;2068&gt;/Desktop&lt;2069&gt;/source.txt**\r\n","title":"How to solve the java.nio.file.NoSuchFileException?","body":"<p>If you're a MacOSX user please type the file path manually instead of copying it from \"Get Info\".\nYou'll get something like this if you copied it from \"Get Info\":\n<strong>/Users/username&lt;200e>&lt;2068>&lt;2068>/Desktop&lt;2069>/source.txt</strong></p>\n"},{"tags":[],"owner":{"account_id":8893753,"reputation":243,"user_id":6639495,"display_name":"Dovydas Giršvaldas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632842149,"creation_date":1632842149,"answer_id":69364365,"question_id":48076063,"body_markdown":"I had the same error caused by escaped characters on windows file path. For example, my application was looking for &quot;`C:\\Users\\david\\my%20folder%20name\\source.txt`&quot; meanwhile the real path was &quot;`C:\\Users\\david\\my folder name\\source.txt`&quot;.","title":"How to solve the java.nio.file.NoSuchFileException?","body":"<p>I had the same error caused by escaped characters on windows file path. For example, my application was looking for &quot;<code>C:\\Users\\david\\my%20folder%20name\\source.txt</code>&quot; meanwhile the real path was &quot;<code>C:\\Users\\david\\my folder name\\source.txt</code>&quot;.</p>\n"},{"tags":[],"owner":{"account_id":18907312,"reputation":1734,"user_id":13794189,"display_name":"Miguel Tom&#225;s"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684620754,"creation_date":1638096632,"answer_id":70142656,"question_id":48076063,"body_markdown":"Not discarding all possible solutions here, this error also occurs when your running Android Studio on Windows environment and using a project directory on an external hard drive formatted with other than NFTS. ]\r\n\r\nIf this is the case, simply move your project into the main HDD (NTFS) and reload the project again , this time from the main HDD folder path.","title":"How to solve the java.nio.file.NoSuchFileException?","body":"<p>Not discarding all possible solutions here, this error also occurs when your running Android Studio on Windows environment and using a project directory on an external hard drive formatted with other than NFTS. ]</p>\n<p>If this is the case, simply move your project into the main HDD (NTFS) and reload the project again , this time from the main HDD folder path.</p>\n"},{"tags":[],"owner":{"account_id":28809583,"reputation":11,"user_id":22064607,"display_name":"ashique pc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690541722,"creation_date":1690541722,"answer_id":76787152,"question_id":48076063,"body_markdown":"this can also happen when the you dont specify full file path.\r\neg: `/home/ubuntu/kafka_2.13-2.8.1/bin/client.properties`\r\nthis works for me","title":"How to solve the java.nio.file.NoSuchFileException?","body":"<p>this can also happen when the you dont specify full file path.\neg: <code>/home/ubuntu/kafka_2.13-2.8.1/bin/client.properties</code>\nthis works for me</p>\n"}],"owner":{"account_id":8294125,"reputation":581,"user_id":6234847,"accept_rate":76,"display_name":"Snkini"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210332,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":48076423,"answer_count":7,"score":27,"last_activity_date":1690541722,"creation_date":1514977360,"question_id":48076063,"body_markdown":"I have a file called &quot;result.csv&quot;, from that file i want to read certain data and display them. I have that file in my eclipse project folder itself. Still i&#39;m unable to read the file.\r\n\r\n     public static void main(String [] args) {\r\n        int i=0;\r\n\t\tString filename=&quot;result.csv&quot;;\r\n\t\tPath pathToFile = Paths.get(filename);\r\n\t\t\r\n\t\ttry (BufferedReader br = Files.newBufferedReader(pathToFile, StandardCharsets.US_ASCII)) { \r\n\t\t\t// read the first line from the text file \r\n\t\t\tString line = br.readLine(); \r\n\t\t\t// loop until all lines are read \r\n\t\t\twhile (i&lt;10) { \r\n\t\t\t\t// use string.split to load a string array with the values from \r\n\t\t\t\t// each line of \r\n\t\t\t\t// the file, using a comma as the delimiter\r\n\t\t\t\tString[] attributes = line.split(&quot;,&quot;); \r\n\t\t\t\tdouble x=Double.parseDouble(attributes[8]);\r\n\t\t\t\tdouble y=Double.parseDouble(attributes[9]);\r\n\t\t\t\tSystem.out.println(GeoHash.withCharacterPrecision(x, y, 10));\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t// read next line before looping \r\n\t\t\t\t// if end of file reached, line would be null \r\n\t\t\t\tline = br.readLine(); \r\n\t\t\t\ti++;\r\n\t\t\t} \r\n\t\t} catch (IOException ioe) { \r\n\t\t\t\tioe.printStackTrace(); \r\n\t\t} \r\n    }\r\n**OUTPUT:**\r\n\r\n    java.nio.file.NoSuchFileException: result.csv\r\n\tat sun.nio.fs.WindowsException.translateToIOException(Unknown Source)\r\n\tat sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)\r\n\tat sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)\r\n\tat sun.nio.fs.WindowsFileSystemProvider.newByteChannel(Unknown Source)\r\n\tat java.nio.file.Files.newByteChannel(Unknown Source)\r\n\tat java.nio.file.Files.newByteChannel(Unknown Source)\r\n\tat java.nio.file.spi.FileSystemProvider.newInputStream(Unknown Source)\r\n\tat java.nio.file.Files.newInputStream(Unknown Source)\r\n\tat java.nio.file.Files.newBufferedReader(Unknown Source)\r\n\tat com.uvce.cse.searchiot.geohash.TestGeoHash.main(TestGeoHash.java:19)\r\n\r\nCan anyone point where exactly i missed? and how can i overcome this or any alternate methods for this method?","title":"How to solve the java.nio.file.NoSuchFileException?","body":"<p>I have a file called \"result.csv\", from that file i want to read certain data and display them. I have that file in my eclipse project folder itself. Still i'm unable to read the file.</p>\n\n<pre><code> public static void main(String [] args) {\n    int i=0;\n    String filename=\"result.csv\";\n    Path pathToFile = Paths.get(filename);\n\n    try (BufferedReader br = Files.newBufferedReader(pathToFile, StandardCharsets.US_ASCII)) { \n        // read the first line from the text file \n        String line = br.readLine(); \n        // loop until all lines are read \n        while (i&lt;10) { \n            // use string.split to load a string array with the values from \n            // each line of \n            // the file, using a comma as the delimiter\n            String[] attributes = line.split(\",\"); \n            double x=Double.parseDouble(attributes[8]);\n            double y=Double.parseDouble(attributes[9]);\n            System.out.println(GeoHash.withCharacterPrecision(x, y, 10));\n\n\n            // read next line before looping \n            // if end of file reached, line would be null \n            line = br.readLine(); \n            i++;\n        } \n    } catch (IOException ioe) { \n            ioe.printStackTrace(); \n    } \n}\n</code></pre>\n\n<p><strong>OUTPUT:</strong></p>\n\n<pre><code>java.nio.file.NoSuchFileException: result.csv\nat sun.nio.fs.WindowsException.translateToIOException(Unknown Source)\nat sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)\nat sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)\nat sun.nio.fs.WindowsFileSystemProvider.newByteChannel(Unknown Source)\nat java.nio.file.Files.newByteChannel(Unknown Source)\nat java.nio.file.Files.newByteChannel(Unknown Source)\nat java.nio.file.spi.FileSystemProvider.newInputStream(Unknown Source)\nat java.nio.file.Files.newInputStream(Unknown Source)\nat java.nio.file.Files.newBufferedReader(Unknown Source)\nat com.uvce.cse.searchiot.geohash.TestGeoHash.main(TestGeoHash.java:19)\n</code></pre>\n\n<p>Can anyone point where exactly i missed? and how can i overcome this or any alternate methods for this method?</p>\n"},{"tags":["java","spring","spring-boot","configuration"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690467294,"post_id":76780607,"comment_id":135360579,"body_markdown":"You never instantiate your own `ApplicationContext`. Use the one Spring provides. That also means you don&#39;t have to care about implementations, just use only the `ApplicationContext` interface.","body":"You never instantiate your own <code>ApplicationContext</code>. Use the one Spring provides. That also means you don&#39;t have to care about implementations, just use only the <code>ApplicationContext</code> interface."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690467317,"post_id":76780607,"comment_id":135360587,"body_markdown":"You shouldn&#39;t and you are focussing on the wrong things. The problem is that you are using `AnnotationConfigApplicationContext` and are giving it absoluty nothing. No configuraiton, no package to scan. So it does exactly what you tell it to, nothing. If instead you would have written `new AnnotationConfigApplicationContext(&quot;your.package.here&quot;)` it would have worked.","body":"You shouldn&#39;t and you are focussing on the wrong things. The problem is that you are using <code>AnnotationConfigApplicationContext</code> and are giving it absoluty nothing. No configuraiton, no package to scan. So it does exactly what you tell it to, nothing. If instead you would have written <code>new AnnotationConfigApplicationContext(&quot;your.package.here&quot;)</code> it would have worked."}],"owner":{"account_id":29047290,"reputation":1,"user_id":22250836,"display_name":"Haleema Shahid"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690540721,"creation_date":1690467131,"question_id":76780607,"body_markdown":"Out of all the implementations and sub-interfaces of [ApplicationContext](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html) interface, how do we decide which one we should use to access the `IOC container`? Also, this is my first question on stackoverflow.\r\n\r\nI wanted to try out basic annotations like `@component` and `@autowire` without using any `config class` (with the @configuration annotation). I made a Person class like so:\r\n```\r\n@Component\r\npublic class Person {\r\n    private String name;\r\n    private int number;\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public void setNumber(int number) {\r\n        this.number = number;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public int getNumber() {\r\n        return number;\r\n    }\r\n}\r\n\r\n```\r\n\r\nand the main function like so: \r\n\r\n```\r\n@SpringBootApplication\r\npublic class StudyingSpringBootApplication {\r\n\r\n    public static void main(String[] args) {\r\n\r\n\r\n        \r\n        ApplicationContext context = new AnnotationConfigApplicationContext();\r\n        Person person = (Person)context.getBean(&quot;person&quot;);\r\n        System.out.println(&quot;Person is &quot;+ person.getName()+&quot; &quot;+ person.getNumber());\r\n    }\r\n\r\n}\r\n```\r\nThis did not instantiate the bean in the container. Instead it gave me this exception:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.IllegalStateException: org.springframework.context.annotation.AnnotationConfigApplicationContext@12028586 has not been refreshed yet\r\n\r\nI googled a lot and found nothing that would help me figure out which `context` implementation or sub-interface to use. Then I asked ChatGpt to write a simple spring boot application. This is how ChatGpt handled it: \r\n\r\n\r\n```\r\n@SpringBootApplication\r\npublic class StudyingSpringBootApplication {\r\n\r\n    public static void main(String[] args) {\r\n        \r\n        ConfigurableApplicationContext context = SpringApplication.run(StudyingSpringBootApplication.class, args);\r\n        Person person = (Person)context.getBean(&quot;person&quot;);\r\n        System.out.println(&quot;Person is &quot;+ person.getName()+&quot; &quot;+ person.getNumber());\r\n    }\r\n\r\n}\r\n\r\n```\r\nThis works just fine. It instantiates a person bean with null name and 0 number.\r\n\r\nSo my question is why has [ConfigurableApplicationContext](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ConfigurableApplicationContext.html) been used? And how do we know which implementation or sub-interface of `ApplicationContext` to use and when to use it? If someone could explain the use-case of each implementation and sub-interface, that would be great. \r\n\r\n","title":"Which &quot;Context&quot; to choose for my Spring Boot Application?","body":"<p>Out of all the implementations and sub-interfaces of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationContext.html\" rel=\"nofollow noreferrer\">ApplicationContext</a> interface, how do we decide which one we should use to access the <code>IOC container</code>? Also, this is my first question on stackoverflow.</p>\n<p>I wanted to try out basic annotations like <code>@component</code> and <code>@autowire</code> without using any <code>config class</code> (with the @configuration annotation). I made a Person class like so:</p>\n<pre><code>@Component\npublic class Person {\n    private String name;\n    private int number;\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public void setNumber(int number) {\n        this.number = number;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public int getNumber() {\n        return number;\n    }\n}\n\n</code></pre>\n<p>and the main function like so:</p>\n<pre><code>@SpringBootApplication\npublic class StudyingSpringBootApplication {\n\n    public static void main(String[] args) {\n\n\n        \n        ApplicationContext context = new AnnotationConfigApplicationContext();\n        Person person = (Person)context.getBean(&quot;person&quot;);\n        System.out.println(&quot;Person is &quot;+ person.getName()+&quot; &quot;+ person.getNumber());\n    }\n\n}\n</code></pre>\n<p>This did not instantiate the bean in the container. Instead it gave me this exception:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.IllegalStateException: org.springframework.context.annotation.AnnotationConfigApplicationContext@12028586 has not been refreshed yet</p>\n</blockquote>\n<p>I googled a lot and found nothing that would help me figure out which <code>context</code> implementation or sub-interface to use. Then I asked ChatGpt to write a simple spring boot application. This is how ChatGpt handled it:</p>\n<pre><code>@SpringBootApplication\npublic class StudyingSpringBootApplication {\n\n    public static void main(String[] args) {\n        \n        ConfigurableApplicationContext context = SpringApplication.run(StudyingSpringBootApplication.class, args);\n        Person person = (Person)context.getBean(&quot;person&quot;);\n        System.out.println(&quot;Person is &quot;+ person.getName()+&quot; &quot;+ person.getNumber());\n    }\n\n}\n\n</code></pre>\n<p>This works just fine. It instantiates a person bean with null name and 0 number.</p>\n<p>So my question is why has <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ConfigurableApplicationContext.html\" rel=\"nofollow noreferrer\">ConfigurableApplicationContext</a> been used? And how do we know which implementation or sub-interface of <code>ApplicationContext</code> to use and when to use it? If someone could explain the use-case of each implementation and sub-interface, that would be great.</p>\n"},{"tags":["java","minecraft"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1690527643,"post_id":76785459,"comment_id":135369010,"body_markdown":"Please show all code as *text* rather than as images.","body":"Please show all code as <i>text</i> rather than as images."},{"owner":{"account_id":4996428,"reputation":362,"user_id":4016860,"accept_rate":75,"display_name":"Popeye"},"score":0,"creation_date":1690527839,"post_id":76785459,"comment_id":135369051,"body_markdown":"What is the original interface?","body":"What is the original interface?"},{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":2,"creation_date":1690528818,"post_id":76785459,"comment_id":135369240,"body_markdown":"You mean eg. `commandSender` instead of `sender`? That&#39;s just the name, that&#39;s irrelevant. The only important thing is the types are correct.","body":"You mean eg. <code>commandSender</code> instead of <code>sender</code>? That&#39;s just the name, that&#39;s irrelevant. The only important thing is the types are correct."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1690530157,"post_id":76785459,"comment_id":135369482,"body_markdown":"Generally, names like these are simply copied from the overridden method. Likely the video tutorial used a different version of the library, and the authors of that library renamed the parameters, or the library doesn&#39;t contain debug information, so IntelliJ derives it from the class names of the parameter types instead of using the original parameter names. This is really an inconsequential difference, and not something you should get hung up on.","body":"Generally, names like these are simply copied from the overridden method. Likely the video tutorial used a different version of the library, and the authors of that library renamed the parameters, or the library doesn&#39;t contain debug information, so IntelliJ derives it from the class names of the parameter types instead of using the original parameter names. This is really an inconsequential difference, and not something you should get hung up on."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690540555,"post_id":76785459,"comment_id":135371593,"body_markdown":"If you don&#39;t like the parameter names, just change them? Javac might erase them anyways (depending on the flags).","body":"If you don&#39;t like the parameter names, just change them? Javac might erase them anyways (depending on the flags)."}],"owner":{"account_id":29108873,"reputation":11,"user_id":22299054,"display_name":"DiceMa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690540529,"creation_date":1690527476,"question_id":76785459,"body_markdown":"I&#39;m learning how to make plugins on Paper for Minecraft. I ran into this problem(?): when inheriting the CommandExecutor interface, I automatically create a method using Shift+Alt+Enter, but the name of the arguments is different in my video tutorial.\r\n\r\nThe development version of Java 17, as recommended by IDEA itself. Plugins for IDEA are installed.\r\n\r\nMy option:\r\n\r\n```java\r\npublic boolean onCommand(@NotNull CommandSender commandSender, @NotNull Command command, @NotNull String s,\r\n                         @NotNull String[] strings)\r\n```\r\n\r\nOption from the lesson:\r\n\r\n```java\r\npublic boolean onCommand(@NotNull CommandSender sender, @NotNull Command command, @NotNull String label,\r\n                         @NotNull String[] args)\r\n```\r\n\r\nIn search of a solution, I realized that Maven does not have a dependency (like) with javadoc or the like. I checked the boxes in the settings of Maven automatically download: Source, Doc., Annotations. But it didn&#39;t help.","title":"Why does the name of the arguments in the method not match when inheriting the CommandExecutor interface?","body":"<p>I'm learning how to make plugins on Paper for Minecraft. I ran into this problem(?): when inheriting the CommandExecutor interface, I automatically create a method using Shift+Alt+Enter, but the name of the arguments is different in my video tutorial.</p>\n<p>The development version of Java 17, as recommended by IDEA itself. Plugins for IDEA are installed.</p>\n<p>My option:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean onCommand(@NotNull CommandSender commandSender, @NotNull Command command, @NotNull String s,\n                         @NotNull String[] strings)\n</code></pre>\n<p>Option from the lesson:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public boolean onCommand(@NotNull CommandSender sender, @NotNull Command command, @NotNull String label,\n                         @NotNull String[] args)\n</code></pre>\n<p>In search of a solution, I realized that Maven does not have a dependency (like) with javadoc or the like. I checked the boxes in the settings of Maven automatically download: Source, Doc., Annotations. But it didn't help.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":25369067,"reputation":11,"user_id":19183195,"display_name":"Ashile The Great"},"score":0,"creation_date":1676238879,"post_id":75430284,"comment_id":133092748,"body_markdown":"If you know any proper ImageViewer with double tap to zoom, pinch to zoom and Slide to next and previous image, also welcome.","body":"If you know any proper ImageViewer with double tap to zoom, pinch to zoom and Slide to next and previous image, also welcome."}],"answers":[{"tags":[],"owner":{"account_id":25369067,"reputation":11,"user_id":19183195,"display_name":"Ashile The Great"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1676279004,"creation_date":1676278943,"answer_id":75433804,"question_id":75430284,"body_markdown":"Ok after a long test and experiments finally found it. here is the code:\r\n\r\n    View imageDetail = activity.getLayoutInflater().inflate(R.layout.chat_image_pager, container , false);\r\n    \r\n           ImageView back = imageDetail.findViewById(R.id.back);\r\n           TextView totalImages = imageDetail.findViewById(R.id.totalImages);\r\n           TextView imagePosition = imageDetail.findViewById(R.id.mediaCounter);\r\n           TextView sentDate = imageDetail.findViewById(R.id.sentDate);\r\n           TextView sentBy = imageDetail.findViewById(R.id.sentBy);\r\n           TextView sentTime = imageDetail.findViewById(R.id.sentTime);\r\n    \r\n     StafalconImageViewer builder = new StfalconImageViewer.Builder&lt;&gt;\r\n            (activity,ChatImageData.imageMessages, (imageView, image) -&gt; {\r\n                  Glide.with(fragment)\r\n                       .load(image.getMediaAddress())\r\n                       .into(imageView);\r\n             });\r\n    \r\n    //some other codes\r\n    \r\n     builder\r\n         .withStartPosition(ChatMessageInterfaceFragment.imagePosition)\r\n         .withHiddenStatusBar(false)\r\n         .allowZooming(true)\r\n         .allowSwipeToDismiss(true)\r\n         .withImageChangeListener((position) -&gt; {\r\n               //some codes\r\n          })\r\n         .withBackgroundColorResource(R.color.background_light)\r\n         .withTransitionFrom(messageImage)\r\n         .withOverlayView(imageDetail)\r\n         .show();\r\n\r\nnow our onClickListener works:\r\n\r\n    back.setOnClickListener(v -&gt; {\r\n          builder.onDismiss();\r\n    });\r\n\r\nIf we use the base Class which mean **StafalconImageViewer** and not the \r\n**StafalconImageViewer.Builder**, the **onDismiss()** method works fine!\r\n\r\n \r\n\r\n  ","title":"Using Overlay of StfalconImageViewer to close imageViewer","body":"<p>Ok after a long test and experiments finally found it. here is the code:</p>\n<pre><code>View imageDetail = activity.getLayoutInflater().inflate(R.layout.chat_image_pager, container , false);\n\n       ImageView back = imageDetail.findViewById(R.id.back);\n       TextView totalImages = imageDetail.findViewById(R.id.totalImages);\n       TextView imagePosition = imageDetail.findViewById(R.id.mediaCounter);\n       TextView sentDate = imageDetail.findViewById(R.id.sentDate);\n       TextView sentBy = imageDetail.findViewById(R.id.sentBy);\n       TextView sentTime = imageDetail.findViewById(R.id.sentTime);\n\n StafalconImageViewer builder = new StfalconImageViewer.Builder&lt;&gt;\n        (activity,ChatImageData.imageMessages, (imageView, image) -&gt; {\n              Glide.with(fragment)\n                   .load(image.getMediaAddress())\n                   .into(imageView);\n         });\n\n//some other codes\n\n builder\n     .withStartPosition(ChatMessageInterfaceFragment.imagePosition)\n     .withHiddenStatusBar(false)\n     .allowZooming(true)\n     .allowSwipeToDismiss(true)\n     .withImageChangeListener((position) -&gt; {\n           //some codes\n      })\n     .withBackgroundColorResource(R.color.background_light)\n     .withTransitionFrom(messageImage)\n     .withOverlayView(imageDetail)\n     .show();\n</code></pre>\n<p>now our onClickListener works:</p>\n<pre><code>back.setOnClickListener(v -&gt; {\n      builder.onDismiss();\n});\n</code></pre>\n<p>If we use the base Class which mean <strong>StafalconImageViewer</strong> and not the\n<strong>StafalconImageViewer.Builder</strong>, the <strong>onDismiss()</strong> method works fine!</p>\n"},{"tags":[],"owner":{"account_id":5506695,"reputation":554,"user_id":4374362,"display_name":"harishanth raveendren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690540519,"creation_date":1690540519,"answer_id":76787025,"question_id":75430284,"body_markdown":"you can also use as `StfalconImageViewer viewer = builder.build();` followed by `viewer.close();` which also helps close the dialog.","title":"Using Overlay of StfalconImageViewer to close imageViewer","body":"<p>you can also use as <code>StfalconImageViewer viewer = builder.build();</code> followed by <code>viewer.close();</code> which also helps close the dialog.</p>\n"}],"owner":{"account_id":25369067,"reputation":11,"user_id":19183195,"display_name":"Ashile The Great"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":284,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75433804,"answer_count":2,"score":0,"last_activity_date":1690540519,"creation_date":1676237144,"question_id":75430284,"body_markdown":"I&#39;m trying to implement StfalconImageViewer in my app using these links: [here][1] and [here][2]. this is my code:\r\n\r\n\r\n```\r\n  View imageDetail = activity.getLayoutInflater().inflate(R.layout.chat_image_pager, container , false);\r\n\r\n       ImageView back = imageDetail.findViewById(R.id.back);\r\n       TextView totalImages = imageDetail.findViewById(R.id.totalImages);\r\n       TextView imagePosition = imageDetail.findViewById(R.id.mediaCounter);\r\n       TextView sentDate = imageDetail.findViewById(R.id.sentDate);\r\n       TextView sentBy = imageDetail.findViewById(R.id.sentBy);\r\n       TextView sentTime = imageDetail.findViewById(R.id.sentTime);\r\n\r\n       back.setOnClickListener(v -&gt; {\r\n            //what should I write here???\r\n        });\r\n\r\n StfalconImageViewer.Builder&lt;ChatMessageBuilder&gt; builder = new StfalconImageViewer.Builder&lt;&gt;\r\n        (activity,ChatImageData.imageMessages, (imageView, image) -&gt; {\r\n              Glide.with(fragment)\r\n                   .load(image.getMediaAddress())\r\n                   .into(imageView);\r\n         });\r\n\r\n//some other codes\r\n\r\n builder\r\n     .withStartPosition(ChatMessageInterfaceFragment.imagePosition)\r\n     .withHiddenStatusBar(false)\r\n     .allowZooming(true)\r\n     .allowSwipeToDismiss(true)\r\n     .withImageChangeListener((position) -&gt; {\r\n           //some codes\r\n      })\r\n     .withBackgroundColorResource(R.color.background_light)\r\n     .withTransitionFrom(messageImage)\r\n     .withOverlayView(imageDetail)\r\n     .show();\r\n```\r\n\r\n\r\n\r\nAs you can see there is an Overlay named `imageDetail` and a button (in Overlay) named `back` which should **close** `imageViewer` and get me back to my RecyclerView but the problem is I can&#39;t really put a right code for this. Any help would be appreciated.\r\n\r\n\r\n  [1]: https://github.com/stfalcon-studio/StfalconImageViewer\r\n  [2]: https://github.com/stfalcon-studio/FrescoImageViewer","title":"Using Overlay of StfalconImageViewer to close imageViewer","body":"<p>I'm trying to implement StfalconImageViewer in my app using these links: <a href=\"https://github.com/stfalcon-studio/StfalconImageViewer\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/stfalcon-studio/FrescoImageViewer\" rel=\"nofollow noreferrer\">here</a>. this is my code:</p>\n<pre><code>  View imageDetail = activity.getLayoutInflater().inflate(R.layout.chat_image_pager, container , false);\n\n       ImageView back = imageDetail.findViewById(R.id.back);\n       TextView totalImages = imageDetail.findViewById(R.id.totalImages);\n       TextView imagePosition = imageDetail.findViewById(R.id.mediaCounter);\n       TextView sentDate = imageDetail.findViewById(R.id.sentDate);\n       TextView sentBy = imageDetail.findViewById(R.id.sentBy);\n       TextView sentTime = imageDetail.findViewById(R.id.sentTime);\n\n       back.setOnClickListener(v -&gt; {\n            //what should I write here???\n        });\n\n StfalconImageViewer.Builder&lt;ChatMessageBuilder&gt; builder = new StfalconImageViewer.Builder&lt;&gt;\n        (activity,ChatImageData.imageMessages, (imageView, image) -&gt; {\n              Glide.with(fragment)\n                   .load(image.getMediaAddress())\n                   .into(imageView);\n         });\n\n//some other codes\n\n builder\n     .withStartPosition(ChatMessageInterfaceFragment.imagePosition)\n     .withHiddenStatusBar(false)\n     .allowZooming(true)\n     .allowSwipeToDismiss(true)\n     .withImageChangeListener((position) -&gt; {\n           //some codes\n      })\n     .withBackgroundColorResource(R.color.background_light)\n     .withTransitionFrom(messageImage)\n     .withOverlayView(imageDetail)\n     .show();\n</code></pre>\n<p>As you can see there is an Overlay named <code>imageDetail</code> and a button (in Overlay) named <code>back</code> which should <strong>close</strong> <code>imageViewer</code> and get me back to my RecyclerView but the problem is I can't really put a right code for this. Any help would be appreciated.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1690541060,"post_id":76786969,"comment_id":135371692,"body_markdown":"Don&#39;t. Use a UUID if you must else let the database handle it. There is no garantueed random number generator and when scaling this will inevitably lead to issues. If you want something other then a UUID you could look at twitter Snowflake to generate ids. But in general you should stick with DB generated ids.","body":"Don&#39;t. Use a UUID if you must else let the database handle it. There is no garantueed random number generator and when scaling this will inevitably lead to issues. If you want something other then a UUID you could look at twitter Snowflake to generate ids. But in general you should stick with DB generated ids."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":2,"creation_date":1690543119,"post_id":76786969,"comment_id":135372037,"body_markdown":"your requirements of &quot;random&quot; and &quot;unique&quot; could outweigh each other - random numbers are usually not supposed to be unique.","body":"your requirements of &quot;random&quot; and &quot;unique&quot; could outweigh each other - random numbers are usually not supposed to be unique."},{"owner":{"account_id":1106509,"reputation":6457,"user_id":1097800,"accept_rate":82,"display_name":"LynAs"},"score":0,"creation_date":1690570707,"post_id":76786969,"comment_id":135377403,"body_markdown":"You can use `System.nanoTime();`","body":"You can use <code>System.nanoTime();</code>"}],"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690540072,"creation_date":1690540072,"question_id":76786969,"body_markdown":"I am working on a Spring Boot application with MySQL database. I have the following requirement-  \r\nI want to use randomly generated unique number (like 125665585) as primary key instead of **SEQUENCE/AUTO/TABLE/IDENTITY**. I came accross the UUID, but don&#39;t want to use it and keep the primary key as a primitive data type only.  \r\nCan anybody please explain how it should be done in Spring Boot and whether JPA/Hibernate has any pre-existing feature for this?","title":"How to use a randomly generated unique number as primary key in Spring Boot and Hibernate?","body":"<p>I am working on a Spring Boot application with MySQL database. I have the following requirement-<br />\nI want to use randomly generated unique number (like 125665585) as primary key instead of <strong>SEQUENCE/AUTO/TABLE/IDENTITY</strong>. I came accross the UUID, but don't want to use it and keep the primary key as a primitive data type only.<br />\nCan anybody please explain how it should be done in Spring Boot and whether JPA/Hibernate has any pre-existing feature for this?</p>\n"},{"tags":["java","kotlin","reflection","android-annotations","java-annotations"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1690540334,"post_id":76786953,"comment_id":135371547,"body_markdown":"That annotation is not retained at runtime. That’s why you can’t find it. How about using your own annotation?","body":"That annotation is not retained at runtime. That’s why you can’t find it. How about using your own annotation?"},{"owner":{"account_id":34014,"reputation":1149,"user_id":95681,"accept_rate":71,"display_name":"StormFoo"},"score":0,"creation_date":1690541372,"post_id":76786953,"comment_id":135371759,"body_markdown":"@Sweeper ah, that would explain it, thanks. I don&#39;t think writing my own would add anything in this particular scenario, unless I can also get the compiler to treat it the same was as the original does - otherwise it&#39;s just extra fluff for a test with no real functionality. If you know of a way to make it testable and functionally similar I&#39;d love to hear more though.","body":"@Sweeper ah, that would explain it, thanks. I don&#39;t think writing my own would add anything in this particular scenario, unless I can also get the compiler to treat it the same was as the original does - otherwise it&#39;s just extra fluff for a test with no real functionality. If you know of a way to make it testable and functionally similar I&#39;d love to hear more though."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690541831,"post_id":76786953,"comment_id":135371816,"body_markdown":"`hasAnnotation` and `getAnnotation` should really just throw an exception if the annotation doesn&#39;t have the correct retention type. Would save so much trouble.","body":"<code>hasAnnotation</code> and <code>getAnnotation</code> should really just throw an exception if the annotation doesn&#39;t have the correct retention type. Would save so much trouble."},{"owner":{"account_id":34014,"reputation":1149,"user_id":95681,"accept_rate":71,"display_name":"StormFoo"},"score":0,"creation_date":1690542973,"post_id":76786953,"comment_id":135372005,"body_markdown":"After the comment by @Sweeper I&#39;ve been able to retain the functionality and add visibility by creating a copy of the in my project with `package androidx.annotation` at the top to override the original and `@Retention(AnnotationRetention.RUNTIME)` on the class to ensure tests can see it. This feels extremely hacky to me though, so I&#39;m holding off on answering my own question with it as a solution in the hope that someone can think of a neater way of doing it.","body":"After the comment by @Sweeper I&#39;ve been able to retain the functionality and add visibility by creating a copy of the in my project with <code>package androidx.annotation</code> at the top to override the original and <code>@Retention(AnnotationRetention.RUNTIME)</code> on the class to ensure tests can see it. This feels extremely hacky to me though, so I&#39;m holding off on answering my own question with it as a solution in the hope that someone can think of a neater way of doing it."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1690543142,"post_id":76786953,"comment_id":135372045,"body_markdown":"You can process your own annotation by generating the built-in annotation using an annotation processor. See [here](https://proandroiddev.com/the-guide-to-your-first-annotation-processor-with-ksp-and-becoming-a-kotlin-artist-4e5d13f171e6) for a start.","body":"You can process your own annotation by generating the built-in annotation using an annotation processor. See <a href=\"https://proandroiddev.com/the-guide-to-your-first-annotation-processor-with-ksp-and-becoming-a-kotlin-artist-4e5d13f171e6\" rel=\"nofollow noreferrer\">here</a> for a start."},{"owner":{"account_id":34014,"reputation":1149,"user_id":95681,"accept_rate":71,"display_name":"StormFoo"},"score":0,"creation_date":1690560225,"post_id":76786953,"comment_id":135375662,"body_markdown":"Turns out ProGuard didn&#39;t like the duplicate class and package combo, so the hacky solution wasn&#39;t viable in the end.","body":"Turns out ProGuard didn&#39;t like the duplicate class and package combo, so the hacky solution wasn&#39;t viable in the end."}],"owner":{"account_id":34014,"reputation":1149,"user_id":95681,"accept_rate":71,"display_name":"StormFoo"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690539900,"creation_date":1690539900,"question_id":76786953,"body_markdown":"We have a wrapper class for checking the Android SDK version, and it uses the `ChecksSdkIntAtLeast` annotation. Here&#39;s a trimmed example of the class with just one getter and the logging removed:\r\n\r\n``` lang-kotlin\r\nclass DeviceApi(\r\n    private val deviceOsVersion: Int\r\n) {\r\n    @get:ChecksSdkIntAtLeast(api = Build.VERSION_CODES.M)\r\n    val isApi23AndAbove get() = deviceOsVersion &gt;= Build.VERSION_CODES.M\r\n}\r\n```\r\n\r\nWe have tests for the getter itself, but I was hoping to write tests to verify that the getter also has the annotation in place with the correct value, to avoid the compiler warnings that show up if it isn&#39;t included. However, no matter what I try, I can&#39;t seem to find the annotation via reflection.\r\n\r\nHere&#39;s two basic examples that work if I do this for a Kotlin `annotation class` annotation that just don&#39;t find the `public @interface` annotations provided by `androidx.annotation`:\r\n\r\n``` lang-kotlin\r\n@Test\r\nfun kotlin_reflection_example() {\r\n    assertThat(DeviceApi::isApi23AndAbove.getter.hasAnnotation&lt;ChecksSdkIntAtLeast&gt;()).isTrue\r\n}\r\n\r\n@Test\r\nfun java_reflection_example() {\r\n    assertThat(DeviceApi::isApi23AndAbove.javaGetter!!.getAnnotation(ChecksSdkIntAtLeast::class.java)).isNotNull\r\n}\r\n```\r\nI&#39;ve also tried various examples I&#39;ve seen online for looking for members and methods from the class and debugged to inspect the state of various things, but I&#39;ve been unable to get any of the code to see the annotation. I want to know if I&#39;m missing something obvious or if I found a scenario that just isn&#39;t supported by `kotlin-reflect` - and if so, if there&#39;s an alternative.","title":"Find Java annotations via reflection for Kotlin getter","body":"<p>We have a wrapper class for checking the Android SDK version, and it uses the <code>ChecksSdkIntAtLeast</code> annotation. Here's a trimmed example of the class with just one getter and the logging removed:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class DeviceApi(\n    private val deviceOsVersion: Int\n) {\n    @get:ChecksSdkIntAtLeast(api = Build.VERSION_CODES.M)\n    val isApi23AndAbove get() = deviceOsVersion &gt;= Build.VERSION_CODES.M\n}\n</code></pre>\n<p>We have tests for the getter itself, but I was hoping to write tests to verify that the getter also has the annotation in place with the correct value, to avoid the compiler warnings that show up if it isn't included. However, no matter what I try, I can't seem to find the annotation via reflection.</p>\n<p>Here's two basic examples that work if I do this for a Kotlin <code>annotation class</code> annotation that just don't find the <code>public @interface</code> annotations provided by <code>androidx.annotation</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Test\nfun kotlin_reflection_example() {\n    assertThat(DeviceApi::isApi23AndAbove.getter.hasAnnotation&lt;ChecksSdkIntAtLeast&gt;()).isTrue\n}\n\n@Test\nfun java_reflection_example() {\n    assertThat(DeviceApi::isApi23AndAbove.javaGetter!!.getAnnotation(ChecksSdkIntAtLeast::class.java)).isNotNull\n}\n</code></pre>\n<p>I've also tried various examples I've seen online for looking for members and methods from the class and debugged to inspect the state of various things, but I've been unable to get any of the code to see the annotation. I want to know if I'm missing something obvious or if I found a scenario that just isn't supported by <code>kotlin-reflect</code> - and if so, if there's an alternative.</p>\n"},{"tags":["java","docker","sonarqube"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1575182494,"post_id":59123167,"comment_id":104475557,"body_markdown":"`/usr/bin` isn&#39;t a proper JAVA_HOME, though, it should be the actual folder where alpine added it. Note: you&#39;re adding openjdk11 twice and you should consider collapsing your Docker RUN commands where necessary","body":"<code>&#47;usr&#47;bin</code> isn&#39;t a proper JAVA_HOME, though, it should be the actual folder where alpine added it. Note: you&#39;re adding openjdk11 twice and you should consider collapsing your Docker RUN commands where necessary"},{"owner":{"account_id":2366187,"reputation":60152,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":0,"creation_date":1575183843,"post_id":59123167,"comment_id":104475759,"body_markdown":"I assume that many of those commands are for debugging the current issue - but I would say that commands add a layer and those commands that just print things out add layers too; they’ll bloat your image for no benefit. I would suggest separating _building_ your container from _testing_ it - simply `docker run` the created image to execute your diagnostic commands!","body":"I assume that many of those commands are for debugging the current issue - but I would say that commands add a layer and those commands that just print things out add layers too; they’ll bloat your image for no benefit. I would suggest separating <i>building</i> your container from <i>testing</i> it - simply <code>docker run</code> the created image to execute your diagnostic commands!"}],"answers":[{"tags":[],"owner":{"account_id":3989434,"reputation":55891,"user_id":3288890,"accept_rate":43,"display_name":"Adiii"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1575183974,"creation_date":1575183610,"answer_id":59123276,"question_id":59123167,"body_markdown":"Add `JAVA_HOME` ENV according to version, as mentioned @cricket_007 the path in alpine for JDK is `/usr/lib/jvm/{VERSION}`\r\n\r\n```\r\nENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk\r\nENV PATH=&quot;$JAVA_HOME/bin:${PATH}&quot;  \r\nRUN echo $PATH\r\n```\r\n\r\nrun docker\r\n\r\n```\r\ndocker run --privileged -it --rm sonar-s sonar-scanner --version\r\n```\r\noutput\r\n```\r\nINFO: Scanner configuration file: /sonar-scanner-4.2.0.1873/conf/sonar-scanner.properties\r\nINFO: Project root configuration file: NONE\r\nINFO: SonarQube Scanner 4.2.0.1873\r\nINFO: Java 11.0.5 Alpine (64-bit)\r\nINFO: Linux 4.14.70-67.55.amzn1.x86_64 amd64\r\n```\r\n\r\n","title":"SonarScanner in Docker cannot find java","body":"<p>Add <code>JAVA_HOME</code> ENV according to version, as mentioned @cricket_007 the path in alpine for JDK is <code>/usr/lib/jvm/{VERSION}</code></p>\n\n<pre><code>ENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk\nENV PATH=\"$JAVA_HOME/bin:${PATH}\"  \nRUN echo $PATH\n</code></pre>\n\n<p>run docker</p>\n\n<pre><code>docker run --privileged -it --rm sonar-s sonar-scanner --version\n</code></pre>\n\n<p>output</p>\n\n<pre><code>INFO: Scanner configuration file: /sonar-scanner-4.2.0.1873/conf/sonar-scanner.properties\nINFO: Project root configuration file: NONE\nINFO: SonarQube Scanner 4.2.0.1873\nINFO: Java 11.0.5 Alpine (64-bit)\nINFO: Linux 4.14.70-67.55.amzn1.x86_64 amd64\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3543960,"reputation":915,"user_id":2960388,"display_name":"Golide"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690539842,"creation_date":1690539842,"answer_id":76786948,"question_id":59123167,"body_markdown":"This Dockerfile worked for me on .Net :\r\n\r\n    FROM mcr.microsoft.com/dotnet/sdk:6.0\r\n    RUN apt-get update\r\n    RUN apt-get install --yes openjdk-11-jre\r\n    RUN dotnet tool install --global dotnet-sonarscanner\r\n    RUN export ENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\r\n    RUN export ENV PATH=&quot;$JAVA_HOME/bin:${PATH}&quot; \r\n    RUN echo $PATH\r\n    RUN export ENV PATH=&quot;$PATH:/root/.dotnet/tools&quot;\r\n    RUN echo $PATH\r\n\r\nI had to run the image and exec into it to find the exact version ( **java-11-openjdk-amd6** in my case)","title":"SonarScanner in Docker cannot find java","body":"<p>This Dockerfile worked for me on .Net :</p>\n<pre><code>FROM mcr.microsoft.com/dotnet/sdk:6.0\nRUN apt-get update\nRUN apt-get install --yes openjdk-11-jre\nRUN dotnet tool install --global dotnet-sonarscanner\nRUN export ENV JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64\nRUN export ENV PATH=&quot;$JAVA_HOME/bin:${PATH}&quot; \nRUN echo $PATH\nRUN export ENV PATH=&quot;$PATH:/root/.dotnet/tools&quot;\nRUN echo $PATH\n</code></pre>\n<p>I had to run the image and exec into it to find the exact version ( <strong>java-11-openjdk-amd6</strong> in my case)</p>\n"}],"owner":{"account_id":110463,"reputation":85067,"user_id":292291,"accept_rate":86,"display_name":"Jiew Meng"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6267,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":59123276,"answer_count":2,"score":3,"last_activity_date":1690539842,"creation_date":1575182264,"question_id":59123167,"body_markdown":"I am trying to integrate SonarQube into my CI process. I tried to install SonarScanner in Docker, but it appears it cannot find java tho it can be run\r\n\r\n**Dockerfile**\r\n\r\n    # Docker, AWS CLI, Terraform, NodeJS\r\n    FROM docker:18-dind\r\n    RUN echo &quot;1&quot;\r\n    RUN echo &quot;http://dl-cdn.alpinelinux.org/alpine/edge/testing&quot; &gt;&gt; /etc/apk/repositories\r\n    RUN apk --no-cache add openjdk11 --repository=http://dl-cdn.alpinelinux.org/alpine/edge/community\r\n    RUN apk update\r\n    RUN apk add awscli nodejs nodejs-npm wget unzip jq openjdk11\r\n    RUN wget https://releases.hashicorp.com/terraform/0.11.13/terraform_0.11.13_linux_amd64.zip\r\n    RUN unzip terraform_0.11.13_linux_amd64.zip\r\n    RUN mv terraform /usr/local/bin\r\n    RUN npm i -g sequelize sequelize-cli mysql2\r\n    RUN wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.2.0.1873.zip\r\n    RUN unzip sonar-scanner-cli-4.2.0.1873.zip\r\n    RUN ls sonar-scanner-4.2.0.1873\r\n    ENV PATH=&quot;/sonar-scanner-4.2.0.1873/bin:${PATH}&quot;\r\n    RUN which java\r\n    ENV JAVA_HOME=/usr/bin\r\n    RUN echo $PATH\r\n    RUN java --version\r\n    RUN ls /sonar-scanner-4.2.0.1873/bin\r\n    RUN sonar-scanner --help\r\n\r\n**The logs**\r\n\r\n    Step 15/20 : RUN which java\r\n     ---&gt; Running in 96b487f5b44f\r\n    /usr/bin/java\r\n    Removing intermediate container 96b487f5b44f\r\n     ---&gt; 5026de427a57\r\n    Step 16/20 : ENV JAVA_HOME=/usr/bin\r\n     ---&gt; Running in 4d7eee221e41\r\n    Removing intermediate container 4d7eee221e41\r\n     ---&gt; 76b9a8b9d803\r\n    Step 17/20 : RUN echo $PATH\r\n     ---&gt; Running in 4278142f7153\r\n    /sonar-scanner-4.2.0.1873/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\r\n    Removing intermediate container 4278142f7153\r\n     ---&gt; c3d528bdaa7e\r\n    Step 18/20 : RUN java --version\r\n     ---&gt; Running in 7df7e2d8a441\r\n    openjdk 11.0.5 2019-10-15\r\n    OpenJDK Runtime Environment (build 11.0.5+10-alpine-r0)\r\n    OpenJDK 64-Bit Server VM (build 11.0.5+10-alpine-r0, mixed mode)\r\n    Removing intermediate container 7df7e2d8a441\r\n     ---&gt; 0f7162dae25d\r\n    Step 19/20 : RUN ls /sonar-scanner-4.2.0.1873/bin\r\n     ---&gt; Running in b7efb86cd86e\r\n    sonar-scanner\r\n    sonar-scanner-debug\r\n    sonar-scanner-debug.bat\r\n    sonar-scanner.bat\r\n    Removing intermediate container b7efb86cd86e\r\n     ---&gt; ff640a70876f\r\n    Step 20/20 : RUN sonar-scanner --help\r\n     ---&gt; Running in 9164ac2e8369\r\n    Could not find &#39;java&#39; executable in JAVA_HOME or PATH.\r\n    The command &#39;/bin/sh -c sonar-scanner --help&#39; returned a non-zero code: 1\r\n\r\nNotice `which java` gives `/usr/bin/java`. So I set `JAVA_HOME=/usr/bin`. `java` can run. But `sonar-scanner` cannot appear to find `java` ... why is that? ","title":"SonarScanner in Docker cannot find java","body":"<p>I am trying to integrate SonarQube into my CI process. I tried to install SonarScanner in Docker, but it appears it cannot find java tho it can be run</p>\n\n<p><strong>Dockerfile</strong></p>\n\n<pre><code># Docker, AWS CLI, Terraform, NodeJS\nFROM docker:18-dind\nRUN echo \"1\"\nRUN echo \"http://dl-cdn.alpinelinux.org/alpine/edge/testing\" &gt;&gt; /etc/apk/repositories\nRUN apk --no-cache add openjdk11 --repository=http://dl-cdn.alpinelinux.org/alpine/edge/community\nRUN apk update\nRUN apk add awscli nodejs nodejs-npm wget unzip jq openjdk11\nRUN wget https://releases.hashicorp.com/terraform/0.11.13/terraform_0.11.13_linux_amd64.zip\nRUN unzip terraform_0.11.13_linux_amd64.zip\nRUN mv terraform /usr/local/bin\nRUN npm i -g sequelize sequelize-cli mysql2\nRUN wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.2.0.1873.zip\nRUN unzip sonar-scanner-cli-4.2.0.1873.zip\nRUN ls sonar-scanner-4.2.0.1873\nENV PATH=\"/sonar-scanner-4.2.0.1873/bin:${PATH}\"\nRUN which java\nENV JAVA_HOME=/usr/bin\nRUN echo $PATH\nRUN java --version\nRUN ls /sonar-scanner-4.2.0.1873/bin\nRUN sonar-scanner --help\n</code></pre>\n\n<p><strong>The logs</strong></p>\n\n<pre><code>Step 15/20 : RUN which java\n ---&gt; Running in 96b487f5b44f\n/usr/bin/java\nRemoving intermediate container 96b487f5b44f\n ---&gt; 5026de427a57\nStep 16/20 : ENV JAVA_HOME=/usr/bin\n ---&gt; Running in 4d7eee221e41\nRemoving intermediate container 4d7eee221e41\n ---&gt; 76b9a8b9d803\nStep 17/20 : RUN echo $PATH\n ---&gt; Running in 4278142f7153\n/sonar-scanner-4.2.0.1873/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\nRemoving intermediate container 4278142f7153\n ---&gt; c3d528bdaa7e\nStep 18/20 : RUN java --version\n ---&gt; Running in 7df7e2d8a441\nopenjdk 11.0.5 2019-10-15\nOpenJDK Runtime Environment (build 11.0.5+10-alpine-r0)\nOpenJDK 64-Bit Server VM (build 11.0.5+10-alpine-r0, mixed mode)\nRemoving intermediate container 7df7e2d8a441\n ---&gt; 0f7162dae25d\nStep 19/20 : RUN ls /sonar-scanner-4.2.0.1873/bin\n ---&gt; Running in b7efb86cd86e\nsonar-scanner\nsonar-scanner-debug\nsonar-scanner-debug.bat\nsonar-scanner.bat\nRemoving intermediate container b7efb86cd86e\n ---&gt; ff640a70876f\nStep 20/20 : RUN sonar-scanner --help\n ---&gt; Running in 9164ac2e8369\nCould not find 'java' executable in JAVA_HOME or PATH.\nThe command '/bin/sh -c sonar-scanner --help' returned a non-zero code: 1\n</code></pre>\n\n<p>Notice <code>which java</code> gives <code>/usr/bin/java</code>. So I set <code>JAVA_HOME=/usr/bin</code>. <code>java</code> can run. But <code>sonar-scanner</code> cannot appear to find <code>java</code> ... why is that? </p>\n"},{"tags":["java","javafx","canvas","graphicscontext"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1690535280,"post_id":76786108,"comment_id":135370518,"body_markdown":"What does it actually mean to clear the line in this case?  Once you have cleared it, what is displayed in the place the line used to be?","body":"What does it actually mean to clear the line in this case?  Once you have cleared it, what is displayed in the place the line used to be?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1690535627,"post_id":76786108,"comment_id":135370595,"body_markdown":"[clearRect](https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/canvas/GraphicsContext.html#clearRect(double,double,double,double)) “Clears a portion of the canvas with a transparent color value.” -&gt; is that what you want to do?  Make the pixels where the line was transparent?","body":"<a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/canvas/GraphicsContext.html#clearRect(double,double,double,double)\" rel=\"nofollow noreferrer\">clearRect</a> “Clears a portion of the canvas with a transparent color value.” -&gt; is that what you want to do?  Make the pixels where the line was transparent?"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1690536219,"post_id":76786108,"comment_id":135370715,"body_markdown":"You could use a layer system like in the [tutorial](https://docs.oracle.com/javase/8/javafx/graphics-tutorial/canvas.htm). With each element you add a new layer, then hide or remove the layer you don’t want to show.  Maybe that doesn’t meet your “efficient” criteria though.  Similarly you could draw the line over the canvas using the scene graph, then it is easy to remove it from the scene graph when you want to.","body":"You could use a layer system like in the <a href=\"https://docs.oracle.com/javase/8/javafx/graphics-tutorial/canvas.htm\" rel=\"nofollow noreferrer\">tutorial</a>. With each element you add a new layer, then hide or remove the layer you don’t want to show.  Maybe that doesn’t meet your “efficient” criteria though.  Similarly you could draw the line over the canvas using the scene graph, then it is easy to remove it from the scene graph when you want to."},{"owner":{"account_id":27132096,"reputation":53,"user_id":20674162,"display_name":"nick16384"},"score":0,"creation_date":1690536406,"post_id":76786108,"comment_id":135370751,"body_markdown":"In this case, &quot;clearing&quot; means replacing the line pixels with whatever background color. I am actually planning to make a visual &quot;radar / sonar&quot; with a line sweeping from left to right and back, and in between I want to draw the scanned distance points connected with lines. I could redraw those every time, but that is inefficient.","body":"In this case, &quot;clearing&quot; means replacing the line pixels with whatever background color. I am actually planning to make a visual &quot;radar / sonar&quot; with a line sweeping from left to right and back, and in between I want to draw the scanned distance points connected with lines. I could redraw those every time, but that is inefficient."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1690537430,"post_id":76786108,"comment_id":135370976,"body_markdown":"Then just set the stroke to the background color and repaint the line. Or did I miss something?","body":"Then just set the stroke to the background color and repaint the line. Or did I miss something?"},{"owner":{"account_id":27132096,"reputation":53,"user_id":20674162,"display_name":"nick16384"},"score":0,"creation_date":1690537738,"post_id":76786108,"comment_id":135371056,"body_markdown":"I have thought of stroking the background color and repainting another line, but I thought that introduces memory problems, because the lines stack on top of each other. Am I right with this or is it rather a stupid assumption? And also: Thanks for your quick responses!","body":"I have thought of stroking the background color and repainting another line, but I thought that introduces memory problems, because the lines stack on top of each other. Am I right with this or is it rather a stupid assumption? And also: Thanks for your quick responses!"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1690540388,"post_id":76786108,"comment_id":135371558,"body_markdown":"*”I thought that introduces memory problems, because the lines stack on top of each other”* -&gt; No.  a canvas is not like the scene graph.  Elements are not retained in memory.  Instead the commands are buffered to a queue, and each pulse (up to 60 times a second) the command buffer is emptied by executing the commands and updating the pixel buffer backing the canvas, which is then rendered as a texture to the graphics device.  So you can draw on it as much as you want. It only retains a constant size  memory array for the pixels in the canvas over the long term.","body":"<i>”I thought that introduces memory problems, because the lines stack on top of each other”</i> -&gt; No.  a canvas is not like the scene graph.  Elements are not retained in memory.  Instead the commands are buffered to a queue, and each pulse (up to 60 times a second) the command buffer is emptied by executing the commands and updating the pixel buffer backing the canvas, which is then rendered as a texture to the graphics device.  So you can draw on it as much as you want. It only retains a constant size  memory array for the pixels in the canvas over the long term."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1690568777,"post_id":76786108,"comment_id":135377092,"body_markdown":"You may want to consider abandoning the `Canvas` approach and instead use the scene graph. Especially if you&#39;re going to have moving components (e.g., the line).","body":"You may want to consider abandoning the <code>Canvas</code> approach and instead use the scene graph. Especially if you&#39;re going to have moving components (e.g., the line)."}],"answers":[{"tags":[],"owner":{"account_id":27132096,"reputation":53,"user_id":20674162,"display_name":"nick16384"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690539574,"creation_date":1690539574,"answer_id":76786917,"question_id":76786108,"body_markdown":"Based on the comments on the question, this may be the answer:\r\n```\r\ngc.setStroke(backgroundColor);\r\ngc.strokeLine(10, 10, 200, 200);\r\ngc.setStroke(Color.GREEN)\r\n``` \r\n\r\nThis clears the line by drawing the same line in the `backgroundColor` over it, effectively removing it.","title":"How to clear an inclined rectangle in JavaFX Canvas efficiently?","body":"<p>Based on the comments on the question, this may be the answer:</p>\n<pre><code>gc.setStroke(backgroundColor);\ngc.strokeLine(10, 10, 200, 200);\ngc.setStroke(Color.GREEN)\n</code></pre>\n<p>This clears the line by drawing the same line in the <code>backgroundColor</code> over it, effectively removing it.</p>\n"}],"owner":{"account_id":27132096,"reputation":53,"user_id":20674162,"display_name":"nick16384"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76786917,"answer_count":1,"score":2,"last_activity_date":1690539574,"creation_date":1690533547,"question_id":76786108,"body_markdown":"Currently I have the following problem:\r\nI would like to draw a straight angled line in JavaFX Canvas like so (Recalling from memory so method names might not be accurate):\r\n```\r\nCanvas canvas = new Canvas(500, 600);\r\n\r\nGraphicsContext gc = canvas.getGraphicsContext2D();\r\n\r\ngc.setStroke(Color.GREEN);\r\n\r\ngc.setLineWidth(5.0);\r\n\r\ngc.strokeLine(10, 10, 200, 200);\r\n\r\n```\r\n\r\nNow when I want to clear this line, I could obviously clear the entire Canvas using\r\n`gc.clearRect(0, 0, canvas.getWidth(), canvas.getHeight());`\r\nbut that is clearing the entire canvas including other lines and points I may want to keep. Say, for example I have created a new point after the line:\r\n`gc.strokeOval(50, 20, 5, 5);`\r\nHow would I in one step clear only the line and not the point?\r\n\r\n\r\n\r\nHaving googled the problem already, I didn&#39;t find anything about exactly this. I am kind of expecting it just doesn&#39;t work but maybe some of you might find a workaround for this.\r\n\r\nI already tried searching for another method in `GraphicsContext` but were unsuccessful.","title":"How to clear an inclined rectangle in JavaFX Canvas efficiently?","body":"<p>Currently I have the following problem:\nI would like to draw a straight angled line in JavaFX Canvas like so (Recalling from memory so method names might not be accurate):</p>\n<pre><code>Canvas canvas = new Canvas(500, 600);\n\nGraphicsContext gc = canvas.getGraphicsContext2D();\n\ngc.setStroke(Color.GREEN);\n\ngc.setLineWidth(5.0);\n\ngc.strokeLine(10, 10, 200, 200);\n\n</code></pre>\n<p>Now when I want to clear this line, I could obviously clear the entire Canvas using\n<code>gc.clearRect(0, 0, canvas.getWidth(), canvas.getHeight());</code>\nbut that is clearing the entire canvas including other lines and points I may want to keep. Say, for example I have created a new point after the line:\n<code>gc.strokeOval(50, 20, 5, 5);</code>\nHow would I in one step clear only the line and not the point?</p>\n<p>Having googled the problem already, I didn't find anything about exactly this. I am kind of expecting it just doesn't work but maybe some of you might find a workaround for this.</p>\n<p>I already tried searching for another method in <code>GraphicsContext</code> but were unsuccessful.</p>\n"},{"tags":["java","scala","apache-spark","build"],"comments":[{"owner":{"account_id":10559728,"reputation":686,"user_id":7779865,"display_name":"Artem Astashov"},"score":1,"creation_date":1626784480,"post_id":68454769,"comment_id":120981072,"body_markdown":"Could you show your driver class?","body":"Could you show your driver class?"},{"owner":{"account_id":8761632,"reputation":22774,"user_id":6551426,"accept_rate":25,"display_name":"koiralo"},"score":2,"creation_date":1626784703,"post_id":68454769,"comment_id":120981166,"body_markdown":"can you also share your build.sbt file or pom.xm ?","body":"can you also share your build.sbt file or pom.xm ?"},{"owner":{"account_id":10553731,"reputation":824,"user_id":7775634,"accept_rate":83,"display_name":"chucklai"},"score":0,"creation_date":1626866661,"post_id":68454769,"comment_id":121004804,"body_markdown":"@ArtemAstashov sure no problem.","body":"@ArtemAstashov sure no problem."},{"owner":{"account_id":10553731,"reputation":824,"user_id":7775634,"accept_rate":83,"display_name":"chucklai"},"score":0,"creation_date":1626866727,"post_id":68454769,"comment_id":121004826,"body_markdown":"@koiralo I&#39;m not using sbt or maven. I imported libraries in project structure.","body":"@koiralo I&#39;m not using sbt or maven. I imported libraries in project structure."},{"owner":{"account_id":10559728,"reputation":686,"user_id":7779865,"display_name":"Artem Astashov"},"score":0,"creation_date":1626867853,"post_id":68454769,"comment_id":121005273,"body_markdown":"@chucklai did you try to run in this way: ./bin/spark-submit --class &quot;cn.tedu.wordcount.Driver&quot; /Users/laiyinan/Desktop/1902SparkDay01_jar.jar ?","body":"@chucklai did you try to run in this way: ./bin/spark-submit --class &quot;cn.tedu.wordcount.Driver&quot; /Users/laiyinan/Desktop/1902SparkDay01_jar.jar ?"},{"owner":{"account_id":10553731,"reputation":824,"user_id":7775634,"accept_rate":83,"display_name":"chucklai"},"score":0,"creation_date":1626869208,"post_id":68454769,"comment_id":121005933,"body_markdown":"@ArtemAstashov I just tried. It doesn&#39;t work neither.","body":"@ArtemAstashov I just tried. It doesn&#39;t work neither."},{"owner":{"account_id":10559728,"reputation":686,"user_id":7779865,"display_name":"Artem Astashov"},"score":0,"creation_date":1626870341,"post_id":68454769,"comment_id":121006465,"body_markdown":"@chucklai ok, how do you build your jar?","body":"@chucklai ok, how do you build your jar?"},{"owner":{"account_id":10553731,"reputation":824,"user_id":7775634,"accept_rate":83,"display_name":"chucklai"},"score":0,"creation_date":1626871426,"post_id":68454769,"comment_id":121006953,"body_markdown":"@ArtemAstashov import scala sdk-&gt;add actifects, using type Jar-&gt;build actifects-&gt;A jar file in class folder","body":"@ArtemAstashov import scala sdk-&gt;add actifects, using type Jar-&gt;build actifects-&gt;A jar file in class folder"}],"answers":[{"tags":[],"owner":{"account_id":4682995,"reputation":357,"user_id":3791224,"display_name":"ekrich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627261896,"creation_date":1627261896,"answer_id":68523572,"question_id":68454769,"body_markdown":"I would highly suggest using `sbt` to build and also use `sbt-assembly` plugin to make your application jar.\r\n\r\nhttps://github.com/sbt/sbt-assembly","title":"How to solve spark-submit error:Error: Failed to load class?","body":"<p>I would highly suggest using <code>sbt</code> to build and also use <code>sbt-assembly</code> plugin to make your application jar.</p>\n<p><a href=\"https://github.com/sbt/sbt-assembly\" rel=\"nofollow noreferrer\">https://github.com/sbt/sbt-assembly</a></p>\n"}],"owner":{"account_id":10553731,"reputation":824,"user_id":7775634,"accept_rate":83,"display_name":"chucklai"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":716,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690539462,"creation_date":1626783485,"question_id":68454769,"body_markdown":"I wrote a scala file as:\r\n\r\n    package cn.tedu.wordcount\r\n\r\n    import org.apache.spark.SparkConf\r\n    import org.apache.spark.SparkContext\r\n    \r\n    object Driver {\r\n      \r\n      def main(args: Array[String]): Unit = {\r\n        \r\n        val conf=new SparkConf().setMaster(&quot;local&quot;).setAppName(&quot;wordcount&quot;)\r\n        \r\n        val sc=new SparkContext(conf)\r\n        \r\n        val data=sc.textFile(&quot;/Users/laiyinan/OneDrive/文档/书籍/大数据/达内BIG/大数据/大数据第四阶段/06-Spark/spark第一天/课后作业/data/word.txt&quot;, 2)\r\n    \r\n        val result=data.flatMap { _.split(&quot; &quot;)}\r\n                       .map {(_,1)}.reduceByKey{_+_}\r\n        \r\n        result.foreach{println}               \r\n      }\r\n    }\r\n\r\n\r\nAnd I submit it into spark using the command:\r\n\r\n    ./bin/spark-submit --class &quot;cn.tedu.wordcount.Driver&quot; /Users/laiyinan/Desktop/1902SparkDay01_jar.jar \r\n\r\nI got this error every time:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n&gt; Error:Failed to load class cn.tedu.wordcount.Driver\r\n\r\nI use Intellij Idea to build artefacts. Package path and class name are correct.\r\n\r\nI’ve already tries some solutions, but none of them can fix it.\r\n\r\n  [1]: https://i.stack.imgur.com/n2oD7.jpg","title":"How to solve spark-submit error:Error: Failed to load class?","body":"<p>I wrote a scala file as:</p>\n<pre><code>package cn.tedu.wordcount\n\nimport org.apache.spark.SparkConf\nimport org.apache.spark.SparkContext\n\nobject Driver {\n  \n  def main(args: Array[String]): Unit = {\n    \n    val conf=new SparkConf().setMaster(&quot;local&quot;).setAppName(&quot;wordcount&quot;)\n    \n    val sc=new SparkContext(conf)\n    \n    val data=sc.textFile(&quot;/Users/laiyinan/OneDrive/文档/书籍/大数据/达内BIG/大数据/大数据第四阶段/06-Spark/spark第一天/课后作业/data/word.txt&quot;, 2)\n\n    val result=data.flatMap { _.split(&quot; &quot;)}\n                   .map {(_,1)}.reduceByKey{_+_}\n    \n    result.foreach{println}               \n  }\n}\n</code></pre>\n<p>And I submit it into spark using the command:</p>\n<pre><code>./bin/spark-submit --class &quot;cn.tedu.wordcount.Driver&quot; /Users/laiyinan/Desktop/1902SparkDay01_jar.jar \n</code></pre>\n<p>I got this error every time:</p>\n<p><a href=\"https://i.stack.imgur.com/n2oD7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n2oD7.jpg\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>Error:Failed to load class cn.tedu.wordcount.Driver</p>\n</blockquote>\n<p>I use Intellij Idea to build artefacts. Package path and class name are correct.</p>\n<p>I’ve already tries some solutions, but none of them can fix it.</p>\n"},{"tags":["java","spring","mongodb"],"comments":[{"owner":{"account_id":406358,"reputation":1944,"user_id":775823,"accept_rate":100,"display_name":"Ravi Khakhkhar"},"score":0,"creation_date":1339744529,"post_id":11046105,"comment_id":14449076,"body_markdown":"You can use `limit()` function to limit the function to retrieve data in chunks","body":"You can use <code>limit()</code> function to limit the function to retrieve data in chunks"},{"owner":{"account_id":238552,"reputation":84579,"user_id":507519,"accept_rate":86,"display_name":"thkala"},"score":0,"creation_date":1339746059,"post_id":11046105,"comment_id":14449650,"body_markdown":"I am not familiar with the framework that you are using, but I would find it very strange if it does not have some wrapper for MongoDB&#39;s cursors. Are you sure that what you are getting is an `ArrayList`, and not a custom `List` implementation that wraps around a cursor?","body":"I am not familiar with the framework that you are using, but I would find it very strange if it does not have some wrapper for MongoDB&#39;s cursors. Are you sure that what you are getting is an <code>ArrayList</code>, and not a custom <code>List</code> implementation that wraps around a cursor?"},{"owner":{"account_id":1105626,"reputation":2710,"user_id":1097074,"accept_rate":44,"display_name":"Rodion Gorkovenko"},"score":2,"creation_date":1339748294,"post_id":11046105,"comment_id":14450353,"body_markdown":"yes, surely - I&#39;ve just logged its findAll().getClass() for collection of about 3 millions and I think I saw java.util.ArrayList...","body":"yes, surely - I&#39;ve just logged its findAll().getClass() for collection of about 3 millions and I think I saw java.util.ArrayList..."},{"owner":{"account_id":7041303,"reputation":131,"user_id":5393714,"display_name":"Andi"},"score":1,"creation_date":1608330412,"post_id":11046105,"comment_id":115560373,"body_markdown":"Since spring boot 2 you can use streamAllBy() to only load one entry at a time.","body":"Since spring boot 2 you can use streamAllBy() to only load one entry at a time."}],"answers":[{"tags":[],"owner":{"account_id":1730446,"reputation":7868,"user_id":1584167,"display_name":"udalmik"},"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1571148756,"creation_date":1346345927,"answer_id":12201890,"question_id":11046105,"body_markdown":"Late response, but maybe will help someone in the future. Spring data doesn&#39;t provide any API to wrap **Mongo DB Cursor** capabilities. It uses it within `find` methods, but always returns completed list of objects. Options are to use Mongo API directly or to use **Spring Data Paging API**, something like that:\r\n\r\n            final int pageLimit = 300;\r\n            int pageNumber = 0;\r\n            Page&lt;T&gt; page = repository.findAll(new PageRequest(pageNumber, pageLimit));\r\n            while (page.hasNextPage()) {\r\n                processPageContent(page.getContent());\r\n                page = repository.findAll(new PageRequest(++pageNumber, pageLimit));\r\n            }\r\n            // process last page\r\n            processPageContent(page.getContent());\r\n\r\n**UPD (!)** This method is **not sufficient** for large sets of data (see @Shawn Bush comments) Please use Mongo API directly for such cases.","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>Late response, but maybe will help someone in the future. Spring data doesn't provide any API to wrap <strong>Mongo DB Cursor</strong> capabilities. It uses it within <code>find</code> methods, but always returns completed list of objects. Options are to use Mongo API directly or to use <strong>Spring Data Paging API</strong>, something like that:</p>\n\n<pre><code>        final int pageLimit = 300;\n        int pageNumber = 0;\n        Page&lt;T&gt; page = repository.findAll(new PageRequest(pageNumber, pageLimit));\n        while (page.hasNextPage()) {\n            processPageContent(page.getContent());\n            page = repository.findAll(new PageRequest(++pageNumber, pageLimit));\n        }\n        // process last page\n        processPageContent(page.getContent());\n</code></pre>\n\n<p><strong>UPD (!)</strong> This method is <strong>not sufficient</strong> for large sets of data (see @Shawn Bush comments) Please use Mongo API directly for such cases.</p>\n"},{"tags":[],"owner":{"account_id":146308,"reputation":1587,"user_id":356677,"accept_rate":81,"display_name":"ramon_salla"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1396006447,"creation_date":1396006447,"answer_id":22711715,"question_id":11046105,"body_markdown":"Another way:\r\n\r\n    do{\r\n      page = repository.findAll(new PageRequest(pageNumber, pageLimit));\r\n      pageNumber++;\r\n    \t     \r\n    }while (!page.isLastPage());\r\n\t\t","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>Another way:</p>\n\n<pre><code>do{\n  page = repository.findAll(new PageRequest(pageNumber, pageLimit));\n  pageNumber++;\n\n}while (!page.isLastPage());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":146308,"reputation":1587,"user_id":356677,"accept_rate":81,"display_name":"ramon_salla"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1412672305,"creation_date":1412672305,"answer_id":26232280,"question_id":11046105,"body_markdown":"Check new method to handle results per document basis.\r\n\r\n[http://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/MongoTemplate.html#executeQuery-org.springframework.data.mongodb.core.query.Query-java.lang.String-org.springframework.data.mongodb.core.DocumentCallbackHandler-][1]\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/MongoTemplate.html#executeQuery-org.springframework.data.mongodb.core.query.Query-java.lang.String-org.springframework.data.mongodb.core.DocumentCallbackHandler-","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>Check new method to handle results per document basis.</p>\n\n<p><a href=\"http://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/MongoTemplate.html#executeQuery-org.springframework.data.mongodb.core.query.Query-java.lang.String-org.springframework.data.mongodb.core.DocumentCallbackHandler-\" rel=\"nofollow\">http://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/MongoTemplate.html#executeQuery-org.springframework.data.mongodb.core.query.Query-java.lang.String-org.springframework.data.mongodb.core.DocumentCallbackHandler-</a></p>\n"},{"tags":[],"owner":{"account_id":3169412,"reputation":1083,"user_id":2678757,"display_name":"Segabond"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1441296803,"creation_date":1441296803,"answer_id":32380698,"question_id":11046105,"body_markdown":"Use MongoTemplate::stream() as probably the most appropriate Java wrapper to DBCursor","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>Use MongoTemplate::stream() as probably the most appropriate Java wrapper to DBCursor</p>\n"},{"tags":[],"owner":{"account_id":194080,"reputation":998,"user_id":436183,"accept_rate":75,"display_name":"Jeryl Cook"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1489613025,"creation_date":1462110927,"answer_id":36967466,"question_id":11046105,"body_markdown":"you can still use mongoTemplate to access the Collection and simply use DBCursor:\r\n\r\n         DBCollection collection = mongoTemplate.getCollection(&quot;boundary&quot;);\r\n    \t DBCursor cursor = collection.find();    \t \r\n    \t while(cursor.hasNext()){\r\n    \t\t DBObject obj = cursor.next();\r\n    \t\t Object object =  obj.get(&quot;polygons&quot;);\r\n    \t\t ..\r\n          ...\r\n    \t }","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>you can still use mongoTemplate to access the Collection and simply use DBCursor:</p>\n\n<pre><code>     DBCollection collection = mongoTemplate.getCollection(\"boundary\");\n     DBCursor cursor = collection.find();        \n     while(cursor.hasNext()){\n         DBObject obj = cursor.next();\n         Object object =  obj.get(\"polygons\");\n         ..\n      ...\n     }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6323824,"reputation":1258,"user_id":4910851,"accept_rate":50,"display_name":"Clement.Xu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1487145260,"creation_date":1487145260,"answer_id":42243537,"question_id":11046105,"body_markdown":"You may want to try the DBCursor way like this:\r\n\r\n    \tDBObject query = new BasicDBObject(); //setup the query criteria\r\n\t\tquery.put(&quot;method&quot;, method);\r\n\t\tquery.put(&quot;ctime&quot;, (new BasicDBObject(&quot;$gte&quot;, bTime)).append(&quot;$lt&quot;, eTime));\r\n\r\n\t\tlogger.debug(&quot;query: {}&quot;, query);\r\n\r\n\t\tDBObject fields = new BasicDBObject(); //only get the needed fields.\r\n\t\tfields.put(&quot;_id&quot;, 0);\r\n\t\tfields.put(&quot;uId&quot;, 1);\r\n\t\tfields.put(&quot;ctime&quot;, 1);\r\n\r\n\t\tDBCursor dbCursor = mongoTemplate.getCollection(&quot;collectionName&quot;).find(query, fields);\r\n\r\n\t\twhile (dbCursor.hasNext()){\r\n\t\t\tDBObject object = dbCursor.next();\r\n\t\t\tlogger.debug(&quot;object: {}&quot;, object);\r\n\t\t\t//do something.\r\n\t\t}","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>You may want to try the DBCursor way like this:</p>\n\n<pre><code>    DBObject query = new BasicDBObject(); //setup the query criteria\n    query.put(\"method\", method);\n    query.put(\"ctime\", (new BasicDBObject(\"$gte\", bTime)).append(\"$lt\", eTime));\n\n    logger.debug(\"query: {}\", query);\n\n    DBObject fields = new BasicDBObject(); //only get the needed fields.\n    fields.put(\"_id\", 0);\n    fields.put(\"uId\", 1);\n    fields.put(\"ctime\", 1);\n\n    DBCursor dbCursor = mongoTemplate.getCollection(\"collectionName\").find(query, fields);\n\n    while (dbCursor.hasNext()){\n        DBObject object = dbCursor.next();\n        logger.debug(\"object: {}\", object);\n        //do something.\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6147033,"reputation":339,"user_id":4792667,"display_name":"Maysam Mok"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1639757307,"creation_date":1501792152,"answer_id":45493993,"question_id":11046105,"body_markdown":"*Since this question got bumped recently, this answer needs some more love!*\r\n\r\nIf you use Spring Data Repository interfaces, you can declare a custom method that returns a Stream, and it will be implemented by Spring Data using cursors:\r\n\r\n    import java.util.Stream;\r\n\r\n    public interface AlarmRepository extends CrudRepository&lt;Alarm, String&gt; {\r\n\r\n        Stream&lt;Alarm&gt; findAllBy();\r\n\r\n    }\r\n\r\nSo for the large amount of data you can stream them and process the line by line without memory limitation.\r\n\r\nSee https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mongodb.repositories.queries","title":"Iterate over large collection in MongoDB via spring-data","body":"<p><em>Since this question got bumped recently, this answer needs some more love!</em></p>\n<p>If you use Spring Data Repository interfaces, you can declare a custom method that returns a Stream, and it will be implemented by Spring Data using cursors:</p>\n<pre><code>import java.util.Stream;\n\npublic interface AlarmRepository extends CrudRepository&lt;Alarm, String&gt; {\n\n    Stream&lt;Alarm&gt; findAllBy();\n\n}\n</code></pre>\n<p>So for the large amount of data you can stream them and process the line by line without memory limitation.</p>\n<p>See <a href=\"https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mongodb.repositories.queries\" rel=\"noreferrer\">https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#mongodb.repositories.queries</a></p>\n"},{"tags":[],"owner":{"account_id":13095413,"reputation":1,"user_id":9461473,"display_name":"Abhilash Mishra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1623096012,"creation_date":1623095324,"answer_id":67877867,"question_id":11046105,"body_markdown":"The best way to iterator over a large collection is to use the Mongo API directly. I used the below code and it worked like a charm for my use-case.&lt;br&gt;\r\nI had to iterate over more than 15M records and the document size was huge for some of those.&lt;br&gt;\r\nThe following code is in Kotlin Spring Boot App (Spring Boot Version: 2.4.5)&lt;br&gt;\r\n    \r\n\r\n    fun getAbcCursor(batchSize: Int, from: Long?, to: Long?): MongoCursor&lt;Document&gt; {\r\n    \r\n        val collection = xyzMongoTemplate.getCollection(&quot;abc&quot;)\r\n        val query = Document(&quot;field1&quot;, &quot;value1&quot;)\r\n        if (from != null) {\r\n            val fromDate = Date(from)\r\n            val toDate = if (to != null) { Date(to) } else { Date() }\r\n            query.append(\r\n                &quot;createTime&quot;,\r\n                Document(\r\n                    &quot;\\$gte&quot;, fromDate\r\n                ).append(\r\n                    &quot;\\$lte&quot;, toDate\r\n                )\r\n            )\r\n        }\r\n        return collection.find(query).batchSize(batchSize).iterator()\r\n    }\r\n\r\nThen, from a service layer method, you can just keep calling MongoCursor.next() on returned cursor till MongoCursor.hasNext() returns true.&lt;br&gt;&lt;br&gt;\r\n**An Important Observation**: Please do not miss adding batchSize on &#39;FindIterable&#39; (the return type of MongoCollection.find()). If you won&#39;t provide the batch size, the cursor will fetch initial 101 records and will hang after that (it tries to fetch all the remaining records at once).&lt;br&gt;\r\nFor my scenario, I used the batch size as 2000, as it gave the best results during testing. This optimized batch size will be impacted by the average size of your records.&lt;br&gt;&lt;br&gt;\r\nHere is the equivalent code in Java (removing createTime from query as it is specific to my data model).\r\n\r\n        MongoCursor&lt;Document&gt; getAbcCursor(Int batchSize) {\r\n            MongoCollection&lt;Document&gt; collection = xyzMongoTemplate.getCollection(&quot;your_collection_name&quot;);\r\n            Document query = new Document(&quot;field1&quot;, &quot;value1&quot;);// query --&gt; {&quot;field1&quot;: &quot;value1&quot;}\r\n            return collection.find(query).batchSize(batchSize).iterator();\r\n        }","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>The best way to iterator over a large collection is to use the Mongo API directly. I used the below code and it worked like a charm for my use-case.<br>\nI had to iterate over more than 15M records and the document size was huge for some of those.<br>\nThe following code is in Kotlin Spring Boot App (Spring Boot Version: 2.4.5)<br></p>\n<pre><code>fun getAbcCursor(batchSize: Int, from: Long?, to: Long?): MongoCursor&lt;Document&gt; {\n\n    val collection = xyzMongoTemplate.getCollection(&quot;abc&quot;)\n    val query = Document(&quot;field1&quot;, &quot;value1&quot;)\n    if (from != null) {\n        val fromDate = Date(from)\n        val toDate = if (to != null) { Date(to) } else { Date() }\n        query.append(\n            &quot;createTime&quot;,\n            Document(\n                &quot;\\$gte&quot;, fromDate\n            ).append(\n                &quot;\\$lte&quot;, toDate\n            )\n        )\n    }\n    return collection.find(query).batchSize(batchSize).iterator()\n}\n</code></pre>\n<p>Then, from a service layer method, you can just keep calling MongoCursor.next() on returned cursor till MongoCursor.hasNext() returns true.<br><br>\n<strong>An Important Observation</strong>: Please do not miss adding batchSize on 'FindIterable' (the return type of MongoCollection.find()). If you won't provide the batch size, the cursor will fetch initial 101 records and will hang after that (it tries to fetch all the remaining records at once).<br>\nFor my scenario, I used the batch size as 2000, as it gave the best results during testing. This optimized batch size will be impacted by the average size of your records.<br><br>\nHere is the equivalent code in Java (removing createTime from query as it is specific to my data model).</p>\n<pre><code>    MongoCursor&lt;Document&gt; getAbcCursor(Int batchSize) {\n        MongoCollection&lt;Document&gt; collection = xyzMongoTemplate.getCollection(&quot;your_collection_name&quot;);\n        Document query = new Document(&quot;field1&quot;, &quot;value1&quot;);// query --&gt; {&quot;field1&quot;: &quot;value1&quot;}\n        return collection.find(query).batchSize(batchSize).iterator();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7388280,"reputation":438,"user_id":5622596,"display_name":"jspek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639754746,"creation_date":1639664721,"answer_id":70380668,"question_id":11046105,"body_markdown":"This answer is based on: https://stackoverflow.com/a/22711715/5622596\r\n\r\nThat answer needs a bit of an update as `PageRequest` has changed how it is being constructed. \r\n\r\nWith that said here is my modified response:\r\n\r\n```Java\r\nint pageNumber = 1;\r\n\r\n//Change value to whatever size you want the page to have\r\nint pageLimit = 100;\r\n\r\nPage&lt;SomeClass&gt; page;\r\nList&lt;SomeClass&gt; compondList= new LinkedList&lt;&gt;();\r\n\r\ndo{\r\n    PageRequest pageRequest = PageRequest.of(pageNumber, pageLimit);\r\n    \r\n    page = repository.findAll(pageRequest);\r\n    \r\n    List&lt;SomeClass&gt; listFromPage = page.getContent();\r\n\r\n    //Do something with this list example below\r\n    compondList.addAll(listFromPage);\r\n\r\n    pageNumber++;\r\n\r\n  }while (!page.isLast());\r\n\r\n//Do something with the compondList: example below\r\nreturn compondList;\r\n\r\n```","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>This answer is based on: <a href=\"https://stackoverflow.com/a/22711715/5622596\">https://stackoverflow.com/a/22711715/5622596</a></p>\n<p>That answer needs a bit of an update as <code>PageRequest</code> has changed how it is being constructed.</p>\n<p>With that said here is my modified response:</p>\n<pre><code>int pageNumber = 1;\n\n//Change value to whatever size you want the page to have\nint pageLimit = 100;\n\nPage&lt;SomeClass&gt; page;\nList&lt;SomeClass&gt; compondList= new LinkedList&lt;&gt;();\n\ndo{\n    PageRequest pageRequest = PageRequest.of(pageNumber, pageLimit);\n    \n    page = repository.findAll(pageRequest);\n    \n    List&lt;SomeClass&gt; listFromPage = page.getContent();\n\n    //Do something with this list example below\n    compondList.addAll(listFromPage);\n\n    pageNumber++;\n\n  }while (!page.isLast());\n\n//Do something with the compondList: example below\nreturn compondList;\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3648854,"reputation":11,"user_id":3041482,"display_name":"Florian F."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690539246,"creation_date":1690539246,"answer_id":76786863,"question_id":11046105,"body_markdown":"Du to Mongo DB Cursor capabilities, if you have long process, you can lost cursor...\r\n\r\nI recommend to use paging : \r\n```\r\n        final int pageSize = 1000;\r\n        var paging = Pageable.ofSize(pageSize);\r\n        do {\r\n            Page&lt;T&gt; page = repository.findAll(paging); // Retrieve page items\r\n            page.forEach((item) -&gt; this.processItem(item);); // Do item job\r\n            \r\n            // page++\r\n            paging = page.nextPageable(); // If last: return Pageable.unpaged()\r\n        }\r\n        while (paging.isPaged()); // If last: Unpaged.isPaged() return false\r\n```\r\nAnd for repository, 2 options: \r\n```\r\n    // Use Spring Data Interface\r\n    @Repository\r\n    public interface YourDao extends PagingAndSortingRepository&lt;T, ID&gt; {\r\n        // extends create this impl\r\n        // Page&lt;T&gt; findAll(Pageable pageable);\r\n    }\r\n\r\n    // Or create your own Impl\r\n    public class YourDaoImpl implements YourDao {\r\n        @Override\r\n        public Page&lt;T&gt; findAll(Pageable pageable) {\r\n            final var query = new Query().with(pageable);\r\n            var items = mongoTemplate.find(query, T.class);\r\n            return PageableExecutionUtils.getPage(\r\n                  items, \r\n                  pageable, \r\n                  () -&gt; mongoTemplate.count(Query.of(query).limit(-1).skip(-1), T.class));\r\n        }\r\n    }\r\n```","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>Du to Mongo DB Cursor capabilities, if you have long process, you can lost cursor...</p>\n<p>I recommend to use paging :</p>\n<pre><code>        final int pageSize = 1000;\n        var paging = Pageable.ofSize(pageSize);\n        do {\n            Page&lt;T&gt; page = repository.findAll(paging); // Retrieve page items\n            page.forEach((item) -&gt; this.processItem(item);); // Do item job\n            \n            // page++\n            paging = page.nextPageable(); // If last: return Pageable.unpaged()\n        }\n        while (paging.isPaged()); // If last: Unpaged.isPaged() return false\n</code></pre>\n<p>And for repository, 2 options:</p>\n<pre><code>    // Use Spring Data Interface\n    @Repository\n    public interface YourDao extends PagingAndSortingRepository&lt;T, ID&gt; {\n        // extends create this impl\n        // Page&lt;T&gt; findAll(Pageable pageable);\n    }\n\n    // Or create your own Impl\n    public class YourDaoImpl implements YourDao {\n        @Override\n        public Page&lt;T&gt; findAll(Pageable pageable) {\n            final var query = new Query().with(pageable);\n            var items = mongoTemplate.find(query, T.class);\n            return PageableExecutionUtils.getPage(\n                  items, \n                  pageable, \n                  () -&gt; mongoTemplate.count(Query.of(query).limit(-1).skip(-1), T.class));\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":1105626,"reputation":2710,"user_id":1097074,"accept_rate":44,"display_name":"Rodion Gorkovenko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44020,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"answer_count":10,"score":35,"last_activity_date":1690539246,"creation_date":1339744051,"question_id":11046105,"body_markdown":"Friends!\r\n\r\nI am using MongoDB in java project via spring-data. I use Repository interfaces to access data in collections. For some processing I need to iterate over all elements of collection. I can use fetchAll method of repository, but it always return ArrayList.\r\n\r\nHowever, it is supposed that one of collections would be large - up to 1 million records several kilobytes each at least. I suppose I should not use fetchAll in such cases, but I could not find neither convenient methods returning some iterator (which may allow collection to be fetched partially), nor convenient methods with callbacks.\r\n\r\nI&#39;ve seen only support for retrieving such collections in pages. I wonder whether it is the only way for working with such collections?","title":"Iterate over large collection in MongoDB via spring-data","body":"<p>Friends!</p>\n\n<p>I am using MongoDB in java project via spring-data. I use Repository interfaces to access data in collections. For some processing I need to iterate over all elements of collection. I can use fetchAll method of repository, but it always return ArrayList.</p>\n\n<p>However, it is supposed that one of collections would be large - up to 1 million records several kilobytes each at least. I suppose I should not use fetchAll in such cases, but I could not find neither convenient methods returning some iterator (which may allow collection to be fetched partially), nor convenient methods with callbacks.</p>\n\n<p>I've seen only support for retrieving such collections in pages. I wonder whether it is the only way for working with such collections?</p>\n"},{"tags":["java","flutter","dart"],"answers":[{"tags":[],"owner":{"account_id":18460784,"reputation":829,"user_id":19992458,"display_name":"Nguyen family"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689923883,"creation_date":1689923883,"answer_id":76735896,"question_id":76735183,"body_markdown":"First, you should try to run the warning commands in section &quot;Android toolchain&quot;. Seconds, switch to JDK 11 by following the steps in this https://stackoverflow.com/questions/66980512/android-studio-error-android-gradle-plugin-requires-java-11-to-run-you-are-cur/67002271#67002271. After done, clear cache &amp; restart Android Studio, then your computer. Hope this help :)\r\n","title":"Java 11 error in flutter project in visual studio code","body":"<p>First, you should try to run the warning commands in section &quot;Android toolchain&quot;. Seconds, switch to JDK 11 by following the steps in this <a href=\"https://stackoverflow.com/questions/66980512/android-studio-error-android-gradle-plugin-requires-java-11-to-run-you-are-cur/67002271#67002271\">Android Studio Error &quot;Android Gradle plugin requires Java 11 to run. You are currently using Java 1.8&quot;</a>. After done, clear cache &amp; restart Android Studio, then your computer. Hope this help :)</p>\n"}],"owner":{"account_id":19998954,"reputation":88,"user_id":14658343,"display_name":"Mahmoud ashraf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690539185,"creation_date":1689914905,"question_id":76735183,"body_markdown":"I am facing this error and after research, I found that I have to install Java 11 or higher after installing it the error still has not gone \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  \r\n\r\nand this is the current version of Java that I have installed \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n[![enter image description here][4]][4]\r\n\r\nand this is JAVA_HOME variable \r\n\r\n\r\n[![enter image description here][5]][5]\r\n\r\nand i have tried to change the java jdk location but it is still being this path cannot be changed after apply and clicking ok it returned to this path and did not changed \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rpDqI.png\r\n  [2]: https://i.stack.imgur.com/mgVNA.png\r\n  [3]: https://i.stack.imgur.com/a7YnN.png\r\n  [4]: https://i.stack.imgur.com/hzpHk.png\r\n  [5]: https://i.stack.imgur.com/AWowM.png","title":"Java 11 error in flutter project in visual studio code","body":"<p>I am facing this error and after research, I found that I have to install Java 11 or higher after installing it the error still has not gone</p>\n<p><a href=\"https://i.stack.imgur.com/rpDqI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rpDqI.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/mgVNA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mgVNA.png\" alt=\"enter image description here\" /></a></p>\n<p>and this is the current version of Java that I have installed</p>\n<p><a href=\"https://i.stack.imgur.com/a7YnN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a7YnN.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/hzpHk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hzpHk.png\" alt=\"enter image description here\" /></a></p>\n<p>and this is JAVA_HOME variable</p>\n<p><a href=\"https://i.stack.imgur.com/AWowM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AWowM.png\" alt=\"enter image description here\" /></a></p>\n<p>and i have tried to change the java jdk location but it is still being this path cannot be changed after apply and clicking ok it returned to this path and did not changed</p>\n"},{"tags":["java","kubernetes","openshift","open-telemetry","kubernetes-operator"],"comments":[{"owner":{"account_id":111923,"reputation":649,"user_id":295416,"display_name":"trask"},"score":0,"creation_date":1690395017,"post_id":76773214,"comment_id":135349079,"body_markdown":"any chance you&#39;re running dynatrace in that environment? your issue reminds me of https://github.com/open-telemetry/opentelemetry-java-instrumentation/issues/5885","body":"any chance you&#39;re running dynatrace in that environment? your issue reminds me of <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/issues/5885\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java-instrumentation&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":29096331,"reputation":9,"user_id":22289153,"display_name":"FelipeKT"},"score":0,"creation_date":1690399220,"post_id":76773214,"comment_id":135349833,"body_markdown":"Yes, we have a dynatrace agent in the environment.\nI guess that&#39;s what&#39;s going on then.\nThank you so much!","body":"Yes, we have a dynatrace agent in the environment. I guess that&#39;s what&#39;s going on then. Thank you so much!"}],"answers":[{"tags":[],"owner":{"account_id":12845213,"reputation":2303,"user_id":9291851,"display_name":"Juliano Costa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690538987,"creation_date":1690538987,"answer_id":76786836,"question_id":76773214,"body_markdown":"The OneAgent does not disable any opentelemetry-modules. The spans exported by the OpenTelemetry agent will look exactly like the OneAgent isn&#39;t present at all. The OneAgent just won&#39;t integrate spans from certain otel-agent-modules into its own distributed traces structure.\r\n\r\nSo, we don&#39;t suppress the OTel Java agent from creating all the spans it needs to and then sending them to whatever exporters are configured. That will work and we don&#39;t touch the spans generated/created. \r\n\r\nWhich means that in e.g. Jaeger, you will see all the spans as if the OneAgent was not present.\r\n\r\nHowever, if you have the Dynatrace OTel code module integration enabled, the spans that the OA ingests via the code module (NOT by the OTel exporter) will be missing certain instrumentation libraries that we know the OA is already instrumenting well - such as HTTP).\r\n\r\nSo, we do suppress some spans, but this will only be visible inside Dynatrace, when we use the code module ingestion. Whatever exporter you have configured on the OTel Java agent is unaffected by this.\r\n\r\nThis is basically to avoid double tracing and a lot of duplicated spans in your Distributed Trace view.","title":"Most OpenTelemetry instrumentations are disabled in my Spring application","body":"<p>The OneAgent does not disable any opentelemetry-modules. The spans exported by the OpenTelemetry agent will look exactly like the OneAgent isn't present at all. The OneAgent just won't integrate spans from certain otel-agent-modules into its own distributed traces structure.</p>\n<p>So, we don't suppress the OTel Java agent from creating all the spans it needs to and then sending them to whatever exporters are configured. That will work and we don't touch the spans generated/created.</p>\n<p>Which means that in e.g. Jaeger, you will see all the spans as if the OneAgent was not present.</p>\n<p>However, if you have the Dynatrace OTel code module integration enabled, the spans that the OA ingests via the code module (NOT by the OTel exporter) will be missing certain instrumentation libraries that we know the OA is already instrumenting well - such as HTTP).</p>\n<p>So, we do suppress some spans, but this will only be visible inside Dynatrace, when we use the code module ingestion. Whatever exporter you have configured on the OTel Java agent is unaffected by this.</p>\n<p>This is basically to avoid double tracing and a lot of duplicated spans in your Distributed Trace view.</p>\n"}],"owner":{"account_id":29096331,"reputation":9,"user_id":22289153,"display_name":"FelipeKT"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":454,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690538987,"creation_date":1690387954,"question_id":76773214,"body_markdown":"I have injected an OpenTelemetry JAVA agent in a Spring application in OpenShift via kubernetes operator, but most instrumentations are disabled and not generating traces.\r\n\r\nOpenTelemetry Agent image: ghcr.io/open-telemetry/opentelemetry-operator/autoinstrumentation-java:1.28.0\r\n\r\nJAVA version: openjdk 11.0.15\r\n\r\nKubernetes version: v1.25.10+3fe2906\r\n\r\nAfter setting OTEL_JAVAAGENT_DEBUG to true, I see most instrumentations are disabled:\r\n```\r\n...\r\n[otel.javaagent 2023-07-26 11:36:50:133 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation executors [class io.opentelemetry.javaagent.instrumentation.executors.ExecutorsInstrumentationModule]\r\n[otel.javaagent 2023-07-26 11:36:50:133 -0300] [main] DEBUG io.opentelemetry.javaagent.extension.instrumentation.InstrumentationModule - Instrumentation executors is disabled\r\n[otel.javaagent 2023-07-26 11:36:50:133 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation internal-application-logging [class io.opentelemetry.javaagent.instrumentation.internal.logging.ApplicationLoggingInstrumentationModule]\r\n[otel.javaagent 2023-07-26 11:36:50:133 -0300] [main] DEBUG io.opentelemetry.javaagent.extension.instrumentation.InstrumentationModule - Instrumentation internal-application-logging is disabled\r\n...\r\n```\r\n\r\nLettuce instrumentation works as intended, generating traces which show up in our OpenTelemetry collector:\r\n```\r\n...\r\n[otel.javaagent 2023-07-26 11:36:50:838 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation lettuce [class io.opentelemetry.javaagent.instrumentation.lettuce.v4_0.LettuceInstrumentationModule]\r\n[otel.javaagent 2023-07-26 11:36:50:842 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation lettuce [class io.opentelemetry.javaagent.instrumentation.lettuce.v5_0.LettuceInstrumentationModule]\r\n[otel.javaagent 2023-07-26 11:36:50:908 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation lettuce [class io.opentelemetry.javaagent.instrumentation.lettuce.v5_1.LettuceInstrumentationModule]\r\n...\r\n[otel.javaagent 2023-07-26 11:37:07:128 -0300] [main] DEBUG io.opentelemetry.javaagent.extension.instrumentation.InstrumentationModule - Applying instrumentation: lettuce [class io.opentelemetry.javaagent.instrumentation.lettuce.v5_1.LettuceInstrumentationModule] on org.springframework.boot.loader.LaunchedURLClassLoader@64db4967\r\n[otel.javaagent 2023-07-26 11:37:07:128 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.HelperInjector - Injecting classes onto class loader org.springframework.boot.loader.LaunchedURLClassLoader@64db4967 -&gt; [io.opentelemetry.javaagent.instrumentation.lettuce.v5_1.TracingHolder, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.LettuceTelemetry, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.LettuceTelemetryBuilder, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$1, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.LettuceNetAttributesGetter, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryEndpoint, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryTraceContextProvider, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryTracerProvider, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryTracer, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryTraceContext, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetrySpan, io.lettuce.core.protocol.OtelCommandArgsUtil, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.common.LettuceArgSplitter]\r\n[otel.javaagent 2023-07-26 11:37:07:128 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.HelperInjector - Injecting classes onto class loader &lt;bootstrap&gt; -&gt; [io.opentelemetry.javaagent.bootstrap.field.VirtualFieldAccessor$io$lettuce$core$protocol$AsyncCommand$io$opentelemetry$javaagent$shaded$io$opentelemetry$context$Context]\r\n[otel.javaagent 2023-07-26 11:37:07:129 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.HelperInjector - Injecting classes onto class loader &lt;bootstrap&gt; -&gt; [io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$io$lettuce$core$protocol$AsyncCommand$io$opentelemetry$javaagent$shaded$io$opentelemetry$context$Context]\r\n[otel.javaagent 2023-07-26 11:37:07:132 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.AgentInstaller$TransformLoggingListener - Transformed io.lettuce.core.resource.DefaultClientResources -- org.springframework.boot.loader.LaunchedURLClassLoader@64db4967\r\n...\r\n```\r\n\r\nI have tried setting both default and individual instrumentation flags to &#39;true&#39;:\r\n```\r\nOTEL_INSTRUMENTATION_COMMON_DEFAULT_ENABLED=true\r\nOTEL_INSTRUMENTATION_TOMCAT_ENABLED=true\r\n```\r\nBut nothing changed. Most instrumentations were still disabled with only a couple working properly.\r\n\r\nJust to be sure, I tried disabling lettuce instrumentation:\r\n```\r\nOTEL_INSTRUMENTATION_LETTUCE_ENABLED=false\r\n```\r\nAnd it worked. It showed as disabled and stopped generating traces, so I don&#39;t think it has to do with enabling/disabling instrumentations.\r\nMoreover, we have working java instrumentation agents on both Azure and AWS kubernetes, which leads me to believe it has something to do with our OpenShift cluster.\r\n\r\nHas anyone experienced this issue before?","title":"Most OpenTelemetry instrumentations are disabled in my Spring application","body":"<p>I have injected an OpenTelemetry JAVA agent in a Spring application in OpenShift via kubernetes operator, but most instrumentations are disabled and not generating traces.</p>\n<p>OpenTelemetry Agent image: ghcr.io/open-telemetry/opentelemetry-operator/autoinstrumentation-java:1.28.0</p>\n<p>JAVA version: openjdk 11.0.15</p>\n<p>Kubernetes version: v1.25.10+3fe2906</p>\n<p>After setting OTEL_JAVAAGENT_DEBUG to true, I see most instrumentations are disabled:</p>\n<pre><code>...\n[otel.javaagent 2023-07-26 11:36:50:133 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation executors [class io.opentelemetry.javaagent.instrumentation.executors.ExecutorsInstrumentationModule]\n[otel.javaagent 2023-07-26 11:36:50:133 -0300] [main] DEBUG io.opentelemetry.javaagent.extension.instrumentation.InstrumentationModule - Instrumentation executors is disabled\n[otel.javaagent 2023-07-26 11:36:50:133 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation internal-application-logging [class io.opentelemetry.javaagent.instrumentation.internal.logging.ApplicationLoggingInstrumentationModule]\n[otel.javaagent 2023-07-26 11:36:50:133 -0300] [main] DEBUG io.opentelemetry.javaagent.extension.instrumentation.InstrumentationModule - Instrumentation internal-application-logging is disabled\n...\n</code></pre>\n<p>Lettuce instrumentation works as intended, generating traces which show up in our OpenTelemetry collector:</p>\n<pre><code>...\n[otel.javaagent 2023-07-26 11:36:50:838 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation lettuce [class io.opentelemetry.javaagent.instrumentation.lettuce.v4_0.LettuceInstrumentationModule]\n[otel.javaagent 2023-07-26 11:36:50:842 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation lettuce [class io.opentelemetry.javaagent.instrumentation.lettuce.v5_0.LettuceInstrumentationModule]\n[otel.javaagent 2023-07-26 11:36:50:908 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.instrumentation.InstrumentationLoader - Loading instrumentation lettuce [class io.opentelemetry.javaagent.instrumentation.lettuce.v5_1.LettuceInstrumentationModule]\n...\n[otel.javaagent 2023-07-26 11:37:07:128 -0300] [main] DEBUG io.opentelemetry.javaagent.extension.instrumentation.InstrumentationModule - Applying instrumentation: lettuce [class io.opentelemetry.javaagent.instrumentation.lettuce.v5_1.LettuceInstrumentationModule] on org.springframework.boot.loader.LaunchedURLClassLoader@64db4967\n[otel.javaagent 2023-07-26 11:37:07:128 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.HelperInjector - Injecting classes onto class loader org.springframework.boot.loader.LaunchedURLClassLoader@64db4967 -&gt; [io.opentelemetry.javaagent.instrumentation.lettuce.v5_1.TracingHolder, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.LettuceTelemetry, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.LettuceTelemetryBuilder, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$1, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.LettuceNetAttributesGetter, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryEndpoint, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryTraceContextProvider, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryTracerProvider, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryTracer, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetryTraceContext, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.v5_1.OpenTelemetryTracing$OpenTelemetrySpan, io.lettuce.core.protocol.OtelCommandArgsUtil, io.opentelemetry.javaagent.shaded.instrumentation.lettuce.common.LettuceArgSplitter]\n[otel.javaagent 2023-07-26 11:37:07:128 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.HelperInjector - Injecting classes onto class loader &lt;bootstrap&gt; -&gt; [io.opentelemetry.javaagent.bootstrap.field.VirtualFieldAccessor$io$lettuce$core$protocol$AsyncCommand$io$opentelemetry$javaagent$shaded$io$opentelemetry$context$Context]\n[otel.javaagent 2023-07-26 11:37:07:129 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.HelperInjector - Injecting classes onto class loader &lt;bootstrap&gt; -&gt; [io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$io$lettuce$core$protocol$AsyncCommand$io$opentelemetry$javaagent$shaded$io$opentelemetry$context$Context]\n[otel.javaagent 2023-07-26 11:37:07:132 -0300] [main] DEBUG io.opentelemetry.javaagent.tooling.AgentInstaller$TransformLoggingListener - Transformed io.lettuce.core.resource.DefaultClientResources -- org.springframework.boot.loader.LaunchedURLClassLoader@64db4967\n...\n</code></pre>\n<p>I have tried setting both default and individual instrumentation flags to 'true':</p>\n<pre><code>OTEL_INSTRUMENTATION_COMMON_DEFAULT_ENABLED=true\nOTEL_INSTRUMENTATION_TOMCAT_ENABLED=true\n</code></pre>\n<p>But nothing changed. Most instrumentations were still disabled with only a couple working properly.</p>\n<p>Just to be sure, I tried disabling lettuce instrumentation:</p>\n<pre><code>OTEL_INSTRUMENTATION_LETTUCE_ENABLED=false\n</code></pre>\n<p>And it worked. It showed as disabled and stopped generating traces, so I don't think it has to do with enabling/disabling instrumentations.\nMoreover, we have working java instrumentation agents on both Azure and AWS kubernetes, which leads me to believe it has something to do with our OpenShift cluster.</p>\n<p>Has anyone experienced this issue before?</p>\n"},{"tags":["java","android","fingerprint"],"answers":[{"tags":[],"owner":{"account_id":13938611,"reputation":471,"user_id":10065056,"display_name":"Bhavik Nathani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690465060,"creation_date":1690465060,"answer_id":76780331,"question_id":76780218,"body_markdown":"**Code should be like this.**\r\n\r\nMake sure to replace &quot;path/to/fingerprint/images.jpg&quot; with the actual path to your fingerprint image. The code now includes error handling for file-related operations and logs the template size to the console.\r\n   \r\n \r\n\r\n    public class FingerprintConverter {\r\n            public static void main(String[] args) {\r\n                // Replace &quot;path/to/fingerprint/images.jpg&quot; with the actual image file path\r\n                String imagePath = &quot;path/to/fingerprint/images.jpg&quot;;\r\n                \r\n                Path imagePath = Paths.get(imagePath);\r\n                if (!Files.exists(imagePath) || !Files.isRegularFile(imagePath) || !Files.isReadable(imagePath)) {\r\n                    System.err.println(&quot;Invalid image file: &quot; + imagePath);\r\n                    return;\r\n                }\r\n        \r\n                try {\r\n                    byte[] imageBytes = Files.readAllBytes(imagePath);\r\n        \r\n                    // Step 3: Extract the fingerprint template\r\n                    FingerprintImage fingerprintImage = new FingerprintImage(\r\n                            imageBytes,\r\n                            new FingerprintImageOptions().dpi(500)\r\n                    );\r\n        \r\n                    FingerprintTemplate template = new FingerprintTemplate(fingerprintImage);\r\n        \r\n                    // Logging template information\r\n                    System.out.println(&quot;Template size: &quot; + template.toByteArray().length + &quot; bytes&quot;);\r\n        \r\n                } catch (IOException e) {\r\n                    System.err.println(&quot;Error reading image file: &quot; + e.getMessage());\r\n                }\r\n            }\r\n        }","title":"Convert Fingerprint Image to Template with Java","body":"<p><strong>Code should be like this.</strong></p>\n<p>Make sure to replace &quot;path/to/fingerprint/images.jpg&quot; with the actual path to your fingerprint image. The code now includes error handling for file-related operations and logs the template size to the console.</p>\n<pre><code>public class FingerprintConverter {\n        public static void main(String[] args) {\n            // Replace &quot;path/to/fingerprint/images.jpg&quot; with the actual image file path\n            String imagePath = &quot;path/to/fingerprint/images.jpg&quot;;\n            \n            Path imagePath = Paths.get(imagePath);\n            if (!Files.exists(imagePath) || !Files.isRegularFile(imagePath) || !Files.isReadable(imagePath)) {\n                System.err.println(&quot;Invalid image file: &quot; + imagePath);\n                return;\n            }\n    \n            try {\n                byte[] imageBytes = Files.readAllBytes(imagePath);\n    \n                // Step 3: Extract the fingerprint template\n                FingerprintImage fingerprintImage = new FingerprintImage(\n                        imageBytes,\n                        new FingerprintImageOptions().dpi(500)\n                );\n    \n                FingerprintTemplate template = new FingerprintTemplate(fingerprintImage);\n    \n                // Logging template information\n                System.out.println(&quot;Template size: &quot; + template.toByteArray().length + &quot; bytes&quot;);\n    \n            } catch (IOException e) {\n                System.err.println(&quot;Error reading image file: &quot; + e.getMessage());\n            }\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":12046182,"reputation":313,"user_id":8811098,"display_name":"Nadin Martini"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76780331,"answer_count":1,"score":1,"last_activity_date":1690538889,"creation_date":1690464250,"question_id":76780218,"body_markdown":" I am trying to convert a fingerprint image with format jpg to a template using the library\r\nSourceAFIS \r\n[https://sourceafis.machinezoo.com/][1] \r\n\r\nBut I am receiving a few bytes that doesn&#39;t look like template (Minutiae data), any suggestions to achieve this goal?\r\n\r\n\r\n       File[] images = directory.listFiles();\r\n                File desiredfile = null;\r\n                for (File file : images) {\r\n                    if (file.getName().equals(&quot;images.jpg&quot;)) {\r\n                        desiredfile = file;\r\n                        break;\r\n                    }\r\n                }\r\n         FingerprintTemplate template = null;\r\n                            if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\r\n                                template = new FingerprintTemplate(\r\n                                        new FingerprintImage(\r\n                                                Files.readAllBytes(desiredfile.toPath()),\r\n                                                new FingerprintImageOptions()\r\n                                                        .dpi(500)));\r\n                            }\r\n                            fileLogger.log(&quot;template &quot; + template.toByteArray());\r\n\r\n  [1]: https://sourceafis.machinezoo.com/\r\n\r\n\r\n**Conclusion**:\r\nIt seems the minutiae data is hidden and we can not see the actual bytes, the library aims to  use the template object for matching process. ","title":"Convert Fingerprint Image to Template with Java","body":"<p>I am trying to convert a fingerprint image with format jpg to a template using the library\nSourceAFIS\n<a href=\"https://sourceafis.machinezoo.com/\" rel=\"nofollow noreferrer\">https://sourceafis.machinezoo.com/</a></p>\n<p>But I am receiving a few bytes that doesn't look like template (Minutiae data), any suggestions to achieve this goal?</p>\n<pre><code>   File[] images = directory.listFiles();\n            File desiredfile = null;\n            for (File file : images) {\n                if (file.getName().equals(&quot;images.jpg&quot;)) {\n                    desiredfile = file;\n                    break;\n                }\n            }\n     FingerprintTemplate template = null;\n                        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.O) {\n                            template = new FingerprintTemplate(\n                                    new FingerprintImage(\n                                            Files.readAllBytes(desiredfile.toPath()),\n                                            new FingerprintImageOptions()\n                                                    .dpi(500)));\n                        }\n                        fileLogger.log(&quot;template &quot; + template.toByteArray());\n</code></pre>\n<p><strong>Conclusion</strong>:\nIt seems the minutiae data is hidden and we can not see the actual bytes, the library aims to  use the template object for matching process.</p>\n"},{"tags":["java","database","mongodb","configuration","non-relational-database"],"comments":[{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":1,"creation_date":1690541608,"post_id":76786646,"comment_id":135371792,"body_markdown":"What is the response when you call the REST with another tool, e.g. postman?","body":"What is the response when you call the REST with another tool, e.g. postman?"},{"owner":{"account_id":22874210,"reputation":11,"user_id":17016798,"display_name":"Hans"},"score":0,"creation_date":1690567327,"post_id":76786646,"comment_id":135376877,"body_markdown":"There is no response because I cannot connect to mongodb via MongoDBCompass. MongoDBCompass response with &quot;connection refused&quot;. If I look up if the port is already in use, it shows me that it isn&#39;t. I also can&#39;t connect with java spring to the database because the exception &quot;adress already in use&quot; appears...","body":"There is no response because I cannot connect to mongodb via MongoDBCompass. MongoDBCompass response with &quot;connection refused&quot;. If I look up if the port is already in use, it shows me that it isn&#39;t. I also can&#39;t connect with java spring to the database because the exception &quot;adress already in use&quot; appears..."},{"owner":{"account_id":22874210,"reputation":11,"user_id":17016798,"display_name":"Hans"},"score":0,"creation_date":1690570828,"post_id":76786646,"comment_id":135377415,"body_markdown":"I got a connection at port 28017(previsiously httpinterface) but I cant request over postman. I got the following error message: &quot;It looks like you are trying to access MongoDB over HTTP on the native driver port.&quot;","body":"I got a connection at port 28017(previsiously httpinterface) but I cant request over postman. I got the following error message: &quot;It looks like you are trying to access MongoDB over HTTP on the native driver port.&quot;"},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1690571756,"post_id":76786646,"comment_id":135377534,"body_markdown":"You cannot use MongoDB with REST interace, MongoDB has no web interface. `__rest` supports loading specific values in the configuration file or loading the entire configuration file. It does not provide a REST/HTML service for the MongoDB.","body":"You cannot use MongoDB with REST interace, MongoDB has no web interface. <code>__rest</code> supports loading specific values in the configuration file or loading the entire configuration file. It does not provide a REST/HTML service for the MongoDB."},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1690571856,"post_id":76786646,"comment_id":135377553,"body_markdown":"Did you include the `--configExpand &quot;rest&quot;` option? And did you have a look at example https://www.mongodb.com/docs/manual/reference/expansion-directives/#output-the-configuration-file-with-resolved-expansion-directive-values - should make it more clear.","body":"Did you include the <code>--configExpand &quot;rest&quot;</code> option? And did you have a look at example <a href=\"https://www.mongodb.com/docs/manual/reference/expansion-directives/#output-the-configuration-file-with-resolved-expansion-directive-values\" rel=\"nofollow noreferrer\">mongodb.com/docs/manual/reference/expansion-directives/&hellip;</a> - should make it more clear."},{"owner":{"account_id":22874210,"reputation":11,"user_id":17016798,"display_name":"Hans"},"score":0,"creation_date":1690572263,"post_id":76786646,"comment_id":135377605,"body_markdown":"That means even if I wrote an Rest Controller in Spring for MongoDB I cant do rest request becaues it is not supported in newer versions of mongodb?","body":"That means even if I wrote an Rest Controller in Spring for MongoDB I cant do rest request becaues it is not supported in newer versions of mongodb?"},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1690573649,"post_id":76786646,"comment_id":135377782,"body_markdown":"I have the feeling you misunderstand the REST directive. You can configure the MongoDB dynamically (i.e. get values from REST response instead of written in text file). You cannot access the Mongo database via REST.","body":"I have the feeling you misunderstand the REST directive. You can configure the MongoDB dynamically (i.e. get values from REST response instead of written in text file). You cannot access the Mongo database via REST."},{"owner":{"account_id":22874210,"reputation":11,"user_id":17016798,"display_name":"Hans"},"score":0,"creation_date":1690574505,"post_id":76786646,"comment_id":135377910,"body_markdown":"You wrote &quot;You cannot access the Mongo database via REST.&quot; Does that mean that you cannot create a REST API with java spring and mongodb? I just want to write a RestController for MongoDB and access data via postman. Is that possible or not?","body":"You wrote &quot;You cannot access the Mongo database via REST.&quot; Does that mean that you cannot create a REST API with java spring and mongodb? I just want to write a RestController for MongoDB and access data via postman. Is that possible or not?"},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1690579751,"post_id":76786646,"comment_id":135378569,"body_markdown":"Of course, you can write an application which provides a REST serrvice and connects to MongoDB. But you cannot access a MongoDB via REST directly.","body":"Of course, you can write an application which provides a REST serrvice and connects to MongoDB. But you cannot access a MongoDB via REST directly."}],"owner":{"account_id":22874210,"reputation":11,"user_id":17016798,"display_name":"Hans"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690538735,"creation_date":1690537488,"question_id":76786646,"body_markdown":"I wanted to configure MongoDB 6.x for rest. Now Ive read that you need to use directives. I tried to configure it with https://www.mongodb.com/docs/manual/reference/expansion-directives/#std-label-expansion-directives.\r\n\r\nI have the following configuration: \r\n\r\n    # mongod.conf\r\n    \r\n    # for documentation of all options, see:\r\n    #   http://docs.mongodb.org/manual/reference/configuration-options/\r\n    \r\n    #start\r\n    # Where and how to store data.\r\n    storage:\r\n      dbPath: /var/lib/mongodb\r\n    #  engine:\r\n    #  wiredTiger:\r\n    \r\n    # where to write  logging data.\r\n    systemLog:\r\n      destination: file\r\n      logAppend: true\r\n      path: /var/log/mongodb/mongod.log\r\n    \r\n    # network interfaces\r\n    net:\r\n      port: 28017\r\n      bindIp: 127.0.0.1\r\n    \r\n    # how the process runs\r\n    processManagement:\r\n      timeZoneInfo: /usr/share/zoneinfo\r\n    \r\n    #security:\r\n    \r\n    #operationProfiling:\r\n    \r\n    #replication:\r\n    \r\n    #sharding:\r\n    \r\n    ## Enterprise-Only Options:\r\n    \r\n    #auditLog:\r\n    \r\n    #snmp:\r\n    __rest: &quot;http://mongoconf.example.net:28017/test&quot;\r\n    type: &quot;string&quot;\r\n    trim: &quot;whitespace&quot;\r\n    digest: &quot;&lt;string&gt;&quot;\r\n    digest_key: &quot;&lt;string&gt;&quot;`\r\n\r\nNow I get the following error message: digest: &quot;Not a valid, even length hex string&quot;\r\n\r\n\r\nTried the configuration described &quot;Expansion Directives Reference&quot; at https://www.mongodb.com/docs/manual/reference/expansion-directives/#std-label-expansion-directives\r\n","title":"How to configure MongoDB for REST?","body":"<p>I wanted to configure MongoDB 6.x for rest. Now Ive read that you need to use directives. I tried to configure it with <a href=\"https://www.mongodb.com/docs/manual/reference/expansion-directives/#std-label-expansion-directives\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/manual/reference/expansion-directives/#std-label-expansion-directives</a>.</p>\n<p>I have the following configuration:</p>\n<pre><code># mongod.conf\n\n# for documentation of all options, see:\n#   http://docs.mongodb.org/manual/reference/configuration-options/\n\n#start\n# Where and how to store data.\nstorage:\n  dbPath: /var/lib/mongodb\n#  engine:\n#  wiredTiger:\n\n# where to write  logging data.\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n\n# network interfaces\nnet:\n  port: 28017\n  bindIp: 127.0.0.1\n\n# how the process runs\nprocessManagement:\n  timeZoneInfo: /usr/share/zoneinfo\n\n#security:\n\n#operationProfiling:\n\n#replication:\n\n#sharding:\n\n## Enterprise-Only Options:\n\n#auditLog:\n\n#snmp:\n__rest: &quot;http://mongoconf.example.net:28017/test&quot;\ntype: &quot;string&quot;\ntrim: &quot;whitespace&quot;\ndigest: &quot;&lt;string&gt;&quot;\ndigest_key: &quot;&lt;string&gt;&quot;`\n</code></pre>\n<p>Now I get the following error message: digest: &quot;Not a valid, even length hex string&quot;</p>\n<p>Tried the configuration described &quot;Expansion Directives Reference&quot; at <a href=\"https://www.mongodb.com/docs/manual/reference/expansion-directives/#std-label-expansion-directives\" rel=\"nofollow noreferrer\">https://www.mongodb.com/docs/manual/reference/expansion-directives/#std-label-expansion-directives</a></p>\n"},{"tags":["java","android","logging","gradle"],"comments":[{"owner":{"account_id":451809,"reputation":756,"user_id":847897,"accept_rate":43,"display_name":"GaneshP"},"score":0,"creation_date":1485541763,"post_id":41900434,"comment_id":70983638,"body_markdown":"you could use tools like Crashanlytics along with some additional progaurd configuration to find which part of the code throws error. https://docs.fabric.io/android/crashlytics/dex-and-proguard.html","body":"you could use tools like Crashanlytics along with some additional progaurd configuration to find which part of the code throws error. <a href=\"https://docs.fabric.io/android/crashlytics/dex-and-proguard.html\" rel=\"nofollow noreferrer\">docs.fabric.io/android/crashlytics/dex-and-proguard.html</a>"},{"owner":{"account_id":9044931,"reputation":177,"user_id":6737655,"accept_rate":80,"display_name":"V1 Kr"},"score":0,"creation_date":1485542148,"post_id":41900434,"comment_id":70983839,"body_markdown":"I had the same issue 6 months back and solved myself. May be it will help you http://stackoverflow.com/a/38702394/5649620","body":"I had the same issue 6 months back and solved myself. May be it will help you <a href=\"http://stackoverflow.com/a/38702394/5649620\">stackoverflow.com/a/38702394/5649620</a>"},{"owner":{"account_id":1174445,"reputation":3883,"user_id":1150795,"display_name":"Piotr Wittchen"},"score":0,"creation_date":1485542282,"post_id":41900434,"comment_id":70983908,"body_markdown":"If the crash of the app happens, then you need to configure ProGuard. Concrete configuration depends on your project and its dependencies. Every project will have a different configuration.","body":"If the crash of the app happens, then you need to configure ProGuard. Concrete configuration depends on your project and its dependencies. Every project will have a different configuration."},{"owner":{"account_id":6018866,"reputation":11533,"user_id":4726718,"accept_rate":75,"display_name":"Darush"},"score":0,"creation_date":1485543014,"post_id":41900434,"comment_id":70984249,"body_markdown":"Since my knowledge is limited on those subjects and I am short of time, I think I should let go of Minification. But I will wait for some more responses until I am convinced.","body":"Since my knowledge is limited on those subjects and I am short of time, I think I should let go of Minification. But I will wait for some more responses until I am convinced."},{"owner":{"account_id":9044931,"reputation":177,"user_id":6737655,"accept_rate":80,"display_name":"V1 Kr"},"score":0,"creation_date":1485543234,"post_id":41900434,"comment_id":70984353,"body_markdown":"@Funwise removed my answer. Hadn&#39;t read the question clearly. Will update if I find one. Good luck","body":"@Funwise removed my answer. Hadn&#39;t read the question clearly. Will update if I find one. Good luck"},{"owner":{"account_id":6018866,"reputation":11533,"user_id":4726718,"accept_rate":75,"display_name":"Darush"},"score":0,"creation_date":1485543537,"post_id":41900434,"comment_id":70984518,"body_markdown":"Thanks anyways. I was able to get the error using Android Device monitor. I will edit my question.","body":"Thanks anyways. I was able to get the error using Android Device monitor. I will edit my question."},{"owner":{"account_id":7532689,"reputation":971,"user_id":5720206,"accept_rate":38,"display_name":"Karanveer Singh"},"score":1,"creation_date":1607666630,"post_id":41900434,"comment_id":115349269,"body_markdown":"4 years later and this is still an issue. Got calls from everywhere about app crashing in release mode and apparently, it is minifyenabled issue. Android is really crap OS and poorly managed by Gooogle","body":"4 years later and this is still an issue. Got calls from everywhere about app crashing in release mode and apparently, it is minifyenabled issue. Android is really crap OS and poorly managed by Gooogle"},{"owner":{"account_id":175206,"reputation":1433,"user_id":2424380,"accept_rate":71,"display_name":"user2424380"},"score":0,"creation_date":1627860164,"post_id":41900434,"comment_id":121261981,"body_markdown":"@Darush could you please elaborate how did you find the problem with avd? I have the same issue and there are no logs in release mode so I don&#39;t know what should I keep in proguard. Thank you!","body":"@Darush could you please elaborate how did you find the problem with avd? I have the same issue and there are no logs in release mode so I don&#39;t know what should I keep in proguard. Thank you!"},{"owner":{"account_id":6018866,"reputation":11533,"user_id":4726718,"accept_rate":75,"display_name":"Darush"},"score":0,"creation_date":1627882531,"post_id":41900434,"comment_id":121264973,"body_markdown":"@user2424380 set debugabble to true on your release build type to see the logs.","body":"@user2424380 set debugabble to true on your release build type to see the logs."},{"owner":{"account_id":175206,"reputation":1433,"user_id":2424380,"accept_rate":71,"display_name":"user2424380"},"score":0,"creation_date":1627885824,"post_id":41900434,"comment_id":121265782,"body_markdown":"@Darush when I set debugabble to true, my app works. I have no idea why. So I need it on false to have the problem.","body":"@Darush when I set debugabble to true, my app works. I have no idea why. So I need it on false to have the problem."},{"owner":{"account_id":6018866,"reputation":11533,"user_id":4726718,"accept_rate":75,"display_name":"Darush"},"score":1,"creation_date":1627930443,"post_id":41900434,"comment_id":121282523,"body_markdown":"@user2424380 I was able to catch the error using Android Device Monitor. Unfortunately this tool is deprecated in the latest releases in favor of the Debugger window. However, if you still aren&#39;t able to see the crash logs you can either use a crash reporting tool or test your app thoroughly in release mode while debuggable is true.","body":"@user2424380 I was able to catch the error using Android Device Monitor. Unfortunately this tool is deprecated in the latest releases in favor of the Debugger window. However, if you still aren&#39;t able to see the crash logs you can either use a crash reporting tool or test your app thoroughly in release mode while debuggable is true."}],"answers":[{"tags":[],"owner":{"account_id":6018866,"reputation":11533,"user_id":4726718,"accept_rate":75,"display_name":"Darush"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1627930993,"creation_date":1485545206,"answer_id":41901571,"question_id":41900434,"body_markdown":"Looks like Proguard wasn&#39;t able to handle the SearchView widget properly. I added the following line to ***proguard-rules.pro*** file located inside ***app*** folder and the problem disappeared:\r\n\r\n&gt; -keep class android.support.v7.widget.SearchView { *; }\r\n\r\nNow I don&#39;t need to set minifyEnabled to false.\r\n\r\n\r\n### UPDATE:\r\nFor those who still aren&#39;t able to see the error logs in the android studio or reproduce the crashes on release builds, they can use an online crash reporting tool.","title":"minifyEnabled causing app to crash on release mode","body":"<p>Looks like Proguard wasn't able to handle the SearchView widget properly. I added the following line to <em><strong>proguard-rules.pro</strong></em> file located inside <em><strong>app</strong></em> folder and the problem disappeared:</p>\n<blockquote>\n<p>-keep class android.support.v7.widget.SearchView { *; }</p>\n</blockquote>\n<p>Now I don't need to set minifyEnabled to false.</p>\n<h3>UPDATE:</h3>\n<p>For those who still aren't able to see the error logs in the android studio or reproduce the crashes on release builds, they can use an online crash reporting tool.</p>\n"},{"tags":[],"owner":{"account_id":12678426,"reputation":1029,"user_id":9213148,"display_name":"Pexers"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1669729584,"creation_date":1669729584,"answer_id":74615092,"question_id":41900434,"body_markdown":"I had the same app crash problem. In my case, I was reading a JSON file from **assets** and converting it to a Kotlin **data class**, using the Gson library. These were the classes:\r\n``` kotlin\r\ndata class JournalData(\r\n    val name: String,\r\n    val url: String,\r\n    val category: Categories\r\n)\r\n\r\nenum class Categories { POLITICS, SPORTS, TECHNOLOGY }\r\n```\r\nI came across two problems when using `minifyEnabled=true`:\r\n 1. Data class **properties** were being obfuscated with **random names**. For instance, the property `name` was being obfuscated to `XYZ`, or any other random name.\r\n 2. The *Categories* **enum class constants** were being obfuscated as well, so the parser couldn&#39;t associate the JSON text to those enum constants.\r\n\r\n## Solution\r\n - I added the `@Keep` annotation to both the data class and the enum class, like so:\r\n``` kotlin\r\n@Keep\r\ndata class JournalData(\r\n    val name: String,\r\n    val url: String,\r\n    val category: Categories\r\n)\r\n\r\n@Keep\r\nenum class Categories { POLITICS, SPORTS, TECHNOLOGY }\r\n```\r\nBy doing this, you&#39;re specifying that those classes and respective properties/constants can&#39;t be modified by *ProGuard* when minification is enabled.\r\n\r\nAlso, checking the logcat will help you find the exact error.\r\n\r\n## See also: \r\n - [Customize which code to keep][1]\r\n\r\n  [1]: https://developer.android.com/studio/build/shrink-code#keep-code","title":"minifyEnabled causing app to crash on release mode","body":"<p>I had the same app crash problem. In my case, I was reading a JSON file from <strong>assets</strong> and converting it to a Kotlin <strong>data class</strong>, using the Gson library. These were the classes:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>data class JournalData(\n    val name: String,\n    val url: String,\n    val category: Categories\n)\n\nenum class Categories { POLITICS, SPORTS, TECHNOLOGY }\n</code></pre>\n<p>I came across two problems when using <code>minifyEnabled=true</code>:</p>\n<ol>\n<li>Data class <strong>properties</strong> were being obfuscated with <strong>random names</strong>. For instance, the property <code>name</code> was being obfuscated to <code>XYZ</code>, or any other random name.</li>\n<li>The <em>Categories</em> <strong>enum class constants</strong> were being obfuscated as well, so the parser couldn't associate the JSON text to those enum constants.</li>\n</ol>\n<h2>Solution</h2>\n<ul>\n<li>I added the <code>@Keep</code> annotation to both the data class and the enum class, like so:</li>\n</ul>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Keep\ndata class JournalData(\n    val name: String,\n    val url: String,\n    val category: Categories\n)\n\n@Keep\nenum class Categories { POLITICS, SPORTS, TECHNOLOGY }\n</code></pre>\n<p>By doing this, you're specifying that those classes and respective properties/constants can't be modified by <em>ProGuard</em> when minification is enabled.</p>\n<p>Also, checking the logcat will help you find the exact error.</p>\n<h2>See also:</h2>\n<ul>\n<li><a href=\"https://developer.android.com/studio/build/shrink-code#keep-code\" rel=\"nofollow noreferrer\">Customize which code to keep</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13458928,"reputation":382,"user_id":9711680,"display_name":"Cube"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690538326,"creation_date":1690538326,"answer_id":76786762,"question_id":41900434,"body_markdown":"Check the proguard rules for libs you are using in your project, maybe you need to add some specific rule\r\n \r\nIn my case, it was because of obfuscation protobuf, next rule fix the issue\r\n\r\n    -keep public class * extends com.google.protobuf.GeneratedMessageLite { *; }\r\n","title":"minifyEnabled causing app to crash on release mode","body":"<p>Check the proguard rules for libs you are using in your project, maybe you need to add some specific rule</p>\n<p>In my case, it was because of obfuscation protobuf, next rule fix the issue</p>\n<pre><code>-keep public class * extends com.google.protobuf.GeneratedMessageLite { *; }\n</code></pre>\n"}],"owner":{"account_id":6018866,"reputation":11533,"user_id":4726718,"accept_rate":75,"display_name":"Darush"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19067,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":41901571,"answer_count":3,"score":26,"last_activity_date":1690538326,"creation_date":1485540773,"question_id":41900434,"body_markdown":"My application was working fine on Debug mode. Unfortunately after uploading to Google Play Store I found that the app is crashing. I searched several similar questions all of which suggested to disable **Proguard** or check the Log outputs. However I have come across the following cases when using the **release** Build Variant:\r\n\r\n**1-** In normal case when `minifyEnabled` is `true` the app crashes and I am not able to see any Log outputs. There are **No Debuggable Processes**.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    release {\r\n                shrinkResources true\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n                signingConfig signingConfigs.config\r\n            }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n**2-** Making `debuggable true` my app works fine. But again I am not able to see any error Logs because the app is working fine.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    release {\r\n                debuggable true\r\n                shrinkResources true\r\n                minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n                signingConfig signingConfigs.config\r\n            }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n**3-** Commenting `minifyEnabled true` the app works. But I lose minification benefits. \r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    release {\r\n                shrinkResources true\r\n                //minifyEnabled true\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n                signingConfig signingConfigs.config\r\n            }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAlso tried hardcoding `android:debuggable=&quot;true&quot;` in AndroidManifest.XML which gives error.\r\n\r\nThe strange thing is that by setting debuggable to true the app works fine. I am not sure whether I should keep `debuggable true` in the release mode or disable minification, Or any other workaround to tackle this issue.\r\n\r\nI will be very grateful if anyone could share how to solve this problem.\r\n\r\n**UPDATE:** by running **Android Device Monitor** I was able to find the problem:\r\n\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): FATAL EXCEPTION: main\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): Process: com.example.myapp, PID: 4806\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.support.v7.widget.SearchView.setSearchableInfo(android.app.SearchableInfo)&#39; on a null object reference\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat com.example.myapp.MainActivity.onCreateOptionsMenu(Unknown Source)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.app.Activity.onCreatePanelMenu(Activity.java:3142)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.support.v4.b.n.onCreatePanelMenu(Unknown Source)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.support.v7.view.i.onCreatePanelMenu(Unknown Source)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.support.v7.app.h$b.onCreatePanelMenu(Unknown Source)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.support.v7.view.i.onCreatePanelMenu(Unknown Source)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.support.v7.app.q.j(Unknown Source)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.support.v7.app.q$1.run(Unknown Source)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.os.Handler.handleCallback(Handler.java:739)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.os.Handler.dispatchMessage(Handler.java:95)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.os.Looper.loop(Looper.java:148)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat android.app.ActivityThread.main(ActivityThread.java:7329)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat java.lang.reflect.Method.invoke(Native Method)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1230)\r\n    01-28 00:28:13.764: E/AndroidRuntime(4806): \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1120)\r\n\r\n","title":"minifyEnabled causing app to crash on release mode","body":"<p>My application was working fine on Debug mode. Unfortunately after uploading to Google Play Store I found that the app is crashing. I searched several similar questions all of which suggested to disable <strong>Proguard</strong> or check the Log outputs. However I have come across the following cases when using the <strong>release</strong> Build Variant:</p>\n\n<p><strong>1-</strong> In normal case when <code>minifyEnabled</code> is <code>true</code> the app crashes and I am not able to see any Log outputs. There are <strong>No Debuggable Processes</strong>.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>release {\n            shrinkResources true\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.config\n        }\n</code></pre>\n\n\n\n<p><strong>2-</strong> Making <code>debuggable true</code> my app works fine. But again I am not able to see any error Logs because the app is working fine.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>release {\n            debuggable true\n            shrinkResources true\n            minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.config\n        }\n</code></pre>\n\n\n\n<p><strong>3-</strong> Commenting <code>minifyEnabled true</code> the app works. But I lose minification benefits. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>release {\n            shrinkResources true\n            //minifyEnabled true\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n            signingConfig signingConfigs.config\n        }\n</code></pre>\n\n\n\n<p>Also tried hardcoding <code>android:debuggable=\"true\"</code> in AndroidManifest.XML which gives error.</p>\n\n<p>The strange thing is that by setting debuggable to true the app works fine. I am not sure whether I should keep <code>debuggable true</code> in the release mode or disable minification, Or any other workaround to tackle this issue.</p>\n\n<p>I will be very grateful if anyone could share how to solve this problem.</p>\n\n<p><strong>UPDATE:</strong> by running <strong>Android Device Monitor</strong> I was able to find the problem:</p>\n\n<pre><code>01-28 00:28:13.764: E/AndroidRuntime(4806): FATAL EXCEPTION: main\n01-28 00:28:13.764: E/AndroidRuntime(4806): Process: com.example.myapp, PID: 4806\n01-28 00:28:13.764: E/AndroidRuntime(4806): java.lang.NullPointerException: Attempt to invoke virtual method 'void android.support.v7.widget.SearchView.setSearchableInfo(android.app.SearchableInfo)' on a null object reference\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at com.example.myapp.MainActivity.onCreateOptionsMenu(Unknown Source)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.app.Activity.onCreatePanelMenu(Activity.java:3142)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.support.v4.b.n.onCreatePanelMenu(Unknown Source)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.support.v7.view.i.onCreatePanelMenu(Unknown Source)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.support.v7.app.h$b.onCreatePanelMenu(Unknown Source)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.support.v7.view.i.onCreatePanelMenu(Unknown Source)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.support.v7.app.q.j(Unknown Source)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.support.v7.app.q$1.run(Unknown Source)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.os.Handler.handleCallback(Handler.java:739)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.os.Handler.dispatchMessage(Handler.java:95)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.os.Looper.loop(Looper.java:148)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at android.app.ActivityThread.main(ActivityThread.java:7329)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at java.lang.reflect.Method.invoke(Native Method)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1230)\n01-28 00:28:13.764: E/AndroidRuntime(4806):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1120)\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690538307,"creation_date":1688051769,"answer_id":76582415,"question_id":76582195,"body_markdown":"The messages says:\r\n\r\n&gt; A job instance already exists and is complete\r\n\r\nIt is not an error. It means only that your job has been already executed and was successful. This is the default behavior of a Spring Batch job and should prevent running jobs more then once without changing any parameters.\r\n\r\nIf your use case is different and you want be able to start the same job again then you can change this default setting by adding this line to your step builder:\r\n```\r\n.allowStartIfComplete(true)\r\n```\r\nTo start the Spring Batch job programmatically with specific parameters you can follow this steps:\r\n\r\n1. disable automatic start\r\n```\r\nspring.batch.job.enabled=false\r\n```\r\n2. implement ApplicationRunner and add your job parameters\r\n```\r\n@SpringBootApplication\r\npublic class BatchApplication implements ApplicationRunner {\r\n    @Autowired\r\n    JobLauncher jobLauncher;\r\n    @Autowired\r\n    Job job;\r\n\r\n    @Override\r\n    public void run(ApplicationArguments args) throws Exception {\r\n        log.info(&quot;Spring Batch starting.&quot;);\r\n        JobParameters params = new JobParametersBuilder()\r\n                .addString(&quot;jobName&quot;, &quot;MyJobName&quot;)\r\n                .addLocalDateTime(&quot;currentTime&quot;, LocalDateTime.now())\r\n                .toJobParameters();\r\n        jobLauncher.run(job, params);\r\n        log.info(&quot;Spring Batch done.&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(BatchApplication.class, args);\r\n    }\r\n}\r\n\r\n```\r\nThis way you Spring Application will run the batch with specified parameters and exit. (Assuming it has no dependencies to Spring Web or MVC or scheduled jobs in which cases it will continue running).","title":"How can I pass Batch Job parameters to my batch job without using CommandLineRuner?","body":"<p>The messages says:</p>\n<blockquote>\n<p>A job instance already exists and is complete</p>\n</blockquote>\n<p>It is not an error. It means only that your job has been already executed and was successful. This is the default behavior of a Spring Batch job and should prevent running jobs more then once without changing any parameters.</p>\n<p>If your use case is different and you want be able to start the same job again then you can change this default setting by adding this line to your step builder:</p>\n<pre><code>.allowStartIfComplete(true)\n</code></pre>\n<p>To start the Spring Batch job programmatically with specific parameters you can follow this steps:</p>\n<ol>\n<li>disable automatic start</li>\n</ol>\n<pre><code>spring.batch.job.enabled=false\n</code></pre>\n<ol start=\"2\">\n<li>implement ApplicationRunner and add your job parameters</li>\n</ol>\n<pre><code>@SpringBootApplication\npublic class BatchApplication implements ApplicationRunner {\n    @Autowired\n    JobLauncher jobLauncher;\n    @Autowired\n    Job job;\n\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n        log.info(&quot;Spring Batch starting.&quot;);\n        JobParameters params = new JobParametersBuilder()\n                .addString(&quot;jobName&quot;, &quot;MyJobName&quot;)\n                .addLocalDateTime(&quot;currentTime&quot;, LocalDateTime.now())\n                .toJobParameters();\n        jobLauncher.run(job, params);\n        log.info(&quot;Spring Batch done.&quot;);\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(BatchApplication.class, args);\n    }\n}\n\n</code></pre>\n<p>This way you Spring Application will run the batch with specified parameters and exit. (Assuming it has no dependencies to Spring Web or MVC or scheduled jobs in which cases it will continue running).</p>\n"},{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688455600,"creation_date":1688455600,"answer_id":76610243,"question_id":76582195,"body_markdown":"&gt; I am not sure if I can pass the Job parameters without using CommandLineRunner or not. If I can, can someone point me to the right direction?\r\n\r\nYou can pass job parameters to your spring boot app on the command line as key/value pairs:\r\n\r\n```\r\njava -jar- myjob.jar name=foo\r\n```","title":"How can I pass Batch Job parameters to my batch job without using CommandLineRuner?","body":"<blockquote>\n<p>I am not sure if I can pass the Job parameters without using CommandLineRunner or not. If I can, can someone point me to the right direction?</p>\n</blockquote>\n<p>You can pass job parameters to your spring boot app on the command line as key/value pairs:</p>\n<pre><code>java -jar- myjob.jar name=foo\n</code></pre>\n"}],"owner":{"account_id":2105220,"reputation":15,"user_id":1871707,"accept_rate":0,"display_name":"JavaJo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690538307,"creation_date":1688050097,"question_id":76582195,"body_markdown":"I have a spring batch job which should run at the start up of spring boot app and spring boot app must shut down as soon as the batch job finishes.\r\n\r\nI have covered the above scenario by using ```spring.batch.job.enabled = true``` property in application.yml file.\r\n\r\nIt ran fine in the starting but since few last runs I am getting below error:\r\n\r\n&gt;org.springframework.batch.core.repository.JobInstanceAlreadyCompleteException: A job instance already exists and is complete for parameters={}. If you want to run this job again, change the parameters.\r\n\r\nNow, I don&#39;t want to use CommandLineRunner which would have let me pass the JobParameters while running the job using JobLauncher. This batch job will run with in a container and should get triggered as soon as the container runs.\r\n\r\nMy batch job should run as soon as the spring boot apps runs and the app must shut down once the batch job finishes.\r\n\r\nI am not sure if I can pass the Job parameters without using CommandLineRunner or not. If I can, can someone point me to the right direction?\r\n\r\nMy BatchConfiguration looks like this:\r\n\r\n```\r\n@Configuration\r\n@EnableBatchProcessing\r\n@Component\r\npublic class BatchConfiguration{\r\n\r\n\t@Autowired\r\n\tpublic JobBuilderFactory jobBuilderFactory;\r\n\r\n\t@Autowired\r\n\tpublic StepBuilderFactory stepBuilderFactory;\r\n\r\n\t@Autowired\r\n\tJobRepository jobRepository;\r\n\r\n\r\n\t@Bean\r\n\tpublic JobLauncher asyncJobLauncher() throws Exception {\r\n\t\tSimpleJobLauncher jobLauncher = new SimpleJobLauncher();\r\n\t\tjobLauncher.setJobRepository(jobRepository);\r\n\t\tjobLauncher.setTaskExecutor(new SimpleAsyncTaskExecutor());\r\n\t\tjobLauncher.afterPropertiesSet();\r\n\t\treturn jobLauncher;\r\n\t}\r\n\r\n\r\n\t@Bean\r\n\tpublic Job loadDataFromIodsIcOutbound(DataListener listener, Step inboundStep) {\r\n\t\treturn jobBuilderFactory.get(&quot;jobName&quot;)\r\n\t\t\t\t.incrementer(new RunIdIncrementer())\r\n\t\t\t\t.listener(listener)\r\n\t\t\t\t.flow(inboundStep)\r\n\t\t\t\t.end()\r\n\t\t\t\t.build();\r\n\t}","title":"How can I pass Batch Job parameters to my batch job without using CommandLineRuner?","body":"<p>I have a spring batch job which should run at the start up of spring boot app and spring boot app must shut down as soon as the batch job finishes.</p>\n<p>I have covered the above scenario by using <code>spring.batch.job.enabled = true</code> property in application.yml file.</p>\n<p>It ran fine in the starting but since few last runs I am getting below error:</p>\n<blockquote>\n<p>org.springframework.batch.core.repository.JobInstanceAlreadyCompleteException: A job instance already exists and is complete for parameters={}. If you want to run this job again, change the parameters.</p>\n</blockquote>\n<p>Now, I don't want to use CommandLineRunner which would have let me pass the JobParameters while running the job using JobLauncher. This batch job will run with in a container and should get triggered as soon as the container runs.</p>\n<p>My batch job should run as soon as the spring boot apps runs and the app must shut down once the batch job finishes.</p>\n<p>I am not sure if I can pass the Job parameters without using CommandLineRunner or not. If I can, can someone point me to the right direction?</p>\n<p>My BatchConfiguration looks like this:</p>\n<pre><code>@Configuration\n@EnableBatchProcessing\n@Component\npublic class BatchConfiguration{\n\n    @Autowired\n    public JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    public StepBuilderFactory stepBuilderFactory;\n\n    @Autowired\n    JobRepository jobRepository;\n\n\n    @Bean\n    public JobLauncher asyncJobLauncher() throws Exception {\n        SimpleJobLauncher jobLauncher = new SimpleJobLauncher();\n        jobLauncher.setJobRepository(jobRepository);\n        jobLauncher.setTaskExecutor(new SimpleAsyncTaskExecutor());\n        jobLauncher.afterPropertiesSet();\n        return jobLauncher;\n    }\n\n\n    @Bean\n    public Job loadDataFromIodsIcOutbound(DataListener listener, Step inboundStep) {\n        return jobBuilderFactory.get(&quot;jobName&quot;)\n                .incrementer(new RunIdIncrementer())\n                .listener(listener)\n                .flow(inboundStep)\n                .end()\n                .build();\n    }\n</code></pre>\n"},{"tags":["java","android","google-maps","infowindow"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690560413,"post_id":76786713,"comment_id":135375695,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":20148221,"reputation":5,"user_id":14776206,"display_name":"Jakob Zeise"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690538132,"creation_date":1690538132,"answer_id":76786736,"question_id":76786713,"body_markdown":"Info windows in Google Maps are not live views, which means they are rendered as images, not placed in the view hierarchy. Because of this, you cannot directly set an OnClickListener for the buttons inside an info window.","title":"Is it possible to add two buttons to an infowindow on Android, each with its own click listener?","body":"<p>Info windows in Google Maps are not live views, which means they are rendered as images, not placed in the view hierarchy. Because of this, you cannot directly set an OnClickListener for the buttons inside an info window.</p>\n"}],"owner":{"account_id":20229915,"reputation":1,"user_id":14836728,"display_name":"shahrooz nld"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690538132,"creation_date":1690537974,"question_id":76786713,"body_markdown":" i have use a google map. i have added a marker with info windows. if add add two button in the infowindows it is not possible to add clicklistener per buttons. i know that &quot;The info window that is drawn is not a live view.&quot; but i am searching for a solution\r\n\r\ni have add two buttons with event cliklistener but it dosent work","title":"Is it possible to add two buttons to an infowindow on Android, each with its own click listener?","body":"<p>i have use a google map. i have added a marker with info windows. if add add two button in the infowindows it is not possible to add clicklistener per buttons. i know that &quot;The info window that is drawn is not a live view.&quot; but i am searching for a solution</p>\n<p>i have add two buttons with event cliklistener but it dosent work</p>\n"},{"tags":["java","web-services","jwt","singleton"],"comments":[{"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"score":0,"creation_date":1690530221,"post_id":76040837,"comment_id":135369492,"body_markdown":"This question raises sooo many counter questions. First of all, why did you select the singelton pattern here? At a glance it looks like a terrible bottleneck for a Web application.","body":"This question raises sooo many counter questions. First of all, why did you select the singelton pattern here? At a glance it looks like a terrible bottleneck for a Web application."}],"answers":[{"tags":[],"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690537984,"creation_date":1690530722,"answer_id":76785806,"question_id":76040837,"body_markdown":"Like commented, using a synchronised singelton with a state (some data that is request specific) in a Web server is highly questionable, it will create an unnecessary bottleneck. Why not instantiate a regular object? Or a stateless singleton where the jwt is provided in each invocation like an old java bean?\r\n\r\nA more modern way to manage singleton instances is to use the ENUM constitution in java. A code example from [this more detailed walkthrough][1] of this technique looks like this:\r\n\r\n```\r\n// Java program to demonstrate the example \r\n// of using Enum as Singleton\r\n  \r\nenum SingletonEnum {\r\n    INSTANCE;\r\n    int value;\r\n  \r\n    public int getValue() {\r\n        return value;\r\n    }\r\n  \r\n    public void setValue(int value) {\r\n        this.value = value;\r\n    }\r\n}\r\n\r\nclass Main {\r\n  \r\n    public static void main(String[] args) {\r\n        SingletonEnum singleton = SingletonEnum.INSTANCE;\r\n  \r\n        System.out.println(singleton.getValue());\r\n        singleton.setValue(2);\r\n        System.out.println(singleton.getValue());\r\n    }\r\n}\r\n```\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/advantages-and-disadvantages-of-using-enum-as-singleton-in-java/amp/","title":"Singleton in Java to obtain JWT Token - which method is better","body":"<p>Like commented, using a synchronised singelton with a state (some data that is request specific) in a Web server is highly questionable, it will create an unnecessary bottleneck. Why not instantiate a regular object? Or a stateless singleton where the jwt is provided in each invocation like an old java bean?</p>\n<p>A more modern way to manage singleton instances is to use the ENUM constitution in java. A code example from <a href=\"https://www.geeksforgeeks.org/advantages-and-disadvantages-of-using-enum-as-singleton-in-java/amp/\" rel=\"nofollow noreferrer\">this more detailed walkthrough</a> of this technique looks like this:</p>\n<pre><code>// Java program to demonstrate the example \n// of using Enum as Singleton\n  \nenum SingletonEnum {\n    INSTANCE;\n    int value;\n  \n    public int getValue() {\n        return value;\n    }\n  \n    public void setValue(int value) {\n        this.value = value;\n    }\n}\n\nclass Main {\n  \n    public static void main(String[] args) {\n        SingletonEnum singleton = SingletonEnum.INSTANCE;\n  \n        System.out.println(singleton.getValue());\n        singleton.setValue(2);\n        System.out.println(singleton.getValue());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4206618,"reputation":808,"user_id":4180447,"accept_rate":47,"display_name":"tarekahf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":262,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690537984,"creation_date":1681787821,"question_id":76040837,"body_markdown":"A java class was developed to obtain JWT Token using the Singleton pattern.\r\n\r\nFollowing is the overall class template:\r\n\r\n```\r\nimport java.text.MessageFormat;\r\nimport java.time.Duration;\r\nimport java.time.Instant;\r\n\r\npublic class JWTSingleton {\r\n\tprivate static JWTSingleton _instance=null;\r\n\tprivate static String baseURLString=null;\r\n\tprivate static String authPartURLString = null;\r\n\t...\r\n\t//Decalre the other static variables which are the input needed to call the authentication web service\r\n\t...\r\n\tprivate JWTResponse _jwt;\r\n\tprivate StringBuilder sbErrMsg = new StringBuilder();\r\n\tprivate boolean isTimeoutException=false;\r\n\tprivate Instant dateTime=null;\r\n\r\n\tpublic static synchronized void injectDependencies(\r\n\t\t\tboolean doGetFresToken,\r\n\t\t\tString baseURLString, String authPartURLString, ...other parameters...) {\r\n\t\tif (doGetFresToken) {\r\n\t\t\t//Clear the saved parameters needed by the web service\r\n\t\t\tJWTSingleton.the_last_param_initilized = null;\r\n\t\t}\r\n\t\tinjectDependencies(\r\n\t\t\tbaseURLString, authPartURLString, ...other parameters...\r\n\t\t);\r\n\t}\r\n\r\n\tpublic static synchronized void injectDependencies(String baseURLString, String authPartURLString, ...other parameters) {\r\n\t\tif (JWTSingleton.the_last_param_initilized != null)\r\n\t\t\treturn; //No need to initialize the static variables more than once\r\n\t\tJWTSingleton.baseURLString = baseURLString;\r\n\t\tJWTSingleton.authPartURLString = authPartURLString;\r\n\t\t...\r\n\t\t//Other static initializations which are the input values needed for the web service like secret and username\r\n\t\t...\r\n\t\tJWTSingleton.the_last_param_initilized = value_passed_for_the_last_parameter;\r\n\t}\r\n\r\n\tpublic synchronized static JWTSingleton getInstance(boolean doGetFreshToken) {\r\n\t\tlong durMils;\r\n\t\tif ((_instance == null || doGetFreshToken) ||\r\n\t\t\t  (_instance != null &amp;&amp; \r\n\t\t\t    (_instance._jwt==null || _instance.sbErrMsg.length()&gt;0)\r\n\t\t\t  )\r\n\t\t\t) {\r\n\t\t\t//Check if a fresh token is requested\r\n\t\t\t//Only create an instance if it is null\r\n\t\t\tif (_instance == null) {\r\n\t\t\t\t_instance = new JWTSingleton();\r\n\t\t\t}else {\r\n\t\t\t\t//Calculate the duration between now and the last time the token was processed\r\n\t\t\t\t//Only refresh the token if more that retryInterval seconds has passed\r\n\t\t\t\ttry {\r\n\t\t\t\t\tdurMils = Duration.between(_instance.dateTime, Instant.now()).toMillis();\r\n\t\t\t\t} catch (Exception e) {\r\n\t\t\t\t\t//An error occurred, just force to call the auth web service.\r\n\t\t\t\t\tdurMils = (retryInterval*2000)+1;\r\n\t\t\t\t}\r\n\t\t\t\t//If there was an error in the last run, and didn&#39;t pass more the retryInterval, then don&#39;t call the service to get a new token.\r\n\t\t\t\t//This is to avoid calling the auth service too quickly before giving the change for the errors to be resolved.\r\n\t\t\t\t//Using retryInterval is a reasonable delay needed between two attempts if there was an error in the last run.\r\n\t\t\t\tif (!doGetFreshToken &amp;&amp; _instance.sbErrMsg.length()&gt;0 &amp;&amp; durMils &lt; (retryInterval*1000)) {\r\n\t\t\t\t\treturn _instance; //If there was an error in the last run, and less than retryInterval has passed, then return the last instance\r\n\t\t\t\t}\r\n\t\t\t\t//Reset the saved instance\r\n\t\t\t\tif (_instance.sbErrMsg.length()&gt;0) {\r\n\t\t\t\t\t_instance.sbErrMsg.setLength(0);\r\n\t\t\t\t}\r\n\t\t\t\t_instance._jwt = null;\r\n\t\t\t}\r\n\t\t\t//Invoke the the method getToken() here to refresh the token\r\n\t\t\t_instance.getToken(baseURLString, authPartURLString, ...other parameters);\r\n\t\t} else {\r\n\t\t}\r\n\t\treturn _instance;\r\n\t}\r\n\t\r\n\tpublic synchronized static JWTSingleton getInstance() {\r\n\t\treturn getInstance(false);\r\n\t}\r\n\r\n\tprivate JWTSingleton() {}\r\n\r\n\r\n\t/**\r\n\t * This private method will get a fresh token every time it is invoked. It will call the authentication service to obtain a token.\r\n\t * &lt;p&gt;\r\n\t * TODO: Possible improvement is to implement the retry logic using Lambda Expressions and Command Pattern Implementation.\r\n\t */\r\n\tprivate void getToken(String baseURLString, String authPartURLString, ... other parameters) {\r\n\t\tService authService = null;\r\n\t\tString errMsg = null;\r\n\t\ttry {\r\n\t\t\t_jwt = null;\r\n\t\t\tauthService = new Service(doDecodePasswords);\r\n\t\t\t...\r\n\t\t\t...\r\n\t\t\t//Init the web service needed to get the JWT Token\r\n\t\t\t...\r\n\t\t\t...\r\n\t\t\tint attempNo=0;\r\n\t\t\tfor (int iRetyrCount = 0; iRetyrCount &lt;= JWTSingleton.maxRetries; iRetyrCount++) {\r\n\t\t\t\tattempNo = iRetyrCount+1;\r\n\t\t\t\tif (attempNo &gt; JWTSingleton.maxRetries) {\r\n\t\t\t\t\terrMsg = &quot;Obtain JWT Access Token will stop after attempts reached max retries: &quot; + attempNo + &quot;.&quot;;\r\n\t\t\t\t\terrMsg = &quot;Attempts to obtain JWT exceeded retry limit: &quot; + attempNo + &quot;.&quot;;\r\n\t\t\t\t\tsbErrMsg.append(sbErrMsg.length()==0?errMsg:&quot; - &quot; + errMsg);\r\n\t\t\t\t\tsbErrMsg.append(authService.getSbErrMsg().length()==0?&quot;&quot;:&quot; - &quot; + authService.getSbErrMsg().toString());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tisTimeoutException = false;\r\n\t\t\t\t//Call the authentication web service and get the response\r\n\t\t\t\t_jwt = authService.callWSAuthGetJWTResponse();\r\n\t\t\t\tif (authService.isTimeoutException()) {\r\n\t\t\t\t\terrMsg = &quot;Timeout exception occurred in &#39;JWTSingleton()&#39; after retry attempt: &quot; + attempNo + &quot;. Will NOT retry again ...&quot;;\r\n\t\t\t\t\tisTimeoutException = true;\r\n\t\t\t\t\terrMsg = &quot;JWTSingleton()-Timeout error in auth service: &quot; + authService.getSbErrMsg().toString();\r\n\t\t\t\t\tsbErrMsg.append(sbErrMsg.length()==0?errMsg:&quot; - &quot; + errMsg);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\telse if (_jwt == null) {\r\n\t\t\t\t\terrMsg = &quot;Error in &#39;JWTSingleton()&#39; - JWT response is null and will stop before reaching max - retry attempt: &quot; + attempNo + &quot;.&quot;;\r\n\t\t\t\t\terrMsg = &quot;JWTSingleton(): Error; JWT response is null.&quot;;\r\n\t\t\t\t\tsbErrMsg.append(sbErrMsg.length()==0?errMsg:&quot; - &quot; + errMsg);\r\n\t\t\t\t\tsbErrMsg.append(authService.getSbErrMsg().length()==0?&quot;&quot;:&quot; - &quot; + authService.getSbErrMsg().toString());\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (_jwt != null &amp;&amp; ATSUtils.isHttpURLConResponseOk(_jwt.getHttpResponseCode()) &amp;&amp; _jwt.getAccess_token() != null) {\r\n\t\t\t\t\tbreak; //This is what we want, the happy path\r\n\t\t\t\t}\r\n\t\t\t\tif (_jwt != null &amp;&amp; (_jwt.getError() != null || !ATSUtils.isHttpURLConResponseOk(_jwt.getHttpResponseCode()))) {\r\n\t\t\t\t\terrMsg = MessageFormat\r\n\t\t\t\t\t\t\t.format(\r\n\t\t\t\t\t\t\t\t\t&quot;An error occurred while obtaining JWT, will try again after attempt: {0}. JWT error = {1} - Response code ={2}.&quot;,\r\n\t\t\t\t\t\t\t\t\tattempNo,_jwt.getError(), _jwt.getHttpResponseCode()\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\ttry {\r\n\t\t\t\t\tThread.sleep(JWTSingleton.retryInterval * 1000);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} catch (InterruptedException iex) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\terrMsg = &quot;Unexpected error occurred in JWTSingleton(): &quot; + e.toString();\r\n\t\t\tSystem.out.println(errMsg);\r\n\t\t\te.printStackTrace();\r\n\t\t\tsbErrMsg.append(sbErrMsg.length()==0?errMsg:&quot; - &quot; + errMsg);\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tdateTime = Instant.now();\r\n\t\t} catch (Exception e) {\r\n\t\t}\r\n\t}\r\n\r\n\tpublic String getAccess_token() {\r\n\t\treturn _jwt.getAccess_token();\r\n\t}\r\n\t\r\n\tpublic JWTResponse getJWT() {\r\n\t\treturn _jwt;\r\n\t}\r\n\r\n\tpublic StringBuilder getSbErrMsg() {\r\n\t\treturn sbErrMsg;\r\n\t}\r\n\r\n\tpublic boolean isTimeoutException() {\r\n\t\treturn isTimeoutException;\r\n\t}\r\n\t\r\n\tpublic Instant getDateTime() {\r\n\t\treturn dateTime;\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThe client code will simply get the token as follows:\r\n\r\n```\r\nJWTSingleton.injectDependencies(...parameters needed for the web service...);\r\nString theToken = JWTSingleton.getInstance().getAccess_token()\r\n```\r\n\r\nThe Question:\r\n===\r\nI want to follow the best recommendations about when to fill the value for the static member `_instance` and the private member `_jwt`. See the code around `_instance.getToken(...)`. \r\n\r\nIs it better to ONLY create the instance `_instance = new JWTSingleton()` inside the static method `getInstance()`, and call the web service outside the singleton class and then use a setter method to set the token inside the singleton instance?\r\n\r\nOr it&#39;s better to call the web service inside the singleton class in the static method `getInstance()` using `_instance.getToken(...)` (this is the current implementation)?\r\n","title":"Singleton in Java to obtain JWT Token - which method is better","body":"<p>A java class was developed to obtain JWT Token using the Singleton pattern.</p>\n<p>Following is the overall class template:</p>\n<pre><code>import java.text.MessageFormat;\nimport java.time.Duration;\nimport java.time.Instant;\n\npublic class JWTSingleton {\n    private static JWTSingleton _instance=null;\n    private static String baseURLString=null;\n    private static String authPartURLString = null;\n    ...\n    //Decalre the other static variables which are the input needed to call the authentication web service\n    ...\n    private JWTResponse _jwt;\n    private StringBuilder sbErrMsg = new StringBuilder();\n    private boolean isTimeoutException=false;\n    private Instant dateTime=null;\n\n    public static synchronized void injectDependencies(\n            boolean doGetFresToken,\n            String baseURLString, String authPartURLString, ...other parameters...) {\n        if (doGetFresToken) {\n            //Clear the saved parameters needed by the web service\n            JWTSingleton.the_last_param_initilized = null;\n        }\n        injectDependencies(\n            baseURLString, authPartURLString, ...other parameters...\n        );\n    }\n\n    public static synchronized void injectDependencies(String baseURLString, String authPartURLString, ...other parameters) {\n        if (JWTSingleton.the_last_param_initilized != null)\n            return; //No need to initialize the static variables more than once\n        JWTSingleton.baseURLString = baseURLString;\n        JWTSingleton.authPartURLString = authPartURLString;\n        ...\n        //Other static initializations which are the input values needed for the web service like secret and username\n        ...\n        JWTSingleton.the_last_param_initilized = value_passed_for_the_last_parameter;\n    }\n\n    public synchronized static JWTSingleton getInstance(boolean doGetFreshToken) {\n        long durMils;\n        if ((_instance == null || doGetFreshToken) ||\n              (_instance != null &amp;&amp; \n                (_instance._jwt==null || _instance.sbErrMsg.length()&gt;0)\n              )\n            ) {\n            //Check if a fresh token is requested\n            //Only create an instance if it is null\n            if (_instance == null) {\n                _instance = new JWTSingleton();\n            }else {\n                //Calculate the duration between now and the last time the token was processed\n                //Only refresh the token if more that retryInterval seconds has passed\n                try {\n                    durMils = Duration.between(_instance.dateTime, Instant.now()).toMillis();\n                } catch (Exception e) {\n                    //An error occurred, just force to call the auth web service.\n                    durMils = (retryInterval*2000)+1;\n                }\n                //If there was an error in the last run, and didn't pass more the retryInterval, then don't call the service to get a new token.\n                //This is to avoid calling the auth service too quickly before giving the change for the errors to be resolved.\n                //Using retryInterval is a reasonable delay needed between two attempts if there was an error in the last run.\n                if (!doGetFreshToken &amp;&amp; _instance.sbErrMsg.length()&gt;0 &amp;&amp; durMils &lt; (retryInterval*1000)) {\n                    return _instance; //If there was an error in the last run, and less than retryInterval has passed, then return the last instance\n                }\n                //Reset the saved instance\n                if (_instance.sbErrMsg.length()&gt;0) {\n                    _instance.sbErrMsg.setLength(0);\n                }\n                _instance._jwt = null;\n            }\n            //Invoke the the method getToken() here to refresh the token\n            _instance.getToken(baseURLString, authPartURLString, ...other parameters);\n        } else {\n        }\n        return _instance;\n    }\n    \n    public synchronized static JWTSingleton getInstance() {\n        return getInstance(false);\n    }\n\n    private JWTSingleton() {}\n\n\n    /**\n     * This private method will get a fresh token every time it is invoked. It will call the authentication service to obtain a token.\n     * &lt;p&gt;\n     * TODO: Possible improvement is to implement the retry logic using Lambda Expressions and Command Pattern Implementation.\n     */\n    private void getToken(String baseURLString, String authPartURLString, ... other parameters) {\n        Service authService = null;\n        String errMsg = null;\n        try {\n            _jwt = null;\n            authService = new Service(doDecodePasswords);\n            ...\n            ...\n            //Init the web service needed to get the JWT Token\n            ...\n            ...\n            int attempNo=0;\n            for (int iRetyrCount = 0; iRetyrCount &lt;= JWTSingleton.maxRetries; iRetyrCount++) {\n                attempNo = iRetyrCount+1;\n                if (attempNo &gt; JWTSingleton.maxRetries) {\n                    errMsg = &quot;Obtain JWT Access Token will stop after attempts reached max retries: &quot; + attempNo + &quot;.&quot;;\n                    errMsg = &quot;Attempts to obtain JWT exceeded retry limit: &quot; + attempNo + &quot;.&quot;;\n                    sbErrMsg.append(sbErrMsg.length()==0?errMsg:&quot; - &quot; + errMsg);\n                    sbErrMsg.append(authService.getSbErrMsg().length()==0?&quot;&quot;:&quot; - &quot; + authService.getSbErrMsg().toString());\n                    break;\n                }\n                isTimeoutException = false;\n                //Call the authentication web service and get the response\n                _jwt = authService.callWSAuthGetJWTResponse();\n                if (authService.isTimeoutException()) {\n                    errMsg = &quot;Timeout exception occurred in 'JWTSingleton()' after retry attempt: &quot; + attempNo + &quot;. Will NOT retry again ...&quot;;\n                    isTimeoutException = true;\n                    errMsg = &quot;JWTSingleton()-Timeout error in auth service: &quot; + authService.getSbErrMsg().toString();\n                    sbErrMsg.append(sbErrMsg.length()==0?errMsg:&quot; - &quot; + errMsg);\n                    break;\n                }\n                else if (_jwt == null) {\n                    errMsg = &quot;Error in 'JWTSingleton()' - JWT response is null and will stop before reaching max - retry attempt: &quot; + attempNo + &quot;.&quot;;\n                    errMsg = &quot;JWTSingleton(): Error; JWT response is null.&quot;;\n                    sbErrMsg.append(sbErrMsg.length()==0?errMsg:&quot; - &quot; + errMsg);\n                    sbErrMsg.append(authService.getSbErrMsg().length()==0?&quot;&quot;:&quot; - &quot; + authService.getSbErrMsg().toString());\n                    break;\n                }\n                if (_jwt != null &amp;&amp; ATSUtils.isHttpURLConResponseOk(_jwt.getHttpResponseCode()) &amp;&amp; _jwt.getAccess_token() != null) {\n                    break; //This is what we want, the happy path\n                }\n                if (_jwt != null &amp;&amp; (_jwt.getError() != null || !ATSUtils.isHttpURLConResponseOk(_jwt.getHttpResponseCode()))) {\n                    errMsg = MessageFormat\n                            .format(\n                                    &quot;An error occurred while obtaining JWT, will try again after attempt: {0}. JWT error = {1} - Response code ={2}.&quot;,\n                                    attempNo,_jwt.getError(), _jwt.getHttpResponseCode()\n                                );\n                }\n                try {\n                    Thread.sleep(JWTSingleton.retryInterval * 1000);\n                    continue;\n                } catch (InterruptedException iex) {\n                }\n            }\n        } catch (Exception e) {\n            errMsg = &quot;Unexpected error occurred in JWTSingleton(): &quot; + e.toString();\n            System.out.println(errMsg);\n            e.printStackTrace();\n            sbErrMsg.append(sbErrMsg.length()==0?errMsg:&quot; - &quot; + errMsg);\n        }\n        try {\n            dateTime = Instant.now();\n        } catch (Exception e) {\n        }\n    }\n\n    public String getAccess_token() {\n        return _jwt.getAccess_token();\n    }\n    \n    public JWTResponse getJWT() {\n        return _jwt;\n    }\n\n    public StringBuilder getSbErrMsg() {\n        return sbErrMsg;\n    }\n\n    public boolean isTimeoutException() {\n        return isTimeoutException;\n    }\n    \n    public Instant getDateTime() {\n        return dateTime;\n    }\n\n}\n</code></pre>\n<p>The client code will simply get the token as follows:</p>\n<pre><code>JWTSingleton.injectDependencies(...parameters needed for the web service...);\nString theToken = JWTSingleton.getInstance().getAccess_token()\n</code></pre>\n<h1>The Question:</h1>\n<p>I want to follow the best recommendations about when to fill the value for the static member <code>_instance</code> and the private member <code>_jwt</code>. See the code around <code>_instance.getToken(...)</code>.</p>\n<p>Is it better to ONLY create the instance <code>_instance = new JWTSingleton()</code> inside the static method <code>getInstance()</code>, and call the web service outside the singleton class and then use a setter method to set the token inside the singleton instance?</p>\n<p>Or it's better to call the web service inside the singleton class in the static method <code>getInstance()</code> using <code>_instance.getToken(...)</code> (this is the current implementation)?</p>\n"},{"tags":["java","spring","postgresql","jdbctemplate"],"answers":[{"tags":[],"owner":{"account_id":10082230,"reputation":53,"user_id":7452114,"display_name":"MICKY"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1690537712,"creation_date":1570898034,"answer_id":58356220,"question_id":58355234,"body_markdown":"By implementing our own RowMapper\r\n\r\n```java\r\npublic class PersonRowMapper implements RowMapper&lt;Person&gt; {\r\n\r\n     Person mapRow(ResultSet rs, int rowNum) throws SQLException {\r\n          Person person = new Person();\r\n          person.setName(&quot;nameColumnName&quot;);\r\n          person.setGender(rs.getBoolean(&quot;genderColumnName&quot;));\r\n\r\n          String[] hobbies = (String[]) rs.getArray(&quot;hobbies&quot;);\r\n          person.setHobbies(hobbies);\r\n\r\n          return person;\r\n     }\r\n\r\n}\r\n```\r\n\r\nUsing the above code, we can manually cast the result of `rs.getArray()` into `String[]`.\r\n\r\n`RowMapper` helps to provide custom logic to parse the result set into our own object. Use it in place of `BeanPropertyRowMapper` like below:\r\n\r\n```java\r\nList&lt;Person&gt; person = getJdbcTemplate().query(&quot;select * from person where name = ?&quot;, new PersonRowMapper(), name);\r\n```","title":"how can I convert postgresql array to java array in getJdbcTemplate().query","body":"<p>By implementing our own RowMapper</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PersonRowMapper implements RowMapper&lt;Person&gt; {\n\n     Person mapRow(ResultSet rs, int rowNum) throws SQLException {\n          Person person = new Person();\n          person.setName(&quot;nameColumnName&quot;);\n          person.setGender(rs.getBoolean(&quot;genderColumnName&quot;));\n\n          String[] hobbies = (String[]) rs.getArray(&quot;hobbies&quot;);\n          person.setHobbies(hobbies);\n\n          return person;\n     }\n\n}\n</code></pre>\n<p>Using the above code, we can manually cast the result of <code>rs.getArray()</code> into <code>String[]</code>.</p>\n<p><code>RowMapper</code> helps to provide custom logic to parse the result set into our own object. Use it in place of <code>BeanPropertyRowMapper</code> like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; person = getJdbcTemplate().query(&quot;select * from person where name = ?&quot;, new PersonRowMapper(), name);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10599416,"reputation":61,"user_id":7806799,"display_name":"Zhenya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681710830,"creation_date":1681709473,"answer_id":76031970,"question_id":58355234,"body_markdown":"I didn&#39;t find how to solve the problem with jdbctemplate + pgArray. So I wrote some fix.  \r\nYou can use own `ColumnMapRowMapper`.\r\n```\r\npublic class ColumnRawMapper extends ColumnMapRowMapper {\r\n        @Override\r\n        protected Object getColumnValue(ResultSet rs, int index) throws SQLException {\r\n            Object obj = rs.getObject(index);\r\n            if (obj instanceof PgArray) {\r\n                return ((PgArray) obj).getArray();\r\n            }\r\n            return super.getColumnValue(rs, index);\r\n        }\r\n    }\r\n\r\nMap&lt;String, Object&gt; ggWp = jdbcTemplate.queryForObject(&quot;select * from temp where ss=&#39;3&#39;&quot;, new ColumnRawMapper());\r\n```","title":"how can I convert postgresql array to java array in getJdbcTemplate().query","body":"<p>I didn't find how to solve the problem with jdbctemplate + pgArray. So I wrote some fix.<br />\nYou can use own <code>ColumnMapRowMapper</code>.</p>\n<pre><code>public class ColumnRawMapper extends ColumnMapRowMapper {\n        @Override\n        protected Object getColumnValue(ResultSet rs, int index) throws SQLException {\n            Object obj = rs.getObject(index);\n            if (obj instanceof PgArray) {\n                return ((PgArray) obj).getArray();\n            }\n            return super.getColumnValue(rs, index);\n        }\n    }\n\nMap&lt;String, Object&gt; ggWp = jdbcTemplate.queryForObject(&quot;select * from temp where ss='3'&quot;, new ColumnRawMapper());\n</code></pre>\n"}],"owner":{"account_id":10082230,"reputation":53,"user_id":7452114,"display_name":"MICKY"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1615,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1690537712,"creation_date":1570891041,"question_id":58355234,"body_markdown":"I am using spring to interact with postgresql. Here is my problem.\r\n\r\nPerson have three attributes:\r\n\r\n 1. name(String)\r\n 2. hobbies(String[])\r\n 3. gender(boolean)\r\n\r\nIf I try to get a list of person from database using the method below\r\n```\r\nList&lt;Person&gt; person=  getJdbcTemplate().query(&quot;select * from person where name=?&quot;,new BeanPropertyRowMapper&lt;person&gt;(Person.class),name);\r\n```\r\nThe compiler prompts \r\n```\r\nFailed to convert property value of type &#39;org.postgresql.jdbc.PgArray&#39; to required type &#39;java.lang.String[]&#39; for property &#39;hobbies&#39;;\r\n```\r\nIs there any way to map pgarray to java array?","title":"how can I convert postgresql array to java array in getJdbcTemplate().query","body":"<p>I am using spring to interact with postgresql. Here is my problem.</p>\n\n<p>Person have three attributes:</p>\n\n<ol>\n<li>name(String)</li>\n<li>hobbies(String[])</li>\n<li>gender(boolean)</li>\n</ol>\n\n<p>If I try to get a list of person from database using the method below</p>\n\n<pre><code>List&lt;Person&gt; person=  getJdbcTemplate().query(\"select * from person where name=?\",new BeanPropertyRowMapper&lt;person&gt;(Person.class),name);\n</code></pre>\n\n<p>The compiler prompts </p>\n\n<pre><code>Failed to convert property value of type 'org.postgresql.jdbc.PgArray' to required type 'java.lang.String[]' for property 'hobbies';\n</code></pre>\n\n<p>Is there any way to map pgarray to java array?</p>\n"},{"tags":["java","spring-boot","jakarta-mail"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1690473751,"post_id":76781294,"comment_id":135362124,"body_markdown":"quite likely you have some inconsistent spring lib version, could you include your pom.xml and the full stacktrace of NoClassDefFoundError?","body":"quite likely you have some inconsistent spring lib version, could you include your pom.xml and the full stacktrace of NoClassDefFoundError?"},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1690525210,"post_id":76781294,"comment_id":135368647,"body_markdown":"You can also send mails using javax.mail check [this discussion](https://stackoverflow.com/questions/76758716/how-can-i-make-it-possible-to-automatically-authenticate-when-sending-an-email-t/76762709#76762709)","body":"You can also send mails using javax.mail check <a href=\"https://stackoverflow.com/questions/76758716/how-can-i-make-it-possible-to-automatically-authenticate-when-sending-an-email-t/76762709#76762709\">this discussion</a>"},{"owner":{"account_id":1124424,"reputation":43,"user_id":1112038,"display_name":"pikmin"},"score":0,"creation_date":1690531703,"post_id":76781294,"comment_id":135369757,"body_markdown":"@samabcde i edit my message with the pom and the full stack trace","body":"@samabcde i edit my message with the pom and the full stack trace"},{"owner":{"account_id":1124424,"reputation":43,"user_id":1112038,"display_name":"pikmin"},"score":0,"creation_date":1690548079,"post_id":76781294,"comment_id":135372977,"body_markdown":"I tried your solution @Eric but I got a smiliar exception (this time, it&#39;s jakarta/activation/DataContentHandler that is not found)\nI definitely got something wrong in my pom","body":"I tried your solution @Eric but I got a smiliar exception (this time, it&#39;s jakarta/activation/DataContentHandler that is not found) I definitely got something wrong in my pom"},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1690559085,"post_id":76781294,"comment_id":135375439,"body_markdown":"I can&#39;t reproduce your error using the pom given, what I can suggest is to put a break point in `javax.mail.Session`L492, and see why provider return a class name `jakarta.mail.Transport`","body":"I can&#39;t reproduce your error using the pom given, what I can suggest is to put a break point in <code>javax.mail.Session</code>L492, and see why provider return a class name <code>jakarta.mail.Transport</code>"},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1690565070,"post_id":76781294,"comment_id":135376463,"body_markdown":"Have you tried to clean &amp; build project before running it. Sometimes dependencies/libraries aren&#39;t added successfully until clean &amp; build is done first","body":"Have you tried to clean &amp; build project before running it. Sometimes dependencies/libraries aren&#39;t added successfully until clean &amp; build is done first"}],"owner":{"account_id":1124424,"reputation":43,"user_id":1112038,"display_name":"pikmin"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690537711,"creation_date":1690471628,"question_id":76781294,"body_markdown":"I&#39;m trying to send an email with JavaMailSender but I get a NoClassDefFoundError on jakarta/mail/Transport.\r\n\r\nThe full stacktrace : https://pastebin.com/eCNHpxT5\r\n\r\nThe pom : https://pastebin.com/jC6nfuRu\r\n\r\nThe parent pom : https://pastebin.com/jADMpZeF\r\n\r\nMy conf\r\n```\r\n@Bean\r\npublic JavaMailSender emailSender(final MailProperties mailProperties) {\r\n    final JavaMailSenderImpl javaMailSenderImpl = new JavaMailSenderImpl();\r\n    javaMailSenderImpl.setHost(mailProperties.getHost());\r\n    javaMailSenderImpl.setPort(mailProperties.getPort());\r\n    Properties props = javaMailSenderImpl.getJavaMailProperties();\r\n    props.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\r\n    props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n    return javaMailSenderImpl;\r\n}\r\n```\r\nand then I try to send like this\r\n```\r\nprivate final JavaMailSender emailSender;\r\n\r\n@Autowired\r\npublic MailBuildService(final JavaMailSender emailSender) {\r\n    this.emailSender = emailSender;\r\n}\r\n\r\nfinal MimeMessage message = emailSender.createMimeMessage();\r\nfinal MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;UTF-8&quot;);\r\nhelper.setFrom(senderMail, senderName);\r\nhelper.setTo(recipient);\r\nhelper.setSubject(mailSubject);\r\nhelper.setText(mail.getTextContent(), mail.getHtmlContent());\r\nemailSender.send(message);\r\n```","title":"JavaMailSender - NoClassDefFoundError on jakarta/mail/Transport while sending email","body":"<p>I'm trying to send an email with JavaMailSender but I get a NoClassDefFoundError on jakarta/mail/Transport.</p>\n<p>The full stacktrace : <a href=\"https://pastebin.com/eCNHpxT5\" rel=\"nofollow noreferrer\">https://pastebin.com/eCNHpxT5</a></p>\n<p>The pom : <a href=\"https://pastebin.com/jC6nfuRu\" rel=\"nofollow noreferrer\">https://pastebin.com/jC6nfuRu</a></p>\n<p>The parent pom : <a href=\"https://pastebin.com/jADMpZeF\" rel=\"nofollow noreferrer\">https://pastebin.com/jADMpZeF</a></p>\n<p>My conf</p>\n<pre><code>@Bean\npublic JavaMailSender emailSender(final MailProperties mailProperties) {\n    final JavaMailSenderImpl javaMailSenderImpl = new JavaMailSenderImpl();\n    javaMailSenderImpl.setHost(mailProperties.getHost());\n    javaMailSenderImpl.setPort(mailProperties.getPort());\n    Properties props = javaMailSenderImpl.getJavaMailProperties();\n    props.put(&quot;mail.transport.protocol&quot;, &quot;smtp&quot;);\n    props.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\n    return javaMailSenderImpl;\n}\n</code></pre>\n<p>and then I try to send like this</p>\n<pre><code>private final JavaMailSender emailSender;\n\n@Autowired\npublic MailBuildService(final JavaMailSender emailSender) {\n    this.emailSender = emailSender;\n}\n\nfinal MimeMessage message = emailSender.createMimeMessage();\nfinal MimeMessageHelper helper = new MimeMessageHelper(message, true, &quot;UTF-8&quot;);\nhelper.setFrom(senderMail, senderName);\nhelper.setTo(recipient);\nhelper.setSubject(mailSubject);\nhelper.setText(mail.getTextContent(), mail.getHtmlContent());\nemailSender.send(message);\n</code></pre>\n"},{"tags":["java","hadoop","hbase"],"comments":[{"owner":{"account_id":3059721,"reputation":1660,"user_id":2592657,"accept_rate":38,"display_name":"Joel"},"score":2,"creation_date":1438280324,"post_id":27324569,"comment_id":51397967,"body_markdown":"were you able to solve this?","body":"were you able to solve this?"}],"answers":[{"tags":[],"owner":{"account_id":3182115,"reputation":331,"user_id":2688589,"display_name":"wobu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690537613,"creation_date":1470818697,"answer_id":38868365,"question_id":27324569,"body_markdown":"`HFileOutputFormat` or the new Version `HFileOutputFormat2` needs `KeyValue` as final class. Maybe the `PutSortReducer` was not correctly applied which converts the `Put` to `KeyValue` instances.\r\n\r\nIn your driver&#39;s configuration, you set the number of reducers to 0 which means that no reducer will be applied therefore, the `Put` you write into the context would never be converter to a `KeyValue` instance.\r\n\r\nIn my case i am not using MapReduce but Spark, so i am just creating `KeyValue`&#39;s directly instead of `Put`&#39;s","title":"ClassCastException while using HFileOutputFormat2","body":"<p><code>HFileOutputFormat</code> or the new Version <code>HFileOutputFormat2</code> needs <code>KeyValue</code> as final class. Maybe the <code>PutSortReducer</code> was not correctly applied which converts the <code>Put</code> to <code>KeyValue</code> instances.</p>\n<p>In your driver's configuration, you set the number of reducers to 0 which means that no reducer will be applied therefore, the <code>Put</code> you write into the context would never be converter to a <code>KeyValue</code> instance.</p>\n<p>In my case i am not using MapReduce but Spark, so i am just creating <code>KeyValue</code>'s directly instead of <code>Put</code>'s</p>\n"}],"owner":{"account_id":1591411,"reputation":869,"user_id":1474659,"accept_rate":47,"display_name":"abhijeet"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1085,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1690537613,"creation_date":1417813117,"question_id":27324569,"body_markdown":"I am trying to upload the data from file in the hdfs to the hbase table using HFileOutputFormat2 as a OutputFormat but I am getting following exception, \r\n\r\n\r\n    java.lang.Exception: java.lang.ClassCastException: org.apache.hadoop.hbase.client.Put cannot be cast to org.apache.hadoop.hbase.Cell\r\n\tat org.apache.hadoop.mapred.LocalJobRunner$Job.runTasks(LocalJobRunner.java:462)\r\n\tat org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:522)\r\n\r\n    Caused by: java.lang.ClassCastException: org.apache.hadoop.hbase.client.Put cannot be cast to org.apache.hadoop.hbase.Cell\r\n\tat org.apache.hadoop.hbase.mapreduce.HFileOutputFormat2$1.write(HFileOutputFormat2.java:148)\r\n\tat org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.write(MapTask.java:635)\r\n\tat org.apache.hadoop.mapreduce.task.TaskInputOutputContextImpl.write(TaskInputOutputContextImpl.java:89)\r\n\tat org.apache.hadoop.mapreduce.lib.map.WrappedMapper$Context.write(WrappedMapper.java:112)\r\n\tat com.xogito.ingestion.mr.hbase.CSEventsHBaseMapper.map(CSEventsHBaseMapper.java:90)\r\n\tat com.xogito.ingestion.mr.hbase.CSEventsHBaseMapper.map(CSEventsHBaseMapper.java:1)\r\n\tat org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:145)\r\n\tat org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)\r\n\tat org.apache.hadoop.mapred.MapTask.run(MapTask.java:340)\r\n\tat org.apache.hadoop.mapred.LocalJobRunner$Job$MapTaskRunnable.run(LocalJobRunner.java:243)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\r\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n\tat java.lang.Thread.run(Thread.java:662)\r\n\r\nFollowing is the code of the Job\r\n\r\n   \r\n        @Override\r\n\t    public int run(String[] args) throws Exception {\r\n\t\tConfiguration conf = getConf();\r\n\t\tjob = Job.getInstance(conf, &quot;MY_JOB&quot;);\r\n\t\tjob.setJarByClass(getClass());\r\n\t\tjob.setMapOutputKeyClass(ImmutableBytesWritable.class);\r\n\t    job.setMapOutputValueClass(Put.class);\r\n\t    job.setSpeculativeExecution(false);  \r\n        job.setReduceSpeculativeExecution(false);  \r\n\t    job.setMapperClass(CustomMapper.class);//Custom Mapper\r\n\t    job.setInputFormatClass(TextInputFormat.class);\r\n\t    job.setOutputFormatClass(HFileOutputFormat.class);\r\n\t    \r\n\t    \r\n\t\tString parentInputPath = args[0];\r\n\t\tString parentOutputPath = args[1];\r\n\t\t\r\n\t\tFileInputFormat.addInputPaths(job, inputPath);\r\n\t\tHFileOutputFormat.setOutputPath(job,new Path(parentOutputPath)); \r\n\t\tConfiguration hConf = HBaseConfiguration.create(conf);\r\n\t    hConf.set(&quot;hbase.zookeeper.quorum&quot;, &quot;x.x.x.x&quot;);\r\n\t    hConf.set(&quot;hbase.zookeeper.property.clientPort&quot;, &quot;2181&quot;);\r\n\t    HTable hTable = new HTable(hConf, &quot;mytable&quot;);\r\n\t   // hTable.setAutoFlush(false, true);\r\n      //  hTable.setWriteBufferSize(1024 * 1024 * 12);\r\n\t    HFileOutputFormat.configureIncrementalLoad(job, hTable);\r\n\t    job.setNumReduceTasks(0);\r\n\t\tjob.submit();\r\n      }\r\n\r\n\r\nand Mapper&#39;s code is following,\r\n\r\n\r\n      @Override\r\n\tpublic void map(WritableComparable key, Writable  val, Context context) throws IOException, InterruptedException{\r\n\t\tString data = val.toString();\r\n\t\tString[] splitted = data.split(&quot;\\t&quot;);\r\n\t\tString account = splitted[1];\r\n\t\tMatcher match = ACCOUNT.matcher(account);\r\n\t\tint clientid = 0;\r\n\t\tif (match.find()) {\r\n\t\t\tclientid = Integer.valueOf(Integer.parseInt(match\r\n\t\t\t\t\t.group(1)));\r\n\t\t}\r\n\t\tString userid = splitted[2];\r\n\t\tLong timestamp = 0L;\r\n\t\ttry {\r\n\t\t\ttimestamp = Long.valueOf(splitted[10]);\r\n\t\t} catch (Exception e) {\r\n\t\t\tLOGGER.error(e.getMessage(), e);\r\n\t\t}\r\n\t\t\r\n\t\tString rowKeyText = &quot;somtext&quot;;\r\n\t\tImmutableBytesWritable rowKey = new    \r\n          ImmutableBytesWritable(Bytes.toBytes(rowKeyText));\r\n\t\t\r\n        Put put = new Put(Bytes.toBytes(rowKeyText));\r\n        put.add(cf,column, value); \r\n        context.write(rowKey, put); \r\n      }\r\n\r\n","title":"ClassCastException while using HFileOutputFormat2","body":"<p>I am trying to upload the data from file in the hdfs to the hbase table using HFileOutputFormat2 as a OutputFormat but I am getting following exception, </p>\n\n<pre><code>java.lang.Exception: java.lang.ClassCastException: org.apache.hadoop.hbase.client.Put cannot be cast to org.apache.hadoop.hbase.Cell\nat org.apache.hadoop.mapred.LocalJobRunner$Job.runTasks(LocalJobRunner.java:462)\nat org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:522)\n\nCaused by: java.lang.ClassCastException: org.apache.hadoop.hbase.client.Put cannot be cast to org.apache.hadoop.hbase.Cell\nat org.apache.hadoop.hbase.mapreduce.HFileOutputFormat2$1.write(HFileOutputFormat2.java:148)\nat org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.write(MapTask.java:635)\nat org.apache.hadoop.mapreduce.task.TaskInputOutputContextImpl.write(TaskInputOutputContextImpl.java:89)\nat org.apache.hadoop.mapreduce.lib.map.WrappedMapper$Context.write(WrappedMapper.java:112)\nat com.xogito.ingestion.mr.hbase.CSEventsHBaseMapper.map(CSEventsHBaseMapper.java:90)\nat com.xogito.ingestion.mr.hbase.CSEventsHBaseMapper.map(CSEventsHBaseMapper.java:1)\nat org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:145)\nat org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)\nat org.apache.hadoop.mapred.MapTask.run(MapTask.java:340)\nat org.apache.hadoop.mapred.LocalJobRunner$Job$MapTaskRunnable.run(LocalJobRunner.java:243)\nat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\nat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\nat java.util.concurrent.FutureTask.run(FutureTask.java:138)\nat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\nat java.lang.Thread.run(Thread.java:662)\n</code></pre>\n\n<p>Following is the code of the Job</p>\n\n<pre><code>    @Override\n    public int run(String[] args) throws Exception {\n    Configuration conf = getConf();\n    job = Job.getInstance(conf, \"MY_JOB\");\n    job.setJarByClass(getClass());\n    job.setMapOutputKeyClass(ImmutableBytesWritable.class);\n    job.setMapOutputValueClass(Put.class);\n    job.setSpeculativeExecution(false);  \n    job.setReduceSpeculativeExecution(false);  \n    job.setMapperClass(CustomMapper.class);//Custom Mapper\n    job.setInputFormatClass(TextInputFormat.class);\n    job.setOutputFormatClass(HFileOutputFormat.class);\n\n\n    String parentInputPath = args[0];\n    String parentOutputPath = args[1];\n\n    FileInputFormat.addInputPaths(job, inputPath);\n    HFileOutputFormat.setOutputPath(job,new Path(parentOutputPath)); \n    Configuration hConf = HBaseConfiguration.create(conf);\n    hConf.set(\"hbase.zookeeper.quorum\", \"x.x.x.x\");\n    hConf.set(\"hbase.zookeeper.property.clientPort\", \"2181\");\n    HTable hTable = new HTable(hConf, \"mytable\");\n   // hTable.setAutoFlush(false, true);\n  //  hTable.setWriteBufferSize(1024 * 1024 * 12);\n    HFileOutputFormat.configureIncrementalLoad(job, hTable);\n    job.setNumReduceTasks(0);\n    job.submit();\n  }\n</code></pre>\n\n<p>and Mapper's code is following,</p>\n\n<pre><code>  @Override\npublic void map(WritableComparable key, Writable  val, Context context) throws IOException, InterruptedException{\n    String data = val.toString();\n    String[] splitted = data.split(\"\\t\");\n    String account = splitted[1];\n    Matcher match = ACCOUNT.matcher(account);\n    int clientid = 0;\n    if (match.find()) {\n        clientid = Integer.valueOf(Integer.parseInt(match\n                .group(1)));\n    }\n    String userid = splitted[2];\n    Long timestamp = 0L;\n    try {\n        timestamp = Long.valueOf(splitted[10]);\n    } catch (Exception e) {\n        LOGGER.error(e.getMessage(), e);\n    }\n\n    String rowKeyText = \"somtext\";\n    ImmutableBytesWritable rowKey = new    \n      ImmutableBytesWritable(Bytes.toBytes(rowKeyText));\n\n    Put put = new Put(Bytes.toBytes(rowKeyText));\n    put.add(cf,column, value); \n    context.write(rowKey, put); \n  }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-resttemplate"],"answers":[{"tags":[],"owner":{"account_id":4999034,"reputation":1870,"user_id":6722075,"display_name":"Tohid Makari"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1690537205,"creation_date":1613840629,"answer_id":66294259,"question_id":66277274,"body_markdown":"Finally I found out that in &quot;application/x-www-form-urlencoded&quot; we have to use as following:\r\n\r\n     MultiValueMap&lt;String, String&gt; requestBody = new LinkedMultiValueMap&lt;&gt;();\r\n            requestBody.add(&quot;username&quot;,propertyConfig.getUserName());\r\n\r\n      HttpHeaders headers = new HttpHeaders();\r\n        headers.add(MediaType.APPLICATION_JSON, &quot;application/x-www-form-urlencoded&quot;);\r\n        HttpEntity&lt;?&gt; requestEntity = new HttpEntity&lt;&gt;(requestBody, headers);","title":"How to send body in restTemplate as application/x-www-form-urlencoded","body":"<p>Finally I found out that in &quot;application/x-www-form-urlencoded&quot; we have to use as following:</p>\n<pre><code> MultiValueMap&lt;String, String&gt; requestBody = new LinkedMultiValueMap&lt;&gt;();\n        requestBody.add(&quot;username&quot;,propertyConfig.getUserName());\n\n  HttpHeaders headers = new HttpHeaders();\n    headers.add(MediaType.APPLICATION_JSON, &quot;application/x-www-form-urlencoded&quot;);\n    HttpEntity&lt;?&gt; requestEntity = new HttpEntity&lt;&gt;(requestBody, headers);\n</code></pre>\n"}],"owner":{"account_id":4999034,"reputation":1870,"user_id":6722075,"display_name":"Tohid Makari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8501,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":66294259,"answer_count":1,"score":2,"last_activity_date":1690537205,"creation_date":1613736369,"question_id":66277274,"body_markdown":"It is possible to set &quot;application/x-www-form-urlencoded&quot; in  HttpHeader, but I want to set for requestbody, could you please guide me?\r\n\r\nsample json:\r\n \r\n\r\n    \r\n    \t\t\t\t&quot;header&quot;: [\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\t&quot;key&quot;: &quot;Content-Type&quot;,\r\n    \t\t\t\t\t\t&quot;value&quot;: &quot;application/json&quot;,\r\n    \t\t\t\t\t\t&quot;type&quot;: &quot;text&quot;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t],\r\n    \t\t\t\t&quot;body&quot;: {\r\n    \t\t\t\t\t&quot;mode&quot;: &quot;urlencoded&quot;,\r\n    \t\t\t\t\t&quot;urlencoded&quot;: [\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t&quot;key&quot;: &quot;username&quot;,\r\n    \t\t\t\t\t\t\t&quot;value&quot;: &quot;Tohid&quot;,\r\n    \t\t\t\t\t\t\t&quot;type&quot;: &quot;text&quot;\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t&quot;key&quot;: &quot;password&quot;,\r\n    \t\t\t\t\t\t\t&quot;value&quot;: &quot;*mk&quot;,\r\n    \t\t\t\t\t\t\t&quot;type&quot;: &quot;text&quot;\r\n    \t\t\t\t\t\t},\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\t&quot;key&quot;: &quot;grant_type&quot;,\r\n    \t\t\t\t\t\t\t&quot;value&quot;: &quot;password&quot;,\r\n    \t\t\t\t\t\t\t&quot;type&quot;: &quot;text&quot;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t]\r\n    \t\t\t\t},\r\n\r\ncode :\r\n\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.add(MediaType.APPLICATION_JSON, APPLICATION_URLENCODED.getValue());\r\n            HttpEntity&lt;?&gt; requestEntity = new HttpEntity&lt;&gt;(gson.toJson(requestBody), headers);\r\n\r\nPostman screenshot :\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2IZ03.png","title":"How to send body in restTemplate as application/x-www-form-urlencoded","body":"<p>It is possible to set &quot;application/x-www-form-urlencoded&quot; in  HttpHeader, but I want to set for requestbody, could you please guide me?</p>\n<p>sample json:</p>\n<pre><code>                &quot;header&quot;: [\n                    {\n                        &quot;key&quot;: &quot;Content-Type&quot;,\n                        &quot;value&quot;: &quot;application/json&quot;,\n                        &quot;type&quot;: &quot;text&quot;\n                    }\n                ],\n                &quot;body&quot;: {\n                    &quot;mode&quot;: &quot;urlencoded&quot;,\n                    &quot;urlencoded&quot;: [\n                        {\n                            &quot;key&quot;: &quot;username&quot;,\n                            &quot;value&quot;: &quot;Tohid&quot;,\n                            &quot;type&quot;: &quot;text&quot;\n                        },\n                        {\n                            &quot;key&quot;: &quot;password&quot;,\n                            &quot;value&quot;: &quot;*mk&quot;,\n                            &quot;type&quot;: &quot;text&quot;\n                        },\n                        {\n                            &quot;key&quot;: &quot;grant_type&quot;,\n                            &quot;value&quot;: &quot;password&quot;,\n                            &quot;type&quot;: &quot;text&quot;\n                        }\n                    ]\n                },\n</code></pre>\n<p>code :</p>\n<pre><code>        HttpHeaders headers = new HttpHeaders();\n        headers.add(MediaType.APPLICATION_JSON, APPLICATION_URLENCODED.getValue());\n        HttpEntity&lt;?&gt; requestEntity = new HttpEntity&lt;&gt;(gson.toJson(requestBody), headers);\n</code></pre>\n<p>Postman screenshot :\n<a href=\"https://i.stack.imgur.com/2IZ03.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2IZ03.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","microsoft-teams"],"answers":[{"tags":[],"owner":{"account_id":23205773,"reputation":379,"user_id":17300012,"display_name":"Sayali-MSFT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690537156,"creation_date":1690537156,"answer_id":76786605,"question_id":76774263,"body_markdown":"When you encounter an SSLHandshakeException while trying to connect to a Microsoft webhook URL, it indicates that there is an issue with the SSL handshake process during the HTTPS connection establishment. This error typically occurs due to problems with the SSL/TLS certificate, SSL configuration, or network settings.\r\n\r\nIf you want to &quot;download the certificate&quot; for the webhook URL, you might be referring to the SSL/TLS certificate that ensures secure communication between your browser and the server. However, in the context of webhooks, you don&#39;t usually interact with the webhook URL directly using a browser.\r\n\r\n\r\nExport the SSL certificate of a website using Google Chrome:\r\n\r\n1.Click the Secure button (a padlock) in an address bar\r\n\r\n2.Click the Show certificate button\r\n\r\n3.Go to the Details tab\r\n\r\n4.Click the Export button\r\n\r\n5.Specify the name of the file you want to save the SSL certificate to, keep the “Base64-encoded ASCII, single certificate” format and click the Save button","title":"Mircosoft webhook URL connection throwing SSLHandshakeException","body":"<p>When you encounter an SSLHandshakeException while trying to connect to a Microsoft webhook URL, it indicates that there is an issue with the SSL handshake process during the HTTPS connection establishment. This error typically occurs due to problems with the SSL/TLS certificate, SSL configuration, or network settings.</p>\n<p>If you want to &quot;download the certificate&quot; for the webhook URL, you might be referring to the SSL/TLS certificate that ensures secure communication between your browser and the server. However, in the context of webhooks, you don't usually interact with the webhook URL directly using a browser.</p>\n<p>Export the SSL certificate of a website using Google Chrome:</p>\n<p>1.Click the Secure button (a padlock) in an address bar</p>\n<p>2.Click the Show certificate button</p>\n<p>3.Go to the Details tab</p>\n<p>4.Click the Export button</p>\n<p>5.Specify the name of the file you want to save the SSL certificate to, keep the “Base64-encoded ASCII, single certificate” format and click the Save button</p>\n"}],"owner":{"account_id":8755814,"reputation":310,"user_id":6547451,"accept_rate":75,"display_name":"eshwar chettri"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690537156,"creation_date":1690397940,"question_id":76774263,"body_markdown":"When I&#39;m trying to connect the webhook URL from Postman it works fine, But When I&#39;m trying to connect from my UAT server I&#39;m getting the below error.\r\n \r\nI/O error on POST request for &quot;https://xxxxx.webhook.office.com/webhookb2/xx@xxx/IncomingWebhook/3432432434&quot;:\r\nsun.security.validator.ValidatorException:\r\nPKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: \r\nunable to find valid certification path to requested target;\r\nnested exception is javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.\r\n\r\nI know it&#39;s asking for a ca certificate but How Can I download the certificate for the webhook URL when I&#39;m calling the URL from Chrome it&#39;s showing &quot;This page isn’t working&quot;.\r\n\r\nAny help will be highly appreciated \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dO4l1.png","title":"Mircosoft webhook URL connection throwing SSLHandshakeException","body":"<p>When I'm trying to connect the webhook URL from Postman it works fine, But When I'm trying to connect from my UAT server I'm getting the below error.</p>\n<p>I/O error on POST request for &quot;https://xxxxx.webhook.office.com/webhookb2/xx@xxx/IncomingWebhook/3432432434&quot;:\nsun.security.validator.ValidatorException:\nPKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:\nunable to find valid certification path to requested target;\nnested exception is javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target.</p>\n<p>I know it's asking for a ca certificate but How Can I download the certificate for the webhook URL when I'm calling the URL from Chrome it's showing &quot;This page isn’t working&quot;.</p>\n<p>Any help will be highly appreciated</p>\n<p><a href=\"https://i.stack.imgur.com/dO4l1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dO4l1.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","documentation","introspection","spring-shell"],"comments":[{"owner":{"account_id":1824786,"reputation":8418,"user_id":1657886,"display_name":"albert"},"score":0,"creation_date":1690537608,"post_id":76786583,"comment_id":135371013,"body_markdown":"Looking for a recommendation is off topic here should be asked at the sister site Software recommendations","body":"Looking for a recommendation is off topic here should be asked at the sister site Software recommendations"},{"owner":{"account_id":1824786,"reputation":8418,"user_id":1657886,"display_name":"albert"},"score":0,"creation_date":1690537717,"post_id":76786583,"comment_id":135371050,"body_markdown":"Off topic should be at software recommendations","body":"Off topic should be at software recommendations"}],"owner":{"account_id":4153704,"reputation":549,"user_id":3405484,"display_name":"Abdelghani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690537059,"creation_date":1690537059,"question_id":76786583,"body_markdown":"I am developing a shell from SpringShell and use the @ShellMethod to annotate the methods that are invoquable from the Shell. The annotation includes a brief description of the command/method.\r\n\r\n    @ShellMethod(&quot;this command does something&quot;)\r\nNow, I would like to generate a documentation that aggregates in a single output all these descriptions. I am guessing that there exists already a library that allows this. \r\n\r\nAm I right?\r\n\r\nAny hint would be appreciated.\r\n\r\nThanks in advance","title":"How to extract documentation from SpringShell @ShellMethod annotations","body":"<p>I am developing a shell from SpringShell and use the @ShellMethod to annotate the methods that are invoquable from the Shell. The annotation includes a brief description of the command/method.</p>\n<pre><code>@ShellMethod(&quot;this command does something&quot;)\n</code></pre>\n<p>Now, I would like to generate a documentation that aggregates in a single output all these descriptions. I am guessing that there exists already a library that allows this.</p>\n<p>Am I right?</p>\n<p>Any hint would be appreciated.</p>\n<p>Thanks in advance</p>\n"},{"tags":["java","log4j2"],"answers":[{"tags":[],"owner":{"account_id":1891192,"reputation":8826,"user_id":1709216,"display_name":"rgoers"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690537052,"creation_date":1451730899,"answer_id":34564913,"question_id":34559717,"body_markdown":"&gt;Only the log level of the first matching logger is used to accept or deny &gt;the log event. Once it is accepted it will be passed to all the parent &gt;loggers regardless of whatever level they specify.  &lt;strike&gt;I thought the &gt;documentation was pretty clear about that, but perhaps not.&lt;/strike&gt; \r\n\r\nAny suggestions on how the documentation could feasibly be updated for a clearer understanding of the expected outcome?","title":"Additivity in Log4J2 (2.5)","body":"<blockquote>\n<p>Only the log level of the first matching logger is used to accept or deny &gt;the log event. Once it is accepted it will be passed to all the parent &gt;loggers regardless of whatever level they specify.  <strike>I thought the &gt;documentation was pretty clear about that, but perhaps not.</strike></p>\n</blockquote>\n<p>Any suggestions on how the documentation could feasibly be updated for a clearer understanding of the expected outcome?</p>\n"}],"owner":{"account_id":5080543,"reputation":2464,"user_id":4076806,"accept_rate":88,"display_name":"Ueli Hofstetter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3397,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":34564913,"answer_count":1,"score":3,"last_activity_date":1690537052,"creation_date":1451679814,"question_id":34559717,"body_markdown":"According to the Log4J2 manual at http://logging.apache.org/log4j/2.x/manual/configuration.html configuring the loggers using\n\n    ...\n          &lt;Loggers&gt;\n            &lt;Logger name=&quot;com.foo.Bar&quot; level=&quot;trace&quot;&gt;\n              &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n            &lt;/Logger&gt;\n            &lt;Root level=&quot;error&quot;&gt;\n              &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n            &lt;/Root&gt;\n          &lt;/Loggers&gt;\n    ...\n\nand logging a statement like \n\n    Logger barLogger = LogManager.getLogger(Bar.class);\n    barLogger.info(&quot;A simple info message&quot;);\n\nshould produce the output \n\n&gt; &quot;A simple info message&quot;\n\nHowever, I am getting the message twice, i.e.\n\n&gt; &quot;A simple info message&quot;\n&gt;\n&gt; &quot;A simple info message&quot;\n\nand was wondering why? I know that the not specifying  `additivity=&quot;false&quot;` for the Bar logger will propagate the message to the root logger as well. However in this case, the log level of the root logger is set to error and as I read the manual should thus not log the message (which has only been logged as &quot;info&quot;) again.\n\nAny hints?\n\n**Update:** \nI saw the first answer of @rgoers and this seems to be reasonable. However, to me it seems like the documentation at http://logging.apache.org/log4j/2.x/manual/configuration.html still is either outdated or incorrect. According to the documentation, the program\n \n \n \n \n\n    public class MyApp {\n     \n        // Define a static logger variable so that it references the\n        // Logger instance named &quot;MyApp&quot;.\n        private static final Logger logger = LogManager.getLogger(MyApp.class);\n     \n        public static void main(final String... args) {\n     \n            // Set up a simple configuration that logs on the console.\n     \n            logger.trace(&quot;Entering application.&quot;);\n            Bar bar = new Bar();\n            if (!bar.doIt()) {\n                logger.error(&quot;Didn&#39;t do it.&quot;);\n            }\n            logger.trace(&quot;Exiting application.&quot;);\n        }\n    }\n     \n    public class Bar {\n      static final Logger logger = LogManager.getLogger(Bar.class.getName());\n     \n      public boolean doIt() {\n        logger.entry();\n        logger.error(&quot;Did it again!&quot;);\n        return logger.exit(false);\n      }\n    }\n\nwith log4J2 configuration \n\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;Configuration status=&quot;WARN&quot;&gt;\n      &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n          &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\n        &lt;/Console&gt;\n      &lt;/Appenders&gt;\n      &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.foo.Bar&quot; level=&quot;trace&quot;&gt;\n          &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;error&quot;&gt;\n          &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n        &lt;/Root&gt;\n      &lt;/Loggers&gt;\n    &lt;/Configuration&gt;\n\nshould produce the following output\n\n    17:13:01.540 [main] TRACE com.foo.Bar - entry\n    17:13:01.540 [main] TRACE com.foo.Bar - entry\n    17:13:01.540 [main] ERROR com.foo.Bar - Did it again!\n    17:13:01.540 [main] TRACE com.foo.Bar - exit (false)\n    17:13:01.540 [main] TRACE com.foo.Bar - exit (false)\n    17:13:01.540 [main] ERROR MyApp - Didn&#39;t do it.\n\nHowever, running this I am getting\n\n    00:45:49.951 [main] TRACE com.foo.Bar - entry\n    00:45:49.951 [main] TRACE com.foo.Bar - entry\n    00:45:49.951 [main] ERROR com.foo.Bar - Did it again!\n    00:45:49.951 [main] ERROR com.foo.Bar - Did it again!\n    00:45:49.951 [main] TRACE com.foo.Bar - exit with(false)\n    00:45:49.951 [main] TRACE com.foo.Bar - exit with(false)\n    00:45:49.951 [main] ERROR com.foo.MyApp - Didn&#39;t do it.\n\ni.e. &quot;Did it again!&quot; is logged twice instead of only once as mentioned in the documentation ....\n\n\n\n","title":"Additivity in Log4J2 (2.5)","body":"<p>According to the Log4J2 manual at <a href=\"http://logging.apache.org/log4j/2.x/manual/configuration.html\" rel=\"nofollow noreferrer\">http://logging.apache.org/log4j/2.x/manual/configuration.html</a> configuring the loggers using</p>\n<pre><code>...\n      &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.foo.Bar&quot; level=&quot;trace&quot;&gt;\n          &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;error&quot;&gt;\n          &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n        &lt;/Root&gt;\n      &lt;/Loggers&gt;\n...\n</code></pre>\n<p>and logging a statement like</p>\n<pre><code>Logger barLogger = LogManager.getLogger(Bar.class);\nbarLogger.info(&quot;A simple info message&quot;);\n</code></pre>\n<p>should produce the output</p>\n<blockquote>\n<p>&quot;A simple info message&quot;</p>\n</blockquote>\n<p>However, I am getting the message twice, i.e.</p>\n<blockquote>\n<p>&quot;A simple info message&quot;</p>\n<p>&quot;A simple info message&quot;</p>\n</blockquote>\n<p>and was wondering why? I know that the not specifying  <code>additivity=&quot;false&quot;</code> for the Bar logger will propagate the message to the root logger as well. However in this case, the log level of the root logger is set to error and as I read the manual should thus not log the message (which has only been logged as &quot;info&quot;) again.</p>\n<p>Any hints?</p>\n<p><strong>Update:</strong>\nI saw the first answer of @rgoers and this seems to be reasonable. However, to me it seems like the documentation at <a href=\"http://logging.apache.org/log4j/2.x/manual/configuration.html\" rel=\"nofollow noreferrer\">http://logging.apache.org/log4j/2.x/manual/configuration.html</a> still is either outdated or incorrect. According to the documentation, the program</p>\n<pre><code>public class MyApp {\n \n    // Define a static logger variable so that it references the\n    // Logger instance named &quot;MyApp&quot;.\n    private static final Logger logger = LogManager.getLogger(MyApp.class);\n \n    public static void main(final String... args) {\n \n        // Set up a simple configuration that logs on the console.\n \n        logger.trace(&quot;Entering application.&quot;);\n        Bar bar = new Bar();\n        if (!bar.doIt()) {\n            logger.error(&quot;Didn't do it.&quot;);\n        }\n        logger.trace(&quot;Exiting application.&quot;);\n    }\n}\n \npublic class Bar {\n  static final Logger logger = LogManager.getLogger(Bar.class.getName());\n \n  public boolean doIt() {\n    logger.entry();\n    logger.error(&quot;Did it again!&quot;);\n    return logger.exit(false);\n  }\n}\n</code></pre>\n<p>with log4J2 configuration</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration status=&quot;WARN&quot;&gt;\n  &lt;Appenders&gt;\n    &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n      &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&quot;/&gt;\n    &lt;/Console&gt;\n  &lt;/Appenders&gt;\n  &lt;Loggers&gt;\n    &lt;Logger name=&quot;com.foo.Bar&quot; level=&quot;trace&quot;&gt;\n      &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n    &lt;/Logger&gt;\n    &lt;Root level=&quot;error&quot;&gt;\n      &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n    &lt;/Root&gt;\n  &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>should produce the following output</p>\n<pre><code>17:13:01.540 [main] TRACE com.foo.Bar - entry\n17:13:01.540 [main] TRACE com.foo.Bar - entry\n17:13:01.540 [main] ERROR com.foo.Bar - Did it again!\n17:13:01.540 [main] TRACE com.foo.Bar - exit (false)\n17:13:01.540 [main] TRACE com.foo.Bar - exit (false)\n17:13:01.540 [main] ERROR MyApp - Didn't do it.\n</code></pre>\n<p>However, running this I am getting</p>\n<pre><code>00:45:49.951 [main] TRACE com.foo.Bar - entry\n00:45:49.951 [main] TRACE com.foo.Bar - entry\n00:45:49.951 [main] ERROR com.foo.Bar - Did it again!\n00:45:49.951 [main] ERROR com.foo.Bar - Did it again!\n00:45:49.951 [main] TRACE com.foo.Bar - exit with(false)\n00:45:49.951 [main] TRACE com.foo.Bar - exit with(false)\n00:45:49.951 [main] ERROR com.foo.MyApp - Didn't do it.\n</code></pre>\n<p>i.e. &quot;Did it again!&quot; is logged twice instead of only once as mentioned in the documentation ....</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":8,"creation_date":1376667797,"post_id":18277246,"comment_id":26809940,"body_markdown":"Go through [Generics Tutorial](http://docs.oracle.com/javase/tutorial/java/generics/)","body":"Go through <a href=\"http://docs.oracle.com/javase/tutorial/java/generics/\" rel=\"nofollow noreferrer\">Generics Tutorial</a>"},{"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"score":1,"creation_date":1376667904,"post_id":18277246,"comment_id":26810008,"body_markdown":"More specifically [This page](http://docs.oracle.com/javase/tutorial/java/generics/types.html)","body":"More specifically <a href=\"http://docs.oracle.com/javase/tutorial/java/generics/types.html\" rel=\"nofollow noreferrer\">This page</a>"}],"answers":[{"tags":[],"owner":{"account_id":2103622,"reputation":26956,"user_id":1870555,"accept_rate":75,"display_name":"christopher"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1376667920,"creation_date":1376667920,"answer_id":18277302,"question_id":18277246,"body_markdown":"IF you&#39;re in a class, that has a declared generic type, your method might look like this:\r\n\r\n    public T someMethod();\r\n\r\nHowever, if you&#39;re not in a class that has some generic type declared, you can declare one for just that method scope.\r\n\r\n    public &lt;T&gt; T someMethod();","title":"What is return type &lt;T&gt; T?","body":"<p>IF you're in a class, that has a declared generic type, your method might look like this:</p>\n\n<pre><code>public T someMethod();\n</code></pre>\n\n<p>However, if you're not in a class that has some generic type declared, you can declare one for just that method scope.</p>\n\n<pre><code>public &lt;T&gt; T someMethod();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12266969,"reputation":21,"user_id":8953243,"display_name":"Chamara dunusingha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690536954,"creation_date":1515735283,"answer_id":48220150,"question_id":18277246,"body_markdown":"we entered into a program the `return` keyword and that program will terminate from that scope.\r\n\r\n```java\r\n    import java.util.*;\r\n\r\n    class Example {\r\n         public static void main(String args[]) {  \r\n             for (int i = 0; i &lt; 10; i++) {\r\n                 if (i == 4) {\r\n                     return;\r\n                 }\r\n\r\n                 System.out.println(i);\r\n             }\r\n         }\r\n    }\r\n```","title":"What is return type &lt;T&gt; T?","body":"<p>we entered into a program the <code>return</code> keyword and that program will terminate from that scope.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.util.*;\n\n    class Example {\n         public static void main(String args[]) {  \n             for (int i = 0; i &lt; 10; i++) {\n                 if (i == 4) {\n                     return;\n                 }\n\n                 System.out.println(i);\n             }\n         }\n    }\n</code></pre>\n"}],"owner":{"account_id":215504,"reputation":52462,"user_id":470184,"accept_rate":91,"display_name":"blue-sky"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234,"favorite_count":0,"down_vote_count":4,"up_vote_count":2,"accepted_answer_id":18277302,"answer_count":2,"score":-2,"last_activity_date":1690536954,"creation_date":1376667763,"question_id":18277246,"body_markdown":"What is the return type of `&lt;T&gt; T` I can understand the return type T (T can be an object of any type) but what is the significance of `&lt;T&gt;` ?","title":"What is return type &lt;T&gt; T?","body":"<p>What is the return type of <code>&lt;T&gt; T</code> I can understand the return type T (T can be an object of any type) but what is the significance of <code>&lt;T&gt;</code> ?</p>\n"},{"tags":["java","kotlin","realm"],"owner":{"account_id":10526668,"reputation":3195,"user_id":10426052,"display_name":"Baterka"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690536903,"creation_date":1690536903,"question_id":76786560,"body_markdown":"In Kotlin Realm SDK, is there a way to define for example:\r\n\r\n`var lcalDateTime: LocalDateTime = LocalDateTime.now()`\r\n\r\nin RealmObject in and add support for serialization of this class into Realm?\r\nI see that new Kotlin SDK versions support KSerializer but thats probably not meant for this right? It would be nice if I can transform the java.time classes by some custom transformer into RealmInstant.\r\n\r\nAt this moment, I am doing it like so:\r\n```\r\n\r\n    @PersistedName(&quot;dayScheduled&quot;)\r\n    private var _dayScheduled: RealmInstant = RealmInstant.now()\r\n    var dayScheduled: LocalDate\r\n        get() = LocalDate.from(_dayScheduled.toInstant().atZone(ZoneOffset.UTC))\r\n        set(value) {\r\n            _dayScheduled = value.atStartOfDay().toRealmInstant()\r\n        }\r\n```\r\n\r\nThis solution works but I am seraching for something with less boilerplate.","title":"Is possible to save custom datatypes like Java’s LocalDateTime into Realm (Kotlin SDK)?","body":"<p>In Kotlin Realm SDK, is there a way to define for example:</p>\n<p><code>var lcalDateTime: LocalDateTime = LocalDateTime.now()</code></p>\n<p>in RealmObject in and add support for serialization of this class into Realm?\nI see that new Kotlin SDK versions support KSerializer but thats probably not meant for this right? It would be nice if I can transform the java.time classes by some custom transformer into RealmInstant.</p>\n<p>At this moment, I am doing it like so:</p>\n<pre><code>\n    @PersistedName(&quot;dayScheduled&quot;)\n    private var _dayScheduled: RealmInstant = RealmInstant.now()\n    var dayScheduled: LocalDate\n        get() = LocalDate.from(_dayScheduled.toInstant().atZone(ZoneOffset.UTC))\n        set(value) {\n            _dayScheduled = value.atStartOfDay().toRealmInstant()\n        }\n</code></pre>\n<p>This solution works but I am seraching for something with less boilerplate.</p>\n"},{"tags":["java","filenet-p8","filenet-content-engine"],"answers":[{"tags":[],"owner":{"account_id":9317904,"reputation":1271,"user_id":6917637,"accept_rate":18,"display_name":"bajji"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690536549,"creation_date":1497535831,"answer_id":44569759,"question_id":44564880,"body_markdown":"Since I can&#39;t comment because of reputation, I have to answer it\r\nDid you try\r\n\r\n    doc.checkin(AutoClassify.DO_NOT_AUTO_CLASSIFY, CheckinType.MAJOR_VERSION);\r\n\r\nbefore `doc.save()`\r\n\r\nUpdated answer\r\n\r\nAlso instead of `event.get_SourceObject();` can you try like \r\n\r\n    changeEvent.get_SourceObjectId(); \r\n    Document doc= Factory.Document.fetchInstance(os, documentId, propertyFilter);\r\n\r\n","title":"FileNET P8 5.2.1 FP2 - edit permissions on document creation","body":"<p>Since I can't comment because of reputation, I have to answer it\nDid you try</p>\n<pre><code>doc.checkin(AutoClassify.DO_NOT_AUTO_CLASSIFY, CheckinType.MAJOR_VERSION);\n</code></pre>\n<p>before <code>doc.save()</code></p>\n<p>Updated answer</p>\n<p>Also instead of <code>event.get_SourceObject();</code> can you try like</p>\n<pre><code>changeEvent.get_SourceObjectId(); \nDocument doc= Factory.Document.fetchInstance(os, documentId, propertyFilter);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5508017,"reputation":5986,"user_id":4375327,"accept_rate":76,"display_name":"Amessihel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675328984,"creation_date":1497615958,"answer_id":44589228,"question_id":44564880,"body_markdown":"As said by @Manjunatha Muniyappa, I solved my problem by fetching the document from the Object store rather than getting it from the CreationEvent object. [It seems to be recommended by the editor][1] (*&quot;as a best practice, fetch the persisted source object of the event&quot;*). Also by this way the CreationEvent won&#39;t be raised (I dunno why).\r\n\r\nSo the solution is to create an **asynchronous subscription** on Creation Event, associated with this handler class below :\r\n\r\n    // Only relevant lines are kept.\r\n    public class CustomEventAction implements EventActionHandler {\r\n    \t// [...]\r\n    \tpublic void onEvent(ObjectChangeEvent event, Id eventId) {\r\n    \t\tif (event instanceof CreationEvent) {\r\n    \t\t\tObjectStore os = event.getObjectStore();\r\n    \t\t\tId id = event.get_SourceObjectId();\r\n    \t\t\tFilterElement fe = \r\n    \t\t\t\t\tnew FilterElement(null, null, null, &quot;permissions creator&quot;, null);\r\n    \t\t\tPropertyFilter pf = new PropertyFilter();\r\n    \t\t\tpf.addIncludeProperty(fe);\r\n    \t\t\tDocument doc = Factory.Document.fetchInstance(os, id, pf);\r\n    \t\t\t\r\n    \t\t\tAccessPermissionList permissions;\r\n    \t\t\r\n    \t\t\tString creatorGranteeName = getCreatorGranteeName(doc);\r\n    \t\t\tpermissions = doc.get_Permissions();\r\n    \t\t\tIterator&lt;AccessPermission&gt; iter = permissions.iterator();\r\n    \t\t\t\r\n    \t\t\tboolean found = false;\r\n    \t\t\twhile (iter.hasNext()) {\r\n    \t\t\t\tAccessPermission ace = (AccessPermission) iter.next();\r\n    \t\t\t\tif (ace.get_GranteeName().equals(creatorGranteeName)) {\r\n    \t\t\t\t\tpermissions.remove(ace);\r\n    \t\t\t\t\tfound = true;\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif (!found) {\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tdoc.save(RefreshMode.REFRESH);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n \r\n\r\n\r\n  [1]: https://www.ibm.com/docs/en/filenet-p8-platform/5.2.0?topic=subscriptions-working#subscription_procedures__creating_eventhandler","title":"FileNET P8 5.2.1 FP2 - edit permissions on document creation","body":"<p>As said by @Manjunatha Muniyappa, I solved my problem by fetching the document from the Object store rather than getting it from the CreationEvent object. <a href=\"https://www.ibm.com/docs/en/filenet-p8-platform/5.2.0?topic=subscriptions-working#subscription_procedures__creating_eventhandler\" rel=\"nofollow noreferrer\">It seems to be recommended by the editor</a> (<em>&quot;as a best practice, fetch the persisted source object of the event&quot;</em>). Also by this way the CreationEvent won't be raised (I dunno why).</p>\n<p>So the solution is to create an <strong>asynchronous subscription</strong> on Creation Event, associated with this handler class below :</p>\n<pre><code>// Only relevant lines are kept.\npublic class CustomEventAction implements EventActionHandler {\n    // [...]\n    public void onEvent(ObjectChangeEvent event, Id eventId) {\n        if (event instanceof CreationEvent) {\n            ObjectStore os = event.getObjectStore();\n            Id id = event.get_SourceObjectId();\n            FilterElement fe = \n                    new FilterElement(null, null, null, &quot;permissions creator&quot;, null);\n            PropertyFilter pf = new PropertyFilter();\n            pf.addIncludeProperty(fe);\n            Document doc = Factory.Document.fetchInstance(os, id, pf);\n            \n            AccessPermissionList permissions;\n        \n            String creatorGranteeName = getCreatorGranteeName(doc);\n            permissions = doc.get_Permissions();\n            Iterator&lt;AccessPermission&gt; iter = permissions.iterator();\n            \n            boolean found = false;\n            while (iter.hasNext()) {\n                AccessPermission ace = (AccessPermission) iter.next();\n                if (ace.get_GranteeName().equals(creatorGranteeName)) {\n                    permissions.remove(ace);\n                    found = true;\n                    break;\n                }\n            }\n            \n            if (!found) {\n                return;\n            }\n            \n            doc.save(RefreshMode.REFRESH);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5508017,"reputation":5986,"user_id":4375327,"accept_rate":76,"display_name":"Amessihel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":873,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":44589228,"answer_count":2,"score":0,"last_activity_date":1690536549,"creation_date":1497521751,"question_id":44564880,"body_markdown":"We&#39;re asked to set up permissions when a document is created.\r\n\r\nBasically the code part written is reproduced below :\r\n\r\n    public void onEvent(ObjectChangeEvent event, Id eventId) {\r\n    \tif (event instanceof CreationEvent) {\r\n    \t\tDocument doc = (Document) event.get_SourceObject();\r\n    \t\tAccessPermissionList permissions = doc.get_Permissions();\r\n    \t\tString creatorGranteeName = getCreatorGranteeName(doc);\r\n    \t\tIterator&lt;AccessPermission&gt; iter = permissions.iterator();\r\n            boolean found = false;\r\n    \t\twhile (iter.hasNext()) {\r\n    \t\t\tAccessPermission ace = (AccessPermission) iter.next();\r\n    \t\t\tif (ace.get_GranteeName().equals(creatorGranteeName)) {\r\n    \t\t\t\tpermissions.remove(ace);\r\n    \t\t\t\t// relevant ? is &quot;permission&quot; duplicated ?\r\n    \t\t\t\tdoc.set_Permissions(permissions);\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n            if (!found) return ; // no need to save\r\n    \t\tdoc.save(RefreshMode.REFRESH); // --&gt; triggers CreationEvent -&gt; loop\r\n    \t\tSystem.out.println(&quot;Saved.&quot;); // never reached\r\n    \t}\r\n    }\r\n\r\n\r\nI tried two ways : a preprocessor or a subscription.\r\n\r\n**Preprocessor** doesn&#39;t work since the document doesn&#39;t seems to be fully built, especially about permissions (only administrators are set). Fetching doesn&#39;t seem to work (which is understandable, since the document isn&#39;t yet stored).\r\n\r\n**Susbcription** crashes if it&#39;s *synchronously* processed at `doc.save()` line, regardless if the refresh mode is `RefreshMode.REFRESH` or `RefreshMode.NO_REFRESH`.\r\nIf it&#39;s *asynchrounsly* done, it seems to loop, as if `doc.save` retriggers a `CreationEvent`.\r\n\r\nSo I&#39;m looking for a help if I did something wrong, or for a third way if it exists.\r\n\r\nEDIT : added block code which skips saving if no permissions to remove was found.","title":"FileNET P8 5.2.1 FP2 - edit permissions on document creation","body":"<p>We're asked to set up permissions when a document is created.</p>\n\n<p>Basically the code part written is reproduced below :</p>\n\n<pre><code>public void onEvent(ObjectChangeEvent event, Id eventId) {\n    if (event instanceof CreationEvent) {\n        Document doc = (Document) event.get_SourceObject();\n        AccessPermissionList permissions = doc.get_Permissions();\n        String creatorGranteeName = getCreatorGranteeName(doc);\n        Iterator&lt;AccessPermission&gt; iter = permissions.iterator();\n        boolean found = false;\n        while (iter.hasNext()) {\n            AccessPermission ace = (AccessPermission) iter.next();\n            if (ace.get_GranteeName().equals(creatorGranteeName)) {\n                permissions.remove(ace);\n                // relevant ? is \"permission\" duplicated ?\n                doc.set_Permissions(permissions);\n                break;\n            }\n        }\n        if (!found) return ; // no need to save\n        doc.save(RefreshMode.REFRESH); // --&gt; triggers CreationEvent -&gt; loop\n        System.out.println(\"Saved.\"); // never reached\n    }\n}\n</code></pre>\n\n<p>I tried two ways : a preprocessor or a subscription.</p>\n\n<p><strong>Preprocessor</strong> doesn't work since the document doesn't seems to be fully built, especially about permissions (only administrators are set). Fetching doesn't seem to work (which is understandable, since the document isn't yet stored).</p>\n\n<p><strong>Susbcription</strong> crashes if it's <em>synchronously</em> processed at <code>doc.save()</code> line, regardless if the refresh mode is <code>RefreshMode.REFRESH</code> or <code>RefreshMode.NO_REFRESH</code>.\nIf it's <em>asynchrounsly</em> done, it seems to loop, as if <code>doc.save</code> retriggers a <code>CreationEvent</code>.</p>\n\n<p>So I'm looking for a help if I did something wrong, or for a third way if it exists.</p>\n\n<p>EDIT : added block code which skips saving if no permissions to remove was found.</p>\n"},{"tags":["java","spring","microservices","spring-cloud","api-gateway"],"answers":[{"tags":[],"owner":{"account_id":27990171,"reputation":67,"user_id":21376203,"display_name":"MatildaEliz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690533980,"creation_date":1690533980,"answer_id":76786171,"question_id":76785852,"body_markdown":"I used yml file for  config. I turned yml file to properties file and problem is solved","title":"Spring Cloud API GATEWAY routing does not working","body":"<p>I used yml file for  config. I turned yml file to properties file and problem is solved</p>\n"}],"owner":{"account_id":27990171,"reputation":67,"user_id":21376203,"display_name":"MatildaEliz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690535811,"creation_date":1690531117,"question_id":76785852,"body_markdown":"I developing new project using Spring Cloud Gateway and microservices. When I run the method with the microservice&#39;s own port, the method works. But when I call it with the port of the gateway, the route operation does not occur. Additionally, User Service And Gateway is registered on Eureka Server and used DiscoveryClient annotation\r\n\r\n\r\n (type=Not Found, status=404).\r\n\r\nGateway YAML file\r\n\r\nserver:\r\n\r\n    port: 9191 spring: application: name: API-GATEWAYcloud: gateway:  routes:  -id: USER-SERVICE uri: lb://USER-SERVICE/ predicates:-Path=/user/**\r\n\r\n\r\n\r\neureka:\r\n\r\n      client:\r\n        service-url:\r\n          defaultZone: http://localhost:8761/eureka/\r\n        register-with-eureka: true\r\n        fetch-registry: true\r\n      instance:\r\n        hostname: localhost\r\n\r\n","title":"Spring Cloud API GATEWAY routing does not working","body":"<p>I developing new project using Spring Cloud Gateway and microservices. When I run the method with the microservice's own port, the method works. But when I call it with the port of the gateway, the route operation does not occur. Additionally, User Service And Gateway is registered on Eureka Server and used DiscoveryClient annotation</p>\n<p>(type=Not Found, status=404).</p>\n<p>Gateway YAML file</p>\n<p>server:</p>\n<pre><code>port: 9191 spring: application: name: API-GATEWAYcloud: gateway:  routes:  -id: USER-SERVICE uri: lb://USER-SERVICE/ predicates:-Path=/user/**\n</code></pre>\n<p>eureka:</p>\n<pre><code>  client:\n    service-url:\n      defaultZone: http://localhost:8761/eureka/\n    register-with-eureka: true\n    fetch-registry: true\n  instance:\n    hostname: localhost\n</code></pre>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":15752522,"reputation":648,"user_id":11366574,"display_name":"Nikhil Jain"},"score":0,"creation_date":1690533314,"post_id":76786067,"comment_id":135370100,"body_markdown":"Please add more details to the question or code snippet.","body":"Please add more details to the question or code snippet."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690573035,"post_id":76786067,"comment_id":135377706,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":11813923,"reputation":342,"user_id":8644685,"display_name":"Ivan Abakumov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690535385,"creation_date":1690535385,"answer_id":76786357,"question_id":76786067,"body_markdown":"If it&#39;s a scrollbar then you can add this property to your xml\r\n\r\n     android:scrollbars=&quot;none&quot;","title":"How to remove this line on recycler view?","body":"<p>If it's a scrollbar then you can add this property to your xml</p>\n<pre><code> android:scrollbars=&quot;none&quot;\n</code></pre>\n"}],"owner":{"account_id":28935076,"reputation":1,"user_id":22162843,"display_name":"aladium"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690535385,"creation_date":1690533156,"question_id":76786067,"body_markdown":"[![I can&#39;t removing this line in a very simple recycler view](https://i.stack.imgur.com/C4KsI.png)](https://i.stack.imgur.com/C4KsI.png)\r\n\r\nI can&#39;t remove that line on the recycler view shown in the image(above in the link)\r\n\r\nThe items row XML file is empty. It has a single card view, and rclrv view adapter also doesn&#39;t contain anything. But that line appears when I add an item.","title":"How to remove this line on recycler view?","body":"<p><a href=\"https://i.stack.imgur.com/C4KsI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C4KsI.png\" alt=\"I can't removing this line in a very simple recycler view\" /></a></p>\n<p>I can't remove that line on the recycler view shown in the image(above in the link)</p>\n<p>The items row XML file is empty. It has a single card view, and rclrv view adapter also doesn't contain anything. But that line appears when I add an item.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690534703,"creation_date":1690534703,"answer_id":76786269,"question_id":76786069,"body_markdown":"As you correctly mentioned this code do the same thing. However, in that particular case there is some related one to each other advantages of using `public Parent(String name)`:\r\n\r\n - It gives you an ability to mark field `String name` final, what is actually meant to be in that case.\r\n \r\n - It&#39;s more straightforward: you probably expect `Parent` class to have `name` defined, so it shouldn&#39;t depend on how `Child` class is implemented, or whether it even exists.\r\n \r\n \r\n - It would implement basic OOP principle: encapsulation","title":"Assignment of class property from child vs calling super, is there any significant difference?","body":"<p>As you correctly mentioned this code do the same thing. However, in that particular case there is some related one to each other advantages of using <code>public Parent(String name)</code>:</p>\n<ul>\n<li><p>It gives you an ability to mark field <code>String name</code> final, what is actually meant to be in that case.</p>\n</li>\n<li><p>It's more straightforward: you probably expect <code>Parent</code> class to have <code>name</code> defined, so it shouldn't depend on how <code>Child</code> class is implemented, or whether it even exists.</p>\n</li>\n<li><p>It would implement basic OOP principle: encapsulation</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"display_name":"user6073886"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690535181,"creation_date":1690534742,"answer_id":76786278,"question_id":76786069,"body_markdown":"In both your examples creating a `Child` object via `new Child();` would result in a Child object with the `String name` field set to `&quot;Child&quot;`. \r\n\r\nConstructor chaining is usually done to make code more maintainable and avoid duplicate code. eG Let&#39;s say instead of using a fixed value the `String name` attribute would be an argument that would have to be passed into the constructor. And we also would like to disallow `null` values for the `String name` attribute and throw an error if a user tries to create an Object by passing `null` into the constructor.\r\n\r\nWithout constructor chaining and calling `super(name)` you would end up with code like this: \r\n\r\n    public class Parent {\r\n        protected String name;\r\n\r\n        public Parent(String name) {\r\n            if(name == null) {\r\n                throw new IllegalArgumentException(&quot;Name cannot be null!&quot;);\r\n            }\r\n            this.name = name;\r\n        }\r\n    }\r\n\r\n    public class Child extends Parent{\r\n        public Child(String name) {\r\n            if(name == null) {\r\n                throw new IllegalArgumentException(&quot;Name cannot be null!&quot;);\r\n            }\r\n            this.name = name;\r\n        }\r\n    }\r\n\r\n\r\nWhile if you use Constructor chaining you would not have to write duplicate code as you can put all logic into Parent constructor that is always called:\r\n\r\n\r\n\r\n    public class Parent {\r\n        protected String name;\r\n\r\n        public Parent(String name) {\r\n            if(name == null) {\r\n                throw new IllegalArgumentException(&quot;Name cannot be null!&quot;);\r\n            }\r\n            this.name = name;\r\n        }\r\n    }\r\n\r\n    public class Child extends Parent{\r\n        public Child(String name) {\r\n            super(name);\r\n        }\r\n    }","title":"Assignment of class property from child vs calling super, is there any significant difference?","body":"<p>In both your examples creating a <code>Child</code> object via <code>new Child();</code> would result in a Child object with the <code>String name</code> field set to <code>&quot;Child&quot;</code>.</p>\n<p>Constructor chaining is usually done to make code more maintainable and avoid duplicate code. eG Let's say instead of using a fixed value the <code>String name</code> attribute would be an argument that would have to be passed into the constructor. And we also would like to disallow <code>null</code> values for the <code>String name</code> attribute and throw an error if a user tries to create an Object by passing <code>null</code> into the constructor.</p>\n<p>Without constructor chaining and calling <code>super(name)</code> you would end up with code like this:</p>\n<pre><code>public class Parent {\n    protected String name;\n\n    public Parent(String name) {\n        if(name == null) {\n            throw new IllegalArgumentException(&quot;Name cannot be null!&quot;);\n        }\n        this.name = name;\n    }\n}\n\npublic class Child extends Parent{\n    public Child(String name) {\n        if(name == null) {\n            throw new IllegalArgumentException(&quot;Name cannot be null!&quot;);\n        }\n        this.name = name;\n    }\n}\n</code></pre>\n<p>While if you use Constructor chaining you would not have to write duplicate code as you can put all logic into Parent constructor that is always called:</p>\n<pre><code>public class Parent {\n    protected String name;\n\n    public Parent(String name) {\n        if(name == null) {\n            throw new IllegalArgumentException(&quot;Name cannot be null!&quot;);\n        }\n        this.name = name;\n    }\n}\n\npublic class Child extends Parent{\n    public Child(String name) {\n        super(name);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2067336,"reputation":2848,"user_id":1842599,"display_name":"Andrej Istomin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690535172,"creation_date":1690534857,"answer_id":76786297,"question_id":76786069,"body_markdown":"The question is quite abstract, so my answer will also be abstract :) \r\n\r\nAs you pointed out, for this particular implementation it doesn&#39;t really matter, technically you&#39;re doing the same. But you may have some logic of how you assign the field (although, I&#39;m personally against any logic in the constructor, besides the fields assignment). E. g. You may like to &quot;clean up&quot; your `name`, by replacing the trailing spaces etc. or to check if the name is valid or not null, then it would be beneficial to have it in the parent class, so none of subclasses can mess the logic up. That means that your second example better suites this case. It maybe opposite, when you need to make some special cleanup in the child, but not in the parent, then the first example is better. That&#39;s from practical perspective.\r\n\r\nMy personal opinion is that the second example is better, because it generally makes code more simple. I usually even try to avoid setters and make the field `final`, or maybe even private. In another words, if this `name` field belongs to the `Parent`, then let parent assign it and don&#39;t try to intervene. Then every time when you see that `name` is wrong, or you need to somehow change the logic of how you assigning the name, you know one and only place where to do that. Maybe tomorrow you&#39;ll decide to introduce two additional fields for conveniency `firstName` and `lastName` and the logic will be like: split the name with a space and assign first and last name. If you go with the first example, you will need to duplicate this logic. In the second example, you just hook into `Parent`&#39;s constructor.","title":"Assignment of class property from child vs calling super, is there any significant difference?","body":"<p>The question is quite abstract, so my answer will also be abstract :)</p>\n<p>As you pointed out, for this particular implementation it doesn't really matter, technically you're doing the same. But you may have some logic of how you assign the field (although, I'm personally against any logic in the constructor, besides the fields assignment). E. g. You may like to &quot;clean up&quot; your <code>name</code>, by replacing the trailing spaces etc. or to check if the name is valid or not null, then it would be beneficial to have it in the parent class, so none of subclasses can mess the logic up. That means that your second example better suites this case. It maybe opposite, when you need to make some special cleanup in the child, but not in the parent, then the first example is better. That's from practical perspective.</p>\n<p>My personal opinion is that the second example is better, because it generally makes code more simple. I usually even try to avoid setters and make the field <code>final</code>, or maybe even private. In another words, if this <code>name</code> field belongs to the <code>Parent</code>, then let parent assign it and don't try to intervene. Then every time when you see that <code>name</code> is wrong, or you need to somehow change the logic of how you assigning the name, you know one and only place where to do that. Maybe tomorrow you'll decide to introduce two additional fields for conveniency <code>firstName</code> and <code>lastName</code> and the logic will be like: split the name with a space and assign first and last name. If you go with the first example, you will need to duplicate this logic. In the second example, you just hook into <code>Parent</code>'s constructor.</p>\n"}],"owner":{"account_id":3588258,"reputation":44,"user_id":2994883,"display_name":"user2994883"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76786278,"answer_count":3,"score":0,"last_activity_date":1690535181,"creation_date":1690533161,"question_id":76786069,"body_markdown":"I&#39;m new to java so you&#39;ll have to excuse my ignorance.\r\n\r\nIs there any meaningful difference between implicitly setting a value to a class property from a parent class as opposed to using a constructor and calling `super`.\r\n\r\n\r\nI don&#39;t think I explained properly what I mean so here&#39;s a concrete example\r\n\r\n    public class Parent {\r\n        protected String name;\r\n    }\r\n\r\n    public class Child extends Parent{\r\n        public Child() {\r\n            this.name = &quot;Child&quot;;\r\n        }\r\n    }\r\n\r\nAs opposed to\r\n\r\n    public class Parent {\r\n        protected String name;\r\n    \r\n        public Parent(String name) {\r\n            this.name = name;\r\n        }\r\n    }\r\n\r\n    public class Child extends Parent{\r\n        public Child() {\r\n            super(&quot;Child&quot;);\r\n        }\r\n    }\r\n\r\nThis code, essentially, does the same thing. If setters/getters would exist in either parent or child they&#39;d work pretty much how you&#39;d expect them to work.","title":"Assignment of class property from child vs calling super, is there any significant difference?","body":"<p>I'm new to java so you'll have to excuse my ignorance.</p>\n<p>Is there any meaningful difference between implicitly setting a value to a class property from a parent class as opposed to using a constructor and calling <code>super</code>.</p>\n<p>I don't think I explained properly what I mean so here's a concrete example</p>\n<pre><code>public class Parent {\n    protected String name;\n}\n\npublic class Child extends Parent{\n    public Child() {\n        this.name = &quot;Child&quot;;\n    }\n}\n</code></pre>\n<p>As opposed to</p>\n<pre><code>public class Parent {\n    protected String name;\n\n    public Parent(String name) {\n        this.name = name;\n    }\n}\n\npublic class Child extends Parent{\n    public Child() {\n        super(&quot;Child&quot;);\n    }\n}\n</code></pre>\n<p>This code, essentially, does the same thing. If setters/getters would exist in either parent or child they'd work pretty much how you'd expect them to work.</p>\n"},{"tags":["java","spring-boot","graalvm","spring-native","native-maven-plugin"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690535609,"post_id":76786328,"comment_id":135370592,"body_markdown":"`PropertiesFileLoader(&quot;alternate.properties&quot;);` is already loading from the wrong location. That should be `config/prod/alternate.properties` instead.","body":"<code>PropertiesFileLoader(&quot;alternate.properties&quot;);</code> is already loading from the wrong location. That should be <code>config&#47;prod&#47;alternate.properties</code> instead."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690538100,"post_id":76786328,"comment_id":135371129,"body_markdown":"Try `classpath:/config/prod/alternate.properties`","body":"Try <code>classpath:&#47;config&#47;prod&#47;alternate.properties</code>"}],"owner":{"account_id":6988093,"reputation":121,"user_id":5462346,"display_name":"Anurag Ambuj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690535090,"creation_date":1690535090,"question_id":76786328,"body_markdown":"I am migrating an existing spring boot project to spring boot native project. In my **native** spring boot project I have a property file alternate.properties in the location:\r\n\r\n`resources/config/prod/alternate.properties`.\r\n\r\nThis file is manually being loaded using \r\n```\r\nPropertiesFileLoader altProps = new PropertiesFileLoader(&quot;alternate.properties&quot;);\r\n```\r\n\r\nNow when I build the native image and run the executable:\r\n\r\n```\r\nCaused by: java.io.FileNotFoundException: Property file &#39;alternate.properties&#39; is not found in classpath\r\n        at com.blusmart.trace.config.utils.PropertiesFileLoader.loadFromClasspath(PropertiesFileLoader.java:131) ~[na:na]\r\n        ... 88 common frames omitted\r\n```\r\n\r\nJDK: GraalVM 22.3, JDK 17.0.7\r\nOS: MacOS on M2 Chip (aarch64)\r\n\r\nI tried adding those in a file named resource-config-prod.json (inside resources folder) like this:\r\n\r\n```\r\n{\r\n  &quot;resources&quot;: {\r\n    &quot;includes&quot;: [\r\n      {&quot;pattern&quot;: &quot;src/main/resources/config/prod/alternate.properties&quot;, &quot;fileEncoding&quot;: &quot;UTF-8&quot;}\r\n    ]\r\n  }\r\n}\r\n```\r\nTried many permutations for pattern, like\r\n```\r\nconfig/prod/alternate.properties\r\n*.properties$\r\n*.alternate.properties$\r\n*.config/prod/alternate.properties$\r\nsrc/main/resources/config/prod/alternate.properties\r\n...\r\n...\r\n...\r\n``` \r\nbut to now avail, it just doesn&#39;t find the property file.\r\n\r\nBuild arguments in native-maven-plugin\r\n\r\n```\r\n&lt;buildArgs&gt;\r\n\t&lt;arg&gt;\r\n\t\t--verbose\r\n\t\t-J-XX:MaxRAMPercentage=80\r\n\t\t-J-XshowSettings:vm\r\n\t\t-Dspring.aot.enabled=true\r\n\t\t-H:TraceClassInitialization=true\r\n\t\t-H:+ReportExceptionStackTraces\r\n\t\t-H:+RunReachabilityHandlersConcurrently\r\n\t\t-H:Name=trace-app\r\n\t\t-H:DashboardDump=trace-app\r\n\t\t-H:+DashboardAll\r\n\t\t-H:IncludeResources=org/joda/time/tz/data/.*\r\n\t\t-H:ResourceConfigurationFiles=src/main/resources/resource-config-prod.json\r\n\t\t-H:Class=com.hidden.trace.TraceApplication\r\n\t\t--initialize-at-build-time=org.slf4j.LoggerFactory,ch.qos.logback,org.slf4j.MDC,org.slf4j.impl.StaticLoggerBinder,\r\n\t\t--initialize-at-run-time=io.netty,org.apache.commons.lang3.tuple.ImmutablePair\r\n\t\t\t\t\t\t\t\t-Dspring.graal.remove-unused-autoconfig=true\r\n\t\t\t\t\t\t\t\t-Dspring.graal.remove-yaml-support=true\r\n\t&lt;/arg&gt;\r\n&lt;/buildArgs&gt;\r\n```\r\n\r\nRequesting your help with this, I am unable to find a solution that works online, and the documentation for Graal VM doesn&#39;t seem to help me. Is there anything I am missing, or is there any another way to do this ?\r\n\r\n\r\n\r\n","title":"How to load custom property file located inside a folder in resources in graalvm native image?","body":"<p>I am migrating an existing spring boot project to spring boot native project. In my <strong>native</strong> spring boot project I have a property file alternate.properties in the location:</p>\n<p><code>resources/config/prod/alternate.properties</code>.</p>\n<p>This file is manually being loaded using</p>\n<pre><code>PropertiesFileLoader altProps = new PropertiesFileLoader(&quot;alternate.properties&quot;);\n</code></pre>\n<p>Now when I build the native image and run the executable:</p>\n<pre><code>Caused by: java.io.FileNotFoundException: Property file 'alternate.properties' is not found in classpath\n        at com.blusmart.trace.config.utils.PropertiesFileLoader.loadFromClasspath(PropertiesFileLoader.java:131) ~[na:na]\n        ... 88 common frames omitted\n</code></pre>\n<p>JDK: GraalVM 22.3, JDK 17.0.7\nOS: MacOS on M2 Chip (aarch64)</p>\n<p>I tried adding those in a file named resource-config-prod.json (inside resources folder) like this:</p>\n<pre><code>{\n  &quot;resources&quot;: {\n    &quot;includes&quot;: [\n      {&quot;pattern&quot;: &quot;src/main/resources/config/prod/alternate.properties&quot;, &quot;fileEncoding&quot;: &quot;UTF-8&quot;}\n    ]\n  }\n}\n</code></pre>\n<p>Tried many permutations for pattern, like</p>\n<pre><code>config/prod/alternate.properties\n*.properties$\n*.alternate.properties$\n*.config/prod/alternate.properties$\nsrc/main/resources/config/prod/alternate.properties\n...\n...\n...\n</code></pre>\n<p>but to now avail, it just doesn't find the property file.</p>\n<p>Build arguments in native-maven-plugin</p>\n<pre><code>&lt;buildArgs&gt;\n    &lt;arg&gt;\n        --verbose\n        -J-XX:MaxRAMPercentage=80\n        -J-XshowSettings:vm\n        -Dspring.aot.enabled=true\n        -H:TraceClassInitialization=true\n        -H:+ReportExceptionStackTraces\n        -H:+RunReachabilityHandlersConcurrently\n        -H:Name=trace-app\n        -H:DashboardDump=trace-app\n        -H:+DashboardAll\n        -H:IncludeResources=org/joda/time/tz/data/.*\n        -H:ResourceConfigurationFiles=src/main/resources/resource-config-prod.json\n        -H:Class=com.hidden.trace.TraceApplication\n        --initialize-at-build-time=org.slf4j.LoggerFactory,ch.qos.logback,org.slf4j.MDC,org.slf4j.impl.StaticLoggerBinder,\n        --initialize-at-run-time=io.netty,org.apache.commons.lang3.tuple.ImmutablePair\n                                -Dspring.graal.remove-unused-autoconfig=true\n                                -Dspring.graal.remove-yaml-support=true\n    &lt;/arg&gt;\n&lt;/buildArgs&gt;\n</code></pre>\n<p>Requesting your help with this, I am unable to find a solution that works online, and the documentation for Graal VM doesn't seem to help me. Is there anything I am missing, or is there any another way to do this ?</p>\n"},{"tags":["java","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":14402680,"reputation":312,"user_id":10403784,"display_name":"Vadim Yemelyanov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690534733,"creation_date":1690534733,"answer_id":76786276,"question_id":76785431,"body_markdown":"It is ofk possible by mapping all fields using elasticsearch **should**(OR) statement, but this is a pain you know where and not really performant from elasticsearch side.\r\n\r\nI would highly recommend to use **copy_to** approach.\r\n\r\nhttps://www.elastic.co/guide/en/elasticsearch/reference/current/copy-to.html\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8tQzJ.png\r\n\r\n\r\nYou will have to modify your index, and make reindexing of existing data, but after that - every field you have - will be additionally added to aggregated field and you will be able to search only in 1 field. \r\n\r\n\r\nThis is a pretty common approach in most search engines. Copying all keywords to 1 field, and allowing to make something like single line google search panel which will **search within all keywords**.","title":"Search a string of text occuring anywhere in value of all the fields of elastic index?","body":"<p>It is ofk possible by mapping all fields using elasticsearch <strong>should</strong>(OR) statement, but this is a pain you know where and not really performant from elasticsearch side.</p>\n<p>I would highly recommend to use <strong>copy_to</strong> approach.</p>\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/copy-to.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/current/copy-to.html</a></p>\n<p><a href=\"https://i.stack.imgur.com/8tQzJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8tQzJ.png\" alt=\"enter image description here\" /></a></p>\n<p>You will have to modify your index, and make reindexing of existing data, but after that - every field you have - will be additionally added to aggregated field and you will be able to search only in 1 field.</p>\n<p>This is a pretty common approach in most search engines. Copying all keywords to 1 field, and allowing to make something like single line google search panel which will <strong>search within all keywords</strong>.</p>\n"}],"owner":{"account_id":10146826,"reputation":3,"user_id":13294535,"display_name":"amt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690534733,"creation_date":1690527108,"question_id":76785431,"body_markdown":"i have a wildcard or a string of text say for example &quot;abc&quot; i want to search the occurence of this text anywhere in the value of a field but i want to search this in all the fields of a document is this possible using a wildcard query? also how to write the query using the java query builder objects\r\n\r\nif i use the following how to write it using java\r\n\r\n    GET &lt;index_name&gt;/_search\r\n    {\r\n      &quot;query&quot;: {\r\n        &quot;bool&quot;: {\r\n          &quot;must&quot;: [\r\n            {\r\n              &quot;query_string&quot;: {\r\n                &quot;query&quot;: &quot;*roj*&quot;\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    }\r\n\r\n","title":"Search a string of text occuring anywhere in value of all the fields of elastic index?","body":"<p>i have a wildcard or a string of text say for example &quot;abc&quot; i want to search the occurence of this text anywhere in the value of a field but i want to search this in all the fields of a document is this possible using a wildcard query? also how to write the query using the java query builder objects</p>\n<p>if i use the following how to write it using java</p>\n<pre><code>GET &lt;index_name&gt;/_search\n{\n  &quot;query&quot;: {\n    &quot;bool&quot;: {\n      &quot;must&quot;: [\n        {\n          &quot;query_string&quot;: {\n            &quot;query&quot;: &quot;*roj*&quot;\n          }\n        }\n      ]\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","maven","jar","maven-shade-plugin"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690526406,"post_id":76784800,"comment_id":135368821,"body_markdown":"Do you have multiple JAR files in the `target` directory after building? Which one are you running?","body":"Do you have multiple JAR files in the <code>target</code> directory after building? Which one are you running?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690528682,"post_id":76784800,"comment_id":135369212,"body_markdown":"Don&#39;t add tags just because they match a word in your question. Read the tag description and see if it&#39;s relevant. (I removed the [fat] tag)","body":"Don&#39;t add tags just because they match a word in your question. Read the tag description and see if it&#39;s relevant. (I removed the [fat] tag)"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690534127,"creation_date":1690534127,"answer_id":76786191,"question_id":76784800,"body_markdown":"Remove your `artifactSet` node and replace it with the following. It&#39;s always worked for me:\r\n\r\n\r\n```\r\n&lt;filters&gt;\r\n    &lt;filter&gt;\r\n        &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n        &lt;excludes&gt;\r\n            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n        &lt;/excludes&gt;\r\n    &lt;/filter&gt;\r\n&lt;/filters&gt;\r\n```","title":"NoClassDefFoundError: org/apache/commons/cli/ParseException - Maven Shade Plugin - Fat Jar","body":"<p>Remove your <code>artifactSet</code> node and replace it with the following. It's always worked for me:</p>\n<pre><code>&lt;filters&gt;\n    &lt;filter&gt;\n        &lt;artifact&gt;*:*&lt;/artifact&gt;\n        &lt;excludes&gt;\n            &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n            &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n            &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n        &lt;/excludes&gt;\n    &lt;/filter&gt;\n&lt;/filters&gt;\n</code></pre>\n"}],"owner":{"account_id":27987284,"reputation":9,"user_id":21373856,"display_name":"MagicKoyFish"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690534127,"creation_date":1690517505,"question_id":76784800,"body_markdown":"I am attempting to make a fat jar using Maven Shade Plugin, but I am having trouble. Every time I run the shaded jar file, I get this error: \r\n\r\n```\r\nError: Unable to initialize main class nz.ac.wgtn.swen301.assignment1.cli.StudentManagerUI\r\nCaused by: java.lang.NoClassDefFoundError: org/apache/commons/cli/ParseException\r\n```\r\n\r\nI have never used Maven Shade before, so I don&#39;t understand why this doesn&#39;t include all of the dependencies in the jar.\r\n\r\nHere is my pom.xml file for reference:\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;groupId&gt;nz.ac.wgtn.swen301&lt;/groupId&gt;\r\n    &lt;artifactId&gt;assignment1&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;version&gt;1.0.0&lt;/version&gt;\r\n    &lt;name&gt;swen301-assignment1&lt;/name&gt;\r\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n      &lt;!-- careful upgrading: newer versions seem to have been compiled with Java 17 !! --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\r\n        &lt;artifactId&gt;derby&lt;/artifactId&gt;\r\n        &lt;version&gt;10.14.2.0&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\n        &lt;!-- to be used for the CLI --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-cli&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-cli&lt;/artifactId&gt;\r\n            &lt;version&gt;1.5.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- useful for several utilities, including data structures --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;32.1.1-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- local dependency to setup database --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;nz.ac.wgtn.swen301&lt;/groupId&gt;\r\n            &lt;artifactId&gt;studentdb&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.1&lt;/version&gt;\r\n            &lt;scope&gt;system&lt;/scope&gt;\r\n            &lt;systemPath&gt;${project.basedir}/lib/studentdb-1.3.1.jar&lt;/systemPath&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n\r\n            &lt;!-- Maven Shade Plugin --&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.4&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;artifactSet&gt;\r\n                                &lt;includes&gt;\r\n                                    &lt;include&gt;org.apache.commons:commons-lang3&lt;/include&gt;\r\n                                    &lt;include&gt;org.apache.commons:commons-cli&lt;/include&gt;\r\n                                &lt;/includes&gt;\r\n                            &lt;/artifactSet&gt;\r\n                            &lt;transformers&gt;\r\n                                &lt;transformer\r\n                                        implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                                    &lt;mainClass&gt;nz.ac.wgtn.swen301.assignment1.cli.StudentManagerUI&lt;/mainClass&gt;\r\n                                &lt;/transformer&gt;\r\n                            &lt;/transformers&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt; \r\n```\r\n\r\nI have looked at multiple iterations of solutions to the `java.lang.NoClassDefFoundError`:\r\nBut nothing has helped thus far. \r\nI wouldd appreciate any help!\r\n\r\nThanks very much in advance.","title":"NoClassDefFoundError: org/apache/commons/cli/ParseException - Maven Shade Plugin - Fat Jar","body":"<p>I am attempting to make a fat jar using Maven Shade Plugin, but I am having trouble. Every time I run the shaded jar file, I get this error:</p>\n<pre><code>Error: Unable to initialize main class nz.ac.wgtn.swen301.assignment1.cli.StudentManagerUI\nCaused by: java.lang.NoClassDefFoundError: org/apache/commons/cli/ParseException\n</code></pre>\n<p>I have never used Maven Shade before, so I don't understand why this doesn't include all of the dependencies in the jar.</p>\n<p>Here is my pom.xml file for reference:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;nz.ac.wgtn.swen301&lt;/groupId&gt;\n    &lt;artifactId&gt;assignment1&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;name&gt;swen301-assignment1&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;5.9.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n      &lt;!-- careful upgrading: newer versions seem to have been compiled with Java 17 !! --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\n        &lt;artifactId&gt;derby&lt;/artifactId&gt;\n        &lt;version&gt;10.14.2.0&lt;/version&gt;\n      &lt;/dependency&gt;\n\n        &lt;!-- to be used for the CLI --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-cli&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-cli&lt;/artifactId&gt;\n            &lt;version&gt;1.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- useful for several utilities, including data structures --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;32.1.1-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- local dependency to setup database --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;nz.ac.wgtn.swen301&lt;/groupId&gt;\n            &lt;artifactId&gt;studentdb&lt;/artifactId&gt;\n            &lt;version&gt;1.3.1&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;${project.basedir}/lib/studentdb-1.3.1.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n\n            &lt;!-- Maven Shade Plugin --&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.4&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;artifactSet&gt;\n                                &lt;includes&gt;\n                                    &lt;include&gt;org.apache.commons:commons-lang3&lt;/include&gt;\n                                    &lt;include&gt;org.apache.commons:commons-cli&lt;/include&gt;\n                                &lt;/includes&gt;\n                            &lt;/artifactSet&gt;\n                            &lt;transformers&gt;\n                                &lt;transformer\n                                        implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                                    &lt;mainClass&gt;nz.ac.wgtn.swen301.assignment1.cli.StudentManagerUI&lt;/mainClass&gt;\n                                &lt;/transformer&gt;\n                            &lt;/transformers&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt; \n</code></pre>\n<p>I have looked at multiple iterations of solutions to the <code>java.lang.NoClassDefFoundError</code>:\nBut nothing has helped thus far.\nI wouldd appreciate any help!</p>\n<p>Thanks very much in advance.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":3,"creation_date":1431733183,"post_id":30267447,"comment_id":48640103,"body_markdown":"On a tangential note, whoever decided to throw an `Error` instead of `IllegalStateException` needs to be slapped.","body":"On a tangential note, whoever decided to throw an <code>Error</code> instead of <code>IllegalStateException</code> needs to be slapped."},{"owner":{"account_id":3930856,"reputation":43670,"user_id":3249477,"accept_rate":86,"display_name":"Simas"},"score":0,"creation_date":1432323078,"post_id":30267447,"comment_id":48896756,"body_markdown":"Could post the code for sending the broadcast and manifest&#39;s attributes for catching it?","body":"Could post the code for sending the broadcast and manifest&#39;s attributes for catching it?"},{"owner":{"account_id":338170,"reputation":3057,"user_id":666884,"display_name":"pathfinderelite"},"score":0,"creation_date":1432325096,"post_id":30267447,"comment_id":48897816,"body_markdown":"@Simas Added.  The broadcast is sent by the OS.","body":"@Simas Added.  The broadcast is sent by the OS."}],"answers":[{"tags":[],"owner":{"account_id":3930856,"reputation":43670,"user_id":3249477,"accept_rate":86,"display_name":"Simas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1432326751,"creation_date":1432326751,"answer_id":30405444,"question_id":30267447,"body_markdown":"AFAIK you can/should not restart the JVM. Furthermore, as you&#39;ve already found out, you can&#39;t set `URLStreamHandlerFactory` twice in a JVM for a single application.\r\n\r\nYour application should try to set the factory only when it isn&#39;t:\r\n\r\n\ttry {\r\n\t\tURL.setURLStreamHandlerFactory(factory);\r\n\t} catch (Error e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\nIf your application updates also include updating the factory, you could try [killing the process your app resides in][1] but I don&#39;t it&#39;s a good idea to do so, even worse - it might not even work.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/10597017/3249477","title":"setURLStreamHandlerFactory and &quot;java.lang.Error: Factory already set&quot;","body":"<p>AFAIK you can/should not restart the JVM. Furthermore, as you've already found out, you can't set <code>URLStreamHandlerFactory</code> twice in a JVM for a single application.</p>\n\n<p>Your application should try to set the factory only when it isn't:</p>\n\n<pre><code>try {\n    URL.setURLStreamHandlerFactory(factory);\n} catch (Error e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>If your application updates also include updating the factory, you could try <a href=\"https://stackoverflow.com/a/10597017/3249477\">killing the process your app resides in</a> but I don't it's a good idea to do so, even worse - it might not even work.</p>\n"},{"tags":[],"owner":{"account_id":3838375,"reputation":10942,"user_id":3182188,"accept_rate":75,"display_name":"Raniz"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1498802414,"creation_date":1432887374,"answer_id":30524545,"question_id":30267447,"body_markdown":"Static blocks are executed when the class is loaded - if the class is reloaded for some reason (for example when it has been updated) it will be executed again.\r\n\r\nIn your case it means that the `URLStreamHandlerFactory` you set the previous time it was loaded will remain.\r\n\r\nThis isn&#39;t really an issue unless you&#39;ve updated the `URLStreamHandlerFactory`.\r\n\r\nThere are two ways of fixing this:\r\n\r\n1. Catch the `Error` and continue on your merry way, ignoring the fact that you&#39;re still using the old factory.\r\n\r\n2. Implement a very simple wrapper that delegates to another `URLStreamHandlerFactory` that you *can* replace and that you won&#39;t have to change. You&#39;ll run into the same issue here with the wrapper though so you need to catch the `Error` on that one or combine it with option 3.\r\n\r\n3. Keep track of whether or not you&#39;ve already installed the handler using a system property.\r\n\r\nCode:\r\n\r\n    public static void maybeInstall(URLStreamHandlerFactory factory) {\r\n        if(System.getProperty(&quot;com.xxx.streamHandlerFactoryInstalled&quot;) == null) {\r\n            URL.setURLStreamHandlerFactory(factory);\r\n            System.setProperty(&quot;com.xxx.streamHandlerFactoryInstalled&quot;, &quot;true&quot;);\r\n        }\r\n    }\r\n\r\n4. Force replacement using reflection. I have absolutely no idea why you can only set the `URLStreamHandlerFactory` once - it makes little sense to me TBH.\r\n\r\nCode:\r\n\r\n    public static void forcefullyInstall(URLStreamHandlerFactory factory) {\r\n        try {\r\n            // Try doing it the normal way\r\n            URL.setURLStreamHandlerFactory(factory);\r\n        } catch (final Error e) {\r\n            // Force it via reflection\r\n            try {\r\n                final Field factoryField = URL.class.getDeclaredField(&quot;factory&quot;);\r\n                factoryField.setAccessible(true);\r\n                factoryField.set(null, factory);\r\n            } catch (NoSuchFieldException | IllegalAccessException e1) {\r\n                throw new Error(&quot;Could not access factory field on URL class: {}&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\nThe field name is `factory` on Oracle&#39;s `JRE`, might be different on Android.\r\n\r\n\r\n","title":"setURLStreamHandlerFactory and &quot;java.lang.Error: Factory already set&quot;","body":"<p>Static blocks are executed when the class is loaded - if the class is reloaded for some reason (for example when it has been updated) it will be executed again.</p>\n\n<p>In your case it means that the <code>URLStreamHandlerFactory</code> you set the previous time it was loaded will remain.</p>\n\n<p>This isn't really an issue unless you've updated the <code>URLStreamHandlerFactory</code>.</p>\n\n<p>There are two ways of fixing this:</p>\n\n<ol>\n<li><p>Catch the <code>Error</code> and continue on your merry way, ignoring the fact that you're still using the old factory.</p></li>\n<li><p>Implement a very simple wrapper that delegates to another <code>URLStreamHandlerFactory</code> that you <em>can</em> replace and that you won't have to change. You'll run into the same issue here with the wrapper though so you need to catch the <code>Error</code> on that one or combine it with option 3.</p></li>\n<li><p>Keep track of whether or not you've already installed the handler using a system property.</p></li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>public static void maybeInstall(URLStreamHandlerFactory factory) {\n    if(System.getProperty(\"com.xxx.streamHandlerFactoryInstalled\") == null) {\n        URL.setURLStreamHandlerFactory(factory);\n        System.setProperty(\"com.xxx.streamHandlerFactoryInstalled\", \"true\");\n    }\n}\n</code></pre>\n\n<ol start=\"4\">\n<li>Force replacement using reflection. I have absolutely no idea why you can only set the <code>URLStreamHandlerFactory</code> once - it makes little sense to me TBH.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>public static void forcefullyInstall(URLStreamHandlerFactory factory) {\n    try {\n        // Try doing it the normal way\n        URL.setURLStreamHandlerFactory(factory);\n    } catch (final Error e) {\n        // Force it via reflection\n        try {\n            final Field factoryField = URL.class.getDeclaredField(\"factory\");\n            factoryField.setAccessible(true);\n            factoryField.set(null, factory);\n        } catch (NoSuchFieldException | IllegalAccessException e1) {\n            throw new Error(\"Could not access factory field on URL class: {}\", e);\n        }\n    }\n}\n</code></pre>\n\n<p>The field name is <code>factory</code> on Oracle's <code>JRE</code>, might be different on Android.</p>\n"},{"tags":[],"owner":{"account_id":4999034,"reputation":1870,"user_id":6722075,"display_name":"Tohid Makari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690534075,"creation_date":1690534075,"answer_id":76786186,"question_id":30267447,"body_markdown":"Following configuration (`fork`) worked for me :\r\n\r\n    &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;forkCount&gt;1&lt;/forkCount&gt;\r\n                        &lt;reuseForks&gt;false&lt;/reuseForks&gt;\r\n                        &lt;argLine&gt;--add-exports java.base/sun.nio.ch=ALL-UNNAMED&lt;/argLine&gt;\r\n                    &lt;/configuration&gt;\r\n     &lt;/plugin&gt;","title":"setURLStreamHandlerFactory and &quot;java.lang.Error: Factory already set&quot;","body":"<p>Following configuration (<code>fork</code>) worked for me :</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;forkCount&gt;1&lt;/forkCount&gt;\n                    &lt;reuseForks&gt;false&lt;/reuseForks&gt;\n                    &lt;argLine&gt;--add-exports java.base/sun.nio.ch=ALL-UNNAMED&lt;/argLine&gt;\n                &lt;/configuration&gt;\n &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":338170,"reputation":3057,"user_id":666884,"display_name":"pathfinderelite"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8486,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":3,"score":16,"last_activity_date":1690534075,"creation_date":1431718520,"question_id":30267447,"body_markdown":"I&#39;ve come across an unexpected error caused by calling `URL.setURLStreamHandlerFactory(factory);` in an Android application that is being updated.\r\n\r\n    public class ApplicationRoot extends Application {\r\n    \r\n        static {\r\n            /* Add application support for custom URI protocols. */\r\n            final URLStreamHandlerFactory factory = new URLStreamHandlerFactory() {\r\n                @Override\r\n                public URLStreamHandler createURLStreamHandler(final String protocol) {\r\n                    if (ExternalProtocol.PROTOCOL.equals(protocol)) {\r\n                        return new ExternalProtocol();\r\n                    }\r\n                    if (ArchiveProtocol.PROTOCOL.equals(protocol)) {\r\n                        return new ArchiveProtocol();\r\n                    }\r\n                    return null;\r\n                }\r\n            };\r\n            URL.setURLStreamHandlerFactory(factory);\r\n        }\r\n    \r\n    }\r\n\r\n**Intro:**\r\n\r\nHere is my situation: I&#39;m maintaining a non-market application used in an enterprise fashion.  My business sells tablets with pre-installed applications that are developed and maintained by the business.  These pre-installed applications are not part of the ROM; they are installed as typical *Unknown Source* applications.  We do not perform updates through the Play Store or any other market.  Rather, application updates are controlled by a custom *Update Manager* application, which communicates directly with our servers to perform OTA updates.\r\n\r\n**Problem:**\r\n\r\nThis *Update Manager* application, which I am maintaining, occasionally needs to update itself.  Immediately after the application updates itself, it restarts by way of the `android.intent.action.PACKAGE_REPLACED` broadcast, which I register for in the AndroidManifest.  However, upon restart of the application immediately after the update, I *occasionally* receive this `Error`\r\n\r\n\tjava.lang.Error: Factory already set\r\n\t\tat java.net.URL.setURLStreamHandlerFactory(URL.java:112)\r\n\t\tat com.xxx.xxx.ApplicationRoot.&lt;clinit&gt;(ApplicationRoot.java:37)\r\n\t\tat java.lang.Class.newInstanceImpl(Native Method)\r\n\t\tat java.lang.Class.newInstance(Class.java:1208)\r\n\t\tat android.app.Instrumentation.newApplication(Instrumentation.java:996)\r\n\t\tat android.app.Instrumentation.newApplication(Instrumentation.java:981)\r\n\t\tat android.app.LoadedApk.makeApplication(LoadedApk.java:511)\r\n\t\tat android.app.ActivityThread.handleReceiver(ActivityThread.java:2625)\r\n\t\tat android.app.ActivityThread.access$1800(ActivityThread.java:172)\r\n\t\tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1384)\r\n\t\tat android.os.Handler.dispatchMessage(Handler.java:102)\r\n\t\tat android.os.Looper.loop(Looper.java:146)\r\n\t\tat android.app.ActivityThread.main(ActivityThread.java:5653)\r\n\t\tat java.lang.reflect.Method.invokeNative(Native Method)\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:515)\r\n\t\tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1291)\r\n\t\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1107)\r\n\t\tat dalvik.system.NativeStart.main(Native Method)\r\n\r\nNote that the majority of the time, the application restarts properly.  However, every once in a while, I get the above error.  I&#39;m perplexed because the *only* place I call `setURLStreamHandlerFactory` is here, and it is done in a `static` block, which I presume - although correct me if I&#39;m wrong - is only called once, when the `ApplicationRoot` class if first loaded.  However, it would seem that it is getting called *twice*, resulting in the above error.\r\n\r\n**Question:**\r\n\r\nWhat in the *blazing sams* is going on?  My only guess at this point is that the VM/process for the *updated* application is the same as the *previously installed* application that is being updated, so when the `static` block for the *new* `ApplicationRoot` gets called, the `URLStreamHandlerFactory` set by the *old* `ApplicationRoot` is still &quot;active&quot;.  Is this possible?  How can I avoid this situation?  Seeing that it doesn&#39;t always happen, it seems to be a race condition of some sort; maybe within Android&#39;s APK installation routine? Thanks,\r\n\r\n**Edit:**\r\n\r\nAdditional code as requested.  Here is the manifest portion dealing with the Broadcast\r\n\r\n    &lt;receiver android:name=&quot;.OnSelfUpdate&quot; &gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.intent.action.PACKAGE_REPLACED&quot; /&gt;\r\n            &lt;data android:scheme=&quot;package&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/receiver&gt;\r\n\r\nAnd the `BroadcastReceiver` itself\r\n\r\n    public class OnSelfUpdate extends BroadcastReceiver {\r\n\r\n        @Override\r\n        public void onReceive(final Context context, final Intent intent) {\r\n            /* Get the application(s) updated. */\r\n            final int uid = intent.getIntExtra(Intent.EXTRA_UID, 0);\r\n            final PackageManager packageManager = context.getPackageManager();\r\n            final String[] packages = packageManager.getPackagesForUid(uid);\r\n\r\n            if (packages != null) {\r\n                final String thisPackage = context.getPackageName();\r\n                for (final String pkg : packages) {\r\n                    /* Check to see if this application was updated. */\r\n                    if (pkg.equals(thisPackage)) {\r\n                        final Intent intent = new Intent(context, MainActivity.class);\r\n                        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n                        context.startActivity(intent);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n    }","title":"setURLStreamHandlerFactory and &quot;java.lang.Error: Factory already set&quot;","body":"<p>I've come across an unexpected error caused by calling <code>URL.setURLStreamHandlerFactory(factory);</code> in an Android application that is being updated.</p>\n\n<pre><code>public class ApplicationRoot extends Application {\n\n    static {\n        /* Add application support for custom URI protocols. */\n        final URLStreamHandlerFactory factory = new URLStreamHandlerFactory() {\n            @Override\n            public URLStreamHandler createURLStreamHandler(final String protocol) {\n                if (ExternalProtocol.PROTOCOL.equals(protocol)) {\n                    return new ExternalProtocol();\n                }\n                if (ArchiveProtocol.PROTOCOL.equals(protocol)) {\n                    return new ArchiveProtocol();\n                }\n                return null;\n            }\n        };\n        URL.setURLStreamHandlerFactory(factory);\n    }\n\n}\n</code></pre>\n\n<p><strong>Intro:</strong></p>\n\n<p>Here is my situation: I'm maintaining a non-market application used in an enterprise fashion.  My business sells tablets with pre-installed applications that are developed and maintained by the business.  These pre-installed applications are not part of the ROM; they are installed as typical <em>Unknown Source</em> applications.  We do not perform updates through the Play Store or any other market.  Rather, application updates are controlled by a custom <em>Update Manager</em> application, which communicates directly with our servers to perform OTA updates.</p>\n\n<p><strong>Problem:</strong></p>\n\n<p>This <em>Update Manager</em> application, which I am maintaining, occasionally needs to update itself.  Immediately after the application updates itself, it restarts by way of the <code>android.intent.action.PACKAGE_REPLACED</code> broadcast, which I register for in the AndroidManifest.  However, upon restart of the application immediately after the update, I <em>occasionally</em> receive this <code>Error</code></p>\n\n<pre><code>java.lang.Error: Factory already set\n    at java.net.URL.setURLStreamHandlerFactory(URL.java:112)\n    at com.xxx.xxx.ApplicationRoot.&lt;clinit&gt;(ApplicationRoot.java:37)\n    at java.lang.Class.newInstanceImpl(Native Method)\n    at java.lang.Class.newInstance(Class.java:1208)\n    at android.app.Instrumentation.newApplication(Instrumentation.java:996)\n    at android.app.Instrumentation.newApplication(Instrumentation.java:981)\n    at android.app.LoadedApk.makeApplication(LoadedApk.java:511)\n    at android.app.ActivityThread.handleReceiver(ActivityThread.java:2625)\n    at android.app.ActivityThread.access$1800(ActivityThread.java:172)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1384)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:146)\n    at android.app.ActivityThread.main(ActivityThread.java:5653)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:515)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1291)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1107)\n    at dalvik.system.NativeStart.main(Native Method)\n</code></pre>\n\n<p>Note that the majority of the time, the application restarts properly.  However, every once in a while, I get the above error.  I'm perplexed because the <em>only</em> place I call <code>setURLStreamHandlerFactory</code> is here, and it is done in a <code>static</code> block, which I presume - although correct me if I'm wrong - is only called once, when the <code>ApplicationRoot</code> class if first loaded.  However, it would seem that it is getting called <em>twice</em>, resulting in the above error.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>What in the <em>blazing sams</em> is going on?  My only guess at this point is that the VM/process for the <em>updated</em> application is the same as the <em>previously installed</em> application that is being updated, so when the <code>static</code> block for the <em>new</em> <code>ApplicationRoot</code> gets called, the <code>URLStreamHandlerFactory</code> set by the <em>old</em> <code>ApplicationRoot</code> is still \"active\".  Is this possible?  How can I avoid this situation?  Seeing that it doesn't always happen, it seems to be a race condition of some sort; maybe within Android's APK installation routine? Thanks,</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Additional code as requested.  Here is the manifest portion dealing with the Broadcast</p>\n\n<pre><code>&lt;receiver android:name=\".OnSelfUpdate\" &gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=\"android.intent.action.PACKAGE_REPLACED\" /&gt;\n        &lt;data android:scheme=\"package\" /&gt;\n    &lt;/intent-filter&gt;\n&lt;/receiver&gt;\n</code></pre>\n\n<p>And the <code>BroadcastReceiver</code> itself</p>\n\n<pre><code>public class OnSelfUpdate extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n        /* Get the application(s) updated. */\n        final int uid = intent.getIntExtra(Intent.EXTRA_UID, 0);\n        final PackageManager packageManager = context.getPackageManager();\n        final String[] packages = packageManager.getPackagesForUid(uid);\n\n        if (packages != null) {\n            final String thisPackage = context.getPackageName();\n            for (final String pkg : packages) {\n                /* Check to see if this application was updated. */\n                if (pkg.equals(thisPackage)) {\n                    final Intent intent = new Intent(context, MainActivity.class);\n                    intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                    context.startActivity(intent);\n                    break;\n                }\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","jackson","deserialization"],"answers":[{"tags":[],"owner":{"account_id":5243043,"reputation":7620,"user_id":4189582,"accept_rate":88,"display_name":"Ivar Reukers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1569582918,"creation_date":1569582918,"answer_id":58133452,"question_id":58119943,"body_markdown":"Turns out that the `@JsonSubType` annotation was missing. And since the `ObjectMapper` does not communicate with swagger, it couldn&#39;t ever know that the class should be mapped to a `EmailNotification` and thus would always create a `Notification` object. \r\n\r\nAdding:\r\n\r\n    &lt;plugin&gt;\r\n       ....\r\n       &lt;configuration&gt;\r\n         ...\r\n         &lt;library&gt;jersey2&lt;/library&gt;\r\n       &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nFixed it, the class annotations for the `Notification` class are now generated as:\r\n\r\n    @JsonSubTypes({\r\n      @JsonSubTypes.Type(value = SMSNotification.class, name = &quot;SMSNotification&quot;),\r\n      @JsonSubTypes.Type(value = EmailNotification.class, name = &quot;EmailNotification&quot;),\r\n    })\r\n    public class Notification {\r\n        ....\r\n\r\nThis adds the mapping which the `ObjectMapper` understands while deserializing.\r\n\r\nSpecial thanks to the answer provided \r\nhere https://stackoverflow.com/questions/41616922/swagger-codegen-client-how-to-include-jackson-annotations-on-models\r\n","title":"Deserialization of generated sub-class results in the parent object","body":"<p>Turns out that the <code>@JsonSubType</code> annotation was missing. And since the <code>ObjectMapper</code> does not communicate with swagger, it couldn't ever know that the class should be mapped to a <code>EmailNotification</code> and thus would always create a <code>Notification</code> object. </p>\n\n<p>Adding:</p>\n\n<pre><code>&lt;plugin&gt;\n   ....\n   &lt;configuration&gt;\n     ...\n     &lt;library&gt;jersey2&lt;/library&gt;\n   &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Fixed it, the class annotations for the <code>Notification</code> class are now generated as:</p>\n\n<pre><code>@JsonSubTypes({\n  @JsonSubTypes.Type(value = SMSNotification.class, name = \"SMSNotification\"),\n  @JsonSubTypes.Type(value = EmailNotification.class, name = \"EmailNotification\"),\n})\npublic class Notification {\n    ....\n</code></pre>\n\n<p>This adds the mapping which the <code>ObjectMapper</code> understands while deserializing.</p>\n\n<p>Special thanks to the answer provided \nhere <a href=\"https://stackoverflow.com/questions/41616922/swagger-codegen-client-how-to-include-jackson-annotations-on-models\">swagger-codegen client: How to include jackson annotations on models</a></p>\n"},{"tags":[],"owner":{"account_id":29109491,"reputation":1,"user_id":22299568,"display_name":"Etienne LeChat"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690534057,"creation_date":1690534057,"answer_id":76786182,"question_id":58119943,"body_markdown":"Its still does not work for me. I use gradle plugin open-api-generator v6.1.0 (i tested also with 5.4.0) \r\nHere is my simple swagger :\r\n\r\n    &quot;components&quot;: {\r\n    &quot;schemas&quot;: {\r\n      &quot;Parent&quot;: {\r\n        &quot;type&quot;: &quot;object&quot;,\r\n        &quot;properties&quot;: {\r\n          &quot;vehicle&quot;: {\r\n            &quot;$ref&quot;: &quot;#/components/schemas/Vehicle&quot;\r\n          }\r\n        }\r\n      },\r\n      &quot;Vehicle&quot;: {\r\n        &quot;type&quot;: &quot;object&quot;,\r\n        &quot;properties&quot;: {\r\n          &quot;vehicleType&quot;: {\r\n            &quot;type&quot;: &quot;string&quot;\r\n          }\r\n        },\r\n        &quot;discriminator&quot;: {\r\n          &quot;propertyName&quot;: &quot;vehicleType&quot;,\r\n          &quot;mapping&quot;: {\r\n            &quot;CAR&quot;: &quot;#/components/schemas/Car&quot;,\r\n            &quot;TRUCK&quot;: &quot;#/components/schemas/Truck&quot;\r\n          }\r\n        }\r\n      },\r\n      &quot;Car&quot;: {\r\n        &quot;allOf&quot;: [\r\n          {\r\n            &quot;$ref&quot;: &quot;#/components/schemas/Vehicle&quot;\r\n          },\r\n          {\r\n            &quot;type&quot;: &quot;object&quot;,\r\n            &quot;properties&quot;: {\r\n              &quot;carProperty&quot;: {\r\n                &quot;type&quot;: &quot;string&quot;\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      &quot;Truck&quot;: {\r\n        &quot;allOf&quot;: [\r\n          {\r\n            &quot;$ref&quot;: &quot;#/components/schemas/Vehicle&quot;\r\n          },\r\n          {\r\n            &quot;type&quot;: &quot;object&quot;,\r\n            &quot;properties&quot;: {\r\n              &quot;truckProperty&quot;: {\r\n                &quot;type&quot;: &quot;string&quot;\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n\r\nand there is my openApiTaskConfiguration (in build.gradle file):\r\n\r\n\r\n    generatorName.set(&quot;kotlin&quot;)\r\n    configFile.set(&quot;$rootDir/src/main/resources/swagger/config.json&quot;)\r\n    inputSpec.set(&quot;$rootDir/src/main/resources/swagger/swagger-test.json&quot;)\r\n    outputDir.set(&quot;$generatedSources&quot;)\r\n    generateModelTests.set(false)\r\n    typeMappings.set(mapOf(\r\n        &quot;Date&quot; to &quot;String&quot;))\r\n    configOptions.set(mapOf(\r\n        &quot;enumPropertyNaming&quot; to &quot;UPPERCASE&quot;,\r\n        &quot;dateLibrary&quot; to &quot;string&quot;,\r\n        &quot;interfaceOnly&quot; to &quot;true&quot;,\r\n        &quot;serializableModel&quot; to &quot;true&quot;,\r\n        &quot;collectionType&quot; to &quot;array&quot;,\r\n        &quot;serializationLibrary&quot; to &quot;jackson&quot;\r\n    ))\r\n    globalProperties.set(mapOf(&quot;apis&quot; to &quot;false&quot;, &quot;models&quot; to &quot;&quot;, &quot;modelDocs&quot; to &quot;false&quot;))\r\n\r\n}`\r\n\r\n\r\nThe Object Vehicle is generated as an interface but at runtime this is never the class Car or Truck constructor who are called but the interface. And that throw exception\r\n\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/U8vml.png","title":"Deserialization of generated sub-class results in the parent object","body":"<p>Its still does not work for me. I use gradle plugin open-api-generator v6.1.0 (i tested also with 5.4.0)\nHere is my simple swagger :</p>\n<pre><code>&quot;components&quot;: {\n&quot;schemas&quot;: {\n  &quot;Parent&quot;: {\n    &quot;type&quot;: &quot;object&quot;,\n    &quot;properties&quot;: {\n      &quot;vehicle&quot;: {\n        &quot;$ref&quot;: &quot;#/components/schemas/Vehicle&quot;\n      }\n    }\n  },\n  &quot;Vehicle&quot;: {\n    &quot;type&quot;: &quot;object&quot;,\n    &quot;properties&quot;: {\n      &quot;vehicleType&quot;: {\n        &quot;type&quot;: &quot;string&quot;\n      }\n    },\n    &quot;discriminator&quot;: {\n      &quot;propertyName&quot;: &quot;vehicleType&quot;,\n      &quot;mapping&quot;: {\n        &quot;CAR&quot;: &quot;#/components/schemas/Car&quot;,\n        &quot;TRUCK&quot;: &quot;#/components/schemas/Truck&quot;\n      }\n    }\n  },\n  &quot;Car&quot;: {\n    &quot;allOf&quot;: [\n      {\n        &quot;$ref&quot;: &quot;#/components/schemas/Vehicle&quot;\n      },\n      {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;properties&quot;: {\n          &quot;carProperty&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n          }\n        }\n      }\n    ]\n  },\n  &quot;Truck&quot;: {\n    &quot;allOf&quot;: [\n      {\n        &quot;$ref&quot;: &quot;#/components/schemas/Vehicle&quot;\n      },\n      {\n        &quot;type&quot;: &quot;object&quot;,\n        &quot;properties&quot;: {\n          &quot;truckProperty&quot;: {\n            &quot;type&quot;: &quot;string&quot;\n          }\n        }\n      }\n    ]\n  }\n}\n</code></pre>\n<p>}</p>\n<p>and there is my openApiTaskConfiguration (in build.gradle file):</p>\n<pre><code>generatorName.set(&quot;kotlin&quot;)\nconfigFile.set(&quot;$rootDir/src/main/resources/swagger/config.json&quot;)\ninputSpec.set(&quot;$rootDir/src/main/resources/swagger/swagger-test.json&quot;)\noutputDir.set(&quot;$generatedSources&quot;)\ngenerateModelTests.set(false)\ntypeMappings.set(mapOf(\n    &quot;Date&quot; to &quot;String&quot;))\nconfigOptions.set(mapOf(\n    &quot;enumPropertyNaming&quot; to &quot;UPPERCASE&quot;,\n    &quot;dateLibrary&quot; to &quot;string&quot;,\n    &quot;interfaceOnly&quot; to &quot;true&quot;,\n    &quot;serializableModel&quot; to &quot;true&quot;,\n    &quot;collectionType&quot; to &quot;array&quot;,\n    &quot;serializationLibrary&quot; to &quot;jackson&quot;\n))\nglobalProperties.set(mapOf(&quot;apis&quot; to &quot;false&quot;, &quot;models&quot; to &quot;&quot;, &quot;modelDocs&quot; to &quot;false&quot;))\n</code></pre>\n<p>}`</p>\n<p>The Object Vehicle is generated as an interface but at runtime this is never the class Car or Truck constructor who are called but the interface. And that throw exception</p>\n<p><a href=\"https://i.stack.imgur.com/U8vml.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":5243043,"reputation":7620,"user_id":4189582,"accept_rate":88,"display_name":"Ivar Reukers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":58133452,"answer_count":2,"score":0,"last_activity_date":1690534057,"creation_date":1569511012,"question_id":58119943,"body_markdown":"*Versions: Swagger-codegen (v3): 3.0.11 | Jackson: 2.9.8*\r\n\r\nI currently generate my classes from a `swagger.yaml` file (indentation may differ due to double copy-paste):\r\n\r\n    ---\r\n    swagger: &quot;2.0&quot;\r\n    info:\r\n      description: &quot;servicename&quot;\r\n      version: &quot;1.0&quot;\r\n      title: &quot;servicename&quot;\r\n    schemes:\r\n      - &quot;http&quot;\r\n      - &quot;https&quot;\r\n    paths:\r\n    \r\n    definitions:\r\n      Notification:\r\n        type: &quot;object&quot;\r\n        discriminator: &quot;typeOfNotification&quot;\r\n        properties:\r\n          typeOfNotification:\r\n            description: &quot;Type of notification&quot;\r\n            enum:\r\n              - &quot;EMAIL&quot;\r\n              - &quot;SMS&quot;\r\n            default: &quot;EMAIL&quot;\r\n      EmailNotification:\r\n        allOf:\r\n        - $ref: &quot;#/definitions/Notification&quot;\r\n        - type: &quot;object&quot;\r\n          properties:\r\n            name:\r\n              type: &quot;string&quot;\r\n              example: &quot;Name of reciever&quot;\r\n              description: &quot;Name of the receiver&quot;\r\n            emailAddress:\r\n              type: &quot;string&quot;\r\n              example: &quot;info@stackoverflow.com&quot;\r\n              description: &quot;Email address of the receiver&quot;\r\n\r\nWhich generates two classes:\r\n\r\nNotification.java\r\n\r\n   \r\n    package nl.test;\r\n    \r\n    import java.util.Objects;\r\n    import java.util.Arrays;\r\n    import com.google.gson.TypeAdapter;\r\n    import com.google.gson.annotations.JsonAdapter;\r\n    import com.google.gson.annotations.SerializedName;\r\n    import com.google.gson.stream.JsonReader;\r\n    import com.google.gson.stream.JsonWriter;\r\n    import io.swagger.v3.oas.annotations.media.Schema;\r\n    import java.io.IOException;\r\n    /**\r\n     * Notification\r\n     */\r\n    \r\n    @javax.annotation.Generated(value = &quot;io.swagger.codegen.v3.generators.java.JavaClientCodegen&quot;, date = &quot;2019-09-26T16:01:12.401+02:00[Europe/Amsterdam]&quot;)\r\n    public abstract class Notification {\r\n      /**\r\n       * Type of notification\r\n       */\r\n      @JsonAdapter(TypeOfNotificationEnum.Adapter.class)\r\n      public enum TypeOfNotificationEnum {\r\n        EMAIL(&quot;EMAIL&quot;),\r\n        SMS(&quot;SMS&quot;);\r\n    \r\n        private String value;\r\n    \r\n        TypeOfNotificationEnum(String value) {\r\n          this.value = value;\r\n        }\r\n        public String getValue() {\r\n          return value;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n          return String.valueOf(value);\r\n        }\r\n        public static TypeOfNotificationEnum fromValue(String text) {\r\n          for (TypeOfNotificationEnum b : TypeOfNotificationEnum.values()) {\r\n            if (String.valueOf(b.value).equals(text)) {\r\n              return b;\r\n            }\r\n          }\r\n          return null;\r\n        }\r\n        public static class Adapter extends TypeAdapter&lt;TypeOfNotificationEnum&gt; {\r\n          @Override\r\n          public void write(final JsonWriter jsonWriter, final TypeOfNotificationEnum enumeration) throws IOException {\r\n            jsonWriter.value(enumeration.getValue());\r\n          }\r\n    \r\n          @Override\r\n          public TypeOfNotificationEnum read(final JsonReader jsonReader) throws IOException {\r\n            String value = jsonReader.nextString();\r\n            return TypeOfNotificationEnum.fromValue(String.valueOf(value));\r\n          }\r\n        }\r\n      }  @SerializedName(&quot;typeOfNotification&quot;)\r\n      private TypeOfNotificationEnum typeOfNotification = null;\r\n    \r\n      public Notification typeOfNotification(TypeOfNotificationEnum typeOfNotification) {\r\n        this.typeOfNotification = typeOfNotification;\r\n        return this;\r\n      }\r\n    \r\n       \r\n      @Schema(description = &quot;Type of notification&quot;)\r\n      public TypeOfNotificationEnum getTypeOfNotification() {\r\n        return typeOfNotification;\r\n      }\r\n    \r\n      public void setTypeOfNotification(TypeOfNotificationEnum typeOfNotification) {\r\n        this.typeOfNotification = typeOfNotification;\r\n      }\r\n    \r\n    \r\n      @Override\r\n      public boolean equals(java.lang.Object o) {\r\n        if (this == o) {\r\n          return true;\r\n        }\r\n        if (o == null || getClass() != o.getClass()) {\r\n          return false;\r\n        }\r\n        Notification notification = (Notification) o;\r\n        return Objects.equals(this.typeOfNotification, notification.typeOfNotification);\r\n      }\r\n    \r\n      @Override\r\n      public int hashCode() {\r\n        return Objects.hash(typeOfNotification);\r\n      }\r\n    }\r\n\r\n\r\nAnd the EmailNotification:\r\n\r\n\r\n    package nl.test;\r\n    \r\n    import java.util.Objects;\r\n    import java.util.Arrays;\r\n    import com.google.gson.TypeAdapter;\r\n    import com.google.gson.annotations.JsonAdapter;\r\n    import com.google.gson.annotations.SerializedName;\r\n    import com.google.gson.stream.JsonReader;\r\n    import com.google.gson.stream.JsonWriter;\r\n    import io.swagger.v3.oas.annotations.media.Schema;\r\n    import java.io.IOException;\r\n    import nl.test.Notification;\r\n    /**\r\n     * EmailNotification\r\n     */\r\n    \r\n    @javax.annotation.Generated(value = &quot;io.swagger.codegen.v3.generators.java.JavaClientCodegen&quot;, date = &quot;2019-09-26T16:01:12.401+02:00[Europe/Amsterdam]&quot;)\r\n    public class EmailNotification extends Notification {\r\n      @SerializedName(&quot;name&quot;)\r\n      private String name = null;\r\n    \r\n      @SerializedName(&quot;emailAddress&quot;)\r\n      private String emailAddress = null;\r\n    \r\n      public EmailNotification name(String name) {\r\n        this.name = name;\r\n        return this;\r\n      }\r\n    \r\n       /**\r\n       * Name of the receiver\r\n       * @return name\r\n      **/\r\n      @Schema(example = &quot;Name of receiver&quot;, description = &quot;Name of the receiver&quot;)\r\n      public String getName() {\r\n        return name;\r\n      }\r\n    \r\n      public void setName(String name) {\r\n        this.name = name;\r\n      }\r\n    \r\n      public EmailNotification emailAddress(String emailAddress) {\r\n        this.emailAddress = emailAddress;\r\n        return this;\r\n      }\r\n    \r\n       /**\r\n       * Email address of the receiver\r\n       * @return emailAddress\r\n      **/\r\n      @Schema(example = &quot;test@stackoverflow.com&quot;, description = &quot;Email address of the receiver&quot;)\r\n      public String getEmailAddress() {\r\n        return emailAddress;\r\n      }\r\n    \r\n      public void setEmailAddress(String emailAddress) {\r\n        this.emailAddress = emailAddress;\r\n      }\r\n    \r\n    \r\n      @Override\r\n      public boolean equals(java.lang.Object o) {\r\n        if (this == o) {\r\n          return true;\r\n        }\r\n        if (o == null || getClass() != o.getClass()) {\r\n          return false;\r\n        }\r\n         EmailNotification = (EmailNotification) o;\r\n        return Objects.equals(this.name, emailNotification.name) &amp;&amp;\r\n            Objects.equals(this.emailAddress, emailNotification.emailAddress) &amp;&amp;\r\n            super.equals(o);\r\n      }\r\n    \r\n      @Override\r\n      public int hashCode() {\r\n        return Objects.hash(name, emailAddress, super.hashCode());\r\n      }\r\n    \r\n    }\r\n\r\n\r\nWhich is nice. But now the problem occurs during the deserialization of the JSON. When an ObjectMapper is passed the JSON corresponding to a `User` class, which has one property of type `Notification`, and the JSON is actually of type `EmailNotification`, then for some reason the deserializer doesn&#39;t care and deserializes it into a `Notification`, thus ignoring the `emailAddress` property. \r\n\r\nCorresponding test class:\r\n\r\n    package nl.test;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonInclude;\r\n    import com.fasterxml.jackson.databind.DeserializationFeature;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.junit.MockitoJUnitRunner;\r\n    import org.threeten.bp.LocalDate;\r\n    \r\n    import static com.fasterxml.jackson.databind.MapperFeature.ACCEPT_CASE_INSENSITIVE_ENUMS;\r\n    import static org.junit.Assert.*;\r\n    \r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class ObjectMappersConfigurationTest {\r\n    \r\n        @Test\r\n        public void test() throws Exception {\r\n            String json = &quot;{\\n&quot; +\r\n                    &quot;  \\&quot;user\\&quot;: {\\n&quot; +\r\n                    &quot;    \\&quot;notification\\&quot;: {\\n&quot; +\r\n                    &quot;      \\&quot;name\\&quot;: \\&quot;somename\\&quot;,\\n&quot; +\r\n                    &quot;      \\&quot;emailAddress\\&quot;: \\&quot;test@stackoverflow.com\\&quot;,\\n&quot; +\r\n                    &quot;      \\&quot;typeOfNotification\\&quot;: \\&quot;EMAIL\\&quot;\\n&quot; +\r\n                    &quot;    },\\n&quot; +\r\n                    &quot;  }\\n&quot; +\r\n                    &quot;}\\n&quot;;\r\n    \r\n            ObjectMapper mapper = createJsonObjectMapper();\r\n            User order = mapper.readValue(json, User.class);\r\n    \r\n            assertEquals(1, 1);\r\n        }\r\n    \r\n        public ObjectMapper createJsonObjectMapper() {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            setDefaultRelaxObjectMappings(objectMapper);\r\n            return objectMapper;\r\n        }\r\n    \r\n        public static void setDefaultRelaxObjectMappings(ObjectMapper objectMapper) {\r\n            objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n            objectMapper.configure(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE, false);\r\n           \r\n            objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n            objectMapper.enable(ACCEPT_CASE_INSENSITIVE_ENUMS);\r\n        }\r\n    }\r\n\r\nAnd the output will be:\r\n\r\n    User {\r\n      notification {\r\n         notificationType: EMAIL\r\n      }\r\n    }\r\n\r\nWhere I expected:\r\n\r\n    User {\r\n      notification {\r\n         notificationType: EMAIL,\r\n         emailAddress: &quot;...&quot;,\r\n         name: &quot;...&quot;\r\n      }\r\n    }\r\n\r\n\r\nNow I know that I can use a custom deserializer for this purpose, but this seems like overkill, deserializing objects with inheritance should be a simple setting I suppose. I just can&#39;t seem to find it. \r\n\r\nEnabling default typing would be an alternative but I&#39;d rather refrain from that since our YAML files come from an external party, forcing them to default type their YAML isn&#39;t the best solution IMO. ","title":"Deserialization of generated sub-class results in the parent object","body":"<p><em>Versions: Swagger-codegen (v3): 3.0.11 | Jackson: 2.9.8</em></p>\n\n<p>I currently generate my classes from a <code>swagger.yaml</code> file (indentation may differ due to double copy-paste):</p>\n\n<pre><code>---\nswagger: \"2.0\"\ninfo:\n  description: \"servicename\"\n  version: \"1.0\"\n  title: \"servicename\"\nschemes:\n  - \"http\"\n  - \"https\"\npaths:\n\ndefinitions:\n  Notification:\n    type: \"object\"\n    discriminator: \"typeOfNotification\"\n    properties:\n      typeOfNotification:\n        description: \"Type of notification\"\n        enum:\n          - \"EMAIL\"\n          - \"SMS\"\n        default: \"EMAIL\"\n  EmailNotification:\n    allOf:\n    - $ref: \"#/definitions/Notification\"\n    - type: \"object\"\n      properties:\n        name:\n          type: \"string\"\n          example: \"Name of reciever\"\n          description: \"Name of the receiver\"\n        emailAddress:\n          type: \"string\"\n          example: \"info@stackoverflow.com\"\n          description: \"Email address of the receiver\"\n</code></pre>\n\n<p>Which generates two classes:</p>\n\n<p>Notification.java</p>\n\n<pre><code>package nl.test;\n\nimport java.util.Objects;\nimport java.util.Arrays;\nimport com.google.gson.TypeAdapter;\nimport com.google.gson.annotations.JsonAdapter;\nimport com.google.gson.annotations.SerializedName;\nimport com.google.gson.stream.JsonReader;\nimport com.google.gson.stream.JsonWriter;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport java.io.IOException;\n/**\n * Notification\n */\n\n@javax.annotation.Generated(value = \"io.swagger.codegen.v3.generators.java.JavaClientCodegen\", date = \"2019-09-26T16:01:12.401+02:00[Europe/Amsterdam]\")\npublic abstract class Notification {\n  /**\n   * Type of notification\n   */\n  @JsonAdapter(TypeOfNotificationEnum.Adapter.class)\n  public enum TypeOfNotificationEnum {\n    EMAIL(\"EMAIL\"),\n    SMS(\"SMS\");\n\n    private String value;\n\n    TypeOfNotificationEnum(String value) {\n      this.value = value;\n    }\n    public String getValue() {\n      return value;\n    }\n\n    @Override\n    public String toString() {\n      return String.valueOf(value);\n    }\n    public static TypeOfNotificationEnum fromValue(String text) {\n      for (TypeOfNotificationEnum b : TypeOfNotificationEnum.values()) {\n        if (String.valueOf(b.value).equals(text)) {\n          return b;\n        }\n      }\n      return null;\n    }\n    public static class Adapter extends TypeAdapter&lt;TypeOfNotificationEnum&gt; {\n      @Override\n      public void write(final JsonWriter jsonWriter, final TypeOfNotificationEnum enumeration) throws IOException {\n        jsonWriter.value(enumeration.getValue());\n      }\n\n      @Override\n      public TypeOfNotificationEnum read(final JsonReader jsonReader) throws IOException {\n        String value = jsonReader.nextString();\n        return TypeOfNotificationEnum.fromValue(String.valueOf(value));\n      }\n    }\n  }  @SerializedName(\"typeOfNotification\")\n  private TypeOfNotificationEnum typeOfNotification = null;\n\n  public Notification typeOfNotification(TypeOfNotificationEnum typeOfNotification) {\n    this.typeOfNotification = typeOfNotification;\n    return this;\n  }\n\n\n  @Schema(description = \"Type of notification\")\n  public TypeOfNotificationEnum getTypeOfNotification() {\n    return typeOfNotification;\n  }\n\n  public void setTypeOfNotification(TypeOfNotificationEnum typeOfNotification) {\n    this.typeOfNotification = typeOfNotification;\n  }\n\n\n  @Override\n  public boolean equals(java.lang.Object o) {\n    if (this == o) {\n      return true;\n    }\n    if (o == null || getClass() != o.getClass()) {\n      return false;\n    }\n    Notification notification = (Notification) o;\n    return Objects.equals(this.typeOfNotification, notification.typeOfNotification);\n  }\n\n  @Override\n  public int hashCode() {\n    return Objects.hash(typeOfNotification);\n  }\n}\n</code></pre>\n\n<p>And the EmailNotification:</p>\n\n<pre><code>package nl.test;\n\nimport java.util.Objects;\nimport java.util.Arrays;\nimport com.google.gson.TypeAdapter;\nimport com.google.gson.annotations.JsonAdapter;\nimport com.google.gson.annotations.SerializedName;\nimport com.google.gson.stream.JsonReader;\nimport com.google.gson.stream.JsonWriter;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport java.io.IOException;\nimport nl.test.Notification;\n/**\n * EmailNotification\n */\n\n@javax.annotation.Generated(value = \"io.swagger.codegen.v3.generators.java.JavaClientCodegen\", date = \"2019-09-26T16:01:12.401+02:00[Europe/Amsterdam]\")\npublic class EmailNotification extends Notification {\n  @SerializedName(\"name\")\n  private String name = null;\n\n  @SerializedName(\"emailAddress\")\n  private String emailAddress = null;\n\n  public EmailNotification name(String name) {\n    this.name = name;\n    return this;\n  }\n\n   /**\n   * Name of the receiver\n   * @return name\n  **/\n  @Schema(example = \"Name of receiver\", description = \"Name of the receiver\")\n  public String getName() {\n    return name;\n  }\n\n  public void setName(String name) {\n    this.name = name;\n  }\n\n  public EmailNotification emailAddress(String emailAddress) {\n    this.emailAddress = emailAddress;\n    return this;\n  }\n\n   /**\n   * Email address of the receiver\n   * @return emailAddress\n  **/\n  @Schema(example = \"test@stackoverflow.com\", description = \"Email address of the receiver\")\n  public String getEmailAddress() {\n    return emailAddress;\n  }\n\n  public void setEmailAddress(String emailAddress) {\n    this.emailAddress = emailAddress;\n  }\n\n\n  @Override\n  public boolean equals(java.lang.Object o) {\n    if (this == o) {\n      return true;\n    }\n    if (o == null || getClass() != o.getClass()) {\n      return false;\n    }\n     EmailNotification = (EmailNotification) o;\n    return Objects.equals(this.name, emailNotification.name) &amp;&amp;\n        Objects.equals(this.emailAddress, emailNotification.emailAddress) &amp;&amp;\n        super.equals(o);\n  }\n\n  @Override\n  public int hashCode() {\n    return Objects.hash(name, emailAddress, super.hashCode());\n  }\n\n}\n</code></pre>\n\n<p>Which is nice. But now the problem occurs during the deserialization of the JSON. When an ObjectMapper is passed the JSON corresponding to a <code>User</code> class, which has one property of type <code>Notification</code>, and the JSON is actually of type <code>EmailNotification</code>, then for some reason the deserializer doesn't care and deserializes it into a <code>Notification</code>, thus ignoring the <code>emailAddress</code> property. </p>\n\n<p>Corresponding test class:</p>\n\n<pre><code>package nl.test;\n\nimport com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.databind.DeserializationFeature;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport org.threeten.bp.LocalDate;\n\nimport static com.fasterxml.jackson.databind.MapperFeature.ACCEPT_CASE_INSENSITIVE_ENUMS;\nimport static org.junit.Assert.*;\n\n\n@RunWith(MockitoJUnitRunner.class)\npublic class ObjectMappersConfigurationTest {\n\n    @Test\n    public void test() throws Exception {\n        String json = \"{\\n\" +\n                \"  \\\"user\\\": {\\n\" +\n                \"    \\\"notification\\\": {\\n\" +\n                \"      \\\"name\\\": \\\"somename\\\",\\n\" +\n                \"      \\\"emailAddress\\\": \\\"test@stackoverflow.com\\\",\\n\" +\n                \"      \\\"typeOfNotification\\\": \\\"EMAIL\\\"\\n\" +\n                \"    },\\n\" +\n                \"  }\\n\" +\n                \"}\\n\";\n\n        ObjectMapper mapper = createJsonObjectMapper();\n        User order = mapper.readValue(json, User.class);\n\n        assertEquals(1, 1);\n    }\n\n    public ObjectMapper createJsonObjectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n        setDefaultRelaxObjectMappings(objectMapper);\n        return objectMapper;\n    }\n\n    public static void setDefaultRelaxObjectMappings(ObjectMapper objectMapper) {\n        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n        objectMapper.configure(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE, false);\n\n        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n        objectMapper.enable(ACCEPT_CASE_INSENSITIVE_ENUMS);\n    }\n}\n</code></pre>\n\n<p>And the output will be:</p>\n\n<pre><code>User {\n  notification {\n     notificationType: EMAIL\n  }\n}\n</code></pre>\n\n<p>Where I expected:</p>\n\n<pre><code>User {\n  notification {\n     notificationType: EMAIL,\n     emailAddress: \"...\",\n     name: \"...\"\n  }\n}\n</code></pre>\n\n<p>Now I know that I can use a custom deserializer for this purpose, but this seems like overkill, deserializing objects with inheritance should be a simple setting I suppose. I just can't seem to find it. </p>\n\n<p>Enabling default typing would be an alternative but I'd rather refrain from that since our YAML files come from an external party, forcing them to default type their YAML isn't the best solution IMO. </p>\n"},{"tags":["java","unit-testing","mockito","quarkus"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690534193,"post_id":76786110,"comment_id":135370289,"body_markdown":"Just a guess - does Quarkus have its own `@Singleton` it wants you to use, instead of the Jakarta one?","body":"Just a guess - does Quarkus have its own <code>@Singleton</code> it wants you to use, instead of the Jakarta one?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690534345,"post_id":76786110,"comment_id":135370311,"body_markdown":"Perhaps [this](https://stackoverflow.com/a/69286048/8681) helps","body":"Perhaps <a href=\"https://stackoverflow.com/a/69286048/8681\">this</a> helps"},{"owner":{"account_id":1115215,"reputation":10877,"user_id":1104727,"display_name":"Holly Cummins"},"score":0,"creation_date":1690535196,"post_id":76786110,"comment_id":135370491,"body_markdown":"It looks like you&#39;re doing everything right for the new implementation ... which I know doesn&#39;t actually help you. :)","body":"It looks like you&#39;re doing everything right for the new implementation ... which I know doesn&#39;t actually help you. :)"},{"owner":{"account_id":385127,"reputation":6284,"user_id":742081,"display_name":"Ladicek"},"score":0,"creation_date":1690535390,"post_id":76786110,"comment_id":135370538,"body_markdown":"Do you have a small reproducer somewhere? The code seems correct, so you likely found a bug.","body":"Do you have a small reproducer somewhere? The code seems correct, so you likely found a bug."},{"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"score":0,"creation_date":1690537089,"post_id":76786110,"comment_id":135370907,"body_markdown":"logged a bug for Quarkus https://github.com/quarkusio/quarkus/issues/35080","body":"logged a bug for Quarkus <a href=\"https://github.com/quarkusio/quarkus/issues/35080\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/issues/35080</a>"}],"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":332,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690533553,"creation_date":1690533553,"question_id":76786110,"body_markdown":"I want to mock RecoveryService, it&#39;s scope is @singleton.\r\n\r\nBefore the Quarkus update I was using\r\n\r\n    @InjectMock(convertScopes=true)\r\n\r\nand it worked\r\n\r\nNow, I try to mock it like that\r\n\r\n    @InjectMock\r\n    @MockitoConfig(convertScopes = true)\r\n    RecoveryService recoveryService;\r\n\r\nand still getting:\r\n\r\n&gt; Invalid use of io.quarkus.test.InjectMock - the injected bean does not\r\n&gt; declare a CDI normal scope but: jakarta.inject.Singleton\r\n\r\nPlease help.","title":"Mocking singleton in QuarkusTest","body":"<p>I want to mock RecoveryService, it's scope is @singleton.</p>\n<p>Before the Quarkus update I was using</p>\n<pre><code>@InjectMock(convertScopes=true)\n</code></pre>\n<p>and it worked</p>\n<p>Now, I try to mock it like that</p>\n<pre><code>@InjectMock\n@MockitoConfig(convertScopes = true)\nRecoveryService recoveryService;\n</code></pre>\n<p>and still getting:</p>\n<blockquote>\n<p>Invalid use of io.quarkus.test.InjectMock - the injected bean does not\ndeclare a CDI normal scope but: jakarta.inject.Singleton</p>\n</blockquote>\n<p>Please help.</p>\n"},{"tags":["java","quarkus","reactive"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1690472294,"post_id":76781186,"comment_id":135361812,"body_markdown":"`@ServerExceptionMapper does not work with `@Route`","body":"<code>@ServerExceptionMapper does not work with </code>@Route`"},{"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"score":0,"creation_date":1690472601,"post_id":76781186,"comment_id":135361878,"body_markdown":"I was also trying to use\n@Provider\npublic class AuthConsentExceptionMapper implements ExceptionMapper&lt;AuthConsentException&gt; {\n\n\nbut result is the same","body":"I was also trying to use @Provider public class AuthConsentExceptionMapper implements ExceptionMapper&lt;AuthConsentException&gt; {   but result is the same"}],"answers":[{"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690528328,"creation_date":1690528328,"answer_id":76785552,"question_id":76781186,"body_markdown":"[Reactive Routes][1] (from which the `@Route` annotation comes) does **not** support any of the features coming from [RESTEasy Reactive][2].\r\n\r\nSo your best bet would be to rewrite `LoginResource` as a Jakarta REST Resource.\r\n\r\n\r\n  [1]: https://quarkus.io/guides/reactive-routes\r\n  [2]: https://quarkus.io/guides/resteasy-reactive","title":"How to make exception mapper to be called in Quarkus","body":"<p><a href=\"https://quarkus.io/guides/reactive-routes\" rel=\"nofollow noreferrer\">Reactive Routes</a> (from which the <code>@Route</code> annotation comes) does <strong>not</strong> support any of the features coming from <a href=\"https://quarkus.io/guides/resteasy-reactive\" rel=\"nofollow noreferrer\">RESTEasy Reactive</a>.</p>\n<p>So your best bet would be to rewrite <code>LoginResource</code> as a Jakarta REST Resource.</p>\n"},{"tags":[],"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690533346,"creation_date":1690533346,"answer_id":76786085,"question_id":76781186,"body_markdown":"Found the reason. when using reactive routes exception handlers are not called, rather it should be used as follow\r\n\r\n    @Route(path = &quot;/*&quot;, type = Route.HandlerType.FAILURE, produces = APPLICATION_JSON)\r\n    void authConsentExceptionHandler(AuthConsentException e, HttpServerResponse response) {\r\n        response.setStatusCode(INTERNAL_SERVER_ERROR).end();\r\n    }","title":"How to make exception mapper to be called in Quarkus","body":"<p>Found the reason. when using reactive routes exception handlers are not called, rather it should be used as follow</p>\n<pre><code>@Route(path = &quot;/*&quot;, type = Route.HandlerType.FAILURE, produces = APPLICATION_JSON)\nvoid authConsentExceptionHandler(AuthConsentException e, HttpServerResponse response) {\n    response.setStatusCode(INTERNAL_SERVER_ERROR).end();\n}\n</code></pre>\n"}],"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76786085,"answer_count":2,"score":0,"last_activity_date":1690533346,"creation_date":1690470942,"question_id":76781186,"body_markdown":"Please see the resource below. I set to throw exception in post jut to test that exception mapper works, but it never get called. Instead i am getting &quot;red screen&quot; from quarks error message with stacktrace\r\nPlease help\r\n\r\n    @RouteBase(path = &quot;login&quot;, produces = APPLICATION_JSON)\r\n    public class LoginResource {\r\n    \r\n    @ServerExceptionMapper\r\n    public RestResponse&lt;String&gt; mapException(AuthConsentException x) {\r\n        return RestResponse.status(Response.Status.NOT_FOUND, &quot;message&quot;);\r\n    }\r\n    \r\n    @Inject\r\n    LoginService loginService;\r\n    \r\n    @Route(path = &quot;/provider&quot;, methods = POST, consumes = APPLICATION_FORM_URLENCODED)\r\n    public void post(RoutingContext routingContext,\r\n                     @Param(LOGIN_CHALLENGE) @NotBlank(message = LOGIN_CHALLENGE + PARAMETER_SHOULD_BE_SET) String challenge,\r\n                     @Param(PROVIDER) @NotBlank(message = PROVIDER + PARAMETER_SHOULD_BE_SET) String provider) {\r\n        throw new AuthConsentException(&quot;test&quot;);\r\n       // loginService.post(routingContext, challenge, provider);\r\n    }\r\n    }\r\n\r\nI was also trying to use, but the same it never gets called\r\n\r\n    @Provider\r\n    public class AuthConsentExceptionMapper implements ExceptionMapper&lt;AuthConsentException&gt; {\r\n        private static final String ERROR_LOG_PATTERN = &quot;%s, id:%s&quot;;\r\n    \r\n        @Override\r\n        public Response toResponse(AuthConsentException e) {\r\n            ErrorDTO error = new ErrorDTO(e.getMessage());\r\n            Log.errorf(ERROR_LOG_PATTERN, e.getMessage(), error.getId());\r\n    \r\n            return Response.status(INTERNAL_SERVER_ERROR)\r\n                    .type(APPLICATION_JSON_TYPE)\r\n                    .entity(error).build();\r\n        }\r\n    }","title":"How to make exception mapper to be called in Quarkus","body":"<p>Please see the resource below. I set to throw exception in post jut to test that exception mapper works, but it never get called. Instead i am getting &quot;red screen&quot; from quarks error message with stacktrace\nPlease help</p>\n<pre><code>@RouteBase(path = &quot;login&quot;, produces = APPLICATION_JSON)\npublic class LoginResource {\n\n@ServerExceptionMapper\npublic RestResponse&lt;String&gt; mapException(AuthConsentException x) {\n    return RestResponse.status(Response.Status.NOT_FOUND, &quot;message&quot;);\n}\n\n@Inject\nLoginService loginService;\n\n@Route(path = &quot;/provider&quot;, methods = POST, consumes = APPLICATION_FORM_URLENCODED)\npublic void post(RoutingContext routingContext,\n                 @Param(LOGIN_CHALLENGE) @NotBlank(message = LOGIN_CHALLENGE + PARAMETER_SHOULD_BE_SET) String challenge,\n                 @Param(PROVIDER) @NotBlank(message = PROVIDER + PARAMETER_SHOULD_BE_SET) String provider) {\n    throw new AuthConsentException(&quot;test&quot;);\n   // loginService.post(routingContext, challenge, provider);\n}\n}\n</code></pre>\n<p>I was also trying to use, but the same it never gets called</p>\n<pre><code>@Provider\npublic class AuthConsentExceptionMapper implements ExceptionMapper&lt;AuthConsentException&gt; {\n    private static final String ERROR_LOG_PATTERN = &quot;%s, id:%s&quot;;\n\n    @Override\n    public Response toResponse(AuthConsentException e) {\n        ErrorDTO error = new ErrorDTO(e.getMessage());\n        Log.errorf(ERROR_LOG_PATTERN, e.getMessage(), error.getId());\n\n        return Response.status(INTERNAL_SERVER_ERROR)\n                .type(APPLICATION_JSON_TYPE)\n                .entity(error).build();\n    }\n}\n</code></pre>\n"},{"tags":["java","shell","kotlin","ktor"],"comments":[{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":1,"creation_date":1690534351,"post_id":76786021,"comment_id":135370314,"body_markdown":"I m guessing that since the java process is consuming too much resources, when it is terminated, the parent process is also terminated as well, that being the bash script, so it wont continue to execute the rest of the script","body":"I m guessing that since the java process is consuming too much resources, when it is terminated, the parent process is also terminated as well, that being the bash script, so it wont continue to execute the rest of the script"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1690535214,"post_id":76786021,"comment_id":135370498,"body_markdown":"though this is OS implementation dependent, so take with a pinch of salt","body":"though this is OS implementation dependent, so take with a pinch of salt"},{"owner":{"account_id":919337,"reputation":4972,"user_id":982049,"accept_rate":98,"display_name":"Cool_Coder"},"score":0,"creation_date":1690535246,"post_id":76786021,"comment_id":135370506,"body_markdown":"So how do I get what I want to print? And how do I restart the JAR if its been crashed by the system?","body":"So how do I get what I want to print? And how do I restart the JAR if its been crashed by the system?"},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":0,"creation_date":1690537285,"post_id":76786021,"comment_id":135370943,"body_markdown":"Have you considered replacing your bash script with a system service ? I do not know what CentOS uses, but on SystemD based distributions, you should be able to create a &quot;unit file&quot; to start and restart automaticallly your java process, all managed by the system (including log saving).","body":"Have you considered replacing your bash script with a system service ? I do not know what CentOS uses, but on SystemD based distributions, you should be able to create a &quot;unit file&quot; to start and restart automaticallly your java process, all managed by the system (including log saving)."},{"owner":{"account_id":919337,"reputation":4972,"user_id":982049,"accept_rate":98,"display_name":"Cool_Coder"},"score":0,"creation_date":1690537961,"post_id":76786021,"comment_id":135371105,"body_markdown":"amanin, how to do this? I do not know what this system service is and how to integrate logging?","body":"amanin, how to do this? I do not know what this system service is and how to integrate logging?"},{"owner":{"account_id":3168631,"reputation":3561,"user_id":2678097,"display_name":"amanin"},"score":1,"creation_date":1690538965,"post_id":76786021,"comment_id":135371319,"body_markdown":"If you&#39;re on CentOS 7 or newer, you should be able to use systemd for this. In summary: create a &quot;unit file&quot; describing your service (how to launch it, when to restart it, etc.). Then, put it in systemd configuration directory and reload systemd. But for more in-depth guides, you wll have to search articles [like this one](https://www.opentechguides.com/how-to/article/centos/169/systemd-custom-service.html)","body":"If you&#39;re on CentOS 7 or newer, you should be able to use systemd for this. In summary: create a &quot;unit file&quot; describing your service (how to launch it, when to restart it, etc.). Then, put it in systemd configuration directory and reload systemd. But for more in-depth guides, you wll have to search articles <a href=\"https://www.opentechguides.com/how-to/article/centos/169/systemd-custom-service.html\" rel=\"nofollow noreferrer\">like this one</a>"}],"owner":{"account_id":919337,"reputation":4972,"user_id":982049,"accept_rate":98,"display_name":"Cool_Coder"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690532705,"creation_date":1690532705,"question_id":76786021,"body_markdown":"I am managing a VPS in which I want to keep running a JAR file which is acting as a secure websocket server.\r\nI am noticing that the VPS/CentOS is closing my wss when RAM usage reaches 850+MB because the max allowed RAM is 1GB for my plan.\r\nI do plan on increasing the plan to higher RAM when launching for production, but I have a problem that my shell script is not printing to log file what it is supposed to.\r\nHere is my wss_service.sh\r\n\r\n    #!/bin/bash\r\n    check=true\r\n    while [ &quot;$check&quot; = true ]\r\n    do\r\n        startS=$(date +%s)\r\n        dates=$(date &#39;+%d-%m-%Y_%H-%M-%S&#39;)\r\n        name=&quot;WSS_ServerJar_&quot;\r\n        new=&quot;$name$dates&quot;\r\n        files=&quot;./Log/$new.log&quot;\r\n        touch $files\r\n        echo $files &gt;&gt; $files 2&gt;&amp;1\r\n        echo &quot;*** WSS Server started ***&quot; &gt;&gt; $files 2&gt;&amp;1\r\n        java -jar WSS_Server.jar &gt;&gt; $files 2&gt;&amp;1\r\n        sleep 5\r\n        echo &quot;*** JAR Crashed ***&quot; &gt;&gt; $files 2&gt;&amp;1\r\n        endS=$(date +%s)\r\n        diff=$(($endS-$startS))\r\n        echo &quot;diff=$diff; startS=$startS; endS=$endS;&quot; &gt;&gt; $files 2&gt;&amp;1\r\n        pass=120\r\n        if (( pass &gt; diff ));\r\n        then\r\n            check=false\r\n            echo &quot;Failed in short time: $diff&quot; &gt;&gt; $files\r\n        fi\r\n    \r\n    done\r\n\r\nHere is what is printed in the log file when the system closes my WSS due to RAM usage limit:\r\n\r\n    ./Log/WSS_ServerJar_28-07-2023_01-35-13.log\r\n    *** WSS Server started ***\r\n    2023-07-28 01:35:14.874 [main] INFO  Application - Autoreload is disabled because the development mode is off.\r\n    Inside Application\r\n    2023-07-28 01:35:15.982 [main] INFO  Application - Application started in 1.162 seconds.\r\n    2023-07-28 01:35:16.655 [main] WARN  i.netty.util.internal.MacAddressUtil - Failed to find a usable hardware address from the network interfaces; using random bytes: a5:f2:64:ba:ab:26:51:3f\r\n    2023-07-28 01:35:16.823 [DefaultDispatcher-worker-2] INFO  Application - Responding at https://0.0.0.0:1234\r\n    2023-07-28 03:46:32.491 [KtorShutdownHook] TRACE io.ktor.server.websocket.WebSockets - Shutdown WebSockets due to application stop\r\n    2023-07-28 03:46:32.494 [main] TRACE io.ktor.server.websocket.WebSockets - Shutdown WebSockets due to application stop\r\n\r\nHere is what is printed if I manually crash the shell script by ctrl+C or even from htop kill the process:\r\n\r\n    ./Log/WSS_ServerJar_28-07-2023_13-48-13.log\r\n    *** WSS Server started ***\r\n    2023-07-28 13:48:14.628 [main] INFO  Application - Autoreload is disabled because the development mode is off.\r\n    Inside Application\r\n    2023-07-28 13:48:15.515 [main] INFO  Application - Application started in 0.971 seconds.\r\n    2023-07-28 13:48:16.101 [main] WARN  i.netty.util.internal.MacAddressUtil - Failed to find a usable hardware address from the network interfaces; using random bytes: c8:9d:92:76:47:73:29:09\r\n    2023-07-28 13:48:16.291 [DefaultDispatcher-worker-2] INFO  Application - Responding at https://0.0.0.0:1234\r\n    2023-07-28 13:48:27.859 [KtorShutdownHook] TRACE io.ktor.server.websocket.WebSockets - Shutdown WebSockets due to application stop\r\n    2023-07-28 13:48:27.860 [main] TRACE io.ktor.server.websocket.WebSockets - Shutdown WebSockets due to application stop\r\n    *** JAR Crashed ***\r\n    diff=21; startS=1690532293; endS=1690532314;\r\n    Failed in short time: 21\r\n\r\n**I am not able to understand why the *** JAR Crashed *** is not printed when the system is stopping my .sh or .jar?**","title":"Shell script crashes and does not print to file?","body":"<p>I am managing a VPS in which I want to keep running a JAR file which is acting as a secure websocket server.\nI am noticing that the VPS/CentOS is closing my wss when RAM usage reaches 850+MB because the max allowed RAM is 1GB for my plan.\nI do plan on increasing the plan to higher RAM when launching for production, but I have a problem that my shell script is not printing to log file what it is supposed to.\nHere is my wss_service.sh</p>\n<pre><code>#!/bin/bash\ncheck=true\nwhile [ &quot;$check&quot; = true ]\ndo\n    startS=$(date +%s)\n    dates=$(date '+%d-%m-%Y_%H-%M-%S')\n    name=&quot;WSS_ServerJar_&quot;\n    new=&quot;$name$dates&quot;\n    files=&quot;./Log/$new.log&quot;\n    touch $files\n    echo $files &gt;&gt; $files 2&gt;&amp;1\n    echo &quot;*** WSS Server started ***&quot; &gt;&gt; $files 2&gt;&amp;1\n    java -jar WSS_Server.jar &gt;&gt; $files 2&gt;&amp;1\n    sleep 5\n    echo &quot;*** JAR Crashed ***&quot; &gt;&gt; $files 2&gt;&amp;1\n    endS=$(date +%s)\n    diff=$(($endS-$startS))\n    echo &quot;diff=$diff; startS=$startS; endS=$endS;&quot; &gt;&gt; $files 2&gt;&amp;1\n    pass=120\n    if (( pass &gt; diff ));\n    then\n        check=false\n        echo &quot;Failed in short time: $diff&quot; &gt;&gt; $files\n    fi\n\ndone\n</code></pre>\n<p>Here is what is printed in the log file when the system closes my WSS due to RAM usage limit:</p>\n<pre><code>./Log/WSS_ServerJar_28-07-2023_01-35-13.log\n*** WSS Server started ***\n2023-07-28 01:35:14.874 [main] INFO  Application - Autoreload is disabled because the development mode is off.\nInside Application\n2023-07-28 01:35:15.982 [main] INFO  Application - Application started in 1.162 seconds.\n2023-07-28 01:35:16.655 [main] WARN  i.netty.util.internal.MacAddressUtil - Failed to find a usable hardware address from the network interfaces; using random bytes: a5:f2:64:ba:ab:26:51:3f\n2023-07-28 01:35:16.823 [DefaultDispatcher-worker-2] INFO  Application - Responding at https://0.0.0.0:1234\n2023-07-28 03:46:32.491 [KtorShutdownHook] TRACE io.ktor.server.websocket.WebSockets - Shutdown WebSockets due to application stop\n2023-07-28 03:46:32.494 [main] TRACE io.ktor.server.websocket.WebSockets - Shutdown WebSockets due to application stop\n</code></pre>\n<p>Here is what is printed if I manually crash the shell script by ctrl+C or even from htop kill the process:</p>\n<pre><code>./Log/WSS_ServerJar_28-07-2023_13-48-13.log\n*** WSS Server started ***\n2023-07-28 13:48:14.628 [main] INFO  Application - Autoreload is disabled because the development mode is off.\nInside Application\n2023-07-28 13:48:15.515 [main] INFO  Application - Application started in 0.971 seconds.\n2023-07-28 13:48:16.101 [main] WARN  i.netty.util.internal.MacAddressUtil - Failed to find a usable hardware address from the network interfaces; using random bytes: c8:9d:92:76:47:73:29:09\n2023-07-28 13:48:16.291 [DefaultDispatcher-worker-2] INFO  Application - Responding at https://0.0.0.0:1234\n2023-07-28 13:48:27.859 [KtorShutdownHook] TRACE io.ktor.server.websocket.WebSockets - Shutdown WebSockets due to application stop\n2023-07-28 13:48:27.860 [main] TRACE io.ktor.server.websocket.WebSockets - Shutdown WebSockets due to application stop\n*** JAR Crashed ***\ndiff=21; startS=1690532293; endS=1690532314;\nFailed in short time: 21\n</code></pre>\n<p><strong>I am not able to understand why the *** JAR Crashed *** is not printed when the system is stopping my .sh or .jar?</strong></p>\n"},{"tags":["java","web-services","soap","jaxb"],"comments":[{"owner":{"account_id":3758602,"reputation":10072,"user_id":3124333,"accept_rate":100,"display_name":"SiKing"},"score":0,"creation_date":1689694150,"post_id":76685381,"comment_id":135248561,"body_markdown":"Since you are having problems with [tag:soapui] you need to show how you have configured the soapui plugin. See [official documentation](https://www.soapui.org/docs/test-automation/maven/maven-2-x/) in case you need it.","body":"Since you are having problems with <a href=\"https://stackoverflow.com/questions/tagged/soapui\">soapui</a> you need to show how you have configured the soapui plugin. See <a href=\"https://www.soapui.org/docs/test-automation/maven/maven-2-x/\" rel=\"nofollow noreferrer\">official documentation</a> in case you need it."}],"owner":{"account_id":11513913,"reputation":9,"user_id":8437808,"display_name":"Sheetal Bharara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690532634,"creation_date":1689318145,"question_id":76685381,"body_markdown":"When i am trying to run my xsd soap request from Soap UI .I am getting this response .\r\n\r\nI am using plugin jaxb2-maven-plugin version 1.5 and also tried changing the version but still getting same error .\r\nBelow is my pom.xml file.\r\n\r\nPlease help me in this\r\n\r\n```\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.5&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;xjc&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;xjc&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;schemaDirectory&gt;${project.basedir}/src/main/resources/&lt;/schemaDirectory&gt;\r\n\t\t\t\t\t&lt;outputDirectory&gt;${project.basedir}/src/main/java&lt;/outputDirectory&gt;\r\n\t\t\t\t\t&lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n```","title":"Implementation of JAXB-API has not been found on module path or classpath . I have added jaxb2 plugin","body":"<p>When i am trying to run my xsd soap request from Soap UI .I am getting this response .</p>\n<p>I am using plugin jaxb2-maven-plugin version 1.5 and also tried changing the version but still getting same error .\nBelow is my pom.xml file.</p>\n<p>Please help me in this</p>\n<pre><code>\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n                &lt;artifactId&gt;jaxb2-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.5&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;xjc&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;xjc&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;schemaDirectory&gt;${project.basedir}/src/main/resources/&lt;/schemaDirectory&gt;\n                    &lt;outputDirectory&gt;${project.basedir}/src/main/java&lt;/outputDirectory&gt;\n                    &lt;clearOutputDir&gt;false&lt;/clearOutputDir&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":["java","minecraft-forge"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1691314416,"post_id":76783679,"comment_id":135472625,"body_markdown":"See https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html#examples-of-using-argument-files-with-paths","body":"See <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html#examples-of-using-argument-files-with-paths\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/specs/man/&hellip;</a>"}],"owner":{"account_id":13633743,"reputation":9,"user_id":9835295,"display_name":"Steven"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1690495877,"answer_count":0,"score":0,"last_activity_date":1690532211,"creation_date":1690495449,"question_id":76783679,"body_markdown":"Hi everyone I&#39;m trying to modify my minecraft startup script but I do not understand this line \r\n`java -Xms4G -Xmx4G -XX:+UseG1GC -XX:+UnlockExperimentalVMOptions -XX:MaxGCPauseMillis=100 -XX:+DisableExplicitGC -XX:TargetSurvivorRatio=90 -XX:G1NewSizePercent=50 -XX:G1MaxNewSizePercent=80 -XX:G1MixedGCLiveThresholdPercent=50 -XX:+AlwaysPreTouch @libraries/net/minecraftforge/forge/1.19.2-43.2.10/unix_args.txt nogui`\r\n\r\n\r\n\r\nI was expecting to find a .jar file in the java command, the jar which contain the main class and launch the server\r\n\r\nI&#39;ve searched but found nothing about a @ symbol path which replace the .jar file \r\n\r\n\r\nI read this [topic][1] but it is only about setting additional arguments from a file. But the jar file is still mentioned in the command\r\n\r\n  [1]: https://stackoverflow.com/questions/1646889/java-command-line-option-using-symbol","title":"What is the @ symbol on the java command which launch a minecraft forge server?","body":"<p>Hi everyone I'm trying to modify my minecraft startup script but I do not understand this line\n<code>java -Xms4G -Xmx4G -XX:+UseG1GC -XX:+UnlockExperimentalVMOptions -XX:MaxGCPauseMillis=100 -XX:+DisableExplicitGC -XX:TargetSurvivorRatio=90 -XX:G1NewSizePercent=50 -XX:G1MaxNewSizePercent=80 -XX:G1MixedGCLiveThresholdPercent=50 -XX:+AlwaysPreTouch @libraries/net/minecraftforge/forge/1.19.2-43.2.10/unix_args.txt nogui</code></p>\n<p>I was expecting to find a .jar file in the java command, the jar which contain the main class and launch the server</p>\n<p>I've searched but found nothing about a @ symbol path which replace the .jar file</p>\n<p>I read this <a href=\"https://stackoverflow.com/questions/1646889/java-command-line-option-using-symbol\">topic</a> but it is only about setting additional arguments from a file. But the jar file is still mentioned in the command</p>\n"},{"tags":["java","kafka-consumer-api","spring-kafka"],"comments":[{"owner":{"account_id":8503655,"reputation":1414,"user_id":6375917,"display_name":"TongChen"},"score":0,"creation_date":1553323390,"post_id":55311070,"comment_id":97349815,"body_markdown":"you ca directly use kafka api to do what you want.","body":"you ca directly use kafka api to do what you want."},{"owner":{"account_id":12797740,"reputation":73,"user_id":9260065,"display_name":"Iqbal"},"score":0,"creation_date":1553410114,"post_id":55311070,"comment_id":97369312,"body_markdown":"Yes I have already tried that out, however, I want to try it out in Spring-kafka way.","body":"Yes I have already tried that out, however, I want to try it out in Spring-kafka way."}],"answers":[{"tags":[],"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1553520841,"creation_date":1553356167,"answer_id":55315537,"question_id":55311070,"body_markdown":"Your requirements are not clear but, assuming you want the same listener configuration to listen to multiple clusters, here is one solution. i.e. make the listener bean a prototype and mutate the container factory for each instance...\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableConfigurationProperties(ClusterProperties.class)\r\npublic class So55311070Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(So55311070Application.class, args);\r\n\t}\r\n\r\n\tprivate final Map&lt;String, MyListener&gt; listeners = new HashMap&lt;&gt;();\r\n\r\n\t@Bean\r\n\tpublic ApplicationRunner runner(ClusterProperties props, ConsumerFactory&lt;Object, Object&gt; cf,\r\n\t\t\tConcurrentKafkaListenerContainerFactory&lt;Object, Object&gt; containerFactory,\r\n\t\t\tApplicationContext context, KafkaListenerEndpointRegistry registry) {\r\n\r\n\t\treturn args -&gt; {\r\n\t\t\tAtomicInteger instance = new AtomicInteger();\r\n\t\t\tArrays.stream(props.getClusters()).forEach(cluster -&gt; {\r\n\t\t\t\tMap&lt;String, Object&gt; consumerProps = new HashMap&lt;&gt;(cf.getConfigurationProperties());\r\n\t\t\t\tconsumerProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, cluster);\r\n\t\t\t\tString groupId = &quot;group&quot; + instance.getAndIncrement();\r\n\t\t\t\tconsumerProps.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\r\n\t\t\t\tcontainerFactory.setConsumerFactory(new DefaultKafkaConsumerFactory&lt;&gt;(consumerProps));\r\n\t\t\t\tthis.listeners.put(groupId, context.getBean(&quot;listener&quot;, MyListener.class));\r\n\t\t\t});\r\n\t\t\tregistry.getListenerContainers().forEach(c -&gt; System.out.println(c.getGroupId())); // 2.2.5 snapshot only\r\n\t\t};\r\n\t}\r\n\r\n\t@Bean\r\n\t@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n\tpublic MyListener listener() {\r\n\t\treturn new MyListener();\r\n\t}\r\n\r\n}\r\n\r\nclass MyListener {\r\n\r\n\t@KafkaListener(topics = &quot;so55311070&quot;)\r\n\tpublic void listen(String in) {\r\n\t\tSystem.out.println(in);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n```java\r\n@ConfigurationProperties(prefix = &quot;kafka&quot;)\r\npublic class ClusterProperties {\r\n\r\n\tprivate String[] clusters;\r\n\r\n\tpublic String[] getClusters() {\r\n\t\treturn this.clusters;\r\n\t}\r\n\r\n\tpublic void setClusters(String[] clusters) {\r\n\t\tthis.clusters = clusters;\r\n\t}\r\n\r\n}\r\n```\r\n\r\n```\r\nkafka.clusters=localhost:9092,localhost:9093\r\n\r\nspring.kafka.consumer.auto-offset-reset=earliest\r\nspring.kafka.consumer.enable-auto-commit=false\r\n```\r\n\r\nResult\r\n\r\n```\r\ngroup0\r\ngroup1\r\n...\r\n2019-03-23 11:43:25.993  INFO 74869 --- [ntainer#0-0-C-1] o.s.k.l.KafkaMessageListenerContainer    \r\n    : partitions assigned: [so55311070-0]\r\n2019-03-23 11:43:25.994  INFO 74869 --- [ntainer#1-0-C-1] o.s.k.l.KafkaMessageListenerContainer    \r\n    : partitions assigned: [so55311070-0]\r\n```\r\n\r\n__EDIT__\r\n\r\nAdd code to retry starting failed containers.\r\n\r\nIt turns out we don&#39;t need a local map of listeners, the registry has a map of all containers, including the ones that failed to start.\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableConfigurationProperties(ClusterProperties.class)\r\npublic class So55311070Application {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(So55311070Application.class, args);\r\n\t}\r\n\r\n\tprivate boolean atLeastOneFailure;\r\n\r\n\tprivate ScheduledFuture&lt;?&gt; restartTask;\r\n\r\n\t@Bean\r\n\tpublic ApplicationRunner runner(ClusterProperties props, ConsumerFactory&lt;Object, Object&gt; cf,\r\n\t\t\tConcurrentKafkaListenerContainerFactory&lt;Object, Object&gt; containerFactory,\r\n\t\t\tApplicationContext context, KafkaListenerEndpointRegistry registry, TaskScheduler scheduler) {\r\n\r\n\t\treturn args -&gt; {\r\n\t\t\tAtomicInteger instance = new AtomicInteger();\r\n\t\t\tArrays.stream(props.getClusters()).forEach(cluster -&gt; {\r\n\t\t\t\tMap&lt;String, Object&gt; consumerProps = new HashMap&lt;&gt;(cf.getConfigurationProperties());\r\n\t\t\t\tconsumerProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, cluster);\r\n\t\t\t\tString groupId = &quot;group&quot; + instance.getAndIncrement();\r\n\t\t\t\tconsumerProps.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\r\n\t\t\t\tattemptStart(containerFactory, context, consumerProps, groupId);\r\n\t\t\t});\r\n\t\t\tregistry.getListenerContainers().forEach(c -&gt; System.out.println(c.getGroupId())); // 2.2.5 snapshot only\r\n\t\t\tif (this.atLeastOneFailure) {\r\n\t\t\t\tRunnable rescheduleTask = () -&gt; {\r\n\t\t\t\t\tregistry.getListenerContainers().forEach(c -&gt; {\r\n\t\t\t\t\t\tthis.atLeastOneFailure = false;\r\n\t\t\t\t\t\tif (!c.isRunning()) {\r\n\t\t\t\t\t\t\tSystem.out.println(&quot;Attempting restart of &quot; + c.getGroupId());\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tc.start();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcatch (Exception e) {\r\n\t\t\t\t\t\t\t\tSystem.out.println(&quot;Failed to start &quot; + e.getMessage());\r\n\t\t\t\t\t\t\t\tthis.atLeastOneFailure = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (!this.atLeastOneFailure) {\r\n\t\t\t\t\t\tthis.restartTask.cancel(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthis.restartTask = scheduler.scheduleAtFixedRate(rescheduleTask,\r\n\t\t\t\t\t\tInstant.now().plusSeconds(60),\r\n\t\t\t\t\t\tDuration.ofSeconds(60));\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\tprivate void attemptStart(ConcurrentKafkaListenerContainerFactory&lt;Object, Object&gt; containerFactory,\r\n\t\t\tApplicationContext context, Map&lt;String, Object&gt; consumerProps, String groupId) {\r\n\r\n\t\tcontainerFactory.setConsumerFactory(new DefaultKafkaConsumerFactory&lt;&gt;(consumerProps));\r\n\t\ttry {\r\n\t\t\tcontext.getBean(&quot;listener&quot;, MyListener.class);\r\n\t\t}\r\n\t\tcatch (BeanCreationException e) {\r\n\t\t\tthis.atLeastOneFailure = true;\r\n\t\t}\r\n\t}\r\n\r\n\t@Bean\r\n\t@Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n\tpublic MyListener listener() {\r\n\t\treturn new MyListener();\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic TaskScheduler scheduler() {\r\n\t\treturn new ThreadPoolTaskScheduler();\r\n\t}\r\n\r\n}\r\n\r\nclass MyListener {\r\n\r\n\t@KafkaListener(topics = &quot;so55311070&quot;)\r\n\tpublic void listen(String in) {\r\n\t\tSystem.out.println(in);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n","title":"How to dynamically create multiple consumers in Spring Kafka","body":"<p>Your requirements are not clear but, assuming you want the same listener configuration to listen to multiple clusters, here is one solution. i.e. make the listener bean a prototype and mutate the container factory for each instance...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableConfigurationProperties(ClusterProperties.class)\npublic class So55311070Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(So55311070Application.class, args);\n    }\n\n    private final Map&lt;String, MyListener&gt; listeners = new HashMap&lt;&gt;();\n\n    @Bean\n    public ApplicationRunner runner(ClusterProperties props, ConsumerFactory&lt;Object, Object&gt; cf,\n            ConcurrentKafkaListenerContainerFactory&lt;Object, Object&gt; containerFactory,\n            ApplicationContext context, KafkaListenerEndpointRegistry registry) {\n\n        return args -&gt; {\n            AtomicInteger instance = new AtomicInteger();\n            Arrays.stream(props.getClusters()).forEach(cluster -&gt; {\n                Map&lt;String, Object&gt; consumerProps = new HashMap&lt;&gt;(cf.getConfigurationProperties());\n                consumerProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, cluster);\n                String groupId = \"group\" + instance.getAndIncrement();\n                consumerProps.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n                containerFactory.setConsumerFactory(new DefaultKafkaConsumerFactory&lt;&gt;(consumerProps));\n                this.listeners.put(groupId, context.getBean(\"listener\", MyListener.class));\n            });\n            registry.getListenerContainers().forEach(c -&gt; System.out.println(c.getGroupId())); // 2.2.5 snapshot only\n        };\n    }\n\n    @Bean\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    public MyListener listener() {\n        return new MyListener();\n    }\n\n}\n\nclass MyListener {\n\n    @KafkaListener(topics = \"so55311070\")\n    public void listen(String in) {\n        System.out.println(in);\n    }\n\n}\n\n</code></pre>\n\n<pre class=\"lang-java prettyprint-override\"><code>@ConfigurationProperties(prefix = \"kafka\")\npublic class ClusterProperties {\n\n    private String[] clusters;\n\n    public String[] getClusters() {\n        return this.clusters;\n    }\n\n    public void setClusters(String[] clusters) {\n        this.clusters = clusters;\n    }\n\n}\n</code></pre>\n\n<pre><code>kafka.clusters=localhost:9092,localhost:9093\n\nspring.kafka.consumer.auto-offset-reset=earliest\nspring.kafka.consumer.enable-auto-commit=false\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>group0\ngroup1\n...\n2019-03-23 11:43:25.993  INFO 74869 --- [ntainer#0-0-C-1] o.s.k.l.KafkaMessageListenerContainer    \n    : partitions assigned: [so55311070-0]\n2019-03-23 11:43:25.994  INFO 74869 --- [ntainer#1-0-C-1] o.s.k.l.KafkaMessageListenerContainer    \n    : partitions assigned: [so55311070-0]\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Add code to retry starting failed containers.</p>\n\n<p>It turns out we don't need a local map of listeners, the registry has a map of all containers, including the ones that failed to start.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableConfigurationProperties(ClusterProperties.class)\npublic class So55311070Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(So55311070Application.class, args);\n    }\n\n    private boolean atLeastOneFailure;\n\n    private ScheduledFuture&lt;?&gt; restartTask;\n\n    @Bean\n    public ApplicationRunner runner(ClusterProperties props, ConsumerFactory&lt;Object, Object&gt; cf,\n            ConcurrentKafkaListenerContainerFactory&lt;Object, Object&gt; containerFactory,\n            ApplicationContext context, KafkaListenerEndpointRegistry registry, TaskScheduler scheduler) {\n\n        return args -&gt; {\n            AtomicInteger instance = new AtomicInteger();\n            Arrays.stream(props.getClusters()).forEach(cluster -&gt; {\n                Map&lt;String, Object&gt; consumerProps = new HashMap&lt;&gt;(cf.getConfigurationProperties());\n                consumerProps.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, cluster);\n                String groupId = \"group\" + instance.getAndIncrement();\n                consumerProps.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n                attemptStart(containerFactory, context, consumerProps, groupId);\n            });\n            registry.getListenerContainers().forEach(c -&gt; System.out.println(c.getGroupId())); // 2.2.5 snapshot only\n            if (this.atLeastOneFailure) {\n                Runnable rescheduleTask = () -&gt; {\n                    registry.getListenerContainers().forEach(c -&gt; {\n                        this.atLeastOneFailure = false;\n                        if (!c.isRunning()) {\n                            System.out.println(\"Attempting restart of \" + c.getGroupId());\n                            try {\n                                c.start();\n                            }\n                            catch (Exception e) {\n                                System.out.println(\"Failed to start \" + e.getMessage());\n                                this.atLeastOneFailure = true;\n                            }\n                        }\n                    });\n                    if (!this.atLeastOneFailure) {\n                        this.restartTask.cancel(false);\n                    }\n                };\n                this.restartTask = scheduler.scheduleAtFixedRate(rescheduleTask,\n                        Instant.now().plusSeconds(60),\n                        Duration.ofSeconds(60));\n            }\n        };\n    }\n\n    private void attemptStart(ConcurrentKafkaListenerContainerFactory&lt;Object, Object&gt; containerFactory,\n            ApplicationContext context, Map&lt;String, Object&gt; consumerProps, String groupId) {\n\n        containerFactory.setConsumerFactory(new DefaultKafkaConsumerFactory&lt;&gt;(consumerProps));\n        try {\n            context.getBean(\"listener\", MyListener.class);\n        }\n        catch (BeanCreationException e) {\n            this.atLeastOneFailure = true;\n        }\n    }\n\n    @Bean\n    @Scope(ConfigurableBeanFactory.SCOPE_PROTOTYPE)\n    public MyListener listener() {\n        return new MyListener();\n    }\n\n    @Bean\n    public TaskScheduler scheduler() {\n        return new ThreadPoolTaskScheduler();\n    }\n\n}\n\nclass MyListener {\n\n    @KafkaListener(topics = \"so55311070\")\n    public void listen(String in) {\n        System.out.println(in);\n    }\n\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8171302,"reputation":61,"user_id":6151652,"display_name":"Valery Putnin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690532063,"creation_date":1690532063,"answer_id":76785955,"question_id":55311070,"body_markdown":"1. Create a template class for future listeners:\r\n\r\n        public class KafkaTemplateListener implements MessageListener&lt;String, String&gt; {\r\n            @Override\r\n            public void onMessage(ConsumerRecord&lt;String, String&gt; record) {\r\n                System.out.println(&quot;RECORD PROCESSING: &quot; + record);\r\n            }\r\n        }\r\n\r\n\r\n2. Create KafkaListenerEndpoint with the implemented template:\r\n\r\n        @Service\r\n        public class KafkaListenerCreator {\r\n            String kafkaGroupId = &quot;kafkaGroupId&quot;;\r\n            String kafkaListenerId = &quot;kafkaListenerId-&quot;;\r\n            static AtomicLong endpointIdIndex = new AtomicLong(1);\r\n\r\n            private KafkaListenerEndpoint createKafkaListenerEndpoint(String topic) {\r\n                MethodKafkaListenerEndpoint&lt;String, String&gt; kafkaListenerEndpoint =\r\n                    createDefaultMethodKafkaListenerEndpoint(topic);\r\n                kafkaListenerEndpoint.setBean(new KafkaTemplateListener());\r\n                try {\r\n                    kafkaListenerEndpoint.setMethod(KafkaTemplateListener.class\r\n                        .getMethod(&quot;onMessage&quot;, ConsumerRecord.class));\r\n                } catch (NoSuchMethodException e) {\r\n                    throw new RuntimeException(&quot;Attempt to call a non-existent method &quot; + e);\r\n                }\r\n                return kafkaListenerEndpoint;\r\n            }\r\n\r\n            private MethodKafkaListenerEndpoint&lt;String, String&gt; createDefaultMethodKafkaListenerEndpoint(String topic) {\r\n                MethodKafkaListenerEndpoint&lt;String, String&gt; kafkaListenerEndpoint = new MethodKafkaListenerEndpoint&lt;&gt;();\r\n                kafkaListenerEndpoint.setId(generateListenerId());\r\n                kafkaListenerEndpoint.setGroupId(kafkaGroupId);\r\n                kafkaListenerEndpoint.setAutoStartup(true);\r\n                kafkaListenerEndpoint.setTopics(topic);\r\n                kafkaListenerEndpoint.setMessageHandlerMethodFactory(new DefaultMessageHandlerMethodFactory());\r\n                return kafkaListenerEndpoint;\r\n            }\r\n\r\n            private String generateListenerId() {\r\n                return kafkaGeneralListenerEndpointId + endpointIdIndex.getAndIncrement();\r\n\r\n            }\r\n        }\r\n\r\n\r\n3. Register KafkaListenerEndpointRegistry with the endpoint:\r\n\r\n        @Service\r\n        public class KafkaListenerCreator {\r\n            //... HERE HAS TO BE VARIABLES FROM PREVIOUS EXAMPLE\r\n\r\n            @Autowired\r\n            private KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry;\r\n            @Autowired\r\n            private KafkaListenerContainerFactory kafkaListenerContainerFactory;\r\n\r\n            public void createAndRegisterListener(String topic) {\r\n                KafkaListenerEndpoint listener = createKafkaListenerEndpoint(topic);\r\n                kafkaListenerEndpointRegistry.registerListenerContainer(listener, kafkaListenerContainerFactory, true);\r\n            }\r\n\r\n            //... HERE HAS TO BE METHODS FROM PREVIOUS EXAMPLE\r\n\r\n        }","title":"How to dynamically create multiple consumers in Spring Kafka","body":"<ol>\n<li><p>Create a template class for future listeners:</p>\n<pre><code> public class KafkaTemplateListener implements MessageListener&lt;String, String&gt; {\n     @Override\n     public void onMessage(ConsumerRecord&lt;String, String&gt; record) {\n         System.out.println(&quot;RECORD PROCESSING: &quot; + record);\n     }\n }\n</code></pre>\n</li>\n<li><p>Create KafkaListenerEndpoint with the implemented template:</p>\n<pre><code> @Service\n public class KafkaListenerCreator {\n     String kafkaGroupId = &quot;kafkaGroupId&quot;;\n     String kafkaListenerId = &quot;kafkaListenerId-&quot;;\n     static AtomicLong endpointIdIndex = new AtomicLong(1);\n\n     private KafkaListenerEndpoint createKafkaListenerEndpoint(String topic) {\n         MethodKafkaListenerEndpoint&lt;String, String&gt; kafkaListenerEndpoint =\n             createDefaultMethodKafkaListenerEndpoint(topic);\n         kafkaListenerEndpoint.setBean(new KafkaTemplateListener());\n         try {\n             kafkaListenerEndpoint.setMethod(KafkaTemplateListener.class\n                 .getMethod(&quot;onMessage&quot;, ConsumerRecord.class));\n         } catch (NoSuchMethodException e) {\n             throw new RuntimeException(&quot;Attempt to call a non-existent method &quot; + e);\n         }\n         return kafkaListenerEndpoint;\n     }\n\n     private MethodKafkaListenerEndpoint&lt;String, String&gt; createDefaultMethodKafkaListenerEndpoint(String topic) {\n         MethodKafkaListenerEndpoint&lt;String, String&gt; kafkaListenerEndpoint = new MethodKafkaListenerEndpoint&lt;&gt;();\n         kafkaListenerEndpoint.setId(generateListenerId());\n         kafkaListenerEndpoint.setGroupId(kafkaGroupId);\n         kafkaListenerEndpoint.setAutoStartup(true);\n         kafkaListenerEndpoint.setTopics(topic);\n         kafkaListenerEndpoint.setMessageHandlerMethodFactory(new DefaultMessageHandlerMethodFactory());\n         return kafkaListenerEndpoint;\n     }\n\n     private String generateListenerId() {\n         return kafkaGeneralListenerEndpointId + endpointIdIndex.getAndIncrement();\n\n     }\n }\n</code></pre>\n</li>\n<li><p>Register KafkaListenerEndpointRegistry with the endpoint:</p>\n<pre><code> @Service\n public class KafkaListenerCreator {\n     //... HERE HAS TO BE VARIABLES FROM PREVIOUS EXAMPLE\n\n     @Autowired\n     private KafkaListenerEndpointRegistry kafkaListenerEndpointRegistry;\n     @Autowired\n     private KafkaListenerContainerFactory kafkaListenerContainerFactory;\n\n     public void createAndRegisterListener(String topic) {\n         KafkaListenerEndpoint listener = createKafkaListenerEndpoint(topic);\n         kafkaListenerEndpointRegistry.registerListenerContainer(listener, kafkaListenerContainerFactory, true);\n     }\n\n     //... HERE HAS TO BE METHODS FROM PREVIOUS EXAMPLE\n\n }\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":12797740,"reputation":73,"user_id":9260065,"display_name":"Iqbal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4386,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690532063,"creation_date":1553320810,"question_id":55311070,"body_markdown":"I have two Kafka clusters, the IPs for which I am fetching dynamically from database. I am using @KafkaListener for creating listeners. Now I want to create multiple Kafka listeners at runtime depending on the bootstrap server attribute(comma-separated values), each one listening to a cluster. Can you please suggest me how do I achieve this?\r\n\r\nSpring-boot: 2.1.3.RELEASE\r\nKafka-2.0.1\r\nJava-8","title":"How to dynamically create multiple consumers in Spring Kafka","body":"<p>I have two Kafka clusters, the IPs for which I am fetching dynamically from database. I am using @KafkaListener for creating listeners. Now I want to create multiple Kafka listeners at runtime depending on the bootstrap server attribute(comma-separated values), each one listening to a cluster. Can you please suggest me how do I achieve this?</p>\n\n<p>Spring-boot: 2.1.3.RELEASE\nKafka-2.0.1\nJava-8</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690531617,"post_id":76785892,"comment_id":135369733,"body_markdown":"Not really, no. At least I don&#39;t know of a JSON parser that has that feature. What you should do is parse the raw JSON first, then map to a different data structure once you have all the data.","body":"Not really, no. At least I don&#39;t know of a JSON parser that has that feature. What you should do is parse the raw JSON first, then map to a different data structure once you have all the data."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1690532920,"post_id":76785892,"comment_id":135370027,"body_markdown":"Usually, a posted question should contain a single question only. You have asked two, separate questions. I suggest that you [edit] this question so that it only asks about relations and post a new question regarding stopping the serialization process in the middle. Having said that, regarding the second question, perhaps this will help: [JSON Parsing with use of Streaming API and Json Parser - Mixed mode](https://stackoverflow.com/questions/42178526/json-parsing-with-use-of-streaming-api-and-json-parser-mixed-mode)","body":"Usually, a posted question should contain a single question only. You have asked two, separate questions. I suggest that you <a href=\"https://stackoverflow.com/posts/76785892/edit\">edit</a> this question so that it only asks about relations and post a new question regarding stopping the serialization process in the middle. Having said that, regarding the second question, perhaps this will help: <a href=\"https://stackoverflow.com/questions/42178526/json-parsing-with-use-of-streaming-api-and-json-parser-mixed-mode\">JSON Parsing with use of Streaming API and Json Parser - Mixed mode</a>"},{"owner":{"account_id":9299631,"reputation":654,"user_id":6905540,"accept_rate":66,"display_name":"VANILKA"},"score":1,"creation_date":1690533144,"post_id":76785892,"comment_id":135370074,"body_markdown":"@Jorn It seem that it will be easier doing it &quot;manualy&quot; via JsonParser, because i have full controll of data.","body":"@Jorn It seem that it will be easier doing it &quot;manualy&quot; via JsonParser, because i have full controll of data."}],"owner":{"account_id":9299631,"reputation":654,"user_id":6905540,"accept_rate":66,"display_name":"VANILKA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690531464,"creation_date":1690531464,"question_id":76785892,"body_markdown":"I Have a pack of files with structure like this\r\n```\r\n{\r\n  &quot;identifier&quot;: &quot;Test&quot;,\r\n  &quot;persons&quot;: [\r\n    {\r\n      &quot;id&quot;: &quot;1&quot;,\r\n      &quot;firstName&quot;: &quot;Max&quot;,\r\n      &quot;lastName&quot;: &quot;Test1&quot;,\r\n      ...\r\n    },\r\n    {\r\n      &quot;id&quot;: &quot;2&quot;,\r\n      &quot;firstName&quot;: &quot;Anne&quot;,\r\n      &quot;lastName&quot;: &quot;Test1&quot;\r\n    }\r\n    ...\r\n  ],\r\n  &quot;relations&quot;: [\r\n    {\r\n      &quot;identifier&quot;: &quot;1&quot;,\r\n      &quot;partnerFirst&quot;: &quot;1&quot;,\r\n      &quot;partnerSecond&quot;: &quot;2&quot;,\r\n      &quot;children&quot;: [\r\n        {\r\n          &quot;id&quot;: &quot;3&quot;,\r\n          &quot;adopted&quot;: false\r\n        },\r\n        {\r\n          &quot;id&quot;: &quot;4&quot;,\r\n          &quot;adopted&quot;: false\r\n        }\r\n      ],\r\n      ...\r\n    }\r\n  ]\r\n}\r\n```\r\nAnd I&#39;ve created custom Deserializer for Person and Relation. \r\nCreation of persons are fine. \r\n\r\nCan I any possibility in Relation Deserialiser to access Person Lists for searching reference ? \r\n\r\nI search also a way to stop serializing whole file if &quot;identifier&quot; for some external condition, like I have in my DB this id set as &quot;ignore&quot;. \r\n\r\nFor now I&#39;m doing it by JSONparser before I run Deserialisation via custom Deserialiser. But Is it a way to provide to Deserialiser other Helper class ?","title":"Stop deserialization if condition met in Java","body":"<p>I Have a pack of files with structure like this</p>\n<pre><code>{\n  &quot;identifier&quot;: &quot;Test&quot;,\n  &quot;persons&quot;: [\n    {\n      &quot;id&quot;: &quot;1&quot;,\n      &quot;firstName&quot;: &quot;Max&quot;,\n      &quot;lastName&quot;: &quot;Test1&quot;,\n      ...\n    },\n    {\n      &quot;id&quot;: &quot;2&quot;,\n      &quot;firstName&quot;: &quot;Anne&quot;,\n      &quot;lastName&quot;: &quot;Test1&quot;\n    }\n    ...\n  ],\n  &quot;relations&quot;: [\n    {\n      &quot;identifier&quot;: &quot;1&quot;,\n      &quot;partnerFirst&quot;: &quot;1&quot;,\n      &quot;partnerSecond&quot;: &quot;2&quot;,\n      &quot;children&quot;: [\n        {\n          &quot;id&quot;: &quot;3&quot;,\n          &quot;adopted&quot;: false\n        },\n        {\n          &quot;id&quot;: &quot;4&quot;,\n          &quot;adopted&quot;: false\n        }\n      ],\n      ...\n    }\n  ]\n}\n</code></pre>\n<p>And I've created custom Deserializer for Person and Relation.\nCreation of persons are fine.</p>\n<p>Can I any possibility in Relation Deserialiser to access Person Lists for searching reference ?</p>\n<p>I search also a way to stop serializing whole file if &quot;identifier&quot; for some external condition, like I have in my DB this id set as &quot;ignore&quot;.</p>\n<p>For now I'm doing it by JSONparser before I run Deserialisation via custom Deserialiser. But Is it a way to provide to Deserialiser other Helper class ?</p>\n"},{"tags":["java","pdf","itext7"],"answers":[{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690472811,"creation_date":1690472811,"answer_id":76781448,"question_id":76779369,"body_markdown":"&gt;Bit of debugging has unraveled that if the textToReplace exists on a page other than the first, the strategy.getResultantLocations() has a size of 0. So, the code doesn&#39;t enters the for loop to replace the text.\r\n\r\nThis observation is pointing to the cause of the issue: During redaction a fresh cleanup strategy is required for each page. Thus, the `reset` method of the used cleanup strategy is called. Both the strategy classes you use - `CompositeCleanupStrategy` and `RegexBasedCleanupStrategy` - implement that method by actually generating a _new_ instance and initializing it like the original was initialized. Thus, the strategy objects you have a hold on in your code were only used on the first page and, consequentially, only contain the resultant locations on that first page.\r\n\r\nAnother issue is that `RegexBasedCleanupStrategy` in its `getResultantLocations` uses a constant page number &#39;0&#39; in all the `DefaultPdfTextLocation` it generates and returns.\r\n\r\nOne way to fix this, therefore, is to derive your own strategy from `RegexBasedCleanupStrategy` with an extra method for retrieving _all_ text location objects and a collection of all reset-ed instances. In that method all the instances would be visited, their locations retrieved having their respective page numbers corrected, and returned in a new collection. `reset` would be adapted to generate instances of your strategy class and would manage sharing the list of all instances.","title":"Not able to replace text in all pages of a multi page PDF file using iText7 PDFCleanup java Library","body":"<blockquote>\n<p>Bit of debugging has unraveled that if the textToReplace exists on a page other than the first, the strategy.getResultantLocations() has a size of 0. So, the code doesn't enters the for loop to replace the text.</p>\n</blockquote>\n<p>This observation is pointing to the cause of the issue: During redaction a fresh cleanup strategy is required for each page. Thus, the <code>reset</code> method of the used cleanup strategy is called. Both the strategy classes you use - <code>CompositeCleanupStrategy</code> and <code>RegexBasedCleanupStrategy</code> - implement that method by actually generating a <em>new</em> instance and initializing it like the original was initialized. Thus, the strategy objects you have a hold on in your code were only used on the first page and, consequentially, only contain the resultant locations on that first page.</p>\n<p>Another issue is that <code>RegexBasedCleanupStrategy</code> in its <code>getResultantLocations</code> uses a constant page number '0' in all the <code>DefaultPdfTextLocation</code> it generates and returns.</p>\n<p>One way to fix this, therefore, is to derive your own strategy from <code>RegexBasedCleanupStrategy</code> with an extra method for retrieving <em>all</em> text location objects and a collection of all reset-ed instances. In that method all the instances would be visited, their locations retrieved having their respective page numbers corrected, and returned in a new collection. <code>reset</code> would be adapted to generate instances of your strategy class and would manage sharing the list of all instances.</p>\n"}],"owner":{"account_id":2093031,"reputation":221,"user_id":1862396,"accept_rate":17,"display_name":"Manchanda. P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690531437,"creation_date":1690458046,"question_id":76779369,"body_markdown":"I have PDFs with **large number of pages** containing PII data like SSN. I need to replace the SSN with some dummy value before sharing the PDF. I am exploring the usage of iText and it&#39;s PDFCleanup plugin. Overall, the library looks promising in replacing the text. However, I have landed into a problem: \r\n\r\nI am able to redact i.e. cleanup the text from any page of the PDF. However, I am only able to replace the text on the first page. Text from any subsequent page doesn&#39;t gets replaced.\r\n\r\nMy sample code is:\r\n\r\n    private void replaceTextInDocument(PdfDocument pdfDocument, String textToReplace, String replacementText) throws IOException {\r\n        CompositeCleanupStrategy strategy = new CompositeCleanupStrategy();\r\n        strategy.add(new RegexBasedCleanupStrategy(textToReplace).setRedactionColor(ColorConstants.WHITE));\r\n        PdfCleaner.autoSweepCleanUp(pdfDocument, strategy);\r\n        System.out.println(&quot;----STRATEGY SIZE:  &quot; + strategy.getResultantLocations().size());\r\n    \r\n        for (IPdfTextLocation location : strategy.getResultantLocations()) {\r\n            System.out.println(&quot;----PAGE #: &quot; + location.getPageNumber() + &quot; TEXT: &quot; + location.getText());\r\n            PdfPage page = pdfDocument.getPage(location.getPageNumber() + 1);\r\n            PdfCanvas pdfCanvas = new PdfCanvas(page.newContentStreamAfter(), page.getResources(), page.getDocument());\r\n            Canvas canvas = new Canvas(pdfCanvas, location.getRectangle());\r\n            canvas.add(new Paragraph(replacementText).setFontSize(8).setMarginTop(0f)\r\n                  .setRotationAngle(Math.toRadians(90))\r\n            );\r\n        }\r\n    }\r\n\r\nBit of debugging has unraveled that if the *textToReplace* exists on a page other than the first, the *strategy.getResultantLocations()* has a size of 0. So, the code doesn&#39;t enters the for loop to replace the text.\r\n\r\nProbably the confusing part is that PDFCleaner is able to clean/redact the text on any page.\r\n\r\nI am not sure if I am missing anything here or it&#39;s the limitation of the library. The code samples that I have seen online use only one pager PDFs.\r\n\r\nThanks and Regards \r\n\r\n***EDITING** my question to add more info as per comment by @mkl. Adding info here would improve readability as compared to adding plain text comment. Also, this would result in continuity of the steps followed and resolution.*\r\n\r\nI am in PoC Stage and running a standalone java program. \r\n\r\nI explored the option of creating a custom strategy based on *RegexBasedLocationExtractionStrategy*. To understand the same, I debugged this class. Please refer to the code in the RegexBasedLocationExtractionStrategy.getResultantLocations() method\r\n\r\n     public Collection&lt;IPdfTextLocation&gt; getResultantLocations() {\r\n            // align characters in &quot;logical&quot; order\r\n            Collections.sort(parseResult, new TextChunkLocationBasedComparator(new DefaultTextChunkLocationComparator()));\r\n    \r\n            // process parse results\r\n            List&lt;IPdfTextLocation&gt; retval = new ArrayList&lt;&gt;();\r\n    \r\n            CharacterRenderInfo.StringConversionInfo txt = CharacterRenderInfo.mapString(parseResult);\r\n    \r\n            Matcher mat = pattern.matcher(txt.text);\r\n            while (mat.find()) {\r\n                Integer startIndex = getStartIndex(txt.indexMap, mat.start(), txt.text);\r\n                Integer endIndex = getEndIndex(txt.indexMap, mat.end() - 1);\r\n                if (startIndex != null &amp;&amp; endIndex != null &amp;&amp; startIndex &lt;= endIndex) {\r\n                    for (Rectangle r : toRectangles(parseResult.subList(startIndex.intValue(), endIndex.intValue() + 1))) {\r\n                        retval.add(new DefaultPdfTextLocation(0, r, mat.group(0)));\r\n                    }\r\n                }\r\n            }\r\n    \r\n            /* sort\r\n             * even though the return type is Collection&lt;Rectangle&gt;, we apply a sorting algorithm here\r\n             * This is to ensure that tests that use this functionality (for instance to generate pdf with\r\n             * areas of interest highlighted) will not break when compared.\r\n             */\r\n            Collections.sort(retval, new PdfTextLocationComparator());\r\n    \r\n            // ligatures can produces same rectangle\r\n            removeDuplicates(retval);\r\n    \r\n            return retval;\r\n        }\r\n\r\nThe *parseResults* and subsequent *txt.text* always contain the content from the Page 1 of the PDF irrespective of the fact which page of PDF contains the *pattern*. So, the *mat.find()* evaluates to false and hence the *while()* loop is not executed. So, nothing gets added to the *retVal* and as a result *strategy.getResultantLocations()* returns 0. \r\n\r\nAt this stage, I cannot say that hard coded 0 for *DefaultPdfTextLocation* is an issue or not.\r\n\r\nAny idea why the following is happening or pointers for further debugging  would be helpful:\r\n \r\n - Why the *RegexBasedLocationExtractionStrategy* is not able to read or\r\n   add content for pages other than Page 1.\r\n\r\n","title":"Not able to replace text in all pages of a multi page PDF file using iText7 PDFCleanup java Library","body":"<p>I have PDFs with <strong>large number of pages</strong> containing PII data like SSN. I need to replace the SSN with some dummy value before sharing the PDF. I am exploring the usage of iText and it's PDFCleanup plugin. Overall, the library looks promising in replacing the text. However, I have landed into a problem:</p>\n<p>I am able to redact i.e. cleanup the text from any page of the PDF. However, I am only able to replace the text on the first page. Text from any subsequent page doesn't gets replaced.</p>\n<p>My sample code is:</p>\n<pre><code>private void replaceTextInDocument(PdfDocument pdfDocument, String textToReplace, String replacementText) throws IOException {\n    CompositeCleanupStrategy strategy = new CompositeCleanupStrategy();\n    strategy.add(new RegexBasedCleanupStrategy(textToReplace).setRedactionColor(ColorConstants.WHITE));\n    PdfCleaner.autoSweepCleanUp(pdfDocument, strategy);\n    System.out.println(&quot;----STRATEGY SIZE:  &quot; + strategy.getResultantLocations().size());\n\n    for (IPdfTextLocation location : strategy.getResultantLocations()) {\n        System.out.println(&quot;----PAGE #: &quot; + location.getPageNumber() + &quot; TEXT: &quot; + location.getText());\n        PdfPage page = pdfDocument.getPage(location.getPageNumber() + 1);\n        PdfCanvas pdfCanvas = new PdfCanvas(page.newContentStreamAfter(), page.getResources(), page.getDocument());\n        Canvas canvas = new Canvas(pdfCanvas, location.getRectangle());\n        canvas.add(new Paragraph(replacementText).setFontSize(8).setMarginTop(0f)\n              .setRotationAngle(Math.toRadians(90))\n        );\n    }\n}\n</code></pre>\n<p>Bit of debugging has unraveled that if the <em>textToReplace</em> exists on a page other than the first, the <em>strategy.getResultantLocations()</em> has a size of 0. So, the code doesn't enters the for loop to replace the text.</p>\n<p>Probably the confusing part is that PDFCleaner is able to clean/redact the text on any page.</p>\n<p>I am not sure if I am missing anything here or it's the limitation of the library. The code samples that I have seen online use only one pager PDFs.</p>\n<p>Thanks and Regards</p>\n<p><em><strong>EDITING</strong> my question to add more info as per comment by @mkl. Adding info here would improve readability as compared to adding plain text comment. Also, this would result in continuity of the steps followed and resolution.</em></p>\n<p>I am in PoC Stage and running a standalone java program.</p>\n<p>I explored the option of creating a custom strategy based on <em>RegexBasedLocationExtractionStrategy</em>. To understand the same, I debugged this class. Please refer to the code in the RegexBasedLocationExtractionStrategy.getResultantLocations() method</p>\n<pre><code> public Collection&lt;IPdfTextLocation&gt; getResultantLocations() {\n        // align characters in &quot;logical&quot; order\n        Collections.sort(parseResult, new TextChunkLocationBasedComparator(new DefaultTextChunkLocationComparator()));\n\n        // process parse results\n        List&lt;IPdfTextLocation&gt; retval = new ArrayList&lt;&gt;();\n\n        CharacterRenderInfo.StringConversionInfo txt = CharacterRenderInfo.mapString(parseResult);\n\n        Matcher mat = pattern.matcher(txt.text);\n        while (mat.find()) {\n            Integer startIndex = getStartIndex(txt.indexMap, mat.start(), txt.text);\n            Integer endIndex = getEndIndex(txt.indexMap, mat.end() - 1);\n            if (startIndex != null &amp;&amp; endIndex != null &amp;&amp; startIndex &lt;= endIndex) {\n                for (Rectangle r : toRectangles(parseResult.subList(startIndex.intValue(), endIndex.intValue() + 1))) {\n                    retval.add(new DefaultPdfTextLocation(0, r, mat.group(0)));\n                }\n            }\n        }\n\n        /* sort\n         * even though the return type is Collection&lt;Rectangle&gt;, we apply a sorting algorithm here\n         * This is to ensure that tests that use this functionality (for instance to generate pdf with\n         * areas of interest highlighted) will not break when compared.\n         */\n        Collections.sort(retval, new PdfTextLocationComparator());\n\n        // ligatures can produces same rectangle\n        removeDuplicates(retval);\n\n        return retval;\n    }\n</code></pre>\n<p>The <em>parseResults</em> and subsequent <em>txt.text</em> always contain the content from the Page 1 of the PDF irrespective of the fact which page of PDF contains the <em>pattern</em>. So, the <em>mat.find()</em> evaluates to false and hence the <em>while()</em> loop is not executed. So, nothing gets added to the <em>retVal</em> and as a result <em>strategy.getResultantLocations()</em> returns 0.</p>\n<p>At this stage, I cannot say that hard coded 0 for <em>DefaultPdfTextLocation</em> is an issue or not.</p>\n<p>Any idea why the following is happening or pointers for further debugging  would be helpful:</p>\n<ul>\n<li>Why the <em>RegexBasedLocationExtractionStrategy</em> is not able to read or\nadd content for pages other than Page 1.</li>\n</ul>\n"},{"tags":["java","spring","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690531008,"creation_date":1690431527,"answer_id":76776473,"question_id":76775345,"body_markdown":"`LIKE` queries don&#39;t interpret the left side as `LIKE` expressions. Only the right side of the `LIKE` query is interpreted like this. So, you need to change the `:name` part which can be done easily using a `default` method:\r\n```java\r\n@Query(value = &quot;SELECT e from employee e WHERE :name IS NULL OR upper(e.name) LIKE :name&quot;)\r\nEmployee findEmployeeByNameEscaped(@Param(&quot;name&quot;) String name);\r\n\r\ndefault Employee findEmployeeByName(String name){\r\n    return findEmployeeByNameEscaped(name.toUpperCase().replace(&quot;_&quot;,&quot;\\\\_&quot;);\r\n}\r\n```\r\n\r\nYou can then just normally use `findEmployeeByName` which will call `findEmployeeByNameEscaped` with the correct parameter.\r\n\r\n### Update\r\nSince you don&#39;t need (and don&#39;t want) the features of `LIKE`, you should use `=` instead:\r\n```java\r\n @Query(value = &quot;SELECT e from employee e WHERE :name IS NULL OR upper(e.name) = upper(:name)&quot;)\r\nEmployee findEmployeeByName(@Param(&quot;name&quot;) String name);\r\n```\r\n\r\n(I&#39;m using the old version of the SQL statement here as I don&#39;t feel like the new one is valid due t the `SELECT ... WHERE ... FROM ...`)\r\n\r\nWith that, you won&#39;t need to escape `_` as it will compare the strings directly insteas of matching.","title":"Use escape char in spring jpa native query","body":"<p><code>LIKE</code> queries don't interpret the left side as <code>LIKE</code> expressions. Only the right side of the <code>LIKE</code> query is interpreted like this. So, you need to change the <code>:name</code> part which can be done easily using a <code>default</code> method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(value = &quot;SELECT e from employee e WHERE :name IS NULL OR upper(e.name) LIKE :name&quot;)\nEmployee findEmployeeByNameEscaped(@Param(&quot;name&quot;) String name);\n\ndefault Employee findEmployeeByName(String name){\n    return findEmployeeByNameEscaped(name.toUpperCase().replace(&quot;_&quot;,&quot;\\\\_&quot;);\n}\n</code></pre>\n<p>You can then just normally use <code>findEmployeeByName</code> which will call <code>findEmployeeByNameEscaped</code> with the correct parameter.</p>\n<h3>Update</h3>\n<p>Since you don't need (and don't want) the features of <code>LIKE</code>, you should use <code>=</code> instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Query(value = &quot;SELECT e from employee e WHERE :name IS NULL OR upper(e.name) = upper(:name)&quot;)\nEmployee findEmployeeByName(@Param(&quot;name&quot;) String name);\n</code></pre>\n<p>(I'm using the old version of the SQL statement here as I don't feel like the new one is valid due t the <code>SELECT ... WHERE ... FROM ...</code>)</p>\n<p>With that, you won't need to escape <code>_</code> as it will compare the strings directly insteas of matching.</p>\n"}],"owner":{"account_id":7580118,"reputation":950,"user_id":5751045,"accept_rate":92,"display_name":"user09"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690531008,"creation_date":1690409061,"question_id":76775345,"body_markdown":"I have below native query where I want to escape underscore(_) so it wont act as a literal in like search\r\n\r\nPS: this is just a part of query not full\r\n\r\n     @RestResource(path = &quot;findLatestEmployeeByNameExactMatch&quot;, rel = &quot;findLatestEmployeeByNameExactMatch&quot;)\r\n     @Query(value = &quot;select e from Employee e &quot; +\r\n            &quot; WHERE :name IS NULL OR upper(e.name) LIKE upper(:name) &quot; +\r\n            &quot; AND e.latestProject = (select MAX(an.latestProject) from Employee an where upper(an.name) = upper(a.name))&quot;)\r\n    Employee findEmployeeByName(@Param(&quot;name&quot;) String name);\r\n  \r\nEmployee table\r\n\r\n    name     latest_project\r\n    John_X   123\r\n    John_X   124\r\n    John-X   123\r\n    John-X   124\r\n\r\nThe current api returns two records `John_X 124` and `John-X 124` when searched for `John_X` as `_` is considered literal. I want to escape underscore and only return `John_X 124`\r\n\r\nhow can I do this? ","title":"Use escape char in spring jpa native query","body":"<p>I have below native query where I want to escape underscore(_) so it wont act as a literal in like search</p>\n<p>PS: this is just a part of query not full</p>\n<pre><code> @RestResource(path = &quot;findLatestEmployeeByNameExactMatch&quot;, rel = &quot;findLatestEmployeeByNameExactMatch&quot;)\n @Query(value = &quot;select e from Employee e &quot; +\n        &quot; WHERE :name IS NULL OR upper(e.name) LIKE upper(:name) &quot; +\n        &quot; AND e.latestProject = (select MAX(an.latestProject) from Employee an where upper(an.name) = upper(a.name))&quot;)\nEmployee findEmployeeByName(@Param(&quot;name&quot;) String name);\n</code></pre>\n<p>Employee table</p>\n<pre><code>name     latest_project\nJohn_X   123\nJohn_X   124\nJohn-X   123\nJohn-X   124\n</code></pre>\n<p>The current api returns two records <code>John_X 124</code> and <code>John-X 124</code> when searched for <code>John_X</code> as <code>_</code> is considered literal. I want to escape underscore and only return <code>John_X 124</code></p>\n<p>how can I do this?</p>\n"},{"tags":["java","pdf","pdfbox","xfa"],"comments":[{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1690271767,"post_id":76736428,"comment_id":135326224,"body_markdown":"The PDF contains a usage rights signature (UR3) which breaks when you edit it. Did you try to do your changes in append mode? In PDF 2.0 usage rights signatures are deprecated, so if you ask the document owner you might be able to remove it?","body":"The PDF contains a usage rights signature (UR3) which breaks when you edit it. Did you try to do your changes in append mode? In PDF 2.0 usage rights signatures are deprecated, so if you ask the document owner you might be able to remove it?"},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1690288161,"post_id":76736428,"comment_id":135329708,"body_markdown":"Yeah, I&#39;ve have tried with append mode and still no success... and I can&#39;t contact the owner sadly ...","body":"Yeah, I&#39;ve have tried with append mode and still no success... and I can&#39;t contact the owner sadly ..."},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1690355594,"post_id":76736428,"comment_id":135340119,"body_markdown":"I&#39;ve tried to remove it with LiveCycle but it becomes unusable ... is there another method?","body":"I&#39;ve tried to remove it with LiveCycle but it becomes unusable ... is there another method?"},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1690358700,"post_id":76736428,"comment_id":135340726,"body_markdown":"Cannot resolve symbol &#39;UR3&#39; same for UR ... i&#39;m using pdfbox  2.0.28 and 3.0.0-alpha3, and only using document.setAllSecurityToBeRemoved(true); results in an unusable PDF ...","body":"Cannot resolve symbol &#39;UR3&#39; same for UR ... i&#39;m using pdfbox  2.0.28 and 3.0.0-alpha3, and only using document.setAllSecurityToBeRemoved(true); results in an unusable PDF ..."},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":2,"creation_date":1690364094,"post_id":76736428,"comment_id":135341879,"body_markdown":"The code was untestet  and was to show how it could be done. Here is a corrected version:\n`PDDocument document = PDDocument.load(pdfFile);\ndocument.setAllSecurityToBeRemoved(true); \nCOSDictionary dictionary = document.getDocumentCatalog().getCOSObject(); \ndictionary.removeItem(COSName.PERMS); \ndictionary.setNeedToBeUpdated(true);\n...`","body":"The code was untestet  and was to show how it could be done. Here is a corrected version: <code>PDDocument document = PDDocument.load(pdfFile); document.setAllSecurityToBeRemoved(true);  COSDictionary dictionary = document.getDocumentCatalog().getCOSObject();  dictionary.removeItem(COSName.PERMS);  dictionary.setNeedToBeUpdated(true); ...</code>"},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1690370931,"post_id":76736428,"comment_id":135343297,"body_markdown":"Still the PDF is unusable ... but thank you for trying ...","body":"Still the PDF is unusable ... but thank you for trying ..."},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1690373009,"post_id":76736428,"comment_id":135343750,"body_markdown":"What do you mean by not usable? Did you try to remove it, save it? The the size should be 62-63 KB. Then load this file and do your changes... If that doesn&#39;t help then post your result file and we can take a look. Maybe the things you do break the PDF in another way...","body":"What do you mean by not usable? Did you try to remove it, save it? The the size should be 62-63 KB. Then load this file and do your changes... If that doesn&#39;t help then post your result file and we can take a look. Maybe the things you do break the PDF in another way..."},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1690373122,"post_id":76736428,"comment_id":135343786,"body_markdown":"Idk if you opened the PDF but if you did, I just want to call the &quot;Import XML&quot; function when opening the PDF. So I have just added a call for a function inside of an existing event.\n\n&lt;event activity=&quot;initialize&quot; name=&quot;event__initialize&quot;&gt;\n&lt;script contentType=&quot;application/x-javascript&quot;&gt;\n\tcsDataTool.GetInstance().ExecuteImport();\n&lt;/script&gt;\n&lt;/event&gt;","body":"Idk if you opened the PDF but if you did, I just want to call the &quot;Import XML&quot; function when opening the PDF. So I have just added a call for a function inside of an existing event.  &lt;event activity=&quot;initialize&quot; name=&quot;event__initialize&quot;&gt; &lt;script contentType=&quot;application/x-javascript&quot;&gt; \tcsDataTool.GetInstance().ExecuteImport(); &lt;/script&gt; &lt;/event&gt;"},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1690373861,"post_id":76736428,"comment_id":135343959,"body_markdown":"[link](https://wetransfer.com/downloads/6f739245ace02d9a64f28357df273a2420230726121620/1aaa3d) This is the final PDF that I got...","body":"<a href=\"https://wetransfer.com/downloads/6f739245ace02d9a64f28357df273a2420230726121620/1aaa3d\" rel=\"nofollow noreferrer\">link</a> This is the final PDF that I got..."},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":0,"creation_date":1690438733,"post_id":76736428,"comment_id":135354436,"body_markdown":"Ok your are doing much more than written here: The original file is 70kb and if I remove the UR-Signature the file is 63kb. Your file is 115kb. The producer also says &quot;modified using OpenPDf 1.3.30&quot; - here you only write about Pdfbox. I can see 2 additions using append mode. But removing a UR-Signature should not be done in append mode. Also adobe reports lots of errors. So something breaks along the line of what your are doing...","body":"Ok your are doing much more than written here: The original file is 70kb and if I remove the UR-Signature the file is 63kb. Your file is 115kb. The producer also says &quot;modified using OpenPDf 1.3.30&quot; - here you only write about Pdfbox. I can see 2 additions using append mode. But removing a UR-Signature should not be done in append mode. Also adobe reports lots of errors. So something breaks along the line of what your are doing..."},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1690440722,"post_id":76736428,"comment_id":135354781,"body_markdown":"Sorry I&#39;ve uploaded the wrong PDF. Indeed the modified PDF has 63kb but I can&#39;t use the &quot;Import XML&quot;.\n[link](https://wetransfer.com/downloads/1694c638483056ee7d53c9b54ad7b0ae20230727065111/c65da5)\n\nAfter the removal of the signature I try to modify the javascript behind the PDF to use the &quot;Import XML&quot; function when the PDF is opened and I attach a XML file. That&#39;s why the other one was 113kb. I&#39;ve tried PDFBox, iText 4 and now OpenPDF 1.3.30...\nThe point is that I need to fill the form and send it back to the government.","body":"Sorry I&#39;ve uploaded the wrong PDF. Indeed the modified PDF has 63kb but I can&#39;t use the &quot;Import XML&quot;. <a href=\"https://wetransfer.com/downloads/1694c638483056ee7d53c9b54ad7b0ae20230727065111/c65da5\" rel=\"nofollow noreferrer\">link</a>  After the removal of the signature I try to modify the javascript behind the PDF to use the &quot;Import XML&quot; function when the PDF is opened and I attach a XML file. That&#39;s why the other one was 113kb. I&#39;ve tried PDFBox, iText 4 and now OpenPDF 1.3.30... The point is that I need to fill the form and send it back to the government."},{"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"score":1,"creation_date":1690474534,"post_id":76736428,"comment_id":135362268,"body_markdown":"If I click on the &quot;import XML&quot; Button it is working for me - I successfully added the xml as an attachment. Update: You have written: &quot;if I use Adobe Reader PRO everything works fine&quot; - that explains it. One reason could be if you remove the usage rights then you are not able to use certain features of adobe reader (anymore) which are normally reserved for acrobat pro version","body":"If I click on the &quot;import XML&quot; Button it is working for me - I successfully added the xml as an attachment. Update: You have written: &quot;if I use Adobe Reader PRO everything works fine&quot; - that explains it. One reason could be if you remove the usage rights then you are not able to use certain features of adobe reader (anymore) which are normally reserved for acrobat pro version"},{"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"score":0,"creation_date":1690523425,"post_id":76736428,"comment_id":135368392,"body_markdown":"Well that makes alot of sense...","body":"Well that makes alot of sense..."}],"answers":[{"tags":[],"owner":{"account_id":2674923,"reputation":9479,"user_id":2311528,"accept_rate":59,"display_name":"Lonzak"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690530988,"creation_date":1690476351,"answer_id":76781877,"question_id":76736428,"body_markdown":"Although it is not completely clear what you want*, here are some answers to part of your questions:\r\n\r\n&gt; My question is: is this even possible? To modify the javascript\r\n&gt; without breaking usage rights?\r\n\r\nIt is a signature so no. If you manipulate the document you&#39;ll break the signature. In the past there was a mechanism called &quot;reader enabled&quot; where you could unlock features in _dobe reader for certain documents. It might be that the document was &quot;reader enabled&quot; and thus allows editing XFA forms in _dobe reader. Found the following infos as part of the signature:\r\n\r\n    appRightsDocument: FullSave\r\n    appRightsForm: FillIn,Add,Delete\r\n    appRightsSignature: Modify\r\n    appRightsAnnots: \r\n    appRightsEF: Create,Delete,Modify,Import\r\n\r\nSo to change the JavaScript you have to remove the UA-signature but then you might loose the rights to do stuff in _dobe reader.\r\n\r\n\r\n**And finally one remark about XFA: XFA is a proprietary standard of adobe and has been deprecated in PDF2.0. I would not use it for any project (ever).**\r\n\r\n_____\r\n\r\n\\*\r\n\r\n* Why do you want to change the javascript - what is not working for you?\r\n* To what JavaScript do you want to change the existing value?\r\n* You said that _dobe acrobat pro is working - so you have a working solution?","title":"Programatically fill Government PDF (XFA dynamic)","body":"<p>Although it is not completely clear what you want*, here are some answers to part of your questions:</p>\n<blockquote>\n<p>My question is: is this even possible? To modify the javascript\nwithout breaking usage rights?</p>\n</blockquote>\n<p>It is a signature so no. If you manipulate the document you'll break the signature. In the past there was a mechanism called &quot;reader enabled&quot; where you could unlock features in _dobe reader for certain documents. It might be that the document was &quot;reader enabled&quot; and thus allows editing XFA forms in _dobe reader. Found the following infos as part of the signature:</p>\n<pre><code>appRightsDocument: FullSave\nappRightsForm: FillIn,Add,Delete\nappRightsSignature: Modify\nappRightsAnnots: \nappRightsEF: Create,Delete,Modify,Import\n</code></pre>\n<p>So to change the JavaScript you have to remove the UA-signature but then you might loose the rights to do stuff in _dobe reader.</p>\n<p><strong>And finally one remark about XFA: XFA is a proprietary standard of adobe and has been deprecated in PDF2.0. I would not use it for any project (ever).</strong></p>\n<hr />\n<p>*</p>\n<ul>\n<li>Why do you want to change the javascript - what is not working for you?</li>\n<li>To what JavaScript do you want to change the existing value?</li>\n<li>You said that _dobe acrobat pro is working - so you have a working solution?</li>\n</ul>\n"}],"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76781877,"answer_count":1,"score":0,"last_activity_date":1690530988,"creation_date":1689928856,"question_id":76736428,"body_markdown":"I need to fill a form from a XFA PDF generated with LiveCycle. I&#39;m using PDFBox 3.0.0-beta1 atm and I&#39;ve tried iText 4.2.0 and PDFBox 2.0.28 but with no success. Anything I do to the PDF, results in a unusable PDF, it breaks the usage rights if I understood correctly. Below is my java code:\r\n```\r\nPDDocument doc = Loader.loadPDF(new File(Paths.get(FileUtils.listFiles(new File(&quot;formulare&quot;), new PrefixFileFilter(&quot;F1129&quot;), null).toArray()[0].toString()).toUri()));\r\nPDDocumentCatalog catalog = doc.getDocumentCatalog();\r\nPDAcroForm acroForm = catalog.getAcroForm();\r\nPDXFAResource xfa1 = acroForm.getXFA();\r\n\r\nCOSStream cosout = doc.getDocument().createCOSStream();\r\nOutputStream out = cosout.createRawOutputStream();\r\n\r\nTransformerFactory tFactory = TransformerFactory.newInstance();\r\nTransformer transformer = tFactory.newTransformer();\r\n\r\nStreamResult result = new StreamResult(out);\r\nDocument src2 = acroForm.getXFA().getDocument();\r\n\r\nNodeList dataElements = src2.getElementsByTagName(&quot;script&quot;);\r\nif (dataElements != null) {\r\n  for (int i = 0; i &lt; dataElements.getLength(); i++) {\r\n    if (i == 45) {                   \r\n       dataElements.item(i).setTextContent(dataElements.item(i).getTextContent() + &quot;csDataTool.GetInstance().ExecuteImport();&quot;);\r\n    }\r\n  }\r\n}\r\n\r\ntransformer.setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\r\ntransformer.setOutputProperty(OutputKeys.INDENT, &quot;no&quot;);\r\ntransformer.transform(new DOMSource(src2), result);\r\n\r\nPDXFAResource xfaout = new PDXFAResource(cosout);\r\nacroForm.setXFA(xfaout);\r\nout.close();\r\n\r\nFileOutputStream fos = new FileOutputStream(&quot;f1129Modified.pdf&quot;);\r\ndoc.saveIncremental(fos);\r\ndoc.close();\r\ncosout.close();\r\nfos.flush();\r\nfos.close();\r\n```\r\ni == 45 (that is the position of the script I want to edit)\r\n\r\nBut after I modify the XFA, the PDF opens normally but I can&#39;t to anything in it. No errors, no warnings... but if I just do this\r\n```\r\ndataElements.item(i).setTextContent(dataElements.item(i).getTextContent());\r\n```\r\nit works perfectly...\r\n\r\nMy question is: is this even possible? To modify the javascript without breaking usage rights? If not, how can I fill this PDF?\r\nThe XML that they want to be attached has different tags than the XSD I&#39;ve tried to find inside the XFA.\r\n\r\nThe PDF in question can be downloaded from here: &lt;https://mfinante.gov.ro/documents/2552173/2552377/31.OrdinPlataElectronic_2023_05_19_A2.0.26+.pdf/5acf3ff7-7ff1-aa2c-283c-151d49af0d8b?t=1684492636871&amp;download=true&gt;\r\n\r\nAn example of a XML to be imported:\r\n```\r\n&lt;?xml version=&quot;1.0&quot;?&gt;\r\n&lt;f1129 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;mfp:anaf:dgti:f1129:declaratie:v1&quot; xmlns=&quot;mfp:anaf:dgti:f1129:declaratie:v1&quot; versiune_pdf=&quot;A2.0.21&quot; d_rec=&quot;0&quot; suma_control=&quot;3644129&quot; total_opm=&quot;245.5&quot; nr_inregistrari=&quot;1&quot; luna_r=&quot;12&quot; an=&quot;2022&quot; data_document=&quot;19.12.2022&quot; nr_document=&quot;1234567890&quot; nume_ip=&quot;asdasdas&quot; adresa_ip=&quot;asddas&quot; cui_ip=&quot;3643884&quot; tip_ent=&quot;1&quot;&gt;\r\n  &lt;rand_op nr_op=&quot;32&quot; iban_platitor=&quot;RO38TREZ24A670503200109X&quot; den_trezorerie=&quot;TREZORERIA  STATULUI&quot; cod_program=&quot;0000000000&quot; cod_angajament=&quot;AAAFSF23N4X&quot; ind_angajament=&quot;AA2&quot; cui_beneficiar=&quot;17460640&quot; den_beneficiar=&quot;Your Consulting SRL&quot; iban_beneficiar=&quot;RO38TREZ24A670503200109X&quot; den_banca_trez=&quot;TREZORERIA  STATULUI&quot; suma_op=&quot;245.5&quot; explicatii=&quot;asdasd&quot; /&gt;\r\n&lt;/f1129&gt;\r\n```\r\n\r\nThe strangest thing is that if I use Adobe Reader PRO everything works fine. xD And I can&#39;t find a reason why ...","title":"Programatically fill Government PDF (XFA dynamic)","body":"<p>I need to fill a form from a XFA PDF generated with LiveCycle. I'm using PDFBox 3.0.0-beta1 atm and I've tried iText 4.2.0 and PDFBox 2.0.28 but with no success. Anything I do to the PDF, results in a unusable PDF, it breaks the usage rights if I understood correctly. Below is my java code:</p>\n<pre><code>PDDocument doc = Loader.loadPDF(new File(Paths.get(FileUtils.listFiles(new File(&quot;formulare&quot;), new PrefixFileFilter(&quot;F1129&quot;), null).toArray()[0].toString()).toUri()));\nPDDocumentCatalog catalog = doc.getDocumentCatalog();\nPDAcroForm acroForm = catalog.getAcroForm();\nPDXFAResource xfa1 = acroForm.getXFA();\n\nCOSStream cosout = doc.getDocument().createCOSStream();\nOutputStream out = cosout.createRawOutputStream();\n\nTransformerFactory tFactory = TransformerFactory.newInstance();\nTransformer transformer = tFactory.newTransformer();\n\nStreamResult result = new StreamResult(out);\nDocument src2 = acroForm.getXFA().getDocument();\n\nNodeList dataElements = src2.getElementsByTagName(&quot;script&quot;);\nif (dataElements != null) {\n  for (int i = 0; i &lt; dataElements.getLength(); i++) {\n    if (i == 45) {                   \n       dataElements.item(i).setTextContent(dataElements.item(i).getTextContent() + &quot;csDataTool.GetInstance().ExecuteImport();&quot;);\n    }\n  }\n}\n\ntransformer.setOutputProperty(OutputKeys.ENCODING, &quot;UTF-8&quot;);\ntransformer.setOutputProperty(OutputKeys.INDENT, &quot;no&quot;);\ntransformer.transform(new DOMSource(src2), result);\n\nPDXFAResource xfaout = new PDXFAResource(cosout);\nacroForm.setXFA(xfaout);\nout.close();\n\nFileOutputStream fos = new FileOutputStream(&quot;f1129Modified.pdf&quot;);\ndoc.saveIncremental(fos);\ndoc.close();\ncosout.close();\nfos.flush();\nfos.close();\n</code></pre>\n<p>i == 45 (that is the position of the script I want to edit)</p>\n<p>But after I modify the XFA, the PDF opens normally but I can't to anything in it. No errors, no warnings... but if I just do this</p>\n<pre><code>dataElements.item(i).setTextContent(dataElements.item(i).getTextContent());\n</code></pre>\n<p>it works perfectly...</p>\n<p>My question is: is this even possible? To modify the javascript without breaking usage rights? If not, how can I fill this PDF?\nThe XML that they want to be attached has different tags than the XSD I've tried to find inside the XFA.</p>\n<p>The PDF in question can be downloaded from here: <a href=\"https://mfinante.gov.ro/documents/2552173/2552377/31.OrdinPlataElectronic_2023_05_19_A2.0.26+.pdf/5acf3ff7-7ff1-aa2c-283c-151d49af0d8b?t=1684492636871&amp;download=true\" rel=\"nofollow noreferrer\">https://mfinante.gov.ro/documents/2552173/2552377/31.OrdinPlataElectronic_2023_05_19_A2.0.26+.pdf/5acf3ff7-7ff1-aa2c-283c-151d49af0d8b?t=1684492636871&amp;download=true</a></p>\n<p>An example of a XML to be imported:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;f1129 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;mfp:anaf:dgti:f1129:declaratie:v1&quot; xmlns=&quot;mfp:anaf:dgti:f1129:declaratie:v1&quot; versiune_pdf=&quot;A2.0.21&quot; d_rec=&quot;0&quot; suma_control=&quot;3644129&quot; total_opm=&quot;245.5&quot; nr_inregistrari=&quot;1&quot; luna_r=&quot;12&quot; an=&quot;2022&quot; data_document=&quot;19.12.2022&quot; nr_document=&quot;1234567890&quot; nume_ip=&quot;asdasdas&quot; adresa_ip=&quot;asddas&quot; cui_ip=&quot;3643884&quot; tip_ent=&quot;1&quot;&gt;\n  &lt;rand_op nr_op=&quot;32&quot; iban_platitor=&quot;RO38TREZ24A670503200109X&quot; den_trezorerie=&quot;TREZORERIA  STATULUI&quot; cod_program=&quot;0000000000&quot; cod_angajament=&quot;AAAFSF23N4X&quot; ind_angajament=&quot;AA2&quot; cui_beneficiar=&quot;17460640&quot; den_beneficiar=&quot;Your Consulting SRL&quot; iban_beneficiar=&quot;RO38TREZ24A670503200109X&quot; den_banca_trez=&quot;TREZORERIA  STATULUI&quot; suma_op=&quot;245.5&quot; explicatii=&quot;asdasd&quot; /&gt;\n&lt;/f1129&gt;\n</code></pre>\n<p>The strangest thing is that if I use Adobe Reader PRO everything works fine. xD And I can't find a reason why ...</p>\n"},{"tags":["java","gradle","mapstruct"],"comments":[{"owner":{"account_id":7300136,"reputation":1160,"user_id":5563263,"accept_rate":57,"display_name":"Loading"},"score":0,"creation_date":1690479579,"post_id":76776481,"comment_id":135363264,"body_markdown":"Your gradle script doesnt contain the version of each dependency. Are they really the same?","body":"Your gradle script doesnt contain the version of each dependency. Are they really the same?"},{"owner":{"account_id":28939766,"reputation":1,"user_id":22166547,"display_name":"honhim"},"score":0,"creation_date":1690508564,"post_id":76776481,"comment_id":135367170,"body_markdown":"Yes, i can make sure there using the same version.  I&#39;m actually not post the whole script on this page. \n```\n    configurations.configureEach {\n        resolutionStrategy.cacheChangingModulesFor 0, TimeUnit.SECONDS\n        resolutionStrategy.eachDependency {\n            if (it.requested.getGroup() == &#39;org.mapstruct&#39; &amp;&amp; it.requested.getName().startsWith(&#39;mapstruct&#39;)) {\n                it.useVersion(&#39;1.4.2.Final&#39;)\n            }\n        }\n    }\n```","body":"Yes, i can make sure there using the same version.  I&#39;m actually not post the whole script on this page.  ```     configurations.configureEach {         resolutionStrategy.cacheChangingModulesFor 0, TimeUnit.SECONDS         resolutionStrategy.eachDependency {             if (it.requested.getGroup() == &#39;org.mapstruct&#39; &amp;&amp; it.requested.getName().startsWith(&#39;mapstruct&#39;)) {                 it.useVersion(&#39;1.4.2.Final&#39;)             }         }     } ```"}],"answers":[{"tags":[],"owner":{"account_id":28939766,"reputation":1,"user_id":22166547,"display_name":"honhim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690530907,"creation_date":1690530907,"answer_id":76785829,"question_id":76776481,"body_markdown":"Well, I have found the cause...\r\n\r\nBy default, Gradle outputs logs at the warn level, while Maven(maven-compiler-plugin) does not.\r\n\r\nAnd I raised the Gradle compilation warning level to the error level by setting`options.compilerArgs &lt;&lt; &quot;-Werror&quot;`.\r\n\r\n&#128517;","title":"Method returning the very entity itself(which is not a JavaBean method), will be recognized as unmapped property(in gradle)","body":"<p>Well, I have found the cause...</p>\n<p>By default, Gradle outputs logs at the warn level, while Maven(maven-compiler-plugin) does not.</p>\n<p>And I raised the Gradle compilation warning level to the error level by setting<code>options.compilerArgs &lt;&lt; &quot;-Werror&quot;</code>.</p>\n<p>😅</p>\n"}],"owner":{"account_id":28939766,"reputation":1,"user_id":22166547,"display_name":"honhim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690530907,"creation_date":1690431696,"question_id":76776481,"body_markdown":"I define an abstract class and its implementation as follows.\r\n```java\r\n@MappedSuperclass\r\n@EntityListeners(CRUDListener.class)\r\npublic abstract class AbstractAR&lt;A extends AbstractAR&lt;A, ID&gt;, ID&gt; extends AbstractAggregateRoot&lt;A&gt; implements DomainEntity&lt;A, ID&gt; {\r\n\r\n    public void validate() {\r\n    }\r\n\r\n    protected boolean enableSelectEvent() {\r\n        return false;\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n    public A update(Consumer&lt;A&gt; updater) {\r\n        A a = (A) this;\r\n        updater.accept(a);\r\n        return a;\r\n    }\r\n\r\n}\r\n\r\n@Getter\r\n@Setter\r\n@ToString(callSuper = true)\r\n@NoArgsConstructor\r\n@Entity\r\n@Table(name = SimpleDO.TABLE_NAME)\r\npublic class SimpleDO extends AbstractAR&lt;SimpleDO, String&gt; {\r\n\r\n    public static final String TABLE_NAME = &quot;simple_table&quot;;\r\n\r\n    @Id\r\n    private String id;\r\n\r\n    @Column(name = &quot;name&quot;, nullable = false)\r\n    @Comment(&quot;name&quot;)\r\n    private String name;\r\n\r\n}\r\n```\r\nWhen i using Mapstruct with Gradle project will cause a compilation error(Unmapped target property: &quot;update&quot;), which is obviously not a JavaBean method. It means I have to explicitly declare to ignore the target property(update) in order to compile successfully.\r\n&gt; Tips: I can successfully compile and run the same code in maven project with the same version of Mapstruct(1.4.2.Final).\r\n\r\nWhat caused the differences between Gradle and Maven?\r\n\r\n```groovy\r\n// My gradle script\r\ndependencies {\r\n        implementation &#39;org.mapstruct:mapstruct&#39;\r\n        implementation &#39;org.mapstruct:mapstruct-jdk8&#39;\r\n        compileOnly &#39;org.projectlombok:lombok&#39;\r\n\r\n        annotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n        annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n        annotationProcessor &#39;org.projectlombok:lombok-mapstruct-binding&#39;\r\n        annotationProcessor &#39;org.mapstruct:mapstruct&#39;\r\n        annotationProcessor &#39;org.mapstruct:mapstruct-processor&#39;\r\n        annotationProcessor &#39;org.mapstruct:mapstruct-jdk8&#39;\r\n\r\n        testAnnotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n        testAnnotationProcessor &#39;org.projectlombok:lombok&#39;\r\n        testAnnotationProcessor &#39;org.projectlombok:lombok-mapstruct-binding&#39;\r\n        testAnnotationProcessor &#39;org.mapstruct:mapstruct&#39;\r\n        testAnnotationProcessor &#39;org.mapstruct:mapstruct-processor&#39;\r\n        testAnnotationProcessor &#39;org.mapstruct:mapstruct-jdk8&#39;\r\n    }\r\n```\r\n```xml\r\n&lt;!-- My maven pom.xml --&gt;\r\n&lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;annotationProcessorPaths&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n              &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n              &lt;version&gt;0.2.0&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n              &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n              &lt;artifactId&gt;mapstruct-jdk8&lt;/artifactId&gt;\r\n              &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n            &lt;path&gt;\r\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n              &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n              &lt;version&gt;${spring-boot.version}&lt;/version&gt;\r\n            &lt;/path&gt;\r\n          &lt;/annotationProcessorPaths&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n```\r\n\r\nI have try mapstrcut version 1.5.5.Final and 1.4.2.Final.\r\nWhen i declare `@Mapping(target = &quot;update&quot;, ignore = true)` on mapping method, my project is runnable. Seems not a build configuration problem.","title":"Method returning the very entity itself(which is not a JavaBean method), will be recognized as unmapped property(in gradle)","body":"<p>I define an abstract class and its implementation as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\n@EntityListeners(CRUDListener.class)\npublic abstract class AbstractAR&lt;A extends AbstractAR&lt;A, ID&gt;, ID&gt; extends AbstractAggregateRoot&lt;A&gt; implements DomainEntity&lt;A, ID&gt; {\n\n    public void validate() {\n    }\n\n    protected boolean enableSelectEvent() {\n        return false;\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public A update(Consumer&lt;A&gt; updater) {\n        A a = (A) this;\n        updater.accept(a);\n        return a;\n    }\n\n}\n\n@Getter\n@Setter\n@ToString(callSuper = true)\n@NoArgsConstructor\n@Entity\n@Table(name = SimpleDO.TABLE_NAME)\npublic class SimpleDO extends AbstractAR&lt;SimpleDO, String&gt; {\n\n    public static final String TABLE_NAME = &quot;simple_table&quot;;\n\n    @Id\n    private String id;\n\n    @Column(name = &quot;name&quot;, nullable = false)\n    @Comment(&quot;name&quot;)\n    private String name;\n\n}\n</code></pre>\n<p>When i using Mapstruct with Gradle project will cause a compilation error(Unmapped target property: &quot;update&quot;), which is obviously not a JavaBean method. It means I have to explicitly declare to ignore the target property(update) in order to compile successfully.</p>\n<blockquote>\n<p>Tips: I can successfully compile and run the same code in maven project with the same version of Mapstruct(1.4.2.Final).</p>\n</blockquote>\n<p>What caused the differences between Gradle and Maven?</p>\n<pre><code>// My gradle script\ndependencies {\n        implementation 'org.mapstruct:mapstruct'\n        implementation 'org.mapstruct:mapstruct-jdk8'\n        compileOnly 'org.projectlombok:lombok'\n\n        annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'\n        annotationProcessor 'org.projectlombok:lombok'\n        annotationProcessor 'org.projectlombok:lombok-mapstruct-binding'\n        annotationProcessor 'org.mapstruct:mapstruct'\n        annotationProcessor 'org.mapstruct:mapstruct-processor'\n        annotationProcessor 'org.mapstruct:mapstruct-jdk8'\n\n        testAnnotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'\n        testAnnotationProcessor 'org.projectlombok:lombok'\n        testAnnotationProcessor 'org.projectlombok:lombok-mapstruct-binding'\n        testAnnotationProcessor 'org.mapstruct:mapstruct'\n        testAnnotationProcessor 'org.mapstruct:mapstruct-processor'\n        testAnnotationProcessor 'org.mapstruct:mapstruct-jdk8'\n    }\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- My maven pom.xml --&gt;\n&lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n              &lt;version&gt;${lombok.version}&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n              &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n              &lt;version&gt;0.2.0&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n              &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n              &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n              &lt;artifactId&gt;mapstruct-jdk8&lt;/artifactId&gt;\n              &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n              &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n              &lt;version&gt;${spring-boot.version}&lt;/version&gt;\n            &lt;/path&gt;\n          &lt;/annotationProcessorPaths&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>I have try mapstrcut version 1.5.5.Final and 1.4.2.Final.\nWhen i declare <code>@Mapping(target = &quot;update&quot;, ignore = true)</code> on mapping method, my project is runnable. Seems not a build configuration problem.</p>\n"},{"tags":["java","arrays","foreach"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":3,"creation_date":1690450576,"post_id":76778390,"comment_id":135356690,"body_markdown":"What does the error message say?","body":"What does the error message say?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1690450617,"post_id":76778390,"comment_id":135356705,"body_markdown":"[&quot;Why&quot; questions are very unclear.](https://meta.stackoverflow.com/q/323334/5133585) What *kind* of reasons are you looking for? Would &quot;because the language specification says this is an error&quot; be acceptable to you?","body":"<a href=\"https://meta.stackoverflow.com/q/323334/5133585\">&quot;Why&quot; questions are very unclear.</a> What <i>kind</i> of reasons are you looking for? Would &quot;because the language specification says this is an error&quot; be acceptable to you?"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":4,"creation_date":1690450767,"post_id":76778390,"comment_id":135356737,"body_markdown":"Because the JLS says so. https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2","body":"Because the JLS says so. <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.2\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se7/html/&hellip;</a>"},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1690450933,"post_id":76778390,"comment_id":135356781,"body_markdown":"Declaring an int outside a loop doesn&#39;t cause any error. What causes your error is completely ignoring the syntax of the for-each loop and just inventing your own (By just removing the type declaration in your for-each loop). You might as well ask why you can&#39;t write an if statement as `IF [x ! i]`.... Programming languages have a clearly defined syntax you have to follow. And for the for each statement that means `for(&lt;Type&gt; &lt;variable_name&gt; : &lt;iterable_of_type&gt;)`.","body":"Declaring an int outside a loop doesn&#39;t cause any error. What causes your error is completely ignoring the syntax of the for-each loop and just inventing your own (By just removing the type declaration in your for-each loop). You might as well ask why you can&#39;t write an if statement as <code>IF [x ! i]</code>.... Programming languages have a clearly defined syntax you have to follow. And for the for each statement that means <code>for(&lt;Type&gt; &lt;variable_name&gt; : &lt;iterable_of_type&gt;)</code>."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":2,"creation_date":1690451285,"post_id":76778390,"comment_id":135356862,"body_markdown":"What are you trying to achieve by declaring it in the first way? If it were possible, it would expand the scope of the variable unnecessarily, and its value after the loop would be whatever the last element in the array happened to be.","body":"What are you trying to achieve by declaring it in the first way? If it were possible, it would expand the scope of the variable unnecessarily, and its value after the loop would be whatever the last element in the array happened to be."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1690450679,"creation_date":1690450679,"answer_id":76778418,"question_id":76778390,"body_markdown":"Because you simply can&#39;t use for loops like that. The `for in` syntax require you use a new variable which is scoped to the loop. You could use it like this, though:\r\n\r\n```\r\npublic static void main(String[] args) {\r\n    int[] arr = {-1,1,1};\r\n    int i;\r\n    for(i = 0; i &lt; arr.length; i++){\r\n        System.out.println(arr[i]);\r\n    }\r\n}\r\n```","title":"Declaring int i outside for-each loop causing error?","body":"<p>Because you simply can't use for loops like that. The <code>for in</code> syntax require you use a new variable which is scoped to the loop. You could use it like this, though:</p>\n<pre><code>public static void main(String[] args) {\n    int[] arr = {-1,1,1};\n    int i;\n    for(i = 0; i &lt; arr.length; i++){\n        System.out.println(arr[i]);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29104772,"reputation":78,"user_id":22295830,"display_name":"Anmol Pal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690530884,"creation_date":1690530884,"answer_id":76785825,"question_id":76778390,"body_markdown":"The syntax of the enhanced for loop are just like that.\r\n```\r\nfor(int x: arr) {\r\n     System.out.println(x);\r\n}\r\n```","title":"Declaring int i outside for-each loop causing error?","body":"<p>The syntax of the enhanced for loop are just like that.</p>\n<pre><code>for(int x: arr) {\n     System.out.println(x);\n}\n</code></pre>\n"}],"owner":{"account_id":26105404,"reputation":1,"user_id":19800180,"display_name":"Gnaneswar Padam"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1690530884,"creation_date":1690450511,"question_id":76778390,"body_markdown":"    public static void main(String[] args) {\r\n        int[] arr = {-1,1,1};\r\n        int i;\r\n        for(i: arr){\r\n            System.out.println(i);\r\n        }\r\n    }\r\nabove code gives ERROR.\r\nerror: bad initializer for for-loop\r\n\r\nbut the below code works fine.\r\n\r\n    public static void main(String[] args) {\r\n        int[] arr = {-1,1,1};\r\n        for(int i: arr){\r\n            System.out.println(i);\r\n        }\r\n    }\r\n\r\nCan I know why initializing i outside for-each loop is a mistake.?","title":"Declaring int i outside for-each loop causing error?","body":"<pre><code>public static void main(String[] args) {\n    int[] arr = {-1,1,1};\n    int i;\n    for(i: arr){\n        System.out.println(i);\n    }\n}\n</code></pre>\n<p>above code gives ERROR.\nerror: bad initializer for for-loop</p>\n<p>but the below code works fine.</p>\n<pre><code>public static void main(String[] args) {\n    int[] arr = {-1,1,1};\n    for(int i: arr){\n        System.out.println(i);\n    }\n}\n</code></pre>\n<p>Can I know why initializing i outside for-each loop is a mistake.?</p>\n"},{"tags":["java","spring","spring-webflux","resttemplate","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":9064418,"reputation":61,"user_id":6749805,"display_name":"Ramiro Higonet Lang"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1690076687,"creation_date":1644935072,"answer_id":71128136,"question_id":71128020,"body_markdown":"In our applications we are migrating from `RestTemplate` to `WebClient` without any issues, `.block()` works just fine\r\n\r\n```java\r\nResponse response = this.webClient\r\n        .post()\r\n        .uri(uri)\r\n        .body(fromValue)\r\n        .retrieve()\r\n        .bodyToMono(Response.class)\r\n        .timeout(Duration.ofMillis(timeoutMillis))\r\n        .block();\r\n```\r\n\r\nThis is doing the same as `RestTemplate` does, it&#39;s sending the request in a synchronized way, and we have it working in PROD since a couple of months without any issues","title":"Spring RestTemplate vs WebClient for sync requests","body":"<p>In our applications we are migrating from <code>RestTemplate</code> to <code>WebClient</code> without any issues, <code>.block()</code> works just fine</p>\n<pre class=\"lang-java prettyprint-override\"><code>Response response = this.webClient\n        .post()\n        .uri(uri)\n        .body(fromValue)\n        .retrieve()\n        .bodyToMono(Response.class)\n        .timeout(Duration.ofMillis(timeoutMillis))\n        .block();\n</code></pre>\n<p>This is doing the same as <code>RestTemplate</code> does, it's sending the request in a synchronized way, and we have it working in PROD since a couple of months without any issues</p>\n"},{"tags":[],"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1690079516,"creation_date":1645010148,"answer_id":71140806,"question_id":71128020,"body_markdown":"Since there seems to be misunderstandings i will try to answer the questions to the best of my knowledge.\r\n\r\n\r\n&gt; How safe is it to use `.block()` and is it ok in general to block threads in `WebClient`?\r\n\r\nBlocking is always _safe_ but whether or not it affects performance is another thing. When a request comes in, it gets assigned a thread. When we do a request using `RestTemplate` the same thread will do the external request, and `RestTemplate` will block that thread under the hood in wait for the response.\r\n\r\nThis is by no means efficient usage of a thread, but its completely _safe_, and this is how most web servers in general have been working for the past 20 years.\r\n\r\nWhen using `WebClient` in a _**non**-reactive_ application and you block a `Mono&lt;T&gt;` (which you essentially will be doing) the framework will first check that the thread is a type of thread that you are allowed to block (not a _nio-thread_) and after that it uses a `CountDownLatch` which pauses/blocks the calling thread at `CountDownLatch#await` until the first _onNext/onComplete/onError_ signal arrives. This is **completely fine** in a blocking application. You can find the relevant code [here][1].\r\n\r\nWhen you add `WebClient` to the class path you will automatically get netty as the underlying server, which could be good to know. If you wish to change that out, then you need to be explicit about it.\r\n\r\nAlso, it is recommended that if you do multiple requests, then you should chain on as many reactive calls as possible before resorting to `block`.\r\n\r\nIf you want to move over to a reactive application, then this is a very good way of slowly transferring an application, by slowly doing more and more reactive stuff and then calling `block` to return to the _regular_ world.\r\n\r\nAre you fully reactive? no, are you a blocking web server like before, well yes. Is it worse that `RestTemplate` most likely not. Are you better than before, from a maintenance standpoint, yes since spring has officially gone out with that there is not going to be any more updates to `RestTemplate`.\r\n\r\n&gt; Is the mechanics behind blocking calls with `WebClient` similar to what `RestTemplate` does?\r\n\r\nWell this is hard to tell, because `RestTemplate` is mainly just a wrapper around the `HttpClient` provided by the underlying server implementation.\r\n\r\nHow the blocking is written is probably different, but what they do in the end, is most likely the same. A `Mono&lt;T&gt;` blocks using a `CountDownLatch` with repeated calls to `getCount` and then inbetween blocks with a call on latch `await` until the response is back. I havn&#39;t looked at the different `HttpClient`s that `RestTemplate` is wrapping, you need to read up on each of them (tomcat, jetty, undertow, etc. etc.)\r\n\r\n&gt; Is there a possibility that the performance would be worse than in case I just use `RestTemplate`?\r\n\r\nThis is *extremely* hard to tell because performance is not black and white. It all depends on hardware, what type of jobs are to be done, how the code is written, thread pool sizes, operating system etc..\r\n\r\n`Netty` is a fully event driven server and it is starting to become the _de facto_ standard of web server in the Java community. [Undertow decided to switch out their entire core to the `netty core`][2], because it was so good, and easier to maintain.\r\n\r\nAs `Netty` is event driven, running it as an _old_ server with one thread per request could hurt performance since it is not optimized for that type of work, but on the other hand when you run it fully event driven it will shine.\r\n\r\nThe only way to answer this, is to do your own benchmarks, we can&#39;t answer that for you.\r\n\r\nIf you want to know more about how netty actually works under the hood a recommend reading the book [_Netty in Action_][3] which is not free but very good read to understand the innerworkings of `Netty` and its `async` threading model.\r\n\r\n\r\n  [1]: https://github.com/reactor/reactor-core/blob/bdbc44a2bd854078b9a035b195c134237f8fce19/reactor-core/src/main/java/reactor/core/publisher/BlockingSingleSubscriber.java#L81\r\n  [2]: https://undertow.io/blog/2019/04/15/Undertow-3.html\r\n  [3]: https://livebook.manning.com/book/netty-in-action/about-this-book/8","title":"Spring RestTemplate vs WebClient for sync requests","body":"<p>Since there seems to be misunderstandings i will try to answer the questions to the best of my knowledge.</p>\n<blockquote>\n<p>How safe is it to use <code>.block()</code> and is it ok in general to block threads in <code>WebClient</code>?</p>\n</blockquote>\n<p>Blocking is always <em>safe</em> but whether or not it affects performance is another thing. When a request comes in, it gets assigned a thread. When we do a request using <code>RestTemplate</code> the same thread will do the external request, and <code>RestTemplate</code> will block that thread under the hood in wait for the response.</p>\n<p>This is by no means efficient usage of a thread, but its completely <em>safe</em>, and this is how most web servers in general have been working for the past 20 years.</p>\n<p>When using <code>WebClient</code> in a <em><strong>non</strong>-reactive</em> application and you block a <code>Mono&lt;T&gt;</code> (which you essentially will be doing) the framework will first check that the thread is a type of thread that you are allowed to block (not a <em>nio-thread</em>) and after that it uses a <code>CountDownLatch</code> which pauses/blocks the calling thread at <code>CountDownLatch#await</code> until the first <em>onNext/onComplete/onError</em> signal arrives. This is <strong>completely fine</strong> in a blocking application. You can find the relevant code <a href=\"https://github.com/reactor/reactor-core/blob/bdbc44a2bd854078b9a035b195c134237f8fce19/reactor-core/src/main/java/reactor/core/publisher/BlockingSingleSubscriber.java#L81\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>When you add <code>WebClient</code> to the class path you will automatically get netty as the underlying server, which could be good to know. If you wish to change that out, then you need to be explicit about it.</p>\n<p>Also, it is recommended that if you do multiple requests, then you should chain on as many reactive calls as possible before resorting to <code>block</code>.</p>\n<p>If you want to move over to a reactive application, then this is a very good way of slowly transferring an application, by slowly doing more and more reactive stuff and then calling <code>block</code> to return to the <em>regular</em> world.</p>\n<p>Are you fully reactive? no, are you a blocking web server like before, well yes. Is it worse that <code>RestTemplate</code> most likely not. Are you better than before, from a maintenance standpoint, yes since spring has officially gone out with that there is not going to be any more updates to <code>RestTemplate</code>.</p>\n<blockquote>\n<p>Is the mechanics behind blocking calls with <code>WebClient</code> similar to what <code>RestTemplate</code> does?</p>\n</blockquote>\n<p>Well this is hard to tell, because <code>RestTemplate</code> is mainly just a wrapper around the <code>HttpClient</code> provided by the underlying server implementation.</p>\n<p>How the blocking is written is probably different, but what they do in the end, is most likely the same. A <code>Mono&lt;T&gt;</code> blocks using a <code>CountDownLatch</code> with repeated calls to <code>getCount</code> and then inbetween blocks with a call on latch <code>await</code> until the response is back. I havn't looked at the different <code>HttpClient</code>s that <code>RestTemplate</code> is wrapping, you need to read up on each of them (tomcat, jetty, undertow, etc. etc.)</p>\n<blockquote>\n<p>Is there a possibility that the performance would be worse than in case I just use <code>RestTemplate</code>?</p>\n</blockquote>\n<p>This is <em>extremely</em> hard to tell because performance is not black and white. It all depends on hardware, what type of jobs are to be done, how the code is written, thread pool sizes, operating system etc..</p>\n<p><code>Netty</code> is a fully event driven server and it is starting to become the <em>de facto</em> standard of web server in the Java community. <a href=\"https://undertow.io/blog/2019/04/15/Undertow-3.html\" rel=\"nofollow noreferrer\">Undertow decided to switch out their entire core to the <code>netty core</code></a>, because it was so good, and easier to maintain.</p>\n<p>As <code>Netty</code> is event driven, running it as an <em>old</em> server with one thread per request could hurt performance since it is not optimized for that type of work, but on the other hand when you run it fully event driven it will shine.</p>\n<p>The only way to answer this, is to do your own benchmarks, we can't answer that for you.</p>\n<p>If you want to know more about how netty actually works under the hood a recommend reading the book <a href=\"https://livebook.manning.com/book/netty-in-action/about-this-book/8\" rel=\"nofollow noreferrer\"><em>Netty in Action</em></a> which is not free but very good read to understand the innerworkings of <code>Netty</code> and its <code>async</code> threading model.</p>\n"},{"tags":[],"owner":{"account_id":12545853,"reputation":111,"user_id":9129204,"display_name":"Abdessamad ABOUKDIR"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675597840,"creation_date":1675597840,"answer_id":75352006,"question_id":71128020,"body_markdown":"It is worth adding to the previous responses that if you want to use webClient in a blocking way while using only `spring-boot-starter-webflux` dependency, will throw an exception like `block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-http-nio-3`, so in order to use Webclient in a blocking way you need to configure a spring MVC application by adding spring-boot-starter-web as stated in the documentation [Web Environment][1]:\r\n\r\n&gt; A SpringApplication attempts to create the right type of\r\n&gt; ApplicationContext on your behalf. The algorithm used to determine a\r\n&gt; WebApplicationType is the following:\r\n&gt; \r\n&gt; If Spring MVC is present, an\r\n&gt; AnnotationConfigServletWebServerApplicationContext is used\r\n&gt; \r\n&gt; If Spring MVC is not present and Spring WebFlux is present, an\r\n&gt; AnnotationConfigReactiveWebServerApplicationContext is used\r\n&gt; \r\n&gt; Otherwise, AnnotationConfigApplicationContext is used\r\n&gt; \r\n&gt; This means that if you are using Spring MVC and the new WebClient from\r\n&gt; Spring WebFlux in the same application, Spring MVC will be used by\r\n&gt; default. You can override that easily by calling\r\n&gt; setWebApplicationType(WebApplicationType).\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.spring-application.web-environment","title":"Spring RestTemplate vs WebClient for sync requests","body":"<p>It is worth adding to the previous responses that if you want to use webClient in a blocking way while using only <code>spring-boot-starter-webflux</code> dependency, will throw an exception like <code>block()/blockFirst()/blockLast() are blocking, which is not supported in thread reactor-http-nio-3</code>, so in order to use Webclient in a blocking way you need to configure a spring MVC application by adding spring-boot-starter-web as stated in the documentation <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.spring-application.web-environment\" rel=\"nofollow noreferrer\">Web Environment</a>:</p>\n<blockquote>\n<p>A SpringApplication attempts to create the right type of\nApplicationContext on your behalf. The algorithm used to determine a\nWebApplicationType is the following:</p>\n<p>If Spring MVC is present, an\nAnnotationConfigServletWebServerApplicationContext is used</p>\n<p>If Spring MVC is not present and Spring WebFlux is present, an\nAnnotationConfigReactiveWebServerApplicationContext is used</p>\n<p>Otherwise, AnnotationConfigApplicationContext is used</p>\n<p>This means that if you are using Spring MVC and the new WebClient from\nSpring WebFlux in the same application, Spring MVC will be used by\ndefault. You can override that easily by calling\nsetWebApplicationType(WebApplicationType).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3544458,"reputation":3170,"user_id":2960776,"display_name":"Aman Garg"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1690530674,"creation_date":1690530674,"answer_id":76785802,"question_id":71128020,"body_markdown":"`RestTemplate` and `WebClient` are both popular libraries in the Java ecosystem used for making HTTP requests, particularly in Spring-based applications. They serve the same purpose of communicating with RESTful APIs or other HTTP-based services, but they have different designs and characteristics. Here are some key differences between them:\r\n\r\n1. **Synchronous vs. Asynchronous**:\r\n   - `RestTemplate`: It is a synchronous HTTP client, meaning that when you make a request, the thread making the request will wait until the response is received before proceeding further. This can potentially lead to blocking and decreased application performance in scenarios where you have high concurrency or slow network connections.\r\n   - `WebClient`: It is an asynchronous HTTP client introduced in Spring WebFlux, which is built on top of Project Reactor. It allows you to make non-blocking, asynchronous requests, making it more suitable for high-concurrency scenarios and reactive programming.\r\n\r\n2. **Reactive Support**:\r\n   - `RestTemplate`: It does not natively support reactive programming. If you want to use reactive features, you would need to wrap the `RestTemplate` calls in reactive code using `Mono` or `Flux` (from Reactor).\r\n   - `WebClient`: It is designed with reactive support from the ground up. It returns reactive types like `Mono` and `Flux` directly, which can seamlessly integrate with other reactive components in Spring WebFlux.\r\n\r\n3. **Dependencies**:\r\n   - `RestTemplate`: It is part of the Spring Web module, which means it is available in applications using Spring MVC (Servlet-based) or Spring Boot with traditional servlet containers.\r\n   - `WebClient`: It is also part of the Spring WebFlux module. To use `WebClient`, you need to have Spring WebFlux on your classpath. Spring WebFlux is designed for building reactive, non-blocking applications and can be used with servlet containers or Netty.\r\n\r\n4. **Ease of Use**:\r\n   - `RestTemplate`: It has been available since older versions of Spring and is widely used in many projects. Its API is more familiar and might be easier to start with for developers already familiar with traditional synchronous programming.\r\n   - `WebClient`: The API of `WebClient` might feel a bit more complex due to its reactive nature, especially if you&#39;re not familiar with reactive programming concepts. However, it provides powerful and flexible features for reactive applications.\r\n\r\n5. **Future Development**:\r\n   - `RestTemplate`: Since Spring WebFlux and `WebClient` are part of Spring&#39;s reactive ecosystem, it is likely that future enhancements and features will be more focused on `WebClient`, and `RestTemplate` might become less prominent over time.\r\n   - `WebClient`: It is the recommended choice for building reactive applications with Spring WebFlux. As such, it is more likely to receive ongoing improvements and optimizations.\r\n\r\nIn summary, if you are working on a traditional Spring MVC application and don&#39;t require reactive programming, `RestTemplate` could be a straightforward choice. However, if you are building a reactive application with Spring WebFlux, or if you need non-blocking, asynchronous behavior, `WebClient` is the more appropriate option.","title":"Spring RestTemplate vs WebClient for sync requests","body":"<p><code>RestTemplate</code> and <code>WebClient</code> are both popular libraries in the Java ecosystem used for making HTTP requests, particularly in Spring-based applications. They serve the same purpose of communicating with RESTful APIs or other HTTP-based services, but they have different designs and characteristics. Here are some key differences between them:</p>\n<ol>\n<li><p><strong>Synchronous vs. Asynchronous</strong>:</p>\n<ul>\n<li><code>RestTemplate</code>: It is a synchronous HTTP client, meaning that when you make a request, the thread making the request will wait until the response is received before proceeding further. This can potentially lead to blocking and decreased application performance in scenarios where you have high concurrency or slow network connections.</li>\n<li><code>WebClient</code>: It is an asynchronous HTTP client introduced in Spring WebFlux, which is built on top of Project Reactor. It allows you to make non-blocking, asynchronous requests, making it more suitable for high-concurrency scenarios and reactive programming.</li>\n</ul>\n</li>\n<li><p><strong>Reactive Support</strong>:</p>\n<ul>\n<li><code>RestTemplate</code>: It does not natively support reactive programming. If you want to use reactive features, you would need to wrap the <code>RestTemplate</code> calls in reactive code using <code>Mono</code> or <code>Flux</code> (from Reactor).</li>\n<li><code>WebClient</code>: It is designed with reactive support from the ground up. It returns reactive types like <code>Mono</code> and <code>Flux</code> directly, which can seamlessly integrate with other reactive components in Spring WebFlux.</li>\n</ul>\n</li>\n<li><p><strong>Dependencies</strong>:</p>\n<ul>\n<li><code>RestTemplate</code>: It is part of the Spring Web module, which means it is available in applications using Spring MVC (Servlet-based) or Spring Boot with traditional servlet containers.</li>\n<li><code>WebClient</code>: It is also part of the Spring WebFlux module. To use <code>WebClient</code>, you need to have Spring WebFlux on your classpath. Spring WebFlux is designed for building reactive, non-blocking applications and can be used with servlet containers or Netty.</li>\n</ul>\n</li>\n<li><p><strong>Ease of Use</strong>:</p>\n<ul>\n<li><code>RestTemplate</code>: It has been available since older versions of Spring and is widely used in many projects. Its API is more familiar and might be easier to start with for developers already familiar with traditional synchronous programming.</li>\n<li><code>WebClient</code>: The API of <code>WebClient</code> might feel a bit more complex due to its reactive nature, especially if you're not familiar with reactive programming concepts. However, it provides powerful and flexible features for reactive applications.</li>\n</ul>\n</li>\n<li><p><strong>Future Development</strong>:</p>\n<ul>\n<li><code>RestTemplate</code>: Since Spring WebFlux and <code>WebClient</code> are part of Spring's reactive ecosystem, it is likely that future enhancements and features will be more focused on <code>WebClient</code>, and <code>RestTemplate</code> might become less prominent over time.</li>\n<li><code>WebClient</code>: It is the recommended choice for building reactive applications with Spring WebFlux. As such, it is more likely to receive ongoing improvements and optimizations.</li>\n</ul>\n</li>\n</ol>\n<p>In summary, if you are working on a traditional Spring MVC application and don't require reactive programming, <code>RestTemplate</code> could be a straightforward choice. However, if you are building a reactive application with Spring WebFlux, or if you need non-blocking, asynchronous behavior, <code>WebClient</code> is the more appropriate option.</p>\n"}],"owner":{"account_id":24264882,"reputation":43,"user_id":18213932,"display_name":"tracer_13"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5182,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71140806,"answer_count":4,"score":4,"last_activity_date":1690530674,"creation_date":1644934631,"question_id":71128020,"body_markdown":"Sorry if this was asked before, but I didn&#39;t find a matching question. \r\n\r\nI have an application that performs api calls to other services. I&#39;m thinking of using `WebClient` over `RestTemplate` as it&#39;s advised by Spring. I&#39;m performing exclusively Synchronous HTTP calls. \r\n\r\nI know `WebClient` is designed with Reactive approach in mind, but in theory: Is it ok to use `WebClient` solely for blocking calls? I&#39;m concerned by the fact that I have to call `.block()` on each call to get the data. So my questions are:\r\n\r\n1. How safe is it to use `.block()` and is it ok in general to block threads in `WebClient`? \r\n2. Is the mechanics behind blocking calls with `WebClient` similar to what `RestTemplate` does?\r\n3. Is there a possibility that the performance would be worse than in case I just use `RestTemplate`? \r\n\r\nThanks in advance!","title":"Spring RestTemplate vs WebClient for sync requests","body":"<p>Sorry if this was asked before, but I didn't find a matching question.</p>\n<p>I have an application that performs api calls to other services. I'm thinking of using <code>WebClient</code> over <code>RestTemplate</code> as it's advised by Spring. I'm performing exclusively Synchronous HTTP calls.</p>\n<p>I know <code>WebClient</code> is designed with Reactive approach in mind, but in theory: Is it ok to use <code>WebClient</code> solely for blocking calls? I'm concerned by the fact that I have to call <code>.block()</code> on each call to get the data. So my questions are:</p>\n<ol>\n<li>How safe is it to use <code>.block()</code> and is it ok in general to block threads in <code>WebClient</code>?</li>\n<li>Is the mechanics behind blocking calls with <code>WebClient</code> similar to what <code>RestTemplate</code> does?</li>\n<li>Is there a possibility that the performance would be worse than in case I just use <code>RestTemplate</code>?</li>\n</ol>\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring-boot","sqslistener"],"owner":{"account_id":28730357,"reputation":73,"user_id":22002449,"display_name":"dracile"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690530568,"creation_date":1690465621,"question_id":76780404,"body_markdown":"I&#39;m working on Spring Boot project. Is there any other way for handling sqs queues than multiple application properties file for every environment?","title":"Any other way of using sqs queues for different environments other than multiple application.properties in spring boot?","body":"<p>I'm working on Spring Boot project. Is there any other way for handling sqs queues than multiple application properties file for every environment?</p>\n"},{"tags":["java","eclipse"],"answers":[{"tags":[],"owner":{"account_id":244375,"reputation":4195,"user_id":517134,"accept_rate":100,"display_name":"Yusuf K."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459768171,"creation_date":1459768171,"answer_id":36400996,"question_id":36400614,"body_markdown":"Have a look [here][1] to try it with [Reflection API][2]\r\n\r\nor maybe you want to change your method to use ellipses(...) as;\r\n\r\n    void myMethod(Object... params){\r\n    \t\tStringBuilder strBuilder = new StringBuilder();\r\n    \t\tstrBuilder.append(&quot;myMethod() - [&quot;);\r\n    \t\tfor (int i=0; i&lt;params.length; i++) {\r\n    \t\t\tstrBuilder.append(&quot;param&quot;+(i+1)+&quot;: &quot;+params[i]+&quot;,&quot;);\r\n    \t\t}\r\n    \t\tstrBuilder.deleteCharAt(strBuilder.length()-1); //last comma deleted\r\n    \t\tstrBuilder.append(&quot;]&quot;);\r\n            logger.info(strBuilder.toString());\r\n    \r\n       }\r\n\r\n  [1]: https://stackoverflow.com/a/3602544/517134\r\n  [2]: https://stackoverflow.com/q/37628/517134","title":"How to iterate over a method parameters in an eclipse template?","body":"<p>Have a look <a href=\"https://stackoverflow.com/a/3602544/517134\">here</a> to try it with <a href=\"https://stackoverflow.com/q/37628/517134\">Reflection API</a></p>\n\n<p>or maybe you want to change your method to use ellipses(...) as;</p>\n\n<pre><code>void myMethod(Object... params){\n        StringBuilder strBuilder = new StringBuilder();\n        strBuilder.append(\"myMethod() - [\");\n        for (int i=0; i&lt;params.length; i++) {\n            strBuilder.append(\"param\"+(i+1)+\": \"+params[i]+\",\");\n        }\n        strBuilder.deleteCharAt(strBuilder.length()-1); //last comma deleted\n        strBuilder.append(\"]\");\n        logger.info(strBuilder.toString());\n\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7852006,"reputation":2536,"user_id":5935221,"display_name":"nyname00"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1459771741,"creation_date":1459771741,"answer_id":36402236,"question_id":36400614,"body_markdown":"I don&#39;t think this is possible using only templates (unless you want to start parsing the generated string). \r\n\r\nTake a look at this Eclipse plugin https://github.com/dernasherbrezon/eclipse-log-param. It should be able to produce (something close to) the desired result.\r\n\r\n*Note*: haven&#39;t tried it myself.","title":"How to iterate over a method parameters in an eclipse template?","body":"<p>I don't think this is possible using only templates (unless you want to start parsing the generated string). </p>\n\n<p>Take a look at this Eclipse plugin <a href=\"https://github.com/dernasherbrezon/eclipse-log-param\" rel=\"nofollow\">https://github.com/dernasherbrezon/eclipse-log-param</a>. It should be able to produce (something close to) the desired result.</p>\n\n<p><em>Note</em>: haven't tried it myself.</p>\n"},{"tags":[],"owner":{"account_id":1316033,"reputation":7857,"user_id":1262865,"accept_rate":50,"display_name":"john16384"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690529944,"creation_date":1690529944,"answer_id":76785726,"question_id":36400614,"body_markdown":"Best I could do with only Eclipse templates is this:\r\n\r\n    System.out.println(&quot;[FINE] ${enclosing_type}.${enclosing_method}(${enclosing_method_arguments}) = &quot; + Stream.of(${enclosing_method_arguments}).map(Object::toString).collect(Collectors.joining(&quot;, &quot;)));\r\n\r\nThis creates something like:\r\n\r\n    private void updateRenderScales(double sx, double sy) {\r\n        System.out.println(&quot;[FINE] Window.updateRenderScales(sx, sy) = &quot; + Stream.of(sx, sy).map(Object::toString).collect(Collectors.joining(&quot;, &quot;)));\r\n    }\r\n\r\n","title":"How to iterate over a method parameters in an eclipse template?","body":"<p>Best I could do with only Eclipse templates is this:</p>\n<pre><code>System.out.println(&quot;[FINE] ${enclosing_type}.${enclosing_method}(${enclosing_method_arguments}) = &quot; + Stream.of(${enclosing_method_arguments}).map(Object::toString).collect(Collectors.joining(&quot;, &quot;)));\n</code></pre>\n<p>This creates something like:</p>\n<pre><code>private void updateRenderScales(double sx, double sy) {\n    System.out.println(&quot;[FINE] Window.updateRenderScales(sx, sy) = &quot; + Stream.of(sx, sy).map(Object::toString).collect(Collectors.joining(&quot;, &quot;)));\n}\n</code></pre>\n"}],"owner":{"account_id":4425243,"reputation":798,"user_id":3603889,"accept_rate":53,"display_name":"chrisblo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":36402236,"answer_count":3,"score":0,"last_activity_date":1690529944,"creation_date":1459767058,"question_id":36400614,"body_markdown":"I want to create a template in Eclipse for printing a log starting from the method signature in the following way:\r\n\r\n    \r\n\r\n        void myMethod(Type1 param1, Type2 param2){\r\n            \r\n             logger.info(&quot;myMethod() - [param1: &quot; + param1 + &quot;, param2: &quot; + param2 + &quot;]&quot;);\r\n            \r\n        }\r\n\r\nI tried to use the `${enclosing_method_arguments}` variable, but I cannot find yet a solution.","title":"How to iterate over a method parameters in an eclipse template?","body":"<p>I want to create a template in Eclipse for printing a log starting from the method signature in the following way:</p>\n\n<pre><code>    void myMethod(Type1 param1, Type2 param2){\n\n         logger.info(\"myMethod() - [param1: \" + param1 + \", param2: \" + param2 + \"]\");\n\n    }\n</code></pre>\n\n<p>I tried to use the <code>${enclosing_method_arguments}</code> variable, but I cannot find yet a solution.</p>\n"},{"tags":["java","jdbc","cnosdb"],"comments":[{"owner":{"account_id":27971562,"reputation":129,"user_id":21361176,"display_name":"cosmic"},"score":0,"creation_date":1688699294,"post_id":76633587,"comment_id":135111940,"body_markdown":"Please see https://stackoverflow.com/questions/17408769/how-do-i-resolve-classnotfoundexception","body":"Please see <a href=\"https://stackoverflow.com/questions/17408769/how-do-i-resolve-classnotfoundexception\" title=\"how do i resolve classnotfoundexception\">stackoverflow.com/questions/17408769/&hellip;</a>"}],"owner":{"account_id":18058869,"reputation":196,"user_id":13126484,"display_name":"ZuoTiJia"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690529311,"creation_date":1688696795,"question_id":76633587,"body_markdown":"I use JDBC to connect to CnosDB according to the official website [documentation](https://docs.cnosdb.com/en/latest/reference/connector/arrow_flight_sql.html).\r\n\r\n\r\nIt seems that I can&#39;t compile the project.\r\n\r\nHere is my project structure:\r\n```\r\n├── pom.xml\r\n└── src\r\n    ├── main\r\n    │&#160;&#160; ├── java\r\n    │&#160;&#160; │&#160;&#160; └── org\r\n    │&#160;&#160; │&#160;&#160;     └── example\r\n    │&#160;&#160; │&#160;&#160;         └── Main.java\r\n    │&#160;&#160; └── resources\r\n    └── test\r\n        └── java\r\n```\r\n\r\npom.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;arrow-flight-jdbc&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.arrow/arrow-jdbc --&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.arrow&lt;/groupId&gt;\r\n            &lt;artifactId&gt;arrow-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;11.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.arrow/flight-sql-jdbc-driver --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.arrow&lt;/groupId&gt;\r\n            &lt;artifactId&gt;flight-sql-jdbc-driver&lt;/artifactId&gt;\r\n            &lt;version&gt;11.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nMain.java\r\n\r\n```java\r\npackage org.example;\r\n\r\nimport java.sql.*;\r\nimport java.util.Properties;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        final Properties properties = new Properties();\r\n        properties.put(&quot;user&quot;, &quot;root&quot;);\r\n        properties.put(&quot;password&quot;, &quot;&quot;);\r\n        properties.put(&quot;tenant&quot;, &quot;cnosdb&quot;);\r\n        properties.put(&quot;useEncryption&quot;, false);\r\n        properties.put(&quot;database&quot;, &quot;public&quot;);\r\n        try (\r\n                Connection connection = DriverManager.getConnection(\r\n                &quot;jdbc:arrow-flight-sql://127.0.0.1:8904&quot;, properties\r\n                );\r\n                Statement statement = connection.createStatement())\r\n        {\r\n            statement.execute(&quot;CREATE TABLE IF NOT EXISTS air\\n&quot; +\r\n                    &quot;(\\n&quot; +\r\n                    &quot;    visibility  DOUBLE,\\n&quot; +\r\n                    &quot;    temperature DOUBLE,\\n&quot; +\r\n                    &quot;    pressure    DOUBLE,\\n&quot; +\r\n                    &quot;    TAGS(station)\\n&quot; +\r\n                    &quot;);&quot;);\r\n            statement.executeUpdate(&quot;INSERT INTO air (time, station, visibility, temperature, pressure) VALUES\\n&quot; +\r\n                    &quot;    (1666165200290401000, &#39;XiaoMaiDao&#39;, 56, 69, 77);&quot;);\r\n            ResultSet resultSet = statement.executeQuery(&quot;select * from air limit 1;&quot;);\r\n\r\n            while (resultSet.next()) {\r\n                Timestamp column1 = resultSet.getTimestamp(1);\r\n                String column2 = resultSet.getString(2);\r\n                Double column3 = resultSet.getDouble(3);\r\n                Double column4 = resultSet.getDouble(4);\r\n                Double column5 = resultSet.getDouble(5);\r\n                System.out.printf(&quot;%s %s %f %f %f\\n&quot;, column1, column2, column3, column4, column5);\r\n            }\r\n        } catch (SQLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nI try to run the following command\r\n```shell\r\n_JAVA_OPTIONS=&quot;--add-opens=java.base/java.nio=ALL-UNNAMED&quot; mvn exec:java -Dexec.mainClass=&quot;org.example.Main&quot;\r\n```\r\n\r\nBut throws the following error\r\n\r\n&gt; [WARNING]\r\n&gt; java.lang.ClassNotFoundException: org.example.Main\r\n    at org.codehaus.mojo.exec.URLClassLoaderBuilder$ExecJavaClassLoader.loadClass (URLClassLoaderBuilder.java:198)\r\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:521)\r\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:271)\r\n    at java.lang.Thread.run (Thread.java:1623)\r\n&gt; [INFO] ------------------------------------------------------------------------\r\n&gt; [INFO] BUILD FAILURE\r\n&gt; [INFO] ------------------------------------------------------------------------\r\n&gt; [INFO] Total time:  0.557 s\r\n&gt; [INFO] Finished at: 2023-07-07T10:08:51+08:00\r\n&gt; [INFO] ------------------------------------------------------------------------\r\n&gt; [ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:3.1.0:java (default-cli) on project arrow-flight-jdbc: An exception occurred while executing the Java class. org.example.Main -&gt; [Help 1]\r\n&gt; [ERROR]\r\n&gt; [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n&gt; [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n&gt; [ERROR]\r\n&gt; [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n&gt; [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n\r\n\r\nHow can I connect to CnosDB?","title":"How to use JDBC to connect to CnosDB","body":"<p>I use JDBC to connect to CnosDB according to the official website <a href=\"https://docs.cnosdb.com/en/latest/reference/connector/arrow_flight_sql.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>It seems that I can't compile the project.</p>\n<p>Here is my project structure:</p>\n<pre><code>├── pom.xml\n└── src\n    ├── main\n    │   ├── java\n    │   │   └── org\n    │   │       └── example\n    │   │           └── Main.java\n    │   └── resources\n    └── test\n        └── java\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;arrow-flight-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.arrow/arrow-jdbc --&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.arrow&lt;/groupId&gt;\n            &lt;artifactId&gt;arrow-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;11.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.arrow/flight-sql-jdbc-driver --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.arrow&lt;/groupId&gt;\n            &lt;artifactId&gt;flight-sql-jdbc-driver&lt;/artifactId&gt;\n            &lt;version&gt;11.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Main.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example;\n\nimport java.sql.*;\nimport java.util.Properties;\n\npublic class Main {\n    public static void main(String[] args) {\n        final Properties properties = new Properties();\n        properties.put(&quot;user&quot;, &quot;root&quot;);\n        properties.put(&quot;password&quot;, &quot;&quot;);\n        properties.put(&quot;tenant&quot;, &quot;cnosdb&quot;);\n        properties.put(&quot;useEncryption&quot;, false);\n        properties.put(&quot;database&quot;, &quot;public&quot;);\n        try (\n                Connection connection = DriverManager.getConnection(\n                &quot;jdbc:arrow-flight-sql://127.0.0.1:8904&quot;, properties\n                );\n                Statement statement = connection.createStatement())\n        {\n            statement.execute(&quot;CREATE TABLE IF NOT EXISTS air\\n&quot; +\n                    &quot;(\\n&quot; +\n                    &quot;    visibility  DOUBLE,\\n&quot; +\n                    &quot;    temperature DOUBLE,\\n&quot; +\n                    &quot;    pressure    DOUBLE,\\n&quot; +\n                    &quot;    TAGS(station)\\n&quot; +\n                    &quot;);&quot;);\n            statement.executeUpdate(&quot;INSERT INTO air (time, station, visibility, temperature, pressure) VALUES\\n&quot; +\n                    &quot;    (1666165200290401000, 'XiaoMaiDao', 56, 69, 77);&quot;);\n            ResultSet resultSet = statement.executeQuery(&quot;select * from air limit 1;&quot;);\n\n            while (resultSet.next()) {\n                Timestamp column1 = resultSet.getTimestamp(1);\n                String column2 = resultSet.getString(2);\n                Double column3 = resultSet.getDouble(3);\n                Double column4 = resultSet.getDouble(4);\n                Double column5 = resultSet.getDouble(5);\n                System.out.printf(&quot;%s %s %f %f %f\\n&quot;, column1, column2, column3, column4, column5);\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>I try to run the following command</p>\n<pre class=\"lang-bash prettyprint-override\"><code>_JAVA_OPTIONS=&quot;--add-opens=java.base/java.nio=ALL-UNNAMED&quot; mvn exec:java -Dexec.mainClass=&quot;org.example.Main&quot;\n</code></pre>\n<p>But throws the following error</p>\n<blockquote>\n<p>[WARNING]\njava.lang.ClassNotFoundException: org.example.Main\nat org.codehaus.mojo.exec.URLClassLoaderBuilder$ExecJavaClassLoader.loadClass (URLClassLoaderBuilder.java:198)\nat java.lang.ClassLoader.loadClass (ClassLoader.java:521)\nat org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:271)\nat java.lang.Thread.run (Thread.java:1623)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.557 s\n[INFO] Finished at: 2023-07-07T10:08:51+08:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:3.1.0:java (default-cli) on project arrow-flight-jdbc: An exception occurred while executing the Java class. org.example.Main -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] <a href=\"http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\" rel=\"nofollow noreferrer\">http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException</a></p>\n</blockquote>\n<p>How can I connect to CnosDB?</p>\n"},{"tags":["java","jdbc","cnosdb"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1690194908,"post_id":76753567,"comment_id":135314606,"body_markdown":"for all we know, the data was already in the db, and duplicates are not allowed","body":"for all we know, the data was already in the db, and duplicates are not allowed"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1690196006,"post_id":76753567,"comment_id":135314832,"body_markdown":"Do you have autocommit turned on? Are you sure?","body":"Do you have autocommit turned on? Are you sure?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1690196832,"post_id":76753567,"comment_id":135314980,"body_markdown":"Did you check a database driver version?","body":"Did you check a database driver version?"},{"owner":{"account_id":19518277,"reputation":143,"user_id":14280692,"display_name":"Baker X"},"score":0,"creation_date":1690263278,"post_id":76753567,"comment_id":135324864,"body_markdown":"@RomanC jdbc version: arrow-jdbc:10.0.1  flight-sql-jdbc-driver:10.0.1","body":"@RomanC jdbc version: arrow-jdbc:10.0.1  flight-sql-jdbc-driver:10.0.1"},{"owner":{"account_id":19518277,"reputation":143,"user_id":14280692,"display_name":"Baker X"},"score":0,"creation_date":1690263369,"post_id":76753567,"comment_id":135324880,"body_markdown":"@Stultuske before I insert data, the database was empty.","body":"@Stultuske before I insert data, the database was empty."},{"owner":{"account_id":19518277,"reputation":143,"user_id":14280692,"display_name":"Baker X"},"score":0,"creation_date":1690263536,"post_id":76753567,"comment_id":135324904,"body_markdown":"@ElliottFrisch autocommit was turned on by default, I never change it;","body":"@ElliottFrisch autocommit was turned on by default, I never change it;"}],"answers":[{"tags":[],"owner":{"account_id":18058869,"reputation":196,"user_id":13126484,"display_name":"ZuoTiJia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690266467,"creation_date":1690266467,"answer_id":76759965,"question_id":76753567,"body_markdown":"Currently cnosdb-flight-sql is not fully implemented.","title":"I write data to cnosdb through jdbc, and the data writing is successful, but the returned interface is not the number of rows but -1. What&#39;s going on?","body":"<p>Currently cnosdb-flight-sql is not fully implemented.</p>\n"}],"owner":{"account_id":19518277,"reputation":143,"user_id":14280692,"display_name":"Baker X"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76759965,"answer_count":1,"score":0,"last_activity_date":1690529261,"creation_date":1690194379,"question_id":76753567,"body_markdown":"I write data to cnosdb through jdbc, and the data writing is successful, but the returned interface is not the number of rows but -1. What&#39;s going on?My code as follow:\r\n\r\nstep:\r\n\r\n1. creat a database;\r\n\r\n   ```\r\n   boolean rs002 = stmt.execute(&quot;CREATE DATABASE tc_between WITH TTL &#39;100000d&#39;;&quot;);\r\n           assertFalse(rs002);\r\n   ```\r\n\r\n2. create table;\r\n\r\n   ```\r\n   boolean rs004 = stmt001.execute(&quot;CREATE TABLE IF NOT EXISTS m2(f0 BIGINT UNSIGNED, f1 BIGINT, TAGS(t0, t1));&quot;);\r\n           assertFalse(rs004);\r\n   ```\r\n\r\n3. insert data in tables;\r\n\r\n   ```\r\n   \r\n   \r\n           int rs005 = stmt001.executeUpdate(&quot;INSERT m2(TIME, t0, f0, t1, f1) VALUES(CAST (1672301798050000000 AS TIMESTAMP), &#39;Ig.UZ&#39;, 531136669299148225, &#39;nA4C3DH~B &#39;, 9223372036854775807),(CAST (1672301798060000000 AS TIMESTAMP), &#39;263356943&#39;, 1040920791041719924, &#39;&#39;, -9223372036854775807),(CAST (1672301798070000000 AS TIMESTAMP), &#39;1040920791041719924&#39;, 442061994865016078, &#39;gE1B7c.&#39;, 0);&quot;);\r\n           System.out.println(rs005);\r\n           int rs006 = stmt001.executeUpdate(&quot;INSERT m2(TIME, t0, f0, t1, f1) VALUES(CAST (3031647407609562138 AS TIMESTAMP), &#39;1D75h&#39;, 4166390262642105876, &#39;7ua&#39;, 0.0),(CAST (1079616064603730664 AS TIMESTAMP), &#39;}&#39;, 7806435932478031652, &#39;EA26qy&#39;, 23.456), (CAST (263356943 AS TIMESTAMP), &#39;0.6287658423307444&#39;, 5466573340614276155, &#39;,JC51Fh&#39;, -23.456), (CAST (1742494251700243812 AS TIMESTAMP), &#39;#f^uE1B7KruC7BFz&#39;, 196790207, &#39;aF&#39;, 0.123);&quot;);\r\n           assertEquals(4, rs006);\r\n           int rs007 = stmt001.executeUpdate(&quot;INSERT m2(TIME, t0, f0, t1, f1) VALUES(CAST (3584132160280509277 AS TIMESTAMP), &#39;&#39;, 4132058214182166915, &#39;V*1lE/&#39;, -0.123);&quot;);\r\n           assertEquals(1, rs007);\r\n           ResultSet rs008 = stmt001.executeQuery(&quot;SELECT m2.f0 FROM m2 WHERE CAST(0 AS STRING) BETWEEN (CAST( starts_with(m2.t0, m2.t1) AS STRING)) AND (m2.t1);&quot;);\r\n           rs008.next();\r\n           System.out.println(rs008.getString(1));\r\n           stmt001.close();\r\n           conn001.close();\r\n   ```\r\n\r\nthe logs as follow:\r\n\r\n```\r\n[ERROR]   AppTest.test_Jdbc_betweensql:66 expected:&lt;4&gt; but was:&lt;-1&gt;\r\n```\r\n\r\nand then check the cnosdb info, as follow:\r\n\r\n```\r\nlog 2\r\n```\r\n\r\n```\r\ntc_between ❯ select * from m2;\r\n+-------------------------------+---------------------+------------+---------------------+----------------------+\r\n\r\n| time                          | t0                  | t1         | f0                  | f1                   |\r\n+-------------------------------+---------------------+------------+---------------------+----------------------+\r\n| 2025-03-20T18:10:51.700243812 | #f^uE1B7KruC7BFz    | aF         | 196790207           | 0                    |\r\n| 2004-03-18T13:21:04.603730664 | }                   | EA26qy     | 7806435932478031652 | 23                   |\r\n| 2066-01-25T12:16:47.609562138 | 1D75h               | 7ua        | 4166390262642105876 | 0                    |\r\n| 2022-12-29T08:16:38.070       | 1040920791041719924 | gE1B7c.    | 442061994865016078  | 0                    |\r\n| 1970-01-01T00:00:00.263356943 | 0.6287658423307444  | ,JC51Fh    | 5466573340614276155 | -23                  |\r\n| 2022-12-29T08:16:38.050       | Ig.UZ               | nA4C3DH~B  | 531136669299148225  | 9223372036854775807  |\r\n| 2022-12-29T08:16:38.060       | 263356943           |            | 1040920791041719924 | -9223372036854775807 |\r\n+-------------------------------+---------------------+------------+---------------------+----------------------+\r\nQuery took 0.100 seconds.\r\n```","title":"I write data to cnosdb through jdbc, and the data writing is successful, but the returned interface is not the number of rows but -1. What&#39;s going on?","body":"<p>I write data to cnosdb through jdbc, and the data writing is successful, but the returned interface is not the number of rows but -1. What's going on?My code as follow:</p>\n<p>step:</p>\n<ol>\n<li><p>creat a database;</p>\n<pre><code>boolean rs002 = stmt.execute(&quot;CREATE DATABASE tc_between WITH TTL '100000d';&quot;);\n        assertFalse(rs002);\n</code></pre>\n</li>\n<li><p>create table;</p>\n<pre><code>boolean rs004 = stmt001.execute(&quot;CREATE TABLE IF NOT EXISTS m2(f0 BIGINT UNSIGNED, f1 BIGINT, TAGS(t0, t1));&quot;);\n        assertFalse(rs004);\n</code></pre>\n</li>\n<li><p>insert data in tables;</p>\n<pre><code>\n\n        int rs005 = stmt001.executeUpdate(&quot;INSERT m2(TIME, t0, f0, t1, f1) VALUES(CAST (1672301798050000000 AS TIMESTAMP), 'Ig.UZ', 531136669299148225, 'nA4C3DH~B ', 9223372036854775807),(CAST (1672301798060000000 AS TIMESTAMP), '263356943', 1040920791041719924, '', -9223372036854775807),(CAST (1672301798070000000 AS TIMESTAMP), '1040920791041719924', 442061994865016078, 'gE1B7c.', 0);&quot;);\n        System.out.println(rs005);\n        int rs006 = stmt001.executeUpdate(&quot;INSERT m2(TIME, t0, f0, t1, f1) VALUES(CAST (3031647407609562138 AS TIMESTAMP), '1D75h', 4166390262642105876, '7ua', 0.0),(CAST (1079616064603730664 AS TIMESTAMP), '}', 7806435932478031652, 'EA26qy', 23.456), (CAST (263356943 AS TIMESTAMP), '0.6287658423307444', 5466573340614276155, ',JC51Fh', -23.456), (CAST (1742494251700243812 AS TIMESTAMP), '#f^uE1B7KruC7BFz', 196790207, 'aF', 0.123);&quot;);\n        assertEquals(4, rs006);\n        int rs007 = stmt001.executeUpdate(&quot;INSERT m2(TIME, t0, f0, t1, f1) VALUES(CAST (3584132160280509277 AS TIMESTAMP), '', 4132058214182166915, 'V*1lE/', -0.123);&quot;);\n        assertEquals(1, rs007);\n        ResultSet rs008 = stmt001.executeQuery(&quot;SELECT m2.f0 FROM m2 WHERE CAST(0 AS STRING) BETWEEN (CAST( starts_with(m2.t0, m2.t1) AS STRING)) AND (m2.t1);&quot;);\n        rs008.next();\n        System.out.println(rs008.getString(1));\n        stmt001.close();\n        conn001.close();\n</code></pre>\n</li>\n</ol>\n<p>the logs as follow:</p>\n<pre><code>[ERROR]   AppTest.test_Jdbc_betweensql:66 expected:&lt;4&gt; but was:&lt;-1&gt;\n</code></pre>\n<p>and then check the cnosdb info, as follow:</p>\n<pre><code>log 2\n</code></pre>\n<pre><code>tc_between ❯ select * from m2;\n+-------------------------------+---------------------+------------+---------------------+----------------------+\n\n| time                          | t0                  | t1         | f0                  | f1                   |\n+-------------------------------+---------------------+------------+---------------------+----------------------+\n| 2025-03-20T18:10:51.700243812 | #f^uE1B7KruC7BFz    | aF         | 196790207           | 0                    |\n| 2004-03-18T13:21:04.603730664 | }                   | EA26qy     | 7806435932478031652 | 23                   |\n| 2066-01-25T12:16:47.609562138 | 1D75h               | 7ua        | 4166390262642105876 | 0                    |\n| 2022-12-29T08:16:38.070       | 1040920791041719924 | gE1B7c.    | 442061994865016078  | 0                    |\n| 1970-01-01T00:00:00.263356943 | 0.6287658423307444  | ,JC51Fh    | 5466573340614276155 | -23                  |\n| 2022-12-29T08:16:38.050       | Ig.UZ               | nA4C3DH~B  | 531136669299148225  | 9223372036854775807  |\n| 2022-12-29T08:16:38.060       | 263356943           |            | 1040920791041719924 | -9223372036854775807 |\n+-------------------------------+---------------------+------------+---------------------+----------------------+\nQuery took 0.100 seconds.\n</code></pre>\n"},{"tags":["java","java-money","joda-money","joda-convert"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1690529195,"post_id":76785607,"comment_id":135369305,"body_markdown":"What is wrong with [getAmountMinor](https://www.joda.org/joda-money/apidocs/org.joda.money/org/joda/money/Money.html#getAmountMinor())?","body":"What is wrong with <a href=\"https://www.joda.org/joda-money/apidocs/org.joda.money/org/joda/money/Money.html#getAmountMinor()\" rel=\"nofollow noreferrer\">getAmountMinor</a>?"},{"owner":{"account_id":19934545,"reputation":554,"user_id":14607529,"display_name":"ODDminus1"},"score":1,"creation_date":1690529388,"post_id":76785607,"comment_id":135369351,"body_markdown":"`.getAmountMinorInt()` seems to be what you are looking for. The method returns the minor units of the currency. For USD, that is pennies.","body":"<code>.getAmountMinorInt()</code> seems to be what you are looking for. The method returns the minor units of the currency. For USD, that is pennies."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1690529464,"post_id":76785607,"comment_id":135369359,"body_markdown":"`...and it&#39;s returning with multiplies of 100.` Maybe you should include an example and how the input is incorrect. The getAmountMinor methods seem to be exactly what you&#39;re looking for.","body":"<code>...and it&#39;s returning with multiplies of 100.</code> Maybe you should include an example and how the input is incorrect. The getAmountMinor methods seem to be exactly what you&#39;re looking for."}],"owner":{"account_id":6364484,"reputation":534,"user_id":4938849,"display_name":"Remo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690528890,"creation_date":1690528890,"question_id":76785607,"body_markdown":"I want to convert Joda.Money to pennies. Is there any Joda library method available?\r\n\r\nSample input:\r\n\r\n&gt; USD 233.33\r\n\r\nSample output:\r\n\r\n&gt; 23333\r\n\r\n\r\nTried below 2 options:\r\n\r\n1. tried with ```Money.getAmountMinorInt()``` and it&#39;s returning with multiplies of 100.\r\n2. getAmount * 100\r\n\r\nnot sure using `getAmountMinorInt` is correct.\r\n\r\nWhich way of converting is correct or any other library method available to convert it?","title":"Is any Joda library method is there to convert Joda.Money to Pennies?","body":"<p>I want to convert Joda.Money to pennies. Is there any Joda library method available?</p>\n<p>Sample input:</p>\n<blockquote>\n<p>USD 233.33</p>\n</blockquote>\n<p>Sample output:</p>\n<blockquote>\n<p>23333</p>\n</blockquote>\n<p>Tried below 2 options:</p>\n<ol>\n<li>tried with <code>Money.getAmountMinorInt()</code> and it's returning with multiplies of 100.</li>\n<li>getAmount * 100</li>\n</ol>\n<p>not sure using <code>getAmountMinorInt</code> is correct.</p>\n<p>Which way of converting is correct or any other library method available to convert it?</p>\n"},{"tags":["java","spring","jsp","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1542975510,"post_id":48277952,"comment_id":93765982,"body_markdown":"Don&#39;t use JSP files with Spring Boot or embedded containers. Use something like Thymeleaf instead. Why? JSP has severe limitations when using with embedded containers.","body":"Don&#39;t use JSP files with Spring Boot or embedded containers. Use something like Thymeleaf instead. Why? JSP has severe limitations when using with embedded containers."}],"answers":[{"tags":[],"owner":{"account_id":4672191,"reputation":641,"user_id":3783718,"display_name":"craigwor"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1516095165,"creation_date":1516095165,"answer_id":48278027,"question_id":48277952,"body_markdown":"Usually the web files will go into the resources folder with spring boot.\r\nhttps://spring.io/guides/gs/serving-web-content/","title":"WEB-INF folder is not creating in Spring Boot application?","body":"<p>Usually the web files will go into the resources folder with spring boot.\n<a href=\"https://spring.io/guides/gs/serving-web-content/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/serving-web-content/</a></p>\n"},{"tags":[],"owner":{"account_id":3403498,"reputation":113,"user_id":2855154,"display_name":"arc"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1548025667,"creation_date":1548025667,"answer_id":54281818,"question_id":48277952,"body_markdown":"Dumping the jsp files in `src/main/webapp` folder worked for me, both with or without WEB-INF. I followed the exact project structure mentioned in \r\n\r\n 1. [mkyong.com](http://www.mkyong.com/spring-boot/spring-boot-hello-world-example-jsp/)\r\n 2. [springboottutorial](http://www.springboottutorial.com/creating-web-application-with-spring-boot)","title":"WEB-INF folder is not creating in Spring Boot application?","body":"<p>Dumping the jsp files in <code>src/main/webapp</code> folder worked for me, both with or without WEB-INF. I followed the exact project structure mentioned in </p>\n\n<ol>\n<li><a href=\"http://www.mkyong.com/spring-boot/spring-boot-hello-world-example-jsp/\" rel=\"nofollow noreferrer\">mkyong.com</a></li>\n<li><a href=\"http://www.springboottutorial.com/creating-web-application-with-spring-boot\" rel=\"nofollow noreferrer\">springboottutorial</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8523194,"reputation":1574,"user_id":6389337,"display_name":"sapan prajapati"},"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1690528747,"creation_date":1551017514,"answer_id":54852729,"question_id":48277952,"body_markdown":"We need to create the WEB-INF folder manually in spring boot application. Follow these steps:\r\n  \r\n1. Select main folder as highlighted below.  \r\n    \r\n   [![enter image description here][1]][1]   \r\n2. Right click and create a folder with name **webapp**.   \r\n3. Now right click on **webapp** folder and create **WEB-INF** folder.  \r\n4. Now similarly create a **view** folder (or any other name you like) inside WEB-INF folder to keep all the JSPs.  \r\n5. Below should be the folder structure after doing above steps.  \r\n     \r\n   [![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dozlz.png\r\n  [2]: https://i.stack.imgur.com/Sy1xT.png","title":"WEB-INF folder is not creating in Spring Boot application?","body":"<p>We need to create the WEB-INF folder manually in spring boot application. Follow these steps:</p>\n<ol>\n<li><p>Select main folder as highlighted below.</p>\n<p><a href=\"https://i.stack.imgur.com/dozlz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dozlz.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>Right click and create a folder with name <strong>webapp</strong>.</p>\n</li>\n<li><p>Now right click on <strong>webapp</strong> folder and create <strong>WEB-INF</strong> folder.</p>\n</li>\n<li><p>Now similarly create a <strong>view</strong> folder (or any other name you like) inside WEB-INF folder to keep all the JSPs.</p>\n</li>\n<li><p>Below should be the folder structure after doing above steps.</p>\n<p><a href=\"https://i.stack.imgur.com/Sy1xT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sy1xT.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4969363,"reputation":21,"user_id":3997694,"display_name":"user3997694"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1579203316,"creation_date":1579199320,"answer_id":59775759,"question_id":48277952,"body_markdown":"I had the same problem. To solve this, You need to change in your **pom.xml** from **jar** to **war**, and do the following...\r\n```bash\r\ncd &quot;my_project&quot;\r\nmvn clean package\r\njava -jar my_project.war\r\n```\r\nAnd everything workout.\r\n","title":"WEB-INF folder is not creating in Spring Boot application?","body":"<p>I had the same problem. To solve this, You need to change in your <strong>pom.xml</strong> from <strong>jar</strong> to <strong>war</strong>, and do the following...</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>cd \"my_project\"\nmvn clean package\njava -jar my_project.war\n</code></pre>\n\n<p>And everything workout.</p>\n"},{"tags":[],"owner":{"account_id":8929078,"reputation":11,"user_id":6662297,"display_name":"Bhumit Thakkar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589242842,"creation_date":1589242842,"answer_id":61741646,"question_id":48277952,"body_markdown":"**Inside:**          src/main/resources/application.properties\r\n\r\n**Add this line:**   spring.mvc.view.prefix = /WEB-INF/view/\r\n\r\n**Knowledge Source** watch 5 minutes: [Video][1] Start at: 55:33\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=35EQXmHKZYs&amp;t=3333s","title":"WEB-INF folder is not creating in Spring Boot application?","body":"<p><strong>Inside:</strong>          src/main/resources/application.properties</p>\n\n<p><strong>Add this line:</strong>   spring.mvc.view.prefix = /WEB-INF/view/</p>\n\n<p><strong>Knowledge Source</strong> watch 5 minutes: <a href=\"https://www.youtube.com/watch?v=35EQXmHKZYs&amp;t=3333s\" rel=\"nofollow noreferrer\">Video</a> Start at: 55:33</p>\n"}],"owner":{"account_id":8510160,"reputation":590,"user_id":6380454,"display_name":"Rajanikanta Pradhan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46523,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":54852729,"answer_count":5,"score":18,"last_activity_date":1690528747,"creation_date":1516094965,"question_id":48277952,"body_markdown":"I am creating a Spring Boot application, using Spring Initializr, But the folder structure is bit different, there is no `WEB-INF` folder, so where I will put the JSP files, shall I create the `WEB-INF` folder manually? ","title":"WEB-INF folder is not creating in Spring Boot application?","body":"<p>I am creating a Spring Boot application, using Spring Initializr, But the folder structure is bit different, there is no <code>WEB-INF</code> folder, so where I will put the JSP files, shall I create the <code>WEB-INF</code> folder manually? </p>\n"},{"tags":["java","amazon-web-services","performance","jmeter","garbage-collection"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690526697,"post_id":76784145,"comment_id":135368863,"body_markdown":"What do you mean with resetting GC? Can you please share the output as text instead of using images?","body":"What do you mean with resetting GC? Can you please share the output as text instead of using images?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690527485,"post_id":76784145,"comment_id":135368987,"body_markdown":"If you&#39;re running on a recent Java version, you could try Shenandoah or ZGC if pauses are the problem. Note that this might come at the cost of a bit less throughput.","body":"If you&#39;re running on a recent Java version, you could try Shenandoah or ZGC if pauses are the problem. Note that this might come at the cost of a bit less throughput."}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690528682,"creation_date":1690528682,"answer_id":76785581,"question_id":76784145,"body_markdown":"I think 24 GB of heap is too much for 200 threads. And 6 GB of MaxMetaspaceSize is definitely too much.  \r\n\r\nAs per [Optimal Heap Size][1] chapter:\r\n\r\n&gt;&quot;If the occupancy of the Java heap is too high, garbage collection occurs frequently. If the occupancy is low, garbage collection is infrequent but lasts longer... Try to keep the memory occupancy of the Java heap between 40% and 70% of the Java heap size... The highest point of occupancy of the Java heap is preferably not above 70% of the maximum heap size, and the average occupancy is between 40% and 70% occupancy. If the occupancy goes over 70%, resize the Java heap.&quot;\r\n&gt;\r\n&gt;&quot;A correctly sized Java heap should always have a memory occupancy of between 40% and 70% of the maximum Java heap size. To ensure that the occupancy does not exceed 70%, set the maximum Java heap size to at least 43% larger than the Maximum occupancy value provided by GCMV. This setting then makes the Maximum value 70% of the Java heap and the average to be above 40% of the Java heap size.&quot;\r\n\r\nSo I would recommend reducing minimum heap size to default value of 1GB and do the same for the MaxMetaspaceSize and it should resolve your issue.\r\n\r\nIf the nature of your test assumes high heap usage and you cannot allocate less and still looking for the way of forcing the garbage collection it can be done using a suitable [JSR223 Test Element][2] and the following [Groovy code][3]:\r\n\r\n    System.gc()\r\n\r\nHowever get familiarized with [Guide to System.gc()][4] article beforehand.  \r\n\r\n\r\n  [1]: https://publib.boulder.ibm.com/httpserv/cookbook/Java.html#Java-Garbage_Collection-Optimal_Heap_Size\r\n  [2]: https://jmeter.apache.org/usermanual/best-practices.html#jsr223\r\n  [3]: https://www.blazemeter.com/blog/apache-groovy\r\n  [4]: https://www.baeldung.com/java-system-gc","title":"How to force reset the Garbage collection on Jmeter execution","body":"<p>I think 24 GB of heap is too much for 200 threads. And 6 GB of MaxMetaspaceSize is definitely too much.</p>\n<p>As per <a href=\"https://publib.boulder.ibm.com/httpserv/cookbook/Java.html#Java-Garbage_Collection-Optimal_Heap_Size\" rel=\"nofollow noreferrer\">Optimal Heap Size</a> chapter:</p>\n<blockquote>\n<p>&quot;If the occupancy of the Java heap is too high, garbage collection occurs frequently. If the occupancy is low, garbage collection is infrequent but lasts longer... Try to keep the memory occupancy of the Java heap between 40% and 70% of the Java heap size... The highest point of occupancy of the Java heap is preferably not above 70% of the maximum heap size, and the average occupancy is between 40% and 70% occupancy. If the occupancy goes over 70%, resize the Java heap.&quot;</p>\n<p>&quot;A correctly sized Java heap should always have a memory occupancy of between 40% and 70% of the maximum Java heap size. To ensure that the occupancy does not exceed 70%, set the maximum Java heap size to at least 43% larger than the Maximum occupancy value provided by GCMV. This setting then makes the Maximum value 70% of the Java heap and the average to be above 40% of the Java heap size.&quot;</p>\n</blockquote>\n<p>So I would recommend reducing minimum heap size to default value of 1GB and do the same for the MaxMetaspaceSize and it should resolve your issue.</p>\n<p>If the nature of your test assumes high heap usage and you cannot allocate less and still looking for the way of forcing the garbage collection it can be done using a suitable <a href=\"https://jmeter.apache.org/usermanual/best-practices.html#jsr223\" rel=\"nofollow noreferrer\">JSR223 Test Element</a> and the following <a href=\"https://www.blazemeter.com/blog/apache-groovy\" rel=\"nofollow noreferrer\">Groovy code</a>:</p>\n<pre><code>System.gc()\n</code></pre>\n<p>However get familiarized with <a href=\"https://www.baeldung.com/java-system-gc\" rel=\"nofollow noreferrer\">Guide to System.gc()</a> article beforehand.</p>\n"}],"owner":{"account_id":26449163,"reputation":125,"user_id":20092606,"display_name":"Harris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76785581,"answer_count":1,"score":0,"last_activity_date":1690528682,"creation_date":1690503251,"question_id":76784145,"body_markdown":"Currently I have 6000 request per minute using 200 thread setup on my Jmeter configuration, first few hours everything looks good until it starts to drop the # of request and I noticed the memory/garbage collection start to pileup or reach to limit I set which is 24GB. is there&#39;s a way I could force reset the garbage collection so my request will be back at 6000 request per minute? This is hosted on AWS Cloud and I&#39;m running my performance test. Your response is highly appreciated. Thank you.\r\n\r\n\r\nI tried to run this command\r\n\r\n-jmap -histo:live 13510 \r\n\r\n-jcmd 13510 GC.run \r\n\r\nbut it seems the number of my request on Jmeter is not reverted back to 6000.\r\n\r\n\r\nExpected Result: I want my Jmeter request to revert back to 6000 request per minute. \r\n\r\nScreenshot:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![Jmeter configuration on AWS][2]][2]\r\n\r\n\r\n\r\n[![Memory Allocation Screenshot][3]][3]\r\n\r\n\r\n[![Free Memory][4]][4]\r\n\r\n\r\n[![Request Generated][5]][5]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SYWIk.png\r\n  [2]: https://i.stack.imgur.com/Hps31.png\r\n  [3]: https://i.stack.imgur.com/EvMJF.png\r\n  [4]: https://i.stack.imgur.com/r0XId.png\r\n  [5]: https://i.stack.imgur.com/BddII.png","title":"How to force reset the Garbage collection on Jmeter execution","body":"<p>Currently I have 6000 request per minute using 200 thread setup on my Jmeter configuration, first few hours everything looks good until it starts to drop the # of request and I noticed the memory/garbage collection start to pileup or reach to limit I set which is 24GB. is there's a way I could force reset the garbage collection so my request will be back at 6000 request per minute? This is hosted on AWS Cloud and I'm running my performance test. Your response is highly appreciated. Thank you.</p>\n<p>I tried to run this command</p>\n<p>-jmap -histo:live 13510</p>\n<p>-jcmd 13510 GC.run</p>\n<p>but it seems the number of my request on Jmeter is not reverted back to 6000.</p>\n<p>Expected Result: I want my Jmeter request to revert back to 6000 request per minute.</p>\n<p>Screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/SYWIk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SYWIk.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Hps31.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hps31.png\" alt=\"Jmeter configuration on AWS\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/EvMJF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EvMJF.png\" alt=\"Memory Allocation Screenshot\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/r0XId.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r0XId.png\" alt=\"Free Memory\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/BddII.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BddII.png\" alt=\"Request Generated\" /></a></p>\n"},{"tags":["java","spring-boot","spring-batch"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690484218,"post_id":76782384,"comment_id":135364100,"body_markdown":"You are already injecting the reader into the method that procudes the stepp.. Why call `reader(null)` then? Just use the passed in argument. Another thing is don&#39;t catch the exceptions in the `@Bean` method and don&#39;t call `afterPropertiesSet` those are framework callbacks and hinder proper container management and might even hide a problem you actually have. Finally change the return type from `ItemReader&lt;Contact&gt;` to `BeanIOFlatFileItemReader&lt;Contact&gt;` (you want to do tha tfor the writer as well) be as specific as you can so all callbacks etc. can be detected.","body":"You are already injecting the reader into the method that procudes the stepp.. Why call <code>reader(null)</code> then? Just use the passed in argument. Another thing is don&#39;t catch the exceptions in the <code>@Bean</code> method and don&#39;t call <code>afterPropertiesSet</code> those are framework callbacks and hinder proper container management and might even hide a problem you actually have. Finally change the return type from <code>ItemReader&lt;Contact&gt;</code> to <code>BeanIOFlatFileItemReader&lt;Contact&gt;</code> (you want to do tha tfor the writer as well) be as specific as you can so all callbacks etc. can be detected."},{"owner":{"account_id":427236,"reputation":2707,"user_id":808891,"accept_rate":97,"display_name":"Somebody"},"score":0,"creation_date":1690487070,"post_id":76782384,"comment_id":135364602,"body_markdown":"@M.Deinum changing the return type from `ItemReader&lt;Contact&gt;` to `BeanIOFlatFileItemReader&lt;Contact&gt;` did the trick. I&#39;ve also implemented your other suggestions :) Please post an answer to give you the credit.","body":"@M.Deinum changing the return type from <code>ItemReader&lt;Contact&gt;</code> to <code>BeanIOFlatFileItemReader&lt;Contact&gt;</code> did the trick. I&#39;ve also implemented your other suggestions :) Please post an answer to give you the credit."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690528559,"creation_date":1690528559,"answer_id":76785573,"question_id":76782384,"body_markdown":"When using `@Configuration` classes the best thing to do for `@Bean` methods is to be as specific as possible about the type. As this type information is used at load time to determine what callbacks to do or what proxy to create. \r\n\r\nWhen you are adding an `@StepScope` what happens is that a lazy proxy is created for the argument type of the method. In your case that is an `ItemReader&lt;Contact&gt;`. If you check the [javadoc of the `FlatFileItemReader`][1] you see that it implements more interfaces. Those interfaces are needed by Spring Batch to do the appropriate callbacks to initialize the reader. However if it is an `ItemReader` those callbacks aren&#39;t there. \r\n\r\n```java\r\n@Bean\r\n@StepScope\r\npublic BeanIOFlatFileItemReader&lt;Contact&gt; reader(@Value(&quot;#{jobParameters[&#39;fileName&#39;]}&quot;) String fileName) {             \r\n    BeanIOFlatFileItemReader&lt;Contact&gt; reader = new BeanIOFlatFileItemReader&lt;&gt;();\r\n    reader.setUseSpringExceptions(true);\r\n    reader.setResource(new FileSystemResource(fileName));\r\n    reader.setStreamName(inputContactStreamName);\r\n    reader.setStreamMapping(new ClassPathResource(beanIoConfigurationXmlPath));\r\n    reader.setStreamFactory(StreamFactory.newInstance());\r\n    reader.getLineNumber();\r\n    return reader;          \r\n}\r\n```\r\n\r\nWith this the proper proxy will be created and all the callbacks will be effective. \r\n\r\nIn your configuration you are already injecting the `ItemReader` as an argument use that instead of calling `reader(null)`. \r\n\r\n```java\r\n@Bean\r\npublic Step step(BeanIOFlatFileItemReader&lt;Contact&gt; reader) {      \r\n    return stepBuilderFactory.get(&quot;step&quot;)\r\n      .&lt;Contact, Contact&gt; chunk(10)\r\n      .reader(reader)          \r\n      .processor(contactItemProcessor)\r\n      .writer(writer())          \r\n      .build();\r\n}\r\n```\r\n\r\n[1]: https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/item/file/FlatFileItemReader.html\r\n","title":"ItemWriter not producing output when having a StepScope annotation to access parameter in ItemReader in Spring Batch","body":"<p>When using <code>@Configuration</code> classes the best thing to do for <code>@Bean</code> methods is to be as specific as possible about the type. As this type information is used at load time to determine what callbacks to do or what proxy to create.</p>\n<p>When you are adding an <code>@StepScope</code> what happens is that a lazy proxy is created for the argument type of the method. In your case that is an <code>ItemReader&lt;Contact&gt;</code>. If you check the <a href=\"https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/item/file/FlatFileItemReader.html\" rel=\"nofollow noreferrer\">javadoc of the <code>FlatFileItemReader</code></a> you see that it implements more interfaces. Those interfaces are needed by Spring Batch to do the appropriate callbacks to initialize the reader. However if it is an <code>ItemReader</code> those callbacks aren't there.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n@StepScope\npublic BeanIOFlatFileItemReader&lt;Contact&gt; reader(@Value(&quot;#{jobParameters['fileName']}&quot;) String fileName) {             \n    BeanIOFlatFileItemReader&lt;Contact&gt; reader = new BeanIOFlatFileItemReader&lt;&gt;();\n    reader.setUseSpringExceptions(true);\n    reader.setResource(new FileSystemResource(fileName));\n    reader.setStreamName(inputContactStreamName);\n    reader.setStreamMapping(new ClassPathResource(beanIoConfigurationXmlPath));\n    reader.setStreamFactory(StreamFactory.newInstance());\n    reader.getLineNumber();\n    return reader;          \n}\n</code></pre>\n<p>With this the proper proxy will be created and all the callbacks will be effective.</p>\n<p>In your configuration you are already injecting the <code>ItemReader</code> as an argument use that instead of calling <code>reader(null)</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic Step step(BeanIOFlatFileItemReader&lt;Contact&gt; reader) {      \n    return stepBuilderFactory.get(&quot;step&quot;)\n      .&lt;Contact, Contact&gt; chunk(10)\n      .reader(reader)          \n      .processor(contactItemProcessor)\n      .writer(writer())          \n      .build();\n}\n</code></pre>\n"}],"owner":{"account_id":427236,"reputation":2707,"user_id":808891,"accept_rate":97,"display_name":"Somebody"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76785573,"answer_count":1,"score":0,"last_activity_date":1690528559,"creation_date":1690481214,"question_id":76782384,"body_markdown":"I&#39;m using a spring boot with spring batch application to test passing a parameter to the `ItemReader` by using below code, but the content of `contact-out.dat` file (which is the output file) is empty when I use `StepScope` annotation. There&#39;s no error, it just doesn&#39;t produce any result:\r\n\r\n    @Bean\r\n    @StepScope\r\n    public ItemReader&lt;Contact&gt; reader(@Value(&quot;#{jobParameters[&#39;fileName&#39;]}&quot;) String fileName) {    \t    \t\r\n    \t\r\n    \tBeanIOFlatFileItemReader&lt;Contact&gt; reader = new BeanIOFlatFileItemReader&lt;&gt;();\r\n    \ttry {    \t\t\r\n    \t\treader.setUseSpringExceptions(true);\r\n    \t\treader.setResource(new FileSystemResource(fileName));\r\n    \t\treader.setStreamName(inputContactStreamName);\r\n    \t\treader.setStreamMapping(new ClassPathResource(beanIoConfigurationXmlPath));\r\n    \t\treader.setStreamFactory(StreamFactory.newInstance());\r\n    \t\treader.getLineNumber();\r\n    \t\treader.afterPropertiesSet();\r\n    \t} catch (Exception e) {\r\n    \t\tlog.error(&quot;ERROR: An issue occurred in the BeanIO Item Reader:: {} {}&quot;, e.getMessage(), e.getStackTrace());\r\n    \t}\r\n    \t\r\n    \treturn reader;    \t\r\n    \t\r\n    }    \r\n    \r\n    @Bean\r\n    public FlatFileItemWriter&lt;Contact&gt; writer() {\r\n    \t\r\n    \tFlatFileItemWriter&lt;Contact&gt; writer = new FlatFileItemWriter&lt;&gt;();\r\n    \twriter.setResource(new FileSystemResource(fileOutputContact));\r\n    \twriter.setLineAggregator(new DelimitedLineAggregator&lt;Contact&gt;() {\r\n    \t\t{\r\n    \t\t\tsetDelimiter(&quot;,&quot;);\r\n    \t\t\tsetFieldExtractor(new BeanWrapperFieldExtractor&lt;Contact&gt;() {\r\n    \t\t\t\t{\r\n    \t\t\t\t\tsetNames(new String[] { &quot;firstName&quot;, &quot;lastName&quot;, &quot;street&quot;, &quot;city&quot;, &quot;state&quot;, &quot;zip&quot; });\r\n    \t\t\t\t}    \t\t\t\t\r\n    \t\t\t});\r\n    \t\t}\r\n    \t});\r\n    \t\r\n    \treturn writer;\r\n    }\r\n    \t\r\n    @Bean(&quot;InputJob&quot;)\r\n    @Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)\r\n    public Job importUserJob(Step step) {\r\n    \treturn jobBuilderFactory.get(&quot;importUserJob&quot;)\r\n    \t  .incrementer(new RunIdIncrementer())          \r\n    \t  .flow(step)\r\n    \t  .end()\r\n    \t  .build();\r\n    }\r\n    \r\n    @Bean\r\n    public Step step(ItemReader&lt;Contact&gt; reader) {    \t\r\n    \treturn stepBuilderFactory.get(&quot;step&quot;)\r\n    \t  .&lt;Contact, Contact&gt; chunk(10)\r\n    \t  .reader(reader(null))          \r\n    \t  .processor(contactItemProcessor)\r\n    \t  .writer(writer())          \r\n    \t  .build();\r\n    }\r\n\r\nNow, if I remove the `StepScope` annotation and make below changes then `contact-out.dat` file has the expected content:\r\n\r\n    @Bean\r\n    //@StepScope\r\n    public ItemReader&lt;Contact&gt; reader(/*@Value(&quot;#{jobParameters[&#39;fileName&#39;]}&quot;) String fileName*/) {...}\r\n\r\n\r\n    @Bean\r\n    public Step step(ItemReader&lt;Contact&gt; reader) {    \t\r\n    \treturn stepBuilderFactory.get(&quot;step&quot;)\r\n    \t  .&lt;Contact, Contact&gt; chunk(10)\r\n    \t  .reader(reader(/*null*/))          \r\n    \t  .processor(contactItemProcessor)\r\n    \t  .writer(writer())          \r\n    \t  .build();\r\n    }\r\n\r\nWhat I&#39;m doing wrong here when using `StepScope` annotation that ouput file is always empty?","title":"ItemWriter not producing output when having a StepScope annotation to access parameter in ItemReader in Spring Batch","body":"<p>I'm using a spring boot with spring batch application to test passing a parameter to the <code>ItemReader</code> by using below code, but the content of <code>contact-out.dat</code> file (which is the output file) is empty when I use <code>StepScope</code> annotation. There's no error, it just doesn't produce any result:</p>\n<pre><code>@Bean\n@StepScope\npublic ItemReader&lt;Contact&gt; reader(@Value(&quot;#{jobParameters['fileName']}&quot;) String fileName) {             \n    \n    BeanIOFlatFileItemReader&lt;Contact&gt; reader = new BeanIOFlatFileItemReader&lt;&gt;();\n    try {           \n        reader.setUseSpringExceptions(true);\n        reader.setResource(new FileSystemResource(fileName));\n        reader.setStreamName(inputContactStreamName);\n        reader.setStreamMapping(new ClassPathResource(beanIoConfigurationXmlPath));\n        reader.setStreamFactory(StreamFactory.newInstance());\n        reader.getLineNumber();\n        reader.afterPropertiesSet();\n    } catch (Exception e) {\n        log.error(&quot;ERROR: An issue occurred in the BeanIO Item Reader:: {} {}&quot;, e.getMessage(), e.getStackTrace());\n    }\n    \n    return reader;      \n    \n}    \n\n@Bean\npublic FlatFileItemWriter&lt;Contact&gt; writer() {\n    \n    FlatFileItemWriter&lt;Contact&gt; writer = new FlatFileItemWriter&lt;&gt;();\n    writer.setResource(new FileSystemResource(fileOutputContact));\n    writer.setLineAggregator(new DelimitedLineAggregator&lt;Contact&gt;() {\n        {\n            setDelimiter(&quot;,&quot;);\n            setFieldExtractor(new BeanWrapperFieldExtractor&lt;Contact&gt;() {\n                {\n                    setNames(new String[] { &quot;firstName&quot;, &quot;lastName&quot;, &quot;street&quot;, &quot;city&quot;, &quot;state&quot;, &quot;zip&quot; });\n                }                   \n            });\n        }\n    });\n    \n    return writer;\n}\n    \n@Bean(&quot;InputJob&quot;)\n@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)\npublic Job importUserJob(Step step) {\n    return jobBuilderFactory.get(&quot;importUserJob&quot;)\n      .incrementer(new RunIdIncrementer())          \n      .flow(step)\n      .end()\n      .build();\n}\n\n@Bean\npublic Step step(ItemReader&lt;Contact&gt; reader) {      \n    return stepBuilderFactory.get(&quot;step&quot;)\n      .&lt;Contact, Contact&gt; chunk(10)\n      .reader(reader(null))          \n      .processor(contactItemProcessor)\n      .writer(writer())          \n      .build();\n}\n</code></pre>\n<p>Now, if I remove the <code>StepScope</code> annotation and make below changes then <code>contact-out.dat</code> file has the expected content:</p>\n<pre><code>@Bean\n//@StepScope\npublic ItemReader&lt;Contact&gt; reader(/*@Value(&quot;#{jobParameters['fileName']}&quot;) String fileName*/) {...}\n\n\n@Bean\npublic Step step(ItemReader&lt;Contact&gt; reader) {      \n    return stepBuilderFactory.get(&quot;step&quot;)\n      .&lt;Contact, Contact&gt; chunk(10)\n      .reader(reader(/*null*/))          \n      .processor(contactItemProcessor)\n      .writer(writer())          \n      .build();\n}\n</code></pre>\n<p>What I'm doing wrong here when using <code>StepScope</code> annotation that ouput file is always empty?</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","spring-transactions"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1648201229,"post_id":71614777,"comment_id":126569554,"body_markdown":"and you tried `@Transactional( transactionManager = &quot;yourtransactionName&quot;)` right?","body":"and you tried <code>@Transactional( transactionManager = &quot;yourtransactionName&quot;)</code> right?"},{"owner":{"account_id":14878075,"reputation":125,"user_id":10743594,"display_name":"java programming"},"score":0,"creation_date":1648202013,"post_id":71614777,"comment_id":126569829,"body_markdown":"@SMA yes, exactly but it is ignoring it and using always the second bean created.","body":"@SMA yes, exactly but it is ignoring it and using always the second bean created."},{"owner":{"account_id":231683,"reputation":4218,"user_id":496038,"display_name":"pringi"},"score":1,"creation_date":1648661928,"post_id":71614777,"comment_id":126683778,"body_markdown":"I think the problem is related with Spring Aspect that is &quot;triggered&quot; by the annotations. You define for each &quot;EntityManager&quot; the packages (or classes) that he &quot;owns&quot;. Since both of both EntityManagers refer to the same classes, when &quot;discovery&quot; kicks in, it will return only one of them. I think there is no solution for this problem. Why do you want 2 EntityManager that point to the same classes?","body":"I think the problem is related with Spring Aspect that is &quot;triggered&quot; by the annotations. You define for each &quot;EntityManager&quot; the packages (or classes) that he &quot;owns&quot;. Since both of both EntityManagers refer to the same classes, when &quot;discovery&quot; kicks in, it will return only one of them. I think there is no solution for this problem. Why do you want 2 EntityManager that point to the same classes?"}],"answers":[{"tags":[],"owner":{"account_id":20636918,"reputation":97,"user_id":15150382,"display_name":"kistlers"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1648644278,"creation_date":1648644278,"answer_id":71677487,"question_id":71614777,"body_markdown":"In our case, we also have two databases, both using JPA and repositories. However, they do use different repositories, but I think our approach should also work in your case. We define an `EntityManagerFactory` and a `TransactionManager` per database. I cannot confirm this works, but I believe it should.\r\n\r\nPrimary Datasource:\r\n\r\n```\r\n@Configuration\r\n@EnableTransactionManagement\r\n@EnableJpaRepositories(\r\n        basePackages = {&quot;ch.sac.data.primary.repository&quot;},\r\n        entityManagerFactoryRef = &quot;entityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;transactionManager&quot;)\r\npublic class ImporterPrimaryDataSourceConfiguration {\r\n\r\n    @Primary\r\n    @Bean(name = &quot;dataSourceProperties&quot;)\r\n    @ConfigurationProperties(&quot;spring.datasource&quot;)\r\n    public DataSourceProperties dataSourceProperties() {\r\n        return new DataSourceProperties();\r\n    }\r\n\r\n    @Primary\r\n    @Bean(name = &quot;primaryDataSource&quot;)\r\n    public DataSource dataSource(final DataSourceProperties dataSourceProperties) {\r\n        return dataSourceProperties\r\n                .initializeDataSourceBuilder()\r\n                .type(HikariDataSource.class)\r\n                .build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean\r\n    public Flyway primaryFlyway(\r\n            final DataSource dataSource,\r\n            @Value(&quot;${spring.flyway.locations}&quot;) final String[] flywayLocations,\r\n            @Value(&quot;${spring.flyway.validate-on-migrate:true}&quot;)\r\n                    final boolean flywayValidateOnMigrate) {\r\n        final var flyway =\r\n                Flyway.configure()\r\n                        .dataSource(dataSource)\r\n                        .locations(flywayLocations)\r\n                        .validateOnMigrate(flywayValidateOnMigrate)\r\n                        .load();\r\n        flyway.migrate();\r\n        return flyway;\r\n    }\r\n\r\n    @Primary\r\n    @Bean\r\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(\r\n            final EntityManagerFactoryBuilder entityManagerFactoryBuilder,\r\n            final DataSource dataSource) {\r\n\r\n        final var jpaProperties =\r\n                Map.ofEntries(\r\n                        Map.entry(\r\n                                &quot;hibernate.dialect&quot;,\r\n                                &quot;org.hibernate.spatial.dialect.postgis.PostgisDialect&quot;));\r\n\r\n        return entityManagerFactoryBuilder\r\n                .dataSource(dataSource)\r\n                .packages(&quot;ch.sac.model.primary.entity&quot;)\r\n                .persistenceUnit(&quot;dataSource&quot;)\r\n                .properties(jpaProperties)\r\n                .build();\r\n    }\r\n\r\n    @Primary\r\n    @Bean\r\n    public PlatformTransactionManager transactionManager(\r\n            final EntityManagerFactory entityManagerFactory) {\r\n        return new JpaTransactionManager(entityManagerFactory);\r\n    }\r\n}\r\n```\r\n\r\nSecondary Datasource (SQLite Database, created in-memory, adjust to your use-case):\r\n\r\n```\r\n@Configuration\r\n@EnableJpaRepositories(\r\n        basePackages = {&quot;ch.sac.data.sqlite.repository&quot;},\r\n        entityManagerFactoryRef = &quot;sqliteEntityManagerFactory&quot;,\r\n        transactionManagerRef = &quot;sqliteTransactionManager&quot;)\r\npublic class ImporterSQLiteDataSourceConfiguration {\r\n\r\n    @Bean(name = &quot;sqliteDBFilePath&quot;)\r\n    public String sqliteDBFilePath() throws IOException {\r\n        return TempFileManager.createEmptyTempFile(&quot;metadata.sqlite&quot;).toString();\r\n    }\r\n\r\n    @Bean(name = &quot;sqliteDataSourceProperties&quot;)\r\n    public DataSourceProperties sqliteDataSourceProperties() {\r\n        return new DataSourceProperties();\r\n    }\r\n\r\n    @Bean(name = &quot;sqliteDataSource&quot;)\r\n    public DataSource sqliteDataSource(\r\n            @Qualifier(&quot;sqliteDataSourceProperties&quot;)\r\n                    final DataSourceProperties sqliteDataSourceProperties,\r\n            final String sqliteDBFilePath) {\r\n        return sqliteDataSourceProperties\r\n                .initializeDataSourceBuilder()\r\n                .driverClassName(&quot;org.sqlite.JDBC&quot;)\r\n                .url(&quot;jdbc:sqlite:&quot; + sqliteDBFilePath)\r\n                .type(HikariDataSource.class)\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public Flyway sqliteFlyway(\r\n            @Qualifier(&quot;sqliteDataSource&quot;) final DataSource sqliteDataSource,\r\n            @Value(&quot;${sqlite.flyway.locations}&quot;) final String[] flywayLocations) {\r\n        final var flyway =\r\n                Flyway.configure().dataSource(sqliteDataSource).locations(flywayLocations).load();\r\n        flyway.migrate();\r\n        return flyway;\r\n    }\r\n\r\n    @Bean(name = &quot;sqliteEntityManagerFactory&quot;)\r\n    public LocalContainerEntityManagerFactoryBean sqliteEntityManagerFactory(\r\n            final EntityManagerFactoryBuilder sqliteEntityManagerFactoryBuilder,\r\n            @Qualifier(&quot;sqliteDataSource&quot;) final DataSource sqliteDataSource) {\r\n\r\n        final var sqliteJpaProperties =\r\n                Map.ofEntries(\r\n                        Map.entry(\r\n                                &quot;hibernate.dialect&quot;, &quot;org.sqlite.hibernate.dialect.SQLiteDialect&quot;));\r\n\r\n        return sqliteEntityManagerFactoryBuilder\r\n                .dataSource(sqliteDataSource)\r\n                .packages(&quot;ch.sac.model.sqlite.entity&quot;)\r\n                .persistenceUnit(&quot;sqliteDataSource&quot;)\r\n                .properties(sqliteJpaProperties)\r\n                .build();\r\n    }\r\n\r\n    @Bean(name = &quot;sqliteTransactionManager&quot;)\r\n    public PlatformTransactionManager sqliteTransactionManager(\r\n            @Qualifier(&quot;sqliteEntityManagerFactory&quot;)\r\n                    final EntityManagerFactory sqliteEntityManagerFactory) {\r\n        return new JpaTransactionManager(sqliteEntityManagerFactory);\r\n    }\r\n}\r\n```\r\n","title":"Spring JPA – Multiple Databases with the same Repositories","body":"<p>In our case, we also have two databases, both using JPA and repositories. However, they do use different repositories, but I think our approach should also work in your case. We define an <code>EntityManagerFactory</code> and a <code>TransactionManager</code> per database. I cannot confirm this works, but I believe it should.</p>\n<p>Primary Datasource:</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(\n        basePackages = {&quot;ch.sac.data.primary.repository&quot;},\n        entityManagerFactoryRef = &quot;entityManagerFactory&quot;,\n        transactionManagerRef = &quot;transactionManager&quot;)\npublic class ImporterPrimaryDataSourceConfiguration {\n\n    @Primary\n    @Bean(name = &quot;dataSourceProperties&quot;)\n    @ConfigurationProperties(&quot;spring.datasource&quot;)\n    public DataSourceProperties dataSourceProperties() {\n        return new DataSourceProperties();\n    }\n\n    @Primary\n    @Bean(name = &quot;primaryDataSource&quot;)\n    public DataSource dataSource(final DataSourceProperties dataSourceProperties) {\n        return dataSourceProperties\n                .initializeDataSourceBuilder()\n                .type(HikariDataSource.class)\n                .build();\n    }\n\n    @Primary\n    @Bean\n    public Flyway primaryFlyway(\n            final DataSource dataSource,\n            @Value(&quot;${spring.flyway.locations}&quot;) final String[] flywayLocations,\n            @Value(&quot;${spring.flyway.validate-on-migrate:true}&quot;)\n                    final boolean flywayValidateOnMigrate) {\n        final var flyway =\n                Flyway.configure()\n                        .dataSource(dataSource)\n                        .locations(flywayLocations)\n                        .validateOnMigrate(flywayValidateOnMigrate)\n                        .load();\n        flyway.migrate();\n        return flyway;\n    }\n\n    @Primary\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(\n            final EntityManagerFactoryBuilder entityManagerFactoryBuilder,\n            final DataSource dataSource) {\n\n        final var jpaProperties =\n                Map.ofEntries(\n                        Map.entry(\n                                &quot;hibernate.dialect&quot;,\n                                &quot;org.hibernate.spatial.dialect.postgis.PostgisDialect&quot;));\n\n        return entityManagerFactoryBuilder\n                .dataSource(dataSource)\n                .packages(&quot;ch.sac.model.primary.entity&quot;)\n                .persistenceUnit(&quot;dataSource&quot;)\n                .properties(jpaProperties)\n                .build();\n    }\n\n    @Primary\n    @Bean\n    public PlatformTransactionManager transactionManager(\n            final EntityManagerFactory entityManagerFactory) {\n        return new JpaTransactionManager(entityManagerFactory);\n    }\n}\n</code></pre>\n<p>Secondary Datasource (SQLite Database, created in-memory, adjust to your use-case):</p>\n<pre><code>@Configuration\n@EnableJpaRepositories(\n        basePackages = {&quot;ch.sac.data.sqlite.repository&quot;},\n        entityManagerFactoryRef = &quot;sqliteEntityManagerFactory&quot;,\n        transactionManagerRef = &quot;sqliteTransactionManager&quot;)\npublic class ImporterSQLiteDataSourceConfiguration {\n\n    @Bean(name = &quot;sqliteDBFilePath&quot;)\n    public String sqliteDBFilePath() throws IOException {\n        return TempFileManager.createEmptyTempFile(&quot;metadata.sqlite&quot;).toString();\n    }\n\n    @Bean(name = &quot;sqliteDataSourceProperties&quot;)\n    public DataSourceProperties sqliteDataSourceProperties() {\n        return new DataSourceProperties();\n    }\n\n    @Bean(name = &quot;sqliteDataSource&quot;)\n    public DataSource sqliteDataSource(\n            @Qualifier(&quot;sqliteDataSourceProperties&quot;)\n                    final DataSourceProperties sqliteDataSourceProperties,\n            final String sqliteDBFilePath) {\n        return sqliteDataSourceProperties\n                .initializeDataSourceBuilder()\n                .driverClassName(&quot;org.sqlite.JDBC&quot;)\n                .url(&quot;jdbc:sqlite:&quot; + sqliteDBFilePath)\n                .type(HikariDataSource.class)\n                .build();\n    }\n\n    @Bean\n    public Flyway sqliteFlyway(\n            @Qualifier(&quot;sqliteDataSource&quot;) final DataSource sqliteDataSource,\n            @Value(&quot;${sqlite.flyway.locations}&quot;) final String[] flywayLocations) {\n        final var flyway =\n                Flyway.configure().dataSource(sqliteDataSource).locations(flywayLocations).load();\n        flyway.migrate();\n        return flyway;\n    }\n\n    @Bean(name = &quot;sqliteEntityManagerFactory&quot;)\n    public LocalContainerEntityManagerFactoryBean sqliteEntityManagerFactory(\n            final EntityManagerFactoryBuilder sqliteEntityManagerFactoryBuilder,\n            @Qualifier(&quot;sqliteDataSource&quot;) final DataSource sqliteDataSource) {\n\n        final var sqliteJpaProperties =\n                Map.ofEntries(\n                        Map.entry(\n                                &quot;hibernate.dialect&quot;, &quot;org.sqlite.hibernate.dialect.SQLiteDialect&quot;));\n\n        return sqliteEntityManagerFactoryBuilder\n                .dataSource(sqliteDataSource)\n                .packages(&quot;ch.sac.model.sqlite.entity&quot;)\n                .persistenceUnit(&quot;sqliteDataSource&quot;)\n                .properties(sqliteJpaProperties)\n                .build();\n    }\n\n    @Bean(name = &quot;sqliteTransactionManager&quot;)\n    public PlatformTransactionManager sqliteTransactionManager(\n            @Qualifier(&quot;sqliteEntityManagerFactory&quot;)\n                    final EntityManagerFactory sqliteEntityManagerFactory) {\n        return new JpaTransactionManager(sqliteEntityManagerFactory);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14878075,"reputation":125,"user_id":10743594,"display_name":"java programming"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648712821,"creation_date":1648712821,"answer_id":71688774,"question_id":71614777,"body_markdown":"The answer was found: It can be done by extending AbstractRoutingDataSource class of spring.","title":"Spring JPA – Multiple Databases with the same Repositories","body":"<p>The answer was found: It can be done by extending AbstractRoutingDataSource class of spring.</p>\n"},{"tags":[],"owner":{"account_id":6696740,"reputation":316,"user_id":5164543,"display_name":"Sumit Kar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1649101064,"creation_date":1649101064,"answer_id":71742885,"question_id":71614777,"body_markdown":"Ideally, it is better to have two separate microservices connecting to two different data sources.","title":"Spring JPA – Multiple Databases with the same Repositories","body":"<p>Ideally, it is better to have two separate microservices connecting to two different data sources.</p>\n"},{"tags":[],"owner":{"account_id":4104614,"reputation":180,"user_id":3369103,"display_name":"Guardian"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1690527633,"creation_date":1690527633,"answer_id":76785482,"question_id":71614777,"body_markdown":"The answer on how to use the AbstractRoutingDataSource is as follows:\r\n\r\n**Create a Custom Routing Data Source:**\r\nExtend the AbstractRoutingDataSource class and override the determineCurrentLookupKey() method. This method should return a key that represents the target data source to be used for the current transaction. The key could be based on some thread-local variable, user context, or any other logic you want to use to determine the data source.\r\n\r\n**Configure Data Sources and Custom Routing Data Source:**\r\nDefine your multiple data sources in your configuration, as you would normally do. Then, create an instance of your custom routing data source and set its target data sources (the data sources you want to switch between) using the setTargetDataSources() method.\r\n\r\n**Configure Transaction Manager:**\r\nDefine multiple transaction managers, one for each data source, and link them to their respective data sources.\r\n\r\n**Enable Declarative Transactions:**\r\nAnnotate your service methods with @Transactional as usual. When a transactional method is invoked, the custom routing data source will determine the appropriate data source based on the context, and the corresponding transaction manager will be used for that transaction.\r\n\r\nif you like to see more details like code example check [here][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-abstract-routing-data-source","title":"Spring JPA – Multiple Databases with the same Repositories","body":"<p>The answer on how to use the AbstractRoutingDataSource is as follows:</p>\n<p><strong>Create a Custom Routing Data Source:</strong>\nExtend the AbstractRoutingDataSource class and override the determineCurrentLookupKey() method. This method should return a key that represents the target data source to be used for the current transaction. The key could be based on some thread-local variable, user context, or any other logic you want to use to determine the data source.</p>\n<p><strong>Configure Data Sources and Custom Routing Data Source:</strong>\nDefine your multiple data sources in your configuration, as you would normally do. Then, create an instance of your custom routing data source and set its target data sources (the data sources you want to switch between) using the setTargetDataSources() method.</p>\n<p><strong>Configure Transaction Manager:</strong>\nDefine multiple transaction managers, one for each data source, and link them to their respective data sources.</p>\n<p><strong>Enable Declarative Transactions:</strong>\nAnnotate your service methods with @Transactional as usual. When a transactional method is invoked, the custom routing data source will determine the appropriate data source based on the context, and the corresponding transaction manager will be used for that transaction.</p>\n<p>if you like to see more details like code example check <a href=\"https://www.baeldung.com/spring-abstract-routing-data-source\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":14878075,"reputation":125,"user_id":10743594,"display_name":"java programming"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4378,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":71742885,"answer_count":4,"score":4,"last_activity_date":1690527633,"creation_date":1648200910,"question_id":71614777,"body_markdown":"I have configured Spring JPA to work with multiple data sources following this example.\r\n[Spring JPA – Multiple Databases](https://www.baeldung.com/spring-data-jpa-multiple-databases)\r\n\r\nIt works as expected but since I want to use different data sources but with the same repositories there is an issue. When I try to use &quot;Declarative Transaction Management&quot; on my services and specify which transaction I am going to use the primary transaction or secondary one the transaction annotation is ignoring it. So in this case it is using the second one. However, both of the beans &quot;PlatformTransactionManager&quot; are created but when it comes to using in &quot;@Transactional&quot; I am not able to make the transaction work with the bean I have specified. So it seems that @Transactional is ignoring the bean name since they have the same repositories. Is there any way how can I use declarative transactions as I am trying to do it? As I have seen it can be done with Programmatic Transaction Management but it will cost me to change the whole code on my services since I have been using only declarative transactions. \r\n\r\n\r\n","title":"Spring JPA – Multiple Databases with the same Repositories","body":"<p>I have configured Spring JPA to work with multiple data sources following this example.\n<a href=\"https://www.baeldung.com/spring-data-jpa-multiple-databases\" rel=\"nofollow noreferrer\">Spring JPA – Multiple Databases</a></p>\n<p>It works as expected but since I want to use different data sources but with the same repositories there is an issue. When I try to use &quot;Declarative Transaction Management&quot; on my services and specify which transaction I am going to use the primary transaction or secondary one the transaction annotation is ignoring it. So in this case it is using the second one. However, both of the beans &quot;PlatformTransactionManager&quot; are created but when it comes to using in &quot;@Transactional&quot; I am not able to make the transaction work with the bean I have specified. So it seems that @Transactional is ignoring the bean name since they have the same repositories. Is there any way how can I use declarative transactions as I am trying to do it? As I have seen it can be done with Programmatic Transaction Management but it will cost me to change the whole code on my services since I have been using only declarative transactions.</p>\n"},{"tags":["java","sql","oracle","hibernate"],"comments":[{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1690452640,"post_id":76778262,"comment_id":135357148,"body_markdown":"JSON_VALUE is a fonction that could be used in the SELECT and the WHERE part of the query, JSON_TEXTCONTAINS is like JSON_EXISTS: only in the WHERE clause, that may explain the different behavior.","body":"JSON_VALUE is a fonction that could be used in the SELECT and the WHERE part of the query, JSON_TEXTCONTAINS is like JSON_EXISTS: only in the WHERE clause, that may explain the different behavior."},{"owner":{"account_id":28710127,"reputation":1,"user_id":21985766,"display_name":"Isma&#239;l"},"score":0,"creation_date":1690461586,"post_id":76778262,"comment_id":135359100,"body_markdown":"Both of them are used in the where clause, does that mean JSON_TEXTCONTAINS cannot be used in a where clause from hibernate ?","body":"Both of them are used in the where clause, does that mean JSON_TEXTCONTAINS cannot be used in a where clause from hibernate ?"},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1690472031,"post_id":76778262,"comment_id":135361757,"body_markdown":"I just pointed out a difference from ORACLE point of view, you should enable the tracing of queries to see what Hibernate generates.","body":"I just pointed out a difference from ORACLE point of view, you should enable the tracing of queries to see what Hibernate generates."},{"owner":{"account_id":28710127,"reputation":1,"user_id":21985766,"display_name":"Isma&#239;l"},"score":0,"creation_date":1690526277,"post_id":76778262,"comment_id":135368803,"body_markdown":"I already done the tracing and each query seems ok, just it doesn&#39;t run. For SQL you cannot just do JSON_TEXTCONTAINS() = 1, and for hibernate as I said it doesn&#39;t support a function without an operator in the where clause. I&#39;ve edited my question to add this precision.","body":"I already done the tracing and each query seems ok, just it doesn&#39;t run. For SQL you cannot just do JSON_TEXTCONTAINS() = 1, and for hibernate as I said it doesn&#39;t support a function without an operator in the where clause. I&#39;ve edited my question to add this precision."},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1690530548,"post_id":76778262,"comment_id":135369551,"body_markdown":"And if you wrap JSON_TEXTCONTAINS in a function returning a number?","body":"And if you wrap JSON_TEXTCONTAINS in a function returning a number?"},{"owner":{"account_id":28710127,"reputation":1,"user_id":21985766,"display_name":"Isma&#239;l"},"score":0,"creation_date":1690536351,"post_id":76778262,"comment_id":135370740,"body_markdown":"Good idea but not working, it seems JSON_TEXTCONTAINS does not return anything and is inherent to be used in a where clause. Kind of like a `attribute like &#39;%1&#39;`","body":"Good idea but not working, it seems JSON_TEXTCONTAINS does not return anything and is inherent to be used in a where clause. Kind of like a <code>attribute like &#39;%1&#39;</code>"},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1690543869,"post_id":76778262,"comment_id":135372190,"body_markdown":"try this:\ncreate or replace function is_jsontextcontains(p_json IN VARCHAR2, p_target IN VARCHAR2)\nreturn number\nis\n    v_result NUMBER;\nbegin\n\twith data(s) as ( select p_json from dual )\n\tselect count(*) into v_result from data where  JSON_TEXTCONTAINS(s, &#39;$&#39;, p_target);\n\treturn v_result;\nend;","body":"try this: create or replace function is_jsontextcontains(p_json IN VARCHAR2, p_target IN VARCHAR2) return number is     v_result NUMBER; begin \twith data(s) as ( select p_json from dual ) \tselect count(*) into v_result from data where  JSON_TEXTCONTAINS(s, &#39;$&#39;, p_target); \treturn v_result; end;"},{"owner":{"account_id":28710127,"reputation":1,"user_id":21985766,"display_name":"Isma&#239;l"},"score":0,"creation_date":1690794085,"post_id":76778262,"comment_id":135397434,"body_markdown":"Thank for you anwser, it seems it could work with this idea. I&#39;m not an expert of oracle, but I can&#39;t get your function to work. I get `&quot;first argument of JSON_TEXTCONTAINS needs to be a column`. It seems that putting `s` as column doesn&#39;t work. Still, I don&#39;t understand where the attribute of the json I want to fetch goes into your function. It should have a third parameter `p_att` and use it like `JSON_TEXTCONTAINS(s, &#39;$.p_att&#39;, p_target)` no ?","body":"Thank for you anwser, it seems it could work with this idea. I&#39;m not an expert of oracle, but I can&#39;t get your function to work. I get <code>&quot;first argument of JSON_TEXTCONTAINS needs to be a column</code>. It seems that putting <code>s</code> as column doesn&#39;t work. Still, I don&#39;t understand where the attribute of the json I want to fetch goes into your function. It should have a third parameter <code>p_att</code> and use it like <code>JSON_TEXTCONTAINS(s, &#39;$.p_att&#39;, p_target)</code> no ?"},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1690805120,"post_id":76778262,"comment_id":135399506,"body_markdown":"It&#39;s why I put the WITH clause to wrap the parameter in a query from DUAL so it&#39;s a column when used in JSON_TEXTCONTAINS.","body":"It&#39;s why I put the WITH clause to wrap the parameter in a query from DUAL so it&#39;s a column when used in JSON_TEXTCONTAINS."},{"owner":{"account_id":28710127,"reputation":1,"user_id":21985766,"display_name":"Isma&#239;l"},"score":0,"creation_date":1690810262,"post_id":76778262,"comment_id":135400693,"body_markdown":"Yeah I understand but I still get : `ORA-40468: First input parameter to JSON_TEXTCONTAINS() must be a column.` Could you show me how do you want me to use your function ? Because maybe I don&#39;t get what you want me to achieve with this function.","body":"Yeah I understand but I still get : <code>ORA-40468: First input parameter to JSON_TEXTCONTAINS() must be a column.</code> Could you show me how do you want me to use your function ? Because maybe I don&#39;t get what you want me to achieve with this function."},{"owner":{"account_id":6389739,"reputation":2892,"user_id":4956336,"display_name":"p3consulting"},"score":0,"creation_date":1690811187,"post_id":76778262,"comment_id":135400914,"body_markdown":"by having a FUNCTION returning a NUMBER you should be able to register it in Hibernate:\ncreate or replace function is_jsontextcontains(p_json IN VARCHAR2, p_target IN VARCHAR2)\nreturn number\nis\n    v_result NUMBER;\nbegin\n\twith data(s) as ( select p_json from dual )\n\tselect count(*) into v_result from data where  JSON_TEXTCONTAINS(s, &#39;$&#39;, p_target);\n\treturn v_result;\nend;\n\nThe only limitation of JSON_TEXTCONTAINS you can&#39;t go around is that the path parameter MUST be a literal.\nAnd this compiles fine here: Oracle Database 21c Enterprise Edition Release 21.0.0.0.0 - Production.","body":"by having a FUNCTION returning a NUMBER you should be able to register it in Hibernate: create or replace function is_jsontextcontains(p_json IN VARCHAR2, p_target IN VARCHAR2) return number is     v_result NUMBER; begin \twith data(s) as ( select p_json from dual ) \tselect count(*) into v_result from data where  JSON_TEXTCONTAINS(s, &#39;$&#39;, p_target); \treturn v_result; end;  The only limitation of JSON_TEXTCONTAINS you can&#39;t go around is that the path parameter MUST be a literal. And this compiles fine here: Oracle Database 21c Enterprise Edition Release 21.0.0.0.0 - Production."}],"owner":{"account_id":28710127,"reputation":1,"user_id":21985766,"display_name":"Isma&#239;l"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690526595,"creation_date":1690449585,"question_id":76778262,"body_markdown":"The issue is that whatever I try in hibernate, it seems impossible to use this particular &quot;unary&quot; function from oracle text.\r\n\r\nI know how to use JSON_VALUE function in hibernate, by doing\r\n\r\n```java\r\nExpression&lt;String&gt; expression = \r\n                        builder.function(&quot;JSON_VALUE&quot;, \r\n                                String.class, \r\n                                new HibernateInlineExpressionHelper(builder, &quot;my_json_col&quot;), \r\n                                new HibernateInlineExpressionHelper(builder, &quot;&#39;$.my_json_att&#39;&quot;)\r\n                        );\r\n```\r\n\r\nand then comparing the value using basic operator in hibernate like\r\n\r\n```java\r\nPredicate predicate = builder.like(expression, value + &quot;%&quot;);\r\n```\r\n\r\nBut then when it is about JSON_TEXTCONTAINS function, nothing works. I&#39;ve tried creating this expression :\r\n\r\n```java\r\nExpression&lt;Boolean&gt; expression = \r\n                            builder.function(&quot;JSON_TEXTCONTAINS&quot;, \r\n                                    Boolean.class, \r\n                                    new HibernateInlineExpressionHelper(builder, &quot;my_json_col&quot;), \r\n                                    new HibernateInlineExpressionHelper(builder, &quot;&#39;$.my_json_att&#39;&quot;), \r\n                                    new HibernateInlineExpressionHelper(builder, &quot;&#39;my_json_val&#39;&quot;));\r\n```\r\n\r\nAnd then calling an equal true :\r\n\r\n```java\r\nPredicate predicate = builder.isTrue(expression);\r\n```\r\n\r\nBut this is not supported by sql, error message is `&quot;ORA-00933: SQL command not properly ended&quot;`.\r\n\r\nOr even :\r\n\r\n```java\r\nPredicate predicate = new BooleanExpressionPredicate((CriteriaBuilderImpl) builder, expression);\r\n```\r\n\r\nBut this is not supported by hibernate at least for JSON_TEXTCONTAINS function, error message is \r\n\r\n```java\r\norg.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: function (JSON_TEXTCONTAINS) near line 1, column 301 [select rootAlias from MyEntity as rootAlias left join rootAlias.entityA as generatedAlias0 left join generatedAlias0.entityB as generatedAlias1 inner join rootAlias.contentType as generatedAlias2 where ( 1=1 ) and ( ( generatedAlias2.ref=:param0 ) and ( ( function(&#39;JSON_TEXTCONTAINS&#39;, my_json_col, &#39;$.my_json_att1&#39;, &#39;my_json_val1&#39;) ) and ( function(&#39;JSON_TEXTCONTAINS&#39;, my_json_col, &#39;$.my_json_att2&#39;, &#39;my_json_val2&#39;) ) and ( function(&#39;JSON_TEXTCONTAINS&#39;, my_json_col, &#39;$.my_json_att3&#39;, &#39;my_json_val3&#39;) ) ) ) order by rootAlias.creationDate desc, rootAlias.id desc]\r\n```\r\n\r\nThose predicate I try to build are after concatenate like this :\r\n\r\n```java\r\nCriteriaQuery&lt;MyEntity&gt; criteriaQuery = builder.createQuery(MyEntity.class);\r\ncriteriaQuery.select(root)\r\n                .where(predicateList.toArray(new Predicate[]{}))\r\n                .orderBy(orderList);\r\n```\r\n\r\nI have a lot of other predicates, with dynamic parameters, so building a native sql is not a possibility.\r\n\r\nDo someone have an idea on how to use JSON_TEXTCONTAINS ?\r\n\r\nThe class HibernateInlineExpressionHelper comes from [this blog](http://www.istvandevai.com/2018/02/using-oracle-json-functions-via-jpa-and.html).","title":"How to use JSON_TEXTCONTAINS oracle function with hibernate 5 in Java","body":"<p>The issue is that whatever I try in hibernate, it seems impossible to use this particular &quot;unary&quot; function from oracle text.</p>\n<p>I know how to use JSON_VALUE function in hibernate, by doing</p>\n<pre class=\"lang-java prettyprint-override\"><code>Expression&lt;String&gt; expression = \n                        builder.function(&quot;JSON_VALUE&quot;, \n                                String.class, \n                                new HibernateInlineExpressionHelper(builder, &quot;my_json_col&quot;), \n                                new HibernateInlineExpressionHelper(builder, &quot;'$.my_json_att'&quot;)\n                        );\n</code></pre>\n<p>and then comparing the value using basic operator in hibernate like</p>\n<pre class=\"lang-java prettyprint-override\"><code>Predicate predicate = builder.like(expression, value + &quot;%&quot;);\n</code></pre>\n<p>But then when it is about JSON_TEXTCONTAINS function, nothing works. I've tried creating this expression :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Expression&lt;Boolean&gt; expression = \n                            builder.function(&quot;JSON_TEXTCONTAINS&quot;, \n                                    Boolean.class, \n                                    new HibernateInlineExpressionHelper(builder, &quot;my_json_col&quot;), \n                                    new HibernateInlineExpressionHelper(builder, &quot;'$.my_json_att'&quot;), \n                                    new HibernateInlineExpressionHelper(builder, &quot;'my_json_val'&quot;));\n</code></pre>\n<p>And then calling an equal true :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Predicate predicate = builder.isTrue(expression);\n</code></pre>\n<p>But this is not supported by sql, error message is <code>&quot;ORA-00933: SQL command not properly ended&quot;</code>.</p>\n<p>Or even :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Predicate predicate = new BooleanExpressionPredicate((CriteriaBuilderImpl) builder, expression);\n</code></pre>\n<p>But this is not supported by hibernate at least for JSON_TEXTCONTAINS function, error message is</p>\n<pre class=\"lang-java prettyprint-override\"><code>org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected AST node: function (JSON_TEXTCONTAINS) near line 1, column 301 [select rootAlias from MyEntity as rootAlias left join rootAlias.entityA as generatedAlias0 left join generatedAlias0.entityB as generatedAlias1 inner join rootAlias.contentType as generatedAlias2 where ( 1=1 ) and ( ( generatedAlias2.ref=:param0 ) and ( ( function('JSON_TEXTCONTAINS', my_json_col, '$.my_json_att1', 'my_json_val1') ) and ( function('JSON_TEXTCONTAINS', my_json_col, '$.my_json_att2', 'my_json_val2') ) and ( function('JSON_TEXTCONTAINS', my_json_col, '$.my_json_att3', 'my_json_val3') ) ) ) order by rootAlias.creationDate desc, rootAlias.id desc]\n</code></pre>\n<p>Those predicate I try to build are after concatenate like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaQuery&lt;MyEntity&gt; criteriaQuery = builder.createQuery(MyEntity.class);\ncriteriaQuery.select(root)\n                .where(predicateList.toArray(new Predicate[]{}))\n                .orderBy(orderList);\n</code></pre>\n<p>I have a lot of other predicates, with dynamic parameters, so building a native sql is not a possibility.</p>\n<p>Do someone have an idea on how to use JSON_TEXTCONTAINS ?</p>\n<p>The class HibernateInlineExpressionHelper comes from <a href=\"http://www.istvandevai.com/2018/02/using-oracle-json-functions-via-jpa-and.html\" rel=\"nofollow noreferrer\">this blog</a>.</p>\n"},{"tags":["java","json","pojo","jsonschema2pojo"],"owner":{"account_id":5180100,"reputation":3,"user_id":4146062,"display_name":"Surya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690526347,"creation_date":1690482502,"question_id":76782518,"body_markdown":"We have example keyword in our `JSON` schema like `&quot;examples&quot; : [ &quot;001&quot; ]`. How do I add this to the generated `Pojo&#39;s` via `jsonschema2pojo-maven-plugin`. As the plugin is ignoring the examples keyword and also is there a corresponding `JSON` annotation for the example keyword?\r\n\r\nLooked for any option in the plugin documentation but no luck.","title":"How to get examples from schema to POJOS generated via generated Pojo&#39;s via jsonschema2pojo-maven-plugin","body":"<p>We have example keyword in our <code>JSON</code> schema like <code>&quot;examples&quot; : [ &quot;001&quot; ]</code>. How do I add this to the generated <code>Pojo's</code> via <code>jsonschema2pojo-maven-plugin</code>. As the plugin is ignoring the examples keyword and also is there a corresponding <code>JSON</code> annotation for the example keyword?</p>\n<p>Looked for any option in the plugin documentation but no luck.</p>\n"},{"tags":["java","network-programming","httpurlconnection","httpsurlconnection"],"comments":[{"owner":{"account_id":5534380,"reputation":268,"user_id":4472711,"display_name":"MNEMO"},"score":0,"creation_date":1690519108,"post_id":76784856,"comment_id":135367947,"body_markdown":"I recommend for you to search with terms &quot;java keep-alive&quot;","body":"I recommend for you to search with terms &quot;java keep-alive&quot;"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1690526193,"post_id":76784856,"comment_id":135368788,"body_markdown":"You don&#39;t have any choice. There is no other way to use `Http[s]URLConnection`. The good news is that it does connection pooling itself behind the scenes. But don&#39;t call `disconnect()`. Just close the input stream.","body":"You don&#39;t have any choice. There is no other way to use <code>Http[s]URLConnection</code>. The good news is that it does connection pooling itself behind the scenes. But don&#39;t call <code>disconnect()</code>. Just close the input stream."}],"owner":{"account_id":22287193,"reputation":11,"user_id":16514637,"display_name":"Mounika"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1690526971,"answer_count":0,"score":0,"last_activity_date":1690525612,"creation_date":1690518639,"question_id":76784856,"body_markdown":"I am using HttpURLConnection to make GET requests. Below is the code:\r\n\r\n```\r\nclass ConnectClass  {\r\n        private HttpURLConnection connection;\r\n\r\n        public makerequest(URL url)  throws Exception {\r\n        try {\r\n            connection = (HttpsURLConnection) url.openConnection();\r\n            ..... \r\n            } finally {\r\n             connection.disconnect();\r\n            }\r\n        }\r\n}\r\n```\r\n\r\nIs it a good idea to create connection and close it everytime for each request? How can I improve latency? Is it possible to reuse the existing connection without creating a new one everytime. \r\n\r\nAny ideas? Thanks in advance.","title":"Reusing connections for Improving performance","body":"<p>I am using HttpURLConnection to make GET requests. Below is the code:</p>\n<pre><code>class ConnectClass  {\n        private HttpURLConnection connection;\n\n        public makerequest(URL url)  throws Exception {\n        try {\n            connection = (HttpsURLConnection) url.openConnection();\n            ..... \n            } finally {\n             connection.disconnect();\n            }\n        }\n}\n</code></pre>\n<p>Is it a good idea to create connection and close it everytime for each request? How can I improve latency? Is it possible to reuse the existing connection without creating a new one everytime.</p>\n<p>Any ideas? Thanks in advance.</p>\n"},{"tags":["java","hibernate","nativequery"],"comments":[{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1690638088,"post_id":76785320,"comment_id":135383143,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29108639,"reputation":1,"user_id":22298872,"display_name":"siddharth jidage"},"score":0,"creation_date":1690793857,"post_id":76785320,"comment_id":135397374,"body_markdown":"Ive like this  &quot;select * from emp_table where emp_id= ?&quot;  i dont want to update this prams at more than 2k instances  ,  can u please suggest if there is any way to do so.","body":"Ive like this  &quot;select * from emp_table where emp_id= ?&quot;  i dont want to update this prams at more than 2k instances  ,  can u please suggest if there is any way to do so."}],"owner":{"account_id":29108639,"reputation":1,"user_id":22298872,"display_name":"siddharth jidage"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690525554,"creation_date":1690525554,"question_id":76785320,"body_markdown":"&#39;m currently working on a project that utilizes Hibernate as the ORM tool, and we have recently updated to the latest version of Hibernate (post-5.2). In our codebase, we have been using native SQL queries with the createSQLQuery method, which allowed us to use legacy-style parameters like ?. However, upon the update, we encountered the following error message:\r\n\r\n&quot;org.hibernate.QueryException: Legacy-style query parameters (?) are no longer supported; use JPA-style ordinal parameters (e.g., ?1)&quot;\r\n\r\n\r\n I understand that Hibernate deprecated createSQLQuery and recommends using JPA-style ordinal parameters. While I&#39;m aware of this recommended approach, for the time being, I&#39;m interested in finding alternative solutions or workarounds to keep our native queries intact as they are.\r\n\r\nHas anyone faced a similar issue with the latest Hibernate version, and is there a way to continue using native queries with legacy-style parameters? If so, what would be the best approach to handle this situation and avoid the deprecated method?\r\n\r\nAny insights, code examples, or suggestions would be greatly appreciated. Thank you!","title":"Using Native SQL Queries with Latest Hibernate Version (Post-5.2) - Deprecated Legacy-Style Parameters Issue","body":"<p>'m currently working on a project that utilizes Hibernate as the ORM tool, and we have recently updated to the latest version of Hibernate (post-5.2). In our codebase, we have been using native SQL queries with the createSQLQuery method, which allowed us to use legacy-style parameters like ?. However, upon the update, we encountered the following error message:</p>\n<p>&quot;org.hibernate.QueryException: Legacy-style query parameters (?) are no longer supported; use JPA-style ordinal parameters (e.g., ?1)&quot;</p>\n<p>I understand that Hibernate deprecated createSQLQuery and recommends using JPA-style ordinal parameters. While I'm aware of this recommended approach, for the time being, I'm interested in finding alternative solutions or workarounds to keep our native queries intact as they are.</p>\n<p>Has anyone faced a similar issue with the latest Hibernate version, and is there a way to continue using native queries with legacy-style parameters? If so, what would be the best approach to handle this situation and avoid the deprecated method?</p>\n<p>Any insights, code examples, or suggestions would be greatly appreciated. Thank you!</p>\n"},{"tags":["java","tomcat","keycloak","openid-connect","pac4j"],"answers":[{"tags":[],"owner":{"account_id":9067171,"reputation":1177,"user_id":6751603,"accept_rate":100,"display_name":"JavaMan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671094676,"creation_date":1671094676,"answer_id":74809015,"question_id":74796180,"body_markdown":"My problem was a keycloak misconfiguration in my keycloak test instance.\r\n\r\nI had the &quot;offline-access&quot; Client Scope added to my Default Client Scopes.\r\n\r\n","title":"Keycloak Bad token response, error=not_allowed when user doesn&#39;t have the offline_access role","body":"<p>My problem was a keycloak misconfiguration in my keycloak test instance.</p>\n<p>I had the &quot;offline-access&quot; Client Scope added to my Default Client Scopes.</p>\n"},{"tags":[],"owner":{"account_id":19323254,"reputation":33,"user_id":14126504,"display_name":"Abin M"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690525181,"creation_date":1690525181,"answer_id":76785285,"question_id":74796180,"body_markdown":"Under clients navigate to Client Scopes check that offline_access is there in **Assigned Default Client Scopes**. If it is there change that into **Available Client Scopes** This will resolve this issue.","title":"Keycloak Bad token response, error=not_allowed when user doesn&#39;t have the offline_access role","body":"<p>Under clients navigate to Client Scopes check that offline_access is there in <strong>Assigned Default Client Scopes</strong>. If it is there change that into <strong>Available Client Scopes</strong> This will resolve this issue.</p>\n"}],"owner":{"account_id":9067171,"reputation":1177,"user_id":6751603,"accept_rate":100,"display_name":"JavaMan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1695,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74809015,"answer_count":2,"score":2,"last_activity_date":1690525181,"creation_date":1671010683,"question_id":74796180,"body_markdown":"We have a JSF Application running on a tomcat 9 and we are using keycloak (v10.0.2) for login.\r\n\r\nBecause [keycloak deprecated their tomcat-adapter][1] we would like to switch from the keycloak tomcat-adapter to [pac4j][2].\r\n\r\nSo I&#39;ve created the following configuration.\r\n\r\n   \r\n\r\n    import org.pac4j.core.client.Clients;\r\n    import org.pac4j.core.config.Config;\r\n    import org.pac4j.core.config.ConfigFactory;\r\n    import org.pac4j.oidc.client.KeycloakOidcClient;\r\n    import org.pac4j.oidc.config.KeycloakOidcConfiguration;\r\n    \r\n    import com.nimbusds.oauth2.sdk.auth.ClientAuthenticationMethod;\r\n    \r\n    public class SecurityConfigFactory implements ConfigFactory {\r\n    \r\n      @Override\r\n      public Config build(final Object... parameters) {\r\n        System.out.print(&quot;Building Security configuration...\\n&quot;);\r\n    \r\n        final KeycloakOidcConfiguration keycloak = new KeycloakOidcConfiguration();\r\n        keycloak.setBaseUri(&quot;http://localhost:8180/auth&quot;);\r\n        keycloak.setRealm(&quot;testRealm&quot;);\r\n        keycloak.setClientId(&quot;local-test&quot;);\r\n        keycloak.setSecret(&quot;abc-xyz&quot;);\r\n        keycloak.setClientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC);\r\n        keycloak.setLogoutUrl(&quot;http://localhost:8180/auth/realms/testRealm/protocol/openid-connect/logout&quot;);\r\n        final KeycloakOidcClient keycloakClient = new KeycloakOidcClient(keycloak);\r\n        keycloakClient.setName(&quot;keycloakClient&quot;);\r\n    \r\n        final String callbackUrl = &quot;http://localhost:8080/callback&quot;;\r\n        final Clients clients = new Clients(callbackUrl, keycloakClient/* , new AnonymousClient() */);\r\n    \r\n        final Config config = new Config(clients);\r\n        return config;\r\n      }\r\n    \r\n    }\r\n\r\nand added the following to my web.xml\r\n\r\n\t&lt;filter&gt;\r\n\t\t&lt;filter-name&gt;callbackFilter&lt;/filter-name&gt;\r\n\t\t&lt;filter-class&gt;org.pac4j.j2e.filter.CallbackFilter&lt;/filter-class&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;defaultUrl&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;/&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;renewSession&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;false&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;multiProfile&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;false&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;saveInSession&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;true&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t&lt;/filter&gt;\r\n\t&lt;filter-mapping&gt;\r\n\t\t&lt;filter-name&gt;callbackFilter&lt;/filter-name&gt;\r\n\t\t&lt;url-pattern&gt;/callback&lt;/url-pattern&gt;\r\n\t\t&lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\r\n\t&lt;/filter-mapping&gt;\r\n\r\n\r\n\t&lt;filter&gt;\r\n\t\t&lt;filter-name&gt;OidcFilter&lt;/filter-name&gt;\r\n\t\t&lt;filter-class&gt;org.pac4j.j2e.filter.SecurityFilter&lt;/filter-class&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;configFactory&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;abc.xyz.SecurityConfigFactory&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;clients&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;keycloakClient&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t\t&lt;init-param&gt;\r\n\t\t\t&lt;param-name&gt;authorizers&lt;/param-name&gt;\r\n\t\t\t&lt;param-value&gt;securityHeaders&lt;/param-value&gt;\r\n\t\t&lt;/init-param&gt;\r\n\t&lt;/filter&gt;\r\n\t&lt;filter-mapping&gt;\r\n\t\t&lt;filter-name&gt;OidcFilter&lt;/filter-name&gt;\r\n\t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n\t\t&lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\r\n\t\t&lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;\r\n\t&lt;/filter-mapping&gt;\r\n\r\nSo now my problem is that when a user has the offline_access role he is able to login into keycloak.\r\nBut as soon as I remove the **offline_access** role I get this exception if I click the login button at keycloak.\r\n\r\n    2022-12-14 10:19:11,304 DEBUG [http-nio-8080-exec-10]  - authenticator.OidcAuthenticator.validate - Token response: status=400, content={&quot;error&quot;:&quot;not_allowed&quot;,\r\n    &quot;error_description&quot;:&quot;Offline tokens not allowed for the user or client&quot;}\r\n    ...\r\n    org.pac4j.core.exception.TechnicalException: Bad token response, error=not_allowed\r\n    \tat org.pac4j.oidc.credentials.authenticator.OidcAuthenticator.validate(OidcAuthenticator.java:147)\r\n    \tat org.pac4j.oidc.credentials.authenticator.OidcAuthenticator.validate(OidcAuthenticator.java:35)\r\n    \tat org.pac4j.core.client.BaseClient.retrieveCredentials(BaseClient.java:71)\r\n    \tat org.pac4j.core.client.IndirectClient.getCredentials(IndirectClient.java:140)\r\n    \tat org.pac4j.core.engine.DefaultCallbackLogic.perform(DefaultCallbackLogic.java:89)\r\n    \tat org.pac4j.j2e.filter.CallbackFilter.internalFilter(CallbackFilter.java:84)\r\n    \tat org.pac4j.j2e.filter.AbstractConfigFilter.doFilter(AbstractConfigFilter.java:84)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:745)\r\n\r\nSo I think that I have to tell the config to not use a offline token, or is their something obvious that I&#39;m missing?\r\n\r\nIn keycloak I see the following events [![enter image description here][3]][3]\r\n\r\nMy Pom.xml includes (we are using Java 8 and I couldn&#39;t get a newer pac4j version to compile)\r\n\r\n\r\n       &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.pac4j&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;j2e-pac4j&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;4.1.0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.pac4j&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;pac4j-oidc&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.9.0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\n\r\n  [1]: https://www.keycloak.org/2022/02/adapter-deprecation\r\n  [2]: https://www.pac4j.org/\r\n  [3]: https://i.stack.imgur.com/imnBc.png","title":"Keycloak Bad token response, error=not_allowed when user doesn&#39;t have the offline_access role","body":"<p>We have a JSF Application running on a tomcat 9 and we are using keycloak (v10.0.2) for login.</p>\n<p>Because <a href=\"https://www.keycloak.org/2022/02/adapter-deprecation\" rel=\"nofollow noreferrer\">keycloak deprecated their tomcat-adapter</a> we would like to switch from the keycloak tomcat-adapter to <a href=\"https://www.pac4j.org/\" rel=\"nofollow noreferrer\">pac4j</a>.</p>\n<p>So I've created the following configuration.</p>\n<pre><code>import org.pac4j.core.client.Clients;\nimport org.pac4j.core.config.Config;\nimport org.pac4j.core.config.ConfigFactory;\nimport org.pac4j.oidc.client.KeycloakOidcClient;\nimport org.pac4j.oidc.config.KeycloakOidcConfiguration;\n\nimport com.nimbusds.oauth2.sdk.auth.ClientAuthenticationMethod;\n\npublic class SecurityConfigFactory implements ConfigFactory {\n\n  @Override\n  public Config build(final Object... parameters) {\n    System.out.print(&quot;Building Security configuration...\\n&quot;);\n\n    final KeycloakOidcConfiguration keycloak = new KeycloakOidcConfiguration();\n    keycloak.setBaseUri(&quot;http://localhost:8180/auth&quot;);\n    keycloak.setRealm(&quot;testRealm&quot;);\n    keycloak.setClientId(&quot;local-test&quot;);\n    keycloak.setSecret(&quot;abc-xyz&quot;);\n    keycloak.setClientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_BASIC);\n    keycloak.setLogoutUrl(&quot;http://localhost:8180/auth/realms/testRealm/protocol/openid-connect/logout&quot;);\n    final KeycloakOidcClient keycloakClient = new KeycloakOidcClient(keycloak);\n    keycloakClient.setName(&quot;keycloakClient&quot;);\n\n    final String callbackUrl = &quot;http://localhost:8080/callback&quot;;\n    final Clients clients = new Clients(callbackUrl, keycloakClient/* , new AnonymousClient() */);\n\n    final Config config = new Config(clients);\n    return config;\n  }\n\n}\n</code></pre>\n<p>and added the following to my web.xml</p>\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;callbackFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.pac4j.j2e.filter.CallbackFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;defaultUrl&lt;/param-name&gt;\n        &lt;param-value&gt;/&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;renewSession&lt;/param-name&gt;\n        &lt;param-value&gt;false&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;multiProfile&lt;/param-name&gt;\n        &lt;param-value&gt;false&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;saveInSession&lt;/param-name&gt;\n        &lt;param-value&gt;true&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;callbackFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/callback&lt;/url-pattern&gt;\n    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n&lt;/filter-mapping&gt;\n\n\n&lt;filter&gt;\n    &lt;filter-name&gt;OidcFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.pac4j.j2e.filter.SecurityFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;configFactory&lt;/param-name&gt;\n        &lt;param-value&gt;abc.xyz.SecurityConfigFactory&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;clients&lt;/param-name&gt;\n        &lt;param-value&gt;keycloakClient&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;authorizers&lt;/param-name&gt;\n        &lt;param-value&gt;securityHeaders&lt;/param-value&gt;\n    &lt;/init-param&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;OidcFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n    &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n<p>So now my problem is that when a user has the offline_access role he is able to login into keycloak.\nBut as soon as I remove the <strong>offline_access</strong> role I get this exception if I click the login button at keycloak.</p>\n<pre><code>2022-12-14 10:19:11,304 DEBUG [http-nio-8080-exec-10]  - authenticator.OidcAuthenticator.validate - Token response: status=400, content={&quot;error&quot;:&quot;not_allowed&quot;,\n&quot;error_description&quot;:&quot;Offline tokens not allowed for the user or client&quot;}\n...\norg.pac4j.core.exception.TechnicalException: Bad token response, error=not_allowed\n    at org.pac4j.oidc.credentials.authenticator.OidcAuthenticator.validate(OidcAuthenticator.java:147)\n    at org.pac4j.oidc.credentials.authenticator.OidcAuthenticator.validate(OidcAuthenticator.java:35)\n    at org.pac4j.core.client.BaseClient.retrieveCredentials(BaseClient.java:71)\n    at org.pac4j.core.client.IndirectClient.getCredentials(IndirectClient.java:140)\n    at org.pac4j.core.engine.DefaultCallbackLogic.perform(DefaultCallbackLogic.java:89)\n    at org.pac4j.j2e.filter.CallbackFilter.internalFilter(CallbackFilter.java:84)\n    at org.pac4j.j2e.filter.AbstractConfigFilter.doFilter(AbstractConfigFilter.java:84)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n<p>So I think that I have to tell the config to not use a offline token, or is their something obvious that I'm missing?</p>\n<p>In keycloak I see the following events <a href=\"https://i.stack.imgur.com/imnBc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/imnBc.png\" alt=\"enter image description here\" /></a></p>\n<p>My Pom.xml includes (we are using Java 8 and I couldn't get a newer pac4j version to compile)</p>\n<pre><code>   &lt;dependency&gt;\n        &lt;groupId&gt;org.pac4j&lt;/groupId&gt;\n        &lt;artifactId&gt;j2e-pac4j&lt;/artifactId&gt;\n        &lt;version&gt;4.1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.pac4j&lt;/groupId&gt;\n        &lt;artifactId&gt;pac4j-oidc&lt;/artifactId&gt;\n        &lt;version&gt;3.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","vaadin","spotify"],"answers":[{"tags":[],"owner":{"account_id":7372513,"reputation":951,"user_id":5612275,"display_name":"Marco C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690524516,"creation_date":1690496211,"answer_id":76783732,"question_id":76783621,"body_markdown":"It looks like you are trying to use the `trackID` in the constructor, but here it is not yet initialized.\r\nYou have to move/call the code using `trackID` into the beforeEnter method or to another routing life cycle event that happens after the `beforeEnter`, preferably `afterNavigation` for example when you need to access the backend and modify / populate UI with data.","title":"How to use a Route Parameter within a Vaadin page","body":"<p>It looks like you are trying to use the <code>trackID</code> in the constructor, but here it is not yet initialized.\nYou have to move/call the code using <code>trackID</code> into the beforeEnter method or to another routing life cycle event that happens after the <code>beforeEnter</code>, preferably <code>afterNavigation</code> for example when you need to access the backend and modify / populate UI with data.</p>\n"}],"owner":{"account_id":18737525,"reputation":25,"user_id":13661540,"display_name":"Gyro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690524516,"creation_date":1690494771,"question_id":76783621,"body_markdown":"I am creating a Spring application using Vaadin with the help of the Spotify API and a Java Wrapper for the API. I am trying to grab a Route Parameter from the RouteLink that navigates to the current page, and use that String parameter to help me display the information I need. \r\n\r\nThe page with the RouterLink has a for-loop that loops through a search result of various songs and then provides a link for each song with a different route parameter of the Spotify Track ID.\r\n\r\n\r\n```\r\nRouterLink songPageLink = new RouterLink(&quot;Song Details&quot;, songDescription.class, new RouteParameters(&quot;trackID&quot;, track.getId()));\r\n```\r\n\r\nThis is the code for the page I am working on:\r\n\r\n\r\n```\r\npackage trackour.trackour.views.songDescription;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport com.vaadin.flow.component.html.H1;\r\nimport com.vaadin.flow.component.html.H2;\r\nimport com.vaadin.flow.component.html.Image;\r\nimport com.vaadin.flow.component.html.Paragraph;\r\nimport com.vaadin.flow.component.orderedlayout.VerticalLayout;\r\nimport com.vaadin.flow.router.BeforeEnterEvent;\r\nimport com.vaadin.flow.router.BeforeEnterObserver;\r\nimport com.vaadin.flow.router.PageTitle;\r\nimport com.vaadin.flow.router.Route;\r\nimport com.vaadin.flow.server.auth.AnonymousAllowed;\r\n\r\nimport trackour.trackour.views.api.APIController;\r\n\r\n@Route(&quot;songDescription/:trackID?&quot;)\r\n@PageTitle(&quot;Description&quot;)\r\n@AnonymousAllowed\r\n@Component\r\npublic class songDescription extends VerticalLayout implements BeforeEnterObserver {\r\n\r\n    private String trackID;\r\n\r\n    public songDescription() {\r\n\r\n        H1 songTitle = new H1(&quot;SONG NAME&quot;);\r\n        H2 songArtist = new H2(&quot;SONG ARTIST&quot;);\r\n        Image albumCover = new Image();\r\n\r\n        Paragraph acousticnessDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph danceabilityDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph energyDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph instrumentalnessDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph keyDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph livenessDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph loudnessDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph modeDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph tempoDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph timeSignatureDetail = new Paragraph(&quot;VALUE&quot;);\r\n        Paragraph valenceDetail = new Paragraph(&quot;VALUE&quot;);\r\n        \r\n        add(albumCover, songTitle, songArtist, acousticnessDetail, danceabilityDetail, \r\n            energyDetail, instrumentalnessDetail, keyDetail, livenessDetail, loudnessDetail, \r\n            modeDetail, tempoDetail, timeSignatureDetail, valenceDetail);\r\n    }\r\n\r\n    @Override\r\n    public void beforeEnter(BeforeEnterEvent event) {\r\n        trackID = event.getRouteParameters().get(&quot;trackID&quot;).orElseThrow();\r\n    }\r\n}\r\n```\r\n\r\n\r\nThe code works fine the way I have provided it, but once I try to use the `trackID` variable, I get different Spring Bean exceptions.\r\n\r\nHere&#39;s an example of how I want to use the Route Parameter:\r\n```\r\nH1 songTitle = new H1(APIController.getTrackName(trackID));\r\n```\r\n\r\nOnce I do that, I get given this error:\r\n\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;songDescription&#39; defined in file [C:\\Users\\gohar\\OneDrive\\SFU\\CMPT276\\trackour\\target\\classes\\trackour\\trackour\\views\\songDescription\\songDescription.class]: Failed to instantiate [trackour.trackour.views.songDescription.songDescription]: Constructor threw exception\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1314) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1199) ~[spring-beans-6.0.10.jar:6.0.10]        \r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941) ~[spring-context-6.0.10.jar:6.0.10]\r\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.10.jar:6.0.10]\r\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.1.jar:3.1.1]\r\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.1.jar:3.1.1]\r\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.1.jar:3.1.1]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.1.jar:3.1.1]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.1.jar:3.1.1]\r\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.1.jar:3.1.1]\r\n        at trackour.trackour.Application.main(Application.java:26) ~[classes/:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.1.jar:3.1.1]\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [trackour.trackour.views.songDescription.songDescription]: Constructor threw exception\r\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1308) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        ... 22 common frames omitted\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;replacement&quot; is null\r\n        at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1014) ~[na:na]\r\n        at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]        \r\n        at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\r\n        at java.base/java.lang.String.replaceAll(String.java:2940) ~[na:na]\r\n        at se.michaelthelin.spotify.requests.AbstractRequest$Builder.setPath(AbstractRequest.java:244) ~[spotify-web-api-java-8.0.0.jar:na]\r\n        at se.michaelthelin.spotify.requests.data.tracks.GetTrackRequest$Builder.build(GetTrackRequest.java:89) ~[spotify-web-api-java-8.0.0.jar:na]\r\n        at trackour.trackour.views.api.APIController.getTrackName(APIController.java:300) ~[classes/:na]\r\n        at trackour.trackour.views.songDescription.songDescription.&lt;init&gt;(songDescription.java:28) ~[classes/:na]\r\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\r\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\r\n        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\r\n        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\r\n        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]    \r\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:198) ~[spring-beans-6.0.10.jar:6.0.10]\r\n        ... 24 common frames omitted\r\n```\r\n","title":"How to use a Route Parameter within a Vaadin page","body":"<p>I am creating a Spring application using Vaadin with the help of the Spotify API and a Java Wrapper for the API. I am trying to grab a Route Parameter from the RouteLink that navigates to the current page, and use that String parameter to help me display the information I need.</p>\n<p>The page with the RouterLink has a for-loop that loops through a search result of various songs and then provides a link for each song with a different route parameter of the Spotify Track ID.</p>\n<pre><code>RouterLink songPageLink = new RouterLink(&quot;Song Details&quot;, songDescription.class, new RouteParameters(&quot;trackID&quot;, track.getId()));\n</code></pre>\n<p>This is the code for the page I am working on:</p>\n<pre><code>package trackour.trackour.views.songDescription;\n\nimport org.springframework.stereotype.Component;\n\nimport com.vaadin.flow.component.html.H1;\nimport com.vaadin.flow.component.html.H2;\nimport com.vaadin.flow.component.html.Image;\nimport com.vaadin.flow.component.html.Paragraph;\nimport com.vaadin.flow.component.orderedlayout.VerticalLayout;\nimport com.vaadin.flow.router.BeforeEnterEvent;\nimport com.vaadin.flow.router.BeforeEnterObserver;\nimport com.vaadin.flow.router.PageTitle;\nimport com.vaadin.flow.router.Route;\nimport com.vaadin.flow.server.auth.AnonymousAllowed;\n\nimport trackour.trackour.views.api.APIController;\n\n@Route(&quot;songDescription/:trackID?&quot;)\n@PageTitle(&quot;Description&quot;)\n@AnonymousAllowed\n@Component\npublic class songDescription extends VerticalLayout implements BeforeEnterObserver {\n\n    private String trackID;\n\n    public songDescription() {\n\n        H1 songTitle = new H1(&quot;SONG NAME&quot;);\n        H2 songArtist = new H2(&quot;SONG ARTIST&quot;);\n        Image albumCover = new Image();\n\n        Paragraph acousticnessDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph danceabilityDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph energyDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph instrumentalnessDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph keyDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph livenessDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph loudnessDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph modeDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph tempoDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph timeSignatureDetail = new Paragraph(&quot;VALUE&quot;);\n        Paragraph valenceDetail = new Paragraph(&quot;VALUE&quot;);\n        \n        add(albumCover, songTitle, songArtist, acousticnessDetail, danceabilityDetail, \n            energyDetail, instrumentalnessDetail, keyDetail, livenessDetail, loudnessDetail, \n            modeDetail, tempoDetail, timeSignatureDetail, valenceDetail);\n    }\n\n    @Override\n    public void beforeEnter(BeforeEnterEvent event) {\n        trackID = event.getRouteParameters().get(&quot;trackID&quot;).orElseThrow();\n    }\n}\n</code></pre>\n<p>The code works fine the way I have provided it, but once I try to use the <code>trackID</code> variable, I get different Spring Bean exceptions.</p>\n<p>Here's an example of how I want to use the Route Parameter:</p>\n<pre><code>H1 songTitle = new H1(APIController.getTrackName(trackID));\n</code></pre>\n<p>Once I do that, I get given this error:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'songDescription' defined in file [C:\\Users\\gohar\\OneDrive\\SFU\\CMPT276\\trackour\\target\\classes\\trackour\\trackour\\views\\songDescription\\songDescription.class]: Failed to instantiate [trackour.trackour.views.songDescription.songDescription]: Constructor threw exception\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1314) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1199) ~[spring-beans-6.0.10.jar:6.0.10]        \n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941) ~[spring-context-6.0.10.jar:6.0.10]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.10.jar:6.0.10]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.1.jar:3.1.1]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.1.jar:3.1.1]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.1.jar:3.1.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.1.jar:3.1.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.1.jar:3.1.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.1.jar:3.1.1]\n        at trackour.trackour.Application.main(Application.java:26) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.1.1.jar:3.1.1]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [trackour.trackour.views.songDescription.songDescription]: Constructor threw exception\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:224) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-6.0.10.jar:6.0.10]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1308) ~[spring-beans-6.0.10.jar:6.0.10]\n        ... 22 common frames omitted\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;String.length()&quot; because &quot;replacement&quot; is null\n        at java.base/java.util.regex.Matcher.appendExpandedReplacement(Matcher.java:1014) ~[na:na]\n        at java.base/java.util.regex.Matcher.appendReplacement(Matcher.java:997) ~[na:na]        \n        at java.base/java.util.regex.Matcher.replaceAll(Matcher.java:1181) ~[na:na]\n        at java.base/java.lang.String.replaceAll(String.java:2940) ~[na:na]\n        at se.michaelthelin.spotify.requests.AbstractRequest$Builder.setPath(AbstractRequest.java:244) ~[spotify-web-api-java-8.0.0.jar:na]\n        at se.michaelthelin.spotify.requests.data.tracks.GetTrackRequest$Builder.build(GetTrackRequest.java:89) ~[spotify-web-api-java-8.0.0.jar:na]\n        at trackour.trackour.views.api.APIController.getTrackName(APIController.java:300) ~[classes/:na]\n        at trackour.trackour.views.songDescription.songDescription.&lt;init&gt;(songDescription.java:28) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]\n        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]\n        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]    \n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:198) ~[spring-beans-6.0.10.jar:6.0.10]\n        ... 24 common frames omitted\n</code></pre>\n"},{"tags":["java","android","android-studio","android-mediaplayer"],"comments":[{"owner":{"account_id":22580507,"reputation":821,"user_id":16765223,"display_name":"M DEV"},"score":0,"creation_date":1690283943,"post_id":76755077,"comment_id":135328790,"body_markdown":"If you add the code of that exception then anything can be possible to guess.","body":"If you add the code of that exception then anything can be possible to guess."},{"owner":{"account_id":19551491,"reputation":61,"user_id":14306991,"display_name":"Dev Ashish Sahu"},"score":0,"creation_date":1690524110,"post_id":76755077,"comment_id":135368481,"body_markdown":"I edited the question and added my code","body":"I edited the question and added my code"}],"owner":{"account_id":19551491,"reputation":61,"user_id":14306991,"display_name":"Dev Ashish Sahu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690524067,"creation_date":1690205909,"question_id":76755077,"body_markdown":"I am continuously getting Crash report from Android TV version 9, It&#39;s  difficult for me to troubleshoot this because I&#39;m getting this via a crash report from someone else&#39;s android tv, It is working fine in all other devices where I tested.\r\nAlso I didn&#39;t where for which scree or which code is crashing. It stated the MediaPlayer file which is android&#39;s own code.\r\n\r\n    java.lang.NullPointerException: Attempt to invoke virtual method &#39;boolean java.lang.String.contains(java.lang.CharSequence)&#39; on a null object reference\r\n    android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:3533)\r\n    android.os.Handler.dispatchMessage(Handler.java:106)\r\n    android.os.Looper.loop(Looper.java:193)\r\n    android.app.ActivityThread.main(ActivityThread.java:6670)\r\n    java.lang.reflect.Method.invoke(Method.java:0)\r\n    com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\r\n\r\nBelow is the code for my splashscreen where this crash came when started the app \r\n```public class SplashScreen extends AppCompatActivity implements PartnerPage, PermissionInterface, MinAppVAPICBInterface , CopyDatabaseCompleteListener, CallBackInterface {\r\n\r\n    private static final String TAG = &quot;SplashScreen &quot;;\r\n    private SharedPreferences pref;\r\n    private boolean finishActivity;\r\n    private VideoViewCustom videoView;\r\n    private int playVideoFlag = 0;\r\n    private CheckNetwork chNetwork;\r\n    private Context context;\r\n    private SharedPreferences preferences;\r\n    private String partnerPath = &quot;&quot;;\r\n    private PermissionInterface permissionInterface;\r\n    private Activity activity;\r\n    final public static int APN_SETTINGS = 101;\r\n    private static final int PERMISSION_REQUEST_CODE = 1;\r\n\r\n    String folder = &quot;&quot;;\r\n    int codeLoginClass = 3;\r\n    int codeLoginStudent = 15;\r\n    int codeLoginTeacher = 14;\r\n    int setCode;\r\n    TrackingDbHelper trackDbHelper;\r\n    private MyCLTPathReceiver reMyCltPathReceiver;\r\n    private MyCLTVIdeoPathReciver myCLTVideoReceiver;\r\n    private IntentFilter filter;\r\n    private IntentFilter filter1;\r\n    String pathOfCLT = &quot;&quot;;\r\n    String pathOfCLTVideo = &quot;&quot;;\r\n    final Handler handler = new Handler();\r\n    final int delay = 15000; \r\n    private Runnable runnable;\r\n\r\n    List&lt;String&gt; DBPaths = new ArrayList&lt;String&gt;();\r\n    String Path1 = &quot;/CLT.sqlite&quot;;\r\n    String Path2 = &quot;/Master.sqlite&quot;;\r\n\r\n    private double locationRequestLatitude = 0.0;\r\n    private double locationRequestLongitude = 0.0;\r\n    private FirebaseAnalytics mFirebaseAnalytics;\r\n    private FirebaseCrashlytics firebaseCrashlytics;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.splash_screen);\r\n        mFirebaseAnalytics = FirebaseAnalytics.getInstance(this);\r\n        firebaseCrashlytics = FirebaseCrashlytics.getInstance();\r\n\r\n        setCode = codeLoginClass;\r\n        context = this;\r\n        activity = this;\r\n        permissionInterface = SplashScreen.this;\r\n        videoView = (VideoViewCustom) findViewById(R.id.videoClip);\r\n        chNetwork = new CheckNetwork(this);\r\n        preferences = PreferenceManager.getDefaultSharedPreferences(SplashScreen.this);\r\n        trackDbHelper = new TrackingDbHelper(this);\r\n\r\n\r\n        pref = getSharedPreferences(getString(R.string.code), Context.MODE_PRIVATE);\r\n\r\n        reMyCltPathReceiver = new SplashScreen.MyCLTPathReceiver();\r\n        myCLTVideoReceiver = new SplashScreen.MyCLTVIdeoPathReciver();\r\n        filter = new IntentFilter(&quot;CLTPATH&quot;);\r\n        filter1 = new IntentFilter(&quot;CLTVIDEOPATH&quot;);\r\n        checkPermissions();\r\n    }\r\n\r\n\r\n    @SuppressLint(&quot;HardwareIds&quot;)\r\n    public void displaySplashScreen() {\r\n        VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n  displaySplashScreen()&quot; );\r\n        CheckDateNChange checkDateNChange = new CheckDateNChange(this);\r\n        checkDateNChange.setTime();\r\n        if (&quot;&quot;.equals(preferences.getString(Constants.PREFS_CLT_VIDEOS_PATH, &quot;&quot;))) {\r\n            Log.d(&quot;VIDLocation&quot;,&quot;0 path &quot;);\r\n            new CLTVideosPath(getApplicationContext(), SplashScreen.this, false).execute(&quot; &quot;);\r\n        }\r\n        if (&quot;&quot;.equals(preferences.getString(Constants.PREFS_CLT_PATH, &quot;&quot;))) {\r\n            new CLTPath(context, SplashScreen.this, false).execute(&quot; &quot;);\r\n\r\n        }\r\n        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n        if (ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {\r\n            return ;\r\n        }\r\n        String imei;\r\n        if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n            imei = Settings.Secure.getString(context.getContentResolver(),Settings.Secure.ANDROID_ID);\r\n        }else {\r\n\r\n            if (tm.getDeviceId() != null) {\r\n                imei = tm.getDeviceId();\r\n            } else {\r\n                imei = Settings.Secure.getString(\r\n                        context.getContentResolver(),\r\n                        Settings.Secure.ANDROID_ID);\r\n            }\r\n        }\r\n        Log.d(TAG,&quot;Android ID: &quot; + Settings.Secure.getString(getApplicationContext().getContentResolver(), Settings.Secure.ANDROID_ID));\r\n        Log.d(TAG,&quot;IMEI ID: &quot; + imei);\r\n        SetPreference.setDeviceImeiId(SplashScreen.this, Settings.Secure.getString(getApplicationContext().getContentResolver(), Settings.Secure.ANDROID_ID), imei);\r\n\r\n        if (getIntent() != null) {\r\n            finishActivity = getIntent().getBooleanExtra(Constants.FINISH_ACTIVITY, false);\r\n            playVideoFlag = getIntent().getIntExtra(Constants.PLAY_VIDEO, 0);\r\n            Logger.logD(&quot;playVideo&quot;, &quot;playVideo--&quot; + playVideoFlag);\r\n        }\r\n        checkNcallLoginTask();\r\n        Logger.logD(&quot;finishActivity&quot;, &quot;finishActivity--&quot; + finishActivity);\r\n        Utilities.appVersionAtBottomOfScreen(this, this, pref.getString(Constants.ANDROID_DEVICE_ID, &quot;&quot;));\r\n\r\n       finishOrlaunch();\r\n    }\r\n\r\n    private void finishOrlaunch() {\r\n        if (finishActivity)\r\n            finish();\r\n        if (pref.getBoolean(PrefUtils.USER_LOGIN, false)) {\r\n            appLaunchedNew();\r\n            displayVideo();\r\n\r\n        } else {\r\n            playVideo();\r\n        }\r\n    }\r\n\r\n    private void checkNcallLoginTask() {\r\n        try {\r\n            MinAppVAPI.getMinAppVersion(this, Settings.Secure.getString(getContentResolver(), &quot;android_id&quot;), this);\r\n            if (chNetwork.checkNetwork() &amp;&amp; !&quot;&quot;.equals(pref.getString(&quot;ValiedLicence&quot;, &quot;&quot;))) {\r\n\r\n                SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\r\n                Calendar c = Calendar.getInstance();\r\n                Logger.logD(TAG, &quot;Current time =&gt; &quot; + c.getTime());\r\n\r\n                SimpleDateFormat df = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\r\n                String str1 = df.format(c.getTime());\r\n                Date date1 = formatter.parse(str1);\r\n                SharedPreferences.Editor editor = preferences.edit();\r\n                editor.putInt(&quot;DBValue&quot;, 2);\r\n                editor.apply();\r\n                String str2 = pref.getString(&quot;ValiedLicence&quot;, &quot;&quot;);\r\n                Date date2 = formatter.parse(str2);\r\n                if (date1.compareTo(date2) &lt; 0 &amp;&amp; pref.getBoolean(&quot;loginCall&quot;, true)) {\r\n                    SharedPreferences.Editor editors = preferences.edit();\r\n                    editors.putBoolean(&quot;LicenseCheck&quot;, true);\r\n                    editors.apply();\r\n                    org.mahiti.clt.survey.utils.Logger.logV(TAG, &quot;the current date is&quot; + date1);\r\n                    org.mahiti.clt.survey.utils.Logger.logV(TAG, &quot;the current date is&quot; + date2);\r\n                    org.mahiti.clt.survey.utils.Logger.logV(TAG, &quot;the logincall date is&quot; + pref.getBoolean(&quot;loginCall&quot;, true));\r\n                    new LoginAsyncTask(SplashScreen.this, SplashScreen.this, SplashScreen.this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);\r\n                } else {\r\n                    Logger.logV(TAG, &quot;the licence already called&quot;);\r\n                }\r\n            } else {\r\n                SharedPreferences.Editor editor = preferences.edit();\r\n                editor.putInt(&quot;DBValue&quot;, 1);\r\n                editor.apply();\r\n                new LoginAsyncTask(SplashScreen.this, SplashScreen.this, SplashScreen.this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);\r\n\r\n            }\r\n        } catch (ParseException e1) {\r\n            Logger.logE(TAG, &quot;the error in splash is&quot;, e1);\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    public void partnerPage(String path) {\r\n        partnerPath = path;\r\n        SharedPreferences.Editor editor = preferences.edit();\r\n        editor.putString(Constants.PREFS_PARTNER, partnerPath);\r\n        editor.apply();\r\n    }\r\n\r\n    public void checkPermissions() {\r\n        if (!PermissionClass.checkPermission(this)) {\r\n            PermissionClass.requestPermission(this, permissionInterface);\r\n            Logger.logD(&quot;Permission Granted&quot;, &quot;Permission Granted&quot;);\r\n        }else{\r\n            displaySplashScreen();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean granted(boolean value) {\r\n        if (value) {\r\n            Logger.logV(TAG, &quot;the retured value is........&quot; + value);\r\n            SharedPreferences.Editor editor = preferences.edit();\r\n            editor.putBoolean(&quot;Grant&quot;, true);\r\n            editor.apply();\r\n            displaySplashScreen();\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n\r\n    public void appLaunched() {\r\n        TrackingDbHelper helper = new TrackingDbHelper(this);\r\n        LaunchApp tracker = new LaunchApp();\r\n        TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);\r\n        String imei = &quot;&quot;;\r\n        if (mTelephonyMgr == null || ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED)\r\n            return;\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            imei = mTelephonyMgr.getDeviceId(0);\r\n        }\r\n        tracker.setDeviceId(pref.getString(Constants.ANDROID_DEVICE_ID, &quot;&quot;));\r\n        tracker.setImei(imei);\r\n        GetLocations getLocations = new GetLocations(this, false);\r\n        tracker.setLatitude(getLocations.getLat());\r\n        tracker.setLongitude(getLocations.getLon());\r\n        Log.d(TAG, &quot;appLaunched: Latitude&quot;);\r\n        tracker.setLaunchTime(CalendarUtils.getCurrentDate());\r\n        tracker.setCloseTime(&quot;0&quot;);\r\n        long id = helper.insertAppLaunchTracker(tracker);\r\n\r\n        SharedPreferences.Editor editor = pref.edit();\r\n        editor.putLong(PrefUtils.PREFAPPLAUNCHID, id);\r\n        editor.apply();\r\n    }\r\n\r\n    @SuppressLint(&quot;HardwareIds&quot;)\r\n    public void appLaunchedNew() {\r\n\r\n        TrackingDbHelper helper = new TrackingDbHelper(this);\r\n        LaunchApp tracker = new LaunchApp();\r\n\r\n        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\r\n        if (ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {\r\n            return ;\r\n        }\r\n        String imei;\r\n        if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n            imei = Settings.Secure.getString(context.getContentResolver(),Settings.Secure.ANDROID_ID);\r\n        }else {\r\n\r\n            if (tm.getDeviceId() != null) {\r\n                imei = tm.getDeviceId();\r\n            } else {\r\n                imei = Settings.Secure.getString(\r\n                        context.getContentResolver(),\r\n                        Settings.Secure.ANDROID_ID);\r\n            }\r\n        }\r\n\r\n        tracker.setDeviceId(pref.getString(Constants.ANDROID_DEVICE_ID, &quot;&quot;));\r\n        tracker.setImei(imei);\r\n        GetLocations getLocations = new GetLocations(this, false);\r\n        tracker.setLatitude(getLocations.getLat());\r\n        tracker.setLongitude(getLocations.getLon());\r\n        Log.d(TAG, &quot;appLaunchedNew: Latitude  &quot;+getLocations.getLat());\r\n        Log.d(TAG, &quot;appLaunchedNew: Longitude &quot;+getLocations.getLon());\r\n        getCurrentLocation();\r\n\r\n        tracker.setLaunchTime(CalendarUtils.getCurrentDate());\r\n        tracker.setCloseTime(&quot;0&quot;);\r\n        long id = helper.insertAppLaunchTracker(tracker);\r\n\r\n        AnalyticsDbHelper analyticsDbHelper = new AnalyticsDbHelper(this);\r\n        Log.d(TAG, &quot;appLaunchedNew: LaunchTime &quot;+tracker.getLaunchTime());\r\n        Log.d(TAG, &quot;appLaunchedNew: Imei &quot;+tracker.getImei());\r\n        analyticsDbHelper.setSPLaunchTime(this, tracker.getLaunchTime());\r\n        analyticsDbHelper.setSPImei(this, tracker.getImei());\r\n\r\n        SharedPreferences.Editor editor = pref.edit();\r\n        editor.putLong(PrefUtils.PREFAPPLAUNCHID, id);\r\n        editor.apply();\r\n\r\n    }\r\n\r\n    private void getCurrentLocation() {\r\n\r\n        final LocationRequest locationRequest = new LocationRequest();\r\n        locationRequest.setInterval(10000);\r\n        locationRequest.setFastestInterval(3000);\r\n        locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\r\n        Log.d(TAG, &quot;getCurrentLocation: 01&quot;);\r\n\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\r\n            Log.d(TAG, &quot;getCurrentLocation: Inside If&quot;);\r\n            return;\r\n        }\r\n        Log.d(TAG, &quot;getCurrentLocation: 02&quot;);\r\n        LocationServices.getFusedLocationProviderClient(this).requestLocationUpdates(locationRequest, new LocationCallback() {\r\n            @Override\r\n            public void onLocationResult(LocationResult locationResult) {\r\n                super.onLocationResult(locationResult);\r\n                Log.d(TAG, &quot;getCurrentLocation: Inside Result &quot;+locationResult);\r\n                LocationServices.getFusedLocationProviderClient(getApplicationContext()).removeLocationUpdates(this);\r\n                if (locationResult != null &amp;&amp; locationResult.getLocations().size() &gt; 0) {\r\n                    int latestLocationIndex = locationResult.getLocations().size() - 1;\r\n                    double latitude = locationResult.getLocations().get(latestLocationIndex).getLatitude();\r\n                    double longitude = locationResult.getLocations().get(latestLocationIndex).getLongitude();\r\n                    Log.d(TAG, &quot;getCurrentLocation: Latitude  &quot;+latitude);\r\n                    Log.d(TAG, &quot;getCurrentLocation: Longitude &quot;+longitude);\r\n                }\r\n            }\r\n        }, Looper.getMainLooper());\r\n    }\r\n\r\n    private void checkLocationPermission() {\r\n        if(ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.ACCESS_FINE_LOCATION)!= PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION},1);\r\n        }\r\n        else {\r\n            getCurrentLocation();\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    public void displayVideo() {\r\n        try {\r\n            String path = &quot;android.resource://&quot; + getPackageName() + &quot;/&quot; + R.raw.final_logo_animation;\r\n            Uri uri = Uri.parse(path);\r\n            MediaController mediaController = new MediaController(this, false);\r\n            mediaController.setVisibility(View.INVISIBLE);\r\n            mediaController.setAnchorView(videoView);\r\n            ViewGroup.LayoutParams rlParams = videoView.getLayoutParams();\r\n            DisplayMetrics displaymetrics = new DisplayMetrics();\r\n            getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);\r\n\r\n            videoView.setVideoURI(uri);\r\n            videoView.setDimensions(displaymetrics.widthPixels,rlParams.height);\r\n            videoView.getHolder().setFixedSize(displaymetrics.widthPixels,rlParams.height);\r\n\r\n            videoView.requestFocus();\r\n            videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\r\n                public void onPrepared(MediaPlayer media) {\r\n                    media.start();\r\n                }\r\n            });\r\n        } catch (Exception e) {\r\n            Logger.logE(Constants.PROJECT, &quot;video play-&quot;, e);\r\n        }\r\n        videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\r\n            @Override\r\n            public void onCompletion(MediaPlayer mp) {\r\n                launchMainScreen();\r\n            }\r\n        });\r\n\r\n        videoView.setOnErrorListener(new MediaPlayer.OnErrorListener() {\r\n            @Override\r\n            public boolean onError(MediaPlayer mp, int what, int extra) {\r\n                if(what==100){\r\n                    try {\r\n                        String path = &quot;android.resource://&quot; + getPackageName() + &quot;/&quot; + R.raw.final_logo_animation;\r\n                        Uri uri = Uri.parse(path);\r\n                        MediaController mediaController = new MediaController(SplashScreen.this, false);\r\n                        mediaController.setVisibility(View.INVISIBLE);\r\n                        mediaController.setAnchorView(videoView);\r\n\r\n                        ViewGroup.LayoutParams rlParams = videoView.getLayoutParams();\r\n                        DisplayMetrics displaymetrics = new DisplayMetrics();\r\n                        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);\r\n\r\n                        videoView.setVideoURI(uri);\r\n                        videoView.setDimensions(displaymetrics.widthPixels,rlParams.height);\r\n                        videoView.getHolder().setFixedSize(displaymetrics.widthPixels,rlParams.height);\r\n                        if (videoView!=null) {\r\n                            videoView.start();\r\n                        }\r\n                    } catch (Exception e) {\r\n                        Logger.logE(Constants.PROJECT, &quot;video play-&quot;, e);\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void launchMainScreen() {\r\n        VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n SplashScreen - LaunchmainScreen&quot;  );\r\n        DBDownloadSync();\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\r\n        switch (requestCode) {\r\n            case APN_SETTINGS:\r\n                checkAPNSettings(grantResults);\r\n                break;\r\n            case PERMISSION_REQUEST_CODE:\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                    org.mahiti.clt.utils.Logger.logD(TAG, &quot;Permission granted!&quot;);\r\n                    displaySplashScreen();\r\n                }\r\n                break;\r\n            default:\r\n                super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        }\r\n    }\r\n\r\n    private void checkAPNSettings(int[] grantResults) {\r\n        if (grantResults.length &gt; 0) {\r\n            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\r\n                checkAndroidVersion();\r\n            } else {\r\n                org.mahiti.clt.utils.Logger.logD(TAG, &quot;SEND_SMS Denied&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n    public void checkAndroidVersion() {\r\n        int checkCallPhonePermission = ContextCompat.checkSelfPermission(this, WRITE_APN_SETTINGS);\r\n        if (checkCallPhonePermission != PackageManager.PERMISSION_GRANTED) {\r\n            ActivityCompat.requestPermissions(this, new String[]{WRITE_APN_SETTINGS}, APN_SETTINGS);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onResume() {\r\n        super.onResume();\r\n        if (pref.getBoolean(PrefUtils.PREFBACKFLOW, false)) {\r\n            SharedPreferences.Editor editor = pref.edit();\r\n            editor.putBoolean(PrefUtils.PREFBACKFLOW, false);\r\n            editor.apply();\r\n            finish();\r\n        }\r\n        registerReceiver(reMyCltPathReceiver, filter);\r\n        registerReceiver(myCLTVideoReceiver, filter1);\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        handler.removeCallbacks(runnable);\r\n        TrackingDbHelper helper = new TrackingDbHelper(this);\r\n        helper.updateLaunchTracker(pref.getLong(PrefUtils.PREFAPPLAUNCHID, 0), CalendarUtils.getCurrentDate());\r\n        CallLogOut.callIntentSign(trackDbHelper, pref, setCode, this);\r\n        finish();\r\n\r\n    }\r\n\r\n\r\n\r\n    public class MyCLTPathReceiver extends BroadcastReceiver {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            pathOfCLT = preferences.getString(Constants.PREFS_CLT_PATH, &quot;&quot;);\r\n        }\r\n    }\r\n\r\n    public class MyCLTVIdeoPathReciver extends BroadcastReceiver {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            pathOfCLTVideo = preferences.getString(Constants.PREFS_CLT_VIDEOS_PATH, &quot;&quot;);\r\n\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        unregisterReceiver(reMyCltPathReceiver);\r\n        unregisterReceiver(myCLTVideoReceiver);\r\n    }\r\n\r\n    public void goTOLogin(String loginMode) {\r\n        LoginCheck.loginCheck(this, setCode, 2);\r\n        VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n splashscreen gotToLogin mode : &quot;+loginMode  );\r\n        if (&quot;&quot;.equals(pref.getString(&quot;subjects&quot;, &quot;&quot;))) {\r\n            ToastUtils.displayToast(&quot;Please check the network to continue the application,get the license and proceed&quot;, this);\r\n            return;\r\n        }\r\n        switch (loginMode) {\r\n            case &quot;classRoom&quot;:\r\n                pref.edit().putInt(Constants.PREFS_LOGIN_MODE, 1).apply();\r\n                pref.edit().putLong(PrefUtils.PREFUSERID, codeLoginClass).apply();\r\n                break;\r\n            case &quot;teacher&quot;:\r\n                pref.edit().putInt(Constants.PREFS_LOGIN_MODE, 2).apply();\r\n                pref.edit().putLong(PrefUtils.PREFUSERID, codeLoginTeacher).apply();\r\n                break;\r\n            case &quot;student&quot;:\r\n                pref.edit().putInt(Constants.PREFS_LOGIN_MODE, 3).apply();\r\n                pref.edit().putLong(PrefUtils.PREFUSERID, codeLoginStudent).apply();\r\n                break;\r\n            default:\r\n                break;\r\n\r\n\r\n        }\r\n            if (&quot;&quot;.equals(preferences.getString(Constants.PREFS_PARTNER, &quot;&quot;))) {\r\n                appLaunchedNew();\r\n                VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n Moving to LangActivity&quot;  );\r\n                Intent i = new Intent(this, LanguageActivity.class);\r\n                i.putExtra(&quot;mode&quot;, loginMode);\r\n                startActivity(i);\r\n                finish();\r\n            } else {\r\n                partnerPath = preferences.getString(Constants.PREFS_PARTNER, &quot;&quot;);\r\n                VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n Moving to PartnerActivity &quot;  );\r\n                Intent i = new Intent(SplashScreen.this, PartnerActivity.class);\r\n                i.putExtra(&quot;path&quot;, partnerPath);\r\n                startActivity(i);\r\n                finish();\r\n            }\r\n    }\r\n\r\n\r\n    private void playVideo() {\r\n        Logger.logD(TAG, &quot;playVideo()--&quot; + playVideoFlag);\r\n        if (playVideoFlag == 1)\r\n            launchMainScreen();\r\n        else if (playVideoFlag == 0)\r\n            displayVideo();\r\n    }\r\n\r\n    @Override\r\n    public void minAppVToUpdate(String response) {\r\n        Logger.logD(TAG, &quot; min app v response in splash-xscreen :&quot;+response);\r\n    }\r\n\r\n    @Override\r\n    public void onCopyDatabaseComplete(boolean isDbCopyCompleted, String message) {\r\n        if (isDbCopyCompleted)\r\n            goTOLogin(&quot;classRoom&quot;);\r\n        else\r\n            showAlert(message);\r\n    }\r\n\r\n    private boolean  showAlert(String message) {\r\n        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);\r\n        alertDialogBuilder.setTitle(message);\r\n        alertDialogBuilder\r\n                .setMessage(&quot;Click yes to exit!&quot;)\r\n                .setCancelable(false)\r\n                .setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\r\n                    public void onClick(DialogInterface dialog, int id) {\r\n                        activity.finish();\r\n\r\n                    }\r\n                });\r\n        AlertDialog alertDialog = alertDialogBuilder.create();\r\n        alertDialog.show();\r\n        return false;\r\n    }\r\n\r\n    private void DBDownloadSync(){\r\n        SharedPreferences preferences = this.getSharedPreferences(this.getString(R.string.code), Context.MODE_PRIVATE);\r\n        String path_new = &quot;&quot;;\r\n        String VPathNew = preferences.getString(Constants.PREFS_CLT_VIDEOS_PATH_NEW, &quot;&quot;);\r\n        String VPathOld = preferences.getString(Constants.PREFS_CLT_VIDEOS_PATH, &quot;&quot;);\r\n        Log.d(TAG, &quot;V NEW PATH &quot; + VPathNew);\r\n        int flagId = 0;\r\n        if (VPathNew.equals(&quot;&quot;)){\r\n            SharedPreferences.Editor editor = preferences.edit();\r\n            File[] listExternalDirs = ContextCompat.getExternalFilesDirs(this, null);\r\n            if (listExternalDirs.length &gt; 1){\r\n                if (listExternalDirs[0].getAbsolutePath().toLowerCase().contains(&quot;/storage/emulated/0&quot;)){\r\n                    path_new = listExternalDirs[1].getAbsolutePath();\r\n                    flagId = 1;\r\n                } else{\r\n                    path_new = listExternalDirs[0].getAbsolutePath();\r\n                    flagId = 2;\r\n                }\r\n            } else {\r\n                if (!VPathOld.equals(&quot;&quot;)) {\r\n                    path_new = VPathOld.replace(&quot;/CLTVIDEOS&quot;, &quot;&quot;) + &quot;/Android/data/org.mahiti.clt/files&quot;;\r\n                    flagId = 3;\r\n                } else {\r\n                    path_new = listExternalDirs[0].getAbsolutePath();\r\n                    flagId = 4;\r\n                }\r\n            }\r\n            path_new = path_new + &quot;/CLTVIDEOS&quot;;\r\n            Log.d(TAG, &quot;NEW PATH 0 &quot; + path_new + &quot; &quot; + flagId);\r\n            editor.putString(Constants.PREFS_CLT_VIDEOS_PATH_NEW, path_new);\r\n            Log.d(&quot;VIDLocation&quot;,&quot;4 path &quot; + path_new);\r\n            editor.apply();\r\n        } else {\r\n            path_new = VPathNew;\r\n            Log.d(TAG, &quot;NEW PATH &quot; + path_new + &quot; 5&quot;);\r\n        }\r\n\r\n\r\n        File DBSavingPath1 = new File(path_new + Path1);\r\n        File DBSavingPath2 = new File(path_new + Path2);\r\n        if (!DBSavingPath1.exists()){\r\n            Log.d(TAG, &quot;DB PATH1&quot;);\r\n            DBPaths.add(Path1);\r\n        } else {\r\n            Log.d(TAG, &quot;DB PATH1 EXISTS&quot;);\r\n        }\r\n        if (!DBSavingPath2.exists()){\r\n            Log.d(TAG, &quot;DB PATH2&quot;);\r\n            DBPaths.add(Path2);\r\n        } else {\r\n            Log.d(TAG, &quot;DB PATH2 EXISTS&quot;);\r\n        }\r\n        if (DBPaths.size() &gt; 0){\r\n            CheckNetwork chNetwork = new CheckNetwork(this);\r\n            if (chNetwork.checkNetwork())\r\n                new VideoDownloadAsyncTask(this, Constants.DBMAINURL, preferences, DBPaths).execute();\r\n            else\r\n                new CopyDBFilesAsyncTask(preferences, folder, this, SplashScreen.this, 1).execute();\r\n        } else {\r\n            Log.d(TAG, &quot;DB else&quot;);\r\n            new CopyDBFilesAsyncTask(preferences, folder, this, SplashScreen.this, 2).execute(); \r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void callback(String str, int val) {\r\n        Log.d(TAG, &quot;DB callback&quot;);\r\n        new CopyDBFilesAsyncTask(preferences, folder, this, SplashScreen.this, 2).execute(); \r\n\r\n    }\r\n}\r\n```","title":"MediaPlayer NullPointerException on Android TV , Version 9","body":"<p>I am continuously getting Crash report from Android TV version 9, It's  difficult for me to troubleshoot this because I'm getting this via a crash report from someone else's android tv, It is working fine in all other devices where I tested.\nAlso I didn't where for which scree or which code is crashing. It stated the MediaPlayer file which is android's own code.</p>\n<pre><code>java.lang.NullPointerException: Attempt to invoke virtual method 'boolean java.lang.String.contains(java.lang.CharSequence)' on a null object reference\nandroid.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:3533)\nandroid.os.Handler.dispatchMessage(Handler.java:106)\nandroid.os.Looper.loop(Looper.java:193)\nandroid.app.ActivityThread.main(ActivityThread.java:6670)\njava.lang.reflect.Method.invoke(Method.java:0)\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\ncom.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n</code></pre>\n<p>Below is the code for my splashscreen where this crash came when started the app</p>\n<pre><code>\n    private static final String TAG = &quot;SplashScreen &quot;;\n    private SharedPreferences pref;\n    private boolean finishActivity;\n    private VideoViewCustom videoView;\n    private int playVideoFlag = 0;\n    private CheckNetwork chNetwork;\n    private Context context;\n    private SharedPreferences preferences;\n    private String partnerPath = &quot;&quot;;\n    private PermissionInterface permissionInterface;\n    private Activity activity;\n    final public static int APN_SETTINGS = 101;\n    private static final int PERMISSION_REQUEST_CODE = 1;\n\n    String folder = &quot;&quot;;\n    int codeLoginClass = 3;\n    int codeLoginStudent = 15;\n    int codeLoginTeacher = 14;\n    int setCode;\n    TrackingDbHelper trackDbHelper;\n    private MyCLTPathReceiver reMyCltPathReceiver;\n    private MyCLTVIdeoPathReciver myCLTVideoReceiver;\n    private IntentFilter filter;\n    private IntentFilter filter1;\n    String pathOfCLT = &quot;&quot;;\n    String pathOfCLTVideo = &quot;&quot;;\n    final Handler handler = new Handler();\n    final int delay = 15000; \n    private Runnable runnable;\n\n    List&lt;String&gt; DBPaths = new ArrayList&lt;String&gt;();\n    String Path1 = &quot;/CLT.sqlite&quot;;\n    String Path2 = &quot;/Master.sqlite&quot;;\n\n    private double locationRequestLatitude = 0.0;\n    private double locationRequestLongitude = 0.0;\n    private FirebaseAnalytics mFirebaseAnalytics;\n    private FirebaseCrashlytics firebaseCrashlytics;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.splash_screen);\n        mFirebaseAnalytics = FirebaseAnalytics.getInstance(this);\n        firebaseCrashlytics = FirebaseCrashlytics.getInstance();\n\n        setCode = codeLoginClass;\n        context = this;\n        activity = this;\n        permissionInterface = SplashScreen.this;\n        videoView = (VideoViewCustom) findViewById(R.id.videoClip);\n        chNetwork = new CheckNetwork(this);\n        preferences = PreferenceManager.getDefaultSharedPreferences(SplashScreen.this);\n        trackDbHelper = new TrackingDbHelper(this);\n\n\n        pref = getSharedPreferences(getString(R.string.code), Context.MODE_PRIVATE);\n\n        reMyCltPathReceiver = new SplashScreen.MyCLTPathReceiver();\n        myCLTVideoReceiver = new SplashScreen.MyCLTVIdeoPathReciver();\n        filter = new IntentFilter(&quot;CLTPATH&quot;);\n        filter1 = new IntentFilter(&quot;CLTVIDEOPATH&quot;);\n        checkPermissions();\n    }\n\n\n    @SuppressLint(&quot;HardwareIds&quot;)\n    public void displaySplashScreen() {\n        VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n  displaySplashScreen()&quot; );\n        CheckDateNChange checkDateNChange = new CheckDateNChange(this);\n        checkDateNChange.setTime();\n        if (&quot;&quot;.equals(preferences.getString(Constants.PREFS_CLT_VIDEOS_PATH, &quot;&quot;))) {\n            Log.d(&quot;VIDLocation&quot;,&quot;0 path &quot;);\n            new CLTVideosPath(getApplicationContext(), SplashScreen.this, false).execute(&quot; &quot;);\n        }\n        if (&quot;&quot;.equals(preferences.getString(Constants.PREFS_CLT_PATH, &quot;&quot;))) {\n            new CLTPath(context, SplashScreen.this, false).execute(&quot; &quot;);\n\n        }\n        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\n        if (ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {\n            return ;\n        }\n        String imei;\n        if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            imei = Settings.Secure.getString(context.getContentResolver(),Settings.Secure.ANDROID_ID);\n        }else {\n\n            if (tm.getDeviceId() != null) {\n                imei = tm.getDeviceId();\n            } else {\n                imei = Settings.Secure.getString(\n                        context.getContentResolver(),\n                        Settings.Secure.ANDROID_ID);\n            }\n        }\n        Log.d(TAG,&quot;Android ID: &quot; + Settings.Secure.getString(getApplicationContext().getContentResolver(), Settings.Secure.ANDROID_ID));\n        Log.d(TAG,&quot;IMEI ID: &quot; + imei);\n        SetPreference.setDeviceImeiId(SplashScreen.this, Settings.Secure.getString(getApplicationContext().getContentResolver(), Settings.Secure.ANDROID_ID), imei);\n\n        if (getIntent() != null) {\n            finishActivity = getIntent().getBooleanExtra(Constants.FINISH_ACTIVITY, false);\n            playVideoFlag = getIntent().getIntExtra(Constants.PLAY_VIDEO, 0);\n            Logger.logD(&quot;playVideo&quot;, &quot;playVideo--&quot; + playVideoFlag);\n        }\n        checkNcallLoginTask();\n        Logger.logD(&quot;finishActivity&quot;, &quot;finishActivity--&quot; + finishActivity);\n        Utilities.appVersionAtBottomOfScreen(this, this, pref.getString(Constants.ANDROID_DEVICE_ID, &quot;&quot;));\n\n       finishOrlaunch();\n    }\n\n    private void finishOrlaunch() {\n        if (finishActivity)\n            finish();\n        if (pref.getBoolean(PrefUtils.USER_LOGIN, false)) {\n            appLaunchedNew();\n            displayVideo();\n\n        } else {\n            playVideo();\n        }\n    }\n\n    private void checkNcallLoginTask() {\n        try {\n            MinAppVAPI.getMinAppVersion(this, Settings.Secure.getString(getContentResolver(), &quot;android_id&quot;), this);\n            if (chNetwork.checkNetwork() &amp;&amp; !&quot;&quot;.equals(pref.getString(&quot;ValiedLicence&quot;, &quot;&quot;))) {\n\n                SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\n                Calendar c = Calendar.getInstance();\n                Logger.logD(TAG, &quot;Current time =&gt; &quot; + c.getTime());\n\n                SimpleDateFormat df = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\n                String str1 = df.format(c.getTime());\n                Date date1 = formatter.parse(str1);\n                SharedPreferences.Editor editor = preferences.edit();\n                editor.putInt(&quot;DBValue&quot;, 2);\n                editor.apply();\n                String str2 = pref.getString(&quot;ValiedLicence&quot;, &quot;&quot;);\n                Date date2 = formatter.parse(str2);\n                if (date1.compareTo(date2) &lt; 0 &amp;&amp; pref.getBoolean(&quot;loginCall&quot;, true)) {\n                    SharedPreferences.Editor editors = preferences.edit();\n                    editors.putBoolean(&quot;LicenseCheck&quot;, true);\n                    editors.apply();\n                    org.mahiti.clt.survey.utils.Logger.logV(TAG, &quot;the current date is&quot; + date1);\n                    org.mahiti.clt.survey.utils.Logger.logV(TAG, &quot;the current date is&quot; + date2);\n                    org.mahiti.clt.survey.utils.Logger.logV(TAG, &quot;the logincall date is&quot; + pref.getBoolean(&quot;loginCall&quot;, true));\n                    new LoginAsyncTask(SplashScreen.this, SplashScreen.this, SplashScreen.this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);\n                } else {\n                    Logger.logV(TAG, &quot;the licence already called&quot;);\n                }\n            } else {\n                SharedPreferences.Editor editor = preferences.edit();\n                editor.putInt(&quot;DBValue&quot;, 1);\n                editor.apply();\n                new LoginAsyncTask(SplashScreen.this, SplashScreen.this, SplashScreen.this).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);\n\n            }\n        } catch (ParseException e1) {\n            Logger.logE(TAG, &quot;the error in splash is&quot;, e1);\n        }\n    }\n\n\n    @Override\n    public void partnerPage(String path) {\n        partnerPath = path;\n        SharedPreferences.Editor editor = preferences.edit();\n        editor.putString(Constants.PREFS_PARTNER, partnerPath);\n        editor.apply();\n    }\n\n    public void checkPermissions() {\n        if (!PermissionClass.checkPermission(this)) {\n            PermissionClass.requestPermission(this, permissionInterface);\n            Logger.logD(&quot;Permission Granted&quot;, &quot;Permission Granted&quot;);\n        }else{\n            displaySplashScreen();\n        }\n\n    }\n\n\n    @Override\n    public boolean granted(boolean value) {\n        if (value) {\n            Logger.logV(TAG, &quot;the retured value is........&quot; + value);\n            SharedPreferences.Editor editor = preferences.edit();\n            editor.putBoolean(&quot;Grant&quot;, true);\n            editor.apply();\n            displaySplashScreen();\n        }\n        return false;\n    }\n\n\n\n    public void appLaunched() {\n        TrackingDbHelper helper = new TrackingDbHelper(this);\n        LaunchApp tracker = new LaunchApp();\n        TelephonyManager mTelephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);\n        String imei = &quot;&quot;;\n        if (mTelephonyMgr == null || ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED)\n            return;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            imei = mTelephonyMgr.getDeviceId(0);\n        }\n        tracker.setDeviceId(pref.getString(Constants.ANDROID_DEVICE_ID, &quot;&quot;));\n        tracker.setImei(imei);\n        GetLocations getLocations = new GetLocations(this, false);\n        tracker.setLatitude(getLocations.getLat());\n        tracker.setLongitude(getLocations.getLon());\n        Log.d(TAG, &quot;appLaunched: Latitude&quot;);\n        tracker.setLaunchTime(CalendarUtils.getCurrentDate());\n        tracker.setCloseTime(&quot;0&quot;);\n        long id = helper.insertAppLaunchTracker(tracker);\n\n        SharedPreferences.Editor editor = pref.edit();\n        editor.putLong(PrefUtils.PREFAPPLAUNCHID, id);\n        editor.apply();\n    }\n\n    @SuppressLint(&quot;HardwareIds&quot;)\n    public void appLaunchedNew() {\n\n        TrackingDbHelper helper = new TrackingDbHelper(this);\n        LaunchApp tracker = new LaunchApp();\n\n        TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);\n        if (ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {\n            return ;\n        }\n        String imei;\n        if (android.os.Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n            imei = Settings.Secure.getString(context.getContentResolver(),Settings.Secure.ANDROID_ID);\n        }else {\n\n            if (tm.getDeviceId() != null) {\n                imei = tm.getDeviceId();\n            } else {\n                imei = Settings.Secure.getString(\n                        context.getContentResolver(),\n                        Settings.Secure.ANDROID_ID);\n            }\n        }\n\n        tracker.setDeviceId(pref.getString(Constants.ANDROID_DEVICE_ID, &quot;&quot;));\n        tracker.setImei(imei);\n        GetLocations getLocations = new GetLocations(this, false);\n        tracker.setLatitude(getLocations.getLat());\n        tracker.setLongitude(getLocations.getLon());\n        Log.d(TAG, &quot;appLaunchedNew: Latitude  &quot;+getLocations.getLat());\n        Log.d(TAG, &quot;appLaunchedNew: Longitude &quot;+getLocations.getLon());\n        getCurrentLocation();\n\n        tracker.setLaunchTime(CalendarUtils.getCurrentDate());\n        tracker.setCloseTime(&quot;0&quot;);\n        long id = helper.insertAppLaunchTracker(tracker);\n\n        AnalyticsDbHelper analyticsDbHelper = new AnalyticsDbHelper(this);\n        Log.d(TAG, &quot;appLaunchedNew: LaunchTime &quot;+tracker.getLaunchTime());\n        Log.d(TAG, &quot;appLaunchedNew: Imei &quot;+tracker.getImei());\n        analyticsDbHelper.setSPLaunchTime(this, tracker.getLaunchTime());\n        analyticsDbHelper.setSPImei(this, tracker.getImei());\n\n        SharedPreferences.Editor editor = pref.edit();\n        editor.putLong(PrefUtils.PREFAPPLAUNCHID, id);\n        editor.apply();\n\n    }\n\n    private void getCurrentLocation() {\n\n        final LocationRequest locationRequest = new LocationRequest();\n        locationRequest.setInterval(10000);\n        locationRequest.setFastestInterval(3000);\n        locationRequest.setPriority(LocationRequest.PRIORITY_HIGH_ACCURACY);\n        Log.d(TAG, &quot;getCurrentLocation: 01&quot;);\n\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            Log.d(TAG, &quot;getCurrentLocation: Inside If&quot;);\n            return;\n        }\n        Log.d(TAG, &quot;getCurrentLocation: 02&quot;);\n        LocationServices.getFusedLocationProviderClient(this).requestLocationUpdates(locationRequest, new LocationCallback() {\n            @Override\n            public void onLocationResult(LocationResult locationResult) {\n                super.onLocationResult(locationResult);\n                Log.d(TAG, &quot;getCurrentLocation: Inside Result &quot;+locationResult);\n                LocationServices.getFusedLocationProviderClient(getApplicationContext()).removeLocationUpdates(this);\n                if (locationResult != null &amp;&amp; locationResult.getLocations().size() &gt; 0) {\n                    int latestLocationIndex = locationResult.getLocations().size() - 1;\n                    double latitude = locationResult.getLocations().get(latestLocationIndex).getLatitude();\n                    double longitude = locationResult.getLocations().get(latestLocationIndex).getLongitude();\n                    Log.d(TAG, &quot;getCurrentLocation: Latitude  &quot;+latitude);\n                    Log.d(TAG, &quot;getCurrentLocation: Longitude &quot;+longitude);\n                }\n            }\n        }, Looper.getMainLooper());\n    }\n\n    private void checkLocationPermission() {\n        if(ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.ACCESS_FINE_LOCATION)!= PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION},1);\n        }\n        else {\n            getCurrentLocation();\n        }\n\n    }\n\n\n\n    public void displayVideo() {\n        try {\n            String path = &quot;android.resource://&quot; + getPackageName() + &quot;/&quot; + R.raw.final_logo_animation;\n            Uri uri = Uri.parse(path);\n            MediaController mediaController = new MediaController(this, false);\n            mediaController.setVisibility(View.INVISIBLE);\n            mediaController.setAnchorView(videoView);\n            ViewGroup.LayoutParams rlParams = videoView.getLayoutParams();\n            DisplayMetrics displaymetrics = new DisplayMetrics();\n            getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);\n\n            videoView.setVideoURI(uri);\n            videoView.setDimensions(displaymetrics.widthPixels,rlParams.height);\n            videoView.getHolder().setFixedSize(displaymetrics.widthPixels,rlParams.height);\n\n            videoView.requestFocus();\n            videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {\n                public void onPrepared(MediaPlayer media) {\n                    media.start();\n                }\n            });\n        } catch (Exception e) {\n            Logger.logE(Constants.PROJECT, &quot;video play-&quot;, e);\n        }\n        videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n            @Override\n            public void onCompletion(MediaPlayer mp) {\n                launchMainScreen();\n            }\n        });\n\n        videoView.setOnErrorListener(new MediaPlayer.OnErrorListener() {\n            @Override\n            public boolean onError(MediaPlayer mp, int what, int extra) {\n                if(what==100){\n                    try {\n                        String path = &quot;android.resource://&quot; + getPackageName() + &quot;/&quot; + R.raw.final_logo_animation;\n                        Uri uri = Uri.parse(path);\n                        MediaController mediaController = new MediaController(SplashScreen.this, false);\n                        mediaController.setVisibility(View.INVISIBLE);\n                        mediaController.setAnchorView(videoView);\n\n                        ViewGroup.LayoutParams rlParams = videoView.getLayoutParams();\n                        DisplayMetrics displaymetrics = new DisplayMetrics();\n                        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);\n\n                        videoView.setVideoURI(uri);\n                        videoView.setDimensions(displaymetrics.widthPixels,rlParams.height);\n                        videoView.getHolder().setFixedSize(displaymetrics.widthPixels,rlParams.height);\n                        if (videoView!=null) {\n                            videoView.start();\n                        }\n                    } catch (Exception e) {\n                        Logger.logE(Constants.PROJECT, &quot;video play-&quot;, e);\n                    }\n                }\n                return true;\n            }\n        });\n\n    }\n\n    private void launchMainScreen() {\n        VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n SplashScreen - LaunchmainScreen&quot;  );\n        DBDownloadSync();\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {\n        switch (requestCode) {\n            case APN_SETTINGS:\n                checkAPNSettings(grantResults);\n                break;\n            case PERMISSION_REQUEST_CODE:\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                    org.mahiti.clt.utils.Logger.logD(TAG, &quot;Permission granted!&quot;);\n                    displaySplashScreen();\n                }\n                break;\n            default:\n                super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        }\n    }\n\n    private void checkAPNSettings(int[] grantResults) {\n        if (grantResults.length &gt; 0) {\n            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {\n                checkAndroidVersion();\n            } else {\n                org.mahiti.clt.utils.Logger.logD(TAG, &quot;SEND_SMS Denied&quot;);\n            }\n        }\n    }\n\n    public void checkAndroidVersion() {\n        int checkCallPhonePermission = ContextCompat.checkSelfPermission(this, WRITE_APN_SETTINGS);\n        if (checkCallPhonePermission != PackageManager.PERMISSION_GRANTED) {\n            ActivityCompat.requestPermissions(this, new String[]{WRITE_APN_SETTINGS}, APN_SETTINGS);\n        }\n    }\n\n    @Override\n    public void onResume() {\n        super.onResume();\n        if (pref.getBoolean(PrefUtils.PREFBACKFLOW, false)) {\n            SharedPreferences.Editor editor = pref.edit();\n            editor.putBoolean(PrefUtils.PREFBACKFLOW, false);\n            editor.apply();\n            finish();\n        }\n        registerReceiver(reMyCltPathReceiver, filter);\n        registerReceiver(myCLTVideoReceiver, filter1);\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        handler.removeCallbacks(runnable);\n        TrackingDbHelper helper = new TrackingDbHelper(this);\n        helper.updateLaunchTracker(pref.getLong(PrefUtils.PREFAPPLAUNCHID, 0), CalendarUtils.getCurrentDate());\n        CallLogOut.callIntentSign(trackDbHelper, pref, setCode, this);\n        finish();\n\n    }\n\n\n\n    public class MyCLTPathReceiver extends BroadcastReceiver {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            pathOfCLT = preferences.getString(Constants.PREFS_CLT_PATH, &quot;&quot;);\n        }\n    }\n\n    public class MyCLTVIdeoPathReciver extends BroadcastReceiver {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n            pathOfCLTVideo = preferences.getString(Constants.PREFS_CLT_VIDEOS_PATH, &quot;&quot;);\n\n        }\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        unregisterReceiver(reMyCltPathReceiver);\n        unregisterReceiver(myCLTVideoReceiver);\n    }\n\n    public void goTOLogin(String loginMode) {\n        LoginCheck.loginCheck(this, setCode, 2);\n        VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n splashscreen gotToLogin mode : &quot;+loginMode  );\n        if (&quot;&quot;.equals(pref.getString(&quot;subjects&quot;, &quot;&quot;))) {\n            ToastUtils.displayToast(&quot;Please check the network to continue the application,get the license and proceed&quot;, this);\n            return;\n        }\n        switch (loginMode) {\n            case &quot;classRoom&quot;:\n                pref.edit().putInt(Constants.PREFS_LOGIN_MODE, 1).apply();\n                pref.edit().putLong(PrefUtils.PREFUSERID, codeLoginClass).apply();\n                break;\n            case &quot;teacher&quot;:\n                pref.edit().putInt(Constants.PREFS_LOGIN_MODE, 2).apply();\n                pref.edit().putLong(PrefUtils.PREFUSERID, codeLoginTeacher).apply();\n                break;\n            case &quot;student&quot;:\n                pref.edit().putInt(Constants.PREFS_LOGIN_MODE, 3).apply();\n                pref.edit().putLong(PrefUtils.PREFUSERID, codeLoginStudent).apply();\n                break;\n            default:\n                break;\n\n\n        }\n            if (&quot;&quot;.equals(preferences.getString(Constants.PREFS_PARTNER, &quot;&quot;))) {\n                appLaunchedNew();\n                VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n Moving to LangActivity&quot;  );\n                Intent i = new Intent(this, LanguageActivity.class);\n                i.putExtra(&quot;mode&quot;, loginMode);\n                startActivity(i);\n                finish();\n            } else {\n                partnerPath = preferences.getString(Constants.PREFS_PARTNER, &quot;&quot;);\n                VideoUtils.writeToFile(&quot;CLT_Classroom_Logs.txt&quot;, &quot;\\n Moving to PartnerActivity &quot;  );\n                Intent i = new Intent(SplashScreen.this, PartnerActivity.class);\n                i.putExtra(&quot;path&quot;, partnerPath);\n                startActivity(i);\n                finish();\n            }\n    }\n\n\n    private void playVideo() {\n        Logger.logD(TAG, &quot;playVideo()--&quot; + playVideoFlag);\n        if (playVideoFlag == 1)\n            launchMainScreen();\n        else if (playVideoFlag == 0)\n            displayVideo();\n    }\n\n    @Override\n    public void minAppVToUpdate(String response) {\n        Logger.logD(TAG, &quot; min app v response in splash-xscreen :&quot;+response);\n    }\n\n    @Override\n    public void onCopyDatabaseComplete(boolean isDbCopyCompleted, String message) {\n        if (isDbCopyCompleted)\n            goTOLogin(&quot;classRoom&quot;);\n        else\n            showAlert(message);\n    }\n\n    private boolean  showAlert(String message) {\n        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);\n        alertDialogBuilder.setTitle(message);\n        alertDialogBuilder\n                .setMessage(&quot;Click yes to exit!&quot;)\n                .setCancelable(false)\n                .setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    public void onClick(DialogInterface dialog, int id) {\n                        activity.finish();\n\n                    }\n                });\n        AlertDialog alertDialog = alertDialogBuilder.create();\n        alertDialog.show();\n        return false;\n    }\n\n    private void DBDownloadSync(){\n        SharedPreferences preferences = this.getSharedPreferences(this.getString(R.string.code), Context.MODE_PRIVATE);\n        String path_new = &quot;&quot;;\n        String VPathNew = preferences.getString(Constants.PREFS_CLT_VIDEOS_PATH_NEW, &quot;&quot;);\n        String VPathOld = preferences.getString(Constants.PREFS_CLT_VIDEOS_PATH, &quot;&quot;);\n        Log.d(TAG, &quot;V NEW PATH &quot; + VPathNew);\n        int flagId = 0;\n        if (VPathNew.equals(&quot;&quot;)){\n            SharedPreferences.Editor editor = preferences.edit();\n            File[] listExternalDirs = ContextCompat.getExternalFilesDirs(this, null);\n            if (listExternalDirs.length &gt; 1){\n                if (listExternalDirs[0].getAbsolutePath().toLowerCase().contains(&quot;/storage/emulated/0&quot;)){\n                    path_new = listExternalDirs[1].getAbsolutePath();\n                    flagId = 1;\n                } else{\n                    path_new = listExternalDirs[0].getAbsolutePath();\n                    flagId = 2;\n                }\n            } else {\n                if (!VPathOld.equals(&quot;&quot;)) {\n                    path_new = VPathOld.replace(&quot;/CLTVIDEOS&quot;, &quot;&quot;) + &quot;/Android/data/org.mahiti.clt/files&quot;;\n                    flagId = 3;\n                } else {\n                    path_new = listExternalDirs[0].getAbsolutePath();\n                    flagId = 4;\n                }\n            }\n            path_new = path_new + &quot;/CLTVIDEOS&quot;;\n            Log.d(TAG, &quot;NEW PATH 0 &quot; + path_new + &quot; &quot; + flagId);\n            editor.putString(Constants.PREFS_CLT_VIDEOS_PATH_NEW, path_new);\n            Log.d(&quot;VIDLocation&quot;,&quot;4 path &quot; + path_new);\n            editor.apply();\n        } else {\n            path_new = VPathNew;\n            Log.d(TAG, &quot;NEW PATH &quot; + path_new + &quot; 5&quot;);\n        }\n\n\n        File DBSavingPath1 = new File(path_new + Path1);\n        File DBSavingPath2 = new File(path_new + Path2);\n        if (!DBSavingPath1.exists()){\n            Log.d(TAG, &quot;DB PATH1&quot;);\n            DBPaths.add(Path1);\n        } else {\n            Log.d(TAG, &quot;DB PATH1 EXISTS&quot;);\n        }\n        if (!DBSavingPath2.exists()){\n            Log.d(TAG, &quot;DB PATH2&quot;);\n            DBPaths.add(Path2);\n        } else {\n            Log.d(TAG, &quot;DB PATH2 EXISTS&quot;);\n        }\n        if (DBPaths.size() &gt; 0){\n            CheckNetwork chNetwork = new CheckNetwork(this);\n            if (chNetwork.checkNetwork())\n                new VideoDownloadAsyncTask(this, Constants.DBMAINURL, preferences, DBPaths).execute();\n            else\n                new CopyDBFilesAsyncTask(preferences, folder, this, SplashScreen.this, 1).execute();\n        } else {\n            Log.d(TAG, &quot;DB else&quot;);\n            new CopyDBFilesAsyncTask(preferences, folder, this, SplashScreen.this, 2).execute(); \n        }\n    }\n\n    @Override\n    public void callback(String str, int val) {\n        Log.d(TAG, &quot;DB callback&quot;);\n        new CopyDBFilesAsyncTask(preferences, folder, this, SplashScreen.this, 2).execute(); \n\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"score":0,"creation_date":1541666548,"post_id":53204105,"comment_id":93296304,"body_markdown":"Let me guess - chunked body?","body":"Let me guess - chunked body?"},{"owner":{"account_id":2653232,"reputation":4799,"user_id":2294428,"display_name":"StephaneM"},"score":0,"creation_date":1541668567,"post_id":53204105,"comment_id":93297305,"body_markdown":"Why don&#39;t you just use the Drive API to do this? https://developers.google.com/drive/api/v3/manage-downloads","body":"Why don&#39;t you just use the Drive API to do this? <a href=\"https://developers.google.com/drive/api/v3/manage-downloads\" rel=\"nofollow noreferrer\">developers.google.com/drive/api/v3/manage-downloads</a>"},{"owner":{"account_id":2658552,"reputation":183,"user_id":2298743,"accept_rate":40,"display_name":"Lasan"},"score":0,"creation_date":1541668811,"post_id":53204105,"comment_id":93297431,"body_markdown":"@StephaneM requirement not only download from  google drive , any link to a file from internet should be able to use.","body":"@StephaneM requirement not only download from  google drive , any link to a file from internet should be able to use."}],"answers":[{"tags":[],"owner":{"account_id":15778308,"reputation":1608,"user_id":11385485,"display_name":"Nafaz M N M"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690522915,"creation_date":1627046955,"answer_id":68499993,"question_id":53204105,"body_markdown":"you need a `URL` with `extension` to download large files (videos) when using NIO packages.\r\n\r\n       URL url = new URL(&quot;https://elpvideo.s3-us-west-2.amazonaws.com/4445/4445.mp4&quot;);\r\n\r\nIf your hosting service provides an API to download files with a particular token then NIO packages don&#39;t work properly.\r\n\r\n     URL url = new URL(&quot;https://fv2-1.failiem.lv/down.php?i=sk2j3yuya&quot;);\r\n\r\n\r\nTip:\r\n\r\nif you are downloading a large size of the file then make sure to set `timeout` if not then it will be disconnected in the middle.\r\n\r\n      URL url = new URL(&quot;https://elpvideo.s3-us-west-2.amazonaws.com/4445/4445.mp4&quot;);\r\n\r\n     HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\r\n    \r\n      urlConnection.setReadTimeout((1000*30)); //30 mins\r\n    \r\n      ReadableByteChannel readableByteChannel = Channels.newChannel(urlConnection.getInputStream());\r\n\r\n","title":"When downloading bigger (video) file using Spring-boot and java nio package only download part of the file","body":"<p>you need a <code>URL</code> with <code>extension</code> to download large files (videos) when using NIO packages.</p>\n<pre><code>   URL url = new URL(&quot;https://elpvideo.s3-us-west-2.amazonaws.com/4445/4445.mp4&quot;);\n</code></pre>\n<p>If your hosting service provides an API to download files with a particular token then NIO packages don't work properly.</p>\n<pre><code> URL url = new URL(&quot;https://fv2-1.failiem.lv/down.php?i=sk2j3yuya&quot;);\n</code></pre>\n<p>Tip:</p>\n<p>if you are downloading a large size of the file then make sure to set <code>timeout</code> if not then it will be disconnected in the middle.</p>\n<pre><code>  URL url = new URL(&quot;https://elpvideo.s3-us-west-2.amazonaws.com/4445/4445.mp4&quot;);\n\n HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\n\n  urlConnection.setReadTimeout((1000*30)); //30 mins\n\n  ReadableByteChannel readableByteChannel = Channels.newChannel(urlConnection.getInputStream());\n</code></pre>\n"}],"owner":{"account_id":2658552,"reputation":183,"user_id":2298743,"accept_rate":40,"display_name":"Lasan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1427,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1690522915,"creation_date":1541666443,"question_id":53204105,"body_markdown":"When downloading bigger (specially videos) files using Spring-boot and  java nio package only download part of the file. But smaller files such as images, pdf ect get downloaded properly and usable. \r\n\r\nFor example : Let say video size is 3.5MB but when downloaded it only show 160KB and cannot play it in any player(that is because, probably partially downloaded)\r\n\r\nFollowing is the controller \r\n===========================\r\n\r\n    package com.filedownloader_with_nio_package.controllers;\r\n    \r\n    import javax.servlet.ServletContext;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import com.filedownloader_with_nio_package.model.FileDetails;\r\n    import com.filedownloader_with_nio_package.services.FileDownloadService;\r\n    \r\n    @RestController\r\n    public class FileDownloadController {\r\n    \r\n    \t@Autowired\r\n    \tFileDownloadService fileDownloadService;\r\n    \r\n    \t\r\n    \t@RequestMapping(method = RequestMethod.POST, value = &quot;/filedownload&quot;)\r\n    \tpublic String downloadFile(@RequestBody FileDetails fileDetails){\r\n    \t\t\r\n    \t\treturn fileDownloadService.downloadFile(fileDetails);\r\n    \t}\r\n    \r\n    }\r\n\r\nFollowing is Service\r\n====================\r\n\r\n    package com.filedownloader_with_nio_package.services;\r\n    \r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.net.MalformedURLException;\r\n    import java.net.URL;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.Channels;\r\n    import java.nio.channels.ReadableByteChannel;\r\n    import java.nio.channels.WritableByteChannel;\r\n    import org.springframework.stereotype.Service;\r\n    import com.filedownloader_with_nio_package.exceptions.FileNotDownloadedCorrectlyException;\r\n    import com.filedownloader_with_nio_package.model.FileDetails;\r\n    import com.filedownloader_with_nio_package.utils.Constants;\r\n    \r\n    @Service\r\n    public class FileDownloadService {\r\n    \r\n    \tpublic String downloadFile(FileDetails fileDetails) {\r\n    \t\ttry {\r\n    \r\n    \t\t\tURL url = new URL(fileDetails.getFileUrl());\r\n    \t\t\tReadableByteChannel readableByteChannel = Channels.newChannel(url\r\n    \t\t\t\t\t.openStream());\r\n    \t\t\tString downloadedFile = fileDetails.getFileDownloadLocation() + &quot;/&quot;\r\n    \t\t\t\t\t+ fileDetails.getFileName() + &quot;.&quot;\r\n    \t\t\t\t\t+ fileDetails.getFileType();\r\n    \t\t\tFileOutputStream fileOutputStream = new FileOutputStream(\r\n    \t\t\t\t\tdownloadedFile);\r\n    \t\t\tWritableByteChannel writableByteChannel = fileOutputStream\r\n    \t\t\t\t\t.getChannel();\r\n    \t\t\t//\r\n    \t\t\t//\r\n    \t\t\tByteBuffer buffer = ByteBuffer.allocate(1024);\r\n    \r\n    \t\t\twhile (readableByteChannel.read(buffer) != -1) {\r\n    \t\t\t\tbuffer.flip();\r\n    \t\t\t\twhile (buffer.hasRemaining()) {\r\n    \t\t\t\t\twritableByteChannel.write(buffer);\r\n    \r\n    \t\t\t\t}\r\n    \t\t\t\tbuffer.clear();\r\n    \t\t\t}\r\n    \t\t\t//\r\n    \t\t\t//\r\n    \t\t\tfileOutputStream.flush();\r\n    \t\t\tfileOutputStream.close();\r\n    \t\t\treturn downloadedFile;\r\n    \t\t} catch (MalformedURLException e) {\r\n    \t\t\tthrow new FileNotDownloadedCorrectlyException(\r\n    \t\t\t\t\tConstants.FILE_NOT_DOWNLOADED_CORRECTLY, e);\r\n    \t\t} catch (IOException e) {\r\n    \t\t\tthrow new FileNotDownloadedCorrectlyException(\r\n    \t\t\t\t\tConstants.FILE_NOT_DOWNLOADED_CORRECTLY, e);\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\nFollowing is FileDetails model\r\n===============================\r\n\r\n    package com.filedownloader_with_nio_package.model;\r\n    \r\n    public class FileDetails {\r\n     private String fileName;\r\n     private String fileUrl;\r\n     private String fileType;\r\n     private String fileDownloadLocation;\r\n    public String getFileName() {\r\n    \treturn fileName;\r\n    }\r\n    public void setFileName(String fileName) {\r\n    \tthis.fileName = fileName;\r\n    }\r\n    public String getFileUrl() {\r\n    \treturn fileUrl;\r\n    }\r\n    public void setFileUrl(String fileUrl) {\r\n    \tthis.fileUrl = fileUrl;\r\n    }\r\n    public String getFileType() {\r\n    \treturn fileType;\r\n    }\r\n    public void setFileType(String fileType) {\r\n    \tthis.fileType = fileType;\r\n    }\r\n    public String getFileDownloadLocation() {\r\n    \treturn fileDownloadLocation;\r\n    }\r\n    public void setFileDownloadLocation(String fileDownloadLocation) {\r\n    \tthis.fileDownloadLocation = fileDownloadLocation;\r\n    }\r\n     \r\n    }\r\n\r\n\r\nThis is request body \r\n=====================\r\n\r\n    {\r\n    \t&quot;fileName&quot;: &quot;SB2&quot;,\r\n    \t&quot;fileUrl&quot;: &quot;https://drive.google.com/open?id=1_gkQK8sAlgTslzfRGOvNtbEAwtoPeyJv&quot;,\r\n    \t&quot;fileType&quot;:&quot;mp4&quot;,\r\n    \t&quot;fileDownloadLocation&quot;: &quot;C:/DownloadedFiles&quot;\r\n    }\r\n\r\nI went trough the related questions and answers but I could not find a proper solution for this. \r\nCan any one help to sort out the issue ? or any idea about this welcome. \r\n","title":"When downloading bigger (video) file using Spring-boot and java nio package only download part of the file","body":"<p>When downloading bigger (specially videos) files using Spring-boot and  java nio package only download part of the file. But smaller files such as images, pdf ect get downloaded properly and usable. </p>\n\n<p>For example : Let say video size is 3.5MB but when downloaded it only show 160KB and cannot play it in any player(that is because, probably partially downloaded)</p>\n\n<h1>Following is the controller</h1>\n\n<pre><code>package com.filedownloader_with_nio_package.controllers;\n\nimport javax.servlet.ServletContext;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.filedownloader_with_nio_package.model.FileDetails;\nimport com.filedownloader_with_nio_package.services.FileDownloadService;\n\n@RestController\npublic class FileDownloadController {\n\n    @Autowired\n    FileDownloadService fileDownloadService;\n\n\n    @RequestMapping(method = RequestMethod.POST, value = \"/filedownload\")\n    public String downloadFile(@RequestBody FileDetails fileDetails){\n\n        return fileDownloadService.downloadFile(fileDetails);\n    }\n\n}\n</code></pre>\n\n<h1>Following is Service</h1>\n\n<pre><code>package com.filedownloader_with_nio_package.services;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.net.MalformedURLException;\nimport java.net.URL;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.Channels;\nimport java.nio.channels.ReadableByteChannel;\nimport java.nio.channels.WritableByteChannel;\nimport org.springframework.stereotype.Service;\nimport com.filedownloader_with_nio_package.exceptions.FileNotDownloadedCorrectlyException;\nimport com.filedownloader_with_nio_package.model.FileDetails;\nimport com.filedownloader_with_nio_package.utils.Constants;\n\n@Service\npublic class FileDownloadService {\n\n    public String downloadFile(FileDetails fileDetails) {\n        try {\n\n            URL url = new URL(fileDetails.getFileUrl());\n            ReadableByteChannel readableByteChannel = Channels.newChannel(url\n                    .openStream());\n            String downloadedFile = fileDetails.getFileDownloadLocation() + \"/\"\n                    + fileDetails.getFileName() + \".\"\n                    + fileDetails.getFileType();\n            FileOutputStream fileOutputStream = new FileOutputStream(\n                    downloadedFile);\n            WritableByteChannel writableByteChannel = fileOutputStream\n                    .getChannel();\n            //\n            //\n            ByteBuffer buffer = ByteBuffer.allocate(1024);\n\n            while (readableByteChannel.read(buffer) != -1) {\n                buffer.flip();\n                while (buffer.hasRemaining()) {\n                    writableByteChannel.write(buffer);\n\n                }\n                buffer.clear();\n            }\n            //\n            //\n            fileOutputStream.flush();\n            fileOutputStream.close();\n            return downloadedFile;\n        } catch (MalformedURLException e) {\n            throw new FileNotDownloadedCorrectlyException(\n                    Constants.FILE_NOT_DOWNLOADED_CORRECTLY, e);\n        } catch (IOException e) {\n            throw new FileNotDownloadedCorrectlyException(\n                    Constants.FILE_NOT_DOWNLOADED_CORRECTLY, e);\n        }\n\n    }\n}\n</code></pre>\n\n<h1>Following is FileDetails model</h1>\n\n<pre><code>package com.filedownloader_with_nio_package.model;\n\npublic class FileDetails {\n private String fileName;\n private String fileUrl;\n private String fileType;\n private String fileDownloadLocation;\npublic String getFileName() {\n    return fileName;\n}\npublic void setFileName(String fileName) {\n    this.fileName = fileName;\n}\npublic String getFileUrl() {\n    return fileUrl;\n}\npublic void setFileUrl(String fileUrl) {\n    this.fileUrl = fileUrl;\n}\npublic String getFileType() {\n    return fileType;\n}\npublic void setFileType(String fileType) {\n    this.fileType = fileType;\n}\npublic String getFileDownloadLocation() {\n    return fileDownloadLocation;\n}\npublic void setFileDownloadLocation(String fileDownloadLocation) {\n    this.fileDownloadLocation = fileDownloadLocation;\n}\n\n}\n</code></pre>\n\n<h1>This is request body</h1>\n\n<pre><code>{\n    \"fileName\": \"SB2\",\n    \"fileUrl\": \"https://drive.google.com/open?id=1_gkQK8sAlgTslzfRGOvNtbEAwtoPeyJv\",\n    \"fileType\":\"mp4\",\n    \"fileDownloadLocation\": \"C:/DownloadedFiles\"\n}\n</code></pre>\n\n<p>I went trough the related questions and answers but I could not find a proper solution for this. \nCan any one help to sort out the issue ? or any idea about this welcome. </p>\n"},{"tags":["java","spring-boot","prometheus","aop","spring-aop"],"comments":[{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1690534893,"post_id":76785088,"comment_id":135370431,"body_markdown":"Spring AOP can only advise Spring container managed bean. SL4J instances here are not spring beans. Do read through  [Spring AOP Capabilities and Goals](https://docs.spring.io/spring-framework/reference/core/aop/introduction-spring-defn.html)","body":"Spring AOP can only advise Spring container managed bean. SL4J instances here are not spring beans. Do read through  <a href=\"https://docs.spring.io/spring-framework/reference/core/aop/introduction-spring-defn.html\" rel=\"nofollow noreferrer\">Spring AOP Capabilities and Goals</a>"},{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1690535290,"post_id":76785088,"comment_id":135370520,"body_markdown":"Do go through this SO Q&amp;A : https://stackoverflow.com/a/74571372/4214241 for an AspectJ based solution.","body":"Do go through this SO Q&amp;A : <a href=\"https://stackoverflow.com/a/74571372/4214241\">stackoverflow.com/a/74571372/4214241</a> for an AspectJ based solution."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690535306,"post_id":76785088,"comment_id":135370523,"body_markdown":"afaik the logger statistics are already logged by default.","body":"afaik the logger statistics are already logged by default."},{"owner":{"account_id":23102929,"reputation":109,"user_id":17212096,"display_name":"Sachin Mankotia"},"score":0,"creation_date":1690535939,"post_id":76785088,"comment_id":135370664,"body_markdown":"Hi M.Deinum, they are logged but they get logged from full application point of view. I want to get metrics only for a particular method&#39;s full execution point of view. So that I can configure prometheus alert if number of log.errors goes beyond a threshold value in last 30 mins.","body":"Hi M.Deinum, they are logged but they get logged from full application point of view. I want to get metrics only for a particular method&#39;s full execution point of view. So that I can configure prometheus alert if number of log.errors goes beyond a threshold value in last 30 mins."}],"owner":{"account_id":23102929,"reputation":109,"user_id":17212096,"display_name":"Sachin Mankotia"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690522611,"creation_date":1690522611,"question_id":76785088,"body_markdown":"I have a requirement where I want to count number of org.slf4j.Logger.error() calls within my method&#39;s execution (across multiple class like controller--service--repo etc). I am thinking to use AOP along with prometheus for this. Below is a sample which I tried,\r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    @RestController\r\n    public class DummyController {\r\n        private static final Logger LOGGER = LoggerFactory.getLogger(DummyController.class);\r\n    \r\n        @GetMapping(&quot;/test-api&quot;)\r\n        public void validateTokenDummy() {\r\n            try {\r\n                LOGGER.error(&quot;ooppps&quot;);     // this is the call for which I want to capture\r\n            } finally {\r\n                System.out.println(&quot;inside finally 1&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nAOP code\r\n\r\n    import io.micrometer.core.instrument.Counter;\r\n    import io.micrometer.core.instrument.MeterRegistry;\r\n    import org.aspectj.lang.JoinPoint;\r\n    import org.aspectj.lang.annotation.After;\r\n    import org.aspectj.lang.annotation.Aspect;\r\n    import org.aspectj.lang.annotation.Pointcut;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Aspect\r\n    @Component\r\n    public class ErrorLogCounterAspect {\r\n    \r\n        private final MeterRegistry meterRegistry;\r\n        private final Counter errorLogCounter;\r\n    \r\n        @Autowired\r\n        public ErrorLogCounterAspect(MeterRegistry meterRegistry) {\r\n            System.out.println(&quot;inside ErrorLogCounterAspect&quot;);\r\n            this.meterRegistry = meterRegistry;\r\n            this.errorLogCounter = Counter\r\n                    .builder(&quot;log.error.calls&quot;)\r\n                    .description(&quot;Testsss&quot;)\r\n                    .register(meterRegistry);\r\n        }\r\n    \r\n        @Pointcut(&quot;execution(void org.slf4j.Logger.error(..)) &amp;&amp; within(com.mypackage.controller.DummyController)&quot;)\r\n        public void errorMethodExecution() {\r\n        }\r\n    \r\n    \r\n        @After(&quot;errorMethodExecution()&quot;)\r\n        public void countLogErrorCalls(JoinPoint joinPoint) {\r\n            errorLogCounter.increment();\r\n        }\r\n    }\r\n\r\n\r\nAfter deployment, I am getting metrics under /actuator/promethues, but it not getting increemented when I am calling my rest api.\r\n\r\n    # HELP log_error_calls_total Testsss\r\n    # TYPE log_error_calls_total counter\r\n    log_error_calls_total 0.0\r\n\r\n\r\nCan you please check and tell what mistake am I doing here?\r\n","title":"Define and increment a prometheus custom counter whenever slf4j Logger error() is being called from my class method&#39;s execution(E2E) using AOP","body":"<p>I have a requirement where I want to count number of org.slf4j.Logger.error() calls within my method's execution (across multiple class like controller--service--repo etc). I am thinking to use AOP along with prometheus for this. Below is a sample which I tried,</p>\n<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class DummyController {\n    private static final Logger LOGGER = LoggerFactory.getLogger(DummyController.class);\n\n    @GetMapping(&quot;/test-api&quot;)\n    public void validateTokenDummy() {\n        try {\n            LOGGER.error(&quot;ooppps&quot;);     // this is the call for which I want to capture\n        } finally {\n            System.out.println(&quot;inside finally 1&quot;);\n        }\n    }\n}\n</code></pre>\n<p>AOP code</p>\n<pre><code>import io.micrometer.core.instrument.Counter;\nimport io.micrometer.core.instrument.MeterRegistry;\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Aspect\n@Component\npublic class ErrorLogCounterAspect {\n\n    private final MeterRegistry meterRegistry;\n    private final Counter errorLogCounter;\n\n    @Autowired\n    public ErrorLogCounterAspect(MeterRegistry meterRegistry) {\n        System.out.println(&quot;inside ErrorLogCounterAspect&quot;);\n        this.meterRegistry = meterRegistry;\n        this.errorLogCounter = Counter\n                .builder(&quot;log.error.calls&quot;)\n                .description(&quot;Testsss&quot;)\n                .register(meterRegistry);\n    }\n\n    @Pointcut(&quot;execution(void org.slf4j.Logger.error(..)) &amp;&amp; within(com.mypackage.controller.DummyController)&quot;)\n    public void errorMethodExecution() {\n    }\n\n\n    @After(&quot;errorMethodExecution()&quot;)\n    public void countLogErrorCalls(JoinPoint joinPoint) {\n        errorLogCounter.increment();\n    }\n}\n</code></pre>\n<p>After deployment, I am getting metrics under /actuator/promethues, but it not getting increemented when I am calling my rest api.</p>\n<pre><code># HELP log_error_calls_total Testsss\n# TYPE log_error_calls_total counter\nlog_error_calls_total 0.0\n</code></pre>\n<p>Can you please check and tell what mistake am I doing here?</p>\n"},{"tags":["java","multithreading","performance","concurrency"],"comments":[{"owner":{"account_id":262258,"reputation":64223,"user_id":546999,"accept_rate":97,"display_name":"Nanne"},"score":0,"creation_date":1301469133,"post_id":5483047,"comment_id":6218460,"body_markdown":"I don&#39;t know the context in which the tutorials you&#39;ve read say this: do they imply that the creation itself is expensive, or that &quot;creating a thread&quot; is expensive. The difference I try to show is between the pure action of making the thread (lets call it instantiating it or something), or the fact that you have a thread (so using a thread: obviously having overhead). Which one is claimed // which one do you wish to ask about?","body":"I don&#39;t know the context in which the tutorials you&#39;ve read say this: do they imply that the creation itself is expensive, or that &quot;creating a thread&quot; is expensive. The difference I try to show is between the pure action of making the thread (lets call it instantiating it or something), or the fact that you have a thread (so using a thread: obviously having overhead). Which one is claimed // which one do you wish to ask about?"},{"owner":{"account_id":21211,"reputation":43403,"user_id":51382,"accept_rate":87,"display_name":"willcodejavaforfood"},"score":9,"creation_date":1301469938,"post_id":5483047,"comment_id":6218606,"body_markdown":"@typoknig - Expensive compared to NOT creating a new thread :)","body":"@typoknig - Expensive compared to NOT creating a new thread :)"},{"owner":{"account_id":1252466,"reputation":79539,"user_id":1212596,"accept_rate":52,"display_name":"Paul Draper"},"score":0,"creation_date":1403998361,"post_id":5483047,"comment_id":37875540,"body_markdown":"possible duplicate of [Java thread creation overhead](http://stackoverflow.com/questions/2117072/java-thread-creation-overhead)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/2117072/java-thread-creation-overhead\">Java thread creation overhead</a>"},{"owner":{"account_id":1266843,"reputation":93034,"user_id":1223975,"accept_rate":54,"display_name":"Alexander Mills"},"score":3,"creation_date":1444812480,"post_id":5483047,"comment_id":54054347,"body_markdown":"threadpools for the win. no need to always to create new threads for tasks.","body":"threadpools for the win. no need to always to create new threads for tasks."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1612670938,"post_id":5483047,"comment_id":116837782,"body_markdown":"Alternatively, the *virtual threads* feature (also known as *fibers*) coming to Java via [*Project Loom*](https://wiki.openjdk.java.net/display/loom/Main) are *not* expensive. Loom maps many virtual threads to one actual platform/host thread to greatly improve performance in situations where threads often block. For more info, see the most recent presentations and interviews by Ron Pressler of Oracle. Early access to Loom-enabled JVMs is available now.","body":"Alternatively, the <i>virtual threads</i> feature (also known as <i>fibers</i>) coming to Java via <a href=\"https://wiki.openjdk.java.net/display/loom/Main\" rel=\"nofollow noreferrer\"><i>Project Loom</i></a> are <i>not</i> expensive. Loom maps many virtual threads to one actual platform/host thread to greatly improve performance in situations where threads often block. For more info, see the most recent presentations and interviews by Ron Pressler of Oracle. Early access to Loom-enabled JVMs is available now."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":2,"up_vote_count":175,"is_accepted":true,"score":173,"last_activity_date":1690521045,"creation_date":1301469360,"answer_id":5483105,"question_id":5483047,"body_markdown":"&gt; Why is creating a Thread *said to be* expensive?\r\n\r\nBecause it &gt;&gt;is&lt;&lt; expensive.\r\n\r\nJava thread creation is expensive because there is a fair bit of work involved:\r\n\r\n  - A large block of memory has to be allocated and initialized for the thread stack.\r\n  - System calls need to be made to create / register the native thread with the host OS.\r\n  - Descriptors need to be created, initialized and added to JVM-internal data structures.\r\n\r\nIt is also expensive in the sense that the thread ties down resources as long as it is alive; e.g. the thread stack, any objects reachable from the stack, the JVM thread descriptors, the OS native thread descriptors.\r\n\r\nThe costs of all of these things are platform specific, but they are not cheap on any Java platform I&#39;ve ever come across.\r\n\r\n--------------\r\n\r\nA Google search found me an [old benchmark][2] that reports a thread creation rate of ~4000 per second on a Sun Java 1.4.1 on a 2002 vintage dual processor Xeon running 2002 vintage Linux.  A more modern platform will give better numbers ... and I can&#39;t comment on the methodology ... but at least it gives a ballpark for *how expensive* thread creation is likely to be.\r\n\r\nPeter Lawrey&#39;s benchmarking indicates that thread creation is significantly faster these days in absolute terms, but it is unclear how much of this is due improvements in Java and/or the OS ... or higher processor speeds.  But his numbers *still* indicate a 150+ fold improvement if you use a thread pool versus creating/starting a new thread each time.  (And he makes the point that this is all relative ...)\r\n\r\n----------\r\n\r\nThe above assumes native threads rather than green threads, but modern JVMs all use native threads for performance reasons.  Green threads are possibly cheaper to create, but you pay for it in other areas.\r\n\r\nUpdate: The OpenJDK [Loom project][1] aims to provide a light-weight alternative to standard Java threads, among other things.  They are proposing *virtual threads* which are a hybrid of native threads and green threads.  In simple terms, a virtual thread is rather like a green thread implementation that uses native threads underneath when parallel execution is required.\r\n\r\nAs of now (July 2023) Project Loom has become [JEP 444](https://openjdk.org/jeps/444).  It has been in preview since Java 19, and is proposed for full release in Java 21. \r\n\r\n\r\n----------\r\n\r\nI&#39;ve done a bit of digging to see how a Java thread&#39;s stack really gets allocated.  In the case of OpenJDK 6 on Linux, the thread stack is allocated by the call to `pthread_create` that creates the native thread.  (The JVM does not pass `pthread_create` a preallocated stack.)\r\n\r\nThen, within `pthread_create` the stack is allocated by a call to `mmap` as follows:\r\n\r\n    mmap(0, attr.__stacksize, \r\n         PROT_READ|PROT_WRITE|PROT_EXEC, \r\n         MAP_PRIVATE|MAP_ANONYMOUS, -1, 0)\r\n\r\nAccording to `man mmap`, the `MAP_ANONYMOUS` flag causes the memory to be initialized to zero.\r\n\r\nThus, even though it might not be essential that new Java thread stacks are zeroed (per the JVM spec), in practice (at least with OpenJDK 6 on Linux) they are zeroed.\r\n\r\n\r\n  [1]: https://wiki.openjdk.java.net/display/loom/Main\r\n  [2]: http://www.mail-archive.com/java-linux@java.blackdown.org/msg15146.html","title":"Why is creating a Thread said to be expensive?","body":"<blockquote>\n<p>Why is creating a Thread <em>said to be</em> expensive?</p>\n</blockquote>\n<p>Because it &gt;&gt;is&lt;&lt; expensive.</p>\n<p>Java thread creation is expensive because there is a fair bit of work involved:</p>\n<ul>\n<li>A large block of memory has to be allocated and initialized for the thread stack.</li>\n<li>System calls need to be made to create / register the native thread with the host OS.</li>\n<li>Descriptors need to be created, initialized and added to JVM-internal data structures.</li>\n</ul>\n<p>It is also expensive in the sense that the thread ties down resources as long as it is alive; e.g. the thread stack, any objects reachable from the stack, the JVM thread descriptors, the OS native thread descriptors.</p>\n<p>The costs of all of these things are platform specific, but they are not cheap on any Java platform I've ever come across.</p>\n<hr />\n<p>A Google search found me an <a href=\"http://www.mail-archive.com/java-linux@java.blackdown.org/msg15146.html\" rel=\"nofollow noreferrer\">old benchmark</a> that reports a thread creation rate of ~4000 per second on a Sun Java 1.4.1 on a 2002 vintage dual processor Xeon running 2002 vintage Linux.  A more modern platform will give better numbers ... and I can't comment on the methodology ... but at least it gives a ballpark for <em>how expensive</em> thread creation is likely to be.</p>\n<p>Peter Lawrey's benchmarking indicates that thread creation is significantly faster these days in absolute terms, but it is unclear how much of this is due improvements in Java and/or the OS ... or higher processor speeds.  But his numbers <em>still</em> indicate a 150+ fold improvement if you use a thread pool versus creating/starting a new thread each time.  (And he makes the point that this is all relative ...)</p>\n<hr />\n<p>The above assumes native threads rather than green threads, but modern JVMs all use native threads for performance reasons.  Green threads are possibly cheaper to create, but you pay for it in other areas.</p>\n<p>Update: The OpenJDK <a href=\"https://wiki.openjdk.java.net/display/loom/Main\" rel=\"nofollow noreferrer\">Loom project</a> aims to provide a light-weight alternative to standard Java threads, among other things.  They are proposing <em>virtual threads</em> which are a hybrid of native threads and green threads.  In simple terms, a virtual thread is rather like a green thread implementation that uses native threads underneath when parallel execution is required.</p>\n<p>As of now (July 2023) Project Loom has become <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">JEP 444</a>.  It has been in preview since Java 19, and is proposed for full release in Java 21.</p>\n<hr />\n<p>I've done a bit of digging to see how a Java thread's stack really gets allocated.  In the case of OpenJDK 6 on Linux, the thread stack is allocated by the call to <code>pthread_create</code> that creates the native thread.  (The JVM does not pass <code>pthread_create</code> a preallocated stack.)</p>\n<p>Then, within <code>pthread_create</code> the stack is allocated by a call to <code>mmap</code> as follows:</p>\n<pre><code>mmap(0, attr.__stacksize, \n     PROT_READ|PROT_WRITE|PROT_EXEC, \n     MAP_PRIVATE|MAP_ANONYMOUS, -1, 0)\n</code></pre>\n<p>According to <code>man mmap</code>, the <code>MAP_ANONYMOUS</code> flag causes the memory to be initialized to zero.</p>\n<p>Thus, even though it might not be essential that new Java thread stacks are zeroed (per the JVM spec), in practice (at least with OpenJDK 6 on Linux) they are zeroed.</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1444814190,"creation_date":1301469374,"answer_id":5483109,"question_id":5483047,"body_markdown":"In theory, this depends on the JVM. In practice, every thread has a relatively large amount of stack memory (256 KB per default, I think). Additionally, threads are implemented as OS threads, so creating them involves an OS call, i.e. a context switch.\r\n\r\nDo realize that &quot;expensive&quot; in computing is always very relative. Thread creation is very expensive relative to the creation of most objects, but not very expensive relative to a random harddisk seek. You don&#39;t have to avoid creating threads at all costs, but creating hundreds of them per second is not a smart move. In most cases, if your design calls for lots of threads, you should use a limited-size  thread pool.","title":"Why is creating a Thread said to be expensive?","body":"<p>In theory, this depends on the JVM. In practice, every thread has a relatively large amount of stack memory (256 KB per default, I think). Additionally, threads are implemented as OS threads, so creating them involves an OS call, i.e. a context switch.</p>\n\n<p>Do realize that \"expensive\" in computing is always very relative. Thread creation is very expensive relative to the creation of most objects, but not very expensive relative to a random harddisk seek. You don't have to avoid creating threads at all costs, but creating hundreds of them per second is not a smart move. In most cases, if your design calls for lots of threads, you should use a limited-size  thread pool.</p>\n"},{"tags":[],"owner":{"account_id":348643,"reputation":28269,"user_id":683453,"display_name":"Philip JF"},"down_vote_count":3,"up_vote_count":9,"is_accepted":false,"score":6,"last_activity_date":1473761855,"creation_date":1301469390,"answer_id":5483111,"question_id":5483047,"body_markdown":"Creating `Threads` requires allocating a fair amount of memory since it has to make not one, but two new stacks (one for java code, one for native code).  Use of [Executors][1]/Thread Pools can avoid the overhead, by reusing threads for multiple tasks for [Executor][2].\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html","title":"Why is creating a Thread said to be expensive?","body":"<p>Creating <code>Threads</code> requires allocating a fair amount of memory since it has to make not one, but two new stacks (one for java code, one for native code).  Use of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executors.html\" rel=\"nofollow noreferrer\">Executors</a>/Thread Pools can avoid the overhead, by reusing threads for multiple tasks for <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html\" rel=\"nofollow noreferrer\">Executor</a>.</p>\n"},{"tags":[],"owner":{"account_id":214990,"reputation":74707,"user_id":469300,"accept_rate":74,"display_name":"salezica"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1301469424,"creation_date":1301469424,"answer_id":5483115,"question_id":5483047,"body_markdown":"There are two kinds of threads:\r\n\r\n1. **Proper threads**: these are abstractions around the underlying operating system&#39;s threading facilities. Thread creation is, therefore, as expensive as the system&#39;s -- there&#39;s always an overhead.\r\n\r\n2. **&quot;Green&quot; threads**: created and scheduled by the JVM, these are cheaper, but no proper paralellism occurs. These behave like threads, but are executed within the JVM thread in the OS. They are not often used, to my knowledge.\r\n\r\nThe biggest factor I can think of in the thread-creation overhead, is the **stack-size** you have defined for your threads. Thread stack-size can be passed as a parameter when running the VM.\r\n\r\nOther than that, thread creation is mostly OS-dependent, and even VM-implementation-dependent.\r\n\r\nNow, let me point something out: creating threads is expensive if you&#39;re planning on firing **2000 threads per second, every second of your runtime. The JVM is not designed to handle that**. If you&#39;ll have a couple of stable workers that won&#39;t be fired and killed over and over, relax.","title":"Why is creating a Thread said to be expensive?","body":"<p>There are two kinds of threads:</p>\n\n<ol>\n<li><p><strong>Proper threads</strong>: these are abstractions around the underlying operating system's threading facilities. Thread creation is, therefore, as expensive as the system's -- there's always an overhead.</p></li>\n<li><p><strong>\"Green\" threads</strong>: created and scheduled by the JVM, these are cheaper, but no proper paralellism occurs. These behave like threads, but are executed within the JVM thread in the OS. They are not often used, to my knowledge.</p></li>\n</ol>\n\n<p>The biggest factor I can think of in the thread-creation overhead, is the <strong>stack-size</strong> you have defined for your threads. Thread stack-size can be passed as a parameter when running the VM.</p>\n\n<p>Other than that, thread creation is mostly OS-dependent, and even VM-implementation-dependent.</p>\n\n<p>Now, let me point something out: creating threads is expensive if you're planning on firing <strong>2000 threads per second, every second of your runtime. The JVM is not designed to handle that</strong>. If you'll have a couple of stable workers that won't be fired and killed over and over, relax.</p>\n"},{"tags":[],"owner":{"account_id":35502,"reputation":28362,"user_id":100565,"accept_rate":59,"display_name":"MeBigFatGuy"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1301469513,"creation_date":1301469513,"answer_id":5483132,"question_id":5483047,"body_markdown":"Obviously the crux of the question is what does &#39;expensive&#39; mean. \r\n\r\nA thread needs to create a stack and initialize the stack based on the run method.\r\n\r\nIt needs to set up control status structures, ie, what state it&#39;s in runnable, waiting etc.\r\n\r\nThere&#39;s probably a good deal of synchronization around setting these things up.","title":"Why is creating a Thread said to be expensive?","body":"<p>Obviously the crux of the question is what does 'expensive' mean. </p>\n\n<p>A thread needs to create a stack and initialize the stack based on the run method.</p>\n\n<p>It needs to set up control status structures, ie, what state it's in runnable, waiting etc.</p>\n\n<p>There's probably a good deal of synchronization around setting these things up.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":92,"is_accepted":false,"score":91,"last_activity_date":1317195221,"creation_date":1301471582,"answer_id":5483467,"question_id":5483047,"body_markdown":"Others have discussed where the costs of threading come from.  This answer covers why creating a thread is not that expensive compared to many operations, but _relatively_ expensive compared to task execution alternatives, which are _relatively_ less expensive.\r\n\r\nThe most obvious alternative to running a task in another thread is to run the task in the same thread. This is difficult to grasp for those assuming that more threads are always better.  The logic is that if the overhead of adding the task to another thread is greater than the time you save, it can be faster to perform the task in the current thread.\r\n\r\nAnother alternative is to use a thread pool.  A thread pool can be more efficient for two reasons. 1) it reuses threads already created. 2) you can tune/control the number of threads to ensure you have optimal performance.\r\n\r\nThe following program prints....\r\n\r\n    Time for a task to complete in a new Thread 71.3 us\r\n    Time for a task to complete in a thread pool 0.39 us\r\n    Time for a task to complete in the same thread 0.08 us\r\n    Time for a task to complete in a new Thread 65.4 us\r\n    Time for a task to complete in a thread pool 0.37 us\r\n    Time for a task to complete in the same thread 0.08 us\r\n    Time for a task to complete in a new Thread 61.4 us\r\n    Time for a task to complete in a thread pool 0.38 us\r\n    Time for a task to complete in the same thread 0.08 us\r\n\r\nThis is a test for a trivial task which exposes the overhead of each threading option. (This test task is the sort of task that is actually best performed in the current thread.)\r\n\r\n    final BlockingQueue&lt;Integer&gt; queue = new LinkedBlockingQueue&lt;Integer&gt;();\r\n    Runnable task = new Runnable() {\r\n        @Override\r\n        public void run() {\r\n            queue.add(1);\r\n        }\r\n    };\r\n\r\n    for (int t = 0; t &lt; 3; t++) {\r\n        {\r\n            long start = System.nanoTime();\r\n            int runs = 20000;\r\n            for (int i = 0; i &lt; runs; i++)\r\n                new Thread(task).start();\r\n            for (int i = 0; i &lt; runs; i++)\r\n                queue.take();\r\n            long time = System.nanoTime() - start;\r\n            System.out.printf(&quot;Time for a task to complete in a new Thread %.1f us%n&quot;, time / runs / 1000.0);\r\n        }\r\n        {\r\n            int threads = Runtime.getRuntime().availableProcessors();\r\n            ExecutorService es = Executors.newFixedThreadPool(threads);\r\n            long start = System.nanoTime();\r\n            int runs = 200000;\r\n            for (int i = 0; i &lt; runs; i++)\r\n                es.execute(task);\r\n            for (int i = 0; i &lt; runs; i++)\r\n                queue.take();\r\n            long time = System.nanoTime() - start;\r\n            System.out.printf(&quot;Time for a task to complete in a thread pool %.2f us%n&quot;, time / runs / 1000.0);\r\n            es.shutdown();\r\n        }\r\n        {\r\n            long start = System.nanoTime();\r\n            int runs = 200000;\r\n            for (int i = 0; i &lt; runs; i++)\r\n                task.run();\r\n            for (int i = 0; i &lt; runs; i++)\r\n                queue.take();\r\n            long time = System.nanoTime() - start;\r\n            System.out.printf(&quot;Time for a task to complete in the same thread %.2f us%n&quot;, time / runs / 1000.0);\r\n        }\r\n    }\r\n    }\r\n\r\nAs you can see, creating a new thread only costs ~70 &amp;micro;s.  This could be considered trivial in many, if not most, use cases.  Relatively speaking it is more expensive than the alternatives and for some situations a thread pool or not using threads at all is a better solution.","title":"Why is creating a Thread said to be expensive?","body":"<p>Others have discussed where the costs of threading come from.  This answer covers why creating a thread is not that expensive compared to many operations, but <em>relatively</em> expensive compared to task execution alternatives, which are <em>relatively</em> less expensive.</p>\n\n<p>The most obvious alternative to running a task in another thread is to run the task in the same thread. This is difficult to grasp for those assuming that more threads are always better.  The logic is that if the overhead of adding the task to another thread is greater than the time you save, it can be faster to perform the task in the current thread.</p>\n\n<p>Another alternative is to use a thread pool.  A thread pool can be more efficient for two reasons. 1) it reuses threads already created. 2) you can tune/control the number of threads to ensure you have optimal performance.</p>\n\n<p>The following program prints....</p>\n\n<pre><code>Time for a task to complete in a new Thread 71.3 us\nTime for a task to complete in a thread pool 0.39 us\nTime for a task to complete in the same thread 0.08 us\nTime for a task to complete in a new Thread 65.4 us\nTime for a task to complete in a thread pool 0.37 us\nTime for a task to complete in the same thread 0.08 us\nTime for a task to complete in a new Thread 61.4 us\nTime for a task to complete in a thread pool 0.38 us\nTime for a task to complete in the same thread 0.08 us\n</code></pre>\n\n<p>This is a test for a trivial task which exposes the overhead of each threading option. (This test task is the sort of task that is actually best performed in the current thread.)</p>\n\n<pre><code>final BlockingQueue&lt;Integer&gt; queue = new LinkedBlockingQueue&lt;Integer&gt;();\nRunnable task = new Runnable() {\n    @Override\n    public void run() {\n        queue.add(1);\n    }\n};\n\nfor (int t = 0; t &lt; 3; t++) {\n    {\n        long start = System.nanoTime();\n        int runs = 20000;\n        for (int i = 0; i &lt; runs; i++)\n            new Thread(task).start();\n        for (int i = 0; i &lt; runs; i++)\n            queue.take();\n        long time = System.nanoTime() - start;\n        System.out.printf(\"Time for a task to complete in a new Thread %.1f us%n\", time / runs / 1000.0);\n    }\n    {\n        int threads = Runtime.getRuntime().availableProcessors();\n        ExecutorService es = Executors.newFixedThreadPool(threads);\n        long start = System.nanoTime();\n        int runs = 200000;\n        for (int i = 0; i &lt; runs; i++)\n            es.execute(task);\n        for (int i = 0; i &lt; runs; i++)\n            queue.take();\n        long time = System.nanoTime() - start;\n        System.out.printf(\"Time for a task to complete in a thread pool %.2f us%n\", time / runs / 1000.0);\n        es.shutdown();\n    }\n    {\n        long start = System.nanoTime();\n        int runs = 200000;\n        for (int i = 0; i &lt; runs; i++)\n            task.run();\n        for (int i = 0; i &lt; runs; i++)\n            queue.take();\n        long time = System.nanoTime() - start;\n        System.out.printf(\"Time for a task to complete in the same thread %.2f us%n\", time / runs / 1000.0);\n    }\n}\n}\n</code></pre>\n\n<p>As you can see, creating a new thread only costs ~70 &micro;s.  This could be considered trivial in many, if not most, use cases.  Relatively speaking it is more expensive than the alternatives and for some situations a thread pool or not using threads at all is a better solution.</p>\n"}],"owner":{"account_id":65170,"reputation":2696,"user_id":191995,"accept_rate":38,"display_name":"kachanov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56589,"favorite_count":0,"down_vote_count":0,"up_vote_count":203,"accepted_answer_id":5483105,"answer_count":6,"score":203,"last_activity_date":1690521045,"creation_date":1301468914,"question_id":5483047,"body_markdown":"The Java tutorials say that creating a Thread is expensive. But why exactly is it expensive? What exactly is happening when a Java Thread is created that makes its creation expensive? I&#39;m taking the statement as true, but I&#39;m just interested in mechanics of Thread creation in JVM. \r\n\r\n&gt; Thread lifecycle overhead. Thread creation and teardown are not free. The actual overhead varies across platforms, but thread creation takes time, introducing latency into request processing, and requires some processing activity by the JVM and OS. If requests are frequent and lightweight, as in most server applications, creating a new thread for each request can consume significant computing resources.\r\n\r\nFrom *Java Concurrency in Practice*  \r\nBy Brian Goetz, Tim Peierls, Joshua Bloch, Joseph Bowbeer, David Holmes, Doug Lea  \r\nPrint ISBN-10: 0-321-34960-1","title":"Why is creating a Thread said to be expensive?","body":"<p>The Java tutorials say that creating a Thread is expensive. But why exactly is it expensive? What exactly is happening when a Java Thread is created that makes its creation expensive? I'm taking the statement as true, but I'm just interested in mechanics of Thread creation in JVM. </p>\n\n<blockquote>\n  <p>Thread lifecycle overhead. Thread creation and teardown are not free. The actual overhead varies across platforms, but thread creation takes time, introducing latency into request processing, and requires some processing activity by the JVM and OS. If requests are frequent and lightweight, as in most server applications, creating a new thread for each request can consume significant computing resources.</p>\n</blockquote>\n\n<p>From <em>Java Concurrency in Practice</em><br>\nBy Brian Goetz, Tim Peierls, Joshua Bloch, Joseph Bowbeer, David Holmes, Doug Lea<br>\nPrint ISBN-10: 0-321-34960-1</p>\n"},{"tags":["java","apache-spark","amazon-s3","amazon-emr"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1684240461,"post_id":76261326,"comment_id":134486203,"body_markdown":"How many executors are running?","body":"How many executors are running?"},{"owner":{"account_id":2542566,"reputation":141,"user_id":2208071,"display_name":"shashank93rao"},"score":0,"creation_date":1684241793,"post_id":76261326,"comment_id":134486549,"body_markdown":"2 executors. Increasing the executors is an option but I want to optimise this before I  beef up the underlying infrastructure.","body":"2 executors. Increasing the executors is an option but I want to optimise this before I  beef up the underlying infrastructure."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1684248699,"post_id":76261326,"comment_id":134488576,"body_markdown":"You don&#39;t need more infra for more executors. You optimize with more executors. Say you have 16G of RAM on each node for example (m5.xlarge). Then you can run, say 3-4 executors with 3-4G each. Then if you have 2 spark workers, you can run 6-8 total executors, or even more with 1-2G GB per executor. Each file is less than 2MB, so you really don&#39;t need GB of memory","body":"You don&#39;t need more infra for more executors. You optimize with more executors. Say you have 16G of RAM on each node for example (m5.xlarge). Then you can run, say 3-4 executors with 3-4G each. Then if you have 2 spark workers, you can run 6-8 total executors, or even more with 1-2G GB per executor. Each file is less than 2MB, so you really don&#39;t need GB of memory"},{"owner":{"account_id":2542566,"reputation":141,"user_id":2208071,"display_name":"shashank93rao"},"score":0,"creation_date":1684249580,"post_id":76261326,"comment_id":134488816,"body_markdown":"@OneCricketeer can you please let me know how to increase the number of executors? Also, how does spark arrive at the number 10000 tasks? Can I reduce that to optimise the read?","body":"@OneCricketeer can you please let me know how to increase the number of executors? Also, how does spark arrive at the number 10000 tasks? Can I reduce that to optimise the read?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1684249847,"post_id":76261326,"comment_id":134488895,"body_markdown":"Have you seen the docs that say `--num-executors`? https://spark.apache.org/docs/latest/submitting-applications.html","body":"Have you seen the docs that say <code>--num-executors</code>? <a href=\"https://spark.apache.org/docs/latest/submitting-applications.html\" rel=\"nofollow noreferrer\">spark.apache.org/docs/latest/submitting-applications.html</a>"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1684249894,"post_id":76261326,"comment_id":134488908,"body_markdown":"There&#39;s 100+k files, so one task is needed per file... You can optimize by Gzipping, or Bzip2-ing your JSON files in S3","body":"There&#39;s 100+k files, so one task is needed per file... You can optimize by Gzipping, or Bzip2-ing your JSON files in S3"}],"answers":[{"tags":[],"owner":{"account_id":469790,"reputation":1689,"user_id":876595,"display_name":"chehsunliu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690519615,"creation_date":1690519615,"answer_id":76784910,"question_id":76261326,"body_markdown":"I have encountered the same issue before. Eventually, I listed all the files manually via `boto3` and put the string list into `spark.read.parquet`. This saved me tremendous amounts of time.","title":"Spark: How to reduce the time to read files from S3?","body":"<p>I have encountered the same issue before. Eventually, I listed all the files manually via <code>boto3</code> and put the string list into <code>spark.read.parquet</code>. This saved me tremendous amounts of time.</p>\n"}],"owner":{"account_id":2542566,"reputation":141,"user_id":2208071,"display_name":"shashank93rao"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690519615,"creation_date":1684228745,"question_id":76261326,"body_markdown":"I need to read the JSON files present in S3 and process them. There are roughly 120,000 JSONL files present in a single directory of S3. Each file is roughly around 1.6MB in size.\r\n\r\nMy spark code is very simple:\r\n```\r\nspark.read().json(s3DirectoryPath)\r\n```\r\n\r\nThis triggers two jobs:\r\n\r\n 1. List Job\r\n 2. Read Job\r\n\r\n[![List job][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rjAhF.png\r\n\r\nMy problem is that the list job takes a lot of time (roughly 2 hrs). How can I optimise this? \r\n\r\nAlso, I see that spark decided to form 10,000 tasks for listing files. How did Spark decide on the number of tasks? Can this be tuned to give better performance?\r\n\r\nNote: Combining multiple files into large files is not an option for me.\r\n\r\nEnvironment Details:\r\n\r\nAWS EMR\r\n\r\n2 Executors in 2 m5.xlarge machines\r\n","title":"Spark: How to reduce the time to read files from S3?","body":"<p>I need to read the JSON files present in S3 and process them. There are roughly 120,000 JSONL files present in a single directory of S3. Each file is roughly around 1.6MB in size.</p>\n<p>My spark code is very simple:</p>\n<pre><code>spark.read().json(s3DirectoryPath)\n</code></pre>\n<p>This triggers two jobs:</p>\n<ol>\n<li>List Job</li>\n<li>Read Job</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/rjAhF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rjAhF.png\" alt=\"List job\" /></a></p>\n<p>My problem is that the list job takes a lot of time (roughly 2 hrs). How can I optimise this?</p>\n<p>Also, I see that spark decided to form 10,000 tasks for listing files. How did Spark decide on the number of tasks? Can this be tuned to give better performance?</p>\n<p>Note: Combining multiple files into large files is not an option for me.</p>\n<p>Environment Details:</p>\n<p>AWS EMR</p>\n<p>2 Executors in 2 m5.xlarge machines</p>\n"},{"tags":["java","sockets","exception","network-programming"],"comments":[{"owner":{"account_id":205707,"reputation":1,"user_id":454597,"accept_rate":91,"display_name":"TC1"},"score":1,"creation_date":1311664128,"post_id":6826331,"comment_id":8110854,"body_markdown":"`!(str == null)` just looks confusing, you should write `str != null`.","body":"<code>!(str == null)</code> just looks confusing, you should write <code>str != null</code>."},{"owner":{"account_id":398303,"reputation":27194,"user_id":762913,"accept_rate":75,"display_name":"pap"},"score":1,"creation_date":1311664569,"post_id":6826331,"comment_id":8110952,"body_markdown":"Where and how are you initializing the addURL variable?","body":"Where and how are you initializing the addURL variable?"}],"answers":[{"tags":[],"owner":{"account_id":446547,"reputation":126635,"user_id":839646,"accept_rate":70,"display_name":"Ryan Stewart"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1311663904,"creation_date":1311663904,"answer_id":6826455,"question_id":6826331,"body_markdown":"&quot;Network is unreachable&quot; means just that. You&#39;re not connected to a network. It&#39;s something outside of your program. Could be a bad OS setting, NIC, router, etc.","title":"java.net.SocketException: Network is unreachable: connect","body":"<p>\"Network is unreachable\" means just that. You're not connected to a network. It's something outside of your program. Could be a bad OS setting, NIC, router, etc.</p>\n"},{"tags":[],"owner":{"account_id":447369,"reputation":10947,"user_id":840960,"accept_rate":100,"display_name":"Shlublu"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1311664194,"creation_date":1311664194,"answer_id":6826494,"question_id":6826331,"body_markdown":"You are facing a connection breakdown. Does this happen in 3G, WiFi or &quot;plain&quot; connection on a computer?\r\n\r\nAnyway, you must assume that the connection may be lost from time to time, when writing your app. For example, with mobiles, this happens frequently in the tube, in basements, etc. With PC apps, this is less frequent but occurs sometimes.\r\n\r\nA retry can be a good solution. And a clean error message that explains the network is not available at this moment too.","title":"java.net.SocketException: Network is unreachable: connect","body":"<p>You are facing a connection breakdown. Does this happen in 3G, WiFi or \"plain\" connection on a computer?</p>\n\n<p>Anyway, you must assume that the connection may be lost from time to time, when writing your app. For example, with mobiles, this happens frequently in the tube, in basements, etc. With PC apps, this is less frequent but occurs sometimes.</p>\n\n<p>A retry can be a good solution. And a clean error message that explains the network is not available at this moment too.</p>\n"},{"tags":[],"owner":{"account_id":3981606,"reputation":193,"user_id":3283370,"accept_rate":100,"display_name":"Fyodor Menshikov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1479461347,"creation_date":1479461347,"answer_id":40673491,"question_id":6826331,"body_markdown":"I faced situation of getting `java.net.SocketException` not sometimes but every time. I&#39;ve added `-Djava.net.preferIPv4Stack=true` to java command line and my program started to work properly.","title":"java.net.SocketException: Network is unreachable: connect","body":"<p>I faced situation of getting <code>java.net.SocketException</code> not sometimes but every time. I've added <code>-Djava.net.preferIPv4Stack=true</code> to java command line and my program started to work properly.</p>\n"},{"tags":[],"owner":{"account_id":5817318,"reputation":9,"user_id":4586490,"display_name":"Koki Hayashi"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1516781278,"creation_date":1516781278,"answer_id":48417560,"question_id":6826331,"body_markdown":"I haven&#39;t tested with your code so it would be totally different case though, still I&#39;d like to share my experience. (Also this must be too late answer though, I hope this answer still would help somebody in the future)\r\n\r\nI recently faced similar experience like you such as some times Network is unreachable, but sometimes not. In short words, what was cause is too small time out. It seems Java throws IOException with stating &quot;Network is unreachable&quot; when the connection fails because of it. It was so misleading (I would expect something like saying &quot;time out&quot;) and I spent almost a month to detect it. \r\n\r\nHere I found another post about how to set time out. \r\nhttps://stackoverflow.com/questions/5351689/alternative-to-java-net-url-for-custom-timeout-setting\r\n\r\nAgain, this might not the same case as you got experienced, but somebody for the future.\r\n\r\n\r\n","title":"java.net.SocketException: Network is unreachable: connect","body":"<p>I haven't tested with your code so it would be totally different case though, still I'd like to share my experience. (Also this must be too late answer though, I hope this answer still would help somebody in the future)</p>\n\n<p>I recently faced similar experience like you such as some times Network is unreachable, but sometimes not. In short words, what was cause is too small time out. It seems Java throws IOException with stating \"Network is unreachable\" when the connection fails because of it. It was so misleading (I would expect something like saying \"time out\") and I spent almost a month to detect it. </p>\n\n<p>Here I found another post about how to set time out. \n<a href=\"https://stackoverflow.com/questions/5351689/alternative-to-java-net-url-for-custom-timeout-setting\">Alternative to java.net.URL for custom timeout setting</a></p>\n\n<p>Again, this might not the same case as you got experienced, but somebody for the future.</p>\n"},{"tags":[],"owner":{"account_id":11500951,"reputation":101,"user_id":8428764,"display_name":"Lubos Prague"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1610551187,"creation_date":1610551187,"answer_id":65704803,"question_id":6826331,"body_markdown":"this just happened to me. None of the answers helped, as the issue was I have recently changed the target host configuration and put incorrect host value there. So it could just be wrong connection details as well.","title":"java.net.SocketException: Network is unreachable: connect","body":"<p>this just happened to me. None of the answers helped, as the issue was I have recently changed the target host configuration and put incorrect host value there. So it could just be wrong connection details as well.</p>\n"},{"tags":[],"owner":{"account_id":19174115,"reputation":110,"user_id":14135669,"display_name":"polendina"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690519221,"creation_date":1690519221,"answer_id":76784884,"question_id":6826331,"body_markdown":"In my case, my internet connection itself had DNS that apparently couldn&#39;t resolve the hostname.","title":"java.net.SocketException: Network is unreachable: connect","body":"<p>In my case, my internet connection itself had DNS that apparently couldn't resolve the hostname.</p>\n"}],"owner":{"account_id":178914,"reputation":2104,"user_id":411186,"accept_rate":60,"display_name":"sajad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86573,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":6826494,"answer_count":6,"score":10,"last_activity_date":1690519221,"creation_date":1311663078,"question_id":6826331,"body_markdown":"I am trying to download a xml text file from a web server using this method:\r\n\r\n\r\n    static void download (String url , String fileName) throws IOException{\r\n\r\n                FileWriter xmlWriter;\r\n                xmlWriter = new FileWriter(fileName);\r\n                System.out.println(&quot;URL to download is : &quot; + url);\r\n\r\n\t\t\t\t// here Exception is thrown/////////////////////////////////\r\n                BufferedReader inputTxtReader = new BufferedReader\r\n                            (new BufferedReader(new InputStreamReader(addURL.openStream())));\r\n\t\t\t\t////////////////////////////////////////////////////////\r\n\t\t\t\t\r\n\t\t\t\tString str ;\r\n                String fileInStr = &quot;&quot;;\r\n\r\n                str = inputTxtReader.readLine();\r\n\r\n                while (!(str == null)  ){///&amp;&amp; !(str.equals(&quot;&lt;/tv&gt;&quot;))\r\n                    fileInStr += (str + &quot;\\r\\n&quot;);\r\n                    str = inputTxtReader.readLine();\r\n                }\r\n\r\n                xmlWriter.write(fileInStr);\r\n                xmlWriter.flush();\r\n                xmlWriter.close();\r\n                System.out.println(&quot;File Downloaded&quot;);\r\n    }\r\n\t\r\n\r\nSometimes this exception is thrown (where I specified is code):\r\n\r\n\t\r\n\tjava.net.SocketException: Network is unreachable: connect\r\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\r\n        at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)\r\n        at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)\r\n        at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)\r\n        at java.net.Socket.connect(Socket.java:518)\r\n        at java.net.Socket.connect(Socket.java:468)\r\n        at sun.net.NetworkClient.doConnect(NetworkClient.java:157)\r\n        at sun.net.www.http.HttpClient.openServer(HttpClient.java:389)\r\n        at sun.net.www.http.HttpClient.openServer(HttpClient.java:516)\r\n        at sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:233)\r\n        at sun.net.www.http.HttpClient.New(HttpClient.java:306)\r\n        at sun.net.www.http.HttpClient.New(HttpClient.java:318)\r\n        at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:788)\r\n        at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:729)\r\n        at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:654)\r\n        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:977)\r\n        at java.net.URL.openStream(URL.java:1009)\r\n        at MessagePanel.download(MessagePanel.java:640)\r\n        at WelcomThread.run(MainBody2.java:891)\r\n\t\t\r\n\t\t\r\nPlease guide me\r\n\t\t\r\nThank you all.","title":"java.net.SocketException: Network is unreachable: connect","body":"<p>I am trying to download a xml text file from a web server using this method:</p>\n\n<pre><code>static void download (String url , String fileName) throws IOException{\n\n            FileWriter xmlWriter;\n            xmlWriter = new FileWriter(fileName);\n            System.out.println(\"URL to download is : \" + url);\n\n            // here Exception is thrown/////////////////////////////////\n            BufferedReader inputTxtReader = new BufferedReader\n                        (new BufferedReader(new InputStreamReader(addURL.openStream())));\n            ////////////////////////////////////////////////////////\n\n            String str ;\n            String fileInStr = \"\";\n\n            str = inputTxtReader.readLine();\n\n            while (!(str == null)  ){///&amp;&amp; !(str.equals(\"&lt;/tv&gt;\"))\n                fileInStr += (str + \"\\r\\n\");\n                str = inputTxtReader.readLine();\n            }\n\n            xmlWriter.write(fileInStr);\n            xmlWriter.flush();\n            xmlWriter.close();\n            System.out.println(\"File Downloaded\");\n}\n</code></pre>\n\n<p>Sometimes this exception is thrown (where I specified is code):</p>\n\n<pre><code>java.net.SocketException: Network is unreachable: connect\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)\n    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)\n    at java.net.Socket.connect(Socket.java:518)\n    at java.net.Socket.connect(Socket.java:468)\n    at sun.net.NetworkClient.doConnect(NetworkClient.java:157)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:389)\n    at sun.net.www.http.HttpClient.openServer(HttpClient.java:516)\n    at sun.net.www.http.HttpClient.&lt;init&gt;(HttpClient.java:233)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:306)\n    at sun.net.www.http.HttpClient.New(HttpClient.java:318)\n    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:788)\n    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:729)\n    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:654)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:977)\n    at java.net.URL.openStream(URL.java:1009)\n    at MessagePanel.download(MessagePanel.java:640)\n    at WelcomThread.run(MainBody2.java:891)\n</code></pre>\n\n<p>Please guide me</p>\n\n<p>Thank you all.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1690517693,"post_id":76784805,"comment_id":135367839,"body_markdown":"Instead of fixing `provideFruits`, fix `fruits.add`. Whoever wrote that should not have assumed the list is modifiable.","body":"Instead of fixing <code>provideFruits</code>, fix <code>fruits.add</code>. Whoever wrote that should not have assumed the list is modifiable."},{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":1,"creation_date":1690517901,"post_id":76784805,"comment_id":135367848,"body_markdown":"Create custom list class and return that. But there nothing such thing in Java. And I don&#39;t see any reason to be it there.","body":"Create custom list class and return that. But there nothing such thing in Java. And I don&#39;t see any reason to be it there."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1690518028,"post_id":76784805,"comment_id":135367857,"body_markdown":"It&#39;s arguably a design flaw, but there&#39;s no read-only List interface in the JDK. You can create your own, or use something like Guava&#39;s `ImmutableList` which at least deprecates those methods. But the general answer is you have to assume Lists are not mutable unless you know otherwise, like @Sweeper said.","body":"It&#39;s arguably a design flaw, but there&#39;s no read-only List interface in the JDK. You can create your own, or use something like Guava&#39;s <code>ImmutableList</code> which at least deprecates those methods. But the general answer is you have to assume Lists are not mutable unless you know otherwise, like @Sweeper said."}],"answers":[{"tags":[],"owner":{"account_id":22906904,"reputation":113,"user_id":17044833,"display_name":"Jaison "},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690518061,"creation_date":1690518061,"answer_id":76784823,"question_id":76784805,"body_markdown":"if `provideFruits();` is returning an immutable list the `fruits` list also will be immutable and you wont be able to add to it.\r\n\r\nThere are two options\r\n\r\n 1. Make `providerFruits()` return a mutable list. (*Additional Note just in case*: if you are using streams api to return the results in `providerFruits()`, note that `stream.toList()` will create an immutable list while `stream.collect(toList())` will create mutable lists.)\r\n 2. Change your code as follows,\r\n\r\n        List&lt;String&gt; fruits = new ArrayList&lt;&gt;(provideFruits());\r\n        fruits.add(&quot;Cherry&quot;);\r\n\r\nThis will ensure `fruits` is mutable even if results of `provideFruits()` is immutable\r\n","title":"In Java, is there an unmodifiable list class that can not be assigned to List class?","body":"<p>if <code>provideFruits();</code> is returning an immutable list the <code>fruits</code> list also will be immutable and you wont be able to add to it.</p>\n<p>There are two options</p>\n<ol>\n<li><p>Make <code>providerFruits()</code> return a mutable list. (<em>Additional Note just in case</em>: if you are using streams api to return the results in <code>providerFruits()</code>, note that <code>stream.toList()</code> will create an immutable list while <code>stream.collect(toList())</code> will create mutable lists.)</p>\n</li>\n<li><p>Change your code as follows,</p>\n<pre><code>List&lt;String&gt; fruits = new ArrayList&lt;&gt;(provideFruits());\nfruits.add(&quot;Cherry&quot;);\n</code></pre>\n</li>\n</ol>\n<p>This will ensure <code>fruits</code> is mutable even if results of <code>provideFruits()</code> is immutable</p>\n"}],"owner":{"account_id":1154857,"reputation":2235,"user_id":1135744,"accept_rate":50,"display_name":"Sanjay Vamja"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76784823,"answer_count":1,"score":0,"last_activity_date":1690518061,"creation_date":1690517587,"question_id":76784805,"body_markdown":"I want to prevent below runtime error:\r\n\r\n```\r\n  Exception java.lang.UnsupportedOperationException\r\n        at ImmutableCollections.uoe (ImmutableCollections.java:142)\r\n```\r\n\r\nwhile adding to an unknown List data type. eg:\r\n\r\n```\r\nList&lt;String&gt; fruits = provideFruits();\r\nfruits.add(&quot;Cherry&quot;);\r\n```\r\n\r\nAs an alternative, I am looking for a data type that `provideFruits()` can return as an unmodifiable list, but that can not be assigned to `List` class at compile time, so that it prevents this runtime misery!\r\n\r\n\r\n\r\n","title":"In Java, is there an unmodifiable list class that can not be assigned to List class?","body":"<p>I want to prevent below runtime error:</p>\n<pre><code>  Exception java.lang.UnsupportedOperationException\n        at ImmutableCollections.uoe (ImmutableCollections.java:142)\n</code></pre>\n<p>while adding to an unknown List data type. eg:</p>\n<pre><code>List&lt;String&gt; fruits = provideFruits();\nfruits.add(&quot;Cherry&quot;);\n</code></pre>\n<p>As an alternative, I am looking for a data type that <code>provideFruits()</code> can return as an unmodifiable list, but that can not be assigned to <code>List</code> class at compile time, so that it prevents this runtime misery!</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":191938,"reputation":15835,"user_id":432806,"accept_rate":100,"display_name":"pcalcao"},"score":0,"creation_date":1331653003,"post_id":9687153,"comment_id":12308513,"body_markdown":"Show us the meaningful part of the code, it&#39;s the only way we can guess what&#39;s happening.","body":"Show us the meaningful part of the code, it&#39;s the only way we can guess what&#39;s happening."},{"owner":{"account_id":32701,"reputation":7764,"user_id":90909,"accept_rate":89,"display_name":"qrtt1"},"score":0,"creation_date":1331653054,"post_id":9687153,"comment_id":12308538,"body_markdown":"You should manage the lost connection carefully http://stackoverflow.com/a/8997413/90909","body":"You should manage the lost connection carefully <a href=\"http://stackoverflow.com/a/8997413/90909\">stackoverflow.com/a/8997413/90909</a>"},{"owner":{"account_id":1309129,"reputation":498,"user_id":1257507,"accept_rate":67,"display_name":"Pita"},"score":1,"creation_date":1331653329,"post_id":9687153,"comment_id":12308659,"body_markdown":"i had the con.close method in my connector class. is that probably why then?","body":"i had the con.close method in my connector class. is that probably why then?"},{"owner":{"account_id":65396,"reputation":8715,"user_id":192465,"accept_rate":85,"display_name":"riddle_me_this"},"score":0,"creation_date":1482551921,"post_id":9687153,"comment_id":69823672,"body_markdown":"Upgrading to MySQL 5.6.28 resolved this issue for me (from 5.5.40)","body":"Upgrading to MySQL 5.6.28 resolved this issue for me (from 5.5.40)"}],"answers":[{"tags":[],"owner":{"account_id":1290660,"reputation":27194,"user_id":1242826,"display_name":"ChapMic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1331653155,"creation_date":1331653155,"answer_id":9687239,"question_id":9687153,"body_markdown":"Did you follow/read this tutorial : \r\n\r\n[Connectivity with MYSQL][1]\r\n\r\nYou have a part for your exception which can be useful for you.\r\n\r\nI will quote something about your specific exception, just try that : \r\n \r\n&gt; If you get a SQLException: Connection refused or Connection timed out\r\n&gt; or a MySQL specific CommunicationsException: Communications link\r\n&gt; failure, then it means that the DB isn&#39;t reachable at all. This can\r\n&gt; have one or more of the following causes:\r\n&gt; \r\n&gt; IP address or hostname in JDBC URL is wrong. Hostname in JDBC URL is\r\n&gt; not recognized by local DNS server. Port number is missing or wrong in\r\n&gt; JDBC URL. DB server is down. DB server doesn&#39;t accept TCP/IP\r\n&gt; connections. DB server has run out of connections. Something in\r\n&gt; between Java and DB is blocking connections, e.g. a firewall or proxy.\r\n&gt; \r\n&gt; \r\n&gt; To solve the one or the other, follow the following advices:\r\n&gt; \r\n&gt; Verify and test them with ping. Refresh DNS or use IP address in JDBC\r\n&gt; URL instead. Verify it based on my.cnf of MySQL DB. Start the DB.\r\n&gt; Verify if mysqld is started without the --skip-networking option.\r\n&gt; Restart the DB and fix your code accordingly that it closes\r\n&gt; connections in finally. Disable firewall and/or configure\r\n&gt; firewall/proxy to allow/forward the port.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2839321/java-connectivity-with-mysql/2840358#2840358","title":"Can not read response from server","body":"<p>Did you follow/read this tutorial : </p>\n\n<p><a href=\"https://stackoverflow.com/questions/2839321/java-connectivity-with-mysql/2840358#2840358\">Connectivity with MYSQL</a></p>\n\n<p>You have a part for your exception which can be useful for you.</p>\n\n<p>I will quote something about your specific exception, just try that : </p>\n\n<blockquote>\n  <p>If you get a SQLException: Connection refused or Connection timed out\n  or a MySQL specific CommunicationsException: Communications link\n  failure, then it means that the DB isn't reachable at all. This can\n  have one or more of the following causes:</p>\n  \n  <p>IP address or hostname in JDBC URL is wrong. Hostname in JDBC URL is\n  not recognized by local DNS server. Port number is missing or wrong in\n  JDBC URL. DB server is down. DB server doesn't accept TCP/IP\n  connections. DB server has run out of connections. Something in\n  between Java and DB is blocking connections, e.g. a firewall or proxy.</p>\n  \n  <p>To solve the one or the other, follow the following advices:</p>\n  \n  <p>Verify and test them with ping. Refresh DNS or use IP address in JDBC\n  URL instead. Verify it based on my.cnf of MySQL DB. Start the DB.\n  Verify if mysqld is started without the --skip-networking option.\n  Restart the DB and fix your code accordingly that it closes\n  connections in finally. Disable firewall and/or configure\n  firewall/proxy to allow/forward the port.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1865040,"reputation":171,"user_id":1688822,"display_name":"ashish"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1351517940,"creation_date":1351513989,"answer_id":13121717,"question_id":9687153,"body_markdown":"Sometimes this problem comes due to size of system RAM.May be you are inserting the data using buffer through RAM. To get out of this problem.\r\n\r\n 1. Set the Auto commit disable before inserting the data.\r\n 2. insert some amount of data appropriate to your System RAM (not the\r\n    whole).\r\n 3. Commit the query.\r\n 4. Do the steps 2 and 3 again until the whole insertion will not be\r\n    done.\r\n\r\n   \r\n\r\nYou can understand this by the following code.  \r\n\r\n\r\n\r\n    public static void main(string args[]) \r\n    {\r\n      Connection con = null;\r\n      Statement stm = null;\r\n      int i;\r\n      float ratio;\r\n      ratio=1.0f;\r\n      try\r\n      {\r\n        Class.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n        // Connecting to the database\r\n        con = DriverManager.getConnection(&quot;jdbc:mysql://127.0.0.1:3306/demo&quot;,\r\n                                          &quot;ashish&quot;, &quot;impetus&quot;);\r\n        File f = new File(&quot;filler&quot;); // taking the random text data from the file\r\n                                     // filler.txt and inserting that string\r\n                                     // in filler field of the relations\r\n        RandomAccessFile r = new RandomAccessFile(f,&quot;r&quot;);\r\n        Random randomGenerator = new Random();\r\n        String strLine=new String();\r\n        int r1,flag=0;\r\n        stm = con.createStatement();\r\n        con.setAutoCommit(false) ;\r\n\t\r\n        int k=0;\r\n        i=0;     \t\t\t\r\n\r\n        long sum2=0;\r\n        while(k%50000==0)\r\n        {\r\n          final long start = currentTimeMillis();\r\n          final StringBuilder builder =\r\n            new StringBuilder(&quot;INSERT INTO accounts \r\n                               (aid, bid,abalance,filler) VALUES &quot;);\r\n          while(i!=naccounts*ratio*scale )\r\n            {\r\n            int j=i+1;\r\n            for(int l=0;l&lt;40;l++)\r\n            {\r\n              strLine+=((char)r.read());\r\n              r.skipBytes(0);\r\n            }\r\n            r1=randomGenerator.nextInt(1500);\r\n            if(strLine.equals(&quot;&quot;))\r\n            {\r\n              flag=1;\r\n            }\r\n            if(flag!=1)\r\n            {\t\r\n              strLine=strLine.replaceAll(&quot;\\\\s&quot;,&quot;&quot;);\r\n              strLine=strLine.replaceAll(&quot;\\\\t&quot;,&quot;&quot;);\r\n            }\t\t    \t\t\r\n            flag=0;\r\n            if (i%50000!=0)\t\r\n            {\r\n              builder.append(&quot;,&quot;);\r\n            }\r\n            builder.append(format(&quot;(%s, %s, %s, &#39;%s&#39;)&quot;, j, \r\n                           i/naccounts+1, 0, strLine));\r\n            strLine=&quot;&quot;;\r\n            r.seek(r1);\r\n            i++;\r\n            if(i%50000==0||i&gt;=naccounts*ratio*scale)\r\n            {   \r\n              final String query = builder.toString();\r\n              final PreparedStatement statement1 = con.prepareStatement(query);\r\n              statement1.execute();\r\n              con.commit();\r\n              final long stop= currentTimeMillis();\r\n              sum2=sum2+(stop-start);\r\n              statement1.close();\r\n            }\r\n            if(i%50000==0||i&gt;=naccounts*ratio*scale)\r\n            {\r\n              break;\r\n            }\r\n          }\r\n          k=k+50000;\r\n          if(k&gt;naccounts*ratio*scale)\r\n          {\r\n            break;\r\n          }\r\n        }\r\n        System.out.println(i+&quot; rows inserted accounts table &quot;);\r\n        System.out.println(&quot;time taken = &quot;+sum2+&quot; milliseconds&quot;);\r\n      }\r\n      catch (SQLException e)\r\n      {\r\n        System.out.println(&quot;Connection Failed! Check output console&quot;);\r\n      \te.printStackTrace();\r\n      \treturn;\r\n      }\r\n      catch (Exception e) \r\n      {\r\n        e.printStackTrace();\r\n      }\r\n    }\r\n  \r\n   ","title":"Can not read response from server","body":"<p>Sometimes this problem comes due to size of system RAM.May be you are inserting the data using buffer through RAM. To get out of this problem.</p>\n\n<ol>\n<li>Set the Auto commit disable before inserting the data.</li>\n<li>insert some amount of data appropriate to your System RAM (not the\nwhole).</li>\n<li>Commit the query.</li>\n<li>Do the steps 2 and 3 again until the whole insertion will not be\ndone.</li>\n</ol>\n\n<p>You can understand this by the following code.  </p>\n\n<pre><code>public static void main(string args[]) \n{\n  Connection con = null;\n  Statement stm = null;\n  int i;\n  float ratio;\n  ratio=1.0f;\n  try\n  {\n    Class.forName(\"com.mysql.jdbc.Driver\");\n    // Connecting to the database\n    con = DriverManager.getConnection(\"jdbc:mysql://127.0.0.1:3306/demo\",\n                                      \"ashish\", \"impetus\");\n    File f = new File(\"filler\"); // taking the random text data from the file\n                                 // filler.txt and inserting that string\n                                 // in filler field of the relations\n    RandomAccessFile r = new RandomAccessFile(f,\"r\");\n    Random randomGenerator = new Random();\n    String strLine=new String();\n    int r1,flag=0;\n    stm = con.createStatement();\n    con.setAutoCommit(false) ;\n\n    int k=0;\n    i=0;                \n\n    long sum2=0;\n    while(k%50000==0)\n    {\n      final long start = currentTimeMillis();\n      final StringBuilder builder =\n        new StringBuilder(\"INSERT INTO accounts \n                           (aid, bid,abalance,filler) VALUES \");\n      while(i!=naccounts*ratio*scale )\n        {\n        int j=i+1;\n        for(int l=0;l&lt;40;l++)\n        {\n          strLine+=((char)r.read());\n          r.skipBytes(0);\n        }\n        r1=randomGenerator.nextInt(1500);\n        if(strLine.equals(\"\"))\n        {\n          flag=1;\n        }\n        if(flag!=1)\n        {   \n          strLine=strLine.replaceAll(\"\\\\s\",\"\");\n          strLine=strLine.replaceAll(\"\\\\t\",\"\");\n        }                   \n        flag=0;\n        if (i%50000!=0) \n        {\n          builder.append(\",\");\n        }\n        builder.append(format(\"(%s, %s, %s, '%s')\", j, \n                       i/naccounts+1, 0, strLine));\n        strLine=\"\";\n        r.seek(r1);\n        i++;\n        if(i%50000==0||i&gt;=naccounts*ratio*scale)\n        {   \n          final String query = builder.toString();\n          final PreparedStatement statement1 = con.prepareStatement(query);\n          statement1.execute();\n          con.commit();\n          final long stop= currentTimeMillis();\n          sum2=sum2+(stop-start);\n          statement1.close();\n        }\n        if(i%50000==0||i&gt;=naccounts*ratio*scale)\n        {\n          break;\n        }\n      }\n      k=k+50000;\n      if(k&gt;naccounts*ratio*scale)\n      {\n        break;\n      }\n    }\n    System.out.println(i+\" rows inserted accounts table \");\n    System.out.println(\"time taken = \"+sum2+\" milliseconds\");\n  }\n  catch (SQLException e)\n  {\n    System.out.println(\"Connection Failed! Check output console\");\n    e.printStackTrace();\n    return;\n  }\n  catch (Exception e) \n  {\n    e.printStackTrace();\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2097386,"reputation":41,"user_id":1865845,"display_name":"jidnesh"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1354269269,"creation_date":1354268097,"answer_id":13642410,"question_id":9687153,"body_markdown":"I was having the same sort of issue. I referred many post and comments but the thing worked for me was changing some parameters of the `my.cnf` file. Hope it will help you also ....\r\n\r\nSet following parameters in **my.cnf [mysqld]** section\r\n\r\n    interactive_timeout=180 # &quot;No.of sec. a server waits for activity on interactive connection before closing it&quot;\r\n    \r\n    wait_timeout=180 # &quot;No. of sec. a server waits for an activity on a connection before closing it&quot;\r\n    \r\n    max_connect_errors=9999 # &quot;More than this number of interrupted connections from a host this host will be blocked from further connections&quot;\r\n    \r\n    skip-name-resolve # &quot;Don&#39;t resolved host names. All host names are IP&#39;s&quot;","title":"Can not read response from server","body":"<p>I was having the same sort of issue. I referred many post and comments but the thing worked for me was changing some parameters of the <code>my.cnf</code> file. Hope it will help you also ....</p>\n\n<p>Set following parameters in <strong>my.cnf [mysqld]</strong> section</p>\n\n<pre><code>interactive_timeout=180 # \"No.of sec. a server waits for activity on interactive connection before closing it\"\n\nwait_timeout=180 # \"No. of sec. a server waits for an activity on a connection before closing it\"\n\nmax_connect_errors=9999 # \"More than this number of interrupted connections from a host this host will be blocked from further connections\"\n\nskip-name-resolve # \"Don't resolved host names. All host names are IP's\"\n</code></pre>\n"}],"owner":{"account_id":1309129,"reputation":498,"user_id":1257507,"accept_rate":67,"display_name":"Pita"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32837,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":3,"score":11,"last_activity_date":1690517757,"creation_date":1331652882,"question_id":9687153,"body_markdown":"I have written a Java Program and the program connects to a database on my server, to find records, write records, update and delete. for some reason finding records works, but most of the time when i try to save or write a record it gives an error message saying:\r\n\r\n    com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\r\n\r\n    The last packet successfully received from the server was 9,787 milliseconds ago.       The last packet sent successfully to the server was 8,183 milliseconds ago.\r\n\r\n    Caused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.\r\n\tat com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2552)\r\n\tat com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3002)\r\n\t... 46 more\r\n\r\n\r\nCan anyone explain why this is happening?\r\nUsuually this gives me the error message when trying to add a record, after i had the software running for more than about half a minute. seems to loose connection or something. when i run the program and quickly write a new record, it works","title":"Can not read response from server","body":"<p>I have written a Java Program and the program connects to a database on my server, to find records, write records, update and delete. for some reason finding records works, but most of the time when i try to save or write a record it gives an error message saying:</p>\n\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure\n\nThe last packet successfully received from the server was 9,787 milliseconds ago.       The last packet sent successfully to the server was 8,183 milliseconds ago.\n\nCaused by: java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.\nat com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:2552)\nat com.mysql.jdbc.MysqlIO.reuseAndReadPacket(MysqlIO.java:3002)\n... 46 more\n</code></pre>\n\n<p>Can anyone explain why this is happening?\nUsuually this gives me the error message when trying to add a record, after i had the software running for more than about half a minute. seems to loose connection or something. when i run the program and quickly write a new record, it works</p>\n"},{"tags":["java","spring","postgresql","hibernate","postgis"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1690465274,"post_id":76780276,"comment_id":135360105,"body_markdown":"Does this answer your question? [PostGIS Geometry saving: &quot;Invalid endian flag value encountered.&quot;](https://stackoverflow.com/questions/12215212/postgis-geometry-saving-invalid-endian-flag-value-encountered)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/12215212/postgis-geometry-saving-invalid-endian-flag-value-encountered\">PostGIS Geometry saving: &quot;Invalid endian flag value encountered.&quot;</a>"},{"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"score":0,"creation_date":1690465676,"post_id":76780276,"comment_id":135360185,"body_markdown":"No it does not.. I tried adding anotations like you can see in the comments above the entity, but it theoretically does not need it.\nI&#39;ve tried using diferent versions of the dependencies and they don&#39;t work either..\nchanging the dialect also does not work......","body":"No it does not.. I tried adding anotations like you can see in the comments above the entity, but it theoretically does not need it. I&#39;ve tried using diferent versions of the dependencies and they don&#39;t work either.. changing the dialect also does not work......"}],"answers":[{"tags":[],"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690486685,"creation_date":1690486685,"answer_id":76782913,"question_id":76780276,"body_markdown":"So after some digging I got to [this][1] question which got me in the right direction.\r\n\r\nIt was basically **springboot - hibernate** problem. They look like this now: \r\n\r\n    id &#39;org.springframework.boot&#39; version &#39;3.0.1&#39;\r\n\r\n    dependencies {\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n        implementation &#39;org.hibernate:hibernate-core:6.1.7.Final&#39;\r\n        implementation &#39;org.hibernate:hibernate-spatial:6.1.7.Final&#39;\r\n        \r\n        implementation &#39;net.postgis:postgis-jdbc:2.5.0&#39;\r\n        runtimeOnly &#39;org.postgresql:postgresql:42.6.0&#39;\r\n\r\nAlso in spring boot version 3.0.1 you don&#39;t need to specify the dialect. So you can delete this:\r\n\r\n    jpa.properties.hibernate.dialect: org.hibernate.dialect.PostgreSQL95Dialect\r\n\r\nThe hibernate libs now look fine: \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/73257636/using-hibernate-6-x-with-spring-boot-2-7-x-not-working\r\n  [2]: https://i.stack.imgur.com/d7fxL.png","title":"PostGIS saving Point as VARBINARY - Invalid endian","body":"<p>So after some digging I got to <a href=\"https://stackoverflow.com/questions/73257636/using-hibernate-6-x-with-spring-boot-2-7-x-not-working\">this</a> question which got me in the right direction.</p>\n<p>It was basically <strong>springboot - hibernate</strong> problem. They look like this now:</p>\n<pre><code>id 'org.springframework.boot' version '3.0.1'\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.hibernate:hibernate-core:6.1.7.Final'\n    implementation 'org.hibernate:hibernate-spatial:6.1.7.Final'\n    \n    implementation 'net.postgis:postgis-jdbc:2.5.0'\n    runtimeOnly 'org.postgresql:postgresql:42.6.0'\n</code></pre>\n<p>Also in spring boot version 3.0.1 you don't need to specify the dialect. So you can delete this:</p>\n<pre><code>jpa.properties.hibernate.dialect: org.hibernate.dialect.PostgreSQL95Dialect\n</code></pre>\n<p>The hibernate libs now look fine:</p>\n<p><a href=\"https://i.stack.imgur.com/d7fxL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d7fxL.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5410764,"reputation":448,"user_id":4307638,"accept_rate":67,"display_name":"lemario"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690517336,"creation_date":1690464648,"question_id":76780276,"body_markdown":"I am trying to add a Point to a Postgres database and hibernate is not recognizing the Point type. \r\n\r\nEntity:\r\n\r\n    @Table(name = &quot;test_locations&quot;)\r\n    public class TestLoc {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n    \r\n        //@Column(columnDefinition = &quot;geometry(Point, 4326)&quot;)\r\n        //@Column(columnDefinition = &quot;Geometry&quot;, nullable = true)\r\n        //@Type(type = &quot;org.hibernate.spatial.GeometryType&quot;)\r\n        //@Column(columnDefinition = &quot;geometry(Point, 4326)&quot;)\r\n        //@Column(columnDefinition = &quot;Point&quot;)\r\n        //@Type(type = &quot;jts_geometry&quot;)\r\n    \r\n        private Point geom;\r\n    }\r\n\r\nSaving in service:\r\n\r\n    locationRepository.save(location);\r\n\r\nThe query comes out as:\r\n\r\n    insert into test_locations (geom) values (?)\r\n    binding parameter [1] as [VARBINARY] - [POINT (38.743494 -9.100922)]\r\n\r\nAnd then I get the error:\r\n\r\n&gt; SQL Error: 0, SQLState: XX000   \r\n&gt; ERROR: Invalid endian flag value encountered.\r\n\r\n`application.yml` dialect:\r\n\r\n    jpa:\r\n    properties:\r\n      hibernate:\r\n        #dialect: org.hibernate.spatial.dialect.postgis.PostgisDialect  # Set the PostGIS dialect for Hibernate org.hibernate.spatial.dialect.postgis.PostgisDialect\r\n        dialect: org.hibernate.dialect.PostgreSQL95Dialect  # Set the PostGIS dialect for Hibernate org.hibernate.spatial.dialect.postgis.PostgisDialect\r\n        #dialect: org.hibernate.dialect.H2Dialect\r\n        jdbc.lob.non_contextual_creation: true  # Set this to true if you encounter issues with large objects (LOBs)\r\n\r\n`build.gradle dependencies`:\r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.locationtech.jts:jts-core:1.19.0&#39;\r\n\timplementation &#39;org.hibernate.orm:hibernate-spatial:6.2.6.Final&#39;\r\n\timplementation &#39;net.postgis:postgis-jdbc:2.5.1&#39;\r\n\timplementation &#39;org.postgresql:postgresql:42.2.27&#39;\r\n\r\n\r\nThis is how my hibernate libs look like. Is it ok to have &quot;duplicates with a different version&quot;?\r\n\r\n [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PrTtk.png\r\n\r\nI&#39;ve trying adding column definitions, changed around dependencies, and every other option I&#39;ve found on the internet with no success. \r\n\r\nHow do I make hibernate recognize the Point type?\r\n\r\nI&#39;ve tried: \r\n\r\n* Adding annotations like you can see in the comments above the entity, but it theoretically does not need it. \r\n* Using different versions of the dependencies and they don&#39;t work either.. \r\n* Changing the dialect also does not work.....","title":"PostGIS saving Point as VARBINARY - Invalid endian","body":"<p>I am trying to add a Point to a Postgres database and hibernate is not recognizing the Point type.</p>\n<p>Entity:</p>\n<pre><code>@Table(name = &quot;test_locations&quot;)\npublic class TestLoc {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    //@Column(columnDefinition = &quot;geometry(Point, 4326)&quot;)\n    //@Column(columnDefinition = &quot;Geometry&quot;, nullable = true)\n    //@Type(type = &quot;org.hibernate.spatial.GeometryType&quot;)\n    //@Column(columnDefinition = &quot;geometry(Point, 4326)&quot;)\n    //@Column(columnDefinition = &quot;Point&quot;)\n    //@Type(type = &quot;jts_geometry&quot;)\n\n    private Point geom;\n}\n</code></pre>\n<p>Saving in service:</p>\n<pre><code>locationRepository.save(location);\n</code></pre>\n<p>The query comes out as:</p>\n<pre><code>insert into test_locations (geom) values (?)\nbinding parameter [1] as [VARBINARY] - [POINT (38.743494 -9.100922)]\n</code></pre>\n<p>And then I get the error:</p>\n<blockquote>\n<p>SQL Error: 0, SQLState: XX000<br />\nERROR: Invalid endian flag value encountered.</p>\n</blockquote>\n<p><code>application.yml</code> dialect:</p>\n<pre><code>jpa:\nproperties:\n  hibernate:\n    #dialect: org.hibernate.spatial.dialect.postgis.PostgisDialect  # Set the PostGIS dialect for Hibernate org.hibernate.spatial.dialect.postgis.PostgisDialect\n    dialect: org.hibernate.dialect.PostgreSQL95Dialect  # Set the PostGIS dialect for Hibernate org.hibernate.spatial.dialect.postgis.PostgisDialect\n    #dialect: org.hibernate.dialect.H2Dialect\n    jdbc.lob.non_contextual_creation: true  # Set this to true if you encounter issues with large objects (LOBs)\n</code></pre>\n<p><code>build.gradle dependencies</code>:</p>\n<pre><code>implementation 'org.springframework.boot:spring-boot-starter-web'\nimplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\nimplementation 'org.locationtech.jts:jts-core:1.19.0'\nimplementation 'org.hibernate.orm:hibernate-spatial:6.2.6.Final'\nimplementation 'net.postgis:postgis-jdbc:2.5.1'\nimplementation 'org.postgresql:postgresql:42.2.27'\n</code></pre>\n<p>This is how my hibernate libs look like. Is it ok to have &quot;duplicates with a different version&quot;?</p>\n<p><a href=\"https://i.stack.imgur.com/PrTtk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PrTtk.png\" alt=\"enter image description here\" /></a></p>\n<p>I've trying adding column definitions, changed around dependencies, and every other option I've found on the internet with no success.</p>\n<p>How do I make hibernate recognize the Point type?</p>\n<p>I've tried:</p>\n<ul>\n<li>Adding annotations like you can see in the comments above the entity, but it theoretically does not need it.</li>\n<li>Using different versions of the dependencies and they don't work either..</li>\n<li>Changing the dialect also does not work.....</li>\n</ul>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1690251148,"post_id":76758439,"comment_id":135323866,"body_markdown":"All you&#39;re doing is passing an *immutable* list. Why not do the sorts in the stream? Why all the boxing and unboxing?","body":"All you&#39;re doing is passing an <i>immutable</i> list. Why not do the sorts in the stream? Why all the boxing and unboxing?"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690251458,"creation_date":1690238933,"answer_id":76758451,"question_id":76758439,"body_markdown":"The list returned by `.toList()` (a method of `Stream`) is immutable. Sorting it (`.sort()`) sorts &#39;in place&#39; and this requires mutating the list. You can&#39;t do that.\r\n\r\nThe usual fix is to first copy the immutable list into a mutable one: `convList = new ArrayList&lt;Integer&gt;(convList);`.\r\n\r\nHowever, all of your code is a bit suspect. Why go from `int[]` to `List&lt;Integer&gt;` to `Stream` and back again?\r\n\r\nEDIT: Let&#39;s just leave &#39;I want to go from one to another&#39; as written - instead of making a list and then trying to sort the list, instead sort the stream as it &#39;runs&#39;:\r\n\r\n```\r\nList&lt;Integer&gt; convList = Arrays.stream(arr)\r\n  .sorted()  // Add this!\r\n  .boxed()\r\n  .toArray();\r\n```\r\n","title":"i&#39;m getting an Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException","body":"<p>The list returned by <code>.toList()</code> (a method of <code>Stream</code>) is immutable. Sorting it (<code>.sort()</code>) sorts 'in place' and this requires mutating the list. You can't do that.</p>\n<p>The usual fix is to first copy the immutable list into a mutable one: <code>convList = new ArrayList&lt;Integer&gt;(convList);</code>.</p>\n<p>However, all of your code is a bit suspect. Why go from <code>int[]</code> to <code>List&lt;Integer&gt;</code> to <code>Stream</code> and back again?</p>\n<p>EDIT: Let's just leave 'I want to go from one to another' as written - instead of making a list and then trying to sort the list, instead sort the stream as it 'runs':</p>\n<pre><code>List&lt;Integer&gt; convList = Arrays.stream(arr)\n  .sorted()  // Add this!\n  .boxed()\n  .toArray();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3737180,"reputation":644,"user_id":3107864,"display_name":"vaibhavsahu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690517221,"creation_date":1690517221,"answer_id":76784781,"question_id":76758439,"body_markdown":"Replace this line       \r\n\r\n      List&lt;Integer&gt; convList = Arrays.stream(arr).boxed().toList();\r\n\r\nwith\r\n\r\n    List&lt;Integer&gt; convList = new ArrayList&lt;&gt;(Arrays.stream(arr).boxed().toList());\r\n\r\nIt will create a new mutable list which will be further sorted by \r\n\r\n    Collections.sort(convList); \r\n\r\nWithout any issues.\r\n\r\nHope this helps","title":"i&#39;m getting an Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException","body":"<p>Replace this line</p>\n<pre><code>  List&lt;Integer&gt; convList = Arrays.stream(arr).boxed().toList();\n</code></pre>\n<p>with</p>\n<pre><code>List&lt;Integer&gt; convList = new ArrayList&lt;&gt;(Arrays.stream(arr).boxed().toList());\n</code></pre>\n<p>It will create a new mutable list which will be further sorted by</p>\n<pre><code>Collections.sort(convList); \n</code></pre>\n<p>Without any issues.</p>\n<p>Hope this helps</p>\n"}],"owner":{"account_id":15437885,"reputation":39,"user_id":11137450,"display_name":"Goutham"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76758451,"answer_count":2,"score":1,"last_activity_date":1690517221,"creation_date":1690238723,"question_id":76758439,"body_markdown":"The environment details i&#39;m running my program :\r\n\r\n&gt; java version &quot;17.0.7&quot; 2023-04-18 LTS Java(TM) SE Runtime Environment\r\n&gt; (build 17.0.7+8-LTS-224) Java HotSpot(TM) 64-Bit Server VM (build\r\n&gt; 17.0.7+8-LTS-224, mixed mode, sharing)\r\n\r\n\r\nProgram:\r\n```\r\npublic class Conversions {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tList&lt;Integer&gt; lIn = new ArrayList&lt;&gt;();\r\n\t\tlIn.add(4);\r\n\t\tlIn.add(56);\r\n\t\tlIn.add(423);\r\n\t\tlIn.add(2516);\r\n\t\tlIn.add(924);\r\n\t\tlIn.add(5611);\r\n\r\n\t\t//ArrayList to Array\r\n\t\tint[] conArray = lIn.stream().mapToInt(i -&gt; i).toArray();\r\n\t\t\r\n\t\t\r\n\t\t// Array to ArrayList\r\n\t\t\r\n\t\tint[] arr = {5,8,9,34,63,119};\r\n\t\tList&lt;Integer&gt; convList = Arrays.stream(arr).boxed().toList();\r\n\t\tSystem.out.println(convList);\t //30\t\r\n\t\t                                 //31\r\n        Collections.sort(convList);      //32\r\n\t    Collections.reverse(convList);   //33\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nError:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException \tat\r\n&gt; java.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)\r\n&gt; \tat\r\n&gt; java.base/java.util.ImmutableCollections$AbstractImmutableList.sort(ImmutableCollections.java:261)\r\n&gt; \tat java.base/java.util.Collections.sort(Collections.java:145) \tat\r\n&gt; com.example.DependencyInjection.Conversions.main**(Conversions.java:32)\r\n\r\n\r\nI&#39;m trying to  understand why the compiler is throwing `UnsupportedOperationException` even though i&#39;m using the `Collections.sort()` method correctly . All I&#39;m doing is passing a list but still I&#39;m getting the exception.","title":"i&#39;m getting an Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException","body":"<p>The environment details i'm running my program :</p>\n<blockquote>\n<p>java version &quot;17.0.7&quot; 2023-04-18 LTS Java(TM) SE Runtime Environment\n(build 17.0.7+8-LTS-224) Java HotSpot(TM) 64-Bit Server VM (build\n17.0.7+8-LTS-224, mixed mode, sharing)</p>\n</blockquote>\n<p>Program:</p>\n<pre><code>public class Conversions {\n\n    public static void main(String[] args) {\n        \n        List&lt;Integer&gt; lIn = new ArrayList&lt;&gt;();\n        lIn.add(4);\n        lIn.add(56);\n        lIn.add(423);\n        lIn.add(2516);\n        lIn.add(924);\n        lIn.add(5611);\n\n        //ArrayList to Array\n        int[] conArray = lIn.stream().mapToInt(i -&gt; i).toArray();\n        \n        \n        // Array to ArrayList\n        \n        int[] arr = {5,8,9,34,63,119};\n        List&lt;Integer&gt; convList = Arrays.stream(arr).boxed().toList();\n        System.out.println(convList);    //30   \n                                         //31\n        Collections.sort(convList);      //32\n        Collections.reverse(convList);   //33\n\n    }\n\n}\n</code></pre>\n<p>Error:</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException    at\njava.base/java.util.ImmutableCollections.uoe(ImmutableCollections.java:142)\nat\njava.base/java.util.ImmutableCollections$AbstractImmutableList.sort(ImmutableCollections.java:261)\nat java.base/java.util.Collections.sort(Collections.java:145)   at\ncom.example.DependencyInjection.Conversions.main**(Conversions.java:32)</p>\n</blockquote>\n<p>I'm trying to  understand why the compiler is throwing <code>UnsupportedOperationException</code> even though i'm using the <code>Collections.sort()</code> method correctly . All I'm doing is passing a list but still I'm getting the exception.</p>\n"},{"tags":["java","image","codenameone"],"answers":[{"tags":[],"owner":{"account_id":394396,"reputation":52134,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690513842,"creation_date":1690513842,"answer_id":76784620,"question_id":76782723,"body_markdown":"Codename One doesn&#39;t support CSS layout since it conflicts with the high level layout manager logic so elements such as width and height are always ignored. Furthermore, width/height properties will only include valid values after layout is performed.\r\n\r\nYou shouldn&#39;t use `setWidth` and similar APIs as they are designed for use by the `LayoutManager` which will override your settings. Even if it does work it will break when the phone is rotated.\r\n\r\nIn Codename One images that aren&#39;t purely design images (backgrounds etc.) are considered part of the code not of the CSS as they apply to all the elements. Since your image appears in a list of elements it&#39;s content, not design and is part of that Java code.\r\n\r\nIn this case if you just want an icon use `setIcon` and provide an image. If the image is hardcoded in the CSS you can still include it there and then get it from the `Resources` class as it will be a part of the default theme.\r\n\r\nIf the image is content you can use classes like `URLImage` etc. to fetch it dynamically. Both will size the label correctly with the image.","title":"List with an Image and MultiSpanButton","body":"<p>Codename One doesn't support CSS layout since it conflicts with the high level layout manager logic so elements such as width and height are always ignored. Furthermore, width/height properties will only include valid values after layout is performed.</p>\n<p>You shouldn't use <code>setWidth</code> and similar APIs as they are designed for use by the <code>LayoutManager</code> which will override your settings. Even if it does work it will break when the phone is rotated.</p>\n<p>In Codename One images that aren't purely design images (backgrounds etc.) are considered part of the code not of the CSS as they apply to all the elements. Since your image appears in a list of elements it's content, not design and is part of that Java code.</p>\n<p>In this case if you just want an icon use <code>setIcon</code> and provide an image. If the image is hardcoded in the CSS you can still include it there and then get it from the <code>Resources</code> class as it will be a part of the default theme.</p>\n<p>If the image is content you can use classes like <code>URLImage</code> etc. to fetch it dynamically. Both will size the label correctly with the image.</p>\n"}],"owner":{"account_id":28844238,"reputation":11,"user_id":22091681,"display_name":"Tony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690513842,"creation_date":1690484658,"question_id":76782723,"body_markdown":"I want to display a list of data with an image.\r\n\r\nI can load the image into CSS but I have little control the image&#39;s size and placement.\r\n\r\nI can set an image on a label using CSS, but I cannot set the labels size so it sets itself up with a width of 0 and height of 0 (making it invisible).  If I set the width and height in the CSS or in the Java code before the Label is added to the form the setting is simply ignored.\r\n\r\n```\r\nContainer list = new Container(BoxLayout.y());\r\nlist.setScrollableY(true);\r\n\r\n// resultset is a List&lt;Map&lt;String, Object&gt;&gt; returned by an API\r\nfor (Map&lt;String, Object&gt; obj : resultset) {\r\n    String id = obj.containsKey(&quot;id&quot;) ? (String) obj.get(&quot;id&quot;) : &quot;&quot;;\r\n\r\n    String startDate = &quot;&quot;;\r\n    String s = (String) obj.get(&quot;start_date&quot;);\r\n    if ((s != null) &amp;&amp; (!s.isEmpty())) {\r\n       try {\r\n          long l = Long.parseLong(s);\r\n\r\n          SimpleDateFormat sdf = new SimpleDateFormat(Constants.DATE_FORMAT);\r\n          startDate = sdf.format(new Date(l));\r\n       } catch (Exception e) {\r\n          e.printStackTrace();\r\n       }\r\n    }\r\n\r\n    String name = obj.containsKey(&quot;name&quot;) ? (String) obj.get(&quot;name&quot;) : &quot;&quot;;\r\n    String description = obj.containsKey(&quot;description&quot;) ? (String) obj.get(&quot;description&quot;) : &quot;&quot;;\r\n    String eventType = obj.containsKey(&quot;event_type&quot;) ? (String) obj.get(&quot;event_type&quot;) : &quot;&quot;;\r\n\r\n    Container c = new Container(BoxLayout.x());\r\n    Label img = new Label();\r\n    // img.setWidth() img.setHeight() has no effect here\r\n    img.setIconUIID(&quot;meeting&quot;); // I will change this dynamically depending on the eventType later\r\n    c.add(img);\r\n\r\n    SpanMultiButton mb = new SpanMultiButton();\r\n    mb.setTextLine1(startDate + &quot;: &quot; + name);\r\n    mb.setTextLine2(description);\r\n    mb.setTextLine3(eventType);\r\n\r\n    mb.addActionListener(ee -&gt; {\r\n       // TODO: Handle the click on the item\r\n    });\r\n\r\n    c.add(mb);\r\n    list.add(c);\r\n}\r\n\r\nform.add(CN.CENTER, list);\r\n\r\n```\r\n\r\nThe CSS for &quot;meeting&quot;\r\n```\r\nmeeting {\r\n    background-image: url(&quot;img/meeting.png&quot;);\r\n    background-repeat: no-repeat;\r\n}\r\n```\r\nAnd the meeting.png file is in src/main/css/img.  if I set it as the UIID on the MultiSpanButton I can see the image in the background, so I know it&#39;s not a problem with the file or the location of the file.\r\n\r\nI basically want to have the list show up something like this:\r\n\r\n```\r\n+------------------------+\r\n| IMG  | SpanMultiButton |\r\n+------------------------+\r\n| IMG  | SpanMultiButton |\r\n+------------------------+\r\n| IMG  | SpanMultiButton |\r\n+------------------------+\r\n| IMG  | SpanMultiButton |\r\n+------------------------+\r\n```\r\n\r\nIMG, however, doesn&#39;t show and SpanMultiButton appears on the very left.  I can see that the IMG is there if I inspect it in the simulator.\r\n\r\n\r\n\r\n\r\nI cannot get the GuiBuilder to open so I cannot put the images into the resource file to try to open and add it as an image.\r\n\r\nThe above code works, apart from the fact that the image (background of the label) is not shown because the labels size is 0 x 0.","title":"List with an Image and MultiSpanButton","body":"<p>I want to display a list of data with an image.</p>\n<p>I can load the image into CSS but I have little control the image's size and placement.</p>\n<p>I can set an image on a label using CSS, but I cannot set the labels size so it sets itself up with a width of 0 and height of 0 (making it invisible).  If I set the width and height in the CSS or in the Java code before the Label is added to the form the setting is simply ignored.</p>\n<pre><code>Container list = new Container(BoxLayout.y());\nlist.setScrollableY(true);\n\n// resultset is a List&lt;Map&lt;String, Object&gt;&gt; returned by an API\nfor (Map&lt;String, Object&gt; obj : resultset) {\n    String id = obj.containsKey(&quot;id&quot;) ? (String) obj.get(&quot;id&quot;) : &quot;&quot;;\n\n    String startDate = &quot;&quot;;\n    String s = (String) obj.get(&quot;start_date&quot;);\n    if ((s != null) &amp;&amp; (!s.isEmpty())) {\n       try {\n          long l = Long.parseLong(s);\n\n          SimpleDateFormat sdf = new SimpleDateFormat(Constants.DATE_FORMAT);\n          startDate = sdf.format(new Date(l));\n       } catch (Exception e) {\n          e.printStackTrace();\n       }\n    }\n\n    String name = obj.containsKey(&quot;name&quot;) ? (String) obj.get(&quot;name&quot;) : &quot;&quot;;\n    String description = obj.containsKey(&quot;description&quot;) ? (String) obj.get(&quot;description&quot;) : &quot;&quot;;\n    String eventType = obj.containsKey(&quot;event_type&quot;) ? (String) obj.get(&quot;event_type&quot;) : &quot;&quot;;\n\n    Container c = new Container(BoxLayout.x());\n    Label img = new Label();\n    // img.setWidth() img.setHeight() has no effect here\n    img.setIconUIID(&quot;meeting&quot;); // I will change this dynamically depending on the eventType later\n    c.add(img);\n\n    SpanMultiButton mb = new SpanMultiButton();\n    mb.setTextLine1(startDate + &quot;: &quot; + name);\n    mb.setTextLine2(description);\n    mb.setTextLine3(eventType);\n\n    mb.addActionListener(ee -&gt; {\n       // TODO: Handle the click on the item\n    });\n\n    c.add(mb);\n    list.add(c);\n}\n\nform.add(CN.CENTER, list);\n\n</code></pre>\n<p>The CSS for &quot;meeting&quot;</p>\n<pre><code>meeting {\n    background-image: url(&quot;img/meeting.png&quot;);\n    background-repeat: no-repeat;\n}\n</code></pre>\n<p>And the meeting.png file is in src/main/css/img.  if I set it as the UIID on the MultiSpanButton I can see the image in the background, so I know it's not a problem with the file or the location of the file.</p>\n<p>I basically want to have the list show up something like this:</p>\n<pre><code>+------------------------+\n| IMG  | SpanMultiButton |\n+------------------------+\n| IMG  | SpanMultiButton |\n+------------------------+\n| IMG  | SpanMultiButton |\n+------------------------+\n| IMG  | SpanMultiButton |\n+------------------------+\n</code></pre>\n<p>IMG, however, doesn't show and SpanMultiButton appears on the very left.  I can see that the IMG is there if I inspect it in the simulator.</p>\n<p>I cannot get the GuiBuilder to open so I cannot put the images into the resource file to try to open and add it as an image.</p>\n<p>The above code works, apart from the fact that the image (background of the label) is not shown because the labels size is 0 x 0.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1690502880,"post_id":76783934,"comment_id":135366713,"body_markdown":"What Happened When You Tried It?","body":"What Happened When You Tried It?"},{"owner":{"account_id":28226064,"reputation":55,"user_id":21576056,"display_name":"peque&#241;aluna"},"score":0,"creation_date":1690538433,"post_id":76783934,"comment_id":135371209,"body_markdown":"@user207421 it works okay apparently","body":"@user207421 it works okay apparently"}],"answers":[{"tags":[],"owner":{"account_id":14283811,"reputation":6405,"user_id":10317684,"display_name":"Ricky Mo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690513746,"creation_date":1690512843,"answer_id":76784581,"question_id":76783934,"body_markdown":"Digging down to the source code, you can find that [CountDownTimer#cancel()](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/os/CountDownTimer.java#93) eventually call [MessageQueue#removeMessage()](https://android.googlesource.com/platform/frameworks/base/+/android-4.4.4_r2.0.1/core/java/android/os/MessageQueue.java#408):\r\n```java\r\n    void removeMessages(Handler h, int what, Object object) {\r\n        if (h == null) {\r\n            return;\r\n        }\r\n        synchronized (this) {\r\n            Message p = mMessages;\r\n            // Remove all messages at front.\r\n            while (p != null &amp;&amp; p.target == h &amp;&amp; p.what == what\r\n                   &amp;&amp; (object == null || p.obj == object)) {\r\n                Message n = p.next;\r\n                mMessages = n;\r\n                p.recycle();\r\n                p = n;\r\n            }\r\n            // Remove all messages after front.\r\n            while (p != null) {\r\n                Message n = p.next;\r\n                if (n != null) {\r\n                    if (n.target == h &amp;&amp; n.what == what\r\n                        &amp;&amp; (object == null || n.obj == object)) {\r\n                        Message nn = n.next;\r\n                        n.recycle();\r\n                        p.next = nn;\r\n                        continue;\r\n                    }\r\n                }\r\n                p = n;\r\n            }\r\n        }\r\n    }\r\n```\r\nWhich suggests nothing harmful would happen when `what` is not found from the messages list. It&#39;d just loop through the list and do nothing.","title":"Is it okay to cancel a CountDownTimer if it has been already canceled or finished?","body":"<p>Digging down to the source code, you can find that <a href=\"https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/os/CountDownTimer.java#93\" rel=\"nofollow noreferrer\">CountDownTimer#cancel()</a> eventually call <a href=\"https://android.googlesource.com/platform/frameworks/base/+/android-4.4.4_r2.0.1/core/java/android/os/MessageQueue.java#408\" rel=\"nofollow noreferrer\">MessageQueue#removeMessage()</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    void removeMessages(Handler h, int what, Object object) {\n        if (h == null) {\n            return;\n        }\n        synchronized (this) {\n            Message p = mMessages;\n            // Remove all messages at front.\n            while (p != null &amp;&amp; p.target == h &amp;&amp; p.what == what\n                   &amp;&amp; (object == null || p.obj == object)) {\n                Message n = p.next;\n                mMessages = n;\n                p.recycle();\n                p = n;\n            }\n            // Remove all messages after front.\n            while (p != null) {\n                Message n = p.next;\n                if (n != null) {\n                    if (n.target == h &amp;&amp; n.what == what\n                        &amp;&amp; (object == null || n.obj == object)) {\n                        Message nn = n.next;\n                        n.recycle();\n                        p.next = nn;\n                        continue;\n                    }\n                }\n                p = n;\n            }\n        }\n    }\n</code></pre>\n<p>Which suggests nothing harmful would happen when <code>what</code> is not found from the messages list. It'd just loop through the list and do nothing.</p>\n"}],"owner":{"account_id":28226064,"reputation":55,"user_id":21576056,"display_name":"peque&#241;aluna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690513746,"creation_date":1690499412,"question_id":76783934,"body_markdown":"I have an activity that has 3 CountDownTimers attributes. When one CountDownTimer is running the other 2 are not running. I have implemented a method that cancel all the 3 CountDownTimer:\r\n\r\n    public void cancelTimers(){\r\n        if (mCountDownTimer1 != null) {\r\n            mCountDownTimer1.cancel();\r\n        }\r\n        if (mCountDownTimer2 != null) {\r\n            mCountDownTimer2.cancel();\r\n        }\r\n    \r\n        if (mCountDownTimer3 != null) {\r\n            mCountDownTimer3.cancel();\r\n        }\r\n    }\r\n\r\n\r\nNow my question is, imagine that because I have cancelTimers() in various parts of my code (for example in onPause() and in showInterstitialAd()) (As onPause() will be executed immediately after showInterstitialAd()), cancelTimers() will be executed 2 times one immediately after the other. Is that a problem? Is it totally fine that cancelTimers() will be executed even if some timers have been just canceled or have just finished and called onFinish() method?","title":"Is it okay to cancel a CountDownTimer if it has been already canceled or finished?","body":"<p>I have an activity that has 3 CountDownTimers attributes. When one CountDownTimer is running the other 2 are not running. I have implemented a method that cancel all the 3 CountDownTimer:</p>\n<pre><code>public void cancelTimers(){\n    if (mCountDownTimer1 != null) {\n        mCountDownTimer1.cancel();\n    }\n    if (mCountDownTimer2 != null) {\n        mCountDownTimer2.cancel();\n    }\n\n    if (mCountDownTimer3 != null) {\n        mCountDownTimer3.cancel();\n    }\n}\n</code></pre>\n<p>Now my question is, imagine that because I have cancelTimers() in various parts of my code (for example in onPause() and in showInterstitialAd()) (As onPause() will be executed immediately after showInterstitialAd()), cancelTimers() will be executed 2 times one immediately after the other. Is that a problem? Is it totally fine that cancelTimers() will be executed even if some timers have been just canceled or have just finished and called onFinish() method?</p>\n"},{"tags":["java","reflection","byte-buddy"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1690504318,"post_id":76779141,"comment_id":135366863,"body_markdown":"Sorry to crash your party, but is the purpose of Codewars to learn programming or to find ways to hack the kata&#39;s preconditions? To me this sounds pretty clear: _&quot;To make this kata worth its rank, **some APIs are not allowed** in your Java solution.&quot;_ So stop being lazy and implement the solution by yourself. It is a coding kata, for heaven&#39;s sake!","body":"Sorry to crash your party, but is the purpose of Codewars to learn programming or to find ways to hack the kata&#39;s preconditions? To me this sounds pretty clear: <i>&quot;To make this kata worth its rank, <b>some APIs are not allowed</b> in your Java solution.&quot;</i> So stop being lazy and implement the solution by yourself. It is a coding kata, for heaven&#39;s sake!"},{"owner":{"account_id":23103592,"reputation":55,"user_id":17212637,"display_name":"Luka"},"score":0,"creation_date":1690512222,"post_id":76779141,"comment_id":135367448,"body_markdown":"well I actually learning ByteBuddy from Codewars task. But I guess you are in the right. Like I said, it&#39;s boring to do the right way, and this way is not actually &quot;lazy&quot;, will need an extensive amount of reflection knowledge to pull through this","body":"well I actually learning ByteBuddy from Codewars task. But I guess you are in the right. Like I said, it&#39;s boring to do the right way, and this way is not actually &quot;lazy&quot;, will need an extensive amount of reflection knowledge to pull through this"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1690513938,"post_id":76779141,"comment_id":135367570,"body_markdown":"I think there are better ways to learn BB. But of course, you choose your own path while trying to learn something new. Good luck with that. As for this particular kata, I still think it makes sense to not trick your way around it but solve it. It might prove to be quite challenging and not so boring, after all.","body":"I think there are better ways to learn BB. But of course, you choose your own path while trying to learn something new. Good luck with that. As for this particular kata, I still think it makes sense to not trick your way around it but solve it. It might prove to be quite challenging and not so boring, after all."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690456394,"creation_date":1690456394,"answer_id":76779182,"question_id":76779141,"body_markdown":"Sure, since we&#39;re hacking anyway, this should be fun:\r\n\r\n1. Instead of calling the `BigInteger` constructor directly, call it using reflection: `Class.forName(&quot;java.math.BigInteger&quot;).newInstance(n)` *\r\n2. Now take that String literal, and apply an encoding of your choice. Base64 should do. Save the encoded string as a constant.\r\n3. At runtime, decode the String and pass it to `Class.forName`.\r\n\r\n\\* Does `newInstance` have a varargs option? If not, use `getConstructors` instead and call the right one.","title":"Using bytebuddy reflection to bypass file string check","body":"<p>Sure, since we're hacking anyway, this should be fun:</p>\n<ol>\n<li>Instead of calling the <code>BigInteger</code> constructor directly, call it using reflection: <code>Class.forName(&quot;java.math.BigInteger&quot;).newInstance(n)</code> *</li>\n<li>Now take that String literal, and apply an encoding of your choice. Base64 should do. Save the encoded string as a constant.</li>\n<li>At runtime, decode the String and pass it to <code>Class.forName</code>.</li>\n</ol>\n<p>* Does <code>newInstance</code> have a varargs option? If not, use <code>getConstructors</code> instead and call the right one.</p>\n"}],"owner":{"account_id":23103592,"reputation":55,"user_id":17212637,"display_name":"Luka"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690512825,"creation_date":1690456126,"question_id":76779141,"body_markdown":"There&#39;s this problem in *Codewars*\r\nhttps://www.codewars.com/kata/58a3fa665973c2a6e80000c4/train/java\r\n\r\nWe will have to just square root a very big number. Of course all of us would think about BigInteger.sqrt - but the challenge itself reject these words: reflection, biginteger, bigdecimal, runtime, process, script. (P/s you can&#39;t use unicode either).\r\n\r\nUpdate: also blocked &quot;newInstance&quot;, &quot;invoke&quot;\r\n\r\nWell there&#39;s no fun in doing what intended for the task, so I currently trying to bypass this by using bytebuddy (luckily they don&#39;t reject this).\r\n\r\n```\r\nimport net.bytebuddy.ByteBuddy;\r\nimport net.bytebuddy.agent.ByteBuddyAgent;\r\nimport net.bytebuddy.dynamic.DynamicType.Loaded;\r\nimport net.bytebuddy.dynamic.loading.ClassReloadingStrategy;\r\nimport net.bytebuddy.implementation.FixedValue;\r\nimport net.bytebuddy.matcher.ElementMatchers;\r\n\r\npublic class Kata {\t\r\n  public static String integerSquareRoot(String n) {\r\n    ByteBuddyAgent.install();\r\n\t\tLoaded&lt;Kata&gt; dynamicType = new ByteBuddy().redefine(Kata.class).method(ElementMatchers.named(&quot;text&quot;))\r\n\t\t\t\t.intercept(FixedValue.value(new java.math.BigInteger(n).sqrt().toString())).make()\r\n\t\t\t\t.load(Thread.currentThread().getContextClassLoader(), ClassReloadingStrategy.fromInstalledAgent());\r\n    return Kata.text(&quot;forsenCD&quot;);\r\n\t}\r\n  \r\n  public static String text(String n){\r\n    return n;\r\n  }\r\n}\r\n```\r\n\r\nWhat it does here is to force the *text()* method to return what&#39;s in the intercept\r\n\r\nThis solution itself solve the task, but as you can see, it still have &quot;BigInteger&quot; in the intercept.\r\n\r\nI&#39;m noob at bytebuddy, so anyone have a way to solve this using bytebuddy reflection, that maybe can change the BigInteger in the intercept with a string (so I can use character array) to solve this.\r\n\r\nOr maybe even using Nashorn engine to get to some JavaScript API.\r\n\r\nPlease feel free to share your thought.","title":"Using bytebuddy reflection to bypass file string check","body":"<p>There's this problem in <em>Codewars</em>\n<a href=\"https://www.codewars.com/kata/58a3fa665973c2a6e80000c4/train/java\" rel=\"nofollow noreferrer\">https://www.codewars.com/kata/58a3fa665973c2a6e80000c4/train/java</a></p>\n<p>We will have to just square root a very big number. Of course all of us would think about BigInteger.sqrt - but the challenge itself reject these words: reflection, biginteger, bigdecimal, runtime, process, script. (P/s you can't use unicode either).</p>\n<p>Update: also blocked &quot;newInstance&quot;, &quot;invoke&quot;</p>\n<p>Well there's no fun in doing what intended for the task, so I currently trying to bypass this by using bytebuddy (luckily they don't reject this).</p>\n<pre><code>import net.bytebuddy.ByteBuddy;\nimport net.bytebuddy.agent.ByteBuddyAgent;\nimport net.bytebuddy.dynamic.DynamicType.Loaded;\nimport net.bytebuddy.dynamic.loading.ClassReloadingStrategy;\nimport net.bytebuddy.implementation.FixedValue;\nimport net.bytebuddy.matcher.ElementMatchers;\n\npublic class Kata { \n  public static String integerSquareRoot(String n) {\n    ByteBuddyAgent.install();\n        Loaded&lt;Kata&gt; dynamicType = new ByteBuddy().redefine(Kata.class).method(ElementMatchers.named(&quot;text&quot;))\n                .intercept(FixedValue.value(new java.math.BigInteger(n).sqrt().toString())).make()\n                .load(Thread.currentThread().getContextClassLoader(), ClassReloadingStrategy.fromInstalledAgent());\n    return Kata.text(&quot;forsenCD&quot;);\n    }\n  \n  public static String text(String n){\n    return n;\n  }\n}\n</code></pre>\n<p>What it does here is to force the <em>text()</em> method to return what's in the intercept</p>\n<p>This solution itself solve the task, but as you can see, it still have &quot;BigInteger&quot; in the intercept.</p>\n<p>I'm noob at bytebuddy, so anyone have a way to solve this using bytebuddy reflection, that maybe can change the BigInteger in the intercept with a string (so I can use character array) to solve this.</p>\n<p>Or maybe even using Nashorn engine to get to some JavaScript API.</p>\n<p>Please feel free to share your thought.</p>\n"},{"tags":["java","windows-subsystem-for-linux"],"comments":[{"owner":{"account_id":9499339,"reputation":127,"user_id":7061105,"display_name":"Akito"},"score":0,"creation_date":1598659927,"post_id":62544919,"comment_id":112540514,"body_markdown":"Indeed, very peculiar. I have a similar issue. I built a Docker image in WSL2, based on the openjdk image and I am getting &quot;exec format error&quot; when trying to run this image on another system. Build and target system are both amd64 and for Java it shouldn&#39;t matter anyway. I am also using Java 11, in this case.","body":"Indeed, very peculiar. I have a similar issue. I built a Docker image in WSL2, based on the openjdk image and I am getting &quot;exec format error&quot; when trying to run this image on another system. Build and target system are both amd64 and for Java it shouldn&#39;t matter anyway. I am also using Java 11, in this case."}],"owner":{"account_id":3570541,"reputation":928,"user_id":2980967,"display_name":"dustinevan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":345,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690510659,"creation_date":1592952420,"question_id":62544919,"body_markdown":"Using WSL Ubuntu with zsh. I pulled in OpenJDK@11 using homebrew. When I try to run java I get the following error: \r\n```\r\n~$ java --version\r\nzsh: exec format error: java\r\n~$ which java\r\n/home/linuxbrew/.linuxbrew/opt/openjdk@11/bin/java\r\n```\r\n\r\nHow do I fix this issue?","title":"OpenJDK@11 exec format error on Windows Subsystem Linux Ubuntu","body":"<p>Using WSL Ubuntu with zsh. I pulled in OpenJDK@11 using homebrew. When I try to run java I get the following error:</p>\n<pre><code>~$ java --version\nzsh: exec format error: java\n~$ which java\n/home/linuxbrew/.linuxbrew/opt/openjdk@11/bin/java\n</code></pre>\n<p>How do I fix this issue?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1690459869,"post_id":76779457,"comment_id":135358659,"body_markdown":"Sure. Put the JSON files in the code folder. It won&#39;t work that way at runtime (there is no source folder at runtime), but you could add a step to your build to copy JSON to the resources folder.","body":"Sure. Put the JSON files in the code folder. It won&#39;t work that way at runtime (there is no source folder at runtime), but you could add a step to your build to copy JSON to the resources folder."},{"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"score":0,"creation_date":1690462180,"post_id":76779457,"comment_id":135359256,"body_markdown":"But then you have to also change the path during build to access the correct directory","body":"But then you have to also change the path during build to access the correct directory"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1690462874,"post_id":76779457,"comment_id":135359456,"body_markdown":"*But then you have to also change the path during build to access the correct directory* We just copied the JSON to the correct directory. Why do we also have to change the path?","body":"<i>But then you have to also change the path during build to access the correct directory</i> We just copied the JSON to the correct directory. Why do we also have to change the path?"},{"owner":{"account_id":987285,"reputation":17009,"user_id":1005481,"accept_rate":89,"display_name":"barfuin"},"score":1,"creation_date":1690471623,"post_id":76779457,"comment_id":135361656,"body_markdown":"Ah, you came to Java from Node. Really, **don&#39;t** put data files where people would expect source code. Maintainers will hate you for that. BUT you *can* do it, to your code it is no difference, since at runtime the java and resources directories get merged anyway.","body":"Ah, you came to Java from Node. Really, <b>don&#39;t</b> put data files where people would expect source code. Maintainers will hate you for that. BUT you <i>can</i> do it, to your code it is no difference, since at runtime the java and resources directories get merged anyway."},{"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"score":0,"creation_date":1690473631,"post_id":76779457,"comment_id":135362096,"body_markdown":"@barfuin Not really, I started with Java and do web stuff here and then, but I like the approach and freedom in this regard, especially when you package by feature.","body":"@barfuin Not really, I started with Java and do web stuff here and then, but I like the approach and freedom in this regard, especially when you package by feature."}],"owner":{"account_id":2691023,"reputation":16196,"user_id":2324388,"accept_rate":41,"display_name":"Marian Kl&#252;hspies"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690510512,"creation_date":1690458737,"question_id":76779457,"body_markdown":"First of all, I&#39;m very aware that you have to put everything except source code files into the resources directory in Java **by design**. \r\n\r\nSometimes, however, especially **JSON files may act** as a **code extension**, containing structures that you want to have **close to related source code** files and keep them in focus during development, and not &quot;hidden&quot; in the resource directory somewhere.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThat&#39;s what you&#39;d also do in the **Web / Node environment**, where you&#39;d import a JSON from your .js / .ts file and comingle it with the rest of your code.\r\n\r\n\r\n\r\n**Is it somehow possible to do that in Java as well, be it by customizing the Gradle configuration, etc?**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5dX18.png","title":"How to load a .json file from java/ instead of resources/","body":"<p>First of all, I'm very aware that you have to put everything except source code files into the resources directory in Java <strong>by design</strong>.</p>\n<p>Sometimes, however, especially <strong>JSON files may act</strong> as a <strong>code extension</strong>, containing structures that you want to have <strong>close to related source code</strong> files and keep them in focus during development, and not &quot;hidden&quot; in the resource directory somewhere.</p>\n<p><a href=\"https://i.stack.imgur.com/5dX18.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5dX18.png\" alt=\"enter image description here\" /></a></p>\n<p>That's what you'd also do in the <strong>Web / Node environment</strong>, where you'd import a JSON from your .js / .ts file and comingle it with the rest of your code.</p>\n<p><strong>Is it somehow possible to do that in Java as well, be it by customizing the Gradle configuration, etc?</strong></p>\n"},{"tags":["java","apache-axis"],"owner":{"account_id":29107454,"reputation":1,"user_id":22297897,"display_name":"m_rossi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690510490,"creation_date":1690510490,"question_id":76784455,"body_markdown":"A legacy java project was given to our team to update it, so i was given the task. The project uses many org.apache.axis classes, so i&#39;m trying the replacement, [apache axis2](https://axis.apache.org/axis2/java/core/index.html). But i cannot seem to find an axis2 replacement for some of the old axis classes. The classes are the following:\r\n\r\n\r\n```\r\norg.apache.axis.encoding.SerializationContext\r\norg.apache.axis.encoding.Serializer\r\norg.apache.axis.encoding.Deserializer\r\n\r\norg.apache.axis.encoding.ser.CalendarSerializer\r\norg.apache.axis.encoding.ser.BeanSerializer\r\norg.apache.axis.encoding.ser.EnumSerializer\r\norg.apache.axis.encoding.ser.EnumDeserializer\r\n\r\norg.apache.axis.description.TypeDesc\r\norg.apache.axis.description.ElementDesc\r\n```\r\n\r\n\r\nI looked at the [migration guide](https://axis.apache.org/axis2/java/core/docs/migration.html) for something like a list of old axis clases and their axis2 equivalent, with no luck. \r\n\r\nI also searched the axis2 [api docs](https://axis.apache.org/axis2/java/core/apidocs/index.html) and the [package tree](https://axis.apache.org/axis2/java/core/apidocs/overview-tree.html) for the classes without any result. Finally i went trough the [deprecated list](https://axis.apache.org/axis2/java/core/apidocs/deprecated-list.html) but again the classes were not listed.\r\n\r\nSo my question is if there are any apache axis2 replacements for the classes listed, or they no longer exist?","title":"Replacement for specific org.apache.axis classes","body":"<p>A legacy java project was given to our team to update it, so i was given the task. The project uses many org.apache.axis classes, so i'm trying the replacement, <a href=\"https://axis.apache.org/axis2/java/core/index.html\" rel=\"nofollow noreferrer\">apache axis2</a>. But i cannot seem to find an axis2 replacement for some of the old axis classes. The classes are the following:</p>\n<pre><code>org.apache.axis.encoding.SerializationContext\norg.apache.axis.encoding.Serializer\norg.apache.axis.encoding.Deserializer\n\norg.apache.axis.encoding.ser.CalendarSerializer\norg.apache.axis.encoding.ser.BeanSerializer\norg.apache.axis.encoding.ser.EnumSerializer\norg.apache.axis.encoding.ser.EnumDeserializer\n\norg.apache.axis.description.TypeDesc\norg.apache.axis.description.ElementDesc\n</code></pre>\n<p>I looked at the <a href=\"https://axis.apache.org/axis2/java/core/docs/migration.html\" rel=\"nofollow noreferrer\">migration guide</a> for something like a list of old axis clases and their axis2 equivalent, with no luck.</p>\n<p>I also searched the axis2 <a href=\"https://axis.apache.org/axis2/java/core/apidocs/index.html\" rel=\"nofollow noreferrer\">api docs</a> and the <a href=\"https://axis.apache.org/axis2/java/core/apidocs/overview-tree.html\" rel=\"nofollow noreferrer\">package tree</a> for the classes without any result. Finally i went trough the <a href=\"https://axis.apache.org/axis2/java/core/apidocs/deprecated-list.html\" rel=\"nofollow noreferrer\">deprecated list</a> but again the classes were not listed.</p>\n<p>So my question is if there are any apache axis2 replacements for the classes listed, or they no longer exist?</p>\n"},{"tags":["java","datetime","java-8","timezone"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1690507415,"post_id":76784324,"comment_id":135367098,"body_markdown":"How about asking the user for an offset first, then only show timezones currently at that offset/time zones with that offset as the standard offset?","body":"How about asking the user for an offset first, then only show timezones currently at that offset/time zones with that offset as the standard offset?"},{"owner":{"account_id":5138960,"reputation":105,"user_id":4116915,"accept_rate":50,"display_name":"HashTags"},"score":0,"creation_date":1690507524,"post_id":76784324,"comment_id":135367109,"body_markdown":"I don&#39;t have that privilege, But I fixed offset as UTC","body":"I don&#39;t have that privilege, But I fixed offset as UTC"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1690507678,"post_id":76784324,"comment_id":135367120,"body_markdown":"What I meant was to group it on the standard offset (since you said &quot;group it on some rules&quot;) What do you mean you don&#39;t have that privilege?","body":"What I meant was to group it on the standard offset (since you said &quot;group it on some rules&quot;) What do you mean you don&#39;t have that privilege?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1690508009,"post_id":76784324,"comment_id":135367136,"body_markdown":"If you group by standard offset, the largest group is only about 50 zones. Is that a &quot;user-friendly&quot; list for you?","body":"If you group by standard offset, the largest group is only about 50 zones. Is that a &quot;user-friendly&quot; list for you?"},{"owner":{"account_id":5138960,"reputation":105,"user_id":4116915,"accept_rate":50,"display_name":"HashTags"},"score":0,"creation_date":1690509269,"post_id":76784324,"comment_id":135367234,"body_markdown":"@Sweeper that would address my issue, Can you help ?","body":"@Sweeper that would address my issue, Can you help ?"}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690510146,"creation_date":1690510146,"answer_id":76784443,"question_id":76784324,"body_markdown":"You can group the timezones by their current offsets. The user would choose their current offset first, and then all the timezones that currently have that offset would be shown.\r\n\r\n```\r\nvar timezoneGroups = ZoneId.getAvailableZoneIds().stream()\r\n        .map(ZoneId::of)\r\n        .collect(Collectors.groupingBy(x -&gt; x.getRules().getOffset(Instant.now())));\r\n```\r\n\r\nAlternatively, group by `getStandardOffset(Instant.now())` if you think your users are going to be more familiar with those.\r\n\r\nThis gives you a `Map&lt;ZoneOffset, List&lt;ZoneId&gt;&gt;`. Here is an example of printing it to the command line:\r\n\r\n```\r\n// sort the offsets first...\r\ntimezoneGroups.entrySet().stream().sorted(Map.Entry.comparingByKey())\r\n    .forEach(entry -&gt; {\r\n        System.out.println(entry.getKey());\r\n        for (var zone: entry.getValue()) {\r\n            System.out.print(&quot;    &quot;);\r\n            System.out.println(zone.getId());\r\n        }\r\n    });\r\n```\r\n\r\nExample output:\r\n\r\n```\r\n...\r\n-01:00\r\n    Etc/GMT+1\r\n    Atlantic/Cape_Verde\r\n    Atlantic/Azores\r\n    America/Scoresbysund\r\n-02:00\r\n    Etc/GMT+2\r\n    America/Noronha\r\n    Brazil/DeNoronha\r\n    Atlantic/South_Georgia\r\n-03:00\r\n    America/Miquelon\r\n    America/Argentina/Catamarca\r\n    America/Argentina/Cordoba\r\n    America/Araguaina\r\n    America/Argentina/Salta\r\n...\r\n```","title":"List of Time Zones in Java","body":"<p>You can group the timezones by their current offsets. The user would choose their current offset first, and then all the timezones that currently have that offset would be shown.</p>\n<pre><code>var timezoneGroups = ZoneId.getAvailableZoneIds().stream()\n        .map(ZoneId::of)\n        .collect(Collectors.groupingBy(x -&gt; x.getRules().getOffset(Instant.now())));\n</code></pre>\n<p>Alternatively, group by <code>getStandardOffset(Instant.now())</code> if you think your users are going to be more familiar with those.</p>\n<p>This gives you a <code>Map&lt;ZoneOffset, List&lt;ZoneId&gt;&gt;</code>. Here is an example of printing it to the command line:</p>\n<pre><code>// sort the offsets first...\ntimezoneGroups.entrySet().stream().sorted(Map.Entry.comparingByKey())\n    .forEach(entry -&gt; {\n        System.out.println(entry.getKey());\n        for (var zone: entry.getValue()) {\n            System.out.print(&quot;    &quot;);\n            System.out.println(zone.getId());\n        }\n    });\n</code></pre>\n<p>Example output:</p>\n<pre><code>...\n-01:00\n    Etc/GMT+1\n    Atlantic/Cape_Verde\n    Atlantic/Azores\n    America/Scoresbysund\n-02:00\n    Etc/GMT+2\n    America/Noronha\n    Brazil/DeNoronha\n    Atlantic/South_Georgia\n-03:00\n    America/Miquelon\n    America/Argentina/Catamarca\n    America/Argentina/Cordoba\n    America/Araguaina\n    America/Argentina/Salta\n...\n</code></pre>\n"}],"owner":{"account_id":5138960,"reputation":105,"user_id":4116915,"accept_rate":50,"display_name":"HashTags"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76784443,"answer_count":1,"score":1,"last_activity_date":1690510146,"creation_date":1690507269,"question_id":76784324,"body_markdown":"I am using below code to generate a time zone list with Offset. \r\n\r\n    public static List&lt;String&gt; TimeZonesCollectionUTC(OffsetType type)\r\n    {\r\n        List&lt;String&gt; timezonesList = new ArrayList&lt;&gt;();\r\n        Set&lt;String&gt; zoneIds = ZoneId.getAvailableZoneIds();\r\n        LocalDateTime now = LocalDateTime.now();\r\n        zoneIds.forEach((zoneId) -&gt;\r\n        {\r\n            timezonesList.add(&quot;(&quot; + type + now.atZone(ZoneId.of(zoneId))\r\n                    .getOffset().getId().replace(&quot;Z&quot;, &quot;+00:00&quot;) + &quot;) &quot; + zoneId);\r\n        });\r\n        return timezonesList;\r\n    }\r\n\r\nThe issue is it provides me 600+ time zones. But expectation is to get a user friendly time zone list with less number of list or group it on some rules. \r\nNeed some help here to create a custom list of time zone in Java with daylight saving also taken care\r\nTIA","title":"List of Time Zones in Java","body":"<p>I am using below code to generate a time zone list with Offset.</p>\n<pre><code>public static List&lt;String&gt; TimeZonesCollectionUTC(OffsetType type)\n{\n    List&lt;String&gt; timezonesList = new ArrayList&lt;&gt;();\n    Set&lt;String&gt; zoneIds = ZoneId.getAvailableZoneIds();\n    LocalDateTime now = LocalDateTime.now();\n    zoneIds.forEach((zoneId) -&gt;\n    {\n        timezonesList.add(&quot;(&quot; + type + now.atZone(ZoneId.of(zoneId))\n                .getOffset().getId().replace(&quot;Z&quot;, &quot;+00:00&quot;) + &quot;) &quot; + zoneId);\n    });\n    return timezonesList;\n}\n</code></pre>\n<p>The issue is it provides me 600+ time zones. But expectation is to get a user friendly time zone list with less number of list or group it on some rules.\nNeed some help here to create a custom list of time zone in Java with daylight saving also taken care\nTIA</p>\n"},{"tags":["python","java","opencv"],"comments":[{"owner":{"account_id":543600,"reputation":1014,"user_id":2125723,"accept_rate":80,"display_name":"ryanwebjackson"},"score":0,"creation_date":1689941542,"post_id":76709338,"comment_id":135287864,"body_markdown":"Please attempt a solution to the problem, then update your Question.","body":"Please attempt a solution to the problem, then update your Question."}],"answers":[{"tags":[],"owner":{"account_id":1988393,"reputation":687,"user_id":1783046,"accept_rate":50,"display_name":"zephor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689653317,"creation_date":1689653317,"answer_id":76709473,"question_id":76709338,"body_markdown":"found this, thanks for new bing\r\n\r\n    Mat img = Imgcodecs.imread(imgPath, Imgcodecs.IMREAD_UNCHANGED);\r\n    Mat dst = new Mat(img.size(), CvType.CV_8UC4);\r\n    Core.inRange(img, new Scalar(0, 0, 0, 0), new Scalar(255, 255, 255, 0), dst);\r\n    Imgproc.cvtColor(dst, dst, Imgproc.COLOR_GRAY2BGRA);\r\n    Core.add(img, dst, dst);\r\n\r\n","title":"how to set transparent pixel to white in java using opencv?","body":"<p>found this, thanks for new bing</p>\n<pre><code>Mat img = Imgcodecs.imread(imgPath, Imgcodecs.IMREAD_UNCHANGED);\nMat dst = new Mat(img.size(), CvType.CV_8UC4);\nCore.inRange(img, new Scalar(0, 0, 0, 0), new Scalar(255, 255, 255, 0), dst);\nImgproc.cvtColor(dst, dst, Imgproc.COLOR_GRAY2BGRA);\nCore.add(img, dst, dst);\n</code></pre>\n"}],"owner":{"account_id":1988393,"reputation":687,"user_id":1783046,"accept_rate":50,"display_name":"zephor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76709473,"answer_count":1,"score":-3,"last_activity_date":1690509260,"creation_date":1689650370,"question_id":76709338,"body_markdown":"what&#39;s the equivalent code in java using opencv ?\r\n\r\n    #make mask of where the transparent bits are\r\n    trans_mask = image[:,:,3] == 0\r\n    \r\n    #replace areas of transparency with white and not transparent\r\n    image[trans_mask] = [255, 255, 255, 255]\r\n\r\nupdated:\r\n\r\nI don&#39;t get it, why people downvote this. the &quot;easy&quot; solution is so clear that you assign each pixel in a loop, but that would not as efficient as this way. I searched for it and got no clues. why these people don&#39;t understand this question in the first place and try to discuss it. if you guys don&#39;t know it just leave it.\r\n\r\nif you try to process images in java efficiently, this question is useful to you.\r\n\r\n","title":"how to set transparent pixel to white in java using opencv?","body":"<p>what's the equivalent code in java using opencv ?</p>\n<pre><code>#make mask of where the transparent bits are\ntrans_mask = image[:,:,3] == 0\n\n#replace areas of transparency with white and not transparent\nimage[trans_mask] = [255, 255, 255, 255]\n</code></pre>\n<p>updated:</p>\n<p>I don't get it, why people downvote this. the &quot;easy&quot; solution is so clear that you assign each pixel in a loop, but that would not as efficient as this way. I searched for it and got no clues. why these people don't understand this question in the first place and try to discuss it. if you guys don't know it just leave it.</p>\n<p>if you try to process images in java efficiently, this question is useful to you.</p>\n"},{"tags":["java","pattern-matching","string-matching"],"answers":[{"tags":[],"owner":{"account_id":26444463,"reputation":19,"user_id":20088481,"display_name":"sk w"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690450706,"creation_date":1690450706,"answer_id":76778423,"question_id":76778081,"body_markdown":"The regex variable can be written as:\r\n\r\n    final String regex = &quot;.*LIST.*\\\\(\\&quot;car[1|0]\\&quot;\\\\ \\&quot;car[1|0]\\&quot;\\\\)\\\\ RETURN.*\\\\R&quot;;","title":"Pattern match without a string order","body":"<p>The regex variable can be written as:</p>\n<pre><code>final String regex = &quot;.*LIST.*\\\\(\\&quot;car[1|0]\\&quot;\\\\ \\&quot;car[1|0]\\&quot;\\\\)\\\\ RETURN.*\\\\R&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690508535,"creation_date":1690496759,"answer_id":76783770,"question_id":76778081,"body_markdown":"You could do this.\r\n\r\n```java\r\nfinal String regex = &quot;.*LIST.*\\\\((?:\\&quot;car1\\&quot; \\&quot;car0\\&quot;|\\&quot;car0\\&quot; \\&quot;car1\\&quot;)\\\\) RETURN.*\\\\R&quot;;\r\n```\r\n\r\nAnd if you don&#39;t understand what it means, you should familiarize yourself with the documentation for [`java.util.regex.Pattern`][1]. That link is basically your bible when it comes to writing Regular Expressions in Java.\r\n\r\nAnd if that is not clear enough for you, here is an exploded view of the exact same string, but with a breakdown of what each individual component means.\r\n\r\n```java\r\nfinal String regex = &quot;&quot;\r\n    + &quot;.*&quot;     //wildcard -- anything or nothing can go here.\r\n    + &quot;LIST&quot;   //the literal string LIST in all-caps\r\n    + &quot;.*&quot;     //another wildcard\r\n    + &quot;\\\\(&quot;    //an escaped opening parentheses\r\n    + &quot;(?:&quot;    //the opener of a non-capturing capture group\r\n    + &quot;\\&quot;&quot;     //an escaped double quote\r\n    + &quot;car1&quot;   //the literal string car1\r\n    + &quot;\\&quot;&quot;     //another escaped double quote\r\n    + &quot; &quot;      //a single whitespace -- pressing the space bar once\r\n    + &quot;\\&quot;&quot;     //yet another escaped double quote\r\n    + &quot;car0&quot;   //the literal string car0\r\n    + &quot;\\&quot;&quot;     //4th double quote thus far\r\n    + &quot;|&quot;      //This is a very special symbol -- when you place this symbol\r\n               //inside of any type of capture group, you should treat it\r\n               //like an or operator in Java if statements\r\n    + &quot;\\&quot;&quot;     //5th double quote thus far\r\n    + &quot;car0&quot;   //the literal string car0\r\n    + &quot;\\&quot;&quot;     //6th double quote thus far\r\n    + &quot; &quot;      //another whitespace\r\n    + &quot;\\&quot;&quot;     //7th double quote thus far\r\n    + &quot;car1&quot;   //the literal string car1\r\n    + &quot;\\&quot;&quot;     //8th double quote thus far -- it is also the last one\r\n    + &quot;)&quot;      //the closer of the non-capturing capture group started above\r\n    + &quot;\\\\)&quot;    //an escaped closing parentheses\r\n    + &quot; &quot;      //yet another whitespace\r\n    + &quot;RETURN&quot; //the literal string RETURN in all-caps\r\n    + &quot;.*&quot;     //yet another wildcard\r\n    + &quot;\\\\R&quot;    //This is a linebreak matcher -- it matches all new line symbols\r\n    ;\r\n\r\n```\r\n\r\nSome things to note.\r\n\r\n1. Escaping means that you decide to stop interpreting a symbol for its special meaning, and you just want Java to put it into the String. To escape, you use the backslash symbol (\\\\). Escaping can get tricky though, as you can see. Sometimes you need 2 backslashes, and sometimes you need 1. If you need help understanding when and where you need 1 or 2 (or worse yet, more), I would take a look at this link.\r\n\r\nhttps://stackoverflow.com/questions/36092805/java-regular-expression-how-to-use-backslash\r\n\r\n2. A capture group plus a | symbol allows you to do OR clauses in your regex. The regex above basically says, &quot;match a wildcard, followed by LIST, followed by another wildcard, followed by an opening parentheses, followed by an ***OR CLAUSE***, where one of the following cases must be true. Either we match the literal string ***&quot;car1&quot; &quot;car0&quot;*** or the other literal string ***&quot;car0&quot; &quot;car1&quot;***. After the ***OR CLAUSE***, we match a closing parentheses, a single whitespace, the literal string RETURN, another wildcard, and then finally, a new line matcher&quot;. Which leads to my next point.\r\n\r\n3. With the exception of the ***OR CLAUSE***, everything here is in order. Meaning, one must be matched before the next one can be matched. The ***OR CLAUSE*** gives you the ability to branch between one of the options, but that&#39;s it. Otherwise, everything follows the rule of going in order.\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html","title":"Pattern match without a string order","body":"<p>You could do this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String regex = &quot;.*LIST.*\\\\((?:\\&quot;car1\\&quot; \\&quot;car0\\&quot;|\\&quot;car0\\&quot; \\&quot;car1\\&quot;)\\\\) RETURN.*\\\\R&quot;;\n</code></pre>\n<p>And if you don't understand what it means, you should familiarize yourself with the documentation for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\"><code>java.util.regex.Pattern</code></a>. That link is basically your bible when it comes to writing Regular Expressions in Java.</p>\n<p>And if that is not clear enough for you, here is an exploded view of the exact same string, but with a breakdown of what each individual component means.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String regex = &quot;&quot;\n    + &quot;.*&quot;     //wildcard -- anything or nothing can go here.\n    + &quot;LIST&quot;   //the literal string LIST in all-caps\n    + &quot;.*&quot;     //another wildcard\n    + &quot;\\\\(&quot;    //an escaped opening parentheses\n    + &quot;(?:&quot;    //the opener of a non-capturing capture group\n    + &quot;\\&quot;&quot;     //an escaped double quote\n    + &quot;car1&quot;   //the literal string car1\n    + &quot;\\&quot;&quot;     //another escaped double quote\n    + &quot; &quot;      //a single whitespace -- pressing the space bar once\n    + &quot;\\&quot;&quot;     //yet another escaped double quote\n    + &quot;car0&quot;   //the literal string car0\n    + &quot;\\&quot;&quot;     //4th double quote thus far\n    + &quot;|&quot;      //This is a very special symbol -- when you place this symbol\n               //inside of any type of capture group, you should treat it\n               //like an or operator in Java if statements\n    + &quot;\\&quot;&quot;     //5th double quote thus far\n    + &quot;car0&quot;   //the literal string car0\n    + &quot;\\&quot;&quot;     //6th double quote thus far\n    + &quot; &quot;      //another whitespace\n    + &quot;\\&quot;&quot;     //7th double quote thus far\n    + &quot;car1&quot;   //the literal string car1\n    + &quot;\\&quot;&quot;     //8th double quote thus far -- it is also the last one\n    + &quot;)&quot;      //the closer of the non-capturing capture group started above\n    + &quot;\\\\)&quot;    //an escaped closing parentheses\n    + &quot; &quot;      //yet another whitespace\n    + &quot;RETURN&quot; //the literal string RETURN in all-caps\n    + &quot;.*&quot;     //yet another wildcard\n    + &quot;\\\\R&quot;    //This is a linebreak matcher -- it matches all new line symbols\n    ;\n\n</code></pre>\n<p>Some things to note.</p>\n<ol>\n<li>Escaping means that you decide to stop interpreting a symbol for its special meaning, and you just want Java to put it into the String. To escape, you use the backslash symbol (\\). Escaping can get tricky though, as you can see. Sometimes you need 2 backslashes, and sometimes you need 1. If you need help understanding when and where you need 1 or 2 (or worse yet, more), I would take a look at this link.</li>\n</ol>\n<p><a href=\"https://stackoverflow.com/questions/36092805/java-regular-expression-how-to-use-backslash\">Java Regular Expression - how to use backslash</a></p>\n<ol start=\"2\">\n<li><p>A capture group plus a | symbol allows you to do OR clauses in your regex. The regex above basically says, &quot;match a wildcard, followed by LIST, followed by another wildcard, followed by an opening parentheses, followed by an <em><strong>OR CLAUSE</strong></em>, where one of the following cases must be true. Either we match the literal string <em><strong>&quot;car1&quot; &quot;car0&quot;</strong></em> or the other literal string <em><strong>&quot;car0&quot; &quot;car1&quot;</strong></em>. After the <em><strong>OR CLAUSE</strong></em>, we match a closing parentheses, a single whitespace, the literal string RETURN, another wildcard, and then finally, a new line matcher&quot;. Which leads to my next point.</p>\n</li>\n<li><p>With the exception of the <em><strong>OR CLAUSE</strong></em>, everything here is in order. Meaning, one must be matched before the next one can be matched. The <em><strong>OR CLAUSE</strong></em> gives you the ability to branch between one of the options, but that's it. Otherwise, everything follows the rule of going in order.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":28408271,"reputation":45,"user_id":21731993,"display_name":"sKarwasra"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76783770,"answer_count":2,"score":1,"last_activity_date":1690508535,"creation_date":1690448024,"question_id":76778081,"body_markdown":"I wanted to match two strings, but the order shouldn’t matter. E.g., the below check should give true instead of false. \r\n\r\n    final String line = &quot;LIST \\&quot;\\&quot; (\\&quot;car1\\&quot; \\&quot;car0\\&quot;) RETURN (SPECIAL-USE STATUS)\\n&quot;;\r\n    final String regex = &quot;.*LIST.*\\\\(\\&quot;car0\\&quot;\\\\ \\&quot;car1\\&quot;\\\\)\\\\ RETURN.*\\\\R&quot;;\r\n    System.out.println(line.matches(regex));\r\n\r\nI am expecting that values in the string line should match with the regex, irrespective of the order of the words (car1 and car0).\r\n\r\n\r\n\r\n","title":"Pattern match without a string order","body":"<p>I wanted to match two strings, but the order shouldn’t matter. E.g., the below check should give true instead of false.</p>\n<pre><code>final String line = &quot;LIST \\&quot;\\&quot; (\\&quot;car1\\&quot; \\&quot;car0\\&quot;) RETURN (SPECIAL-USE STATUS)\\n&quot;;\nfinal String regex = &quot;.*LIST.*\\\\(\\&quot;car0\\&quot;\\\\ \\&quot;car1\\&quot;\\\\)\\\\ RETURN.*\\\\R&quot;;\nSystem.out.println(line.matches(regex));\n</code></pre>\n<p>I am expecting that values in the string line should match with the regex, irrespective of the order of the words (car1 and car0).</p>\n"},{"tags":["java","spring","kotlin","point-of-sale","jpos"],"answers":[{"tags":[],"owner":{"account_id":4205035,"reputation":1690,"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690464470,"creation_date":1690464470,"answer_id":76780249,"question_id":76778835,"body_markdown":"The first downside is processing time. With a `ChannelAdaptor` in `Q2` you have the channel connected all the time, so you don&#39;t have the overhead of establishing the TCP/IP connection, which involves a few extra steps in each request.\r\n\r\nAlso, without `Q2` and transaction managers, you have to implement all the timeout logic. For instance, in your code snippet, you don&#39;t handle a timeout if the other end doesn&#39;t respond. Your code would be frozen until the connection is reset by some other means.\r\n\r\nYour code will be complex enough soon trying to overcome the challenges that are already sorted out in decades of experience of ISO8583 transaction processing implementation gathered by the jPOS team.\r\n\r\n","title":"Using Jpos without Q2","body":"<p>The first downside is processing time. With a <code>ChannelAdaptor</code> in <code>Q2</code> you have the channel connected all the time, so you don't have the overhead of establishing the TCP/IP connection, which involves a few extra steps in each request.</p>\n<p>Also, without <code>Q2</code> and transaction managers, you have to implement all the timeout logic. For instance, in your code snippet, you don't handle a timeout if the other end doesn't respond. Your code would be frozen until the connection is reset by some other means.</p>\n<p>Your code will be complex enough soon trying to overcome the challenges that are already sorted out in decades of experience of ISO8583 transaction processing implementation gathered by the jPOS team.</p>\n"},{"tags":[],"owner":{"account_id":61653,"reputation":1298,"user_id":183639,"display_name":"apr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690506675,"creation_date":1690506675,"answer_id":76784296,"question_id":76778835,"body_markdown":"I suggest you try the Gateway Tutorial described here, and you&#39;ll see that everything is quite easier with Q2.\r\n\r\nhttp://jpos.org/tutorials\r\n\r\nAnd BTW, you can run Q2 from your SB application with just a few lines of code, take a look at this Gist: \r\n\r\nhttps://gist.github.com/ar/86a4a24384d029c35f784079007393b0#file-q2boot-java\r\n","title":"Using Jpos without Q2","body":"<p>I suggest you try the Gateway Tutorial described here, and you'll see that everything is quite easier with Q2.</p>\n<p><a href=\"http://jpos.org/tutorials\" rel=\"nofollow noreferrer\">http://jpos.org/tutorials</a></p>\n<p>And BTW, you can run Q2 from your SB application with just a few lines of code, take a look at this Gist:</p>\n<p><a href=\"https://gist.github.com/ar/86a4a24384d029c35f784079007393b0#file-q2boot-java\" rel=\"nofollow noreferrer\">https://gist.github.com/ar/86a4a24384d029c35f784079007393b0#file-q2boot-java</a></p>\n"}],"owner":{"account_id":18846015,"reputation":76,"user_id":13746295,"display_name":"efe "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690506675,"creation_date":1690453721,"question_id":76778835,"body_markdown":"What are the downsides to using Jpos with just creating IsoMsg objects and using channels, connect, send, and receive methods instead of deploying a Q2?\r\n\r\nI use Jpos in my spring application to process financial transactions from pos terminals to different transaction processors.  \r\nMy current setup involves just creating an IsoMsg object, setting the required fields, then creating the appropriate channel calling the channel send and receive method to process the transaction like.  \r\nBelow is an example of me sending a network management request:\r\n\r\n```\r\nISOMsg m = new ISOMsg ();\r\n  m.setMTI (&quot;0800&quot;);\r\n  m.set (3, &quot;000000&quot;);\r\n  m.set (41, &quot;00000001&quot;);\r\n  m.set (70, &quot;301&quot;);\r\n  .......................................\r\n  .......................................\r\n (other parts of iso message omitted)\r\n\r\nISOChannel channel = new ASCIIChannel (&quot;&lt;processor_ip&gt;&quot;, &lt;processor_port&gt;, new GenericPackager());\r\nchannel.connect();\r\nchannel.send(m);\r\n\r\nIsoMsg response = channel.receieve();\r\n\r\n   \r\n```\r\n\r\nHowever the jpos programmers&#39; guide recommends using a Q2 instead of the above method, but I find the Q2 deployment quite complex and configuration-heavy.  \r\nReading the Q2 section of the programmers guide quickly introduces a lot of complex components with names that are not so easy to understand such as channel adaptors, participants, space, filters, query hosts, etc.\r\n\r\nI prefer the simple implementation of creating an IsoMsg object, opening a connection through a channel, sending the IsoMsg, and receiving a response.\r\n\r\nMy question is, what are the downsides to using the simpler implementation over Q2, what advantages does the Q2 deployment offer over just communicating through plain channels","title":"Using Jpos without Q2","body":"<p>What are the downsides to using Jpos with just creating IsoMsg objects and using channels, connect, send, and receive methods instead of deploying a Q2?</p>\n<p>I use Jpos in my spring application to process financial transactions from pos terminals to different transaction processors.<br />\nMy current setup involves just creating an IsoMsg object, setting the required fields, then creating the appropriate channel calling the channel send and receive method to process the transaction like.<br />\nBelow is an example of me sending a network management request:</p>\n<pre><code>ISOMsg m = new ISOMsg ();\n  m.setMTI (&quot;0800&quot;);\n  m.set (3, &quot;000000&quot;);\n  m.set (41, &quot;00000001&quot;);\n  m.set (70, &quot;301&quot;);\n  .......................................\n  .......................................\n (other parts of iso message omitted)\n\nISOChannel channel = new ASCIIChannel (&quot;&lt;processor_ip&gt;&quot;, &lt;processor_port&gt;, new GenericPackager());\nchannel.connect();\nchannel.send(m);\n\nIsoMsg response = channel.receieve();\n\n   \n</code></pre>\n<p>However the jpos programmers' guide recommends using a Q2 instead of the above method, but I find the Q2 deployment quite complex and configuration-heavy.<br />\nReading the Q2 section of the programmers guide quickly introduces a lot of complex components with names that are not so easy to understand such as channel adaptors, participants, space, filters, query hosts, etc.</p>\n<p>I prefer the simple implementation of creating an IsoMsg object, opening a connection through a channel, sending the IsoMsg, and receiving a response.</p>\n<p>My question is, what are the downsides to using the simpler implementation over Q2, what advantages does the Q2 deployment offer over just communicating through plain channels</p>\n"},{"tags":["java","junit","mockito","slf4j","powermock"],"comments":[{"owner":{"account_id":71653,"reputation":4571,"user_id":207238,"accept_rate":88,"display_name":"Matt Lachman"},"score":1,"creation_date":1372351140,"post_id":8948916,"comment_id":25172174,"body_markdown":"Have you tried the @MockPolicy? [Examples here](https://code.google.com/p/powermock/wiki/MockPolicies) are for EasyMock style mocks but can be adapted for Mockito.","body":"Have you tried the @MockPolicy? <a href=\"https://code.google.com/p/powermock/wiki/MockPolicies\" rel=\"nofollow noreferrer\">Examples here</a> are for EasyMock style mocks but can be adapted for Mockito."}],"answers":[{"tags":[],"owner":{"account_id":122746,"reputation":5871,"user_id":316745,"accept_rate":83,"display_name":"jhericks"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1327425643,"creation_date":1327106196,"answer_id":8949688,"question_id":8948916,"body_markdown":"In answer to your first question, it should be as simple as replacing:\r\n\r\n       when(LoggerFactory.getLogger(GoodbyeController.class)).thenReturn(loggerMock);\r\n\r\nwith\r\n\r\n       when(LoggerFactory.getLogger(any(Class.class))).thenReturn(loggerMock);\r\n\r\nRegarding your second question (and possibly the puzzling behavior with the first), I think the problem is that logger is static.  So, \r\n    \r\n    private static Logger logger = LoggerFactory.getLogger(GoodbyeController.class);\r\n\r\nis executed when the _class_ is initialized, not the when the _object_ is instantiated.  Sometimes this can be at about the same time, so you&#39;ll be OK, but it&#39;s hard to guarantee that.  So you set up LoggerFactory.getLogger to return your mock, but the logger variable may have already been set with a real Logger object by the time your mocks are set up.\r\n\r\nYou may be able to set the logger explicitly using something like [ReflectionTestUtils][1] (I don&#39;t know if that works with static fields) or change it from a static field to an instance field.  Either way, you don&#39;t need to mock LoggerFactory.getLogger because you&#39;ll be directly injecting the mock Logger instance.\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/util/ReflectionTestUtils.html#setField%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>In answer to your first question, it should be as simple as replacing:</p>\n\n<pre><code>   when(LoggerFactory.getLogger(GoodbyeController.class)).thenReturn(loggerMock);\n</code></pre>\n\n<p>with</p>\n\n<pre><code>   when(LoggerFactory.getLogger(any(Class.class))).thenReturn(loggerMock);\n</code></pre>\n\n<p>Regarding your second question (and possibly the puzzling behavior with the first), I think the problem is that logger is static.  So, </p>\n\n<pre><code>private static Logger logger = LoggerFactory.getLogger(GoodbyeController.class);\n</code></pre>\n\n<p>is executed when the <em>class</em> is initialized, not the when the <em>object</em> is instantiated.  Sometimes this can be at about the same time, so you'll be OK, but it's hard to guarantee that.  So you set up LoggerFactory.getLogger to return your mock, but the logger variable may have already been set with a real Logger object by the time your mocks are set up.</p>\n\n<p>You may be able to set the logger explicitly using something like <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/util/ReflectionTestUtils.html#setField%28java.lang.Object,%20java.lang.String,%20java.lang.Object%29\" rel=\"noreferrer\">ReflectionTestUtils</a> (I don't know if that works with static fields) or change it from a static field to an instance field.  Either way, you don't need to mock LoggerFactory.getLogger because you'll be directly injecting the mock Logger instance.</p>\n"},{"tags":[],"owner":{"account_id":20228,"reputation":40720,"user_id":48136,"display_name":"bric3"},"down_vote_count":1,"up_vote_count":83,"is_accepted":true,"score":82,"last_activity_date":1600679949,"creation_date":1327837473,"answer_id":9052915,"question_id":8948916,"body_markdown":"EDIT 2020-09-21: Since 3.4.0, Mockito supports mocking static methods, API is still incubating and is likely to change, in particular around stubbing and verification. It requires the `mockito-inline` artifact. And you don&#39;t need to prepare the test or use any specific runner. All you need to do is :\r\n\r\n    @Test\r\n    public void name() {\r\n        try (MockedStatic&lt;LoggerFactory&gt; integerMock = mockStatic(LoggerFactory.class)) {\r\n            final Logger logger = mock(Logger.class);\r\n            integerMock.when(() -&gt; LoggerFactory.getLogger(any(Class.class))).thenReturn(logger);\r\n            new Controller().log();\r\n            verify(logger).warn(any());\r\n        }\r\n    }\r\n\r\n\r\nThe two inportant aspect in this code, is that you need to scope when the static mock applies, i.e. within this try block. And you need to call the stubbing and verification api from the `MockedStatic` object.\r\n\r\n----\r\n\r\n\r\n@Mick, try to prepare the owner of the static field too, eg :\r\n\r\n    @PrepareForTest({GoodbyeController.class, LoggerFactory.class})\r\n\r\n\r\nEDIT1 : I just crafted a small example. First the controller :\r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    public class Controller {\r\n        Logger logger = LoggerFactory.getLogger(Controller.class);\r\n    \r\n        public void log() { logger.warn(&quot;yup&quot;); }\r\n    }\r\n\r\nThen the test :\r\n\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    import org.powermock.modules.junit4.PowerMockRunner;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    import static org.mockito.Matchers.any;\r\n    import static org.mockito.Matchers.anyString;\r\n    import static org.mockito.Mockito.verify;\r\n    import static org.powermock.api.mockito.PowerMockito.mock;\r\n    import static org.powermock.api.mockito.PowerMockito.mockStatic;\r\n    import static org.powermock.api.mockito.PowerMockito.when;\r\n    \r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({Controller.class, LoggerFactory.class})\r\n    public class ControllerTest {\r\n    \r\n        @Test\r\n        public void name() throws Exception {\r\n            mockStatic(LoggerFactory.class);\r\n            Logger logger = mock(Logger.class);\r\n            when(LoggerFactory.getLogger(any(Class.class))).thenReturn(logger);\r\n            \r\n            new Controller().log();\r\n            \r\n            verify(logger).warn(anyString());\r\n        }\r\n    }\r\n\r\nNote the imports !\r\nNoteworthy libs in the classpath : Mockito, PowerMock, JUnit, logback-core, logback-clasic, slf4j\r\n\r\n--------\r\n\r\nEDIT2 : As it seems to be a popular question, I&#39;d like to point out that **if these log messages are that important** and require to be tested, i.e. they are feature / business part of the system **then introducing a real dependency that make clear theses logs are features would be a so much better in the whole system design**, instead of relying on static code of a standard and technical classes of a logger.\r\n\r\nFor this matter I would recommend to craft something like= a `Reporter` class with methods such as `reportIncorrectUseOfYAndZForActionX` or `reportProgressStartedForActionX`. This would have the benefit of making the feature visible for anyone reading the code. But it will also help to achieve tests, change the implementations details of this particular feature.\r\n\r\nHence you wouldn&#39;t need static mocking tools like PowerMock. **In my opinion static code can be fine, but as soon as the test demands to verify or to mock static behavior it is necessary to refactor and introduce clear dependencies.**","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>EDIT 2020-09-21: Since 3.4.0, Mockito supports mocking static methods, API is still incubating and is likely to change, in particular around stubbing and verification. It requires the <code>mockito-inline</code> artifact. And you don't need to prepare the test or use any specific runner. All you need to do is :</p>\n<pre><code>@Test\npublic void name() {\n    try (MockedStatic&lt;LoggerFactory&gt; integerMock = mockStatic(LoggerFactory.class)) {\n        final Logger logger = mock(Logger.class);\n        integerMock.when(() -&gt; LoggerFactory.getLogger(any(Class.class))).thenReturn(logger);\n        new Controller().log();\n        verify(logger).warn(any());\n    }\n}\n</code></pre>\n<p>The two inportant aspect in this code, is that you need to scope when the static mock applies, i.e. within this try block. And you need to call the stubbing and verification api from the <code>MockedStatic</code> object.</p>\n<hr />\n<p>@Mick, try to prepare the owner of the static field too, eg :</p>\n<pre><code>@PrepareForTest({GoodbyeController.class, LoggerFactory.class})\n</code></pre>\n<p>EDIT1 : I just crafted a small example. First the controller :</p>\n<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class Controller {\n    Logger logger = LoggerFactory.getLogger(Controller.class);\n\n    public void log() { logger.warn(&quot;yup&quot;); }\n}\n</code></pre>\n<p>Then the test :</p>\n<pre><code>import org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport static org.mockito.Matchers.any;\nimport static org.mockito.Matchers.anyString;\nimport static org.mockito.Mockito.verify;\nimport static org.powermock.api.mockito.PowerMockito.mock;\nimport static org.powermock.api.mockito.PowerMockito.mockStatic;\nimport static org.powermock.api.mockito.PowerMockito.when;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest({Controller.class, LoggerFactory.class})\npublic class ControllerTest {\n\n    @Test\n    public void name() throws Exception {\n        mockStatic(LoggerFactory.class);\n        Logger logger = mock(Logger.class);\n        when(LoggerFactory.getLogger(any(Class.class))).thenReturn(logger);\n        \n        new Controller().log();\n        \n        verify(logger).warn(anyString());\n    }\n}\n</code></pre>\n<p>Note the imports !\nNoteworthy libs in the classpath : Mockito, PowerMock, JUnit, logback-core, logback-clasic, slf4j</p>\n<hr />\n<p>EDIT2 : As it seems to be a popular question, I'd like to point out that <strong>if these log messages are that important</strong> and require to be tested, i.e. they are feature / business part of the system <strong>then introducing a real dependency that make clear theses logs are features would be a so much better in the whole system design</strong>, instead of relying on static code of a standard and technical classes of a logger.</p>\n<p>For this matter I would recommend to craft something like= a <code>Reporter</code> class with methods such as <code>reportIncorrectUseOfYAndZForActionX</code> or <code>reportProgressStartedForActionX</code>. This would have the benefit of making the feature visible for anyone reading the code. But it will also help to achieve tests, change the implementations details of this particular feature.</p>\n<p>Hence you wouldn't need static mocking tools like PowerMock. <strong>In my opinion static code can be fine, but as soon as the test demands to verify or to mock static behavior it is necessary to refactor and introduce clear dependencies.</strong></p>\n"},{"tags":[],"owner":{"account_id":1333657,"reputation":279,"user_id":1276925,"display_name":"user1276925"},"down_vote_count":1,"up_vote_count":23,"is_accepted":false,"score":22,"last_activity_date":1402520257,"creation_date":1402520257,"answer_id":24172446,"question_id":8948916,"body_markdown":"Somewhat late to the party - I was doing something similar and needed some pointers and ended up here. Taking no credit - I took all of the code from Brice but got the &quot;zero interactions&quot; than Cengiz got. \r\n\r\nUsing guidance from what jheriks amd Joseph Lust had put I think I know why - I had my object under test as a field and newed it up in a @Before unlike Brice. Then the actual logger was not the mock but a real class init&#39;d as jhriks suggested... \r\n\r\nI would normally do this for my object under test so as to get a fresh object for each test. When I moved the field to a local and newed it in the test it ran ok. However, if I tried a second test it was not the mock in my test but the mock from the first test and I got the zero interactions again. \r\n\r\nWhen I put the creation of the mock in the @BeforeClass the logger in the object under test is always the mock but see the note below for the problems with this...\r\n\r\n**Class under test**\r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    public class MyClassWithSomeLogging  {\r\n    \r\n        private static final Logger LOG = LoggerFactory.getLogger(MyClassWithSomeLogging.class);\r\n    \r\n        public void doStuff(boolean b) {\r\n            if(b) {\r\n                LOG.info(&quot;true&quot;);\r\n            } else {\r\n                LOG.info(&quot;false&quot;);\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n**Test**\r\n\r\n\r\n\r\n    import org.junit.AfterClass;\r\n    import org.junit.BeforeClass;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.powermock.core.classloader.annotations.PrepareForTest;\r\n    import org.powermock.modules.junit4.PowerMockRunner;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    \r\n    import static org.mockito.Mockito.*;\r\n    import static org.powermock.api.mockito.PowerMockito.mock;\r\n    import static org.powermock.api.mockito.PowerMockito.*;\r\n    import static org.powermock.api.mockito.PowerMockito.when;\r\n    \r\n    \r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({LoggerFactory.class})\r\n    public class MyClassWithSomeLoggingTest {\r\n    \r\n        private static Logger mockLOG;\r\n    \r\n        @BeforeClass\r\n        public static void setup() {\r\n            mockStatic(LoggerFactory.class);\r\n            mockLOG = mock(Logger.class);\r\n            when(LoggerFactory.getLogger(any(Class.class))).thenReturn(mockLOG);\r\n        }\r\n    \r\n        @Test\r\n        public void testIt() {\r\n            MyClassWithSomeLogging myClassWithSomeLogging = new MyClassWithSomeLogging();\r\n            myClassWithSomeLogging.doStuff(true);\r\n    \r\n            verify(mockLOG, times(1)).info(&quot;true&quot;);\r\n        }\r\n    \r\n        @Test\r\n        public void testIt2() {\r\n            MyClassWithSomeLogging myClassWithSomeLogging = new MyClassWithSomeLogging();\r\n            myClassWithSomeLogging.doStuff(false);\r\n    \r\n            verify(mockLOG, times(1)).info(&quot;false&quot;);\r\n        }\r\n    \r\n        @AfterClass\r\n        public static void verifyStatic() {\r\n            verify(mockLOG, times(1)).info(&quot;true&quot;);\r\n            verify(mockLOG, times(1)).info(&quot;false&quot;);\r\n            verify(mockLOG, times(2)).info(anyString());\r\n        }\r\n    }\r\n\r\n\r\n**Note**\r\n\r\nIf you have two tests with the same expectation I had to do the verify in the @AfterClass as the invocations on the static are stacked up - `verify(mockLOG, times(2)).info(&quot;true&quot;);`  - rather than times(1) in each test as the second test would fail saying there where 2 invocation of this. This is pretty pants but I couldn&#39;t find a way to clear the invocations. I&#39;d like to know if anyone can think of a way round this....","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>Somewhat late to the party - I was doing something similar and needed some pointers and ended up here. Taking no credit - I took all of the code from Brice but got the \"zero interactions\" than Cengiz got. </p>\n\n<p>Using guidance from what jheriks amd Joseph Lust had put I think I know why - I had my object under test as a field and newed it up in a @Before unlike Brice. Then the actual logger was not the mock but a real class init'd as jhriks suggested... </p>\n\n<p>I would normally do this for my object under test so as to get a fresh object for each test. When I moved the field to a local and newed it in the test it ran ok. However, if I tried a second test it was not the mock in my test but the mock from the first test and I got the zero interactions again. </p>\n\n<p>When I put the creation of the mock in the @BeforeClass the logger in the object under test is always the mock but see the note below for the problems with this...</p>\n\n<p><strong>Class under test</strong></p>\n\n<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\npublic class MyClassWithSomeLogging  {\n\n    private static final Logger LOG = LoggerFactory.getLogger(MyClassWithSomeLogging.class);\n\n    public void doStuff(boolean b) {\n        if(b) {\n            LOG.info(\"true\");\n        } else {\n            LOG.info(\"false\");\n        }\n\n    }\n}\n</code></pre>\n\n<p><strong>Test</strong></p>\n\n<pre><code>import org.junit.AfterClass;\nimport org.junit.BeforeClass;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport static org.mockito.Mockito.*;\nimport static org.powermock.api.mockito.PowerMockito.mock;\nimport static org.powermock.api.mockito.PowerMockito.*;\nimport static org.powermock.api.mockito.PowerMockito.when;\n\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest({LoggerFactory.class})\npublic class MyClassWithSomeLoggingTest {\n\n    private static Logger mockLOG;\n\n    @BeforeClass\n    public static void setup() {\n        mockStatic(LoggerFactory.class);\n        mockLOG = mock(Logger.class);\n        when(LoggerFactory.getLogger(any(Class.class))).thenReturn(mockLOG);\n    }\n\n    @Test\n    public void testIt() {\n        MyClassWithSomeLogging myClassWithSomeLogging = new MyClassWithSomeLogging();\n        myClassWithSomeLogging.doStuff(true);\n\n        verify(mockLOG, times(1)).info(\"true\");\n    }\n\n    @Test\n    public void testIt2() {\n        MyClassWithSomeLogging myClassWithSomeLogging = new MyClassWithSomeLogging();\n        myClassWithSomeLogging.doStuff(false);\n\n        verify(mockLOG, times(1)).info(\"false\");\n    }\n\n    @AfterClass\n    public static void verifyStatic() {\n        verify(mockLOG, times(1)).info(\"true\");\n        verify(mockLOG, times(1)).info(\"false\");\n        verify(mockLOG, times(2)).info(anyString());\n    }\n}\n</code></pre>\n\n<p><strong>Note</strong></p>\n\n<p>If you have two tests with the same expectation I had to do the verify in the @AfterClass as the invocations on the static are stacked up - <code>verify(mockLOG, times(2)).info(\"true\");</code>  - rather than times(1) in each test as the second test would fail saying there where 2 invocation of this. This is pretty pants but I couldn't find a way to clear the invocations. I'd like to know if anyone can think of a way round this....</p>\n"},{"tags":[],"owner":{"account_id":5283935,"reputation":31,"user_id":4218472,"display_name":"Markus Wendl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1415189210,"creation_date":1415189210,"answer_id":26756831,"question_id":8948916,"body_markdown":"I think you can reset the invocations using Mockito.reset(mockLog). You should call this before every test, so inside @Before would be a good place.","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>I think you can reset the invocations using Mockito.reset(mockLog). You should call this before every test, so inside @Before would be a good place.</p>\n"},{"tags":[],"owner":{"account_id":2312621,"reputation":177,"user_id":2030411,"display_name":"johnlon"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1448910528,"creation_date":1448910528,"answer_id":34006078,"question_id":8948916,"body_markdown":"Use explicit injection.\r\nNo other approach will allow you  for instance to run tests in parallel in the same JVM.\r\n\r\nPatterns that use anything classloader wide like static log binder or messing with environmental thinks like logback.XML are bust when it comes to testing.\r\n\r\nConsider the parallelized tests I mention , or consider the case where you want to intercept logging of component A whose construction is hidden behind api B. This latter case is easy to deal with if you are using a dependency injected loggerfactory from the top, but not if you inject Logger as there no seam in this assembly at ILoggerFactory.getLogger.\r\n\r\nAnd its not all about unit testing either. Sometimes we want integration tests to emit logging. Sometimes we don&#39;t. Someone&#39;s we want some of the integration testing logging to be selectively suppressed, eg for expected errors that would otherwise clutter the CI console and confuse. All easy if you inject ILoggerFactory from the top of your mainline (or whatever di framework you might use)\r\n\r\n\r\nSo...\r\n\r\nEither inject a reporter as suggested or adopt a pattern of injecting the ILoggerFactory. By explicit  ILoggerFactory injection rather than Logger you can support many access/intercept patterns and parallelization. \r\n\r\n\r\n\r\n","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>Use explicit injection.\nNo other approach will allow you  for instance to run tests in parallel in the same JVM.</p>\n\n<p>Patterns that use anything classloader wide like static log binder or messing with environmental thinks like logback.XML are bust when it comes to testing.</p>\n\n<p>Consider the parallelized tests I mention , or consider the case where you want to intercept logging of component A whose construction is hidden behind api B. This latter case is easy to deal with if you are using a dependency injected loggerfactory from the top, but not if you inject Logger as there no seam in this assembly at ILoggerFactory.getLogger.</p>\n\n<p>And its not all about unit testing either. Sometimes we want integration tests to emit logging. Sometimes we don't. Someone's we want some of the integration testing logging to be selectively suppressed, eg for expected errors that would otherwise clutter the CI console and confuse. All easy if you inject ILoggerFactory from the top of your mainline (or whatever di framework you might use)</p>\n\n<p>So...</p>\n\n<p>Either inject a reporter as suggested or adopt a pattern of injecting the ILoggerFactory. By explicit  ILoggerFactory injection rather than Logger you can support many access/intercept patterns and parallelization. </p>\n"},{"tags":[],"owner":{"account_id":4483663,"reputation":12326,"user_id":3647002,"accept_rate":47,"display_name":"Gayan Weerakutti"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1611219932,"creation_date":1611219932,"answer_id":65824134,"question_id":8948916,"body_markdown":"The following is a test class that mocks private static final Logger named `log` in class `LogUtil`.\r\n\r\nIn addition to mocking the `getLogger` factory call, it is necessary to explicitly set the field using reflection, in `@BeforeClass`\r\n\r\n```\r\npublic class LogUtilTest {\r\n\r\n    private static Logger logger;\r\n\r\n    private static MockedStatic&lt;LoggerFactory&gt; loggerFactoryMockedStatic;\r\n\r\n    /**\r\n     * Since {@link LogUtil#log} being a static final variable it is only initialized once at the class load time\r\n     * So assertions are also performed against the same mock {@link LogUtilTest#logger}\r\n     */\r\n    @BeforeClass\r\n    public static void beforeClass() {\r\n        logger = mock(Logger.class);\r\n        loggerFactoryMockedStatic = mockStatic(LoggerFactory.class);\r\n        loggerFactoryMockedStatic.when(() -&gt; LoggerFactory.getLogger(anyString())).thenReturn(logger);\r\n        Whitebox.setInternalState(LogUtil.class, &quot;log&quot;, logger);\r\n    }\r\n\r\n    @AfterClass\r\n    public static void after() {\r\n        loggerFactoryMockedStatic.close();\r\n    }\r\n} \r\n```\r\n","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>The following is a test class that mocks private static final Logger named <code>log</code> in class <code>LogUtil</code>.</p>\n<p>In addition to mocking the <code>getLogger</code> factory call, it is necessary to explicitly set the field using reflection, in <code>@BeforeClass</code></p>\n<pre><code>public class LogUtilTest {\n\n    private static Logger logger;\n\n    private static MockedStatic&lt;LoggerFactory&gt; loggerFactoryMockedStatic;\n\n    /**\n     * Since {@link LogUtil#log} being a static final variable it is only initialized once at the class load time\n     * So assertions are also performed against the same mock {@link LogUtilTest#logger}\n     */\n    @BeforeClass\n    public static void beforeClass() {\n        logger = mock(Logger.class);\n        loggerFactoryMockedStatic = mockStatic(LoggerFactory.class);\n        loggerFactoryMockedStatic.when(() -&gt; LoggerFactory.getLogger(anyString())).thenReturn(logger);\n        Whitebox.setInternalState(LogUtil.class, &quot;log&quot;, logger);\n    }\n\n    @AfterClass\n    public static void after() {\n        loggerFactoryMockedStatic.close();\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3178228,"reputation":4974,"user_id":2685581,"display_name":"Ajay Kumar"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1623341630,"creation_date":1623341630,"answer_id":67924913,"question_id":8948916,"body_markdown":"    class SomeService{\r\n      private static final Logger logger = LogManager.getLogger(SomeService.class);\r\n\r\n      public void callSomeMethod(){\r\n       ...\r\n       ...\r\n       if (logger.isDebugEnabled()) {\r\n\t\t\tlogger.debug(String.format(&quot;some message .....&quot;));\r\n\t\t}\r\n      }\r\n\r\n    }\r\n\r\n**JUNIT Test Coverages -** \r\n\r\n    import java.io.IOException;\r\n     \r\n    import org.apache.logging.log4j.core.Appender;\r\n    import org.apache.logging.log4j.core.LogEvent;\r\n    import org.apache.logging.log4j.Level;\r\n    import org.apache.logging.log4j.LogManager;\r\n    import org.apache.logging.log4j.core.Logger;\r\n    import org.junit.After;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mock;\r\n    import org.mockito.runners.MockitoJUnitRunner;\r\n     \r\n    import static org.junit.Assert.*;\r\n    import static org.mockito.Mockito.*;\r\n     \r\n    \r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class SomeServiceTest {\r\n      @Mock\r\n      private Appender mockAppender;\r\n     \r\n      private Logger logger;\r\n     \r\n      @Before\r\n      public void setup() {\r\n        when(mockAppender.getName()).thenReturn(&quot;MockAppender&quot;);\r\n        when(mockAppender.isStarted()).thenReturn(true);\r\n        when(mockAppender.isStopped()).thenReturn(false);\r\n     \r\n        logger = (Logger)LogManager.getLogger(SomeService.class);\r\n        logger.addAppender(mockAppender);\r\n        logger.setLevel(Level.DEBUG);\r\n      }\r\n     \r\n      \r\n     \r\n      @Test\r\n      public void callSomeMethodTest() {\r\n        //write test cases, logger.isDebugEnabled() will call.\r\n      }\r\n     \r\n    }","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<pre><code>class SomeService{\n  private static final Logger logger = LogManager.getLogger(SomeService.class);\n\n  public void callSomeMethod(){\n   ...\n   ...\n   if (logger.isDebugEnabled()) {\n        logger.debug(String.format(&quot;some message .....&quot;));\n    }\n  }\n\n}\n</code></pre>\n<p><strong>JUNIT Test Coverages -</strong></p>\n<pre><code>import java.io.IOException;\n \nimport org.apache.logging.log4j.core.Appender;\nimport org.apache.logging.log4j.core.LogEvent;\nimport org.apache.logging.log4j.Level;\nimport org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.core.Logger;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mock;\nimport org.mockito.runners.MockitoJUnitRunner;\n \nimport static org.junit.Assert.*;\nimport static org.mockito.Mockito.*;\n \n\n@RunWith(MockitoJUnitRunner.class)\npublic class SomeServiceTest {\n  @Mock\n  private Appender mockAppender;\n \n  private Logger logger;\n \n  @Before\n  public void setup() {\n    when(mockAppender.getName()).thenReturn(&quot;MockAppender&quot;);\n    when(mockAppender.isStarted()).thenReturn(true);\n    when(mockAppender.isStopped()).thenReturn(false);\n \n    logger = (Logger)LogManager.getLogger(SomeService.class);\n    logger.addAppender(mockAppender);\n    logger.setLevel(Level.DEBUG);\n  }\n \n  \n \n  @Test\n  public void callSomeMethodTest() {\n    //write test cases, logger.isDebugEnabled() will call.\n  }\n \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2056089,"reputation":10271,"user_id":3457177,"accept_rate":78,"display_name":"Vitalii"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631271635,"creation_date":1631271635,"answer_id":69131218,"question_id":8948916,"body_markdown":"I&#39;ve got it working without `PowerMock` with `Mockito` only for one test. When I have two tests with `verify`, the second started to fail with `no interactions with this mock` when I run all tests in the class. Separately both tests worked.\r\n\r\nAfter some experiments it worked for me only when I make my mock logger `static`.\r\n\r\n```java\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class MyTest {\r\n    private static MockedStatic&lt;LoggerFactory&gt; loggerFactoryMockedStatic;\r\n    private static final Logger logger = mock(Logger.class);\r\n    \r\n    @BeforeClass\r\n    public static void beforeAll() {\r\n        loggerFactoryMockedStatic = mockStatic(LoggerFactory.class);\r\n        loggerFactoryMockedStatic.when(() -&gt; LoggerFactory.getLogger(MyServiceUnderTest.class))\r\n                .thenReturn(logger);\r\n    }\r\n\r\n    @AfterClass\r\n    public static void afterAll() {\r\n        loggerFactoryMockedStatic.close();\r\n    }\r\n\r\n\r\n    @Before\r\n    public void init() {\r\n        Mockito.reset(logger); // important as it&#39;s static\r\n        // ...\r\n\r\n    @Test\r\n    public void myTest() throws Exception {\r\n        // ...\r\n        verifyNoInteractions(logger);\r\n    }\r\n}\r\n```","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>I've got it working without <code>PowerMock</code> with <code>Mockito</code> only for one test. When I have two tests with <code>verify</code>, the second started to fail with <code>no interactions with this mock</code> when I run all tests in the class. Separately both tests worked.</p>\n<p>After some experiments it worked for me only when I make my mock logger <code>static</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(MockitoJUnitRunner.class)\npublic class MyTest {\n    private static MockedStatic&lt;LoggerFactory&gt; loggerFactoryMockedStatic;\n    private static final Logger logger = mock(Logger.class);\n    \n    @BeforeClass\n    public static void beforeAll() {\n        loggerFactoryMockedStatic = mockStatic(LoggerFactory.class);\n        loggerFactoryMockedStatic.when(() -&gt; LoggerFactory.getLogger(MyServiceUnderTest.class))\n                .thenReturn(logger);\n    }\n\n    @AfterClass\n    public static void afterAll() {\n        loggerFactoryMockedStatic.close();\n    }\n\n\n    @Before\n    public void init() {\n        Mockito.reset(logger); // important as it's static\n        // ...\n\n    @Test\n    public void myTest() throws Exception {\n        // ...\n        verifyNoInteractions(logger);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6910880,"reputation":504,"user_id":9578492,"display_name":"Yaroslav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690504807,"creation_date":1690504807,"answer_id":76784216,"question_id":8948916,"body_markdown":"Easy solution using Whitebox :\r\n\r\n    @Test\r\n    void getMessage() {\r\n        Whitebox.setInternalState(AeAuthTokenOidcMapper.class, &quot;logger&quot;, logger);\r\n        when(logger.isDebugEnabled()).thenReturn(true);\r\n\r\n        String mes = sut.getMessage();\r\n\r\n        assertEquals(&quot;hi&quot;, mes);\r\n        verify(logger).debug(&quot;message&quot;);\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NtUKZ.png","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>Easy solution using Whitebox :</p>\n<pre><code>@Test\nvoid getMessage() {\n    Whitebox.setInternalState(AeAuthTokenOidcMapper.class, &quot;logger&quot;, logger);\n    when(logger.isDebugEnabled()).thenReturn(true);\n\n    String mes = sut.getMessage();\n\n    assertEquals(&quot;hi&quot;, mes);\n    verify(logger).debug(&quot;message&quot;);\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/NtUKZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NtUKZ.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":124022,"reputation":2327,"user_id":318852,"accept_rate":66,"display_name":"Mick Knutson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174595,"favorite_count":0,"down_vote_count":0,"up_vote_count":76,"accepted_answer_id":9052915,"answer_count":9,"score":76,"last_activity_date":1690504807,"creation_date":1327100267,"question_id":8948916,"body_markdown":"I have the following Logger I want to mock out, but to validate log entries are getting called, not for the content.\r\n\r\n\tprivate static Logger logger = \r\n\t\t\tLoggerFactory.getLogger(GoodbyeController.class);\r\n\r\nI want to Mock ANY class that is used for LoggerFactory.getLogger() but I could not find out how to do that.\r\nThis is what I ended up with so far:\r\n\r\n\t@Before\r\n\tpublic void performBeforeEachTest() {\r\n\t\tPowerMockito.mockStatic(LoggerFactory.class);\r\n\t\twhen(LoggerFactory.getLogger(GoodbyeController.class)).\r\n\t\t\tthenReturn(loggerMock);\r\n\r\n\t\twhen(loggerMock.isDebugEnabled()).thenReturn(true);\r\n\t\tdoNothing().when(loggerMock).error(any(String.class));\r\n\r\n\t\t...\r\n\t}\r\n\r\nI would like to know:\r\n\r\n1. Can I Mock the static `LoggerFactory.getLogger()` to work for any class?\r\n2. I can only seem to run `when(loggerMock.isDebugEnabled()).thenReturn(true);` in the `@Before` and thus I cannot seem to change the characteristics per method. Is there a way around this?\r\n\r\n\r\n----------\r\n\r\n\r\n**Edit findings:**\r\n\r\n\r\nI thought I tried this already and it didnt work:\r\n\r\n     when(LoggerFactory.getLogger(any(Class.class))).thenReturn(loggerMock);\r\n\t \r\nBut thank you, as it did work.\r\n\r\nHowever I have tried countless variations to:\r\n\r\n    when(loggerMock.isDebugEnabled()).thenReturn(true);\r\n\r\nI cannot get the loggerMock to change its behavior outside of `@Before` but this only happens with Coburtura. With Clover, the coverage shows 100% but there is still an issue either way.\r\n\r\nI have this simple class:\r\n\r\n    public ExampleService{\r\n        private static final Logger logger =\r\n                LoggerFactory.getLogger(ExampleService.class);\r\n\t\t\r\n        public String getMessage() {\t\t\r\n\t\tif(logger.isDebugEnabled()){\r\n\t\t\tlogger.debug(&quot;isDebugEnabled&quot;);\r\n\t\t\tlogger.debug(&quot;isDebugEnabled&quot;);\r\n\t\t}\r\n\t\treturn &quot;Hello world!&quot;;\r\n        }\r\n        ...\r\n    }\r\n\t\r\nThen I have this test:\r\n\r\n\t\r\n\t@RunWith(PowerMockRunner.class)\r\n\t@PrepareForTest({LoggerFactory.class})\r\n\tpublic class ExampleServiceTests {\r\n\r\n\t\t@Mock\r\n\t\tprivate Logger loggerMock;\r\n\t\tprivate ExampleServiceservice = new ExampleService();\r\n\t\t\t\r\n\t\t@Before\r\n\t\tpublic void performBeforeEachTest() {\r\n\t\t\tPowerMockito.mockStatic(LoggerFactory.class);\r\n\t\t\twhen(LoggerFactory.getLogger(any(Class.class))).\r\n\t\t\t\tthenReturn(loggerMock);\r\n\t\t\t\t\r\n\t\t\t//PowerMockito.verifyStatic(); // fails\r\n\t\t}\r\n\r\n\t\t@Test\r\n\t\tpublic void testIsDebugEnabled_True() throws Exception {\r\n\t\t\twhen(loggerMock.isDebugEnabled()).thenReturn(true);\r\n\t\t\tdoNothing().when(loggerMock).debug(any(String.class));\r\n\t\t\t\t\r\n\t\t\tassertThat(service.getMessage(), is(&quot;Hello null: 0&quot;));\r\n\t\t\t//verify(loggerMock, atLeast(1)).isDebugEnabled(); // fails\r\n\t\t}\r\n\r\n\t\t@Test\r\n\t\tpublic void testIsDebugEnabled_False() throws Exception {\r\n\t\t\twhen(loggerMock.isDebugEnabled()).thenReturn(false);\r\n\t\t\tdoNothing().when(loggerMock).debug(any(String.class));\r\n\t\t\t\t\r\n\t\t\tassertThat(service.getMessage(), is(&quot;Hello null: 0&quot;));\r\n\t\t\t//verify(loggerMock, atLeast(1)).isDebugEnabled(); // fails\r\n\t\t}\r\n\t}\r\n\r\nIn clover I show 100% coverage of the `if(logger.isDebugEnabled()){` block.\r\nBut if I try to verify the `loggerMock`:\r\n\r\n\tverify(loggerMock, atLeast(1)).isDebugEnabled();\r\n\r\nI get zero interactions.\r\nI also tried `PowerMockito.verifyStatic()`; in `@Before` but that also has zero interactions.\r\n\r\nThis just seems strange that Cobertura shows the `if(logger.isDebugEnabled()){` as being not 100% complete, and Clover does, but both agree the verification fails.","title":"Mocking Logger and LoggerFactory with PowerMock and Mockito","body":"<p>I have the following Logger I want to mock out, but to validate log entries are getting called, not for the content.</p>\n\n<pre><code>private static Logger logger = \n        LoggerFactory.getLogger(GoodbyeController.class);\n</code></pre>\n\n<p>I want to Mock ANY class that is used for LoggerFactory.getLogger() but I could not find out how to do that.\nThis is what I ended up with so far:</p>\n\n<pre><code>@Before\npublic void performBeforeEachTest() {\n    PowerMockito.mockStatic(LoggerFactory.class);\n    when(LoggerFactory.getLogger(GoodbyeController.class)).\n        thenReturn(loggerMock);\n\n    when(loggerMock.isDebugEnabled()).thenReturn(true);\n    doNothing().when(loggerMock).error(any(String.class));\n\n    ...\n}\n</code></pre>\n\n<p>I would like to know:</p>\n\n<ol>\n<li>Can I Mock the static <code>LoggerFactory.getLogger()</code> to work for any class?</li>\n<li>I can only seem to run <code>when(loggerMock.isDebugEnabled()).thenReturn(true);</code> in the <code>@Before</code> and thus I cannot seem to change the characteristics per method. Is there a way around this?</li>\n</ol>\n\n<hr>\n\n<p><strong>Edit findings:</strong></p>\n\n<p>I thought I tried this already and it didnt work:</p>\n\n<pre><code> when(LoggerFactory.getLogger(any(Class.class))).thenReturn(loggerMock);\n</code></pre>\n\n<p>But thank you, as it did work.</p>\n\n<p>However I have tried countless variations to:</p>\n\n<pre><code>when(loggerMock.isDebugEnabled()).thenReturn(true);\n</code></pre>\n\n<p>I cannot get the loggerMock to change its behavior outside of <code>@Before</code> but this only happens with Coburtura. With Clover, the coverage shows 100% but there is still an issue either way.</p>\n\n<p>I have this simple class:</p>\n\n<pre><code>public ExampleService{\n    private static final Logger logger =\n            LoggerFactory.getLogger(ExampleService.class);\n\n    public String getMessage() {        \n    if(logger.isDebugEnabled()){\n        logger.debug(\"isDebugEnabled\");\n        logger.debug(\"isDebugEnabled\");\n    }\n    return \"Hello world!\";\n    }\n    ...\n}\n</code></pre>\n\n<p>Then I have this test:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({LoggerFactory.class})\npublic class ExampleServiceTests {\n\n    @Mock\n    private Logger loggerMock;\n    private ExampleServiceservice = new ExampleService();\n\n    @Before\n    public void performBeforeEachTest() {\n        PowerMockito.mockStatic(LoggerFactory.class);\n        when(LoggerFactory.getLogger(any(Class.class))).\n            thenReturn(loggerMock);\n\n        //PowerMockito.verifyStatic(); // fails\n    }\n\n    @Test\n    public void testIsDebugEnabled_True() throws Exception {\n        when(loggerMock.isDebugEnabled()).thenReturn(true);\n        doNothing().when(loggerMock).debug(any(String.class));\n\n        assertThat(service.getMessage(), is(\"Hello null: 0\"));\n        //verify(loggerMock, atLeast(1)).isDebugEnabled(); // fails\n    }\n\n    @Test\n    public void testIsDebugEnabled_False() throws Exception {\n        when(loggerMock.isDebugEnabled()).thenReturn(false);\n        doNothing().when(loggerMock).debug(any(String.class));\n\n        assertThat(service.getMessage(), is(\"Hello null: 0\"));\n        //verify(loggerMock, atLeast(1)).isDebugEnabled(); // fails\n    }\n}\n</code></pre>\n\n<p>In clover I show 100% coverage of the <code>if(logger.isDebugEnabled()){</code> block.\nBut if I try to verify the <code>loggerMock</code>:</p>\n\n<pre><code>verify(loggerMock, atLeast(1)).isDebugEnabled();\n</code></pre>\n\n<p>I get zero interactions.\nI also tried <code>PowerMockito.verifyStatic()</code>; in <code>@Before</code> but that also has zero interactions.</p>\n\n<p>This just seems strange that Cobertura shows the <code>if(logger.isDebugEnabled()){</code> as being not 100% complete, and Clover does, but both agree the verification fails.</p>\n"},{"tags":["java","jvm","jvm-arguments","system-properties","giraph"],"answers":[{"tags":[],"owner":{"account_id":29051246,"reputation":1,"user_id":22254024,"display_name":"Augusto Cesar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690503014,"creation_date":1690503014,"answer_id":76784127,"question_id":76784109,"body_markdown":"It looks like the -ca option in Giraph is designed to accept key-value pairs separated by =, rather than a list of JVM arguments.\r\n\r\nTo set multiple JVM flags, you may need to pass them in directly through the JVM launch arguments rather than via -ca. For example:\r\n\r\n\r\nhadoop jar lib/giraph_2.12.jar org.apache.giraph.GiraphRunner \\\r\n  -Dmapreduce.map.java.opts=&quot;-Xmx30456m -Dzookeeper.client.secure=true -Dzookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty&quot;\r\nThe -Dmapreduce.map.java.opts allows you to specify multiple JVM arguments together.\r\n\r\nAnother option is to set the JVM options in your Hadoop config (mapred-site.xml, etc) rather than passing them directly each time.\r\n\r\nSo in summary:\r\n\r\n-ca is for key-value pairs, not multiple JVM args\r\nPass JVM args directly through -Dmapreduce.map.java.opts\r\nOr set them in Hadoop config for reuse\r\nLet me know if this helps explain how to set multiple JVM options for your Giraph job!","title":"Set JVM flags in an Apache Giraph job","body":"<p>It looks like the -ca option in Giraph is designed to accept key-value pairs separated by =, rather than a list of JVM arguments.</p>\n<p>To set multiple JVM flags, you may need to pass them in directly through the JVM launch arguments rather than via -ca. For example:</p>\n<p>hadoop jar lib/giraph_2.12.jar org.apache.giraph.GiraphRunner <br />\n-Dmapreduce.map.java.opts=&quot;-Xmx30456m -Dzookeeper.client.secure=true -Dzookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty&quot;\nThe -Dmapreduce.map.java.opts allows you to specify multiple JVM arguments together.</p>\n<p>Another option is to set the JVM options in your Hadoop config (mapred-site.xml, etc) rather than passing them directly each time.</p>\n<p>So in summary:</p>\n<p>-ca is for key-value pairs, not multiple JVM args\nPass JVM args directly through -Dmapreduce.map.java.opts\nOr set them in Hadoop config for reuse\nLet me know if this helps explain how to set multiple JVM options for your Giraph job!</p>\n"}],"owner":{"account_id":23360219,"reputation":43,"user_id":17432580,"display_name":"Utkarsh Roy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690503014,"creation_date":1690502718,"question_id":76784109,"body_markdown":"I am running an Apache Giraph job which ultimately runs a Hadoop MapReduce job. The job is run by calling a `hadoop jar lib/giraph_2.12.jar org.apache.giraph.GiraphRunner` command\r\n\r\nI&#39;m trying to set a few JVM flags/System properties using the `-ca` flag which looks like this\r\n\r\n`&quot;-ca mapreduce.map.java.opts=\\&quot;-Xmx30456m -Dzookeeper.client.secure=true -Dzookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty\\&quot;&quot;`\r\n\r\nbut looks like its not possible to set these configs like this. Here&#39;s the code to read the `-ca` configs in the `GiraphConfiguration` class\r\n\r\n```\r\n      if (cmd.hasOption(&quot;ca&quot;)) {\r\n        String[] var11 = cmd.getOptionValues(&quot;ca&quot;);\r\n        int var5 = var11.length;\r\n\r\n        for(int var6 = 0; var6 &lt; var5; ++var6) {\r\n          String caOptionValue = var11[var6];\r\n\r\n          String[] parts;\r\n          for(Iterator var8 = Splitter.on(&#39;,&#39;).split(caOptionValue).iterator(); var8.hasNext(); conf.set(parts[0], parts[1])) {\r\n            String paramValue = (String)var8.next();\r\n            parts = (String[])Iterables.toArray(Splitter.on(&#39;=&#39;).split(paramValue), String.class);\r\n            if (parts.length != 2) {\r\n              throw new IllegalArgumentException(&quot;Unable to parse custom  argument: &quot; + paramValue);\r\n            }\r\n\r\n            if (LOG.isInfoEnabled()) {\r\n              LOG.info(&quot;Setting custom argument [&quot; + parts[0] + &quot;] to [&quot; + parts[1] + &quot;] in GiraphConfiguration&quot;);\r\n            }\r\n          }\r\n        }\r\n      }\r\n```\r\n\r\nI&#39;ve been setting the java.opts memory in my job but does anyone know how to set multiple flags ","title":"Set JVM flags in an Apache Giraph job","body":"<p>I am running an Apache Giraph job which ultimately runs a Hadoop MapReduce job. The job is run by calling a <code>hadoop jar lib/giraph_2.12.jar org.apache.giraph.GiraphRunner</code> command</p>\n<p>I'm trying to set a few JVM flags/System properties using the <code>-ca</code> flag which looks like this</p>\n<p><code>&quot;-ca mapreduce.map.java.opts=\\&quot;-Xmx30456m -Dzookeeper.client.secure=true -Dzookeeper.clientCnxnSocket=org.apache.zookeeper.ClientCnxnSocketNetty\\&quot;&quot;</code></p>\n<p>but looks like its not possible to set these configs like this. Here's the code to read the <code>-ca</code> configs in the <code>GiraphConfiguration</code> class</p>\n<pre><code>      if (cmd.hasOption(&quot;ca&quot;)) {\n        String[] var11 = cmd.getOptionValues(&quot;ca&quot;);\n        int var5 = var11.length;\n\n        for(int var6 = 0; var6 &lt; var5; ++var6) {\n          String caOptionValue = var11[var6];\n\n          String[] parts;\n          for(Iterator var8 = Splitter.on(',').split(caOptionValue).iterator(); var8.hasNext(); conf.set(parts[0], parts[1])) {\n            String paramValue = (String)var8.next();\n            parts = (String[])Iterables.toArray(Splitter.on('=').split(paramValue), String.class);\n            if (parts.length != 2) {\n              throw new IllegalArgumentException(&quot;Unable to parse custom  argument: &quot; + paramValue);\n            }\n\n            if (LOG.isInfoEnabled()) {\n              LOG.info(&quot;Setting custom argument [&quot; + parts[0] + &quot;] to [&quot; + parts[1] + &quot;] in GiraphConfiguration&quot;);\n            }\n          }\n        }\n      }\n</code></pre>\n<p>I've been setting the java.opts memory in my job but does anyone know how to set multiple flags</p>\n"},{"tags":["java","file","io","directory"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":10,"creation_date":1259898523,"post_id":1844688,"comment_id":1738283,"body_markdown":"I agree, point out the class to use so the poster can become familiar with the various method, otherwise the poster doesn&#39;t bother to read the API to find out what other methods are available.","body":"I agree, point out the class to use so the poster can become familiar with the various method, otherwise the poster doesn&#39;t bother to read the API to find out what other methods are available."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":6,"creation_date":1259901377,"post_id":1844688,"comment_id":1738457,"body_markdown":"Did you mean all files in a folder, or all files in a folder and all subfolders?","body":"Did you mean all files in a folder, or all files in a folder and all subfolders?"},{"owner":{"account_id":4121,"reputation":2737,"user_id":6101,"accept_rate":90,"display_name":"Tom Duckering"},"score":3,"creation_date":1398615047,"post_id":1844688,"comment_id":35715040,"body_markdown":"An up to date link to the API: http://docs.oracle.com/javase/7/docs/api/java/io/File.html","body":"An up to date link to the API: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/File.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/io/File.html</a>"},{"owner":{"account_id":1129042,"reputation":48134,"user_id":1115554,"accept_rate":100,"display_name":"micha"},"score":2,"creation_date":1400782116,"post_id":1844688,"comment_id":36635160,"body_markdown":"If you are using Java 7 or newer you can use `Files.walkFileTree`, see http://stackoverflow.com/a/23814217/1115554","body":"If you are using Java 7 or newer you can use <code>Files.walkFileTree</code>, see <a href=\"http://stackoverflow.com/a/23814217/1115554\">stackoverflow.com/a/23814217/1115554</a>"}],"answers":[{"tags":[],"owner":{"account_id":59883,"reputation":9527,"user_id":179057,"accept_rate":100,"display_name":"David Robles"},"down_vote_count":2,"up_vote_count":220,"is_accepted":false,"score":218,"last_activity_date":1355730066,"creation_date":1259898110,"answer_id":1844695,"question_id":1844688,"body_markdown":"    File folder = new File(&quot;/Users/you/folder/&quot;);\r\n    File[] listOfFiles = folder.listFiles();\r\n\r\n    for (File file : listOfFiles) {\r\n        if (file.isFile()) {\r\n            System.out.println(file.getName());\r\n        }\r\n    }","title":"How to read all files in a folder from Java?","body":"<pre><code>File folder = new File(\"/Users/you/folder/\");\nFile[] listOfFiles = folder.listFiles();\n\nfor (File file : listOfFiles) {\n    if (file.isFile()) {\n        System.out.println(file.getName());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":60400,"reputation":19147,"user_id":180416,"accept_rate":63,"display_name":"rich"},"down_vote_count":1,"up_vote_count":1138,"is_accepted":true,"score":1137,"last_activity_date":1495482894,"creation_date":1259925666,"answer_id":1846349,"question_id":1844688,"body_markdown":"    public void listFilesForFolder(final File folder) {\r\n        for (final File fileEntry : folder.listFiles()) {\r\n            if (fileEntry.isDirectory()) {\r\n                listFilesForFolder(fileEntry);\r\n            } else {\r\n                System.out.println(fileEntry.getName());\r\n            }\r\n        }\r\n    }\r\n    \r\n    final File folder = new File(&quot;/home/you/Desktop&quot;);\r\n    listFilesForFolder(folder);\r\n\r\n[Files.walk][1] API is available from Java 8.\r\n\r\n    try (Stream&lt;Path&gt; paths = Files.walk(Paths.get(&quot;/home/you/Desktop&quot;))) {\r\n        paths\r\n            .filter(Files::isRegularFile)\r\n            .forEach(System.out::println);\r\n    } \r\n\r\nThe example uses [try-with-resources][2] pattern recommended in API guide. It ensures that no matter circumstances the stream will be closed.\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#walk-java.nio.file.Path-java.nio.file.FileVisitOption...-\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html","title":"How to read all files in a folder from Java?","body":"<pre><code>public void listFilesForFolder(final File folder) {\n    for (final File fileEntry : folder.listFiles()) {\n        if (fileEntry.isDirectory()) {\n            listFilesForFolder(fileEntry);\n        } else {\n            System.out.println(fileEntry.getName());\n        }\n    }\n}\n\nfinal File folder = new File(\"/home/you/Desktop\");\nlistFilesForFolder(folder);\n</code></pre>\n\n<p><a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#walk-java.nio.file.Path-java.nio.file.FileVisitOption...-\" rel=\"noreferrer\">Files.walk</a> API is available from Java 8.</p>\n\n<pre><code>try (Stream&lt;Path&gt; paths = Files.walk(Paths.get(\"/home/you/Desktop\"))) {\n    paths\n        .filter(Files::isRegularFile)\n        .forEach(System.out::println);\n} \n</code></pre>\n\n<p>The example uses <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"noreferrer\">try-with-resources</a> pattern recommended in API guide. It ensures that no matter circumstances the stream will be closed.</p>\n"},{"tags":[],"owner":{"account_id":736108,"reputation":49,"user_id":703712,"display_name":"sailakshmi Duggirala"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1302675334,"creation_date":1302599640,"answer_id":5632895,"question_id":1844688,"body_markdown":"    File directory = new File(&quot;/user/folder&quot;);  \t\r\n    File[] myarray;  \r\n    myarray=new File[10];\r\n    myarray=directory.listFiles();\r\n    for (int j = 0; j &lt; myarray.length; j++)\r\n    {\r\n    \t   File path=myarray[j];\r\n           FileReader fr = new FileReader(path);\r\n           BufferedReader br = new BufferedReader(fr);\r\n           String s = &quot;&quot;;\r\n           while (br.ready()) {\r\n              s += br.readLine() + &quot;\\n&quot;;\r\n           }\r\n    }","title":"How to read all files in a folder from Java?","body":"<pre><code>File directory = new File(\"/user/folder\");      \nFile[] myarray;  \nmyarray=new File[10];\nmyarray=directory.listFiles();\nfor (int j = 0; j &lt; myarray.length; j++)\n{\n       File path=myarray[j];\n       FileReader fr = new FileReader(path);\n       BufferedReader br = new BufferedReader(fr);\n       String s = \"\";\n       while (br.ready()) {\n          s += br.readLine() + \"\\n\";\n       }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2074103,"reputation":131,"user_id":1847949,"display_name":"muthu krishna"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1353687069,"creation_date":1353685391,"answer_id":13532147,"question_id":1844688,"body_markdown":"\r\n    import java.io.File;\r\n\r\n\r\n    public class ReadFilesFromFolder {\r\n      public static File folder = new File(&quot;C:/Documents and Settings/My Documents/Downloads&quot;);\r\n      static String temp = &quot;&quot;;\r\n\r\n      public static void main(String[] args) {\r\n        // TODO Auto-generated method stub\r\n        System.out.println(&quot;Reading files under the folder &quot;+ folder.getAbsolutePath());\r\n        listFilesForFolder(folder);\r\n      }\r\n\r\n      public static void listFilesForFolder(final File folder) {\r\n\r\n        for (final File fileEntry : folder.listFiles()) {\r\n          if (fileEntry.isDirectory()) {\r\n            // System.out.println(&quot;Reading files under the folder &quot;+folder.getAbsolutePath());\r\n            listFilesForFolder(fileEntry);\r\n          } else {\r\n            if (fileEntry.isFile()) {\r\n              temp = fileEntry.getName();\r\n              if ((temp.substring(temp.lastIndexOf(&#39;.&#39;) + 1, temp.length()).toLowerCase()).equals(&quot;txt&quot;))\r\n                System.out.println(&quot;File= &quot; + folder.getAbsolutePath()+ &quot;\\\\&quot; + fileEntry.getName());\r\n            }\r\n\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n","title":"How to read all files in a folder from Java?","body":"<pre><code>import java.io.File;\n\n\npublic class ReadFilesFromFolder {\n  public static File folder = new File(\"C:/Documents and Settings/My Documents/Downloads\");\n  static String temp = \"\";\n\n  public static void main(String[] args) {\n    // TODO Auto-generated method stub\n    System.out.println(\"Reading files under the folder \"+ folder.getAbsolutePath());\n    listFilesForFolder(folder);\n  }\n\n  public static void listFilesForFolder(final File folder) {\n\n    for (final File fileEntry : folder.listFiles()) {\n      if (fileEntry.isDirectory()) {\n        // System.out.println(\"Reading files under the folder \"+folder.getAbsolutePath());\n        listFilesForFolder(fileEntry);\n      } else {\n        if (fileEntry.isFile()) {\n          temp = fileEntry.getName();\n          if ((temp.substring(temp.lastIndexOf('.') + 1, temp.length()).toLowerCase()).equals(\"txt\"))\n            System.out.println(\"File= \" + folder.getAbsolutePath()+ \"\\\\\" + fileEntry.getName());\n        }\n\n      }\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1776813,"reputation":735,"user_id":1620446,"display_name":"Abhilash Ranjan"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1356553998,"creation_date":1356547521,"answer_id":14044789,"question_id":1844688,"body_markdown":"    import java.io.File;\r\n\r\n\r\n    public class Test {\r\n\t\r\n\tpublic void test1() {\r\n\t\tSystem.out.println(&quot;TEST 1&quot;);\r\n\t}\r\n\t\r\n\tpublic static void main(String[] args) throws SecurityException, ClassNotFoundException{\r\n\t\t\r\n\t\tFile actual = new File(&quot;src&quot;);\r\n\t\tFile list[] = actual.listFiles();\r\n\t\tfor(int i=0; i&lt;list.length; i++){\r\n\t\t\tString substring = list[i].getName().substring(0, list[i].getName().indexOf(&quot;.&quot;));\r\n\t\t\tif(list[i].isFile() &amp;&amp; list[i].getName().contains(&quot;.java&quot;)){\r\n\t\t\t\t\tif(Class.forName(substring).getMethods()[0].getName().contains(&quot;main&quot;)){\r\n\t\t\t\t\t\tSystem.out.println(&quot;CLASS NAME &quot;+Class.forName(substring).getName());\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t     }\r\n        }\r\n\r\n    }\r\n    }\r\n\r\nJust pass your folder it will tell you main class about the method.","title":"How to read all files in a folder from Java?","body":"<pre><code>import java.io.File;\n\n\npublic class Test {\n\npublic void test1() {\n    System.out.println(\"TEST 1\");\n}\n\npublic static void main(String[] args) throws SecurityException, ClassNotFoundException{\n\n    File actual = new File(\"src\");\n    File list[] = actual.listFiles();\n    for(int i=0; i&lt;list.length; i++){\n        String substring = list[i].getName().substring(0, list[i].getName().indexOf(\".\"));\n        if(list[i].isFile() &amp;&amp; list[i].getName().contains(\".java\")){\n                if(Class.forName(substring).getMethods()[0].getName().contains(\"main\")){\n                    System.out.println(\"CLASS NAME \"+Class.forName(substring).getName());\n                }\n\n         }\n    }\n\n}\n}\n</code></pre>\n\n<p>Just pass your folder it will tell you main class about the method.</p>\n"},{"tags":[],"owner":{"account_id":1464779,"reputation":441,"user_id":1377978,"accept_rate":45,"display_name":"heiningair"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1368177412,"creation_date":1368177412,"answer_id":16478884,"question_id":1844688,"body_markdown":"to prevent Nullpointerexceptions on the listFiles() function and recursivly get all files from subdirectories too..\r\n\r\n\r\n     public void listFilesForFolder(final File folder,List&lt;File&gt; fileList) {\r\n        File[] filesInFolder = folder.listFiles();\r\n        if (filesInFolder != null) {\r\n            for (final File fileEntry : filesInFolder) {\r\n                if (fileEntry.isDirectory()) {\r\n                listFilesForFolder(fileEntry,fileList);\r\n            } else {\r\n                fileList.add(fileEntry);\r\n            }\r\n         }\r\n        }\r\n     }\r\n\r\n     List&lt;File&gt; fileList = new List&lt;File&gt;();\r\n     final File folder = new File(&quot;/home/you/Desktop&quot;);\r\n     listFilesForFolder(folder);\r\n","title":"How to read all files in a folder from Java?","body":"<p>to prevent Nullpointerexceptions on the listFiles() function and recursivly get all files from subdirectories too..</p>\n\n<pre><code> public void listFilesForFolder(final File folder,List&lt;File&gt; fileList) {\n    File[] filesInFolder = folder.listFiles();\n    if (filesInFolder != null) {\n        for (final File fileEntry : filesInFolder) {\n            if (fileEntry.isDirectory()) {\n            listFilesForFolder(fileEntry,fileList);\n        } else {\n            fileList.add(fileEntry);\n        }\n     }\n    }\n }\n\n List&lt;File&gt; fileList = new List&lt;File&gt;();\n final File folder = new File(\"/home/you/Desktop\");\n listFilesForFolder(folder);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2770361,"reputation":196,"user_id":2385076,"display_name":"Adrien Hadj-Salah"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1368610208,"creation_date":1368610208,"answer_id":16561438,"question_id":1844688,"body_markdown":"If you want more options, you can use this function which aims to populate an arraylist of files present in a folder. Options are : recursivility and pattern to match.\r\n\r\n    public static ArrayList&lt;File&gt; listFilesForFolder(final File folder,\r\n            final boolean recursivity,\r\n            final String patternFileFilter) {\r\n\r\n        // Inputs\r\n        boolean filteredFile = false;\r\n\r\n        // Ouput\r\n        final ArrayList&lt;File&gt; output = new ArrayList&lt;File&gt; ();\r\n\r\n        // Foreach elements\r\n        for (final File fileEntry : folder.listFiles()) {\r\n\r\n            // If this element is a directory, do it recursivly\r\n            if (fileEntry.isDirectory()) {\r\n                if (recursivity) {\r\n                    output.addAll(listFilesForFolder(fileEntry, recursivity, patternFileFilter));\r\n                }\r\n            }\r\n            else {\r\n                // If there is no pattern, the file is correct\r\n                if (patternFileFilter.length() == 0) {\r\n                    filteredFile = true;\r\n                }\r\n                // Otherwise we need to filter by pattern\r\n                else {\r\n                    filteredFile = Pattern.matches(patternFileFilter, fileEntry.getName());\r\n                }\r\n\r\n                // If the file has a name which match with the pattern, then add it to the list\r\n                if (filteredFile) {\r\n                    output.add(fileEntry);\r\n                }\r\n            }\r\n        }\r\n\r\n        return output;\r\n    }\r\n\r\nBest, Adrien","title":"How to read all files in a folder from Java?","body":"<p>If you want more options, you can use this function which aims to populate an arraylist of files present in a folder. Options are : recursivility and pattern to match.</p>\n\n<pre><code>public static ArrayList&lt;File&gt; listFilesForFolder(final File folder,\n        final boolean recursivity,\n        final String patternFileFilter) {\n\n    // Inputs\n    boolean filteredFile = false;\n\n    // Ouput\n    final ArrayList&lt;File&gt; output = new ArrayList&lt;File&gt; ();\n\n    // Foreach elements\n    for (final File fileEntry : folder.listFiles()) {\n\n        // If this element is a directory, do it recursivly\n        if (fileEntry.isDirectory()) {\n            if (recursivity) {\n                output.addAll(listFilesForFolder(fileEntry, recursivity, patternFileFilter));\n            }\n        }\n        else {\n            // If there is no pattern, the file is correct\n            if (patternFileFilter.length() == 0) {\n                filteredFile = true;\n            }\n            // Otherwise we need to filter by pattern\n            else {\n                filteredFile = Pattern.matches(patternFileFilter, fileEntry.getName());\n            }\n\n            // If the file has a name which match with the pattern, then add it to the list\n            if (filteredFile) {\n                output.add(fileEntry);\n            }\n        }\n    }\n\n    return output;\n}\n</code></pre>\n\n<p>Best, Adrien</p>\n"},{"tags":[],"owner":{"account_id":1771854,"reputation":725,"user_id":1616486,"accept_rate":50,"display_name":"Sanket Thakkar"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1474627894,"creation_date":1375692942,"answer_id":18054106,"question_id":1844688,"body_markdown":"    private static final String ROOT_FILE_PATH=&quot;/&quot;;\r\n    File f=new File(ROOT_FILE_PATH);\r\n    File[] allSubFiles=f.listFiles();\r\n    for (File file : allSubFiles) {\r\n        if(file.isDirectory())\r\n        {\r\n            System.out.println(file.getAbsolutePath()+&quot; is directory&quot;);\r\n            //Steps for directory\r\n        }\r\n        else\r\n        {\r\n            System.out.println(file.getAbsolutePath()+&quot; is file&quot;);\r\n            //steps for files\r\n        }\r\n    }","title":"How to read all files in a folder from Java?","body":"<pre><code>private static final String ROOT_FILE_PATH=\"/\";\nFile f=new File(ROOT_FILE_PATH);\nFile[] allSubFiles=f.listFiles();\nfor (File file : allSubFiles) {\n    if(file.isDirectory())\n    {\n        System.out.println(file.getAbsolutePath()+\" is directory\");\n        //Steps for directory\n    }\n    else\n    {\n        System.out.println(file.getAbsolutePath()+\" is file\");\n        //steps for files\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":207037,"reputation":4836,"user_id":456684,"accept_rate":100,"display_name":"Mark Spangler"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1591597642,"creation_date":1376665600,"answer_id":18276514,"question_id":1844688,"body_markdown":"In Java 7 and higher you can use [listdir](http://docs.oracle.com/javase/tutorial/essential/io/dirs.html#listdir)\r\n\r\n    Path dir = ...;\r\n    try (DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\r\n        for (Path file: stream) {\r\n            System.out.println(file.getFileName());\r\n        }\r\n    } catch (IOException | DirectoryIteratorException x) {\r\n        // IOException can never be thrown by the iteration.\r\n        // In this snippet, it can only be thrown by newDirectoryStream.\r\n        System.err.println(x);\r\n    }\r\n\r\nYou can also create a filter that can then be passed into the `newDirectoryStream` method above\r\n\r\n    DirectoryStream.Filter&lt;Path&gt; filter = new DirectoryStream.Filter&lt;Path&gt;() {\r\n        public boolean accept(Path file) throws IOException {\r\n            try {\r\n                return (Files.isRegularFile(path));\r\n            } catch (IOException x) {\r\n                // Failed to determine if it&#39;s a file.\r\n                System.err.println(x);\r\n                return false;\r\n            }\r\n        }\r\n    };\r\n\r\nFor other filtering examples, [see documentation].(http://docs.oracle.com/javase/tutorial/essential/io/dirs.html#glob)","title":"How to read all files in a folder from Java?","body":"<p>In Java 7 and higher you can use <a href=\"http://docs.oracle.com/javase/tutorial/essential/io/dirs.html#listdir\" rel=\"nofollow noreferrer\">listdir</a></p>\n\n<pre><code>Path dir = ...;\ntry (DirectoryStream&lt;Path&gt; stream = Files.newDirectoryStream(dir)) {\n    for (Path file: stream) {\n        System.out.println(file.getFileName());\n    }\n} catch (IOException | DirectoryIteratorException x) {\n    // IOException can never be thrown by the iteration.\n    // In this snippet, it can only be thrown by newDirectoryStream.\n    System.err.println(x);\n}\n</code></pre>\n\n<p>You can also create a filter that can then be passed into the <code>newDirectoryStream</code> method above</p>\n\n<pre><code>DirectoryStream.Filter&lt;Path&gt; filter = new DirectoryStream.Filter&lt;Path&gt;() {\n    public boolean accept(Path file) throws IOException {\n        try {\n            return (Files.isRegularFile(path));\n        } catch (IOException x) {\n            // Failed to determine if it's a file.\n            System.err.println(x);\n            return false;\n        }\n    }\n};\n</code></pre>\n\n<p>For other filtering examples, [see documentation].(<a href=\"http://docs.oracle.com/javase/tutorial/essential/io/dirs.html#glob\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/tutorial/essential/io/dirs.html#glob</a>)</p>\n"},{"tags":[],"owner":{"account_id":3342756,"reputation":29,"user_id":2808634,"display_name":"Mukesh Jha"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1449676617,"creation_date":1380047705,"answer_id":18989390,"question_id":1844688,"body_markdown":"    package com;\r\n\r\n\r\n\timport java.io.File;\r\n\r\n\t/**\r\n\t *\r\n\t * @author ?Mukesh\r\n\t */\r\n\tpublic class ListFiles {\r\n\r\n\t     static File mainFolder = new File(&quot;D:\\\\Movies&quot;);\r\n\t     \r\n\t     public static void main(String[] args)\r\n\t     {\r\n\t         ListFiles lf = new ListFiles();\r\n\t         lf.getFiles(lf.mainFolder);\r\n\r\n\t\t     long fileSize = mainFolder.length();\r\n\t\t         System.out.println(&quot;mainFolder size in bytes is: &quot; + fileSize);\r\n\t\t         System.out.println(&quot;File size in KB is : &quot; + (double)fileSize/1024);\r\n\t\t         System.out.println(&quot;File size in MB is :&quot; + (double)fileSize/(1024*1024));\r\n\t     }\r\n\t     public void getFiles(File f){\r\n\t         File files[];\r\n\t         if(f.isFile())\r\n\t             System.out.println(f.getAbsolutePath());\r\n\t         else{\r\n\t             files = f.listFiles();\r\n\t             for (int i = 0; i &lt; files.length; i++) {\r\n\t                 getFiles(files[i]);\r\n\t             }\r\n\t         }\r\n\t     }\r\n\t}\r\n","title":"How to read all files in a folder from Java?","body":"<pre><code>package com;\n\n\nimport java.io.File;\n\n/**\n *\n * @author ?Mukesh\n */\npublic class ListFiles {\n\n     static File mainFolder = new File(\"D:\\\\Movies\");\n\n     public static void main(String[] args)\n     {\n         ListFiles lf = new ListFiles();\n         lf.getFiles(lf.mainFolder);\n\n         long fileSize = mainFolder.length();\n             System.out.println(\"mainFolder size in bytes is: \" + fileSize);\n             System.out.println(\"File size in KB is : \" + (double)fileSize/1024);\n             System.out.println(\"File size in MB is :\" + (double)fileSize/(1024*1024));\n     }\n     public void getFiles(File f){\n         File files[];\n         if(f.isFile())\n             System.out.println(f.getAbsolutePath());\n         else{\n             files = f.listFiles();\n             for (int i = 0; i &lt; files.length; i++) {\n                 getFiles(files[i]);\n             }\n         }\n     }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":49303,"reputation":4598,"user_id":146745,"accept_rate":71,"display_name":"andrej"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1385500910,"creation_date":1385500910,"answer_id":20228234,"question_id":1844688,"body_markdown":"nice usage of `java.io.FileFilter` as seen on https://stackoverflow.com/a/286001/146745\r\n\r\n\tFile fl = new File(dir);\r\n\tFile[] files = fl.listFiles(new FileFilter() {\t\t\t\r\n\t\tpublic boolean accept(File file) {\r\n\t\t\treturn file.isFile();\r\n\t\t}\r\n\t});\r\n","title":"How to read all files in a folder from Java?","body":"<p>nice usage of <code>java.io.FileFilter</code> as seen on <a href=\"https://stackoverflow.com/a/286001/146745\">https://stackoverflow.com/a/286001/146745</a></p>\n\n<pre><code>File fl = new File(dir);\nFile[] files = fl.listFiles(new FileFilter() {          \n    public boolean accept(File file) {\n        return file.isFile();\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3765024,"reputation":31,"user_id":3128754,"display_name":"Santosh Rathod"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1387783411,"creation_date":1387782316,"answer_id":20738556,"question_id":1844688,"body_markdown":"        static File mainFolder = new File(&quot;Folder&quot;);\r\n        public static void main(String[] args) {\r\n           \r\n            lf.getFiles(lf.mainFolder);\r\n        }\r\n        public void getFiles(File f) {\r\n            File files[];\r\n            if (f.isFile()) {\r\n                String name=f.getName();\r\n             \r\n            } else {\r\n                files = f.listFiles();\r\n                for (int i = 0; i &lt; files.length; i++) {\r\n                    getFiles(files[i]);\r\n                }\r\n            }\r\n        }","title":"How to read all files in a folder from Java?","body":"<pre><code>    static File mainFolder = new File(\"Folder\");\n    public static void main(String[] args) {\n\n        lf.getFiles(lf.mainFolder);\n    }\n    public void getFiles(File f) {\n        File files[];\n        if (f.isFile()) {\n            String name=f.getName();\n\n        } else {\n            files = f.listFiles();\n            for (int i = 0; i &lt; files.length; i++) {\n                getFiles(files[i]);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3794948,"reputation":1,"user_id":3150353,"display_name":"ChetanTwr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1388531121,"creation_date":1388531121,"answer_id":20864045,"question_id":1844688,"body_markdown":"    import java.io.File;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class AvoidNullExp {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tList&lt;File&gt; fileList =new ArrayList&lt;&gt;();\r\n\t\t final File folder = new File(&quot;g:/master&quot;);\r\n\t\t new AvoidNullExp().listFilesForFolder(folder, fileList);\r\n\t}\r\n\r\n\t\tpublic void listFilesForFolder(final File folder,List&lt;File&gt; fileList) {\r\n\t\t    File[] filesInFolder = folder.listFiles();\r\n\t\t    if (filesInFolder != null) {\r\n\t\t        for (final File fileEntry : filesInFolder) {\r\n\t\t            if (fileEntry.isDirectory()) {\r\n\t\t            \tSystem.out.println(&quot;DIR : &quot;+fileEntry.getName());\r\n\t\t            listFilesForFolder(fileEntry,fileList);\r\n\t\t        } else {\r\n\t\t        \tSystem.out.println(&quot;FILE : &quot;+fileEntry.getName());\r\n\t\t            fileList.add(fileEntry);\r\n\t\t        }\r\n\t\t     }\r\n\t\t    }\r\n\t\t }\r\n\r\n\t\t \r\n\t}\r\n","title":"How to read all files in a folder from Java?","body":"<pre><code>import java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class AvoidNullExp {\n\npublic static void main(String[] args) {\n\n    List&lt;File&gt; fileList =new ArrayList&lt;&gt;();\n     final File folder = new File(\"g:/master\");\n     new AvoidNullExp().listFilesForFolder(folder, fileList);\n}\n\n    public void listFilesForFolder(final File folder,List&lt;File&gt; fileList) {\n        File[] filesInFolder = folder.listFiles();\n        if (filesInFolder != null) {\n            for (final File fileEntry : filesInFolder) {\n                if (fileEntry.isDirectory()) {\n                    System.out.println(\"DIR : \"+fileEntry.getName());\n                listFilesForFolder(fileEntry,fileList);\n            } else {\n                System.out.println(\"FILE : \"+fileEntry.getName());\n                fileList.add(fileEntry);\n            }\n         }\n        }\n     }\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4275999,"reputation":34098,"user_id":3496570,"accept_rate":39,"display_name":"Zar E Ahmer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431920629,"creation_date":1400219170,"answer_id":23693382,"question_id":1844688,"body_markdown":"    /**\r\n\t * Function to read all mp3 files from sdcard and store the details in an\r\n\t * ArrayList\r\n\t */\r\n\t\r\n\r\n    public ArrayList&lt;HashMap&lt;String, String&gt;&gt; getPlayList() \r\n    \t{\r\n    \t\tArrayList&lt;HashMap&lt;String, String&gt;&gt; songsList=new ArrayList&lt;&gt;();\r\n            File home = new File(MEDIA_PATH);\r\n    \r\n    \t\tif (home.listFiles(new FileExtensionFilter()).length &gt; 0) {\r\n    \t\t\tfor (File file : home.listFiles(new FileExtensionFilter())) {\r\n    \t\t\t\tHashMap&lt;String, String&gt; song = new HashMap&lt;String, String&gt;();\r\n    \t\t\t\tsong.put(\r\n    \t\t\t\t\t\t&quot;songTitle&quot;,\r\n    \t\t\t\t\t\tfile.getName().substring(0,\r\n    \t\t\t\t\t\t\t\t(file.getName().length() - 4)));\r\n    \t\t\t\tsong.put(&quot;songPath&quot;, file.getPath());\r\n    \r\n    \t\t\t\t// Adding each song to SongList\r\n    \t\t\t\tsongsList.add(song);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t// return songs list array\r\n    \t\treturn songsList;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Class to filter files which have a .mp3 extension\r\n    \t * */\r\n    \tclass FileExtensionFilter implements FilenameFilter \r\n    \t{\r\n    \t\t@Override\r\n    \t\tpublic boolean accept(File dir, String name) {\r\n    \t\t\treturn (name.endsWith(&quot;.mp3&quot;) || name.endsWith(&quot;.MP3&quot;));\r\n    \t\t}\r\n    \t}\r\n\r\n\r\nYou can filter any textfiles or any other extension ..just replace it with .MP3","title":"How to read all files in a folder from Java?","body":"<pre><code>/**\n * Function to read all mp3 files from sdcard and store the details in an\n * ArrayList\n */\n\n\npublic ArrayList&lt;HashMap&lt;String, String&gt;&gt; getPlayList() \n    {\n        ArrayList&lt;HashMap&lt;String, String&gt;&gt; songsList=new ArrayList&lt;&gt;();\n        File home = new File(MEDIA_PATH);\n\n        if (home.listFiles(new FileExtensionFilter()).length &gt; 0) {\n            for (File file : home.listFiles(new FileExtensionFilter())) {\n                HashMap&lt;String, String&gt; song = new HashMap&lt;String, String&gt;();\n                song.put(\n                        \"songTitle\",\n                        file.getName().substring(0,\n                                (file.getName().length() - 4)));\n                song.put(\"songPath\", file.getPath());\n\n                // Adding each song to SongList\n                songsList.add(song);\n            }\n        }\n        // return songs list array\n        return songsList;\n    }\n\n    /**\n     * Class to filter files which have a .mp3 extension\n     * */\n    class FileExtensionFilter implements FilenameFilter \n    {\n        @Override\n        public boolean accept(File dir, String name) {\n            return (name.endsWith(\".mp3\") || name.endsWith(\".MP3\"));\n        }\n    }\n</code></pre>\n\n<p>You can filter any textfiles or any other extension ..just replace it with .MP3</p>\n"},{"tags":[],"owner":{"account_id":1129042,"reputation":48134,"user_id":1115554,"accept_rate":100,"display_name":"micha"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1400782007,"creation_date":1400782007,"answer_id":23814217,"question_id":1844688,"body_markdown":"Just walk through all Files using `Files.walkFileTree` (Java 7)\r\n\r\n    Files.walkFileTree(Paths.get(dir), new SimpleFileVisitor&lt;Path&gt;() {\r\n    \t@Override\r\n    \tpublic FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {\r\n    \t\tSystem.out.println(&quot;file: &quot; + file);\r\n    \t\treturn FileVisitResult.CONTINUE;\r\n    \t}\r\n    });","title":"How to read all files in a folder from Java?","body":"<p>Just walk through all Files using <code>Files.walkFileTree</code> (Java 7)</p>\n\n<pre><code>Files.walkFileTree(Paths.get(dir), new SimpleFileVisitor&lt;Path&gt;() {\n    @Override\n    public FileVisitResult visitFile(Path file, BasicFileAttributes attrs) throws IOException {\n        System.out.println(\"file: \" + file);\n        return FileVisitResult.CONTINUE;\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1018177,"reputation":3890,"user_id":1029251,"accept_rate":100,"display_name":"Julian Pieles"},"down_vote_count":1,"up_vote_count":172,"is_accepted":false,"score":171,"last_activity_date":1496309762,"creation_date":1412597312,"answer_id":26215931,"question_id":1844688,"body_markdown":"In Java 8 you can do this\r\n\r\n    Files.walk(Paths.get(&quot;/path/to/folder&quot;))\r\n         .filter(Files::isRegularFile)\r\n         .forEach(System.out::println);\r\n\r\nwhich will print all files in a folder while excluding all directories. If you need a list, the following will do:\r\n\r\n    Files.walk(Paths.get(&quot;/path/to/folder&quot;))\r\n         .filter(Files::isRegularFile)\r\n         .collect(Collectors.toList())\r\n\r\nIf you want to return `List&lt;File&gt;` instead of `List&lt;Path&gt;` just map it:\r\n\r\n    List&lt;File&gt; filesInFolder = Files.walk(Paths.get(&quot;/path/to/folder&quot;))\r\n                                    .filter(Files::isRegularFile)\r\n                                    .map(Path::toFile)\r\n                                    .collect(Collectors.toList());\r\n\r\nYou also need to make sure to close the stream! Otherwise you might run into an exception telling you that too many files are open. Read [here][1] for more information.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/38698245/1029251","title":"How to read all files in a folder from Java?","body":"<p>In Java 8 you can do this</p>\n\n<pre><code>Files.walk(Paths.get(\"/path/to/folder\"))\n     .filter(Files::isRegularFile)\n     .forEach(System.out::println);\n</code></pre>\n\n<p>which will print all files in a folder while excluding all directories. If you need a list, the following will do:</p>\n\n<pre><code>Files.walk(Paths.get(\"/path/to/folder\"))\n     .filter(Files::isRegularFile)\n     .collect(Collectors.toList())\n</code></pre>\n\n<p>If you want to return <code>List&lt;File&gt;</code> instead of <code>List&lt;Path&gt;</code> just map it:</p>\n\n<pre><code>List&lt;File&gt; filesInFolder = Files.walk(Paths.get(\"/path/to/folder\"))\n                                .filter(Files::isRegularFile)\n                                .map(Path::toFile)\n                                .collect(Collectors.toList());\n</code></pre>\n\n<p>You also need to make sure to close the stream! Otherwise you might run into an exception telling you that too many files are open. Read <a href=\"https://stackoverflow.com/a/38698245/1029251\">here</a> for more information.</p>\n"},{"tags":[],"owner":{"account_id":5278285,"reputation":1,"user_id":4214452,"display_name":"shree"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415107535,"creation_date":1415107535,"answer_id":26736272,"question_id":1844688,"body_markdown":"&gt; list down files from Test folder present inside class path\r\n\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    \r\n    public class Hello {\r\n    \r\n        public static void main(final String[] args) throws IOException {\r\n    \r\n            System.out.println(&quot;List down all the files present on the server directory&quot;);\r\n            File file1 = new File(&quot;/prog/FileTest/src/Test&quot;);\r\n            File[] files = file1.listFiles();\r\n            if (null != files) {\r\n                for (int fileIntList = 0; fileIntList &lt; files.length; fileIntList++) {\r\n                    String ss = files[fileIntList].toString();\r\n                    if (null != ss &amp;&amp; ss.length() &gt; 0) {\r\n                        System.out.println(&quot;File: &quot; + (fileIntList + 1) + &quot; :&quot; + ss.substring(ss.lastIndexOf(&quot;\\\\&quot;) + 1, ss.length()));\r\n                    }\r\n                }\r\n            }\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n    }","title":"How to read all files in a folder from Java?","body":"<blockquote>\n  <p>list down files from Test folder present inside class path</p>\n</blockquote>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\npublic class Hello {\n\n    public static void main(final String[] args) throws IOException {\n\n        System.out.println(\"List down all the files present on the server directory\");\n        File file1 = new File(\"/prog/FileTest/src/Test\");\n        File[] files = file1.listFiles();\n        if (null != files) {\n            for (int fileIntList = 0; fileIntList &lt; files.length; fileIntList++) {\n                String ss = files[fileIntList].toString();\n                if (null != ss &amp;&amp; ss.length() &gt; 0) {\n                    System.out.println(\"File: \" + (fileIntList + 1) + \" :\" + ss.substring(ss.lastIndexOf(\"\\\\\") + 1, ss.length()));\n                }\n            }\n        }\n\n\n    }\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5798502,"reputation":81,"user_id":4573489,"display_name":"Mohammad"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1424794874,"creation_date":1424794436,"answer_id":28700793,"question_id":1844688,"body_markdown":"I think this is good way to read all the files in a folder and sub folder&#39;s\r\n\r\n    private static void addfiles (File input,ArrayList&lt;File&gt; files)\r\n    {\r\n        if(input.isDirectory())\r\n        {\r\n            ArrayList &lt;File&gt; path = new ArrayList&lt;File&gt;(Arrays.asList(input.listFiles()));\r\n            for(int i=0 ; i&lt;path.size();++i)\r\n            {\r\n                if(path.get(i).isDirectory())\r\n                {\r\n                    addfiles(path.get(i),files);\r\n                }\r\n                if(path.get(i).isFile())\r\n                {\r\n                \tfiles.add(path.get(i));\r\n                }\r\n            }\r\n        }\r\n        if(input.isFile())\r\n        {\r\n    \t\tfiles.add(input);\r\n        }\r\n    }","title":"How to read all files in a folder from Java?","body":"<p>I think this is good way to read all the files in a folder and sub folder's</p>\n\n<pre><code>private static void addfiles (File input,ArrayList&lt;File&gt; files)\n{\n    if(input.isDirectory())\n    {\n        ArrayList &lt;File&gt; path = new ArrayList&lt;File&gt;(Arrays.asList(input.listFiles()));\n        for(int i=0 ; i&lt;path.size();++i)\n        {\n            if(path.get(i).isDirectory())\n            {\n                addfiles(path.get(i),files);\n            }\n            if(path.get(i).isFile())\n            {\n                files.add(path.get(i));\n            }\n        }\n    }\n    if(input.isFile())\n    {\n        files.add(input);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5264499,"reputation":131,"user_id":4657730,"display_name":"Subhojit Das"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1441804699,"creation_date":1441804307,"answer_id":32480517,"question_id":1844688,"body_markdown":"    void getFiles(){\r\n    \t\tString dirPath = &quot;E:/folder_name&quot;;\r\n    \t\tFile dir = new File(dirPath);\r\n    \t\tString[] files = dir.list();\r\n    \t\tif (files.length == 0) {\r\n    \t\t    System.out.println(&quot;The directory is empty&quot;);\r\n    \t\t} else {\r\n    \t\t    for (String aFile : files) {\r\n    \t\t        System.out.println(aFile);\r\n    \t\t    }\r\n    \t\t}\r\n    \t}","title":"How to read all files in a folder from Java?","body":"<pre><code>void getFiles(){\n        String dirPath = \"E:/folder_name\";\n        File dir = new File(dirPath);\n        String[] files = dir.list();\n        if (files.length == 0) {\n            System.out.println(\"The directory is empty\");\n        } else {\n            for (String aFile : files) {\n                System.out.println(aFile);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401157,"reputation":1787,"user_id":767547,"accept_rate":50,"display_name":"Martin"},"down_vote_count":1,"up_vote_count":37,"is_accepted":false,"score":36,"last_activity_date":1449163633,"creation_date":1449163633,"answer_id":34072431,"question_id":1844688,"body_markdown":"All of the answers on this topic that make use of the new Java 8 functions are neglecting to close the stream. The example in the accepted answer should be:\r\n\r\n    try (Stream&lt;Path&gt; filePathStream=Files.walk(Paths.get(&quot;/home/you/Desktop&quot;))) {\r\n        filePathStream.forEach(filePath -&gt; {\r\n            if (Files.isRegularFile(filePath)) {\r\n                System.out.println(filePath);\r\n            }\r\n        });\r\n    }\r\nFrom the javadoc of the `Files.walk` method:\r\n\r\n&gt; The returned stream encapsulates one or more DirectoryStreams. If\r\n&gt; timely disposal of file system resources is required, the\r\n&gt; try-with-resources construct should be used to ensure that the\r\n&gt; stream&#39;s close method is invoked after the stream operations are completed.\r\n","title":"How to read all files in a folder from Java?","body":"<p>All of the answers on this topic that make use of the new Java 8 functions are neglecting to close the stream. The example in the accepted answer should be:</p>\n\n<pre><code>try (Stream&lt;Path&gt; filePathStream=Files.walk(Paths.get(\"/home/you/Desktop\"))) {\n    filePathStream.forEach(filePath -&gt; {\n        if (Files.isRegularFile(filePath)) {\n            System.out.println(filePath);\n        }\n    });\n}\n</code></pre>\n\n<p>From the javadoc of the <code>Files.walk</code> method:</p>\n\n<blockquote>\n  <p>The returned stream encapsulates one or more DirectoryStreams. If\n  timely disposal of file system resources is required, the\n  try-with-resources construct should be used to ensure that the\n  stream's close method is invoked after the stream operations are completed.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1531303,"reputation":4187,"user_id":3636464,"accept_rate":75,"display_name":"pdp"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1483726319,"creation_date":1483726319,"answer_id":41511741,"question_id":1844688,"body_markdown":"Simple example that works with Java 1.7 to recursively list files in directories specified on the command-line:\r\n\r\n    import java.io.File;\r\n\r\n    public class List {\r\n        public static void main(String[] args) {\r\n            for (String f : args) {\r\n                listDir(f);\r\n            }\r\n        }\r\n\r\n        private static void listDir(String dir) {\r\n            File f = new File(dir);\r\n            File[] list = f.listFiles();\r\n\r\n            if (list == null) {\r\n                return;\r\n            }\r\n\r\n            for (File entry : list) {\r\n                System.out.println(entry.getName());\r\n                if (entry.isDirectory()) {\r\n                    listDir(entry.getAbsolutePath());\r\n                }\r\n            }\r\n        }\r\n    }\r\n","title":"How to read all files in a folder from Java?","body":"<p>Simple example that works with Java 1.7 to recursively list files in directories specified on the command-line:</p>\n\n<pre><code>import java.io.File;\n\npublic class List {\n    public static void main(String[] args) {\n        for (String f : args) {\n            listDir(f);\n        }\n    }\n\n    private static void listDir(String dir) {\n        File f = new File(dir);\n        File[] list = f.listFiles();\n\n        if (list == null) {\n            return;\n        }\n\n        for (File entry : list) {\n            System.out.println(entry.getName());\n            if (entry.isDirectory()) {\n                listDir(entry.getAbsolutePath());\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9746314,"reputation":356,"user_id":7226192,"display_name":"JamesC"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1495182221,"creation_date":1495182221,"answer_id":44064976,"question_id":1844688,"body_markdown":"While I do agree with Rich, Orian and the rest for using:\r\n\r\n        final File keysFileFolder = new File(&lt;path&gt;); \r\n        File[] fileslist = keysFileFolder.listFiles();\r\n        \r\n        if(fileslist != null)\r\n        {\r\n            //Do your thing here...\r\n        }\r\n\r\nfor some reason all the examples here uses **absolute** path (i.e. all the way from root, or, say, drive letter (C:\\\\) for windows..)\r\n\r\nI&#39;d like to add that it is possible to use **relative** path as-well.\r\nSo, if you&#39;re pwd (current directory/folder) is folder1 and you want to parse folder1/subfolder, you simply write (in the code above instead of &lt;path&gt;):\r\n\r\n        final File keysFileFolder = new File(&quot;subfolder&quot;);\r\n","title":"How to read all files in a folder from Java?","body":"<p>While I do agree with Rich, Orian and the rest for using:</p>\n\n<pre><code>    final File keysFileFolder = new File(&lt;path&gt;); \n    File[] fileslist = keysFileFolder.listFiles();\n\n    if(fileslist != null)\n    {\n        //Do your thing here...\n    }\n</code></pre>\n\n<p>for some reason all the examples here uses <strong>absolute</strong> path (i.e. all the way from root, or, say, drive letter (C:\\) for windows..)</p>\n\n<p>I'd like to add that it is possible to use <strong>relative</strong> path as-well.\nSo, if you're pwd (current directory/folder) is folder1 and you want to parse folder1/subfolder, you simply write (in the code above instead of ):</p>\n\n<pre><code>    final File keysFileFolder = new File(\"subfolder\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6410016,"reputation":7025,"user_id":4970079,"accept_rate":76,"display_name":"GOXR3PLUS"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1495996832,"creation_date":1495996832,"answer_id":44230745,"question_id":1844688,"body_markdown":"Java 8 `Files.walk(..)` is good when you are soore it will not throw https://stackoverflow.com/questions/44007055/avoid-java-8-files-walk-termination-cause-of-java-nio-file-accessdeniedexc?noredirect=1&amp;lq=1 .\r\n\r\nHere is a safe solution , not though so elegant as Java 8`Files.walk(..)` :\r\n\r\n    int[] count = {0};\r\n    try {\r\n        Files.walkFileTree(Paths.get(dir.getPath()), new HashSet&lt;FileVisitOption&gt;(Arrays.asList(FileVisitOption.FOLLOW_LINKS)),\r\n                Integer.MAX_VALUE, new SimpleFileVisitor&lt;Path&gt;() {\r\n                    @Override\r\n                    public FileVisitResult visitFile(Path file , BasicFileAttributes attrs) throws IOException {\r\n                        System.out.printf(&quot;Visiting file %s\\n&quot;, file);\r\n                        ++count[0];\r\n    \r\n                        return FileVisitResult.CONTINUE;\r\n                    }\r\n    \r\n                    @Override\r\n                    public FileVisitResult visitFileFailed(Path file , IOException e) throws IOException {\r\n                        System.err.printf(&quot;Visiting failed for %s\\n&quot;, file);\r\n    \r\n                        return FileVisitResult.SKIP_SUBTREE;\r\n                    }\r\n    \r\n                    @Override\r\n                    public FileVisitResult preVisitDirectory(Path dir , BasicFileAttributes attrs) throws IOException {\r\n                         System.out.printf(&quot;About to visit directory %s\\n&quot;, dir);\r\n                        return FileVisitResult.CONTINUE;\r\n                    }\r\n                });\r\n    } catch (IOException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    }","title":"How to read all files in a folder from Java?","body":"<p>Java 8 <code>Files.walk(..)</code> is good when you are soore it will not throw <a href=\"https://stackoverflow.com/questions/44007055/avoid-java-8-files-walk-termination-cause-of-java-nio-file-accessdeniedexc?noredirect=1&amp;lq=1\">Avoid Java 8 Files.walk(..) termination cause of ( java.nio.file.AccessDeniedException )</a> .</p>\n\n<p>Here is a safe solution , not though so elegant as Java 8<code>Files.walk(..)</code> :</p>\n\n<pre><code>int[] count = {0};\ntry {\n    Files.walkFileTree(Paths.get(dir.getPath()), new HashSet&lt;FileVisitOption&gt;(Arrays.asList(FileVisitOption.FOLLOW_LINKS)),\n            Integer.MAX_VALUE, new SimpleFileVisitor&lt;Path&gt;() {\n                @Override\n                public FileVisitResult visitFile(Path file , BasicFileAttributes attrs) throws IOException {\n                    System.out.printf(\"Visiting file %s\\n\", file);\n                    ++count[0];\n\n                    return FileVisitResult.CONTINUE;\n                }\n\n                @Override\n                public FileVisitResult visitFileFailed(Path file , IOException e) throws IOException {\n                    System.err.printf(\"Visiting failed for %s\\n\", file);\n\n                    return FileVisitResult.SKIP_SUBTREE;\n                }\n\n                @Override\n                public FileVisitResult preVisitDirectory(Path dir , BasicFileAttributes attrs) throws IOException {\n                     System.out.printf(\"About to visit directory %s\\n\", dir);\n                    return FileVisitResult.CONTINUE;\n                }\n            });\n} catch (IOException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":498110,"reputation":1330,"user_id":1377112,"accept_rate":57,"display_name":"Salvador Valencia"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500502830,"creation_date":1500501803,"answer_id":45201809,"question_id":1844688,"body_markdown":"Just to expand on the accepted answer I store the filenames to an ArrayList (instead of just dumping them to System.out.println) I created a helper class &quot;MyFileUtils&quot; so it could be imported by other projects:\r\n\r\n    class MyFileUtils {\r\n    \tpublic static void loadFilesForFolder(final File folder, List&lt;String&gt; fileList){\r\n    \t\tfor (final File fileEntry : folder.listFiles()) {\r\n    \t\t\tif (fileEntry.isDirectory()) {\r\n    \t\t\t\tloadFilesForFolder(fileEntry, fileList);\r\n    \t\t\t} else {\r\n    \t\t\t\tfileList.add( fileEntry.getParent() + File.separator + fileEntry.getName() );\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nI added the full path to the file name. \r\nYou would use it like this:\r\n\r\n    import MyFileUtils;\r\n    \r\n    List&lt;String&gt; fileList = new ArrayList&lt;String&gt;();\r\n    final File folder = new File(&quot;/home/you/Desktop&quot;);\r\n    MyFileUtils.loadFilesForFolder(folder, fileList);\r\n    \r\n    // Dump file list values\r\n    for (String fileName : fileList){\r\n    \tSystem.out.println(fileName);\r\n    }\r\n\r\nThe ArrayList is passed by &quot;value&quot;, but the value is used to point to the same ArrayList object living in the JVM Heap. In this way, each recursion call adds filenames to the same ArrayList (we are NOT creating a new ArrayList on each recursive call).\r\n\r\n\r\n","title":"How to read all files in a folder from Java?","body":"<p>Just to expand on the accepted answer I store the filenames to an ArrayList (instead of just dumping them to System.out.println) I created a helper class \"MyFileUtils\" so it could be imported by other projects:</p>\n\n<pre><code>class MyFileUtils {\n    public static void loadFilesForFolder(final File folder, List&lt;String&gt; fileList){\n        for (final File fileEntry : folder.listFiles()) {\n            if (fileEntry.isDirectory()) {\n                loadFilesForFolder(fileEntry, fileList);\n            } else {\n                fileList.add( fileEntry.getParent() + File.separator + fileEntry.getName() );\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>I added the full path to the file name. \nYou would use it like this:</p>\n\n<pre><code>import MyFileUtils;\n\nList&lt;String&gt; fileList = new ArrayList&lt;String&gt;();\nfinal File folder = new File(\"/home/you/Desktop\");\nMyFileUtils.loadFilesForFolder(folder, fileList);\n\n// Dump file list values\nfor (String fileName : fileList){\n    System.out.println(fileName);\n}\n</code></pre>\n\n<p>The ArrayList is passed by \"value\", but the value is used to point to the same ArrayList object living in the JVM Heap. In this way, each recursion call adds filenames to the same ArrayList (we are NOT creating a new ArrayList on each recursive call).</p>\n"},{"tags":[],"owner":{"account_id":929792,"reputation":3142,"user_id":959876,"display_name":"moldovean"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1511184930,"creation_date":1511184930,"answer_id":47393326,"question_id":1844688,"body_markdown":"There are many good answers above, here&#39;s a different approach: In a maven project, everything you put in the resources folder is copied by default in the target/classes folder. To see what is available at runtime \r\n\r\n\r\n     ClassLoader contextClassLoader = \r\n     Thread.currentThread().getContextClassLoader();\r\n        URL resource = contextClassLoader.getResource(&quot;&quot;);\r\n        File file = new File(resource.toURI());\r\n        File[] files = file.listFiles();\r\n        for (File f : files) {\r\n            System.out.println(f.getName());\r\n        }\r\n\r\nNow to get the files from a specific folder, let&#39;s say you have a folder called &#39;res&#39; in your resources folder, just replace:\r\n\r\n    URL resource = contextClassLoader.getResource(&quot;res&quot;);\r\n\r\nIf you want to have access in your com.companyName package then:\r\n    \r\n    contextClassLoader.getResource(&quot;com.companyName&quot;);","title":"How to read all files in a folder from Java?","body":"<p>There are many good answers above, here's a different approach: In a maven project, everything you put in the resources folder is copied by default in the target/classes folder. To see what is available at runtime </p>\n\n<pre><code> ClassLoader contextClassLoader = \n Thread.currentThread().getContextClassLoader();\n    URL resource = contextClassLoader.getResource(\"\");\n    File file = new File(resource.toURI());\n    File[] files = file.listFiles();\n    for (File f : files) {\n        System.out.println(f.getName());\n    }\n</code></pre>\n\n<p>Now to get the files from a specific folder, let's say you have a folder called 'res' in your resources folder, just replace:</p>\n\n<pre><code>URL resource = contextClassLoader.getResource(\"res\");\n</code></pre>\n\n<p>If you want to have access in your com.companyName package then:</p>\n\n<pre><code>contextClassLoader.getResource(\"com.companyName\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4674665,"reputation":1539,"user_id":3785433,"display_name":"Katta Nagarjuna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524947074,"creation_date":1524947074,"answer_id":50080730,"question_id":1844688,"body_markdown":"This will Read Specified file extension files in given path(looks sub folders also)\r\n\r\n    public static Map&lt;String,List&lt;File&gt;&gt; getFileNames(String \r\n    dirName,Map&lt;String,List&lt;File&gt;&gt; filesContainer,final String fileExt){\r\n\t\tString dirPath = dirName;\r\n\t\tList&lt;File&gt;files = new ArrayList&lt;&gt;();\r\n\t\tMap&lt;String,List&lt;File&gt;&gt; completeFiles = filesContainer; \r\n\t\tif(completeFiles == null) {\r\n\t\t\tcompleteFiles = new HashMap&lt;&gt;();\r\n\t\t}\r\n\t\tFile file = new File(dirName);\r\n\t\t\r\n\t\tFileFilter fileFilter = new FileFilter() {\r\n\t\t\t@Override\r\n\t\t\tpublic boolean accept(File file) {\r\n\t\t\t\tboolean acceptFile = false;\r\n\t\t\t\tif(file.isDirectory()) {\r\n\t\t\t\t\tacceptFile = true;\r\n\t\t\t\t}else if (file.getName().toLowerCase().endsWith(fileExt))\r\n\t\t\t      {\r\n\t\t\t\t\tacceptFile = true;\r\n\t\t\t      }\r\n\t\t\t\treturn acceptFile;\r\n\t\t\t}\r\n\t\t};\r\n\t\tfor(File dirfile : file.listFiles(fileFilter)) {\r\n\t\t\tif(dirfile.isFile() &amp;&amp; \r\n    dirfile.getName().toLowerCase().endsWith(fileExt)) {\r\n\t\t\t\tfiles.add(dirfile);\r\n\t\t\t}else if(dirfile.isDirectory()) {\r\n\t\t\t\tif(!files.isEmpty()) {\r\n\t\t\t\t\tcompleteFiles.put(dirPath, files);\t\r\n\t\t\t\t}\r\n\t\t\t\t \r\n    getFileNames(dirfile.getAbsolutePath(),completeFiles,fileExt);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!files.isEmpty()) {\r\n\t\t\tcompleteFiles.put(dirPath, files);\t\r\n\t\t}\r\n\t\treturn completeFiles;\r\n\t}","title":"How to read all files in a folder from Java?","body":"<p>This will Read Specified file extension files in given path(looks sub folders also)</p>\n\n<pre><code>public static Map&lt;String,List&lt;File&gt;&gt; getFileNames(String \ndirName,Map&lt;String,List&lt;File&gt;&gt; filesContainer,final String fileExt){\n    String dirPath = dirName;\n    List&lt;File&gt;files = new ArrayList&lt;&gt;();\n    Map&lt;String,List&lt;File&gt;&gt; completeFiles = filesContainer; \n    if(completeFiles == null) {\n        completeFiles = new HashMap&lt;&gt;();\n    }\n    File file = new File(dirName);\n\n    FileFilter fileFilter = new FileFilter() {\n        @Override\n        public boolean accept(File file) {\n            boolean acceptFile = false;\n            if(file.isDirectory()) {\n                acceptFile = true;\n            }else if (file.getName().toLowerCase().endsWith(fileExt))\n              {\n                acceptFile = true;\n              }\n            return acceptFile;\n        }\n    };\n    for(File dirfile : file.listFiles(fileFilter)) {\n        if(dirfile.isFile() &amp;&amp; \ndirfile.getName().toLowerCase().endsWith(fileExt)) {\n            files.add(dirfile);\n        }else if(dirfile.isDirectory()) {\n            if(!files.isEmpty()) {\n                completeFiles.put(dirPath, files);  \n            }\n\ngetFileNames(dirfile.getAbsolutePath(),completeFiles,fileExt);\n        }\n    }\n    if(!files.isEmpty()) {\n        completeFiles.put(dirPath, files);  \n    }\n    return completeFiles;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4904867,"reputation":628,"user_id":3951861,"display_name":"Ashraf.Shk786"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1526596457,"creation_date":1526596154,"answer_id":50401353,"question_id":1844688,"body_markdown":"This will work fine:\r\n\r\n    private static void addfiles(File inputValVal, ArrayList&lt;File&gt; files)\r\n    {\r\n      if(inputVal.isDirectory())\r\n      {\r\n        ArrayList &lt;File&gt; path = new ArrayList&lt;File&gt;(Arrays.asList(inputVal.listFiles()));\r\n\r\n        for(int i=0; i&lt;path.size(); ++i)\r\n        {\r\n            if(path.get(i).isDirectory())\r\n            {\r\n                addfiles(path.get(i),files);\r\n            }\r\n            if(path.get(i).isFile())\r\n            {\r\n                files.add(path.get(i));\r\n            }\r\n         }\r\n\t\t\r\n\t\t/* \tOptional : if you need to have the counts of all the folders and files you can create 2 global arrays \r\n\t\t\tand store the results of the above 2 if loops inside these arrays */\r\n       }\r\n      \r\n       if(inputVal.isFile())\r\n       {\r\n         files.add(inputVal);\r\n       }\r\n\r\n    }","title":"How to read all files in a folder from Java?","body":"<p>This will work fine:</p>\n\n<pre><code>private static void addfiles(File inputValVal, ArrayList&lt;File&gt; files)\n{\n  if(inputVal.isDirectory())\n  {\n    ArrayList &lt;File&gt; path = new ArrayList&lt;File&gt;(Arrays.asList(inputVal.listFiles()));\n\n    for(int i=0; i&lt;path.size(); ++i)\n    {\n        if(path.get(i).isDirectory())\n        {\n            addfiles(path.get(i),files);\n        }\n        if(path.get(i).isFile())\n        {\n            files.add(path.get(i));\n        }\n     }\n\n    /*  Optional : if you need to have the counts of all the folders and files you can create 2 global arrays \n        and store the results of the above 2 if loops inside these arrays */\n   }\n\n   if(inputVal.isFile())\n   {\n     files.add(inputVal);\n   }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12466108,"reputation":89,"user_id":9075992,"display_name":"Aris Mist"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1528367576,"creation_date":1528366964,"answer_id":50738842,"question_id":1844688,"body_markdown":"You can put the file path to argument and create a list with all the filepaths and not put it the list manually. Then use a for loop and a reader. Example for txt files:\r\n\r\n    public static void main(String[] args) throws IOException{    \r\n    File[] files = new File(args[0].replace(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;)).listFiles(new FilenameFilter() { @Override public boolean accept(File dir, String name) { return name.endsWith(&quot;.txt&quot;); } });\r\n        ArrayList&lt;String&gt; filedir = new ArrayList&lt;String&gt;();\r\n        String FILE_TEST = null;\r\n        for (i=0; i&lt;files.length; i++){\r\n                filedir.add(files[i].toString());\r\n                CSV_FILE_TEST=filedir.get(i) \r\n      \r\n            try(Reader testreader = Files.newBufferedReader(Paths.get(FILE_TEST));\r\n                ){\r\n                  //write your stuff\r\n                     }}}","title":"How to read all files in a folder from Java?","body":"<p>You can put the file path to argument and create a list with all the filepaths and not put it the list manually. Then use a for loop and a reader. Example for txt files:</p>\n\n<pre><code>public static void main(String[] args) throws IOException{    \nFile[] files = new File(args[0].replace(\"\\\\\", \"\\\\\\\\\")).listFiles(new FilenameFilter() { @Override public boolean accept(File dir, String name) { return name.endsWith(\".txt\"); } });\n    ArrayList&lt;String&gt; filedir = new ArrayList&lt;String&gt;();\n    String FILE_TEST = null;\n    for (i=0; i&lt;files.length; i++){\n            filedir.add(files[i].toString());\n            CSV_FILE_TEST=filedir.get(i) \n\n        try(Reader testreader = Files.newBufferedReader(Paths.get(FILE_TEST));\n            ){\n              //write your stuff\n                 }}}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4134530,"reputation":395,"user_id":3391460,"display_name":"Manas Ranjan Mahapatra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1537520269,"creation_date":1537520269,"answer_id":52440140,"question_id":1844688,"body_markdown":"    package com.commandline.folder;\r\n    \r\n    import java.io.File;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Path;\r\n    import java.nio.file.Paths;\r\n    import java.util.stream.Stream;\r\n    \r\n    public class FolderReadingDemo {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tString str = args[0];\r\n    \t\tfinal File folder = new File(str);\r\n    //\t\tlistFilesForFolder(folder);\r\n    \t\tlistFilesForFolder(str);\r\n    \t}\r\n    \r\n    \tpublic static void listFilesForFolder(String str) {\r\n    \t\ttry (Stream&lt;Path&gt; paths = Files.walk(Paths.get(str))) {\r\n    \t\t\tpaths.filter(Files::isRegularFile).forEach(System.out::println);\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void listFilesForFolder(final File folder) {\r\n    \t\tfor (final File fileEntry : folder.listFiles()) {\r\n    \t\t\tif (fileEntry.isDirectory()) {\r\n    \t\t\t\tlistFilesForFolder(fileEntry);\r\n    \t\t\t} else {\r\n    \t\t\t\tSystem.out.println(fileEntry.getName());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"How to read all files in a folder from Java?","body":"<pre><code>package com.commandline.folder;\n\nimport java.io.File;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.stream.Stream;\n\npublic class FolderReadingDemo {\n    public static void main(String[] args) {\n        String str = args[0];\n        final File folder = new File(str);\n//      listFilesForFolder(folder);\n        listFilesForFolder(str);\n    }\n\n    public static void listFilesForFolder(String str) {\n        try (Stream&lt;Path&gt; paths = Files.walk(Paths.get(str))) {\n            paths.filter(Files::isRegularFile).forEach(System.out::println);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void listFilesForFolder(final File folder) {\n        for (final File fileEntry : folder.listFiles()) {\n            if (fileEntry.isDirectory()) {\n                listFilesForFolder(fileEntry);\n            } else {\n                System.out.println(fileEntry.getName());\n            }\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3717619,"reputation":31,"user_id":3093415,"display_name":"WillDev10"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546982104,"creation_date":1546982104,"answer_id":54099812,"question_id":1844688,"body_markdown":"Given a baseDir, lists out all the files and directories below it, written iteratively.\r\n\r\n    \tpublic static List&lt;File&gt; listLocalFilesAndDirsAllLevels(File baseDir) {\r\n\t\t\r\n\t\tList&lt;File&gt;\tcollectedFilesAndDirs \t= new ArrayList&lt;&gt;();\r\n\t\tDeque&lt;File&gt;\tremainingDirs \t\t\t= new ArrayDeque&lt;&gt;();\r\n\t\t\r\n\t\tif(baseDir.exists()) {\r\n\t\t\tremainingDirs.add(baseDir);\r\n\t\t\t\r\n\t\t\twhile(!remainingDirs.isEmpty()) {\r\n\t\t\t\tFile dir = remainingDirs.removeLast();\r\n\t\t\t\tList&lt;File&gt; filesInDir = Arrays.asList(dir.listFiles());\r\n\t\t\t\tfor(File fileOrDir : filesInDir)  {\r\n\t\t\t\t\tcollectedFilesAndDirs.add(fileOrDir);\r\n\t\t\t\t\tif(fileOrDir.isDirectory()) {\r\n\t\t\t\t\t\tremainingDirs.add(fileOrDir);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn collectedFilesAndDirs;\r\n\t}","title":"How to read all files in a folder from Java?","body":"<p>Given a baseDir, lists out all the files and directories below it, written iteratively.</p>\n\n<pre><code>    public static List&lt;File&gt; listLocalFilesAndDirsAllLevels(File baseDir) {\n\n    List&lt;File&gt;  collectedFilesAndDirs   = new ArrayList&lt;&gt;();\n    Deque&lt;File&gt; remainingDirs           = new ArrayDeque&lt;&gt;();\n\n    if(baseDir.exists()) {\n        remainingDirs.add(baseDir);\n\n        while(!remainingDirs.isEmpty()) {\n            File dir = remainingDirs.removeLast();\n            List&lt;File&gt; filesInDir = Arrays.asList(dir.listFiles());\n            for(File fileOrDir : filesInDir)  {\n                collectedFilesAndDirs.add(fileOrDir);\n                if(fileOrDir.isDirectory()) {\n                    remainingDirs.add(fileOrDir);\n                }\n            }\n        }\n    }\n\n    return collectedFilesAndDirs;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15177234,"reputation":925,"user_id":10951602,"display_name":"xxxception"},"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1548851050,"creation_date":1548851050,"answer_id":54440601,"question_id":1844688,"body_markdown":"One remark according to get all files in the directory.  \r\nThe method `Files.walk(path)` will return all files by walking the file tree rooted at the given started file.\r\n\r\nFor instance, there is the next file tree:\r\n\r\n    \\---folder\r\n        |   file1.txt\r\n        |   file2.txt\r\n        |\r\n        \\---subfolder\r\n                file3.txt\r\n                file4.txt\r\n\r\nUsing the `java.nio.file.Files.walk(Path)`:\r\n\r\n    Files.walk(Paths.get(&quot;folder&quot;))\r\n            .filter(Files::isRegularFile)\r\n            .forEach(System.out::println);\r\nGives the following result:\r\n\r\n    folder\\file1.txt\r\n    folder\\file2.txt\r\n    folder\\subfolder\\file3.txt\r\n    folder\\subfolder\\file4.txt\r\n\r\nTo get all files only in the current directory use the `java.nio.file.Files.list(Path)`:\r\n\r\n    Files.list(Paths.get(&quot;folder&quot;))\r\n            .filter(Files::isRegularFile)\r\n            .forEach(System.out::println);\r\nResult:\r\n\r\n    folder\\file1.txt\r\n    folder\\file2.txt\r\n\r\n","title":"How to read all files in a folder from Java?","body":"<p>One remark according to get all files in the directory.<br>\nThe method <code>Files.walk(path)</code> will return all files by walking the file tree rooted at the given started file.</p>\n\n<p>For instance, there is the next file tree:</p>\n\n<pre><code>\\---folder\n    |   file1.txt\n    |   file2.txt\n    |\n    \\---subfolder\n            file3.txt\n            file4.txt\n</code></pre>\n\n<p>Using the <code>java.nio.file.Files.walk(Path)</code>:</p>\n\n<pre><code>Files.walk(Paths.get(\"folder\"))\n        .filter(Files::isRegularFile)\n        .forEach(System.out::println);\n</code></pre>\n\n<p>Gives the following result:</p>\n\n<pre><code>folder\\file1.txt\nfolder\\file2.txt\nfolder\\subfolder\\file3.txt\nfolder\\subfolder\\file4.txt\n</code></pre>\n\n<p>To get all files only in the current directory use the <code>java.nio.file.Files.list(Path)</code>:</p>\n\n<pre><code>Files.list(Paths.get(\"folder\"))\n        .filter(Files::isRegularFile)\n        .forEach(System.out::println);\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>folder\\file1.txt\nfolder\\file2.txt\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2338182,"reputation":308,"user_id":2050055,"display_name":"Vishal Vijayan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641314657,"creation_date":1606921131,"answer_id":65110544,"question_id":1844688,"body_markdown":"We can use org.apache.commons.io.FileUtils, use listFiles() mehtod to read all the files in a given folder.\r\n\r\neg:\r\n\r\n    FileUtils.listFiles(directory, new String[] {&quot;ext1&quot;, &quot;ext2&quot;}, true)\r\nThis read all the files in the given directory with given extensions, we can pass multiple extensions in the array and read recursively within the folder(true parameter).","title":"How to read all files in a folder from Java?","body":"<p>We can use org.apache.commons.io.FileUtils, use listFiles() mehtod to read all the files in a given folder.</p>\n<p>eg:</p>\n<pre><code>FileUtils.listFiles(directory, new String[] {&quot;ext1&quot;, &quot;ext2&quot;}, true)\n</code></pre>\n<p>This read all the files in the given directory with given extensions, we can pass multiple extensions in the array and read recursively within the folder(true parameter).</p>\n"},{"tags":[],"owner":{"account_id":8201651,"reputation":1736,"user_id":6172826,"display_name":"seunggabi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641806369,"creation_date":1641806369,"answer_id":70650106,"question_id":1844688,"body_markdown":"```java\r\npublic static List&lt;File&gt; files(String dirname) {\r\n\tif (dirname == null) {\r\n\t\treturn Collections.emptyList();\r\n\t}\r\n\r\n\tFile dir = new File(dirname);\r\n\tif (!dir.exists()) {\r\n\t\treturn Collections.emptyList();\r\n\t}\r\n\r\n\tif (!dir.isDirectory()) {\r\n\t\treturn Collections.singletonList(file(dirname));\r\n\t}\r\n\r\n\treturn Arrays.stream(Objects.requireNonNull(dir.listFiles()))\r\n\t\t.collect(Collectors.toList());\r\n}\r\n```","title":"How to read all files in a folder from Java?","body":"<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;File&gt; files(String dirname) {\n    if (dirname == null) {\n        return Collections.emptyList();\n    }\n\n    File dir = new File(dirname);\n    if (!dir.exists()) {\n        return Collections.emptyList();\n    }\n\n    if (!dir.isDirectory()) {\n        return Collections.singletonList(file(dirname));\n    }\n\n    return Arrays.stream(Objects.requireNonNull(dir.listFiles()))\n        .collect(Collectors.toList());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13210522,"reputation":414,"user_id":9540910,"display_name":"Collin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679071685,"creation_date":1679071685,"answer_id":75770168,"question_id":1844688,"body_markdown":"A one liner using .map to get all the filenames in `yourDirectory`:\r\n\r\n`List&lt;String&gt; files = Files.list(Paths.get(yourDirectory)).map(path -&gt; path.getFileName().toFile().getName()).collect(Collectors.toList());`","title":"How to read all files in a folder from Java?","body":"<p>A one liner using .map to get all the filenames in <code>yourDirectory</code>:</p>\n<p><code>List&lt;String&gt; files = Files.list(Paths.get(yourDirectory)).map(path -&gt; path.getFileName().toFile().getName()).collect(Collectors.toList());</code></p>\n"},{"tags":[],"owner":{"account_id":9066420,"reputation":174,"user_id":6751061,"display_name":"Nadav Ruskin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690502958,"creation_date":1690502958,"answer_id":76784124,"question_id":1844688,"body_markdown":"Here&#39;s a short one for getting a list of files in a directory:\r\n\r\n```java\r\n        File directory = new File(&quot;path&quot;);\r\n        File[] files = directory.listFiles(File::isFile);\r\n```","title":"How to read all files in a folder from Java?","body":"<p>Here's a short one for getting a list of files in a directory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        File directory = new File(&quot;path&quot;);\n        File[] files = directory.listFiles(File::isFile);\n</code></pre>\n"}],"owner":{"account_id":67639,"reputation":16346,"user_id":197831,"accept_rate":89,"display_name":"M.J."},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1421331,"favorite_count":0,"down_vote_count":5,"up_vote_count":790,"accepted_answer_id":1846349,"answer_count":35,"score":785,"last_activity_date":1690502958,"creation_date":1259897977,"question_id":1844688,"body_markdown":"How to read all the files in a folder through Java? It doesn&#39;t matter which API.","title":"How to read all files in a folder from Java?","body":"<p>How to read all the files in a folder through Java? It doesn't matter which API.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1690505482,"post_id":76784103,"comment_id":135366960,"body_markdown":"The `trace.bat` file is inside the JAR file for your application. You’ll need to write it onto the file system to use it in this way.","body":"The <code>trace.bat</code> file is inside the JAR file for your application. You’ll need to write it onto the file system to use it in this way."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1690524631,"post_id":76784103,"comment_id":135368570,"body_markdown":"Print the value of the [URL] `res`, i.e. `System.out.println(res);` and you will see the problem. In any case you probably don&#39;t need to run the batch file. You can probably use class [ProcessBuilder](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html)","body":"Print the value of the [URL] <code>res</code>, i.e. <code>System.out.println(res);</code> and you will see the problem. In any case you probably don&#39;t need to run the batch file. You can probably use class <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">ProcessBuilder</a>"}],"owner":{"account_id":23495866,"reputation":21,"user_id":17992692,"display_name":"Fezas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690502653,"creation_date":1690502653,"question_id":76784103,"body_markdown":"My project uses bat file in resources (tracert parser project):\r\n```\r\nURL res = getClass().getClassLoader().getResource(&quot;trace.bat&quot;);\r\n            File file = Paths.get(res.toURI()).toFile();\r\n            String absolutePath = file.getAbsolutePath();\r\n            scan = Runtime.getRuntime()\r\n                    .exec(&quot;cmd /c &quot; + absolutePath + &quot; &quot; + ip);\r\n```\r\nДалее я работаю с \r\n```\r\nInputStreamReader inputStreamReader = (new InputStreamReader(scan.getInputStream()));\r\n```\r\nEverything works fine in the IDE. After building in app-image I get an error:\r\n\r\n```\r\n2023-07-28 10:07:22,157 ERROR r.f.s.WorkerConnection [Thread-9] ERROR: \r\njava.nio.file.FileSystemNotFoundException: Provider &quot;jar&quot; not installed\r\n\tat java.nio.file.Path.of(Unknown Source) ~[?:?]\r\n\tat java.nio.file.Paths.get(Unknown Source) ~[?:?]\r\n\tat ru.fezas.scanet.WorkerConnection.runSystemCommand(WorkerConnection.java:130) [scanet-1.0-SNAPSHOT.jar:?]\r\n\tat ru.fezas.scanet.WorkerConnection.run(WorkerConnection.java:166) [scanet-1.0-SNAPSHOT.jar:?]\r\n```\r\nbat file content\r\n```\r\n@echo off\r\nchcp.com 65001\r\ntracert -w 1 %1\r\n```","title":"FileSystemNotFoundException: Provider &quot;jar&quot; not installed when working in a catalog &quot;resources&quot;","body":"<p>My project uses bat file in resources (tracert parser project):</p>\n<pre><code>URL res = getClass().getClassLoader().getResource(&quot;trace.bat&quot;);\n            File file = Paths.get(res.toURI()).toFile();\n            String absolutePath = file.getAbsolutePath();\n            scan = Runtime.getRuntime()\n                    .exec(&quot;cmd /c &quot; + absolutePath + &quot; &quot; + ip);\n</code></pre>\n<p>Далее я работаю с</p>\n<pre><code>InputStreamReader inputStreamReader = (new InputStreamReader(scan.getInputStream()));\n</code></pre>\n<p>Everything works fine in the IDE. After building in app-image I get an error:</p>\n<pre><code>2023-07-28 10:07:22,157 ERROR r.f.s.WorkerConnection [Thread-9] ERROR: \njava.nio.file.FileSystemNotFoundException: Provider &quot;jar&quot; not installed\n    at java.nio.file.Path.of(Unknown Source) ~[?:?]\n    at java.nio.file.Paths.get(Unknown Source) ~[?:?]\n    at ru.fezas.scanet.WorkerConnection.runSystemCommand(WorkerConnection.java:130) [scanet-1.0-SNAPSHOT.jar:?]\n    at ru.fezas.scanet.WorkerConnection.run(WorkerConnection.java:166) [scanet-1.0-SNAPSHOT.jar:?]\n</code></pre>\n<p>bat file content</p>\n<pre><code>@echo off\nchcp.com 65001\ntracert -w 1 %1\n</code></pre>\n"},{"tags":["java","string-formatting","string-concatenation","mud"],"comments":[{"owner":{"account_id":402910,"reputation":50810,"user_id":770361,"accept_rate":90,"display_name":"Luigi Plinge"},"score":9,"creation_date":1318658957,"post_id":7775394,"comment_id":9469042,"body_markdown":"Don&#39;t worry about performance unless you find it&#39;s an issue and that this is the bottleneck. Do whatever you think will lead to the most readable and maintainable code.","body":"Don&#39;t worry about performance unless you find it&#39;s an issue and that this is the bottleneck. Do whatever you think will lead to the most readable and maintainable code."}],"answers":[{"tags":[],"owner":{"account_id":185878,"reputation":7904,"user_id":422870,"display_name":"Saurabh"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1566978907,"creation_date":1318646744,"answer_id":7775419,"question_id":7775394,"body_markdown":"I think String.format looks cleaner.\r\nHowever you can use StringBuilder and use append function to create the string you want","title":"Java concatenate to build string or format","body":"<p>I think String.format looks cleaner.\nHowever you can use StringBuilder and use append function to create the string you want</p>\n"},{"tags":[],"owner":{"account_id":950985,"reputation":1239,"user_id":977143,"display_name":"Tarc&#237;sio J&#250;nior"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1318646746,"creation_date":1318646746,"answer_id":7775420,"question_id":7775394,"body_markdown":"Concateneting with plus, the compilet can transforms the code in performatic way. With string format i don t know. \r\n\r\nI prefer cocatenation with plus, i think that is easer to undersand. ","title":"Java concatenate to build string or format","body":"<p>Concateneting with plus, the compilet can transforms the code in performatic way. With string format i don t know. </p>\n\n<p>I prefer cocatenation with plus, i think that is easer to undersand. </p>\n"},{"tags":[],"owner":{"account_id":974546,"reputation":6646,"user_id":996249,"accept_rate":98,"display_name":"nmagerko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1318646871,"creation_date":1318646871,"answer_id":7775432,"question_id":7775394,"body_markdown":"I will be honest and suggest that you take the first one if you want less typing, or the latter one if you are looking for a more C-style way of doing it.\r\n\r\nI sat here for a minute or two pondering the idea of what could be a problem, but I think it comes down to how much you want to type.\r\n\r\nAnyone else have an idea?","title":"Java concatenate to build string or format","body":"<p>I will be honest and suggest that you take the first one if you want less typing, or the latter one if you are looking for a more C-style way of doing it.</p>\n\n<p>I sat here for a minute or two pondering the idea of what could be a problem, but I think it comes down to how much you want to type.</p>\n\n<p>Anyone else have an idea?</p>\n"},{"tags":[],"owner":{"account_id":973524,"reputation":301,"user_id":995518,"display_name":"Jake Thompson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1318646934,"creation_date":1318646934,"answer_id":7775437,"question_id":7775394,"body_markdown":"Assuming you are going to reuse base strings often  Store your templates like \r\n\r\nString mystring = &quot;You $1 to $2 \\&quot;$3\\&quot;&quot;\r\n\r\nThen just get a copy and do a replace $X with what you want.\r\n\r\nThis would work really well for a resource file too.","title":"Java concatenate to build string or format","body":"<p>Assuming you are going to reuse base strings often  Store your templates like </p>\n\n<p>String mystring = \"You $1 to $2 \\\"$3\\\"\"</p>\n\n<p>Then just get a copy and do a replace $X with what you want.</p>\n\n<p>This would work really well for a resource file too.</p>\n"},{"tags":[],"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1318647057,"creation_date":1318647057,"answer_id":7775451,"question_id":7775394,"body_markdown":"The best, performance-wise, would probably be to use a StringBuffer.","title":"Java concatenate to build string or format","body":"<p>The best, performance-wise, would probably be to use a StringBuffer.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":30,"is_accepted":true,"score":30,"last_activity_date":1690501249,"creation_date":1318650146,"answer_id":7775598,"question_id":7775394,"body_markdown":"If the strings are built using a single concatenation expression; e.g.\r\n\r\n    String s = &quot;You &quot; + verb + &quot; to &quot; + user + &quot; \\&quot;&quot; + text + &quot;\\&quot;&quot;;\r\n\r\nthen this is more or less equivalent to the more long winded:\r\n\r\n    StringBuilder sb = new StringBuilder();\r\n    sb.append(&quot;You&quot;);\r\n    sb.append(verb);\r\n    sb.append(&quot; to &quot;);\r\n    sb.append(user);\r\n    sb.append(&quot; \\&quot;&quot;);\r\n    sb.append(text );\r\n    sb.append(&#39;&quot;&#39;);\r\n    String s = sb.toString();\r\n\r\nIn fact, a classic Java compiler will compile the former into the latter ... almost.  In Java 9, they implemented [JEP 280][1] which replaces the sequence of constructor and method calls in the bytecodes with a single `invokedynamic` bytecode.  The runtime system then optimizes this&lt;sup&gt;1&lt;/sup&gt;. \r\n\r\nThe efficiency issues arise when you start creating intermediate strings, or building strings using `+=` and so on.  In some cases,  using an explicit `StringBuilder` can be&lt;sup&gt;2&lt;/sup&gt; more efficient because you are reduce the amount of copying.\r\n\r\nNow when you use `String.format()`, it should be using a `StringBuilder` under the hood.  However, `format` also has to parse the format String each time you make the call, and that is an overhead you don&#39;t have if you do the string building optimally.\r\n\r\n----------\r\n\r\nHaving said this, My Advice would be to write the code in the way that is most readable.  Only worry about the most efficient way to build strings if *profiling* tells you that this is a real performance concern.  (Right now, you are spending time thinking about ways to address a performance issue that may turn out to be insignificant or irrelevant.)\r\n\r\nAnother answer mentions that using a format string may simplify support for multiple languages.  This is true, though there are limits as to what you can do with respect to such things as plurals, genders, and so on.\r\n\r\n--------------------\r\n\r\n\r\n&lt;sup&gt;1 - As a consequence, hand optimization as per the example above might actually have *negative* consequences, for Java 9 or later.  But this is a risk you take whenever you micro-optimize.&lt;br&gt;\r\n2 - Analyzing and predicting *when* this happens *in general* is difficult.&lt;/sup&gt;\r\n\r\n  [1]: http://openjdk.java.net/jeps/280","title":"Java concatenate to build string or format","body":"<p>If the strings are built using a single concatenation expression; e.g.</p>\n<pre><code>String s = &quot;You &quot; + verb + &quot; to &quot; + user + &quot; \\&quot;&quot; + text + &quot;\\&quot;&quot;;\n</code></pre>\n<p>then this is more or less equivalent to the more long winded:</p>\n<pre><code>StringBuilder sb = new StringBuilder();\nsb.append(&quot;You&quot;);\nsb.append(verb);\nsb.append(&quot; to &quot;);\nsb.append(user);\nsb.append(&quot; \\&quot;&quot;);\nsb.append(text );\nsb.append('&quot;');\nString s = sb.toString();\n</code></pre>\n<p>In fact, a classic Java compiler will compile the former into the latter ... almost.  In Java 9, they implemented <a href=\"http://openjdk.java.net/jeps/280\" rel=\"nofollow noreferrer\">JEP 280</a> which replaces the sequence of constructor and method calls in the bytecodes with a single <code>invokedynamic</code> bytecode.  The runtime system then optimizes this<sup>1</sup>.</p>\n<p>The efficiency issues arise when you start creating intermediate strings, or building strings using <code>+=</code> and so on.  In some cases,  using an explicit <code>StringBuilder</code> can be<sup>2</sup> more efficient because you are reduce the amount of copying.</p>\n<p>Now when you use <code>String.format()</code>, it should be using a <code>StringBuilder</code> under the hood.  However, <code>format</code> also has to parse the format String each time you make the call, and that is an overhead you don't have if you do the string building optimally.</p>\n<hr />\n<p>Having said this, My Advice would be to write the code in the way that is most readable.  Only worry about the most efficient way to build strings if <em>profiling</em> tells you that this is a real performance concern.  (Right now, you are spending time thinking about ways to address a performance issue that may turn out to be insignificant or irrelevant.)</p>\n<p>Another answer mentions that using a format string may simplify support for multiple languages.  This is true, though there are limits as to what you can do with respect to such things as plurals, genders, and so on.</p>\n<hr />\n<p><sup>1 - As a consequence, hand optimization as per the example above might actually have <em>negative</em> consequences, for Java 9 or later.  But this is a risk you take whenever you micro-optimize.<br>\n2 - Analyzing and predicting <em>when</em> this happens <em>in general</em> is difficult.</sup></p>\n"},{"tags":[],"owner":{"account_id":900861,"reputation":2676,"user_id":937049,"accept_rate":50,"display_name":"Steve J"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1318653748,"creation_date":1318651732,"answer_id":7775676,"question_id":7775394,"body_markdown":"The key to keeping it simple is to never look at it.  Here is what I mean:\r\n\r\n    Joiner join = Joiner.on(&quot; &quot;);\r\n    \r\n    public void constructMessage(StringBuilder sb, Iterable&lt;String&gt; words) {\r\n      join.appendTo(sb, words);\r\n    }\r\n\r\nI&#39;m using the Guava Joiner class to make readability a non-issue.  What could be clearer than &quot;join&quot;?  All the nasty bits regarding concatenation are nicely hidden away.  By using Iterable&lt;String&gt;, I can use this method with all sorts of data structures, Lists being the most obvious.\r\n\r\nHere is an example of a call using a Guava ImmutableList (which is more efficient than a regular list, since any methods that modify the list just throw exceptions, and correctly represents the fact that constructMessage() cannot change the list of words, just consume it):\r\n\r\n    StringBuilder outputMessage = new StringBuilder();\r\n    constructMessage(outputMessage, \r\n             new ImmutableList.Builder&lt;String&gt;()\r\n                .add(&quot;You&quot;, verb, &quot;to&quot;, user, &quot;\\&quot;&quot;, text, &quot;\\&quot;&quot;)\r\n                .build());\r\n\r\n","title":"Java concatenate to build string or format","body":"<p>The key to keeping it simple is to never look at it.  Here is what I mean:</p>\n\n<pre><code>Joiner join = Joiner.on(\" \");\n\npublic void constructMessage(StringBuilder sb, Iterable&lt;String&gt; words) {\n  join.appendTo(sb, words);\n}\n</code></pre>\n\n<p>I'm using the Guava Joiner class to make readability a non-issue.  What could be clearer than \"join\"?  All the nasty bits regarding concatenation are nicely hidden away.  By using Iterable, I can use this method with all sorts of data structures, Lists being the most obvious.</p>\n\n<p>Here is an example of a call using a Guava ImmutableList (which is more efficient than a regular list, since any methods that modify the list just throw exceptions, and correctly represents the fact that constructMessage() cannot change the list of words, just consume it):</p>\n\n<pre><code>StringBuilder outputMessage = new StringBuilder();\nconstructMessage(outputMessage, \n         new ImmutableList.Builder&lt;String&gt;()\n            .add(\"You\", verb, \"to\", user, \"\\\"\", text, \"\\\"\")\n            .build());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":975919,"reputation":39,"user_id":997135,"display_name":"user997135"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1363197324,"creation_date":1318703292,"answer_id":7779781,"question_id":7775394,"body_markdown":"I think that concatenation with `+` is more readable than using `String.format`.\r\n\r\n`String.format` is good when you need to format number and dates.","title":"Java concatenate to build string or format","body":"<p>I think that concatenation with <code>+</code> is more readable than using <code>String.format</code>.</p>\n\n<p><code>String.format</code> is good when you need to format number and dates.</p>\n"}],"owner":{"account_id":194764,"reputation":345,"user_id":437297,"accept_rate":75,"display_name":"two13"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51025,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":7775598,"answer_count":8,"score":16,"last_activity_date":1690501249,"creation_date":1318646414,"question_id":7775394,"body_markdown":"I&#39;m writing a MUD (text based game) at the moment using java.  One of the major aspects of a MUD is formatting strings and sending it back to the user.  How would this best be accomplished?\r\n\r\nSay I wanted to send the following string:\r\n\r\nYou say to Someone &quot;Hello!&quot; - where &quot;Someone&quot;, &quot;say&quot; and &quot;Hello!&quot; are all variables.  Which would be best performance wise?\r\n\r\n`&quot;You &quot; + verb + &quot; to &quot; + user + &quot; \\&quot;&quot; + text + &quot;\\&quot;&quot;`\r\n\r\nor\r\n\r\n`String.format(&quot;You %1$s to %2$s \\&quot;%3$s\\&quot;&quot;, verb, user, text)`\r\n\r\nor some other option?\r\n\r\nI&#39;m not sure which is going to be easier to use in the end (which is important because it&#39;ll be everywhere), but I&#39;m thinking about it at this point because concatenating with +&#39;s is getting a bit confusing with some of the bigger lines. I feel that using StringBuilder in this case will simply make it even less readable.\r\n\r\nAny suggestion here?","title":"Java concatenate to build string or format","body":"<p>I'm writing a MUD (text based game) at the moment using java.  One of the major aspects of a MUD is formatting strings and sending it back to the user.  How would this best be accomplished?</p>\n\n<p>Say I wanted to send the following string:</p>\n\n<p>You say to Someone \"Hello!\" - where \"Someone\", \"say\" and \"Hello!\" are all variables.  Which would be best performance wise?</p>\n\n<p><code>\"You \" + verb + \" to \" + user + \" \\\"\" + text + \"\\\"\"</code></p>\n\n<p>or</p>\n\n<p><code>String.format(\"You %1$s to %2$s \\\"%3$s\\\"\", verb, user, text)</code></p>\n\n<p>or some other option?</p>\n\n<p>I'm not sure which is going to be easier to use in the end (which is important because it'll be everywhere), but I'm thinking about it at this point because concatenating with +'s is getting a bit confusing with some of the bigger lines. I feel that using StringBuilder in this case will simply make it even less readable.</p>\n\n<p>Any suggestion here?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9711,"page":281,"page_size":100}
